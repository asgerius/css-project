[{"tags": ["c++"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1482968979, "post_id": 41371303, "comment_id": 69944373, "body": "<code>if</code> what please?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1482969044, "post_id": 41371303, "comment_id": 69944389, "body": "What <code>if</code>? Your post doesn&#39;t contain one."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1482969047, "post_id": 41371303, "comment_id": 69944391, "body": "What you &quot;also saw people do&quot; is not the same thing as you saw first. The two loops are <b><i>not</i></b> the same."}, {"owner": {"reputation": 147, "user_id": 6793470, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/60aa7b5151f7d63fcec0b0a465199719?s=128&d=identicon&r=PG&f=1", "display_name": "John Tan", "link": "https://stackoverflow.com/users/6793470/john-tan"}, "edited": false, "score": 0, "creation_date": 1482969160, "post_id": 41371303, "comment_id": 69944425, "body": "I removed if(), only while(). sorry for the confusion."}, {"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 3, "creation_date": 1482969184, "post_id": 41371303, "comment_id": 69944437, "body": "The <code>b = c</code> expression itself has a value of <code>c</code>, therefore you can do things like <code>a = b = c</code> to assign the value of <code>c</code> to both <code>a</code> and <code>b</code>. It is also what makes <code>if&#47;while (cur = cur-&gt;next) { ... }</code> possible."}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 4, "creation_date": 1482969269, "post_id": 41371303, "comment_id": 69944465, "body": "Your second code snippet is both wrong (off by one on the count) and will crash if called on an empty list..."}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1482969713, "post_id": 41371303, "comment_id": 69944601, "body": "IMHO this type of construct in your second snippet is better expressed with a <code>for</code> loop instead of <code>while</code>."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1482973424, "post_id": 41371303, "comment_id": 69945455, "body": "@ChrisDodd: Pleeeease find a way to meld this into an answer, as the existing ones do not mention it and it is the most crucial detail here."}], "answers": [{"tags": [], "owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "is_accepted": false, "score": 0, "last_activity_date": 1482969821, "creation_date": 1482969821, "answer_id": 41371424, "question_id": 41371303, "link": "https://stackoverflow.com/questions/41371303/c-while-condition-on-the-execution-of-a-line-of-code/41371424#41371424", "title": "C++ while() ... condition on the execution of a line of code", "body": "<p>Your example is a little twisted, but as for your question:</p>\n\n<blockquote>\n  <p>can I always condition my while() on the execution of a line of code (e.x. in this topic, condition on curr = curr->next)? If not, what are the edge cases?</p>\n</blockquote>\n\n<p>The condition in a <code>while</code> can be any expression that's implicitly convertible to <code>bool</code>.  In your example, \"<code>curr = curr-&gt;next</code>\" evaluates to a pointer, which fits this requirement.</p>\n\n<blockquote>\n  <p>And is this a good practice?</p>\n</blockquote>\n\n<p>Code that doesn't confuse you is good practice.</p>\n"}, {"tags": [], "owner": {"reputation": 2918, "user_id": 706853, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9c30e27447b27ce9c8645eadb94efe92?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/706853/alex"}, "is_accepted": true, "score": 2, "last_activity_date": 1482970698, "last_edit_date": 1482970698, "creation_date": 1482970375, "answer_id": 41371509, "question_id": 41371303, "link": "https://stackoverflow.com/questions/41371303/c-while-condition-on-the-execution-of-a-line-of-code/41371509#41371509", "title": "C++ while() ... condition on the execution of a line of code", "body": "<p>In C++, operators can have return values just like functions. Whether you can use an expression as a conditional entirely depends on what they return. For that, you'll have to consult the documentation.</p>\n\n<p>In an assignment: <code>a = b</code>, the default behavior is to return whatever the value of <code>b</code> is; this is so that chain assignments like <code>a = b = c = 5</code> would work.</p>\n\n<p>That expression would be equivalent to <code>a = (b = (c = 5))</code>. <code>c = 5</code> will return 5, the expression becomes <code>a = (b = 5)</code>, and <code>b = 5</code> returns 5, and so once again, the expression becomes <code>a = 5</code>, thus assigning 5 to <code>a</code>, <code>b</code>, and <code>c</code>.</p>\n\n<p>A stream object can be directly evaluated as a bool because it was <a href=\"http://en.cppreference.com/w/cpp/io/basic_ios/operator_bool\" rel=\"nofollow noreferrer\">designed to do so</a> via the overridden bool operator.</p>\n\n<p>In the case of a <code>&gt;&gt;</code> operator on a stream object, that operator is overridden to return the stream object, so in something like: <code>while (cin &gt;&gt; userInput)</code>, <code>cin &gt;&gt; userInput</code> returns <code>cin</code>, which will yield either true or false.</p>\n\n<blockquote>\n  <p>Is this good practice?</p>\n</blockquote>\n\n<p>I'm still a university student, so grains of salt needs to be taken with this. In the case of a stream, I'd say it's good practice as this is a well known pattern to do things. Most people can tell what you intend to do straightaway whereas alternatives aren't as clear.</p>\n\n<p>As for the assignment, I'm leaning towards no, but it depends on who's reading your code and what you're doing. If you use it too much, it may become hard to differentiate between things like <code>if (userInput = 5)</code> and <code>if (userInput == 5)</code>, making bugs hard to find.</p>\n"}, {"tags": [], "owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "is_accepted": false, "score": 1, "last_activity_date": 1482981354, "last_edit_date": 1495540805, "creation_date": 1482981354, "answer_id": 41372672, "question_id": 41371303, "link": "https://stackoverflow.com/questions/41371303/c-while-condition-on-the-execution-of-a-line-of-code/41372672#41372672", "title": "C++ while() ... condition on the execution of a line of code", "body": "<p>The basic concept is that the expression inside the while loop must be convertible to a <code>bool</code>.  </p>\n\n<p>The <code>curr = curr-&gt;next</code> expression returns the left hand side of the expression by reference (see <a href=\"https://stackoverflow.com/questions/22609067/is-chained-assignment-in-c-c-undefined-behavior\">chained assignments</a>).  And the left hand side of the expression is a pointer, which is convertible to a boolean.  If the pointer is equal to <code>nullptr</code> then the converted boolean value will be a false, otherwise it will be a true. </p>\n\n<p>The expression <code>content &gt;&gt; outputStr</code> returns a reference to the <code>content</code> stream.  That is the reason why you can chain the <code>&gt;&gt;</code> operator like so</p>\n\n<pre><code>cin &gt;&gt; a &gt;&gt; b;\n</code></pre>\n\n<p><code>cin &gt;&gt; a</code> returns a reference to the <code>cin</code> object, therefore the evaluation of the expression works like this </p>\n\n<pre><code>cin &gt;&gt; a;\ncin &gt;&gt; b;\n</code></pre>\n\n<p>And the <code>cin</code> object has a member function defined that allows it to be convertible to a boolean expression (<a href=\"http://en.cppreference.com/w/cpp/io/basic_ios/operator_bool\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/io/basic_ios/operator_bool</a>), so you can do something like this </p>\n\n<pre><code>cin &gt;&gt; a;\ncout &lt;&lt; \"cin has failed (true/false) : \" &lt;&lt; std::boolalpha &lt;&lt; static_cast&lt;bool&gt;(cin) &lt;&lt; endl;\n// static_cast&lt;bool&gt;(cin) is the same as cin.(operator bool()) \n// if that syntax exists\n</code></pre>\n\n<p>That converts the <code>cin</code> object to a boolean expression with the <code>operator bool()</code> method.  Something in a boolean expression like in an <code>if()</code> statement or a <code>while()</code> gets converted to a boolean. </p>\n\n<blockquote>\n  <p>I am wondering can I always condition my while() on the execution of a line of code (e.x. in this topic, condition on curr = curr->next)? If not, what are the edge cases? And is this a good practice?</p>\n</blockquote>\n\n<p>You can do so if the expression is convertible to a <code>bool</code>, and in many cases embedding the expression in a loop is an idiomatic use of the \"conversion to bool\" feature.  The edge cases depend on the implementation details of the expression. </p>\n"}], "owner": {"reputation": 147, "user_id": 6793470, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/60aa7b5151f7d63fcec0b0a465199719?s=128&d=identicon&r=PG&f=1", "display_name": "John Tan", "link": "https://stackoverflow.com/users/6793470/john-tan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 41371509, "answer_count": 3, "score": -1, "last_activity_date": 1482981354, "creation_date": 1482968921, "last_edit_date": 1482969121, "question_id": 41371303, "link": "https://stackoverflow.com/questions/41371303/c-while-condition-on-the-execution-of-a-line-of-code", "title": "C++ while() ... condition on the execution of a line of code", "body": "<p>Given the head of linked list, when walking through a linked list to calculate the size of the list, the common way to do it may be </p>\n\n<pre><code>ListNode* curr = head;\nint count = 0;\nwhile(curr) {\n    curr = curr-&gt;next;\n    count++;\n}\n</code></pre>\n\n<p>But I also saw people do this:</p>\n\n<pre><code>ListNode* curr = head;\nint count = 0;\nwhile(curr = curr-&gt;next) {\n    count++;\n}\n</code></pre>\n\n<p>I recall that in parsing string, we often do</p>\n\n<pre><code>stringstream content(intputStr);\nstring outputStr;\nwhile(content &gt;&gt; outputStr) {\n    ...\n}\n</code></pre>\n\n<p>I am wondering can I always condition my while() on the execution of a line of code (e.x. in this topic, condition on curr = curr->next)? If not, what are the edge cases? And is this a good practice?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "compiler-errors"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 3, "creation_date": 1482968943, "post_id": 41371279, "comment_id": 69944363, "body": "Tip: Don&#39;t place <code>using namespace</code> statements in header files. Bad mojo."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1482968969, "post_id": 41371279, "comment_id": 69944371, "body": "Post the code that calls the function."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 1, "creation_date": 1482969056, "post_id": 41371279, "comment_id": 69944398, "body": "<a href=\"http://coliru.stacked-crooked.com/a/ca78d2b408cb7b08\" rel=\"nofollow noreferrer\">The code you show compiles fine</a>.  There is probably a problem in code that you are not showing us."}, {"owner": {"reputation": 3, "user_id": 7351839, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-StEnXyOMg1s/AAAAAAAAAAI/AAAAAAAAAB8/qJMbSGK_dy8/photo.jpg?sz=128", "display_name": "Igor Beracka", "link": "https://stackoverflow.com/users/7351839/igor-beracka"}, "edited": false, "score": 0, "creation_date": 1482969184, "post_id": 41371279, "comment_id": 69944436, "body": "I didn&#39;t called function yet, in the main i have just this: return 0;.."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1593881"}, "edited": false, "score": 1, "creation_date": 1482969222, "post_id": 41371279, "comment_id": 69944447, "body": "@IgorBeracka Where is <code>main()</code> located? You should show us the code."}, {"owner": {"reputation": 3, "user_id": 7351839, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-StEnXyOMg1s/AAAAAAAAAAI/AAAAAAAAAB8/qJMbSGK_dy8/photo.jpg?sz=128", "display_name": "Igor Beracka", "link": "https://stackoverflow.com/users/7351839/igor-beracka"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1482969460, "post_id": 41371279, "comment_id": 69944522, "body": "@DrewDormann I have other classes but they have compiled fine, and they are not using class State or InitialState yet.."}, {"owner": {"reputation": 3, "user_id": 7351839, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-StEnXyOMg1s/AAAAAAAAAAI/AAAAAAAAAB8/qJMbSGK_dy8/photo.jpg?sz=128", "display_name": "Igor Beracka", "link": "https://stackoverflow.com/users/7351839/igor-beracka"}, "edited": false, "score": 0, "creation_date": 1482970151, "post_id": 41371279, "comment_id": 69944736, "body": "@RawN i have posted all the code.."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1593881"}, "edited": false, "score": 0, "creation_date": 1482970313, "post_id": 41371279, "comment_id": 69944775, "body": "@IgorBeracka Try to squeeze it into a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>. Minimal being the keyword."}, {"owner": {"reputation": 28373, "user_id": 4926357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f559694d3ca65b39220166b865276d?s=128&d=identicon&r=PG&f=1", "display_name": "A.S.H", "link": "https://stackoverflow.com/users/4926357/a-s-h"}, "edited": false, "score": 0, "creation_date": 1482970508, "post_id": 41371279, "comment_id": 69944833, "body": "and remove <code>using namespace std;</code> from header files, and add the keyword <code>override</code> after the declaration of <code>setView</code> in <code>InitialState.h</code> : <code>void setView(ostream&amp; screen) const override;</code>. These will help narrowing the problem for the guys trying to help."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1482970892, "post_id": 41371279, "comment_id": 69944928, "body": "Identify the line that causes the error."}, {"owner": {"reputation": 3, "user_id": 7351839, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-StEnXyOMg1s/AAAAAAAAAAI/AAAAAAAAAB8/qJMbSGK_dy8/photo.jpg?sz=128", "display_name": "Igor Beracka", "link": "https://stackoverflow.com/users/7351839/igor-beracka"}, "edited": false, "score": 0, "creation_date": 1482971060, "post_id": 41371279, "comment_id": 69944962, "body": "@latedeveloper here is the error in line 6 of InitialState.cpp:                                          d:\\documents\\visual studio 2015\\projects\\atmtest\\atm\\initialstate.cpp(6): error C2509: &#39;setView&#39;: member function not declared in &#39;InitialState&#39; 1&gt;  d:\\documents\\visual studio 2015\\projects\\atmtest\\atm\\initialstate.h(6): note: see declaration of &#39;InitialState&#39;"}, {"owner": {"reputation": 3, "user_id": 7351839, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-StEnXyOMg1s/AAAAAAAAAAI/AAAAAAAAAB8/qJMbSGK_dy8/photo.jpg?sz=128", "display_name": "Igor Beracka", "link": "https://stackoverflow.com/users/7351839/igor-beracka"}, "reply_to_user": {"reputation": 28373, "user_id": 4926357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f559694d3ca65b39220166b865276d?s=128&d=identicon&r=PG&f=1", "display_name": "A.S.H", "link": "https://stackoverflow.com/users/4926357/a-s-h"}, "edited": false, "score": 0, "creation_date": 1482971336, "post_id": 41371279, "comment_id": 69945017, "body": "@A.S.H why i have to remove using namespace std?"}, {"owner": {"reputation": 28373, "user_id": 4926357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f559694d3ca65b39220166b865276d?s=128&d=identicon&r=PG&f=1", "display_name": "A.S.H", "link": "https://stackoverflow.com/users/4926357/a-s-h"}, "edited": false, "score": 0, "creation_date": 1482971342, "post_id": 41371279, "comment_id": 69945019, "body": "@latedeveloper I guess it is when compiling <code>InitialState.cpp</code> the method <code>setView</code> when attempting to define seems like undeclared for the compiler"}, {"owner": {"reputation": 28373, "user_id": 4926357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f559694d3ca65b39220166b865276d?s=128&d=identicon&r=PG&f=1", "display_name": "A.S.H", "link": "https://stackoverflow.com/users/4926357/a-s-h"}, "edited": false, "score": 0, "creation_date": 1482971398, "post_id": 41371279, "comment_id": 69945030, "body": "@IgorBeracka it is considered bad practice and source for trouble in header files, and even in source files for the pros."}, {"owner": {"reputation": 3, "user_id": 7351839, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-StEnXyOMg1s/AAAAAAAAAAI/AAAAAAAAAB8/qJMbSGK_dy8/photo.jpg?sz=128", "display_name": "Igor Beracka", "link": "https://stackoverflow.com/users/7351839/igor-beracka"}, "reply_to_user": {"reputation": 28373, "user_id": 4926357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f559694d3ca65b39220166b865276d?s=128&d=identicon&r=PG&f=1", "display_name": "A.S.H", "link": "https://stackoverflow.com/users/4926357/a-s-h"}, "edited": false, "score": 0, "creation_date": 1482971409, "post_id": 41371279, "comment_id": 69945035, "body": "@A.S.H i have tried with override, but the same error is showing"}, {"owner": {"reputation": 28373, "user_id": 4926357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f559694d3ca65b39220166b865276d?s=128&d=identicon&r=PG&f=1", "display_name": "A.S.H", "link": "https://stackoverflow.com/users/4926357/a-s-h"}, "edited": false, "score": 0, "creation_date": 1482971474, "post_id": 41371279, "comment_id": 69945047, "body": "@IgorBeracka Yes I know, but I was asking for some first steps in the right direction."}, {"owner": {"reputation": 28373, "user_id": 4926357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f559694d3ca65b39220166b865276d?s=128&d=identicon&r=PG&f=1", "display_name": "A.S.H", "link": "https://stackoverflow.com/users/4926357/a-s-h"}, "edited": false, "score": 0, "creation_date": 1482971861, "post_id": 41371279, "comment_id": 69945118, "body": "@IgorBeracka would you do me a favor? just for checking: replace all those <code>ostream&amp;</code> with <code>std::ostream&amp;</code>? Do it in all files of State and InitialState (.h and .cpp)"}, {"owner": {"reputation": 3, "user_id": 7351839, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-StEnXyOMg1s/AAAAAAAAAAI/AAAAAAAAAB8/qJMbSGK_dy8/photo.jpg?sz=128", "display_name": "Igor Beracka", "link": "https://stackoverflow.com/users/7351839/igor-beracka"}, "reply_to_user": {"reputation": 28373, "user_id": 4926357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f559694d3ca65b39220166b865276d?s=128&d=identicon&r=PG&f=1", "display_name": "A.S.H", "link": "https://stackoverflow.com/users/4926357/a-s-h"}, "edited": false, "score": 0, "creation_date": 1482972332, "post_id": 41371279, "comment_id": 69945223, "body": "@A.S.H i have done that and again it shows the same error, I have started a new project and i am adding a functions one by one to see what causes the problem..also i didn&#39;t mentioned that i have make all these files in one static library file and AtmTest in executable file..i have refferenced it and included the Static library in the exe file.."}, {"owner": {"reputation": 3, "user_id": 7351839, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-StEnXyOMg1s/AAAAAAAAAAI/AAAAAAAAAB8/qJMbSGK_dy8/photo.jpg?sz=128", "display_name": "Igor Beracka", "link": "https://stackoverflow.com/users/7351839/igor-beracka"}, "edited": false, "score": 1, "creation_date": 1482974166, "post_id": 41371279, "comment_id": 69945610, "body": "I have created new project and copied function by function and it works now..wtf :/"}, {"owner": {"reputation": 2255, "user_id": 1523774, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7441fc54b8e834ed0c0bc43f7b65ea20?s=128&d=identicon&r=PG", "display_name": "Konstantin", "link": "https://stackoverflow.com/users/1523774/konstantin"}, "edited": false, "score": 0, "creation_date": 1483480759, "post_id": 41371279, "comment_id": 70112496, "body": "<a href=\"http://oop.etf.rs/domaci/2016-2017/dz3/OOP_DZ3_v1.pdf\" rel=\"nofollow noreferrer\">oop.etf.rs/domaci/2016-2017/dz3/OOP_DZ3_v1.pdf</a> :)"}], "answers": [{"tags": [], "owner": {"reputation": 644, "user_id": 7333037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab3a4873895bfc709cb4c1725bafc87a?s=128&d=identicon&r=PG&f=1", "display_name": "Laszlo", "link": "https://stackoverflow.com/users/7333037/laszlo"}, "is_accepted": true, "score": 0, "last_activity_date": 1482974745, "creation_date": 1482974745, "answer_id": 41372010, "question_id": 41371279, "link": "https://stackoverflow.com/questions/41371279/error-c2509-member-function-not-declared-in-derived-class/41372010#41372010", "title": "error C2509: member function not declared in derived class", "body": "<p>The problem: InitialState.h is precompiled, and you are linking to a prior version of InitialState.h. Clean, rebuild, and/or disable precompiled headers altogether.</p>\n\n<p>I suspect that, because:</p>\n\n<ol>\n<li>I can reproduce the error by commenting out the declaration of setView() in InitialState.h </li>\n<li>The resulting error message refers to line 3 of InitialState.cpp and the error message you posted refers to line 6, which indicates that the posted source code did not produce that error message.</li>\n</ol>\n\n<p>To reproduce the error, one has to comment out the setView() decalration from the InitialState class:</p>\n\n<pre><code>class InitialState : public State {\npublic:\n    void execute() {}\n    void onExit() {}\n    //void setView(ostream&amp; screen) const;\n};\n</code></pre>\n\n<p>Then one gets the following error message:</p>\n\n<pre><code>1&gt;InitialState.cpp(3): error C2509: 'setView' : member function not declared in 'InitialState'\n1&gt;          c:\\users\\laci\\desktop\\samples\\stackoverflow\\InitialState.h(6) : see declaration of 'InitialState'\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7351839, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-StEnXyOMg1s/AAAAAAAAAAI/AAAAAAAAAB8/qJMbSGK_dy8/photo.jpg?sz=128", "display_name": "Igor Beracka", "link": "https://stackoverflow.com/users/7351839/igor-beracka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 977, "favorite_count": 0, "closed_date": 1482983801, "accepted_answer_id": 41372010, "answer_count": 1, "score": 0, "last_activity_date": 1482974745, "creation_date": 1482968699, "last_edit_date": 1482972477, "question_id": 41371279, "link": "https://stackoverflow.com/questions/41371279/error-c2509-member-function-not-declared-in-derived-class", "closed_reason": "Not suitable for this site", "title": "error C2509: member function not declared in derived class", "body": "<p>I have base class <strong>State</strong> and derived class <strong>InitialState</strong>.When i build solution compiler show error C2509: <em>'setView': member function not declared in 'InitialState'</em> and I don't know why...\nHere is <strong>State.h :</strong></p>\n\n<pre><code>#ifndef STATE_H\n#define STATE_H\n#include&lt;iostream&gt;\nusing namespace std;\n\nclass State {\npublic:\n    State() { isPrototype = true; }\n    virtual void execute() = 0;\n    virtual void setView(ostream&amp; screen) const = 0;\n    virtual void onEnter() { system(\"CLS\"); setView(cout); }\n    virtual void onExit() = 0;\n\nprivate:\n    bool isPrototype;\n    State* nextState;\n};\n\n\n#endif\n</code></pre>\n\n<p><strong>InitialState.h :</strong></p>\n\n<pre><code>#ifndef INITIAL_STATE_H\n#define INITIAL_STATE_H\n\n#include\"State.h\"\n\nclass InitialState : public State {\npublic:\n    void execute() {}\n    void onExit() {}\n    void setView(ostream&amp; screen) const;\n};\n\n#endif\n</code></pre>\n\n<p>and <strong>InitialState.cpp:</strong></p>\n\n<pre><code>#include\"InitialState.h\"\n\nvoid InitialState::setView(ostream&amp; screen) const {\n    screen &lt;&lt; \"Welcome!\" &lt;&lt; endl;\n    screen &lt;&lt; \"Please select what you want to do: \" &lt;&lt; endl &lt;&lt; \"1.Load card\" &lt;&lt; endl &lt;&lt; \"0.Exit\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>I have tried to add key word \"virtual\" in the front of functions in InitialState.h , but it doesn't change anything...also when I delete InitialState.cpp the code compiles normaly.</p>\n\n<p>Here is the <strong>AtmTest.cpp:</strong></p>\n\n<pre><code>#include \"PaymentCard.h\"\n//#include \"Atm.h\"\n\nint main() {\n    return 0;\n}\n</code></pre>\n\n<p>but it has nothing with State...\nand here are the other classes:\n<strong>Atm.h:</strong></p>\n\n<pre><code>#ifndef ATM_H\n#define ATM_H\n#include&lt;iostream&gt;\n\nusing namespace std;\n\nclass Atm {\npublic:\n    static Atm* get();\n    static void release() { delete instance; instance = nullptr; }  //Singleton\nprivate:\n    int serialNumber;\n    string bankName;\n    string location;\n\n    //Singleton:\n    Atm();\n    static Atm* instance;\n    Atm(const Atm&amp; m) = delete;\n    Atm&amp; operator=(const Atm&amp; m) = delete;\n    Atm(Atm&amp;&amp;) = delete;\n    Atm&amp; operator=(Atm&amp;&amp; m) = delete;\n\n};\n\n#endif\n</code></pre>\n\n<p><strong>Atm.cpp:</strong></p>\n\n<pre><code>#include\"Atm.h\"\n\n//Singleton:\nAtm* Atm::instance = nullptr;\n\n\nAtm* Atm::get() {\n    if (instance == nullptr) {\n        instance = new Atm();\n    }\n    return instance;\n}\n</code></pre>\n\n<p><strong>PaymentCard.h:</strong></p>\n\n<pre><code>#ifndef PAYMENT_CARD_H\n#define PAYMENT_CARD_H\n#include&lt;iostream&gt;\nusing namespace std;\n\nclass PaymentCard {\npublic:\n    PaymentCard(string clientName);\n    void addMoney(unsigned int amount) { currentAmount += amount; }\n    void withdrawMoney(int amount);\n    friend ostream&amp; operator&lt;&lt; (ostream&amp;, const PaymentCard&amp;);\nprivate:\n    static int NumberGenerator;     \n    unsigned int serialNumber;      \n    string clientName;\n    int currentAmount;\n};\n\n\n#endif\n</code></pre>\n\n<p><strong>PaymentCard.cpp:</strong></p>\n\n<pre><code>#include\"PaymentCard.h\"\n\nint PaymentCard::NumberGenerator = 0;\n\nPaymentCard::PaymentCard(string clientName) {\n    currentAmount = 0;\n    this-&gt;clientName = clientName;\n    serialNumber = NumberGenerator++;\n}\n\nvoid PaymentCard::withdrawMoney(int amount) {\n    if (amount &gt; currentAmount)cout &lt;&lt; \"Ovde ide izuzetak\";\n    else currentAmount -= amount;\n}\n\nostream&amp; operator&lt;&lt; (ostream &amp;os, const PaymentCard&amp; card){\n    os &lt;&lt; card.serialNumber + 1 &lt;&lt; \". Client: \" &lt;&lt; card.clientName &lt;&lt; endl;\n    return os;\n}\n</code></pre>\n\n<p>This code is not near the finish, but it worked until i have made SetView in InitialState, so idk what happened..</p>\n"}, {"tags": ["c++", "qt", "pointers"], "comments": [{"owner": {"reputation": 7180, "user_id": 2666212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/874561e399041a45c82c2ca6652400b6?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2666212/mike"}, "edited": false, "score": 0, "creation_date": 1482969050, "post_id": 41371267, "comment_id": 69944393, "body": "Are you trying to close the main window from the <code>ui</code> pointer?"}, {"owner": {"reputation": 3986, "user_id": 135237, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/39fd944926ba18b00705b66f8e96e188?s=128&d=identicon&r=PG", "display_name": "Mikhail Churbanov", "link": "https://stackoverflow.com/users/135237/mikhail-churbanov"}, "edited": false, "score": 1, "creation_date": 1482969346, "post_id": 41371267, "comment_id": 69944494, "body": "First - you can&#39;t connect function to function, it&#39;s just not how signals-slots work. Moreover, it&#39;s meaningless cause it&#39;s nothing more that just call one function from another, so why to complicate? Second - Ui::MainWindow is not really the Window - it&#39;s the class generated by Qt to configure and setup the GUI from xml .ui file. Third - IMO, you should revise your architecture - if you are trying to close the MainWindow from dialog (except may be when you want to close app), it looks like, that MainWindow is not the really &#39;Main&#39;."}, {"owner": {"reputation": 142, "user_id": 5607333, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fab4328fe1efd65df9bf060cbdc58c9f?s=128&d=identicon&r=PG&f=1", "display_name": "codehelp4", "link": "https://stackoverflow.com/users/5607333/codehelp4"}, "reply_to_user": {"reputation": 7180, "user_id": 2666212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/874561e399041a45c82c2ca6652400b6?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2666212/mike"}, "edited": false, "score": 0, "creation_date": 1482971872, "post_id": 41371267, "comment_id": 69945121, "body": "@Mike yes at least that was the case before I tried using the connect function in main."}, {"owner": {"reputation": 142, "user_id": 5607333, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fab4328fe1efd65df9bf060cbdc58c9f?s=128&d=identicon&r=PG&f=1", "display_name": "codehelp4", "link": "https://stackoverflow.com/users/5607333/codehelp4"}, "reply_to_user": {"reputation": 3986, "user_id": 135237, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/39fd944926ba18b00705b66f8e96e188?s=128&d=identicon&r=PG", "display_name": "Mikhail Churbanov", "link": "https://stackoverflow.com/users/135237/mikhail-churbanov"}, "edited": false, "score": 0, "creation_date": 1482971880, "post_id": 41371267, "comment_id": 69945122, "body": "@Rinold I complicate because it&#39;s not that simple due to the nature of objects. Also MainWindow::ui is a pointer that controls the window. Also the reason why I didn&#39;t flip the architecture is because of action in the app is gonna happen in the main window with the current architecture. (I&#39;ll make that flip if resorted to do so but trying to avoid it)"}, {"owner": {"reputation": 11885, "user_id": 2257050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VknAq.png?s=128&g=1", "display_name": "thuga", "link": "https://stackoverflow.com/users/2257050/thuga"}, "edited": false, "score": 0, "creation_date": 1483020585, "post_id": 41371267, "comment_id": 69964561, "body": "There is a very simple solution to your problem. Emit a <i>signal</i> (<i>declare it as a signal, not as a slot</i>) in <code>InitalPrompt::reject</code> and connect that signal to the <code>close</code> slot of your <code>MainWindow</code> object. You don&#39;t have to overcomplicate your code by passing pointers around, or anything like that."}], "answers": [{"comments": [{"owner": {"reputation": 142, "user_id": 5607333, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fab4328fe1efd65df9bf060cbdc58c9f?s=128&d=identicon&r=PG&f=1", "display_name": "codehelp4", "link": "https://stackoverflow.com/users/5607333/codehelp4"}, "edited": false, "score": 0, "creation_date": 1482972186, "post_id": 41371322, "comment_id": 69945184, "body": "I tried your edit but it didn&#39;t get rid of the error and sure I&#39;ll post the code of the class file."}, {"owner": {"reputation": 821, "user_id": 4791654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-f6OIWNb562I/AAAAAAAAAAI/AAAAAAAAACY/Kuh1tIUZLbk/photo.jpg?sz=128", "display_name": "Tyler Lewis", "link": "https://stackoverflow.com/users/4791654/tyler-lewis"}, "reply_to_user": {"reputation": 142, "user_id": 5607333, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fab4328fe1efd65df9bf060cbdc58c9f?s=128&d=identicon&r=PG&f=1", "display_name": "codehelp4", "link": "https://stackoverflow.com/users/5607333/codehelp4"}, "edited": false, "score": 0, "creation_date": 1482972489, "post_id": 41371322, "comment_id": 69945266, "body": "Can you make a <a href=\"https://gist.github.com/\" rel=\"nofollow noreferrer\">gist.github.com</a> with all of your files? That way I can save them locally and try to compile them myself and I&#39;ll be able to help you further."}, {"owner": {"reputation": 821, "user_id": 4791654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-f6OIWNb562I/AAAAAAAAAAI/AAAAAAAAACY/Kuh1tIUZLbk/photo.jpg?sz=128", "display_name": "Tyler Lewis", "link": "https://stackoverflow.com/users/4791654/tyler-lewis"}, "reply_to_user": {"reputation": 142, "user_id": 5607333, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fab4328fe1efd65df9bf060cbdc58c9f?s=128&d=identicon&r=PG&f=1", "display_name": "codehelp4", "link": "https://stackoverflow.com/users/5607333/codehelp4"}, "edited": false, "score": 0, "creation_date": 1482976744, "post_id": 41371322, "comment_id": 69946104, "body": "Okay, I only reuploaded the files that I changed: <a href=\"https://gist.github.com/Pinguinsan/6e0d9e005160f842b2a79554f80b0302\" rel=\"nofollow noreferrer\">gist.github.com/Pinguinsan/6e0d9e005160f842b2a79554f80b0302</a>  Changes:  1.) In main.cpp, the exec() call will block until that window is closed, so the connect() calls should occur before the exec() 2.) Ui::MainWindow is actually just the form, so it doesn&#39;t have a close(). So instead, copy was changed from a Ui::MainWindow * to a MainWindow * 3.) You were attempting to use on_passInput_returnPressed() as a signal, but declared it as a slot. I made an actual signal passInputReturnPressed and (continued...)"}, {"owner": {"reputation": 821, "user_id": 4791654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-f6OIWNb562I/AAAAAAAAAAI/AAAAAAAAACY/Kuh1tIUZLbk/photo.jpg?sz=128", "display_name": "Tyler Lewis", "link": "https://stackoverflow.com/users/4791654/tyler-lewis"}, "reply_to_user": {"reputation": 142, "user_id": 5607333, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fab4328fe1efd65df9bf060cbdc58c9f?s=128&d=identicon&r=PG&f=1", "display_name": "codehelp4", "link": "https://stackoverflow.com/users/5607333/codehelp4"}, "edited": false, "score": 0, "creation_date": 1482976852, "post_id": 41371322, "comment_id": 69946125, "body": "connected it to on_passInput_returnPressed() and MainWindow::initialize() (which is what you were trying to do initially).    4.) I overrode QDialog::keyPressEvent() in InitialDialog to be enable to emit the signal when the return key is pressed.    5.) I hid the InitialDialog in on_passInput_returnPressed(); as well as showed the MainWindow. You could alternatively just call close() on the InitialDialog instance (this-&gt;close()).        If you have any further questions, feel free to ask."}, {"owner": {"reputation": 142, "user_id": 5607333, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fab4328fe1efd65df9bf060cbdc58c9f?s=128&d=identicon&r=PG&f=1", "display_name": "codehelp4", "link": "https://stackoverflow.com/users/5607333/codehelp4"}, "edited": false, "score": 0, "creation_date": 1482980498, "post_id": 41371322, "comment_id": 69946894, "body": "Thanks so much I can&#39;t thank you enough. I after studying your explanations and code I understand your changes. I just want mention certain things that came as a shock to me. 1) I wouldn&#39;t have thought you could assign Ui::MainWindow pointer to a MainWindow pointer nor did I think you could make a pointer like that without the Ui part of the declaration since that&#39;s not how it was generated by Qt. 2) I would&#39;ve never thought that making a signal and slot have the same name would be legal (because I assume a clash between the header your implementation of the slot continued..."}, {"owner": {"reputation": 142, "user_id": 5607333, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fab4328fe1efd65df9bf060cbdc58c9f?s=128&d=identicon&r=PG&f=1", "display_name": "codehelp4", "link": "https://stackoverflow.com/users/5607333/codehelp4"}, "edited": false, "score": 0, "creation_date": 1482980731, "post_id": 41371322, "comment_id": 69946945, "body": "the generated header of the signal. 3) I also didn&#39;t realize that the execution piece you added would result in the behavior that it does. (still learning event driven programming as it&#39;s not taught in school)"}], "tags": [], "owner": {"reputation": 821, "user_id": 4791654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-f6OIWNb562I/AAAAAAAAAAI/AAAAAAAAACY/Kuh1tIUZLbk/photo.jpg?sz=128", "display_name": "Tyler Lewis", "link": "https://stackoverflow.com/users/4791654/tyler-lewis"}, "is_accepted": false, "score": 0, "last_activity_date": 1482969080, "creation_date": 1482969080, "answer_id": 41371322, "question_id": 41371267, "link": "https://stackoverflow.com/questions/41371267/is-it-possible-to-connect-a-slot-or-regular-function-from-one-class-to-a-slot-or/41371322#41371322", "title": "Is it possible to connect a slot or regular function from one class to a slot or regular function from another class? (QT)", "body": "<p>\"Invalid use of incomplete type\" means the compiler does not (yet) have a definition for the class when it reaches that line. In the header file that contains your copy pointer, include a forward declaration above the class declaration (the file would look something liek this):</p>\n\n<pre><code>#ifndef BLAH_BLAH_H\n#define BLAH_BLAH_H\n\n/*All of your normal #includes here*/\n\nnamespace Ui {\n    class InitialPrompt;\n    class MainWindow; //Note the forward declaration here\n}\n\n#include \"mainwindow.h\"\n\nclass BlahBlah\n{\n    /*Class stuff here*/\nprivate:\n    Ui::InitalPrompt *ui;\n    Ui::MainWindow *copy;\n};\n\n#endif //BLAH_BLAH_H\n</code></pre>\n\n<p>If you post the entirety of your class file that has the *copy, we can look further into it.</p>\n"}, {"comments": [{"owner": {"reputation": 142, "user_id": 5607333, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fab4328fe1efd65df9bf060cbdc58c9f?s=128&d=identicon&r=PG&f=1", "display_name": "codehelp4", "link": "https://stackoverflow.com/users/5607333/codehelp4"}, "edited": false, "score": 0, "creation_date": 1482971374, "post_id": 41371457, "comment_id": 69945027, "body": "Is the first option you give really possible given that the only way it could possibly happen is if the on_passInput_returnPressed() had a MainWindow object as a parameter? (keep in mind that function was created via the Designer not me directly) Also in reference to your second option I don&#39;t think that&#39;s possible given that in my experience signals can&#39;t implemented."}, {"owner": {"reputation": 644, "user_id": 7333037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab3a4873895bfc709cb4c1725bafc87a?s=128&d=identicon&r=PG&f=1", "display_name": "Laszlo", "link": "https://stackoverflow.com/users/7333037/laszlo"}, "reply_to_user": {"reputation": 142, "user_id": 5607333, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fab4328fe1efd65df9bf060cbdc58c9f?s=128&d=identicon&r=PG&f=1", "display_name": "codehelp4", "link": "https://stackoverflow.com/users/5607333/codehelp4"}, "edited": false, "score": 0, "creation_date": 1482976085, "post_id": 41371457, "comment_id": 69945972, "body": "Yes, you need to have access to <code>w</code> either by a parameter to <code>on_passInput_returnPressed()</code>  or  better yet, as a data member to the dialog class. You could add <code>QMainWindow* m_w</code> as a private data member to the dialog class and set it during construction (, by adding an extra parameter to the constructor), or else, by adding a setter function, e.g. <code>setMainWindow(QMainWindow* newVal) {m_w = newVal;}</code> It is still much cleaner to use a signal IMHO. I updated the answer with an example."}], "tags": [], "owner": {"reputation": 644, "user_id": 7333037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab3a4873895bfc709cb4c1725bafc87a?s=128&d=identicon&r=PG&f=1", "display_name": "Laszlo", "link": "https://stackoverflow.com/users/7333037/laszlo"}, "is_accepted": false, "score": 0, "last_activity_date": 1482975502, "last_edit_date": 1482975502, "creation_date": 1482970028, "answer_id": 41371457, "question_id": 41371267, "link": "https://stackoverflow.com/questions/41371267/is-it-possible-to-connect-a-slot-or-regular-function-from-one-class-to-a-slot-or/41371457#41371457", "title": "Is it possible to connect a slot or regular function from one class to a slot or regular function from another class? (QT)", "body": "<p>No, it is not possible. You can either: </p>\n\n<ul>\n<li>call <code>w-&gt;initalizer()</code> directly from <code>on_passInput_returnPressed()</code> or </li>\n<li><p>define a signal <code>signal_on_passInput_returnPressed()</code> in your ui class and emit that signal from <code>on_passInput_returnPressed()</code>. Then</p>\n\n<p><code>QObject::connect(&amp;i, SIGNAL(signal_on_passInput_returnPressed()), &amp;w, SLOT(initalizer()));</code>  </p></li>\n</ul>\n\n<p>should work.</p>\n\n<p>For example:</p>\n\n<pre><code>class Whatever : \n   public QObject {\n   Q_OBJECT\n\n  void on_passInput_returnPressed();\n\nsignals:\n  void signal_on_passInput_returnPressed();\n};\n\nvoid Whatever::on_passInput_returnPressed() {\n\n   emit signal_on_passInput_returnPressed();\n}\n</code></pre>\n"}], "owner": {"reputation": 142, "user_id": 5607333, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fab4328fe1efd65df9bf060cbdc58c9f?s=128&d=identicon&r=PG&f=1", "display_name": "codehelp4", "link": "https://stackoverflow.com/users/5607333/codehelp4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1482975502, "creation_date": 1482968618, "last_edit_date": 1482972380, "question_id": 41371267, "link": "https://stackoverflow.com/questions/41371267/is-it-possible-to-connect-a-slot-or-regular-function-from-one-class-to-a-slot-or", "title": "Is it possible to connect a slot or regular function from one class to a slot or regular function from another class? (QT)", "body": "<p>To be specific to my problem I've been trying to connect a a slot from one class to a regular function of another class. I'm trying to do this so I can close the ui of one the main window from a dialog window. I tried everything I could possibly think of but it seems like every time I think of something to try the Qt compiler shuts me down by throwing some error or not working for no apparent reason such as when I did this </p>\n\n<pre><code>function(Ui::MainWindow *ui)\n{     \ncopy = ui; // copy is a pointer declared as Ui::MainWindow *copy in the dialog class\n}\n</code></pre>\n\n<p>I tried this so I could close the main window from the copy pointer in the dialog class and although it compiled for that, it wouldn't compile when I tried to use it in another function of that class even though it was a class variable. After that I then realized that I should be able to connect the two functions from the main function. I wrote this </p>\n\n<pre><code>QObject::connect(&amp;i, SIGNAL(on_passInput_returnPressed()), &amp;w, SLOT(initalizer()));\n</code></pre>\n\n<p>The above compiles but when debugging I discovered it never gets executed and not sure why despite the fact that the SIGNAL on_passInput_returnPressed() is actually declared as slot in the class header. If that is the reason why it doesn't get executed how do I connect the slot from the dialog class to a regular function from the MainWindow class? There must be a way because I spent a day practically thinking about this non-stop and can't think of any other way given the nature of object scopes (in OOP) on top of the fact that the pointer thing I thought of didn't work. </p>\n\n<p>Also I just now recreated the error from the pointer thing described above here it is.</p>\n\n<pre><code>error: invalid use of incomplete type 'class Ui::MainWindow'\n copy-&gt;close();\n     ^\n</code></pre>\n\n<p>Again this error is referring to trying to access the close function via the copy pointer from another function in the same class as the pointer assignment that worked in the other function. The copy pointer is declared as follows in the class header. Also in case you're wondering, yes, the pointer assignment written above does get executed. I checked via debugging.</p>\n\n<pre><code>private:\n    Ui::InitalPrompt *ui;\n    Ui::MainWindow *copy;\n</code></pre>\n\n<p>If you need more info just let me know what you need and I'll edit this post with it. I've obsessively tried so much I can think so much so that I've given up without further help due to how unforgiving Qt has been with me. </p>\n\n<p>Also if there's a way of doing what I'm trying to do with the new Qt5 syntax of the connect function can you please give me the exact thing to type because despite looking into that new syntax myself I can't get it to compile for the life of me. (and yes I'm using Qt5) That's why the code above is written as old-fashion syntax. </p>\n\n<p>Added the following as suggested to do so in a reply which is the class of the copy pointer. </p>\n\n<pre><code>#include \"initalprompt.h\"\n#include \"ui_initalprompt.h\"\n#include \"mainwindow.h\"\n#include &lt;QLineEdit&gt;\n#include &lt;QCloseEvent&gt;\n#include &lt;QMessageBox&gt;\n\nInitalPrompt::InitalPrompt(QWidget *parent) :\n    QDialog(parent),\n    ui(new Ui::InitalPrompt)\n{\n    ui-&gt;setupUi(this);\n}\n\nInitalPrompt::~InitalPrompt()\n{\n    delete ui;\n}\n\nvoid InitalPrompt::on_passInput_returnPressed()\n{\n    pass = ui-&gt;passInput-&gt;text();\n\n\n}\n\nvoid InitalPrompt::reject()\n{\n\n    QMessageBox::StandardButton resBtn = QMessageBox::Yes;\n    bool changes = false;\n    if (changes) {\n        resBtn = QMessageBox::question( this, \"APP_NAME\",\n                                        tr(\"Are you sure?\\n\"),\n                                        QMessageBox::Cancel | QMessageBox::No | QMessageBox::Yes,\n                                        QMessageBox::Yes);\n    }\n    if (resBtn == QMessageBox::Yes) {\n        QDialog::reject();\n\n    }\n    // the only issue is with the statment below don't know why\n    copy-&gt;close();\n}\n void InitalPrompt::catcher(Ui::MainWindow *ui)\n{\n    copy = ui;\n}\n</code></pre>\n"}, {"tags": ["c#", "c++", "dll", "pinvoke"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1482974270, "post_id": 41371212, "comment_id": 69945633, "body": "The C++ code needs to allocate a buffer and copy the string sent to it, not merely store the pointer."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7350769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ed573211042a98d845a0e494f2a621e?s=128&d=identicon&r=PG&f=1", "display_name": "Poziokat", "link": "https://stackoverflow.com/users/7350769/poziokat"}, "edited": false, "score": 0, "creation_date": 1482975839, "post_id": 41371960, "comment_id": 69945928, "body": "Thanks a lot!  Finally this is an answer I&#39;ve been looking for (or I guess it is ATM) I do understand where lies  the problem of my code. :) Do you propose to simply use string instead of char* and in place i need a char* use c_str() method on it? Right now I&#39;m working on passing string from c# to that in c++, but I&#39;m already marking this answer as most helpful"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 23, "user_id": 7350769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ed573211042a98d845a0e494f2a621e?s=128&d=identicon&r=PG&f=1", "display_name": "Poziokat", "link": "https://stackoverflow.com/users/7350769/poziokat"}, "edited": false, "score": 0, "creation_date": 1482976029, "post_id": 41371960, "comment_id": 69945963, "body": "The strings pass from C# to the C++ so you never need to use c_str(). There&#39;s an implicit conversion from const char* to std::string so your wrapper function my socks create can receive const char* and then use that implicit conversion when calling the constructor."}], "tags": [], "owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "is_accepted": true, "score": 0, "last_activity_date": 1482976232, "last_edit_date": 1482976232, "creation_date": 1482974248, "answer_id": 41371960, "question_id": 41371212, "link": "https://stackoverflow.com/questions/41371212/passing-c-stringbuilder-string-to-c-char-using-dll/41371960#41371960", "title": "Passing C# StringBuilder / string to C++ char* using DLL", "body": "<p>The main problem is in your C++ constructor:</p>\n\n<pre><code>mySock::mySock(char* inIP, int inPort)\n{\n    ipAddress = inIP;\n    port = inPort;\n}\n</code></pre>\n\n<p>Here you make a copy of the pointer to character array. This requires that this pointer remains valid for as long as you need to use <code>ipAddress</code>. A string marshaled from C# is valid only for the duration of the p/invoke call. </p>\n\n<p>Indeed, even if you were using this class only from C++ it's design would be unworkable. Your class needs to take a copy of the string rather than a copy of the pointer. </p>\n\n<p>The solution is for your C++ code to use <code>std::string</code> exclusively. Let that class take care of memory management and copying. Only use C strings at the p/invoke interop boundary. </p>\n\n<p>Change <code>ipAddress</code> to be of type <code>std::string</code> and have the constructor look like this:</p>\n\n<pre><code>mySock::mySock(const std::string inIP, const int inPort)\n{\n    ipAddress = inIP;\n    port = inPort;\n}\n</code></pre>\n\n<p>You still need to use C strings in your interop wrapper function, but that can make use of the implicit conversion from <code>const char*</code> to <code>std::string</code>. </p>\n\n<pre><code>mySock* mySock_Create(const char* IP, const int prt)\n{\n    return new mySock(IP, prt);\n}\n</code></pre>\n\n<p>As far as the p/invoke goes, you misuse <code>StringBuilder</code> and <code>char*</code>. They are paired when you have a caller allocated buffer that is modified by the callee. For a string passed in to the C++ code use <code>string</code> and <code>const char*</code>.  </p>\n\n<pre><code>[DllImport(\"...\", CallingConvention = CallingConvention.Cdecl)]\npublic static extern IntPtr mySock_Create(string IP, int prt);\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 7350769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ed573211042a98d845a0e494f2a621e?s=128&d=identicon&r=PG&f=1", "display_name": "Poziokat", "link": "https://stackoverflow.com/users/7350769/poziokat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2540, "favorite_count": 0, "accepted_answer_id": 41371960, "answer_count": 1, "score": 1, "last_activity_date": 1482976232, "creation_date": 1482968212, "last_edit_date": 1482969550, "question_id": 41371212, "link": "https://stackoverflow.com/questions/41371212/passing-c-stringbuilder-string-to-c-char-using-dll", "title": "Passing C# StringBuilder / string to C++ char* using DLL", "body": "<p>I've been mixing C# GUI with a C++ code for socket connection handling.\nThe problem is that passing a string to a C++ char* DLL causes it to change its value in the C++ class(?).</p>\n\n<p>I've got a class for handling sockets which was a bit changed to look around for a cause of error and some functions letting me get to the class itself:</p>\n\n<pre><code>extern \"C\" { __declspec(dllexport)\n\n    class mySock\n    {\n\n        int port;\n        SOCKET littleSock;\n\n        public:\n            char* ipAddress;\n            mySock() {};\n            mySock(char* inIP, int inPort);\n            ~mySock();\n            int initialize();\n            int sendMsg(char* Msg);\n            //int addition(int a, int b);\n\n    };\n}\n\nextern \"C\" { __declspec(dllexport) mySock* mySock_Create(char* IP, int prt);}\nextern \"C\" { __declspec(dllexport) mySock* mySock_Create1(); }\nextern \"C\" { __declspec(dllexport) int mySock_initialize(mySock* inSocket); }\nextern \"C\" { __declspec(dllexport) int mySock_sendMsg(mySock* inSocket,char* Msg); }\nextern \"C\" { __declspec(dllexport) void mySock_delete(mySock* inSocket); }\nextern \"C\" { __declspec(dllexport) void CopyStr(char* str1, mySock* inSocket)\n    {\n        strcpy_s(str1, strlen(str1), inSocket-&gt;ipAddress);\n    };\n}\n</code></pre>\n\n<p>The problem occurs somewhere in usage of mySock_Create.</p>\n\n<p>Basically it is:</p>\n\n<pre><code>mySock* mySock_Create(char* IP, int prt)\n{\n    return new mySock(IP, prt);\n}\n</code></pre>\n\n<p>calling a constructor:</p>\n\n<pre><code>mySock::mySock(char* inIP, int inPort)\n{\n    ipAddress = inIP;\n    port = inPort;\n}\n</code></pre>\n\n<p>Later <code>ipAddress</code> is used with inet_addr and connects to the remote server.\nAnyway, the code above doesn't allow me to connect to server, but if I simply hardcode the IP address like this:</p>\n\n<pre><code>mySock* mySock_Create(char* IP, int prt)\n{\n    return new mySock(\"192.168.1.164\", prt);\n}\n</code></pre>\n\n<p>It works fine and connects to the local server.</p>\n\n<p>So for checking I added CopyStr which you could see in DLL header code above, and it is supposed to get the IP address of mySock object and write it to C# textbox.</p>\n\n<p>In case of a hardcoded IP address indeed it shows that IP address, but in case of passing an IP address from C# it returns only a not filled rectangle sign which I'm not even able to paste here.</p>\n\n<p>Here's C# code for linking and using the DLL:</p>\n\n<pre><code>[DllImport(\"G:\\\\socketstraning\\\\klikacz\\\\MyFirstDLLyay\\\\Debug\\\\MyFirstDLL.dll\", CallingConvention = CallingConvention.Cdecl)]\npublic static extern IntPtr mySock_Create(StringBuilder IP, int prt);\n[DllImport(\"G:\\\\socketstraning\\\\klikacz\\\\MyFirstDLLyay\\\\Debug\\\\MyFirstDLL.dll\", CallingConvention = CallingConvention.Cdecl)]\npublic static extern int mySock_initialize(IntPtr value);\n[DllImport(\"G:\\\\socketstraning\\\\klikacz\\\\MyFirstDLLyay\\\\Debug\\\\MyFirstDLL.dll\", CallingConvention = CallingConvention.Cdecl)]\npublic static extern int mySock_sendMsg(IntPtr value, string Msg);\n[DllImport(\"G:\\\\socketstraning\\\\klikacz\\\\MyFirstDLLyay\\\\Debug\\\\MyFirstDLL.dll\", CallingConvention = CallingConvention.Cdecl)]\npublic static extern void mySock_delete(IntPtr value);\n[DllImport(\"G:\\\\socketstraning\\\\klikacz\\\\MyFirstDLLyay\\\\Debug\\\\MyFirstDLL.dll\", CallingConvention = CallingConvention.Cdecl)]\npublic static extern IntPtr mySock_Create1();\n[DllImport(\"G:\\\\socketstraning\\\\klikacz\\\\MyFirstDLLyay\\\\Debug\\\\MyFirstDLL.dll\", CallingConvention = CallingConvention.Cdecl)]\npublic static extern void CopyStr(StringBuilder str1, IntPtr value);\n\nprivate void button3_Click(object sender, EventArgs e)\n{\n    StringBuilder str = new StringBuilder(\"192.168.1.164\", 50);\n    IntPtr we = mySock_Create(str, 16999);\n    StringBuilder str2 = new StringBuilder(\"255.255.255.255\", 25);\n    CopyStr(str2, we);\n    textBox1.Text = str2.ToString();\n    if (mySock_initialize(we) == -2)\n         button3.Text = \"Ups\";\n\n    mySock_delete(we);\n}\n</code></pre>\n\n<p>I've also tried using string instead of StringBuilder or adding CharSet=CharSet.Ansi in import options.</p>\n\n<p>I've read quite a bunch of questions and solutions to passing string to <code>char*</code> in such cases, but I can't work out why value of <code>ipAddress</code> isn't passed correctly or changes somewhere else.</p>\n\n<p>Hope I stated problem clearly enough as I'm already pretty much out-of-logic after fighting with above code.</p>\n"}, {"tags": ["c++", "arrays", "c++11"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 2, "creation_date": 1482968349, "post_id": 41371204, "comment_id": 69944198, "body": "Yes, you can modify the library code to allocate a one dimensional array, and then just allocate an array of pointers, separately, to each row. However, there&#39;s probably code in the library that attempts to deallocate this 2d array, and you will need to find it and make a similar change there, too. Also, the existing library code uses <code>new</code>, so you better stick with it, instead of using <code>malloc</code>. There&#39;s no ultimate difference betwen <code>malloc</code> and <code>new</code>, in this use case."}, {"owner": {"reputation": 917, "user_id": 1692060, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/vxVH1.png?s=128&g=1", "display_name": "Slowpoke", "link": "https://stackoverflow.com/users/1692060/slowpoke"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1482969020, "post_id": 41371204, "comment_id": 69944381, "body": "@SamVarshavchik Thanks, I&#39;m searching for the code how to do it, but I still can&#39;t get how to implement it, because for 1-D array I need to address the memory block after the block of pointers <code>nrows*sizeof(int*)</code>"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1482969174, "post_id": 41371204, "comment_id": 69944431, "body": "This is not complicated. The one-dimensional array gets allocated as <code>auto ptr=new int[width*height]</code>, and the pointer to row #n is <code>&amp;ptr[n*width]</code>. Fairly straightforward."}, {"owner": {"reputation": 917, "user_id": 1692060, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/vxVH1.png?s=128&g=1", "display_name": "Slowpoke", "link": "https://stackoverflow.com/users/1692060/slowpoke"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1482969302, "post_id": 41371204, "comment_id": 69944477, "body": "@SamVarshavchik Thanks very much, will try to get it working..."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1482972482, "post_id": 41371204, "comment_id": 69945259, "body": "@Slowpoke <a href=\"http://stackoverflow.com/questions/21943621/how-to-create-a-contiguous-2d-array-in-c/21944048#21944048\">More information on creating a contiguous 2D array</a>.  BTW, what you posted in the 2d array creation done by the third-party code is naive, at best.  It can cause heap fragmentation if the height is large, plus the creation becomes slower due to making excessive calls to the allocator."}], "answers": [{"comments": [{"owner": {"reputation": 917, "user_id": 1692060, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/vxVH1.png?s=128&g=1", "display_name": "Slowpoke", "link": "https://stackoverflow.com/users/1692060/slowpoke"}, "edited": false, "score": 0, "creation_date": 1482971987, "post_id": 41371683, "comment_id": 69945145, "body": "The problem is that I need to send <code>int *</code> into another object (OpenCV Mat constructor) so I&#39;m limited with exactly those types. Thanks anyway!"}, {"owner": {"reputation": 917, "user_id": 1692060, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/vxVH1.png?s=128&g=1", "display_name": "Slowpoke", "link": "https://stackoverflow.com/users/1692060/slowpoke"}, "edited": false, "score": 0, "creation_date": 1482972163, "post_id": 41371683, "comment_id": 69945180, "body": "Ok, thanks for corrections! I&#39;ve edited the code in the post in case someone would use it"}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "reply_to_user": {"reputation": 917, "user_id": 1692060, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/vxVH1.png?s=128&g=1", "display_name": "Slowpoke", "link": "https://stackoverflow.com/users/1692060/slowpoke"}, "edited": false, "score": 1, "creation_date": 1482972435, "post_id": 41371683, "comment_id": 69945247, "body": "@Slowpoke - You could use a vector of type &lt;int&gt;, just pass a pointer to the first element;  | vector&lt;int&gt; example(number_of_elements); | then an int * is created using &amp;example[0]."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 917, "user_id": 1692060, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/vxVH1.png?s=128&g=1", "display_name": "Slowpoke", "link": "https://stackoverflow.com/users/1692060/slowpoke"}, "edited": false, "score": 0, "creation_date": 1482973024, "post_id": 41371683, "comment_id": 69945378, "body": "@Slowpoke I added answer to second question as well."}, {"owner": {"reputation": 917, "user_id": 1692060, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/vxVH1.png?s=128&g=1", "display_name": "Slowpoke", "link": "https://stackoverflow.com/users/1692060/slowpoke"}, "edited": false, "score": 0, "creation_date": 1482973744, "post_id": 41371683, "comment_id": 69945518, "body": "@user2079303 Thanks for the detailed explanation. Yes, I need to handle <code>int **</code> as it is modified further in the library code before the result is obtained, maybe I will study the ways to replace it on the second stage. I think I&#39;ve managed to do it in two stages using SamVarshavchik&#39;s hints and it seems that the library is working with the modified code. My first idea was to allocate everything in one stage using malloc (see in the question) but I think I would need to do some calculations then to address array correctly"}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 3, "last_activity_date": 1482976800, "last_edit_date": 1592644375, "creation_date": 1482971821, "answer_id": 41371683, "question_id": 41371204, "link": "https://stackoverflow.com/questions/41371204/fast-convert-double-pointer-array-into-single-pointer-probably-can-be-continuou/41371683#41371683", "title": "Fast convert double pointer array into single pointer, probably can be continuous", "body": "<blockquote>\n<p>So the first question is whether I can do something better here?</p>\n</blockquote>\n<p>You could use <code>std::vector</code> to make the memory management safer and simpler. I don't see much else to improve.</p>\n<blockquote>\n<p>The problem is that I need to send <code>int *</code> into another object (OpenCV Mat constructor) so I'm limited with exactly those types. Thanks anyway!</p>\n</blockquote>\n<p>This is not a problem. You can use the <code>data</code> member function of vector, that returns a pointer to the internal array that you can send into your another project.</p>\n<hr />\n<blockquote>\n<p>So the second question is: can I modify this code to make it allocate the 2D array in one memory block:</p>\n</blockquote>\n<p>I'm assuming that you're bound to the interface that requires you to pass around <code>int**</code>.</p>\n<p>If you can accept two allocations, that is simple: First allocate the array of pointers of appropriate size. Then allocate a flat array containing all values, and assign it to the first element of the pointer array. Then assign the rest of the pointers to correct positions of the value array.</p>\n<p>A single allocation is possible, but tricky. You can allocate a raw <code>char</code> array big enough for both the array of pointers and the value array, and construct with placement new. This is tricky since it is very low level, and you must make sure that the arrays are aligned properly, and you must allocate extra space to make the alignment possible. This would be easier to implement in C which has <code>aligned_alloc</code> (which seems to be in the upcoming C++17 as well).</p>\n<hr />\n<blockquote>\n<p>The right way to destroy it in the library code seems to be</p>\n<pre><code>delete ptr;\ndelete labels;\n</code></pre>\n</blockquote>\n<p>No, that seems to be the wrong way. The correct way to delete memory allocated with <code>new[]</code> is <code>delete[]</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 917, "user_id": 1692060, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/vxVH1.png?s=128&g=1", "display_name": "Slowpoke", "link": "https://stackoverflow.com/users/1692060/slowpoke"}, "edited": false, "score": 0, "creation_date": 1482974341, "post_id": 41371778, "comment_id": 69945649, "body": "Thanks! Though I&#39;ve ended up with modifying the library to receive contiguous arrays, that may be useful for someone with the same problem as mine"}], "tags": [], "owner": {"reputation": 21, "user_id": 7351954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a20958df0e9f204ab9973efbef42bbe?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/7351954/thomas"}, "is_accepted": false, "score": 1, "last_activity_date": 1482972728, "creation_date": 1482972728, "answer_id": 41371778, "question_id": 41371204, "link": "https://stackoverflow.com/questions/41371204/fast-convert-double-pointer-array-into-single-pointer-probably-can-be-continuou/41371778#41371778", "title": "Fast convert double pointer array into single pointer, probably can be continuous", "body": "<p>You might get a bit of an improvement by using pointer arithmetic rather than array access.</p>\n\n<p>We may use pointers to track our source and target and increment them on each pass of the loop, this way we save multiplications. Doing so with each involved pointer also has the advantage of removing the need for variable i, which saves all operations involving it, just need to compute the end pointer. Also checking for inequality is usually faster than a \"less than\" comparission.</p>\n\n<pre><code>//create 1D array\nint *labels1D = new int[rows*cols];\n\n//copy contents\nint *targetPointer = labels1D;\nint **sourcePointer = labels;\nint *endTargetPointer = targetPointer + rows*cols;\nwhile( targetPointer != endTargetPointer) {        \n    std::copy_n(*sourcePointer++, cols, targetPointer );\n    targetPointer += cols;\n}\n</code></pre>\n\n<p>Though I would not be surprised if some optimizers are able to get code like this from OP's original code.</p>\n"}], "owner": {"reputation": 917, "user_id": 1692060, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/vxVH1.png?s=128&g=1", "display_name": "Slowpoke", "link": "https://stackoverflow.com/users/1692060/slowpoke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1116, "favorite_count": 0, "accepted_answer_id": 41371683, "answer_count": 2, "score": 2, "last_activity_date": 1482976800, "creation_date": 1482968120, "last_edit_date": 1482972116, "question_id": 41371204, "link": "https://stackoverflow.com/questions/41371204/fast-convert-double-pointer-array-into-single-pointer-probably-can-be-continuou", "title": "Fast convert double pointer array into single pointer, probably can be continuous", "body": "<p>I am using a library that returns the image as a big 2D array <code>int**</code>. I need to convert it into <code>int*</code> 1D array. I think I've managed to do it quite fast by copying memory blocks:</p>\n\n<pre><code>// have int labels** as 2D array, also have rows and cols \n\n//create 1D array\nint *labels1D = new int[rows*cols];\n\n//copy contents\nfor(int i = 0; i &lt; rows; i++) {        \n    // Here I don't know anything about how those arrays were allocated\n    // Maybe std::copy would handle it for me?\n    std::copy_n(labels[i], cols, labels1D + i*cols);\n}\n</code></pre>\n\n<p>So the <strong>first question</strong> is whether I can do something better here? Is everything safe here assuming that library is a black box?</p>\n\n<hr>\n\n<p>I do not want much to modify the library code, but I've found additionally how the source array in my side library <code>this-&gt;currentLabels</code> was created:</p>\n\n<pre><code>int** currentLabels; //in class declaration\n...\n// in the code\nthis-&gt;currentLabels = new int*[this-&gt;height];\n\nfor (int i = 0; i &lt; this-&gt;height; ++i) {\n    this-&gt;currentLabels[i] = new int[this-&gt;width];\n\n    for (int j = 0; j &lt; this-&gt;width; ++j) {\n     // some code for setting the value\n        }\n\n    }\n</code></pre>\n\n<p>Looks like the values for rows and cols are known. </p>\n\n<p>So the <strong>second question</strong> is: can I modify this code to make it allocate the 2D array in one memory block:</p>\n\n<pre><code>this-&gt;currentLabels = malloc(nrows*sizeof(int*) + (nrows*(ncolumns*sizeof(int)));\n</code></pre>\n\n<p>to allow me then just map it somehow to my 1D array without copying memory?</p>\n\n<hr>\n\n<p>EDIT: Thanks to @SamVarshavchik , the mapping seems to be working in the following way:</p>\n\n<pre><code>// Allocate 2-D array as one block:\n\n// Allocate pointers:\nint** labels = new int*[rows];\n// Allocate data:\nauto ptr=new int[rows*cols];\n\nfor(int i = 0; i &lt; rows; i++) {\n    labels[i] = &amp;ptr[i*cols];\n}\n\n// fill with values ranging 0 to certain number\nfor(int i = 0; i &lt; rows; i++){\n    for(int j = 0; j &lt; cols; j++){\n        // the code for setting the values\n        labels[i][j] = i+j;\n    }\n}    \n\n// have int labels** as 2D array, also have rows and cols \n\n//create 1D array\nint *labels1D; // = new int[rows*cols];\n\n//assign contents:\nlabels1D = &amp;labels[0][0];\n</code></pre>\n\n<p>The right way to destroy it in the library code seems to be</p>\n\n<pre><code>delete[] ptr;  //user2079303 fixed\ndelete[] labels;\n</code></pre>\n"}, {"tags": ["c++", "oop", "deep-copy"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1482966000, "post_id": 41370892, "comment_id": 69943489, "body": "Do you have copy constructors? And why does House define that humanP member, anyway? What does it represent?"}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 3, "creation_date": 1482966044, "post_id": 41370892, "comment_id": 69943501, "body": "Perhaps try to avoid using <code>new</code>. If you put a <code>std::vector&lt;Human&gt; humans</code> in the <code>House</code> class then it will be copied with a default copy constructor. <a href=\"http://meta.stackoverflow.com/questions/334822/how-do-i-ask-and-answer-homework-questions\">Is this homework</a>?"}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1482966123, "post_id": 41370892, "comment_id": 69943520, "body": "If you post some code attempting the deep copy it will be easier to help."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1482966241, "post_id": 41370892, "comment_id": 69943551, "body": "&quot;so that I can copy the humanO inside the House class and then delete the object in the main file.&quot;  - simply use a  Human value inside the House class, not a pointer."}, {"owner": {"reputation": 27, "user_id": 6307997, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6c5ef634572fd39a35a304d567ed2dd3?s=128&d=identicon&r=PG&f=1", "display_name": "Johnie78", "link": "https://stackoverflow.com/users/6307997/johnie78"}, "edited": false, "score": 0, "creation_date": 1482966315, "post_id": 41370892, "comment_id": 69943581, "body": "It&#39;s part of my project and one of the task is to have composition and deep copy basically. I&#39;ll make an edit in a few mins. Basically the House is the main class that works and organizes other classes. Human belongs to the House, that&#39;s why it&#39;s put in there. Okay I&#39;ve seen an example with vector, let me check what I can edit"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1482968100, "post_id": 41370892, "comment_id": 69944130, "body": "I see no need to implement a deep copy for something this trivial. All you need are methods in this class, to set the values of the class members."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1482977196, "post_id": 41370892, "comment_id": 69946204, "body": "Stop using raw pointers and all these problems go away... The simplest solution is to make <code>House</code> contain <code>Human</code>"}, {"owner": {"reputation": 27, "user_id": 6307997, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6c5ef634572fd39a35a304d567ed2dd3?s=128&d=identicon&r=PG&f=1", "display_name": "Johnie78", "link": "https://stackoverflow.com/users/6307997/johnie78"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1482977529, "post_id": 41370892, "comment_id": 69946259, "body": "But I still need to create the Human object in main, how should I pass it and make it stay inside House class? @M.M"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1482977702, "post_id": 41370892, "comment_id": 69946288, "body": "There&#39;s a few options depending on your requirements. As mentioned above, <code>vector&lt;Human&gt;</code> would be a good way to represent the house being able to have zero or more humans in it"}, {"owner": {"reputation": 27, "user_id": 6307997, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6c5ef634572fd39a35a304d567ed2dd3?s=128&d=identicon&r=PG&f=1", "display_name": "Johnie78", "link": "https://stackoverflow.com/users/6307997/johnie78"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1482977904, "post_id": 41370892, "comment_id": 69946320, "body": "But is it worth using the vector method if I will have 1 human at all times of the programs run time? @M.M I&#39;ll still probably stick to the pointers method, I need some practice with those, but just interested"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1482979037, "post_id": 41370892, "comment_id": 69946551, "body": "If you have 1 at all times then make House have a Human member , you could use simple assignment to assign it when needed."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 6307997, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6c5ef634572fd39a35a304d567ed2dd3?s=128&d=identicon&r=PG&f=1", "display_name": "Johnie78", "link": "https://stackoverflow.com/users/6307997/johnie78"}, "edited": false, "score": 0, "creation_date": 1482967367, "post_id": 41370959, "comment_id": 69943906, "body": "So basically I would have to write additional method in the House class which gets a Human type pointer and inside that method I have created another Human type pointer and just make pointer1 = pointer2? Can I do the same with constructor? Can I delete newPerson after I pass it on?"}, {"owner": {"reputation": 3189, "user_id": 7016303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dYmXc.jpg?s=128&g=1", "display_name": "Mikel F", "link": "https://stackoverflow.com/users/7016303/mikel-f"}, "reply_to_user": {"reputation": 27, "user_id": 6307997, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6c5ef634572fd39a35a304d567ed2dd3?s=128&d=identicon&r=PG&f=1", "display_name": "Johnie78", "link": "https://stackoverflow.com/users/6307997/johnie78"}, "edited": false, "score": 1, "creation_date": 1482967896, "post_id": 41370959, "comment_id": 69944068, "body": "@Johnie78 pointer1=pointer2 will be a shallow copy. I have added more to my answer for dealing with the need for a deep copy."}, {"owner": {"reputation": 27, "user_id": 6307997, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6c5ef634572fd39a35a304d567ed2dd3?s=128&d=identicon&r=PG&f=1", "display_name": "Johnie78", "link": "https://stackoverflow.com/users/6307997/johnie78"}, "edited": false, "score": 0, "creation_date": 1482968162, "post_id": 41370959, "comment_id": 69944148, "body": "Thank you! it&#39;s way more clear now. Yeah I see now that that would be a shallow copy, both would point to the same thing, couldn&#39;t delete the one in the main"}, {"owner": {"reputation": 27, "user_id": 6307997, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6c5ef634572fd39a35a304d567ed2dd3?s=128&d=identicon&r=PG&f=1", "display_name": "Johnie78", "link": "https://stackoverflow.com/users/6307997/johnie78"}, "edited": false, "score": 0, "creation_date": 1482974255, "post_id": 41370959, "comment_id": 69945629, "body": "Another question, my compiler doesn&#39;t support make_unique thingy and I found that you can write all that using template like here <a href=\"http://stackoverflow.com/questions/24609271/errormake-unique-is-not-a-member-of-std\">link</a>  Could you rewrite it using this? @Mikel"}, {"owner": {"reputation": 3189, "user_id": 7016303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dYmXc.jpg?s=128&g=1", "display_name": "Mikel F", "link": "https://stackoverflow.com/users/7016303/mikel-f"}, "reply_to_user": {"reputation": 27, "user_id": 6307997, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6c5ef634572fd39a35a304d567ed2dd3?s=128&d=identicon&r=PG&f=1", "display_name": "Johnie78", "link": "https://stackoverflow.com/users/6307997/johnie78"}, "edited": false, "score": 1, "creation_date": 1482974258, "post_id": 41370959, "comment_id": 69945630, "body": "@Johnie78 Added an update to create the unique_ptr via constructor."}, {"owner": {"reputation": 27, "user_id": 6307997, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6c5ef634572fd39a35a304d567ed2dd3?s=128&d=identicon&r=PG&f=1", "display_name": "Johnie78", "link": "https://stackoverflow.com/users/6307997/johnie78"}, "edited": false, "score": 0, "creation_date": 1482976670, "post_id": 41370959, "comment_id": 69946084, "body": "One more question @Mikel sorry to bother you. Edit in the main post"}], "tags": [], "owner": {"reputation": 3189, "user_id": 7016303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dYmXc.jpg?s=128&g=1", "display_name": "Mikel F", "link": "https://stackoverflow.com/users/7016303/mikel-f"}, "is_accepted": true, "score": 2, "last_activity_date": 1482974181, "last_edit_date": 1482974181, "creation_date": 1482966421, "answer_id": 41370959, "question_id": 41370892, "link": "https://stackoverflow.com/questions/41370892/how-to-make-a-deep-copy/41370959#41370959", "title": "How to make a deep copy?", "body": "<p>A deep copy merely means that you have allocated space for the second copy and duplicated the contents of the original into that space, as opposed to a shallow copy, which is effectively a 'pointer' to the original object that becomes invalid after the original is destroyed.</p>\n\n<p>You only need a deep copy if you have to have more than one owner of the data. If your <code>House</code> object is meant to own the data, creating a <code>Human' dynamically and then passing it to the</code>House` instance will do the trick.</p>\n\n<pre><code>Human *newPerson = new Human(age,height);\n\nhouse-&gt;AddHuman(newPerson);\n</code></pre>\n\n<p>Or, if you want to take advantage of smart pointers:</p>\n\n<pre><code>std::unique_ptr&lt;Person&gt; newPerson = std::make_unique&lt;Person&gt;(age,height);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>std::unique_ptr&lt;Person&gt; newPerson(new Person(age,height));\n</code></pre>\n\n<p>and then</p>\n\n<pre><code>house-&gt;AddHuman(std::move(newPerson));\n</code></pre>\n\n<p>If your project absolutely needs to perform a deep copy, then you probably don't want to allocate locally.</p>\n\n<pre><code>house-&gt;AddHuman(Person(age,height));\n</code></pre>\n\n<p>Where <code>House</code> has a new method, <code>AddHuman()</code> that looks something like this:</p>\n\n<pre><code>void House:AddHuman(Person&amp; newHuman);\n</code></pre>\n\n<p>If <code>House</code> stores <code>Human</code> objects in a vector, <strong>and</strong> <code>Human</code> objects can be copied trivially:</p>\n\n<pre><code>m_Humans.PushBack(newHuman);\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 6307997, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6c5ef634572fd39a35a304d567ed2dd3?s=128&d=identicon&r=PG&f=1", "display_name": "Johnie78", "link": "https://stackoverflow.com/users/6307997/johnie78"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1275, "favorite_count": 0, "closed_date": 1483013472, "accepted_answer_id": 41370959, "answer_count": 1, "score": 0, "last_activity_date": 1482976621, "creation_date": 1482965833, "last_edit_date": 1482976621, "question_id": 41370892, "link": "https://stackoverflow.com/questions/41370892/how-to-make-a-deep-copy", "closed_reason": "Not suitable for this site", "title": "How to make a deep copy?", "body": "<p>So basically let's say I have 2 classes now. 1 is called Human and the other one is called House.</p>\n\n<p>What I have done now is made that the house makes and destroys human, so basically in the House .h file I have</p>\n\n<pre><code>    Human *humanP;\n</code></pre>\n\n<p>And in the .cpp files constructor</p>\n\n<pre><code>    humanP = new Human;\n    humanP-&gt;something(); // lets me access the methods in the Human class\n</code></pre>\n\n<p>As far as I know this makes a composition and House creates/destroys the Human object. But I need to add parameters to my Human object like height and age for example.</p>\n\n<p>In the main I want to have something like</p>\n\n<pre><code>int age, height;\n\ncout &lt;&lt; \"Whats your age? &lt;&lt; endl;\ncin &gt;&gt; age;\ncout &lt;&lt; \"Whats your height? &lt;&lt; endl;\ncin &gt;&gt; height;\n</code></pre>\n\n<p>With this I want to make</p>\n\n<pre><code>Human humanO(age, height);\n</code></pre>\n\n<p>Which will create Human object with those parameters. But I still want the Human object to be held in House class and then destroyed there. As far as I know I need to make a deep copy of that, so that I can copy the humanO inside the House class and then delete the object in the main file.</p>\n\n<p>I've been looking trough examples but there are quite a lot of different ones, could anyone write what the code would look like to make a deep copy of this Human object that is created in main?</p>\n\n<p>Edit:</p>\n\n<p>Making an edit here instead of replying cause it's easier to write code here.</p>\n\n<p>Okay another stupid question. If I use the simple method with</p>\n\n<pre><code>Human *newPerson = new Human\n</code></pre>\n\n<p>and do</p>\n\n<pre><code>House house;\nhouse.addHuman(newPerson)\n</code></pre>\n\n<p>while having the class method</p>\n\n<pre><code>addHuman(Human *other)\n{\n   this-&gt;humanP = other;\n   cout &lt;&lt; humanP-&gt;getAge() &lt;&lt; endl &lt;&lt; endl &lt;&lt; endl;\n}\n</code></pre>\n\n<p>it works fine and gives me the age.</p>\n\n<p>If I use smart pointers it doesn't work, what should I change? It gives me errors like \"no matching function\". What arguments should I put into the <code>addHuman()</code> so that it would take the smart pointer thingy?</p>\n"}, {"tags": ["c++", "c++11", "clion"], "comments": [{"owner": {"reputation": 59687, "user_id": 951890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01c3ef0adae5153378a3f602ca068a03?s=128&d=identicon&r=PG", "display_name": "Vaughn Cato", "link": "https://stackoverflow.com/users/951890/vaughn-cato"}, "edited": false, "score": 0, "creation_date": 1482965996, "post_id": 41370690, "comment_id": 69943488, "body": "Are you seeing this when you compile?  If so, which compiler are you using?"}, {"owner": {"reputation": 560, "user_id": 6598108, "user_type": "registered", "accept_rate": 8, "profile_image": "https://i.stack.imgur.com/ORByM.jpg?s=128&g=1", "display_name": "drbombe", "link": "https://stackoverflow.com/users/6598108/drbombe"}, "reply_to_user": {"reputation": 59687, "user_id": 951890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01c3ef0adae5153378a3f602ca068a03?s=128&d=identicon&r=PG", "display_name": "Vaughn Cato", "link": "https://stackoverflow.com/users/951890/vaughn-cato"}, "edited": false, "score": 1, "creation_date": 1482966946, "post_id": 41370690, "comment_id": 69943767, "body": "I didn&#39;t see this during compiling. The codes can be compiled and run. It is only reported in IDE. For the IDE, a few ways can fix it, such as remove const, simply using int &#39;z{3}&#39; or change it to &#39;const int z=3&#39;. If you copy and past the above codes to your compiler or IDE, can you see the problem? Is this a real error or IDE bug?"}, {"owner": {"reputation": 59687, "user_id": 951890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01c3ef0adae5153378a3f602ca068a03?s=128&d=identicon&r=PG", "display_name": "Vaughn Cato", "link": "https://stackoverflow.com/users/951890/vaughn-cato"}, "edited": false, "score": 0, "creation_date": 1482967054, "post_id": 41370690, "comment_id": 69943792, "body": "Your code is valid."}, {"owner": {"reputation": 42694, "user_id": 1175077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AWgLI.jpg?s=128&g=1", "display_name": "jpw", "link": "https://stackoverflow.com/users/1175077/jpw"}, "edited": false, "score": 0, "creation_date": 1482968208, "post_id": 41370690, "comment_id": 69944160, "body": "There seems to be a number of reported bugs in JetBrains issue tracker for CLion that relates (or look similar enough) to this (issues with braced init). Most likely a false positive in the static analysis. Annoying maybe, but the code should be fine."}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 6, "last_activity_date": 1482971193, "creation_date": 1482971193, "answer_id": 41371614, "question_id": 41370690, "link": "https://stackoverflow.com/questions/41370690/different-betwee-and-when-c11-initialize-variables/41371614#41371614", "title": "Different betwee {} and = when C++11 initialize variables", "body": "<blockquote>\n  <p>whether it is indeed an error of my codes</p>\n</blockquote>\n\n<p>There is no error in the code, it is OK.</p>\n\n<blockquote>\n  <p>or it is just a bug in the IDE?</p>\n</blockquote>\n\n<p>It is a bug in whatever generates the error message. The IDE is high on my list of suspects but it could be another tool whose message the IDE relays.</p>\n\n<blockquote>\n  <p>Any difference between these two initialization approaches?</p>\n</blockquote>\n\n<p>In this context (default member initializer) both syntaxes are semantically equivalent. There is no difference.</p>\n"}], "owner": {"reputation": 560, "user_id": 6598108, "user_type": "registered", "accept_rate": 8, "profile_image": "https://i.stack.imgur.com/ORByM.jpg?s=128&g=1", "display_name": "drbombe", "link": "https://stackoverflow.com/users/6598108/drbombe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1482981336, "creation_date": 1482964503, "last_edit_date": 1482981336, "question_id": 41370690, "link": "https://stackoverflow.com/questions/41370690/different-betwee-and-when-c11-initialize-variables", "title": "Different betwee {} and = when C++11 initialize variables", "body": "<p>I used CLion as an IDE, it reports an error in IDE as </p>\n\n<blockquote>\n  <p>field z must be initialized</p>\n</blockquote>\n\n<p>It can compile and run. But if I change <code>const int z{3};</code> to <code>const int z=3;</code>, no error will be reported in IDE. My question is whether it is indeed an error of my codes or it is just a bug in the IDE? Any difference between these two initialization approaches? Did your IDE report this error?</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nclass Test\n{\nprivate:\n    const int x = 3;\n    int y;\n    const int z{3};\npublic:\n    Test(int);\n    int gety(){\n        return y;\n    }\n};\n\nTest::Test(int a){\n    y=x+4;\n}\n\nint main()\n{\n    Test test(5);\n    std::cout &lt;&lt; test.gety() &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "opengl", "graphics"], "answers": [{"tags": [], "owner": {"reputation": 130, "user_id": 4979706, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DsAYM.png?s=128&g=1", "display_name": "Jadh4v", "link": "https://stackoverflow.com/users/4979706/jadh4v"}, "is_accepted": true, "score": 1, "last_activity_date": 1482966992, "creation_date": 1482966992, "answer_id": 41371036, "question_id": 41370654, "link": "https://stackoverflow.com/questions/41370654/how-to-get-coordinate-of-image-using-mouse-click-when-resize-window/41371036#41371036", "title": "how to get coordinate of image using mouse click when resize window?", "body": "<p>Actually, it is the mouse click coordinates that are changing. You will have to convert your mouse click position (x,y) from viewport coordinates to your drawing coordinates (i.e. Ortho2D coordinates).</p>\n\n<p>Assuming that <code>width</code> and <code>height</code> variables are provided by the system whenever the window is resized, try the following:</p>\n\n<pre><code>x = x/width * 640;\ny = (height -y) / height * 440;\n</code></pre>\n\n<p>And then test for the button bounds.</p>\n"}, {"comments": [{"owner": {"reputation": 508, "user_id": 4170455, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100000635283093/picture?type=large", "display_name": "Abdul Wahab", "link": "https://stackoverflow.com/users/4170455/abdul-wahab"}, "edited": false, "score": 0, "creation_date": 1483018596, "post_id": 41378884, "comment_id": 69963463, "body": "Thanks for this unique Suggestion i will surely implement selection buffer (Y)"}], "tags": [], "owner": {"reputation": 319, "user_id": 1637710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08c283dd2e1a536db19a4309ff322fd3?s=128&d=identicon&r=PG", "display_name": "hiroki", "link": "https://stackoverflow.com/users/1637710/hiroki"}, "is_accepted": false, "score": 0, "last_activity_date": 1483011185, "creation_date": 1483011185, "answer_id": 41378884, "question_id": 41370654, "link": "https://stackoverflow.com/questions/41370654/how-to-get-coordinate-of-image-using-mouse-click-when-resize-window/41378884#41378884", "title": "how to get coordinate of image using mouse click when resize window?", "body": "<p>The correct way to implement this is to use <a href=\"https://www.opengl.org/archives/resources/faq/technical/selection.htm\" rel=\"nofollow noreferrer\">selection buffer</a>.</p>\n\n<p>With this, you know which polygon is being clicked. This is not affected by the size of the window.</p>\n"}], "owner": {"reputation": 508, "user_id": 4170455, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100000635283093/picture?type=large", "display_name": "Abdul Wahab", "link": "https://stackoverflow.com/users/4170455/abdul-wahab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 431, "favorite_count": 1, "accepted_answer_id": 41371036, "answer_count": 2, "score": 3, "last_activity_date": 1483011185, "creation_date": 1482964307, "question_id": 41370654, "link": "https://stackoverflow.com/questions/41370654/how-to-get-coordinate-of-image-using-mouse-click-when-resize-window", "title": "how to get coordinate of image using mouse click when resize window?", "body": "<p>I am making Game in openGl which contain start menu screen.Problem is when i click start game button (which is a texture image) game start successfully but when i resize window and then click start game button the texture image coordinates change and game did not start how i prevent to change image coordinates after resize window.</p>\n\n<p><strong>Here is My Mouse funtion</strong></p>\n\n<pre><code>void mouseClick (int button, int state, int x, int  y)    \n{\n    if (!menu)\n    { \n        xMin = 300, xMax = 400, yMin = 350, yMax = 400;\n\n        if (button == GLUT_LEFT_BUTTON &amp;&amp; state == GLUT_DOWN)\n        {\n            y = height - y;\n            if (x &gt;= xMin &amp;&amp; x &lt;= xMax &amp;&amp; y &gt;= yMin &amp;&amp; y &lt;= yMax)\n            {\n                printf_s(\"starting 2d Game \");\n            }\n        }\n    }\n}\n</code></pre>\n\n<p><strong>Here is my texture Image code</strong> </p>\n\n<pre><code>glBegin(GL_QUAD_STRIP);\n\n\n        glTexCoord2f(0, 0);\n        glVertex2f(300, 350);\n\n        glTexCoord2f(1, 0);\n        glVertex2f(400, 350);\n\n        glTexCoord2f(0, 1);\n        glVertex2f(300, 400);\n\n\n        glTexCoord2f(1, 1);\n        glVertex2f(400,400);\n\n        glEnd();\n        glFlush();\n</code></pre>\n\n<p><strong>Here is my Matrix Projection Code:</strong></p>\n\n<pre><code>glMatrixMode(GL_PROJECTION);\n    glLoadIdentity();\n    //gluOrtho2D(0.0, 640.0, 0.0, 440);//dino window\n    gluOrtho2D(0.0, 640.0, 0.0, 440);//dino window\n    //gluOrtho2D(1.0, 1.0, 1.0,1.0);//house window\n    //gluOrtho2D(1.0, 1.0, 1.0, 1.0);//bird window\n    glViewport(0, 0, width, height);\n    //glViewport(220, 100, 100, 200);\n</code></pre>\n"}, {"tags": ["c++", "openssl"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1482964337, "post_id": 41370547, "comment_id": 69942950, "body": "The solution is to fix the buggy client. The client must wait for the proxy to establish a connection and send a &quot;200 ok...&quot; before attempting to negotiate TLS. The client&#39;s code is broken."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1482964341, "post_id": 41370547, "comment_id": 69942953, "body": "Don&#39;t read anything after the blank line, even if it means you have  to read a byte at a time: performance is not critical here. And make sure you don&#39;t send 200 OK until you have established the upstream connection."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1482992917, "post_id": 41370547, "comment_id": 69950185, "body": "@SamVarshavchik the bug is on the proxy side. The client is allowed to send data before receiving the <code>200</code> reply. This is stated in <a href=\"https://tools.ietf.org/html/draft-luotonen-web-proxy-tunneling-01#section-3.3\" rel=\"nofollow noreferrer\">Section 3.3 &quot;Data Pipelining&quot;</a> of the <a href=\"https://tools.ietf.org/html/draft-luotonen-web-proxy-tunneling-01\" rel=\"nofollow noreferrer\"><code>CONNECT</code> spec</a>. The proxy should not be calling <code>SSL_accept()</code> to begin with, as it is not the target of the TLS handshake. It should be passing the raw data as-is to the next server."}], "answers": [{"comments": [{"owner": {"reputation": 175, "user_id": 1838488, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ce027494fbc7cf27fb2a20d3cb9a2d52?s=128&d=identicon&r=PG", "display_name": "MikelSV", "link": "https://stackoverflow.com/users/1838488/mikelsv"}, "edited": false, "score": 0, "creation_date": 1482995180, "post_id": 41374351, "comment_id": 69951081, "body": "All true, but the proxy mitm."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1482993965, "last_edit_date": 1482993965, "creation_date": 1482993259, "answer_id": 41374351, "question_id": 41370547, "link": "https://stackoverflow.com/questions/41370547/openssl-accept-connection-use-my-buffer/41374351#41374351", "title": "openssl accept connection use my buffer", "body": "<p>The problem is with your proxy, not the client.</p>\n\n<p>Per Section 3.3 of the <a href=\"https://tools.ietf.org/html/draft-luotonen-web-proxy-tunneling-01\" rel=\"nofollow noreferrer\"><code>CONNECT</code> specification</a>:</p>\n\n<blockquote>\n  <p>3.3. Data Pipelining</p>\n  \n  <p><strong>It is legal for the client to send some data intended for the server before the \"200 Connection established\" (or any other success or error code) is received.</strong>  This allows for reduced latency and increased efficiency when any handshake data intended for the remote server can be sent in the same TCP packet as the proxy request.  This allows the proxy to immediately forward the data once the connection to the remote server is established, without waiting for two round-trip times to the client (sending 200 to client; waiting for the next packet from client).</p>\n  \n  <p><strong>This means that the proxy server cannot assume that reading from the\n  client socket descriptor would only return the proxy request.</strong>) Rather, there may be any amount of opaque data following the proxy request that must be forwarded to the server once the connection is established.  However, if the connection to the remote server fails, or if it is disallowed by the proxy server, the data intended to the remote server will be discarded by the proxy.</p>\n</blockquote>\n\n<p>The real mistake is that your HTTP proxy <strong>should not</strong> be calling <code>SSL_accept()</code> to begin with, as it is not the target of the client's TLS handshake. The requested server is the target, and accordingly only it can properly respond to the handshake. Your proxy must not respond to the handshake.  It is likely to cause failure on the client side (especially if the client is doing its job correctly to validate the response is not from a man-in-the-middle).</p>\n\n<p>Your proxy <strong>must</strong> establish a normal <em>unencrypted</em> connection to the requested server and then pass any <em>raw data as-is</em> back and forth.  Your proxy is not a participant in the client/server encryption session, it is merely a pass-through to facilitate data exchange between the client and server, nothing more.</p>\n\n<p><strong>Do not</strong> attempt to interpret the client's or server's data in any way, it is not your data to process.  Everything after the initial <code>CONNECT</code> request is <strong>opaque</strong> to the proxy and must be forwarded as-is. You don't know how, and cannot make any assumptions about how, the client and server are communicating with each other.</p>\n"}], "owner": {"reputation": 175, "user_id": 1838488, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ce027494fbc7cf27fb2a20d3cb9a2d52?s=128&d=identicon&r=PG", "display_name": "MikelSV", "link": "https://stackoverflow.com/users/1838488/mikelsv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1482993965, "creation_date": 1482963757, "question_id": 41370547, "link": "https://stackoverflow.com/questions/41370547/openssl-accept-connection-use-my-buffer", "title": "openssl accept connection use my buffer", "body": "<p>In normal: browser send to my proxy: \"CONNECT... \\r\\n\\r\\n\", proxy send \"200 OK\\r\\n\\r\\n\", browser send encrypted request, proxy call SSL_accept(socket). OK.</p>\n\n<p>Problem: browser send to my proxy server: \"CONNECT... \\r\\n\\r\\n\" + next encrypted request. Proxy send \"200 OK\\r\\n\\r\\n\", call SSL_accept(socket) returned SSL_ERROR_SSL or SSL_ERROR_SYSCALL because proxy read in buffer part of encrypted request.</p>\n\n<p>Solutions:</p>\n\n<ol>\n<li><p>Use recv(sock, buf, buffer_size, MSG_PEEK) and recv(sock, buf, used_size, 0).  Problem: all data will be read, or endless signal in pool().</p></li>\n<li><p>How to call SSL_accept() use my buffer with part of encrypted data?</p></li>\n<li><p>Any solutions?</p></li>\n</ol>\n"}, {"tags": ["c++", "arrays", "algorithm", "dynamic-programming"], "answers": [{"tags": [], "owner": {"reputation": 51837, "user_id": 2144669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7393f439028063515255b63ed94cfd?s=128&d=identicon&r=PG", "display_name": "David Eisenstat", "link": "https://stackoverflow.com/users/2144669/david-eisenstat"}, "is_accepted": true, "score": 1, "last_activity_date": 1483046211, "last_edit_date": 1483046211, "creation_date": 1483034094, "answer_id": 41384867, "question_id": 41370387, "link": "https://stackoverflow.com/questions/41370387/find-maximal-subset-of-all-non-connected-elements-if-elements-swapped-in-bubble/41384867#41384867", "title": "Find maximal subset of all non connected elements if Elements swapped in bubble sort are connected", "body": "<p>Observe first by induction that each connected component is an interval.</p>\n\n<p>Observe next that, given a partition of the input into two parts, there is no edge spanning the parts if and only if every element in the first part is less than or equal to every element in the second part.</p>\n\n<p>The connected components can be identified using a linear-time algorithm.</p>\n\n<pre><code>def count(lst):\n    compmaxes = []  # holds the maximum of each connected component\n    for x in lst:\n        if not compmaxes or compmaxes[-1] &lt;= x:\n            compmaxes.append(x)\n        else:\n            while len(compmaxes) &gt; 1 and compmaxes[-2] &gt; x:\n                del compmaxes[-2]\n    return len(compmaxes)\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 7184494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64d078986b62843f5f41a0d1e836f15e?s=128&d=identicon&r=PG&f=1", "display_name": "bean", "link": "https://stackoverflow.com/users/7184494/bean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 41384867, "answer_count": 1, "score": 0, "last_activity_date": 1483046211, "creation_date": 1482962954, "question_id": 41370387, "link": "https://stackoverflow.com/questions/41370387/find-maximal-subset-of-all-non-connected-elements-if-elements-swapped-in-bubble", "title": "Find maximal subset of all non connected elements if Elements swapped in bubble sort are connected", "body": "<p><strong>PROBLEM STATEMENT</strong></p>\n\n<p>In Bubble sort,whenever I swap two elements in the array (while sorting),I tie a rope between the element which are swapped.I need to find the size of the maximal set in the array in which none of the elements are connected with any other element after the bubble sort is done .</p>\n\n<p>eg : { 1 , 3 ,2 }</p>\n\n<p>1st iteration of bubble sort :</p>\n\n<p>2 and 3 swapped so tie 2 with 3 </p>\n\n<p>{1 ,2,3}</p>\n\n<p>2nd iteration </p>\n\n<p>{1,2,3}\nno swaps in this iteration so dont tie any element with any other element </p>\n\n<p>3rd iteration </p>\n\n<p>{1,2,3}\nno swaps in this iteration so dont tie any element with any other element  </p>\n\n<p>after the end of bubble sort only 2 and 3 are tied together </p>\n\n<p>Answer for this example is 2 because the size of  the maximal set  in which none of the elements is not tied with any other element.</p>\n\n<p>the possible maximal sets are {1,2} (since 1 and 2 are not tied with a rope) and {1,3}  { since 1 and 3 are not tied with the rope }</p>\n\n<p>Possible subsets for this array are {1} , {2}, {3} ,{1,2} ,{1,3} ,{3,2} {1,3,2},{ }</p>\n\n<p>out of these valid subsets are {1},{2},{3},{1,2},{1,3} In this valid subsets {1,2} and {1,3} are larger subsets .The size of both the subsets are 2 .so the answer is 2.</p>\n\n<p>Input :</p>\n\n<p>First line of input contains T  - No of test cases </p>\n\n<p>first line of each test case contains n ( 1 &lt;= n &lt;= 100000 )- number of elements in the array </p>\n\n<p>second line  of each test case contains n elements of the array </p>\n\n<p>example:</p>\n\n<p>input : (from the example explained above )</p>\n\n<p>1</p>\n\n<p>3</p>\n\n<p>1 3 2 </p>\n\n<p>output :</p>\n\n<p>2</p>\n\n<p><strong>MY APPROACH</strong></p>\n\n<p>I think the maximal subset length will be the length of longest increasing subsequence and here's my code getting <strong>WRONG ANSWERS</strong>. Please help!</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint bs(int a[],int x,int lo,int hi)\n{\nwhile(hi-lo&gt;1)\n{\n    int mid=(hi+lo)/2;\n    if(a[mid]&gt;=x)\n    hi=mid;\n    else\n    lo=mid;\n}\nreturn hi;\n}\n\nint main() {\nint t;\ncin&gt;&gt;t;\nwhile(t--)\n{\n    int n,m=1;\n    cin&gt;&gt;n;\n    int a[n+1];\n    for(int i=0;i&lt;n;i++)\n    cin&gt;&gt;a[i];\n    int dp[n+1];\n    for(int i=0;i&lt;n;i++)\n    dp[i]=0;\n    dp[0]=a[0];\n    for(int i=1;i&lt;n;i++)\n    {\n        if(dp[0]&gt;a[i])\n        dp[0]=a[i];\n        else if(a[i]&gt;dp[m-1])\n        dp[m++]=a[i];\n        else\n        {\n            int x=bs(a,a[i],-1,m-1);\n            dp[x]=a[i];\n        }\n    }\n    cout&lt;&lt;m&lt;&lt;endl;\n}\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "pointers", "c++14"], "comments": [{"owner": {"reputation": 59687, "user_id": 951890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01c3ef0adae5153378a3f602ca068a03?s=128&d=identicon&r=PG", "display_name": "Vaughn Cato", "link": "https://stackoverflow.com/users/951890/vaughn-cato"}, "edited": false, "score": 1, "creation_date": 1482963077, "post_id": 41370363, "comment_id": 69942524, "body": "If your matrix size is determined at runtime, then there is no way the compiler can know whether the width is 1 or not.  One possibility is to have a different class for this case."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 2, "creation_date": 1482963218, "post_id": 41370363, "comment_id": 69942575, "body": "You will need to create a second class that represents a 1D array.      Even better, use <code>std::vector&lt;double</code> to represent a 1D array, and a <code>std::vector&lt;std::vector&lt;double &gt; &gt;</code> to represent a 2D array - no messing about with managing array dimensions, memory allocation, or trying to overload (as you are) <code>operator[]()</code> in strange ways."}, {"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1482964429, "post_id": 41370363, "comment_id": 69942980, "body": "Do you need to be able to dynamically resize your matrix?  If not, you can take the rows and columns as template parameters, which would let you specialise in the case that either is <code>1</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6656445"}, "reply_to_user": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1482964471, "post_id": 41370363, "comment_id": 69942994, "body": "@JustinTime No."}], "answers": [{"comments": [{"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 1, "creation_date": 1482966852, "post_id": 41370718, "comment_id": 69943734, "body": "You could <i>at least</i> use <code>unique_ptr</code>. And it does not answers OP question."}], "tags": [], "owner": {"reputation": 122, "user_id": 7338180, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cWf9d5AHR98/AAAAAAAAAAI/AAAAAAAAAD4/O3TekLyIXno/photo.jpg?sz=128", "display_name": "Daniyal Basit Khan", "link": "https://stackoverflow.com/users/7338180/daniyal-basit-khan"}, "is_accepted": false, "score": -1, "last_activity_date": 1482964679, "last_edit_date": 1495541452, "creation_date": 1482964679, "answer_id": 41370718, "question_id": 41370363, "link": "https://stackoverflow.com/questions/41370363/change-array-dimensions-at-runtime/41370718#41370718", "title": "Change array dimensions at runtime", "body": "<p>To make a 2D dynamic array you need to use some Data Structures concepts and I am considering that you not familiar with them. Before that, let me show you how make a 1D dynamic array.</p>\n\n<pre><code>int main()\n{\n  int size;\n\n  std::cin &gt;&gt; size;\n\n  int *array = new int[size];\n\n  delete [] array;\n\n  return 0;\n}\n</code></pre>\n\n<p>Don't forget to delete every array you allocate with new.</p>\n\n<p>Let's go back to 2D dynamic arrays. These arrays can be summarized as a hash table which is a common type of data structure. Now this person has explained 2D arrays much better than me <a href=\"https://stackoverflow.com/questions/936687/how-do-i-declare-a-2d-array-in-c-using-new\">How to create dynamic 2D array</a> follow the link.</p>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 2, "last_activity_date": 1482967199, "last_edit_date": 1482967199, "creation_date": 1482965062, "answer_id": 41370776, "question_id": 41370363, "link": "https://stackoverflow.com/questions/41370363/change-array-dimensions-at-runtime/41370776#41370776", "title": "Change array dimensions at runtime", "body": "<p>You can wrap the two alternative types into a variant type (a tagged union). </p>\n\n<p>However, you cannot use <code>operator[]</code> to access both variants, since the return type would be different for each. One would return a reference to a subarray, while the other would return a double. You cannot have two overloads that differ only by their return type.</p>\n\n<p>Instead, you can use overloaded functions. For example, <code>double at(size_type x)</code> and <code>double at(size_type x,  size_type y)</code>.</p>\n\n<hr>\n\n<p>However, since you're representing a matrix, it might be simpler to use a 1D array to represent a matrix of any arbitrary rank by laying the higher dimensions flat consecutively, just like multidimensional arrays are stored in memory (memory is unidimensional, after all). This allows you to specify the width of each dimension at runtime and you avoid the complexity of the variant type.</p>\n"}, {"tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": false, "score": 0, "last_activity_date": 1482967238, "creation_date": 1482967238, "answer_id": 41371077, "question_id": 41370363, "link": "https://stackoverflow.com/questions/41370363/change-array-dimensions-at-runtime/41371077#41371077", "title": "Change array dimensions at runtime", "body": "<p>A nice solution would be to use <code>std::variant</code>, or <code>boost::variant</code> if you don't have a C++17 compiler. I would create a container that ease it's use. </p>\n\n<pre><code>template&lt;typename T&gt;\nstruct DynamicDimension {\n    std::variant&lt;T, std::vector&lt;T&gt;&gt; element;\n\n    // accessors, is_vector and is_element function.\n    // Maybe operator[] and push_back and a get function.\n    // Add begin and end to make your class useable with range for loops.\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4300, "user_id": 4513509, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MAkrs.png?s=128&g=1", "display_name": "NonCreature0714", "link": "https://stackoverflow.com/users/4513509/noncreature0714"}, "is_accepted": false, "score": 0, "last_activity_date": 1483042998, "last_edit_date": 1483042998, "creation_date": 1482971581, "answer_id": 41371658, "question_id": 41370363, "link": "https://stackoverflow.com/questions/41370363/change-array-dimensions-at-runtime/41371658#41371658", "title": "Change array dimensions at runtime", "body": "<p>This question really interested me, and in my original answer, I stated that the desired operation wasn't possible because in C++ you can't overload functions which only differ in their return type. </p>\n\n<p>But what if you could?</p>\n\n<p>I became curious, so I spent quite a lot of my time researching and fiddling with C++ to see if I could, in fact, make one function return multiple types... And the answer it 'yes,' but it's a way not generally used because it uses <code>void *</code>, which makes life difficult. </p>\n\n<p>It did, however, have the added perk of writing fewer lines of code, even if harder to understand.</p>\n\n<p>That said, I learned something from the experience, so I thought I should share.</p>\n\n<p>And so, there is different way to solve this with less code. In the matrix class, have two pointers, one a <code>T * matrix</code> and the other a <code>T ** matrix2d</code>, and use a <code>void *</code> as a return type for your overloaded <code>[]</code> operator.</p>\n\n<pre><code>#ifndef matrix_h\n#define matrix_h\n\ntemplate &lt;typename T&gt;\nclass Matrix {\nprivate:\n    int width;\n    int height;\n    int size;\n    T * matrix;\n    T ** matrix2d;\n\npublic:\n    Matrix(const int w, const int h): width(w), height(h){\n        if(w==1){\n            matrix = new T[h];\n            size = h;\n        } else if (h==1){\n            matrix = new T[w];\n            size = w;\n        } else {\n            matrix2d = new T*[h];\n            for(int i=0;i&lt;h;++i){\n                matrix2d[i] = new T[w];\n            }\n            size = w*h;\n        }\n    }\n\n    ~Matrix() {\n        if(width==1 || height==1){\n            delete [] matrix;\n        } else {\n            for(int i=0;i&lt;height;++i){\n                T * _r = matrix2d[i];\n                delete [] _r;\n            }\n            delete [] matrix2d;\n        }\n    }\n\n    void * operator[](const int i){\n        if(width==1 || height==1){\n            return &amp; matrix[i];\n        } else {\n            return &amp; (*matrix2d[i]);\n        }\n    }\n\n    const int getSize(){\n        return size;\n    }\n};\n\n#endif /* matrix_h */\n</code></pre>\n\n<p>In <code>main</code>, do this to demo:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"Matrix.h\"\n\nint main() {\n    //Give the type so the correct size_t is allocated in memory.\n    Matrix &lt;double&gt; matrix1(1, 3);\n    Matrix &lt;double&gt; matrix2(2,2);\n\n    //Now have an array of void pointers.\n    std::cout &lt;&lt; \"1 dimensional\" &lt;&lt; std::endl;\n    for(int i=0;i&lt;matrix1.getSize();++i){\n        std::cout &lt;&lt; matrix1[i] &lt;&lt; std::endl;\n    }\n\n    //Cast the void *, then dereference it to store values.\n    *((double*)matrix1[0]) = 77;\n    *((double*)matrix1[1]) = 31;\n    *((double*)matrix1[2]) = 24.1;\n\n    for(int i=0;i&lt;matrix1.getSize();++i){\n        std::cout &lt;&lt; *((double *)matrix1[i]) &lt;&lt; std::endl;\n    }\n\n    std::cout &lt;&lt; \"2 dimensional addresses.\" &lt;&lt; std::endl;\n    for(int i=0;i&lt;2;++i){\n        double * _row = (double*)matrix2[i];\n        for(int j=0;j&lt;2;++j){\n            std::cout &lt;&lt; &amp;_row[j] &lt;&lt; \" \";\n        }\n        std::cout &lt;&lt; std::endl;\n    }\n\n    std::cout &lt;&lt; \"2 dimensional assignment and display.\" &lt;&lt; std::endl;\n    double num = 13.1;\n    for(int i=0;i&lt;2;++i){\n        double * _row = (double*)matrix2[i];\n        for(int j=0;j&lt;2;++j){\n            _row[j] = num;\n            num += 0.13;\n            std::cout &lt;&lt; _row[j] &lt;&lt; \" \";\n        }\n        std::cout &lt;&lt; std::endl;\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "is_accepted": true, "score": 0, "last_activity_date": 1483029604, "last_edit_date": 1495535433, "creation_date": 1482984592, "answer_id": 41373010, "question_id": 41370363, "link": "https://stackoverflow.com/questions/41370363/change-array-dimensions-at-runtime/41373010#41373010", "title": "Change array dimensions at runtime", "body": "<p>I would recommend using a one-dimensional array, as <a href=\"https://stackoverflow.com/a/41370776/5386374\">user2079303 suggested in their answer</a>.  If this isn't desirable, however, it's also possible to implement your idea with either templates or polymorphism.</p>\n\n<hr>\n\n<p>If you don't need to be able to change its dimensions on the fly, you could make your matrix a templated class, using its dimensions as template parameters.  This, in turn, allows the dimensions to be used for compile-time logic with SFINAE, which allows you to overload <code>operator[]()</code> based on the matrix's dimensions.</p>\n\n<p>Note that this doesn't <em>actually</em> create a 1D array when <code>Rows == 1</code> or <code>Cols == 1</code>, it merely simulates one; if you explicitly need that behaviour, instead of technically different but mostly equivalent behaviour, you'll want to look into specialising the class for when one or both parameters is <code>1</code>.  This will likely involve duplicating at least some of the code, so it'll be a bit messy.</p>\n\n<pre><code>// This example uses std::array for the actual array, since it's compile-time anyways.\n// This, in turn, lets it declare a lot of functions constexpr.\n// Const-correctness omitted for brevity.  Remember to restore it for actual code.\ntemplate&lt;size_t Rows, size_t Cols&gt;\nclass Matrix {\n    std::array&lt;std::array&lt;double, Cols&gt;, Rows&gt; mat;\n\n  public:\n    // Default constructor. Clang _really_ likes braced initialiser lists.\n    constexpr Matrix() : mat{{{{0}}}} {}\n\n    // Array constructor.\n    constexpr Matrix(const decltype(mat)&amp; arr) : mat(arr) {}\n\n    // -----\n\n    // Subscript operators.\n\n    // Generic operator.  Matrix&lt;x, y&gt;, where x != 1 &amp;&amp; y != 1.\n    // Does what normal subscript operators do.\n    template&lt;bool R = (Rows == 1), bool C = (Cols == 1)&gt;\n    auto&amp; operator[](std::enable_if_t&lt;!R &amp;&amp; !C, size_t&gt; i) {\n        return mat[i];\n    }\n\n    // Magic operator.  Matrix&lt;1, x&gt;, where x != 1.\n    template&lt;bool R = (Rows == 1), bool C = (Cols == 1)&gt;\n    auto&amp; operator[](std::enable_if_t&lt;(R &amp;&amp; !C), size_t&gt; i) {\n        return mat[0][i];\n    }\n\n    // Magic operator.  Matrix&lt;x, 1&gt;, where x != 1.\n    template&lt;bool R = (Rows == 1), bool C = (Cols == 1)&gt;\n    auto&amp; operator[](std::enable_if_t&lt;C &amp;&amp; !R, size_t&gt; i) {\n        return mat[i][0];\n    }\n\n    // Scalar matrix operator.  Matrix&lt;1, 1&gt;.\n    // Just returns mat[0][0], for simplicity's sake.  Might want to make it do something\n    //  more complex in your actual class.\n    template&lt;bool R = (Rows == 1), bool C = (Cols == 1)&gt;\n    auto&amp; operator[](std::enable_if_t&lt;R &amp;&amp; C, size_t&gt; i) {\n        return mat[0][0];\n    }\n\n    // -----\n\n    // A few interface helpers.\n\n    // Simple begin() &amp; end(), for example's sake.\n    // A better version would begin at mat[0][0] and end at mat[Rows - 1][Cols - 1].\n    constexpr auto begin() const { return mat.begin(); }\n    constexpr auto   end() const { return mat.end(); }\n\n    // Generic helpers.\n    constexpr size_t    size() const { return mat.size() * mat[0].size(); }\n    constexpr size_t    rows() const { return mat.size(); }\n    constexpr size_t    cols() const { return mat[0].size(); }\n\n    // 1D Matrix helpers.\n    constexpr bool    is_one_d() const { return (Rows == 1) || (Cols == 1); }\n    constexpr bool     one_row() const { return Rows == 1; }\n    constexpr size_t dimension() const { return (one_row() ? cols() : rows()); }\n\n    // -----\n\n    // Output.\n    // Would need modification if better begin() &amp; end() are implemented.\n    friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; str, const Matrix&lt;Rows, Cols&gt;&amp; m) {\n        for (auto&amp; row : m) {\n            for (auto&amp; elem : row) {\n                str &lt;&lt; std::setw(6) &lt;&lt; elem &lt;&lt; ' ';\n            }\n            str &lt;&lt; '\\n';\n        }\n        str &lt;&lt; std::endl;\n        return str;\n    }\n};\n</code></pre>\n\n<p>It can be used as...</p>\n\n<pre><code>// Get rid of any \"Waah, you didn't use that!\" warnings.\n// See https://stackoverflow.com/a/31654792/5386374\n#define UNUSED(x) [&amp;x]{}()\n\n// This should really use if constexpr, but online compilers don't really support it yet.\n// Instead, have an SFINAE dummy.\ntemplate&lt;size_t Rows, size_t Cols&gt;\nvoid fill(Matrix&lt;Rows, Cols&gt;&amp; m, std::enable_if_t&lt;(Rows == 1) || (Cols == 1), int&gt; dummy = 0) {\n    UNUSED(dummy);\n\n    //for (size_t i = 0; i &lt; (m.one_row() ? m.cols() : m.rows()); i++) {\n    for (size_t i = 0; i &lt; m.dimension(); i++) {\n        m[i] = (i ? i : 0.5) * (i ? i : 0.5);\n    }\n}\n\ntemplate&lt;size_t Rows, size_t Cols&gt;\nvoid fill(Matrix&lt;Rows, Cols&gt;&amp; m, std::enable_if_t&lt;!((Rows == 1) || (Cols == 1)), int&gt; dummy = 0) {\n    UNUSED(dummy);\n\n    for (size_t i = 0; i &lt; m.rows(); i++) {\n        for (size_t j = 0; j &lt; m.cols(); j++) {\n            m[i][j] = (i ? i : 0.5) * (j ? j : 0.5) + (i &gt;= j ? 0.1 : -0.2);\n        }\n    }\n}\n</code></pre>\n\n<p>See it in action <a href=\"http://ideone.com/lIoYwr\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<hr>\n\n<p>If you <em>do</em> need to be able to change its dimensions on the fly, this becomes more complex.  The easiest solution would probably be to use polymorphism, and have <code>operator[]</code> return a proxy.</p>\n\n<pre><code>class Matrix {\n  protected:\n    // Out proxy class.\n    // Visible to children, for implementing.\n    struct SubscriptProxy {\n        virtual operator double&amp;() = 0;\n        virtual operator double*() = 0;\n        virtual double&amp; operator=(double) = 0;\n        virtual double&amp; operator[](size_t) = 0;\n        virtual ~SubscriptProxy() = default;\n    };\n\n  public:\n    virtual SubscriptProxy&amp; operator[](size_t i) = 0;\n    virtual ~Matrix() = default;\n\n    virtual void out(std::ostream&amp; str) const = 0;\n    friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; str, const Matrix&amp; m) {\n        m.out(str);\n        return str;\n    }\n};\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; str, const Matrix&amp; m);\n</code></pre>\n\n<p>You can then have each class make the proxy members it needs <code>public</code>, and the ones it doesn't <code>private</code>; the <code>private</code> ones get a non-functional dummy implementation.</p>\n\n<pre><code>// Resizing omitted for brevity.\nclass OneDMatrix : public Matrix {\n    double arr[5];\n\n    // Proxy for single element.\n    class OneDProxy : public SubscriptProxy {\n        double&amp; elem;\n\n        operator double*() override { return &amp;elem; }\n        double&amp; operator[](size_t) override { return elem; }\n      public:\n        OneDProxy(double&amp; e) : elem(e) {}\n\n        operator double&amp;() override { return elem; }\n        double&amp; operator=(double d) override {\n            elem = d;\n            return elem;\n        }\n    };\n\n  public:\n    OneDMatrix() : arr{0} {}\n\n    // operator[] maintains a static pointer, to keep the return value alive and guarantee\n    //  proper cleanup.\n    SubscriptProxy&amp; operator[](size_t i) override {\n        static OneDProxy* ret = nullptr;\n\n        if (ret) { delete ret; }\n        ret = new OneDProxy(arr[i]);\n        return *ret;\n    }\n\n    void out(std::ostream&amp; str) const override {\n        for (size_t i = 0; i &lt; 5; i++) {\n            str &lt;&lt; std::setw(4) &lt;&lt; arr[i] &lt;&lt; ' ';\n        }\n        str &lt;&lt; std::endl;\n    }\n};\n\n// Resizing omitted for brevity.\nclass TwoDMatrix : public Matrix {\n    double arr[3][4];\n\n    // Proxy for array.\n    class TwoDProxy : public SubscriptProxy {\n        double* elem;\n\n        operator double&amp;() override { return elem[0]; }\n        double&amp; operator=(double) override { return elem[0]; }\n      public:\n        TwoDProxy(double* e) : elem(e) {}\n        operator double*() override { return elem; }\n        double&amp; operator[](size_t i) override { return elem[i]; }\n    };\n\n  public:\n    TwoDMatrix() : arr{{0}} {}\n\n    // operator[] maintains a static pointer, to keep the return value alive and guarantee\n    //  proper cleanup.\n    SubscriptProxy&amp; operator[](size_t i) override {\n        static TwoDProxy* ret = nullptr;\n\n        if (ret) { delete ret; }\n        ret = new TwoDProxy(arr[i]);\n        return *ret;\n    }\n\n    void out(std::ostream&amp; str) const override {\n        for (size_t i = 0; i &lt; 3; i++) {\n            for (size_t j = 0; j &lt; 4; j++) {\n                str &lt;&lt; std::setw(4) &lt;&lt; arr[i][j] &lt;&lt; ' ';\n            }\n            str &lt;&lt; '\\n';\n        }\n    }\n};\n</code></pre>\n\n<p>Due to references being usable for polymorphism, <code>Matrix</code> can be used as an interface, allowing anything that doesn't specifically require one of the actual classes to take a <code>Matrix&amp;</code>.</p>\n\n<p>See it in action <a href=\"http://ideone.com/fO0DWB\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>With a setup like this, it becomes easy to dynamically create the right kind of matrix, by providing a helper function.</p>\n\n<pre><code>// Assume OneDMatrix is expanded for dynamic size specification.\n  // It now has constructor OneDMatrix(size_t sz), and owns a dynamic double[sz].\n// Assume TwoDMatrix is expanded for dynamic size specification.\n  // It now has constructor TwoDMatrix(size_t r, size_t c), and owns a dynamic double[r][c].\nMatrix* createMatrix(size_t rows, size_t cols) {\n    if (rows == 1)      { return new OneDMatrix(cols);       }\n    else if (cols == 1) { return new OneDMatrix(rows);       }\n    else                { return new TwoDMatrix(rows, cols); }\n}\n</code></pre>\n\n<hr>\n\n<p>As usual, the template version is more verbose, but safer (due to not having to play around with pointers) and likely more efficient (due to not needing to do as much dynamic allocation &amp; deallocation; I haven't tested this, however).</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6656445"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 1, "accepted_answer_id": 41373010, "answer_count": 5, "score": 2, "last_activity_date": 1483042998, "creation_date": 1482962801, "last_edit_date": 1482963469, "question_id": 41370363, "link": "https://stackoverflow.com/questions/41370363/change-array-dimensions-at-runtime", "title": "Change array dimensions at runtime", "body": "<p>I have this matrix class which has a 2d double array. In the constructor you can specify the width and height. I want to create a 1d array instead of a 2d when the width is 1. Because I overloaded the [] operator and return the pointer. If there is only 1 row/col I don't want to always write  [i][0]. Instead I want to just write  [i]. \nDoes anyone know how to solve this?</p>\n\n<p>Edit:\nTo clarify this I need this class for matrix calculations no just as array.</p>\n"}, {"tags": ["c++", "image", "visual-studio", "console", "display"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 1, "creation_date": 1482962601, "post_id": 41370301, "comment_id": 69942360, "body": "Be more specific. Do you want to use the built in Windows picture viewer? Convert a picture to ascii art? What?"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1482962701, "post_id": 41370301, "comment_id": 69942394, "body": "Do you want to open a window (that is possible from a console application - but it&#39;s tricky) and display the image in that?  Be a lot more specific about what you are trying to achieve."}, {"owner": {"reputation": 21, "user_id": 7179555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/728617151294b4e52a04004729403a04?s=128&d=identicon&r=PG&f=1", "display_name": "Nhorang", "link": "https://stackoverflow.com/users/7179555/nhorang"}, "edited": false, "score": 0, "creation_date": 1482962821, "post_id": 41370301, "comment_id": 69942436, "body": "Thank you guys! Yes I want to open a window and display image in that window."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1482965088, "post_id": 41370301, "comment_id": 69943223, "body": "If you want to open a new window and display a bitmap in it, it&#39;s not too difficult, but perhaps too long for an SO answer . You will need to use the Win32 API - this project of mine <a href=\"https://bitbucket.org/neilb/nclip\" rel=\"nofollow noreferrer\">bitbucket.org/neilb/nclip</a> does  to display any bitmap stored in the clipboard."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 7179555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/728617151294b4e52a04004729403a04?s=128&d=identicon&r=PG&f=1", "display_name": "Nhorang", "link": "https://stackoverflow.com/users/7179555/nhorang"}, "edited": false, "score": 0, "creation_date": 1482963098, "post_id": 41370346, "comment_id": 69942534, "body": "Thank you Michael. I know that I am using C++ standard libraries but what I meant was I don&#39;t want use libraries like openCV and others. And, As Martin asked I want to open a new window and display image in that window."}, {"owner": {"reputation": 3448, "user_id": 5013141, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4cf3ceda840c5913990ed58fa55fa56f?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Fulton", "link": "https://stackoverflow.com/users/5013141/michael-fulton"}, "reply_to_user": {"reputation": 21, "user_id": 7179555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/728617151294b4e52a04004729403a04?s=128&d=identicon&r=PG&f=1", "display_name": "Nhorang", "link": "https://stackoverflow.com/users/7179555/nhorang"}, "edited": false, "score": 0, "creation_date": 1482968087, "post_id": 41370346, "comment_id": 69944123, "body": "Updated my answer. You can use the paint.exe application to display your image or create your own image viewer."}], "tags": [], "owner": {"reputation": 3448, "user_id": 5013141, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4cf3ceda840c5913990ed58fa55fa56f?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Fulton", "link": "https://stackoverflow.com/users/5013141/michael-fulton"}, "is_accepted": false, "score": 0, "last_activity_date": 1482968010, "last_edit_date": 1495542865, "creation_date": 1482962715, "answer_id": 41370346, "question_id": 41370301, "link": "https://stackoverflow.com/questions/41370301/display-image-in-visual-c-console-application/41370346#41370346", "title": "Display image in Visual C++ console application?", "body": "<p>The console is a text-based environment and it won't be possible to display jpgs/bmp. You need to use a GUI library that creates windows (like WPF if you're using Windows) to display images.</p>\n\n<p>You're already using others' libraries by using C++ and the console. Using libraries is what programming is all about.</p>\n\n<p>You can actually open a WPF window from console application using this: <a href=\"https://stackoverflow.com/questions/4509714/how-to-start-the-wpf-window-from-console-programmatically\">How to start the WPF window from console programmatically?</a> </p>\n"}, {"comments": [{"owner": {"reputation": 28373, "user_id": 4926357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f559694d3ca65b39220166b865276d?s=128&d=identicon&r=PG&f=1", "display_name": "A.S.H", "link": "https://stackoverflow.com/users/4926357/a-s-h"}, "edited": false, "score": 0, "creation_date": 1482963139, "post_id": 41370384, "comment_id": 69942552, "body": "beat me to it! <code>system(&quot;mspaint.exe myimage.bmp&quot;) </code>"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1482963260, "post_id": 41370384, "comment_id": 69942583, "body": "For Windows, <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb762153(v=vs.85).aspx\" rel=\"nofollow noreferrer\">ShellExecute</a> might be a better option."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1482963346, "post_id": 41370384, "comment_id": 69942610, "body": "@JohnnyMopp: Yep. Adding that to the answer. Thanks. :)"}, {"owner": {"reputation": 21, "user_id": 7179555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/728617151294b4e52a04004729403a04?s=128&d=identicon&r=PG&f=1", "display_name": "Nhorang", "link": "https://stackoverflow.com/users/7179555/nhorang"}, "edited": false, "score": 0, "creation_date": 1482963624, "post_id": 41370384, "comment_id": 69942705, "body": "Thank you guys. But, what I have is not actual image but just a pixel data from my program and want to plot those values as image in new window not in actual console."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 21, "user_id": 7179555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/728617151294b4e52a04004729403a04?s=128&d=identicon&r=PG&f=1", "display_name": "Nhorang", "link": "https://stackoverflow.com/users/7179555/nhorang"}, "edited": false, "score": 0, "creation_date": 1482963944, "post_id": 41370384, "comment_id": 69942814, "body": "@NorxangLama: Over in *nix-land you could generate a text file representation of the pixel data, in the form of a C array constant. That format is or was used for icons. But Windows doesn&#39;t support that format. Using Direct2D is a PITA, and the old API had only three ways to store an image file: do-it-yourself, with e.g. code for BMP available for copying from the Windows docs; or store as WMF via API function for that, with some crucial parts undocumented; or use the COM-based OLE Image functionality. I recommend you use a 3rd party library such as PNG-writer."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1482964229, "post_id": 41370384, "comment_id": 69942911, "body": "<b>OR</b>, just implement your own window. You can do things efficiently by referencing your data from a <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd162974(v=vs.85).aspx\" rel=\"nofollow noreferrer\">device indendent bitmap structure</a>."}], "tags": [], "owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": false, "score": 2, "last_activity_date": 1482963389, "last_edit_date": 1482963389, "creation_date": 1482962926, "answer_id": 41370384, "question_id": 41370301, "link": "https://stackoverflow.com/questions/41370301/display-image-in-visual-c-console-application/41370384#41370384", "title": "Display image in Visual C++ console application?", "body": "<p>You can very easily, trivially, display an image from any Windows application.</p>\n\n<p>For example, you can use the C++ library's <code>system</code> function to launch <code>mspaint.exe</code> with the image you want. Or you can use an API function such as <code>ShellExecute</code> to launch an image file in the viewer that's associated with the filename extension.</p>\n\n<p>In a console application <code>system</code> is particularly nice since you avoid an extra console window popping up.</p>\n\n<p>Displaying an image <em>directly in a console window</em> is a different kettle of fish, so technically challenging that one may as well say it's practically impossible.</p>\n\n<p>That has nothing to do with the application having console or GUI subsystem, but with the fact that a console window is managed for you, as I recall by a different dedicated process.</p>\n\n<p>What you can do if you want that effect (which was strongly indicated by <em>the original question</em>), is to put a borderless window on top of the console window. Maybe, if that works, make the console window owner. But you want to move that on-top window along with the console window, which I would guess involves some complexity.</p>\n"}], "owner": {"reputation": 21, "user_id": 7179555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/728617151294b4e52a04004729403a04?s=128&d=identicon&r=PG&f=1", "display_name": "Nhorang", "link": "https://stackoverflow.com/users/7179555/nhorang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4259, "favorite_count": 0, "closed_date": 1483002100, "answer_count": 2, "score": 0, "last_activity_date": 1482968010, "creation_date": 1482962386, "last_edit_date": 1482963376, "question_id": 41370301, "link": "https://stackoverflow.com/questions/41370301/display-image-in-visual-c-console-application", "closed_reason": "Needs more focus", "title": "Display image in Visual C++ console application?", "body": "<p>How can we display image in visual C++ console application? The image format can be of any types like bmp, jpeg, tiff, and so on. I want to open a new window and display the image in that window. I don't want to use others' libraries like openCV and so on. Thanks!</p>\n"}, {"tags": ["c++", "winapi", "windows-runtime", "wrl"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1483018190, "post_id": 41370272, "comment_id": 69963225, "body": "You could construct a <a href=\"https://code.msdn.microsoft.com/windowsapps/Windows-Runtime-Component-9b6c6989/sourcecode?fileId=113783&amp;pathId=1623023906\" rel=\"nofollow noreferrer\">VectorView</a> over a <code>std::vector</code>, or any other appropriate container wrapper that matches your Standard C++ collection type."}, {"owner": {"reputation": 174, "user_id": 3991361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/117c04ce5e8216b90c553a0c7ffc8ac0?s=128&d=identicon&r=PG&f=1", "display_name": "Larry B", "link": "https://stackoverflow.com/users/3991361/larry-b"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1483116934, "post_id": 41370272, "comment_id": 70001432, "body": "I need to create a runtime component that implements IVectorView. I should then try to use that custom component to get the IIterable to pass to the API?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1483118383, "post_id": 41370272, "comment_id": 70002118, "body": "There is no <code>IVectorView</code> interface. <code>VectorView</code> is a class template, that implements the <code>IIterable</code> interface. You can immediately pass a pointer to a <code>VectorView</code> to a function expecting an <code>IIterable</code> interface. This really sounds like you are completely lost here, probably because you don&#39;t understand COM, C++, or how C++ is used to implement COM. And then WRL adds yet another abstraction that you need to master first. This is unlikely to end well. You&#39;ll have to start over and get familiar with the basics."}, {"owner": {"reputation": 174, "user_id": 3991361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/117c04ce5e8216b90c553a0c7ffc8ac0?s=128&d=identicon&r=PG&f=1", "display_name": "Larry B", "link": "https://stackoverflow.com/users/3991361/larry-b"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1483118645, "post_id": 41370272, "comment_id": 70002218, "body": "You&#39;re right I am new."}], "answers": [{"tags": [], "owner": {"reputation": 174, "user_id": 3991361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/117c04ce5e8216b90c553a0c7ffc8ac0?s=128&d=identicon&r=PG&f=1", "display_name": "Larry B", "link": "https://stackoverflow.com/users/3991361/larry-b"}, "is_accepted": true, "score": 1, "last_activity_date": 1483642705, "creation_date": 1483642705, "answer_id": 41492624, "question_id": 41370272, "link": "https://stackoverflow.com/questions/41370272/native-c-passing-iiterable-to-winrt/41492624#41492624", "title": "Native C++ passing IIterable to WinRT", "body": "<p>I ended up using <a href=\"https://github.com/Microsoft/cppwinrt\" rel=\"nofollow noreferrer\">cppwinrt</a> to do what I wanted. With this, I was able to pass vanilla std containers, etc. to WinRT.</p>\n"}], "owner": {"reputation": 174, "user_id": 3991361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/117c04ce5e8216b90c553a0c7ffc8ac0?s=128&d=identicon&r=PG&f=1", "display_name": "Larry B", "link": "https://stackoverflow.com/users/3991361/larry-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 435, "favorite_count": 0, "accepted_answer_id": 41492624, "answer_count": 1, "score": 0, "last_activity_date": 1483642705, "creation_date": 1482962206, "question_id": 41370272, "link": "https://stackoverflow.com/questions/41370272/native-c-passing-iiterable-to-winrt", "title": "Native C++ passing IIterable to WinRT", "body": "<p>I have a Win32 app that is using WRL (Windows Runtime Template Library) to access the WinRT API.</p>\n\n<p>How do I go about calling a function that takes an <code>IIterable</code> from native C++? My issue is obtaining something that implements <code>IIterable</code> or <code>IVector</code>.</p>\n\n<p>As a concrete example, suppose I wanted to call <code>SetDefaultMenuItems</code> in Include\\10.0.14393.0\\winrt\\windows.ui.input.h:</p>\n\n<pre><code>namespace ABI {\nnamespace Windows {\nnamespace UI {\nnamespace Input {\n\n    MIDL_INTERFACE(\"A6B79ECB-6A52-4430-910C-56370A9D6B42\")\n    IRadialControllerConfiguration : public IInspectable\n    {\n        public:\n            virtual HRESULT STDMETHODCALLTYPE SetDefaultMenuItems( \n            /* [in] */ __RPC__in_opt __FIIterable_1_Windows__CUI__CInput__CRadialControllerSystemMenuItemKind *buttons) = 0;\n        // ...\n    };\n}\n}\n}\n}\n</code></pre>\n\n<p>There doesn't seem to be a stock implementation of <code>IIterable</code> or <code>IVector</code> for native C++.</p>\n"}, {"tags": ["c++", "c", "directx", "directx-11", "lnk2019"], "comments": [{"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1482962555, "post_id": 41370076, "comment_id": 69942350, "body": "You&#39;re missing the library that contains the <code>vsnprintf</code> function - I can&#39;t tell you which one it is, but that&#39;s the problem."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1482964600, "post_id": 41370076, "comment_id": 69943042, "body": "So many similar:  <a href=\"http://stackoverflow.com/questions/15819095/unresolved-external-symbol-how-to-fix\">Unresolved Error How to fix</a>, <a href=\"http://stackoverflow.com/questions/19886397/how-to-solve-the-error-lnk2019-unresolved-external-symbol-function\">How to Solve the error LNK2019</a>, and <a href=\"http://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix\">What is an unresolved symbol and how to fix it</a>"}], "owner": {"reputation": 9, "user_id": 3557195, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001601385757/picture?type=large", "display_name": "Dog-Face", "link": "https://stackoverflow.com/users/3557195/dog-face"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "closed_date": 1482967869, "answer_count": 0, "score": 0, "last_activity_date": 1482961056, "creation_date": 1482961056, "question_id": 41370076, "link": "https://stackoverflow.com/questions/41370076/error-lnk2019-with-creating-directx11", "closed_reason": "Duplicate", "title": "Error LNK2019 with creating DirectX11", "body": "<p>Hi I'm currently trying to set up Direct X project in visual studio 2015.</p>\n\n<p>i have downloaded the correct SDK and linked the project to the correct directories, from what i have been taught at uni. (this entire project was just meant to be a simple copy the code across from a word document provided)</p>\n\n<p>I found that this is the only line of code that results in error.</p>\n\n<pre><code>if (FAILED(InitialiseWindow(hInstance, nCmdShow)))\n{\n    DXTRACE_MSG(\"Failed to create Window\");\n    return 0;\n}\n</code></pre>\n\n<p>if i comment out the DXTRACE_MSG then the program complies correctly.</p>\n\n<p>The exact error is LNK2019  unresolved external symbol __vsnprintf referenced in function \"long __stdcall StringVPrintfWorkerA(char *,unsigned int,unsigned int *,char const *,char *)\" (?StringVPrintfWorkerA@@YGJPADIPAIPBD0@Z)   Tutorial 01 Exercise 01 C:\\Users\\Tony\\Desktop\\AGP\\Tutorial 1 Exercise 01\\dxerr.lib(dxerra.obj).</p>\n\n<p>So overall i just need help in understanding the error, why it occurs and what i can do to rectify it so i can continue moving along with what i need for my assignment.</p>\n\n<p>any help is greatly appreciated.</p>\n\n<pre><code>#include &lt;windows.h&gt;\n#include &lt;D3D11.h&gt;\n#include &lt;d3d11.h&gt;\n#include &lt;D3DX11.h&gt;\n#include &lt;d3dx11.h&gt;\n#include &lt;DxErr.h&gt;\n\n//int (WINAPIV * __vsprintf)(char*, size_t, const char*, va_list) = __vsprintf;\n\n\n// Global Variables\n\nHINSTANCE g_hInst = NULL;\nHWND g_hWnd = NULL;\n\n// Rename for each tutorial\nchar g_TutorialName[100] = \"Tutorial 01 Exercise 01\\0\";\n\n\n// Forward declarations\n\n\nHRESULT InitialiseWindow(HINSTANCE hInstance, int nCmdShow);\nLRESULT CALLBACK WndProc(HWND, UINT, WPARAM, LPARAM);\n\n\n// Entry point to the program. Initializes everything and goes into a message processing\n// loop. Idle time is used to render the scene.\n\nint WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR     lpCmdLine, int nCmdShow)\n{\n\n\n    UNREFERENCED_PARAMETER(hPrevInstance);\n    UNREFERENCED_PARAMETER(lpCmdLine);\n\n    if (FAILED(InitialiseWindow(hInstance, nCmdShow)))\n    {\n        DXTRACE_MSG(\"Failed to create Window\");\n        return 0;\n    }\n    // Main message loop\n    MSG msg = { 0 };\n    while (msg.message != WM_QUIT)\n    {\n        if (PeekMessage(&amp;msg, NULL, 0, 0, PM_REMOVE))\n        {\n            TranslateMessage(&amp;msg);\n            DispatchMessage(&amp;msg);\n        }\n        else\n        {\n            //do somthing\n        }\n    }\n\n     return (int)msg.wParam;\n\n}\n\n// Register class and create window\n\nHRESULT InitialiseWindow(HINSTANCE hInstance, int nCmdShow)\n{\n     // Give your app window your own name\n     char Name[100] = \"Hello World\\0\";\n\n     // Register class\n      WNDCLASSEX wcex = { 0 };\n     wcex.cbSize = sizeof(WNDCLASSEX);\n    wcex.style = CS_HREDRAW | CS_VREDRAW;\n    wcex.lpfnWndProc = WndProc;\n    wcex.hInstance = hInstance;\n    wcex.hCursor = LoadCursor(NULL, IDC_ARROW);\n    // wcex.hbrBackground = (HBRUSH )( COLOR_WINDOW + 1); // Needed for non-D3D apps\n\n    wcex.lpszClassName = Name;\n\n\n    if (!RegisterClassEx(&amp;wcex)) return E_FAIL;\n\n    // Create window\n    g_hInst = hInstance;\n    RECT rc = { 0, 0, 640, 480 };\n    AdjustWindowRect(&amp;rc, WS_OVERLAPPEDWINDOW, FALSE);\n\n    g_hWnd = CreateWindow(Name, g_TutorialName, WS_OVERLAPPEDWINDOW,\n        CW_USEDEFAULT, CW_USEDEFAULT, rc.right - rc.left,\n        rc.bottom - rc.top, NULL, NULL, hInstance, NULL);\n    if (!g_hWnd)\n        return E_FAIL;\n\n    ShowWindow(g_hWnd, nCmdShow);\n    return S_OK;\n}\n\n\n// Called every time the application receives a message\n\nLRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)\n{\n     PAINTSTRUCT ps;\n     HDC hdc;\n    switch (message)\n        {\n    case WM_PAINT:\n        hdc = BeginPaint(hWnd, &amp;ps);\n        EndPaint(hWnd, &amp;ps);\n        break;\n\n    case WM_DESTROY:\n        PostQuitMessage(0);\n        break;\n\n    case WM_KEYDOWN:\n         if (wParam == VK_ESCAPE)\n             DestroyWindow(g_hWnd);\n        return 0;\n\n    default:\n    return DefWindowProc(hWnd, message, wParam, lParam);\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "constructor", "type-inference"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 2, "creation_date": 1482961416, "post_id": 41370063, "comment_id": 69941903, "body": "Rather than optimizing your code for the tools, you could try to use tools that work with your code, such as clang-query."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1482961654, "post_id": 41370063, "comment_id": 69942005, "body": "Note that you can use uniform initialization since C++11 to avoid most vexing parse problem."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1482961666, "post_id": 41370063, "comment_id": 69942014, "body": "You could search for <code>Object</code> and <code>(</code> with a single token in between"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1482963778, "post_id": 41370063, "comment_id": 69942762, "body": "While there will be no performance impact in any compilers I know, the technique itself is contradictory to me. Without knowing the code, someone will be left to guess what the <code>Object</code> is - is it a free-standing function or a constructor? Granted, in IDE&#39;s it&#39;s a matter of a single jump, but it&#39;s still a jump and you loose context. I prefer classic syntax here."}, {"owner": {"reputation": 747, "user_id": 3123061, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b61cfcc66dbff10849ccc65d94adfb7f?s=128&d=identicon&r=PG&f=1", "display_name": "user3123061", "link": "https://stackoverflow.com/users/3123061/user3123061"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1482964739, "post_id": 41370063, "comment_id": 69943096, "body": "@SergeyA: interesting viewpoint. Are there any semantic difference which make ability to distinguish object constructor call and function returning object important for reasoning about code? At first sight it seems to me that constructor of object behaves like function returning that object and therefore for observer at callside constructor of object and function returning object are interchangable without affecting understanding of code."}, {"owner": {"reputation": 747, "user_id": 3123061, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b61cfcc66dbff10849ccc65d94adfb7f?s=128&d=identicon&r=PG&f=1", "display_name": "user3123061", "link": "https://stackoverflow.com/users/3123061/user3123061"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1482966851, "post_id": 41370063, "comment_id": 69943733, "body": "@SergeyA: I mean, its a matter of choosing words more than there is any difference between function and constructor call. That thing which is named &quot;constructor of Object&quot; can be named also &quot;function with name Object returning type Object&quot;. Someone may argue that C++ does not allow to have same function and type name. Yes. But there is workaround to do that. C++ have special syntactic sugar (constructor) with which you can effectively make &quot;function with name Object returning type Object&quot;. So, constructor CAN be seen as free standing function. :-)"}], "answers": [{"comments": [{"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 0, "creation_date": 1482961439, "post_id": 41370094, "comment_id": 69941911, "body": "The assignment operator is not required though."}, {"owner": {"reputation": 59687, "user_id": 951890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01c3ef0adae5153378a3f602ca068a03?s=128&d=identicon&r=PG", "display_name": "Vaughn Cato", "link": "https://stackoverflow.com/users/951890/vaughn-cato"}, "reply_to_user": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 0, "creation_date": 1482961628, "post_id": 41370094, "comment_id": 69941994, "body": "@CaptainGiraffe: Agreed.  The question involves an initialization and not an assignment."}, {"owner": {"reputation": 28373, "user_id": 4926357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f559694d3ca65b39220166b865276d?s=128&d=identicon&r=PG&f=1", "display_name": "A.S.H", "link": "https://stackoverflow.com/users/4926357/a-s-h"}, "edited": false, "score": 0, "creation_date": 1482962366, "post_id": 41370094, "comment_id": 69942288, "body": "<i>&quot;to remove such copies even if they would produce side-effects&quot;</i>, doesn&#39;t that break the semantics, in the case of side-effects?"}, {"owner": {"reputation": 59687, "user_id": 951890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01c3ef0adae5153378a3f602ca068a03?s=128&d=identicon&r=PG", "display_name": "Vaughn Cato", "link": "https://stackoverflow.com/users/951890/vaughn-cato"}, "reply_to_user": {"reputation": 28373, "user_id": 4926357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f559694d3ca65b39220166b865276d?s=128&d=identicon&r=PG&f=1", "display_name": "A.S.H", "link": "https://stackoverflow.com/users/4926357/a-s-h"}, "edited": false, "score": 1, "creation_date": 1482962429, "post_id": 41370094, "comment_id": 69942303, "body": "@A.S.H: Absolutely, but the C++ committee decided that this optimization was important enough to allow it even if it breaks the semantics."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 28373, "user_id": 4926357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f559694d3ca65b39220166b865276d?s=128&d=identicon&r=PG&f=1", "display_name": "A.S.H", "link": "https://stackoverflow.com/users/4926357/a-s-h"}, "edited": false, "score": 1, "creation_date": 1482962934, "post_id": 41370094, "comment_id": 69942471, "body": "@A.S.H : In practise, the side effect of a copy-constructor/destructor pair is usually a no-op, or output to a logfile, both of which are safe to optimize.  But yes, if your program depends on copy-constructor/destructor pairs <i>not</i> being eliminated, it is broken."}, {"owner": {"reputation": 28373, "user_id": 4926357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f559694d3ca65b39220166b865276d?s=128&d=identicon&r=PG&f=1", "display_name": "A.S.H", "link": "https://stackoverflow.com/users/4926357/a-s-h"}, "edited": false, "score": 0, "creation_date": 1482963341, "post_id": 41370094, "comment_id": 69942607, "body": "I see the point. But I am surprised. I thought that syntax and semantics are usually the top-level untouchables, before anyone thinking of optimization. This is puzzling me. I would understand if we say that the compiler checks for side effects before optimizing away, but saying it can do that without any such rule, is changing the semantics of the language."}, {"owner": {"reputation": 59687, "user_id": 951890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01c3ef0adae5153378a3f602ca068a03?s=128&d=identicon&r=PG", "display_name": "Vaughn Cato", "link": "https://stackoverflow.com/users/951890/vaughn-cato"}, "reply_to_user": {"reputation": 28373, "user_id": 4926357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f559694d3ca65b39220166b865276d?s=128&d=identicon&r=PG&f=1", "display_name": "A.S.H", "link": "https://stackoverflow.com/users/4926357/a-s-h"}, "edited": false, "score": 0, "creation_date": 1482963527, "post_id": 41370094, "comment_id": 69942667, "body": "@A.S.H: Maybe my use of the word &quot;optimization&quot; is confusing.  This is more like implementation-specific behavior.  Pre C++17, an implementation was allowed to choose whether or not to actually do the copy or move, but the copy/move constructor was still required to be accessible."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1482963629, "post_id": 41370094, "comment_id": 69942706, "body": "C++ allowed copy ellision in this case. C++17 mandates it. This is an example of very rare optimization which happens on the frontend and changes program semantic."}, {"owner": {"reputation": 28373, "user_id": 4926357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f559694d3ca65b39220166b865276d?s=128&d=identicon&r=PG&f=1", "display_name": "A.S.H", "link": "https://stackoverflow.com/users/4926357/a-s-h"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1482963843, "post_id": 41370094, "comment_id": 69942787, "body": "@SergeyA So if I understand, this feature mandated in C++17 states explicitly this change of semantic, in which case everything is in order."}], "tags": [], "owner": {"reputation": 59687, "user_id": 951890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01c3ef0adae5153378a3f602ca068a03?s=128&d=identicon&r=PG", "display_name": "Vaughn Cato", "link": "https://stackoverflow.com/users/951890/vaughn-cato"}, "is_accepted": true, "score": 5, "last_activity_date": 1482962108, "last_edit_date": 1482962108, "creation_date": 1482961184, "answer_id": 41370094, "question_id": 41370063, "link": "https://stackoverflow.com/questions/41370063/is-declaring-variable-with-type-inference-as-effective-as-classical-way-of-ini/41370094#41370094", "title": "Is declaring variable with type inference as effective as &quot;classical way&quot; of initializing variable with parenthesis after variable name?", "body": "<p>Pre C++17, it is possible, although unlikely, that you would get a performance penalty due to an extra copy or move.  Even C++98 allowed implementations to remove such copies even if they would produce side-effects, and almost all compilers have implemented this optimization for a long time -- especially in optimized builds.</p>\n\n<p>Post C++-17, copy elision is guaranteed.  You aren't even required to have a copy or move constructor for this to work, so you shouldn't see any difference.</p>\n"}], "owner": {"reputation": 747, "user_id": 3123061, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b61cfcc66dbff10849ccc65d94adfb7f?s=128&d=identicon&r=PG&f=1", "display_name": "user3123061", "link": "https://stackoverflow.com/users/3123061/user3123061"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 41370094, "answer_count": 1, "score": 3, "last_activity_date": 1482962108, "creation_date": 1482961004, "last_edit_date": 1482961366, "question_id": 41370063, "link": "https://stackoverflow.com/questions/41370063/is-declaring-variable-with-type-inference-as-effective-as-classical-way-of-ini", "title": "Is declaring variable with type inference as effective as &quot;classical way&quot; of initializing variable with parenthesis after variable name?", "body": "<p>It would be nice to be able to easily text search in my codebase for places where is constructor of some object called. Here comes pattern bellow. Instead of classical:</p>\n\n<ol>\n<li><code>Object val( a, b );</code></li>\n</ol>\n\n<p>It would be nice to use everywhere:</p>\n\n<ol start=\"2\">\n<li><code>auto val = Object( a, b );</code></li>\n</ol>\n\n<p>That way I can use simple text search for <code>\"Object(\"</code> and get list of places where I am calling constructor of <code>Object</code>. It's also less syntacticaly ambiguous and therefore easier to make simple tools to automate some code transformations. It elegantly avoids \"most vexing parse\" issues too.</p>\n\n<p>My only concern is about possible impact on performance. Is case 2) as fast a as case 1)? (If we can assume that <code>Object</code> has properly defined move constructor and move assignment operator and basic compiler optimizations are enabled.) </p>\n"}, {"tags": ["c++", "recursion", "trie"], "comments": [{"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 2, "creation_date": 1482960576, "post_id": 41369937, "comment_id": 69941551, "body": "&quot;can&#39;t exit out&quot; sounds a lot like &quot;it hangs&quot;. The code looks technically correct (for the purpose of building a list of all prefixes) but inefficient (namely quadratic time in the depth of the structure). Presumably the data in the data structure is ungood, like an indeterminate <code>nodeChar</code> value instead of nullpointer."}, {"owner": {"reputation": 59687, "user_id": 951890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01c3ef0adae5153378a3f602ca068a03?s=128&d=identicon&r=PG", "display_name": "Vaughn Cato", "link": "https://stackoverflow.com/users/951890/vaughn-cato"}, "edited": false, "score": 2, "creation_date": 1482960585, "post_id": 41369937, "comment_id": 69941558, "body": "Are you saying that you have an infinite recursion in certain situations?"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1482960791, "post_id": 41369937, "comment_id": 69941635, "body": "Please post a <b>minimal but complete example</b> that readers can try by copying and pasting the code."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482960855, "post_id": 41369937, "comment_id": 69941654, "body": "Provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that reproduces the claimed behavior please!"}], "answers": [{"tags": [], "owner": {"reputation": 1491, "user_id": 6480793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fe10b5df5ec1164b5bade347d8599f8?s=128&d=identicon&r=PG&f=1", "display_name": "Delioth", "link": "https://stackoverflow.com/users/6480793/delioth"}, "is_accepted": true, "score": 2, "last_activity_date": 1482960996, "creation_date": 1482960996, "answer_id": 41370060, "question_id": 41369937, "link": "https://stackoverflow.com/questions/41369937/properly-exiting-out-of-recursions/41370060#41370060", "title": "Properly exiting out of recursions?", "body": "<p>The typical end to a recursion is just as you said- <code>return</code> all words. A standard recursion looks something like this:</p>\n\n<pre><code>returnType function(params...){\n    //Do stuff\n    if(need to recurse){\n        return function(next params...);\n    }else{ //This should be your defined base-case\n        return base-case;\n}\n</code></pre>\n\n<p>The issue arises in that your recursive function can never return- it can either execute the <code>push_back</code>, or it can call itself again. Neither of these seems to properly exit, so it'll either end quietly (with an inferred return of nothing), or it'll keep recursing. </p>\n\n<p>In your situation, you likely need to store the results from recursion in an intermediate structure like a list or such, and then return that list after iteration (since it's a tree search and ought to check all the children, not return the first one only)</p>\n\n<hr>\n\n<p>On that note, you seem to be missing part of the point of recursions- they exist to fill a purpose: break down a problem into pieces until those pieces are trivial to solve. Then return that case and build back to a full solution. Any tree-searching must come from this base structure, or you may miss something- like forgetting to <code>return</code> your results.</p>\n"}, {"tags": [], "owner": {"reputation": 130, "user_id": 4979706, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DsAYM.png?s=128&g=1", "display_name": "Jadh4v", "link": "https://stackoverflow.com/users/4979706/jadh4v"}, "is_accepted": false, "score": 1, "last_activity_date": 1482965520, "last_edit_date": 1482965520, "creation_date": 1482961237, "answer_id": 41370104, "question_id": 41369937, "link": "https://stackoverflow.com/questions/41369937/properly-exiting-out-of-recursions/41370104#41370104", "title": "Properly exiting out of recursions?", "body": "<p>Check the integrity of your Trie structure. The function appears to be correct. The reason why it wouldn't terminate is if one or more of your leaf nodes doesn't have curr->nodeChar == NULL. </p>\n\n<p>Another case is that any node (leaf or non-leaf) has a garbage child node. This will cause the recursion to break into reading garbage values and no reason to stop. Running in debug mode should break the execution with segmentation fault.</p>\n\n<p>Write another function to test if all leaf-nodes have NULL termination.</p>\n\n<hr>\n\n<p>EDIT:</p>\n\n<p>After posting the code, the original poster has already pointed out that the problem was that he/she was not returning the list of strings.</p>\n\n<p>Apart from that, there are a few more suggestions I would like to provide based on the code:</p>\n\n<p>How does this while loop terminate if <code>toInsert</code> string is already in the Trie.\nYou will overrun the <code>toInsert</code> string and read a garbage character.\nIt will exit after that, but reading beyond your string is a bad way to program.</p>\n\n<pre><code>// while letters still exist within the trie traverse through the trie\nwhile (curr-&gt;children.find(toInsert[increment]) != curr-&gt;children.end()) \n{ //letter found\n    curr = &amp;(curr-&gt;children.find(toInsert[increment])-&gt;second);\n    increment++;\n}\n</code></pre>\n\n<p>This can be written as follows:</p>\n\n<pre><code>while (increment &lt; toInsert.length() &amp;&amp; \ncurr-&gt;children.find(toInsert[increment]) != curr-&gt;children.end())\n</code></pre>\n\n<p>Also,</p>\n\n<pre><code>Trie( vector&lt;string&gt; dictionary)\n</code></pre>\n\n<p>should be </p>\n\n<pre><code>Trie( const vector&lt;string&gt;&amp; dictionary )\n</code></pre>\n\n<p>because dictionary can be a large object. If you don't pass by reference, it will create a second copy. This is not efficient.</p>\n"}, {"tags": [], "owner": {"reputation": 17, "user_id": 6245647, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0678297105148c727493aeab793931e1?s=128&d=identicon&r=PG&f=1", "display_name": "lyph", "link": "https://stackoverflow.com/users/6245647/lyph"}, "is_accepted": false, "score": 0, "last_activity_date": 1482961911, "creation_date": 1482961911, "answer_id": 41370219, "question_id": 41369937, "link": "https://stackoverflow.com/questions/41369937/properly-exiting-out-of-recursions/41370219#41370219", "title": "Properly exiting out of recursions?", "body": "<p>I am a idiot. I forgot to return list on the first findPre() function.</p>\n\n<pre><code>    vector&lt;string&gt; findPre(string pre) {\n    vector&lt;string&gt; list;\n    TrieNode * curr = root;\n    /*First find if the pre actually exist*/\n    for (int i = 0; i &lt; pre.length(); i++) {\n        if (curr-&gt;children.find(pre[i]) == curr-&gt;children.end()) { //DNE\n            return list;\n        }\n        else {\n            curr = &amp;(curr-&gt;children.find(pre[i])-&gt;second);\n        }\n    }\n    /*Now curr is at the end of the prefix, now we will perform a DFS*/\n\n    pre = pre.substr(0, pre.length() - 1);\n    findPre(list, curr, pre);\n    return list; //&lt;----- this thing\n\n}\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 6245647, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0678297105148c727493aeab793931e1?s=128&d=identicon&r=PG&f=1", "display_name": "lyph", "link": "https://stackoverflow.com/users/6245647/lyph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 41370060, "answer_count": 3, "score": 0, "last_activity_date": 1482965520, "creation_date": 1482960357, "last_edit_date": 1482961351, "question_id": 41369937, "link": "https://stackoverflow.com/questions/41369937/properly-exiting-out-of-recursions", "title": "Properly exiting out of recursions?", "body": "<p>TrieNode and Trie Object:</p>\n\n<pre><code>struct TrieNode {\n\n    char nodeChar = NULL;\n    map&lt;char, TrieNode&gt; children;\n\n    TrieNode() {}\n    TrieNode(char c) { nodeChar = c; }\n};\n\n\nstruct Trie {\n    TrieNode *root = new TrieNode();\n    typedef pair&lt;char, TrieNode&gt; letter;\n    typedef map&lt;char, TrieNode&gt;::iterator it;\n\n    Trie(vector&lt;string&gt; dictionary) {\n        for (int i = 0; i &lt; dictionary.size(); i++) {\n            insert(dictionary[i]);\n        }\n    }\n\n    void insert(string toInsert) {\n        TrieNode * curr = root;\n        int increment = 0;\n        // while letters still exist within the trie traverse through the trie\n        while (curr-&gt;children.find(toInsert[increment]) != curr-&gt;children.end()) { //letter found\n            curr = &amp;(curr-&gt;children.find(toInsert[increment])-&gt;second);\n            increment++;\n        }\n        //when it doesn't exist we know that this will be a new branch \n        for (int i = increment; i &lt; toInsert.length(); i++) {\n            TrieNode temp(toInsert[i]);\n            curr-&gt;children.insert(letter(toInsert[i], temp));\n            curr = &amp;(curr-&gt;children.find(toInsert[i])-&gt;second);\n            if (i == toInsert.length() - 1) {\n                temp.nodeChar = NULL;\n                curr-&gt;children.insert(letter(NULL, temp));\n            }\n\n        }\n    }\n\n\n    vector&lt;string&gt; findPre(string pre) {\n        vector&lt;string&gt; list;\n        TrieNode * curr = root;\n        /*First find if the pre actually exist*/\n        for (int i = 0; i &lt; pre.length(); i++) {\n            if (curr-&gt;children.find(pre[i]) == curr-&gt;children.end()) { //DNE\n                return list;\n            }\n            else {\n                curr = &amp;(curr-&gt;children.find(pre[i])-&gt;second);\n            }\n        }\n        /*Now curr is at the end of the prefix, now we will perform a DFS*/\n\n        pre = pre.substr(0, pre.length() - 1);\n        findPre(list, curr, pre);\n\n    }\n\n    void findPre(vector&lt;string&gt; &amp;list, TrieNode *curr, string prefix) {\n        if (curr-&gt;nodeChar == NULL) {\n            list.push_back(prefix);\n            return;\n        }\n        else {\n            prefix += curr-&gt;nodeChar;\n            for (it i = curr-&gt;children.begin(); i != curr-&gt;children.end(); i++) {\n                findPre(list, &amp;i-&gt;second, prefix);\n            }\n\n        }\n    }\n\n\n\n};\n</code></pre>\n\n<p>The problem is this function:</p>\n\n<pre><code>void findPre(vector&lt;string&gt; &amp;list, TrieNode *curr, string prefix) {\n\n/*if children of TrieNode contains NULL char, it means this branch up to this point is a complete word*/\n    if (curr-&gt;nodeChar == NULL) { \n        list.push_back(prefix);\n    }\n    else {\n        prefix += curr-&gt;nodeChar;\n        for (it i = curr-&gt;children.begin(); i != curr-&gt;children.end(); i++) {\n            findPre(list, &amp;i-&gt;second, prefix);\n        }\n\n    }\n}\n</code></pre>\n\n<p>The purpose is to return all words with the same prefix from a trie using DFS. I manage to retrieve all the necessary strings but I can't exit out of the recursion. </p>\n\n<p>The code completes the last iteration of the if statement and breaks. Visual Studio doesn't return any error code.</p>\n"}, {"tags": ["c++", "g++", "codeblocks", "mingw32"], "comments": [{"owner": {"reputation": 893, "user_id": 4884487, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/5K2bp.jpg?s=128&g=1", "display_name": "SebNag", "link": "https://stackoverflow.com/users/4884487/sebnag"}, "edited": false, "score": 0, "creation_date": 1482960346, "post_id": 41369848, "comment_id": 69941444, "body": "did you try to use <code>std::time_t</code>instead of <code>::time_t</code> ?"}, {"owner": {"reputation": 3646, "user_id": 1083855, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/93fa537cb535181c440f752815a244d8?s=128&d=identicon&r=PG", "display_name": "tigrou", "link": "https://stackoverflow.com/users/1083855/tigrou"}, "reply_to_user": {"reputation": 893, "user_id": 4884487, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/5K2bp.jpg?s=128&g=1", "display_name": "SebNag", "link": "https://stackoverflow.com/users/4884487/sebnag"}, "edited": false, "score": 0, "creation_date": 1482960513, "post_id": 41369848, "comment_id": 69941521, "body": "You mean to modify ctime header file directly ? Here is how ctime looks : <a href=\"https://gcc.gnu.org/onlinedocs/gcc-6.2.0/libstdc++/api/a01181_source.html\" rel=\"nofollow noreferrer\">gcc.gnu.org/onlinedocs/gcc-6.2.0/libstdc++/api/&hellip;</a> All errors appears inside std namespace lines"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 2, "creation_date": 1482960818, "post_id": 41369848, "comment_id": 69941647, "body": "Do not, under any circumstances, modify Standard Library header files."}], "answers": [{"comments": [{"owner": {"reputation": 3646, "user_id": 1083855, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/93fa537cb535181c440f752815a244d8?s=128&d=identicon&r=PG", "display_name": "tigrou", "link": "https://stackoverflow.com/users/1083855/tigrou"}, "edited": false, "score": 0, "creation_date": 1482960964, "post_id": 41369921, "comment_id": 69941696, "body": "Adding <code>std::</code> does not solve the problem, there is still errors reported in <code>ctime</code> header. <code>using namespace std;</code> =&gt; I don&#39;t have any, the problem occurs even with minimal example provided in the OP. Header : I use double quotes, I made the error while typing the question on SO."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 1, "creation_date": 1482961671, "post_id": 41369921, "comment_id": 69942024, "body": "@jagged The screenshot is of the standard library header, which is placing the library names in the std namespace - it&#39;s correct."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1482961726, "post_id": 41369921, "comment_id": 69942049, "body": "@latedeveloper so it is. My mistake."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "is_accepted": false, "score": 0, "last_activity_date": 1482960278, "creation_date": 1482960278, "answer_id": 41369921, "question_id": 41369848, "link": "https://stackoverflow.com/questions/41369848/why-are-there-errors-reported-inside-a-standard-library-header-after-adding-a-se/41369921#41369921", "title": "Why are there errors reported inside a standard library header after adding a search directory in compiler options?", "body": "<p>The <code>&lt;ctime&gt;</code> header puts the names into the <code>std</code> namespace, so you want:</p>\n\n<pre><code>std::time(NULL);\n</code></pre>\n\n<p>You probably have a <code>using namespace std;</code> in one of your own header files - don't do that.</p>\n\n<p>Also, you typically want to include your own headers like this:</p>\n\n<pre><code>#include \"somefile1.h\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1483025406, "post_id": 41371718, "comment_id": 69967223, "body": "It seems that <a href=\"https://gcc.gnu.org/onlinedocs/cpp/Search-Path.html\" rel=\"nofollow noreferrer\">gcc&#39;s search behavior</a> on <code>#include &lt;&gt;</code>s and <code>#include &quot;&quot;</code>s is relevant here, then: Directories added to the search path with <code>-I</code> will be searched for both, and in the case of <code>&lt;&gt;</code> before any other option, unless the deprecated <code>-I-</code> option is used. The <code>-iquote</code> option will add a directory only to the search path for quoted includes. Since <code>&lt;ctime&gt;</code> <code>#include &lt;&gt;</code>s <code>time.h</code>, an <code>-I</code> option will override the location of <code>time.h</code> if the specified directory contains a <code>time.h</code> file."}], "tags": [], "owner": {"reputation": 3646, "user_id": 1083855, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/93fa537cb535181c440f752815a244d8?s=128&d=identicon&r=PG", "display_name": "tigrou", "link": "https://stackoverflow.com/users/1083855/tigrou"}, "is_accepted": true, "score": 1, "last_activity_date": 1482972173, "creation_date": 1482972173, "answer_id": 41371718, "question_id": 41369848, "link": "https://stackoverflow.com/questions/41369848/why-are-there-errors-reported-inside-a-standard-library-header-after-adding-a-se/41371718#41371718", "title": "Why are there errors reported inside a standard library header after adding a search directory in compiler options?", "body": "<p>I found the problem : </p>\n\n<p>In the project I'm trying to compile there is a file named \"time.h\".</p>\n\n<p>It has same name as standard library time.h file. Because of this, inside ctime file, the time.h of the project is included (which doesn't contains clock_t and other definitions) and thus ctime cannot be compiled.</p>\n\n<p>As solution, I have simply renamed time.h of the project to a not reserved name.</p>\n"}], "owner": {"reputation": 3646, "user_id": 1083855, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/93fa537cb535181c440f752815a244d8?s=128&d=identicon&r=PG", "display_name": "tigrou", "link": "https://stackoverflow.com/users/1083855/tigrou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 41371718, "answer_count": 2, "score": 1, "last_activity_date": 1482972173, "creation_date": 1482959981, "last_edit_date": 1482970297, "question_id": 41369848, "link": "https://stackoverflow.com/questions/41369848/why-are-there-errors-reported-inside-a-standard-library-header-after-adding-a-se", "title": "Why are there errors reported inside a standard library header after adding a search directory in compiler options?", "body": "<p>I have a project in CodeBlocks (MinGW32) which is setup like this :</p>\n\n<pre><code>Foo/src/somefile1.cpp\nFoo/src/somefile2.cpp\nFoo/src/somefile1.h\n...\n</code></pre>\n\n<p>Headers are included that way : </p>\n\n<pre><code>#include \"somefile1.h\"\n</code></pre>\n\n<p>In order to be able to compile I have added the following directory in \"Project options\" > \"Search directories\" (as a relative path) : </p>\n\n<pre><code>src\n</code></pre>\n\n<p>After adding that folder, the project compiles. However, if I include a standard header like <code>&lt;ctime&gt;</code> the following errors appears in ctime header file : </p>\n\n<pre><code>'::clock_t' has not been declared\n'::time_t' has not been declared\n...\n</code></pre>\n\n<p>and so on for all lines inside the <code>std namespace</code> brackets of ctime. If I remove the <code>src</code> folder from search directories, I can compile again.</p>\n\n<p>I have reduced the code to the bare minimum, removed all files except <code>main.cpp</code>, but the problem is still there : </p>\n\n<pre><code>#include &lt;ctime&gt; //errors if \"src\" folder added in search folders\n\nint main(int argc, char **argv) {\n    time(NULL); //does not compile\n    return(0);\n}\n</code></pre>\n"}, {"tags": ["javascript", "c++", "algorithm", "data-structures", "visualization"], "answers": [{"comments": [{"owner": {"reputation": 397, "user_id": 1832002, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fee11977995ce3ba2587c1f913d4f22a?s=128&d=identicon&r=PG", "display_name": "jsc0218", "link": "https://stackoverflow.com/users/1832002/jsc0218"}, "edited": false, "score": 0, "creation_date": 1482961436, "post_id": 41369898, "comment_id": 69941910, "body": "Thanks for your quick answer. Is there any similar project I can take a look first?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7346816"}, "reply_to_user": {"reputation": 397, "user_id": 1832002, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fee11977995ce3ba2587c1f913d4f22a?s=128&d=identicon&r=PG", "display_name": "jsc0218", "link": "https://stackoverflow.com/users/1832002/jsc0218"}, "edited": false, "score": 0, "creation_date": 1482961761, "post_id": 41369898, "comment_id": 69942069, "body": "Well I googled that example library on the fly, I think you could do the same to find example codes etc. But I see their examples are quite self-explanatory. In your certain case - you didn&#39;t show your structure&#39;s source code, but as you use C++, not C, you could make use of inheritance and write simple interface with method <i>foo</i> accepting reference to JSON object, and while parsing to JSON object you could just call foo on structure members recursively to build the whole tree."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7346816"}, "is_accepted": true, "score": 1, "last_activity_date": 1482960178, "creation_date": 1482960178, "answer_id": 41369898, "question_id": 41369814, "link": "https://stackoverflow.com/questions/41369814/how-to-visualize-on-the-webpage-a-running-data-structure-written-in-c/41369898#41369898", "title": "How to visualize (on the webpage) a running data structure written in C++", "body": "<p><a href=\"https://github.com/nlohmann/json\" rel=\"nofollow noreferrer\">This</a> looks like an answer to your question. Simply parse your data structure to JSON string and send it to your client's browser, where you can use javascript to do the magic with the object. No big libraries need to be installed, no compiling C++ to javascript.</p>\n"}], "owner": {"reputation": 397, "user_id": 1832002, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fee11977995ce3ba2587c1f913d4f22a?s=128&d=identicon&r=PG", "display_name": "jsc0218", "link": "https://stackoverflow.com/users/1832002/jsc0218"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 1, "accepted_answer_id": 41369898, "answer_count": 1, "score": -1, "last_activity_date": 1482960178, "creation_date": 1482959718, "question_id": 41369814, "link": "https://stackoverflow.com/questions/41369814/how-to-visualize-on-the-webpage-a-running-data-structure-written-in-c", "title": "How to visualize (on the webpage) a running data structure written in C++", "body": "<p>I have a big data structure written in C++. It runs in the backend serving as a storage engine. I woule like to visualize its structure through web interface. The purpose of it is just for demo and good user's understanding. Specifically, when the data structure changes(a node deleted or add a node), how it is changed should be reflected in a webpage. It's not necessary to let the browser and data structure stay in the same machine.</p>\n\n<p>One approach I find is to compile the C++ code into javascipt via LLVM, but this is not applicable for me, as the data structre is so large and its performance hurts.</p>\n\n<p>Is there any other approache? My general idea is to get some meta data from the backend data structure, send it to a rendering server, use javascript to show it in a browser. I am very new to UI and web stuff, not sure if this is the right direction. Even if this is correct, what library should I use? I hope some details can be given. </p>\n"}, {"tags": ["c++", "binary-tree"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1482959742, "post_id": 41369799, "comment_id": 69941235, "body": "The right tool to solve such problems is your debugger. You should step through your code line-by-line <i>before</i> asking on Stack Overflow. For more help, please read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs (by Eric Lippert)</a>. At a minimum, you should &#91;edit] your question to include a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable</a> example that reproduces your problem, along with the observations you made in the debugger."}, {"owner": {"reputation": 3, "user_id": 6586837, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C4qgF.jpg?s=128&g=1", "display_name": "Taiseer Zaim", "link": "https://stackoverflow.com/users/6586837/taiseer-zaim"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482961505, "post_id": 41369799, "comment_id": 69941932, "body": "You&#39;re right... if I knew the Algorithem to solve my problem..."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6586837, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C4qgF.jpg?s=128&g=1", "display_name": "Taiseer Zaim", "link": "https://stackoverflow.com/users/6586837/taiseer-zaim"}, "edited": false, "score": 0, "creation_date": 1482976986, "post_id": 41370481, "comment_id": 69946156, "body": "Now my code only lets me edit the first client...  But whenever I try to edit another client other than the first one... it crashes :("}], "tags": [], "owner": {"reputation": 5092, "user_id": 5481471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6efc50461d3521db348bf483652040?s=128&d=identicon&r=PG&f=1", "display_name": "G. Sliepen", "link": "https://stackoverflow.com/users/5481471/g-sliepen"}, "is_accepted": true, "score": 1, "last_activity_date": 1482963484, "creation_date": 1482963484, "answer_id": 41370481, "question_id": 41369799, "link": "https://stackoverflow.com/questions/41369799/editing-a-node-in-a-binary-tree-structure/41370481#41370481", "title": "Editing a Node in a binary tree structure", "body": "<p>The problem is that Tree::SAD() returns the node that is being searched for <em>by value</em>. This means that in Tree::edit(), the following line:</p>\n\n<pre><code>Node p = SAD(q);\n</code></pre>\n\n<p>Gets a <em>copy</em> of the actual node. Anything changed in <code>p</code> is not changed in the actual Tree. At the end of <code>edit()</code>, you try to <code>insert(p.data)</code>, but this does not do anything, because your implementation of <code>insert()</code> never overwrites already existing nodes.</p>\n\n<p>One solution is to make <code>SAD()</code> return a pointer to the found node. This has the added benefit that you can return <code>nullptr</code> to signal the case where the searched for <code>id</code> does not exist. This can then be used in <code>edit()</code> to change the fields of the <code>Node</code> structure directly.</p>\n"}], "owner": {"reputation": 3, "user_id": 6586837, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C4qgF.jpg?s=128&g=1", "display_name": "Taiseer Zaim", "link": "https://stackoverflow.com/users/6586837/taiseer-zaim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1059, "favorite_count": 0, "closed_date": 1482985973, "accepted_answer_id": 41370481, "answer_count": 1, "score": 0, "last_activity_date": 1482963484, "creation_date": 1482959653, "question_id": 41369799, "link": "https://stackoverflow.com/questions/41369799/editing-a-node-in-a-binary-tree-structure", "closed_reason": "Not suitable for this site", "title": "Editing a Node in a binary tree structure", "body": "<p>)\nI'm working on a code... almost finished but I'm stuck with one last thing,\nI need to find a way to edit a client's info when the user wishes to.\nthis is my code... any one can tell me what's wrong please? :</p>\n\n<pre><code>        #include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\nusing namespace std;\nifstream infile;\nofstream outfile;\nstruct INFO {\n    int id;\n    string name;\n    unsigned balance;\n    long phone;\n};\nclass Node\n{\npublic:\n    INFO data;\n    Node *left;\n    Node *right;\n    Node() {\n        data.id = 0;\n        data.name = \"NULL\";\n        data.phone = 0;\n        data.balance = 0;\n    }\n    Node(INFO a)\n    {\n        data = a;\n        left = 0;\n        right = 0;\n    }\n};\nclass Tree\n{\n\npublic:\n    Node *root;\n    INFO inf;\n    Node *zero;\n    Tree()\n    {\n        root = 0;\n    }\n    bool insert(INFO inf)\n    {\n        if (root == 0)\n        {\n            root = new Node(inf);\n            return true;\n        }\n        Node *p = root;\n        Node *q = root;\n\n        while (p != 0)\n        {\n            q = p;\n            if (p-&gt;data.id == inf.id)\n                return false;\n            if (p-&gt;data.id &gt; inf.id)\n                p = p-&gt;left;\n            else\n                p = p-&gt;right;\n        }\n        if (inf.id &lt; q-&gt;data.id)\n            q-&gt;left = new Node(inf);\n        else\n            q-&gt;right = new Node(inf);\n        return true;\n    }\n    bool searchid(Node *p, int y)\n    {\n        if (p != 0) {\n            if (p-&gt;data.id == y) {\n                cout &lt;&lt; \"ID: \";\n                cout &lt;&lt; p-&gt;data.id &lt;&lt; \"\\t\";\n                cout &lt;&lt; \"Name: \";\n                cout &lt;&lt; p-&gt;data.name &lt;&lt; \"\\t\";\n                cout &lt;&lt; \"Balance: \";\n                cout &lt;&lt; p-&gt;data.balance &lt;&lt; \"\\t\";\n                cout &lt;&lt; \"Phone number: \";\n                cout &lt;&lt; p-&gt;data.phone &lt;&lt; endl;\n                cout &lt;&lt; \"_________________\" &lt;&lt; endl;\n                return true;\n            }\n        }\n        if (p-&gt;left != 0) {\n            if (searchid(p-&gt;left, y)) {\n                return true;\n            }\n        }\n        if (p-&gt;right != 0) {\n            if (searchid(p-&gt;right, y)) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n    Node SAD(int id) {\n        Node *p = root;\n        if (p-&gt;data.id == id) {\n            Node *q = p;\n            return *p;\n        }\n        if (p-&gt;left != 0)\n            SAD(p-&gt;left-&gt;data.id);\n        if (p-&gt;right != 0)\n            SAD(p-&gt;right-&gt;data.id);\n        return *zero;\n    }\n    void edit(int q) {\n        Node p = SAD(q);\n        cout &lt;&lt; \"The ID is: \" &lt;&lt; p.data.id &lt;&lt; endl;\n        cout &lt;&lt; \"The account owner: \";\n        cout &lt;&lt; p.data.name &lt;&lt; endl;\n        cout &lt;&lt; \"Do you want to edit the owner?(Y/N) \";\n        char x;\n        cin &gt;&gt; x;\n        if (x == 'Y' || x == 'y') {\n            string New;\n            cout &lt;&lt; \"Enter the new owner name: \";\n            cin &gt;&gt; New;\n            p.data.name = New;\n        }\n        cout &lt;&lt; \"The Balance in the account is: \";\n        cout &lt;&lt; p.data.balance &lt;&lt; endl;\n        cout &lt;&lt; \"Do you want to edit the balance?(Y/N) \";\n        cin &gt;&gt; x;\n        if (x == 'Y' || x == 'y') {\n            int New;\n            cout &lt;&lt; \"Enter the new Balance: \";\n            cin &gt;&gt; New;\n            p.data.balance = New;\n        }\n        cout &lt;&lt; \"The phone number is: \";\n        cout &lt;&lt; p.data.phone &lt;&lt; endl;\n        cout &lt;&lt; \"Do you want to edit the phone number?(Y/N) \";\n        cin &gt;&gt; x;\n        if (x == 'Y' || x == 'y') {\n            long New;\n            cout &lt;&lt; \"Enter the new phone number\";\n            cin &gt;&gt; New;\n            p.data.phone = New;\n        }\n        cout &lt;&lt; p.data.id &lt;&lt; \"   \" &lt;&lt; p.data.name &lt;&lt; \"   \" &lt;&lt; p.data.balance &lt;&lt; \"    \" &lt;&lt; p.data.phone &lt;&lt; endl;\n        insert(p.data);\n    }\n    void print(Node *p)\n    {\n\n        if (p != 0) {\n            cout &lt;&lt; \"ID: \";\n            cout &lt;&lt; p-&gt;data.id &lt;&lt; \"\\t\";\n            cout &lt;&lt; \"Name: \";\n            cout &lt;&lt; p-&gt;data.name &lt;&lt; \"\\t\";\n            cout &lt;&lt; \"Balance: \";\n            cout &lt;&lt; p-&gt;data.balance &lt;&lt; \"\\t\";\n            cout &lt;&lt; \"Phone number: \";\n            cout &lt;&lt; p-&gt;data.phone &lt;&lt; endl;\n            cout &lt;&lt; \"_______________________________________________________________\" &lt;&lt; endl&lt;&lt;endl;\n        }\n        if (p-&gt;left != 0)\n            print(p-&gt;left);\n        if (p-&gt;right != 0)\n            print(p-&gt;right);\n    }\n    void store(Node *p)\n    {\n        if (p != 0) {\n            outfile &lt;&lt; \"ID: \";\n            outfile &lt;&lt; p-&gt;data.id &lt;&lt; \"   \";\n            outfile &lt;&lt; \"Name: \";\n            outfile &lt;&lt; p-&gt;data.name &lt;&lt; \"   \";\n            outfile &lt;&lt; \"Balance: \";\n            outfile &lt;&lt; p-&gt;data.balance &lt;&lt; \"   \";\n            outfile &lt;&lt; \"Phone number: \";\n            outfile &lt;&lt; p-&gt;data.phone &lt;&lt; endl;\n            outfile &lt;&lt; \"_______________________________________________________________\" &lt;&lt; endl;\n        }\n        if (p-&gt;left != 0)\n            store(p-&gt;left);\n        if (p-&gt;right != 0)\n            store(p-&gt;right);\n    }\n    bool searchname(Node *p, string x)\n    {\n        Node *q = root;\n        q = p;\n        while (p != 0) {\n            if (p-&gt;data.name == x) {\n                cout &lt;&lt; \"ID: \" &lt;&lt; p-&gt;data.id &lt;&lt; \"\\t\";\n                cout &lt;&lt; \"Name: \" &lt;&lt; p-&gt;data.name &lt;&lt; \"\\t\";\n                cout &lt;&lt; \"Balance: \" &lt;&lt; p-&gt;data.balance &lt;&lt; \"\\t\";\n                cout &lt;&lt; \"Phone number: \" &lt;&lt; p-&gt;data.phone &lt;&lt; endl;\n            }\n            else {\n\n            }\n        }\n    }\n};\nvoid main()\n{\n    outfile.open(\"clients.txt\");\n    int opt;\n    Tree t;\n    int m = 1;\n    while (m != 0) {\n        cout &lt;&lt; \"Choose an option:\" &lt;&lt; endl &lt;&lt; \"1- To Add new clients.\" &lt;&lt; endl &lt;&lt; \"2- To Display the clients.\" &lt;&lt; endl &lt;&lt; \"3- To Store the clients in a Text Document.\" &lt;&lt; endl &lt;&lt; \"4- To Search for a specific client through it's ID.\" &lt;&lt; endl &lt;&lt; \"5- To Edit a specific client's information\" &lt;&lt; endl &lt;&lt; \"6- To Delete a specific client.\" &lt;&lt;endl&lt;&lt;\"7- Exit.\"&lt;&lt; endl;\n        cin &gt;&gt; opt;\n        switch (opt) {\n\n        case 1:\n            int n;\n            cout &lt;&lt; \"Enter the amount of clients: \";\n            cin &gt;&gt; n;\n            INFO *arr;\n            arr = new INFO[n];\n            cout &lt;&lt; \"Enter the elements of the array: \" &lt;&lt; endl;\n            for (int i = 0; i &lt; n; i++)\n            {\n                cout &lt;&lt; \"Client #\" &lt;&lt; i + 1 &lt;&lt; endl &lt;&lt; \"-----------\" &lt;&lt; endl;\n                cout &lt;&lt; \"Enter the ID: \";\n                cin &gt;&gt; arr[i].id;\n                cout &lt;&lt; \"Enter the name of the client: \";\n                cin &gt;&gt; arr[i].name;\n                cout &lt;&lt; \"Enter the balance: \";\n                cin &gt;&gt; arr[i].balance;\n                cout &lt;&lt; \"Enter the phone number: \";\n                cin &gt;&gt; arr[i].phone;\n                t.insert(arr[i]);\n            }\n            break;\n        case 2:\n            t.print(t.root);\n            break;\n        case 3:\n            t.store(t.root);\n            cout &lt;&lt; \"Saved!\" &lt;&lt; endl &lt;&lt; \"in directory:  C:/Users/Taiseer/Documents/Visual Studio 2015/Projects/ADS Project/ADS Project\" &lt;&lt; endl;\n            break;\n        case 4:\n            cout &lt;&lt; endl;\n            int s;\n            cout &lt;&lt; \"What element do you want to search for? \";\n            cin &gt;&gt; s;\n            if (t.searchid(t.root, s) == false) {\n                cout &lt;&lt; \" Not here.... :( \\n\";\n            }\n\n            cout &lt;&lt; endl;\n            break;\n        case 5:\n            char x;\n            cin &gt;&gt; x;\n            if (x == 'y' || x == 'Y') {\n                int id;\n                cout &lt;&lt; \"Enter the id you want to edit: \";\n                cin &gt;&gt; id;\n                t.edit(id);\n            }\n            else\n                return;\n            break;\n        case 6:\n            break;\n        case 7:\n            m = 0;\n            break;\n        default:\n            cout &lt;&lt; \"lol\" &lt;&lt; endl;\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "gcc", "glibc"], "comments": [{"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 1, "creation_date": 1482960735, "post_id": 41369765, "comment_id": 69941613, "body": "It is not standard conforming. How could you access it in a standard conforming code?"}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 1, "creation_date": 1482961861, "post_id": 41369765, "comment_id": 69942113, "body": "A way to do it <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n3864.html\" rel=\"nofollow noreferrer\">was proposed</a>"}, {"owner": {"reputation": 1241, "user_id": 1008966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d946ead65e7f775142938c4dd570791?s=128&d=identicon&r=PG", "display_name": "Dan R", "link": "https://stackoverflow.com/users/1008966/dan-r"}, "reply_to_user": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1482984909, "post_id": 41369765, "comment_id": 69947770, "body": "@skypjack I was hoping that a function to do the same thing exists somewhere in a standard header, whose implementation presumably does &quot;the right thing&quot; depending on the architecture or OS etc."}], "answers": [{"tags": [], "owner": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "is_accepted": true, "score": 2, "last_activity_date": 1482961563, "creation_date": 1482961563, "answer_id": 41370158, "question_id": 41369765, "link": "https://stackoverflow.com/questions/41369765/standard-way-to-call-ffsl-in-c/41370158#41370158", "title": "Standard way to call `ffsl` in C++?", "body": "<p>There is no standard function to achieve this and each compiler typically provides it's own intrinsic to compute ffs (see e.g. <a href=\"https://en.wikipedia.org/wiki/Find_first_set#Tool_and_library_support\" rel=\"nofollow noreferrer\">Wikipedia</a> for relatively complete list). So your best take would be to do a wrapper</p>\n\n<pre><code>#ifdef __GNUC__\n#  define ffs(x) __builtin_ffs(x)\n#elif __INTEL_COMPILER\n#  define ffs(x) _bit_scan_forward(x)\n...\n</code></pre>\n\n<p>Also note that <code>__builtin_ffs</code> and <code>ffs(3)</code> may generate non-equivalent code (I'd use compiler intrinsic as these tend to be better optimized by compiler, on the other hand GCC intrinsics are not always well optimized).</p>\n"}], "owner": {"reputation": 1241, "user_id": 1008966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d946ead65e7f775142938c4dd570791?s=128&d=identicon&r=PG", "display_name": "Dan R", "link": "https://stackoverflow.com/users/1008966/dan-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1490, "favorite_count": 0, "accepted_answer_id": 41370158, "answer_count": 1, "score": 2, "last_activity_date": 1482961563, "creation_date": 1482959501, "question_id": 41369765, "link": "https://stackoverflow.com/questions/41369765/standard-way-to-call-ffsl-in-c", "title": "Standard way to call `ffsl` in C++?", "body": "<p>The <a href=\"http://man7.org/linux/man-pages/man3/ffs.3.html\" rel=\"nofollow noreferrer\"><code>ffsl</code> function</a> is part of glibc. In GCC it is also available via <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html\" rel=\"nofollow noreferrer\"><code>__builtin_ffsl</code></a>. It returns the index of the least significant bit in a long.</p>\n\n<p>Is there a way to access this functionality in standards-conforming C++ code? I would like to get at these versions (if available) because they are written in assembly for high performance. (Most architectures provide an instruction for this function or similar.)</p>\n"}, {"tags": ["c++", "mfc"], "answers": [{"tags": [], "owner": {"reputation": 316, "user_id": 2667023, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/aaddc5cea43bb978b32b7f6c2d27c483?s=128&d=identicon&r=PG", "display_name": "void", "link": "https://stackoverflow.com/users/2667023/void"}, "is_accepted": false, "score": 1, "last_activity_date": 1483016659, "creation_date": 1483016659, "answer_id": 41380342, "question_id": 41369538, "link": "https://stackoverflow.com/questions/41369538/mfc-treecontrol-only-adding-root-element/41380342#41380342", "title": "MFC TreeControl only adding root element", "body": "<p>There is nothing wrong in your code, I tried same code and it worked. There might be possibility you see only a root element as tree is not by default expanded.\nYou can add below code to expand your tree and try if you see all elements.</p>\n\n<pre><code>    hItem= m_directoryListing.GetFirstVisibleItem();\n    while (hItem != NULL)\n    {\n        m_directoryListing.Expand(hItem,TVE_EXPAND);\n        hItem= m_directoryListing.GetNextItem(hItem, TVGN_NEXTVISIBLE);\n    }\n</code></pre>\n"}], "owner": {"reputation": 3440, "user_id": 1226843, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/txrOm.jpg?s=128&g=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/1226843/matthew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1483016659, "creation_date": 1482958251, "question_id": 41369538, "link": "https://stackoverflow.com/questions/41369538/mfc-treecontrol-only-adding-root-element", "title": "MFC TreeControl only adding root element", "body": "<p>I created a simple MFC application that is Dialog based. I dragged a TreeControl onto the dialog resource editor. I gave it a member variable name. I also have a button with an event handler function. When I click the button, I want to populate the tree.</p>\n\n<p>The problem is, only the root element is being added, nothing else. Any ideas?</p>\n\n<p>`</p>\n\n<pre><code>void CCrysisDialogDecryptorDlg::OnBnClickedButton1()\n{\n    HTREEITEM hItem, hCar;\n    hItem = m_directoryListing.InsertItem(L\"C:\\\\\",TVI_ROOT);\n    hCar = m_directoryListing.InsertItem(L\"Child\",hItem);\n    m_directoryListing.InsertItem(L\"Grandchild\",hCar);\n    m_directoryListing.InsertItem(L\"Grandchild\",hCar);\n    m_directoryListing.InsertItem(L\"Grandchild\",hCar);\n}\n</code></pre>\n\n<p>`</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 59687, "user_id": 951890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01c3ef0adae5153378a3f602ca068a03?s=128&d=identicon&r=PG", "display_name": "Vaughn Cato", "link": "https://stackoverflow.com/users/951890/vaughn-cato"}, "edited": false, "score": 2, "creation_date": 1482958331, "post_id": 41369498, "comment_id": 69940649, "body": "You aren&#39;t initializing <code>sum</code>.  This leads to undefined behavior.  Variables are not initialized to zero by default in C++."}, {"owner": {"reputation": 307, "user_id": 5596559, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b1b64685556a6d2d5e647e64f10fb36f?s=128&d=identicon&r=PG&f=1", "display_name": "Ginko", "link": "https://stackoverflow.com/users/5596559/ginko"}, "reply_to_user": {"reputation": 59687, "user_id": 951890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01c3ef0adae5153378a3f602ca068a03?s=128&d=identicon&r=PG", "display_name": "Vaughn Cato", "link": "https://stackoverflow.com/users/951890/vaughn-cato"}, "edited": false, "score": 0, "creation_date": 1482958402, "post_id": 41369498, "comment_id": 69940677, "body": "sum is initialized to 0 automatically, so it&#39;s not a big deal"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1482958458, "post_id": 41369498, "comment_id": 69940697, "body": "@Ginko -- Sum in <b>not</b> initialized automatically.  It is a local variable, thus it contains any random garbage, and yes, 0 is just as random as any other garbage value."}, {"owner": {"reputation": 307, "user_id": 5596559, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b1b64685556a6d2d5e647e64f10fb36f?s=128&d=identicon&r=PG&f=1", "display_name": "Ginko", "link": "https://stackoverflow.com/users/5596559/ginko"}, "edited": false, "score": 0, "creation_date": 1482958671, "post_id": 41369498, "comment_id": 69940800, "body": "It&#39;s a weird thing. Initializing sum to 0 solved it somehow, but it produces the same result as if I wouldn&#39;t do this, although it now works regardless of putting that cout instruction"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1482958764, "post_id": 41369498, "comment_id": 69940840, "body": "@Ginko -- It is not weird.  A local variable in C++ starts out with random junk if not initialized.  Without initialization, it could be 0, -1, 4325, 89, -67, you don&#39;t know.  Sticking a <code>cout</code> line only changes the binary image, thus you get some other trash value as the starting value."}, {"owner": {"reputation": 307, "user_id": 5596559, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b1b64685556a6d2d5e647e64f10fb36f?s=128&d=identicon&r=PG&f=1", "display_name": "Ginko", "link": "https://stackoverflow.com/users/5596559/ginko"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1482958980, "post_id": 41369498, "comment_id": 69940933, "body": "@PaulMcKenzie I mean that, when I don&#39;t initialize sum, it starts with 0 if I don&#39;t print anything before creating sum. Otherwise it becomes a huge, random number."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1482959112, "post_id": 41369498, "comment_id": 69940981, "body": "@Ginko I don&#39;t know what other computer languages you&#39;ve used before, but C++ has something called <b>undefined behavior</b>.  It is <i>not</i> weird."}], "answers": [{"comments": [{"owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "edited": false, "score": 0, "creation_date": 1482960780, "post_id": 41369788, "comment_id": 69941627, "body": "It would be great to know how the cout statement affects the garbage value of the uninitialised local &#39;sum&#39;. It&#39;s not clear to me. Though I guess that&#39;s another question."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "edited": false, "score": 0, "creation_date": 1482961421, "post_id": 41369788, "comment_id": 69941904, "body": "By adding or removing lines of code (it does not have to be the <code>cout</code> line), you&#39;re changing the executable image.  Change the compiler options, and you yet again may see differing behavior."}], "tags": [], "owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "is_accepted": true, "score": 2, "last_activity_date": 1482960108, "last_edit_date": 1482960108, "creation_date": 1482959599, "answer_id": 41369788, "question_id": 41369498, "link": "https://stackoverflow.com/questions/41369498/printing-text-causes-memory-issue/41369788#41369788", "title": "Printing text causes memory issue", "body": "<p>The issue is this line:</p>\n\n<p><code>double sum;</code></p>\n\n<p>This variable is local, thus uninitialized.  It starts out with a garbage value.  That garbage value can be anything, including 0. Also, you can't predict what the garbage value may be, or even \"control it\" by removing or adding irrelevant lines of code (like the <code>cout</code> statement you mentioned). </p>\n\n<p>To fix this issue, all you need is to simply initialize the variable:</p>\n\n<pre><code>double sum = 0.0;\n</code></pre>\n\n<p>Also, you don't need that loop if you used the algorithm function <a href=\"http://en.cppreference.com/w/cpp/algorithm/accumulate\" rel=\"nofollow noreferrer\">std::accumulate</a>:</p>\n\n<pre><code>#include &lt;numeric&gt;\n//..\ndouble sum_nz_el(double* row, int size)\n{\n    int first = get_first_nz_el_idx(row, size) + 1;\n    int last = size - 1;\n    if (first &gt; size - 2)\n       return 0;\n    return std::accumulate(row + first, row + last, 0.0);\n}\n</code></pre>\n"}], "owner": {"reputation": 307, "user_id": 5596559, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b1b64685556a6d2d5e647e64f10fb36f?s=128&d=identicon&r=PG&f=1", "display_name": "Ginko", "link": "https://stackoverflow.com/users/5596559/ginko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 41369788, "answer_count": 1, "score": 1, "last_activity_date": 1482960108, "creation_date": 1482958075, "question_id": 41369498, "link": "https://stackoverflow.com/questions/41369498/printing-text-causes-memory-issue", "title": "Printing text causes memory issue", "body": "<p>I am doing a program to solve matrixes and when I was trying to debug I wrote code like that:</p>\n\n<pre><code>double* row = matrix[i];\nint first_nz = get_first_nz_el_idx(row, size);\ncout &lt;&lt; row[first_nz];\n</code></pre>\n\n<p>And the funny thing is, when I put that cout instruction there, my results completly change, it starts to return random, big numbers, like <code>01.55e+2311</code>. When I delete that cout instruction, results are correct. I could work-around that problem somehow, but I want to know what's the reason of this behavior. Also, when I do '<code>cout &lt;&lt; \"anything\";</code> it's the same issue. But when I call other function like <code>pow(3, 2)</code> - its nothing wrong.</p>\n\n<p>There is the function, which sums some elements in a row passed:</p>\n\n<pre><code>double sum_nz_el(double* row, int size)\n{\n    int first = get_first_nz_el_idx(row, size) + 1;\n    int last = size - 1;\n    double sum;\n    if (first &gt; size - 2)\n        return 0;\n    while (first &lt; last)\n    {\n        sum += row[first];\n        first++;\n    }\n    return sum;\n}\n\nint get_first_nz_el_idx(double* row, int size)\n{\n    int i = size - 2;\n    while (!(row[i - 1] == 0 || i == 0))\n        i--;\n    return i;\n}\n</code></pre>\n\n<p>And when I do <code>cout &lt;&lt; row[first_nz]</code> or <code>cout &lt;&lt; sum_nz_el(row, size)</code> (it doesn't really matter which one, problem appears in both cases), the function sum_nz_el starts to return random, big numbers, when that row is passed. It should be like max 2,5</p>\n\n<p>Row could be like that:\n<code>0 0 0 23 41 11</code></p>\n"}, {"tags": ["c++", "arrays", "compilation"], "comments": [{"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 1, "creation_date": 1482958185, "post_id": 41369494, "comment_id": 69940593, "body": "Which compiler are you using? Some of them have an extension for <i>variable-length arrays.</i>"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1482958404, "post_id": 41369494, "comment_id": 69940679, "body": "@fred  It means that the compiler has its own language extensions that allow to use VLAs. You should switch them off to get a compiler error message."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1482959451, "post_id": 41369531, "comment_id": 69941117, "body": "note: g++ allowed this extension before C allowed it"}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1482959571, "post_id": 41369531, "comment_id": 69941168, "body": "@M.M.: yes true. Thanks for pointing."}], "tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": true, "score": 3, "last_activity_date": 1482958520, "last_edit_date": 1495540802, "creation_date": 1482958213, "answer_id": 41369531, "question_id": 41369494, "link": "https://stackoverflow.com/questions/41369494/why-does-this-c-program-compile/41369531#41369531", "title": "Why does this c++ program compile?", "body": "<blockquote>\n  <p>In C++, variable length arrays are not legal. G++ allows this as an\n  \"extension\" (because C allows it), so in G++ you can do this.</p>\n</blockquote>\n\n<p>Check this <a href=\"https://stackoverflow.com/questions/1887097/why-arent-variable-length-arrays-part-of-the-c-standard\">answer</a> / <a href=\"https://stackoverflow.com/questions/15013077/arrayn-vs-array10-initializing-array-with-variable-vs-real-number/15013295\">answer</a> further.</p>\n"}, {"comments": [{"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 4, "creation_date": 1482958304, "post_id": 41369532, "comment_id": 69940635, "body": "OP doesn&#39;t want to know whether it&#39;s allowed by the standard--they <i>already</i> know it&#39;s not allowed. They want to know why the compiler is letting them."}], "tags": [], "owner": {"reputation": 1, "user_id": 7351504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a300c9c66841bd2facfbaffe5563868?s=128&d=identicon&r=PG&f=1", "display_name": "Tornado", "link": "https://stackoverflow.com/users/7351504/tornado"}, "is_accepted": false, "score": -2, "last_activity_date": 1482958214, "creation_date": 1482958214, "answer_id": 41369532, "question_id": 41369494, "link": "https://stackoverflow.com/questions/41369494/why-does-this-c-program-compile/41369532#41369532", "title": "Why does this c++ program compile?", "body": "<p>The size of the array may not be a variable.</p>\n"}], "owner": {"reputation": 862, "user_id": 6343313, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/61894d92784367d86ca5027874d96c66?s=128&d=identicon&r=PG&f=1", "display_name": "Mathew", "link": "https://stackoverflow.com/users/6343313/mathew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "closed_date": 1482958633, "accepted_answer_id": 41369531, "answer_count": 2, "score": 1, "last_activity_date": 1482958520, "creation_date": 1482958063, "question_id": 41369494, "link": "https://stackoverflow.com/questions/41369494/why-does-this-c-program-compile", "closed_reason": "Duplicate", "title": "Why does this c++ program compile?", "body": "<p>It is my understanding that the c++ compiler will not allow you to initialize an array with a variable yet this program compiles and runs on my computer, why is that?</p>\n\n<pre><code>// this should not compile because there is a variable in the array declaration\n\n#include &lt;iostream&gt;\n\nint main(){\n    int x = 5;\n    int ar[x];\n    printf(\"hello world\\n\");\n}\n</code></pre>\n"}, {"tags": ["c++", "ofstream"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1482958172, "post_id": 41369488, "comment_id": 69940584, "body": "At the very least, it will be changing the buffer contents of the stream object."}, {"owner": {"reputation": 59687, "user_id": 951890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01c3ef0adae5153378a3f602ca068a03?s=128&d=identicon&r=PG", "display_name": "Vaughn Cato", "link": "https://stackoverflow.com/users/951890/vaughn-cato"}, "edited": false, "score": 0, "creation_date": 1482958230, "post_id": 41369488, "comment_id": 69940615, "body": "It can also change the status if the write fails."}, {"owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "edited": false, "score": 0, "creation_date": 1482958406, "post_id": 41369488, "comment_id": 69940680, "body": "@latedeveloper should I be aware of its internal buffer? I mean they can make it mutable since it is very internal thing"}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 8, "last_activity_date": 1482958480, "creation_date": 1482958480, "answer_id": 41369585, "question_id": 41369488, "link": "https://stackoverflow.com/questions/41369488/why-operator-in-ofstream-is-not-const/41369585#41369585", "title": "Why &lt;&lt; operator in ofstream is not const?", "body": "<p>Because it logically changes the stream. To the bare minimum, it changes the write position within the stream buffer. It can also modify the status of the stream (for example, when writing error happens).</p>\n\n<p>But what is even more important (in my view) is the logical mutability. The stream is not the same after the writing - it has the new value in it. If your class doesn't care about this fact, you may declare your stream member <code>mutable</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": false, "score": 1, "last_activity_date": 1482958620, "creation_date": 1482958620, "answer_id": 41369609, "question_id": 41369488, "link": "https://stackoverflow.com/questions/41369488/why-operator-in-ofstream-is-not-const/41369609#41369609", "title": "Why &lt;&lt; operator in ofstream is not const?", "body": "<p>Because it may call <a href=\"http://en.cppreference.com/w/cpp/io/basic_ios/setstate\" rel=\"nofollow noreferrer\"><code>setstate()</code></a> which isn't <code>const</code> for a reason since it changes the internals of the object as noted in <a href=\"http://eel.is/c++draft/iostream.format#ostream.syn\" rel=\"nofollow noreferrer\">the formatting part for streams</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 168, "user_id": 5457426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5ed889f374811e61b956267a273606e?s=128&d=identicon&r=PG&f=1", "display_name": "Maciej", "link": "https://stackoverflow.com/users/5457426/maciej"}, "is_accepted": false, "score": 0, "last_activity_date": 1482959086, "creation_date": 1482959086, "answer_id": 41369693, "question_id": 41369488, "link": "https://stackoverflow.com/questions/41369488/why-operator-in-ofstream-is-not-const/41369693#41369693", "title": "Why &lt;&lt; operator in ofstream is not const?", "body": "<p>Keep in mind that while <code>ofstream</code> itself doesn't have to be modified to be written to (even though it probably should), the <code>ostringstream</code> which also inherits the <code>&lt;&lt;</code> operator from <code>ostream</code> class has to be modified in order to be written to, as you need to change the internal <code>string</code> object. Because of that, the operator has to be declared <code>const</code> to cover all the cases (the operator is defined in <code>ostream</code> class).</p>\n"}], "owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 453, "favorite_count": 0, "accepted_answer_id": 41369585, "answer_count": 3, "score": 2, "last_activity_date": 1482959086, "creation_date": 1482958027, "question_id": 41369488, "link": "https://stackoverflow.com/questions/41369488/why-operator-in-ofstream-is-not-const", "title": "Why &lt;&lt; operator in ofstream is not const?", "body": "<p>I noticed that the <code>operator &lt;&lt;</code> in <code>ofstream</code> is not <code>const</code>. It is obvious that this operator will change the content of the file but what is it changing inside the <code>ofstream</code> object?</p>\n\n<p>In other words, if I have <code>ofstream</code> as a class member function and I want to call the <code>&lt;&lt; operator</code> on it inside a <code>const</code> member function I have to alter it to <code>non-const</code> member function or mark the <code>ofstream</code> as <code>mutable</code> but it seems not logical from abstract point of view for me.. did I miss something?</p>\n"}, {"tags": ["c++", "gmock"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1483001730, "post_id": 41369470, "comment_id": 69954035, "body": "Probably <code>EXPECT_CALL</code> is some preprocessor macro. So read its documentation (or comment), study its definition, look into the preprocessed form (with <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a> you can get it using <code>g++ -C -E</code>....)"}], "answers": [{"comments": [{"owner": {"reputation": 3026, "user_id": 1288473, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/6NhQ5.jpg?s=128&g=1", "display_name": "Eternal21", "link": "https://stackoverflow.com/users/1288473/eternal21"}, "edited": false, "score": 0, "creation_date": 1483016714, "post_id": 41375831, "comment_id": 69962399, "body": "I actually did try both of those approaches.  The problem with Invoke is that it only passes &#39;actualBuffer&#39; as an argument, and there is no way to add an &#39;expectedBuffer&#39; argument.  The Matcher_Px on the other hand, lets me pass only a single argument, so I can pass in &#39;expectedBuffer&#39;, but not its size.  I&#39;m guessing the only solution is creating my own class/struct that contains both the pointer to the buffer, and its size?  Unless you have a better suggestion.  Thanks."}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "reply_to_user": {"reputation": 3026, "user_id": 1288473, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/6NhQ5.jpg?s=128&g=1", "display_name": "Eternal21", "link": "https://stackoverflow.com/users/1288473/eternal21"}, "edited": false, "score": 0, "creation_date": 1483018186, "post_id": 41375831, "comment_id": 69963224, "body": "@Eternal21: I edited to include some example code, which should make it easier to understand what I meant."}, {"owner": {"reputation": 3026, "user_id": 1288473, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/6NhQ5.jpg?s=128&g=1", "display_name": "Eternal21", "link": "https://stackoverflow.com/users/1288473/eternal21"}, "edited": false, "score": 0, "creation_date": 1483018775, "post_id": 41375831, "comment_id": 69963575, "body": "Thanks for the code samples, that&#39;s one thing I hate about gmock documentation - it&#39;s too cryptic to understand without samples.  One question - what&#39;s the purpose of square brackets around [expectedBuffer] - I can&#39;t find anything about it in gmock documentation?"}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "reply_to_user": {"reputation": 3026, "user_id": 1288473, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/6NhQ5.jpg?s=128&g=1", "display_name": "Eternal21", "link": "https://stackoverflow.com/users/1288473/eternal21"}, "edited": false, "score": 2, "creation_date": 1483019499, "post_id": 41375831, "comment_id": 69963956, "body": "@Eternal21: Yes, I&#39;ve struggled with the gmock docs because of this more than once... and then I go and do the same ;) The square brackets are there to demark the <a href=\"http://en.cppreference.com/w/cpp/language/lambda\" rel=\"nofollow noreferrer\">capture clause of a lambda</a>. This is a C++11 feature, and there are probably other tutorials out there if the cppreference link is too cryptic but I don&#39;t know any off the top of my head..."}], "tags": [], "owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "is_accepted": true, "score": 2, "last_activity_date": 1483018147, "last_edit_date": 1483018147, "creation_date": 1483000218, "answer_id": 41375831, "question_id": 41369470, "link": "https://stackoverflow.com/questions/41369470/save-c-style-array-values-using-gmock/41375831#41375831", "title": "Save C-Style array values using gmock", "body": "<p>I've found myself in the same situation a couple times, and I have two potential strategies to offer:</p>\n\n<ul>\n<li>You can define a custom matcher (see <code>MATCHER_Px</code> macros)</li>\n<li>You can use <code>Invoke</code> and perform the actions you need in the callback</li>\n</ul>\n\n<p>In your case, it will depend on whether you know what to expect at the point where the code is invoked: if you already know, then you can define a matcher that takes the expected array in parameter, otherwise if you need to save it you can use the callback in <code>Invoke</code> to perform a deep copy.</p>\n\n<hr>\n\n<p>Some code samples:</p>\n\n<pre><code>// Invoke\nEXPECT_CALL(usbMock, Write(_, expectedBufferLength))\n        .WillOnce(Invoke([expectedBuffer](byte* actualBuffer, size_t length) {\n            // Substitute for your matching logic\n            for (size_t i = 0; i != length; ++i) {\n                EXPECT_EQ(actualBuffer[i], expectedBuffer[i]);\n            }\n        });\n</code></pre>\n\n<p>And with the matchers:</p>\n\n<pre><code>MATCHER_P2(ByteBufferMatcher, buffer, length, \"\") {\n    return std::equal(arg, arg + length, buffer);\n}\n\n// Usage\nEXPECT_CALL(usbMock,\n    Write(ByteBufferMatcher(expectedBuffer, expectedLength), expectedLength));\n</code></pre>\n\n<p>Note that the latter makes it more difficult to supply a custom error message.</p>\n"}, {"tags": [], "owner": {"reputation": 836, "user_id": 1204780, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9621f12e978009b9b6f09f424f76e60?s=128&d=identicon&r=PG&f=1", "display_name": "Megamozg", "link": "https://stackoverflow.com/users/1204780/megamozg"}, "is_accepted": false, "score": 1, "last_activity_date": 1483011732, "creation_date": 1483011732, "answer_id": 41379021, "question_id": 41369470, "link": "https://stackoverflow.com/questions/41369470/save-c-style-array-values-using-gmock/41379021#41379021", "title": "Save C-Style array values using gmock", "body": "<p>You can do it that way:</p>\n\n<pre><code>MATCHER_P(CompareCustomArray, expectedArray, \"\") {\n    CustomArray* customArray = std::get&lt;0&gt;(arg);\n    return ((*customArray) == (*expectedArray));\n}\n\nCustomArray actualBuffer(\"Expected Buffer Value\");\n\nEXPECT_CALL(usbMock, Write(CompareCustomArray(&amp;actualBuffer), \n                           expectedBufferLength));\n</code></pre>\n\n<p>Here we created specific matcher that compares of two <code>CustomArray</code>s and it \"passes\" if they are equal.</p>\n"}], "owner": {"reputation": 3026, "user_id": 1288473, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/6NhQ5.jpg?s=128&g=1", "display_name": "Eternal21", "link": "https://stackoverflow.com/users/1288473/eternal21"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1145, "favorite_count": 0, "accepted_answer_id": 41375831, "answer_count": 2, "score": 2, "last_activity_date": 1483018147, "creation_date": 1482957953, "question_id": 41369470, "link": "https://stackoverflow.com/questions/41369470/save-c-style-array-values-using-gmock", "title": "Save C-Style array values using gmock", "body": "<p>I have the following expectation on one of my objects:</p>\n\n<pre><code>EXPECT_CALL(usbMock, Write(_, expectedBufferLength));\n</code></pre>\n\n<p>Where the '_' argument is the buffer being passed to Write function on the usbMock.</p>\n\n<p>I need to get the values inside that buffer, so that I can run my own array comparison function (ElementsAreArray and ElementsAre doesn't work for me, because I needed custom output message with exact contents of expected/actual array, and also my arrays are more than 10 bytes long);</p>\n\n<p>In any case, I got very close to solving my problem with the following:</p>\n\n<pre><code>byte* actualBuffer;\nEXPECT_CALL(usbMock, Write(_, expectedBufferLength)).WillOnce(SaveArg&lt;0&gt;(&amp;actualBuffer));\n</code></pre>\n\n<p>The problem is that this is an integration test, and the buffer pointed to by actualBuffer gets released, by the time I'm able to act on it.</p>\n\n<p>My question is, how can I save the contents of the actualBuffer for later inspection, instead of just getting a pointer to it.</p>\n"}, {"tags": ["c++", "windows", "mutex", "impersonation"], "comments": [{"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 1, "creation_date": 1482980247, "post_id": 41369232, "comment_id": 69946850, "body": "RbMm&#39;s answer explains the technical reasons why this doesn&#39;t work, and also provides a workaround (albeit an unsupported one).  Since both accounts are admin, and assuming you are running the program with elevated privilege, a better workaround would be to specify <code>LOGON32_LOGON_BATCH</code> (instead of interactive) so the impersonation token has admin privilege."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 1, "creation_date": 1482980306, "post_id": 41369232, "comment_id": 69946857, "body": "BUT, better still would be to take a step back and ask why you are trying to create a mutex while impersonating in the first place.  That&#39;s a rather odd thing to do; what are you trying to achieve?"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1483024475, "post_id": 41369232, "comment_id": 69966681, "body": "@HarryJohnston - &quot;albeit an unsupported one&quot; - really we not need use <code>Restricted</code> subfolder. we can simply use <code>CreateMutexA(0, 0, &quot;Global\\\\mutex_797&quot;);</code> with &quot;Global\\\\&quot; prefix only which is documented - <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa382954(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a> . i confuse <code>\\BaseNamedObjects</code> with <code>\\GLOBAL??</code> initially and forget that really <code>Everyone</code> <b>have write access</b> to <code>\\BaseNamedObjects</code>. sorry"}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1483041555, "post_id": 41369232, "comment_id": 69975092, "body": "@RbMm: huh.  I thought you needed admin privilege to create any object in the global namespace; I wasn&#39;t aware that only applied to file-mapping objects.  Thanks!  I agree that creating a global mutex is at least as good a workaround as using admin privilege, but I&#39;m still doubtful that it makes sense for the OP to create a mutex while impersonating.  See also <a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20110928-00/?p=9533\" rel=\"nofollow noreferrer\">blogs.msdn.microsoft.com/oldnewthing/20110928-00/?p=9533</a>"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1483042363, "post_id": 41369232, "comment_id": 69975421, "body": "@HarryJohnston - really <code>Everyone</code> can create objects in <code>\\BaseNamedObjects</code>  ( <code>Global</code> ), even LowIntegrity process can do this. this is unlike <code>\\GLOBAL??</code> which is privileged place. so global namespace is not &quot;privileged&quot; space and almost any can create objects here (except <code>Anonymous</code>). think this fact not well known"}, {"owner": {"reputation": 43, "user_id": 7351269, "user_type": "registered", "profile_image": "https://graph.facebook.com/1271403329587212/picture?type=large", "display_name": "Vladimir Navrotsky", "link": "https://stackoverflow.com/users/7351269/vladimir-navrotsky"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1483101549, "post_id": 41369232, "comment_id": 69994496, "body": "@HarryJohnston, well, I don&#39;t know exactly why our customer needs impersonation, but they call  ImpersonateLoggedOnUser and then use our toolkit, which creates mutexes inside. The provided code is just a reduced snippet to illustrate the problem, but actually there are som layers between. Since I can&#39;t control the impersonation parameters, I prefer to change the mutex creation code to create it in \\\\Global than make changes to documentation and explain our customers why they should use batch logon instead of interactive. Thank you for your help!"}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 1, "creation_date": 1483134973, "post_id": 41369232, "comment_id": 70008853, "body": "Ah.  Sounds like an unreasonable customer request to me, but of course it is your prerogative to cater to it anyway. :-)  RbMm&#39;s suggestion of creating global mutexes is definitely your best bet, but make sure you&#39;ve thought about the consequences if more than one person is logged in and running your code.  You might also want to check out the blog post I mentioned above, I believe it mentions a number of other potential issues with impersonation you might want to watch out for."}], "answers": [{"comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 3834, "user_id": 517580, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d04aa91a34f0171bcf5898f0b6d81101?s=128&d=identicon&r=PG", "display_name": "engf-010", "link": "https://stackoverflow.com/users/517580/engf-010"}, "edited": false, "score": 0, "creation_date": 1482962960, "post_id": 41370046, "comment_id": 69942476, "body": "@engf-010 - sorry English not my native language and I not good in it. I try describe that simply not all tokens have access to default object directory - as result <code>zoom</code> is fail create mutex here. but he can create it at <code>&quot;Global\\Restricted\\mutex_797</code> - here less strict SD"}, {"owner": {"reputation": 3834, "user_id": 517580, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d04aa91a34f0171bcf5898f0b6d81101?s=128&d=identicon&r=PG", "display_name": "engf-010", "link": "https://stackoverflow.com/users/517580/engf-010"}, "edited": false, "score": 0, "creation_date": 1482978474, "post_id": 41370046, "comment_id": 69946427, "body": ":MUCH better. As a non-native english reader ,this I can understand."}, {"owner": {"reputation": 43, "user_id": 7351269, "user_type": "registered", "profile_image": "https://graph.facebook.com/1271403329587212/picture?type=large", "display_name": "Vladimir Navrotsky", "link": "https://stackoverflow.com/users/7351269/vladimir-navrotsky"}, "edited": false, "score": 0, "creation_date": 1483019849, "post_id": 41370046, "comment_id": 69964147, "body": "That&#39;s fine, I&#39;m not native speaker too, and your answer is clear and very helpful."}, {"owner": {"reputation": 43, "user_id": 7351269, "user_type": "registered", "profile_image": "https://graph.facebook.com/1271403329587212/picture?type=large", "display_name": "Vladimir Navrotsky", "link": "https://stackoverflow.com/users/7351269/vladimir-navrotsky"}, "edited": false, "score": 0, "creation_date": 1483020291, "post_id": 41370046, "comment_id": 69964398, "body": "So, my misake was in assumption that named object ar created in independent namspace, and each user has his own namespace, something like \\Users\\John\\BaseNamedObjects\\mutex_good and \\Users\\zoom\\BaseNamedObjects\\mutex_797. Now I see this is not the case, and objects are created under &quot;session&quot; namespace, and I can not change the session by impersonation (or in any other way, since a whole process belongs to some session, and this session is owned by user who started the process)"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 43, "user_id": 7351269, "user_type": "registered", "profile_image": "https://graph.facebook.com/1271403329587212/picture?type=large", "display_name": "Vladimir Navrotsky", "link": "https://stackoverflow.com/users/7351269/vladimir-navrotsky"}, "edited": false, "score": 0, "creation_date": 1483021766, "post_id": 41370046, "comment_id": 69965173, "body": "@VladimirNavrotsky - yes, named objects localized by Sessions <code>ID</code>. for system <code>session 0</code> - <code>\\BaseNamedObjects</code> folder used. for <code>session N</code> (where N &gt; 0) - <code>\\Sessions\\N\\BaseNamedObjects</code> used. however by using <code>Global</code> SymbolicLink you can &quot;redirect&quot; place to <code>\\BaseNamedObjects</code> - <code>CreateMutexA(0, 0, &quot;Global\\\\mutex_797&quot;);</code> - <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa382954(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 43, "user_id": 7351269, "user_type": "registered", "profile_image": "https://graph.facebook.com/1271403329587212/picture?type=large", "display_name": "Vladimir Navrotsky", "link": "https://stackoverflow.com/users/7351269/vladimir-navrotsky"}, "edited": false, "score": 1, "creation_date": 1483024107, "post_id": 41370046, "comment_id": 69966472, "body": "@VladimirNavrotsky - I make update - add more info - really we can use and  <code>CreateMutexA(0, 0, &quot;Global\\\\mutex_797&quot;); </code> - without <code>Restricted</code> subfolder. I confuse this with <code>\\GLOBAL??</code> initially"}], "tags": [], "owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "is_accepted": true, "score": 4, "last_activity_date": 1483030523, "last_edit_date": 1483030523, "creation_date": 1482960916, "answer_id": 41370046, "question_id": 41369232, "link": "https://stackoverflow.com/questions/41369232/createmutex-fails-after-impersonation/41370046#41370046", "title": "CreateMutex fails after impersonation", "body": "<p>first of all you need understand <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa365247(v=vs.85).aspx#nt_namespaces\" rel=\"nofollow noreferrer\">NT Namespaces</a> and use <a href=\"https://technet.microsoft.com/en-us/sysinternals/winobj.aspx\" rel=\"nofollow noreferrer\">WinObj</a> tool. </p>\n\n<p>this is like small file system in memory with folders and different \"files\" in it (here under \"files\" mean different object types - <code>Event</code>, <code>Mutant</code>(mutex), <code>Section</code>, <code>Device</code>, ...). every time when you create named object - it placed to some folder in <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa365247(v=vs.85).aspx#nt_namespaces\" rel=\"nofollow noreferrer\">NT Namespaces</a>. folders here (like folders in NTFS) have security descriptors. as result not everybody can create object under any folder. </p>\n\n<p>to paraphrase what you do on the file system language (maybe it will be more clear):</p>\n\n<p>i (<code>John</code>) try create file \"mutex_good\" under <code>%USERPROFILE%\\Documents</code> and this is ok. because this is my personal folder and I have write access to it.</p>\n\n<p>then i login(impersonate) as <code>zoom</code> and try create file \"mutex_797\" again under <code>%USERPROFILE%\\Documents</code> (<code>%USERPROFILE%</code> in both case expand to same path, say <code>c:\\Users\\John</code> impersonation not affect this)</p>\n\n<p>and <code>zoom</code> fail to create file. why ? simply he have no rights to do this. only <code>John</code>, <code>Administartors</code>, <code>SYSTEM</code> have write access to <code>c:\\Users\\John</code> but not <code>zoom</code>.</p>\n\n<p>now let return to <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa365247(v=vs.85).aspx#nt_namespaces\" rel=\"nofollow noreferrer\">NT Namespaces</a>. when we call <code>CreateMutexA( NULL, FALSE, \"mutex_797\" );</code> where  is <code>\"mutex_797\"</code> will be placed ?</p>\n\n<p>if you not <code>appcontainer</code> and not run in system <code>session 0</code> - you run in some user <code>session &lt;N&gt;</code> and your named objects will be placed in <code>\\Sessions\\&lt;N&gt;\\BaseNamedObjects</code> directory, where N=1,2..</p>\n\n<p>so call <code>CreateMutexA( NULL, FALSE, \"mutex_797\" );</code> </p>\n\n<p>try create mutex at <code>\\Sessions\\&lt;N&gt;\\BaseNamedObjects\\mutex_797</code></p>\n\n<p>however in <code>\\Sessions\\&lt;N&gt;\\BaseNamedObjects</code> exist next SymbolicLinks (this is like in NTFS file system):</p>\n\n<pre><code>Global -&gt; \\BaseNamedObjects\nLocal  -&gt; \\Sessions\\&lt;N&gt;\\BaseNamedObjects\nSession -&gt; \\Sessions\\BNOLINKS\n</code></pre>\n\n<p>so say if you call <code>CreateMutexA( NULL, FALSE, \"Global\\\\mutex_797\" );</code></p>\n\n<p>Object Manager try place your mutex under <code>\\BaseNamedObjects\\mutex_797</code></p>\n\n<p>for more info about this read <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa382954(v=vs.85).aspx\" rel=\"nofollow noreferrer\">Kernel object namespaces</a></p>\n\n<p>and of course we must understand <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa446683(v=vs.85).aspx\" rel=\"nofollow noreferrer\">How AccessCheck Works</a></p>\n\n<p>for directory objects defined the next access rights:</p>\n\n<pre><code>//\n// Object Manager Directory Specific Access Rights.\n//\n\n#define DIRECTORY_QUERY                 (0x0001)\n#define DIRECTORY_TRAVERSE              (0x0002)\n#define DIRECTORY_CREATE_OBJECT         (0x0004)\n#define DIRECTORY_CREATE_SUBDIRECTORY   (0x0008)\n</code></pre>\n\n<p>also can more read about this at <a href=\"https://msdn.microsoft.com/en-us/library/windows/hardware/ff566492(v=vs.85).aspx\" rel=\"nofollow noreferrer\">DirectoryObject DesiredAccess Flags</a></p>\n\n<p>we need <code>DIRECTORY_CREATE_OBJECT</code> access (<em>Name-creation access to the directory object</em>) for create mutex (or event or any object) in Directory</p>\n\n<p>now for understand why you can create mutex in <code>\\Sessions\\&lt;N&gt;\\BaseNamedObjects</code> but <code>zoom</code> can not - need look for <code>Security Descriptor</code> for this folder. i dump it:</p>\n\n<pre><code>T FL AcessMsK Sid\n0 00 000F000F S-1-5-90-0-1 DWM-1\n0 00 000F000F S-1-5-18 SYSTEM\n0 0B 10000000 S-1-5-18 SYSTEM\n0 0B 10000000 S-1-3-0 CREATOR OWNER\n0 00 000F000F S-1-5-21-4026734978-3280735129-2412320105-1001 John\n0 0B 10000000 S-1-5-5-0-294807 LogonSessionId_0_294807\n0 00 0002000F S-1-5-5-0-294807 LogonSessionId_0_294807\n0 00 0002000F S-1-5-32-544 Administrators\n0 02 00000003 S-1-1-0 Everyone\n0 00 00000002 S-1-5-12 RESTRICTED\n17 00 00000001 S-1-16-4096 Low Mandatory Level\n</code></pre>\n\n<p>so who have <code>DIRECTORY_CREATE_OBJECT</code> (4) here ? <code>DWM-1</code>, <code>SYSTEM</code>, <code>Administrators</code>, current logon session users (<code>LogonSessionId_0_294807</code> ), current user (<code>John</code>) - and all. <code>zoom</code> not have this access.</p>\n\n<p>for example <code>Everyone</code> have (3) - <code>DIRECTORY_QUERY|DIRECTORY_TRAVERSE</code> - <code>Name lookup</code> and <code>Query</code> but not <code>Name creation</code></p>\n\n<p>you can ask where in this case I can create mutex after impersonation ? need use <code>\\BaseNamedObjects</code> ( <strong>global namespace</strong> )OR <code>\\BaseNamedObjects\\Restricted</code> directory - I test it security descriptor and result :</p>\n\n<p>for <code>\\BaseNamedObjects</code></p>\n\n<pre><code>T FL AcessMsK Sid\n0 00 0002000F S-1-1-0 Everyone\n0 00 00000002 S-1-5-12 RESTRICTED\n0 00 000F000F S-1-5-90-0-0 \n0 00 000F000F S-1-5-18 SYSTEM\n17 00 00000001 S-1-16-4096 Low Mandatory Level\n</code></pre>\n\n<p>for <code>\\BaseNamedObjects\\Restricted</code></p>\n\n<pre><code>T FL AcessMsK Sid\n0 00 0002000F S-1-1-0 Everyone\n0 00 0002000F S-1-5-12 RESTRICTED\n0 00 000F000F S-1-5-90-0-0 \n0 00 000F000F S-1-5-18 SYSTEM\n17 00 00000001 S-1-16-4096 Low Mandatory Level\n</code></pre>\n\n<p>so how you can view <code>Everyone</code> here have 2000F - all needed access. hope <code>zoom</code> is member of <code>Everyone</code> ? next code I sure will be worked</p>\n\n<p><code>CreateMutexA(0, 0, \"Global\\\\mutex_797\");</code></p>\n\n<p>for <code>\\BaseNamedObjects</code> (<em>global namespace</em>) exist one exception:</p>\n\n<blockquote>\n  <p>The creation of a file-mapping object in the global namespace, by\n  using CreateFileMapping, from a session other than session zero is a\n  privileged operation. Because of this, an application running in an\n  arbitrary Remote Desktop Session Host (RD Session Host) server session\n  must have SeCreateGlobalPrivilege enabled in order to create a\n  file-mapping object in the global namespace successfully. The\n  privilege check is limited to the creation of file-mapping objects,\n  and does not apply to opening existing ones. For example, if a service\n  or the system creates a file-mapping object, any process running in\n  any session can access that file-mapping object provided that the user\n  has the necessary access.</p>\n</blockquote>\n\n<p>but for Mutex or say Event - not need <em>SeCreateGlobalPrivilege</em> enabled </p>\n\n<hr>\n\n<p>you also can say, but <code>zoom</code> is Administrator account and <code>Administrator</code> have access to <code>\\Sessions\\&lt;N&gt;\\BaseNamedObjects</code> - so why this not work ? because with <code>LOGON32_LOGON_INTERACTIVE</code> and <code>UAC</code> system assign  to <code>zoom</code> filtered token. <code>Administrator</code> Group (<code>S-1-5-32-544</code>) exist in token <strong>but</strong> with <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa379596(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>SE_GROUP_USE_FOR_DENY_ONLY</code></a> attribute only - as result it ignores access-allowed ACEs for the SID. \nand <code>zoom</code> have another <code>LogonSessionId_0_XXX</code> SID - as result and <code>ERROR_ACCESS_DENIED</code> </p>\n\n<p>as noted @Harry Johnston - if we will use <code>LOGON32_LOGON_BATCH</code> instead <code>LOGON32_LOGON_INTERACTIVE</code> - we got elevated token - here <code>Administrator</code> Group will be with <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa379596(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>SE_GROUP_ENABLED</code></a> attribute - is enabled for access checks for access-allowed  ACEs</p>\n\n<p>or how i offered - use <code>Global\\</code> prefix before name - for place object to <code>\\BaseNamedObjects</code> where <code>Everyone</code> have full access</p>\n\n<blockquote>\n  <p>I understand passing NULL as a first parameter of <code>CreateMutex</code> means\n  that 'default' security attributes will be used. In this case it will\n  be security parameters associated to the thread, i.e. with\n  impersonated user.</p>\n</blockquote>\n\n<p>the first parameter - pointer to <code>SECURITY_ATTRIBUTES</code> let you overwrite default security descriptor  for the new object. this is control who will be have access to it. but this not give you more or less access to Directory where you try place object - you must have <code>DIRECTORY_CREATE_OBJECT</code> access granted and we can not affect this by <code>SECURITY_ATTRIBUTES</code> - this affect on <em>new object</em> but not on existing  Directory     </p>\n\n<p>and finally some visualization of <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa365247(v=vs.85).aspx#nt_namespaces\" rel=\"nofollow noreferrer\">NT Namespace</a>\n<a href=\"https://i.stack.imgur.com/qKuch.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qKuch.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 43, "user_id": 7351269, "user_type": "registered", "profile_image": "https://graph.facebook.com/1271403329587212/picture?type=large", "display_name": "Vladimir Navrotsky", "link": "https://stackoverflow.com/users/7351269/vladimir-navrotsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 663, "favorite_count": 1, "accepted_answer_id": 41370046, "answer_count": 1, "score": 4, "last_activity_date": 1483030523, "creation_date": 1482956807, "last_edit_date": 1482958704, "question_id": 41369232, "link": "https://stackoverflow.com/questions/41369232/createmutex-fails-after-impersonation", "title": "CreateMutex fails after impersonation", "body": "<p>Here's the code where I'me trying to impersonate a user and then create a mutex. The mutex is not getting created. I get ERROR_ACCESS_DENIED error.</p>\n\n<pre><code>void Impersonate()\n{\n    DWORD logonType = LOGON32_LOGON_INTERACTIVE;\n    DWORD logonProvider = LOGON32_PROVIDER_DEFAULT;\n    HANDLE userToken;\n    HANDLE hMutex;\n    DWORD err;\n\n    LPSTR user = \"zoom\"; // the user I created myself on my machine. \n    // It has Administrator privileges, and my account, \n    // from which I start the app, is Admin too\n    LPSTR password = \"zoom\";\n    LPSTR domain = \".\";\n    hMutex = NULL;\n\n    LogonUserA(user, domain, password, logonType, logonProvider,&amp;userToken);\n\n    // just to make sure that mutexes are created fine before impersonation\n    hMutex = CreateMutexA( NULL, FALSE, \"mutex_good\" );  \n\n    ImpersonateLoggedOnUser(userToken);\n\n    hMutex = CreateMutexA( NULL, FALSE, \"mutex_797\" ); // I can set any \n                                                       // random name, no difference\n    if( hMutex == NULL )\n    {\n        err = GetLastError();\n        // here err is ERROR_ACCESS_DENIED \n    }\n\n    CloseHandle(userToken);\n}\n</code></pre>\n\n<p>I've found several similar topics, but all of them were discussing creating same-name mutex from two different user contexts, i.e. a mutex \"MUTEX_1\" was already created before impersonation, and attempting to call CreateMutex with the same name but from an impersonated user was failing due to lack of privileges.</p>\n\n<p>This is not the case here, as I am pretty sure that there is no mutex with the same name (or any mutex at all) being created before this code. </p>\n\n<p>I guess I should pass something non-null into CreateMutex, but what exactly? </p>\n\n<p>I'm not very good in Windows security.  I understand passing NULL as a first parameter of CreateMutex means that 'default' security attributes will be used.  In this case it will be security parameters associated to the thread, i.e. with impersonated user.</p>\n\n<p>Am I correct with my assumptions?</p>\n"}, {"tags": ["c++", "c", "sockets", "tcp", "raw-sockets"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1482964715, "post_id": 41369086, "comment_id": 69943086, "body": "What else would it do? Strange question."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 7311413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5914d10821e2f26263b5c5d4c69a2646?s=128&d=identicon&r=PG&f=1", "display_name": "Arthur James", "link": "https://stackoverflow.com/users/7311413/arthur-james"}, "edited": false, "score": 0, "creation_date": 1482976859, "post_id": 41369172, "comment_id": 69946128, "body": "Well see, I have the second parameter as <code>SOCK_RAW</code> but it&#39;s coupled with <code>IPPROTO_TCP</code> as the third parameter. In retrospect I should have clarified, I apologize. I am wondering how the two together would effect the behavior of <code>connect</code>."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 21, "user_id": 7311413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5914d10821e2f26263b5c5d4c69a2646?s=128&d=identicon&r=PG&f=1", "display_name": "Arthur James", "link": "https://stackoverflow.com/users/7311413/arthur-james"}, "edited": false, "score": 0, "creation_date": 1482980743, "post_id": 41369172, "comment_id": 69946950, "body": "In this case, I would not expect connect to actually succeed. Never tried it myself, but I would expect it to fail."}, {"owner": {"reputation": 21, "user_id": 7311413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5914d10821e2f26263b5c5d4c69a2646?s=128&d=identicon&r=PG&f=1", "display_name": "Arthur James", "link": "https://stackoverflow.com/users/7311413/arthur-james"}, "edited": false, "score": 0, "creation_date": 1482985302, "post_id": 41369172, "comment_id": 69947846, "body": "Why would you expect it not to succeed?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 21, "user_id": 7311413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5914d10821e2f26263b5c5d4c69a2646?s=128&d=identicon&r=PG&f=1", "display_name": "Arthur James", "link": "https://stackoverflow.com/users/7311413/arthur-james"}, "edited": false, "score": 2, "creation_date": 1483023746, "post_id": 41369172, "comment_id": 69966272, "body": "@ArthurJames, because <code>connect</code> would require one of the higher level socket types, like &#39;SOCK_STREAM&#39; or &#39;SOCK_DGRAM&#39; type, not <code>SOCK_RAW</code>. Does it work in your experiment?"}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 1, "last_activity_date": 1482956506, "creation_date": 1482956506, "answer_id": 41369172, "question_id": 41369086, "link": "https://stackoverflow.com/questions/41369086/connect-function-in-raw-socket/41369172#41369172", "title": "Connect function in raw socket?", "body": "<p>Yes, <code>IPPROTO_TCP</code> creates TCP socket. To use raw socket, you need to pass SOCK_RAW as second argument to the <code>socket</code> function.</p>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1483049120, "creation_date": 1483049120, "answer_id": 41387833, "question_id": 41369086, "link": "https://stackoverflow.com/questions/41369086/connect-function-in-raw-socket/41387833#41387833", "title": "Connect function in raw socket?", "body": "<p>Per MSDN documentation:</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms740548.aspx\" rel=\"nofollow noreferrer\">TCP/IP Raw Sockets</a></p>\n\n<blockquote>\n  <p>Once an application creates a socket of type <code>SOCK_RAW</code>, this socket may be used to send and receive data. <strong>All packets sent or received on a socket of type <code>SOCK_RAW</code> are treated as datagrams on an unconnected socket</strong>.</p>\n  \n  <p>The following rules apply to the operations over <code>SOCK_RAW</code> sockets:</p>\n  \n  <p>...</p>\n  \n  <p>Received datagrams are copied into all <code>SOCK_RAW</code> sockets that satisfy the following conditions:</p>\n  \n  <p>...</p>\n  \n  <ul>\n  <li>If a foreign address is defined for the socket, it should correspond to the source address as specified in the IP header of the received datagram. <strong>An application may specify the foreign IP address by calling the <code>connect</code> or <code>WSAConnect</code> function</strong>. If no foreign IP address is specified for the socket, the datagrams are copied into the socket regardless of the source IP address in the IP header of the received datagram.</li>\n  </ul>\n</blockquote>\n\n<p>This implies that RAW sockets are essentially connection-less sockets, and thus <code>connect()</code> <em>does not</em> perform a 3-way TCP handshake on a RAW socket. It simply associates a remote address with the socket, similar to how <code>connect()</code> works with a UDP (<code>SOCK_DGRAM</code>) socket.</p>\n\n<p>More importantly:</p>\n\n<blockquote>\n  <p>Limitations on Raw Sockets</p>\n  \n  <p>...</p>\n  \n  <ul>\n  <li><p><strong>TCP data cannot be sent over raw sockets.</strong>\n  ...</p></li>\n  <li><p><strong>A call to the <code>bind</code> function with a raw socket for the <code>IPPROTO_TCP</code> protocol is not allowed.</strong></p></li>\n  </ul>\n</blockquote>\n\n<p>So you can't use <code>IPPROTO_TCP</code> with a RAW socket to begin with, so the matter of <code>connect()</code> behavior on a RAW TCP socket is moot. <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms740506.aspx\" rel=\"nofollow noreferrer\"><code>IPPROTO_TCP</code> can only be used with a real TCP (<code>SOCK_STREAM</code>) socket</a>:</p>\n\n<blockquote>\n  <p>IPPROTO_TCP<br>\n  6</p>\n  \n  <p>The Transmission Control Protocol (TCP). This is a possible value when the <code>af</code> parameter is <code>AF_INET</code> or <code>AF_INET6</code> <strong>and the <code>type</code> parameter is <code>SOCK_STREAM</code></strong>.</p>\n</blockquote>\n"}], "owner": {"reputation": 21, "user_id": 7311413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5914d10821e2f26263b5c5d4c69a2646?s=128&d=identicon&r=PG&f=1", "display_name": "Arthur James", "link": "https://stackoverflow.com/users/7311413/arthur-james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1894, "favorite_count": 0, "accepted_answer_id": 41369172, "answer_count": 2, "score": 1, "last_activity_date": 1483049120, "creation_date": 1482956082, "question_id": 41369086, "link": "https://stackoverflow.com/questions/41369086/connect-function-in-raw-socket", "title": "Connect function in raw socket?", "body": "<p>I am trying to initiate a TCP Three-Way-Handshake in C. However, it occurred to me that <code>connect</code> may already be establishing such a connection or in some way interfering. Does <code>connect</code> automatically establish a TCP connection whenever the socket it's called on has the <code>IPPROTO_TCP</code> option set?</p>\n"}, {"tags": ["c++", "priority-queue"], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1482958223, "post_id": 41369118, "comment_id": 69940610, "body": "As a matter of fact, the part about efficiency is controversial. If the function is inlined (as it should) it doesn&#39;t matter at all. And in unimaginable case where it wouldn&#39;t, passing by value would provide better performance, at least on 86_64."}], "tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": true, "score": 4, "last_activity_date": 1482957790, "last_edit_date": 1482957790, "creation_date": 1482956234, "answer_id": 41369118, "question_id": 41369074, "link": "https://stackoverflow.com/questions/41369074/priority-queue-not-comparing-correctly-c/41369118#41369118", "title": "Priority Queue Not Comparing Correctly C++", "body": "<p>The same fix that Geordi La Forge would use: reverse the polarity:</p>\n\n<pre><code>bool operator() (const pair&lt;int, char&gt; &amp;a, const pair&lt;int, char&gt; &amp;b) const\n{\n    return a.first &lt; b.first;\n}\n</code></pre>\n\n<p>The comparison function always implements strict weak ordering, a.k.a. the logical <code>&lt;</code> operation. But <code>priority_queue</code>, by definition, <a href=\"http://en.cppreference.com/w/cpp/container/priority_queue\" rel=\"nofollow noreferrer\">gives you the largest value in the priority queue, first</a>:</p>\n\n<blockquote>\n  <p>... provides constant time lookup of the largest (by default) element,</p>\n</blockquote>\n\n<p>But the comparison function is still strict weak ordering:</p>\n\n<blockquote>\n  <p>A Compare type providing a strict weak ordering.</p>\n</blockquote>\n\n<p>Slightly counter-intuitive, but after a while, it does make sense...</p>\n\n<p>P.S.: The comparison function should be a <code>const</code> function, and take <code>const</code> parameters, for efficiency, as shown in my example; but that's an additional detail.</p>\n"}, {"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 1, "last_activity_date": 1482956241, "creation_date": 1482956241, "answer_id": 41369120, "question_id": 41369074, "link": "https://stackoverflow.com/questions/41369074/priority-queue-not-comparing-correctly-c/41369120#41369120", "title": "Priority Queue Not Comparing Correctly C++", "body": "<p>Priority queue expects Comparator to implement <code>less</code> - as any other container requiring weak ordering. However, it works by placing the bigger element on top. Since you effectively implemented <code>greater</code>, you reversed the queue, and now the smallest element goes on top. </p>\n\n<p>To fix the problem, change your comparator to return lesser of the two elements.</p>\n"}], "owner": {"reputation": 87, "user_id": 7351393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0218e9044e50497d9ba51a49ce2b33f9?s=128&d=identicon&r=PG&f=1", "display_name": "Jihan Yin", "link": "https://stackoverflow.com/users/7351393/jihan-yin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1223, "favorite_count": 1, "accepted_answer_id": 41369118, "answer_count": 2, "score": 2, "last_activity_date": 1482957790, "creation_date": 1482956031, "question_id": 41369074, "link": "https://stackoverflow.com/questions/41369074/priority-queue-not-comparing-correctly-c", "title": "Priority Queue Not Comparing Correctly C++", "body": "<p>I am trying to create a priority queue consisting of pairs of int, char that gives me the pair with the greater int, but my code is not working properly. What am I doing wrong?</p>\n\n<p>This is my comparator class:</p>\n\n<pre><code>class Compare\n{\npublic:\n    bool operator() (pair&lt;int, char&gt;a, pair&lt;int, char&gt;b)\n    {\n        return a.first &gt; b.first;\n    }\n};\n</code></pre>\n\n<p>And this is my priority queue:</p>\n\n<pre><code>priority_queue&lt;pair&lt;int, char&gt;, vector&lt;pair&lt;int, char&gt;&gt;, Compare&gt; party;\n</code></pre>\n\n<p>But if I execute the code:</p>\n\n<pre><code>party.push(make_pair(2, 'A'));\nparty.push(make_pair(3, 'B'));\ncout&lt;&lt;party.top().first;\n</code></pre>\n\n<p>It returns 2, instead of 3. How do I fix my implementation of the priority queue?</p>\n"}, {"tags": ["c++", "labview"], "comments": [{"owner": {"reputation": 61, "user_id": 2263013, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NcOBs.jpg?s=128&g=1", "display_name": "Dorato", "link": "https://stackoverflow.com/users/2263013/dorato"}, "edited": false, "score": 0, "creation_date": 1483040691, "post_id": 41369008, "comment_id": 69974717, "body": "I finally found out that the issue was from trying to use two different version software. After over a week and many hours on the internet searching for an answer I came across an article on how to make the lsb file. First I had to remove the custom build commands  and output from the property manager. rebuild the program to create my release folder under my project. once this was done i follow the following steps:"}, {"owner": {"reputation": 5254, "user_id": 24447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da74b7df5db7590fc140329c62b3e498?s=128&d=identicon&r=PG", "display_name": "nekomatic", "link": "https://stackoverflow.com/users/24447/nekomatic"}, "edited": false, "score": 0, "creation_date": 1483435124, "post_id": 41369008, "comment_id": 70086060, "body": "Was there a really good reason you wanted to make a CIN rather than just using a DLL from LabVIEW?"}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 2263013, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NcOBs.jpg?s=128&g=1", "display_name": "Dorato", "link": "https://stackoverflow.com/users/2263013/dorato"}, "is_accepted": false, "score": 1, "last_activity_date": 1483040836, "creation_date": 1483040836, "answer_id": 41386272, "question_id": 41369008, "link": "https://stackoverflow.com/questions/41369008/error-msb3073-vcend-exited-with-code-2/41386272#41386272", "title": "error MSB3073: :VCEnd&quot; exited with code 2", "body": "<p>I finally found out that the issue was from trying to use two different version software. After over a week and many hours on the internet searching for an answer I came across an article on how to make the lsb file. First I had to remove the custom build commands  and output from the property manager. rebuild the program to create my release folder under my project. once this was done i follow the following steps:             </p>\n\n<p>Executing cmd.exe When Compiling a CIN in VC++</p>\n\n<p>You can reduce the introduction of typing errors and mis-quoting by following these steps:  </p>\n\n<pre><code>1.  Go to the start button and click run. Then type cmd in the command window and hit enter.\n</code></pre>\n\n<ol start=\"2\">\n<li>Browse to the directory that has lvsbutil.exe (in the cintools directory under LabVIEW), drag the lvsbutil.exe onto the cmd window. This will correctly quote the executable.</li>\n<li>Browse to the folder that holds your dll, this is usually in /Debug of your project's directory, verify that a dll has been created there.</li>\n<li>In the cmd window, type the following command:  project_name -d</li>\n<li>Drag the folder that contains the dll onto the cmd window, and press enter.\nYou should see LabVIEW resource file with the following properties created properly: \ntype: CIN\nname: sharedcin.lsb</li>\n</ol>\n\n<p>The .lsb file will be built in the same directory as the DLL.</p>\n\n<p>Note: LabVIEW must be installed on the computer that the VC++ code is compiled on. Simply copying the cintools directory to the computer that will compile your code without having LabVIEW installed will cause an error when linking.</p>\n"}], "owner": {"reputation": 61, "user_id": 2263013, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NcOBs.jpg?s=128&g=1", "display_name": "Dorato", "link": "https://stackoverflow.com/users/2263013/dorato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4151, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1483040836, "creation_date": 1482955673, "question_id": 41369008, "link": "https://stackoverflow.com/questions/41369008/error-msb3073-vcend-exited-with-code-2", "title": "error MSB3073: :VCEnd&quot; exited with code 2", "body": "<p>I Know this problem been posted and I search the internet looking for the solution of my problem. I am new to programming and I try to find the answer before posting my problem.\n  I am trying to do a code interface node for Labview. Follow the direction and of course search on the internet. I setup my environment variables to point where my files are at. I set up the property page and were I am having the trouble at is on the command line in the custom build set up. I enter the following command:</p>\n\n<p><code>\"$(CINTOOLSDIR)\\lvsbutil\" \"$(TargetName)\" -d \"$(OutDir)\"</code></p>\n\n<p>and for the Output I enter </p>\n\n<pre><code>    $(OutDir) $(TargetName).lsb.\n</code></pre>\n\n<p>`\n when I build the code I get the following.</p>\n\n<pre><code>'\n    Project: SimpleCIN2010, Configuration: Release Win32 ------\n    1&gt;C:\\Program Files(x86)\\MSBuild\\Microsoft.Cpp\\v4.0\\Microsoft.CppBuild.targets(298,5): warning     MSB8004: Intermediate Directory does not end with a trailing slash.  This build instance will add the slash as it is required to allow proper evaluation of the Intermediate Directory.\n    1&gt;C:\\Program Files (x86)\\MSBuild\\Microsoft.Cpp\\v4.0\\Microsoft.CppBuild.targets(299,5): warning MSB8004: Output Directory does not end with a trailing slash.  This build instance will add the slash as it is required to allow proper evaluation of the Output Directory.\n\n    1&gt;  SimpleCIN2010.cpp\n    1&gt;  Microsoft (R) Incremental Linker Version 10.00.40219.01\n    1&gt;  Copyright (C) Microsoft Corporation.  All rights reserved.\n    1&gt;  \n    1&gt;  \"/OUT:.\\Release\\SimpleCIN2010.dll\" /INCREMENTAL \"/LIBPATH:C:\\Program Files (x86)\\National Instruments\\LabVIEW 8.6\\cintools\" cin.obj labview.lib lvsb.lib kernel32.lib user32.lib gdi32.lib winspool.lib comdlg32.lib advapi32.lib shell32.lib ole32.lib oleaut32.lib uuid.lib odbc32.lib odbccp32.lib \"/DEF:C:\\Program Files (x86)\\National Instruments\\LabVIEW 8.6\\cintools\\lvsbmain.def\" /MANIFEST \"/ManifestFile:.\\Release\\SimpleCIN2010.dll.intermediate.manifest\" \"/MANIFESTUAC:level='asInvoker' uiAccess='false'\" /DEBUG \"/PDB:C:\\Users\\XXX\\Documents\\Visual Studio 2010\\Projects\\CIN VC2010\\SimpleCIN2010\\SimpleCIN2010\\Release\\SimpleCIN2010.pdb\" /SUBSYSTEM:WINDOWS /OPT:REF /OPT:ICF /TLBID:1 /DYNAMICBASE /NXCOMPAT \"/IMPLIB:.\\Release\\SimpleCIN2010.lib\" /MACHINE:X86 /DLL .\\Release\\SimpleCIN2010.dll.embed.manifest.res \n    1&gt;  .\\Release\\SimpleCIN2010.obj \n    1&gt;LINK : warning LNK4075: ignoring '/INCREMENTAL' due to '/OPT:ICF' specification\n    1&gt;SimpleCIN2010.obj : warning LNK4075: ignoring '/EDITANDCONTINUE' due to '/OPT:ICF' specification\n    1&gt;     Creating library .\\Release\\SimpleCIN2010.lib and object .\\Release\\SimpleCIN2010.exp\n    1&gt;  Microsoft (R) Incremental Linker Version 10.00.40219.01\n    1&gt;  Copyright (C) Microsoft Corporation.  All rights reserved.\n    1&gt;  \n    1&gt;  \"/OUT:.\\Release\\SimpleCIN2010.dll\" /INCREMENTAL \"/LIBPATH:C:\\Program Files (x86)\\National Instruments\\LabVIEW 8.6\\cintools\" cin.obj labview.lib lvsb.lib kernel32.lib user32.lib gdi32.lib winspool.lib comdlg32.lib advapi32.lib shell32.lib ole32.lib oleaut32.lib uuid.lib odbc32.lib odbccp32.lib \"/DEF:C:\\Program Files (x86)\\National Instruments\\LabVIEW 8.6\\cintools\\lvsbmain.def\" /MANIFEST \"/ManifestFile:.\\Release\\SimpleCIN2010.dll.intermediate.manifest\" \"/MANIFESTUAC:level='asInvoker' uiAccess='false'\" /DEBUG \"/PDB:C:\\Users\\XXX\\Documents\\Visual Studio 2010\\Projects\\CIN VC2010\\SimpleCIN2010\\SimpleCIN2010\\Release\\SimpleCIN2010.pdb\" /SUBSYSTEM:WINDOWS /OPT:REF /OPT:ICF /TLBID:1 /DYNAMICBASE /NXCOMPAT \"/IMPLIB:.\\Release\\SimpleCIN2010.lib\" /MACHINE:X86 /DLL .\\Release\\SimpleCIN2010.dll.embed.manifest.res \n    1&gt;  .\\Release\\SimpleCIN2010.obj \n    1&gt;LINK : warning LNK4075: ignoring '/INCREMENTAL' due to '/OPT:ICF' specification\n    1&gt;SimpleCIN2010.obj : warning LNK4075: ignoring '/EDITANDCONTINUE' due to '/OPT:ICF' specification\n    1&gt;     Creating library .\\Release\\SimpleCIN2010.lib and object .\\Release\\SimpleCIN2010.exp\n    1&gt;  SimpleCIN2010.vcxproj -&gt; C:\\Users\\XXXX\\Documents\\Visual Studio 2010\\Projects\\CIN VC2010\\SimpleCIN2010\\SimpleCIN2010\\.\\Release\\SimpleCIN2010.dll\n    1&gt;  C:\\Program Files (x86)\\National Instruments\\LabVIEW 8.6\\cintools\\lvsbutil: error building resource file: 1\n    1&gt;C:\\Program Files (x86)\\MSBuild\\Microsoft.Cpp\\v4.0\\Microsoft.CppCommon.targets(183,5): error MSB3073: The command \"\"C:\\Program Files (x86)\\National Instruments\\LabVIEW 8.6\\cintools\\lvsbutil\" \"SimpleCIN2010\" -d \".\\Release\\\"\n    1&gt;C:\\Program Files (x86)\\MSBuild\\Microsoft.Cpp\\v4.0\\Microsoft.CppCommon.targets(183,5): error MSB3073: :VCEnd\" exited with code 2.\n       ========== Rebuild All: 0 succeeded, 1 failed, 0 skipped ==========`\n</code></pre>\n\n<p>I went into the command line to double check for double spacing or not enough. I read the other article that been posted and try some of the codes.  So if someone could tell me if I set up the command right please let me know. \nThanks</p>\n"}, {"tags": ["c++", "mingw", "wxwidgets", "ubuntu-16.04"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482955563, "post_id": 41368938, "comment_id": 69939490, "body": "Sure you need the <code>--prefix=</code> option?"}, {"owner": {"reputation": 13, "user_id": 4911614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3548af1aa21f466a89f9c8eee10c2ce?s=128&d=identicon&r=PG&f=1", "display_name": "Fatih Yaz\u0131c\u0131", "link": "https://stackoverflow.com/users/4911614/fatih-yaz%c4%b1c%c4%b1"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482955807, "post_id": 41368938, "comment_id": 69939598, "body": "As I said, I couldn&#39;t make wx-config select one or the other without prefix. Is there any other <i>proper</i> method of having multiple builds? If yes, I&#39;d appreciate that..."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482957545, "post_id": 41368938, "comment_id": 69940344, "body": "The <code>--prefix</code> option is intended you&#39;re going to install your library anywhere else than in the <code>&#47;usr&#47;lib</code> or <code>&#47;usr&#47;lib64</code> directories (along separate directories for <code>&#47;usr&#47;include</code> as well). Did you bother to read the autoconf documentation?"}, {"owner": {"reputation": 13, "user_id": 4911614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3548af1aa21f466a89f9c8eee10c2ce?s=128&d=identicon&r=PG&f=1", "display_name": "Fatih Yaz\u0131c\u0131", "link": "https://stackoverflow.com/users/4911614/fatih-yaz%c4%b1c%c4%b1"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1483006849, "post_id": 41368938, "comment_id": 69957025, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 I forgot to look at that particular documentation. But got my answer, though. Thanks anyway..."}], "answers": [{"tags": [], "owner": {"reputation": 18238, "user_id": 15275, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WNTZ3.jpg?s=128&g=1", "display_name": "VZ.", "link": "https://stackoverflow.com/users/15275/vz"}, "is_accepted": true, "score": 0, "last_activity_date": 1482960436, "creation_date": 1482960436, "answer_id": 41369949, "question_id": 41368938, "link": "https://stackoverflow.com/questions/41368938/handling-multiple-compilations-of-wxwidgets/41369949#41369949", "title": "Handling multiple compilations of wxWidgets", "body": "<p>In principle, <code>wx-config</code> is definitely supposed to be able to select between multiple builds of the same library (this is about 90% of its entire logic and purpose in life), but I'm afraid there might be a problem with <code>wx-config</code> logic for the build selection and <code>--host</code> option, which would be needed to select the right build in your case.</p>\n\n<p>I'm not sure myself because I actually never use <code>wx-config</code> to select between multiple builds and instead simply never install them at all and use the script from the build directory. I.e. what I'm certain does work is:</p>\n\n<pre class=\"lang-shell prettyprint-override\"><code>$ mkdir -p ~/build/wx/gtk\n$ cd $_\n$ ~/src/wx/configure # of course, you can add other options, if needed\n$ make -s\n$ mkdir ../msw\n$ cd $_\n$ ~/src/wx/configure --host=x86_64-w64-mingw32 --with-msw\n$ make -s\n$ cd ~/src/my/program\n$ make WX_CONFIG=~/build/wx/gtk/wx-config # or the MSW one\n</code></pre>\n\n<p>Using a wxWidgets build without installing it like this does waste some disk space (you can do <code>rm *.o</code> to reclaim most of it, of course -- just don't do <code>make clean</code> which would erase the libraries too), but otherwise it has only advantages:</p>\n\n<ol>\n<li>You don't need any special rights which are typically required to write to <code>/usr/local</code> or wherever.</li>\n<li>You can easily have as many builds as you need and choosing between them is explicit by just selecting the right <code>wx-config</code>.</li>\n<li>If anything goes wrong, you can just <code>rm -rf ~/build/wx/whatever</code> at any moment and start anew.</li>\n</ol>\n"}], "owner": {"reputation": 13, "user_id": 4911614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3548af1aa21f466a89f9c8eee10c2ce?s=128&d=identicon&r=PG&f=1", "display_name": "Fatih Yaz\u0131c\u0131", "link": "https://stackoverflow.com/users/4911614/fatih-yaz%c4%b1c%c4%b1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 41369949, "answer_count": 1, "score": 0, "last_activity_date": 1482960436, "creation_date": 1482955348, "last_edit_date": 1482956590, "question_id": 41368938, "link": "https://stackoverflow.com/questions/41368938/handling-multiple-compilations-of-wxwidgets", "title": "Handling multiple compilations of wxWidgets", "body": "<p>I am planning to develop a small scale gui application using wxWidgets on Ubuntu 16.10. I have downloaded the source package of version 3.1.0 and I am able to build the package succesfully for the native platform and for Windows with MinGW. </p>\n\n<p>However, the problem is that I could not figure out what prefixes I should pass to the <code>../configure --prefix=</code> command.</p>\n\n<p>If I do not pass anything for prefixes and then install both of them using <code>make install</code>, 2nd one overrides the 1st one. Although wx-config shows the other configuration as \"Also found in /usr/local...\", I am not able to select it using <code>--toolkit=gtk2</code> option, wx-config says that there is no such build. </p>\n\n<p>So basically, what should be the prefixes for each build according to linux naming rules and wxWidgets conventions in general?</p>\n\n<p>Note: builds are: <code>gtk2-unicode-static-3.1</code> and <code>x86_64-w64-mingw32-msw-unicode-static-3.1</code></p>\n"}, {"tags": ["c++", "opencl", "gpgpu", "arrayfire"], "comments": [{"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 1, "creation_date": 1482956065, "post_id": 41368834, "comment_id": 69939718, "body": "<a href=\"https://github.com/arrayfire/arrayfire\" rel=\"nofollow noreferrer\">github.com/arrayfire/arrayfire</a> -- the source is freely available. Why not just read it?"}, {"owner": {"reputation": 7526, "user_id": 4108376, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/163807162a115b27e50f5f5f2b90de26?s=128&d=identicon&r=PG&f=1", "display_name": "tmlen", "link": "https://stackoverflow.com/users/4108376/tmlen"}, "edited": false, "score": 0, "creation_date": 1483025487, "post_id": 41368834, "comment_id": 69967281, "body": "OpenCL 2.2 has support for kernels written in a subset of C++14. (without virtual functions, new/delete, exceptions, etc.)"}], "answers": [{"tags": [], "owner": {"reputation": 658, "user_id": 2108046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d3fc0b5573d8bf49d788f942d49ddb7?s=128&d=identicon&r=PG", "display_name": "Ruyk", "link": "https://stackoverflow.com/users/2108046/ruyk"}, "is_accepted": false, "score": 2, "last_activity_date": 1483025290, "creation_date": 1483025290, "answer_id": 41382642, "question_id": 41368834, "link": "https://stackoverflow.com/questions/41368834/is-it-possible-to-run-piece-of-pure-c-code-in-gpu/41382642#41382642", "title": "Is it possible to run piece of pure C++ code in GPU", "body": "<p>You cannot really call C++ Host code from the device using standard OpenCL.\nYou can use <a href=\"https://www.khronos.org/sycl\" rel=\"nofollow noreferrer\">SYCL</a>, the Khronos standard for single-source C++ programming. SYCL allows to compile C++ directly into device code without requiring the OpenCL strings. You can call any C++ function from inside a SYCL kernel (as long as the source code is available). <a href=\"http://sycl.tech/\" rel=\"nofollow noreferrer\">SYCL.tech</a> has more links and updated information.</p>\n"}], "owner": {"reputation": 3107, "user_id": 4131673, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/100000565112046/picture?type=large", "display_name": "jaskmar", "link": "https://stackoverflow.com/users/4131673/jaskmar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 776, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1517667550, "creation_date": 1482954837, "last_edit_date": 1482955771, "question_id": 41368834, "link": "https://stackoverflow.com/questions/41368834/is-it-possible-to-run-piece-of-pure-c-code-in-gpu", "title": "Is it possible to run piece of pure C++ code in GPU", "body": "<p>I don't know OpenCL very much but I know C/C++ API requires programmer to provide OpenCL code as a string. But lately I discovered <strong>ArrayFire</strong> library that doesn't require string-code to invoke some calculations. I wondered how is it working (it is open source but the code is a bit confusing). Would it be possible to write parallel for with OpenCL backend that invokes any piece of compiled (x86 for example) code like following:</p>\n\n<pre><code>template &lt;typename F&gt;\nvoid parallel_for(int starts, int ends, F task) //API\n{ /*some OpenCL magic */ }\n//...\nparallel_for(0, 255, [&amp;tab](int i){ tab[i] *= 0.7; } ); //using\n</code></pre>\n\n<p>PS: I know I am for 99% too optimistic</p>\n"}, {"tags": ["c++", "c++11", "interrupt", "getch"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 5, "creation_date": 1482954725, "post_id": 41368759, "comment_id": 69939140, "body": "No, this is an antiquated function from the dark ages that should not be used any more! You should be <code>epoll</code>ing on <code>STDIN</code>."}, {"owner": {"reputation": 11, "user_id": 7327796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2e4ed474a10580730e85dee993c0f98?s=128&d=identicon&r=PG&f=1", "display_name": "user7327796", "link": "https://stackoverflow.com/users/7327796/user7327796"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1482955004, "post_id": 41368759, "comment_id": 69939244, "body": "I&#39;m using getch(); to retrieve the ascii values of the keys. Do those do the same?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1482955120, "post_id": 41368759, "comment_id": 69939293, "body": "Yes there are lots of ways to poll <i>standard input</i> (or any other file descriptor) for activity and to deal with data received therein. <code>getch()</code> is one of them, but it has extreme limitations, as you&#39;ve discovered. It&#39;s not even standard; it was a DOS function, and (I think) ncurses reproduces it."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1482956882, "post_id": 41368759, "comment_id": 69940054, "body": "You should use platform specific API to determine key press and key release.  Many keyboard codes cannot fit within the ASCII character code (such as arrow keys, shift and control)."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7327796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2e4ed474a10580730e85dee993c0f98?s=128&d=identicon&r=PG&f=1", "display_name": "user7327796", "link": "https://stackoverflow.com/users/7327796/user7327796"}, "edited": false, "score": 0, "creation_date": 1482962057, "post_id": 41369466, "comment_id": 69942176, "body": "I can get a general understanding of what is being said in the code, but could you comment each of steps with some light explanation so I can truly understand what is happening? I&#39;d be really appreciated!"}, {"owner": {"reputation": 3189, "user_id": 7016303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dYmXc.jpg?s=128&g=1", "display_name": "Mikel F", "link": "https://stackoverflow.com/users/7016303/mikel-f"}, "reply_to_user": {"reputation": 11, "user_id": 7327796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2e4ed474a10580730e85dee993c0f98?s=128&d=identicon&r=PG&f=1", "display_name": "user7327796", "link": "https://stackoverflow.com/users/7327796/user7327796"}, "edited": false, "score": 0, "creation_date": 1482962510, "post_id": 41369466, "comment_id": 69942330, "body": "@user7327796 I added some comments to the code... do they clear it up sufficiently?"}], "tags": [], "owner": {"reputation": 3189, "user_id": 7016303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dYmXc.jpg?s=128&g=1", "display_name": "Mikel F", "link": "https://stackoverflow.com/users/7016303/mikel-f"}, "is_accepted": false, "score": 0, "last_activity_date": 1482962472, "last_edit_date": 1482962472, "creation_date": 1482957921, "answer_id": 41369466, "question_id": 41368759, "link": "https://stackoverflow.com/questions/41368759/c-interrupt-or-cancel-getch/41369466#41369466", "title": "C++ Interrupt or Cancel getch();", "body": "<p>This code will allow you to do what you want, but it does not take advantage of newer language features, nor is it portable.</p>\n\n<pre><code>events[0] = CreateEvent(NULL,FALSE,FALSE,NULL); // Obtain a Windows handle to use with a timer\nevents[1] = GetStdHandle(STD_INPUT_HANDLE); // Get a Windows handle to the keyboard input\n\n    // Create a timer object that will strobe an event every ten seconds \n    DemoTimer = timeSetEvent(10000,0,(LPTIMECALLBACK)events[0],NULL,TIME_PERIODIC|TIME_CALLBACK_EVENT_SET); \n    while (done == false)\n    {\n        // Wait for either the timer to expire or a key press event\n        dwResult = WaitForMultipleObjects(2,events,false,INFINITE);\n\n        if (dwResult == WAIT_FAILED)\n        {\n            dwResult = GetLastError();\n            done = true;\n        }\n        else\n        {\n        if (dwResult == WAIT_OBJECT_0) // WAIT_OBJECT_0 corresponds to the timer event\n            {\n                DoTimeoutEvent();\n            }\n            else\n            {            \n                   // Any other event will be a keypress\n\n                    if (_kbhit() != 0) // Verify that a key was pressed so that we do not block when we query for a value\n                    {\n                        int val = _getch();\n                        // At this point, we process the key value\n                    }\n                }\n            }\n        }\n</code></pre>\n\n<p>You are not going to be able to break out of <code>getch()</code>. The best bet is to check for data in the STDIN buffer and only make the call after you have something to read. This example uses <code>kbhit()</code>, but instead of using a polling loop where it periodically checks for buffer activity, it hooks the underlying handle to the input stream and waits for activity. </p>\n\n<p>Using a second thread as a one-shot timer is also not the most efficient way to go. The timer in this code uses a Microsoft specific object. It is coded to fire off every ten seconds, but you can certainly change that.</p>\n"}, {"tags": [], "owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "is_accepted": false, "score": 0, "last_activity_date": 1482961018, "last_edit_date": 1495541785, "creation_date": 1482961018, "answer_id": 41370069, "question_id": 41368759, "link": "https://stackoverflow.com/questions/41368759/c-interrupt-or-cancel-getch/41370069#41370069", "title": "C++ Interrupt or Cancel getch();", "body": "<p>The operating system must provide access to the keyboard. So on Windows for example, the best is probably to deal with input on the operating system's terms as described <a href=\"https://stackoverflow.com/a/2441480/1460794\">here</a>.</p>\n\n<p>With the standard c++ library functions one can read characters from the <code>std::cin</code> stream. The problem is that those characters are only passed from the operating system after the user presses <kbd>Enter</kbd> (which also adds a newline <code>\\n</code> character).</p>\n\n<p>If you can tolerate the need to press the return key after a character is typed then the following could work. This program executes <a href=\"http://en.cppreference.com/w/cpp/io/basic_istream/get\" rel=\"nofollow noreferrer\"><code>get()</code></a> in a separate thread so that it doesn't block the program if no key is pressed or if <kbd>Enter</kbd> is not pressed and only uses standard c++11. This program will however not complete (i.e. join the thread) unless the user types <code>q</code> or <a href=\"https://stackoverflow.com/a/7373799/1460794\">sends the <code>EOF</code></a>.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;chrono&gt;\n#include &lt;thread&gt;\n#include &lt;mutex&gt;\n#include &lt;condition_variable&gt;\n#include &lt;queue&gt;\n\nstd::condition_variable cv{};\nstd::mutex mtx;\nstd::queue&lt;char&gt; char_queue{};\nbool quit{false};\n\nvoid add_chars_to_queue()\n{\n    char c{};\n    for(;;) {\n        c = static_cast&lt;char&gt;(std::cin.get());\n        if(!std::cin) {\n            std::unique_lock&lt;std::mutex&gt; lck{mtx};\n            quit = true;\n            cv.notify_all();\n            return;\n        }\n        if(c == 'q' || c == 'Q') {\n            std::unique_lock&lt;std::mutex&gt; lck{mtx};\n            quit = true;\n            char_queue.push(c);\n            cv.notify_all();\n            return;\n        }\n        if(c == '\\n')\n            continue;\n        std::unique_lock&lt;std::mutex&gt; lck{mtx};\n        char_queue.push(c);\n        cv.notify_all();\n    }\n}\n\n\nstd::string get_key_or_wait(std::chrono::system_clock::duration d)\n{\n    std::unique_lock&lt;std::mutex&gt; lck{mtx};\n    for(int i{10}; i &gt; 0; --i) {\n        cv.wait_for(lck, d / 10., []() {return quit || !char_queue.empty(); });\n        if(!char_queue.empty())\n            break;\n        if(quit)\n            return{\"Quitting.\\n\"};\n        std::cout &lt;&lt; \"Countdown at \" &lt;&lt; i &lt;&lt; '\\n';\n    }\n    std::string return_string{};\n    if(!char_queue.empty()) {\n        return_string += \"Obtained a character from the stream before the timer ran out. Character was: \";\n        return_string += char_queue.front();\n        char_queue.pop();\n    }\n    else {\n        return_string = \"Timer ran out.\";\n    }\n\n    return return_string;\n}\n\nint main()\n{\n    std::thread get_chars{[]() {add_chars_to_queue(); }};\n\n    std::cout &lt;&lt; \"Type q to exit.\\n\";\n    for(int i{}; i &lt; 3; ++i) {\n        {\n            std::lock_guard&lt;std::mutex&gt; lck{mtx};\n            if(quit)\n                break;\n        }\n        std::cout &lt;&lt; \"Waiting for key press followed by &lt;enter&gt;.\\n\"; \n        std::cout &lt;&lt; get_key_or_wait(std::chrono::seconds(10)) &lt;&lt; '\\n';\n    }\n\n    get_chars.join();\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Type q to exit.\nWaiting for key press followed by &lt;enter&gt;.\nCountdown at 10\nCountdown at 9\nCountdown at 8\na\nObtained a character from the stream before the timer ran out. Character was: a\nWaiting for key press followed by &lt;enter&gt;.\nCountdown at 10\nCountdown at 9\nCountdown at 8\nCountdown at 7\nCountdown at 6\nCountdown at 5\nCountdown at 4\nCountdown at 3\nCountdown at 2\nCountdown at 1\nTimer ran out.\nWaiting for key press followed by &lt;enter&gt;.\nCountdown at 10\nCountdown at 9\nCountdown at 8\nbCountdown at 7\nCountdown at 6\nCountdown at 5\n\nObtained a character from the stream before the timer ran out. Character was: b\nq\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 821, "user_id": 4791654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-f6OIWNb562I/AAAAAAAAAAI/AAAAAAAAACY/Kuh1tIUZLbk/photo.jpg?sz=128", "display_name": "Tyler Lewis", "link": "https://stackoverflow.com/users/4791654/tyler-lewis"}, "is_accepted": false, "score": 0, "last_activity_date": 1482961551, "creation_date": 1482961551, "answer_id": 41370157, "question_id": 41368759, "link": "https://stackoverflow.com/questions/41368759/c-interrupt-or-cancel-getch/41370157#41370157", "title": "C++ Interrupt or Cancel getch();", "body": "<p>As others have mentioned, getch() is platform specific. This would be a short example to do what you want to do. The basic idea is to run a non-blocking getch() in an event loop in a separate thread, and exit the event loop via a bool flag when the time limit is up. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include &lt;chrono&gt;\n#include &lt;future&gt;\n#include &lt;conio.h&gt;\n#include &lt;Windows.h&gt;\n\n\nint nonBlockingGetChar();\nint nonBlockingGetCharTask();\n\n//This should be atomic. but I'm skipping it right here'\nstatic bool getCharAlive{ false };\n\nint main()\n{\n    //Timeout\n    static const long long TIMEOUT{ 1000 * 5 };\n\n    auto startTime = std::chrono::high_resolution_clock::now();\n    auto endTime = std::chrono::high_resolution_clock::now();\n    long long elapsedMilliseconds = std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(endTime - startTime).count();\n    std::future&lt;int&gt; getCharHandle{ std::async(std::launch::async, nonBlockingGetCharTask) };\n    do {\n        //Other code here\n        endTime = std::chrono::high_resolution_clock::now();\n        elapsedMilliseconds = std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(endTime - startTime).count();\n        if (elapsedMilliseconds &gt;= TIMEOUT) {\n            //If the timer hit a certain amount, cancel the getChar task\n            getCharAlive = false;\n            while (getCharHandle.wait_for(std::chrono::seconds(0)) != std::future_status::ready) {\n                //Wait for getCharAlive to exit\n            }\n            std::cout &lt;&lt; \"User did not enter anything in the alotted time\" &lt;&lt; std::endl;\n            break; //Move on to next step\n        } else {\n            //Otherwise, check if the getCharTask returned anything\n            if (getCharHandle.wait_for(std::chrono::seconds(0)) == std::future_status::ready) {\n                int userInput{ getCharHandle.get() };\n                if (userInput == -1) {\n                    std::cout &lt;&lt; \"User did not enter anything in the alotted time\" &lt;&lt; std::endl;\n                } else {\n                    std::cout &lt;&lt; \"User entered keycode \" &lt;&lt; userInput &lt;&lt; std::endl;\n                    //Do whatever with the user input\n                }\n                break; //Move on to next step\n            }\n        }\n    } while (true);\n\n    //And so on to step 2\n}\n\nint nonBlockingGetChar()\n{\n    if (_kbhit()) {\n        return _getch();\n    } else {\n        return -1;\n    }\n}\n\nint nonBlockingGetCharTask()\n{\n    getCharAlive = true;\n    do {\n        int returnValue{ nonBlockingGetChar() };\n        if (returnValue != -1) {\n            return returnValue;\n        }\n    } while (getCharAlive);\n    return -1;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7327796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2e4ed474a10580730e85dee993c0f98?s=128&d=identicon&r=PG&f=1", "display_name": "user7327796", "link": "https://stackoverflow.com/users/7327796/user7327796"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2314, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1482962830, "creation_date": 1482954518, "last_edit_date": 1482962830, "question_id": 41368759, "link": "https://stackoverflow.com/questions/41368759/c-interrupt-or-cancel-getch", "title": "C++ Interrupt or Cancel getch();", "body": "<p>I have a simple timer. It's in a function running in a thread separate from the main. Using <code>std::future</code>, the function returns a simple bool that says whether the timer has hit a specific number or not. </p>\n\n<p>I am using <code>getch();</code> to see if the user pressed a letter key. </p>\n\n<p>If the timer returns true, that it hit a designated number, I need to cancel <code>getch()</code>; and move to the next step in the code. Moving to the next step is easy.</p>\n\n<p>It's been 2 weeks and I can not find a solution to my problem.</p>\n\n<p><strong>The Problem:</strong> How on earth, can I interrupt or cancel a call to <code>getch();</code>? Is this even possible?</p>\n\n<p>I'm using <code>getch();</code> to identify which letter keys were pressed.</p>\n\n<p>C++11 Visual Studio.</p>\n"}, {"tags": ["c++", "c++11", "move-semantics"], "answers": [{"tags": [], "owner": {"reputation": 59687, "user_id": 951890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01c3ef0adae5153378a3f602ca068a03?s=128&d=identicon&r=PG", "display_name": "Vaughn Cato", "link": "https://stackoverflow.com/users/951890/vaughn-cato"}, "is_accepted": true, "score": 8, "last_activity_date": 1482955059, "last_edit_date": 1482955059, "creation_date": 1482954390, "answer_id": 41368729, "question_id": 41368675, "link": "https://stackoverflow.com/questions/41368675/rvalue-reference-binding-to-an-lvalue-for-stdfunction-types/41368729#41368729", "title": "rvalue reference binding to an lvalue for std::function types", "body": "<p>Since <code>lamb</code> is a lambda and not a <code>std::function</code>, a temporary <code>std::function</code> has to be created and passed to <code>bar()</code>.  The temporary binds to the rvalue reference.</p>\n\n<p>Your code is equivalent to this:</p>\n\n<pre><code>auto lamb = [](){};\nfoo.bar(FunctionType(lamb));\n</code></pre>\n\n<p>You would get a compile error if you did this instead:</p>\n\n<pre><code>FunctionType func = [](){};\nfoo.bar(func);\n</code></pre>\n"}], "owner": {"reputation": 440, "user_id": 1595171, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e89f94b6b4dc86bc7bae0f3aaa2459fe?s=128&d=identicon&r=PG", "display_name": "winterlight", "link": "https://stackoverflow.com/users/1595171/winterlight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 41368729, "answer_count": 1, "score": 4, "last_activity_date": 1482955059, "creation_date": 1482954139, "last_edit_date": 1482954663, "question_id": 41368675, "link": "https://stackoverflow.com/questions/41368675/rvalue-reference-binding-to-an-lvalue-for-stdfunction-types", "title": "rvalue reference binding to an lvalue for std::function types", "body": "<p>Why there is no compilation error at <code>(@)</code> in below code? I thought <code>lamb</code> is an lvalue so it will not get bound to an rvalue reference.</p>\n\n<pre><code>using FunctionType = std::function&lt;void()&gt;;\nusing IntType = int;\nstruct Foo {\n    void bar(FunctionType&amp;&amp;) {}\n    void baz(IntType&amp;&amp;) {}\n};\n\nFoo foo;\nfoo.bar([]() {}); //OK\nauto lamb = []() {};\nfoo.bar(lamb); //(@) No compilation error?!\nfoo.baz(5); //OK\nint i = 5;\nfoo.baz(i); //Error\n</code></pre>\n"}, {"tags": ["c++", "xcode", "macos", "awesomium"], "comments": [{"owner": {"reputation": 96, "user_id": 4503836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4b19602c5e6b3e8ac5d155a70175d0c?s=128&d=identicon&r=PG&f=1", "display_name": "Nhan Nguyen Tri Thanh", "link": "https://stackoverflow.com/users/4503836/nhan-nguyen-tri-thanh"}, "edited": false, "score": 0, "creation_date": 1482954434, "post_id": 41368591, "comment_id": 69939032, "body": "Maybe this is duplicate question: <a href=\"http://stackoverflow.com/questions/20361445/deploying-to-os-x-10-6-and-fobj-arc-is-not-supported-on-platforms-using-the-le\" title=\"deploying to os x 10 6 and fobj arc is not supported on platforms using the le\">stackoverflow.com/questions/20361445/&hellip;</a>"}, {"owner": {"reputation": 539, "user_id": 1015608, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/o62Ba.jpg?s=128&g=1", "display_name": "nicktendo", "link": "https://stackoverflow.com/users/1015608/nicktendo"}, "reply_to_user": {"reputation": 96, "user_id": 4503836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4b19602c5e6b3e8ac5d155a70175d0c?s=128&d=identicon&r=PG&f=1", "display_name": "Nhan Nguyen Tri Thanh", "link": "https://stackoverflow.com/users/4503836/nhan-nguyen-tri-thanh"}, "edited": false, "score": 0, "creation_date": 1482954587, "post_id": 41368591, "comment_id": 69939089, "body": "Thank you for the comment.  Unfortunately, Awesomium requires the architecture settings to be 32 bit only, per the Awesomium OS X setup guide:  <a href=\"http://wiki.awesomium.com/getting-started/setting-up-on-macosx.html\" rel=\"nofollow noreferrer\">wiki.awesomium.com/getting-started/setting-up-on-macosx.html</a>"}], "owner": {"reputation": 539, "user_id": 1015608, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/o62Ba.jpg?s=128&g=1", "display_name": "nicktendo", "link": "https://stackoverflow.com/users/1015608/nicktendo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 140, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1482964443, "creation_date": 1482953825, "last_edit_date": 1482964443, "question_id": 41368591, "link": "https://stackoverflow.com/questions/41368591/error-fobjc-arc-is-not-supported-on-platforms-using-the-legacy-runtime", "title": "error: -fobjc-arc is not supported on platforms using the legacy runtime", "body": "<p>I am attempting to build this tutorial from Awesomium in XCode:  <a href=\"http://wiki.awesomium.com/tutorials/tutorial-2-displaying-your-first-page.html\" rel=\"nofollow noreferrer\">http://wiki.awesomium.com/tutorials/tutorial-2-displaying-your-first-page.html</a></p>\n\n<p>I have set the Architectures to 32 Bit Intel, and the Valid Architectures set to i386 only as instructed on this page:  <a href=\"http://wiki.awesomium.com/getting-started/setting-up-on-macosx.html\" rel=\"nofollow noreferrer\">http://wiki.awesomium.com/getting-started/setting-up-on-macosx.html</a></p>\n\n<p>When I build get the following error: </p>\n\n<pre><code>error: -fobjc-arc is not supported on platforms using the legacy runtime\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["c++", "winapi"], "answers": [{"tags": [], "owner": {"reputation": 96, "user_id": 4503836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4b19602c5e6b3e8ac5d155a70175d0c?s=128&d=identicon&r=PG&f=1", "display_name": "Nhan Nguyen Tri Thanh", "link": "https://stackoverflow.com/users/4503836/nhan-nguyen-tri-thanh"}, "is_accepted": true, "score": 4, "last_activity_date": 1482954003, "last_edit_date": 1495539963, "creation_date": 1482954003, "answer_id": 41368642, "question_id": 41368419, "link": "https://stackoverflow.com/questions/41368419/registerrawinputdevices-function-usage/41368642#41368642", "title": "RegisterRawInputDevices function usage", "body": "<p>You must catch <code>WM_INPUT</code> in the <code>WindowProc</code> callback function.\n<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms633573(v=vs.85).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/windows/desktop/ms633573(v=vs.85).aspx</a></p>\n\n<p>And retrieve the <code>RAWINPUT</code> structure, which contains the raw input from the device.\n<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms645562(v=vs.85).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/windows/desktop/ms645562(v=vs.85).aspx</a></p>\n\n<p>Maybe this link will help you. Just remember that the questioner in this link went wrong. You need to read comment to get the right way. \n<a href=\"https://stackoverflow.com/questions/38921656/get-wm-input-from-unity-window\">Get WM_INPUT from Unity window</a></p>\n"}], "owner": {"reputation": 690, "user_id": 5690756, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-dFRIW9aDfSA/AAAAAAAAAAI/AAAAAAAAEKE/hh5T3sN5Dog/photo.jpg?sz=128", "display_name": "kenarsuleyman", "link": "https://stackoverflow.com/users/5690756/kenarsuleyman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1275, "favorite_count": 1, "accepted_answer_id": 41368642, "answer_count": 1, "score": 1, "last_activity_date": 1482954003, "creation_date": 1482952792, "last_edit_date": 1482952904, "question_id": 41368419, "link": "https://stackoverflow.com/questions/41368419/registerrawinputdevices-function-usage", "title": "RegisterRawInputDevices function usage", "body": "<p>I have several questions about <code>RegisterRawInputDevices()</code> function. I mean obviously it is for registering raw input device but the real question is how can I use that registered raw input device? </p>\n\n<p>Can I monitor <code>WM_INPUT</code> messages with this device? I couldn't find any examples.</p>\n\n<p>On MSDN every parameter of function is input parameter I didn't see any output parameter for monitoring.</p>\n"}, {"tags": ["python", "c++", "tensorflow", "ipc", "reinforcement-learning"], "comments": [{"owner": {"reputation": 53055, "user_id": 419116, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RmTuo.jpg?s=128&g=1", "display_name": "Yaroslav Bulatov", "link": "https://stackoverflow.com/users/419116/yaroslav-bulatov"}, "edited": false, "score": 1, "creation_date": 1482950993, "post_id": 41367975, "comment_id": 69937564, "body": "Maybe do the same as ALE, Atari emulator? (wrap the emulator with Python)"}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1482954878, "post_id": 41367975, "comment_id": 69939202, "body": "Welcome to Stack Overflow. Your post  in its current form is too broad, would result in answers based primarily on opinion, and is not a good fit for Stack Overflow. Please visit the <a href=\"http://stackoverflow.com/help\">help center</a> and read the section <a href=\"http://stackoverflow.com/help/how-to-ask\">how do I ask a good question</a>."}], "owner": {"reputation": 41, "user_id": 1576490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0c1dab7150ddd252761706124693d6c?s=128&d=identicon&r=PG", "display_name": "user1576490", "link": "https://stackoverflow.com/users/1576490/user1576490"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 302, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1482950820, "creation_date": 1482950820, "question_id": 41367975, "link": "https://stackoverflow.com/questions/41367975/connecting-python-tensorflow-to-an-emulator-in-c", "title": "Connecting Python + Tensorflow to an Emulator in C++", "body": "<p>I am trying to do deep reinforcement learning on the GameBoy platform, similar to what Google DeepMind has done on the Atari platform (<a href=\"https://deepmind.com/research/dqn/\" rel=\"nofollow noreferrer\">https://deepmind.com/research/dqn/</a>). For this purpose, I found a GameBoy Emulator in C++, and I want to do the reinforcement learning parts using the Python TensorFlow API. The system needs to do at least the following:</p>\n\n<ul>\n<li>Send the current video frame from the Emulator to the Neural Network (NN) constructed using the TensorFlow API</li>\n<li>Using the NN predict what action the agent should make (which key it should press)</li>\n<li>Send this key press back to the emulator</li>\n<li>Get back from the emulator the new game score</li>\n<li>Retrain the NN</li>\n</ul>\n\n<p>My questions is how should I do this communication between the emulator written in C++ and the bits doing reinforcement learning using Python plus TensorFlow?</p>\n\n<p>So far I have considered the following options:</p>\n\n<p>1) Use the C++ TensorFlow API. However, from my understanding this can only run already constructed graphs, so it would be rather cumbersome to construct the graph in Python then run it using the C++ API. Furthermore the documentation for the C++ API is not very good. </p>\n\n<p>2) Do some kind of OS piping between the C++ and Python parts. </p>\n\n<p>3) Embed Python into C++ like this: <a href=\"https://docs.python.org/3.3/extending/embedding.html\" rel=\"nofollow noreferrer\">https://docs.python.org/3.3/extending/embedding.html</a> </p>\n\n<p>Which of these would be the best way to do it? Are there other options I haven't considered?</p>\n"}, {"tags": ["c++", "modularity"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482949578, "post_id": 41367674, "comment_id": 69936873, "body": "You can statically link everything?"}, {"owner": {"reputation": 1518, "user_id": 2434628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f694c7757c0085ac1f0ed88d960ff657?s=128&d=identicon&r=PG", "display_name": "AresCaelum", "link": "https://stackoverflow.com/users/2434628/arescaelum"}, "edited": false, "score": 0, "creation_date": 1482949646, "post_id": 41367674, "comment_id": 69936909, "body": "From my tracking there is no way for a .cpp file to add itself to main, all .cpp files need some form of header file attached to it...  you could look at: <a href=\"https://www.tutorialspoint.com/cplusplus/cpp_inheritance.htm\" rel=\"nofollow noreferrer\">tutorialspoint.com/cplusplus/cpp_inheritance.htm</a>  for an example..."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1482949699, "post_id": 41367674, "comment_id": 69936932, "body": "<i>&quot;all .cpp files need some form of header file attached to it&quot;</i> The main program can expose a registration interface."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482949702, "post_id": 41367674, "comment_id": 69936936, "body": "<i>&quot;How it is done in Linux kernel? I know simple adding .c files makes them work somehow.&quot;</i> The kernel module needs to be compiled as a module to add it. These kernel modules need to provide a certain interface, to make that working."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482949790, "post_id": 41367674, "comment_id": 69936974, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 <i>&quot;The kernel needs to be recompiled if a new kernel module is added&quot;</i> Does it? What about <code>modprobe</code>?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1482949825, "post_id": 41367674, "comment_id": 69936984, "body": "Are you talking <i>dynamic</i> libraries or <i>static</i> libraries?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1482949863, "post_id": 41367674, "comment_id": 69937003, "body": "@Lightness I probably worded that bad. Not the kernel needs to be compiled but the new modules."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1482949991, "post_id": 41367674, "comment_id": 69937063, "body": "The operating system has functionality for finding dynamic libraries.  The dynamic libraries have a &quot;table of contents&quot; listing the functionality.  Your program may have to tell the OS where to look for the dynamic library."}, {"owner": {"reputation": 77, "user_id": 7224463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8eec9858fd4fcc4e1759b0096ea486d2?s=128&d=identicon&r=PG&f=1", "display_name": "Sion0", "link": "https://stackoverflow.com/users/7224463/sion0"}, "edited": false, "score": 0, "creation_date": 1482950602, "post_id": 41367674, "comment_id": 69937356, "body": "I understand how to do it with dynamic loading libraries. But now I am making monolithic program. There are plenty of options in linux kernel config. Enabling some of them simple adds some .c files to compilation (drivers for example). And they work somehow..."}, {"owner": {"reputation": 2113, "user_id": 1927176, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d4YlH.jpg?s=128&g=1", "display_name": "fnc12", "link": "https://stackoverflow.com/users/1927176/fnc12"}, "edited": false, "score": 0, "creation_date": 1482953098, "post_id": 41367674, "comment_id": 69938451, "body": "Just wait for C++17 modules (modules do not exist in standard but exist in standard specifications sheet. So it means clang++ will probably have modules implemented"}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 7224463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8eec9858fd4fcc4e1759b0096ea486d2?s=128&d=identicon&r=PG&f=1", "display_name": "Sion0", "link": "https://stackoverflow.com/users/7224463/sion0"}, "edited": false, "score": 0, "creation_date": 1482951460, "post_id": 41367968, "comment_id": 69937764, "body": "Thanks! I need to test this! I understand NewModule.cpp but not totally sure I understand App class... Is it singleton of some kind? How it initialized..? Need some time... Thanks again!"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 77, "user_id": 7224463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8eec9858fd4fcc4e1759b0096ea486d2?s=128&d=identicon&r=PG&f=1", "display_name": "Sion0", "link": "https://stackoverflow.com/users/7224463/sion0"}, "edited": false, "score": 0, "creation_date": 1482951661, "post_id": 41367968, "comment_id": 69937866, "body": "@Sion0 Yes it&#39;s a <i>Singleton</i> as I mentioned. It&#39;s initialized at <code>static App theInstance;</code>"}, {"owner": {"reputation": 28373, "user_id": 4926357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f559694d3ca65b39220166b865276d?s=128&d=identicon&r=PG&f=1", "display_name": "A.S.H", "link": "https://stackoverflow.com/users/4926357/a-s-h"}, "edited": false, "score": 0, "creation_date": 1482951805, "post_id": 41367968, "comment_id": 69937931, "body": "I dont know if things have changed with C++11, but I have used this paradigm long ago and AFAIK the linker ignored the <code>NewModule::instance</code> seeing it was not utilized explicitly anywhere, so we had to add some code such as <code>forceLink</code> that just references these static instances, in order to force the linker construct them so they register themselves."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 28373, "user_id": 4926357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f559694d3ca65b39220166b865276d?s=128&d=identicon&r=PG&f=1", "display_name": "A.S.H", "link": "https://stackoverflow.com/users/4926357/a-s-h"}, "edited": false, "score": 0, "creation_date": 1482951984, "post_id": 41367968, "comment_id": 69938004, "body": "@A.S.H May be that&#39;s necessary, IDK. But what I know that for instance google test test classes work in a similar way and I didn&#39;t need to specify such linker option."}, {"owner": {"reputation": 77, "user_id": 7224463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8eec9858fd4fcc4e1759b0096ea486d2?s=128&d=identicon&r=PG&f=1", "display_name": "Sion0", "link": "https://stackoverflow.com/users/7224463/sion0"}, "edited": false, "score": 0, "creation_date": 1482962858, "post_id": 41367968, "comment_id": 69942449, "body": "Seems like it works like expected, thanks. I also tried to figure out how module registration implemented in Linux kernel but I am not cool enough for such things. <a href=\"https://www.quora.com/Init-Call-Mechanism-in-the-Linux-Kernel-When-the-module-in-loaded-in-the-kernel-then-module-init-function-gets-called-How-this-call-happen-internally\" rel=\"nofollow noreferrer\">link</a>  - something about symbol exporting..."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 1, "last_activity_date": 1482950797, "creation_date": 1482950797, "answer_id": 41367968, "question_id": 41367674, "link": "https://stackoverflow.com/questions/41367674/c-cpp-files-as-modules/41367968#41367968", "title": "C++ cpp files as modules", "body": "<p>You can add new <code>.cpp</code> files to a statically linked application without changing the existing code using a registration interface that is exposed from the main application (singleton).</p>\n\n<p>Something like </p>\n\n<p>App.h:</p>\n\n<pre><code> struct IModule {\n     virtual void init() = 0;\n     virtual ~IModule() {}\n };\n\n class App {\n public:\n      void registerModule(IModule* newModule); // Stores the interface\n                                               // pointer of an additional\n                                               // module\n      static App&amp; instance() {\n           static App theInstance;\n           return theInstance;\n      }\n };\n</code></pre>\n\n<p>NewModule.cpp:</p>\n\n<pre><code> #include \"App.h\"\n\n class NewModule : public IModule {\n public:\n      void init();\n private:\n      NewModule() {\n          App::getInstance().registerModule(this);\n      }\n\n      static NewModule instance;\n };\n\n NewModule NewModule::instance;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11973, "user_id": 1419315, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e13603f86a9561d16a944963943fb8a9?s=128&d=identicon&r=PG", "display_name": "JohnB", "link": "https://stackoverflow.com/users/1419315/johnb"}, "is_accepted": false, "score": 2, "last_activity_date": 1482954877, "last_edit_date": 1482954877, "creation_date": 1482952666, "answer_id": 41368387, "question_id": 41367674, "link": "https://stackoverflow.com/questions/41367674/c-cpp-files-as-modules/41368387#41368387", "title": "C++ cpp files as modules", "body": "<p>You can use a static dummy variable inside every cpp file and initialize it by a lambda doing the initialization and registration. Trivial example:</p>\n\n<pre><code>// registration.h\n\nvoid register_cpp (std::string name);\nvoid print_cpps ();\n\n// registration.cpp\nnamespace {\n   std::vector&lt;std::string&gt; &amp; names () {\n      static std::vector&lt;std::string&gt; names_ {};\n      return names_;\n   }\n}\n\nvoid register_cpp (std::string name) {\n   names ().push_back (name); // well, push_back(std::move (name)) would be more efficient\n}\n\nvoid print_cpps () {\n    for (auto &amp;&amp; name : names()) { std::cout &lt;&lt; name &lt;&lt; \"\\n\"; }\n}\n\n// a.cpp\n\n#include \"registration.h\"\nstatic std::nullptr_t e = ([] () { register_cpp (\"a\"); return nullptr; }) ();\n\n// b.cpp\n\n#include \"registration.h\"\nstatic std::nullptr_t e = ([] () { register_cpp (\"b\"); return nullptr; }) ();\n\n// main.cpp\n#include \"registration.h\"\nint main () {\n   print_cpps ();\n   return 0;\n}\n</code></pre>\n\n<p>I think you need <code>names_</code> to be a static local variable in order to make sure that it is initialized before being accessed for the first time.</p>\n"}], "owner": {"reputation": 77, "user_id": 7224463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8eec9858fd4fcc4e1759b0096ea486d2?s=128&d=identicon&r=PG&f=1", "display_name": "Sion0", "link": "https://stackoverflow.com/users/7224463/sion0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 419, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1482954877, "creation_date": 1482949478, "last_edit_date": 1482949647, "question_id": 41367674, "link": "https://stackoverflow.com/questions/41367674/c-cpp-files-as-modules", "title": "C++ cpp files as modules", "body": "<p>Sorry if I am duplicating other question but I don't know how to google it.\nI want to add some minor modularity to my program: some .cpp files should be compiled as \"modules\". The main requirement is that I should be able to add modules by just adding new .cpp file to the project, without changing other files in any way.  </p>\n\n<p>Achieving this looks easy with dynamic loading libraries. Main program can scan some folder for all .dll files, load each of them and call exported \"load\" symbol from every module. In destructor main program can call \"unload\" symbols so modules can clean up.  </p>\n\n<p>I want the same but with monolithic program. Is there any way for .cpp files to register themselves so main program can call their init() functions at some point? Or for main program to find all such modules?  </p>\n\n<p>How it is done in Linux kernel? I know simple adding .c files makes them work somehow.</p>\n"}, {"tags": ["c++", "pointers", "tree"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482949316, "post_id": 41367391, "comment_id": 69936755, "body": "The right tool to solve such problems is your debugger. You should step through your code line-by-line <i>before</i> asking on Stack Overflow. For more help, please read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs (by Eric Lippert)</a>. At a minimum, you should &#91;edit] your question to include a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable</a> example that reproduces your problem, along with the observations you made in the debugger."}, {"owner": {"reputation": 29, "user_id": 6709628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52c3919c8d05dd212ac139256ee3001b?s=128&d=identicon&r=PG&f=1", "display_name": "kidneyThief", "link": "https://stackoverflow.com/users/6709628/kidneythief"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482950322, "post_id": 41367391, "comment_id": 69937231, "body": "This is exactly what I did.. I saw in the debugger that the function receives NULL pointer.. I just don&#39;t understand why it&#39;s happening."}, {"owner": {"reputation": 59687, "user_id": 951890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01c3ef0adae5153378a3f602ca068a03?s=128&d=identicon&r=PG", "display_name": "Vaughn Cato", "link": "https://stackoverflow.com/users/951890/vaughn-cato"}, "edited": false, "score": 0, "creation_date": 1482950741, "post_id": 41367391, "comment_id": 69937432, "body": "Are you doing a debug build?   You can see strange things like that sometimes in optimized builds."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1482951030, "post_id": 41367391, "comment_id": 69937577, "body": "@kidneyThief And what about providing a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> here?"}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 6709628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52c3919c8d05dd212ac139256ee3001b?s=128&d=identicon&r=PG&f=1", "display_name": "kidneyThief", "link": "https://stackoverflow.com/users/6709628/kidneythief"}, "edited": false, "score": 0, "creation_date": 1482950267, "post_id": 41367743, "comment_id": 69937202, "body": "I am initializing v by the function &quot;find&quot;. It finds me the node I need to insert after. The function works. I just want to know why the function receives NULL pointer when it&#39;s not actually NULL in the debugger."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 29, "user_id": 6709628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52c3919c8d05dd212ac139256ee3001b?s=128&d=identicon&r=PG&f=1", "display_name": "kidneyThief", "link": "https://stackoverflow.com/users/6709628/kidneythief"}, "edited": false, "score": 0, "creation_date": 1482951084, "post_id": 41367743, "comment_id": 69937603, "body": "@kidneyThief <b><a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a></b> in your question!!!!"}, {"owner": {"reputation": 29, "user_id": 6709628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52c3919c8d05dd212ac139256ee3001b?s=128&d=identicon&r=PG&f=1", "display_name": "kidneyThief", "link": "https://stackoverflow.com/users/6709628/kidneythief"}, "edited": false, "score": 0, "creation_date": 1482951139, "post_id": 41367743, "comment_id": 69937620, "body": "I will try. Thanks."}], "tags": [], "owner": {"reputation": 194, "user_id": 5758838, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JqJa9.gif?s=128&g=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/5758838/ryan"}, "is_accepted": false, "score": 1, "last_activity_date": 1482949772, "creation_date": 1482949772, "answer_id": 41367743, "question_id": 41367391, "link": "https://stackoverflow.com/questions/41367391/c-pointer-loses-value-in-inheritance-after-function-call/41367743#41367743", "title": "C++ Pointer loses value in inheritance after function call.", "body": "<p>It seems to me that you aren't initializing v, and thus when you assign it to n, that isn't being initialized either. You would need to call v = new RNode(...) , or whatever your logic is.</p>\n"}], "owner": {"reputation": 29, "user_id": 6709628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52c3919c8d05dd212ac139256ee3001b?s=128&d=identicon&r=PG&f=1", "display_name": "kidneyThief", "link": "https://stackoverflow.com/users/6709628/kidneythief"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "closed_date": 1483013587, "answer_count": 1, "score": 0, "last_activity_date": 1482949772, "creation_date": 1482948198, "question_id": 41367391, "link": "https://stackoverflow.com/questions/41367391/c-pointer-loses-value-in-inheritance-after-function-call", "closed_reason": "Not suitable for this site", "title": "C++ Pointer loses value in inheritance after function call.", "body": "<p>I have an assignment that involves AVL trees and rank trees.\nIn this specific assignment we need to implement a Rank AVL tree, which keeps in nodes another information. <br><br>\nI have this problem:<br>\nI made an AVL tree and for the Rank tree I chose to use inheritance. <br>\nIn the \"Insert\" function of the Rank tree I call another function called: \"setAllHeights\" which receives a node as an argument. <br>\nHowever, when I see the values in the debugger of the argument, I see that the function receives NULL pointer. <br>\nI don't understand why because before I entered \"setAllHeights\" function, I checked the value of the argument and it most definitely was not NULL. <br>\nWhat could be the problem, and why is it happening?\n<br><br>I will very much appreciate your help.</p>\n\n<p><br>\nThe code of the function Insert:<br></p>\n\n<pre><code>template&lt;class T, class Compare&gt;\nbool RAVL&lt;T, Compare&gt;::insert(const T&amp; data) {\n    if (root == NULL) {\n        root = new (nothrow) RNode&lt;T, Compare&gt;(data, NULL);\n        if (!root)\n            throw AllocationError();\n        size++;\n        return true;\n    }\n    Compare cmp;\n    RNode&lt;T, Compare&gt; *v;\n    if (find(data, &amp;v))\n        return false;\n    if (cmp(v-&gt;data, data)) {\n        v-&gt;right = new (nothrow) RNode&lt;T, Compare&gt;(data, v);\n        if (!v-&gt;right)\n            throw AllocationError();\n    } else {\n        v-&gt;left = new (nothrow) RNode&lt;T, Compare&gt;(data, v);\n        if (!v-&gt;left)\n            throw AllocationError();\n    }\n    Node&lt;T,Compare&gt; * n=v;\n    AVL&lt;T,Compare&gt;::setAllHeights(n);\n    rebalance(v);\n    size++;\n    return true;\n}\n</code></pre>\n\n<p><br>\nThe code of the setAllHeights function: <br></p>\n\n<pre><code>template&lt;class T, class Compare&gt;\nvoid AVL&lt;T, Compare&gt;::setAllHeights(Node&lt;T, Compare&gt; *n) {\n    if (n == NULL) {\n        return;\n    }\n    setHeight(n);\n    setAllHeights(n-&gt;parent);\n}\n</code></pre>\n"}, {"tags": ["javascript", "c++", "node.js", "memory", "process"], "comments": [{"owner": {"reputation": 489, "user_id": 5516238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5e1348e1f93431235a20dfd966f4e48?s=128&d=identicon&r=PG&f=1", "display_name": "schroffl", "link": "https://stackoverflow.com/users/5516238/schroffl"}, "edited": false, "score": 1, "creation_date": 1482948546, "post_id": 41367308, "comment_id": 69936370, "body": "Yes, it is possible and well documented in the <a href=\"https://nodejs.org/api/addons.html\" rel=\"nofollow noreferrer\">Node.js API Documentation</a>. There is also a official <a href=\"https://github.com/nodejs/node-addon-examples\" rel=\"nofollow noreferrer\">GitHub repository</a> with some examples. I wouldn&#39;t consider this a proper answer, so that&#39;s why I decided to just write a comment."}, {"owner": {"reputation": 516, "user_id": 6932243, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VE4ie.jpg?s=128&g=1", "display_name": "johnchar", "link": "https://stackoverflow.com/users/6932243/johnchar"}, "reply_to_user": {"reputation": 489, "user_id": 5516238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5e1348e1f93431235a20dfd966f4e48?s=128&d=identicon&r=PG&f=1", "display_name": "schroffl", "link": "https://stackoverflow.com/users/5516238/schroffl"}, "edited": false, "score": 0, "creation_date": 1482949864, "post_id": 41367308, "comment_id": 69937004, "body": "Thank you. Care to elaborate your answer a bit more ? Maybe give me a summary of the process so that i can accept it as an answer"}, {"owner": {"reputation": 489, "user_id": 5516238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5e1348e1f93431235a20dfd966f4e48?s=128&d=identicon&r=PG&f=1", "display_name": "schroffl", "link": "https://stackoverflow.com/users/5516238/schroffl"}, "edited": false, "score": 0, "creation_date": 1482950200, "post_id": 41367308, "comment_id": 69937162, "body": "To be honest, I haven&#39;t done anything with C++ addons for a long time and I&#39;d have to read the docs again myself. So you&#39;re probably better off just looking at the examples. It&#39;s really not that hard once you get the gist of it."}], "answers": [{"comments": [{"owner": {"reputation": 516, "user_id": 6932243, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VE4ie.jpg?s=128&g=1", "display_name": "johnchar", "link": "https://stackoverflow.com/users/6932243/johnchar"}, "edited": false, "score": 0, "creation_date": 1482952081, "post_id": 41368077, "comment_id": 69938047, "body": "I am so glad you answered each and every part of my question! Also, very beautifully written and elaborated. The last part of your answer is a solution to exactly what I have in mind as a problem. Thank you and Happy Christmas holidays ( if you celebrate it )."}], "tags": [], "owner": {"reputation": 574461, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "is_accepted": true, "score": 2, "last_activity_date": 1482951674, "last_edit_date": 1482951674, "creation_date": 1482951274, "answer_id": 41368077, "question_id": 41367308, "link": "https://stackoverflow.com/questions/41367308/read-memory-values-of-a-process-in-windows-using-nodejs/41368077#41368077", "title": "Read memory values of a process in windows using nodejs", "body": "<p>Yes, it is likely possible, but it really depends upon what memory values you're trying to read and whether the OS allows an external process to read them.  </p>\n\n<p>nodejs itself does not have code to generically read memory from another process so you will need to write and run your own native code.  To run native code from nodejs, you will need to either write a nodejs module using the Nodejs API documentation in order to call native code directly from within nodejs or you can write a standalone executable in native code and execute that using the <code>child_process module</code> and have it return some data to you.  Either option will work fine assuming you have the ability in your own native code to read the desired memory and are not blocked by process boundaries in the OS. </p>\n\n<blockquote>\n  <p>Q1: Is it possible to create an addon for the C++ code to be used with\n  nodejs ?</p>\n</blockquote>\n\n<p>Yes, this is well documented for nodejs here in the <a href=\"https://nodejs.org/api/addons.html\" rel=\"nofollow noreferrer\">nodejs API documentation</a>. </p>\n\n<blockquote>\n  <p>Q2: Is it possible to extract the data from C++ asynchronously and use\n  them in my nodejs app ?</p>\n</blockquote>\n\n<p>If you want the operation to be asynchronous, then you will have to execute your native code asynchronously (either in an OS thread or in another process) and communicate back the result via some callback.  Many of nodejs' own functions are built this way.</p>\n\n<blockquote>\n  <p>Q3: Can I rewrite the program using Javascript ( nodejs and modules )\n  ?</p>\n</blockquote>\n\n<p>You can't read memory values from an external process entirely from nodejs (since nodejs does not have that capability built-in).  You will need some of your own native code that can be either an addon or an external process that you execute from node.js.</p>\n\n<hr>\n\n<p>Since you already have native C++ code that does what you want, it sounds like the simplest scheme may be to just wrap that code into it's own C++ app and have it communicate back the results either via <code>stdout</code> or by writing to a passed in filename or something like that.  Then, you can just use the <code>child_process</code> module in node.js to execute your C++ app and retrieve the results it provides.  By nature of it executing in another process and using the appropriate child_process methods you can retrieve the result asynchronously.  The <a href=\"https://nodejs.org/api/child_process.html\" rel=\"nofollow noreferrer\">child_process module documentation</a> contains multiple examples for how to use its various methods.</p>\n"}, {"tags": [], "owner": {"reputation": 3258, "user_id": 13378247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10d7d5a6636d8776427782cf74f9bba7?s=128&d=identicon&r=PG&f=1", "display_name": "GirkovArpa", "link": "https://stackoverflow.com/users/13378247/girkovarpa"}, "is_accepted": false, "score": 0, "last_activity_date": 1602794660, "creation_date": 1602794660, "answer_id": 64379386, "question_id": 41367308, "link": "https://stackoverflow.com/questions/41367308/read-memory-values-of-a-process-in-windows-using-nodejs/64379386#64379386", "title": "Read memory values of a process in windows using nodejs", "body": "<p><a href=\"https://github.com/GirkovArpa/node-memory-process-scanner\" rel=\"nofollow noreferrer\">Here</a> is a rudimentary addon for reading the process of another window.</p>\n"}], "owner": {"reputation": 516, "user_id": 6932243, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VE4ie.jpg?s=128&g=1", "display_name": "johnchar", "link": "https://stackoverflow.com/users/6932243/johnchar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2748, "favorite_count": 2, "accepted_answer_id": 41368077, "answer_count": 2, "score": 1, "last_activity_date": 1602794660, "creation_date": 1482947854, "question_id": 41367308, "link": "https://stackoverflow.com/questions/41367308/read-memory-values-of-a-process-in-windows-using-nodejs", "title": "Read memory values of a process in windows using nodejs", "body": "<p><strong>Summary</strong>:</p>\n\n<p>I was wondering if it is possible to read memory values of a process ( in <strong>Windows</strong> ) using <strong>nodejs</strong>.</p>\n\n<p>I have some C++ code that does just that. For <em>some reasons</em>, I want to do that using nodejs.</p>\n\n<hr>\n\n<p><strong>Q1:</strong> Is it possible to create an addon for the C++ code to be used with nodejs ?</p>\n\n<p><strong>Q2:</strong> Is it possible to extract the data from C++ asynchronously and use them in my nodejs app ?</p>\n\n<p><strong>Q3:</strong> Can I rewrite the program using Javascript ( nodejs and modules ) ?</p>\n\n<p>Each question, if possible, is considered a solution to my problem.<br>\nIf you choose to answer 1 or more of them, please </p>\n\n<ul>\n<li>Give me a synopsis of the process</li>\n<li>Point me to the right directions ( for example, Documentations, Guides, SO answers etc.. )</li>\n</ul>\n\n<blockquote>\n  <p>Any answer, is a good answer to a \"difficult\", demanding question.</p>\n</blockquote>\n"}, {"tags": ["c++", "curl", "hyperlink", "static", "libcurl"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1482947887, "post_id": 41367301, "comment_id": 69936039, "body": "You surely don&#39;t need to statically link the Windows runtimes, GDI, OpenSSL etc?"}, {"owner": {"reputation": 1, "user_id": 7350958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/772e1acab68e38cc54db4aa7e2374c2b?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny Boy", "link": "https://stackoverflow.com/users/7350958/johnny-boy"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1482948421, "post_id": 41367301, "comment_id": 69936311, "body": "Yeah, that&#39;s what I thought too but when I try to un-link any of the libs I get &quot;Undefined reference to &#39;blah blah&#39;&quot; example:"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1482948487, "post_id": 41367301, "comment_id": 69936344, "body": "I didn&#39;t say you don&#39;t need to link them. I&#39;m saying you don&#39;t need to link them <i>statically</i>."}, {"owner": {"reputation": 1, "user_id": 7350958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/772e1acab68e38cc54db4aa7e2374c2b?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny Boy", "link": "https://stackoverflow.com/users/7350958/johnny-boy"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1482948683, "post_id": 41367301, "comment_id": 69936441, "body": "Sorry, I&#39;m not very familiar with linking in C++. If you&#39;re saying that I should link them dynamically how would I do so?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1482949174, "post_id": 41367301, "comment_id": 69936675, "body": "Which textbook are you using?"}], "answers": [{"tags": [], "owner": {"reputation": 805, "user_id": 3857473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fef4a561dd16de766dce81f87f345e74?s=128&d=identicon&r=PG&f=1", "display_name": "Vikash Kesarwani", "link": "https://stackoverflow.com/users/3857473/vikash-kesarwani"}, "is_accepted": false, "score": 1, "last_activity_date": 1482950510, "creation_date": 1482950510, "answer_id": 41367902, "question_id": 41367301, "link": "https://stackoverflow.com/questions/41367301/how-would-one-optimize-the-curl-library-for-size/41367902#41367902", "title": "How would one optimize the curl library for size?", "body": "<p>libcurl supports a lot of protocols, e.g. http, https, ftp, etc(See libcurl website for full list), so try to rebuild the libcurl library after removing unnecessary protocols and keeping only those which you are using in your project. This will reduce size of libcurl significantly. </p>\n"}], "owner": {"reputation": 1, "user_id": 7350958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/772e1acab68e38cc54db4aa7e2374c2b?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny Boy", "link": "https://stackoverflow.com/users/7350958/johnny-boy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 453, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1482950510, "creation_date": 1482947819, "question_id": 41367301, "link": "https://stackoverflow.com/questions/41367301/how-would-one-optimize-the-curl-library-for-size", "title": "How would one optimize the curl library for size?", "body": "<p>I've been attempting to shrink the size of my file for the past week or so, during that time I have discovered some compiler options that could drastically shrink the size of my file.\n However, due to my static implementation of libcurl, my file is still around 2.3mb; I would like to change that.\n I have searched other thread on various forums and found that on linux you could build the libcurl library with HTTP only enabled, however, my app is to run specifically on Windows.\n I am using the CodeBlocks IDE with the MinGW Compiler and these are my configuration settings:</p>\n\n<p><a href=\"https://i.stack.imgur.com/iZ9pd.png\" rel=\"nofollow noreferrer\">Link Libraries</a></p>\n\n<p>I have tried removing some of those linked libraries, however, that just results in compiler errors.</p>\n"}, {"tags": ["c++", "oop", "operator-overloading", "extraction-operator"], "answers": [{"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 1, "last_activity_date": 1482947501, "creation_date": 1482947501, "answer_id": 41367234, "question_id": 41367211, "link": "https://stackoverflow.com/questions/41367211/how-to-use-extraction-operator-to-get-multiple-values-from-method-of-a-class-in/41367234#41367234", "title": "How to use extraction operator to get multiple values from method of a class in C++?", "body": "<p>You want to extract data from an <code>example</code> into an <code>int</code>. Instead, you wrote code to extract data from an <code>istream</code> into an <code>example</code>. That's why the right function cannot be found: you did not write one.</p>\n\n<p>If you really wish to allow <code>abc &gt;&gt; s &gt;&gt; t</code> to work, you're going to have to define an <code>operator&gt;&gt;(example&amp;, int&amp;)</code> and add stream/cursor semantics to your class, to keep track at each step of what's been extracted so far. That really sounds like more trouble than it's worth.</p>\n"}, {"comments": [{"owner": {"reputation": 61, "user_id": 5956174, "user_type": "registered", "profile_image": "https://graph.facebook.com/980733415344276/picture?type=large", "display_name": "Zaif Senpai", "link": "https://stackoverflow.com/users/5956174/zaif-senpai"}, "edited": false, "score": 0, "creation_date": 1482948846, "post_id": 41367441, "comment_id": 69936521, "body": "Thanks a lot. I understand how this is not a better idea in programming but I just had the urge to know it and was searching since an hour."}], "tags": [], "owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "is_accepted": true, "score": 0, "last_activity_date": 1482948396, "creation_date": 1482948396, "answer_id": 41367441, "question_id": 41367211, "link": "https://stackoverflow.com/questions/41367211/how-to-use-extraction-operator-to-get-multiple-values-from-method-of-a-class-in/41367441#41367441", "title": "How to use extraction operator to get multiple values from method of a class in C++?", "body": "<p>The insertion operator you defined works with <code>std::istream</code> as a source rather than you own class. Although I think your objective is ill-advised, you can create similar operators for your class. You'll need some entity with a suitable state as chained operators should extract different values.</p>\n\n<p>I wouldn't use this for any sort of production set up but it certainly can be done:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;tuple&gt;\nusing namespace std;\n\ntemplate &lt;int Index, typename... T&gt;\nclass extractor {\n    std::tuple&lt;T const&amp;...&gt; values;\npublic:\n    extractor(std::tuple&lt;T const&amp;...&gt; values): values(values) {}\n    template &lt;typename A&gt;\n    extractor&lt;Index + 1, T...&gt; operator&gt;&gt; (A&amp; arg) {\n        arg = std::get&lt;Index&gt;(values);\n        return extractor&lt;Index + 1, T...&gt;{ values };\n    }\n};\n\ntemplate &lt;typename... T&gt;\nextractor&lt;0, T...&gt; make_extractor(T const&amp;... values) {\n    return extractor&lt;0, T...&gt;(std::tie(values...));\n}\n\nclass example {\nprivate:\n    int my = 2;\n    int my2 = 4;\n    double my3 = 3.14;\npublic:\n    template &lt;typename A&gt;\n    extractor&lt;0, int, double&gt; operator&gt;&gt; (A&amp; arg) {\n        arg = my;\n        return make_extractor(this-&gt;my2, this-&gt;my3);\n    }\n};\n\nint main() {\n    example abc;\n    int s, t;\n    double x;\n\n    abc &gt;&gt; s &gt;&gt; t &gt;&gt; x;\n    cout &lt;&lt; s &lt;&lt; \" \" &lt;&lt; t &lt;&lt; \" \" &lt;&lt; x &lt;&lt; \"\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 5956174, "user_type": "registered", "profile_image": "https://graph.facebook.com/980733415344276/picture?type=large", "display_name": "Zaif Senpai", "link": "https://stackoverflow.com/users/5956174/zaif-senpai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 405, "favorite_count": 0, "accepted_answer_id": 41367441, "answer_count": 2, "score": 0, "last_activity_date": 1482948396, "creation_date": 1482947412, "last_edit_date": 1495540423, "question_id": 41367211, "link": "https://stackoverflow.com/questions/41367211/how-to-use-extraction-operator-to-get-multiple-values-from-method-of-a-class-in", "title": "How to use extraction operator to get multiple values from method of a class in C++?", "body": "<p>Like we use  in cin:</p>\n\n<pre><code>cin &gt;&gt; a &gt;&gt; b;\n</code></pre>\n\n<p>to get multiple values from input stream and insert them to multiple variables.\nHow can we implement this method in our own class? To get multiple values from it.\nI tried this as found <a href=\"https://stackoverflow.com/questions/23925866/c-extraction-operator-for-class-functions\">here</a>:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nclass example {\n    friend istream&amp; operator&gt;&gt; (istream&amp; is, example&amp; exam);\n    private:\n        int my = 2;\n        int my2 = 4;\n};\n\nistream&amp; operator&gt;&gt; (istream&amp; is, example&amp; exam) {\n    is &gt;&gt; exam.my &gt;&gt; exam.my2;\n    return is;  \n}\n\nint main() {\n    example abc;\n    int s, t;\n\n    abc &gt;&gt; s &gt;&gt; t;\n    cout &lt;&lt; s &lt;&lt; t;\n}\n</code></pre>\n\n<p>But getting error \"no match for operator>> (operand types are 'example' and 'int')\"</p>\n\n<p>PS: I know the alternate ways but I want to know this specific way of doing this, Thanks.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 194, "user_id": 5758838, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JqJa9.gif?s=128&g=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/5758838/ryan"}, "edited": false, "score": 2, "creation_date": 1482947381, "post_id": 41367179, "comment_id": 69935776, "body": "We aren&#39;t going to write a whole program for you. Write up your logic, and ask any technical questions here."}, {"owner": {"reputation": 985, "user_id": 4014798, "user_type": "registered", "accept_rate": 52, "profile_image": "https://lh3.googleusercontent.com/-O8OIRSWaZBA/AAAAAAAAAAI/AAAAAAAAAFg/s3TsQCEjPJw/photo.jpg?sz=128", "display_name": "Lucas Steffen", "link": "https://stackoverflow.com/users/4014798/lucas-steffen"}, "edited": false, "score": 0, "creation_date": 1482947399, "post_id": 41367179, "comment_id": 69935785, "body": "You are asking for a tutorial of a thing you could easily find on Google"}, {"owner": {"reputation": 13521, "user_id": 654953, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f6453f58b70e93dbfa8998b71a95bb09?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/654953/ryan"}, "edited": false, "score": 0, "creation_date": 1482947434, "post_id": 41367179, "comment_id": 69935812, "body": "look at <code>fopen</code>, <code>fgets</code>, <code>fclose</code> all on manual page #3"}, {"owner": {"reputation": 127, "user_id": 7350969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f59758e24ae662dc3dad9783ad4f09?s=128&d=identicon&r=PG&f=1", "display_name": "Zolak94", "link": "https://stackoverflow.com/users/7350969/zolak94"}, "edited": false, "score": 0, "creation_date": 1482951406, "post_id": 41367179, "comment_id": 69937740, "body": "ok i put something where i am stuck now, sorry first time asking question here."}], "answers": [{"tags": [], "owner": {"reputation": 5719, "user_id": 5348875, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e050e66d97a3f54b0453533428088e6c?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5348875/daniel"}, "is_accepted": false, "score": 0, "last_activity_date": 1482953485, "creation_date": 1482953485, "answer_id": 41368525, "question_id": 41367179, "link": "https://stackoverflow.com/questions/41367179/c-read-line-by-line-file-with-class/41368525#41368525", "title": "C++ Read line by line file with class", "body": "<p>well, if you want to read question by question, you can do something like this:</p>\n\n<pre><code>int i = 0;\nfor(; i &lt; line.size(); i++){\n    if(line[i] == \"&lt;\") break;\n}\nbool foundEnd = false;\nint j = i + 1;\nwhile(1){\n    for(; j &lt; line.size(); j++){\n        if(line[j] == \"&gt;\"){\n            foundEnd = true;\n            break;\n        }\n    }\n    if(!foundEnd) {getline(myfile, line); j = 0;}\n    else break;       \n}\nreturn the whole text from i to j\n</code></pre>\n\n<p>step by step you can concat the lines from i to j and get your question</p>\n"}, {"comments": [{"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "reply_to_user": {"reputation": 127, "user_id": 7350969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f59758e24ae662dc3dad9783ad4f09?s=128&d=identicon&r=PG&f=1", "display_name": "Zolak94", "link": "https://stackoverflow.com/users/7350969/zolak94"}, "edited": false, "score": 0, "creation_date": 1483033516, "post_id": 41369519, "comment_id": 69971513, "body": "@Zolak94: what spacing?"}, {"owner": {"reputation": 127, "user_id": 7350969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f59758e24ae662dc3dad9783ad4f09?s=128&d=identicon&r=PG&f=1", "display_name": "Zolak94", "link": "https://stackoverflow.com/users/7350969/zolak94"}, "edited": false, "score": 0, "creation_date": 1483124595, "post_id": 41369519, "comment_id": 70004868, "body": "when i start code he load everything but there are no space between words."}], "tags": [], "owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "is_accepted": false, "score": 0, "last_activity_date": 1482959181, "last_edit_date": 1482959181, "creation_date": 1482958179, "answer_id": 41369519, "question_id": 41367179, "link": "https://stackoverflow.com/questions/41367179/c-read-line-by-line-file-with-class/41369519#41369519", "title": "C++ Read line by line file with class", "body": "<p>why you create string <code>input</code> and <code>i</code> inside the loop? it means after each read of line these variables will be reset so declare them outside the loop.</p>\n\n<p>in your case you can read only a single character each time as long as the question may contain more than one line so each input of this character will be scanned whether it is <code>&lt;</code> or <code>&gt;</code> the first makes a logical variable true as a sign of the question has begun and the latter is a sign of end of question which it Xors the <code>isBegin</code>.</p>\n\n<p>and make an array of questions and feel it:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\n\nint main ()\n{\n\n    char c; \n    bool isBegin = false;\n    string sQuestion[10];\n\n    ifstream in(\"data.txt\");\n\n    int i = 0;\n    while(in &gt;&gt; c) // read character by character\n    {\n        if('&lt;' == c) // if so then it's a sign of beginning of question so set the logical variable isBegin to true\n        {\n            isBegin = true; // set it to true\n            continue; // in order not to add '&lt;' to the question    \n        }\n        else\n            if('&gt;' == c) // if so it is a sign of end of question\n            {\n                isBegin = false; // so set it to false\n                i++; // move to next quesiton and store it in the next element in the array\n            }\n        if(isBegin)\n            sQuestion[i] += c; // filling the question\n    }\n\n    // checking\n    for(int i(0); i &lt; 10; i++)\n        cout &lt;&lt; sQuestion[i] &lt;&lt; endl;\n\n    in.close();\n\n    cout &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<ul>\n<li>if you want you can read the file for the first time to count the number of questions then create a dynamic array of questions and last rear the file again filling it with each question.</li>\n</ul>\n"}], "owner": {"reputation": 127, "user_id": 7350969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f59758e24ae662dc3dad9783ad4f09?s=128&d=identicon&r=PG&f=1", "display_name": "Zolak94", "link": "https://stackoverflow.com/users/7350969/zolak94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1482959181, "creation_date": 1482947240, "last_edit_date": 1482951698, "question_id": 41367179, "link": "https://stackoverflow.com/questions/41367179/c-read-line-by-line-file-with-class", "title": "C++ Read line by line file with class", "body": "<p>I need help. I want to write program that open file where are questions and read question by question, question in files start with &lt; and end with > how to do that with class ?\nI wanted program to go one question then after you answer you get next question.\nfor now i did this: \n`</p>\n\n<pre><code>int main() {\n  ifstream myfile;\n  myfile.open (\"21fundamentalvariabletypes.txt\");\n  while (myfile){\n    int i = 1;\n    string strInput;\n    getline(myfile, strInput);\n    if (strInput == \"&lt;\") {\n      cout &lt;&lt; i &lt;&lt; \".\";\n      i++;\n    }\n    if (strInput == \"&gt;\") {\n      cout &lt;&lt; endl;\n    }\n    else {\n      cout &lt;&lt; strInput &lt;&lt; endl;\n      i++;\n    }\n  }\n  return 0;\n}\n</code></pre>\n\n<p>and i get this on screen: </p>\n\n<p>1.&lt;\nsta je ispravan nacin deklaracije promenljive?\n- a = 4;\n* int a;\n- int a = 4;\n- int a = 4</p>\n\n<p>1.&lt;\nPovezati ispravan par?\n- 1 a a\n- 2 b b\n- 3 c d\n- 4 d a\n* 1->3\n* 2->3\n* 3->4\n* 4->1 </p>\n\n<p>Why doesnt i++ work, and why do i have 1.&lt; for the first time. But when i dont put <code>if ( strInput == \"&gt;\" )</code>etc. then i have 1. and then question</p>\n"}, {"tags": ["c++", "opengl", "glfw"], "comments": [{"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 1, "creation_date": 1482947797, "post_id": 41367130, "comment_id": 69935990, "body": "It&#39;s a VS2015 issue: <a href=\"https://msdn.microsoft.com/en-us/library/bb531344.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/bb531344.aspx</a>. Likely you are using an already compiled glew or glfw lib that was compiled with a previous VS version. Try compiling glew and glfw on your own."}], "answers": [{"tags": [], "owner": {"reputation": 2113, "user_id": 4433546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fp46R.jpg?s=128&g=1", "display_name": "TriskalJM", "link": "https://stackoverflow.com/users/4433546/triskaljm"}, "is_accepted": false, "score": 1, "last_activity_date": 1482947869, "creation_date": 1482947869, "answer_id": 41367311, "question_id": 41367130, "link": "https://stackoverflow.com/questions/41367130/c-glfw-error-solved-by-adding-legacy-stdio-definitions-lib-why/41367311#41367311", "title": "C++ GLFW Error solved by adding legacy_stdio_definitions.lib. Why?", "body": "<p>Microsoft made <a href=\"https://msdn.microsoft.com/en-us/library/bb531344.aspx\" rel=\"nofollow noreferrer\">several changes</a> in Visual Studio 2015 that can potentially break existing codebases. Based on your description of the problem, the following is the likely culprit. Quoted from <a href=\"https://social.msdn.microsoft.com/Forums/vstudio/en-US/5150eeec-4427-440f-ab19-aecb26113d31/updated-to-vs-2015-and-now-get-unresolved-external-errors?forum=vcgeneral\" rel=\"nofollow noreferrer\">here</a>:</p>\n\n<blockquote>\n  <p>The definitions of all of the printf and scanf functions have been moved inline into stdio.h, conio.h, and other CRT headers. This is a breaking change that leads to a linker error (LNK2019, unresolved external symbol) for any programs that declared these functions locally without including the appropriate CRT headers. If possible, you should update the code to include the CRT headers (that is, add #include stdio.h) and the inline functions, but if you do not want to modify your code to include these header files, an alternative solution is to add an additional library to your linker input, legacy_stdio_definitions.lib.</p>\n</blockquote>\n\n<p>GLFW must have defined these functions locally without including the CRT headers.</p>\n"}], "owner": {"reputation": 1, "user_id": 7350918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/989862a8cca60afd7d48bf656fa110d2?s=128&d=identicon&r=PG&f=1", "display_name": "David.M", "link": "https://stackoverflow.com/users/7350918/david-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1051, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1482947999, "creation_date": 1482947056, "last_edit_date": 1482947999, "question_id": 41367130, "link": "https://stackoverflow.com/questions/41367130/c-glfw-error-solved-by-adding-legacy-stdio-definitions-lib-why", "title": "C++ GLFW Error solved by adding legacy_stdio_definitions.lib. Why?", "body": "<p>Can anyone of you explain to me why adding \"legacy_stdio_definitions.lib\" resolves an error when building the following program?\nThe error occurred when I was trying to use the GLFW library.\nI am still pretty new to c++ and the OpenGL world and after hours of searching online and hours of trial and error I stumbled upon the suggestion to add \"legacy_stdio_definitions.lib\" to my additional dependencies. This did indeed solve the error <strong>but I still don't fully understand</strong> what the problem was and what this .lib did to solve it.</p>\n\n<p>I am using Microsoft Visual Studio 2015 Community Edition btw.</p>\n\n<p>All the steps that i did were:</p>\n\n<ol>\n<li>C/C++->General adding includes for glew, glm and glfw</li>\n<li>Linker->General adding glew and glfw libs</li>\n<li>Linker->Input added\nglew32.lib, glfw3.lib and legacy_stdio_definitions.lib</li>\n<li>added glew32.dll to my project folder</li>\n</ol>\n\n<hr>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#include &lt;GL/glew.h&gt;\n\n#include &lt;GLFW/glfw3.h&gt;\n\n#include &lt;glm/glm.hpp&gt;\nusing namespace glm;\n\nint main() {\n\n    // Initialise GLFW\n    if (!glfwInit())\n    {\n        fprintf(stderr, \"Failed to initialize GLFW\\n\");\n        return -1;\n    }\n\n    glfwWindowHint(GLFW_SAMPLES, 4); // 4x antialiasing\n    glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, 3); // We want OpenGL 3.3\n    glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, 3);\n    glfwWindowHint(GLFW_OPENGL_FORWARD_COMPAT, GL_TRUE); // To make MacOS happy; should not be needed\n    glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE); //We don't want the old OpenGL \n\n                                                                   // Open a window and create its OpenGL context\n    GLFWwindow* window; // (In the accompanying source code, this variable is global)\n    window = glfwCreateWindow(1024, 768, \"Tutorial 01\", NULL, NULL);\n    if (window == NULL) {\n        fprintf(stderr, \"Failed to open GLFW window. If you have an Intel GPU, they are not 3.3 compatible. Try the 2.1 version of the tutorials.\\n\");\n        glfwTerminate();\n        return -1;\n    }\n    glfwMakeContextCurrent(window); // Initialize GLEW\n    glewExperimental = true; // Needed in core profile\n    if (glewInit() != GLEW_OK) {\n        fprintf(stderr, \"Failed to initialize GLEW\\n\");\n        return -1;\n    }\n\n    // Ensure we can capture the escape key being pressed below\n    glfwSetInputMode(window, GLFW_STICKY_KEYS, GL_TRUE);\n\n    do {\n        // Draw nothing, see you in tutorial 2 !\n\n        // Swap buffers\n        glfwSwapBuffers(window);\n        glfwPollEvents();\n\n    } // Check if the ESC key was pressed or the window was closed\n    while (glfwGetKey(window, GLFW_KEY_ESCAPE) != GLFW_PRESS &amp;&amp;\n        glfwWindowShouldClose(window) == 0);\n\n}\n</code></pre>\n\n<p>Any help will be appreciated.</p>\n"}, {"tags": ["c++", "class", "oop", "abstract-class", "abstract"], "comments": [{"owner": {"reputation": 1058, "user_id": 1945927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28c24a7f9f6a3ec84c43cdf1456c5cae?s=128&d=identicon&r=PG", "display_name": "Piou", "link": "https://stackoverflow.com/users/1945927/piou"}, "edited": false, "score": 0, "creation_date": 1482947398, "post_id": 41367118, "comment_id": 69935784, "body": "You will need to check the type of your instance in order to be able to cast it into the sub type to call the underlying method."}, {"owner": {"reputation": 1306, "user_id": 5664775, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/QqQGd.jpg?s=128&g=1", "display_name": "Luke Collins", "link": "https://stackoverflow.com/users/5664775/luke-collins"}, "reply_to_user": {"reputation": 1058, "user_id": 1945927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28c24a7f9f6a3ec84c43cdf1456c5cae?s=128&d=identicon&r=PG", "display_name": "Piou", "link": "https://stackoverflow.com/users/1945927/piou"}, "edited": false, "score": 1, "creation_date": 1482947529, "post_id": 41367118, "comment_id": 69935854, "body": "@Piou Could you give me a syntactic example? For example I know that <code>board[1]</code> is a property, so could I run <code>((Property*)board[1])-&gt;getPrice()</code>?"}, {"owner": {"reputation": 1058, "user_id": 1945927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28c24a7f9f6a3ec84c43cdf1456c5cae?s=128&d=identicon&r=PG", "display_name": "Piou", "link": "https://stackoverflow.com/users/1945927/piou"}, "edited": false, "score": 0, "creation_date": 1482947571, "post_id": 41367118, "comment_id": 69935877, "body": "Another solution would be to implement a virtual method <code>getPrice</code> in <code>GameSquare</code> class that returns -1, overriding it in <code>Property</code> to return the price passed to the constructor. Then in your display logic you just check that the price is &gt; 0 to display the info."}, {"owner": {"reputation": 1306, "user_id": 5664775, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/QqQGd.jpg?s=128&g=1", "display_name": "Luke Collins", "link": "https://stackoverflow.com/users/5664775/luke-collins"}, "reply_to_user": {"reputation": 1058, "user_id": 1945927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28c24a7f9f6a3ec84c43cdf1456c5cae?s=128&d=identicon&r=PG", "display_name": "Piou", "link": "https://stackoverflow.com/users/1945927/piou"}, "edited": false, "score": 0, "creation_date": 1482947627, "post_id": 41367118, "comment_id": 69935912, "body": "@Piou That is a good idea, but then I&#39;d have to do that for each method in each subclass if I want to use it, no?"}, {"owner": {"reputation": 1058, "user_id": 1945927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28c24a7f9f6a3ec84c43cdf1456c5cae?s=128&d=identicon&r=PG", "display_name": "Piou", "link": "https://stackoverflow.com/users/1945927/piou"}, "edited": false, "score": 0, "creation_date": 1482947925, "post_id": 41367118, "comment_id": 69936059, "body": "Yes, the other solution implies you to check the type for each case in order to react properly and not meet runtime exceptions: <code>if(typeid(board[i]).name == &quot;Property&quot;){ ... } else if (typeid(board[i]) == &quot;CommunityChest&quot;){ ... } ...</code>"}], "answers": [{"tags": [], "owner": {"reputation": 2113, "user_id": 4433546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fp46R.jpg?s=128&g=1", "display_name": "TriskalJM", "link": "https://stackoverflow.com/users/4433546/triskaljm"}, "is_accepted": true, "score": 2, "last_activity_date": 1482948799, "last_edit_date": 1495541784, "creation_date": 1482948799, "answer_id": 41367522, "question_id": 41367118, "link": "https://stackoverflow.com/questions/41367118/calling-a-subclass-method-from-an-array-of-superclass-objects/41367522#41367522", "title": "Calling a Subclass method from an array of Superclass Objects", "body": "<p>This is a great example of <a href=\"https://stackoverflow.com/questions/274626/what-is-object-slicing\">object slicing</a>.</p>\n\n<h1>Suggestion 1: Dynamic Downcast</h1>\n\n<p>One way to prevent it is to add the following:</p>\n\n<pre><code>Property *b1 = dynamic_cast&lt;Property*&gt;(board[index]);\nif (b1)\n{\n    int b = b1-&gt;getPrice(); // Or whatever getPrice() returns;\n}\n</code></pre>\n\n<p>However, you'd have to try the dynamic downcast for every subclass (<code>Property</code>, <code>CommunityChest</code>, etc.), and that might make the code look clunky to you.</p>\n\n<h1>Suggestion 2: Add getPrice() to GameSquare</h1>\n\n<p>As several commenters have suggested, you could add the method <code>getPrice()</code> to the <code>GameSquare</code> class. If the square isn't a <code>Property</code>, just return <code>0</code>. This allows you to check whether something is a <code>Property</code> or something else.</p>\n"}, {"comments": [{"owner": {"reputation": 1058, "user_id": 1945927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28c24a7f9f6a3ec84c43cdf1456c5cae?s=128&d=identicon&r=PG", "display_name": "Piou", "link": "https://stackoverflow.com/users/1945927/piou"}, "edited": false, "score": 0, "creation_date": 1482950132, "post_id": 41367717, "comment_id": 69937124, "body": "I like this solution, that&#39;s how I&#39;d implement it in C# or JS, however I was not skilled enough to propose a code snippet in C++"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "is_accepted": false, "score": 1, "last_activity_date": 1482949680, "creation_date": 1482949680, "answer_id": 41367717, "question_id": 41367118, "link": "https://stackoverflow.com/questions/41367118/calling-a-subclass-method-from-an-array-of-superclass-objects/41367717#41367717", "title": "Calling a Subclass method from an array of Superclass Objects", "body": "<p>You can certainly do what you're asking for, but the fact that you have to do this means that you're breaking the OO design rules.</p>\n\n<p>I would suggest looking at each square in terms of actions a player can perform on it, such as buy, mortgage, get card, pass go. Some action may be automatic when the player lands on the square. Some may be presented in GUI.</p>\n\n<p>This way you don't have to know that a square has a price - you just offer the player possible Buy action, and the action knows it's a property. If the property is owned by the player, it now gets \"build house\" action. And so on.</p>\n\n<p>A square would have a method along the lines of <code>vector&lt;ActionPtr&gt; getActionsFor(PlayerPtr player)</code>.</p>\n"}], "owner": {"reputation": 1306, "user_id": 5664775, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/QqQGd.jpg?s=128&g=1", "display_name": "Luke Collins", "link": "https://stackoverflow.com/users/5664775/luke-collins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 650, "favorite_count": 0, "accepted_answer_id": 41367522, "answer_count": 2, "score": 0, "last_activity_date": 1482949680, "creation_date": 1482947019, "question_id": 41367118, "link": "https://stackoverflow.com/questions/41367118/calling-a-subclass-method-from-an-array-of-superclass-objects", "title": "Calling a Subclass method from an array of Superclass Objects", "body": "<p>I am implementing the game <em>Monopoly</em> in C++. I am dealing with an abstract superclass <code>BoardSquare</code> (whose only property is the square name), with various subclasses depending on the type of game square (whether it's a property, chance, etc.)</p>\n\n<p>Now since I want to represent the board as an array and the squares differ in their types, I have declared an array of <code>BoardSquare</code> pointers:</p>\n\n<pre><code>GameSquare** board = new GameSquare*[40];\n</code></pre>\n\n<p>and continued to populate each entry depending on the type:</p>\n\n<pre><code>board[1] = new Property(\"Old Kent Road\", 0);\nboard[2] = new CommunityChest();\nboard[3] = new Property(\"Whitechapel Road\", 0);\n</code></pre>\n\n<p>and so on. </p>\n\n<p>Now <code>Property</code>, for example, has specific methods such as <code>getPrice()</code>. But running </p>\n\n<pre><code>board[1]-&gt;getPrice()\n</code></pre>\n\n<p>gives the error </p>\n\n<blockquote>\n  <p>\u2018class GameSquare\u2019 has no member named \u2018getPrice\u2019</p>\n</blockquote>\n\n<p>which tells me that the pointer is still being treated as a GameSquare. Is there a way around this? Typecasting perhaps? or a more elegant implementation altogether? </p>\n"}, {"tags": ["c++", "qt", "qt5", "qmainwindow", "qmenubar"], "comments": [{"owner": {"reputation": 95, "user_id": 5193899, "user_type": "registered", "profile_image": "https://graph.facebook.com/693008134163890/picture?type=large", "display_name": "Joseph Ali", "link": "https://stackoverflow.com/users/5193899/joseph-ali"}, "edited": false, "score": 0, "creation_date": 1482947432, "post_id": 41367027, "comment_id": 69935808, "body": "unfortunately, i used to create menus using QT designer which was really easy and fast. However, I will soon have an exam which could ask to write the code on paper!  if there is any easier way to do it ,please let me know."}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1482948349, "post_id": 41367027, "comment_id": 69936269, "body": "Why are you trying to set the layout of the <code>QMainWindow</code>?  What are you actually trying to achieve?  If you want to implement certain functionality within the context of a <code>QMainWindow</code> you would generally implement that functionality in a class derived from <code>QWidget</code> and then pass a pointer to an instance of that class to <a href=\"http://doc.qt.io/qt-5/qmainwindow.html#setCentralWidget\" rel=\"nofollow noreferrer\"><code>QMainWindow::setCentralWidget</code></a>."}, {"owner": {"reputation": 95, "user_id": 5193899, "user_type": "registered", "profile_image": "https://graph.facebook.com/693008134163890/picture?type=large", "display_name": "Joseph Ali", "link": "https://stackoverflow.com/users/5193899/joseph-ali"}, "reply_to_user": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1482950795, "post_id": 41367027, "comment_id": 69937460, "body": "@G.M. thank you, I already solve the problem. just to clarify, I used to use QWidget instead of  QMainWindow and it was working but I couldn&#39;t add a menuBar"}], "answers": [{"tags": [], "owner": {"reputation": 2537, "user_id": 4149835, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh6.googleusercontent.com/-n_QVH3KiURQ/AAAAAAAAAAI/AAAAAAAAAFM/RomdbXIW1hU/photo.jpg?sz=128", "display_name": "Vladimir Bershov", "link": "https://stackoverflow.com/users/4149835/vladimir-bershov"}, "is_accepted": false, "score": 1, "last_activity_date": 1482948490, "creation_date": 1482948490, "answer_id": 41367459, "question_id": 41367027, "link": "https://stackoverflow.com/questions/41367027/qt-add-menubar-menus-and-sub-menus-to-qmainwindow/41367459#41367459", "title": "Qt add menuBar, menus, and sub menus to QMainWindow", "body": "<p>Each <code>QMainWindow</code> should have a central widget:</p>\n\n<pre><code>QMainWindow *w = new QMainWindow;\n\nQWidget* centralWidget = new QWidget;\nw-&gt;setCentralWidget( centralWidget );\n\ncentralWidget-&gt;setLayout(L);\nw-&gt;show();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 1, "last_activity_date": 1482950574, "last_edit_date": 1482950574, "creation_date": 1482949029, "answer_id": 41367567, "question_id": 41367027, "link": "https://stackoverflow.com/questions/41367027/qt-add-menubar-menus-and-sub-menus-to-qmainwindow/41367567#41367567", "title": "Qt add menuBar, menus, and sub menus to QMainWindow", "body": "<p>add layout to central widget:</p>\n\n<pre><code>#include &lt;QApplication&gt;\n\n#include &lt;QApplication&gt;\n#include&lt;QSlider&gt;\n#include&lt;QSpinBox&gt;\n#include&lt;QHBoxLayout&gt;\n#include&lt;QWidget&gt;\n\n#include&lt;QMenuBar&gt;\n#include&lt;QStatusBar&gt;\n#include &lt;QMainWindow&gt;\n\nint main(int argc, char *argv[])\n{\n\n    QApplication a(argc, argv);\n\n    QMainWindow *w = new QMainWindow;\n\n    QMenuBar *menu = new QMenuBar;\n    QMenu *file = new QMenu();\n    file-&gt;addMenu(\"&amp;File\");\n    menu-&gt;addMenu(file);\n\n    QWidget *centralwidget = new QWidget(w);\n    w-&gt;setCentralWidget(centralwidget);\n\n    QSlider *s1 = new QSlider(Qt::Horizontal, centralwidget);\n    QSlider *s2 = new QSlider(Qt::Vertical, centralwidget);\n    QSpinBox *sb = new QSpinBox;\n\n\n    QHBoxLayout *L = new QHBoxLayout(centralwidget);\n    L-&gt;addWidget(s1);\n    L-&gt;addWidget(s2);\n    L-&gt;addWidget(sb);\n    w-&gt;show();\n\n    return a.exec();\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/Pr4ql.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Pr4ql.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 95, "user_id": 5193899, "user_type": "registered", "profile_image": "https://graph.facebook.com/693008134163890/picture?type=large", "display_name": "Joseph Ali", "link": "https://stackoverflow.com/users/5193899/joseph-ali"}, "is_accepted": false, "score": 0, "last_activity_date": 1482950324, "creation_date": 1482950324, "answer_id": 41367861, "question_id": 41367027, "link": "https://stackoverflow.com/questions/41367027/qt-add-menubar-menus-and-sub-menus-to-qmainwindow/41367861#41367861", "title": "Qt add menuBar, menus, and sub menus to QMainWindow", "body": "<p>This is the final version </p>\n\n<pre><code>#include &lt;QApplication&gt;\n\n#include &lt;QApplication&gt;\n#include&lt;QSlider&gt;\n#include&lt;QSpinBox&gt;\n#include&lt;QHBoxLayout&gt;\n#include&lt;QWidget&gt;\n\n#include \"mainwindow.h\"\n#include&lt;QMenuBar&gt;\n#include&lt;QStatusBar&gt;\n\nint main(int argc, char *argv[])\n{\n\n    QApplication a(argc, argv);\n\n\n            QSlider *s1 = new QSlider(Qt::Horizontal);\n               QSlider *s2 = new QSlider(Qt::Vertical);\n               QSpinBox *sb = new QSpinBox;\n\n\n     QMainWindow *w = new QMainWindow;\n\n     QWidget *cw = new QWidget(w);\n\n     QMenuBar *menu = new QMenuBar(cw);\n\n\n     QHBoxLayout *L = new QHBoxLayout(cw);\n      L-&gt;addWidget(s1);\n      L-&gt;addWidget(s2);\n      L-&gt;addWidget(sb);\n\n             QMenu *file = new QMenu(\"&amp;File\");\n             file-&gt;addMenu(\"Open\");\n              file-&gt;addMenu(\"new\");\n\n              QMenu *Build = new QMenu(\"&amp;Build\");\n              Build-&gt;addAction(\"Rebuild this file\");\n               Build-&gt;addAction(\"Rebuild All\");\n\n             menu-&gt;addMenu(file);\n             menu-&gt;addMenu(Build);\n\n    w-&gt;setCentralWidget(cw);\n\n     w-&gt;show();\n\n\n     QObject::connect  (s1,SIGNAL(valueChanged(int) ),  sb,SLOT(setValue(int) )   );\n     QObject::connect  (s1,SIGNAL(valueChanged(int) ),  s2,SLOT(setValue(int) )   );\n\n     QObject::connect  (s2,SIGNAL(valueChanged(int) ),  sb,SLOT(setValue(int) )   );\n     QObject::connect  (s2,SIGNAL(valueChanged(int) ),  s1,SLOT(setValue(int) )   );\n\n     QObject::connect  (sb,SIGNAL(valueChanged(int) ),  s1,SLOT(setValue(int) )    );\n     QObject::connect  (sb,SIGNAL(valueChanged(int) ),  s2,SLOT(setValue(int) )    );\n\n     return a.exec();\n\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1073, "user_id": 3203032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A34l1.jpg?s=128&g=1", "display_name": "antoine", "link": "https://stackoverflow.com/users/3203032/antoine"}, "is_accepted": false, "score": 0, "last_activity_date": 1559808863, "creation_date": 1559808863, "answer_id": 56473446, "question_id": 41367027, "link": "https://stackoverflow.com/questions/41367027/qt-add-menubar-menus-and-sub-menus-to-qmainwindow/56473446#56473446", "title": "Qt add menuBar, menus, and sub menus to QMainWindow", "body": "<p>To try to clearly answer the question suggested by the title (which is not a question by itself), <code>QMainWindow</code> does already have an empty menu bar by default besides other things like a central widget.</p>\n\n<p>To access this <code>QMenuBar</code> and populate it with things of your choice, just call <code>menuBar()</code> from your <code>QMainWindow</code> instance.\nTo add a submenu to a <code>QMenuBar</code>, use <code>QMenuBar::addMenu</code>.</p>\n\n<p>For example :</p>\n\n<pre><code>QAction* newAct = new QAction(\"save\");\nauto fileMenu = menuBar()-&gt;addMenu(tr(\"&amp;File\"));\nfileMenu-&gt;addAction(newAct);\nauto submenu = fileMenu-&gt;addMenu(\"Submenu\");\nsubmenu-&gt;addAction(new QAction(\"action1\");\nsubmenu-&gt;addAction(new QAction(\"action2\");\n</code></pre>\n\n<p>For more information, look at this Qt example : <a href=\"https://doc.qt.io/qt-5/qtwidgets-mainwindows-menus-example.html\" rel=\"nofollow noreferrer\">https://doc.qt.io/qt-5/qtwidgets-mainwindows-menus-example.html</a> and also the <code>QMenuBar</code> reference <a href=\"https://doc.qt.io/qt-5/qmenubar.html#details\" rel=\"nofollow noreferrer\">https://doc.qt.io/qt-5/qmenubar.html#details</a></p>\n"}], "owner": {"reputation": 95, "user_id": 5193899, "user_type": "registered", "profile_image": "https://graph.facebook.com/693008134163890/picture?type=large", "display_name": "Joseph Ali", "link": "https://stackoverflow.com/users/5193899/joseph-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12983, "favorite_count": 0, "accepted_answer_id": 41367567, "answer_count": 4, "score": 3, "last_activity_date": 1576455599, "creation_date": 1482946606, "last_edit_date": 1576455599, "question_id": 41367027, "link": "https://stackoverflow.com/questions/41367027/qt-add-menubar-menus-and-sub-menus-to-qmainwindow", "title": "Qt add menuBar, menus, and sub menus to QMainWindow", "body": "<p>I have a hard time adding menu Bar, menus and sub menus to Qt QMainWindow programmatically.</p>\n\n<p>The following code produces an error:</p>\n\n<p><b> QWidget::setLayout: Attempting to set QLayout \"\" on QMainWindow \"\", which already has a layout </b></p>\n\n<p>Notes :\n*.The main window come out without any menu or Layout (Empty!)</p>\n\n<pre><code>#include &lt;QApplication&gt;\n\n#include &lt;QApplication&gt;\n#include&lt;QSlider&gt;\n#include&lt;QSpinBox&gt;\n#include&lt;QHBoxLayout&gt;\n#include&lt;QWidget&gt;\n\n#include \"mainwindow.h\"\n#include&lt;QMenuBar&gt;\n#include&lt;QStatusBar&gt;\n\nint main(int argc, char *argv[])\n{\n\n    QApplication a(argc, argv);\n\n    QMenuBar *menu = new QMenuBar;\n            QMenu *file = new QMenu();\n            file-&gt;addMenu(\"&amp;File\");\n            menu-&gt;addMenu(file);\n\n            QSlider *s1 = new QSlider(Qt::Horizontal);\n               QSlider *s2 = new QSlider(Qt::Vertical);\n               QSpinBox *sb = new QSpinBox;\n\n\n               QHBoxLayout *L = new QHBoxLayout;\n                L-&gt;addWidget(s1);\n                L-&gt;addWidget(s2);\n                L-&gt;addWidget(sb);\n\n\n\n\n     QMainWindow *w = new QMainWindow;\n     w-&gt;setLayout(L);\n     w-&gt;show();\n\n    return a.exec();\n}\n</code></pre>\n"}, {"tags": ["c++", "switch-statement"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1482946679, "post_id": 41366999, "comment_id": 69935463, "body": "<code>switch (i) { case 7: case 14: case 21: &#47;* etc... *&#47;; break; default: &#47;* all others *&#47;</code>?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 4, "creation_date": 1482946903, "post_id": 41366999, "comment_id": 69935560, "body": "Why do you want to use <code>switch</code>?  The <code>if</code> statement is perfectly reasonable."}, {"owner": {"reputation": 404, "user_id": 5787139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a827319c75c27d560e4e9964bb16182?s=128&d=identicon&r=PG&f=1", "display_name": "Owen Hempel", "link": "https://stackoverflow.com/users/5787139/owen-hempel"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1482947283, "post_id": 41366999, "comment_id": 69935734, "body": "@Someprogrammerdude doesn&#39;t this require you to know and list all the numbers divisible by 7? If I ask you to write the same program for all numbers &lt; 10000, your answer becomes... cumbersome."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "reply_to_user": {"reputation": 404, "user_id": 5787139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a827319c75c27d560e4e9964bb16182?s=128&d=identicon&r=PG&f=1", "display_name": "Owen Hempel", "link": "https://stackoverflow.com/users/5787139/owen-hempel"}, "edited": false, "score": 4, "creation_date": 1482947325, "post_id": 41366999, "comment_id": 69935754, "body": "@OwenHempel That&#39;s the joke."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 404, "user_id": 5787139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a827319c75c27d560e4e9964bb16182?s=128&d=identicon&r=PG&f=1", "display_name": "Owen Hempel", "link": "https://stackoverflow.com/users/5787139/owen-hempel"}, "edited": false, "score": 1, "creation_date": 1482947695, "post_id": 41366999, "comment_id": 69935940, "body": "@OwenHempel That&#39;s kind of the point. There is simply no need or use for a <code>switch</code> statement here. Either it will be something like mine which does not scale well, or something like in <a href=\"http://stackoverflow.com/a/41367070/440558\">paweldacs answer</a> which is just a cumbersome <code>if</code> statement. If it&#39;s a requirement for a school assignment then it&#39;s made by an obnoxious teacher who apparently dislikes his or her work, or his/hers students."}, {"owner": {"reputation": 1028, "user_id": 6367382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/175db0b1397c4a1080a871263e735251?s=128&d=identicon&r=PG&f=1", "display_name": "paweldac", "link": "https://stackoverflow.com/users/6367382/paweldac"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1482950384, "post_id": 41366999, "comment_id": 69937254, "body": "@Someprogrammerdude You made my day with &quot;cumbersome if statement&quot;. Thank you :) I just did what OP asked :) I don&#39;t support such solution, but for syntax learning purposes everything is fine from my POV."}], "answers": [{"tags": [], "owner": {"reputation": 1028, "user_id": 6367382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/175db0b1397c4a1080a871263e735251?s=128&d=identicon&r=PG&f=1", "display_name": "paweldac", "link": "https://stackoverflow.com/users/6367382/paweldac"}, "is_accepted": false, "score": 0, "last_activity_date": 1482946775, "creation_date": 1482946775, "answer_id": 41367070, "question_id": 41366999, "link": "https://stackoverflow.com/questions/41366999/program-that-displays-all-multiples-of-7-between-1-and-100-c/41367070#41367070", "title": "Program that displays all multiples of 7 between 1 and 100 C++", "body": "<p>Here you are:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main()\n{\n    for (int i = 1; i&lt;=100; i++)\n    {\n        switch(i % 7)\n        {\n            case 0:\n                std::cout &lt;&lt; i &lt;&lt; std::endl;\n                break;\n            default:\n                break;\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Online compilation: <a href=\"http://ideone.com/uq8Jue\" rel=\"nofollow noreferrer\">http://ideone.com/uq8Jue</a></p>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1482947203, "post_id": 41367140, "comment_id": 69935699, "body": "<i>&quot;A switch statement is like an if-else statement&quot;</i> Not really, no"}, {"owner": {"reputation": 404, "user_id": 5787139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a827319c75c27d560e4e9964bb16182?s=128&d=identicon&r=PG&f=1", "display_name": "Owen Hempel", "link": "https://stackoverflow.com/users/5787139/owen-hempel"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1482947451, "post_id": 41367140, "comment_id": 69935822, "body": "@LightnessRacesinOrbit well if you read on, there&#39;s an explanation... I&#39;m trying to simplify it for someone. The finer details aren&#39;t as important as the concept."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1482947727, "post_id": 41367140, "comment_id": 69935955, "body": "It&#39;s the concept I&#39;m having difficulty with. Thinking of a <code>switch</code> statement as &quot;like an if-else statement&quot; will likely lead to misusing it, because that is not what it is for."}, {"owner": {"reputation": 404, "user_id": 5787139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a827319c75c27d560e4e9964bb16182?s=128&d=identicon&r=PG&f=1", "display_name": "Owen Hempel", "link": "https://stackoverflow.com/users/5787139/owen-hempel"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1482948016, "post_id": 41367140, "comment_id": 69936109, "body": "Quote the whole sentence, as the second half of it makes the &quot;like a if else&quot; part make more sense. It&#39;s not &quot;exactly equivalent to&quot;, nor is that the intent of the sentence"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1482948047, "post_id": 41367140, "comment_id": 69936126, "body": "All you say is &quot;except that it isn&#39;t a Boolean argument&quot;, which is not the point of the distinction. Never mind."}], "tags": [], "owner": {"reputation": 404, "user_id": 5787139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a827319c75c27d560e4e9964bb16182?s=128&d=identicon&r=PG&f=1", "display_name": "Owen Hempel", "link": "https://stackoverflow.com/users/5787139/owen-hempel"}, "is_accepted": false, "score": 0, "last_activity_date": 1482947105, "creation_date": 1482947105, "answer_id": 41367140, "question_id": 41366999, "link": "https://stackoverflow.com/questions/41366999/program-that-displays-all-multiples-of-7-between-1-and-100-c/41367140#41367140", "title": "Program that displays all multiples of 7 between 1 and 100 C++", "body": "<p>It sounds like you are a little unfamiliar with a switch statement. A switch statement is like an if-else statement, except that it isn't a Boolean argument. So essentially it asks: Tell me the value of . And then for each case (possible outcome), it has a follow up action.</p>\n\n<p>So you want to ask: tell me the value of the number, modulus 7. If it is zero, add one to the counter. If it is 1, do .</p>\n\n<p>So your code should have a general structure of:</p>\n\n<pre><code>Switch(i%7):\n   Case 0{increment counter or display to std. out or store in array}\n   Case 1{other action}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 58, "user_id": 10716280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41ef167cc248459c37f88c5b36452c44?s=128&d=identicon&r=PG&f=1", "display_name": "J01337", "link": "https://stackoverflow.com/users/10716280/j01337"}, "is_accepted": false, "score": 1, "last_activity_date": 1554127144, "creation_date": 1554127144, "answer_id": 55456947, "question_id": 41366999, "link": "https://stackoverflow.com/questions/41366999/program-that-displays-all-multiples-of-7-between-1-and-100-c/55456947#55456947", "title": "Program that displays all multiples of 7 between 1 and 100 C++", "body": "<p>The code you're looking for should be something like this:</p>\n\n<pre><code>#include &lt;iostream&gt;  // this is for std::cin and std::cout (standard input and output)\n\nusing namespace std; // to shorten std::cout into cout\n\nint main() {\n\n    cout &lt;&lt; \"multiples of 7 lower than 100 are:\" &lt;&lt; endl;\n    for ( int i=1 ; i&lt;=100 ; i++ ) {\n        switch ( i%7 ) {\n            case 0:                // this case 0 is similar to if ( i%7 == 0 )\n                cout &lt;&lt; i &lt;&lt; \" \";\n                break;\n            default:\n                break;\n        }\n    }\n    cout &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>The output will then be:</p>\n\n<pre><code>multiples of 7 lower than 100 are:\n7 14 21 28 35 42 49 56 63 70 77 84 91 98\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 980, "user_id": 10185183, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oUA_ZF9CW5c/AAAAAAAAAAI/AAAAAAAACX0/TLhc82gWtsI/photo.jpg?sz=128", "display_name": "arsdever", "link": "https://stackoverflow.com/users/10185183/arsdever"}, "is_accepted": false, "score": 0, "last_activity_date": 1558996286, "creation_date": 1558996286, "answer_id": 56333071, "question_id": 41366999, "link": "https://stackoverflow.com/questions/41366999/program-that-displays-all-multiples-of-7-between-1-and-100-c/56333071#56333071", "title": "Program that displays all multiples of 7 between 1 and 100 C++", "body": "<p>It is possible to replace the <code>if</code> statement with <code>switch/case</code> statement for your case. But I think you have some misunderstanding about where to use <code>if</code> and where <code>switch/case</code> statements. I will suggest you use this statement as they are used in real life.</p>\n\n<p>Use <code>if</code>, if you're going to check the condition. For example:</p>\n\n<p><code>if (a &gt; b){...}</code> or <code>if (a == 7){...}</code> or <code>if (functionReturnsTrue()){...}</code></p>\n\n<p>The <code>switch/case</code> statement could be used when you have a set of conditions and the logic is different for each element in that set. For example:</p>\n\n<pre><code>enum HttpMethod {\n  GET,\n  POST,\n  PUT,\n  DELETE,\n};\n\n...\n\nvoid handleHttpRequest(HttpRequest req)\n{\n  ...\n  switch(req.getHttpMethod())\n  {\n    case GET: handleGETRequest(req); break;\n    case POST: handlePOSTRequest(req); break;\n    case PUT: handlePUTRequest(req); break;\n    case DELETE: handleDELETERequest(req); break;\n    default: throw InvalidHttpMethod(); // in case when noone corresponds to the variable\n  }\n}\n</code></pre>\n\n<p>Of course, you can write the same using <code>if</code> statement, but <code>switch/case</code> statement also have some compilation effects. When you <code>switch</code> the variable of <code>enum</code> type, you might get a compiler warning at least, if you dont check your variable for all possible flows.    </p>\n"}], "owner": {"reputation": 11, "user_id": 7350873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68e81eea70cf7ee55bc4f3752c22e384?s=128&d=identicon&r=PG&f=1", "display_name": "user7350873", "link": "https://stackoverflow.com/users/7350873/user7350873"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5645, "favorite_count": 1, "answer_count": 4, "score": -10, "last_activity_date": 1603179002, "creation_date": 1482946480, "last_edit_date": 1603179002, "question_id": 41366999, "link": "https://stackoverflow.com/questions/41366999/program-that-displays-all-multiples-of-7-between-1-and-100-c", "title": "Program that displays all multiples of 7 between 1 and 100 C++", "body": "<p>How to write this program with <code>switch</code> condition statement instead of <code>if</code>?</p>\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\nint main() {\n  int i;\n  for (i = 1; i &lt;= 100; i++) {\n    if ((i % 7 == 0) &amp;&amp; (i &gt; 0)) {\n      cout &lt;&lt; i &lt;&lt; endl;\n    }\n  }\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "mongodb", "dll", "legacy", "mongodb-replica-set"], "answers": [{"tags": [], "owner": {"reputation": 23, "user_id": 7020564, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f31d6dff8bce5d33035c36d6f1c23e65?s=128&d=identicon&r=PG&f=1", "display_name": "Harold", "link": "https://stackoverflow.com/users/7020564/harold"}, "is_accepted": false, "score": 0, "last_activity_date": 1482970856, "creation_date": 1482970856, "answer_id": 41371574, "question_id": 41366971, "link": "https://stackoverflow.com/questions/41366971/c-legacy-driver-mongodb-replicaset-in-class-of-a-dll/41371574#41371574", "title": "C++ Legacy Driver mongoDB Replicaset in Class of a DLL", "body": "<p>For question No. 2, I remembered the reason for the error:</p>\n\n<p>You need to call mongo::client::initialize before you construct any driver objects, or BSON for that matter.</p>\n\n<p>But how to make that global definition possible, I still need a solution.</p>\n"}], "owner": {"reputation": 23, "user_id": 7020564, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f31d6dff8bce5d33035c36d6f1c23e65?s=128&d=identicon&r=PG&f=1", "display_name": "Harold", "link": "https://stackoverflow.com/users/7020564/harold"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1482970856, "creation_date": 1482946320, "last_edit_date": 1482947926, "question_id": 41366971, "link": "https://stackoverflow.com/questions/41366971/c-legacy-driver-mongodb-replicaset-in-class-of-a-dll", "title": "C++ Legacy Driver mongoDB Replicaset in Class of a DLL", "body": "<p>I have built a dll which includes a class implementing the mongoDB replicaset operations. Here is a summary of the class. </p>\n\n<pre><code>#include \"mongo/client/dbclient.h\"\n\nmongoimp::mongoimp() {\n    mongo::client::initialize();\n}\n\nmongoimp::~mongoimp() {\n    mongo::client::shutdown();\n}\n\nint mongoimp::queryTRecords() {\n    string errmsg;\n    vector&lt;mongo::HostAndPort&gt; hosts = { mongo::HostAndPort(\"xx-a0.yyyy.com:xxxxx\"), mongo::HostAndPort(\"xx-a1.yyyy.com:xxxxx\") };\n    static mongo::DBClientReplicaSet con(\"xx\", hosts, 0);\n    con.connect();\n    con.auth(\"dbname\", \"username\", \"password\", errmsg);\n    auto_ptr&lt;DBClientCursor&gt; cursor = con.query(\"dbname.t\", BSONObj());\n    BSONObj response;\n    con.logout(\"xx\", response);\n    if (cursor-&gt;more()) {\n        BSONObj recordnm = cursor-&gt;nextSafe();\n        return(recordnm.getIntField(\"lastid\"));\n    } else return(-1);\n}\n</code></pre>\n\n<p>The above code is working. But here are my questions:</p>\n\n<p>1) With the above setting, I can do normal mongoDB operations with the dll but since my application needs to constantly update mongoDB data (close to real-time, up to hundreds a second), I am getting error (No valid replicaset instance servers found) when updating data.</p>\n\n<p>2) Only the server needs to talk to the mongoDB database. So basically I just need one connection to the database. So I want to declare the mongo::DBClientReplicaSet con as a static global variable and connect to it in the class construct function. But it seemed I cannot do it. My application cannot run at all. With that, I constantly get the following error. </p>\n\n<p>Assertion failed: px != 0, file C:\\Boost\\include\\boost-1_62\\boost/smart_ptr/scoped_ptr.hpp, line 105</p>\n\n<p>Does anybody know how to solve the problem?</p>\n\n<p>Below is the code I tried:</p>\n\n<pre><code>static mongo::DBClientReplicaSet con(\"xx\", { mongo::HostAndPort(\"xx-a0.yyyy.com:xxxxx\"), mongo::HostAndPort(\"xx-a1.yyyy.com:xxxxx\") }, 0);\n\nmongoimp::mongoimp() {\n    mongo::client::initialize();\n    string errmsg;\n    con.connect();\n    con.auth(\"dbname\", \"username\", \"password\", errmsg);\n}\n\nmongoimp::~mongoimp() {\n    BSONObj response;\n    con.logout(\"xx\", response);\n    mongo::client::shutdown();\n}\n\nint mongoimp::queryTRecords() {\n    auto_ptr&lt;DBClientCursor&gt; cursor = con.query(\"dbname.t\", BSONObj());\n    if (cursor-&gt;more()) {\n        BSONObj recordnm = cursor-&gt;nextSafe();\n        return(recordnm.getIntField(\"lastid\"));\n    } else return(-1);\n}\n</code></pre>\n\n<p>3) Last question, I noticed there is mongo/client/dbclient_rs.h\" file for replicaset. But it seemed I cannot use it. With that, I am getting error for initialize() and auto_ptr cursor. How can I use the file and take full advantage of replicaset features? How can I initialize the relica set if I can use \"dbclient_rs.h\"? How do I do query and fetch data in that case?</p>\n\n<p>Thanks a lot in advance!</p>\n"}, {"tags": ["c++", "file"], "comments": [{"owner": {"reputation": 3189, "user_id": 7016303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dYmXc.jpg?s=128&g=1", "display_name": "Mikel F", "link": "https://stackoverflow.com/users/7016303/mikel-f"}, "edited": false, "score": 2, "creation_date": 1482946189, "post_id": 41366910, "comment_id": 69935247, "body": "Try reversing the order of the fputc() and getchar() lines."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1482946358, "post_id": 41366910, "comment_id": 69935329, "body": "The <code>fflush(stdin)</code> does not flush the input stream, it is meant for output streams.  Try <code>fflush(stdout)</code>."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1482946435, "post_id": 41366910, "comment_id": 69935356, "body": "Why are you using both C++ streams (<code>cin</code>, <code>cout</code>) and C style streams (<code>FILE *</code>)?  <i>Don&#39;t cross the streams.</i>  Use <code>std::ifstream</code> for files."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1482946557, "post_id": 41366910, "comment_id": 69935411, "body": "FYI, when using I/O prefer to write and read as many characters per transaction.  The <code>fputc</code> will be slower to write 128 characters than an <code>fwrite</code> or <code>fputs</code>."}, {"owner": {"reputation": 1, "user_id": 7350882, "user_type": "registered", "profile_image": "https://graph.facebook.com/1262485477168298/picture?type=large", "display_name": "Viet Nguyen", "link": "https://stackoverflow.com/users/7350882/viet-nguyen"}, "edited": false, "score": 0, "creation_date": 1482980698, "post_id": 41366910, "comment_id": 69946936, "body": "I was trying to use different methods to write into the text file, I used std::ifstream to work on the exercise then I encountered the problem. Thank you for your advice and useful tips :D."}], "answers": [{"comments": [{"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1482947500, "post_id": 41367097, "comment_id": 69935839, "body": "?? define &quot;better suited&quot;."}, {"owner": {"reputation": 821, "user_id": 4791654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-f6OIWNb562I/AAAAAAAAAAI/AAAAAAAAACY/Kuh1tIUZLbk/photo.jpg?sz=128", "display_name": "Tyler Lewis", "link": "https://stackoverflow.com/users/4791654/tyler-lewis"}, "reply_to_user": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1482947822, "post_id": 41367097, "comment_id": 69936003, "body": "@KarolyHorvath It is better to write idiomatic C++ for a C++ compiler."}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1482949220, "post_id": 41367097, "comment_id": 69936701, "body": "The compiler doesn&#39;t care. <i>People</i> Do (sometimes)."}, {"owner": {"reputation": 821, "user_id": 4791654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-f6OIWNb562I/AAAAAAAAAAI/AAAAAAAAACY/Kuh1tIUZLbk/photo.jpg?sz=128", "display_name": "Tyler Lewis", "link": "https://stackoverflow.com/users/4791654/tyler-lewis"}, "reply_to_user": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1482959839, "post_id": 41367097, "comment_id": 69941274, "body": "Thanks for the pedantry. It contributed a lot to the question."}, {"owner": {"reputation": 1, "user_id": 7350882, "user_type": "registered", "profile_image": "https://graph.facebook.com/1262485477168298/picture?type=large", "display_name": "Viet Nguyen", "link": "https://stackoverflow.com/users/7350882/viet-nguyen"}, "edited": false, "score": 0, "creation_date": 1482980862, "post_id": 41367097, "comment_id": 69946974, "body": "Well yes it is a bit odd here, but the main reason was I wanted to try some C methods that one of my friend asked me to do. And thank you for you your codes."}], "tags": [], "owner": {"reputation": 821, "user_id": 4791654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-f6OIWNb562I/AAAAAAAAAAI/AAAAAAAAACY/Kuh1tIUZLbk/photo.jpg?sz=128", "display_name": "Tyler Lewis", "link": "https://stackoverflow.com/users/4791654/tyler-lewis"}, "is_accepted": false, "score": 1, "last_activity_date": 1482946919, "creation_date": 1482946919, "answer_id": 41367097, "question_id": 41366910, "link": "https://stackoverflow.com/questions/41366910/fputc-leaves-the-first-line-empty-before-inserting-text/41367097#41367097", "title": "fputc leaves the first line empty before inserting text", "body": "<p>Out of curiosity, is there a reason for the C functions? Doing something like this in C++ would be better suited to using streams, like:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\n\nvoid writeFile(const char *fileName)\n{\n    ofstream writeToFile;\n    writeToFile.open(fileName);\n    if (!writeToFile.is_open()) {\n        cout &lt;&lt; \"Failed to open\" &lt;&lt; endl;\n        return;\n    } else {\n        string stringToWrite{\"\"};\n        char c = '\\0';        \n        cout &lt;&lt; \"Enter a text and end with dot (.): \";\n        while (c != '.') {\n            std::cin &gt;&gt; c;\n            stringToWrite += c;\n        }\n        writeToFile &lt;&lt; stringToWrite &lt;&lt; endl;\n        cout &lt;&lt; \"Written successfully\" &lt;&lt; endl;\n        writeToFile.close();\n    }\n}\n\nint main()\n{\n    const char *fileName=\"test.txt\";\n    writeFile(fileName);\n    return 0;\n}\n</code></pre>\n\n<p>or, alternatively:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\n\nvoid writeFile(const char *fileName)\n{\n    ofstream writeToFile;\n    writeToFile.open(fileName);\n    if (!writeToFile.is_open()) {\n        cout &lt;&lt; \"Failed to open\" &lt;&lt; endl;\n        return;\n    } else {\n        string stringToWrite{\"\"};     \n        cout &lt;&lt; \"Enter text and press return: \";\n        getline(cin, stringToWrite);\n        writeToFile &lt;&lt; stringToWrite &lt;&lt; endl;\n        cout &lt;&lt; \"Written successfully\" &lt;&lt; endl;\n        writeToFile.close();\n    }\n}\n\nint main()\n{\n    const char *fileName=\"test.txt\";\n    writeFile(fileName);\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 7350882, "user_type": "registered", "profile_image": "https://graph.facebook.com/1262485477168298/picture?type=large", "display_name": "Viet Nguyen", "link": "https://stackoverflow.com/users/7350882/viet-nguyen"}, "edited": false, "score": 0, "creation_date": 1482981330, "post_id": 41367196, "comment_id": 69947074, "body": "Umm I just added information on my post about different IDE giving different results. I have the problem only on VisualStudio2015, and I did try modifying my why loop as your suggestion but It still did not work."}], "tags": [], "owner": {"reputation": 6013, "user_id": 3310281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9b8b4ec03e2c7a424fdc428eb55f2e8?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm McLean", "link": "https://stackoverflow.com/users/3310281/malcolm-mclean"}, "is_accepted": false, "score": 0, "last_activity_date": 1482947327, "creation_date": 1482947327, "answer_id": 41367196, "question_id": 41366910, "link": "https://stackoverflow.com/questions/41366910/fputc-leaves-the-first-line-empty-before-inserting-text/41367196#41367196", "title": "fputc leaves the first line empty before inserting text", "body": "<p>c is 0 on the first pass, hence the blank line.</p>\n\n<p>change the while loop to</p>\n\n<pre><code>  while( (c = getchar()) != EOF)\n   {\n       if(c == '.')\n         break;\n   }\n</code></pre>\n\n<p>It looks a bit odd, but is idiomatic for reading characters from a stream in C.</p>\n"}], "owner": {"reputation": 1, "user_id": 7350882, "user_type": "registered", "profile_image": "https://graph.facebook.com/1262485477168298/picture?type=large", "display_name": "Viet Nguyen", "link": "https://stackoverflow.com/users/7350882/viet-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1482981215, "creation_date": 1482946025, "last_edit_date": 1482981215, "question_id": 41366910, "link": "https://stackoverflow.com/questions/41366910/fputc-leaves-the-first-line-empty-before-inserting-text", "title": "fputc leaves the first line empty before inserting text", "body": "<p>I use getchar() and loop to get a text and use fputc() to put into the text file, but it always leaves the first line empty in the text file after writing. The loop stops when character input is a dot (.). How can I delete the first line?</p>\n\n<p>Updated (12/29/2016): I used DevC++ and the codes run finely without creating an empty blank, but my VisualStudio2015 had the problem.   </p>\n\n<p>Example: create a file named test.txt</p>\n\n<p>input: this is a text.</p>\n\n<p>output: (in the text file)</p>\n\n<blockquote>\n  <p>[ a blank line ]</p>\n  \n  <p>this is a text</p>\n</blockquote>\n\n<pre><code>void writeFile(char *fileName){\n    FILE *fp;\n    fp = fopen(fileName, \"wt\"); //write text\n    if (fp == NULL) {\n        cout &lt;&lt; \"Failed to open\" &lt;&lt; endl;\n        fclose(fp);\n    }\n    else {\n        int i = 0;\n        char c = '\\0';        \n        cout &lt;&lt; \"Enter a text and end with dot (.): \";\n        fflush(stdin);\n        //c = getchar();\n        while (c != '.') {\n            fputc(c, fp);\n            c = getchar();\n        }\n        cout &lt;&lt; \"Written successfully\" &lt;&lt; endl;\n        fclose(fp);\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "constructor"], "comments": [{"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 1, "creation_date": 1482946154, "post_id": 41366906, "comment_id": 69935230, "body": "<code>void Student::display_student() {...}</code>. More on not-quite-right code in your favorite C++ book."}], "answers": [{"comments": [{"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1482956601, "post_id": 41366952, "comment_id": 69939943, "body": "<a href=\"http://eel.is/c++draft/class.copy#ctor-1\" rel=\"nofollow noreferrer\">Copy constructor can also have <code>X &amp;</code> as a parameter</a>. Am I wrong?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1482964084, "post_id": 41366952, "comment_id": 69942860, "body": "@skypjack: Indeed, you&#39;re right, Thanks for the info. (But there are no reasons for OP to use the non const version)"}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 0, "last_activity_date": 1482964107, "last_edit_date": 1482964107, "creation_date": 1482946222, "answer_id": 41366952, "question_id": 41366906, "link": "https://stackoverflow.com/questions/41366906/copy-constructor-syntax-display-the-values-of-constructor/41366952#41366952", "title": "copy constructor syntax &amp; display the values of constructor", "body": "<p>Copy constructor signature uses generally const reference. In your case, you may use the default implementation:</p>\n\n<pre><code>Student(const Student&amp;) = default;\n</code></pre>\n\n<p>You may also add copy assignment:</p>\n\n<pre><code>Student&amp; operator=(const Student&amp;) = default;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 922, "user_id": 5991102, "user_type": "registered", "accept_rate": 30, "profile_image": "https://lh4.googleusercontent.com/-82TFHov0JE0/AAAAAAAAAAI/AAAAAAAAADc/QHywlTFF-Uo/photo.jpg?sz=128", "display_name": "pSoLT", "link": "https://stackoverflow.com/users/5991102/psolt"}, "is_accepted": false, "score": 1, "last_activity_date": 1482946312, "creation_date": 1482946312, "answer_id": 41366969, "question_id": 41366906, "link": "https://stackoverflow.com/questions/41366906/copy-constructor-syntax-display-the-values-of-constructor/41366969#41366969", "title": "copy constructor syntax &amp; display the values of constructor", "body": "<p>You didn't specify the return value in the definition of <code>Student::display_student()</code>. Try:</p>\n\n<pre><code>void Student::display_student()\n{\n    cout &lt;&lt; \"Student Name ::\" &lt;&lt; name &lt;&lt; endl &lt;&lt; \"Student Roll No. ::\" &lt;&lt; rollno &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Compiler assumes <code>int Student::display_student()</code> by default. The class declaration contains the prototype for <code>void display_student()</code> but you provided only the definition for function  <code>int display_student()</code>.</p>\n"}], "owner": {"reputation": 1765, "user_id": 4221591, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/0856251c862f636c9af8ab8c487dfffb?s=128&d=identicon&r=PG&f=1", "display_name": "user4221591", "link": "https://stackoverflow.com/users/4221591/user4221591"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1482964107, "creation_date": 1482945996, "question_id": 41366906, "link": "https://stackoverflow.com/questions/41366906/copy-constructor-syntax-display-the-values-of-constructor", "title": "copy constructor syntax &amp; display the values of constructor", "body": "<p>I am writing a program where I need to use copy constructor. Since I am novice in using copy constructor I do not know whether my declaration and using of copy constructor is valid or not? </p>\n\n<p>Also here I am facing problem with the display function, the error is :: \n<code>error: prototype for 'int Student::display_student()' does not match any in class 'Student'</code>. What is this error?</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass Student\n{\n    private:\n        int rollno;\n        string name;\n    public:\n        Student(); \n        Student(int x, string str); \n        Student(Student &amp;s); \n        void display_student();\n};\n\nStudent::Student()\n {\n  rollno = 0 ;\n  name = \"\" ;\n }\n\n Student::Student(int x, string str)\n {\n  rollno=x ;\n  name=str ;\n }\n\nStudent::Student(Student &amp;s)\n{\n  rollno = s.rollno ;\n  name = s.name;\n}\n\nStudent::display_student()\n{\n    cout &lt;&lt; \"Student Name ::\" &lt;&lt; name &lt;&lt; endl &lt;&lt; \"Student Roll No. ::\" &lt;&lt; rollno &lt;&lt; endl;\n}\n\n\nint main()\n{\n Student A;\n Student B(09,\"Jhonny\");\n Student C(B);\n A.display_student();\n B.display_student();\n C.display_student();\n return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "embedded-linux"], "answers": [{"comments": [{"owner": {"reputation": 975, "user_id": 3733986, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/4tcnA.jpg?s=128&g=1", "display_name": "marc", "link": "https://stackoverflow.com/users/3733986/marc"}, "edited": false, "score": 0, "creation_date": 1482955997, "post_id": 41366781, "comment_id": 69939680, "body": "Thanks! Its still not compiling.../home/user/test/main.cpp:40:26: error: &#39;th&amp; th::operator=(th&amp;&amp;)&#39; cannot be defaulted"}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "reply_to_user": {"reputation": 975, "user_id": 3733986, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/4tcnA.jpg?s=128&g=1", "display_name": "marc", "link": "https://stackoverflow.com/users/3733986/marc"}, "edited": false, "score": 0, "creation_date": 1482957057, "post_id": 41366781, "comment_id": 69940131, "body": "@mmmint Which compiler are you using? It must be a C++11 compiler to be able to create a default move assignment operator."}, {"owner": {"reputation": 975, "user_id": 3733986, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/4tcnA.jpg?s=128&g=1", "display_name": "marc", "link": "https://stackoverflow.com/users/3733986/marc"}, "edited": false, "score": 0, "creation_date": 1483006918, "post_id": 41366781, "comment_id": 69957071, "body": "Its a crosscompiler from TI with experimental support of C++11 (C++03). Target: arm-arago-linux-gnueabi Thread model: posix gcc version 4.5.3 20110311 (prerelease) (GCC)"}], "tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": false, "score": 1, "last_activity_date": 1482945441, "creation_date": 1482945441, "answer_id": 41366781, "question_id": 41366632, "link": "https://stackoverflow.com/questions/41366632/deque-with-unique-ptr-of-thread-wrapper/41366781#41366781", "title": "deque with unique_ptr of thread wrapper", "body": "<p>The problem is that your class is non-movable. I can understand that since the class has a <code>std::thread</code> you'd want to avoid the default copy behavior, but I don't see any reason that the class should be non-movable. If you enable the move construction and assignment <a href=\"http://cpp.sh/3w53\" rel=\"nofollow noreferrer\">your code works fine</a>.</p>\n\n<pre><code>th(th const&amp; other) = delete;\nth(th &amp;&amp; other) = default;\nth&amp; operator=(th const&amp; other) = delete;\nth&amp; operator=(th &amp;&amp;) = default;\n</code></pre>\n\n<p>Also I'd adjust how you were constructing these objects to the following</p>\n\n<pre><code>for(size_t i = 0; i &lt; 2; ++i) {\n    deq.push_back(std::make_unique&lt;th&gt;(&amp;progress[i]));\n}\n</code></pre>\n"}], "owner": {"reputation": 975, "user_id": 3733986, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/4tcnA.jpg?s=128&g=1", "display_name": "marc", "link": "https://stackoverflow.com/users/3733986/marc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1483007145, "creation_date": 1482944844, "last_edit_date": 1483007145, "question_id": 41366632, "link": "https://stackoverflow.com/questions/41366632/deque-with-unique-ptr-of-thread-wrapper", "title": "deque with unique_ptr of thread wrapper", "body": "<p>I'm trying to compile this for an embedded project, but it keeps failing to compile. The code compiles properly with clang on mac.\nThe example basically adds 2 threads to a deque container, joins them and deletes them from the container. <strong>UPDATED</strong></p>\n\n<pre><code>class th {\n    public:\n        void func() {\n            sleep(3);\n            *this-&gt;progress = 100;\n        }\n\n        th(int* prog) :\n            progress(prog), \n            m_thread(std::thread(&amp;th::func, this)) {};\n\n        th(th const&amp; other) = delete;\n        th(th &amp;&amp; other) = default;\n        th&amp; operator=(th const&amp; other) = delete;\n        th&amp; operator=(th &amp;&amp;) = default;\n\n        void join() { m_thread.join(); }\n        int *progress;\n\n    private:\n        std::thread m_thread;\n};\n\nint main(void) {\n\n        std::vector&lt;int&gt; progress;\n        progress.push_back(-1);\n        progress.push_back(-1);\n\n        std::deque&lt;std::unique_ptr&lt;th&gt;&gt; deq;\n\n        std::cout &lt;&lt; \"progress[0]:\" &lt;&lt; progress[0] &lt;&lt; std::endl;\n        std::cout &lt;&lt; \"progress[1]:\" &lt;&lt; progress[1] &lt;&lt; std::endl;\n\n        std::cout &lt;&lt; \"executing threads...\" &lt;&lt; std::endl;\n\n        for(size_t i = 0; i &lt; 2; ++i) {\n            deq.push_back(std::unique_ptr&lt;th&gt;(new th(&amp;progress[i])));\n        }\n\n        while(true) {\n            std::cout &lt;&lt; \"SIZE:\" &lt;&lt; deq.size() &lt;&lt; std::endl;\n\n            if(deq.size() == 0)\n                break;\n\n            for (std::deque&lt;std::unique_ptr&lt;th&gt;&gt;::iterator it = deq.begin(); it != deq.end(); it++) {\n                //std::cout &lt;&lt; (*it)-&gt;progress &lt;&lt; std::endl;\n                if(*((*it)-&gt;progress) == 100) {\n                    std::cout &lt;&lt; \"JOIN &amp; DELETE\" &lt;&lt; std::endl;\n                    (*it)-&gt;join();\n                    deq.erase(it);\n                }\n                else {\n                    std::cout &lt;&lt; \"STILL RUNNING\" &lt;&lt; std::endl;\n                }\n                    //std::cout &lt;&lt; *((*it)-&gt;progress) &lt;&lt; std::endl;\n            }\n            sleep(1);\n        }\n\n    exit(EXIT_SUCCESS);\n}\n</code></pre>\n\n<p><strong>UPDATED</strong> - the compiler message:</p>\n\n<pre><code>In file included from /ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/concept_check.h:55:0,\n                 from /ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/move.h:35,\n                 from /ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/stl_pair.h:60,\n                 from /ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/stl_algobase.h:66,\n                 from /ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/char_traits.h:41,\n                 from /ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/ios:41,\n                 from /ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/ostream:40,\n                 from /ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/iostream:40,\n                 from /home/user/test/app/ato/main.cpp:1:\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/unique_ptr.h: In member function 'void __gnu_cxx::_SGIAssignableConcept&lt;_Tp&gt;::__constraints() [with _Tp = std::unique_ptr&lt;th&gt;]':\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/stl_deque.h:717:1:   instantiated from 'std::deque&lt;std::unique_ptr&lt;th&gt; &gt;'\n/home/user/test/app/ato/main.cpp:55:35:   instantiated from here\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/unique_ptr.h:207:7: error: deleted function 'std::unique_ptr&lt;_Tp, _Tp_Deleter&gt;::unique_ptr(const std::unique_ptr&lt;_Tp, _Tp_Deleter&gt;&amp;) [with _Tp = th, _Tp_Deleter = std::default_delete&lt;th&gt;, std::unique_ptr&lt;_Tp, _Tp_Deleter&gt; = std::unique_ptr&lt;th&gt;]'\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/boost_concept_check.h:203:28: error: used here\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/unique_ptr.h:208:19: error: deleted function 'std::unique_ptr&lt;_Tp, _Tp_Deleter&gt;&amp; std::unique_ptr&lt;_Tp, _Tp_Deleter&gt;::operator=(const std::unique_ptr&lt;_Tp, _Tp_Deleter&gt;&amp;) [with _Tp = th, _Tp_Deleter = std::default_delete&lt;th&gt;, std::unique_ptr&lt;_Tp, _Tp_Deleter&gt; = std::unique_ptr&lt;th&gt;]'\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/boost_concept_check.h:204:7: error: used here\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/unique_ptr.h: In member function 'void __gnu_cxx::_SGIAssignableConcept&lt;_Tp&gt;::__const_constraints(const _Tp&amp;) [with _Tp = std::unique_ptr&lt;th&gt;]':\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/boost_concept_check.h:205:7:   instantiated from 'void __gnu_cxx::_SGIAssignableConcept&lt;_Tp&gt;::__constraints() [with _Tp = std::unique_ptr&lt;th&gt;]'\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/stl_deque.h:717:1:   instantiated from 'std::deque&lt;std::unique_ptr&lt;th&gt; &gt;'\n/home/user/test/app/ato/main.cpp:55:35:   instantiated from here\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/unique_ptr.h:207:7: error: deleted function 'std::unique_ptr&lt;_Tp, _Tp_Deleter&gt;::unique_ptr(const std::unique_ptr&lt;_Tp, _Tp_Deleter&gt;&amp;) [with _Tp = th, _Tp_Deleter = std::default_delete&lt;th&gt;, std::unique_ptr&lt;_Tp, _Tp_Deleter&gt; = std::unique_ptr&lt;th&gt;]'\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/boost_concept_check.h:208:28: error: used here\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/unique_ptr.h:208:19: error: deleted function 'std::unique_ptr&lt;_Tp, _Tp_Deleter&gt;&amp; std::unique_ptr&lt;_Tp, _Tp_Deleter&gt;::operator=(const std::unique_ptr&lt;_Tp, _Tp_Deleter&gt;&amp;) [with _Tp = th, _Tp_Deleter = std::default_delete&lt;th&gt;, std::unique_ptr&lt;_Tp, _Tp_Deleter&gt; = std::unique_ptr&lt;th&gt;]'\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/boost_concept_check.h:209:7: error: used here\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/unique_ptr.h: In member function 'void __gnu_cxx::_Mutable_BidirectionalIteratorConcept&lt;_Tp&gt;::__constraints() [with _Tp = std::unique_ptr&lt;th&gt;*]':\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/boost_concept_check.h:57:50:   instantiated from 'void __gnu_cxx::__function_requires() [with _Concept = __gnu_cxx::_Mutable_BidirectionalIteratorConcept&lt;std::unique_ptr&lt;th&gt;*&gt;]'\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/stl_algobase.h:673:7:   instantiated from '_BI2 std::move_backward(_BI1, _BI1, _BI2) [with _BI1 = std::unique_ptr&lt;th&gt;*, _BI2 = std::unique_ptr&lt;th&gt;*]'\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/deque.tcc:978:4:   instantiated from 'std::_Deque_iterator&lt;_Tp, _Tp&amp;, _Tp*&gt; std::move_backward(std::_Deque_iterator&lt;_Tp, const _Tp&amp;, const _Tp*&gt;, std::_Deque_iterator&lt;_Tp, const _Tp&amp;, const _Tp*&gt;, std::_Deque_iterator&lt;_Tp, _Tp&amp;, _Tp*&gt;) [with _Tp = std::unique_ptr&lt;th&gt;]'\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/stl_deque.h:422:13:   instantiated from 'std::_Deque_iterator&lt;_Tp, _Tp&amp;, _Tp*&gt; std::move_backward(std::_Deque_iterator&lt;_Tp, _Tp&amp;, _Tp*&gt;, std::_Deque_iterator&lt;_Tp, _Tp&amp;, _Tp*&gt;, std::_Deque_iterator&lt;_Tp, _Tp&amp;, _Tp*&gt;) [with _Tp = std::unique_ptr&lt;th&gt;]'\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/deque.tcc:174:6:   instantiated from 'std::deque&lt;_Tp, _Alloc&gt;::iterator std::deque&lt;_Tp, _Alloc&gt;::erase(std::deque&lt;_Tp, _Alloc&gt;::iterator) [with _Tp = std::unique_ptr&lt;th&gt;, _Alloc = std::allocator&lt;std::unique_ptr&lt;th&gt; &gt;, std::deque&lt;_Tp, _Alloc&gt;::iterator = std::_Deque_iterator&lt;std::unique_ptr&lt;th&gt;, std::unique_ptr&lt;th&gt;&amp;, std::unique_ptr&lt;th&gt;*&gt;]'\n/home/user/test/app/ato/main.cpp:97:18:   instantiated from here\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/unique_ptr.h:208:19: error: deleted function 'std::unique_ptr&lt;_Tp, _Tp_Deleter&gt;&amp; std::unique_ptr&lt;_Tp, _Tp_Deleter&gt;::operator=(const std::unique_ptr&lt;_Tp, _Tp_Deleter&gt;&amp;) [with _Tp = th, _Tp_Deleter = std::default_delete&lt;th&gt;, std::unique_ptr&lt;_Tp, _Tp_Deleter&gt; = std::unique_ptr&lt;th&gt;]'\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/boost_concept_check.h:513:7: error: used here\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/unique_ptr.h: In member function 'void __gnu_cxx::_ConvertibleConcept&lt;_From, _To&gt;::__constraints() [with _From = std::unique_ptr&lt;th&gt;, _To = std::unique_ptr&lt;th&gt;]':\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/boost_concept_check.h:57:50:   instantiated from 'void __gnu_cxx::__function_requires() [with _Concept = __gnu_cxx::_ConvertibleConcept&lt;std::unique_ptr&lt;th&gt;, std::unique_ptr&lt;th&gt; &gt;]'\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/stl_algobase.h:674:7:   instantiated from '_BI2 std::move_backward(_BI1, _BI1, _BI2) [with _BI1 = std::unique_ptr&lt;th&gt;*, _BI2 = std::unique_ptr&lt;th&gt;*]'\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/deque.tcc:978:4:   instantiated from 'std::_Deque_iterator&lt;_Tp, _Tp&amp;, _Tp*&gt; std::move_backward(std::_Deque_iterator&lt;_Tp, const _Tp&amp;, const _Tp*&gt;, std::_Deque_iterator&lt;_Tp, const _Tp&amp;, const _Tp*&gt;, std::_Deque_iterator&lt;_Tp, _Tp&amp;, _Tp*&gt;) [with _Tp = std::unique_ptr&lt;th&gt;]'\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/stl_deque.h:422:13:   instantiated from 'std::_Deque_iterator&lt;_Tp, _Tp&amp;, _Tp*&gt; std::move_backward(std::_Deque_iterator&lt;_Tp, _Tp&amp;, _Tp*&gt;, std::_Deque_iterator&lt;_Tp, _Tp&amp;, _Tp*&gt;, std::_Deque_iterator&lt;_Tp, _Tp&amp;, _Tp*&gt;) [with _Tp = std::unique_ptr&lt;th&gt;]'\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/deque.tcc:174:6:   instantiated from 'std::deque&lt;_Tp, _Alloc&gt;::iterator std::deque&lt;_Tp, _Alloc&gt;::erase(std::deque&lt;_Tp, _Alloc&gt;::iterator) [with _Tp = std::unique_ptr&lt;th&gt;, _Alloc = std::allocator&lt;std::unique_ptr&lt;th&gt; &gt;, std::deque&lt;_Tp, _Alloc&gt;::iterator = std::_Deque_iterator&lt;std::unique_ptr&lt;th&gt;, std::unique_ptr&lt;th&gt;&amp;, std::unique_ptr&lt;th&gt;*&gt;]'\n/home/user/test/app/ato/main.cpp:97:18:   instantiated from here\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/unique_ptr.h:207:7: error: deleted function 'std::unique_ptr&lt;_Tp, _Tp_Deleter&gt;::unique_ptr(const std::unique_ptr&lt;_Tp, _Tp_Deleter&gt;&amp;) [with _Tp = th, _Tp_Deleter = std::default_delete&lt;th&gt;, std::unique_ptr&lt;_Tp, _Tp_Deleter&gt; = std::unique_ptr&lt;th&gt;]'\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/boost_concept_check.h:218:27: error: used here\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/unique_ptr.h: In member function 'void __gnu_cxx::_OutputIteratorConcept&lt;_Tp, _ValueT&gt;::__constraints() [with _Tp = std::unique_ptr&lt;th&gt;*, _ValueT = std::unique_ptr&lt;th&gt;]':\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/boost_concept_check.h:57:50:   instantiated from 'void __gnu_cxx::__function_requires() [with _Concept = __gnu_cxx::_OutputIteratorConcept&lt;std::unique_ptr&lt;th&gt;*, std::unique_ptr&lt;th&gt; &gt;]'\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/stl_algobase.h:501:7:   instantiated from '_OI std::move(_II, _II, _OI) [with _II = std::unique_ptr&lt;th&gt;*, _OI = std::unique_ptr&lt;th&gt;*]'\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/deque.tcc:939:4:   instantiated from 'std::_Deque_iterator&lt;_Tp, _Tp&amp;, _Tp*&gt; std::move(std::_Deque_iterator&lt;_Tp, const _Tp&amp;, const _Tp*&gt;, std::_Deque_iterator&lt;_Tp, const _Tp&amp;, const _Tp*&gt;, std::_Deque_iterator&lt;_Tp, _Tp&amp;, _Tp*&gt;) [with _Tp = std::unique_ptr&lt;th&gt;]'\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/stl_deque.h:405:18:   instantiated from 'std::_Deque_iterator&lt;_Tp, _Tp&amp;, _Tp*&gt; std::move(std::_Deque_iterator&lt;_Tp, _Tp&amp;, _Tp*&gt;, std::_Deque_iterator&lt;_Tp, _Tp&amp;, _Tp*&gt;, std::_Deque_iterator&lt;_Tp, _Tp&amp;, _Tp*&gt;) [with _Tp = std::unique_ptr&lt;th&gt;]'\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/deque.tcc:180:6:   instantiated from 'std::deque&lt;_Tp, _Alloc&gt;::iterator std::deque&lt;_Tp, _Alloc&gt;::erase(std::deque&lt;_Tp, _Alloc&gt;::iterator) [with _Tp = std::unique_ptr&lt;th&gt;, _Alloc = std::allocator&lt;std::unique_ptr&lt;th&gt; &gt;, std::deque&lt;_Tp, _Alloc&gt;::iterator = std::_Deque_iterator&lt;std::unique_ptr&lt;th&gt;, std::unique_ptr&lt;th&gt;&amp;, std::unique_ptr&lt;th&gt;*&gt;]'\n/home/user/test/app/ato/main.cpp:97:18:   instantiated from here\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/unique_ptr.h:208:19: error: deleted function 'std::unique_ptr&lt;_Tp, _Tp_Deleter&gt;&amp; std::unique_ptr&lt;_Tp, _Tp_Deleter&gt;::operator=(const std::unique_ptr&lt;_Tp, _Tp_Deleter&gt;&amp;) [with _Tp = th, _Tp_Deleter = std::default_delete&lt;th&gt;, std::unique_ptr&lt;_Tp, _Tp_Deleter&gt; = std::unique_ptr&lt;th&gt;]'\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/boost_concept_check.h:462:7: error: used here\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/unique_ptr.h: In member function 'void __gnu_cxx::_Mutable_ForwardIteratorConcept&lt;_Tp&gt;::__constraints() [with _Tp = std::unique_ptr&lt;th&gt;*]':\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/boost_concept_check.h:57:50:   instantiated from 'void __gnu_cxx::__function_requires() [with _Concept = __gnu_cxx::_Mutable_ForwardIteratorConcept&lt;std::unique_ptr&lt;th&gt;*&gt;]'\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/boost_concept_check.h:512:7:   instantiated from 'void __gnu_cxx::_Mutable_BidirectionalIteratorConcept&lt;_Tp&gt;::__constraints() [with _Tp = std::unique_ptr&lt;th&gt;*]'\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/boost_concept_check.h:57:50:   instantiated from 'void __gnu_cxx::__function_requires() [with _Concept = __gnu_cxx::_Mutable_BidirectionalIteratorConcept&lt;std::unique_ptr&lt;th&gt;*&gt;]'\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/stl_algobase.h:673:7:   instantiated from '_BI2 std::move_backward(_BI1, _BI1, _BI2) [with _BI1 = std::unique_ptr&lt;th&gt;*, _BI2 = std::unique_ptr&lt;th&gt;*]'\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/deque.tcc:978:4:   instantiated from 'std::_Deque_iterator&lt;_Tp, _Tp&amp;, _Tp*&gt; std::move_backward(std::_Deque_iterator&lt;_Tp, const _Tp&amp;, const _Tp*&gt;, std::_Deque_iterator&lt;_Tp, const _Tp&amp;, const _Tp*&gt;, std::_Deque_iterator&lt;_Tp, _Tp&amp;, _Tp*&gt;) [with _Tp = std::unique_ptr&lt;th&gt;]'\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/stl_deque.h:422:13:   instantiated from 'std::_Deque_iterator&lt;_Tp, _Tp&amp;, _Tp*&gt; std::move_backward(std::_Deque_iterator&lt;_Tp, _Tp&amp;, _Tp*&gt;, std::_Deque_iterator&lt;_Tp, _Tp&amp;, _Tp*&gt;, std::_Deque_iterator&lt;_Tp, _Tp&amp;, _Tp*&gt;) [with _Tp = std::unique_ptr&lt;th&gt;]'\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/deque.tcc:174:6:   instantiated from 'std::deque&lt;_Tp, _Alloc&gt;::iterator std::deque&lt;_Tp, _Alloc&gt;::erase(std::deque&lt;_Tp, _Alloc&gt;::iterator) [with _Tp = std::unique_ptr&lt;th&gt;, _Alloc = std::allocator&lt;std::unique_ptr&lt;th&gt; &gt;, std::deque&lt;_Tp, _Alloc&gt;::iterator = std::_Deque_iterator&lt;std::unique_ptr&lt;th&gt;, std::unique_ptr&lt;th&gt;&amp;, std::unique_ptr&lt;th&gt;*&gt;]'\n/home/user/test/app/ato/main.cpp:97:18:   instantiated from here\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/unique_ptr.h:208:19: error: deleted function 'std::unique_ptr&lt;_Tp, _Tp_Deleter&gt;&amp; std::unique_ptr&lt;_Tp, _Tp_Deleter&gt;::operator=(const std::unique_ptr&lt;_Tp, _Tp_Deleter&gt;&amp;) [with _Tp = th, _Tp_Deleter = std::default_delete&lt;th&gt;, std::unique_ptr&lt;_Tp, _Tp_Deleter&gt; = std::unique_ptr&lt;th&gt;]'\n/ti-sdk-am335x-evm-05.04.01.00/linux-devkit/bin/../lib/gcc/arm-arago-linux-gnueabi/4.5.3/../../../../arm-arago-linux-gnueabi/include/c++/4.5.3/bits/boost_concept_check.h:488:7: error: used here\nmake: *** [/home/user/test/obj/main.o] Error 1\n</code></pre>\n"}, {"tags": ["c++", "c++11", "templates", "template-templates"], "answers": [{"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 3, "creation_date": 1482946748, "post_id": 41366621, "comment_id": 69935490, "body": "Note that this approach is very fragile, for if the bodies are only valid under the assumption nobody passes template argument 2, you get an ill formed program no diagnostic required.  What worse is no compiler will diagnose the problem; your code will appear to work perfectly."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1482949681, "post_id": 41366621, "comment_id": 69936922, "body": "@skyp search for &quot;no diagnostic required&quot;, there are only a dozen or so in the standard.  The one about templates must have valid specializations (which means something different in the standard than colloquially)"}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1482949735, "post_id": 41366621, "comment_id": 69936952, "body": "@Yakk Got it. Thank you."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1482950140, "post_id": 41366621, "comment_id": 69937129, "body": "@Yakk - you&#39;re right; thanks. Answer improved adding a <code>static_assert()</code> based check. What do you think of it?"}, {"owner": {"reputation": 323, "user_id": 5217010, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/zbVfO.png?s=128&g=1", "display_name": "Xobtah", "link": "https://stackoverflow.com/users/5217010/xobtah"}, "edited": false, "score": 0, "creation_date": 1482950346, "post_id": 41366621, "comment_id": 69937237, "body": "Sorry for the previous comment. This is not really what I needed, I need the behaviours to be different like that : Server&lt;UnixSock, TCPIO&gt;::Select&lt;UnixSelect&gt; == Server&lt;WinSock, TCPIO&gt;::Select&lt;WinSelect&gt; Server&lt;UnixSock, UDPIO&gt;::Select&lt;UnixSelect&gt; == Server&lt;WinSock, UDPIO&gt;::Select&lt;WinSelect&gt; The behaviour changes with the second parameter of the main class template"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1482950788, "post_id": 41366621, "comment_id": 69937455, "body": "The static assert just makes it more clear your code is ill formed.  It does not fix it.  The problem is that the standard mandates that all template functions must have a valid instantiation possible.  Your trick makes an ill formed program under the standard that usually (basically always in current compilers) compiles and behaves the way you intend; the program remains ill formed.  Next weeks compiler update could cause arbitrary breakage."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1482954392, "post_id": 41366621, "comment_id": 69939016, "body": "@Yakk - Sorry: I didn&#39;t understand; do you refer to 14.6.8: &quot;If no valid specialization can be generated for a template definition, and that template is not instantiated, the template definition is ill-formed, no diagnostic required.&quot;? So the solution, to avoid the ill formed problem, is to add a third <code>method()</code> that is enabled only if <code>p</code> is different from <code>protocol_1&lt;device&gt;</code> and from <code>protocol_2&lt;device&gt;</code>?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1482962664, "post_id": 41366621, "comment_id": 69942383, "body": "@max your templates are overloads of each other, not specializations.  In short, each must have a valid set of possible template arguments that make it a valid function.  This fundamentally is opposed to your technique.  There are ways to make it work,  but it is fragile."}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": true, "score": 1, "last_activity_date": 1482949945, "last_edit_date": 1482949945, "creation_date": 1482944809, "answer_id": 41366621, "question_id": 41366423, "link": "https://stackoverflow.com/questions/41366423/templating-a-double-templated-class-method/41366621#41366621", "title": "Templating a double-templated class method", "body": "<p>By example, using SFINAE (if you accept a C++11 solution)</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\ntemplate &lt;typename&gt;\nstruct protocol_1\n { };\n\ntemplate &lt;typename&gt;\nstruct protocol_2\n { };\n\ntemplate&lt;typename device, template&lt;typename&gt; class protocol&gt;\nclass MyClass\n {\n   public:\n      template&lt;typename select, typename p = protocol&lt;device&gt;&gt;\n         typename std::enable_if&lt;\n         std::is_same&lt;p, protocol_1&lt;device&gt;&gt;::value, bool&gt;::type\n         method()\n       { return true; }\n\n      template&lt;typename select, typename p = protocol&lt;device&gt;&gt;\n         typename std::enable_if&lt;\n         std::is_same&lt;p, protocol_2&lt;device&gt;&gt;::value, bool&gt;::type\n         method()\n       { return false; }\n };\n\nint main()\n {\n   MyClass&lt;int, protocol_1&gt;  m1;\n   MyClass&lt;int, protocol_2&gt;  m2;\n\n   std::cout &lt;&lt; m1.method&lt;int&gt;() &lt;&lt; std::endl; // print 1 (true)\n   std::cout &lt;&lt; m2.method&lt;void&gt;() &lt;&lt; std::endl; // print 0 (false)\n }\n</code></pre>\n\n<p><strong>--- EDIT ---</strong></p>\n\n<p>As pointed by Yakk (thanks!), this solution is weak because use a template default value that can be explicited and circunvented.</p>\n\n<p>An example; with </p>\n\n<pre><code>MyClass&lt;int, protocol_1&gt;{}.method&lt;void&gt;(); \n</code></pre>\n\n<p>is called the \"protocol_1\" version of <code>method()</code>, using the default value for <code>p</code>; but explciting <code>p</code>, as follows</p>\n\n<pre><code>MyClass&lt;int, protocol_1&gt;{}.method&lt;void, protocol_2&lt;int&gt;&gt;(); \n</code></pre>\n\n<p>is called the \"protocol_2\" version of <code>method()</code> over an istance of a <code>MyClass</code> based on <code>protocol_1</code></p>\n\n<p>To avoid this problem it's possible add a <code>static_assert()</code>, in both version of <code>method()</code>, to check and impose that <code>p</code> is equal to its default value (<code>protocol&lt;device&gt;</code>)</p>\n\n<p>I mean... as follow </p>\n\n<pre><code>  template&lt;typename select, typename p = protocol&lt;device&gt;&gt;\n     typename std::enable_if&lt;\n        std::is_same&lt;p, protocol_1&lt;device&gt;&gt;::value, bool&gt;::type\n     method()\n   {\n     static_assert(std::is_same&lt;p, protocol&lt;device&gt;&gt;::value, \"!\");\n\n     return true;\n   }\n\n  template&lt;typename select, typename p = protocol&lt;device&gt;&gt;\n     typename std::enable_if&lt;\n     std::is_same&lt;p, protocol_2&lt;device&gt;&gt;::value, bool&gt;::type\n     method()\n   {\n     static_assert(std::is_same&lt;p, protocol&lt;device&gt;&gt;::value, \"!\");\n\n     return false;\n   }\n</code></pre>\n\n<p>So</p>\n\n<pre><code>MyClass&lt;int, protocol_1&gt;{}.method&lt;void, protocol_2&lt;int&gt;&gt;();\n</code></pre>\n\n<p>generate a compiler error.</p>\n"}, {"tags": [], "owner": {"reputation": 5455, "user_id": 4115625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2688a9684db617a20f9da3959e5890d7?s=128&d=identicon&r=PG&f=1", "display_name": "Danh", "link": "https://stackoverflow.com/users/4115625/danh"}, "is_accepted": false, "score": 1, "last_activity_date": 1482945172, "creation_date": 1482945172, "answer_id": 41366723, "question_id": 41366423, "link": "https://stackoverflow.com/questions/41366423/templating-a-double-templated-class-method/41366723#41366723", "title": "Templating a double-templated class method", "body": "<p>Use an external helper is another possible solution:</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct B {\n};\ntemplate &lt;template&lt;typename&gt; class protocol, typename select&gt;\nstruct helper {\n    static bool do_real() {\n        return true;\n    }\n};\ntemplate &lt;typename select&gt;\nstruct helper&lt;B, select&gt; {\n    static bool do_real() {\n        return false;\n    }\n};\ntemplate&lt;typename device, template&lt;typename&gt; class protocol&gt;\nclass MyClass\n{\npublic:\n  template&lt;typename select&gt;\n  bool method()\n  {\n    return helper&lt;protocol, select&gt;::do_real();\n  }\n};\n</code></pre>\n\n<p>Like <a href=\"http://melpon.org/wandbox/permlink/wrzBfJDEySwxkGeC\" rel=\"nofollow noreferrer\">this</a></p>\n"}, {"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 0, "last_activity_date": 1482946823, "creation_date": 1482946823, "answer_id": 41367083, "question_id": 41366423, "link": "https://stackoverflow.com/questions/41366423/templating-a-double-templated-class-method/41367083#41367083", "title": "Templating a double-templated class method", "body": "<p>You may partial specialize the class, something like:</p>\n\n<pre><code>template&lt;typename device, template&lt;typename&gt; class protocol&gt;\nclass MyClass;\n\ntemplate &lt;typename&gt; struct protocole1 { /* ... */ };\ntemplate &lt;typename&gt; struct protocole2 { /* ... */ };\n\ntemplate&lt;typename device&gt;\nclass MyClass&lt;device, protocol1&gt;\n{\npublic:\n  template&lt;typename select&gt;\n  bool method()\n  {\n    // Code for protocole1\n  }\n};\n\ntemplate&lt;typename device&gt;\nclass MyClass&lt;device, protocol2&gt;\n{\npublic:\n  template&lt;typename select&gt;\n  bool method()\n  {\n    // Code for protocole2\n  }\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": false, "score": 2, "last_activity_date": 1482949798, "last_edit_date": 1482949798, "creation_date": 1482948332, "answer_id": 41367425, "question_id": 41366423, "link": "https://stackoverflow.com/questions/41366423/templating-a-double-templated-class-method/41367425#41367425", "title": "Templating a double-templated class method", "body": "<p>You didn't mention which is the target standard, so I'll try to give you an alternative for all the seasons.</p>\n\n<hr>\n\n<p>In C++11/14 you can use tag dispatching and function overloading to do that.<br>\nIt follows a minimal, working example:</p>\n\n<pre><code>#include&lt;iostream&gt;\n\ntemplate&lt;typename&gt; struct protocol_a {};\ntemplate&lt;typename&gt; struct protocol_b {};\n\ntemplate&lt;typename device, template&lt;typename&gt; class protocol&gt;\nclass MyClass {\n    template&lt;template&lt;typename&gt; class&gt; struct tag {};\n\n    template&lt;typename select&gt;\n    bool method(tag&lt;protocol_a&gt;) {\n        std::cout &lt;&lt; \"protocol_a\" &lt;&lt; std::endl;\n        return true;\n    }\n\n    template&lt;typename select&gt;\n    bool method(tag&lt;protocol_b&gt;) {\n        std::cout &lt;&lt; \"protocol_b\" &lt;&lt; std::endl;\n        return false;\n    }\n\npublic:\n    template&lt;typename select&gt;\n    bool method() {\n        return method&lt;device&gt;(tag&lt;protocol&gt;{});\n    }\n};\n\nint main() {\n    MyClass&lt;int, protocol_a&gt; mca;\n    mca.method&lt;void&gt;();\n    MyClass&lt;int, protocol_b&gt; mcb;\n    mcb.method&lt;void&gt;();\n}\n</code></pre>\n\n<p>Pretty compact. It doesn't require extra classes, partial specializations or sfinae expressions. The <em>drawback</em> (if we can call this <em>a drawback</em>) is that you have one more level of indirection.</p>\n\n<hr>\n\n<p>In C++17 you can use <code>if constexpr</code> to get the same result.<br>\nIt follows a minimal, working example:</p>\n\n<pre><code>#include&lt;type_traits&gt;\n#include&lt;iostream&gt;\n\ntemplate&lt;typename&gt; struct protocol_a {};\ntemplate&lt;typename&gt; struct protocol_b {};\n\ntemplate&lt;typename device, template&lt;typename&gt; class protocol&gt;\nclass MyClass {\npublic:\n    template&lt;typename select&gt;\n    bool method() {\n        if constexpr(std::is_same_v&lt;protocol&lt;device&gt;, protocol_a&lt;device&gt;&gt;) {\n            std::cout &lt;&lt; \"protocol_a\" &lt;&lt; std::endl;\n            return true;\n        } else if constexpr(std::is_same_v&lt;protocol&lt;device&gt;, protocol_b&lt;device&gt;&gt;) {\n            std::cout &lt;&lt; \"protocol_b\" &lt;&lt; std::endl;\n            return false;\n        }\n    }\n};\n\nint main() {\n    MyClass&lt;int, protocol_a&gt; mca;\n    mca.method&lt;void&gt;();\n    MyClass&lt;int, protocol_b&gt; mcb;\n    mcb.method&lt;void&gt;();\n}\n</code></pre>\n\n<p>More compact, but C++17 could not be an option.<br>\nSee it running on <a href=\"http://melpon.org/wandbox/permlink/wujh0fgF4e8JORMH\" rel=\"nofollow noreferrer\">wandbox</a>.</p>\n"}], "owner": {"reputation": 323, "user_id": 5217010, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/zbVfO.png?s=128&g=1", "display_name": "Xobtah", "link": "https://stackoverflow.com/users/5217010/xobtah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 41366621, "answer_count": 4, "score": 1, "last_activity_date": 1489928086, "creation_date": 1482944072, "last_edit_date": 1489928086, "question_id": 41366423, "link": "https://stackoverflow.com/questions/41366423/templating-a-double-templated-class-method", "title": "Templating a double-templated class method", "body": "<p>This is my simplified code :</p>\n\n<pre><code>template&lt;typename device, template&lt;typename device&gt; class protocol&gt;\nclass MyClass\n{\npublic:\n  template&lt;typename select&gt;\n  bool method()\n  {\n    // Code\n  }\n};\n</code></pre>\n\n<p>I want <code>method</code> to act different in terms of the <code>protocol</code> type.</p>\n\n<p>In other words, I have two different possible protocols, and I want to have two different behaviours for my method according to the protocols. But I don't know how to write it with templates.</p>\n"}, {"tags": ["c++", "abstract-class", "abstract", "overriding", "virtual-functions"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 8, "creation_date": 1482943743, "post_id": 41366303, "comment_id": 69934073, "body": "I am trying to figure out what is stopping you here."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 2, "creation_date": 1482944045, "post_id": 41366303, "comment_id": 69934212, "body": "You are not comparing descendants of anything. You are comparing numbers. An area is a number. You can have a virtual <code>area</code> method in <code>Figure</code> (no idea why anyone would call it <code>Square</code>), just call it."}, {"owner": {"reputation": 53, "user_id": 7081805, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9lxi5.png?s=128&g=1", "display_name": "knifecentipede", "link": "https://stackoverflow.com/users/7081805/knifecentipede"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1482944689, "post_id": 41366303, "comment_id": 69934526, "body": "@drescherjm I probably got something wrong here, but when I write <code>return (*this-&gt;Square() &lt; other-&gt;Square());</code> like I would in descendant class, I get <code>&quot;invalid type argument of unary \u2018*\u2019 (have \u2018double\u2019)&quot;</code> error"}, {"owner": {"reputation": 323, "user_id": 1578824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7826e1b5865d1b82b543cb53b83d101e?s=128&d=identicon&r=PG", "display_name": "jimvonmoon", "link": "https://stackoverflow.com/users/1578824/jimvonmoon"}, "edited": false, "score": 2, "creation_date": 1482945241, "post_id": 41366303, "comment_id": 69934808, "body": "<code>return (Square() &lt; other.Square());</code> Also you&#39;ll need to make <code>Square()</code> and <code>operator&lt;</code> const methods."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1482945338, "post_id": 41366303, "comment_id": 69934846, "body": "Please explain the purpose of <code>*</code> in <code>*this-&gt;Square()</code>."}, {"owner": {"reputation": 53, "user_id": 7081805, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9lxi5.png?s=128&g=1", "display_name": "knifecentipede", "link": "https://stackoverflow.com/users/7081805/knifecentipede"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1482945643, "post_id": 41366303, "comment_id": 69934987, "body": "@n.m. passing reference to object I&#39;m working with. is it unnecessary?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1482946088, "post_id": 41366303, "comment_id": 69935199, "body": "You need to learn about pointers and references and <code>this</code> and -&gt;` and <code>.</code>, otherwise you cannot make much sense. Passing reference where exactly? What expects a reference? If you read the error message carefully, you may notice that it talks about <code>double</code>, which is what your <code>*</code> is applied. Your <code>Square</code> method returns a <code>double</code>. Perhaps, you might think, <code>*this-&gt;Square()</code> is parsed as <code>*(this-&gt;Square())</code> and not as <code>(*this)-&gt;Square()</code> as I thought?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1482946486, "post_id": 41366303, "comment_id": 69935382, "body": "Next time please post the implementation that is causing the error along with the error message in your question."}, {"owner": {"reputation": 53, "user_id": 7081805, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9lxi5.png?s=128&g=1", "display_name": "knifecentipede", "link": "https://stackoverflow.com/users/7081805/knifecentipede"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1482946684, "post_id": 41366303, "comment_id": 69935465, "body": "@drescherjm Point taken! Sorry that my question was unclear. I try to stick to guidelines, but I&#39;m a bit new to this..."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 2, "creation_date": 1482947262, "post_id": 41366303, "comment_id": 69935727, "body": "By the way, you don&#39;t want to compare descendants of an abstract or base class since they could be anything.  For example, if you derive Hexagon from figure, you would be comparing a Square with a Hexagon, which doesn&#39;t make sense.  A better design is to have an <code>Area</code> function in the base class that returns the area of a <code>Figure</code>.  You can then compare areas of figures which makes more sense."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 7081805, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9lxi5.png?s=128&g=1", "display_name": "knifecentipede", "link": "https://stackoverflow.com/users/7081805/knifecentipede"}, "edited": false, "score": 1, "creation_date": 1482946614, "post_id": 41366841, "comment_id": 69935436, "body": "I think I understand <code>this</code> a bit more now... Yes, I&#39;ve actually changed <code>-&gt;</code> to <code>.</code> before. I also had to make <code>Square()</code> const, like @jimvonmoon suggested, for this to work. Thanks for clearing things up!"}], "tags": [], "owner": {"reputation": 7700, "user_id": 126027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d083341daacfb4942b835e3f6f2fd804?s=128&d=identicon&r=PG", "display_name": "TheUndeadFish", "link": "https://stackoverflow.com/users/126027/theundeadfish"}, "is_accepted": true, "score": 3, "last_activity_date": 1482945705, "creation_date": 1482945705, "answer_id": 41366841, "question_id": 41366303, "link": "https://stackoverflow.com/questions/41366303/c-comparing-descendants-of-abstract-class/41366841#41366841", "title": "C++ Comparing descendants of abstract class", "body": "<p>From your comment <code>return (*this-&gt;Square() &lt; other-&gt;Square());</code> your trouble simply seems to be basic syntax.</p>\n\n<p><code>this</code> is a simple pointer. So the typical correct syntax is just <code>this-&gt;Square()</code>. Of course since it's inside a member function then <code>this</code> can be omitted entirely as just <code>Square()</code>.</p>\n\n<p><code>other</code> is a reference, so that uses the dot operator as <code>other.Square()</code></p>\n\n<p>Another useful thing, potentially relevant to your latest comment, is to make the operator&lt; function <code>const</code> since it isn't modifying the the object it's being called on.</p>\n\n<p>So the resulting code should be something more like:</p>\n\n<pre><code>bool operator&lt;(const Figure&amp; other) const\n{\n    return Square() &lt; other.Square();\n}\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 7081805, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9lxi5.png?s=128&g=1", "display_name": "knifecentipede", "link": "https://stackoverflow.com/users/7081805/knifecentipede"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "closed_date": 1482983677, "accepted_answer_id": 41366841, "answer_count": 1, "score": 1, "last_activity_date": 1482945705, "creation_date": 1482943602, "last_edit_date": 1482943803, "question_id": 41366303, "link": "https://stackoverflow.com/questions/41366303/c-comparing-descendants-of-abstract-class", "closed_reason": "Needs details or clarity", "title": "C++ Comparing descendants of abstract class", "body": "<p>Yes, I know it's bad tone to compare different descendants of abstract class. But I <em>really</em> have to.</p>\n\n<p>I have this simple abstract class:</p>\n\n<pre><code>class Figure {\n    public:\n    virtual double Square() = 0;\n    virtual ~Figure() {};\n}\n</code></pre>\n\n<p>What I want to add to it is something like:</p>\n\n<pre><code>bool operator&lt;(const Figure&amp; other) {};\n</code></pre>\n\n<p>Which would compare its descendants - geometric figures, namely <code>Triangle, Rectangle, Octagon</code> - using their area returned in method <code>Square()</code>.</p>\n\n<p>Is that possible in any way?</p>\n"}, {"tags": ["c++", "input", "qstring", "qtablewidgetitem"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7336265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f220abb5ed6bc072e620af0f19175778?s=128&d=identicon&r=PG&f=1", "display_name": "Snake Unlimited", "link": "https://stackoverflow.com/users/7336265/snake-unlimited"}, "edited": false, "score": 0, "creation_date": 1483017709, "post_id": 41367916, "comment_id": 69962952, "body": "**What does std::istringstream iss(str); do? (sry for double post)"}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "reply_to_user": {"reputation": 23, "user_id": 7336265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f220abb5ed6bc072e620af0f19175778?s=128&d=identicon&r=PG&f=1", "display_name": "Snake Unlimited", "link": "https://stackoverflow.com/users/7336265/snake-unlimited"}, "edited": false, "score": 0, "creation_date": 1483019646, "post_id": 41367916, "comment_id": 69964041, "body": "YVW It creates a <code>std::istringstream</code> from a <code>std::string</code> which is then iterated over using a regex iterator."}], "tags": [], "owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "is_accepted": true, "score": 1, "last_activity_date": 1482952003, "last_edit_date": 1482952003, "creation_date": 1482950589, "answer_id": 41367916, "question_id": 41366116, "link": "https://stackoverflow.com/questions/41366116/how-to-get-data-from-user-input/41367916#41367916", "title": "How to get data from user input?", "body": "<p>A single <a href=\"https://regex101.com/r/EbxsAK/2\" rel=\"nofollow noreferrer\">regular expression</a> could parse each of the lines:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;vector&gt;\n#include &lt;iterator&gt;\n#include &lt;regex&gt;\n#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;exception&gt;\n\nclass CKomplex {\npublic:\n    CKomplex(double numReal, double numImag) : numReal{numReal}, numImag{numImag} {}\n    double numReal;\n    double numImag;\n};\n\nauto input_text{\nR\"(-15 + 8.14i\n-15+8.14j\n-15 +j 8,14\n-15+ i8,14\nbad line here\n+23.4-j24\n-35+42.3j\n+24i\n+2.342j\n+24.523-i 432,52\n24.523-i 432,52\n23.4-j24\n35+42.3j\n24i\n2.342j)\"};\n\nCKomplex fromString(std::string str) {\n    double numReal{};\n    double numImag{};\n\n    std::regex r{R\"(([+-]?) *([ij]?) *(\\d+)[.,]?(\\d*)([ij])?)\"}; // 6 groups\n    std::istringstream iss(str);\n    auto it = std::sregex_iterator(str.begin(), str.end(), r);\n    auto end = std::sregex_iterator();\n    if(it == end || it-&gt;size() != 6)\n        throw std::runtime_error(\"Could not parse line containing the following text: \" + str);\n    for(; it != end; ++it) {\n        auto match = *it;\n        auto sign = match[1].str();\n        auto iorj_pre = match[2].str();\n        auto decimal = match[3].str();\n        auto fraction = match[4].str();\n        auto iorj_post = match[5].str();\n\n        double val{sign == \"-\" ? -1.F : 1.F};\n        val *= std::stod(decimal + \".\" + fraction);\n        if(iorj_pre == \"i\" || iorj_pre == \"j\" || iorj_post == \"i\" || iorj_post == \"j\")\n            numImag += val;\n        else\n            numReal += val;\n    }\n    return{numReal,numImag};\n}\n\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const CKomplex&amp; complex_number)\n{\n    os &lt;&lt; std::showpos &lt;&lt; \"(\" &lt;&lt; complex_number.numReal &lt;&lt; \" \" &lt;&lt; complex_number.numImag &lt;&lt; \"i)\";\n    return os;\n}\n\nint main()\n{\n    std::istringstream input_stream{input_text};\n\n    for(std::string line{}; std::getline(input_stream, line);) {\n        try { std::cout &lt;&lt; std::setw(20) &lt;&lt; line &lt;&lt; \": \" &lt;&lt; fromString(line) &lt;&lt; '\\n'; }\n        catch(std::exception&amp; e) { std::cout &lt;&lt; e.what() &lt;&lt; '\\n'; }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Produces (<a href=\"http://coliru.stacked-crooked.com/a/55f29ac315b197ea\" rel=\"nofollow noreferrer\">live demo</a>):</p>\n\n<pre><code>         -15 + 8.14i: (-15 +8.14i)\n           -15+8.14j: (-15 +8.14i)\n         -15 +j 8,14: (-15 +8.14i)\n          -15+ i8,14: (-15 +8.14i)\nCould not parse line containing the following text: bad line here\n           +23.4-j24: (+23.4 -24i)\n           -35+42.3j: (-35 +42.3i)\n                +24i: (+0 +24i)\n             +2.342j: (+0 +2.342i)\n    +24.523-i 432,52: (+24.523 -432.52i)\n     24.523-i 432,52: (+24.523 -432.52i)\n            23.4-j24: (+23.4 -24i)\n            35+42.3j: (+35 +42.3i)\n                 24i: (+0 +24i)\n              2.342j: (+0 +2.342i)\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 7336265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f220abb5ed6bc072e620af0f19175778?s=128&d=identicon&r=PG&f=1", "display_name": "Snake Unlimited", "link": "https://stackoverflow.com/users/7336265/snake-unlimited"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 41367916, "answer_count": 1, "score": 0, "last_activity_date": 1482952003, "creation_date": 1482942823, "question_id": 41366116, "link": "https://stackoverflow.com/questions/41366116/how-to-get-data-from-user-input", "title": "How to get data from user input?", "body": "<p>I have a QTableWidget where the user inputs complex numbers in various styles.\nFor example, the complex number (-15 + 8.14i) can be written like:</p>\n\n<p>-15 + 8.14i</p>\n\n<p>-15+8.14j</p>\n\n<p>-15 +j 8,14</p>\n\n<p>-15+ i8,14</p>\n\n<p><strong>i</strong> can also be <strong>j</strong>!\nBoth values can be big (they are saved as double) and also negative. They can be written with \",\" and \".\" (so 3.14 and 3,14 are ment to be equal). There should be an error message when the user enters the number incorrectly.</p>\n\n<pre><code>CKomplex fromString(QString str) { // ckomplex is my custom class for complex numbers\n    double numReal, numImag;\n\n    QString strNew = \"\";\n    // delete all spaces\n    for (int i= 0; i&lt; str.length(); i++) {\n        if (!str[i].isSpace()) {\n            strNew += str[i];\n        }\n    }\n\n\n    QString part1 = \"\";\n    int index;\n    // get the first number\n    for (int i= 0; i &lt; strNew.length(); i++) { // iterate string\n        if (strNew[i] != '+' &amp;&amp; strNew[i] != '-') {\n            part1 += strNew[i];\n        } else { // e.g.: 5 + 3j -&gt; the loop is at the \"+\"\n            if (i != 0) {\n                index = i; // save index at \"+\" to start for next number\n                break;\n            }\n        }\n    }\n    numReal = part1.toDouble();\n\n\n    QString part2 = \"\";\n    // get the second number\n    for (int i= index; i &lt; strNew.length(); i++) {\n        if (strNew[i].isDigit() || strNew[i] == '+' || strNew[i] == '-' || strNew[i] == '.' || strNew[i] == ',') { // ignore j or i\n            part2 += strNew[i];\n        }\n    }\n    numImag = part2.toDouble();\n\n    return CKomplex(numReal, numImag);\n}\n</code></pre>\n\n<p>This does work for basic input. But is not very fast or readable or useful. And it does cover just few possibilities of input (stuff like \"-3 - 5,14\" doesnt work). Is there an easier way to convert the string into a complex number without having so much loops and variables?</p>\n"}, {"tags": ["c++", "class", "templates"], "comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 1, "creation_date": 1482941515, "post_id": 41365771, "comment_id": 69932915, "body": "What doesn&#39;t work?"}, {"owner": {"reputation": 247, "user_id": 5661576, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/92ec48405b79536dcb523ed0a6db0af4?s=128&d=identicon&r=PG&f=1", "display_name": "SomeoneWithAQuestion", "link": "https://stackoverflow.com/users/5661576/someonewithaquestion"}, "reply_to_user": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1482941562, "post_id": 41365771, "comment_id": 69932938, "body": "@Carcigenicate Sorry, added."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482941679, "post_id": 41365771, "comment_id": 69932993, "body": "@SomeoneWithAQuestion Use <code>std::function</code> with c++ code."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1482941751, "post_id": 41365771, "comment_id": 69933030, "body": "@SomeoneWithAQuestion <i><code>&#47;&#47; Doesn&#39;t compile</code></i> isn&#39;t very informative. Post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and verbatim error messages in your question."}, {"owner": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 2, "creation_date": 1482941823, "post_id": 41365771, "comment_id": 69933064, "body": "You defined the constructor but you never declared it in the class..."}, {"owner": {"reputation": 247, "user_id": 5661576, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/92ec48405b79536dcb523ed0a6db0af4?s=128&d=identicon&r=PG&f=1", "display_name": "SomeoneWithAQuestion", "link": "https://stackoverflow.com/users/5661576/someonewithaquestion"}, "edited": false, "score": 0, "creation_date": 1482941915, "post_id": 41365771, "comment_id": 69933107, "body": "I did declared, I just didn&#39;t post the entire code and forgot to add."}, {"owner": {"reputation": 247, "user_id": 5661576, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/92ec48405b79536dcb523ed0a6db0af4?s=128&d=identicon&r=PG&f=1", "display_name": "SomeoneWithAQuestion", "link": "https://stackoverflow.com/users/5661576/someonewithaquestion"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482942006, "post_id": 41365771, "comment_id": 69933155, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Is there a solution without using C++11 features?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "edited": false, "score": 0, "creation_date": 1482942439, "post_id": 41365771, "comment_id": 69933407, "body": "I think the compiler is telling you that  you swapped 1-arg and 2-arg functions in your call to the constructor. It expects 2-arg to be first."}], "answers": [{"comments": [{"owner": {"reputation": 247, "user_id": 5661576, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/92ec48405b79536dcb523ed0a6db0af4?s=128&d=identicon&r=PG&f=1", "display_name": "SomeoneWithAQuestion", "link": "https://stackoverflow.com/users/5661576/someonewithaquestion"}, "edited": false, "score": 0, "creation_date": 1482942880, "post_id": 41366021, "comment_id": 69933632, "body": "Thanks for the answer. findMax is actually in a header file, and the rest of the code I posted is in the source file. Is there a way I can make this without having to call another function from my source file to create a new <code>findMax</code>?"}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "reply_to_user": {"reputation": 247, "user_id": 5661576, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/92ec48405b79536dcb523ed0a6db0af4?s=128&d=identicon&r=PG&f=1", "display_name": "SomeoneWithAQuestion", "link": "https://stackoverflow.com/users/5661576/someonewithaquestion"}, "edited": false, "score": 0, "creation_date": 1482943008, "post_id": 41366021, "comment_id": 69933681, "body": "@SomeoneWithAQuestion: there is nothing wrong with declaring the factory function in the header, too. However, once you correctly defined your constructor you can just call it as is done in <code>makeFindMax()</code>."}], "tags": [], "owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "is_accepted": false, "score": 1, "last_activity_date": 1482942417, "creation_date": 1482942417, "answer_id": 41366021, "question_id": 41365771, "link": "https://stackoverflow.com/questions/41365771/passing-functions-to-a-class/41366021#41366021", "title": "Passing functions to a class", "body": "<p>You need to sort out your constructor declaration/definition and probably also your declaration of the member (it probably should be a value rather than a pointer). With that it should be straight forward to create the objects.</p>\n\n<p>Personally, I wouldn't actually both specifying the template arguments but rather create a suitable factory function. For example:</p>\n\n<pre><code>template&lt;typename K, typename Fun1, typename Fun2&gt;\nclass findMax {\n    K     key;\n    Fun1 cmp;\n    Fun2  areSame;\npublic:\n    findMax(K n, Fun1 isValid, Fun2 areSameFunc)\n        : key(n)\n        , cmp(isValid)\n        , areSame(areSameFunc) {\n    }\n};\n\ntemplate&lt;typename K, typename Fun1, typename Fun2&gt;\nfindMax&lt;K, Fun1, Fun2&gt; makeFindMax(K n, Fun1 fun1, Fun2 fun2) {\n    return findMax&lt;K, Fun1, Fun2&gt;(n, fun1, fun2);\n}\n\nbool isValid (int k) {\n    return (k&gt;0);\n}\n\nbool areSame (int key, int key2) {\n    return key==key2;\n}\n\nint main() {\n    auto obj = makeFindMax(7, isValid, areSame);\n}\n</code></pre>\n"}], "owner": {"reputation": 247, "user_id": 5661576, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/92ec48405b79536dcb523ed0a6db0af4?s=128&d=identicon&r=PG&f=1", "display_name": "SomeoneWithAQuestion", "link": "https://stackoverflow.com/users/5661576/someonewithaquestion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "closed_date": 1482983943, "answer_count": 1, "score": -3, "last_activity_date": 1482982485, "creation_date": 1482941476, "last_edit_date": 1482982485, "question_id": 41365771, "link": "https://stackoverflow.com/questions/41365771/passing-functions-to-a-class", "closed_reason": "Not suitable for this site", "title": "Passing functions to a class", "body": "<p>Suppose I have this class:</p>\n\n<pre><code>template&lt;class K, class func1, class func2&gt;\nclass findMax {\n    K* key;\n    func1 cmp;\n    func2 areSame;\n};\n\ntemplate&lt;class K, class func1, class func2&gt;\nfindMax&lt;K, func1, func2&gt;::findMax(K n, func1 isValid, func2 areSameFunc) {\n\n    cmp = isValid;\n    areSame = areSameFunc;\n} \n</code></pre>\n\n<p>How do I make an instance of this class?\n<br>I have tried:</p>\n\n<pre><code>typedef bool (*someFunc)(int);\ntypedef bool (*someFunc2)(int, int);\n\nfindMax&lt;int, someFunc, someFunc2&gt; u(7, isValid, areSame); // Doesn't compile, error below.\n</code></pre>\n\n<p>Error message:</p>\n\n<pre><code>Invalid arguments '\nCandidates are:\n findMax(const findMax&lt;int,bool (*)(int, int),bool (*)(int)&gt; &amp;)\n findMax()\n findMax(int, #10000, ?, ?)\n'\n</code></pre>\n\n<p>where:</p>\n\n<pre><code>bool isValid (int k) {\n    return (k&gt;0);\n}\n\nbool areSame (int key, int key2) {\n    return key==key2;\n}\n</code></pre>\n\n<p>But this doesn't work. I have tried other approaches as well but couldn't find how to do this. <br>How do I do it then?</p>\n"}, {"tags": ["python", "c++", "numpy"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482941598, "post_id": 41365723, "comment_id": 69932955, "body": "Where did you initialize your <code>data</code> in the c++ code?"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 2, "creation_date": 1482941863, "post_id": 41365723, "comment_id": 69933086, "body": "Probably because you&#39;re using an array of pointers to dynamically allocated arrays, instead of a single block of memory."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1482942037, "post_id": 41365723, "comment_id": 69933184, "body": "I agree with @juancho . The cache lining behavior will be horrible."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 3, "creation_date": 1482942357, "post_id": 41365723, "comment_id": 69933362, "body": "I get <code>Time: 1 sekund</code> on my machine. Did you run the C++ code in debug mode by any chance?"}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1482942795, "post_id": 41365723, "comment_id": 69933591, "body": "I&#39;m assuming numpy also takes advantage of SIMD. C++ compilers can auto-vectorize code but it isn&#39;t guaranteed. There could be other factors at play. Also, you probably aren&#39;t generating release mode code as stated."}, {"owner": {"reputation": 162, "user_id": 7206328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bf83c63bbdda73ddf24481f805f663f?s=128&d=identicon&r=PG&f=1", "display_name": "Mateusz", "link": "https://stackoverflow.com/users/7206328/mateusz"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1482943003, "post_id": 41365723, "comment_id": 69933679, "body": "@juanchopanza I have changed the dynamical tables in C++ and it made the code faster but still significantly slower than Python."}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 1, "creation_date": 1482943123, "post_id": 41365723, "comment_id": 69933722, "body": "@Mateusz in your numpy example, all of the data are 0&#39;s I believe (I assume that is what .zeros does). What happens if you set all of your data in the C++ app to 0 first?"}, {"owner": {"reputation": 4617, "user_id": 3954379, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/HwYQ0.jpg?s=128&g=1", "display_name": "Lucas", "link": "https://stackoverflow.com/users/3954379/lucas"}, "edited": false, "score": 0, "creation_date": 1482943692, "post_id": 41365723, "comment_id": 69934046, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/8385602/why-are-numpy-arrays-so-fast\">why are numpy arrays so fast</a>"}, {"owner": {"reputation": 665, "user_id": 5316984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89aaf78a23ca896b71dad4bf505dd2bb?s=128&d=identicon&r=PG&f=1", "display_name": "Gwidryj", "link": "https://stackoverflow.com/users/5316984/gwidryj"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 2, "creation_date": 1482944858, "post_id": 41365723, "comment_id": 69934612, "body": "@BoPersson I also run this code (c++) and result was also 1 s, where python code had the same time as stated - so debug mode is probably the case."}, {"owner": {"reputation": 162, "user_id": 7206328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bf83c63bbdda73ddf24481f805f663f?s=128&d=identicon&r=PG&f=1", "display_name": "Mateusz", "link": "https://stackoverflow.com/users/7206328/mateusz"}, "reply_to_user": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1482944891, "post_id": 41365723, "comment_id": 69934628, "body": "@RyanP using 0&#39;s doesn&#39;t change the result. Release mode made C++ code much faster but still slower than Python version."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1482945769, "post_id": 41365723, "comment_id": 69935044, "body": "When I try to run your python code, on ideone, I get <a href=\"http://ideone.com/x5CI6h\" rel=\"nofollow noreferrer\">time limit exceeded</a>, while running your C++ code, returns <a href=\"http://ideone.com/fcBJLX\" rel=\"nofollow noreferrer\">time: 0 seconds</a>. So.. Can&#39;t reproduce?"}, {"owner": {"reputation": 665, "user_id": 5316984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89aaf78a23ca896b71dad4bf505dd2bb?s=128&d=identicon&r=PG&f=1", "display_name": "Gwidryj", "link": "https://stackoverflow.com/users/5316984/gwidryj"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1482948998, "post_id": 41365723, "comment_id": 69936597, "body": "@AlgirdasPreid\u017eius because ideone has timeout (probably 5s as stated in your link), when you decrees e.g. k_max code will be executed properly. I can reproduce both python and c++."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "reply_to_user": {"reputation": 665, "user_id": 5316984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89aaf78a23ca896b71dad4bf505dd2bb?s=128&d=identicon&r=PG&f=1", "display_name": "Gwidryj", "link": "https://stackoverflow.com/users/5316984/gwidryj"}, "edited": false, "score": 1, "creation_date": 1482960553, "post_id": 41365723, "comment_id": 69941540, "body": "@Gwidryj I don&#39;t have python installed on my machine, so, to test it, I chose ideone. I can understand why python version got time limit exceeded (given the timeframes mentioned in the question), but since C++ code finished in less than a second, it was clearly faster than python version. And that was the whole point of my comment."}, {"owner": {"reputation": 28647, "user_id": 1422096, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/da3871bf5450fa726f20557fa3f18f51?s=128&d=identicon&r=PG", "display_name": "Basj", "link": "https://stackoverflow.com/users/1422096/basj"}, "edited": false, "score": 1, "creation_date": 1483025272, "post_id": 41365723, "comment_id": 69967152, "body": "Why the downvotes? this is a good question imho."}], "answers": [{"comments": [{"owner": {"reputation": 665, "user_id": 5316984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89aaf78a23ca896b71dad4bf505dd2bb?s=128&d=identicon&r=PG&f=1", "display_name": "Gwidryj", "link": "https://stackoverflow.com/users/5316984/gwidryj"}, "edited": false, "score": 0, "creation_date": 1482953785, "post_id": 41367495, "comment_id": 69938742, "body": "Well... this is interesting. Your version uses much more c++ structures, but main calculations are the same. I would not expect c++ code (with unnecessary usage of its structures) to be faster than pure c (and here it is faster in the reference to the python version). So I ran your version and original ones and averaged over 10 runs. Results: original c++: 10.8 s, original python 8.5 s, your c++ version: <b>32.8 s</b>. So, as expected, I can&#39;t reproduce improvement of yours."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 665, "user_id": 5316984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89aaf78a23ca896b71dad4bf505dd2bb?s=128&d=identicon&r=PG&f=1", "display_name": "Gwidryj", "link": "https://stackoverflow.com/users/5316984/gwidryj"}, "edited": false, "score": 0, "creation_date": 1482956924, "post_id": 41367495, "comment_id": 69940071, "body": "@Gwidryj: Clearly you&#39;re doing something <i>seriously</i> wrong (probably compiling without optimization, but you haven&#39;t told us enough for anybody to diagnose your problem with any real certainty). As to using a struct slowing anything down--sorry, but that shouldn&#39;t be expected at all."}, {"owner": {"reputation": 665, "user_id": 5316984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89aaf78a23ca896b71dad4bf505dd2bb?s=128&d=identicon&r=PG&f=1", "display_name": "Gwidryj", "link": "https://stackoverflow.com/users/5316984/gwidryj"}, "edited": false, "score": 0, "creation_date": 1483003667, "post_id": 41367495, "comment_id": 69955157, "body": "I am using gcc version 4.9.2 (Debian 4.9.2-10). Instruction to compile both c++ scripts: <code>g++ -std=c++11 main.cpp -o main</code>. I also checked that without initializing <code>data</code> with some finite values your code is ~3 times slower, but with initializing it with non-zeros only ~1.3 times slower."}, {"owner": {"reputation": 7435, "user_id": 814601, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5c3bf048d5dcd48f4f77b98b22f67434?s=128&d=identicon&r=PG", "display_name": "Fernando", "link": "https://stackoverflow.com/users/814601/fernando"}, "edited": false, "score": 0, "creation_date": 1483017413, "post_id": 41367495, "comment_id": 69962768, "body": "Try adding -O2 flag for optimization,"}, {"owner": {"reputation": 665, "user_id": 5316984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89aaf78a23ca896b71dad4bf505dd2bb?s=128&d=identicon&r=PG&f=1", "display_name": "Gwidryj", "link": "https://stackoverflow.com/users/5316984/gwidryj"}, "reply_to_user": {"reputation": 7435, "user_id": 814601, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5c3bf048d5dcd48f4f77b98b22f67434?s=128&d=identicon&r=PG", "display_name": "Fernando", "link": "https://stackoverflow.com/users/814601/fernando"}, "edited": false, "score": 0, "creation_date": 1483017801, "post_id": 41367495, "comment_id": 69963015, "body": "@Fernando with optimization (whole instruction: <code>g++ -std=c++11 -O2 main.cpp -o main</code>) it&#39;s ~1.8 times slower (this c++ is slower than original one). Flag -O3 doesn&#39;t change anything."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 665, "user_id": 5316984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89aaf78a23ca896b71dad4bf505dd2bb?s=128&d=identicon&r=PG&f=1", "display_name": "Gwidryj", "link": "https://stackoverflow.com/users/5316984/gwidryj"}, "edited": false, "score": 0, "creation_date": 1483038793, "post_id": 41367495, "comment_id": 69973910, "body": "@Gwidryj: Using gcc 4.9 may well be a large part of your problem. It&#39;s years old. The current release is 6.3. While it&#39;s not always necessary to use the <i>absolute</i> latest release, I have a hard time imagining a reason to use anything older than 5.x, at least on a mainstream system."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 665, "user_id": 5316984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89aaf78a23ca896b71dad4bf505dd2bb?s=128&d=identicon&r=PG&f=1", "display_name": "Gwidryj", "link": "https://stackoverflow.com/users/5316984/gwidryj"}, "edited": false, "score": 0, "creation_date": 1483040024, "post_id": 41367495, "comment_id": 69974445, "body": "@Gwidryj: Oh, one more point: unless your compiler/standard library is completely broken, the values in the vectors <i>are</i> initialized (to <code>0.0</code>, to be precise)."}, {"owner": {"reputation": 665, "user_id": 5316984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89aaf78a23ca896b71dad4bf505dd2bb?s=128&d=identicon&r=PG&f=1", "display_name": "Gwidryj", "link": "https://stackoverflow.com/users/5316984/gwidryj"}, "edited": false, "score": 0, "creation_date": 1483041060, "post_id": 41367495, "comment_id": 69974887, "body": "@JerryCoffin Yes, by <i>finite values</i> I meant not zeros."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 665, "user_id": 5316984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89aaf78a23ca896b71dad4bf505dd2bb?s=128&d=identicon&r=PG&f=1", "display_name": "Gwidryj", "link": "https://stackoverflow.com/users/5316984/gwidryj"}, "edited": false, "score": 1, "creation_date": 1483042064, "post_id": 41367495, "comment_id": 69975304, "body": "@Gwidryj: Zero is literally the furthest possible point from infinity."}], "tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 6, "last_activity_date": 1482948643, "creation_date": 1482948643, "answer_id": 41367495, "question_id": 41365723, "link": "https://stackoverflow.com/questions/41365723/why-is-my-python-numpy-code-faster-than-c/41367495#41367495", "title": "Why is my Python NumPy code faster than C++?", "body": "<p>On my computer, your (current) Python code runs in 14.82 seconds (yes, my computer's quite slow).</p>\n\n<p>I rewrote your C++ code to something I'd consider halfway reasonable (basically, I almost ignored your C++ code and just rewrote your Python into C++. That gave me this:</p>\n\n<pre><code>#include &lt;cstdio&gt;\n#include &lt;iostream&gt;\n#include &lt;cmath&gt;\n#include &lt;chrono&gt;\n#include &lt;vector&gt;\n#include &lt;assert.h&gt;\n\nconst unsigned int k_max = 40000;\nconst unsigned int N = 10000;\n\ntemplate &lt;class T&gt;\nclass matrix2 {\n    std::vector&lt;T&gt; data;\n    size_t cols;\n    size_t rows;\npublic:\n    matrix2(size_t y, size_t x) : cols(x), rows(y), data(x*y) {}\n    T &amp;operator()(size_t y, size_t x) {\n        assert(x &lt;= cols);\n        assert(y &lt;= rows);\n        return data[y*cols + x];\n    }\n\n    T operator()(size_t y, size_t x) const {\n        assert(x &lt;= cols);\n        assert(y &lt;= rows);\n        return data[y*cols + x];\n    }\n};\n\nint main() {\n    matrix2&lt;double&gt; data(N, 2);\n    matrix2&lt;double&gt; coeffs(k_max, 2);\n\n    using namespace std::chrono;\n\n    auto start = high_resolution_clock::now();\n\n    for (int k = 0; k &lt; k_max; k++) {\n        for (int j = 0; j &lt; N - 1; j++) {\n            coeffs(k, 0) += data(j, 1) * (cos((k + 1)*data(j, 0)) - cos((k + 1)*data(j+1, 0)));\n            coeffs(k, 1) += data(j, 1) * (sin((k + 1)*data(j, 0)) - sin((k + 1)*data(j+1, 0)));\n        }\n    }\n\n    auto end = high_resolution_clock::now();\n    std::cout &lt;&lt; duration_cast&lt;milliseconds&gt;(end - start).count() &lt;&lt; \" ms\\n\";\n}\n</code></pre>\n\n<p>This ran in about 14.4 seconds, so it's a slight improvement over the Python version--but given that the Python is mostly a pretty thin wrapper around some C code, getting only a slight improvement is pretty much what we should expect.</p>\n\n<p>The next obvious step would be to use multiple cores. To do that in C++, we can add this line:</p>\n\n<pre><code>#pragma omp parallel for\n</code></pre>\n\n<p>...before the outer <code>for</code> loop:</p>\n\n<pre><code>#pragma omp parallel for\nfor (int k = 0; k &lt; k_max; k++) {\n    for (int j = 0; j &lt; N - 1; j++) {\n        coeffs(k, 0) += data(j, 1) * (cos((k + 1)*data(j, 0)) - cos((k + 1)*data(j+1, 0)));\n        coeffs(k, 1) += data(j, 1) * (sin((k + 1)*data(j, 0)) - sin((k + 1)*data(j+1, 0)));\n    }\n}\n</code></pre>\n\n<p>With <code>-openmp</code> added to the compiler's command line, this ran in about 4.8 seconds. If you have more than 4 cores, you can probably expect a larger improvement than that though (conversely, if you have fewer than 4 cores, expect a smaller improvement--but nowadays, more than 4 is a lot more common that fewer).</p>\n"}, {"comments": [{"owner": {"reputation": 665, "user_id": 5316984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89aaf78a23ca896b71dad4bf505dd2bb?s=128&d=identicon&r=PG&f=1", "display_name": "Gwidryj", "link": "https://stackoverflow.com/users/5316984/gwidryj"}, "edited": false, "score": 0, "creation_date": 1483027037, "post_id": 41382450, "comment_id": 69968124, "body": "I have tried the same thinking that <a href=\"https://en.wikipedia.org/wiki/Locality_of_reference\" rel=\"nofollow noreferrer\">locality of reference</a> is the case here. I tried for many values of <code>k_max</code> and <code>N</code>, with zeros and non-zero values in <code>data</code>, but results were always practically the same, regardless the order of loops."}, {"owner": {"reputation": 665, "user_id": 5316984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89aaf78a23ca896b71dad4bf505dd2bb?s=128&d=identicon&r=PG&f=1", "display_name": "Gwidryj", "link": "https://stackoverflow.com/users/5316984/gwidryj"}, "edited": false, "score": 0, "creation_date": 1483027582, "post_id": 41382450, "comment_id": 69968406, "body": "&quot;<i>I found that you didn&#39;t represent correctly the for-loops in order to do the correct calculations of the coeffs</i>&quot; - this is not true, there is no way switching for-loops can change the result. In both cases you run through the same sets of <code>(i, j)</code> pairs, just in different order."}, {"owner": {"reputation": 29, "user_id": 1056547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/758335535dd07f5c18bcf8b867f06576?s=128&d=identicon&r=PG", "display_name": "quark", "link": "https://stackoverflow.com/users/1056547/quark"}, "reply_to_user": {"reputation": 665, "user_id": 5316984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89aaf78a23ca896b71dad4bf505dd2bb?s=128&d=identicon&r=PG&f=1", "display_name": "Gwidryj", "link": "https://stackoverflow.com/users/5316984/gwidryj"}, "edited": false, "score": 0, "creation_date": 1483097285, "post_id": 41382450, "comment_id": 69992688, "body": "@Gwidryj, Sure, it results in the same computation time.  It was my observation in order to fully respect the formulae found on paper. What you didnt do it was the <b>optimization flag</b>: g++ main.cpp -o main <b>-O3</b> ."}, {"owner": {"reputation": 29, "user_id": 1056547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/758335535dd07f5c18bcf8b867f06576?s=128&d=identicon&r=PG", "display_name": "quark", "link": "https://stackoverflow.com/users/1056547/quark"}, "reply_to_user": {"reputation": 665, "user_id": 5316984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89aaf78a23ca896b71dad4bf505dd2bb?s=128&d=identicon&r=PG&f=1", "display_name": "Gwidryj", "link": "https://stackoverflow.com/users/5316984/gwidryj"}, "edited": false, "score": 0, "creation_date": 1483097524, "post_id": 41382450, "comment_id": 69992789, "body": "@Gwidryj, or use -O2. Check what works better for you."}], "tags": [], "owner": {"reputation": 29, "user_id": 1056547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/758335535dd07f5c18bcf8b867f06576?s=128&d=identicon&r=PG", "display_name": "quark", "link": "https://stackoverflow.com/users/1056547/quark"}, "is_accepted": false, "score": 2, "last_activity_date": 1599242447, "last_edit_date": 1599242447, "creation_date": 1483024596, "answer_id": 41382450, "question_id": 41365723, "link": "https://stackoverflow.com/questions/41365723/why-is-my-python-numpy-code-faster-than-c/41382450#41382450", "title": "Why is my Python NumPy code faster than C++?", "body": "<p>I tried to understand your Python code and reproduce it in C++. I found that you didn't represent correctly the for-loops in order to do the correct calculations of the <em>coeffs</em>, hence should <strong>switch</strong> your <strong>for-loops</strong>. If this is the case, you should have the following:</p>\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cmath&gt;\n#include &lt;time.h&gt;\n\nconst int k_max = 40000;\nconst int N = 10000;\n\ndouble cos_k, sin_k;\n\nint main(int argc, char const *argv[])\n{\n    time_t start, stop;\n    double data[2][N];\n    double coefs[k_max][2];\n\n    time(&amp;start);\n\n    for(int i=0; i&lt;k_max; ++i)\n    {\n        for(int j=0; j&lt;N; ++j)\n        {\n            coefs[i][0] += data[1][j-1] * (cos((i+1) * data[0][j-1]) - cos((i+1) * data[0][j]));\n            coefs[i][1] += data[1][j-1] * (sin((i+1) * data[0][j-1]) - sin((i+1) * data[0][j]));\n        }\n    }\n    // End of main loop\n\n    time(&amp;stop);\n\n    // Speed result\n    double diff = difftime(stop, start);\n    std::cout &lt;&lt; &quot;Time: &quot; &lt;&lt; diff &lt;&lt; &quot; seconds&quot; &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n<p>Switching the for-loops gives me: <strong>3 seconds</strong> for C++ code, optimized with <em>-O3</em>, while Python code runs at 7.816 seconds.</p>\n"}, {"comments": [{"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1483039892, "post_id": 41382582, "comment_id": 69974385, "body": "Sorry, but I have to downvote--the first code you have in this answer is completely broken (has undefined behavior, and at least in my testing dies with a segfault) and your final C code doesn&#39;t even seem to <i>attempt</i> to do the same things as originally intended."}, {"owner": {"reputation": 665, "user_id": 5316984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89aaf78a23ca896b71dad4bf505dd2bb?s=128&d=identicon&r=PG&f=1", "display_name": "Gwidryj", "link": "https://stackoverflow.com/users/5316984/gwidryj"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1483040776, "post_id": 41382582, "comment_id": 69974759, "body": "I can successfully run it (despite returning double in place of int), but anyway, I don&#39;t understand your comment. In my opinion it does <i>exactly</i> the same, main loops are identical. Could you explain why my &quot;<i>final C code doesn&#39;t even seem to attempt to do the same things</i>&quot;?"}, {"owner": {"reputation": 665, "user_id": 5316984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89aaf78a23ca896b71dad4bf505dd2bb?s=128&d=identicon&r=PG&f=1", "display_name": "Gwidryj", "link": "https://stackoverflow.com/users/5316984/gwidryj"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1483041910, "post_id": 41382582, "comment_id": 69975234, "body": "@JerryCoffin I would call it rather a small bug, not &quot;<i>doesn&#39;t even seem to attempt to do the same things</i>&quot;. You could just say <i>put N-1 in j-loop</i> instead of repeating &quot;<i>undefined behavior</i>&quot;. Anyway, timing is almost the same - I just have checked corrected version."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1483042348, "post_id": 41382582, "comment_id": 69975414, "body": "Thousands of virus writers would like to confirm your idea that a buffer overrun is a small bug, and encourage you to continue doing it as often as possible. As far as not even trying to do the same things, your second code has (for example) <code>y2[i] = x[i] * 7.9463;</code>, which doesn&#39;t seem to correspond to anything in the question."}, {"owner": {"reputation": 665, "user_id": 5316984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89aaf78a23ca896b71dad4bf505dd2bb?s=128&d=identicon&r=PG&f=1", "display_name": "Gwidryj", "link": "https://stackoverflow.com/users/5316984/gwidryj"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 1, "creation_date": 1483042675, "post_id": 41382582, "comment_id": 69975536, "body": "@JerryCoffin I think I explained it in a paragraph above, but let others judge this."}], "tags": [], "owner": {"reputation": 665, "user_id": 5316984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89aaf78a23ca896b71dad4bf505dd2bb?s=128&d=identicon&r=PG&f=1", "display_name": "Gwidryj", "link": "https://stackoverflow.com/users/5316984/gwidryj"}, "is_accepted": true, "score": 28, "last_activity_date": 1599241926, "last_edit_date": 1599241926, "creation_date": 1483025074, "answer_id": 41382582, "question_id": 41365723, "link": "https://stackoverflow.com/questions/41365723/why-is-my-python-numpy-code-faster-than-c/41382582#41382582", "title": "Why is my Python NumPy code faster than C++?", "body": "<p>I found this question interesting, because every time I encountered similar topic about the speed of NumPy (compared to C/C++) there was always answers like &quot;it's a thin wrapper, its core is written in C, so it's fats&quot;, but this doesn't explain why C should be slower than C with additional layer (even a thin one).</p>\n<p>The answer is: <strong>your C++ code is not slower than your Python code when properly compiled</strong>.</p>\n<p>I've done some benchmarks, and at first it seemed that NumPy is surprisingly faster. But I forgot about optimizing the compilation with <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.9.4/gcc/Optimize-Options.html#Optimize-Options\" rel=\"nofollow noreferrer\" title=\"gcc\">GCC</a>.</p>\n<p>I've computed everything again and also compared results with a pure C version of your code. I am using GCC version 4.9.2, and Python 2.7.9 (compiled from the source with the same GCC). To compile your C++ code I used <code>g++ -O3 main.cpp -o main</code>, to compile my C code I used <code>gcc -O3 main.c -lm -o main</code>. In all examples I filled <code>data</code> variables with some numbers (0.1, 0.4), as it changes results. I also changed <em>np.arrays</em> to use doubles (<code>dtype=np.float64</code>), because there are doubles in C++ example. My pure C version of your code (it's similar):</p>\n<pre><code>#include &lt;math.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n\nconst int k_max = 100000;\nconst int N = 10000;\n\nint main(void)\n{\n    clock_t t_start, t_end;\n    double data1[N], data2[N], coefs1[k_max], coefs2[k_max], seconds;\n    int z;\n    for( z = 0; z &lt; N; z++ )\n    {\n        data1[z] = 0.1;\n        data2[z] = 0.4;\n    }\n\n    int i, j;\n    t_start = clock();\n    for( i = 0; i &lt; k_max; i++ )\n    {\n        for( j = 0; j &lt; N-1; j++ )\n        {\n            coefs1[i] += data2[j] * (cos((i+1) * data1[j]) - cos((i+1) * data1[j+1]));\n            coefs2[i] += data2[j] * (sin((i+1) * data1[j]) - sin((i+1) * data1[j+1]));\n        }\n    }\n    t_end = clock();\n\n    seconds = (double)(t_end - t_start) / CLOCKS_PER_SEC;\n    printf(&quot;Time: %f s\\n&quot;, seconds);\n    return coefs1[0];\n}\n</code></pre>\n<p>For <code>k_max = 100000, N = 10000</code> results where following:</p>\n<ul>\n<li>Python 70.284362 s</li>\n<li>C++    69.133199 s</li>\n<li>C      61.638186 s</li>\n</ul>\n<p>Python and C++ have basically the same time, but note that there is a Python loop of length k_max, which should be much slower compared to C/C++ one. And it is.</p>\n<p>For <code>k_max = 1000000, N = 1000</code> we have:</p>\n<ul>\n<li>Python 115.42766 s</li>\n<li>C++    70.781380 s</li>\n</ul>\n<p>For <code>k_max = 1000000, N = 100</code>:</p>\n<ul>\n<li>Python 52.86826 s</li>\n<li>C++    7.050597 s</li>\n</ul>\n<p>So the difference increases with fraction <code>k_max/N</code>, but python is not faster even for <code>N</code> much bigger than <code>k_max</code>, e. g. <code>k_max = 100, N = 100000</code>:</p>\n<ul>\n<li>Python 0.651587 s</li>\n<li>C++    0.568518 s</li>\n</ul>\n<p>Obviously, the main speed difference between C/C++ and Python is in the <code>for</code> loop. But I wanted to find out the difference between simple operations on arrays in NumPy and in C. Advantages of using NumPy in your code consists of: 1. multiplying the whole array by a number, 2. calculating sin/cos of the whole array, 3. summing all elements of the array, instead of doing those operations on every single item separately. So I prepared two scripts to compare only these operations.</p>\n<p>Python script:</p>\n<pre><code>import numpy as np\nfrom time import time\n\nN = 10000\nx_len = 100000\n\ndef main():\n    x = np.ones(x_len, dtype=np.float64) * 1.2345\n\n    start = time()\n    for i in xrange(N):\n        y1 = np.cos(x, dtype=np.float64)\n    end = time()\n    print('cos: {} s'.format(end-start))\n\n    start = time()\n    for i in xrange(N):\n        y2 = x * 7.9463\n    end = time()\n    print('multi: {} s'.format(end-start))\n\n    start = time()\n    for i in xrange(N):\n        res = np.sum(x, dtype=np.float64)\n    end = time()\n    print('sum: {} s'.format(end-start))\n\n    return y1, y2, res\n\nif __name__ == '__main__':\n    main()\n\n# results\n# cos: 22.7199969292 s\n# multi: 0.841291189194 s\n# sum: 1.15971088409 s\n</code></pre>\n<p>C script:</p>\n<pre><code>#include &lt;math.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n\nconst int N = 10000;\nconst int x_len = 100000;\n\nint main()\n{\n    clock_t t_start, t_end;\n    double x[x_len], y1[x_len], y2[x_len], res, time;\n    int i, j;\n    for( i = 0; i &lt; x_len; i++ )\n    {\n        x[i] = 1.2345;\n    }\n\n    t_start = clock();\n    for( j = 0; j &lt; N; j++ )\n    {\n        for( i = 0; i &lt; x_len; i++ )\n        {\n            y1[i] = cos(x[i]);\n        }\n    }\n    t_end = clock();\n    time = (double)(t_end - t_start) / CLOCKS_PER_SEC;\n    printf(&quot;cos: %f s\\n&quot;, time);\n\n    t_start = clock();\n    for( j = 0; j &lt; N; j++ )\n    {\n        for( i = 0; i &lt; x_len; i++ )\n        {\n            y2[i] = x[i] * 7.9463;\n        }\n    }\n    t_end = clock();\n    time = (double)(t_end - t_start) / CLOCKS_PER_SEC;\n    printf(&quot;multi: %f s\\n&quot;, time);\n\n    t_start = clock();\n    for( j = 0; j &lt; N; j++ )\n    {\n        res = 0.0;\n        for( i = 0; i &lt; x_len; i++ )\n        {\n            res += x[i];\n        }\n    }\n    t_end = clock();\n    time = (double)(t_end - t_start) / CLOCKS_PER_SEC;\n    printf(&quot;sum: %f s\\n&quot;, time);\n\n    return y1[0], y2[0], res;\n}\n\n// results\n// cos: 20.910590 s\n// multi: 0.633281 s\n// sum: 1.153001 s\n</code></pre>\n<p>Python results:</p>\n<ul>\n<li>cos: 22.7199969292 s</li>\n<li>multi: 0.841291189194 s</li>\n<li>sum: 1.15971088409 s</li>\n</ul>\n<p>C results:</p>\n<ul>\n<li>cos: 20.910590 s</li>\n<li>multi: 0.633281 s</li>\n<li>sum: 1.153001 s</li>\n</ul>\n<p>As you can see NumPy is incredibly fast, but always a bit slower than pure C.</p>\n"}], "owner": {"reputation": 162, "user_id": 7206328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bf83c63bbdda73ddf24481f805f663f?s=128&d=identicon&r=PG&f=1", "display_name": "Mateusz", "link": "https://stackoverflow.com/users/7206328/mateusz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8995, "favorite_count": 3, "accepted_answer_id": 41382582, "answer_count": 3, "score": 5, "last_activity_date": 1599242525, "creation_date": 1482941300, "last_edit_date": 1599242178, "question_id": 41365723, "link": "https://stackoverflow.com/questions/41365723/why-is-my-python-numpy-code-faster-than-c", "title": "Why is my Python NumPy code faster than C++?", "body": "<p>Why is this Python NumPy code,</p>\n<pre><code>import numpy as np\nimport time\n\nk_max = 40000\nN = 10000\n\ndata = np.zeros((2,N))\ncoefs = np.zeros((k_max,2),dtype=float)\n\nt1 = time.time()\nfor k in xrange(1,k_max+1):\n    cos_k = np.cos(k*data[0,:])\n    sin_k = np.sin(k*data[0,:])\n    coefs[k-1,0] = (data[1,-1]-data[1,0]) + np.sum(data[1,:-1]*(cos_k[:-1] - cos_k[1:]))\n    coefs[k-1,1] = np.sum(data[1,:-1]*(sin_k[:-1] - sin_k[1:]))\nt2 = time.time()\n\nprint('Time:')\nprint(t2-t1)\n</code></pre>\n<p>faster than the following C++ code?</p>\n<pre><code>#include &lt;cstdio&gt;\n#include &lt;iostream&gt;\n#include &lt;cmath&gt;\n#include &lt;time.h&gt;\n\nusing namespace std;\n\n// consts\nconst unsigned int k_max = 40000;\nconst unsigned int N = 10000;\n\nint main()\n{\n    time_t start, stop;\n    double diff;\n    // table with data\n    double data1[ N ];\n    double data2[ N ];\n    // table of results\n    double coefs1[ k_max ];\n    double coefs2[ k_max ];\n    // main loop\n    time( &amp; start );\n    for( unsigned int j = 1; j&lt;N; j++ )\n    {\n        for( unsigned int i = 0; i&lt;k_max; i++ )\n        {\n            coefs1[ i ] += data2[ j-1 ]*(cos((i+1)*data1[ j-1 ]) - cos((i+1)*data1[ j ]));\n            coefs2[ i ] += data2[ j-1 ]*(sin((i+1)*data1[ j-1 ]) - sin((i+1)*data1[ j ]));\n        }\n    }\n    // end of main loop\n    time( &amp; stop );\n    // speed result\n    diff = difftime( stop, start );\n    cout &lt;&lt; &quot;Time: &quot; &lt;&lt; diff &lt;&lt; &quot; seconds&quot;;\n    return 0;\n}\n</code></pre>\n<p>The first one shows: &quot;Time: 8 seconds&quot;\nwhile the second: &quot;Time: 11 seconds&quot;</p>\n<p>I know that NumPy is written in C, but I would still think that C++ example would be faster. Am I missing something? Is there a way to improve the C++ code (or the Python one)?</p>\n<h3>Version 2 of the code</h3>\n<p>I have changed the C++ code (dynamical tables to static tables) as suggested in one of the comments. The C++ code is faster now, but still much slower than the Python version.</p>\n<h3>Version 3 of the code</h3>\n<p>I have changed from debug to release mode and increased 'k' from 4000 to 40000. Now NumPy is just slightly faster (8 seconds to 11 seconds).</p>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-2012"], "comments": [{"owner": {"reputation": 54, "user_id": 7303991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd1cde2549c3922415dd8c4b5ba35412?s=128&d=identicon&r=PG&f=1", "display_name": "Maxfurry", "link": "https://stackoverflow.com/users/7303991/maxfurry"}, "edited": false, "score": 0, "creation_date": 1482942420, "post_id": 41365714, "comment_id": 69933397, "body": "Ok. Thanks guys I&quot;ll try to use both and see which works best for me. I&#39;ll let u guys know how it goes. Thanks once again."}, {"owner": {"reputation": 54, "user_id": 7303991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd1cde2549c3922415dd8c4b5ba35412?s=128&d=identicon&r=PG&f=1", "display_name": "Maxfurry", "link": "https://stackoverflow.com/users/7303991/maxfurry"}, "edited": false, "score": 0, "creation_date": 1482942496, "post_id": 41365714, "comment_id": 69933436, "body": "Please what does minus one mean beside the post"}, {"owner": {"reputation": 5569, "user_id": 201787, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/vgB9F.jpg?s=128&g=1", "display_name": "metal", "link": "https://stackoverflow.com/users/201787/metal"}, "edited": false, "score": 0, "creation_date": 1482942869, "post_id": 41365714, "comment_id": 69933627, "body": "It means someone didn&#39;t think this was a good question for some reason. It is customary to state the reason here in the comments, but it is not required."}, {"owner": {"reputation": 54, "user_id": 7303991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd1cde2549c3922415dd8c4b5ba35412?s=128&d=identicon&r=PG&f=1", "display_name": "Maxfurry", "link": "https://stackoverflow.com/users/7303991/maxfurry"}, "reply_to_user": {"reputation": 5569, "user_id": 201787, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/vgB9F.jpg?s=128&g=1", "display_name": "metal", "link": "https://stackoverflow.com/users/201787/metal"}, "edited": false, "score": 0, "creation_date": 1482943334, "post_id": 41365714, "comment_id": 69933848, "body": "OK. Thanks alot @ metal."}], "answers": [{"comments": [{"owner": {"reputation": 54, "user_id": 7303991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd1cde2549c3922415dd8c4b5ba35412?s=128&d=identicon&r=PG&f=1", "display_name": "Maxfurry", "link": "https://stackoverflow.com/users/7303991/maxfurry"}, "edited": false, "score": 0, "creation_date": 1482942032, "post_id": 41365769, "comment_id": 69933181, "body": "Thank you for your quick reply but my problem is that it worked on Dev C++ but why not on Visual studio. I&quot;ll try to post the code"}, {"owner": {"reputation": 5569, "user_id": 201787, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/vgB9F.jpg?s=128&g=1", "display_name": "metal", "link": "https://stackoverflow.com/users/201787/metal"}, "reply_to_user": {"reputation": 54, "user_id": 7303991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd1cde2549c3922415dd8c4b5ba35412?s=128&d=identicon&r=PG&f=1", "display_name": "Maxfurry", "link": "https://stackoverflow.com/users/7303991/maxfurry"}, "edited": false, "score": 0, "creation_date": 1482942188, "post_id": 41365769, "comment_id": 69933268, "body": "@Maxfurry: I don&#39;t see the code. But I have added an example to my answer."}, {"owner": {"reputation": 54, "user_id": 7303991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd1cde2549c3922415dd8c4b5ba35412?s=128&d=identicon&r=PG&f=1", "display_name": "Maxfurry", "link": "https://stackoverflow.com/users/7303991/maxfurry"}, "edited": false, "score": 0, "creation_date": 1482942583, "post_id": 41365769, "comment_id": 69933478, "body": "Thanks for the example I could not put the code it said it was too long"}, {"owner": {"reputation": 5569, "user_id": 201787, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/vgB9F.jpg?s=128&g=1", "display_name": "metal", "link": "https://stackoverflow.com/users/201787/metal"}, "reply_to_user": {"reputation": 54, "user_id": 7303991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd1cde2549c3922415dd8c4b5ba35412?s=128&d=identicon&r=PG&f=1", "display_name": "Maxfurry", "link": "https://stackoverflow.com/users/7303991/maxfurry"}, "edited": false, "score": 0, "creation_date": 1482943292, "post_id": 41365769, "comment_id": 69933816, "body": "What said the code was too long? I&#39;m not sure what you mean."}, {"owner": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "edited": false, "score": 0, "creation_date": 1482948123, "post_id": 41365769, "comment_id": 69936166, "body": "The only thing I would add is that create_directory can throw. So try-catch or pass a boost::system::error_code object"}, {"owner": {"reputation": 5569, "user_id": 201787, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/vgB9F.jpg?s=128&g=1", "display_name": "metal", "link": "https://stackoverflow.com/users/201787/metal"}, "reply_to_user": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "edited": false, "score": 0, "creation_date": 1482952355, "post_id": 41365769, "comment_id": 69938154, "body": "@lakeweb: Agreed. I had tried to cover that in my last paragraph."}, {"owner": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "edited": false, "score": 1, "creation_date": 1482959626, "post_id": 41365769, "comment_id": 69941192, "body": "@metal I&#39;m sorry, yes you did! I did not see it in the code and did not read carefully enough."}], "tags": [], "owner": {"reputation": 5569, "user_id": 201787, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/vgB9F.jpg?s=128&g=1", "display_name": "metal", "link": "https://stackoverflow.com/users/201787/metal"}, "is_accepted": false, "score": 2, "last_activity_date": 1482943355, "last_edit_date": 1482943355, "creation_date": 1482941468, "answer_id": 41365769, "question_id": 41365714, "link": "https://stackoverflow.com/questions/41365714/making-directory-with-vitual-studio-2012-coding-in-c/41365769#41365769", "title": "Making directory with vitual studio 2012 coding in c++", "body": "<p>Windows and Linux (POSIX) don't support the same API for most file system functions. You can use Microsoft's platform-specific APIs like <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa363855(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>CreateDirectory()</code></a> or use the POSIX-like versions like <a href=\"https://msdn.microsoft.com/en-us/library/2fkk4dzw(v=vs.110).aspx\" rel=\"nofollow noreferrer\"><code>_mkdir()</code></a>.</p>\n\n<p>If you have a more recent C++ compiler / standard library, you can use the <a href=\"http://en.cppreference.com/w/cpp/experimental/fs\" rel=\"nofollow noreferrer\">experimental filesystem library</a> that is slated to become part of standard C++, perhaps as early as C++17. If not, you can use <a href=\"http://www.boost.org/doc/libs/1_62_0/libs/filesystem/doc/index.htm\" rel=\"nofollow noreferrer\">Boost.Filesystem</a> from which the pre-standard experimental library was drawn.</p>\n\n<p>Here's a complete, minimal example using Boost.Filesystem, which will work on both Windows and Linux without modification:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;boost/filesystem.hpp&gt;\n\nnamespace fs = boost::filesystem;\n\nint main()\n{\n    if( !fs::exists( \"my_dir\" ) )\n    {\n        if( fs::create_directory( \"my_dir\" ) )\n        {\n            std::cout &lt;&lt; \"Directory created!\\n\";\n        }\n    }\n}\n</code></pre>\n\n<p>See it run: <kbd><a href=\"http://coliru.stacked-crooked.com/a/9f67f722b6187f78\" rel=\"nofollow noreferrer\">Coliru</a></kbd>.</p>\n\n<p>Here's the same code but with <code>std::experimental::filesystem</code>: <kbd><a href=\"http://coliru.stacked-crooked.com/a/aa6fe873f98ff7ce\" rel=\"nofollow noreferrer\">Coliru</a></kbd>.</p>\n\n<p>You would need the appropriate include and linker paths setup in your build system for either of these to work locally. The biggest \"gotcha\" using the filesystem is that it throws exceptions for a lot of errors by default. You can either setup <code>try</code>/<code>catch</code> blocks at the appropriate places or pass in an error code param to make it return the status there instead.</p>\n"}, {"tags": [], "owner": {"reputation": 456, "user_id": 7311969, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/hIOk2.png?s=128&g=1", "display_name": "Angelica", "link": "https://stackoverflow.com/users/7311969/angelica"}, "is_accepted": false, "score": 0, "last_activity_date": 1482941994, "creation_date": 1482941994, "answer_id": 41365913, "question_id": 41365714, "link": "https://stackoverflow.com/questions/41365714/making-directory-with-vitual-studio-2012-coding-in-c/41365913#41365913", "title": "Making directory with vitual studio 2012 coding in c++", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;windows.h&gt;\n\nint main() {\n    if (!CreateDirectoryA(\"C:\\\\ABC123\", NULL))\n    {\n        if (GetLastError() == ERROR_ALREADY_EXISTS)\n        {\n            printf(\"Already Exists\");\n        }else if (GetLastError()== ERROR_PATH_NOT_FOUND)\n        {\n            printf(\"Path not found\");\n        }\n    }else{\n        printf(\"Created..\");\n    }\n}\n</code></pre>\n\n<p>simple function will do.</p>\n"}, {"tags": [], "owner": {"reputation": 54, "user_id": 7303991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd1cde2549c3922415dd8c4b5ba35412?s=128&d=identicon&r=PG&f=1", "display_name": "Maxfurry", "link": "https://stackoverflow.com/users/7303991/maxfurry"}, "is_accepted": true, "score": 0, "last_activity_date": 1482975893, "creation_date": 1482975893, "answer_id": 41372106, "question_id": 41365714, "link": "https://stackoverflow.com/questions/41365714/making-directory-with-vitual-studio-2012-coding-in-c/41372106#41372106", "title": "Making directory with vitual studio 2012 coding in c++", "body": "<p>Thanks alot guys but I found this that solved my problem</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;direct.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\nusing namespace std;\n\nvoid main( void )\n{\n   if( _mkdir( \"\\\\testtmp\" ) == 0 )\n   {\n      printf( \"Directory '\\\\testtmp' was successfully created\\n\" );\n      system( \"dir \\\\testtmp\" );\n      if( _rmdir( \"\\\\testtmp\" ) == 0 )\n        printf( \"Directory '\\\\testtmp' was successfully removed\\n\"  );\n      else\n         printf( \"Problem removing directory '\\\\testtmp'\\n\" );\n   }\n   else\n      printf( \"Problem creating directory '\\\\testtmp'\\n\" );\n   int a;\n   cin &gt;&gt; a;\n}\n</code></pre>\n\n<p>the cin >> a; is just to keep the output screen so I can see the result</p>\n"}], "owner": {"reputation": 54, "user_id": 7303991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd1cde2549c3922415dd8c4b5ba35412?s=128&d=identicon&r=PG&f=1", "display_name": "Maxfurry", "link": "https://stackoverflow.com/users/7303991/maxfurry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 41372106, "answer_count": 3, "score": 0, "last_activity_date": 1482975893, "creation_date": 1482941289, "question_id": 41365714, "link": "https://stackoverflow.com/questions/41365714/making-directory-with-vitual-studio-2012-coding-in-c", "title": "Making directory with vitual studio 2012 coding in c++", "body": "<p>Good evening everyone, please I'm writing a Library management application in c++ using virtual studio 2012. I had already writing some codes using Dev c++ it worked but when I switched to visual studio it gives error. It involves creating folders and  checking if the folders were actually created. That is using dir and mkdir.</p>\n"}, {"tags": ["c++", "arrays", "c++11", "c++14", "unique-ptr"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482940709, "post_id": 41365505, "comment_id": 69932445, "body": "Is <code>std::array</code> along with a <code>std::initializer_list</code> an option?"}, {"owner": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482940747, "post_id": 41365505, "comment_id": 69932468, "body": "<code>std::array</code> is an option but the intent is not to repeat the same filling element <code>N</code> times"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482940793, "post_id": 41365505, "comment_id": 69932496, "body": "That&#39;s why I proposed <code>std::initializer_list</code> (or simply <code>{}</code> initialiization)."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482940906, "post_id": 41365505, "comment_id": 69932555, "body": "@Light It&#39;s amazing. I learn something new every day here."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482941024, "post_id": 41365505, "comment_id": 69932617, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: I wasn&#39;t aware of it either, but it took all of 10 seconds to hypothesise that there was a <code>std::fill</code> overload or sibling function that did this job. Then 10 seconds to confirm via cppreference :)"}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "edited": false, "score": 0, "creation_date": 1482941071, "post_id": 41365615, "comment_id": 69932652, "body": "@songyuanyao: Yes :)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1482943346, "post_id": 41365615, "comment_id": 69933854, "body": "@Quentin: OP has tagged the question C++14. She or he or it can always fall back on a homebrew <code>make_unique</code> if needed :)"}, {"owner": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "edited": false, "score": 0, "creation_date": 1482952352, "post_id": 41365615, "comment_id": 69938151, "body": "@LightnessRacesinOrbit to be fair I added the C++14 tag after Quentin&#39;s comment :) seeing as your solution is the most concise but only works in C++14 as written."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "edited": false, "score": 0, "creation_date": 1528887302, "post_id": 41365615, "comment_id": 88674615, "body": "@JeJo: Indeed. Write an answer!"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "edited": false, "score": 1, "creation_date": 1528887405, "post_id": 41365615, "comment_id": 88674676, "body": "@JeJo: Please do not post answers as comments thanks"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 20, "last_activity_date": 1482952471, "last_edit_date": 1495541329, "creation_date": 1482940899, "answer_id": 41365615, "question_id": 41365505, "link": "https://stackoverflow.com/questions/41365505/how-to-fill-an-array-of-unique-ptr/41365615#41365615", "title": "How to fill an array of unique_ptr?", "body": "<p>No, but this is what <a href=\"http://en.cppreference.com/w/cpp/algorithm/generate\" rel=\"nofollow noreferrer\"><code>std::generate</code></a> is for.</p>\n\n<p>Instead of being given a single value that's copied throughout the target range, <code>std::generate</code> is given a \"generator\" function that creates each value as needed.</p>\n\n<p>So, probably, something like this:</p>\n\n<pre><code>std::unique_ptr&lt;int&gt; ar[3];\nstd::generate(\n   std::begin(ar),\n   std::end(ar),\n   []() { return std::make_unique&lt;int&gt;(1); }\n);\n</code></pre>\n\n<p>I haven't tried it, and don't know whether you need to fiddle with it at all in order to avoid problems stemming from non-copyability. Hopefully move semantics are enough.</p>\n\n<p>(Of course, in C++11, you will need <a href=\"https://stackoverflow.com/a/17903225/560648\">your own <code>make_unique</code> function</a>.)</p>\n\n<p>By the way, your <code>.begin()</code> and <code>.end()</code> were wrong (arrays don't have member functions), so (thanks to a reminder from songyuanyao) I have corrected those.</p>\n"}, {"tags": [], "owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "is_accepted": false, "score": 8, "last_activity_date": 1482940929, "creation_date": 1482940929, "answer_id": 41365625, "question_id": 41365505, "link": "https://stackoverflow.com/questions/41365505/how-to-fill-an-array-of-unique-ptr/41365625#41365625", "title": "How to fill an array of unique_ptr?", "body": "<p>I don't think you can do it with <code>std::fill()</code> but it is trivial to do with <code>std::generate()</code>:</p>\n\n<pre><code>std::unique_ptr&lt;int&gt; array[10];\nstd::generate(std::begin(array), std::end(array),\n              []{ return std::unique_ptr&lt;int&gt;(new int(17)); });\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8766436, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/6fe67aecb30dae1ba204a06986c4b2f0?s=128&d=identicon&r=PG", "display_name": "Yoichi Hariguchi", "link": "https://stackoverflow.com/users/8766436/yoichi-hariguchi"}, "is_accepted": false, "score": 0, "last_activity_date": 1507823871, "creation_date": 1507823871, "answer_id": 46714047, "question_id": 41365505, "link": "https://stackoverflow.com/questions/41365505/how-to-fill-an-array-of-unique-ptr/46714047#46714047", "title": "How to fill an array of unique_ptr?", "body": "<p>Another solution:</p>\n\n<pre><code>std::unique_ptr&lt;int&gt; ar[3];\n\nsize_t i;\nfor (i = 0; i &lt; elementsof(ar); ++i) {\n    ar[i].reset(new int);\n}\n</code></pre>\n"}], "owner": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6507, "favorite_count": 4, "accepted_answer_id": 41365615, "answer_count": 3, "score": 6, "last_activity_date": 1528887636, "creation_date": 1482940536, "last_edit_date": 1482941729, "question_id": 41365505, "link": "https://stackoverflow.com/questions/41365505/how-to-fill-an-array-of-unique-ptr", "title": "How to fill an array of unique_ptr?", "body": "<p>Is it possible to use <code>std:fill</code> to fill an array of <code>unique_ptr</code>s? The intention is to have distinct pointers to distinct objects which are initialized with the same parameters.</p>\n\n<p>For example:</p>\n\n<pre><code>std::unique_ptr&lt;int&gt; ar[3];\nstd::fill(ar.begin(), ar.end(), make_unique_for_each_element_somehow&lt;int&gt;(1));\n</code></pre>\n"}, {"tags": ["c++", "input", "keyboard", "sfml", "pseudocode"], "comments": [{"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1482941115, "post_id": 41365462, "comment_id": 69932685, "body": "Have a single polling loop in your program and wrap it inside a class alongside the previous key states. You can make it register callbacks, whatever..."}, {"owner": {"reputation": 204, "user_id": 5477609, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/08ZPt.png?s=128&g=1", "display_name": "KKZiomek", "link": "https://stackoverflow.com/users/5477609/kkziomek"}, "reply_to_user": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1482942354, "post_id": 41365462, "comment_id": 69933359, "body": "How could I do it more exactly?"}], "answers": [{"tags": [], "owner": {"reputation": 33251, "user_id": 409744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b055a62302498782454622c61e44aa51?s=128&d=identicon&r=PG", "display_name": "Mario", "link": "https://stackoverflow.com/users/409744/mario"}, "is_accepted": false, "score": 1, "last_activity_date": 1483002325, "creation_date": 1483002325, "answer_id": 41376351, "question_id": 41365462, "link": "https://stackoverflow.com/questions/41365462/turning-any-librarys-iskeypressed-function-into-keypressedonce/41376351#41376351", "title": "Turning any library&#39;s &quot;isKeyPressed&quot; function into &quot;keyPressedOnce&quot;?", "body": "<p>Just because some library doesn't exactly work like you want doesn't make it defective. It might be intentional (as in this case).</p>\n\n<p>SFML provides you two different approaches to getting keyboard input (three, if you consider the <code>sf::Event::TextEntered</code> event a different approach):</p>\n\n<ul>\n<li>You can check the keyboard state directly to determine whether a key is pressed or not.</li>\n<li>You can check your window's event queue to detect keys being pressed or released.</li>\n</ul>\n\n<p>While you utilized the first approach, you'd actually want to use the second one:</p>\n\n<pre><code>sf::Event event\nwhile (window.pollEvent(event) {\n    switch (event.type) {\n        case sf::Event::KeyPressed:\n            std::cout &lt;&lt; \"down: \" &lt;&lt; event.key.code &lt;&lt; std::endl;\n            break;\n        case sf::Event::KeyReleased:\n            std::cout &lt;&lt; \"up: \" &lt;&lt; event.key.code &lt;&lt; std::endl;\n            break;\n        // Don't forget to check for other events here\n    }\n}\n</code></pre>\n\n<p>As you'll notice, these events will only fire once you press or release the key (unless you're using <code>sf::Window::setKeyRepeatEnabled()</code> to change this behavior), which exactly fits what you're looking for.</p>\n"}], "owner": {"reputation": 204, "user_id": 5477609, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/08ZPt.png?s=128&g=1", "display_name": "KKZiomek", "link": "https://stackoverflow.com/users/5477609/kkziomek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 757, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1483002325, "creation_date": 1482940379, "question_id": 41365462, "link": "https://stackoverflow.com/questions/41365462/turning-any-librarys-iskeypressed-function-into-keypressedonce", "title": "Turning any library&#39;s &quot;isKeyPressed&quot; function into &quot;keyPressedOnce&quot;?", "body": "<p>Many multimedia libraries in C++ have function to detect keyboard states. But those functions are defective because they only detect if a key is held, and sends a constant signal. I want to turn a function like this to sends one pulse of signal, only when the key is pressed itself, not while it is held after pressing it.</p>\n\n<p>I did something like this (in pseudocode):</p>\n\n<pre><code>while isKeyPressed { if not isKeyPressed (exit_loop) }\n</code></pre>\n\n<p>This is not effective because even though it works, it is impossible to test for other keys, while the \"while\" loop is working, and it also delays the program for how long the key is held.</p>\n\n<p>Can anyone think of a better option?</p>\n\n<p>(By the way I used SFML's function <code>sf::Keyboard::isKeyPressed()</code>).</p>\n"}, {"tags": ["c++", "opengl", "glfw", "glew"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1482940381, "post_id": 41365440, "comment_id": 69932257, "body": "The right tool to solve such problems is your debugger. You should step through your code line-by-line <i>before</i> asking on Stack Overflow. For more help, please read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs (by Eric Lippert)</a>. At a minimum, you should &#91;edit] your question to include a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable</a> example that reproduces your problem, along with the observations you made in the debugger."}, {"owner": {"reputation": 1518, "user_id": 2434628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f694c7757c0085ac1f0ed88d960ff657?s=128&d=identicon&r=PG", "display_name": "AresCaelum", "link": "https://stackoverflow.com/users/2434628/arescaelum"}, "edited": false, "score": 0, "creation_date": 1482940511, "post_id": 41365440, "comment_id": 69932330, "body": "Can you post the actual error message?"}, {"owner": {"reputation": 1518, "user_id": 2434628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f694c7757c0085ac1f0ed88d960ff657?s=128&d=identicon&r=PG", "display_name": "AresCaelum", "link": "https://stackoverflow.com/users/2434628/arescaelum"}, "edited": false, "score": 1, "creation_date": 1482941094, "post_id": 41365440, "comment_id": 69932666, "body": "from what I can see I&#39;m surprised you didnt get the &quot;Access Violation&quot; in your first test case.  You are setting pointers to point at variables that go out of scope at the end of your DemoGame::Init() function.  Which means they get cleaned up and causes undefined behaviour."}], "answers": [{"comments": [{"owner": {"reputation": 1518, "user_id": 2434628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f694c7757c0085ac1f0ed88d960ff657?s=128&d=identicon&r=PG", "display_name": "AresCaelum", "link": "https://stackoverflow.com/users/2434628/arescaelum"}, "edited": false, "score": 1, "creation_date": 1482941551, "post_id": 41365768, "comment_id": 69932932, "body": "Should also mention that if he is calling new he needs to use delete, or he could use a shared_ptr"}, {"owner": {"reputation": 11, "user_id": 4232541, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ugquy.jpg?s=128&g=1", "display_name": "picatrix", "link": "https://stackoverflow.com/users/4232541/picatrix"}, "edited": false, "score": 1, "creation_date": 1482942093, "post_id": 41365768, "comment_id": 69933210, "body": "It works! thank you! This will be rockiest path to learn I&#39;ve ever walked on..."}], "tags": [], "owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "is_accepted": true, "score": 1, "last_activity_date": 1482941665, "last_edit_date": 1495540802, "creation_date": 1482941464, "answer_id": 41365768, "question_id": 41365440, "link": "https://stackoverflow.com/questions/41365440/c-strange-access-violation-with-opengl/41365768#41365768", "title": "C++ Strange Access Violation with OpenGL", "body": "<p>You store addresses of stack objects that get deleted. For example,</p>\n\n<pre><code>Window wi = Window(800, 600, \"test\");\nw = &amp;wi;\n</code></pre>\n\n<p>Creates a local variable <code>wi</code> on the stack, which gets deleted automatically when it goes out of scope (which is the case at the end of the function). After that, w will point to an address that is already freed, which will lead to big troubles when you try to access this variables later on as you do here:</p>\n\n<pre><code>glfwSwapBuffers(w-&gt;getWindow());\n</code></pre>\n\n<p>If you want to create the window object on the heap, you have to use the following code in <code>DemoGame::init()</code>:</p>\n\n<pre><code>w = new Window(800, 600, \"test\");\n</code></pre>\n\n<p>Don't forget to delete this object manually by calling <code>delete w</code> when you don't need it anymore. The same problem also occures for the <code>TestShader</code> instance.</p>\n\n<p><em>Side note:</em> <code>Window wi = Window(800, 600, \"test\");</code> is still a strange syntax when creating objects on the stack. The correct way would be <code>Window wi(800, 600, \"test\");</code> Have a look at this posts for why this makes a difference: <a href=\"https://stackoverflow.com/questions/2722879/calling-constructors-in-c-without-new\">Calling constructors in c++ without new</a></p>\n\n<p>Edit: Your first example just works because you are calling the render function inside the init function, thus the objects do not get out of scope. Storing pointers to local object is still not good practice.</p>\n"}, {"tags": [], "owner": {"reputation": 27354, "user_id": 91282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ae09a7b73edd93a4ec40a5c1b29e728?s=128&d=identicon&r=PG", "display_name": "Till", "link": "https://stackoverflow.com/users/91282/till"}, "is_accepted": false, "score": 1, "last_activity_date": 1482941698, "last_edit_date": 1482941698, "creation_date": 1482941583, "answer_id": 41365797, "question_id": 41365440, "link": "https://stackoverflow.com/questions/41365440/c-strange-access-violation-with-opengl/41365797#41365797", "title": "C++ Strange Access Violation with OpenGL", "body": "<p>Your problem is here:</p>\n\n<pre><code>Window wi = Window(800, 600, \"test\");\nw = &amp;wi;\nTestShader te = TestShader();\nt = &amp;te;\n</code></pre>\n\n<p>Both, the instance of <code>Window</code> as well as the instance of <code>TestShader</code> are local variables that will get cleaned up as soon as they go out of scope (end of init) and hence remembering their addresses has no meaning. You will need to create those instances dynamically (<code>new</code>) or set them up within your class definition.</p>\n"}], "owner": {"reputation": 11, "user_id": 4232541, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ugquy.jpg?s=128&g=1", "display_name": "picatrix", "link": "https://stackoverflow.com/users/4232541/picatrix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 747, "favorite_count": 0, "closed_date": 1482955493, "accepted_answer_id": 41365768, "answer_count": 2, "score": -1, "last_activity_date": 1482941698, "creation_date": 1482940285, "last_edit_date": 1482941231, "question_id": 41365440, "link": "https://stackoverflow.com/questions/41365440/c-strange-access-violation-with-opengl", "closed_reason": "Not suitable for this site", "title": "C++ Strange Access Violation with OpenGL", "body": "<p>I'm pretty new to C++ so I hope I can get some help here.\nI try to port my Game Engine to C++ but C++ behaves a litle bit... \"Strange\".\nFollowing Situation:</p>\n\n<p>if I run test1() It all works as it should.</p>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n\n#include \"../headers/base.h\"\n\n#include \"../headers/DemoGame.h\"\n#include \"../headers/TestShader.h\"\n\nusing namespace std;\nusing namespace engine;\n\n\nvoid run(TestShader* t, GLuint VAO, GLFWwindow* w)\n{\n    glfwPollEvents();\n\n\n    glClearColor(0.2f, 0.3f, 0.3f, 1.0f);\n    glClear(GL_COLOR_BUFFER_BIT);\n\n    glUseProgram(t-&gt;progID);\n    glBindVertexArray(VAO);\n    glDrawArrays(GL_TRIANGLES, 0, 3);\n    glBindVertexArray(0);\n\n    glfwSwapBuffers(w);\n}\n\nvoid test1()\n{\n    Window w = Window(800, 600, \"test\");\n    TestShader t = TestShader();\n    GLuint VAO, VBO;\n\n    GLfloat vertices[9] = {\n        -0.5f, -0.5f, 0.0f,\n        0.5f, -0.5f, 0.0f,\n        0.0f,  0.5f, 0.0f\n    };\n\n\n    glGenVertexArrays(1, &amp;VAO);\n    glGenBuffers(1, &amp;VBO);\n\n    glBindVertexArray(VAO);\n\n    glBindBuffer(GL_ARRAY_BUFFER, VBO);\n    glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);\n\n    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 3 * sizeof(GLfloat), (GLvoid*)0);\n    glEnableVertexAttribArray(0);\n\n    glBindBuffer(GL_ARRAY_BUFFER, 0);\n\n    glBindVertexArray(0);\n\n    while (!glfwWindowShouldClose(w.getWindow()))\n    {\n        run(&amp;t, VAO, w.getWindow());\n    }\n\n\n}\n\nvoid test2()\n{\n    DemoGame game = DemoGame();\n    game.start();\n}\n\nint main()\n{\n\n    test1();\n\n    return 0;\n}\n</code></pre>\n\n<p>If i'm running test2() with following involved classes:</p>\n\n<p><strong>Engine.h</strong></p>\n\n<pre><code>#pragma once\n\n#ifndef H_ENGINE\n#define H_ENGINE\n\n#include \"base.h\"\n\nnamespace engine\n{\n    class Engine\n    {\n        private:\n            bool running;\n\n        public:\n            void start()\n            {\n                init();\n                process();\n            }\n\n            void stop()\n            {\n                this-&gt;running = false;\n            }\n\n        private:\n            void process()\n            {\n                update();\n            }\n\n        public:\n            virtual void init() = 0;\n            virtual void update() = 0;\n            virtual void render() = 0;\n            virtual void terminate() = 0;\n    };\n}\n\n#endif\n</code></pre>\n\n<p><strong>DemoGame.h</strong></p>\n\n<pre><code>#pragma once\n\n#ifndef DEMO_DEMO_GAME\n#define DEMO_DEMO_GAME\n\n#include \"base.h\"\n\n#include \"Window.h\"\n#include \"Engine.h\"\n#include \"TestShader.h\"\n\n\nusing namespace engine;\n\nclass DemoGame : public Engine\n{\n\n    public:\n        Window* w;\n        TestShader* t;\n\n        GLuint VBO, VAO;\n\n    public:\n        DemoGame() : Engine() { }\n\n    public:\n        void init();\n\n        void update();\n\n        void render();\n\n        void terminate();\n};\n\n#endif\n</code></pre>\n\n<p><strong>DemoGame.cpp</strong></p>\n\n<pre><code>#include \"../headers/DemoGame.h\"\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nvoid DemoGame::init()\n{\n    cout &lt;&lt; \"ping\" &lt;&lt; endl;\n\n    Window wi = Window(800, 600, \"test\");\n    w = &amp;wi;\n    TestShader te = TestShader();\n    t = &amp;te;\n\n\n\n    GLfloat vertices[9] = {\n        -0.5f, -0.5f, 0.0f,\n        0.5f, -0.5f, 0.0f,\n        0.0f,  0.5f, 0.0f\n    };\n\n\n    glGenVertexArrays(1, &amp;VAO);\n    glGenBuffers(1, &amp;VBO);\n\n    glBindVertexArray(VAO);\n\n    glBindBuffer(GL_ARRAY_BUFFER, VBO);\n    glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);\n\n    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 3 * sizeof(GLfloat), (GLvoid*)0);\n    glEnableVertexAttribArray(0);\n\n    glBindBuffer(GL_ARRAY_BUFFER, 0);\n\n    glBindVertexArray(0);\n\n    while (!glfwWindowShouldClose(w-&gt;getWindow()))\n    {\n        render();\n    }\n}\n\nvoid DemoGame::update()\n{\n\n}\n\nvoid DemoGame::render()\n{\n    glfwPollEvents();\n\n\n    glClearColor(0.2f, 0.3f, 0.3f, 1.0f);\n    glClear(GL_COLOR_BUFFER_BIT);\n\n    glUseProgram(t-&gt;progID);\n    glBindVertexArray(VAO);\n    glDrawArrays(GL_TRIANGLES, 0, 3);\n    glBindVertexArray(0);\n\n    glfwSwapBuffers(w-&gt;getWindow());\n}\n\nvoid DemoGame::terminate()\n{\n\n}\n</code></pre>\n\n<p>It works aswell. But as you may see Engine.h is supposed to control the mainloop. If I change the code a little bit:</p>\n\n<p><strong>Engine.h</strong></p>\n\n<pre><code>#pragma once\n\n#ifndef H_ENGINE\n#define H_ENGINE\n\n#include \"base.h\"\n\nnamespace engine\n{\n    class Engine\n    {\n        private:\n            bool running;\n\n        public:\n            void start()\n            {\n                init();\n\n                running = true;\n\n                while (running)\n                {\n                    process();\n                }\n\n            }\n\n            void stop()\n            {\n                this-&gt;running = false;\n            }\n\n        private:\n            void process()\n            {\n                update();\n            }\n\n        public:\n            virtual void init() = 0;\n            virtual void update() = 0;\n            virtual void render() = 0;\n            virtual void terminate() = 0;\n    };\n}\n\n#endif\n</code></pre>\n\n<p><strong>DemoGame.cpp</strong></p>\n\n<pre><code>#include \"../headers/DemoGame.h\"\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nvoid DemoGame::init()\n{\n    cout &lt;&lt; \"ping\" &lt;&lt; endl;\n\n    Window wi = Window(800, 600, \"test\");\n    w = &amp;wi;\n    TestShader te = TestShader();\n    t = &amp;te;\n\n\n\n    GLfloat vertices[9] = {\n        -0.5f, -0.5f, 0.0f,\n        0.5f, -0.5f, 0.0f,\n        0.0f,  0.5f, 0.0f\n    };\n\n\n    glGenVertexArrays(1, &amp;VAO);\n    glGenBuffers(1, &amp;VBO);\n\n    glBindVertexArray(VAO);\n\n    glBindBuffer(GL_ARRAY_BUFFER, VBO);\n    glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);\n\n    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 3 * sizeof(GLfloat), (GLvoid*)0);\n    glEnableVertexAttribArray(0);\n\n    glBindBuffer(GL_ARRAY_BUFFER, 0);\n\n    glBindVertexArray(0);\n\n}\n\nvoid DemoGame::update()\n{\n    render();\n}\n\nvoid DemoGame::render()\n{\n    glfwPollEvents();\n\n\n    glClearColor(0.2f, 0.3f, 0.3f, 1.0f);\n    glClear(GL_COLOR_BUFFER_BIT);\n\n    glUseProgram(t-&gt;progID);\n    glBindVertexArray(VAO);\n    glDrawArrays(GL_TRIANGLES, 0, 3);\n    glBindVertexArray(0);\n\n    glfwSwapBuffers(w-&gt;getWindow());\n}\n\nvoid DemoGame::terminate()\n{\n\n}\n</code></pre>\n\n<p>Now all of a sudden I get an \"Access Violation\". The question is why?\nThe file \"base.h\" just contains</p>\n\n<pre><code>#define GLEW_STATIC\n#include \"GL/glew.h\"\n#include \"GLFW/glfw3.h\"\n</code></pre>\n\n<p>and the classes Window and TestShader shouldn't matter because they work in the first two examples. As I stated before I'm pretty new to C++ and I just don't understand why that doesn't work. Can you please help me finding out at least why that doesn't work or better help me solving the problem.</p>\n\n<p>This is my second attempt to get a useful answer from StackOverflow by posting a question. Please do me a favour. Please consider read the situation before you mark this question an duplicate. The last time it wasn't an duplicate the problem was by far different.</p>\n\n<p><strong>Edit</strong></p>\n\n<p>As requested the Error message(sry I'm at work so the language is german)</p>\n\n<blockquote>\n  <p>Ausnahme ausgel\u00f6st bei 0x0126489D in GLFWGame.exe: 0xC0000005:\n  Zugriffsverletzung beim Lesen an Position 0xCCCCCEA4.</p>\n  \n  <p>Falls ein Handler f\u00fcr diese Ausnahme vorhanden ist, kann das Programm\n  m\u00f6glicherweise weiterhin sicher ausgef\u00fchrt werden.</p>\n</blockquote>\n\n<p>And I'll try to shorten the code to the most important.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 435647, "user_id": 367273, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f1ed2b0c87f602ef30229f5c4b04eff6?s=128&d=identicon&r=PG", "display_name": "NPE", "link": "https://stackoverflow.com/users/367273/npe"}, "edited": false, "score": 0, "creation_date": 1482939179, "post_id": 41365093, "comment_id": 69931578, "body": "A list of classes or a list of class instances (i.e. objects)?"}, {"owner": {"reputation": 14958, "user_id": 678093, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/667853b27b3d9f422d6d13924ee4994a?s=128&d=identicon&r=PG", "display_name": "m.s.", "link": "https://stackoverflow.com/users/678093/m-s"}, "edited": false, "score": 1, "creation_date": 1482939185, "post_id": 41365093, "comment_id": 69931581, "body": "do you mix up the terms <code>object</code> and <code>class</code>?"}, {"owner": {"reputation": 2935, "user_id": 3398583, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/rzlZK.png?s=128&g=1", "display_name": "muddyfish", "link": "https://stackoverflow.com/users/3398583/muddyfish"}, "reply_to_user": {"reputation": 435647, "user_id": 367273, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f1ed2b0c87f602ef30229f5c4b04eff6?s=128&d=identicon&r=PG", "display_name": "NPE", "link": "https://stackoverflow.com/users/367273/npe"}, "edited": false, "score": 0, "creation_date": 1482939219, "post_id": 41365093, "comment_id": 69931603, "body": "@NPE A list of classes"}, {"owner": {"reputation": 6004, "user_id": 6471538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Robert Columbia", "link": "https://stackoverflow.com/users/6471538/robert-columbia"}, "edited": false, "score": 0, "creation_date": 1482939268, "post_id": 41365093, "comment_id": 69931630, "body": "@muddyfish in what format is this list of classes?"}, {"owner": {"reputation": 2935, "user_id": 3398583, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/rzlZK.png?s=128&g=1", "display_name": "muddyfish", "link": "https://stackoverflow.com/users/3398583/muddyfish"}, "edited": false, "score": 0, "creation_date": 1482939313, "post_id": 41365093, "comment_id": 69931653, "body": "It can be in whatever format, I just want to be able to do a consistant thing with multiple classes without a load of copy and pasting"}, {"owner": {"reputation": 435647, "user_id": 367273, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f1ed2b0c87f602ef30229f5c4b04eff6?s=128&d=identicon&r=PG", "display_name": "NPE", "link": "https://stackoverflow.com/users/367273/npe"}, "edited": false, "score": 1, "creation_date": 1482939513, "post_id": 41365093, "comment_id": 69931745, "body": "@muddyfish: Fair enough (although I can&#39;t shake off the feeling that there&#39;s an <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a> lurking in here)."}, {"owner": {"reputation": 2935, "user_id": 3398583, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/rzlZK.png?s=128&g=1", "display_name": "muddyfish", "link": "https://stackoverflow.com/users/3398583/muddyfish"}, "reply_to_user": {"reputation": 435647, "user_id": 367273, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f1ed2b0c87f602ef30229f5c4b04eff6?s=128&d=identicon&r=PG", "display_name": "NPE", "link": "https://stackoverflow.com/users/367273/npe"}, "edited": false, "score": 0, "creation_date": 1482939542, "post_id": 41365093, "comment_id": 69931762, "body": "@NPE I feel there is as well which is why I said I was open to other approaches"}, {"owner": {"reputation": 435647, "user_id": 367273, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f1ed2b0c87f602ef30229f5c4b04eff6?s=128&d=identicon&r=PG", "display_name": "NPE", "link": "https://stackoverflow.com/users/367273/npe"}, "edited": false, "score": 0, "creation_date": 1482939725, "post_id": 41365093, "comment_id": 69931890, "body": "@muddyfish: But we still don&#39;t know what&#39;s the <i>actual problem</i> you&#39;re trying to solve with the &quot;iterate over classes&quot; approach. There&#39;s any number of ways your code can be rewritten in idiomatic C++; it&#39;s hard to recommend one without knowing the end goal."}], "answers": [{"tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": true, "score": 1, "last_activity_date": 1482939416, "creation_date": 1482939416, "answer_id": 41365189, "question_id": 41365093, "link": "https://stackoverflow.com/questions/41365093/iterating-over-a-list-of-classes/41365189#41365189", "title": "Iterating over a list of classes", "body": "<p>You are looking for a <a href=\"https://en.wikipedia.org/wiki/Factory_method_pattern\" rel=\"nofollow noreferrer\">factory design pattern</a>:</p>\n\n<pre><code>Player *create_by_name(const std::string &amp;what)\n{\n   if (what == \"PlayerTypeOne\")\n         return new PlayerTypeOne;\n   if (what == \"PlayerTypeTwo\")\n         return new PlayerTypeTwo;\n\n   // ...\n}\n</code></pre>\n\n<p>and so on. What you also appear to want to do is to supply parameters to each subclass's constructors.</p>\n\n<p>If all subclasses take the same constructor parameters, this becomes trivial: pass the parameters to the factory, and just have them forwarded to the constructors.</p>\n\n<p>If you need to support different parameters to constructors, this becomes more complicated. I would suggest that you start small, and implement a simple factory for your objects, with no constructor parameters, or with just a couple of them that are the same for all subclasses. Once you have the basic principles working, then you can worry about handling the complicated corner cases.</p>\n\n<p>Then, just have an array of class names, iterate over the array, and call the factory. This should have similar results as your pseudo-Python code.</p>\n"}, {"tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": false, "score": 1, "last_activity_date": 1482940030, "last_edit_date": 1482940030, "creation_date": 1482939622, "answer_id": 41365243, "question_id": 41365093, "link": "https://stackoverflow.com/questions/41365093/iterating-over-a-list-of-classes/41365243#41365243", "title": "Iterating over a list of classes", "body": "<p>C++ provides no built-in introspection, so you can't just obtain objects that represent your classes and create instances with them.</p>\n\n<p>What you can do is use metaprogramming:</p>\n\n<pre><code>// A list of types\ntemplate &lt;class...&gt; struct pack { };\n\n// Calls f with one default-constructed instance of each T\ntemplate &lt;class... Ts, class F&gt;\nvoid construct_each(pack&lt;Ts...&gt;, F &amp;&amp;f) {\n\n    // Classic pre-C++17 expansion trick\n    using ex = int[];\n    (void)ex{(f(Ts{}), void(), 0)..., 0};\n\n    // C++17 version\n    // (void)(f(Ts{}), ...);\n}\n\n// ...\n\nusing Players = pack&lt;PlayerTypeOne, PlayerTypeTwo, PlayerTypeThree&gt;;\n\nvoid foo() {\n    int outcome = 0;\n\n    construct_each(Players{}, [&amp;](auto &amp;&amp;player) {\n        if(doThingWithPlayer(player, some, other, variables))\n            ++outcome;\n    });\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/07050849d7a3aa69\" rel=\"nofollow noreferrer\">See it live on Coliru</a></p>\n"}], "owner": {"reputation": 2935, "user_id": 3398583, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/rzlZK.png?s=128&g=1", "display_name": "muddyfish", "link": "https://stackoverflow.com/users/3398583/muddyfish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 41365189, "answer_count": 2, "score": -2, "last_activity_date": 1482940557, "creation_date": 1482939051, "last_edit_date": 1482940557, "question_id": 41365093, "link": "https://stackoverflow.com/questions/41365093/iterating-over-a-list-of-classes", "title": "Iterating over a list of classes", "body": "<p>I want to be able to iterate over a list of classes that inherit from a common ancestor.</p>\n\n<p>Minified version of what I want (Python-like syntax as that's the language I'm coming from):</p>\n\n<pre><code>const *Player *PLAYERS[3] = { *PlayerTypeOne, *PlayerTypeTwo, *PlayerTypeThree};\n\nint outcome = 0;\n\nfor player in players {\n    if (doThingWithPlayer((&amp;player)(), some, other, variables) == true) {\n        outcome++;\n    }\n}\n</code></pre>\n\n<p>If this is not the preferred way of doing this sort of operation, advice on how I should continue is very welcome.</p>\n\n<p>The sort of code I want to avoid is:</p>\n\n<pre><code>int outcome = 0;\n\nPlayerTypeOne player_one();\nif doThingWithPlayer(player_one, some, other, variables){\n    outcome++;\n}\nPlayerTypeTwo player_two();\nif doThingWithPlayer(player_two, some, other, variables){\n    outcome++;\n}\nPlayerTypeThree player_three();\nif doThingWithPlayer(player_three, some, other, variables){\n    outcome++;\n}\n</code></pre>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1482939353, "post_id": 41365086, "comment_id": 69931678, "body": "This is C++, so why not pleasing code like <code>std::function</code>?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1482939641, "post_id": 41365086, "comment_id": 69931829, "body": "The <code>typedef struct</code> looks very c-ish as well."}], "answers": [{"comments": [{"owner": {"reputation": 4181, "user_id": 3337677, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2a3cb5dc363dbc123686e074c4c3181e?s=128&d=identicon&r=PG&f=1", "display_name": "packetie", "link": "https://stackoverflow.com/users/3337677/packetie"}, "edited": false, "score": 0, "creation_date": 1482939802, "post_id": 41365181, "comment_id": 69931940, "body": "Thanks @lightness-races-in-orbit, I will check it out!"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 2, "last_activity_date": 1482939708, "last_edit_date": 1482939708, "creation_date": 1482939386, "answer_id": 41365181, "question_id": 41365086, "link": "https://stackoverflow.com/questions/41365086/get-error-with-struct-member-field-being-a-function-pointer/41365181#41365181", "title": "Get error with struct member field being a function pointer", "body": "<p>There are several mistakes here.</p>\n\n<ol>\n<li><p><code>typedef void (*pfpv)(void *obj);</code> &hellip; you'd left out the first <code>*</code>, so <code>pfpv</code> was just a function type, not a function <em>pointer</em> type.</p></li>\n<li><p><code>(t.func)();</code> You'd used pointer-to-member-function call syntax, but your <code>t.func</code> is just a normal function pointer, so use <code>.</code> not <code>.*</code>.</p></li>\n<li><p>Furthermore, you're not passing any arguments to a function that expects a <code>void*</code>. We can pass <code>nullptr</code>, for now.</p></li>\n</ol>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/2138464c9858af26\" rel=\"nofollow noreferrer\">Here it is compiling, with those fixes in place</a>.</p>\n\n<p>This whole debacle could have been avoided if you'd used the far simpler <code>std::function</code>:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\n\nstruct strTimer\n{\n    std::function&lt;void(void*)&gt; func;\n    void* obj;\n};\n\nvoid dum(void* p)\n{\n    std::cout &lt;&lt; \"in dum()\\n\";\n}\n\nint main()\n{\n    strTimer t;\n    t.func = &amp;dum;\n    (t.func)(nullptr);\n}\n</code></pre>\n\n<h3><a href=\"http://coliru.stacked-crooked.com/a/b5585ffc49dc694f\" rel=\"nofollow noreferrer\">Live demo</a></h3>\n\n<p>No need for that antiquated C cruft!</p>\n\n<p>Presumably, passing <code>void*</code> as argument is also designed to satisfy some primordial C idiom, perhaps by passing in <code>&amp;t</code> (instead of <code>nullptr</code>) to simulate member functions. You should consider using lambda functions and other modern language features; your program will be much easier to write, maintain and debug.</p>\n"}, {"comments": [{"owner": {"reputation": 10248, "user_id": 268396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4220afde4dd928ef33648797c7415ada?s=128&d=identicon&r=PG", "display_name": "user268396", "link": "https://stackoverflow.com/users/268396/user268396"}, "edited": false, "score": 2, "creation_date": 1482939664, "post_id": 41365194, "comment_id": 69931842, "body": "It&#39;s also worth pointing out that in C++ you should not use raw function pointers, but prefer <code>std::function&lt;&gt;</code> instances instead because the function pointer does not cover all object types that can act as a callable function in C++. (I.e. function pointer can be wrapped in a <code>std::function&lt;&gt;</code> instance but not all things that can act like callable functions can be expressed as function pointers.)"}], "tags": [], "owner": {"reputation": 2020, "user_id": 1433712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2be98543dfefb8fbc4c9560de093c34c?s=128&d=identicon&r=PG", "display_name": "Alden", "link": "https://stackoverflow.com/users/1433712/alden"}, "is_accepted": true, "score": 4, "last_activity_date": 1482939446, "creation_date": 1482939446, "answer_id": 41365194, "question_id": 41365086, "link": "https://stackoverflow.com/questions/41365086/get-error-with-struct-member-field-being-a-function-pointer/41365194#41365194", "title": "Get error with struct member field being a function pointer", "body": "<p>This can be solved by making <code>pfpv</code> a function pointer instead of a function.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\ntypedef void (*pfpv)(void *obj);\n\ntypedef struct {\n    pfpv  func;\n    void *obj;\n} strTimer;\n\nvoid dum(void* p) {\n    printf(\"in dum()\\n\");\n}\n\nint main (int argc, char *argv[]) {\n    strTimer t;\n    t.func = dum;\n    t.func(0);\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 4181, "user_id": 3337677, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2a3cb5dc363dbc123686e074c4c3181e?s=128&d=identicon&r=PG&f=1", "display_name": "packetie", "link": "https://stackoverflow.com/users/3337677/packetie"}, "edited": false, "score": 0, "creation_date": 1482939889, "post_id": 41365225, "comment_id": 69931987, "body": "@packetie I know, because I tested it :-)"}, {"owner": {"reputation": 4181, "user_id": 3337677, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2a3cb5dc363dbc123686e074c4c3181e?s=128&d=identicon&r=PG&f=1", "display_name": "packetie", "link": "https://stackoverflow.com/users/3337677/packetie"}, "edited": false, "score": 0, "creation_date": 1482947174, "post_id": 41365225, "comment_id": 69935685, "body": "Thanks again \u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6!"}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 1, "last_activity_date": 1482939579, "creation_date": 1482939579, "answer_id": 41365225, "question_id": 41365086, "link": "https://stackoverflow.com/questions/41365086/get-error-with-struct-member-field-being-a-function-pointer/41365225#41365225", "title": "Get error with struct member field being a function pointer", "body": "<p>The problem is your function pointer typedef (it doesn't specify a function pointer). Change it like so:</p>\n\n<pre><code>typedef void (*pfpv)(void *obj);\n</code></pre>\n\n<p>Also the call of the function pointer is wrong:</p>\n\n<pre><code>(t.func)(&amp;t);\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/2d0c0a61585ba509\" rel=\"nofollow noreferrer\">Live Demo</a></p>\n"}], "owner": {"reputation": 4181, "user_id": 3337677, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2a3cb5dc363dbc123686e074c4c3181e?s=128&d=identicon&r=PG&f=1", "display_name": "packetie", "link": "https://stackoverflow.com/users/3337677/packetie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 41365194, "answer_count": 3, "score": 1, "last_activity_date": 1482939708, "creation_date": 1482939014, "question_id": 41365086, "link": "https://stackoverflow.com/questions/41365086/get-error-with-struct-member-field-being-a-function-pointer", "title": "Get error with struct member field being a function pointer", "body": "<p>I need to have struct member being a regular function pointer (not a class member function pointer).  Not sure why the compile error.  I am running g++ 4.8.4 on Ubuntu 14.04.  Thanks.</p>\n\n<pre><code>$ g++ te5.cc\nte5.cc: In function \u2018int main(int, char**)\u2019:\nte5.cc:18:9: error: invalid use of member function (did you forget the \u2018()\u2019 ?)\n  t.func = dum;\n         ^\nte5.cc:19:6: error: \u2018func\u2019 was not declared in this scope\n  (t.*func)();\n</code></pre>\n\n<p>Code snippet</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\ntypedef void pfpv(void *obj);\ntypedef struct {\n    pfpv  func;\n    void *obj;\n} strTimer;\n\nvoid dum(void* p) {\n    printf(\"in dum()\\n\");\n}\n\nint main (int argc, char *argv[]) {\n    strTimer t;\n    t.func = dum;\n    (t.*func)();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "boost"], "answers": [{"comments": [{"owner": {"reputation": 727, "user_id": 2369067, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/98ada3ce70e29d3ab0f744d684ae126d?s=128&d=identicon&r=PG", "display_name": "Arpit", "link": "https://stackoverflow.com/users/2369067/arpit"}, "edited": false, "score": 0, "creation_date": 1482943529, "post_id": 41365757, "comment_id": 69933958, "body": "In Self-contained example, you want the small running code? I will try to trim my code. I have also tried using <code>async_read_some</code>. With that also I am getting <code>EOF</code>. Not sure if the above situation &quot;Why EOF is an Error&quot; applies to that or not!"}, {"owner": {"reputation": 4578, "user_id": 6626554, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Cn7Ya.png?s=128&g=1", "display_name": "TheWaterProgrammer", "link": "https://stackoverflow.com/users/6626554/thewaterprogrammer"}, "edited": false, "score": 0, "creation_date": 1557391137, "post_id": 41365757, "comment_id": 98751527, "body": "Is it normal to get an EOF error one in a million reads? It happens with my application after a 8-10 hours of run reading and writing like 6-7 packets per second. But then I am nor sure how to deal with. Sounds I should try to reconnect if I am the client? Looking at the official doc on the link you provided, it does not sound like I can ignore and continue to the next read?"}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 1, "last_activity_date": 1482941411, "creation_date": 1482941411, "answer_id": 41365757, "question_id": 41365033, "link": "https://stackoverflow.com/questions/41365033/random-eof-in-boost-asio-async-read/41365757#41365757", "title": "Random EOF in boost asio async_read", "body": "<p>Can you show us a self contained example? </p>\n\n<p>I think you're basically running into short reads, which are <a href=\"http://www.boost.org/doc/libs/1_63_0/doc/html/boost_asio.html#boost_asio.overview.core.streams\" rel=\"nofollow noreferrer\">perfectly normal</a> for non-framed protocols. It even explains why EOF is an \"error\":</p>\n\n<blockquote>\n  <h3><a href=\"http://www.boost.org/doc/libs/1_63_0/doc/html/boost_asio.html#boost_asio.overview.core.streams.why_eof_is_an_error\" rel=\"nofollow noreferrer\">Why EOF is an Error</a></h3>\n  \n  <p>The end of a stream can cause <code>read</code>, <code>async_read</code>, <code>read_until</code> or <code>async_read_until</code> functions to violate their contract. E.g. a read of N bytes may finish early due to <code>EOF</code>.\n  An <code>EOF</code> error may be used to distinguish the end of a stream from a successful read of size 0.</p>\n</blockquote>\n"}], "owner": {"reputation": 727, "user_id": 2369067, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/98ada3ce70e29d3ab0f744d684ae126d?s=128&d=identicon&r=PG", "display_name": "Arpit", "link": "https://stackoverflow.com/users/2369067/arpit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 546, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1482941411, "creation_date": 1482938851, "last_edit_date": 1495540423, "question_id": 41365033, "link": "https://stackoverflow.com/questions/41365033/random-eof-in-boost-asio-async-read", "title": "Random EOF in boost asio async_read", "body": "<p>I am getting <code>EOF</code> error from <code>boost::asio::async_read</code>. I have already went through the following posts (and some other similar posts) and nothing helped me. </p>\n\n<ol>\n<li><a href=\"https://stackoverflow.com/questions/15297001/eof-in-async-read-in-boostasio\">EOF in async_read() in boost::asio</a></li>\n<li><a href=\"https://stackoverflow.com/questions/18654798/random-eof-in-boost-asio-in-multi-thread\">Random EOF in boost asio in multi thread</a></li>\n<li><a href=\"https://stackoverflow.com/questions/17653366/eof-in-boostasync-read-with-thread-pull-and-boost-1-54\">EOF in boost::async_read with thread_pull and boost 1.54</a></li>\n</ol>\n\n<p><strong>About my application:</strong> I have developed a WebBrowser (using IE WebBrowser control) and proxy server with which browser communicates. Nothing could be check in the browser as everything happens internally in IE engine. And in the proxy server I am randomly getting <code>EOF</code> error with <code>async_read</code> and also with any other read version (<code>async_read_some()</code>, <code>read()</code>). And this problem I am only facing in release build and not in debug build (atleast not yet). In the debug build everything works fine.</p>\n\n<p>The following is my read function. I don't know if there is any race condition or anything I am missing.</p>\n\n<pre><code>void SocksProxyConnection::HandleRead(const boost::system::error_code&amp; errorCode, std::size_t bytesTransferred)\n{\n    //Check for the errors\n    if (errorCode)\n    {\n        std::string connectionID = boost::lexical_cast&lt;std::string&gt;(m_connectionID);\n        UNUSED(connectionID);\n\n        if ((errorCode.value() == boost::asio::error::connection_reset))\n        {\n            TVLOG_INFO(LOG(\"SocksProxyConnection: Connection Reset ConnectionID: %1%\") % (boost::lexical_cast&lt;std::string&gt;(m_connectionID)).c_str());\n            m_removeConnectionFromMapFunction(m_connectionID);\n            SendConnectionCloseCommand();\n        } \n        else if (errorCode.value() == boost::asio::error::eof)\n        {\n            LOG_ERRORCODE(L\"SocksProxyConnection: End Of File error\", errorCode);\n        }\n        else if (errorCode.value() != boost::asio::error::operation_aborted)\n        {\n            //Case: Error occurred while reading\n            LOG_ERRORCODE(L\"SocksProxyConnection: Error in reading the data from the webBrowser\", errorCode);\n        }\n\n        return;\n    }\n\n    //No errors\n\n    //Send the data to the remote server\n    ForwardBuffer(bytesTransferred);\n\n    //Perform the async read operation.\n    boost::asio::async_read(m_socket, boost::asio::buffer(m_readDataBuffer.get(), DataBufferSize), boost::asio::transfer_at_least(1),\n                            m_Strand.wrap(boost::bind(&amp;SocksProxyConnection::HandleRead,\n                                        shared_from_this(),\n                                        boost::asio::placeholders::error,\n                                        boost::asio::placeholders::bytes_transferred)));\n\n}\n</code></pre>\n\n<p>There is a dedicated <code>io_service</code> for this proxy server which includes two asynchronous calls <code>async_accept()</code> and <code>async_read()</code>. Sending data to the browser is not async. I am using blocking <code>write()</code> function. I don't know if that makes any difference.</p>\n\n<p>There was also this <a href=\"https://svn.boost.org/trac/boost/ticket/8967\" rel=\"nofollow noreferrer\">bug</a> in boost 1.54 which was causing the similar problem. But that was 3 years ago and has been fixed. Currently, I am using Booset 1.62. I haven't found any similar bug report for this version.</p>\n\n<p>I have been trying to solve this problem for over a week. Would appreciate if anyone could help me out now.</p>\n"}, {"tags": ["c++", "class", "global"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482938929, "post_id": 41365003, "comment_id": 69931452, "body": "The right tool to solve such problems is your debugger. You should step through your code line-by-line <i>before</i> asking on Stack Overflow. For more help, please read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs (by Eric Lippert)</a>. At a minimum, you should &#91;edit] your question to include a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable</a> example that reproduces your problem, along with the observations you made in the debugger."}, {"owner": {"reputation": 35, "user_id": 4011605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff8c759c1e8f4b4d5ef1e38ce5a7123?s=128&d=identicon&r=PG&f=1", "display_name": "Teku", "link": "https://stackoverflow.com/users/4011605/teku"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482939371, "post_id": 41365003, "comment_id": 69931691, "body": "It is not true. I debug my program and i discover the problem with the no reference access. See the answer to see my problem. :)"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482939687, "post_id": 41365003, "comment_id": 69931857, "body": "Go for the <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> then."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "edited": false, "score": 0, "creation_date": 1482956699, "post_id": 41365003, "comment_id": 69939968, "body": "Please investigate <i>all</i> uses of <code>auto</code>. As it stands, <code>ei</code> is a <i>copy</i> of your vector&#39;s element, so when you change it, nothing changes in the vector."}], "answers": [{"comments": [{"owner": {"reputation": 1096, "user_id": 4477125, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/JYZmH.jpg?s=128&g=1", "display_name": "Lorence Hernandez", "link": "https://stackoverflow.com/users/4477125/lorence-hernandez"}, "edited": false, "score": 0, "creation_date": 1482939032, "post_id": 41365087, "comment_id": 69931492, "body": "was about to answer lol"}, {"owner": {"reputation": 35, "user_id": 4011605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff8c759c1e8f4b4d5ef1e38ce5a7123?s=128&d=identicon&r=PG&f=1", "display_name": "Teku", "link": "https://stackoverflow.com/users/4011605/teku"}, "edited": false, "score": 0, "creation_date": 1482939294, "post_id": 41365087, "comment_id": 69931643, "body": "Yes! That works. Thank you so much :)"}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 1, "last_activity_date": 1482939038, "last_edit_date": 1482939038, "creation_date": 1482939015, "answer_id": 41365087, "question_id": 41365003, "link": "https://stackoverflow.com/questions/41365003/modify-the-value-of-global-class-instance/41365087#41365087", "title": "Modify the value of global class instance", "body": "<p>The problem is that <code>ei</code> in your <a href=\"http://en.cppreference.com/w/cpp/language/range-for\" rel=\"nofollow noreferrer\">range-for loop</a> is a <em>value</em> and not a reference. That means it is a copy of the element in the container, and modifying a copy of course does not modify the original.</p>\n\n<p>To use references you need to specify it:</p>\n\n<pre><code>for(auto&amp; ei : events) { ... }\n//      ^\n// Note ampersand here\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 4011605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff8c759c1e8f4b4d5ef1e38ce5a7123?s=128&d=identicon&r=PG&f=1", "display_name": "Teku", "link": "https://stackoverflow.com/users/4011605/teku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 1, "closed_date": 1482957363, "accepted_answer_id": 41365087, "answer_count": 1, "score": -2, "last_activity_date": 1594061581, "creation_date": 1482938727, "last_edit_date": 1594061581, "question_id": 41365003, "link": "https://stackoverflow.com/questions/41365003/modify-the-value-of-global-class-instance", "closed_reason": "Not suitable for this site", "title": "Modify the value of global class instance", "body": "<p>I have this class definition:</p>\n\n<pre><code>class event {\n public:\n wstring type;\n int pos;\n int sen;\n\n event(const string &amp;t) : type(util::string2wstring(t)) {}\n ~event() {};\n</code></pre>\n\n<p>};</p>\n\n<p>and the global variable:</p>\n\n<pre><code>list&lt;event&gt; events;\n</code></pre>\n\n<p>This variable was initialize in one function and after that I want to modify differents values of this events like:</p>\n\n<pre><code>for(auto ei : events) {\n    ei.pos = (*w).get_position();\n    ei.sen = sen;\n    cout &lt;&lt; \"pos: \" &lt;&lt; ei.pos &lt;&lt; \" in sentence \" &lt;&lt; ei.sen &lt;&lt; endl;\n    ++w;\n    ++sen;\n}\nevent ei = events.front();\ncout &lt;&lt; \"pos2: \" &lt;&lt; ei.pos &lt;&lt; \" in sentence2 \" &lt;&lt; ei.sen &lt;&lt; endl;\n</code></pre>\n\n<p>Then the first cout print the correct values of the new pos and sen but the second (outside the for scope) print the oldest values.</p>\n\n<p>If I print the values in other function the oldest values are printed.</p>\n\n<p>I think that the problem is no reference access to the global variable but is it true?</p>\n\n<p>And the most important, how can I fix it?</p>\n\n<p>Thanks for your time,</p>\n\n<p>Regards.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482938291, "post_id": 41364856, "comment_id": 69931095, "body": "Welcome to Stack Overflow. Please take the time to read <a href=\"http://stackoverflow.com/tour\">The Tour</a> and refer to the material from the <a href=\"http://stackoverflow.com/help/asking\">Help Center</a> what and how you can ask here."}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 1, "creation_date": 1482938302, "post_id": 41364856, "comment_id": 69931102, "body": "<code>v</code> is causing a divide by zero. That is why you should declare and initialize <i>one variable per line</i>, besides the fact that your code is very difficult to read as written due to the formatting and poor style."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 5, "creation_date": 1482938304, "post_id": 41364856, "comment_id": 69931104, "body": "The right tool to solve such problems is your debugger. You should step through your code line-by-line <i>before</i> asking on Stack Overflow. For more help, please read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs (by Eric Lippert)</a>. At a minimum, you should &#91;edit] your question to include a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable</a> example that reproduces your problem, along with the observations you made in the debugger."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 1, "creation_date": 1482938747, "post_id": 41364856, "comment_id": 69931362, "body": "It&#39;s not your problem, but <code>vidmerginu = ms &#47; m;</code> will do an integer division, and then convert the result to double.  You need something like <code>vidmerginu = double(ms) &#47; m;</code>.  Same problem with vs/v"}], "answers": [{"tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": true, "score": 1, "last_activity_date": 1482938345, "creation_date": 1482938345, "answer_id": 41364898, "question_id": 41364856, "link": "https://stackoverflow.com/questions/41364856/c-program-exe-has-stopped-working/41364898#41364898", "title": "C++ &quot;Program.exe has stopped working&quot;", "body": "<p>You'll get a divide by zero error if <code>u &lt;= 0</code> in:</p>\n\n<pre><code>vidmerginu = ms / m;\n</code></pre>\n\n<p>because <code>m</code> is set to <code>0</code> and not incremented.</p>\n\n<p>And a divide by zero error if <code>u &gt;= 0</code> in:</p>\n\n<pre><code>vidvaikinu = fabs(vs / v);\n</code></pre>\n\n<p>because <code>v</code> is set to <code>0</code> and not incremented.</p>\n"}], "owner": {"reputation": 3, "user_id": 7350331, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HNXQAg4xyOE/AAAAAAAAAAI/AAAAAAAAABY/YAZVezffoHE/photo.jpg?sz=128", "display_name": "Justas", "link": "https://stackoverflow.com/users/7350331/justas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 266, "favorite_count": 0, "closed_date": 1482940291, "accepted_answer_id": 41364898, "answer_count": 1, "score": -5, "last_activity_date": 1482938810, "creation_date": 1482938191, "last_edit_date": 1482938810, "question_id": 41364856, "link": "https://stackoverflow.com/questions/41364856/c-program-exe-has-stopped-working", "closed_reason": "Not suitable for this site", "title": "C++ &quot;Program.exe has stopped working&quot;", "body": "<p>In no way I can solve why I'm getting the error in the screenshot when entering the first value and trying to proceed.</p>\n\n<p>The error happens only with code below.</p>\n\n<p>Any help would be appreciated!</p>\n\n<p><a href=\"https://i.stack.imgur.com/x08mS.png\" rel=\"nofollow noreferrer\">Error screenshot</a></p>\n\n<pre><code>//Darbas40\n#include &lt;io.h&gt;\n#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;cmath&gt;\n\nusing namespace std;\n\nint main()\n\n{\n\nint n,\n    u,\n    m,\n    ms,\n    v,\n    vs,\n    i;\ndouble vidvaikinu,\n       vidmerginu;\n\nn = 7; m = 0; v = 0; ms = 0; vs = 0;\n\nfor (i = 1; i &lt;= n; i++)\n{\n    wcout &lt;&lt; \"Iveskite mokiniu ugius: \"; cin &gt;&gt; u;\n    if (u &gt; 0)\n    {\n        m++;\n        ms = ms + u;\n    }\n    else if (u &lt; 0)\n    {\n        v++;\n        vs = vs + u;\n    }\n    vidmerginu = ms / m;\n    vidvaikinu = fabs(vs / v);\n    }\n\n   wcout &lt;&lt; \" \" &lt;&lt; endl;\n   wcout &lt;&lt; \"vidvaikinu = \" &lt;&lt; vidvaikinu &lt;&lt; \", vidmerginu = \" &lt;&lt; vidmerginu &lt;&lt; \".\" &lt;&lt; endl;\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++14"], "comments": [{"owner": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "edited": false, "score": 0, "creation_date": 1482938548, "post_id": 41364846, "comment_id": 69931261, "body": "<i>Why</i> is <code>error_code</code> passed by non-const reference? If it&#39;s purely an input parameter, pass it by const-ref just as you would with any other parameter..."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1482938904, "post_id": 41364846, "comment_id": 69931435, "body": "C++14 is a standard. When describing your compiler please use its name, version number and platform."}, {"owner": {"reputation": 4578, "user_id": 6626554, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Cn7Ya.png?s=128&g=1", "display_name": "TheWaterProgrammer", "link": "https://stackoverflow.com/users/6626554/thewaterprogrammer"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1482939712, "post_id": 41364846, "comment_id": 69931878, "body": "@LightnessRacesinOrbit Sorry about that. My code is compiled on clang, gcc &amp; microsoft windows. all 3."}, {"owner": {"reputation": 4578, "user_id": 6626554, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Cn7Ya.png?s=128&g=1", "display_name": "TheWaterProgrammer", "link": "https://stackoverflow.com/users/6626554/thewaterprogrammer"}, "reply_to_user": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "edited": false, "score": 0, "creation_date": 1482939776, "post_id": 41364846, "comment_id": 69931921, "body": "@ildjarn it passed as a reference because is an out param. it is supposed to be populated &amp; its value changed my <code>MyFunction</code> when error occurs"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1482939798, "post_id": 41364846, "comment_id": 69931936, "body": "@SegmentationFault: You ignored the request for version numbers. In the future please put all these details into the question."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1482939823, "post_id": 41364846, "comment_id": 69931957, "body": "@SegmentationFault: But the variable in the calling scope isn&#39;t an <code>optional</code>. So how is the <code>optional</code> out param supposed to be accessed in the calling scope?"}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1482939053, "post_id": 41365026, "comment_id": 69931502, "body": "Almost, but not quite."}], "tags": [], "owner": {"reputation": 907, "user_id": 5344725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afe3363c7df76a6ddf2114b5b8793554?s=128&d=identicon&r=PG&f=1", "display_name": "Altainia", "link": "https://stackoverflow.com/users/5344725/altainia"}, "is_accepted": false, "score": 1, "last_activity_date": 1482938836, "creation_date": 1482938836, "answer_id": 41365026, "question_id": 41364846, "link": "https://stackoverflow.com/questions/41364846/using-stdexperimentaloptional-as-a-parameter-by-reference/41365026#41365026", "title": "Using std::experimental::optional as a parameter by reference", "body": "<p>You're not giving your function an optional <code>MyCustomErrorClass</code>, you're giving it a non-optional <code>MyCustomErrorClass</code>. And you're giving it by reference, which means you can try to mutate it and it'll try to mutate the object passed in. But you can't perform mutable <code>optional&lt;T&gt;</code> operations on something that actually isn't <code>optional&lt;T&gt;</code> (well, I suppose you could if you really, really wanted to... but bad things happen to people who do that sort of thing).</p>\n"}, {"comments": [{"owner": {"reputation": 4578, "user_id": 6626554, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Cn7Ya.png?s=128&g=1", "display_name": "TheWaterProgrammer", "link": "https://stackoverflow.com/users/6626554/thewaterprogrammer"}, "edited": false, "score": 0, "creation_date": 1482939949, "post_id": 41365089, "comment_id": 69932023, "body": "but with making the param optional, I am able to compile the code exactly as it. just removing the optional from param &amp; instead passing a normal <code>MyCustomErrorClass</code> object"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 4578, "user_id": 6626554, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Cn7Ya.png?s=128&g=1", "display_name": "TheWaterProgrammer", "link": "https://stackoverflow.com/users/6626554/thewaterprogrammer"}, "edited": false, "score": 0, "creation_date": 1482940657, "post_id": 41365089, "comment_id": 69932411, "body": "@SegmentationFault: Yes, of course. If the types match in the first place, then no implicit conversion is needed so you pass a reference to the actual object, not some temporary. Just like if I made <code>f</code> above take <code>int&amp;</code> instead of <code>long&amp;</code>. You encounter difficulties when the types are not the same."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 2, "last_activity_date": 1482939040, "last_edit_date": 1495542830, "creation_date": 1482939040, "answer_id": 41365089, "question_id": 41364846, "link": "https://stackoverflow.com/questions/41364846/using-stdexperimentaloptional-as-a-parameter-by-reference/41365089#41365089", "title": "Using std::experimental::optional as a parameter by reference", "body": "<p>This is not about <code>std::experimental::optional</code>; it is about attempting to bind a temporary to an lvalue reference, which is not possible.</p>\n\n<p>That temporary is the result of the implicit conversion from <code>MyCustomErrorClass</code> to <code>optional&lt;MyCustomErrorClass&gt;</code>.</p>\n\n<p>A proper <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> for your problem follows:</p>\n\n<pre><code>void f(long&amp;);\n\nint main()\n{\n   int x = 42;\n   f(x);\n}\n\n// error: invalid initialization of non-const reference of type 'long int&amp;' from an\n//          rvalue of type 'long int'\n</code></pre>\n\n<p>Implicit conversion between <code>int</code> and <code>long</code> is possible, but the resulting temporary cannot bind to an lvalue reference.</p>\n\n<p><strong>Instead, pre-construct the <code>optional</code> object and pass it in by name.</strong></p>\n\n<pre><code>optional&lt;MyCustomErrorClass&gt; opt_error_code_object = MyCustomErrorClass{};\nMyFunction(some_param, opt_error_code_object);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 2, "last_activity_date": 1482947705, "creation_date": 1482947705, "answer_id": 41367272, "question_id": 41364846, "link": "https://stackoverflow.com/questions/41364846/using-stdexperimentaloptional-as-a-parameter-by-reference/41367272#41367272", "title": "Using std::experimental::optional as a parameter by reference", "body": "<p>You do not want to take an optional by reference here.</p>\n\n<p>A reference to an optional is a very different beast that an optional reference; the second was not voted into C++17 because it has confusing semantics, but it would be closer to what you want.</p>\n\n<p>An optional <em>stores</em> a <em>copy</em> of its data within itself.  A reference to an optional is thus a reference to a container containing a <em>copy</em> of the object.</p>\n\n<p>When you pass your error object to the function expecting a reference to an optional of your error type, it first copies the error object into a temporary optional.  Then it tries to bind that temporary to a (lvalue) reference; which is illegal.  So your code fails to compile.</p>\n\n<p>If you \"fix\" it by creating a non-temporary optional, or casting the temporary to an lvalue, you probably still do not get what you want, because the function now interacts with the copy inside the optional, not the original error object.</p>\n\n<p>Typically when you pass an object by reference, you want changes to propogate out.  But they won't propogate beyond the copy inside the optional.</p>\n\n<p>A solution is to take a <code>MyCustomErrorClass*</code> -- a pointer.  This is nullable (like an optional), and does not store a copy.  Simply add a <code>&amp;</code> at the calling site, and use <code>nullptr</code> when you do not want to pass it.</p>\n"}], "owner": {"reputation": 4578, "user_id": 6626554, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Cn7Ya.png?s=128&g=1", "display_name": "TheWaterProgrammer", "link": "https://stackoverflow.com/users/6626554/thewaterprogrammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 749, "favorite_count": 0, "accepted_answer_id": 41365089, "answer_count": 3, "score": 0, "last_activity_date": 1482947705, "creation_date": 1482938175, "question_id": 41364846, "link": "https://stackoverflow.com/questions/41364846/using-stdexperimentaloptional-as-a-parameter-by-reference", "title": "Using std::experimental::optional as a parameter by reference", "body": "<p>My C++ compiler is <code>C++ 14</code>. I have a function which intakes an object of a custom class which encapsulates all kinds of error codes. This parameter is passed by reference. The custom class object sometimes is populated with a valid error value &amp; at times it can be empty. I found a nice looking new thing in C++14 that is <a href=\"http://en.cppreference.com/w/cpp/experimental/optional\" rel=\"nofollow noreferrer\">std::experimental::optional</a>. Now I am trying to use this for my parameter as it is really an <code>optional</code> parameter.</p>\n\n<p><em>Following is my function's signature with std::experimental::optional that I am trying to use:</em></p>\n\n<pre><code>MyFunction(some param, std::experimental::optional&lt;MyCustomErrorClass&gt; &amp; error_code) {\n\n    //some logic\n    //sometimes error_code is populated &amp; sometimes not populated\n}\n</code></pre>\n\n<p><em>Following is how I am calling <code>MyFunction</code>:</em></p>\n\n<pre><code>MyCustomErrorClass error_code_object;\nMyFunction(some_param, error_code_object);\n</code></pre>\n\n<p><em>But I receive the following compiler error:</em></p>\n\n<pre><code>error: non-const lvalue reference to type 'std::experimental::optional&lt; MyCustomErrorClass&gt;' cannot bind to a value of unrelated type 'MyCustomErrorClass' MyFunction(some_param, error_code_object);\n</code></pre>\n\n<p>I tried searching this a lot. Most of the <code>std::experimental::optional</code> or <code>std::optional</code> usage examples demonstrate it as a return value of functions.</p>\n\n<p>What is wrong with my usage of std::experimental::optional ?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1482938046, "post_id": 41364767, "comment_id": 69930964, "body": "Welcome to Stack Overflow. Please take the time to read <a href=\"http://stackoverflow.com/tour\">The Tour</a> and refer to the material from the <a href=\"http://stackoverflow.com/help/asking\">Help Center</a> what and how you can ask here."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482938065, "post_id": 41364767, "comment_id": 69930976, "body": "Well, before you can expect your program to print anything you have to fix the compiler errors: <a href=\"http://coliru.stacked-crooked.com/a/58430aaa96f7f629\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/58430aaa96f7f629</a> How to fix it is pretty clearly told there IMO."}, {"owner": {"reputation": 9, "user_id": 7350349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e949f2e6302a94f08cd7e383ecbfe59?s=128&d=identicon&r=PG&f=1", "display_name": "gpp", "link": "https://stackoverflow.com/users/7350349/gpp"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482938168, "post_id": 41364767, "comment_id": 69931028, "body": "There are no errors. and thanks for welcoming me :-)"}, {"owner": {"reputation": 9, "user_id": 7350349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e949f2e6302a94f08cd7e383ecbfe59?s=128&d=identicon&r=PG&f=1", "display_name": "gpp", "link": "https://stackoverflow.com/users/7350349/gpp"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482938311, "post_id": 41364767, "comment_id": 69931108, "body": "Ok, foud them on the website. my programm doesnt show them. (code::blocks)"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1482938412, "post_id": 41364767, "comment_id": 69931165, "body": "@coderredoc is correct you are missing {} in your switch"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1482938513, "post_id": 41364767, "comment_id": 69931242, "body": "Your compiler should have issued an error about that."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1482938841, "post_id": 41364767, "comment_id": 69931409, "body": "Please fix your title. It should describe the question. Remember that every post here should be able to help others in the future."}], "answers": [{"comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1482938375, "post_id": 41364893, "comment_id": 69931139, "body": "This explains why the formatting fix did not work.."}], "tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": true, "score": 1, "last_activity_date": 1482938421, "last_edit_date": 1482938421, "creation_date": 1482938323, "answer_id": 41364893, "question_id": 41364767, "link": "https://stackoverflow.com/questions/41364767/i-cant-find-the-solution/41364893#41364893", "title": "I cant find the solution :-\\", "body": "<p><code>switch(){..}</code>..correct syntax please.</p>\n\n<p>Hope you have good lunch but before that try to check the syntax of <code>switch</code></p>\n"}], "owner": {"reputation": 9, "user_id": 7350349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e949f2e6302a94f08cd7e383ecbfe59?s=128&d=identicon&r=PG&f=1", "display_name": "gpp", "link": "https://stackoverflow.com/users/7350349/gpp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "closed_date": 1482947689, "accepted_answer_id": 41364893, "answer_count": 1, "score": -4, "last_activity_date": 1482938512, "creation_date": 1482937881, "last_edit_date": 1482938202, "question_id": 41364767, "link": "https://stackoverflow.com/questions/41364767/i-cant-find-the-solution", "closed_reason": "Not suitable for this site", "title": "I cant find the solution :-\\", "body": "<p>I have tried to write a short program that tells me where i should go for lunch. First in creates a \"random\" number based on the uptime of the pc and then takes the random number into to a switch function.</p>\n\n<p>This what i have tried so far:</p>\n\n<pre><code>#include &lt;cstdlib&gt;\n#include &lt;iostream&gt;\n#include &lt;ctime&gt;\n\nusing namespace std;\n\nlong int x;\n\nint main()\n{\n    srand(time(0));\n    long int x = 1 + (rand() % 10);\n\n    switch (x)\n    case 1:\n    cout &lt;&lt; \"McDonalds\" &lt;&lt; endl;\n    break;\ncase 2:\n    cout &lt;&lt; \"Burger King\" &lt;&lt; endl;\n    break;\ncase 3:\n    cout &lt;&lt; \"Globus\" &lt;&lt; endl;\n    break;\ncase 4:\n    cout &lt;&lt; \"Plan B Burger\" &lt;&lt; endl;\n    break;\ncase 5:\n    cout &lt;&lt; \"Subway\" &lt;&lt; endl;\n    break;\ncase 6:\n    cout &lt;&lt; \"Chinese\" &lt;&lt; endl;\n    break;\ncase 7:\n    cout &lt;&lt; \"D\u00f6ner\" &lt;&lt; endl;\n    break;\ncase 8:\n    cout &lt;&lt; \"Pizzeria\" &lt;&lt; endl;\n    break;\ncase 9:\n    cout &lt;&lt; \"Zenger\" &lt;&lt; endl;\n    break;\n}\n</code></pre>\n\n<p>But it doesn't print anything on the console.</p>\n"}, {"tags": ["c++", "shared-ptr", "smart-pointers", "enable-shared-from-this"], "comments": [{"owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "edited": false, "score": 0, "creation_date": 1482938050, "post_id": 41364700, "comment_id": 69930968, "body": "<code>void f(Good&amp; g); &#47;* ... *&#47; f(*gp1); &#47;* ... *&#47; void f(Good&amp; g) { &#47;* now what? *&#47; }</code>"}, {"owner": {"reputation": 8220, "user_id": 3305546, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/G2mbe.png?s=128&g=1", "display_name": "Yves", "link": "https://stackoverflow.com/users/3305546/yves"}, "reply_to_user": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "edited": false, "score": 0, "creation_date": 1482938151, "post_id": 41364700, "comment_id": 69931018, "body": "@milleniumbug  sorry I don&#39;t understand what you are trying to say."}, {"owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "edited": false, "score": 1, "creation_date": 1482938503, "post_id": 41364700, "comment_id": 69931233, "body": "The <code>f</code> doesn&#39;t have the access to the <code>shared_ptr</code>, as it takes a reference, not a shared pointer. Sometimes you could change so it takes a reference instead, but not for member functions - <code>this</code> is always a raw pointer."}, {"owner": {"reputation": 8220, "user_id": 3305546, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/G2mbe.png?s=128&g=1", "display_name": "Yves", "link": "https://stackoverflow.com/users/3305546/yves"}, "reply_to_user": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "edited": false, "score": 0, "creation_date": 1482939874, "post_id": 41364700, "comment_id": 69931979, "body": "@milleniumbug  I think you misunderstand my question. My question is: using <code>std::enable_shared_from_this</code> doesn&#39;t save us from the risk of double delete. If so, <code>std::enable_shared_from_this</code> is useless. See the example: <a href=\"https://ideone.com/FlvIWw\" rel=\"nofollow noreferrer\">ideone.com/FlvIWw</a>"}, {"owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "edited": false, "score": 1, "creation_date": 1482940491, "post_id": 41364700, "comment_id": 69932319, "body": "Well you&#39;re wrong. <code>std::enable_shared_from_this</code> isn&#39;t supposed to be a protection from misusing the <code>shared_ptr</code>&#39;s interface. For a use case of it, see my answer."}], "answers": [{"comments": [{"owner": {"reputation": 135, "user_id": 1376315, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WVIjl.png?s=128&g=1", "display_name": "Gavin", "link": "https://stackoverflow.com/users/1376315/gavin"}, "edited": false, "score": 0, "creation_date": 1507771910, "post_id": 41365430, "comment_id": 80347318, "body": "i am kind of confused, why should i use sharea_ptr for a in f_cpp? if f_cpp required that, it should accept a shared_ptr instead of raw pointef A*."}], "tags": [], "owner": {"reputation": 5455, "user_id": 4115625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2688a9684db617a20f9da3959e5890d7?s=128&d=identicon&r=PG&f=1", "display_name": "Danh", "link": "https://stackoverflow.com/users/4115625/danh"}, "is_accepted": false, "score": 3, "last_activity_date": 1482940250, "creation_date": 1482940250, "answer_id": 41365430, "question_id": 41364700, "link": "https://stackoverflow.com/questions/41364700/when-should-we-use-stdenable-shared-from-this/41365430#41365430", "title": "When should we use std::enable_shared_from_this", "body": "<p>There're some use case which you can't use the template <code>std::shared_ptr&lt;T&gt;</code> like opaque pointer.</p>\n\n<p>In that case, it's useful to have this:</p>\n\n<p>In some_file.cpp</p>\n\n<pre><code>struct A : std::enable_shared_from_this&lt;A&gt; {};\n\nextern \"C\" void f_c(A*);\nextern \"C\" void f_cpp(A* a) {\n   std::shared_ptr&lt;A&gt; shared_a = a-&gt;shared_from_this();\n   // work with operation requires shared_ptr\n}\n\nint main()\n{\n    std::shared_ptr&lt;A&gt; a = std::make_shared&lt;A&gt;();\n    f_c(a.get());\n}\n</code></pre>\n\n<hr>\n\n<p>In some_other.c</p>\n\n<pre><code>struct A;\nvoid f_cpp(struct A* a);\nvoid f_c(struct A* a) {\n    f_cpp(a);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1482941326, "post_id": 41365447, "comment_id": 69932802, "body": "The return type of <code>evaluate</code> should be <code>std::shared_ptr&lt;Number&gt;</code>, saving you from all the evil casting."}, {"owner": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "edited": false, "score": 0, "creation_date": 1483028622, "post_id": 41365447, "comment_id": 69968999, "body": "You forgot to specify the base class of <code>Number</code> and <code>Addition</code>."}, {"owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1483157506, "post_id": 41365447, "comment_id": 70013716, "body": "@BenVoigt Yes, in this sample code one simply do that. My program had different types which is why I initially didn&#39;t do that. (it&#39;s also sad that I have to use a cast from <code>std::shared_from_this()</code> but I guess such is life)"}, {"owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "reply_to_user": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "edited": false, "score": 0, "creation_date": 1483157537, "post_id": 41365447, "comment_id": 70013721, "body": "@Oktalist Fixed. Also added a link to coliru."}, {"owner": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "edited": false, "score": 0, "creation_date": 1483195350, "post_id": 41365447, "comment_id": 70021333, "body": "You have to explicitly cast <code>shared_ptr&lt;Expression&gt;</code> to <code>shared_ptr&lt;Number&gt;</code> for the same reason that you&#39;d have to explicitly cast <code>Expression*</code> to <code>Number*</code> if you were using raw pointers. It&#39;s only unfortunate if the return type of <code>Expression::evaluate</code> is <code>shared_ptr&lt;Expression&gt;</code> (which seems reasonable) that <code>shared_ptr&lt;Number&gt;</code> wouldn&#39;t qualify as a covariant return type."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1538041751, "post_id": 41365447, "comment_id": 92007395, "body": "I&#39;d be <i>very</i> tempted to make all of <code>Expression</code>&#39;s and <code>Number</code>s constructors <code>protected</code>, and provide factories"}, {"owner": {"reputation": 1202, "user_id": 673679, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ac5b75f2ba59f84ac69e71018275702b?s=128&d=identicon&r=PG", "display_name": "user673679", "link": "https://stackoverflow.com/users/673679/user673679"}, "edited": false, "score": 0, "creation_date": 1545389646, "post_id": 41365447, "comment_id": 94613491, "body": "I&#39;d be very tempted not to use <code>shared_ptr</code> at all here. Use <code>unique_ptr</code>s, or pass by value - the code is simpler and double deletion isn&#39;t an issue."}], "tags": [], "owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "is_accepted": false, "score": 3, "last_activity_date": 1483157184, "last_edit_date": 1483157184, "creation_date": 1482940308, "answer_id": 41365447, "question_id": 41364700, "link": "https://stackoverflow.com/questions/41364700/when-should-we-use-stdenable-shared-from-this/41365447#41365447", "title": "When should we use std::enable_shared_from_this", "body": "<p>Let's say I want to represent a computation tree. We'll have an addition represented as a class deriving from expression with two pointers to expressions, so an expression can be evaluated recursively. However, we need to end the evaluation somewhere, so let's have numbers evaluate to themselves.</p>\n\n<pre><code>class Number;\n\nclass Expression : public std::enable_shared_from_this&lt;Expression&gt;\n{\npublic:\n    virtual std::shared_ptr&lt;Number&gt; evaluate() = 0;\n    virtual ~Expression() {}\n};\n\nclass Number : public Expression\n{\n    int x;\npublic:\n    int value() const { return x; }\n    std::shared_ptr&lt;Number&gt; evaluate() override\n    {\n        return std::static_pointer_cast&lt;Number&gt;(shared_from_this());\n    }\n    Number(int x) : x(x) {}\n};\n\nclass Addition : public Expression\n{\n    std::shared_ptr&lt;Expression&gt; left;\n    std::shared_ptr&lt;Expression&gt; right;\npublic:\n    std::shared_ptr&lt;Number&gt; evaluate() override\n    {\n        int l = left-&gt;evaluate()-&gt;value();\n        int r = right-&gt;evaluate()-&gt;value();\n        return std::make_shared&lt;Number&gt;(l + r);\n    }\n    Addition(std::shared_ptr&lt;Expression&gt; left, std::shared_ptr&lt;Expression&gt; right) :\n        left(left),\n        right(right)\n    {\n\n    }\n};\n</code></pre>\n\n<p><kbd><a href=\"http://coliru.stacked-crooked.com/a/a09953bdb54e6c3a\" rel=\"nofollow noreferrer\">Live on Coliru</a></kbd></p>\n\n<p>Note that the \"obvious\" way of implementing <code>Number::evaluate()</code> with <code>return std::shared_ptr&lt;Number&gt;(this);</code> is broken because it will result in double delete. </p>\n"}, {"tags": [], "owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "is_accepted": true, "score": 9, "last_activity_date": 1488385133, "last_edit_date": 1488385133, "creation_date": 1482940442, "answer_id": 41365475, "question_id": 41364700, "link": "https://stackoverflow.com/questions/41364700/when-should-we-use-stdenable-shared-from-this/41365475#41365475", "title": "When should we use std::enable_shared_from_this", "body": "<p>The hint about when <code>std::enable_shared_from_this&lt;T&gt;</code> is useful is in its name: when yielding objects based on some requests it may be necessary to return a pointer to an object itself. If the result should be a <code>std::shared_ptr&lt;T&gt;</code> it becomes necessary to return such a pointer from within a member function where there is generally no <code>std::shared_ptr&lt;T&gt;</code> accessible.</p>\n\n<p>Having derived from <code>std::enable_shared_from_this&lt;T&gt;</code> provides a way to get hold of a <code>std::shared_ptr&lt;T&gt;</code> given just a pointer of type <code>T</code>. Doing so does, however, assume that the object is already managed via a <code>std::shared_ptr&lt;T&gt;</code> and it would create mayhem if the object is allocated on the stack:</p>\n\n<pre><code>struct S: std::enable_shared_from_this&lt;S&gt; {\n    std::shared_ptr&lt;S&gt; get_object() {\n        return this-&gt;shared_from_this();\n    };\n}\n\nint main() {\n    std::shared_ptr&lt;S&gt; ptr1 = std::make_shared&lt;S&gt;();\n    std::shared_ptr&lt;S&gt; ptr2 = ptr1-&gt;get_object();\n    // ...\n}\n</code></pre>\n\n<p>In a realistic scenario there is probably some condition under which a <code>std::shared_ptr&lt;T&gt;</code> to the current object is returned.</p>\n"}], "owner": {"reputation": 8220, "user_id": 3305546, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/G2mbe.png?s=128&g=1", "display_name": "Yves", "link": "https://stackoverflow.com/users/3305546/yves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5171, "favorite_count": 6, "accepted_answer_id": 41365475, "answer_count": 3, "score": 16, "last_activity_date": 1583999586, "creation_date": 1482937688, "last_edit_date": 1583999586, "question_id": 41364700, "link": "https://stackoverflow.com/questions/41364700/when-should-we-use-stdenable-shared-from-this", "title": "When should we use std::enable_shared_from_this", "body": "<p>I just knew <code>std::enable_shared_from_this</code> form <a href=\"http://en.cppreference.com/w/cpp/memory/enable_shared_from_this\" rel=\"nofollow noreferrer\">this link</a>.<br>\nBut after reading the code below, I don't know when to use it.<br></p>\n\n<pre><code>try {\n        Good not_so_good;\n        std::shared_ptr&lt;Good&gt; gp1 = not_so_good.getptr();\n    } catch(std::bad_weak_ptr&amp; e) {\n        // undefined behavior (until C++17) and std::bad_weak_ptr thrown (since C++17)\n        std::cout &lt;&lt; e.what() &lt;&lt; '\\n';    \n    }\n</code></pre>\n\n<p>The code above is \"not so good\" because there is no existing <code>shared_ptr</code> before calling <code>getptr()</code>. So the good thing should be:<br></p>\n\n<pre><code>std::shared_ptr&lt;Good&gt; gp1 = std::make_shared&lt;Good&gt;(); // having a shared_ptr at the beginning\nstd::shared_ptr&lt;Good&gt; gp2 = gp1-&gt;getptr();\n</code></pre>\n\n<p>However, if I have already had a <code>shared_ptr</code> object, why don't I just simply code like this: <code>std::shared_ptr&lt;Good&gt; gp2 = gp1;</code>, meaning that I don't need <code>std::enable_shared_from_this</code> at all.<br></p>\n\n<p>In my opinion, using <code>std::enable_shared_from_this</code> is to make sure that more than one <code>shared_ptr</code> objects have the same control block so that we can avoid <a href=\"https://ideone.com/FlvIWw\" rel=\"nofollow noreferrer\">the double-delete problem</a>. But if I must remind myself to create a <code>shared_ptr</code> at the beginning, why don't I just remind myself to use <code>shared_ptr</code> object to create a new one, instead of using raw pointer?</p>\n"}, {"tags": ["c++", "static", "linker", "shared", "behavior"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1482940674, "post_id": 41364698, "comment_id": 69932422, "body": "A linker would only use object files from a library that are actually needed to satisfy some external reference; those that aren&#39;t referenced in any way are ignored, global variables and all. You want it this way most of the time - a large static library would commonly contain way more code than is needed for a given program, you wouldn&#39;t want the whole thing to be linked with your executable, so it ends up containing a lot of dead, never used code."}], "answers": [{"comments": [{"owner": {"reputation": 5623, "user_id": 6164172, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cfe3f1dd56fc9c05a01393d3c618d727?s=128&d=identicon&r=PG&f=1", "display_name": "Troskyvs", "link": "https://stackoverflow.com/users/6164172/troskyvs"}, "edited": false, "score": 0, "creation_date": 1482975961, "post_id": 41365545, "comment_id": 69945951, "body": "Bingo, it&#39;s the option that I was looking for to feed &quot;ld&quot;, it worked to explicitly link with everything."}], "tags": [], "owner": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "is_accepted": true, "score": 2, "last_activity_date": 1482940691, "creation_date": 1482940691, "answer_id": 41365545, "question_id": 41364698, "link": "https://stackoverflow.com/questions/41364698/c-differ-between-linking-with-o-and-with-a-file-different-behavior-why/41365545#41365545", "title": "C++ differ between Linking with .o and with .a file: different behavior, why?", "body": "<p>This is due to semantics of static libs. Linker will only include files from static library if it contains symbol that is referenced by some object file which precedes it in command line (e.g. main.cpp references f2 from Second so it's included). You can override this behavior with surrounding you library with</p>\n\n<pre><code>-Wl,--whole-archive -lmystatic -Wl,--no-whole-archive\n</code></pre>\n\n<p>but this isn't standard.</p>\n"}], "owner": {"reputation": 5623, "user_id": 6164172, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cfe3f1dd56fc9c05a01393d3c618d727?s=128&d=identicon&r=PG&f=1", "display_name": "Troskyvs", "link": "https://stackoverflow.com/users/6164172/troskyvs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 41365545, "answer_count": 1, "score": 4, "last_activity_date": 1482940691, "creation_date": 1482937682, "last_edit_date": 1592644375, "question_id": 41364698, "link": "https://stackoverflow.com/questions/41364698/c-differ-between-linking-with-o-and-with-a-file-different-behavior-why", "title": "C++ differ between Linking with .o and with .a file: different behavior, why?", "body": "<p>I expected that:</p>\n<blockquote>\n<p>linking with .o file, and linking with .a file archived from the .o file, should have no difference.</p>\n</blockquote>\n<p>But the fact is not. I have got 2 source files, each declaring 1class+1 static object+1 function, and a main.cpp that called one of the functions</p>\n<pre><code>$cat First.cpp\n#include&lt;stdio.h&gt;\nstruct First{\n  First(){printf(&quot;First\\n&quot;);}\n};\nvoid f1(){printf(&quot;f1\\n&quot;);}//Not called in main\nstatic First f_obj;\n\n$cat Second.cpp\n#include&lt;stdio.h&gt;\nstruct Second{\n  Second(){printf(&quot;Second\\n&quot;);}\n};\nvoid f2(){printf(&quot;f2\\n&quot;);}//Not called in main\nstatic Second s_obj;\n\n$cat main.cpp\nvoid f2();\nint main()\n{\n    f2();\n    return 0;\n}\n\n$g++ -c First.cpp  -fPIC\n$g++ -c Second.cpp -fPIC\n$ar -rvs libmystatic.a  First.o Second.o\n$g++ main.cpp -o MylinkSta -lmystatic -L.\n$g++ main.cpp -o MyDirect First.o Second.o\n\n$./MylinkSta\nSecond\nf2\n\n$./MyDirect\nSecond\nFirst\nf2\n</code></pre>\n<p>So you can see</p>\n<blockquote>\n<p>(1) The running result of MylinkSta doesn't construct 'First' object, but MyDirect does.</p>\n<p>(2) While the 'Second' object is always constructed.</p>\n</blockquote>\n<p>I really don't see any difference between linking with 2 '.o' files, and linking with '.a' file that's archived from these 2 '.o' files.</p>\n<p>Why they behave differently? I experimented with gcc/clang on rhel/ubuntu, all show the same result. I wonder if there's any C++ ABI standard that says when a static/global object created should be really invoked, by any linking option?</p>\n<p>How does this difference come from?</p>\n"}, {"tags": ["c++", "opengl", "exception"], "comments": [{"owner": {"reputation": 323, "user_id": 1578824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7826e1b5865d1b82b543cb53b83d101e?s=128&d=identicon&r=PG", "display_name": "jimvonmoon", "link": "https://stackoverflow.com/users/1578824/jimvonmoon"}, "edited": false, "score": 0, "creation_date": 1482943976, "post_id": 41364632, "comment_id": 69934178, "body": "How do you create OpenGL context? What is the content of <code>vertexShader.txt</code> and <code>fragmentShader.txt</code>?"}, {"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 1, "creation_date": 1482945202, "post_id": 41364632, "comment_id": 69934786, "body": "Edit in a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 197, "user_id": 7334926, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/17a5cd9022218f115e44debf2d267d23?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/7334926/max"}, "edited": false, "score": 0, "creation_date": 1482945772, "post_id": 41364632, "comment_id": 69935045, "body": "I use glfw to create my window and I use glfwMakeContextCurrent(window) to create the context."}, {"owner": {"reputation": 323, "user_id": 1578824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7826e1b5865d1b82b543cb53b83d101e?s=128&d=identicon&r=PG", "display_name": "jimvonmoon", "link": "https://stackoverflow.com/users/1578824/jimvonmoon"}, "edited": false, "score": 0, "creation_date": 1482946350, "post_id": 41364632, "comment_id": 69935322, "body": "genpfault is right. We&#39;ll need to see more code to be able to help you. Anyway, did you call <code>glfwInit()</code> after <code>glfwMakeContextCurrent()</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "is_accepted": true, "score": 2, "last_activity_date": 1482948937, "last_edit_date": 1482948937, "creation_date": 1482948203, "answer_id": 41367393, "question_id": 41364632, "link": "https://stackoverflow.com/questions/41364632/opengl-glshadersource-throws-an-exception/41367393#41367393", "title": "OpenGL glShaderSource throws an exception", "body": "<p>Your call is wrong:</p>\n\n<blockquote>\n<pre><code>glShaderSource(vertexShader, 1, &amp;data, (GLint*)vertexShadersSource.size());\n</code></pre>\n</blockquote>\n\n<p>and the type cast from a <code>size_t</code> to a pointer type should have raised some red flags while you wrote it. </p>\n\n<p><a href=\"https://www.opengl.org/sdk/docs/man/html/glShaderSource.xhtml\" rel=\"nofollow noreferrer\">glShaderSource()</a> expects a pointer <em>to an array of string lenghts</em> - one element per separate string. Since you only use 1 string, it will try to access <code>lenght[0]</code>. This means it treats your string size as an address, and that address is very likely to not belong to your process.</p>\n\n<p>Since you already use 0-terminated C-Strings, you can simply use <code>NULL</code> as the <code>length</code> parameter. Or, if you absolutely want to use it, you have to just pass a pointer to an GLint:</p>\n\n<pre><code>GLint len=vertexShadersSource.size();\nglShaderSource(..., 1, ..., &amp;len);\n</code></pre>\n"}], "owner": {"reputation": 197, "user_id": 7334926, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/17a5cd9022218f115e44debf2d267d23?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/7334926/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "accepted_answer_id": 41367393, "answer_count": 1, "score": -1, "last_activity_date": 1482948937, "creation_date": 1482937456, "last_edit_date": 1482946029, "question_id": 41364632, "link": "https://stackoverflow.com/questions/41364632/opengl-glshadersource-throws-an-exception", "title": "OpenGL glShaderSource throws an exception", "body": "<p>This code throws nvoglv32.dll exception. I think there is an error in glShaderSource somewherer, but I can't find it</p>\n\n<pre><code>ifstream ifs(\"vertexShader.txt\");\nstring vertexShadersSource((istreambuf_iterator&lt;char&gt;(ifs)),\n    (std::istreambuf_iterator&lt;char&gt;()));\n\nifs.close();\nifs.open(\"fragmentShader.txt\");\nstring fragmentShadersSource((istreambuf_iterator&lt;char&gt;(ifs)),\n    (std::istreambuf_iterator&lt;char&gt;()));\n\ncout &lt;&lt; fragmentShadersSource.c_str() &lt;&lt; endl;\ncout &lt;&lt; vertexShadersSource.c_str() &lt;&lt; endl;\n\nGLuint shaderProgram;\nGLuint fragmentShader, vertexShader;\nvertexShader = glCreateShader(GL_VERTEX_SHADER);\nfragmentShader = glCreateShader(GL_FRAGMENT_SHADER);\n\nconst char *data = vertexShadersSource.c_str();\nglShaderSource(vertexShader, 1, &amp;data, (GLint*)vertexShadersSource.size());\ndata = fragmentShadersSource.c_str();\nglShaderSource(fragmentShader, 1, &amp;data, (GLint*)fragmentShadersSource.size());\n</code></pre>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Although I think the shader is correct, here you can see the shader code\nVertexShader:</p>\n\n<pre><code>#version 150\n// in_Position was bound to attribute index 0 and in_Color was bound to       attribute index 1\n//in  vec2 in_Position;\n//in  vec3 in_Color;\n\n// We output the ex_Color variable to the next shader in the chain\nout vec3 ex_Color;\nvoid main(void) {\n// Since we are using flat lines, our input only had two points: x and y.\n// Set the Z coordinate to 0 and W coordinate to 1\n\n//gl_Position = vec4(in_Position.x, in_Position.y, 0.0, 1.0);\n\n// GLSL allows shorthand use of vectors too, the following is also valid:\n// gl_Position = vec4(in_Position, 0.0, 1.0);\n// We're simply passing the color through unmodified\n\nex_Color = vec3(1.0, 1.0, 0.0);\n}\n</code></pre>\n\n<p>FragmentShader:</p>\n\n<pre><code>#version 150\n// It was expressed that some drivers required this next line to function   properly\nprecision highp float;\n\nin  vec3 ex_Color;\nout vec4 gl_FragColor;\n\nvoid main(void) {\n// Pass through our original color with full opacity.\ngl_FragColor = vec4(ex_Color,1.0);\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "windows", "windows-security", "windows-users"], "comments": [{"owner": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "edited": false, "score": 2, "creation_date": 1482937270, "post_id": 41364503, "comment_id": 69930514, "body": "Have you tried <code>LookupAccountName()</code> <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa379159(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}, {"owner": {"reputation": 9475, "user_id": 1204153, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/99f438bb3838ccd7079152fc50e784d1?s=128&d=identicon&r=PG", "display_name": "Andy", "link": "https://stackoverflow.com/users/1204153/andy"}, "reply_to_user": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "edited": false, "score": 0, "creation_date": 1482937359, "post_id": 41364503, "comment_id": 69930568, "body": "ha... looks like that&#39;s the &quot;magical API&quot; I was talking about. I&#39;ll go try it out. Thanks, buddy."}, {"owner": {"reputation": 9475, "user_id": 1204153, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/99f438bb3838ccd7079152fc50e784d1?s=128&d=identicon&r=PG", "display_name": "Andy", "link": "https://stackoverflow.com/users/1204153/andy"}, "reply_to_user": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "edited": false, "score": 0, "creation_date": 1482938391, "post_id": 41364503, "comment_id": 69931147, "body": "@Frankie_C -- Yeah that works... Thanks. I was losing my mind. If you answer with that, I&#39;ll accept."}], "answers": [{"tags": [], "owner": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "is_accepted": true, "score": 1, "last_activity_date": 1482940461, "creation_date": 1482940461, "answer_id": 41365482, "question_id": 41364503, "link": "https://stackoverflow.com/questions/41364503/get-windows-user-account-sid-by-account-name-only/41365482#41365482", "title": "Get Windows user account SID by account name only", "body": "<p>You can use the buddy function <code>LookupAccountName()</code>.</p>\n\n<p>See <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa379159(v=vs.85).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/windows/desktop/aa379159(v=vs.85).aspx</a></p>\n"}], "owner": {"reputation": 9475, "user_id": 1204153, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/99f438bb3838ccd7079152fc50e784d1?s=128&d=identicon&r=PG", "display_name": "Andy", "link": "https://stackoverflow.com/users/1204153/andy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 704, "favorite_count": 0, "accepted_answer_id": 41365482, "answer_count": 1, "score": 1, "last_activity_date": 1482940461, "creation_date": 1482936998, "question_id": 41364503, "link": "https://stackoverflow.com/questions/41364503/get-windows-user-account-sid-by-account-name-only", "title": "Get Windows user account SID by account name only", "body": "<p>I am trying to programmatically delete a user profile (the right way) using the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb762273(v=vs.85).aspx\" rel=\"nofollow noreferrer\">DeleteProfile()</a> API. Unfortunately, it wants an account SID as the first parameter.</p>\n\n<p>There has to be some magical API that takes a username and spits out an SID, correct? I can't seem to find anything online that is uses native code (I am not using .NET managed code and don't want to use WMI queries or powershell or cmdline tools, etc)</p>\n\n<p>I know you can use the Net32Api to delete an account, but that still leaves artifacts like profile directory, etc. I just want a way to cleanly delete a profile (obviously from elevated code).</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c++", "multithreading", "deque"], "comments": [{"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1482937059, "post_id": 41364426, "comment_id": 69930382, "body": "What&#39;s with that <code>&#47;&#47; deq.erase(it);</code>? Oh, yes, your <code>th</code> is wrong. It should not be copyable and have proper implementation of move semantics (<code>noexcept</code>)."}, {"owner": {"reputation": 975, "user_id": 3733986, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/4tcnA.jpg?s=128&g=1", "display_name": "marc", "link": "https://stackoverflow.com/users/3733986/marc"}, "reply_to_user": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1482937195, "post_id": 41364426, "comment_id": 69930474, "body": "As stated above the compiler is complaining when using that!"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482937292, "post_id": 41364426, "comment_id": 69930529, "body": "@mmmint You have a race condition, <code>std::deque</code> isn&#39;t a thhread safe container."}, {"owner": {"reputation": 11973, "user_id": 1419315, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e13603f86a9561d16a944963943fb8a9?s=128&d=identicon&r=PG", "display_name": "JohnB", "link": "https://stackoverflow.com/users/1419315/johnb"}, "edited": false, "score": 0, "creation_date": 1482938167, "post_id": 41364426, "comment_id": 69931027, "body": "You pass pointer <code>this</code> to the constructor of <code>std::thread</code>. After moving the <code>th</code> object into the <code>deque</code>, this value of <code>this</code> is no longer valid, as the object now has been moved to a different location. Yet the thread still uses the old value. Try making <code>th</code> non-moveable and using <code>emplace_back</code> rather than <code>push_back</code>."}, {"owner": {"reputation": 11973, "user_id": 1419315, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e13603f86a9561d16a944963943fb8a9?s=128&d=identicon&r=PG", "display_name": "JohnB", "link": "https://stackoverflow.com/users/1419315/johnb"}, "edited": false, "score": 0, "creation_date": 1482938484, "post_id": 41364426, "comment_id": 69931215, "body": "For the very same reason, since <code>th</code> objects would have to be moved if other <code>th</code> objects are erased from the container (in order to fill the holes), you will not be able to <code>erase</code> objects from the <code>deque</code> with your design."}, {"owner": {"reputation": 975, "user_id": 3733986, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/4tcnA.jpg?s=128&g=1", "display_name": "marc", "link": "https://stackoverflow.com/users/3733986/marc"}, "edited": false, "score": 0, "creation_date": 1482938492, "post_id": 41364426, "comment_id": 69931219, "body": "Can somebody please give me an answer based on code..."}], "answers": [{"comments": [{"owner": {"reputation": 975, "user_id": 3733986, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/4tcnA.jpg?s=128&g=1", "display_name": "marc", "link": "https://stackoverflow.com/users/3733986/marc"}, "edited": false, "score": 0, "creation_date": 1482938813, "post_id": 41364986, "comment_id": 69931396, "body": "Is there any other container which could be used to be able to delete the element after joinning the thread?"}, {"owner": {"reputation": 11973, "user_id": 1419315, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e13603f86a9561d16a944963943fb8a9?s=128&d=identicon&r=PG", "display_name": "JohnB", "link": "https://stackoverflow.com/users/1419315/johnb"}, "reply_to_user": {"reputation": 975, "user_id": 3733986, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/4tcnA.jpg?s=128&g=1", "display_name": "marc", "link": "https://stackoverflow.com/users/3733986/marc"}, "edited": false, "score": 0, "creation_date": 1482939084, "post_id": 41364986, "comment_id": 69931521, "body": "Some kind of linked list, probably. Yet I would prefer storing data needed by the thread somewhere on the heap and not moving it. E.g. make <code>progress</code> a <code>unique_ptr&lt;int&gt;</code> and pass the result of <code>progress.get ()</code> to the constructor of <code>std::thread</code> rather than <code>this</code>. Of course, then <code>func</code> must be static and accept an <code>int * progress</code> as a parameter."}, {"owner": {"reputation": 11973, "user_id": 1419315, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e13603f86a9561d16a944963943fb8a9?s=128&d=identicon&r=PG", "display_name": "JohnB", "link": "https://stackoverflow.com/users/1419315/johnb"}, "reply_to_user": {"reputation": 975, "user_id": 3733986, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/4tcnA.jpg?s=128&g=1", "display_name": "marc", "link": "https://stackoverflow.com/users/3733986/marc"}, "edited": false, "score": 0, "creation_date": 1482939443, "post_id": 41364986, "comment_id": 69931728, "body": "Or make <code>deq</code> a <code>std::deque&lt;std::unique_ptr&lt;th&gt;&gt;</code>. Then you have a deck of pointers to <code>th</code>, and the <code>th</code> objects need not be moved."}], "tags": [], "owner": {"reputation": 11973, "user_id": 1419315, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e13603f86a9561d16a944963943fb8a9?s=128&d=identicon&r=PG", "display_name": "JohnB", "link": "https://stackoverflow.com/users/1419315/johnb"}, "is_accepted": true, "score": 1, "last_activity_date": 1482938840, "last_edit_date": 1482938840, "creation_date": 1482938671, "answer_id": 41364986, "question_id": 41364426, "link": "https://stackoverflow.com/questions/41364426/dequepush-back-with-threads-reacts-strangely/41364986#41364986", "title": "deque::push_back with threads reacts strangely", "body": "<p>You pass the value of <code>this</code> (i.e. the current address of the object) to the constructor of <code>std::thread</code>. After moving the <code>th</code> object into the deque, this value of <code>this</code> is no longer valid, as the object now has been moved to a different location. Yet the thread still uses the old value. Try making <code>th</code> non-moveable and using <code>emplace_back</code> rather than <code>push_back</code>.</p>\n\n<pre><code>class th {\n    public:\n        void func() {\n            *this-&gt;progress = 100;\n        }\n\n        explicit th(int* prog) :\n            progress(prog), \n            m_thread(std::thread(&amp;th::func, this)) {};\n\n        // COPY\n        th(th const&amp; other) = delete;\n        th(th &amp;&amp; other) = delete;\n        th&amp; operator=(th const&amp; other) = delete;\n        th&amp; operator=(th &amp;&amp;) = delete;\n\n        void join() { m_thread.join(); }\n        int *progress;\n\n    private:\n        std::thread m_thread;\n};\n\nstd::vector&lt;int&gt; progress;\nprogress.push_back(-1);\nprogress.push_back(-1);\nstd::deque&lt;th&gt; deq;\ndeq.emplace_back (&amp;progress[0]);\n// etc.\n</code></pre>\n"}], "owner": {"reputation": 975, "user_id": 3733986, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/4tcnA.jpg?s=128&g=1", "display_name": "marc", "link": "https://stackoverflow.com/users/3733986/marc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 41364986, "answer_count": 1, "score": 0, "last_activity_date": 1482938840, "creation_date": 1482936703, "question_id": 41364426, "link": "https://stackoverflow.com/questions/41364426/dequepush-back-with-threads-reacts-strangely", "title": "deque::push_back with threads reacts strangely", "body": "<p>I've tried different things, but push_back of threads  in a deque container reacts strangely.</p>\n\n<p>why is this happening?? Is this because of the copy/move constructors?</p>\n\n<p>Here the output of the program...</p>\n\n<pre><code>progress[0]:-1\nprogress[1]:-1\nexecuting threads...\nprogress[0]:100\nprogress[1]:100\n================================\nprogress[0]:-1\nprogress[1]:-1\nexecuting threads...\nprogress[0]:-1\nprogress[1]:100\n</code></pre>\n\n<p>As shown by the output, the result defers between using</p>\n\n<pre><code>for(size_t i = 0; i &lt; 2; ++i) {\n    deq.push_back(th(&amp;progress[i]));\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>deq.push_back(th(&amp;progress[0]));\ndeq.push_back(th(&amp;progress[1]));\n</code></pre>\n\n<p>This is the source code...</p>\n\n<pre><code>class th {\n    public:\n        void func() {\n            *this-&gt;progress = 100;\n        }\n\n        th(int* prog) :\n            progress(prog), \n            m_thread(std::thread(&amp;th::func, this)) {};\n\n        // COPY\n        th(th const&amp; other);\n        th&amp; operator=(th const&amp; other);\n\n        // MOVE\n        th(th&amp;&amp;) = default;\n        // th&amp; operator=(th&amp;&amp; other) {\n        //  if(this != &amp;other){\n        //  }\n        //  return *this;\n        // }\n\n        void join() { m_thread.join(); }\n        int *progress;\n\n    private:\n        std::thread m_thread;\n};\n\nint main(void) {\n\n    {\n        std::vector&lt;int&gt; progress;\n        progress.push_back(-1);\n        progress.push_back(-1);\n        std::deque&lt;th&gt; deq;\n\n        std::cout &lt;&lt; \"progress[0]:\" &lt;&lt; progress[0] &lt;&lt; std::endl;\n        std::cout &lt;&lt; \"progress[1]:\" &lt;&lt; progress[1] &lt;&lt; std::endl;\n\n        std::cout &lt;&lt; \"executing threads...\" &lt;&lt; std::endl;\n\n        deq.push_back(th(&amp;progress[0]));\n        deq.push_back(th(&amp;progress[1]));\n\n\n        for (std::deque&lt;th&gt;::iterator it = deq.begin(); it != deq.end(); it++) {\n            it-&gt;join();\n            // deq.erase(it);\n        }\n\n\n        std::cout &lt;&lt; \"progress[0]:\" &lt;&lt; progress[0] &lt;&lt; std::endl;\n        std::cout &lt;&lt; \"progress[1]:\" &lt;&lt; progress[1] &lt;&lt; std::endl;    \n    }\n\n    std::cout &lt;&lt; \"================================\" &lt;&lt; std::endl;\n\n    {\n        std::vector&lt;int&gt; progress;\n        progress.push_back(-1);\n        progress.push_back(-1);\n        std::deque&lt;th&gt; deq;\n\n        std::cout &lt;&lt; \"progress[0]:\" &lt;&lt; progress[0] &lt;&lt; std::endl;\n        std::cout &lt;&lt; \"progress[1]:\" &lt;&lt; progress[1] &lt;&lt; std::endl;\n\n        std::cout &lt;&lt; \"executing threads...\" &lt;&lt; std::endl;\n\n        for(size_t i = 0; i &lt; 2; ++i) {\n            deq.push_back(th(&amp;progress[i]));\n        }\n\n        for (std::deque&lt;th&gt;::iterator it = deq.begin(); it != deq.end(); it++) {\n            it-&gt;join();\n            // deq.erase(it);\n        }\n\n        std::cout &lt;&lt; \"progress[0]:\" &lt;&lt; progress[0] &lt;&lt; std::endl;\n        std::cout &lt;&lt; \"progress[1]:\" &lt;&lt; progress[1] &lt;&lt; std::endl;\n    }\n\n    exit(EXIT_SUCCESS);\n}\n</code></pre>\n\n<p>And how can I use the erase member function of deque without the compiler complaining</p>\n\n<pre><code>    /home/user/test/obj/main.o: In function `__gnu_cxx::_Mutable_BidirectionalIteratorConcept&lt;th*&gt;::__constraints()':\nmain.cpp:(.text._ZN9__gnu_cxx37_Mutable_BidirectionalIteratorConceptIP2thE13__constraintsEv[__gnu_cxx::_Mutable_BidirectionalIteratorConcept&lt;th*&gt;::__constraints()]+0x40): undefined reference to `th::operator=(th const&amp;)'\n/home/user/test/obj/main.o: In function `__gnu_cxx::_ConvertibleConcept&lt;th, th&gt;::__constraints()':\nmain.cpp:(.text._ZN9__gnu_cxx19_ConvertibleConceptI2thS1_E13__constraintsEv[__gnu_cxx::_ConvertibleConcept&lt;th, th&gt;::__constraints()]+0x20): undefined reference to `th::th(th const&amp;)'\n/home/user/test/obj/main.o: In function `__gnu_cxx::_OutputIteratorConcept&lt;th*, th&gt;::__constraints()':\nmain.cpp:(.text._ZN9__gnu_cxx22_OutputIteratorConceptIP2thS1_E13__constraintsEv[__gnu_cxx::_OutputIteratorConcept&lt;th*, th&gt;::__constraints()]+0x64): undefined reference to `th::operator=(th const&amp;)'\n/home/user/test/obj/main.o: In function `th* std::__copy_move_backward&lt;true, false, std::random_access_iterator_tag&gt;::__copy_move_b&lt;th*, th*&gt;(th*, th*, th*)':\nmain.cpp:(.text._ZNSt20__copy_move_backwardILb1ELb0ESt26random_access_iterator_tagE13__copy_move_bIP2thS4_EET0_T_S6_S5_[th* std::__copy_move_backward&lt;true, false, std::random_access_iterator_tag&gt;::__copy_move_b&lt;th*, th*&gt;(th*, th*, th*)]+0x5c): undefined reference to `th::operator=(th const&amp;)'\n/home/user/test/obj/main.o: In function `th* std::__copy_move&lt;true, false, std::random_access_iterator_tag&gt;::__copy_m&lt;th*, th*&gt;(th*, th*, th*)':\nmain.cpp:(.text._ZNSt11__copy_moveILb1ELb0ESt26random_access_iterator_tagE8__copy_mIP2thS4_EET0_T_S6_S5_[th* std::__copy_move&lt;true, false, std::random_access_iterator_tag&gt;::__copy_m&lt;th*, th*&gt;(th*, th*, th*)]+0x44): undefined reference to `th::operator=(th const&amp;)'\n/home/user/test/obj/main.o: In function `__gnu_cxx::_Mutable_ForwardIteratorConcept&lt;th*&gt;::__constraints()':\nmain.cpp:(.text._ZN9__gnu_cxx31_Mutable_ForwardIteratorConceptIP2thE13__constraintsEv[__gnu_cxx::_Mutable_ForwardIteratorConcept&lt;th*&gt;::__constraints()]+0x3c): undefined reference to `th::operator=(th const&amp;)'\ncollect2: ld returned 1 exit status\nmake: *** [link] Error 1\n</code></pre>\n\n<p>Thank you!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482935996, "post_id": 41364181, "comment_id": 69929765, "body": "Welcome to Stack Overflow. Please take the time to read <a href=\"http://stackoverflow.com/tour\">The Tour</a> and refer to the material from the <a href=\"http://stackoverflow.com/help/asking\">Help Center</a> what and how you can ask here."}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1482936006, "post_id": 41364181, "comment_id": 69929768, "body": "The first version also does not flush the stream and there&#39;s no newline... so how can they be the same?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 3, "creation_date": 1482936011, "post_id": 41364181, "comment_id": 69929770, "body": "Why Are You Talking Like This?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1482936124, "post_id": 41364181, "comment_id": 69929824, "body": "<i>@Mario</i> <code>&quot;Hello C++ &quot; + x</code> does pointer arithmethic. It yields the address of the literal + 10."}, {"owner": {"reputation": 27011, "user_id": 1490355, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/296f0478cb1b6724e3f862ace601fa99?s=128&d=identicon&r=PG", "display_name": "SingerOfTheFall", "link": "https://stackoverflow.com/users/1490355/singerofthefall"}, "edited": false, "score": 1, "creation_date": 1482936157, "post_id": 41364181, "comment_id": 69929847, "body": "To everyone voting to close because of &quot;typographical error&quot;, what it the case here is different, and the OP is just used to languages where strings can be concatenated with numbers by default with <code>+</code> operator?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 27011, "user_id": 1490355, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/296f0478cb1b6724e3f862ace601fa99?s=128&d=identicon&r=PG", "display_name": "SingerOfTheFall", "link": "https://stackoverflow.com/users/1490355/singerofthefall"}, "edited": false, "score": 3, "creation_date": 1482936311, "post_id": 41364181, "comment_id": 69929936, "body": "@SingerOfTheFall: The close reason is also used in practice to indicate that the question is so basic and so lacking in fundamental beginner research that it seems unlikely to be of substantive, on-topic use to future readers. It doesn&#39;t really matter what the OP is &quot;used to&quot;. This is clearly not an actual typographical error, but it is almost as inconsequential to the wider programming community. Although a canonical dupe would have been better. As it happens, I didn&#39;t close vote at all, but instead answered."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1482936409, "post_id": 41364181, "comment_id": 69929993, "body": "Absolutely agree with @Lightness."}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1482936378, "post_id": 41364232, "comment_id": 69929978, "body": "Not a bad first answer. I have upvoted it, but in future you may wish to consider adding some <i>explanation</i> to your answers so that the OP knows <i>why</i> your solution is the right one."}], "tags": [], "owner": {"reputation": 655, "user_id": 7350186, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-KkJRPMeWGQc/AAAAAAAAAAI/AAAAAAAAAEM/qjZv1ohX3q8/photo.jpg?sz=128", "display_name": "DasOhmoff San", "link": "https://stackoverflow.com/users/7350186/dasohmoff-san"}, "is_accepted": true, "score": 0, "last_activity_date": 1482935926, "creation_date": 1482935926, "answer_id": 41364232, "question_id": 41364181, "link": "https://stackoverflow.com/questions/41364181/why-does-cout-produce-the-correct-string-output-with-but-not-with/41364232#41364232", "title": "Why does cout produce the correct string output with &lt;&lt;, but not with +?", "body": "<p>Try using instead of: <code>cout&lt;&lt;\"Hello C++ \" + x ;</code></p>\n\n<pre><code>cout&lt;&lt;\"Hello C++ \" &lt;&lt; x ;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 5, "last_activity_date": 1482936102, "creation_date": 1482936102, "answer_id": 41364268, "question_id": 41364181, "link": "https://stackoverflow.com/questions/41364181/why-does-cout-produce-the-correct-string-output-with-but-not-with/41364268#41364268", "title": "Why does cout produce the correct string output with &lt;&lt;, but not with +?", "body": "<p>Because that's not how to use streams, or strings.</p>\n\n<p>The <code>+</code> operator is for:</p>\n\n<ol>\n<li>adding two numbers together, or</li>\n<li>concatenating two <code>std::string</code>s together.</li>\n</ol>\n\n<p>Here you have a string literal and a number. The <code>+</code> operator is not compatible with those.</p>\n\n<p>(What you actually end up doing is \"adding\" <code>10</code> to the pointer representing the string literal; as it happens, because your string is ten characters long, that leaves the pointer exactly where your string literal's NULL terminator is, so it is like trying to print <code>\"\"</code>.)</p>\n\n<p>The correct approach, as you have yourself found via the second example, is to use the stream's <code>&lt;&lt;</code> operator again.</p>\n\n<pre><code>cout &lt;&lt; \"Hello C++ \" &lt;&lt; x;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1482936348, "post_id": 41364329, "comment_id": 69929959, "body": "Where did the <code>++x</code> come from? Where is the OP attempting increment or decrement?"}, {"owner": {"reputation": 1, "user_id": 7318870, "user_type": "registered", "profile_image": "https://graph.facebook.com/1634878956815631/picture?type=large", "display_name": "Abdelaziz Ahmed", "link": "https://stackoverflow.com/users/7318870/abdelaziz-ahmed"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1482936741, "post_id": 41364329, "comment_id": 69930190, "body": "let us say that x is a variable &#39;x=10&#39; if you want to increment its value with a one u should write &#39;++x&#39; or &#39;x=+1&#39; if you want to decremet with one use &#39;--x&#39; or &#39;x=-1&#39;"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1482937325, "post_id": 41364329, "comment_id": 69930546, "body": "Yes, I know, but what does that have to do with the question?"}], "tags": [], "owner": {"reputation": 1, "user_id": 7318870, "user_type": "registered", "profile_image": "https://graph.facebook.com/1634878956815631/picture?type=large", "display_name": "Abdelaziz Ahmed", "link": "https://stackoverflow.com/users/7318870/abdelaziz-ahmed"}, "is_accepted": false, "score": -2, "last_activity_date": 1482938765, "last_edit_date": 1482938765, "creation_date": 1482936300, "answer_id": 41364329, "question_id": 41364181, "link": "https://stackoverflow.com/questions/41364181/why-does-cout-produce-the-correct-string-output-with-but-not-with/41364329#41364329", "title": "Why does cout produce the correct string output with &lt;&lt;, but not with +?", "body": "<pre><code>int x = 10;\ncout &lt;&lt; \"Hello world!\" &lt;&lt; ++x;\nreturn 0; \n</code></pre>\n\n<p>If you want to increment a variable, you should use <code>++x</code>. If you want to decrement it, use <code>--x</code>.</p>\n\n<p>And, if you want to show a variable next to another one, or next to another string, use <code>&lt;&lt;</code> between them.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 7350266, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211572809066016/picture?type=large", "display_name": "Sagar Sudhakar", "link": "https://stackoverflow.com/users/7350266/sagar-sudhakar"}, "is_accepted": false, "score": 1, "last_activity_date": 1482938955, "last_edit_date": 1495535433, "creation_date": 1482936523, "answer_id": 41364377, "question_id": 41364181, "link": "https://stackoverflow.com/questions/41364181/why-does-cout-produce-the-correct-string-output-with-but-not-with/41364377#41364377", "title": "Why does cout produce the correct string output with &lt;&lt;, but not with +?", "body": "<p><a href=\"https://stackoverflow.com/questions/64782/how-do-you-append-an-int-to-a-string-in-c\">How do you append an int to a string in C++?</a></p>\n\n<p>I suggest you look closely at the above post to tackle your problem.</p>\n\n<p>In C or C++, concatenation is done best using string streams. But to specifically answer your question:</p>\n\n<p><strong>This C++ Code Shows No Output:</strong></p>\n\n<pre><code>int x = 10;\ncout&lt;&lt;\"Hello C++ \" + x ; //uses \"+\" as you are trying to concatenate an \"int\" to some output to the stream\n</code></pre>\n\n<p><strong>But This One which Shows An Output:</strong></p>\n\n<pre><code>int x = 10;\ncout&lt;&lt;\"Hello C++ \"; //output directly to stream\ncout&lt;&lt;x&lt;&lt;endl; //same here, no concatenation\n</code></pre>\n\n<p>What's the problem then, are they exactly the same ?\nThe problem is with \"+\" concatenation to the stream and NO, they aren't the same! :)</p>\n"}, {"tags": [], "owner": {"reputation": 205, "user_id": 6681210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d80f7df7970668181b659d2dc3826645?s=128&d=identicon&r=PG&f=1", "display_name": "0x0C4", "link": "https://stackoverflow.com/users/6681210/0x0c4"}, "is_accepted": false, "score": 1, "last_activity_date": 1482936773, "creation_date": 1482936773, "answer_id": 41364440, "question_id": 41364181, "link": "https://stackoverflow.com/questions/41364181/why-does-cout-produce-the-correct-string-output-with-but-not-with/41364440#41364440", "title": "Why does cout produce the correct string output with &lt;&lt;, but not with +?", "body": "<pre><code>    \"Hello C++ \" + x ;\n</code></pre>\n\n<p>makes no sense. You add 10 to the address of the string \"Hello C++\" and then std::cout should do an output of this what is on address \"Hello C++\" + 10.\nSo this makes simply no sense.\nstd::cout is part of the iostream.</p>\n"}], "owner": {"reputation": 23, "user_id": 7350200, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208626178785778/picture?type=large", "display_name": "Mario George", "link": "https://stackoverflow.com/users/7350200/mario-george"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "closed_date": 1482949986, "accepted_answer_id": 41364232, "answer_count": 5, "score": -4, "last_activity_date": 1482938955, "creation_date": 1482935761, "last_edit_date": 1482937199, "question_id": 41364181, "link": "https://stackoverflow.com/questions/41364181/why-does-cout-produce-the-correct-string-output-with-but-not-with", "closed_reason": "Not suitable for this site", "title": "Why does cout produce the correct string output with &lt;&lt;, but not with +?", "body": "<p>This shows no output:</p>\n\n<pre><code>int x = 10;\ncout&lt;&lt;\"Hello C++ \" + x ;\n</code></pre>\n\n<p>But this does show output:</p>\n\n<pre><code>int x = 10;\ncout&lt;&lt;\"Hello C++ \";\ncout&lt;&lt;x&lt;&lt;endl;\n</code></pre>\n\n<p>What is the problem? They seem exactly the same.</p>\n\n<p>BTW I'm Using Visual C++ 6.0 On Visual Studio 2010 .</p>\n"}, {"tags": ["c#", "c++", "dll", "language-interoperability"], "comments": [{"owner": {"reputation": 27011, "user_id": 1490355, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/296f0478cb1b6724e3f862ace601fa99?s=128&d=identicon&r=PG", "display_name": "SingerOfTheFall", "link": "https://stackoverflow.com/users/1490355/singerofthefall"}, "edited": false, "score": 3, "creation_date": 1482934763, "post_id": 41363874, "comment_id": 69929121, "body": "You didn&#39;t forget to copy the dll into a correct location when moving the application to Win10, did you?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482934979, "post_id": 41363874, "comment_id": 69929245, "body": "Welcome to Stack Overflow. Please take the time to read <a href=\"http://stackoverflow.com/tour\">The Tour</a> and refer to the material from the <a href=\"http://stackoverflow.com/help/asking\">Help Center</a> what and how you can ask here."}, {"owner": {"reputation": 11, "user_id": 7348992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/723ec7e28fcccb677e2d3be88c46965c?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier", "link": "https://stackoverflow.com/users/7348992/olivier"}, "edited": false, "score": 0, "creation_date": 1482936096, "post_id": 41363874, "comment_id": 69929819, "body": "I made the build under the target plateform which is Win10 64bits. Everything is in the same directory. Then to test under Windows7 I copy the directory with its contents."}, {"owner": {"reputation": 46944, "user_id": 3764814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d02a4923abd2ca6d7593f031e4222c2?s=128&d=identicon&r=PG", "display_name": "Lucas Trzesniewski", "link": "https://stackoverflow.com/users/3764814/lucas-trzesniewski"}, "edited": false, "score": 1, "creation_date": 1482952969, "post_id": 41363874, "comment_id": 69938405, "body": "Your dll was found but its initialization code failed. Maybe there&#39;s a dependency missing (like it can&#39;t find libstdc++) so check that."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1482953838, "post_id": 41363874, "comment_id": 69938769, "body": "Microsoft&#39;s Event Viewer (run eventvwr) will tell you more. Go to &quot;Windows Logs&quot; &gt; &quot;Application&quot; and find your specific .dll&#39;s error. It&#39;s likely a missing dependency or a side by side error. If you comment back at me when you add the error event to your question I&#39;ll try to help further."}, {"owner": {"reputation": 11, "user_id": 7348992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/723ec7e28fcccb677e2d3be88c46965c?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier", "link": "https://stackoverflow.com/users/7348992/olivier"}, "edited": false, "score": 0, "creation_date": 1483005419, "post_id": 41363874, "comment_id": 69956202, "body": "Exception code : 0xc0000005      Error offset : 0x000000000001bac0"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 7348992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/723ec7e28fcccb677e2d3be88c46965c?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier", "link": "https://stackoverflow.com/users/7348992/olivier"}, "is_accepted": false, "score": 0, "last_activity_date": 1483015720, "creation_date": 1483015720, "answer_id": 41380063, "question_id": 41363874, "link": "https://stackoverflow.com/questions/41363874/calling-c-dll-from-c-is-ok-under-windows-7-but-fails-under-windows-10/41380063#41380063", "title": "Calling C++ DLL from C# is ok under Windows 7 but fails under Windows 10", "body": "<p>I updated the code as below :</p>\n\n<pre><code>int DLL_EXPORT SomeFunction()\n{\n    return 5;\n}\n</code></pre>\n\n<p>It was working. So called unmanaged dll from c# is ok.</p>\n\n<p>After, I search about the cout, I found in stackoverflow some topic related to usage of cout in unmanaged dll called from c# ...</p>\n\n<p>So after I changed again the function to the following :</p>\n\n<pre><code>void DLL_EXPORT SomeFunction(const LPCSTR sometext)\n{\n    MessageBoxA(0, sometext, \"DLL Message\", MB_OK | MB_ICONINFORMATION);\n}\n</code></pre>\n\n<p>The error happens again !</p>\n\n<p>Then I decided after some advice while triyng to solve this problem to build the DLL with Visual Studio C++ (instead of TDM-GCC-64).</p>\n\n<p>After building the DLL with MS C++ and running the test under Win10: It's working :-)</p>\n\n<p>The std::cout is OK\nThe messageBox is OK\nThere is no more : Exception from HRESULT : 0x8007045A</p>\n\n<p>Thanks a lot to people who answered.</p>\n"}], "owner": {"reputation": 11, "user_id": 7348992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/723ec7e28fcccb677e2d3be88c46965c?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier", "link": "https://stackoverflow.com/users/7348992/olivier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1362, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1483015720, "creation_date": 1482934531, "last_edit_date": 1482952979, "question_id": 41363874, "link": "https://stackoverflow.com/questions/41363874/calling-c-dll-from-c-is-ok-under-windows-7-but-fails-under-windows-10", "title": "Calling C++ DLL from C# is ok under Windows 7 but fails under Windows 10", "body": "<p>My program calls a C++ DLL from my C# program.</p>\n\n<p>The problem is that the generated executable is running fine undex Windows 7 but not under Windows 10 !?</p>\n\n<p>The steps are listed below:</p>\n\n<p>I compile my C++ DLL using g++ (of TDM-GCC-64) in 64 bits.\nI compile my C# program using Visual studio 15 and target .NET framework 4.5.2 in 64 bits.</p>\n\n<p>The C++ DLL code is :</p>\n\n<h2>main.h</h2>\n\n<pre><code>#ifndef __MAIN_H__\n#define __MAIN_H__\n\n#include &lt;windows.h&gt;\n\n/*  To use this exported function of dll, include this header in your project.  */\n\n#ifdef BUILD_DLL\n    #define DLL_EXPORT __declspec(dllexport)\n#else\n    #define DLL_EXPORT __declspec(dllimport)\n#endif\n\n\n#ifdef __cplusplus\nextern \"C\"\n{\n#endif\n\nvoid DLL_EXPORT SomeFunction(const LPCSTR sometext);\n\n#ifdef __cplusplus\n}\n#endif\n\n#endif // __MAIN_H__\n</code></pre>\n\n<h2>main.cpp</h2>\n\n<pre><code>#include \"main.h\"\n#include &lt;iostream&gt;\n\n// a sample exported function\nvoid DLL_EXPORT SomeFunction(const LPCSTR sometext)\n{\n    std::cout &lt;&lt; \"TEST FROM DLL : \" &lt;&lt; sometext &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>The build command is :\nC:\\TDM-GCC-64\\bin\\g++ -shared -o ..\\TestDllCall\\bin\\x64\\Debug\\myDLL.dll -m64 -g  -D BUILD_DLL  -L. main.cpp</p>\n\n<p>You can notice that the dll is created directly in the target directory of the c# test program (Debug in 64 bits).</p>\n\n<p>The C# main program is:</p>\n\n<h2>Program.cs</h2>\n\n<pre><code>using System;\nusing System.IO;\nusing System.Runtime.InteropServices;\n\nnamespace TestHstLibrary\n{\n    class MainProg\n    {\n        static void Main(string[] args)\n        {\n            ProgramTest ProgramTest = new ProgramTest();\n            ProgramTest.dllCall();\n            Console.ReadKey();\n        }\n    }\n\n    class ProgramTest\n    {\n        [DllImport(\"myDLL.dll\", EntryPoint = \"SomeFunction\")]\n        static extern void SomeFunction(string sometext);\n\n        public ProgramTest() {            \n        }\n\n        public void dllCall()\n        {\n            Console.WriteLine(\"dllCall ... \");            \n            try\n            {\n                SomeFunction(\"Hello !\");\n            } catch (Exception e)\n            {\n                Console.WriteLine(\"EXCEPTION : \" + e.Message);\n                Console.WriteLine(e.ToString());\n            }\n            Console.WriteLine(\"\");\n        }        \n    }\n}\n</code></pre>\n\n<p>Note : The build is done on the final target plateform : Win10 64bits.</p>\n\n<p>Running on my Windows 10, I have the following :</p>\n\n<blockquote>\n  <p>dllCall ...<br>\n  EXCEPTION : Unable to load DLL 'myDLL.dll': A dynamic link library (DLL) initialization routine failed. (Exception from HRESULT : 0x8007045A)\n  System.DllNotFoundException: Unable to load DLL 'myDLL.dll': A dynamic link library (DLL) initialization routine failed. (Exception de HRESULT : 0x8007045A)\n     \u00e0 ProgramTest.SomeFunction(String sometext)\n     \u00e0 ProgramTest.dllCall() dans C:\\TestDllCall\\TestDllCall\\Program.cs:ligne 30</p>\n</blockquote>\n\n<p>After a copy of the entire build directory from Win10 to a Win7,\nrunning it on my Win7, I have the following :</p>\n\n<blockquote>\n  <p>dllCall ... <br>\n  TEST FROM DLL : Hello !</p>\n</blockquote>\n\n<p>It's working fine.</p>\n\n<p>If someone has an idea why it fails under Win10 and not under Win7, I will be pleased to have the answer.</p>\n\n<p>I check with dependency walker and had the following:\n- Under Windows 10, some dependencies are missing even if it has been generated under Win10\n- Under Windows 7, all dependencies are ok.</p>\n\n<p>So I try with an other c++ compiler from g++ of TDM-GCC-64, I tested with the one from cygwin : does not give a better result, even worse.</p>\n\n<p>I also try to pass my c# string parameter as a IntPtr as shown below:</p>\n\n<pre><code>IntPtr myptr = Marshal.StringToHGlobalAnsi(\"Hello !\");\nSomeFunction(myptr);\n</code></pre>\n\n<p>But it does not work either under Win10 but still working under Win7.</p>\n\n<p>An other test was to remove the std::cout form my dll, finally the call is ok but I still want to make it work as this is in a test environment and in a production environment I will have to make it with an external dll which I don't have the source code.</p>\n"}, {"tags": ["c++", "pointers", "object"], "comments": [{"owner": {"reputation": 634, "user_id": 3735245, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a92a967d5a1f2efe4fba36f81ef5b536?s=128&d=identicon&r=PG&f=1", "display_name": "Rorschach", "link": "https://stackoverflow.com/users/3735245/rorschach"}, "edited": false, "score": 1, "creation_date": 1482932706, "post_id": 41363359, "comment_id": 69927936, "body": "Why can&#39;t you just <code>ptr = &amp;obj1;</code> ?"}], "answers": [{"tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": true, "score": 6, "last_activity_date": 1482932722, "creation_date": 1482932722, "answer_id": 41363401, "question_id": 41363359, "link": "https://stackoverflow.com/questions/41363359/change-pointer-addres-to-another-object/41363401#41363401", "title": "Change pointer addres to another object", "body": "<p>Make the pointer a <code>Base</code> pointer:</p>\n\n<pre><code>class Base {\n    // ...\n}\n\nclass Derived1 : public Base {\n    // ...\n}\n\n\nclass Derived2 : public Base {\n    // ...\n}\n\nBase* bp = new Derived1();\n    // ... delete or store Derived1 object\nbp = new Derived2();\n</code></pre>\n\n<p>obviously raw pointers are used for simplicity, use smart pointers in your code.</p>\n"}], "owner": {"reputation": 555, "user_id": 6086513, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AanY1.jpg?s=128&g=1", "display_name": "haxscramper", "link": "https://stackoverflow.com/users/6086513/haxscramper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 41363401, "answer_count": 1, "score": 0, "last_activity_date": 1482936809, "creation_date": 1482932576, "last_edit_date": 1482936809, "question_id": 41363359, "link": "https://stackoverflow.com/questions/41363359/change-pointer-addres-to-another-object", "title": "Change pointer addres to another object", "body": "<p>I have two instances of two different classes which are derived from the same abstract base class. And I have a pointer to one of these instances. How can I use the same pointer to point on another instance?</p>\n"}, {"tags": ["c++", "winapi", "deviceiocontrol", "reparsepoint"], "comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1482930757, "post_id": 41362801, "comment_id": 69926867, "body": "are so hard say at which concrete line you got invalid access to memory ? you not try run your code under debugger first, more wrote more info about error ?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1482931115, "post_id": 41362801, "comment_id": 69927062, "body": "Unrelated to your issue (which you didn&#39;t explain in enough detail anyway), <code>&quot;C:\\\\Documents and Settings&quot;</code> is a bug waiting to happen. This certainly won&#39;t run on a localized version of Windows, or any recent (NT based) version of Windows. See <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb776911.aspx\" rel=\"nofollow noreferrer\">Known Folders</a> for solutions."}, {"owner": {"reputation": 456, "user_id": 7311969, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/hIOk2.png?s=128&g=1", "display_name": "Angelica", "link": "https://stackoverflow.com/users/7311969/angelica"}, "edited": false, "score": 0, "creation_date": 1482931796, "post_id": 41362801, "comment_id": 69927429, "body": "in which portion does invalid access to memory happens. have you check the <b>GetLastError</b> code"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 456, "user_id": 7311969, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/hIOk2.png?s=128&g=1", "display_name": "Angelica", "link": "https://stackoverflow.com/users/7311969/angelica"}, "edited": false, "score": 0, "creation_date": 1482932438, "post_id": 41362801, "comment_id": 69927771, "body": "@Angelica: When code triggers an access violation, <code>GetLastError</code> will not return anything useful."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1482932458, "post_id": 41362801, "comment_id": 69927777, "body": "@IInspectable - the second code snippet obvious is <i>test code</i> on OP system only, but not release code. in this kind of <i>test code</i> absolute normal <i>hardcode</i> any concrete paths for test"}, {"owner": {"reputation": 456, "user_id": 7311969, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/hIOk2.png?s=128&g=1", "display_name": "Angelica", "link": "https://stackoverflow.com/users/7311969/angelica"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1482933907, "post_id": 41362801, "comment_id": 69928608, "body": "<a href=\"http://blog.kalmbach-software.de/2008/02/28/howto-correctly-read-reparse-data-in-vista/\" rel=\"nofollow noreferrer\">blog.kalmbach-software.de/2008/02/28/&hellip;</a> ,code executes when fixed path is specified.  problem would be in folder enumeration logic plus other errors as stated by @RbMm"}], "answers": [{"tags": [], "owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "is_accepted": true, "score": 5, "last_activity_date": 1482932121, "creation_date": 1482932121, "answer_id": 41363239, "question_id": 41362801, "link": "https://stackoverflow.com/questions/41362801/deviceiocontrol-invalid-access-to-memory-location/41363239#41363239", "title": "DeviceIoControl Invalid access to memory location", "body": "<p>your code containing 2 errors how minimum</p>\n\n<p>you unconditionally call <code>FSCTL_GET_REPARSE_POINT</code> for all files, but you must do this only </p>\n\n<pre><code>if (FD.dwFileAttributes &amp; FILE_ATTRIBUTE_REPARSE_POINT) {..}\n</code></pre>\n\n<p>otherwise you got <code>ERROR_NOT_A_REPARSE_POINT</code> in <code>DeviceIoControl</code> and then <code>ErrorExit(\"DeviceIoControl\");</code> executed.</p>\n\n<p>and second error at this line:</p>\n\n<pre><code>DeviceIoControl(hFile, FSCTL_GET_REPARSE_POINT, NULL, 0, &amp;rdata, dwBufSize, &amp;bytesReturned, NULL)\n</code></pre>\n\n<p><code>&amp;rdata</code> - !!</p>\n\n<p>when must be</p>\n\n<pre><code>DeviceIoControl(hFile, FSCTL_GET_REPARSE_POINT, NULL, 0, rdata, dwBufSize, &amp;bytesReturned, NULL)\n</code></pre>\n"}], "owner": {"reputation": 1487, "user_id": 2511361, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/bABfJ.jpg?s=128&g=1", "display_name": "Venkatesh", "link": "https://stackoverflow.com/users/2511361/venkatesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 471, "favorite_count": 0, "accepted_answer_id": 41363239, "answer_count": 1, "score": 1, "last_activity_date": 1482932121, "creation_date": 1482930533, "question_id": 41362801, "link": "https://stackoverflow.com/questions/41362801/deviceiocontrol-invalid-access-to-memory-location", "title": "DeviceIoControl Invalid access to memory location", "body": "<p>I am getting invalid access to memory location when I run the following code</p>\n\n<pre><code>WIN32_FIND_DATAW FD;\nWCHAR cPath[MAX_PATH], cFindPath[MAX_PATH];\n\nif (!GetCurrentDirectoryW(MAX_PATH, cPath))\n    ErrorExit(\"GetCurrentDirectory\");\nelse\n    printf(\"Current Path: %s\\n\", cPath);\n\nStringCchCopyW(cFindPath, MAX_PATH, cPath);\nStringCchCatW(cFindPath, MAX_PATH, L\"\\\\*\");\n\nBOOL bsuccess;\n\nHANDLE hFind = FindFirstFileW(cFindPath, &amp;FD);\n\nif (INVALID_HANDLE_VALUE != hFind)\n{\n    vector&lt;wstring&gt; links;\n    do\n    {\n        WCHAR  fullFileName[MAX_PATH];\n        StringCchPrintfW(fullFileName, MAX_PATH, L\"\\\\\\\\?\\\\%s\\\\%s\", cPath, FD.cFileName);\n\n        DWORD dwBufSize = MAXIMUM_REPARSE_DATA_BUFFER_SIZE;\n        REPARSE_DATA_BUFFER* rdata;\n        rdata = (REPARSE_DATA_BUFFER*)malloc(dwBufSize);\n\n        DWORD bytesReturned;\n        HANDLE hFile = CreateFileW(fullFileName, GENERIC_READ, FILE_SHARE_READ | FILE_SHARE_WRITE | FILE_SHARE_DELETE, NULL, OPEN_EXISTING, FILE_FLAG_OPEN_REPARSE_POINT | FILE_FLAG_BACKUP_SEMANTICS, NULL);\n        if (INVALID_HANDLE_VALUE != hFile)\n        {\n            if (DeviceIoControl(hFile, FSCTL_GET_REPARSE_POINT, NULL, 0, &amp;rdata, dwBufSize, &amp;bytesReturned, NULL))\n            {\n                if (IsReparseTagMicrosoft(rdata-&gt;ReparseTag))\n                {\n\n                    if (rdata-&gt;ReparseTag == IO_REPARSE_TAG_SYMLINK)\n                    {\n                        printf(\"Symbolic-Link\\n\");\n                        size_t slen = rdata-&gt;SymbolicLinkReparseBuffer.SubstituteNameLength / sizeof(WCHAR);\n                        WCHAR *szSubName = new WCHAR[slen + 1];\n                        wcsncpy_s(szSubName, slen + 1, &amp;rdata-&gt;SymbolicLinkReparseBuffer.PathBuffer[rdata-&gt;SymbolicLinkReparseBuffer.SubstituteNameOffset / sizeof(WCHAR)], slen);\n                        szSubName[slen] = 0;\n                        printf(\"SubstitutionName (len: %d): '%S'\\n\", rdata-&gt;SymbolicLinkReparseBuffer.SubstituteNameLength, szSubName);\n                        delete[] szSubName;\n\n                        size_t plen = rdata-&gt;SymbolicLinkReparseBuffer.PrintNameLength / sizeof(WCHAR);\n                        WCHAR *szPrintName = new WCHAR[plen + 1];\n                        wcsncpy_s(szPrintName, plen + 1, &amp;rdata-&gt;SymbolicLinkReparseBuffer.PathBuffer[rdata-&gt;SymbolicLinkReparseBuffer.PrintNameOffset / sizeof(WCHAR)], plen);\n                        szPrintName[plen] = 0;\n                        printf(\"PrintName (len: %d): '%S'\\n\", rdata-&gt;SymbolicLinkReparseBuffer.PrintNameLength, szPrintName);\n                        delete[] szPrintName;\n                    }\n                    else if (rdata-&gt;ReparseTag == IO_REPARSE_TAG_MOUNT_POINT)\n                    {\n                        printf(\"Mount-Point\\n\");\n                        size_t slen = rdata-&gt;MountPointReparseBuffer.SubstituteNameLength / sizeof(WCHAR);\n                        WCHAR *szSubName = new WCHAR[slen + 1];\n                        wcsncpy_s(szSubName, slen + 1, &amp;rdata-&gt;MountPointReparseBuffer.PathBuffer[rdata-&gt;MountPointReparseBuffer.SubstituteNameOffset / sizeof(WCHAR)], slen);\n                        szSubName[slen] = 0;\n                        printf(\"SubstitutionName (len: %d): '%S'\\n\", rdata-&gt;MountPointReparseBuffer.SubstituteNameLength, szSubName);\n                        delete[] szSubName;\n\n                        size_t plen = rdata-&gt;MountPointReparseBuffer.PrintNameLength / sizeof(WCHAR);\n                        WCHAR *szPrintName = new WCHAR[plen + 1];\n                        wcsncpy_s(szPrintName, plen + 1, &amp;rdata-&gt;MountPointReparseBuffer.PathBuffer[rdata-&gt;MountPointReparseBuffer.PrintNameOffset / sizeof(WCHAR)], plen);\n                        szPrintName[plen] = 0;\n                        printf(\"PrintName (len: %d): '%S'\\n\", rdata-&gt;MountPointReparseBuffer.PrintNameLength, szPrintName);\n                        delete[] szPrintName;\n                    }\n                    else\n                    {\n                        printf(\"No Mount-Point or Symblic-Link...\\n\");\n                    }\n                }\n                else\n                {\n                    printf(\"Not a Microsoft-reparse point - could not query data!\\n\");\n                }\n                free(rdata);\n            }\n            else\n                ErrorExit(\"DeviceIoControl\");\n        }\n\n        CloseHandle(hFile);\n\n\n    } while (FindNextFileW(hFind, &amp;FD));\n}\nelse\n    ErrorExit(\"FindFirstFile\");\n</code></pre>\n\n<p>but the following code works fine.</p>\n\n<pre><code>HANDLE hFile;\nLPCTSTR szMyFile = (\"C:\\\\Documents and Settings\");  // Mount-Point (JUNCTION)\n//LPCTSTR szMyFile = _T(\"C:\\\\Users\\\\All Users\");  // Symbolic-Link (SYMLINKD)\n\nhFile = CreateFile(szMyFile, FILE_READ_EA, FILE_SHARE_READ | FILE_SHARE_WRITE | FILE_SHARE_DELETE, NULL, OPEN_EXISTING, FILE_FLAG_BACKUP_SEMANTICS | FILE_FLAG_OPEN_REPARSE_POINT, NULL);\nif (hFile == INVALID_HANDLE_VALUE)\n{\n    printf((\"Could not open dir '%s'; error: %d\\n\"), szMyFile, GetLastError());\n    return;\n}\n\n// Allocate the reparse data structure\nDWORD dwBufSize = MAXIMUM_REPARSE_DATA_BUFFER_SIZE;\nREPARSE_DATA_BUFFER* rdata;\nrdata = (REPARSE_DATA_BUFFER*)malloc(dwBufSize);\n\n// Query the reparse data\nDWORD dwRetLen;\nBOOL bRet = DeviceIoControl(hFile, FSCTL_GET_REPARSE_POINT, NULL, 0, rdata, dwBufSize, &amp;dwRetLen, NULL);\nif (bRet == FALSE)\n{\n    printf((\"DeviceIoControl failed with error: %d\\n\"), GetLastError());\n    CloseHandle(hFile);\n    return;\n}\nCloseHandle(hFile);\n\nif (IsReparseTagMicrosoft(rdata-&gt;ReparseTag))\n{\n    if (rdata-&gt;ReparseTag == IO_REPARSE_TAG_SYMLINK)\n    {\n        printf(\"Symbolic-Link\\n\");\n        size_t slen = rdata-&gt;SymbolicLinkReparseBuffer.SubstituteNameLength / sizeof(WCHAR);\n        WCHAR *szSubName = new WCHAR[slen + 1];\n        wcsncpy_s(szSubName, slen + 1, &amp;rdata-&gt;SymbolicLinkReparseBuffer.PathBuffer[rdata-&gt;SymbolicLinkReparseBuffer.SubstituteNameOffset / sizeof(WCHAR)], slen);\n        szSubName[slen] = 0;\n        printf(\"SubstitutionName (len: %d): '%S'\\n\", rdata-&gt;SymbolicLinkReparseBuffer.SubstituteNameLength, szSubName);\n        delete[] szSubName;\n\n        size_t plen = rdata-&gt;SymbolicLinkReparseBuffer.PrintNameLength / sizeof(WCHAR);\n        WCHAR *szPrintName = new WCHAR[plen + 1];\n        wcsncpy_s(szPrintName, plen + 1, &amp;rdata-&gt;SymbolicLinkReparseBuffer.PathBuffer[rdata-&gt;SymbolicLinkReparseBuffer.PrintNameOffset / sizeof(WCHAR)], plen);\n        szPrintName[plen] = 0;\n        printf(\"PrintName (len: %d): '%S'\\n\", rdata-&gt;SymbolicLinkReparseBuffer.PrintNameLength, szPrintName);\n        delete[] szPrintName;\n    }\n    else if (rdata-&gt;ReparseTag == IO_REPARSE_TAG_MOUNT_POINT)\n    {\n        printf(\"Mount-Point\\n\");\n        size_t slen = rdata-&gt;MountPointReparseBuffer.SubstituteNameLength / sizeof(WCHAR);\n        WCHAR *szSubName = new WCHAR[slen + 1];\n        wcsncpy_s(szSubName, slen + 1, &amp;rdata-&gt;MountPointReparseBuffer.PathBuffer[rdata-&gt;MountPointReparseBuffer.SubstituteNameOffset / sizeof(WCHAR)], slen);\n        szSubName[slen] = 0;\n        printf(\"SubstitutionName (len: %d): '%S'\\n\", rdata-&gt;MountPointReparseBuffer.SubstituteNameLength, szSubName);\n        delete[] szSubName;\n\n        size_t plen = rdata-&gt;MountPointReparseBuffer.PrintNameLength / sizeof(WCHAR);\n        WCHAR *szPrintName = new WCHAR[plen + 1];\n        wcsncpy_s(szPrintName, plen + 1, &amp;rdata-&gt;MountPointReparseBuffer.PathBuffer[rdata-&gt;MountPointReparseBuffer.PrintNameOffset / sizeof(WCHAR)], plen);\n        szPrintName[plen] = 0;\n        printf(\"PrintName (len: %d): '%S'\\n\", rdata-&gt;MountPointReparseBuffer.PrintNameLength, szPrintName);\n        delete[] szPrintName;\n    }\n    else\n    {\n        printf(\"No Mount-Point or Symblic-Link...\\n\");\n    }\n}\nelse\n{\n    printf((\"Not a Microsoft-reparse point - could not query data!\\n\"));\n}\nfree(rdata);\n</code></pre>\n\n<p>I am trying to get the reparse data for the files in a given folder. This is my <code>REPARSE_DATA_BUFFER</code></p>\n\n<pre><code>typedef struct _REPARSE_DATA_BUFFER {\nULONG  ReparseTag;\nUSHORT  ReparseDataLength;\nUSHORT  Reserved;\nunion {\n    struct {\n        USHORT  SubstituteNameOffset;\n        USHORT  SubstituteNameLength;\n        USHORT  PrintNameOffset;\n        USHORT  PrintNameLength;\n        ULONG   Flags; // it seems that the docu is missing this entry (at least 2008-03-07)\n        WCHAR  PathBuffer[1];\n    } SymbolicLinkReparseBuffer;\n    struct {\n        USHORT  SubstituteNameOffset;\n        USHORT  SubstituteNameLength;\n        USHORT  PrintNameOffset;\n        USHORT  PrintNameLength;\n        WCHAR  PathBuffer[1];\n    } MountPointReparseBuffer;\n    struct {\n        UCHAR  DataBuffer[1];\n    } GenericReparseBuffer;\n};\n} REPARSE_DATA_BUFFER, *PREPARSE_DATA_BUFFER;\n</code></pre>\n\n<p>I Dont know where I went wrong. Please help me fix my first code.</p>\n"}, {"tags": ["c++", "move"], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1482935702, "post_id": 41362854, "comment_id": 69929609, "body": "This answer does not take into account the two important nuances of this code, which is that the evaluation of those function calls is <i>sequenced</i>, and that it is not the <code>std::move</code> that does the moving (otherwise you <i>would</i> potentially have a problem). As such, it&#39;s not really an answer to the question."}], "tags": [], "owner": {"reputation": 316, "user_id": 5821508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64c8b0f5dc6ef102147bd22c0d7d3da0?s=128&d=identicon&r=PG&f=1", "display_name": "user5821508", "link": "https://stackoverflow.com/users/5821508/user5821508"}, "is_accepted": false, "score": 2, "last_activity_date": 1482930733, "creation_date": 1482930733, "answer_id": 41362854, "question_id": 41362756, "link": "https://stackoverflow.com/questions/41362756/guarantee-of-copying-before-moving/41362854#41362854", "title": "Guarantee of copying before moving", "body": "<p>expression can be rewrited as:</p>\n\n<pre><code>hashmap.operator[](some_struct.key).operator=(std::move(some_struct));\n</code></pre>\n\n<p>so first call will be <code>operator[]</code> and than <code>operator=</code></p>\n"}, {"tags": [], "owner": {"reputation": 27522, "user_id": 6394138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/u64Lc.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6394138/leon"}, "is_accepted": true, "score": 4, "last_activity_date": 1482930784, "creation_date": 1482930784, "answer_id": 41362865, "question_id": 41362756, "link": "https://stackoverflow.com/questions/41362756/guarantee-of-copying-before-moving/41362865#41362865", "title": "Guarantee of copying before moving", "body": "<blockquote>\n  <p>Is there a guarantee that <code>some_struct.key</code> will be got as a key for hashmap\n  before moving some_struct?</p>\n</blockquote>\n\n<p>Yes.</p>\n\n<p><code>std::move()</code> doesn't actually move. It is more like a cast from an lvalue-reference to an rvalue-reference. The actual move (if any<sup>1</sup>) happens during assignment proper, which is sequenced after evaluating the left-hand side of the assignment operator.</p>\n\n<p><sup>1</sup> The move will happen if the the assignment resolves to a move assignment or a copy assignment that receives its argument by value and utilizes the move-constructor.</p>\n"}], "owner": {"reputation": 7392, "user_id": 1555823, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2b69fc6d16ff23e3509b2f3602838acd?s=128&d=identicon&r=PG", "display_name": "vladon", "link": "https://stackoverflow.com/users/1555823/vladon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 41362865, "answer_count": 2, "score": 1, "last_activity_date": 1482930784, "creation_date": 1482930337, "question_id": 41362756, "link": "https://stackoverflow.com/questions/41362756/guarantee-of-copying-before-moving", "title": "Guarantee of copying before moving", "body": "<p>For given sample code:</p>\n\n<pre><code>struct some_struct_t {\n    std::string key;\n    // other fields;\n}\n\nstd::unordered_map&lt;std::string, TSomeStruct&gt; hashmap;\n\nsome_struct_t some_struct;\n// filling some_struct\n\nhashmap[some_struct.key] = std::move(some_struct);\n</code></pre>\n\n<p>Is there a guarantee that <code>some_struct.key</code> will be got as a key for <code>hashmap</code> <em>before</em> moving <code>some_struct</code> into <code>hashmap</code>?</p>\n"}, {"tags": ["c++", "templates", "inheritance", "factory-pattern"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482930151, "post_id": 41362580, "comment_id": 69926509, "body": "Why do you need that? Sounds like a XY-problem for me."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 2, "creation_date": 1482930618, "post_id": 41362580, "comment_id": 69926786, "body": "What should it do with multiple inheritance ?"}, {"owner": {"reputation": 553, "user_id": 3270721, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/c218e2d30f8148da6c6cb8e28c28d6a9?s=128&d=identicon&r=PG&f=1", "display_name": "abdolahS", "link": "https://stackoverflow.com/users/3270721/abdolahs"}, "edited": false, "score": 0, "creation_date": 1482931090, "post_id": 41362580, "comment_id": 69927044, "body": "I&#39;ve a factory class (based on abstract factory design pattern) which when creates objects checks for a property in it or it&#39;s parents, and then upon it (value of the property) creates the object. so I want to know what is the type of it and what is the type of it&#39;s parents."}], "answers": [{"comments": [{"owner": {"reputation": 553, "user_id": 3270721, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/c218e2d30f8148da6c6cb8e28c28d6a9?s=128&d=identicon&r=PG&f=1", "display_name": "abdolahS", "link": "https://stackoverflow.com/users/3270721/abdolahs"}, "edited": false, "score": 0, "creation_date": 1482931896, "post_id": 41362795, "comment_id": 69927466, "body": "thanks but it seems that it&#39;s not a good design for projects with many modules and classes!"}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 553, "user_id": 3270721, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/c218e2d30f8148da6c6cb8e28c28d6a9?s=128&d=identicon&r=PG&f=1", "display_name": "abdolahS", "link": "https://stackoverflow.com/users/3270721/abdolahs"}, "edited": false, "score": 1, "creation_date": 1482931938, "post_id": 41362795, "comment_id": 69927488, "body": "@abdolahS That&#39;s the reason of my comments after the code."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1482935630, "post_id": 41362795, "comment_id": 69929568, "body": "Creating custom traits seems more idiomatic: <code>template &lt;&gt; struct base_of&lt;C&gt; { using type = B;};</code> even if more verbose..."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1482935891, "post_id": 41362795, "comment_id": 69929708, "body": "@Jarod42 It makes sense. Can I integrate the answer with your example or you want to create another answer for that?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1482941814, "post_id": 41362795, "comment_id": 69933054, "body": "Feel free to enrich your answer."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1482943070, "post_id": 41362795, "comment_id": 69933704, "body": "@Jarod42 Thanks. Done with mention."}], "tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": false, "score": 0, "last_activity_date": 1482942941, "last_edit_date": 1482942941, "creation_date": 1482930513, "answer_id": 41362795, "question_id": 41362580, "link": "https://stackoverflow.com/questions/41362580/get-parent-of-type-t-in-a-template-function/41362795#41362795", "title": "Get parent of type T in a template function", "body": "<p>You can use a couple of functions declarations that you don't have to define.<br>\nIt follows a minimal, working example:</p>\n\n<pre><code>#include&lt;utility&gt;\n#include&lt;typeinfo&gt;\n#include&lt;iostream&gt;\n\nclass A{};\nclass B: public A{};\nclass C: public B{};\n\nB base_of(const C &amp;);\nA base_of(const B &amp;);\n\ntemplate&lt;typename T&gt;\nvoid getBaseHashCode() {\n    std::cout &lt;&lt; typeid(decltype(base_of(std::declval&lt;T&gt;()))).name() &lt;&lt; std::endl;\n}\n\nint main() {\n    getBaseHashCode&lt;B&gt;();\n    getBaseHashCode&lt;C&gt;();\n}\n</code></pre>\n\n<p>It exploits the fact that, in this case, you have exact matches during the invokations. It's quite weak a solution, but works with the example code in the question.</p>\n\n<hr>\n\n<p>That said, I agree on the fact that the whole question looks like an XY-problem.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>As mentioned by @Jarod42 in the comments, a more idiomatic (and verbose) way would be by using traits.<br>\nIt follows a minimal, working example:</p>\n\n<pre><code>#include&lt;typeinfo&gt;\n#include&lt;iostream&gt;\n\nclass A{};\nclass B: public A{};\nclass C: public B{};\n\ntemplate&lt;typename&gt; struct base_of;\ntemplate&lt;&gt; struct base_of&lt;B&gt; { using type = A; };\ntemplate&lt;&gt; struct base_of&lt;C&gt; { using type = B; };\n\ntemplate&lt;typename T&gt;\nvoid getBaseHashCode() {\n    std::cout &lt;&lt; typeid(typename base_of&lt;T&gt;::type).name() &lt;&lt; std::endl;\n}\n\nint main() {\n    getBaseHashCode&lt;B&gt;();\n    getBaseHashCode&lt;C&gt;();\n}\n</code></pre>\n\n<p>This will solve also the problem due to multiple inheritance. The designer of <code>base_of</code> specializations will be in charge to promote one of the base classes to the role of <em>preferred one</em>.</p>\n"}, {"tags": [], "owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "is_accepted": false, "score": 1, "last_activity_date": 1482937521, "creation_date": 1482937521, "answer_id": 41364651, "question_id": 41362580, "link": "https://stackoverflow.com/questions/41362580/get-parent-of-type-t-in-a-template-function/41364651#41364651", "title": "Get parent of type T in a template function", "body": "<p>You might also consider using some parent wrappers to automatize <code>typedef</code>ing:</p>\n\n<pre><code>#include &lt;type_traits&gt;\n#include &lt;typeinfo&gt;\n#include &lt;iostream&gt;\n\ntemplate &lt;class P&gt;\nstruct base: P {\n    using base_type = P;\n};\n\nstruct A{ };\nstruct B: base&lt;A&gt;{ };\nstruct C: base&lt;B&gt;{ };\n\ntemplate &lt;class T&gt;\nauto base_of(T) -&gt; typename T::base_type;\n\ntemplate &lt;class T&gt;\nusing base_of_t = decltype(base_of(std::declval&lt;T&gt;()));\n\nint main() {\n    std::cout &lt;&lt; typeid(base_of_t&lt;C&gt;).name() &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>1B</p>\n</blockquote>\n\n<p>Output of <code>c++filt -t 1B</code>:</p>\n\n<blockquote>\n  <p>B</p>\n</blockquote>\n\n<p><a href=\"http://melpon.org/wandbox/permlink/tOkQYJGHneIP379e\" rel=\"nofollow noreferrer\">[live demo]</a></p>\n\n<p><strong>Note</strong> it still does not deal with multiple inheritance</p>\n"}], "owner": {"reputation": 553, "user_id": 3270721, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/c218e2d30f8148da6c6cb8e28c28d6a9?s=128&d=identicon&r=PG&f=1", "display_name": "abdolahS", "link": "https://stackoverflow.com/users/3270721/abdolahs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 699, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1482942941, "creation_date": 1482929676, "last_edit_date": 1482931842, "question_id": 41362580, "link": "https://stackoverflow.com/questions/41362580/get-parent-of-type-t-in-a-template-function", "title": "Get parent of type T in a template function", "body": "<p>I want to find out what is the parent of the type class T in a template function, suppose I've the following classes:</p>\n\n<pre><code>class A{\n...\n}\n\nclass B: public A{\n...\n}\n\nclass C: public B{\n...\n}\n\n\ntemplate&lt;typename T&gt;\nsize_t getBaseHashCode()\n{\n  return typeid(base_of(T)).hashcode();\n}\n\nint main()\n{\n  A a;\n  C c;\n  size_t size = getBaseHashCode&lt;C&gt;();// must return hashcode of class B\n}\n</code></pre>\n\n<p>is there anyway to find parent of type T and implement base_of function?</p>\n\n<p>Edit:\nindeed what I want to do is:</p>\n\n<p>I've factory class which creates objects for me:</p>\n\n<pre><code>template &lt;typename B&gt;\nclass Factory{\npublic:\n    template &lt;typename D&gt;\n    void registerType(std::string name)\n    {\n        static_assert(std::is_base_of&lt;B, D&gt;::value, \"class doesn't derive from the base\");\n        table_[name] = &amp;createFunc&lt;D&gt;;\n    }\n    B* create(std::string name)\n    {\n        const auto it = table_.find(name);\n        if(it != table_.end())\n            return it-&gt;second();\n        FILE_LOG(logERROR) &lt;&lt; \"unidentified option, acceptable options are:\";\n        for(auto const &amp;m : list())\n            FILE_LOG(logERROR) &lt;&lt; '\\t' &lt;&lt; m;\n        return nullptr;\n    }\n\n    std::vector&lt;std::string&gt; list()\n    {\n        std::vector&lt;std::string&gt; lst;\n        for(auto const &amp;iter : table_)\n            lst.push_back(iter.first);\n        return lst;\n    }\nprivate:\n    template&lt;typename D&gt;\n    static B* createFunc()\n    {\n        return new D();\n    }\n    typedef B* (*PCreateFunc)();\n    std::map&lt;std::string, PCreateFunc&gt; table_;\n};\n</code></pre>\n\n<p>in the registerType function I want to set some properties of type D or it's parent and then in the create function, I want to create objects based on that. </p>\n"}, {"tags": ["c++", "templates", "overloading", "instantiation", "explicit"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 1, "creation_date": 1482944799, "post_id": 41362565, "comment_id": 69934574, "body": "Oh... <code>_f</code> is an old-style non-template variadic function. The <code>...</code> doesn&#39;t just represent something you left out for brevity, it&#39;s actually that particular feature of C++. Yeah, then my answer indeed wouldn&#39;t work, so I deleted it."}, {"owner": {"reputation": 35, "user_id": 1603776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48286df618229fd06c09ccb73e2823b7?s=128&d=identicon&r=PG", "display_name": "J. Smith", "link": "https://stackoverflow.com/users/1603776/j-smith"}, "edited": false, "score": 0, "creation_date": 1482946997, "post_id": 41362565, "comment_id": 69935604, "body": "Thanks anyway. It seems I was not too precise."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1482966051, "post_id": 41362565, "comment_id": 69943502, "body": "@hvd I got your answer and reworked it a bit using traits. Maybe it works now."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 1603776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48286df618229fd06c09ccb73e2823b7?s=128&d=identicon&r=PG", "display_name": "J. Smith", "link": "https://stackoverflow.com/users/1603776/j-smith"}, "edited": false, "score": 0, "creation_date": 1482943950, "post_id": 41362798, "comment_id": 69934166, "body": "Thanks, it is definitely the possible solution."}], "tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": false, "score": 1, "last_activity_date": 1482930529, "last_edit_date": 1495540914, "creation_date": 1482930529, "answer_id": 41362798, "question_id": 41362565, "link": "https://stackoverflow.com/questions/41362565/explicit-template-instantiation-for-variadic-templates/41362798#41362798", "title": "Explicit template instantiation for variadic templates", "body": "<p>Well, <a href=\"https://stackoverflow.com/a/41362708/3233393\">hvd</a> is spot-on. What you want really is SFINAE. But I had already gone off to implement it with Boost.PP, sooo...</p>\n\n<pre><code>#include &lt;boost/preprocessor/seq/for_each_i.hpp&gt;\n#include &lt;boost/preprocessor/comma_if.hpp&gt;\n\n#define DECL_PARAM(r, data, i, elem) \\\n    BOOST_PP_COMMA_IF(i) elem _ ## i\n\n#define FWD_PARAM(r, data, i, elem) \\\n    BOOST_PP_COMMA_IF(i) _ ## i\n\n#define DEF_FN_WRAPPER(name, delegate, params) \\\n    void name(BOOST_PP_SEQ_FOR_EACH_I(DECL_PARAM, ~, params)) { \\\n        delegate(BOOST_PP_SEQ_FOR_EACH_I(FWD_PARAM, ~, params)); \\\n    }\n</code></pre>\n\n<p>Expands to:</p>\n\n<pre><code>void f( int _0 , double _1 , std::string _2 ) { _f( _0 , _1 , _2 ); }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": true, "score": 2, "last_activity_date": 1482967237, "last_edit_date": 1482967237, "creation_date": 1482965837, "answer_id": 41370893, "question_id": 41362565, "link": "https://stackoverflow.com/questions/41362565/explicit-template-instantiation-for-variadic-templates/41370893#41370893", "title": "Explicit template instantiation for variadic templates", "body": "<p>You can use traits to define accepted lists of parameters based on their types.<br>\nIt follows a minimal, working example:</p>\n\n<pre><code>void _f(int, ...) {}\n\ntemplate&lt;typename...&gt; struct accepts;\ntemplate&lt;&gt; struct accepts&lt;int, double, char&gt; {};\ntemplate&lt;&gt; struct accepts&lt;int, char, int&gt; {};\n\ntemplate &lt;class... T&gt;\nauto f(T... args) -&gt; decltype(accepts&lt;T...&gt;{}, void()) {\n    _f(args...);\n}\n\nint main() {\n    f(0, 0., 'c');\n    f(0, 'c', 0);\n    // f(0, 0, 0);\n}\n</code></pre>\n\n<p>The last invokation will give you a compile time error for <code>&lt;int, int, int&gt;</code> isn't a valid specialization of struct <code>accepts</code>.<br>\nThis is because the primary template isn't defined and you can control the accepted lists by introducing more and more specializations if needed.</p>\n\n<hr>\n\n<p>Here is a slightly different solution based on <code>std::true_type</code>, <code>std::false_type</code> and <code>static_assert</code>:</p>\n\n<pre><code>#include&lt;type_traits&gt;\n\nvoid _f(int, ...) {}\n\ntemplate&lt;typename...&gt; struct accepts: std::false_type {};\ntemplate&lt;&gt; struct accepts&lt;int, double, char&gt;: std::true_type {};\ntemplate&lt;&gt; struct accepts&lt;int, char, int&gt;: std::true_type {};\n\ntemplate &lt;class... T&gt;\nvoid f(T... args) {\n    static_assert(accepts&lt;T...&gt;::value, \"!\");\n    _f(args...);\n}\n\nint main() {\n    f(0, 0., 'c');\n    f(0, 'c', 0);\n    // f(0, 0, 0);\n}\n</code></pre>\n\n<p>Advantages are:</p>\n\n<ul>\n<li>a more meaningful error message at compile-time (well, if you replace <code>\"!\"</code> with something meaningful)</li>\n<li>the possibility to explicitly disable a list of parameters by inheriting from <code>std::false_type</code> and document it at the same time if needed</li>\n</ul>\n\n<p>The disadvantage is that it's a bit more verbose.</p>\n"}], "owner": {"reputation": 35, "user_id": 1603776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48286df618229fd06c09ccb73e2823b7?s=128&d=identicon&r=PG", "display_name": "J. Smith", "link": "https://stackoverflow.com/users/1603776/j-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 661, "favorite_count": 0, "accepted_answer_id": 41370893, "answer_count": 2, "score": 1, "last_activity_date": 1482967237, "creation_date": 1482929634, "last_edit_date": 1482966846, "question_id": 41362565, "link": "https://stackoverflow.com/questions/41362565/explicit-template-instantiation-for-variadic-templates", "title": "Explicit template instantiation for variadic templates", "body": "<p>Let's say we have a wrapping template function (or member function) like this:</p>\n\n<pre><code>template &lt;class... T&gt; void f(T... args) {\n    _f(args...);\n}\nvoid _f(int a1, ...); // variadic old style function\n</code></pre>\n\n<p>Where the function <code>_f</code> (defined in a third-party library that we cannot modify) accepts several combinations of parameter types and it would be desirable to limit possible parameters at wrap level.<br>\nIf we have hundreds of such functions with different possible parameter types it would be too bulky to manually define the overloaded functions with named arguments. It would be better to define such functions using simple macro with lists of possible types. Boost's macros that allows to iterate argument's lists to construct named arguments looks too heavy.<br>\nIs there an elegant way to limit possible arguments at declaration level?</p>\n"}, {"tags": ["c++", "c++builder-xe8"], "comments": [{"owner": {"reputation": 14859, "user_id": 109919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a962134d39b25609dac6b12fc745b3da?s=128&d=identicon&r=PG", "display_name": "Sheng Jiang \u848b\u665f", "link": "https://stackoverflow.com/users/109919/sheng-jiang-%e8%92%8b%e6%99%9f"}, "edited": false, "score": 1, "creation_date": 1482940717, "post_id": 41362486, "comment_id": 69932449, "body": "did you add Urlmon.lib to linker options?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1482942010, "post_id": 41362486, "comment_id": 69933160, "body": "Also, <code>URLDownloadToFileW</code> does not return a string, it returns an <code>HRESULT</code> which is a number. You need to drop the quotes in your <code>if</code> statement: <code>if (result != S_OK)</code>"}, {"owner": {"reputation": 3, "user_id": 7297846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84a79f07ea46890d2fd599c596140631?s=128&d=identicon&r=PG&f=1", "display_name": "Domicioli", "link": "https://stackoverflow.com/users/7297846/domicioli"}, "edited": false, "score": 0, "creation_date": 1482943079, "post_id": 41362486, "comment_id": 69933708, "body": "No, I didn&#39;t. Do I have to download it from somewhere? I&#39;m using RAD Studio XE8, I was assuming it was already there...x.x"}, {"owner": {"reputation": 3, "user_id": 7297846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84a79f07ea46890d2fd599c596140631?s=128&d=identicon&r=PG&f=1", "display_name": "Domicioli", "link": "https://stackoverflow.com/users/7297846/domicioli"}, "reply_to_user": {"reputation": 14859, "user_id": 109919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a962134d39b25609dac6b12fc745b3da?s=128&d=identicon&r=PG", "display_name": "Sheng Jiang \u848b\u665f", "link": "https://stackoverflow.com/users/109919/sheng-jiang-%e8%92%8b%e6%99%9f"}, "edited": false, "score": 0, "creation_date": 1482943146, "post_id": 41362486, "comment_id": 69933734, "body": "@ShengJiang\u848b\u665f Tagging xD"}, {"owner": {"reputation": 3, "user_id": 7297846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84a79f07ea46890d2fd599c596140631?s=128&d=identicon&r=PG&f=1", "display_name": "Domicioli", "link": "https://stackoverflow.com/users/7297846/domicioli"}, "edited": false, "score": 0, "creation_date": 1482945706, "post_id": 41362486, "comment_id": 69935013, "body": "I just double checked it, urlmon.h is a valid Lib in RAD Studio XE8. However it is behaving like there is no urlmon.h in it..."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7297846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84a79f07ea46890d2fd599c596140631?s=128&d=identicon&r=PG&f=1", "display_name": "Domicioli", "link": "https://stackoverflow.com/users/7297846/domicioli"}, "edited": false, "score": 0, "creation_date": 1483036949, "post_id": 41374117, "comment_id": 69973048, "body": "If I use #pragma, is the sintax: &quot;#pragma comment(urlmon.lib)&quot; right?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 3, "user_id": 7297846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84a79f07ea46890d2fd599c596140631?s=128&d=identicon&r=PG&f=1", "display_name": "Domicioli", "link": "https://stackoverflow.com/users/7297846/domicioli"}, "edited": false, "score": 0, "creation_date": 1483038818, "post_id": 41374117, "comment_id": 69973920, "body": "@Domicioli close, it is actually <code>#pragma comment(lib, &quot;urlmon.lib&quot;)</code>"}, {"owner": {"reputation": 3, "user_id": 7297846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84a79f07ea46890d2fd599c596140631?s=128&d=identicon&r=PG&f=1", "display_name": "Domicioli", "link": "https://stackoverflow.com/users/7297846/domicioli"}, "edited": false, "score": 0, "creation_date": 1483039462, "post_id": 41374117, "comment_id": 69974204, "body": "Just used : #pragma comment(lib, C:\\Program Files (x86)\\Embarcadero\\Studio\\16.0\\lib\\win32\\release\\psdk\\urlmon.&zwnj;&#8203;lib) but nothing changed :/"}, {"owner": {"reputation": 3, "user_id": 7297846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84a79f07ea46890d2fd599c596140631?s=128&d=identicon&r=PG&f=1", "display_name": "Domicioli", "link": "https://stackoverflow.com/users/7297846/domicioli"}, "edited": false, "score": 0, "creation_date": 1483039503, "post_id": 41374117, "comment_id": 69974219, "body": "The quotes! ops"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 3, "user_id": 7297846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84a79f07ea46890d2fd599c596140631?s=128&d=identicon&r=PG&f=1", "display_name": "Domicioli", "link": "https://stackoverflow.com/users/7297846/domicioli"}, "edited": false, "score": 0, "creation_date": 1483040516, "post_id": 41374117, "comment_id": 69974654, "body": "@Domicioli you don&#39;t need to specify the full path since the <code>psdk</code> folder should be in the IDE&#39;s library path."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 0, "last_activity_date": 1483038839, "last_edit_date": 1483038839, "creation_date": 1482992031, "answer_id": 41374117, "question_id": 41362486, "link": "https://stackoverflow.com/questions/41362486/error-trying-to-use-urldownloadfilew/41374117#41374117", "title": "Error trying to use URLDownloadFileW", "body": "<p><code>urlmon.h</code> is needed for the <strong>compiler</strong> to compile your code.  The compiler creates a reference to the <code>URLDownloadToFileW</code> function, but doesn't care where the function exists.  That is the <strong>linker's</strong> job to figure out.</p>\n\n<p><code>urlmon.lib</code> is needed for the <strong>linker</strong> to resolve the compiler's reference to the <code>URLDownloadToFileW</code> function.</p>\n\n<p>RAD Studio has both files, in the <code>$(BDS)\\include\\win32\\sdk</code> and <code>$(BDS)\\lib\\win32\\release</code> folders, respectively.</p>\n\n<p>You need to do both:</p>\n\n<ol>\n<li><p>add an <code>#include &lt;urlmon.h&gt;</code> statement in the code.</p></li>\n<li><p>link to the <code>urlmon.lib</code> file, by either adding the file to the project, or by referencing it in a <code>#pragma comment(lib, \"urlmon.lib\")</code> statement in the code.</p></li>\n</ol>\n\n<p>You are missing step #2, which is why you are getting a <strong>linker</strong> error.</p>\n"}], "owner": {"reputation": 3, "user_id": 7297846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84a79f07ea46890d2fd599c596140631?s=128&d=identicon&r=PG&f=1", "display_name": "Domicioli", "link": "https://stackoverflow.com/users/7297846/domicioli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 375, "favorite_count": 1, "accepted_answer_id": 41374117, "answer_count": 1, "score": 0, "last_activity_date": 1483038839, "creation_date": 1482929272, "last_edit_date": 1482929888, "question_id": 41362486, "link": "https://stackoverflow.com/questions/41362486/error-trying-to-use-urldownloadfilew", "title": "Error trying to use URLDownloadFileW", "body": "<p>I'm trying to download a zip file from a link using the URLDownloadFileW function. The part of the code that I've developed by now with this function is:</p>\n\n<pre><code>UnicodeString URL = \"URL.EX\";\nUnicodeString dir = \"C:\\\";\nUnicodeString result = URLDownloadToFileW(NULL,URL.c_str(),dir.c_str(),0,NULL);\nif (result != \"S_OK\")\n    return;\n</code></pre>\n\n<p>And I have declared the Urlmon.h on the header, however, when I build the project it returns me: <br><br>\n[ilink32 Error] Error: Unresolved external 'URLDownloadToFileW' referenced from C:\\USERS\\ADMINISTRADOR\\DESKTOP\\SD MANUTEN\u00c7\u00c3O\\WIN32\\DEBUG\\SDSUPER449.OBJ<br>\n[ilink32 Error] Error: Unable to perform link<br><br>\nI'm not finding any usable search result about it. Does someone have any idea what does it mean?</p>\n"}, {"tags": ["c++", "winapi"], "answers": [{"comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1482943253, "post_id": 41362844, "comment_id": 69933794, "body": "to be prepared WM_NCDESTROY being the final message - need simply not call member function from static wrapper after <code>WM_NCDESTROY</code> , but however if unconditionally call <code>delete this</code> in <code>myWindowProc</code> - may be unsafe, because myWindowProc can be called recursively - as result we can be inside <code>myWindowProc</code> after <code>this</code> already deleted. i describe concrete variants how this can happens"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1482943976, "post_id": 41362844, "comment_id": 69934179, "body": "@RbMm: <i>&quot;The question is whether the given code snippet is safe as it is currently.&quot;</i> The given code sample doesn&#39;t lead to recursive calls."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1482944769, "post_id": 41362844, "comment_id": 69934559, "body": "question was - &quot;Is it safe to deallocate one self on WM_NCDESTROY&quot; - and in general case no. situation when WindowProc called recursive (indirect of course) very common. and the current code only for clarity - you not think that real <code>MyWindowProc</code> containing only <code>WM_NCDESTOY</code> handler and nothing do more ?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1482945237, "post_id": 41362844, "comment_id": 69934806, "body": "@RbMm: I&#39;m not going to read the question for you again. Can we stop this now? You provided your answer. That should be sufficient to make your point. No need to bother me."}], "tags": [], "owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "is_accepted": true, "score": 4, "last_activity_date": 1482930696, "creation_date": 1482930696, "answer_id": 41362844, "question_id": 41362469, "link": "https://stackoverflow.com/questions/41362469/is-it-safe-to-deallocate-oneself-on-wm-ncdestroy/41362844#41362844", "title": "Is it safe to deallocate oneself on WM_NCDESTROY?", "body": "<p>It is not explicitly documented, that <code>WM_NCDESTROY</code> is the final message a window receives. If you read in between the lines, you can deduce this information, though.</p>\n\n<p>The documentation for <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms632636.aspx\" rel=\"nofollow noreferrer\">WM_NCDESTROY</a> contains the following remark:</p>\n\n<blockquote>\n  <p>This message frees any memory internally allocated for the window.</p>\n</blockquote>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms632599.aspx#destruction\" rel=\"nofollow noreferrer\">Window Features: Window Destruction</a> outlines the consequences of this:</p>\n\n<blockquote>\n  <p>When a window is destroyed, the system [...] removes any internal data associated with the window. <strong>This invalidates the window handle</strong>, which can no longer be used by the application.</p>\n</blockquote>\n\n<p>Putting those together, destroying a window invalidates its window handle. Once the <code>WM_NCDESTROY</code> message handler has run to completion, the window handle is no longer valid. An invalid window handle no longer receives any messages.</p>\n\n<p>Your implementation is thus safe.</p>\n\n<p>It is doubtful that any of these rules will change in the future (with so many applications relying on <code>WM_NCDESTROY</code> being the final message), but if you want to be prepared, you might want to consider placing a <code>windowPtr = nullptr;</code> statement following <code>delete windowPtr;</code>. Doing so ensures, that your application fails in a predictable way, in case it receives a message after the <code>MyWindow</code> instance has been disposed.</p>\n"}, {"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1482931417, "post_id": 41362996, "comment_id": 69927231, "body": "<i>&quot;it must be only window of that wndclass&quot;</i> - <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms632599.aspx#destruction\" rel=\"nofollow noreferrer\">No</a>: <i>&quot;Destroying a window does not affect the window class from which the window is created. New windows can still be created using that class, and any existing windows of that class continue to operate.&quot;</i>"}, {"owner": {"reputation": 44, "user_id": 7033511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7f0b678fa362b8e02d05a9c2e3bf58?s=128&d=identicon&r=PG&f=1", "display_name": "\u0412\u044f\u0447\u0435\u0441\u043b\u0430\u0432", "link": "https://stackoverflow.com/users/7033511/%d0%92%d1%8f%d1%87%d0%b5%d1%81%d0%bb%d0%b0%d0%b2"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1482931949, "post_id": 41362996, "comment_id": 69927498, "body": "If there are more than one windows of this wndclass in the same time, then destroying one of them will delete the only windowPtr, and any window message after that will cause exception"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1482934478, "post_id": 41362996, "comment_id": 69928960, "body": "This is a corollary of the C++ class instance pointer being (presumably) a global resource, and doesn&#39;t pertain to whether or not it is safe to delete the C++ class instance in a <code>WM_NCDESTROY</code> handler. Besides, dereferencing a dangling pointer will not raise an exception. The behavior is undefined, and it might raise an exception, although that is very unlikely to happen here."}, {"owner": {"reputation": 249, "user_id": 7277003, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e4d86d399ff2cca8ff66f6cac10b3ad4?s=128&d=identicon&r=PG&f=1", "display_name": "SampleTime", "link": "https://stackoverflow.com/users/7277003/sampletime"}, "edited": false, "score": 0, "creation_date": 1482938664, "post_id": 41362996, "comment_id": 69931322, "body": "So in Wine it might happen that WM_NCDESTROY isn&#39;t the very last message (why would that happen)?   I can of course null the pointer after destruction and add a check whether windowPtr is non zero before calling  windowPtr-&gt;myWindowProc. But what should the function do/return in that case?"}], "tags": [], "owner": {"reputation": 44, "user_id": 7033511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7f0b678fa362b8e02d05a9c2e3bf58?s=128&d=identicon&r=PG&f=1", "display_name": "\u0412\u044f\u0447\u0435\u0441\u043b\u0430\u0432", "link": "https://stackoverflow.com/users/7033511/%d0%92%d1%8f%d1%87%d0%b5%d1%81%d0%bb%d0%b0%d0%b2"}, "is_accepted": false, "score": 0, "last_activity_date": 1482931277, "creation_date": 1482931277, "answer_id": 41362996, "question_id": 41362469, "link": "https://stackoverflow.com/questions/41362469/is-it-safe-to-deallocate-oneself-on-wm-ncdestroy/41362996#41362996", "title": "Is it safe to deallocate oneself on WM_NCDESTROY?", "body": "<p>Yes. Self deallocate is safe in WM_NCDESTROY.\nBut just to be sure your program will not fail under Wine, for example, I'd recommend to set windowPtr to null after delete, and check it before call windowPtr->myWindowProc.\nAnd, ofcause, it must be only window of that wndclass.</p>\n"}, {"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1482944124, "post_id": 41365964, "comment_id": 69934253, "body": "<code>GWLP_USERDATA</code> is generally the wrong place to store window-private data. It is accessible to everyone, and everyone <b>is</b> abusing it. Better solutions are <i>cbWndExtra</i> (in case you registered the class), or calling <code>SetProp</code> if you didn&#39;t register the window class."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1482944534, "post_id": 41365964, "comment_id": 69934459, "body": "@IInspectable - SetProp also &quot;accessible to everyone&quot;, but task not in this -what you mean at all under &quot;accessible to everyone&quot; ? so what ? you assume some malicious code in your process ? I think that <code>GWLP_USERDATA</code> the best place for store class pointer"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1482945027, "post_id": 41365964, "comment_id": 69934698, "body": "With <code>SetProp</code> you have to know the name. That makes it private. And no, I do not mean malicious code. I mean code, that tries to be good (like yours), but then gets it wrong by writing to memory that&#39;s not owned by the caller. <code>GWLP_USERDATA</code> belongs to whoever called <code>RegisterClass</code>. It&#39;s not clear from your code, whether that is the case or not. And if you <b>did</b> call <code>RegisterClass</code>, why don&#39;t you allocate private <i>cbWndExtra</i> memory, that is a lot less likely to be tampered with, because other code cannot rely on it being there (in contrast to <code>GWLP_USERDATA</code>)?"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1482945172, "post_id": 41365964, "comment_id": 69934774, "body": "@IInspectable - GWLP_USERDATA - is per window not per class. different windows of same class can have different data for GWLP_USERDATA . so you comment is wrong. &quot;GWLP_USERDATA belongs to whoever called RegisterClass&quot; - absolute not true"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1482945342, "post_id": 41365964, "comment_id": 69934848, "body": "You see, that is why <b>you</b> shouldn&#39;t be using it. You clearly do not understand the ownership semantics here. Yes, <code>GWLP_USERDATA</code> is allocated per window instance, but it is allocated for private use by the window procedure registered through the call to <code>RegisterClass</code>. That makes whoever called <code>RegisterClass</code> the owner of the per-window private <code>GWLP_USERDATA</code>."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1482945668, "post_id": 41365964, "comment_id": 69935001, "body": "@IInspectable - <b>GWLP_USERDATA</b> - <i>Sets the user data associated with the window. This data is intended for use by the application that created the window. Its value is initially zero.</i>  we can have multiple windows of the <b>same</b> class with different GWLP_USERDATA for every window"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1483011870, "post_id": 41365964, "comment_id": 69959769, "body": "As I said, <i>&quot;<code>GWLP_USERDATA</code> is allocated per window instance&quot;</i>. I don&#39;t see, how that is in conflict with the documentation. That doesn&#39;t make it yours, though. <a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20050303-00/?p=36293\" rel=\"nofollow noreferrer\">The bonus window bytes at GWLP_USERDATA</a> <i>&quot;belong to the window class and not to the code that creates the window.&quot;</i>"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1483011975, "post_id": 41365964, "comment_id": 69959821, "body": "@IInspectable - you not read comments here :) - &quot;When I wrote that the values &quot;belong to the window class&quot;, I meant that only the window class implementor may read or write the values. Think of them as private members of the window class. Code that calls CreateWindow is a customer of the window class and should not be messing with the window class\u2019s private data without permission&quot;"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1483012129, "post_id": 41365964, "comment_id": 69959896, "body": "Not sure, what point you are trying to make here. That comment tells you, that the code you suggested in this proposed answer is likely wrong. It fumbles with data that it doesn&#39;t own. Both the blog entry and this comment by Raymond Chen <b>clearly</b> illustrate, who <code>GWLP_USERDATA</code> belongs to. You are just having difficulty comprehending."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1483012189, "post_id": 41365964, "comment_id": 69959930, "body": "@IInspectable - sorry me for bad english. may be i not understand you. are you try to say next - if i create 2 windows (hwnd) of <b>same</b> windows class - i can not set <b>different</b> <code>GWLP_USERDATA </code> for <b>different</b> hwnds ?"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1483012288, "post_id": 41365964, "comment_id": 69959970, "body": "@IInspectable - and if you can view my code I get/set <code>GWLP_USERDATA</code>  in class function ! <code>myWindowProcWrapper</code> - again here all <b>absolute</b> correct from any view"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1483012335, "post_id": 41365964, "comment_id": 69959991, "body": "No, I&#39;m saying exactly, what the blog entry says: The caller of <code>CreateWindow</code> does not own the data. The caller of <code>RegisterClass</code> does. This does not imply, that <code>GWLP_USERDATA</code> is allocated per class. It is allocated per window, but it <b>belongs</b> to the class, and only the window procedure registered by the window class is allowed to modify it."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1483012442, "post_id": 41365964, "comment_id": 69960046, "body": "@IInspectable- &quot;but it belongs to the class, and only the window procedure registered by the window class is allowed to modify it.&quot; - <b>YES</b> but I and do exactly this !!! in <code>myWindowProcWrapper</code>"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1483012625, "post_id": 41365964, "comment_id": 69960143, "body": "@IInspectable - myWindowProcWrapper - is windows procedure, registered with class (<code>wc.lpfnWndProc = MyWindow::myWindowProcWrapper;</code>) and only in this func I access <code>GWLP_USERDATA</code>."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1483013043, "post_id": 41365964, "comment_id": 69960393, "body": "As I said, this is not clear from the code you posted. For all we know, it could be a subclassed window procedure. If you do register the window class, the safer alternative is to allocate <i>cbWndExtra</i> memory to store the C++ class instance pointer. This memory belongs to the window class as well, but it isn&#39;t abused by external code that doesn&#39;t own it."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1483013294, "post_id": 41365964, "comment_id": 69960544, "body": "@IInspectable - I even could not have imagined that <code>GWLP_USERDATA</code> create such discussion. however I say that use <code>GWLP_USERDATA</code> for own class or standard windows controls - <i>the best</i> way to bind data pointer with window. not need use any <code>cbWndExtra</code> - for why ?? when <code>GWLP_USERDATA</code> always exist and free for as"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1483013552, "post_id": 41365964, "comment_id": 69960706, "body": "Just as I thought that you finally learned, that <code>GWLP_USERDATA</code> belongs to the window class, you turn around and suggest to abuse a standard Windows control&#39;s <b>private</b> data. No, <code>GWLP_USERDATA</code> of a button control <b>does not belong to you</b>. You must not use it. It belongs to the window class. If you need to store data with a window of a window class you did not register, you have to settle for <code>SetProp</code>."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1483013600, "post_id": 41365964, "comment_id": 69960739, "body": "@IInspectable - you mistake. we can use GWLP_USERDATA  for standard windows controls - like button,edit, etc"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1483014762, "post_id": 41365964, "comment_id": 69961342, "body": "Exactly. You can use it, although it doesn&#39;t belong to you. And since you and many others wouldn&#39;t know, or even consider, that you are treading foreign territory,  you cannot safely use <code>GWLP_USERDATA</code>. What would happen, if a Button control decided to use it for its own implementation? What if two applications tried to pull that stunt? <code>GWLP_USERDATA</code> is pretty much useless these days, because of hordes of developers sharing your mindset. That, and <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms644898.aspx\" rel=\"nofollow noreferrer\">misleading documentation</a>."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1483015136, "post_id": 41365964, "comment_id": 69961542, "body": "@IInspectable - yes, when use <code>GWLP_USERDATA</code> for not own class exist problem of who is <b>owner</b> of this data here. in case windows controls - can assume that this is who create control. others really must use another way for subclass. for <b>self</b> registered class - we can <b>absolute safe</b> use <code>GWLP_USERDATA</code> - and here is this case. however we digress from OP question - are safe <code>delete this</code> on <code>WM_NCDESTROY</code> - I point that can be problems here, if not use reference count"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1483016129, "post_id": 41365964, "comment_id": 69962061, "body": "<i>&quot;in case windows controls - can assume that this is who create control.&quot;</i> - That assumption is unfounded and unsafe. Don&#39;t assume anything, when you know the answer already. <code>GWLP_USERDATA</code> belongs to the control implementation, not you. And since you (and many others) would readily violate ownership rules, using <code>GWLP_USERDATA</code> for classes you registered becomes unsafe just as well. It&#39;s hard to follow your line of reasoning, where you believe that everyone must honor ownership for your classes, while you are free to violate everyone else&#39;s property."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1483016228, "post_id": 41365964, "comment_id": 69962115, "body": "In other words: <b>You</b> are part of the problem, why using <code>GWLP_USERDATA</code> has become unsafe, so don&#39;t act as though it were. It isn&#39;t, and I provided two alternatives already, that <b>are</b> safe. And this is not off-topic either. You offered code that cannot be made safe, which I pointed out. It&#39;s hard to understand, why you aren&#39;t going with one of the alternatives."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1483016991, "post_id": 41365964, "comment_id": 69962554, "body": "@IInspectable - again - I use <code>GWLP_USERDATA</code> for <b>my own class</b> - this is absolute safe and the best way here. about windows controls - this is separate discussion. but how about OP initial question ? <code>delete this</code> on WM_NCDESTROY inconditionally"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1483017161, "post_id": 41365964, "comment_id": 69962632, "body": "i always use <code>GWLP_USERDATA</code> for own class, for other (not mine) windows subclassing i usually use &quot;ATL style&quot; stub window proc, where stored pointer to class and jump to real WindowProc. so only WNPROC need overwrite. and about third-party controls I nothing say - here of course we can not use USERDATA"}], "tags": [], "owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "is_accepted": false, "score": 1, "last_activity_date": 1482942789, "last_edit_date": 1482942789, "creation_date": 1482942204, "answer_id": 41365964, "question_id": 41362469, "link": "https://stackoverflow.com/questions/41362469/is-it-safe-to-deallocate-oneself-on-wm-ncdestroy/41365964#41365964", "title": "Is it safe to deallocate oneself on WM_NCDESTROY?", "body": "<p>yes, <code>WM_NCDESTROY</code> is the last message sended to <code>WindowProc</code> (how minimum now). </p>\n\n<p>but direct, unconditionally call <code>delete this</code> in <code>myWindowProc</code> can be unsafe in complex case and produce very bad error (because hard to found)</p>\n\n<p>you not take to account that <code>myWindowProc</code> can be called recursively. </p>\n\n<p>let us first consider a simple version:</p>\n\n<pre><code>    case WM_KEYDOWN:\n        if (wParam == VK_ESCAPE)\n        {\n            DestroyWindow(hwnd);\n        }\n</code></pre>\n\n<p>so we destroy window on <code>ESCAPE</code> pressed. in this case <code>myWindowProc</code> will be called recursively with <code>WM_NCDESTROY</code> where we <code>delete this</code> and then we return to up level <code>myWindowProc</code> (for <code>WM_KEYDOWN</code> ). but at this point <code>this</code> already destroyed and invalid. so we must not more access any members fields or virtual functions. good if we call direct <code>DefWindowProc</code> in the end of own <code>WindowProc</code>. but what be if say our class implement and call <code>virtual LRESULT DefWinProc(..)</code> for allow overwrite <code>DefWindowProc</code> behaviour ? (say to <code>DefMDIChildProc</code> ) ?</p>\n\n<p>now more complex case - assume you implement some child control. based on <code>WM_SOMETHING_1</code> you set <code>WM_NOTIFY_SOMETHING_1</code> to parent (via <code>SendMessage</code> ). and parent decide call <code>DestrowWindow</code> when handle this notify (for self, and as result for all childs). so internally your call <code>delete this</code> and when you return from <code>SendMessage(..WM_NOTIFY_SOMETHING_1..)</code> your <code>this</code> already will be deleted, but you will not even know about this.</p>\n\n<p>access <code>this</code> after it will be deleted real in complex windows case, and if we modify some member data - can be not direct crash(which is good for detection) but heap corruption, which will manifest itself later and this is very hard to detect.</p>\n\n<p>however for this exist 100% correct solution, which will be work even if <code>WM_NCDESTROY</code> will be not final message for window.</p>\n\n<p>we must not use global <code>MyWindow *windowPtr</code> but assign it to window data via <code>GWLP_USERDATA</code> and remove on <code>WM_NCDESTROY</code> . and call <code>myWindowProc</code> only when <code>GetWindowLongPtr(hwnd, GWLP_USERDATA)</code> return not 0 . in this case even if will some WM_* message after <code>WM_NCDESTROY</code> - static <code>myWindowProcWrapper</code> not call <code>myWindowProc</code> and we must use reference counting for MyWindow class :</p>\n\n<ol>\n<li>call <code>AddRef();</code> before <code>SetWindowLongPtrW(hwnd, GWLP_USERDATA,(LONG_PTR)windowPtr);</code></li>\n<li>call <code>Release();</code> after <code>SetWindowLongPtrW(hwnd, GWLP_USERDATA, 0);</code></li>\n<li>wrap <code>windowPtr-&gt;myWindowProc(hwnd, msg, wParam, lParam)</code> in\n<code>AddRef(); Release();</code></li>\n<li>call <code>delete this</code> only from <code>Release</code> and make <code>~MyWindow()</code>\n<code>private:</code></li>\n</ol>\n\n<p>with this rules we can absolute safe access this pointer in <code>myWindowProc</code> at any time and any situation. and not dependening about <code>WM_NCDESTROY</code> is the last message</p>\n\n<pre><code>struct MyWindow\n{\nprivate:\n    PSTR _somedata;\n    LONG _dwRef;\n\npublic:\n\n    MyWindow() : _dwRef(1), _somedata(0)\n    {\n    }\n\n    void AddRef()\n    {\n        InterlockedIncrement(&amp;_dwRef);\n    }\n\n    void Release()\n    {\n        if (!InterlockedDecrement(&amp;_dwRef)) delete this;\n    }\n\n    static LRESULT CALLBACK myWindowProcWrapper(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam)\n    {\n        MyWindow *windowPtr;\n\n        if (msg == WM_NCCREATE)\n        {\n            windowPtr = (MyWindow *)((LPCREATESTRUCT)lParam)-&gt;lpCreateParams;\n\n            windowPtr-&gt;AddRef();\n            SetWindowLongPtrW(hwnd, GWLP_USERDATA, (LONG_PTR)windowPtr);\n        }\n        else\n        {\n            windowPtr = (MyWindow *)GetWindowLongPtr(hwnd, GWLP_USERDATA);\n        }\n\n        LRESULT lr;\n\n        if (windowPtr)\n        {\n            windowPtr-&gt;AddRef();\n            lr = windowPtr-&gt;myWindowProc(hwnd, msg, wParam, lParam);\n            windowPtr-&gt;Release();\n        }\n        else\n        {\n            lr = DefWindowProc(hwnd, msg, wParam, lParam);\n        }\n\n        if (msg == WM_NCDESTROY &amp;&amp; windowPtr)\n        {\n            SetWindowLongPtrW(hwnd, GWLP_USERDATA, 0);\n            windowPtr-&gt;Release();\n        }\n\n        return lr;\n    }\n\nprotected:\n\n    LRESULT CALLBACK myWindowProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam)\n    {\n        switch (msg)\n        {\n        case WM_NCDESTROY:\n            PostQuitMessage(0);\n            break;\n\n        case WM_KEYDOWN:\n            if (wParam == VK_ESCAPE)\n            {\n                DestroyWindow(hwnd);\n                DbgPrint(\"%s\\n\", _somedata);// bug can be here if not use ref semantic\n            }\n            break;\n\n        case WM_CREATE:\n            if (_somedata = new CHAR[64])\n            {\n                strcpy(_somedata, \"1234567890\");\n            }\n            break;\n        }\n        // bug can be here if not use ref semantic, because myDefWinProc virtual\n        return myDefWinProc(hwnd, msg, wParam, lParam);\n        //return DefWindowProc(hwnd, uMsg, wParam, lParam);\n    }\n\n    // for demo only here, not need in simply case\n    virtual LRESULT myDefWinProc(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam)\n    {\n        return DefWindowProc(hwnd, uMsg, wParam, lParam);\n    }\n\nprivate:\n\n    ~MyWindow()\n    {\n        if (_somedata) delete _somedata;\n    }\n};\n\n\n    if (MyWindow* p = new MyWindow)\n    {\n        CreateWindowEx(0, L\"lpszClassName\", L\"lpWindowName\", WS_OVERLAPPEDWINDOW|WS_VISIBLE,\n            CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, HWND_DESKTOP, 0, 0, p);\n        p-&gt;Release();\n    }\n</code></pre>\n"}], "owner": {"reputation": 249, "user_id": 7277003, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e4d86d399ff2cca8ff66f6cac10b3ad4?s=128&d=identicon&r=PG&f=1", "display_name": "SampleTime", "link": "https://stackoverflow.com/users/7277003/sampletime"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 673, "favorite_count": 0, "accepted_answer_id": 41362844, "answer_count": 3, "score": 3, "last_activity_date": 1482944684, "creation_date": 1482929204, "last_edit_date": 1482944684, "question_id": 41362469, "link": "https://stackoverflow.com/questions/41362469/is-it-safe-to-deallocate-oneself-on-wm-ncdestroy", "title": "Is it safe to deallocate oneself on WM_NCDESTROY?", "body": "<p>Consider the following code snippet:</p>\n\n<pre><code>// MyWindow.h\nstruct MyWindow\n{\n    LRESULT CALLBACK myWindowProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam);\n    static LRESULT CALLBACK myWindowProcWrapper(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam);\n};\nextern MyWindow *windowPtr; // windowPtr is initialized on startup using raw new\n\n// MyWindow.cpp\nMyWindow *windowPtr = 0;\n\nLRESULT CALLBACK MyWindow::myWindowProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam)\n{\n    switch (msg)\n    {\n    case WM_NCDESTROY:\n        delete windowPtr;\n        break;\n    }\n    return DefWindowProc(hwnd, msg, wParam, lParam);\n}\n\nLRESULT CALLBACK MyWindow::myWindowProcWrapper(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam)\n{\n    return windowPtr-&gt;myWindowProc(hwnd, msg, wParam, lParam);\n}\n</code></pre>\n\n<p>The question is whether the given code snippet is safe as written.</p>\n\n<p>Basically, <code>MyWindow</code> is the class for a window created with the WinAPI. I need to do some final cleanup when the window is destroyed.</p>\n\n<p>Notice that the instance of <code>MyWindow</code>, <code>windowPtr</code>, is created using a raw <code>new</code>. I have to delete the instance somewhere in a member function, so I delete the reference to the object itself from within a member function.</p>\n\n<p>The code relies on the assumption that <code>WM_NCDESTROY</code> is the last message ever received by that window.</p>\n\n<p>So the questions are as follows:</p>\n\n<ul>\n<li>Is it safe to assume that <code>WM_NCDESTROY</code> is always the last message a window receives and to perform final cleanup there?</li>\n<li>Is the listed code safe? If not, under what conditions could it break?</li>\n</ul>\n\n<p><em>Remark: I'm only interested in whether the code is technically safe, not if it is good practice to use a raw new and/or global variables. I have some good reasons for this implementation.</em></p>\n"}, {"tags": ["c++", "string", "windows", "class", "codeblocks"], "comments": [{"owner": {"reputation": 792, "user_id": 2780612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yCzhW.jpg?s=128&g=1", "display_name": "nikau6", "link": "https://stackoverflow.com/users/2780612/nikau6"}, "edited": false, "score": 1, "creation_date": 1483290622, "post_id": 41362431, "comment_id": 70039149, "body": "I&#39;m very surprised your code compiles. It shouldn&#39;t ! Are you sure to understand what it means to compile a code ?"}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 0, "creation_date": 1483293068, "post_id": 41362431, "comment_id": 70039881, "body": "The code you have posted does not compile. There is no class or function named <code>std::mystring</code>."}, {"owner": {"reputation": 792, "user_id": 2780612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yCzhW.jpg?s=128&g=1", "display_name": "nikau6", "link": "https://stackoverflow.com/users/2780612/nikau6"}, "edited": false, "score": 0, "creation_date": 1483296010, "post_id": 41362431, "comment_id": 70040761, "body": "So after the answers below, does your code works now ?"}], "answers": [{"comments": [{"owner": {"reputation": 217, "user_id": 6914091, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oxGhU.jpg?s=128&g=1", "display_name": "Forat", "link": "https://stackoverflow.com/users/6914091/forat"}, "edited": false, "score": 2, "creation_date": 1483291632, "post_id": 41417130, "comment_id": 70039462, "body": "I thought it wasn&#39;t recommended to add <code>using namespace std</code> as it will add all the code in the std namespace into the global space of my code. Anyways before <code>std::string</code> I did use <code>using namespace std</code> and it have me the same error."}, {"owner": {"reputation": 792, "user_id": 2780612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yCzhW.jpg?s=128&g=1", "display_name": "nikau6", "link": "https://stackoverflow.com/users/2780612/nikau6"}, "reply_to_user": {"reputation": 217, "user_id": 6914091, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oxGhU.jpg?s=128&g=1", "display_name": "Forat", "link": "https://stackoverflow.com/users/6914091/forat"}, "edited": false, "score": 0, "creation_date": 1483293385, "post_id": 41417130, "comment_id": 70039980, "body": "@Adam You&#39;re right. Adding <code>using namespace std;</code> in the global namespace in not a good practice. What you can do is to add <code>using std::string;</code> in the main function."}, {"owner": {"reputation": 217, "user_id": 6914091, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oxGhU.jpg?s=128&g=1", "display_name": "Forat", "link": "https://stackoverflow.com/users/6914091/forat"}, "edited": false, "score": 0, "creation_date": 1483301457, "post_id": 41417130, "comment_id": 70042287, "body": "I did use <code>std::string</code> inside the main, and I still get the same error. Typing <code>using namespace std</code> <code>using std::string</code> or <code>std::string</code> will not change the outcome, as the code compiles without errors, and give the wanted results. It is when I try to debug it that this warning appears."}, {"owner": {"reputation": 792, "user_id": 2780612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yCzhW.jpg?s=128&g=1", "display_name": "nikau6", "link": "https://stackoverflow.com/users/2780612/nikau6"}, "edited": false, "score": 0, "creation_date": 1483304119, "post_id": 41417130, "comment_id": 70043091, "body": "That&#39;s weird. If you compile the EXACT same  code I wrote above, watch at my pseudo to find it, can you debug it ? Perhaps it&#39;s a problem related to the debugger configuration."}, {"owner": {"reputation": 792, "user_id": 2780612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yCzhW.jpg?s=128&g=1", "display_name": "nikau6", "link": "https://stackoverflow.com/users/2780612/nikau6"}, "edited": false, "score": 0, "creation_date": 1483304606, "post_id": 41417130, "comment_id": 70043191, "body": "Did you create a project, or are you compiling and debugging a single file ?  <a href=\"http://wiki.codeblocks.org/index.php/Debugging_with_Code::Blocks\" rel=\"nofollow noreferrer\">Debugging_with_Code::Blocks</a>"}, {"owner": {"reputation": 217, "user_id": 6914091, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oxGhU.jpg?s=128&g=1", "display_name": "Forat", "link": "https://stackoverflow.com/users/6914091/forat"}, "edited": false, "score": 0, "creation_date": 1483341238, "post_id": 41417130, "comment_id": 70050822, "body": "Yes the code does compile, If I build it and run there won&#39;t be an issue, but when I debug and step into the lines of code, it gives me this warning until I &quot;step out&quot; of the string variable.  I think you are right about the debugger configuration. I will look into the link. Thank you for providing it.  I did create a project, <code>Test.cpb</code>, and the file is <code>Test.cpp</code>"}, {"owner": {"reputation": 113, "user_id": 6188472, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/6b1d86bc77c3a2bdca5759d183644a31?s=128&d=identicon&r=PG&f=1", "display_name": "C-PROG", "link": "https://stackoverflow.com/users/6188472/c-prog"}, "reply_to_user": {"reputation": 792, "user_id": 2780612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yCzhW.jpg?s=128&g=1", "display_name": "nikau6", "link": "https://stackoverflow.com/users/2780612/nikau6"}, "edited": false, "score": 0, "creation_date": 1483350805, "post_id": 41417130, "comment_id": 70054497, "body": "@nikau6 He wrote, that he is a beginner, so I though it might be easier for him to learn the basics without writing std:: each time."}, {"owner": {"reputation": 792, "user_id": 2780612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yCzhW.jpg?s=128&g=1", "display_name": "nikau6", "link": "https://stackoverflow.com/users/2780612/nikau6"}, "edited": false, "score": 0, "creation_date": 1483365928, "post_id": 41417130, "comment_id": 70062077, "body": "by the way, Visual c++ is a better IDE than Code Block. No configuration needed. It works out of the box."}, {"owner": {"reputation": 792, "user_id": 2780612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yCzhW.jpg?s=128&g=1", "display_name": "nikau6", "link": "https://stackoverflow.com/users/2780612/nikau6"}, "edited": false, "score": 0, "creation_date": 1483366446, "post_id": 41417130, "comment_id": 70062346, "body": "I will add that, at the first, you said you code compiled. Which is weird. Using std::mystring instead of std::string, it should not have compiled."}, {"owner": {"reputation": 792, "user_id": 2780612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yCzhW.jpg?s=128&g=1", "display_name": "nikau6", "link": "https://stackoverflow.com/users/2780612/nikau6"}, "edited": false, "score": 0, "creation_date": 1483366913, "post_id": 41417130, "comment_id": 70062600, "body": "@io16 You&#39;re right, but it&#39;s better to explain, in the same time, that it&#39;s not good practice."}], "tags": [], "owner": {"reputation": 113, "user_id": 6188472, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/6b1d86bc77c3a2bdca5759d183644a31?s=128&d=identicon&r=PG&f=1", "display_name": "C-PROG", "link": "https://stackoverflow.com/users/6188472/c-prog"}, "is_accepted": false, "score": 0, "last_activity_date": 1483289193, "creation_date": 1483289193, "answer_id": 41417130, "question_id": 41362431, "link": "https://stackoverflow.com/questions/41362431/whats-wrong-with-stdstrings/41417130#41417130", "title": "What&#39;s wrong with std::strings", "body": "<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main ()\n{\n     string mystring = \"Whats wrong with my string\";\n\n     return 0;  \n}\n</code></pre>\n\n<p>If you write it in the following way, it should work.\nIt's safer to define strings like I showed it. It will be also easier for you if you add <code>using namespace std</code> in the beginning of every program if you are new to C++. </p>\n"}, {"comments": [{"owner": {"reputation": 217, "user_id": 6914091, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oxGhU.jpg?s=128&g=1", "display_name": "Forat", "link": "https://stackoverflow.com/users/6914091/forat"}, "edited": false, "score": 0, "creation_date": 1483290974, "post_id": 41417181, "comment_id": 70039269, "body": "I did add it in my program, I just forgot to add it in my post, I will edit it right now"}, {"owner": {"reputation": 792, "user_id": 2780612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yCzhW.jpg?s=128&g=1", "display_name": "nikau6", "link": "https://stackoverflow.com/users/2780612/nikau6"}, "reply_to_user": {"reputation": 217, "user_id": 6914091, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oxGhU.jpg?s=128&g=1", "display_name": "Forat", "link": "https://stackoverflow.com/users/6914091/forat"}, "edited": false, "score": 0, "creation_date": 1483291205, "post_id": 41417181, "comment_id": 70039346, "body": "@Adam The file header <code>iostream </code> is not necessary in your code. <code>iostream</code> is for input and output streams."}], "tags": [], "owner": {"reputation": 792, "user_id": 2780612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yCzhW.jpg?s=128&g=1", "display_name": "nikau6", "link": "https://stackoverflow.com/users/2780612/nikau6"}, "is_accepted": false, "score": 2, "last_activity_date": 1483289580, "creation_date": 1483289580, "answer_id": 41417181, "question_id": 41362431, "link": "https://stackoverflow.com/questions/41362431/whats-wrong-with-stdstrings/41417181#41417181", "title": "What&#39;s wrong with std::strings", "body": "<p>First of all, to use strings you must include the file header <code>string</code>.   And the name of the type string is..<code>std::string</code>, not std::mystring. </p>\n\n<pre><code>#include &lt;string&gt;\n\nint main(int argc, char** argv)\n{\n    std::string mystring(\"Nothing's wrong with strings\"); \n    return 0;  \n}\n</code></pre>\n"}], "owner": {"reputation": 217, "user_id": 6914091, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oxGhU.jpg?s=128&g=1", "display_name": "Forat", "link": "https://stackoverflow.com/users/6914091/forat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 549, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1483301496, "creation_date": 1482929047, "last_edit_date": 1483301496, "question_id": 41362431, "link": "https://stackoverflow.com/questions/41362431/whats-wrong-with-stdstrings", "title": "What&#39;s wrong with std::strings", "body": "<p>Hi I am new to C++ and Code::Block</p>\n\n<p>I am trying to make a simple code to test it, using strings.\nwhen I compile the code there is no problem, but when I try to debug it, Code::Block gives me the following warning:</p>\n\n<blockquote>\n  <p>Cannot open file:\n  File:../../../../../src/gcc-4.9.2/libgcc/unwind-sjlj.c</p>\n  \n  <p>Info: \"Multiple information windows with the same message have been\n  supressed.\"</p>\n</blockquote>\n\n<p>Image of the error FYI:</p>\n\n<p><a href=\"https://i.stack.imgur.com/eRT5h.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eRT5h.jpg\" alt=\"Image of the error FYI\"></a></p>\n\n<p>Part of the code that gives me an error.</p>\n\n<p>inside main function</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\n\nint main ()\n{\n     std::mystring(\"What's wrong with strings\");  \n\n     return 0;  \n}\n</code></pre>\n\n<p>I realise that this error only occurs when I try to debug a string or a file containing a string.</p>\n\n<p>Any help would be appreciated.</p>\n\n<p>some other information that might help:</p>\n\n<blockquote>\n  <p>Code::Block 16.01</p>\n  \n  <p>Compiler MinGW gcc4.9.2</p>\n  \n  <p>Windows 7 Professional 32 bits SP1</p>\n</blockquote>\n"}, {"tags": ["c++", "c++11", "constants"], "comments": [{"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 1, "creation_date": 1482928798, "post_id": 41362289, "comment_id": 69925808, "body": "How would you manage scope/lifetime for the objects?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1482929235, "post_id": 41362289, "comment_id": 69926042, "body": "If this is a sort of pair you use to in a map, making key non-const to begin with is asking for trouble."}], "answers": [{"comments": [{"owner": {"reputation": 5563, "user_id": 3763545, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/242891331073a6961342bd4375c95156?s=128&d=identicon&r=PG&f=1", "display_name": "InsideLoop", "link": "https://stackoverflow.com/users/3763545/insideloop"}, "edited": false, "score": 0, "creation_date": 1482928813, "post_id": 41362355, "comment_id": 69925820, "body": "Thanks, but I don&#39;t want to pay the price of copying elements. And I want to be able to change the value at its original location through the IKeyValue referrence."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 5563, "user_id": 3763545, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/242891331073a6961342bd4375c95156?s=128&d=identicon&r=PG&f=1", "display_name": "InsideLoop", "link": "https://stackoverflow.com/users/3763545/insideloop"}, "edited": false, "score": 0, "creation_date": 1482928866, "post_id": 41362355, "comment_id": 69925853, "body": "@InsideLoop Fixed that."}, {"owner": {"reputation": 5563, "user_id": 3763545, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/242891331073a6961342bd4375c95156?s=128&d=identicon&r=PG&f=1", "display_name": "InsideLoop", "link": "https://stackoverflow.com/users/3763545/insideloop"}, "edited": false, "score": 0, "creation_date": 1482929168, "post_id": 41362355, "comment_id": 69926009, "body": "Thanks for the fix, but it would be better if no pointer/reference is created."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 5563, "user_id": 3763545, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/242891331073a6961342bd4375c95156?s=128&d=identicon&r=PG&f=1", "display_name": "InsideLoop", "link": "https://stackoverflow.com/users/3763545/insideloop"}, "edited": false, "score": 1, "creation_date": 1482929342, "post_id": 41362355, "comment_id": 69926094, "body": "@InsideLoop <i>&quot;if no pointer/reference is created&quot;</i> Well, you have to choose either the one or the other way. There&#39;s no 3rd one viable."}, {"owner": {"reputation": 5563, "user_id": 3763545, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/242891331073a6961342bd4375c95156?s=128&d=identicon&r=PG&f=1", "display_name": "InsideLoop", "link": "https://stackoverflow.com/users/3763545/insideloop"}, "edited": false, "score": 0, "creation_date": 1482930774, "post_id": 41362355, "comment_id": 69926876, "body": "There must be a way as the standard library allows to get iterators that behave this way for syd::unordered_map"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 5563, "user_id": 3763545, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/242891331073a6961342bd4375c95156?s=128&d=identicon&r=PG&f=1", "display_name": "InsideLoop", "link": "https://stackoverflow.com/users/3763545/insideloop"}, "edited": false, "score": 1, "creation_date": 1482931156, "post_id": 41362355, "comment_id": 69927077, "body": "@InsideLoop Take a look at the reference of <a href=\"http://en.cppreference.com/w/cpp/container/unordered_map\" rel=\"nofollow noreferrer\"><code>unordered_map</code></a>. <code>value_type</code> is <code>std::pair&lt;const Key, T&gt;</code>. It already stores the keys as <code>const</code>, it doesn&#39;t offer a view unto them."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 4, "last_activity_date": 1482928850, "last_edit_date": 1495542295, "creation_date": 1482928727, "answer_id": 41362355, "question_id": 41362289, "link": "https://stackoverflow.com/questions/41362289/change-the-const-of-an-element-of-a-struct/41362355#41362355", "title": "Change the const of an element of a struct", "body": "<p>You can provide reference members and a constructor </p>\n\n<pre><code>struct IKeyValue {\n     const K&amp; key;\n     V&amp; value;\n     IKeyValue(KeyValue&amp; x) : key(x.key), value(x.value) {}\n};\n</code></pre>\n\n<p>But as mentioned in the <a href=\"https://stackoverflow.com/questions/41362289/change-the-const-of-an-element-of-a-struct/41362355#comment69925808_41362289\">comment</a>, the lifetime management for the referenced instances could become a problem.</p>\n"}, {"tags": [], "owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "is_accepted": false, "score": 1, "last_activity_date": 1482928910, "creation_date": 1482928910, "answer_id": 41362399, "question_id": 41362289, "link": "https://stackoverflow.com/questions/41362289/change-the-const-of-an-element-of-a-struct/41362399#41362399", "title": "Change the const of an element of a struct", "body": "<p>You can't , as they are not the same type, nor <code>IKeyValue</code> is a derived class of <code>KeyValue</code>.</p>\n\n<p>You need to redesign your code to use something different, like returning a view of the class instead.</p>\n"}, {"tags": [], "owner": {"reputation": 11973, "user_id": 1419315, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e13603f86a9561d16a944963943fb8a9?s=128&d=identicon&r=PG", "display_name": "JohnB", "link": "https://stackoverflow.com/users/1419315/johnb"}, "is_accepted": false, "score": 4, "last_activity_date": 1482930556, "last_edit_date": 1482930556, "creation_date": 1482929296, "answer_id": 41362491, "question_id": 41362289, "link": "https://stackoverflow.com/questions/41362289/change-the-const-of-an-element-of-a-struct/41362491#41362491", "title": "Change the const of an element of a struct", "body": "<p>In <code>IKeyValue</code>, use accessor functions rather than data fields:</p>\n\n<pre><code>struct IKeyValue {\nprivate:\n    KeyValue &amp; keyValue;\npublic:\n    IKeyValue (KeyValue &amp; keyValue) : keyValue (keyValue) {}\n\n    K const &amp; key () const { return keyValue.key; }\n    V &amp; value () { return keyValue.value; }\n    V const &amp; value () const { return keyValue.value; }\n};\n\nKeyValue kv = ...;\nIKeyValue ikv (kv);\n\n... ikv.key (); // returns kv.key;\nikv.value () = ...; // sets kv.value;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1482929498, "post_id": 41362505, "comment_id": 69926173, "body": "Getters and setter en-masse are hardly clean. And it doesn&#39;t solve the problem. You still can&#39;t prevent the user from modifying <code>key</code> if the returned reference is non-<code>const</code>, nor can you allow them to modify <code>value</code> if the reference is <code>const</code>."}, {"owner": {"reputation": 8429, "user_id": 964080, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/136f4c71facafdb75bfaa0e4f047f1fc?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/964080/nick"}, "edited": false, "score": 1, "creation_date": 1482929565, "post_id": 41362505, "comment_id": 69926204, "body": "I love the answer, but it does not exactly answer the question."}, {"owner": {"reputation": 36978, "user_id": 13313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9a3d31b0487b4ae6de51cbbb23016440?s=128&d=identicon&r=PG", "display_name": "Dima", "link": "https://stackoverflow.com/users/13313/dima"}, "edited": false, "score": 0, "creation_date": 1482929608, "post_id": 41362505, "comment_id": 69926223, "body": "This is hardly &quot;en-masse&quot;. I am specifying a policy of which data members are read-only, and which are read-write. And I am not returning references at all. I am returning values."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1482929633, "post_id": 41362505, "comment_id": 69926232, "body": "This does not allow <code>KeyValue::key</code> to be changed after creation, which is a requirement"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1482929651, "post_id": 41362505, "comment_id": 69926241, "body": "Then you misunderstood the question, because you did not answer it. And you went full-blown java by complicating a simple aggregate."}, {"owner": {"reputation": 36978, "user_id": 13313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9a3d31b0487b4ae6de51cbbb23016440?s=128&d=identicon&r=PG", "display_name": "Dima", "link": "https://stackoverflow.com/users/13313/dima"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1482929827, "post_id": 41362505, "comment_id": 69926346, "body": "@M.M I don&#39;t see that requirement anywhere in the question. It looks to me like the author is trying to do a simple thing in a complicated way."}, {"owner": {"reputation": 36978, "user_id": 13313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9a3d31b0487b4ae6de51cbbb23016440?s=128&d=identicon&r=PG", "display_name": "Dima", "link": "https://stackoverflow.com/users/13313/dima"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1482930054, "post_id": 41362505, "comment_id": 69926464, "body": "@StoryTeller I highly recommend that you take a look at &quot;Effective C++&quot;, 2nd edition, by Scott Meyers."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1482930107, "post_id": 41362505, "comment_id": 69926492, "body": "It seems to me that <code>KeyValue</code> is used in various places in the code, and OP wants to create a view onto it in some other places that only allows modification of the value.   OP didn&#39;t say that there are any restrictions on <code>KeyValue</code> so an answer should not place restrictions."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1482930265, "post_id": 41362505, "comment_id": 69926584, "body": "I&#39;ve read it thank you, the third edition even. Scott Meyers&#39; advice is generally good, but not perfect. Sending me to read a book hardly proves a point. Member functions that just give access to member are a failure to encapsulate. You don&#39;t impose any policy here that is above direct access."}, {"owner": {"reputation": 36978, "user_id": 13313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9a3d31b0487b4ae6de51cbbb23016440?s=128&d=identicon&r=PG", "display_name": "Dima", "link": "https://stackoverflow.com/users/13313/dima"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1482930283, "post_id": 41362505, "comment_id": 69926591, "body": "@M.M Now we are making assumptions about how KeyValue is used in the rest of the code. And since we don&#39;t know that, we should fall back on the basic C++ design principles, such as making all data members private and providing accessors if and when needed."}, {"owner": {"reputation": 36978, "user_id": 13313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9a3d31b0487b4ae6de51cbbb23016440?s=128&d=identicon&r=PG", "display_name": "Dima", "link": "https://stackoverflow.com/users/13313/dima"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1482930353, "post_id": 41362505, "comment_id": 69926632, "body": "@StoryTeller but you do impose a policy.<code>key</code> is now read-only, and <code>value</code> is read-write. If accessors are a failure to encapsulate, then what do you call public data members?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1482930569, "post_id": 41362505, "comment_id": 69926760, "body": "Allow me to re-iterate. The OP wants to modify <code>key</code>, otherwise they wouldn&#39;t have defined it as non-<code>const</code> (and having a &quot;read-only&quot; member as non-<code>const</code> is a code smell btw). As for <code>value</code>, the accessors add nothing. They are just code bloat."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1482930660, "post_id": 41362505, "comment_id": 69926814, "body": "The knee-jerk reaction of &quot;private&quot; everything, even in a simple aggregate is not a well-thought out design. I&#39;m sorry. An aggregate is not meant to encapsulate anything. It has no behavior other than simply clumping data together, and direct access is the simplest cleanest approach for this."}], "tags": [], "owner": {"reputation": 36978, "user_id": 13313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9a3d31b0487b4ae6de51cbbb23016440?s=128&d=identicon&r=PG", "display_name": "Dima", "link": "https://stackoverflow.com/users/13313/dima"}, "is_accepted": false, "score": 0, "last_activity_date": 1482929357, "creation_date": 1482929357, "answer_id": 41362505, "question_id": 41362289, "link": "https://stackoverflow.com/questions/41362289/change-the-const-of-an-element-of-a-struct/41362505#41362505", "title": "Change the const of an element of a struct", "body": "<p>The cleanest way to do this is to make your data members private, and provide getters and setters when needed. From what you wrote, it seems that you want the key to be read-only, and the value to be read-write.  So you can do this:</p>\n\n<pre><code>class KeyValue\n{\npublic:\n   KeyValue(K k, V v) : key(k), value(v) {}\n   K get_key() const {return key;}\n   V get_value() const {return value;}\n   void set_value(V v) {value = v;}\nprivate:\n   K key;\n   V value;\n};\n</code></pre>\n\n<p>Now the key can only be set in the constructor, and is read-only from that moment on.  </p>\n"}, {"tags": [], "owner": {"reputation": 7447, "user_id": 602372, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/q6bLu.jpg?s=128&g=1", "display_name": "Yam Marcovic", "link": "https://stackoverflow.com/users/602372/yam-marcovic"}, "is_accepted": false, "score": 0, "last_activity_date": 1482933550, "creation_date": 1482933550, "answer_id": 41363616, "question_id": 41362289, "link": "https://stackoverflow.com/questions/41362289/change-the-const-of-an-element-of-a-struct/41363616#41363616", "title": "Change the const of an element of a struct", "body": "<p>Okay, this is quite a weird solution I'm offering here, and some would argue an abusive one, but if your \"Value\" is always modifiable, you could do something like:</p>\n\n<pre><code>struct KeyValue {\n  K key;\n  mutable V value;\n};\n</code></pre>\n\n<p>and then hold a <code>const KeyValue&amp;</code> where you want to lock in the constness of the key.</p>\n"}], "owner": {"reputation": 5563, "user_id": 3763545, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/242891331073a6961342bd4375c95156?s=128&d=identicon&r=PG&f=1", "display_name": "InsideLoop", "link": "https://stackoverflow.com/users/3763545/insideloop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1482933550, "creation_date": 1482928498, "last_edit_date": 1482931527, "question_id": 41362289, "link": "https://stackoverflow.com/questions/41362289/change-the-const-of-an-element-of-a-struct", "title": "Change the const of an element of a struct", "body": "<p>I have a pointer to a:</p>\n\n<pre><code>struct KeyValue {\n  K key;\n  V value;\n}\n</code></pre>\n\n<p>and I want to return a reference to the same memory location interpreted as a</p>\n\n<pre><code>struct IKeyValue {\n  const K key;\n  V value;\n}\n</code></pre>\n\n<p>Is there a clean way to do it in C++11?</p>\n\n<p>The reference to IKeyValue should be valid as long as any reference to the original KeyValue is valid.</p>\n\n<p>The reason I am doing this is because I am implementing a <code>HashTable&lt;K, V&gt;</code> using open addressing. As a consequence I have an array of <code>KeyValue</code> with some of them being fully constructed (key and value constructed) and some of them half constructed (only key constructed to <code>empty_key</code> or <code>tombstone_key</code>). I want the iterators to this structure be used such that <code>it-&gt;key</code> can be read but not modified and <code>it-&gt;value</code> can be read and modified. And I prefer not to have something such as <code>it-&gt;key()</code> and <code>it-&gt;value()</code> as it is done in the standard library.</p>\n\n<p>As it seems difficult to do this, I am thinking of another option as suggested by the answers. I can construct an array of IKeyValue inside my HashTable with:</p>\n\n<pre><code>IKeyValue* p = (IKeyValue*)malloc(n * sizeof(IKeyValue));\n</code></pre>\n\n<p>But then, am I allowed to use emplacement new in order to construct just a key or a value with placement new?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1028, "user_id": 6367382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/175db0b1397c4a1080a871263e735251?s=128&d=identicon&r=PG&f=1", "display_name": "paweldac", "link": "https://stackoverflow.com/users/6367382/paweldac"}, "edited": false, "score": 1, "creation_date": 1482927179, "post_id": 41361881, "comment_id": 69924905, "body": "This is write code for me type of question. I doubt someone will do your homework for you."}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 2, "creation_date": 1482927382, "post_id": 41361881, "comment_id": 69925015, "body": "If you&#39;d like to know whether <code>value[i]</code> is greater than any value in this range, you&#39;ll have to loop over the range as <i>searching</i> for something always involves loops, just like in real life."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482927957, "post_id": 41361881, "comment_id": 69925371, "body": "Welcome to Stack Overflow. Please take the time to read <a href=\"http://stackoverflow.com/tour\">The Tour</a> and refer to the material from the <a href=\"http://stackoverflow.com/help/asking\">Help Center</a> what and how you can ask here."}, {"owner": {"reputation": 1, "user_id": 7349690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/403dbd7ca47b95bb59e30c54891c37cb?s=128&d=identicon&r=PG&f=1", "display_name": "Maria Lima", "link": "https://stackoverflow.com/users/7349690/maria-lima"}, "edited": false, "score": 0, "creation_date": 1482928081, "post_id": 41361881, "comment_id": 69925447, "body": "No, I meant value[i] &gt; reference[i - e] &quot;to&quot; reference[i - 1]. I am more used to R, where one can write &quot;from&quot; &quot;to&quot;, but on c++ I am starting to think that it is not possible, or it is not so easy."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1482928245, "post_id": 41361881, "comment_id": 69925529, "body": "No, you&#39;ll need to code it as a loop. C++ doesn&#39;t have such constructs."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1482928495, "post_id": 41361881, "comment_id": 69925643, "body": "@StoryTeller <i>&quot;C++ doesn&#39;t have such constructs.&quot;</i> Well, there&#39;s <a href=\"http://en.cppreference.com/w/cpp/algorithm/find\" rel=\"nofollow noreferrer\"><code>find_if()</code></a>?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1482928841, "post_id": 41361881, "comment_id": 69925835, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 - C++ doesn&#39;t have a built in expressions to work with ranges. The standard library is awesome, but what I mean in &quot;construct&quot; is something you can rely on even in a minimal freestanding environment."}], "answers": [{"tags": [], "owner": {"reputation": 24727, "user_id": 186997, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/836f83976dae9f54ad7a201cca951f73?s=128&d=identicon&r=PG", "display_name": "utnapistim", "link": "https://stackoverflow.com/users/186997/utnapistim"}, "is_accepted": false, "score": 0, "last_activity_date": 1482929170, "last_edit_date": 1592644375, "creation_date": 1482929170, "answer_id": 41362464, "question_id": 41361881, "link": "https://stackoverflow.com/questions/41361881/reference-to-an-interval-of-values-in-c/41362464#41362464", "title": "Reference to an interval of values in c++", "body": "<blockquote>\n<p>I am new to this language.</p>\n<p>No, I meant value[i] &gt; reference[i - e] &quot;to&quot; reference[i - 1]. I am more used to R, where one can write &quot;from&quot; &quot;to&quot;, but on c++ I am starting to think that it is not possible, or it is not so easy.</p>\n</blockquote>\n<p>C++ doesn't have this kind of built-in facility'*. You need to <strong>iterate the interval &quot;reference[i - e] to reference[i - 1]&quot;</strong>, then <strong>check if your value (<code>value[i]</code>) is larger than each element</strong> in the interval.</p>\n<p>Consider writing the code, then (if you do not succeed), edit the question with what you tried, or post a different question.</p>\n<p>'* - well, there is std::find_if, but it's not built-in.</p>\n"}, {"tags": [], "owner": {"reputation": 570, "user_id": 5394346, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8200e24a65b9f465193065392628d1ac?s=128&d=identicon&r=PG&f=1", "display_name": "marlam", "link": "https://stackoverflow.com/users/5394346/marlam"}, "is_accepted": false, "score": 0, "last_activity_date": 1482929917, "creation_date": 1482929917, "answer_id": 41362636, "question_id": 41361881, "link": "https://stackoverflow.com/questions/41361881/reference-to-an-interval-of-values-in-c/41362636#41362636", "title": "Reference to an interval of values in c++", "body": "<p>Although there is no \"built-in\" language construct to do what you require, it is useful to look at the standard library, especially at the algorithms provided. I think one solution to your problem is to use <code>std::all_of</code> like this (with <code>T</code> being the type stored in the vector)</p>\n\n<pre><code>if(std::all_of(reference.cbegin() + i, reference.cbegin() + e + 1, [&amp;value, &amp;i](T ref){ return ref &lt; value[i]; })))\n{\n    ...\n}\n</code></pre>\n\n<p>Or in a concrete example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n\nint main()\n{\n    std::vector&lt;int&gt; reference = {3,4,5,6,7};\n    std::vector&lt;int&gt; value = {6,7,8,9};\n\n    int i = 1;\n    int e = 3;\n    if(std::all_of(reference.cbegin() + i - 1, reference.cbegin() + e + 1, [&amp;value, &amp;i](int ref){ return ref &lt; value[i]; }))\n    {\n        std::cout &lt;&lt; \"value[\" &lt;&lt; i &lt;&lt; \"] greater than all reference[\" &lt;&lt; i-1 &lt;&lt; \"] to reference [\" &lt;&lt; e &lt;&lt; \"]\" &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/ce3db98046bdcb1f\" rel=\"nofollow noreferrer\">see it live</a></p>\n\n<p>But you have to be damn careful not to run outside the arrays with the indices <code>i</code> and <code>j</code>. Notice for example the <code>+1</code> in the second parameter of <code>std::all_of</code> is because it needs the iterator <em>behind</em> the last value it has to look for.</p>\n"}, {"tags": [], "owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1483007027, "creation_date": 1483007027, "answer_id": 41377697, "question_id": 41361881, "link": "https://stackoverflow.com/questions/41361881/reference-to-an-interval-of-values-in-c/41377697#41377697", "title": "Reference to an interval of values in c++", "body": "<p>C++ does not have any built-in notion of intervals, however you actually do not need that here.</p>\n\n<p>Checking whether a value is greater than any value in a given internal is equivalent to checking whether a value is greater than the maximum value of said interval, and this can be expressed easily enough in C++ using the <a href=\"http://en.cppreference.com/w/cpp/algorithm/max_element\" rel=\"nofollow noreferrer\"><code>max_element</code></a> algorithm:</p>\n\n<pre><code>if (value[i] &gt; std::max_element(&amp;reference[i - 1], &amp;reference[i - e])) {\n}\n</code></pre>\n\n<p>Note that the range is <em>half-open</em>: that is, the position <code>i - 1</code> is included and the position <code>i - e</code> is excluded.</p>\n\n<p>Also note that the range must be described in the lower-upper bound format, so here <code>e</code> better be less than or equal to 1.</p>\n"}], "owner": {"reputation": 1, "user_id": 7349690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/403dbd7ca47b95bb59e30c54891c37cb?s=128&d=identicon&r=PG&f=1", "display_name": "Maria Lima", "link": "https://stackoverflow.com/users/7349690/maria-lima"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 194, "favorite_count": 0, "answer_count": 3, "score": -5, "last_activity_date": 1483007027, "creation_date": 1482927039, "last_edit_date": 1482927681, "question_id": 41361881, "link": "https://stackoverflow.com/questions/41361881/reference-to-an-interval-of-values-in-c", "title": "Reference to an interval of values in c++", "body": "<p>I am new to this language.</p>\n\n<p>I am trying to write \"if value[i] is greater than the one of the values on the interval [i-e] to [i-1] from the vector x\", where i and e are int, and value[i] x[i] are elements of vector \"value\" and \"x\", repectively.</p>\n\n<p>The part that I am having special trouble with is the reference to the values on the interval of the vector x. The code that I have written now (and which is wrong) is as follows,</p>\n\n<pre><code>if (value[i] &gt; (reference[i - 1]; reference[i - e]))\n</code></pre>\n"}, {"tags": ["c++", "c", "pointers"], "comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 4, "creation_date": 1482927086, "post_id": 41361814, "comment_id": 69924847, "body": "<a href=\"http://cdecl.org\" rel=\"nofollow noreferrer\">cdecl.org</a> will help."}], "answers": [{"tags": [], "owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "is_accepted": false, "score": 2, "last_activity_date": 1482927154, "creation_date": 1482927154, "answer_id": 41361912, "question_id": 41361814, "link": "https://stackoverflow.com/questions/41361814/hard-time-understanding-precedence-principle-of-char-psizeofc/41361912#41361912", "title": "Hard time understanding precedence principle of char (*p)[sizeof(c)];", "body": "<p>In this definition </p>\n\n<pre><code>char (*p)[sizeof(c)];\n</code></pre>\n\n<p>you define a variable p which is a pointer (the contenct of the brackets are evaluated first) to an array of characters with size [sizeof c].\nAt this point in your code p does not point anywhere specific as it is not initialized yet.</p>\n\n<p>With the other definition</p>\n\n<pre><code>char *p[sizeof(c)];\n</code></pre>\n\n<p>you define a variable p which is an array (the * is evaluated later) of pointers to character.</p>\n\n<p>you have a pointer to an array vs an array of pointers.</p>\n"}, {"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": false, "score": 2, "last_activity_date": 1482927266, "creation_date": 1482927266, "answer_id": 41361952, "question_id": 41361814, "link": "https://stackoverflow.com/questions/41361814/hard-time-understanding-precedence-principle-of-char-psizeofc/41361952#41361952", "title": "Hard time understanding precedence principle of char (*p)[sizeof(c)];", "body": "<p>Type mismatch in your assignment</p>\n\n<pre><code>p = &amp;c;\n</code></pre>\n\n<p>is the problem.</p>\n\n<p><code>c</code> is an array of 10 chars and and <code>&amp;c</code> is a <em>pointer to an array</em> of 10 chars.</p>\n\n<p>In  <code>char (*p)[sizeof(c)];</code>, <code>p</code> is a <em>pointer to an array</em> of <code>sizeof(c)</code> (10) chars. So, this matches with the type of <code>&amp;c</code>.</p>\n\n<p>In  <code>char *p[sizeof(c)];</code>, <code>p</code> is an <em>array of <code>sizeof(c)</code> (10) pointers</em>. But this doesn't match with the type of <code>&amp;c</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 374, "user_id": 4179642, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9f75a77b3e5fd92911c48b01c471ab81?s=128&d=identicon&r=PG&f=1", "display_name": "Pipsqweek", "link": "https://stackoverflow.com/users/4179642/pipsqweek"}, "edited": false, "score": 0, "creation_date": 1482927545, "post_id": 41362000, "comment_id": 69925128, "body": "This is great progress, though I&#39;m going to have to review your answer a few times just to get acquainted with it. GREAT answer. Thanks."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 374, "user_id": 4179642, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9f75a77b3e5fd92911c48b01c471ab81?s=128&d=identicon&r=PG&f=1", "display_name": "Pipsqweek", "link": "https://stackoverflow.com/users/4179642/pipsqweek"}, "edited": false, "score": 0, "creation_date": 1482927735, "post_id": 41362000, "comment_id": 69925239, "body": "The hardest part is finding the variable name, but it&#39;s a matter of getting used to it. Try your teeth on <code>int *(*(*p)(void(*(*x)(int *a))(void)))[4]</code> next ;)"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 374, "user_id": 4179642, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9f75a77b3e5fd92911c48b01c471ab81?s=128&d=identicon&r=PG&f=1", "display_name": "Pipsqweek", "link": "https://stackoverflow.com/users/4179642/pipsqweek"}, "edited": false, "score": 2, "creation_date": 1482928284, "post_id": 41362000, "comment_id": 69925539, "body": "@Pipsqweek also please don&#39;t write such horrors outside of syntax challenges. It took me a good five minutes to check that I hadn&#39;t made a mistake in the parentheses caterpillar above..."}], "tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": true, "score": 15, "last_activity_date": 1482927424, "creation_date": 1482927424, "answer_id": 41362000, "question_id": 41361814, "link": "https://stackoverflow.com/questions/41361814/hard-time-understanding-precedence-principle-of-char-psizeofc/41362000#41362000", "title": "Hard time understanding precedence principle of char (*p)[sizeof(c)];", "body": "<p>Types in C can be read with what is informally known as the <em>right-left rule</em>. You start from the name of the variable being declared, then go right while you can, then go left while you can, and start again. Parentheses stop you until all of their content has been considered.</p>\n\n<p>In your example:</p>\n\n<pre><code>char (*p)[sizeof(c)];\n       ^               p...                          (hit ')', turn around)\n      ^                is a pointer...               (hit '(', turn around and remove '()')\n         ^^^^^^^^^^^   to an array of `sizeof(c)`... (end of line, turn around)\n^^^^                   chars.                        nothing left, we're done!\n</code></pre>\n\n<p>Without the parentheses, this becomes:</p>\n\n<pre><code>char *p[sizeof(c)];\n      ^^^^^^^^^^^^     p is an array of `sizeof(c)`... (end of line, turn around)\n^^^^^^                 pointers to char.\n</code></pre>\n\n<p>Which indeed is quite different.</p>\n"}, {"tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": false, "score": 0, "last_activity_date": 1483217587, "creation_date": 1483217587, "answer_id": 41411648, "question_id": 41361814, "link": "https://stackoverflow.com/questions/41361814/hard-time-understanding-precedence-principle-of-char-psizeofc/41411648#41411648", "title": "Hard time understanding precedence principle of char (*p)[sizeof(c)];", "body": "<p>The precedence principle is simple -- postfix operators are higher precedence than prefix.  <code>*</code> is a prefix operation and <code>[sizeof(c)]</code> is postfix, so when you say:</p>\n\n<pre><code>char *p[sizeof(c)];\n</code></pre>\n\n<p>that's the same as</p>\n\n<pre><code>char *(p[sizeof(c)]);\n</code></pre>\n\n<p>the higher precedence operator binds first to the operand (the declarator name <code>p</code> here).</p>\n"}], "owner": {"reputation": 374, "user_id": 4179642, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9f75a77b3e5fd92911c48b01c471ab81?s=128&d=identicon&r=PG&f=1", "display_name": "Pipsqweek", "link": "https://stackoverflow.com/users/4179642/pipsqweek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 2, "accepted_answer_id": 41362000, "answer_count": 4, "score": 7, "last_activity_date": 1483217587, "creation_date": 1482926813, "last_edit_date": 1483216060, "question_id": 41361814, "link": "https://stackoverflow.com/questions/41361814/hard-time-understanding-precedence-principle-of-char-psizeofc", "title": "Hard time understanding precedence principle of char (*p)[sizeof(c)];", "body": "<p>I'm learning pointers and to challenge myself I tried dereferencing a pointer to a character array. Eventually this worked:</p>\n\n<pre><code>char (*p)[sizeof(c)];\n</code></pre>\n\n<p>Where c is an array c[]=\"something\"</p>\n\n<p>I'm having a hard time understanding how <code>(*p)[sizeof(c)];</code> differs from <code>*p[sizeof(c)];</code></p>\n\n<p>Based on what I know presently (which is not much!) the computer is saying this in the case of <code>(*p)[sizeof(c)];</code>:</p>\n\n<p><em>\"p points to c! oh, and btw, p is an array of whatever sizeof(c) ends up being\"</em>. </p>\n\n<p>But even that seems strange to me, so I guess I am confused as to what is being constructed when the parenthesis are added. </p>\n\n<p>Can someone explain? </p>\n\n<p>Full code in context here:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main(int argc, char *argv[]) {\n\n    char c[] = \"something\";\n\n    char (*p)[sizeof(c)]; // this works\n    // char *p[sizeof(c)]; // this doesn't?\n\n    p = &amp;c;\n\n    cout &lt;&lt; p &lt;&lt; endl;  \n\n    cout &lt;&lt; *p &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "cmake", "compiler-optimization"], "answers": [{"comments": [{"owner": {"reputation": 5276, "user_id": 1060159, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d7890a5cb5605356754da0bc842a4426?s=128&d=identicon&r=PG", "display_name": "marmistrz", "link": "https://stackoverflow.com/users/1060159/marmistrz"}, "edited": false, "score": 0, "creation_date": 1482926774, "post_id": 41361741, "comment_id": 69924663, "body": "This works until I make a debug build. After a single debug build, all the subsequent ones are debug builds, even if <code>cmake ..</code> is used"}, {"owner": {"reputation": 2581, "user_id": 1242646, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2b686cb8d225bf0023e20013bbd3a987?s=128&d=identicon&r=PG", "display_name": "roalz", "link": "https://stackoverflow.com/users/1242646/roalz"}, "edited": false, "score": 1, "creation_date": 1482926893, "post_id": 41361741, "comment_id": 69924724, "body": "I don&#39;t remember where I&#39;ve read it, but it&#39;s considered bad practice to set CMAKE_BUILD_TYPE from inside a CMakeLists.txt. Prefer to pass it from CMake command line."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 5276, "user_id": 1060159, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d7890a5cb5605356754da0bc842a4426?s=128&d=identicon&r=PG", "display_name": "marmistrz", "link": "https://stackoverflow.com/users/1060159/marmistrz"}, "edited": false, "score": 0, "creation_date": 1482926908, "post_id": 41361741, "comment_id": 69924729, "body": "@marmistrz I&#39;ve added an update on why this happens, and how to &quot;reset&quot; it. I am trying to think of a way to achieve an implicit reset, but it&#39;s not easy."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 2581, "user_id": 1242646, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2b686cb8d225bf0023e20013bbd3a987?s=128&d=identicon&r=PG", "display_name": "roalz", "link": "https://stackoverflow.com/users/1242646/roalz"}, "edited": false, "score": 0, "creation_date": 1482926972, "post_id": 41361741, "comment_id": 69924770, "body": "@roalz The OP wants rather non-standard usage of CMake in the first place. I will however add a suitable disclaimer."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 1, "creation_date": 1505695359, "post_id": 41361741, "comment_id": 79502762, "body": "<i>&quot;recommended usage of CMake is to always specify CMAKE_BUILD_TYPE explicitly on the command line ...&quot;</i> - Not according to this Debian bug report: <a href=\"https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=640214\" rel=\"nofollow noreferrer\">CMake sets the default optimization level to -O3</a>."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1505721055, "post_id": 41361741, "comment_id": 79510822, "body": "@jww What my answer says is what I&#39;ve inferred from years of following the CMake mailing list. I&#39;ve never seen anyone recommend <i>not</i> using <code>CMAKE_BUILD_TYPE</code>; in fact, <code>if(CMAKE_BUILD_TYPE)</code> is sometimes used in CMakeLists to determine that a single-config generator is running. Therefore, I consider it best practice to always specify it."}], "tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": true, "score": 77, "last_activity_date": 1482927721, "last_edit_date": 1482927721, "creation_date": 1482926574, "answer_id": 41361741, "question_id": 41361631, "link": "https://stackoverflow.com/questions/41361631/optimize-in-cmake-by-default/41361741#41361741", "title": "Optimize in CMake by default", "body": "<p>First off: recommended usage of CMake is to always specify <code>CMAKE_BUILD_TYPE</code> explicitly on the command line (if and only if using a single-configuration generator). Your use case deviates from this best practice, so treat this answer as \"how you can do it,\" not necessarily as \"how you should do it.\"</p>\n\n<p>To address the first issue, you should be able to do this early in your CMakeList:</p>\n\n<pre><code>if(NOT CMAKE_BUILD_TYPE)\n  set(CMAKE_BUILD_TYPE Release)\nendif()\n\nset(CMAKE_CXX_FLAGS \"-Wall -Wextra\")\nset(CMAKE_CXX_FLAGS_DEBUG \"-g\")\nset(CMAKE_CXX_FLAGS_RELEASE \"-O3\")\n</code></pre>\n\n<p>This will make sure that if you do not specify a build type at all, it will default to \"Release\" and thus <code>CMAKE_CXX_FLAGS_RELEASE</code> will be used.</p>\n\n<p>The second one is harder to tackle. Variables passed from the command line (such as <code>CMAKE_BUILD_TYPE=Debug</code>) are <em>cached</em> by CMake and thus re-used in subsequent invocations (that is necessary, since CMake can re-trigger itself if you modify its inputs between builds).</p>\n\n<p>The only solution is to make the user switch the build type explicitly again, using <code>cmake .. -DCMAKE_BUILD_TYPE=Release</code>.</p>\n\n<p>Consider why this is necessary: as I said, CMake can re-trigger itself as part of a build if CMake's input (<code>CMakeLists.txt</code> files or their dependencies) has changed since last CMake ran. In such case, it will also be run without command-line arguments such as <code>-DCMAKE_BUILD_TYPE=whatever</code>, and will rely on the cache to supply the same value as last time. This scenario is indistinguishable from you manually running <code>cmake ..</code> without additional arguments.</p>\n\n<p>I could provide a hacky solution to always reset <code>CMAKE_BUILD_TYPE</code> to <code>Release</code> if not specified explicitly on the command line. However, it would also mean that a buildsystem generated as <code>Debug</code> would get re-generated as <em><code>Release</code></em> if automatic re-generation happened. I am pretty sure that's not what you want.</p>\n"}, {"comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1482926817, "post_id": 41361770, "comment_id": 69924687, "body": "I would say &quot;-g -O0&quot;."}, {"owner": {"reputation": 5276, "user_id": 1060159, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d7890a5cb5605356754da0bc842a4426?s=128&d=identicon&r=PG", "display_name": "marmistrz", "link": "https://stackoverflow.com/users/1060159/marmistrz"}, "edited": false, "score": 0, "creation_date": 1482926845, "post_id": 41361770, "comment_id": 69924698, "body": "But then the <code>-O3</code> is not passed to the compiler when <code>cmake ..</code>"}, {"owner": {"reputation": 5276, "user_id": 1060159, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d7890a5cb5605356754da0bc842a4426?s=128&d=identicon&r=PG", "display_name": "marmistrz", "link": "https://stackoverflow.com/users/1060159/marmistrz"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1482926864, "post_id": 41361770, "comment_id": 69924709, "body": "@n.m. gcc doesn&#39;t optimize at all by default"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 5276, "user_id": 1060159, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d7890a5cb5605356754da0bc842a4426?s=128&d=identicon&r=PG", "display_name": "marmistrz", "link": "https://stackoverflow.com/users/1060159/marmistrz"}, "edited": false, "score": 1, "creation_date": 1482927232, "post_id": 41361770, "comment_id": 69924938, "body": "@marmistrz yes, but still it won&#39;t hurt."}, {"owner": {"reputation": 2581, "user_id": 1242646, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2b686cb8d225bf0023e20013bbd3a987?s=128&d=identicon&r=PG", "display_name": "roalz", "link": "https://stackoverflow.com/users/1242646/roalz"}, "reply_to_user": {"reputation": 5276, "user_id": 1060159, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d7890a5cb5605356754da0bc842a4426?s=128&d=identicon&r=PG", "display_name": "marmistrz", "link": "https://stackoverflow.com/users/1060159/marmistrz"}, "edited": false, "score": 0, "creation_date": 1482928134, "post_id": 41361770, "comment_id": 69925471, "body": "@marmistrz: when no CMAKE_BUILD_TYPE is specified, CMAKE_CXX_FLAGS is used, as stated in the CMake wiki: <a href=\"https://cmake.org/Wiki/CMake_Useful_Variables\" rel=\"nofollow noreferrer\">cmake.org/Wiki/CMake_Useful_Variables</a>"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1503495981, "post_id": 41361770, "comment_id": 78640550, "body": "Agree with @n.m.. You want at least <code>-O1</code> even in debug builds so GCC performs some analysis and provides warnings for overflow, aliasing, etc."}], "tags": [], "owner": {"reputation": 2581, "user_id": 1242646, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2b686cb8d225bf0023e20013bbd3a987?s=128&d=identicon&r=PG", "display_name": "roalz", "link": "https://stackoverflow.com/users/1242646/roalz"}, "is_accepted": false, "score": 10, "last_activity_date": 1482928350, "last_edit_date": 1495542316, "creation_date": 1482926681, "answer_id": 41361770, "question_id": 41361631, "link": "https://stackoverflow.com/questions/41361631/optimize-in-cmake-by-default/41361770#41361770", "title": "Optimize in CMake by default", "body": "<p>For CXX flags specific for Release target, you should set<br>\nCMAKE_CXX_FLAGS_RELEASE<br>\ninstead of<br>\nCMAKE_CXX_FLAGS</p>\n\n<p>In your case you can use:</p>\n\n<blockquote>\n  <p>set(CMAKE_CXX_FLAGS \"-Wall -Wextra\")<br>\n  set(CMAKE_CXX_FLAGS_DEBUG \"-g\")<br>\n  set(CMAKE_CXX_FLAGS_RELEASE \"-O3\")</p>\n</blockquote>\n\n<p>A more modern CMake approach (which I suggest, if you are using CMake version 2.8.12 or newer), is well described in <a href=\"https://stackoverflow.com/questions/23995019/what-is-the-modern-method-for-setting-general-compile-flags-in-cmake\">this StackOverflow answer</a> and involves the use of <a href=\"https://cmake.org/cmake/help/v3.0/command/target_compile_options.html\" rel=\"noreferrer\">target_compile_options</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 34066, "user_id": 327026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/08ad5928b416f9de4bb957ac8189bf00?s=128&d=identicon&r=PG", "display_name": "Mike T", "link": "https://stackoverflow.com/users/327026/mike-t"}, "is_accepted": false, "score": 0, "last_activity_date": 1576455383, "creation_date": 1576455383, "answer_id": 59349220, "question_id": 41361631, "link": "https://stackoverflow.com/questions/41361631/optimize-in-cmake-by-default/59349220#59349220", "title": "Optimize in CMake by default", "body": "<p>The default optimization level for various release modes is O3, which <a href=\"https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=640214\" rel=\"nofollow noreferrer\">often isn't the best choice</a>. Within <code>CMakeLists.txt</code> file, these can be modified to O2:</p>\n\n<pre><code># Modify compile flags to change optimization level from O3 to O2\nstring(REGEX REPLACE \"([\\\\/\\\\-]O)3\" \"\\\\12\"\n  CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS}\")\nstring(REGEX REPLACE \"([\\\\/\\\\-]O)3\" \"\\\\12\"\n  CMAKE_CXX_FLAGS_RELEASE \"${CMAKE_CXX_FLAGS_RELEASE}\")\nstring(REGEX REPLACE \"([\\\\/\\\\-]O)3\" \"\\\\12\"\n  CMAKE_CXX_FLAGS_MINSIZEREL \"${CMAKE_CXX_FLAGS_MINSIZEREL}\")\nstring(REGEX REPLACE \"([\\\\/\\\\-]O)3\" \"\\\\12\"\n  CMAKE_CXX_FLAGS_RELWITHDEBINFO \"${CMAKE_CXX_FLAGS_RELWITHDEBINFO}\")\n</code></pre>\n\n<p>These regular expressions will be modified (e.g.):</p>\n\n<ul>\n<li><code>-O3</code> to <code>-O2</code> usually for Linux-based compilers</li>\n<li><code>/O3</code> to <code>/O2</code> usually for Windows-based compilers</li>\n</ul>\n"}], "owner": {"reputation": 5276, "user_id": 1060159, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d7890a5cb5605356754da0bc842a4426?s=128&d=identicon&r=PG", "display_name": "marmistrz", "link": "https://stackoverflow.com/users/1060159/marmistrz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70743, "favorite_count": 15, "accepted_answer_id": 41361741, "answer_count": 3, "score": 42, "last_activity_date": 1576455383, "creation_date": 1482926177, "last_edit_date": 1503496028, "question_id": 41361631, "link": "https://stackoverflow.com/questions/41361631/optimize-in-cmake-by-default", "title": "Optimize in CMake by default", "body": "<p>I have a C++ project which uses CMake as its build system. I'd like the following behavior:</p>\n\n<p>If cmake is invoked as <code>cmake ..</code>, then <code>CMAKE_CXX_FLAGS</code> is <code>-O3 -Wall -Wextra</code></p>\n\n<p>If cmake is invoked as <code>cmake .. -DCMAKE_BUILD_TYPE=Debug</code>, then <code>CMAKE_CXX_FLAGS</code> is <code>-g -Wall -Wextra</code></p>\n\n<p>I tried the following</p>\n\n<pre><code>message(STATUS \"Build type: ${CMAKE_BUILD_TYPE}\")\n\nset(CMAKE_CXX_FLAGS \"-O3 -Wall -Wextra\")\nset(CMAKE_CXX_FLAGS_DEBUG \"-g -Wall -Wextra\")\n</code></pre>\n\n<p>But this has a big problem. First of all, if the second invocation is used, then both <code>-O3</code> and <code>-g</code> flags are passed to the compiler. Besides, if I use the second invocation and the first thereafter, <code>CMAKE_BUILD_TYPE</code> stays <code>Debug</code> although not explicitly ordered so - so I get a Debug build although I want an optimized build.</p>\n\n<p>Why? What can I do to get the desired behavior?</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1482926345, "post_id": 41361615, "comment_id": 69924405, "body": "I&#39;m a bit confused by you having a function called <code>init</code> of type <code>Compare</code> to initialise data and one also of type <code>Compare</code> to compare data. Is this really what you want?"}, {"owner": {"reputation": 247, "user_id": 5661576, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/92ec48405b79536dcb523ed0a6db0af4?s=128&d=identicon&r=PG&f=1", "display_name": "SomeoneWithAQuestion", "link": "https://stackoverflow.com/users/5661576/someonewithaquestion"}, "reply_to_user": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1482926468, "post_id": 41361615, "comment_id": 69924458, "body": "@doctorlove How do I do it then? How can I pass different functions to this class? My intention is to be able to use different functions from the source file."}, {"owner": {"reputation": 764, "user_id": 2899478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juuUm.jpg?s=128&g=1", "display_name": "o_weisman", "link": "https://stackoverflow.com/users/2899478/o-weisman"}, "edited": false, "score": 0, "creation_date": 1482926755, "post_id": 41361615, "comment_id": 69924651, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/1174169/function-passed-as-template-argument\">Function passed as template argument</a>"}], "answers": [{"tags": [], "owner": {"reputation": 493, "user_id": 1438832, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/8b417c263cd0c1d211ed896ba1cc94f1?s=128&d=identicon&r=PG", "display_name": "user1438832", "link": "https://stackoverflow.com/users/1438832/user1438832"}, "is_accepted": true, "score": 1, "last_activity_date": 1482927365, "creation_date": 1482927365, "answer_id": 41361981, "question_id": 41361615, "link": "https://stackoverflow.com/questions/41361615/passing-different-functions-as-arguments/41361981#41361981", "title": "Passing different functions as arguments", "body": "<p>Try this -</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt; \nusing namespace std;\n\ntemplate&lt;class K, class Compare&gt;\nclass findMax {\n    K* keyArray; // Supposed to be an array of K.\n    int size;\n\npublic:\n      findMax (K n, Compare init){init();}; // Here I would like to initialize the array.\n      ~findMax (){};\n    template&lt;typename Compare1&gt;\n      K&amp; Find(K key, Compare1 cmp){ cmp();}; // Return an elemnt in the array according to a condition.\n      template&lt;typename Compare2&gt;\n      void printArray(Compare2 print){print();}; // Print the array according to a condition.\n\n}; \nint main() {\n    findMax&lt;int,std::function&lt;void()&gt;&gt; a{5,[](){cout&lt;&lt;\"constructor\"&lt;&lt;endl;}};\n    a.Find(5,[](){cout&lt;&lt;\"Find\"&lt;&lt;endl;});\n    a.printArray([](){cout&lt;&lt;\"printArray\";});\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 247, "user_id": 5661576, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/92ec48405b79536dcb523ed0a6db0af4?s=128&d=identicon&r=PG&f=1", "display_name": "SomeoneWithAQuestion", "link": "https://stackoverflow.com/users/5661576/someonewithaquestion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 41361981, "answer_count": 1, "score": 0, "last_activity_date": 1482927365, "creation_date": 1482926133, "question_id": 41361615, "link": "https://stackoverflow.com/questions/41361615/passing-different-functions-as-arguments", "title": "Passing different functions as arguments", "body": "<p>Suppose I have this class:</p>\n\n<pre><code>template&lt;class K, class Compare&gt;\nclass findMax {\n    K* keyArray; // Supposed to be an array of K.\n    int size;\n\npublic:\n      findMax (K n, Compare init); // Here I would like to initialize the array.\n      ~findMax ();\n\n      K&amp; Find(K key, Compare cmp); // Return an elemnt in the array according to a condition.\n      void printArray(Compare print); // Print the array according to a condition.\n\n};\n</code></pre>\n\n<p>I want each <code>cmp</code> function to be different when I implement the constructor, <code>Find</code> and <code>printArray</code>.<br>\nFor example:</p>\n\n<pre><code>template&lt;class K, class Compare&gt;\nfindMax&lt;K, Compare&gt;::findMax(int n, Compare init) {\n    keyArray = new K [n];\n    init(keyArray, n);\n}\n</code></pre>\n\n<p>where <code>init</code> is a function I implement in my source file, like this for example:</p>\n\n<pre><code>// Init will initialize the array to 0.\nvoid init (int* array, int n) {\n    for (int i=0; i&lt;n; i++)\n        array[i] = 0;\n}\n</code></pre>\n\n<p>Although, I want to be able to send a different function to <code>Find</code> for example, that compares between two elements. I'm having trouble figuring out how because when I create a new <code>findMax</code> object, like <code>findMax&lt;int, UNKNOWN&gt; f</code>, what do I put instead of <code>UNKNOWN</code>?<br></p>\n"}, {"tags": ["javascript", "c++", "qt", "qml"], "comments": [{"owner": {"reputation": 10381, "user_id": 2981610, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/BYsd3.jpg?s=128&g=1", "display_name": "folibis", "link": "https://stackoverflow.com/users/2981610/folibis"}, "edited": false, "score": 0, "creation_date": 1482932087, "post_id": 41361565, "comment_id": 69927574, "body": "What is <code>temp</code> here? Does the function relates to this object? Please post all the relevant code."}, {"owner": {"reputation": 685, "user_id": 2191057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc2b4f825e60248b44c28bfa3341f10?s=128&d=identicon&r=PG", "display_name": "ramzes2", "link": "https://stackoverflow.com/users/2191057/ramzes2"}, "edited": false, "score": 0, "creation_date": 1482937150, "post_id": 41361565, "comment_id": 69930446, "body": "Seems you lost &#39;(&#39; symbol after Q_RETURN_ARG. Try to call function in next way: <code>QMetaObject::invokeMethod(qObj, &quot;resetSomething&quot;, Q_RETURN_ARG(QVariant, returnArg) );</code>"}, {"owner": {"reputation": 7002, "user_id": 2538363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a17eb0f935aaff6b21269f57ccdc1bd?s=128&d=identicon&r=PG", "display_name": "BaCaRoZzo", "link": "https://stackoverflow.com/users/2538363/bacarozzo"}, "edited": false, "score": 1, "creation_date": 1482941361, "post_id": 41361565, "comment_id": 69932823, "body": "<code>QMetaObject::invokeMethod(qObj, &quot;resetSomething&quot;, Qt::QueuedConnection);</code> should suffice. I&#39;ve removed my previous comment on a whim but it was indeed correct. When you don&#39;t care about result and don&#39;t have parameter it seems to me that&#39;s the shortest way."}, {"owner": {"reputation": 21, "user_id": 7349647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff201c34e98e9659219016bcebe4427d?s=128&d=identicon&r=PG&f=1", "display_name": "user7349647", "link": "https://stackoverflow.com/users/7349647/user7349647"}, "edited": false, "score": 1, "creation_date": 1482994893, "post_id": 41361565, "comment_id": 69950975, "body": "Thanku!! This worked, QMetaObject::invokeMethod(qObj, &quot;resetSomething&quot;,Qt::QueuedConnection);"}, {"owner": {"reputation": 4799, "user_id": 6842725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d760417ddd74d615520fcdabd6c42ef?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Krammer", "link": "https://stackoverflow.com/users/6842725/kevin-krammer"}, "edited": false, "score": 0, "creation_date": 1483028935, "post_id": 41361565, "comment_id": 69969153, "body": "Also consider not doing this at all. Calling a function on the QML side creates a dependency from C++ to QML, restricting your flexibility on the QML side.  Depending on what you actual goal is there might be way better alternatives of doing it"}], "answers": [{"tags": [], "owner": {"reputation": 1017, "user_id": 3788340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f395b8e76dda8e86df20ae339e7a70b?s=128&d=identicon&r=PG", "display_name": "QtRoS", "link": "https://stackoverflow.com/users/3788340/qtros"}, "is_accepted": false, "score": 1, "last_activity_date": 1482992002, "creation_date": 1482992002, "answer_id": 41374107, "question_id": 41361565, "link": "https://stackoverflow.com/questions/41361565/how-to-call-a-non-parameterised-qml-function-from-c/41374107#41374107", "title": "How to call a non-parameterised QML function from C++", "body": "<p>As you can see in your error message Qt's Meta Object System is trying to find method resetSomething(<strong>QVariant</strong>), but your method doesn't have any parameters. I guess it's because of wrong <strong>Q_RETURN_ARG</strong> macro usage.<br>\nSeems that you can simply fix it like this:</p>\n\n<pre><code>QVariant returnArg;\nQMetaObject::invokeMethod(qObj, \"resetSomething\", Qt::DirectConnection,\n                          Q_RETURN_ARG(QVariant, returnArg));\n</code></pre>\n\n<p>Also I suggest you to read official <a href=\"http://doc.qt.io/qt-5/qmetaobject.html#invokeMethod\" rel=\"nofollow noreferrer\">Qt documentation</a>, it is brilliant.</p>\n\n<p>BTW: <a href=\"https://github.com/google/VoltAir\" rel=\"nofollow noreferrer\">Nice repo</a> from Google with a lot of C++/JavaScript intercommunication. You can find a lot of useful patterns there.  </p>\n"}], "owner": {"reputation": 21, "user_id": 7349647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff201c34e98e9659219016bcebe4427d?s=128&d=identicon&r=PG&f=1", "display_name": "user7349647", "link": "https://stackoverflow.com/users/7349647/user7349647"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1482992002, "creation_date": 1482925936, "last_edit_date": 1482931788, "question_id": 41361565, "link": "https://stackoverflow.com/questions/41361565/how-to-call-a-non-parameterised-qml-function-from-c", "title": "How to call a non-parameterised QML function from C++", "body": "<p>I am trying to call a function in my QML:</p>\n\n<pre><code>function resetSomething() {\n    tempVar= undefined\n}\n</code></pre>\n\n<p>I am not sure how to write the invokeMethod for this function.\nI tried using something like that:</p>\n\n<pre><code>QQuickItem* qObj= findChild&lt;QQuickItem&gt;(\"temp\");\nif (qObj)\n{\n    QVariant returnArg;\n    QMetaObject::invokeMethod(qObj, \"resetSomething\",Q_RETURN_ARG,QVariant,returnArg));\n}\n</code></pre>\n\n<p>But it gives the error</p>\n\n<blockquote>\n  <p>no matching function resetSomething(QVariant) found.</p>\n</blockquote>\n"}, {"tags": ["python", "c++", "data-structures"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1482926013, "post_id": 41361500, "comment_id": 69924208, "body": "<a href=\"http://en.cppreference.com/w/cpp/container/unordered_set\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/container/unordered_set</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4316, "user_id": 1742659, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/BpSsV.jpg?s=128&g=1", "display_name": "dfranca", "link": "https://stackoverflow.com/users/1742659/dfranca"}, "is_accepted": true, "score": 2, "last_activity_date": 1482929360, "last_edit_date": 1482929360, "creation_date": 1482926030, "answer_id": 41361595, "question_id": 41361500, "link": "https://stackoverflow.com/questions/41361500/c-o1-x-in-s-where-x-is-an-value-and-s-is-a-data-structure/41361595#41361595", "title": "C++ O(1) [x in s] where x is an value and s is a data structure", "body": "<p>You can use a <code>std::unordered_set</code> to achieve similar <a href=\"http://en.cppreference.com/w/cpp/container/unordered_set\" rel=\"nofollow noreferrer\">runtime complexity</a>.</p>\n\n<blockquote>\n  <p>Unordered set is an associative container that contains a set of\n  unique objects of type Key. Search, insertion, and removal have\n  average constant-time complexity.</p>\n</blockquote>\n\n<p>You can use the <a href=\"http://en.cppreference.com/w/cpp/container/unordered_set/find\" rel=\"nofollow noreferrer\">find method</a> to lookup a specific item.</p>\n\n<p>Or even the <a href=\"http://en.cppreference.com/w/cpp/container/unordered_set/count\" rel=\"nofollow noreferrer\">count method</a> if all you want is to determine if a specific item is on the list (return 1 or 0)</p>\n\n<p>Have in mind that Python's <code>set</code> uses a hash table to make the lookup in constant time, the same for <code>dict</code>.\nIn modern C++ a <code>std::map</code> is a binary tree, a <code>std::unordered_map</code> is a hash table, the same applies for <code>std::set</code> and <code>std::unordered_set</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": false, "score": 0, "last_activity_date": 1482926057, "creation_date": 1482926057, "answer_id": 41361601, "question_id": 41361500, "link": "https://stackoverflow.com/questions/41361500/c-o1-x-in-s-where-x-is-an-value-and-s-is-a-data-structure/41361601#41361601", "title": "C++ O(1) [x in s] where x is an value and s is a data structure", "body": "<p><code>set</code> in Python uses a hash table, the comparable in C++ is <code>[std::unordered_set][1]</code></p>\n"}], "owner": {"reputation": 31, "user_id": 6805044, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/241b4167f0847858be6904f034ff0a9e?s=128&d=identicon&r=PG&f=1", "display_name": "Arvind Ganesh", "link": "https://stackoverflow.com/users/6805044/arvind-ganesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 41361595, "answer_count": 2, "score": -1, "last_activity_date": 1482929360, "creation_date": 1482925743, "question_id": 41361500, "link": "https://stackoverflow.com/questions/41361500/c-o1-x-in-s-where-x-is-an-value-and-s-is-a-data-structure", "title": "C++ O(1) [x in s] where x is an value and s is a data structure", "body": "<p>I am learning C++ with a python background, and want to know if there is a data structure similar to the python \"set\". For the set in python, there is O(1) for x in s. What data structure in C++ has similar / same properties as the python set?</p>\n\n<p><a href=\"https://docs.python.org/2/library/sets.html\" rel=\"nofollow noreferrer\">Python Set</a></p>\n"}, {"tags": ["c++", "c++11", "typetraits"], "comments": [{"owner": {"reputation": 5455, "user_id": 4115625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2688a9684db617a20f9da3959e5890d7?s=128&d=identicon&r=PG&f=1", "display_name": "Danh", "link": "https://stackoverflow.com/users/4115625/danh"}, "edited": false, "score": 2, "creation_date": 1482926161, "post_id": 41361462, "comment_id": 69924296, "body": "It&#39;s likely a bug with <code>std::is_move_assignable_v</code> of your implementation <a href=\"http://melpon.org/wandbox/permlink/9DNHpi8cKFTF5uEH\" rel=\"nofollow noreferrer\">melpon.org/wandbox/permlink/9DNHpi8cKFTF5uEH</a>"}, {"owner": {"reputation": 1028, "user_id": 6367382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/175db0b1397c4a1080a871263e735251?s=128&d=identicon&r=PG&f=1", "display_name": "paweldac", "link": "https://stackoverflow.com/users/6367382/paweldac"}, "reply_to_user": {"reputation": 5455, "user_id": 4115625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2688a9684db617a20f9da3959e5890d7?s=128&d=identicon&r=PG&f=1", "display_name": "Danh", "link": "https://stackoverflow.com/users/4115625/danh"}, "edited": false, "score": 0, "creation_date": 1482926210, "post_id": 41361462, "comment_id": 69924331, "body": "@Danh had to say, before there was undefined behaviour in example, right now there is unexisting random access operator[] on multimap."}, {"owner": {"reputation": 5455, "user_id": 4115625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2688a9684db617a20f9da3959e5890d7?s=128&d=identicon&r=PG&f=1", "display_name": "Danh", "link": "https://stackoverflow.com/users/4115625/danh"}, "reply_to_user": {"reputation": 1028, "user_id": 6367382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/175db0b1397c4a1080a871263e735251?s=128&d=identicon&r=PG&f=1", "display_name": "paweldac", "link": "https://stackoverflow.com/users/6367382/paweldac"}, "edited": false, "score": 1, "creation_date": 1482926366, "post_id": 41361462, "comment_id": 69924414, "body": "@paweldac It&#39;s run time undefined behavior, he asked why this code can&#39;t be compiled"}], "answers": [{"comments": [{"owner": {"reputation": 33107, "user_id": 508343, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c7fe4b419ef78796ae89e40665c4394b?s=128&d=identicon&r=PG", "display_name": "xmllmx", "link": "https://stackoverflow.com/users/508343/xmllmx"}, "edited": false, "score": 0, "creation_date": 1482925966, "post_id": 41361552, "comment_id": 69924176, "body": "That&#39;s not the question. The issue is a compile-time error, rather than runtime-error. I have updated the code to avoid distracting the focus."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 33107, "user_id": 508343, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c7fe4b419ef78796ae89e40665c4394b?s=128&d=identicon&r=PG", "display_name": "xmllmx", "link": "https://stackoverflow.com/users/508343/xmllmx"}, "edited": false, "score": 0, "creation_date": 1482926119, "post_id": 41361552, "comment_id": 69924275, "body": "@xmllmx If you have a build error, then you should <i>say</i> so, not ask why it doesn&#39;t &quot;<i>behave</i> as expected&quot;. And of course include the full and complete error output in the question body."}, {"owner": {"reputation": 1028, "user_id": 6367382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/175db0b1397c4a1080a871263e735251?s=128&d=identicon&r=PG&f=1", "display_name": "paweldac", "link": "https://stackoverflow.com/users/6367382/paweldac"}, "reply_to_user": {"reputation": 33107, "user_id": 508343, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c7fe4b419ef78796ae89e40665c4394b?s=128&d=identicon&r=PG", "display_name": "xmllmx", "link": "https://stackoverflow.com/users/508343/xmllmx"}, "edited": false, "score": 0, "creation_date": 1482926152, "post_id": 41361552, "comment_id": 69924290, "body": "@xmllmx unordered_multimap doesn&#39;t have random access operator[]. Please corrent your code once again."}, {"owner": {"reputation": 1028, "user_id": 6367382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/175db0b1397c4a1080a871263e735251?s=128&d=identicon&r=PG&f=1", "display_name": "paweldac", "link": "https://stackoverflow.com/users/6367382/paweldac"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1482926642, "post_id": 41361552, "comment_id": 69924576, "body": "@Someprogrammerdude in <code>map</code> for sure, in <code>unordered_multimap</code> there is no [] operator"}, {"owner": {"reputation": 33107, "user_id": 508343, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c7fe4b419ef78796ae89e40665c4394b?s=128&d=identicon&r=PG", "display_name": "xmllmx", "link": "https://stackoverflow.com/users/508343/xmllmx"}, "edited": false, "score": 0, "creation_date": 1482926776, "post_id": 41361552, "comment_id": 69924664, "body": "@paweldac, <a href=\"http://en.cppreference.com/w/cpp/container/unordered_map\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/container/unordered_map</a> has an example showing <code>m[0]</code> is allowed."}, {"owner": {"reputation": 1028, "user_id": 6367382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/175db0b1397c4a1080a871263e735251?s=128&d=identicon&r=PG&f=1", "display_name": "paweldac", "link": "https://stackoverflow.com/users/6367382/paweldac"}, "reply_to_user": {"reputation": 33107, "user_id": 508343, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c7fe4b419ef78796ae89e40665c4394b?s=128&d=identicon&r=PG", "display_name": "xmllmx", "link": "https://stackoverflow.com/users/508343/xmllmx"}, "edited": false, "score": 0, "creation_date": 1482926891, "post_id": 41361552, "comment_id": 69924721, "body": "@xmllmx you are using  <code>std::unordered_multimap</code> not <code>std::unordered_map</code> in your code. It is even yours?"}, {"owner": {"reputation": 33107, "user_id": 508343, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c7fe4b419ef78796ae89e40665c4394b?s=128&d=identicon&r=PG", "display_name": "xmllmx", "link": "https://stackoverflow.com/users/508343/xmllmx"}, "edited": false, "score": 0, "creation_date": 1482927027, "post_id": 41361552, "comment_id": 69924808, "body": "@paweldac My compiler indeed cannot compile <code>m[0] = &quot;hello&quot;</code>. I have revised the code. The documentation&#39;s example is wrong."}], "tags": [], "owner": {"reputation": 1028, "user_id": 6367382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/175db0b1397c4a1080a871263e735251?s=128&d=identicon&r=PG&f=1", "display_name": "paweldac", "link": "https://stackoverflow.com/users/6367382/paweldac"}, "is_accepted": false, "score": 0, "last_activity_date": 1482925897, "creation_date": 1482925897, "answer_id": 41361552, "question_id": 41361462, "link": "https://stackoverflow.com/questions/41361462/why-does-stdis-move-assignable-not-behave-as-expected/41361552#41361552", "title": "Why does [std::is_move_assignable] not behave as expected?", "body": "<p>Dereferencing <code>.begin()</code> iterator of empty container is undefined behaviour.</p>\n"}, {"comments": [{"owner": {"reputation": 33107, "user_id": 508343, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c7fe4b419ef78796ae89e40665c4394b?s=128&d=identicon&r=PG", "display_name": "xmllmx", "link": "https://stackoverflow.com/users/508343/xmllmx"}, "edited": false, "score": 0, "creation_date": 1482927755, "post_id": 41362026, "comment_id": 69925253, "body": "I have updated the code. Use <code>std::move(*m4.begin())</code> instead."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 33107, "user_id": 508343, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c7fe4b419ef78796ae89e40665c4394b?s=128&d=identicon&r=PG", "display_name": "xmllmx", "link": "https://stackoverflow.com/users/508343/xmllmx"}, "edited": false, "score": 4, "creation_date": 1482927949, "post_id": 41362026, "comment_id": 69925367, "body": "@xmllmx Please don&#39;t focus on a single sentence. It doesn&#39;t change the rest of my answer, which covers <code>v = std::move(*m4.begin());</code> already."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1483058292, "post_id": 41362026, "comment_id": 69980562, "body": "This is <a href=\"https://timsong-cpp.github.io/lwg-issues/2729\" rel=\"nofollow noreferrer\">LWG issue 2729</a>. Also OP is using <code>is_move_assignable</code> wrong: that <code>decltype</code> returns a reference type."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1483081812, "post_id": 41362026, "comment_id": 69986222, "body": "@T.C. Huh. And <code>is_move_assignable</code> is well-defined for lvalue reference types, and actually ends up checking something different, something very close to whether the type is copy-assignable. Thanks, and for the link."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1483082768, "post_id": 41362026, "comment_id": 69986639, "body": "@T.C. I linked to <a href=\"https://cplusplus.github.io/LWG/\" rel=\"nofollow noreferrer\">cplusplus.github.io/LWG</a> rather than <a href=\"https://timsong-cpp.github.io/lwg-issues/\" rel=\"nofollow noreferrer\">timsong-cpp.github.io/lwg-issues</a> though; I like the idea of the latter, but if it needs to be updated manually, I worry that in the future it will end up outdated."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1483083904, "post_id": 41362026, "comment_id": 69987073, "body": "@hvd Mine is currently more up-to-date than LWG&#39;s official ones :) (They merged a few pull requests to the sources, but haven&#39;t yet updated the HTML version.) But link to whichever one you prefer - I created mine because I don&#39;t want to load lots of gigantic issue lists when I want to have many issues open at once."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1483085835, "post_id": 41362026, "comment_id": 69987679, "body": "@T.C. Sorry, I misread. The final sentence is not <i>intended</i> to be a complete sentence. I deleted my earlier comment."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "is_accepted": false, "score": 5, "last_activity_date": 1483085281, "last_edit_date": 1483085281, "creation_date": 1482927516, "answer_id": 41362026, "question_id": 41361462, "link": "https://stackoverflow.com/questions/41361462/why-does-stdis-move-assignable-not-behave-as-expected/41362026#41362026", "title": "Why does [std::is_move_assignable] not behave as expected?", "body": "<blockquote>\n  <p>If <code>b</code> is true, then <code>v = *m4.begin();</code> should be ok.</p>\n</blockquote>\n\n<p><code>v = *m4.begin();</code> is copy assignment, not move assignment. Move assignment is <code>v = std::move(*m4.begin());</code>.</p>\n\n<p>But as T.C. points out and Yam Marcovic answered as well, your use of <code>std::is_move_assignable</code> is wrong, because <code>decltype(*m.begin())</code> is a reference type. You end up not quite checking for move assignability, and your check <em>does</em> end up right for <code>v = *m4.begin();</code>.</p>\n\n<p>For move assignment, the check should be <code>std::is_move_assignable_v&lt;std::remove_reference_t&lt;decltype(*m.begin())&gt;&gt;</code>.</p>\n\n<p>Anyway, <code>is_move_assignable</code> doesn't try too hard to check whether the type is move assignable, it only checks whether the type reports itself as move assignable.</p>\n\n<p>Given</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct S {\n  S &amp;operator=(S &amp;&amp;) { T() = \"Hello\"; return *this; }\n};\n</code></pre>\n\n<p><code>std::is_move_assignable&lt;S&lt;int&gt;&gt;::value</code> will report <code>true</code>, because the signature <code>S&lt;int&gt; S::operator=(S&lt;int&gt; &amp;&amp;);</code> is well-formed. Attempting to actually call it will trigger an error, since <code>T()</code> cannot be assigned to, and even if it could be, it couldn't be assigned a string.</p>\n\n<p>In your case, the type is <code>std::pair&lt;const int, std::string&gt;</code>. Note the <code>const</code> there.</p>\n\n<p><code>std::pair&lt;T1, T2&gt;</code> currently always declares <code>operator=</code>, but if either <code>T1</code> or <code>T2</code> cannot be assigned to, attempting to actually use it will produce an error.</p>\n\n<p>Class templates may make sure that a valid signature of <code>operator=</code> is only declared if its instantiation would be well-formed to avoid this problem, and as also pointed out by T.C., <a href=\"https://cplusplus.github.io/LWG/lwg-defects.html#2729\" rel=\"nofollow noreferrer\"><code>std::pair</code> will do so in the future</a>.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 0, "creation_date": 1483085623, "post_id": 41363995, "comment_id": 69987601, "body": "Nice, I had missed this and had not seen your answer until T.C. pointed out the same thing. It&#39;s not quite the same as copy-assignable though. It&#39;s possible, but probably a very bad idea, to only have an <code>operator=</code> overload taking <code>S&amp;</code>, which would make <code>S</code> not copy-assignable."}], "tags": [], "owner": {"reputation": 7447, "user_id": 602372, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/q6bLu.jpg?s=128&g=1", "display_name": "Yam Marcovic", "link": "https://stackoverflow.com/users/602372/yam-marcovic"}, "is_accepted": false, "score": 3, "last_activity_date": 1482939243, "last_edit_date": 1482939243, "creation_date": 1482935016, "answer_id": 41363995, "question_id": 41361462, "link": "https://stackoverflow.com/questions/41361462/why-does-stdis-move-assignable-not-behave-as-expected/41363995#41363995", "title": "Why does [std::is_move_assignable] not behave as expected?", "body": "<p>First, as <code>*begin()</code> <a href=\"http://en.cppreference.com/w/cpp/concept/InputIterator\" rel=\"nofollow noreferrer\">returns an lvalue reference</a>, you're actually passing an lvalue reference to <code>std::is_move_assignable</code>, which is then implemented by means of <code>std::is_assignable&lt;T&amp;, T&amp;&amp;&gt;</code>. Now, notice the forwarding reference there, which converts to an lvalue reference. This means that by asking <code>std::is_move_assignable&lt;SomeType&amp;&gt;</code> you have effectively asked <code>std::is_assignable&lt;T&amp;, T&amp;&gt;</code>&mdash;i.e. copy-assignable. Granted, this is a bit misleading.</p>\n\n<p>You might want to test this code to see my point:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\nstruct S {\n    S&amp; operator=(const S&amp;) = default;\n    S&amp; operator=(S&amp;&amp;) = delete;\n};\n\nint main()\n{\n    std::cout &lt;&lt; std::is_move_assignable&lt;S&gt;::value; // 0\n    std::cout &lt;&lt; std::is_move_assignable&lt;S&amp;&gt;::value; // 1\n}\n</code></pre>\n\n<p>All that said, <code>*begin()</code> in this case returns a <code>pair&lt;const int, string&gt;&amp;</code>, so it would not be any-kind-of-assignable anyhow, because you cannot assign to a <code>const int</code>. However, as @hvd pointed out, since the function is declared in principal in the <code>pair</code> template, the type trait does not understand that if it were ever generated into an actual function by the compiler, the latter would encounter an error.</p>\n"}], "owner": {"reputation": 33107, "user_id": 508343, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c7fe4b419ef78796ae89e40665c4394b?s=128&d=identicon&r=PG", "display_name": "xmllmx", "link": "https://stackoverflow.com/users/508343/xmllmx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 529, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1483085281, "creation_date": 1482925610, "last_edit_date": 1482927689, "question_id": 41361462, "link": "https://stackoverflow.com/questions/41361462/why-does-stdis-move-assignable-not-behave-as-expected", "title": "Why does [std::is_move_assignable] not behave as expected?", "body": "<pre><code>#include &lt;unordered_map&gt;\n#include &lt;type_traits&gt;\n\nint main()\n{\n        std::unordered_multimap&lt;int, string&gt; m{ { 1, \"hello\" } };\n        auto b = std::is_move_assignable_v&lt;decltype(*m.begin())&gt;;\n        // b is true\n\n        auto v = *m4.begin(); // ok\n        v = std::move(*m4.begin()); // compile-time error\n}\n</code></pre>\n\n<p><strong>Issue:</strong></p>\n\n<blockquote>\n  <p>If <code>b</code> is true, then <code>v = *m4.begin();</code> should be ok.</p>\n</blockquote>\n\n<p><strong>Question:</strong></p>\n\n<blockquote>\n  <p>Why does <code>std::is_move_assignable</code> not behave as expected?</p>\n</blockquote>\n\n<p><strong>Error messages: (Clang 3.8 + Visual Studio 2015 Update 3)</strong></p>\n\n<blockquote>\n<pre><code>error : cannot assign to non-static data member 'first' with\nconst-qualified type 'const int'\n              first = _Right.first;\n              ~~~~~ ^\n\nmain.cpp(119,5) :  note: in instantiation of member function\n'std::pair&lt;const int, std::basic_string&lt;char, std::char_traits&lt;char&gt;,\nstd::allocator&lt;char&gt; &gt; &gt;::operator=' requested here\n              v = *m4.begin(); // error\n</code></pre>\n</blockquote>\n"}, {"tags": ["c++", "arduino", "interrupt", "ticker"], "answers": [{"comments": [{"owner": {"reputation": 578, "user_id": 6118556, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vZkOa.jpg?s=128&g=1", "display_name": "pfabri", "link": "https://stackoverflow.com/users/6118556/pfabri"}, "edited": false, "score": 0, "creation_date": 1482927381, "post_id": 41361611, "comment_id": 69925013, "body": "Thank you for your answer. Is there a way to disable this flag setting? I don&#39;t want the <code>ticker</code> timer to perform an interrupt once the button has been pressed. This is why I asked about ranks and the ability to disable on type of interrupt, if there is such a thing..."}, {"owner": {"reputation": 1415, "user_id": 4057102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50429f44272e21a5b54ea574de5816c7?s=128&d=identicon&r=PG&f=1", "display_name": "Chris A", "link": "https://stackoverflow.com/users/4057102/chris-a"}, "reply_to_user": {"reputation": 578, "user_id": 6118556, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vZkOa.jpg?s=128&g=1", "display_name": "pfabri", "link": "https://stackoverflow.com/users/6118556/pfabri"}, "edited": false, "score": 0, "creation_date": 1482930232, "post_id": 41361611, "comment_id": 69926566, "body": "@pfabri I have edited my answer to look at your question above."}, {"owner": {"reputation": 578, "user_id": 6118556, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vZkOa.jpg?s=128&g=1", "display_name": "pfabri", "link": "https://stackoverflow.com/users/6118556/pfabri"}, "edited": false, "score": 0, "creation_date": 1482937794, "post_id": 41361611, "comment_id": 69930806, "body": "Yes, I do a (tested) software debounce on the button. I understand your suggestion, but even if the button interrupt does nothing else than setting a global flag, if the timer requests an interrupt concurrently, than as soon as the button interrupt exits, the timer interrupt will be pulled from the IR queue and executed, which will in turn rewrite the global flag set by the button interrupt. As a result, <code>loop()</code> will think that the interrupt came from the timer. Can&#39;t I just use <code>noInterrupts()</code> to have timer IRs <i>ignored</i> inside the button interrupt? That&#39;s all I&#39;d need."}, {"owner": {"reputation": 1415, "user_id": 4057102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50429f44272e21a5b54ea574de5816c7?s=128&d=identicon&r=PG&f=1", "display_name": "Chris A", "link": "https://stackoverflow.com/users/4057102/chris-a"}, "reply_to_user": {"reputation": 578, "user_id": 6118556, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vZkOa.jpg?s=128&g=1", "display_name": "pfabri", "link": "https://stackoverflow.com/users/6118556/pfabri"}, "edited": false, "score": 0, "creation_date": 1482938401, "post_id": 41361611, "comment_id": 69931156, "body": "@pfabri &quot;<i>As a result, loop() will think that the interrupt came from the timer</i>&quot; -- I&#39;m talking about a simple <code>bool</code> value, this does not need to be touched by the timer ISR.  And no, <code>noInterrupts</code> will do nothing in the ISR as the global interrupts are already disabled, the interrupts are still flagged as waiting, and will continue after the current ISR returns.    &quot;<i>have timer IRs ignored inside the button interrupt?</i>&quot;   You can use a <code>volatile bool</code>, then in button ISR, set true on entry, false on return. Then in the timer ISR, if the bool is true, return and do nothing."}, {"owner": {"reputation": 578, "user_id": 6118556, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vZkOa.jpg?s=128&g=1", "display_name": "pfabri", "link": "https://stackoverflow.com/users/6118556/pfabri"}, "edited": false, "score": 0, "creation_date": 1482939697, "post_id": 41361611, "comment_id": 69931863, "body": "<i>&quot;You can use a volatile bool, then in button ISR, set true on entry, false on return. Then in the timer ISR, if the bool is true, return and do nothing.&quot;</i> But doesn&#39;t this contradict what you said earlier? If the timer IR waits in a queue until the button IR finishes AND if the the button IR exits by setting the flag <i>&quot;false on return&quot;</i>, then by the time the timer IR fires, this flag will always be false. Or am I misunderstanding something completely? Only asking, because this is exactly what I tried earlier, but apparently, the two IRs still interfere this way."}, {"owner": {"reputation": 1415, "user_id": 4057102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50429f44272e21a5b54ea574de5816c7?s=128&d=identicon&r=PG&f=1", "display_name": "Chris A", "link": "https://stackoverflow.com/users/4057102/chris-a"}, "reply_to_user": {"reputation": 578, "user_id": 6118556, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vZkOa.jpg?s=128&g=1", "display_name": "pfabri", "link": "https://stackoverflow.com/users/6118556/pfabri"}, "edited": false, "score": 0, "creation_date": 1482940433, "post_id": 41361611, "comment_id": 69932288, "body": "@pfabri Sorry, yes, I was working on the trail of thought that the timer interrupt could be enabled inside the button ISR. The same logic could be applied to my earlier suggestion: Use the button ISR to flag the loop, then in the loop code, you could disable interrupts while checking the button, and enable afterwards. Then the timer ISR will either run before or after the button code, but never in the middle of it."}, {"owner": {"reputation": 578, "user_id": 6118556, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vZkOa.jpg?s=128&g=1", "display_name": "pfabri", "link": "https://stackoverflow.com/users/6118556/pfabri"}, "edited": false, "score": 0, "creation_date": 1482941008, "post_id": 41361611, "comment_id": 69932611, "body": "Sorry to be a pain, but what if I must use an ISR for the button press? Is that a no-go unless I can access the IRS register and reset it?"}, {"owner": {"reputation": 1415, "user_id": 4057102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50429f44272e21a5b54ea574de5816c7?s=128&d=identicon&r=PG&f=1", "display_name": "Chris A", "link": "https://stackoverflow.com/users/4057102/chris-a"}, "reply_to_user": {"reputation": 578, "user_id": 6118556, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vZkOa.jpg?s=128&g=1", "display_name": "pfabri", "link": "https://stackoverflow.com/users/6118556/pfabri"}, "edited": false, "score": 0, "creation_date": 1482941665, "post_id": 41361611, "comment_id": 69932987, "body": "You can use whichever method you like, as per my suggestion in my last comment, you would be using the ISR to detect the button press, and acting on it elsewhere. I think this is an X/Y problem though. Rather than trying to stop the button ISR from queuing in the timer ISR, change the button code to only do something if it is expected. Is there a difference between the button ISR being queued and run after the timer, compared to the button being pushed after the timer ISR. Either way both scenarios happen after the timer ISR."}], "tags": [], "owner": {"reputation": 1415, "user_id": 4057102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50429f44272e21a5b54ea574de5816c7?s=128&d=identicon&r=PG&f=1", "display_name": "Chris A", "link": "https://stackoverflow.com/users/4057102/chris-a"}, "is_accepted": true, "score": 1, "last_activity_date": 1482930201, "last_edit_date": 1482930201, "creation_date": 1482926125, "answer_id": 41361611, "question_id": 41361450, "link": "https://stackoverflow.com/questions/41361450/could-ticker-interrupts-interfere-with-hardware-interrupts/41361611#41361611", "title": "Could ticker interrupts interfere with hardware interrupts?", "body": "<p>I'mm assuming you are using an AVR.</p>\n\n<p>When an interrupt fires, other interrupts are disabled while the interrupt routine is running. So any interrupts that occur in this time simply get flagged. When the interrupt routine returns, the global interrupt flag is re-enabled and any polled interrupts can then fire one at a time.</p>\n\n<p>You can manually enable the global interrupts inside the routine for critical things that must run, but are disabled by default.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<blockquote>\n  <p>Is there a way to disable this flag setting? I don't want the ticker timer to perform an interrupt once the button has been pressed. This is why I asked about ranks and the ability to disable on type of interrupt, if there is such a thing</p>\n</blockquote>\n\n<p>You can clear the pending interrupt, however you'll have to read the datasheet for your Arduino's AVR. You need to find the register for the external interrupt.</p>\n\n<p>For example, on an atmega328p, external interrupt 0 can be cleared by setting its flag bit to 1:</p>\n\n<p><code>EIFR |= (1 &lt;&lt; INTF2);</code></p>\n\n<p><code>EIFR</code> = External Interrupt Flag Register<br>\n<code>INTF2</code> = Bit 0 \u2013 INTF0:\u2000External Interrupt Flag 0</p>\n\n<p>However, it may be far simpler to poll the button in your <code>loop()</code> function. Or at best, simply set a flag for you to act upon back in the <code>loop()</code> function. There you would be able to decide if you want to react or ignore to the interrupt</p>\n\n<p>There is the issue of having your interrupts far too large. If you use timing, or require accuracy, this could be affected by a large amount over time. As the interrupt queue length is only 1 deep some interrupts could be lost. And the interrupt which powers <code>millis()</code> &amp; <code>micros()</code> runs multiple times per millisecond, so a bulky interrupt could end up slowing down time.</p>\n\n<p>Also do you have any debouncing code or hardware?</p>\n\n<p>If not, the interrupt handling the button could be run multiple times on a single press.</p>\n"}], "owner": {"reputation": 578, "user_id": 6118556, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vZkOa.jpg?s=128&g=1", "display_name": "pfabri", "link": "https://stackoverflow.com/users/6118556/pfabri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 403, "favorite_count": 0, "accepted_answer_id": 41361611, "answer_count": 1, "score": 1, "last_activity_date": 1482930201, "creation_date": 1482925575, "question_id": 41361450, "link": "https://stackoverflow.com/questions/41361450/could-ticker-interrupts-interfere-with-hardware-interrupts", "title": "Could ticker interrupts interfere with hardware interrupts?", "body": "<h2>Background</h2>\n\n<p>I was wondering if using <code>ticker</code> interrupts could interfere with hardware interrupts triggered by a button press.</p>\n\n<h2>Example</h2>\n\n<p>Imagine I would like to use these two types of interrupts:</p>\n\n<ol>\n<li>a <code>ticker</code> timer to update a progress bar on a small display every <code>n</code> second</li>\n<li>a <code>hardware interrupt</code> that starts/stops the process whose progress is displayed if the user presses a button</li>\n</ol>\n\n<p><strong>Important:</strong> Both interrupts set shared global <code>volatile</code> flags.</p>\n\n<h2>Main question</h2>\n\n<p>Would it be possible for the <code>ticker</code> interrupt to occur <strong>during</strong> a button induced interrupt and as a result for the program to end up in a state where the global flags are set contradictorily? </p>\n\n<h3>More specific questions</h3>\n\n<p>Does a hardware and a software interrupt have the same 'rank'?</p>\n\n<p>If they occured at the same time, would the interrupt request occurring slightly later (but still overlapping with the first one) be ignored, or just put into a queue and execute straight after the first interrupt has finished? In this case, the flags would be set in an unexpected manner.</p>\n\n<p>Can I disable one type of the interrupts inside the other type's ISR - i.e. ignore it?</p>\n\n<p>I hope the problem statement is clear enough even without a code example.</p>\n"}, {"tags": ["c++", "templates", "lambda", "c++14", "type-inference"], "comments": [{"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 1, "creation_date": 1482925710, "post_id": 41361446, "comment_id": 69924021, "body": "<a href=\"http://stackoverflow.com/questions/21657627/what-is-the-type-signature-of-a-c11-1y-lambda-function\" title=\"what is the type signature of a c11 1y lambda function\">stackoverflow.com/questions/21657627/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4783, "user_id": 3854787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WRLaI.jpg?s=128&g=1", "display_name": "C&#225;ssio Renan", "link": "https://stackoverflow.com/users/3854787/c%c3%a1ssio-renan"}, "edited": false, "score": 1, "creation_date": 1482942033, "post_id": 41363757, "comment_id": 69933182, "body": "Great answer, thanks! Your final solution works great, but unfortunately I need to be able to distinguigh the lambda&#39;s parameter type(s) in my template instance. I guess I&#39;ll stick to only supporting non-capturing lambdas, as it&#39;s not a terrible limitation in my scenario."}], "tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": true, "score": 1, "last_activity_date": 1482934398, "last_edit_date": 1482934398, "creation_date": 1482934047, "answer_id": 41363757, "question_id": 41361446, "link": "https://stackoverflow.com/questions/41361446/how-to-infer-a-function-type-parameter-in-a-template-function-with-a-lambda-pass/41363757#41363757", "title": "How to infer a function type parameter in a template function with a lambda passed as argument?", "body": "<p>The actual problem is that a lambda function has it own type, that cannot be reduced to <code>R(&amp;)(T)</code>. Because of that, <code>C&lt;T&gt;</code> is an incomplete type as correctly outlined by the compiler.</p>\n\n<hr>\n\n<p>As long as you use non-capturing lambdas, you can rely on the fact that they decay to function pointers and do this:</p>\n\n<pre><code>auto p3 = makeC(*(+[](int a){return a;}));\n</code></pre>\n\n<p>Or this:</p>\n\n<pre><code>template&lt;typename T&gt;\nauto makeC(T&amp;&amp; fun) -&gt; C&lt;decltype(*(+std::forward&lt;T&gt;(fun)))&gt; {\n    return C&lt;decltype(*(+std::forward&lt;T&gt;(fun)))&gt;(std::forward&lt;T&gt;(fun));\n}\n</code></pre>\n\n<p>Another possible solution that works with capturing lambdas is this:</p>\n\n<pre><code>#include &lt;utility&gt;\n#include &lt;string&gt;\n\ntemplate&lt;typename T&gt;\nclass C: T {\n    template&lt;typename F&gt;\n    C(F&amp;&amp; fun): T{std::forward&lt;F&gt;(fun)} {}\n};\n\ntemplate&lt;typename R, typename T&gt;\nclass C&lt;R(&amp;)(T)&gt; {\npublic:\n    template&lt;typename F&gt;\n    C(F&amp;&amp; fun) {}\n};\n\ntemplate&lt;typename T&gt;\nC&lt;T&gt; makeC(T&amp;&amp; fun) {\n    return C&lt;T&gt;(std::forward&lt;T&gt;(fun));\n}\n\nint foo(int a){return a;}\n\nint main() {\n    auto p1 = makeC(foo);\n    auto p2 = C&lt;int(&amp;)(int)&gt;([](int a){return a;});\n    auto p3 = makeC([](int a){return a;});\n}\n</code></pre>\n\n<p>This way, when dealing with a lambda, <code>C</code> actually inherits from it and privately <em>contains</em> its <code>operator()</code>.</p>\n"}], "owner": {"reputation": 4783, "user_id": 3854787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WRLaI.jpg?s=128&g=1", "display_name": "C&#225;ssio Renan", "link": "https://stackoverflow.com/users/3854787/c%c3%a1ssio-renan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 278, "favorite_count": 0, "accepted_answer_id": 41363757, "answer_count": 1, "score": 1, "last_activity_date": 1482934398, "creation_date": 1482925556, "question_id": 41361446, "link": "https://stackoverflow.com/questions/41361446/how-to-infer-a-function-type-parameter-in-a-template-function-with-a-lambda-pass", "title": "How to infer a function type parameter in a template function with a lambda passed as argument?", "body": "<p>Consider the following:</p>\n\n<pre><code>#include &lt;utility&gt;\n#include &lt;string&gt;\n\ntemplate&lt;typename&gt;\nclass C;\n\ntemplate&lt;typename R, typename T&gt;\nclass C&lt;R(&amp;)(T)&gt; {\npublic:\n    template&lt;typename F&gt;\n    C(F&amp;&amp; fun) {}\n};\n\ntemplate&lt;typename T&gt;\nC&lt;T&gt; makeC(T&amp;&amp; fun) {\n    return C&lt;T&gt;(std::forward&lt;T&gt;(fun));\n}\n\nint foo(int a){return a;}\n\nint main() {\n    auto p1 = makeC(foo); // OK\n    auto p2 = C&lt;int(&amp;)(int)&gt;([](int a){return a;});   // OK\n    // auto p3 = makeC([](int a){return a;}); // FAIL\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/63f46d7e92870e82\" rel=\"nofollow noreferrer\">Live example</a></p>\n\n<p>The declaration of <code>p3</code> fails because the compiler can't infer the type <code>int(&amp;)(int)</code> from the lambda that was passed as parameter. <code>p1</code> is ok because the type can be easily infered from the function <code>foo</code>, and <code>p2</code> is ok because the type is explicitly declared.</p>\n\n<p>It fails with:</p>\n\n<p><code>error: invalid use of incomplete type 'class C&lt;main()::&lt;lambda(int)&gt; &gt;'</code></p>\n\n<p>Is there any way to make the compiler infer the function type corretly, given a lambda?</p>\n\n<blockquote>\n  <p>P.S.: C++17 answers are also ok, if applicable.</p>\n</blockquote>\n"}, {"tags": ["c++", "qt", "qt5.6"], "comments": [{"owner": {"reputation": 2789, "user_id": 1217285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1t2xu.jpg?s=128&g=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/1217285/dmitry"}, "edited": false, "score": 0, "creation_date": 1482926720, "post_id": 41361417, "comment_id": 69924623, "body": "Well, if removing that line helps to avoid the crash, why won&#39;t you simply call <code>setValue(0)</code> after the object is fully constructed? If that&#39;s inconvenient, you can schedule the call of <code>setValue(0)</code> at the end of the constructor via <a href=\"https://doc.qt.io/qt-5/qmetaobject.html#invokeMethod\" rel=\"nofollow noreferrer\">QMetaObject::invokeMethod</a> or by a queued signal-slot connection. Or do you wish to understand why exactly the crash occurs?"}, {"owner": {"reputation": 764, "user_id": 2899478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juuUm.jpg?s=128&g=1", "display_name": "o_weisman", "link": "https://stackoverflow.com/users/2899478/o-weisman"}, "edited": false, "score": 0, "creation_date": 1482927003, "post_id": 41361417, "comment_id": 69924787, "body": "I think it makes sense that when you try to change properties of an object while you are constructing it, bad things can happen."}, {"owner": {"reputation": 264, "user_id": 3629327, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/FAW2a.jpg?s=128&g=1", "display_name": "Wilmort", "link": "https://stackoverflow.com/users/3629327/wilmort"}, "edited": false, "score": 0, "creation_date": 1482927764, "post_id": 41361417, "comment_id": 69925258, "body": "Yeah, I know these but I want to understand that why exactly the crash occurs?"}, {"owner": {"reputation": 264, "user_id": 3629327, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/FAW2a.jpg?s=128&g=1", "display_name": "Wilmort", "link": "https://stackoverflow.com/users/3629327/wilmort"}, "reply_to_user": {"reputation": 2789, "user_id": 1217285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1t2xu.jpg?s=128&g=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/1217285/dmitry"}, "edited": false, "score": 0, "creation_date": 1482929538, "post_id": 41361417, "comment_id": 69926192, "body": "@Dmitry even setValue(0) is called after constructing of object, crash still occurs."}, {"owner": {"reputation": 2789, "user_id": 1217285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1t2xu.jpg?s=128&g=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/1217285/dmitry"}, "edited": false, "score": 0, "creation_date": 1482930417, "post_id": 41361417, "comment_id": 69926665, "body": "I can see there&#39;s <a href=\"https://bugreports.qt.io/browse/QTBUG-31046\" rel=\"nofollow noreferrer\">this bug</a> in Qt&#39;s bugtracker. It seems to be fixed but probably you encounter some different posing of things in which the bug still exists."}, {"owner": {"reputation": 264, "user_id": 3629327, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/FAW2a.jpg?s=128&g=1", "display_name": "Wilmort", "link": "https://stackoverflow.com/users/3629327/wilmort"}, "edited": false, "score": 0, "creation_date": 1482931011, "post_id": 41361417, "comment_id": 69926996, "body": "Yeah, it might be. Please remove minus point whoever gave, so people can look this issue more carefully.."}, {"owner": {"reputation": 1513, "user_id": 6624417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a73a12db09cb90a99be14fa2bb7b6096?s=128&d=identicon&r=PG&f=1", "display_name": "E4z9", "link": "https://stackoverflow.com/users/6624417/e4z9"}, "edited": false, "score": 0, "creation_date": 1482952936, "post_id": 41361417, "comment_id": 69938393, "body": "Could you please show us a backtrace of the crash?"}, {"owner": {"reputation": 7180, "user_id": 2666212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/874561e399041a45c82c2ca6652400b6?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2666212/mike"}, "edited": false, "score": 0, "creation_date": 1482954032, "post_id": 41361417, "comment_id": 69938858, "body": "@Wilmort, Please write an <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>, so that people can help you. Remove irrelevant code, and show us a minimum example that can reproduce the bug. This question can not be answered as it is, you don&#39;t even show where are the signals exactly emitted. Anyway, a common mistake is doing GUI operations from worker threads, so make sure you don&#39;t end up calling <code>setValue</code> from the thread pool, all GUI operations should happen in the GUI thread, see <a href=\"https://doc.qt.io/qt-5/thread-basics.html#gui-thread-and-worker-thread\" rel=\"nofollow noreferrer\">here</a>."}], "owner": {"reputation": 264, "user_id": 3629327, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/FAW2a.jpg?s=128&g=1", "display_name": "Wilmort", "link": "https://stackoverflow.com/users/3629327/wilmort"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 354, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1482929592, "creation_date": 1482925462, "last_edit_date": 1482929592, "question_id": 41361417, "link": "https://stackoverflow.com/questions/41361417/qprogressdialog-when-setvalue0-is-called", "title": "QProgressDialog when setValue(0) is called", "body": "<p>I have a class that is inherited from QProgressDialog. It sometimes crashes and its inside QProgressDialog class code.</p>\n\n<p>I detected that when the <code>setValue(0);</code> is called in its constructor, crash happens. When I commented out this function, It does not crash. Even if setValue(0) is called after constructing of object crash still occurs.</p>\n\n<p>This crash occurs when signals are emitted faster. Code piece shows how the function is called:</p>\n\n<pre><code>ProgressDialog progress(nullptr);\nprogress.setLabelText(\"Loading Result Files\");\nQFutureWatcher&lt;void&gt; watcher;\nQFuture&lt;void&gt; future = QtConcurrent::run(myClassPtr,&amp;myClass::myFunc);\n\nQEventLoop loop;\nQObject::connect(&amp;watcher, SIGNAL(started()), &amp;progress, SLOT(show()));\nQObject::connect(&amp;watcher, SIGNAL(finished()), &amp;progress, SLOT(hide()));\nQObject::connect(&amp;watcher, SIGNAL(finished()), &amp;loop, SLOT(quit()));\nQObject::connect(transientAnimation, SIGNAL(progress(int)), &amp;progress, SLOT(setValue(int)));\n\nwatcher.setFuture(future);\n\nloop.exec();\n</code></pre>\n\n<p>progress signal is emitted inside myFunc() in another thread. In this function, multiple files are read in a folder and progress signal is emitted.</p>\n\n<p>Why does this crash occur? </p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c++", "static-libraries", "maintainability"], "answers": [{"comments": [{"owner": {"reputation": 6029, "user_id": 3577745, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4646095ed212f8392ed0cd522b84e7e3?s=128&d=identicon&r=PG&f=1", "display_name": "javaLover", "link": "https://stackoverflow.com/users/3577745/javalover"}, "edited": false, "score": 0, "creation_date": 1482927074, "post_id": 41361616, "comment_id": 69924836, "body": "Your answer is concise and complete. Thank!"}], "tags": [], "owner": {"reputation": 1622, "user_id": 7343388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d0dc7456b14b1a70bd862e8495d36a6?s=128&d=identicon&r=PG", "display_name": "Soeren", "link": "https://stackoverflow.com/users/7343388/soeren"}, "is_accepted": true, "score": 2, "last_activity_date": 1482926137, "last_edit_date": 1592644375, "creation_date": 1482926137, "answer_id": 41361616, "question_id": 41361386, "link": "https://stackoverflow.com/questions/41361386/criteria-when-using-libraries-use-librarys-data-type-vs-create-my-own-type/41361616#41361616", "title": "Criteria when using libraries - use Library&#39;s data type VS create my own type?", "body": "<p><a href=\"https://en.wikipedia.org/wiki/Robert_Cecil_Martin\" rel=\"nofollow noreferrer\">Robert C. Martin</a> said in his Book, Clean Code:\nIt is always a good practice to wrap 3rd Party Code.\nMike Finney quotes Martin in his <a href=\"http://smilingfinney.blogspot.de/2008/11/wrapping-3rd-party-code-is-clean-code.html\" rel=\"nofollow noreferrer\">Blog</a> and summarize it:</p>\n<blockquote>\n<ul>\n<li><p>The third party code can evolve</p>\n</li>\n<li><p>Your wrapper's interface can be made to precisely suit your application's needs</p>\n</li>\n</ul>\n</blockquote>\n<p>in your situation, i would write my own classes to wrap the vector and matrices library classes.\nAnother advantage is that your code is only dependent on what it really needs.</p>\n"}], "owner": {"reputation": 6029, "user_id": 3577745, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4646095ed212f8392ed0cd522b84e7e3?s=128&d=identicon&r=PG&f=1", "display_name": "javaLover", "link": "https://stackoverflow.com/users/3577745/javalover"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 41361616, "answer_count": 1, "score": 1, "last_activity_date": 1482926137, "creation_date": 1482925373, "last_edit_date": 1482925694, "question_id": 41361386, "link": "https://stackoverflow.com/questions/41361386/criteria-when-using-libraries-use-librarys-data-type-vs-create-my-own-type", "title": "Criteria when using libraries - use Library&#39;s data type VS create my own type?", "body": "<p>I am coding a game that use many open-source libraries, each library has its own type for representing 3D vector :-   </p>\n\n<ul>\n<li><strong>Bullet</strong> (a Physics engine library) : <strong>Vector3</strong>.</li>\n<li><strong>Ogre</strong> (a 3D rendering library) : <strong>Ogre::Vector3</strong>.</li>\n<li><strong>Eigen</strong> (a matrix manipulation library) : <strong>Vector3d</strong>.</li>\n</ul>\n\n<p>Even those libraries are popular-and-high-quality, but I don't want to depend on those too much.       </p>\n\n<p>Thus, I have decided to create my own type named <strong>Vect3</strong>, and create convertors between them.</p>\n\n<p>It suits my demand very well because my game logic want to manipulate Vector 3D.      </p>\n\n<p>It makes sense especially in a scope that <strong>Vect3</strong> doesn't related to physics,rendering or matrix manipulation at all.</p>\n\n<h2>Problem</h2>\n\n<p>I am coding an AI module, which heavily use <strong>Eigen</strong>.<br>\nFor a prototype, I use <strong>Eigen::MatrixXf</strong> a lot.<br>\n<strong>MatrixXf</strong> is a far more complex structure comparing to <strong>Vector3</strong>.    </p>\n\n<p>I plan to create my own class <strong>MyMatrix</strong> and refactor the AI to use <strong>MyMatrix</strong> instead of <strong>Eigen::MatrixXf</strong>. </p>\n\n<p>I doubt whether it is a good decision.<br>\nIn other words, should I create my own datatype for everything I see and want to use?     </p>\n\n<h2>Question</h2>\n\n<p>What are the criteria to pick one of these choices for a type that already exists in one or more external libraries?<br>\n<strong>A.</strong> The type should be created as a new class.<br>\n<strong>B.</strong> Use library type (and which one?).</p>\n\n<h2>My current criteria</h2>\n\n<ul>\n<li><p>(Strong) How much the type related to a certain library?  Highly related = <strong>B.</strong></p></li>\n<li><p>(Strong) How generous of the license of the library?  Generous = <strong>B.</strong> </p></li>\n<li><p>(Medium) How complex is a type?  Complex = <strong>B.</strong> </p></li>\n<li><p>(Weak) How much speed I need?   Conversion costs some CPU.   </p></li>\n</ul>\n"}, {"tags": ["c++", "mp3", "decode", "pcm"], "comments": [{"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "edited": false, "score": 0, "creation_date": 1483007341, "post_id": 41361240, "comment_id": 69957317, "body": "In general, this message means that your program crashed. Execute it under a debugger, and you should be able to find the issue."}], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 4110056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/mWc7f.jpg?s=128&g=1", "display_name": "abbas hoseini", "link": "https://stackoverflow.com/users/4110056/abbas-hoseini"}, "edited": false, "score": 0, "creation_date": 1483447397, "post_id": 41394480, "comment_id": 70093684, "body": "thank you it works. but can you explain why you use short * type for buffer and why did you use i &lt; buffer_size / 2 condition for loop? , actually  i cant find useful stuff in mpg123 documents  ."}, {"owner": {"reputation": 111, "user_id": 4110056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/mWc7f.jpg?s=128&g=1", "display_name": "abbas hoseini", "link": "https://stackoverflow.com/users/4110056/abbas-hoseini"}, "edited": false, "score": 0, "creation_date": 1483452695, "post_id": 41394480, "comment_id": 70096962, "body": "oh i found out ! sizeof(short) is 2 byte when sizeof(char) is 1 and that is why you use buffer_size/2 for condition ."}], "tags": [], "owner": {"reputation": 46, "user_id": 6085078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f36efdd8c8ac38243f3f1aa6f21da5b?s=128&d=identicon&r=PG&f=1", "display_name": "Evaldas Zmitra", "link": "https://stackoverflow.com/users/6085078/evaldas-zmitra"}, "is_accepted": true, "score": 3, "last_activity_date": 1610471566, "last_edit_date": 1610471566, "creation_date": 1483093098, "answer_id": 41394480, "question_id": 41361240, "link": "https://stackoverflow.com/questions/41361240/mpg123-decode-mp3-to-pcm-in-c/41394480#41394480", "title": "mpg123 decode mp3 to pcm in C++", "body": "<p>I fixed some errors and got some numeric values to be produced. I leave it to you to check if the waveform produced is correct. Suggest using Excel and Audacity to visualize it and confirm that the waveforms look alright.</p>\n<pre><code>#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include &lt;mpg123.h&gt;\n#include &lt;out123.h&gt;\n\nint main(){\n    mpg123_init();\n\n    int err;\n    mpg123_handle *mh = mpg123_new(NULL, &amp;err);\n    unsigned char *buffer;\n    size_t buffer_size;\n    size_t done;\n\n    int channels, encoding;\n    long rate;\n    buffer_size = mpg123_outblock(mh);\n    buffer = (unsigned char*)malloc(buffer_size * sizeof(unsigned char));\n\n    mpg123_open(mh, &quot;/home/abbas/Desktop/nastaran.mp3&quot;);\n    mpg123_getformat(mh, &amp;rate, &amp;channels, &amp;encoding);\n    \n    std::ofstream out(&quot;res.txt&quot;);\n    unsigned int counter = 0;\n\n    for (int totalBtyes = 0; mpg123_read(mh, buffer, buffer_size, &amp;done) == MPG123_OK; ) {\n        short* tst = reinterpret_cast&lt;short*&gt;(buffer);\n        for (auto i = 0; i &lt; buffer_size / 2; i++) {\n            out&lt;&lt; counter + i&lt;&lt;&quot;\\t&quot;&lt;&lt; tst[i] &lt;&lt; &quot;\\n&quot;;\n        }\n        counter += buffer_size/2;\n        totalBtyes += done;\n    }\n    out.close();\n    free(buffer);\n    mpg123_close(mh);\n    mpg123_delete(mh);\n    mpg123_exit();\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 4110056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/mWc7f.jpg?s=128&g=1", "display_name": "abbas hoseini", "link": "https://stackoverflow.com/users/4110056/abbas-hoseini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1479, "favorite_count": 0, "accepted_answer_id": 41394480, "answer_count": 1, "score": 0, "last_activity_date": 1610471566, "creation_date": 1482924863, "last_edit_date": 1555307431, "question_id": 41361240, "link": "https://stackoverflow.com/questions/41361240/mpg123-decode-mp3-to-pcm-in-c", "title": "mpg123 decode mp3 to pcm in C++", "body": "<p>I want to decode a <code>mp3</code> file to <code>pcm</code>:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;mpg123.h&gt;\n#include &lt;out123.h&gt;\nusing namespace std;\nint main()\n{\nmpg123_handle *mh;\nunsigned char *buffer;\nsize_t buffer_size;\nsize_t done;\nint err;\nint channels, encoding;\nlong rate;\nbuffer_size = mpg123_outblock(mh);\nbuffer = (unsigned char*) malloc(buffer_size * sizeof(unsigned char));\n\nmpg123_init();\nmh = mpg123_new(NULL, &amp;err);\n\nmpg123_open(mh, \"/home/abbas/Desktop/nastaran.mp3\");\n// mpg123_getformat(mh, &amp;rate, &amp;channels, &amp;encoding);\n\n\n\nwhile (mpg123_read(mh, buffer, buffer_size, &amp;done) == MPG123_OK)\n    cout &lt;&lt; buffer ;\n\nfree(buffer);\nmpg123_close(mh);\nmpg123_delete(mh);\nmpg123_exit();\nreturn 0;\n}\n</code></pre>\n\n<p>But it gives me this error:</p>\n\n<pre><code>The program has unexpectedly finished.\n</code></pre>\n\n<p>This error says nothing about the reason. Where is the problem?</p>\n\n<p>Is it something about the OS?</p>\n\n<p>cmake file: </p>\n\n<pre><code>project(echoprint2)\ncmake_minimum_required(VERSION 2.8)\n\naux_source_directory(. SRC_LIST)\nadd_executable(${PROJECT_NAME} ${SRC_LIST})\n\nadd_library(mpg123 SHARED IMPORTED )\nset_target_properties(mpg123 PROPERTIES IMPORTED_LOCATION  /usr/local     /lib/libmpg123.so)\nTARGET_LINK_LIBRARIES(echoprint2 mpg123)\n</code></pre>\n"}, {"tags": ["c++", "private-constructor"], "answers": [{"tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1482925060, "creation_date": 1482925060, "answer_id": 41361302, "question_id": 41361223, "link": "https://stackoverflow.com/questions/41361223/why-private-constructor-prevents-object-creation-c/41361302#41361302", "title": "why private constructor prevents object creation C++", "body": "<p>C++ doesn't allow object creation without a call to the constructor. And if the constructor is not accessible, the creation cannot be completed. The lifetime of an object is <em>defined</em> to be between the invocations of the constructor and the destructor.</p>\n\n<p>You can of course allocate raw memory and just cast it to a pointer to object type (as is done in <code>C</code>), but you will not have an object of that class. Until a constructor is called to turn a raw memory region into an object representation, that memory region doesn't formally contain an object.</p>\n"}, {"comments": [{"owner": {"reputation": 141, "user_id": 7322624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af392b56108bee8bc2f89a4d6b296c2b?s=128&d=identicon&r=PG&f=1", "display_name": "Neeraj gupta", "link": "https://stackoverflow.com/users/7322624/neeraj-gupta"}, "edited": false, "score": 0, "creation_date": 1482992050, "post_id": 41361312, "comment_id": 69949826, "body": "So from all the above comments I understand that relation between object and constructor is that 1) I create an object &quot;ClassName obj&quot;  2) this declaration calls Class constructor &quot;ClassName()&quot;  3) this constructor allocates memory. and this completes the object creation process.  In case my object could not call constructor, memory won&#39;t be allocated and object would not be created.  Is my understanding correct ?"}], "tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": false, "score": 0, "last_activity_date": 1482925097, "creation_date": 1482925097, "answer_id": 41361312, "question_id": 41361223, "link": "https://stackoverflow.com/questions/41361223/why-private-constructor-prevents-object-creation-c/41361312#41361312", "title": "why private constructor prevents object creation C++", "body": "<p>Because you can't call a private class method from outside the class, and if the constructor is private, that means you can't create an instance of the class, since creating the object requires the constructor to get called.</p>\n\n<p>A constructor, in this respect, is no different than any other class method. If a class method is private, you already understand that you can't call it from outside the class. And since the constructor must be called to construct an instance of the class, with a private constructor.</p>\n"}, {"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 4, "last_activity_date": 1482925108, "creation_date": 1482925108, "answer_id": 41361315, "question_id": 41361223, "link": "https://stackoverflow.com/questions/41361223/why-private-constructor-prevents-object-creation-c/41361315#41361315", "title": "why private constructor prevents object creation C++", "body": "<p>It is incorrect to say that marking a constructor private would <em>prevent</em> object creation. All it does is <em>restricting</em> object creation to your code inside the class with only private constructors. You can create a new object, while others can't.</p>\n\n<p>This works well for singletons, because it helps you ensure that your singleton remains the only instance of the class.</p>\n"}, {"tags": [], "owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "is_accepted": false, "score": 4, "last_activity_date": 1482926976, "last_edit_date": 1482926976, "creation_date": 1482926313, "answer_id": 41361662, "question_id": 41361223, "link": "https://stackoverflow.com/questions/41361223/why-private-constructor-prevents-object-creation-c/41361662#41361662", "title": "why private constructor prevents object creation C++", "body": "<p>class private scope doesn't prevent class instantiation but in fact it restrict \"who\" can create an object.</p>\n\n<p>it is like other member data privately scoped which cannot be accessed from outside but only for <code>accessors</code> and <code>getters</code> and other `friend functions and classes:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nclass Foo\n{\n    public:\n        Foo(int x) : value(x){ cout &lt;&lt; \"Foo(int) public ctor\" &lt;&lt; endl;} // ctor\n\n        void SetValue(int x) {value = x;}  // setter\n        int  GetValue()const{return value;}// getter\n\n    private:\n        int value;\n        Foo(){ cout &lt;&lt; \"Foo() private ctor\" &lt;&lt; endl;} // private ctor\n\n        friend ostream&amp; operator&lt;&lt;(ostream&amp; out, Foo&amp; rhs)\n        {\n            out &lt;&lt; rhs.value;\n            return out;\n        }\n        friend Foo* CreateObject();\n};\n\nFoo* CreateObject()\n{\n    Foo* ptrFoo = new Foo;\n    return ptrFoo;\n}\n\n\nint main ()\n{\n\n    //Foo theFoo;     // error C2248: 'Foo::Foo' : cannot access private member declared in class 'Foo'\n    Foo theFoo2(0); // ok\n//  cout &lt;&lt; theFoo2.value &lt;&lt; endl; // error C2248: 'value' : cannot access private member declared in class 'Foo'\n    cout &lt;&lt; theFoo2.GetValue() &lt;&lt; endl; // ok\n    cout &lt;&lt; theFoo2 &lt;&lt; endl;\n\n    Foo* ptrFoo = CreateObject();\n    ptrFoo-&gt;SetValue(7);\n    cout &lt;&lt; ptrFoo-&gt;GetValue() &lt;&lt; endl;\n\n\n    cout &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 141, "user_id": 7322624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af392b56108bee8bc2f89a4d6b296c2b?s=128&d=identicon&r=PG&f=1", "display_name": "Neeraj gupta", "link": "https://stackoverflow.com/users/7322624/neeraj-gupta"}, "edited": false, "score": 0, "creation_date": 1485247507, "post_id": 41361967, "comment_id": 70834540, "body": "So I understand that relation between object and constructor is that 1) I create an object &quot;ClassName obj&quot; 2) this declaration calls Class constructor &quot;ClassName()&quot; 3) this constructor allocates memory. and this completes the object creation process. In case my object could not call constructor, memory won&#39;t be allocated and object would not be created. Is my understanding correct ? \u2013"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "reply_to_user": {"reputation": 141, "user_id": 7322624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af392b56108bee8bc2f89a4d6b296c2b?s=128&d=identicon&r=PG&f=1", "display_name": "Neeraj gupta", "link": "https://stackoverflow.com/users/7322624/neeraj-gupta"}, "edited": false, "score": 0, "creation_date": 1485248757, "post_id": 41361967, "comment_id": 70835305, "body": "Not quite.   Creating an object using <code>ClassName obj;</code> calls a constructor that can accept no arguments - which may be a constructor with no actual arguments (<code>ClassName::ClassName()</code>) or a constructor with all arguments having default values (e.g. declared in the class definition as <code>ClassName(int x = 0)</code>). Memory for the object (instance of <code>ClassName</code>) is allocated before the constructor is called, and then initialised (loosely turned into an object) by the constructor. If the constructor is inaccessible, the compiler does not permit construction of the object, so the code will not compile."}], "tags": [], "owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "is_accepted": true, "score": 3, "last_activity_date": 1482927294, "creation_date": 1482927294, "answer_id": 41361967, "question_id": 41361223, "link": "https://stackoverflow.com/questions/41361223/why-private-constructor-prevents-object-creation-c/41361967#41361967", "title": "why private constructor prevents object creation C++", "body": "<p>To create an object in C++, a constructor needs to be called.   If the constructor that needs to be invoked is not accessible, then it can't be called, and the object cannot be created.</p>\n\n<p>The point of a <code>private</code> constructor is not <em>preventing</em> object construction.   It is about controlling which code can access the constructor, and therefore limiting which code to create an object that is an instance of that class.   A <code>private</code> constructor is accessible to all member functions (<code>static</code> or otherwise) of the class, and to all declared <code>friend</code>s of the class (which may be individual functions, or other classes) - so any of those can create an instance of the class using a <code>private</code> constructor (assuming the constructor is defined).</p>\n\n<p>If the constructor cannot be invoked, the object cannot be initialised.  After all, the job of the constructor is to initialise the object.   But if the constructor is inaccessible, then the object cannot be constructed, so it is not possible to have an uninitialised object.</p>\n\n<p>Of course, there is nothing preventing the class from having multiple constructors with different access controls (<code>private</code>, <code>protected</code>, and <code>public</code>).   A <code>class</code> with a <code>public</code> constructor can be constructed, using that constructor, by any code.   But any attempt to use a <code>private</code> constructor (by a non-member non-<code>friend</code>) will still be rejected.   So access control allows the (developer of the) <code>class</code> some measure of control over how an instance is constructed.</p>\n\n<p>Not defining (i.e. not implementing) a constructor does prevent construction of an object.   If that constructor is <code>private</code>, the compiler will reject an attempt to call it (unless the function attempting to create an instance is a member or a <code>friend</code>, as above).    For members and friends of the class, the compiler will permit access to the constructor, but (in a typical compile-then-link toolchain) the linker will not build an executable, since it cannot resolve a call to a function that is not defined.    Using the technique of marking a constructor <code>private</code> and not defining it is a common way of preventing code from constructing an instance of the class  (by either preventing the code from compiling, or preventing it from running).</p>\n"}], "owner": {"reputation": 141, "user_id": 7322624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af392b56108bee8bc2f89a4d6b296c2b?s=128&d=identicon&r=PG&f=1", "display_name": "Neeraj gupta", "link": "https://stackoverflow.com/users/7322624/neeraj-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2316, "favorite_count": 0, "accepted_answer_id": 41361967, "answer_count": 5, "score": 2, "last_activity_date": 1482927294, "creation_date": 1482924799, "last_edit_date": 1482926412, "question_id": 41361223, "link": "https://stackoverflow.com/questions/41361223/why-private-constructor-prevents-object-creation-c", "title": "why private constructor prevents object creation C++", "body": "<p>I have always read that private constructor prevent object creation.\nI have used them in singleton patterns and I know how to create objects while using private constructor(using static methods etc).\nI know that constructors are used for initialization of objects.</p>\n\n<p>But I don't understand exactly what makes private constructors prevent object creation.\nWhat if my object don't gets initialize. I mean it should throw some garbage but why does it restrict ??</p>\n\n<p>I have checked all the existing answers in stackoverflow but I am not getting the exact concept.</p>\n"}, {"tags": ["android", "c++", "android-ndk", "cmake"], "comments": [{"owner": {"reputation": 493, "user_id": 1438832, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/8b417c263cd0c1d211ed896ba1cc94f1?s=128&d=identicon&r=PG", "display_name": "user1438832", "link": "https://stackoverflow.com/users/1438832/user1438832"}, "edited": false, "score": 1, "creation_date": 1482925259, "post_id": 41361166, "comment_id": 69923756, "body": "#include &lt;math.h&gt;"}, {"owner": {"reputation": 1172, "user_id": 3104485, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7f69e4ded4bf2e787a5f72d44567770c?s=128&d=identicon&r=PG&f=1", "display_name": "jgm", "link": "https://stackoverflow.com/users/3104485/jgm"}, "reply_to_user": {"reputation": 493, "user_id": 1438832, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/8b417c263cd0c1d211ed896ba1cc94f1?s=128&d=identicon&r=PG", "display_name": "user1438832", "link": "https://stackoverflow.com/users/1438832/user1438832"}, "edited": false, "score": 0, "creation_date": 1482926002, "post_id": 41361166, "comment_id": 69924202, "body": "@user1438832 It doesn&#39;t work. I have also tried cmath. both doesn&#39;t work."}, {"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1482927346, "post_id": 41361166, "comment_id": 69925001, "body": "Which STL implementation are you linking against? If it&#39;s stlport I&#39;d suggest switching to gnustl or libc++, which both should have <code>std::round</code>."}, {"owner": {"reputation": 1172, "user_id": 3104485, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7f69e4ded4bf2e787a5f72d44567770c?s=128&d=identicon&r=PG&f=1", "display_name": "jgm", "link": "https://stackoverflow.com/users/3104485/jgm"}, "reply_to_user": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1482927767, "post_id": 41361166, "comment_id": 69925262, "body": "@Michael I am trying to build it against <code>dlib</code> <a href=\"http://dlib.net/\" rel=\"nofollow noreferrer\">dlib.net</a> How can I switch to  <code>gnustl</code> or <code>libc++</code>?"}, {"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1482927849, "post_id": 41361166, "comment_id": 69925312, "body": "Set the <code>APP_STL</code> variable in your Application.mk to <a href=\"https://developer.android.com/ndk/guides/cpp-support.html#runtimes\" rel=\"nofollow noreferrer\">the appropriate value</a>."}, {"owner": {"reputation": 8554, "user_id": 632035, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ed69ad748c440a055502c1b213757e5?s=128&d=identicon&r=PG", "display_name": "Dan Albert", "link": "https://stackoverflow.com/users/632035/dan-albert"}, "edited": false, "score": 0, "creation_date": 1482955413, "post_id": 41361166, "comment_id": 69939431, "body": "For CMake you&#39;ll need to set ANDROID_STL in your gradle file: <code>cmake { arguments &quot;gnustl_shared&quot; }</code>: <a href=\"https://developer.android.com/ndk/guides/cmake.html\" rel=\"nofollow noreferrer\">developer.android.com/ndk/guides/cmake.html</a>"}], "owner": {"reputation": 1172, "user_id": 3104485, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7f69e4ded4bf2e787a5f72d44567770c?s=128&d=identicon&r=PG&f=1", "display_name": "jgm", "link": "https://stackoverflow.com/users/3104485/jgm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 929, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1482924611, "creation_date": 1482924611, "question_id": 41361166, "link": "https://stackoverflow.com/questions/41361166/how-to-use-stdround-in-android-ndk", "title": "How to use std::round in android ndk", "body": "<p>I am trying to build a <code>c++</code> library using <code>android ndk</code> and <code>android studio</code>. I am using <code>CMakeList</code> to define the different flags.</p>\n\n<pre><code>        cmake {\n           cppFlags \"-std=c++11 -frtti -fexceptions -v -Wall -Werror -Wno-unused-variable -w\"\n           abiFilters 'x86', 'x86_64', 'armeabi', 'armeabi-v7a', 'arm64-v8a', 'mips', 'mips64'\n        }\n</code></pre>\n\n<p>I have some <code>c++ 11</code> functions in the library. I would like to know how can I build that ?</p>\n\n<p>I am getting the following error.</p>\n\n<pre><code>error: no member named 'round' in namespace 'std'\n</code></pre>\n\n<p>How can I fix it ?</p>\n"}, {"tags": ["c++", "string", "replace"], "comments": [{"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 4, "creation_date": 1482924573, "post_id": 41361125, "comment_id": 69923384, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/3418231/replace-part-of-a-string-with-another-string\">Replace part of a string with another string</a>. Or <a href=\"http://stackoverflow.com/questions/4643512/replace-substring-with-another-substring-c\">Replace substring with another substring C++</a>. Or <a href=\"http://stackoverflow.com/questions/5343190/how-do-i-replace-all-instances-of-a-string-with-another-string\">How do I replace all instances of a string with another string?</a>."}, {"owner": {"reputation": 3, "user_id": 7047228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/689a3e1efd6edcd29aa4401b487c4477?s=128&d=identicon&r=PG&f=1", "display_name": "enheldel", "link": "https://stackoverflow.com/users/7047228/enheldel"}, "reply_to_user": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1482936259, "post_id": 41361125, "comment_id": 69929908, "body": "I found that answer earlier, however this does only replace the first substring it finds and not all of them."}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1482936411, "post_id": 41361125, "comment_id": 69929994, "body": "<i>That</i>  - which one? The third link is actually what you need. Besides, replacing <code>if</code> with <code>while</code> is not a rocket science."}, {"owner": {"reputation": 3, "user_id": 7047228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/689a3e1efd6edcd29aa4401b487c4477?s=128&d=identicon&r=PG&f=1", "display_name": "enheldel", "link": "https://stackoverflow.com/users/7047228/enheldel"}, "reply_to_user": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1482940748, "post_id": 41361125, "comment_id": 69932469, "body": "Sorry I clicked the link on top of the page, thanks"}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1482942863, "post_id": 41361125, "comment_id": 69933623, "body": "I cannot reclose as I already cast a close vote. I do not think reclosing is that necessary though."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1482949260, "post_id": 41361125, "comment_id": 69936727, "body": "Was there another of the questions that Wiktor linked that you&#39;d rather have this one closed as a duplicate of? I can change the duplicate if that would make the answer easier to find."}], "owner": {"reputation": 3, "user_id": 7047228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/689a3e1efd6edcd29aa4401b487c4477?s=128&d=identicon&r=PG&f=1", "display_name": "enheldel", "link": "https://stackoverflow.com/users/7047228/enheldel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "closed_date": 1482924823, "answer_count": 0, "score": 0, "last_activity_date": 1482942784, "creation_date": 1482924451, "last_edit_date": 1482942784, "question_id": 41361125, "link": "https://stackoverflow.com/questions/41361125/c-replace-all-substrings-in-string", "closed_reason": "Duplicate", "title": "C++ replace all substrings in string", "body": "<p>I apologize if this already has been answered but I didn't manage to find a solution on exactly this. I want to find all occurrences of a specific substring in a string and then replace those substrings with something else, for example:</p>\n\n<pre><code>int main(){\n    // Variabeldeklaration\n    string str = \"elephant elephant duck duck elephant\";\n\n    if (/* string contains \"elephant\" */){\n        // replace_all \"elephant\" , \"gorilla\";\n    }\n\n    // Now str = \"gorilla gorilla duck duck gorilla\";\n\n    system(\"PAUSE\");\n    return 0;\n}\n</code></pre>\n\n<p>I know it's possible to replace all char found in a string but I want to be able to replace more than one char. How do I do this?</p>\n"}, {"tags": ["c++", "visual-studio-2010", "testing", "googletest"], "comments": [{"owner": {"reputation": 1145, "user_id": 2509099, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6b943869aa8e032e04aae5d8b637d47c?s=128&d=identicon&r=PG", "display_name": "rafael gonzalez", "link": "https://stackoverflow.com/users/2509099/rafael-gonzalez"}, "edited": false, "score": 0, "creation_date": 1482927452, "post_id": 41360949, "comment_id": 69925063, "body": "Have you added the include files and the lib files in your project? <a href=\"http://stackoverflow.com/questions/4445418/how-to-add-additional-libraries-in-c\" title=\"how to add additional libraries in c\">stackoverflow.com/questions/4445418/&hellip;</a>"}, {"owner": {"reputation": 23, "user_id": 6283812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0251a8fdc9508da63daf7707624047f7?s=128&d=identicon&r=PG&f=1", "display_name": "link", "link": "https://stackoverflow.com/users/6283812/link"}, "reply_to_user": {"reputation": 1145, "user_id": 2509099, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6b943869aa8e032e04aae5d8b637d47c?s=128&d=identicon&r=PG", "display_name": "rafael gonzalez", "link": "https://stackoverflow.com/users/2509099/rafael-gonzalez"}, "edited": false, "score": 0, "creation_date": 1482959643, "post_id": 41360949, "comment_id": 69941199, "body": "@rafaelgonzalez yes"}], "owner": {"reputation": 23, "user_id": 6283812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0251a8fdc9508da63daf7707624047f7?s=128&d=identicon&r=PG&f=1", "display_name": "link", "link": "https://stackoverflow.com/users/6283812/link"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1482923847, "creation_date": 1482923847, "question_id": 41360949, "link": "https://stackoverflow.com/questions/41360949/visual-studio-2010-express-gtest-c", "title": "visual studio 2010 express gtest c++", "body": "<p>I am trying to create a basic test file using gtest but I am getting the error : testvs\\debug\\testvs.exe is not recognized as an internal or external command, operable program or batch file. </p>\n\n<p>test.cpp</p>\n\n<pre><code>#include &lt;gtest\\gtest.h&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\nTEST(test_case,simple_case)\n{\n    int i=0;\n    int b=1;\n    int result= i*b;\n    int expected=0;\n    EXPECT_EQ(result,expected);\n}\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include &lt;gtest\\gtest.h&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\nvoid main(int argc, char* argv[])\n{\n    ::testing::InitGoogleTest(&amp;argc,argv);\n    RUN_ALL_TESTS();\n}\n</code></pre>\n\n<p>when I comment out the lines </p>\n\n<pre><code>TEST(test_case,simple_case)\n{\n    int i=0;\n    int b=1;\n    int result= i*b;\n    int expected=0;\n    EXPECT_EQ(result,expected);\n}\n</code></pre>\n\n<p>and </p>\n\n<pre><code>::testing::InitGoogleTest(&amp;argc,argv);\n    RUN_ALL_TESTS();\n</code></pre>\n\n<p>it does not give any error. \nPlease help</p>\n"}, {"tags": ["c++", "c++11", "rvalue-reference", "perfect-forwarding", "lvalue-to-rvalue"], "comments": [{"owner": {"reputation": 5455, "user_id": 4115625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2688a9684db617a20f9da3959e5890d7?s=128&d=identicon&r=PG&f=1", "display_name": "Danh", "link": "https://stackoverflow.com/users/4115625/danh"}, "edited": false, "score": 0, "creation_date": 1482923849, "post_id": 41360880, "comment_id": 69923034, "body": "No, it&#39;s the reason we need <code>std::forward</code>"}, {"owner": {"reputation": 4464, "user_id": 237575, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/03ce5533d4206769093860f79827d0df?s=128&d=identicon&r=PG", "display_name": "JavaMan", "link": "https://stackoverflow.com/users/237575/javaman"}, "reply_to_user": {"reputation": 5455, "user_id": 4115625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2688a9684db617a20f9da3959e5890d7?s=128&d=identicon&r=PG&f=1", "display_name": "Danh", "link": "https://stackoverflow.com/users/4115625/danh"}, "edited": false, "score": 0, "creation_date": 1482924042, "post_id": 41360880, "comment_id": 69923131, "body": "what are the specific rules related to universal reference? Scott Meyers, in his book,  just said rvalue to rvalue reference, lvalue to lvalue reference"}, {"owner": {"reputation": 5455, "user_id": 4115625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2688a9684db617a20f9da3959e5890d7?s=128&d=identicon&r=PG&f=1", "display_name": "Danh", "link": "https://stackoverflow.com/users/4115625/danh"}, "edited": false, "score": 0, "creation_date": 1482925016, "post_id": 41360880, "comment_id": 69923619, "body": "<a href=\"http://en.cppreference.com/w/cpp/language/value_category\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/value_category</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2104, "user_id": 4635537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cad50ed18dff8aaff0ff427ea7b1067d?s=128&d=identicon&r=PG", "display_name": "sameerkn", "link": "https://stackoverflow.com/users/4635537/sameerkn"}, "edited": false, "score": 0, "creation_date": 1482925158, "post_id": 41360963, "comment_id": 69923704, "body": "The link which you shared has an example at the very last <code>Derived(Derived&amp;&amp; rhs)    : Base(std::move(rhs)) &#47;&#47; good, calls Base(Base&amp;&amp; rhs) {   &#47;&#47; Derived-specific stuff }</code>. Now, suppose <code>class Derived</code> had data_member <code>int x;</code>. Please specify how rhs can now be used in assignment <code>this-&gt;x=rhs.x</code>. Since its a copy constructor so, <code>Derived</code> data needs to copied from the <code>rhs</code> to <code>this</code>.But since <code>rhs</code> is <code>move</code>d so, i guess it will not be valid to use it any more."}, {"owner": {"reputation": 4464, "user_id": 237575, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/03ce5533d4206769093860f79827d0df?s=128&d=identicon&r=PG", "display_name": "JavaMan", "link": "https://stackoverflow.com/users/237575/javaman"}, "edited": false, "score": 0, "creation_date": 1482935123, "post_id": 41360963, "comment_id": 69929322, "body": "ok, std::move() casts its argument to rvalue. But what is the type of the rvalue formed by this expression <code>std::move(t)</code>? rvalue of type <code>int&amp;&amp;</code> or rvalue of type <code>int</code>?"}, {"owner": {"reputation": 43188, "user_id": 273767, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/363e49843e26763a496164190940ece4?s=128&d=identicon&r=PG", "display_name": "Cubbi", "link": "https://stackoverflow.com/users/273767/cubbi"}, "reply_to_user": {"reputation": 4464, "user_id": 237575, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/03ce5533d4206769093860f79827d0df?s=128&d=identicon&r=PG", "display_name": "JavaMan", "link": "https://stackoverflow.com/users/237575/javaman"}, "edited": false, "score": 0, "creation_date": 1482942152, "post_id": 41360963, "comment_id": 69933242, "body": "@JavaMan rvalue of type <code>int</code>. Only expressions have value categories, and expressions cannot have reference types."}], "tags": [], "owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "is_accepted": false, "score": 8, "last_activity_date": 1482930620, "last_edit_date": 1482930620, "creation_date": 1482923888, "answer_id": 41360963, "question_id": 41360880, "link": "https://stackoverflow.com/questions/41360880/why-an-rvalue-reference-is-turned-into-lvalue-reference-by-a-universal-reference/41360963#41360963", "title": "Why an Rvalue Reference is Turned into Lvalue Reference by a Universal Reference", "body": "<p>The reason is that named rvalue references are treated as lvalues.</p>\n\n<p>You should use <a href=\"http://en.cppreference.com/w/cpp/utility/move\" rel=\"noreferrer\">std::move</a> inside <em>f2</em> when passing <em>t</em> to <em>f1</em> to retain rvalueness:</p>\n\n<pre><code>void f2(int&amp;&amp; t) {\n    f1(std::move(t));\n}\n</code></pre>\n\n<p><a href=\"http://thbecker.net/articles/rvalue_references/section_05.html\" rel=\"noreferrer\">Here</a> you can find a good explanation.</p>\n"}, {"tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 3, "last_activity_date": 1482930883, "creation_date": 1482930883, "answer_id": 41362890, "question_id": 41360880, "link": "https://stackoverflow.com/questions/41360880/why-an-rvalue-reference-is-turned-into-lvalue-reference-by-a-universal-reference/41362890#41362890", "title": "Why an Rvalue Reference is Turned into Lvalue Reference by a Universal Reference", "body": "<p>Calling <code>f1(t)</code>,  the argument is the expression <code>t</code>. Not <code>static_cast&lt;decltype(t)&gt;(t)</code> or something. Your examination of <code>decltype(t)</code> has nothing to do with the call of <code>f1(t)</code>.</p>\n\n<p>The expression <code>t</code> has type <code>int</code> and value category <em>lvalue</em>. (A rule of thumb is that if you can take the address of an expression then it is an lvalue, and you can certainly write <code>&amp;t</code>). The \"information\" that a reference variable was originally declared as a reference is only visible via a <code>decltype</code> examination.</p>\n\n<p>Since <code>f1</code> is called with an lvalue, <code>T</code> is deduced to <code>int&amp;</code>.</p>\n\n<p>NB. You possibly want <code>f1</code> to also use <code>decltype(t)</code> rather than <code>T</code>, if you ever want to see <code>is_rvalue_reference</code> being true in <code>f1</code>. For rvalue arguments, <code>T</code> deduces to a non-reference type, e.g. if you fix <code>f2</code> by making it do <code>f1(std::move(t));</code> then <code>f1</code>'s <code>T</code> is <code>int</code> and <code>decltype(t)</code> in <code>f1</code> is <code>int&amp;&amp;</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "edited": false, "score": 1, "creation_date": 1482941437, "post_id": 41364337, "comment_id": 69932863, "body": "There is no reference collapsing in step 2. The type of the <i>variable</i> <code>t</code> is <code>int&amp;&amp;</code>, while the type of the <i>expression</i> <code>t</code> is <code>int</code>. This is just how references work and have always worked, regardless of value category, even before rvalue references were added to the language."}, {"owner": {"reputation": 4464, "user_id": 237575, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/03ce5533d4206769093860f79827d0df?s=128&d=identicon&r=PG", "display_name": "JavaMan", "link": "https://stackoverflow.com/users/237575/javaman"}, "reply_to_user": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "edited": false, "score": 0, "creation_date": 1482942056, "post_id": 41364337, "comment_id": 69933194, "body": "in that case, what is the value of <code>T</code> in step 2? Shouldn&#39;t it be <code>int&amp;&amp; &amp;</code> instead of <code>int &amp;</code>? If T is <code>int&amp;&amp; &amp;</code>, isn&#39;t that we have to collapse it to get the parameter type?"}, {"owner": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "edited": false, "score": 0, "creation_date": 1482947871, "post_id": 41364337, "comment_id": 69936029, "body": "<code>T</code> is not involved in step 2. <code>f1</code> is called with an lvalue expression of type <code>int</code>, so in step 3, <code>T</code> is deduced as <code>int&amp;</code>, so <code>T&amp;&amp;</code> is <code>int&amp; &amp;&amp;</code> which collapses to <code>int&amp;</code>."}], "tags": [], "owner": {"reputation": 4464, "user_id": 237575, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/03ce5533d4206769093860f79827d0df?s=128&d=identicon&r=PG", "display_name": "JavaMan", "link": "https://stackoverflow.com/users/237575/javaman"}, "is_accepted": false, "score": 0, "last_activity_date": 1482936338, "creation_date": 1482936338, "answer_id": 41364337, "question_id": 41360880, "link": "https://stackoverflow.com/questions/41360880/why-an-rvalue-reference-is-turned-into-lvalue-reference-by-a-universal-reference/41364337#41364337", "title": "Why an Rvalue Reference is Turned into Lvalue Reference by a Universal Reference", "body": "<p>After studying the C++11 standard, I have a vague idea on what was going on after my <code>f1(t);</code> in <code>f2</code>. I describe it here to see if I got it right:</p>\n\n<ol>\n<li>In <code>f2</code>, <code>t</code> is an lvalue of type <code>int&amp;&amp;</code> (not <code>int</code>, this is an important difference) </li>\n<li><p>the call <code>f1(t);</code> causes type to be deduced like this:</p>\n\n<p>2.1 when <code>T</code> in <code>f1</code> is given an lvalue, it is deduced as a reference of that lvalue's type or<code>int&amp;&amp; &amp;</code></p>\n\n<p>2.2 reference collapsing causes <code>int&amp;&amp; &amp;</code> to become <code>int &amp;</code>. This is the value of <code>T</code>.</p></li>\n<li><p>Since the parameter of <code>f1</code> is declared as <code>T&amp;&amp;</code>, the type of parameter <code>t</code> in <code>f1</code> is <code>int &amp; &amp;&amp;</code>. So reference collapsing occurs a second time to deduce the type of <code>t</code> as <code>int &amp;</code>.</p></li>\n<li><p>Hence T=<code>int &amp;</code> and type of parameter <code>t</code> is <code>int &amp;</code>. i.e. parameter <code>t</code> is an lvalue of type <code>int &amp;</code></p></li>\n</ol>\n\n<p>Any comment?</p>\n"}, {"comments": [{"owner": {"reputation": 90, "user_id": 3199837, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/100005752872671/picture?type=large", "display_name": "jiadong", "link": "https://stackoverflow.com/users/3199837/jiadong"}, "reply_to_user": {"reputation": 7531, "user_id": 2359227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57758277a5b44a41d8dc112c91eeeca7?s=128&d=identicon&r=PG", "display_name": "Tomer Shetah", "link": "https://stackoverflow.com/users/2359227/tomer-shetah"}, "edited": false, "score": 0, "creation_date": 1610893290, "post_id": 65760682, "comment_id": 116270300, "body": "@TomerShetah Thanks for your suggestion."}], "tags": [], "owner": {"reputation": 90, "user_id": 3199837, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/100005752872671/picture?type=large", "display_name": "jiadong", "link": "https://stackoverflow.com/users/3199837/jiadong"}, "is_accepted": false, "score": -1, "last_activity_date": 1610922635, "last_edit_date": 1610922635, "creation_date": 1610887233, "answer_id": 65760682, "question_id": 41360880, "link": "https://stackoverflow.com/questions/41360880/why-an-rvalue-reference-is-turned-into-lvalue-reference-by-a-universal-reference/65760682#65760682", "title": "Why an Rvalue Reference is Turned into Lvalue Reference by a Universal Reference", "body": "<p>use the std::forward to keep t as rvalue.</p>\n<pre><code>void f2(int&amp;&amp; t) {\n  //....\n  f1(std::forward&lt;int&gt;(t));\n}\n</code></pre>\n<p>The t argument is passed as rvalue and deduced as type int. (see how the deduction is done <a href=\"https://en.cppreference.com/w/cpp/utility/forward\" rel=\"nofollow noreferrer\">here</a> )</p>\n<p>std::forward(t) returns a rvalue of type int&amp;&amp; so that calls f1(int&amp;&amp;)</p>\n<p>without std::forward(t), f1(t) takes the argument of type int and calls f1(int&amp;)</p>\n<p><strong>UPDATE:</strong> Please be aware of the difference between</p>\n<pre><code> is_lvalue_reference&lt;T&gt; and is_lvalue_reference&lt;decltype&lt;t&gt;&gt;. \n</code></pre>\n<p>In the template, T is deduced based on the function argument, whereas the value category of t is always lvalue in f2 and</p>\n<pre><code>forward&lt;int&gt;(t) and move(t) \n</code></pre>\n<p>are always rvalue.</p>\n<pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\nclass A {};\n\n\ntemplate &lt;typename T&gt;\nT f0(T&amp; t) {  //&lt;-----this is a universal reference\n    std::cout&lt;&lt; &quot;f0 lvalue&quot;&lt;&lt;'\\n';\n\n    // take T as template argument, it is type int, so not rvalue, not lvalue.\n//  std::cout &lt;&lt; &quot;is_lvalue reference:&quot; &lt;&lt; std::is_lvalue_reference&lt;T&gt;::value &lt;&lt; std::endl;\n    std::cout &lt;&lt; &quot;is_lvalue reference:&quot; &lt;&lt; std::is_lvalue_reference&lt;T&gt;::value &lt;&lt; std::endl;\n    std::cout &lt;&lt; &quot;is_rvalue reference:&quot; &lt;&lt; std::is_rvalue_reference&lt;T&gt;::value &lt;&lt; std::endl;\n    std::cout &lt;&lt; &quot;is_reference:&quot;        &lt;&lt; std::is_reference&lt;T&gt;::value        &lt;&lt; std::endl;\n    return t;\n}\n\ntemplate &lt;typename T&gt;\nT f0(T&amp;&amp;t) {  //&lt;-----this is a universal reference\n    std::cout&lt;&lt; &quot;f0 rvalue&quot;&lt;&lt;'\\n';\n    std::cout &lt;&lt; &quot;is_lvalue reference:&quot; &lt;&lt; std::is_lvalue_reference&lt;T&gt;::value &lt;&lt; std::endl;\n    std::cout &lt;&lt; &quot;is_rvalue reference:&quot; &lt;&lt; std::is_rvalue_reference&lt;T&gt;::value &lt;&lt; std::endl;\n    std::cout &lt;&lt; &quot;is_reference:&quot;        &lt;&lt; std::is_reference&lt;T&gt;::value        &lt;&lt; std::endl;\n    return t;\n}\n\ntemplate &lt;typename T&gt;\nT f1(T&amp; t) {  //&lt;-----this is a universal reference\n    std::cout&lt;&lt; &quot;f1 lvalue&quot;&lt;&lt;'\\n';\n\n    // take T as template argument, it is type int, so not rvalue, not lvalue.\n//  std::cout &lt;&lt; &quot;is_lvalue reference:&quot; &lt;&lt; std::is_lvalue_reference&lt;T&gt;::value &lt;&lt; std::endl;\n    std::cout &lt;&lt; &quot;is_lvalue reference:&quot; &lt;&lt; std::is_lvalue_reference&lt;decltype(t)&gt;::value &lt;&lt; std::endl;\n    std::cout &lt;&lt; &quot;is_rvalue reference:&quot; &lt;&lt; std::is_rvalue_reference&lt;decltype(t)&gt;::value &lt;&lt; std::endl;\n    std::cout &lt;&lt; &quot;is_reference:&quot;        &lt;&lt; std::is_reference&lt;decltype(t)&gt;::value        &lt;&lt; std::endl;\n    return t;\n}\n\ntemplate &lt;typename T&gt;\nT f1(T&amp;&amp;t) {  //&lt;-----this is a universal reference\n    std::cout&lt;&lt; &quot;f1 rvalue&quot;&lt;&lt;'\\n';\n    std::cout &lt;&lt; &quot;is_lvalue reference:&quot; &lt;&lt; std::is_lvalue_reference&lt;decltype(t)&gt;::value &lt;&lt; std::endl;\n    std::cout &lt;&lt; &quot;is_rvalue reference:&quot; &lt;&lt; std::is_rvalue_reference&lt;decltype(t)&gt;::value &lt;&lt; std::endl;\n    std::cout &lt;&lt; &quot;is_reference:&quot;        &lt;&lt; std::is_reference&lt;decltype(t)&gt;::value        &lt;&lt; std::endl;\n    return t;\n}\n\nvoid f2(int&amp;&amp;t) {  //&lt;-----this is a universal reference\n    std::cout&lt;&lt; &quot;f2 rvalue&quot;&lt;&lt;'\\n';\n    std::cout &lt;&lt; &quot;is_lvalue reference:&quot; &lt;&lt; std::is_lvalue_reference&lt;decltype(t)&gt;::value &lt;&lt; std::endl;\n    std::cout &lt;&lt; &quot;is_rvalue reference:&quot; &lt;&lt; std::is_rvalue_reference&lt;decltype(t)&gt;::value &lt;&lt; std::endl;\n    std::cout &lt;&lt; &quot;is_reference:&quot;        &lt;&lt; std::is_reference&lt;decltype(t)&gt;::value        &lt;&lt; std::endl;\n\n\n    f1(std::forward&lt;int&gt;(t));   // T is deduced as int for f(T&amp;&amp;), type int is not rvalue, nor lvalue, t is rvalue\n    f1(std::move(t));           // T is deduced as int for f(T&amp;&amp;), type int is not rvalue, nor lvalue, t is rvalue\n    f1(t);                      // T is deduced as int for f(T&amp;),  type int is not rvalue, nor lvalue, t is lvalue\n                                //if f1(T&amp;) not exist, then f1(t) will call f1(T&amp;&amp;), T is deduced as int&amp;, type int&amp; is lvalue, t is lvalue\n\n\n    f0(std::forward&lt;int&gt;(t));   // T is deduced as int for f(T&amp;&amp;), type int is not rvalue, nor lvalue, t is rvalue\n    f0(std::move(t));           // T is deduced as int for f(T&amp;&amp;), type int is not rvalue, nor lvalue, t is rvalue\n    f0(t);                      // T is deduced as int for f(T&amp;),  type int is not rvalue, nor lvalue, t is lvalue\n                                //if f0(T&amp;) not exist, then f0(t) will call f0(T&amp;&amp;), T is deduced as int&amp;, type int&amp; is lvalue, t is lvalue\n}\n\n\n\n\nvoid test_rvalue()\n{\n\n    f2(5);\n    std::cout &lt;&lt; std::boolalpha;\n    std::cout &lt;&lt; std::is_lvalue_reference&lt;A&gt;::value &lt;&lt; '\\n';        // A is not lvalue\n    std::cout &lt;&lt; std::is_rvalue_reference&lt;A&gt;::value &lt;&lt; '\\n';        // A is not rvalue\n    std::cout &lt;&lt; std::is_lvalue_reference&lt;A&amp;&gt;::value &lt;&lt; '\\n';       // A&amp; is lvalue\n    std::cout &lt;&lt; std::is_rvalue_reference&lt;A&amp;&amp;&gt;::value &lt;&lt; '\\n';      // A&amp;&amp; is rvalue\n    std::cout &lt;&lt; std::is_lvalue_reference&lt;int&gt;::value &lt;&lt; '\\n';      // int is not lvalue\n    std::cout &lt;&lt; std::is_rvalue_reference&lt;int&gt;::value &lt;&lt; '\\n';      // int is not rvalue\n    std::cout &lt;&lt; std::is_lvalue_reference&lt;int&amp;&gt;::value &lt;&lt; '\\n';     // int&amp; is lvalue\n    std::cout &lt;&lt; std::is_rvalue_reference&lt;int&amp;&amp;&gt;::value &lt;&lt; '\\n';    // int&amp;&amp; is rvalue\n\n}\n</code></pre>\n"}], "owner": {"reputation": 4464, "user_id": 237575, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/03ce5533d4206769093860f79827d0df?s=128&d=identicon&r=PG", "display_name": "JavaMan", "link": "https://stackoverflow.com/users/237575/javaman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 978, "favorite_count": 1, "answer_count": 4, "score": 4, "last_activity_date": 1610922635, "creation_date": 1482923609, "last_edit_date": 1482925060, "question_id": 41360880, "link": "https://stackoverflow.com/questions/41360880/why-an-rvalue-reference-is-turned-into-lvalue-reference-by-a-universal-reference", "title": "Why an Rvalue Reference is Turned into Lvalue Reference by a Universal Reference", "body": "<p>I suppose when a universal reference parameter is matched with an rvalue reference argument, an rvalue reference argument is returned. However, my testing shows that the rvalue reference is turned into a lvalue reference by the universal reference function template. Why is it so?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\nusing namespace std;\ntemplate &lt;typename T&gt;\nT f1(T&amp;&amp;t) {  //&lt;-----this is a universal reference\n  cout &lt;&lt; \"is_lvalue reference:\" &lt;&lt; is_lvalue_reference&lt;T&gt;::value &lt;&lt; endl;\n  cout &lt;&lt; \"is_rvalue reference:\" &lt;&lt; is_rvalue_reference&lt;T&gt;::value &lt;&lt; endl;\n  cout &lt;&lt; \"is_reference:\"        &lt;&lt; is_reference&lt;T&gt;::value        &lt;&lt; endl;\n  return t;\n}\nvoid f2(int&amp;&amp; t) {\n  cout &lt;&lt; \"f2 is_lvalue reference:\" &lt;&lt; is_lvalue_reference&lt;decltype(t)&gt;::value &lt;&lt; endl;\n  cout &lt;&lt; \"f2 is_rvalue reference:\" &lt;&lt; is_rvalue_reference&lt;decltype(t)&gt;::value &lt;&lt; endl;\n  cout &lt;&lt; \"f2 is_reference:\" &lt;&lt; is_reference&lt;decltype(t)&gt;::value &lt;&lt; endl;\n  f1(t);\n\n}\n\nint main()\n{\n  f2(5);\n  return 0;\n}\n</code></pre>\n\n<p>In both GCC and VC++2010, this is the result:</p>\n\n<pre><code>f2 is_lvalue reference:0\nf2 is_rvalue reference:1\nf2 is_reference:1\nis_lvalue reference:1\nis_rvalue reference:0\nis_reference:1\n</code></pre>\n\n<p>In other words, the parameter <code>t</code> in <code>f2</code> was an rvalue reference, but when passed to <code>f1</code>, the parameter became a lvalue reference. Shouldn't it retain the rvalue-ness in <code>f1</code>?</p>\n"}, {"tags": ["c++", "opengl", "drawing", "render"], "comments": [{"owner": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "edited": false, "score": 0, "creation_date": 1482930729, "post_id": 41360736, "comment_id": 69926856, "body": "The last parameter of <code>glDrawElements</code> is an offset in the index buffer. So you should pass a null pointer."}], "answers": [{"tags": [], "owner": {"reputation": 56, "user_id": 7347719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30af15579f35d6bcc0888c0118e26854?s=128&d=identicon&r=PG&f=1", "display_name": "Goran", "link": "https://stackoverflow.com/users/7347719/goran"}, "is_accepted": true, "score": 2, "last_activity_date": 1482938844, "last_edit_date": 1482938844, "creation_date": 1482931481, "answer_id": 41363058, "question_id": 41360736, "link": "https://stackoverflow.com/questions/41360736/gldrawelements-not-drawing/41363058#41363058", "title": "glDrawElements not drawing", "body": "<p>Your <strong><code>glDrawElements</code></strong> call is wrong, the last parameter should be a byte offset into your <code>GL_ELEMENT_ARRAY_BUFFER</code> that holds the indices, not pointer to system memory.</p>\n\n<pre><code>glDrawElements(GL_TRIANGLES, vTable.size(), GL_UNSIGNED_INT, 0);\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 7248713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a5ef5d7438c0bbcf39b761cf6101422?s=128&d=identicon&r=PG&f=1", "display_name": "ladymac", "link": "https://stackoverflow.com/users/7248713/ladymac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 736, "favorite_count": 0, "accepted_answer_id": 41363058, "answer_count": 1, "score": 1, "last_activity_date": 1482938844, "creation_date": 1482923180, "question_id": 41360736, "link": "https://stackoverflow.com/questions/41360736/gldrawelements-not-drawing", "title": "glDrawElements not drawing", "body": "<p>I create my buffers with the following code:</p>\n\n<pre><code>//generate buffers\nglGenVertexArrays(1, &amp;VAO);\n//glGenBuffers(1, &amp;EBO);\nglGenBuffers(1, &amp;VBO_vertices);\nglGenBuffers(1, &amp;VBO_colors);\nglGenBuffers(1, &amp;VBO_normals);\n\n// Bind the Vertex Array Object first, then bind and set vertex buffer(s) and attribute pointer(s).\nglBindVertexArray(VAO);\n\n// Copy our vertices array in a buffer for OpenGL to use\nglBindBuffer(GL_ARRAY_BUFFER, VBO_vertices);\nglBufferData(GL_ARRAY_BUFFER, sizeof(float)*3*vertices.size(), &amp;vertices[0], GL_STATIC_DRAW);\n\n\nglBindBuffer(GL_ELEMENT_ARRAY_BUFFER, EBO);\nglBufferData(GL_ELEMENT_ARRAY_BUFFER, vTable.size() * sizeof(int), &amp;vTable[0], GL_STATIC_DRAW);\n\n// Position attribute\nglVertexAttribPointer((GLuint)0, 3, GL_FLOAT, GL_FALSE, 0, (GLvoid*)0); //size = 3 (X,Y,Z)\nglEnableVertexAttribArray(0);\n\n\n//Buffer for color\nglBindBuffer(GL_ARRAY_BUFFER, VBO_colors);\nglBufferData(GL_ARRAY_BUFFER, sizeof(float)*3*vertices.size(), &amp;v_color[0], GL_STATIC_DRAW);\n\n// Color attribute\nglVertexAttribPointer((GLuint)1, 3, GL_FLOAT, GL_FALSE, 0, (GLvoid*)0); //size = 3 (R,G,B)\nglEnableVertexAttribArray(1);\n\n\n//Buffer for normals\nglBindBuffer(GL_ARRAY_BUFFER, VBO_normals);\nglBufferData(GL_ARRAY_BUFFER, sizeof(float)*3*vertices.size(), &amp;v_normals[0], GL_STATIC_DRAW);\n\n//normal attribute\nglVertexAttribPointer((GLuint)2, 3, GL_FLOAT, GL_FALSE, 0, (GLvoid*)0); //size = 3 (R,G,B)\nglEnableVertexAttribArray(2);\n\n\n// Unbind the VAO\nglBindVertexArray(0);\n</code></pre>\n\n<p>My data are : </p>\n\n<pre><code>vector&lt;vec3&gt; vertices, v_normals,v_color;\nvector&lt;int&gt; vTable;\n</code></pre>\n\n<p>I have vertices, normals and colors per vertex and an index table with the index vertices of each triangle.</p>\n\n<p>When I try to render this, nothing appears on the window. </p>\n\n<pre><code>glBindVertexArray(VAO); //Bind VAO\nglDrawElements(GL_TRIANGLES, vTable.size(), GL_UNSIGNED_INT, &amp;vTable[0]);\nglBindVertexArray(0); //Unbind VAO\n</code></pre>\n\n<p>If I used this:</p>\n\n<pre><code>glDrawArrays(GL_TRIANGLES,0,vTable.size());\n</code></pre>\n\n<p>It draws something but an incomplete object, like in the link image.</p>\n\n<p><a href=\"https://i.stack.imgur.com/649XQ.png\" rel=\"nofollow noreferrer\">image</a></p>\n\n<p>Anybody knows what happens? Thanks in advance</p>\n"}]