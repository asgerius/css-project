[{"tags": ["c++"], "comments": [{"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1453939958, "post_id": 35050502, "comment_id": 57825536, "body": "You can&#39;t just go around dividing by zero you know."}], "answers": [{"comments": [{"owner": {"reputation": 1328, "user_id": 4750084, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fqyxW.png?s=128&g=1", "display_name": "John Sensebe", "link": "https://stackoverflow.com/users/4750084/john-sensebe"}, "edited": false, "score": 0, "creation_date": 1453939528, "post_id": 35050528, "comment_id": 57825411, "body": "That does not differentiate between the usually valid <code>0 &#47; b</code> and the invalid <code>a &#47; 0</code>. The asker wants to display an error message for the latter."}, {"owner": {"reputation": 1118, "user_id": 5385625, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CKfR0.jpg?s=128&g=1", "display_name": "Sam Orozco", "link": "https://stackoverflow.com/users/5385625/sam-orozco"}, "reply_to_user": {"reputation": 1328, "user_id": 4750084, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fqyxW.png?s=128&g=1", "display_name": "John Sensebe", "link": "https://stackoverflow.com/users/4750084/john-sensebe"}, "edited": false, "score": 0, "creation_date": 1453939621, "post_id": 35050528, "comment_id": 57825437, "body": "regardless the division is impossible if one of the two numbers are zero"}, {"owner": {"reputation": 1328, "user_id": 4750084, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fqyxW.png?s=128&g=1", "display_name": "John Sensebe", "link": "https://stackoverflow.com/users/4750084/john-sensebe"}, "edited": false, "score": 0, "creation_date": 1453939884, "post_id": 35050528, "comment_id": 57825516, "body": "The division is not impossible so long as <code>b</code> is non-zero, and your method does not differentiate whether there would be an actual error or not."}], "tags": [], "owner": {"reputation": 1118, "user_id": 5385625, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CKfR0.jpg?s=128&g=1", "display_name": "Sam Orozco", "link": "https://stackoverflow.com/users/5385625/sam-orozco"}, "is_accepted": false, "score": 1, "last_activity_date": 1453939104, "creation_date": 1453939104, "answer_id": 35050528, "question_id": 35050502, "link": "https://stackoverflow.com/questions/35050502/how-to-go-around-dividing-by-zero-c/35050528#35050528", "title": "how to go around dividing by zero c++", "body": "<p>Just check before the division if either number is zero\nif(a == 0 || b == 0) f = 0;</p>\n"}, {"comments": [{"owner": {"reputation": 1328, "user_id": 4750084, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fqyxW.png?s=128&g=1", "display_name": "John Sensebe", "link": "https://stackoverflow.com/users/4750084/john-sensebe"}, "edited": false, "score": 0, "creation_date": 1453939681, "post_id": 35050552, "comment_id": 57825455, "body": "Nice one, catching the <code>sqrt</code> problem."}], "tags": [], "owner": {"reputation": 134, "user_id": 3470630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53ffcadf9aa396bb5596dc63e2e5a466?s=128&d=identicon&r=PG", "display_name": "TezlaCoil", "link": "https://stackoverflow.com/users/3470630/tezlacoil"}, "is_accepted": false, "score": 2, "last_activity_date": 1453939253, "creation_date": 1453939253, "answer_id": 35050552, "question_id": 35050502, "link": "https://stackoverflow.com/questions/35050502/how-to-go-around-dividing-by-zero-c/35050552#35050552", "title": "how to go around dividing by zero c++", "body": "<p>Perhaps better, would be to sanitize your inputs. \"If user input <code>0</code> for <code>b</code>, then say undefined, else, try to calculate.\"</p>\n\n<p>You'll also run into the issue, of if <code>a</code> is less than <code>b</code>, the <code>sqrt()</code> function is going to throw an error as well (not designed to handle a negative input).</p>\n"}, {"tags": [], "owner": {"reputation": 1328, "user_id": 4750084, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fqyxW.png?s=128&g=1", "display_name": "John Sensebe", "link": "https://stackoverflow.com/users/4750084/john-sensebe"}, "is_accepted": false, "score": 0, "last_activity_date": 1453939256, "creation_date": 1453939256, "answer_id": 35050554, "question_id": 35050502, "link": "https://stackoverflow.com/questions/35050502/how-to-go-around-dividing-by-zero-c/35050554#35050554", "title": "how to go around dividing by zero c++", "body": "<p>If you store the condition you're interested in, you can easily refer to it in multiple places:</p>\n\n<pre><code>bool isDivisionByZero = (b == 0);\nif (!isDivisionByZero) f = a / b; else f = 0;\n\n...\n\nif (!isDivisionByZero)\n    cout &lt;&lt; \"value for f is \" &lt;&lt; f &lt;&lt; \" \\n\";\nelse \n    cout &lt;&lt; \"value for f could not be computed (division by zero) \\n\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1328, "user_id": 4750084, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fqyxW.png?s=128&g=1", "display_name": "John Sensebe", "link": "https://stackoverflow.com/users/4750084/john-sensebe"}, "edited": false, "score": 0, "creation_date": 1453940131, "post_id": 35050604, "comment_id": 57825581, "body": "As I write this, the only answer to mention exception handling. :-) It&#39;s an easy enough error to catch with out a <code>catch</code>, but there is more than one way to skin a cat."}], "tags": [], "owner": {"reputation": 97, "user_id": 5195613, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/txNPR.jpg?s=128&g=1", "display_name": "Vikram Bhardwaj", "link": "https://stackoverflow.com/users/5195613/vikram-bhardwaj"}, "is_accepted": false, "score": 1, "last_activity_date": 1453939569, "creation_date": 1453939569, "answer_id": 35050604, "question_id": 35050502, "link": "https://stackoverflow.com/questions/35050502/how-to-go-around-dividing-by-zero-c/35050604#35050604", "title": "how to go around dividing by zero c++", "body": "<p>you can use try catch (exception handling) if you know how to handle the exceptions or you can simply check if b == 0 then show your message instead of dividing the numbers.</p>\n"}], "owner": {"reputation": 23, "user_id": 5849426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/484482380e27752daedfa77eb649864b?s=128&d=identicon&r=PG&f=1", "display_name": "l.sch", "link": "https://stackoverflow.com/users/5849426/l-sch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "answer_count": 4, "score": 3, "last_activity_date": 1453939812, "creation_date": 1453938935, "last_edit_date": 1453939812, "question_id": 35050502, "link": "https://stackoverflow.com/questions/35050502/how-to-go-around-dividing-by-zero-c", "title": "how to go around dividing by zero c++", "body": "<p>I'm very new to programming having only started because of a class I have to take.</p>\n\n<p>In the lab we have to program a simple calculator (adding, subtracting, division, and multiplication) and then plug in sets numbers the teacher gives us. Of course two of of the sets of numbers have zero in them. How would you code it to say undefined instead of saying floating point exception (core dumped)</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cmath&gt;\n\nusing namespace std;\n\nint main() {\n\n    int a;\n    int b;\n    float c;\n    float d;\n    float e;\n    float f;\n    float g;\n    float h;\n    float i;\n    float j;\n\n    cout &lt;&lt; \"Enter value for a\\n\";\n    cout &lt;&lt; \"Enter value for b\\n\";\n    cout &lt;&lt; \"Then press return.\\n\";\n\n    cin &gt;&gt; a;\n    cin &gt;&gt; b;\n\n    c = a + b;\n    d = a - b;\n    e = a * b;\n    f = a / b;\n\n    g = sqrt (c);\n    h = sqrt (d);\n    i = sqrt (e);\n    j = sqrt (f);\n\n    cout &lt;&lt; a &lt;&lt; \" value for a\\n\";\n    cout &lt;&lt; b &lt;&lt; \" value for b\\n\";\n    cout &lt;&lt; \"value for c is \" &lt;&lt; c &lt;&lt; \" \\n\";\n    cout &lt;&lt; \"value for d is \" &lt;&lt; d &lt;&lt; \" \\n\";\n    cout &lt;&lt; \"value for e is \" &lt;&lt; e &lt;&lt; \" \\n\";\n    cout &lt;&lt; \"value for f is \" &lt;&lt; f &lt;&lt; \" \\n\";\n    cout &lt;&lt; \"value for g is \" &lt;&lt; g &lt;&lt; \" \\n\";\n    cout &lt;&lt; \"value for h is \" &lt;&lt; h &lt;&lt; \" \\n\";\n    cout &lt;&lt; \"value for i is \" &lt;&lt; i &lt;&lt; \" \\n\";\n    cout &lt;&lt; \"value for j is \" &lt;&lt; j &lt;&lt; \" \\n\";\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "opencv", "compilation", "linker", "libstdc++"], "answers": [{"comments": [{"owner": {"reputation": 1760, "user_id": 747228, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/211cc1cb710c8b2bee81bd9b5e620b27?s=128&d=identicon&r=PG", "display_name": "unresolved_external", "link": "https://stackoverflow.com/users/747228/unresolved-external"}, "edited": false, "score": 2, "creation_date": 1532083769, "post_id": 35051999, "comment_id": 89851650, "body": "Interesting thing - when I switched to the clang, I started to get that error, even though previously with gcc it worked without problems."}], "tags": [], "owner": {"reputation": 190, "user_id": 3390921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdc4ba6546dbf78b1409a606c8ae67ac?s=128&d=identicon&r=PG&f=1", "display_name": "Dufus Johnson", "link": "https://stackoverflow.com/users/3390921/dufus-johnson"}, "is_accepted": true, "score": 12, "last_activity_date": 1453949390, "creation_date": 1453949390, "answer_id": 35051999, "question_id": 35050480, "link": "https://stackoverflow.com/questions/35050480/opencv-cannot-compile-when-using-imwrite-function/35051999#35051999", "title": "OpenCV: cannot compile when using imwrite() function", "body": "<p>Looks like you are missing '-lopencv_imgcodecs' where imwrite() lives.<br>\nRefer to OpenCV imgcodecs header file <a href=\"http://docs.opencv.org/master/d6/d87/imgcodecs_8hpp.html#gsc.tab=0\" rel=\"noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 4735, "user_id": 1576208, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/3e2ME.jpg?s=128&g=1", "display_name": "SagittariusA", "link": "https://stackoverflow.com/users/1576208/sagittariusa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6560, "favorite_count": 2, "accepted_answer_id": 35051999, "answer_count": 1, "score": 3, "last_activity_date": 1548931751, "creation_date": 1453938832, "last_edit_date": 1495540344, "question_id": 35050480, "link": "https://stackoverflow.com/questions/35050480/opencv-cannot-compile-when-using-imwrite-function", "title": "OpenCV: cannot compile when using imwrite() function", "body": "<p>In my simple first OpenCV application I want to save frames got by cam so I am using <code>imwrite()</code> as tutorial say. The problem, is that I can't compile because I get this error: </p>\n\n<pre><code>Undefined symbols for architecture x86_64:\n\"cv::imwrite(cv::String const&amp;, cv::_InputArray const&amp;, std::vector&lt;int,  std::allocator&lt;int&gt; &gt; const&amp;)\", referenced from:\n_main in video-87ad7a.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n\n<p>Reading some posts here in SO I have discovered it's a problem about the C++ standard library which is used, so I added the flag <code>libstdc++</code> but the following:</p>\n\n<pre><code>g++ -stdlib=libstdc++ -I/usr/local/include -L/usr/local/lib/ -g -o binary video.cpp -lopencv_core -lopencv_imgproc -lopencv_highgui -lopencv_ml -lopencv_video -lopencv_features2d -lopencv_calib3d -lopencv_objdetect -lopencv_stitching -lopencv_videoio -lopencv_videostab\n</code></pre>\n\n<p>has not solved the problem. How shall I do?</p>\n\n<p><strong>UPDATE</strong>\nit seems <a href=\"https://stackoverflow.com/questions/7816607/opencv-2-3-compiling-issue-undefined-refence-ubuntu-11-10\">this</a> is the solution. I don't know what was the damned flag I was missing</p>\n"}, {"tags": ["c++", "windows", "mfc"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1453943384, "post_id": 35050455, "comment_id": 57826516, "body": "Each <code>CWnd</code> has a public <code>m_hWnd</code> class member. You can easily write that to a stream, dump it using <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa363362.aspx\" rel=\"nofollow noreferrer\">OutputDebugString</a>, or log it any other way you see fit, along with any related information such as the window text. You can traverse the tree calling <a href=\"https://msdn.microsoft.com/en-us/library/4ex4cy2e.aspx\" rel=\"nofollow noreferrer\">CWnd::GetWindow</a>, starting from <a href=\"https://msdn.microsoft.com/en-us/library/waas15s1.aspx\" rel=\"nofollow noreferrer\">AfxGetMainWnd</a>. I&#39;m pretty sure, you get a debug assertion, when destroying a window you shouldn&#39;t be destroying."}, {"owner": {"reputation": 2671, "user_id": 1099237, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1efff11270d3da94fe6be7d745c52da6?s=128&d=identicon&r=PG", "display_name": "omatai", "link": "https://stackoverflow.com/users/1099237/omatai"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1453945878, "post_id": 35050455, "comment_id": 57827192, "body": "Yes - I have since gone down the &quot;easy enough to write a tool&quot; route using GetWindow(). I have now found my culprits... but not the explanation for why Windows is trying to destroy them when I was the one who created them!!"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1453951725, "post_id": 35050455, "comment_id": 57828851, "body": "Windows giveth, and Windows taketh. The fact that your application requested the system to create a window does not give you exclusive ownership of that window. Child windows are owned by their respective parent, and owned windows (like modal dialogs) are owned by their owner window. When the system destroys a parent or owner window, it also tears down its children and owned windows. At that point you are left with a <code>CWnd</code> object that holds a stale <code>m_hWnd</code> handle, or worse, a dangling <code>CWnd*</code>. Since you identified the <code>CWnd</code> already, check if it referred to a child or owned window."}, {"owner": {"reputation": 2671, "user_id": 1099237, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1efff11270d3da94fe6be7d745c52da6?s=128&d=identicon&r=PG", "display_name": "omatai", "link": "https://stackoverflow.com/users/1099237/omatai"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1454021256, "post_id": 35050455, "comment_id": 57870288, "body": "Ah - that&#39;s really helpful... and corrects a misunderstanding in the code - thanks :-)"}], "owner": {"reputation": 2671, "user_id": 1099237, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1efff11270d3da94fe6be7d745c52da6?s=128&d=identicon&r=PG", "display_name": "omatai", "link": "https://stackoverflow.com/users/1099237/omatai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 153, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1453938705, "creation_date": 1453938705, "question_id": 35050455, "link": "https://stackoverflow.com/questions/35050455/how-to-find-the-cwnd-related-to-a-deleted-hwnd", "title": "How to find the CWnd related to a deleted HWND", "body": "<p>When my MFC application exits, it appears that I am deleting/destroying at least 1 CWnd/HWND that I should not be cleaning up - windows protests that it cannot look up the CWnd from the HWND using Cwnd::FromHandlePermanent() because the HWND has already been deleted.</p>\n\n<p>Is there any way to find what the original CWnd was?</p>\n\n<p>I realise that <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd318521%28v=vs.85%29.aspx\" rel=\"nofollow\">Inspect.exe</a> will identify the entire tree of windows UI objects by their HWNDs... but it does not provide any way to dump that tree so that I could crash my application, then search through it to find the (first) guilty item. Is there a similar tool which will allow me to list CWnd objects and dump their HWNDs to a file... or is it easy enough to write one?</p>\n"}, {"tags": ["c++", "arrays", "performance", "reference", "bit-manipulation"], "comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1453938643, "post_id": 35050408, "comment_id": 57825110, "body": "Profile it. It will likely depend on your system, exactly how much pressure the CPU cache is under, etc. Bitwise ops are super cheap, but so are memory accesses in a small, contiguous space."}, {"owner": {"reputation": 6920, "user_id": 4394169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aETL5.jpg?s=128&g=1", "display_name": "Vlad Feinstein", "link": "https://stackoverflow.com/users/4394169/vlad-feinstein"}, "edited": false, "score": 0, "creation_date": 1454017521, "post_id": 35050408, "comment_id": 57868340, "body": "Your encoding is a bit too liberal. There are 6 different pieces of two colors, and an empty space. Obviously it fits in 4 bits: leftmost for the color (1-white, 0-black) and the rest for the name (0-nothing, 1-pawn, etc.). Since &quot;nothing&quot; has no color, <code>1000</code> and <code>0000</code> are empty fields (or you may choose to not use <code>1000</code>). Now, do you really need the &quot;moved&quot; bit? I don&#39;t know much about chess, but I think the strategy depends on the position only, regardless of which piece was last moved. There is not much difference between 128, 64 or 32 bytes; there <i>might</i> be if you have 100,000 of them."}], "answers": [{"tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": true, "score": 3, "last_activity_date": 1453939179, "creation_date": 1453939179, "answer_id": 35050540, "question_id": 35050408, "link": "https://stackoverflow.com/questions/35050408/array-referencing-speed-vs-bitwise-operators/35050540#35050540", "title": "Array referencing speed vs bitwise operators", "body": "<p>The answer here is \"yes, no and maybe\". It REALLY depends on how good the compiler is, what processor it is run on, and which is most important, space or time.</p>\n\n<p>My instinct would be that storing will be slower in a bitmask, retrieving is about the same whether you store a byte at a time or bitwise pattern. </p>\n\n<p>The reason being that store involves:</p>\n\n<pre><code>  value = (value &amp; ~ bits) | new_value; \n</code></pre>\n\n<p>where <code>bits</code> is the mask of the bits you want to use (e.g. for the color it would be 0x18 or 00011000. </p>\n\n<p>Checking the value involves a single and operetion:</p>\n\n<pre><code>  value &amp; bits; \n</code></pre>\n\n<p>On the other hand, if you use three [or four] bytes to store each value, you get a single byte store and single byte load for each element. That's about as fast as anything can be on a modern machine.</p>\n\n<p>Affecting this is also how much cache the processor has - fetching from main memory or even doing a L2 cache-fetch is slower than two or three extra simple instructions.</p>\n\n<p>But the real answer for anything like this is: write some code and measure the speed. Make sure that you do this REALISTIC, so that you have the right amount of other instructions, the right amount of data (working on 5 bytes is not the same as building the possible moves for 6 moves ahead with 100000 choices [full boards] calculated for each move-level).</p>\n"}, {"tags": [], "owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": false, "score": 2, "last_activity_date": 1455487420, "last_edit_date": 1495542667, "creation_date": 1455487420, "answer_id": 35398574, "question_id": 35050408, "link": "https://stackoverflow.com/questions/35050408/array-referencing-speed-vs-bitwise-operators/35398574#35398574", "title": "Array referencing speed vs bitwise operators", "body": "<p>Your choice of <code>DEF</code> as the bottom 3 bits is wise.  You might want to use them to index a table, so only needing to mask, not shift-and-mask, is good.</p>\n\n<p>If you ever want to index a table with the <code>BC</code> bits, putting them as the upper 2 bits would mean you only need to shift, and not mask.</p>\n\n<p>Or, if you often want to test the <code>A</code> bit, putting it as the MSB could save a tiny amount of code-size.  <code>test al,al</code>/<code>js</code> (branch on the sign bit) is slightly shorter than <code>test al, 0x20</code> / <code>jnz</code> (branch on bit 5), because of the immediate byte.  The only speed difference is in the x86 code size, though, so it's very minor.  </p>\n\n<p><a href=\"https://stackoverflow.com/questions/34407437/what-is-the-efficient-way-to-count-set-bits-at-a-position-or-lower/34410357#34410357\">What is the efficient way to count set bits at a position or lower?</a> took advantage of a similar trick, where the compiler can use an arithmetic right-shift to broadcast the sign bit to the whole register.  This can then be used as an AND-mask.</p>\n\n<hr>\n\n<p>Bitwise operations are cheap.  If you often need both pieces of information (piece type and color), you'll probably be better off with packing your maps together, rather than having two separate arrays.  Four 16B vector registers can hold a whole board.  Loading from memory that's in L1 cache is extremely cheap on x86, maybe even cheaper than a couple ALU ops in registers if there's a lot of parallelism and your code is already bottlenecked on 3 or 4 ALU operations per clock.  (Intel SnB / Haswell).  So it might possibly be a win to store it separately, but only if everything really is hot in L1.  Otherwise, go for the data density every time.</p>\n\n<hr>\n\n<p>Many chess programs store board positions as a <a href=\"https://en.wikipedia.org/wiki/Bitboard\" rel=\"nofollow noreferrer\">Bitboard</a>, where each position of a 64bit int represents a board position.  So you might have a mask of \"black pawns\" and \"white pawns\".  You can OR them together to get a bitboard of multiple pieces.  You can AND them to see where they intersect.</p>\n\n<p>I think you can use clever bitwise stuff to check the diagonals the bishops can attack, and things like that.  32 and 64bit immediate constants are cheap.</p>\n"}], "owner": {"reputation": 590, "user_id": 4260902, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/100000665496061/picture?type=large", "display_name": "Michael Choi", "link": "https://stackoverflow.com/users/4260902/michael-choi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 733, "favorite_count": 0, "accepted_answer_id": 35050540, "answer_count": 2, "score": 1, "last_activity_date": 1455487420, "creation_date": 1453938439, "last_edit_date": 1592644375, "question_id": 35050408, "link": "https://stackoverflow.com/questions/35050408/array-referencing-speed-vs-bitwise-operators", "title": "Array referencing speed vs bitwise operators", "body": "<p>I am currently making a chess game and I am storing my information on two 8 by 8 arrays. The first stores team type (1 for white, 0 for nothing, -1 for black), and the second stores piece type (1 for pawn, 2 for rook, etc...). Since I am programming an AI for the game, I was wondering if I could combine these two maps together, with one 8 by 8 array. The information would be stored in one byte like this:</p>\n<blockquote>\n<p>00 A BC DEF</p>\n</blockquote>\n<p>where A represents if it moved, BC represents the team:</p>\n<blockquote>\n<p>00 A 01 DEF for white,</p>\n<p>00 A 10 DEF for black,</p>\n<p>00 A 00 DEF for nothing</p>\n</blockquote>\n<p>and DEF represents the piece type in a similar manner. I would access these values by <strong>&amp;</strong> ing a mask with the byte. So here is my question. Would a computer be able to access information faster with a smaller array, or would the bitwise function make it run too slow? Memory is not an issue for me.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1082, "user_id": 4256283, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2dc2b4976c7421d83d6f34770bc36046?s=128&d=identicon&r=PG&f=1", "display_name": "Jytug", "link": "https://stackoverflow.com/users/4256283/jytug"}, "edited": false, "score": 0, "creation_date": 1453938550, "post_id": 35050373, "comment_id": 57825081, "body": "Try defining the class TrieNode inside the Trie class"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1453939172, "post_id": 35050373, "comment_id": 57825275, "body": "You can&#39;t have <code>new TrieNode</code> at a point where <code>TrieNode</code> is incomplete."}], "answers": [{"tags": [], "owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "is_accepted": true, "score": 3, "last_activity_date": 1453940809, "last_edit_date": 1453940809, "creation_date": 1453938630, "answer_id": 35050441, "question_id": 35050373, "link": "https://stackoverflow.com/questions/35050373/incomplete-type-of-nested-class/35050441#35050441", "title": "Incomplete Type of Nested Class", "body": "<p>Define <code>Trie</code>'s constructor after the <code>TrieNode</code> definition</p>\n\n<pre><code>class Trie::TrieNode{...}\n\n// must be AFTTER the class Trie is fully defined\nTrie::Trie( ) : root( new TrieNode( ) ){ };\n</code></pre>\n\n<p>otherwise the constructor of <code>Trie</code> needs the full definition of <code>TrieNode</code>, as it needs to construct a new object, hence your error.</p>\n"}], "owner": {"reputation": 55, "user_id": 3231360, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/s2atc.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3231360/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 411, "favorite_count": 0, "accepted_answer_id": 35050441, "answer_count": 1, "score": 1, "last_activity_date": 1453943558, "creation_date": 1453938282, "last_edit_date": 1453943558, "question_id": 35050373, "link": "https://stackoverflow.com/questions/35050373/incomplete-type-of-nested-class", "title": "Incomplete Type of Nested Class", "body": "<p>I have a code in the following form:</p>\n\n<pre><code>class Trie{\npublic:\n    Trie( ) : root( new TrieNode( ) ){ };\n\n    // Inserts a word into the trie.\n    void insert( std::string word );\n\n    // Returns if the word is in the trie.\n    bool search( std::string word );\n\n    // Returns if there is any word in the trie\n    // that starts with the given prefix.\n    bool startsWith( std::string prefix );\n\nprivate:\n    class TrieNode;\n    std::unique_ptr&lt;TrieNode&gt; root;\n};\n\nclass Trie::TrieNode{\npublic:\n    TrieNode( ) : eow( false ){ };\n\n    TrieNode* appendChar( char tar );\n\n    void end( );\n\n    bool isEnd( );\n\n    TrieNode* getChar( char tar );\n\n    int getInd( char tar );\n\nprivate:\n    std::array&lt;std::unique_ptr&lt;TrieNode&gt;, 26&gt; data;\n    bool eow;                        // End of word\n};\n</code></pre>\n\n<p>However, at the third line, <code>Trie(): root( new TrieNode() )</code>, compiler continue complains that <code>TrieNode</code> is incomplete. How can I fix it?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "undefined"], "answers": [{"comments": [{"owner": {"reputation": 10264, "user_id": 1655700, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/xObp1.png?s=128&g=1", "display_name": "Tyler Durden", "link": "https://stackoverflow.com/users/1655700/tyler-durden"}, "edited": false, "score": 0, "creation_date": 1453938118, "post_id": 35050325, "comment_id": 57824938, "body": "Oh, I see it is a constructor."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 10264, "user_id": 1655700, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/xObp1.png?s=128&g=1", "display_name": "Tyler Durden", "link": "https://stackoverflow.com/users/1655700/tyler-durden"}, "edited": false, "score": 1, "creation_date": 1453939230, "post_id": 35050325, "comment_id": 57825298, "body": "@TylerDurden don&#39;t beat yourself up over it"}], "tags": [], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "is_accepted": true, "score": 3, "last_activity_date": 1453938300, "last_edit_date": 1453938300, "creation_date": 1453938064, "answer_id": 35050325, "question_id": 35050292, "link": "https://stackoverflow.com/questions/35050292/apparently-undefined-variable-in-numerical-recipes/35050325#35050325", "title": "Apparently undefined variable in Numerical Recipes", "body": "<p>In this line:</p>\n\n<pre><code> MatDoub pp(ndim+1,ndim);\n</code></pre>\n\n<p><code>pp</code> is not being <em>used</em> it is being declared and constructed. After this line <code>pp</code> is an initialized object and subsequent uses are fine. You can find more information about <a href=\"http://en.cppreference.com/w/cpp/language/initializer_list\" rel=\"nofollow\"><code>constructor initialization</code> here.</a></p>\n"}], "owner": {"reputation": 10264, "user_id": 1655700, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/xObp1.png?s=128&g=1", "display_name": "Tyler Durden", "link": "https://stackoverflow.com/users/1655700/tyler-durden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 0, "accepted_answer_id": 35050325, "answer_count": 1, "score": 3, "last_activity_date": 1453938300, "creation_date": 1453937911, "question_id": 35050292, "link": "https://stackoverflow.com/questions/35050292/apparently-undefined-variable-in-numerical-recipes", "title": "Apparently undefined variable in Numerical Recipes", "body": "<p>I am trying to use Numerical Recipes, 3rd Edition, Amoeba.h and cannot find where a variable is being defined. Here is the beginning of the code:</p>\n\n<pre><code>struct Amoeba {\n    const Doub ftol;\n    Int nfunc;\n    Int mpts;\n    Int ndim;\n    Doub fmin;\n    VecDoub y;\n    MatDoub p;\n    Amoeba(const Doub ftoll) : ftol(ftoll) {}\n    template &lt;class T&gt;\n    VecDoub minimize(VecDoub_I &amp;point, const Doub del, T &amp;func)\n    {\n        VecDoub dels(point.size(),del);\n        return minimize(point,dels,func);\n    }\n    template &lt;class T&gt;\n    VecDoub minimize(VecDoub_I &amp;point, VecDoub_I &amp;dels, T &amp;func)\n    {\n        Int ndim=point.size();\n        MatDoub pp(ndim+1,ndim);           &lt;--------- XXXXXXX\n        for (Int i=0;i&lt;ndim+1;i++) {\n            for (Int j=0;j&lt;ndim;j++)\n                pp[i][j]=point[j];\n            if (i !=0 ) pp[i][i-1] += dels[i-1];\n        }\n        return minimize(pp,func);\n    }\n    template &lt;class T&gt;\n    VecDoub minimize(MatDoub_I &amp;pp, T &amp;func)\n    {\n        const Int NMAX=5000;\n        const Doub TINY=1.0e-10;\n        Int ihi,ilo,inhi;\n        mpts=pp.nrows();\n        ndim=pp.ncols();\n        VecDoub psum(ndim),pmin(ndim),x(ndim);\n        p=pp;\n.....\n</code></pre>\n\n<p>On the line marked with the X's the variable pp is used but does not appear to be defined. In the next method, pp is used as an argument variable defined as <code>MatDoub_I &amp;pp</code> (MatDoub is a class that implements matrices), but in the first function it appears to be undefined. Is this just an error on the part of the authors or is there something I do not understand about C++ here?</p>\n\n<p>Note that just p is defined as <code>MatDoub</code> above. Does that mean pp is the same things as (MatDoub)(MatDoub)? That violates my understanding of C.</p>\n"}, {"tags": ["c++", "c++11", "stl", "std", "optional"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 4, "creation_date": 1453938941, "post_id": 35050274, "comment_id": 57825206, "body": "One cannot, looking at the iterator alone, determine whether or not it&#39;s dereferenceable. Which in itself is necessary but not sufficient: an algorithm could have been invoked over a range other than <code>(someContainer.begin(), someContainer.end())</code>. In light of this, a solution that doesn&#39;t involve calling code explicitly checking for &quot;algorithm found something&quot; appears unlikely."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1453944663, "post_id": 35051325, "comment_id": 57826884, "body": "Alternatively the helper could accept <code>pos</code> and a boolean, and the usage would be <code>bla(min_foo,  min_foo == foos.end())</code>"}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 2, "last_activity_date": 1453944473, "creation_date": 1453944473, "answer_id": 35051325, "question_id": 35050274, "link": "https://stackoverflow.com/questions/35050274/how-to-return-an-optionalt-without-an-if-statement/35051325#35051325", "title": "How to return an optional&lt;T&gt; without an if statement?", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/experimental/optional/optional\" rel=\"nofollow\">optional</a> does not seem to have a constructor that can sometimes yield an empty optional and sumetimes yield a full one.</p>\n\n<p>Perhaps you could make a helper:</p>\n\n<pre><code>template&lt;typename Iter&gt;\noptional&lt;typename Iter::value_type&gt; try_deref(Iter pos, Iter singular)\n{\n    if ( pos != singular )\n        return *pos;\n\n    return {};\n}\n</code></pre>\n\n<p>Sample usage:</p>\n\n<pre><code>optional&lt;Foo&gt; GetMinElement(std::vector&lt;Foo&gt; const &amp;foos)\n{\n    auto min_foo = std::min_element(foos.begin(), foos.end());\n    return try_deref(min_foo, foos.end()); \n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 2, "last_activity_date": 1454007797, "last_edit_date": 1454007797, "creation_date": 1453951698, "answer_id": 35052352, "question_id": 35050274, "link": "https://stackoverflow.com/questions/35050274/how-to-return-an-optionalt-without-an-if-statement/35052352#35052352", "title": "How to return an optional&lt;T&gt; without an if statement?", "body": "<p>You have to remember that the end iterator is not a null pointer.  It can even be a valid iterator if the range was a subrange.</p>\n\n<p>I write my own range algorithms.  They follow a different pattern than yours.</p>\n\n<p>A range algorithm takes a <code>class Range</code>, does adl-enabled <code>begin</code>/<code>end</code> and runs an iterator algorithm.  It then returns an optional iterator (empty if it would be <code>end</code>).</p>\n\n<p>This is slightly different than yours, because mine does not return a copy of an element.</p>\n\n<p>And they can be used (with the addition of <code>make_range(start,finish)</code>) everywhere the originals are.</p>\n\n<hr>\n\n<p>If you dislike the syntax of both if and <code>?</code>, these may help:</p>\n\n<pre><code>template&lt;class T&gt;\nstd::optional&lt;std::decay_t&lt;T&gt;&gt; maybe(bool engage, T&amp;&amp;t){\n  if (!engage) return {};\n  return std::forward&lt;T&gt;(t);\n}\n</code></pre>\n\n<p>or even:</p>\n\n<pre><code>templace&lt;class F&gt;\nstd::optional&lt;std::decay_t&lt;std::result_of_t&lt;F()&gt;&gt;&gt;\nperhaps(bool do_it, F&amp;&amp;f){\n  if (!engage) return {};\n  return std::forward&lt;F&gt;(f)();\n}\n</code></pre>\n\n<p>which short-circuits like <code>?</code> does.</p>\n\n<pre><code>namespace adl_helper{\n  using std::begin; using std::end;\n  template&lt;class R&gt; auto adl_begin(R&amp;&amp;)-&gt;decltype(begin(std::declval&lt;R&gt;())){\n    return begin(std::forward&lt;R&gt;(r));\n  }\n  template&lt;class R&gt; auto adl_end(R&amp;&amp;)-&gt;decltype(end(std::declval&lt;R&gt;())){\n    return end(std::forward&lt;R&gt;(r));\n  }\n}\nusing adl_helper::adl_begin;\nusing adl_helper::adl_end;\n\ntemplate&lt;class R&gt;using iterator_t=decltype(adl_begin(std::declval&lt;R&gt;()));\n\ntemplate&lt;class R&gt;\noptional&lt;iterator_t&lt;R&gt;&gt; min_element(R&amp;&amp; r) {\n  auto ret = std::min_element(adl_begin(r), adl_end(r));\n  return maybe(ret!=adl_end(r), ret);\n}\n</code></pre>\n\n<p>which I find is more useful than your version.</p>\n\n<p>You do need to do an extra <code>*</code> sometimes, or use a helper.</p>\n"}], "owner": {"reputation": 2607, "user_id": 2592962, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/6vDLz.jpg?s=128&g=1", "display_name": "Will Beason", "link": "https://stackoverflow.com/users/2592962/will-beason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 304, "favorite_count": 0, "accepted_answer_id": 35052352, "answer_count": 2, "score": 2, "last_activity_date": 1454007797, "creation_date": 1453937812, "last_edit_date": 1453943697, "question_id": 35050274, "link": "https://stackoverflow.com/questions/35050274/how-to-return-an-optionalt-without-an-if-statement", "title": "How to return an optional&lt;T&gt; without an if statement?", "body": "<p>Suppose I have a function which finds and returns the minimum element of a vector. If the vector is empty, it should return an empty optional object. Is there a way for me to use the <code>optional&lt;T&gt;</code> constructor to avoid using either an if statement or the ternary operator?</p>\n\n<p>With if statement:</p>\n\n<pre><code>optional&lt;Foo&gt; GetMinElement(vector&lt;Foo&gt; foos) {\n  vector&lt;Foo&gt;::iterator min_foo = std::min_element(foos.begin(), foos.end());\n  bool found_min_element = (min_foo != foos.end());\n  if (found_min_element) {\n    return *min_foo;\n  } else {\n    return nullopt;\n  }\n}\n</code></pre>\n\n<p>With ternary operator:</p>\n\n<pre><code>optional&lt;Foo&gt; GetMinElement(vector&lt;Foo&gt; foos) {\n  vector&lt;Foo&gt;::iterator min_foo = std::min_element(foos.begin(), foos.end());\n  bool found_min_element = (min_foo != foos.end());\n  return found_min_element ? optional&lt;Foo&gt;(*min_foo) : optional&lt;Foo&gt;(nullopt);\n}\n</code></pre>\n\n<p>Naively, I'd just like to be able to pass the output of an <code>stl</code> algorithm to the <code>optional&lt;T&gt;</code> constructor and have it handle the logic of checking for a null pointer. Is there some idiom for this?</p>\n"}, {"tags": ["c++", "parsing"], "comments": [{"owner": {"reputation": 12155, "user_id": 35142, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b935a7d95c904243e5bc325587927fe9?s=128&d=identicon&r=PG", "display_name": "Bob Kaufman", "link": "https://stackoverflow.com/users/35142/bob-kaufman"}, "edited": false, "score": 1, "creation_date": 1453937614, "post_id": 35050184, "comment_id": 57824738, "body": "You don&#39;t mention the language you&#39;re using. But this sounds like a job for regular expressions. Something like <code>\\d+\\.\\d{2}</code>"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1453939818, "post_id": 35050184, "comment_id": 57825500, "body": "C++ has regexes these days. Are you insisting that the values have exactly two decimal fraction digits, or at most two?"}, {"owner": {"reputation": 386, "user_id": 2875665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1374f1e1a2587388985bf323521047c?s=128&d=identicon&r=PG&f=1", "display_name": "kakrafoon", "link": "https://stackoverflow.com/users/2875665/kakrafoon"}, "edited": false, "score": 0, "creation_date": 1453940285, "post_id": 35050184, "comment_id": 57825623, "body": "I am insisting that it has exactly two decimal places."}], "answers": [{"tags": [], "owner": {"reputation": 386, "user_id": 2875665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1374f1e1a2587388985bf323521047c?s=128&d=identicon&r=PG&f=1", "display_name": "kakrafoon", "link": "https://stackoverflow.com/users/2875665/kakrafoon"}, "is_accepted": false, "score": 0, "last_activity_date": 1453938058, "last_edit_date": 1495542661, "creation_date": 1453938058, "answer_id": 35050322, "question_id": 35050184, "link": "https://stackoverflow.com/questions/35050184/requiring-valid-float-input-from-stdin-to-have-precision-of-2-in-c/35050322#35050322", "title": "Requiring valid float input from stdin to have precision of 2 in C++", "body": "<p>I found this from other sources in stackoverflow. </p>\n\n<p><a href=\"https://stackoverflow.com/questions/4271315/c-how-to-check-an-input-float-variable-for-valid-input\">C++ How to check an input float variable for valid input</a></p>\n\n<p>Here is the implementation. We read as string and only accept if any of the characters not digits (in perl, I suppose we could simply do a regex non-match [0-9]). </p>\n\n<p>Apparently, the find_first_not_of method in string does this for us:</p>\n\n<pre><code>  std::string a;\n\n  if(!(std::cin&gt;&gt;a)){\n    std::cout &lt;&lt; \"Invalid float entry \" &lt;&lt; std::endl;\n  }\n\n  if(a.find_first_not_of(\"1234567890.-\")!=std::string::npos){\n    std::cout &lt;&lt; \"Invalid string to float\" &lt;&lt; std::endl;}\n</code></pre>\n\n<p>Next, we verify that the string has two decimal places by searching for the location of the decimal point. </p>\n\n<pre><code>  if(a.size()-a.find(\".\")!=3){\n    std::cout &lt;&lt; \"Valid float but must have two decimal places \\n\";\n  }else{\n    std::cout &lt;&lt; \"Accept - valid float and has two decimal places \\n\";\n  }\n</code></pre>\n\n<p>Finally, we convert to float using stof.</p>\n\n<pre><code>float u = stof(a);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 386, "user_id": 2875665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1374f1e1a2587388985bf323521047c?s=128&d=identicon&r=PG&f=1", "display_name": "kakrafoon", "link": "https://stackoverflow.com/users/2875665/kakrafoon"}, "edited": false, "score": 0, "creation_date": 1453965550, "post_id": 35054368, "comment_id": 57833737, "body": "Excellent answer. Thanks for the tip on regex_match."}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 0, "last_activity_date": 1453962951, "creation_date": 1453962951, "answer_id": 35054368, "question_id": 35050184, "link": "https://stackoverflow.com/questions/35050184/requiring-valid-float-input-from-stdin-to-have-precision-of-2-in-c/35054368#35054368", "title": "Requiring valid float input from stdin to have precision of 2 in C++", "body": "<p>If you have a C++ compiler and standard library which implement C++11, then you can use a regular expression, which is very simple:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;regex&gt;\n#include &lt;string&gt;\n\nint main(int argc, char** argv) {\n    std::string pattern(\"[-+]?\\\\d+\\\\.\\\\d\\\\d$\");\n    std::regex reg(pattern);\n    for (int i = 1; i &lt; argc; ++i) {\n      std::cout &lt;&lt; argv[i]\n                &lt;&lt; (std::regex_match(argv[i], reg) ? \" matched\\n\" : \" didn't match\\n\");\n    }\n    return 0;\n}\n</code></pre>\n\n<p>That test program takes the values as arguments rather than reading them from a file or stream, but modifying it to use the <code>istream</code> is trivial. There is no need to convert the string to a C-string; the first argument to <code>regex_match</code> can also be a <code>std::string</code>, or it can even be a pair of iterators whose value_type is <code>char</code>. In this case it just happened to be convenient to use a <code>char*</code>.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/c3319083bff16172\" rel=\"nofollow\">See it live on coliru.</a></p>\n"}], "owner": {"reputation": 386, "user_id": 2875665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1374f1e1a2587388985bf323521047c?s=128&d=identicon&r=PG&f=1", "display_name": "kakrafoon", "link": "https://stackoverflow.com/users/2875665/kakrafoon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1453962951, "creation_date": 1453937417, "last_edit_date": 1453938163, "question_id": 35050184, "link": "https://stackoverflow.com/questions/35050184/requiring-valid-float-input-from-stdin-to-have-precision-of-2-in-c", "title": "Requiring valid float input from stdin to have precision of 2 in C++", "body": "<p>Let us say that we are reading a float with std::cin or from a file, and want to enforce the condition that it has two trailing decimal places:</p>\n\n<p>E.g. <br>\n4.01 (valid) <br>\n4.001 (invalid - has three trailing decimal places) <br>\na,47 (invalid, has two non [0-9] characters in 'a' and ',') <br>\n#556.53 (invalid, has '#')</p>\n\n<p>(Just for context, in my example, I am parsing from a text file with several entries separated by spaces, validating each input, and storing them in a struct for further processing.)</p>\n\n<p>How do we do it? </p>\n"}, {"tags": ["c++", "string"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1453937249, "post_id": 35050128, "comment_id": 57824578, "body": "if <code>getName()</code> returns a <code>std::string</code> then all of those <code>&lt;&lt;</code>s need to be <code>+</code>s"}, {"owner": {"reputation": 59, "user_id": 5844132, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/885014c39ba3da7fb28a5374e15a09a6?s=128&d=identicon&r=PG&f=1", "display_name": "Mitch89", "link": "https://stackoverflow.com/users/5844132/mitch89"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1453937299, "post_id": 35050128, "comment_id": 57824607, "body": "Thank-you. That seemed to fix it."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1453937404, "post_id": 35050128, "comment_id": 57824645, "body": "OK.  I am voting to close as a typo then."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1453937423, "post_id": 35050128, "comment_id": 57824656, "body": "Or you declare <code>output</code> a stringstream."}], "answers": [{"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1453937486, "creation_date": 1453937486, "answer_id": 35050196, "question_id": 35050128, "link": "https://stackoverflow.com/questions/35050128/issue-with-string-variable-no-operator-matches-these-operands/35050196#35050196", "title": "Issue with string variable: &quot;No operator &lt;&lt; matches these operands&quot;", "body": "<p>It seems you mean the following</p>\n\n<pre><code>output = getName() + \" \" + std::to_string(getYear());\n</code></pre>\n\n<p>provided that function <code>getName</code> returns an object of type <code>std::string</code></p>\n"}, {"tags": [], "owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "is_accepted": true, "score": 1, "last_activity_date": 1453937588, "creation_date": 1453937588, "answer_id": 35050224, "question_id": 35050128, "link": "https://stackoverflow.com/questions/35050128/issue-with-string-variable-no-operator-matches-these-operands/35050224#35050224", "title": "Issue with string variable: &quot;No operator &lt;&lt; matches these operands&quot;", "body": "<p>Making the assumption that <code>getName()</code> returns a string:</p>\n\n<pre><code>std::string output;\noutput = getName() + \" \" + std::to_string(getYear());\nreturn output;\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>std::stringstream message;\nmessage &lt;&lt; getName() &lt;&lt; \" \" &lt;&lt; getYear();\nreturn message.str();\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 5844132, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/885014c39ba3da7fb28a5374e15a09a6?s=128&d=identicon&r=PG&f=1", "display_name": "Mitch89", "link": "https://stackoverflow.com/users/5844132/mitch89"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "closed_date": 1453955266, "accepted_answer_id": 35050224, "answer_count": 2, "score": 1, "last_activity_date": 1453937588, "creation_date": 1453937176, "question_id": 35050128, "link": "https://stackoverflow.com/questions/35050128/issue-with-string-variable-no-operator-matches-these-operands", "closed_reason": "Not suitable for this site", "title": "Issue with string variable: &quot;No operator &lt;&lt; matches these operands&quot;", "body": "<p>I'm having an issue with a string variable.</p>\n\n<p>I'm using it to output some debug information for some customer objects.</p>\n\n<p>I want to return their name and the yearofbirth in the form of a string, mostly to check things are where they're supposed to be and information is correct.</p>\n\n<pre><code>std::string ToString()\n    {\n        std::string output;\n        output = getName() &lt;&lt; \" \" &lt;&lt; std::to_string(getYear());\n        return output;\n    }\n</code></pre>\n\n<p>I have no idea why this won't compile. Any ideas what could be causing this? Thanks.</p>\n"}, {"tags": ["c++", "multithreading", "opencv", "c++11", "asynchronous"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1453937852, "post_id": 35050125, "comment_id": 57824833, "body": "Are <code>captureSetOfImages</code> and <code>captureSetOfFrames</code> two functions or a typo? (Also, don&#39;t rely too much on IntelliSense \u2013 it&#39;s just an approximation.)"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1453939437, "post_id": 35050125, "comment_id": 57825384, "body": "Also, this doesn&#39;t make much sense. <code>get()</code> can be called once on a <code>future</code>."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1453942660, "post_id": 35050125, "comment_id": 57826279, "body": "A future does not deliver partial results. <code>get</code> returns the entire result the first time you call it (it waits for the computation to finish if it hasn&#39;t) and any further calls are undefined."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1453943328, "post_id": 35050125, "comment_id": 57826498, "body": "Also, you don&#39;t know that <code>captureSetOfFrames</code> has been called just because <code>std::async</code> returns \u2013 all you know is that the function will have been called before <code>get</code> returns. If you use the overload you&#39;re using it may even be called synchronously when <code>get</code> is called, depending on the implementation."}, {"owner": {"reputation": 358, "user_id": 4174701, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/795f8a343604173c510dfc30d2bb64e9?s=128&d=identicon&r=PG&f=1", "display_name": "michelson", "link": "https://stackoverflow.com/users/4174701/michelson"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1453964539, "post_id": 35050125, "comment_id": 57833216, "body": "@molbdnilo Sorry of course <code>captureSetOfImages</code> and <code>captureSetOfFrames</code> is a typo, im gonna fix it in a moment.  So basicly you say that it can be done like: <code>auto f = std::async(&amp;Camera::captureSetOfFrames, cam, 10);     proj-&gt;start();     recvimgs = f.get();     proj-&gt;stop();</code> Couse i assume from what you say that <code>captureSetOfFrames</code> will be running when i <code>start()</code> and it will wait till <code>f.get()</code> return a value next?"}], "owner": {"reputation": 358, "user_id": 4174701, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/795f8a343604173c510dfc30d2bb64e9?s=128&d=identicon&r=PG&f=1", "display_name": "michelson", "link": "https://stackoverflow.com/users/4174701/michelson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 207, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1453964813, "creation_date": 1453937158, "last_edit_date": 1495542207, "question_id": 35050125, "link": "https://stackoverflow.com/questions/35050125/using-stdasync-to-call-member-function-returning-stdvector", "title": "Using std::async to call member function returning std::vector", "body": "<p>I know, guys, there is s***t load of posts about <code>std::async</code>, but I just cant figure it out myself (for my defense I can say that today was my first day looking at whole multithread &amp; async thing...). \nHere's what I have and what I want it to do - I have a camera and a projector and I want to synchronize them. They are connected so the projector signal triggers acquisition of images. HOWEVER I have to call for acquisiton start before I start displaying images via projector. I am using <code>OpenCV</code> as image processing/handling lib.</p>\n\n<pre><code>class Camera\n{\npublic::\n    //this one captures images till vector reaches given count of images (while loop)\n    std::vector&lt;cv::Mat&gt; captureSetOfFrames(uint count = 10)\n    {\n         std::vector&lt;cv::Mat&gt; vect;\n         while(vect.size() &lt; count) { /*try to capture and append to vect */ };\n    }\n};\nclass Projector\n{\npublic:\n    void start();\n    void stop();\n}\nint main()\n{\n    Projector *proj = new Projector();\n    Camera *cam = new Camera();\n    std::vector&lt;cv::Mat&gt; recvimgs;\n    recvimgs.reserve(10);\n    auto f = std::async(&amp;Camera::captureSetOfFrames, cam, PATTERN_10);\n    proj-&gt;start();\n    while(recvimgs.size() &lt; 10)\n        recvimgs = f.get();\n    proj-&gt;stop();\n}\n</code></pre>\n\n<p>I get an error: </p>\n\n<pre><code>3   IntelliSense: no operator \"=\" matches these operands\n            operand types are: std::vector&lt;cv::Mat, std::allocator&lt;cv::Mat&gt;&gt; = std::vector&lt;cv::Mat, std::allocator&lt;cv::Mat&gt;&gt; (unsigned short)   \n</code></pre>\n\n<ol>\n<li>From where this <code>unsigned short</code> at the end of error is coming from...?</li>\n<li>How can I achive this behaviour? (If the code example is not clear enough I want first to prepare for grabbing by calling <code>Camera::captureSetOfFrames()</code> then simultaneously call <code>Projector::start()</code> but knowing camera is ready for capturing, finally terminate displaying by calling <code>Projector::stop()</code> when all images are captured)</li>\n</ol>\n\n<p>Hope you can figure it out! </p>\n\n<p>PS: Base post which suggested me this (not working) solution <a href=\"https://stackoverflow.com/questions/13669094/how-to-in-c11-use-stdasync-on-a-member-function\">How to, in C++11, use std::async on a member function?</a></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1453937013, "post_id": 35050065, "comment_id": 57824490, "body": "In order to use <code>find</code>, you need to define an <code>operator==</code> function which will compare <code>Vehicle</code>s with each other.  This could either be a free function or a member function. <a href=\"http://stackoverflow.com/a/4421719/1505939\">See here</a> for example"}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 2, "creation_date": 1453937033, "post_id": 35050065, "comment_id": 57824498, "body": "So, you need an <code>operator==</code> for your vehicle type (preferrably that takes a const)"}, {"owner": {"reputation": 140, "user_id": 5027575, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-iXvfesVuiiQ/AAAAAAAAAAI/AAAAAAAAAEk/pYZUEqrANbk/photo.jpg?sz=128", "display_name": "Pouyan Khodabakhsh", "link": "https://stackoverflow.com/users/5027575/pouyan-khodabakhsh"}, "edited": false, "score": 1, "creation_date": 1453937042, "post_id": 35050065, "comment_id": 57824501, "body": "you better provide more code if you want an answer"}, {"owner": {"reputation": 123, "user_id": 5849387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f48c7b7eaa597baa4052bffddbc06743?s=128&d=identicon&r=PG&f=1", "display_name": "SinLortuen", "link": "https://stackoverflow.com/users/5849387/sinlortuen"}, "edited": false, "score": 1, "creation_date": 1453939426, "post_id": 35050065, "comment_id": 57825373, "body": "Thanks guys for the comments. I fixed it with your suggestions. I&#39;m still a beginner and don&#39;t know lots of stuff."}], "answers": [{"tags": [], "owner": {"reputation": 2628, "user_id": 1508243, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c55ab140c6839baef28a70686f4b8bda?s=128&d=identicon&r=PG", "display_name": "Pete Baughman", "link": "https://stackoverflow.com/users/1508243/pete-baughman"}, "is_accepted": false, "score": 4, "last_activity_date": 1461178454, "last_edit_date": 1461178454, "creation_date": 1453937391, "answer_id": 35050179, "question_id": 35050065, "link": "https://stackoverflow.com/questions/35050065/c-error-no-match-for-operator-operand-types-are-vehicle-and-const-ve/35050179#35050179", "title": "C++ [Error] no match for &#39;operator==&#39; (operand types are &#39;Vehicle&#39; and &#39;const Vehicle&#39;)", "body": "<p>The error message is pretty clear:  The compiler is looking for an operator== function that compares two vehicles.  The signature of such a method, were it to exist, would be something like</p>\n\n<pre><code>bool operator==(const Vehicle&amp; first, const Vehicle&amp; second);\n</code></pre>\n\n<p>What's not as clear is <em>why</em> this is happening.  After all, you don't use an == operator anywhere in your code!  Crummy compiler - complaining about something you didn't even do.</p>\n\n<p>To understand what's happening, you have to understand the 'find' method.  This is a template method, and in C++ templates are pretty much super-fancy text find-and-replace (warning: massive simplification!).  The code for 'find' is going to be generated on-the-fly for the types that you're using right before the compiler runs.</p>\n\n<p>You can check out how find is implemented <a href=\"http://www.cplusplus.com/reference/algorithm/find/\" rel=\"nofollow\">here</a>.  In the unlikely event that cplusplus.com ever goes offline, I've included the relevant portion below*:</p>\n\n<pre><code>template&lt;class InputIterator, class T&gt;\n    InputIterator find (InputIterator first, InputIterator last, const T&amp; val)\n    {\n        while (first!=last) {\n        if (*first==val) return first; //&lt;--- Notice the == operator\n        ++first;\n        }\n    return last;\n    }\n</code></pre>\n\n<p>That's where the == is coming from!  The compiler is going to automatically generate the find code for the type you've specified (vehicle).  Then when it goes to compile, that generated code tries to use an operator== but there isn't one for vehicle.  You're going to have to provide one with your vehicle class.</p>\n\n<p>*Seriously though - <a href=\"http://www.cplusplus.com/reference/algorithm/find/\" rel=\"nofollow\">check out that website</a>.  It shows you how all of this stuff works.</p>\n"}, {"tags": [], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "is_accepted": true, "score": 4, "last_activity_date": 1453937805, "last_edit_date": 1453937805, "creation_date": 1453937665, "answer_id": 35050238, "question_id": 35050065, "link": "https://stackoverflow.com/questions/35050065/c-error-no-match-for-operator-operand-types-are-vehicle-and-const-ve/35050238#35050238", "title": "C++ [Error] no match for &#39;operator==&#39; (operand types are &#39;Vehicle&#39; and &#39;const Vehicle&#39;)", "body": "<p>The minimum requirements for using find is a specified <a href=\"http://en.cppreference.com/w/cpp/language/operators\" rel=\"nofollow\"><code>operator==</code></a> function. This is what <a href=\"http://en.cppreference.com/w/cpp/algorithm/find\" rel=\"nofollow\"><code>std::find</code></a> uses as it iterates through the vector if it has found your type. </p>\n\n<p>Something like this will be necessary:</p>\n\n<pre><code>class Vehicle {\n    public:\n    int number;\n    // We need the operator== to compare 2 Vehicle types.\n    bool operator==(const Vehicle &amp;rhs) const {\n        return rhs.number == number;\n    }\n};\n</code></pre>\n\n<p>This will allow you to use find. See a <a href=\"http://ideone.com/UrpQIr\" rel=\"nofollow\">live example here.</a></p>\n"}], "owner": {"reputation": 123, "user_id": 5849387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f48c7b7eaa597baa4052bffddbc06743?s=128&d=identicon&r=PG&f=1", "display_name": "SinLortuen", "link": "https://stackoverflow.com/users/5849387/sinlortuen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28496, "favorite_count": 3, "accepted_answer_id": 35050238, "answer_count": 2, "score": 12, "last_activity_date": 1485249233, "creation_date": 1453936862, "last_edit_date": 1485249233, "question_id": 35050065, "link": "https://stackoverflow.com/questions/35050065/c-error-no-match-for-operator-operand-types-are-vehicle-and-const-ve", "title": "C++ [Error] no match for &#39;operator==&#39; (operand types are &#39;Vehicle&#39; and &#39;const Vehicle&#39;)", "body": "<p>I'm working on a project for my school (I'm still a beginner) and I have come across the following problem:</p>\n\n<pre><code>\"[Error] no match for 'operator==' (operand types are 'Vehicle' and 'const Vehicle')\" \n</code></pre>\n\n<p><code>Vehicle</code> being a class in my project.</p>\n\n<p>This is what is giving me the error:</p>\n\n<pre><code>int DayLog::findWaitingPosistion(Vehicle const&amp; v){\n    if (find(waitingList.begin(),waitingList.end(),v) != waitingList.end())\n        return 1;\n}\n</code></pre>\n\n<p><code>waitingList</code> is a vector of <code>Vehicle</code> objects.</p>\n\n<p>I searched and couldn't find an answer even though there were many similar questions to mine I tried everything but nothing worked. \nThanks in advance.</p>\n"}, {"tags": ["c++", "qt"], "answers": [{"tags": [], "owner": {"reputation": 1827, "user_id": 785691, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/COsAp.jpg?s=128&g=1", "display_name": "ramtheconqueror", "link": "https://stackoverflow.com/users/785691/ramtheconqueror"}, "is_accepted": false, "score": 0, "last_activity_date": 1453984424, "creation_date": 1453984424, "answer_id": 35061627, "question_id": 35050044, "link": "https://stackoverflow.com/questions/35050044/setselectionmodel-in-qlistwidget-stops-emission-of-itemselectionchanged-signal/35061627#35061627", "title": "setSelectionModel in QListWidget stops emission of itemSelectionChanged signal", "body": "<p>As per the <code>Qt</code> documentation of <code>QAbstractItemView</code>, <code>setSelectionModel</code> replaces the current selection model and it won't work if <code>setModel()</code> is called after this.</p>\n\n<blockquote>\n  <p>Note that, if you call setModel() after this function, the given\n  selectionModel will be replaced by one created by the view.</p>\n</blockquote>\n\n<p>Also, from <code>QListWidget</code> documentation, </p>\n\n<blockquote>\n  <p>QListWidget is a convenience class that provides a list view similar\n  to the one supplied by QListView, but with a classic item-based\n  interface for adding and removing items. QListWidget uses an internal\n  model to manage each QListWidgetItem in the list.</p>\n</blockquote>\n\n<p>it looks like whenever you add items, the model gets updated / refreshed invalidating your custom selection model (just my thought).</p>\n\n<p>Also, you don't need to delete the old selection model as per <code>Qt</code> docs</p>\n\n<blockquote>\n  <p><strong>Note</strong>: It is up to the application to delete the old selection model if\n  it is no longer needed; i.e., if it is not being used by other views.\n  This will happen automatically when its parent object is deleted.\n  However, if it does not have a parent, or if the parent is a\n  long-lived object, it may be preferable to call its deleteLater()\n  function to explicitly delete it.</p>\n</blockquote>\n\n<p>if you want that level of customisation, <code>QListView</code> might be a better option.</p>\n\n<p><a href=\"http://doc.qt.io/qt-5/qlistwidget.html\" rel=\"nofollow\">QListWidget</a></p>\n\n<p><a href=\"http://doc.qt.io/qt-5/qabstractitemview.html#setSelectionModel\" rel=\"nofollow\">QAbstractItemView</a></p>\n\n<hr>\n\n<p>Just wondering, have you tried setting custom selection model after adding all the items to the list widget?</p>\n"}, {"tags": [], "owner": {"reputation": 531, "user_id": 4081275, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/64a942f2d0e5ac2b989e78a87dd4250a?s=128&d=identicon&r=PG&f=1", "display_name": "Franz Amador", "link": "https://stackoverflow.com/users/4081275/franz-amador"}, "is_accepted": true, "score": 0, "last_activity_date": 1454975319, "creation_date": 1454975319, "answer_id": 35281502, "question_id": 35050044, "link": "https://stackoverflow.com/questions/35050044/setselectionmodel-in-qlistwidget-stops-emission-of-itemselectionchanged-signal/35281502#35281502", "title": "setSelectionModel in QListWidget stops emission of itemSelectionChanged signal", "body": "<p>This turned out to be a Qt bug. See my two posts on the Qt Forums and the bug report:</p>\n\n<p><a href=\"http://forum.qt.io/topic/63676/qlistwidget-how-to-prevent-unselect-all/2\" rel=\"nofollow\">http://forum.qt.io/topic/63676/qlistwidget-how-to-prevent-unselect-all/2</a>\n<a href=\"http://forum.qt.io/topic/63674/qlistwidget-setselectionmodel-stops-emission-of-itemselectionchanged-signal\" rel=\"nofollow\">http://forum.qt.io/topic/63674/qlistwidget-setselectionmodel-stops-emission-of-itemselectionchanged-signal</a>\n<a href=\"https://bugreports.qt.io/browse/QTBUG-50891\" rel=\"nofollow\">https://bugreports.qt.io/browse/QTBUG-50891</a></p>\n"}], "owner": {"reputation": 531, "user_id": 4081275, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/64a942f2d0e5ac2b989e78a87dd4250a?s=128&d=identicon&r=PG&f=1", "display_name": "Franz Amador", "link": "https://stackoverflow.com/users/4081275/franz-amador"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 365, "favorite_count": 0, "accepted_answer_id": 35281502, "answer_count": 2, "score": 1, "last_activity_date": 1454975319, "creation_date": 1453936793, "question_id": 35050044, "link": "https://stackoverflow.com/questions/35050044/setselectionmodel-in-qlistwidget-stops-emission-of-itemselectionchanged-signal", "title": "setSelectionModel in QListWidget stops emission of itemSelectionChanged signal", "body": "<p>In my QListWidget subclass, when I replace its QItemSelectionModel using setSelectionModel, the list widget stops emitting its itemSelectionChanged signal. In the real code, I'm doing this to install a subclass of QItemSelectionModel, but the problem appears even if I use just a new QItemSelectionModel.</p>\n\n<pre><code>MyListWidget::MyListWidget(QWidget* parent)\n    : QListWidget(parent)\n{\n    QItemSelectionModel* oldSelectionModel = selectionModel();\n    QItemSelectionModel* newSelectionModel = new QItemSelectionModel(model(), oldSelectionModel-&gt;parent());\n    setSelectionModel(newSelectionModel);\n    oldSelectionModel-&gt;deleteLater();\n}\n</code></pre>\n\n<p>In the debugger, I can see QItemSelectionModel emit its selectionChanged signal, but QListWidget never emits its corresponding itemSelectionChanged signal.</p>\n\n<p>If I comment out the body of this constructor, things work fine. As before, I can see QItemSelectionModel emit its selectionChanged signal, but now that triggers QListWidget to emit itemSelectionChanged.</p>\n\n<p>It looks as if my call to setSelectionModel causes the connection between QItemSelectionModel::selectionChanged and QListWidget::itemSelectionChanged to break.</p>\n\n<p>By the way, I checked to see if I'm passing the wrong arguments to my new QItemSelectionModel. After I create it, model() and parent() of newSelectionModel are identical to those of oldSelectionModel. I also tried commenting out the call to deleteLater, but that didn't help.</p>\n\n<p>Any help much appreciated.</p>\n"}, {"tags": ["c++", "regex"], "comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1453937603, "post_id": 35049648, "comment_id": 57824734, "body": "What leads you to believe it doesn&#39;t work? Or more accurately, what do you mean by &quot;it doesn&#39;t work&quot;? <a href=\"http://coliru.stacked-crooked.com/a/a0b6198080ecdcc5\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/a0b6198080ecdcc5</a>"}, {"owner": {"reputation": 252, "user_id": 4403294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/029e6e295cd808c16cf68c7db4679dec?s=128&d=identicon&r=PG", "display_name": "rscarson", "link": "https://stackoverflow.com/users/4403294/rscarson"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1453940888, "post_id": 35049648, "comment_id": 57825805, "body": "Sorry about that, I somehow forgot to add that! I&#39;ve updated the description with the exception I am receiving"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1453942279, "post_id": 35049648, "comment_id": 57826178, "body": "well, my attempt to reproduce the problem failed to do so (see link in previous comment). What compiler/standard library are you using? And which versions?"}, {"owner": {"reputation": 252, "user_id": 4403294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/029e6e295cd808c16cf68c7db4679dec?s=128&d=identicon&r=PG", "display_name": "rscarson", "link": "https://stackoverflow.com/users/4403294/rscarson"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1453942787, "post_id": 35049648, "comment_id": 57826319, "body": "g++ in c++11 mode... Version 4.8.1"}, {"owner": {"reputation": 252, "user_id": 4403294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/029e6e295cd808c16cf68c7db4679dec?s=128&d=identicon&r=PG", "display_name": "rscarson", "link": "https://stackoverflow.com/users/4403294/rscarson"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1453943030, "post_id": 35049648, "comment_id": 57826397, "body": "minGW. I&#39;m in a windows environment"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1453943134, "post_id": 35049648, "comment_id": 57826429, "body": "I don&#39;t believe that std::regex is fully supported by g++ v4.8.1, but it&#39;s a library issue and I have no idea how that would work out in a minGW environment. I&#39;m pretty sure the answer is going to be &quot;upgrade&quot;. I&#39;ll dig out minimum version numbers in a minute."}], "answers": [{"comments": [{"owner": {"reputation": 252, "user_id": 4403294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/029e6e295cd808c16cf68c7db4679dec?s=128&d=identicon&r=PG", "display_name": "rscarson", "link": "https://stackoverflow.com/users/4403294/rscarson"}, "edited": false, "score": 0, "creation_date": 1453943734, "post_id": 35051190, "comment_id": 57826617, "body": "Shame, that&#39;s the latest version minGW has available."}, {"owner": {"reputation": 252, "user_id": 4403294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/029e6e295cd808c16cf68c7db4679dec?s=128&d=identicon&r=PG", "display_name": "rscarson", "link": "https://stackoverflow.com/users/4403294/rscarson"}, "edited": false, "score": 0, "creation_date": 1453944473, "post_id": 35051190, "comment_id": 57826822, "body": "I&#39;m working in a linux environment for now, but I will need windows platform compatibility, thus minGW"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 252, "user_id": 4403294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/029e6e295cd808c16cf68c7db4679dec?s=128&d=identicon&r=PG", "display_name": "rscarson", "link": "https://stackoverflow.com/users/4403294/rscarson"}, "edited": false, "score": 0, "creation_date": 1453944977, "post_id": 35051190, "comment_id": 57826966, "body": "@rscarson: According to the comments here -- <a href=\"http://stackoverflow.com/questions/33823969/regex-error-escape-while-parsing-escape-characters-using-mingw\" title=\"regex error escape while parsing escape characters using mingw\">stackoverflow.com/questions/33823969/&hellip;</a> -- you can use a 64-bit mingw and thereby have v5.2"}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 1, "last_activity_date": 1453944263, "last_edit_date": 1453944263, "creation_date": 1453943468, "answer_id": 35051190, "question_id": 35049648, "link": "https://stackoverflow.com/questions/35049648/c-stdregex-litteral-pipe-error-escape-exception/35051190#35051190", "title": "C++ std::regex litteral pipe error_escape exception", "body": "<p>The earliest version of GNU libstdc++ which supports <code>std::regex</code> is v4.9.0, so if you are using libstdc++ v4.8, you are going to find lots of errors in the regex implementation. It's unfortunate that it was released with a partial and generally unusable implementation, but that's water under the bridge now.</p>\n\n<p>(For the record, here's the <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.8.3/libstdc++/manual/manual/status.html#status.iso.2011\" rel=\"nofollow\">implementation status</a> from the v4.8.3 documentation. Although that document <em>says</em> \"This page describes the C++ support in mainline GCC SVN, not in any particular release\", it is, afaik, an actual record of what was available at that moment in time; however, the only hint is in the URL itself. The <a href=\"https://gcc.gnu.org/gcc-4.9/changes.html\" rel=\"nofollow\">release notes for v4.9</a> list <code>std::regex</code> as being newly added.)</p>\n\n<p>I'm sorry to say that I do not use MinGW, nor do I ever intend to, so I am not qualified to say whether there is a plausible workaround. Apparently, <code>std::regex</code> works fine in the Windows C++ standard library implementation (something else which I never use). And, of course, there is always boost but that seems to be out of scope for this question :)</p>\n"}], "owner": {"reputation": 252, "user_id": 4403294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/029e6e295cd808c16cf68c7db4679dec?s=128&d=identicon&r=PG", "display_name": "rscarson", "link": "https://stackoverflow.com/users/4403294/rscarson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 482, "favorite_count": 0, "accepted_answer_id": 35051190, "answer_count": 1, "score": 1, "last_activity_date": 1453944263, "creation_date": 1453935004, "last_edit_date": 1453940847, "question_id": 35049648, "link": "https://stackoverflow.com/questions/35049648/c-stdregex-litteral-pipe-error-escape-exception", "title": "C++ std::regex litteral pipe error_escape exception", "body": "<p>I am having trouble with a small regular expression which matches a single pipe character. I am always getting a regex_error exception with the error_escape code.</p>\n\n<p>In it's most basic form, the escape on the pipe does not work in posix, extended posix or default syntax modes</p>\n\n<pre><code>std::regex(\"\\\\|\", std::regex_constants::extended);\n</code></pre>\n\n<p>I have tried all 3 modes with 2 backslashes, just one and none.</p>\n\n<p>I even tried to match using the escape for the actual value of the pipe character:</p>\n\n<pre><code>\\\\0x7c or \\0x7c\n</code></pre>\n\n<p>With the same result.</p>\n\n<p>What am i doing wrong? All The other regular expressions in my code work, including several similar literal character escapes (+, *, etc).</p>\n\n<p>(Please do not suggest boost)</p>\n"}, {"tags": ["c++", "logging", "boost"], "answers": [{"comments": [{"owner": {"reputation": 1014, "user_id": 5090527, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3bc0e62835e7e6e91fff7a9e89a361e9?s=128&d=identicon&r=PG&f=1", "display_name": "Ramon", "link": "https://stackoverflow.com/users/5090527/ramon"}, "edited": false, "score": 0, "creation_date": 1454023747, "post_id": 35061963, "comment_id": 57871270, "body": "This worked perfectly, thanks. Thread safety will be necessary eventually, I assume building it into Logger::currentSeverityLevel() would be the easiest? using phoenix::bind in the filter that is."}, {"owner": {"reputation": 8115, "user_id": 4636534, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GoTz67GRao8/AAAAAAAAAAI/AAAAAAAAADI/PyDv-i56924/photo.jpg?sz=128", "display_name": "Andrey Semashev", "link": "https://stackoverflow.com/users/4636534/andrey-semashev"}, "reply_to_user": {"reputation": 1014, "user_id": 5090527, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3bc0e62835e7e6e91fff7a9e89a361e9?s=128&d=identicon&r=PG&f=1", "display_name": "Ramon", "link": "https://stackoverflow.com/users/5090527/ramon"}, "edited": false, "score": 0, "creation_date": 1454072906, "post_id": 35061963, "comment_id": 57892234, "body": "Yes, it is the easiest way."}], "tags": [], "owner": {"reputation": 8115, "user_id": 4636534, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GoTz67GRao8/AAAAAAAAAAI/AAAAAAAAADI/PyDv-i56924/photo.jpg?sz=128", "display_name": "Andrey Semashev", "link": "https://stackoverflow.com/users/4636534/andrey-semashev"}, "is_accepted": true, "score": 1, "last_activity_date": 1453985976, "last_edit_date": 1453985976, "creation_date": 1453985319, "answer_id": 35061963, "question_id": 35049633, "link": "https://stackoverflow.com/questions/35049633/setting-boostlog-severity-filter-to-call-a-function-as-opposed-to-using-a-con/35061963#35061963", "title": "Setting boost::log severity filter to call a function, as opposed to using a constant severity", "body": "<p>In order to call <code>Logger::currentSeverityLevel</code> on every log record you have to turn it into a Boost.Phoenix expression so that it is evaluated lazily. The simplest way to do this is to use <code>phoenix::bind</code>.</p>\n\n<pre><code>console_sink-&gt;set_filter(\n    severity &gt;= phoenix::bind(&amp;Logger::currentSeverityLevel)\n);\n</code></pre>\n\n<p>You can achieve a cleaner syntax if you create a lazy wrapper for your function as described <a href=\"http://www.boost.org/doc/libs/1_60_0/libs/phoenix/doc/html/phoenix/modules/function/adapting_functions.html\" rel=\"nofollow\">here</a>.</p>\n\n<pre><code>BOOST_PHOENIX_ADAPT_FUNCTION_NULLARY(\n    Logger::severity_level,\n    lazyCurrentSeverityLevel,\n    Logger::currentSeverityLevel\n);\n\nconsole_sink-&gt;set_filter(severity &gt;= lazyCurrentSeverityLevel());\n</code></pre>\n\n<p>Also, you can save references to external objects in Boost.Phoenix expressions.</p>\n\n<pre><code>console_sink-&gt;set_filter(severity &gt;= phoenix::ref(severity_level_var));\n</code></pre>\n\n<p>This filter will read the <code>severity_level_var</code> value on every call. However, this approach makes it more difficult to ensure thread safe operations on the <code>severity_level_var</code> variable. This is not done in your <code>currentSeverityLevel</code> implementation, so I assume thread safety is either not required or achieved by other means.</p>\n"}], "owner": {"reputation": 1014, "user_id": 5090527, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3bc0e62835e7e6e91fff7a9e89a361e9?s=128&d=identicon&r=PG&f=1", "display_name": "Ramon", "link": "https://stackoverflow.com/users/5090527/ramon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 330, "favorite_count": 0, "accepted_answer_id": 35061963, "answer_count": 1, "score": 0, "last_activity_date": 1453985976, "creation_date": 1453934946, "question_id": 35049633, "link": "https://stackoverflow.com/questions/35049633/setting-boostlog-severity-filter-to-call-a-function-as-opposed-to-using-a-con", "title": "Setting boost::log severity filter to call a function, as opposed to using a constant severity", "body": "<p>I've created a Logger class that uses boost::log. The class keeps track of the current severity level set. When adding a severity filter to a sink, I'd like that the filter do the filtering based on the current severity, as opposed to the one when the sink was added. </p>\n\n<pre><code>class Logger\n{\npublic:\n    typedef /* ... */ severity_level;\n    //(...)\n    static severity_level currentSeverityLevel() {return severity_level_var;}\nprivate:\n    severity_level severity_level_var;\n    //(...)\n};\n</code></pre>\n\n<p>When adding a filter, as below, currentSeverityLevel() is called only when the filter is set.</p>\n\n<p><code>console_sink-&gt;set_filter( severity &gt;= Logger::currentSeverityLevel());</code></p>\n\n<p>I would like such a filter, but that actually calls the function every time. As per the documentation, one can define a function to be used as filter (see below), but it requires the use of boost::phoenix. Surely there must be a simpler way? Something like a lambda expression? The set_filter function sets a filter type, which in turn sets a boost light_function, which is a \"lightweight alternative of Boost.Function\". It seems, then, that it would be straight forward to set something similar to a Lambda expression/Boost.Function</p>\n\n<pre><code>bool my_filter(logging::value_ref&lt; severity_level, tag::severity &gt; const&amp; level,\n               logging::value_ref&lt; std::string, tag::tag_attr &gt; const&amp; tag)\n{\n    return level &gt;= warning || tag == \"IMPORTANT_MESSAGE\";\n}\n\nvoid init()\n{\n    // ...\n    namespace phoenix = boost::phoenix;\n    sink-&gt;set_filter(phoenix::bind(&amp;my_filter, severity.or_none(), tag_attr.or_none()));\n    // ...\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "data-structures", "stack"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1453935172, "post_id": 35049626, "comment_id": 57823708, "body": "C++ doesn&#39;t allow variable-sized arrays."}, {"owner": {"reputation": 27, "user_id": 5849290, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8220df3abd614dbe92f83fcf72d6e5db?s=128&d=identicon&r=PG&f=1", "display_name": "parhloo sab kuch", "link": "https://stackoverflow.com/users/5849290/parhloo-sab-kuch"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1453935378, "post_id": 35049626, "comment_id": 57823810, "body": "so the only way to do it is as arrays[10]? <i>assuming i want maxsize to be 10</i>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1453935432, "post_id": 35049626, "comment_id": 57823832, "body": "You could use dynamic allocation with <code>arrays = new int[maxsize];</code> in the constructor."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1453935524, "post_id": 35049626, "comment_id": 57823879, "body": "Your constructor doesn&#39;t take an argument. Where does it get the value of <code>maxsize</code> from?"}, {"owner": {"reputation": 27, "user_id": 5849290, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8220df3abd614dbe92f83fcf72d6e5db?s=128&d=identicon&r=PG&f=1", "display_name": "parhloo sab kuch", "link": "https://stackoverflow.com/users/5849290/parhloo-sab-kuch"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1453935688, "post_id": 35049626, "comment_id": 57823961, "body": "I am just assigning the value 10 to it in the constructor.      stack::stack{     maxsize = 10;      }"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1453935753, "post_id": 35049626, "comment_id": 57823983, "body": "You can&#39;t assign to a <code>const</code> variable."}, {"owner": {"reputation": 27, "user_id": 5849290, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8220df3abd614dbe92f83fcf72d6e5db?s=128&d=identicon&r=PG&f=1", "display_name": "parhloo sab kuch", "link": "https://stackoverflow.com/users/5849290/parhloo-sab-kuch"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1453935882, "post_id": 35049626, "comment_id": 57824033, "body": "Still not working.   Error\tC2327\t&#39;stack::maxsize&#39;: is not a type name, static, or enumerator"}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1453936249, "post_id": 35049841, "comment_id": 57824184, "body": "<code>const</code> member variable is not a great idea , it will interfere with things such as the object being stored in a vector"}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1453936440, "last_edit_date": 1495539894, "creation_date": 1453935870, "answer_id": 35049841, "question_id": 35049626, "link": "https://stackoverflow.com/questions/35049626/how-to-fix-error-in-initializing-an-array-using-a-variable/35049841#35049841", "title": "how to fix Error in initializing an array using a variable?", "body": "<p>C++ doesn't allow variable-length arrays. Instead of an array, you can use a pointer and dynamic allocation.</p>\n\n<p>And to initialize a <code>const</code> member, you have to do it in the initializer list of the constructor.</p>\n\n<pre><code>class stack {\n\nprivate:\n    const int maxsize;\n    int *arrays;\n    int top;\n\npublic:\n    stack(int max = 10) : maxsize(max) {\n        arrays = new int[max];\n        top = 0;\n    }\n    void additem(int);\n    void print();\n};\n</code></pre>\n\n<p>See <a href=\"https://stackoverflow.com/questions/1423696/how-to-initialize-a-const-field-in-constructor\">How to initialize a const field in constructor?</a></p>\n\n<p>You'll also then need a destructor that does <code>delete[] arrays;</code>.</p>\n\n<p>But rather than using a C-style array, you'd probably find it easier to use <code>std::vector&lt;int&gt;</code>. This doesn't require specifying a maximum length in the first place, it will expand as needed.</p>\n\n<p>Of course, you could skip this whole exersize and use <code>std::stack&lt;int&gt;</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "is_accepted": false, "score": 0, "last_activity_date": 1453936604, "last_edit_date": 1453936604, "creation_date": 1453936279, "answer_id": 35049932, "question_id": 35049626, "link": "https://stackoverflow.com/questions/35049626/how-to-fix-error-in-initializing-an-array-using-a-variable/35049932#35049932", "title": "how to fix Error in initializing an array using a variable?", "body": "<p>If you want <code>maxsize</code> to always be 10, you could do something like this:</p>\n\n<pre><code>class stack {\nprivate:\n    static const int maxsize = 10;\n    int arrays[maxsize];\n...\n</code></pre>\n\n<p>Note that I've made <code>maxsize</code> static.  It will be the same for all instances of <code>stack</code> and is defined at compile time.  Thus you can use it as an array size.</p>\n\n<p>If you want <code>maxsize</code> to be variable, then you'll need to use dynamic allocation:</p>\n\n<pre><code>class stack {\nprivate:\n    const int maxsize;\n    int* arrays;\n    ...\npublic:\n    stack(int maxsize) : maxsize(maxsize), arrays(0) {\n        arrays = new int[maxsize];\n    }\n    ~stack() { delete[] arrays; }\n    ...\n</code></pre>\n\n<p>Note here that you must delete the memory you dynamically allocate.  The usual place to do that is the destructor.  If you want to go this route, you could also just use a <code>std::vector&lt;int&gt;</code> and get rid of <code>maxsize</code> entirely.  That frees you from having to do any manual memory management.</p>\n"}, {"tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1453936893, "last_edit_date": 1453936893, "creation_date": 1453936473, "answer_id": 35049982, "question_id": 35049626, "link": "https://stackoverflow.com/questions/35049626/how-to-fix-error-in-initializing-an-array-using-a-variable/35049982#35049982", "title": "how to fix Error in initializing an array using a variable?", "body": "<p>A good fix would be:</p>\n\n<pre><code>class stack\n{\n    std::vector&lt;int&gt; arrays;\n    int top;\n\npublic:\n    stack(int maxsize) : arrays(maxsize), top(0) {}\n};\n</code></pre>\n\n<p>This way, you do not have any possibility of memory management bugs; your class behaves properly when copied, moved, swapped, etc. and your code is very simple.</p>\n\n<p>An alternative, with a minimal memory footprint would be:</p>\n\n<pre><code>class stack\n{\n    std::unique_ptr&lt;int[]&gt; arrays;\n    int maxsize;\n    int top;\n\npublic:\n    stack(int maxsize) : arrays(new int[maxsize]), maxsize(maxsize), top(0) {}\n};\n</code></pre>\n\n<p>This version is movable, but will give compile errors when copied (as opposed to some of the other suggestions to use raw pointer, which will compile successfully and then give memory corruption at runtime).   To make this class copyable you'd need to write your own copy-constructor and copy-assignment operator.</p>\n"}], "owner": {"reputation": 27, "user_id": 5849290, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8220df3abd614dbe92f83fcf72d6e5db?s=128&d=identicon&r=PG&f=1", "display_name": "parhloo sab kuch", "link": "https://stackoverflow.com/users/5849290/parhloo-sab-kuch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1453936893, "creation_date": 1453934911, "question_id": 35049626, "link": "https://stackoverflow.com/questions/35049626/how-to-fix-error-in-initializing-an-array-using-a-variable", "title": "how to fix Error in initializing an array using a variable?", "body": "<p>I am trying to implement a stack using an array. This is what I have in my \nheader file.I plan to assign the value to maxsize in the constructor. However, i keep getting errors. How can i fix this?</p>\n\n<pre><code>class stack {\n\n\n private:\n\nconst int maxsize;\nint arrays[maxsize];\nint top;\n\npublic:\n\nstack();\nvoid additem(int);\nvoid print();\n};\n</code></pre>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 2, "creation_date": 1453935174, "post_id": 35049619, "comment_id": 57823709, "body": "That&#39;s not a function, that&#39;s a variable named <code>dbLock</code>, which has type <code>Lock::DBLock</code>, and is created using a constructor which is passed three values."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1453935281, "post_id": 35049619, "comment_id": 57823758, "body": "It&#39;s analogous to <code>int some_integer_variable(3);</code> which declares a variable and initializes it."}], "answers": [{"comments": [{"owner": {"reputation": 1467, "user_id": 234864, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/8e3f19200167c2d758f3914de4f37a41?s=128&d=identicon&r=PG", "display_name": "Alexander Marquardt", "link": "https://stackoverflow.com/users/234864/alexander-marquardt"}, "edited": false, "score": 0, "creation_date": 1453970918, "post_id": 35049694, "comment_id": 57836616, "body": "Than you! Makes sense"}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 8, "last_activity_date": 1453935189, "creation_date": 1453935189, "answer_id": 35049694, "question_id": 35049619, "link": "https://stackoverflow.com/questions/35049619/understanding-c-syntax-for-an-experienced-c-programmer/35049694#35049694", "title": "Understanding C++ syntax for an experienced C programmer", "body": "<p>The code is the declaration of a variable named <code>dbLock</code> of type <code>Lock::DBLock</code>.  The parenthesized list contains arguments to a constructor for that type.</p>\n"}, {"comments": [{"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1453935902, "post_id": 35049732, "comment_id": 57824044, "body": "@jaggedSpire: Changed and given example."}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1453937800, "post_id": 35049732, "comment_id": 57824811, "body": "You may want to add a comment about the destructor call that happens automatically and RAII."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "reply_to_user": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1453938534, "post_id": 35049732, "comment_id": 57825075, "body": "@LokiAstari: Yes. This is starting to become a &quot;book on how to write C++&quot;, but I have added that too."}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1454006412, "post_id": 35049732, "comment_id": 57861757, "body": "@MatsPetersson :-) That&#39;s how the good questions get all the votes :-) the details are important. But thanks."}], "tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": true, "score": 17, "last_activity_date": 1453942787, "last_edit_date": 1495540346, "creation_date": 1453935364, "answer_id": 35049732, "question_id": 35049619, "link": "https://stackoverflow.com/questions/35049619/understanding-c-syntax-for-an-experienced-c-programmer/35049732#35049732", "title": "Understanding C++ syntax for an experienced C programmer", "body": "<p>It is a variable declaration with a constructor - so it's BOTH a function call [to the object constructor] and a declaration of a variable.</p>\n\n<p>It declares a variable of the type;</p>\n\n<pre><code>  Lock::DBLock\n</code></pre>\n\n<p>The variable is called <code>dbLock</code>. It calls the constructor with a <code>txn-&gt;lockState()</code>, the <code>ns.db()</code> and a <code>MODE_X</code>. </p>\n\n<p>My guess is that <code>txn-&gt;lockState</code> actually returns a lock-object, and the thing we're locking is <code>ns.db()</code> - in \"exclusive mode\". But that's a guess, and you have to look those things up within the environment.</p>\n\n<p>Without looking up the documentation, I expect <code>Lock::DBLock</code> is a \"lock manager\", in other words, it takes the lock when created, and releases when destroyed.</p>\n\n<p>A simple lock manager would look something like this:</p>\n\n<pre><code> class LockMgr\n {\n      LockMgr(SomeLockType &amp;X) : keeper(X)\n      {\n         keeper.Lock();\n      }\n      ~LockMgr()\n      {\n         keeper.Unlock();\n      }\n      private:\n        SomeLockType&amp; keeper;    // Must be reference to original lock\n };\n</code></pre>\n\n<p>The destructor is automatically called when the variable goes out of scope (in other worse when you leave the <code>{}</code> pair that the variable is within.</p>\n\n<p>In C++, one commmon strategy for \"resource handling\" is called RAII (Resource Acquisition Is Initialization) - a variable is used to hold a resource, and it is assigned during initialization. This helps a lot with \"not forgetting to undo\" - for example in code that returns in the middle of the function, does <code>break</code> to exit a loop, or similar things. In C, you always have to watch your step for releasing locks, closing files, freeing memory, etc - and of course, if you use C++ in the wrong way, you can fall into the same pitfalls there - calling <code>new</code> will definitely need a call to <code>delete</code>, directly calling a locks <code>Lock()</code> member function requires a <code>Unlock()</code> call somewhere. But if we \"wrap\" the resource into an object that holds it for the duration we need it, and automatically \"lets go\" (frees, unlocks, etc) in the destructor, there's no need to remember to release memory, unlock locks, etc, etc.</p>\n\n<p>I would suggest that before asking further questions, you read the first chapter about classes and constructor &amp; destructor pairs in <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">your C++ book</a> (you DO have a book, right?)</p>\n"}], "owner": {"reputation": 1467, "user_id": 234864, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/8e3f19200167c2d758f3914de4f37a41?s=128&d=identicon&r=PG", "display_name": "Alexander Marquardt", "link": "https://stackoverflow.com/users/234864/alexander-marquardt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "accepted_answer_id": 35049732, "answer_count": 2, "score": 3, "last_activity_date": 1453942787, "creation_date": 1453934889, "last_edit_date": 1453940609, "question_id": 35049619, "link": "https://stackoverflow.com/questions/35049619/understanding-c-syntax-for-an-experienced-c-programmer", "title": "Understanding C++ syntax for an experienced C programmer", "body": "<p>I am looking through the source code for MongoDB, and see the following declaration inside of a function, which I don't understand and haven't seen in my C programming experience.</p>\n\n<pre><code>Lock::DBLock dbLock(txn-&gt;lockState(), ns.db(), MODE_X);\n</code></pre>\n\n<p>I am trying to understand what this declaration is doing in C++ terms (ie. I want to understand the syntax, not specifics about the functionality of what is going on).</p>\n\n<p>This breaks down into two main questions:\n1) What is the purpose of the Lock::DBLock statement in front of the function? \n2) Is this a function call, or a function declaration?</p>\n"}, {"tags": ["c++", "visual-c++", "cmake", "ninja"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1453972027, "post_id": 35049433, "comment_id": 57837346, "body": "Looks like CMake is unrelated here, as it adds <code>&#47;FS</code> flag automatically (just before <code>-c</code>). Similar question: <a href=\"http://stackoverflow.com/questions/20643370/visual-studio-2013-fatal-error-c1041-fs\" title=\"visual studio 2013 fatal error c1041 fs\">stackoverflow.com/questions/20643370/&hellip;</a>. Probably, some external process locks your <code>.pdb</code> file. What kind of drive is <code>Z:&#47;</code>?"}, {"owner": {"reputation": 335, "user_id": 1772798, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ictFA.jpg?s=128&g=1", "display_name": "clark", "link": "https://stackoverflow.com/users/1772798/clark"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1454007658, "post_id": 35049433, "comment_id": 57862606, "body": "Yeah, I noticed the /FS but figured I&#39;d add it as a sanity check. I&#39;ve poked through those solutions. It looks like each project already has an intermediate dir of it&#39;s own, <code>detours.dir</code> for example, and in this case I&#39;m only compiling one project. It looks like the .cpp files are fighting over the .pdb, which would make sense since they&#39;ll all belong to the same executable later. I&#39;ve tried searching for handles with ProcessExplorer while compiling but haven&#39;t had luck yet."}], "answers": [{"comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1454013784, "post_id": 35070892, "comment_id": 57866214, "body": "It is non unusual that building on non-local drives can cause unexected errors. Probably, Virtual Box share folders just doesn&#39;s supports file locking, or support it in a very simplified way. It is not a problem of MSVC and <code>&#47;FS</code> option implementation. It is just a limitation of Virtual Box share, which unlikely will be fixed in the near future."}], "tags": [], "owner": {"reputation": 335, "user_id": 1772798, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ictFA.jpg?s=128&g=1", "display_name": "clark", "link": "https://stackoverflow.com/users/1772798/clark"}, "is_accepted": false, "score": 0, "last_activity_date": 1454011203, "creation_date": 1454011203, "answer_id": 35070892, "question_id": 35049433, "link": "https://stackoverflow.com/questions/35049433/pdb-synchronous-write-errors-even-with-fs/35070892#35070892", "title": "PDB synchronous write errors even with /FS", "body": "<p>Not so much a solution as a workaround. It appears that whatever mechanism VirtualBox uses to implement shared folders is the culprit. I replaced the virtual box shared folder with a windows shared folder and I am no longer getting these errors.</p>\n\n<p>It's strange that sequential builds don't cause these errors, perhaps compiling the first file causes a sync that prevents the other files from locking until it's done, and since the build is parallel the other .cpp files run into the lock. I'm not sure if this is VirtualBox's or MSVC's fault, though, since this seems like the kind of problem that <code>/FS</code> is supposed to fix.</p>\n\n<p><strong>Steps</strong></p>\n\n<ol>\n<li>Disconnect network map from within VM</li>\n<li>Remove shared folder from VirtualBox settings</li>\n<li>Setup a Windows Share on host (Right click folder -> Share)</li>\n<li>Map this share in the VM</li>\n</ol>\n"}], "owner": {"reputation": 335, "user_id": 1772798, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ictFA.jpg?s=128&g=1", "display_name": "clark", "link": "https://stackoverflow.com/users/1772798/clark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2098, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1454011301, "creation_date": 1453934014, "last_edit_date": 1454011301, "question_id": 35049433, "link": "https://stackoverflow.com/questions/35049433/pdb-synchronous-write-errors-even-with-fs", "title": "PDB synchronous write errors even with /FS", "body": "<p>I have a simple CMakeLists to compile detours express</p>\n\n<pre><code>project(detours)\nadd_library(detours STATIC detours.cpp disasm.cpp image.cpp modules.cpp creatwth.cpp)\nfile(COPY detours.h detver.h DESTINATION ${CMAKE_BINARY_DIR}/include)\n</code></pre>\n\n<p>The necessary flags are set in an upper level CMakeLists</p>\n\n<pre><code>add_definitions(-DDETOURS_X86 -DDETOURS_32BIT)\nSET(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} /FS\")\nSET(CMAKE_C_FLAGS \"${CMAKE_C_FLAGS} /FS\")\n</code></pre>\n\n<p>Yet when trying to compile a debug build each .cpp file after <code>detours.cpp</code> throws</p>\n\n<blockquote>\n  <p>FAILED: C:\\PROGRA~2\\MICROS~1.0\\VC\\bin\\cl.exe /nologo /TP -DDETOURS_32BIT -DDETOURS_X86 -Iinclude /DWIN32 /D_WINDOWS /W3 /GR /EHsc /FS /D_DEBUG /MDd /Zi /Ob0 /Od /RTC1 /showIncludes /Foext\\detours_express_3.0\\src\\CMakeFiles\\detours.dir\\modules.cpp.obj \\Fdext\\detours_express_3.0\\src\\CMakeFiles\\detours.dir\\ /FS -c ..\\ext\\detours_express_3.0\\src\\modules.cpp\n  ..\\ext\\detours_express_3.0\\src\\modules.cpp : fatal error C1041: cannot open program database 'z:\\repo\\src\\ext\\detours_express_3.0\\src\\cmakefiles\\detours.dir\\vc120.pdb'; if multiple CL.EXE write to the same .PDB file, please use /FS</p>\n</blockquote>\n\n<p>If I re-run <code>ninja detours</code> then the same happens with the next 3 cpp files, then the next 2, then the last, then the project is fully compiled.</p>\n\n<p>If I run <code>ninja -j1 detours</code> then there are no issues, since I just disabled parrallel builds.</p>\n\n<p>Why does it seem to be ignoring my /FS option?\nI'm using Visual Studio 2013.</p>\n\n<p><strong>Update 1</strong></p>\n\n<p>This is inside a VM in Virtualbox 4.3.10 with Guest Additions. Z:\\ is a shared folder that I mounted.\nI've made sure to disable Windows Defender in the VM and the host, and uninstalled the third-party AV on the host.</p>\n\n<p><strong>Update 2</strong></p>\n\n<p>I found a workaround that avoids the symptoms and added it as an answer, but it still doesn't explain why <code>/FS</code> isn't actually synchronizing the locks.</p>\n"}, {"tags": ["c++", "multiple-inheritance", "nullptr"], "comments": [{"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 2, "creation_date": 1453933844, "post_id": 35049328, "comment_id": 57823044, "body": "What you&#39;re doing results in undefined behavior - do you really need to know how to do this, or is this purely a question of the form &quot;the undefined behavior that results from performing this operation on this one compiler is X, and I&#39;d like to avoid it?&quot;"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1453934595, "post_id": 35049328, "comment_id": 57823442, "body": "<code>pointerIsNull</code> being false when the pointer <i>is</i> null?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1453935706, "post_id": 35049328, "comment_id": 57823967, "body": "This would be a perfect counterexample for all the people who think it&#39;s OK to call member functions on a null pointer so long as the function doesn&#39;t write local variables (or some other arbitrary list of conditions)"}, {"owner": {"reputation": 463, "user_id": 933848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba116add73334b476a31a468fb00c17e?s=128&d=identicon&r=PG", "display_name": "Ben Whale", "link": "https://stackoverflow.com/users/933848/ben-whale"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1453944450, "post_id": 35049328, "comment_id": 57826812, "body": "@molbdnilo Ah. Good spotting. I&#39;ve edited the question."}, {"owner": {"reputation": 463, "user_id": 933848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba116add73334b476a31a468fb00c17e?s=128&d=identicon&r=PG", "display_name": "Ben Whale", "link": "https://stackoverflow.com/users/933848/ben-whale"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1453944610, "post_id": 35049328, "comment_id": 57826867, "body": "@M.M Well you may have well hit the nail on the head. For those at home here&#39;s a discussion of calling member functions on nullptr that refers to the standard: <a href=\"http://stackoverflow.com/questions/2474018/when-does-invoking-a-member-function-on-a-null-instance-result-in-undefined-beha\" title=\"when does invoking a member function on a null instance result in undefined beha\">stackoverflow.com/questions/2474018/&hellip;</a>"}, {"owner": {"reputation": 463, "user_id": 933848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba116add73334b476a31a468fb00c17e?s=128&d=identicon&r=PG", "display_name": "Ben Whale", "link": "https://stackoverflow.com/users/933848/ben-whale"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1453944699, "post_id": 35049328, "comment_id": 57826893, "body": "@M.M I&#39;m constrained by the organisation practises where I work. The technique used to handle nullptr&#39;s is essentially what I&#39;ve written above, so what can be done within the constraints I have? I&#39;ve edited the question to make this clearer."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1453944771, "post_id": 35049328, "comment_id": 57826911, "body": "@BenWhale Now you introduced more bugs."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1453944848, "post_id": 35049328, "comment_id": 57826932, "body": "write the useless code that they want, and collect your pay check..."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 3, "creation_date": 1453945090, "post_id": 35049328, "comment_id": 57826996, "body": "&quot;It used to be fine&quot; - it was never fine.  If you want your code to actually work, you need to do the check before calling the function.  You <i>could</i> write something inside the function like <code>if ((uintptr_t)this &lt; 1000)</code> , but this check could be bypassed at any time by the optimizer. Hopefully you don&#39;t work in any field where it&#39;d be a serious issue if the code didn&#39;t work as intended"}, {"owner": {"reputation": 463, "user_id": 933848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba116add73334b476a31a468fb00c17e?s=128&d=identicon&r=PG", "display_name": "Ben Whale", "link": "https://stackoverflow.com/users/933848/ben-whale"}, "edited": false, "score": 0, "creation_date": 1453945207, "post_id": 35049328, "comment_id": 57827024, "body": "Ha hah ah! Hopefully I got the pointerIsNull() thing sorted! Editing too quickly."}, {"owner": {"reputation": 463, "user_id": 933848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba116add73334b476a31a468fb00c17e?s=128&d=identicon&r=PG", "display_name": "Ben Whale", "link": "https://stackoverflow.com/users/933848/ben-whale"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1453945865, "post_id": 35049328, "comment_id": 57827189, "body": "@M.M Are you sure &quot;never used to be fine&quot;? I thought that before the c++98 there were expectations that this could be null? Moreover I thought the enforcing the undefined behaviour thing only became serious after c++11?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1453946429, "post_id": 35049328, "comment_id": 57827330, "body": "C++11 didn&#39;t change anything in this respect.  I guess you could say that before there was any standard at all, there was no such thing as defined or undefined behaviour.  The history of C and C++ are full of code where people tried something and it appeared to work, then it broke at some point in the future. The idea of the standard is to help people write code that will always work. I&#39;m sure if you went back to 1994 and asked the same question you&#39;d get a lot of people saying &quot;don&#39;t do that&quot;. I suspect that you would have hit the same MI adjustment problem even on 1994 compilers"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1453949859, "post_id": 35049328, "comment_id": 57828291, "body": "@M.M Wow, you make it sound like 1994 was a long time ago ;-) (I think I wrote my first lines of C++ in &#39;94.)  Programmers: making the same mistakes over and over for decades, because rapid progress demands it."}], "answers": [{"comments": [{"owner": {"reputation": 463, "user_id": 933848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba116add73334b476a31a468fb00c17e?s=128&d=identicon&r=PG", "display_name": "Ben Whale", "link": "https://stackoverflow.com/users/933848/ben-whale"}, "edited": false, "score": 0, "creation_date": 1453944975, "post_id": 35049706, "comment_id": 57826964, "body": "In other situations this answer would be fine, but I&#39;m dealing with code that it literally riddled with this, for want of a better word, anti-pattern. It&#39;s certainly not modern practice, but it used to be. So with the constraint that I must live with this way dealing with nullptr&#39;s and with the assumption that calling a member function on a nullptr of the appropriate type will always enter the member function... is there a good way to deal with this issue?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "reply_to_user": {"reputation": 463, "user_id": 933848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba116add73334b476a31a468fb00c17e?s=128&d=identicon&r=PG", "display_name": "Ben Whale", "link": "https://stackoverflow.com/users/933848/ben-whale"}, "edited": false, "score": 2, "creation_date": 1453946073, "post_id": 35049706, "comment_id": 57827253, "body": "It never used to be practice. People have been <i>getting away with it</i> largely because compilers used to be much worse than they are."}], "tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": true, "score": 6, "last_activity_date": 1453935624, "last_edit_date": 1453935624, "creation_date": 1453935248, "answer_id": 35049706, "question_id": 35049328, "link": "https://stackoverflow.com/questions/35049328/upcast-of-nullptr-through-class-with-multiple-inheritance/35049706#35049706", "title": "upcast of nullptr through class with multiple inheritance", "body": "<p><code>foo-&gt;getIntValue()</code> is undefined when <code>foo</code> is the null pointer, which makes your entire program undefined.<br>\nThat is, the dereferencing itself is undefined, and your program is doomed before it reaches the check.</p>\n\n<p>There is no point in checking whether <code>this</code> is null, since a compiler is free to assume that it isn't (if it were, the program would be undefined, so the compiler can do whatever it wants).</p>\n"}], "owner": {"reputation": 463, "user_id": 933848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba116add73334b476a31a468fb00c17e?s=128&d=identicon&r=PG", "display_name": "Ben Whale", "link": "https://stackoverflow.com/users/933848/ben-whale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 35049706, "answer_count": 1, "score": 2, "last_activity_date": 1453945989, "creation_date": 1453933669, "last_edit_date": 1453945989, "question_id": 35049328, "link": "https://stackoverflow.com/questions/35049328/upcast-of-nullptr-through-class-with-multiple-inheritance", "title": "upcast of nullptr through class with multiple inheritance", "body": "<p>The problem is that an implicit cast of nullptr, to the second super class, of a class with multiple inheritance results (at least with LLVM 7.0.2) in an adjustment being applied to the nullptr. The pointer is now no longer null which (if null checks are being performed in the methods of the super class) can result in a crash (I guess technically undefined behaviour). </p>\n\n<p>Here's a minimal example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ninline bool pointerIsNotNull(const void* ptr) { return ptr != nullptr; }\n\nclass IntValue {\n    public:\n        IntValue() { }\n        int getIntValue() { return pointerIsNotNull(this) ? value : 0; }\n    private:\n        int value;\n};\n\nstatic const char* nullptrChar = \"nullptr\";\n\nclass CharValue {\n    public:\n        CharValue() { }\n        const char* getCharValue() { return pointerIsNotNull(this) ? value : nullptrChar; }\n    private:\n        char* value;\n};\n\nclass Foo : public IntValue, public CharValue {\n    public:\n        Foo() { }\n        double getDoubleValue() { return pointerIsNotNull(this) ? value : 0; }\n    protected:\n        double value;\n};\n\nint main(int argc, const char * argv[])\n{\n    Foo* foo = nullptr;\n\n    std::cout &lt;&lt; foo-&gt;getIntValue() &lt;&lt; std::endl;\n\n    CharValue* charValue = foo;\n    std::cout &lt;&lt; charValue-&gt;getCharValue() &lt;&lt; std::endl;\n\n    std::cout &lt;&lt; foo-&gt;getCharValue() &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>My question is this:\n<em>Is there a way to check for this kind of shenanigans without manually checking for nullptr before calls into a second superclass?</em></p>\n\n<p>You know, is there an elegant way to do this (maybe in the second superclass) which would assure me that I've caught all possible examples of this behaviour?</p>\n\n<p>EDIT: Yes, I know calling member functions from a nullptr isn't modern practice. I thought (until I posted this question) that it used to be accepted practice and in any case I'm constrained by standards I don't have control over. So, <em>with the assumption that calling a member function on a nullptr will always enter the correct function</em>, is there an elegant solution to my problem?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 3, "creation_date": 1453933428, "post_id": 35049219, "comment_id": 57822801, "body": "You are assigning to temporary pointer in <code>init_some_class</code>, either return the pointer or use a pointer to pointer as the parameter. Better still assign to <code>test_</code> as was probably your intention."}, {"owner": {"reputation": 2820, "user_id": 2562283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ef4e835ba48416df3d5607ae1a89bbf?s=128&d=identicon&r=PG", "display_name": "E. Moffat", "link": "https://stackoverflow.com/users/2562283/e-moffat"}, "edited": false, "score": 3, "creation_date": 1453933462, "post_id": 35049219, "comment_id": 57822819, "body": "Did you mean to assign to <code>test_</code> instead of assigning to <code>tmp</code> in <code>init_some_class</code>?"}, {"owner": {"reputation": 1065, "user_id": 702845, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e52a7b9d2746941454f4cbb56a025eec?s=128&d=identicon&r=PG", "display_name": "Ross W", "link": "https://stackoverflow.com/users/702845/ross-w"}, "edited": false, "score": 0, "creation_date": 1453933642, "post_id": 35049219, "comment_id": 57822922, "body": "I meant to use tmp as the init_some_class function performs lots of tasks on a particular class so I&#39;d like to pass in a pointer and do operations on the class that it point to"}, {"owner": {"reputation": 1065, "user_id": 702845, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e52a7b9d2746941454f4cbb56a025eec?s=128&d=identicon&r=PG", "display_name": "Ross W", "link": "https://stackoverflow.com/users/702845/ross-w"}, "edited": false, "score": 0, "creation_date": 1453933710, "post_id": 35049219, "comment_id": 57822961, "body": "So the new inside of the init_some_class scope is only within that function.... I thought that I&#39;d passed the actual pointer into the function with the call"}, {"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 1, "creation_date": 1453933931, "post_id": 35049219, "comment_id": 57823098, "body": "You aren&#39;t actually assigning to <code>test_</code> anywhere. <code>test_-&gt;class_function()</code> is undefined behaviour if <code>test_</code> does not point to a valid constructed object."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1453936295, "post_id": 35049219, "comment_id": 57824202, "body": "<code>int x; int y = 6; printf(&quot;%i\\n&quot;, x);</code> &lt;-- why doesn&#39;t this print 6?"}], "answers": [{"comments": [{"owner": {"reputation": 1065, "user_id": 702845, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e52a7b9d2746941454f4cbb56a025eec?s=128&d=identicon&r=PG", "display_name": "Ross W", "link": "https://stackoverflow.com/users/702845/ross-w"}, "edited": false, "score": 0, "creation_date": 1453934344, "post_id": 35049415, "comment_id": 57823325, "body": "Ok so I need to instead just return the pointer that I create with new to test_?  (or do some kind of pointer to pointer)"}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "reply_to_user": {"reputation": 1065, "user_id": 702845, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e52a7b9d2746941454f4cbb56a025eec?s=128&d=identicon&r=PG", "display_name": "Ross W", "link": "https://stackoverflow.com/users/702845/ross-w"}, "edited": false, "score": 0, "creation_date": 1453934516, "post_id": 35049415, "comment_id": 57823407, "body": "@RossW I just completed the answer with some options.  Returning the pointer is also a possibility (if you can somehow ensure that nobody will call the function without taking care of the return value)"}], "tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": true, "score": 3, "last_activity_date": 1453934355, "last_edit_date": 1453934355, "creation_date": 1453933962, "answer_id": 35049415, "question_id": 35049219, "link": "https://stackoverflow.com/questions/35049219/basic-c-segfault-when-using-new-and-passing-a-pointer/35049415#35049415", "title": "Basic C++ segfault when using new and passing a pointer", "body": "<p>When you write in <code>init_some class()</code> :  </p>\n\n<pre><code>tmp = new some_class(variables,variables);\n</code></pre>\n\n<p>you are in fact storing the new pointer in the parameter that is passed by value.  But this parameter is local to the function and lost as soon as the function returns.  </p>\n\n<p>So if you call somewhere <code>init_some class(test_)</code>  the value of <code>test_</code> is transferred to <code>tmp</code>, but the changed <code>tmp</code> remains local to the function.  You therefore get a segfault beause <code>test_</code> remains uninitialized. </p>\n\n<p><strong>Possible solutions:</strong></p>\n\n<p>A simple solution to the described use case could be to pass the parameter by reference:  </p>\n\n<pre><code>void foo::init_some_class(some_class *&amp; tmp)  // note the &amp;\n{\n   tmp = new some_class(variables,variables);\n}\n</code></pre>\n\n<p>With this definition, when calling <code>init_some class(test_)</code>, the original <code>test_</code> pointer gets modified.  </p>\n\n<p>Another solution could be to have the <code>init_some_class()</code> change directly the <code>test_</code> member.  You'd then no longer need a parameter.</p>\n"}], "owner": {"reputation": 1065, "user_id": 702845, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e52a7b9d2746941454f4cbb56a025eec?s=128&d=identicon&r=PG", "display_name": "Ross W", "link": "https://stackoverflow.com/users/702845/ross-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 1, "accepted_answer_id": 35049415, "answer_count": 1, "score": 1, "last_activity_date": 1453934355, "creation_date": 1453933241, "question_id": 35049219, "link": "https://stackoverflow.com/questions/35049219/basic-c-segfault-when-using-new-and-passing-a-pointer", "title": "Basic C++ segfault when using new and passing a pointer", "body": "<p>Can somebody please explain the segfault here:</p>\n\n<pre><code>class foo\n{\n  private:\n    some_class *test_;\n\n\n    void init_some_class(some_class*);\n    void use_class();\n }\n\n foo::foo()\n {\n     //test_ = new some_class(variables, variables); //THIS WOULD WORK\n }\n\n void foo::init_some_class(some_class *tmp)\n {\n   tmp = new some_class(variables,variables);\n }\n\n void foo::use_class()\n {\n   test_-&gt;class_function() //THIS SEGfaults\n }\n</code></pre>\n\n<p>I would call the funtion via init_some_class(test_);  If I use new in the constructor then the test_->class_function() works fine.  It only seems to segfault when I use new outside of the class constructor and try and pass the pointer through the function</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 5554, "user_id": 732419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2caafa6cd8f59597d0d3e9320f106d48?s=128&d=identicon&r=PG", "display_name": "ott--", "link": "https://stackoverflow.com/users/732419/ott"}, "edited": false, "score": 5, "creation_date": 1453933069, "post_id": 35050381, "comment_id": 57825003, "body": "The usual way is <code>fork()</code> followed by <code>exec()</code>. See examples on the manpages."}, {"owner": {"reputation": 186, "user_id": 4354782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d8cc1c4f1cf4c512ebeba91928d9e27?s=128&d=identicon&r=PG&f=1", "display_name": "orion", "link": "https://stackoverflow.com/users/4354782/orion"}, "edited": false, "score": 0, "creation_date": 1453935727, "post_id": 35050381, "comment_id": 57825004, "body": "Which is the same way every child is spawned. It&#39;s what the shell does. It&#39;s how every process except for init is started."}], "answers": [{"tags": [], "owner": {"reputation": 876, "user_id": 726099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ab5998d0dbf52047edc5be160a0f1a5?s=128&d=identicon&r=PG", "display_name": "marinus", "link": "https://stackoverflow.com/users/726099/marinus"}, "is_accepted": true, "score": 13, "last_activity_date": 1453934977, "creation_date": 1453934977, "answer_id": 35050382, "question_id": 35050381, "link": "https://stackoverflow.com/questions/35050381/execute-binary-from-c-without-shell/35050382#35050382", "title": "Execute binary from C++ without shell", "body": "<p>You need to: </p>\n\n<ol>\n<li>fork the process</li>\n<li>call one of the \"exec\" functions in the child process</li>\n<li>(if necessary) wait for it to stop</li>\n</ol>\n\n<p>For example, this program runs <code>ls</code>. </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n\n#include &lt;unistd.h&gt;\n#include &lt;sys/wait.h&gt;\n\n// for example, let's \"ls\"\nint ls(const char *dir) {\n   int pid, status;\n   // first we fork the process\n   if (pid = fork()) {\n       // pid != 0: this is the parent process (i.e. our process)\n       waitpid(pid, &amp;status, 0); // wait for the child to exit\n   } else {\n       /* pid == 0: this is the child process. now let's load the\n          \"ls\" program into this process and run it */\n\n       const char executable[] = \"/bin/ls\";\n\n       // load it. there are more exec__ functions, try 'man 3 exec'\n       // execl takes the arguments as parameters. execv takes them as an array\n       // this is execl though, so:\n       //      exec         argv[0]  argv[1] end\n       execl(executable, executable, dir,    NULL);\n\n       /* exec does not return unless the program couldn't be started. \n          when the child process stops, the waitpid() above will return.\n       */\n\n\n   }\n   return status; // this is the parent process again.\n}\n\n\nint main() {\n\n   std::cout &lt;&lt; \"ls'ing /\" &lt;&lt; std::endl;\n   std::cout &lt;&lt; \"returned: \" &lt;&lt; ls(\"/\") &lt;&lt; std::endl;\n\n   return 0;\n}\n</code></pre>\n\n<p>And the output is:</p>\n\n<pre><code>ls'ing /\nbin   dev  home        lib    lib64       media  opt   root  sbin     srv  tmp  var\nboot  etc  initrd.img  lib32  lost+found  mnt    proc  run   selinux  sys  usr  vmlinuz\nreturned: 0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 319, "user_id": 5281528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6974c2aba67bde76669365f1ccb339db?s=128&d=identicon&r=PG&f=1", "display_name": "Ulugbek Abdullaev", "link": "https://stackoverflow.com/users/5281528/ulugbek-abdullaev"}, "edited": false, "score": 0, "creation_date": 1593269809, "post_id": 35618702, "comment_id": 110723175, "body": "<code>popen</code> invokes shell. Ref: <a href=\"https://man7.org/linux/man-pages/man3/popen.3.html\" rel=\"nofollow noreferrer\">man7.org/linux/man-pages/man3/popen.3.html</a>"}], "tags": [], "owner": {"reputation": 17, "user_id": 4538008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28545a0ffc22cfd056f95a0cc3b64e08?s=128&d=identicon&r=PG&f=1", "display_name": "flyaway", "link": "https://stackoverflow.com/users/4538008/flyaway"}, "is_accepted": false, "score": -1, "last_activity_date": 1456376305, "creation_date": 1456376305, "answer_id": 35618702, "question_id": 35050381, "link": "https://stackoverflow.com/questions/35050381/execute-binary-from-c-without-shell/35618702#35618702", "title": "Execute binary from C++ without shell", "body": "<p>I used popen, fgets and pclose functions to execute external command line program and redirect its output.</p>\n"}], "migrated_from": {"other_site": {"aliases": ["http://linux.stackexchange.com"], "markdown_extensions": ["Prettify"], "launch_date": 1294871917, "open_beta_date": 1282071600, "closed_beta_date": 1281466800, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon@2.png", "favicon_url": "https://cdn.sstatic.net/Sites/unix/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon.png", "audience": "users of Linux, FreeBSD and other Un*x-like operating systems", "site_url": "https://unix.stackexchange.com", "api_site_parameter": "unix", "logo_url": "https://cdn.sstatic.net/Sites/unix/Img/logo.png", "name": "Unix &amp; Linux", "site_type": "main_site"}, "on_date": 1453938278, "question_id": 258128}, "owner": {"reputation": 714, "user_id": 5849262, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aea9a350d929ede34c328ca570d84487?s=128&d=identicon&r=PG&f=1", "display_name": "Billy", "link": "https://stackoverflow.com/users/5849262/billy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6212, "favorite_count": 1, "accepted_answer_id": 35050382, "answer_count": 2, "score": 2, "last_activity_date": 1456376305, "creation_date": 1453932889, "question_id": 35050381, "link": "https://stackoverflow.com/questions/35050381/execute-binary-from-c-without-shell", "title": "Execute binary from C++ without shell", "body": "<p>Is there a way to execute a binary from my C++ program without a shell? Whenever I use system my command gets run via a shell.</p>\n"}, {"tags": ["c++", "virtual"], "comments": [{"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 4, "creation_date": 1453932584, "post_id": 35048995, "comment_id": 57822354, "body": "Can you post a small example of what you want to achieve, so we don&#39;t answer the &quot;wrong&quot; questions?"}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 1, "creation_date": 1453932773, "post_id": 35048995, "comment_id": 57822457, "body": "(I&#39;m pretty sure, from the description of <code>BOOST_CURRENT_FUNCTION</code>, that it&#39;s just a wrapper for <code>__PRETTY_FUNCTION__</code> or something similar)"}, {"owner": {"reputation": 17902, "user_id": 116273, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cc60634738ece15d1de4738110c76aa8?s=128&d=identicon&r=PG", "display_name": "erenon", "link": "https://stackoverflow.com/users/116273/erenon"}, "edited": false, "score": 2, "creation_date": 1453932785, "post_id": 35048995, "comment_id": 57822463, "body": "Make the method non virtual, let it do the book keeping and calling the actual virtual function, methodImpl."}], "answers": [{"comments": [{"owner": {"reputation": 1079, "user_id": 2308211, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/c44e36061f8bf558031c1ee44d038c5c?s=128&d=identicon&r=PG", "display_name": "SPMP", "link": "https://stackoverflow.com/users/2308211/spmp"}, "edited": false, "score": 0, "creation_date": 1453933557, "post_id": 35049062, "comment_id": 57822879, "body": "The problem is, it&#39;s not common functionality right? The functionality I want is to see which derived function is called."}], "tags": [], "owner": {"reputation": 3035, "user_id": 749041, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2eee5d59ef528829ba6fa5ca4c6f47d9?s=128&d=identicon&r=PG", "display_name": "LordDoskias", "link": "https://stackoverflow.com/users/749041/lorddoskias"}, "is_accepted": false, "score": 1, "last_activity_date": 1453932666, "creation_date": 1453932666, "answer_id": 35049062, "question_id": 35048995, "link": "https://stackoverflow.com/questions/35048995/can-the-virtual-function-be-found-at-runtime-without-calling/35049062#35049062", "title": "Can the virtual function be found at runtime without calling?", "body": "<p>From your description it seems you migth have a design issue. Have you considered using the <a href=\"https://sourcemaking.com/design_patterns/template_method\" rel=\"nofollow\">template method design patter</a>? The idea is to have your  base class implement the common functionality and through virtual functions implement the specifics in your derived classes.</p>\n"}, {"comments": [{"owner": {"reputation": 3035, "user_id": 749041, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2eee5d59ef528829ba6fa5ca4c6f47d9?s=128&d=identicon&r=PG", "display_name": "LordDoskias", "link": "https://stackoverflow.com/users/749041/lorddoskias"}, "edited": false, "score": 0, "creation_date": 1453933362, "post_id": 35049135, "comment_id": 57822769, "body": "I wouldn&#39;t call this the pure template method design pattern. But at the end of the day this is just semantics. In my opinion template method would be having Base::f() not be a pure virtual function, but an ordinary function which in turn calls private virtual method which are then implemented in the derived classes. But as I said whatever gets the job done :)"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 3035, "user_id": 749041, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2eee5d59ef528829ba6fa5ca4c6f47d9?s=128&d=identicon&r=PG", "display_name": "LordDoskias", "link": "https://stackoverflow.com/users/749041/lorddoskias"}, "edited": false, "score": 0, "creation_date": 1453933473, "post_id": 35049135, "comment_id": 57822823, "body": "@LordDoskias Yes I believe it&#39;s a matter of semantics. I knew about this from Scott Meyers&#39; Effective C++, in which he was mentioning the fact that the common bookkeeping can be achieved by implementing a pure virtual function (which at the time I had no idea one can do)."}, {"owner": {"reputation": 1079, "user_id": 2308211, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/c44e36061f8bf558031c1ee44d038c5c?s=128&d=identicon&r=PG", "display_name": "SPMP", "link": "https://stackoverflow.com/users/2308211/spmp"}, "edited": false, "score": 0, "creation_date": 1453933747, "post_id": 35049135, "comment_id": 57822981, "body": "um.. The idea is to have bookkeeping code only once (it&#39;s not just simple printing the function name). This approach doesn&#39;t help with that, right?"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 1079, "user_id": 2308211, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/c44e36061f8bf558031c1ee44d038c5c?s=128&d=identicon&r=PG", "display_name": "SPMP", "link": "https://stackoverflow.com/users/2308211/spmp"}, "edited": false, "score": 0, "creation_date": 1453933813, "post_id": 35049135, "comment_id": 57823022, "body": "@user2308211 Cannot you factor the bookkeeping code into <code>Base::f()</code>? If not, then you really have to do it manually in each derived override."}, {"owner": {"reputation": 1079, "user_id": 2308211, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/c44e36061f8bf558031c1ee44d038c5c?s=128&d=identicon&r=PG", "display_name": "SPMP", "link": "https://stackoverflow.com/users/2308211/spmp"}, "edited": false, "score": 0, "creation_date": 1453933887, "post_id": 35049135, "comment_id": 57823076, "body": "The bookkeeping code needs to know whether it&#39;s Derived1::f() or Derived2::f()"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 1079, "user_id": 2308211, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/c44e36061f8bf558031c1ee44d038c5c?s=128&d=identicon&r=PG", "display_name": "SPMP", "link": "https://stackoverflow.com/users/2308211/spmp"}, "edited": false, "score": 0, "creation_date": 1453934090, "post_id": 35049135, "comment_id": 57823184, "body": "@user2308211 In this case the only thing that comes to my mind is to somehow pass a parameter to <code>Base::f()</code> which tells you which <code>DerivedX</code> you are calling, and based on that parameter process it in <code>Base::f()</code>. The language does not offer intrinsic support for what you are trying to achieve."}, {"owner": {"reputation": 1079, "user_id": 2308211, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/c44e36061f8bf558031c1ee44d038c5c?s=128&d=identicon&r=PG", "display_name": "SPMP", "link": "https://stackoverflow.com/users/2308211/spmp"}, "edited": false, "score": 0, "creation_date": 1453934232, "post_id": 35049135, "comment_id": 57823262, "body": "I have a <code>DerivedType</code> enum member, which identifies what the derived type is, I&#39;ll have to fall back to that I suppose."}, {"owner": {"reputation": 3035, "user_id": 749041, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2eee5d59ef528829ba6fa5ca4c6f47d9?s=128&d=identicon&r=PG", "display_name": "LordDoskias", "link": "https://stackoverflow.com/users/749041/lorddoskias"}, "edited": false, "score": 1, "creation_date": 1453937540, "post_id": 35049135, "comment_id": 57824701, "body": "I think you have a bigger design issue, because you essentially want your base class to know about each and every possible derive classes that you have. And this is not a good OOP design. Refactor your code so that you base doesn&#39;t care which derived is being called so long as it can just call a function which is overloaded in the derived class."}, {"owner": {"reputation": 1079, "user_id": 2308211, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/c44e36061f8bf558031c1ee44d038c5c?s=128&d=identicon&r=PG", "display_name": "SPMP", "link": "https://stackoverflow.com/users/2308211/spmp"}, "edited": false, "score": 0, "creation_date": 1453956953, "post_id": 35049135, "comment_id": 57830393, "body": "I see your point, but for me, all I need is a function name, so that I can do stuff like log the amount of time taken in executing the call, memory allocated in the call etc.."}], "tags": [], "owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "is_accepted": false, "score": 1, "last_activity_date": 1453933520, "last_edit_date": 1495541715, "creation_date": 1453932900, "answer_id": 35049135, "question_id": 35048995, "link": "https://stackoverflow.com/questions/35048995/can-the-virtual-function-be-found-at-runtime-without-calling/35049135#35049135", "title": "Can the virtual function be found at runtime without calling?", "body": "<p>One idea is to implement the base pure virtual function and call it in each derived override. In the base one you increment a static counter. Something like:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n\nstruct Base\n{\n    static size_t counter;\n    virtual void f() = 0;\n    virtual ~Base() = default;\n};\nsize_t Base::counter{0};\n\nvoid Base::f() // IMPLEMENTATION, yes it's possible to implement a pure virtual function\n{\n    ++counter;\n}\n\nstruct Derived1: Base\n{\n    void f() override\n    {\n        Base::f(); // increment the counter\n        std::cout &lt;&lt; \"Derived1::f()\\n\";\n    }\n};\n\nstruct Derived2: Base\n{\n    void f() override\n    {\n        Base::f(); // increment the counter\n        std::cout &lt;&lt; \"Derived2::f()\\n\";\n    }\n};\n\nint main()\n{\n    std::unique_ptr&lt;Base&gt; pBase1{new Derived1};\n    std::unique_ptr&lt;Base&gt; pBase2{new Derived2};\n\n    pBase1-&gt;f();\n    pBase1-&gt;f();\n\n    pBase2-&gt;f();\n\n    std::cout &lt;&lt; Base::counter &lt;&lt; std::endl; // outputs 3\n}\n</code></pre>\n\n<p><a href=\"http://melpon.org/wandbox/permlink/PNesnekK0DOeZSnn\" rel=\"nofollow noreferrer\"><kbd>Live on Wandbox</kbd></a></p>\n\n<p>If I'm not wrong I believe this is an instance of the Template Method design pattern <a href=\"https://stackoverflow.com/a/35049062/3093378\">mentioned by @LordDosias</a>. There is no other intrinsic way of getting this information out from the language, as C++ does not have genuine runtime reflection capabilities.</p>\n"}, {"tags": [], "owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "is_accepted": true, "score": 1, "last_activity_date": 1453933297, "creation_date": 1453933297, "answer_id": 35049234, "question_id": 35048995, "link": "https://stackoverflow.com/questions/35048995/can-the-virtual-function-be-found-at-runtime-without-calling/35049234#35049234", "title": "Can the virtual function be found at runtime without calling?", "body": "<p>No, it cannot be. C++ does not support this kind of introspection. <code>__PRETTY_FUNCTION__</code> is all you're gonna get.</p>\n"}, {"tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": false, "score": 0, "last_activity_date": 1453933553, "creation_date": 1453933553, "answer_id": 35049296, "question_id": 35048995, "link": "https://stackoverflow.com/questions/35048995/can-the-virtual-function-be-found-at-runtime-without-calling/35049296#35049296", "title": "Can the virtual function be found at runtime without calling?", "body": "<p>Well, aside from wrapping your macro in another macro that is smaller/shorter/does more, there is nothing that will provide the name of a function for you. </p>\n\n<pre><code>   #define WHERE cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; endl\n   ...\n   void fn() {\n      WHERE;\n   }\n</code></pre>\n\n<p>This also means you can turn on/off the tracing trivially:</p>\n\n<pre><code>  #if TRACING\n     #define WHERE cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; endl\n  #else\n     #define WHERE\n  #endif\n</code></pre>\n\n<p>(You may want to wrap that in <code>do { ... } while(0)</code> in both sides to avoid problems if you were to put a <code>WHERE</code> inside an if, or some such, and still want it to work correctly when when it's \"nothing\")</p>\n"}, {"tags": [], "owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "is_accepted": false, "score": 0, "last_activity_date": 1453933781, "creation_date": 1453933781, "answer_id": 35049359, "question_id": 35048995, "link": "https://stackoverflow.com/questions/35048995/can-the-virtual-function-be-found-at-runtime-without-calling/35049359#35049359", "title": "Can the virtual function be found at runtime without calling?", "body": "<p>The simplest answer is that, since C++ doesn't have auxiliary methods, you have to split the implementation of <code>fn</code> into a utility wrapper and the virtual function proper:</p>\n\n<pre><code>class Base {\nprotected:\n  virtual void fn_impl() = 0;\npublic:\n  void fn() { fn_impl(); }\n};\n\nclass BaseWithLogging: public Base {\npublic:\n  void fn(); {\n    /* do logging */\n    fn_impl();\n  }\n};\n</code></pre>\n\n<p>If you want the logs to capture the exact identity of the virtual (function name, file, line number, ...) which is actually, then there is no workaround for that; the boilerplate has to go into the function.</p>\n\n<p>The crusty old preprocessor can be of help. E.g. simple-minded illustration:</p>\n\n<pre><code>#define LOG (cout&lt;&lt;__PRETTY_FUNCTION__&lt;&lt;endl)\n</code></pre>\n\n<p>and then you just have</p>\n\n<pre><code>LOG;\n</code></pre>\n\n<p>at the beginning of the function.</p>\n"}], "owner": {"reputation": 1079, "user_id": 2308211, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/c44e36061f8bf558031c1ee44d038c5c?s=128&d=identicon&r=PG", "display_name": "SPMP", "link": "https://stackoverflow.com/users/2308211/spmp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 35049234, "answer_count": 5, "score": 1, "last_activity_date": 1453933781, "creation_date": 1453932368, "last_edit_date": 1453933312, "question_id": 35048995, "link": "https://stackoverflow.com/questions/35048995/can-the-virtual-function-be-found-at-runtime-without-calling", "title": "Can the virtual function be found at runtime without calling?", "body": "<p>I have a base class <code>Base</code>, with many derived classes (eg. <code>Derived1</code>, <code>Derived2</code>). <code>Base</code> has a pure virtual function <code>fn</code>, which is called many times using a <code>Base</code> pointer. Every time the function is called, I need to do some extra logging and related stuff. In particular, I use <code>BOOST_CURRENT_FUNCTION</code> in the derived-class functions to find out which function was called. Is there a way to know this information before calling the function, so that I do not have to rewrite the bookkeeping code in every derived function?</p>\n\n<p>Edit: I wish to avoid writing <code>__PRETTY_FUNCTION__</code> in each derived function.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nclass Base {\npublic:\nvirtual void fn() = 0;\n};\n\nclass Derived1:public Base {\npublic:\nvoid fn() {\ncout&lt;&lt;__PRETTY_FUNCTION__&lt;&lt;endl;\n}\n};\n\nclass Derived2:public Base {\npublic:\nvoid fn() {\ncout&lt;&lt;__PRETTY_FUNCTION__&lt;&lt;endl;\n}\n};\n\nint main()\n{\n    int choice =0;\n    Base *ptr1 = nullptr;\n    cout&lt;&lt;\"Choose 0/1: \"&lt;&lt;endl;\n    cin&gt;&gt;choice;\n    if(choice == 0) {    \n       ptr1 = new Derived1;\n    }else {\n       ptr1 = new Derived2;\n    }\n\n    //********CAN I WRITE SOMETHING HERE, TO GIVE THE SAME RESULT?\n    ptr1-&gt;fn();\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1453932527, "post_id": 35048940, "comment_id": 57822325, "body": "Lookup <code>__declspec(dllexport)</code> and <code>__declspec(dllimport)</code> on the web."}, {"owner": {"reputation": 2942, "user_id": 4821282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66fcf596fdff8b28c477a9105501c8a2?s=128&d=identicon&r=PG&f=1", "display_name": "phantom", "link": "https://stackoverflow.com/users/4821282/phantom"}, "edited": false, "score": 1, "creation_date": 1453932563, "post_id": 35048940, "comment_id": 57822346, "body": "It looks like <code>EXAMPLEUNMANAGED_API</code> is a preprocessor macro. You should look to see what it is defined as."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1453932990, "post_id": 35048940, "comment_id": 57822561, "body": "I saw this in some code: <code>QNG_ASSERT_PTR_NE(join_cb, NULL);</code> - can someone tell me what <code>QNG_ASSERT_PTR_NE</code> does in C++? (This is a rhetorical question)"}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 1, "creation_date": 1453933861, "post_id": 35048940, "comment_id": 57823064, "body": "If you are using code that does that, you might want to look into the dangers of using C++ class interfaces across DLL boundaries."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1513969600, "last_edit_date": 1513969600, "creation_date": 1453932768, "answer_id": 35049096, "question_id": 35048940, "link": "https://stackoverflow.com/questions/35048940/what-does-this-c-class-declaration-mean/35049096#35049096", "title": "What does this c++ class declaration mean?", "body": "<p>Such constructs are used in Windows to control whether the class is being used while building a DLL or it is being used to build a user of the DLL.</p>\n\n<p>When building the DLL, <code>EXAMPLEUNMANAGEDDLL_API</code> needs to expand to <code>__declspec(dllexport)</code>.</p>\n\n<p>When buidling users of the DLL, <code>EXAMPLEUNMANAGEDDLL_API</code> needs to expand to <code>__declspec(dllimport)</code>. </p>\n\n<p>Further information can be found at:</p>\n\n<ol>\n<li><a href=\"https://msdn.microsoft.com/en-us/library/a90k134d.aspx\" rel=\"nofollow noreferrer\">Exporting from a DLL Using __declspec(dllexport)</a></li>\n<li><a href=\"https://msdn.microsoft.com/en-us/library/8fskxacy.aspx\" rel=\"nofollow noreferrer\">Importing into an Application Using __declspec(dllimport)</a> </li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": true, "score": 3, "last_activity_date": 1453932825, "creation_date": 1453932825, "answer_id": 35049112, "question_id": 35048940, "link": "https://stackoverflow.com/questions/35048940/what-does-this-c-class-declaration-mean/35049112#35049112", "title": "What does this c++ class declaration mean?", "body": "<p>This is for the purpose of exporting or importing the functions of a class into a DLL.  </p>\n\n<p>Read this article on MSDN for additional information:  <a href=\"https://msdn.microsoft.com/en-us/library/81h27t8c.aspx\" rel=\"nofollow\">Using dllimport and dllexport in C++ Classes</a></p>\n\n<p>The common practice is to use conditional compilation in the headers of the class, so that the same header can be used for producing the DLL or consuming the DLL:  </p>\n\n<pre><code>#ifdef EXAMPLEUNMANAGEDDLL_EXPORTS \n    #define EXAMPLEUNMANAGEDDLL_API __declspec(dllexport) \n#else \n    #define EXAMPLEUNMANAGEDDLL_API __declspec(dllimport) \n#endif \n</code></pre>\n\n<p>In this example, the code or the buildscripts of your library would define symbol <code>EXAMPLEUNMANAGEDDLL_EXPORTS</code>. </p>\n"}], "owner": {"reputation": 739, "user_id": 2192423, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/839275601c287828bba51c20148ee440?s=128&d=identicon&r=PG", "display_name": "MrAliB", "link": "https://stackoverflow.com/users/2192423/mralib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 0, "accepted_answer_id": 35049112, "answer_count": 2, "score": 2, "last_activity_date": 1513969600, "creation_date": 1453932141, "question_id": 35048940, "link": "https://stackoverflow.com/questions/35048940/what-does-this-c-class-declaration-mean", "title": "What does this c++ class declaration mean?", "body": "<p>I saw this piece of code in an article I am reading. </p>\n\n<pre><code>class EXAMPLEUNMANAGEDDLL_API CUnmanagedTestClass\n{\npublic:\n    CUnmanagedTestClass();\n    virtual ~CUnmanagedTestClass();\n}; \n</code></pre>\n\n<p>What does EXAMPLEUNMANAGEDDLL_API do?</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c++", "mfc", "wtl"], "comments": [{"owner": {"reputation": 64286, "user_id": 868014, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PoaTp.png?s=128&g=1", "display_name": "Roman R.", "link": "https://stackoverflow.com/users/868014/roman-r"}, "edited": false, "score": 0, "creation_date": 1454239035, "post_id": 35048930, "comment_id": 57946839, "body": "Generally your attempt #2 is correct but you have a mess with ATL/WTL strings and hence the error. If you are building with ATL, your best solution would be to simply NOT use WTL string classes (define <code>_WTL_NO_CSTRING</code> in stdafx.h)."}], "answers": [{"comments": [{"owner": {"reputation": 3379, "user_id": 4787510, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/0p1SM.jpg?s=128&g=1", "display_name": "Sossenbinder", "link": "https://stackoverflow.com/users/4787510/sossenbinder"}, "edited": false, "score": 0, "creation_date": 1453965837, "post_id": 35049408, "comment_id": 57833895, "body": "I&#39;m actually trying to solve it via WTL. Is DDX and CString not a part of WTL-themed GUI-programming but rather MFC? The tutorial on codeproject I read had both of them explained as well. I&#39;m currently only trying to do it via GetDlgItemText just for the sake of getting the job done."}, {"owner": {"reputation": 3379, "user_id": 4787510, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/0p1SM.jpg?s=128&g=1", "display_name": "Sossenbinder", "link": "https://stackoverflow.com/users/4787510/sossenbinder"}, "edited": false, "score": 0, "creation_date": 1453999237, "post_id": 35049408, "comment_id": 57857334, "body": "EDIT: Just got home and tried this, this doesn&#39;t work for me. It might be due to the #define GetDlgItemText GetDlgItemTextA"}, {"owner": {"reputation": 6920, "user_id": 4394169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aETL5.jpg?s=128&g=1", "display_name": "Vlad Feinstein", "link": "https://stackoverflow.com/users/4394169/vlad-feinstein"}, "reply_to_user": {"reputation": 3379, "user_id": 4787510, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/0p1SM.jpg?s=128&g=1", "display_name": "Sossenbinder", "link": "https://stackoverflow.com/users/4787510/sossenbinder"}, "edited": false, "score": 0, "creation_date": 1453999944, "post_id": 35049408, "comment_id": 57857866, "body": "What doesn&#39;t work? This code <i>should</i> work: <code>CString windowText; GetDlgItemText(IDC_LINKPASTEEDIT, windowText);</code>... What errors are you getting?"}, {"owner": {"reputation": 3379, "user_id": 4787510, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/0p1SM.jpg?s=128&g=1", "display_name": "Sossenbinder", "link": "https://stackoverflow.com/users/4787510/sossenbinder"}, "edited": false, "score": 0, "creation_date": 1454000217, "post_id": 35049408, "comment_id": 57858058, "body": "#define GetDlgItemText GetDlgItemTextA                                                                       ---             Error: No instance of overloaded function &quot;<i>My class</i>::GetDlgItemTextA&quot; matches the argument list. Argument types are: (int, WTL::CString)"}, {"owner": {"reputation": 6920, "user_id": 4394169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aETL5.jpg?s=128&g=1", "display_name": "Vlad Feinstein", "link": "https://stackoverflow.com/users/4394169/vlad-feinstein"}, "reply_to_user": {"reputation": 3379, "user_id": 4787510, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/0p1SM.jpg?s=128&g=1", "display_name": "Sossenbinder", "link": "https://stackoverflow.com/users/4787510/sossenbinder"}, "edited": false, "score": 0, "creation_date": 1454001490, "post_id": 35049408, "comment_id": 57858794, "body": "Well, is your second parameter a <code>WTL::CString</code>? I never mixed MFC with WTL, but presume that without the namespace, <code>CString</code> is an MFC/ATL string. Try explicitly specifying <code>WTL::CString windowText;</code>  [EDITED] Actually, it&#39;s the other way around: you <i>ARE</i> passing <code>WTL::CString</code> when another type is expected. What is the definition of your <code>GetDlgItemTextA</code> ?"}, {"owner": {"reputation": 3379, "user_id": 4787510, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/0p1SM.jpg?s=128&g=1", "display_name": "Sossenbinder", "link": "https://stackoverflow.com/users/4787510/sossenbinder"}, "edited": false, "score": 0, "creation_date": 1454001630, "post_id": 35049408, "comment_id": 57858863, "body": "I made it work, finally. See my edited post. Still feels very clunky and not WTL-like at all. I love how I tried to do it with the definition given in my WinUser.h file, and now it works while not trying to do it as the definition said, but rather with your method. Where do you find out all that WTL stuff by the way? I can barely find a documentation at all"}], "tags": [], "owner": {"reputation": 6920, "user_id": 4394169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aETL5.jpg?s=128&g=1", "display_name": "Vlad Feinstein", "link": "https://stackoverflow.com/users/4394169/vlad-feinstein"}, "is_accepted": true, "score": 1, "last_activity_date": 1453933931, "creation_date": 1453933931, "answer_id": 35049408, "question_id": 35048930, "link": "https://stackoverflow.com/questions/35048930/how-can-i-obtain-the-content-of-a-edit-control-with-wtl/35049408#35049408", "title": "How can I obtain the content of a Edit Control with WTL?", "body": "<p>The <code>CString</code>, <code>DDX</code> and <code>GetDlgItemText</code> suggest that you are using MFC, <strong>NOT</strong> WTL - is that right?</p>\n\n<p>MFC's <a href=\"https://msdn.microsoft.com/en-us/library/xcws9sbs.aspx\" rel=\"nofollow\">GetDlgItemText</a> has two overloads:</p>\n\n<pre><code>int GetDlgItemText(\n   int nID,\n   LPTSTR lpStr,\n   int nMaxCount \n) const;\nint GetDlgItemText(\n   int nID,\n   CString&amp; rString \n) const;\n</code></pre>\n\n<p>and your call doesn't match either. Use CString's form, without the length.</p>\n"}], "owner": {"reputation": 3379, "user_id": 4787510, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/0p1SM.jpg?s=128&g=1", "display_name": "Sossenbinder", "link": "https://stackoverflow.com/users/4787510/sossenbinder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 351, "favorite_count": 0, "accepted_answer_id": 35049408, "answer_count": 1, "score": 0, "last_activity_date": 1454001703, "creation_date": 1453932113, "last_edit_date": 1454001703, "question_id": 35048930, "link": "https://stackoverflow.com/questions/35048930/how-can-i-obtain-the-content-of-a-edit-control-with-wtl", "title": "How can I obtain the content of a Edit Control with WTL?", "body": "<p>I've already read up on a few threads here on how to achieve that. I tried several answers but none worked so far. I simply want to get the content of a Edit control, given as CEdit in WTL, and save it into a preferably std::wstring, but I guess I can't get around using CString/TCHAR*.</p>\n\n<p>Prerequisites:</p>\n\n<pre><code>ID of my control: IDC_LINKPASTEEDIT\n\nMember variable IDC_LINKPASTEEDIT is assigned to via DDX MAP: m_linkPasteEdit\n</code></pre>\n\n<p>What I tried so far:</p>\n\n<p>1.)</p>\n\n<pre><code>CString windowText;\nGetDlgItemText(IDC_LINKPASTEEDIT, windowText, 1024);\n</code></pre>\n\n<p>-> Argument list error for GetDlgItemTextA (which is referred to by GetDlgItemText's DEFINE)</p>\n\n<p>2.)</p>\n\n<pre><code>CString windowText;\nm_linkPasteEdit.GetWindowText(windowText);\n</code></pre>\n\n<p>-> Another argument list error for GetDlgItemTextA</p>\n\n<p>I can't quite figure out the correct list as well, as documentation is not existent and looking into the define I feel like my arguments should be correct.</p>\n\n<p>Sadly I didn't find another resource, I even downloaded some html document WTL library, but it seems like CEdit isn't completely documented in there.</p>\n\n<p>Any ideas?</p>\n\n<p>EDIT:</p>\n\n<p>Made it work in a very very weird fashion, which is not really WTL-like in my opinion, but it works at least.</p>\n\n<p>1)  -  Change Multibyte charset to UNICODE in project settings</p>\n\n<p>2)  -   </p>\n\n<pre><code>WCHAR windowText[1024]; \nGetDlgItemText(IDC_LINKPASTEEDIT, windowText, 1024);\n</code></pre>\n\n<p>Works with multibyte as well by using CHAR instead of WCHAR, but I prefer the wide way.</p>\n"}, {"tags": ["c++", "string", "algorithm", "palindrome"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1453931530, "post_id": 35048698, "comment_id": 57821760, "body": "<code>#include&lt;bits&#47;stdc++.h&gt;</code> Don&#39;t do that, this is not part of C++."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1453933766, "post_id": 35048698, "comment_id": 57822992, "body": "A brief explanation of why the first three lines of your program could cost you a job: <code>#include&lt;bits&#47;stdc++.h&gt;</code> means include the entire standard library. <code>using namespace std;</code> means place the entire standard library in the global namespace. The standard library is huge, so this opens up a lot of room for silent overloads and other artifacts from naming collisions. The fubar potential is epic. Do this while interviewing for a job and you&#39;ve just shouted at the top of your lungs  &quot;I don&#39;t know how what I&#39;m doing actually works.&quot;"}, {"owner": {"reputation": 2139, "user_id": 1566267, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/587e35626fc8fa2bfd9af27216d2c16b?s=128&d=identicon&r=PG", "display_name": "John_West", "link": "https://stackoverflow.com/users/1566267/john-west"}, "edited": false, "score": 0, "creation_date": 1453939295, "post_id": 35048698, "comment_id": 57825328, "body": "And where is the question?"}], "answers": [{"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 1, "last_activity_date": 1453932980, "creation_date": 1453932980, "answer_id": 35049148, "question_id": 35048698, "link": "https://stackoverflow.com/questions/35048698/generating-all-possible-palindromes-for-a-given-string/35049148#35049148", "title": "Generating all possible palindromes for a given string", "body": "<p>The basic problem here is that you're generating palindromes very inefficiently. In particular, you're trying to generate every possible arrangement of the inputs, then checking whether each is a palindrome.</p>\n\n<p>Instead of that, consider the basic requirements for a string to be a palindrome (all the characters before the middle are identical to, and in reverse order from, those after the middle). So, other than the middle character of an odd-length palindrome, every other character in the palindrome must occur an even number of times.</p>\n\n<p>I'd start by separating the characters into two groups: even occurrences and odd occurrences. The characters that occur an even number of times you insert only half of those in the working set. That is, given (for example) <code>aabbccde</code> in your input, you'd break it into two pieces, one containing <code>abc</code> and the other containing <code>de</code>.</p>\n\n<p>Then you can generate your palindromes by generating all the permutations of <code>abc</code> (and <code>ab</code>, <code>ac</code> and <code>bc</code>), which you output in forward order followed by the same set in reverse order (e.g., <code>abc</code> followed by <code>cba</code> giving <code>abccba</code>). Then for each of those, you can insert one character from the other set in the middle, so you get <code>abcdcba</code>, and <code>abcecba</code>). Then rearrange those inputs to get (for example) <code>acb</code> and repeat the process to get <code>acbbca</code>, <code>acbdbca</code> and <code>acbebca</code>.</p>\n\n<p>One way to generate all the permutations of the \"even\" inputs is with <code>std::next_permutation</code>.</p>\n\n<p>Note that this way you don't spend time generating lots of possible arrangements that aren't palindromes. You know up-front that every result you generate <em>will</em> be a palindrome.</p>\n"}], "owner": {"reputation": 89, "user_id": 4534743, "user_type": "registered", "profile_image": "https://graph.facebook.com/1602073190012210/picture?type=large", "display_name": "Soumyajit Bhattacharyay", "link": "https://stackoverflow.com/users/4534743/soumyajit-bhattacharyay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1081, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1453932980, "creation_date": 1453931249, "last_edit_date": 1453932284, "question_id": 35048698, "link": "https://stackoverflow.com/questions/35048698/generating-all-possible-palindromes-for-a-given-string", "title": "Generating all possible palindromes for a given string", "body": "<pre><code>Inputs : I.1) A string of characters\nOutputs: O.1) Total number of palindromes found\n         O.2) Palindromes output on standard output\n\nNote : duplicate palindromes are not allowed\n             output need not be sorted\nsingle characters are a palindrome.\n</code></pre>\n\n<p>I  have solved the above problem through backtracking but it is giving TLE for a big input string. So it will be beneficial if the solution avoids recursion.\nInput for TLE is :- <code>amitabhbacchan</code><br> \nHere's my implementation:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include&lt;bits/stdc++.h&gt;\nusing namespace std;\n\nint isSafe(int *a, int i) {\n    if (a[i] == 0) {\n        return 1;\n    }\n    else {\n        return 0;\n    }\n}\n\nint isPalin(string b) {\n    if (b.length() == 0) {\n        return 0;\n    }\n    if (b.length() == 1) {\n        return 1;\n    }\n    string c = b;\n    std::reverse(c.begin(), c.end());\n    if (c == b) {\n        return 1;\n    }\n    else {\n        return 0;\n    }\n}\n\nvoid palindrome(string a, string b, int *vec, std::set&lt;string&gt;&amp;res) {\n\n    if (isPalin(b)) {\n        if (res.find(b) != res.end()) {\n            return;\n        }\n        res.insert(b);\n    }\n\n    for (int i = 0; i &lt; a.length(); i++) {\n        if (isSafe(vec, i)) {\n            b.push_back(a[i]);\n            vec[i] = 1;\n\n            palindrome(a, b, vec, res);\n            b.pop_back();\n            vec[i] = 0;\n        }\n    }\n}\n\nint main(void) {\n    string a = \"ababcdef\";\n    string c = \"\";\n    int *vec;\n    std::set&lt;string&gt;res;\n    vec = (int*)malloc(a.length()*sizeof(int));\n    for (int i = 0; i &lt; a.length(); i++) {\n        vec[i] = 0;\n    }\n    palindrome(a, c, vec, res);\n    std::set&lt;string&gt;::iterator it;\n\n    for (it = res.begin(); it != res.end(); it++) {\n        cout &lt;&lt; *it &lt;&lt; endl;\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "datetime", "boost", "locale", "boost-date-time"], "owner": {"reputation": 2867, "user_id": 1001395, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/859e6602a10637f67d17a82a0a6ef9d6?s=128&d=identicon&r=PG", "display_name": "Fernando Gonzalez Sanchez", "link": "https://stackoverflow.com/users/1001395/fernando-gonzalez-sanchez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1453941789, "creation_date": 1453930955, "last_edit_date": 1495541047, "question_id": 35048623, "link": "https://stackoverflow.com/questions/35048623/locale-does-not-recognized-for-custom-facet-parsing-date-time", "title": "Locale does not recognized for custom facet parsing Date / Time", "body": "<p>I was looking for a sample to convert date to seconds from an arbitrary epoch (dates minor than the standard 1970)</p>\n\n<p>And I found the following very good sample (from an answer to):\n<a href=\"https://stackoverflow.com/questions/3786201/how-to-parse-date-time-from-string\">How to parse date/time from string?</a></p>\n\n<pre><code>#define BOOST_ALL_NO_LIB\n\n#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;locale&gt;\n#include &lt;boost/date_time.hpp&gt;\n\nnamespace bt = boost::posix_time;\nconst std::locale formats[] = {\nstd::locale(std::locale::classic(),new bt::time_input_facet(\"%Y-%m-%d %H:%M:%S\")),\nstd::locale(std::locale::classic(),new bt::time_input_facet(\"%Y/%m/%d %H:%M:%S\")),\nstd::locale(std::locale::classic(),new bt::time_input_facet(\"%d.%m.%Y %H:%M:%S\")),\nstd::locale(std::locale::classic(),new bt::time_input_facet(\"%Y-%m-%d\"))};\nconst size_t formats_n = sizeof(formats)/sizeof(formats[0]);\n\nstd::time_t pt_to_time_t(const bt::ptime&amp; pt)\n{\n    bt::ptime timet_start(boost::gregorian::date(1970,1,1));\n    bt::time_duration diff = pt - timet_start;\n    return diff.ticks()/bt::time_duration::rep_type::ticks_per_second;\n\n}\nvoid seconds_from_epoch(const std::string&amp; s)\n{\n    bt::ptime pt;\n    for(size_t i=0; i&lt;formats_n; ++i)\n    {\n        std::istringstream is(s);\n        is.imbue(formats[i]);\n        is &gt;&gt; pt;\n        if(pt != bt::ptime()) break;\n    }\n    std::cout &lt;&lt; \" ptime is \" &lt;&lt; pt &lt;&lt; '\\n';\n    std::cout &lt;&lt; \" seconds from epoch are \" &lt;&lt; pt_to_time_t(pt) &lt;&lt; '\\n';\n}\nint main()\n{\n    seconds_from_epoch(\"2004-03-21 12:45:33\");\n    seconds_from_epoch(\"2004/03/21 12:45:33\");\n    seconds_from_epoch(\"23.09.2004 04:12:21\");\n    seconds_from_epoch(\"2003-02-11\");\n}\n</code></pre>\n\n<p>Problem is, apparently doesn't work in VC++ 2013 / Boost 1.59, the dates all print as \"not a date\" (the condition in the loop from \"if(pt != bt::ptime())\" is never true).</p>\n\n<p>Digging a bit in the debugger for \"is >> pt\", seems that the MSVC STL looks for the locale in a global table and does not find it.</p>\n\n<p>Is the code missing something?</p>\n\n<p>UPDATE: This seems to be MSVC specific, in Linux Open SUSE 13.2 with GCC 4.9 and Boost 1.59, program works damn fine.</p>\n"}, {"tags": ["python", "c++", "linux", "gcc", "openerp"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1453930972, "post_id": 35048582, "comment_id": 57821443, "body": "see <code>fatal error: libxml&#47;xmlversion.h: No such file or directory</code> - you have to install source code (or only headers <code>*.h</code>) of <code>libxml</code> (or <code>libxml-dev</code>)"}, {"owner": {"reputation": 55, "user_id": 3605445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f0e0711b16dc2019c2a9f2f09d93419?s=128&d=identicon&r=PG&f=1", "display_name": "user3605445", "link": "https://stackoverflow.com/users/3605445/user3605445"}, "reply_to_user": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1453936133, "post_id": 35048582, "comment_id": 57824134, "body": "I searched how to install libxml and found this site: <a href=\"http://stackoverflow.com/questions/35048582/how-to-fix-error-command-x86-64-linux-gnu-gcc-failed-with-exit-status-1\" title=\"how to fix error command x86 64 linux gnu gcc failed with exit status 1\">stackoverflow.com/questions/35048582/&hellip;</a> where I performed the following commands:  wget <a href=\"ftp://xmlsoft.org/libxml2/libxml2-sources-2.9.3.tar.gz\" rel=\"nofollow noreferrer\">xmlsoft.org/libxml2/libxml2-sources-2.9.3.tar.gz</a> tar -xvzf libxml2-sources-2.9.3.tar.gz  went to the directory where the package was extracted  make sudo make install"}], "answers": [{"comments": [{"owner": {"reputation": 2670, "user_id": 3351141, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q41J5.jpg?s=128&g=1", "display_name": "Alejandro Galera", "link": "https://stackoverflow.com/users/3351141/alejandro-galera"}, "edited": false, "score": 2, "creation_date": 1527776304, "post_id": 43462641, "comment_id": 88262981, "body": "And what about CentOS?"}, {"owner": {"reputation": 539, "user_id": 8589823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nkidi.jpg?s=128&g=1", "display_name": "Rajan saha Raju", "link": "https://stackoverflow.com/users/8589823/rajan-saha-raju"}, "reply_to_user": {"reputation": 2670, "user_id": 3351141, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q41J5.jpg?s=128&g=1", "display_name": "Alejandro Galera", "link": "https://stackoverflow.com/users/3351141/alejandro-galera"}, "edited": false, "score": 0, "creation_date": 1598163456, "post_id": 43462641, "comment_id": 112364520, "body": "@AlejandroGalera, <code>yum install python3-devel.x86_64</code>"}], "tags": [], "owner": {"reputation": 333, "user_id": 6634368, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WQB8OL6XRfY/AAAAAAAAAAI/AAAAAAAAADk/TfnE4nciMis/photo.jpg?sz=128", "display_name": "Zhigang", "link": "https://stackoverflow.com/users/6634368/zhigang"}, "is_accepted": false, "score": 22, "last_activity_date": 1492483102, "last_edit_date": 1492483102, "creation_date": 1492482780, "answer_id": 43462641, "question_id": 35048582, "link": "https://stackoverflow.com/questions/35048582/how-to-fix-error-command-x86-64-linux-gnu-gcc-failed-with-exit-status-1/43462641#43462641", "title": "How to fix error: command &#39;x86_64-linux-gnu-gcc&#39; failed with exit status 1", "body": "<p>Try installing the build-essential package first.</p>\n\n<pre><code>apt-get install build-essential\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1819, "user_id": 10696761, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0g2cAqYXq7s/AAAAAAAAAAI/AAAAAAAAAAc/FDmUBb5imVw/photo.jpg?sz=128", "display_name": "Gabriel Petersson", "link": "https://stackoverflow.com/users/10696761/gabriel-petersson"}, "is_accepted": false, "score": 4, "last_activity_date": 1599652567, "creation_date": 1599652567, "answer_id": 63811168, "question_id": 35048582, "link": "https://stackoverflow.com/questions/35048582/how-to-fix-error-command-x86-64-linux-gnu-gcc-failed-with-exit-status-1/63811168#63811168", "title": "How to fix error: command &#39;x86_64-linux-gnu-gcc&#39; failed with exit status 1", "body": "<p>The above did not work for me, I used</p>\n<pre><code>sudo apt-get install python3.6-dev \n</code></pre>\n<p>where 3.6 is your version of python</p>\n"}, {"tags": [], "owner": {"reputation": 25, "user_id": 14353462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cfe77fa90b479c502b7749fe782a8cf?s=128&d=identicon&r=PG&f=1", "display_name": "pythonInRelay", "link": "https://stackoverflow.com/users/14353462/pythoninrelay"}, "is_accepted": false, "score": 1, "last_activity_date": 1603694441, "creation_date": 1603694441, "answer_id": 64532490, "question_id": 35048582, "link": "https://stackoverflow.com/questions/35048582/how-to-fix-error-command-x86-64-linux-gnu-gcc-failed-with-exit-status-1/64532490#64532490", "title": "How to fix error: command &#39;x86_64-linux-gnu-gcc&#39; failed with exit status 1", "body": "<pre><code>sudo apt install python3-dev\n</code></pre>\n<p>Solved my problem completely.</p>\n"}], "owner": {"reputation": 55, "user_id": 3605445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f0e0711b16dc2019c2a9f2f09d93419?s=128&d=identicon&r=PG&f=1", "display_name": "user3605445", "link": "https://stackoverflow.com/users/3605445/user3605445"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32549, "favorite_count": 1, "answer_count": 3, "score": 2, "last_activity_date": 1603694441, "creation_date": 1453930793, "last_edit_date": 1496796808, "question_id": 35048582, "link": "https://stackoverflow.com/questions/35048582/how-to-fix-error-command-x86-64-linux-gnu-gcc-failed-with-exit-status-1", "title": "How to fix error: command &#39;x86_64-linux-gnu-gcc&#39; failed with exit status 1", "body": "<p>I'm trying to install odoo on a fresh installation of Linux on a VirtualBox machine. I have entered in the commands found here as is: <a href=\"http://odoo-development.readthedocs.org/en/latest/install.html\" rel=\"noreferrer\">Odoo Development Read the Docs</a>. The following command is what prompts the error: command 'x86_64-linux-gnu-gcc' failed with exit status 1:</p>\n\n<pre><code>sudo pip install -r requirements.txt\n</code></pre>\n\n<p>So now I'm trying to solve the problem. I have gone to <a href=\"https://stackoverflow.com/questions/26053982/error-setup-script-exited-with-error-command-x86-64-linux-gnu-gcc-failed-wit\">error: Setup script exited with error: command 'x86_64-linux-gnu-gcc' failed with exit status 1</a>,<a href=\"https://stackoverflow.com/questions/11094718/error-command-gcc-failed-with-exit-status-1-while-installing-eventlet\">error: command 'gcc' failed with exit status 1 while installing eventlet</a> , and entered in the following commands. </p>\n\n<p>For the first link:</p>\n\n<pre><code>sudo apt-get install build-essential autoconf libtool pkg-config python-opengl python-imaging python-pyrex python-pyside.qtopengl idle-python2.7 qt4-dev-tools qt4-designer libqtgui4 libqtcore4 libqt4-xml libqt4-test libqt4-script libqt4-network libqt4-dbus python-qt4 python-qt4-gl libgle3 python-dev\n\nsudo easy_install greenlet\n\nsudo easy_install gevent\n\nsudo pip install -r requirements.txt\n\nerror: command 'x86_64-linux-gnu-gcc' failed with exit status 1\n</code></pre>\n\n<p>The Second Link:</p>\n\n<pre><code>sudo apt-get install python-dev\nsudo pip install -r requirements.txt\n</code></pre>\n\n<p>I still get the error. Then I tried:</p>\n\n<pre><code>sudo apt-get install libevent-dev\nsudo pip install -r requirements.txt\n\nerror: command 'x86_64-linux-gnu-gcc' failed with exit status 1\n</code></pre>\n\n<p>What am I doing wrong? </p>\n\n<p>Here is what happens after I enter the command:</p>\n\n<pre><code>$ sudo pip install -r requirements.txt\nRequirement already satisfied (use --upgrade to upgrade): Babel==1.3 in /usr/lib/python2.7/dist-packages (from -r requirements.txt (line 1))\nRequirement already satisfied (use --upgrade to upgrade): Jinja2==2.7.3 in /usr/local/lib/python2.7/dist-packages (from -r requirements.txt (line 2))\nRequirement already satisfied (use --upgrade to upgrade): Mako==1.0.1 in /usr/local/lib/python2.7/dist-packages (from -r requirements.txt (line 3))\nRequirement already satisfied (use --upgrade to upgrade): MarkupSafe==0.23 in /usr/lib/python2.7/dist-packages (from -r requirements.txt (line 4))\nRequirement already satisfied (use --upgrade to upgrade): Pillow==2.7.0 in /usr/local/lib/python2.7/dist-packages (from -r requirements.txt (line 5))\nRequirement already satisfied (use --upgrade to upgrade): Python-Chart==1.39 in /usr/local/lib/python2.7/dist-packages (from -r requirements.txt (line 6))\nRequirement already satisfied (use --upgrade to upgrade): PyYAML==3.11 in /usr/lib/python2.7/dist-packages (from -r requirements.txt (line 7))\nRequirement already satisfied (use --upgrade to upgrade): Werkzeug==0.9.6 in /usr/local/lib/python2.7/dist-packages (from -r requirements.txt (line 8))\nRequirement already satisfied (use --upgrade to upgrade): argparse==1.2.1 in /usr/lib/python2.7 (from -r requirements.txt (line 9))\nRequirement already satisfied (use --upgrade to upgrade): decorator==3.4.0 in /usr/local/lib/python2.7/dist-packages (from -r requirements.txt (line 10))\nRequirement already satisfied (use --upgrade to upgrade): docutils==0.12 in /usr/lib/python2.7/dist-packages (from -r requirements.txt (line 11))\nRequirement already satisfied (use --upgrade to upgrade): feedparser==5.1.3 in /usr/lib/python2.7/dist-packages (from -r requirements.txt (line 12))\nRequirement already satisfied (use --upgrade to upgrade): gdata==2.0.18 in /usr/local/lib/python2.7/dist-packages (from -r requirements.txt (line 13))\nRequirement already satisfied (use --upgrade to upgrade): gevent==1.0.2 in /usr/local/lib/python2.7/dist-packages (from -r requirements.txt (line 14))\nRequirement already satisfied (use --upgrade to upgrade): greenlet==0.4.7 in /usr/local/lib/python2.7/dist-packages (from -r requirements.txt (line 15))\nRequirement already satisfied (use --upgrade to upgrade): jcconv==0.2.3 in /usr/local/lib/python2.7/dist-packages (from -r requirements.txt (line 16))\nDownloading/unpacking lxml==3.4.1 (from -r requirements.txt (line 17))\n  Downloading lxml-3.4.1.tar.gz (3.5MB): 3.5MB downloaded\n  Running setup.py (path:/tmp/pip-build-Hqt4sF/lxml/setup.py) egg_info for package lxml\n    /usr/lib/python2.7/distutils/dist.py:267: UserWarning: Unknown distribution option: 'bugtrack_url'\n      warnings.warn(msg)\n    Building lxml version 3.4.1.\n    Building without Cython.\n    ERROR: /bin/sh: 1: xslt-config: not found\n\n    ** make sure the development packages of libxml2 and libxslt are installed **\n\n    Using build configuration of libxslt\n\n    warning: no previously-included files found matching '*.py'\nDownloading/unpacking mock==1.0.1 (from -r requirements.txt (line 18))\n  Downloading mock-1.0.1.tar.gz (818kB): 818kB downloaded\n  Running setup.py (path:/tmp/pip-build-Hqt4sF/mock/setup.py) egg_info for package mock\n\n    warning: no files found matching '*.png' under directory 'docs'\n    warning: no files found matching '*.css' under directory 'docs'\n    warning: no files found matching '*.html' under directory 'docs'\n    warning: no files found matching '*.js' under directory 'docs'\nDownloading/unpacking ofxparse==0.14 (from -r requirements.txt (line 19))\n  Downloading ofxparse-0.14.tar.gz (42kB): 42kB downloaded\n  Running setup.py (path:/tmp/pip-build-Hqt4sF/ofxparse/setup.py) egg_info for package ofxparse\n\nDownloading/unpacking passlib==1.6.2 (from -r requirements.txt (line 20))\n  Downloading passlib-1.6.2.tar.gz (408kB): 408kB downloaded\n  Running setup.py (path:/tmp/pip-build-Hqt4sF/passlib/setup.py) egg_info for package passlib\n\nDownloading/unpacking psutil==2.2.0 (from -r requirements.txt (line 21))\n  Downloading psutil-2.2.0.tar.gz (223kB): 223kB downloaded\n  Running setup.py (path:/tmp/pip-build-Hqt4sF/psutil/setup.py) egg_info for package psutil\n\n    warning: no previously-included files matching '*' found under directory 'docs/_build'\nDownloading/unpacking psycogreen==1.0 (from -r requirements.txt (line 22))\n  Downloading psycogreen-1.0.tar.gz\n  Running setup.py (path:/tmp/pip-build-Hqt4sF/psycogreen/setup.py) egg_info for package psycogreen\n\nDownloading/unpacking psycopg2==2.5.4 (from -r requirements.txt (line 23))\n  Downloading psycopg2-2.5.4.tar.gz (682kB): 682kB downloaded\n  Running setup.py (path:/tmp/pip-build-Hqt4sF/psycopg2/setup.py) egg_info for package psycopg2\n\nRequirement already satisfied (use --upgrade to upgrade): pyPdf==1.13 in /usr/lib/python2.7/dist-packages (from -r requirements.txt (line 24))\nDownloading/unpacking pydot==1.0.2 (from -r requirements.txt (line 25))\n  Downloading pydot-1.0.2.tar.gz\n  Running setup.py (path:/tmp/pip-build-Hqt4sF/pydot/setup.py) egg_info for package pydot\n    Couldn't import dot_parser, loading of dot files will not be possible.\n\nRequirement already satisfied (use --upgrade to upgrade): pyparsing==2.0.3 in /usr/lib/python2.7/dist-packages (from -r requirements.txt (line 26))\nRequirement already satisfied (use --upgrade to upgrade): pyserial==2.7 in /usr/lib/python2.7/dist-packages (from -r requirements.txt (line 27))\nDownloading/unpacking python-dateutil==2.4.0 (from -r requirements.txt (line 28))\n  Downloading python_dateutil-2.4.0-py2.py3-none-any.whl (175kB): 175kB downloaded\nDownloading/unpacking python-ldap==2.4.19 (from -r requirements.txt (line 29))\n  Downloading python-ldap-2.4.19.tar.gz (138kB): 138kB downloaded\n  Running setup.py (path:/tmp/pip-build-Hqt4sF/python-ldap/setup.py) egg_info for package python-ldap\n    defines: HAVE_SASL HAVE_TLS HAVE_LIBLDAP_R\n    extra_compile_args:\n    extra_objects:\n    include_dirs: /opt/openldap-RE24/include /usr/include/sasl /usr/include\n    library_dirs: /opt/openldap-RE24/lib /usr/lib\n    libs: ldap_r\n\n    file Lib/ldap.py (for module ldap) not found\n    file Lib/ldap/controls.py (for module ldap.controls) not found\n    file Lib/ldap/extop.py (for module ldap.extop) not found\n    file Lib/ldap/schema.py (for module ldap.schema) not found\n    warning: no files found matching 'Makefile'\n    warning: no files found matching 'Modules/LICENSE'\nRequirement already satisfied (use --upgrade to upgrade): python-openid==2.2.5 in /usr/lib/python2.7/dist-packages (from -r requirements.txt (line 30))\nRequirement already satisfied (use --upgrade to upgrade): pytz==2014.10 in /usr/lib/python2.7/dist-packages (from -r requirements.txt (line 31))\nDownloading/unpacking pyusb==1.0.0b2 (from -r requirements.txt (line 32))\n  Downloading pyusb-1.0.0b2.tar.gz (57kB): 57kB downloaded\n  Running setup.py (path:/tmp/pip-build-Hqt4sF/pyusb/setup.py) egg_info for package pyusb\n\n    warning: no files found matching 'ChangeLog'\nDownloading/unpacking qrcode==5.1 (from -r requirements.txt (line 33))\n  Downloading qrcode-5.1.tar.gz\n  Running setup.py (path:/tmp/pip-build-Hqt4sF/qrcode/setup.py) egg_info for package qrcode\n\nDownloading/unpacking reportlab==3.1.44 (from -r requirements.txt (line 34))\n  Downloading reportlab-3.1.44.tar.gz (1.9MB): 1.9MB downloaded\n  Running setup.py (path:/tmp/pip-build-Hqt4sF/reportlab/setup.py) egg_info for package reportlab\n    ################################################\n    #Attempting install of _rl_accel &amp; pyHnj\n    #extensions from '/tmp/pip-build-Hqt4sF/reportlab/src/rl_addons/rl_accel'\n    ################################################\n    ################################################\n    #Attempting install of _renderPM\n    #extensions from '/tmp/pip-build-Hqt4sF/reportlab/src/rl_addons/renderPM'\n    will use package libart 2.3.12\n    # installing without freetype no ttf, sorry!\n    # You need to install a static library version of the freetype2 software\n    # If you need truetype support in renderPM\n    # You may need to edit setup.cfg (win32)\n    # or edit this file to access the library if it is installed\n    ################################################\n    Downloading standard T1 font curves\n    Finished download of standard T1 font curves\n\n    ()\n    ########## SUMMARY INFO #########\n    ################################################\n    #Attempting install of _rl_accel &amp; pyHnj\n    #extensions from '/tmp/pip-build-Hqt4sF/reportlab/src/rl_addons/rl_accel'\n    ################################################\n    ################################################\n    #Attempting install of _renderPM\n    #extensions from '/tmp/pip-build-Hqt4sF/reportlab/src/rl_addons/renderPM'\n    will use package libart 2.3.12\n    # installing without freetype no ttf, sorry!\n    # You need to install a static library version of the freetype2 software\n    # If you need truetype support in renderPM\n    # You may need to edit setup.cfg (win32)\n    # or edit this file to access the library if it is installed\n    ################################################\n    Downloading standard T1 font curves\n    Finished download of standard T1 font curves\nDownloading/unpacking requests==2.6.0 (from -r requirements.txt (line 35))\n  Downloading requests-2.6.0-py2.py3-none-any.whl (469kB): 469kB downloaded\nRequirement already satisfied (use --upgrade to upgrade): six==1.9.0 in /usr/lib/python2.7/dist-packages (from -r requirements.txt (line 36))\nDownloading/unpacking suds-jurko==0.6 (from -r requirements.txt (line 37))\n  Downloading suds-jurko-0.6.tar.bz2 (143kB): 143kB downloaded\n  Running setup.py (path:/tmp/pip-build-Hqt4sF/suds-jurko/setup.py) egg_info for package suds-jurko\n\nRequirement already satisfied (use --upgrade to upgrade): vatnumber==1.2 in /usr/lib/python2.7/dist-packages (from -r requirements.txt (line 38))\nDownloading/unpacking vobject==0.6.6 (from -r requirements.txt (line 39))\n  Downloading vobject-0.6.6.tar.gz (53kB): 53kB downloaded\n  Running setup.py (path:/tmp/pip-build-Hqt4sF/vobject/setup.py) egg_info for package vobject\n\nRequirement already satisfied (use --upgrade to upgrade): wsgiref==0.1.2 in /usr/lib/python2.7 (from -r requirements.txt (line 40))\nRequirement already satisfied (use --upgrade to upgrade): xlwt==0.7.5 in /usr/lib/python2.7/dist-packages (from -r requirements.txt (line 41))\nRequirement already satisfied (use --upgrade to upgrade): beautifulsoup4 in /usr/lib/python2.7/dist-packages (from ofxparse==0.14-&gt;-r requirements.txt (line 19))\nRequirement already satisfied (use --upgrade to upgrade): setuptools in /usr/lib/python2.7/dist-packages (from pydot==1.0.2-&gt;-r requirements.txt (line 25))\nRequirement already satisfied (use --upgrade to upgrade): pip&gt;=1.4.1 in /usr/lib/python2.7/dist-packages (from reportlab==3.1.44-&gt;-r requirements.txt (line 34))\nRequirement already satisfied (use --upgrade to upgrade): python-stdnum in /usr/lib/python2.7/dist-packages (from vatnumber==1.2-&gt;-r requirements.txt (line 38))\nInstalling collected packages: lxml, mock, ofxparse, passlib, psutil, psycogreen, psycopg2, pydot, python-dateutil, python-ldap, pyusb, qrcode, reportlab, requests, suds-jurko, vobject\n  Found existing installation: lxml 3.4.4\n    Not uninstalling lxml at /usr/lib/python2.7/dist-packages, owned by OS\n  Running setup.py install for lxml\n    /usr/lib/python2.7/distutils/dist.py:267: UserWarning: Unknown distribution option: 'bugtrack_url'\n      warnings.warn(msg)\n    Building lxml version 3.4.1.\n    Building without Cython.\n    ERROR: /bin/sh: 1: xslt-config: not found\n\n    ** make sure the development packages of libxml2 and libxslt are installed **\n\n    Using build configuration of libxslt\n    building 'lxml.etree' extension\n    x86_64-linux-gnu-gcc -pthread -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fno-strict-aliasing -D_FORTIFY_SOURCE=2 -g -fstack-protector-strong -Wformat -Werror=format-security -fPIC -I/tmp/pip-build-Hqt4sF/lxml/src/lxml/includes -I/usr/include/python2.7 -c src/lxml/lxml.etree.c -o build/temp.linux-x86_64-2.7/src/lxml/lxml.etree.o -w\n    In file included from src/lxml/lxml.etree.c:239:0:\n    /tmp/pip-build-Hqt4sF/lxml/src/lxml/includes/etree_defs.h:14:31: fatal error: libxml/xmlversion.h: No such file or directory\n    compilation terminated.\n    error: command 'x86_64-linux-gnu-gcc' failed with exit status 1\n    Complete output from command /usr/bin/python -c \"import setuptools, tokenize;__file__='/tmp/pip-build-Hqt4sF/lxml/setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\\r\\n', '\\n'), __file__, 'exec'))\" install --record /tmp/pip-tUvZhB-record/install-record.txt --single-version-externally-managed --compile:\n    /usr/lib/python2.7/distutils/dist.py:267: UserWarning: Unknown distribution option: 'bugtrack_url'\n\n  warnings.warn(msg)\n\nBuilding lxml version 3.4.1.\n\nBuilding without Cython.\n\nERROR: /bin/sh: 1: xslt-config: not found\n\n\n\n** make sure the development packages of libxml2 and libxslt are installed **\n\n\n\nUsing build configuration of libxslt\n\nrunning install\n\nrunning build\n\nrunning build_py\n\ncreating build\n\ncreating build/lib.linux-x86_64-2.7\n\ncreating build/lib.linux-x86_64-2.7/lxml\n\ncopying src/lxml/doctestcompare.py -&gt; build/lib.linux-x86_64-2.7/lxml\n\ncopying src/lxml/builder.py -&gt; build/lib.linux-x86_64-2.7/lxml\n\ncopying src/lxml/usedoctest.py -&gt; build/lib.linux-x86_64-2.7/lxml\n\ncopying src/lxml/pyclasslookup.py -&gt; build/lib.linux-x86_64-2.7/lxml\n\ncopying src/lxml/sax.py -&gt; build/lib.linux-x86_64-2.7/lxml\n\ncopying src/lxml/_elementpath.py -&gt; build/lib.linux-x86_64-2.7/lxml\n\ncopying src/lxml/ElementInclude.py -&gt; build/lib.linux-x86_64-2.7/lxml\n\ncopying src/lxml/__init__.py -&gt; build/lib.linux-x86_64-2.7/lxml\n\ncopying src/lxml/cssselect.py -&gt; build/lib.linux-x86_64-2.7/lxml\n\ncreating build/lib.linux-x86_64-2.7/lxml/includes\n\ncopying src/lxml/includes/__init__.py -&gt; build/lib.linux-x86_64-2.7/lxml/includes\n\ncreating build/lib.linux-x86_64-2.7/lxml/html\n\ncopying src/lxml/html/html5parser.py -&gt; build/lib.linux-x86_64-2.7/lxml/html\n\ncopying src/lxml/html/diff.py -&gt; build/lib.linux-x86_64-2.7/lxml/html\n\ncopying src/lxml/html/builder.py -&gt; build/lib.linux-x86_64-2.7/lxml/html\n\ncopying src/lxml/html/usedoctest.py -&gt; build/lib.linux-x86_64-2.7/lxml/html\n\ncopying src/lxml/html/_html5builder.py -&gt; build/lib.linux-x86_64-2.7/lxml/html\n\ncopying src/lxml/html/_setmixin.py -&gt; build/lib.linux-x86_64-2.7/lxml/html\n\ncopying src/lxml/html/ElementSoup.py -&gt; build/lib.linux-x86_64-2.7/lxml/html\n\ncopying src/lxml/html/defs.py -&gt; build/lib.linux-x86_64-2.7/lxml/html\n\ncopying src/lxml/html/_diffcommand.py -&gt; build/lib.linux-x86_64-2.7/lxml/html\n\ncopying src/lxml/html/clean.py -&gt; build/lib.linux-x86_64-2.7/lxml/html\n\ncopying src/lxml/html/formfill.py -&gt; build/lib.linux-x86_64-2.7/lxml/html\n\ncopying src/lxml/html/__init__.py -&gt; build/lib.linux-x86_64-2.7/lxml/html\n\ncopying src/lxml/html/soupparser.py -&gt; build/lib.linux-x86_64-2.7/lxml/html\n\ncreating build/lib.linux-x86_64-2.7/lxml/isoschematron\n\ncopying src/lxml/isoschematron/__init__.py -&gt; build/lib.linux-x86_64-2.7/lxml/isoschematron\n\ncopying src/lxml/lxml.etree.h -&gt; build/lib.linux-x86_64-2.7/lxml\n\ncopying src/lxml/lxml.etree_api.h -&gt; build/lib.linux-x86_64-2.7/lxml\n\ncopying src/lxml/includes/tree.pxd -&gt; build/lib.linux-x86_64-2.7/lxml/includes\n\ncopying src/lxml/includes/xpath.pxd -&gt; build/lib.linux-x86_64-2.7/lxml/includes\n\ncopying src/lxml/includes/c14n.pxd -&gt; build/lib.linux-x86_64-2.7/lxml/includes\n\ncopying src/lxml/includes/dtdvalid.pxd -&gt; build/lib.linux-x86_64-2.7/lxml/includes\n\ncopying src/lxml/includes/xmlparser.pxd -&gt; build/lib.linux-x86_64-2.7/lxml/includes\n\ncopying src/lxml/includes/relaxng.pxd -&gt; build/lib.linux-x86_64-2.7/lxml/includes\n\ncopying src/lxml/includes/config.pxd -&gt; build/lib.linux-x86_64-2.7/lxml/includes\n\ncopying src/lxml/includes/xinclude.pxd -&gt; build/lib.linux-x86_64-2.7/lxml/includes\n\ncopying src/lxml/includes/uri.pxd -&gt; build/lib.linux-x86_64-2.7/lxml/includes\n\ncopying src/lxml/includes/xmlerror.pxd -&gt; build/lib.linux-x86_64-2.7/lxml/includes\n\ncopying src/lxml/includes/etreepublic.pxd -&gt; build/lib.linux-x86_64-2.7/lxml/includes\n\ncopying src/lxml/includes/htmlparser.pxd -&gt; build/lib.linux-x86_64-2.7/lxml/includes\n\ncopying src/lxml/includes/schematron.pxd -&gt; build/lib.linux-x86_64-2.7/lxml/includes\n\ncopying src/lxml/includes/xmlschema.pxd -&gt; build/lib.linux-x86_64-2.7/lxml/includes\n\ncopying src/lxml/includes/xslt.pxd -&gt; build/lib.linux-x86_64-2.7/lxml/includes\n\ncopying src/lxml/includes/etree_defs.h -&gt; build/lib.linux-x86_64-2.7/lxml/includes\n\ncopying src/lxml/includes/lxml-version.h -&gt; build/lib.linux-x86_64-2.7/lxml/includes\n\ncreating build/lib.linux-x86_64-2.7/lxml/isoschematron/resources\n\ncreating build/lib.linux-x86_64-2.7/lxml/isoschematron/resources/rng\n\ncopying src/lxml/isoschematron/resources/rng/iso-schematron.rng -&gt; build/lib.linux-x86_64-2.7/lxml/isoschematron/resources/rng\n\ncreating build/lib.linux-x86_64-2.7/lxml/isoschematron/resources/xsl\n\ncopying src/lxml/isoschematron/resources/xsl/RNG2Schtrn.xsl -&gt; build/lib.linux-x86_64-2.7/lxml/isoschematron/resources/xsl\n\ncopying src/lxml/isoschematron/resources/xsl/XSD2Schtrn.xsl -&gt; build/lib.linux-x86_64-2.7/lxml/isoschematron/resources/xsl\n\ncreating build/lib.linux-x86_64-2.7/lxml/isoschematron/resources/xsl/iso-schematron-xslt1\n\ncopying src/lxml/isoschematron/resources/xsl/iso-schematron-xslt1/iso_svrl_for_xslt1.xsl -&gt; build/lib.linux-x86_64-2.7/lxml/isoschematron/resources/xsl/iso-schematron-xslt1\n\ncopying src/lxml/isoschematron/resources/xsl/iso-schematron-xslt1/iso_schematron_skeleton_for_xslt1.xsl -&gt; build/lib.linux-x86_64-2.7/lxml/isoschematron/resources/xsl/iso-schematron-xslt1\n\ncopying src/lxml/isoschematron/resources/xsl/iso-schematron-xslt1/iso_abstract_expand.xsl -&gt; build/lib.linux-x86_64-2.7/lxml/isoschematron/resources/xsl/iso-schematron-xslt1\n\ncopying src/lxml/isoschematron/resources/xsl/iso-schematron-xslt1/iso_schematron_message.xsl -&gt; build/lib.linux-x86_64-2.7/lxml/isoschematron/resources/xsl/iso-schematron-xslt1\n\ncopying src/lxml/isoschematron/resources/xsl/iso-schematron-xslt1/iso_dsdl_include.xsl -&gt; build/lib.linux-x86_64-2.7/lxml/isoschematron/resources/xsl/iso-schematron-xslt1\n\ncopying src/lxml/isoschematron/resources/xsl/iso-schematron-xslt1/readme.txt -&gt; build/lib.linux-x86_64-2.7/lxml/isoschematron/resources/xsl/iso-schematron-xslt1\n\nrunning build_ext\n\nbuilding 'lxml.etree' extension\n\ncreating build/temp.linux-x86_64-2.7\n\ncreating build/temp.linux-x86_64-2.7/src\n\ncreating build/temp.linux-x86_64-2.7/src/lxml\n\nx86_64-linux-gnu-gcc -pthread -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fno-strict-aliasing -D_FORTIFY_SOURCE=2 -g -fstack-protector-strong -Wformat -Werror=format-security -fPIC -I/tmp/pip-build-Hqt4sF/lxml/src/lxml/includes -I/usr/include/python2.7 -c src/lxml/lxml.etree.c -o build/temp.linux-x86_64-2.7/src/lxml/lxml.etree.o -w\n\nIn file included from src/lxml/lxml.etree.c:239:0:\n\n/tmp/pip-build-Hqt4sF/lxml/src/lxml/includes/etree_defs.h:14:31: fatal error: libxml/xmlversion.h: No such file or directory\n\ncompilation terminated.\n\nerror: command 'x86_64-linux-gnu-gcc' failed with exit status 1\n\n----------------------------------------\n  Can't roll back lxml; was not uninstalled\nCleaning up...\nCommand /usr/bin/python -c \"import setuptools, tokenize;__file__='/tmp/pip-build-Hqt4sF/lxml/setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\\r\\n', '\\n'), __file__, 'exec'))\" install --record /tmp/pip-tUvZhB-record/install-record.txt --single-version-externally-managed --compile failed with error code 1 in /tmp/pip-build-Hqt4sF/lxml\nStoring debug log for failure in /home/aaa/.pip/pip.log\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 5, "creation_date": 1453931082, "post_id": 35048573, "comment_id": 57821503, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/21567291/why-does-stdgetline-skip-input-after-a-formatted-extraction\">Why does std::getline() skip input after a formatted extraction?</a>"}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 1, "creation_date": 1453931141, "post_id": 35048573, "comment_id": 57821532, "body": "Simply put, after you do <code>cin &gt;&gt; userInput;</code>, <code>std::getline</code> will read what&#39;s left on that same line. Calling <code>userCommand[0]</code> on empty <code>userCommand</code> is also UB."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1453931922, "post_id": 35048573, "comment_id": 57821987, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/10553597/cin-and-getline-skipping-input\">cin and getline skipping input</a>"}], "answers": [{"tags": [], "owner": {"reputation": 129, "user_id": 5814556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/132c8aa6a98b7efc0b93c58cca0a009f?s=128&d=identicon&r=PG&f=1", "display_name": "acid1789", "link": "https://stackoverflow.com/users/5814556/acid1789"}, "is_accepted": false, "score": 1, "last_activity_date": 1453931328, "creation_date": 1453931328, "answer_id": 35048723, "question_id": 35048573, "link": "https://stackoverflow.com/questions/35048573/i-cant-figure-out-why-this-loop-is-malfunctioning/35048723#35048723", "title": "I Can&#39;t Figure Out Why This Loop Is Malfunctioning", "body": "<p>The issue here is that getline is returning an empty line.  </p>\n\n<p>So after your first time through the loop, it goes back to the top to read another line.  Gets an empty line, which triggers the error case.</p>\n\n<p>You could fix this by testing for an empty line after getline.</p>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 5366966, "user_type": "registered", "profile_image": "https://graph.facebook.com/879317432149629/picture?type=large", "display_name": "Asit Kumar Singh", "link": "https://stackoverflow.com/users/5366966/asit-kumar-singh"}, "is_accepted": false, "score": 2, "last_activity_date": 1453966176, "last_edit_date": 1453966176, "creation_date": 1453961759, "answer_id": 35054099, "question_id": 35048573, "link": "https://stackoverflow.com/questions/35048573/i-cant-figure-out-why-this-loop-is-malfunctioning/35054099#35054099", "title": "I Can&#39;t Figure Out Why This Loop Is Malfunctioning", "body": "<p>@acid1789 has pointed out correctly the error is due to the empty line after getline. From your code what i can make out is you are using an infinite loop here</p>\n\n<pre><code>while(creditCount &gt;= 0){...}\n</code></pre>\n\n<p>since creditCount is never going to be less than 0 instead of this you can use </p>\n\n<pre><code>while (true){...}\n</code></pre>\n\n<p>its just better programming practice.</p>\n\n<p>And to correct your program you can just use </p>\n\n<pre><code>cin &gt;&gt; userCommand;\n</code></pre>\n\n<p>instead of </p>\n\n<pre><code>getline(cin, userCommand);\n</code></pre>\n\n<p>Hope it helps.</p>\n\n<p>Edit:- Sorry Python habits..</p>\n"}], "owner": {"reputation": 11, "user_id": 5849074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ugWsE.jpg?s=128&g=1", "display_name": "Kyotosomo", "link": "https://stackoverflow.com/users/5849074/kyotosomo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 209, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1453966176, "creation_date": 1453930760, "question_id": 35048573, "link": "https://stackoverflow.com/questions/35048573/i-cant-figure-out-why-this-loop-is-malfunctioning", "title": "I Can&#39;t Figure Out Why This Loop Is Malfunctioning", "body": "<p>So I just can't figure out what's wrong with my code.  When I process a purchase, after I enter the amount of yogurt and am told to go enjoy it, I immediately after get the error message I made for if people don't input P or S, then right afterwards it goes back to normal like it is when you first enter the program, could anybody tell me why this is?  Thank you!</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\nusing namespace std;\n\nint main()\n{\n   string userCommand;\n   int creditCount = 0;\n   int userInput;\n\n   while (creditCount &gt;= 0)\n   {\n\n      cout &lt;&lt; \"--------Menu--------\\n\" &lt;&lt; \"P (Process Purchase)\\n\" &lt;&lt; \"S (Shutdown System)\\n\"\n           &lt;&lt; \"--------Menu--------\\n\" &lt;&lt; \"Your Choice: \";\n\n      getline(cin, userCommand);\n\n      if (userCommand[0] == 'P' || userCommand[0] == 'p')\n      {\n         if (creditCount &gt;= 10)\n         {\n            cout &lt;&lt; \"You qualify for a free yogurt, would you like to use ten of your credits (Yes or No)?\";\n\n            getline(cin, userCommand);\n\n            if (userCommand[0] == 'Y' || userCommand[0] == 'y')\n            {\n               creditCount = creditCount - 10;\n\n               cout &lt;&lt; \"You just used 10 credits and now have \" &lt;&lt; creditCount &lt;&lt; \" left.\\n\"\n                    &lt;&lt; \"Enjoy your free yogurt!\";\n            }\n\n            else if (userCommand[0] == 'N' || userCommand[0] == 'n')\n            {\n               cout &lt;&lt; \"How many yogurts would you like to buy? \";\n               cin &gt;&gt; userInput;\n\n               if (userInput &gt; 0)\n               {\n                  creditCount = creditCount + userInput;\n                  cout &lt;&lt; \"You just earned \" &lt;&lt; userInput &lt;&lt; \" stamps.  You now have \" &lt;&lt; creditCount\n                     &lt;&lt; \" credits!  Enjoy your yogurt!\";\n               }\n\n               else\n               {\n                  cout &lt;&lt; \"Invalid input, please try processing your purchase again and enter a positive \"\n                       &lt;&lt; \"integer.\";\n               }\n            }\n\n            else\n            {\n               cout &lt;&lt; \"*Error, please try processing your purchase again and enter either Yes or No*\\n\\n\";\n            }\n         }\n\n         else if (creditCount &lt; 10)\n         {\n            cout &lt;&lt; \"How many yogurts would you like to buy? \";\n            cin &gt;&gt; userInput;\n\n            if (userInput &gt; 0)\n            {\n               creditCount = creditCount + userInput;\n               cout &lt;&lt; \"You just earned \" &lt;&lt; userInput &lt;&lt; \" stamps.  You now have \" &lt;&lt; creditCount\n                    &lt;&lt; \" credits!  Enjoy your yogurt!\\n\\n\";\n            }\n\n            else\n            {\n               cout &lt;&lt; \"Invalid input, please try processing your purchase again and enter a positive \"\n                    &lt;&lt; \"integer.\";\n            }\n         }\n      }\n\n      else if (userCommand[0] == 'S' || userCommand[0] == 's')\n      {\n         cout &lt;&lt; \"*Shutting down system*\\n\";\n\n         return 0;\n      }\n\n      else\n      {\n         cout &lt;&lt; \"*Error, please enter either P (for Process Purchase) or S (for Shutdown System)*\\n\\n\";\n      }\n\n   }\n}\n</code></pre>\n"}, {"tags": ["c++", "clang"], "comments": [{"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 2, "creation_date": 1453930710, "post_id": 35048538, "comment_id": 57821286, "body": "Read the wording: &quot;performance warning&quot;. It&#39;s just warning you that this may be somewhat slower/more expensive than you might expect."}, {"owner": {"reputation": 4154, "user_id": 47901, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/cd9a4d9773969ea82ebc006443b3955b?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas Meijer", "link": "https://stackoverflow.com/users/47901/lucas-meijer"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 3, "creation_date": 1453930782, "post_id": 35048538, "comment_id": 57821331, "body": "performance degradation is a bug too :)   can you think of a real world case where you have a unnecissery performance degradation that this warning would point out?"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 1, "creation_date": 1453930831, "post_id": 35048538, "comment_id": 57821357, "body": "If you haven&#39;t found it already, <a href=\"http://stackoverflow.com/questions/206564/what-is-the-performance-implication-of-converting-to-bool-in-c\">this question</a> may be of some interest to you. The first answer seems to indicate that &quot;performance warning&quot; isn&#39;t quite what the warning is intended to point out, anymore."}, {"owner": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "edited": false, "score": 0, "creation_date": 1453931501, "post_id": 35048538, "comment_id": 57821745, "body": "This conversion should normally not need to result in performance degradation, it could in many cases be a no-op, because the implementation is not required to represent a <code>bool</code> as one or zero. The requirement of clamping the value only arises if you cast it back to int or compares <code>bool</code>s - which should be quite rare."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1453931977, "post_id": 35048538, "comment_id": 57822023, "body": "As the warning message told you, it is not about a potential bug, but rather a <i>performance</i> warning."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1453932168, "post_id": 35048538, "comment_id": 57822127, "body": "Maybe clang is smart enough that it will translate the code to <code>bool j = false;</code> at compile-time, whereas for the MS compiler it is a runtime issue"}], "answers": [{"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 3, "last_activity_date": 1453931717, "creation_date": 1453931717, "answer_id": 35048821, "question_id": 35048538, "link": "https://stackoverflow.com/questions/35048538/does-c4800-have-any-real-world-value/35048821#35048821", "title": "Does C4800 have any real world value?", "body": "<p>Basically, this is just warning you that you've converting some other integer type to a <code>bool</code>, and this conversion isn't entirely free.</p>\n\n<p>It's mostly present (at least as I see things) to warn that you're mixing <code>bool</code>s with other integer types, which not only leads to a minor reduction in performance, but may also indicate some confusion in the code. Looking at the code in the question:</p>\n\n<pre><code>  int i = 0;\n\n // try..\n // bool i = 0;\n\n  bool j = i;   // C4800\n  j++;\n</code></pre>\n\n<p>...what we have <em>looks</em> like an incomplete conversion of some code that previously defined <code>j</code> to be of type <code>int</code>. The definition of <code>j</code> has been edited so it's now of type <code>bool</code>, but we're still assigning it a value from an <code>int</code>, and (worse) using a post-increment on it, both of which would make sense if <code>j</code> had type <code>int</code>, but really don't with <code>j</code> having type <code>bool</code>.</p>\n\n<p>So, the question is whether what we really wanted to assign <code>j</code> with the result of a comparison: <code>bool j = (i != 0);</code> or maybe a more complete conversion that would turn <code>i</code> into a <code>bool</code> as well:</p>\n\n<pre><code>bool i = false;\n\n// ...\nbool j = i; // no warning\n\nj = true;   // cleaner way of producing the same result as the post-increment.\n</code></pre>\n"}], "owner": {"reputation": 4154, "user_id": 47901, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/cd9a4d9773969ea82ebc006443b3955b?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas Meijer", "link": "https://stackoverflow.com/users/47901/lucas-meijer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1453931717, "creation_date": 1453930624, "question_id": 35048538, "link": "https://stackoverflow.com/questions/35048538/does-c4800-have-any-real-world-value", "title": "Does C4800 have any real world value?", "body": "<p>The C4800 warning in the microsoft c++ compiler as described here:</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/b6801kcy.aspx\" rel=\"noreferrer\">https://msdn.microsoft.com/en-us/library/b6801kcy.aspx</a></p>\n\n<p>makes this code:</p>\n\n<pre><code>// C4800.cpp\n// compile with: /W3\nint main() {\n  int i = 0;\n\n // try..\n // bool i = 0;\n\n  bool j = i;   // C4800\n  j++;\n}\n</code></pre>\n\n<p>throw the C4800 warning: \"'type' : forcing value to bool 'true' or 'false' (performance warning)\"</p>\n\n<p>Microsoft seems to think it's reasonably important, and has it as a Level3 warning, however Clang does apparently think it's not, as has zero complaints about it at -Weverything, its maximum warning level.</p>\n\n<p>Is there any real world bug someone can come up with that C4800 would point out that would make it worth having it enabled?</p>\n"}, {"tags": ["c++", "c", "visual-studio", "windows-ce", "poco-libraries"], "answers": [{"comments": [{"owner": {"reputation": 1830, "user_id": 1836314, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/de3c226fadd10d60dcde907f836efc6a?s=128&d=identicon&r=PG", "display_name": "matpop", "link": "https://stackoverflow.com/users/1836314/matpop"}, "edited": false, "score": 0, "creation_date": 1454692490, "post_id": 35223200, "comment_id": 58174202, "body": "Thank you very much for your feedback. That&#39;s exactly what I thought too, but I&#39;m unable to find problems in my include paths. There seems to be no reference to the Windows SDK inside <b>Options &gt; Projects and Solutions &gt; VC++ Directories &gt; <i>my platform</i></b>, all the include paths seem to be ok and there&#39;s no additional include path inside the foundation vcproj apart from <code>.\\include</code>"}, {"owner": {"reputation": 624, "user_id": 3087117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79a2251e4c9eedce40264e2e7d5ca9d9?s=128&d=identicon&r=PG&f=1", "display_name": "Julien Ruffin", "link": "https://stackoverflow.com/users/3087117/julien-ruffin"}, "reply_to_user": {"reputation": 1830, "user_id": 1836314, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/de3c226fadd10d60dcde907f836efc6a?s=128&d=identicon&r=PG", "display_name": "matpop", "link": "https://stackoverflow.com/users/1836314/matpop"}, "edited": false, "score": 1, "creation_date": 1455010237, "post_id": 35223200, "comment_id": 58286728, "body": "The only remaining place I can imagine Visual Studio getting this header path from is the INCLUDE environment variable. You might want to check it. Outside of that, and having built the very same version, I cannot figure out from where the project would otherwise get that path..."}], "tags": [], "owner": {"reputation": 624, "user_id": 3087117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79a2251e4c9eedce40264e2e7d5ca9d9?s=128&d=identicon&r=PG&f=1", "display_name": "Julien Ruffin", "link": "https://stackoverflow.com/users/3087117/julien-ruffin"}, "is_accepted": false, "score": 1, "last_activity_date": 1454672123, "creation_date": 1454672123, "answer_id": 35223200, "question_id": 35048405, "link": "https://stackoverflow.com/questions/35048405/build-poco-c-for-wince-winbase-h-related-errors/35223200#35223200", "title": "Build POCO C++ for WinCE: winbase.h related errors", "body": "<p>Something is off with either your SDK or the include paths you are using. A CE build should never use anything under <code>C:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\\</code>; these are headers of the desktop Windows SDK. The <code>winbase.h</code> used by your build should be from the device's SDK headers unter <code>c:\\Program Files (x86)\\Windows CE Tools\\SDKs\\[platform name]\\Include\\[architecture]\\</code>.</p>\n\n<p>You should check whether the desktop Windows SDK headers are somewhere in your include paths and remove them accordingly. Since CppUnit seems to be building correctly and assuming you can successfully build other software with the same device SDK, the first place to look for them would be in Foundation_CE_vs90.vcproj.</p>\n"}, {"tags": [], "owner": {"reputation": 483, "user_id": 3870069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a658b0d752c6f825bd0f70a71420e065?s=128&d=identicon&r=PG&f=1", "display_name": "Hawkez", "link": "https://stackoverflow.com/users/3870069/hawkez"}, "is_accepted": false, "score": 1, "last_activity_date": 1457536545, "last_edit_date": 1457536545, "creation_date": 1457468945, "answer_id": 35877383, "question_id": 35048405, "link": "https://stackoverflow.com/questions/35048405/build-poco-c-for-wince-winbase-h-related-errors/35877383#35877383", "title": "Build POCO C++ for WinCE: winbase.h related errors", "body": "<p>One possibility is that an include path exists for the Windows SDK 6.0A in the VC++ Directories.</p>\n\n<ol>\n<li>In Visual Studio go to Tools>Options>Projects and Solutions> VC++ Directories</li>\n<li>Select your device platform in the \"Platform\" drop-down box at the top</li>\n<li>Select \"Include files\" in the \"Show directories for\" drop-down box.</li>\n<li>If there is a path to the Windows 6.0A SDK or any other SDK remove it.</li>\n<li>Add the path to the SDK for your device i.e.:C:\\Program Files (x86)\\Windows CE Tools\\SDKs\\[Your Platform SDK]\\Include\\[Your chip architecture]\\</li>\n</ol>\n\n<p>There may be some variation in the SDK directory as that is dependent on the SDK installer and your choices during install.</p>\n\n<p>This may have happened if you installed or worked on a regular Windows SDK.  That is what happened to me.</p>\n\n<p>Also, there may be an issue with the library files as well.  In step 3 above choose \"Library files\" and make matching changes.</p>\n"}], "owner": {"reputation": 1830, "user_id": 1836314, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/de3c226fadd10d60dcde907f836efc6a?s=128&d=identicon&r=PG", "display_name": "matpop", "link": "https://stackoverflow.com/users/1836314/matpop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 690, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1463447101, "creation_date": 1453930110, "last_edit_date": 1454257516, "question_id": 35048405, "link": "https://stackoverflow.com/questions/35048405/build-poco-c-for-wince-winbase-h-related-errors", "title": "Build POCO C++ for WinCE: winbase.h related errors", "body": "<p>I'm trying to build POCO 1.6.1 C++ libraries from Visual Studio 2008 Command Prompt (VS 9.0 Professional SP1 with Windows Embedded Compact 7 ATL Update) on Windows 7 Pro x64 using the provided <code>buildwin.cmd</code> like this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>buildwin 90 build static_mt both WinCE samples\n</code></pre>\n\n<p>However the build of the Foundation library (<code>Foundation_CE_vs90.vcproj</code>) fails due to several errors in <code>C:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\\winbase.h</code>, apparently needed for the following files:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>wce_winbase.c\nwce_path.c\nwce_directorymanagement.c\nwce_clock.c\n</code></pre>\n\n<p>The file <code>wce_rewind.c</code> also seems to be somewhat buggy itself.<br>\nSomething trivial is probably going on but I just can't find it out. Here's attached some relevant part of the output (the target <code>Beckhoff_HMI_700 (x86)</code> is a Windows Embedded Compact 7 device of my interest, whose SDK appears to be correctly configured on my machine - I can provide more detail about that if needed). Many thanks everybody.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Setting environment for using Microsoft Visual Studio 2008 x86 tools.\n\n\n########################################################################\n####\n#### STARTING VISUAL STUDIO BUILD (vs90, WinCE)\n####\n########################################################################\n\n\nThe following configurations will be built:\ndebug_static_mt\nrelease_static_mt\n\n++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n++++ Building [CppUnit_CE_vs90.vcproj]\n++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n\n\nMicrosoft (R) Visual Studio Version 9.0.30729.1.\nCopyright (C) Microsoft Corp. All rights reserved.\n1&gt;------ Build started: Project: CppUnit, Configuration: debug_static_mt Beckhoff_HMI_700 (x86) ------\n1&gt;Compiling...\n1&gt;TextTestResult.cpp\n1&gt;TestSuite.cpp\n1&gt;TestRunner.cpp\n1&gt;TestResult.cpp\n1&gt;TestFailure.cpp\n1&gt;TestDecorator.cpp\n1&gt;TestCase.cpp\n1&gt;Generating Code...\n1&gt;Compiling...\n1&gt;CppUnitException.cpp\n1&gt;Creating library...\n1&gt;Build log was saved at \"file://c:\\poco-1.6.1\\CppUnit\\obj\\Beckhoff_HMI_700 (x86)\\debug_static_mt\\BuildLog.htm\"\n1&gt;CppUnit - 0 error(s), 0 warning(s)\n========== Build: 1 succeeded, 0 failed, 0 up-to-date, 0 skipped ==========\n\n\n\n\nMicrosoft (R) Visual Studio Version 9.0.30729.1.\nCopyright (C) Microsoft Corp. All rights reserved.\n1&gt;------ Build started: Project: CppUnit, Configuration: release_static_mt Beckhoff_HMI_700 (x86) ------\n1&gt;Compiling...\n1&gt;TextTestResult.cpp\n1&gt;TestSuite.cpp\n1&gt;TestRunner.cpp\n1&gt;TestResult.cpp\n1&gt;TestFailure.cpp\n1&gt;TestDecorator.cpp\n1&gt;TestCase.cpp\n1&gt;Generating Code...\n1&gt;Compiling...\n1&gt;CppUnitException.cpp\n1&gt;Creating library...\n1&gt;Build log was saved at \"file://c:\\poco-1.6.1\\CppUnit\\obj\\Beckhoff_HMI_700 (x86)\\release_static_mt\\BuildLog.htm\"\n1&gt;CppUnit - 0 error(s), 0 warning(s)\n========== Build: 1 succeeded, 0 failed, 0 up-to-date, 0 skipped ==========\n\n\n\n\n------------------------------------------------------------------------\n------------------------------------------------------------------------\n---- Done building [CppUnit_CE_vs90.vcproj]\n------------------------------------------------------------------------\n------------------------------------------------------------------------\n\n\n++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n++++ Building [Foundation_CE_vs90.vcproj]\n++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n\n\nMicrosoft (R) Visual Studio Version 9.0.30729.1.\nCopyright (C) Microsoft Corp. All rights reserved.\n1&gt;------ Build started: Project: Foundation, Configuration: debug_static_mt Beckhoff_HMI_700 (x86) ------\n1&gt;Compiling...\n1&gt;Base32Decoder.cpp\n1&gt;VarIterator.cpp\n1&gt;VarHolder.cpp\n1&gt;Var.cpp\n1&gt;Void.cpp\n1&gt;StringTokenizer.cpp\n1&gt;DirectoryIteratorStrategy.cpp\n1&gt;NumericString.cpp\n1&gt;String.cpp\n1&gt;SortedDirectoryIterator.cpp\n1&gt;RefCountedObject.cpp\n1&gt;NumberParser.cpp\n1&gt;NumberFormatter.cpp\n1&gt;NestedDiagnosticContext.cpp\n1&gt;MemoryPool.cpp\n1&gt;FPEnvironment.cpp\n1&gt;Format.cpp\n1&gt;Exception.cpp\n1&gt;Error.cpp\n1&gt;Environment.cpp\n1&gt;Generating Code...\n1&gt;Compiling...\n1&gt;Debugger.cpp\n1&gt;Checksum.cpp\n1&gt;ByteOrder.cpp\n1&gt;Bugcheck.cpp\n1&gt;AtomicCounter.cpp\n1&gt;Generating Code...\n1&gt;Compiling...\n1&gt;wce_winbase.c\n1&gt;C:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\\winbase.h(238) : error C2016: C requires that a struct or union has at least one member\n1&gt;C:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\\winbase.h(238) : error C2061: syntax error : identifier 'ULONG_PTR'\n1&gt;C:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\\winbase.h(239) : error C2061: syntax error : identifier 'InternalHigh'\n1&gt;C:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\\winbase.h(239) : error C2059: syntax error : ';'\n1&gt;C:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\\winbase.h(242) : error C2016: C requires that a struct or union has at least one member\n1&gt;C:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\\winbase.h(242) : error C2061: syntax error : identifier 'DWORD'\n\n[...]\n\n1&gt;C:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\\winbase.h(418) : error C2061: syntax error : identifier 'VOID'\n1&gt;C:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\\winbase.h(418) : fatal error C1003: error count exceeds 100; stopping compilation\n1&gt;wce_unlink.c\n1&gt;wce_timesys.c\n1&gt;wce_time.c\n1&gt;wce_strerror.c\n1&gt;wce_stat.c\n1&gt;wce_setlocale.c\n1&gt;wce_rmdir.c\n1&gt;wce_rewind.c\n1&gt;.\\wcelibcex-1.0\\src\\wce_rewind.c(64) : error C2143: syntax error : missing ')' before '*'\n1&gt;.\\wcelibcex-1.0\\src\\wce_rewind.c(64) : error C2143: syntax error : missing '{' before '*'\n1&gt;.\\wcelibcex-1.0\\src\\wce_rewind.c(64) : error C2059: syntax error : ')'\n1&gt;.\\wcelibcex-1.0\\src\\wce_rewind.c(65) : error C2054: expected '(' to follow 'fp'\n1&gt;wce_rename.c\n1&gt;wce_path.c\n1&gt;C:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\\winbase.h(238) : error C2016: C requires that a struct or union has at least one member\n\n[...]\n\n1&gt;C:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\\winbase.h(436) : fatal error C1003: error count exceeds 100; stopping compilation\n1&gt;wce_mktime.c\n1&gt;wce_mkdir.c\n1&gt;wce_localtime.c\n1&gt;wce_lfind.c\n1&gt;wce_gettimeofday.c\n1&gt;wce_getopt.c\n1&gt;wce_getenv.c\n1&gt;wce_findfile.c\n1&gt;wce_errno.c\n1&gt;Generating Code...\n1&gt;Compiling...\n1&gt;wce_directorymanagement.c\n1&gt;C:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\\winbase.h(238) : error C2016: C requires that a struct or union has at least one member\n\n[...]\n\n1&gt;C:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\\winbase.h(418) : fatal error C1003: error count exceeds 100; stopping compilation\n1&gt;wce_ctime.c\n1&gt;wce_clock.c\n1&gt;C:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\\winbase.h(238) : error C2016: C requires that a struct or union has at least one member\n\n[...]\n\n1&gt;C:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\include\\winbase.h(418) : fatal error C1003: error count exceeds 100; stopping compilation\n1&gt;wce_bsearch.c\n1&gt;wce_asctime.c\n1&gt;.\\wcelibcex-1.0\\src\\wce_asctime.c(124) : warning C4013: 'sprintf' undefined; assuming extern returning int\n1&gt;wce_access.c\n1&gt;.\\wcelibcex-1.0\\src\\wce_access.c(67) : error C2065: 'SFGAO_READONLY' : undeclared identifier\n1&gt;wce_abort.c\n1&gt;Generating Code...\n1&gt;Compiling...\n1&gt;HashStatistic.cpp\n1&gt;Hash.cpp\n1&gt;EventArgs.cpp\n1&gt;TaskNotification.cpp\n1&gt;TaskManager.cpp\n\n[...]\n\n1&gt;pcre_exec.c\n1&gt;pcre_compile.c\n1&gt;Generating Code...\n1&gt;Compiling...\n1&gt;pcre_chartables.c\n1&gt;Generating Code...\n1&gt;Compiling...\n1&gt;RegularExpression.cpp\n1&gt;SharedLibrary.cpp\n1&gt;c:\\poco-1.6.1\\foundation\\src\\SharedLibrary_WIN32U.cpp(86) : error C3861: 'GetProcAddressW': identifier not found\n1&gt;Manifest.cpp\n1&gt;SHA1Engine.cpp\n1&gt;RandomStream.cpp\n\n[...]\n\n1&gt;Generating Code...\n1&gt;Compiling...\n1&gt;zutil.c\n1&gt;C:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\INCLUDE\\stdio.h(720) : error C2059: syntax error : '('\n1&gt;.\\src\\zutil.c(147) : error C2072: '_errno' : initialization of a function\n1&gt;trees.c\n1&gt;inftrees.c\n1&gt;inflate.c\n1&gt;inffast.c\n\n[...]\n\n1&gt;Base64Decoder.cpp\n1&gt;Base32Encoder.cpp\n1&gt;Generating Code...\n1&gt;Build log was saved at \"file://c:\\poco-1.6.1\\Foundation\\obj\\Foundation\\Beckhoff_HMI_700 (x86)\\debug_static_mt\\BuildLog.htm\"\n1&gt;Foundation - 416 error(s), 1 warning(s)\n2&gt;------ Build started: Project: TestSuite, Configuration: debug_static_mt Beckhoff_HMI_700 (x86) ------\n3&gt;------ Build started: Project: TestApp, Configuration: debug_static_mt Beckhoff_HMI_700 (x86) ------\n4&gt;------ Build started: Project: TestLibrary, Configuration: debug_static_mt Beckhoff_HMI_700 (x86) ------\n3&gt;Compiling...\n4&gt;Compiling...\n3&gt;TestApp_WINCE.cpp\n4&gt;TestLibrary.cpp\n2&gt;Compiling...\n2&gt;AnyTest.cpp\n2&gt;VarTest.cpp\n4&gt;TestPlugin.cpp\n4&gt;Generating Code...\n3&gt;Linking...\n4&gt;Linking...\n3&gt;LINK : fatal error LNK1181: cannot open input file 'PocoFoundationmtd.lib'\n4&gt;LINK : fatal error LNK1181: cannot open input file 'PocoFoundationmtd.lib'\n3&gt;Build log was saved at \"file://c:\\poco-1.6.1\\Foundation\\testsuite\\obj\\TestApp\\Beckhoff_HMI_700 (x86)\\debug_static_mt\\BuildLog.htm\"\n3&gt;TestApp - 1 error(s), 0 warning(s)\n4&gt;Build log was saved at \"file://c:\\poco-1.6.1\\Foundation\\testsuite\\obj\\TestLibrary\\Beckhoff_HMI_700 (x86)\\debug_static_mt\\BuildLog.htm\"\n4&gt;TestLibrary - 1 error(s), 0 warning(s)\n2&gt;DynamicTestSuite.cpp\n2&gt;SimpleHashTableTest.cpp\n2&gt;LinearHashTableTest.cpp\n2&gt;HashTableTest.cpp\n2&gt;HashSetTest.cpp\n1&gt;inffast.c\n\n[...]\n\n2&gt;ByteOrderTest.cpp\n2&gt;AutoReleasePoolTest.cpp\n2&gt;AutoPtrTest.cpp\n2&gt;ArrayTest.cpp\n2&gt;Generating Code...\n2&gt;Linking...\n2&gt;LINK : fatal error LNK1181: cannot open input file 'PocoFoundationmtd.lib'\n2&gt;Build log was saved at \"file://c:\\poco-1.6.1\\Foundation\\testsuite\\obj\\TestSuite\\Beckhoff_HMI_700 (x86)\\debug_static_mt\\BuildLog.htm\"\n2&gt;TestSuite - 1 error(s), 0 warning(s)\n========== Build: 0 succeeded, 4 failed, 0 up-to-date, 0 skipped ==========\n\n\nXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\nXXX  BUILD FAILED. EXITING. XXX\nXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\n</code></pre>\n"}, {"tags": ["c++", "algorithm", "3d", "pattern-matching", "unreal-engine4"], "comments": [{"owner": {"reputation": 47344, "user_id": 47984, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3149cf105b708746f1c4eb0a63a5c24?s=128&d=identicon&r=PG", "display_name": "j_random_hacker", "link": "https://stackoverflow.com/users/47984/j-random-hacker"}, "edited": false, "score": 0, "creation_date": 1453953918, "post_id": 35048333, "comment_id": 57829461, "body": "You&#39;re vague about exactly what should cause a given built structure to match a given template.  It&#39;s clear that subdividing some of the template&#39;s building blocks should not cause a mismatch.  It also <i>seems</i> that stretching &quot;through&quot; any particular plane (imagine slicing through the world and then pulling the two halves apart, then &quot;filling in&quot; matter between the original contact points) should not cause a mismatch -- correct?  What if your template is U-shaped, and one tip but not the other has been stretched?  If that would force a mismatch then I have an efficient solution for you."}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1453967013, "post_id": 35048333, "comment_id": 57834511, "body": "just a silly question: Do you HAVE TO use recognition from image (according to your task description)? If not I would use the structures in vector form directly (you need to have them stored anyway) which is a magnitude of less work and far faster/precise then 2D-&gt;3D pattern matching ... You just implement select,drag&amp;drop,align for your primitives ..."}], "answers": [{"tags": [], "owner": {"reputation": 335, "user_id": 3243751, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oGV4a.png?s=128&g=1", "display_name": "FLUXparticle", "link": "https://stackoverflow.com/users/3243751/fluxparticle"}, "is_accepted": false, "score": 0, "last_activity_date": 1453931319, "creation_date": 1453931319, "answer_id": 35048720, "question_id": 35048333, "link": "https://stackoverflow.com/questions/35048333/recognize-pattern-in-3d-environment/35048720#35048720", "title": "Recognize pattern in 3D environment", "body": "<p>I would write a function to check if a 1x1x1 area has a specific shape (full block, half block + rotation, edge block + rotation) and then define and check the pattern in this manner.</p>\n"}, {"comments": [{"owner": {"reputation": 1384, "user_id": 2916232, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OTZpa.jpg?s=128&g=1", "display_name": "Pavel P&#225;ja Halbich", "link": "https://stackoverflow.com/users/2916232/pavel-p%c3%a1ja-halbich"}, "edited": false, "score": 0, "creation_date": 1453980472, "post_id": 35053318, "comment_id": 57843193, "body": "I&#39;m sorry my question is not so complex in explanation I&#39;d like to. I think this doesn&#39;t solve my problem completely. As you can see from example, accepted structure has same dimensions. I vary only in parts of which that structure is built. So, for example, in a center, it doesn&#39;t matter, if you use 4 cubes (1,1,1), or 2 cubes (1,1,1) and one cuboid (2,1,1), or 2 cuboids (2,1,1) or i cuboid (2,2,2). They are only different construction of same pattern and they should be accepted. (Now, if you extend that to whole example shape, it should be much clearer)."}, {"owner": {"reputation": 47344, "user_id": 47984, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3149cf105b708746f1c4eb0a63a5c24?s=128&d=identicon&r=PG", "display_name": "j_random_hacker", "link": "https://stackoverflow.com/users/47984/j-random-hacker"}, "reply_to_user": {"reputation": 1384, "user_id": 2916232, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OTZpa.jpg?s=128&g=1", "display_name": "Pavel P&#225;ja Halbich", "link": "https://stackoverflow.com/users/2916232/pavel-p%c3%a1ja-halbich"}, "edited": false, "score": 0, "creation_date": 1454030397, "post_id": 35053318, "comment_id": 57873345, "body": "If that&#39;s all you need, then it&#39;s covered by the &quot;convert everything in both the built structure and the template to 1x1x1 blocks&quot; part of the algorithm (i.e., you don&#39;t need the part that collapses extruded regions)."}, {"owner": {"reputation": 1384, "user_id": 2916232, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OTZpa.jpg?s=128&g=1", "display_name": "Pavel P&#225;ja Halbich", "link": "https://stackoverflow.com/users/2916232/pavel-p%c3%a1ja-halbich"}, "edited": false, "score": 0, "creation_date": 1454051865, "post_id": 35053318, "comment_id": 57879810, "body": "I was thinking about it too, but I&#39;m afraid that it will be slow as hell, even if it will be written in C++."}, {"owner": {"reputation": 47344, "user_id": 47984, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3149cf105b708746f1c4eb0a63a5c24?s=128&d=identicon&r=PG", "display_name": "j_random_hacker", "link": "https://stackoverflow.com/users/47984/j-random-hacker"}, "reply_to_user": {"reputation": 1384, "user_id": 2916232, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OTZpa.jpg?s=128&g=1", "display_name": "Pavel P&#225;ja Halbich", "link": "https://stackoverflow.com/users/2916232/pavel-p%c3%a1ja-halbich"}, "edited": false, "score": 0, "creation_date": 1454064261, "post_id": 35053318, "comment_id": 57886891, "body": "Since whatever algorithm you decide on has to work in every case, including the case in which the both the template and the built structure are in fact made entirely out of individual 1x1x1 pieces, I don&#39;t see how this canonicalisation changes the worst-case time complexity."}], "tags": [], "owner": {"reputation": 47344, "user_id": 47984, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3149cf105b708746f1c4eb0a63a5c24?s=128&d=identicon&r=PG", "display_name": "j_random_hacker", "link": "https://stackoverflow.com/users/47984/j-random-hacker"}, "is_accepted": true, "score": 1, "last_activity_date": 1453957912, "creation_date": 1453957912, "answer_id": 35053318, "question_id": 35048333, "link": "https://stackoverflow.com/questions/35048333/recognize-pattern-in-3d-environment/35053318#35053318", "title": "Recognize pattern in 3D environment", "body": "<p>If every building block whose axes can be scaled can be subdivided into smaller 1x1x1 building blocks, and if the following conditions adequately describe whether a built structure should match a given template:</p>\n\n<ul>\n<li>Arbitrarily subdividing a template building block should not cause a mismatch</li>\n<li>Arbitrarily \"extruding through\" any axis-aligned plane (imagine slicing through the world in some axis-aligned plane and then pulling the two halves apart, while new matter continuously fills in the gaps between points that were originally touching) should not cause a mismatch</li>\n<li>Any other difference forces a mismatch</li>\n</ul>\n\n<p>then it should be possible to efficiently recognise built instances of a template structure in time O(b + t^2), where b is the voxel volume of the built structure and t is the (typically very small; see below) voxel volume of the template.  The basic idea is to transform any built structure into a canonical form in which any \"extruded range\" is compacted down to a single voxel in length.</p>\n\n<h2>Atomise then canonicalise</h2>\n\n<p>First, atomise all building blocks in the built structure down to their equivalent 1x1x1-building-block forms.  The next step, compacting extruded ranges, is essentially the same algorithm as for eliminating duplicates from a sorted list, but in 3D:</p>\n\n<ul>\n<li>For each axis d (X, Y, Z):\n\n<ul>\n<li>Set j = 1.</li>\n<li>For i from 1 to the maximum co-ord in axis d:\n\n<ul>\n<li>Is the planar voxel \"slice\" of the built structure at co-ord i on axis d (e.g., if d is Y, then the set of voxels (x, i, z) for all x and z) identical to the immediately preceding \"slice\" at co-ord i-1?\n\n<ul>\n<li>If not, copy the slice at co-ord i on top of the slice at co-ord j, and then increment j.</li>\n</ul></li>\n</ul></li>\n</ul></li>\n</ul>\n\n<p>This will produce a canonical version of the built structure in which all adjacent slices are different; typically this version will be much smaller, since all \"long\" features are collapsed to length 1.  The role of j here is to point to the earliest location where we can put the next non-identical slice.  Since j &lt;= i always, we never have to worry about overwriting a slice we haven't processed yet.  Also note that it doesn't matter in which order the directions are processed, the final result is the same.</p>\n\n<p>The same canonicalisation process should have been applied to each template structure at the outset as preprocessing.  Now the two canonical forms (template and built structure) can be compared directly via a brute-force voxel-by-voxel comparison (basically like <code>strstr()</code>, but looking for a cuboid inside a cuboid instead of a string inside a string).  Any rotations or flips that should be considered valid transformations should also be tried at this point.</p>\n\n<h2>Features and caveats</h2>\n\n<p>Given the template</p>\n\n<pre><code>X.X\nXXX\n</code></pre>\n\n<p>it will recognise e.g. the following as matches,</p>\n\n<pre><code>X.X\nX.X   XXX  XX\nX.X   XXXXXXX\nXXX   XXXXXXX\n</code></pre>\n\n<p>but not e.g.</p>\n\n<pre><code>X..\nX.X\nX.X\nXXX\n</code></pre>\n\n<p>But if you want to detect such U-shaped structures with different-length legs, you need only supply an additional template:</p>\n\n<pre><code>X..\nX.X\nXXX\n</code></pre>\n\n<p>This template will match all U-shaped structures with different-length legs (but <em>not</em> U-shaped structures with equal-length legs!).  Depending on which rotations you consider, you may also need the mirror image.</p>\n\n<hr>\n\n<p>Structures whose AABBs intersect won't be handled correctly.  These can be separated easily enough in a prior step.</p>\n\n<hr>\n\n<p>Interestingly enough, this algorithm is capable of recognising structures that comprise more than one connected component.  For example, the template</p>\n\n<pre><code>X.X.X\n</code></pre>\n\n<p>will recognise three equal-size cuboids in a row (or column, if rotations are allowed).</p>\n"}], "owner": {"reputation": 1384, "user_id": 2916232, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OTZpa.jpg?s=128&g=1", "display_name": "Pavel P&#225;ja Halbich", "link": "https://stackoverflow.com/users/2916232/pavel-p%c3%a1ja-halbich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 35053318, "answer_count": 2, "score": 0, "last_activity_date": 1453957912, "creation_date": 1453929892, "question_id": 35048333, "link": "https://stackoverflow.com/questions/35048333/recognize-pattern-in-3d-environment", "title": "Recognize pattern in 3D environment", "body": "<p>I'm currently developing 3rd person building game (as bacheleor thesis). I need to recognize constructed patterns co I can mark corresponding structure as some building (so player can start using that building).</p>\n\n<p>I have folowing rules:</p>\n\n<ul>\n<li>3 types of building blocks (all based on cube) (and in future there will be more types)</li>\n<li>any block can be scaled up to <strong>k</strong> multiple in each axis (<strong>k = 20</strong>)</li>\n<li>blocks can be rotated by any axis (but stays in 3D grid)</li>\n</ul>\n\n<blockquote>\n  <p><strong>Problem definition</strong>: \n  4 cubes of base size (1,1,1) in a grid 2x2 should be equivalent to 1\n  box size (2,2,1), so all possible variants (mainly different in rotation) could be evaluated as valid pattern construction.</p>\n</blockquote>\n\n<p>I expect that my patterns will be up to <strong>30x30x30</strong> multiple of base size. </p>\n\n<p>For example, I'd like to recognize structure like this: (<em>currently placed in level by hand</em>)\n<a href=\"https://i.stack.imgur.com/vvIdB.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vvIdB.jpg\" alt=\"target pattern structure\"></a>\nSize is 21x21x22 and it is constructed from multiple objects.</p>\n\n<p>As a limitation, I will border pattern search from exact point (lets say <em>control console</em> for that structure). Current limitation constant is around <strong>50x50x50</strong> multiple of base cube. (Limit is subject to change based on answers here.)</p>\n\n<p>I searched over 20hrs and result was only papers to recognize 3D structure from 2D image or recognize <strong>exact</strong> structure in 2D. </p>\n\n<blockquote>\n  <p>My problem is that with growing <strong>K(</strong> each <strong>X,Y,Z)</strong> there is exponencially growing number of structures, which should be accepted as correct pattern construction. </p>\n  \n  <p><strong>Question:</strong> What algorithm (+ heurestic) should I use? </p>\n</blockquote>\n\n<p>Following 3 images contains visualization of structures, that are considered as correct variant of pattern at image 4, thus they should be found and accepted.\n<a href=\"https://i.stack.imgur.com/zeUMH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zeUMH.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/tfy5n.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tfy5n.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/FruTq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FruTq.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/fik8H.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fik8H.png\" alt=\"enter image description here\"></a></p>\n\n<p>All together has same final shape (and has same material at same places). I simplified the problem only to 2D shape, but extending in 3D space is obvious.</p>\n\n<p>Thank you for all answers / comments.</p>\n"}, {"tags": ["android", "c++", "android-ndk", "broadcastreceiver", "sms"], "answers": [{"tags": [], "owner": {"reputation": 77347, "user_id": 1631193, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c713494416ceac454d71c524e15f1c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe Sechan", "link": "https://stackoverflow.com/users/1631193/gabe-sechan"}, "is_accepted": false, "score": 0, "last_activity_date": 1453929767, "creation_date": 1453929767, "answer_id": 35048291, "question_id": 35048146, "link": "https://stackoverflow.com/questions/35048146/how-to-run-native-code-on-recieving-sms-android/35048291#35048291", "title": "How to run native code on recieving sms android", "body": "<p>Create a Java BroadcastReceiver and have it call a native method to do all the work.  There's no benefit in not doing it the easy way just to claim \"no Java\".</p>\n"}], "owner": {"reputation": 21, "user_id": 3785390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9d181839160538bebaba79e7ea1781f?s=128&d=identicon&r=PG&f=1", "display_name": "swaraj jena", "link": "https://stackoverflow.com/users/3785390/swaraj-jena"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 267, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1453929767, "creation_date": 1453929313, "question_id": 35048146, "link": "https://stackoverflow.com/questions/35048146/how-to-run-native-code-on-recieving-sms-android", "title": "How to run native code on recieving sms android", "body": "<p>I am developing an android app completely native using only c++.</p>\n\n<p>But I am not able to find a way to run some native code ,when a sms arrives. In java I can do it through broadcast receiver .But not able to find any method for ndk.</p>\n\n<p>Or any suggestion how can i use broadcast receivers to run native code</p>\n"}, {"tags": ["c++", "g++"], "comments": [{"owner": {"reputation": 310, "user_id": 2302911, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/NDmaf.jpg?s=128&g=1", "display_name": "Dave", "link": "https://stackoverflow.com/users/2302911/dave"}, "edited": false, "score": 0, "creation_date": 1453929414, "post_id": 35048141, "comment_id": 57820527, "body": "I think you should post more of your code. Somewhere you declare the variable as a static variable"}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 2, "creation_date": 1453929453, "post_id": 35048141, "comment_id": 57820558, "body": "-fpermissive? No -Wall?"}, {"owner": {"reputation": 159, "user_id": 1426790, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/9c958c0dd5f4b0a65515bc8da93e018c?s=128&d=identicon&r=PG", "display_name": "kernelK", "link": "https://stackoverflow.com/users/1426790/kernelk"}, "edited": false, "score": 0, "creation_date": 1453929876, "post_id": 35048141, "comment_id": 57820813, "body": "I am not compiling for production, just testing my library linking. Otheriwse, yes, I would use -Wall"}, {"owner": {"reputation": 15468, "user_id": 321772, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c03247f45c9f291391b894375c2709ca?s=128&d=identicon&r=PG", "display_name": "Adam", "link": "https://stackoverflow.com/users/321772/adam"}, "edited": false, "score": 0, "creation_date": 1453929917, "post_id": 35048141, "comment_id": 57820838, "body": "I&#39;ll be that guy: GCC 4.4.7 is a 4 year old minor version of a 7 year old branch. There has been a lot of progress in both compilers and the C++ spec since then. I know it&#39;s hard to get an organization to update, and even harder to get recent compilers on CentOS, but you yourself point out that this problem only exists on the ancient compiler. Just update."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1453932453, "post_id": 35048141, "comment_id": 57822288, "body": "Names that contain two consecutive underscores (<code>__FFMpegPlayground__MyClass__</code>) and names that begin with an underscore followed by a capital letter are reserved to the implementation. Don&#39;t use them."}, {"owner": {"reputation": 159, "user_id": 1426790, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/9c958c0dd5f4b0a65515bc8da93e018c?s=128&d=identicon&r=PG", "display_name": "kernelK", "link": "https://stackoverflow.com/users/1426790/kernelk"}, "edited": false, "score": 0, "creation_date": 1453956172, "post_id": 35048141, "comment_id": 57830163, "body": "@Peter, good to know. That was actually generated by Xcode. Is there a link to that effect?"}], "answers": [{"comments": [{"owner": {"reputation": 159, "user_id": 1426790, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/9c958c0dd5f4b0a65515bc8da93e018c?s=128&d=identicon&r=PG", "display_name": "kernelK", "link": "https://stackoverflow.com/users/1426790/kernelk"}, "edited": false, "score": 0, "creation_date": 1453929919, "post_id": 35048309, "comment_id": 57820842, "body": "Ok, so I should move my initialization into my constructor then?"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 159, "user_id": 1426790, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/9c958c0dd5f4b0a65515bc8da93e018c?s=128&d=identicon&r=PG", "display_name": "kernelK", "link": "https://stackoverflow.com/users/1426790/kernelk"}, "edited": false, "score": 1, "creation_date": 1453929972, "post_id": 35048309, "comment_id": 57820873, "body": "@kernelK Either that, or use a newer compiler."}, {"owner": {"reputation": 159, "user_id": 1426790, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/9c958c0dd5f4b0a65515bc8da93e018c?s=128&d=identicon&r=PG", "display_name": "kernelK", "link": "https://stackoverflow.com/users/1426790/kernelk"}, "edited": false, "score": 0, "creation_date": 1453930920, "post_id": 35048309, "comment_id": 57821404, "body": "Ok, this is a link to getting a newer GCC up and running on CentOS 6   <a href=\"http://superuser.com/questions/381160/how-to-install-gcc-4-7-x-4-8-x-on-centos\" title=\"how to install gcc 4 7 x 4 8 x on centos\">superuser.com/questions/381160/&hellip;</a>"}], "tags": [], "owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "is_accepted": true, "score": 2, "last_activity_date": 1453929817, "creation_date": 1453929817, "answer_id": 35048309, "question_id": 35048141, "link": "https://stackoverflow.com/questions/35048141/error-when-compiling-cpp-file-with-g/35048309#35048309", "title": "Error when compiling cpp file with g++", "body": "<p>In-class initializers for non-static members like</p>\n\n<pre><code>AVFormatContext   *pFormatCtx = NULL;\n</code></pre>\n\n<p>are a C++11 feature. gcc4.4 is too old for that.</p>\n"}], "owner": {"reputation": 159, "user_id": 1426790, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/9c958c0dd5f4b0a65515bc8da93e018c?s=128&d=identicon&r=PG", "display_name": "kernelK", "link": "https://stackoverflow.com/users/1426790/kernelk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 658, "favorite_count": 0, "accepted_answer_id": 35048309, "answer_count": 1, "score": 1, "last_activity_date": 1453929825, "creation_date": 1453929286, "last_edit_date": 1453929825, "question_id": 35048141, "link": "https://stackoverflow.com/questions/35048141/error-when-compiling-cpp-file-with-g", "title": "Error when compiling cpp file with g++", "body": "<p>I have a CentOS 7 install running GCC 4.8.5 and I can successfully compile a cpp file named MyClass. I use the following command to compile the file:</p>\n\n<pre><code>g++ -c -fpermissive  $(pkg-config --cflags --libs libavformat libavcodec libswscale libavutil) ./MyClass.cpp\n</code></pre>\n\n<p>When I run this command on a Centos 6.7 running GCC 4.4.7, I get the following error:</p>\n\n<pre><code>In file included from ./MyClass.cpp:9:\n./MyClass.h:70: warning: ISO C++ forbids initialization of member \u2018pFormatCtx\u2019\n./MyClass.h:70: warning: making \u2018pFormatCtx\u2019 static\n./MyClass.h:70: error: invalid in-class initialization of static data member of non-integral type \u2018AVFormatContext*\u2019\n</code></pre>\n\n<p>In my MyClass.h file, I have a private variable:</p>\n\n<pre><code>AVFormatContext   *pFormatCtx = NULL;\n</code></pre>\n\n<p>This error is repeated for any of the private variables that I initialize to NULL.</p>\n\n<p>Is there an explanation for the difference I am encountering between my two CentOS installs?</p>\n\n<p>This is the complete class:</p>\n\n<pre><code>    //\n//  MyClass.h\n//  FFMpegPlayground\n//\n\n#ifndef __FFMpegPlayground__MyClass__\n#define __FFMpegPlayground__MyClass__\n\n#include &lt;stdio.h&gt;\n\n#ifndef INT64_C\n#define INT64_C(c) (c ## LL)\n#define UINT64_C(c) (c ## ULL)\n#endif\n\n#ifdef __cplusplus\n#define __STDINT_MACROS\n#endif\n\nextern \"C\" {\n#include &lt;libavformat/avformat.h&gt;\n#include &lt;libavcodec/avcodec.h&gt;\n#include &lt;libswscale/swscale.h&gt;\n#include &lt;libavutil/frame.h&gt;\n}\n\ntypedef enum {\n    K_STATUS_OK = 0,\n    K_CANT_OPEN_FILE = -1,\n    K_NO_STREAM_INFO = -2,\n    K_NO_VIDEO_STREAM = -3,\n    K_CODEC_UNSUPPORTED = -4,\n    K_CANT_COPY_CODEC = -5,\n    K_CANT_OPEN_CODEC = -6,\n    K_CANT_ALLOCATE_FRAME = -7,\n    K_SEEK_FAILED = -8,\n    K_UNABLE_TO_ACQUIRE_FRAME = -9\n} MyClassStatus;\n\nclass MyClass{\npublic:\n    MyClass();\n    MyClass(const char * filePath);\n    MyClass(const char * filePath, double nScale);\n    ~MyClass();\n\n    MyClassStatus getStatus();\n    void seekToFrame(int frame);\n    uint8_t* frameData();\n    uint8_t* nextFrameData();\n    uint8_t* copyOfNextFrameData();\n    int getFrameHeight();\n    int getFrameWidth();\n    int getCurrentFrame();\n    int getFrameDataSize();\n    long long getNumberOfFrames();\n\nprivate:\n\n    bool fileIsLoaded;\n    uint8_t* createFrame();\n    int currentFrame;\n\n    void internalSeekToFrame(int frame);\n\n    MyClassStatus status;\n    AVFormatContext   *pFormatCtx = NULL;\n    int               i, videoStream;\n    AVCodecContext    *pCodecCtxOrig = NULL;\n    AVCodecContext    *pCodecCtx = NULL;\n    AVCodec           *pCodec = NULL;\n    AVFrame           *pFrame = NULL;\n    AVFrame           *pFrameRGB = NULL;\n    int               numBytes;\n    uint8_t           *buffer = NULL;\n    struct SwsContext *sws_ctx = NULL;\n    uint8_t           *_createdFrameData = NULL;\n\n\n    double preferredScale = 1.0;\n};\n\n#endif /* defined(__FFMpegPlayground__MyClass__) */\n</code></pre>\n"}, {"tags": ["c++", "ios", "xcode", "unit-testing", "opengl"], "comments": [{"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1453930836, "post_id": 35048039, "comment_id": 57821359, "body": "Add the OpenGL framework to your unit test target."}, {"owner": {"reputation": 1645, "user_id": 4869914, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/94e94ff39b0e876b5edd59dd8ee58c48?s=128&d=identicon&r=PG&f=1", "display_name": "keyboard", "link": "https://stackoverflow.com/users/4869914/keyboard"}, "reply_to_user": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1453932668, "post_id": 35048039, "comment_id": 57822399, "body": "I did, doesn&#39;t work."}], "owner": {"reputation": 1645, "user_id": 4869914, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/94e94ff39b0e876b5edd59dd8ee58c48?s=128&d=identicon&r=PG&f=1", "display_name": "keyboard", "link": "https://stackoverflow.com/users/4869914/keyboard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 517, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1453932786, "creation_date": 1453928958, "last_edit_date": 1453932786, "question_id": 35048039, "link": "https://stackoverflow.com/questions/35048039/xcode-units-tests-cant-find-header-file-import-opengl-gl-h", "title": "Xcode Units Tests can&#39;t find header file - #import &lt;OpenGL/gl.h&gt;", "body": "<p>I'm using Xcode Unit Tests which import a file that tries to import the OpenGL headers like this:</p>\n\n<pre><code>#import &lt;OpenGL/gl.h&gt;\n#import &lt;OpenGL/glu.h&gt;\n#import &lt;OpenGL/glext.h&gt;\n</code></pre>\n\n<p>Unfortunately, it can't find these files. If I try to import them in the Unit Test files directly they are also not found.</p>\n\n<p>In my actual app (both for iOS and Mac OS), everything works fine.</p>\n\n<p>I've probably read all posts here and tried everything I found on Google, but no luck yet. Also full clean, rebuild, restart, etc. does not work.</p>\n\n<p>I hope somebody has an idea.</p>\n\n<p>EDIT: Some more things that I tried without any luck:</p>\n\n<ul>\n<li>Adding OpenGL Framework to the Test target </li>\n<li>Adding the location of the OpenGL Framework as a search path. I tried UserHeader Search path, framework search path and the regular header search path</li>\n</ul>\n"}, {"tags": ["c++", "windows-xp", "visual-studio-2015"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1453928750, "post_id": 35047957, "comment_id": 57820142, "body": "Did you want a Win32 app or a console app?"}, {"owner": {"reputation": 438, "user_id": 2274765, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/6KOV5.jpg?s=128&g=1", "display_name": "Reign of Error", "link": "https://stackoverflow.com/users/2274765/reign-of-error"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1453928809, "post_id": 35047957, "comment_id": 57820170, "body": "Just console for now (my current test program simply sends the string &quot;Testing&quot; to cout)."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1453928911, "post_id": 35047957, "comment_id": 57820222, "body": "When you created the project did you select Win32 Console Application?"}, {"owner": {"reputation": 438, "user_id": 2274765, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/6KOV5.jpg?s=128&g=1", "display_name": "Reign of Error", "link": "https://stackoverflow.com/users/2274765/reign-of-error"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1453929039, "post_id": 35047957, "comment_id": 57820284, "body": "I selected &quot;Empty Project&quot; (although the resulting executable runs as a console application on Windows 7)."}, {"owner": {"reputation": 197, "user_id": 7150888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efdd8478f135ceddd8514d6c020cad46?s=128&d=identicon&r=PG&f=1", "display_name": "LPVOID", "link": "https://stackoverflow.com/users/7150888/lpvoid"}, "edited": false, "score": 0, "creation_date": 1592166570, "post_id": 35047957, "comment_id": 110320928, "body": "I&#39;m having the same issue... Any advice?"}], "owner": {"reputation": 438, "user_id": 2274765, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/6KOV5.jpg?s=128&g=1", "display_name": "Reign of Error", "link": "https://stackoverflow.com/users/2274765/reign-of-error"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1783, "favorite_count": 2, "answer_count": 0, "score": 3, "last_activity_date": 1467811159, "creation_date": 1453928681, "last_edit_date": 1495540813, "question_id": 35047957, "link": "https://stackoverflow.com/questions/35047957/visual-studio-2015-building-with-the-windows-xp-toolset-selected-still-results", "title": "Visual Studio 2015: building with the Windows XP toolset selected still results in &quot;not a valid win32 application&quot; error on XP", "body": "<p>Visual Studio 2015 supports building C++ programs for Windows XP. According to the article <a href=\"https://msdn.microsoft.com/en-us/library/jj851139%28v=vs.140%29.aspx\" rel=\"nofollow noreferrer\"><em>Configuring C++11 Programs for Windows XP</em></a>, enabling this support is simply a matter of selecting the appropriate platform toolset in the project properties.</p>\n\n<p>This does not work in my case. A simple \"hello world\" program written in C++ and compiled in Visual Studio Community 2015 (version 14.0.24720.00 Update 1) with the platform toolset set to <code>Visual Studio 2015 - Windows XP (v140_xp)</code> and the platform set to x86/Win32 generates the generic \"[name of executable] is not a valid Win32 application\" error when run on a Windows XP computer.</p>\n\n<p>Any suggestions would be appreciated. I've found a number of questions about similar issues (<a href=\"https://stackoverflow.com/questions/34488549/targetting-windows-xp-from-visual-studio-2015-enterprise-update-1\">like</a> <a href=\"https://stackoverflow.com/questions/11305633/xxxxxx-exe-is-not-a-valid-win32-application\">these</a> <a href=\"https://stackoverflow.com/questions/32434511/fatal-error-on-windows-xp-when-compiled-with-xp-targeting-in-visual-studio-2015\">three</a>), but nothing helpful yet.</p>\n"}, {"tags": ["c++", "inline"], "answers": [{"comments": [{"owner": {"reputation": 913, "user_id": 360645, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/492a193e46645e1df7a4957bd049b9e4?s=128&d=identicon&r=PG", "display_name": "bsobaid", "link": "https://stackoverflow.com/users/360645/bsobaid"}, "edited": false, "score": 0, "creation_date": 1453930227, "post_id": 35047814, "comment_id": 57821018, "body": "does the same apply to member funciton pointer? because member function pointer are initialized to more than 1 possible values that are only know at run time. so regardless of that, a member function pointer can be inlined?"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 913, "user_id": 360645, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/492a193e46645e1df7a4957bd049b9e4?s=128&d=identicon&r=PG", "display_name": "bsobaid", "link": "https://stackoverflow.com/users/360645/bsobaid"}, "edited": false, "score": 0, "creation_date": 1453930482, "post_id": 35047814, "comment_id": 57821140, "body": "@bsobaid Are you asking whether or not a function called through a function pointer will be inlined? For that to happen, the function pointer itself must be known at compile time, how else is the compiler to know which function to inline?"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 913, "user_id": 360645, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/492a193e46645e1df7a4957bd049b9e4?s=128&d=identicon&r=PG", "display_name": "bsobaid", "link": "https://stackoverflow.com/users/360645/bsobaid"}, "edited": false, "score": 0, "creation_date": 1453931008, "post_id": 35047814, "comment_id": 57821457, "body": "@bsobaid If you are asking whether member functions will be inlined if <code>this</code> is not known at compile time: Yes. (Except virtuals, except that gets divirtualized...)"}, {"owner": {"reputation": 913, "user_id": 360645, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/492a193e46645e1df7a4957bd049b9e4?s=128&d=identicon&r=PG", "display_name": "bsobaid", "link": "https://stackoverflow.com/users/360645/bsobaid"}, "edited": false, "score": 0, "creation_date": 1453931303, "post_id": 35047814, "comment_id": 57821637, "body": "you declare your member function pointer and assign it a value in some other function based on some conditional statement. if (condition1) then class1::*functPtr = &amp;funcA else class1::*functPtr = &amp;funcB"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 913, "user_id": 360645, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/492a193e46645e1df7a4957bd049b9e4?s=128&d=identicon&r=PG", "display_name": "bsobaid", "link": "https://stackoverflow.com/users/360645/bsobaid"}, "edited": false, "score": 0, "creation_date": 1453931466, "post_id": 35047814, "comment_id": 57821725, "body": "@bsobaid In general No, but maybe to some point. (If I understood that correctly.) If you want to learn more on that, you should post it as a new question."}], "tags": [], "owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "is_accepted": false, "score": 3, "last_activity_date": 1453928172, "creation_date": 1453928172, "answer_id": 35047814, "question_id": 35047749, "link": "https://stackoverflow.com/questions/35047749/c-function-inling-decided-at-compile-time/35047814#35047814", "title": "c++ function inling decided at compile time", "body": "<p>Inlining has nothing to do with the function input being known at compile time.</p>\n"}, {"tags": [], "owner": {"reputation": 27, "user_id": 5813598, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nIUh6.jpg?s=128&g=1", "display_name": "zargothrax", "link": "https://stackoverflow.com/users/5813598/zargothrax"}, "is_accepted": false, "score": 0, "last_activity_date": 1453928294, "creation_date": 1453928294, "answer_id": 35047853, "question_id": 35047749, "link": "https://stackoverflow.com/questions/35047749/c-function-inling-decided-at-compile-time/35047853#35047853", "title": "c++ function inling decided at compile time", "body": "<p>The fact that <code>m_InputState</code> is not known does not stop <code>Calling()</code> from being inlined.</p>\n\n<p>Typically, if you want a function to be inlinable, it has to be declared in the same .cpp file that it is called in (no function prototypes).  This depends a bit on the compiler though.</p>\n"}, {"tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": true, "score": 1, "last_activity_date": 1453933622, "last_edit_date": 1453933622, "creation_date": 1453929030, "answer_id": 35048066, "question_id": 35047749, "link": "https://stackoverflow.com/questions/35047749/c-function-inling-decided-at-compile-time/35048066#35048066", "title": "c++ function inling decided at compile time", "body": "<p>The compiler can (and almost certainly WILL) inline your <code>Calling</code> function. Depending on the availability of the source of <code>CallFastFunction</code> and <code>CallSlowFunction</code>, these may also be inlined. </p>\n\n<p>If the compiler can determine the value of <code>m_InputState</code>, it will remove the <code>if</code> - but only if it's definitive that the value is one value. </p>\n\n<p>For example, <code>thing.m_InputState = State::Slow; thing.Calling();</code> will only compile in the \"slow\" call, without any conditonal code, where <code>std::cin &gt;&gt; thing.m_InputState; thing.Calling();</code> will of course not.</p>\n\n<p>If, through profile-based optimisation, the compiler knows how often each of the cases are chosen, it may also select which path ends up \"next\" in the order of the code, such that the most likely comes first (and it may also provide prefix or other indication to the processor that \"you're likely going this way\".</p>\n\n<p>But inlining itself happens based on:</p>\n\n<ol>\n<li>The code itself being available.</li>\n<li>The size and number of calls to the function.</li>\n<li>Arbitrary compiler decisions that we can't know (unless we're very familiar with the source-code of the compiler).</li>\n</ol>\n\n<p>Modern compilers also support \"link time optimisation\", where the object files produced are only \"half-done\", such that the linker will actually produce the final code, and it can move code around and inline, just the same as the old-fashioned compiler, on the entire code that makes up the executable (all the code using link-time optimisation), allowing code that didn't have the same source file or not in a header file to still be inlined.</p>\n"}], "owner": {"reputation": 913, "user_id": 360645, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/492a193e46645e1df7a4957bd049b9e4?s=128&d=identicon&r=PG", "display_name": "bsobaid", "link": "https://stackoverflow.com/users/360645/bsobaid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 35048066, "answer_count": 3, "score": 0, "last_activity_date": 1453933622, "creation_date": 1453927915, "question_id": 35047749, "link": "https://stackoverflow.com/questions/35047749/c-function-inling-decided-at-compile-time", "title": "c++ function inling decided at compile time", "body": "<p>It is often said a function can be inlined only if it is known at the compile time how it will be called, or something to that effect. (pls correct/clarify if I am wrong)</p>\n\n<p>So say if I have a function like this</p>\n\n<pre><code>void Calling()\n{\nif (m_InputState == State::Fast) //m_inputstate is a class member and is set by user\n{\nCallFastFunction();\n}    \nelse if (m_InputState == State::Slow)\n{\nCallSlowFunction();\n}\n}\n</code></pre>\n\n<p>as m_inputstate is set by end-user, can we say this variable is not known at the compile time hence calling() cant be inlined?</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 139130, "user_id": 141172, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Vuodg.jpg?s=128&g=1", "display_name": "Eric J.", "link": "https://stackoverflow.com/users/141172/eric-j"}, "edited": false, "score": 1, "creation_date": 1453928014, "post_id": 35047710, "comment_id": 57819757, "body": "What is <code>cur</code>? It&#39;s not declared or assigned anywhere in the code you posted."}, {"owner": {"reputation": 4826, "user_id": 193789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a17cc57e47435930a48f7c80bcd53863?s=128&d=identicon&r=PG", "display_name": "kebs", "link": "https://stackoverflow.com/users/193789/kebs"}, "edited": false, "score": 0, "creation_date": 1453928041, "post_id": 35047710, "comment_id": 57819767, "body": "Some advices: learn about RAII and forget all you heard about pointers, new and delete. Use standard library containers (std::vector) and smart pointers."}, {"owner": {"reputation": 111, "user_id": 5541446, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10153620961849627/picture?type=large", "display_name": "KostasKol", "link": "https://stackoverflow.com/users/5541446/kostaskol"}, "reply_to_user": {"reputation": 4826, "user_id": 193789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a17cc57e47435930a48f7c80bcd53863?s=128&d=identicon&r=PG", "display_name": "kebs", "link": "https://stackoverflow.com/users/193789/kebs"}, "edited": false, "score": 0, "creation_date": 1453928322, "post_id": 35047710, "comment_id": 57819910, "body": "@kebs cur would be the &lt;current&gt; argument. My bad. I am coming in from java (beginner there as well) and I was wondering how I could use pointers to my advantage but, as it seems, they&#39;re just too difficult to handle. In any case I would like to figure out the answer to this problem because I cannot, for the life of me, figure it out."}, {"owner": {"reputation": 17904, "user_id": 364818, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/5fd80d98f96f9adbde7876cbda181715?s=128&d=identicon&r=PG", "display_name": "Mark Lakata", "link": "https://stackoverflow.com/users/364818/mark-lakata"}, "edited": false, "score": 0, "creation_date": 1453929639, "post_id": 35047710, "comment_id": 57820671, "body": "Your <code>clone</code> function is wrong. All it does is return the <code>this</code> pointer. That is not how <code>clone()</code> functions are supposed to work. You need to do either a shallow or deep memory copy of the data pointed to by <code>this</code>. (that doesn&#39;t explain the crash, but that will explain your next SO posting)"}], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 5541446, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10153620961849627/picture?type=large", "display_name": "KostasKol", "link": "https://stackoverflow.com/users/5541446/kostaskol"}, "edited": false, "score": 0, "creation_date": 1453929534, "post_id": 35048080, "comment_id": 57820599, "body": "Oh my god this actually worked. I wouldn&#39;t have imagined that pointer arithmetics wouldn&#39;t work because of the new. Thank you very much. :D"}, {"owner": {"reputation": 133, "user_id": 2475059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82381d25ed4f78e8b1493d3016e4397?s=128&d=identicon&r=PG", "display_name": "user2475059", "link": "https://stackoverflow.com/users/2475059/user2475059"}, "reply_to_user": {"reputation": 111, "user_id": 5541446, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10153620961849627/picture?type=large", "display_name": "KostasKol", "link": "https://stackoverflow.com/users/5541446/kostaskol"}, "edited": false, "score": 0, "creation_date": 1453929756, "post_id": 35048080, "comment_id": 57820750, "body": "It&#39;s not so much about <code>new</code> as it is the things you&#39;re handing to <code>clone_fast()</code> aren&#39;t arrays in the first place, so treating the pointer like they were arrays gives you segfaults."}], "tags": [], "owner": {"reputation": 133, "user_id": 2475059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82381d25ed4f78e8b1493d3016e4397?s=128&d=identicon&r=PG", "display_name": "user2475059", "link": "https://stackoverflow.com/users/2475059/user2475059"}, "is_accepted": true, "score": 1, "last_activity_date": 1453929379, "last_edit_date": 1453929379, "creation_date": 1453929064, "answer_id": 35048080, "question_id": 35047710, "link": "https://stackoverflow.com/questions/35047710/segmentation-fault-core-dumped-access-violation-reading-location-x/35048080#35048080", "title": "Segmentation fault (core dumped) - Access violation reading location x", "body": "<p>The <code>car*</code>s are created by <code>new</code>, and aren't necessarily contiguous; they certainly aren't arrays that you can pointer-arithmetic around with. <code>(car*) + 1</code> is not the same as <code>(car**)[i + 1]</code> (which is more like <code>(car**) + 1</code>). You probably want something a bit more like <code>(*(first + 1))-&gt;doThing()</code>, not <code>(first[X] + 1)-&gt;doThing()</code>.</p>\n\n<p>Edit: to be a bit more clear, if you can't do <code>car[X + 1]</code>, then you can't do <code>*(car + 1)</code>. Since the <code>car</code>s in <code>clone_fast()</code> are object pointers and not arrays, you can't do <code>car[X + 1]</code>, thus <code>(cur + 1)-&gt;is_stopped()</code> is wrong.</p>\n"}, {"tags": [], "owner": {"reputation": 4826, "user_id": 193789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a17cc57e47435930a48f7c80bcd53863?s=128&d=identicon&r=PG", "display_name": "kebs", "link": "https://stackoverflow.com/users/193789/kebs"}, "is_accepted": false, "score": 0, "last_activity_date": 1453929580, "creation_date": 1453929580, "answer_id": 35048232, "question_id": 35047710, "link": "https://stackoverflow.com/questions/35047710/segmentation-fault-core-dumped-access-violation-reading-location-x/35048232#35048232", "title": "Segmentation fault (core dumped) - Access violation reading location x", "body": "<p>I would suggest removing all pointer crap, and use more modern idioms. You can expand on the code below. However, it is unclear to me why you have two derived classes: they have no specific data neither methods, so why ?</p>\n\n<pre><code>class car\n{\nprivate:\n    int speed;\n    std::string brand;\n\npublic:\n    car (int s, std::string b):speed(s),brand(b)\n    {\n        std::cout &lt;&lt; \"New car has been created\" &lt;&lt; endl;\n    }\n    bool is_stopped ()\n    {\n        return speed==0;\n    }\n    void speed_up ()\n    {\n        speed++;\n    }\n};\n\nclass fast_car : public car\n{\n    public:\n        fast_car (int s, std::string b):car(s,b) {}\n};\n\nclass slow_car : public car\n{\n    public:\n        slow_car (int s, std::string b):car(s,b) {}\n};\n\nclass highway\n{\n    private:\n        std::vector&lt;std::shared_ptr&lt;car&gt;&gt; v_cars;\n    public:\n        highway (int c, int s, std::string b):number_of_cars(c)\n        {\n            for (int i=0;i&lt;c/2;i++)\n                v_cars.push_back( std::make_shared&lt;fast_car&gt;(s,b) );\n            for (int i=c/2;i&lt;c;i++)\n                v_cars.push_back( std::make_shared&lt;slow_car&gt;(s,b) );\n        }\n\n};\n\nint main()\n{\n    highway h( 50, 20 );\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 5541446, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10153620961849627/picture?type=large", "display_name": "KostasKol", "link": "https://stackoverflow.com/users/5541446/kostaskol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 0, "accepted_answer_id": 35048080, "answer_count": 2, "score": 0, "last_activity_date": 1453929580, "creation_date": 1453927761, "last_edit_date": 1453928214, "question_id": 35047710, "link": "https://stackoverflow.com/questions/35047710/segmentation-fault-core-dumped-access-violation-reading-location-x", "title": "Segmentation fault (core dumped) - Access violation reading location x", "body": "<p>I'm writing a somewhat toy program to get into c++. However I'm having quite a lot of trouble with a segmentation fault at a very specific line in my code. I know that the segmentation fault means I tried to access memort that was not given to my program.\nThe code is (somewhat) as follows(it's actually too big to just copy paste) :</p>\n\n<pre><code>class car {\nprotected:\n   int speed;\n   std::string brand;\npublic:\n   car (int s, std::string b):speed(s),brand(b) {\n       std::cout &lt;&lt; \"New car has been created\" &lt;&lt; endl;\n   }\n   virtual int is_stopped () {\n      if (speed==0) return 1;\n      else return 0;\n   }\n   virtual void speed_up () {\n       speed++;\n   }\n   car* clone () {\n      car* tmp(this);\n      return tmp;\n   }\n};\nclass fast_car : public car {\npublic:\n   fast_car (int s, std::string b):car(s,b) { } \n};\nclass slow_car : public car {\npublic:\n   slow_car (int s, std::string b):car(s,b) { }\n};\nclass highway {\n   int number_of_cars;\n   car **first;           //There are derived classes from car hence the                double pointer\npublic:\n   highway (int c, int s, std::string b):number_of_cars(c) {\n      first = new car*[c];\n      for (int i=0;i&lt;c/2;i++)\n          first[i] = new fast_car (s,b);\n      for (int i=c/2;i&lt;c;i++)\n          first[i] = new slow_car (s,b);\n   }\n   void speed_up () {\n      int pos;\n      pos = rand()%number_of_cars;    //give me a random number between 0 and number_of_cars;\n      if (pos!=0) pos--;   //We don't want position -1\n          first[pos]-&gt;speed_up ();\n      clone_fast (first[pos], (number_of_cars - pos - 1)); //the second argument is the remaining array \"spots\" until the end of the array\n   }\n\n\n\n   void clone_fast (car* cur, int rem) {\n      car* tmp;\n      for (int i=-;i&lt;=rem;i++) \n         if ((cur+1)-&gt;is_stopped ()) {   //Exact line where I get the segmentation fault\n            tmp = cur-&gt;clone ();\n            cur++;\n         }\n   }\n};\n</code></pre>\n\n<p>So there it is. I tried to give you everything I could to recreate the problem. I'll try to solve any further questions.\nAny help would be greatly appreciated.</p>\n"}, {"tags": ["java", "c++", "regex"], "comments": [{"owner": {"reputation": 46944, "user_id": 3764814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d02a4923abd2ca6d7593f031e4222c2?s=128&d=identicon&r=PG", "display_name": "Lucas Trzesniewski", "link": "https://stackoverflow.com/users/3764814/lucas-trzesniewski"}, "edited": false, "score": 0, "creation_date": 1453927849, "post_id": 35047675, "comment_id": 57819666, "body": "This is <i>not</i> a good idea... Think about, dunno... <code>template&lt;typename T&gt; std::vector&lt;typename std::remove_pointer&lt;T&gt;::type&gt; my_function()</code>..."}, {"owner": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 1, "creation_date": 1453927873, "post_id": 35047675, "comment_id": 57819680, "body": "Generally you would not want to solve this issue using a regular expression parsed against the full text. Rather, you would first convert the input into tokens (identified by token type), and perform a regex-like match against the stream of token types. This is how most sane compiler parsers do it at least."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1453927903, "post_id": 35047675, "comment_id": 57819701, "body": "Actually the form of function is a little more complex.  see: <a href=\"http://en.cppreference.com/w/cpp/language/function\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/function</a>"}, {"owner": {"reputation": 21876, "user_id": 1678362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ba023d18099cde022b9e4394d5714c0?s=128&d=identicon&r=PG", "display_name": "Aaron", "link": "https://stackoverflow.com/users/1678362/aaron"}, "edited": false, "score": 3, "creation_date": 1453927960, "post_id": 35047675, "comment_id": 57819731, "body": "I&#39;m also pretty sure you could reuse some existing C++ parser and save yourself hours of special cases handling."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1453930583, "post_id": 35047675, "comment_id": 57821202, "body": "I would look at <code>clang++ API</code>."}], "answers": [{"tags": [], "owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "is_accepted": false, "score": 2, "last_activity_date": 1453932479, "creation_date": 1453932479, "answer_id": 35049021, "question_id": 35047675, "link": "https://stackoverflow.com/questions/35047675/regular-expression-for-finding-functions/35049021#35049021", "title": "Regular expression for finding functions", "body": "<p>Unfortunately, there is no general regular expression that can match all function definitions.</p>\n\n<p>The C++ grammar specification allows you to parenthesize the name of any variable as many times as you'd like. For example, you can write</p>\n\n<pre><code> int ((((((a))))));\n</code></pre>\n\n<p>to declare a variable named <code>a</code>. This means that you can define functions like this:</p>\n\n<pre><code>void whyWouldYouDoThis(int (((((becauseICan)))))) {\n   /* ... */\n}\n</code></pre>\n\n<p>The problem with this is that it means that function declarations can have arbitrarily-complicated nesting of parentheses. You can prove that, in general, sets of strings that require keeping track of balanced parentheses cannot be matched by regular expressions (formally, that the language of those strings is not regular), and unfortunately this applies here.</p>\n\n<p>This is definitely really contrived, but there are cases where you will see lots of nested parentheses. For example, consider this function:</p>\n\n<pre><code>void thisFunctionTakesACallback(void imACallbackFunction()) {\n    /* ... */\n}\n</code></pre>\n\n<p>Here, there's an extra layer of parentheses induced by the fact that the function argument is itself of function type. If <em>that</em> function took a callback, you could see something like this:</p>\n\n<pre><code>void thisFunctionTakesACallback(void soDoesThisOne(void imACallbackInACallback())) {\n\n     /* ... */\n}\n</code></pre>\n\n<p>If you're looking to find all function declarations, you might be better off using a parser and defining a grammar for what you're looking for, since these patterns are context-free. You could alternatively consider hooking into a compiler front-end (g++ can produce ASTs for you in the GIMPLE or GENERIC framework, for example) and using that to extract what you're looking for. That guarantees you won't miss anything.</p>\n"}], "owner": {"reputation": 640, "user_id": 2091953, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/c8b4d78e4fa4176bc42a38b326d0f6dc?s=128&d=identicon&r=PG", "display_name": "mjswartz", "link": "https://stackoverflow.com/users/2091953/mjswartz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1453932479, "creation_date": 1453927618, "last_edit_date": 1453930908, "question_id": 35047675, "link": "https://stackoverflow.com/questions/35047675/regular-expression-for-finding-functions", "title": "Regular expression for finding functions", "body": "<p>All C++ functions are of the form</p>\n\n<pre><code>type name ( parameters ) { \u2026 } \n</code></pre>\n\n<p>To identify the regex, I'm using</p>\n\n<pre><code>regex = \"...\";\npattern = Pattern.compile(regex);\nmatcher = pattern.matcher(line);\nif (matcher.matches())\n{\n    ...\n}\n</code></pre>\n\n<p>I can only realistically search for the <code>type name (</code> part since I am using a line reader and function definitions can be multi-line and I'm not sure of what the regex would be. <code>.*\\\\b.*\\\\(</code> was my latest guess, but it doesn't work. Any help would be greatly appreciated. </p>\n"}, {"tags": ["c++", "design-patterns"], "comments": [{"owner": {"reputation": 30577, "user_id": 476496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85197b0087c5bee323d2690c977878f8?s=128&d=identicon&r=PG", "display_name": "Vincent Savard", "link": "https://stackoverflow.com/users/476496/vincent-savard"}, "edited": false, "score": 1, "creation_date": 1453927769, "post_id": 35047670, "comment_id": 57819622, "body": "What&#39;s the behaviour you want? Disallowing the deletion of <code>a</code> if it&#39;s currently in use? Also destroying <code>b</code> because it is in an invalid state? But you should probably look into smart pointers, it looks like <code>b</code> owns <code>a</code>, and thus should have the ownership (<code>unique_ptr</code>) or at least share it (<code>shared_ptr</code>)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 1, "creation_date": 1453927992, "post_id": 35047670, "comment_id": 57819744, "body": "Whatever you do, get rid of pointers. Than think about ownership and you might use st:::unique_ptr, std::shared_ptr and std weak_ptr. (You might even avoid these)"}, {"owner": {"reputation": 19, "user_id": 5592430, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c7c67ffff9f7b72b390c84daf1a7f13f?s=128&d=identicon&r=PG&f=1", "display_name": "Roman Kazmin", "link": "https://stackoverflow.com/users/5592430/roman-kazmin"}, "edited": false, "score": 0, "creation_date": 1453928611, "post_id": 35047670, "comment_id": 57820069, "body": "At first the object &quot;b&quot; stays valid after deleting of the &quot;a&quot;. My exampleis short part of code in order to explain the problem. Also consider situation where instead of one object I have array of &quot;b&quot; objects. And every has pointer on &quot;a&quot;. What I realy want - don&#39;t call PrintWithA() method if object &quot;a&quot;is not valid."}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1453928884, "post_id": 35047670, "comment_id": 57820205, "body": "In it&#39;s current state the question is ridiculously broad, and feels like a <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">xyproblem.info</a>"}, {"owner": {"reputation": 41213, "user_id": 215568, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b05685e6c3945f4bd23bf1f967861aeb?s=128&d=identicon&r=PG", "display_name": "Donnie", "link": "https://stackoverflow.com/users/215568/donnie"}, "edited": false, "score": 0, "creation_date": 1453933046, "post_id": 35047670, "comment_id": 57822598, "body": "C++ does not have a global mechanism for notifying on free.  You can get close with <code>shared_ptr</code> and <code>weak_ptr</code>, as mentioned earlier.  Otherwise you&#39;ll need a bunch of custom plumbing with event registrations and notify-on-destroy in destructors."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 5592430, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c7c67ffff9f7b72b390c84daf1a7f13f?s=128&d=identicon&r=PG&f=1", "display_name": "Roman Kazmin", "link": "https://stackoverflow.com/users/5592430/roman-kazmin"}, "edited": false, "score": 0, "creation_date": 1453929378, "post_id": 35047911, "comment_id": 57820501, "body": "Good solution. But I will slightly change my example - really It is closer to what I encountered. Let we have vector&lt;A*&gt; , &quot;b&quot; object has pointer on some element of this vector. In some moment this element can be erased from vector. How can I tell about it to &quot;b&quot;object. I want to call PrintWithA() method only for valid evements of this vector."}, {"owner": {"reputation": 61, "user_id": 5587695, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-U2BvK1ZQtKI/AAAAAAAAAAI/AAAAAAAAABM/GPYl2TaOdJM/photo.jpg?sz=128", "display_name": "Francois Coulombe", "link": "https://stackoverflow.com/users/5587695/francois-coulombe"}, "reply_to_user": {"reputation": 19, "user_id": 5592430, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c7c67ffff9f7b72b390c84daf1a7f13f?s=128&d=identicon&r=PG&f=1", "display_name": "Roman Kazmin", "link": "https://stackoverflow.com/users/5592430/roman-kazmin"}, "edited": false, "score": 0, "creation_date": 1453931687, "post_id": 35047911, "comment_id": 57821854, "body": "std::vector&lt;std::shared_ptr&lt;A&gt;&gt; and give some std::weak_ptr to B. you will be able to use the same code.  Otherwise you&#39;ll need to create some kind of notification system within B&#39;s destructor so that it notifies A that B is not longer valid"}], "tags": [], "owner": {"reputation": 61, "user_id": 5587695, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-U2BvK1ZQtKI/AAAAAAAAAAI/AAAAAAAAABM/GPYl2TaOdJM/photo.jpg?sz=128", "display_name": "Francois Coulombe", "link": "https://stackoverflow.com/users/5587695/francois-coulombe"}, "is_accepted": false, "score": 0, "last_activity_date": 1453928834, "last_edit_date": 1453928834, "creation_date": 1453928509, "answer_id": 35047911, "question_id": 35047670, "link": "https://stackoverflow.com/questions/35047670/how-to-tell-the-object-of-the-death-of-another-object/35047911#35047911", "title": "How to tell the object of the death of another object?", "body": "<p>You should use a weak ptr (<a href=\"http://en.cppreference.com/w/cpp/memory/weak_ptr\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/memory/weak_ptr</a>)</p>\n\n<p>basically you can provide class B with a weak ptr of A.</p>\n\n<p>whenever comes time to access A, you can try to lock the weak ptr to see if it's still valid.</p>\n\n<pre><code>#include &lt;memory&gt;\n\nclass A\n{\npublic:\n    void print(){}\n};  \n\nclass B\n{\n    std::weak_ptr&lt;A&gt; a;\npublic:\n    void init(std::weak_ptr&lt;A&gt; _a) {\n        a = _a;\n    }\n    void PrintWithA()\n    {\n        if (auto spt = a.lock()) { \n            spt-&gt;print();\n        }\n    }\n};\n\nint main()\n{\n    std::shared_ptr&lt;A&gt; a = std::make_shared&lt;A&gt;();\n    std::unique_ptr&lt;B&gt; b = std::make_unique&lt;B&gt;();\n    b-&gt;init(a);\n\n    // some code .....\n    a = nullptr;\n    // some code .....\n\n    b-&gt;PrintWithA(); // line 2\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 5592430, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c7c67ffff9f7b72b390c84daf1a7f13f?s=128&d=identicon&r=PG&f=1", "display_name": "Roman Kazmin", "link": "https://stackoverflow.com/users/5592430/roman-kazmin"}, "edited": false, "score": 1, "creation_date": 1453929772, "post_id": 35047958, "comment_id": 57820757, "body": "Doesn&#39;t help : b-&gt;a will not NULL even if I make a = NULL."}], "tags": [], "owner": {"reputation": 27, "user_id": 5813598, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nIUh6.jpg?s=128&g=1", "display_name": "zargothrax", "link": "https://stackoverflow.com/users/5813598/zargothrax"}, "is_accepted": false, "score": -2, "last_activity_date": 1453928681, "creation_date": 1453928681, "answer_id": 35047958, "question_id": 35047670, "link": "https://stackoverflow.com/questions/35047670/how-to-tell-the-object-of-the-death-of-another-object/35047958#35047958", "title": "How to tell the object of the death of another object?", "body": "<p>First of all, the line that says <code>A* a;</code> should probably be <code>A* a = new A;</code>.</p>\n\n<p>In c++ you need to encode this awareness explicitly, it's not done automatically.</p>\n\n<p>One thing you can do is check if <code>_a</code> is NULL inside <code>PrintWithA</code>, but this won't work if you make sure that you always set your pointers to NULL after <code>delete[]</code>ing them (which you've done)</p>\n"}, {"tags": [], "owner": {"reputation": 30596, "user_id": 134702, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7c1594304f3515b88e31bc8888f0f593?s=128&d=identicon&r=PG", "display_name": "Matt Hook", "link": "https://stackoverflow.com/users/134702/matt-hook"}, "is_accepted": false, "score": 0, "last_activity_date": 1453929794, "creation_date": 1453929794, "answer_id": 35048301, "question_id": 35047670, "link": "https://stackoverflow.com/questions/35047670/how-to-tell-the-object-of-the-death-of-another-object/35048301#35048301", "title": "How to tell the object of the death of another object?", "body": "<p>To guard against that, either B needs to take ownership of the lifetime of A when the object B is constructed, or you need to make A reference counted.</p>\n\n<p>C++11 I think has the concept of a shared pointer which maintains the references and will prevent the object A from being deleted if someone has a reference.  See <code>std::shared_ptr</code></p>\n\n<p>If you are not using C++11 there is <code>boost::shared_ptr</code> which does essentially the same thing.  But you need the boost library which I personally prefer not to use, but it's up to you.</p>\n\n<p>Use them like this:</p>\n\n<pre><code>typedef std::shared_ptr&lt;A&gt; A_ptr;\n\nA_ptr a = new A();\n\nclass B\n{\n    A_ptr a;\npublic:\n    void B(A_ptr _a) {\n        a = _a;\n    }\n    void PrintWithA()\n    {\n        a-&gt;print();\n    }\n};\n</code></pre>\n\n<p>Otherwise you could put something together yourself.  Something along the lines of:</p>\n\n<pre><code>class A\n{\npublic:\n    A(){\n      ref_count = 1;\n    }\n\n    void print(){}\n\n    void grab() {\n      ref_count++;\n    }\n\n    void release() {\n      ref_count--;\n      if (ref_count &lt;= 0)\n        ~A();\n    }\nprivate:\n    int ref_count;\n\n    ~A(){\n      delete this;\n    }\n}; \n</code></pre>\n\n<p>Inside B you'd assign the pointer and call grab();</p>\n\n<p>Rather than call delete (which wouldn't work because it's private) you'd call\na->release() on the pointer.</p>\n\n<p>Now this is not particularly fantastic because you can't use this form:</p>\n\n<pre><code>A a;\n</code></pre>\n\n<p>So it's not ideal.  But if you're using some compiler that doesn't have a shared_ptr and you don't mind the limitation you may use this or a form of it.  In general, use <strong>shared_ptr</strong>.</p>\n"}], "owner": {"reputation": 19, "user_id": 5592430, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c7c67ffff9f7b72b390c84daf1a7f13f?s=128&d=identicon&r=PG&f=1", "display_name": "Roman Kazmin", "link": "https://stackoverflow.com/users/5592430/roman-kazmin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1453929794, "creation_date": 1453927599, "question_id": 35047670, "link": "https://stackoverflow.com/questions/35047670/how-to-tell-the-object-of-the-death-of-another-object", "title": "How to tell the object of the death of another object?", "body": "<p>On my work I have met with one bug which can be described as follows.\nThere are two classes, class A and class B:</p>\n\n<pre><code>class A\n{\npublic:\n    void print(){}\n};  \n\nclass B\n{\n    A* a;\npublic:\n    void init(A* _a) {\n        a = _a;\n    }\n    void PrintWithA()\n    {\n        a-&gt;print();\n    }\n};\n\nA* a;\nB* b;\nb-&gt;init(a);\n\n// some code .....\ndelete a;        // line 1\na = NULL;\n// some code .....\n\nb-&gt;PrintWithA(); // line 2\n</code></pre>\n\n<p>Object \"b\" doesn't know nothing about state of object \"a\".  In line 1 \"a\"object has been deleted but on line 2 we continue to use it. When there are a lot of code it is very easy to make such mistake. \nMy question is the following - which approch to use to avoid some mistakes? I guess I could use observer pattern - but I think it is unjustifiably expensive solution.\nThank's.</p>\n"}, {"tags": ["c++", "c", "gdb", "reverse-engineering"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1453930975, "post_id": 35047669, "comment_id": 57821445, "body": "Are you using Cygwin? There&#39;s a comment <a href=\"http://stackoverflow.com/questions/4758175/how-to-use-gdb-with-input-redirection\">here</a> that says this doesn&#39;t work there."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1453931023, "post_id": 35047669, "comment_id": 57821471, "body": "See <a href=\"https://www.cygwin.com/ml/cygwin/1999-04/msg00308.html\" rel=\"nofollow noreferrer\">cygwin.com/ml/cygwin/1999-04/msg00308.html</a>"}, {"owner": {"reputation": 303, "user_id": 522091, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/405b495e14f67e26cd3f6569e942b41b?s=128&d=identicon&r=PG", "display_name": "Smipims", "link": "https://stackoverflow.com/users/522091/smipims"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1453931137, "post_id": 35047669, "comment_id": 57821530, "body": "@Barmar: I&#39;m not using Cygwin.... but that error does sound very similar. I&#39;m going to try on a different computer later and provide an update. Hmm...  How did you find that? My google-fu is apparently weak."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1453931374, "post_id": 35047669, "comment_id": 57821684, "body": "I googled &quot;gdb redirect program input&quot; and it found that question."}, {"owner": {"reputation": 303, "user_id": 522091, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/405b495e14f67e26cd3f6569e942b41b?s=128&d=identicon&r=PG", "display_name": "Smipims", "link": "https://stackoverflow.com/users/522091/smipims"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1453940616, "post_id": 35047669, "comment_id": 57825726, "body": "Nope. Tried on a new computer with a fresh OS install. No luck."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1453940666, "post_id": 35047669, "comment_id": 57825740, "body": "What operating system? Unix or Windows?"}, {"owner": {"reputation": 303, "user_id": 522091, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/405b495e14f67e26cd3f6569e942b41b?s=128&d=identicon&r=PG", "display_name": "Smipims", "link": "https://stackoverflow.com/users/522091/smipims"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1453990632, "post_id": 35047669, "comment_id": 57850462, "body": "Unix. One time with a RHEL install and the other time with Kali."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1453994026, "post_id": 35047669, "comment_id": 57853331, "body": "Are you sure the program is reading from stdin, not /dev/tty? If you run it outside <code>gdb</code>, can you redirect its input to a file?"}], "owner": {"reputation": 303, "user_id": 522091, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/405b495e14f67e26cd3f6569e942b41b?s=128&d=identicon&r=PG", "display_name": "Smipims", "link": "https://stackoverflow.com/users/522091/smipims"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 656, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1453927593, "creation_date": 1453927593, "last_edit_date": 1495540754, "question_id": 35047669, "link": "https://stackoverflow.com/questions/35047669/gdb-stuck-in-infinite-loop-when-debugging-progam-with-standard-input", "title": "GDB stuck in infinite loop when debugging progam with standard input", "body": "<p>I'm using GDB to do some reverse engineering of a basic C program. The program does not accept command line input. It does accept input from standard in during run time. I'm trying to script the standard in by doing</p>\n\n<pre><code>run &lt; temp\n</code></pre>\n\n<p>Where temp is a file containing something like</p>\n\n<pre><code>1\n0\nAAAAAAAAA\nAAAAA\n0\n</code></pre>\n\n<p>Unfortunately, when I do this, GDB appears to loop infinitely over this programs input.</p>\n\n<p>I tried to make this file using python</p>\n\n<pre><code>python -c 'print \"AAAAA\"' &gt; temp\n</code></pre>\n\n<p>And with the solution presented here: <a href=\"https://stackoverflow.com/questions/13104206/gdb-user-input-from-stdin\">How to debug a program that takes user input from stdin with GDB?</a></p>\n\n<p>But no luck.  When I just step through the program with GDB, I can pass input via standard in and that work's just fine.</p>\n\n<p>I'm a bit stumped...</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1453927353, "post_id": 35047554, "comment_id": 57819389, "body": "You have to check for bad input. When that arises you need to take step. I.e. eat the bad input"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1453927393, "post_id": 35047554, "comment_id": 57819414, "body": "When you enter a letter, but it&#39;s trying to read a number, the letter sits in the input buffer, and repeated reads won&#39;t remove it. You&#39;ll want to do something like <code>std::getline</code> to clear that out of the buffer before trying to read again."}, {"owner": {"reputation": 79, "user_id": 4775750, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh4.googleusercontent.com/-Gn6K9lPuVIk/AAAAAAAAAAI/AAAAAAAAANc/pfrdGZ8MluA/photo.jpg?sz=128", "display_name": "Nathan Lundgren", "link": "https://stackoverflow.com/users/4775750/nathan-lundgren"}, "edited": false, "score": 0, "creation_date": 1453927413, "post_id": 35047554, "comment_id": 57819427, "body": "I tried adding an or statement to the while: <code>milesPerYear &lt;= 0 || cin.fail()) {</code> and this didn&#39;t work."}, {"owner": {"reputation": 79, "user_id": 4775750, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh4.googleusercontent.com/-Gn6K9lPuVIk/AAAAAAAAAAI/AAAAAAAAANc/pfrdGZ8MluA/photo.jpg?sz=128", "display_name": "Nathan Lundgren", "link": "https://stackoverflow.com/users/4775750/nathan-lundgren"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1453927559, "post_id": 35047554, "comment_id": 57819521, "body": "@EdHeal How do I check for bad input?"}], "owner": {"reputation": 79, "user_id": 4775750, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh4.googleusercontent.com/-Gn6K9lPuVIk/AAAAAAAAAAI/AAAAAAAAANc/pfrdGZ8MluA/photo.jpg?sz=128", "display_name": "Nathan Lundgren", "link": "https://stackoverflow.com/users/4775750/nathan-lundgren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "closed_date": 1453927517, "answer_count": 0, "score": 0, "last_activity_date": 1453927170, "creation_date": 1453927170, "question_id": 35047554, "link": "https://stackoverflow.com/questions/35047554/cin-looking-for-an-int-but-given-a-letter-has-infinite-output", "closed_reason": "Duplicate", "title": "cin looking for an int, but given a letter has infinite output", "body": "<p>I've got a <code>cin</code> which is looking for a double value, but if a string value of any length is passed, my while loop gets stuck in an infinite output loop.</p>\n\n<p>Here's what I've got:</p>\n\n<pre><code>double milesPerYear = 0;\ncin &gt;&gt; milesPerYear;\nwhile (milesPerYear &lt;= 0) {\n    cout &lt;&lt; \"Please input a positive number above 0\" &lt;&lt; endl;\n    cin &gt;&gt; milesPerYear;\n}\n</code></pre>\n\n<p>If the user were to input anything which has a letter in it, it will indefinitely output Please input a positive number above 0.</p>\n\n<p>I want it to prompt the user to input a new value.</p>\n\n<p>Thanks!\nNathan</p>\n"}, {"tags": ["c++", "matlab", "visual-studio-2010", "visual-studio-2012", "cuda"], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 5848804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d456a16535d55392db1e3c6b898eadf?s=128&d=identicon&r=PG&f=1", "display_name": "Dan Leon", "link": "https://stackoverflow.com/users/5848804/dan-leon"}, "is_accepted": false, "score": 1, "last_activity_date": 1453962142, "last_edit_date": 1453962142, "creation_date": 1453951591, "answer_id": 35052334, "question_id": 35047504, "link": "https://stackoverflow.com/questions/35047504/unable-to-inspect-global-memory-using-cuda-matlab-visual-studio/35052334#35052334", "title": "Unable to inspect global memory using CUDA + MATLAB + Visual Studio", "body": "<p>I figured it out that Visual Studio, while attaching the process both in native and CUDA, it can debug and stop in breakpoints in kernel definitions and native code, but it cannot inspect global memory AND host memory in this way. It works properly if I only attach to the CUDA process.</p>\n\n<p>It would be helpful though if someone can point out why this happens.</p>\n"}], "owner": {"reputation": 21, "user_id": 5848804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d456a16535d55392db1e3c6b898eadf?s=128&d=identicon&r=PG&f=1", "display_name": "Dan Leon", "link": "https://stackoverflow.com/users/5848804/dan-leon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1453962170, "creation_date": 1453926977, "last_edit_date": 1453962170, "question_id": 35047504, "link": "https://stackoverflow.com/questions/35047504/unable-to-inspect-global-memory-using-cuda-matlab-visual-studio", "title": "Unable to inspect global memory using CUDA + MATLAB + Visual Studio", "body": "<p>I'm currently writing a code in MATLAB using CUDA from a MEX file. I attached the MATLAB process to Visual Studio, both on native (x64) and CUDA, but when I stop at a breakpoint in a kernel definition I'm unable to inspect the values in global memory, even when I can see any other variable defined on thread (local) memory. </p>\n\n<p>Is this something expected or I'm doing anything wrong? If not, there is something I can do to inspect the global memory while debugging a kernel? </p>\n"}, {"tags": ["c++", "postgresql", "object", "libpqxx"], "answers": [{"tags": [], "owner": {"reputation": 195, "user_id": 5697533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e04d9adf58f3bdbb383b1aa2a4cc2ab7?s=128&d=identicon&r=PG&f=1", "display_name": "share", "link": "https://stackoverflow.com/users/5697533/share"}, "is_accepted": false, "score": 0, "last_activity_date": 1454695131, "last_edit_date": 1495539913, "creation_date": 1454695131, "answer_id": 35230580, "question_id": 35047497, "link": "https://stackoverflow.com/questions/35047497/transactional-objects-in-pqxx/35230580#35230580", "title": "Transactional objects in pqxx", "body": "<p>Message <code>Started nontransaction while transaction still active</code> actually is not an error. <code>pqxx</code> is not designed to handle nested transactions and it can handle only one transaction at a time. You can read the details here;\n<a href=\"https://stackoverflow.com/questions/26464056/pqxx-reuse-reactivate-a-work-transaction\">pqxx reuse / reactivate a work transaction</a></p>\n\n<p>Your code is actually working OK provided that you commit the transaction before issuing a non-transaction sql command, So I would change;</p>\n\n<p>uncomment the commit on line 49 to finish the transaction;\n<code>W.commit();</code> </p>\n\n<p>and change line 69 <code>W.exec(sql);</code> to non-transaction work;\n<code>N.exec(sql);</code></p>\n\n<p>Hope that helps.</p>\n"}], "owner": {"reputation": 105, "user_id": 5832531, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dfff8dbe54c1bb5a6adf26fd2650bc39?s=128&d=identicon&r=PG&f=1", "display_name": "Marcello Bardus", "link": "https://stackoverflow.com/users/5832531/marcello-bardus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1226, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1454695131, "creation_date": 1453926941, "question_id": 35047497, "link": "https://stackoverflow.com/questions/35047497/transactional-objects-in-pqxx", "title": "Transactional objects in pqxx", "body": "<p>I'm new in PostgreSQL and pqxx. I code in C++.\nI've just written an exemple program. Everythig is alright but when I execute my program I see an error : </p>\n\n<p>Started nontransaction while transaction still active.</p>\n\n<p>Here's the code : <a href=\"http://pastebin.com/p8CJ6Eaz\" rel=\"nofollow\">http://pastebin.com/p8CJ6Eaz</a></p>\n\n<p>If someone knows how to use those transactional objects please explain me. \nGreetings to all and thanks for help. </p>\n"}, {"tags": ["c++", "eclipse", "llvm", "codeblocks"], "answers": [{"comments": [{"owner": {"reputation": 1503, "user_id": 5836843, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/35a42f1cb462d7498d893a919f9c8564?s=128&d=identicon&r=PG&f=1", "display_name": "ishaq", "link": "https://stackoverflow.com/users/5836843/ishaq"}, "edited": false, "score": 0, "creation_date": 1460882177, "post_id": 36669739, "comment_id": 60939078, "body": "Thank you @edgar-klerks, While it may not answer the question directly, It does solve a related problem, I am accepting it."}], "tags": [], "owner": {"reputation": 1407, "user_id": 971799, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6e362adcd5a56fb6ff080b94738cf1c7?s=128&d=identicon&r=PG", "display_name": "Edgar Klerks", "link": "https://stackoverflow.com/users/971799/edgar-klerks"}, "is_accepted": true, "score": 1, "last_activity_date": 1460840746, "creation_date": 1460840746, "answer_id": 36669739, "question_id": 35047489, "link": "https://stackoverflow.com/questions/35047489/configure-eclipse-cdt-or-codeblocks-to-get-llvm-ir-intellisense/36669739#36669739", "title": "Configure Eclipse CDT or Codeblocks to get LLVM IR intellisense", "body": "<p>This is not answering the question directly, but it will ensure, you have a correctly working build environment. It is specific for code blocks.</p>\n\n<p>First checkout the source tree of llvm (directly taken from the getting started <a href=\"http://llvm.org/docs/GettingStarted.html#git-mirror\" rel=\"nofollow\">guide</a>):</p>\n\n<pre><code>git clone http://llvm.org/git/llvm.git\ncd llvm/tools\ngit clone http://llvm.org/git/clang.git\ncd .. \ncd projects\ngit clone http://llvm.org/git/compiler-rt.git\ngit clone http://llvm.org/git/libcxx.git\ngit clone http://llvm.org/git/libcxxabi.git\ngit clone http://llvm.org/git/test-suite.git\ngit clone http://llvm.org/git/openmp.git\n</code></pre>\n\n<p>Remove anything you don't like. </p>\n\n<p>Then create an directory outside the llvm directory:</p>\n\n<pre><code> cd ..\n mkdir build \n</code></pre>\n\n<p>Change your directory (cd) to there and run:</p>\n\n<pre><code> cd build \n cmake -g \"CodeBlocks - Unix Makefiles\" &lt;your configure options&gt; ../llvm \n</code></pre>\n\n<p>Assuming llvm shares the root path, otherwise change the ../llvm line to the correct path. Then open it as an existing project in code::blocks.  </p>\n\n<p>If all went well, your build environment is setup correctly and code completion should work. </p>\n"}], "owner": {"reputation": 1503, "user_id": 5836843, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/35a42f1cb462d7498d893a919f9c8564?s=128&d=identicon&r=PG&f=1", "display_name": "ishaq", "link": "https://stackoverflow.com/users/5836843/ishaq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 1, "accepted_answer_id": 36669739, "answer_count": 1, "score": 5, "last_activity_date": 1460840746, "creation_date": 1453926909, "last_edit_date": 1454747449, "question_id": 35047489, "link": "https://stackoverflow.com/questions/35047489/configure-eclipse-cdt-or-codeblocks-to-get-llvm-ir-intellisense", "title": "Configure Eclipse CDT or Codeblocks to get LLVM IR intellisense", "body": "<p>I want to configure Eclipse (or Codeblocks) so that when I write a pass, I can at least take advantage of Intellisense (even if building passes directly from within Eclipse is not possible). <strong>Update: I am getting at least some intellisense once I enabled <em>Parsing-based Proposals</em> in Eclipse (details below)</strong> </p>\n\n<p>So far I have configured Eclipse to use clang to compile simple C++ programs.</p>\n\n<p>To get intellisense for LLVM pass, I added <code>/usr/local/include</code> to <em>Includes</em> directories and tried code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;llvm/IR/Function.h&gt;\n\nusing namespace std:\nint main() {\n    cout &lt;&lt; \"Hello World\" &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>It doesn't fail on <code>#include &lt;llvm/IR/Function.h&gt;</code> itself (i.e. it can find this header file), but upon including subsequent files, gives me </p>\n\n<pre><code>/usr/local/include/llvm/Support/DataTypes.h:58:3: error: \"Must #define __STDC_LIMIT_MACROS before #including Support/DataTypes.h\"\n</code></pre>\n\n<p>Any pointers to how I could make it give me intellisense at least?</p>\n\n<p><strong>Complete Log</strong></p>\n\n<pre><code>01:22:48 **** Rebuild of configuration Debug for project HelloWorld2 ****\nInfo: Internal Builder is used for build\nclang++ -I/usr/local/include -O0 -emit-llvm -g3 -Wall -c -fmessage-length=0 -o src/HelloWorld2.bc ../src/HelloWorld2.cpp \nIn file included from ../src/HelloWorld2.cpp:10:\nIn file included from /usr/local/include/llvm/IR/Function.h:22:\nIn file included from /usr/local/include/llvm/IR/Argument.h:17:\nIn file included from /usr/local/include/llvm/ADT/Twine.h:14:\n/usr/local/include/llvm/Support/DataTypes.h:58:3: error: \"Must #define __STDC_LIMIT_MACROS before #including Support/DataTypes.h\"\n# error \"Must #define __STDC_LIMIT_MACROS before #including Support/DataTypes.h\"\n  ^\n/usr/local/include/llvm/Support/DataTypes.h:62:3: error: \"Must #define __STDC_CONSTANT_MACROS before \"         \"#including Support/DataTypes.h\"\n# error \"Must #define __STDC_CONSTANT_MACROS before \" \\\n  ^\nIn file included from ../src/HelloWorld2.cpp:10:\nIn file included from /usr/local/include/llvm/IR/Function.h:22:\nIn file included from /usr/local/include/llvm/IR/Argument.h:19:\nIn file included from /usr/local/include/llvm/IR/Attributes.h:19:\nIn file included from /usr/local/include/llvm/ADT/ArrayRef.h:14:\nIn file included from /usr/local/include/llvm/ADT/SmallVector.h:20:\n/usr/local/include/llvm/Support/MathExtras.h:273:24: error: use of undeclared identifier 'INT64_C'\n  return N &gt;= 64 || (-(INT64_C(1)&lt;&lt;(N-1)) &lt;= x &amp;&amp; x &lt; (INT64_C(1)&lt;&lt;(N-1)));\n                       ^\n/usr/local/include/llvm/Support/MathExtras.h:273:56: error: use of undeclared identifier 'INT64_C'\n  return N &gt;= 64 || (-(INT64_C(1)&lt;&lt;(N-1)) &lt;= x &amp;&amp; x &lt; (INT64_C(1)&lt;&lt;(N-1)));\n                                                       ^\n/usr/local/include/llvm/Support/MathExtras.h:299:26: error: use of undeclared identifier 'UINT64_C'\n  return N &gt;= 64 || x &lt; (UINT64_C(1)&lt;&lt;(N));\n                         ^\n/usr/local/include/llvm/Support/MathExtras.h:331:24: error: use of undeclared identifier 'INT64_C'\n  return N &gt;= 64 || (-(INT64_C(1)&lt;&lt;(N-1)) &lt;= x &amp;&amp; x &lt; (INT64_C(1)&lt;&lt;(N-1)));\n                       ^\n/usr/local/include/llvm/Support/MathExtras.h:331:56: error: use of undeclared identifier 'INT64_C'\n  return N &gt;= 64 || (-(INT64_C(1)&lt;&lt;(N-1)) &lt;= x &amp;&amp; x &lt; (INT64_C(1)&lt;&lt;(N-1)));\n                                                       ^\nIn file included from ../src/HelloWorld2.cpp:10:\nIn file included from /usr/local/include/llvm/IR/Function.h:22:\nIn file included from /usr/local/include/llvm/IR/Argument.h:19:\nIn file included from /usr/local/include/llvm/IR/Attributes.h:19:\nIn file included from /usr/local/include/llvm/ADT/ArrayRef.h:14:\n/usr/local/include/llvm/ADT/SmallVector.h:232:20: warning: rvalue references are a C++11 extension [-Wc++11-extensions]\n  void push_back(T &amp;&amp;Elt) {\n                   ^\n/usr/local/include/llvm/ADT/SmallVector.h:476:33: warning: rvalue references are a C++11 extension [-Wc++11-extensions]\n  iterator insert(iterator I, T &amp;&amp;Elt) {\n                                ^\n/usr/local/include/llvm/ADT/SmallVector.h:645:46: warning: rvalue references are a C++11 extension [-Wc++11-extensions]\n  SmallVectorImpl &amp;operator=(SmallVectorImpl &amp;&amp;RHS);\n                                             ^\n/usr/local/include/llvm/ADT/SmallVector.h:383:12: warning: 'auto' type specifier is a C++11 extension [-Wc++11-extensions]\n      for (auto I = this-&gt;end(), E = this-&gt;begin() + N; I != E; ++I)\n           ^\n/usr/local/include/llvm/ADT/SmallVector.h:764:70: warning: rvalue references are a C++11 extension [-Wc++11-extensions]\nSmallVectorImpl&lt;T&gt; &amp;SmallVectorImpl&lt;T&gt;::operator=(SmallVectorImpl&lt;T&gt; &amp;&amp;RHS) {\n                                                                     ^\n/usr/local/include/llvm/ADT/SmallVector.h:878:27: warning: rvalue references are a C++11 extension [-Wc++11-extensions]\n  SmallVector(SmallVector &amp;&amp;RHS) : SmallVectorImpl&lt;T&gt;(N) {\n                          ^\n/usr/local/include/llvm/ADT/SmallVector.h:883:44: warning: rvalue references are a C++11 extension [-Wc++11-extensions]\n  const SmallVector &amp;operator=(SmallVector &amp;&amp;RHS) {\n                                           ^\nIn file included from ../src/HelloWorld2.cpp:10:\nIn file included from /usr/local/include/llvm/IR/Function.h:22:\nIn file included from /usr/local/include/llvm/IR/Argument.h:19:\nIn file included from /usr/local/include/llvm/IR/Attributes.h:20:\nIn file included from /usr/local/include/llvm/ADT/FoldingSet.h:21:\n/usr/local/include/llvm/Support/Allocator.h:134:70: error: expected expression\n          BumpPtrAllocatorImpl&lt;AllocatorT, SlabSize, SizeThreshold&gt;&gt; {\n                                                                     ^\n/usr/local/include/llvm/Support/Allocator.h:346:2: error: expected a type\n};\n ^\n/usr/local/include/llvm/Support/Allocator.h:346:2: error: expected class name\n/usr/local/include/llvm/Support/Allocator.h:346:2: error: expected '{' after base class list\n/usr/local/include/llvm/Support/Allocator.h:362:53: warning: rvalue references are a C++11 extension [-Wc++11-extensions]\n  SpecificBumpPtrAllocator(SpecificBumpPtrAllocator &amp;&amp;Old)\n                                                    ^\n/usr/local/include/llvm/Support/Allocator.h:366:64: warning: rvalue references are a C++11 extension [-Wc++11-extensions]\n  SpecificBumpPtrAllocator &amp;operator=(SpecificBumpPtrAllocator &amp;&amp;RHS) {\n                                                               ^\n/usr/local/include/llvm/Support/Allocator.h:375:5: warning: 'auto' type specifier is a C++11 extension [-Wc++11-extensions]\n    auto DestroyElements = [](char *Begin, char *End) {\n    ^\n/usr/local/include/llvm/Support/Allocator.h:375:28: error: expected expression\n    auto DestroyElements = [](char *Begin, char *End) {\n                           ^\n/usr/local/include/llvm/Support/Allocator.h:381:10: warning: 'auto' type specifier is a C++11 extension [-Wc++11-extensions]\n    for (auto I = Allocator.Slabs.begin(), E = Allocator.Slabs.end(); I != E;\n         ^\n/usr/local/include/llvm/Support/Allocator.h:381:29: error: no member named 'Slabs' in 'llvm::BumpPtrAllocatorImpl&lt;llvm::MallocAllocator, 4096, 4096&gt;'\n    for (auto I = Allocator.Slabs.begin(), E = Allocator.Slabs.end(); I != E;\n                  ~~~~~~~~~ ^\n/usr/local/include/llvm/Support/Allocator.h:381:58: error: no member named 'Slabs' in 'llvm::BumpPtrAllocatorImpl&lt;llvm::MallocAllocator, 4096, 4096&gt;'\n    for (auto I = Allocator.Slabs.begin(), E = Allocator.Slabs.end(); I != E;\n                                               ~~~~~~~~~ ^\n/usr/local/include/llvm/Support/Allocator.h:383:52: error: no member named 'computeSlabSize' in 'llvm::BumpPtrAllocatorImpl&lt;llvm::MallocAllocator, 4096, 4096&gt;'\n      size_t AllocatedSlabSize = BumpPtrAllocator::computeSlabSize(\n                                 ~~~~~~~~~~~~~~~~~~^\n/usr/local/include/llvm/Support/Allocator.h:384:35: error: no member named 'Slabs' in 'llvm::BumpPtrAllocatorImpl&lt;llvm::MallocAllocator, 4096, 4096&gt;'\n          std::distance(Allocator.Slabs.begin(), I));\n                        ~~~~~~~~~ ^\n/usr/local/include/llvm/Support/Allocator.h:386:35: error: no member named 'Slabs' in 'llvm::BumpPtrAllocatorImpl&lt;llvm::MallocAllocator, 4096, 4096&gt;'\n      char *End = *I == Allocator.Slabs.back() ? Allocator.CurPtr\n                        ~~~~~~~~~ ^\n/usr/local/include/llvm/Support/Allocator.h:386:60: error: no member named 'CurPtr' in 'llvm::BumpPtrAllocatorImpl&lt;llvm::MallocAllocator, 4096, 4096&gt;'\n      char *End = *I == Allocator.Slabs.back() ? Allocator.CurPtr\n                                                 ~~~~~~~~~ ^\n/usr/local/include/llvm/Support/Allocator.h:392:10: warning: 'auto' type specifier is a C++11 extension [-Wc++11-extensions]\n    for (auto &amp;PtrAndSize : Allocator.CustomSizedSlabs) {\n         ^\n/usr/local/include/llvm/Support/Allocator.h:392:39: error: no member named 'CustomSizedSlabs' in 'llvm::BumpPtrAllocatorImpl&lt;llvm::MallocAllocator, 4096, 4096&gt;'\n    for (auto &amp;PtrAndSize : Allocator.CustomSizedSlabs) {\n                            ~~~~~~~~~ ^\n/usr/local/include/llvm/Support/Allocator.h:392:27: warning: range-based for loop is a C++11 extension [-Wc++11-extensions]\n    for (auto &amp;PtrAndSize : Allocator.CustomSizedSlabs) {\n                          ^\nfatal error: too many errors emitted, stopping now [-ferror-limit=]\n13 warnings and 20 errors generated.\n\n01:22:50 Build Finished (took 1s.509ms)\n</code></pre>\n\n<p><strong>UPDATE:</strong> Eclipse does give me intellisense (at least some of it), I had to check <em>Parsing-based Proposals</em> in <em>Window -> Preferences -> C/C++ -> Editor -> Content Assist -> Advanced</em> (It was unchecked by default).</p>\n"}, {"tags": ["c++", "protocol-buffers"], "answers": [{"tags": [], "owner": {"reputation": 4858, "user_id": 5739035, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-RQUt7m42pBk/AAAAAAAAAAI/AAAAAAAAAyw/mLHBtE-PQic/photo.jpg?sz=128", "display_name": "Adi Levin", "link": "https://stackoverflow.com/users/5739035/adi-levin"}, "is_accepted": true, "score": 5, "last_activity_date": 1453927123, "creation_date": 1453927123, "answer_id": 35047536, "question_id": 35047392, "link": "https://stackoverflow.com/questions/35047392/getting-all-field-names-from-a-protocol-buffer-in-c/35047536#35047536", "title": "Getting all field names from a protocol buffer in C++?", "body": "<p>Yes. If you have a <a href=\"https://developers.google.com/protocol-buffers/docs/reference/cpp/google.protobuf.descriptor#Descriptor\" rel=\"noreferrer\">Descriptor</a>, you get the number of fields using <code>Descriptor::field_count()</code>. Then, you iterate over the fields using <code>Descriptor::field(int index)</code>, which returns a <a href=\"https://developers.google.com/protocol-buffers/docs/reference/cpp/google.protobuf.descriptor#FieldDescriptor\" rel=\"noreferrer\">FieldDescriptor</a>, where you can find the name of each field using <code>FieldDescriptor::name()</code>.</p>\n"}], "owner": {"reputation": 85, "user_id": 937127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f168be9535892b49d9ba21eb468c674a?s=128&d=identicon&r=PG", "display_name": "CarlosR", "link": "https://stackoverflow.com/users/937127/carlosr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2089, "favorite_count": 1, "accepted_answer_id": 35047536, "answer_count": 1, "score": 5, "last_activity_date": 1453927123, "creation_date": 1453926529, "last_edit_date": 1495540386, "question_id": 35047392, "link": "https://stackoverflow.com/questions/35047392/getting-all-field-names-from-a-protocol-buffer-in-c", "title": "Getting all field names from a protocol buffer in C++?", "body": "<p>Is there a way to get all the fields of a protobuff message using its descriptor, in C++?</p>\n\n<p>There's a way to do that in <strong>Python</strong> like this:\n<a href=\"https://stackoverflow.com/questions/24639562/getting-all-field-names-from-a-protocol-buffer\">Getting all field names from a protocol buffer?</a></p>\n\n<p>Just wondering if there's the same thing in C++. Tried to find anything on the <a href=\"https://developers.google.com/protocol-buffers/docs/reference/cpp/google.protobuf.descriptor\" rel=\"nofollow noreferrer\">descriptor.h</a>, but without success.</p>\n"}, {"tags": ["c++", "c", "eclipse", "compilation"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1453926717, "post_id": 35047379, "comment_id": 57819058, "body": "Press the run button. Defaults are to will ask if you want to save. Set it to save and never ask again. If the file was modified, the program will then be built and run. Watch out because libraries used by the program defined in other projects will not be built. Only the program being run will be built."}, {"owner": {"reputation": 7471, "user_id": 2796832, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nt2uE.jpg?s=128&g=1", "display_name": "Jonah Graham", "link": "https://stackoverflow.com/users/2796832/jonah-graham"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1453926922, "post_id": 35047379, "comment_id": 57819164, "body": "@user4581301 you should make that an answer."}, {"owner": {"reputation": 830, "user_id": 1506761, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/804daf70079b8efe061c3c06b1b4b6f7?s=128&d=identicon&r=PG&f=1", "display_name": "Zeta.Investigator", "link": "https://stackoverflow.com/users/1506761/zeta-investigator"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1453926947, "post_id": 35047379, "comment_id": 57819182, "body": "@user4581301 It doesn&#39;t have the option &quot;never ask again&quot;    Why would I want to rebuild &quot;libraries used by the program defined in other projects&quot; when I&#39;ve not touched them? I mean in which scenario will this caveat shows itself?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1453927598, "post_id": 35047379, "comment_id": 57819535, "body": "Never ask again may be an option I set years ago and has been carried forward for me over the last decade&#39;s worth of updates. Looks like this answer still holds under Mars: <a href=\"http://stackoverflow.com/questions/23959595/how-to-enable-eclipse-to-autobuild-autosave-changes-before-run-cdt\">How to enable Eclipse to autobuild/autosave changes before run (CDT)</a>"}, {"owner": {"reputation": 830, "user_id": 1506761, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/804daf70079b8efe061c3c06b1b4b6f7?s=128&d=identicon&r=PG&f=1", "display_name": "Zeta.Investigator", "link": "https://stackoverflow.com/users/1506761/zeta-investigator"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1453928325, "post_id": 35047379, "comment_id": 57819914, "body": "@user4581301 Thanks for the link. I should have chosen &quot;always&quot; for &quot;save required dirty editors...&quot;. But about your warning, Are there any side effects to these changes? I mean when should I be wary with this config?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1453929102, "post_id": 35047379, "comment_id": 57820319, "body": "Say you have two projects open both with unsaved changes. Project 1 builds an executable. Project 2 builds a library used by Project 1. If you build Project 1, Eclipse will build Project 2, then build project 1 using the newly built and updated Project 2. If you run Project 1, Eclipse will build only Project 1 and use the old Project 2 library files. Comic hijinks ensue."}, {"owner": {"reputation": 830, "user_id": 1506761, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/804daf70079b8efe061c3c06b1b4b6f7?s=128&d=identicon&r=PG&f=1", "display_name": "Zeta.Investigator", "link": "https://stackoverflow.com/users/1506761/zeta-investigator"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1453929438, "post_id": 35047379, "comment_id": 57820542, "body": "@user4581301 But I want to build Project 1 first,(and then 2 automatically) then run it. On the link you provided, there was a check box stating &quot;build if necessary&quot;. Doesn&#39;t it do the trick?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1453929673, "post_id": 35047379, "comment_id": 57820696, "body": "If all you want is or have is Project 1 you&#39;re fine. The problem is when you have two interdependent projects that must both be built."}], "owner": {"reputation": 830, "user_id": 1506761, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/804daf70079b8efe061c3c06b1b4b6f7?s=128&d=identicon&r=PG&f=1", "display_name": "Zeta.Investigator", "link": "https://stackoverflow.com/users/1506761/zeta-investigator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 1, "closed_date": 1453928476, "answer_count": 0, "score": 0, "last_activity_date": 1453926475, "creation_date": 1453926475, "question_id": 35047379, "link": "https://stackoverflow.com/questions/35047379/how-to-run-exe-immedeatly-after-build-in-eclipse-cdt", "closed_reason": "Duplicate", "title": "How to run .exe immedeatly after build in Eclipse CDT", "body": "<p>Code::Blocks has a \"compile and run\" feature which you can change the code and then click just one button and it automatically compiles the code and runs it afterwards.  </p>\n\n<p>How can I achieve similar behavior in Eclipse with C/C++ plugin?<br>\nI want a <strong>button (or shortcut)</strong> to <strong>1- Automatically save any changes 2- compile 3- run</strong></p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "clang", "overloading", "clang++"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1453926785, "post_id": 35047147, "comment_id": 57819087, "body": "My money is definitely on you being wrong. (Hint: non-static member functions are very different from free functions.)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2268210"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1453927421, "post_id": 35047147, "comment_id": 57819435, "body": "I just need the address of the method, and it seems like the compiler is ok with it until it shows the const?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2268210"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1453927839, "post_id": 35047147, "comment_id": 57819656, "body": "Btw I&#39;m doing this because of an open bug in clang similar to these poor chaps <a href=\"https://www.bountysource.com/issues/29193004-link-errors-on-debian-sid\" rel=\"nofollow noreferrer\">bountysource.com/issues/29193004-link-errors-on-debian-sid</a> but their solution did not work for me"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2268210"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1453937093, "post_id": 35047147, "comment_id": 57824523, "body": "This is also related <a href=\"http://stackoverflow.com/questions/33368237/undefined-reference-in-clang-when-linking-to-a-library-compiled-with-gcc5\" title=\"undefined reference in clang when linking to a library compiled with gcc5\">stackoverflow.com/questions/33368237/&hellip;</a> :/"}], "owner": {"user_type": "does_not_exist", "display_name": "user2268210"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 200, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1453926479, "creation_date": 1453925654, "last_edit_date": 1453926479, "question_id": 35047147, "link": "https://stackoverflow.com/questions/35047147/trying-to-reference-an-overloaded-method-with-const-in-c-using-clang", "title": "Trying to reference an overloaded method with const in C++ using clang", "body": "<p>In clang there is <a href=\"http://clang.llvm.org/doxygen/Type_8h_source.html\" rel=\"nofollow\">this file</a>. I'm trying to reference one of the overloaded methods:</p>\n\n<pre><code>00909   std::string getAsString(const PrintingPolicy &amp;Policy) const;\n</code></pre>\n\n<p><strong>I tried:</strong></p>\n\n<pre><code>std::__cxx11::basic_string&lt;char&gt; (&amp;p2)(const clang::PrintingPolicy&amp;) = &amp;clang::QualType::getAsString;\n</code></pre>\n\n<p><strong>and got:</strong></p>\n\n<pre><code>REPL:1:73: error: address of overloaded function 'getAsString' does not match required type 'std::__cxx11::basic_string&lt;char&gt; (const clang::PrintingPolicy &amp;)'\nstd::__cxx11::basic_string&lt;char&gt; (&amp;p2)(const clang::PrintingPolicy&amp;) = &amp;clang::QualType::getAsString\n</code></pre>\n\n\n\n<pre><code>/home/a/julia/usr/bin/../include/clang/AST/Type.h:905:15: note: candidate function has different qualifiers **(expected none but found const)**\n  std::string getAsString(const PrintingPolicy &amp;Policy) const;\n</code></pre>\n\n<p><strong>I also tried:</strong></p>\n\n<pre><code>std::__cxx11::basic_string&lt;char&gt; (&amp;p1)(clang::PrintingPolicy&amp;) = &amp;clang::QualType::getAsString;\n</code></pre>\n\n<p><strong>and got:</strong></p>\n\n<pre><code>candidate function has type mismatch at 1st parameter **(expected 'clang::PrintingPolicy &amp;' but has 'const clang::PrintingPolicy &amp;')**\n</code></pre>\n\n<p>Am I doing something wrong or is the compiler broken?</p>\n"}, {"tags": ["c++", "windows", "performance", "graphics", "allegro"], "comments": [{"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1453929405, "post_id": 35047125, "comment_id": 57820518, "body": "Probably has something to do with <a href=\"https://en.wikipedia.org/wiki/Desktop_Window_Manager\" rel=\"nofollow noreferrer\">Windows DWM</a>."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5848297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/436ea4aae71ca5931699ba2bf9d87e52?s=128&d=identicon&r=PG&f=1", "display_name": "Cathier", "link": "https://stackoverflow.com/users/5848297/cathier"}, "edited": false, "score": 0, "creation_date": 1453929432, "post_id": 35047562, "comment_id": 57820539, "body": "I was mainly interested in WHY this happens rather than how to do it. But I actually included double-buffering in my code now and I am surprised how momentarily it drew everything."}, {"owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "reply_to_user": {"reputation": 13, "user_id": 5848297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/436ea4aae71ca5931699ba2bf9d87e52?s=128&d=identicon&r=PG&f=1", "display_name": "Cathier", "link": "https://stackoverflow.com/users/5848297/cathier"}, "edited": false, "score": 1, "creation_date": 1453931177, "post_id": 35047562, "comment_id": 57821555, "body": "Like I said, Windows stops handling the redraw messages when the window is dragged around, so your screen surface actually becomes kind of an offscreen surface, which automatically speeds off the process."}], "tags": [], "owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "is_accepted": true, "score": 3, "last_activity_date": 1453927205, "creation_date": 1453927205, "answer_id": 35047562, "question_id": 35047125, "link": "https://stackoverflow.com/questions/35047125/weirdly-behaving-pixel-by-pixel-3d-graphing-program-faster-drawing-by-dragging/35047562#35047562", "title": "Weirdly behaving pixel by pixel 3d graphing program [Faster drawing by dragging the window]", "body": "<p>Drawing on screen surfaces, whatever library you're using, is always a costly operation.</p>\n\n<p>I never used Allegro (I'm using the SDL), but I would guess that windows redraws the screen surface each time a single pixel is put on it, and by dragging the windows around, you prevent the redrawing from actually happening.</p>\n\n<p>If you want your program to get a dramatic increase in performance, you should always draw to an off-screen surface, and blit the entire surface to the screen surface once the drawing is over (this is a basic double buffering technique).</p>\n\n<p>Like I said, I never used Allegro, but from what I could gather, you could do something like that :</p>\n\n<pre><code>int main()\n{\n  unsigned int res_width, res_height;\n\n  cout &lt;&lt; \"Window size (W,H): \";\n  cin &gt;&gt; res_width &gt;&gt; res_height;\n  cout &lt;&lt; endl &lt;&lt; \"Initiating in \" &lt;&lt; res_width &lt;&lt; \"x\" &lt;&lt; res_height &lt;&lt; \" resolution...\" &lt;&lt; endl;\n\n  init(res_width,res_height);\n\n  BITMAP *temporaryBitmap = create_bitmap(res_width, res_height);\n\n  cout &lt;&lt; \"Success! Drawing graph...\" &lt;&lt; endl;\n\n  for (int y=0; y&lt;res_height; y++)\n  {\n    for (int x=0; x&lt;res_width; x++)\n    {\n        float valued_x = (int_to_float(x)-(int_to_float(res_width)/2))/SCALE;\n        float valued_y = (int_to_float(-y)+(int_to_float(res_height)/2))/SCALE;\n        _putpixel24(temporaryBitmap,x,y,get_z_color(get_z(valued_x,valued_y)));\n        //cout &lt;&lt; \"Drawing (\" &lt;&lt; valued_x &lt;&lt; \",\" &lt;&lt; valued_y &lt;&lt; \")\" &lt;&lt; endl;\n    }\n  }\n\n  blit(temporaryBitmap, screen, 0, 0, 0, 0, temporaryBitmap-&gt;w, temporaryBitmap-&gt;h);\n\n  cout &lt;&lt; \"Graph drawn.\" &lt;&lt; endl;\n\n  cin &gt;&gt; new char;\n\n  cout &lt;&lt; \"Closing...\";\n\n  destroy_bitmap(temporaryBitmap);\n\n  deinit();\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5848297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/436ea4aae71ca5931699ba2bf9d87e52?s=128&d=identicon&r=PG&f=1", "display_name": "Cathier", "link": "https://stackoverflow.com/users/5848297/cathier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 1, "accepted_answer_id": 35047562, "answer_count": 1, "score": 1, "last_activity_date": 1453927205, "creation_date": 1453925567, "question_id": 35047125, "link": "https://stackoverflow.com/questions/35047125/weirdly-behaving-pixel-by-pixel-3d-graphing-program-faster-drawing-by-dragging", "title": "Weirdly behaving pixel by pixel 3d graphing program [Faster drawing by dragging the window]", "body": "<p>So I was coding a simple 3d graphing program in C++ using Allegro 4 libraries. I made it in the most simple way, by drawing pixel by pixel. Usually, putting single pixels on the screen is pretty slow because of how Allegro works and to plot a graph in resolution of 640x480 I have to wait a minute or two.</p>\n\n<p>So I was rendering an image for my buddy to show and so I was dragging windows around to have a good screenshot and I discovered that by dragging the window with the rendering picture, it greatly speeds up as long as I hold the window. From 2 minutes it draws everything in 10 seconds.</p>\n\n<p>What's the cause of this bizzare behavior? Is it something related to Windows' windows or is it caused by Allegro itself? Is there any explanation for this?</p>\n\n<p><a href=\"http://i.stack.imgur.com/rKReV.png\" rel=\"nofollow\">Screenshot</a></p>\n\n<p>Also my code</p>\n\n<pre><code>#include &lt;allegro.h&gt;\n#include &lt;iostream&gt;\n#include &lt;math.h&gt;\n\nusing namespace std;\n\nfloat MAX_Z = 1;\nfloat MIN_Z =-1;\nfloat SCALE =50;\n\ninline void init(unsigned int width, unsigned int height)\n{\n    allegro_init();\n    set_color_depth(24);\n    set_gfx_mode(GFX_AUTODETECT_WINDOWED, width, height, 0, 0);\n\n    install_timer();\n    install_keyboard();\n    install_mouse();\n}\n\ninline void deinit()\n{\n    clear_keybuf();\n    allegro_exit();\n}\n\nint get_z_color (float z)\n{\n    if (z &gt;= 0)\n    {\n        return makecol(255, (z/MAX_Z)*255, (z/MAX_Z)*255);\n    }\n    else\n    {\n        return makecol(255 - (z/MIN_Z)*255,0, 0);\n    }\n}\n\nfloat get_z (float x, float y)\n{\n    return sin(sqrt(pow(x,2)+pow(y,2)));\n}\n\nfloat int_to_float (int a)\n{\n    return a;\n}\n\nint main()\n{\n    unsigned int res_width, res_height;\n\n    cout &lt;&lt; \"Window size (W,H): \";\n    cin &gt;&gt; res_width &gt;&gt; res_height;\n    cout &lt;&lt; endl &lt;&lt; \"Initiating in \" &lt;&lt; res_width &lt;&lt; \"x\" &lt;&lt; res_height &lt;&lt; \" resolution...\" &lt;&lt; endl;\n\n    init(res_width,res_height);\n\n    cout &lt;&lt; \"Success! Drawing graph...\" &lt;&lt; endl;\n\n    for (int y=0; y&lt;res_height; y++)\n    {\n        for (int x=0; x&lt;res_width; x++)\n        {\n            float valued_x = (int_to_float(x)-(int_to_float(res_width)/2))/SCALE;\n            float valued_y = (int_to_float(-y)+(int_to_float(res_height)/2))/SCALE;\n            _putpixel24(screen,x,y,get_z_color(get_z(valued_x,valued_y)));\n            //cout &lt;&lt; \"Drawing (\" &lt;&lt; valued_x &lt;&lt; \",\" &lt;&lt; valued_y &lt;&lt; \")\" &lt;&lt; endl;\n        }\n    }\n\n    cout &lt;&lt; \"Graph drawn.\" &lt;&lt; endl;\n\n    cin &gt;&gt; new char;\n\n    cout &lt;&lt; \"Closing...\";\n\n    deinit();\n    return 0;\n}\nEND_OF_MAIN()\n</code></pre>\n"}, {"tags": ["c++", "templates", "inheritance", "g++", "template-meta-programming"], "answers": [{"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 6, "last_activity_date": 1453924740, "creation_date": 1453924740, "answer_id": 35046888, "question_id": 35046825, "link": "https://stackoverflow.com/questions/35046825/c-base-template-class-virtual-methods-doesnt-appear-in-derived/35046888#35046888", "title": "C++ base template class virtual methods doesn&#39;t appear in derived?", "body": "<p>The other <code>data</code> is hidden.</p>\n\n<p>Do</p>\n\n<pre><code>template &lt;typename T_VALUE&gt;\nstruct B : public A&lt;T_VALUE&gt;\n{\n    using A&lt;T_VALUE&gt;::data; // Add this line\n    void data(Foo&lt;T_VALUE&gt;) {\n        std::cout &lt;&lt; \"smart FOO impl\\n\";\n    }\n};\n</code></pre>\n"}], "owner": {"reputation": 2549, "user_id": 749515, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/fdf40887bfac87aba430eec018cc0d2a?s=128&d=identicon&r=PG", "display_name": "pavelkolodin", "link": "https://stackoverflow.com/users/749515/pavelkolodin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "closed_date": 1453927472, "answer_count": 1, "score": 1, "last_activity_date": 1453924740, "creation_date": 1453924564, "question_id": 35046825, "link": "https://stackoverflow.com/questions/35046825/c-base-template-class-virtual-methods-doesnt-appear-in-derived", "closed_reason": "Duplicate", "title": "C++ base template class virtual methods doesn&#39;t appear in derived?", "body": "<p>Lest consider the following code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate &lt;typename T_VAL&gt;     // not used template argument\nstruct Foo {        int x;    };\n\ntemplate &lt;typename T_VAL&gt;\nstruct Bar {        int x;    };\n\ntemplate &lt;typename T_VALUE&gt;\nstruct A\n{\n    // just 2 overloaded data() members:\n\n    virtual void data(Foo&lt;T_VALUE&gt;) {\n        std::cout &lt;&lt; \"FOO EMPTY\\n\";\n    }\n\n    virtual void data(Bar&lt;T_VALUE&gt;) {\n        std::cout &lt;&lt; \"BAR EMPTY\\n\";\n    }\n};\n\n\ntemplate &lt;typename T_VALUE&gt;\nstruct B : public A&lt;T_VALUE&gt;\n{\n    void data(Foo&lt;T_VALUE&gt;) {\n        std::cout &lt;&lt; \"smart FOO impl\\n\";\n    }\n};\n\n\nint main(void) {\n\n    B&lt;float&gt; TheObject;\n    Bar&lt;float&gt; bar;\n\n    TheObject.data(bar); // I expect virtual base call here\n    return 0;\n}\n</code></pre>\n\n<p>The compiler message is:</p>\n\n<pre><code>tmpl.cpp: In function 'int main()':\ntmpl.cpp:43:14: error: no matching function for call to 'B&lt;float&gt;::data(Bar&lt;float&gt;&amp;)'\n  TheObject.data(bar);\n                    ^\n</code></pre>\n\n<p><code>void data(Bar&lt;T_VALUE&gt;)</code> -> <code>void data(Bar&lt;T_VALUE&gt;&amp;)</code> does not change anything</p>\n\n<p>Why the derived class B has no virtual void data(Bar&amp;)?</p>\n"}, {"tags": ["c++", "xml", "rapidxml"], "answers": [{"comments": [{"owner": {"reputation": 363, "user_id": 2170865, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/731d052380458e64417fd648ddd10f46?s=128&d=identicon&r=PG&f=1", "display_name": "Bilzard", "link": "https://stackoverflow.com/users/2170865/bilzard"}, "edited": false, "score": 0, "creation_date": 1453926201, "post_id": 35047084, "comment_id": 57818770, "body": "Oh. I thought it would search for other &quot;terrain&quot; siblings. Is there a way to read each terrain, skybox or entity individually without interfering eachother?"}, {"owner": {"reputation": 62852, "user_id": 1737, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9152c282382ec3b1f0cd18dc8ba7a5ab?s=128&d=identicon&r=PG", "display_name": "Roddy", "link": "https://stackoverflow.com/users/1737/roddy"}, "edited": false, "score": 0, "creation_date": 1456091673, "post_id": 35047084, "comment_id": 58773792, "body": "change this:-  <code>terrain = terrain-&gt;next_sibling()</code> to this: <code>terrain = terrain-&gt;next_sibling(&quot;terrain&quot;)</code>"}], "tags": [], "owner": {"reputation": 4579, "user_id": 459565, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cc92778353971733be88d04c26603ec7?s=128&d=identicon&r=PG", "display_name": "Eugene", "link": "https://stackoverflow.com/users/459565/eugene"}, "is_accepted": false, "score": 1, "last_activity_date": 1453925428, "creation_date": 1453925428, "answer_id": 35047084, "question_id": 35046819, "link": "https://stackoverflow.com/questions/35046819/reading-out-xml-serves-unexpected-output-in-c/35047084#35047084", "title": "Reading out XML serves unexpected output in C++", "body": "<p>The <code>for</code> loop start from node \"terrain\" and proceeds to the siblings, which are skybox and tiger.</p>\n"}], "owner": {"reputation": 363, "user_id": 2170865, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/731d052380458e64417fd648ddd10f46?s=128&d=identicon&r=PG&f=1", "display_name": "Bilzard", "link": "https://stackoverflow.com/users/2170865/bilzard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1453925428, "creation_date": 1453924520, "question_id": 35046819, "link": "https://stackoverflow.com/questions/35046819/reading-out-xml-serves-unexpected-output-in-c", "title": "Reading out XML serves unexpected output in C++", "body": "<p>I have a question about reading from a XML file. </p>\n\n<p>My XML File:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n    &lt;level&gt;\n       &lt;terrain name=\"terrain\" mesh=\"terrain.x\" texture=\"terrain.bmp\" position=\"011\"&gt;&lt;/terrain&gt;\n       &lt;skybox name=\"skybox\" mesh=\"skybox.x\" left=\"left.jpg\" right=\"right.jpg\" bottom=\"bottom.jpg\" top=\"top.jpg\" back=\"back.jpg\" front=\"front.jpg\" position=\"111\"&gt;&lt;/skybox&gt;\n       &lt;entity name=\"tiger\" mesh=\"tiger.x\" texture=\"tiger.bmp\" position=\"000\"&gt;&lt;/entity&gt;\n&lt;/level&gt;\n</code></pre>\n\n<p>My code:</p>\n\n<pre><code>rapidxml::xml_document&lt;&gt; doc;\nrapidxml::xml_node&lt;&gt;* root;\n\nstd::ifstream file(\"level\\\\noob.xml\");\n\n    std::vector&lt;char&gt; buffer((std::istreambuf_iterator&lt;char&gt;(file)), std::istreambuf_iterator&lt;char&gt;());\n    buffer.push_back('\\0');\n\n    doc.parse&lt;0&gt;(&amp;buffer[0]);\n\n    root = doc.first_node(\"level\");\n\n    for (rapidxml::xml_node&lt;&gt;* terrain = root-&gt;first_node(\"terrain\"); terrain; terrain = terrain-&gt;next_sibling())\n    {\n        std::cout &lt;&lt; terrain-&gt;first_attribute(\"name\")-&gt;value() &lt;&lt; std::endl;\n    }\n</code></pre>\n\n<p>So I only want to print the name of the terrain. But the outcome when running is this:</p>\n\n<pre><code>terrain\nskybox\ntiger\n</code></pre>\n\n<p>I check for the node \"terrain\" but it still prints the nodes \"skybox\" and \"tiger\". How?</p>\n"}, {"tags": ["c++", "linker", "linker-errors"], "comments": [{"owner": {"reputation": 21605, "user_id": 1142167, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/f9MAS.jpg?s=128&g=1", "display_name": "Joel Cornett", "link": "https://stackoverflow.com/users/1142167/joel-cornett"}, "edited": false, "score": 0, "creation_date": 1453924611, "post_id": 35046806, "comment_id": 57817863, "body": "Your implementation file shouldn&#39;t be redefining the class."}], "answers": [{"tags": [], "owner": {"reputation": 21605, "user_id": 1142167, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/f9MAS.jpg?s=128&g=1", "display_name": "Joel Cornett", "link": "https://stackoverflow.com/users/1142167/joel-cornett"}, "is_accepted": true, "score": 2, "last_activity_date": 1453924790, "creation_date": 1453924790, "answer_id": 35046899, "question_id": 35046806, "link": "https://stackoverflow.com/questions/35046806/c-unresolved-external-symbol/35046899#35046899", "title": "c++ unresolved external symbol?", "body": "<p>Your implementation file shouldn't be redefining the class. Here's what a possible (correct) code looks like:</p>\n\n<p>CS_OBJ.h:</p>\n\n<pre><code>class CS_RawUser\n{\npublic:\n    CS_RawUser(std::string username, std::string password, int level);\n};\n</code></pre>\n\n<p>CS_OBJ.cpp</p>\n\n<pre><code>#include \"CS_OBJ.h\"\n\nCS_RawUser::CS_RawUser(std::string username, std::string password, int level)\n{\n    ... // initialization here...\n}\n</code></pre>\n"}], "owner": {"reputation": 298, "user_id": 4265132, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5f6022f0afb8d9af623eeffd6d688ae0?s=128&d=identicon&r=PG&f=1", "display_name": "Thsise Faek", "link": "https://stackoverflow.com/users/4265132/thsise-faek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 950, "favorite_count": 0, "closed_date": 1453924909, "accepted_answer_id": 35046899, "answer_count": 1, "score": 0, "last_activity_date": 1453924790, "creation_date": 1453924442, "question_id": 35046806, "link": "https://stackoverflow.com/questions/35046806/c-unresolved-external-symbol", "closed_reason": "Duplicate", "title": "c++ unresolved external symbol?", "body": "<p>While working on my project in VS, I decided to split up the source into separate files. After trying to compile however, I got this error:</p>\n\n<pre><code>LNK2019 unresolved external symbol \"public: __thiscall CS_RawUser::CS_RawUser(class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt;,class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt;,int)\" (??0CS_RawUser@@QAE@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@0H@Z) referenced in function \"void __cdecl mkUser(class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt;,class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt;,class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt;)\" (?mkUser@@YAXV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@00@Z)\n</code></pre>\n\n<p>I searched on google and found multiple similar questions. However, all of them had the same answer regarding a missing implementation. In my source however (unless I am horribly mistaken) the function mentioned in the error is properly defined.</p>\n\n<p>CS_OBJ.cpp:</p>\n\n<pre><code>class CS_RawUser\n{\nprivate:\n    string m_username;\n    string m_password;\n    int m_level;\n\nstring compileDatabaseEntry()\n{\n    return \"CSEC_INSTANCE_USER:\" + m_username + \",\" + m_password + \",\" + to_string(m_level);\n}\n\npublic:\n    CS_RawUser(string username, string password, int level)\n    {\n        m_username = username;\n        m_password = password;\n        m_level = level;\n    }\n    string username() { return m_username; }\n    string password() { return m_password; }\n    int level() { return m_level; }\n    string compile() { return compileDatabaseEntry(); }\n};\n</code></pre>\n\n<p>CS_OBJ.h:</p>\n\n<pre><code>class CS_RawUser\n{\nprivate:\n    std::string m_username;\n    std::string m_password;\n    int m_level;\n    std::string compileDatabaseEntry();\npublic:\n    CS_RawUser(std::string username, std::string password, int level);\n    std::string username();\n    std::string password();\n    int level();\n    std::string compile();\n};\n</code></pre>\n"}, {"tags": ["c++", "constructor", "static", "global"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1453924333, "post_id": 35046756, "comment_id": 57817710, "body": "Unrelated: Shouldn&#39;t you be calling <code>theLed.TurnOn()</code> and <code>theLed.TurnOff()</code>? What if you have more than one Led?"}, {"owner": {"reputation": 850, "user_id": 4486783, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uXhyL.png?s=128&g=1", "display_name": "plats1", "link": "https://stackoverflow.com/users/4486783/plats1"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1453924726, "post_id": 35046756, "comment_id": 57817920, "body": "@immibis: the methods are static and <code>theLed</code> is not visible from main.cpp. Therefore <code>::</code>. And I would probably call the leds <code>PowerLed</code>, <code>ErrorLed</code> or anything and put them in a namespace like <code>Hardware::Led</code>. So I could turn on via <code>Hardware::Led::PowerLed::TurnOn ()</code>."}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 2, "creation_date": 1453925170, "post_id": 35046756, "comment_id": 57818158, "body": "Do all these LEDs have fundamentally different logic for initialisation and usage, or is the only difference in I/O registers?"}, {"owner": {"reputation": 850, "user_id": 4486783, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uXhyL.png?s=128&g=1", "display_name": "plats1", "link": "https://stackoverflow.com/users/4486783/plats1"}, "reply_to_user": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1453925305, "post_id": 35046756, "comment_id": 57818239, "body": "@paddy: They do have slightly different initialization. Some of it could however be generalized."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1453925576, "post_id": 35046756, "comment_id": 57818393, "body": "It would be <code>Hardware::Led::PowerLed.TurnOn()</code>, but I&#39;d say the namespace is just clutter unless your program is quite big (and with many things besides LEDs)."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1453926154, "post_id": 35046756, "comment_id": 57818739, "body": "<i>&quot;happens automagically as the header file is included&quot;</i>. Not in your example, the global is only in led.cpp."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1453926238, "post_id": 35046756, "comment_id": 57818796, "body": "BTW, Why do you want singleton(s) ?"}, {"owner": {"reputation": 850, "user_id": 4486783, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uXhyL.png?s=128&g=1", "display_name": "plats1", "link": "https://stackoverflow.com/users/4486783/plats1"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1453926415, "post_id": 35046756, "comment_id": 57818895, "body": "@Jarod42: Yes, you are right. The constructor is called before any other method of the compilation unit in which the object is instantiated. So it&#39;s up to the compiler on when exactly to call my initialization code. But at least it <i>feels</i> like &quot;including the file initializes the leds&quot;."}, {"owner": {"reputation": 850, "user_id": 4486783, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uXhyL.png?s=128&g=1", "display_name": "plats1", "link": "https://stackoverflow.com/users/4486783/plats1"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1453926574, "post_id": 35046756, "comment_id": 57818976, "body": "@Jarod42: It seems like my english lets you assume that I <i>wish I had</i> a singleton solution. (Sorry.) What I wanted to express is that I am not sure whether this should be implemented as singleton."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1453926962, "post_id": 35046756, "comment_id": 57819196, "body": "So, following seems to do the job: <code>int main ()   {     Led led;     led.TurnOn();     &#47;*...*&#47;     led.TurnOff();   }</code>"}, {"owner": {"reputation": 850, "user_id": 4486783, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uXhyL.png?s=128&g=1", "display_name": "plats1", "link": "https://stackoverflow.com/users/4486783/plats1"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1453927314, "post_id": 35046756, "comment_id": 57819370, "body": "@Jarod42: What I dislike about this approach is, that if you have lots of leds to initialize (and again, leds just serve as an example), you need to clutter your <code>main</code> method with lots of initialization. Of course you can encapsulate all those initializations in a function, but that feels ugly to me. Why not let the compiler do the work for me?"}, {"owner": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 0, "creation_date": 1453927617, "post_id": 35046756, "comment_id": 57819543, "body": "I personally think global state initialization before main is sort of ugly. It can be hidden in any object file, the order is not guaranteed by the standard (most of the time in the order you passed it to the linker). Also, many tools regarding debugging/profiling/instrumentation and whatnot don&#39;t deal particularly well with code before main. This is one of those cases where I vastly prefer being explicit to relying on implicit compiler/language behavior."}], "owner": {"reputation": 850, "user_id": 4486783, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uXhyL.png?s=128&g=1", "display_name": "plats1", "link": "https://stackoverflow.com/users/4486783/plats1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1453926802, "creation_date": 1453924254, "last_edit_date": 1453926802, "question_id": 35046756, "link": "https://stackoverflow.com/questions/35046756/what-alternatives-do-i-have-to-a-global-static-object-constructor", "title": "What alternatives do I have to a global static object constructor", "body": "<p>I have a solution that lets me easily add functionality to a microcontroller project by just (adding and) including some files. The whole initializatin of the hardware happens automagically as the header file is included. This approach is based on (the constructor of) a global static object:</p>\n\n<p><em>main.cpp</em>:</p>\n\n<pre><code>#include \"led.h\"  // &lt;-- Led gets initialized automagically\n\nint main ()\n  {\n    Led::TurnOn ();\n    // ...\n    Led::TurnOff ();\n  }\n</code></pre>\n\n<p><em>led.h</em>:</p>\n\n<pre><code>class Led\n  {\n  public:\n    Led () noexcept;\n\n  public:\n    static void TurnOn ();\n    static void TurnOff ();\n  };\n</code></pre>\n\n<p><em>led.cpp</em>:</p>\n\n<pre><code>/* Compiler calls constructor before first use of any method in\n   this compilation unit  */\nLed theLed;\n\nLed::Led () noexcept  // &lt;-- Shall not throw\n  {\n    // Initialize led\n  }\n\nvoid Led::TurnOn ()\n  {\n    // Turn led on\n  }\n\nvoid Led::TurnOff ()\n  {\n    // Turn led off\n  }\n</code></pre>\n\n<p>I wonder, whether a singleton / factory method approach should be used. But they both seem to imply lazy initialization (and are therefore not deterministic at runtime) or need the programmer to explicitly call some initialization method. (I know that my example is non-deterministic as well)</p>\n\n<p>So my question: \"<strong>What alternatives do I have to achieve similar behavior?</strong>\" and probably: what is the standard approach to initialize hardware in embedded projects (that need no de-initialization of any hardware)?</p>\n\n<p><em>edit: corrected a misleading wording</em></p>\n"}, {"tags": ["c++", "functor"], "comments": [{"owner": {"reputation": 7970, "user_id": 227322, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9df8e10b1e84522c5a3afd056ead0712?s=128&d=identicon&r=PG", "display_name": "villintehaspam", "link": "https://stackoverflow.com/users/227322/villintehaspam"}, "edited": false, "score": 1, "creation_date": 1453924524, "post_id": 35046749, "comment_id": 57817810, "body": "can you perhaps use just a single value <code>int myval</code> and set it using <code>myval = val ? val1 : val2;</code> in the constructor?"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1453924587, "post_id": 35046749, "comment_id": 57817850, "body": "&quot;set once at start-up&quot; Are they known at compile-time? Related: Can you use C++11?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1453924608, "post_id": 35046749, "comment_id": 57817861, "body": "Don&#39;t engage in premature optimizations. Branch prediction makes wonders. That being said, you can have a pointer to one or another, set it at construction time and than derefrence for return."}, {"owner": {"reputation": 913, "user_id": 360645, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/492a193e46645e1df7a4957bd049b9e4?s=128&d=identicon&r=PG", "display_name": "bsobaid", "link": "https://stackoverflow.com/users/360645/bsobaid"}, "edited": false, "score": 0, "creation_date": 1453924677, "post_id": 35046749, "comment_id": 57817902, "body": "yes I can use c++11. the value is not known at compile time as it is based on userinput. both myval1 and myval2 need to be stored separately as they have other uses."}, {"owner": {"reputation": 7970, "user_id": 227322, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9df8e10b1e84522c5a3afd056ead0712?s=128&d=identicon&r=PG", "display_name": "villintehaspam", "link": "https://stackoverflow.com/users/227322/villintehaspam"}, "edited": false, "score": 0, "creation_date": 1453924801, "post_id": 35046749, "comment_id": 57817969, "body": "Ok, that info was originally missing. You can set a pointer to the int you are interested in depending on the <code>bool</code> param and have <code>GetMyValue</code> return <code>*ptrToCorrectMyVal</code>"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1453925299, "post_id": 35046749, "comment_id": 57818233, "body": "If it&#39;s only set once, during construction, can it be <code>const</code>?"}, {"owner": {"reputation": 913, "user_id": 360645, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/492a193e46645e1df7a4957bd049b9e4?s=128&d=identicon&r=PG", "display_name": "bsobaid", "link": "https://stackoverflow.com/users/360645/bsobaid"}, "edited": false, "score": 0, "creation_date": 1453925447, "post_id": 35046749, "comment_id": 57818323, "body": "mmm..probably not because the value is based on user input and there is a rare situation where the myval can be changed but its much much less in frequency with which GetMyVal() is called"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1453925806, "post_id": 35046749, "comment_id": 57818534, "body": "If <code>myval</code> can ever change during the course of your program, then your question implies that you intend on writing a bug."}], "answers": [{"comments": [{"owner": {"reputation": 913, "user_id": 360645, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/492a193e46645e1df7a4957bd049b9e4?s=128&d=identicon&r=PG", "display_name": "bsobaid", "link": "https://stackoverflow.com/users/360645/bsobaid"}, "edited": false, "score": 0, "creation_date": 1453925041, "post_id": 35046959, "comment_id": 57818087, "body": "I will prefer not to introduce a new global variable. can function objects help in this situation?"}, {"owner": {"reputation": 11223, "user_id": 920539, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TIF5u.jpg?s=128&g=1", "display_name": "MiMo", "link": "https://stackoverflow.com/users/920539/mimo"}, "reply_to_user": {"reputation": 913, "user_id": 360645, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/492a193e46645e1df7a4957bd049b9e4?s=128&d=identicon&r=PG", "display_name": "bsobaid", "link": "https://stackoverflow.com/users/360645/bsobaid"}, "edited": false, "score": 1, "creation_date": 1453925143, "post_id": 35046959, "comment_id": 57818148, "body": "I think you would still need a variable to store the function object instance"}, {"owner": {"reputation": 913, "user_id": 360645, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/492a193e46645e1df7a4957bd049b9e4?s=128&d=identicon&r=PG", "display_name": "bsobaid", "link": "https://stackoverflow.com/users/360645/bsobaid"}, "edited": false, "score": 0, "creation_date": 1453925314, "post_id": 35046959, "comment_id": 57818248, "body": "i am ok with storing function object instance."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 913, "user_id": 360645, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/492a193e46645e1df7a4957bd049b9e4?s=128&d=identicon&r=PG", "display_name": "bsobaid", "link": "https://stackoverflow.com/users/360645/bsobaid"}, "edited": false, "score": 0, "creation_date": 1453925438, "post_id": 35046959, "comment_id": 57818316, "body": "@bsobaid: How is storing a function object instance any better than storing an <code>int*</code>?"}], "tags": [], "owner": {"reputation": 11223, "user_id": 920539, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TIF5u.jpg?s=128&g=1", "display_name": "MiMo", "link": "https://stackoverflow.com/users/920539/mimo"}, "is_accepted": true, "score": 1, "last_activity_date": 1453925720, "last_edit_date": 1453925720, "creation_date": 1453924996, "answer_id": 35046959, "question_id": 35046749, "link": "https://stackoverflow.com/questions/35046749/c-code-refactoring-using-function-objects/35046959#35046959", "title": "c++ code refactoring using function objects", "body": "<p>Use a pointer:</p>\n\n<pre><code>class MyValue\n{\n   int* myVal;\n   int myval1; //often updates\n   int myval2; //often updates\n\n  myValue(bool val, int val1, int val2)\n  {\n     if (val) { \n         myVal = &amp;myval1; \n     } else { \n         myVal = &amp;myval2 \n     }\n     myval1 = val1;\n     myval2 = val2;\n  }\n\n  int GetMyValue() //often called\n  {\n     return *myval;\n  }\n\n};\n</code></pre>\n\n<p>(or even better a reference as in Rabbid76 answer)</p>\n"}, {"tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": false, "score": 1, "last_activity_date": 1453925502, "last_edit_date": 1453925502, "creation_date": 1453925175, "answer_id": 35047015, "question_id": 35046749, "link": "https://stackoverflow.com/questions/35046749/c-code-refactoring-using-function-objects/35047015#35047015", "title": "c++ code refactoring using function objects", "body": "<p>Use a member which is either a reference to <code>myval1</code> or to <code>myval2</code>, the referenc has to be initialized once in the constructor:</p>\n\n<pre><code>class MyValue\n{\n    bool myVal; //set only once in the constructor\n    int myval1; //often updates\n    int myval2; //often updates\n    int &amp;valref;\n\npublic:\n    MyValue( bool val, int val1, int val2 )\n        : myVal( val )\n        , myval1( val1 )\n        , myval2( val2 )\n        , valref( val ? myval1 : myval2 )\n    {}\n\n    int GetMyVal() { return valref; }\n};\n</code></pre>\n"}], "owner": {"reputation": 913, "user_id": 360645, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/492a193e46645e1df7a4957bd049b9e4?s=128&d=identicon&r=PG", "display_name": "bsobaid", "link": "https://stackoverflow.com/users/360645/bsobaid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 35046959, "answer_count": 2, "score": 1, "last_activity_date": 1453925720, "creation_date": 1453924243, "last_edit_date": 1453925654, "question_id": 35046749, "link": "https://stackoverflow.com/questions/35046749/c-code-refactoring-using-function-objects", "title": "c++ code refactoring using function objects", "body": "<p>I have some functionality that returns a value based on values that are set once at start up (in constructor). As these conditional value are only set once, I dont want to be checking them all the time.\nIs there a way to do the if-check only once and then dont do it again and again using function objects or some other mechanism?</p>\n\n<pre><code>class MyValue {\n    bool myVal; //set only once in the constructor\n    int myval1; //often updates\n    int myval2; //often updates\n\n\n    myValue(bool val, int val1, int val2)\n    {\n        myVal = val; // only place where myVal is set\n\n        // this value changes often in other functions not shown here\n        myval1 = val1;\n\n        // this value changes often in other functions not shown here\n        myval2 = val2;\n    }\n\n    int GetMyValue() //often called\n    {\n        if(myval)    /* Is there a way I dont have to do an if check here? \n                        and simply write a return statement? */\n            return myval1;\n\n        return myval2;\n    }    \n};\n</code></pre>\n"}, {"tags": ["c++", "boost", "boost-asio"], "comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1453925381, "post_id": 35046714, "comment_id": 57818282, "body": "looking at things <a href=\"http://livecoding.tv/sehe\" rel=\"nofollow noreferrer\">livecoding.tv/sehe</a>"}, {"owner": {"reputation": 877, "user_id": 3666903, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/1i0Z6.jpg?s=128&g=1", "display_name": "bl4ckb0ne", "link": "https://stackoverflow.com/users/3666903/bl4ckb0ne"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1453929628, "post_id": 35046714, "comment_id": 57820664, "body": "@sehe : nice, I&#39;ll keep this on in my bookmarks, unfortunately I don&#39;t have flashplayer on my laptop."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1453930525, "post_id": 35046714, "comment_id": 57821166, "body": "Should already support HTML5 (lemme check). <a href=\"http://roadmap.livecoding.tv/\" rel=\"nofollow noreferrer\">roadmap.livecoding.tv</a> says week 4/2016"}, {"owner": {"reputation": 877, "user_id": 3666903, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/1i0Z6.jpg?s=128&g=1", "display_name": "bl4ckb0ne", "link": "https://stackoverflow.com/users/3666903/bl4ckb0ne"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1453930959, "post_id": 35046714, "comment_id": 57821434, "body": "<a href=\"http://i.imgur.com/xpk55U1.png\" rel=\"nofollow noreferrer\">i.imgur.com/xpk55U1.png</a> maybe an option I didn&#39;t turned on?"}], "answers": [{"comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 1, "creation_date": 1453930499, "post_id": 35047456, "comment_id": 57821150, "body": "Finally, the result of my review in a PR: <a href=\"https://github.com/Bl4ckb0ne/irc-boost/pull/1\" rel=\"nofollow noreferrer\">github.com/Bl4ckb0ne/irc-boost/pull/1</a> - You can see the recorded live stream of me coding those changes here: <a href=\"https://www.livecoding.tv/video/reviewing-a-toy-irc-bot-in-boost-asio/\" rel=\"nofollow noreferrer\">livecoding.tv/video/reviewing-a-toy-irc-bot-in-boost-asio</a>"}, {"owner": {"reputation": 261, "user_id": 5617251, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/3676a7bfe81dd7f0127b3cbd557ad3b9?s=128&d=identicon&r=PG&f=1", "display_name": "Nishant Sharma", "link": "https://stackoverflow.com/users/5617251/nishant-sharma"}, "edited": false, "score": 0, "creation_date": 1517460292, "post_id": 35047456, "comment_id": 84107077, "body": "Hi, I just wanted to know how to run the program.. I was able to build the program by downloading the source from github as @sehe mentioned..  I need to know the steps.... The executable that is created runs fine..."}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 3, "last_activity_date": 1453930396, "last_edit_date": 1453930396, "creation_date": 1453926775, "answer_id": 35047456, "question_id": 35046714, "link": "https://stackoverflow.com/questions/35046714/boost-asio-async-operation-bad-file-descriptor/35047456#35047456", "title": "Boost asio async operation bad file descriptor", "body": "<ul>\n<li><code>connect</code> is never called.</li>\n</ul>\n\n<blockquote>\n  <p>This causes the \"bad file handle\" error</p>\n</blockquote>\n\n<h2>Further Notes</h2>\n\n<ul>\n<li>Suddenly, <code>_send</code> uses <em>synchronous</em> <code>asio::write</code>. Why?</li>\n<li>Error handling should probably be added there, too (catch or pass <code>error_code&amp;</code> argument).</li>\n<li><p>There's only one socket which never gets re-initialized or assigned. Embedding it into a shared pointer isn't changing anything\u00b9.</p></li>\n<li><p>This however is strange:</p>\n\n<pre><code>    std::cout &lt;&lt; \"Connecting to \" &lt;&lt; _server &lt;&lt; \" \" &lt;&lt; _port &lt;&lt; std::endl;\n\n    boost::asio::async_connect(*_socket, it,\n        boost::bind(&amp;Irc::_connectHandler, this, error)\n    );\n</code></pre>\n\n<p>This does potentially many asynchronous connect operations <strong>on the same socket</strong> simultaneously. This is a data race and therefore <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">Undefined Behaviour</a>, see: <a href=\"http://www.boost.org/doc/libs/1_60_0/doc/html/boost_asio/reference/ip__tcp/socket.html#boost_asio.reference.ip__tcp.socket.thread_safety\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n\n<p>So you need to fix it to use several sockets or sequential.\nTurns out, this is very simple: you're already using the free function version of <code>async_connect</code>:</p>\n\n<ul>\n<li><a href=\"http://www.boost.org/doc/libs/1_60_0/doc/html/boost_asio/reference/async_connect/overload1.html\" rel=\"nofollow noreferrer\">http://www.boost.org/doc/libs/1_60_0/doc/html/boost_asio/reference/async_connect/overload1.html</a></li>\n</ul>\n\n<blockquote>\n  <p>This function attempts to connect a socket to one of a sequence of endpoints. <strong><em>It does this by repeated calls to the socket's <code>async_connect</code> member function, once for each endpoint in the sequence, until a connection is successfully established.</em></strong></p>\n</blockquote>\n\n<p>So the fix is to just call it once.</p></li>\n<li><p>Your bind doesn't use a placeholder, instead uses a hardcoded error!</p>\n\n<pre><code>boost::system::error_code error = boost::asio::error::host_not_found;\nboost::asio::async_connect(_socket, it, boost::bind(&amp;Irc::_connectHandler, this, error));\n</code></pre>\n\n<p>Needs to be more like</p>\n\n<pre><code>boost::asio::async_connect(_socket, it, boost::bind(&amp;Irc::_connectHandler, this, boost::asio::placeholders::error()));\n</code></pre></li>\n<li><p>after handling incoming traffic, you need to consume the buffer contents, or it will infinitely repeat the same:</p>\n\n<pre><code>_readHandler(tokenizer);\n\n_buffer.consume(_buffer.size());\n</code></pre></li>\n</ul>\n\n<h2>Pull Request</h2>\n\n<ul>\n<li><a href=\"https://github.com/Bl4ckb0ne/irc-boost/pull/1\" rel=\"nofollow noreferrer\">https://github.com/Bl4ckb0ne/irc-boost/pull/1</a></li>\n</ul>\n\n<p>Adds:</p>\n\n<pre><code>869c225 Use shared_ptr\n9042c6d Add function level trace\n50dee1b Revert shared_ptr and rename _onConnect(ed)\n20475b9 Fixing the async_connect debacle\nc6d8a2e Fixed channel handling and consistency join/part\n6fd9242 Initiate `connect()` instead of read from `run()`\n06a6c06 Do **not** assume contiguous buffer storage (UB)\n090fe8c Consume handled input\n68e5e8a Comment\n</code></pre>\n\n<p>All the above changed, I have successfully connected to an IRC channel and receiving mesages.</p>\n\n<p><a href=\"https://i.stack.imgur.com/lO0an.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lO0an.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p>\u00b9 (especially not unless you make sure something hangs on to an instance of the shared_ptr)</p>\n"}], "owner": {"reputation": 877, "user_id": 3666903, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/1i0Z6.jpg?s=128&g=1", "display_name": "bl4ckb0ne", "link": "https://stackoverflow.com/users/3666903/bl4ckb0ne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2755, "favorite_count": 0, "accepted_answer_id": 35047456, "answer_count": 1, "score": 3, "last_activity_date": 1453930396, "creation_date": 1453924095, "question_id": 35046714, "link": "https://stackoverflow.com/questions/35046714/boost-asio-async-operation-bad-file-descriptor", "title": "Boost asio async operation bad file descriptor", "body": "<p>I'm usig boost asio for an IRC bot, and one of my async operation results in a bad file descriptor. I tried to put the socket in a shared_ptr, but I still got the \"Bad File Descriptor\" error. I don't know whats wrong in it.</p>\n\n<p>Here are the files, I omitted some of the functions from the cpp file. But I you want to read the full file, it's <a href=\"https://github.com/Bl4ckb0ne/irc-boost/blob/master/irc.cpp\" rel=\"nofollow\">here</a> on my Github.</p>\n\n<p>The error happends in the _read function.</p>\n\n<p>Thanks!</p>\n\n<p>irc.hpp</p>\n\n<pre><code>#ifndef H_IRC\n#define H_IRC\n\n#include &lt;vector&gt;\n#include &lt;boost/asio.hpp&gt;\n#include &lt;boost/tokenizer.hpp&gt;\n#include &lt;boost/shared_ptr.hpp&gt;\n\nclass Irc \n{\n    public:\n        Irc(const std::string &amp;server, const std::string &amp;port, const std::function&lt;void()&gt; onConnect);\n\n        void connect();\n        void close();\n\n        void user(const std::string &amp;username);\n        void user(const std::string &amp;username, const std::string &amp;hostname, const std::string &amp;server, const std::string &amp;realname);\n        void nick(std::string &amp;nickname);\n        void join(const std::string &amp;chan);\n        void part(const std::string &amp;chan);\n        void privmsg(const std::string &amp;to, const std::string &amp;msg);\n        void command(const std::string &amp;cmd, const std::string &amp;msg);\n        void command(const std::string &amp;cmd, const std::string &amp;to, const std::string &amp;msg);\n\n        void run();\n\n    private:\n        void _read(const boost::system::error_code &amp;error);\n        void _send(std::string &amp;message);\n        void _readHandler(const boost::tokenizer&lt;boost::char_separator&lt;char&gt; &gt; &amp;tokenizer);\n        void _connectHandler(const boost::system::error_code &amp;error);\n\n        void _pong(const std::string &amp;ping);\n\n        std::string _server;\n        std::string _port;\n        std::string _chan;\n        std::vector&lt;std::function&lt;void (const boost::tokenizer&lt;boost::char_separator&lt;char&gt; &gt;&amp;)&gt;&gt; _readHandlers;\n        std::function&lt;void()&gt; _onConnect;\n        boost::asio::streambuf _buffer;\n        boost::asio::io_service _ios;\n        boost::shared_ptr&lt;boost::asio::ip::tcp::socket&gt; _socket;\n};\n\n#endif\n</code></pre>\n\n<p>irc.cpp</p>\n\n<pre><code>#include \"irc.hpp\"\n#include &lt;iostream&gt;\n#include &lt;boost/bind.hpp&gt;\n#include &lt;boost/make_shared.hpp&gt;\n\nIrc::Irc(const std::string &amp;server, const std::string &amp;port, const std::function&lt;void()&gt; onConnect)\n    : _server(server), _port(port), _onConnect(onConnect), \n      _socket(boost::make_shared&lt;boost::asio::ip::tcp::socket&gt;(boost::ref(_ios)))\n{\n    // Ping back handler\n    _readHandlers.push_back([this](const boost::tokenizer&lt;boost::char_separator&lt;char&gt; &gt; &amp;tokenizer) {\n        std::vector&lt;std::string&gt; tokens(begin(tokenizer), end(tokenizer)); \n\n        if(tokens[0].compare(\"PING\") == 0)\n            _pong(tokens[1]);   \n    });\n\n}\n\nvoid Irc::connect()\n{\n    boost::asio::ip::tcp::resolver resolver(_ios);\n    boost::asio::ip::tcp::resolver::query query(_server, _port);\n    boost::asio::ip::tcp::resolver::iterator it = resolver.resolve(query);\n    boost::asio::ip::tcp::resolver::iterator end;\n    boost::system::error_code error = boost::asio::error::host_not_found;\n\n    while(it != end)\n    {\n        if(!error)\n            break;\n\n        std::cout &lt;&lt; \"Connecting to \" &lt;&lt; _server &lt;&lt; \" \" &lt;&lt; _port &lt;&lt; std::endl;\n\n        boost::asio::async_connect(*_socket, it,\n            boost::bind(&amp;Irc::_connectHandler, this, error)\n        );\n\n        it++;\n\n        if(error)\n            std::cout &lt;&lt; \"Error : \" &lt;&lt; error.message() &lt;&lt; std::endl;\n\n    }\n\n    if(error)\n        std::cout &lt;&lt; \"Error connectinf to \" &lt;&lt; _server &lt;&lt; \" \" &lt;&lt; error.message() &lt;&lt; std::endl;\n    else\n        std::cout &lt;&lt; \"Connection success\" &lt;&lt; std::endl;\n\n}\n\nvoid Irc::close()\n{\n    _socket-&gt;close();\n    _ios.stop();\n}\n\nvoid Irc::run()\n{\n    boost::asio::async_read_until(*_socket, _buffer, \"\\r\\n\",\n        boost::bind(&amp;Irc::_read, this,\n            boost::asio::placeholders::error\n        )\n    );\n\n    _ios.run();\n}\n\n/*\n * Private\n */\n\nvoid Irc::_read(const boost::system::error_code &amp;error)\n{\n    if(error)\n    {\n        std::cerr &lt;&lt; \"Error in read : \" &lt;&lt; error.message() &lt;&lt; std::endl;\n    }\n    else\n    {\n        std::string data(buffers_begin(_buffer.data()), buffers_begin(_buffer.data()) + _buffer.size());\n        std::cout &lt;&lt; data &lt;&lt; std::endl;     \n\n        boost::char_separator&lt;char&gt; sep(\"!@:; \");\n        boost::tokenizer&lt;boost::char_separator&lt;char&gt; &gt; tokenizer(data, sep);\n\n        _readHandler(tokenizer);\n        boost::asio::async_read_until(*_socket, _buffer, \"\\r\\n\",\n            boost::bind(&amp;Irc::_read, this,\n                boost::asio::placeholders::error\n            )\n        );\n\n    }\n}\n\ninline void Irc::_send(std::string &amp;message)\n{\n    boost::asio::write(*_socket, boost::asio::buffer(message + \"\\r\\n\"));\n}\n\nvoid Irc::_readHandler(const boost::tokenizer&lt;boost::char_separator&lt;char&gt; &gt; &amp;tokenizer)\n{\n    for(auto it : _readHandlers)\n        it(tokenizer);\n}\n\nvoid Irc::_connectHandler(const boost::system::error_code &amp;error)\n{\n    if(!error)\n    {\n        _onConnect();\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "algorithm", "logic"], "comments": [{"owner": {"reputation": 97, "user_id": 1881435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8485db773614dc46c43d865e9f61018d?s=128&d=identicon&r=PG", "display_name": "mikbanUtah", "link": "https://stackoverflow.com/users/1881435/mikbanutah"}, "edited": false, "score": 0, "creation_date": 1453924111, "post_id": 35046549, "comment_id": 57817582, "body": "You need to actually ask a question, you can&#39;t just say &quot;Here is my problem, please solve it.&quot;"}, {"owner": {"reputation": 19, "user_id": 5795333, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PuWen.jpg?s=128&g=1", "display_name": "Rotsin", "link": "https://stackoverflow.com/users/5795333/rotsin"}, "reply_to_user": {"reputation": 97, "user_id": 1881435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8485db773614dc46c43d865e9f61018d?s=128&d=identicon&r=PG", "display_name": "mikbanUtah", "link": "https://stackoverflow.com/users/1881435/mikbanutah"}, "edited": false, "score": 0, "creation_date": 1453924265, "post_id": 35046549, "comment_id": 57817671, "body": "my bad, I added comments where I&#39;m having trouble understanding. You dont need to solve it. Just point me in the right direction."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 5795333, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PuWen.jpg?s=128&g=1", "display_name": "Rotsin", "link": "https://stackoverflow.com/users/5795333/rotsin"}, "edited": false, "score": 0, "creation_date": 1453924701, "post_id": 35046737, "comment_id": 57817909, "body": "Thanks for the reply, what I was trying to attempt is to overwrite smallest with the condition that its smaller than largest and next time around the loop to overwrite it based on the condition that its smaller than previous smallest. Is there any way to do that with logical operators ? Been experimenting for a long while... nothing in the book issimilar to it."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 19, "user_id": 5795333, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PuWen.jpg?s=128&g=1", "display_name": "Rotsin", "link": "https://stackoverflow.com/users/5795333/rotsin"}, "edited": false, "score": 0, "creation_date": 1453925674, "post_id": 35046737, "comment_id": 57818450, "body": "@Rotsin There may be but I am not sure,  General it is just done with an if condition."}, {"owner": {"reputation": 19, "user_id": 5795333, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PuWen.jpg?s=128&g=1", "display_name": "Rotsin", "link": "https://stackoverflow.com/users/5795333/rotsin"}, "edited": false, "score": 0, "creation_date": 1454009306, "post_id": 35046737, "comment_id": 57863582, "body": "Figure it out !! It came to while taking a shower :D !"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 1, "last_activity_date": 1453924220, "creation_date": 1453924220, "answer_id": 35046737, "question_id": 35046549, "link": "https://stackoverflow.com/questions/35046549/logic-help-for-smallest-largest-value/35046737#35046737", "title": "logic help for smallest/largest value", "body": "<p>More than likely your problem comes from the fact that you are initializing <code>smallest</code> to 0.  If you never enter anything smaller than 0 then <code>smallest</code> will never change.</p>\n\n<p>When finding the minimum and maximum values you want to set the the initial value to the largest or smallest number respectively that it can hold.  So in this case we would use</p>\n\n<pre><code>double smallest = std::numeric_limits&lt;double&gt;::max(); \ndouble largest = std::numeric_limits&lt;double&gt;::lowest()\ndouble num = 0;\n</code></pre>\n\n<p>This was anything in your data set should be less than <code>smallest</code> and everything should be grater than <code>largest</code>.</p>\n\n<p>This does require <code>#include &lt;limits&gt;</code></p>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 5795333, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PuWen.jpg?s=128&g=1", "display_name": "Rotsin", "link": "https://stackoverflow.com/users/5795333/rotsin"}, "edited": false, "score": 0, "creation_date": 1453924972, "post_id": 35046870, "comment_id": 57818051, "body": "Thanks for the reply, I have already most of the code and requirements. What I&#39;m working on is to overwrite smallest with the condition that its smaller than largest and next time around the loop to overwrite it based on the condition that its smaller than previous smallest. Is there any way to do that with logical operators ?"}, {"owner": {"reputation": 727, "user_id": 5825717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mRVsi.jpg?s=128&g=1", "display_name": "RobClucas", "link": "https://stackoverflow.com/users/5825717/robclucas"}, "reply_to_user": {"reputation": 19, "user_id": 5795333, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PuWen.jpg?s=128&g=1", "display_name": "Rotsin", "link": "https://stackoverflow.com/users/5795333/rotsin"}, "edited": false, "score": 0, "creation_date": 1453925210, "post_id": 35046870, "comment_id": 57818178, "body": "I&#39;ve showed you how to do it, check the last line of my answer. You don&#39;t need to check that the new value is smaller than both the largest and the smallest. If smallest &lt; largest (which it should be) then you only need to check that new_value &lt; smallest on each iteration. Similarly, you just need to check if new_value &gt; largest to update largest. If you initialise smallest and largest correctly, as both Nathan and I showed, then you shouldn&#39;t have any problems."}, {"owner": {"reputation": 19, "user_id": 5795333, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PuWen.jpg?s=128&g=1", "display_name": "Rotsin", "link": "https://stackoverflow.com/users/5795333/rotsin"}, "edited": false, "score": 0, "creation_date": 1453925797, "post_id": 35046870, "comment_id": 57818527, "body": "I understand, ill do it this way. Wanted to solve it without using &lt;limits&gt;, since I havent come across it in the book yet. Thanks for the help."}], "tags": [], "owner": {"reputation": 727, "user_id": 5825717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mRVsi.jpg?s=128&g=1", "display_name": "RobClucas", "link": "https://stackoverflow.com/users/5825717/robclucas"}, "is_accepted": true, "score": 0, "last_activity_date": 1453924689, "creation_date": 1453924689, "answer_id": 35046870, "question_id": 35046549, "link": "https://stackoverflow.com/questions/35046549/logic-help-for-smallest-largest-value/35046870#35046870", "title": "logic help for smallest/largest value", "body": "<p>You need to choose a standard unit of measure. The question suggests meters, so use that (you can use <code>float</code> or <code>double</code> for this, depending on what precision you need).</p>\n\n<p>The problem is then simple, create some variables for the sum, smallest seen, and largest seen, the for each new input, convert to the standard format, and update the variables.</p>\n\n<p>The solution (to get you started, not working code) might look something like this:</p>\n\n<pre><code>// You can represent the different types of units as integers\nfloat convertToMeters(float unconvertedValue, int unit) {\n  // Convert unconvertedValue based on unit\n}\n\nfloat smallest = std::numeric_limits&lt;float&gt;::max();\nfloat largest  = std::numeric_limits&lt;float&gt;::lowest();\nfloat sum      = 0.0f;\n\n// Update for each new input\nwhile (new_input) {\n  float convertedValue = convertToMeters(new_value, unit);\n\n  // Update total\n  sum += convertedValue;\n\n  // Update smallest and largest\n  if (convertedValue &gt; largest) largest = convertedValue;\n  else if (convertedValue &lt; smallest) smallest = convertedValue;\n}\n</code></pre>\n\n<p>As Nathan mentioned, <code>#include &lt;limits&gt;</code> for the limits.</p>\n"}], "owner": {"reputation": 19, "user_id": 5795333, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PuWen.jpg?s=128&g=1", "display_name": "Rotsin", "link": "https://stackoverflow.com/users/5795333/rotsin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 35046870, "answer_count": 2, "score": -3, "last_activity_date": 1454009472, "creation_date": 1453923546, "last_edit_date": 1454009472, "question_id": 35046549, "link": "https://stackoverflow.com/questions/35046549/logic-help-for-smallest-largest-value", "title": "logic help for smallest/largest value", "body": "<p>I went thru so many version of the algorithm to sort smallest and largest that my brain is fried. The book up to this point and searching online haven't helped at all. \nI'm having difficulties at saving the last.\nI used 3 in, 10 cm and 5 cm as test cases. Entering 3 in first, becomes the largest, entering 5 cm second becomes smallest and then 10 cm becomes smallest again. Tried different version for over 2 hours, even re-wrote that entire section. In the book Programming Principles and Practices using C++, its in the review section, before that I cant find anything to help me out.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;string&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;iomanip&gt;\n\nusing namespace std;\n\nint main()\n{\n    vector&lt;double&gt;all_meters;\n\n    double smallest= 0,print_smallest, largest = 0,print_largest, num = 0;\n    string unit, s_input, num_s_input, small_unit, large_unit;\n\n    while(cin.good()){\n\n        cout &lt;&lt; \"\\n\\t\\t\\t\\tEnter '|' to exit.\\n\\n\";\n        cout &lt;&lt; \"\\t\\tNumber to compare followed by white space and unit:\";\n        cin &gt;&gt; num_s_input;\n\n        if(num_s_input.compare(\"|\") == 0 || (s_input.compare(\"|\") == 0)){\n            double sum = 0;\n            for (double x : all_meters) sum+=x;\n            cout &lt;&lt; \"Sum: \" &lt;&lt; setprecision(4) &lt;&lt; sum &lt;&lt;  \"m\\n\";\n            cout &lt;&lt; \"Smallest number: \" &lt;&lt; print_smallest &lt;&lt; small_unit &lt;&lt; endl\n                 &lt;&lt; \"Largest number: \" &lt;&lt; print_largest &lt;&lt; large_unit &lt;&lt; endl\n                 &lt;&lt; \"Total number of values: \" &lt;&lt; all_meters.size() &lt;&lt; endl\n                 &lt;&lt; \"All the entered numbers converted to meters are: \\n\";\n            for (double i = 0; i&lt;all_meters.size(); ++i){\n                cout &lt;&lt; all_meters[i] &lt;&lt; setprecision(2) &lt;&lt;\"m \";\n            }\n            cout &lt;&lt; \"\\nAlright now, goodbye then !\\n\" &lt;&lt; endl;\n            break;\n            }\n        else{\n            cin &gt;&gt; s_input;\n            num = strtod(num_s_input.c_str(), NULL);\n            unit = s_input;\n\n            double meter = 0;\n            if(unit==\"cm\"){\n                    meter = num / 100;}\n\n            else if(unit==\"in\"){\n                    meter = num / 39.370;}\n\n            else if(unit==\"ft\"){\n                    meter = num / 3.2808;}\n\n            else if(unit==\"m\"){\n                    meter = num;}\n\n            else {\n                cout &lt;&lt; \"\\n\\tYou entered wrong unit!\\t\\n\";}\n\n            if(largest==0){\n                largest = meter;\n                print_largest = num;\n                large_unit = unit;\n                cout &lt;&lt; num &lt;&lt; unit &lt;&lt; \" largest so far.\\n\";\n            }\n            else if(smallest==0&amp;&amp;meter&lt;largest){\n                smallest = meter;\n                print_smallest = num;\n                small_unit = unit;\n                cout &lt;&lt; num &lt;&lt; unit &lt;&lt; \" smallest so far.\\n\";\n            }\n            else if(largest&lt;meter){\n                largest = meter;\n                print_largest = num;\n                large_unit = unit;\n                cout &lt;&lt; num &lt;&lt; unit &lt;&lt; \" largest so far.\\n\";\n            }\n            else if(smallest&gt;meter){\n                smallest = meter;\n                print_smallest = num;\n                small_unit = unit;\n                cout &lt;&lt; num &lt;&lt; unit &lt;&lt; \" smallest so far.\\n\";\n            }\n            all_meters.push_back(meter);\n            sort(all_meters.begin(),all_meters.end());\n        }\n    }\n}\n</code></pre>\n\n<p>Managed to solve it without using limit, added the new changes to the code. Thanks for the help guys ! </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1453923903, "post_id": 35046463, "comment_id": 57817449, "body": "<code>2016-01-17 Red 1 2 2.252016-01-18 blue 3 1 1.34</code> - is that really your data? No delimiter?"}, {"owner": {"reputation": 4372, "user_id": 4275479, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/4bbcN.jpg?s=128&g=1", "display_name": "procatmer", "link": "https://stackoverflow.com/users/4275479/procatmer"}, "edited": false, "score": 1, "creation_date": 1453923998, "post_id": 35046463, "comment_id": 57817515, "body": "yes, no separator. the data is like that. that&#39;s why i got this problem"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1453924235, "post_id": 35046463, "comment_id": 57817657, "body": "<code>getline</code> gets the entire line, which, according to your example, will read all the data for a record. All the other file input operations are moot."}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1453924667, "post_id": 35046463, "comment_id": 57817893, "body": "@HSK2609 The laziest way is to read the whole file into a <code>std::string</code> and insert <code>\\n</code> before every date (except the first one). You can use regex for that, or just search for <code>2016</code> if appears only as a year in the file. No <code>Record</code> class, assuming that you just want to reformat a large file."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1453928475, "post_id": 35046463, "comment_id": 57819996, "body": "Read in <code>l.ratio</code> token  and look backwards for for <code>&#39;-&#39;</code>. If no <code>&#39;-&#39;</code>, no date. Carry on. If <code>&#39;-&#39;</code>, look back further for the next one and then count back 4 more characters to get the year. Split here and store date for next read. If date stored, use it, clear it and read for colour. If no date stored, read for date."}], "answers": [{"tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": false, "score": 2, "last_activity_date": 1453924009, "creation_date": 1453924009, "answer_id": 35046690, "question_id": 35046463, "link": "https://stackoverflow.com/questions/35046463/reading-data-from-file-c/35046690#35046690", "title": "Reading data from file C++", "body": "<p>Never use <code>!logFile.eof()</code> to test the end of input it doesn't return <code>true</code> at the end of input.  Use <code>getline</code> instead, something like:</p>\n\n<pre><code>while ((getline(logFile, l.date, ' ') &amp;&amp; (getline(logFile, l.color, ' ')) {\n    // ...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1453928058, "post_id": 35046896, "comment_id": 57819774, "body": "Some fudge work required on the part of OP to make this fit their exact circumstances, but right idea and close enough for an upvote."}], "tags": [], "owner": {"reputation": 3796, "user_id": 4859885, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HcTm.jpg?s=128&g=1", "display_name": "Brian Rodriguez", "link": "https://stackoverflow.com/users/4859885/brian-rodriguez"}, "is_accepted": false, "score": 2, "last_activity_date": 1453933930, "last_edit_date": 1453933930, "creation_date": 1453924760, "answer_id": 35046896, "question_id": 35046463, "link": "https://stackoverflow.com/questions/35046463/reading-data-from-file-c/35046896#35046896", "title": "Reading data from file C++", "body": "<p>You can build a simple state machine and extract by space delimited strings:</p>\n\n<pre><code>enum Group { DATE_ALONE, COLOR, NUM1, NUM2, NUM3_AND_DATE };\n\nGroup state = Group::DATE_ALONE;\nstd::string str{};\nwhile (logFile &gt;&gt; str) {\n    switch (state) {\n    case Group::DATE_ALONE:\n        auto date = makeDateFromString(str);\n        doSomethingWith(date);\n        state = Group::COLOR;\n        break;\n    case Group::COLOR:\n        auto color = makeColorFromString(str);\n        doSomethingWith(color);\n        state = Group::NUM1;\n        break;\n    // etc...\n    case Group::NUM3_AND_DATE:\n        auto num = makeNumFromString(str.substr(0, 4));\n        doSomethingWith(num);\n        auto date = makeDateFromString(str.substr(4));\n        doSomethingWith(date);\n        state = Group::COLOR; // Skip the `DATE_ALONE` state\n        break;\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1453929389, "post_id": 35048115, "comment_id": 57820506, "body": "Even better than my pitch. On the <code>logFile.ignore(1000, &#39; &#39;);</code> bit, the rule of thumb is to use <code>numeric_limits&lt;streamsize&gt;::max()</code> instead of a hard-coded number."}], "tags": [], "owner": {"reputation": 4372, "user_id": 4275479, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/4bbcN.jpg?s=128&g=1", "display_name": "procatmer", "link": "https://stackoverflow.com/users/4275479/procatmer"}, "is_accepted": true, "score": 1, "last_activity_date": 1453929171, "creation_date": 1453929171, "answer_id": 35048115, "question_id": 35046463, "link": "https://stackoverflow.com/questions/35046463/reading-data-from-file-c/35048115#35048115", "title": "Reading data from file C++", "body": "<p>solved. since the value of <code>ratio</code> in the log file are all 3 digit decimal, so i changed the type of <code>ratio</code> to only accept 4 characters (example: <code>2.13</code>), then i deleted the <code>logFile.ignore(1000, ' ');</code> line. it works and it gives me the result i wanted.</p>\n"}], "owner": {"reputation": 4372, "user_id": 4275479, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/4bbcN.jpg?s=128&g=1", "display_name": "procatmer", "link": "https://stackoverflow.com/users/4275479/procatmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 35048115, "answer_count": 3, "score": 1, "last_activity_date": 1453933930, "creation_date": 1453923285, "last_edit_date": 1453923478, "question_id": 35046463, "link": "https://stackoverflow.com/questions/35046463/reading-data-from-file-c", "title": "Reading data from file C++", "body": "<p>I have these set of data in <code>.txt</code> log file:</p>\n\n<pre><code>2016-01-17 Red 1 2 2.252016-01-18 blue 3 1 1.34\n</code></pre>\n\n<p>I stored it to vector, and the code looks like this:</p>\n\n<pre><code>while(!logFile.eof()) {\n    getline(logFile, l.date, ' ');\n    getline(logFile, l.color, ' ');\n    logFile &gt;&gt; l.minUsage;\n    logFile &gt;&gt; l.maxUsage;\n    logFile &gt;&gt; l.ratio;\n    logFile.ignore(1000, ' ');\n\n    log.push_back(l);\n}\n</code></pre>\n\n<p>log's datatype is <code>vector&lt;Record&gt;</code> where <code>Record</code> is a class. I wanted the values to look like this when I'm printing it:</p>\n\n<pre><code>2016-01-17 Red  1 2 2.25\n2016-01-18 blue 3 1 1.34\n</code></pre>\n\n<p>but instead I got this output:</p>\n\n<pre><code>2016-01-17 Red  1 2 2.25\nblue 3 1 0 1.34\n</code></pre>\n\n<p>the second line doesn't store the value of the date from second set of data from <code>.txt</code> file. </p>\n\n<p>How to separate the <code>2.252016-01-18</code> from the <code>.txt</code> file into 2 different entries like <code>2.25</code> and <code>2016-01-18</code> ?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3796, "user_id": 4859885, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HcTm.jpg?s=128&g=1", "display_name": "Brian Rodriguez", "link": "https://stackoverflow.com/users/4859885/brian-rodriguez"}, "edited": false, "score": 1, "creation_date": 1453923192, "post_id": 35046382, "comment_id": 57817023, "body": "This is not a website where you ask people to fix code that does not work.  You should follow the logic of your program, find a part of it that isn&#39;t doing what you expect, and ask a question about <i>that</i>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1453923252, "post_id": 35046382, "comment_id": 57817061, "body": "It sounds like you may need to learn how to use a debugger to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming.  Further reading: <b><a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a></b>"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1453923685, "post_id": 35046382, "comment_id": 57817319, "body": "This code is overly complicated by far. Think about iterating over a string character by character, and using decimal equivalent values from the ASCII table. I can write your <code>main</code> legibly in 7 lines, so shoot for under 20."}], "answers": [{"comments": [{"owner": {"reputation": 634, "user_id": 4041091, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ce08a252af66e92274074462b3b08f82?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisD", "link": "https://stackoverflow.com/users/4041091/chrisd"}, "edited": false, "score": 1, "creation_date": 1453924537, "post_id": 35046623, "comment_id": 57817815, "body": "True, but he/she also needs to use % to extract the last digit and check if it is even."}, {"owner": {"reputation": 384, "user_id": 5601585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47cc66cd843f23cd582c84493691ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "Maertin", "link": "https://stackoverflow.com/users/5601585/maertin"}, "reply_to_user": {"reputation": 634, "user_id": 4041091, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ce08a252af66e92274074462b3b08f82?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisD", "link": "https://stackoverflow.com/users/4041091/chrisd"}, "edited": false, "score": 0, "creation_date": 1453924633, "post_id": 35046623, "comment_id": 57817872, "body": "That is handled (including incrementing the number of even numbers)  in code right before line mentioned above."}, {"owner": {"reputation": 41213, "user_id": 215568, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b05685e6c3945f4bd23bf1f967861aeb?s=128&d=identicon&r=PG", "display_name": "Donnie", "link": "https://stackoverflow.com/users/215568/donnie"}, "edited": false, "score": 0, "creation_date": 1453924704, "post_id": 35046623, "comment_id": 57817910, "body": "@ChrisD- why?  Think about the definition of even."}], "tags": [], "owner": {"reputation": 384, "user_id": 5601585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47cc66cd843f23cd582c84493691ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "Maertin", "link": "https://stackoverflow.com/users/5601585/maertin"}, "is_accepted": false, "score": 2, "last_activity_date": 1453923983, "last_edit_date": 1453923983, "creation_date": 1453923785, "answer_id": 35046623, "question_id": 35046382, "link": "https://stackoverflow.com/questions/35046382/counting-the-number-of-even-digits-in-a-number/35046623#35046623", "title": "Counting the number of even digits in a number?", "body": "<p><code>n1 = n1/10; not %</code></p>\n\n<p>That should solve basic logic to calculate number of even numbers. There could be other errors in code. I don't have C++ on my machine - so can't run it.</p>\n"}, {"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1453926798, "post_id": 35047078, "comment_id": 57819095, "body": "<code>s[i] % 2</code>, that assumes that <code>&#39;0&#39; % 2 == 0</code>... Better to do <code>(s[i] - &#39;0&#39;) % 2 == 0</code> (which assumes only that &#39;0&#39;-&#39;9&#39; is consecutive range)."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1453928090, "post_id": 35047078, "comment_id": 57819790, "body": "@Jarod42 I entirely forgot about this.:)"}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1453928059, "last_edit_date": 1453928059, "creation_date": 1453925404, "answer_id": 35047078, "question_id": 35046382, "link": "https://stackoverflow.com/questions/35046382/counting-the-number-of-even-digits-in-a-number/35047078#35047078", "title": "Counting the number of even digits in a number?", "body": "<p>In this loop</p>\n\n<pre><code>while (c &lt; x)\n{\n    if ( n1 % 2 == 0 )\n    {\n        z++;\n    };\n    n1 = n1 % 10;\n    c++;\n}; \n</code></pre>\n\n<p>after the first iteration variable n1 will be always equal to the last digit of the original number initially stored in n1.</p>\n\n<p>For example if you have number <code>1022</code> then after the first iteration due to the statement</p>\n\n<pre><code>n1 = n1 % 10;\n</code></pre>\n\n<p><code>n1</code> will be equal to <code>2</code>.</p>\n\n<p>And in subsequent iterations n1 will keep this value because</p>\n\n<pre><code>2 % 10 == 2\n</code></pre>\n\n<p>In general the logic of the program incorrect. For example if the user enters string <code>\"1022A\"</code> then the expression  in the if statement will be equal to true due to an error</p>\n\n<pre><code>istringstream convert(n);\nif ( !(convert &gt;&gt; n1) )\n     ^^^^^^^^^^^^^^^ this will be true because \"1022A\" is not a number \n    n1 = 0; //converts string to an int\n</code></pre>\n\n<p>So there is an inconsistence between the previous loop</p>\n\n<pre><code>while (true)\n{\nif (( n[i] &gt;= '0' &amp;&amp; n[i] &lt;= '9'))\n{\n    x++;\n}\nelse break;\ni++;\n}\n</code></pre>\n\n<p>that yields <code>4</code>  and the second loop where <code>n1</code> will be set to <code>0</code>.</p>\n\n<p>If to use loops then the program could be written the following way</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nint main()\n{\n    std::cout &lt;&lt; \"Hello n world!\" &lt;&lt; std::endl;\n\n    std::string s;\n    std::cin &gt;&gt; s; //The number itself\n\n    unsigned int digits = 0, evens = 0;\n\n    for ( std::string::size_type i = 0; i &lt; s.size() &amp;&amp; s[i] &gt;= '0' &amp;&amp; s[i] &lt;= '9'; i++ )\n    {\n        ++digits;\n        evens += ( s[i] - '0' ) % 2 == 0;\n    }        \n\n    std::cout &lt;&lt; \"The number has \" &lt;&lt; digits &lt;&lt; \" digit(s).\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"The number has \" &lt;&lt; evens &lt;&lt; \" even digit(s).\" &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output might look like</p>\n\n<pre><code>Hello n world!\n1022A\nThe number has 4 digit(s).\nThe number has 3 even digit(s).\n</code></pre>\n\n<p>Or you could check whether a string does not have a valid number representation and in this case issue an error.</p>\n"}], "owner": {"reputation": 11, "user_id": 5463742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d29d53c6d495fc2141d2a4d9f750f162?s=128&d=identicon&r=PG", "display_name": "Dominykas", "link": "https://stackoverflow.com/users/5463742/dominykas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 870, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1453928059, "creation_date": 1453923042, "last_edit_date": 1453924460, "question_id": 35046382, "link": "https://stackoverflow.com/questions/35046382/counting-the-number-of-even-digits-in-a-number", "title": "Counting the number of even digits in a number?", "body": "<p>I am looking to calculate the even numbers in a given string with C++. My code is:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nint i(0), c(0), z(0), j(1), n1, x(0);\nstring n;\n\nint main()\n{\n    cout &lt;&lt; \"Hello n world!\" &lt;&lt; endl;\n    cin &gt;&gt; n; //The number itself\n\n    while (true)\n    {\n        if (( n[i] &gt;= '0' &amp;&amp; n[i] &lt;= '9'))\n        {\n            x++;\n        }\n        else break;\n        i++;\n    } //Counts the numbers\n\n    cout &lt;&lt; \"The number has \" &lt;&lt; x &lt;&lt; \" digit(s).\" &lt;&lt; endl;\n\n    istringstream convert(n);\n    if ( !(convert &gt;&gt; n1) )\n        n1 = 0; //converts string to an int\n\n    while (c &lt; x)\n    {\n        if ( n1 % 2 == 0 )\n        {\n            z++;\n        };\n        n1 = n1 % 10;\n        c++;\n     }; //Counts the even numbers (I can feel this part is wrong, I just don't know how)\n\n    cout &lt;&lt; \"The number has\" &lt;&lt; z &lt;&lt; \" even digit(s).\" &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>But when I use it, when I enter 1022, I get 4 even numbers and if I enter 696969 it gives 0 even numbers. What do I do? What is wrong with my code?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1453923119, "post_id": 35046373, "comment_id": 57816984, "body": "And?  The error message is kinda self explanatory."}, {"owner": {"reputation": 2820, "user_id": 2562283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ef4e835ba48416df3d5607ae1a89bbf?s=128&d=identicon&r=PG", "display_name": "E. Moffat", "link": "https://stackoverflow.com/users/2562283/e-moffat"}, "edited": false, "score": 0, "creation_date": 1453923216, "post_id": 35046373, "comment_id": 57817040, "body": "<code>name</code> is of type <code>const char *</code>. <code>_strupr</code> is looking for an input of type <code>char *</code>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1453923289, "post_id": 35046373, "comment_id": 57817089, "body": "Interesting thing about <code>_strupr</code> is it modifies the provided string, converting it to upper case. Trying to modify a constant string is not that good an idea. The compiler is simply trying to tell you to not do something stupid."}, {"owner": {"reputation": 1516, "user_id": 2442877, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/YiIWC.jpg?s=128&g=1", "display_name": "MASh", "link": "https://stackoverflow.com/users/2442877/mash"}, "edited": false, "score": 0, "creation_date": 1453923362, "post_id": 35046373, "comment_id": 57817131, "body": "why not using MessageGroup::MessageGroup(char *name, Wordcollection *words)"}, {"owner": {"reputation": 4904, "user_id": 143504, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34e7b6be5f0a1bbc846d14eca893bbd3?s=128&d=identicon&r=PG", "display_name": "Julien-L", "link": "https://stackoverflow.com/users/143504/julien-l"}, "edited": false, "score": 0, "creation_date": 1453923377, "post_id": 35046373, "comment_id": 57817144, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/7791330/cannot-convert-parameter-from-const-char-to-char\">cannot convert parameter from `const char *` to `char *`</a>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1453923622, "post_id": 35046373, "comment_id": 57817279, "body": "We need to see the <code>assign</code> function backing <code>_name.assign</code> to suggest anything safe and optimal."}, {"owner": {"reputation": 21, "user_id": 5838913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12741602d8cd1cf7960816ca0e363077?s=128&d=identicon&r=PG&f=1", "display_name": "Darren", "link": "https://stackoverflow.com/users/5838913/darren"}, "edited": false, "score": 0, "creation_date": 1453927169, "post_id": 35046373, "comment_id": 57819293, "body": "I understand the error is straight forward, but I&#39;m not a C++ developer and I need to figure out how to get the uppercase form into _name."}, {"owner": {"reputation": 21, "user_id": 5838913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12741602d8cd1cf7960816ca0e363077?s=128&d=identicon&r=PG&f=1", "display_name": "Darren", "link": "https://stackoverflow.com/users/5838913/darren"}, "edited": false, "score": 0, "creation_date": 1453927324, "post_id": 35046373, "comment_id": 57819375, "body": "_Myt&amp; __CLR_OR_THIS_CALL assign(const _Elem *_Ptr) \t\t{\t// assign [_Ptr, &lt;null&gt;) \t\t_DEBUG_POINTER(_Ptr); \t\treturn (assign(_Ptr, _Traits::length(_Ptr))); \t\t}"}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1453927415, "post_id": 35046373, "comment_id": 57819429, "body": "@Darren You should <a href=\"http://stackoverflow.com/posts/35046373/edit\">edit</a> your question to include important details (i.e., not dump it in a comment)."}], "answers": [{"tags": [], "owner": {"reputation": 9793, "user_id": 2391169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47b9c6b03a46672d5698ec565319c072?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/2391169/david"}, "is_accepted": false, "score": 0, "last_activity_date": 1453923422, "creation_date": 1453923422, "answer_id": 35046510, "question_id": 35046373, "link": "https://stackoverflow.com/questions/35046373/c-cannot-convert-parameter-1-from-const-char-to-char/35046510#35046510", "title": "C++ cannot convert parameter 1 from &#39;const char *&#39; to &#39;char *&#39;", "body": "<p>A <code>const</code> type cannot be modified as part of the contract of accepting it as a <code>const</code>; this allows other code to call yours without needing to worry about the value being changed. However, since subsequent code <em>could</em> cause modifications, you cannot then pass the <code>const</code> parameter to a method which accepts a non-<code>const</code> version - in this case, <code>name.assign</code> would appear to do this, so <code>name.assign(_strupr(name));</code> is invalid.</p>\n"}, {"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1453924411, "post_id": 35046785, "comment_id": 57817755, "body": "No, No, No.  Do not cast away <code>const</code> on a <code>const</code> variable.  It is undefined behavior."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1453924480, "post_id": 35046785, "comment_id": 57817794, "body": "De-constifying <code>const</code> variables is a very bad thing to do. It lies to the function callers who believe the variable will not be modified and <code>name</code> may point to a non-writable region of memory leading to undefined behaviour."}, {"owner": {"reputation": 123, "user_id": 2951195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525a082c8472f4f9e2ff010ec6233ced?s=128&d=identicon&r=PG&f=1", "display_name": "rezeli", "link": "https://stackoverflow.com/users/2951195/rezeli"}, "edited": false, "score": 0, "creation_date": 1453953968, "post_id": 35046785, "comment_id": 57829472, "body": "Please not be religious on rules! as you see in my answer I say &quot;if you really have to&quot;! That means I know in general you should not do it, and in fact it is undefined if you apply it to something that is originally constant and therefore outside your dynamic memory address range. But in practicality there are cases when a poor API on a library that you can&#39;t change easily brings a situation that you know that the &quot;cons&quot;tant-ness is just a formality of the bad api. So if you are sure about the case and you can&#39;t find any other way that is &quot;Practical&quot; to do, then go ahead and use const_cast&lt;&gt;."}, {"owner": {"reputation": 43188, "user_id": 273767, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/363e49843e26763a496164190940ece4?s=128&d=identicon&r=PG", "display_name": "Cubbi", "link": "https://stackoverflow.com/users/273767/cubbi"}, "edited": false, "score": 0, "creation_date": 1454938872, "post_id": 35046785, "comment_id": 58253449, "body": "There is no context where this is appropriate. Dealing with const-incorrect APIs may indeed necessitate const_cast, but cannot involve modification of a const object."}], "tags": [], "owner": {"reputation": 123, "user_id": 2951195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525a082c8472f4f9e2ff010ec6233ced?s=128&d=identicon&r=PG&f=1", "display_name": "rezeli", "link": "https://stackoverflow.com/users/2951195/rezeli"}, "is_accepted": false, "score": -3, "last_activity_date": 1453924341, "creation_date": 1453924341, "answer_id": 35046785, "question_id": 35046373, "link": "https://stackoverflow.com/questions/35046373/c-cannot-convert-parameter-1-from-const-char-to-char/35046785#35046785", "title": "C++ cannot convert parameter 1 from &#39;const char *&#39; to &#39;char *&#39;", "body": "<p>If you really have to do it, you can use const_cast&lt;> operator. Here's example:</p>\n\n<pre><code>const int j = 3; // j is declared const\nnt* pj = const_cast&lt;int*&gt;(&amp;j); // now content of pj can be modified.\n</code></pre>\n\n<p>Here's the link:\n    <a href=\"http://en.cppreference.com/w/cpp/language/const_cast\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/language/const_cast</a></p>\n"}, {"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": true, "score": 2, "last_activity_date": 1453926232, "last_edit_date": 1592644375, "creation_date": 1453926232, "answer_id": 35047304, "question_id": 35046373, "link": "https://stackoverflow.com/questions/35046373/c-cannot-convert-parameter-1-from-const-char-to-char/35047304#35047304", "title": "C++ cannot convert parameter 1 from &#39;const char *&#39; to &#39;char *&#39;", "body": "<p><code>name</code> is a constant c-style string. It promises the function's caller that the provided string will not be modified inside the <code>MessageGroup</code> constructor or by any functions called by <code>MessageGroup</code>.</p>\n<p><code>_strupr(name) is going to convert </code>name` to upper case, violating the no-modifications promise. This is a bad thing to do, possibly even impossible as the memory region holding name may not be writable, and generates an error. Perhaps in the past it only generated a warning and was ignored. Not up on my Visual C 6 and it's default settings, or the project settings should the defaults have been changed to silence warnings, so I'm not sure if anyone ever even saw the warning.</p>\n<p>Solutions to the problem are:</p>\n<h1>1. Modify <code>MessageGroup</code> to remove the <code>const</code></h1>\n<pre><code>MessageGroup::MessageGroup(char *name, WordCollection *words)\n</code></pre>\n<p>This may break untold other pieces of code that use <code>MessageGroup</code> and count on name passing through unchanged. I only suggest it because it's an easy thing to try. If it blows everything up, put the <code>const</code> back and move on.</p>\n<h1>2. Copy <code>name</code> to a new memory buffer that is writable.</h1>\n<pre><code>char * temp = new char[strlen(name)]; \n_name.assign(_strupr(temp));\ndelete temp; \n</code></pre>\n<p>But consider a smart pointer instead because it self-manages the memory should bad things happen.</p>\n<pre><code>std::unique_ptr&lt;char[]&gt; temp(new char[strlen(name)])\n_name.assign(_strupr(temp.get));\n</code></pre>\n<p>The nastiness here is we do not know the lifespan of <code>name</code>. Who is responsible for <code>delete</code>ing <code>temp</code>'s memory when you're done with it? If <code>_name.assign</code> simply copies the pointer as opposed to making and keeping a copy of the data, <code>MessageGroup</code> cannot do the clean-up because then <code>_name</code> will contain an invalid pointer. If <code>_name</code> keeps a copy, you're safe, but you now have the performance hit of an extra copy.</p>\n<p>Modifications to <code>_name.assign</code> and whatever class <code>_name</code> instantiates may be required.</p>\n<h1>3. Sizable rip-up</h1>\n<p>Rewrite the program with modern techniques and <code>std::string</code>. The error you've run across shows that someone wasn't being very careful with their memory use and there are likely other time bombs waiting to go off.</p>\n<p>This is out of scope for Stack Overflow.</p>\n"}], "owner": {"reputation": 21, "user_id": 5838913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12741602d8cd1cf7960816ca0e363077?s=128&d=identicon&r=PG&f=1", "display_name": "Darren", "link": "https://stackoverflow.com/users/5838913/darren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8904, "favorite_count": 0, "accepted_answer_id": 35047304, "answer_count": 3, "score": -2, "last_activity_date": 1453926232, "creation_date": 1453923017, "last_edit_date": 1453925089, "question_id": 35046373, "link": "https://stackoverflow.com/questions/35046373/c-cannot-convert-parameter-1-from-const-char-to-char", "title": "C++ cannot convert parameter 1 from &#39;const char *&#39; to &#39;char *&#39;", "body": "<p>I'm not a C++ developer at all, but was giving the task of upgrading some old code from Visual Studio 6 to Visual Studio 2010.  I'm getting an error from the following code.</p>\n\n<pre><code>MessageGroup::MessageGroup(const char *name, WordCollection *words) {\n    _name.assign(_strupr(name));\n    setWordCollection(words);\n}\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>error C2664: '_strupr' : cannot convert parameter 1 from 'const char *' to 'char *'\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "edited": false, "score": 0, "creation_date": 1453926188, "post_id": 35046208, "comment_id": 57818760, "body": "If they are global variables, you don&#39;t &quot;declare&quot; them in main - you have already declared them when you said <code>const int MAXROW = 5; </code>, etc. And how do you use them? Well you just -um - use them. Llike you did in case1(). No need to pass them into the methods - they are globally available anywhere in the compilation unit."}, {"owner": {"reputation": 75, "user_id": 5672878, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8f177b1a3baaf7ef4d14ca0396a4226d?s=128&d=identicon&r=PG", "display_name": "aspaar321", "link": "https://stackoverflow.com/users/5672878/aspaar321"}, "reply_to_user": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "edited": false, "score": 0, "creation_date": 1453926574, "post_id": 35046208, "comment_id": 57818975, "body": "The problem is that i don&#39;t want to use them as global."}], "answers": [{"tags": [], "owner": {"reputation": 458, "user_id": 5013959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cb39ec525ee580f1182bbfec3c38b39?s=128&d=identicon&r=PG&f=1", "display_name": "KKastaneda", "link": "https://stackoverflow.com/users/5013959/kkastaneda"}, "is_accepted": false, "score": 0, "last_activity_date": 1453924160, "last_edit_date": 1495542658, "creation_date": 1453924160, "answer_id": 35046730, "question_id": 35046208, "link": "https://stackoverflow.com/questions/35046208/how-to-make-reference-to-variables-c/35046730#35046730", "title": "How to make reference to variables (c++)", "body": "<p>You can declare local variables in <code>main()</code> in the same way you did in <code>case3()</code> with <code>negNumber</code> and <code>average</code>.</p>\n\n<p>Passing variables to another functions is pretty easy. You just need to define input parameters for your function. Like this: <code>case1( int var1 )</code>. Now you can use <code>var1</code> in your function <code>case1</code> and you have to call <code>case1</code> with arguments passed in. Like this: <code>case1( 2 )</code>.</p>\n\n<p>You can find solution exactly for your case (passsing 2D arrays into funtions) here: <a href=\"https://stackoverflow.com/questions/8767166/passing-a-2d-array-to-a-c-function\">Passing a 2D array to a C++ function</a></p>\n\n<p>Read more about funtions in C++ here: <a href=\"https://msdn.microsoft.com/en-us/library/c4d5ssht.aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/c4d5ssht.aspx</a></p>\n"}], "owner": {"reputation": 75, "user_id": 5672878, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8f177b1a3baaf7ef4d14ca0396a4226d?s=128&d=identicon&r=PG", "display_name": "aspaar321", "link": "https://stackoverflow.com/users/5672878/aspaar321"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1453924160, "creation_date": 1453922519, "last_edit_date": 1453922951, "question_id": 35046208, "link": "https://stackoverflow.com/questions/35046208/how-to-make-reference-to-variables-c", "title": "How to make reference to variables (c++)", "body": "<p>These are global variables:</p>\n\n<pre><code>const int MAXROW = 5;\nconst int MAXCOL = 5;\nint A[MAXROW][MAXCOL] = { 0 };\nint newarr[MAXROW + 1][MAXCOL + 1] = { 0 };\n</code></pre>\n\n<p>How to declare them in main and to use them in these functions:</p>\n\n<pre><code>void case1()\n{\nfor (int r = 0; r &lt; MAXROW; ++r)\n    for (int c = 0; c &lt; MAXCOL; ++c) {\n        cout &lt;&lt; \"\\n A[\" &lt;&lt; r &lt;&lt; \"][\" &lt;&lt; c &lt;&lt; \"]= \";\n        cin &gt;&gt; A[r][c];\n\n    }\n\n}\n\nvoid case2()\n{\n\n    int max[MAXCOL] = { 0 };\n\n    for (int r = 0; r &lt; MAXROW; ++r) {\n        int minr = A[r][0];\n    ..............................\n\n    }\nvoid case3()\n{\n    int negNumber = 0;\n    double average = 0;\n\n    for (int r = 0; r &lt; 6; ++r) {\n        for (int c = 0; c &lt; 6; ++c) {\n            ..............\nif (newarr[r][c] &lt; 0) {\n                ++negNumber;\n                average += newarr[r][c];\n</code></pre>\n\n<p>I am using do while menu. How can I do it most easily.</p>\n"}, {"tags": ["c++", "c++11", "overloading"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1453922475, "post_id": 35046115, "comment_id": 57816580, "body": "Your program should not even compile without warning. When your function signature demands a return value, but you are not returning any, any decent compiler will tell you there is  a problem. Are you paying attention to compiler warnings?"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1453922544, "post_id": 35046115, "comment_id": 57816618, "body": "Reaching the end of the body of a function whose return type is not <code>void</code>, without encountering a <code>return</code> statement, exhibits undefined behavior (except when this function is <code>main</code>). Discussing failure modes of code that exhibits undefined behavior is not particularly interesting; that time is better spent fixing the code so that its behavior is well defined."}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1453922559, "post_id": 35046115, "comment_id": 57816632, "body": "@SergeyA Many compilers (in my experience) won&#39;t without flags. :("}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1453922578, "post_id": 35046115, "comment_id": 57816648, "body": "@erip, any modern ones?"}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1453922631, "post_id": 35046115, "comment_id": 57816675, "body": "@SergeyA Depends if gcc 5.3.0 is considered modern. ;)"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1453922712, "post_id": 35046115, "comment_id": 57816721, "body": "@erip, fair enough. I see what you mean now. I am just so used to -Wall that I am not even considering it a flag. my bad."}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1453922628, "post_id": 35046207, "comment_id": 57816673, "body": "It is not about returning ostream, it is about following function signature. In theory, one could create an insert operator which does not return a stream."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1453922749, "post_id": 35046207, "comment_id": 57816753, "body": "They should also use <code>out</code> in the function and not <code>cout</code>"}], "tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": false, "score": 1, "last_activity_date": 1453922967, "last_edit_date": 1453922967, "creation_date": 1453922513, "answer_id": 35046207, "question_id": 35046115, "link": "https://stackoverflow.com/questions/35046115/return-type-of-operator-overloading-function-in-c/35046207#35046207", "title": "Return type of &lt;&lt; operator overloading function in C++", "body": "<p>Yes, you always return the passed in ostream and probably want to pass in a <code>const</code> reference to the value you want outputed:</p>\n\n<pre><code>ostream&amp; operator&lt;&lt;(ostream &amp;out, const myvar&amp; n)\n{\n    out &lt;&lt; \"(\" &lt;&lt; n.var_x &lt;&lt; \",\" &lt;&lt; n.var_y &lt;&lt; \")\"; \n    return out;\n} \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "is_accepted": false, "score": 2, "last_activity_date": 1453923519, "creation_date": 1453923519, "answer_id": 35046538, "question_id": 35046115, "link": "https://stackoverflow.com/questions/35046115/return-type-of-operator-overloading-function-in-c/35046538#35046538", "title": "Return type of &lt;&lt; operator overloading function in C++", "body": "<p>This code has <strong>Undefined Behavior</strong>.<br>\nThis is very bad. Usually it means that a crash will happen (but technically anything can happen).</p>\n\n<pre><code>ostream&amp; operator&lt;&lt;(ostream &amp;out,myvar n)\n{\nout&lt;&lt;\"(\"&lt;&lt;n.var_x&lt;&lt;\",\"&lt;&lt;n.var_y&lt;&lt;\")\";  // fixed cout to out.\n//return out;\n\n}\n</code></pre>\n\n<p>This is because you specify a return type in the function signature.</p>\n\n<pre><code>ostream&amp; operator&lt;&lt;(ostream &amp;out,myvar n)\n^^^^^^^^\n</code></pre>\n\n<p>If your function does not contain a <code>return</code> keyword then your code is invalid. So for the function as defined (with the commented out return) your program will most likely crash.</p>\n\n<p>If you change your code to:</p>\n\n<pre><code>void operator&lt;&lt;(ostream &amp;out,myvar n)\n{\nout&lt;&lt;\"(\"&lt;&lt;n.var_x&lt;&lt;\",\"&lt;&lt;n.var_y&lt;&lt;\")\"; \n}\n</code></pre>\n\n<p>Now it will compile (be valid) and work.<br>\nBut the consequence is you can not chain stream operations together.</p>\n\n<pre><code> myvar  x;\n // Set some value in x\n\n // This will work fine.\n std::cout &lt;&lt; x;\n\n // But this will fail to compile.\n std::cout &lt;&lt; x &lt;&lt; \" Another Thing\";\n</code></pre>\n\n<p>Because the first call to <code>operator&lt;&lt;</code> returns a void the second call to <code>operator&lt;&lt;</code> does not know what to do.</p>\n\n<p>So your best bet is to return the stream to allow chaining.</p>\n\n<pre><code>ostream&amp; operator&lt;&lt;(ostream &amp;out,myvar n)\n{\n    out&lt;&lt;\"(\"&lt;&lt;n.var_x&lt;&lt;\",\"&lt;&lt;n.var_y&lt;&lt;\")\"; \n    return out;\n}\n</code></pre>\n\n<p>PS: Some space characters would be really nice to aid readability.</p>\n\n<pre><code>// This is easier to read for a human.\nstd::ostream&amp; operator&lt;&lt;(std::ostream &amp;out, myvar n)\n{\n    out &lt;&lt; \"(\" &lt;&lt; n.var_x &lt;&lt; \",\" &lt;&lt; n.var_y &lt;&lt; \")\"; \n    return out;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 5848499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a458beaf6893ce118adf032001d135a6?s=128&d=identicon&r=PG&f=1", "display_name": "DPD", "link": "https://stackoverflow.com/users/5848499/dpd"}, "edited": false, "score": 0, "creation_date": 1454301429, "post_id": 35058498, "comment_id": 57966649, "body": "My biggest doubt is that why chaining of &lt;&lt; in following statement  is working even without the return of out from overloaded function.  cout&lt;&lt;&quot;\\n&quot;&lt;&lt;mv1&lt;&lt;mv2&lt;&lt;mv3"}], "tags": [], "owner": {"reputation": 1, "user_id": 5848499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a458beaf6893ce118adf032001d135a6?s=128&d=identicon&r=PG&f=1", "display_name": "DPD", "link": "https://stackoverflow.com/users/5848499/dpd"}, "is_accepted": false, "score": 0, "last_activity_date": 1453975915, "creation_date": 1453975915, "answer_id": 35058498, "question_id": 35046115, "link": "https://stackoverflow.com/questions/35046115/return-type-of-operator-overloading-function-in-c/35058498#35058498", "title": "Return type of &lt;&lt; operator overloading function in C++", "body": "<p>My biggest doubt is that why chaining of &lt;&lt; in following statement</p>\n\n<p>is working even without the return of out from overloaded function.</p>\n\n<pre><code>cout&lt;&lt;\"\\n\"&lt;&lt;mv1&lt;&lt;mv2&lt;&lt;mv3;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5848499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a458beaf6893ce118adf032001d135a6?s=128&d=identicon&r=PG&f=1", "display_name": "DPD", "link": "https://stackoverflow.com/users/5848499/dpd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1939, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1453975915, "creation_date": 1453922253, "question_id": 35046115, "link": "https://stackoverflow.com/questions/35046115/return-type-of-operator-overloading-function-in-c", "title": "Return type of &lt;&lt; operator overloading function in C++", "body": "<p>I have create a program to overload &lt;&lt; operator for my class.\nI have a doubt about the return type of the overloaded method.</p>\n\n<p>When i am returning the  out from the overloaded operator function the program is working fine.</p>\n\n<p>But when i am not returning any thing from the function the program crashing under one condition.</p>\n\n<p>In many C++ resource i have read that the return type is necessary to print operators in cascading . </p>\n\n<p>Condition 1 : Passing\n   When i am using statement </p>\n\n<p><code>// cout&lt;&lt;\"\\n\"&lt;&lt;mv1&lt;&lt;mv2&lt;&lt;mv3;\n</code>\nEvery thing is working fine. Passing without return from overloaded function.</p>\n\n<p>Condition 2:Failing\nWhen i am using statemtent\ncout&lt;&lt;\"\\n\"&lt;\n\n<p>This i know that return was not there so the program crashed at runtime.</p>\n\n<p>But the question is what made program run in Condition 1 . Even without the return statement was not present in the overloading function.</p>\n\n<h1>Program below</h1>\n\n<pre><code>I have create a program to overload &lt;&lt; operator for my class.\n</code></pre>\n\n<p>I have a doubt about the return type of the overloaded method.</p>\n\n<p>When i am returning the  out from the overloaded operator function the program is working fine.</p>\n\n<p>But when i am not returning any thing from the function the program crashing under one condition.</p>\n\n<p>In many C++ resource i have read that the return type is necessary to print operators in cascading . </p>\n\n<p>Condition 1 : Passing\n   When i am using statement </p>\n\n<p><code>// cout&lt;&lt;\"\\n\"&lt;&lt;mv1&lt;&lt;mv2&lt;&lt;mv3;\n</code>\nEvery thing is working fine. Passing without return from overloaded function.</p>\n\n<p>Condition 2:Failing\nWhen i am using statemtent\ncout&lt;&lt;\"\\n\"&lt;\n\n<p>This i know that return was not there so the program crashed at runtime.</p>\n\n<p>But the question is what made program run in Condition 1 . Even without the return statement was not present in the overloading function.</p>\n\n<h1>Program below</h1>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n\nusing namespace std;\n\nclass myvar{\n\n  private:\n  int var_x,var_y;\n\n  public:\n\n  friend ostream&amp; operator&lt;&lt;(ostream &amp;out,myvar n);\n  void setvalue(int x,int y)\n  {\n     var_x = x ;\n     var_y = y ;\n  }\n\n};\n\nostream&amp; operator&lt;&lt;(ostream &amp;out,myvar n)\n{\ncout&lt;&lt;\"(\"&lt;&lt;n.var_x&lt;&lt;\",\"&lt;&lt;n.var_y&lt;&lt;\")\"; \n//return out;\n\n}\n\n\nint main()\n{\n myvar mv1,mv2,mv3;\n mv1.setvalue(10,20);\n mv2.setvalue(30,40);\n mv3.setvalue(50,60);\n\n//Working\n\n    // cout&lt;&lt;\"\\n\"&lt;&lt;mv1&lt;&lt;mv2&lt;&lt;mv3;\n\n//Not Working\n\n    // cout&lt;&lt;\"\\n\"&lt;&lt;mv1&lt;&lt;mv2&lt;&lt;mv3&lt;&lt;\"Hello\"&lt;&lt;1243&lt;&lt;11.5;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "sfinae", "typetraits", "enable-if", "class-template"], "answers": [{"comments": [{"owner": {"reputation": 585, "user_id": 342415, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2e93e871c730220d2ec0bcef5947e9e7?s=128&d=identicon&r=PG", "display_name": "BaCh", "link": "https://stackoverflow.com/users/342415/bach"}, "edited": false, "score": 1, "creation_date": 1453925779, "post_id": 35046471, "comment_id": 57818518, "body": "Works as intended. I never would have found out how to declare this voodoo. Wrapping this in a define to save typing for multiple functions is now a piece of cake.   Thank you very much."}], "tags": [], "owner": {"reputation": 7447, "user_id": 602372, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/q6bLu.jpg?s=128&g=1", "display_name": "Yam Marcovic", "link": "https://stackoverflow.com/users/602372/yam-marcovic"}, "is_accepted": true, "score": 3, "last_activity_date": 1453923629, "last_edit_date": 1453923629, "creation_date": 1453923308, "answer_id": 35046471, "question_id": 35046055, "link": "https://stackoverflow.com/questions/35046055/c-providing-a-class-function-in-templated-class-on-existence-of-named-member/35046471#35046471", "title": "C++: providing a class function in templated class on existence of named member in its templated type?", "body": "<p>Yep, it's possible. Here's an example:</p>\n\n<pre><code>template&lt;typename T&gt;\nclass foo\n{\n  T myvar;\n\npublic:\n  template &lt;class _T = T,\n            class = typename std::enable_if&lt;\n                      !std::is_function&lt;decltype(_T::id)&gt;::value&gt;\n                    ::type&gt;\n  void printid() { std::cout &lt;&lt; \"I have element id.\"; }\n};\n</code></pre>\n\n<p>Specifically, note how we're \"taking in\" <code>T</code> as <code>_T</code> in order to not force a constraint on the <em>class template parameter</em> (which would make the class itself un-compileable). Instead, we're creating a new, independent template member function, which doesn't force anything on <code>T</code> itself&mdash;it just \"happens to\" use it as a default argument. That's the key part.</p>\n"}], "owner": {"reputation": 585, "user_id": 342415, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2e93e871c730220d2ec0bcef5947e9e7?s=128&d=identicon&r=PG", "display_name": "BaCh", "link": "https://stackoverflow.com/users/342415/bach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 35046471, "answer_count": 1, "score": 1, "last_activity_date": 1453923629, "creation_date": 1453922075, "last_edit_date": 1495542658, "question_id": 35046055, "link": "https://stackoverflow.com/questions/35046055/c-providing-a-class-function-in-templated-class-on-existence-of-named-member", "title": "C++: providing a class function in templated class on existence of named member in its templated type?", "body": "<p>I am trying to do the following: a templated class should provide some functions dependend on whether or not the type it has been templated with contains a member variable with a given name. As example the following pseudocode which should provide \"printid()\" only when templated struct/class has a member called \"id\":</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\nstruct A { int id; };\nstruct B { };\n\ntemplate&lt;typename T&gt;\nclass foo\n{\n  T myvar;\n\npublic:\n  #if exists T.id   (or the alternative: #if exists myvar.id)\n  printid() { std::cout &lt;&lt; \"I have element id.\"; }\n  #endif\n};\n\nint main(){\n  foo&lt;A&gt; ok;\n  ok.printid();   // should compile and execute\n\n  foo&lt;B&gt; nok;\n  nok.printid();  // should not compile\n  return 0;\n}\n</code></pre>\n\n<p>Digging around SFINAE, traits, std::enable_if and StackOverflow, I think it can be done ... somehow. But I somehow fail to combine enable_if with the the following snippet from the question <a href=\"https://stackoverflow.com/questions/1005476/how-to-detect-whether-there-is-a-specific-member-variable-in-class\">How to detect whether there is a specific member variable in class?</a>:</p>\n\n<pre><code>template&lt;typename T, typename = void&gt;\nstruct has_id : std::false_type { };\n\ntemplate&lt;typename T&gt;\nstruct has_id&lt;T, decltype(std::declval&lt;T&gt;().id, void())&gt; : std::true_type { };\n</code></pre>\n\n<p>Any help appreciated.</p>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1453921603, "post_id": 35045849, "comment_id": 57816096, "body": "Have you added the dll folder to the PATH? Or have you copied the dll in the same directory of the exe?"}, {"owner": {"reputation": 8334, "user_id": 1432801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c925b2538b1f594a81f6ef2922c15e1d?s=128&d=identicon&r=PG", "display_name": "Jon Surrell", "link": "https://stackoverflow.com/users/1432801/jon-surrell"}, "edited": false, "score": 1, "creation_date": 1453930861, "post_id": 35045849, "comment_id": 57821374, "body": "Please include the error text, not a screenshot."}, {"owner": {"reputation": 8652, "user_id": 2040863, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IspsC.jpg?s=128&g=1", "display_name": "John Hascall", "link": "https://stackoverflow.com/users/2040863/john-hascall"}, "edited": false, "score": 0, "creation_date": 1454095704, "post_id": 35045849, "comment_id": 57906817, "body": "People do not like pictures of errors (or code)."}], "owner": {"reputation": 73, "user_id": 5790397, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4938d288838c9a26d4d2d15bbec7c2b9?s=128&d=identicon&r=PG&f=1", "display_name": "aH ProgrammeR", "link": "https://stackoverflow.com/users/5790397/ah-programmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 449, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1454095704, "creation_date": 1453921432, "last_edit_date": 1454095704, "question_id": 35045849, "link": "https://stackoverflow.com/questions/35045849/opencv-unhandled-exception-at-0x1050fbfe-opencv-world300-dll", "title": "OpenCV Unhandled Exception at 0x1050FBFE (opencv_world300.dll)", "body": "<p>**** ~~>  Updated &lt;~~  **  </p>\n\n<p>Hi, I get the following error from my code below:</p>\n\n<p><em>(My aim is to Find a special image on list of images called Template Matching. \nI add opencv_world300 to debug and release in visual studio 2012 but I don't know what's causing this error)</em></p>\n\n<blockquote>\n  <p>Unhandled exception at 0x01DDABBA (opencv_world300.dll) in OpenCV.exe:\n  0xC0000005: Access violation reading location 0x0000FB97</p>\n</blockquote>\n\n<p><a href=\"http://i.stack.imgur.com/oEZIT.png\" rel=\"nofollow\">Error Screen Shot</a></p>\n\n<pre><code>#include &lt;opencv2/imgproc/imgproc.hpp&gt;\n#include &lt;opencv2/highgui/highgui.hpp&gt;\n\nvoid fastMatchTemplate(cv::Mat&amp; srca,   cv::Mat&amp; srcb,   cv::Mat&amp; dst,   int  maxlevel)   \n{\nstd::vector&lt;cv::Mat&gt; refs, tpls, results;\n\ncv::buildPyramid(srca, refs, maxlevel);\ncv::buildPyramid(srcb, tpls, maxlevel);\n\ncv::Mat ref, tpl, res;\n\nfor (int level = maxlevel; level &gt;= 0; level--)\n{\n    ref = refs[level];\n    tpl = tpls[level];\n    res = cv::Mat::zeros(ref.size() + cv::Size(1,1) - tpl.size(), CV_32FC1);\n\n    if (level == maxlevel)\n    {\n\n        cv::matchTemplate(ref, tpl, res, CV_TM_CCORR_NORMED);\n    }\n    else\n    {\n\n        cv::Mat mask;\n        cv::pyrUp(results.back(), mask);\n\n        cv::Mat mask8u;\n        mask.convertTo(mask8u, CV_8U);\n\n\n        std::vector&lt;std::vector&lt;cv::Point&gt; &gt; contours;\n        cv::findContours(mask8u, contours, CV_RETR_EXTERNAL,    CV_CHAIN_APPROX_NONE);\n\n\n        for (int i = 0; i &lt; contours.size(); i++)\n        {\n            cv::Rect r = cv::boundingRect(contours[i]);\n            cv::matchTemplate(\n                ref(r + (tpl.size() - cv::Size(1,1))), \n                tpl, \n                res(r), \n                CV_TM_CCORR_NORMED\n            );\n        }\n    }\n\n    // Only keep good matches\n    cv::threshold(res, res, 0.94, 1., CV_THRESH_TOZERO);\n    results.push_back(res);\n}\n\nres.copyTo(dst);\n}\n\nint main()\n{\ncv::Mat ref = cv::imread(\"G:\\\\reference.png\");\ncv::Mat tpl = cv::imread(\"G:\\\\template.png\");\nif (ref.empty() || tpl.empty())\n    return -1;\n\ncv::Mat ref_gray, tpl_gray;\ncv::cvtColor(ref, ref_gray, CV_BGR2GRAY);\ncv::cvtColor(tpl, tpl_gray, CV_BGR2GRAY);\n\ncv::Mat dst;\nfastMatchTemplate(ref_gray, tpl_gray, dst, 2);\n\nwhile (true)\n{\n    double minval, maxval;\n    cv::Point minloc, maxloc;\n    cv::minMaxLoc(dst, &amp;minval, &amp;maxval, &amp;minloc, &amp;maxloc);\n\n    if (maxval &gt;= 0.9)\n    {\n        cv::rectangle(\n            ref, maxloc, \n            cv::Point(maxloc.x + tpl.cols, maxloc.y + tpl.rows), \n            CV_RGB(0,255,0), 2\n        );\n        cv::floodFill(\n            dst, maxloc, \n            cv::Scalar(0), 0, \n            cv::Scalar(.1), \n            cv::Scalar(1.)\n        );\n    }\n    else\n        break;\n}\n\ncv::imshow(\"result\", ref);\ncv::waitKey();\nreturn 0;\n}\n</code></pre>\n\n<p>Thanks for your help!</p>\n"}, {"tags": ["c++", "machine-learning", "centos", "shogun"], "answers": [{"tags": [], "owner": {"reputation": 298, "user_id": 2798875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0889dab02dfb6ceb40ef385a7c17fdc?s=128&d=identicon&r=PG&f=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/2798875/viktor"}, "is_accepted": false, "score": 0, "last_activity_date": 1456324529, "creation_date": 1456324529, "answer_id": 35605024, "question_id": 35045830, "link": "https://stackoverflow.com/questions/35045830/shogun-on-centos/35605024#35605024", "title": "Shogun on CentOS", "body": "<p>yes, shogun is being built on a CentOS7 after each commit.\nyou can learn about the cmake parameters and how it works from here:\n<a href=\"http://buildbot.shogun-toolbox.org/builders/CentOS7%20-%20libshogun\" rel=\"nofollow\">http://buildbot.shogun-toolbox.org/builders/CentOS7%20-%20libshogun</a></p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 5664736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eed4060faeb5937c57e350ba8f1a1305?s=128&d=identicon&r=PG&f=1", "display_name": "maxima", "link": "https://stackoverflow.com/users/5664736/maxima"}, "is_accepted": false, "score": 0, "last_activity_date": 1540637925, "creation_date": 1540637925, "answer_id": 53021220, "question_id": 35045830, "link": "https://stackoverflow.com/questions/35045830/shogun-on-centos/53021220#53021220", "title": "Shogun on CentOS", "body": "<p>I think this is a bug of shogun, which does not compile with gcc 4.8.5 on CentOS7. This bug will be be fixed until shogun 6.2.0. see <a href=\"https://github.com/shogun-toolbox/shogun/issues/4306\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 11, "user_id": 4123719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66ecd993ecea2ba8d44afa37cc625163?s=128&d=identicon&r=PG&f=1", "display_name": "Raju", "link": "https://stackoverflow.com/users/4123719/raju"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 139, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1540637925, "creation_date": 1453921382, "question_id": 35045830, "link": "https://stackoverflow.com/questions/35045830/shogun-on-centos", "title": "Shogun on CentOS", "body": "<p>Have anyone tried installing Shogun on CentOS? Will it work? I tried downloading the source from Shogun site and compile it and it wasn't that easy(also, installed all the requirements needed for shogun). Is it possible to install on CentOS?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 3, "creation_date": 1453921415, "post_id": 35045815, "comment_id": 57815996, "body": "It is the same as returning <i>anything</i> by reference."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 2, "creation_date": 1453921536, "post_id": 35045815, "comment_id": 57816061, "body": "In this case, it&#39;s just pointless (no pun intended)."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1453921607, "post_id": 35045815, "comment_id": 57816098, "body": "@nos You cannot possibly know what."}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1453922361, "post_id": 35045815, "comment_id": 57816519, "body": "If this compiles: <code>const Foo*&amp; ptr = GetPointerToFoo();</code>, then this should not: <code>Foo* ptr = GetPointerToFoo();</code> (although it might be allowed in MSVC due to the extension to allow non-const references to bind to temporaries)"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1453923231, "post_id": 35045815, "comment_id": 57817047, "body": "On further testing, it shouldn&#39;t work with MSVC either, since the extension doesn&#39;t seem to apply to scalar types (like pointers)."}], "answers": [{"comments": [{"owner": {"reputation": 7447, "user_id": 602372, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/q6bLu.jpg?s=128&g=1", "display_name": "Yam Marcovic", "link": "https://stackoverflow.com/users/602372/yam-marcovic"}, "edited": false, "score": 0, "creation_date": 1453922254, "post_id": 35046042, "comment_id": 57816459, "body": "Not <i>necessarily</i> useless. Perhaps you want to change an internal strategy object, which for some reason shouldn&#39;t change its state in that context."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "is_accepted": true, "score": 3, "last_activity_date": 1453922856, "last_edit_date": 1453922856, "creation_date": 1453922036, "answer_id": 35046042, "question_id": 35045815, "link": "https://stackoverflow.com/questions/35045815/returning-a-pointer-by-reference/35046042#35046042", "title": "Returning a pointer by reference", "body": "<ul>\n<li><code>const Foo*&amp; ptr</code>: The reference makes the pointer itself mutable. The\ncaller can modify the internal pointer (e.g. to nullptr), but not the internal content (which is probably useless).</li>\n<li><code>const Foo* ptr</code>: A pointer to immutable content. The caller can\nnot modify the internal pointer.</li>\n<li><code>Foo* ptr</code>: A pointer to mutable content. The caller can modify the\ninternal content, but not the internal pointer.</li>\n</ul>\n\n<p>Note: Returning a pointer by reference is another indirection and makes the code not faster.</p>\n\n<p>Note: I assume three distinct <code>GetPointerToFoo()</code> in the question.</p>\n"}], "owner": {"reputation": 18045, "user_id": 3320135, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a5b91a6e8e17f4a5da0c1aecb6135a91?s=128&d=identicon&r=PG&f=1", "display_name": "Karnivaurus", "link": "https://stackoverflow.com/users/3320135/karnivaurus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 35046042, "answer_count": 1, "score": 0, "last_activity_date": 1453922856, "creation_date": 1453921328, "question_id": 35045815, "link": "https://stackoverflow.com/questions/35045815/returning-a-pointer-by-reference", "title": "Returning a pointer by reference", "body": "<p>I have seen some C++ that looks like this:</p>\n\n<pre><code>const Foo*&amp; ptr = GetPointerToFoo();\n</code></pre>\n\n<p>Which seems to do the same job as:</p>\n\n<pre><code>const Foo* ptr = GetPointerToFoo();\n</code></pre>\n\n<p>Or even:</p>\n\n<pre><code>Foo* ptr = GetPointerToFoo();\n</code></pre>\n\n<p>What is the use of the <code>&amp;</code> in the first example? Does it pass the value returned by <code>GetPointerToFoo()</code> by reference? What would be the use of this? Is it just to make it run faster so that this pointer does not need to be copied? If so, it seems rather a complicated implementation for a very small increase in speed... Or are there other reasons to use the <code>&amp;</code> here?</p>\n"}, {"tags": ["c++", "string", "ofstream"], "answers": [{"comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1453921724, "post_id": 35045846, "comment_id": 57816167, "body": "I dont think this is the case. It still fails for c++14 <a href=\"http://ideone.com/PVylpo\" rel=\"nofollow noreferrer\">ideone.com/PVylpo</a>, the problem is that there is no constructor that takes a string literal as the second argument."}, {"owner": {"reputation": 83, "user_id": 5844964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d9cb3fd474f2812bacaf8e7556d0fc9?s=128&d=identicon&r=PG&f=1", "display_name": "ToM MaC", "link": "https://stackoverflow.com/users/5844964/tom-mac"}, "edited": false, "score": 0, "creation_date": 1453921878, "post_id": 35045846, "comment_id": 57816256, "body": "Thank you so much! but where in the code will be the function <code>c_str()</code> ? I  never used it before."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1453922139, "post_id": 35045846, "comment_id": 57816402, "body": "@ben That is why I answered as I did.  I did point out the typo as well with attribution to you."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1453922242, "post_id": 35045846, "comment_id": 57816451, "body": "Ok, answers all scenarios +1."}, {"owner": {"reputation": 83, "user_id": 5844964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d9cb3fd474f2812bacaf8e7556d0fc9?s=128&d=identicon&r=PG&f=1", "display_name": "ToM MaC", "link": "https://stackoverflow.com/users/5844964/tom-mac"}, "edited": false, "score": 0, "creation_date": 1453922535, "post_id": 35045846, "comment_id": 57816611, "body": "I did it, i just added the function <code>c_str()</code> to `ofstream entrada(asegurado); and it works fine, now i&#39;ll read why is using namespace std;&quot; considered bad practise. Thank you very much for everything! Grats"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 17, "last_activity_date": 1453922093, "last_edit_date": 1495535277, "creation_date": 1453921424, "answer_id": 35045846, "question_id": 35045781, "link": "https://stackoverflow.com/questions/35045781/no-matching-function-for-call-to-stdbasic-ofstreamchar-stdchar-traitscha/35045846#35045846", "title": "no matching function for call to `std::basic_ofstream&lt;char, std::char_traits&lt;char&gt; &gt;::basic_ofstream(std::string&amp;)&#39;", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/io/basic_ofstream\" rel=\"noreferrer\"><code>std::ofstream</code></a> can only be constructed with a <code>std::string</code> if you have C++11 or higher.  Typically that is done with <code>-std=c++11</code> (gcc, clang).  If you do not have access to c++11 then you can use the <code>c_str()</code> function of <code>std::string</code> to pass a <code>const char *</code> to the <code>ofstream</code> constructor.</p>\n\n<p>Also as <a href=\"https://stackoverflow.com/users/1294207/ben\">Ben</a> has <a href=\"https://stackoverflow.com/a/35045920/4342498\">pointed out</a> you are using an empty string for the second parameter to the constructor.  The second parameter if proivided needs to be of the type <code>ios_base::openmode</code>.</p>\n\n<p>With all this your code should be</p>\n\n<pre><code>ofstream entrada(asegurado); // C++11 or higher\n</code></pre>\n\n<p>or</p>\n\n<pre><code>ofstream entrada(asegurado.c_str());  // C++03 or below\n</code></pre>\n\n<p>I also suggest you read: <a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\">Why is \u201cusing namespace std;\u201d considered bad practice?</a></p>\n"}, {"tags": [], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "is_accepted": false, "score": 1, "last_activity_date": 1453922309, "last_edit_date": 1453922309, "creation_date": 1453921658, "answer_id": 35045920, "question_id": 35045781, "link": "https://stackoverflow.com/questions/35045781/no-matching-function-for-call-to-stdbasic-ofstreamchar-stdchar-traitscha/35045920#35045920", "title": "no matching function for call to `std::basic_ofstream&lt;char, std::char_traits&lt;char&gt; &gt;::basic_ofstream(std::string&amp;)&#39;", "body": "<p>Your constructor <code>ofstream entrada(asegurado,\"\");</code>, does not match that for <a href=\"http://en.cppreference.com/w/cpp/io/basic_ofstream/basic_ofstream\" rel=\"nofollow\"><code>std::ofstream</code></a>. The second argument needs to be a <a href=\"http://en.cppreference.com/w/cpp/io/ios_base\" rel=\"nofollow\"><code>ios_base</code></a>, see below:</p>\n\n<pre><code>entrada (\"example.bin\", ios::out | ios::app | ios::binary);\n                            //^ These are ios_base arguments for opening in a specific mode.\n</code></pre>\n\n<p>To get your program running you simply need to remove the string literal from your <code>ofstream</code> constructor:</p>\n\n<pre><code>ofstream entrada(asegurado);\n</code></pre>\n\n<p>See the <a href=\"http://ideone.com/Uo3UVk\" rel=\"nofollow\">live example here.</a> </p>\n\n<p>If you are using <code>c++03</code> or lower then you cannot pass a <code>std::string</code> to the constructor of <code>ofstream</code> you will need to pass a c string:</p>\n\n<pre><code>ofstream entrada(asegurado.c_str());\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 5844964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d9cb3fd474f2812bacaf8e7556d0fc9?s=128&d=identicon&r=PG&f=1", "display_name": "ToM MaC", "link": "https://stackoverflow.com/users/5844964/tom-mac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20397, "favorite_count": 1, "accepted_answer_id": 35045846, "answer_count": 2, "score": 8, "last_activity_date": 1453922594, "creation_date": 1453921200, "last_edit_date": 1453922594, "question_id": 35045781, "link": "https://stackoverflow.com/questions/35045781/no-matching-function-for-call-to-stdbasic-ofstreamchar-stdchar-traitscha", "title": "no matching function for call to `std::basic_ofstream&lt;char, std::char_traits&lt;char&gt; &gt;::basic_ofstream(std::string&amp;)&#39;", "body": "<p>I am trying to write a program that ask the user for a file name and then it opens that file.  When I compile it I get the following error: </p>\n\n<pre><code>no matching function for call to std::basic_ofstream&lt;char, \nstd::char_traits&lt;char&gt; &gt;::basic_ofstream(std::string&amp;)\n</code></pre>\n\n<p>This is my code:</p>\n\n<pre><code>using namespace std;\n\nint main()\n{ \n    string asegurado;\n    cout &lt;&lt; \"Nombre a agregar: \";\n    cin &gt;&gt; asegurado;\n\n    ofstream entrada(asegurado,\"\");\n    if (entrada.fail())\n    {\n        cout &lt;&lt; \"El archivo no se creo correctamente\" &lt;&lt; endl;\n    }\n}      \n</code></pre>\n"}, {"tags": ["c++", "b-tree"], "answers": [{"tags": [], "owner": {"reputation": 1999, "user_id": 3188346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85fbdb414d9dcf1e2a79fe37eb16aec9?s=128&d=identicon&r=PG&f=1", "display_name": "luantkow", "link": "https://stackoverflow.com/users/3188346/luantkow"}, "is_accepted": true, "score": 0, "last_activity_date": 1453930769, "creation_date": 1453930769, "answer_id": 35048574, "question_id": 35045671, "link": "https://stackoverflow.com/questions/35045671/elements-out-of-order-in-b-tree-implementation/35048574#35048574", "title": "Elements out of order in b-tree implementation", "body": "<p>I do believe that the problem is somewhere near the end of <code>ArvoreBInsereNaoCheio</code>:</p>\n\n<pre><code>Pagina *f = x-&gt;c[i];\nif(f-&gt;n == 2*a-1){ // Pagina cheia\n    ArvoreBDivideFilho(x,i,f);\n    if(k&gt;x-&gt;keys[i])i++;\n}\nArvoreBInsereNaoCheio(f,k);\n</code></pre>\n\n<p><code>i</code> is incremented but old <code>f</code> is used. Adding <code>f = x-&gt;c[i];</code> before the last line should fix the issue.</p>\n"}], "owner": {"reputation": 13, "user_id": 2406323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41f175c70f9d4835f8fe9347a8456e1f?s=128&d=identicon&r=PG", "display_name": "Guilherme Magno", "link": "https://stackoverflow.com/users/2406323/guilherme-magno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 35048574, "answer_count": 1, "score": -1, "last_activity_date": 1453930769, "creation_date": 1453920792, "last_edit_date": 1453921170, "question_id": 35045671, "link": "https://stackoverflow.com/questions/35045671/elements-out-of-order-in-b-tree-implementation", "title": "Elements out of order in b-tree implementation", "body": "<p>I'm having a problem with a B-tree (not a binary tree). It works for some values, but when I tried with (1,2,3,4,5,6), I get this output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Level 0: 2 4\n\nLevel 1: 1 3 6 5\n</code></pre>\n\n<p>when the correct output is</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Level 0: 2 4\n\nLevel 1: 1 3 5 6\n</code></pre>\n\n<p>I need help, I can't find what is the problem with my code.</p>\n\n<p>Here is my code:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt;class T&gt;\nvoid ArvoreB&lt;T&gt;::Insere(ArvoreB *A, T k){\n    Pagina *r = A-&gt;raiz;\n    if(r-&gt;n == 2*a -1){\n        Pagina *s = new Pagina();\n        s-&gt;folha = false;\n        s-&gt;n = 0;\n        s-&gt;c[0] = r; // Como \u00e9 o primeiro filho que recebe R, entao \u00e9 na posi\u00e7\u00e3o 0 (primerio filho)\n        A-&gt;raiz = s;\n        ArvoreBDivideFilho(s, 0, r); //0 \u00e9 a posi\u00e7\u00e3o que vai receber o valor;\n        ArvoreBInsereNaoCheio(s, k);\n    } else {\n        ArvoreBInsereNaoCheio(r,k);\n    }\n}\ntemplate &lt;class T&gt;\nvoid ArvoreB&lt;T&gt;::ArvoreBDivideFilho(Pagina *x, int i, Pagina *y){// a pagina x vai receber a pagina y e z\n    Pagina *z = new Pagina();\n    z-&gt;folha = y-&gt;folha;\n    z-&gt;n = a-1;\n    for (int j = 0; j &lt; a-1; j++){\n        z-&gt;keys[j] = y-&gt;keys[j+a];\n\n    } // copia a parte direita pra um filho\n    if(not y-&gt;folha) // passa o filho dos filhos pros lugares certos\n        for (int j = 0; j &lt;= a; j++)\n            z-&gt;c[j] = y-&gt;c[j+a];\n    y-&gt;n = a-1; // cortou a metade, entao fica a-1 chaves\n    for (int j = x-&gt;n; j &gt; (i+1); j--){\n        x-&gt;c[j+1] = x-&gt;c[j];\n        cout &lt;&lt; j &lt;&lt; endl;\n    } // empurra tudo pra direita 1 casa\n    x-&gt;c[i+1] = z; // poe Z como filho de x\n    for (int j = x-&gt;n; j &gt;= i; j--){\n        x-&gt;keys[j+1] = x-&gt;keys[j]; // empurra as KEYS tmb...\n    }\n    x-&gt;keys[i] = y-&gt;keys[a-1];\n    x-&gt;n++;\n\n    // aqui TALVEZ rpecisa adicionar mais alguma coisa...\n    //disk write X Y Z\n}\n\ntemplate &lt;class T&gt;\nvoid ArvoreB&lt;T&gt;::ArvoreBInsereNaoCheio(Pagina *x, T k){\n    int i = x-&gt;n-1;\n    if(x-&gt;folha){\n\n        while(i &gt;= 0 and k &lt; x-&gt;keys[i]){ // Arrasta pro lado, tudo que for maior que k\n            x-&gt;keys[i+1] = x-&gt;keys[i];\n            i--;\n        }\n        x-&gt;keys[i+1] = k;\n        x-&gt;n++;\n    } else {\n\n        while (i &gt;= 0 and k &lt; x-&gt;keys[i]) i--; //acha o filho\n        i++;\n        // Achou o filho certo (x-&gt;c[i])\n        //Pagina *f = disk-read(x-&gt;c[i]);\n        Pagina *f = x-&gt;c[i];\n        if(f-&gt;n == 2*a-1){ // Pagina cheia\n            ArvoreBDivideFilho(x,i,f);\n            if(k&gt;x-&gt;keys[i])i++;\n        }\n        ArvoreBInsereNaoCheio(f,k);\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio"], "comments": [{"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 4, "creation_date": 1453920802, "post_id": 35045643, "comment_id": 57815641, "body": "don&#39;t use doubles to represent real money"}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1453920820, "post_id": 35045643, "comment_id": 57815656, "body": "Could you post the code you&#39;re using?"}, {"owner": {"reputation": 79, "user_id": 4775750, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh4.googleusercontent.com/-Gn6K9lPuVIk/AAAAAAAAAAI/AAAAAAAAANc/pfrdGZ8MluA/photo.jpg?sz=128", "display_name": "Nathan Lundgren", "link": "https://stackoverflow.com/users/4775750/nathan-lundgren"}, "edited": false, "score": 0, "creation_date": 1453920848, "post_id": 35045643, "comment_id": 57815680, "body": "What is the best way to represent money?"}, {"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 2, "creation_date": 1453920951, "post_id": 35045643, "comment_id": 57815740, "body": "represent money as single long value, which represents cents (minimal coin), or use something like BigDecimal (there are a lot of different libraries for c++)"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 1735, "user_id": 1707083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08d10a00a81504b18d3d3723a4b7c252?s=128&d=identicon&r=PG", "display_name": "Samer", "link": "https://stackoverflow.com/users/1707083/samer"}, "edited": false, "score": 0, "creation_date": 1453922152, "post_id": 35045643, "comment_id": 57816409, "body": "@Samer - no, it&#39;s just the opposite: the question is about limiting the precision of the output."}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1453921421, "post_id": 35045719, "comment_id": 57816000, "body": "As good as it sounds, it is not always possible to express money in integers. You actually need to count in fractions."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1453936073, "post_id": 35045719, "comment_id": 57824119, "body": "@SergeyA: You still have an absolute level of accuracy required = fixed-point. Using floating-point for money is bonkers, unless you&#39;re dealing in amounts of hugely varying orders of magnitude and aren&#39;t actually accounting. Otherwise, can you give me an example of when you can&#39;t express money in integers?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1453990573, "post_id": 35045719, "comment_id": 57850409, "body": "@LRiO, when I said &#39;fractions&#39; I meant (I don&#39;t know proper english term for that) a <i>natural fraction</i>, for example, 1/3 * 2/3 is ((1 + 2) / 3). Don&#39;t know how to explain, I lack math english words. In financial software, you often need to divide and end is non-whole nubmbers, which than need to be added or multiplied."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1453998969, "post_id": 35045719, "comment_id": 57857118, "body": "@SergeyA: Financial software does not use floating-point to represent currency values."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1453999194, "post_id": 35045719, "comment_id": 57857297, "body": "Unfortunately, it often does. Do you know why you are usually allowed to have a mismatch of up to 30 dollars between two trading accounts with instituion eating the difference? :) But it should not."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1454002204, "post_id": 35045719, "comment_id": 57859208, "body": "@SergeyA: That&#39;s called &quot;skimming&quot; and it&#39;s about as illegal as it gets."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1454002961, "post_id": 35045719, "comment_id": 57859683, "body": "Nope, this is not skimming, and this is one hundered percent legal and blessed by ADP when a &#39;wash&#39; account is used."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 1, "last_activity_date": 1453920974, "creation_date": 1453920974, "answer_id": 35045719, "question_id": 35045643, "link": "https://stackoverflow.com/questions/35045643/how-to-properly-set-precision-for-doubles-in-c/35045719#35045719", "title": "How to properly set precision for doubles in C++", "body": "<p>Iostreams are a pain for formatting floating-point values. But why are you using floating-point to represent currency values? You should store integer pennies (or tenth-pennies) because, though you're not measuring in whole numbers of dollars, your values are actually fixed-point. And you really don't need the trouble that floating-point brings. And then you can stream the whole and \"fractional\" parts of your value separately (use <code>/</code> and <code>%</code>!), as integers, with a <code>'.'</code> in the middle. </p>\n\n<p>In the meantime, try <a href=\"http://en.cppreference.com/w/cpp/io/manip/fixed\" rel=\"nofollow\"><code>std::fixed</code></a>.</p>\n"}, {"comments": [{"owner": {"reputation": 79, "user_id": 4775750, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh4.googleusercontent.com/-Gn6K9lPuVIk/AAAAAAAAAAI/AAAAAAAAANc/pfrdGZ8MluA/photo.jpg?sz=128", "display_name": "Nathan Lundgren", "link": "https://stackoverflow.com/users/4775750/nathan-lundgren"}, "edited": false, "score": 0, "creation_date": 1453922122, "post_id": 35045722, "comment_id": 57816385, "body": "Worked perfectly! Thanks :)"}, {"owner": {"reputation": 79, "user_id": 4775750, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh4.googleusercontent.com/-Gn6K9lPuVIk/AAAAAAAAAAI/AAAAAAAAANc/pfrdGZ8MluA/photo.jpg?sz=128", "display_name": "Nathan Lundgren", "link": "https://stackoverflow.com/users/4775750/nathan-lundgren"}, "edited": false, "score": 0, "creation_date": 1453923792, "post_id": 35045722, "comment_id": 57817380, "body": "Going through some more test cases with the code, when I get answers like 1.66666667 or 3.3333333, it does not seem to work when I receive an answer which is 1/3 or 2/3"}, {"owner": {"reputation": 1517, "user_id": 4041176, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/000af332eb1a0ab42d0139b0bfc6eccc?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Ilharco", "link": "https://stackoverflow.com/users/4041176/gabriel-ilharco"}, "reply_to_user": {"reputation": 79, "user_id": 4775750, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh4.googleusercontent.com/-Gn6K9lPuVIk/AAAAAAAAAAI/AAAAAAAAANc/pfrdGZ8MluA/photo.jpg?sz=128", "display_name": "Nathan Lundgren", "link": "https://stackoverflow.com/users/4775750/nathan-lundgren"}, "edited": false, "score": 0, "creation_date": 1453923931, "post_id": 35045722, "comment_id": 57817471, "body": "What are you getting as an output? For 1/3 and 2/3 with that exact code I get 0.33 and 0.67 here."}, {"owner": {"reputation": 1517, "user_id": 4041176, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/000af332eb1a0ab42d0139b0bfc6eccc?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Ilharco", "link": "https://stackoverflow.com/users/4041176/gabriel-ilharco"}, "reply_to_user": {"reputation": 79, "user_id": 4775750, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh4.googleusercontent.com/-Gn6K9lPuVIk/AAAAAAAAAAI/AAAAAAAAANc/pfrdGZ8MluA/photo.jpg?sz=128", "display_name": "Nathan Lundgren", "link": "https://stackoverflow.com/users/4775750/nathan-lundgren"}, "edited": false, "score": 0, "creation_date": 1453924004, "post_id": 35045722, "comment_id": 57817521, "body": "Are you sure you&#39;re not making an integer division there? 1/3 should output 0.00, but 1.0/3 should output 0.33"}, {"owner": {"reputation": 79, "user_id": 4775750, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh4.googleusercontent.com/-Gn6K9lPuVIk/AAAAAAAAAAI/AAAAAAAAANc/pfrdGZ8MluA/photo.jpg?sz=128", "display_name": "Nathan Lundgren", "link": "https://stackoverflow.com/users/4775750/nathan-lundgren"}, "edited": false, "score": 0, "creation_date": 1453924185, "post_id": 35045722, "comment_id": 57817627, "body": "All of my variables, with the exception of strings, are doubles. So I&#39;m dividing and multiplying by doubles as well."}, {"owner": {"reputation": 1517, "user_id": 4041176, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/000af332eb1a0ab42d0139b0bfc6eccc?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Ilharco", "link": "https://stackoverflow.com/users/4041176/gabriel-ilharco"}, "reply_to_user": {"reputation": 79, "user_id": 4775750, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh4.googleusercontent.com/-Gn6K9lPuVIk/AAAAAAAAAAI/AAAAAAAAANc/pfrdGZ8MluA/photo.jpg?sz=128", "display_name": "Nathan Lundgren", "link": "https://stackoverflow.com/users/4775750/nathan-lundgren"}, "edited": false, "score": 0, "creation_date": 1453924257, "post_id": 35045722, "comment_id": 57817666, "body": "But are you explicitly writing 1/3? Because even if you write <code>double d = 1&#47;3</code>, d will be equal to 0. What output are you getting?"}, {"owner": {"reputation": 79, "user_id": 4775750, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh4.googleusercontent.com/-Gn6K9lPuVIk/AAAAAAAAAAI/AAAAAAAAANc/pfrdGZ8MluA/photo.jpg?sz=128", "display_name": "Nathan Lundgren", "link": "https://stackoverflow.com/users/4775750/nathan-lundgren"}, "edited": false, "score": 0, "creation_date": 1453924439, "post_id": 35045722, "comment_id": 57817762, "body": "I am not explicitly writing 1/3. Both the 1 value and the 3 value are input by the user. For example, the <code>milesPerYear</code> is at 100 and the <code>hybridEffic</code> is at 60. This should print out 1.67, but instead will print 1.6666667"}, {"owner": {"reputation": 1517, "user_id": 4041176, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/000af332eb1a0ab42d0139b0bfc6eccc?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Ilharco", "link": "https://stackoverflow.com/users/4041176/gabriel-ilharco"}, "reply_to_user": {"reputation": 79, "user_id": 4775750, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh4.googleusercontent.com/-Gn6K9lPuVIk/AAAAAAAAAAI/AAAAAAAAANc/pfrdGZ8MluA/photo.jpg?sz=128", "display_name": "Nathan Lundgren", "link": "https://stackoverflow.com/users/4775750/nathan-lundgren"}, "edited": false, "score": 0, "creation_date": 1453924577, "post_id": 35045722, "comment_id": 57817838, "body": "Then its a likely a problem with another part of your code, which you didn&#39;t post. Try for yourself writing a program with only this in the main: <code>cout &lt;&lt; fixed;</code> <code>cout.precision(2);</code> <code>double d = 1.0&#47;3;</code> <code>cout &lt;&lt; d;</code>, and see for yourself that it works =)"}, {"owner": {"reputation": 1517, "user_id": 4041176, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/000af332eb1a0ab42d0139b0bfc6eccc?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Ilharco", "link": "https://stackoverflow.com/users/4041176/gabriel-ilharco"}, "reply_to_user": {"reputation": 79, "user_id": 4775750, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh4.googleusercontent.com/-Gn6K9lPuVIk/AAAAAAAAAAI/AAAAAAAAANc/pfrdGZ8MluA/photo.jpg?sz=128", "display_name": "Nathan Lundgren", "link": "https://stackoverflow.com/users/4775750/nathan-lundgren"}, "edited": false, "score": 0, "creation_date": 1453924641, "post_id": 35045722, "comment_id": 57817876, "body": "If you want, I can continue helping you  <a href=\"http://chat.stackoverflow.com/rooms/101814/discussion-between-gabriel-ilharco-and-nathan-lundgren\">in chat</a>."}, {"owner": {"reputation": 79, "user_id": 4775750, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh4.googleusercontent.com/-Gn6K9lPuVIk/AAAAAAAAAAI/AAAAAAAAANc/pfrdGZ8MluA/photo.jpg?sz=128", "display_name": "Nathan Lundgren", "link": "https://stackoverflow.com/users/4775750/nathan-lundgren"}, "edited": false, "score": 0, "creation_date": 1453925243, "post_id": 35045722, "comment_id": 57818197, "body": "The reason I wouldn&#39;t see this fix work was because of fatal error C1075 (I forgot a } at the end of the code). Stupid coder :P"}], "tags": [], "owner": {"reputation": 1517, "user_id": 4041176, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/000af332eb1a0ab42d0139b0bfc6eccc?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Ilharco", "link": "https://stackoverflow.com/users/4041176/gabriel-ilharco"}, "is_accepted": true, "score": 1, "last_activity_date": 1453921492, "last_edit_date": 1453921492, "creation_date": 1453920982, "answer_id": 35045722, "question_id": 35045643, "link": "https://stackoverflow.com/questions/35045643/how-to-properly-set-precision-for-doubles-in-c/35045722#35045722", "title": "How to properly set precision for doubles in C++", "body": "<p>To fix that, you should use fixed floating-point notation for cout. You can find more info <a href=\"http://www.cplusplus.com/reference/ios/fixed/\" rel=\"nofollow\">here</a>. </p>\n\n<p>Try addind <code>cout &lt;&lt; fixed</code> to your code, like the code below. To set the precision to <code>2</code>, you can use the <code>precision</code> property.</p>\n\n<pre><code>cout &lt;&lt; fixed;\ncout.precision(2);\n</code></pre>\n\n<p>Here is the complete code:</p>\n\n<pre><code>using namespace std;\n\nint main() {\n\n    cout &lt;&lt; fixed;\n    cout.precision(2);\n\n    if (totalCostHybrid &lt; totalCostNonHybrid) {\n            cout &lt;&lt; \"Hybrid car: \" &lt;&lt; endl;\n            cout &lt;&lt; \"Total cost: \" &lt;&lt; totalCostHybrid &lt;&lt; endl;\n            cout &lt;&lt; \"Total gallons used: \" &lt;&lt; milesPerYear / hybridEffic &lt;&lt; endl;\n            cout &lt;&lt; \"Total gas cost: \" &lt;&lt; gasCostHybrid &lt;&lt; endl;\n            cout &lt;&lt; \"Non-hybrid car: \" &lt;&lt; endl;\n            cout &lt;&lt; \"Total cost: \" &lt;&lt; totalCostNonHybrid &lt;&lt; endl;\n            cout &lt;&lt; \"Total gallons used: \" &lt;&lt; milesPerYear / nonHybridEffic &lt;&lt; endl;\n            cout &lt;&lt; \"Total gas cost: \" &lt;&lt; gasCostNonHybrid &lt;&lt; endl;\n            cout &lt;&lt; \"Hybrid is cheaper!\" &lt;&lt; endl;\n     }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1996, "user_id": 5161718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448f457d74b98db25dd6bcccfa73a32c?s=128&d=identicon&r=PG&f=1", "display_name": "Bojan Petkovic", "link": "https://stackoverflow.com/users/5161718/bojan-petkovic"}, "edited": false, "score": 1, "creation_date": 1504715480, "post_id": 46079908, "comment_id": 79121963, "body": "it would be better to use libraries that do this."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user8570194"}, "is_accepted": false, "score": 0, "last_activity_date": 1504714219, "creation_date": 1504714219, "answer_id": 46079908, "question_id": 35045643, "link": "https://stackoverflow.com/questions/35045643/how-to-properly-set-precision-for-doubles-in-c/46079908#46079908", "title": "How to properly set precision for doubles in C++", "body": "<p>Cheat and watch purists go crazy...</p>\n\n<pre><code>    double time;  //Only want two decimal places.\n    double timeCon = time * 100.0;  //Pull out the two decimals I want.\n    int timeCut = timeCon;  //Cut all decimal values.\n    double timeRevert = timeCut / 100.0;  //Laugh.\n    cout &lt;&lt; timeRevert &lt;&lt; endl;  //Watch heads explode.\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 4775750, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh4.googleusercontent.com/-Gn6K9lPuVIk/AAAAAAAAAAI/AAAAAAAAANc/pfrdGZ8MluA/photo.jpg?sz=128", "display_name": "Nathan Lundgren", "link": "https://stackoverflow.com/users/4775750/nathan-lundgren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4882, "favorite_count": 0, "accepted_answer_id": 35045722, "answer_count": 3, "score": 1, "last_activity_date": 1504714219, "creation_date": 1453920682, "last_edit_date": 1453920979, "question_id": 35045643, "link": "https://stackoverflow.com/questions/35045643/how-to-properly-set-precision-for-doubles-in-c", "title": "How to properly set precision for doubles in C++", "body": "<p>I'm working on a project where I need to do some math and give the user output with dollars in it, so I would like to have my console tell the user an answer like <code>$20.15</code> instead of <code>$20.153</code>. I used the set precision function as such:\n<code>cout &lt;&lt; setprecision(2);</code>, but rather than have the numbers become what I want them to be, they are converted into scientific notation.</p>\n\n<p>I'm outputting a lot of numbers, so having a function like <code>setprecision</code> would be best for me for ease of use.</p>\n\n<p>How do I properly have the numbers displayed with only two decimal places and not have the console give me numbers in scientific notation?</p>\n\n<p>Thanks</p>\n\n<p>Nathan</p>\n\n<p>EDIT:</p>\n\n<p>Here is the part of my code I'm having problems with:</p>\n\n<pre><code>int main() {\n\ncout &lt;&lt; setprecision(2);\n\nif (totalCostHybrid &lt; totalCostNonHybrid) {\n            cout &lt;&lt; \"Hybrid car: \" &lt;&lt; endl;\n            cout &lt;&lt; \"Total cost: \" &lt;&lt; totalCostHybrid &lt;&lt; endl;\n            cout &lt;&lt; \"Total gallons used: \" &lt;&lt; milesPerYear / hybridEffic &lt;&lt; endl;\n            cout &lt;&lt; \"Total gas cost: \" &lt;&lt; gasCostHybrid &lt;&lt; endl;\n            cout &lt;&lt; \"Non-hybrid car: \" &lt;&lt; endl;\n            cout &lt;&lt; \"Total cost: \" &lt;&lt; totalCostNonHybrid &lt;&lt; endl;\n            cout &lt;&lt; \"Total gallons used: \" &lt;&lt; milesPerYear / nonHybridEffic &lt;&lt; endl;\n            cout &lt;&lt; \"Total gas cost: \" &lt;&lt; gasCostNonHybrid &lt;&lt; endl;\n            cout &lt;&lt; \"Hybrid is cheaper!\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Obviously there's more to it, but this is what I need help with.</p>\n"}, {"tags": ["c++", "time-complexity"], "comments": [{"owner": {"reputation": 30577, "user_id": 476496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85197b0087c5bee323d2690c977878f8?s=128&d=identicon&r=PG", "display_name": "Vincent Savard", "link": "https://stackoverflow.com/users/476496/vincent-savard"}, "edited": false, "score": 0, "creation_date": 1453921004, "post_id": 35045585, "comment_id": 57815768, "body": "To those voting to close: I don&#39;t think the question is too broad. Calculating the complexity of a function is pretty narrow. The close vote isn&#39;t a super-downvote."}, {"owner": {"reputation": 5284, "user_id": 2040925, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/191d1998634eaa0af6129682394dc560?s=128&d=identicon&r=PG", "display_name": "typ1232", "link": "https://stackoverflow.com/users/2040925/typ1232"}, "reply_to_user": {"reputation": 30577, "user_id": 476496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85197b0087c5bee323d2690c977878f8?s=128&d=identicon&r=PG", "display_name": "Vincent Savard", "link": "https://stackoverflow.com/users/476496/vincent-savard"}, "edited": false, "score": 0, "creation_date": 1453922283, "post_id": 35045585, "comment_id": 57816477, "body": "@VincentSavard For this Q&amp;A to become useful to anyone you would have to explain how to determine algorithmic complexity. This is too broad in my opinion. The author does not give a narrow enough issue about the general problem."}, {"owner": {"reputation": 25, "user_id": 5848479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/578623de43590cd76cdf153318afdd20?s=128&d=identicon&r=PG&f=1", "display_name": "math.", "link": "https://stackoverflow.com/users/5848479/math"}, "edited": false, "score": 0, "creation_date": 1453977533, "post_id": 35045585, "comment_id": 57841167, "body": "@typ1231 this may appear boring for you,well it&#39;s not for me"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 5848479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/578623de43590cd76cdf153318afdd20?s=128&d=identicon&r=PG&f=1", "display_name": "math.", "link": "https://stackoverflow.com/users/5848479/math"}, "edited": false, "score": 0, "creation_date": 1453977612, "post_id": 35049247, "comment_id": 57841230, "body": "the author  of the code is saying it&#39;s O(n+m*log(m))"}, {"owner": {"reputation": 335, "user_id": 3243751, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oGV4a.png?s=128&g=1", "display_name": "FLUXparticle", "link": "https://stackoverflow.com/users/3243751/fluxparticle"}, "reply_to_user": {"reputation": 25, "user_id": 5848479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/578623de43590cd76cdf153318afdd20?s=128&d=identicon&r=PG&f=1", "display_name": "math.", "link": "https://stackoverflow.com/users/5848479/math"}, "edited": false, "score": 0, "creation_date": 1454008964, "post_id": 35049247, "comment_id": 57863390, "body": "After a closer look at the code it is O(n+m) because the second loop only iterates over all edges. I&#39;ll correct my answer but I don&#39;t see a reason for m*log(m). There is no comparing sort involved. He&#39;s using bucket sort which has a complexity of O(m)."}], "tags": [], "owner": {"reputation": 335, "user_id": 3243751, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oGV4a.png?s=128&g=1", "display_name": "FLUXparticle", "link": "https://stackoverflow.com/users/3243751/fluxparticle"}, "is_accepted": false, "score": 0, "last_activity_date": 1454009134, "last_edit_date": 1454009134, "creation_date": 1453933340, "answer_id": 35049247, "question_id": 35045585, "link": "https://stackoverflow.com/questions/35045585/what-is-the-complexity-of-that-code/35049247#35049247", "title": "What is the complexity of that code?", "body": "<p>For each node this code iterates over all outgoing edges. So the runtime complexity is O(n*m) where n is the number of nodes and m is the number edges.</p>\n\n<p>Edit: After a closer look at the data and the code, I say the complexity is O(n+m). The first and the second loop iterate over all edges, so O(m), and the third loop iterates over all nodes, so O(n).</p>\n"}], "owner": {"reputation": 25, "user_id": 5848479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/578623de43590cd76cdf153318afdd20?s=128&d=identicon&r=PG&f=1", "display_name": "math.", "link": "https://stackoverflow.com/users/5848479/math"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1454009134, "creation_date": 1453920480, "last_edit_date": 1453920840, "question_id": 35045585, "link": "https://stackoverflow.com/questions/35045585/what-is-the-complexity-of-that-code", "title": "What is the complexity of that code?", "body": "<p>I was looking at code on this link:<br>\n<a href=\"http://codeforces.com/contest/459/submission/7495216\" rel=\"nofollow\">http://codeforces.com/contest/459/submission/7495216</a><br>\nThe code is that given a directed weighted graph and wanna find the longest path with strictly increasing edges.<br>\nCan anyone help me?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\nusing namespace std;\nconst int MAX = 300005;\nvector&lt;pair&lt;int, int&gt; &gt; w[MAX];\nint dp[MAX], tmp[MAX];\nint main()\n{\n    ios::sync_with_stdio(false);\n    int n, m;\n    cin &gt;&gt; n &gt;&gt; m;\n    for (int i = 0; i &lt; m; i++)\n    {\n        int u, v, len;\n        cin &gt;&gt; u &gt;&gt; v &gt;&gt; len;\n        w[len].push_back(make_pair(u, v));\n    }\n    for (int i = 0; i &lt; MAX; i++)\n    {\n        for (int j = 0; j &lt; w[i].size(); j++)\n        {\n            int u = w[i][j].first, v = w[i][j].second;\n            tmp[v] = 0;\n        }\n        for (int j = 0; j &lt; w[i].size(); j++)\n        {\n            int u = w[i][j].first, v = w[i][j].second;\n            tmp[v] = max(tmp[v], dp[u] + 1);\n        }\n        for (int j = 0; j &lt; w[i].size(); j++)\n        {\n            int u = w[i][j].first, v = w[i][j].second;\n            dp[v] = max(dp[v], tmp[v]);\n        }\n    }\n    int ans = 0;\n    for (int i = 1; i &lt;= n; i++)\n        ans = max(ans, dp[i]);\n    cout &lt;&lt; ans &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "encoding"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1453920656, "post_id": 35045521, "comment_id": 57815553, "body": "Even a single 72 digits number is big (doesn&#39;t fit in <code>uint64_t</code>)"}, {"owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "edited": false, "score": 0, "creation_date": 1453920760, "post_id": 35045521, "comment_id": 57815614, "body": "Not sure what you&#39;re trying to achieve but I googled your question and found <a href=\"http://mathoverflow.net/questions/69244/encoding-n-natural-numbers-into-one-and-back\">this Math Overflow</a> question..."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1453921058, "post_id": 35045521, "comment_id": 57815802, "body": "72 digits? Or a sequence of 72 numbers from 0 to 9?"}, {"owner": {"reputation": 14999, "user_id": 8999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZD5Uo.jpg?s=128&g=1", "display_name": "Fabio Ceconello", "link": "https://stackoverflow.com/users/8999/fabio-ceconello"}, "edited": false, "score": 2, "creation_date": 1453921345, "post_id": 35045521, "comment_id": 57815947, "body": "I wouldn&#39;t reinvent the wheel. There are BN libraries you can use to encode, decode and manipulate such numbers easily. Just search for &quot;big numbers library X&quot;, X being your language of choice, and they&#39;ll pop up."}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1453923483, "post_id": 35045521, "comment_id": 57817206, "body": "This sounds like you already have a 72-digit decimal big-integer, just manual.  Checkout real big-integer libraries, and you&#39;re done."}], "owner": {"reputation": 1, "user_id": 5846676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ff19c73317ca962aeee4147387d631f?s=128&d=identicon&r=PG&f=1", "display_name": "HeltonSM", "link": "https://stackoverflow.com/users/5846676/heltonsm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1453923175, "creation_date": 1453920251, "last_edit_date": 1453923175, "question_id": 35045521, "link": "https://stackoverflow.com/questions/35045521/turning-a-finite-sequence-of-natural-numbers-into-one-natural-number-c", "title": "Turning a finite sequence of natural numbers into one natural number c++", "body": "<p>I have a sequence of natural numbers up to 72 digits, each digit varying from 0 to 9. I need to encode this sequence into one natural number. Using prime numbers (godel number) is not practical because the number gets really big really fast.</p>\n\n<p><strong>Is there a different way of doing this?</strong></p>\n"}, {"tags": ["c++", "c++14", "unions"], "comments": [{"owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 0, "creation_date": 1453935390, "post_id": 35045260, "comment_id": 57823814, "body": "What is the type of <code>id_in</code>? Why do you expect to be able to assign a thing of one type to a thing of a different type?"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 1, "creation_date": 1454103640, "post_id": 35045260, "comment_id": 57910947, "body": "Those typedefs were never needed in C++, not even in C++98 and still not in C++14. <code>_D</code> is plain wrong."}], "answers": [{"tags": [], "owner": {"reputation": 16507, "user_id": 4787126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a822df86c907c77c792a8f91b2bab41?s=128&d=identicon&r=PG&f=1", "display_name": "Zbynek Vyskovsky - kvr000", "link": "https://stackoverflow.com/users/4787126/zbynek-vyskovsky-kvr000"}, "is_accepted": false, "score": -1, "last_activity_date": 1453919929, "creation_date": 1453919929, "answer_id": 35045422, "question_id": 35045260, "link": "https://stackoverflow.com/questions/35045260/what-is-the-reason-for-naming-unions/35045422#35045422", "title": "What is the reason for naming unions?", "body": "<p>There can be various reasons:</p>\n\n<ul>\n<li>There are restrictions in original C compiler which doesn't allow anonymous unions. In other words the structure may be used by both C and C++ programs.</li>\n<li>You may want to work with whole union (moving, assigning etc.) and this allows you to define the variable of such types.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 12418, "user_id": 214296, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/268966bdb84008bef79268f0a45b533e?s=128&d=identicon&r=PG", "display_name": "Jim Fell", "link": "https://stackoverflow.com/users/214296/jim-fell"}, "edited": false, "score": 0, "creation_date": 1453921756, "post_id": 35045645, "comment_id": 57816188, "body": "I don&#39;t want an anonymous union.  I want to be able to reference the union by name, not it&#39;s members, since its members all occupy the same memory space anyways.  Coding is more complex if I have to reference each member by name, rather than a common shared reference to the union name."}, {"owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "reply_to_user": {"reputation": 12418, "user_id": 214296, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/268966bdb84008bef79268f0a45b533e?s=128&d=identicon&r=PG", "display_name": "Jim Fell", "link": "https://stackoverflow.com/users/214296/jim-fell"}, "edited": false, "score": 0, "creation_date": 1453935558, "post_id": 35045645, "comment_id": 57823893, "body": "Then why are you talking about anonymous unions? Nothing about your example shows the compiler treating your union as anonymous. It shows the compiler refusing to assign a thing of one type to a thing of another type."}], "tags": [], "owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "is_accepted": false, "score": -1, "last_activity_date": 1453936357, "last_edit_date": 1453936357, "creation_date": 1453920686, "answer_id": 35045645, "question_id": 35045260, "link": "https://stackoverflow.com/questions/35045260/what-is-the-reason-for-naming-unions/35045645#35045645", "title": "What is the reason for naming unions?", "body": "<p>Because you're not using an anonymous union in your example. You've given your union member of your struct a name, <code>msgId</code>, and it has members. You can't assign directly to the union itself, you have to assign to a member of the union.</p>\n\n<p>An anonymous union would be as follows:</p>\n\n<pre><code>union {\n    int i;\n    char c;\n};\ni = 1;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>struct s \n{\n    int i1;\n    union {\n        int i2;\n        char c2;\n    };\n};\n\ns s1.i2 = 5;\n</code></pre>\n\n<p>The union in struct s has no name, and it's members are accessed directly.</p>\n\n<p><strong>ETA:</strong></p>\n\n<p>Assuming your variable <code>id_in</code> is an <code>unsigned char</code> since you assign it to the unsigned char member in the example that works, why would you expect this to work?</p>\n\n<pre><code>PDMSG_DESC ptMsg-&gt;hdr.msgId = id_in;\n</code></pre>\n\n<p><code>ptMsg-&gt;hdr.msgId</code> is not of type <code>unsigned char</code> nor is it an implicitly convertible type. <code>ptMsg-&gt;hdr.msgId</code> is of type <code>_DMessageHeader::_msgId</code>.</p>\n\n<p>\"A union is a special class type that can hold only one of its non-static data members at a time.\" (<a href=\"http://en.cppreference.com/w/cpp/language/union\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/language/union</a>) It's a class type and you've defined no conversion operators or constructors. Of course it won't allow the assignment.</p>\n"}, {"comments": [{"owner": {"reputation": 64, "user_id": 3221383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09d59fa195bfe77865d2a2d7e0ee3636?s=128&d=identicon&r=PG&f=1", "display_name": "pigi5", "link": "https://stackoverflow.com/users/3221383/pigi5"}, "edited": false, "score": 0, "creation_date": 1579213553, "post_id": 35046482, "comment_id": 105701523, "body": "Although this addresses a problem in the post, it does not answer the question, and should not be marked as the accepted answer."}], "tags": [], "owner": {"reputation": 42, "user_id": 5834053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19a44d701a3576f8679e3e4d3f216ee5?s=128&d=identicon&r=PG&f=1", "display_name": "AlexBriskin", "link": "https://stackoverflow.com/users/5834053/alexbriskin"}, "is_accepted": true, "score": 1, "last_activity_date": 1453923566, "last_edit_date": 1495540899, "creation_date": 1453923337, "answer_id": 35046482, "question_id": 35045260, "link": "https://stackoverflow.com/questions/35045260/what-is-the-reason-for-naming-unions/35046482#35046482", "title": "What is the reason for naming unions?", "body": "<p>I'm not sure why would you use union in this case at all.\nPlease note that the size of the struct is 8 bytes (size of long long) on my 64bit machine.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing std::cout;\nusing std::endl;\ntypedef struct _DMessageHeader {\n    union _msgId {\n        unsigned char ucMsgId;\n        unsigned short usMsgId;\n        unsigned long ulMsgId;\n        unsigned long long ullMsgId;\n    }  msgId;\n} DMSG_HDR, *PDMSG_HDR;\n\nint main( int argc , char ** argv, char ** env)\n{\n    cout&lt;&lt;\"sizof DMessageHeader\"&lt;&lt;sizeof(DMSG_HDR)&lt;&lt;endl;\n    return 0;\n}\n</code></pre>\n\n<p>If all you store in union msgid is a single id of varying length (1 - 8) bytes depending on your architecture) and you have no memory constrains rewrite your struct as following:</p>\n\n<pre><code>typedef struct _DMessageHeader {\nunsigned long long msgId;\n} DMSG_HDR, *PDMSG_HDR;\nDMSG_HDR hdr;\nhdr.msgId = id_in;\n</code></pre>\n\n<p>Also I suggest reading <a href=\"https://stackoverflow.com/questions/4788965/when-would-anyone-use-a-union-is-it-a-remnant-from-the-c-only-days\">this</a> thread for thorough discussion about using unions in C++.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 5827716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0259849e71746e37ba46a1fd5974cd9?s=128&d=identicon&r=PG&f=1", "display_name": "scasady", "link": "https://stackoverflow.com/users/5827716/scasady"}, "is_accepted": false, "score": 2, "last_activity_date": 1453928735, "creation_date": 1453928735, "answer_id": 35047973, "question_id": 35045260, "link": "https://stackoverflow.com/questions/35045260/what-is-the-reason-for-naming-unions/35047973#35047973", "title": "What is the reason for naming unions?", "body": "<p>Its a type thing. The compiler can't convert an int something to a union.\nYou can however overload the \"=\" operator to do it.</p>\n"}], "owner": {"reputation": 12418, "user_id": 214296, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/268966bdb84008bef79268f0a45b533e?s=128&d=identicon&r=PG", "display_name": "Jim Fell", "link": "https://stackoverflow.com/users/214296/jim-fell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 35046482, "answer_count": 4, "score": 1, "last_activity_date": 1486313956, "creation_date": 1453919367, "last_edit_date": 1486313956, "question_id": 35045260, "link": "https://stackoverflow.com/questions/35045260/what-is-the-reason-for-naming-unions", "title": "What is the reason for naming unions?", "body": "<p>Why name a union if the compiler always treats the object as anonymous, regardless as to whether or not the union is named?</p>\n\n<p>My implementation looks like this:</p>\n\n<pre><code>typedef struct _DMessageHeader {\n    union _msgId {\n        unsigned char ucMsgId;\n        unsigned short usMsgId;\n        unsigned long ulMsgId;\n        unsigned long long ullMsgId;\n    } msgId;\n} DMSG_HDR, *PDMSG_HDR;\n</code></pre>\n\n<p>I'd like to be able to access it like this, but the compiler throws an error:</p>\n\n<pre><code>PDMSG_DESC ptMsg-&gt;hdr.msgId = id_in;\n</code></pre>\n\n<p>It only allows me to directly access the union member like this:</p>\n\n<pre><code>PDMSG_DESC ptMsg-&gt;hdr.msgId.ucMsgId = id_in;\n</code></pre>\n\n<p>Any thoughts as to why this is, or how I may access the union by name?</p>\n"}, {"tags": ["c++", "templates", "sfinae"], "comments": [{"owner": {"reputation": 2688, "user_id": 990142, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2c17dc83972d868e5a4a065549967ee2?s=128&d=identicon&r=PG", "display_name": "rwols", "link": "https://stackoverflow.com/users/990142/rwols"}, "edited": false, "score": 0, "creation_date": 1453919429, "post_id": 35045208, "comment_id": 57814813, "body": "What&#39;s stopping you from using boost::program_options ?"}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1453919891, "post_id": 35045208, "comment_id": 57815087, "body": "&quot;Write my code for me&quot; isn&#39;t a valid stack overflow question.  &gt; Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers."}, {"owner": {"reputation": 522, "user_id": 3554605, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6b5fd257651f55b309a95a18bd4ba92f?s=128&d=identicon&r=PG&f=1", "display_name": "sigalor", "link": "https://stackoverflow.com/users/3554605/sigalor"}, "reply_to_user": {"reputation": 2688, "user_id": 990142, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2c17dc83972d868e5a4a065549967ee2?s=128&d=identicon&r=PG", "display_name": "rwols", "link": "https://stackoverflow.com/users/990142/rwols"}, "edited": false, "score": 0, "creation_date": 1453919909, "post_id": 35045208, "comment_id": 57815096, "body": "@rwols I do not only want my program to have the ability to process command line parameters, I also want to learn many new things about the fascinating world of C++ templates! ;) But if I would want to be productive, I would probably use boost::program_options, thanks for the tip."}, {"owner": {"reputation": 2688, "user_id": 990142, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2c17dc83972d868e5a4a065549967ee2?s=128&d=identicon&r=PG", "display_name": "rwols", "link": "https://stackoverflow.com/users/990142/rwols"}, "edited": false, "score": 0, "creation_date": 1453920138, "post_id": 35045208, "comment_id": 57815239, "body": "@sigalor Well, if you look at boost::program_options, you can see that all you really have to do is to lexical_cast your held option string to the desired type. There&#39;s no other way to read from the terminal after all; it&#39;s all strings in the end."}, {"owner": {"reputation": 522, "user_id": 3554605, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6b5fd257651f55b309a95a18bd4ba92f?s=128&d=identicon&r=PG&f=1", "display_name": "sigalor", "link": "https://stackoverflow.com/users/3554605/sigalor"}, "reply_to_user": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1453920403, "post_id": 35045208, "comment_id": 57815404, "body": "@xaxxon What isn&#39;t clear about the problems with my code exactly? Also, I have already filled the functions I do not know how to write valid C++ for with some kind of pseudo-code that should model the expected behavior sufficiently."}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 0, "last_activity_date": 1453920481, "creation_date": 1453920481, "answer_id": 35045587, "question_id": 35045208, "link": "https://stackoverflow.com/questions/35045208/saving-class-instances-with-different-template-parameters-inside-one-vector-but/35045587#35045587", "title": "Saving class instances with different template parameters inside one vector but keep their properties", "body": "<p>I am not sure I fully understood the question, but I will try to answer it.</p>\n\n<blockquote>\n  <p>I want to store multiple instances of one class with different\n  template parameters</p>\n</blockquote>\n\n<p>There is no such thing. A template with different template paramter is a different class. However, you seem to be solving it successfully through <code>boost::any</code>. You could also use another <strong>type-erasure</strong> technique - for example, have a non-template parent to all your options, or switch to non-type-erasure <code>boost::variant</code>, as it seems like you only have a limited number of possible option types.</p>\n\n<blockquote>\n  <p>By using using, std::enable_if_t and std::is_same I created a type\n  called OptionHasValue...</p>\n</blockquote>\n\n<p>First of all, I would not use SFINAE in this example. Simple partial specialization will suffice. As for <code>opt.setValueFromString(argvVec[i]);</code> just create a NOOP function in void option class.</p>\n\n<p>As for the last question, just use a templated function which <strong>receives</strong> a reference to the return type, instead of returning it.</p>\n"}], "owner": {"reputation": 522, "user_id": 3554605, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6b5fd257651f55b309a95a18bd4ba92f?s=128&d=identicon&r=PG&f=1", "display_name": "sigalor", "link": "https://stackoverflow.com/users/3554605/sigalor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1453920481, "creation_date": 1453919166, "question_id": 35045208, "link": "https://stackoverflow.com/questions/35045208/saving-class-instances-with-different-template-parameters-inside-one-vector-but", "title": "Saving class instances with different template parameters inside one vector but keep their properties", "body": "<p>I would like to have a program that parses and manages command-line parameters for me. As you can see in the <code>main</code>-function, by using simple commands like <code>Option&lt;int&gt;(\"number\", { \"-n\", \"--number\" })</code> you can specify the type the option's value should have (like <code>int</code> in this case), an unique identifier  for each option (like <code>\"number\"</code>), and multiple strings this option can be introduced with. Also, many options should be wrapped in a class called <code>OptionSet</code>, which simplifies access to its options.</p>\n\n<p>But in my actual code, I am having several problems right now:</p>\n\n<ol>\n<li>I want to store multiple instances of one class with different template parameters within one <code>std::vector</code>. For example, in my code, <code>Option&lt;int&gt;</code> should be stored in the same vector like <code>Option&lt;std::string&gt;</code> and <code>Option&lt;double&gt;</code>.<br>\nMaybe it's even possible to store the template parameters separately in another vector?</li>\n<li>By using <code>using</code>, <code>std::enable_if_t</code> and <code>std::is_same</code> I created a type called <code>OptionHasValue</code>. If the template parameter <code>Invert</code> is false and <code>T</code> is <code>void</code>, <code>OptionHasValue</code> has an invalid type, otherwise it has the type specified by the template parameter <code>U</code>.<br>\nThe class <code>OptionValue</code> uses <code>OptionHasValue</code> and a bit of SFINAE magic to decide if it should have the needed methods for supporting the storage of values or not. That is, the first version of <code>OptionValue</code> has <code>OptionHasValue&lt;T&gt;</code> as its second template parameter, so it becomes invalid (and removed by the compiler) if <code>T</code> is <code>void</code>. The other version of <code>OptionValue</code> has the opposite behavior, because its second template parameter is <code>OptionHasValue&lt;T, true&gt;</code> and the <code>true</code> inverts the behavior of <code>OptionHasValue</code>.<br>\nThe class <code>Option</code> itself inherits from <code>OptionValue</code>, so if you create an option like <code>Option&lt;void&gt;</code>, it does not have support for values (that is, it lacks functions like <code>setValue</code>, <code>setValueFromString</code> and <code>getValue</code> as it should). On the other hand, if you create an option like <code>Option&lt;int&gt;</code>, the resulting class instance has all of these features.<br>\nThe problem now is, that (for example) <code>OptionSet::process()</code> accesses both <code>Option::hasValue</code> and <code>Option::setValueFromString</code>, but the latter is only declared if <code>Option::hasValue</code> is true (and the corresponding template parameter for the option is not <code>void</code>). But because <code>Option::setValueFromString</code> is not wrapped in some kind of template here, the compiler also complains.</li>\n<li>In my <code>main</code>-function I use the function <code>optionSet.getOptionValue(std::string)</code>. This function should return the value of an option (after it has been set after <code>process()</code> has been called). The difficult thing now is that the return type depends on the return value of <code>findOptionByIdentifier</code>, a function which loops through all available options and returns the option with the wanted identifier.<br>\nFor example, if <code>identifier</code> would be <code>\"number\"</code> (as in the example for an <code>Option</code> at the beginning of this question), the return type of <code>findOptionByIdentifier</code> would be <code>Option&lt;int&gt;</code>, because the only option having the identifier <code>\"number\"</code> is the one which has <code>int</code> as its first template parameter, which would finally result in <code>getOptionValue</code> having the return type <code>int</code>.<br>\nYou can see the expected behavior in comments in some of the last lines of the <code>main</code>-function.</li>\n</ol>\n\n<p>So, what do I have to change in the following code to fix all these things (and to make it compile)? I am using g++ 5.2.0 (mingw-w64), so I may use any feature of C++11 and C++14.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;algorithm&gt;\n#include &lt;stdexcept&gt;\n#include &lt;type_traits&gt;\n#include &lt;boost/lexical_cast.hpp&gt;\n#include &lt;boost/any.hpp&gt;\n\n\n\ntemplate&lt;typename T, bool Invert = false, typename U = void&gt;\nusing OptionHasValue = std::enable_if_t&lt;(!std::is_same&lt;T, void&gt;::value) ^ Invert, U&gt;;       //only make this template substitution successful, if (when 'Invert' is false) T is not if type 'void'\n\ntemplate&lt;typename T, typename Enable = void&gt;\nclass OptionValue;\n\ntemplate&lt;typename T&gt;\nclass OptionValue&lt;T, OptionHasValue&lt;T&gt;&gt;             //using SFINAE (\"substitution failure is not an error\") here\n{\n    protected:\n        T                               value;\n\n    public:\n        void setValue(T newValue)\n        {\n            value = newValue;\n        }\n\n        void setValueFromString(std::string newValueStr)\n        {\n            setValue(boost::lexical_cast&lt;T&gt;(newValueStr));\n        }\n\n        T getValue()\n        {\n            return value;\n        }\n\n        bool hasValue()\n        {\n            return true;                            //if this class variant is taken by the compiler, the 'Option' that will inherit from it will have a value\n        }\n};\n\ntemplate&lt;typename T&gt;\nclass OptionValue&lt;T, OptionHasValue&lt;T, true&gt;&gt;       //the opposite condition (the 'true' inverts it)\n{\n    //option value is disabled, but to check if a value is available in the derived class, add a function for that (or should I not?)\n    public:\n        bool hasValue()\n        {\n            return false;\n        }\n};\n\n\n\ntemplate&lt;typename T&gt;\nclass Option : public OptionValue&lt;T&gt;\n{\n    private:\n        std::string                     identifier;\n        std::vector&lt;std::string&gt;        variants;\n\n    public:\n        Option(std::string newIdentifier, std::vector&lt;std::string&gt; newVariants)\n        {\n            identifier = newIdentifier;\n            variants = newVariants;\n        }\n\n        bool hasVariant(std::string v)\n        {\n            return (std::find(variants.begin(), variants.end(), v) != variants.end());\n        }\n\n        std::string getIdentifier()\n        {\n            return identifier;\n        }\n};\n\n\n\nclass OptionSet\n{\n    private:\n        std::vector&lt;boost::any&gt;         options;                                //boost::any can't be the right way to do this, or is it?\n        std::vector&lt;std::string&gt;        argvVec;\n\n        template&lt;typename T&gt;\n        Option&lt;T&gt;&amp; findOptionByIdentifier(std::string identifier)\n        {\n            for(auto&amp; o : options)\n                if(o.getIdentifier() == identifier)                             //of course this doesn't compile, because 'o' will always be of type 'boost::any', but what should I do instead?\n                    return o;\n            throw std::runtime_error(\"error: unable to find option by identifier \\\"\" + identifier + \"\\\"\\n\");\n        }\n\n        template&lt;typename T&gt;\n        Option&lt;T&gt;&amp; findOptionByVariant(std::string variant)\n        {\n            for(auto&amp; o : options)\n                if(o.hasVariant(variant))                                       //probably almost the same compile error like in 'findOptionByIdentifier'\n                    return o;\n            throw std::runtime_error(\"error: unable to find option by variant \\\"\" + variant + \"\\\"\\n\");\n        }\n\n    public:\n        template&lt;typename t&gt;\n        void add(Option&lt;T&gt; opt)\n        {\n            options.push_back(opt);                                             //is this the right way to add instances of classes with different template parameters to a vector?\n        }\n\n        void setArgvVec(std::vector&lt;std::string&gt; newArgvVec)\n        {\n            argvVec = newArgvVec;\n        }\n\n        void process()\n        {\n            for(size_t i=0; i&lt;argvVec.size(); i++)\n            {\n                Option&lt;T&gt;&amp; opt = findOptionByVariant(argvVec[i]);               //of course this doesn't compile either, but what should I do instead?\n                if(opt.hasValue())\n                {\n                    if(i == argvVec.size()-1)\n                        throw std::runtime_error(\"error: no value given for option \\\"\" + argvVec[i] + \"\\\"\\n\");\n                    opt.setValueFromString(argvVec[i]);                         //boost::bad_lexical_cast should be caught here, but that's not important right now\n                    i++;\n                }\n            }\n        }\n\n        template&lt;typename T&gt;\n        T getOptionValue(std::string identifier)\n        {\n            Option&lt;T&gt;&amp; opt = findOptionByIdentifier(identifier);                //a bit like the call to 'findOptionByVariant' in 'process()'. also, this variable does not have to be a reference\n            if(!opt.hasValue())\n                throw std::runtime_error(\"error: option with identifier \\\"\" + identifier + \"\\\" has no value\\n\");\n            return opt.getValue();\n        }\n};\n\n\n\nint main()\n{\n    OptionSet optionSet;\n\n    //it's not guaranteed that OptionSet::add will always receive a rvalue, I just do it here for shorter code/simplicity\n    optionSet.add(Option&lt;void&gt;(\"help\", { \"-?\", \"--help\" }));                    //if it's a void-option, the 'Option' does not have a value, if the template parameter is anything else, it has one (like below)\n    optionSet.add(Option&lt;std::string&gt;(\"message\", { \"-m\", \"--message\" }));\n    optionSet.add(Option&lt;int&gt;(\"number\", { \"-n\", \"--number\" }));\n    optionSet.add(Option&lt;double&gt;(\"pi\", { \"-p\", \"--pi\" }));\n\n    optionSet.setArgvVec({ \"--help\", \"-m\", \"hello\", \"--number\", \"100\", \"--pi\", \"3.14\" });\n    optionSet.process();\n\n    std::string message = optionSet.getOptionValue(\"message\");\n    int number = optionSet.getOptionValue(\"number\");\n    double pi = optionSet.getOptionValue(\"pi\");\n\n    std::cout &lt;&lt; \"Message: \" &lt;&lt; message &lt;&lt; \"\\n\";        //should output 'hello'\n    std::cout &lt;&lt; \"Number:  \" &lt;&lt; number &lt;&lt; \"\\n\";         //should output '100'\n    std::cout &lt;&lt; \"Pi:      \" &lt;&lt; pi &lt;&lt; \"\\n\";             //should output something like '3.140000'\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "performance", "for-loop"], "comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 3, "creation_date": 1453918198, "post_id": 35044876, "comment_id": 57813983, "body": "How much slower/faster? Show actual benchmarks. If the difference is minor, it may be almost everything (including inefficiencies caused by the OS you cannot influence) and can be neglected in good conscience."}, {"owner": {"reputation": 19, "user_id": 4337643, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001737603865/picture?type=large", "display_name": "Aylean Clara Grandieur", "link": "https://stackoverflow.com/users/4337643/aylean-clara-grandieur"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 1, "creation_date": 1453918382, "post_id": 35044876, "comment_id": 57814095, "body": "in my code this expression cause %30 slow down of the code"}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 2, "creation_date": 1453918419, "post_id": 35044876, "comment_id": 57814111, "body": "Show actual benchmarks. But admittedly, it&#39;s not minor."}, {"owner": {"reputation": 19, "user_id": 4337643, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001737603865/picture?type=large", "display_name": "Aylean Clara Grandieur", "link": "https://stackoverflow.com/users/4337643/aylean-clara-grandieur"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1453918596, "post_id": 35044876, "comment_id": 57814247, "body": "sorry i am not very experienced code writer, i just wanted to improve my code run time. i cite the deterioration in time for one loop"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1453918676, "post_id": 35044876, "comment_id": 57814296, "body": "@AyleanClaraGrandieur Please show how you benchmarked these codes. How did you measure actually?"}, {"owner": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "edited": false, "score": 0, "creation_date": 1453918755, "post_id": 35044876, "comment_id": 57814354, "body": "I think you failed to control for some other source of difference.  There are lots of reasons the opposite performance difference (that you likely expected) will not occur, but no good explanation for the difference you report.  So you made a mistake.  (An optimizer could recognize the major optimization one way and not the other, but I still don&#39;t believe the results)"}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1453918766, "post_id": 35044876, "comment_id": 57814368, "body": "Code timing is very software/hardware-specific. Thus, you need to tell us which tool (and possibly which machine, OS, etc.) you used."}, {"owner": {"reputation": 6553, "user_id": 3524982, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5NAb1.png?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/3524982/james"}, "edited": false, "score": 0, "creation_date": 1453918813, "post_id": 35044876, "comment_id": 57814402, "body": "Well, it makes sense that doing a comparison 1,000 times is faster then doing it 1,000,000 times."}, {"owner": {"reputation": 19, "user_id": 4337643, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001737603865/picture?type=large", "display_name": "Aylean Clara Grandieur", "link": "https://stackoverflow.com/users/4337643/aylean-clara-grandieur"}, "edited": false, "score": 0, "creation_date": 1453918909, "post_id": 35044876, "comment_id": 57814452, "body": "my machine is windows 10, i use microsoft visual c++ 2010 edition"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1453918921, "post_id": 35044876, "comment_id": 57814460, "body": "BTW, using directly <code>500</code> as <code>x1</code> limit is cleaner and faster."}, {"owner": {"reputation": 19, "user_id": 4337643, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001737603865/picture?type=large", "display_name": "Aylean Clara Grandieur", "link": "https://stackoverflow.com/users/4337643/aylean-clara-grandieur"}, "edited": false, "score": 0, "creation_date": 1453918972, "post_id": 35044876, "comment_id": 57814494, "body": "dj actually it is the opposite, that makes me wonder."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1453919008, "post_id": 35044876, "comment_id": 57814520, "body": "It might just be because of simplifying the example but if you are only ever going to do something while <code>x1</code> is less than 500 why not have <code>for (int x1=0;x1&lt;500;x1++)</code>?"}, {"owner": {"reputation": 19, "user_id": 4337643, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001737603865/picture?type=large", "display_name": "Aylean Clara Grandieur", "link": "https://stackoverflow.com/users/4337643/aylean-clara-grandieur"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1453919082, "post_id": 35044876, "comment_id": 57814576, "body": "@jarod thank you, my actual code is a bit more complex, i simplified the code, but i understand your point"}, {"owner": {"reputation": 6553, "user_id": 3524982, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5NAb1.png?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/3524982/james"}, "edited": false, "score": 0, "creation_date": 1453919134, "post_id": 35044876, "comment_id": 57814614, "body": "Whoops, I didn&#39;t realize the first loop is the faster one."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1453919194, "post_id": 35044876, "comment_id": 57814660, "body": "Are optimizations turned on compiling both sets of code? If not, the results are pretty useless; with compiler optimizations off, both sets of code will do dumb things (I suspect with compiler optimizations turned all the way up, they&#39;ll actually behave pretty similarly)."}, {"owner": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "edited": false, "score": 1, "creation_date": 1453919324, "post_id": 35044876, "comment_id": 57814750, "body": "Any decent optimizer should promote either test out of the inner loop, so there should be no performance difference.  A look at the generated asm code would be the best way to see if the optimizer were somehow confused by one version and not the other."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1453919413, "post_id": 35044876, "comment_id": 57814809, "body": "I dont get the same result: <a href=\"http://ideone.com/eQ0Txj\" rel=\"nofollow noreferrer\">ideone.com/eQ0Txj</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1453919696, "post_id": 35044876, "comment_id": 57814962, "body": "@Ben shouldn&#39;t <code>a</code> be of the size <code>500000</code>?  If <code>x1</code> can be 499 then <code>a[x2+x1*1000]</code> =&gt; <code>a[x2+499000]</code>"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1453919737, "post_id": 35044876, "comment_id": 57814980, "body": "Maybe the first one is an known pattern for compiler whereas the second one break this recognition."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1453919866, "post_id": 35044876, "comment_id": 57815072, "body": "@NathanOliver True, but this doesnt change the result: <a href=\"http://ideone.com/eQ0Txj\" rel=\"nofollow noreferrer\">ideone.com/eQ0Txj</a>"}, {"owner": {"reputation": 19, "user_id": 4337643, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001737603865/picture?type=large", "display_name": "Aylean Clara Grandieur", "link": "https://stackoverflow.com/users/4337643/aylean-clara-grandieur"}, "edited": false, "score": 0, "creation_date": 1453920000, "post_id": 35044876, "comment_id": 57815158, "body": "i update the question, with my original code"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1453920019, "post_id": 35044876, "comment_id": 57815172, "body": "@Ben OK.  Just wanted to make sure the UB wasn&#39;t affecting anything."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1453920194, "post_id": 35044876, "comment_id": 57815270, "body": "with clang 3.7.0 -std=c++11 -O2, they both compile to absolutely identical assembly: <a href=\"https://goo.gl/TovE0d\" rel=\"nofollow noreferrer\">goo.gl/TovE0d</a>. By &quot;they&quot; I mean the original, simpler code samples (you changed it while I checked)."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1453920536, "post_id": 35044876, "comment_id": 57815483, "body": "In the updated code, did you compile with optimization turned up? If not, the first one seems like it should run (slightly) faster, as it avoids retesting the same thing over and over. That said, without optimizations turned up, the results are meaningless."}, {"owner": {"reputation": 19, "user_id": 4337643, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001737603865/picture?type=large", "display_name": "Aylean Clara Grandieur", "link": "https://stackoverflow.com/users/4337643/aylean-clara-grandieur"}, "edited": false, "score": 0, "creation_date": 1453921116, "post_id": 35044876, "comment_id": 57815829, "body": "i didnt turn on optimization, then i should learn about the subject. thanks"}], "answers": [{"tags": [], "owner": {"reputation": 392, "user_id": 5800773, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrzfZ.jpg?s=128&g=1", "display_name": "Ahsan", "link": "https://stackoverflow.com/users/5800773/ahsan"}, "is_accepted": false, "score": 0, "last_activity_date": 1454728484, "creation_date": 1454728484, "answer_id": 35236944, "question_id": 35044876, "link": "https://stackoverflow.com/questions/35044876/boolean-condition-evaluated-inside-for-loop-performance/35236944#35236944", "title": "Boolean condition evaluated inside for loop performance", "body": "<p>The simplest answer is when you use </p>\n\n<pre><code>if(x1&lt;500){\n      a[x2+x1*1000]=100;\n          }\n</code></pre>\n\n<p>you actually are using a direct method in which values are compared and work is done but when you use </p>\n\n<pre><code>if(cond) { \n  a[x2+x1*1000] = 100;\n         }\n</code></pre>\n\n<p>then it first calculates the answer of \" cond \"  then applies the if condition , being more specific you can just take it as if cond is a function call and if(x1&lt;500) is a simple comparison within main() .\nHopefully you got your answer and if you want to know anything else about this topic tell me :) </p>\n"}], "owner": {"reputation": 19, "user_id": 4337643, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001737603865/picture?type=large", "display_name": "Aylean Clara Grandieur", "link": "https://stackoverflow.com/users/4337643/aylean-clara-grandieur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1454728484, "creation_date": 1453918095, "last_edit_date": 1453921916, "question_id": 35044876, "link": "https://stackoverflow.com/questions/35044876/boolean-condition-evaluated-inside-for-loop-performance", "title": "Boolean condition evaluated inside for loop performance", "body": "<p>I have two loops. I don't understand why the first one runs faster than my second one. Can you explain as simply as possible?</p>\n\n<p>First:</p>\n\n<pre><code>for (int x1=0;x1&lt;1000;x1++){\n   for(int x2=0;x2&lt;1000;x2++){\n      if(x1&lt;500){\n         a[x2+x1*1000]=100;\n      }\n   }\n}\n</code></pre>\n\n<p>Second:</p>\n\n<pre><code>bool cond;\nfor (int x1=0; x1&lt;1000; x1++) {\n    cond = x1&lt;500;\n    for(int x2=0; x2&lt;1000; x2++){\n        if(cond){\n            a[x2+x1*1000] = 100;\n        }\n    }\n}\n</code></pre>\n\n<p>(I simplified my code)</p>\n"}, {"tags": ["c++", "qt", "qtreeview", "qtreewidget", "qtreewidgetitem"], "answers": [{"tags": [], "owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "is_accepted": false, "score": 3, "last_activity_date": 1453954926, "last_edit_date": 1453954926, "creation_date": 1453926536, "answer_id": 35047394, "question_id": 35044786, "link": "https://stackoverflow.com/questions/35044786/qtreewidget-catch-item-editing-finished-with-no-text-change/35047394#35047394", "title": "QTreeWidget catch item editing finished with no text change", "body": "<p>I guess the right scope to apply the approach would be QTreeWidget. So, we can inherit QTreeWidget by MyTreeWidget.</p>\n\n<pre><code> ui-&gt;tree = new MyTreeWidget(this); // or how exactly it is initialized\n</code></pre>\n\n<p>There a million mysteries in our work field. We can try and trap the culprit when the thing is not working as we want it to work. When I am running in Qt widget behaving not the way I expect it, I trace what it does:</p>\n\n<pre><code>bool MyTreeWidget::event(QEvent* pEvent)\n{\n    qDebug() &lt;&lt; pEvent;\n    // parent class method call\n    return QTreeWidget::event(pEvent);\n}\n</code></pre>\n\n<p>And then with the log recorded for that specific case I either try to overload specific event (better and safer) or do it immediately in overloaded generic event handler:</p>\n\n<pre><code>bool MyTreeWidget::event(QEvent* pEvent)\n{\n    // suppose this to be a 'culprit' event\n    if (pEvent-&gt;type() == QEvent::WindowDeactivate)\n        doTheRightThingHere(); // what expected to be done\n\n    // parent class method call\n    return QTreeWidget::event(pEvent);\n}\n</code></pre>\n\n<p>The same approach can be applied with <a href=\"http://doc.qt.io/qt-5/eventsandfilters.html#event-filters\" rel=\"nofollow\">Event Filter</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1454606968, "post_id": 35174240, "comment_id": 58130611, "body": "Even better. Of course, trapping an event is only showing &quot;why?&quot; but that does not always answer &quot;how?&quot;"}], "tags": [], "owner": {"reputation": 441, "user_id": 3464102, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/7X7wk.jpg?s=128&g=1", "display_name": "serg.v.gusev", "link": "https://stackoverflow.com/users/3464102/serg-v-gusev"}, "is_accepted": true, "score": 3, "last_activity_date": 1454494766, "creation_date": 1454494766, "answer_id": 35174240, "question_id": 35044786, "link": "https://stackoverflow.com/questions/35044786/qtreewidget-catch-item-editing-finished-with-no-text-change/35174240#35174240", "title": "QTreeWidget catch item editing finished with no text change", "body": "<p>First i've followed @AlexanderVX advice and catched events. After user done editing in any way, QEvent::ChildRemoved will come in all cases. I wrote some code to catch this event end handle it.</p>\n\n<p>But after few days of researching i've learned some information about item delegates, which can handle user editing, so this is my solution:</p>\n\n<pre><code>class MyEditingDelegate : public QItemDelegate\n{\n    Q_OBJECT\n\npublic:\n    MyEditingDelegate(QObject *parent = nullptr) : QItemDelegate(parent) {}\n    virtual void setModelData(QWidget *editor, \n                              QAbstractItemModel *model, \n                              const QModelIndex &amp;index) const\n    {\n        QItemDelegate::setModelData(editor, model, index);\n        if (index.column() == 0) {\n            emit editingFinished(index);\n        }\n    }\n\nsignals:\n    void editingFinished(const QModelIndex &amp;) const;\n};\n\nclass MyTreeWidget : public QTreeWidget\n{\npublic:\n    MyTreeWidget(QWidget *parent = nullptr) : QTreeWidget(parent) {}\n    QTreeWidgetItem *getItemFromIndex(const QModelIndex &amp;index) const \n    {\n        return itemFromIndex(index);\n    }\n};\n\nMyFormClass::MyFormClass()\n{\n    ...\n\n    auto editDelegate = new MyEditingDelegate(this);\n    ui-&gt;tree-&gt;setItemDelegate(editDelegate);\n    connect(editDelegate, \n            &amp;MyEditingDelegate::editingFinished, \n            [this] (const QModelIndex &amp;index) {\n        auto item = ui-&gt;tree-&gt;getItemFromIndex(index);\n        onItemEditingFinished(item); // this is my handler\n    });\n\n    ...\n}\n</code></pre>\n"}], "owner": {"reputation": 441, "user_id": 3464102, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/7X7wk.jpg?s=128&g=1", "display_name": "serg.v.gusev", "link": "https://stackoverflow.com/users/3464102/serg-v-gusev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2861, "favorite_count": 0, "accepted_answer_id": 35174240, "answer_count": 2, "score": 3, "last_activity_date": 1454494766, "creation_date": 1453917758, "last_edit_date": 1454492494, "question_id": 35044786, "link": "https://stackoverflow.com/questions/35044786/qtreewidget-catch-item-editing-finished-with-no-text-change", "title": "QTreeWidget catch item editing finished with no text change", "body": "<p>I'm developing a Qt application with QTreeWidget on Qt Designer form. User can press add-new-item button and new item will appear with default name, after that user must enter item's name.</p>\n\n<p>So this is my code:</p>\n\n<pre><code>void MyFormClass::on_addNewItemButton_clicked()\n{\n    auto newItem = new QTreeWidgetItem({ _defaultName });\n    newItem-&gt;setFlags(newItem-&gt;flags() | Qt::ItemIsEditable);\n    ui-&gt;tree-&gt;addTopLevelItem(newItem);\n    ui-&gt;tree-&gt;editItem(newItem);\n}\n</code></pre>\n\n<p>In MyFormClass i also catch itemChanged signal to do some operations with newly created item and it's name:</p>\n\n<pre><code>void MyFormClass::on_tree_itemChanged(QTreeWidgetItem *item, int column)\n{\n    if (item-&gt;text(0).isEmpty()) {\n        ...\n    } else {\n        ...\n    }\n}\n</code></pre>\n\n<p>And everything works fine except case when user <strong>doesn't change anything</strong> and just press Enter/left-click somewhere. This case QTreeWidget [probably] check that item has not been actually changed and do not emits proper signal.</p>\n\n<p>So any ideas how i can create new item, then allow user to edit it immediately and finally catch any edit result (i.e. same with default)? Maybe using QTreeView will help?</p>\n\n<p>Qt 5.4.2, C++11, Linux/Windows platforms</p>\n\n<p>Bonus questions: why Qt designed this way? I mean, isn't it my affair to check whether item has changed or not? OK, signal is called itemChanged, but why there is no editFinished signal or something?</p>\n"}, {"tags": ["c++", "c++11", "reference", "rvalue-reference", "forwarding-reference"], "answers": [{"comments": [{"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1453918473, "post_id": 35044914, "comment_id": 57814152, "body": "so simple and yet I missed it. It got way to complicated in my head."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1453919014, "post_id": 35044914, "comment_id": 57814524, "body": "@bolov: You have to do <code>foo(T1&amp;&amp;,T2&amp;&amp;)</code>. else they have both to be deduced as same type."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 5, "last_activity_date": 1453920153, "last_edit_date": 1453920153, "creation_date": 1453918234, "answer_id": 35044914, "question_id": 35044763, "link": "https://stackoverflow.com/questions/35044763/control-to-what-kind-of-references-t-binds/35044914#35044914", "title": "Control to what kind of references `T` binds", "body": "<p>You may do</p>\n\n<pre><code>template &lt;typename T&gt;\nstd::enable_if_t&lt;std::is_rvalue_reference&lt;T&amp;&amp;&gt;::value&gt;\nfoo(T&amp;&amp;) = delete;\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/d9740cb8298d7b4a\" rel=\"nofollow\">Demo</a></p>\n\n<p>For 2 arguments, it becomes:</p>\n\n<pre><code>template &lt;typename T1, typename T2&gt;\nstd::enable_if_t&lt;\n    (std::is_rvalue_reference&lt;T1&amp;&amp;&gt;::value\n    || std::is_rvalue_reference&lt;T1&amp;&amp;&gt;::value)\n    &amp;&amp; std::is_same&lt;std::decay_t&lt;T1&gt;, std::decay_t&lt;T2&gt;&gt;::value\n&gt;\nfoo(T1&amp;&amp;, T2&amp;&amp;) = delete;\n</code></pre>\n\n<p>Praetorian's version would be:</p>\n\n<pre><code>template &lt;class T&gt; void foo(const T&amp;&amp;, const T&amp;) = delete;\ntemplate &lt;class T&gt; void foo(const T&amp;, const T&amp;&amp;) = delete;\ntemplate &lt;class T&gt; void foo(const T&amp;&amp;, const T&amp;&amp;) = delete;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1453919770, "post_id": 35045164, "comment_id": 57815006, "body": "do you see an easier way to make this work for multiple parameters other than declaring every possible combination <a href=\"http://ideone.com/AJgqV8\" rel=\"nofollow noreferrer\">ideone.com/AJgqV8</a>?"}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1453920488, "post_id": 35045164, "comment_id": 57815447, "body": "@bolov No, I don&#39;t see another way around. Looks like it&#39;s either a horrible looking <code>enable_if</code> expression or multiple deleted overloads. Neither is particularly appealing."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1453921566, "post_id": 35045164, "comment_id": 57816074, "body": "@bolov: By changing the correct method, you may do something like <a href=\"http://coliru.stacked-crooked.com/a/d59e75855413a7ac\" rel=\"nofollow noreferrer\">that</a>."}], "tags": [], "owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "is_accepted": true, "score": 3, "last_activity_date": 1453919373, "last_edit_date": 1453919373, "creation_date": 1453919009, "answer_id": 35045164, "question_id": 35044763, "link": "https://stackoverflow.com/questions/35044763/control-to-what-kind-of-references-t-binds/35045164#35045164", "title": "Control to what kind of references `T` binds", "body": "<p>Given your code, the following fails to compile</p>\n\n<pre><code>int i = 0;\nfoo(i);      // deleted function\n</code></pre>\n\n<p>The reason the forwarding reference overload is selected is because matching the other one requires <code>const</code> qualification. But if you were to write</p>\n\n<pre><code>int const i = 0;\nfoo(i);      // perfectly fine\n</code></pre>\n\n<p>In this case the overload taking the <a href=\"https://stackoverflow.com/q/17979265/241631\">lvalue reference is selected</a>.</p>\n\n<p>Thus, in order to reject all rvalues, the <code>delete</code>d function needs to take a <code>T const&amp;&amp;</code> (this is what <a href=\"http://en.cppreference.com/w/cpp/utility/functional/ref\" rel=\"nofollow\"><code>std::ref</code></a> does to reject rvalues)</p>\n\n<pre><code>template &lt;class T&gt;\nconst T&amp; foo(const T&amp; t)\n{\n  return t;\n}\n\ntemplate &lt;class T&gt;\nconst T&amp; foo(T const&amp;&amp; t) = delete;\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/9e29db8632ffa965\" rel=\"nofollow\">Live demo</a></p>\n"}], "owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 2, "accepted_answer_id": 35045164, "answer_count": 2, "score": 2, "last_activity_date": 1453920153, "creation_date": 1453917701, "last_edit_date": 1495540756, "question_id": 35044763, "link": "https://stackoverflow.com/questions/35044763/control-to-what-kind-of-references-t-binds", "title": "Control to what kind of references `T` binds", "body": "<p>While thinking about what can be done to solve the <code>std::min</code> <a href=\"https://stackoverflow.com/questions/13721839/if-stdmax-returns-by-reference-as-it-must-might-that-lead-to-a-dangling-r\">dangling reference problem</a>, one thought I had was to add an overload (actually 3 - for each combination) for rvalues that would be deleted. The issue is that <code>T&amp;&amp;</code> would be a forwarding reference, not an rvalue reference.</p>\n\n<p>I want to separate this question from <code>std::min</code> specifically and make it more general. The <code>std::min</code> can be taken as an example why would you need such a thing. </p>\n\n<p>Lets simplify and generalize the problem:</p>\n\n<pre><code>// this has the same problem as `std::min`: if t binds to a temporary,\n// and the result is assigned to `auto&amp;`, the result is a dangled reference\ntemplate &lt;class T&gt;\nconst T&amp; foo(const T&amp; t)\n{\n  return t;\n}\n\n// incorrect attempt to prevent foo from being called with a temporary argument\n// `T&amp;&amp;` is a forwarding reference, not an rvalue reference\ntemplate &lt;class T&gt;\nconst T&amp; foo(T&amp;&amp; t) = delete;\n</code></pre>\n\n<p>The question is: How can you control to what kind of references a generic template parameter <code>T</code> could bind? And how could it scale for multiple arguments (like in <code>std::min</code> case)?</p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1453918065, "post_id": 35044668, "comment_id": 57813905, "body": "Don&#39;t use <code>std::endl</code> unless you need all the extra stuff that it does. <code>&#39;\\n&#39;</code> starts a new line."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4171819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61acd64f0bfe67938456f7e63d5e8553?s=128&d=identicon&r=PG&f=1", "display_name": "akhila np", "link": "https://stackoverflow.com/users/4171819/akhila-np"}, "edited": false, "score": 0, "creation_date": 1453918068, "post_id": 35044793, "comment_id": 57813908, "body": "Yes, that is possible.However, I took inputs which are not multiple of 10 and I am still getting the same error.Is there anything else that is incorrect?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1453919564, "post_id": 35044793, "comment_id": 57814901, "body": "Seeing is believing.  Let us see the check for the condition that the value is not a multiple of 10 or that you are not doing a mod 0"}, {"owner": {"reputation": 13, "user_id": 4171819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61acd64f0bfe67938456f7e63d5e8553?s=128&d=identicon&r=PG&f=1", "display_name": "akhila np", "link": "https://stackoverflow.com/users/4171819/akhila-np"}, "edited": false, "score": 0, "creation_date": 1453981733, "post_id": 35044793, "comment_id": 57843981, "body": "Thanks a lot!! I put an if condition so that mod 0 does not occur. And that did the trick :) Thank you Jamey D and PaulMcKenzie"}], "tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": false, "score": 0, "last_activity_date": 1453917799, "creation_date": 1453917799, "answer_id": 35044793, "question_id": 35044668, "link": "https://stackoverflow.com/questions/35044668/runtime-error-occurs-while-accessing-elements-of-vector-container/35044793#35044793", "title": "Runtime error occurs while accessing elements of vector container", "body": "<p>What if <code>number % 10 == 0</code> ?\nThis will mean that <code>arr[i] = 0</code>  and thus the expression <code>p%arr[i]</code> will result in Undefined Behaviour because <code>mod 0</code> is illegal. Your while loop should look something like <code>while(number % 10)</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 4171819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61acd64f0bfe67938456f7e63d5e8553?s=128&d=identicon&r=PG&f=1", "display_name": "akhila np", "link": "https://stackoverflow.com/users/4171819/akhila-np"}, "edited": false, "score": 0, "creation_date": 1453981835, "post_id": 35044921, "comment_id": 57844038, "body": "Somehow I forgot about mod 0 being illegal. Thanks a lot. Your suggestion helped me big time :)"}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1453919445, "last_edit_date": 1453919445, "creation_date": 1453918256, "answer_id": 35044921, "question_id": 35044668, "link": "https://stackoverflow.com/questions/35044668/runtime-error-occurs-while-accessing-elements-of-vector-container/35044921#35044921", "title": "Runtime error occurs while accessing elements of vector container", "body": "<p>In this condition</p>\n\n<pre><code>if(p%arr[i]==0)\n</code></pre>\n\n<p><code>arr[i]</code> can be equal to <code>0</code>.</p>\n\n<p>Thus if the number contains 0 then the program will fail.</p>\n"}], "owner": {"reputation": 13, "user_id": 4171819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61acd64f0bfe67938456f7e63d5e8553?s=128&d=identicon&r=PG&f=1", "display_name": "akhila np", "link": "https://stackoverflow.com/users/4171819/akhila-np"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1453919445, "creation_date": 1453917366, "question_id": 35044668, "link": "https://stackoverflow.com/questions/35044668/runtime-error-occurs-while-accessing-elements-of-vector-container", "title": "Runtime error occurs while accessing elements of vector container", "body": "<p>In the below mentioned program I am converting integer into vector, then the number is checked for divisibility by each element of vector. However, while accessing the vector elements to check for divisibility of the elements by number, runtime error occurs. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include&lt;vector&gt;\nusing namespace std;\n\nint main(){\nint testcase;\ncin&gt;&gt;testcase;  //number of testcases inputted\nwhile(testcase--)\n{\nint number,i=0,count=0;\ncin &gt;&gt;number;                //number is inputted\nint p=number;\nvector&lt;int&gt; arr(100);      \nwhile(number){            //converting integer to array\n    arr[i]=number%10;\n\n    number=number/10;\n    cout&lt;&lt;arr[i];\n    if(p%arr[i]==0) //checking whether each element of array is divisible by number //this gives runtime error\n    count++;\n    i++;\n}\n\n  cout&lt;&lt;endl&lt;&lt;count&lt;&lt;endl; //printing the count of elemnts of array  divisible by number\n  }\n return 0;\n }\n</code></pre>\n\n<p>I have commented out the if condition that is giving the runtime error(without the if condition, the program runs correctly). Can someone please tell me how it can be corrected?\nThanks in advance.</p>\n"}, {"tags": ["c++", "function", "time"], "comments": [{"owner": {"reputation": 15, "user_id": 5848173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9eb34e4cc5f56732999817b56a69878?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Jensen", "link": "https://stackoverflow.com/users/5848173/adam-jensen"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1453917395, "post_id": 35044502, "comment_id": 57813507, "body": "My bad. It&#39;s time(NULL)."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1453918504, "post_id": 35044502, "comment_id": 57814174, "body": "<a href=\"http://stackoverflow.com/questions/32211045/converting-time-string-into-epoch-time-on-windows/32212867#32212867\">This post</a> might help."}, {"owner": {"reputation": 7447, "user_id": 602372, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/q6bLu.jpg?s=128&g=1", "display_name": "Yam Marcovic", "link": "https://stackoverflow.com/users/602372/yam-marcovic"}, "edited": false, "score": 2, "creation_date": 1453923927, "post_id": 35044502, "comment_id": 57817460, "body": "Note that, especially if you&#39;re aiming at <i>local</i> time, &quot;the program stays accurate as time moves forward&quot; can get complicated when you&#39;re switching to and from daylight savings."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1453933585, "post_id": 35044502, "comment_id": 57822889, "body": "Date/time is more complicated than it seems at first!"}], "answers": [{"comments": [{"owner": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "edited": false, "score": 1, "creation_date": 1453919720, "post_id": 35044902, "comment_id": 57814974, "body": "I believe, in Unix Time leap seconds do not affect flow of the time: either single timepoint happens twice or is skipped. So midnight + 60*60*24 seconds is always midnight. You need leap time table only if you need to know <i>exactly</i> how many seconds are there between two timepoints."}, {"owner": {"reputation": 30596, "user_id": 134702, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7c1594304f3515b88e31bc8888f0f593?s=128&d=identicon&r=PG", "display_name": "Matt Hook", "link": "https://stackoverflow.com/users/134702/matt-hook"}, "edited": false, "score": 0, "creation_date": 1453924713, "post_id": 35044902, "comment_id": 57817915, "body": "He can use the difftime function."}, {"owner": {"reputation": 30517, "user_id": 774499, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/sju2a.jpg?s=128&g=1", "display_name": "David Hammen", "link": "https://stackoverflow.com/users/774499/david-hammen"}, "edited": false, "score": 0, "creation_date": 1453999389, "post_id": 35044902, "comment_id": 57857452, "body": "Computer clocks aren&#39;t particularly accurate. That&#39;s why we have the Network Time Protocol. Shortly after a leap second happens, a modern computer connected to the internet will see that time has somehow changed and update its system-wide &quot;seconds since 00:00 1 Jan 1970 UTC&quot; counter. Bottom line: One does not need to account for leap seconds."}], "tags": [], "owner": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "is_accepted": false, "score": 0, "last_activity_date": 1453918185, "creation_date": 1453918185, "answer_id": 35044902, "question_id": 35044502, "link": "https://stackoverflow.com/questions/35044502/c-function-that-converts-timenull-to-local-time/35044902#35044902", "title": "C++ function that converts time(NULL) to local time", "body": "<p>There are two things which you will need to consider:</p>\n\n<p><strong>1. Leap years</strong></p>\n\n<p>One extra day in a year, that is possible to calculate mathematically.</p>\n\n<p><strong>2. Leap seconds</strong></p>\n\n<p>Seconds inserted or removed as needed (so a minute can have 61 or 59 seconds).</p>\n\n<p>Those are irregular and you will need a lookup table for them. Otherwise your conversion routine will not be correct.</p>\n\n<p>List of them is available for example here: <a href=\"https://en.wikipedia.org/wiki/Leap_second\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Leap_second</a></p>\n"}, {"tags": [], "owner": {"reputation": 3209, "user_id": 5794048, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Egkox.jpg?s=128&g=1", "display_name": "Murphy", "link": "https://stackoverflow.com/users/5794048/murphy"}, "is_accepted": false, "score": 2, "last_activity_date": 1453924852, "last_edit_date": 1453924852, "creation_date": 1453923359, "answer_id": 35046492, "question_id": 35044502, "link": "https://stackoverflow.com/questions/35044502/c-function-that-converts-timenull-to-local-time/35046492#35046492", "title": "C++ function that converts time(NULL) to local time", "body": "<p><code>localtime()</code> from glibc should do the job of calculating the date, provided the environment is set to the correct timezone; else use <code>gmtime()</code>. Building a string from the values is a separate job, see <code>strftime()</code> for that.</p>\n\n<p><a href=\"http://linux.die.net/man/3/localtime\" rel=\"nofollow\">http://linux.die.net/man/3/localtime</a></p>\n"}, {"comments": [{"owner": {"reputation": 195413, "user_id": 634824, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/889cf720c96957e615463b5c903a5e18?s=128&d=identicon&r=PG", "display_name": "Matt Johnson-Pint", "link": "https://stackoverflow.com/users/634824/matt-johnson-pint"}, "edited": false, "score": 1, "creation_date": 1453999124, "post_id": 35048669, "comment_id": 57857240, "body": "+1 for Howard Hinnant&#39;s date module.  Check out <a href=\"https://youtu.be/tzyGjOm8AKo\" rel=\"nofollow noreferrer\">his CPPCon presentation on YouTube</a> describing its usage."}], "tags": [], "owner": {"reputation": 30517, "user_id": 774499, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/sju2a.jpg?s=128&g=1", "display_name": "David Hammen", "link": "https://stackoverflow.com/users/774499/david-hammen"}, "is_accepted": false, "score": 3, "last_activity_date": 1453931124, "creation_date": 1453931124, "answer_id": 35048669, "question_id": 35044502, "link": "https://stackoverflow.com/questions/35044502/c-function-that-converts-timenull-to-local-time/35048669#35048669", "title": "C++ function that converts time(NULL) to local time", "body": "<blockquote>\n  <p>Also I'm well aware that there is a local time function but I'd like to build this function from the ground up. Does anyone have any advice or tips?</p>\n</blockquote>\n\n<p>Why would you want to do this when there are plenty of free and well-tested packages? As mentioned in the comments, getting daylight savings time correct is non-trivial. Existing packages do just that, and they do it right, based on the IANA tzinfo database.</p>\n\n<p>C options:</p>\n\n<ul>\n<li><p><code>std::localtime()</code>. This function uses a global variable; it is not thread safe.</p></li>\n<li><p><code>localtime_r()</code>. This is a POSIX function and is not a part of the C++ library. It does not exist on Windows.</p></li>\n<li><p><code>localtime_s()</code>. This is an optional C11 function. Even if it exists on your machine, it might not be a part of <code>&lt;ctime&gt;</code>.</p></li>\n</ul>\n\n<p>C++ options:</p>\n\n<ul>\n<li><p>Boost Date-Time, <a href=\"https://github.com/boostorg/date_time\" rel=\"nofollow\">https://github.com/boostorg/date_time</a> .</p></li>\n<li><p>Howard Hinant's date-time module, <a href=\"https://github.com/HowardHinnant/date\" rel=\"nofollow\">https://github.com/HowardHinnant/date</a> .</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "is_accepted": false, "score": 1, "last_activity_date": 1454090930, "creation_date": 1454090930, "answer_id": 35091195, "question_id": 35044502, "link": "https://stackoverflow.com/questions/35044502/c-function-that-converts-timenull-to-local-time/35091195#35091195", "title": "C++ function that converts time(NULL) to local time", "body": "<p>If you want to learn about the algorithms for converting a count of days to a year/month/day triple (and back), here they are, highly optimized, explained in pains-taking detail (don't read while operating heavy machinery):</p>\n\n<p><a href=\"http://howardhinnant.github.io/date_algorithms.html\" rel=\"nofollow\">http://howardhinnant.github.io/date_algorithms.html</a></p>\n\n<p>You should also know that most (all?) implementations of <code>time()</code> track an approximation of UTC called <a href=\"http://en.wikipedia.org/wiki/Unix_time\" rel=\"nofollow\">Unix Time</a>.  This count treats leap seconds simply as clock corrections to an imperfect clock.  That means you can ignore the effect of leap seconds when converting <a href=\"http://en.wikipedia.org/wiki/Unix_time\" rel=\"nofollow\">Unix Time</a> seconds to days (just divide by 86400).</p>\n\n<p>For converting to EST, you have some choices (in order of increasing difficulty and accuracy):</p>\n\n<ol>\n<li><p>You can ignore daylight savings time and always take the offset as -5 hours.</p></li>\n<li><p>You can assume the current daylight savings rules, ignoring the fact that they have changed many times in the past, and will likely change again.</p></li>\n<li><p>You can get the past and present rules from the <a href=\"http://www.iana.org/time-zones\" rel=\"nofollow\">IANA timezone database</a>,\nor your OS's local equivalent.</p></li>\n</ol>\n"}], "owner": {"reputation": 15, "user_id": 5848173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9eb34e4cc5f56732999817b56a69878?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Jensen", "link": "https://stackoverflow.com/users/5848173/adam-jensen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 757, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1454090930, "creation_date": 1453916794, "last_edit_date": 1453917380, "question_id": 35044502, "link": "https://stackoverflow.com/questions/35044502/c-function-that-converts-timenull-to-local-time", "title": "C++ function that converts time(NULL) to local time", "body": "<p>In C++ I'm writing a function that converts time(NULL), which is all the seconds since January 1, 1970 in UTC time, to local time EST in military time format (hours:minutes:seconds). I'm honestly stumped how to mathematically do this so that the program stays accurate as time moves forward.</p>\n\n<p>Also I'm well aware that there is a local time function but I'd like to build this function from the ground up. Does anyone have any advice or tips?</p>\n"}, {"tags": ["c++", "unicode", "char", "cout"], "comments": [{"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 2, "creation_date": 1453916834, "post_id": 35044479, "comment_id": 57813124, "body": "For direct use of the C++ standard library this is OS-dependent. Unfortunately. The shoemaker&#39;s children are the only ones without shoes."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 2, "creation_date": 1453916917, "post_id": 35044479, "comment_id": 57813181, "body": "In Unixland you can treat the <code>1111</code> as a <code>wchar_t</code> value which you can convert to UTF-8 and just output via <code>cout</code>."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 1, "creation_date": 1453917068, "post_id": 35044479, "comment_id": 57813288, "body": "In Windows it&#39;s more complicated, and involves use of non-standard features or 3rd party libraries. My under-construction <a href=\"https://github.com/alf-p-steinbach/cppx\" rel=\"nofollow noreferrer\">cppx library</a> is one example. It works by installing new custom buffers in the standard wide streams, which buffers use UTF-16 based direct console i/o via Windows API functions."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 1, "creation_date": 1453917569, "post_id": 35044479, "comment_id": 57813616, "body": "Here&#39;s your program using cppx: (<a href=\"http://codepad.org/67Af2kXR\" rel=\"nofollow noreferrer\">codepad.org/67Af2kXR</a>). It works OK in Windows. When I get to that point in the development it will also work nicely in Unix-land (maybe it does already, I don&#39;t know, sorry)."}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1453917575, "post_id": 35044479, "comment_id": 57813622, "body": "@Cheersandhth.-Alf Any reason your example is recommending <code>wchar_t</code> rather than, say, <code>int</code> or <code>uint32_t</code>? I mean, it doesn\u2019t really matter but <code>1111</code> isn\u2019t a <i>character</i> itself (which the type might suggest) but rather a code point."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1453917736, "post_id": 35044479, "comment_id": 57813721, "body": "@KonradRudolph: <code>char</code> is also just a code point, especially in Unix-land (which has largely standardized on UTF-8, a variable length encoding). That&#39;s what <code>wchar_t</code> is used for. Alternatively one might use <code>char16_t</code> or <code>char32_t</code>. But I&#39;m not sure of the conversion support for those in available compilers."}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1453917972, "post_id": 35044479, "comment_id": 57813859, "body": "@Cheersandhth.-Alf Well but <code>char</code> and <code>wchar_t</code> have overloaded iostream operators which suggests their dual use as characters (not code points). And in UNIX-land, combined with iostreams, <code>char</code> isn\u2019t so much a code point but rather a byte in an UTF-8 byte stream. But yeah, it\u2019s a rather moot argument since these are essentially just all integer types. More seriously, I think there\u2019s no guarantee that <code>wchar_t</code> is big enough to hold every Unicode code point."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1453918077, "post_id": 35044479, "comment_id": 57813910, "body": "@KonradRudolph: With UTF-8 encoding a single <code>char</code> can only be treated as a full character, rather than an encoding value that&#39;s part of a character, if its value is in the range 0 through 127, which range is mapped to original ASCII. Sorry for not fixing the terminology in previous comment. I guess it&#39;s late in the day. ;-)"}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1453918182, "post_id": 35044479, "comment_id": 57813974, "body": "@Cheersandhth.-Alf Ugh, I meant \u201cbyte in an UTF-8 byte stream\u201d, not \u201ccharacter in an UTF-8 byte stream\u201d. I\u2019ve fixed my comment."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 1, "creation_date": 1453918286, "post_id": 35044479, "comment_id": 57814039, "body": "Regarding size, <code>wchar_t</code> is only 16 bits in Windows, but that&#39;s enough for all of the Basic Multilingual Plane of Unicode, which corresponds to original Unicode 1.0. And in Windows, that&#39;s all a console can handle, so the issue of non-BMP value is moot for portable console i/o."}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1453921327, "post_id": 35044479, "comment_id": 57815938, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/12015571/how-to-print-unicode-character-in-c\">How to print Unicode character in C++?</a>"}, {"owner": {"reputation": 1401, "user_id": 2401996, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/nKCzg.png?s=128&g=1", "display_name": "j0h", "link": "https://stackoverflow.com/users/2401996/j0h"}, "reply_to_user": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1453924148, "post_id": 35044479, "comment_id": 57817603, "body": "@AdrianMcCarthy Its not a duplicate of that, as far as i can tell. Im generating the unicode from a string, and trying to output it. That thread is simply assigning. the character directly. I have no idea why its not the same. why doesnt a string stream of &quot;\\u0457&quot; output a the same thing as char? ok ill try changing the datatype."}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1453926892, "post_id": 35044479, "comment_id": 57819148, "body": "@j0h: There are several intertwined problems preventing this from working: data types, encoding, OS support.  The other question has some decent answers that address most of these issues."}, {"owner": {"reputation": 12461, "user_id": 266487, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/585595b6a24df9b742ebc186788e9a8e?s=128&d=identicon&r=PG", "display_name": "harper", "link": "https://stackoverflow.com/users/266487/harper"}, "edited": false, "score": 0, "creation_date": 1453961052, "post_id": 35044479, "comment_id": 57831808, "body": "@Alf Regarding size, <code>wchar_t</code> is 32 bits in Windows if you use GCC. It&#39;s just 16 bits if you use Microsoft C/C++ compiler."}], "owner": {"reputation": 1401, "user_id": 2401996, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/nKCzg.png?s=128&g=1", "display_name": "j0h", "link": "https://stackoverflow.com/users/2401996/j0h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1582430206, "creation_date": 1453916712, "last_edit_date": 1582430206, "question_id": 35044479, "link": "https://stackoverflow.com/questions/35044479/how-can-i-calculate-unicode-characters", "title": "How can I calculate unicode characters?", "body": "<p>I have a simple encoding program, and want to add some unicode characters. \nI'm doing some math, then converting the decimal value to hex, then to Unicode.\nThe problem is that the conversion from decimal to hex, gives me a string, and that I don't know a way to convert a string to a char (not char[]).</p>\n\n<p>how can I convert a Decimal Number to its Unicode character (char) equivalent with out creating a string?</p>\n\n<p>Here's some code where I was trying to figure it out, we've established this wont work:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt;\nusing namespace std;\nint main(){\nint decimal_value = 1111;\nstringstream ss;\nss&lt;&lt; hex &lt;&lt; decimal_value; // int decimal_value\nstring res ( ss.str() );\nstd::ostringstream oss;\noss &lt;&lt; \"\\\\u0\" &lt;&lt; res;\nstring var = oss.str();\ncout &lt;&lt; var &lt;&lt; \"\\n\" &lt;&lt; \"\\u0457\"  &lt;&lt; \"\\n\";\n\nreturn 0;\n}\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>\\u0457\n\u0457\n</code></pre>\n"}, {"tags": ["c++", "generics", "methods", "smart-pointers"], "comments": [{"owner": {"reputation": 3725, "user_id": 2209008, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MceJL.jpg?s=128&g=1", "display_name": "Colin Basnett", "link": "https://stackoverflow.com/users/2209008/colin-basnett"}, "edited": false, "score": 0, "creation_date": 1454102457, "post_id": 35044361, "comment_id": 57910379, "body": "Unrelated, but if you are rolling with a compiler that supports it, you should replace <code>TriggerList::const_iterator</code> with the <code>auto</code> keyword and save yourself the effort of typing and reading that huge identifier."}], "answers": [{"comments": [{"owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "edited": false, "score": 0, "creation_date": 1454102512, "post_id": 35094212, "comment_id": 57910411, "body": "Nice answer &lt;padding&gt;"}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 2, "last_activity_date": 1454102277, "creation_date": 1454102277, "answer_id": 35094212, "question_id": 35044361, "link": "https://stackoverflow.com/questions/35044361/is-there-any-generic-method-for-smart-pointers-and-raw-pointers/35094212#35094212", "title": "Is there any generic method for smart pointers and raw pointers?", "body": "<p>If you take address of dereferenced pointer instead of calling <code>std::unique_ptr::get()</code> that should work in both cases:</p>\n\n<pre><code>(*trg)-&gt;Try(&amp;**ent);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "is_accepted": false, "score": 3, "last_activity_date": 1454102463, "creation_date": 1454102463, "answer_id": 35094263, "question_id": 35044361, "link": "https://stackoverflow.com/questions/35044361/is-there-any-generic-method-for-smart-pointers-and-raw-pointers/35094263#35094263", "title": "Is there any generic method for smart pointers and raw pointers?", "body": "<p>Asides from @Slava's quite correct answer, you can, in general, always write a template function and specialize it for a raw pointer:</p>\n\n<pre><code>template&lt;class T&gt;                                                                                                                           \nauto find_address_of(T &amp;&amp;p) -&gt; decltype(p.get())\n{\n    return p.get();\n}\n\ntemplate&lt;typename T&gt;\nT *find_address_of(T *p)\n{\n    return p;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 5859076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nBpS6.jpg?s=128&g=1", "display_name": "Francis Labelle", "link": "https://stackoverflow.com/users/5859076/francis-labelle"}, "is_accepted": false, "score": 0, "last_activity_date": 1454102921, "last_edit_date": 1454102921, "creation_date": 1454102479, "answer_id": 35094266, "question_id": 35044361, "link": "https://stackoverflow.com/questions/35044361/is-there-any-generic-method-for-smart-pointers-and-raw-pointers/35094266#35094266", "title": "Is there any generic method for smart pointers and raw pointers?", "body": "<pre><code>(*ent).get()\n</code></pre>\n\n<p>Since I don't know anything about the rest of your program, I assume this is the only line that prevents your function from working: <code>get</code> is a member function of smart pointers but it can't be used with raw pointers. There are two solutions I see that could solve this:</p>\n\n<p><strong>Solution 1</strong></p>\n\n<p>Make your <code>Try</code> function work with smart pointers as well as raw pointers. For example:</p>\n\n<pre><code>class A\n{\n    public:\n        template &lt;class SmartPointer&gt;\n        void Try(const SmartPointer&amp; pointer)\n        {\n            Try(pointer.get());\n        }\n\n        void Try(entity* pointer)\n        {\n            /* Your code here */\n        }\n}\n</code></pre>\n\n<p><strong>Solution 2</strong></p>\n\n<p>If you can't change the class that's being used then you can make a few functions to convert the abstract type you're working on to a raw pointer. One function for smart pointers and one for raw pointers.</p>\n\n<pre><code>template &lt;class SmartPointer&gt;\ntypename SmartPointer::element_type* getRawPointer(Pointer const&amp; p)\n{\n    return p.get();\n}\n\ntemplate &lt;typename T&gt;\nT* getRawPointer(T* p)\n{\n    return p;\n}\n</code></pre>\n\n<p>Where <code>SmartPointer::element_type</code> is the type used by the smart pointer (<code>int</code> for a <code>std::unique_ptr&lt;int&gt;</code>). Note that you have to declare it as <code>typename SmartPointer::element_type</code> to tell the compiler that this is indeed a type.</p>\n\n<p><strong>Edit:</strong> Changed <code>SmartPointer::pointer</code> to <code>SmartPointer::element_type*</code> to make it work with newer smart pointers.</p>\n"}], "owner": {"reputation": 21, "user_id": 5848054, "user_type": "registered", "profile_image": "https://graph.facebook.com/994985340572088/picture?type=large", "display_name": "Insub  Im", "link": "https://stackoverflow.com/users/5848054/insub-im"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 390, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1454102921, "creation_date": 1453916400, "last_edit_date": 1454101938, "question_id": 35044361, "link": "https://stackoverflow.com/questions/35044361/is-there-any-generic-method-for-smart-pointers-and-raw-pointers", "title": "Is there any generic method for smart pointers and raw pointers?", "body": "<p>I have a question about c++ template.</p>\n\n<pre><code>template &lt;class Container&gt;\nvoid tryTriggers(const Container&amp; entities)\n{\n  for (Container::const_iterator ent = std::begin(entities);ent != std::end(entities); ++ent)\n  {\n    if ((*ent)-&gt;isReadyForTriggerUpdate() &amp;&amp; (*ent)-&gt;isAlive())\n    {\n      for (TriggerList::const_iterator trg = std::begin(_triggers);trg != std::end(_triggers); ++trg)\n      {\n         //Try(..) is a method takes *entity(entity's pointer) for parameters.\n         //But my container was implemented with unique_ptr. \n         //ex) vector&lt;unique_ptr&lt;entity&gt;&gt; v;\n         //So I used get() method for acquire raw pointer.\n\n        (*trg)-&gt;Try((*ent).get());\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>The code is template member function for some containers.</p>\n\n<p>It only works with class witch have <code>isReadyForTriggerUpdate()</code> and <code>isAlive()</code> in it.</p>\n\n<p><code>Try(..)</code> is a method takes <code>*entity(entity's pointer)</code> for parameters.</p>\n\n<p>In my case, I use <code>unique_ptr</code> int containers so I have to use <code>get()</code> method for get raw pointer.</p>\n\n<p>The function doesn't make any problems but.. if I use some container with raw pointers like </p>\n\n<pre><code>vector &lt;entity*&gt; v;\n</code></pre>\n\n<p>then it will make problem.</p>\n\n<p><strong>Question:</strong>\nI want to make it more generic so that it can works with raw pointers and smart pointers. Is there any solution about this?</p>\n\n<p>In <strong>STL</strong>, there is <code>std::begin(con)</code> for solve problems related with iterating problem in <code>con.begin()</code>. So I expect some generic method like </p>\n\n<pre><code>std::begin(con)\n</code></pre>\n\n<p>for above problem.</p>\n"}, {"tags": ["c++", "dll", "visual-studio-2015"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1453916925, "post_id": 35044356, "comment_id": 57813188, "body": "You can not execute a dll project. You need a main executable that uses the dll. Create a second project for that."}, {"owner": {"reputation": 1247, "user_id": 2826018, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/N9AZK.gif?s=128&g=1", "display_name": "binaryBigInt", "link": "https://stackoverflow.com/users/2826018/binarybigint"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1453917048, "post_id": 35044356, "comment_id": 57813277, "body": "But what happens if i want to use the dll in my C# project like explained here? <a href=\"http://stackoverflow.com/questions/11425202/is-it-possible-to-call-a-c-function-from-c-net\" title=\"is it possible to call a c function from c net\">stackoverflow.com/questions/11425202/&hellip;</a>"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1453917914, "post_id": 35044356, "comment_id": 57813822, "body": "Then create a C# example program to test the dll. I am a native c++ developer who does not use .net so I can not help you with that."}, {"owner": {"reputation": 1247, "user_id": 2826018, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/N9AZK.gif?s=128&g=1", "display_name": "binaryBigInt", "link": "https://stackoverflow.com/users/2826018/binarybigint"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1453920635, "post_id": 35044356, "comment_id": 57815541, "body": "If i try to import the c++ .dll i get: &quot;This is not a valid assembly or com-component&quot;?"}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 2, "creation_date": 1453923838, "post_id": 35044356, "comment_id": 57817404, "body": "That&#39;s an entirely different question.  I would delete this one and post a new one, and make sure you include a C# or .Net tag so you get readers who know about the managed code requirements."}], "owner": {"reputation": 1247, "user_id": 2826018, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/N9AZK.gif?s=128&g=1", "display_name": "binaryBigInt", "link": "https://stackoverflow.com/users/2826018/binarybigint"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2670, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1453916395, "creation_date": 1453916395, "question_id": 35044356, "link": "https://stackoverflow.com/questions/35044356/visual-studio-2015-create-c-dll-no-valid-win32-application", "title": "Visual Studio 2015 - Create C++ Dll - No valid Win32 Application", "body": "<p>i tried to create a C++ dll with this code:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;stdio.h&gt;\n\nextern \"C\" {\n    _declspec(dllexport)void DoSomethingInC(unsigned short int ExampleParam, unsigned char AnotherExampleParam) {\n        printf(\"You called the method DoSomethingInC, You passed in %d and %c\\n\\r\", ExampleParam, AnotherExampleParam);\n    }\n}\n</code></pre>\n\n<p>But if i click on \"local windows debugger\" i get:</p>\n\n<p>\"The program can't be started...It is not a valid Win32-Application\"</p>\n\n<p>I tried to switch the target platform in the configuration settings but that didn't help.</p>\n\n<p>Any ideas, what i am doing wrong?</p>\n\n<p>System is Windows 10 64-Bit</p>\n"}, {"tags": ["c++", "user-interface", "pointers", "object", "qt5.5"], "comments": [{"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 0, "creation_date": 1453916972, "post_id": 35044255, "comment_id": 57813215, "body": "So you have tried <code>ui-&gt;lbl-&gt;repaint()</code>?  <i>There is a similar question in the forums but I couldn&#39;t use those solutions.</i> -Which ones and why?"}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1453917146, "post_id": 35044255, "comment_id": 57813336, "body": "My guess is that <code>Widget</code> needs to have its parent set. Initialize <code>wo</code> properly to <code>new Widget(this)</code> in the <code>my_class</code>&#39;s constructor."}, {"owner": {"reputation": 1, "user_id": 5282713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1bc00560146dd0f1f17c3235f8b90a6?s=128&d=identicon&r=PG&f=1", "display_name": "Kash", "link": "https://stackoverflow.com/users/5282713/kash"}, "edited": false, "score": 0, "creation_date": 1453918807, "post_id": 35044255, "comment_id": 57814399, "body": "<a href=\"http://stackoverflow.com/questions/17436205/c-qt-proper-way-to-access-ui-from-another-class-in-qt-edited\" title=\"c qt proper way to access ui from another class in qt edited\">stackoverflow.com/questions/17436205/&hellip;</a> - I tried this but no luck. I also tried repaint() and setting the parent class to new widget(this) in my_class constructor with no luck either."}], "owner": {"reputation": 1, "user_id": 5282713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1bc00560146dd0f1f17c3235f8b90a6?s=128&d=identicon&r=PG&f=1", "display_name": "Kash", "link": "https://stackoverflow.com/users/5282713/kash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 185, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1453916634, "creation_date": 1453916108, "last_edit_date": 1453916634, "question_id": 35044255, "link": "https://stackoverflow.com/questions/35044255/how-to-access-ui-components-from-another-class", "title": "How to access ui components from another class?", "body": "<p>I am trying to call a method called <code>display_txt()</code> from my_class. This method is supposed to change some text in a label. But the method doesn't make any changes to the ui. I know the method runs due to the <code>qDebug()</code>. No errors occur, but the label just doesn't change to \"text changed\". <code>display_txt()</code> works fine and changes the label when called from the main widget class. There is a similar question in the forums but I couldn't use those solutions. I make an object when the button btn is pressed.</p>\n\n<p>Here is the code:</p>\n\n<p><em>widget.h</em></p>\n\n<pre><code>#include &lt;QWidget&gt;\nnamespace Ui {\nclass Widget;\n}\n\nclass Widget : public QWidget\n{\nQ_OBJECT\npublic:\nexplicit Widget(QWidget *parent = 0);\n~Widget();\nvoid display_txt();\n\nprivate slots:\nvoid on_btn_clicked();\n\nprivate:\nUi::Widget *ui;\n};\n</code></pre>\n\n<p><em>my_class.h</em></p>\n\n<pre><code>#include &lt;QWidget&gt;\n#include \"widget.h\"\n\nclass my_class : public QWidget\n{\nQ_OBJECT\npublic:\nexplicit my_class(QWidget *parent = 0);\nvoid test(Ui::Widget ui1);\nsignals:\nprivate:\nWidget *wo = new Widget;\n};\n</code></pre>\n\n<p><em>Widget.cpp</em></p>\n\n<pre><code>#include \"widget.h\"\n#include \"ui_widget.h\"\n#include &lt;QDebug&gt;\n#include \"my_class.h\"\n\nWidget::Widget(QWidget *parent) :\nQWidget(parent),\nui(new Ui::Widget)\n{\nui-&gt;setupUi(this);\n\n//display_txt();\nqDebug() &lt;&lt; \"Widget object created\";\n\n}\nvoid Widget::display_txt(){\nui-&gt;lbl-&gt;setText(\"text changes!!!!!\");\nqDebug() &lt;&lt; \"display_txt() method finished\";\n\n}\nvoid Widget::on_btn_clicked()\n{\nmy_class mc;\n}\n</code></pre>\n\n<p><em>my_class.cpp</em></p>\n\n<pre><code>#include \"my_class.h\"\n#include \"QDebug\"\n\nmy_class::my_class(QWidget *parent) : QWidget(parent)\n{\nqDebug() &lt;&lt; \"myclass ran\";\nwo-&gt;display_txt();\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "visual-c++", "mfc", "visual-studio-2015"], "comments": [{"owner": {"reputation": 6920, "user_id": 4394169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aETL5.jpg?s=128&g=1", "display_name": "Vlad Feinstein", "link": "https://stackoverflow.com/users/4394169/vlad-feinstein"}, "edited": false, "score": 1, "creation_date": 1453917192, "post_id": 35044248, "comment_id": 57813370, "body": "Just FYI - the same result on Visual Studio 2013."}, {"owner": {"reputation": 1328, "user_id": 4750084, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fqyxW.png?s=128&g=1", "display_name": "John Sensebe", "link": "https://stackoverflow.com/users/4750084/john-sensebe"}, "edited": false, "score": 0, "creation_date": 1453917307, "post_id": 35044248, "comment_id": 57813446, "body": "Out of curiousity, what happens when you add to <code>x</code> before adding <code>x</code> to the other strings? Like <code>x += &quot;Hello, World!&quot;;</code>?"}, {"owner": {"reputation": 6920, "user_id": 4394169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aETL5.jpg?s=128&g=1", "display_name": "Vlad Feinstein", "link": "https://stackoverflow.com/users/4394169/vlad-feinstein"}, "edited": false, "score": 0, "creation_date": 1453918460, "post_id": 35044248, "comment_id": 57814140, "body": "CString&#39;s <code>Append()</code> method (used in <code>+=</code> operator) has this <i>strange</i> comment: <code>&#47;&#47;Make sure we don&#39;t read pass end of the terminating NULL</code>, followed by <code>nLength = StringLengthN(pszSrc, nLength);</code>. This will <b>NOT</b> let any zeroes into the CString!"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1453919013, "post_id": 35044248, "comment_id": 57814522, "body": "Quote from the docs: &quot;CString accepts null-terminated C-style strings, but does not retain the null character in the stored character data.&quot;  That&#39;s where the problem started, stay a mile away from &#39;\\0&#39;."}, {"owner": {"reputation": 6920, "user_id": 4394169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aETL5.jpg?s=128&g=1", "display_name": "Vlad Feinstein", "link": "https://stackoverflow.com/users/4394169/vlad-feinstein"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1453925690, "post_id": 35044248, "comment_id": 57818465, "body": "@HansPassant - re: <code>&quot;but does not retain the null character&quot;</code> - if only that was true! This code (pardon for missing formatting in the comment): <code>CString x(&#39;\\0&#39;); \tx += &quot;b&quot;; \tCString rr( &#39;a&#39; ); \trr = rr + x;</code> will produce a <b>THREE</b> character string &quot;a[ZERO]b&quot;..."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1453927023, "post_id": 35044248, "comment_id": 57819227, "body": "@HansPassant: That quote does not apply here. The OP uses a c&#39;tor that takes a <b>character literal</b>, not a string literal. Apart from that, the <a href=\"https://msdn.microsoft.com/en-us/library/5bzxfsea.aspx\" rel=\"nofollow noreferrer\">CStringT Class</a> documentation explicitly calls out, that <i>&quot;it is possible to create CStringT instances that contain embedded null characters&quot;</i> (even though it isn&#39;t recommended)."}, {"owner": {"reputation": 63, "user_id": 5847884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c41c2253e800e5185a6012dc8de0d21f?s=128&d=identicon&r=PG&f=1", "display_name": "Nicola Iuretigh", "link": "https://stackoverflow.com/users/5847884/nicola-iuretigh"}, "reply_to_user": {"reputation": 1328, "user_id": 4750084, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fqyxW.png?s=128&g=1", "display_name": "John Sensebe", "link": "https://stackoverflow.com/users/4750084/john-sensebe"}, "edited": false, "score": 0, "creation_date": 1453971177, "post_id": 35044248, "comment_id": 57836775, "body": "@JohnSensebe Appending a string to x before append it to the other string has the same net effect: r.GetLength() continues to return 1 whereas rr.GetLength() returns 15"}, {"owner": {"reputation": 63, "user_id": 5847884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c41c2253e800e5185a6012dc8de0d21f?s=128&d=identicon&r=PG&f=1", "display_name": "Nicola Iuretigh", "link": "https://stackoverflow.com/users/5847884/nicola-iuretigh"}, "edited": false, "score": 0, "creation_date": 1453972031, "post_id": 35044248, "comment_id": 57837352, "body": "@ HansPassant, IInspectable, Vlad... Yes... CString accepts and retains the null character and, at least in VS2005, it worked very well. I could accept Microsoft decision to break backward compatibility discarding embedded &#39;\\0&#39;s; if our legacy app uses CString in a &quot;not so appreciated&quot; way it&#39;s our fault! That said, in no way I can accept that the result of r += x is different from the result of r = r + x. In my little opinion this is a <b>serious</b> bug. Thanks to everyone,         Nicola"}, {"owner": {"reputation": 1328, "user_id": 4750084, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fqyxW.png?s=128&g=1", "display_name": "John Sensebe", "link": "https://stackoverflow.com/users/4750084/john-sensebe"}, "edited": false, "score": 0, "creation_date": 1453989843, "post_id": 35044248, "comment_id": 57849849, "body": "@NicolaIuretigh Thanks for satisfying my curiosity. I was thinking it might be doing something along the lines IInspectable wrote in his answer, but I could not confirm."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 5847884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c41c2253e800e5185a6012dc8de0d21f?s=128&d=identicon&r=PG&f=1", "display_name": "Nicola Iuretigh", "link": "https://stackoverflow.com/users/5847884/nicola-iuretigh"}, "edited": false, "score": 0, "creation_date": 1453977175, "post_id": 35049487, "comment_id": 57840932, "body": "Thank you @IInspectable for your accurate answer."}, {"owner": {"reputation": 63, "user_id": 5847884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c41c2253e800e5185a6012dc8de0d21f?s=128&d=identicon&r=PG&f=1", "display_name": "Nicola Iuretigh", "link": "https://stackoverflow.com/users/5847884/nicola-iuretigh"}, "edited": false, "score": 0, "creation_date": 1453977503, "post_id": 35049487, "comment_id": 57841148, "body": "In these moments we are evaluating our alternatives for a workaround to this bug. Unfortunately our super-legacy application is full of code which could potentially encounter CString instances embedding one or more null characters and whatever we choose it will be a &quot;bloodbath&quot;!! ;) Thank you very much!"}, {"owner": {"reputation": 1328, "user_id": 4750084, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fqyxW.png?s=128&g=1", "display_name": "John Sensebe", "link": "https://stackoverflow.com/users/4750084/john-sensebe"}, "edited": false, "score": 0, "creation_date": 1453990040, "post_id": 35049487, "comment_id": 57850002, "body": "I think the &quot;cryptic statement&quot; means &quot;We can implement this any way we want, so don&#39;t count on a particular result.&quot;"}], "tags": [], "owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "is_accepted": true, "score": 6, "last_activity_date": 1473723608, "last_edit_date": 1473723608, "creation_date": 1453934240, "answer_id": 35049487, "question_id": 35044248, "link": "https://stackoverflow.com/questions/35044248/different-behaviour-between-cstring-operators-and/35049487#35049487", "title": "Different behaviour between CString operators &quot;+=&quot; and &quot;+&quot;", "body": "<p>The documentation for the <a href=\"https://msdn.microsoft.com/en-us/library/5bzxfsea.aspx\" rel=\"nofollow\">CStringT Class</a> contains the following cryptic statement:</p>\n\n<blockquote>\n  <p>Although it is possible to create CStringT instances that contain embedded null characters, we recommend against it. <strong>Calling methods and operators on CStringT objects that contain embedded null characters can produce unintended results.</strong></p>\n</blockquote>\n\n<p>Frankly, I don't really know what to make of the final sentence. I take it as a warning to be careful when embedding null characters. Regardless, contractual guarantees should still hold when doing so.</p>\n\n<p><strong>Analysis:</strong></p>\n\n<p>This apparently is not the case with <a href=\"https://msdn.microsoft.com/en-us/library/ws50yfk5.aspx\" rel=\"nofollow\">CStringT::operator+=</a>, though. In the sample code of the question the implementation of <code>operator+=</code> invokes the</p>\n\n<pre><code>CSimpleStringT&amp; operator+=( const CSimpleStringT&amp; strSrc )\n</code></pre>\n\n<p>overload, which modifies the current instance by calling</p>\n\n<pre><code>void Append( const CSimpleStringT&amp; strSrc )\n</code></pre>\n\n<p>which in turn calls</p>\n\n<pre><code>void Append( PCXSTR pszSrc, int nLength )\n</code></pre>\n\n<p>passing an explicit length argument. This should suffice to deal with C-style strings with embedded null characters. Oddly enough, the implementation then starts to second-guess the input by calling <code>StringLengthN(pszSrc, nLength)</code> (implemented as a call to <a href=\"https://msdn.microsoft.com/en-us/library/z50ty2zh.aspx\" rel=\"nofollow\">wcsnlen</a>), to re-calculate the length of <em>pszSrc</em>. This returns 0 for the <code>CStringT</code> instance <em>x</em> in the sample code.</p>\n\n<p><strong>Result:</strong></p>\n\n<p>To me, this appears to be a bug in the implementation. Incidentally, if you reverse the arguments to <code>operator+=</code> (i.e. <code>x += r;</code> vs. <code>r += x;</code>), the result is a string with length 2, as expected.</p>\n\n<p><strong>Resolution:</strong></p>\n\n<p>The only clean solution would be to have Microsoft acknowledge the bug, and provide a fix for it. I wouldn't hold my breath, though, as Microsoft usually doesn't ship bug fixes, if they change behavior of a shipped product.</p>\n\n<p>If you cannot convince Microsoft to fix that bug, your only other option is to not use the operator with undesired behavior. One way would be to use another string class. A well established replacement is <a href=\"http://en.cppreference.com/w/cpp/string/basic_string\" rel=\"nofollow\">std::wstring</a>, which you can convert to a <code>CStringW</code> where necessary (<code>CStringW cstr(s.c_str(), s.length());</code>).</p>\n\n<p><hr/>\n<strong>Update (2016-09-13):</strong></p>\n\n<p>The OP filed a <a href=\"https://connect.microsoft.com/VisualStudio/Feedback/Details/2161135\" rel=\"nofollow\">defect report</a> with Microsoft, and they acknowledged the bug. A bug fix was implemented, but <em>\"it won't appear until the next major version of the libraries (which may not necessarily ship in the current [2016-03-31] Visual Studio vNext)\"</em>.</p>\n"}], "owner": {"reputation": 63, "user_id": 5847884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c41c2253e800e5185a6012dc8de0d21f?s=128&d=identicon&r=PG&f=1", "display_name": "Nicola Iuretigh", "link": "https://stackoverflow.com/users/5847884/nicola-iuretigh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 309, "favorite_count": 2, "accepted_answer_id": 35049487, "answer_count": 1, "score": 6, "last_activity_date": 1478789852, "creation_date": 1453916087, "last_edit_date": 1453943621, "question_id": 35044248, "link": "https://stackoverflow.com/questions/35044248/different-behaviour-between-cstring-operators-and", "title": "Different behaviour between CString operators &quot;+=&quot; and &quot;+&quot;", "body": "<p>While migrating an application from VisualStudio 2005 to VisualStudio 2015 we found a different behaviour in some code that concatenates CString instances when that code is built with VS2015.<br>\nSo, I've created a simple Win32 console application to demonstrate the problem.  </p>\n\n<p>The console application (using MFC as shared dll and Unicode charachter set) executes this simple function:</p>\n\n<pre><code>void f()\n{\n   CString x( '\\0' );\n\n   CString r( 'a' );\n   r += x;\n   CString rr( 'a' );\n   rr = rr + x;\n\n   int rSize = r.GetLength();\n   int rrSize = rr.GetLength();\n\n   assert( rSize == rrSize ); // This assert fires when compiled and run \n                              // under Visual Studio 2015!\n}\n</code></pre>\n\n<p>It shows that, when a CString containing a '\\0' char is concatenated to another CString instance, using '+=' or using '+' leads to different results!</p>\n\n<p>When '+=' is used the size of the result is calculated counting all chars till the first '\\0'... hence the final size is 1!<br>\nConversely, when the operator '+' is used the result CString size is 2, that is the sum of the sizes of the concatenated instances!</p>\n\n<p>In VisualStudio 2005 the result size is always the sum of the sizes of the concatenated instances!  </p>\n\n<p>I <a href=\"https://connect.microsoft.com/VisualStudio/Feedback/Details/2161135\" rel=\"nofollow\">filed a bug</a> to Microsoft a few weeks ago, but up until now I have no answer from those guys.  </p>\n\n<p>My questions:<br>\n 1. Have somebody stumbled onto this bug in the MCF library??<br>\n 2. How have you worked around this bug? We are thinking to ban the use of the += operator or else to replace the CString class with the a custom class, but all of this seems to me \"a bit\" invasive.</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 2, "creation_date": 1453916218, "post_id": 35044214, "comment_id": 57812673, "body": "does it have it to be a runtime string? Or can it be an enum or a tag?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1453916246, "post_id": 35044214, "comment_id": 57812686, "body": "You should be able to do this with an <code>enum</code>"}, {"owner": {"reputation": 1448, "user_id": 1679647, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Z0sB3.jpg?s=128&g=1", "display_name": "Gerhard Stein", "link": "https://stackoverflow.com/users/1679647/gerhard-stein"}, "edited": false, "score": 0, "creation_date": 1453916779, "post_id": 35044214, "comment_id": 57813082, "body": "If you have to make a decision anyways in your caller why not directly DoStuffJSON or DoStuffCSV or better yet use function pointer if decision is to make just once and call the same function multiple times?"}], "answers": [{"tags": [], "owner": {"reputation": 7447, "user_id": 602372, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/q6bLu.jpg?s=128&g=1", "display_name": "Yam Marcovic", "link": "https://stackoverflow.com/users/602372/yam-marcovic"}, "is_accepted": false, "score": 3, "last_activity_date": 1453916765, "creation_date": 1453916765, "answer_id": 35044493, "question_id": 35044214, "link": "https://stackoverflow.com/questions/35044214/c-function-switch-on-value/35044493#35044493", "title": "C++ function switch on value", "body": "<p>So long as you want to depend on a value that can only be determined at run time, you're not missing anything: compile-time specialization is simply impossible.</p>\n\n<p>However, as suggested by commenters, you <em>can</em> specialize according to a value that's known at compile-time, like an enum.</p>\n"}, {"comments": [{"owner": {"reputation": 7447, "user_id": 602372, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/q6bLu.jpg?s=128&g=1", "display_name": "Yam Marcovic", "link": "https://stackoverflow.com/users/602372/yam-marcovic"}, "edited": false, "score": 0, "creation_date": 1453920518, "post_id": 35044514, "comment_id": 57815474, "body": "You don&#39;t necessarily need types here, you can specialize by the enum value itself."}, {"owner": {"reputation": 3037, "user_id": 833300, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4412dcb48f59881af2f24d3656770906?s=128&d=identicon&r=PG", "display_name": "jma", "link": "https://stackoverflow.com/users/833300/jma"}, "reply_to_user": {"reputation": 7447, "user_id": 602372, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/q6bLu.jpg?s=128&g=1", "display_name": "Yam Marcovic", "link": "https://stackoverflow.com/users/602372/yam-marcovic"}, "edited": false, "score": 0, "creation_date": 1453921001, "post_id": 35044514, "comment_id": 57815766, "body": "It might work with enums directly as @YamMarcovic notes, but I admit I am more easily able to wrap my head around using types to trigger polymorphism.  Thanks!"}, {"owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "reply_to_user": {"reputation": 7447, "user_id": 602372, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/q6bLu.jpg?s=128&g=1", "display_name": "Yam Marcovic", "link": "https://stackoverflow.com/users/602372/yam-marcovic"}, "edited": false, "score": 0, "creation_date": 1453921157, "post_id": 35044514, "comment_id": 57815855, "body": "Acutally, @YamMarcovic I appreciate the comment, but I disagree. You can overload on types, not values. (Keep the upvote for the classiness, though :-) )"}, {"owner": {"reputation": 7447, "user_id": 602372, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/q6bLu.jpg?s=128&g=1", "display_name": "Yam Marcovic", "link": "https://stackoverflow.com/users/602372/yam-marcovic"}, "edited": false, "score": 0, "creation_date": 1453921572, "post_id": 35044514, "comment_id": 57816079, "body": "@AmiTavory Thanks :) But just for the record, you can: <a href=\"http://rextester.com/CIBJ50287\" rel=\"nofollow noreferrer\">rextester.com/CIBJ50287</a>"}, {"owner": {"reputation": 7447, "user_id": 602372, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/q6bLu.jpg?s=128&g=1", "display_name": "Yam Marcovic", "link": "https://stackoverflow.com/users/602372/yam-marcovic"}, "edited": false, "score": 0, "creation_date": 1453921623, "post_id": 35044514, "comment_id": 57816112, "body": "@AmiTavory Though I just noticed you used the word &quot;overload&quot; whereas I said &quot;specialize&quot;--two different things."}, {"owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "reply_to_user": {"reputation": 7447, "user_id": 602372, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/q6bLu.jpg?s=128&g=1", "display_name": "Yam Marcovic", "link": "https://stackoverflow.com/users/602372/yam-marcovic"}, "edited": false, "score": 0, "creation_date": 1453921775, "post_id": 35044514, "comment_id": 57816204, "body": "@YamMarcovic Oh, got it. Thanks for the comment!"}, {"owner": {"reputation": 7447, "user_id": 602372, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/q6bLu.jpg?s=128&g=1", "display_name": "Yam Marcovic", "link": "https://stackoverflow.com/users/602372/yam-marcovic"}, "edited": false, "score": 0, "creation_date": 1453921845, "post_id": 35044514, "comment_id": 57816240, "body": "@AmiTavory My pleasure. :)"}, {"owner": {"reputation": 3037, "user_id": 833300, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4412dcb48f59881af2f24d3656770906?s=128&d=identicon&r=PG", "display_name": "jma", "link": "https://stackoverflow.com/users/833300/jma"}, "edited": false, "score": 0, "creation_date": 1453970631, "post_id": 35044514, "comment_id": 57836452, "body": "@AmiTavory Nice, thanks for the snippet.  And that example highlights nicely why this doesn&#39;t work with strings."}], "tags": [], "owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "is_accepted": true, "score": 2, "last_activity_date": 1453921116, "last_edit_date": 1453921116, "creation_date": 1453916835, "answer_id": 35044514, "question_id": 35044214, "link": "https://stackoverflow.com/questions/35044214/c-function-switch-on-value/35044514#35044514", "title": "C++ function switch on value", "body": "<p>As @bolov and @Nathan Oliver write, you can do this with an enum. </p>\n\n<p>To branch at compile time, I'd add <a href=\"http://en.cppreference.com/w/cpp/types/integral_constant\" rel=\"nofollow\"><code>std::integral_constant</code></a>:</p>\n\n<pre><code>#include &lt;type_traits&gt;                                                                                                                                                                                   \n\nenum class type\n{   \n    txt = 1,\n    cst = 2,\n};  \n\nusing txt_specifier = std::integral_constant&lt;type, type::txt&gt;;\nusing csv_specifier = std::integral_constant&lt;type, type::csv&gt;;\n</code></pre>\n\n<p>The latter two are <em>types</em>, and you can overload on them at compile time (and using the numeric values, do fancy metaprogramming things if needed further).</p>\n"}, {"tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": false, "score": 0, "last_activity_date": 1453917432, "creation_date": 1453917432, "answer_id": 35044694, "question_id": 35044214, "link": "https://stackoverflow.com/questions/35044214/c-function-switch-on-value/35044694#35044694", "title": "C++ function switch on value", "body": "<p>If you want to select the correct code with a run-time value, you probably need some sort of despatch table:</p>\n\n<pre><code>const auto dispatch = []{\n    std::map&lt;std::string,std::function&lt;string(const S&amp;,const T&amp;)&gt;&gt; table;\n    table(\"csv\") = [](const S&amp; s,const T&amp; t) { return do_stuff_csv(s,t); };\n    table(\"json\") = [](const S&amp; s,const T&amp; t) { return do_stuff_json(s,t); };\n    return table;\n}();\n</code></pre>\n\n<p>It's an exercise for the reader to generalise this sufficiently, and to take care of validating the <code>format</code> parameter...</p>\n"}], "owner": {"reputation": 3037, "user_id": 833300, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4412dcb48f59881af2f24d3656770906?s=128&d=identicon&r=PG", "display_name": "jma", "link": "https://stackoverflow.com/users/833300/jma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 35044514, "answer_count": 3, "score": 1, "last_activity_date": 1453921116, "creation_date": 1453915981, "question_id": 35044214, "link": "https://stackoverflow.com/questions/35044214/c-function-switch-on-value", "title": "C++ function switch on value", "body": "<p>I have a templated function</p>\n\n<pre><code>template &lt;typename S, typename T&gt;\nstring DoStuff(const S&amp; s, const T&amp; t, const string&amp; format) {\n    ...\n}\n</code></pre>\n\n<p>But <code>format</code> changes the function's behaviour completely (imagine values like \"csv\", \"json\", etc.).  So it would make a bit more sense to have separate functions.</p>\n\n<p>I feel like I'm missing something obvious, that this should be possible with some sort of specialisation.  Otherwise, I just have to add a dispatch function, which would work but feels like I've missed something obvious.</p>\n\n<pre><code>template &lt;typename S, typename T&gt;\nstring DoStuff(const S&amp; s, const T&amp; t, const string&amp; format) {\n    if (format == \"csv\")\n        return DoStuffCSV(s, t);\n    if (format == \"json\")\n        return DoStuffJSON(s, t);\n    // ...\n}\n\ntemplate &lt;typename S, typename T&gt;\nstring DoStuffCSV(const S&amp; s, const T&amp; t) {\n...\n}\n\ntemplate &lt;typename S, typename T&gt;\nstring DoStuffJSON(const S&amp; s, const T&amp; t) {\n...\n}\n</code></pre>\n\n<p>Conceptually, I want this (which of course doesn't work)</p>\n\n<pre><code>template &lt;typename S, typename T, string(\"csv\")&gt;\nstring DoStuff(const S&amp; s, const T&amp; t) {\n...\n}\n\ntemplate &lt;typename S, typename T, string(\"json\")&gt;\nstring DoStuff(const S&amp; s, const T&amp; t) {\n...\n}\n</code></pre>\n"}, {"tags": ["android", "c++", "java-native-interface", "google-project-tango"], "answers": [{"comments": [{"owner": {"reputation": 253, "user_id": 4515407, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Roycj.jpg?s=128&g=1", "display_name": "Noobs DeSroobs", "link": "https://stackoverflow.com/users/4515407/noobs-desroobs"}, "edited": false, "score": 1, "creation_date": 1453977422, "post_id": 35050514, "comment_id": 57841084, "body": "Indeed, that is what did it. Thanks. I tried and failed to give it a function pointer of the class itself, but if I manage to do it I will comment here."}], "tags": [], "owner": {"reputation": 1816, "user_id": 3561953, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/dC0PZ.jpg?s=128&g=1", "display_name": "xuguo", "link": "https://stackoverflow.com/users/3561953/xuguo"}, "is_accepted": true, "score": 1, "last_activity_date": 1453939028, "creation_date": 1453939028, "answer_id": 35050514, "question_id": 35044093, "link": "https://stackoverflow.com/questions/35044093/calling-a-function-using-the-context-pointer-using-jni-on-android-causes-a-segfa/35050514#35050514", "title": "Calling a function using the context pointer using JNI on android causes a segfault", "body": "<p>In the <code>OnXYZijAvailableRouter</code> (the depth callback), the context is the instance passed in from the <code>TangoService_connect</code> function. I believe in the application class, there should be a line like this: <code>TangoService_connect(this, tango_config_);</code> So <code>this</code> become the context when the callback is called. This context also applies to pose and event callbacks.</p>\n\n<p>In the case of <code>OnFrameAvailableRouter</code>, the context is the instance you passed in in the <code>TangoService_connectOnFrameAvailable</code>. In this case, the code is setting a NULL as context, but in the callback, it's trying the call a function on NULL. That's the crash point.</p>\n\n<p>I believe if you change the it to <code>TangoService_connectOnFrameAvailable(TangoCameraId::TANGO_CAMERA_COLOR, this, OnFrameAvailableRouter);</code> it should work fine.</p>\n\n<p>The router function is for the callbacks, I haven't find a way of giving a function pointer of a instance to the API. But let me know if you find a way to do that, I would like to know as well..</p>\n"}], "owner": {"reputation": 253, "user_id": 4515407, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Roycj.jpg?s=128&g=1", "display_name": "Noobs DeSroobs", "link": "https://stackoverflow.com/users/4515407/noobs-desroobs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 0, "accepted_answer_id": 35050514, "answer_count": 1, "score": 0, "last_activity_date": 1453939028, "creation_date": 1453915650, "last_edit_date": 1495542658, "question_id": 35044093, "link": "https://stackoverflow.com/questions/35044093/calling-a-function-using-the-context-pointer-using-jni-on-android-causes-a-segfa", "title": "Calling a function using the context pointer using JNI on android causes a segfault", "body": "<p>I found this bit of code in one of the <a href=\"https://github.com/googlesamples/tango-examples-c/blob/master/rgb-depth-sync-example/app/src/main/jni/rgb_depth_sync_application.cc#L27\" rel=\"nofollow noreferrer\">example tango projects</a> using the JNI and I have no idea what the context is nor how to use it. The example code works, but my code does not. </p>\n\n<pre><code>void OnXYZijAvailableRouter(void *context, const TangoXYZij *xyz_ij) {\n    SynchronizationApplication *app =\n        static_cast&lt;SynchronizationApplication *&gt;(context);\n    app-&gt;OnXYZijAvailable(xyz_ij);\n}\n</code></pre>\n\n<p>I tried mimicking it below:</p>\n\n<pre><code>void OnFrameAvailableRouter(void *context, const TangoCameraId id,\n                            const TangoImageBuffer *buffer) {\n    SynchronizationApplication *app =\n        static_cast&lt;SynchronizationApplication *&gt;(context);\n    LOGE(\"Before onframe call.\");\n    app-&gt;onFrameAvailable(id, buffer);\n    LOGE(\"After onframe call.\");\n}\n</code></pre>\n\n<p>When I try to run it, however, I get this output:</p>\n\n<pre><code>Before onframe call.\nFatal signal 11 (SIGSEGV) at 0x00000308 (code=1), thread 15673 (Binder_2)\n</code></pre>\n\n<p>Now I managed to find the pointer that causes the seg fault, but I have no idea why it does not work.</p>\n\n<p>Naturally, I might have done something wrong, but I have no idea what since I made an exact copy of the code in the example.</p>\n\n<pre><code>int SynchronizationApplication::TangoConnectCallbacks() {\n    TangoErrorType depth_ret =\n            TangoService_connectOnXYZijAvailable(OnXYZijAvailableRouter);\n\n    depth_ret = TangoService_connectOnFrameAvailable(TangoCameraId::TANGO_CAMERA_COLOR, NULL,\n                                         OnFrameAvailableRouter);\n\n    return depth_ret;\n}\n</code></pre>\n\n<p>The functions I call from the routers.</p>\n\n<pre><code>void OnXYZijAvailable(const TangoXYZij *xyz_ij);\nvoid onFrameAvailable(const TangoCameraId id, const TangoImageBuffer *buffer);\n</code></pre>\n\n<p>What exactly is the context? I have read some explanations, but I still do not understand why I can call the function using the context in the example above, nor why I need the router function at all. I have read <a href=\"https://stackoverflow.com/questions/3572463/what-is-context-in-android\">this SO answer</a> and <a href=\"http://developer.android.com/reference/android/content/Context.html\" rel=\"nofollow noreferrer\">the android page</a> on the concept, but I see no link between the context and my class.</p>\n"}, {"tags": ["c++", "parsing", "boost", "qi"], "comments": [{"owner": {"reputation": 155, "user_id": 2417774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3e28fcff33afd3cfb2242c4ae49b72c?s=128&d=identicon&r=PG", "display_name": "llonesmiz", "link": "https://stackoverflow.com/users/2417774/llonesmiz"}, "edited": false, "score": 0, "creation_date": 1453918194, "post_id": 35044074, "comment_id": 57813980, "body": "Should <code>d</code> and <code>illum</code> also be in <code>Material</code>? You probably want the <a href=\"http://www.boost.org/libs/spirit/doc/html/spirit/qi/reference/operator/permutation.html\" rel=\"nofollow noreferrer\">permutation parser</a>."}, {"owner": {"reputation": 575, "user_id": 5377635, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/073ffd1dfc87b3a25a376bb48a14e1ce?s=128&d=identicon&r=PG&f=1", "display_name": "Sheph", "link": "https://stackoverflow.com/users/5377635/sheph"}, "reply_to_user": {"reputation": 155, "user_id": 2417774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3e28fcff33afd3cfb2242c4ae49b72c?s=128&d=identicon&r=PG", "display_name": "llonesmiz", "link": "https://stackoverflow.com/users/2417774/llonesmiz"}, "edited": false, "score": 0, "creation_date": 1453918802, "post_id": 35044074, "comment_id": 57814395, "body": "I could add them but not necessarily needed. Permutation parser sounds interesting, but how do I associate the values after eg <code>&quot;Ks&quot;</code> with the Ks field in <code>Material</code>?"}, {"owner": {"reputation": 155, "user_id": 2417774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3e28fcff33afd3cfb2242c4ae49b72c?s=128&d=identicon&r=PG", "display_name": "llonesmiz", "link": "https://stackoverflow.com/users/2417774/llonesmiz"}, "edited": false, "score": 0, "creation_date": 1453919072, "post_id": 35044074, "comment_id": 57814567, "body": "You need to put them in the same order as the ones in your adaptation macro (<code>Ka^Kd^Ks^Ke^Ns</code> ignoring the floats). I don&#39;t have time ATM but I&#39;m sure an answer is coming."}, {"owner": {"reputation": 575, "user_id": 5377635, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/073ffd1dfc87b3a25a376bb48a14e1ce?s=128&d=identicon&r=PG&f=1", "display_name": "Sheph", "link": "https://stackoverflow.com/users/5377635/sheph"}, "reply_to_user": {"reputation": 155, "user_id": 2417774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3e28fcff33afd3cfb2242c4ae49b72c?s=128&d=identicon&r=PG", "display_name": "llonesmiz", "link": "https://stackoverflow.com/users/2417774/llonesmiz"}, "edited": false, "score": 0, "creation_date": 1453922830, "post_id": 35044074, "comment_id": 57816806, "body": "Thank you! Your tips led me to the solution. I changed my grammar to be less recursive per rule and some google-fu led me to omit[] to ignore my comment rule, which otherwise couldn&#39;t map onto <code>std::map&lt;string,Material &gt;</code>. Also, fiddling around I found that omit on unused fields combined with only mapping parsable parameters in <code>BOOST_FUSION_ADAPT_STRUCT</code> (Ke on my material cannot exist in the mtl file) makes it map perfectly. If you want the answer, type up a reply. Otherwise I&#39;m adding my result below."}, {"owner": {"reputation": 155, "user_id": 2417774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3e28fcff33afd3cfb2242c4ae49b72c?s=128&d=identicon&r=PG", "display_name": "llonesmiz", "link": "https://stackoverflow.com/users/2417774/llonesmiz"}, "edited": false, "score": 0, "creation_date": 1453922976, "post_id": 35044074, "comment_id": 57816885, "body": "Feel free to put your own answer, I&#39;ll upvote it."}], "answers": [{"tags": [], "owner": {"reputation": 575, "user_id": 5377635, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/073ffd1dfc87b3a25a376bb48a14e1ce?s=128&d=identicon&r=PG&f=1", "display_name": "Sheph", "link": "https://stackoverflow.com/users/5377635/sheph"}, "is_accepted": true, "score": 3, "last_activity_date": 1453923043, "creation_date": 1453923043, "answer_id": 35046383, "question_id": 35044074, "link": "https://stackoverflow.com/questions/35044074/boost-spirit-qi-i-have-a-parser-that-i-would-like-to-map-onto-a-struct-dynamic/35046383#35046383", "title": "Boost Spirit Qi, I have a parser that I would like to map onto a struct &quot;dynamically&quot; (meaning order of parameters is not fixed)", "body": "<p>Thanks to cv_and_he I found the solution. First ONLY the parameters that can occur in the file should be mapped using <code>BOOST_FUSION_ADAPT_STRUCT</code>, so don't map Material::Ke since it cannot occur naturally in the file format.</p>\n\n<pre><code>BOOST_FUSION_ADAPT_STRUCT(\n    Material,\n    (glm::vec3, Ka)\n    (glm::vec3, Kd)\n    (glm::vec3, Ks)\n    (float, Ns)\n    )\n</code></pre>\n\n<p>Next, my grammer ended up like the following:</p>\n\n<pre><code>template &lt;typename Iterator&gt;\nstruct mtllib_grammar : qi::grammar&lt;Iterator, std::map&lt;std::string, Material&gt;(), qi::blank_type&gt; {\n\n    mtllib_grammar() : mtllib_grammar::base_type(mtl)\n    {\n        using qi::char_;\n        using qi::float_;\n        using qi::int_;\n        using qi::omit;\n\n\n        mtl =\n            (\n            *((\"newmtl\" &gt;&gt; string_rule &gt;&gt; qi::eol &gt;&gt; mtl_details) |\n            (\"#\" &gt;&gt; omit[*(qi::char_ - qi::eol)] &gt;&gt; qi::eol ))\n            );\n\n        mtl_details =\n            (\n            (\"Ka\" &gt;&gt; glm_rule &gt;&gt; qi::eol) ^\n            (\"Kd\" &gt;&gt; glm_rule &gt;&gt; qi::eol) ^\n            (\"Ks\" &gt;&gt; glm_rule &gt;&gt; qi::eol) ^\n            (\"d\" &gt;&gt; omit[int_] &gt;&gt; qi::eol) ^\n            (\"Ns\" &gt;&gt; int_ &gt;&gt; qi::eol) ^\n            (\"illum\" &gt;&gt; omit[int_] &gt;&gt; qi::eol)\n            );\n\n        string_rule = +(char_ - qi::eol);\n        glm_rule = float_ &gt;&gt; float_ &gt;&gt; float_;\n    }\n    qi::rule&lt;Iterator, std::map&lt;std::string, Material&gt;(), qi::blank_type&gt; mtl;\n\n    qi::rule&lt;Iterator, Material(), qi::blank_type&gt; mtl_details;\n\n    qi::rule&lt;Iterator, std::string(), qi::blank_type&gt; string_rule;\n    qi::rule&lt;Iterator, glm::vec3(), qi::blank_type&gt; glm_rule;\n};\n</code></pre>\n\n<p>With <code>omit</code> around unused parameters PLUS comments. Otherwise the compiler borks about being unable to map onto the types given in the rules.</p>\n"}], "owner": {"reputation": 575, "user_id": 5377635, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/073ffd1dfc87b3a25a376bb48a14e1ce?s=128&d=identicon&r=PG&f=1", "display_name": "Sheph", "link": "https://stackoverflow.com/users/5377635/sheph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 35046383, "answer_count": 1, "score": 2, "last_activity_date": 1453923043, "creation_date": 1453915588, "question_id": 35044074, "link": "https://stackoverflow.com/questions/35044074/boost-spirit-qi-i-have-a-parser-that-i-would-like-to-map-onto-a-struct-dynamic", "title": "Boost Spirit Qi, I have a parser that I would like to map onto a struct &quot;dynamically&quot; (meaning order of parameters is not fixed)", "body": "<p>So I'm trying hard to get boost::spirit::qi under my skin. My toy example so far is a parser that parses Wavefront OBJ material libraries that have the following format:</p>\n\n<pre><code>newmtl ShortBox\nKa  0.6 0.6 0.6\nKd  0.5 0.5 0.5\nKs  0 0 0\nd  1\nNs  0\nillum 2\n</code></pre>\n\n<p>However the ordering of the arguments to the material ShortBox can vary. I've created the following grammar that successfully parses it:</p>\n\n<pre><code>template &lt;typename Iterator&gt;\nstruct mtllib_grammar : qi::grammar&lt;Iterator, qi::blank_type&gt; {\n\n    mtllib_grammar() : mtllib_grammar::base_type(mtl)\n    {\n        using qi::char_;\n        using qi::double_;\n        using qi::int_;\n\n\n        mtl =\n            (\n            (\"newmtl\" &gt;&gt; +(char_ - qi::eol)  &gt;&gt; qi::eol &gt;&gt; *(mtl_details) &gt;&gt; *(mtl))\n            | (\"#\" &gt;&gt; *(qi::char_ - qi::eol) &gt;&gt; qi::eol &gt;&gt; *(mtl))\n            );\n\n        mtl_details =\n            (\n            (\"Ka\" &gt;&gt; double_ &gt;&gt; double_ &gt;&gt; double_ &gt;&gt; qi::eol &gt;&gt; *(mtl_details))\n            | (\"Kd\" &gt;&gt; double_ &gt;&gt; double_ &gt;&gt; double_ &gt;&gt; qi::eol &gt;&gt; *(mtl_details))\n            | (\"Ks\" &gt;&gt; double_ &gt;&gt; double_ &gt;&gt; double_ &gt;&gt; qi::eol &gt;&gt; *(mtl_details))\n            | (\"d\" &gt;&gt; int_ &gt;&gt; qi::eol &gt;&gt; *(mtl_details))\n            | (\"Ns\" &gt;&gt; int_ &gt;&gt; qi::eol &gt;&gt; *(mtl_details))\n            | (\"illum\" &gt;&gt; int_ &gt;&gt; qi::eol &gt;&gt; *(mtl_details))\n            );\n    }\n    qi::rule&lt;Iterator, qi::blank_type&gt; mtl;\n    qi::rule&lt;Iterator, qi::blank_type&gt; mtl_details;\n};\n</code></pre>\n\n<p>Now I would like to build a <code>std::map&lt;std::string,Material&gt;</code> where <code>Material</code> is defined as:</p>\n\n<pre><code>struct Material {\n    Material()\n    {\n        Ns = 0.0f;\n        Ke = glm::vec3(0.0f);\n        Kd = glm::vec3(0.0f);\n        Ks = glm::vec3(0.0f);\n        Ka = glm::vec3(0.0f);\n    }\n    ~Material() {}\n    glm::vec3 Ka;\n    glm::vec3 Kd;\n    glm::vec3 Ks;\n    glm::vec3 Ke;\n    float Ns;\n};\n</code></pre>\n\n<p>with the following fusion adaptations:</p>\n\n<pre><code>BOOST_FUSION_ADAPT_STRUCT(\n    glm::vec3,\n    (float, x)\n    (float, y)\n    (float, z)\n    )\n\nBOOST_FUSION_ADAPT_STRUCT(\n    Material,\n    (glm::vec3, Ka)\n    (glm::vec3, Kd)\n    (glm::vec3, Ks)\n    (glm::vec3, Ke)\n    (float, Ns)\n    )\n</code></pre>\n\n<p>So my current idea is to change rule <code>mtl_details</code>such that it returns a complete <code>Material</code> and rule <code>mtl</code> into returning a map of said Material with key being the string after <code>newmtl</code>. However, I'm lost at how to use attributes to build the Material object from the parse tree, mapping all hits of <code>Ka, Kd, Ks</code> ect. onto the same struct. Reading examples they all seem to either implicitly get mapped onto whatever variable is associated to it, or they map only to simple values, not objects.</p>\n"}, {"tags": ["c++", "templates"], "answers": [{"comments": [{"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 2, "creation_date": 1453915946, "post_id": 35044145, "comment_id": 57812490, "body": "That&#39;s why you&#39;d use template specialization or tag dispatching, which are both selected at compile-time."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 1, "creation_date": 1453916277, "post_id": 35044145, "comment_id": 57812712, "body": "@black : What is your objection to including \u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6 &#39;s code in this answer (with full attribution).  The OP needs both; an explanation of what is going wrong, and how to fix it."}, {"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 0, "creation_date": 1453923968, "post_id": 35044145, "comment_id": 57817495, "body": "(sorry, forgot to explain that in the edit summary) I wouldn&#39;t find it useful or nice to do; rather, if you really need to, say something like: &quot;$user shows a solution to that&quot;. It&#39;s not a community answer."}, {"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 0, "creation_date": 1453924784, "post_id": 35044145, "comment_id": 57817961, "body": "(oh well, you already got a [better] answer on meta; more or less resembles my point)"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 0, "creation_date": 1453968179, "post_id": 35044145, "comment_id": 57835098, "body": "@black: Thanks for the correction - a good learning opportunity for me."}], "tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": false, "score": 7, "last_activity_date": 1453968144, "last_edit_date": 1495539898, "creation_date": 1453915798, "answer_id": 35044145, "question_id": 35043973, "link": "https://stackoverflow.com/questions/35043973/c-templates-return-value-by-type/35044145#35044145", "title": "C++ templates: return value by type", "body": "<p>Your problem is <code>operator T()</code>.  Look at it from the compiler's point of view.  If you expand for <code>uint32_t</code> you get:</p>\n\n<pre><code>operator uint32_t() const {\n    if (...) return std::stoi(internalStr);\n    if (...) return std::stoul(internalStr);\n    if (...) return std::stoul(internalStr);\n    if (...) return std::stod(internalStr);\n    if (...) return std::stold(internalStr);   // Consider here\n    if (...) return std::stof(internalStr);\n    return std::stoll(internalStr);\n}\n</code></pre>\n\n<p>Which looks to the compiler that you might be trying to return a long double from a function that is supposed to return <code>uint32_t</code>.  Of course, later on in the compilation process, that will get optimized down to:</p>\n\n<pre><code>operator uint32_t() const {\n    return std::stoul(internalStr);\n}\n</code></pre>\n\n<p>... but by that time, the warning has been issued.  </p>\n\n<p>The <em>fix</em> is either:</p>\n\n<ul>\n<li>Write each cast operator that you want explicitly.  (See <a href=\"https://stackoverflow.com/a/35044446/771073\">R Sahu's answer</a> for details.)  This has the advantage of being simpler and less typing.</li>\n<li>Write a templated cast operator declaration without a definition, and then write explicit specializations for each type that you want.  (See <a href=\"https://stackoverflow.com/a/35044180/771073\">\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6's answer</a> for details.)  This has the feature that you must create an operator for every type you want to be able tot cast too; a missing type will be a compilation error. This may be an advantage (more control on range etc), or a disadvantage (more code) depending on your application.</li>\n</ul>\n\n<p>The advantage of the formwerapproach </p>\n"}, {"comments": [{"owner": {"reputation": 428, "user_id": 5847906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Mq0Bm.png?s=128&g=1", "display_name": "Ayak973", "link": "https://stackoverflow.com/users/5847906/ayak973"}, "edited": false, "score": 0, "creation_date": 1453916300, "post_id": 35044180, "comment_id": 57812729, "body": "Thank you, but i&#39;ve another question: if i&#39;ve to overload each operator for each return types, templates are useless for this case?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 428, "user_id": 5847906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Mq0Bm.png?s=128&g=1", "display_name": "Ayak973", "link": "https://stackoverflow.com/users/5847906/ayak973"}, "edited": false, "score": 0, "creation_date": 1453916556, "post_id": 35044180, "comment_id": 57812910, "body": "@Ayak973 <i>&quot;Thank you, but i&#39;ve another question:&quot;</i> Sure? Didn&#39;t my answer not explain completely what actually happens?"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1453917002, "post_id": 35044180, "comment_id": 57813242, "body": "Not quite.  Templates will cause a compilation failure if you miss a case.  (The compiler will select the perfect match, and then find it doesn&#39;t know how to generate it.)  If you provide separate functions, the compiler will make best efforts to find a way to convert."}, {"owner": {"reputation": 428, "user_id": 5847906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Mq0Bm.png?s=128&g=1", "display_name": "Ayak973", "link": "https://stackoverflow.com/users/5847906/ayak973"}, "edited": false, "score": 0, "creation_date": 1453917159, "post_id": 35044180, "comment_id": 57813346, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6: Sure! Your answer is satisfying (for me, at least), but in this particular case templates offer nothing more for me than write non templated overloaded cast operator? Edit: Too slow for typing, i get my answer in comments"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 428, "user_id": 5847906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Mq0Bm.png?s=128&g=1", "display_name": "Ayak973", "link": "https://stackoverflow.com/users/5847906/ayak973"}, "edited": false, "score": 0, "creation_date": 1453917346, "post_id": 35044180, "comment_id": 57813472, "body": "@Ayak973 Well, have a look at R. Sahu&#39;s answer. You could have a default implementation for the templated cast operator though, that bails out using a <code>std::static_assert</code> for unsupported types."}, {"owner": {"reputation": 428, "user_id": 5847906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Mq0Bm.png?s=128&g=1", "display_name": "Ayak973", "link": "https://stackoverflow.com/users/5847906/ayak973"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1453920256, "post_id": 35044180, "comment_id": 57815306, "body": "As @MartinBonner pointed out, i want a &quot;templated cast operator with explicit specializations&quot; to prevent integer overflow, and a compilation error. His answer was helpful too."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 428, "user_id": 5847906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Mq0Bm.png?s=128&g=1", "display_name": "Ayak973", "link": "https://stackoverflow.com/users/5847906/ayak973"}, "edited": false, "score": 0, "creation_date": 1453921765, "post_id": 35044180, "comment_id": 57816196, "body": "@Ayak973 Sure Martin&#39;s answer was helpful as well, as R Sahu&#39;s is. I never stated these aren&#39;t.  Note that Martin started a <a href=\"http://meta.stackoverflow.com/questions/315587/combining-answers\">discussion at Meta SO</a> about this. You don&#39;t actually need to accept a particular answer here, but if you choose mine, well OK ;-) ..."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1453955087, "post_id": 35044180, "comment_id": 57829829, "body": "<code>static_assert(false,&quot;Casted to an unsupported type!&quot;);</code> is ill-formed NDR. You need to make the <code>false</code> dependent."}, {"owner": {"reputation": 428, "user_id": 5847906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Mq0Bm.png?s=128&g=1", "display_name": "Ayak973", "link": "https://stackoverflow.com/users/5847906/ayak973"}, "edited": false, "score": 0, "creation_date": 1453977026, "post_id": 35044180, "comment_id": 57840827, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Thank you for the static_assert edit, your solution works well. Note: since i&#39;ve only one header file, i&#39;d have to <code>inline</code> the templates definition <code>template&lt;&gt; inline HybridType::operator uint16_t() const {}</code>"}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 5, "last_activity_date": 1453967715, "last_edit_date": 1453967715, "creation_date": 1453915900, "answer_id": 35044180, "question_id": 35043973, "link": "https://stackoverflow.com/questions/35043973/c-templates-return-value-by-type/35044180#35044180", "title": "C++ templates: return value by type", "body": "<p>Templates are evaluated at compile time, thus you can't use <code>if()</code> to select the appropriate conversion function at runtime (return types will conflict, hence the warnings).</p>\n\n<p>You need to provide type specialized implementations for your cast operator instead:</p>\n\n<pre><code>class HybridType {\npublic:\n    // ...\n    template&lt;typename T&gt;\n    operator T() const {\n        static_assert(std::is_same&lt;T, std::uint16_t&gt;::value ||\n                      std::is_same&lt;T, std::uint32_t&gt;::value \n                      // ...\n                     ,\"Casted to an unsupported type!\");\n    }\n    // ...\n};\n\ntemplate&lt;&gt;\nHybridType::operator std::uint16_t() const {\n    return std::stoi(internalStr);\n}\n\ntemplate&lt;&gt;\nHybridType::operator std::uint32_t() const {\n    return std::stoul(internalStr);\n}\n\n// aso. ...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1453916903, "post_id": 35044446, "comment_id": 57813173, "body": "The advantage of a templated cast operator with explicit specializations is that it will fail to compile if you write <code>int i = HybridType(....);</code>  Your version will call  <code>operator long long()</code> and then possibly cause undefined behaviour with integer overflow."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1453917606, "post_id": 35044446, "comment_id": 57813638, "body": "@MartinBonner, good point. FWIW, in my test, using <code>int i = ...</code> resolved to the <code>std::uint16_t</code> overload."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1453916626, "last_edit_date": 1495541716, "creation_date": 1453916626, "answer_id": 35044446, "question_id": 35043973, "link": "https://stackoverflow.com/questions/35043973/c-templates-return-value-by-type/35044446#35044446", "title": "C++ templates: return value by type", "body": "<p><a href=\"https://stackoverflow.com/a/35044145/434551\">The answer by Martin Booner</a> has already pointed out the core issue. I am going to suggest a simpler solution for what you want to accomplish in your class.</p>\n\n<p>Using templates for classes and functions is worthwhile only when the implementation is generic. That's not true in your case. The logic to return a <code>int</code> is different that logic to return a <code>double</code>. Using a member function template for this is not the best use of templates.</p>\n\n<pre><code>template&lt;typename T&gt;\noperator T() const {\n    if (std::is_same&lt;T, std::uint16_t&gt;::value) return std::stoi(internalStr);\n    if (std::is_same&lt;T, std::uint32_t&gt;::value) return std::stoul(internalStr);\n    if (std::is_same&lt;T, std::uint64_t&gt;::value) return std::stoul(internalStr);\n    if (std::is_same&lt;T, double&gt;::value) return std::stod(internalStr);\n    if (std::is_same&lt;T, long double&gt;::value) return std::stold(internalStr);\n    if (std::is_same&lt;T, float&gt;::value) return std::stof(internalStr);\n    return std::stoll(internalStr);\n}\n</code></pre>\n\n<p>is not any simpler than:</p>\n\n<pre><code>operator std::uint16_t() const {\n    return std::stoi(internalStr);\n}\n\noperator std::uint32_t() const {\n    return std::stoul(internalStr);\n}\n\noperator std::uint64_t() const {\n    return std::stoul(internalStr);\n}\n\noperator double() const {\n    return std::stod(internalStr);\n}\n\noperator long double() const {\n    return std::stold(internalStr);\n}\n\noperator float() const {\n    return std::stof(internalStr);\n}\n\noperator long long() const {\n    return std::stoll(internalStr);\n}\n</code></pre>\n\n<p>even though the latter is more verbose due the presence of more functions.</p>\n"}], "owner": {"reputation": 428, "user_id": 5847906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Mq0Bm.png?s=128&g=1", "display_name": "Ayak973", "link": "https://stackoverflow.com/users/5847906/ayak973"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1402, "favorite_count": 1, "accepted_answer_id": 35044180, "answer_count": 3, "score": 2, "last_activity_date": 1453968144, "creation_date": 1453915283, "last_edit_date": 1453915794, "question_id": 35043973, "link": "https://stackoverflow.com/questions/35043973/c-templates-return-value-by-type", "title": "C++ templates: return value by type", "body": "<p>I'm learning C++ and templates to implement a configuration file reader (<a href=\"http://www.adp-gmbh.ch/cpp/chameleon.html\" rel=\"nofollow\">http://www.adp-gmbh.ch/cpp/chameleon.html</a>) and I\u2019m trying to make a template for a class with a <code>std::string</code> as internal storage, which can return its internal value when assigning it to a variable (double, long double, float, string, uint16_t, uint32_t).</p>\n\n<p>Platform: Win10 with Visual Studio Community 2015 Update 1</p>\n\n<pre><code>class HybridType {\npublic:\n    HybridType() {};\n    explicit HybridType(const std::string&amp; value) : internalStr(value) {}\n    explicit HybridType(const char* value) : internalStr (std::string(value)) { }\n\n    template&lt;typename T, typename = typename std::enable_if&lt;std::is_arithmetic&lt;T&gt;::value, T&gt;::type&gt;\n    explicit HybridType(T numericValue) {\n        std::stringstream strstr;\n        strstr &lt;&lt; std::setprecision(std::numeric_limits&lt;T&gt;::digits10 + 1) &lt;&lt; numericValue;\n        internalStr = strstr.str();\n    }\n\n    operator std::string() const { return internalStr; }\n\n    template&lt;typename T&gt;\n    operator T() const {\n        if (std::is_same&lt;T, std::uint16_t&gt;::value) return std::stoi(internalStr);\n        if (std::is_same&lt;T, std::uint32_t&gt;::value) return std::stoul(internalStr);\n        if (std::is_same&lt;T, std::uint64_t&gt;::value) return std::stoul(internalStr);\n        if (std::is_same&lt;T, double&gt;::value) return std::stod(internalStr);\n        if (std::is_same&lt;T, long double&gt;::value) return std::stold(internalStr);\n        if (std::is_same&lt;T, float&gt;::value) return std::stof(internalStr);\n        return std::stoll(internalStr);\n    }\n\n\n\n    template&lt;typename T&gt; operator T*() { return internalStr.c_str(); }\n\nprivate:\n    std::string internalStr;\n};\n</code></pre>\n\n<p>When using it, I do the following:</p>\n\n<pre><code>uint32_t test = HybridType(\"50\");\nlong double test2 = HybridType(\"50.0\");\n</code></pre>\n\n<p>But when I compile this, I get a lot of warnings:</p>\n\n<pre><code>1&gt; warning C4244: 'return': conversion from 'double' to 'uint32_t',\npossible loss of data 1&gt;  see reference to function template\ninstantiation 'HybridType::operator T(void) const&lt;uint32_t&gt;' being\ncompiled 1&gt;          with 1&gt;          [ 1&gt;              T=uint32_t 1&gt; ] \n1&gt; warning C4244: 'return': conversion from 'long double' to\n'uint32_t', possible loss of data 1&gt; warning C4244: 'return':\nconversion from 'float' to 'uint32_t', possible loss of data 1&gt;\nwarning C4244: 'return': conversion from '__int64' to 'uint32_t',\npossible loss of data\n</code></pre>\n\n<p>I didn\u2019t really understand why I have these warnings (compiler cannot choose the appropriate type), because when I output my variables they seem to have the correct value?</p>\n"}, {"tags": ["c++", "function-pointers", "member-function-pointers"], "comments": [{"owner": {"reputation": 11552, "user_id": 499359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Xrx9K.gif?s=128&g=1", "display_name": "PaperBirdMaster", "link": "https://stackoverflow.com/users/499359/paperbirdmaster"}, "edited": false, "score": 0, "creation_date": 1453915046, "post_id": 35043772, "comment_id": 57811891, "body": "No, I&#39;m not asking what does <code>T::*</code> means in template&#39;s parameters."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1453915309, "post_id": 35043772, "comment_id": 57812056, "body": "Sorry about that.  Didn&#39;t get it reopened quickly."}, {"owner": {"reputation": 10203, "user_id": 4672588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcbc85fb3b43202dab37afb2bd5281e?s=128&d=identicon&r=PG&f=1", "display_name": "cpplearner", "link": "https://stackoverflow.com/users/4672588/cpplearner"}, "edited": false, "score": 1, "creation_date": 1453923553, "post_id": 35043772, "comment_id": 57817242, "body": "This is not limited to member pointers. If you have <code>using T = int()</code> then <code>T* p</code> is valid, while <code>int()* p</code> is forbidden by the grammar rule."}, {"owner": {"reputation": 11552, "user_id": 499359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Xrx9K.gif?s=128&g=1", "display_name": "PaperBirdMaster", "link": "https://stackoverflow.com/users/499359/paperbirdmaster"}, "reply_to_user": {"reputation": 10203, "user_id": 4672588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcbc85fb3b43202dab37afb2bd5281e?s=128&d=identicon&r=PG&f=1", "display_name": "cpplearner", "link": "https://stackoverflow.com/users/4672588/cpplearner"}, "edited": false, "score": 0, "creation_date": 1454679436, "post_id": 35043772, "comment_id": 58165384, "body": "@cpplearner yes, as it is already pointed out in the <a href=\"http://open-std.org/JTC1/SC22/WG21/docs/papers/2015/p0172r0.html\" rel=\"nofollow noreferrer\">p0172r0 paper</a> I was talking about."}], "answers": [{"comments": [{"owner": {"reputation": 11552, "user_id": 499359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Xrx9K.gif?s=128&g=1", "display_name": "PaperBirdMaster", "link": "https://stackoverflow.com/users/499359/paperbirdmaster"}, "edited": false, "score": 0, "creation_date": 1453915621, "post_id": 35043975, "comment_id": 57812272, "body": "So why <code>void my_test(void() S::*)</code> does not accept a pointer to any <code>void()</code> member of <code>S</code>?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 11552, "user_id": 499359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Xrx9K.gif?s=128&g=1", "display_name": "PaperBirdMaster", "link": "https://stackoverflow.com/users/499359/paperbirdmaster"}, "edited": false, "score": 0, "creation_date": 1453915948, "post_id": 35043975, "comment_id": 57812492, "body": "@PaperBirdMaster As far as a know a pointer to a class data member and a pointer to a class member function are to different things.  I have never seen a they syntax you are trying to use in any code I have ever seen."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 11552, "user_id": 499359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Xrx9K.gif?s=128&g=1", "display_name": "PaperBirdMaster", "link": "https://stackoverflow.com/users/499359/paperbirdmaster"}, "edited": false, "score": 0, "creation_date": 1453916897, "post_id": 35043975, "comment_id": 57813166, "body": "@PaperBirdMaster I have been testing and I don&#39;t think C++ allows this.  see: <a href=\"http://coliru.stacked-crooked.com/a/5db4e74c2be52aaf\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/5db4e74c2be52aaf</a>"}, {"owner": {"reputation": 11552, "user_id": 499359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Xrx9K.gif?s=128&g=1", "display_name": "PaperBirdMaster", "link": "https://stackoverflow.com/users/499359/paperbirdmaster"}, "edited": false, "score": 0, "creation_date": 1453917622, "post_id": 35043975, "comment_id": 57813647, "body": "I&#39;ve tested the code of <a href=\"http://open-std.org/JTC1/SC22/WG21/docs/papers/2015/p0172r0.html\" rel=\"nofollow noreferrer\">p0172r0</a> in <a href=\"http://melpon.org/wandbox/permlink/qmhjOsxx3gJP33wz\" rel=\"nofollow noreferrer\">Wandbox</a> with gcc 6.0.0."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 11552, "user_id": 499359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Xrx9K.gif?s=128&g=1", "display_name": "PaperBirdMaster", "link": "https://stackoverflow.com/users/499359/paperbirdmaster"}, "edited": false, "score": 0, "creation_date": 1453917756, "post_id": 35043975, "comment_id": 57813731, "body": "@PaperBirdMaster That is interesting.  I&#39;ll have to dig into it a little later."}, {"owner": {"reputation": 11552, "user_id": 499359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Xrx9K.gif?s=128&g=1", "display_name": "PaperBirdMaster", "link": "https://stackoverflow.com/users/499359/paperbirdmaster"}, "edited": false, "score": 0, "creation_date": 1454487797, "post_id": 35043975, "comment_id": 58061079, "body": "NathanOliver you had the opportunity to take a look at this?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 11552, "user_id": 499359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Xrx9K.gif?s=128&g=1", "display_name": "PaperBirdMaster", "link": "https://stackoverflow.com/users/499359/paperbirdmaster"}, "edited": false, "score": 0, "creation_date": 1454593079, "post_id": 35043975, "comment_id": 58120637, "body": "@PaperBirdMaster I have but I can&#39;t quite figure it out.  I would have to ask an SO question to get some clarification on what I am seeing.  I can give you the information and you can ask it since it is your problem ."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 3, "last_activity_date": 1453915286, "creation_date": 1453915286, "answer_id": 35043975, "question_id": 35043772, "link": "https://stackoverflow.com/questions/35043772/weird-pointer-to-member-function-syntax/35043975#35043975", "title": "Weird pointer to member function syntax", "body": "<p><code>TYPE host::*</code> is a pointer to a class data member.  <code>TYPE</code> is the type of the class member and <code>host::*</code> means pointer to member of <code>host</code>.  So <code>TYPE host::*</code> accepts a pointer to any of member of <code>host</code></p>\n"}, {"comments": [{"owner": {"reputation": 11552, "user_id": 499359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Xrx9K.gif?s=128&g=1", "display_name": "PaperBirdMaster", "link": "https://stackoverflow.com/users/499359/paperbirdmaster"}, "edited": false, "score": 0, "creation_date": 1453916188, "post_id": 35044132, "comment_id": 57812652, "body": "So if <code>my_test(void (S::*)())</code> is the correct way to declare pointer to <code>void()</code> member <code>S</code>, shouldnt <code>template &lt;typename TYPE&gt; constexpr bool test(TYPE host::*)</code> be <code>template &lt;typename TYPE&gt; constexpr bool test(TYPE (host::*)())</code>? I don&#39;t understand the syntax on <a href=\"http://open-std.org/JTC1/SC22/WG21/docs/papers/2015/p0172r0.html\" rel=\"nofollow noreferrer\">p0172r0</a>."}, {"owner": {"reputation": 9690, "user_id": 1707560, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/8VK4M.jpg?s=128&g=1", "display_name": "imreal", "link": "https://stackoverflow.com/users/1707560/imreal"}, "reply_to_user": {"reputation": 11552, "user_id": 499359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Xrx9K.gif?s=128&g=1", "display_name": "PaperBirdMaster", "link": "https://stackoverflow.com/users/499359/paperbirdmaster"}, "edited": false, "score": 0, "creation_date": 1453916585, "post_id": 35044132, "comment_id": 57812935, "body": "@PaperBirdMaster I think it is possible to &quot;split&quot; the type like you say, because of the template deduction rules."}], "tags": [], "owner": {"reputation": 9690, "user_id": 1707560, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/8VK4M.jpg?s=128&g=1", "display_name": "imreal", "link": "https://stackoverflow.com/users/1707560/imreal"}, "is_accepted": false, "score": 1, "last_activity_date": 1453915776, "creation_date": 1453915776, "answer_id": 35044132, "question_id": 35043772, "link": "https://stackoverflow.com/questions/35043772/weird-pointer-to-member-function-syntax/35044132#35044132", "title": "Weird pointer to member function syntax", "body": "<p>Try this instead:</p>\n\n<pre><code>constexpr void my_test(void (S::*)()) {}\n</code></pre>\n\n<p>That is the correct way to declare a parameter typed pointer to member function of <code>S</code> returning <code>void</code> with no parameters.</p>\n\n<p><a href=\"http://ideone.com/EqfYmb\" rel=\"nofollow\">http://ideone.com/EqfYmb</a></p>\n"}], "owner": {"reputation": 11552, "user_id": 499359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Xrx9K.gif?s=128&g=1", "display_name": "PaperBirdMaster", "link": "https://stackoverflow.com/users/499359/paperbirdmaster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1453915776, "creation_date": 1453914759, "last_edit_date": 1453915571, "question_id": 35043772, "link": "https://stackoverflow.com/questions/35043772/weird-pointer-to-member-function-syntax", "title": "Weird pointer to member function syntax", "body": "<p>I understand how to declare the type of a function:</p>\n\n<pre><code>typedef void (typedef_void_f)(); // typedef_void_f is void()\nusing alias_void_f     = void(); // alias_void_f is void()\n</code></pre>\n\n<p>And it can be used to declare function pointers:</p>\n\n<pre><code>void function() { std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; '\\n'; }\n\ntypedef_void_f *a = function; // pointer to void()\nalias_void_f   *b = function; // pointer to void()\n</code></pre>\n\n<p>For member function pointers the syntax is slightly more complicated:</p>\n\n<pre><code>struct S { void function() { std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; '\\n'; } };\n\ntypedef void (S::*typedef_void_m_f)();\nusing  alias_void_m_f = void (S::*)();\n\ntypedef_void_m_f c = &amp;S::function; // pointer to S void() member function\nalias_void_m_f   d = &amp;S::function; // pointer to S void() member function\n</code></pre>\n\n<p>This is my understanding of function pointers in C++ and I thought that it was enough.</p>\n\n<p>But in the <a href=\"http://open-std.org/JTC1/SC22/WG21/docs/papers/2015/p0172r0.html\" rel=\"nofollow\">p0172r0 technical paper</a> I've found a syntax that I'm not familiar:</p>\n\n<pre><code>struct host {\n   int function() const;\n};\n\ntemplate &lt;typename TYPE&gt;\nconstexpr bool test(TYPE host::*) { // &lt;---- What is this??\n    return is_same_v&lt;TYPE, int() const&gt;;\n}\n\nconstexpr auto member = &amp;host::function;\n\ntest(member);\n</code></pre>\n\n<p>As I understand the code, the <code>test</code> function <em>splits</em> the type of the function from the type of the object where the function belongs, so in the template <code>test</code> function the <code>TYPE</code> template parameter would be <code>void()</code> but if I try the following:</p>\n\n<pre><code>void my_test(void() S::*) {}\n\nmy_test(&amp;S::function);\n</code></pre>\n\n<p>I get a bunch of syntax errors:</p>\n\n<blockquote>\n<pre><code>error: variable or field 'my_test' declared void\n void my_test(void() S::*) {}\n                   ^\nerror: expected ')' before 'S'\n void my_test(void() S::*) {}\n                     ^\nerror: 'my_test' was not declared in this scope\n     my_test(&amp;S::function);\n</code></pre>\n</blockquote>\n\n<p>So is obvious that I'm not understanding the p0172r0's <code>test</code> function syntax.</p>\n\n<p>Can someone explain the details of the <code>template &lt;typename TYPE&gt; constexpr bool test(TYPE host::*)</code> syntax?</p>\n"}, {"tags": ["c++", "windows", "service", "macros"], "comments": [{"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1453945378, "post_id": 35043542, "comment_id": 57827058, "body": "Unlikely to be CPU unless the system is running flat out already.  What is the macro actually doing?"}, {"owner": {"reputation": 157, "user_id": 803972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afb3395c844618b46e7dd605248200a3?s=128&d=identicon&r=PG", "display_name": "Graphic Equaliser", "link": "https://stackoverflow.com/users/803972/graphic-equaliser"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1453975675, "post_id": 35043542, "comment_id": 57839880, "body": "The CPU maxes out a core as it performs the macro. It reads in some data from a database and does some heavy processing to put it into human-readable form into a plain text output file (CSV format). You can see it read bytes using task manager, and it reads them in blocks of 3 or 4KBytes, with the occasional burst to 400-500KBytes at a time every 5 seconds. On the faster platform, these bursts occur every second."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 1, "creation_date": 1454011548, "post_id": 35043542, "comment_id": 57864898, "body": "If it maxes out a single core in either scenario then clearly the process isn&#39;t being CPU throttled.  Perhaps Windows 7 is power saving more aggressively?  The CPU core running at low frequency is the only reasonable explanation I can think of for 100%-for-eighteen-seconds in one scenario giving you the same amount of actual computation as 100%-for-six-seconds in the other scenario."}, {"owner": {"reputation": 157, "user_id": 803972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afb3395c844618b46e7dd605248200a3?s=128&d=identicon&r=PG", "display_name": "Graphic Equaliser", "link": "https://stackoverflow.com/users/803972/graphic-equaliser"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1454062414, "post_id": 35043542, "comment_id": 57885697, "body": "Perhaps it is the power scheme used. A service has no logged-in user profile to look up which power profile to use, hence, it may be using the default &quot;Balanced&quot; one, or a more conservative one. Does anyone know anything more about the power scheme a Windows service selects to use?"}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1454062832, "post_id": 35043542, "comment_id": 57885979, "body": "AFAIK, the currently active power scheme affects the entire computer, not individual processes."}, {"owner": {"reputation": 157, "user_id": 803972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afb3395c844618b46e7dd605248200a3?s=128&d=identicon&r=PG", "display_name": "Graphic Equaliser", "link": "https://stackoverflow.com/users/803972/graphic-equaliser"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1454327056, "post_id": 35043542, "comment_id": 57979064, "body": "More research on this problem has yielded the fact that it is the service (and any child processes it launches) that is slow. I coded the service to run the same code the macro was running on the same data and then got that same code to run when one of my GUI apps started. The time difference is C:\\KFWS\\scripts\\viewdbfwinq.exe -q1 587 records reported in 4.425 seconds. C:\\KFWS\\scripts\\UsersService.exe 587 records reported in 18.092 seconds."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 1, "creation_date": 1454355138, "post_id": 35043542, "comment_id": 57997590, "body": "What happens if you run <code>psexec -s \\\\127.0.0.1 viewdbfwingq.exe -q1</code> ?  (The psexec tool can be downloaded from the MS web site.)"}, {"owner": {"reputation": 157, "user_id": 803972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afb3395c844618b46e7dd605248200a3?s=128&d=identicon&r=PG", "display_name": "Graphic Equaliser", "link": "https://stackoverflow.com/users/803972/graphic-equaliser"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1454423572, "post_id": 35043542, "comment_id": 58030659, "body": "Useful looking suite of apps there. In the meantime, I solved my issue - see answer below."}], "answers": [{"comments": [{"owner": {"reputation": 157, "user_id": 803972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afb3395c844618b46e7dd605248200a3?s=128&d=identicon&r=PG", "display_name": "Graphic Equaliser", "link": "https://stackoverflow.com/users/803972/graphic-equaliser"}, "edited": false, "score": 0, "creation_date": 1453975878, "post_id": 35044873, "comment_id": 57840032, "body": "I already tried the priority boost flag and it made no difference. What surprises me is that nobody has researched this before, considering there are loads of complaints on the net about how going from XP to Win7, or Windows Server 2003 to Windows Server 2008 R2 has slowed down their operations. I reckon it could be something to do with this. Perhaps Microsoft foresaw a raft of new services being added to their latest OS offerings, and throttled service performance so as not to make the GUI apps appear sluggish."}, {"owner": {"reputation": 3123, "user_id": 2460798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb86705efc70171089a2ec34b6c856b4?s=128&d=identicon&r=PG", "display_name": "\u03a7p\u1e98", "link": "https://stackoverflow.com/users/2460798/%ce%a7p%e1%ba%98"}, "reply_to_user": {"reputation": 157, "user_id": 803972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afb3395c844618b46e7dd605248200a3?s=128&d=identicon&r=PG", "display_name": "Graphic Equaliser", "link": "https://stackoverflow.com/users/803972/graphic-equaliser"}, "edited": false, "score": 0, "creation_date": 1454022871, "post_id": 35044873, "comment_id": 57870902, "body": "Someone has researched this in depth. Mark Russinovich in the book I mentioned. BTW, I wasn&#39;t talking about a flag to CreateProcess, rather I was talking about a behavior of the scheduler."}], "tags": [], "owner": {"reputation": 3123, "user_id": 2460798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb86705efc70171089a2ec34b6c856b4?s=128&d=identicon&r=PG", "display_name": "\u03a7p\u1e98", "link": "https://stackoverflow.com/users/2460798/%ce%a7p%e1%ba%98"}, "is_accepted": false, "score": 0, "last_activity_date": 1453918093, "creation_date": 1453918093, "answer_id": 35044873, "question_id": 35043542, "link": "https://stackoverflow.com/questions/35043542/process-spawned-by-windows-service-runs-3-to-4-times-more-slowly-than-spawned-by/35044873#35044873", "title": "Process spawned by Windows service runs 3 to 4 times more slowly than spawned by GUI", "body": "<p>It will be very difficult to give an authoritative answer to this question without a lot more details.</p>\n\n<p>However a factor to consider is the Windows foreground priority boost described <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms684828(v=vs.85).aspx\" rel=\"nofollow\">here</a>. </p>\n\n<p>You may want to read Russinovich's book chapter on processes/threads, in particular the stuff on scheduling. You can find PDFs of the book online (there are two that together make up the whole book). I believe the latest (or next to latest) edition covers changes in Win 7.</p>\n"}, {"tags": [], "owner": {"reputation": 157, "user_id": 803972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afb3395c844618b46e7dd605248200a3?s=128&d=identicon&r=PG", "display_name": "Graphic Equaliser", "link": "https://stackoverflow.com/users/803972/graphic-equaliser"}, "is_accepted": true, "score": 1, "last_activity_date": 1454424552, "creation_date": 1454424552, "answer_id": 35156586, "question_id": 35043542, "link": "https://stackoverflow.com/questions/35043542/process-spawned-by-windows-service-runs-3-to-4-times-more-slowly-than-spawned-by/35156586#35156586", "title": "Process spawned by Windows service runs 3 to 4 times more slowly than spawned by GUI", "body": "<p>I isolated code to reproduce this, and it eventually boiled down to calls to the database engine to lookup a field definition (TTable methods FindField and FieldByName). These took much longer on a table with a lot of fields when run on a service app instead of a GUI app. I devised my own method to store mappings from field names to field definitions, since I always opened my databases with a central routine. I used an array of strings indexed by the Tag property on each table (common to all BCB objects), where each string was composed of ;fieldname;fieldnumber; pairs, and then did a .Pos of the field name to get the field number. fieldnumber is zero-padded to a width of 4. This only uses a few hundred KB of RAM for the entire app and all of its databases. Once in place, the service app runs at the same speed as the GUI app. The only thing I can think of that may explain this, is that service apps have a fixed heap (I think I read 48MBytes somewhere by default) for themselves and any process they spawn. With lots of fields, the memory overflowed and had to thrash to VM on the disk. The GUI app had no such limit and was able to do the lookup entirely in real memory. However, I maybe completely wrong. One thing I have learnt is that FieldByName and FindField are expensive TTable functions to call, and I have now supplanted them all with my own mechanism which seems to work much better and much faster. Here is my lookup routine :-</p>\n\n<pre><code>AnsiString fldsbytag[MXSPRTBLS+100];\n\nTField *fldfromtag(TAdsTable *tbl,AnsiString fld)\n{\n  int fi=fldsbytag[tbl-&gt;Tag].Pos(\";\"+fld.UpperCase()+\";\"),gi;\n  if (fi==0) return tbl-&gt;FindField(fld);\n  gi=StrToIntDef(fldsbytag[tbl-&gt;Tag].SubString(fi+fld.Length()+2,4),-1);\n  if (gi&lt;0 || gi&gt;=tbl-&gt;Fields-&gt;Count) return tbl-&gt;FindField(fld);\n  return tbl-&gt;Fields-&gt;Fields[gi];\n}\n</code></pre>\n"}], "owner": {"reputation": 157, "user_id": 803972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afb3395c844618b46e7dd605248200a3?s=128&d=identicon&r=PG", "display_name": "Graphic Equaliser", "link": "https://stackoverflow.com/users/803972/graphic-equaliser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 1, "accepted_answer_id": 35156586, "answer_count": 2, "score": 1, "last_activity_date": 1454424552, "creation_date": 1453913988, "last_edit_date": 1453914399, "question_id": 35043542, "link": "https://stackoverflow.com/questions/35043542/process-spawned-by-windows-service-runs-3-to-4-times-more-slowly-than-spawned-by", "title": "Process spawned by Windows service runs 3 to 4 times more slowly than spawned by GUI", "body": "<p>I have written a service application in Borland C++. It works fine. In the ServiceStart(TService *Sender,bool &amp;Started) routine, I call mjwinrun to launch a process which picks up and processes macros. This process has no UI and any errors are logged to a file. It continues to run, until the server is restarted, shut down, or the process is terminated using Task Manager. Here is mjwinrun :-</p>\n\n<pre><code>int mjwinrun(AnsiString cmd)\n{\n  STARTUPINFO mjstupinf; PROCESS_INFORMATION mjprcinf;\n  memset(&amp;mjstupinf,0,sizeof(STARTUPINFO)); mjstupinf.cb=sizeof(STARTUPINFO);\n  if (!CreateProcess(NULL,cmd.c_str(),NULL,NULL,TRUE,0,NULL,GetCurrentDir().c_str(),&amp;mjstupinf,&amp;mjprcinf))\n  {\n    LogMessage(\"Could not launch \"+cmd); return -1;\n  }\n  CloseHandle(mjprcinf.hThread); CloseHandle(mjprcinf.hProcess);\n  return mjprcinf.dwProcessId;\n}\n</code></pre>\n\n<p>cmd is the command line for launching the macro queue processor. I used a macro that is CPU/Memory intensive and got it to write its timings to a file. Here is what I found :-</p>\n\n<p>1) If the macro processor is launched from the command line within a logged on session, no matter what Windows core it is running under, the macro is completed in 6 seconds.</p>\n\n<p>2) If the macro processor is launched from a service starting up on Vista core or earlier (using mjwinrun above), the macro is completed in 6 seconds.</p>\n\n<p>3) If the macro processor is launched from a service starting up on Windows 7 core or later (using mjwinrun above), the macro is completed in more than 18 seconds.</p>\n\n<p>I have tried all the different flags for CreateProcess and none of them make a difference. I have tried all different accounts for the service and that makes no difference. I tried setting all of the various priorities for tasks, I/O and Page, but they all make no difference. It's as if the service's spawned processes are somehow throttled, not in I/O terms, but in CPU/memory usage terms. Any ideas what changed in Windows 7 onwards?</p>\n"}, {"tags": ["c++", "opencv", "kalman-filter"], "comments": [{"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 2, "creation_date": 1453913546, "post_id": 35043320, "comment_id": 57810872, "body": "Have you tried by copy assignment? <code>sAsp.KF = cv::KalmanFilter(4, 2, 0);</code>"}, {"owner": {"reputation": 193, "user_id": 3220295, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88ad8d28876ce85aed57bafa6c9d32ce?s=128&d=identicon&r=PG&f=1", "display_name": "Karthik_elan", "link": "https://stackoverflow.com/users/3220295/karthik-elan"}, "reply_to_user": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1453916273, "post_id": 35043320, "comment_id": 57812710, "body": "@JamesAdkison Yes, it is working. Thank you very much."}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 1, "last_activity_date": 1453913727, "creation_date": 1453913727, "answer_id": 35043431, "question_id": 35043320, "link": "https://stackoverflow.com/questions/35043320/kalman-filter-inside-a-struct-and-cannot-initialize-it/35043431#35043431", "title": "Kalman filter inside a struct and cannot initialize it", "body": "<p><code>sAsp.KF(4, 2, 0);</code> cannot be used as <code>KF</code> was default constructed when you do <code>sAsparagus sAsp;</code>.  You cannot call the constructor on an already constructed object.  You can assign to <code>KF</code> with a temporary <code>KalmanFilter</code> though like:</p>\n\n<pre><code>sAsp.KF = cv::KalmanFilter(4, 2, 0);\n</code></pre>\n\n<p>Or you could use <code>init()</code> like</p>\n\n<pre><code>sAsp.KF.init(4, 2, 0);\n</code></pre>\n"}], "owner": {"reputation": 193, "user_id": 3220295, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88ad8d28876ce85aed57bafa6c9d32ce?s=128&d=identicon&r=PG&f=1", "display_name": "Karthik_elan", "link": "https://stackoverflow.com/users/3220295/karthik-elan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 35043431, "answer_count": 1, "score": 0, "last_activity_date": 1453913727, "creation_date": 1453913438, "last_edit_date": 1495542661, "question_id": 35043320, "link": "https://stackoverflow.com/questions/35043320/kalman-filter-inside-a-struct-and-cannot-initialize-it", "title": "Kalman filter inside a struct and cannot initialize it", "body": "<p>I want to track multiple objects using Kalman Filter. So, what I am doing is, I am using a struct to define the object's properties and also a Kalman Filter to track its points. (As follows)</p>\n\n<pre><code>struct sAsparagus\n    {\n        int iId;\n        int iFrameId;\n        int iWidth;\n        int iHeight;\n        int iX;\n        int iY;\n        int iZ;\n        cv::KalmanFilter KF; // Here I am defining the Kalman filter and cannot initialize.\n    };\n</code></pre>\n\n<p>Then in a for loop, I am trying to assign some values to these properties.</p>\n\n<pre><code>   for (CvBlobs::const_iterator it = blobs.begin(); it !=blobs.end();++it)\n    {\n        sAsparagus sAsp;\n        sAsp.iFrameId = iCounter;\n\n        sAsp.iWidth = (it-&gt;second-&gt;maxx - it-&gt;second-&gt;minx);\n        sAsp.iHeight = (it-&gt;second-&gt;maxy - it-&gt;second-&gt;miny);\n        sAsp.iX = it-&gt;second-&gt;centroid.x;\n        sAsp.iY = it-&gt;second-&gt;centroid.y;\n        sAsp.KF(4, 2, 0);   //Here I am getting an error\n        vAspElements.push_back(sAsp);\n    }\n</code></pre>\n\n<p>When I run, I get an error as follows.</p>\n\n<pre><code>  no match for call to \u2018(cv::KalmanFilter) (int, int, int)\u2019\nsAsp.KF(4, 2, 0);\n</code></pre>\n\n<p>How can I initialize my Kalman filter here ? Is this approach right ? I also came to see here (<a href=\"https://stackoverflow.com/questions/20739340/opencv-kalman-filter-initialization-error\">OpenCV Kalman Filter Initialization Error</a>) some approach for multiple objects tracking using Kalman filter. Where am I going wrong ?</p>\n"}, {"tags": ["c++", "c++11", "c++14", "constexpr"], "comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1453913462, "post_id": 35043225, "comment_id": 57810807, "body": "@NathanOliver: Related, but different rules apply to functions vs classes.  This is not a duplicate."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1453913514, "post_id": 35043225, "comment_id": 57810846, "body": "@BenVoigt That is why I didn&#39;t actual vote.  The answer should work though."}], "answers": [{"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 2, "creation_date": 1453913984, "post_id": 35043315, "comment_id": 57811181, "body": "<code>extern inline</code> is fine, but it&#39;s <code>extern</code> is by default so superfluous."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 7, "last_activity_date": 1453914190, "last_edit_date": 1453914190, "creation_date": 1453913409, "answer_id": 35043315, "question_id": 35043225, "link": "https://stackoverflow.com/questions/35043225/forward-declaring-a-constexpr-function-in-a-header/35043315#35043315", "title": "Forward declaring a constexpr function in a header", "body": "<p>It's wrong. <a href=\"http://en.cppreference.com/w/cpp/language/constexpr\" rel=\"noreferrer\"><code>constexpr</code></a> implies that the function is inline. Inline functions must be defined in every translation unit where it's used. If you include that header in a translation unit other than <code>source.cpp</code> and use the function, that translation unit lacks the definition.</p>\n\n<p>So, the solution is to move the implementation to the header. No need to worry about multiple definition, since the function is inline.</p>\n\n<p>It doesn't technically need to be in the same file, but because the definition must be in every file that uses the function, it's simplest to define it in the same header.</p>\n"}], "owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2587, "favorite_count": 0, "closed_date": 1453913508, "accepted_answer_id": 35043315, "answer_count": 1, "score": 4, "last_activity_date": 1453914190, "creation_date": 1453913158, "question_id": 35043225, "link": "https://stackoverflow.com/questions/35043225/forward-declaring-a-constexpr-function-in-a-header", "closed_reason": "Duplicate", "title": "Forward declaring a constexpr function in a header", "body": "<p>Say I have the following files. Is this invalid C++ (linker chokes, so yeah) or is it a mistake in my syntax? Must a forward declaration of a constexpr function be in the same file as its definition?</p>\n\n<p><strong>header.h</strong></p>\n\n<pre><code>extern constexpr int fun(int);\n</code></pre>\n\n<p><strong>source.cpp</strong></p>\n\n<pre><code>constexpr int fun(int x) \n{\n    return x * 2; \n}\n</code></pre>\n"}, {"tags": ["c++", "zlib", "compression", "null-terminated"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1453914032, "post_id": 35043118, "comment_id": 57811215, "body": "If you&#39;re working with binary data, you shouldn&#39;t use <code>string</code> or the formatted stream operators."}, {"owner": {"reputation": 150, "user_id": 5402648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4efaff6d4199d7c3b3bbcf998cc17eb7?s=128&d=identicon&r=PG&f=1", "display_name": "bseyeph", "link": "https://stackoverflow.com/users/5402648/bseyeph"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1453914219, "post_id": 35043118, "comment_id": 57811335, "body": "Ok, what should I use then?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1453914726, "post_id": 35043118, "comment_id": 57811707, "body": "Probably <code>vector&lt;char&gt;</code> and <code>vector::insert</code>."}, {"owner": {"reputation": 150, "user_id": 5402648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4efaff6d4199d7c3b3bbcf998cc17eb7?s=128&d=identicon&r=PG&f=1", "display_name": "bseyeph", "link": "https://stackoverflow.com/users/5402648/bseyeph"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1453915099, "post_id": 35043118, "comment_id": 57811928, "body": "I can&#39;t set zs.next_out to a vector. It expects an unsigned char* which I think is my problem due to them being null terminated."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1453916486, "post_id": 35043118, "comment_id": 57812857, "body": "You replace the string with a vector, not the buffer. And the buffer isn&#39;t zero-terminated in any way. It&#39;s very likely that binary data will contain zero bytes and mess up your string, but they&#39;re not terminators."}], "answers": [{"comments": [{"owner": {"reputation": 150, "user_id": 5402648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4efaff6d4199d7c3b3bbcf998cc17eb7?s=128&d=identicon&r=PG&f=1", "display_name": "bseyeph", "link": "https://stackoverflow.com/users/5402648/bseyeph"}, "edited": false, "score": 0, "creation_date": 1453916559, "post_id": 35043993, "comment_id": 57812911, "body": "I thought it&#39;d be something simple like that. Thanks works like a charm."}], "tags": [], "owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "is_accepted": true, "score": 1, "last_activity_date": 1453915327, "creation_date": 1453915327, "answer_id": 35043993, "question_id": 35043118, "link": "https://stackoverflow.com/questions/35043118/c-zlib-gzipstream-decompression-null-terminated/35043993#35043993", "title": "C++ ZLib GZipStream Decompression NULL terminated", "body": "<p><code>string</code> is not a problem in itself, it can handle binary data.\nIt is this line that assumes a zero-terminated c-string:</p>\n\n<pre><code>tmpString &lt;&lt; outbuffer;\n</code></pre>\n\n<p>Replace it with</p>\n\n<pre><code>tmpString.append(outbuffer, bufferSize);\n</code></pre>\n"}], "owner": {"reputation": 150, "user_id": 5402648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4efaff6d4199d7c3b3bbcf998cc17eb7?s=128&d=identicon&r=PG&f=1", "display_name": "bseyeph", "link": "https://stackoverflow.com/users/5402648/bseyeph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 592, "favorite_count": 1, "accepted_answer_id": 35043993, "answer_count": 1, "score": 1, "last_activity_date": 1453916649, "creation_date": 1453912916, "last_edit_date": 1453916649, "question_id": 35043118, "link": "https://stackoverflow.com/questions/35043118/c-zlib-gzipstream-decompression-null-terminated", "title": "C++ ZLib GZipStream Decompression NULL terminated", "body": "<p>There are a lot of questions out there revolving around zlib and GZipStreams but none that I've found answer this question. I'm using a C# GZipStream to send compressed data to a client. It reads the compressed data in entirely then tries to decompress it. However, each time inflate() is called in the loop it only gets the NULL terminated string. When sending a binary this is a pretty huge problem.</p>\n\n<p>Before I show you code, I just wanted to say that if I write the received compressed bytes to a .gz file and use gzFile/gzopen/gzread/gzclose everything works perfectly. That means all the data is coming in properly. I want to read in the compressed data, decompress it in memory, and have the contents in a variable.</p>\n\n<p>I think the issue is that inflate() is writing to a char* which is NULL terminated. I just don't know how to get it to be a string. I do fully anticipate this being a major oversight and a simple fix.  Thanks for any help!</p>\n\n<p>Here's the decompression code:</p>\n\n<pre><code>bool DecompressString(const std::string&amp; message, std::string&amp; dMsg)\n{\n    int bufferSize = 512;\n    int messageSize = message.size() + 1;\n    //decompress string\n    z_stream zs;\n    memset(&amp;zs, 0, sizeof(zs));\n\n    zs.zalloc = Z_NULL;\n    zs.zfree = Z_NULL;\n    zs.opaque = Z_NULL;\n    zs.next_in = (Bytef*)message.data();\n    zs.avail_in = messageSize;\n\n    int ret = Z_OK;\n    unsigned char* outbuffer = new unsigned char[bufferSize];\n\n    if (inflateInit2(&amp;zs, 16+MAX_WBITS) == Z_OK)\n    {\n        do {\n            zs.next_out = outbuffer;\n            zs.avail_out = bufferSize;\n\n            ret = inflate(&amp;zs, Z_NO_FLUSH);\n\n            if (ret &lt; 0) return false;\n            std::stringstream tmpString;\n            tmpString &lt;&lt; outbuffer;\n            if (dMsg.size() &lt; zs.total_out) {\n                dMsg.append(tmpString.str().substr(0, zs.total_out - dMsg.size()));\n            }\n        } while (ret == Z_OK);\n    }\n\n    inflateEnd(&amp;zs);\n    delete[] outbuffer;\n    //\"\\n&lt;EOF&gt;\" is appended by sender to signify the end of file. This removes it\n    if (dMsg.find(\"\\n&lt;EOF&gt;\") != -1)\n        dMsg = dMsg.substr(0, dMsg.find(\"\\n&lt;EOF&gt;\"));\n\n    return true;\n}\n</code></pre>\n\n<p>Working code from solution:</p>\n\n<pre><code>bool DecompressString(const std::string&amp; message, std::string&amp; dMsg)\n{\n    int bufferSize = 512;\n    int messageSize = message.size() + 1;\n    //decompress string\n    z_stream zs;\n    memset(&amp;zs, 0, sizeof(zs));\n\n    zs.zalloc = Z_NULL;\n    zs.zfree = Z_NULL;\n    zs.opaque = Z_NULL;\n    zs.next_in = (Bytef*)message.data();\n    zs.avail_in = messageSize;\n\n    int ret = Z_OK;\n    unsigned char* outbuffer = new unsigned char[bufferSize];\n\n    if (inflateInit2(&amp;zs, 16+MAX_WBITS) == Z_OK)\n    {\n        // get the decompressed bytes blockwise using repeated calls to inflate\n        do {\n            zs.next_out = outbuffer;\n            zs.avail_out = bufferSize;\n\n            ret = inflate(&amp;zs, Z_NO_FLUSH);\n\n            if (ret &lt; 0) return false;\n            //Here's the difference\n            if (dMsg.size() &lt; zs.total_out)\n                dMsg.append(reinterpret_cast&lt;char*&gt;(outbuffer), bufferSize);\n            //End\n        } while (ret == Z_OK);\n    }\n\n    inflateEnd(&amp;zs);\n    delete[] outbuffer;\n\n    if (dMsg.find(\"\\n&lt;EOF&gt;\") != -1)\n        dMsg = dMsg.substr(0, dMsg.find(\"\\n&lt;EOF&gt;\"));\n\n    return true;\n}\n</code></pre>\n"}, {"tags": ["c++", "palindrome"], "comments": [{"owner": {"reputation": 5590, "user_id": 3686755, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/976c04703d1b52c15d067c0556d5064c?s=128&d=identicon&r=PG", "display_name": "neshkeev", "link": "https://stackoverflow.com/users/3686755/neshkeev"}, "edited": false, "score": 1, "creation_date": 1453913110, "post_id": 35043096, "comment_id": 57810532, "body": "<code>2 1 1</code> is not a palindrom, is it?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 5590, "user_id": 3686755, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/976c04703d1b52c15d067c0556d5064c?s=128&d=identicon&r=PG", "display_name": "neshkeev", "link": "https://stackoverflow.com/users/3686755/neshkeev"}, "edited": false, "score": 0, "creation_date": 1453913451, "post_id": 35043096, "comment_id": 57810796, "body": "@zaratustra the 2 is for the size of the array.  the actual comparison happens with the <code>1 1</code> part."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1453915452, "post_id": 35043096, "comment_id": 57812158, "body": "You have a memory leak.  If you write <code>std::vector&lt;int&gt; input(n);</code> (and make the other necessary changes) it will go away.  You can also then write <code>bool is_palindrome(const std::vector&lt;int&gt;&amp; input)</code> and don&#39;t have to pass the size separately.  As a general rule, avoid using a naked <code>new</code> - always encapsulated your memory allocation in <code>std::make_unique</code>, <code>std::vector</code>, or <code>std::make_shared</code> (in the rare cases where you need the latter)."}, {"owner": {"reputation": 6911, "user_id": 2970186, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Vo0Wc.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2970186/daniel"}, "edited": false, "score": 0, "creation_date": 1453917378, "post_id": 35043096, "comment_id": 57813493, "body": "I posted a <a href=\"http://codereview.stackexchange.com/questions/118074/determining-if-a-sequence-is-a-palindrome\">question on codereview</a> with a palindrome identification algorithm if you are interested."}], "answers": [{"tags": [], "owner": {"reputation": 6911, "user_id": 2970186, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Vo0Wc.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2970186/daniel"}, "is_accepted": false, "score": 2, "last_activity_date": 1453913135, "creation_date": 1453913135, "answer_id": 35043214, "question_id": 35043096, "link": "https://stackoverflow.com/questions/35043096/wrong-answer-calls-on-palindrome/35043214#35043214", "title": "Wrong answer calls on palindrome", "body": "<p>Arrays in C++ are zero indexed, as <code>i</code> is initialised to <code>0</code>, on the first iteration of the loop <code>input[numOfSlots-i]</code> is out of bounds. </p>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 2, "last_activity_date": 1453913174, "creation_date": 1453913174, "answer_id": 35043233, "question_id": 35043096, "link": "https://stackoverflow.com/questions/35043096/wrong-answer-calls-on-palindrome/35043233#35043233", "title": "Wrong answer calls on palindrome", "body": "<p>You are going one past then end of the array in <code>if (input[i] != input[numOfSlots-i])</code>.  When <code>i == 0</code> then <code>input[numOfSlots-i]</code> becomes <code>input[numOfSlots]</code> which in this case is <code>input[2]</code>.  Since the last valid index of <code>input</code> is 1 you are comparing against garbage.  You should have</p>\n\n<pre><code>if (input[i] != input[numOfSlots-i - 1])\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 4859802, "user_type": "registered", "accept_rate": 30, "profile_image": "https://graph.facebook.com/835676436507610/picture?type=large", "display_name": "\uc724\uc131\ud544", "link": "https://stackoverflow.com/users/4859802/%ec%9c%a4%ec%84%b1%ed%95%84"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 35043233, "answer_count": 2, "score": -1, "last_activity_date": 1453913174, "creation_date": 1453912872, "question_id": 35043096, "link": "https://stackoverflow.com/questions/35043096/wrong-answer-calls-on-palindrome", "title": "Wrong answer calls on palindrome", "body": "<p>I coded palindrome program.\nI think this code is right especially is_palindrome procedure.\nBut I don't know why this answers wrong.</p>\n\n<p>Because when I input 2 1 1, return must be This is palindrome.\nBut it answers the other.  </p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nbool is_palindrome(int input[], int numOfSlots);\n\nint main(void) {\n    int n;\n    cin &gt;&gt; n;\n    int *input = new int[n]; // A dynamic array with n slots\n    for (int i = 0; i &lt; n; i++) {\n        cin &gt;&gt; input[i];\n    }\n\n    if (is_palindrome(input, n) == true) {\n        cout &lt;&lt; \"This is a palindrome.\";\n    }\n    else {\n        cout &lt;&lt; \"This is NOT a palindrome.\";\n    }\n    return 0;\n}\n\nbool is_palindrome(int input[], int numOfSlots) {\n    int i = 0;\n    while (i &lt; numOfSlots/2)\n    {\n        if (input[i] != input[numOfSlots-i])\n            return false;\n        i++;\n    }\n    return true;\n}\n</code></pre>\n"}, {"tags": ["c++", "objective-c", "xcode", "memory-management", "instruments"], "answers": [{"comments": [{"owner": {"reputation": 1542, "user_id": 1765629, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0c59b6133de620bda273b7033730ad10?s=128&d=identicon&r=PG", "display_name": "endavid", "link": "https://stackoverflow.com/users/1765629/endavid"}, "edited": false, "score": 0, "creation_date": 1472600019, "post_id": 35064197, "comment_id": 65814355, "body": "Xcode 7.3.1 and iOS 9.3.4 here. It was working perfectly and it stopped all of a sudden. After I restarted the phone and plugged it again, Xcode gave me a &quot;unknown error occurred&quot; after trying to Profile again. I then restarted Xcode and next time it worked."}], "tags": [], "owner": {"reputation": 76, "user_id": 5852476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7adcbc837542160f4428ffd1b8721cb9?s=128&d=identicon&r=PG&f=1", "display_name": "qiaozhiguang", "link": "https://stackoverflow.com/users/5852476/qiaozhiguang"}, "is_accepted": true, "score": 6, "last_activity_date": 1454002655, "last_edit_date": 1454002655, "creation_date": 1453991446, "answer_id": 35064197, "question_id": 35043077, "link": "https://stackoverflow.com/questions/35043077/xcode-7-2-unable-to-view-memory-profiling-info-device-is-offline-in-instrument/35064197#35064197", "title": "XCode 7.2 unable to view memory profiling info / Device is offline in instruments", "body": "<p>You can check whether your project's Zombie Objects are enabled.</p>\n\n<p>Open: </p>\n\n<blockquote>\n  <p>Product -> Scheme -> Edit scheme -> run-Diagnostics -> Enable Zombie Objects</p>\n</blockquote>\n\n<p>If open please close then run.</p>\n\n<p><a href=\"https://i.stack.imgur.com/lzoto.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/lzoto.jpg\" alt=\"This is the screenshot Picture\"></a></p>\n\n<p>EDIT: The issue is twofold, the \"unable to profile on device is an iOS 9.x.x bug, here's a support thread: <a href=\"https://forums.developer.apple.com/thread/16242\" rel=\"noreferrer\">https://forums.developer.apple.com/thread/16242</a> . Here are the steps one of the posters suggested:</p>\n\n<ul>\n<li>Power down the device completely.</li>\n<li>Unplug the device from your Mac.</li>\n<li>Close Xcode and Instruments. </li>\n<li>Restart the device &amp; plug it back in\nonce it has restarted.</li>\n<li>Re-launch Xcode. </li>\n<li>Here, my device was disabled\nand Xcode indicated that the device was not available for use.</li>\n<li>Clean,\nBuild, Profile (Command-I).</li>\n<li>When Instruments is launched the device\nwas enabled. </li>\n<li>Upon selecting it, a message was displayed with the\ntitle \"Enable this device for development?\" and message \"This will\nopen Xcode and enable this device for development.\"</li>\n<li>Click \"Open\nXcode\". </li>\n<li>Here I did not notice anything being displayed - no\nadditional messages indicating anything had been done or that the\ndevice was or was not available for development. </li>\n<li>Opening the Devices\nwindow, the device appeared to be available. Here I was able to\nselect the device in Instruments and profile it. I was also again\nable to delete installed apps from the Devices window.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 437, "user_id": 3438932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f95b0df7a305d5897d6afeb637e4588?s=128&d=identicon&r=PG&f=1", "display_name": "kanobius", "link": "https://stackoverflow.com/users/3438932/kanobius"}, "is_accepted": false, "score": 0, "last_activity_date": 1472661011, "creation_date": 1472661011, "answer_id": 39254716, "question_id": 35043077, "link": "https://stackoverflow.com/questions/35043077/xcode-7-2-unable-to-view-memory-profiling-info-device-is-offline-in-instrument/39254716#39254716", "title": "XCode 7.2 unable to view memory profiling info / Device is offline in instruments", "body": "<p>Desinstalling the app from the device and then profiling works for me. </p>\n"}], "owner": {"reputation": 41265, "user_id": 967484, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/nBS9m.jpg?s=128&g=1", "display_name": "Alex Stone", "link": "https://stackoverflow.com/users/967484/alex-stone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1624, "favorite_count": 1, "accepted_answer_id": 35064197, "answer_count": 2, "score": 2, "last_activity_date": 1472661011, "creation_date": 1453912825, "question_id": 35043077, "link": "https://stackoverflow.com/questions/35043077/xcode-7-2-unable-to-view-memory-profiling-info-device-is-offline-in-instrument", "title": "XCode 7.2 unable to view memory profiling info / Device is offline in instruments", "body": "<p>I'm running an iOS demo using an Objective C++ library (some .mm files) and would like to profile the app's memory usage with Instruments. However, I see that the debug tab does not show any memory information.</p>\n\n<p><a href=\"https://i.stack.imgur.com/bQqjP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bQqjP.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/TG0rR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TG0rR.png\" alt=\"enter image description here\"></a></p>\n\n<p>Attempting to profile the app in instruments shows my device, but it is grayed out and says it's offline</p>\n\n<p><a href=\"https://i.stack.imgur.com/B9mmH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/B9mmH.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>How can I fix my XCode to allow for memory debugging/profiling of that project?</strong> Does it have something to do with using an Objective C++ libraries?</p>\n"}, {"tags": ["c++", "c", "algorithm", "permutation"], "comments": [{"owner": {"reputation": 5590, "user_id": 3686755, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/976c04703d1b52c15d067c0556d5064c?s=128&d=identicon&r=PG", "display_name": "neshkeev", "link": "https://stackoverflow.com/users/3686755/neshkeev"}, "edited": false, "score": 0, "creation_date": 1453913030, "post_id": 35043068, "comment_id": 57810464, "body": "How do you define the transformation operation? is it just a \u0441ircular shift?"}, {"owner": {"reputation": 9495, "user_id": 1395740, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/793c4377313587d742fad6f069d92d89?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/1395740/nick"}, "reply_to_user": {"reputation": 5590, "user_id": 3686755, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/976c04703d1b52c15d067c0556d5064c?s=128&d=identicon&r=PG", "display_name": "neshkeev", "link": "https://stackoverflow.com/users/3686755/neshkeev"}, "edited": false, "score": 0, "creation_date": 1453913140, "post_id": 35043068, "comment_id": 57810559, "body": "@zaratustra The transformation is the set of swaps between two elements of the permutation."}, {"owner": {"reputation": 4826, "user_id": 193789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a17cc57e47435930a48f7c80bcd53863?s=128&d=identicon&r=PG", "display_name": "kebs", "link": "https://stackoverflow.com/users/193789/kebs"}, "edited": false, "score": 0, "creation_date": 1453913361, "post_id": 35043068, "comment_id": 57810741, "body": "Could the <a href=\"https://en.wikipedia.org/wiki/Hamming_distance\" rel=\"nofollow noreferrer\">Hamming distance</a> be related to your problem ?"}, {"owner": {"reputation": 14828, "user_id": 1377097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eFG0R.png?s=128&g=1", "display_name": "beaker", "link": "https://stackoverflow.com/users/1377097/beaker"}, "reply_to_user": {"reputation": 4826, "user_id": 193789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a17cc57e47435930a48f7c80bcd53863?s=128&d=identicon&r=PG", "display_name": "kebs", "link": "https://stackoverflow.com/users/193789/kebs"}, "edited": false, "score": 0, "creation_date": 1453913500, "post_id": 35043068, "comment_id": 57810837, "body": "@kebs Could be Hamming distance, could be <a href=\"https://en.wikipedia.org/wiki/Levenshtein_distance\" rel=\"nofollow noreferrer\">Levenshtein distance</a>, the OP could even be looking for <a href=\"https://en.wikipedia.org/wiki/Permutation_matrix\" rel=\"nofollow noreferrer\">permutation matrices</a>. The requirements are unclear."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1453915314, "post_id": 35043068, "comment_id": 57812059, "body": "This can help also: <a href=\"http://math.stackexchange.com/questions/1410088/how-to-determine-a-kind-of-distance-between-two-permutations\" title=\"how to determine a kind of distance between two permutations\">math.stackexchange.com/questions/1410088/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4440, "user_id": 5103294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4ac06d64a7ec4adc47bd3789f021894?s=128&d=identicon&r=PG&f=1", "display_name": "serhiyb", "link": "https://stackoverflow.com/users/5103294/serhiyb"}, "is_accepted": false, "score": 1, "last_activity_date": 1453913349, "last_edit_date": 1495541750, "creation_date": 1453913349, "answer_id": 35043294, "question_id": 35043068, "link": "https://stackoverflow.com/questions/35043068/difference-between-permutations/35043294#35043294", "title": "Difference between permutations", "body": "<p>Distance between permutations can be distance between lexicographic indexes of the permutations. </p>\n\n<p>How to find lexicographic index <a href=\"https://stackoverflow.com/questions/12146910/finding-the-lexicographic-index-of-a-permutation-of-a-given-array\">is</a> <a href=\"https://stackoverflow.com/questions/14013373/finding-the-index-of-a-given-permutation\">described</a> <a href=\"https://stackoverflow.com/questions/5131497/find-the-index-of-a-given-permutation-in-the-sorted-list-of-the-permutations-of\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 457, "user_id": 5616282, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/txOPP.png?s=128&g=1", "display_name": "Brandon", "link": "https://stackoverflow.com/users/5616282/brandon"}, "is_accepted": true, "score": 3, "last_activity_date": 1453914218, "last_edit_date": 1453914218, "creation_date": 1453913686, "answer_id": 35043416, "question_id": 35043068, "link": "https://stackoverflow.com/questions/35043068/difference-between-permutations/35043416#35043416", "title": "Difference between permutations", "body": "<p>There are a few different ways to define the difference between two sequences. To name a few:</p>\n\n<p><strong><a href=\"https://en.wikipedia.org/wiki/Hamming_distance\" rel=\"nofollow\">Hamming distance</a></strong>: the number of positions at which elements differ.</p>\n\n<pre><code>hamming(A, B)\n  B[1] is different than A[1] and B[3] is different than A[3]\n=&gt; 2\n</code></pre>\n\n<p><strong><a href=\"https://en.wikipedia.org/wiki/Levenshtein_distance\" rel=\"nofollow\">Levenshtein distance</a></strong>: the minimum number of modifications necessary to get from one sequence to another.</p>\n\n<pre><code>levenshtein(A, B)\n  replace B[1] with A[1] and replace B[3] with A[3]\n=&gt; 2\n</code></pre>\n\n<p><strong><a href=\"https://en.wikipedia.org/wiki/Damerau%E2%80%93Levenshtein_distance\" rel=\"nofollow\">Damerau\u2013Levenshtein distance</a></strong>: an extension of the former that takes into account transpositions.</p>\n\n<pre><code>damerau_levenshtein(A, B)\n  transpose B[3] with B[1]\n=&gt; 1\n</code></pre>\n\n<p>Based upon your given example, you are interested in tracking transpositions and therefore Damerau\u2013Levenshtein distance is your best bet. </p>\n"}], "owner": {"reputation": 9495, "user_id": 1395740, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/793c4377313587d742fad6f069d92d89?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/1395740/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 855, "favorite_count": 0, "closed_date": 1453915092, "accepted_answer_id": 35043416, "answer_count": 2, "score": 2, "last_activity_date": 1453914218, "creation_date": 1453912800, "last_edit_date": 1453913356, "question_id": 35043068, "link": "https://stackoverflow.com/questions/35043068/difference-between-permutations", "closed_reason": "Duplicate", "title": "Difference between permutations", "body": "<p>Is there a way to compute quantitatively the <em>distance</em> between two permutations?</p>\n\n<p>Suppose we have the following two sequences of elements:</p>\n\n<pre><code>A = {0, 1, 2, 3}\nB = {0, 3, 2, 1}\n</code></pre>\n\n<p>I could say that the permutation <code>B</code> differs from <code>A</code> because:</p>\n\n<ul>\n<li>I would require <strong>1</strong> swap operation in order to transform <code>B</code> to <code>A</code></li>\n<li>There are <strong>2</strong> elements within <code>B</code> that have an index that is different for the same elements in <code>A</code></li>\n</ul>\n\n<p>Are there other ways to compare and describe the difference between those two?</p>\n\n<p>The main goal is to define an algorithm that is able to approach the second permutation <code>B</code> to the first one <code>A</code>, such that if all the steps of this procedure are applied the outcome would be the permutation <code>A</code> itself. \nBut in order to to that I think it should be best to define first a sensible procedure that describes how much <code>B</code> differs from <code>A</code>.</p>\n\n<p>Is there any known algorithm that allows to approach on permutation to another?</p>\n"}, {"tags": ["c++", "c", "winapi", "pelles-c"], "comments": [{"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 3, "creation_date": 1453912792, "post_id": 35042967, "comment_id": 57810301, "body": "It wants a pointer to a GUID, so pass it a pointer. <code>SHGetKnownFolderPath(&amp;FOLDERID_ProgramFiles, ...);</code>"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 3, "creation_date": 1453912889, "post_id": 35042967, "comment_id": 57810366, "body": "The error message could hardly be more clear. It says: <i>Type error in argument 1 to &#39;SHGetKnownFolderPath&#39;; expected &#39;const struct _GUID *&#39; but found &#39;struct _GUID&#39;</i> That could not be made any more clear. I presume you understand the concept of a type mismatch?"}, {"owner": {"reputation": 8155, "user_id": 2008247, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wis7M.jpg?s=128&g=1", "display_name": "Jan Bodnar", "link": "https://stackoverflow.com/users/2008247/jan-bodnar"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1453913012, "post_id": 35042967, "comment_id": 57810449, "body": "@JonathanPotter Already tried. Leads to  Unresolved external symbol &#39;FOLDERID_ProgramFiles&#39;. error. Besides, working examples that I have found do not pass a pointer."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1453913212, "post_id": 35042967, "comment_id": 57810622, "body": "@JanBodnar show the relevant part of one of these working examples."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1453913414, "post_id": 35042967, "comment_id": 57810778, "body": "Your code compiles and works with my Visual Studio 2013."}, {"owner": {"reputation": 8155, "user_id": 2008247, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wis7M.jpg?s=128&g=1", "display_name": "Jan Bodnar", "link": "https://stackoverflow.com/users/2008247/jan-bodnar"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1453913561, "post_id": 35042967, "comment_id": 57810889, "body": "@MichaelWalz I have added a link to code example. I am using Pelles C."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1453914045, "post_id": 35042967, "comment_id": 57811224, "body": "@JanBodnar the code you linked to also compiles fine here a part from the missing symbols in &quot;ressource.h&quot; which you didn&#39;t provide, but once the symbols defined it compiles fine with VS2013."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 4, "creation_date": 1453914072, "post_id": 35042967, "comment_id": 57811250, "body": "You need at least one compilation unit that #defines <code>INITGUID</code> before including <code>shlobj.h</code>. See <a href=\"https://support.microsoft.com/en-us/kb/130869\" rel=\"nofollow noreferrer\">support.microsoft.com/en-us/kb/130869</a> for an explanation. Be aware that all the examples you have found are based on Visual C++, not the compiler you are using."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 3, "creation_date": 1453914194, "post_id": 35042967, "comment_id": 57811324, "body": "By the way, if fixing a <b>compiler</b> error then causes a <b>linker</b> error, it doesn&#39;t mean the fix for the compiler error was wrong. It means you have two errors."}, {"owner": {"reputation": 8155, "user_id": 2008247, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wis7M.jpg?s=128&g=1", "display_name": "Jan Bodnar", "link": "https://stackoverflow.com/users/2008247/jan-bodnar"}, "edited": false, "score": 0, "creation_date": 1453917512, "post_id": 35042967, "comment_id": 57813575, "body": "I am starting to get it. SHGetKnownFolderPath&#39;s first parameter is REFKNOWNFOLDERID, which is defined as a reference for C++ and as a pointer for C. (Pelles C is a C compiler.) That&#39;s why the code example compiled on Visual Studio, where C++ is often used for C programs."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1453921940, "post_id": 35042967, "comment_id": 57816289, "body": "Once again, could the compiler error have been any more clear. Did you really not understand it. I think you should concentrate on what the error is telling you."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 1, "creation_date": 1453922014, "post_id": 35042967, "comment_id": 57816327, "body": "One also wonders why you tagged your question c++. These are two different languages. Are you compiling the code in both C and C++? If so fine. If not, please pick one language, the one you are using."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1454165614, "post_id": 35042967, "comment_id": 57927259, "body": "Your update just popped this question up on my feed. I don&#39;t understand what the problem you&#39;re still having is. It looks like you are getting terribly confused about the difference between C and C++. <i>They are not the same language.</i> You are using a C compiler, but studying code samples in C++. That&#39;s going to get you into trouble, you can&#39;t just copy and paste what the C++ folks do. The Windows API is a C API, so this is all usable from C, but the syntax might look a little different for the COM-based functions, like this. You still can&#39;t get it to compile by following Jonathan&#39;s advice?"}, {"owner": {"reputation": 8155, "user_id": 2008247, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wis7M.jpg?s=128&g=1", "display_name": "Jan Bodnar", "link": "https://stackoverflow.com/users/2008247/jan-bodnar"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1454165960, "post_id": 35042967, "comment_id": 57927366, "body": "@CodyGray The problem is fixed. I wanted to provide an answer for this question; it might be helpful for someone else."}], "answers": [{"tags": [], "owner": {"reputation": 8155, "user_id": 2008247, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wis7M.jpg?s=128&g=1", "display_name": "Jan Bodnar", "link": "https://stackoverflow.com/users/2008247/jan-bodnar"}, "is_accepted": true, "score": 11, "last_activity_date": 1454165838, "creation_date": 1454165838, "answer_id": 35103245, "question_id": 35042967, "link": "https://stackoverflow.com/questions/35042967/cannot-get-shgetknownfolderpath-function-working/35103245#35103245", "title": "Cannot get SHGetKnownFolderPath() function working", "body": "<p>With the help from the comments of Jonathan Potter, I was able to \ncorrect the example. </p>\n\n<p>The problem was very subtle. The following code line looks like C, but \nit is actually C++. </p>\n\n<p><code>HRESULT hr = SHGetKnownFolderPath(FOLDERID_Documents, 0, NULL, &amp;path);</code></p>\n\n<p>The <code>SHGetKnownFolderPath()</code> function has the following prototype:</p>\n\n<p><code>STDAPI SHGetKnownFolderPath(REFKNOWNFOLDERID, DWORD, HANDLE, PWSTR*);</code></p>\n\n<p>Its first argument is <code>REFKNOWNFOLDERID</code>. </p>\n\n<p>In the <code>shtypes.h</code> file we find the following:</p>\n\n<pre><code>#ifdef __cplusplus\n#define REFKNOWNFOLDERID const KNOWNFOLDERID &amp;\n#else\n#define REFKNOWNFOLDERID const KNOWNFOLDERID * /*__MIDL_CONST*/\n#endif /* __cplusplus */\n</code></pre>\n\n<p>This means, that in C++ <code>REFKNOWNFOLDERID</code> is a reference and in C\nit is a pointer. As a consequence, we do not need an ampersand in C++\ncode for the first parameter.\nIn Visual C++ C code is often compiled with C++ and the distinction\nbetween the languages is often blurred. </p>\n\n<p>The second issue, the <code>Unresolved external symbol 'FOLDERID_ProgramFiles'. error.</code> error is fixed by adding <code>#include &lt;initguid.h&gt;</code> before <code>#include &lt;ShlObj.h&gt;</code>. The reason is explained in this <a href=\"https://support.microsoft.com/en-us/kb/130869\" rel=\"noreferrer\">article</a>.</p>\n\n<p>So the following code compiles on Pelles C.</p>\n\n<pre><code>#include &lt;windows.h&gt;\n#include &lt;initguid.h&gt;\n#include &lt;KnownFolders.h&gt;\n#include &lt;ShlObj.h&gt;\n#include &lt;wchar.h&gt;\n\nint wmain(void) {\n\n    PWSTR path = NULL;\n\n    HRESULT hr = SHGetKnownFolderPath(&amp;FOLDERID_Documents, 0, NULL, &amp;path);\n\n    if (SUCCEEDED(hr)) {\n        wprintf(L\"%ls\\n\", path);\n    }\n\n    CoTaskMemFree(path);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 4393665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19bc19bf347498ae9990dacf3771394d?s=128&d=identicon&r=PG&f=1", "display_name": "Henry Garcia", "link": "https://stackoverflow.com/users/4393665/henry-garcia"}, "is_accepted": false, "score": 2, "last_activity_date": 1540439557, "last_edit_date": 1540439557, "creation_date": 1540436814, "answer_id": 52980759, "question_id": 35042967, "link": "https://stackoverflow.com/questions/35042967/cannot-get-shgetknownfolderpath-function-working/52980759#52980759", "title": "Cannot get SHGetKnownFolderPath() function working", "body": "<p>It would help to understand that the variable FOLDERID_Documents is actually a GUID structure: it's defined in the GuidDef.h header.</p>\n\n<pre><code>typedef struct {\nunsigned long  Data1;\nunsigned short Data2;\nunsigned short Data3;\nbyte           Data4[ 8 ];\n} GUID;\n</code></pre>\n\n<p>I had problems with this also. I think the confusion arises from the previous use of CSIDLs which were not structures, but simply a number type. It also would help, if MSDN documentation showed an example. So, I'm including one here:</p>\n\n<pre><code>    #include &lt;windows.h&gt;\n    #include &lt;KnownFolders.h&gt;\n    #include &lt;shlobj.h&gt;\n    #include &lt;stdio.h&gt;\n\n    int main (void)\n    { \n        PWSTR path ;\n        SHGetKnownFolderPath(&amp;FOLDERID_Public, 0, NULL, &amp;path) ;\n        wprintf(L\"%s\\nSize of FOLDERID: %d bytes\\n\", path, sizeof(FOLDERID_Public)) ;\n        wprintf(L\"{%x-%hx-%hx-%x%x%x%x%x%x%x%x}\\n\", FOLDERID_Public.Data1, FOLDERID_Public.Data2, FOLDERID_Public.Data3, FOLDERID_Public.Data4[0], FOLDERID_Public.Data4[1], FOLDERID_Public.Data4[2], FOLDERID_Public.Data4[3], FOLDERID_Public.Data4[4], FOLDERID_Public.Data4[5], FOLDERID_Public.Data4[6], FOLDERID_Public.Data4[7]) ;\n        CoTaskMemFree((LPVOID)path)  ;\n        return 0 ;\n    }\n</code></pre>\n"}], "owner": {"reputation": 8155, "user_id": 2008247, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wis7M.jpg?s=128&g=1", "display_name": "Jan Bodnar", "link": "https://stackoverflow.com/users/2008247/jan-bodnar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13523, "favorite_count": 0, "accepted_answer_id": 35103245, "answer_count": 2, "score": 4, "last_activity_date": 1540439557, "creation_date": 1453912535, "last_edit_date": 1454165102, "question_id": 35042967, "link": "https://stackoverflow.com/questions/35042967/cannot-get-shgetknownfolderpath-function-working", "title": "Cannot get SHGetKnownFolderPath() function working", "body": "<p>I am having troubles using SHGetKnownFolderPath() function. \nI am getting the following error message: \n<code>Type error in argument 1 to 'SHGetKnownFolderPath'; expected 'const struct _GUID *' but found 'struct _GUID'.</code></p>\n\n<p>In the <code>KnowFolders.h</code> we have the following relevant definitions:</p>\n\n<pre><code>#define DEFINE_KNOWN_FOLDER(name,l,w1,w2,b1,b2,b3,b4,b5,b6,b7,b8) \\\n    EXTERN_C const GUID name\n...\nDEFINE_KNOWN_FOLDER(FOLDERID_ProgramFiles,0x905e63b6,0xc1bf,0x494e,0xb2,0x9c,0x65,0xb7,0x32,0xd3,0xd2,0x1a);\n</code></pre>\n\n<p>I am using Pelles C compiler .</p>\n\n<p>This is my sample code:</p>\n\n<pre><code>#include &lt;windows.h&gt;\n#include &lt;wchar.h&gt;\n#include &lt;KnownFolders.h&gt;\n#include &lt;shlobj.h&gt;\n\nint wmain(int argc, wchar_t **argv) {\n\n    PWSTR path = NULL;\n\n    HRESULT hr = SHGetKnownFolderPath(FOLDERID_ProgramFiles, 0, NULL, &amp;path);    \n\n    if (SUCCEEDED(hr)){\n\n        wprintf(L\"%ls\", path);\n    }\n\n    CoTaskMemFree(path);\n\n    return 0;\n}\n</code></pre>\n\n<p>How to fix this error message?</p>\n\n<p><strong>EDIT</strong> I have found code examples with SHGetKnownFolderPath(); all of\nthem execute the function without the pointer. For instance:</p>\n\n<pre><code>hr = SHGetKnownFolderPath(FOLDERID_Public, 0, NULL, &amp;pszPath);\nif (SUCCEEDED(hr))\n{\n    wprintf(L\"FOLDERID_Public: %s\\n\", pszPath);\n    CoTaskMemFree(pszPath);\n}\n</code></pre>\n\n<p><a href=\"http://www.getcodesamples.com/src/3E9DECF9/DDEC135B\" rel=\"nofollow\">CppShellKnownFolders.cpp</a></p>\n"}, {"tags": ["c++", "neural-network"], "comments": [{"owner": {"reputation": 6911, "user_id": 2970186, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Vo0Wc.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2970186/daniel"}, "edited": false, "score": 0, "creation_date": 1453912764, "post_id": 35042924, "comment_id": 57810286, "body": "not a single line of C++ in sight..."}, {"owner": {"reputation": 1507, "user_id": 4296244, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/e8c0940effc84e18a8541145ef2dfbfe?s=128&d=identicon&r=PG&f=1", "display_name": "Natjo", "link": "https://stackoverflow.com/users/4296244/natjo"}, "reply_to_user": {"reputation": 6911, "user_id": 2970186, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Vo0Wc.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2970186/daniel"}, "edited": false, "score": 0, "creation_date": 1453912880, "post_id": 35042924, "comment_id": 57810351, "body": "sorry, I updated my question, I try to write my program in C++, but any pseudocode or formulas would help me"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1453912922, "post_id": 35042924, "comment_id": 57810396, "body": "...what have you tried? SO is for concrete code, not pseudocode or concepts."}, {"owner": {"reputation": 6812, "user_id": 1410303, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/UVBNS.png?s=128&g=1", "display_name": "SomeDude", "link": "https://stackoverflow.com/users/1410303/somedude"}, "edited": false, "score": 1, "creation_date": 1453920990, "post_id": 35042924, "comment_id": 57815760, "body": "If you want to really code easily and concentrate on grasping concepts of neural networks I would suggest matlab, and there are numerous examples of integrate and fire neuron models in matlab for e.g. <a href=\"http://neuroscience.ucdavis.edu/goldman/Tutorials_files/Integrate%26Fire.pdf\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 1507, "user_id": 4296244, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/e8c0940effc84e18a8541145ef2dfbfe?s=128&d=identicon&r=PG&f=1", "display_name": "Natjo", "link": "https://stackoverflow.com/users/4296244/natjo"}, "edited": false, "score": 0, "creation_date": 1453935896, "post_id": 35042924, "comment_id": 57824041, "body": "I will look through the matlab code, thanks"}], "owner": {"reputation": 1507, "user_id": 4296244, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/e8c0940effc84e18a8541145ef2dfbfe?s=128&d=identicon&r=PG&f=1", "display_name": "Natjo", "link": "https://stackoverflow.com/users/4296244/natjo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 364, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1453935846, "creation_date": 1453912420, "last_edit_date": 1453935846, "question_id": 35042924, "link": "https://stackoverflow.com/questions/35042924/how-to-update-a-leaky-integrate-and-fire-neuron", "title": "how to update a leaky integrate and fire neuron", "body": "<p>I'm trying to implement a leaky integrate and fire neuron in C++, but can't figure out a good and efficient way to update the neuron's voltage when a new current arrives.</p>\n\n<p>I am using this code write now, but I am new to the field and don't think it is an optimal solution. Is that the right way to update a neuron?</p>\n\n<pre><code>void LIF_neuron::update(double current, size_t time){\n    //update current\n    //formula: (V_current - V_reset)*(1-exp((t_last_fired - t_now)/RC)) + R*I\n    mCurrentVolt += -1*(mCurrentVolt-mResetVolt)*(1-exp((mLastTimeFired-time)/mRC)) + mR*current;\n\n    //all leakage since last activation was substracted, give back what was already substracted in earlier updates\n    mCurrentVolt += (mCurrentVolt-mResetVolt)*(1-exp((mLastTimeFired-mLastTimeUpdated)/mRC));\n\n    if(mCurrentVolt &gt;= mThreshold){\n        mFires = true;\n        mLastTimeFired = time;\n    }else{\n        mFires = false;\n    }\n\n    mLastTimeUpdated = time;\n}\n</code></pre>\n\n<p><code>mRC</code> and <code>mR</code> are constants of the neuron.</p>\n"}, {"tags": ["c++", "templates", "metaprogramming"], "answers": [{"comments": [{"owner": {"reputation": 2257, "user_id": 1530018, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/bcbc00a1cd813900aedb1eebd7113d90?s=128&d=identicon&r=PG&f=1", "display_name": "kreuzerkrieg", "link": "https://stackoverflow.com/users/1530018/kreuzerkrieg"}, "edited": false, "score": 0, "creation_date": 1453912862, "post_id": 35042952, "comment_id": 57810338, "body": "just like this??? I wasn&#39;t aware that variadic pack can be instantiated like this. will check it and report back"}, {"owner": {"reputation": 2257, "user_id": 1530018, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/bcbc00a1cd813900aedb1eebd7113d90?s=128&d=identicon&r=PG&f=1", "display_name": "kreuzerkrieg", "link": "https://stackoverflow.com/users/1530018/kreuzerkrieg"}, "edited": false, "score": 0, "creation_date": 1453962330, "post_id": 35042952, "comment_id": 57832289, "body": "damn! It doesnt compile with MSVC, but works fine with CLang. in any case you deserve your answer being marked as correct one. Meanwhile will open a bug on Microsoft Connect. Thanks!"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 2257, "user_id": 1530018, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/bcbc00a1cd813900aedb1eebd7113d90?s=128&d=identicon&r=PG&f=1", "display_name": "kreuzerkrieg", "link": "https://stackoverflow.com/users/1530018/kreuzerkrieg"}, "edited": false, "score": 0, "creation_date": 1453971675, "post_id": 35042952, "comment_id": 57837103, "body": "@kreuzerkrieg:It should work for msvc 2013 and later."}, {"owner": {"reputation": 2257, "user_id": 1530018, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/bcbc00a1cd813900aedb1eebd7113d90?s=128&d=identicon&r=PG&f=1", "display_name": "kreuzerkrieg", "link": "https://stackoverflow.com/users/1530018/kreuzerkrieg"}, "edited": false, "score": 0, "creation_date": 1453984219, "post_id": 35042952, "comment_id": 57845761, "body": "it doesnt work for VS2015 UPD1 and does work for clang 3.7 or gcc"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 2257, "user_id": 1530018, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/bcbc00a1cd813900aedb1eebd7113d90?s=128&d=identicon&r=PG&f=1", "display_name": "kreuzerkrieg", "link": "https://stackoverflow.com/users/1530018/kreuzerkrieg"}, "edited": false, "score": 0, "creation_date": 1453984640, "post_id": 35042952, "comment_id": 57846053, "body": "variadic template is supported for msvc 2013 (but msvc has still its own implementation for template). Which error do you get ?"}, {"owner": {"reputation": 2257, "user_id": 1530018, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/bcbc00a1cd813900aedb1eebd7113d90?s=128&d=identicon&r=PG&f=1", "display_name": "kreuzerkrieg", "link": "https://stackoverflow.com/users/1530018/kreuzerkrieg"}, "edited": false, "score": 0, "creation_date": 1453987349, "post_id": 35042952, "comment_id": 57847975, "body": "yes, but actually I dont remember if they fully support all variadic related features, for constexpr, for example they do not. erro message: &quot;error C2062: type &#39;foo&lt;int&gt;&#39; unexpected&quot; for this line &quot; explicit bar(int data) : m_storage(Foos(data)...) {}&quot;"}, {"owner": {"reputation": 2257, "user_id": 1530018, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/bcbc00a1cd813900aedb1eebd7113d90?s=128&d=identicon&r=PG&f=1", "display_name": "kreuzerkrieg", "link": "https://stackoverflow.com/users/1530018/kreuzerkrieg"}, "edited": false, "score": 0, "creation_date": 1453990951, "post_id": 35042952, "comment_id": 57850724, "body": "no luck error C2062: type &#39;foo&lt;int&gt;&#39; unexpected error C2143: syntax error: missing &#39;;&#39; before &#39;}&#39; fatal error C1903: unable to recover from previous error(s); stopping compilation for the same line, and it crashed the compiler :)"}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 4, "last_activity_date": 1453912497, "creation_date": 1453912497, "answer_id": 35042952, "question_id": 35042868, "link": "https://stackoverflow.com/questions/35042868/typelist-like-template-class/35042952#35042952", "title": "typelist-like (?) template class", "body": "<p>You are looking for variadic template (available since C++11)</p>\n\n<pre><code>template &lt;typename ... Ts&gt;\nclass bar\n{\npublic:\n    explicit bar(int data) : m_storage(Ts(data)...) {}\n    void print() { boost::fusion::for_each(m_storage, printer()); }\n\nprivate:\n    boost::fusion::vector&lt;Ts...&gt; m_storage;\n};\n</code></pre>\n"}], "owner": {"reputation": 2257, "user_id": 1530018, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/bcbc00a1cd813900aedb1eebd7113d90?s=128&d=identicon&r=PG&f=1", "display_name": "kreuzerkrieg", "link": "https://stackoverflow.com/users/1530018/kreuzerkrieg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 35042952, "answer_count": 1, "score": 1, "last_activity_date": 1453963331, "creation_date": 1453912262, "last_edit_date": 1453963331, "question_id": 35042868, "link": "https://stackoverflow.com/questions/35042868/typelist-like-template-class", "title": "typelist-like (?) template class", "body": "<p>I'm trying to achieve following: create template class which uses its template arguments to create instance of template type and use it somewhere in the, for example constructor. Consider following example:</p>\n\n<pre><code>template &lt;typename T&gt;\nclass foo\n{\npublic:\n    explicit foo(const T&amp; data) : m_data(data) {}\n    T m_data;\n};\n\ntemplate &lt;typename T01, typename T02&gt;\nclass bar\n{\npublic:\n    explicit bar(int data) : m_storage(T01(data), T02(data)) {}\n    void print() { boost::fusion::for_each(m_storage, printer()); }\n\nprivate:\n    boost::fusion::vector&lt;T01, T02&gt; m_storage;\n};\n</code></pre>\n\n<p>and usage:</p>\n\n<pre><code>bar&lt;foo&lt;int&gt;, foo&lt;int&gt;&gt; b(5);\n    b.print();\n</code></pre>\n\n<p>but what if I want flexibility in the <code>bar</code> class and I want number of these T01, T02 classes varying?\nexample:</p>\n\n<pre><code>bar&lt;foo&lt;int&gt;, foo&lt;int&gt;&gt; b(5);\nb.print();\nbar&lt;foo&lt;int&gt;, foo&lt;int&gt;&gt;, foo&lt;int&gt;&gt; c(6);\nc.print();\n</code></pre>\n\n<p>Something like using argument pack maybe?</p>\n\n<p>EDIT001:<br>\nFinal working version on <a href=\"http://coliru.stacked-crooked.com/a/a52a5f8e57811ce2\" rel=\"nofollow\">coliru</a>.</p>\n"}, {"tags": ["c++", "oop", "design-patterns", "refactoring", "bridge"], "comments": [{"owner": {"reputation": 13136, "user_id": 4081336, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/XXiEG.jpg?s=128&g=1", "display_name": "Leandro Caniglia", "link": "https://stackoverflow.com/users/4081336/leandro-caniglia"}, "edited": false, "score": 0, "creation_date": 1453928282, "post_id": 35042611, "comment_id": 57819893, "body": "(1) Identify the methods that depend on the OS; (2) build a compatibility layer that provides the same services in a OS-agnostic way; (3) write your model about debug events using the compatibility layer, and (4) before using your model instantiate the implementation of the compatibility layer that corresponds to the current OS."}, {"owner": {"reputation": 191, "user_id": 900486, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/371fcd818babebaa589687f4a4d8f14c?s=128&d=identicon&r=PG", "display_name": "CrHasher", "link": "https://stackoverflow.com/users/900486/crhasher"}, "reply_to_user": {"reputation": 13136, "user_id": 4081336, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/XXiEG.jpg?s=128&g=1", "display_name": "Leandro Caniglia", "link": "https://stackoverflow.com/users/4081336/leandro-caniglia"}, "edited": false, "score": 0, "creation_date": 1453973537, "post_id": 35042611, "comment_id": 57838456, "body": "@LeandroCaniglia: Thank you for the comment. Please see the updates I posted, in the above design I tried as much as possible to break down the problem in small pieces &quot;Type of Debug Event&quot; + Operation + OS. Can you help me with the right approach? I think solving this example would help others to solve a similar issue in the future."}, {"owner": {"reputation": 13136, "user_id": 4081336, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/XXiEG.jpg?s=128&g=1", "display_name": "Leandro Caniglia", "link": "https://stackoverflow.com/users/4081336/leandro-caniglia"}, "edited": false, "score": 0, "creation_date": 1453984695, "post_id": 35042611, "comment_id": 57846094, "body": "It is not clear to me what a <code>DebugEvent</code> and a <code>DebugEventModule</code> are."}, {"owner": {"reputation": 191, "user_id": 900486, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/371fcd818babebaa589687f4a4d8f14c?s=128&d=identicon&r=PG", "display_name": "CrHasher", "link": "https://stackoverflow.com/users/900486/crhasher"}, "reply_to_user": {"reputation": 13136, "user_id": 4081336, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/XXiEG.jpg?s=128&g=1", "display_name": "Leandro Caniglia", "link": "https://stackoverflow.com/users/4081336/leandro-caniglia"}, "edited": false, "score": 0, "creation_date": 1453985711, "post_id": 35042611, "comment_id": 57846836, "body": "@LeandroCaniglia: See Update 2 please. Added some code and a link to what I&#39;m trying to abstract."}, {"owner": {"reputation": 13136, "user_id": 4081336, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/XXiEG.jpg?s=128&g=1", "display_name": "Leandro Caniglia", "link": "https://stackoverflow.com/users/4081336/leandro-caniglia"}, "edited": false, "score": 0, "creation_date": 1454069296, "post_id": 35042611, "comment_id": 57889936, "body": "Approach 3 looks good to me. At this point I personally would start coding to test the initial ideas and uncover new ones. You already know you don&#39;t want the explosion of classes in your hierarchy, so that won&#39;t happen. Go ahead with the coding and refactor as you learn more."}, {"owner": {"reputation": 191, "user_id": 900486, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/371fcd818babebaa589687f4a4d8f14c?s=128&d=identicon&r=PG", "display_name": "CrHasher", "link": "https://stackoverflow.com/users/900486/crhasher"}, "reply_to_user": {"reputation": 13136, "user_id": 4081336, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/XXiEG.jpg?s=128&g=1", "display_name": "Leandro Caniglia", "link": "https://stackoverflow.com/users/4081336/leandro-caniglia"}, "edited": false, "score": 0, "creation_date": 1454313967, "post_id": 35042611, "comment_id": 57971157, "body": "@LeandroCaniglia: In the end I used inheritance for attach and detach operations because DebugEventModuleAttach and DebugEventModuleDetach turned out to be quite different, and the member of the classes are also different. The interface on the other hand is the same so inheritance was ok in this case. The platform part of the problem will be solved with free form functions. This way the OS specific functions will not be part of the OOP hierarchy and can be reused. So now I have the original design (first UML diagram) without the OS specific classes. Thank you for your feedback."}], "owner": {"reputation": 191, "user_id": 900486, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/371fcd818babebaa589687f4a4d8f14c?s=128&d=identicon&r=PG", "display_name": "CrHasher", "link": "https://stackoverflow.com/users/900486/crhasher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 168, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1453986742, "creation_date": 1453911629, "last_edit_date": 1453986742, "question_id": 35042611, "link": "https://stackoverflow.com/questions/35042611/apply-a-bridge-pattern-to-an-existing-class-design", "title": "Apply a Bridge pattern to an existing class design", "body": "<p><a href=\"https://i.stack.imgur.com/8G2SU.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8G2SU.jpg\" alt=\"No Bridge\"></a>\n<br>\n<br>\nAs you can see I have an interface for Debug Events and two operations Attach and Detach. On top of this I have to implement a Windows and Linux version so the current design does not scale at all.</p>\n\n<p>Imagine that I have to add:</p>\n\n<ul>\n<li>DebugEventThread &lt;- DebugEventThreadAttach &lt;- DebugEventThreadDetach</li>\n<li>DebugEventProcess &lt;- DebugEventProcessAttach &lt;- DebugEventProcessDetach</li>\n</ul>\n\n<p>This design blows out of proportions...</p>\n\n<p>I know Bridge pattern would be a solution to this problem but how would it be applied in this case?</p>\n\n<p><strong>Update:</strong>\nAs a first fix I'm thinking of adding a member Operation (Attach/Detach) to DebugEventModule. This way no more subclass is needed for different type of attach/detach operations:\n<br>\n<br>\n<strong>1.</strong>\n<br>\n<a href=\"https://i.stack.imgur.com/CXY7d.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CXY7d.jpg\" alt=\"Bridge\"></a>\n<br>\nThe bridge between DebugEventModule -> DebugEventModuleImpl seems useless to me at this point, can you see any benefit of having a bridge here? Without a bridge I would have:\n<br>\n<br>\n<strong>2.</strong>\n<br>\n<a href=\"https://i.stack.imgur.com/9rhTq.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9rhTq.jpg\" alt=\"Inheritance\"></a>\n<br>\nWhat about moving platform specific stuff (OS stuff) out of the way with a Bridge? Something like this:\n<br>\n<br>\n<strong>3.</strong>\n<br>\n<a href=\"https://i.stack.imgur.com/G0Uvb.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/G0Uvb.jpg\" alt=\"Platform abstraction\"></a>\n<br>\nI'm thinking that in this last design the platform_specific() functions would be Module, Thread, Process specific and this goes against the \"One Responsibility Principal\", I wouldn't want this class to become a \"mammoth\", to become a combination of unrelated functions.</p>\n\n<p><strong>Update 2:</strong>\nCurrent implementation for DebugEvent + DebugEventModule:</p>\n\n<pre><code>    class DebugEvent {\n    public:\n      DebugEvent(uint32_t processId,\n                 uint32_t threadId);\n      virtual ~DebugEvent();\n      virtual void Process() = 0;\n    private:\n      uint32_t _processId;\n      uint32_t _threadId;\n    };\n\n    class DebugEventModule : public DebugEvent {\n    public:\n      DebugEventModule (uint32_t processId,\n                        uint32_t threadId,\n                        handle_t fileHandle,\n                        hmodule_t baseOfDll,\n                        address_t imageName,\n                        uint16_t isUnicode);\n      virtual ~DebugEventModule();\n      virtual void Process();\n    private:\n      handle_t _fileHandle;\n      hmodule_t _baseOfDll;\n      address_t _imageName;\n      uint16_t _isUnicode;\n    };\n\n    class DebugEventModuleAttach : public DebugEventModule {};\n    class DebugEventModuleDetach : public DebugEventModule {};\n\n    class DebugEventModuleAttachWindows : public DebugEventModuleAttach {};\n    class DebugEventModuleAttachLinux : public DebugEventModuleAttach {};\n\n    class DebugEventModuleDetachWindows : public DebugEventModuleDetach {};\n    class DebugEventModuleDetachLinux : public DebugEventModuleDetach {};\n</code></pre>\n\n<p><br>\nThe idea is to make a platform independent version of Windows DEBUG_EVENT:\n<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms679308%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/windows/desktop/ms679308%28v=vs.85%29.aspx</a></p>\n\n<p>Windows DEBUG_EVENT looks like this:</p>\n\n<pre><code>    typedef struct _DEBUG_EVENT {\n      DWORD dwDebugEventCode;\n      DWORD dwProcessId;\n      DWORD dwThreadId;\n      union {\n        EXCEPTION_DEBUG_INFO      Exception;\n        CREATE_THREAD_DEBUG_INFO  CreateThread;\n        CREATE_PROCESS_DEBUG_INFO CreateProcessInfo;\n        EXIT_THREAD_DEBUG_INFO    ExitThread;\n        EXIT_PROCESS_DEBUG_INFO   ExitProcess;\n        LOAD_DLL_DEBUG_INFO       LoadDll; // - This was DebugEventModuleAttach in the original design\n        UNLOAD_DLL_DEBUG_INFO     UnloadDll; // - This was DebugEventModuleDetach in the original design\n        OUTPUT_DEBUG_STRING_INFO  DebugString;\n        RIP_INFO                  RipInfo;\n      } u;\n    } DEBUG_EVENT, *LPDEBUG_EVENT;\n</code></pre>\n"}, {"tags": ["c++", "c++11", "containers", "interface-implementation"], "comments": [{"owner": {"reputation": 4826, "user_id": 193789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a17cc57e47435930a48f7c80bcd53863?s=128&d=identicon&r=PG", "display_name": "kebs", "link": "https://stackoverflow.com/users/193789/kebs"}, "edited": false, "score": 0, "creation_date": 1453912305, "post_id": 35042580, "comment_id": 57809954, "body": "Any reason why you don&#39;t use the container provided by standard library ?"}, {"owner": {"reputation": 41, "user_id": 2471745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bETXj.jpg?s=128&g=1", "display_name": "Holywa", "link": "https://stackoverflow.com/users/2471745/holywa"}, "reply_to_user": {"reputation": 4826, "user_id": 193789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a17cc57e47435930a48f7c80bcd53863?s=128&d=identicon&r=PG", "display_name": "kebs", "link": "https://stackoverflow.com/users/193789/kebs"}, "edited": false, "score": 1, "creation_date": 1453912419, "post_id": 35042580, "comment_id": 57810047, "body": "@kebs : Yes, I want to keep the order of insertion because I&#39;ll need it later, but I also have to associate some class with an unique key :)"}, {"owner": {"reputation": 4826, "user_id": 193789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a17cc57e47435930a48f7c80bcd53863?s=128&d=identicon&r=PG", "display_name": "kebs", "link": "https://stackoverflow.com/users/193789/kebs"}, "edited": false, "score": 0, "creation_date": 1453912884, "post_id": 35042580, "comment_id": 57810356, "body": "I&#39;m not sure it&#39;s the best way to go. You could also store in a <code>std::vector</code> some <code>std::pair&lt;Index,Type&gt;</code> (unless you need to access through the key). But from a general point of view, I think situations where the standard library doesn&#39;t fit are very rare..."}, {"owner": {"reputation": 41, "user_id": 2471745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bETXj.jpg?s=128&g=1", "display_name": "Holywa", "link": "https://stackoverflow.com/users/2471745/holywa"}, "reply_to_user": {"reputation": 4826, "user_id": 193789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a17cc57e47435930a48f7c80bcd53863?s=128&d=identicon&r=PG", "display_name": "kebs", "link": "https://stackoverflow.com/users/193789/kebs"}, "edited": false, "score": 0, "creation_date": 1453913069, "post_id": 35042580, "comment_id": 57810500, "body": "It&#39;s merely a wrapping that I wanted to do :) I also had think of a vector&lt;pair&lt;&gt;&gt; but I&#39;ve found (on the Net) that maybe two vectors may be better as we only have one vector to go through to find the right index?"}, {"owner": {"reputation": 4826, "user_id": 193789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a17cc57e47435930a48f7c80bcd53863?s=128&d=identicon&r=PG", "display_name": "kebs", "link": "https://stackoverflow.com/users/193789/kebs"}, "edited": false, "score": 0, "creation_date": 1453913198, "post_id": 35042580, "comment_id": 57810610, "body": "IMHO, parsing one vector holding a key, or parsing a vector holding a pair holding a key will absolutely make no runtime difference. But you are free to try and compare..."}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "reply_to_user": {"reputation": 4826, "user_id": 193789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a17cc57e47435930a48f7c80bcd53863?s=128&d=identicon&r=PG", "display_name": "kebs", "link": "https://stackoverflow.com/users/193789/kebs"}, "edited": false, "score": 1, "creation_date": 1453915272, "post_id": 35042580, "comment_id": 57812037, "body": "@kebs actually, there are some rare cases where std::map and std::unordered_map are not cool. this is where performance does matter. flat maps like the OP try can win std::(unordered_)map by few magnitutes."}, {"owner": {"reputation": 11967, "user_id": 138290, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/451afcbb4d54555af26738fb7fd32d7f?s=128&d=identicon&r=PG", "display_name": "Fake Code Monkey Rashid", "link": "https://stackoverflow.com/users/138290/fake-code-monkey-rashid"}, "edited": false, "score": 0, "creation_date": 1594583396, "post_id": 35042580, "comment_id": 111169755, "body": "Just for the record, I benchmarked array operator [] lookup times for this method and using 2 vectors this way is significantly slower (at least 750 times slower with 1,000,000 random elements) than using 1 vector and 1 unordered map (or even 1 vector and 2 unordered maps)."}, {"owner": {"reputation": 11967, "user_id": 138290, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/451afcbb4d54555af26738fb7fd32d7f?s=128&d=identicon&r=PG", "display_name": "Fake Code Monkey Rashid", "link": "https://stackoverflow.com/users/138290/fake-code-monkey-rashid"}, "edited": false, "score": 0, "creation_date": 1594588209, "post_id": 35042580, "comment_id": 111171094, "body": "I just realized that I got my benchmark numbers mixed up. It&#39;s actually for sequential elements that using two vectors is at least 750 times slower than using 1 vector and 1 map (which is where my initial figure came from) whereas it&#39;s ~5000 times slower than using than using 1 vector and 1 unordered map. However, for random elements, it&#39;s 30 times and ~140 times slower, respectively."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 2471745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bETXj.jpg?s=128&g=1", "display_name": "Holywa", "link": "https://stackoverflow.com/users/2471745/holywa"}, "edited": false, "score": 0, "creation_date": 1453912521, "post_id": 35042870, "comment_id": 57810125, "body": "But there, I will pass args by values and not reference right? This class is also intended to store whole classes so I was trying to avoid that!"}, {"owner": {"reputation": 4826, "user_id": 193789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a17cc57e47435930a48f7c80bcd53863?s=128&d=identicon&r=PG", "display_name": "kebs", "link": "https://stackoverflow.com/users/193789/kebs"}, "reply_to_user": {"reputation": 41, "user_id": 2471745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bETXj.jpg?s=128&g=1", "display_name": "Holywa", "link": "https://stackoverflow.com/users/2471745/holywa"}, "edited": false, "score": 1, "creation_date": 1453912612, "post_id": 35042870, "comment_id": 57810179, "body": "Anyhow, <code>vector::push_back()</code> will do a copy. And the initial value passed, although it appears to create a copy, it will be optimized away by the compiler."}, {"owner": {"reputation": 41, "user_id": 2471745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bETXj.jpg?s=128&g=1", "display_name": "Holywa", "link": "https://stackoverflow.com/users/2471745/holywa"}, "edited": false, "score": 0, "creation_date": 1453912839, "post_id": 35042870, "comment_id": 57810324, "body": "I didn&#39;t have the compiler error you edited in :) I did forget that push_back() made a copy, thank you :)"}], "tags": [], "owner": {"reputation": 4826, "user_id": 193789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a17cc57e47435930a48f7c80bcd53863?s=128&d=identicon&r=PG", "display_name": "kebs", "link": "https://stackoverflow.com/users/193789/kebs"}, "is_accepted": true, "score": 1, "last_activity_date": 1453912681, "last_edit_date": 1453912681, "creation_date": 1453912273, "answer_id": 35042870, "question_id": 35042580, "link": "https://stackoverflow.com/questions/35042580/how-to-make-my-own-templated-map/35042870#35042870", "title": "How to make my &quot;own&quot; templated map?", "body": "<p>You can't build a reference from a <code>const char*</code> (even though it gets casted to a string), try this instead:</p>\n\n<pre><code>    template&lt;typename KEY, typename VALUE&gt;\n    void insert(KEY key, VALUE val) {\n        m_keys.push_back(key);\n        m_values.push_back(val);\n    }\n</code></pre>\n\n<p>More precisely, the compiler is pretty clear about the problem:</p>\n\n<blockquote>\n  <p>error: invalid initialization of non-const reference of type 'std::basic_string&amp;' from an rvalue of type 'std::basic_string'\n      m.insert(\"test\",1);</p>\n</blockquote>\n"}], "owner": {"reputation": 41, "user_id": 2471745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bETXj.jpg?s=128&g=1", "display_name": "Holywa", "link": "https://stackoverflow.com/users/2471745/holywa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 487, "favorite_count": 0, "accepted_answer_id": 35042870, "answer_count": 1, "score": 1, "last_activity_date": 1453915546, "creation_date": 1453911531, "last_edit_date": 1453915546, "question_id": 35042580, "link": "https://stackoverflow.com/questions/35042580/how-to-make-my-own-templated-map", "title": "How to make my &quot;own&quot; templated map?", "body": "<p>I want to implement my own \"simple\" container which will have map properties but also keeps insertion order. I've heard about boost::multi_index but I find it very difficult to understand for what I want.</p>\n\n<p>So I made a templated class:</p>\n\n<pre><code>template&lt;typename KEY, typename VALUE&gt;\nclass MyMap {\n    private : \n        std::vector&lt;KEY&gt;    m_keys;\n        std::vector&lt;VALUE&gt;  m_values;\n\n    public :\n        void insert(KEY&amp; key, VALUE&amp; val) {\n            //Test if key exists //\n            m_keys.push_back(key);\n            m_values.push_back(val);\n        }\n\n        /* Other methods like erase/size/operator[]/begin/etc. */\n\n};\n</code></pre>\n\n<p>Just to test it, I wanted to do something like this:</p>\n\n<pre><code>int main() {\n    MyMap&lt;string,int&gt; m;\n    m.insert(\"test\",1);\n    m.insert(\"cat\",2);\n\n    for(auto&amp; item : m) {\n        cout &lt;&lt; item &lt;&lt; endl;\n        cout &lt;&lt; m[item] &lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<p>But I keep getting a compilation error on inserts (and [ ]) as it translates my KEY into a basic_string and not a string. It's driving me crazy and I can't find any answer (or any word to properly describe my problem to research for an answer). I guess it has something to do with allocators but I can't manage to understand how to fix it.\nHow can I make my map do this conversion but also stays general as I will need it with other (own-implemented) classes?</p>\n\n<p><strong>EDIT :</strong> After solving \"string\" problem, I had problems when passing int because it was waiting for an &amp;int. Followed kebs advice and implemented a vector> instead and got rid of conversion problems... :)</p>\n"}, {"tags": ["c++", "c++11", "move", "unique-ptr"], "comments": [{"owner": {"reputation": 1368, "user_id": 3878405, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cd7fbf1b3f55fad1bb62300c97593fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Poriferous", "link": "https://stackoverflow.com/users/3878405/poriferous"}, "edited": false, "score": 3, "creation_date": 1453911597, "post_id": 35042548, "comment_id": 57809460, "body": "Have you ever considered using raw pointers? It&#39;s these situations where so-called &#39;smart pointers&#39; are extremely impractical for use."}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 4, "creation_date": 1453911597, "post_id": 35042548, "comment_id": 57809461, "body": "This code definitely shouldn\u2019t crash, at least not for the reason you mention \u2014 <code>std::move</code> doesn\u2019t actually perform a move, and <code>p-&gt;x</code> does <i>not</i> access <code>p</code> after the move."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 14, "creation_date": 1453911714, "post_id": 35042548, "comment_id": 57809543, "body": "@KonradRudolph: It could still fail. The initialization of the parameter to <code>transform2</code> <i>will</i> perform move construction. At which point, <code>p</code> in <code>transform1</code> is empty. Remember: compilers can re-order these expressions any way they see fit."}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1453911854, "post_id": 35042548, "comment_id": 57809634, "body": "@NicolBolas Expression reordering alone cannot cause the crash because, as mentioned, the expression <code>std::move(p)</code> does nothing, it just changes the static type of the expression. That said, you might be right because I don\u2019t know at what exact time point parameter initialisation happens; I <i>thought</i> it happened after all parameter expressions were evaluated, but I have no idea."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1453912534, "post_id": 35042548, "comment_id": 57810131, "body": "Why pass <code>p-&gt;x</code> separately when you&#39;re passing the whole object anyway?"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 1, "creation_date": 1453912624, "post_id": 35042548, "comment_id": 57810191, "body": "@JonathanPotter: Presumably, <code>transform2</code> could be used with a value other than <code>p-&gt;x</code>; <code>transform2</code> is general purpose multiplication, <code>transform1</code> is a specialization that squares."}, {"owner": {"reputation": 1553, "user_id": 1708860, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/22d6178773edb63f7d8fbe830f1c06f2?s=128&d=identicon&r=PG", "display_name": "user1708860", "link": "https://stackoverflow.com/users/1708860/user1708860"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1453912882, "post_id": 35042548, "comment_id": 57810354, "body": "@KonradRudolph you are right, order of evaluation is not specified in the standard, see <a href=\"http://stackoverflow.com/questions/2934904/order-of-evaluation-in-c-function-parameters\" title=\"order of evaluation in c function parameters\">stackoverflow.com/questions/2934904/&hellip;</a> thus using move at any point of the program will cause any use of that object later on to activate UB."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1453912897, "post_id": 35042548, "comment_id": 57810373, "body": "If you are not transferring ownership, you should not be passing a smart pointer. Anyway, Nicol Bolas nailed it."}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "reply_to_user": {"reputation": 1553, "user_id": 1708860, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/22d6178773edb63f7d8fbe830f1c06f2?s=128&d=identicon&r=PG", "display_name": "user1708860", "link": "https://stackoverflow.com/users/1708860/user1708860"}, "edited": false, "score": 0, "creation_date": 1453913452, "post_id": 35042548, "comment_id": 57810799, "body": "@user1708860 I am actually saying the exact opposite: the mere use of <code>std::move</code> does <i>not</i> cause later uses of that object to be UB. On the contrary, the following code is completely fine according to the standard: <code>auto&amp;&amp; q = std::move(p); p-&gt;x;</code>. You have a misconception about what <code>std::move</code> does."}, {"owner": {"reputation": 1553, "user_id": 1708860, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/22d6178773edb63f7d8fbe830f1c06f2?s=128&d=identicon&r=PG", "display_name": "user1708860", "link": "https://stackoverflow.com/users/1708860/user1708860"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1453914130, "post_id": 35042548, "comment_id": 57811285, "body": "@KonradRudolph, after looking it up, i see what you mean. The code is indeed fine, as is - it will not activate UB. If i understand correctly it will activate unspecified behavior, which will not cause a crash, but it is not promised to give a correct result."}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "reply_to_user": {"reputation": 1553, "user_id": 1708860, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/22d6178773edb63f7d8fbe830f1c06f2?s=128&d=identicon&r=PG", "display_name": "user1708860", "link": "https://stackoverflow.com/users/1708860/user1708860"}, "edited": false, "score": 0, "creation_date": 1453914311, "post_id": 35042548, "comment_id": 57811399, "body": "@user1708860 The code I\u2019ve shown in my comment is well-defined: it gives neither undefined nor unspecified behaviour, and it always gives the correct result, guaranteed. However, as for the code in OP\u2019s case: see Nicol\u2019s comment above (and my reply to that)."}, {"owner": {"reputation": 1553, "user_id": 1708860, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/22d6178773edb63f7d8fbe830f1c06f2?s=128&d=identicon&r=PG", "display_name": "user1708860", "link": "https://stackoverflow.com/users/1708860/user1708860"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1453914849, "post_id": 35042548, "comment_id": 57811778, "body": "@KonradRudolph can you quote the standard or some other resource?"}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "reply_to_user": {"reputation": 1553, "user_id": 1708860, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/22d6178773edb63f7d8fbe830f1c06f2?s=128&d=identicon&r=PG", "display_name": "user1708860", "link": "https://stackoverflow.com/users/1708860/user1708860"}, "edited": false, "score": 0, "creation_date": 1453916468, "post_id": 35042548, "comment_id": 57812842, "body": "@user1708860 <a href=\"http://en.cppreference.com/w/cpp/utility/move\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/utility/move</a> is sufficient \u2014 look at the section \u201cReturn value\u201d in particular. That\u2019s all <code>std::move</code> does!"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 3, "creation_date": 1453916945, "post_id": 35042548, "comment_id": 57813197, "body": "What would be nice is a compiler that warns about possible use of moved-from objects, in the same way as for uninitialized variables."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1453919485, "post_id": 35042548, "comment_id": 57814850, "body": "The comment in the code in the question is a bit misleading. The issue is that you could access <code>p</code> after the move construction of the function parameter takes place."}, {"owner": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1453919792, "post_id": 35042548, "comment_id": 57815018, "body": "@DavidSchwartz Improved comment, thanks"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1453920806, "post_id": 35042548, "comment_id": 57815645, "body": "@NicolBolas Are the expressions fully evaluated before any parameter initialization occurs, or can the expressions <i>and parameter initialization</i> be reordered?  I suspect initialization can be reordered relative to each other and the expressions, but Konrad&#39;s point is that expression reordering is insufficient, I think."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1453922904, "post_id": 35042548, "comment_id": 57816855, "body": "@Yakk: &quot;<i>can the expressions and parameter initialization be reordered</i>&quot; I don&#39;t know. Generally speaking, when esoteric rules like reording are involved, I err on the side of caution."}], "answers": [{"comments": [{"owner": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "edited": false, "score": 0, "creation_date": 1453913038, "post_id": 35042638, "comment_id": 57810469, "body": "Yes, but the question is &quot;Is there a <i>more robust convention</i> than simply making sure you get everything you need from p before transferring ownership to the next function via std::move&quot;, which is what you suggest. The idea is to prevent this bug in general."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "edited": false, "score": 2, "creation_date": 1453913649, "post_id": 35042638, "comment_id": 57810950, "body": "@Danra, but you can&#39;t. You can not use contents of the pointer after it was moved, and (as outlined in the comments) if you use <code>std::move</code> in the function calling context it is undefined when the object will be moved. In a single-threaded program you can get a raw pointer and use it in the function arguments, though. Is this what you are looking to get?"}, {"owner": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "edited": false, "score": 0, "creation_date": 1453913941, "post_id": 35042638, "comment_id": 57811153, "body": "No, I&#39;m looking for a way which could prevent this seemingly (to me at least) easy bug to make. e.g. Some sort of move-like operation but which would only invalidate the object after it goes out of scope (and before its destructor is called)"}, {"owner": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "edited": false, "score": 0, "creation_date": 1453914119, "post_id": 35042638, "comment_id": 57811276, "body": "But that&#39;s just an example, I&#39;m open to any other robust solution, if one exists"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "edited": false, "score": 1, "creation_date": 1453914223, "post_id": 35042638, "comment_id": 57811339, "body": "@Danra, this is not unique_ptr does! It invalidates the object right after the move, because it is very rationale for it&#39;s existance. If the object would be invalidated only when it goes out of scope, you would end up with more than one owner (the one which is still in-scope, and the one you&#39;ve just passed it to). What you are saying seems to be use-case for shared_ptr, not unique_ptr."}, {"owner": {"reputation": 1553, "user_id": 1708860, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/22d6178773edb63f7d8fbe830f1c06f2?s=128&d=identicon&r=PG", "display_name": "user1708860", "link": "https://stackoverflow.com/users/1708860/user1708860"}, "reply_to_user": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "edited": false, "score": 0, "creation_date": 1453914288, "post_id": 35042638, "comment_id": 57811381, "body": "@Danra if you are looking for a dummy proof way of doing this, you should look for something more like David Haim&#39;s answer and remove the ownership logic."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 1553, "user_id": 1708860, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/22d6178773edb63f7d8fbe830f1c06f2?s=128&d=identicon&r=PG", "display_name": "user1708860", "link": "https://stackoverflow.com/users/1708860/user1708860"}, "edited": false, "score": 0, "creation_date": 1453914333, "post_id": 35042638, "comment_id": 57811418, "body": "@user1708860, i totally disagree with what David is saying. He is effectively advocating agains move semantics at all."}, {"owner": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "edited": false, "score": 0, "creation_date": 1453914624, "post_id": 35042638, "comment_id": 57811629, "body": "@SergeyA Not really, shared_ptr offers more semantics such as copying which increments its counter. The requirement of staying &#39;alive&#39; until going out of scope is a weaker one than what shared_ptr provides."}, {"owner": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "reply_to_user": {"reputation": 1553, "user_id": 1708860, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/22d6178773edb63f7d8fbe830f1c06f2?s=128&d=identicon&r=PG", "display_name": "user1708860", "link": "https://stackoverflow.com/users/1708860/user1708860"}, "edited": false, "score": 0, "creation_date": 1453914890, "post_id": 35042638, "comment_id": 57811801, "body": "@user1708860 This is a simplified example. Assume move semantics are indeed required. The problem presented is a general one."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 5, "last_activity_date": 1453916228, "last_edit_date": 1453916228, "creation_date": 1453911691, "answer_id": 35042638, "question_id": 35042548, "link": "https://stackoverflow.com/questions/35042548/how-to-properly-forward-unique-ptr/35042638#35042638", "title": "How to properly forward unique_ptr?", "body": "<p>Since you do not really need to access <code>p</code> after it was moved, one way would be to get <code>p-&gt;x</code> before the move and then use it. </p>\n\n<p>Example:</p>\n\n<pre><code>unique_ptr&lt;C&gt; transform1(unique_ptr&lt;C&gt; p) {\n    int x = p-&gt;x;\n    return transform2(move(p), x);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "edited": false, "score": 0, "creation_date": 1453912376, "post_id": 35042884, "comment_id": 57810008, "body": "Indeed, it&#39;s a simplified example. In my real case I do need to transfer ownership."}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "reply_to_user": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "edited": false, "score": 0, "creation_date": 1453912433, "post_id": 35042884, "comment_id": 57810060, "body": "your functions shouldn&#39;t do more that one good thing. passing owneship and doing math is a job for two functions, not one."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1453912536, "post_id": 35042884, "comment_id": 57810132, "body": "@DavidHaim, if what you are saying would be true, there would be no need for any ownership semantics within any smart pointer."}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1453912608, "post_id": 35042884, "comment_id": 57810175, "body": "@SergeyA no, I&#39;m saying that there should be functions which pass memory, and functions that do math, not both."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1453916661, "post_id": 35042884, "comment_id": 57812989, "body": "This should just pass a non-owning raw pointer (or an <code>observer_ptr</code>). If you are not touching ownership, you shouldn&#39;t care what owns the object."}], "tags": [], "owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "is_accepted": false, "score": 1, "last_activity_date": 1453912301, "creation_date": 1453912301, "answer_id": 35042884, "question_id": 35042548, "link": "https://stackoverflow.com/questions/35042548/how-to-properly-forward-unique-ptr/35042884#35042884", "title": "How to properly forward unique_ptr?", "body": "<p>ammm... not much of an answer but a suggestion - why pass the ownership of the <code>unique_ptr</code> in the first place? it seems that <code>transformXXX</code> play with the integer value, why does memory management has to play a part here? </p>\n\n<p>pass the <code>unique_ptr</code> by reference : </p>\n\n<pre><code>unique_ptr&lt;C&gt;&amp; transform1(unique_ptr&lt;C&gt;&amp; p) {\n    return transform2(p, p-&gt;x); // \n}\n\nunique_ptr&lt;C&gt;&amp; transform2(unique_ptr&lt;C&gt; p&amp;, int val) {\n    p-&gt;x *= val;\n    return p;\n}\n</code></pre>\n\n<p>pass ownership <strong>outside</strong> these functions. create specific functions which this is their job. seperate algebric logic from memory management.</p>\n"}, {"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 5, "creation_date": 1453916552, "post_id": 35043929, "comment_id": 57812907, "body": "&quot;initialization of function parameters&quot; is not a &quot;expression or statement in the body of the called function&quot;. In fact, your own quote says that it &quot;occurs within the context of the calling function&quot;, not the called function."}, {"owner": {"reputation": 1176, "user_id": 1371191, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh4.googleusercontent.com/-7bV-CLvBrNE/AAAAAAAAAAI/AAAAAAAAAE8/i44ypczz624/photo.jpg?sz=128", "display_name": "Mike Lui", "link": "https://stackoverflow.com/users/1371191/mike-lui"}, "edited": false, "score": 0, "creation_date": 1546055966, "post_id": 35043929, "comment_id": 94771027, "body": "Note the possible output should read <code>1, 0xb0f010, 0, 1</code>, to match the edited code. You can&#39;t make edits of 1 character so this comment serves as a sanity check to anyone reading."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "is_accepted": false, "score": 4, "last_activity_date": 1454068122, "last_edit_date": 1495535278, "creation_date": 1453915143, "answer_id": 35043929, "question_id": 35042548, "link": "https://stackoverflow.com/questions/35042548/how-to-properly-forward-unique-ptr/35043929#35043929", "title": "How to properly forward unique_ptr?", "body": "<p>The code is <strong>not</strong> fine.</p>\n\n<ul>\n<li>std::move is nothing but a cast (g++: something like\n<code>static_cast&lt;typename std::remove_reference&lt;T&gt;::type&amp;&amp;&gt;(value)</code>)</li>\n<li>Value computation and side effects of each argument expression are\nsequenced before execution of the called function.</li>\n<li><strong>However</strong>, the initialization of function parameters takes place in the\ncontext of the calling function. (Thanks to <a href=\"https://stackoverflow.com/users/2756719/t-c\">T.C</a>)</li>\n</ul>\n\n<p>Quotes from the draft N4296:</p>\n\n<p>1.9/15 Program execution</p>\n\n<blockquote>\n  <p>[...] When calling a function (whether or not the function is inline), every\n  value computation and side effect associated with any argument\n  expression, or with the postfix expression designating the called\n  function, is sequenced before execution of every expression or\n  statement in the body of the called function. [...]</p>\n</blockquote>\n\n<p>5.2.2/4 Function call</p>\n\n<blockquote>\n  <p>When a function is called, each parameter (8.3.5) shall be initialized\n  (8.5, 12.8, 12.1) with its corresponding argument. [ Note: Such\n  initializations are indeterminately sequenced with respect to each\n  other (1.9) end note ] [...] The initialization and destruction of each\n  parameter occurs within the context of the calling function. [...]</p>\n</blockquote>\n\n<p>A sample (g++ 4.8.4):</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\nstruct X\n{\n    int x = 1;\n    X() {}\n    X(const X&amp;) = delete;\n    X(X&amp;&amp;) {}\n    X&amp; operator = (const X&amp;) = delete;\n    X&amp; operator = (X&amp;&amp;) = delete;\n};\n\n\nvoid f(std::shared_ptr&lt;X&gt; a, X* ap, X* bp, std::shared_ptr&lt;X&gt; b){\n    std::cout &lt;&lt; a-&gt;x &lt;&lt; \", \" &lt;&lt; ap &lt;&lt; \", \" &lt;&lt; bp &lt;&lt; \", \" &lt;&lt; b-&gt;x &lt;&lt; '\\n';\n}\n\nint main()\n{\n    auto a = std::make_unique&lt;X&gt;();\n    auto b = std::make_unique&lt;X&gt;();\n    f(std::move(a), a.get(), b.get(), std::move(b));\n}\n</code></pre>\n\n<p>The output may be <code>1, 0xb0f010, 0, 2</code>, showing a (zero) pointer moved away.</p>\n"}, {"comments": [{"owner": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "edited": false, "score": 0, "creation_date": 1453921616, "post_id": 35045792, "comment_id": 57816107, "body": "The first solution seems a bit naive to me; rvalue-reference parameters are widespread since c++11, and as soon as you chain more than one such function passing a parameter through the chain, you are at risk of getting the above bug, and it <i>looks</i> fine to just one-line the entire forwarding to the next function in the chain, including the move. The second solution is nice but not something easily accessible to everyone, to prevent them from tripping over the potential bug."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "edited": false, "score": 0, "creation_date": 1453922119, "post_id": 35045792, "comment_id": 57816378, "body": "@Danra Forwarding, without accessing data, is as safe as the caller was: if they didn&#39;t flag a mutation at the same time as a read, you should be fine.  Forwarding, with additional data access, requires scrutiny that the thing you are forwarding isn&#39;t the thing you are reading elsewhere (as a forward is a possible move)?  Can you construct an explicit counter example?"}, {"owner": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "edited": false, "score": 0, "creation_date": 1453922641, "post_id": 35045792, "comment_id": 57816683, "body": "Explicit counter example to what? Not sure I gotcha."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "edited": false, "score": 0, "creation_date": 1453926206, "post_id": 35045792, "comment_id": 57818776, "body": "@Danra My claim is that forwarding won&#39;t introduce such errors, because the error will have occurred at the point where the forwarding was <i>started</i>.  On the other hand, you said that chained forwards somehow increase the risk of the above bug.  Is there an example where this happens deep in a chain, but not obviously at the interface where the move was done?"}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1454008062, "post_id": 35045792, "comment_id": 57862874, "body": "First two sentences &quot;Stop doing more than one thing on a single line, unless the operations are non-mutating.  Code isn&#39;t faster if it is all on one line, and it is often less correct.&quot; of this answer are really the crux of the issue imo. The other answers are beating around the bush."}, {"owner": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "edited": false, "score": 0, "creation_date": 1454239973, "post_id": 35045792, "comment_id": 57947075, "body": "@Yakk I just meant that the offending function (transform1 in my example) might itself have gotten its parameter through a move constructor, and this could become more common as forwarding becomes more commonplace in code: it&#39;s reasonable there will be a few functions in a chain forwarding parameters one to the next, with one of the functions in the middle doing a mistake such as in transform1."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 3, "last_activity_date": 1453921237, "creation_date": 1453921237, "answer_id": 35045792, "question_id": 35042548, "link": "https://stackoverflow.com/questions/35042548/how-to-properly-forward-unique-ptr/35045792#35045792", "title": "How to properly forward unique_ptr?", "body": "<p>Stop doing more than one thing on a single line, unless the operations are non-mutating.</p>\n\n<p>Code isn't faster if it is all on one line, and it is often less correct.</p>\n\n<p><code>std::move</code> is a mutating operation (or more accurately, it flags an operation to follow as \"mutate ok\").  It should be on its own line, or at the least it should be on a line with no other interaction with its parameter.</p>\n\n<p>This is like <code>foo( i++, i )</code>.  You modified something and also used it.</p>\n\n<p>If you want a universal brainless habit, simply bind all arguments in <code>std::forward_as_tuple</code>, and call <code>std::apply</code> to call the function.</p>\n\n<pre><code>unique_ptr&lt;C&gt; transform1(unique_ptr&lt;C&gt; p) {\n  return std::experimental::apply( transform2, std::forward_as_tuple( std::move(p), p-&gt;x ) );\n}\n</code></pre>\n\n<p>which avoids the problem because the mutation of <code>p</code> is done on a line different than the reading of the <code>p.get()</code> address in <code>p-&gt;x</code>.</p>\n\n<p>Or, roll your own:</p>\n\n<pre><code>template&lt;class F, class...Args&gt;\nauto call( F&amp;&amp; f, Args&amp;&amp;...args )\n-&gt;std::result_of_t&lt;F(Args...)&gt;\n{\n  return std::forward&lt;F&gt;(f)(std::forward_as_tuple(std::forward&lt;Args&gt;)...);\n}\nunique_ptr&lt;C&gt; transform1(unique_ptr&lt;C&gt; p) {\n  return call( transform2, std::move(p), p-&gt;x );\n}\n</code></pre>\n\n<p>The goal here is to order the evaluation-of-parameter expressions separately from the evaluation-of-parameter-initialization.  It still doesn't fix some move-based issues (like SSO <code>std::basic_string</code> move-guts and reference-to-char issues).</p>\n\n<p>Next to that, hope that a compiler will add warnings for unordered mutate-and-read in the general case.</p>\n"}, {"comments": [{"owner": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "edited": false, "score": 0, "creation_date": 1453922347, "post_id": 35045817, "comment_id": 57816512, "body": "Once the move construction takes place, anything inside p whether a POD or an object would be invalid, so I&#39;m not sure I got the gist of your extended example. Regarding the philosophical part, I feel the demonstrated bug could be a common gotcha, so I hoped there is a more robust way to avoid it. Given that there isn&#39;t one currently, I hope one could be added to std."}, {"owner": {"reputation": 7447, "user_id": 602372, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/q6bLu.jpg?s=128&g=1", "display_name": "Yam Marcovic", "link": "https://stackoverflow.com/users/602372/yam-marcovic"}, "reply_to_user": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "edited": false, "score": 0, "creation_date": 1453922619, "post_id": 35045817, "comment_id": 57816665, "body": "@Danra The point is that even if you had taken care to fetch <code>p-&gt;x</code> <i>prior</i> to issuing the call, then, depending on what <code>p-&gt;x</code> <i>is</i>, you might still encounter bugs. It just went to show that there&#39;s a lot of details that need to be taken into consideration to write correct C++. I&#39;d say that <code>std::move()</code> isn&#39;t a &quot;do-always&quot; kind of thing. Rather, it should be used when <i>necessary</i> to achieve correctness (first), then performance. It&#39;s an inherently dangerous tool, since it allows you to retain access to invalid objects."}, {"owner": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "edited": false, "score": 0, "creation_date": 1453923111, "post_id": 35045817, "comment_id": 57816979, "body": "I see your point now. But copying/moving p-&gt;x beforehand, and still having its lifetime depend on *p, sounds to me like you&#39;ve designed something wrong :) However, copying p-&gt;x into a parameter of a function call, at the same time as you&#39;re moving p itself into another parameter of the function call, sounds like it should work - or at least looks like it should, in a one-liner."}], "tags": [], "owner": {"reputation": 7447, "user_id": 602372, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/q6bLu.jpg?s=128&g=1", "display_name": "Yam Marcovic", "link": "https://stackoverflow.com/users/602372/yam-marcovic"}, "is_accepted": false, "score": 1, "last_activity_date": 1453921334, "creation_date": 1453921334, "answer_id": 35045817, "question_id": 35042548, "link": "https://stackoverflow.com/questions/35042548/how-to-properly-forward-unique-ptr/35045817#35045817", "title": "How to properly forward unique_ptr?", "body": "<p>Generally speaking, no, there isn't a fool-proof method of doing this without taking care of the small details. Where it gets really sneaky is in member-initialization-lists.</p>\n\n<p>Just an as example that goes one step beyond yours, what happens if <code>p-&gt;x</code> is itself an object whose lifetime depends on <code>*p</code>, and then <code>transform2()</code>, which is effectively <em>unaware</em> of the temporal relationship between its arguments, passes <code>val</code> onwards to some sink function, without taking care to keep <code>*p</code> alive. And, given its own scope, how would it know it should?</p>\n\n<p>Move semantics are just one of a set of features that can be easily abused, and needs to be handled with care. Then again, that's part of the essential charm of C++: it requires attention to details. In return for that added responsibility, it gives you more control&mdash;or is it the other way around?</p>\n"}, {"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 2, "creation_date": 1453952162, "post_id": 35048190, "comment_id": 57828988, "body": "Actually, P0145 would fix this to do left-to-right."}], "tags": [], "owner": {"reputation": 1278, "user_id": 166389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a26ca7932c9550b26ff5bcaae562d2f?s=128&d=identicon&r=PG", "display_name": "TBBle", "link": "https://stackoverflow.com/users/166389/tbble"}, "is_accepted": false, "score": 3, "last_activity_date": 1453974400, "last_edit_date": 1495541715, "creation_date": 1453929451, "answer_id": 35048190, "question_id": 35042548, "link": "https://stackoverflow.com/questions/35042548/how-to-properly-forward-unique-ptr/35048190#35048190", "title": "How to properly forward unique_ptr?", "body": "<p>As noted in <a href=\"https://stackoverflow.com/a/35043929/166389\">Dieter L\u00fccking's answer</a>, the value computations are sequenced before function body, so the <code>std::move</code> and <code>operator -&gt;</code> are sequenced before the body of the function --- 1.9/15.</p>\n\n<p>However, this does <em>not</em> specify that the parameter initialization is done after all of those computations, they can appear anywhere with regard to each other, and to non-dependent value computations, as long as they are done before the function body --- 5.2.2/4.</p>\n\n<p>This means the behaviour is undefined here, as one expression modifies p (moving into a temporary argument) and the other uses the value of p, see <a href=\"https://stackoverflow.com/a/26911480/166389\">https://stackoverflow.com/a/26911480/166389</a>. Although as mentioned there, <a href=\"http://wg21.link/p0145\" rel=\"nofollow noreferrer\">P0145</a> proposes to fix the evaluation order to left-to-right (in this case). Which would mean your code is broken, but <code>transform2(p-&gt;x, move(p))</code> would do what you want. (Corrected, thanks to <a href=\"https://stackoverflow.com/users/2756719/t-c\">T.C.</a>)</p>\n\n<p>As far as idioms go to avoid this, consider <a href=\"https://stackoverflow.com/a/35042884/166389\">David Haim's approach</a> taking the <code>unique_ptr&lt;C&gt;</code> by reference, although that's pretty opaque to the caller. You're signalling something like \"May modify this pointer\". <code>unique_ptr</code>'s moved-from state is reasonably clear, so this isn't likely to bite you as badly as if you move from a passed-in object reference or something.</p>\n\n<p>In the end, you need a sequence point between using <code>p</code> and modifying <code>p</code>.</p>\n"}], "owner": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2326, "favorite_count": 1, "answer_count": 6, "score": 9, "last_activity_date": 1454068122, "creation_date": 1453911441, "last_edit_date": 1453919766, "question_id": 35042548, "link": "https://stackoverflow.com/questions/35042548/how-to-properly-forward-unique-ptr", "title": "How to properly forward unique_ptr?", "body": "<p>What is generally the proper way to forward an std::unique_ptr?</p>\n\n<p>The following code uses <code>std::move</code>, which I thought was the considered practice, but it crashes with clang.</p>\n\n<pre><code>class C {\n   int x;\n}\n\nunique_ptr&lt;C&gt; transform1(unique_ptr&lt;C&gt; p) {\n    return transform2(move(p), p-&gt;x); // &lt;--- Oops! could access p after move construction takes place, compiler-dependant\n}\n\nunique_ptr&lt;C&gt; transform2(unique_ptr&lt;C&gt; p, int val) {\n    p-&gt;x *= val;\n    return p;\n}\n</code></pre>\n\n<p>Is there a more robust convention than simply making sure you get everything you need from <code>p</code> before transferring ownership to the next function via <code>std::move</code>? It seems to me using <code>move</code> on an object and accessing it to provide a parameter to the same function call could be a common mistake to make.</p>\n"}, {"tags": ["c++", "opengl"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 3794278, "user_type": "registered", "profile_image": "https://graph.facebook.com/515068172/picture?type=large", "display_name": "user3794278", "link": "https://stackoverflow.com/users/3794278/user3794278"}, "edited": false, "score": 0, "creation_date": 1454426771, "post_id": 35042861, "comment_id": 58033056, "body": "Hey, thanks for the answer. Thing is, I am aware why this error occurs and how i can force the application reproduce it but i would like a way to return the application to a valid state after this error occurs"}], "tags": [], "owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "is_accepted": false, "score": 0, "last_activity_date": 1453912244, "creation_date": 1453912244, "answer_id": 35042861, "question_id": 35042505, "link": "https://stackoverflow.com/questions/35042505/catch-nvidia-opengl-driver-lost-connection-error/35042861#35042861", "title": "catch &quot;NVIDIA OpenGL driver lost connection&quot; error", "body": "<p>Modern Windows versions put a number of hard constraints on the responsiveness of applications. If a process spends too much time in a graphics operation driver call <em>or</em> takes too long to fetch events from Windows a watchdog triggers and Windows assumes that the process got stuck in an infinite loop <em>or</em> violates the responsivenes demands and may \"do\" something about it.</p>\n\n<p>Try what happens if you break down a single <code>glDraw\u2026</code> call into a number of smaller batches. In general you want to minimize the number of <code>glDraw\u2026</code> calls, but if a single <code>glDraw\u2026</code> call takes more than 10ms or so to complete, you're far beyond OpenGL overhead territory anyway.</p>\n\n<p>Note that due to the asynchronous nature of OpenGL that watchdog may bark in a OpenGL finishing call <code>glFinish</code> or <code>SwapBuffers</code>. In that case it may help to help to add <code>glFlush</code> commands between the draw batches. If that doesn't help try <code>glFinish</code> (which will have a performance impact). If that doesn't help, too. Create an auxiliary OpenGL context in a separate thread that renders to a texture using a FBO and have the main thread display only the contents of this intermediary texture. And if that doesn't help, create the auxiliary context on a PBuffer instead on the same window as your main context.</p>\n"}], "owner": {"reputation": 11, "user_id": 3794278, "user_type": "registered", "profile_image": "https://graph.facebook.com/515068172/picture?type=large", "display_name": "user3794278", "link": "https://stackoverflow.com/users/3794278/user3794278"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1453913915, "creation_date": 1453911315, "last_edit_date": 1495540754, "question_id": 35042505, "link": "https://stackoverflow.com/questions/35042505/catch-nvidia-opengl-driver-lost-connection-error", "title": "catch &quot;NVIDIA OpenGL driver lost connection&quot; error", "body": "<p>I am developing an application in C++ (MVS2008) and I have problem like described in this thread:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/13638616/nvidia-opengl-driver-lost-connection\">NVIDIA OpenGL driver lost connection</a></p>\n\n<p>what i want to ask is not for a solution, or why is this happenning (like in the posted thread), i want to ask if i can \"catch\" this error and do something before the application crushes, like an output log with some relevant information of the application state.</p>\n\n<p>The error occurs every now and then while running the application without clear causes, therefore i would like such a thing. </p>\n"}, {"tags": ["c++", "windows", "mfc"], "comments": [{"owner": {"reputation": 161657, "user_id": 122718, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/213Kw.png?s=128&g=1", "display_name": "usr", "link": "https://stackoverflow.com/users/122718/usr"}, "edited": false, "score": 1, "creation_date": 1453911515, "post_id": 35042472, "comment_id": 57809407, "body": "Using a deallocated object is undefined behavior. There is no way to recover from that. You <i>need</i> a strategy that never accesses deallocated objects."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1453911702, "post_id": 35042472, "comment_id": 57809538, "body": "Pointers can point to anywhere:  valid locations and invalid locations (no memory at the address, etc).  The harder validation comes when the pointer is pointing within a valid area of memory.  Without better data, there is no telling if a pointer is pointing to a valid object, a wrong object of the same type or an object of an incompatible type."}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1453912738, "post_id": 35042472, "comment_id": 57810265, "body": "<code>if (pWN-&gt;checked &amp;&amp; IsWindow(pWN-&gt;pWnd-&gt;GetSafeHwnd()))</code> you are not checking if <code>pWN</code> is non-NULL, same with <code>pWN-&gt;pWnd</code> Also you can get direct access to frame window via <code>AfxGetApp()-&gt;m_pMainWnd</code>"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1453912858, "post_id": 35042472, "comment_id": 57810333, "body": "You need to fix your error. Your specific error is: Storing redundant information. If it weren&#39;t redundant, you wouldn&#39;t run into a situation, where you are unsure whether or not a pointer is valid. And there is absolutely no way at all to verify, whether a pointer points to an object of a particular type."}, {"owner": {"reputation": 358, "user_id": 5112486, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/055d9302c2a0e6c1aff1876a69c6e29c?s=128&d=identicon&r=PG&f=1", "display_name": "Caladbolgll", "link": "https://stackoverflow.com/users/5112486/caladbolgll"}, "reply_to_user": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1453920066, "post_id": 35042472, "comment_id": 57815199, "body": "@BarmakShemirani: I&#39;ve gotten rid of them, because dereferencing either of those doesn&#39;t necessarily return NULL even if the pointer is invalid."}], "answers": [{"tags": [], "owner": {"reputation": 3480, "user_id": 198861, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a34e839b94f9b510cc9ee28feacd8458?s=128&d=identicon&r=PG", "display_name": "dwo", "link": "https://stackoverflow.com/users/198861/dwo"}, "is_accepted": false, "score": 1, "last_activity_date": 1453912284, "creation_date": 1453912284, "answer_id": 35042875, "question_id": 35042472, "link": "https://stackoverflow.com/questions/35042472/how-can-i-validate-cwnd-object/35042875#35042875", "title": "How can I &quot;validate&quot; CWnd* object?", "body": "<p>One possibility would be to start with your main window, and recursively search through the child windows if you find the HWND in question.</p>\n\n<p>Get the first child with <code>CWnd::GetWindow(GW_CHILD)</code> and the next windows with <code>CWnd::GetWindow(GW_HWNDNEXT)</code>.</p>\n"}], "owner": {"reputation": 358, "user_id": 5112486, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/055d9302c2a0e6c1aff1876a69c6e29c?s=128&d=identicon&r=PG&f=1", "display_name": "Caladbolgll", "link": "https://stackoverflow.com/users/5112486/caladbolgll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 806, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1453912403, "creation_date": 1453911244, "last_edit_date": 1453912403, "question_id": 35042472, "link": "https://stackoverflow.com/questions/35042472/how-can-i-validate-cwnd-object", "title": "How can I &quot;validate&quot; CWnd* object?", "body": "<p>(There's a TL;DR on the last line)</p>\n\n<p>I'm implementing a handler to close selected windows open in a software application. Here's a rough code:</p>\n\n<pre><code>void CDlg_Dummy_Dialog::OnCloseWindows()\n{\n    for (int i = 0; i &lt; m_WindowsInfo.size(); i++) {\n        Window_Node *pWN = &amp;m_WindowsInfo.at(i);\n        if (pWN-&gt;checked &amp;&amp; IsWindow(pWN-&gt;pWnd-&gt;GetSafeHwnd())) {\n            pWN-&gt;pWnd-&gt;GetParentFrame()-&gt;SendMessage(WM_CLOSE);\n        }\n    }\n}\n</code></pre>\n\n<p>Here are some declarations of the parameters shown above:</p>\n\n<pre><code>struct Window_Node {\n    CString name;\n    CString path;\n    CWnd *pWnd;\n    BOOL checked;\n    HICON icon;\n    ....\n};\n\nclass CDlg_Dummy_Dialog : public CDialog {\n    ...\nprotected:\n    std::vector&lt;struct Window_Node&gt; m_WindowsInfo;\n    ...\n}\n</code></pre>\n\n<p>Also, there can be multiple instances of <code>Window_Node</code> with different <code>pWnd</code> parameter, originating from a single <code>CDocument</code> class (ie. different types of windows exist to show different displays for the document).</p>\n\n<p><a href=\"https://i.stack.imgur.com/zp1sK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zp1sK.png\" alt=\"enter image description here\"></a></p>\n\n<p>For this software, if the first window of the document (which is always the \"green\" Window type in the diagram) is closed, all other windows associated with that document will automatically be closed with them. This is where the problem happens.</p>\n\n<p>If the user selects multiple windows from the same document (with the green window among them), it closes all windows by the time it finishes the first iteration, and all <code>pWnd</code> pointers are now pointing to a now unassigned memory. Therefore, when it tries to call <code>GetSafeHwnd()</code> on the next iteration, it prompts a memorry access violation error:</p>\n\n<pre><code>First-chance exception at 0x00000000521B4AD0 (mfc100d.dll) in Settle3D.exe: 0xC0000005: Access violation reading location 0x00000000136943E0.\nUnhandled exception at 0x00000000521B4AD0 (mfc100d.dll) in Settle3D.exe: 0xC000041D: An unhandled exception was encountered during a user callback.\n</code></pre>\n\n<p>I'm aware that the easy fix would be to iterate through the vector in the opposite direction. However, I am trying to integrate this method on several other software as well, and they don't necessarily organize their windows in the same manner.</p>\n\n<p>So, after all the long question above, here's TL;DR:</p>\n\n<p><strong>Is there any way to check if an instance of CWnd* is pointing to a valid window?</strong></p>\n"}]