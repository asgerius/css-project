[{"tags": ["c++", "boost-icl"], "answers": [{"comments": [{"owner": {"reputation": 3285, "user_id": 2961540, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/sECMV.jpg?s=128&g=1", "display_name": "HEKTO", "link": "https://stackoverflow.com/users/2961540/hekto"}, "edited": false, "score": 0, "creation_date": 1528988155, "post_id": 50848489, "comment_id": 88723334, "body": "Sorry to say - your <code>fill_slot</code> function is what I was trying to avoid asking this question. The ICL <code>interval_map</code> has eight template arguments - I hoped I could use them to customize the map in a way I need. For example - to use non-default functors, or to write my own ones. Or - to customize the <code>interval</code> type itself..."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 3285, "user_id": 2961540, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/sECMV.jpg?s=128&g=1", "display_name": "HEKTO", "link": "https://stackoverflow.com/users/2961540/hekto"}, "edited": false, "score": 0, "creation_date": 1529014705, "post_id": 50848489, "comment_id": 88735631, "body": "Hoping doesn&#39;t really help a lot. See <a href=\"https://www.boost.org/doc/libs/1_67_0/libs/icl/doc/html/boost_icl/semantics/quantifiers__maps_of_numbers.html#boost_icl.semantics.quantifiers__maps_of_numbers.laws_for_quantifiers_of_signed_numbers\" rel=\"nofollow noreferrer\">Laws for Quantifiers of signed Numbers</a> &quot;Customizing&quot; the map to do other things will just make the behaviour undefined. If you understand in which your special-purpose semantics can fit these laws, then go for it. But as for now, I don&#39;t think it can (and a lot of details aren&#39;t described)."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 3285, "user_id": 2961540, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/sECMV.jpg?s=128&g=1", "display_name": "HEKTO", "link": "https://stackoverflow.com/users/2961540/hekto"}, "edited": false, "score": 0, "creation_date": 1529014961, "post_id": 50848489, "comment_id": 88735705, "body": "From where I&#39;m sitting it looks like you have two things: an <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a> on the one hand and a proper learning project on the other hand (Boost ICL). I think that&#39;s awesome. The library must be one of the most underrated Boost libraries. I&#39;m just not sure it holds a canned solution. Neither am I sure why you would want it to (if you go outside the designated purpose of the library and supposing the library <b>would</b> facilitate is, wouldn&#39;t you lose all the complexity guarantees that made it attractive in the fist place?)"}, {"owner": {"reputation": 3285, "user_id": 2961540, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/sECMV.jpg?s=128&g=1", "display_name": "HEKTO", "link": "https://stackoverflow.com/users/2961540/hekto"}, "edited": false, "score": 0, "creation_date": 1529026897, "post_id": 50848489, "comment_id": 88738179, "body": "The ICL looks like highly adaptable library, including its &quot;aggregating on overlap&quot; concept. Why there no &quot;aggregating on touch&quot; functionality? I hoped that more deeply involved in the ICL people could help me to find a way to where it&#39;s hidden"}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 1, "last_activity_date": 1528940734, "creation_date": 1528940734, "answer_id": 50848489, "question_id": 50847750, "link": "https://stackoverflow.com/questions/50847750/boost-interval-map-how-to-customize-aggregating-on-touch/50848489#50848489", "title": "Boost `interval_map` - how to customize aggregating on touch", "body": "<blockquote>\n  <p>This is more complicated for the interval_map - intervals, which touch each other and have different associated values, won't be joined:</p>\n</blockquote>\n\n<p>There's no difference, really.</p>\n\n<blockquote>\n  <p>I know how to customize the process of aggregating on overlap, however I need to customize another case - aggregating on touch.</p>\n</blockquote>\n\n<p>You seem to imply that</p>\n\n<pre><code> m += std::make_pair(IMap::interval_type::right_open(4, 8), 2);\n</code></pre>\n\n<p>will insert <code>[4, 8) -&gt; 2</code>.</p>\n\n<p>That's simply not the case. It's a codomain combination operation, and the results depend on prior state of the map. </p>\n\n<p>Of course, you can write it:</p>\n\n<pre><code>m.set({Ival::right_open(4, 8), 2});\n</code></pre>\n\n<p>If you need to, you can query the preceding slot, so your operation might look like:</p>\n\n<pre><code>// returns true if joined with preceding slot\nbool fill_slot(IMap&amp; m, int from, int till, int value) {\n    bool joined = false;\n    auto slot = Ival::right_open(from, till);\n\n    if (within(slot, m)) {\n        // There is overlap, I don't know how  you want to handle this.\n        // You can add some logic here.\n    } else {\n        auto preceding = m(from - 1);\n\n        if (preceding &amp;&amp; value == preceding + 1) {\n            joined = true;\n            value = preceding;\n        }\n    }\n\n    m.set({slot, value});\n    return joined;\n}\n</code></pre>\n\n<p>Now you can write test cases like:</p>\n\n<pre><code>int main() {\n    {\n        IMap m;\n        fill_slot(m,  0,  4,  1);\n        fill_slot(m,  4,  8,  2);\n        std::cout &lt;&lt; m &lt;&lt; std::endl;\n    }\n    {\n        IMap m;\n        fill_slot(m,  0,  4,  1);\n        fill_slot(m,  4,  8,  3);\n        std::cout &lt;&lt; m &lt;&lt; std::endl;\n    }\n    {\n        IMap m;\n        fill_slot(m,  0,  4,  1);\n        fill_slot(m,  5,  8,  2);\n        std::cout &lt;&lt; m &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p>And they print <strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/c538c4c032d61c9c\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>{([0,8)-&gt;1)}\n{([0,4)-&gt;1)([4,8)-&gt;3)}\n{([0,4)-&gt;1)([5,8)-&gt;2)}\n</code></pre>\n"}], "owner": {"reputation": 3285, "user_id": 2961540, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/sECMV.jpg?s=128&g=1", "display_name": "HEKTO", "link": "https://stackoverflow.com/users/2961540/hekto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 227, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1529068754, "creation_date": 1528933295, "last_edit_date": 1529068754, "question_id": 50847750, "link": "https://stackoverflow.com/questions/50847750/boost-interval-map-how-to-customize-aggregating-on-touch", "title": "Boost `interval_map` - how to customize aggregating on touch", "body": "<p>The Boost ICL <code>interval_set</code> can join <em>right-open</em> intervals, which <strong>touch each other</strong>, during adding them to the set. For example, intervals <code>[0,4)</code> and <code>[4,8)</code> will be joined to become an interval <code>[0,8)</code>.</p>\n\n<p>This is more complicated for the <code>interval_map</code> - intervals, which touch each other and have different associated values, won't be joined: </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;utility&gt;\n\n#include &lt;boost/icl/interval_map.hpp&gt;\n\nnamespace icl = boost::icl;\n\nusing IMap = icl::interval_map&lt;int, int&gt;;\n\nint main()\n{\n  IMap m;\n  m += std::make_pair(IMap::interval_type::right_open(0, 4), 1);\n  m += std::make_pair(IMap::interval_type::right_open(4, 8), 2);\n  std::cout &lt;&lt; m &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Output of this test program is below:</p>\n\n<pre><code>{([0,4)-&gt;1)([4,8)-&gt;2)}\n</code></pre>\n\n<p>I know how to customize the process of <em>aggregating on overlap</em>, however I need to customize another case - <strong>aggregating on touch</strong>. For example, if intervals touch each other <strong>and</strong> value of the left interval is equal to the value of the right interval <strong>minus 1</strong>, then intervals must be joined, and the resulting interval must have a value of the left interval. So, the program above should print:</p>\n\n<pre><code>{([0,8)-&gt;1)}\n</code></pre>\n\n<p>Is it possible to do that with currently available Boost ICL?</p>\n\n<p>I can do what I want using weird manipulations with the <code>interval_map</code>, but I think it'd be cumbersome and non-efficient. I'd prefer to be pointed in right direction to use currently available ICL customizations, functors etc.</p>\n"}, {"tags": ["c++", "parallel-processing", "openmp", "physics", "scientific-computing"], "comments": [{"owner": {"reputation": 280, "user_id": 9938686, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AJ5oC.jpg?s=128&g=1", "display_name": "2b-t", "link": "https://stackoverflow.com/users/9938686/2b-t"}, "edited": false, "score": 0, "creation_date": 1528933900, "post_id": 50847746, "comment_id": 88698963, "body": "I have tried to use a single loop instead of the triple loop only yielding the same results. The setups i have tried so far: Intel i7-4930K, 64GB DDR3 RAM, Windows 7 Enterprise; Intel i7-3930K, 32GB DDR3 RAM, Windows 7 Enterprise; Intel i7-4820K, 16GB DDR3 RAM, Windows 8.1 Pro; all compiled in CodeBlocks 16.01 with TDM-GCC-64, compiler flags: -std=c++11 -m64 -fopenmp"}, {"owner": {"reputation": 280, "user_id": 9938686, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AJ5oC.jpg?s=128&g=1", "display_name": "2b-t", "link": "https://stackoverflow.com/users/9938686/2b-t"}, "edited": false, "score": 0, "creation_date": 1528934076, "post_id": 50847746, "comment_id": 88699000, "body": "The inline functions D3Q19_ScalarIndex and D3Q19_FieldIndex return the corresponding linear indices as size_t."}], "answers": [{"comments": [{"owner": {"reputation": 280, "user_id": 9938686, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AJ5oC.jpg?s=128&g=1", "display_name": "2b-t", "link": "https://stackoverflow.com/users/9938686/2b-t"}, "edited": false, "score": 0, "creation_date": 1528967553, "post_id": 50847979, "comment_id": 88710273, "body": "Thanks a lot for your quick reply. I tried your approach and the performance went up to 50 million cells with a BLOCK_SIZE of 32 for a domain where performance before was stuck at 30 million. This is still far from linear scaling but it is a good starting point. Thanks a lot for your help! I&#39;ll mark the question as solved!"}, {"owner": {"reputation": 280, "user_id": 9938686, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AJ5oC.jpg?s=128&g=1", "display_name": "2b-t", "link": "https://stackoverflow.com/users/9938686/2b-t"}, "edited": false, "score": 0, "creation_date": 1571578014, "post_id": 50847979, "comment_id": 103280063, "body": "I have given hints to further improve the performance of said algorithms in post <a href=\"https://stackoverflow.com/a/58472929/9938686\">stackoverflow.com/a/58472929/9938686</a>"}], "tags": [], "owner": {"reputation": 1457, "user_id": 2638548, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mkJxQ.jpg?s=128&g=1", "display_name": "dlasalle", "link": "https://stackoverflow.com/users/2638548/dlasalle"}, "is_accepted": true, "score": 1, "last_activity_date": 1528935563, "creation_date": 1528935563, "answer_id": 50847979, "question_id": 50847746, "link": "https://stackoverflow.com/questions/50847746/scaling-issues-with-openmp/50847979#50847979", "title": "Scaling issues with OpenMP", "body": "<p>Achieving scaling on shared memory systems (threaded code on a single machine) is quite tricky, and often requires large amounts of tuning. What's likely happening in your code is that part of the domain for each thread fits into cache for the \"quite small\" problem size, but as the problem size increases in NX and NY, the data per thread stops fitting into cache.</p>\n\n<p>To avoid issues like this, it is better to decompose the domain into fixed size blocks that do not change in size with the domain, but rather in number.</p>\n\n<pre><code>const unsigned int numBlocksZ = std::ceil(static_cast&lt;double&gt;(NZ) / BLOCK_SIZE);\nconst unsigned int numBlocksY = std::ceil(static_cast&lt;double&gt;(NY) / BLOCK_SIZE);\nconst unsigned int numBlocksX = std::ceil(static_cast&lt;double&gt;(NX) / BLOCK_SIZE);\n\n#pragma omp parallel for default(none) shared(f0,f1,f2) schedule(static,1)\nfor(unsigned int block = 0; block &lt; numBlocks; ++block)\n{\n  unsigned int startZ = BLOCK_SIZE* (block / (numBlocksX*numBlocksY));\n  unsigned int endZ = std::min(startZ + BLOCK_SIZE, NZ);\n  for(unsigned int z = startZ; z &lt; endZ; ++z) {\n    unsigned int startY = BLOCK_SIZE*(((block % (numBlocksX*numBlocksY)) / numBlocksX);\n    unsigned int endY = std::min(startY + BLOCK_SIZE, NY);\n    for(unsigned int y = startY; y &lt; endY; ++y)\n    {\n      unsigned int startX = BLOCK_SIZE(block % numBlocksX);\n      unsigned int endX = std::min(startX + BLOCK_SIZE, NX);\n      for(unsigned int x = startX; x &lt; endX; ++x)\n      {\n        ...\n      }\n    }  \n  }\n</code></pre>\n\n<p>An approach like the above should also increase <a href=\"https://en.wikipedia.org/wiki/Locality_of_reference\" rel=\"nofollow noreferrer\">cache locality</a> by using 3d blocking (assuming this is a 3d stencil operation), and further improve your performance. You'll need to tune BLOCK_SIZE to find what gives you the best performance on a given system (I'd start small and increase in powers of two, e.g., 4, 8, 16...).</p>\n"}], "owner": {"reputation": 280, "user_id": 9938686, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AJ5oC.jpg?s=128&g=1", "display_name": "2b-t", "link": "https://stackoverflow.com/users/9938686/2b-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 403, "favorite_count": 0, "accepted_answer_id": 50847979, "answer_count": 1, "score": 1, "last_activity_date": 1528935563, "creation_date": 1528933251, "question_id": 50847746, "link": "https://stackoverflow.com/questions/50847746/scaling-issues-with-openmp", "title": "Scaling issues with OpenMP", "body": "<p>I have written a code for a special type of 3D CFD Simulation, the Lattice-Boltzmann Method (quite similar to a code supplied with the Book \"The Lattice Boltzmann Method\" by Timm Kr\u00fcger et alii).\nMultithreading the program with OpenMP I have experienced issues that I can't quite understand: The results prove to be strongly dependent on the overall domain size.</p>\n\n<p>The basic principle is that each cell of a 3D domain gets assigned certain values for 19 distribution functions (0-18) in discrete directions. They are laid down in two linear arrays allocated in the heap (one population is layed out in a separte array): The 18 populations of a certain cell are contiguous in memory, the values of consecutive x-values lay next to each other and so on (so sort of row-major: populations->x->y->z).\nThose distribution functions redistribute according to certain values within the cell and then get streamed to the neighbouring cells. For this reason I have two populations f1 and f2. The algorithm takes the values from f1, redistributes them and copies them into f2. Then the pointers are swapped and the algorithm starts again.\nThe code is working perfectly fine on a single core but when I try to parallelise it on multiple cores I get a performance that depends on the overall size of the domain: For very small domains (10^3 cells) the algorithm is comparably slow with 15 million cells per second, for quite small domains (30^3 cells) the algorithm is about quite fast with over 60 million cells per second and for anything larger than that the performance drops again to about 30 million cells per second. Executing the code on a single core only leads to the same performance of about 15 million cells per second. These results of course vary between different processors but qualitatively the same issue remains!</p>\n\n<p>The core of the code boils down to this parallelised loop that is executed over and over again and the pointers to f1 and f2 are swapped:</p>\n\n<pre><code>#pragma omp parallel for default(none) shared(f0,f1,f2) schedule(static)\n    for(unsigned int z = 0; z &lt; NZ; ++z)\n    {\n        for(unsigned int y = 0; y &lt; NY; ++y)\n        {\n            for(unsigned int x = 0; x &lt; NX; ++x)\n            {\n                /// temporary populations\n                double ft0  = f0[D3Q19_ScalarIndex(x,y,z)];\n                double ft1  = f1[D3Q19_FieldIndex(x,y,z,1)];\n                double ft2  = f1[D3Q19_FieldIndex(x,y,z,2)];\n                double ft3  = f1[D3Q19_FieldIndex(x,y,z,3)];\n                double ft4  = f1[D3Q19_FieldIndex(x,y,z,4)];\n                double ft5  = f1[D3Q19_FieldIndex(x,y,z,5)];\n                double ft6  = f1[D3Q19_FieldIndex(x,y,z,6)];\n                double ft7  = f1[D3Q19_FieldIndex(x,y,z,7)];\n                double ft8  = f1[D3Q19_FieldIndex(x,y,z,8)];\n                double ft9  = f1[D3Q19_FieldIndex(x,y,z,9)];\n                double ft10 = f1[D3Q19_FieldIndex(x,y,z,10)];\n                double ft11 = f1[D3Q19_FieldIndex(x,y,z,11)];\n                double ft12 = f1[D3Q19_FieldIndex(x,y,z,12)];\n                double ft13 = f1[D3Q19_FieldIndex(x,y,z,13)];\n                double ft14 = f1[D3Q19_FieldIndex(x,y,z,14)];\n                double ft15 = f1[D3Q19_FieldIndex(x,y,z,15)];\n                double ft16 = f1[D3Q19_FieldIndex(x,y,z,16)];\n                double ft17 = f1[D3Q19_FieldIndex(x,y,z,17)];\n                double ft18 = f1[D3Q19_FieldIndex(x,y,z,18)];\n\n                /// microscopic to macroscopic\n                double r    = ft0 + ft1 + ft2 + ft3 + ft4 + ft5 + ft6 + ft7 + ft8 + ft9 + ft10 + ft11 + ft12 + ft13 + ft14 + ft15 + ft16 + ft17 + ft18;\n                double rinv = 1.0/r;\n                double u    = rinv*(ft1 - ft2 + ft7 + ft8  + ft9   + ft10 - ft11 - ft12 - ft13 - ft14);\n                double v    = rinv*(ft3 - ft4 + ft7 - ft8  + ft11  - ft12 + ft15 + ft16 - ft17 - ft18);\n                double w    = rinv*(ft5 - ft6 + ft9 - ft10 + ft13 -  ft14 + ft15 - ft16 + ft17 - ft18);\n\n                /// collision &amp; streaming\n                double trw0 = omega*r*w0;                   //temporary variables\n                double trwc = omega*r*wc;\n                double trwd = omega*r*wd;\n                double uu   = 1.0 - 1.5*(u*u+v*v+w*w);\n\n                double bu = 3.0*u;\n                double bv = 3.0*v;\n                double bw = 3.0*w;\n\n                unsigned int xp = (x + 1) % NX;             //calculate x,y,z coordinates of neighbouring cells\n                unsigned int yp = (y + 1) % NY;\n                unsigned int zp = (z + 1) % NZ;\n                unsigned int xm = (NX + x - 1) % NX;\n                unsigned int ym = (NY + y - 1) % NY;\n                unsigned int zm = (NZ + z - 1) % NZ;\n\n                f0[D3Q19_ScalarIndex(x,y,z)]      = bomega*ft0  + trw0*(uu);                        //redistribute distribution functions and stream to neighbouring cells\n                double cu = bu;\n                f2[D3Q19_FieldIndex(xp,y, z,  1)] = bomega*ft1  + trwc*(uu + cu*(1.0 + 0.5*cu));\n                cu = -bu;\n                f2[D3Q19_FieldIndex(xm,y, z,  2)] = bomega*ft2  + trwc*(uu + cu*(1.0 + 0.5*cu));\n                cu = bv;\n                f2[D3Q19_FieldIndex(x, yp,z,  3)] = bomega*ft3  + trwc*(uu + cu*(1.0 + 0.5*cu));\n                cu = -bv;\n                f2[D3Q19_FieldIndex(x, ym,z,  4)] = bomega*ft4  + trwc*(uu + cu*(1.0 + 0.5*cu));\n                cu = bw;\n                f2[D3Q19_FieldIndex(x, y, zp, 5)] = bomega*ft5  + trwc*(uu + cu*(1.0 + 0.5*cu));\n                cu = -bw;\n                f2[D3Q19_FieldIndex(x, y, zm, 6)] = bomega*ft6  + trwc*(uu + cu*(1.0 + 0.5*cu));\n                cu = bu+bv;\n                f2[D3Q19_FieldIndex(xp,yp,z,  7)] = bomega*ft7  + trwd*(uu + cu*(1.0 + 0.5*cu));\n                cu = bu-bv;\n                f2[D3Q19_FieldIndex(xp,ym,z,  8)] = bomega*ft8  + trwd*(uu + cu*(1.0 + 0.5*cu));\n                cu = bu+bw;\n                f2[D3Q19_FieldIndex(xp,y, zp, 9)] = bomega*ft9  + trwd*(uu + cu*(1.0 + 0.5*cu));\n                cu = bu-bw;\n                f2[D3Q19_FieldIndex(xp,y, zm,10)] = bomega*ft10 + trwd*(uu + cu*(1.0 + 0.5*cu));\n                cu = -bu+bv;\n                f2[D3Q19_FieldIndex(xm,yp,z, 11)] = bomega*ft11 + trwd*(uu + cu*(1.0 + 0.5*cu));\n                cu = -bu-bv;\n                f2[D3Q19_FieldIndex(xm,ym,z, 12)] = bomega*ft12 + trwd*(uu + cu*(1.0 + 0.5*cu));\n                cu = -bu+bw;\n                f2[D3Q19_FieldIndex(xm,y, zp,13)] = bomega*ft13 + trwd*(uu + cu*(1.0 + 0.5*cu));\n                cu = -bu-bw;\n                f2[D3Q19_FieldIndex(xm,y, zm,14)] = bomega*ft14 + trwd*(uu + cu*(1.0 + 0.5*cu));\n                cu = bv+bw;\n                f2[D3Q19_FieldIndex(x, yp,zp,15)] = bomega*ft15 + trwd*(uu + cu*(1.0 + 0.5*cu));\n                cu = bv-bw;\n                f2[D3Q19_FieldIndex(x, yp,zm,16)] = bomega*ft16 + trwd*(uu + cu*(1.0 + 0.5*cu));\n                cu = -bv+bw;\n                f2[D3Q19_FieldIndex(x, ym,zp,17)] = bomega*ft17 + trwd*(uu + cu*(1.0 + 0.5*cu));\n                cu = -bv-bw;\n                f2[D3Q19_FieldIndex(x, ym,zm,18)] = bomega*ft18 + trwd*(uu + cu*(1.0 + 0.5*cu));\n            }\n        }\n    }\n</code></pre>\n\n<p>It would be awesome if someone could give me tips on how to find the reason for this particular behaviour or even has an idea what could cause this problem.\nIf needed I can supply a full version of the simplified code!\nThanks a lot in advance!</p>\n"}, {"tags": ["c++", "variables", "variadic-functions"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1528932945, "post_id": 50847671, "comment_id": 88698773, "body": "You are not passing <code>std::string</code> objects to <code>test2()</code> so using <code>va_arg(..., string)</code> is wrong.  You need to use <code>char*</code> since that is what you are actually passing to the function.  Also, you don&#39;t need the extra type-cast on <code>string name = string(va_arg(file_names, char*))</code>, as <code>std::string</code> has a constructor and <code>operator=</code> that accept <code>char*</code> as input: <code>string name = va_arg(file_names, char*);</code> or <code>string name(va_arg(file_names, char*));</code>"}, {"owner": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "edited": false, "score": 4, "creation_date": 1528932946, "post_id": 50847671, "comment_id": 88698775, "body": "Just use a variadic template."}, {"owner": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "edited": false, "score": 0, "creation_date": 1528933217, "post_id": 50847671, "comment_id": 88698817, "body": "As Henri suggests, with a variadic template this can be as simple as <code>((std::cout &lt;&lt; args &lt;&lt; &#39;\\n&#39;), ...);</code> in C++17."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1528933554, "post_id": 50847671, "comment_id": 88698888, "body": "At least post what you think are the relevant header files in your code/"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1528933999, "post_id": 50847671, "comment_id": 88698984, "body": "I would have expected this to be a duplicate, but actually all similar questions appear to predate C++11 and thus variadic templates."}], "answers": [{"comments": [{"owner": {"reputation": 5185, "user_id": 6202327, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AFtrB.png?s=128&g=1", "display_name": "Makogan", "link": "https://stackoverflow.com/users/6202327/makogan"}, "edited": false, "score": 0, "creation_date": 1528934876, "post_id": 50847752, "comment_id": 88699142, "body": "I am confused, I am attempting to compile the example you gave so I copy pasted your function without modification, the compiler however returns the error: <code>error: expected \u2018;\u2019 before \u2018&lt;&lt;\u2019 token      std::cout &lt;&lt; ... &lt;&lt; args &lt;&lt; std::endl;</code>"}, {"owner": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "edited": false, "score": 1, "creation_date": 1528935033, "post_id": 50847752, "comment_id": 88699162, "body": "It should be <code>(std::cout &lt;&lt; ... &lt;&lt; args) &lt;&lt; std::endl;</code>."}, {"owner": {"reputation": 5185, "user_id": 6202327, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AFtrB.png?s=128&g=1", "display_name": "Makogan", "link": "https://stackoverflow.com/users/6202327/makogan"}, "edited": false, "score": 0, "creation_date": 1528935235, "post_id": 50847752, "comment_id": 88699200, "body": "Is it possible to ask you to ellaborate a bit more on how to iterate through the parameter list using variadic templates? I am reading the documentation but the synax is nto too clear to me"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "edited": false, "score": 0, "creation_date": 1528959113, "post_id": 50847752, "comment_id": 88705233, "body": "@miradulo: On closer inspection, I think the idea is to have a newline after each argument. Of course that shouldn&#39;t be a <code>std::endl</code> as there&#39;s no need to flush. I&#39;ll need to get back to that."}, {"owner": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "edited": false, "score": 0, "creation_date": 1528971366, "post_id": 50847752, "comment_id": 88712766, "body": "Yeah, that was my first impression as well. I left an idea for one way to get the newlines in the comments under the question, but I am sure there are many others as well."}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 2, "last_activity_date": 1528933959, "last_edit_date": 1528933959, "creation_date": 1528933304, "answer_id": 50847752, "question_id": 50847671, "link": "https://stackoverflow.com/questions/50847671/is-it-possible-to-handle-non-primitive-types-in-a-variadic-function/50847752#50847752", "title": "Is it possible to handle non-primitive types in a variadic function?", "body": "<p>The answer to the first part is that you're mostly correct. There are restrictions on the use of class types, in particular if they have a non-trivial copy constructor (which <code>std::string</code> has). It might work on some implementations and not on others. Formally, that's <em>conditionally-supported with implementation-defined semantics</em>. </p>\n\n<p>The second part is a bit harder, but also a bit simpler. These varargs are old C, and not typesafe. C++ does have typesafe variadics, via templates:</p>\n\n<pre><code>template&lt;typename... T&gt;\nvoid test1(T... args)\n{\n    std::cout &lt;&lt; ... &lt;&lt; args &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>The problem  is that you need to know how to unpack those <code>args...</code> - they're called <a href=\"https://en.cppreference.com/w/cpp/language/parameter_pack\" rel=\"nofollow noreferrer\"><em>parameter packs</em></a>. There are a few different ways to unpack them; this particular form is called a fold expression. </p>\n"}, {"comments": [{"owner": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "edited": false, "score": 1, "creation_date": 1528933679, "post_id": 50847778, "comment_id": 88698911, "body": "<code>test2(3, &quot;Hallo&quot;s, &quot;you&quot;s, &quot;people&quot;s);</code> is much more compact (needs <code>using namespace std::string_literals;</code>)."}, {"owner": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "edited": false, "score": 1, "creation_date": 1528933777, "post_id": 50847778, "comment_id": 88698933, "body": "The fact that it does not compile on <a href=\"http://cpp.sh/\" rel=\"nofollow noreferrer\">cpp.sh</a> is because they are using an ancient compiler (GCC 4.9) which is not even fully C++11-compatible.  I recommend <a href=\"https://wandbox.org/\" rel=\"nofollow noreferrer\">wandbox.org</a> instead."}, {"owner": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "edited": false, "score": 1, "creation_date": 1528934474, "post_id": 50847778, "comment_id": 88699074, "body": "It isn&#39;t true that C++11 compliant compilers will allow non-trivially constructible types like <code>std::string</code> in variadic arguments. It is only conditionally supported with implementation defined semantics, as MSalters mentions. For instance, Clang 6 won&#39;t compile this as well."}], "tags": [], "owner": {"reputation": 824, "user_id": 6655004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/011d07b3868b32e1dc6082918f6b45b5?s=128&d=identicon&r=PG&f=1", "display_name": "Filipe Rodrigues", "link": "https://stackoverflow.com/users/6655004/filipe-rodrigues"}, "is_accepted": false, "score": -1, "last_activity_date": 1528934725, "last_edit_date": 1528934725, "creation_date": 1528933654, "answer_id": 50847778, "question_id": 50847671, "link": "https://stackoverflow.com/questions/50847671/is-it-possible-to-handle-non-primitive-types-in-a-variadic-function/50847778#50847778", "title": "Is it possible to handle non-primitive types in a variadic function?", "body": "<p>If you call test2 as such, it should work:</p>\n\n<pre><code>test2(3, std::string(\"Hallo\"), std::string(\"you\"), std::string(\"people\"));\n</code></pre>\n\n<p>What's happening here is that when you pass \"Hallo\" you're passing a char*, not an std::string, so when you try to retrieve the char* by giving it a type of std::string with va_arg, it fails since the object isn't an std::string.</p>\n\n<p><s>\nAlso, in some compilers, it seems that you can't pass types that aren't trivially destructable, when I tried this in cpp.sh it gave the error</p>\n\n<pre><code>In function 'void test2(int, ...)':\n27:23: error: cannot receive objects of non-trivially-copyable type 'std::string {aka class std::basic_string&lt;char&gt;}' through '...'; \n In function 'int main()':\n36:51: error: cannot pass objects of non-trivially-copyable type 'std::string {aka class std::basic_string&lt;char&gt;}' through '...'\n</code></pre>\n\n<p>Although it seems this isn't part of the standard as I couldn't find anywhere that required this, so I assume it's just a limitation of the compiler they're using. If anyone knows the details about this, I'll edit the answer with the correct information.</s></p>\n\n<p><s>\nLike Henri Menke said, it seems the problem is that cpp.sh is using an old version that isn't c++11 compliant, so if you use a compiler that is at least c++11 compliant, you can use std::string within variadic arguments.\n</s></p>\n\n<p>It appears this is an implementation detail, as miradulo said, so it will depend on your compiler, and not the standard version you're using.</p>\n\n<p>And also, like Henri Menke mentioned, if you use </p>\n\n<pre><code>using std::string_literals;\n</code></pre>\n\n<p>And then put an 's' at the end of the normal string as such:</p>\n\n<p><code>test2(3, \"Hallo\"s, \"you\"s, \"people\"s);</code></p>\n\n<p>It transforms the char* to a std::string so you can use them like this to call test2, this is due to <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/operator&quot;&quot;s\" rel=\"nofollow noreferrer\">string literals</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": true, "score": 3, "last_activity_date": 1529004028, "last_edit_date": 1592644375, "creation_date": 1528937842, "answer_id": 50848200, "question_id": 50847671, "link": "https://stackoverflow.com/questions/50847671/is-it-possible-to-handle-non-primitive-types-in-a-variadic-function/50848200#50848200", "title": "Is it possible to handle non-primitive types in a variadic function?", "body": "<h3><code>va_arg</code> decodes the <code>va_list</code></h3>\n<p>You cannot use <code>va_arg</code> to convert the passed in variable argument parameter in a single go. The syntax of <code>va_arg</code> would be to decode the variable argument to match the type that was passed in. For example, if you pass in an <code>int</code> value, you must decode it as an <code>int</code> with <code>va_arg</code>. You cause undefined behavior if you try to decode it as anything else (like, as a <code>double</code>).</p>\n<p>Since you passed in a string literal, the type should be <code>const char *</code>.</p>\n<pre><code>const char *arg = va_arg(file_names, const char *);\n</code></pre>\n<h3><code>va_arg</code> on non-trivial classes is implementation-defined</h3>\n<p>As <a href=\"https://stackoverflow.com/a/50847752/315052\">MSalter's answer</a> clearly explains, even if you really passed in a <code>std::string</code> to a function expecting variable arguments, it is not necessarily going to work because the semantics are implementation-defined.</p>\n<blockquote>\n<p>When there is no parameter for a given argument, the argument is passed in such a way that the receiving function can obtain the value of the argument by invoking va_arg (18.10). \u2026 Passing a potentially-evaluated argument of class type (Clause 9) having a non- trivial copy constructor, a non-trivial move contructor, or a non-trivial destructor, with no corresponding parameter, is conditionally-supported with implementation-defined semantics. \u2026<br>\n<sub>C++.11 \u00a7[expr.call] \u00b67</sub></p>\n</blockquote>\n<p><sub>Note: (18.10) defines <code>va_arg</code>, and (Clause 9) is \u00a7[class].</sub></p>\n<h3>Just use a variadic template</h3>\n<p>You can use C++11's variadic template argument feature to achieve the effect you want in a type safe way. Assume you actually want to do a little more than print each argument, the usual pattern is to recursively traverse the parameter pack, unpacking one parameter at a time.</p>\n<pre><code>void test3 (int f_num, std::string file_name) {\n    std::cout &lt;&lt; f_num &lt;&lt; ':' &lt;&lt; file_name &lt;&lt; std::endl;\n}\n\ntemplate &lt;typename... T&gt;\nvoid test3 (int f_num, std::string file_name, T...rest) {\n    test3(f_num, file_name);\n    test3(f_num, rest...);\n}\n</code></pre>\n<p>Thus, iteration is achieved by recursively calling the function, reducing the parameter pack by one parameter on the next recursive call.</p>\n"}], "owner": {"reputation": 5185, "user_id": 6202327, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AFtrB.png?s=128&g=1", "display_name": "Makogan", "link": "https://stackoverflow.com/users/6202327/makogan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "accepted_answer_id": 50848200, "answer_count": 3, "score": 2, "last_activity_date": 1529004028, "creation_date": 1528932553, "last_edit_date": 1528934933, "question_id": 50847671, "link": "https://stackoverflow.com/questions/50847671/is-it-possible-to-handle-non-primitive-types-in-a-variadic-function", "title": "Is it possible to handle non-primitive types in a variadic function?", "body": "<p>I have 2 versions of the same variadic function, however one works the other doesn't. I suspect the reason is because one is using a primitive type where the other uses std::string. </p>\n\n<pre><code>void test1(int f_num, ...)\n{\n    va_list file_names;\n    va_start(file_names, f_num);\n\n    for(int i=0; i&lt;f_num; i++)\n    {\n        string name = string(va_arg(file_names, char*));\n        cout &lt;&lt; name &lt;&lt; endl;\n    }\n    va_end(file_names);\n}\n\nvoid test2(int f_num, ...)\n{\n    va_list file_names;\n    va_start(file_names, f_num);\n\n    for(int i=0; i&lt;f_num; i++)\n    {\n        string name = va_arg(file_names, string);\n        cout &lt;&lt; name &lt;&lt; endl;\n    }\n    va_end(file_names);\n}\n\nint main()\n{\n    test1(3, \"Hallo\", \"you\", \"people\");\n    test2(3, \"Hallo\", \"you\", \"people\");\n}\n</code></pre>\n\n<p>The above results in the following output:</p>\n\n<pre><code>Hallo\nyou\npeople\nterminate called after throwing an instance of 'std::bad_alloc'\n  what():  std::bad_alloc\nAborted (core dumped)\n</code></pre>\n\n<p>The first function thus works but the second doesn't. Am I correct to assume that it's because the variadic macro doesn't handle non-primitive types? Can you make it handle non-porimitive types?</p>\n"}, {"tags": ["c++", "c++11", "heap", "heap-memory", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 1984, "user_id": 8911468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dh52m.jpg?s=128&g=1", "display_name": "Arash", "link": "https://stackoverflow.com/users/8911468/arash"}, "edited": false, "score": 0, "creation_date": 1528931237, "post_id": 50847480, "comment_id": 88698406, "body": "Why not leaving it to OS?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 5, "creation_date": 1528932136, "post_id": 50847480, "comment_id": 88698605, "body": "If you allocate and hold until the end of the program you could leave clean-up to the OS. But you&#39;d better leave notes because someone could take your code, wrap it, and assume that it will work as a module inside another program that just inherited an undocumented memory leak."}, {"owner": {"reputation": 480, "user_id": 3693539, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Jb8O2.jpg?s=128&g=1", "display_name": "solarflare", "link": "https://stackoverflow.com/users/3693539/solarflare"}, "edited": false, "score": 0, "creation_date": 1528936911, "post_id": 50847480, "comment_id": 88699508, "body": "If you&#39;ve ever used certain (very popular) web browsers you&#39;d have felt the pain of being a user to one of these programs where cleaning the heap was considered &quot;optional&quot;"}, {"owner": {"reputation": 4651, "user_id": 4262344, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/70dad663dd1685c6b4f9675d01253e78?s=128&d=identicon&r=PG&f=1", "display_name": "Goswin von Brederlow", "link": "https://stackoverflow.com/users/4262344/goswin-von-brederlow"}, "edited": false, "score": 0, "creation_date": 1528963833, "post_id": 50847480, "comment_id": 88707977, "body": "Not every OS cleans up the mess you leave behind. There are also lots of cases where the destructor of a class is not trivial and does more than just free the memory or close file descriptors. If you don&#39;t clean up properly the destructor code isn&#39;t run. Examples for this are IPC shared memory resources or client/server architectures."}], "answers": [{"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 1, "last_activity_date": 1528932402, "creation_date": 1528932402, "answer_id": 50847652, "question_id": 50847480, "link": "https://stackoverflow.com/questions/50847480/is-it-practical-to-delete-all-heap-allocated-memory-after-you-have-finished-usin/50847652#50847652", "title": "Is it practical to delete all heap-allocated memory after you have finished using it?", "body": "<p>In a few cases, I've had code that allocated lots of stuff on the heap. A typical run of the program took at least a few hours, and with larger data sets, that could go up to a couple of days or so. When it finished and you exited the program, all the destructors ran, and freed all the memory.</p>\n\n<p>That led to a bit of a problem though. Especially after a long run (which allocated many blocks on the heap) it could take around five minutes for all the destructors to run.</p>\n\n<p>So, I rewrote some destructors to do nothing--not even free memory an object had allocated.</p>\n\n<p>The program had a pretty simple memory usage pattern, so everything it allocated remained in use until you shut it down. Disabling the destructors so they no longer released the memory that had been allocated reduced the time to shut down the program from ~5 minutes to what appeared instant (but was still actually pretty close to 100 ms).</p>\n\n<p>That said, this is really only rarely an option. The vast majority of the time, a program should clean up after itself. With well written code it's usually pretty trivial anyway.</p>\n"}, {"comments": [{"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1528999147, "post_id": 50847893, "comment_id": 88729167, "body": "&quot;memory is zero&#39;d at system startup (not shutdown)&quot; - so any reset of the processor will not need delete of heap-allocated-memory.  Clearly, this is not a desktop.  My experience is mostly vxWorks.  See boot sequence and bsp notes."}], "tags": [], "owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "is_accepted": false, "score": 1, "last_activity_date": 1528998335, "last_edit_date": 1528998335, "creation_date": 1528934807, "answer_id": 50847893, "question_id": 50847480, "link": "https://stackoverflow.com/questions/50847480/is-it-practical-to-delete-all-heap-allocated-memory-after-you-have-finished-usin/50847893#50847893", "title": "Is it practical to delete all heap-allocated memory after you have finished using it?", "body": "<blockquote>\n  <p>Are there any specific situations in which it would not be practical\n  nor necessary to delete the heap-allocated memory when you are done\n  using it?</p>\n</blockquote>\n\n<p>Yes.</p>\n\n<hr>\n\n<p>In certain types of telecomm embedded systems I have seen:</p>\n\n<p>1) an operator commanded software-revision-update can also perform (or remind the user to perform) a software reset as the last step in the upgrade.  This is not a power bounce, and (typically) the associated hw continues to run.  </p>\n\n<p>Note:  There are two (or more) kinds of revision updates: 1) processor code;  and 2) firmware (of the fpga's which is typically stored in eprom)  </p>\n\n<p>In this case, there need not be a delete of long-term heap allocated memory.  The embedded software I am familiar with has many new'd data structures that last the life of the code.  Software reset is the user-commanded end-of-life, and the memory is zero'd at system startup (not shutdown).  No dtor's are used at this point, either.</p>\n\n<p>There is often a customer requirement about the upper limit on how long a system reboot takes.  The time starts when the customer wants ... perhaps at the start of the download of a new revision ... so a fast reset can help achieve that additional requirement.</p>\n\n<hr>\n\n<p>2) I have worked on (embedded telecom) systems with a 'Watchdog' feature to detect certain inconsistencies (including thread 'hangs').  This failure mechanism generates a log entry in some persistent store (such as battery-back-static-ram or eprom or file system).  </p>\n\n<p>The log entry is evidence of some 'self-detected' inconsistency. </p>\n\n<p>Any attempt to delete heap memory would be suspect, as the inconsistency might have already corrupted the system.  This reset is not user-commanded, but may have site policy based controls.  A fast reset is also desired here to restore functionality when the reset occurs with no user at the console.</p>\n\n<hr>\n\n<p>Note:</p>\n\n<p>IMHO, The most useful \"development features\" for embedded system (none of which trigger heap clean up efforts) are :</p>\n\n<p>a) a soft-reset switch (fairly common availability) - reboots the processor with no impact to the hw that the software controls/monitors.  Is used often.  </p>\n\n<p>b) a hard-reset switch (availability rare) - power bounces the card .. both processor and the equipment it controls, without impact to the rest of the cards in the shelf.  (Unknown utility.)</p>\n\n<p>c) a shelf-reset switch (some times the shelf has its own switch) - power bounces the shelf and all cards, processors and equipment within.  This is seldom used, (except for system startup issues) but the alternative is to clumsily 'pull the power plug'.</p>\n\n<p>d) computer control of these three switches - I've never seen it.</p>\n"}, {"tags": [], "owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "is_accepted": false, "score": 0, "last_activity_date": 1528998644, "last_edit_date": 1528998644, "creation_date": 1528998329, "answer_id": 50863179, "question_id": 50847480, "link": "https://stackoverflow.com/questions/50847480/is-it-practical-to-delete-all-heap-allocated-memory-after-you-have-finished-usin/50863179#50863179", "title": "Is it practical to delete all heap-allocated memory after you have finished using it?", "body": "<blockquote>\n  <p>Are there any specific situations in which it would not be practical\n  nor necessary to delete the heap-allocated memory when you are done\n  using it?</p>\n</blockquote>\n\n<p>Any heap memory you allocate and never free will remain allocated until your process exits.  During that time, no other program will be able to use that portion of the computer's RAM for any purpose.</p>\n\n<p>So the question is, will that cause a problem?  The answer will depend on a number of variables:</p>\n\n<ol>\n<li>How much RAM has your process allocated?</li>\n<li>How much RAM does the computer have physically installed and available for other programs to use?</li>\n<li>How long will your process continue running (and thus holding on to that memory) for?</li>\n</ol>\n\n<p>If your program is of the type that runs, does its thing, and then exits (more-or-less) immediately, then there's likely no problem with it \"leaking\" memory, since the leaked memory will be reclaimed by the OS when your process exits (note:  some very primitive/embedded/old OS's may not reclaim the resources of an exited process, so make sure your OS does -- that said, almost all commonly in-use modern OS's do)</p>\n\n<p>If your program is of the type that can continue running indefinitely, on the other hand, then memory leaks are going to be a problem, because if the program keeps allocating memory and never freeing it, eventually it will eat up all of the computer's available RAM and then bad things will start to happen.</p>\n\n<p>In general, there is no reason why you should ever have to leak memory in a modern C++ program -- smart pointers (e.g. <code>std::unique_ptr</code> and <code>std::shared_ptr</code>) are there specifically to make memory-leaks easy to avoid, and they are easier to use than the old/leak-prone raw C pointers, so there's no reason not to use them.</p>\n"}], "owner": {"reputation": 67, "user_id": 9926394, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vVY6g.jpg?s=128&g=1", "display_name": "Andy N.", "link": "https://stackoverflow.com/users/9926394/andy-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1086, "favorite_count": 1, "answer_count": 3, "score": 0, "last_activity_date": 1528998644, "creation_date": 1528930982, "question_id": 50847480, "link": "https://stackoverflow.com/questions/50847480/is-it-practical-to-delete-all-heap-allocated-memory-after-you-have-finished-usin", "title": "Is it practical to delete all heap-allocated memory after you have finished using it?", "body": "<p>Are there any specific situations in which it would not be practical nor necessary to delete the heap-allocated memory when you are done using it? Or does not deleting it always affect programs to a large extent?</p>\n"}, {"tags": ["c++", "mysql"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1528932651, "post_id": 50847462, "comment_id": 88698702, "body": "Check for errors from the query and print the error message to see what&#39;s wrong."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1528932747, "post_id": 50847462, "comment_id": 88698721, "body": "Did you try <code>cout &lt;&lt; insert;</code> to make sure the query looks correct?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1528933985, "post_id": 50847462, "comment_id": 88698983, "body": "I don&#39;t understand.  You pass <code>std::string</code> to <code>getpaswd</code>, but return a <code>char *</code>.  I believe you should return <code>std::string</code> and change the parameter to pass by const reference."}, {"owner": {"reputation": 5867, "user_id": 9125195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75fc90d1f6de6ff28c739b85bdb82f4c?s=128&d=identicon&r=PG&f=1", "display_name": "Sid S", "link": "https://stackoverflow.com/users/9125195/sid-s"}, "edited": false, "score": 0, "creation_date": 1528939110, "post_id": 50847462, "comment_id": 88699910, "body": "Edit your question to include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 320, "user_id": 5213931, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TOiiUPVy_Ok/AAAAAAAAAAI/AAAAAAAAAFE/AbVsebLAEB0/photo.jpg?sz=128", "display_name": "Kartik Maheshwari", "link": "https://stackoverflow.com/users/5213931/kartik-maheshwari"}, "edited": false, "score": 0, "creation_date": 1528956284, "post_id": 50847462, "comment_id": 88703890, "body": "I thought it administrator issues, have you try open your IDE in run as administrator mode and execute your program."}], "owner": {"user_type": "does_not_exist", "display_name": "user9579100"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1544428107, "creation_date": 1528930840, "last_edit_date": 1544428107, "question_id": 50847462, "link": "https://stackoverflow.com/questions/50847462/unable-to-use-insert-statement-in-mysql", "title": "unable to use insert statement in mysql", "body": "<pre><code>void database::adduser(std::string username, std::string password, std::string land){\n  connect();\n  mysql_query(con, \"USE users\");\n  std::stringstream ss;\n  ss &lt;&lt; \"INSERT INTO users (username, paswd, land, landx, landy) VALUES (\" &lt;&lt; \"'\" &lt;&lt; username &lt;&lt; \"'\" &lt;&lt; \",\" &lt;&lt; \"'\" &lt;&lt; password &lt;&lt;\"'\" &lt;&lt; \",\" &lt;&lt; \"'\" &lt;&lt; land &lt;&lt; \"'\"&lt;&lt; \"50, 50)\";\n  std::string insert;\n  insert = ss.str();\n  const char * c = insert.c_str();\n  mysql_query(con, c);\n  mysql_close(con);\n}\nint database::init(){\n  connect();\n  mysql_query(con, \"USE users\");\n  mysql_query(con, \"CREATE TABLE IF NOT EXISTS users(username TEXT, passwd TEXT, land TEXT, landx INT, landy INT)\");\n\n  mysql_close(con);\n  return 0;\n}\nchar* database::getpaswd(std::string username){\n  connect();\n  mysql_query(con, \"USE users\");\n  std::stringstream ss;\n  ss &lt;&lt; \"SELECT paswd FROM users WHERE username=\" &lt;&lt; \"'\" &lt;&lt; username &lt;&lt; \"'\";\n  std::string insert;\n  insert = ss.str();\n  const char * c = insert.c_str();\n  mysql_query(con, c);\n  MYSQL_RES *result;\n  result = mysql_store_result(con);\n  MYSQL_ROW row;\n  row = mysql_fetch_row(result);\n  if(row == NULL){\n    std::cout &lt;&lt; \"NO USER OF THAT USERNAME\" &lt;&lt; std::endl;\n    return \"NOT VALID USERNAME\";\n  }\n  mysql_free_result(result);\n  mysql_close(con);\n  return row[0];\n}\nbool database::does_exist_user(std::string user){\n  connect();\n  mysql_query(con, \"USE users\");\n  std::stringstream ss;\n  ss &lt;&lt; \"SELECT username FROM users WHERE username=\" &lt;&lt; \"'\" &lt;&lt; user &lt;&lt; \"'\";\n  std::string insert;\n  insert = ss.str();\n  const char *c = insert.c_str();\n  mysql_query(con, c);\n  MYSQL_RES *result;\n  result = mysql_store_result(con);\n  MYSQL_ROW row;\n  row = mysql_fetch_row(result);\n  if(row == NULL){\n    mysql_free_result(result);\n    return false;\n  }\n  else{\n    mysql_free_result(result);\n    return true;\n  }\n  std::cout &lt;&lt; \"username taken\" &lt;&lt; std::endl;\n  return true;\n}\nvoid database::edit_land(std::string username, std::string land){\n  connect();\n  mysql_query(con, \"USE users\");\n  std::stringstream ss;\n  ss &lt;&lt; \"UPDATE users SET land=\" &lt;&lt; \"'\" &lt;&lt; land &lt;&lt; \"' \" &lt;&lt; \"WHERE username=\" &lt;&lt; \"'\" &lt;&lt; username &lt;&lt; \"'\";\n  std::string insert;\n  insert = ss.str();\n  const char *c = insert.c_str();\n  mysql_query(con, c);\n  mysql_close(con);\n}\nvoid database::edit_landX(std::string username, int land){\n  connect();\n  mysql_query(con, \"USE users\");\n  std::stringstream ss;\n  ss &lt;&lt; \"UPDATE users SET landx=\" &lt;&lt; land &lt;&lt; \" WHERE username=\" &lt;&lt; \"'\" &lt;&lt; username &lt;&lt; \"'\";\n  std::string insert;\n  insert = ss.str();\n  const char *c = insert.c_str();\n  mysql_query(con, c);\n  mysql_close(con);\n}\nvoid database::edit_landY(std::string username, int land){\n  connect();\n  mysql_query(con, \"USE users\");\n  std::stringstream ss;\n  ss &lt;&lt; \"UPDATE users SET landy=\" &lt;&lt; land &lt;&lt; \" WHERE username=\" &lt;&lt; \"'\" &lt;&lt; username &lt;&lt; \"'\";\n  std::string insert;\n  insert = ss.str();\n  const char *c = insert.c_str();\n  mysql_query(con, c);\n  mysql_close(con);\n}\nchar* database::getland(std::string username){\n  connect();\n  mysql_query(con, \"USE users\");\n  std::stringstream ss;\n  ss &lt;&lt; \"SELECT land FROM users WHERE username=\" &lt;&lt; \"'\" &lt;&lt; username &lt;&lt; \"'\";\n  std::string insert;\n  insert = ss.str();\n  const char *c = insert.c_str();\n  mysql_query(con, c);\n  MYSQL_RES *result;\n  result = mysql_store_result(con);\n  MYSQL_ROW row;\n  row = mysql_fetch_row(result);\n  if(row == NULL){\n    return \"ERROR\";\n  }\n  mysql_close(con);\n  mysql_free_result(result);\n  return row[0];\n}\nchar* database::getlandY(std::string username){\n  connect();\n  mysql_query(con, \"USE users\");\n  std::stringstream ss;\n  ss &lt;&lt; \"SELECT landy FROM users WHERE username=\" &lt;&lt; \"'\" &lt;&lt; username &lt;&lt; \"'\";\n  std::string insert;\n  insert = ss.str();\n  const char *c = insert.c_str();\n  mysql_query(con, c);\n  MYSQL_RES *result;\n  result = mysql_store_result(con);\n  MYSQL_ROW row;\n  row = mysql_fetch_row(result);\n  if(row == NULL){\n    std::cout &lt;&lt; \"ERROE ME BOI\" &lt;&lt; std::endl;\n    return \"ERROR\";\n  }\n  mysql_close(con);\n  mysql_free_result(result);\n  return row[0];\n}\nchar* database::getlandX(std::string username){\n  connect();\n  mysql_query(con, \"USE users\");\n  std::stringstream ss;\n  ss &lt;&lt; \"SELECT landx FROM users WHERE username=\" &lt;&lt; \"'\" &lt;&lt; username &lt;&lt; \"'\";\n  std::string insert;\n  insert = ss.str();\n  const char *c = insert.c_str();\n  mysql_query(con, c);\n  MYSQL_RES *result;\n  result = mysql_store_result(con);\n  MYSQL_ROW row;\n  row = mysql_fetch_row(result);\n  if(row == NULL){\n    std::cout &lt;&lt; \"ERROE ME BOI\" &lt;&lt; std::endl;\n    return \"ERROR\";\n  }\n  mysql_close(con);\n  mysql_free_result(result);\n  return row[0];\n}\nvoid database::connect(){\n  con = mysql_init(NULL);\n\n  if(con == NULL){\n    std::cout &lt;&lt; mysql_error(con) &lt;&lt; std::endl;\n    exit(1);\n  }\n\n  if(mysql_real_connect(con, \"127.0.0.1\", \"root\", \"password\", \"users\", 3306, NULL, 0) == NULL){\n    std::cout &lt;&lt; \"NO BEUNO\";\n    std::cout &lt;&lt; mysql_error(con) &lt;&lt; std::endl;\n    exit(1);\n  }\n}\n</code></pre>\n\n<p>the issue is that I am unable to to use the create user function, but all of the other functions reading from the database work perfectly fine, so my question is why am i unable to use an insert statment in the program but am able to read from the database. It works on teh terminal whan i use mysql -u root -p to enter mysql on the terminal but when run it teh c++ code it does not work.</p>\n"}, {"tags": ["c++", "visual-studio", "dll"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1528931401, "post_id": 50847450, "comment_id": 88698438, "body": "You are clearly static-linking to the DLLs, so they need to be in a folder that is relative to where the EXE file is located, not relative to where the source code is located.  See <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682586.aspx\" rel=\"nofollow noreferrer\">Dynamic-Link Library Search Order</a>."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1528932515, "post_id": 50847450, "comment_id": 88698677, "body": "you can use sysinternals procmon to watch to see where windows is looking to try to load the dll"}, {"owner": {"reputation": 165, "user_id": 7371561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G5PCH.jpg?s=128&g=1", "display_name": "Connor Mote", "link": "https://stackoverflow.com/users/7371561/connor-mote"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1528933023, "post_id": 50847450, "comment_id": 88698789, "body": "@RemyLebeau there is no exe file since I&#39;m just working with dll&#39;s"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1528933318, "post_id": 50847450, "comment_id": 88698843, "body": "DLLs can&#39;t run by themselves, they need to be loaded into a process that is created by running an EXE (the error message says <code>Gsi.exe</code>, and I also see <code>GmcConsole</code>)"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1528933403, "post_id": 50847450, "comment_id": 88698865, "body": "@ConnorMote <i>there is no exe file</i> -- I clearly see <code>Gsi.exe</code> running."}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1528933409, "post_id": 50847670, "comment_id": 88698866, "body": "&quot;<i>or even in the Windows system folders</i>&quot; - that is never a good idea"}, {"owner": {"reputation": 480, "user_id": 3693539, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Jb8O2.jpg?s=128&g=1", "display_name": "solarflare", "link": "https://stackoverflow.com/users/3693539/solarflare"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1528933622, "post_id": 50847670, "comment_id": 88698905, "body": "I agree its a bad idea but in some cases can be done (and in rare cases can be useful)."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1528933702, "post_id": 50847670, "comment_id": 88698915, "body": "It is <i>never</i> a good idea to put non-system files in a system folder.  Put the DLLs in your own folder.  If you have multiple apps sharing the same DLLs, they can be put into a shared folder and registered with the OS so it knows where to find them."}, {"owner": {"reputation": 480, "user_id": 3693539, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Jb8O2.jpg?s=128&g=1", "display_name": "solarflare", "link": "https://stackoverflow.com/users/3693539/solarflare"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1528945068, "post_id": 50847670, "comment_id": 88700976, "body": "I&#39;ve seen it used in the system folder in a few applications (and we did it too) for dedicated standalone machines used for special purposes."}], "tags": [], "owner": {"reputation": 480, "user_id": 3693539, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Jb8O2.jpg?s=128&g=1", "display_name": "solarflare", "link": "https://stackoverflow.com/users/3693539/solarflare"}, "is_accepted": true, "score": 1, "last_activity_date": 1528932547, "creation_date": 1528932547, "answer_id": 50847670, "question_id": 50847450, "link": "https://stackoverflow.com/questions/50847450/system-error-the-code-cannot-proceed-because-dll-was-not-found/50847670#50847670", "title": "System error - &quot;the code cannot proceed because .dll was not found.&quot;", "body": "<p>Windows will follow a hierarchical order when searching for dll's.</p>\n\n<p>You could place your dll in the same directory as the exe or even in the Windows system folders (only if you're absolutely sure you want to keep this dll forever as there's no cleanup)</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682586(v=vs.85).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/windows/desktop/ms682586(v=vs.85).aspx</a></p>\n"}], "owner": {"reputation": 165, "user_id": 7371561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G5PCH.jpg?s=128&g=1", "display_name": "Connor Mote", "link": "https://stackoverflow.com/users/7371561/connor-mote"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2331, "favorite_count": 0, "accepted_answer_id": 50847670, "answer_count": 1, "score": 1, "last_activity_date": 1528944603, "creation_date": 1528930693, "last_edit_date": 1528944603, "question_id": 50847450, "link": "https://stackoverflow.com/questions/50847450/system-error-the-code-cannot-proceed-because-dll-was-not-found", "title": "System error - &quot;the code cannot proceed because .dll was not found.&quot;", "body": "<p>I'm getting this error when I try to run my app:</p>\n\n<p><a href=\"https://i.stack.imgur.com/WGFs0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WGFs0.png\" alt=\"error\"></a></p>\n\n<p>I checked and there is no reason that I can see that it wouldn't be able to find <code>libnlopt-0.dll</code>. Here it is (note <code>GlassModelCalcualator</code> is the DLL that uses <code>libnlopt-0.dll</code>), in the <code>GlassModelCalcualatorDLL</code> folder:</p>\n\n<p><a href=\"https://i.stack.imgur.com/vGhdV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vGhdV.png\" alt=\"image\"></a></p>\n\n<p>and in the debug folder of <code>GlassModelCalcualatorDLL</code>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/iY65f.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iY65f.png\" alt=\"image\"></a></p>\n\n<p>I have a different program that has a console which uses <code>GlassModelCalcualator.dll</code> and that also has this issue. To fix that, I had to put <code>libnlopt-0.dll</code> in the Debug folder of <code>GlassModelCalcualator</code>.</p>\n\n<p>I'm assuming this is not the same problem here since you can clearly see that <code>libnlopt-0.dll</code> is in <code>GlassModelCalcualator</code>'s Debug folder. </p>\n\n<p>Any ideas? </p>\n"}, {"tags": ["c++", "time", "zeromq"], "comments": [{"owner": {"reputation": 4651, "user_id": 4262344, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/70dad663dd1685c6b4f9675d01253e78?s=128&d=identicon&r=PG&f=1", "display_name": "Goswin von Brederlow", "link": "https://stackoverflow.com/users/4262344/goswin-von-brederlow"}, "edited": false, "score": 0, "creation_date": 1528964005, "post_id": 50847380, "comment_id": 88708082, "body": "&quot;I need to know&quot;. Who or what is I there? You as person? Just have the subscriber print out a time when it gets a message.The publisher? For that the subscriber has to send an ACK back. Can&#39;t be done with just PUB/SUB. The subscriber? Simply read out the time when you get a message."}, {"owner": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "reply_to_user": {"reputation": 4651, "user_id": 4262344, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/70dad663dd1685c6b4f9675d01253e78?s=128&d=identicon&r=PG&f=1", "display_name": "Goswin von Brederlow", "link": "https://stackoverflow.com/users/4262344/goswin-von-brederlow"}, "edited": false, "score": 0, "creation_date": 1528985935, "post_id": 50847380, "comment_id": 88721944, "body": "@GoswinvonBrederlow You may already know, there is a Zero-knowledge about when a msg has actually arrived &quot;into&quot; the <code>Context()</code>-domain of control, as the &quot;outer&quot;-world just asynchronously &quot;asks&quot; the <code>Context()</code>-internal-service, whether there is a new message to retrieve from queue, without knowing, how long that piece of data has been already waiting there for its turn to later get fetched &amp; delivered to the outer-world. So the outer code may record a timestamp, but that refers only about a moment, when outer world has tried to learn &amp; finally indeed has learnt a message can be <code>.recv()</code>&#39;d"}, {"owner": {"reputation": 4651, "user_id": 4262344, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/70dad663dd1685c6b4f9675d01253e78?s=128&d=identicon&r=PG&f=1", "display_name": "Goswin von Brederlow", "link": "https://stackoverflow.com/users/4262344/goswin-von-brederlow"}, "reply_to_user": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "edited": false, "score": 0, "creation_date": 1528986536, "post_id": 50847380, "comment_id": 88722303, "body": "@user3666197 True. But if you poll for messages the difference between a message arriving and poll returning is usually negible."}, {"owner": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "edited": false, "score": 0, "creation_date": 1528987411, "post_id": 50847380, "comment_id": 88722857, "body": "Not necessarily, Sir. Even if one carefully <code>.poll()</code>-s in a non-blocking mode, there are still principal uncertainties ( blind-spots ), how long did that actually take, before your &quot;current&quot; thread did get a CPU-scheduler time-slot for execution, and that is not under one&#39;s control, and gets worse under load, when your priority-driven turn could get way back in the CPU-scheduler code-execution queue + the same valid for the respective <code>Context()</code>-s IO-thread, so a chain of principally uncoordinated async events just grows the E2E-delivery uncertainty and the principal jitter of latency skews."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "reply_to_user": {"reputation": 33, "user_id": 9883033, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XE7mZ.png?s=128&g=1", "display_name": "T-Boone", "link": "https://stackoverflow.com/users/9883033/t-boone"}, "edited": false, "score": 1, "creation_date": 1528993707, "post_id": 50847493, "comment_id": 88726616, "body": "@T-Boone Glad it helped, indeed. Welcome to the StackOverflow Community."}], "tags": [], "owner": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "is_accepted": true, "score": 2, "last_activity_date": 1528931068, "creation_date": 1528931068, "answer_id": 50847493, "question_id": 50847380, "link": "https://stackoverflow.com/questions/50847380/how-to-get-zeromq-timestamp/50847493#50847493", "title": "How to get ZeroMQ Timestamp?", "body": "<blockquote>\n  <p><em>Is there a way to <strong>get this information from ZeroMQ ?</em></strong></p>\n</blockquote>\n\n<p>Fortunately not directly from ZeroMQ API as-is ( in 2018/Q2 ).</p>\n\n<hr>\n\n<h2>Any options?</h2>\n\n<p>Given a coarse TimeDOMAIN resolution is fine, just store a Timestamp every time your code re-loops the <code>while(){...; &lt;here&gt; }</code> codeblock. This approach has a blind-spot of about the <code>usleep()</code>-duration - a latency, where a more precise moment of the receipt is undecideable.</p>\n\n<p>Given this does not suffice, start using a non-blocking mode of a <code>Poller.poll()</code> method, and reduce any such latency to a level your intent can work with. Once handle an <em>almost</em>-zero-latency <code>.poll()</code> having zero-wait duration \"inside\" a <code>Poller.poll()</code> plus avoid spending any such <code>usleep()</code> so as to minimise the blind-spot.</p>\n\n<p>If in an extreme need, refactor the code and introduce a new (private) API extension, so as to read such detail from <code>Context()</code>-instance internal state-registers. This would get you closer, if not the closest, to the actual moment of a message arrival into the hands of the <strong><code>SUB</code></strong>-side <code>Context()</code>'s internal processing.</p>\n"}], "owner": {"reputation": 33, "user_id": 9883033, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XE7mZ.png?s=128&g=1", "display_name": "T-Boone", "link": "https://stackoverflow.com/users/9883033/t-boone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 348, "favorite_count": 1, "accepted_answer_id": 50847493, "answer_count": 1, "score": 3, "last_activity_date": 1528931068, "creation_date": 1528930192, "last_edit_date": 1528930506, "question_id": 50847380, "link": "https://stackoverflow.com/questions/50847380/how-to-get-zeromq-timestamp", "title": "How to get ZeroMQ Timestamp?", "body": "<p>I'm writing a C++/ZMQ script that has a subscriber getting data from a publisher run by a separate script. I can't edit the publisher code, and I need to get the time that the ZeroMQ subscriber receives a message. </p>\n\n<p>Basically, I have:</p>\n\n<pre><code>void *zmq_subscriber_ = zmq_socket( context, ZMQ_SUB );\nzmq_setsockopt( zmq_subscriber_, ZMQ_SUBSCRIBE, NULL, 0 );\n\nwhile ( ( zmq_msg_recv( &amp;msg, zmq_subscriber_, ZMQ_DONTWAIT ) ) &lt; 0 )\n{ usleep( 1000 ); }\n</code></pre>\n\n<p>I need to know when the subscriber receives the message. Is there a way to get this information from ZeroMQ? Thanks in advance to anyone that can help!</p>\n"}, {"tags": ["c++", "symbols", "memcpy", "pdb", "dumpbin"], "answers": [{"comments": [{"owner": {"reputation": 991, "user_id": 9679554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19c0ec4ba34353083598e5abe63e7bc7?s=128&d=identicon&r=PG&f=1", "display_name": "dev65", "link": "https://stackoverflow.com/users/9679554/dev65"}, "edited": false, "score": 1, "creation_date": 1528932200, "post_id": 50847458, "comment_id": 88698622, "body": "this is really !! I tried with some mega bytes and it&#39;s now imported from VCRUNTIME140.dll , if you don&#39;t mind can I ask you : will memcpy always compiled as inline when I use /MT to build static executable as I noticed that when I use c++ std functions I get some winapi that they are wrappers for in the import table but not the situation with memcpy it doesn&#39;t depend on any winapi function"}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 991, "user_id": 9679554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19c0ec4ba34353083598e5abe63e7bc7?s=128&d=identicon&r=PG&f=1", "display_name": "dev65", "link": "https://stackoverflow.com/users/9679554/dev65"}, "edited": false, "score": 0, "creation_date": 1528950553, "post_id": 50847458, "comment_id": 88702057, "body": "I doubt the compiler cares about that flag when it&#39;s deciding what code to emit for any particular invocation of <code>memcpy ()</code> since  (as I&#39;m sure you know) all it does is control whether the program is linked statically or dynamically.  You can experiment further <a href=\"https://godbolt.org\" rel=\"nofollow noreferrer\">here</a> if you want to check it out yourself.  And you can accept my answer if you want to reward me for sharing - that&#39;s the usual practise here.  Thx."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 991, "user_id": 9679554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19c0ec4ba34353083598e5abe63e7bc7?s=128&d=identicon&r=PG&f=1", "display_name": "dev65", "link": "https://stackoverflow.com/users/9679554/dev65"}, "edited": false, "score": 0, "creation_date": 1528970959, "post_id": 50847458, "comment_id": 88712509, "body": "@dev65 I don&#39;t think you have the rep yet to vote but you can <a href=\"https://stackoverflow.com/help/someone-answers\">accept it</a>. (I am <i>shameless</i> :)"}], "tags": [], "owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "is_accepted": true, "score": 3, "last_activity_date": 1528930765, "creation_date": 1528930765, "answer_id": 50847458, "question_id": 50847281, "link": "https://stackoverflow.com/questions/50847281/why-isnt-memcpy-in-the-import-table/50847458#50847458", "title": "Why isn&#39;t memcpy in the import table?", "body": "<p><code>memcpy</code> is often treated as an <a href=\"https://msdn.microsoft.com/en-us/library/tzkfha43.aspxz\" rel=\"nofollow noreferrer\">intrinsic</a>, especially when copying small items, and thus is compiled entirely as inline code.</p>\n\n<p>Try copying something larger.  Then you might see it in the import table.</p>\n"}], "owner": {"reputation": 991, "user_id": 9679554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19c0ec4ba34353083598e5abe63e7bc7?s=128&d=identicon&r=PG&f=1", "display_name": "dev65", "link": "https://stackoverflow.com/users/9679554/dev65"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 50847458, "answer_count": 1, "score": 1, "last_activity_date": 1528953530, "creation_date": 1528929544, "last_edit_date": 1528953530, "question_id": 50847281, "link": "https://stackoverflow.com/questions/50847281/why-isnt-memcpy-in-the-import-table", "title": "Why isn&#39;t memcpy in the import table?", "body": "<p>I was playing with a pdb generated by Visual Studio when I saw <code>memcpy</code> in the list of symbols so I used dumpbin to inspect the import table in the executable but there was no reference to <code>memcpy</code> there.</p>\n\n<p>Isn't <code>memcpy</code> a function exported from crt library?  If so, why don`t I see it in the output of dumpbin?</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1528929538, "post_id": 50847255, "comment_id": 88697942, "body": "Why not keep <code>elapsed</code> and <code>lastElapsed</code> <i>as</i> <a href=\"http://en.cppreference.com/w/cpp/chrono/duration\" rel=\"nofollow noreferrer\">durations</a>?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1528929584, "post_id": 50847255, "comment_id": 88697956, "body": "As for (a part of) your problem, <code>std::ducation_cast&lt;...&gt;</code> is not a valid <i>type</i>."}, {"owner": {"reputation": 1786, "user_id": 4099287, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OMz777BPLQI/AAAAAAAAAAI/AAAAAAAAFcM/tV8IW2TybOw/photo.jpg?sz=128", "display_name": "Kevin M Granger", "link": "https://stackoverflow.com/users/4099287/kevin-m-granger"}, "edited": false, "score": 1, "creation_date": 1528929585, "post_id": 50847255, "comment_id": 88697958, "body": "You&#39;re missing a semicolon on the previous line. I recommend using an editor / IDE that will catch these issues for you."}, {"owner": {"reputation": 13626, "user_id": 2697571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cefd29d899fd6175ce401961e209a2a8?s=128&d=identicon&r=PG&f=1", "display_name": "Mendes", "link": "https://stackoverflow.com/users/2697571/mendes"}, "reply_to_user": {"reputation": 1786, "user_id": 4099287, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OMz777BPLQI/AAAAAAAAAAI/AAAAAAAAFcM/tV8IW2TybOw/photo.jpg?sz=128", "display_name": "Kevin M Granger", "link": "https://stackoverflow.com/users/4099287/kevin-m-granger"}, "edited": false, "score": 0, "creation_date": 1528929642, "post_id": 50847255, "comment_id": 88697974, "body": "@Kevin, fixed. Tks."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1528929660, "post_id": 50847255, "comment_id": 88697979, "body": "And <b><i>don&#39;t edit your question to incorporate fixes</i></b>, unless they are there in your original code and you just forgot about them. It makes answers and comments worthless."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1528929680, "post_id": 50847255, "comment_id": 88697985, "body": "<a href=\"http://en.cppreference.com/w/cpp/chrono/duration/duration_cast\" rel=\"nofollow noreferrer\"><code>duration_cast</code></a> is a function. You&#39;re trying to use it as a type."}], "answers": [{"tags": [], "owner": {"reputation": 25894, "user_id": 4304, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5MIg7.jpg?s=128&g=1", "display_name": "zdan", "link": "https://stackoverflow.com/users/4304/zdan"}, "is_accepted": true, "score": 3, "last_activity_date": 1528930582, "creation_date": 1528930582, "answer_id": 50847429, "question_id": 50847255, "link": "https://stackoverflow.com/questions/50847255/how-to-compare-two-elapsed-times/50847429#50847429", "title": "How to compare two elapsed times?", "body": "<p>Firstly, <code>std::chrono::duration_cast</code> is not a type, its function that returns a duration, so your declaration of <code>lastElapsed</code> is invalid. You can fix it like this:</p>\n\n<pre><code>auto lastElapsed = std::chrono::duration_cast&lt;std::chrono::microseconds&gt;(end - begin);\n</code></pre>\n\n<p>which essentially initializes  <code>lastElapsed</code> with a value of 0.</p>\n\n<p>Then when you compute <code>elapsed</code> use the same type:</p>\n\n<pre><code>auto elapsed = std::chrono::duration_cast&lt;std::chrono::microseconds&gt;(end - begin);\n</code></pre>\n\n<p>don't bother with the <code>count()</code> member function, until you need to output the value:</p>\n\n<pre><code>    std::cout &lt;&lt; \"The slowest execution interval is now at  \" &lt;&lt; elapsed.count() &lt;&lt; \" us\" &lt;&lt; std::endl;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4650, "user_id": 6755083, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/CVobU.png?s=128&g=1", "display_name": "seccpur", "link": "https://stackoverflow.com/users/6755083/seccpur"}, "is_accepted": false, "score": 1, "last_activity_date": 1528940816, "creation_date": 1528940816, "answer_id": 50848498, "question_id": 50847255, "link": "https://stackoverflow.com/questions/50847255/how-to-compare-two-elapsed-times/50848498#50848498", "title": "How to compare two elapsed times?", "body": "<p>Check this:</p>\n\n<pre><code>    std::chrono::steady_clock::time_point begin, end;\n    std::chrono::microseconds lastElapsed;\n\n    begin = std::chrono::steady_clock::now();\n\n    //... some processing to be measured ...\n\n    end = std::chrono::steady_clock::now();\n    auto elapsed = std::chrono::duration_cast&lt;std::chrono::microseconds&gt;(end - begin);\n\n    if (elapsed &gt; lastElapsed)\n    {\n        std::cout &lt;&lt; \"The slowest execution interval is now at  \" &lt;&lt; elapsed.count() &lt;&lt; \"us\" &lt;&lt; std::endl;          \n    }\n\n    lastElapsed = elapsed; \n</code></pre>\n"}], "owner": {"reputation": 13626, "user_id": 2697571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cefd29d899fd6175ce401961e209a2a8?s=128&d=identicon&r=PG&f=1", "display_name": "Mendes", "link": "https://stackoverflow.com/users/2697571/mendes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 50847429, "answer_count": 2, "score": 0, "last_activity_date": 1528940816, "creation_date": 1528929378, "last_edit_date": 1528929694, "question_id": 50847255, "link": "https://stackoverflow.com/questions/50847255/how-to-compare-two-elapsed-times", "title": "How to compare two elapsed times?", "body": "<p>Consider the following code that will show me always the slowest execution time of some code:</p>\n\n<pre><code>std::chrono::steady_clock::time_point begin, end\nstd::chrono::duration_cast&lt;std::chrono::microseconds&gt; lastElapsed;\n\nbegin = std::chrono::steady_clock::now();\n\n... some processing to be measured ...\n\nend = std::chrono::steady_clock::now();\nauto elapsed = std::chrono::duration_cast&lt;std::chrono::microseconds&gt;(end - begin).count();\n\nif (elapsed &gt; lastElapsed)\n{\n    std::cout &lt;&lt; \"The slowest execution interval is now at  \" &lt;&lt; elapsed &lt;&lt; \"us\" &lt;&lt; std::endl;\n    lastElapsed = elapsed;\n}\n</code></pre>\n\n<p>I can't compile: </p>\n\n<pre><code>/home/user/dev/MyThread.cpp:104:59: error: expected \u2018;\u2019 before \u2018lastElapsed\u2019\n     std::chrono::duration_cast&lt;std::chrono::microseconds&gt; lastElapsed;\n                                                           ^\n/home/user/dev/MyThread.cpp:104:70: error: statement cannot resolve address of overloaded function\n     std::chrono::duration_cast&lt;std::chrono::microseconds&gt; lastElapsed;\n                                                                      ^\n/home/user/dev/MyThread.cpp:114:19: error: \u2018lastElapsed\u2019 was not declared in this scope\n     if (elapsed &gt; lastElapsed)\n</code></pre>\n\n<p>How can I fix this interval comparer and set the <code>lastElapsed</code> variable type accordingly?</p>\n"}, {"tags": ["c++", "qt", "opencv", "qt5"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9174145"}, "edited": false, "score": 0, "creation_date": 1529005925, "post_id": 50848100, "comment_id": 88732366, "body": "Thank you eyllanesc for the explanation and for sharing the repository! I am going through the code now and It is much more clear how to compute the histograms."}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 0, "last_activity_date": 1528937221, "last_edit_date": 1528937221, "creation_date": 1528936665, "answer_id": 50848100, "question_id": 50847204, "link": "https://stackoverflow.com/questions/50847204/how-to-turn-an-array-of-data-of-a-cropped-image-in-opencv-into-a-rgb-histogram-i/50848100#50848100", "title": "How to turn an array of data of a cropped image in openCV into a RGB Histogram in Qt", "body": "<p>Using <a href=\"https://docs.opencv.org/2.4/doc/tutorials/imgproc/histograms/histogram_calculation/histogram_calculation.html\" rel=\"nofollow noreferrer\">this example</a> of OpenCV, also to show the graph use <code>QChartView</code> as shown below:</p>\n\n<pre><code>#include &lt;QApplication&gt;\n\n#include &lt;QtCharts&gt;\nQT_CHARTS_USE_NAMESPACE\n\n#include \"opencv2/imgproc/imgproc.hpp\"\n#include \"opencv2/highgui/highgui.hpp\"\n\nstatic cv::Mat QImageToMat(const QImage &amp; image){\n    cv::Mat out;\n    switch(image.format()) {\n    case QImage::Format_Invalid:\n    {\n        cv::Mat empty;\n        empty.copyTo(out);\n        break;\n    }\n    case QImage::Format_RGB32:\n    {\n        cv::Mat view(image.height(),image.width(),CV_8UC4,(void *)image.constBits(),image.bytesPerLine());\n        view.copyTo(out);\n        break;\n    }\n    case QImage::Format_RGB888:\n    {\n        cv::Mat view(image.height(),image.width(),CV_8UC3,(void *)image.constBits(),image.bytesPerLine());\n        cv::cvtColor(view, out, cv::COLOR_RGB2BGR);\n        break;\n    }\n    default:\n    {\n        QImage conv = image.convertToFormat(QImage::Format_ARGB32);\n        cv::Mat view(conv.height(),conv.width(),CV_8UC4,(void *)conv.constBits(),conv.bytesPerLine());\n        view.copyTo(out);\n        break;\n    }\n    }\n    return out;\n}\n\nstatic std::vector&lt;cv::Mat&gt; calculate_histogram(const QImage &amp; image){\n    cv::Mat src = QImageToMat(image);\n\n    std::vector&lt;cv::Mat&gt; bgr_planes;\n    cv::split(src, bgr_planes );\n    /// Establish the number of bins\n    int histSize = 256;\n\n    /// Set the ranges ( for B,G,R) )\n    float range[] = { 0, 256 } ;\n    const float* histRange = { range };\n\n    bool uniform = true; bool accumulate = false;\n\n    std::vector&lt;cv::Mat&gt; hist;\n    for(std::size_t i = 0; i &lt; bgr_planes.size(); ++i){\n        hist.push_back(cv::Mat());\n        cv::calcHist( &amp;bgr_planes[i], 1, 0, cv::Mat(), hist[i], 1, &amp;histSize, &amp;histRange, uniform, accumulate );\n    }\n\n    return hist;\n}\n\nint main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n\n    QImage image(\":/lena.png\");\n\n    QChartView *view = new QChartView;\n    QChart *chart = new QChart;\n    view-&gt;setChart(chart);\n\n    const QStringList titles{\"Blue\", \"Green\", \"Red\"};\n    std::vector&lt;cv::Mat&gt; hist_planes = calculate_histogram(image);\n\n    for(std::size_t i = 0; i&lt; 3; ++i){\n        const cv::Mat mat = hist_planes[i];\n        QLineSeries *series = new QLineSeries;\n        series-&gt;setColor(QColor(titles[i]));\n        series-&gt;setName(titles[i]);\n        for(int j=0; j &lt; mat.rows; ++j){\n            *series &lt;&lt; QPoint(j, mat.at&lt;float&gt;(j));\n        }\n        chart-&gt;addSeries(series);\n    }\n\n    chart-&gt;createDefaultAxes();\n    chart-&gt;axisX()-&gt;setGridLineVisible(false);\n    chart-&gt;axisY()-&gt;setGridLineVisible(false);\n\n    QLabel *label = new QLabel;\n    label-&gt;setPixmap(QPixmap::fromImage(image));\n\n    QWidget w;\n    QHBoxLayout *lay = new QHBoxLayout(&amp;w);\n    lay-&gt;addWidget(label);\n    lay-&gt;addWidget(view);\n\n    w.show();\n\n    return a.exec();\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/VslLA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VslLA.png\" alt=\"enter image description here\"></a></p>\n\n<p>In the following <a href=\"https://github.com/eyllanesc/stackoverflow/tree/master/50847204\" rel=\"nofollow noreferrer\">link</a> you can find the complete example.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9174145"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "accepted_answer_id": 50848100, "answer_count": 1, "score": 1, "last_activity_date": 1528937221, "creation_date": 1528929125, "question_id": 50847204, "link": "https://stackoverflow.com/questions/50847204/how-to-turn-an-array-of-data-of-a-cropped-image-in-opencv-into-a-rgb-histogram-i", "title": "How to turn an array of data of a cropped image in openCV into a RGB Histogram in Qt", "body": "<p>I have an interface that is formed of two QGraphicsView: One QGraphicsView is used to show images from a right camera and the second QGraphicsView is used to show images from a left camera.\nBoth QGraphicsViews are also used to upload images (e.g. from file) so that it is possible to perform image processing operations. Once the image is uploaded on, for example, the left QGraphicsView I am able to draw a box on a particular feature of the image and extract it. As soon as I right click the mouse button I open a menu. One of the functions that I am struggling with is that I am trying to transform the cropped image derived from the drawn box into an RGB histogram. I am using openCV to transform the image into a series of array, and pass these array to 3 QLabels to show R, G, B histograms. However I am not able to draw the RGB histograms and can't catch the mistake. I am attaching a snapshot of the UI for information:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Slq96.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Slq96.png\" alt=\"histogram instead of image\"></a></p>\n\n<p>The code is also attached below:</p>\n\n<p><strong>clipscene.h</strong></p>\n\n<pre><code>#ifndef CLIPSCENE_H\n#define CLIPSCENE_H\n#include &lt;QDialog&gt;\n#include &lt;QGraphicsScene&gt;\n#include &lt;QGraphicsPixmapItem&gt;\n#include \"opencv2/imgproc.hpp\"\n#include \"opencv2/imgproc/imgproc.hpp\"\n#include \"opencv2/highgui.hpp\"\n#include \"opencv2/highgui/highgui.hpp\"\n\nnamespace Ui {\nclass clipScene;\n}\n\nclass clipScene : public QDialog\n{\n    Q_OBJECT\npublic:\n    explicit clipScene(QWidget *parent = 0);\n    ~clipScene();\n    void setImage(QImage img);\n    void setBoundingBox(QRect rect);\nprivate slots:\n    void on_closeBtn_clicked();\n    void on_acceptBtn_clicked();\n    void showEvent(QShowEvent *);\nprivate:\n    Ui::clipScene *ui;\n    QImage simg, simgR, simgG, simgB;\n    QRect srect;\n    QGraphicsScene *scene;\n};\n#endif // CLIPSCENE_H \n</code></pre>\n\n<p>And <strong>clipscene.cpp</strong></p>\n\n<pre><code>#include \"clipscene.h\"\n#include \"ui_clipscene.h\"\n\nusing namespace cv;\nclipScene::clipScene(QWidget *parent) :\n    QDialog(parent),\n    ui(new Ui::clipScene)\n{\n    ui-&gt;setupUi(this);\n\n    scene = new QGraphicsScene();\n    ui-&gt;graphicsViewClipped-&gt;setScene(scene);\n    ui-&gt;redImg-&gt;setText(\"&lt;b&gt;Calculate Graph&lt;/b&gt;\");\n    ui-&gt;greenImg-&gt;setText(\"&lt;b&gt;Calculate Graph&lt;/b&gt;\");\n    ui-&gt;blueImg-&gt;setText(\"&lt;b&gt;Calculate Graph&lt;/b&gt;\");\n}\nclipScene::~clipScene()\n{\n    delete ui;\n}\nvoid clipScene::setImage(QImage img)\n{\n    simg = img;\n    QGraphicsPixmapItem* item = new QGraphicsPixmapItem(QPixmap::fromImage(simg));\n    scene-&gt;addItem(item);\n    ui-&gt;graphicsViewClipped-&gt;show();\n    cv::Mat input = cv::Mat(simg.height(), simg.width(), QImage::Format_ARGB32, simg.bits(), simg.bytesPerLine());\n    cv::Mat channel[3];\n    // Establish the number of bins\n    int hbins = 30, sbins = 32;\n    int histSize[] = {hbins, sbins};    \n    // Set the ranges ( for B,G,R) )\n    float hranges[] = { 0, 180 };\n    // saturation varies from 0 (black-gray-white) to 255 (pure spectrum color)\n    float sranges[] = { 0, 256 };\n    const float* histRange[] = { hranges, sranges };\n    bool uniform = true; bool accumulate = false;\n\n    split(input, channel);\n    int channels[] = {0, 1}; // Now for one channel (R)\n    MatND hist;\n\n    cv::calcHist(&amp;input, 1, channels, Mat(), hist, 1, histSize, histRange, uniform, accumulate);\n    // The actual splitting.\n    double maxVal=0;\n    minMaxLoc(hist, 0, &amp;maxVal, 0, 0);\n\n    int scale = 10;\n    Mat histImg = Mat::zeros(sbins*scale, hbins*10, CV_8UC3);\n\n    for( int h = 0; h &lt; hbins; h++ )\n        for( int s = 0; s &lt; sbins; s++ )\n        {\n            float binVal = hist.at&lt;float&gt;(h, s);\n            int intensity = cvRound(binVal*255/maxVal);\n\n            // The arrays of data in openCV should be used here to draw \n            // the histogram\n\n        }\n    ui-&gt;redImg-&gt;setScaledContents(true);\n    ui-&gt;redImg-&gt;setPixmap(QPixmap::fromImage(QImage(channel[0].data, channel[0].cols, channel[0].rows, channel[0].step, QImage::Format_ARGB32) \\\n            .scaled(200,200,Qt::KeepAspectRatio,Qt::SmoothTransformation)));\n}\n</code></pre>\n\n<p>I found <a href=\"https://docs.opencv.org/2.4/modules/imgproc/doc/histograms.html?highlight=calchist#calchist\" rel=\"nofollow noreferrer\">this</a> and I was also reading additional material from openCV documentation but still the problem persists.\nAny idea on how to solve this problem? </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1528928770, "post_id": 50847124, "comment_id": 88697736, "body": "The biggest problem, IMO, is that you&#39;re mixing output and input in your <code>operator&gt;&gt;</code> function. The input operator should <i>only</i> read input, not use prompts etc. If you need prompts, create a non-operator function to read the input."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 2, "creation_date": 1528928779, "post_id": 50847124, "comment_id": 88697738, "body": "Don&#39;t try to learn C++ by writing interactive programs. But if you must <code>is&gt;&gt;price;</code>  should almost certainly be <code>is&gt;&gt;car.price;</code>, and similarly elsewhere. I feel a Punchtape coming on...."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1528928843, "post_id": 50847124, "comment_id": 88697755, "body": "Your second biggest problem, also IMO, is the use of arrays for strings instead of <code>std::string</code>. All in all it seems you could need to <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list/388282#388282\">get a few good books</a> to read."}, {"owner": {"reputation": 1, "user_id": 9813086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6188d9a26cea25854289a30caf7cf7b4?s=128&d=identicon&r=PG&f=1", "display_name": "Karmen", "link": "https://stackoverflow.com/users/9813086/karmen"}, "edited": false, "score": 0, "creation_date": 1528928992, "post_id": 50847124, "comment_id": 88697793, "body": "The task requires char* ,also I have deleted the cout&#39;s from the &lt;&lt; operator but nothing changed"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1528929136, "post_id": 50847124, "comment_id": 88697832, "body": "Prefer to use <code>std::string</code> for text rather than character arrays.  Character arrays are subject to buffer overrun errors and may contribute to memory leaks."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1528929376, "post_id": 50847124, "comment_id": 88697899, "body": "Prefer to use named constants for capacities.  With a named constant, you&#39;ll only need to modify one location to change the value."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1528929626, "post_id": 50847124, "comment_id": 88697969, "body": "The <code>case</code> block is declaring a local variable. Some compilers warn/error on that if the <code>case</code> block is not surrounded in braces, eg: <code>case &#39;A&#39;: { Car c; cin&gt;&gt;c; break; }</code>"}, {"owner": {"reputation": 1, "user_id": 9813086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6188d9a26cea25854289a30caf7cf7b4?s=128&d=identicon&r=PG&f=1", "display_name": "Karmen", "link": "https://stackoverflow.com/users/9813086/karmen"}, "edited": false, "score": 0, "creation_date": 1528929745, "post_id": 50847124, "comment_id": 88698008, "body": "yes I will fix the style ,but I cannot figure out the multiple invocations of menu.display();"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1528930357, "post_id": 50847124, "comment_id": 88698188, "body": "Do you have the same problem if you reduce the code to <code>while(true)    {     menu.display();     char choice;     cin&gt;&gt;choice; }</code>?"}, {"owner": {"reputation": 1, "user_id": 9813086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6188d9a26cea25854289a30caf7cf7b4?s=128&d=identicon&r=PG&f=1", "display_name": "Karmen", "link": "https://stackoverflow.com/users/9813086/karmen"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1528930462, "post_id": 50847124, "comment_id": 88698211, "body": "@user4581301 for this code if I input 1 char , the function gets called once ,ofcourse if I input for the char something like ABC it gets printed 3 times"}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1528931019, "post_id": 50847124, "comment_id": 88698359, "body": "@NeilButterworth Why do you say to not make interactive programs to learn C++?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1528931147, "post_id": 50847124, "comment_id": 88698381, "body": "OK. So the problem really is in <code>operator &gt;&gt;</code>. What is the input format? <code>is&gt;&gt;miles;</code> could be leaving crap like a newline in the stream to be picked off by <code>is.getline(brand,50);</code>. You know, a stroll through the code with whatever debugging software came with your development environment can probably sort this out for you fairly quickly."}], "answers": [{"tags": [], "owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "is_accepted": false, "score": 0, "last_activity_date": 1528933217, "last_edit_date": 1528933217, "creation_date": 1528932715, "answer_id": 50847685, "question_id": 50847124, "link": "https://stackoverflow.com/questions/50847124/mixing-cin-with-operator-for-a-class/50847685#50847685", "title": "Mixing cin with &gt;&gt; operator for a class", "body": "<p>Your biggest issue is that you don't validate your input.<br>\nAs a result you are probably setting the input stream into an error state which results in all further read operations failing.</p>\n\n<p>Your read operation should either succeed and update the car object, or it should fail and not change the state of the car (hopefully doing something so the error propagates).</p>\n\n<p>First check that your user choice worked:</p>\n\n<pre><code>if (cin&gt;&gt;choice) {\n    switch(choice)\n     ...\n}\n</code></pre>\n\n<p>Inside the read operator you need to make sure that you don't update the object until you have read the whole object from the stream.</p>\n\n<p>I would do this:</p>\n\n<pre><code> // Need a helper object to make reading lines easier.\n struct Line\n {\n     char* dst;\n     int   max;\n     Line(char* dst, int max)\n         : dst(dst)\n         , max(max)\n     {}\n     friend std::istream&amp; operator&lt;&lt;(std::istream&amp; s, Line&amp; line) {\n         if (s.getline(line.dst, line.max) {\n             s.ignore();\n         }\n         return s;\n     }\n };\n\n istream&amp; operator&gt;&gt;(istream &amp;is , Car &amp;car)\n {\n    double price;\n    int miles;\n    char brand[50];\n    char model[50];\n    char category[50];\n\n    if (is &gt;&gt; price &gt;&gt; miles &gt;&gt; Line(brand, 50) &gt;&gt; Line(model, 50) &gt;&gt; line(category, 50) ) {\n        car.setPrice(price); \n        car.setMiles(miles);\n        car.setBrand(brand);\n        car.setModel(model);\n        car.setCategory(category);\n\n        // PS I hate all these setters. Leaking the implementation.\n        // I would have written the above as:\n        // car = Car(price, miles, brand, model, category);\n    }\n    // if there was a read error then `car` is unchanged\n    // and the stream `is` is in an error state.\n    return is;\n}\n</code></pre>\n\n<p>Now that I have refactored your code I can bet the error is after reading the miles. I bet you have an input file that looks like this:</p>\n\n<pre><code> price\n miles\n brand\n model\n category\n</code></pre>\n\n<p>Where each value is separated by a new line. The trouble is that <code>operator&gt;&gt;</code> does not read the trailing new line. So after reading <code>miles</code> you still have a newline on the stream. This means when you read <code>brand</code> it will be empty, <code>model</code> will be <code>brand</code> and <code>category</code> will be <code>model</code>. This leaves category on the stream and the next time you read a car it will fail as <code>Category</code> will not match a price causing the stream to go into error state.</p>\n\n<p>Assuming I guessed the error correctly this can be fixed as follows:</p>\n\n<pre><code> struct Line\n {\n     char* dst;\n     int   max;\n     Line(char* dst, int max)\n         : dst(dst)\n         , max(max)\n     {}\n     friend std::istream&amp; operator&lt;&lt;(std::istream&amp; s, Line&amp; line) {\n         // Assume there is a proceeding newline that\n         // must be removed. Do this with s.ignore()\n         s.ignore() &amp;&amp; s.getline(line.dst, line.max);\n         return s;\n     }\n };\n\n istream&amp; operator&gt;&gt;(istream &amp;is , Car &amp;car)\n {\n    double price;\n    int miles;\n    char brand[50];\n    char model[50];\n    char category[50];\n\n    if (is &gt;&gt; price &gt;&gt; miles &gt;&gt; Line(brand, 50) &gt;&gt; Line(model, 50) &gt;&gt; line(category, 50) ) {\n        car = Car(price, miles, brand, model, category);\n\n        // Remove the newline after the `category`\n        is.ignore();\n    }\n    // if there was a read error then `car` is unchanged\n    // and the stream `is` is in an error state.\n    return is;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9813086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6188d9a26cea25854289a30caf7cf7b4?s=128&d=identicon&r=PG&f=1", "display_name": "Karmen", "link": "https://stackoverflow.com/users/9813086/karmen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528937773, "creation_date": 1528928608, "last_edit_date": 1528937773, "question_id": 50847124, "link": "https://stackoverflow.com/questions/50847124/mixing-cin-with-operator-for-a-class", "title": "Mixing cin with &gt;&gt; operator for a class", "body": "<p>Hello in the following code </p>\n\n<pre><code>int main()\n{\n //intialize variables\n\n   while(true)\n   {\n    menu.display();\n    char choice;\n    cin&gt;&gt;choice;\n\n      switch(choice)\n      {\n       case 'A':\n          Car c;\n          cin&gt;&gt;c;\n          break;\n      }\n   }\n return 0;\n}\n</code></pre>\n\n<p>When I input 'A' and use the overrided <code>operator &gt;&gt;</code> for Car class, <code>menu.display()</code> gets called 3 times but I suppose it should be called once ,where can be the problem? here is the implementation of the <code>&gt;&gt; operator</code> : </p>\n\n<pre><code> istream&amp; operator&gt;&gt;(istream &amp;is , Car &amp;car)\n {\n\n    double price;\n    is&gt;&gt;price;\n    car.setPrice(price); \n    int miles;\n    is&gt;&gt;miles;\n    car.setMiles(miles);\n    char brand[50];\n    is.getline(brand,50);\n    is.ignore();\n    car.setBrand(brand);\n    char model[50];\n    is.getline(model,50);\n    is.ignore();\n    car.setModel(model);\n    char category[50];\n    is.getline(category,50);\n    is.ignore();\n    car.setCategory(category);\n  return is;\n\n}\n</code></pre>\n\n<p>Probably I am mixing very bad the operators but I can't understand where and how?</p>\n"}, {"tags": ["c++", "structure"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1528928642, "post_id": 50847099, "comment_id": 88697706, "body": "<code>while(!infile.eof())</code> combined with <code>for(i=0; i&lt;=2; i++)</code> seems a bit odd. In the <code>for</code> loop you could try to read past the end of the file before you get back to testing for the end of the file. And a quick words from the experts on using <code>while(!infile.eof())</code>: <a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\">Why is iostream::eof inside a loop condition considered wrong?</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1528928647, "post_id": 50847099, "comment_id": 88697710, "body": "It won&#39;t even compile as C++ code - please edit it so that it does."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1528929512, "post_id": 50847099, "comment_id": 88697937, "body": "Prefer to use <code>std::string</code> for text, it will save you a lot of grief (such as buffer overrun issues)."}, {"owner": {"reputation": 9, "user_id": 9860750, "user_type": "registered", "profile_image": "https://graph.facebook.com/1706362776107717/picture?type=large", "display_name": "Mr.bunty", "link": "https://stackoverflow.com/users/9860750/mr-bunty"}, "edited": false, "score": 0, "creation_date": 1528929541, "post_id": 50847099, "comment_id": 88697944, "body": "both these loops are working fine. the for loop runs for three times then exits, and then we reach the end of the file thus the while loop also exits. half the code is working fine(till getting the data into the structure). the writing part into the outfile(student data 2.txt) is not working. and its not giving any compiler errors."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1528929561, "post_id": 50847099, "comment_id": 88697949, "body": "IMHO, you should overload <code>operator&gt;&gt;</code> within your class.  Keep the knowledge of the class&#39; data members inside the class; the class knows how to read the data members."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1528929616, "post_id": 50847099, "comment_id": 88697966, "body": "Prefer to use <code>std::vector</code> than arrays.  Arrays are fixed in size and suffer from buffer overrun issues (and the number of valid items is not determined)."}, {"owner": {"reputation": 121, "user_id": 6114339, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-y1wXXlV69ZY/AAAAAAAAAAI/AAAAAAAAA7s/BmDcBas7lTk/photo.jpg?sz=128", "display_name": "fcooper8472", "link": "https://stackoverflow.com/users/6114339/fcooper8472"}, "edited": false, "score": 0, "creation_date": 1528929746, "post_id": 50847099, "comment_id": 88698011, "body": "Your problem is indices.  You are creating an array of two structs <code>student stu[2];</code>. You are then filling it with three <code>for(i=0; i&lt;=2; i++)</code>."}, {"owner": {"reputation": 121, "user_id": 6114339, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-y1wXXlV69ZY/AAAAAAAAAAI/AAAAAAAAA7s/BmDcBas7lTk/photo.jpg?sz=128", "display_name": "fcooper8472", "link": "https://stackoverflow.com/users/6114339/fcooper8472"}, "edited": false, "score": 0, "creation_date": 1528930111, "post_id": 50847099, "comment_id": 88698118, "body": "I should also say it would be much easier to help if you (1) pasted code that actually compiles (including <code>#include ...</code>), and (2) if you share any input data necessary to reproduce your problem (the contents of <code>&quot;student data.txt&quot;</code>)."}, {"owner": {"reputation": 9, "user_id": 9860750, "user_type": "registered", "profile_image": "https://graph.facebook.com/1706362776107717/picture?type=large", "display_name": "Mr.bunty", "link": "https://stackoverflow.com/users/9860750/mr-bunty"}, "edited": false, "score": 0, "creation_date": 1528930502, "post_id": 50847099, "comment_id": 88698221, "body": "its #include&lt;iostream&gt; , &lt;fstream&gt; and &lt;stdlib.h&gt;. the input data in input file is:nasir CS201 23 3 Jamil CS201 31 4 Faisal CS201 25 3.5"}, {"owner": {"reputation": 9, "user_id": 9860750, "user_type": "registered", "profile_image": "https://graph.facebook.com/1706362776107717/picture?type=large", "display_name": "Mr.bunty", "link": "https://stackoverflow.com/users/9860750/mr-bunty"}, "edited": false, "score": 0, "creation_date": 1528930680, "post_id": 50847099, "comment_id": 88698272, "body": "fcooper8472 .... dude array count starts from 0 i think. and there are three arrays. stu[0],stu[1],stu[2]."}, {"owner": {"reputation": 9, "user_id": 9860750, "user_type": "registered", "profile_image": "https://graph.facebook.com/1706362776107717/picture?type=large", "display_name": "Mr.bunty", "link": "https://stackoverflow.com/users/9860750/mr-bunty"}, "edited": false, "score": 0, "creation_date": 1528930782, "post_id": 50847099, "comment_id": 88698300, "body": "can anyone just edit my code and let me see please..."}, {"owner": {"reputation": 9, "user_id": 9860750, "user_type": "registered", "profile_image": "https://graph.facebook.com/1706362776107717/picture?type=large", "display_name": "Mr.bunty", "link": "https://stackoverflow.com/users/9860750/mr-bunty"}, "edited": false, "score": 0, "creation_date": 1528930923, "post_id": 50847099, "comment_id": 88698336, "body": "user8541301 thanks for pointing out the while loop.. it was not wrong but useless here."}, {"owner": {"reputation": 350, "user_id": 9723461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8fd01cd442e062d643682e3ac4d3b10?s=128&d=identicon&r=PG&f=1", "display_name": "MPops", "link": "https://stackoverflow.com/users/9723461/mpops"}, "edited": false, "score": 0, "creation_date": 1528932245, "post_id": 50847099, "comment_id": 88698628, "body": "@Mr.bunty lol, yes array count starts at 0, but if you do not know about how <code>char myarray[10]</code> gives you indexes from 0-9, please go to a c++ reference website and learn how c++ works before posting here. If you declare an array of size 2, and index starts at 0, why do you think the size magically becomes 3? &quot;and there are three arrays&quot;. No, you declared an array of size 2, there are two objects. One at index 0, and another at index 1."}, {"owner": {"reputation": 9, "user_id": 9860750, "user_type": "registered", "profile_image": "https://graph.facebook.com/1706362776107717/picture?type=large", "display_name": "Mr.bunty", "link": "https://stackoverflow.com/users/9860750/mr-bunty"}, "edited": false, "score": 1, "creation_date": 1528933395, "post_id": 50847099, "comment_id": 88698864, "body": "thank you so much mpops and fcooper8472... i just made a stupid mistake in array indexing. thanks guyz and sorry to fcooper8472 if my above comment offended you, :)"}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 9860750, "user_type": "registered", "profile_image": "https://graph.facebook.com/1706362776107717/picture?type=large", "display_name": "Mr.bunty", "link": "https://stackoverflow.com/users/9860750/mr-bunty"}, "edited": false, "score": 0, "creation_date": 1528937105, "post_id": 50847846, "comment_id": 88699538, "body": "thank you so much dude... you have pointed out the right issue but this problem was already solved as you can see in the comments. anyways thanks a lot. :)"}], "tags": [], "owner": {"reputation": 552, "user_id": 9900911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/693018196257bd546178b53a34149b45?s=128&d=identicon&r=PG&f=1", "display_name": "armitus", "link": "https://stackoverflow.com/users/9900911/armitus"}, "is_accepted": false, "score": 0, "last_activity_date": 1528934401, "creation_date": 1528934401, "answer_id": 50847846, "question_id": 50847099, "link": "https://stackoverflow.com/questions/50847099/writing-structure-to-a-text-file-in-c/50847846#50847846", "title": "writing structure to a text file in c++", "body": "<p>Alright, so this is fortunately a very simple solution! The problem you are facing is related to memory management. This line is causing you all the trouble:</p>\n\n<pre><code>student stu[2];\n</code></pre>\n\n<p>AND</p>\n\n<pre><code>int i =0;\nwhile(i&lt;3)\n</code></pre>\n\n<p>Basically, you're initializing 2 structs (indexes 0-1) of type student, then expecting to iterate over 3 structs (from index 0-2). When attempting to read in the third struct, you can get a memory access violation error.</p>\n\n<p>So I ran your code with this text in \"student data.txt\"</p>\n\n<pre><code>nasir CS201 23 3\nJamil CS201 31 4\nFaisal CS201 25 3.5\n</code></pre>\n\n<p>When only two structs were initialized, \"student data 2\" remained blank. However, when increasing the value to <code>student stu[3];</code>, \"student data 2.txt\" gave the following output:</p>\n\n<pre><code>nasir\nCS201\n23\n3\nJamil\nCS201\n31\n4\nFaisal\nCS201\n25\n3.5\n</code></pre>\n\n<p>Here is the code I used to create a successful version of your program, with a couple of extra printf's for debugging purposes.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\n    struct student {\n    char name[20];\n    char course[20];\n    int age;\n    float gpa;\n};\n\nusing namespace std;\nint main()\n{\n    ifstream infile;\n    infile.open(\"student data.txt\");\n    ofstream outfile;\n    outfile.open(\"student data 2.txt\");\n    if (!infile || !outfile)\n    {\n        cout &lt;&lt; \"error opening or creating file\" &lt;&lt; endl;\n        exit(1);\n    }\n\n    student stu[3];                 //NOTE THIS LINE NOW HAS 3 STRUCTS INITIALIZED\n    infile.seekg(0, ios::beg);\n    while (!infile.eof())\n    {\n        int i;\n        for (i = 0; i &lt;= 2; i++)\n        {\n            infile &gt;&gt; stu[i].name;\n            infile &gt;&gt; stu[i].course;\n            infile &gt;&gt; stu[i].age;\n            infile &gt;&gt; stu[i].gpa;\n            printf(\"%s %s %d %f\\n\", stu[i].name, stu[i].course, stu[i].age, stu[i].gpa);\n        }\n    }\n\n    outfile.seekp(0, ios::beg);\n    int i = 0;\n    while (i&lt;3)\n    {\n        outfile &lt;&lt; stu[i].name &lt;&lt; endl;\n        outfile &lt;&lt; stu[i].course &lt;&lt; endl;\n        outfile &lt;&lt; stu[i].age &lt;&lt; endl;\n        outfile &lt;&lt; stu[i].gpa &lt;&lt; endl;\n        printf(\"%s %s %d %f\\n\", stu[i].name, stu[i].course, stu[i].age, stu[i].gpa);\n        i++;\n    }\n\n    infile.close();\n    outfile.close();\n    return 1;\n}\n</code></pre>\n\n<p>Hope this helps! </p>\n"}], "owner": {"reputation": 9, "user_id": 9860750, "user_type": "registered", "profile_image": "https://graph.facebook.com/1706362776107717/picture?type=large", "display_name": "Mr.bunty", "link": "https://stackoverflow.com/users/9860750/mr-bunty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 5610, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1528934401, "creation_date": 1528928420, "question_id": 50847099, "link": "https://stackoverflow.com/questions/50847099/writing-structure-to-a-text-file-in-c", "title": "writing structure to a text file in c++", "body": "<pre><code>struct student{\n        char name[20];\n        char course[20];\n        int age;\n        float gpa;\n    };\n\nusing namespace std;\nmain()\n{\n    ifstream infile;\n    infile.open(\"student data.txt\");\n    ofstream outfile;\n    outfile.open(\"student data 2.txt\");\n    if(!infile || !outfile)\n    {\n        cout &lt;&lt; \"error opening or creating file\" &lt;&lt; endl;\n        exit(1);\n    }\n\n    student stu[2];\n    infile.seekg(0, ios::beg);\n    while(!infile.eof())\n    {\n    int i;\n    for(i=0; i&lt;=2; i++)\n        {\n            infile &gt;&gt; stu[i].name;\n            infile &gt;&gt; stu[i].course;\n            infile &gt;&gt; stu[i].age;\n            infile &gt;&gt; stu[i].gpa;\n        }\n    }\n    outfile.seekp(0, ios::beg);\n    int i =0;\n    while(i&lt;3)\n    {\n        outfile &lt;&lt; stu[i].name &lt;&lt; endl;\n\n        outfile &lt;&lt; stu[i].course &lt;&lt; endl;\n\n        outfile &lt;&lt; stu[i].age &lt;&lt; endl;\n\n        outfile &lt;&lt; stu[i].gpa &lt;&lt; endl;\n        i++;\n    }\n\n    infile.close();\n    outfile.close();\n}\n</code></pre>\n\n<p>I am trying to figure out why this code is not working... its not giving any compilation error but when i run the application it stops working.it says rough.exe (app name) is not working. can anyone help :(</p>\n"}, {"tags": ["c++", "stl", "iterator"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1528928277, "post_id": 50847021, "comment_id": 88697608, "body": "<a href=\"https://stackoverflow.com/questions/28595084/reference-invalidation-after-applying-reverse-iterator-on-a-custom-made-iterator\" title=\"reference invalidation after applying reverse iterator on a custom made iterator\">stackoverflow.com/questions/28595084/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4246, "user_id": 1739884, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2ded6d75d54f7bcfafdd07a6301e2139?s=128&d=identicon&r=PG", "display_name": "Andreas H.", "link": "https://stackoverflow.com/users/1739884/andreas-h"}, "edited": false, "score": 0, "creation_date": 1528929234, "post_id": 50847085, "comment_id": 88697861, "body": "Ok, I see the misunderstanding. When I wrote <code>stored off-by-one</code> I meant that during construction of reverse_iterator the underlying iterator needs to be decremented.I understand that we need the decrement at some point to implement a reverse iterator, but I think it could be done once during construction. Then the problem you mention is avoided. Apparently this is not how it is done. So why is it not possible to use the during-construction-decremented iterator approach? Sorry if the question was unclear in that regard."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 4246, "user_id": 1739884, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2ded6d75d54f7bcfafdd07a6301e2139?s=128&d=identicon&r=PG", "display_name": "Andreas H.", "link": "https://stackoverflow.com/users/1739884/andreas-h"}, "edited": false, "score": 0, "creation_date": 1528929411, "post_id": 50847085, "comment_id": 88697909, "body": "@AndreasH. Because the iterator you get may not be decrementable. Consider <code>rend()</code>, which is constructed from <code>begin()</code>."}, {"owner": {"reputation": 4246, "user_id": 1739884, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2ded6d75d54f7bcfafdd07a6301e2139?s=128&d=identicon&r=PG", "display_name": "Andreas H.", "link": "https://stackoverflow.com/users/1739884/andreas-h"}, "edited": false, "score": 0, "creation_date": 1528929675, "post_id": 50847085, "comment_id": 88697983, "body": ":So you say that ` begin()` gives a non-decrementable iterator?"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 4246, "user_id": 1739884, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2ded6d75d54f7bcfafdd07a6301e2139?s=128&d=identicon&r=PG", "display_name": "Andreas H.", "link": "https://stackoverflow.com/users/1739884/andreas-h"}, "edited": false, "score": 0, "creation_date": 1530520226, "post_id": 50847085, "comment_id": 89248459, "body": "@AndreasH. By definition, <code>begin()</code> gives an iterator to the beginning of the container, there is nothing &quot;before&quot; that position."}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": false, "score": 4, "last_activity_date": 1528928339, "creation_date": 1528928339, "answer_id": 50847085, "question_id": 50847021, "link": "https://stackoverflow.com/questions/50847021/reason-for-restrictions-of-reverse-iterator/50847085#50847085", "title": "Reason for restrictions of `reverse_iterator`", "body": "<blockquote>\n  <p>and stores the underlying iterator off by one</p>\n</blockquote>\n\n<p>That's the reason. You have to conjure a not-off-by-one iterator on dereference, and if destruction of the conjured iterator invalidates the reference obtained from it (as in the case of stashing iterators), then nasal demons.</p>\n"}], "owner": {"reputation": 4246, "user_id": 1739884, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2ded6d75d54f7bcfafdd07a6301e2139?s=128&d=identicon&r=PG", "display_name": "Andreas H.", "link": "https://stackoverflow.com/users/1739884/andreas-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1530520128, "creation_date": 1528927941, "last_edit_date": 1530520128, "question_id": 50847021, "link": "https://stackoverflow.com/questions/50847021/reason-for-restrictions-of-reverse-iterator", "title": "Reason for restrictions of `reverse_iterator`", "body": "<p>On <a href=\"http://en.cppreference.com/w/cpp/iterator/reverse_iterator\" rel=\"nofollow noreferrer\">the cppreference page of reverse_iterator</a> I find the following remark </p>\n\n<blockquote>\n  <p><code>std::reverse_iterator</code> does not work with iterators that return a reference to\n  a member object (so-called \"stashing iterators\"). An example of stashing\n  iterator is <code>std::filesystem::path::iterator</code>. </p>\n</blockquote>\n\n<p>Is that claim correct? And, if yes, why is that? </p>\n\n<p>To me the restriction makes no sense, as I would assume that the reverse iterator basically swaps the <code>operator ++</code> and <code>operator --</code> (and stores the underlying iterator off by one).</p>\n\n<p>EDIT: Apparently the question can be mis-understood:\nI understand that we need the decrement operation once to implement a reverse iterator. The question is why this is not implemented during construction of the <code>reverse_iterator</code>. Then the problem with the stashing iterator is avoided. But apparently this is not how it is done, and the decrement is done every time the iterator is dereferenced. Why?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 6, "creation_date": 1528927355, "post_id": 50846903, "comment_id": 88697351, "body": "Remove the <code>;</code> after your <code>if</code> statements, otherwise they do nothing and the next line executes regardless. Also <code>win&#47;total</code> does integer division and will truncate, you want to do floating point division (<code>float</code> or <code>double</code>)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 2, "creation_date": 1528927383, "post_id": 50846903, "comment_id": 88697358, "body": "When you are learning C++, don&#39;t choose a problem that depends on interactive user input, particularly not one that depends on reading single keystrokes. Also, avoid menus."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1528927466, "post_id": 50846903, "comment_id": 88697385, "body": "Note that the <code>&lt;conio.h&gt;</code> header and the <code>getch</code> function are not part of C++. It&#39;s platform-specific header file and function, and incorrectly used will not work well together with <code>std::cin</code> and friends."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1528927525, "post_id": 50846903, "comment_id": 88697401, "body": "Also note that <code>cin &gt;&gt; match</code>, where <code>match</code> is an <code>int</code>, will read an <i>integer</i> and not a character. I suggest you take a couple of steps back, <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list/388282#388282\">get a couple of good books about C++</a>, and start over."}, {"owner": {"reputation": 2234, "user_id": 3052438, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/X9OWu.png?s=128&g=1", "display_name": "NO_NAME", "link": "https://stackoverflow.com/users/3052438/no-name"}, "edited": false, "score": 0, "creation_date": 1528927563, "post_id": 50846903, "comment_id": 88697416, "body": "You should start learning how to use debugger. It will be your best friend soon."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 2234, "user_id": 3052438, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/X9OWu.png?s=128&g=1", "display_name": "NO_NAME", "link": "https://stackoverflow.com/users/3052438/no-name"}, "edited": false, "score": 0, "creation_date": 1528927784, "post_id": 50846903, "comment_id": 88697482, "body": "@NO_NAME &quot;It will be your best fiend soon&quot;  - immediately, (given &quot;fiend&quot;)  I would say. People that jump into the debugger are the ones that have the most problems debugging, in my experience."}, {"owner": {"reputation": 11, "user_id": 8935343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d669712bc7df5881b26ab72a7760c5c7?s=128&d=identicon&r=PG&f=1", "display_name": "Kamzia", "link": "https://stackoverflow.com/users/8935343/kamzia"}, "edited": false, "score": 0, "creation_date": 1528927795, "post_id": 50846903, "comment_id": 88697487, "body": "After changing ints to doubles and deleting &quot; ; &quot; now the score is 0, is there any other problem?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1528927845, "post_id": 50846903, "comment_id": 88697500, "body": "My two bits: Write very little code at a time. Write a few lines, compile, test those few lines. That way if you have a mistake, you learn from it fast and probably don&#39;t repeat it all through the code. Less time wasted rewriting. Plus the more you write the more bugs will build up. Bugs are notorious for helping hide one another. It&#39;s not unheard of to find fixing multiple simultaneous bugs takes much longer than fixing the same number of bugs one at a time."}, {"owner": {"reputation": 2234, "user_id": 3052438, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/X9OWu.png?s=128&g=1", "display_name": "NO_NAME", "link": "https://stackoverflow.com/users/3052438/no-name"}, "edited": false, "score": 1, "creation_date": 1528928219, "post_id": 50846903, "comment_id": 88697599, "body": "@Kamzia Since you&#39;re asking, you could add indentations to the code."}], "answers": [{"tags": [], "owner": {"reputation": 552, "user_id": 9900911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/693018196257bd546178b53a34149b45?s=128&d=identicon&r=PG&f=1", "display_name": "armitus", "link": "https://stackoverflow.com/users/9900911/armitus"}, "is_accepted": false, "score": 0, "last_activity_date": 1528937782, "last_edit_date": 1528937782, "creation_date": 1528936871, "answer_id": 50848121, "question_id": 50846903, "link": "https://stackoverflow.com/questions/50846903/pressing-certain-key/50848121#50848121", "title": "Pressing certain key", "body": "<p>Okay, so it looks like we've got a couple of errors in your program as it is now. Let's take a look!</p>\n\n<p>First thing's first. Notice that you have Semicolons at the end of your if statements.</p>\n\n<pre><code>void lost()\n{\n     if (match=='L');    //NOTE: This is a useless if statement\n          lose=lose+1;   //As is, this line will ALWAYS RUN regardless of what character is pressed.\n}\n\nvoid won()\n{\n     if (match=='W');  //Same as Above ^^^^^\n          win=win+1;\n}\n</code></pre>\n\n<p>Remember that in C, the if statement will execute the next statement conditionally. Remember also that a ; in C is a statement. So, by adding a semicolon after an if statement, you're nullifying the if conditional because the if statement will run the semicolon conditionally, and not your <code>lose = lose + 1;</code>.</p>\n\n<p>Consider writing this instead:</p>\n\n<pre><code>void lost()\n{\n    if (match == 'L')\n    {\n        lose = lose + 1;\n    }\n}\n\nvoid won()\n{\n    if (match == 'W')\n    {\n        win = win + 1;\n    }\n}\n</code></pre>\n\n<p>Furthermore, I noticed that you've inserted a break command to avoid an infinite while(1) loop. To avoid this problem. Consider using match = _getch() instead of cin &lt;&lt; match.</p>\n\n<pre><code>match = _getch();\n</code></pre>\n\n<p>In addition, your Ratioo variable is not receiving anything but 0 due to truncation. To get the percentage you're looking for, you must cast your win/total to double as follows:</p>\n\n<pre><code>ratioo = ((double)win / (double)total) * 100;\n</code></pre>\n\n<p>So, Now we get to detecting the ESC And ENTER Keys! This is exciting. So, in order to read in these invisible characters, you have to understand that to the computer, these keys are just numbers. The ESC Key is number 27, and the ENTER Key is number 13 (Look Up the ASCII Table for a full list). So To detect them you need to do the following:</p>\n\n<pre><code>match = _getch();\n\nif (match == 27)        //27 is the ASCII Code for the Escape Key\n{\n    break;\n}\n</code></pre>\n\n<p>OR Just Substitute 13 if you're looking for the Enter key. By adding A while(1) Loop around it, you can pause a program until that key is pressed (AND ignore all other input).</p>\n\n<p>My Final Version of your Code can be viewed below:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;conio.h&gt; \nusing namespace std;\n\nint match = 0;\nint win = 0;\nint lose = 0;\nint ratioo = 1;\nint total = 0;\n\n\nvoid lost()\n{\n    if (match == 'L')\n    {\n        lose = lose + 1;\n    }\n}\n\nvoid won()\n{\n    if (match == 'W')\n    {\n        win = win + 1;\n    }\n}\n\nint main() {\n\n    cout &lt;&lt; \"Welcome to winratio calculator!\" &lt;&lt; endl;\n    cout &lt;&lt; \"Pressing W adds one win point\" &lt;&lt; endl;\n    cout &lt;&lt; \"Pressing L adds one lose point\" &lt;&lt; endl;\n    cout &lt;&lt; \"Press ENTER to start\" &lt;&lt; endl;\n    cout &lt;&lt; \"Press ESC to close\" &lt;&lt; endl;\n    while (1)\n    {\n        match = _getch();\n        if (match == 13)        //13 is the ASCII Code for the Enter Key\n        {\n            break;\n        }\n    }\n\n    while (1)\n    {\n        cout &lt;&lt; \"Last game score: \";\n        match = _getch();\n\n        if (match == 27)        //27 is the ASCII Code for the Escape Key\n        {\n            break;\n        }\n\n        total++;\n        won();\n        lost();\n\n\n        ratioo = ((double)win / (double)total) * 100;\n        cout &lt;&lt; \"Games won: \" &lt;&lt; win &lt;&lt; endl;\n        cout &lt;&lt; \"Games lost: \" &lt;&lt; lose &lt;&lt; endl;\n        cout &lt;&lt; \"Ratio: \" &lt;&lt; ratioo &lt;&lt; \"%\" &lt;&lt; endl;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Enjoy! And I wish you well towards learning C!</p>\n"}], "owner": {"reputation": 11, "user_id": 8935343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d669712bc7df5881b26ab72a7760c5c7?s=128&d=identicon&r=PG&f=1", "display_name": "Kamzia", "link": "https://stackoverflow.com/users/8935343/kamzia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528937782, "creation_date": 1528927244, "question_id": 50846903, "link": "https://stackoverflow.com/questions/50846903/pressing-certain-key", "title": "Pressing certain key", "body": "<p>I'm trying to learn C++, my first idea was to make simple win/lost ratio calculator, but it's not working well.\nThis is my code: </p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;conio.h&gt; \nusing namespace std;\n\nint match=0;\nint win=0;\nint lose=0;\nint ratioo=1;\nint total=0;\n\n\nvoid lost()\n{\nif (match=='L');\nlose=lose+1;\n}\n\nvoid won()\n{\nif (match=='W');\nwin=win+1;\n}\n\nint main() {\n\ncout &lt;&lt; \"Welcome to winratio calculator!\" &lt;&lt; endl;\ncout &lt;&lt; \"Pressing W adds one win point\" &lt;&lt; endl;\ncout &lt;&lt; \"Pressing L adds one lose point\" &lt;&lt; endl;\ncout &lt;&lt; \"Press ENTER to start\" &lt;&lt; endl;\ncout &lt;&lt; \"Press ESC to close\" &lt;&lt; endl;\ngetch();\n\nwhile(1)\n{\ncout &lt;&lt; \"Last game score: \";\ncin &gt;&gt; match;\ntotal++;\n\nwon();\nlost();\nratioo=(win/total)*100;\ncout &lt;&lt; \"Games won: \" &lt;&lt; win &lt;&lt; endl;\ncout &lt;&lt; \"Games lost: \" &lt;&lt; lose &lt;&lt; endl;\ncout &lt;&lt; \"Ratio: \" &lt;&lt; ratioo &lt;&lt;\"%\" &lt;&lt; endl;\nbreak;\n}\nreturn 0;\n}\n</code></pre>\n\n<p>And now my problems:</p>\n\n<p>1)After pressing ANY key there is +1 to win and lose same time</p>\n\n<p>2)I got no idea how to start whole calculator with ENTER and stop it by ESC by getch();, tried few ways but always some errors on the way(it should add points all the time until ESC is pressed</p>\n\n<p>Explanations are very welcome!</p>\n"}, {"tags": ["c++", "stdvector", "class-design", "c++20", "std-span"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1528927309, "post_id": 50846848, "comment_id": 88697338, "body": "<a href=\"http://en.cppreference.com/w/cpp/utility/bitset\" rel=\"nofollow noreferrer\"><code>std::bitset</code></a>? And I don&#39;t really recommend specializing <code>std::vector</code>, since then you&#39;re basically just going to reimplement <code>std::vector&lt;bool&gt;</code>. Instead you might want to create your own class that fits your requirements betters, and which can be open-ended enough to incorporate your future plans."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1528927420, "post_id": 50846848, "comment_id": 88697367, "body": "@Someprogrammerdude: See the &quot;notes&quot; in my edit."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 1, "creation_date": 1528928140, "post_id": 50846848, "comment_id": 88697582, "body": "From what I&#39;m imagining, I would start with the <code>std::span</code> implementation - which can be found online - and borrow the bit proxy from <code>vector&lt;bool&gt;</code>."}, {"owner": {"reputation": 1038, "user_id": 9775850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdbb2fe93c368d757bc6e0cfe6eaa68a?s=128&d=identicon&r=PG&f=1", "display_name": "skeller", "link": "https://stackoverflow.com/users/9775850/skeller"}, "edited": false, "score": 0, "creation_date": 1528928937, "post_id": 50846848, "comment_id": 88697777, "body": "why not just store the raw ptr and the length in your class and then provide some functions to check for bits? since it&#39;s non-owing is see no need for a copy."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 1038, "user_id": 9775850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdbb2fe93c368d757bc6e0cfe6eaa68a?s=128&d=identicon&r=PG&f=1", "display_name": "skeller", "link": "https://stackoverflow.com/users/9775850/skeller"}, "edited": false, "score": 0, "creation_date": 1528929035, "post_id": 50846848, "comment_id": 88697803, "body": "@skeller: I&#39;m not sure I understand your comment. I don&#39;t intend to copy anything..."}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 0, "creation_date": 1528940318, "post_id": 50846848, "comment_id": 88700107, "body": "Will you modify the bits through the non-owning container?"}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 0, "creation_date": 1528960467, "post_id": 50846848, "comment_id": 88705924, "body": "@BeeOnRope: Yes, I did say &quot;setting bits&quot;..."}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 0, "creation_date": 1528998012, "post_id": 50846848, "comment_id": 88728619, "body": "Your question isn&#39;t clear to me. You say you already have a bunch of standalone functions which implement this on top of a &quot;bit container&quot; class (here is bit container just something like <code>uint64_t</code> - or is it more complex?) - so it seems like you already have your solution? Basically you just want to move these standalone functions inside a class which maintains a pointer to the array of bit containers? You also ask if <code>std::vector</code> or <code>std::span</code> should serve as a &quot;basis&quot; for your class, but what does &quot;basis&quot; mean here? Are you talking about using one ..."}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 0, "creation_date": 1528998121, "post_id": 50846848, "comment_id": 88728679, "body": "... of those classes as part of the implementation (you&#39;ve ruled out inheritance, but of course composition is still in play), or do you mean &quot;as design inspiration&quot;? Clearly <code>std::vector&lt;bool&gt;</code> is out in terms of actual implementation, since it owns its storage: whereas you are clear that you want something span/view-like. I think a clearer question would show the functions you have already, and ask about a specific decision regarding say iterator design (if you want iterators at all) or the use of proxy objects to represent one bit."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 0, "creation_date": 1528999048, "post_id": 50846848, "comment_id": 88729117, "body": "@BeeOnRope: 1. bit container - my wording was a bit misleading. It&#39;s just an integral type, like you suspect. 2. What is a &quot;base&quot;? Partly code-copying, partly design inspiration. 3. I explained roughly what my functions are about, I don&#39;t want to swallow the bait, post some code and get people to comment on my code."}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 0, "creation_date": 1529031752, "post_id": 50846848, "comment_id": 88739046, "body": "@einpoklum - it still isn&#39;t clear to me why you don&#39;t wrap your existing standalone methods that suit your needs and have been developed with your use case in mind into a class, but instead present this as a choice between <code>vector</code> or <code>span</code> - but anyways assuming you want to start from scratch rather than use your methods, I took a shot at an answer."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 1, "creation_date": 1529053257, "post_id": 50846848, "comment_id": 88746050, "body": "@BeeOnRope: Because I want to use a proxy, so the code will be structured a bit differently. But thanks."}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 0, "creation_date": 1529074573, "post_id": 50846848, "comment_id": 88758190, "body": "@einpoklum - right, I see. If you definitely want to use a proxy it would be a good thing to include in the question. In any case, <code>std::bitset</code> exposes a proxy object to allow per-bit modification, so I think it makes a great candidate."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1529327887, "post_id": 50846848, "comment_id": 88820769, "body": "I vote for an impl based on <code>std::span</code>; basically a wrapper around a range of objects. Even if it doesn&#39;t make it into the finalized standard, <code>std::span</code> has at least been vetted as a really good idea by the committee, so much so that it will likely remain in the std for C++20"}], "answers": [{"comments": [{"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1529053368, "post_id": 50868551, "comment_id": 88746105, "body": "Actually, it wouldn&#39;t be simpler for everyone to agree on uint64_t, for 2 reasons: 1. It&#39;s costly to use it on some non-x86 platforms (e.g. nVIDIA GPUs) 2. There is actual needs to instantiate this class for different container sizes due to certain practical considerations."}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "reply_to_user": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1529074861, "post_id": 50868551, "comment_id": 88758360, "body": "@einpoklum In that case, you could make it a template class over <code>C</code> (the bit container type) so the client code could choose the storage type. It complicates the implementation only slightly. One downside is that then bit sets with different underlying <code>C</code> choices are different types, so you can&#39;t directly pass <code>dyn_bitset&lt;uint8_t&gt;</code> to something that expects a <code>dyn_bitset&lt;uint32_t&gt;</code>, even though the expose the same API. If you change the accepting function to use a template argument it would work via duck typing although this also has some downsides."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1529076110, "post_id": 50868551, "comment_id": 88759036, "body": "Yes, indeed, I already mentioned in the question that I&#39;m templating over the container type. By the way, when I have some time to look into the std::bitset code and play with it, I&#39;ll decide whether to accept your answer (which I&#39;ve +1&#39;ed)."}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "reply_to_user": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1529081124, "post_id": 50868551, "comment_id": 88761512, "body": "@einpoklum - well to be clear, you said your existing solution of standalone functions was templated over the container type. In the comments on the question I tried to extract more about the existing solution and why you didn&#39;t want to use that, or what more you wanted, but you didn&#39;t take the bait, so to speak. So as I mentioned, I wrote this more or less as if you were doing a greenfield implementation so things like whether it is a template or not were up for re-evaluation."}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "reply_to_user": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1529081211, "post_id": 50868551, "comment_id": 88761547, "body": "For a general purpose class like <code>bitset</code> (including a semi-dynamic[1] bitset as you want) using a template for the storage type would be quite annoying, since each storage type results in an unrelated object, so you&#39;d want to agree on a usual type for compatibility, but your use case might be different, more narrow and favor including the storage in the type (e.g., for performance). [1] Here I&#39;m using &quot;semi-dynamic&quot; to mean a runtime length, but which is fixed at construction for every object, as you want."}], "tags": [], "owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "is_accepted": false, "score": 1, "last_activity_date": 1529032147, "last_edit_date": 1529032147, "creation_date": 1529031650, "answer_id": 50868551, "question_id": 50846848, "link": "https://stackoverflow.com/questions/50846848/is-it-a-good-idea-to-base-a-non-owning-bit-container-on-stdvectorbool-std/50868551#50868551", "title": "Is it a good idea to base a non-owning bit container on std::vector&lt;bool&gt;? std::span?", "body": "<p>Rather than <code>std::vector</code> or <code>std::span</code> I suspect an implementation of your class would share more in common with <code>std::bitset</code>, since it is pretty much the same thing, except with a (fixed) runtime-determined size.</p>\n\n<p>In fact, you could probably take a typical <code>std::bitset</code> implementation and move the <code>&lt;size_t N&gt;</code> template parameter into the class as a <code>size_t size_</code> member (or whatever name you like) and you'll have your dynamic bitset class with almost no changes. You may want to get rid anything of you consider cruft like the constructors that take <code>std::string</code> and friends.</p>\n\n<p>The last step is then to remove ownership of the underlying data: basically you'll remove the creation of the underlying array in the constructor and maintain a view of an existing array with some pointers.</p>\n\n<p>If your clients disagree on what the underlying unsigned integer type to use for storage (what you call the \"bit container\"), then you may also need to make your class a template on this type, although it would be simpler if everyone agreed on say <code>uint64_t</code>. </p>\n\n<p>As far as <code>std::vector&lt;bool&gt;</code> goes, you don't need much from that: everything that <code>vector</code> does that you want, <code>std::bitset</code> probably does too: the main thing that <code>vector</code> adds is dynamic growth - but you've said you don't want that. <code>vector&lt;bool&gt;</code> has the proxy object concept to represent a single bit, but so does <code>std::bitset</code>.</p>\n\n<p>From <code>std::span</code> you take the idea of non-ownership of the underlying data, but I don't think this actually represents a lot of underlying code. You might want to consider the <code>std::span</code> approach of having <em>either</em> a compile-time known size <em>or</em> a runtime provided size (indicated by <code>Extent == std::dynamic_extent</code>) if that would be useful for you (mostly if you sometimes use compile-time sizes and could specialize some methods to be more efficient in that case).</p>\n"}], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1529032147, "creation_date": 1528926921, "last_edit_date": 1528999077, "question_id": 50846848, "link": "https://stackoverflow.com/questions/50846848/is-it-a-good-idea-to-base-a-non-owning-bit-container-on-stdvectorbool-std", "title": "Is it a good idea to base a non-owning bit container on std::vector&lt;bool&gt;? std::span?", "body": "<p>In a couple of projects of mine I have had an increasing need to deal with contiguous sequences of bits in memory - efficiently (*). So far I've written a bunch of inline-able standalone functions, templated on the choice of a \"bit container\" type (e.g. <code>uint32_t</code>), for getting and setting bits, applying 'or' and 'and' to their values, locating the container, converting lengths in bits to sizes in bytes or lengths in containers, etc. ... it looks like it's class-writing time.</p>\n\n<p>I know the C++ standard library has a specialization of <code>std::vector&lt;bool&gt;</code>, which is considered by many to be a design flaw - as its iterators do not expose actual <code>bool</code>s, but rather proxy objects. Whether that's a good idea or a bad one for a specialization, it's definitely something I'm considering - an explicit bit proxy class, which will hopefully \"always\" be optimized away (with a nice greasing-up with <code>constexpr</code>, <code>noexcept</code> and <code>inline</code>). So, I was thinking of possibly adapting <code>std::vector</code> code from one of the standard library implementation.</p>\n\n<p>On the other hand, my intended class:</p>\n\n<ul>\n<li>Will never own the data / the bits - it'll receive a starting bit container address (assuming alignment) and a length in bits, and won't allocate or free.</li>\n<li>It will not be able resize the data dynamically or otherwise - not even while retaining the same amount of space like std::vector::resize(); its length will be fixed during its lifespan/scope.</li>\n<li>It shouldn't anything know about the heap (and work when there is no heap)</li>\n</ul>\n\n<p>In this sense, it's more like a span class for bits. So maybe start out with a span then? I don't know, spans are still not standard; and there are no proxies in spans...</p>\n\n<p>So what would be a good basis (<strong>edit:</strong> NOT a base class) for my implementation? <code>std::vector&lt;bool&gt;</code>? <code>std::span</code>? Both? None? Or - maybe I'm reinventing the wheel and this is already a solved problem?</p>\n\n<p>Notes: </p>\n\n<ul>\n<li>The bit sequence length is known at run time, not compile time; otherwise, as @SomeProgrammerDude suggests I could use <code>std::bitset</code>.</li>\n<li>My class doesn't need to \"be-a\" span or \"be-a\" vector, so I'm not thinking of specializing any of them.</li>\n</ul>\n\n<p>(*) - So far not SIMD-efficiently but that may come later. Also, this may be used in CUDA code where we don't SIMDize but pretend the lanes are proper threads.</p>\n"}, {"tags": ["c++", "compiler-construction", "bison"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1528926986, "post_id": 50846803, "comment_id": 88697229, "body": "<code>statement</code> seems like a good candidate. Add a rule like <code>error SEMICOLON</code>. It should be pretty obvious if you spend some time <a href=\"https://www.gnu.org/software/bison/manual/html_node/Error-Recovery.html\" rel=\"nofollow noreferrer\">with the error-recovery documentation</a>."}, {"owner": {"reputation": 394, "user_id": 7261925, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnEFB.png?s=128&g=1", "display_name": "Robur_131", "link": "https://stackoverflow.com/users/7261925/robur-131"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1528927451, "post_id": 50846803, "comment_id": 88697380, "body": "Thank you. It seems to work. I read the link you gave. Actually <code>statement</code> came to my mind at the very first. But I was working on something like : `` int a[2.5],....`` so I added an error production on the <code>var_declaration</code>, and then added one in the statement. Seeing the list of 19 conflicts, I lost my mind and didn&#39;t think clearly to remove the error production from the <code>var_declaration</code>. Anyway, thanks again."}, {"owner": {"reputation": 394, "user_id": 7261925, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnEFB.png?s=128&g=1", "display_name": "Robur_131", "link": "https://stackoverflow.com/users/7261925/robur-131"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1528927838, "post_id": 50846803, "comment_id": 88697498, "body": "After adding an error rule to the <code>statement</code>, the parser parses the code as follows: <code>int main(){ int a[2],c,i,j; float c; a[2.5]=1; 3.7 a=4; func; b=8; return 0; }</code>  should 3.7 be there ?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1528937351, "post_id": 50846803, "comment_id": 88699582, "body": "That is not a parse. It is a list of tokens. You might try explaining how you got that list and what you think it means."}, {"owner": {"reputation": 394, "user_id": 7261925, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnEFB.png?s=128&g=1", "display_name": "Robur_131", "link": "https://stackoverflow.com/users/7261925/robur-131"}, "edited": false, "score": 0, "creation_date": 1528963720, "post_id": 50846803, "comment_id": 88707898, "body": "For the given grammar and a given input, I have to print the &quot;code&quot; that matches a certain grammar rule. I have a <code>SymbolInfo</code> class. In my <code>.y</code> file, I have declared <code>YYSTYPE</code> as <code>SymbolInfo*</code>. When I pass the tokens from lex to bison ( <code>yylval</code> as a <code>SymbolInfo*</code> ), the parser catches it and from their value and constructs a <code>SymbolInfo*</code> for the non-terminal."}, {"owner": {"reputation": 394, "user_id": 7261925, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnEFB.png?s=128&g=1", "display_name": "Robur_131", "link": "https://stackoverflow.com/users/7261925/robur-131"}, "edited": false, "score": 0, "creation_date": 1528963726, "post_id": 50846803, "comment_id": 88707901, "body": "Something like this, for the grammar rule, <code>var_declaration : type_specifier declaration_list SEMICOLON;</code> the action would be, <code>string s = $1 -&gt; getSymbolName() + $2 -&gt; getSymbolName() + &quot;;&quot; ; SymbolInfo* s = new SymbolInfo(s,&quot;dummy_type&quot;); $$ = s;</code> and the I print <code>$$</code> on a log file. This goes on in a bottom-up fashion until the parser reaches <code>program</code> rule."}, {"owner": {"reputation": 394, "user_id": 7261925, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnEFB.png?s=128&g=1", "display_name": "Robur_131", "link": "https://stackoverflow.com/users/7261925/robur-131"}, "edited": false, "score": 0, "creation_date": 1529688012, "post_id": 50846803, "comment_id": 88980329, "body": "How about handling error recovery in case of function declaration and definition?  Case 1: <code>int a(int b) int main(){ return 0;}</code> , function <code>a</code> is missing a semicolon at the end of its declaration.  Case 2: <code>int a(int b) } int main() {return 0;}</code> , function <code>a</code> is missing a LCURL in its definition.  In both cases, I want to parse the rest of the input. How can I do so?"}, {"owner": {"reputation": 394, "user_id": 7261925, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnEFB.png?s=128&g=1", "display_name": "Robur_131", "link": "https://stackoverflow.com/users/7261925/robur-131"}, "edited": false, "score": 0, "creation_date": 1529688895, "post_id": 50846803, "comment_id": 88980672, "body": "I tried by adding <code>| error NEWLINE { yyerrok; } ; </code> to the <code>func_declaration</code> rule in the grammar. But it doesn&#39;t seem to work."}], "owner": {"reputation": 394, "user_id": 7261925, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnEFB.png?s=128&g=1", "display_name": "Robur_131", "link": "https://stackoverflow.com/users/7261925/robur-131"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 282, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1528930624, "creation_date": 1528926663, "last_edit_date": 1528930624, "question_id": 50846803, "link": "https://stackoverflow.com/questions/50846803/bison-error-recovery-suggestion", "title": "Bison error recovery suggestion", "body": "<p>I'm trying to integrate error recovery in my grammar. From the bison manual, the simplest error recovery would be skip the current line. But in my flex file, I have no action regarding the newline so the parser would not know about it. So I want the parser to ignore everything until it encounters a semicolon in case of an error.</p>\n\n<p>I have the following grammar:</p>\n\n<pre><code>start : program;\n\nprogram : program unit \n    | unit\n    ;\n\nunit : var_declaration\n     | func_declaration\n     | func_definition\n     ;\n\nfunc_declaration : type_specifier ID LPAREN parameter_list RPAREN SEMICOLON\n        | type_specifier ID LPAREN RPAREN SEMICOLON\n        ;\n\nfunc_definition : type_specifier ID LPAREN parameter_list RPAREN compound_statement\n        | type_specifier ID LPAREN RPAREN compound_statement\n        ;               \n\n\nparameter_list  : parameter_list COMMA type_specifier ID\n        | parameter_list COMMA type_specifier\n        | type_specifier ID\n        | type_specifier\n        ;\n\n\ncompound_statement : LCURL statements RCURL\n            | LCURL RCURL\n            ;\n\nvar_declaration : type_specifier declaration_list SEMICOLON\n         ;\n\ntype_specifier  : INT\n        | FLOAT\n        | VOID\n        ;\n\ndeclaration_list : declaration_list COMMA ID\n          | declaration_list COMMA ID LTHIRD CONST_INT RTHIRD\n          | ID\n          | ID LTHIRD CONST_INT RTHIRD\n          ;\n\nstatements : statement\n       | statements statement\n       ;\n\nstatement : var_declaration\n      | expression_statement\n      | compound_statement\n      | FOR LPAREN expression_statement expression_statement expression RPAREN statement\n      | IF LPAREN expression RPAREN statement\n      | IF LPAREN expression RPAREN statement ELSE statement\n      | WHILE LPAREN expression RPAREN statement\n      | PRINTLN LPAREN ID RPAREN SEMICOLON\n      | RETURN expression SEMICOLON\n      ;\n\nexpression_statement    : SEMICOLON         \n            | expression SEMICOLON \n            ;\n\nvariable : ID       \n     | ID LTHIRD expression RTHIRD \n     ;\n\n expression : logic_expression  \n       | variable ASSIGNOP logic_expression     \n       ;\n\nlogic_expression : rel_expression   \n         | rel_expression LOGICOP rel_expression    \n         ;\n\nrel_expression  : simple_expression \n        | simple_expression RELOP simple_expression \n        ;\n\nsimple_expression : term \n          | simple_expression ADDOP term \n          ;\n\nterm :  unary_expression\n     |  term MULOP unary_expression\n     ;\n\nunary_expression : ADDOP unary_expression  \n         | NOT unary_expression \n         | factor \n         ;\n\nfactor  : variable \n    | ID LPAREN argument_list RPAREN\n    | LPAREN expression RPAREN\n    | CONST_INT \n    | CONST_FLOAT\n    | variable INCOP \n    | variable DECOP\n    ;\n\nargument_list : arguments\n              |\n              ;\n\narguments : arguments COMMA logic_expression\n          | logic_expression\n          ;\n</code></pre>\n\n<p>I'm currently working on the following input:</p>\n\n<pre><code>int main(){\n    int a[2],c,i,j ; float c;\n    a[2.5]=1;\n    i=2.3\n    j=2%3.7;    \n    a=4;\n    func(a);\n    b=8;\n    return 0;\n}\n</code></pre>\n\n<p>When the parser encounters <code>i = 2.3</code>, it won't stop parsing but rather continue doing so after reporting a syntax error. </p>\n\n<p>Based on the grammar, where should I put my error production so that the parser can continue parsing without any conflict ? And possibly shed some light on other syntax errors like missing a RPAREN or Curly braces ? How should I approach to add the error production for a given grammar ? </p>\n"}, {"tags": ["c++", "cmake"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 1, "creation_date": 1528928171, "post_id": 50846532, "comment_id": 88697586, "body": "You should <b>create a target</b> (<code>raytracer</code> in your case) <b>before use it</b> in <code>target_link_libraries</code> and other commands which expects targets."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user8902801"}, "is_accepted": false, "score": 2, "last_activity_date": 1558619257, "last_edit_date": 1558619257, "creation_date": 1558617907, "answer_id": 56276299, "question_id": 50846532, "link": "https://stackoverflow.com/questions/50846532/cmake-error-cannot-specify-link-libraries-for-target/56276299#56276299", "title": "Cmake error: Cannot specify link libraries for target", "body": "<p>Basically in <code>Cmake</code> file or <code>toolchain.cmake</code> the order of commands are important!\n<code>target_link_libraries()</code> or <code>target_include_directories()</code> have to be always <code>after add_executable()</code></p>\n"}], "owner": {"reputation": 11, "user_id": 8087026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1743efd7f12cae003b1ba7752ba96bb0?s=128&d=identicon&r=PG", "display_name": "user8087026", "link": "https://stackoverflow.com/users/8087026/user8087026"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2434, "favorite_count": 0, "closed_date": 1564430091, "answer_count": 1, "score": 1, "last_activity_date": 1558619257, "creation_date": 1528925253, "last_edit_date": 1528928093, "question_id": 50846532, "link": "https://stackoverflow.com/questions/50846532/cmake-error-cannot-specify-link-libraries-for-target", "closed_reason": "Duplicate", "title": "Cmake error: Cannot specify link libraries for target", "body": "<p>I am trying to build a simple CMake project but I'm having problems understanding CMake or at least the error I get.</p>\n\n<p>The project i made is divided in a couple directories.\nThe main one has this cmake:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.7.2)\nproject(Raytracer)\nset(CMAKE_CXX_STANDARD 14)\n\nadd_subdirectory(src)\nset(COMMON_INCLUDES ${PROJECT_SOURCE_DIR}/inc)\n</code></pre>\n\n<p>From there my project splits in 2 folders src and inc.\nand in src i have the following cmake with the idea to global all subfolders:</p>\n\n<pre><code>FILE(GLOB sub-dirs RELATIVE ${CMAKE_CURRENT_SOURCE_DIR} *)\nFOREACH(dir ${sub-dirs})\n    IF(IS_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/${dir})\n        ADD_SUBDIRECTORY(${dir})\n    ENDIF()\nENDFOREACH()\n\nadd_executable(raytracer main.cpp)\n</code></pre>\n\n<p>I also add the executable there which is in this main src folder.\nFrom there on i want to be able to make sub folders adding with their own Cmake files and linking those files to my executable.\nI have the following cmake:</p>\n\n<pre><code>set(OBJECTS\n    asdf.cpp\n    )\n\nadd_library(obj_files ${OBJECTS} ${COMMON_FILES})\ntarget_link_libraries(raytracer obj_files)\n</code></pre>\n\n<p>but when I try to build I get the following error:</p>\n\n<pre><code>Cannot specify link libraries for target \"raytracer\" which is not built by this project.\n</code></pre>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 6807761, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/439c90b2727687ed4a12b94abe9ae3e8?s=128&d=identicon&r=PG&f=1", "display_name": "an4rei", "link": "https://stackoverflow.com/users/6807761/an4rei"}, "edited": false, "score": 0, "creation_date": 1528927210, "post_id": 50846588, "comment_id": 88697311, "body": "What if there will be a Mode that will have 4 characters and another one that has 6 characters , how am I supposed to get the exact position, right after &quot;Mode:&quot; ? Also , is this a good practice for a infinite loop?Thank you"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 47, "user_id": 6807761, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/439c90b2727687ed4a12b94abe9ae3e8?s=128&d=identicon&r=PG&f=1", "display_name": "an4rei", "link": "https://stackoverflow.com/users/6807761/an4rei"}, "edited": false, "score": 0, "creation_date": 1528927768, "post_id": 50846588, "comment_id": 88697474, "body": "@an4rei There is nothing wrong with using it in an infinite loop. <i>&quot;how am I supposed to get the exact position&quot;</i> I would pad all mode names with spaces so that they all have the same length."}], "tags": [], "owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "is_accepted": false, "score": 1, "last_activity_date": 1528925571, "creation_date": 1528925571, "answer_id": 50846588, "question_id": 50846438, "link": "https://stackoverflow.com/questions/50846438/live-update-the-string-content-in-console/50846588#50846588", "title": "Live Update the string content in console", "body": "<p>Use <code>\\b</code> to move caret to the previous symbol on the current line, then print new mode on top of the previous one.</p>\n\n<p>Here's an example:</p>\n\n<pre><code>std::cout &lt;&lt; \"Mode: foo\";\n// Terminal shows\n// Mode: foo\n//          ^\n\nstd::cout &lt;&lt; \"\\b\\b\\b\";\n// Terminal shows\n// Mode: foo\n//       ^\n\nstd::cout &lt;&lt; \"bar\";\n// Terminal shows\n// Mode: bar\n//          ^\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 6807761, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/439c90b2727687ed4a12b94abe9ae3e8?s=128&d=identicon&r=PG&f=1", "display_name": "an4rei", "link": "https://stackoverflow.com/users/6807761/an4rei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1528925571, "creation_date": 1528924810, "last_edit_date": 1528925089, "question_id": 50846438, "link": "https://stackoverflow.com/questions/50846438/live-update-the-string-content-in-console", "title": "Live Update the string content in console", "body": "<p>I just got into c++ and I'm having some problems doing the next thing:</p>\n\n<p>I have the next \"setup\":</p>\n\n<pre><code>string curent = \"None\";\n\nint main()\n{\n    cout &lt;&lt; \"Welcome , etc\";\n    cout &lt;&lt; \"Current Mode: \" &lt;&lt; curent;\n    while (true) {\n       if (GetKeyState(VK_NUMPAD0)) \n       {\n           string curent = \"Mode 1\";\n       }\n       // more modes\n    }\n}\n</code></pre>\n\n<p>How can I Have the </p>\n\n<blockquote>\n  <p>Current Mode: None</p>\n</blockquote>\n\n<p>cout automatically update based on the IF inside the main?( should become Mode 1 if NUMPAD 0 is pressed).</p>\n\n<p>I would want to use something else than clearing all the console and re-writing everything , I only want the last line to update.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++", "timer", "opencl"], "answers": [{"tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": true, "score": 0, "last_activity_date": 1528925185, "creation_date": 1528925185, "answer_id": 50846513, "question_id": 50846195, "link": "https://stackoverflow.com/questions/50846195/opencl-event-based-timer-c-wrapper/50846513#50846513", "title": "OpenCL event-based timer (c++ wrapper)", "body": "<p>Command Queues need to be created with the express request to include profiling information, or their profiling commands won't work correctly.</p>\n\n<p>I don't recognize the API you're using to create OpenCL objects, but this is what that would look like in the native OpenCL API:</p>\n\n<pre><code>//OpenCL versions 1.1-\ncl_command_queue queue = clCreateCommandQueue(context, device, CL_QUEUE_PROFILING_ENABLE, &amp;err);\n//OpenCL versions 1.2+\ncl_command_queue_properties properties[] {CL_QUEUE_PROPERTIES, CL_QUEUE_PROFILING_ENABLE, 0};\ncl_command_queue queue = clCreateCommandQueueWithProperties(context, device, properties, &amp;err);\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8583219, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-kB36WNZs3a4/AAAAAAAAAAI/AAAAAAAAAGA/CjRBbfgcOrk/photo.jpg?sz=128", "display_name": "ikisugi1451", "link": "https://stackoverflow.com/users/8583219/ikisugi1451"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 0, "accepted_answer_id": 50846513, "answer_count": 1, "score": 0, "last_activity_date": 1528925185, "creation_date": 1528923609, "question_id": 50846195, "link": "https://stackoverflow.com/questions/50846195/opencl-event-based-timer-c-wrapper", "title": "OpenCL event-based timer (c++ wrapper)", "body": "<p>I am new to OpenCL and met some problems measuring kernel runtime.\nI use a c++ wrapper to deal with event and profiling.</p>\n\n<pre><code>context = Context(device);\nqueue = CommandQueue(context, device);\n\n/** do something */\n\ncl_ulong time_end, time_start, time_total;\nEvent event;\n\n// Launch the kernel\nqueue.enqueueNDRangeKernel(kernel, NULL, global_work_size, local_work_size, NULL, &amp;event);\nqueue.finish();\n\n// Get event info and print GPU runtime\nevent.wait();\nevent.getProfilingInfo(CL_PROFILING_COMMAND_START, &amp;time_start);\nevent.getProfilingInfo(CL_PROFILING_COMMAND_END, &amp;time_end);\ntime_total = time_end - time_start;\nprintf(\"%lu\\t%lu\\t\", time_total);\nprintf(\"\\nRendering time (ms): \\t%lu\\n\\n\", time_total);\n</code></pre>\n\n<p>I got result which is obviously not in the scale it should be.</p>\n\n<pre><code>6052843157020279026 140734592538400\n\nRendering time (ms):    12394041651281810990\n</code></pre>\n\n<p>Then I use normal timer provided by sys/time.h and got 0.02s.</p>\n\n<p>Did I miss something critical in my code? Something like not having synchronized or invalid initialization? Thanks!</p>\n"}, {"tags": ["c++", "protocol-buffers", "bazel"], "comments": [{"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 4, "creation_date": 1528924066, "post_id": 50846010, "comment_id": 88696091, "body": "Yes, to use protobuf you will need the <a href=\"https://github.com/bazelbuild/bazel/blob/master/src/main/java/com/google/devtools/build/lib/buildeventstream/proto/build_event_stream.proto\" rel=\"nofollow noreferrer\">.proto file</a> describing the messages (linked from the documentation you linked to in the question)."}, {"owner": {"reputation": 137, "user_id": 6728026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aa88b8a7f5098c2d46a078cd6c011aa?s=128&d=identicon&r=PG&f=1", "display_name": "Jurza", "link": "https://stackoverflow.com/users/6728026/jurza"}, "reply_to_user": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 0, "creation_date": 1528972214, "post_id": 50846010, "comment_id": 88713271, "body": "So I will need to compile that .proto file that you have linked with protoc. For that I would need the entire bazel repo. Are there anywhere precompiled files which could be used for decoding the binary file?"}], "owner": {"reputation": 137, "user_id": 6728026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aa88b8a7f5098c2d46a078cd6c011aa?s=128&d=identicon&r=PG&f=1", "display_name": "Jurza", "link": "https://stackoverflow.com/users/6728026/jurza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 315, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1528925622, "creation_date": 1528922739, "last_edit_date": 1528925622, "question_id": 50846010, "link": "https://stackoverflow.com/questions/50846010/how-to-read-bazels-binary-build-event-protocol-file", "title": "How to read Bazels binary build event protocol file?", "body": "<p>I want to implement fetching of compiler warnings with Bazel (Bazel based build). I know that there are files which can already be used for this. These files are located at: </p>\n\n<blockquote>\n  <p>$PROJECT_ROOT/bazel-out/_tmp/action_outs/</p>\n</blockquote>\n\n<p>and are named stderr-XY.</p>\n\n<p>Bazel has the ability to save all build events in a designated file. Note that currently (Bazel 0.14) there are 3 supported formats for that designated file, and those are: text file, JSON file and binary file. This question is related <strong><a href=\"https://docs.bazel.build/versions/master/build-event-protocol.html#consume-in-a-binary-format\" rel=\"nofollow noreferrer\">only to binary file</a></strong>.</p>\n\n<p>If I have understood <a href=\"https://developers.google.com/protocol-buffers/docs/overview\" rel=\"nofollow noreferrer\">Google's protocol buffers</a> correctly, the workflow for them to be implemented and to work is:</p>\n\n<ol>\n<li>You specify how you want the information you're serializing to be structured by defining protocol buffer message types in .proto files.</li>\n<li>Once you've defined your messages, you run the protocol buffer compiler (protoc) for your application's language on your .proto file to generate data access classes.</li>\n<li>Include generated files in your project and use generated class in your code. By use it is meant to populate, serialize and retrieve protocol buffer messages (i.e. for C++ which is the programming language that I use it is possible to use <strong>SerializeToOstream</strong> and <strong>ParseFromIstream</strong> methods for such tasks)</li>\n</ol>\n\n<p>To conclude this question:</p>\n\n<blockquote>\n  <p>As it is stated <a href=\"https://docs.bazel.build/versions/master/build-event-protocol.html#consume-in-a-binary-format\" rel=\"nofollow noreferrer\">here</a>:\n  \"Have Bazel serialize the protocol buffer messages to a file by specifying the option --build_event_binary_file=/path/to/file. The file will contain serialized protocol buffer messages with each message being length delimited.\"</p>\n</blockquote>\n\n<p>I do not see the way to avoid the fact that the developer who wants to use Bazel's functionality to write build events in a binary file, needs to know the \"format\" or even more concise to say Class architecture to read that binary file. Am I missing something here? Can all of this be done and how?</p>\n\n<p>Also, I have tried to use <code>protoc --decode_raw &lt; bazelbepbinary.bin</code> and it says:</p>\n\n<blockquote>\n  <p>Failed to parse input.</p>\n</blockquote>\n\n<p>All of this was done on Ubuntu 16.04 and at the moment I'm not sure what is the GCC version but I will add GCC version to the question when I have to access to that information.</p>\n\n<p>My side question is: is it possible to capture only those build events which reflect build warnings (without using some kind of filter e.g <code>grep</code> on generated file?) I have read the documentation and used:</p>\n\n<p><code>bazel help build --long | grep \"relevant_build_event_protocol_keywords\"</code></p>\n\n<p>and was unable to find anything like that in the API.</p>\n"}, {"tags": ["c++", "constructor"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1528922911, "post_id": 50845900, "comment_id": 88695601, "body": "@DimChtz But it doesn&#39;t have to: <a href=\"https://wandbox.org/permlink/CItojqIazC0gqiKS\" rel=\"nofollow noreferrer\">wandbox.org/permlink/CItojqIazC0gqiKS</a> The members are left in an uninitialized state"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9550703, "user_type": "registered", "profile_image": "https://graph.facebook.com/1817964571582228/picture?type=large", "display_name": "Park", "link": "https://stackoverflow.com/users/9550703/park"}, "edited": false, "score": 0, "creation_date": 1528922858, "post_id": 50846000, "comment_id": 88695573, "body": "Thank you for the answer. What I want to do is to call another constructor that initialize each value. is it wrong?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1528923007, "post_id": 50846000, "comment_id": 88695650, "body": "Not sure why this was down voted when it is right.  Have an up vote"}, {"owner": {"reputation": 292, "user_id": 9927133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a053d1326f4980e131009a6493f79200?s=128&d=identicon&r=PG&f=1", "display_name": "mkamerath", "link": "https://stackoverflow.com/users/9927133/mkamerath"}, "edited": false, "score": 0, "creation_date": 1528923035, "post_id": 50846000, "comment_id": 88695662, "body": "You can call another constructor from one in c++11, however, it wouldn&#39;t be a good idea for this use case. It would be easier to simply reassign the values as I&#39;ve stated"}], "tags": [], "owner": {"reputation": 292, "user_id": 9927133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a053d1326f4980e131009a6493f79200?s=128&d=identicon&r=PG&f=1", "display_name": "mkamerath", "link": "https://stackoverflow.com/users/9927133/mkamerath"}, "is_accepted": false, "score": 2, "last_activity_date": 1528922687, "creation_date": 1528922687, "answer_id": 50846000, "question_id": 50845900, "link": "https://stackoverflow.com/questions/50845900/initialize-data-member-depends-on-condition-inside-constructor/50846000#50846000", "title": "Initialize data member depends on condition inside constructor", "body": "<p>You aren't actually reassigning the values of numerator and denominator.</p>\n\n<p>In your else statement, you just call Fraction(). This just calls the constructor for the Fraction class and doesn't do anything with it. So at the very end of code, numerator and denominator still haven't been assigned to 0.</p>\n\n<p>What you should do in the else statement is :</p>\n\n<pre><code>else {\n    numerator = 0;\n    denominator = 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33577, "user_id": 9593596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JdCIQ.jpg?s=128&g=1", "display_name": "lubgr", "link": "https://stackoverflow.com/users/9593596/lubgr"}, "is_accepted": false, "score": 1, "last_activity_date": 1528923371, "last_edit_date": 1528923371, "creation_date": 1528922961, "answer_id": 50846047, "question_id": 50845900, "link": "https://stackoverflow.com/questions/50845900/initialize-data-member-depends-on-condition-inside-constructor/50846047#50846047", "title": "Initialize data member depends on condition inside constructor", "body": "<p>You can default-initialize the data members in the class declaration and rely upon a compiler-generated default constructor,</p>\n\n<pre><code>class Fraction {\n  public:\n    Fraction() = default;\n    Fraction(int a, int b);\n\n  private:\n    int numerator = 0;\n    int denominator = 0;\n};\n</code></pre>\n\n<p>This way, you don't have to call the default constructor at all from the user defined one:</p>\n\n<pre><code>Fraction::Fraction(int a, int b) {\n    if (a &gt; 0 &amp;&amp; b &gt; 0) {\n        numerator = a;\n        denominator = b;\n    }\n}\n</code></pre>\n\n<p>There are other options, but the in-class initializers with meaningful default values is the one suggested by the <a href=\"https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md#c45-dont-define-a-default-constructor-that-only-initializes-data-members-use-in-class-member-initializers-instead\" rel=\"nofollow noreferrer\">CoreGuidelines</a>.</p>\n"}], "owner": {"reputation": 11, "user_id": 9550703, "user_type": "registered", "profile_image": "https://graph.facebook.com/1817964571582228/picture?type=large", "display_name": "Park", "link": "https://stackoverflow.com/users/9550703/park"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "closed_date": 1528923255, "answer_count": 2, "score": -2, "last_activity_date": 1528923371, "creation_date": 1528922249, "last_edit_date": 1528922750, "question_id": 50845900, "link": "https://stackoverflow.com/questions/50845900/initialize-data-member-depends-on-condition-inside-constructor", "closed_reason": "Duplicate", "title": "Initialize data member depends on condition inside constructor", "body": "<pre><code>#include&lt;iostream&gt;\n\nusing namespace std;\n\nclass Fraction {\n\n    int numerator;\n    int denominator;\n\npublic:\n\n    Fraction(int a, int b) {\n\n       if (a &gt; 0 &amp;&amp; b &gt; 0) {\n            numerator = a;\n            denominator = b;\n       }\n       else {\n           Fraction();\n       }\n   }\n\n   Fraction() {\n       numerator = 0;\n       denominator = 0;\n   }\n\n   void display() const {\n       if (numerator == 0 &amp;&amp; denominator == 0) {\n           cout &lt;&lt; \"data member is 0\" &lt;&lt; endl;\n       }\n       else {\n           cout &lt;&lt; \"data member is not 0\" &lt;&lt; endl;\n       }\n   }\n};\n\nint main(void) {\n\n   Fraction c(-5,15);\n   c.display();\n\n   return 0;\n}\n</code></pre>\n\n<p>What I expect is to print out \"data member is 0 \" because I passed -5 when create object, which does not match the condition inside Fraction(int a, int b).\nHowever, it print out \"data member is not 0\". So I tried to print out each data member and it printed out the address of data member like -8776877. \nplease help me out </p>\n"}, {"tags": ["c++", "qt", "qt5", "qstyle"], "answers": [{"comments": [{"owner": {"reputation": 947, "user_id": 8139481, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/qq5cI.jpg?s=128&g=1", "display_name": "Griffort", "link": "https://stackoverflow.com/users/8139481/griffort"}, "edited": false, "score": 0, "creation_date": 1528922975, "post_id": 50845913, "comment_id": 88695638, "body": "Ah, so could I just do this: <code>QApplication::setPalette(QPalette())</code>?"}, {"owner": {"reputation": 8788, "user_id": 6866309, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CFXxE.jpg?s=128&g=1", "display_name": "Pavan Chandaka", "link": "https://stackoverflow.com/users/6866309/pavan-chandaka"}, "reply_to_user": {"reputation": 947, "user_id": 8139481, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/qq5cI.jpg?s=128&g=1", "display_name": "Griffort", "link": "https://stackoverflow.com/users/8139481/griffort"}, "edited": false, "score": 0, "creation_date": 1528923068, "post_id": 50845913, "comment_id": 88695678, "body": "Yes. You can....... I mean you should create as required QPalette object and pass it."}], "tags": [], "owner": {"reputation": 8788, "user_id": 6866309, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CFXxE.jpg?s=128&g=1", "display_name": "Pavan Chandaka", "link": "https://stackoverflow.com/users/6866309/pavan-chandaka"}, "is_accepted": true, "score": 1, "last_activity_date": 1528922301, "creation_date": 1528922301, "answer_id": 50845913, "question_id": 50845738, "link": "https://stackoverflow.com/questions/50845738/how-to-re-polish-qapplication-with-same-style/50845913#50845913", "title": "How to &quot;Re-Polish&quot; QApplication with Same Style?", "body": "<p>Instead you can call below static function and apply the desired palette.</p>\n\n<pre><code>void QApplication::setPalette(const QPalette &amp;palette, const char *className = nullptr);\n</code></pre>\n\n<p>Create the new palette object after selecting the new color scheme and just pass it to above function. You can specify classname, if you want the change to apply for a specific widget.</p>\n"}], "owner": {"reputation": 947, "user_id": 8139481, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/qq5cI.jpg?s=128&g=1", "display_name": "Griffort", "link": "https://stackoverflow.com/users/8139481/griffort"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 1, "accepted_answer_id": 50845913, "answer_count": 1, "score": 2, "last_activity_date": 1528922301, "creation_date": 1528921594, "question_id": 50845738, "link": "https://stackoverflow.com/questions/50845738/how-to-re-polish-qapplication-with-same-style", "title": "How to &quot;Re-Polish&quot; QApplication with Same Style?", "body": "<p>Upon my qt5 application's initialization, the QApplication instance is provided with a custom style class that inherits from QProxyStyle. </p>\n\n<p>This class overwrites the <code>void polish(QPalette &amp;palette)</code> function in order to change the general color scheme for the application. </p>\n\n<p>For example:</p>\n\n<pre><code>#include \"mycolormanager.h\"\n\nvoid MyStyle::polish(QPalette &amp;palette) {\n    palette.setBrush(QPalette::Window, MyColorManager::getWindowColor());\n    palette.setColor(QPalette::WindowText, MyColorManager::getTextColor());\n    palette.setColor(QPalette::Disabled, QPalette::WindowText, MyColorManager::getDisabledTextColor());\n    palette.setColor(QPalette::Base, MyColorManager::getBaseColor());\n    // etc...\n}\n</code></pre>\n\n<p>However, I wish to allow users to customize the color scheme of the application. Once the user has selected new colors, I need someway to \"reapply\" the style, so the function can run again and obtain the new colors from the hypothetical \"color manager\" class.</p>\n\n<p>How would this be done?</p>\n"}, {"tags": ["c#", "c++", "dllimport", "dllexport", "unmanaged-memory"], "comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1528922567, "post_id": 50845520, "comment_id": 88695446, "body": "Read the array with Marshal.Copy. But, how do you plan to deallocate the array? And how does the caller know the length of the array? If the length is fixed then better for caller to allocate."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 9905613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f8e97dc5518ab918a3e7b80f6a585b4?s=128&d=identicon&r=PG&f=1", "display_name": "user527248", "link": "https://stackoverflow.com/users/9905613/user527248"}, "edited": false, "score": 0, "creation_date": 1528921293, "post_id": 50845599, "comment_id": 88694789, "body": "does the getData() remain the same ? how about receiving them at the c# end ?"}, {"owner": {"reputation": 81, "user_id": 9881724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/900281a48e708a77ee1734b2a1cf98af?s=128&d=identicon&r=PG&f=1", "display_name": "wech", "link": "https://stackoverflow.com/users/9881724/wech"}, "edited": false, "score": 0, "creation_date": 1528921367, "post_id": 50845599, "comment_id": 88694837, "body": "LuisGP solution works, but it produces a memory leak because getDat() returns an array of doubles allocated trough new, and .Net does not know how to free it.  Either change the method to use a double buffer supplied by the caller or stay with IntPtr return, provide an additional deleteData()-Method to free the intptr and use System.Runtime.Interop.Marshal.PtrToStructure"}, {"owner": {"reputation": 421, "user_id": 2455274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82bfd1de1145ad919f4eb33cc4e0870b?s=128&d=identicon&r=PG", "display_name": "LuisGP", "link": "https://stackoverflow.com/users/2455274/luisgp"}, "edited": false, "score": 0, "creation_date": 1528921495, "post_id": 50845599, "comment_id": 88694915, "body": "You must use the struct instead the double*, of course. In the C# side I&#39;m not an expert. As wech says, it will produce a memory leak if you don&#39;t provide a deleteData() method, of manage the liberation of memory in any other way."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1528922445, "post_id": 50845599, "comment_id": 88695393, "body": "No need to use a struct at all. Nonsense. IntPtr is fine. You use Marshal class to read the unmanaged memory. Deallocator has to be exported to. Or allocation on a shared heap."}, {"owner": {"reputation": 35, "user_id": 9905613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f8e97dc5518ab918a3e7b80f6a585b4?s=128&d=identicon&r=PG&f=1", "display_name": "user527248", "link": "https://stackoverflow.com/users/9905613/user527248"}, "edited": false, "score": 0, "creation_date": 1528922983, "post_id": 50845599, "comment_id": 88695641, "body": "This is where I am stuck at C-sharp end:         private void button1_Click(object sender, EventArgs e)         {             IntPtr ipr = eyeData();             double[] eyeTrackData = new double[10];             int j = 0;              eyeTrackData[0] = Marshal.PtrToStringAnsi(Marshal.ReadIntPtr(ipr, 11*j));  The last line gives error. Also, I am passsing array of double type, so how do I deal with this ?"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1528923069, "post_id": 50845599, "comment_id": 88695679, "body": "An array of double is not a string"}, {"owner": {"reputation": 35, "user_id": 9905613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f8e97dc5518ab918a3e7b80f6a585b4?s=128&d=identicon&r=PG&f=1", "display_name": "user527248", "link": "https://stackoverflow.com/users/9905613/user527248"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1528924005, "post_id": 50845599, "comment_id": 88696061, "body": "@DavidHeffernan but I need to receive data that is sent to be double."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1528924131, "post_id": 50845599, "comment_id": 88696114, "body": "Right. So why are you trying to convert it to text? Rather than communicate in comments to this poor answer, how about addressing the points in my comment to the question?"}, {"owner": {"reputation": 35, "user_id": 9905613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f8e97dc5518ab918a3e7b80f6a585b4?s=128&d=identicon&r=PG&f=1", "display_name": "user527248", "link": "https://stackoverflow.com/users/9905613/user527248"}, "edited": false, "score": 0, "creation_date": 1528924628, "post_id": 50845599, "comment_id": 88696315, "body": "The length of array returned from unmanaged code will always be four. I want to convert it to text, because I want to display it on the TextBox."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1528955202, "post_id": 50845599, "comment_id": 88703442, "body": "OK. Have the caller allocate it and pass the array as a parameter that the callee populates."}, {"owner": {"reputation": 35, "user_id": 9905613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f8e97dc5518ab918a3e7b80f6a585b4?s=128&d=identicon&r=PG&f=1", "display_name": "user527248", "link": "https://stackoverflow.com/users/9905613/user527248"}, "edited": false, "score": 0, "creation_date": 1528992390, "post_id": 50845599, "comment_id": 88725968, "body": "[DllImport(&quot;C:\\\\Users\\\\BME 320 - Section 1\\\\Documents\\\\Visual Studio 2015\\\\Projects\\\\EyeTrackDll\\\\x64\\\\Debug\\\\EyeTrackDll.dll&quot;, CallingConvention = CallingConvention.Cdecl)]          public static extern IntPtr eyeData();      private void button1_Click(object sender, EventArgs e)         {             IntPtr ipr = eyeData();             try             {                                   double[] eyeTrackData = new double[4];                         Marshal.Copy(ipr, eyeTrackData, 0, 4);              finally             {                 Marshal.FreeHGlobal(ipr);             }"}, {"owner": {"reputation": 35, "user_id": 9905613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f8e97dc5518ab918a3e7b80f6a585b4?s=128&d=identicon&r=PG&f=1", "display_name": "user527248", "link": "https://stackoverflow.com/users/9905613/user527248"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1528992512, "post_id": 50845599, "comment_id": 88726025, "body": "I wrote this and getting EntryPoinNotFound exception. Any suggestions @DavidHeffernan"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1528993461, "post_id": 50845599, "comment_id": 88726487, "body": "I&#39;m fed up with doing this in comments to an answer. I&#39;m out. You keep ignoring my suggestions so it&#39;s just a waste of my time."}, {"owner": {"reputation": 421, "user_id": 2455274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82bfd1de1145ad919f4eb33cc4e0870b?s=128&d=identicon&r=PG", "display_name": "LuisGP", "link": "https://stackoverflow.com/users/2455274/luisgp"}, "edited": false, "score": 0, "creation_date": 1528996387, "post_id": 50845599, "comment_id": 88727823, "body": "I updated my answer to try summarize all David Heffernan tips."}, {"owner": {"reputation": 35, "user_id": 9905613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f8e97dc5518ab918a3e7b80f6a585b4?s=128&d=identicon&r=PG&f=1", "display_name": "user527248", "link": "https://stackoverflow.com/users/9905613/user527248"}, "edited": false, "score": 0, "creation_date": 1528997158, "post_id": 50845599, "comment_id": 88728210, "body": "@LuisGP your solution doesn&#39;t work.    eyeData(ipr); error: Cannot convert from System.IntPtr[] to System.IntPtr Also,     Marshal.Copy(ipr, eyeTrackData, 0, 4);  Cannot convert from double[] to int"}, {"owner": {"reputation": 421, "user_id": 2455274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82bfd1de1145ad919f4eb33cc4e0870b?s=128&d=identicon&r=PG", "display_name": "LuisGP", "link": "https://stackoverflow.com/users/2455274/luisgp"}, "edited": false, "score": 0, "creation_date": 1528997405, "post_id": 50845599, "comment_id": 88728334, "body": "I edited my answer with a little more of IntPtr knowledge I just googled. Why didn&#39;t you?"}, {"owner": {"reputation": 35, "user_id": 9905613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f8e97dc5518ab918a3e7b80f6a585b4?s=128&d=identicon&r=PG&f=1", "display_name": "user527248", "link": "https://stackoverflow.com/users/9905613/user527248"}, "edited": false, "score": 0, "creation_date": 1529002949, "post_id": 50845599, "comment_id": 88730945, "body": "I did that. I am now stuck with EntryPointNotFoundException which I googled a lot and came up with 2 fixes, which didn&#39;t work out."}, {"owner": {"reputation": 421, "user_id": 2455274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82bfd1de1145ad919f4eb33cc4e0870b?s=128&d=identicon&r=PG", "display_name": "LuisGP", "link": "https://stackoverflow.com/users/2455274/luisgp"}, "edited": false, "score": 0, "creation_date": 1529006972, "post_id": 50845599, "comment_id": 88732830, "body": "Did you see this <a href=\"https://stackoverflow.com/questions/12892271/entrypointnotfoundexception-when-binding-c-dll-in-c-sharp\">link</a>? Maybe you should try <a href=\"http://www.dependencywalker.com/\" rel=\"nofollow noreferrer\">DependencyWalker</a>. Sounds like you are not exporting/importing the function in the dll properly."}, {"owner": {"reputation": 102162, "user_id": 613130, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/40bd5f390cba274159501bb244bc29f4?s=128&d=identicon&r=PG", "display_name": "xanatos", "link": "https://stackoverflow.com/users/613130/xanatos"}, "edited": false, "score": 0, "creation_date": 1529044138, "post_id": 50845599, "comment_id": 88742020, "body": "It could be made simpler with (in C#): <code>void eyeData(double[] array);</code> and then <code>double[] eyeTrackData = new double[4]; </code>eyeData(eyeTrackData);`. There is autopinning of arrays, and primitive type arrays aren&#39;t marshaled but simply passed as reference."}], "tags": [], "owner": {"reputation": 421, "user_id": 2455274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82bfd1de1145ad919f4eb33cc4e0870b?s=128&d=identicon&r=PG", "display_name": "LuisGP", "link": "https://stackoverflow.com/users/2455274/luisgp"}, "is_accepted": false, "score": 0, "last_activity_date": 1528997355, "last_edit_date": 1528997355, "creation_date": 1528921100, "answer_id": 50845599, "question_id": 50845520, "link": "https://stackoverflow.com/questions/50845520/retrieving-array-from-cunmanaged-code-to-c-sharp-formmanaged/50845599#50845599", "title": "Retrieving array from C++(Unmanaged code) to C Sharp form(Managed)", "body": "<p>Following the @DavidHeffernan tips, I will try to give you an example of how to achieve your objective. Please, take the C# part as pseudocode, as I'm not expert in that language.</p>\n\n<p>I would use a struct as previously said, just to make things clearer, and I consider it a good practice to give some type protection and the possibility to add a \"size\" attribute to the struct if don't know exactly how many doubles will be. In your case, as always are 4, isn't needed.</p>\n\n<p>Function in C++ Library:</p>\n\n<pre><code>void getData(double* eyeTrackData)\n{\n    const unique_ptr&lt;Fove::IFVRHeadset&gt; headset{ Fove::GetFVRHeadset() };\n\n    CheckError(headset-&gt;Initialise(Fove::EFVR_ClientCapabilities::Gaze), \"Initialise\");\n\n    Fove::SFVR_GazeVector leftGaze, rightGaze;\n    const Fove::EFVR_ErrorCode error = headset-&gt;GetGazeVectors(&amp;leftGaze, &amp;rightGaze);\n\n\n    // Check for error\n    switch (error)\n    {\n\n    case Fove::EFVR_ErrorCode::None:\n        eyeTrackData[0] = (double)leftGaze.vector.x;\n        eyeTrackData[1] = (double)leftGaze.vector.y;\n        eyeTrackData[2] = (double)rightGaze.vector.x;\n        eyeTrackData[3] = (double)rightGaze.vector.y;\n        break;\n\n    default:\n        // Less common errors are simply logged with their numeric value\n        cerr &lt;&lt; \"Error #\" &lt;&lt; EnumToUnderlyingValue(error) &lt;&lt; endl;\n        break;\n    }\n}\n</code></pre>\n\n<p>C# side:</p>\n\n<pre><code>[DllImport(\"C:\\\\Users\\\\BME 320 - Section 1\\\\Documents\\\\Visual Studio 2015\\\\Projects\\\\EyeTrackDll\\\\x64\\\\Debug\\\\EyeTrackDll.dll\", CallingConvention = CallingConvention.Cdecl)]\npublic static extern void eyeData(IntPtr); \n\nprivate void button1_Click(object sender, EventArgs e) \n{ \n    try \n    { \n        IntPtr ipr = Marshal.AllocHGlobal(4); // Memory blob to pass to the DLL\n        eyeData(ipr);\n        double[] eyeTrackData = new double[4]; // Your C# data\n        Marshal.Copy(ipr, eyeTrackData, 0, 4); // Convert?\n    }\n    finally \n    { \n        Marshal.FreeHGlobal(ipr); \n    }\n} \n</code></pre>\n\n<p>Again, sorry for my \"bad C#\" xD. Hope this helps.</p>\n"}], "owner": {"reputation": 35, "user_id": 9905613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f8e97dc5518ab918a3e7b80f6a585b4?s=128&d=identicon&r=PG&f=1", "display_name": "user527248", "link": "https://stackoverflow.com/users/9905613/user527248"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1528997355, "creation_date": 1528920851, "last_edit_date": 1528943909, "question_id": 50845520, "link": "https://stackoverflow.com/questions/50845520/retrieving-array-from-cunmanaged-code-to-c-sharp-formmanaged", "title": "Retrieving array from C++(Unmanaged code) to C Sharp form(Managed)", "body": "<p>I have below implementation in C++ (have created a DLL of the same)</p>\n\n<pre><code>double *getData()\n{\n    double *eyeTrackData = new double[10];\n    const unique_ptr&lt;Fove::IFVRHeadset&gt; headset{ Fove::GetFVRHeadset() };\n\n    CheckError(headset-&gt;Initialise(Fove::EFVR_ClientCapabilities::Gaze), \n\"Initialise\");\n\n    Fove::SFVR_GazeVector leftGaze, rightGaze;\n    const Fove::EFVR_ErrorCode error = headset-&gt;GetGazeVectors(&amp;leftGaze, \n    &amp;rightGaze);\n\n\n    // Check for error\n    switch (error)\n    {\n\n    case Fove::EFVR_ErrorCode::None:\n        eyeTrackData[0] = (double)leftGaze.vector.x;\n        eyeTrackData[1] = (double)leftGaze.vector.y;\n        eyeTrackData[2] = (double)rightGaze.vector.x;\n        eyeTrackData[3] = (double)rightGaze.vector.y;\n        break;\n\n\n    default:\n        // Less common errors are simply logged with their numeric value\n        cerr &lt;&lt; \"Error #\" &lt;&lt; EnumToUnderlyingValue(error) &lt;&lt; endl;\n        break;\n    }\n\n    return eyeTrackData;\n}\n</code></pre>\n\n<p>I have included</p>\n\n<pre><code>extern \"C\"\n{\n    __declspec(dllexport) double *getData();\n}\n</code></pre>\n\n<p>in the header file.</p>\n\n<p>I try to receive this in C-sharp.</p>\n\n<pre><code>[DllImport(\"C:\\\\Users\\\\BME 320 - Section 1\\\\Documents\\\\Visual Studio 2015\\\\Projects\\\\EyeTrackDll\\\\x64\\\\Debug\\\\EyeTrackDll.dll\", CallingConvention = CallingConvention.Cdecl)]\npublic static extern IntPtr eyeData();\n</code></pre>\n\n<p>But I don't know how to receive the array inside buttonClick event.</p>\n\n<p>I appreciate any help on this.</p>\n"}, {"tags": ["c++", "regex", "string", "str-replace"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 4, "creation_date": 1528920948, "post_id": 50845519, "comment_id": 88694606, "body": "What error does it &quot;throw&quot;?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 4, "creation_date": 1528920975, "post_id": 50845519, "comment_id": 88694618, "body": "<code>&#39;&#39;</code> is not a valid character value. Maybe you want to use a space character or something instead, but it won&#39;t &quot;remove&quot; that character from the string, just replace it&#39;s value."}, {"owner": {"reputation": 403, "user_id": 9762520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e6ac2db55a32b0fac2323ec29bc145f?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Salman", "link": "https://stackoverflow.com/users/9762520/muhammad-salman"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1528921015, "post_id": 50845519, "comment_id": 88694642, "body": "@Fran&#231;oisAndrieux : Thanks, should have been <code>!=</code>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1528921090, "post_id": 50845519, "comment_id": 88694680, "body": "Seems like <a href=\"http://en.cppreference.com/w/cpp/algorithm/remove\" rel=\"nofollow noreferrer\"><code>std::remove_if</code></a> might be a better tool for this job."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 1, "creation_date": 1528921098, "post_id": 50845519, "comment_id": 88694685, "body": "Please <a href=\"https://stackoverflow.com/posts/50845519/edit\">edit</a> your question and replace &quot;seems to throw an error&quot; with an accurate description of what you&#39;re observing."}, {"owner": {"reputation": 403, "user_id": 9762520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e6ac2db55a32b0fac2323ec29bc145f?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Salman", "link": "https://stackoverflow.com/users/9762520/muhammad-salman"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1528921123, "post_id": 50845519, "comment_id": 88694698, "body": "@DrewDormann : done, should have done that the first time"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1528921174, "post_id": 50845519, "comment_id": 88694724, "body": "please make sure the error is from the code you show, the error says <code>&quot;&quot;</code> but code says <code>&#39;&#39;</code>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1528921252, "post_id": 50845519, "comment_id": 88694769, "body": "@user463035818 I interpreted that as <code>&#39;&#39;</code> with extra quotes introduced by the error message&#39;s format, indicating the unexpected token."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1528921347, "post_id": 50845519, "comment_id": 88694826, "body": "@MuhammadSalman -- As pointed out, <code>std::remove_if</code> (and <code>std::erase</code>) makes this a one or two line function.  Is your goal to get the final results correct, or to keep the code you have now and attempt to fix it?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1528921521, "post_id": 50845519, "comment_id": 88694925, "body": "It&#39;s a shame the c++ community is so quick to downvote-and-forget. The question&#39;s problems were fixed quickly after being pointed out."}], "answers": [{"comments": [{"owner": {"reputation": 403, "user_id": 9762520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e6ac2db55a32b0fac2323ec29bc145f?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Salman", "link": "https://stackoverflow.com/users/9762520/muhammad-salman"}, "edited": false, "score": 0, "creation_date": 1528921415, "post_id": 50845659, "comment_id": 88694861, "body": "Ahh, I see. so I cannot just put an empty string. My bad used to JS , python. Thanks I will see what this is"}, {"owner": {"reputation": 403, "user_id": 9762520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e6ac2db55a32b0fac2323ec29bc145f?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Salman", "link": "https://stackoverflow.com/users/9762520/muhammad-salman"}, "edited": false, "score": 0, "creation_date": 1528921563, "post_id": 50845659, "comment_id": 88694945, "body": "I am assuming that <code>isConstant</code> function is not part of C++ ?"}, {"owner": {"reputation": 403, "user_id": 9762520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e6ac2db55a32b0fac2323ec29bc145f?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Salman", "link": "https://stackoverflow.com/users/9762520/muhammad-salman"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1528921629, "post_id": 50845659, "comment_id": 88694982, "body": "@Fran&#231;oisAndrieux : Can you write an answer with <code>std::remove_if</code> ? My C++ is really bad ? otherwise a link that explains that ?"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 403, "user_id": 9762520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e6ac2db55a32b0fac2323ec29bc145f?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Salman", "link": "https://stackoverflow.com/users/9762520/muhammad-salman"}, "edited": false, "score": 0, "creation_date": 1528921678, "post_id": 50845659, "comment_id": 88695008, "body": "@MuhammadSalman Right, otherwise it would reside in namespace <code>std</code> (and likely be all small letters). Just used a custom function name to shorten the code, use the test you had in your original question instead..."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "reply_to_user": {"reputation": 403, "user_id": 9762520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e6ac2db55a32b0fac2323ec29bc145f?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Salman", "link": "https://stackoverflow.com/users/9762520/muhammad-salman"}, "edited": false, "score": 1, "creation_date": 1528921782, "post_id": 50845659, "comment_id": 88695062, "body": "@MuhammadSalman: See the example code <a href=\"https://en.cppreference.com/w/cpp/algorithm/remove\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 403, "user_id": 9762520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e6ac2db55a32b0fac2323ec29bc145f?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Salman", "link": "https://stackoverflow.com/users/9762520/muhammad-salman"}, "edited": false, "score": 0, "creation_date": 1528921788, "post_id": 50845659, "comment_id": 88695065, "body": "@Aconcagua : Thanks"}, {"owner": {"reputation": 403, "user_id": 9762520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e6ac2db55a32b0fac2323ec29bc145f?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Salman", "link": "https://stackoverflow.com/users/9762520/muhammad-salman"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1528921824, "post_id": 50845659, "comment_id": 88695096, "body": "@FredLarson : Thanks"}], "tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": false, "score": 2, "last_activity_date": 1528923101, "last_edit_date": 1528923101, "creation_date": 1528921327, "answer_id": 50845659, "question_id": 50845519, "link": "https://stackoverflow.com/questions/50845519/remove-vowels-from-string-c/50845659#50845659", "title": "Remove vowels from string C++", "body": "<p><code>''</code> is not a valid character, you cannot place an \"empty\" one (such thing does not exist in C++) into the string to remove content...</p>\n\n<p>What you can do is moving the non-vowels, i. e. the consonants, to front, skipping the vowels, and afterwards erase the surplus characters at the end:</p>\n\n<pre><code>auto pos = st.begin();\nfor(auto c : st)\n{\n    if(isConsonant(c))\n        *pos++ = c;\n}\nst.erase(pos, st.end());\n</code></pre>\n\n<p>Edit: As Fran\u00e7ois (correctly) denotes: There is no need to re-invent the wheel (provided you are not disallowed to use the standard library):</p>\n\n<pre><code>st.erase(std::remove_if(st.begin(), st.end(), [](char c) { return isConsonant(c); }), st.end());\n</code></pre>\n\n<p>Be aware that <code>std::remove_if</code> (as well as <code>std::remove</code>) \"remove\" by just moving the elements to remain to front and returns an iterator to the new end of data &ndash; but does not really remove the elements \"behind\" the new end. So it is necessary to explicitly <code>erase</code> them as shown above. </p>\n"}, {"comments": [{"owner": {"reputation": 403, "user_id": 9762520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e6ac2db55a32b0fac2323ec29bc145f?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Salman", "link": "https://stackoverflow.com/users/9762520/muhammad-salman"}, "edited": false, "score": 0, "creation_date": 1528922339, "post_id": 50845907, "comment_id": 88695338, "body": "Holy. Nice. I&#39;m impressed."}, {"owner": {"reputation": 3812, "user_id": 7697209, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0zmCe.png?s=128&g=1", "display_name": "Kostas", "link": "https://stackoverflow.com/users/7697209/kostas"}, "edited": false, "score": 0, "creation_date": 1528922404, "post_id": 50845907, "comment_id": 88695373, "body": "The mandatory STL-heavy response in any StackOverflow C++ post :)"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1528922477, "post_id": 50845907, "comment_id": 88695408, "body": "Note that I&#39;ve renamed the function to <code>remove_vowel</code> as <code>remove</code> was conflicting with <a href=\"http://en.cppreference.com/w/c/io/remove\" rel=\"nofollow noreferrer\"><code>remove</code></a>, though I don&#39;t know how it gets included."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 403, "user_id": 9762520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e6ac2db55a32b0fac2323ec29bc145f?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Salman", "link": "https://stackoverflow.com/users/9762520/muhammad-salman"}, "edited": false, "score": 1, "creation_date": 1528922628, "post_id": 50845907, "comment_id": 88695476, "body": "@MuhammadSalman -- Also, note that the function is named exactly as described.  In other words, any STL knowledgeable person can take one look at the code and know what it does and that it works, all without having to debug or step through the code.  On the other hand, hand-coded loops have to be 1) figured out what is being done and 2) is it doing it correctly."}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1528924677, "post_id": 50845907, "comment_id": 88696345, "body": "I rather like this code ... and I find the description of remove_if (in cppreference.com) unreadable.  Your description here is great.  Thanks."}], "tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": true, "score": 7, "last_activity_date": 1528936796, "last_edit_date": 1528936796, "creation_date": 1528922280, "answer_id": 50845907, "question_id": 50845519, "link": "https://stackoverflow.com/questions/50845519/remove-vowels-from-string-c/50845907#50845907", "title": "Remove vowels from string C++", "body": "<p>The canonical way to remove elements from a sequential containers according to a predicate (a condition) is to use <a href=\"http://en.cppreference.com/w/cpp/algorithm/remove\" rel=\"nofollow noreferrer\"><code>std::remove_if</code></a>. Unlike it's name implies, this standard algorithm doesn't quite remove the elements, it moves them to the back of the container so they are easy to erase, leaving the other elements intact and in the same order. It returns an iterator that indicates the beginning of the portion of the container which contains the \"removed\" elements. Since the standard algorithms cannot change the size the containers they operate on, these elements must then be removed using the container's appropriate remove method. In the case of <code>std::string</code>, that's <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/erase\" rel=\"nofollow noreferrer\"><code>std::string::erase</code></a>.</p>\n\n<p><code>std::remove_if</code> accepts a pair of iterators which define the range of elements to inspect, as well as a predicate that is used to determine which elements to remove. Elements for which the predicate is <code>true</code> are removed.</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\n// Returns true if p_char is a vowel\nbool is_vowel(const char p_char)\n{\n\n    constexpr char vowels[] = { 'a', 'e', 'i', 'o', 'u', 'A', 'E', 'I', 'O', 'U' };\n    return std::find(std::begin(vowels), std::end(vowels), p_char) != std::end(vowels);\n}\n\nstd::string remove_vowel(std::string st) \n{\n    // Moves all the characters for which `is_vowel` is true to the back\n    //  and returns an iterator to the first such character\n    auto to_erase = std::remove_if(st.begin(), st.end(), is_vowel);\n\n    // Actually remove the unwanted characters from the string\n    st.erase(to_erase, st.end());\n    return st;\n}\n\nint main()\n{\n    std::cout &lt;&lt; remove_vowel(\"Hello, World!\");\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 14520970, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7lwCdEXqk4s/AAAAAAAAAAI/AAAAAAAAAAA/AMZuuck0dWjtyM8C8GiILwd-MvQmglws8A/s96-c/photo.jpg?sz=128", "display_name": "Divij Manchanda", "link": "https://stackoverflow.com/users/14520970/divij-manchanda"}, "is_accepted": false, "score": 0, "last_activity_date": 1616305769, "last_edit_date": 1616305769, "creation_date": 1616305342, "answer_id": 66729214, "question_id": 50845519, "link": "https://stackoverflow.com/questions/50845519/remove-vowels-from-string-c/66729214#66729214", "title": "Remove vowels from string C++", "body": "<p>Here is the code:-</p>\n<pre><code>#include&lt;iostream&gt;\n#include&lt;string&gt;\n#include&lt;algorithm&gt;\n\nstd::string RemoveVowel(std::string &amp;text)\n{\n    unsigned int len = text.length();\n    char vowels[] = { 'a','e','i','o','u','A','E','I','O','U'};\n    for (int i = 0; i &lt; len; i++)\n    {\n        for (char&amp; ref : vowels)\n        {\n            if (text[i] == ref)\n            {\n                text[i] = '\\0';\n            }\n        }\n    }\n    return text;\n}\n\nint main()\n{\n    std::string var = &quot;THIS IS SO MUCH FUN!&quot;;\n    std::string var2 = &quot;this is so much fun!&quot;;\n    std::cout &lt;&lt; RemoveVowel(var) &lt;&lt; std::endl;\n    std::cout &lt;&lt; RemoveVowel(var2) &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n<p>Just iterate through the string and vowels array and if both the characters match, set the current character of the string to null, which will remove the vowel.</p>\n<p>Output:-\n<a href=\"https://i.stack.imgur.com/DVuXD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DVuXD.png\" alt=\"enter image description here\" /></a></p>\n"}], "owner": {"reputation": 403, "user_id": 9762520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e6ac2db55a32b0fac2323ec29bc145f?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Salman", "link": "https://stackoverflow.com/users/9762520/muhammad-salman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3850, "favorite_count": 0, "accepted_answer_id": 50845907, "answer_count": 3, "score": 0, "last_activity_date": 1616305769, "creation_date": 1528920838, "last_edit_date": 1528921096, "question_id": 50845519, "link": "https://stackoverflow.com/questions/50845519/remove-vowels-from-string-c", "title": "Remove vowels from string C++", "body": "<p>So I am new to C++ and tried to create a function that would remove vowels from a string, but I am failing at it horribly, Here is my code so far : </p>\n\n<pre><code>#include &lt;string&gt;\nusing namespace std;\nstring remove(string st) {\n    for(int i = 0; st[i] != '\\0'; i++) \n        st[i] = st[i] == 'a' || st[i] == 'e' || st[i] == 'i' || st[i] == 'o' || st[i] ==\n        'u' || st[i] == 'A' || st[i] == 'E' || st[i] == 'I' || st[i] == 'O' || st[i] ==\n        'U' ? '' : st[i];\n    }\nreturn st;\n</code></pre>\n\n<p>This seems to throw an error ? any idea what I am doing wrong</p>\n\n<p>The error I get is : </p>\n\n<pre><code>main.cpp:10:16: error: expected expression 'U' ? '' : Z[i];\n</code></pre>\n\n<p>And running on another interpreter : </p>\n\n<pre><code>   .code.tio.cpp:7:14: error: incompatible operand types ('const char *' and '__gnu_cxx::__alloc_traits&lt;std::allocator&lt;char&gt;, char&gt;::value_type' (aka 'char'))\n            'U' ? \"\" : Z[i];\n                ^ ~~   ~~~~\n</code></pre>\n"}, {"tags": ["c++", "cursor", "loadimage", "ntdll", "resource-file"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9779025, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Lotcelan", "link": "https://stackoverflow.com/users/9779025/lotcelan"}, "edited": false, "score": 0, "creation_date": 1528921864, "post_id": 50845632, "comment_id": 88695112, "body": "Thank you very much ! It&#39;s working ! (and sorry if for you it was obvious, but I started learning c++ maybe 4 days ago just for fun, so ty !)"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 0, "last_activity_date": 1528921532, "last_edit_date": 1528921532, "creation_date": 1528921229, "answer_id": 50845632, "question_id": 50845414, "link": "https://stackoverflow.com/questions/50845414/c-error-when-changing-the-cursor-from-a-resource-file/50845632#50845632", "title": "C++ Error when changing the cursor from a resource file", "body": "<p>When calling <code>LoadImage()</code>, you are specifying the <code>LR_LOADFROMFILE</code> flag, so the <code>lpszName</code> parameter will be interpreted as a pointer to a null-terminated string containing the path to the <code>.cur</code> file to load.  But, you are passing in a resource ID number instead of a file path string (I'm assuming <code>IDC_CURSOR1</code> is 102 (0x66), which would be consistent with the memory address reported in the error message).  You need to get rid of the <code>LR_LOADFROMFILE</code> flag when loading an image from resources.</p>\n\n<p>Also, you need to pass in the EXE's actual module handle in the <code>hinst</code> parameter, not NULL (NULL can only be used with loading OEM-defined images).</p>\n\n<p>Also. you should not be using <a href=\"https://en.wikipedia.org/wiki/Magic_number_(programming)\" rel=\"nofollow noreferrer\">\"magic numbers\"</a>.  The <code>2</code> on <code>LoadImage()</code> should be replaced with the <code>IMAGE_CURSOR</code> constant, and the <code>32512</code> on <code>SetSystemCursor()</code> should be replaced with the <code>OCR_NORMAL</code> constant.</p>\n\n<p>Try this:</p>\n\n<pre><code>HCURSOR curs = (HCURSOR) LoadImage(GetModuleHandle(), MAKEINTRESOURCE(IDC_CURSOR1), IMAGE_CURSOR, 0, 0, 0);\nSetSystemCursor(curs, OCR_NORMAL);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9779025, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Lotcelan", "link": "https://stackoverflow.com/users/9779025/lotcelan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 137, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528921532, "creation_date": 1528920429, "last_edit_date": 1528920915, "question_id": 50845414, "link": "https://stackoverflow.com/questions/50845414/c-error-when-changing-the-cursor-from-a-resource-file", "title": "C++ Error when changing the cursor from a resource file", "body": "<p>I'm trying to change the cursor of my mouse with a .cur file in a resource file.</p>\n\n<p>When I'm try my code, I get this error:</p>\n\n<blockquote>\n  <p>Exception raised at 0x77EB7392 (ntdll.dll) in CleanResourceFiles.exe: 0xC0000005: Access Violation while reading location 0x00000066. </p>\n</blockquote>\n\n<p>Here is the code:</p>\n\n<pre><code>HCURSOR curs = (HCURSOR)LoadImage(NULL, MAKEINTRESOURCE(IDC_CURSOR1), 2, 0, 0, LR_LOADFROMFILE);\nSetSystemCursor(curs, 32512);\n</code></pre>\n\n<p>Note : <code>IDC_CURSOR1</code> is my cursor and <code>32512</code> is the ID of the classic arrow cursor. I also included <code>&lt;Windows.h&gt;</code> and my <code>resource.h</code>.</p>\n\n<p>I'm using Visual Studio Community 2017, with Win10.</p>\n\n<p>I tried other functions, like <code>LoadCursor()</code>. The code above is from \"VineMemz\".</p>\n\n<p>Finally,  when I tried to change my cursor with <code>LoadFromFile()</code> using the path to my <code>.cur</code> file, it works.</p>\n"}, {"tags": ["c++", "templates", "segmentation-fault"], "comments": [{"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 1, "creation_date": 1528920337, "post_id": 50845347, "comment_id": 88694298, "body": "This is a common problem. Use <code>mem(T** t, int i)</code>, <code>*t = new T(i)</code>, and <code>mem(&amp;m_classMain,3);</code> <a href=\"http://coliru.stacked-crooked.com/a/d671397d4b1e9239\" rel=\"nofollow noreferrer\">Updated demo</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1512, "user_id": 7885750, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/43lAl.jpg?s=128&g=1", "display_name": "Stephen M. Webb", "link": "https://stackoverflow.com/users/7885750/stephen-m-webb"}, "is_accepted": false, "score": 3, "last_activity_date": 1528920377, "creation_date": 1528920377, "answer_id": 50845395, "question_id": 50845347, "link": "https://stackoverflow.com/questions/50845347/why-does-initializing-pointer-of-class-a-through-method-in-class-b-in-a-segmenta/50845395#50845395", "title": "Why does initializing pointer of class A through method in class B in a segmentation fault?", "body": "<p>You are passing the <code>t</code> parameter of the mem() function by value.  It gets destroyed on function exit.  Consider passing by reference, or accessing the member directly from the member function.</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 5, "last_activity_date": 1528921357, "last_edit_date": 1528921357, "creation_date": 1528920464, "answer_id": 50845421, "question_id": 50845347, "link": "https://stackoverflow.com/questions/50845347/why-does-initializing-pointer-of-class-a-through-method-in-class-b-in-a-segmenta/50845421#50845421", "title": "Why does initializing pointer of class A through method in class B in a segmentation fault?", "body": "<p>In your posted code, the member variable <code>m_classMain</code> is not initialized. Calling <code>delete</code> on it is cause for undefined behavior.</p>\n\n<p>The call</p>\n\n<pre><code>    mem(m_classMain,3);\n</code></pre>\n\n<p>does not initialize <code>m_classMain</code> since you are passing it by value. To initialize it in <code>mem</code>, you'll have to pass it by reference.</p>\n\n<pre><code>template&lt;typename T&gt;\n  void mem(T*&amp; t, int i){ //T*&amp; t, not T* t.\n    t = new T(i);  \n}\n</code></pre>\n\n<hr>\n\n<p>As a matter of good coding practice, make sure that all member variables are initialized in the constructor(s).</p>\n\n<pre><code>Master() : m_classMain(nullptr) {};\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 8763949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14e5b882250fa6755657b5b3ad0a0bc9?s=128&d=identicon&r=PG&f=1", "display_name": "DummySenior", "link": "https://stackoverflow.com/users/8763949/dummysenior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 50845421, "answer_count": 2, "score": 1, "last_activity_date": 1528921357, "creation_date": 1528920190, "question_id": 50845347, "link": "https://stackoverflow.com/questions/50845347/why-does-initializing-pointer-of-class-a-through-method-in-class-b-in-a-segmenta", "title": "Why does initializing pointer of class A through method in class B in a segmentation fault?", "body": "<p>I have the following code: (<a href=\"http://coliru.stacked-crooked.com/a/d5c911ebef99ec62\" rel=\"nofollow noreferrer\">live on Coliru</a>)</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass ClassA{\n    public:\n    ClassA(int i) : m_int(i){};\n\n    int m_int;\n};\n\nclass Master{\n    public:\n    Master(){};\n\n    ~Master(){\n        delete m_classMain;\n    }\n\n    ClassA* m_classMain;\n\n    template&lt;typename T&gt;\n    void mem(T* t, int i){\n        t = new T(i);  \n    }\n\n    void test() {\n        mem(m_classMain,3);\n    }\n\n    int get_i() const{\n        return m_classMain-&gt;m_int;\n    }\n};\n\nint main()\n{\n    Master* master = new Master();\n    master-&gt;test();\n\n    std::cout &lt;&lt; master-&gt;get_i() &lt;&lt; std::endl;\n    delete master;\n}\n</code></pre>\n\n<p>I would like to initialize the object <code>ClassA* m_classMain</code> through the method <code>mem(T* t, int i)</code> which is a template method.</p>\n\n<p>For some reason I only get a segmentation fault. I think <code>t = new T(i)</code> might be the problem here, but I can not figure why (unfortunately I do not have a debugger at hand).</p>\n"}, {"tags": ["c++", "string", "visual-studio", "operator-keyword", "stringstream"], "comments": [{"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 5, "creation_date": 1528920248, "post_id": 50845315, "comment_id": 88694253, "body": "I think you mean: <code>std::cout &lt;&lt; name.str() &lt;&lt; &quot;hat&quot; &lt;&lt; punkte.str() &lt;&lt; &quot;Punkte&quot; &lt;&lt; &#39;\\n&#39;;</code>"}, {"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1528920406, "post_id": 50845315, "comment_id": 88694334, "body": "Can you add your error message?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 2, "creation_date": 1528920475, "post_id": 50845315, "comment_id": 88694373, "body": "Also <code>return 0;</code> - zero is not a string. You are attempting to create a string from a null pointer."}, {"owner": {"reputation": 13, "user_id": 9938118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ad0ba0f2a64566ca011ba64c887cf3f?s=128&d=identicon&r=PG&f=1", "display_name": "emaem1116", "link": "https://stackoverflow.com/users/9938118/emaem1116"}, "reply_to_user": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1528920565, "post_id": 50845315, "comment_id": 88694421, "body": "@DimChtz No, name and punkte are attributes. That I have already initialized."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1528920630, "post_id": 50845315, "comment_id": 88694452, "body": "They are not attributes, they are local variables. This code makes no sense whatsoever."}, {"owner": {"reputation": 13, "user_id": 9938118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ad0ba0f2a64566ca011ba64c887cf3f?s=128&d=identicon&r=PG&f=1", "display_name": "emaem1116", "link": "https://stackoverflow.com/users/9938118/emaem1116"}, "reply_to_user": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1528920632, "post_id": 50845315, "comment_id": 88694453, "body": "@JVApen binary &#39;&lt;&lt;&#39; : no operator found which takes a left-hand operand of type &#39;std::ofstream&#39;"}], "answers": [{"tags": [], "owner": {"reputation": 1512, "user_id": 7885750, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/43lAl.jpg?s=128&g=1", "display_name": "Stephen M. Webb", "link": "https://stackoverflow.com/users/7885750/stephen-m-webb"}, "is_accepted": false, "score": 1, "last_activity_date": 1528920514, "creation_date": 1528920514, "answer_id": 50845438, "question_id": 50845315, "link": "https://stackoverflow.com/questions/50845315/c-no-operator-found/50845438#50845438", "title": "C++ &lt;&lt; no operator found", "body": "<p>There is no overload of operator&lt;&lt;() that will format a std::stringstream to a std::ostream.  There error does not lie.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 9938118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ad0ba0f2a64566ca011ba64c887cf3f?s=128&d=identicon&r=PG&f=1", "display_name": "emaem1116", "link": "https://stackoverflow.com/users/9938118/emaem1116"}, "edited": false, "score": 0, "creation_date": 1528921120, "post_id": 50845506, "comment_id": 88694696, "body": "Thanks, but it&#39;s not exactly what I&#39;m trying to do. name and punkte .. that&#39;s name and points in english and they are already initialized. I&#39;m trying to become this Output &quot;Gamer &lt;name&gt; hat &lt;points&gt; Points&quot;."}, {"owner": {"reputation": 421, "user_id": 2455274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82bfd1de1145ad919f4eb33cc4e0870b?s=128&d=identicon&r=PG", "display_name": "LuisGP", "link": "https://stackoverflow.com/users/2455274/luisgp"}, "reply_to_user": {"reputation": 13, "user_id": 9938118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ad0ba0f2a64566ca011ba64c887cf3f?s=128&d=identicon&r=PG&f=1", "display_name": "emaem1116", "link": "https://stackoverflow.com/users/9938118/emaem1116"}, "edited": false, "score": 0, "creation_date": 1528921297, "post_id": 50845506, "comment_id": 88694793, "body": "The don&#39;t declare them again inside the function body, they will hide your attributes. To print out that string try: <code>std::cout &lt;&lt; &quot;Gamer &quot; &lt;&lt; name.str() &lt;&lt; &quot; hat &quot; &lt;&lt; punkte.str() &lt;&lt; &quot; Points.&quot; &lt;&lt; std::endl;</code>"}, {"owner": {"reputation": 421, "user_id": 2455274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82bfd1de1145ad919f4eb33cc4e0870b?s=128&d=identicon&r=PG", "display_name": "LuisGP", "link": "https://stackoverflow.com/users/2455274/luisgp"}, "reply_to_user": {"reputation": 13, "user_id": 9938118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ad0ba0f2a64566ca011ba64c887cf3f?s=128&d=identicon&r=PG&f=1", "display_name": "emaem1116", "link": "https://stackoverflow.com/users/9938118/emaem1116"}, "edited": false, "score": 0, "creation_date": 1528921950, "post_id": 50845506, "comment_id": 88695150, "body": "Hi @emaem116 if this or any answer has solved your question please consider <a href=\"https://meta.stackexchange.com/q/5234/179419\">accepting it</a> by clicking the check-mark. This indicates to the wider community that you&#39;ve found a solution and gives some reputation to both the answerer and yourself. There is no obligation to do this."}], "tags": [], "owner": {"reputation": 421, "user_id": 2455274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82bfd1de1145ad919f4eb33cc4e0870b?s=128&d=identicon&r=PG", "display_name": "LuisGP", "link": "https://stackoverflow.com/users/2455274/luisgp"}, "is_accepted": true, "score": 0, "last_activity_date": 1528920801, "creation_date": 1528920801, "answer_id": 50845506, "question_id": 50845315, "link": "https://stackoverflow.com/questions/50845315/c-no-operator-found/50845506#50845506", "title": "C++ &lt;&lt; no operator found", "body": "<p>You are trying to call operator \"&lt;&lt;\" with a stringstream parameter. In other words:</p>\n\n<pre><code>std::cout &lt;&lt; name;\n</code></pre>\n\n<p>Is equivalent to:</p>\n\n<pre><code>std::cout.operator&lt;&lt;(name);\n</code></pre>\n\n<p>And that operator&lt;&lt;(const std::stringstream&amp;) function doesn't exists.</p>\n\n<p>I think that what you want to do is assign each stringstream their values and then print both, isn't?</p>\n\n<pre><code>string toString() \n{\n    std::stringstream punkte;\n    std::stringstream name;\n    name &lt;&lt; \"hat\";\n    punkte &lt;&lt; \"Punkte\";\n    std::cout &lt;&lt; name.str() &lt;&lt; punkte.str() &lt;&lt; std::endl;\n    return name.str();\n}\n</code></pre>\n\n<p>Be careful with your return value, and remember that a std::stringstream is not a std::string. If you want to retrieve the std:string in the stream, you must call the <code>str()</code> method.</p>\n"}], "owner": {"reputation": 13, "user_id": 9938118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ad0ba0f2a64566ca011ba64c887cf3f?s=128&d=identicon&r=PG&f=1", "display_name": "emaem1116", "link": "https://stackoverflow.com/users/9938118/emaem1116"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 50845506, "answer_count": 2, "score": -3, "last_activity_date": 1528920801, "creation_date": 1528920002, "question_id": 50845315, "link": "https://stackoverflow.com/questions/50845315/c-no-operator-found", "title": "C++ &lt;&lt; no operator found", "body": "<pre><code>string toString() {\n\n    std::stringstream punkte;\n    std::stringstream name;\n    std::cout &lt;&lt; name &lt;&lt; \"hat\" &lt;&lt; punkte &lt;&lt; \"Punkte\" &lt;&lt; '\\n'\n    return 0;\n\n  }\n</code></pre>\n\n<p>At this line of code. I'm receiving the error C++ &lt;&lt; no operator found \nI can't figure out what my mistake is. I have read and tried different solutions. But nothing works. Can somebody please help?</p>\n\n<pre><code> std::cout &lt;&lt; name &lt;&lt; \"hat\" &lt;&lt; punkte &lt;&lt; \"Punkte\" &lt;&lt; '\\n';\n</code></pre>\n\n<p>I also included this in my code:</p>\n\n<pre><code>#include &lt;string&gt;       // std::string\n#include &lt;iostream&gt;     // std::cout\n#include &lt;sstream&gt;      // std::stringstream, std::stringbuf\n#include &lt;fstream&gt;\n</code></pre>\n"}, {"tags": ["c++", "bit-manipulation", "bitwise-operators", "uint"], "comments": [{"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1528920157, "post_id": 50845296, "comment_id": 88694207, "body": "Overflow? You only have 32 bits"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1528920457, "post_id": 50845296, "comment_id": 88694366, "body": "This depends on the size of your <code>uint</code> (which isn&#39;t a c++ type, I&#39;ll assume you meant <code>unsigned int</code>). If it&#39;s 32 bit, then <code>1&lt;&lt;32</code> is an overflow."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1528937693, "post_id": 50845296, "comment_id": 88699653, "body": "why do you subtract 1 in case of 5 but not in case of 32?"}, {"owner": {"reputation": 688, "user_id": 2255757, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/92b38d168433d11a27e9cd70d6cded4d?s=128&d=identicon&r=PG", "display_name": "user2255757", "link": "https://stackoverflow.com/users/2255757/user2255757"}, "edited": false, "score": 0, "creation_date": 1528959060, "post_id": 50845296, "comment_id": 88705205, "body": "if you dont subtract by 1 the last (from left to right) of the bits you want 1 is actually 0"}], "owner": {"reputation": 688, "user_id": 2255757, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/92b38d168433d11a27e9cd70d6cded4d?s=128&d=identicon&r=PG", "display_name": "user2255757", "link": "https://stackoverflow.com/users/2255757/user2255757"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "closed_date": 1528920033, "answer_count": 0, "score": 0, "last_activity_date": 1528920528, "creation_date": 1528919900, "last_edit_date": 1528920066, "question_id": 50845296, "link": "https://stackoverflow.com/questions/50845296/setting-all-bits-in-range-m-n-to-1", "closed_reason": "Duplicate", "title": "Setting all bits in range [m,n] to 1", "body": "<p>Im using the code in <a href=\"https://www.geeksforgeeks.org/check-whether-bits-set-given-range/\" rel=\"nofollow noreferrer\">This Link</a> to generate a <code>uint</code> whose bit are all set to 1 in a desired range of indeces.</p>\n\n<p>eg:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nint main ()\n{\n    // range is [32,5] so i want [1 1 1......1 0 0 0 0 0]\n    uint mask = ((1 &lt;&lt; 32) - 1) ^ ((1 &lt;&lt; (5 - 1)) - 1);\n    std::cout &lt;&lt; mask &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>The output is <code>4294967280</code>, which contains the desired array of bits according to <a href=\"http://www.binaryconvert.com/convert_unsigned_int.html\" rel=\"nofollow noreferrer\">this site</a>.</p>\n\n<p>But as soon as i do the following:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nint main () \n{\n    uint stop = 32;\n    uint start = 5;\n    uint mask = ((1 &lt;&lt; stop) - 1) ^ ((1 &lt;&lt; (start - 1)) - 1);\n    std::cout &lt;&lt; mask &lt;&lt; std::endl; \n}\n</code></pre>\n\n<p>It outputs <code>15</code>. Uuuuh what's is going on? are the <code>32</code> and <code>5</code> in the first example a different type that gets casted when assigning to the <code>uint mask</code>? how do i fix this?</p>\n"}, {"tags": ["c++", "oop", "polymorphism", "diamond-problem"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1528919369, "post_id": 50845111, "comment_id": 88693816, "body": "Didn&#39;t we just have this, or something similar, which you deleted? And the general answer is only to use inheritance when you absolutely must."}, {"owner": {"reputation": 36469, "user_id": 5353753, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8658d889ba478c305810bd346e21da33?s=128&d=identicon&r=PG&f=1", "display_name": "sagi", "link": "https://stackoverflow.com/users/5353753/sagi"}, "edited": false, "score": 0, "creation_date": 1528919661, "post_id": 50845111, "comment_id": 88693960, "body": "@NeilButterworth Similar question , had an error not related to this question. This is an assignment from school, I didn&#39;t decide on this structure ."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1528920251, "post_id": 50845111, "comment_id": 88694256, "body": "I&#39;m voting to close this question as off-topic because if you have working code and are looking for improvement suggestions, <a href=\"https://codereview.stackexchange.com\">Code Review</a> is the appropriate place to ask."}, {"owner": {"reputation": 2051, "user_id": 3626537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1499840559/picture?type=large", "display_name": "Phrancis", "link": "https://stackoverflow.com/users/3626537/phrancis"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 3, "creation_date": 1528920489, "post_id": 50845111, "comment_id": 88694377, "body": "@Barmar It is okay to recommend the OP post on CR but in the future, please don&#39;t use Code Review as a reason to close a question. Evaluate the request and use a reason like <i>too broad</i>, <i>primarily opinion-based</i>, etc. Then you can mention to the OP that it can be posted on Code Review if it is <a href=\"https://codereview.stackexchange.com/help/on-topic\">on-topic</a>. Please see the section <b>What you should not do</b> in <a href=\"https://codereview.meta.stackexchange.com/a/5778/120114\">this answer to A guide to Code Review for Stack Overflow users</a>"}, {"owner": {"reputation": 36469, "user_id": 5353753, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8658d889ba478c305810bd346e21da33?s=128&d=identicon&r=PG&f=1", "display_name": "sagi", "link": "https://stackoverflow.com/users/5353753/sagi"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1528920553, "post_id": 50845111, "comment_id": 88694411, "body": "@Barmar No, it really isn&#39;t off topic. This question is not about improvement suggestions it&#39;s about knowing the right way to program ! If this is wrong, I wanna know how and why ."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 2051, "user_id": 3626537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1499840559/picture?type=large", "display_name": "Phrancis", "link": "https://stackoverflow.com/users/3626537/phrancis"}, "edited": false, "score": 0, "creation_date": 1528920754, "post_id": 50845111, "comment_id": 88694500, "body": "@Phrancis OK, I thought the custom close reason would kill 2 birds with one stone, instead of having to VTC and also post a comment."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 6, "creation_date": 1528921431, "post_id": 50845111, "comment_id": 88694868, "body": "It&#39;s funny how if someone asks &quot;how to do X the proper way&quot; and doesn&#39;t show any attempt at all, the top comment is usually &quot;What have you tried?&quot; (implying that OP should always show the solution they came up with, even if they&#39;re not satisfied with it), but now when someone actually posted their attempt, the reaction is &quot;since you already have working code, go to CodeReview&quot;."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1528921909, "post_id": 50845111, "comment_id": 88695131, "body": "@HolyBlackCat wanted to make the same comment myself, but couldn&#39;t express it. I think, you nailed it."}], "answers": [{"comments": [{"owner": {"reputation": 36469, "user_id": 5353753, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8658d889ba478c305810bd346e21da33?s=128&d=identicon&r=PG&f=1", "display_name": "sagi", "link": "https://stackoverflow.com/users/5353753/sagi"}, "edited": false, "score": 0, "creation_date": 1528923408, "post_id": 50845922, "comment_id": 88695812, "body": "Thank you, exactly what I was looking for ."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1528929416, "post_id": 50845922, "comment_id": 88697910, "body": "There are no templates in this code, can you explain what you mean by &quot;template method&quot;"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1528941534, "post_id": 50845922, "comment_id": 88700337, "body": "@M.M this term comes from design patterns. While it is language-agnostic, it is usually implemented in C++ as a combination of virtual and nonvirtual functions, i.e. <a href=\"http://www.bogotobogo.com/DesignPatterns/template.php\" rel=\"nofollow noreferrer\">bogotobogo.com/DesignPatterns/template.php</a>. Generic pattern definition (Wikipedia quality): <a href=\"https://en.wikipedia.org/wiki/Template_method_pattern\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Template_method_pattern</a>"}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 2, "last_activity_date": 1528922345, "creation_date": 1528922345, "answer_id": 50845922, "question_id": 50845111, "link": "https://stackoverflow.com/questions/50845111/c-printing-with-diamond-of-death/50845922#50845922", "title": "C++ printing with Diamond of death", "body": "<p>That what template method is for. Here is how I would write this code:</p>\n\n<pre><code>class Person {\n    string name;\n    int id;\npublic:\n        void output(ostream&amp; out) {\n        out &lt;&lt; name &lt;&lt; \",\" &lt;&lt; id;\n        output_impl(out);\n    }\nprivate:\n       virtual void output_impl(ostream&amp; ) {}\n};\n\nclass Student : virtual public Person {\n    string major;\n    int year;\nprivate:\n    virtual void output_impl(ostream&amp; out) {\n        out &lt;&lt; \",\" &lt;&lt; major &lt;&lt; \",\" &lt;&lt; year;\n    }\n\n};\n\nclass Employee : virtual public Person {\n    string jobTitle;\nprivate:\n    virtual void output_impl(ostream&amp; out) {\n        out &lt;&lt; \",\" &lt;&lt; jobTitle;\n    }\n};\n\nclass Intern : public Student, public Employee {\nprivate:\n    virtual void output_impl(ostream&amp; out) {\n        Student::output_impl(out);\n        Employee::output_impl(out);\n    }\n};\n</code></pre>\n\n<p>And than you call <code>output</code> on the object.</p>\n"}], "owner": {"reputation": 36469, "user_id": 5353753, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8658d889ba478c305810bd346e21da33?s=128&d=identicon&r=PG&f=1", "display_name": "sagi", "link": "https://stackoverflow.com/users/5353753/sagi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 50845922, "answer_count": 1, "score": 2, "last_activity_date": 1528922345, "creation_date": 1528919179, "question_id": 50845111, "link": "https://stackoverflow.com/questions/50845111/c-printing-with-diamond-of-death", "title": "C++ printing with Diamond of death", "body": "<p>first let me explain my hierarchy :</p>\n\n<pre><code>        Person\n       /     \\\n   Student Employee\n       \\     /\n       Intern\n</code></pre>\n\n<p>Each class has an <code>output</code> function of their own , which prints their data members, and I have to print <code>Person</code> only once. The problem is that <code>Student</code> and <code>Employee</code> are not abstract classes, and people will also make an object of their type, so I can't only call the output function on the <code>Intern</code> level.</p>\n\n<p>As you will see in the following code, I've managed to solve this, but I think  this is ugly and not very polymorphic . I've created an additional output function so it will work for all cases. Is there a better way of achieving this ?</p>\n\n<pre><code>class Person {\n    string name;\n    int id;\npublic:\n        virtual void output(ostream&amp; out) {\n        out &lt;&lt; name &lt;&lt; \",\" &lt;&lt; id;\n    }\n}\n</code></pre>\n\n<p>Student:</p>\n\n<pre><code>class Student : virtual public Person {\n    string major;\n    int year;\npublic:\n    virtual void output(ostream&amp; out) {\n        Person::output(out);\n        out &lt;&lt; \",\" &lt;&lt; major &lt;&lt; \",\" &lt;&lt; year;\n    }\n    virtual void outputStudOnly(ostream&amp; out) {\n        out &lt;&lt; \",\" &lt;&lt; major &lt;&lt; \",\" &lt;&lt; year;\n    }\n};\n</code></pre>\n\n<p>Employee:</p>\n\n<pre><code>class Employee : virtual public Person{\n    string jobTitle;\npublic:\n    virtual void output(ostream&amp; out) {\n        Person::output(out);\n        out &lt;&lt; \",\" &lt;&lt; jobTitle;\n    }\n    virtual void outputEmpOnly(ostream&amp; out) {\n        out &lt;&lt; \",\" &lt;&lt; jobTitle;\n    }\n};\n</code></pre>\n\n<p>And Intern :</p>\n\n<pre><code>class Intern : public Student, public Employee {\npublic:\n    virtual void output(ostream&amp; out) {\n        Person::output(out);\n        Student::outputStudOnly(out);\n        Employee::outputEmpOnly(out);\n    }\n};\n</code></pre>\n"}, {"tags": ["c++", "winapi", "dll", "dllmain"], "comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 1, "creation_date": 1528919315, "post_id": 50845099, "comment_id": 88693787, "body": "There are countless posts here explaining why you can&#39;t do this, or pretty much anything, in DllMain"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 3, "creation_date": 1528919406, "post_id": 50845099, "comment_id": 88693831, "body": "<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dn633971.aspx\" rel=\"nofollow noreferrer\">You can&#39;t use any of those functions in your <code>DllMain()</code></a>: &quot;<i>You should <b>never</b> perform the following tasks from within DllMain: ...  Call functions <b>in User32.dll</b> or Gdi32.dll.</i>.  You can use <code>CreateThread()</code> instead to display your dialog in a worker thread: &quot;<i>Creating a thread can work <b>if you do not synchronize with other threads</b>.</i>&quot; However, the best option is to export a separate function to display your dialog, and then have the loading app call that function when needed, after the DLL has been loaded."}, {"owner": {"reputation": 11, "user_id": 2984606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa64f321bdfb2840cd76c84abb8d58f3?s=128&d=identicon&r=PG&f=1", "display_name": "G-H-T", "link": "https://stackoverflow.com/users/2984606/g-h-t"}, "edited": false, "score": 0, "creation_date": 1528919789, "post_id": 50845099, "comment_id": 88694030, "body": "Thank you guys, Should I write an export table and call this function ?"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1528922606, "post_id": 50845099, "comment_id": 88695463, "body": "Yes. That&#39;s precisely what to do."}, {"owner": {"reputation": 11, "user_id": 2984606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa64f321bdfb2840cd76c84abb8d58f3?s=128&d=identicon&r=PG&f=1", "display_name": "G-H-T", "link": "https://stackoverflow.com/users/2984606/g-h-t"}, "edited": false, "score": 0, "creation_date": 1528923641, "post_id": 50845099, "comment_id": 88695911, "body": "It&#39;s done thank you David and Remy"}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1528953403, "post_id": 50845099, "comment_id": 88702853, "body": "@RemyLebeau I see that the full quote from the link you provide is &quot;Creating a thread can work if you do not synchronize with other threads, but it is risky.&quot;  Just what are they trying to say there, do you think?  There are too many weazel words there for my liking.  I think the truth of it is probably that <i>that</i> thread can&#39;t do anything significant either until all the relevant DLL&#39;s have been initialised, and, in the general case, how can it know when that initialisation is complete?  So, OP, just in case you were thinking of doing it that way, don&#39;t!"}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1528955036, "post_id": 50845099, "comment_id": 88703377, "body": "@G-H-T I edited your post, primarily to put DllMain in the title for future Google hits, but <i>please</i>, indent your code properly in future!"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 1, "creation_date": 1528966560, "post_id": 50845099, "comment_id": 88709627, "body": "@PaulSanders: There are no restrictions with respect to the thread created from <code>DllMain</code>. It can do anything. The dangerous pattern is, if you synchronize with that thread after creating it, because it will not start executing, until <code>DllMain</code> with <code>DLL_THREAD_ATTACH</code> has run to completion. And <code>DllMain</code> will not be entered, until the code creating the thread has returned. If that waits to synchronize with a thread that hasn&#39;t started executing, you have an instant deadlock."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1528967392, "post_id": 50845099, "comment_id": 88710175, "body": "@IInspectable Yes, they say that about synchronising with the main thread explicitly and that&#39;s fine.  But why ... <i>can</i> work  and ... <i>but it is risky</i>?  What&#39;s the deal with that?  Also, if the newly created thread tries to call into a DLL that hasn&#39;t been properly initialised yet, well, anything could happen.  My point, really, not wanting to beat Remy up or anything, was that starting a new thread is unlikely to help you most times in cases such as these."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1528967966, "post_id": 50845099, "comment_id": 88710525, "body": "@PaulSanders: It is risky, because, in general, you do want to pass data to the newly created thread. That data needs to live long enough until the newly created thread has had a chance to pick it up, and signal, that it has done so. The general pattern is to have some sort of synchronization, which <i>will</i> deadlock. In this specific case, creating a thread <i>is</i> safe. You don&#39;t need to pass any data to it, and don&#39;t need to synchronize with it. You have to know, what you&#39;re doing. If in doubt, simply don&#39;t."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1528968345, "post_id": 50845099, "comment_id": 88710758, "body": "@IInspectable Yes, you have to know what you&#39;re doing.  Absolutely, that applies to threading in general.  And safe because we can rely on USER32 etc being up and running <i>at the time the thread is started</i>, I assume, with reference to the code as posted."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1529047067, "post_id": 50845099, "comment_id": 88743245, "body": "@Paul user32 doesn&#39;t run. Code runs, some of which may live in that module. You didn&#39;t understand the point about synchronisation though. The potential for deadlock arises because of the process wide loader lock. The fact the user32 has loaded doesn&#39;t make the issue go away."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1529059807, "post_id": 50845099, "comment_id": 88749504, "body": "@David OK, I&#39;ll try again.  I assume we can rely on USER32 being <i>initialised</i> ...  And I do know about the loader lock, I just didn&#39;t call it out explicitly.  As RC would say, you&#39;re in danger of being banished to nitpickers&#39; corner."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1529061728, "post_id": 50845099, "comment_id": 88750489, "body": "@PaulSanders Well, what does initialised actually mean in the context of loading a module. That&#39;s not a term I am familiar with. Precision matters, and nitpicking is essential."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1529073340, "post_id": 50845099, "comment_id": 88757467, "body": "@David OK, I&#39;m beginning to see what you&#39;re getting at here  I will do some research and post a new question (in [winapi], + whatever)."}, {"owner": {"reputation": 11, "user_id": 2984606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa64f321bdfb2840cd76c84abb8d58f3?s=128&d=identicon&r=PG&f=1", "display_name": "G-H-T", "link": "https://stackoverflow.com/users/2984606/g-h-t"}, "reply_to_user": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1529100234, "post_id": 50845099, "comment_id": 88768540, "body": "@PaulSanders , sure. Thank you."}], "owner": {"reputation": 11, "user_id": 2984606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa64f321bdfb2840cd76c84abb8d58f3?s=128&d=identicon&r=PG&f=1", "display_name": "G-H-T", "link": "https://stackoverflow.com/users/2984606/g-h-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1528962137, "creation_date": 1528919138, "last_edit_date": 1528962137, "question_id": 50845099, "link": "https://stackoverflow.com/questions/50845099/my-dialog-box-doesnt-show-when-i-try-to-display-it-in-dllmain", "title": "My dialog box doesn&#39;t show when I try to display it in DllMain", "body": "<p>I have created a Win32 dll in Visua Studio 2015 that contains a dialog box, I use the hModule passed to <code>DllMain ()</code> and use <code>ShowWindow ()</code> to actually show the window, but dialog box doesn't show up.</p>\n\n<p>I use <code>LoadLibrary()</code> to load this DLL in another project.</p>\n\n<p>Where is the problem?  Here is my code:</p>\n\n<pre><code>BOOL APIENTRY DllMain( HMODULE hModule,\n                   DWORD  ul_reason_for_call,\n                   LPVOID lpReserved,\n                   HINSTANCE hinstDLL\n                 )\n{\n    switch (ul_reason_for_call)\n    {\n        case DLL_PROCESS_ATTACH:\n            HWND hDlg;\n            MSG msg;\n            BOOL ret;\n            BOOL sts;\n\n            InitCommonControls();\n            hDlg = CreateDialogParam(hinstDLL, MAKEINTRESOURCE(IDD_DIALOG1), 0, DialogProc, 0);\n\n            if (!hDlg) {\n                MessageBoxA(NULL,GetLastErrorAsString().c_str(),\"\",MB_OK);\n                return false;\n            }\n\n            sts = ShowWindow(hDlg, 1);\n\n            if (!sts)\n            {\n                MessageBoxA(NULL, GetLastErrorAsString().c_str(), \"\", MB_OK);\n                return false;\n            }\n\n            while ((ret = GetMessage(&amp;msg, 0, 0, 0)) != 0) {\n                if (ret == -1)\n                    return -1;\n\n                if (!IsDialogMessage(hDlg, &amp;msg)) {\n                    TranslateMessage(&amp;msg);\n                    DispatchMessage(&amp;msg);\n                }\n            }\n        case DLL_THREAD_ATTACH:\n        case DLL_THREAD_DETACH:\n        case DLL_PROCESS_DETACH:\n            break;\n    }\n    return TRUE;\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "qabstractbutton"], "comments": [{"owner": {"reputation": 312, "user_id": 8856358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eece51b12abc3887d561ede1c69c3265?s=128&d=identicon&r=PG", "display_name": "MauriceRandomNumber", "link": "https://stackoverflow.com/users/8856358/mauricerandomnumber"}, "edited": false, "score": 0, "creation_date": 1528919299, "post_id": 50845096, "comment_id": 88693781, "body": "Maybe you can make a own class, like MyQAbstractButton (derive from QAbstractButton) and friend your own class?"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1528919591, "post_id": 50845096, "comment_id": 88693924, "body": "<code>QAbstractButton::clicked</code> <a href=\"http://doc.qt.io/qt-5/qabstractbutton.html#signals\" rel=\"nofollow noreferrer\">is not protected</a>. We&#39;d have to know some more context. It&#39;s possible that the Qt version you are using isn&#39;t the one you think you are"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 2, "creation_date": 1528919637, "post_id": 50845096, "comment_id": 88693950, "body": "<code>clicked</code> is a public signal. See <a href=\"http://doc.qt.io/archives/qt-4.8/qabstractbutton.html#signals\" rel=\"nofollow noreferrer\">doc.qt.io/archives/qt-4.8/qabstractbutton.html#signals</a>. There&#39;s is something else that is messing up your code."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 2, "creation_date": 1528919671, "post_id": 50845096, "comment_id": 88693967, "body": "Unrelated to the specific question, but you can use <a href=\"https://en.cppreference.com/w/cpp/container/array\" rel=\"nofollow noreferrer\"><code>std::array&lt;QCheckBox*, 9&gt;</code></a> instead of <code>QCheckBox* ...[9]</code>. This would make the <code>copy_n</code> unnecessary; you&#39;d be able to write <code>survive = _survive;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 9938070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6695af6b367242c1b43be9822910fd3?s=128&d=identicon&r=PG&f=1", "display_name": "duboisoc", "link": "https://stackoverflow.com/users/9938070/duboisoc"}, "is_accepted": false, "score": 0, "last_activity_date": 1528923829, "creation_date": 1528923829, "answer_id": 50846247, "question_id": 50845096, "link": "https://stackoverflow.com/questions/50845096/void-qabstractbuttonclickedbool-is-protected/50846247#50846247", "title": "&#39;void QAbstractButton::clicked(bool)&#39; is protected", "body": "<p>I found the solution if it can help someone. \nIn QT I went on the \"project\" window (on the left), and in </p>\n\n<blockquote>\n  <p>Projetct > Deskop QT 5.11.0 GCC 64Bit > Build</p>\n</blockquote>\n\n<p>I just changed the file path for the compilation with a new file that I had just created and which was empty.</p>\n\n<p>Then I tried to compile my project again and it worked ! </p>\n\n<p>(Thanks for your help)</p>\n"}], "owner": {"reputation": 21, "user_id": 9938070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6695af6b367242c1b43be9822910fd3?s=128&d=identicon&r=PG&f=1", "display_name": "duboisoc", "link": "https://stackoverflow.com/users/9938070/duboisoc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 537, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528923829, "creation_date": 1528919120, "last_edit_date": 1528919849, "question_id": 50845096, "link": "https://stackoverflow.com/questions/50845096/void-qabstractbuttonclickedbool-is-protected", "title": "&#39;void QAbstractButton::clicked(bool)&#39; is protected", "body": "<p>I'm actually working on a project with Qt 5.10.1. I'm using Linux and my partners are using Windows.</p>\n\n<p>We've written this piece of code:</p>\n\n<pre><code>QCheckBox* _survive[9] = {\n        ui-&gt;survive0, ui-&gt;survive1, ui-&gt;survive2, ui-&gt;survive3,\n        ui-&gt;survive4, ui-&gt;survive5, ui-&gt;survive6, ui-&gt;survive7, ui-&gt;survive8\n    };\nQCheckBox* _born[9] = {\n        ui-&gt;born0, ui-&gt;born1, ui-&gt;born2, ui-&gt;born3,\n        ui-&gt;born4, ui-&gt;born5, ui-&gt;born6, ui-&gt;born7, ui-&gt;born8\n    };\n    std::copy_n(_survive, 9, survive); // because arrays are not directly assignable\n    std::copy_n(_born, 9, born);\n\n\nfor (int i = 0; i &lt; 9; i++) {\n        connect(born[i], &amp;QCheckBox::clicked, this, &amp;Automate_2D::on_born_i_clicked);\n        connect(survive[i], &amp;QCheckBox::clicked, this, &amp;Automate_2D::on_survive_i_clicked);\n    }\n</code></pre>\n\n<p>Where <code>survive0</code>..<code>survive8</code> and <code>born0</code>..<code>born8</code> are checkboxes.</p>\n\n<p>When compiling, it doesn't show up an error on Windows, but on Linux I have this error:</p>\n\n<blockquote>\n  <p>void QAbstractButton::clicked(bool)' is protected within this context<br><br>\n  connect(born[i], &amp;QCheckBox::clicked, this, &amp;Automate_2D::on_born_i_clicked);</p>\n</blockquote>\n\n<p>What can I do to fix it ? I don't understand why does it appears only on Linux.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1528919367, "post_id": 50844864, "comment_id": 88693815, "body": "Unrelated: <code>#include&lt;iostream&gt; #include&lt;vector&gt; #include &lt;bits&#47;stdc++.h&gt;</code> suggests that you don&#39;t know what <code>#include &lt;bits&#47;stdc++.h&gt;</code> does. This is a good thing because we can nip it in the bud. Give <a href=\"https://stackoverflow.com/questions/31816095/why-should-i-not-include-bits-stdc-h\">Why should I not #include &lt;bits/stdc++.h&gt;?</a> a read."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 1, "creation_date": 1528919920, "post_id": 50844864, "comment_id": 88694094, "body": "Retracted my close vote now that there&#39;s code."}], "answers": [{"tags": [], "owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "is_accepted": true, "score": 12, "last_activity_date": 1592243173, "last_edit_date": 1592243173, "creation_date": 1528919669, "answer_id": 50845238, "question_id": 50844864, "link": "https://stackoverflow.com/questions/50844864/runtime-error-addition-of-unsigned-offset-to-0x129000a0-overflowed-to-0x1290008/50845238#50845238", "title": "runtime error: addition of unsigned offset to 0x129000a0 overflowed to 0x12900088", "body": "<blockquote>\n  <p>Whats the reason for this error:</p>\n</blockquote>\n\n<p>You set <code>i</code> to <code>0</code></p>\n\n<pre><code>int i=0;\n</code></pre>\n\n<p>Then you set <code>k</code> to <code>i</code>.  <code>k</code> is now <code>0</code>.</p>\n\n<pre><code>int k=i;\n</code></pre>\n\n<p>Then you attempt to index the <strong><code>k-1</code> element</strong> of v, which is <code>0-1</code>, or <code>-1</code>.</p>\n\n<pre><code>while(v[k-1].length()\n</code></pre>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/container/vector/operator_at\" rel=\"noreferrer\">No bounds checking is performed with <code>std::vector::operator[]</code></a> and you end up treating memory you don't own as if it were a validly constructed <code>std::string</code>.</p>\n"}], "owner": {"reputation": 51, "user_id": 9938025, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1n5IKVB8lak/AAAAAAAAAAI/AAAAAAAAAAA/i_-r5eovRd8/photo.jpg?sz=128", "display_name": "eskimo ice", "link": "https://stackoverflow.com/users/9938025/eskimo-ice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13721, "favorite_count": 0, "accepted_answer_id": 50845238, "answer_count": 1, "score": 2, "last_activity_date": 1594121992, "creation_date": 1528918083, "last_edit_date": 1528970210, "question_id": 50844864, "link": "https://stackoverflow.com/questions/50844864/runtime-error-addition-of-unsigned-offset-to-0x129000a0-overflowed-to-0x1290008", "title": "runtime error: addition of unsigned offset to 0x129000a0 overflowed to 0x12900088", "body": "<p>Here is my code.\n<strong>EDITED</strong></p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;vector&gt;\n#include &lt;bits/stdc++.h&gt;\n\nusing namespace std;\n\nint main()\n{\n\nint n;\ncin&gt;&gt;n;\nvector&lt;string&gt; v;\n\n for(int i=0;i&lt;n;i++)\n{\n\n    string temp;\n    cin&gt;&gt;temp;\n     v.push_back(temp);\n\n\n    //if(v.size()==1){\n    //   continue;\n    //}\n\n    //cout&lt;&lt;i&lt;&lt;endl;\n   // cout&lt;&lt;endl;\n\n//cout&lt;&lt;v.size();\n\n    int k=i;\n\n\n    while(v[k-1].length()&gt;v[k].length()&amp;&amp;k&gt;-1)\n    {\n        swap(v[k],v[k-1]);\n\n        k--;\n    }\n   // cout&lt;&lt;endl;\n\n}\n\n\n\n\nbool check=true;\nfor(int i=0;i&lt;v.size()-1;i++)\n{\n\n //cout&lt;&lt;v[i]&lt;&lt;endl;\n    //cout&lt;&lt;v[i+1]&lt;&lt;endl;\n\n   if (v[i+1].find(v[i]) != std::string::npos) {\n//std::cout &lt;&lt; \"found!\" &lt;&lt; '\\n';\n    continue;\n    }\n\n   // cout&lt;&lt;\"false\"&lt;&lt;endl;\n   check=false;\n\n}\n\nif(check==true)\n{\n cout&lt;&lt;\"YES\"&lt;&lt;endl;\n   for(int i=0;i&lt;n;i++)\n   {\n       cout&lt;&lt;v[i]&lt;&lt;endl;\n   }\n\n}else{\n\n\n    cout&lt;&lt;\"NO\"&lt;&lt;endl;\n }\n\n\n\n}\n</code></pre>\n\n<p>Whats the reason for this error:\n<strong>input</strong> was:</p>\n\n<p>100<br>\nnpugmvzdgfnzyxuyfwbzwktiylhvhwgeqauolidpnbemhgbunpefzsltewkxdcrzxgvmkb\nbezfumiguzafxghvcfqmwpopxvazctlftelveayycypjckooxeehyk\ningenqhogs\nelhnhxjwrytbmmqdwwrivvljybhnwfgwhvdgjqgqgvunuemdtrgpyvaanovheqbupamzrjxh\nrpvktlmyxfshahfgunrhuqtosysymfjruqlzdooauuihtchzqgyrhcoxbtoorkxkwakvdkiakitlqfbgz\ntnrnpghjmqumbzfnztiijgwkiygyfevfebuammkwnoinqvhhlsuoqtfkazqhlnuqtthudhhovjqiuykwqtck\nmloehzniuwyakgwmopfgknpoiuiyewijmoefjjjsdimkisugehwqefcx\ntthmaxtahimxxts\nfspoetalxgcgowhjtanerjpqnen\nhefsyokneekdgpbicss</p>\n\n<p>it works for other cases.</p>\n\n<pre><code>Diagnostics detected issues [cpp.clang++-diagnose]: C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Enterprise\\VC\\Tools\\MSVC\\14.11.25503\\include\\vector:1802:11: runtime error: addition of unsigned offset to 0x129000a0 overflowed to 0x12900088\nSUMMARY: UndefinedBehaviorSanitizer: undefined-behavior C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Enterprise\\VC\\Tools\\MSVC\\14.11.25503\\include\\vector:1802:11 in\n</code></pre>\n"}, {"tags": ["c++", "function"], "comments": [{"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1528917963, "post_id": 50844804, "comment_id": 88693053, "body": "Looked at the source yet?"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 4, "creation_date": 1528918020, "post_id": 50844804, "comment_id": 88693091, "body": "Overloading the <a href=\"http://en.cppreference.com/w/cpp/language/operator_other\" rel=\"nofollow noreferrer\">function call operator</a> and chaining."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1528918049, "post_id": 50844804, "comment_id": 88693102, "body": "This is likely done by using a type that has <code>operator()</code> which returns an instance of the same type."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1528918554, "post_id": 50844804, "comment_id": 88693370, "body": "This is some dark magic, and I&#39;m not sure if I should be impressed or terrified. This is like what some people do with JavaScript functions where they add functions to the functions..."}, {"owner": {"reputation": 1352, "user_id": 165606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kZART.jpg?s=128&g=1", "display_name": "DanyAlejandro", "link": "https://stackoverflow.com/users/165606/danyalejandro"}, "reply_to_user": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1528918575, "post_id": 50844804, "comment_id": 88693385, "body": "@ulrich-eckhardt of course looking at the source code was the first thing I did, but there was a possibility that this was a new feature of some C++ version I didn&#39;t know about (first thing I googled).  I&#39;ve been doing C/C++ for 3 years on a daily basis (an a lot of industrial experience before that), no need to bash my question as me being lazy, I truly want to learn how to do this for my own code."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 1, "creation_date": 1528918735, "post_id": 50844804, "comment_id": 88693474, "body": "Actually a variant of the <a href=\"https://stackoverflow.com/a/2700976/10077\">Named Parameter Idiom</a>, it appears."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1528919328, "post_id": 50844804, "comment_id": 88693796, "body": "You may want to program in C or C++.  Switching between the two can get very annoying sometimes and besides, there is no C/C++ language.  For example, in C you don&#39;t have member functions and you can&#39;t overload functions or operators."}, {"owner": {"reputation": 1352, "user_id": 165606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kZART.jpg?s=128&g=1", "display_name": "DanyAlejandro", "link": "https://stackoverflow.com/users/165606/danyalejandro"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1528919591, "post_id": 50844804, "comment_id": 88693923, "body": "@thomas-matthews You&#39;re right on that, but I usually just need some behaviors from C regarding memory. I deal with enough data to easily fill my RAM (computer vision) and sometmes it&#39;s just safer for me to use pointers instead of references. I use C++ as much as I can though, C when C++ is too safe for my own speed needs."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1528919764, "post_id": 50844804, "comment_id": 88694018, "body": "@DanyAlejandro, there are many lazy people here that want to be fed information that they are too lazy to locate themselves. Your question honestly seems like one, simply because you include a link to the source but no indication that you investigated there. Anyhow, good that you got answers. BTW: There&#39;s another way you could have found out how this works, you could have stepped through it with a debugger. If you don&#39;t know how to use one, you&#39;re missing one of the most important tools for a programmer."}, {"owner": {"reputation": 1352, "user_id": 165606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kZART.jpg?s=128&g=1", "display_name": "DanyAlejandro", "link": "https://stackoverflow.com/users/165606/danyalejandro"}, "reply_to_user": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1528927480, "post_id": 50844804, "comment_id": 88697387, "body": "@ulrich-eckhardt Thanks for the tip, I know how to use a debugger, and I decided to ask the developer community instead; they know things a debugger cannot teach me and the question was worth it."}], "answers": [{"comments": [{"owner": {"reputation": 1352, "user_id": 165606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kZART.jpg?s=128&g=1", "display_name": "DanyAlejandro", "link": "https://stackoverflow.com/users/165606/danyalejandro"}, "edited": false, "score": 0, "creation_date": 1528919610, "post_id": 50845045, "comment_id": 88693936, "body": "Amazing, will definitely use this in the future!"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 1352, "user_id": 165606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kZART.jpg?s=128&g=1", "display_name": "DanyAlejandro", "link": "https://stackoverflow.com/users/165606/danyalejandro"}, "edited": false, "score": 1, "creation_date": 1528920119, "post_id": 50845045, "comment_id": 88694185, "body": "@DanyAlejandro Even though I understand the syntax, i don&#39;t encourage such coding style."}, {"owner": {"reputation": 1352, "user_id": 165606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kZART.jpg?s=128&g=1", "display_name": "DanyAlejandro", "link": "https://stackoverflow.com/users/165606/danyalejandro"}, "edited": false, "score": 0, "creation_date": 1528920340, "post_id": 50845045, "comment_id": 88694300, "body": "Yes, I recognized this style from using JSON objects to set-up function calls in JavaScript, which is very practical, and that&#39;s what made me so excited. But other C++ programmers probably don&#39;t agree, and I don&#39;t want to force people to google to read my code."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 7, "last_activity_date": 1528920063, "last_edit_date": 1528920063, "creation_date": 1528918935, "answer_id": 50845045, "question_id": 50844804, "link": "https://stackoverflow.com/questions/50844804/c-multiple-sets-of-parameters-with-their-own-parentheses-on-function-call/50845045#50845045", "title": "C++ multiple sets of parameters with their own parentheses on function call?", "body": "<p><code>options.add_options()</code> returns an object.</p>\n\n<p>That object has the function call operator overload that takes two strings, which most likely looks like</p>\n\n<pre><code>ObjectType&amp; operator()(std::string const&amp; option, std::string const&amp; value);\n</code></pre>\n\n<p>which allows you to chain the function calls.</p>\n\n<p>Here's a simple program that demonstrates the concept.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct Foo\n{\n   Foo&amp; operator()(int x)\n   {\n      std::cout &lt;&lt; \"Got \" &lt;&lt; x &lt;&lt; std::endl;\n      return *this;\n   }\n};\n\nstruct Bar\n{\n   Foo getFoo() { return Foo(); }\n};\n\n\nint main()\n{\n   Bar b;\n   b.getFoo()(10)(200)(30);\n}\n</code></pre>\n\n<p>Output of the program:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Got 10\nGot 200\nGot 30\n</code></pre>\n\n<p>That line in <code>main</code> is equivalent to:</p>\n\n<pre><code>Foo foo = b.getFoo();\nfoo(10);\nfoo(200);\nfoo(30);\n</code></pre>\n\n<hr>\n\n<p><strong>PS</strong></p>\n\n<p>Personally, I find that style of coding a bit cryptic and best avoided. I would rather see:</p>\n\n<pre><code>auto&amp; option = options.add_options();\noption.addOption(\"option1\", \"Description1\");\noption.addOption(\"option2\", \"Description2\");\n</code></pre>\n\n<p>That's a lot clearer to understand, IMO.</p>\n"}], "owner": {"reputation": 1352, "user_id": 165606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kZART.jpg?s=128&g=1", "display_name": "DanyAlejandro", "link": "https://stackoverflow.com/users/165606/danyalejandro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 660, "favorite_count": 0, "accepted_answer_id": 50845045, "answer_count": 1, "score": 0, "last_activity_date": 1528920063, "creation_date": 1528917831, "question_id": 50844804, "link": "https://stackoverflow.com/questions/50844804/c-multiple-sets-of-parameters-with-their-own-parentheses-on-function-call", "title": "C++ multiple sets of parameters with their own parentheses on function call?", "body": "<p>I've been coding in C/C++ for a while and I'm using the <a href=\"https://github.com/jarro2783/cxxopts\" rel=\"nofollow noreferrer\">https://github.com/jarro2783/cxxopts</a> library. The library uses the <em>add_options()</em> function to grab it's configuration, like this:</p>\n\n<pre><code>options.add_options() (\"option1\", \"Description1\") (\"option2\", \"Description2\");\n</code></pre>\n\n<p>And you can add an arbitrary number of options.</p>\n\n<p>It came as a surprise that this is valid C/C++ and works; I have never seen something like that.</p>\n\n<p>How are they doing it? Is there a name for this syntax?</p>\n"}, {"tags": ["c++", "windows"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1528916799, "post_id": 50844523, "comment_id": 88692465, "body": "What do you mean closed by unknown?  Like if the user closes the command line?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 4, "creation_date": 1528917022, "post_id": 50844523, "comment_id": 88692577, "body": "You asked this very question earlier today, except it specified Windows Task Manager. Your sample code even had the same odd indentation. Edit : If I recall correctly, it was closed as a duplicate of <a href=\"https://stackoverflow.com/questions/1527450/can-i-handle-the-killing-of-my-windows-process-through-the-task-manager\" title=\"can i handle the killing of my windows process through the task manager\">stackoverflow.com/questions/1527450/&hellip;</a>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1528917026, "post_id": 50844523, "comment_id": 88692582, "body": "There&#39;s a million ways a process can die. Which is &quot;unknown&quot; in your opinion?"}, {"owner": {"reputation": 2458, "user_id": 2793221, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UpzVs.png?s=128&g=1", "display_name": "shenk", "link": "https://stackoverflow.com/users/2793221/shenk"}, "edited": false, "score": 0, "creation_date": 1528917311, "post_id": 50844523, "comment_id": 88692722, "body": "You just want to intercept WM_CLOSE in your message loop and then check to see what is going on."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 2458, "user_id": 2793221, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UpzVs.png?s=128&g=1", "display_name": "shenk", "link": "https://stackoverflow.com/users/2793221/shenk"}, "edited": false, "score": 1, "creation_date": 1528918169, "post_id": 50844523, "comment_id": 88693169, "body": "@shenk A console program doesn&#39;t have a message loop."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1528918390, "post_id": 50844523, "comment_id": 88693286, "body": "If your program is running and I terminate the power (without pressing the power button), most likely this is an unknown.  Windows has tried to be nice and and send closure messages to them; but people don&#39;t like waiting for processes to close and find other <i>unknown</i> methods to kill your process."}, {"owner": {"reputation": 11, "user_id": 9937052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a964a5c5820257e744fd14b5bdc2fe14?s=128&d=identicon&r=PG&f=1", "display_name": "KIm.K", "link": "https://stackoverflow.com/users/9937052/kim-k"}, "edited": false, "score": 0, "creation_date": 1528918631, "post_id": 50844523, "comment_id": 88693418, "body": "unknown process killing like  user closes using the command line, program self crash etc .."}, {"owner": {"reputation": 11, "user_id": 9937052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a964a5c5820257e744fd14b5bdc2fe14?s=128&d=identicon&r=PG&f=1", "display_name": "KIm.K", "link": "https://stackoverflow.com/users/9937052/kim-k"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1528918711, "post_id": 50844523, "comment_id": 88693458, "body": "@Fran&#231;oisAndrieux link that mentioned is not for console c++ program as A console program doesn&#39;t have a message loop so no wm_close"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1528922067, "post_id": 50844523, "comment_id": 88695207, "body": "You can&#39;t detect EVERY possible way that a process can be terminated. You can only detect the more common &quot;graceful&quot; ways, like when the user presses Ctrl-C or Ctrl-Break, or closes the console window, or exits Windows, etc."}, {"owner": {"reputation": 11, "user_id": 9937052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a964a5c5820257e744fd14b5bdc2fe14?s=128&d=identicon&r=PG&f=1", "display_name": "KIm.K", "link": "https://stackoverflow.com/users/9937052/kim-k"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1528949261, "post_id": 50844523, "comment_id": 88701766, "body": "@RemyLebeau ik, but how about command line kills and task manager kills"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1528949495, "post_id": 50844523, "comment_id": 88701818, "body": "@KIm.K nope, can&#39;t detect those from inside the app that is being killed"}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1528973987, "post_id": 50844523, "comment_id": 88714284, "body": "@RemyLebeau You can detect a kill from Task Manager in an app with a message loop (you get a <code>WM_QUIT</code> or something, I forget exactly what) but you don&#39;t get long to react to it.  Shortly after that, the Task Manager terminates the process direct if it hasn&#39;t exited already."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1528974068, "post_id": 50844523, "comment_id": 88714337, "body": "OP, please to indent your code nicely, it only takes a moment.  Thx."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 1, "creation_date": 1528988072, "post_id": 50844523, "comment_id": 88723287, "body": "@PaulSanders Only if Task Manager attempts a &quot;graceful&quot; close from the Applications tab, but not a brute force termination from the Processes tab."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1528990794, "post_id": 50844523, "comment_id": 88725010, "body": "@RemyLebeau Yes, quite right."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1528992301, "post_id": 50844523, "comment_id": 88725912, "body": "We&#39;re programmers here, we can use the correct terminology.  On Windows, <code>kill()</code> is not the correct terminology.  The function is <code>TerminateProcess()</code>.  Apart from being from the wrong OS, <code>kill</code> is unclear because the <code>kill()</code> function (and <code>kill</code> utility) can send any signal, not only <code>SIGKILL</code>, and most of the signals can be handled.  There is no way for the target of a <code>TerminateProcess()</code> call to handle it."}], "answers": [{"tags": [], "owner": {"reputation": 78, "user_id": 6873330, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49b4eaba129845c8d05a275ce6e323e6?s=128&d=identicon&r=PG&f=1", "display_name": "mike", "link": "https://stackoverflow.com/users/6873330/mike"}, "is_accepted": false, "score": 1, "last_activity_date": 1528993061, "last_edit_date": 1528993061, "creation_date": 1528988934, "answer_id": 50860675, "question_id": 50844523, "link": "https://stackoverflow.com/questions/50844523/how-to-delect-when-my-c-console-program-is-closed-by-unknown-process/50860675#50860675", "title": "how to delect when my c++ console program is closed-by unknown PROCESS?", "body": "<p>The whole idea of task-manger based kill and command-line kill is to kill the program as quickly and abruptly as possible! (It is to prevent virus and other dangerous program to stop immediately and give no time to react).</p>\n\n<p>The only possible practical solution for your console program is to have another program running and monitoring your program, so when it closed abruptly, your second program shall take care of it and do the finishing work left.</p>\n\n<p>(hardly, no user is gonna kill both programs at once)</p>\n"}], "owner": {"reputation": 11, "user_id": 9937052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a964a5c5820257e744fd14b5bdc2fe14?s=128&d=identicon&r=PG&f=1", "display_name": "KIm.K", "link": "https://stackoverflow.com/users/9937052/kim-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528993061, "creation_date": 1528916730, "last_edit_date": 1528916807, "question_id": 50844523, "link": "https://stackoverflow.com/questions/50844523/how-to-delect-when-my-c-console-program-is-closed-by-unknown-process", "title": "how to delect when my c++ console program is closed-by unknown PROCESS?", "body": "<p>I apparently can detect my c++ program is closed by following code</p>\n\n<pre><code>static BOOL WINAPI console_ctrl_handler(DWORD dwCtrlType)\n{\n  switch (dwCtrlType)\n  {\n  case CTRL_C_EVENT: // Ctrl+C\n   case CTRL_BREAK_EVENT: // Ctrl+Break\ncase CTRL_CLOSE_EVENT: //case CTRL_CLOSE_EVENT:\ncase CTRL_LOGOFF_EVENT: // User logs off.\n case CTRL_SHUTDOWN_EVENT: // System is shutting down. \n   } \n}\n</code></pre>\n\n<p>I want to detect and know whether my program is closed by unknown so that can run few last bits my code so smooth closing. .</p>\n"}, {"tags": ["c++", "function"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 12, "creation_date": 1528916081, "post_id": 50844349, "comment_id": 88692138, "body": "You can just have one call other."}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 1, "creation_date": 1528917073, "post_id": 50844349, "comment_id": 88692601, "body": "But you need different <code>+</code> operator overload semantic. I.e. something like <code>array&amp; operator+(const array&amp; rhs) { append(rhs.data_,rsh.length_); return *this;  };</code>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1528918973, "post_id": 50844349, "comment_id": 88693613, "body": "Utterly and totally unrelated: Show a wee bit of fear any time you precede an upper case letter with an underscore. For why, read <a href=\"https://stackoverflow.com/questions/228783/what-are-the-rules-about-using-an-underscore-in-a-c-identifier\">What are the rules about using an underscore in a C++ identifier?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1528917631, "post_id": 50844391, "comment_id": 88692877, "body": "It would be odd for <code>operator+</code> to return a <code>T&amp;</code>. Or maybe the oddity is that <code>operator+</code> and <code>append</code> are expected to do the same thing."}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1528917634, "post_id": 50844391, "comment_id": 88692881, "body": "<code>_T&amp; operator+(const _T&amp; concatinate_operand)</code> is actually bad idea :)  <code>char * foo = nullptr;  if(some) { array&lt;char&gt; arr(&quot;abcd&quot;,5);  foo = arr + &quot;12345&quot;; } delete [] foo;</code>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1528917693, "post_id": 50844391, "comment_id": 88692915, "body": "@VictorGubin What is that code suppose to be/do? It wouldn&#39;t compile and it seems to be trying to do terrible things."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1528917714, "post_id": 50844391, "comment_id": 88692924, "body": "@VictorGubin That code won&#39;t work in the first place."}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1528918026, "post_id": 50844391, "comment_id": 88693094, "body": "@NathanOliver Exactly like member operator <code>+</code> returning reference on member pointer. And <code>foo = arr + &quot;12345&quot;</code> may work if not <code>template&lt;&gt; array&lt;char&gt; { explicit array(const char* cstr) {} </code>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 1, "creation_date": 1528918185, "post_id": 50844391, "comment_id": 88693179, "body": "@VictorGubin I&#39;m sorry but I don&#39;t understand the point you are trying to make."}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1528918490, "post_id": 50844391, "comment_id": 88693340, "body": "@NathanOliver Check operator &#39;+&#39; result type, it returns reference on on template parameter type,  when it should return reference on array class type. i.e. something like <code>array&lt;char&gt; c = array&lt;char&gt;(&quot;abcd&quot;,5) + array&lt;char&gt;(&quot;fig&quot;,4);</code>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 1, "creation_date": 1528918592, "post_id": 50844391, "comment_id": 88693394, "body": "@VictorGubin Why?  That is not what the OP has.  It looks like the want to use <code>+</code> or <code>append</code> to add an element to the end of the array."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 5, "last_activity_date": 1528916977, "last_edit_date": 1528916977, "creation_date": 1528916217, "answer_id": 50844391, "question_id": 50844349, "link": "https://stackoverflow.com/questions/50844349/two-functions-having-same-body-different-name/50844391#50844391", "title": "Two functions having same body different name", "body": "<p>Yes, this is quite easy to accomplish.  You just call the function the you do the actual implementation in from the other one.  That would look like </p>\n\n<pre><code>template&lt;typename _T&gt;\nclass array {\npublic:\n    _T operator+(_T concatinate_operand) { return append(concatinate_operand); } // concatinate to the array\n    _T append(_T concatinate_operand) { /*actual logic here*/ }\n};\n</code></pre>\n\n<hr>\n\n<p>Do note that if <code>T</code> is large then passing it by value and getting a copy will hurt the performance.  If you use references like</p>\n\n<pre><code>template&lt;typename _T&gt;\nclass array {\npublic:\n    _T&amp; operator+(const _T&amp; concatinate_operand) { return append(concatinate_operand); } // concatinate to the array\n    _T&amp; append(const _T&amp; concatinate_operand) { /*actual logic here*/ }\n};\n</code></pre>\n\n<p>You will avoid unnecessary copies.</p>\n"}], "owner": {"reputation": 21, "user_id": 6476326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d570b02e01d6645396bbd7993a16f5ba?s=128&d=identicon&r=PG", "display_name": "mzeroes", "link": "https://stackoverflow.com/users/6476326/mzeroes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 50844391, "answer_count": 1, "score": 1, "last_activity_date": 1528918635, "creation_date": 1528916038, "last_edit_date": 1528918635, "question_id": 50844349, "link": "https://stackoverflow.com/questions/50844349/two-functions-having-same-body-different-name", "title": "Two functions having same body different name", "body": "<p>Is it possible to have two functions with the different function name but the same functionality share the function body? And how can we do it?</p>\n\n<pre><code>template&lt;typename _T&gt;\nclass array {\npublic:\n    _T operator+(_T concatinate_operand); // concatinate to the array\n    _T append(_T concatinate_operand);\n};\n</code></pre>\n"}, {"tags": ["c++", "logging", "visual-c++", "uwp", "c++-cli"], "comments": [{"owner": {"reputation": 2103, "user_id": 797121, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dd97fc1860312fe7079150632585779b?s=128&d=identicon&r=PG", "display_name": "dave", "link": "https://stackoverflow.com/users/797121/dave"}, "edited": false, "score": 0, "creation_date": 1528916465, "post_id": 50844267, "comment_id": 88692318, "body": "Hi and welcome! stackoverflow is more a place where looking for help if you are stuck while writing/adapting code. Could you please provide more details about &quot;your case&quot; and your search/research efforts, including what you tried? Otherwise nobody will be able to help."}, {"owner": {"reputation": 1, "user_id": 3718188, "user_type": "registered", "profile_image": "https://graph.facebook.com/1213302330/picture?type=large", "display_name": "user3718188", "link": "https://stackoverflow.com/users/3718188/user3718188"}, "reply_to_user": {"reputation": 2103, "user_id": 797121, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dd97fc1860312fe7079150632585779b?s=128&d=identicon&r=PG", "display_name": "dave", "link": "https://stackoverflow.com/users/797121/dave"}, "edited": false, "score": 0, "creation_date": 1528919239, "post_id": 50844267, "comment_id": 88693746, "body": "Hi! Thanks for your comment. I guess I just thought it&#39;s a right place for a question about libraries.   Basically I&#39;m working on an UWP application in visual C++ (VS 2017) that will be available on Microsoft Store. I&#39;m looking for a logging library (similar to log4cxx or log4cplus) that will provide me with configurable logger capable of writing logs to files, automatic rolling etc.   Since Microsoft is very strict about UWP requirements I would like to make sure that such logging framework is fully compatibile with UWP. So far I haven&#39;t found any open-source solution for C++, only for C#"}, {"owner": {"reputation": 7891, "user_id": 6782612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KuUfK.jpg?s=128&g=1", "display_name": "Xie Steven", "link": "https://stackoverflow.com/users/6782612/xie-steven"}, "edited": false, "score": 0, "creation_date": 1529462804, "post_id": 50844267, "comment_id": 88877024, "body": "@user3718188 UWP has Logging APIs in <a href=\"https://docs.microsoft.com/en-us/uwp/api/windows.foundation.diagnostics\" rel=\"nofollow noreferrer\">the Windows.Foundation.Diagnostics namespace</a>. Please see <a href=\"https://github.com/Microsoft/Windows-universal-samples/tree/master/Samples/Logging/cpp\" rel=\"nofollow noreferrer\">Logging</a> sample for more details."}], "owner": {"reputation": 1, "user_id": 3718188, "user_type": "registered", "profile_image": "https://graph.facebook.com/1213302330/picture?type=large", "display_name": "user3718188", "link": "https://stackoverflow.com/users/3718188/user3718188"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 417, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1528919927, "creation_date": 1528915769, "last_edit_date": 1528919927, "question_id": 50844267, "link": "https://stackoverflow.com/questions/50844267/c-logger-for-uwp-application", "title": "C++ logger for UWP application", "body": "<p>I'm working on an UWP application in visual C++ (VS 2017) that will be uploaded to Microsoft Store. I'm looking for a configurable third-party logger that may be used for writing logs to files, automatic rolling etc. Is there an off-the-shelf logging library for visual C++ that is fully compatible with UWP and may provide such features? As far as I checked there are only loggers for UWP available in C# (e.g. Serilog, NLog in version 4.5). </p>\n\n<p>If no, is there a way to integrate one of the above-mentioned C# logging frameworks with visual C++? It may be easily done the other way by using shared Windows Runtime components, but I'm not sure if it's feasible in my case.</p>\n"}, {"tags": ["c++", "malloc", "stdvector"], "comments": [{"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 15, "creation_date": 1528915824, "post_id": 50844234, "comment_id": 88692015, "body": "That struct cannot be in C code because C doesn&#39;t have <code>std::vector</code> (or namespaces or templates even)."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1528915858, "post_id": 50844234, "comment_id": 88692031, "body": "Do not <code>malloc</code> a <code>vector</code> or anything containing a <code>vector</code>. <code>vector</code>, and the majority of C++ standard library classes, requires its constructor to be run to properly be properly initialized. <code>malloc</code> knows not what a constructor is and thus cannot run the constructor. This leaves the <code>vector</code> in an unusable state."}, {"owner": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "edited": false, "score": 1, "creation_date": 1528915858, "post_id": 50844234, "comment_id": 88692033, "body": "You can&#39;t allocate c++ classes via <code>malloc</code> as simple as that."}, {"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1528915863, "post_id": 50844234, "comment_id": 88692038, "body": "You should execute the Ctor to get it working correctly"}, {"owner": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "reply_to_user": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 1, "creation_date": 1528915899, "post_id": 50844234, "comment_id": 88692061, "body": "@JVApen That&#39;s still UB isn&#39;t it? You&#39;d have to malloc the place and then use placement new, no?"}, {"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1528916085, "post_id": 50844234, "comment_id": 88692141, "body": "Yes, indeed. Also Dtor will be needed. I prefer using new (or even better: std::make_unique)"}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1528917640, "post_id": 50844234, "comment_id": 88692887, "body": "On Ubuntu 17.10 (64 bit), each instance of &quot;route_timer_info_t&quot; is about 40 bytes (regardless of how many elements in the std::vector).  Are you sure you want to put this small of an object onto the heap?  (using new, of course)"}, {"owner": {"reputation": 9, "user_id": 4213126, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vXU54cpFtYA/AAAAAAAAAAI/AAAAAAAAAGw/Ypx4YvIcgDk/photo.jpg?sz=128", "display_name": "Saurabh Suman", "link": "https://stackoverflow.com/users/4213126/saurabh-suman"}, "reply_to_user": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1528917883, "post_id": 50844234, "comment_id": 88693008, "body": "@DOUGLASO.MOEN Idea of using heap is because I need to access the structure in some other function after a timer expires ( max 25 secs)."}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1528916361, "post_id": 50844311, "comment_id": 88692271, "body": "That really looks like C code <code>typedef struct</code>, but it can&#39;t be  since it has <code>std::vector</code>! I can&#39;t make sense of this question."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 9, "user_id": 4213126, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vXU54cpFtYA/AAAAAAAAAAI/AAAAAAAAAGw/Ypx4YvIcgDk/photo.jpg?sz=128", "display_name": "Saurabh Suman", "link": "https://stackoverflow.com/users/4213126/saurabh-suman"}, "edited": false, "score": 0, "creation_date": 1528916620, "post_id": 50844311, "comment_id": 88692389, "body": "@SaurabhSuman Glad I could help.  Feel free to <a href=\"https://stackoverflow.com/help/accepted-answer\">accept this answer</a> if you found it useful."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1528917393, "post_id": 50844311, "comment_id": 88692769, "body": "If the <code>struct</code> at all needs to be <code>malloc</code>&#39;d you can malloc it and then make the address into a vector using the <code>new</code> operator (the version that takes an address also as parameter)."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1528915903, "creation_date": 1528915903, "answer_id": 50844311, "question_id": 50844234, "link": "https://stackoverflow.com/questions/50844234/stdvector-inside-a-c-structure/50844311#50844311", "title": "std::vector inside a C structure", "body": "<p>Because you used <code>malloc</code> to allocate the memory instead of <code>new</code>, the constructor for <code>std::vector</code> was never called, and thus it was never properly initialized.</p>\n\n<p>Always use <code>new</code>:</p>\n\n<pre><code>route_timer_info_t *route_timer = new route_timer_info_t;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "is_accepted": false, "score": 0, "last_activity_date": 1528917483, "last_edit_date": 1528917483, "creation_date": 1528917087, "answer_id": 50844623, "question_id": 50844234, "link": "https://stackoverflow.com/questions/50844234/stdvector-inside-a-c-structure/50844623#50844623", "title": "std::vector inside a C structure", "body": "<p>Malloc only allocates a blob of memory, this is uninitiated. For C code, this is often a member. In C++, there is the concept of a constructor.</p>\n\n<p>Each class and struct gets this by default and it should be optimized in the best way by the compiler.\nCalling it happens implicitly when constructing the instance on the stack or by using the new operator.</p>\n\n<p>In some special cases, you like to allocate memory in front and construct later. (std::vector does so) You can do so:</p>\n\n<pre><code>auto validPtr = new (&amp;route_timer-&gt;mcast_addr_list)   std::vector&lt;sockaddr_union&gt;();\n</code></pre>\n\n<p>Much better is off course to simply call new directly:</p>\n\n<pre><code>new route_timer_info_t();\n</code></pre>\n\n<p>To ensure that all members are initialized to a known value, I would recommend to initialize all members explicitly:</p>\n\n<pre><code>struct _route_timer_info_t {\n    task_timer * withdraw_timer{nullptr};\n    std::vector&lt;sockaddr_union&gt; mcast_addr_list{};\n    uint32_t route_block_id{0};\n    uint32_t bgp_device_id{0};\n};\n</code></pre>\n\n<p>To make the story complete, from C++14, it is not recommend any more to call new directly, instead you can create a unique pointer directly via:</p>\n\n<pre><code> std::make_unique&lt;route_timer_info_t&gt;();\n</code></pre>\n\n<p>In all of these cases, including your original example, the struct ain't compatible with C.</p>\n"}, {"comments": [{"owner": {"reputation": 557, "user_id": 1208309, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b555c0da3f8d7f57bd597d99b3e1ac4b?s=128&d=identicon&r=PG", "display_name": "Superziyi", "link": "https://stackoverflow.com/users/1208309/superziyi"}, "edited": false, "score": 0, "creation_date": 1587608181, "post_id": 50844809, "comment_id": 108580460, "body": "How do I call the destructor for this? I&#39;ve had a hard time figuring it out..."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 557, "user_id": 1208309, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b555c0da3f8d7f57bd597d99b3e1ac4b?s=128&d=identicon&r=PG", "display_name": "Superziyi", "link": "https://stackoverflow.com/users/1208309/superziyi"}, "edited": false, "score": 0, "creation_date": 1587610973, "post_id": 50844809, "comment_id": 108581036, "body": "@Superziyi this answer describes how the destructor for a custom allocated object can be called without free&#39;ing (and the memory free&#39;d later) - <a href=\"https://stackoverflow.com/a/14187068/2858773\">stackoverflow.com/a/14187068/2858773</a>"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 557, "user_id": 1208309, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b555c0da3f8d7f57bd597d99b3e1ac4b?s=128&d=identicon&r=PG", "display_name": "Superziyi", "link": "https://stackoverflow.com/users/1208309/superziyi"}, "edited": false, "score": 0, "creation_date": 1587611076, "post_id": 50844809, "comment_id": 108581069, "body": "So in this case you could call it as - <code>route_timer-&gt;mcast_addr_list.~std::vector&lt;sockaddr_union&gt;();</code>"}, {"owner": {"reputation": 557, "user_id": 1208309, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b555c0da3f8d7f57bd597d99b3e1ac4b?s=128&d=identicon&r=PG", "display_name": "Superziyi", "link": "https://stackoverflow.com/users/1208309/superziyi"}, "edited": false, "score": 0, "creation_date": 1587611987, "post_id": 50844809, "comment_id": 108581284, "body": "yeah I always get <code>&#39;~&#39; in destructor name should be after nested name specifier</code>/<code>expected class-name before \u2018::\u2019 token</code> error if I do that. Somehow calling <code>route_timer-&gt;mcast_addr_list.vector::~vector()</code> compiles instead."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 557, "user_id": 1208309, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b555c0da3f8d7f57bd597d99b3e1ac4b?s=128&d=identicon&r=PG", "display_name": "Superziyi", "link": "https://stackoverflow.com/users/1208309/superziyi"}, "edited": false, "score": 1, "creation_date": 1587613294, "post_id": 50844809, "comment_id": 108581567, "body": "@Superziyi so sorry about that. You can also actually skip the name space entirely and the class name as - <code>route_timer-&gt;mcast_addr_list.~vector()</code>"}, {"owner": {"reputation": 557, "user_id": 1208309, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b555c0da3f8d7f57bd597d99b3e1ac4b?s=128&d=identicon&r=PG", "display_name": "Superziyi", "link": "https://stackoverflow.com/users/1208309/superziyi"}, "edited": false, "score": 0, "creation_date": 1587615422, "post_id": 50844809, "comment_id": 108582047, "body": "Thanks! Yeah it&#39;s interesting so ~vector() is actually the destructor name that doesn&#39;t need std namespace"}], "tags": [], "owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "is_accepted": false, "score": 0, "last_activity_date": 1528918415, "last_edit_date": 1528918415, "creation_date": 1528917852, "answer_id": 50844809, "question_id": 50844234, "link": "https://stackoverflow.com/questions/50844234/stdvector-inside-a-c-structure/50844809#50844809", "title": "std::vector inside a C structure", "body": "<p>As mentioned in the other answers, the main problem is because the object is not \"constructed\". The mentioned solutions to call the <code>new</code> operator on the <code>struct</code> itself are valid. But for some reason if the <code>struct</code> needs to be <code>malloc</code>'d or it is not in your control, you can construct the object explicitly at that memory using <code>new</code> operator. See the third form <a href=\"http://www.cplusplus.com/reference/new/operator%20new/\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>You can construct the vector as - </p>\n\n<pre><code>new (&amp;(route_timer-&gt;mcast_addr_list)) std::vector&lt;sockaddr_union&gt;;\n</code></pre>\n\n<p>You can now use the vector as if it was actually created using the <code>new</code> operator. </p>\n"}], "owner": {"reputation": 9, "user_id": 4213126, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vXU54cpFtYA/AAAAAAAAAAI/AAAAAAAAAGw/Ypx4YvIcgDk/photo.jpg?sz=128", "display_name": "Saurabh Suman", "link": "https://stackoverflow.com/users/4213126/saurabh-suman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 221, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1528918415, "creation_date": 1528915660, "last_edit_date": 1528917098, "question_id": 50844234, "link": "https://stackoverflow.com/questions/50844234/stdvector-inside-a-c-structure", "title": "std::vector inside a C structure", "body": "<pre><code>typedef struct _route_timer_info_t {\n    task_timer * withdraw_timer;\n    std::vector&lt;sockaddr_union&gt; mcast_addr_list;\n    uint32_t route_block_id;\n    uint32_t bgp_device_id;\n}route_timer_info_t;\n</code></pre>\n\n<p>I have the above structure in my Code. I have taken a pointer to the above structure and allocated memory from heap.</p>\n\n<pre><code>route_timer_info_t *route_timer=(route_timer_info_t *)malloc(sizeof(route_timer_info_t));\n</code></pre>\n\n<p>Now to populate the vector, I am doing </p>\n\n<pre><code>route_timer-&gt;mcast_addr_list.push_back(some_item)\n</code></pre>\n\n<p>In the first run size of the vector is coming correct - as many, I am pushing, but when in 2nd run when the whole structure is allocated memory,the size of vector is coming some big garbage value. What could be going wrong? I have tried clearing the vector as well but no help.</p>\n"}, {"tags": ["c++", "winapi", "controls"], "comments": [{"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1528915685, "post_id": 50844077, "comment_id": 88691941, "body": "Similar <a href=\"https://stackoverflow.com/questions/7539711/c-wm-nccalcsize-not-being-sent\">question</a>."}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1528920121, "post_id": 50844077, "comment_id": 88694187, "body": "I suggest to learn from the existing solutions for this kind of problem, e. g. <a href=\"https://www.codeguru.com/cpp/w-d/dislog/miscellaneous/article.php/c8729/XP-Theme-Support-for-Rich-Edit-and-Custom-Controls.htm\" rel=\"nofollow noreferrer\">XP Theme Support for Rich Edit and Custom Controls</a>."}], "answers": [{"tags": [], "owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "is_accepted": false, "score": 0, "last_activity_date": 1528918750, "creation_date": 1528918750, "answer_id": 50845009, "question_id": 50844077, "link": "https://stackoverflow.com/questions/50844077/why-is-wm-nccalsize-is-not-called-after-the-size-of-winapi-control-is-changed/50845009#50845009", "title": "Why is WM_NCCALSIZE is not called after the size of WinAPI control is changed?", "body": "<p>If you want to do things when a control is resized, you should be catching <code>WM_SIZE</code>, not <code>WM_NCCALCSIZE</code>.</p>\n\n<p>The purpose of <code>WM_NCCALCSIZE</code> is to allow (for example) a captioned window to recalculate the size of its client area when the height of the caption bar changes. (Users can adjust this through the control panel, or at least they used to.)  I would expect <code>WM_NCCALCSIZE</code> to be sent when the control is created though, bit of a mystery that.</p>\n\n<p>WM_SIZE is fully documented at <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms632646%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\">MSDN</a>.</p>\n\n<p>Also: I don't see you actually resizing that control anywhere in your code...</p>\n"}, {"tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": false, "score": 0, "last_activity_date": 1528919385, "creation_date": 1528919385, "answer_id": 50845167, "question_id": 50844077, "link": "https://stackoverflow.com/questions/50844077/why-is-wm-nccalsize-is-not-called-after-the-size-of-winapi-control-is-changed/50845167#50845167", "title": "Why is WM_NCCALSIZE is not called after the size of WinAPI control is changed?", "body": "<p>If you insist on using WM_NCCALCSIZE you should be able to force it with SetWindowPos by specifying the SWP_FRAMECHANGED flag.</p>\n"}, {"tags": [], "owner": {"reputation": 925, "user_id": 1480966, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/qYC9t.jpg?s=128&g=1", "display_name": "krsi", "link": "https://stackoverflow.com/users/1480966/krsi"}, "is_accepted": false, "score": 0, "last_activity_date": 1528924266, "creation_date": 1528924266, "answer_id": 50846337, "question_id": 50844077, "link": "https://stackoverflow.com/questions/50844077/why-is-wm-nccalsize-is-not-called-after-the-size-of-winapi-control-is-changed/50846337#50846337", "title": "Why is WM_NCCALSIZE is not called after the size of WinAPI control is changed?", "body": "<p><code>WM_NCCALSIZE</code> message was handled the wrong way. Instead of setting the coordinates of new client rectangle to the <code>rgrc[0]</code> rectangle of <code>NCCALCSIZE_PARAMS</code>, only increment/decrement relative to the control's total bounds should be set. Those increment/decrement values specify the size of the non-client area, i.e. the margins of the client area.</p>\n\n<p>After the control's size is changed, the size of client area is automatically adjusted relative to the new control's bounds.</p>\n\n<p>For example, this code sets the client area with top/bottom margins of <code>3 px</code> and left/right margins of <code>50 px</code>.</p>\n\n<pre><code>#include &lt;windows.h&gt;\n#include &lt;commctrl.h&gt;\n#include &lt;richedit.h&gt;\n#include &lt;string&gt;\n\n#pragma comment(lib, \"comctl32.lib\")\n#pragma comment(linker,\"\\\"/manifestdependency:type='win32' \\\n    name='Microsoft.Windows.Common-Controls' version='6.0.0.0' \\\n    processorArchitecture='*' publicKeyToken='6595b64144ccf1df' language='*'\\\"\")\n\nLRESULT CALLBACK WindowProc(HWND, UINT, WPARAM, LPARAM);\nLRESULT CALLBACK RichEditProc(HWND, UINT, WPARAM, LPARAM);\n\nWNDPROC richEditOrigProc;\n\nint WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow)\n{\n    LoadLibrary(TEXT(\"msftedit.dll\"));\n\n    WNDCLASSEX mainwcex;\n    mainwcex.cbSize = sizeof(WNDCLASSEX);\n    mainwcex.style = CS_HREDRAW | CS_VREDRAW;\n    mainwcex.lpfnWndProc = WindowProc;\n    mainwcex.cbClsExtra = 0;\n    mainwcex.cbWndExtra = 0;\n    mainwcex.hInstance = hInstance;\n    mainwcex.hIcon = NULL;\n    mainwcex.hCursor = (HICON)LoadCursor(NULL, IDC_ARROW);\n    mainwcex.hbrBackground = GetSysColorBrush(COLOR_MENU);\n    mainwcex.lpszMenuName = NULL;\n    mainwcex.lpszClassName = \"mainwindow\";\n    mainwcex.hIconSm = NULL;\n\n    RegisterClassEx(&amp;mainwcex);\n\n    HWND mainWindow = CreateWindowEx(\n        NULL,\n        \"mainwindow\",\n        NULL,\n        WS_OVERLAPPEDWINDOW,\n        100,\n        100,\n        600,\n        400,\n        NULL,\n        NULL,\n        hInstance,\n        NULL);\n\n    HWND richEditControl = CreateWindowEx(\n        NULL,\n        \"RICHEDIT50W\",\n        \"Rich Edit\",\n        WS_CHILD | WS_VISIBLE | WS_BORDER | WS_TABSTOP,\n        50,\n        50,\n        100,\n        25,\n        mainWindow,\n        NULL,\n        hInstance,\n        NULL);\n\n    richEditOrigProc = (WNDPROC) SetWindowLongPtr(richEditControl, GWLP_WNDPROC, (LONG_PTR) RichEditProc);\n\n    // Changes the width of rich edit control from 100 px to 400 px.\n    SetWindowPos(richEditControl, NULL, 0, 0, 400, 25,\n        SWP_NOMOVE | SWP_NOZORDER | SWP_NOOWNERZORDER | SWP_NOACTIVATE);\n\n    ShowWindow(mainWindow, nCmdShow);\n\n    MSG msg;\n    while (GetMessage(&amp;msg, NULL, 0, 0)) {\n        if (!IsDialogMessage(mainWindow, &amp;msg)) {\n            TranslateMessage(&amp;msg);\n            DispatchMessage(&amp;msg);\n        }\n    }\n    return static_cast&lt;int&gt;(msg.wParam);\n}\n\nLRESULT CALLBACK WindowProc(HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam)\n{\n    switch (uMsg) {\n        case WM_DESTROY:\n        {\n            PostQuitMessage(0);\n            return 0;\n        }\n    }\n    return DefWindowProc(hWnd, uMsg, wParam, lParam);\n}\n\nLRESULT CALLBACK RichEditProc(HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam)\n{\n    switch (uMsg) {\n        case WM_NCCALCSIZE:\n        {\n            if (wParam) {\n                NCCALCSIZE_PARAMS* ncParams = reinterpret_cast&lt;NCCALCSIZE_PARAMS*&gt;(lParam);\n                ncParams-&gt;rgrc[0].left += 50;\n                ncParams-&gt;rgrc[0].top += 3;\n                ncParams-&gt;rgrc[0].right -= 50;\n                ncParams-&gt;rgrc[0].bottom -= 3;\n                return WVR_HREDRAW;\n            }\n            return 0;\n        }\n    }\n    return CallWindowProc(richEditOrigProc, hWnd, uMsg, wParam, lParam);\n}\n</code></pre>\n"}], "owner": {"reputation": 925, "user_id": 1480966, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/qYC9t.jpg?s=128&g=1", "display_name": "krsi", "link": "https://stackoverflow.com/users/1480966/krsi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 344, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1528924266, "creation_date": 1528915012, "question_id": 50844077, "link": "https://stackoverflow.com/questions/50844077/why-is-wm-nccalsize-is-not-called-after-the-size-of-winapi-control-is-changed", "title": "Why is WM_NCCALSIZE is not called after the size of WinAPI control is changed?", "body": "<p>I have a rich edit control who's size is changed after it is created. </p>\n\n<p>I want to customize the control's appearance, so I need to recalculate the size of its client area each time the size of the control is changed. Idea was to change the size of the client area each time the component receives <code>WM_NCCALCSIZE</code> message, since MSDN documentation for <code>WM_NCCALCSIZE</code> states: </p>\n\n<blockquote>\n  <p>Sent when the size and position of a window's client area must be calculated. By processing this message, an application can control the content of the window's client area when the size or position of the window changes.</p>\n</blockquote>\n\n<p>Problem is that the <code>WM_NCCALCSIZE</code> is not called after the size of the control is changed (It is called only once when the control is created).</p>\n\n<p>This behavior is not specific to rich edit control. The same is true, e.g. for button controls. It also doesn't matter whether the size is changed before or after the component is shown on the screen.</p>\n\n<pre><code>#include &lt;windows.h&gt;\n#include &lt;commctrl.h&gt;\n#include &lt;richedit.h&gt;\n#include &lt;string&gt;\n\n#pragma comment(lib, \"comctl32.lib\")\n#pragma comment(linker,\"\\\"/manifestdependency:type='win32' \\\n    name='Microsoft.Windows.Common-Controls' version='6.0.0.0' \\\n    processorArchitecture='*' publicKeyToken='6595b64144ccf1df' language='*'\\\"\")\n\nLRESULT CALLBACK WindowProc(HWND, UINT, WPARAM, LPARAM);\nLRESULT CALLBACK RichEditProc(HWND, UINT, WPARAM, LPARAM);\n\nWNDPROC richEditOrigProc;\n\nint WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow)\n{\n    LoadLibrary(TEXT(\"msftedit.dll\"));\n\n    WNDCLASSEX mainwcex;\n    mainwcex.cbSize = sizeof(WNDCLASSEX);\n    mainwcex.style = CS_HREDRAW | CS_VREDRAW;\n    mainwcex.lpfnWndProc = WindowProc;\n    mainwcex.cbClsExtra = 0;\n    mainwcex.cbWndExtra = 0;\n    mainwcex.hInstance = hInstance;\n    mainwcex.hIcon = NULL;\n    mainwcex.hCursor = (HICON)LoadCursor(NULL, IDC_ARROW);\n    mainwcex.hbrBackground = GetSysColorBrush(COLOR_MENU);\n    mainwcex.lpszMenuName = NULL;\n    mainwcex.lpszClassName = \"mainwindow\";\n    mainwcex.hIconSm = NULL;\n\n    RegisterClassEx(&amp;mainwcex);\n\n    HWND mainWindow = CreateWindowEx(\n        NULL,\n        \"mainwindow\",\n        NULL,\n        WS_OVERLAPPEDWINDOW,\n        100,\n        100,\n        600,\n        400,\n        NULL,\n        NULL,\n        hInstance,\n        NULL);\n\n    HWND richEditControl = CreateWindowEx(\n        NULL,\n        \"RICHEDIT50W\",\n        \"Rich Edit\",\n        WS_CHILD | WS_VISIBLE | WS_BORDER | WS_TABSTOP,\n        50,\n        50,\n        100,\n        25,\n        mainWindow,\n        NULL,\n        hInstance,\n        NULL);\n\n    richEditOrigProc = (WNDPROC) SetWindowLongPtr(richEditControl, GWLP_WNDPROC, (LONG_PTR) RichEditProc);\n\n    // Changes the width of rich edit control from 100 px to 400 px.\n    SetWindowPos(richEditControl, NULL, 0, 0, 400, 25,\n        SWP_NOMOVE | SWP_NOZORDER | SWP_NOOWNERZORDER | SWP_NOACTIVATE);\n\n    ShowWindow(mainWindow, nCmdShow);\n\n    MSG msg;\n    while (GetMessage(&amp;msg, NULL, 0, 0)) {\n        if (!IsDialogMessage(mainWindow, &amp;msg)) {\n            TranslateMessage(&amp;msg);\n            DispatchMessage(&amp;msg);\n        }\n    }\n    return static_cast&lt;int&gt;(msg.wParam);\n}\n\nLRESULT CALLBACK WindowProc(HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam)\n{\n    switch (uMsg) {\n        case WM_DESTROY:\n        {\n            PostQuitMessage(0);\n            return 0;\n        }\n    }\n    return DefWindowProc(hWnd, uMsg, wParam, lParam);\n}\n\nLRESULT CALLBACK RichEditProc(HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam)\n{\n    switch (uMsg) {\n        case WM_NCCALCSIZE:\n        {\n            RECT newClientRect;\n            GetWindowRect(hWnd, &amp;newClientRect);\n            MapWindowPoints(HWND_DESKTOP, GetParent(hWnd), reinterpret_cast&lt;POINT*&gt;(&amp;newClientRect), 2);\n            InflateRect(&amp;newClientRect, -3, -3);\n            int width = newClientRect.right - newClientRect.left;\n            int height = newClientRect.bottom - newClientRect.top;\n            if (wParam) {\n                NCCALCSIZE_PARAMS* ncParams = reinterpret_cast&lt;NCCALCSIZE_PARAMS*&gt;(lParam);\n                ncParams-&gt;rgrc[0].left = newClientRect.left;\n                ncParams-&gt;rgrc[0].top = newClientRect.top;\n                ncParams-&gt;rgrc[0].right = newClientRect.right;\n                ncParams-&gt;rgrc[0].bottom = newClientRect.bottom;\n                return WVR_HREDRAW;\n            }\n            return 0;\n        }\n    }\n    return CallWindowProc(richEditOrigProc, hWnd, uMsg, wParam, lParam);\n}\n</code></pre>\n\n<p>In this example, it is evident that while the total size of the rich edit control is changed, it's client area is not recalculated and corresponds to its initial size.</p>\n\n<p>What is the correct way to resize the client area of custom control, to reflect the change in its total size.</p>\n"}, {"tags": ["c++", "sdl"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 3, "creation_date": 1528915138, "post_id": 50844073, "comment_id": 88691679, "body": "<b><i>I don&#39;t have mingw32 library, where can I get it?</i></b> You don&#39;t want it. Correct your makefile  / project file not to use it."}], "answers": [{"tags": [], "owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "is_accepted": true, "score": 3, "last_activity_date": 1528915252, "creation_date": 1528915252, "answer_id": 50844129, "question_id": 50844073, "link": "https://stackoverflow.com/questions/50844073/c-sdl2-ldcannot-find-lmingw32/50844129#50844129", "title": "c++ SDL2 - ld||cannot find -lmingw32|", "body": "<p><a href=\"https://wiki.libsdl.org/Installation\" rel=\"nofollow noreferrer\">Read the manual</a>.</p>\n\n<p>On linux you don't need <code>-lmingw32</code>. Instead, use</p>\n\n<pre><code>`sdl2-config --libs`\n</code></pre>\n\n<p>to get the list of all needed linker flags.</p>\n\n<p>Example usage:</p>\n\n<pre><code>gcc -o myprogram myprogram.o `sdl2-config --libs`\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 34, "user_id": 9937735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88431fd82480422c9686c3b72349d879?s=128&d=identicon&r=PG&f=1", "display_name": "Atom", "link": "https://stackoverflow.com/users/9937735/atom"}, "is_accepted": false, "score": 0, "last_activity_date": 1529087217, "last_edit_date": 1529087217, "creation_date": 1528923685, "answer_id": 50846219, "question_id": 50844073, "link": "https://stackoverflow.com/questions/50844073/c-sdl2-ldcannot-find-lmingw32/50846219#50846219", "title": "c++ SDL2 - ld||cannot find -lmingw32|", "body": "<p>Problem was solved by removing linker on mingw32 and lib rotozoom.h.</p>\n"}], "owner": {"reputation": 34, "user_id": 9937735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88431fd82480422c9686c3b72349d879?s=128&d=identicon&r=PG&f=1", "display_name": "Atom", "link": "https://stackoverflow.com/users/9937735/atom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 401, "favorite_count": 0, "accepted_answer_id": 50844129, "answer_count": 2, "score": 0, "last_activity_date": 1529087217, "creation_date": 1528914995, "question_id": 50844073, "link": "https://stackoverflow.com/questions/50844073/c-sdl2-ldcannot-find-lmingw32", "title": "c++ SDL2 - ld||cannot find -lmingw32|", "body": "<p>I was creating program on windows with SDL2 and the program worked fine, but when I changed my os to linux mint (and install code::blocks, gcc, g++, SDL2), I run into troubles with compiling my code.</p>\n\n<p>I have one error:</p>\n\n<pre><code> - ld||cannot find -lmingw32|\n</code></pre>\n\n<p>I guess that I don't have mingw32 library, where can I get it? Or is the problem diferent?</p>\n\n<p>BTW: I also tryed to google it.</p>\n\n<p>Thank for response.</p>\n"}, {"tags": ["c++", "windows"], "comments": [{"owner": {"reputation": 3577, "user_id": 2176813, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Nv7lK.jpg?s=128&g=1", "display_name": "tambre", "link": "https://stackoverflow.com/users/2176813/tambre"}, "edited": false, "score": 0, "creation_date": 1528914798, "post_id": 50843939, "comment_id": 88691508, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/47226240/msvc-osversion-returning-incorrect-version\">MSVC OSVersion returning incorrect version</a>"}, {"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1528915907, "post_id": 50843939, "comment_id": 88692064, "body": "Is this a 32 bit app on 64 bit Windows by any chance?"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 2, "creation_date": 1528916270, "post_id": 50843939, "comment_id": 88692235, "body": "You are looking at the wrong registry key, navigate to HKLM/Software/Wow6432Node/etc.  <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa384232(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1528916923, "post_id": 50843939, "comment_id": 88692533, "body": "Why are you using the Registry at all? There are several Win32 API functions that can return the OS version number directly. <code>GetVersionEx()</code> (which requires manifestation on Windows 8.1+), or <code>RtlGetVersion()</code>, <code>NetServerGetInfo()</code>, or <code>NetWkstaGetInfo()</code> (all of which do not require any manifestation)."}, {"owner": {"reputation": 86, "user_id": 9506093, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c78ced721600583e65a7bdb6d538ae38?s=128&d=identicon&r=PG&f=1", "display_name": "fmcgarry", "link": "https://stackoverflow.com/users/9506093/fmcgarry"}, "reply_to_user": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1528916996, "post_id": 50843939, "comment_id": 88692560, "body": "@MrEricSir Yes, it is. When I changed my configuration to 64 bit, I got the correct version. Why is that?"}, {"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1528917118, "post_id": 50843939, "comment_id": 88692624, "body": "@fmcgarry See what Hans Passant commented above -- your program is in WOW64 mode, so it&#39;s reading from a different registry key. As to <i>why</i> the value there is different, I have no idea. Would be interesting to test on a clean Windows 10 Pro installation to see if this is a bug."}, {"owner": {"reputation": 86, "user_id": 9506093, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c78ced721600583e65a7bdb6d538ae38?s=128&d=identicon&r=PG&f=1", "display_name": "fmcgarry", "link": "https://stackoverflow.com/users/9506093/fmcgarry"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1528917823, "post_id": 50843939, "comment_id": 88692975, "body": "@HansPassant When I navigate to where you directed me in Regedit I see that it&#39;s showing Windows 10 Enterprise, so that is indeed where it&#39;s coming from. As to <i>why</i> it&#39;s like that I have no idea either. I must have done it on installation somehow, because I checked another Windows Pro PC and in both registry locations it reports the correct version. Thanks everyone!"}], "owner": {"reputation": 86, "user_id": 9506093, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c78ced721600583e65a7bdb6d538ae38?s=128&d=identicon&r=PG&f=1", "display_name": "fmcgarry", "link": "https://stackoverflow.com/users/9506093/fmcgarry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 126, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1528915746, "creation_date": 1528914530, "last_edit_date": 1592644375, "question_id": 50843939, "link": "https://stackoverflow.com/questions/50843939/c-reggetvalue-function-not-returning-correct-windows-os-version", "title": "C++ RegGetValue function not returning correct Windows OS Version", "body": "<p>I'm using the below code in a console application to get my Windows OS version:</p>\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;Windows.h&gt;\n\nint main()\n{\n  DWORD dataSize = 0;\n  char buffer[256];\n  dataSize = sizeof(buffer);\n\n  RegGetValueA(HKEY_LOCAL_MACHINE, &quot;SOFTWARE\\\\Microsoft\\\\Windows NT\\\\CurrentVersion&quot;, \n   &quot;ProductName&quot;, RRF_RT_REG_SZ, 0, &amp;buffer, &amp;dataSize);\n\n  cout &lt;&lt; buffer &lt;&lt; endl;\n  return 0;\n}\n</code></pre>\n<p>I have Windows 10 Pro installed, but the function is returning Windows 10 Enterprise. I have even manually navigated using regedit to the specified key and under &quot;Product Name&quot; I can see Windows 10 Pro. <a href=\"https://i.stack.imgur.com/DmBIG.png\" rel=\"nofollow noreferrer\">Here is an image of my regedit.</a></p>\n<p>I ran another function <code>RtlGetProductInfo(10, 0, 0, 0, f);</code> and it returned the value of 0x48 for f, which according to <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms724358(v=vs.85).aspx\" rel=\"nofollow noreferrer\">Microsoft</a> I have Windows 10 Enterprise Evaluation.</p>\n<p>Now, at this point, I understand that something is messed up with my Windows installation, but why would my first code return another value than what is displayed for <code>&quot;ProductName&quot;</code> in my registry editor?</p>\n<p><strong>Edit:</strong> I should add that I've run the code on another Windows PC and it returns the correct version on that computer.</p>\n"}, {"tags": ["c++", "unit-testing", "googletest"], "answers": [{"tags": [], "owner": {"reputation": 292, "user_id": 9927133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a053d1326f4980e131009a6493f79200?s=128&d=identicon&r=PG&f=1", "display_name": "mkamerath", "link": "https://stackoverflow.com/users/9927133/mkamerath"}, "is_accepted": true, "score": 8, "last_activity_date": 1528918475, "creation_date": 1528918475, "answer_id": 50844945, "question_id": 50843846, "link": "https://stackoverflow.com/questions/50843846/gtest-report-index-variable-for-loop-with-expect-eq/50844945#50844945", "title": "gtest - Report index variable for loop with EXPECT_EQ", "body": "<p>From <a href=\"https://github.com/google/googletest/blob/master/googletest/docs/primer.md\" rel=\"noreferrer\">https://github.com/google/googletest/blob/master/googletest/docs/primer.md</a>:</p>\n\n<p>\"To provide a custom failure message, simply stream it into the macro using the &lt;&lt; operator, or a sequence of such operators.\"</p>\n\n<p>So if you wanted to output what your index is for the expect equal, you would do something like:</p>\n\n<pre><code>EXPECT_EQ(\n  sqrt(pow(a.real[x], 2) + pow(a.imag[x], 2)),\n  sqrt(pow(b.real[x], 2) + pow(b.imag[x], 2))) &lt;&lt; \"x is : \" &lt;&lt; x &lt;&lt; std::endl;\n</code></pre>\n"}], "owner": {"reputation": 1140, "user_id": 2383730, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/giP28.jpg?s=128&g=1", "display_name": "TallBrian", "link": "https://stackoverflow.com/users/2383730/tallbrian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 972, "favorite_count": 0, "accepted_answer_id": 50844945, "answer_count": 1, "score": 5, "last_activity_date": 1528918475, "creation_date": 1528914181, "question_id": 50843846, "link": "https://stackoverflow.com/questions/50843846/gtest-report-index-variable-for-loop-with-expect-eq", "title": "gtest - Report index variable for loop with EXPECT_EQ", "body": "<p>I am using gtest but I am new to gtest.  I would like to do compares of values within two std::vectors of complex data structures.  I want to do something like this:</p>\n\n<pre><code>ASSERT_EQ(a.size(), b.size());\n\nfor (int x = 0; x &lt; a.size(); x++) {\n  EXPECT_EQ(\n    sqrt(pow(a.real[x], 2) + pow(a.imag[x], 2)),\n    sqrt(pow(b.real[x], 2) + pow(b.imag[x], 2)));\n}\n</code></pre>\n\n<p>This is great in that for mismatches it reports the values that were compared, e.g. 5 != 7, but it does not report the index variable \"x\".  Is there some way I can easily output the index variable when mismatch is detected?</p>\n"}, {"tags": ["c++", "makefile", "arm", "atmel", "eabi"], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 9933384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91c4df51a0651d5cfb24472e9ad7c948?s=128&d=identicon&r=PG&f=1", "display_name": "House Targaryen", "link": "https://stackoverflow.com/users/9933384/house-targaryen"}, "edited": false, "score": 0, "creation_date": 1528920588, "post_id": 50844650, "comment_id": 88694434, "body": "Hi @Frant, thanks so much for the response. You make a great point. The mention of &quot;binary&quot; is from legacy code, I&#39;m really not sure the signifigance. However, I tried your change but it did not work. Note, my $(TARGET) is something like /mcu/obj/firmware.elf. Historically with gcc, this has worked as is and I have been ending up with both .bin and .elf files. Because it has worked with pure gcc, I&#39;m really concerned that I&#39;m doing something incorrect in the two sections defining %.o: %.c and %.o: %.cpp."}, {"owner": {"reputation": 3543, "user_id": 4017881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe8b3f2a230655ae601b95f7e490d507?s=128&d=identicon&r=PG", "display_name": "Frant", "link": "https://stackoverflow.com/users/4017881/frant"}, "reply_to_user": {"reputation": 49, "user_id": 9933384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91c4df51a0651d5cfb24472e9ad7c948?s=128&d=identicon&r=PG&f=1", "display_name": "House Targaryen", "link": "https://stackoverflow.com/users/9933384/house-targaryen"}, "edited": false, "score": 0, "creation_date": 1528921357, "post_id": 50844650, "comment_id": 88694831, "body": "How did it not work exactly ?did you get a .ihex file ? Did you get a different error message from your programming software ? Was the content of the flash different from expected ? any other hints ?"}, {"owner": {"reputation": 49, "user_id": 9933384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91c4df51a0651d5cfb24472e9ad7c948?s=128&d=identicon&r=PG&f=1", "display_name": "House Targaryen", "link": "https://stackoverflow.com/users/9933384/house-targaryen"}, "edited": false, "score": 0, "creation_date": 1528923579, "post_id": 50844650, "comment_id": 88695882, "body": "It did in fact generate a .ihex file, as well as the target .elf file. When attempting to flash the iHex file through atmel studio and the Atmel ICE programmer/debugger, the error was &quot;file contents does not map to any valid device memory for programming the flash&quot;. I know it said it needed an iHex, but in the past I have successfully flashed .elf, .bin, and .bin using just c or just c++. This feels like an issue with linking files because the data in the output is so sparse. Do you think it has something to do with trying to use gcc and g++ in one makefile?"}, {"owner": {"reputation": 49, "user_id": 9933384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91c4df51a0651d5cfb24472e9ad7c948?s=128&d=identicon&r=PG&f=1", "display_name": "House Targaryen", "link": "https://stackoverflow.com/users/9933384/house-targaryen"}, "edited": false, "score": 0, "creation_date": 1528923615, "post_id": 50844650, "comment_id": 88695898, "body": "Oh, I forgot add, yes the content of the iHex file was different. It was all of 10 bytes this time, really not sure what that means."}], "tags": [], "owner": {"reputation": 3543, "user_id": 4017881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe8b3f2a230655ae601b95f7e490d507?s=128&d=identicon&r=PG", "display_name": "Frant", "link": "https://stackoverflow.com/users/4017881/frant"}, "is_accepted": false, "score": 0, "last_activity_date": 1528917973, "last_edit_date": 1528917973, "creation_date": 1528917228, "answer_id": 50844650, "question_id": 50843620, "link": "https://stackoverflow.com/questions/50843620/cannot-flash-arm-device-the-intel-hex-file-does-not-start-with/50844650#50844650", "title": "Cannot flash ARM device - &quot;The Intel Hex file does not start with &#39;:&#39;&quot;", "body": "<ul>\n<li>From the error message you are getting, your programming tool is expecting a file in Intel Hex format.</li>\n<li>The file you are providing a hexadecimal dump of  cannot be a file in Intel Hex format, since this format uses the ASCII encoding.</li>\n<li><p>The screen shots you provided are those of a file in ELF format:\nthe first bytes are:</p>\n\n<p>00000000  7f 45 4c 46 02 01 01 00  00 00 00 00 00 00 00 00  |.ELF............|\n<br/><br/> </p></li>\n<li><p>Your make file seems to be producing a binary file, while you need a\nfile in Intel Hex format:</p></li>\n</ul>\n\n<blockquote>\n  <p>$(TOOLCHAIN)-objcopy -O binary $@ $(basename $@).bin</p>\n</blockquote>\n\n<p>You therefore probably need to add the following line right after the one above:<br/></p>\n\n<blockquote>\n  <p>$(TOOLCHAIN)-objcopy -O ihex $@ $(basename $@).ihex</p>\n</blockquote>\n\n<p>The resulting file (.ihex) should be the one to be used with your programming tool.</p>\n"}, {"tags": [], "owner": {"reputation": 49, "user_id": 9933384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91c4df51a0651d5cfb24472e9ad7c948?s=128&d=identicon&r=PG&f=1", "display_name": "House Targaryen", "link": "https://stackoverflow.com/users/9933384/house-targaryen"}, "is_accepted": false, "score": 0, "last_activity_date": 1528928062, "creation_date": 1528928062, "answer_id": 50847039, "question_id": 50843620, "link": "https://stackoverflow.com/questions/50843620/cannot-flash-arm-device-the-intel-hex-file-does-not-start-with/50847039#50847039", "title": "Cannot flash ARM device - &quot;The Intel Hex file does not start with &#39;:&#39;&quot;", "body": "<p>It looks like the issue stemmed from incorrect flags. I know earlier I mentioned that it may be fair to assume the flags were correct. I no longer think that was true. After changing the flags (and updating some hardware specific files to recognize hard float abi's) it seems to be working. Thank you to everyone who helped me out.</p>\n"}], "owner": {"reputation": 49, "user_id": 9933384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91c4df51a0651d5cfb24472e9ad7c948?s=128&d=identicon&r=PG&f=1", "display_name": "House Targaryen", "link": "https://stackoverflow.com/users/9933384/house-targaryen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 521, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1528928062, "creation_date": 1528913295, "question_id": 50843620, "link": "https://stackoverflow.com/questions/50843620/cannot-flash-arm-device-the-intel-hex-file-does-not-start-with", "title": "Cannot flash ARM device - &quot;The Intel Hex file does not start with &#39;:&#39;&quot;", "body": "<p>I have a codebase that has been working fine with arm-none-eabi-gcc. I wanted to keep most of my source files in C while adding C++. I had some issues compiling this but finally seemed to successfully compile for my device (Atmel ATSAMG55).</p>\n\n<p>However, when I go to flash the device in Atmel studio, I get an error</p>\n\n<pre><code>The Intel Hex file does not start with ':'\n</code></pre>\n\n<p>Note, I'm just programming it through an Atmel ICE programmer/debugger and Atmel studio. I'm compiling through arm-none-eabi-gcc and arm-none-eabi-g++ and a custom make file.</p>\n\n<p>I opened up a hex viewer of my .hex output to find mostly 0x00000000 but a bit of \"real\" data at the beginning and end. Images below.</p>\n\n<p><a href=\"https://i.stack.imgur.com/FktkE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FktkE.png\" alt=\"Top of Hex File\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/38nkA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/38nkA.png\" alt=\"Bottom of Hex File\"></a></p>\n\n<p>Clearly, if the compile process occurred properly, it wouldn't be mostly 0x00000000. However, without any compiler errors I'm a bit stuck on where to start. Below is an excerpt of the \"core\" of my make file. </p>\n\n<pre><code>all: $(TARGET)\n\n\n# Create binary from object files and external libraries\n$(TARGET): $(OBJECTS_C) $(OBJECTS_CXX) $(S_SRCS)\n    @mkdir -p $(dir $@)\n    $(CXX) $(CXXFLAGS) $(C_INC) -T$(LDFILE) $(LFLAGS) -o $@\n    $(TOOLCHAIN)-objcopy -O binary $@ $(basename $@).bin\n\n\nout/$(PLATFORM_MCU)/obj/%.o: %.cpp\n    @mkdir -p $(dir $@)\n    $(CXX) $(CXXFLAGS) $(C_INC) -o $@ -c $&lt;\n\n-include $(DEP_CXX)\n\nout/$(PLATFORM_MCU)/obj/%.o: %.c\n    @mkdir -p $(dir $@)\n    $(CC) $(CFLAGS) $(C_INC) -o $@ -c $&lt;\n\n-include $(DEP_C)\n\n.PRECIOUS: $(PRECIOUS)\n\n\n.PHONY: all clean\n\n\nclean:\n    rm -rf $(CLEAN)\n</code></pre>\n\n<p>Most of what is above that is variable definition and setting flags. I'm relatively confident in that as this was working fine with pure C. It was only when I added the second set of object/source dependencies that I started having issues.</p>\n\n<p>Has anyone seen a compile issue like this and have any input on where to start debugging? Thank you!</p>\n"}, {"tags": ["c++", "opengl", "linker-errors", "glu"], "comments": [{"owner": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 0, "creation_date": 1528924634, "post_id": 50843607, "comment_id": 88696318, "body": "FWIW, GLU is obsolete."}, {"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1528927015, "post_id": 50843607, "comment_id": 88697238, "body": "Do you have the <code>libglu1-mesa-dev</code> and <code>libglu1-mesa</code> packages installed?  What&#39;s the output of <code>find &#47;usr | grep libGLU</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 9937321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/473fdc7090627821fa5383aec9b35e8c?s=128&d=identicon&r=PG&f=1", "display_name": "user9937321", "link": "https://stackoverflow.com/users/9937321/user9937321"}, "edited": false, "score": 0, "creation_date": 1528929059, "post_id": 50846872, "comment_id": 88697812, "body": "Thanks for the tip, Nathan. It did the trick!  Though...now attempting to run the actual example winds up with a <code>freeglut (.&#47;chap1ex1):  ERROR:  Internal error &lt;FBConfig with necessary capabilities not found&gt; in function fgOpenWindow</code>.  I&#39;m assuming this is a driver error? Any idea what steps I could take to solve this?"}, {"owner": {"reputation": 2898, "user_id": 938914, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VUHxs.jpg?s=128&g=1", "display_name": "Nathan Reed", "link": "https://stackoverflow.com/users/938914/nathan-reed"}, "reply_to_user": {"reputation": 13, "user_id": 9937321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/473fdc7090627821fa5383aec9b35e8c?s=128&d=identicon&r=PG&f=1", "display_name": "user9937321", "link": "https://stackoverflow.com/users/9937321/user9937321"}, "edited": false, "score": 0, "creation_date": 1528929570, "post_id": 50846872, "comment_id": 88697952, "body": "@user9937921 Yes, probably an issue with the graphics driver not being installed correctly or not getting activated. I&#39;m not very familiar with how to diagnose this stuff on Linux though. Google seems to have some results for that error."}, {"owner": {"reputation": 13, "user_id": 9937321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/473fdc7090627821fa5383aec9b35e8c?s=128&d=identicon&r=PG&f=1", "display_name": "user9937321", "link": "https://stackoverflow.com/users/9937321/user9937321"}, "edited": false, "score": 0, "creation_date": 1528932857, "post_id": 50846872, "comment_id": 88698744, "body": "I fiddled around with glutInitDisplayModes()&#39;s options. GLUT_ALPHA was the issue. Everything is rendering correctly now.  Thank you again for the help."}], "tags": [], "owner": {"reputation": 2898, "user_id": 938914, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VUHxs.jpg?s=128&g=1", "display_name": "Nathan Reed", "link": "https://stackoverflow.com/users/938914/nathan-reed"}, "is_accepted": true, "score": 1, "last_activity_date": 1528927054, "creation_date": 1528927054, "answer_id": 50846872, "question_id": 50843607, "link": "https://stackoverflow.com/questions/50843607/opengl-program-failing-to-link/50846872#50846872", "title": "OpenGL program failing to link?", "body": "<p>Try moving the <code>libgasandbox.a</code> before all the <code>-l</code> options on the command line. So your command would look like this:</p>\n\n<pre><code>g++ -g -O2 -o chap1ex1 chap1ex1.o ../../libgasandbox/libgasandbox.a -lGL -lGLU -lglut\n</code></pre>\n\n<p>Order of arguments does matter for static linking, as described in <a href=\"https://stackoverflow.com/a/409470\">this answer</a>: things that depend on a library must come before that library. <code>libgasandbox</code> evidently depends on GLU, so putting it earlier should solve that error.</p>\n\n<p>You might also need to move <code>-lGL</code> to the very end, if GLU or glut depend on it (I'm not sure whether they do).</p>\n"}], "owner": {"reputation": 13, "user_id": 9937321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/473fdc7090627821fa5383aec9b35e8c?s=128&d=identicon&r=PG&f=1", "display_name": "user9937321", "link": "https://stackoverflow.com/users/9937321/user9937321"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 273, "favorite_count": 0, "accepted_answer_id": 50846872, "answer_count": 1, "score": 1, "last_activity_date": 1528927054, "creation_date": 1528913241, "last_edit_date": 1528926918, "question_id": 50843607, "link": "https://stackoverflow.com/questions/50843607/opengl-program-failing-to-link", "title": "OpenGL program failing to link?", "body": "<p>I'm attempting to use the GA Sandbox source code found <a href=\"http://geometricalgebra.net/code.html\" rel=\"nofollow noreferrer\">here</a> on Linux (specifically Ubuntu 16.04). Yet when it comes to compiling the first example I'm left with this error.</p>\n\n<pre><code>g++  -g -O2   -o chap1ex1 chap1ex1.o  -lGL -lGLU -lglut ../../libgasandbox/libgasandbox.a\n../../libgasandbox/libgasandbox.a(libgasandbox_a-gl_util.o): In function \n`pickLoadMatrix()':\n/mnt/c/GASandbox/ga_sandbox-1.0.7/libgasandbox/gl_util.cpp:231: undefined \nreference to `gluPickMatrix'\ncollect2: error: ld returned 1 exit status\nMakefile:216: recipe for target 'chap1ex1' failed\n</code></pre>\n\n<p>I should mention that the configure script which provided the Makefile mentioned above does not initially link either -lGL or -lGLU. This gave me an error pertaining to a missing DSO, which was corrected by linking -lGL. I then wound up with this error. I looked around for any similar errors online and found <a href=\"https://stackoverflow.com/questions/4205380/why-does-my-program-fail-to-link\">this post</a>, where the OP solved it by linking -lGLU. I was not so fortunate.</p>\n\n<p>Here is the snippet of code in question, from gl_util.cpp.</p>\n\n<pre><code>#include &lt;string&gt;\n\n#include \"gl_util.h\"\n#if defined (__APPLE__) || defined (OSX)\n    #include &lt;GLUT/glut.h&gt;\n#else\n    #include &lt;GL/glut.h&gt;\n#endif\n\n// code inbetween\n\nnamespace GLpick {\nbool g_pickActive = false;\nint g_OpenGL_pick[4] = {0, 0, 0, 0}; \ndouble g_frustumNear = 1.0;\ndouble g_frustumFar = 100.0;\ndouble g_frustumWidth = -1.0;\ndouble g_frustumHeight = -1.0;\n\nint g_pickWinSize = 4;\n}\n\nvoid pickLoadMatrix() {\n    if (!GLpick::g_pickActive) return;\n\n    GLint viewport[4];\n    glGetIntegerv(GL_VIEWPORT, viewport);\n    gluPickMatrix(\n        GLpick::g_OpenGL_pick[0], GLpick::g_OpenGL_pick[1], \n        GLpick::g_OpenGL_pick[2] * 2 + 1, GLpick::g_OpenGL_pick[3] * 2 + 1, \n        viewport);\n}\n</code></pre>\n\n<p>In glu.h, gluPickMatrix()'s signature is <code>GLAPI void GLAPIENTRY gluPickMatrix (GLdouble x, GLdouble y, GLdouble delX, GLdouble delY, GLint *viewport);</code>. So, I attempted to change <code>int g_OpenGL_pick[] = {0, 0, 0, 0};</code> to <code>GLdouble g_OpenGL_pick[] = {0.0, 0.0, 0.0, 0.0};</code>. Neither that nor casting the individual values to GLdouble worked.</p>\n\n<p>What might I be overlooking?  Or are there any concepts that could help narrow down my search?</p>\n"}, {"tags": ["c++", "string", "iostream", "cin"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1528912986, "post_id": 50843514, "comment_id": 88690627, "body": "Please note C++ is case-sensitive - it&#39;s <code>string</code>, not <code>String</code>."}, {"owner": {"reputation": 4139, "user_id": 8898218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/82CEl.jpg?s=128&g=1", "display_name": "InAFlash", "link": "https://stackoverflow.com/users/8898218/inaflash"}, "edited": false, "score": 0, "creation_date": 1528913025, "post_id": 50843514, "comment_id": 88690639, "body": "@NeilButterworth, yes i know that. i might have just typed it wrong. Thanks. i am editing the question"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1528913281, "post_id": 50843514, "comment_id": 88690753, "body": "<a href=\"https://en.cppreference.com/w/cpp/io/cin\" rel=\"nofollow noreferrer\"><code>std::cin</code></a> is not a function, it&#39;s an <code>std::istream</code> object. You won&#39;t find an overload for it, only functions can be overloaded."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1528913349, "post_id": 50843615, "comment_id": 88690780, "body": "I would say &quot;standard library  functions&quot; rather than &quot;global functions&quot;."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1528913388, "post_id": 50843615, "comment_id": 88690799, "body": "@NeilButterworth I think the point of saying global function is to identify them as free functions."}, {"owner": {"reputation": 4139, "user_id": 8898218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/82CEl.jpg?s=128&g=1", "display_name": "InAFlash", "link": "https://stackoverflow.com/users/8898218/inaflash"}, "edited": false, "score": 0, "creation_date": 1528913450, "post_id": 50843615, "comment_id": 88690826, "body": "@NathanOliver, so, there&#39;s actually no overloading then?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 4139, "user_id": 8898218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/82CEl.jpg?s=128&g=1", "display_name": "InAFlash", "link": "https://stackoverflow.com/users/8898218/inaflash"}, "edited": false, "score": 1, "creation_date": 1528913497, "post_id": 50843615, "comment_id": 88690857, "body": "@InAFlash There&#39;s an overload for <code>operator&gt;&gt;</code>."}, {"owner": {"reputation": 4139, "user_id": 8898218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/82CEl.jpg?s=128&g=1", "display_name": "InAFlash", "link": "https://stackoverflow.com/users/8898218/inaflash"}, "edited": false, "score": 0, "creation_date": 1528913535, "post_id": 50843615, "comment_id": 88690878, "body": "oh, got it. I was confused with cin. i was looking for overloading of cin, but, after reading your comment, i understood it. thanks"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 4139, "user_id": 8898218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/82CEl.jpg?s=128&g=1", "display_name": "InAFlash", "link": "https://stackoverflow.com/users/8898218/inaflash"}, "edited": false, "score": 1, "creation_date": 1528913561, "post_id": 50843615, "comment_id": 88690893, "body": "@InAFlash Yes and no.  The overload the <code>operator &gt;&gt;</code> for <code>std::string</code> to work with streams.  They aren&#39;t overloading <code>cin</code> itself."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1528913672, "post_id": 50843615, "comment_id": 88690945, "body": "@Fran&#231;oisAndrieux  Well, a free function is not necessarily (or even normally) a global function. In most modern C++ code (and all Standard Library code) they will be inside a named namespace."}, {"owner": {"reputation": 4139, "user_id": 8898218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/82CEl.jpg?s=128&g=1", "display_name": "InAFlash", "link": "https://stackoverflow.com/users/8898218/inaflash"}, "edited": false, "score": 0, "creation_date": 1528915363, "post_id": 50843615, "comment_id": 88691791, "body": "@NathanOliver, just one off the topic question, i was checking the code and saw that the file of string header was named just &quot;string&quot;. while few other files were having .h extension. is there any reason for creating files without extensions?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 4139, "user_id": 8898218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/82CEl.jpg?s=128&g=1", "display_name": "InAFlash", "link": "https://stackoverflow.com/users/8898218/inaflash"}, "edited": false, "score": 1, "creation_date": 1528915428, "post_id": 50843615, "comment_id": 88691826, "body": "@InAFlash The standard C++ headers don&#39;t have a <code>.h</code> .  The C headers and all others have a <code>.h</code>"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 5, "last_activity_date": 1528913444, "last_edit_date": 1528913444, "creation_date": 1528913271, "answer_id": 50843615, "question_id": 50843514, "link": "https://stackoverflow.com/questions/50843514/why-cin-accepts-string-inputs-after-including-string-header/50843615#50843615", "title": "Why cin accepts string inputs after including String header", "body": "<p><a href=\"https://en.cppreference.com/w/cpp/string/basic_string/operator_ltltgtgt\" rel=\"nofollow noreferrer\"><code>&lt;string&gt;</code> defines the functions</a></p>\n\n<pre><code>template &lt;class CharT, class Traits, class Allocator&gt;\nstd::basic_ostream&lt;CharT, Traits&gt;&amp; \n    operator&lt;&lt;(std::basic_ostream&lt;CharT, Traits&gt;&amp; os, \n               const std::basic_string&lt;CharT, Traits, Allocator&gt;&amp; str);\n\ntemplate &lt;class CharT, class Traits, class Allocator&gt;\nstd::basic_istream&lt;CharT, Traits&gt;&amp; \n    operator&gt;&gt;(std::basic_istream&lt;CharT, Traits&gt;&amp; is, \n               std::basic_string&lt;CharT, Traits, Allocator&gt;&amp; str);\n</code></pre>\n\n<p>These free, standard library functions, are what allows you to use a <code>std::string</code> with any stream that is or is derived from a <code>basic_ostream</code> or <code>basic_istream</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "is_accepted": false, "score": 1, "last_activity_date": 1528913661, "last_edit_date": 1528913661, "creation_date": 1528913289, "answer_id": 50843619, "question_id": 50843514, "link": "https://stackoverflow.com/questions/50843514/why-cin-accepts-string-inputs-after-including-string-header/50843619#50843619", "title": "Why cin accepts string inputs after including String header", "body": "<p>The <code>&lt;string&gt;</code> header mainly defines the standard library's <a href=\"http://en.cppreference.com/w/cpp/string/basic_string\" rel=\"nofollow noreferrer\"><code>std::string</code></a> class. Without it, you <em>have</em> no string class in C++: It's not integral to the language. Of course you could use <code>char*</code>-strings, C-style, but that's not how we typically do things in C++. </p>\n\n<p>Along with <code>std::string</code>, that header also defines <code>&gt;&gt;</code> and <code>&lt;&lt;</code> operators for <code>std::string</code>'s and streams, so that you can do things like <code>std::cout &lt;&lt; my_string</code> and <code>std::cin &gt;&gt; another_string</code>. That syntax is equivalent to <code>operator&lt;&lt;(std::cout, my_string)</code> and <code>operator&gt;&gt;(std::cin, another_string)</code>.</p>\n\n<p>Important note: The C language's <code>&lt;string.h&gt;</code> header is completely different than C++'s <code>&lt;string&gt;</code>. The C language header is usable just like it is in C, and defines <a href=\"http://en.cppreference.com/w/c/string/byte\" rel=\"nofollow noreferrer\">certain functions working on <code>char*</code> (null-terminated) strings</a>. Don't confuse the two headers, nor the two kinds of \"strings\".</p>\n"}], "owner": {"reputation": 4139, "user_id": 8898218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/82CEl.jpg?s=128&g=1", "display_name": "InAFlash", "link": "https://stackoverflow.com/users/8898218/inaflash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 50843615, "answer_count": 2, "score": 1, "last_activity_date": 1528916626, "creation_date": 1528912825, "last_edit_date": 1528916626, "question_id": 50843514, "link": "https://stackoverflow.com/questions/50843514/why-cin-accepts-string-inputs-after-including-string-header", "title": "Why cin accepts string inputs after including String header", "body": "<p>I am new to C++ programming. I was trying to take user inputs and put them in a variable and i was using <code>cin</code> .  It was working for integer's and other's except <code>strings</code>. So, when I searched around I found that I have to include <code>&lt;string&gt;</code> header. I just want to understand, what changes occurred by including string header? I thought that <code>cin</code> is overloaded by a function defined in the string header. So, I started looking into string header and I could not find <code>cin</code> overloaded or any function defined there at all. Can any one tell me how <code>cin</code> started accepting string inputs after including <code>&lt;string&gt;</code>?</p>\n"}, {"tags": ["c++", "algorithm", "c++11", "sum", "range"], "comments": [{"owner": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "edited": false, "score": 0, "creation_date": 1528913476, "post_id": 50843499, "comment_id": 88690840, "body": "Can you explain your intentions with the code? It seems as if the inner loop is supposed to calculate the <code>v[i+1]...v[n-1]</code> part. But why is <code>sum1</code> in this loop and where are you initializing <code>sum2</code> to 0?"}, {"owner": {"reputation": 97, "user_id": 9754868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/109f45b9459a3ff9d06c1e9523a16fff?s=128&d=identicon&r=PG&f=1", "display_name": "CoderChick", "link": "https://stackoverflow.com/users/9754868/coderchick"}, "reply_to_user": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "edited": false, "score": 0, "creation_date": 1528913580, "post_id": 50843499, "comment_id": 88690904, "body": "I dont fully understand the initial problem that is my psuedocode or draft i need help with whats going on."}, {"owner": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "edited": false, "score": 0, "creation_date": 1528913760, "post_id": 50843499, "comment_id": 88690976, "body": "So, are you asking for help understanding the problem or solving it? Obviously, the latter requires the former. Btw, this problem has (at least) an easy solution and an efficient one."}, {"owner": {"reputation": 97, "user_id": 9754868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/109f45b9459a3ff9d06c1e9523a16fff?s=128&d=identicon&r=PG&f=1", "display_name": "CoderChick", "link": "https://stackoverflow.com/users/9754868/coderchick"}, "reply_to_user": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "edited": false, "score": 0, "creation_date": 1528913850, "post_id": 50843499, "comment_id": 88691022, "body": "Both understanding and solving or point me in the right direction."}], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 9754868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/109f45b9459a3ff9d06c1e9523a16fff?s=128&d=identicon&r=PG&f=1", "display_name": "CoderChick", "link": "https://stackoverflow.com/users/9754868/coderchick"}, "edited": false, "score": 1, "creation_date": 1528914040, "post_id": 50843775, "comment_id": 88691119, "body": "Thank you for your help im going walk through each step."}, {"owner": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "reply_to_user": {"reputation": 97, "user_id": 9754868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/109f45b9459a3ff9d06c1e9523a16fff?s=128&d=identicon&r=PG&f=1", "display_name": "CoderChick", "link": "https://stackoverflow.com/users/9754868/coderchick"}, "edited": false, "score": 0, "creation_date": 1528914107, "post_id": 50843775, "comment_id": 88691150, "body": "@CoderChick Your welcom: See here for live outputs: <a href=\"https://www.ideone.com/FmApiz\" rel=\"nofollow noreferrer\">ideone.com/FmApiz</a>"}, {"owner": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "reply_to_user": {"reputation": 97, "user_id": 9754868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/109f45b9459a3ff9d06c1e9523a16fff?s=128&d=identicon&r=PG&f=1", "display_name": "CoderChick", "link": "https://stackoverflow.com/users/9754868/coderchick"}, "edited": false, "score": 2, "creation_date": 1528914136, "post_id": 50843775, "comment_id": 88691174, "body": "@CoderChick: This is one of the easy solutions I was referring to in the comments under your question. When you understand it, try to modify it to be efficient. This version has a runtime of O(n^2), whereas the efficient one has O(n)."}, {"owner": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "reply_to_user": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "edited": false, "score": 0, "creation_date": 1528914270, "post_id": 50843775, "comment_id": 88691258, "body": "@NicoSchertler Yes. This has O(n*n) complexity. Using segment tree range  sum, whould be much faster."}, {"owner": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "edited": false, "score": 1, "creation_date": 1528914321, "post_id": 50843775, "comment_id": 88691282, "body": "@JeJo Much simpler, the sums can be calculated incrementally without some complex data structure."}, {"owner": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "reply_to_user": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "edited": false, "score": 0, "creation_date": 1528914921, "post_id": 50843775, "comment_id": 88691576, "body": "@NicoSchertler  Also true. Moving slide summation. Updated with that. :)"}], "tags": [], "owner": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "is_accepted": true, "score": 2, "last_activity_date": 1528914853, "last_edit_date": 1528914853, "creation_date": 1528913890, "answer_id": 50843775, "question_id": 50843499, "link": "https://stackoverflow.com/questions/50843499/balanced-array-index-while-summing-an-array-from-left-and-right/50843775#50843775", "title": "Balanced array index while summing an array from left and right", "body": "<p>Use <a href=\"http://en.cppreference.com/w/cpp/algorithm/accumulate\" rel=\"nofollow noreferrer\"><code>std::accumulate</code></a> and you can do as follows.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;numeric&gt;\n#include &lt;cstddef&gt;\n\nint balanceIndex(const std::vector&lt;int&gt;&amp; vec)\n{\n   for(std::size_t index = 0; index&lt; vec.size(); ++index)\n   {\n      int left_sum = std::accumulate(vec.begin(), vec.begin() + index + 1, 0);\n      int right_sum = std::accumulate(vec.begin() + index + 1, vec.end(), 0);\n      if(left_sum == right_sum)\n         return index;\n   }\n   return -1;\n}\n\nint main()\n{\n  std::vector&lt;int&gt; a = {5,1,2,2};\n  std::vector&lt;int&gt; b = {1,1,1,1,1,1};\n  std::vector&lt;int&gt; c = {2,2,2};\n\n  int answer = balanceIndex(c);  //try for vectors b and c\n  (answer != -1) ? std::cout&lt;&lt; answer : std::cout &lt;&lt; \"None\\n\";\n\n  return 0;\n}\n</code></pre>\n\n<hr>\n\n<p><strong>UPDATE</strong>: Above solution has a time complexity of <em>O(n^2)</em>. As @NicoSchertler mentioned in the comment, a <em>O(n)</em> solution could be as follows:</p>\n\n<pre><code>int balanceIndex(const std::vector&lt;int&gt;&amp; vec)\n{\n   int right_sum = std::accumulate(vec.begin(), vec.end(), 0);\n   int left_sum = 0;\n   for(std::size_t index = 0; index&lt; vec.size(); ++index)\n   {\n      right_sum -= vec[index];\n      left_sum  += vec[index];\n      if(left_sum == right_sum) return index;\n   }\n   return -1;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 424, "user_id": 3722117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f384c7ad4980b01083daf342efb3b323?s=128&d=identicon&r=PG", "display_name": "konserw", "link": "https://stackoverflow.com/users/3722117/konserw"}, "is_accepted": false, "score": -1, "last_activity_date": 1528914075, "creation_date": 1528914075, "answer_id": 50843822, "question_id": 50843499, "link": "https://stackoverflow.com/questions/50843499/balanced-array-index-while-summing-an-array-from-left-and-right/50843822#50843822", "title": "Balanced array index while summing an array from left and right", "body": "<p>As for understanding problem: you are searching for such index i, that sum of numbers left of i and right of i are equal, for example:</p>\n\n<blockquote>\n  <p>V = [1 2 3] -> i=1, as V[0] + V[i=1] = V[i+1=2] </p>\n</blockquote>\n\n<p>As for how to code your program, I suggest TDD approach, i.e. first write test based on my example; then try to write function that pass this test. Next write more complex test (for instance with numbers that wouldn give you valid i)</p>\n"}, {"tags": [], "owner": {"reputation": 59, "user_id": 5002009, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1O06gY0cn4A/AAAAAAAAAAI/AAAAAAAAkr8/2jjHyeuDmts/photo.jpg?sz=128", "display_name": "Guillaume Militello", "link": "https://stackoverflow.com/users/5002009/guillaume-militello"}, "is_accepted": false, "score": 2, "last_activity_date": 1528915313, "creation_date": 1528915313, "answer_id": 50844140, "question_id": 50843499, "link": "https://stackoverflow.com/questions/50843499/balanced-array-index-while-summing-an-array-from-left-and-right/50844140#50844140", "title": "Balanced array index while summing an array from left and right", "body": "<p>You can check for an odd array sum first, and stop before instead of going through all the array a second time.\nThis algo is linear O(N).</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;numeric&gt;\n\nint balanceIndex(const std::vector&lt;int&gt;&amp; array)\n{\n    int sum = std::accumulate(array.begin(), array.end(), 0);\n\n    if (sum % 2 == 1)\n        return -1;\n\n    int leftSum = 0;\n    int halfSum = sum / 2;\n\n    size_t index = 0;    \n    while(leftSum &lt; halfSum)\n        leftSum += array[index++];\n\n    if (leftSum == halfSum)\n        return index-1;\n\n    return -1;\n}\n\nint main()\n{\n    std::cout &lt;&lt; balanceIndex({5, 1, 2, 2}) &lt;&lt; std::endl;\n    std::cout &lt;&lt; balanceIndex({1, 1, 1, 1, 1, 1}) &lt;&lt; std::endl;\n    std::cout &lt;&lt; balanceIndex({2, 2, 2}) &lt;&lt; std::endl;\n\n   return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 607, "user_id": 8225336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/418c2e0a00933c6e12a63c1bca55ea27?s=128&d=identicon&r=PG&f=1", "display_name": "tangoal", "link": "https://stackoverflow.com/users/8225336/tangoal"}, "is_accepted": false, "score": 1, "last_activity_date": 1528915825, "creation_date": 1528915825, "answer_id": 50844282, "question_id": 50843499, "link": "https://stackoverflow.com/questions/50843499/balanced-array-index-while-summing-an-array-from-left-and-right/50844282#50844282", "title": "Balanced array index while summing an array from left and right", "body": "<p>And the C-Array approach:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nuint32_t sum(uint32_t arr[], uint32_t n)\n{\n    uint32_t s = 0;\n    for (uint32_t i = 0; i &lt; n; i++) {\n        s += arr[i];\n    }\n    return s;\n}\n\nint32_t getIdx(uint32_t arr[], uint32_t n)\n{\n    uint32_t sum_l = 0;\n    uint32_t sum_r = sum(arr, n);\n\n    if ((sum_r%2) == 1) {\n        return -1; //if the sum is odd, then sum(arr[0...i]) != sum(arr[i+1...n-1])\n    }\n\n    for (uint32_t i = 0; (i &lt; n) &amp;&amp; (sum_r &gt; sum_l); i++) {\n        sum_r -= arr[i];\n        sum_l += arr[i];\n        if (sum_r == sum_l) {\n            return i;\n        }\n    }\n\n    return -1;\n}\n\nint main()\n{\n    uint32_t arr1[] = {5, 1, 2, 2};\n    cout &lt;&lt; \"{5, 1, 2, 2}: sum=\" &lt;&lt; sum(arr1, 4) &lt;&lt; \" idx=\" &lt;&lt; getIdx(arr1, 4) &lt;&lt; endl;\n\n    uint32_t arr2[] = {1, 1, 1, 1, 1, 1};\n    cout &lt;&lt; \"{1, 1, 1, 1, 1, 1}: sum=\" &lt;&lt; sum(arr2, 6) &lt;&lt; \" idx=\" &lt;&lt; getIdx(arr2, 6) &lt;&lt; endl;\n\n    uint32_t arr3[] = {2, 2, 2};\n    cout &lt;&lt; \"{2, 2, 2}: sum=\" &lt;&lt; sum(arr3, 3) &lt;&lt; \" idx=\" &lt;&lt; getIdx(arr3, 3) &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 9754868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/109f45b9459a3ff9d06c1e9523a16fff?s=128&d=identicon&r=PG&f=1", "display_name": "CoderChick", "link": "https://stackoverflow.com/users/9754868/coderchick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1868, "favorite_count": 0, "accepted_answer_id": 50843775, "answer_count": 4, "score": 0, "last_activity_date": 1528918670, "creation_date": 1528912768, "last_edit_date": 1592644375, "question_id": 50843499, "link": "https://stackoverflow.com/questions/50843499/balanced-array-index-while-summing-an-array-from-left-and-right", "title": "Balanced array index while summing an array from left and right", "body": "<p><strong>Balance Index Problem:</strong></p>\n<p><strong>Input:</strong> an array of <code>n</code> positive integers</p>\n<p><strong>Output:</strong> an index i such that the sum of elements <code>V[0]...V[i]</code> is exactly equal to the sum of <code>v[i + 1]...V[n-1];</code> or None if no such index exists. For example:</p>\n<blockquote>\n<pre><code>[5,1,2,2] -&gt; output i = 0\n\n[1,1,1,1,1,1] -&gt; output = 2\n\n[2,2,2] -&gt; output = None\n</code></pre>\n</blockquote>\n<p>Been stuck on this problem for a while can someone help with the basic logic? Something like this psuedocode. Its ment to be basic and simple. Im just not fully understanding the logic.</p>\n<pre><code>for(int i = 0; i &lt; size; i++)\n{\n    for(int j = i + 1; j &lt; size; j++)\n    {\n        sum1 = array[i] + sum1\n        sum2 = array[j] + sum2\n        \n        if(sum1 == sum2)\n            return i; \n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1528912568, "post_id": 50843396, "comment_id": 88690424, "body": "Life would be easier if you were permitted to use the standard library."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1528912579, "post_id": 50843396, "comment_id": 88690434, "body": "I hate to flag duplicates when the duplicate has so many terrible, terrible answers..."}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 4, "creation_date": 1528912585, "post_id": 50843396, "comment_id": 88690439, "body": "Long ago I decided that the answer to this question is &quot;You don&#39;t.&quot; Use a C++ structure of some kind to map 2D (or more) indexes onto a single 1D array allocation. Or possibly multiple 1D arrays."}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 0, "creation_date": 1528912805, "post_id": 50843396, "comment_id": 88690540, "body": "I&#39;d rather do <code>struct myPair { char name[10];char value[5]; }; myPair pairs[100]</code>; probably you are actually looking for <code>std::map</code>"}, {"owner": {"reputation": 3275, "user_id": 1229350, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/6e07dc330d41f1420105cd65e678e25f?s=128&d=identicon&r=PG", "display_name": "Legion", "link": "https://stackoverflow.com/users/1229350/legion"}, "reply_to_user": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1528913129, "post_id": 50843396, "comment_id": 88690685, "body": "@ZanLynx I&#39;m starting to think you&#39;re right. MD arrays in C++ are a trash fire."}], "owner": {"reputation": 3275, "user_id": 1229350, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/6e07dc330d41f1420105cd65e678e25f?s=128&d=identicon&r=PG", "display_name": "Legion", "link": "https://stackoverflow.com/users/1229350/legion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "closed_date": 1528912565, "answer_count": 0, "score": 0, "last_activity_date": 1528912406, "creation_date": 1528912406, "question_id": 50843396, "link": "https://stackoverflow.com/questions/50843396/what-should-function-signature-look-like-to-pass-in-2d-arrays-of-arbitrary-size", "closed_reason": "Duplicate", "title": "What should function signature look like to pass in 2D arrays of arbitrary size?", "body": "<p>I have a function that I want to accept 2D arrays of arbitrary size.</p>\n\n<p>So if I have the following:</p>\n\n<pre><code>char names[100][10];\nchar values[100][5];\n</code></pre>\n\n<p>What should my function signature look like?</p>\n\n<p>I tried:</p>\n\n<p><code>void myFunc(char* names[], char* values[]);</code>\nand\n<code>void myFunc(char** names, char** values);</code></p>\n\n<p>But then I get <code>argument of type \"char(*)[10]\" is incompatible with parameter of type \"char**\".</code></p>\n\n<p>I tried:</p>\n\n<p><code>void myFunc(char names[][], char values[][]);</code></p>\n\n<p>But then I get <code>an array may not have elements of this type.</code></p>\n\n<p>The only thing that works is \n<code>void myFunc(char names[100][10], char values[100][5]);</code></p>\n\n<p>But then it's not arbitrary size. I'm aware that I'll need to pass a size parameter as well, but I can't even get to that yet.</p>\n"}, {"tags": ["c++", "boost-spirit", "boolean-expression"], "comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1528923317, "post_id": 50843249, "comment_id": 88695770, "body": "What do you suggest is the evaluation order between <code>and</code> and <code>xor</code> in that sample? Will you do n-ary <code>xor</code>? How? What are the rules regarding to parenthesizing sub-expressions? If parenthesizing is optional we need to have evaluation order specified. (So, associativity and precedence)"}, {"owner": {"reputation": 346, "user_id": 1816477, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BxDgw.jpg?s=128&g=1", "display_name": "Jinxed", "link": "https://stackoverflow.com/users/1816477/jinxed"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1529504581, "post_id": 50843249, "comment_id": 88898672, "body": "I tried adapting from your example, but failed. xor is defined for multiple boolean variables, so: yes, n-ary, too. The precedence in ascending order would be: or, xor, and, negation. The only thing I would need is a valid grammar, not the complete boost-shebang. This I can do myself, but I seem to fail on the grammar."}], "answers": [{"comments": [{"owner": {"reputation": 346, "user_id": 1816477, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BxDgw.jpg?s=128&g=1", "display_name": "Jinxed", "link": "https://stackoverflow.com/users/1816477/jinxed"}, "edited": false, "score": 1, "creation_date": 1530548225, "post_id": 51119017, "comment_id": 89264360, "body": "That looks great! I can perfectly build on that!"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 1, "creation_date": 1531229888, "post_id": 51119017, "comment_id": 89511506, "body": "Surprised this did not earn OP&#39;s +1 So here you go. I&#39;ll read this more closely later."}, {"owner": {"reputation": 346, "user_id": 1816477, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BxDgw.jpg?s=128&g=1", "display_name": "Jinxed", "link": "https://stackoverflow.com/users/1816477/jinxed"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1533734822, "post_id": 51119017, "comment_id": 90455584, "body": "@sehe: I accepted it as answer and just forgot about upvoting."}], "tags": [], "owner": {"reputation": 3425, "user_id": 3621421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/995874e8bbb9cf8df99e63de231709cc?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Kniazev", "link": "https://stackoverflow.com/users/3621421/nikita-kniazev"}, "is_accepted": true, "score": 3, "last_activity_date": 1530397848, "creation_date": 1530397848, "answer_id": 51119017, "question_id": 50843249, "link": "https://stackoverflow.com/questions/50843249/n-ary-boolean-grammar-conversion-from-infix-to-prefix-with-boostspirit/51119017#51119017", "title": "n-ary boolean grammar conversion from infix to prefix with Boost::Spirit?", "body": "<p>The code is not perfect but should be simple to understand:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;boost/variant.hpp&gt;\n#include &lt;boost/spirit/home/x3.hpp&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n\n\nstruct id : std::string {};\nstruct value : std::string {};\nstruct nary_expr;\n\nusing expr = boost::variant&lt;\n    id, value,\n    boost::recursive_wrapper&lt;nary_expr&gt;\n&gt;;\n\n\nstruct nary_expr\n{\n    std::string op;\n    std::vector&lt;expr&gt; exprs;\n};\n\n\nnamespace x3 = boost::spirit::x3;\n\nauto compose_nary_expr = [](auto&amp; ctx)\n{\n    //auto&amp;&amp; [left, tail] = x3::_attr(ctx);\n    auto&amp;&amp; left = boost::fusion::at_c&lt;0&gt;(x3::_attr(ctx));\n    auto&amp;&amp; tail = boost::fusion::at_c&lt;1&gt;(x3::_attr(ctx));\n\n    if (tail.size() == 0) {\n        x3::_val(ctx) = left;\n        return;\n    }\n\n    // left associativity\n    auto op = boost::fusion::at_c&lt;0&gt;(tail[0]);\n    std::vector&lt;expr&gt; exprs = { left, boost::fusion::at_c&lt;1&gt;(tail[0]) };\n    for (std::size_t i = 1; i &lt; tail.size(); ++i) {\n        // same priority but different operator\n        auto&amp;&amp; next_op = boost::fusion::at_c&lt;0&gt;(tail[i]);\n        if (op != next_op) {\n            exprs = std::vector&lt;expr&gt;{ nary_expr{ op, std::move(exprs) } };\n            op = next_op;\n        }\n        exprs.push_back(boost::fusion::at_c&lt;1&gt;(tail[i]));\n    }\n    x3::_val(ctx) = nary_expr{ op, std::move(exprs) };\n};\n\nx3::rule&lt;class prec4_expr_rule, expr&gt; const prec4_expr(\"prec4_expr\");\nx3::rule&lt;class prec3_expr_rule, expr&gt; const prec3_expr(\"prec3_expr\");\nx3::rule&lt;class prec2_expr_rule, expr&gt; const prec2_expr(\"prec2_expr\");\nx3::rule&lt;class prec1_expr_rule, expr&gt; const prec1_expr(\"prec1_expr\");\nx3::rule&lt;class prec0_expr_rule, expr&gt; const prec0_expr(\"prec0_expr\");\n\nauto const prec4_expr_def = prec4_expr = (\n    prec3_expr\n    &gt;&gt; *(   (x3::string(\"or\") &gt; prec3_expr)\n        )\n    )[compose_nary_expr];\n\nauto const prec3_expr_def = prec3_expr = (\n    prec2_expr\n    &gt;&gt; *(   (x3::string(\"xor\") &gt; prec2_expr)\n        )\n    )[compose_nary_expr];\n\nauto const prec2_expr_def = prec2_expr = (\n    prec1_expr\n    &gt;&gt; *(   (x3::string(\"and\") &gt; prec1_expr)\n        )\n    )[compose_nary_expr];\n\n\nauto compose_binary_expr = [](auto&amp; ctx)\n{\n    auto&amp;&amp; rhs = boost::fusion::at_c&lt;0&gt;(x3::_attr(ctx));\n    auto&amp;&amp; tail = boost::fusion::at_c&lt;1&gt;(x3::_attr(ctx));\n    if (tail.size() &gt; 0) {\n        auto&amp;&amp; op = boost::fusion::at_c&lt;0&gt;(tail[0]);\n        auto&amp;&amp; lhs = boost::fusion::at_c&lt;1&gt;(tail[0]);\n        x3::_val(ctx) = nary_expr{ op, { rhs, lhs } };\n    }\n    else {\n        x3::_val(ctx) = rhs;\n    }\n};\n\n\n// should use optional, but something wrong with spirit\nauto const prec1_expr_def = prec1_expr = (\n    prec0_expr &gt;&gt; *(x3::string(\"=\") &gt; prec0_expr)\n    )[compose_binary_expr];\n\n\n\nx3::rule&lt;class not_expr_rule, expr&gt; const not_expr(\"not_expr\");\n\nauto compose_unary_expr = [](auto&amp; ctx)\n{\n    //auto&amp;&amp; [op, expr] = x3::_attr(ctx);\n    auto&amp;&amp; op = boost::fusion::at_c&lt;0&gt;(x3::_attr(ctx));\n    auto&amp;&amp; expr = boost::fusion::at_c&lt;1&gt;(x3::_attr(ctx));\n    x3::_val(ctx) = nary_expr{ op, { expr } };\n};\n\nauto const not_expr_def = not_expr = (x3::string(\"not\") &gt; prec0_expr)[compose_unary_expr];\nauto const id_term = x3::rule&lt;class id_r, id&gt;{} = x3::lexeme[x3::alpha &gt;&gt; *x3::alnum];\nauto const value_term = x3::rule&lt;class value_r, value&gt;{} = x3::lexeme[\"'\" &gt; +~x3::char_('\\'') &gt;&gt; \"'\"];\n\nauto const prec0_expr_def =\n      value_term\n    | ( '(' &gt; prec4_expr &gt;&gt; ')' )\n    | not_expr\n    | id_term\n    ;\n\n\nBOOST_SPIRIT_DEFINE(\n    prec0_expr\n  , prec1_expr\n  , prec2_expr\n  , prec3_expr\n  , prec4_expr\n  , not_expr\n);\n\n\nstruct indent\n{\n    std::size_t cur;\n};\n\nindent operator+(indent lhs, std::size_t rhs)\n{\n    return { lhs.cur + rhs };\n}\n\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, indent const&amp; v)\n{\n    for (unsigned i = 0; i &lt; v.cur; ++i) os &lt;&lt; ' ';\n    return os;\n}\n\nstruct is_simple\n{\n    template &lt;typename T&gt;\n    bool operator()(T const&amp;) const\n    {\n        return std::is_same&lt;T, id&gt;::value || std::is_same&lt;T, value&gt;::value;\n    }\n};\n\nstruct printer\n{\n    indent indent_;\n\n    void operator()(id const&amp; v)\n    {\n        std::cout &lt;&lt; v;\n    }\n\n    void operator()(value const&amp; v)\n    {\n        std::cout &lt;&lt; '\\'' &lt;&lt; v &lt;&lt; '\\'';\n    }\n\n    void operator()(nary_expr const&amp; v)\n    {\n        std::cout &lt;&lt; '(' &lt;&lt; v.op &lt;&lt; ' ';\n        printer p{ indent_ + 2 + v.op.size() };\n        boost::apply_visitor(p, v.exprs[0]);\n        for (std::size_t i = 1; i &lt; v.exprs.size(); ++i) {\n            if (boost::apply_visitor(is_simple{}, v.exprs[i])) {\n                std::cout &lt;&lt; ' ';\n            }\n            else {\n                std::cout &lt;&lt; '\\n' &lt;&lt; p.indent_;\n            }\n            boost::apply_visitor(p, v.exprs[i]);\n        }\n        std::cout &lt;&lt; ')';\n    }\n};\n\nint main()\n{\n    std::string s = \"not (xyz='a' or xyz='b' or xyz='c') and abc='s' xor (pqr ='v' and xyz='d')\";\n    expr expr;\n    auto iter = s.cbegin();\n    if (phrase_parse(iter, s.cend(), prec4_expr_def, x3::space, expr) &amp;&amp; iter == s.cend()) {\n        boost::apply_visitor(printer{}, expr);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>It prints:</p>\n\n<pre><code>(xor (and (not (or (= xyz 'a')\n                   (= xyz 'b')\n                   (= xyz 'c')))\n          (= abc 's'))\n     (and (= pqr 'v')\n          (= xyz 'd')))\n</code></pre>\n"}], "owner": {"reputation": 346, "user_id": 1816477, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BxDgw.jpg?s=128&g=1", "display_name": "Jinxed", "link": "https://stackoverflow.com/users/1816477/jinxed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 1, "accepted_answer_id": 51119017, "answer_count": 1, "score": 1, "last_activity_date": 1530397848, "creation_date": 1528911834, "last_edit_date": 1529505887, "question_id": 50843249, "link": "https://stackoverflow.com/questions/50843249/n-ary-boolean-grammar-conversion-from-infix-to-prefix-with-boostspirit", "title": "n-ary boolean grammar conversion from infix to prefix with Boost::Spirit?", "body": "<p>I need to convert infix notations like the one below to n-ary prefix notation with Boost::Spirit, but I am failing at building on the answers from <a href=\"https://stackoverflow.com/a/8707598/1816477\">https://stackoverflow.com/a/8707598/1816477</a> et al.</p>\n\n<p>This is what I am trying to parse:</p>\n\n<pre><code>not (xyz='a' or xyz='b' or xyz='c') and abc='s' xor (pqr ='v' and xyz='d')\n</code></pre>\n\n<p>and this LISP-styled format is what I am trying to provide as output (do not mind the indentation):</p>\n\n<pre><code>(xor (and (= pqr 'v') (= xyz 'd'))\n     (and (= abc 's')\n          (not (or (= xyz 'a')\n                   (= xyz 'b')\n                   (= xyz 'c')))))\n</code></pre>\n\n<p>So, the terms I try to parse consist of prefixed (<code>not &lt;expression&gt;</code>) and infix expressions (<code>&lt;expression&gt; and &lt;expression&gt; and ...</code> etc.), i.e.: assignments, negations and n-ary ands, ors, xors etc., implying operator precedence (or &lt; xor &lt; and &lt; assignment &lt; negation).</p>\n\n<p>What I am failing at is getting the grammar right. Outputting to a suitable <code>boost::variant</code> representing the parsed boolean expression I think I am able to accomplish. I am thinking of an output structure like this one:</p>\n\n<pre><code>struct prefixExpr;\nstruct infixExpr;\n\ntypedef boost::variant&lt;\n    std::string,    // identifiers, values etc.\n    boost::recursive_wrapper&lt;prefixExpr&gt;,   // e.g. negation\n    boost::recursive_wrapper&lt;infixExpr&gt;     // assignment, and, or, xor etc.\n&gt; expression;\n\nstruct prefixExpr {\n    std::string op;    // currently only \"not\"\n    expression expr;\n};\nBOOST_FUSION_ADAPT_STRUCT(prefixExpr, op, expr)\n\nstruct infixExpr {\n    std::string op;    // \"and\", \"or\", \"xor\", \"=\"\n    std::vector&lt;expression&gt; exprs;\n};\nBOOST_FUSION_ADAPT_STRUCT(infixExpr, op, exprs)\n</code></pre>\n\n<p>What do I need to do to be able to parse expressions like the one mentioned above and convert them to a prefix notation?</p>\n\n<p>I am using the boost 1.67.0 (the latest at the time of writing) and Visual Studio 15.7.3 (also the latest at the time of writing).</p>\n"}, {"tags": ["c++", "string", "unreal-engine4", "string-conversion", "text-manipulation"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1528917276, "post_id": 50843234, "comment_id": 88692698, "body": "First, you need to decide what encoding the <code>std::string</code> uses. Does it use UTF-8, or a system-defined locale?  You can&#39;t convert it without answering that first. But when you do convert, you can use portable STL features like <code>std::wstring_convert()</code> or <code>mbsrtowcs()</code>, or Unicode libraries like ICONV or ICU, or platform-specific functions like <code>MultiByteToWideChar()</code> on Windows, etc."}, {"owner": {"reputation": 77, "user_id": 6334815, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iE-Rjb84MN4/AAAAAAAAAAI/AAAAAAAAABY/i5VyzL6xKJM/photo.jpg?sz=128", "display_name": "Sebastian Schon", "link": "https://stackoverflow.com/users/6334815/sebastian-schon"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1529066859, "post_id": 50843234, "comment_id": 88753424, "body": "Thanks for your response. As it may have become obvious, I am not knowledgeable about all this, so my answers may sound stupid. We want to let user read any sort of file, so it would be nice if we could work with any (common) encoding. But I assume you mean the encoding of the string itself? When I did my research, it said that string does not use any particular encoding on it&#39;s own, just stores the bytes. How would I know which encoding it uses?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1529074074, "post_id": 50843234, "comment_id": 88757921, "body": "that is for you to decide when you populate the string. When you are reading files, there is no common encoding. You have to know the encoding of each file. If you don&#39;t know, you are out of luck, unless you ask the user, or use hieristics to guess."}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 6334815, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iE-Rjb84MN4/AAAAAAAAAAI/AAAAAAAAABY/i5VyzL6xKJM/photo.jpg?sz=128", "display_name": "Sebastian Schon", "link": "https://stackoverflow.com/users/6334815/sebastian-schon"}, "edited": false, "score": 0, "creation_date": 1530318050, "post_id": 51018783, "comment_id": 89208514, "body": "Hey, thanks for the response, I tried that already, wstring just completely discarded the characters not recognized by FString alltogether. No special &#39;?&#39;, just not there anymore. In another conversion method, I at least now recognized a the - char, but nothing else."}], "tags": [], "owner": {"reputation": 711, "user_id": 4802475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZETd6.png?s=128&g=1", "display_name": "Paradowski", "link": "https://stackoverflow.com/users/4802475/paradowski"}, "is_accepted": false, "score": 0, "last_activity_date": 1529913938, "creation_date": 1529913938, "answer_id": 51018783, "question_id": 50843234, "link": "https://stackoverflow.com/questions/50843234/convert-stdstring-to-fstring-tchar-wstring-with-special-characters/51018783#51018783", "title": "Convert std::string to FString (TCHAR / wstring) with special characters", "body": "<p>Convert your <code>std::string</code> to <code>std::wstring</code> as it is also templated on <code>wchar_t</code> and try initializing your <code>FString</code> with it.<br>\nCheck out this topic if you don't know how to convert to <code>wstring</code>: <a href=\"https://stackoverflow.com/questions/25141848/c-cant-convert-string-to-wstring\">c++ can&#39;t convert string to wstring</a><br>\nThen you could do something like:<br>\n<code>FString str = FString(your_wstring.c_str());</code> \nor<br>\n<code>FString str(your_wstring.c_str());</code>  </p>\n\n<p>You could also try to read data from file straight to <code>wstring</code> or even to <code>FString</code> because UE4 has its own classes for managing files like e.g. <code>FFileHelper</code>: <a href=\"http://api.unrealengine.com/INT/API/Runtime/Core/Misc/FFileHelper/index.html\" rel=\"nofollow noreferrer\">http://api.unrealengine.com/INT/API/Runtime/Core/Misc/FFileHelper/index.html</a> and I would really recommend you this last option :-)</p>\n"}, {"tags": [], "owner": {"reputation": 39, "user_id": 7534302, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jfaWO8Q_lbo/AAAAAAAAAAI/AAAAAAAAAYw/-cOpZvzdXdE/photo.jpg?sz=128", "display_name": "Mohit Pundir", "link": "https://stackoverflow.com/users/7534302/mohit-pundir"}, "is_accepted": false, "score": 0, "last_activity_date": 1573571606, "creation_date": 1573571606, "answer_id": 58821505, "question_id": 50843234, "link": "https://stackoverflow.com/questions/50843234/convert-stdstring-to-fstring-tchar-wstring-with-special-characters/58821505#58821505", "title": "Convert std::string to FString (TCHAR / wstring) with special characters", "body": "<p>You can convert std::string to FString and than log that like this.</p>\n\n<pre><code>std::string someString = \"Hello!\";\n\nFString unrealString(someString .c_str());\n\nUE_LOG(LogTemp, Warning, TEXT(\"%s\"), *unrealString);\n</code></pre>\n\n<p>Than you can do the FString replace function on it. \n<a href=\"https://docs.unrealengine.com/en-US/API/Runtime/Core/Containers/FString/Replace/index.html\" rel=\"nofollow noreferrer\">https://docs.unrealengine.com/en-US/API/Runtime/Core/Containers/FString/Replace/index.html</a></p>\n"}], "owner": {"reputation": 77, "user_id": 6334815, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iE-Rjb84MN4/AAAAAAAAAAI/AAAAAAAAABY/i5VyzL6xKJM/photo.jpg?sz=128", "display_name": "Sebastian Schon", "link": "https://stackoverflow.com/users/6334815/sebastian-schon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 4263, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1573571606, "creation_date": 1528911761, "last_edit_date": 1528917129, "question_id": 50843234, "link": "https://stackoverflow.com/questions/50843234/convert-stdstring-to-fstring-tchar-wstring-with-special-characters", "title": "Convert std::string to FString (TCHAR / wstring) with special characters", "body": "<p>Using Unreal Engine 4, I want to load a file from the machine, which contains characters like <code>\u201c</code>, <code>\u201d</code>, <code>\u2018</code> and <code>\u2019</code>.</p>\n\n<p>All conversion attempts result in the final <code>FString</code> either containing <code>?</code> in their place, or no character at all. </p>\n\n<p><code>FString</code> is UE4's internal string class, that uses <code>TCHAR</code> (<code>wchar_t</code>), which uses UTF-16 encoding.</p>\n\n<p>Even desperate attempts to use this failed:</p>\n\n<pre><code>std::replace(str.begin(), str.end(), L'\u201c', L'\\\"');\n</code></pre>\n\n<p>Nothing happened.</p>\n\n<p>How can I properly convert between a <code>std::string</code> to an <code>FString</code>?</p>\n"}, {"tags": ["python", "c++", "deep-learning", "caffe", "pycaffe"], "answers": [{"tags": [], "owner": {"reputation": 92303, "user_id": 1714410, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a254f486ab076ab1af26162a975e90f9?s=128&d=identicon&r=PG", "display_name": "Shai", "link": "https://stackoverflow.com/users/1714410/shai"}, "is_accepted": false, "score": 1, "last_activity_date": 1528952081, "creation_date": 1528952081, "answer_id": 50849844, "question_id": 50843139, "link": "https://stackoverflow.com/questions/50843139/can-caffe-take-in-a-batch-of-inputs-with-different-resolutions-at-once-if-so-ho/50849844#50849844", "title": "Can caffe take in a batch of inputs with different resolutions at once? If so how?", "body": "<p>Caffe processes <a href=\"https://github.com/BVLC/caffe/blob/master/src/caffe/proto/caffe.proto#L10-L22\" rel=\"nofollow noreferrer\"><code>Blobs</code></a>: these are <code>N</code>-dimensional arrays, therefore the dimensions of all elements in a single batch must be of the same shape (you can <code>reshape</code> between batches).<br>\nHowever, if you are going to use the same multiple shapes for all inputs in the batch, i.e., you'll have inputs like <code>N</code>x3x160x160 + <code>N</code>x3x48x48 + <code>N</code>x3x128x128, then you can create three input layer (one for each shape) and feed the net with three types of blobs at each iteration.</p>\n"}], "owner": {"reputation": 81, "user_id": 4532133, "user_type": "registered", "profile_image": "https://graph.facebook.com/1019236114756885/picture?type=large", "display_name": "Achyut Sarma", "link": "https://stackoverflow.com/users/4532133/achyut-sarma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1528952081, "creation_date": 1528911286, "question_id": 50843139, "link": "https://stackoverflow.com/questions/50843139/can-caffe-take-in-a-batch-of-inputs-with-different-resolutions-at-once-if-so-ho", "title": "Can caffe take in a batch of inputs with different resolutions at once? If so how?", "body": "<p>I am thinking of building a larger network with more input layers which would consist of all the respective reshaped input resolutions from the batch. Please let me know if this is possible and if it is what would be the most efficient way?</p>\n\n<p>For example: 3x160x160 + 3x48x48 + 3x128x128\n                  |         |          |\n                    Rest of the network\n                  |         |          |\n                         Outputs</p>\n"}, {"tags": ["c++", "language-lawyer", "undefined-behavior", "delete-operator", "void-pointers"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2827968"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1529010097, "post_id": 50843120, "comment_id": 88734149, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/173179/discussion-between-curg-and-sergeya\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1528912648, "post_id": 50843442, "comment_id": 88690470, "body": "Does it mean that neither of mighty 3 compilers are conforming?"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 6, "creation_date": 1528912735, "post_id": 50843442, "comment_id": 88690512, "body": "@SergeyA: They are, as long as they issue a <i>diagnostic message</i>. Neither C nor C++ formally support the distinction between &quot;warnings&quot; and &quot;errors&quot;. After issuing a diagnostic message (any message) for ill-formed code, the compiler is free to continue the compilation. The behavior of the resultant code is not defined by the lanaguage, though."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1528912760, "post_id": 50843442, "comment_id": 88690519, "body": "@SergeyA No, extensions are ok if they don&#39;t change the meaning of any well-formed program (<a href=\"http://eel.is/c++draft/intro.compliance#8\" rel=\"nofollow noreferrer\">eel.is/c++draft/intro.compliance#8</a>)"}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1528912927, "post_id": 50843442, "comment_id": 88690599, "body": "@SergeyA <a href=\"https://stackoverflow.com/a/31685448/1708801\">they just have to issue a diagnostic</a> there are cases such a narrowing conversions that compilers choose warnings over errors. Legacy code could be one of many reasons."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 1, "creation_date": 1528916214, "post_id": 50843442, "comment_id": 88692204, "body": "This just begs the follow up question: why was it UB and not ill-formed <i>in C++98</i>?"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 3, "creation_date": 1528917355, "post_id": 50843442, "comment_id": 88692743, "body": "@Matteo Italia: I think DR#599 is what lead to this change. I added it to the answer."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1528988852, "post_id": 50843442, "comment_id": 88723790, "body": "Since the Standard came after the language is in use, perhaps some implementations would process a <code>delete</code> of a <code>void*</code> as though the pointer type matched that given to <code>new</code>?  Making a behavior UB is a way for the Standard to invite any implementations that behave that way to keep on doing so, without mandating that others do likewise.  Better, IMHO, would be to say that compilers could either regard it as a constraint violation, or process it with predictable semantics in at least some cases (e.g. objects without destructors), but the authors of the Standard seem loath to do that."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2827968"}, "edited": false, "score": 0, "creation_date": 1529004663, "post_id": 50843442, "comment_id": 88731741, "body": "@AnT just one small point, void* could be a pointer to an object type, you just wouldn&#39;t know when looking at the line using void*. E.g. string* p = new string; void* p2 = p; Hence my previous comment about trying to avoid the use of void*."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1529007355, "post_id": 50843442, "comment_id": 88732992, "body": "@Curg: Well, yes. But I&#39;m sure that the standard wording &quot;shall be of pointer to object type&quot; is intended to refer to the <i>static type</i> of the argument expression, not the dynamic type of the actual run-time pointee."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 1, "creation_date": 1531348710, "post_id": 50843442, "comment_id": 89567691, "body": "I would expect that some implementations probably processed <code>new</code> and <code>delete</code> in such a way that a compiler didn&#39;t have to know or care about the type of pointer passed to <code>delete</code>, and some programs may have relied upon that.  Making the behavior undefined would effectively categorize such programs as being conforming but not portable."}, {"owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "edited": false, "score": 0, "creation_date": 1616700723, "post_id": 50843442, "comment_id": 118092977, "body": "In early C++ this was in fact well formed but still did something not so nice. It either deleted the object correctly or deleted the object without running the destructor and you didn&#39;t know which."}], "tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": true, "score": 14, "last_activity_date": 1528917326, "last_edit_date": 1528917326, "creation_date": 1528912549, "answer_id": 50843442, "question_id": 50843120, "link": "https://stackoverflow.com/questions/50843120/why-deleting-void-is-ub-rather-than-compilation-error/50843442#50843442", "title": "Why deleting void* is UB rather than compilation error?", "body": "<p>In modern C++ deleting a <code>void *</code> pointer <em>is</em> ill-formed (i.e. it is what we typically call a \"compilation error\")</p>\n\n<blockquote>\n  <p><strong>8.3.5 Delete</strong><br>\n  <strong>1</strong> [...] The operand shall be of pointer to object type or of class type.</p>\n</blockquote>\n\n<p><code>void *</code> is not a pointer to object type.</p>\n\n<p>In C++98 the situation was different. Deleting a null pointer of <code>void *</code> type was a NOP, while deleting a non-null pointer of <code>void *</code> type was UB.</p>\n\n<p>This change in the specification appears to have been triggered by <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#599\" rel=\"noreferrer\">defect report #599</a>. The original spec allowed supplying null pointers of <em>any</em> pointer type in delete-expression, like function pointers, for example. This looked unnecessarily permissive. The resolution of DR#599 tightened the requirements, outlawing <code>void *</code> as well.</p>\n"}], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 769, "favorite_count": 2, "accepted_answer_id": 50843442, "answer_count": 1, "score": 10, "last_activity_date": 1528962097, "creation_date": 1528911224, "last_edit_date": 1528962097, "question_id": 50843120, "link": "https://stackoverflow.com/questions/50843120/why-deleting-void-is-ub-rather-than-compilation-error", "title": "Why deleting void* is UB rather than compilation error?", "body": "<p>Why would deleting an object through <code>void*</code> be undefined behavior, rather than compilation error?</p>\n\n<pre><code>void foo(void* p) {\n    delete p;\n}\n</code></pre>\n\n<p>This code compiles and produces code, albeit with the warning on gcc and clang (surprisingly, ICC doesn't give a warning):</p>\n\n<blockquote>\n  <p>:2:5: <strong>warning</strong>: cannot delete expression with pointer-to-'void'\n  type 'void *' [-Wdelete-incomplete]</p>\n</blockquote>\n\n<p>Why is not simply malformed program with invalid syntax? Looks like Standard doesn't spend too much time on it, saying in <code>[expr.delete]</code> that </p>\n\n<blockquote>\n  <p>This implies that an object cannot be deleted using a pointer of type\n  void* because void is not an object type.</p>\n</blockquote>\n\n<p>Would there be any reason I am missing why this does not trigger a hard compilation error?</p>\n"}, {"tags": ["c++", "cmake", "64-bit", "clion", "pdcurses"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9937314"}, "edited": false, "score": 0, "creation_date": 1528918173, "post_id": 50844302, "comment_id": 88693174, "body": "I was trying to achieve solution by mimicking the &quot;sdl2-config.cmake&quot;. And to be exact a line of code like this one:  set(SDL2_LIBRARIES &quot;-L${SDL2_LIBDIR}  -lmingw32 -lSDL2main ... -static-libgcc&quot;)"}], "tags": [], "owner": {"reputation": 424, "user_id": 3722117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f384c7ad4980b01083daf342efb3b323?s=128&d=identicon&r=PG", "display_name": "konserw", "link": "https://stackoverflow.com/users/3722117/konserw"}, "is_accepted": false, "score": 0, "last_activity_date": 1528918060, "last_edit_date": 1528918060, "creation_date": 1528915873, "answer_id": 50844302, "question_id": 50843094, "link": "https://stackoverflow.com/questions/50843094/c-64bit-project-with-pdcurses-static-link-library-via-clions-cmake/50844302#50844302", "title": "C++ 64bit project with PDCurses static link library via Clion&#39;s CMake", "body": "<p>you shouldn't treat target_link_libraries() like commandline to feed it with parameters like -Wall </p>\n\n<p>I don't know pdcurses, but when find_package finds that lib you should probably use something like:</p>\n\n<pre><code>target_link_libraries(MatrixAlgebra pdcurses::pdcurses)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9937314"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 379, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528918060, "creation_date": 1528911099, "question_id": 50843094, "link": "https://stackoverflow.com/questions/50843094/c-64bit-project-with-pdcurses-static-link-library-via-clions-cmake", "title": "C++ 64bit project with PDCurses static link library via Clion&#39;s CMake", "body": "<p>Recently I have acquired the \"curses.h\" and built the PDCurses \"pdcurses.a\" library file thanks to: \n<a href=\"https://github.com/Alexpux/MINGW-packages/tree/master/mingw-w64-pdcurses\" rel=\"nofollow noreferrer\">https://github.com/Alexpux/MINGW-packages/tree/master/mingw-w64-pdcurses</a>\npackage. I also have prepared cmake files:</p>\n\n<pre><code># pdcurses-config.cmake\nset(PDCURSES_LIBDIR \"${PROJECT_SOURCE_DIR}/lib\")\nset(PDCURSES_INCLUDE_DIRS \"${PROJECT_SOURCE_DIR}/src/include\")\nset(PDCURSES_LIBRARIES \"-L${PDCURSES_LIBDIR} -lpdcurses -static -Wall -Werror\")\nstring(STRIP \"${PDCURSES_LIBRARIES}\" PDCURSES_LIBRARIES)\n\n\n\n# CMakeLists.txt\ncmake_minimum_required(VERSION 3.10)\nproject(MatrixAlgebra)\n\nset(CMAKE_CXX_STANDARD 11)\n\nset(PDCURSES_DIR \"${PROJECT_SOURCE_DIR}/cmake\")\nfind_package(PDCURSES REQUIRED)\ninclude_directories(${PDCURSES_INCLUDE_DIRS})\n\n\nset(SOURCE_FILES src/main.cpp)\nadd_executable(MatrixAlgebra ${SOURCE_FILES})\ntarget_link_libraries(MatrixAlgebra ${PDCURSES_LIBRARIES})\n</code></pre>\n\n<p>Unfortunately I'm unable to link a simple \"Hello World!\" console program because either I am getting this:</p>\n\n<blockquote>\n  <p>mingw32/7.3.0/../../../../x86_64-w64-mingw32/bin/ld.exe: cannot find -lpdcurses\n  collect2.exe: error: ld returned 1 exit status\n  mingw32-make.exe[3]: <strong>* [CMakeFiles\\MatrixAlgebra.dir\\build.make:97: MatrixAlgebra.exe] Error 1\n  mingw32-make.exe[2]: <em></strong> [CMakeFiles\\Makefile2:67: CMakeFiles/MatrixAlgebra.dir/all] Error 2\n  mingw32-make.exe[1]: <strong></em> [CMakeFiles\\Makefile2:79: CMakeFiles/MatrixAlgebra.dir/rule] Error 2\n  mingw32-make.exe: *</strong> [Makefile:117: MatrixAlgebra] Error 2</p>\n</blockquote>\n\n<p>or this (when I change \"pdcurses.a\" to \"libpdcurses.a\"):</p>\n\n<blockquote>\n  <p>Process finished with exit code -1073741515 (0xC0000135)</p>\n</blockquote>\n\n<p>I simply don't know what to do to make it proceed without problems.</p>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1528912138, "post_id": 50843038, "comment_id": 88690213, "body": "Maybe try a different image - say a PNG image? Maybe try checking for errors and return values? Maybe show your complete code as StackOverflow requires?"}, {"owner": {"reputation": 75, "user_id": 8123150, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/--gGeftMwtLo/AAAAAAAAAAI/AAAAAAAAH5E/UdFRpbF4uuU/photo.jpg?sz=128", "display_name": "LocketGoma", "link": "https://stackoverflow.com/users/8123150/locketgoma"}, "reply_to_user": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1528914616, "post_id": 50843038, "comment_id": 88691421, "body": "i just exclude include code. / nothing errors. / diff image also make gray window : &lt;"}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1528915355, "post_id": 50843038, "comment_id": 88691789, "body": "Your code cannot be compiled as it is, so it is incomplete. Your code doesn&#39;t check the error values, so it&#39;s not surprising there are no errors. Did you check a different format image?"}, {"owner": {"reputation": 75, "user_id": 8123150, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/--gGeftMwtLo/AAAAAAAAAAI/AAAAAAAAH5E/UdFRpbF4uuU/photo.jpg?sz=128", "display_name": "LocketGoma", "link": "https://stackoverflow.com/users/8123150/locketgoma"}, "reply_to_user": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1528949864, "post_id": 50843038, "comment_id": 88701912, "body": "Incomplete? Um... ok i will check your opnions. thx"}], "answers": [{"tags": [], "owner": {"reputation": 75, "user_id": 8123150, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/--gGeftMwtLo/AAAAAAAAAAI/AAAAAAAAH5E/UdFRpbF4uuU/photo.jpg?sz=128", "display_name": "LocketGoma", "link": "https://stackoverflow.com/users/8123150/locketgoma"}, "is_accepted": true, "score": 0, "last_activity_date": 1529156645, "creation_date": 1529156645, "answer_id": 50888450, "question_id": 50843038, "link": "https://stackoverflow.com/questions/50843038/opencv-why-gray-window-always-generate/50888450#50888450", "title": "OpenCV : why &quot;Gray window&quot; always generate?", "body": "<p>I Solved.</p>\n\n<p>It problem is Version Issue. (3.4.1)</p>\n"}], "owner": {"reputation": 75, "user_id": 8123150, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/--gGeftMwtLo/AAAAAAAAAAI/AAAAAAAAH5E/UdFRpbF4uuU/photo.jpg?sz=128", "display_name": "LocketGoma", "link": "https://stackoverflow.com/users/8123150/locketgoma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 50888450, "answer_count": 1, "score": -1, "last_activity_date": 1529156645, "creation_date": 1528910856, "question_id": 50843038, "link": "https://stackoverflow.com/questions/50843038/opencv-why-gray-window-always-generate", "title": "OpenCV : why &quot;Gray window&quot; always generate?", "body": "<p>I already See  that page :: \"<a href=\"https://stackoverflow.com/questions/5845460/opencv-cvmat-displays-empty-gray-images-cant-find-the-reason\">OpenCV cv::Mat displays empty gray images? Cant find the reason</a>\"</p>\n\n<p>In my code, I want to show some image.</p>\n\n<pre><code>cv::Mat img;\nimg = cv::imread(\"stop.jpg\", CV_LOAD_IMAGE_COLOR);\ncv::imshow(\"EXAM\", img);\ncv::waitKey(0);\ncv::destroyWindow(\"EXAM\");\n</code></pre>\n\n<p>but it code is generate Just Gray window. and Window size is same input image.</p>\n\n<p>Is may occur 'not installed jpeg codec'. but it situation has doubtful point.</p>\n\n<pre><code>cv::Mat img;\nimg = cv::imread(\"stop.jpg\", CV_LOAD_IMAGE_COLOR);\ncv::namedWindow(\"EXAM\",CV_WINDOW_AUTOSIZE);  // &lt;&lt;-- added\ncv::imshow(\"EXAM\", img);\ncv::waitKey(0);\ncv::destroyWindow(\"EXAM\");\n</code></pre>\n\n<p>when starting that code, 'stop.jpg' image are clearly open.</p>\n\n<p><strong>+ also generate Damn Gray window.</strong></p>\n\n<p>I don't, really don't understand. i don't want generate Gray window.</p>\n\n<p>because if setting eventlistener in image Window, don't work at image window. </p>\n\n<p>instead listener works in \"Gray Window\".</p>\n\n<p>If i can't remove Gray Window, i want working eventlistener in image window. not Gray Window.</p>\n\n<p>Please Help.</p>\n"}, {"tags": ["c++", "arrays", "pointers", "data-structures", "struct"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1528910840, "post_id": 50843005, "comment_id": 88689565, "body": "There&#39;s a lot going on in this code. Why do you <code>new</code> everything? Why do you use an array of size 1? Why do you use <code>printf</code> in c++? Why do you <code>typedef</code> your <code>struct</code>? It seems you may be mixing c and c++ tutorials. Avoid c tutorial when learning c++."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 2, "creation_date": 1528910880, "post_id": 50843005, "comment_id": 88689585, "body": "Stop using so many pointers and <code>new</code> <b>right now</b>. Use <code>std::vector</code>. C++ isn&#39;t C."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1528911088, "post_id": 50843005, "comment_id": 88689685, "body": "<a href=\"https://godbolt.org/g/wE7EG7\" rel=\"nofollow noreferrer\">This</a> is pretty much what you wrote, formatted to make it easier to see how <code>data</code> is initialized. You have three <code>new</code>s per <code>Data</code>."}], "answers": [{"comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1528912128, "post_id": 50843191, "comment_id": 88690208, "body": "Fields that are not listed by an aggregate-initialization are value-initialized, which for pointer does indeed mean that they&#39;re set to <code>nullptr</code>."}], "tags": [], "owner": {"reputation": 2364, "user_id": 8349252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/224zf.png?s=128&g=1", "display_name": "Kaldrr", "link": "https://stackoverflow.com/users/8349252/kaldrr"}, "is_accepted": false, "score": 1, "last_activity_date": 1528911520, "creation_date": 1528911520, "answer_id": 50843191, "question_id": 50843005, "link": "https://stackoverflow.com/questions/50843005/how-to-fill-array-of-struct-containing-pointer-arrays/50843191#50843191", "title": "How to fill array of struct containing pointer arrays", "body": "<p>Your <code>Data</code> struct contains 2 fields, array of 2 <code>double</code> pointers, and array of 1 <code>double</code> pointers.</p>\n\n<p>That means that initalizing it takes up to 3 <code>double</code> pointers, which means that in your initalization really looks like this</p>\n\n<pre><code>Data data[]{\n{new double[2]{ 10, 20 },   new double[1]{ 30 },        new double[2]{ 40, 50 }}, //1st object\n{new double[1]{ 60 },       new double[2]{ 70, 80 },    new double[1]{ 90 }}, //2nd object\n{new double[2]{ 100, 110 }, new double[1]{ 120 }} //3rd object but 2 parameters??\n};\n</code></pre>\n\n<p>When trying to print it in a loop, 3rd object will cause a segfault, as <code>target</code> field hasn't been properly initalized (when debugging with Visual Studio it's set to null, not sure about other compilers).</p>\n"}, {"tags": [], "owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "is_accepted": true, "score": 3, "last_activity_date": 1528912797, "last_edit_date": 1528912797, "creation_date": 1528912285, "answer_id": 50843372, "question_id": 50843005, "link": "https://stackoverflow.com/questions/50843005/how-to-fill-array-of-struct-containing-pointer-arrays/50843372#50843372", "title": "How to fill array of struct containing pointer arrays", "body": "<p>Using modern c++ makes your code both simpler and safer:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;array&gt;\n#include &lt;vector&gt;\n\nstruct Data {\n    std::array&lt;double,2&gt; inputs;\n    std::array&lt;double,1&gt; target;\n};\n\nint main()\n{\n    std::vector&lt;Data&gt; data = {\n        { {10, 20}, {30} },\n        { {40, 50}, {60} },\n        { {70, 80}, {90} },\n        { {100, 110}, {120} }\n    };\n    std::cout &lt;&lt; \"data[0]: inputs: \" &lt;&lt; data[0].inputs[0] &lt;&lt; \" \" &lt;&lt; data[0].inputs[1] &lt;&lt; \", targets: \" &lt;&lt; data[0].target[0] &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>Your original problem is that <code>double *inputs[2]</code> declares a 2 element array of pointers to <code>double</code> not a pointer to a 2 element array of <code>doubles</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "is_accepted": false, "score": 1, "last_activity_date": 1528916440, "last_edit_date": 1528916440, "creation_date": 1528912474, "answer_id": 50843420, "question_id": 50843005, "link": "https://stackoverflow.com/questions/50843005/how-to-fill-array-of-struct-containing-pointer-arrays/50843420#50843420", "title": "How to fill array of struct containing pointer arrays", "body": "<p>Your problem is here:</p>\n\n<pre><code>typedef struct {\n    double *inputs[2];  // this\n    double *target[1];  // this\n} Data;\n</code></pre>\n\n<p>This is an array of pointers and hopefully assumed to behave live a dynamic 1D array. \nSimple fix is:</p>\n\n<pre><code>struct Data {\n    double *inputs = nullptr;\n    double *target = nullptr;\n} ;\n</code></pre>\n\n<p>However, you have a lot of heap memory allocation using <code>new</code>, which makes a tedious task to <code>delete</code> and thereby the management of your data structure really difficult.\nI would strongly suggest you to use  <code>std::vector&lt;&gt;</code>, which makes your task much easier and more cleaner.</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;iostream&gt;\n\nstruct Data\n{\n   std::vector&lt;double&gt; inputs; // use  instead of double *inputs[2];\n   std::vector&lt;double&gt; target; // use  instead of double *target[1];\n   //Data(const std::vector&lt;double&gt;&amp; a, const std::vector&lt;double&gt;&amp; b) :inputs(a), target(b){}\n};\n\nint main()\n{\n   std::vector&lt;Data&gt; data = // now in your main structure array\n   {  { {10, 20}, {30} },\n      { {40, 50}, {60} },\n      { {70, 80}, {90} },\n      { {100, 110},{120} }\n   };\n   // access using range based loop now\n   for(const Data&amp; each_strcut: data)\n      std::cout &lt;&lt; each_strcut.inputs[0] &lt;&lt; \" \" &lt;&lt; each_strcut.inputs[1]\n                &lt;&lt;\"\\t\" &lt;&lt; each_strcut.target[0] &lt;&lt; std::endl;\n   return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 9937444, "user_type": "registered", "profile_image": "https://graph.facebook.com/1144087622397537/picture?type=large", "display_name": "Tomhaus", "link": "https://stackoverflow.com/users/9937444/tomhaus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 50843372, "answer_count": 3, "score": 2, "last_activity_date": 1529049431, "creation_date": 1528910684, "last_edit_date": 1529049431, "question_id": 50843005, "link": "https://stackoverflow.com/questions/50843005/how-to-fill-array-of-struct-containing-pointer-arrays", "title": "How to fill array of struct containing pointer arrays", "body": "<p>I have an small and quite simple issue in C++. I want to fill array of struct containing double arrays. How can I do that? </p>\n\n<pre><code>typedef struct \n{\n    double *inputs[2];\n    double *target[1];\n} Data;\n\nData data[] \n{\n    new double[2]{10, 20}, new double[1]{30},\n    new double[2]{40, 50}, new double[1]{60},\n    new double[2]{70, 80}, new double[1]{90},\n    new double[2]{100, 110}, new double[1]{120} \n};\n</code></pre>\n\n<p>and in the <code>main()</code></p>\n\n<pre><code>printf(\"data[0]: inputs: %f %f, targets: %f\\n\",\n                   *data[0].inputs[0],\n                   *data[0].inputs[1],\n                   *data[0].target[0]);\n</code></pre>\n\n<p>This is my idea, but when I run that it will print this:</p>\n\n<pre><code>data[0]: inputs: 10.000000 30.000000, targets: 40.000000\n</code></pre>\n\n<p>Of course, at the end of the array data (like 3rd or 4th item) it will cause <code>UNAUTHORIZED ACCESS TO MEMORY</code></p>\n\n<p>Thank you for your ideas and patience ;)</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 982, "user_id": 5314692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/772574311ed4da5b181c0134a99dda29?s=128&d=identicon&r=PG&f=1", "display_name": "Semyon Burov", "link": "https://stackoverflow.com/users/5314692/semyon-burov"}, "edited": false, "score": 3, "creation_date": 1528910741, "post_id": 50842964, "comment_id": 88689504, "body": "You didn&#39;t initialize your <code>std::valarray</code> and <code>std::vector</code>."}, {"owner": {"reputation": 991, "user_id": 6267719, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a21811278f7f2fbbfbca475cbbb4a88b?s=128&d=identicon&r=PG&f=1", "display_name": "Prunus Persica", "link": "https://stackoverflow.com/users/6267719/prunus-persica"}, "reply_to_user": {"reputation": 982, "user_id": 5314692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/772574311ed4da5b181c0134a99dda29?s=128&d=identicon&r=PG&f=1", "display_name": "Semyon Burov", "link": "https://stackoverflow.com/users/5314692/semyon-burov"}, "edited": false, "score": 0, "creation_date": 1528911563, "post_id": 50842964, "comment_id": 88689923, "body": "What do you mean by initialise? My understanding was that since the constructor takes <code>b</code> and <code>c</code> as arguments then they will be assigned to member variables of the same name?"}], "answers": [{"tags": [], "owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "is_accepted": true, "score": 2, "last_activity_date": 1528913897, "creation_date": 1528913897, "answer_id": 50843778, "question_id": 50842964, "link": "https://stackoverflow.com/questions/50842964/c-stdvalarray-member-variable-unexpected-change/50843778#50843778", "title": "C++ std::valarray member variable unexpected change", "body": "<blockquote>\n  <p>My understanding was that since the constructor takes b and c as\n  arguments then they will be assigned to member variables of the same\n  name</p>\n</blockquote>\n\n<p>This is incorrect. You can initialize member variable via member initializer list, via default initialization or by assigning values directly in the body of constructor. For example:</p>\n\n<pre><code>A(std::valarray&lt;int&gt; b, std::vector&lt;int&gt; c)\n  : b(b), c(c)\n{...\n</code></pre>\n\n<p>or</p>\n\n<pre><code>private:\n  std::valarray&lt;int&gt; b = {1, 3};\n  std::vector&lt;int&gt; c = {4, 2, 8, 17};\n</code></pre>\n\n<p>or </p>\n\n<pre><code>A(std::valarray&lt;int&gt; b, std::vector&lt;int&gt; c)\n{\n    this-&gt;b = b;\n    this-&gt;c = c;\n    ...\n</code></pre>\n\n<p>You have done none of the above, so your <code>valaray</code> of <code>int</code>'s is size of 0. When you return its copy and trying to access non-existing element</p>\n\n<blockquote>\n  <p>// returns a random large number such as 26618992</p>\n</blockquote>\n\n<p>you get some garbage value from the memory.</p>\n"}], "owner": {"reputation": 991, "user_id": 6267719, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a21811278f7f2fbbfbca475cbbb4a88b?s=128&d=identicon&r=PG&f=1", "display_name": "Prunus Persica", "link": "https://stackoverflow.com/users/6267719/prunus-persica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 50843778, "answer_count": 1, "score": 2, "last_activity_date": 1528914009, "creation_date": 1528910557, "question_id": 50842964, "link": "https://stackoverflow.com/questions/50842964/c-stdvalarray-member-variable-unexpected-change", "title": "C++ std::valarray member variable unexpected change", "body": "<p>I have a class <code>A</code> whose constructor takes as one of its arguments as an <a href=\"http://en.cppreference.com/w/cpp/numeric/valarray\" rel=\"nofollow noreferrer\">std::valarray</a>[^1], however I have found that its values change to large random numbers once the constructor has finished.</p>\n\n<p>As an aside, there could be an issue with my getters and setters, which I just started using in the cotext of C++ with the help of this <a href=\"https://stackoverflow.com/questions/760777/c-getters-setters-coding-style#760877\">SO question</a> and <code>18.3.5 Accessor Functions</code> from <a href=\"http://www.stroustrup.com/4th.html\" rel=\"nofollow noreferrer\">Stroustrup's The C++ Programming Language</a>.</p>\n\n<p>Stroustrup's format of <code>constexpr double real() const { return re; }</code> is what my example ended up using, however without <code>constexpr</code> since my class didn't like it (I'm trying to understand <a href=\"https://stackoverflow.com/questions/14116003/difference-between-constexpr-and-const\">why</a> but still haven't got it yet).</p>\n\n<p>A comment on the <a href=\"https://stackoverflow.com/a/50815147/6267719\">accepted answer</a> of my question by user <a href=\"https://stackoverflow.com/users/5212827/deidei\">deidei</a> says that <code>std::valarray</code> is \"dynamic\", which I guess here means that you can resize it.  That might bring issues when it comes to memory, and I think that my values might have been overwritten somehow due to this fact.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;valarray&gt;\n#include &lt;vector&gt;\n\nclass A\n{\npublic:\n  A(std::valarray&lt;int&gt; b, std::vector&lt;int&gt; c)\n  {\n      std::cout&lt;&lt; b[0]  &lt;&lt; std::endl;\n  };\n\n  std::valarray&lt;int&gt; get_b() const {return b;};\n  std::vector&lt;int&gt; get_c() const {return c;};\n\nprivate:\n  std::valarray&lt;int&gt; b;\n  std::vector&lt;int&gt; c;\n};\n\nint main()\n{\n  std::valarray&lt;int&gt; b = {1, 3};\n  std::vector&lt;int&gt; c = {4, 2, 8, 17};\n\n  A a(b,c);\n  std::cout&lt;&lt; a.get_b()[0] &lt;&lt; std::endl; // returns a random large number such as 26618992\n\n  return 0;\n}\n</code></pre>\n\n<p>What issue might be causing this problem?</p>\n\n<p>[^1]: (inspired by the <a href=\"https://stackoverflow.com/a/50815147/6267719\">answer to my previous question</a>, for those of you playing along at home)</p>\n"}, {"tags": ["c++", "c++11", "language-lawyer", "using-declaration"], "comments": [{"owner": {"reputation": 336, "user_id": 9871727, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSNoF.png?s=128&g=1", "display_name": "Trevor Tracy", "link": "https://stackoverflow.com/users/9871727/trevor-tracy"}, "edited": false, "score": 0, "creation_date": 1528910875, "post_id": 50842961, "comment_id": 88689578, "body": "This question might help you: <a href=\"https://stackoverflow.com/questions/42573771/why-is-this-call-to-member-function-ambiguous\" title=\"why is this call to member function ambiguous\">stackoverflow.com/questions/42573771/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 5009, "user_id": 1455108, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/zaRtd.jpg?s=128&g=1", "display_name": "Jo&#227;o Paulo", "link": "https://stackoverflow.com/users/1455108/jo%c3%a3o-paulo"}, "is_accepted": false, "score": 0, "last_activity_date": 1528916103, "last_edit_date": 1528916103, "creation_date": 1528914957, "answer_id": 50844057, "question_id": 50842961, "link": "https://stackoverflow.com/questions/50842961/conflicting-overloads-with-using-declaration/50844057#50844057", "title": "Conflicting overloads with using-declaration", "body": "<p>GCC lets it compile and <code>test()</code> call becomes the first declaration. In the example given, it'll call the <code>A::test()</code>. But ISO C++ defines it as ambiguous. Visual Studio and clang won't let you compile it. Additionally, this the VS error message: <code>'B::test': ambiguous call to overloaded function</code>. In my opinion, GCC is wrong by letting it compile.</p>\n"}, {"tags": [], "owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "is_accepted": true, "score": 1, "last_activity_date": 1528915935, "creation_date": 1528915935, "answer_id": 50844317, "question_id": 50842961, "link": "https://stackoverflow.com/questions/50842961/conflicting-overloads-with-using-declaration/50844317#50844317", "title": "Conflicting overloads with using-declaration", "body": "<p>I believe Clang is correct.\nAccording to <a href=\"https://timsong-cpp.github.io/cppwp/n3337/namespace.udecl#13\" rel=\"nofollow noreferrer\">[namespace.udecl]/13</a>:</p>\n\n<blockquote>\n  <p>Since a <em>using-declaration</em> is a declaration, the restrictions on declarations of the same name in the same declarative region ([basic.scope]) also apply to <em>using-declarations</em>.</p>\n</blockquote>\n\n<p>Since you can't declare two identical member functions, the same applies to <code>using</code> declarations.</p>\n"}], "owner": {"reputation": 4035, "user_id": 708333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d44c2c40695f724c785ff3c2816232d3?s=128&d=identicon&r=PG&f=1", "display_name": "TimK", "link": "https://stackoverflow.com/users/708333/timk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 50844317, "answer_count": 2, "score": 2, "last_activity_date": 1528916103, "creation_date": 1528910550, "last_edit_date": 1528911427, "question_id": 50842961, "link": "https://stackoverflow.com/questions/50842961/conflicting-overloads-with-using-declaration", "title": "Conflicting overloads with using-declaration", "body": "<pre><code>#include &lt;iostream&gt;\nstruct A {\n  void test() { std::cout &lt;&lt; \"A\\n\"; }\n};\nstruct B : A {\n  void test() { std::cout &lt;&lt; \"B\\n\"; }\n};\nstruct C : B {\n  using A::test;\n  using B::test;\n};\nint main() {\n  C().test();  // Is this ambiguous?\n  return 0;\n}\n</code></pre>\n\n<p>In this example, g++ 8.1.0 compiles successfully and calls <code>test()</code> from <code>B</code>.</p>\n\n<p>clang++ 3.8.0 reports: <code>error: call to member function 'test' is ambiguous</code>.</p>\n\n<p>Which is correct? If it is g++, what is the rule that picks <code>B::test</code> over <code>A::test</code>?</p>\n"}, {"tags": ["c++", "udp", "client", "boost-asio"], "owner": {"reputation": 4223, "user_id": 710955, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/GvorM.png?s=128&g=1", "display_name": "LeMoussel", "link": "https://stackoverflow.com/users/710955/lemoussel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 679, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1528910728, "creation_date": 1528910327, "last_edit_date": 1528910728, "question_id": 50842905, "link": "https://stackoverflow.com/questions/50842905/how-to-receive-broadcast-packets-send-data-from-udp-port-with-boostasio", "title": "How to receive broadcast packets &amp; send data from UDP Port with boost::asio", "body": "<p>I apologize in advance if the question has been previously answered, but I've searched and found nothing that helps me. \nI 'm trying to broadcast from a server to a set of clients listening for any message. When client receive broadcast message, it send an another message to the server.</p>\n\n<pre><code>                                                               .--------.\n                                                              .--------.|\n.--------. address: any                         address: any .--------.||\n|        | port: any      /                  \\    port: 8888 |        |||\n| server |-( -----------&gt;| address: broadcast |----------&gt; )-| client ||'\n|        |                \\    port: 8888    /               |        |'\n|        |                                                   |        |\n'--------'-( &lt;-----------  ( address: server ) &lt;---------- )-'--------'\n                           ( port: 8888 ?    )\n</code></pre>\n\n<p><strong>Server.cpp</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n\n#include &lt;boost/asio.hpp&gt;\n#include &lt;boost/array.hpp&gt;\n\nint main()\n{\n  namespace ip = boost::asio::ip;\n  boost::asio::io_service io_service;\n\n  // Server binds to any address and any port.\n  ip::udp::socket socket(io_service,\n                         ip::udp::endpoint(ip::udp::v4(), 0));\n  socket.set_option(boost::asio::socket_base::broadcast(true));\n\n  // Broadcast will go to port 8888.\n  ip::udp::endpoint broadcast_endpoint(ip::address_v4::broadcast(), 8888);\n\n  // Broadcast data.\n  boost::array&lt;char, 4&gt; buffer;\n  socket.send_to(boost::asio::buffer(buffer), broadcast_endpoint);\n\n  ip::udp::endpoint sender_endpoint; \n  std::size_t bytes_transferred = socket.receive_from(boost::asio::buffer(buffer), sender_endpoint);\n  std::cout &lt;&lt; \"Server got \" &lt;&lt; bytes_transferred &lt;&lt; \" bytes.\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p><strong>Client.cpp</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n\n#include &lt;boost/asio.hpp&gt;\n#include &lt;boost/array.hpp&gt;\n\nint main()\n{\n  namespace ip = boost::asio::ip;\n  boost::asio::io_service io_service;\n\n  // Client binds to any address on port 8888 (the same port on which\n  // broadcast data is sent from server).\n  ip::udp::socket socket(io_service, \n                         ip::udp::endpoint(ip::udp::v4(), 8888 ));\n\n  ip::udp::endpoint sender_endpoint;\n\n  // Receive data.\n  boost::array&lt;char, 4&gt; buffer;\n  std::size_t bytes_transferred = socket.receive_from(boost::asio::buffer(buffer), sender_endpoint);\n\n  std::cout &lt;&lt; \"Client got \" &lt;&lt; bytes_transferred &lt;&lt; \" bytes.\" &lt;&lt; std::endl;\n\n  boost::asio::ip::udp::resolver resolver(io_service);\n  boost::asio::ip::udp::resolver::query query(boost::asio::ip::udp::v4(), \"localhost\", \"8888\");\n  boost::asio::ip::udp::resolver::iterator iter = resolver.resolve(query);\n  boost::asio::ip::udp::endpoint remote_endpoint = *iter;\n  socket.send_to(boost::asio::buffer(buffer), remote_endpoint);\n}\n</code></pre>\n\n<p><code>client</code> receive broadcat message, but <code>server</code> does not receive message sent by <code>client</code>.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c++", "c++11", "pointers"], "comments": [{"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 9, "creation_date": 1528909909, "post_id": 50842770, "comment_id": 88689048, "body": "You only <code>delete</code> what you <code>new</code>. That always holds!! Stuff with automatic memory will have its memory handled automatically irrelevant of what you cast it to."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1528910053, "post_id": 50842770, "comment_id": 88689125, "body": "If you don&#39;t know where an allocation came from check the documentation for whatever provided it. It may be managed for you and it may require you to call a API function to free it."}, {"owner": {"reputation": 1459, "user_id": 5410505, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XNWBi.png?s=128&g=1", "display_name": "kamikaze", "link": "https://stackoverflow.com/users/5410505/kamikaze"}, "edited": false, "score": 0, "creation_date": 1528910066, "post_id": 50842770, "comment_id": 88689135, "body": "Not all memory in C++ has to be released, both primitive types and objects may be somewhere on the stack, or in the global data section. Having a pointer to something does not mean it needs to be freed."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1528910903, "post_id": 50842770, "comment_id": 88689597, "body": "I&#39;m worried that this question may encourage bad habits.  A <code>void*</code> is rather unusual in C++.  Putting that <code>void*</code> in charge of the lifetime of an object is almost certainly a design mistake."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1528914679, "post_id": 50842770, "comment_id": 88691454, "body": "&#39;Assume I have a pointer void* p&#39;  There is literally no need for a void* in modern c++; it&#39;s a hack to do things that weren&#39;t possible in C, which got carried over, but in all modern c++ code, even if it interacts with C, shouldn&#39;t use them.  Your assumption is rejected ;)"}, {"owner": {"reputation": 3960, "user_id": 654614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fc0d43eb99234ed9702badb191b7d96?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Boyne", "link": "https://stackoverflow.com/users/654614/frank-boyne"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1528914752, "post_id": 50842770, "comment_id": 88691486, "body": "@DrewDormann Now we have Modern C++ and smart pointers calling <code>new</code> and <code>delete</code> is (usually) a bad habit!"}, {"owner": {"reputation": 3754, "user_id": 4732082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/781cea048e688814961606ddf35c5881?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous", "link": "https://stackoverflow.com/users/4732082/anonymous"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1528925789, "post_id": 50842770, "comment_id": 88696770, "body": "@UKMonkey: Win32 programming frequently uses <code>void *</code>. Legacy code is everywhere."}], "answers": [{"comments": [{"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 1, "creation_date": 1528910159, "post_id": 50842823, "comment_id": 88689188, "body": "What happens if they write <code>int* a = new int; void* p = a; delete p;</code>? Is that safe (and possibly what the OP actually needs to know)?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 2, "creation_date": 1528910249, "post_id": 50842823, "comment_id": 88689248, "body": "@Xirema Deleting a void * is undefined."}, {"owner": {"reputation": 3142, "user_id": 2311167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rZpVr.jpg?s=128&g=1", "display_name": "Adrian W", "link": "https://stackoverflow.com/users/2311167/adrian-w"}, "edited": false, "score": 1, "creation_date": 1528910572, "post_id": 50842823, "comment_id": 88689413, "body": "see <a href=\"https://stackoverflow.com/a/941959/\">Deleting via a void pointer is undefined by the C++ Standard</a>"}], "tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": true, "score": 6, "last_activity_date": 1528910344, "last_edit_date": 1528910344, "creation_date": 1528910005, "answer_id": 50842823, "question_id": 50842770, "link": "https://stackoverflow.com/questions/50842770/c-do-i-need-to-manually-delete-a-void-pointer-which-is-then-pointing-to-anoth/50842823#50842823", "title": "c++ do I need to manually delete a void* pointer which is then pointing to another concrete type?", "body": "<p>That all depends on how the <code>int</code> you're pointing to was allocated, you only <code>delete</code> what you <code>new</code>.</p>\n\n<hr>\n\n<p>Correct (the <code>int</code> is <code>new</code>'d):</p>\n\n<pre><code>int* a = new int;\nvoid* p = a;\n\n//somewhere later...\n\ndelete static_cast&lt;int*&gt;(p);\n</code></pre>\n\n<hr>\n\n<p>Bad (the <code>int</code> is automatically managed):</p>\n\n<pre><code>int a = 0;\nvoid* p = &amp;a;\n\n//somewhere later...\n\ndelete static_cast&lt;int*&gt;(p);\n</code></pre>\n\n<hr>\n\n<p>Answering the comment code, doing:</p>\n\n<pre><code>int* a = new int; \nvoid* p = a; \n\ndelete p;\n</code></pre>\n\n<p>Is <em>never</em> okay. You should never <code>delete</code> through a <code>void*</code>, it's undefined behavior.</p>\n\n<hr>\n\n<p>side note : in modern C++ you really shouldn't be using <code>new</code> or <code>delete</code>, stick with smart pointers or standard containers.</p>\n"}, {"tags": [], "owner": {"reputation": 3960, "user_id": 654614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fc0d43eb99234ed9702badb191b7d96?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Boyne", "link": "https://stackoverflow.com/users/654614/frank-boyne"}, "is_accepted": false, "score": 2, "last_activity_date": 1528914432, "last_edit_date": 1528914432, "creation_date": 1528913574, "answer_id": 50843687, "question_id": 50842770, "link": "https://stackoverflow.com/questions/50842770/c-do-i-need-to-manually-delete-a-void-pointer-which-is-then-pointing-to-anoth/50843687#50843687", "title": "c++ do I need to manually delete a void* pointer which is then pointing to another concrete type?", "body": "<p>The short answer is: \"It depends\".</p>\n\n<blockquote>\n  <p>In most places people say <code>delete</code> only happen when there is <code>new</code>.</p>\n</blockquote>\n\n<p>That's true so far as it goes.  To avoid wasting resources and to ensure all destructors are called correctly every <code>new</code> has to be balanced by a <code>delete</code> somewhere.  If your code can follow several paths you have to make sure that every path calls <code>delete</code> (if calling <code>delete</code> is appropriate).  </p>\n\n<p>The can get tricky when exceptions are thrown which is one reason why <a href=\"https://isocpp.org/tour\" rel=\"nofollow noreferrer\">Modern C++</a> programmers generally avoid using <code>new</code> and <code>delete</code>.  Instead they use the smart pointers <code>std::unique_ptr</code> and <code>std::shared_ptr</code> along with the helper template functions <code>std::make_unique&lt;T&gt;</code> and <code>std::make_shared&lt;T&gt;</code> (see the SO question: <a href=\"https://stackoverflow.com/questions/106508/what-is-a-smart-pointer-and-when-should-i-use-one\">What is a smart pointer and when should I use one?</a>) to implement a technique known as <a href=\"https://en.wikipedia.org/wiki/Resource_acquisition_is_initialization\" rel=\"nofollow noreferrer\">RAII (Resource Acquisition Is Instantiation)</a>.</p>\n\n<blockquote>\n  <p>But in this case, it's not \u2026</p>\n</blockquote>\n\n<p>Remember that the phrase <em>... when there is a <code>new</code></em> refers to the object the pointer points to <strong>not</strong> the pointer itself.  Consider the following code...</p>\n\n<pre><code>int *a = new int();\n\nvoid *p = a;\n\nif (SomeTest())\n{\n   delete a;\n}\nelse\n{\n   a = nullptr;\n}\n\n// This line is needed if SomeTest() returned false\n// and undefined (dangerous) if SomeTest() returned true\ndelete static_cast&lt;int *&gt; (p);\n</code></pre>\n\n<p>Is that last line of code needed?  </p>\n\n<p>The object that <code>a</code> and <code>p</code> both point to was created by calling <code>new</code> so <code>delete</code> has to be called on <em>something</em>.  If the function <code>SomeTest()</code> returned <code>false</code> then <code>a</code> has been set to <code>nullptr</code> so calling <code>delete</code> on it won't affect the object we created.  Which means we <em>do</em> need that last line of code to properly delete the object that was newed up in the first line of code.</p>\n\n<p>On the other hand, if the function <code>SomeTest()</code> returned <code>true</code> then we've already called <code>delete</code> for the object via the pointer <code>a</code>.  In that case the last line of code is <strong>not</strong> needed and in fact may be dangerous.  </p>\n\n<p>The C++ standard says that calling <code>delete</code> on an object that has already been deleted results in \"undefined behaviour\" which means <em>anything</em> could happen.  See the SO question: <a href=\"https://stackoverflow.com/q/9169774/654614\">What happens in a double delete?</a></p>\n\n<blockquote>\n  <p>does C++ itself remember to release that memory?</p>\n</blockquote>\n\n<p>Not for anything created by calling <code>new</code>.  When you call <code>new</code> you are telling the compiler \"I've got this, I will release that memory (by calling <code>delete</code>) when appropriate\".</p>\n\n<blockquote>\n  <p>do I need to manually delete</p>\n</blockquote>\n\n<p>Yes: <strong>if the object pointed to needs to be deleted here and the <code>void *</code> pointer is the only pointer you can use to <code>delete</code> the object</strong>.</p>\n"}], "owner": {"reputation": 51, "user_id": 8218075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d3cd888ea111a760ea7b2fc6359e496?s=128&d=identicon&r=PG&f=1", "display_name": "Billadsf", "link": "https://stackoverflow.com/users/8218075/billadsf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "accepted_answer_id": 50842823, "answer_count": 2, "score": 2, "last_activity_date": 1528914432, "creation_date": 1528909827, "question_id": 50842770, "link": "https://stackoverflow.com/questions/50842770/c-do-i-need-to-manually-delete-a-void-pointer-which-is-then-pointing-to-anoth", "title": "c++ do I need to manually delete a void* pointer which is then pointing to another concrete type?", "body": "<p>Assume I have a pointer <code>void* p</code>, then after some passing in and out of functions, let's say p is now pointing to <code>int</code>. Then do I need to manually delete as <code>delete static_cast&lt;int*&gt;(p)</code>? </p>\n\n<p>In most places people say <code>delete</code> only happen when there is <code>new</code>. But in this case, it's not but does C++ itself remember to release that memory?</p>\n"}, {"tags": ["c++", "qt", "memory-leaks", "memory-dump", "qsharedpointer"], "answers": [{"tags": [], "owner": {"reputation": 444, "user_id": 9865869, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-p2qxnOoReHw/AAAAAAAAAAI/AAAAAAAACOo/Ex_LUebVKPg/photo.jpg?sz=128", "display_name": "Tim Boddy", "link": "https://stackoverflow.com/users/9865869/tim-boddy"}, "is_accepted": false, "score": 1, "last_activity_date": 1528964613, "last_edit_date": 1528964613, "creation_date": 1528913804, "answer_id": 50843747, "question_id": 50842760, "link": "https://stackoverflow.com/questions/50842760/qt-4-8-7-memory-artefacts/50843747#50843747", "title": "Qt 4.8.7 memory artefacts", "body": "<p>If the core that you already have is an ELF based core from Linux on some x86 based platform and your process used libc malloc, one way to understand what these objects are (temporary objects or leaks) is to use the free open source software <a href=\"https://github.com/vmware/chap\" rel=\"nofollow noreferrer\">https://github.com/vmware/chap</a> to figure that out.  After you have built chap you start it like this:</p>\n\n<p>chap <em>core-file-name</em></p>\n\n<p>Then to answer your particular question issue the following commands from the chap prompt:</p>\n\n<p>redirect on</p>\n\n<p>show leaked</p>\n\n<p>show anchored</p>\n\n<p>show free</p>\n\n<p>Then look in each of the 3 resulting text files for the pattern that you saw in the core.  If the pattern is seen in the output from \"show leaked\", you have a leak.  If it is seen in the output from \"show anchored\", the objects are likely held in some container, but there is still a possibility that it is leaked.  If it is seen in the output of \"show free\", it is from a temporary allocation that now has been freed.</p>\n\n<p>Alternatively, if you already know the virtual address of that pattern and want to see how it was used, after you have started chap on the given core you can just use the following command:</p>\n\n<p>describe <em>virtual-address-in-hexadecimal</em></p>\n"}], "owner": {"reputation": 23, "user_id": 9937370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53a463b25c84525e666f5e9e282d3308?s=128&d=identicon&r=PG&f=1", "display_name": "PMA", "link": "https://stackoverflow.com/users/9937370/pma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528964613, "creation_date": 1528909794, "question_id": 50842760, "link": "https://stackoverflow.com/questions/50842760/qt-4-8-7-memory-artefacts", "title": "Qt 4.8.7 memory artefacts", "body": "<p>I need to use Qt 4.8.7 for Embedded Linux to create a very simple project for testing.\nProject includes 2 forms - Dialog (consists of QTextEdit and button. Button clears\nQTextEdit and QClipboard) and MainWindow (consists of button that exec Dialog).</p>\n\n<p>I edit text, copy part of it. Then clear editor and clipboard. I can't paste text after that,\nbut I dump memory using gcore and see text that I copied (several copies in html form).\nWhat are these objects left in memory? Are these temporary objects or memory leaks?\nOr I use something incorrectly.</p>\n"}, {"tags": ["c++", "windows", "visual-c++"], "comments": [{"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 0, "creation_date": 1528909299, "post_id": 50842559, "comment_id": 88688707, "body": "A Windows service application has to be written as such. It needs special entry-points that Windows will look for. Another option would be to develop such a service that monitors the first application and restarts it as needed."}, {"owner": {"reputation": 25894, "user_id": 4304, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5MIg7.jpg?s=128&g=1", "display_name": "zdan", "link": "https://stackoverflow.com/users/4304/zdan"}, "edited": false, "score": 0, "creation_date": 1528909335, "post_id": 50842559, "comment_id": 88688735, "body": "Check out <a href=\"https://nssm.cc/\" rel=\"nofollow noreferrer\">NSSM</a>"}, {"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1528910011, "post_id": 50842559, "comment_id": 88689103, "body": "The last version of Windows where services could interact with the UI was Windows XP. If you just want the application to restart if it&#39;s not running there are easier ways, for example the Task Scheduler."}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 0, "last_activity_date": 1528917650, "creation_date": 1528917650, "answer_id": 50844750, "question_id": 50842559, "link": "https://stackoverflow.com/questions/50842559/running-a-visual-c-6-console-application-as-a-windows-service/50844750#50844750", "title": "Running a Visual C++ 6 Console Application as a Windows Service", "body": "<blockquote>\n  <p>Is it possible for a Win32 Console Application to be used as a Windows service?</p>\n</blockquote>\n\n<p>Yes.  In fact, many services are written as console apps.  Even MSDN examples are.</p>\n\n<p>The app's <code>main()</code> simply needs to call <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms686324.aspx\" rel=\"nofollow noreferrer\"><code>StartServiceCtrlDispatcher()</code></a> to establish a link to the Service Control Manager:</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms687416.aspx\" rel=\"nofollow noreferrer\">Writing a Service Program's main Function</a></p>\n\n<blockquote>\n  <p>Mainly for the ability to restart itself after a crash.</p>\n</blockquote>\n\n<p>The correct way to handle that is to just let it crash. Use <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms681988.aspx\" rel=\"nofollow noreferrer\"><code>ChangeServiceConfig2()</code></a> to configure the service's <code>SERVICE_CONFIG_FAILURE_ACTIONS</code> info.  One of the available actions is <code>SC_ACTION_RESTART</code>.</p>\n"}], "owner": {"reputation": 327, "user_id": 2702180, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/6xJE5.jpg?s=128&g=1", "display_name": "Joseph", "link": "https://stackoverflow.com/users/2702180/joseph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 158, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1528917650, "creation_date": 1528909052, "question_id": 50842559, "link": "https://stackoverflow.com/questions/50842559/running-a-visual-c-6-console-application-as-a-windows-service", "title": "Running a Visual C++ 6 Console Application as a Windows Service", "body": "<p>Is it possible for a Win32 Console Application to be used as a Windows service?</p>\n\n<p>Normally this wouldn't be an issue using C#, .NET, and Visual Studio 2010 or higher, but this is a legacy application that was written in C++ using the Visual C++ 6 environment.</p>\n\n<p>Mainly for the ability to restart itself after a crash. </p>\n"}, {"tags": ["c++", "arduino", "break"], "comments": [{"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1528909166, "post_id": 50842500, "comment_id": 88688636, "body": "Read the byte off the serial interface so it&#39;s not still there next time around."}, {"owner": {"reputation": 1825, "user_id": 8118147, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/AeaWX.jpg?s=128&g=1", "display_name": "Benjamin Barrois", "link": "https://stackoverflow.com/users/8118147/benjamin-barrois"}, "edited": false, "score": 0, "creation_date": 1528909185, "post_id": 50842500, "comment_id": 88688650, "body": "Your break is related to the if statement here. So it just exits the if."}, {"owner": {"reputation": 173, "user_id": 9934614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ded67f7f06088d850d302b28fbdb92cc?s=128&d=identicon&r=PG&f=1", "display_name": "deepinside", "link": "https://stackoverflow.com/users/9934614/deepinside"}, "reply_to_user": {"reputation": 1825, "user_id": 8118147, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/AeaWX.jpg?s=128&g=1", "display_name": "Benjamin Barrois", "link": "https://stackoverflow.com/users/8118147/benjamin-barrois"}, "edited": false, "score": 0, "creation_date": 1528909726, "post_id": 50842500, "comment_id": 88688953, "body": "@BenjaminBarrois yes, I used loop() instead of break didn&#39;t work."}, {"owner": {"reputation": 1825, "user_id": 8118147, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/AeaWX.jpg?s=128&g=1", "display_name": "Benjamin Barrois", "link": "https://stackoverflow.com/users/8118147/benjamin-barrois"}, "edited": false, "score": 0, "creation_date": 1528909880, "post_id": 50842500, "comment_id": 88689033, "body": "I think you misunderstood what I meant. Your <code>break</code> exits the <code>if</code> context and not the <code>for</code> context (the context is what is inside the corresponding brackets <code>{...}</code>). The solution given by HeheBoi makes you exit the <code>for</code> context, which is what you want."}, {"owner": {"reputation": 1567, "user_id": 8870224, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BomtF.jpg?s=128&g=1", "display_name": "samuelnj", "link": "https://stackoverflow.com/users/8870224/samuelnj"}, "reply_to_user": {"reputation": 1825, "user_id": 8118147, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/AeaWX.jpg?s=128&g=1", "display_name": "Benjamin Barrois", "link": "https://stackoverflow.com/users/8118147/benjamin-barrois"}, "edited": false, "score": 2, "creation_date": 1528910179, "post_id": 50842500, "comment_id": 88689202, "body": "@BenjaminBarrois that&#39;s wrong. Break will break the for loop as he desires, the problem isn&#39;t that."}, {"owner": {"reputation": 173, "user_id": 9934614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ded67f7f06088d850d302b28fbdb92cc?s=128&d=identicon&r=PG&f=1", "display_name": "deepinside", "link": "https://stackoverflow.com/users/9934614/deepinside"}, "reply_to_user": {"reputation": 1567, "user_id": 8870224, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BomtF.jpg?s=128&g=1", "display_name": "samuelnj", "link": "https://stackoverflow.com/users/8870224/samuelnj"}, "edited": false, "score": 0, "creation_date": 1528911200, "post_id": 50842500, "comment_id": 88689737, "body": "@samuelnj Yes, you&#39;re right"}], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 9934614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ded67f7f06088d850d302b28fbdb92cc?s=128&d=identicon&r=PG&f=1", "display_name": "deepinside", "link": "https://stackoverflow.com/users/9934614/deepinside"}, "edited": false, "score": 0, "creation_date": 1528910089, "post_id": 50842596, "comment_id": 88689142, "body": "its still continue to on green led with less intensity blink of red and amber <a href=\"https://www.tinkercad.com/things/8Iq1hiD28UJ-brave-turing/editel?tenant=circuits?sharecode=zywhaJlxAkhAgMH0AfyWWpTzg1GiVNNsX-08e_NTDgM=\" rel=\"nofollow noreferrer\">tinkercad.com/things/8Iq1hiD28UJ-brave-turing/&hellip;</a>"}, {"owner": {"reputation": 431, "user_id": 8152070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1Z72y.jpg?s=128&g=1", "display_name": "DaaWaan", "link": "https://stackoverflow.com/users/8152070/daawaan"}, "reply_to_user": {"reputation": 173, "user_id": 9934614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ded67f7f06088d850d302b28fbdb92cc?s=128&d=identicon&r=PG&f=1", "display_name": "deepinside", "link": "https://stackoverflow.com/users/9934614/deepinside"}, "edited": false, "score": 0, "creation_date": 1528910360, "post_id": 50842596, "comment_id": 88689309, "body": "@deepinside What do you mean?"}, {"owner": {"reputation": 431, "user_id": 8152070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1Z72y.jpg?s=128&g=1", "display_name": "DaaWaan", "link": "https://stackoverflow.com/users/8152070/daawaan"}, "reply_to_user": {"reputation": 173, "user_id": 9934614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ded67f7f06088d850d302b28fbdb92cc?s=128&d=identicon&r=PG&f=1", "display_name": "deepinside", "link": "https://stackoverflow.com/users/9934614/deepinside"}, "edited": false, "score": 0, "creation_date": 1528910705, "post_id": 50842596, "comment_id": 88689485, "body": "@deepinside By the way, you should do what Mark Setchell said."}, {"owner": {"reputation": 1567, "user_id": 8870224, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BomtF.jpg?s=128&g=1", "display_name": "samuelnj", "link": "https://stackoverflow.com/users/8870224/samuelnj"}, "edited": false, "score": 1, "creation_date": 1528910816, "post_id": 50842596, "comment_id": 88689553, "body": "@HeheBoi in this case, <code>break</code> and <code>return</code> do exactly the same thing functionally. It isn&#39;t the problem."}, {"owner": {"reputation": 173, "user_id": 9934614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ded67f7f06088d850d302b28fbdb92cc?s=128&d=identicon&r=PG&f=1", "display_name": "deepinside", "link": "https://stackoverflow.com/users/9934614/deepinside"}, "edited": false, "score": 0, "creation_date": 1528911040, "post_id": 50842596, "comment_id": 88689658, "body": "I replaced as you said, but when I interrupt serial monitor green led supposed to blink for a second but it stays on and continues with red and yellow led blink with lesser intensity"}], "tags": [], "owner": {"reputation": 431, "user_id": 8152070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1Z72y.jpg?s=128&g=1", "display_name": "DaaWaan", "link": "https://stackoverflow.com/users/8152070/daawaan"}, "is_accepted": false, "score": 0, "last_activity_date": 1528909616, "last_edit_date": 1528909616, "creation_date": 1528909165, "answer_id": 50842596, "question_id": 50842500, "link": "https://stackoverflow.com/questions/50842500/how-to-break-the-loop-in-an-arduino/50842596#50842596", "title": "How to break the loop in an Arduino?", "body": "<p>Try to replace</p>\n\n<p><code>break;</code></p>\n\n<p>with</p>\n\n<p><code>return;</code></p>\n\n<p>This will terminate the function instantly since you won't be executing other statements after the loop.</p>\n\n<p>You can look at <a href=\"https://www.arduino.cc/reference/en/language/structure/control-structure/return/\" rel=\"nofollow noreferrer\">https://www.arduino.cc/reference/en/language/structure/control-structure/return/</a> for more info about <code>return</code></p>\n"}, {"comments": [{"owner": {"reputation": 173, "user_id": 9934614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ded67f7f06088d850d302b28fbdb92cc?s=128&d=identicon&r=PG&f=1", "display_name": "deepinside", "link": "https://stackoverflow.com/users/9934614/deepinside"}, "edited": false, "score": 0, "creation_date": 1528911747, "post_id": 50842925, "comment_id": 88690024, "body": "I can&#39;t read serial interface function from Button  because I want to call that function whenever I write in a serial interface, if I call in Light() then during the time of delay() serial interface couldn&#39;t be read"}, {"owner": {"reputation": 1567, "user_id": 8870224, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BomtF.jpg?s=128&g=1", "display_name": "samuelnj", "link": "https://stackoverflow.com/users/8870224/samuelnj"}, "reply_to_user": {"reputation": 173, "user_id": 9934614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ded67f7f06088d850d302b28fbdb92cc?s=128&d=identicon&r=PG&f=1", "display_name": "deepinside", "link": "https://stackoverflow.com/users/9934614/deepinside"}, "edited": false, "score": 0, "creation_date": 1528912707, "post_id": 50842925, "comment_id": 88690502, "body": "@deepinside you&#39;ll have to explain a bit better, I have no idea why you can&#39;t read from the serial interface..."}, {"owner": {"reputation": 173, "user_id": 9934614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ded67f7f06088d850d302b28fbdb92cc?s=128&d=identicon&r=PG&f=1", "display_name": "deepinside", "link": "https://stackoverflow.com/users/9934614/deepinside"}, "edited": false, "score": 0, "creation_date": 1528915149, "post_id": 50842925, "comment_id": 88691686, "body": "when the delay() function is executing, Arduino is in sleep mode, so if I interrupt serial interface also it doesn&#39;t read it, so I created separate Delay()"}], "tags": [], "owner": {"reputation": 1567, "user_id": 8870224, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BomtF.jpg?s=128&g=1", "display_name": "samuelnj", "link": "https://stackoverflow.com/users/8870224/samuelnj"}, "is_accepted": false, "score": 0, "last_activity_date": 1528911009, "last_edit_date": 1528911009, "creation_date": 1528910385, "answer_id": 50842925, "question_id": 50842500, "link": "https://stackoverflow.com/questions/50842500/how-to-break-the-loop-in-an-arduino/50842925#50842925", "title": "How to break the loop in an Arduino?", "body": "<p>As some others have briefly alluded to, you call <code>Button</code> many times due to the fact that you don't clear the serial interface. </p>\n\n<p>Right now what happens is <code>Delay</code> is called, and let's say there's information available on the interface, then you call <code>Button</code> and <code>break</code> as expected, but since you don't clear the interface by reading the available information, you call <code>Button</code> again on the next call to <code>Delay</code>.</p>\n\n<p>To fix this, you need to read the information from the serial interface either in the <code>Button</code> function or in the <code>if</code> statement before calling <code>Button</code>.</p>\n"}], "owner": {"reputation": 173, "user_id": 9934614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ded67f7f06088d850d302b28fbdb92cc?s=128&d=identicon&r=PG&f=1", "display_name": "deepinside", "link": "https://stackoverflow.com/users/9934614/deepinside"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3866, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1528911130, "creation_date": 1528908841, "last_edit_date": 1528911130, "question_id": 50842500, "link": "https://stackoverflow.com/questions/50842500/how-to-break-the-loop-in-an-arduino", "title": "How to break the loop in an Arduino?", "body": "<p>I'm trying to write a simple program in Arduino, blinking of a LED.</p>\n\n<p>Program is as shown below.</p>\n\n<pre><code>#define red1 13\n#define amber1 12\n#define green1 11\n\nvoid setup() {\n    // put your setup code here, to run once:\n    Serial.begin(9600);  \n    pinMode(red1, OUTPUT);\n    pinMode(amber1, OUTPUT);\n    pinMode(green1, OUTPUT);\n}\n\nvoid Delay(int sec) {\n    for(int i=0;i&lt;sec;i++){\n        if (Serial.available())\n        {\n            Button();\n            break;\n        }\n        delay(1);\n     }\n}\n\nvoid Light()\n{\n    digitalWrite(red1,HIGH);\n    Delay(5000);\n    digitalWrite(red1,LOW);\n    digitalWrite(amber1,HIGH);\n    Delay(5000);\n    digitalWrite(amber1,LOW);\n}\n\nvoid Button()\n{\n    digitalWrite(red1,LOW);\n    digitalWrite(amber1,LOW);      \n    digitalWrite(green1,HIGH);\n    delay(1000);\n    digitalWrite(green1,LOW);\n}\n\nvoid loop() \n{\n    Light();  \n}\n</code></pre>\n\n<p>When ever I enter a value in serial monitor <code>Button()</code> function is executed, it should end as soon as function completes due to a break, but this function keeps repeating continuously? How can I fix this such that whenever a serial monitor is interrupted, <code>Button()</code> is executed onetime and then continues with <code>Light()</code>.</p>\n"}, {"tags": ["c++", "templates", "sfinae"], "answers": [{"comments": [{"owner": {"reputation": 754, "user_id": 9811316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9e8849ebed49c133a3cda4db917e840?s=128&d=identicon&r=PG&f=1", "display_name": "abcalphabet", "link": "https://stackoverflow.com/users/9811316/abcalphabet"}, "edited": false, "score": 0, "creation_date": 1528973474, "post_id": 50854289, "comment_id": 88714000, "body": "Thanks for the reply! Sadly I&#39;m working in C++11 at the moment, but it still is very cool that this type of code is possible under C++17 with if constexpr"}, {"owner": {"reputation": 914, "user_id": 9822560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/870d2a5ff12cb2b1553ee02e5e271dde?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent Saulue-Laborde", "link": "https://stackoverflow.com/users/9822560/vincent-saulue-laborde"}, "reply_to_user": {"reputation": 754, "user_id": 9811316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9e8849ebed49c133a3cda4db917e840?s=128&d=identicon&r=PG&f=1", "display_name": "abcalphabet", "link": "https://stackoverflow.com/users/9811316/abcalphabet"}, "edited": false, "score": 2, "creation_date": 1528974419, "post_id": 50854289, "comment_id": 88714524, "body": "@abcalphabet I added a (verbose) workaround for C++11."}, {"owner": {"reputation": 754, "user_id": 9811316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9e8849ebed49c133a3cda4db917e840?s=128&d=identicon&r=PG&f=1", "display_name": "abcalphabet", "link": "https://stackoverflow.com/users/9811316/abcalphabet"}, "edited": false, "score": 0, "creation_date": 1528980602, "post_id": 50854289, "comment_id": 88718413, "body": "Perfect, the C++11 workaround works for me, thank you very much!"}], "tags": [], "owner": {"reputation": 914, "user_id": 9822560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/870d2a5ff12cb2b1553ee02e5e271dde?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent Saulue-Laborde", "link": "https://stackoverflow.com/users/9822560/vincent-saulue-laborde"}, "is_accepted": true, "score": 3, "last_activity_date": 1528974355, "last_edit_date": 1528974355, "creation_date": 1528969080, "answer_id": 50854289, "question_id": 50842493, "link": "https://stackoverflow.com/questions/50842493/checking-member-function-overload-existence-from-a-template/50854289#50854289", "title": "Checking member function overload existence from a template", "body": "<h1>Testing overload existence (C++11)</h1>\n\n<p>Since C++11, you can use a mix of <a href=\"https://en.cppreference.com/w/cpp/utility/declval\" rel=\"nofollow noreferrer\">std::declval</a> and <a href=\"https://en.cppreference.com/w/cpp/language/decltype\" rel=\"nofollow noreferrer\">decltype</a> to test for the existence of a specific overload:</p>\n\n<pre><code>// If overload exists, gets its return type.\n// Else compiler error\ndecltype(std::declval&lt;C&amp;&gt;().manipulateStruct(std::declval&lt;T&amp;&gt;()))\n</code></pre>\n\n<p>This can be used in a SFINAE construct:</p>\n\n<pre><code>class C {\npublic:\n    // implementation skipped\nprivate:\n    // Declared inside class C to access its private member.\n    // Enable is just a fake argument to do SFINAE in specializations.\n    template&lt;typename T, typename Enable=void&gt;\n    struct can_manipulate;\n}\n\ntemplate&lt;typename T, typename Enable&gt;\nstruct C::can_manipulate : std::false_type {};\n\n// Implemented outside class C, because a complete definition of C is needed for the declval.\ntemplate&lt;typename T&gt;\nstruct C::can_manipulate&lt;T,std::void_t&lt;decltype(std::declval&lt;C&amp;&gt;().manipulateStruct(std::declval&lt;T&amp;&gt;()))&gt;&gt; : std::true_type {};\n</code></pre>\n\n<p>Here I am ignoring the return type of the overload using <a href=\"http://en.cppreference.com/w/cpp/types/void_t\" rel=\"nofollow noreferrer\">std::void_t</a> (C++17, but C++11 alternatives should be possible). If you want to check the return type, you can pass it to <a href=\"https://en.cppreference.com/w/cpp/types/is_same\" rel=\"nofollow noreferrer\">std::is_same</a> or <a href=\"https://en.cppreference.com/w/cpp/types/is_assignable\" rel=\"nofollow noreferrer\">std::is_assignable</a>.</p>\n\n<h1>doSomething implementation</h1>\n\n<h3>C++17</h3>\n\n<p>This can be done with <a href=\"http://en.cppreference.com/w/cpp/language/if#Constexpr_If\" rel=\"nofollow noreferrer\">constexpr if</a>:</p>\n\n<pre><code>template&lt;typename T&gt;\nvoid doSomething(std::string asdf) {\n    T data_structure;\n    if constexpr (can_manipulate&lt;T&gt;::value) {\n        manipulateStruct(data_structure);\n    }\n}\n</code></pre>\n\n<p>The <code>if constexpr</code> will make the compiler discards the <code>statement-true</code> if the condition evaluates to false. Without the <code>constexpr</code>, the compilation will require the function call inside the <code>if</code> to be valid in all cases.</p>\n\n<p><a href=\"https://wandbox.org/permlink/TDViHTc96iFzqmSc\" rel=\"nofollow noreferrer\">Live demo (C++17 full code)</a></p>\n\n<h3>C++11</h3>\n\n<p>You can emulate the <code>if constexpr</code> behaviour with SFINAE:</p>\n\n<pre><code>class C {\n    // previous implementation\nprivate:\n    template&lt;typename T, typename Enable=void&gt;\n    struct manipulator;\n}\n\ntemplate&lt;typename T, typename Enable&gt;\nstruct C::manipulator {\n    static void call(C&amp;, T&amp;) {\n        //no-op\n    }\n};\n\n// can_manipulate can be inlined and removed from the code\ntemplate&lt;typename T&gt;\nstruct C::manipulator&lt;T, typename std::enable_if&lt;C::can_manipulate&lt;T&gt;::value&gt;::type&gt; {\n    static void call(C&amp; object, T&amp; local) {\n        object.manipulateStruct(local);\n    }\n};\n</code></pre>\n\n<p>Function body:</p>\n\n<pre><code>template&lt;typename T&gt;\nT doSomething()\n{\n    T data_structure;\n    // replace if-constexpr:\n    manipulator&lt;T&gt;::call(*this, data_structure);\n}\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/FlRIeC1ZBo2vLDWr\" rel=\"nofollow noreferrer\">Live demo (C++11 full code)</a></p>\n"}], "owner": {"reputation": 754, "user_id": 9811316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9e8849ebed49c133a3cda4db917e840?s=128&d=identicon&r=PG&f=1", "display_name": "abcalphabet", "link": "https://stackoverflow.com/users/9811316/abcalphabet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 657, "favorite_count": 3, "accepted_answer_id": 50854289, "answer_count": 1, "score": 4, "last_activity_date": 1538137791, "creation_date": 1528908807, "last_edit_date": 1538137791, "question_id": 50842493, "link": "https://stackoverflow.com/questions/50842493/checking-member-function-overload-existence-from-a-template", "title": "Checking member function overload existence from a template", "body": "<p>Is it possible to check whether a class has a certain member function overload from within a template member function?</p>\n\n<p>The best similar problem I was able to find is this one: <a href=\"https://stackoverflow.com/questions/257288/is-it-possible-to-write-a-template-to-check-for-a-functions-existence\">Is it possible to write a template to check for a function&#39;s existence?</a> As I understand it, this doesn't apply in to the case of checking for overloads of functions.</p>\n\n<p>Here a simplified example of how this would be applied:</p>\n\n<pre><code>struct A;\nstruct B;\n\nclass C\n{\npublic:\n    template&lt;typename T&gt;\n    void doSomething(std::string asdf)\n    {\n        T data_structure;\n\n        /** some code */\n\n        if(OVERLOAD_EXISTS(manipulateStruct, T))\n        {\n            manipulateStruct(data_structure);\n        }\n\n        /** some more code */\n    }\n\nprivate:\n    void manipulateStruct(B&amp; b) {/** some different code */};\n}\n</code></pre>\n\n<p>My question would be if some standard way exists to make the following usage of the code work:</p>\n\n<pre><code>int main(int argc, const char** argv)\n{\n    C object;\n    object.doSomething&lt;A&gt;(\"hello\");\n    object.doSomething&lt;B&gt;(\"world\");\n    exit(0);\n}\n</code></pre>\n\n<p>The only methods I could think of would be to simply create an emtpy overload of <code>manipulateStruct</code> for struct <code>A</code>. Otherwise the manipulation method could of course also be put into the structs to be manipulated, which would make SFINAE an option. Let's assume both of these to not be a possiblity here.</p>\n\n<p>Is there any way to get code similar to the above one to work? Does something similar to <code>OVERLOAD_EXISTS</code> exist, to let the compiler know when to add the <code>manipulateStruct</code> part to the generated code? Or is there maybe some way clever way to make SFINAE work for this case?</p>\n"}, {"tags": ["c++", "c++11", "boost"], "comments": [{"owner": {"reputation": 680, "user_id": 2303176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f47107aaff2c656bb305e866155258f1?s=128&d=identicon&r=PG", "display_name": "badola", "link": "https://stackoverflow.com/users/2303176/badola"}, "edited": false, "score": 0, "creation_date": 1528909069, "post_id": 50842471, "comment_id": 88688579, "body": "Operator overload? <a href=\"http://en.cppreference.com/w/cpp/language/operators\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/operators</a>"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1528909194, "post_id": 50842471, "comment_id": 88688655, "body": "<code>GetDataDir</code> does not sound like a function in Boost -- it does not follow their naming convention. Which one of your libraries defines that function?"}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1528956322, "post_id": 50842471, "comment_id": 88703906, "body": "You have all the source code, why don&#39;t you read it or step through it in a debugger? Also, concerning just the topic of your question, consider <code>a = b &#47; c;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 680, "user_id": 2303176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f47107aaff2c656bb305e866155258f1?s=128&d=identicon&r=PG", "display_name": "badola", "link": "https://stackoverflow.com/users/2303176/badola"}, "is_accepted": true, "score": 1, "last_activity_date": 1528954758, "last_edit_date": 1528954758, "creation_date": 1528910992, "answer_id": 50843066, "question_id": 50842471, "link": "https://stackoverflow.com/questions/50842471/what-is-the-use-of-the-character-in-boostfilesystempath/50843066#50843066", "title": "What is the use of the &quot;/&quot; character in boost::filesystem::path?", "body": "<p>This is a simple case of operator overloading.<br>\nThe <code>operator/</code> has been overloaded for the objects of type <code>path</code>.<br>\nWhen you use <code>/</code> on <code>boost::filesystem::path</code> objects, it appends them.</p>\n\n<p>So when you write :<br>\n<code>boost::filesystem::path pathLockFile = GetDataDir() / \".lock\";</code>  </p>\n\n<p>It expands to something like:<br>\n<code>boost::filesystem::path pathLockFile = boost::filesystem::path(\"/tmp/data\") / \".lock\";</code>  </p>\n\n<p>Assuming that <code>GetDataDir()</code> is returning <code>/tmp/data</code> as a <code>boost::filesystem::path</code>, in <em>Unix/Linux</em> like environment. In windows-like system, the answer would differ.</p>\n\n<p>This further expands to :<br>\n<code>boost::filesystem::path pathLockFile = boost::filesystem::path(\"/tmp/data\") / boost::filesystem::path(\".lock\");</code></p>\n\n<p>And finally you get <code>pathLockFile</code> is holding the value <code>/tmp/data/.lock</code></p>\n\n<hr>\n\n<p>Read the docs from <a href=\"https://www.boost.org/doc/libs/1_55_0/libs/filesystem/doc/reference.html#path-concatenation\" rel=\"nofollow noreferrer\">Boost Filesystem and Path</a></p>\n\n<blockquote>\n  <p>path operator/ (const path&amp; lhs, const path&amp; rhs);<br>\n  Returns: path(lhs) /= rhs.</p>\n</blockquote>\n\n<p><em>path appends</em><br>\nThe append operations use operator/= to denote their semantic effect of appending the platform's preferred directory separator when needed.<br>\nThe preferred directory separator is implementation-defined.</p>\n\n<p><strong>/</strong> (forward slash) separator => for unix variants, Linux, and Mac OS X<br>\n<strong>\\</strong> (back slash) separator => for windows-like implementations</p>\n\n<blockquote>\n  <p>path&amp; operator/=(const path&amp; p);<br>\n  Returns: *this</p>\n</blockquote>\n"}], "owner": {"reputation": 23, "user_id": 2762284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2af30e630b5cc30c7fae5ee390c8d1a?s=128&d=identicon&r=PG&f=1", "display_name": "user2762284", "link": "https://stackoverflow.com/users/2762284/user2762284"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "accepted_answer_id": 50843066, "answer_count": 1, "score": 0, "last_activity_date": 1537733755, "creation_date": 1528908722, "last_edit_date": 1537733755, "question_id": 50842471, "link": "https://stackoverflow.com/questions/50842471/what-is-the-use-of-the-character-in-boostfilesystempath", "title": "What is the use of the &quot;/&quot; character in boost::filesystem::path?", "body": "<p>I ran across this line in a C++ program and don't understand how or why the \"/\" is used.  Any suggestions?</p>\n\n<p>boost::filesystem::path pathLockFile = GetDataDir() / \".lock\";</p>\n"}, {"tags": ["c++", "arduino", "floating-point", "type-conversion", "avr-gcc"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1528908454, "post_id": 50842339, "comment_id": 88688268, "body": "If the <code>int</code> is 16-bit then the <code>uint16_t</code> is not &quot;smaller&quot;. Both operands are the same type, so the subtraction is done with <code>unsigned</code> and the value wraps in a well defined way."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1528908894, "post_id": 50842339, "comment_id": 88688491, "body": "The calculation has nothing to do with <code>float</code>, and the compiler does not &quot;realise&quot; anything&quot;. The result is assigned to <code>float</code> <i>afterwards</i>. You would have to cast one operand to <code>float</code> <i>before</i> the calculation to make <code>float</code> a consideration."}, {"owner": {"reputation": 2262, "user_id": 1619521, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a54821d500ac089427ffe6bfec3d0e5c?s=128&d=identicon&r=PG", "display_name": "doom", "link": "https://stackoverflow.com/users/1619521/doom"}, "edited": false, "score": 0, "creation_date": 1580341379, "post_id": 50842339, "comment_id": 106069961, "body": "(yes I know 1 year and 7 months later) But what&#39;s funny is that the &#39;expected&#39; result of -10 for uint8_t is not the one I expect. I would say it should be 246. And 65526 is expected. And &#39;-10 again&#39; is also the expected result. As you never use x and y elsewhere, maybe it has been optimized."}], "answers": [{"comments": [{"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 2, "creation_date": 1528908945, "post_id": 50842391, "comment_id": 88688520, "body": "There is no <i>undefined behaviour</i> here, but the integer conversions here depend on whether the implementation&#39;s <code>int</code> type can represent all the values of a <code>uint16_t</code> or not. So at most, it is <i>implementation-defined behaviour</i>."}, {"owner": {"reputation": 60, "user_id": 5188525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54754a36ce2dd5aea15d889727fa7050?s=128&d=identicon&r=PG", "display_name": "random", "link": "https://stackoverflow.com/users/5188525/random"}, "edited": false, "score": 0, "creation_date": 1528923956, "post_id": 50842391, "comment_id": 88696046, "body": "For simplicity I didn&#39;t mention that the data values my program runs on are always positive values. Therefore storing them in int16_t, instead of uint16_t would decrease the possible data resolution. (and going to int32_t would double the size of the data set) As mentioned explicitly casting the variables before the calculation seems to be the way to go, still it was an unexpected finding for me, as I thought the target data type was considered by the compiler and I didn&#39;t expect problems with changing the data to a wider data type. But now I know better."}], "tags": [], "owner": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "is_accepted": false, "score": 1, "last_activity_date": 1528909462, "last_edit_date": 1528909462, "creation_date": 1528908410, "answer_id": 50842391, "question_id": 50842339, "link": "https://stackoverflow.com/questions/50842339/implicit-conversion-to-float-using-avr-gcc-uint8-t-vs-uint16-t/50842391#50842391", "title": "Implicit conversion to float using avr-gcc: uint8_t vs. uint16_t", "body": "<p>You are <del>using unsigned integers to go negative</del> casting these unsigned types to a float, which is <del>undefined</del> implementation-defined behaviour. Use int8_t or int16_t to handle negative values properly. The difference in behaviour where the cast to float from uint16_t compared to the cast from uint8_t is up to the implementation, so it's hard to tell exactly what's happening.</p>\n"}, {"comments": [{"owner": {"reputation": 60, "user_id": 5188525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54754a36ce2dd5aea15d889727fa7050?s=128&d=identicon&r=PG", "display_name": "random", "link": "https://stackoverflow.com/users/5188525/random"}, "edited": false, "score": 0, "creation_date": 1528924672, "post_id": 50844334, "comment_id": 88696340, "body": "Well, that nails it. (btw: int -10 is assigned to mF.) After revisiting the integer conversion rules with your answer and @Weather &#39;s comment in mind I now know what is going on. I thought the compiler considers that everything will end up in a float, but that was a misconception. One more thing to consider when using C... Always cast to signed / float <i>manually</i> when signed can become necessary..or test very well..."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 60, "user_id": 5188525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54754a36ce2dd5aea15d889727fa7050?s=128&d=identicon&r=PG", "display_name": "random", "link": "https://stackoverflow.com/users/5188525/random"}, "edited": false, "score": 0, "creation_date": 1528924932, "post_id": 50844334, "comment_id": 88696435, "body": "@random In <i>general</i>, casting is to be avoided as it tends to mask errors or weak code - there are often  better alternatives.  Yet at other times it is wise.  It is very code dependent."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 4, "last_activity_date": 1528924715, "last_edit_date": 1592644375, "creation_date": 1528915983, "answer_id": 50844334, "question_id": 50842339, "link": "https://stackoverflow.com/questions/50842339/implicit-conversion-to-float-using-avr-gcc-uint8-t-vs-uint16-t/50844334#50844334", "title": "Implicit conversion to float using avr-gcc: uint8_t vs. uint16_t", "body": "<blockquote>\n<p>So what is going on there?</p>\n</blockquote>\n<h3>Integer promotions</h3>\n<blockquote>\n<p>If an <code>int</code> can represent all values of the original type ..., the value is converted to an <code>int</code>; otherwise, it is converted to an <code>unsigned int</code>. These are called the <em>integer promotions</em>.<br />\nC11 \u00a76.3.1.1 2</p>\n</blockquote>\n<p>With the below, <code>y-x</code> promotes each <code>x,y</code> to <code>int</code> and computes 5-15 which is <code>int -10</code> and assigns that values to <code>mF</code>.</p>\n<pre><code>  uint8_t x = 15;\n  uint8_t y = 5;\n  float myF = y-x;\n</code></pre>\n<p>With the below, <code>y-x</code> promotes each <code>x,y</code> to <code>unsigned</code> and computes 5u-15u which is <code>unsigned  65526u</code> and assigns that values to <code>mF</code>.</p>\n<pre><code>  uint16_t x = 15;\n  uint16_t y = 5;\n  float myF = y-x;\n</code></pre>\n<p>Why <code>unsigned</code> and not <code>int</code>?  A <code>uint16_t</code> does not meet the &quot;if an <code>int</code> can represent all values of the original type&quot; condition on a 16-bit <code>int</code> platform when promoting a <code>uint16_t</code>.</p>\n<p>No mystery, just <em>integer promotions</em>   on a platform with a 16-bit <code>int/unsigned</code></p>\n"}], "owner": {"reputation": 60, "user_id": 5188525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54754a36ce2dd5aea15d889727fa7050?s=128&d=identicon&r=PG", "display_name": "random", "link": "https://stackoverflow.com/users/5188525/random"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 776, "favorite_count": 0, "accepted_answer_id": 50844334, "answer_count": 2, "score": 3, "last_activity_date": 1528924715, "creation_date": 1528908214, "last_edit_date": 1528908789, "question_id": 50842339, "link": "https://stackoverflow.com/questions/50842339/implicit-conversion-to-float-using-avr-gcc-uint8-t-vs-uint16-t", "title": "Implicit conversion to float using avr-gcc: uint8_t vs. uint16_t", "body": "<p>I have a question regarding the implicit conversion of <code>uint8_t</code> and <code>uint16_t</code> using the Arduino IDE 1.8.2 (gcc 4.9.2.). The hardware is a standard Arduino (ATMega328p).</p>\n\n<p>I wrote a piece of code using <code>uint8_t</code> and decided afterwards to switch to <code>uint16_t</code>. (Should have seen that coming...)</p>\n\n<p>However, they seem to behave slightly different for implicit conversions, what caused errors in the program.</p>\n\n<p>A minimum working example is the following:</p>\n\n<pre><code>void setup()\n{\n  uint8_t x = 15;\n  uint8_t y = 5;\n  float myF = y-x;\n\n  Serial.begin(74880);\n  Serial.println(myF);\n}\n</code></pre>\n\n<p>This will print -10.00 on my serial console.<br>\nThat's nice and what I expected. </p>\n\n<p>However, if I change <code>x</code> (or <code>x</code> and <code>y</code>) to <code>uint16_t</code> the result will be 65526.00!\nIf I change <code>myF</code> from float to int I get -10 again. (I never change any of the values)</p>\n\n<p>As I store the result in a signed data type, I assume the compiler realises the possibility of negative values and \"handles the situation correctly\" (preserves the sign, as it does in the int case) or prints a warning in case it isn't happy about mismatching data types. However, even with the warning level set to \"all\" it never showed a warning. So I assume the compiler knows how to handle the situation without losing a sign/data.</p>\n\n<p>Also since it works with int as target data type, it is surprising to me that it doesn't work with bigger float.</p>\n\n<p>I have tested the situation on my x86 system - gcc 4.7.3 preserves the sign. However, in the 8-bit microcontroller world of AVR different rules/conditions might apply. (?)</p>\n\n<p>So what is going on there? Maybe someone with more compiler knowledge can help out here..<br>\n(I know I could have avoided this situation by explicitly casting, but therefore I would have had to be aware of this pitfall.<br>\nSo I would like to know what exactly causes it, as it really was a surprise when switching from <code>uint8_t</code> to <code>uint16_t</code>..)</p>\n\n<p>I've read that according to the <a href=\"https://wiki.sei.cmu.edu/confluence/display/c/INT02-C.+Understand+integer+conversion+rules\" rel=\"nofollow noreferrer\" title=\"integer conversion rules\">integer conversion rules</a> \"integer types smaller than int are promoted to int when an operation is performed on them\". I assume avr-gcc follows integer promotions. (?) So I understand the actual calculation typically runs on an int anyway and is then converted to the target data type (float in this case). Is the problem here that the <code>uint16_t</code> is of equal, but not smaller size than the 16 bit int of AVR and therefore the <code>uint16_t</code> cannot be promoted? If so, why does it work with an int as the target type?</p>\n\n<p>And why does it work with an int as target variable, but not with a 4-byte float?\nAnd why doesn't it warn?</p>\n"}, {"tags": ["c++", "formatting", "clang-format"], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 4067669, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-87HENms3DPo/AAAAAAAAAAI/AAAAAAAACqE/IF1MnRFUzCE/photo.jpg?sz=128", "display_name": "Nicolas", "link": "https://stackoverflow.com/users/4067669/nicolas"}, "edited": false, "score": 0, "creation_date": 1528961786, "post_id": 50843001, "comment_id": 88706670, "body": "Having <code>||</code> before the conditions is fine, what I care about is that the conditions are stacked. Your suggestion is an improvement, together with <code>BinPackArguments: false</code>. Unfortunately it only stacks the conditions that do not fit on the first line. There are still several on the first line. I thought <code>BinPack*</code> was supposed to do exactly that."}, {"owner": {"reputation": 874, "user_id": 3352222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m6lYp.jpg?s=128&g=1", "display_name": "ravnsgaard", "link": "https://stackoverflow.com/users/3352222/ravnsgaard"}, "reply_to_user": {"reputation": 111, "user_id": 4067669, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-87HENms3DPo/AAAAAAAAAAI/AAAAAAAACqE/IF1MnRFUzCE/photo.jpg?sz=128", "display_name": "Nicolas", "link": "https://stackoverflow.com/users/4067669/nicolas"}, "edited": false, "score": 0, "creation_date": 1528979215, "post_id": 50843001, "comment_id": 88717458, "body": "<code>BinPack*</code> are for parameters and arguments to <i>functions</i>. I don&#39;t think it looks at the conditions in branching statements."}, {"owner": {"reputation": 111, "user_id": 4067669, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-87HENms3DPo/AAAAAAAAAAI/AAAAAAAACqE/IF1MnRFUzCE/photo.jpg?sz=128", "display_name": "Nicolas", "link": "https://stackoverflow.com/users/4067669/nicolas"}, "edited": false, "score": 0, "creation_date": 1528982886, "post_id": 50843001, "comment_id": 88719945, "body": "Unfortunately that seems to be the case."}], "tags": [], "owner": {"reputation": 874, "user_id": 3352222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m6lYp.jpg?s=128&g=1", "display_name": "ravnsgaard", "link": "https://stackoverflow.com/users/3352222/ravnsgaard"}, "is_accepted": false, "score": 1, "last_activity_date": 1528910678, "creation_date": 1528910678, "answer_id": 50843001, "question_id": 50842271, "link": "https://stackoverflow.com/questions/50842271/clang-format-stack-all-if-statement-arguments-if-they-are-too-long/50843001#50843001", "title": "clang-format stack all if-statement arguments if they are too long", "body": "<p>Not directly, but you can achieve something like it with <code>BreakBeforeBinaryOperators</code>. Try setting this value to <code>NonAssignment</code>. This will put your <code>||</code> operators <em>before</em> each additional condition, though, not after them.</p>\n"}, {"tags": [], "owner": {"reputation": 321, "user_id": 2546231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2ab149ab3390053ea472bc57a9047f9a?s=128&d=identicon&r=PG", "display_name": "Pavel.Zh", "link": "https://stackoverflow.com/users/2546231/pavel-zh"}, "is_accepted": false, "score": 0, "last_activity_date": 1606382800, "creation_date": 1606382800, "answer_id": 65019247, "question_id": 50842271, "link": "https://stackoverflow.com/questions/50842271/clang-format-stack-all-if-statement-arguments-if-they-are-too-long/65019247#65019247", "title": "clang-format stack all if-statement arguments if they are too long", "body": "<p>The only solution I've found is usage pair of <code>// clang-format off</code> and <code>// clang-format on</code> comments. E.g.</p>\n<pre><code>// clang-format off\nif (health.flag_a || \n   health.flag_b ||\n   health.flag_c ||\n   health.flag_d ||\n   health.flag_e ||\n   health.flag_f ||\n   health.flag_g ||\n   health.flag_h ||\n   health.flag_i ||\n   health.flag_k) {\ndo_something();\nreturn false;\n}\n// clang-format on\n</code></pre>\n<p>Yes, this is not a solution at all, but at least it prevents your stacked conditions from being re-formatted by <code>clang-format</code>.</p>\n"}], "owner": {"reputation": 111, "user_id": 4067669, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-87HENms3DPo/AAAAAAAAAAI/AAAAAAAACqE/IF1MnRFUzCE/photo.jpg?sz=128", "display_name": "Nicolas", "link": "https://stackoverflow.com/users/4067669/nicolas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 862, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1606382800, "creation_date": 1528907951, "question_id": 50842271, "link": "https://stackoverflow.com/questions/50842271/clang-format-stack-all-if-statement-arguments-if-they-are-too-long", "title": "clang-format stack all if-statement arguments if they are too long", "body": "<p>I have an <code>if</code> statement that has several <code>or</code>ed arguments. I have stacked them vertically as below for readability.</p>\n\n<pre><code>    if (health.flag_a || \n       health.flag_b ||\n       health.flag_c ||\n       health.flag_d ||\n       health.flag_e ||\n       health.flag_f ||\n       health.flag_g ||\n       health.flag_h ||\n       health.flag_i ||\n       health.flag_k) {\n    do_something();\n    return false;\n}\n</code></pre>\n\n<p><code>clang-format</code> converts this to:</p>\n\n<pre><code>if (health.flag_a || health.flag_b || health.flag_c || health.flag_d || health.flag_e || health.flag_f || health.flag_g || health.flag_h ||\n    health.flag_i || health.flag_k) {\n    do_something();\n    return false;\n}\n</code></pre>\n\n<p>I want <code>clang-format</code> to stack them like above if they don't fit on one line.\nI expected <code>BinPackArguments</code> do this, but I'm not having any luck.</p>\n\n<p>Can this be achieved?</p>\n\n<p>See my <code>.clang-format</code> below.</p>\n\n<p>Thanks for your help.</p>\n\n<pre><code>---\nLanguage:        Cpp\n# BasedOnStyle:  Google\nAccessModifierOffset: -4\nAlignAfterOpenBracket: Align\nAlignConsecutiveAssignments: true\nAlignConsecutiveDeclarations: true\nAlignEscapedNewlinesLeft: false\nAlignOperands:   true\nAlignTrailingComments: true\nAllowAllParametersOfDeclarationOnNextLine: true\nAllowShortBlocksOnASingleLine: false\nAllowShortCaseLabelsOnASingleLine: false\nAllowShortFunctionsOnASingleLine: Inline\nAllowShortIfStatementsOnASingleLine: true\nAllowShortLoopsOnASingleLine: true\nAlwaysBreakAfterDefinitionReturnType: None\nAlwaysBreakAfterReturnType: None\nAlwaysBreakBeforeMultilineStrings: true\nAlwaysBreakTemplateDeclarations: true\nBinPackArguments: false\nBinPackParameters: false\nBraceWrapping:   \n  AfterClass:      false\n  AfterControlStatement: false\n  AfterEnum:       false\n  AfterFunction:   false\n  AfterNamespace:  false\n  AfterObjCDeclaration: false\n  AfterStruct:     false\n  AfterUnion:      false\n  BeforeCatch:     false\n  BeforeElse:      false\n  IndentBraces:    false\nBreakBeforeBinaryOperators: None\nBreakBeforeBraces: Attach\nBreakBeforeTernaryOperators: true\nBreakConstructorInitializersBeforeComma: false\nColumnLimit:     145\nCommentPragmas:  '^ IWYU pragma:'\nConstructorInitializerAllOnOneLineOrOnePerLine: true\nConstructorInitializerIndentWidth: 4\nContinuationIndentWidth: 4\nCpp11BracedListStyle: true\nDerivePointerAlignment: true\nDisableFormat:   false\nExperimentalAutoDetectBinPacking: false\nForEachMacros:   [ foreach, Q_FOREACH, BOOST_FOREACH ]\nIncludeCategories: \n  - Regex:           '^&lt;.*\\.h&gt;'\n    Priority:        1\n  - Regex:           '^&lt;.*'\n    Priority:        2\n  - Regex:           '.*'\n    Priority:        3\nIndentCaseLabels: true\nIndentWidth:     4\nIndentWrappedFunctionNames: false\nKeepEmptyLinesAtTheStartOfBlocks: false\nMacroBlockBegin: ''\nMacroBlockEnd:   ''\nMaxEmptyLinesToKeep: 1\nNamespaceIndentation: None\nObjCBlockIndentWidth: 2\nObjCSpaceAfterProperty: false\nObjCSpaceBeforeProtocolList: false\nPenaltyBreakBeforeFirstCallParameter: 1\nPenaltyBreakComment: 300\nPenaltyBreakFirstLessLess: 120\nPenaltyBreakString: 1000\nPenaltyExcessCharacter: 1000000\nPenaltyReturnTypeOnItsOwnLine: 200\nPointerAlignment: Left\nReflowComments:  true\nSortIncludes:    true\nSpaceAfterCStyleCast: false\nSpaceBeforeAssignmentOperators: true\nSpaceBeforeParens: ControlStatements\nSpaceInEmptyParentheses: false\nSpacesBeforeTrailingComments: 2\nSpacesInAngles:  false\nSpacesInContainerLiterals: true\nSpacesInCStyleCastParentheses: false\nSpacesInParentheses: false\nSpacesInSquareBrackets: false\nStandard:        Auto\nTabWidth:        4\nUseTab:          ForIndentation\n...\n</code></pre>\n"}, {"tags": ["c++", "winapi", "hard-drive"], "comments": [{"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1528908034, "post_id": 50842146, "comment_id": 88688060, "body": "And what is the result of GetLastError?"}, {"owner": {"reputation": 53, "user_id": 9936722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53611456d42bd4c2f8ed3eb842b288a4?s=128&d=identicon&r=PG&f=1", "display_name": "A Programmer", "link": "https://stackoverflow.com/users/9936722/a-programmer"}, "reply_to_user": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1528908119, "post_id": 50842146, "comment_id": 88688101, "body": "@AdrianMcCarthy 87"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1528908162, "post_id": 50842146, "comment_id": 88688124, "body": "Unrelated, why march on into the abyss in this code if the createfile <i>failed</i>. You&#39;re error indicates an incorrect-parameter, btw, but by then it&#39;s too late. What&#39;s the error immediate after the createfile fails? (or does it even fail? you question says &quot;the function keeps failing&quot; but doesn&#39;t say which one)."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 2, "creation_date": 1528908325, "post_id": 50842146, "comment_id": 88688204, "body": "this is because your file (disk file) have <code>FO_NO_INTERMEDIATE_BUFFERING</code> flag. the buffer size - must be multiples of the volume sector size. 1000 is bad value"}, {"owner": {"reputation": 53, "user_id": 9936722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53611456d42bd4c2f8ed3eb842b288a4?s=128&d=identicon&r=PG&f=1", "display_name": "A Programmer", "link": "https://stackoverflow.com/users/9936722/a-programmer"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1528908350, "post_id": 50842146, "comment_id": 88688214, "body": "@WhozCraig The error code value after createfile is 0."}, {"owner": {"reputation": 53, "user_id": 9936722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53611456d42bd4c2f8ed3eb842b288a4?s=128&d=identicon&r=PG&f=1", "display_name": "A Programmer", "link": "https://stackoverflow.com/users/9936722/a-programmer"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1528908478, "post_id": 50842146, "comment_id": 88688278, "body": "@RbMm Thank you. Changing the buffer size to 512 made the program work. If you post your comment as an answer, I will accept it."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1528908522, "post_id": 50842146, "comment_id": 88688304, "body": "Then I concur with RbMm. Checking GetLastError making no sense after a successful API call notwithstanding, the restrictions for reading from a physical volume are pretty tight. You can (and should) <a href=\"https://support.microsoft.com/en-us/help/100027/info-direct-drive-access-under-win32\" rel=\"nofollow noreferrer\">use an ioctl call to get the drive geometry</a> to calculate the required buffer size. Guessing a value like 512 won&#39;t always work."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 1, "creation_date": 1528908548, "post_id": 50842146, "comment_id": 88688323, "body": "I think you may also need to align your buffer."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1528909668, "post_id": 50842146, "comment_id": 88688923, "body": "really you need get aligment information via <code>GetFileInformationByHandleEx(hMainDisk, FileAlignmentInfo, &amp;fai, sizeof(fai))</code> or via <code>NtQueryInformationFile</code> with <code>FileAlignmentInformation</code> and sector size with say <code>IOCTL_DISK_GET_DRIVE_GEOMETRY</code> - align buffer and read multiple sector"}], "owner": {"reputation": 53, "user_id": 9936722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53611456d42bd4c2f8ed3eb842b288a4?s=128&d=identicon&r=PG&f=1", "display_name": "A Programmer", "link": "https://stackoverflow.com/users/9936722/a-programmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 144, "favorite_count": 0, "closed_date": 1528913977, "answer_count": 0, "score": 1, "last_activity_date": 1528908767, "creation_date": 1528907441, "last_edit_date": 1528908767, "question_id": 50842146, "link": "https://stackoverflow.com/questions/50842146/winapi-cant-read-from-main-disk-physicaldrive0", "closed_reason": "Duplicate", "title": "WINAPI: can&#39;t read from main disk (PhysicalDrive0)", "body": "<p><strong>Solved: See comments below. A multiple of 512 (or disk sector size) bytes should be read.</strong></p>\n\n<p>I'm trying to read from my main drive (this drive is an SSD drive and the operating system is stored in this drive), but the function keeps failing and reading 0 bytes. I'm running this program as an administrator.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>int main() {\n    char a[100];\n\n    HANDLE hMainDisk = CreateFile(\"\\\\\\\\.\\\\PhysicalDrive0\", GENERIC_READ, 0, NULL, OPEN_EXISTING, 0, NULL);\n    if (hMainDisk == INVALID_HANDLE_VALUE) {\n        std::cout &lt;&lt; \"ERROR: Main disk could not be found.\\n\"; //This is not printed.\n    }\n\n    unsigned char data[1000];\n    BOOL succeeded = ReadFile(hMainDisk, bootloaderData, 1000, &amp;numBytesRead, 0);\n    DWORD error = GetLastError();\n    CloseHandle(hMainDisk);\n    if (numBytesRead != 1000) {\n        std::cout &lt;&lt; \"ERROR: Less than 1,000 bytes were read. Only \" &lt;&lt; numBytesRead &lt;&lt; \" bytes were read\\n\"; //This is printed.\n    }\n    if (succeeded == FALSE) {\n        std::cout &lt;&lt; \"ERROR: Main disk read failed.\\n\"; //This is also printed\n    }\n    if (error == ERROR_INVALID_USER_BUFFER || error ==     ERROR_NOT_ENOUGH_MEMORY) {\n        std::cout &lt;&lt; \"ERROR: Too many IO requests.\\n\"; //This is not printed\n    }\n\n    std::cin &gt;&gt; a;\n    return 0;\n }\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "c++14"], "answers": [{"comments": [{"owner": {"reputation": 1439, "user_id": 411046, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Xcvrr.gif?s=128&g=1", "display_name": "pyInTheSky", "link": "https://stackoverflow.com/users/411046/pyinthesky"}, "edited": false, "score": 0, "creation_date": 1528908730, "post_id": 50842177, "comment_id": 88688412, "body": "Thanks for the great explination and well written fix. Much appreciated."}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": true, "score": 3, "last_activity_date": 1528908214, "last_edit_date": 1528908214, "creation_date": 1528907527, "answer_id": 50842177, "question_id": 50842073, "link": "https://stackoverflow.com/questions/50842073/delayed-thread-start-notify-all-not-waking-all-threads/50842177#50842177", "title": "Delayed Thread Start - Notify All Not Waking All Threads", "body": "<p>Condition variables are stateless. Notifications get lost if there are no waiters; spurios notifications can be delivered. You need to wait for a change of a shared state, rather than a signal from a condition variable.</p>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/thread/condition_variable\" rel=\"nofollow noreferrer\">std::condition_variable</a>: </p>\n\n<blockquote>\n  <p>When the condition variable is notified, a timeout expires, or a spurious wakeup occurs, the thread is awakened, and the mutex is atomically reacquired. The thread should then check the condition and resume waiting if the wake up was spurious.</p>\n</blockquote>\n\n<p>Also, when notifying a condition variable the mutex must be held if waiter FIFO order needs to be preserved.</p>\n\n<p>Fixes:</p>\n\n<pre><code>int main()\n{\n    std::condition_variable cv;\n    std::mutex cv_m;\n    int x = 0;\n    bool start = false;\n\n    auto thread_fn = [&amp;]{\n        std::unique_lock&lt;std::mutex&gt; lk(cv_m);\n        while(!start)\n            cv.wait(lk);\n        std::cout &lt;&lt; \"t1 x:\" &lt;&lt; x++ &lt;&lt; std::endl;\n    };\n\n    std::thread t1 = std::thread(thread_fn);\n    std::thread t2 = std::thread(thread_fn);\n    std::thread t3 = std::thread(thread_fn);\n    std::thread t4 = std::thread(thread_fn);\n    std::thread t5 = std::thread(thread_fn);\n\n    std::cout &lt;&lt; \"STARTING\" &lt;&lt; std::endl;\n    {\n        std::unique_lock&lt;std::mutex&gt; lock(cv_m);\n        start = true;\n        cv.notify_all();\n    }\n\n    t1.join();\n    t2.join();\n    t3.join();\n    t4.join();\n    t5.join();\n    std::cout &lt;&lt; \"DONE\" &lt;&lt; std::endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 1439, "user_id": 411046, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Xcvrr.gif?s=128&g=1", "display_name": "pyInTheSky", "link": "https://stackoverflow.com/users/411046/pyinthesky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "accepted_answer_id": 50842177, "answer_count": 1, "score": 2, "last_activity_date": 1528908214, "creation_date": 1528907237, "question_id": 50842073, "link": "https://stackoverflow.com/questions/50842073/delayed-thread-start-notify-all-not-waking-all-threads", "title": "Delayed Thread Start - Notify All Not Waking All Threads", "body": "<p><strong>attempting:</strong></p>\n\n<p>To do a delayed start on multiple threads.</p>\n\n<p><strong>problem:</strong></p>\n\n<p>I've created the example below to prove out the idea and attempted to create a race codition on x to prove out that all the threads would run concurrently.</p>\n\n<p>It seems like things are serialize instead of running in parallel-the desired behavior, but maybe each thread runs for too short a period and finishes before the other onse get serviced</p>\n\n<p>Sometimes a thread will get stuck on the cv.wait --- I've viewed this in GDB and can see one of the threads just sitting on the wait in frame 0 --- meaning the notify_all did not wak ALL the threads --- (this is sporadic behavior and happens every few attempts at running the binary)</p>\n\n<p><strong>asking:</strong></p>\n\n<ol>\n<li><p>Is using the condition variable a valid method for performing a delayed startup of a group of threads with the desired behavior that they will all run in parallel?</p></li>\n<li><p>Why is the notify_all() not waking ALL the threads?</p></li>\n</ol>\n\n<p><strong>code:</strong></p>\n\n<pre><code>// main.cpp\n#include &lt;thread&gt;\n#include &lt;mutex&gt;\n#include &lt;condition_variable&gt;\n#include &lt;functional&gt;\n#include &lt;atomic&gt;\n#include &lt;iostream&gt;\n#include &lt;unistd.h&gt;\n\nint main()\n{\n    std::condition_variable cv;\n    std::mutex cv_m;\n    int x = 0;\n    std::thread t1 = std::thread([&amp;]{std::unique_lock&lt;std::mutex&gt; lk(cv_m); cv.wait(lk); std::cout &lt;&lt; \"t1 x:\" &lt;&lt; x++ &lt;&lt; std::endl;});\n    std::thread t2 = std::thread([&amp;]{std::unique_lock&lt;std::mutex&gt; lk(cv_m); cv.wait(lk); std::cout &lt;&lt; \"t2 x:\" &lt;&lt; x++ &lt;&lt; std::endl;});\n    std::thread t3 = std::thread([&amp;]{std::unique_lock&lt;std::mutex&gt; lk(cv_m); cv.wait(lk); std::cout &lt;&lt; \"t3 x:\" &lt;&lt; x++ &lt;&lt; std::endl;});\n    std::thread t4 = std::thread([&amp;]{std::unique_lock&lt;std::mutex&gt; lk(cv_m); cv.wait(lk); std::cout &lt;&lt; \"t4 x:\" &lt;&lt; x++ &lt;&lt; std::endl;});\n    std::thread t5 = std::thread([&amp;]{std::unique_lock&lt;std::mutex&gt; lk(cv_m); cv.wait(lk); std::cout &lt;&lt; \"t5 x:\" &lt;&lt; x++ &lt;&lt; std::endl;});\n    std::cout &lt;&lt; \"STARTING\" &lt;&lt; std::endl;\n    cv.notify_all();\n    t1.join();\n    t2.join();\n    t3.join();\n    t4.join();\n    t5.join();\n    std::cout &lt;&lt; \"DONE\" &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p><strong>compiling:</strong></p>\n\n<pre><code>g++ -std=c++14 main.cpp -lpthread\n</code></pre>\n\n<p><strong>running:</strong></p>\n\n<pre><code>./a.out\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1528907270, "post_id": 50842055, "comment_id": 88687705, "body": "A BST is basically already a dictionary. What do you mean by &quot;but I can not output 2 tree in my code&quot;?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1528907277, "post_id": 50842055, "comment_id": 88687707, "body": "If you&#39;re stumped and can&#39;t progress it&#39;s usually a good opportunity to try and write unit tests for your code. By putting together tested, confirmed-working bits of code you can get a lot farther than trying to assemble it all out of unproven parts."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1528907311, "post_id": 50842055, "comment_id": 88687722, "body": "If this is C++ code it&#39;s discouraging to see <code>strcmp</code> in there. Use <code>std::string</code> whenever possible."}, {"owner": {"reputation": 43, "user_id": 8726285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a1357b7789ca3e324dd56d2b491478?s=128&d=identicon&r=PG&f=1", "display_name": "ivan saron", "link": "https://stackoverflow.com/users/8726285/ivan-saron"}, "reply_to_user": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1528907459, "post_id": 50842055, "comment_id": 88687784, "body": "@Carcigenicate it&#39;s mean I can&#39;t show t1 and t2 on my screen... it&#39;s not working and not show any error"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1528908119, "post_id": 50842055, "comment_id": 88688102, "body": "I recommend using an existing data structure, such as <code>std::set</code> or <code>std::map</code>."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1528908219, "post_id": 50842055, "comment_id": 88688157, "body": "Also, since you are programming in C++, prefer to use <code>std::string</code>.  You can convert to <code>char *</code> (for API) by using <code>std::string::c_str()</code>.  The <code>std::string</code> handles reallocation, buffer overflow and copying for you."}], "owner": {"reputation": 43, "user_id": 8726285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a1357b7789ca3e324dd56d2b491478?s=128&d=identicon&r=PG&f=1", "display_name": "ivan saron", "link": "https://stackoverflow.com/users/8726285/ivan-saron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 530, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1528907234, "creation_date": 1528907154, "last_edit_date": 1528907234, "question_id": 50842055, "link": "https://stackoverflow.com/questions/50842055/c-how-to-make-a-dictionary-with-binary-search-tree", "title": "C++ How To Make a Dictionary With Binary Search Tree", "body": "<p>I want to make a dictionary but I can not output 2 tree in my code \nand I don't know what to do next:</p>\n\n<pre><code>WORD *t1 = NULL;\nWORD *t2 = NULL;\nWORD *t = NULL;\n\nvoid InsertWordEN(WORD *t1, TD x)\n{\n    if(t1 == NULL)\n    {\n        WORD *temp;\n        temp = new WORD;\n        strcpy(temp-&gt;data.EN, x.EN);\n        temp-&gt;left = NULL;\n        temp-&gt;right = NULL;\n        t1 = temp;\n    }\n    else \n    {\n        if (strcmp(t1-&gt;data.EN, x.EN) == 1)\n        {\n            InsertWordEN(t1-&gt;left,x);\n        }\n        else if(strcmp(t1-&gt;data.EN, x.EN) == 0)\n        {\n            InsertWordEN(t1-&gt;right,x);\n        }\n    }\n}\nvoid InsertWordVN(WORD *t2, TD x)\n{\n    if(t2 == NULL)\n    {\n        WORD *temp;\n        temp = new WORD;\n        strcpy(temp-&gt;data.VN, x.VN);\n        temp-&gt;left = NULL;\n        temp-&gt;right = NULL;\n        t2 = temp;\n    }\n    else \n    {\n        if (strcmp(t2-&gt;data.VN, x.VN) == 1)\n        {\n            InsertWordVN(t2-&gt;left,x);\n        }\n        else if(strcmp(t2-&gt;data.VN, x.VN) == 0)\n        {\n            InsertWordVN(t2-&gt;right,x);\n        }\n    }\n}\n\nvoid InsertWord(TD &amp;x)\n{\n    cout&lt;&lt;\"\\EN: \"; cin&gt;&gt;x.EN;\n    InsertWordEN(t1,x);\n    cout&lt;&lt;\"\\nVN: \"; cin&gt;&gt;x.VN;\n    InsertWordEN(t2,x);\n}\n\nvoid OutputWord_NLR(WORD *t)\n{\n    if(t1 != NULL)\n    {\n        cout&lt;&lt;t1-&gt;data.EN&lt;&lt;\" \"; \n        OutputWord_NLR(t1-&gt;left);\n        OutputWord_NLR(t1-&gt;right);\n    }\n    else if(t2 != NULL)\n    {\n        cout&lt;&lt;t2-&gt;data.VN&lt;&lt;\" \"; \n        OutputWord_NLR(t2-&gt;left);\n        OutputWord_NLR(t2-&gt;right);\n    }\n}   \nint main()\n{\n    int select; TD x;\n    InsertWord(x);\n    cout&lt;&lt;\"\\nOutput Tree EN and VN\";\n    OutputWord_NLR(t);  \n    getch();\n    return 0;\n}\n</code></pre>\n\n<p>I think OutputWord_NLR function is wrong ? \nBTS. It's too hard for me . I'm trying to understand it :) \nSorry ! It's seems too long . So I can't send at all my code</p>\n"}, {"tags": ["c++", "wxwidgets", "windowsversion"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1528906962, "post_id": 50841926, "comment_id": 88687523, "body": "According to <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms724832%28v=vs.85%29.aspx?f=255&amp;MSPPError=-2147217396\" rel=\"nofollow noreferrer\">the documentation</a> XP is both 5.1 and 5.2."}, {"owner": {"reputation": 28522, "user_id": 459943, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1820b3c909a14f78a3b8c5aa46f9759f?s=128&d=identicon&r=PG", "display_name": "Lion King", "link": "https://stackoverflow.com/users/459943/lion-king"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1528907126, "post_id": 50841926, "comment_id": 88687623, "body": "@tadman: For that reason, I want another short way."}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1528911803, "post_id": 50841926, "comment_id": 88690050, "body": "Your code is right. In a portable app you should also check the return of <a href=\"http://docs.wxwidgets.org/trunk/classwx_platform_info.html#ab70a9c0bac9a38f05930e5f05a153cff\" rel=\"nofollow noreferrer\">wxPlatformInfo::GetOperatingSystemId</a>"}], "answers": [{"comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1528907793, "post_id": 50842129, "comment_id": 88687938, "body": "This won&#39;t get the version of windows running the application; only if they&#39;ve been set on the build machine"}], "tags": [], "owner": {"reputation": 292, "user_id": 9927133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a053d1326f4980e131009a6493f79200?s=128&d=identicon&r=PG&f=1", "display_name": "mkamerath", "link": "https://stackoverflow.com/users/9927133/mkamerath"}, "is_accepted": false, "score": -2, "last_activity_date": 1528907389, "creation_date": 1528907389, "answer_id": 50842129, "question_id": 50841926, "link": "https://stackoverflow.com/questions/50841926/checking-the-windows-version/50842129#50842129", "title": "Checking the Windows version", "body": "<p>If you're not against using macros, you can use</p>\n\n<pre><code>#ifdef WINDOWS_XP\n  // Code\n#elif defined WINDOWS_7\n  // Other code\n#endif\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 28522, "user_id": 459943, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1820b3c909a14f78a3b8c5aa46f9759f?s=128&d=identicon&r=PG", "display_name": "Lion King", "link": "https://stackoverflow.com/users/459943/lion-king"}, "edited": false, "score": 0, "creation_date": 1528907751, "post_id": 50842145, "comment_id": 88687918, "body": "I saw that functions before, but the problem that all of them &quot;OrGreater &quot;. Please check the last line of my question."}, {"owner": {"reputation": 267, "user_id": 5664820, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4iDn8.jpg?s=128&g=1", "display_name": "ROCFER", "link": "https://stackoverflow.com/users/5664820/rocfer"}, "reply_to_user": {"reputation": 28522, "user_id": 459943, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1820b3c909a14f78a3b8c5aa46f9759f?s=128&d=identicon&r=PG", "display_name": "Lion King", "link": "https://stackoverflow.com/users/459943/lion-king"}, "edited": false, "score": 1, "creation_date": 1528908115, "post_id": 50842145, "comment_id": 88688098, "body": "you should create that like here , <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms725491(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}, {"owner": {"reputation": 28522, "user_id": 459943, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1820b3c909a14f78a3b8c5aa46f9759f?s=128&d=identicon&r=PG", "display_name": "Lion King", "link": "https://stackoverflow.com/users/459943/lion-king"}, "edited": false, "score": 0, "creation_date": 1528908478, "post_id": 50842145, "comment_id": 88688277, "body": "I am looking for a short code, but that API code is too long. My question is &quot;is there another short way that gives me the windows version?&quot;"}], "tags": [], "owner": {"reputation": 267, "user_id": 5664820, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4iDn8.jpg?s=128&g=1", "display_name": "ROCFER", "link": "https://stackoverflow.com/users/5664820/rocfer"}, "is_accepted": false, "score": 1, "last_activity_date": 1528907438, "creation_date": 1528907438, "answer_id": 50842145, "question_id": 50841926, "link": "https://stackoverflow.com/questions/50841926/checking-the-windows-version/50842145#50842145", "title": "Checking the Windows version", "body": "<p>BOOL WINAPI IsWindowsXPOrGreater(void);\ncheck others here : <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dn424972(v=vs.85).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/windows/desktop/dn424972(v=vs.85).aspx</a></p>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 0, "last_activity_date": 1528919009, "last_edit_date": 1528919009, "creation_date": 1528918572, "answer_id": 50844961, "question_id": 50841926, "link": "https://stackoverflow.com/questions/50841926/checking-the-windows-version/50844961#50844961", "title": "Checking the Windows version", "body": "<p>What you already have is about as short as you can get, though you should cache the results from <code>wxPlatformInfo</code>:</p>\n\n<pre><code>wxPlatformInfo windows = wxPlatformInfo::Get();\nint major = windows.GetOSMajorVersion();\nint minor = windows.GetOSMinorVersion();\nif (major == 5 &amp;&amp; minor == 1) {\n    wxLogMessage(\"Windows XP\");\n} else if (major == 5 &amp;&amp; minor == 2) {\n    wxLogMessage(\"Windows XP 64Bit\");\n}\n</code></pre>\n\n<p>Otherwise, consider using <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms725492.aspx\" rel=\"nofollow noreferrer\"><code>VerifyVersionInfo()</code></a> to let the OS compare the version numbers for you:</p>\n\n<pre><code>bool IsWinXP32Bit()\n{\n   OSVERSIONINFOEX osvi = {};\n   osvi.dwOSVersionInfoSize = sizeof(OSVERSIONINFOEX);\n   osvi.dwMajorVersion = 5;\n   osvi.dwMinorVersion = 1;\n   osvi.wServicePackMajor = 0;\n   osvi.wServicePackMinor = 0;\n\n   DWORDLONG dwlConditionMask = 0;\n   VER_SET_CONDITION(dwlConditionMask, VER_MAJORVERSION, VER_EQUAL);\n   VER_SET_CONDITION(dwlConditionMask, VER_MINORVERSION, VER_EQUAL);\n   VER_SET_CONDITION(dwlConditionMask, VER_SERVICEPACKMAJOR, VER_GREATER_EQUAL);\n   VER_SET_CONDITION(dwlConditionMask, VER_SERVICEPACKMINOR, VER_GREATER_EQUAL);\n\n   return VerifyVersionInfo(&amp;osvi,\n      VER_MAJORVERSION | VER_MINORVERSION | VER_SERVICEPACKMAJOR | VER_SERVICEPACKMINOR,\n      dwlConditionMask);\n}\n\nbool IsWinXP64Bit()\n{\n   OSVERSIONINFOEX osvi = {};\n   osvi.dwOSVersionInfoSize = sizeof(OSVERSIONINFOEX);\n   osvi.dwMajorVersion = 5;\n   osvi.dwMinorVersion = 2;\n   osvi.wServicePackMajor = 0;\n   osvi.wServicePackMinor = 0;\n\n   DWORDLONG dwlConditionMask = 0;\n   VER_SET_CONDITION(dwlConditionMask, VER_MAJORVERSION, VER_EQUAL);\n   VER_SET_CONDITION(dwlConditionMask, VER_MINORVERSION, VER_EQUAL);\n   VER_SET_CONDITION(dwlConditionMask, VER_SERVICEPACKMAJOR, VER_GREATER_EQUAL);\n   VER_SET_CONDITION(dwlConditionMask, VER_SERVICEPACKMINOR, VER_GREATER_EQUAL);\n\n   return VerifyVersionInfo(&amp;osvi,\n      VER_MAJORVERSION | VER_MINORVERSION | VER_SERVICEPACKMAJOR | VER_SERVICEPACKMINOR,\n      dwlConditionMask);\n}\n\n...\n\nif (IsWinXP32Bit())\n    wxLogMessage(\"Windows XP\");\n} else if (IsWinXP64Bit()) {\n    wxLogMessage(\"Windows XP 64Bit\");\n}\n</code></pre>\n"}], "owner": {"reputation": 28522, "user_id": 459943, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1820b3c909a14f78a3b8c5aa46f9759f?s=128&d=identicon&r=PG", "display_name": "Lion King", "link": "https://stackoverflow.com/users/459943/lion-king"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 423, "favorite_count": 1, "answer_count": 3, "score": 2, "last_activity_date": 1528919009, "creation_date": 1528906682, "last_edit_date": 1528907482, "question_id": 50841926, "link": "https://stackoverflow.com/questions/50841926/checking-the-windows-version", "title": "Checking the Windows version", "body": "<p>I want a code to be executed just for Windows-XP but I must check whether the current windows is Windows-XP or not.</p>\n\n<pre><code>wxPlatformInfo windows = wxPlatformInfo::Get();\nint winXP[] = { 5,1 };\nint winXP64[] = { 5,2 };\nif (windows.GetOSMajorVersion() == winXP[0] &amp;&amp; windows.GetOSMinorVersion() == winXP[1]) {\n    wxLogMessage(\"Windows XP\");\n} else if (windows.GetOSMajorVersion() == winXP64[0] &amp;&amp; windows.GetOSMinorVersion() == winXP64[1]) {\n    wxLogMessage(\"Windows XP 64Bit\");\n}\n</code></pre>\n\n<p>The previous code gives me the direct way to know the windows version.</p>\n\n<p><strong>is there another short way that gives me the windows version?</strong><br>\nBut don't forget (== window-XP not >= windows-XP)?</p>\n"}, {"tags": ["c++", "fstream"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 3, "creation_date": 1528906478, "post_id": 50841816, "comment_id": 88687259, "body": "1) <code>m_ifs &lt;&lt; &quot;Write something&quot;</code> is invalid, due to <code>m_ifs</code> being <code>std::ifstream</code>, and not having <code>operator &lt;&lt;</code> defined. 2) Please provide <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 267, "user_id": 5664820, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4iDn8.jpg?s=128&g=1", "display_name": "ROCFER", "link": "https://stackoverflow.com/users/5664820/rocfer"}, "edited": false, "score": 0, "creation_date": 1528906923, "post_id": 50841816, "comment_id": 88687499, "body": "you should : m_ifs = (&quot;path_to_file&quot;, ios::in); try this"}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1528906918, "post_id": 50841879, "comment_id": 88687498, "body": "This is the wrong way of declaring global variable in header file."}, {"owner": {"reputation": 37, "user_id": 8019289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22a44a0343330ae058621db62d7e80e0?s=128&d=identicon&r=PG&f=1", "display_name": "KvB", "link": "https://stackoverflow.com/users/8019289/kvb"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1528911154, "post_id": 50841879, "comment_id": 88689716, "body": "What is, the correct way, then? I avoid using global variables whenever I can, but this worked for me in the past."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1528911321, "post_id": 50841879, "comment_id": 88689795, "body": "Right legacy way is declaring them <code>extern</code> and than defining in cpp file. The C++17 way is by declaring them <code>inline</code>."}, {"owner": {"reputation": 37, "user_id": 8019289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22a44a0343330ae058621db62d7e80e0?s=128&d=identicon&r=PG&f=1", "display_name": "KvB", "link": "https://stackoverflow.com/users/8019289/kvb"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1528911371, "post_id": 50841879, "comment_id": 88689823, "body": "I will look into this. Thank you!"}], "tags": [], "owner": {"reputation": 37, "user_id": 8019289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22a44a0343330ae058621db62d7e80e0?s=128&d=identicon&r=PG&f=1", "display_name": "KvB", "link": "https://stackoverflow.com/users/8019289/kvb"}, "is_accepted": true, "score": -2, "last_activity_date": 1528911336, "last_edit_date": 1528911336, "creation_date": 1528906518, "answer_id": 50841879, "question_id": 50841816, "link": "https://stackoverflow.com/questions/50841816/c-ifstream-has-incomplete-type/50841879#50841879", "title": "C++ ifstream has incomplete type", "body": "<p>It looks like a global variable to me. If it indeed is, declare them the following way:</p>\n\n<pre><code>//fname.hpp:\nconst std::string m_file = (\"path_to_file\");\nstd::fstream m_fs;\n</code></pre>\n\n<p>and </p>\n\n<pre><code>// fname.cpp\nm_fs.open(m_file.c_str());\nif (!m_fs.is_open()) {\n      std::cerr &lt;&lt; \"Not writing to file\" &lt;&lt; std::endl;\n      return;\n}\nm_fs &lt;&lt; \"Write something\"\n</code></pre>\n\n<p>Also, you can't write to ifstream. Change it to ofstream or fstream.</p>\n"}, {"tags": [], "owner": {"reputation": 292, "user_id": 9927133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a053d1326f4980e131009a6493f79200?s=128&d=identicon&r=PG&f=1", "display_name": "mkamerath", "link": "https://stackoverflow.com/users/9927133/mkamerath"}, "is_accepted": false, "score": 2, "last_activity_date": 1528908161, "creation_date": 1528908161, "answer_id": 50842323, "question_id": 50841816, "link": "https://stackoverflow.com/questions/50841816/c-ifstream-has-incomplete-type/50842323#50842323", "title": "C++ ifstream has incomplete type", "body": "<p>It looks like you got ifstream and ofstream confused. As was stated in the comments, std::ifstream does not define the operator &lt;&lt;.</p>\n\n<p>What you are looking for with an output file is std::ofstream. Remember the o is for output, i is for input</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9518022"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3171, "favorite_count": 0, "accepted_answer_id": 50841879, "answer_count": 2, "score": 0, "last_activity_date": 1528911336, "creation_date": 1528906320, "last_edit_date": 1528908126, "question_id": 50841816, "link": "https://stackoverflow.com/questions/50841816/c-ifstream-has-incomplete-type", "title": "C++ ifstream has incomplete type", "body": "<p>I'm modifying an project where I want to write an output to a file. In my <code>.hpp</code> file I declared a file stream like so:</p>\n\n<pre><code>// fname.hpp file\n#include &lt;fstream&gt;\n\nstd::ifstream m_ifs = (\"path_to_file\");\n</code></pre>\n\n<p>then on my <code>.cpp</code> file I am have</p>\n\n<pre><code>// fname.cpp\nif (!m_ifs.is_open()) {\n      std::cerr &lt;&lt; \"Not writing to file\" &lt;&lt; std::endl;\n      return;\n}\nm_ifs &lt;&lt; \"Write something\"\n</code></pre>\n\n<p>But when I compile I get the following error:</p>\n\n<pre><code>error: field \u2018m_ifs\u2019 has incomplete type \u2018std::ifstream {aka std::basic_ifstream&lt;char&gt;}\u2019\n\n/usr/include/c++/5/iosfwd:116:11: note: declaration of \u2018std::ifstream {aka class std::basic_ifstream&lt;char&gt;}\u2019\n     class basic_ifstream;\n</code></pre>\n\n<p>The error points to my declaration on the <code>hpp</code> file.</p>\n\n<p>The solutions I found on the web didn't solve the problem.</p>\n\n<hr>\n\n<p>The following worked:</p>\n\n<pre><code>// fname.hpp file\n#include &lt;fstream&gt;\n\nconst std::string m_file = (\"path_to_file\");\nstd::fstream m_fs;\n</code></pre>\n\n<p>and </p>\n\n<pre><code>// fname.cpp\nm_fs.open(m_file.c_str());\nif (!m_fs.is_open()) {\n      std::cerr &lt;&lt; \"Not writing to file\" &lt;&lt; std::endl;\n      return;\n}\nm_fs &lt;&lt; \"Write something\"\n</code></pre>\n"}, {"tags": ["c++", "opencl", "nvidia"], "comments": [{"owner": {"reputation": 5977, "user_id": 1745695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b932c5253c45af61dc443fbc1b9c935c?s=128&d=identicon&r=PG", "display_name": "Dithermaster", "link": "https://stackoverflow.com/users/1745695/dithermaster"}, "edited": false, "score": 0, "creation_date": 1529103368, "post_id": 50841751, "comment_id": 88769164, "body": "What exactly do you mean by &quot;hostBuffer data gets lost&quot;? If you change the host memory before the unmap completes (it is async) then they wrong data will be written. I suggest getting a trace in Nsight and seeing if you&#39;re re-using a buffer on the CPU side before the GPU operation has finished. Also, why do you use CL_MEM_ALLOC_HOST_PTR? I don&#39;t think it is needed here since the map operation makes it host accessible. Finally, why so many command queues, if I might ask?"}, {"owner": {"reputation": 1, "user_id": 9936567, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cohpkfmOMco/AAAAAAAAAAI/AAAAAAAAAVY/eYLmIpZzpD0/photo.jpg?sz=128", "display_name": "Remy561", "link": "https://stackoverflow.com/users/9936567/remy561"}, "reply_to_user": {"reputation": 5977, "user_id": 1745695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b932c5253c45af61dc443fbc1b9c935c?s=128&d=identicon&r=PG", "display_name": "Dithermaster", "link": "https://stackoverflow.com/users/1745695/dithermaster"}, "edited": false, "score": 0, "creation_date": 1529229144, "post_id": 50841751, "comment_id": 88791020, "body": "With &quot;hostBuffer data gets lost&quot; I mean that the device does not receive the correct data as the output is wrong, while it is correct with the forced clFinish after each call of the main function, which should be removed. A host pointer array is used to handle the async transfers. Buffer overwriting is prevented by a clFinish before mapping. I used ALLOC_HOST_PTR because the Nvidia OCL guide told me to and it allocates host memory which I use for storing the parameter data. Finally, only 2 command queues are used but more is possible as well by a defined variable. Will try Nsight tomorrow."}, {"owner": {"reputation": 5977, "user_id": 1745695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b932c5253c45af61dc443fbc1b9c935c?s=128&d=identicon&r=PG", "display_name": "Dithermaster", "link": "https://stackoverflow.com/users/1745695/dithermaster"}, "edited": false, "score": 0, "creation_date": 1529264247, "post_id": 50841751, "comment_id": 88799603, "body": "The clEnqueueUnmapMemObject is asynchronous, which means the host memory must be maintained (not unallocated and not overwritten) until the unmap finishes. Instead of clFinish you could take an event on the unmap and then wait on that event before getting rid of the host memory."}], "owner": {"reputation": 1, "user_id": 9936567, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cohpkfmOMco/AAAAAAAAAAI/AAAAAAAAAVY/eYLmIpZzpD0/photo.jpg?sz=128", "display_name": "Remy561", "link": "https://stackoverflow.com/users/9936567/remy561"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 614, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1528910327, "creation_date": 1528906123, "last_edit_date": 1528910327, "question_id": 50841751, "link": "https://stackoverflow.com/questions/50841751/opencl-vs-cuda-pinned-memory", "title": "OpenCL vs CUDA: Pinned memory", "body": "<p>I have been porting my <a href=\"https://www5.cs.fau.de/research/former-projects/rabbitct/\" rel=\"nofollow noreferrer\" title=\"RabbitCT\">RabbitCT</a> CUDA implementation to OpenCL and I'm running into issues with pinned memory.</p>\n\n<p>For CUDA a host buffer is created that buffers the input images to be processed in pinned memory. This allows the host to catch the next batch of input images while the GPU processes the current batch. A simplified mockup of my CUDA implementation is as follows:</p>\n\n<pre><code>// globals\nfloat** hostProjBuffer = new float*[BUFFER_SIZE];\nfloat* devProjection[STREAMS_MAX];\ncudaStream_t stream[STREAMS_MAX];\n\nvoid initialize()\n{\n    // initiate streams\n    for( uint s = 0; s &lt; STREAMS_MAX; s++ ){\n        cudaStreamCreateWithFlags (&amp;stream[s], cudaStreamNonBlocking);\n        cudaMalloc( (void**)&amp;devProjection[s], imgSize);\n    }\n\n    // initiate buffers\n    for( uint b = 0; b &lt; BUFFER_SIZE; b++ ){\n        cudaMallocHost((void **)&amp;hostProjBuffer[b], imgSize);\n    }\n}\n\n// main function called for all input images\nvoid backproject(imgdata* r)\n{\n    uint projNr = r-&gt;imgnr % BUFFER_SIZE;\n    uint streamNr = r-&gt;imgnr % STREAMS_MAX;\n\n    // When buffer is filled, wait until work in current stream has finished\n    if(projNr == 0) {\n        cudaStreamSynchronize(stream[streamNr]);\n    }       \n\n    // copy received image data to buffer (maps double precision to float)\n    std::copy(r-&gt;I_n, r-&gt;I_n+(imgSizeX * imgSizeY), hostProjBuffer[projNr]);\n\n    // copy image and matrix to device\n    cudaMemcpyAsync( devProjection[streamNr], hostProjBuffer[projNr], imgSize, cudaMemcpyHostToDevice, stream[streamNr] );\n\n    // call kernel\n    backproject&lt;&lt;&lt;numBlocks, threadsPerBlock, 0 , stream[streamNr]&gt;&gt;&gt;(devProjection[streamNr]);\n}\n</code></pre>\n\n<p>So, for CUDA, I create a pinned host pointer for each buffer item and copy the data to the device before executing kernel of each stream.</p>\n\n<p>For OpenCL I initially did something similar when following the <a href=\"https://www.nvidia.com/content/cudazone/CUDABrowser/downloads/papers/NVIDIA_OpenCL_BestPracticesGuide.pdf\" rel=\"nofollow noreferrer\" title=\"Nvidia OpenCL Best Practices Guide\">Nvidia OpenCL Best Practices Guide</a>. Here they recommend creating two buffers, one for copying the kernel data to and one for the pinned memory. However, this leads to the implementation using double the device memory as both the kernel and pinned memory buffers are allocated on the device.</p>\n\n<p>To get around this memory issue, I created an implementation where only a mapping is made to the device as it is needed. This can be seen in the following implementation:</p>\n\n<pre><code>// globals\nfloat** hostProjBuffer = new float* [BUFFER_SIZE];\ncl_mem devProjection[STREAMS_MAX], devMatrix[STREAMS_MAX];\ncl_command_queue queue[STREAMS_MAX];\n\n// initiate streams\nvoid initialize()\n{\n    for( uint s = 0; s &lt; STREAMS_MAX; s++ ){\n        queue[s] = clCreateCommandQueueWithProperties(context, device, NULL, &amp;status);\n        devProjection[s] = clCreateBuffer(context, CL_MEM_READ_ONLY | CL_MEM_ALLOC_HOST_PTR, imgSize, NULL, &amp;status);\n    }\n}\n\n// main function called for all input images\nvoid backproject(imgdata* r)\n{\n    const uint projNr = r-&gt;imgnr % BUFFER_SIZE;\n    const uint streamNr = r-&gt;imgnr % STREAMS_MAX;\n\n    // when buffer is filled, wait until work in current stream has finished\n    if(projNr == 0) {\n       status = clFinish(queue[streamNr]);\n    }\n\n    // map host memory region to device buffer\n    hostProjBuffer[projNr] = (float*) clEnqueueMapBuffer(queue[streamNr], devProjection[streamNr], CL_FALSE, CL_MAP_WRITE_INVALIDATE_REGION, 0, imgSize, 0, NULL, NULL, &amp;status);\n\n    // copy received image data to hostbuffers\n    std::copy(imgPtr, imgPtr + (imgSizeX * imgSizeY), hostProjBuffer[projNr]);\n\n    // unmap the allocated pinned host memory\n    clEnqueueUnmapMemObject(queue[streamNr], devProjection[streamNr], hostProjBuffer[projNr], 0, NULL, NULL);   \n\n    // set stream specific arguments\n    clSetKernelArg(kernel, 0, sizeof(devProjection[streamNr]), (void *) &amp;devProjection[streamNr]);\n\n    // launch kernel\n    clEnqueueNDRangeKernel(queue[streamNr], kernel, 3, NULL, global_work_size, local_work_size, 0, NULL, NULL);\n\n    clFlush(queue[streamNr]);\n    clFinish(queue[streamNr]);   //should be removed!\n}\n</code></pre>\n\n<p>This implementation does use a similar amount of device memory as the CUDA implementation. However, I have been unable to get this last code example working without a clFinish after each loop, which significantly hampers the performance of the application. This indicates data is lost as the host moves ahead of the kernel. I tried increasing my buffer size to the number of input images, but this did not work either. So somehow during execution, the hostBuffer data gets lost.</p>\n\n<p>So, with the goal to write OpenCL code similar to CUDA, I have three questions:</p>\n\n<ol>\n<li>What is the recommended implementation for OpenCL pinned memory?</li>\n<li>Is my OpenCL implementation similar to how CUDA handles pinned memory?</li>\n<li>What causes the wrong data to be used in the OpenCL example?</li>\n</ol>\n\n<p>Thanks in advance!</p>\n\n<p>Kind regards,</p>\n\n<p>Remy</p>\n\n<p><br></p>\n\n<p>PS: Question initially asked at the <a href=\"https://devtalk.nvidia.com/default/topic/1036452/opencl-vs-cuda-pinned-memory/#5265195\" rel=\"nofollow noreferrer\">Nvidia developer forums</a></p>\n"}, {"tags": ["c++", "recursion", "visual-studio-2015"], "comments": [{"owner": {"reputation": 15431, "user_id": 3992939, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/JNHZt.jpg?s=128&g=1", "display_name": "c0der", "link": "https://stackoverflow.com/users/3992939/c0der"}, "edited": false, "score": 0, "creation_date": 1528908538, "post_id": 50841651, "comment_id": 88688312, "body": "A side not: <code>int call(int num)</code>  could be better named  <code>int  factorial_(int num)</code>"}, {"owner": {"reputation": 15431, "user_id": 3992939, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/JNHZt.jpg?s=128&g=1", "display_name": "c0der", "link": "https://stackoverflow.com/users/3992939/c0der"}, "edited": false, "score": 1, "creation_date": 1528984926, "post_id": 50841651, "comment_id": 88721259, "body": "<a href=\"https://docs.microsoft.com/en-us/windows-hardware/drivers/debugger/viewing-the-call-stack-in-visual-studio\" rel=\"nofollow noreferrer\">Viewing the Call Stack in Visual Studio</a>"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 2, "creation_date": 1561960757, "post_id": 50841651, "comment_id": 100213360, "body": "What makes you expect any difference? C++ the language has no special treatment for tail recursion. It&#39;s up to an implementation to deal with it. An implementation is unlikely to apply tail call optimisations in debug mode (if it bothers at all)."}, {"owner": {"reputation": 36858, "user_id": 1243641, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a70aa9d494bf438c8b56aced999e897f?s=128&d=identicon&r=PG", "display_name": "Scott Sauyet", "link": "https://stackoverflow.com/users/1243641/scott-sauyet"}, "edited": false, "score": 0, "creation_date": 1561984532, "post_id": 50841651, "comment_id": 100223837, "body": "Another way to think about it: a tail-recursive function <i>allows for</i> more more efficient use of the stack.  But it doesn&#39;t <i>require</i> it.  It&#39;s up to a compiler or interpreter to decide.  Some language specs require this optimization, especially in functional languages.  C++ does not.  (In JavaScript, it&#39;s somewhat worse: the specification requires it, but almost no implementations do so.)"}], "owner": {"reputation": 31, "user_id": 7453433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33e574feb635ca185d14a570a0b0e171?s=128&d=identicon&r=PG&f=1", "display_name": "micky mouse", "link": "https://stackoverflow.com/users/7453433/micky-mouse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1561960115, "creation_date": 1528905782, "last_edit_date": 1561960115, "question_id": 50841651, "link": "https://stackoverflow.com/questions/50841651/tail-recursion-vs-recursion", "title": "Tail recursion vs recursion", "body": "<p>I have two function ,one is a \"normal\" recursion and the other uses tail call so it's a tail recursion:\nthe \"normal\" recursion:</p>\n\n<pre><code> int factorial(int num)\n    {\n        if (num == 1)\n            return num;\n        return num*factorial(num - 1);\n    }\n</code></pre>\n\n<p>tail recursion:</p>\n\n<pre><code>int factorial_n(int num,int acc=1)\n{\n    if (num == 1)\n        return acc;\n    return factorial_n(num - 1,acc);\n}\nint call(int num)\n{\n    return factorial_n(num, 1);\n}\n</code></pre>\n\n<p>I am trying to visualize the difference in the stack when using tail recursion,<br>\nusing visual studio's call stack in debug mode ,but I cant see any difference!<br>\nAm I misunderstanding something?<br>\nHow can I visualize the difference between these two functions?</p>\n"}, {"tags": ["c++", "multithreading", "qt", "thread-safety", "qthread"], "answers": [{"comments": [{"owner": {"reputation": 6147, "user_id": 3767076, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/64707b213de57fb785081ba23aaea2cd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/3767076/felix"}, "edited": false, "score": 0, "creation_date": 1528909698, "post_id": 50842350, "comment_id": 88688935, "body": "I just checked the sources myself and QThread::exit uses a mutex - which at least hints that it should be fine. Still, it&#39;s something that should be explicitly stated in the documentation..."}], "tags": [], "owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "is_accepted": false, "score": 2, "last_activity_date": 1528908264, "creation_date": 1528908264, "answer_id": 50842350, "question_id": 50841645, "link": "https://stackoverflow.com/questions/50841645/is-qthreadquit-usabled-from-within-the-running-thread/50842350#50842350", "title": "Is QThread::quit usabled from within the running thread", "body": "<p>If you look in the file <code>src/corelib/thread/qthread.cpp</code> in the Qt source folder, you can see how <code>quit()</code> is implemented:</p>\n\n<pre><code>void QThread::quit()\n{ exit(); }\n</code></pre>\n\n<p>.... and <code>QThread::exit()</code> is definitely intended to be called from within the thread itself.  So the answer is yes, it's fine to call <code>quit()</code> from within the QThread's thread (although it might be a bit more usual to just call <code>QThread::exit()</code> directly instead).</p>\n"}, {"comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 8313, "user_id": 7621674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/323bed98b2e655d5fa9ac6d23a72b995?s=128&d=identicon&r=PG", "display_name": "m7913d", "link": "https://stackoverflow.com/users/7621674/m7913d"}, "edited": false, "score": 0, "creation_date": 1597766264, "post_id": 50848570, "comment_id": 112238385, "body": "@m7913d No, but the world would stop if it weren&#39;t so. I mean, a lot of Qt-using code would break if this method was not thread safe - because it shares code paths with things where lack of thread safety would break stuff. The source code is the documentation. You need to use a Qt debug build (you always should anyway when you debug stuff), with sources installed, and step through this method, and see what it does. Because of how <i>any</i> interaction with the event loop would work, it has to acquire locks, and is thus thread-safe."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 8313, "user_id": 7621674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/323bed98b2e655d5fa9ac6d23a72b995?s=128&d=identicon&r=PG", "display_name": "m7913d", "link": "https://stackoverflow.com/users/7621674/m7913d"}, "edited": false, "score": 0, "creation_date": 1597766549, "post_id": 50848570, "comment_id": 112238539, "body": "If you artificially undo thread safety from the event loop control paths, Qt Creator crashes/freezes almost immediately - I&#39;m just using Creator as an example of a large Qt application here, since I happen to build it from source along with Qt and can easily introduce changes. IOW: If Qt Creator works for you (and if KDE works, ...), then the method is thread-safe. It&#39;s a fundamental requirement. It&#39;s an OSS project, <b>do</b> feel free to contribute a documentation change that clarifies this! It won&#39;t happen automagically. Someone has to do it. Qt docs aren&#39;t set in stone."}, {"owner": {"reputation": 8313, "user_id": 7621674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/323bed98b2e655d5fa9ac6d23a72b995?s=128&d=identicon&r=PG", "display_name": "m7913d", "link": "https://stackoverflow.com/users/7621674/m7913d"}, "edited": false, "score": 0, "creation_date": 1597766733, "post_id": 50848570, "comment_id": 112238656, "body": "I definitely agree, I was just wondering if it was documented. I created a bug report: <a href=\"https://bugreports.qt.io/browse/QTBUG-86112\" rel=\"nofollow noreferrer\">bugreports.qt.io/browse/QTBUG-86112</a>"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 8313, "user_id": 7621674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/323bed98b2e655d5fa9ac6d23a72b995?s=128&d=identicon&r=PG", "display_name": "m7913d", "link": "https://stackoverflow.com/users/7621674/m7913d"}, "edited": false, "score": 0, "creation_date": 1597766958, "post_id": 50848570, "comment_id": 112238797, "body": "Nonono, don&#39;t just create a bug report. There&#39;s no manpower to deal with such stuff. You have to fix it yourself. I&#39;m serious. Get your contribution in, and close that bug report yourself :)"}, {"owner": {"reputation": 8313, "user_id": 7621674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/323bed98b2e655d5fa9ac6d23a72b995?s=128&d=identicon&r=PG", "display_name": "m7913d", "link": "https://stackoverflow.com/users/7621674/m7913d"}, "edited": false, "score": 0, "creation_date": 1597767448, "post_id": 50848570, "comment_id": 112239083, "body": "Sorry, but I do not have experience with submitting bug fixes, maybe you can fix this part of the docs?"}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1528941350, "creation_date": 1528941350, "answer_id": 50848570, "question_id": 50841645, "link": "https://stackoverflow.com/questions/50841645/is-qthreadquit-usabled-from-within-the-running-thread/50848570#50848570", "title": "Is QThread::quit usabled from within the running thread", "body": "<blockquote>\n  <p>Can I call <code>QThread::quit</code> from within the actual thread?</p>\n</blockquote>\n\n<p>The question is actually backwards!</p>\n\n<p>Since this method controls the event loop, and the event loop most definitely runs on the thread, the default assumption is that it's not a thread-safe method and thus <strong>can only be called from within the thread</strong>, since it controls a <code>QEventLoop</code> instance instantiated via <code>QThread::run</code>. That event loop, and its event dispatcher, are <code>QObject</code>s and most definitely have their <code>thread()</code> equal to the <code>QThread</code> instance in question.</p>\n\n<p>But that wouldn't make <code>QThread</code> very useful, and thus <code>QAbstractEventDispatcher::exit</code>, and thus <code>QEventLoop::quit</code> and <code>QThread::quit</code>, are indeed thread-safe methods - you can call them from wherever, including from threads other than the one where the event loop lives. Both the event loop and thread's methods take extra precautions to protect their state from races, so the \"and thus\" part a few sentences ago is hand-wavey a bit.</p>\n"}], "owner": {"reputation": 6147, "user_id": 3767076, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/64707b213de57fb785081ba23aaea2cd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/3767076/felix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "accepted_answer_id": 50848570, "answer_count": 2, "score": 0, "last_activity_date": 1528941350, "creation_date": 1528905766, "question_id": 50841645, "link": "https://stackoverflow.com/questions/50841645/is-qthreadquit-usabled-from-within-the-running-thread", "title": "Is QThread::quit usabled from within the running thread", "body": "<p>So I have the following situation:</p>\n\n<p>I have a QThread that runs an eventloop (i.e. no custom run function). To stop the thread, I send a signal to a worker in that thread. This worker then does cleanups etc and at some point is done and quits the thread.</p>\n\n<p>The problem I am facing right now is: If I invoke the workers stop method and then immediatly wait for the thread to finish it will never do so because the workers done signal does not get processed. Code:</p>\n\n<pre><code>class Worker {\nsignals:\n    void done();\n\npublic slots:\n    void stop() {\n        //dummy code to illustrate what happens here:\n        QTimer::singleShot(3000, this, &amp;Worker::done);\n    }\n};\n\n// in the main thread\nauto thread = new QThread();\nauto worker = new Worker();\nworker-&gt;moveToThread(thread);\nconnect(worker, &amp;Worker::done, thread, &amp;QThread::quit); //implicitly a queued connection\n\n// ...\n\nQMetaObject::invokeMethod(worker, \"stop\", Qt::QueuedConnection);\nthread-&gt;wait(); //blocks here forever, because the connect is queued\n</code></pre>\n\n<p>Now reason the problem is obvious - Because I block on the main thread the slot can never be invoked (because queued connection) and thus quit is never called. However, if I simply call <code>QThread::quit</code> (or <code>QThread::exit</code>) directly from the worker (or use a <code>DirectConnection</code>) then there is no problem anymore because the eventloop of the main thread is no longer required to process the event.</p>\n\n<p>So the actual question here is: Is that allowed? Can I call <code>QThread::quit</code> from within the actual thread? Or can this create Race conditions, deadlocks and other problems like that. The documentation does not mark the method as threadsafe - but the thread that is managed by QThread might be an exception.</p>\n"}, {"tags": ["c++", "gcc", "standards", "c++17"], "comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1528905026, "post_id": 50841326, "comment_id": 88686394, "body": "I&#39;ve seen something similar a few month ago."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1528905966, "post_id": 50841326, "comment_id": 88686903, "body": "I don&#39;t see any different in behavior between gcc 7 and 8 in your example?"}, {"owner": {"reputation": 2077, "user_id": 4694124, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c4e2b18d7cefdae9b599a884d2ae4e4c?s=128&d=identicon&r=PG", "display_name": "Lukas Barth", "link": "https://stackoverflow.com/users/4694124/lukas-barth"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1528960159, "post_id": 50841326, "comment_id": 88705764, "body": "@Barry oh yes, sorry! I simplified my example to the point that it also didn&#39;t compile anymore with GCC 7. The crucial point is that the <code>Befriended</code> class also needs to be a template. I changed my code above!"}], "answers": [{"comments": [{"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 1, "creation_date": 1528906110, "post_id": 50841702, "comment_id": 88687004, "body": "So making it <code>template&lt;class FA&gt; friend class ::MyGoodFriend;</code> fixes the problem.  Nice!"}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1528956495, "post_id": 50841702, "comment_id": 88703983, "body": "Does not it look first for inner::Befriend::Goodfriend?"}, {"owner": {"reputation": 2077, "user_id": 4694124, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c4e2b18d7cefdae9b599a884d2ae4e4c?s=128&d=identicon&r=PG", "display_name": "Lukas Barth", "link": "https://stackoverflow.com/users/4694124/lukas-barth"}, "edited": false, "score": 0, "creation_date": 1528962735, "post_id": 50841702, "comment_id": 88707222, "body": "@Barry Good catch - I didn&#39;t see that. However, according to <a href=\"http://eel.is/c++draft/temp.names#nt:simple-template-id\" rel=\"nofollow noreferrer\">eel.is/c++draft/temp.names#nt:simple-template-id</a> , <code>MyGoodFriend</code> should be a <code>simple-template-id</code>, therefore a <code>template-id</code>, and the <code>\u2026 is neither qualified nor a template-id \u2026 </code> shouldn&#39;t be fulfilled, right?"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 10, "last_activity_date": 1528977025, "last_edit_date": 1528977025, "creation_date": 1528905949, "answer_id": 50841702, "question_id": 50841326, "link": "https://stackoverflow.com/questions/50841326/c11-14-17-gcc-7-vs-gcc-8-name-lookup-for-friend-class-templates/50841702#50841702", "title": "C++11/14/17, GCC 7 vs GCC 8: Name lookup for friend class templates", "body": "<p>From <a href=\"http://eel.is/c++draft/namespace.memdef#3.sentence-4\" rel=\"nofollow noreferrer\">[namespace.memdef]/3</a>, emphasis mine (the wording is the same in C++11):</p>\n\n<blockquote>\n  <p>If a friend declaration in a non-local class first declares a class, function, class template or function template<sup>99</sup> the friend is a member of the innermost enclosing namespace. [...] If the name in a friend declaration is neither qualified nor a template-id and the declaration is a function or an elaborated-type-specifier, the lookup to determine whether the entity has been previously declared <strong>shall not consider any scopes outside the innermost enclosing namespace</strong>.</p>\n</blockquote>\n\n<p>That is, when you write:</p>\n\n<pre><code>template&lt;class FA&gt;\nfriend class MyGoodFriend;\n</code></pre>\n\n<p>We only look for <code>inner::MyGoodFriend</code>, not <code>::MyGoodFriend</code>. Since we don't find it, we consider it to be a forward declaration of the class template <code>inner::MyGoodFriend</code>. As a result, <code>::MyGoodFriend</code> is not <code>friend</code>ed. </p>\n\n<hr />\n\n<p>With the revision, gcc 7 compiled likely because of one of the many template-access related bugs. See this <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=59002\" rel=\"nofollow noreferrer\">meta-bug</a>. gcc 8's behavior is correct. </p>\n"}], "owner": {"reputation": 2077, "user_id": 4694124, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c4e2b18d7cefdae9b599a884d2ae4e4c?s=128&d=identicon&r=PG", "display_name": "Lukas Barth", "link": "https://stackoverflow.com/users/4694124/lukas-barth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1097, "favorite_count": 0, "accepted_answer_id": 50841702, "answer_count": 1, "score": 7, "last_activity_date": 1528977025, "creation_date": 1528904786, "last_edit_date": 1528960221, "question_id": 50841326, "link": "https://stackoverflow.com/questions/50841326/c11-14-17-gcc-7-vs-gcc-8-name-lookup-for-friend-class-templates", "title": "C++11/14/17, GCC 7 vs GCC 8: Name lookup for friend class templates", "body": "<p>I'm trying to figure out while the following code works in GCC 7, but not in GCC 8.1.</p>\n\n<p>What the code does is:</p>\n\n<ul>\n<li>define (and forward declare) a class template <code>MyGoodFriend</code> (in global namespace)</li>\n<li>define a class template <code>Befriended</code> inside the <code>inner</code> namespace</li>\n<li>Make all specializations of <code>MyGoodFriend</code> a friend of <code>Befriended</code></li>\n</ul>\n\n<p>The problematic piece is </p>\n\n<pre><code>        template&lt;class FA&gt;\n        friend class MyGoodFriend;\n</code></pre>\n\n<p>I get what the problem is. GCC 8.1 requires me to use the fully-qualified name <code>::MyGoodFriend</code> in the <code>friend</code> declaration - however, GCC 7 was happy with just <code>MyGoodFriend</code>. This is the code:</p>\n\n<pre><code>template&lt;class A&gt;\nclass MyGoodFriend;\n\nnamespace inner {\n    template&lt;class T&gt;\n    class Befriended {\n    private:\n        int i;\n        T t;\n\n        template&lt;class FA&gt;\n        friend class MyGoodFriend;\n        // This works for gcc 8.1:\n        // template&lt;class FA&gt;\n        //friend class ::MyGoodFriend;\n    };\n} // namespace inner\n\ntemplate&lt;class A&gt;\nclass MyGoodFriend {\npublic:\n    void do_something() {\n        inner::Befriended&lt;bool&gt; bf;\n        bf.i = 42;\n    }\n};\n\nint main() {\n    MyGoodFriend&lt;int&gt; mgf;\n    mgf.do_something();\n}\n</code></pre>\n\n<p>You can test this with GCC 7 vs 8 here: <a href=\"https://godbolt.org/g/6u9rgy\" rel=\"nofollow noreferrer\">https://godbolt.org/g/6u9rgy</a></p>\n\n<p>Two questions:</p>\n\n<h2>Why did the behavior of GCC change?</h2>\n\n<p>Was GCC 7 misinterpreting the standard? Or is this a mistake in GCC 8?</p>\n\n<h2>If GCC 8 is correct: Why?</h2>\n\n<p>If I read the standard correctly (referring to the C++14 standard here):\nSection 3.4 (which specifies how name lookup works), Point 7.4 states:</p>\n\n<blockquote>\n  <p>A name used in the definition of a class X [\u2026]</p>\n  \n  <ul>\n  <li>if X is a member of namespace N, or is a nested class of a class that\n  is a member of N, or is a local class or a nested class within a local\n  class of a function that is a member of N, before the definition of\n  class X in namespace N or in one of N \u2019s enclosing namespaces</li>\n  </ul>\n</blockquote>\n\n<p>Obviously, <code>MyGoodFriend</code> is declared in an enclosing namespace, so it should be visible in <code>Befriended</code> - right?</p>\n\n<p>Thanks for any help!</p>\n"}, {"tags": ["c++", "opengl", "blur", "shadows", "gaussianblur"], "comments": [{"owner": {"reputation": 47, "user_id": 9904224, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7IzRyVbj0kg/AAAAAAAAAAI/AAAAAAAAABI/LYjo3MQLrGA/photo.jpg?sz=128", "display_name": "Charlie Wheate", "link": "https://stackoverflow.com/users/9904224/charlie-wheate"}, "edited": false, "score": 0, "creation_date": 1528918855, "post_id": 50841270, "comment_id": 88693553, "body": "I think the issue I am getting is called Banding, but not due how to fix it"}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 9904224, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7IzRyVbj0kg/AAAAAAAAAAI/AAAAAAAAABI/LYjo3MQLrGA/photo.jpg?sz=128", "display_name": "Charlie Wheate", "link": "https://stackoverflow.com/users/9904224/charlie-wheate"}, "edited": false, "score": 0, "creation_date": 1528922360, "post_id": 50845180, "comment_id": 88695350, "body": "thanks alot :)     I thought that might of been an issue,.            so I just needed 2 fbos for vertical and horizontal?"}, {"owner": {"reputation": 47, "user_id": 9904224, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7IzRyVbj0kg/AAAAAAAAAAI/AAAAAAAAABI/LYjo3MQLrGA/photo.jpg?sz=128", "display_name": "Charlie Wheate", "link": "https://stackoverflow.com/users/9904224/charlie-wheate"}, "edited": false, "score": 0, "creation_date": 1528930728, "post_id": 50845180, "comment_id": 88698289, "body": "then I use a third Fbo for combing both vertical and horizontal blurs into 1 texture?"}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "reply_to_user": {"reputation": 47, "user_id": 9904224, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7IzRyVbj0kg/AAAAAAAAAAI/AAAAAAAAABI/LYjo3MQLrGA/photo.jpg?sz=128", "display_name": "Charlie Wheate", "link": "https://stackoverflow.com/users/9904224/charlie-wheate"}, "edited": false, "score": 1, "creation_date": 1528951468, "post_id": 50845180, "comment_id": 88702257, "body": "@CharlieWheate No, the 2nd pass blures the result of the first pass!"}, {"owner": {"reputation": 47, "user_id": 9904224, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7IzRyVbj0kg/AAAAAAAAAAI/AAAAAAAAABI/LYjo3MQLrGA/photo.jpg?sz=128", "display_name": "Charlie Wheate", "link": "https://stackoverflow.com/users/9904224/charlie-wheate"}, "edited": false, "score": 0, "creation_date": 1528978699, "post_id": 50845180, "comment_id": 88717149, "body": "hmm, still getting banding,  maybe I could use Dithering?"}, {"owner": {"reputation": 47, "user_id": 9904224, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7IzRyVbj0kg/AAAAAAAAAAI/AAAAAAAAABI/LYjo3MQLrGA/photo.jpg?sz=128", "display_name": "Charlie Wheate", "link": "https://stackoverflow.com/users/9904224/charlie-wheate"}, "edited": false, "score": 0, "creation_date": 1529442810, "post_id": 50845180, "comment_id": 88872482, "body": "didnt fix the problem, still getting banding problems"}], "tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 1, "last_activity_date": 1528919419, "creation_date": 1528919419, "answer_id": 50845180, "question_id": 50841270, "link": "https://stackoverflow.com/questions/50841270/gaussian-blur-never-works-correctly/50845180#50845180", "title": "Gaussian Blur never works correctly", "body": "<p>In general your gaussian blur shader works, but you use it the wrong way.</p>\n\n<p>The gaussian blur shader in your question is a 2 pass shader. The 1st pass blurs vertical and the 2nd pass blurs horizontal.<br/>\nTo do this, 2 target textures are of need. The vertical blur pass read the source texture and writes to an \"intermediate\" texture. The horizontal blur reads the \"intermediate\" texture and writes to the target texture.</p>\n\n<p>Create 2 framebuffers and 2 texture attachments, in the same way as you did it your question. Of course it is possible to use 1 frame buffer with 2 texture attachments and switching the texture attachments between the passes, too. In fact the texture attachment of one framebuffer can be changed between the passes, too.<br/>\nIn my answer I decided to create 2 framebuffer, because the code of your question can be reused completly.</p>\n\n<p>Create a frambuffer object <code>_intermediateshadowmap_fbo</code> and an attached texture object <code>_intermediate_shadowmap</code> as you did it for <code>_filteredshadowmap_fbo</code> and <code>_filtered_shadowmap</code> in the question:</p>\n\n<pre><code>glGenFramebuffers(1, &amp;_intermediateshadowmap_fbo);\nglBindFramebuffer(GL_FRAMEBUFFER, _intermediateshadowmap_fbo);\n\nglGenTextures(1, &amp;_intermediate_shadowmap);\n\n.....\n</code></pre>\n\n<p>And create the 2nd frambuffer object <code>_filteredshadowmap_fbo</code> and the 2nd texture object  <code>_filtered_shadowmap</code>:</p>\n\n<pre><code>glGenFramebuffers(1, &amp;_filteredshadowmap_fbo);\nglBindFramebuffer(GL_FRAMEBUFFER, _filteredshadowmap_fbo);\n\nglGenTextures(1, &amp;_filtered_shadowmap);\n\n.....\n</code></pre>\n\n<p>To create the blured texture the following has to be done:</p>\n\n<ul>\n<li>set the viewport size for the texture</li>\n<li>bind the frambuffer <code>_intermediateshadowmap_fbo</code></li>\n<li>do the vertical blur, with the source texture <code>_shadowmap</code></li>\n<li>bind the frambuffer <code>_filteredshadowmap_fbo</code></li>\n<li>do the vertical blur, with the source texture <code>_intermediate_shadowmap</code></li>\n<li>bind the default framebuffer</li>\n<li>set the viewport size for the default framebuffer (window)</li>\n</ul>\n\n<p><br/></p>\n\n<pre><code>glViewport( 0, 0, SHADOW_QUALITY, SHADOW_QUALITY );\nglBindFramebuffer(GL_FRAMEBUFFER, _intermediateshadowmap_fbo);\n\nglUseProgram(_program_blurH);\nglUniform1i(_u_texture_map_h, 0);\nglActiveTexture(GL_TEXTURE0);\nglBindTexture(GL_TEXTURE_2D, _shadowmap);\nrenderQuad();\n\nglBindFramebuffer(GL_FRAMEBUFFER, _filteredshadowmap_fbo);\n\nglUseProgram(_program_blurV);\nglUniform1i(_u_texture_map_v, 0);\nglActiveTexture(GL_TEXTURE0);\nglBindTexture(GL_TEXTURE_2D, _intermediate_shadowmap);\nrenderQuad();\n\nglBindFramebuffer(GL_FRAMEBUFFER, 0);\nglViewport(0, 0, window_width, window_height);\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 9904224, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7IzRyVbj0kg/AAAAAAAAAAI/AAAAAAAAABI/LYjo3MQLrGA/photo.jpg?sz=128", "display_name": "Charlie Wheate", "link": "https://stackoverflow.com/users/9904224/charlie-wheate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 304, "favorite_count": 0, "accepted_answer_id": 50845180, "answer_count": 1, "score": 1, "last_activity_date": 1529040948, "creation_date": 1528904563, "last_edit_date": 1529040948, "question_id": 50841270, "link": "https://stackoverflow.com/questions/50841270/gaussian-blur-never-works-correctly", "title": "Gaussian Blur never works correctly", "body": "<p><a href=\"https://i.stack.imgur.com/RgQ5X.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RgQ5X.png\" alt=\"Image of the problem\"></a></p>\n\n<p>For some reason every time that I do blur it turns out like this, and I really confused as to why that is. For bloom as well, the blurring was all pixelated and still is as every time I do blur this happens. I really have no idea of what the issue is.</p>\n\n<p>Here is all the code for the blurring of the variance shadow maps that you need.</p>\n\n<p>GaussianBlurVertical fragment shader..</p>\n\n<pre><code>#version 330 core\n\nout vec4 FragColor; //fragment shader output\n\nin vec2 _texcoord;  //input interpolated texture coordinate\n\nuniform sampler2D textureMap; //the input image to blur\n\n//constant kernel values for Gaussian smoothing\nconst float kernel[]=float[21] (0.000272337,  0.00089296, 0.002583865, 0.00659813,  0.014869116,\n                                0.029570767, 0.051898313, 0.080381679, 0.109868729, 0.132526984, \n                                0.14107424,  0.132526984, 0.109868729, 0.080381679, 0.051898313, \n                                0.029570767, 0.014869116, 0.00659813,  0.002583865, 0.00089296, 0.000272337);\n\nvoid main()\n{ \n    //get the inverse of texture size\n    vec2 delta = 1.0 / textureSize(textureMap,0);\n    vec4 color = vec4(0);\n    int  index = 20;\n\n    //go through all neighbors and multiply the kernel value with the obtained \n    //colour from the input image\n    for(int i =- 10; i &lt;= 10; i++) {                \n        color += kernel[index--] * texture(textureMap, _texcoord + (vec2(0, i * delta.y)));\n    } \n\n    //return the filtered colour as fragment output\n    FragColor =  vec4(color.xy,0,0);    \n}\n</code></pre>\n\n<p>GuassianBlurHorizontal fragment shader..</p>\n\n<pre><code>#version 330 core\n\nout vec4 FragColor; //fragment shader output\n\nin vec2 _texcoord;  //input interpolated texture coordinate\n\n//uniform\nuniform sampler2D textureMap;   //the input image to blur\n\n//constant kernel values for Gaussian smoothing\nconst float kernel[]=float[21] (0.000272337,  0.00089296, 0.002583865, 0.00659813,  0.014869116,\n                                0.029570767, 0.051898313, 0.080381679, 0.109868729, 0.132526984, \n                                0.14107424,  0.132526984, 0.109868729, 0.080381679, 0.051898313, \n                                0.029570767, 0.014869116, 0.00659813,  0.002583865, 0.00089296, 0.000272337);\n\nvoid main()\n{ \n    //get the inverse of texture size\n    vec2 delta = 1.0 / textureSize(textureMap, 0);\n    vec4 color = vec4(0);\n    int  index = 20;\n\n    //go through all neighbors and multiply the kernel value with the obtained \n    //colour from the input image\n    for(int i =- 10; i &lt;= 10; i++) {                \n        color += kernel[index--] * texture(textureMap, _texcoord + (vec2(i * delta.x, 0)));\n    }\n\n    //return the filtered colour as fragment output\n    FragColor =  vec4(color.xy, 0, 0);  \n}\n</code></pre>\n\n<p>Blurring Stage..</p>\n\n<pre><code>glBindFramebuffer(GL_FRAMEBUFFER, _filteredshadowmap_fbo);\n\nglUseProgram(_program_blurH);\nglUniform1i(_u_texture_map_h, 0);\nglActiveTexture(GL_TEXTURE0);\nglBindTexture(GL_TEXTURE_2D, _shadowmap);\nrenderQuad();\n\nglUseProgram(_program_blurV);\nglUniform1i(_u_texture_map_v, 0);\nglActiveTexture(GL_TEXTURE0);\nglBindTexture(GL_TEXTURE_2D, _shadowmap);\nrenderQuad();\n\nglBindFramebuffer(GL_FRAMEBUFFER, 0);\n</code></pre>\n\n<p>Initialising the blur fbo..</p>\n\n<pre><code>// shadowmap blurring\n        glGenFramebuffers(1, &amp;_filteredshadowmap_fbo);\n        glBindFramebuffer(GL_FRAMEBUFFER, _filteredshadowmap_fbo);\n\n        glGenTextures(1, &amp;_filtered_shadowmap);\n\n        glBindTexture(GL_TEXTURE_2D, _filtered_shadowmap);\n\n        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);\n        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\n        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_BORDER);\n        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_BORDER);\n\n        glTexParameterfv(GL_TEXTURE_2D, GL_TEXTURE_BORDER_COLOR, borderColor);\n\n        glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA32F, SHADOW_QUALITY, SHADOW_QUALITY, 0, GL_RGBA, GL_FLOAT, NULL);\n        glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, _filtered_shadowmap, 0);\n\n        GLenum status2 = glCheckFramebufferStatus(GL_FRAMEBUFFER);\n        status2 != GL_FRAMEBUFFER_COMPLETE ? std::cerr &lt;&lt; \"Unable to create FBO\" &lt;&lt; std::endl : std::cout &lt;&lt; \"FBOs Were successful\" &lt;&lt; std::endl;\n\n        glBindFramebuffer(GL_FRAMEBUFFER, 0);\n</code></pre>\n"}, {"tags": ["c++", "transform"], "comments": [{"owner": {"reputation": 1505, "user_id": 2641513, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bGWLp.jpg?s=128&g=1", "display_name": "zoska", "link": "https://stackoverflow.com/users/2641513/zoska"}, "edited": false, "score": 4, "creation_date": 1528904700, "post_id": 50841223, "comment_id": 88686197, "body": "What have you already tried? What went wrong?"}], "answers": [{"comments": [{"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1528905955, "post_id": 50841626, "comment_id": 88686895, "body": "You might want to capture local variables, i.e. do <code>[=]</code> or <code>[&amp;]</code> instead of <code>[]</code>. This will make the lambda function more useful (e.g. add a value other than 2)."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1528906226, "post_id": 50841626, "comment_id": 88687090, "body": "You might want to <code>reserve</code> some capacity on res_vec first. But other than that, I think it&#39;s a good answer which shows technique without spoon-feeding OP."}, {"owner": {"reputation": 1, "user_id": 7362917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b0752cb99e2c94399fbfa2397fc66fe?s=128&d=identicon&r=PG&f=1", "display_name": "abacolla", "link": "https://stackoverflow.com/users/7362917/abacolla"}, "edited": false, "score": 0, "creation_date": 1529874856, "post_id": 50841626, "comment_id": 89020716, "body": "This is as far as I could go but it does not work; I&#39;m not sure how to deal with modifying the pair:     v2.reserve(v1.size());     std::transform(v1.begin(), v1.end(), std::back_inserter(v2), [&amp;](const std::pair&lt;U, U&gt; &amp;p){ v2.push_back(std::make_pair(p.first/maxVal, log10(p.second)));} );"}], "tags": [], "owner": {"reputation": 1561, "user_id": 2567725, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/BndRm.jpg?s=128&g=1", "display_name": "Olha", "link": "https://stackoverflow.com/users/2567725/olha"}, "is_accepted": false, "score": 2, "last_activity_date": 1528905696, "creation_date": 1528905696, "answer_id": 50841626, "question_id": 50841223, "link": "https://stackoverflow.com/questions/50841223/how-to-use-transform-with-vectors-of-pairs-in-c/50841626#50841626", "title": "How to use transform with vectors of pairs in c++", "body": "<p>Let's say you'd like to transform a vector of <code>int</code>'s such that each number is increased by 2.</p>\n\n<p>You can use <code>std::transform</code> + lambda function for that:</p>\n\n<pre><code>std::vector&lt;int&gt; my_vec = {1,2,3};\nstd::vector&lt;int&gt; res_vec;\nstd::transform(my_vec.begin(), my_vec.end(), std::back_inserter(res_vec), [](int x){ return x+2;} );\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7362917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b0752cb99e2c94399fbfa2397fc66fe?s=128&d=identicon&r=PG&f=1", "display_name": "abacolla", "link": "https://stackoverflow.com/users/7362917/abacolla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1528905696, "creation_date": 1528904388, "question_id": 50841223, "link": "https://stackoverflow.com/questions/50841223/how-to-use-transform-with-vectors-of-pairs-in-c", "title": "How to use transform with vectors of pairs in c++", "body": "<p>I would like some help on how to use transform on vectors of pairs. I went through the previous answers but did not find what I was looking for. In the code below I divide the first elements of a vector of pairs by a constant and then transfer both the first and second elements to a new vector of pairs. The code works fine but I would like to learn how to use transform along with a lambda function. I was not able to compose a lambda function. Any help from the experts will be most appreciated, thanks in advance.</p>\n\n<pre><code>template&lt;typename T, typename U&gt;\nvoid GraphSigm&lt;T,U&gt;::doTransform()\n{\n    sort(v1.begin(), v1.end());\n    typename std::vector&lt;std::pair&lt;U,U&gt;&gt;::const_iterator it0, it1;\n    it0 = v1.begin();\n    it1 = v1.end() - 1;\n    U maxVal = myMax(fabs((*it0).first), fabs((*it1).first));\n    for (auto i : v1) {\n        U a = i.first / maxVal;\n        U b = i.second;\n        v2.push_back(std::make_pair(a, b));\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "visual-studio", "dll"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1528905564, "post_id": 50841206, "comment_id": 88686685, "body": "A DLL produced in Debug mode contains symbolic information.  A DLL produced in Release mode has reduced symbol information.  A release mode DLL may be optimized.  Reminder:  C++ may <i>mangle</i> names."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1528916600, "post_id": 50841206, "comment_id": 88692378, "body": "What you see from dumpbin.exe is affected by whether or not it can find the .pdb file for the dll.  In particular the &quot;=foo&quot; part comes from the .pdb file.  Delete the .pdb file to feel better.  I&#39;d guess you next need to look why dumpbin.exe is so confused.  My crystal ball says it has something to do with the /debug:fastlink linker option."}], "answers": [{"tags": [], "owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "is_accepted": true, "score": 3, "last_activity_date": 1528906455, "creation_date": 1528906455, "answer_id": 50841851, "question_id": 50841206, "link": "https://stackoverflow.com/questions/50841206/difference-between-debug-and-release-when-exporting-c-functions-from-dll-as-c/50841851#50841851", "title": "Difference between Debug and Release when exporting C++ functions from DLL as C", "body": "<p>What you're seeing is the result of COMDAT folding (merging of identical function definitions).</p>\n\n<p>COMDAT folding is activated by default in Release mode (<code>/OPT:ICF</code>). To disable you can use <code>/OPT:NOICF</code>.</p>\n\n<p>But why would you want to do that? It's not like it breaks your Release DLL or anything.</p>\n\n<p>When you see <code>testFunction1 = testFunction1</code> the first part is the actual export name and the second part is the corresponding debug symbol.</p>\n\n<p>If you link without debug symbols, you'll see just <code>testFunction1</code>, without the <code>=</code> part. </p>\n"}], "owner": {"reputation": 189, "user_id": 6828175, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6e9d001d0030aca9d02a98b0f6456de8?s=128&d=identicon&r=PG&f=1", "display_name": "hal9000", "link": "https://stackoverflow.com/users/6828175/hal9000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 1, "accepted_answer_id": 50841851, "answer_count": 1, "score": 1, "last_activity_date": 1528906455, "creation_date": 1528904341, "question_id": 50841206, "link": "https://stackoverflow.com/questions/50841206/difference-between-debug-and-release-when-exporting-c-functions-from-dll-as-c", "title": "Difference between Debug and Release when exporting C++ functions from DLL as C", "body": "<p>I am building a DLL, which exports its functions as \"C\".</p>\n\n<p>I am testing using a dummy function:</p>\n\n<p>In my .cpp file </p>\n\n<pre><code>_MACRO(int) testFunction1()\n{\n    return 1;\n}\n</code></pre>\n\n<p>In my header file</p>\n\n<pre><code>_MACRO(int) testFunction1();\n</code></pre>\n\n<p>This macro is defined as </p>\n\n<pre><code>#  define  _MACRO(ret)  extern __declspec (dllimport) ret __stdcall\n#  define  _MACRO(ret)  __declspec (dllexport) ret __stdcall\n</code></pre>\n\n<p>Since I want these functions to be exported as C, i do </p>\n\n<pre><code> \\Debug&gt;dumpbin /exports demo.dll\n</code></pre>\n\n<p>This correctly gives me an output of </p>\n\n<pre><code> ordinal hint RVA      name\n\n      1    0 000026C0 testFunction1 = testFunction1\n</code></pre>\n\n<p>But when I do the same for Release</p>\n\n<pre><code>\\Release&gt;dumpbin /exports demo.dll\n</code></pre>\n\n<p>I get this:</p>\n\n<pre><code>  1    0 00001080 testFunction1 = _get_startup_argv_mode\n</code></pre>\n\n<p>How can I make it print out the function name for release configuration? Any changes in release settings?</p>\n"}, {"tags": ["c++", "winapi", "mfc"], "comments": [{"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1528905744, "post_id": 50841168, "comment_id": 88686787, "body": "There is a way to do it with <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb688195(v=vs.85).aspx\" rel=\"nofollow noreferrer\">DWM</a> but you end up redrawing the whole non-client area. It usually ends up looking odd and unreliable. I think you you just want to line up the windows, you could offset the window position a little to the left in that case."}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 1, "creation_date": 1528908675, "post_id": 50841168, "comment_id": 88688380, "body": "Change the window style to exclude WS_THICKFRAME."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1528972704, "post_id": 50841168, "comment_id": 88713523, "body": "@Adrian Probably not resizeable if you do that, but maybe the OP doesn&#39;t care (or can do something himself with WM_NCHITTEST)."}, {"owner": {"reputation": 552, "user_id": 7828978, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e231594bf369281e7b5c93eee08186cc?s=128&d=identicon&r=PG&f=1", "display_name": "Emile", "link": "https://stackoverflow.com/users/7828978/emile"}, "edited": false, "score": 0, "creation_date": 1529341083, "post_id": 50841168, "comment_id": 88828543, "body": "I don&#39;t care if the window is not resizeable and I&#39;ve tried removing WS_THICKFRAME, but it seems to do nothing."}, {"owner": {"reputation": 552, "user_id": 7828978, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e231594bf369281e7b5c93eee08186cc?s=128&d=identicon&r=PG&f=1", "display_name": "Emile", "link": "https://stackoverflow.com/users/7828978/emile"}, "edited": false, "score": 0, "creation_date": 1529414339, "post_id": 50841168, "comment_id": 88857763, "body": "I&#39;m using the ModifyStyle() function to remove WS_THICKFRAME in OnNcCalcSize(), but as I mentioned before, it does not work. Someone has an idea why ? Thx."}], "owner": {"reputation": 552, "user_id": 7828978, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e231594bf369281e7b5c93eee08186cc?s=128&d=identicon&r=PG&f=1", "display_name": "Emile", "link": "https://stackoverflow.com/users/7828978/emile"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 789, "favorite_count": 1, "answer_count": 0, "score": 6, "last_activity_date": 1529614222, "creation_date": 1528904241, "last_edit_date": 1529614222, "question_id": 50841168, "link": "https://stackoverflow.com/questions/50841168/how-to-remove-invisible-border-from-windows-10-window", "title": "How to remove invisible border from Windows 10 window", "body": "<p>I would like to know how to remove the invisible border of a Windows 10 window. The update from windows 7 to windows 10 of my application provoked that. </p>\n\n<p>I am using c++ MFC.</p>\n\n<hr>\n\n<p>Here's an image of the application with Windows 7 : \n<a href=\"https://i.stack.imgur.com/OzlH0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OzlH0.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p>With Windows 10 : </p>\n\n<h2><a href=\"https://i.stack.imgur.com/WAEm7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WAEm7.png\" alt=\"enter image description here\"></a></h2>\n\n<p>I've tried with the windows message WM_NCCALCSIZE, it removed the space between the two dialogs, but it removed the border and the title bar : </p>\n\n<h2><a href=\"https://i.stack.imgur.com/lMm1l.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lMm1l.png\" alt=\"enter image description here\"></a></h2>\n\n<p>I can't play with the position of the window.</p>\n\n<hr>\n\n<p>Is there anyway to get the border and the title back using WM_NCCALCSIZE or using a different window style ?</p>\n\n<p>Thx :)</p>\n\n<p>Or is there anyway to turn the invisible border visible and with a color ? Thx.</p>\n"}, {"tags": ["c++", "multithreading", "concurrency", "race-condition"], "comments": [{"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 0, "creation_date": 1528905600, "post_id": 50840959, "comment_id": 88686707, "body": "<code>task[i].join()</code> will not return until <code>task[i]</code> has completed.  Your program will never make more than one pass through the <code>while(tasksFinished &lt; buckets)</code> loop."}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 0, "creation_date": 1528905717, "post_id": 50840959, "comment_id": 88686775, "body": "The &quot;before&quot; and &quot;after&quot; messages do not appear to contain any information.  How are you able to tell which task produced them?"}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 0, "creation_date": 1528905947, "post_id": 50840959, "comment_id": 88686889, "body": "What does this code actually do to the image when it runs?"}, {"owner": {"reputation": 153, "user_id": 7402183, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1f450f6c0d7a3d0c0f6af26e848428c6?s=128&d=identicon&r=PG", "display_name": "AAS.N", "link": "https://stackoverflow.com/users/7402183/aas-n"}, "reply_to_user": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 0, "creation_date": 1528906232, "post_id": 50840959, "comment_id": 88687091, "body": "@jameslarge Thanks for the catch on the first point. As for the second point, I am printing the pixel location and associated color as part of the message, and I am able to tell only the pixels managed by one of the tasks is printing. i.e, task#1 operating from (0,0) to (200,0) and task#2 operates from (0,200) to (200,200); Only the iteration from (0,0) to (200,0) is shown."}, {"owner": {"reputation": 153, "user_id": 7402183, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1f450f6c0d7a3d0c0f6af26e848428c6?s=128&d=identicon&r=PG", "display_name": "AAS.N", "link": "https://stackoverflow.com/users/7402183/aas-n"}, "reply_to_user": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 0, "creation_date": 1528906387, "post_id": 50840959, "comment_id": 88687198, "body": "@jameslarge I am not saving the image and am unable to display it as part of an app in its current state, so all I am doing is tracking the changes on a per pixel level. I can see the color of the newImg-&gt;pixel(x,y) actually being modified by the end of the loop."}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 0, "creation_date": 1528906959, "post_id": 50840959, "comment_id": 88687520, "body": "Re, &quot;I am printing the pixel location and associated color as part of the message.&quot; The code in your examples doesn&#39;t do that. You might want to update your question so that it shows the code that you actually are running."}, {"owner": {"reputation": 8073, "user_id": 2852624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/682806d261e4f00f77aa8633689a9558?s=128&d=identicon&r=PG&f=1", "display_name": "Matthias247", "link": "https://stackoverflow.com/users/2852624/matthias247"}, "edited": false, "score": 0, "creation_date": 1528954834, "post_id": 50840959, "comment_id": 88703296, "body": "Does that program even run right in the single threaded case (buckets==0)? I wouldn&#39;t be sure if those x/y loops are correct, and actually run through each pixel"}, {"owner": {"reputation": 153, "user_id": 7402183, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1f450f6c0d7a3d0c0f6af26e848428c6?s=128&d=identicon&r=PG", "display_name": "AAS.N", "link": "https://stackoverflow.com/users/7402183/aas-n"}, "reply_to_user": {"reputation": 8073, "user_id": 2852624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/682806d261e4f00f77aa8633689a9558?s=128&d=identicon&r=PG&f=1", "display_name": "Matthias247", "link": "https://stackoverflow.com/users/2852624/matthias247"}, "edited": false, "score": 0, "creation_date": 1529004117, "post_id": 50840959, "comment_id": 88731474, "body": "@Matthias247 I am embarrassed to say, that was it...I just declared my loop normally and the code executes properly with 1 bucket. Attempting to use 4 buckets ends up working on 1/4th of the image though, but I&#39;ll try and verify I am setting up my threads correctly to begin with before following up."}, {"owner": {"reputation": 153, "user_id": 7402183, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1f450f6c0d7a3d0c0f6af26e848428c6?s=128&d=identicon&r=PG", "display_name": "AAS.N", "link": "https://stackoverflow.com/users/7402183/aas-n"}, "reply_to_user": {"reputation": 8073, "user_id": 2852624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/682806d261e4f00f77aa8633689a9558?s=128&d=identicon&r=PG&f=1", "display_name": "Matthias247", "link": "https://stackoverflow.com/users/2852624/matthias247"}, "edited": false, "score": 0, "creation_date": 1529004700, "post_id": 50840959, "comment_id": 88731765, "body": "@Matthias247 Yep, it works fine now"}], "owner": {"reputation": 153, "user_id": 7402183, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1f450f6c0d7a3d0c0f6af26e848428c6?s=128&d=identicon&r=PG", "display_name": "AAS.N", "link": "https://stackoverflow.com/users/7402183/aas-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1528908016, "creation_date": 1528903521, "last_edit_date": 1528908016, "question_id": 50840959, "link": "https://stackoverflow.com/questions/50840959/c-modify-same-pointer-using-multiple-threads", "title": "C++: Modify same pointer using multiple threads", "body": "<p>I am attempting an experiment with processing images in which I am modifying the color in each pixel. I tried implementing my code using \"buckets\", in which I divide the image into smaller regions - each receiving a dedicated thread to process the image.</p>\n\n<p>On my end, I do not really care if multiple threads are attempting to modify the same resource, in fact, that seems to be the point. Theoretically, the threads should be modifying different locations in memory in the form of pixels. When printing my results however, only the first tasks seems to iterate - leading me to think that some kind of race condition is occurring.</p>\n\n<blockquote>\n  <p>The function below is what manages the creation of each task, and\n  supplies it with starting coordinates and span to operate on. I\n  believe this is working fine, but it's here just for context:</p>\n</blockquote>\n\n<pre><code>Image* \nCCManager::CCAsync(uint8_t bucketSize, Image* source, \n                                        const std::vector&lt;float&gt;&amp; correction)\n{\n    Image* newImg = new Image(); // This will contain our end result\n    newImg-&gt;resize(source-&gt;width(), source-&gt;height());\n\n    assert(buckets &gt; 0);\n\n    // Now compute the width and height each bucket will render.\n    uint32_t width;\n    uint32_t height;\n\n    if(buckets == 2)    // Each bucket takes a vertical rectangle\n    {\n        width = source-&gt;xSize()/2;\n        height = source-&gt;ySize();\n    }\n    else\n    {\n        // Set width and height to produce square grids (powers of 2)\n        // *** Not shown for Brevity ***\n    }\n\n    std::vector&lt;std::thread&gt; tasks; // The threads we are managing\n\n    // These coordinates will be fed as starting locations for each task\n    uint32_t startX = 0;\n    uint32_t startY = 0;\n    uint8_t  tasksFinished = 0; \n\n    for(int i = 1; i &lt;= buckets; ++i)\n    {   \n\n        // Create a new task with a region for operation\n        tasks.emplace_back(std::thread(&amp;CCManager::applyCCTask,this, startX, startY,\n                                       width, height, source, newImg, correction));\n\n        // No iteration is required for 1 bucket, simply paint the whole image\n        if(buckets == 1){break;}\n\n        // **** I REMOVED PART OF THE CODE THAT SHOWS WHERE EXPONENT\n        // IS DEFINED AND DETERMINED FOR BREVITY\n        // Reached last column, start a new row\n        if(i % exponent == 0)\n        {\n            startX = 0;\n            startY+= height;\n        }\n        // Keep incrementing horizontally\n        else\n        {\n            startX+= width;\n        }\n    }\n\n    while(tasksFinished &lt; buckets)\n    {\n        // Join with whichever tasks finished\n        for(int i = 0; i &lt; buckets; ++i)\n        {\n            if(tasks[i].joinable())\n            {\n                tasks[i].join();\n                tasksFinished++;\n            }\n        }\n    }\n    tasks.clear();\n\n    return newImg;\n}\n</code></pre>\n\n<p>Having provided the new and source image pointers for each task, here they are in action. </p>\n\n<blockquote>\n  <p>The follow function retrieves the color in each pixel, and calls a\n  method that applies the correction accordingly.</p>\n</blockquote>\n\n<pre><code>void \nCCManager::applyCCTask(uint32_t x, uint32_t y, uint32_t width, uint32_t height,\n                              Image* source, Image* newImg,\n                              const std::vector&lt;float&gt;&amp; correction)\n{\n    // ** THIS ACTUALLY PRINTS THE CORRECT COORDINATES AND REGION SPAN\n    // ** FOR EACH THREAD\n    printf(\"Task renders @ (%i,%i) with %i x %i box\\n\", x,y,width,height);\n    assert(source);\n    assert(newImg);\n\n    for (; x &lt; width; ++x )\n    {\n        for (; y &lt; height; ++y)\n        {\n            Byte4 pixel = source-&gt;pixel (x, y);\n            Color color = pixel.color;\n\n            printf(\"Before correction: Pixel(%i,%i) color [%i,%i,%i]\\n\",x,y, pixel.color[0], pixel.color[1], pixel.color[2]);\n                Color correctedColor= addCorrectionToColor( color, correction);\n\n            Byte4* newPixel= &amp;newImg-&gt;pixel( x, y );\n\n            newPixel-&gt;color[0] = correctedColor[0];\n            newPixel-&gt;color[1] = correctedColor[1];\n            newPixel-&gt;color[2] = correctedColor[2];  \n\n            printf(\"After correction: Pixel(%i,%i) color [%i,%i,%i]\\n\",x,y, newImg-&gt;pixel( x, y ).color[0], newImg-&gt;pixel( x, y ).color[1], newImg-&gt;pixel( x, y ).color[2]);\n        }\n    }\n\n    printf(\"Task Finished!\\n\");\n}\n</code></pre>\n\n<p>With the code shown, all tasks end up printing the starting message with their area of operation, but inside the nested loop, the \"Before\" and \"After\" messages seem to only print from ONE task only.</p>\n\n<p>Why am I not allowed to modify the same image from multiple threads even though the actual pixel data being modified is different for each thread? Can I circumvent that without adding resource locks such as a mutexes, the whole point of this experiment was to allow each thread to run independently without any hindrance.</p>\n"}, {"tags": ["c++", "c++17"], "comments": [{"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 4, "creation_date": 1528903949, "post_id": 50840908, "comment_id": 88685779, "body": "No, we don&#39;t have auto arrays in C++. Arrays are evil, they don&#39;t know their size and get converted to pointers."}, {"owner": {"reputation": 2041, "user_id": 7316365, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/84de9f27708456d85bf1078aa51155b2?s=128&d=identicon&r=PG&f=1", "display_name": "Vivick", "link": "https://stackoverflow.com/users/7316365/vivick"}, "edited": false, "score": 0, "creation_date": 1528903994, "post_id": 50840908, "comment_id": 88685803, "body": "Auto deduces types not &quot;partial types&quot; I guess"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1528904029, "post_id": 50840908, "comment_id": 88685816, "body": "fyi: this compiles <code>decltype(1) num_array[] = {1, 2, 3, 4};</code>  live: <a href=\"https://godbolt.org/g/Yk2kJv\" rel=\"nofollow noreferrer\">godbolt.org/g/Yk2kJv</a>"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 4, "creation_date": 1528906311, "post_id": 50840908, "comment_id": 88687149, "body": "@Ron, no, arrays are not evil. Some programmers are, though."}, {"owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1528908160, "post_id": 50840908, "comment_id": 88688121, "body": "@RichardCritten: what is decltype(1) good for? You can write int if you like :-) And with <code>int array[] = {1,2,3,4};</code> nothing is special."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1547056390, "post_id": 50840908, "comment_id": 95064344, "body": "@Ron Arrays very much do know their size. It&#39;s sizeof(Array)/sizeof(*(Array)) (and you can make it comptime error if Array isn&#39;t an array (at least C, using _Generic, but I&#39;d bet there&#39;s a C++ version too)."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 1, "creation_date": 1547056636, "post_id": 50840908, "comment_id": 95064449, "body": "@PSkocik: Or even <code>template &lt;typename T, std::size_t N&gt; constexpr std::size_t N size(const T (&amp;)[N]) { return N; }</code>."}], "answers": [{"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 5, "last_activity_date": 1528975108, "last_edit_date": 1528975108, "creation_date": 1528904247, "answer_id": 50841172, "question_id": 50840908, "link": "https://stackoverflow.com/questions/50840908/do-we-have-auto-array-in-c17/50841172#50841172", "title": "Do we have auto array in c++17?", "body": "<p>Asking <a href=\"https://meta.stackoverflow.com/a/323382/2069064\">why</a> on language features is a notoriously difficult question to answer. </p>\n\n<p>But the hopefully helpful version is: <code>auto</code> is a very simple language feature that just does full deduction, not constrained deduction. You can add some declarators, like <code>auto&amp;</code> or <code>auto*</code>, but not all of them. As-is, it's incredibly useful. Just... not all powerful. It's often useful to start with a simple, restricted feature set and then expand later as we gain experience. </p>\n\n<hr />\n\n<p>With Concepts, it is possible that further power may be added to declarations to do more kinds of things, like:</p>\n\n<pre><code>std::vector&lt;int&gt; foo();\nstd::vector&lt;auto&gt; v = foo();\n</code></pre>\n\n<p>Having an array of <code>auto</code> seems to fit into that mold. Definitely not in C++17, but possibly for C++20. </p>\n"}, {"comments": [{"owner": {"reputation": 4563, "user_id": 393010, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/aa26083676d7b0d1d200d622f12f6793?s=128&d=identicon&r=PG", "display_name": "Moberg", "link": "https://stackoverflow.com/users/393010/moberg"}, "edited": false, "score": 0, "creation_date": 1575033701, "post_id": 50841896, "comment_id": 104442925, "body": "Is it possibly to only supply the type argument and only deduct the size?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 4563, "user_id": 393010, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/aa26083676d7b0d1d200d622f12f6793?s=128&d=identicon&r=PG", "display_name": "Moberg", "link": "https://stackoverflow.com/users/393010/moberg"}, "edited": false, "score": 0, "creation_date": 1575132243, "post_id": 50841896, "comment_id": 104466319, "body": "@Moberg, unfortunately no."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 12, "last_activity_date": 1528906566, "creation_date": 1528906566, "answer_id": 50841896, "question_id": 50840908, "link": "https://stackoverflow.com/questions/50840908/do-we-have-auto-array-in-c17/50841896#50841896", "title": "Do we have auto array in c++17?", "body": "<p>With C++17 and <a href=\"http://en.cppreference.com/w/cpp/language/class_template_argument_deduction\" rel=\"noreferrer\">class template argument deduction</a>, this works just fine:</p>\n\n<pre><code>#include &lt;array&gt;\nstd::array arr{1, 2, 3, 4};\nint i = arr.size();  // 4\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1547065844, "post_id": 50893665, "comment_id": 95068317, "body": "Which then begs to be turned into a macro: <code>#define AUTO_ARRAY(name, values) decltype(array_trait(values))::element_type name[] = values;</code>  ... <code>AUTO_ARRAY(a, {4,5,7});</code>"}], "tags": [], "owner": {"reputation": 7006, "user_id": 540815, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zEGbl.png?s=128&g=1", "display_name": "ThomasMcLeod", "link": "https://stackoverflow.com/users/540815/thomasmcleod"}, "is_accepted": false, "score": 1, "last_activity_date": 1529209384, "creation_date": 1529209384, "answer_id": 50893665, "question_id": 50840908, "link": "https://stackoverflow.com/questions/50840908/do-we-have-auto-array-in-c17/50893665#50893665", "title": "Do we have auto array in c++17?", "body": "<p>It's ugly, but it is possible to deduce the element type from an raw array list initializer and declare the array directly, as follows:</p>\n\n<pre><code>template&lt;typename T&gt;\nstruct array_trait\n{\n    using element_type = T;\n    array_trait(T(&amp;&amp;)[]);\n};\n\ndecltype(array_trait({4,5,7}))::element_type a[] = {4,5,7};\n</code></pre>\n"}], "owner": {"reputation": 129, "user_id": 9936874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c95d9aa6cfc300dba19eed7b3043f92b?s=128&d=identicon&r=PG&f=1", "display_name": "Nandha", "link": "https://stackoverflow.com/users/9936874/nandha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1617, "favorite_count": 3, "answer_count": 3, "score": 11, "last_activity_date": 1553363952, "creation_date": 1528903386, "last_edit_date": 1553363952, "question_id": 50840908, "link": "https://stackoverflow.com/questions/50840908/do-we-have-auto-array-in-c17", "title": "Do we have auto array in c++17?", "body": "<p>Consider the following code:</p>\n\n<pre><code>auto numbers = {1, 2, 3, 4};    // 'numbers' is an std::intializer_list&lt;int&gt;\nauto num_array[] = {1, 2, 3, 4} // error -&gt; declared as an array of 'auto'\n</code></pre>\n\n<p>Why is this limitation in place?</p>\n"}, {"tags": ["c++", "for-loop", "while-loop", "do-loops"], "answers": [{"tags": [], "owner": {"reputation": 5572, "user_id": 3375670, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/dftd9.jpg?s=128&g=1", "display_name": "Robert Kock", "link": "https://stackoverflow.com/users/3375670/robert-kock"}, "is_accepted": false, "score": 0, "last_activity_date": 1528902881, "creation_date": 1528902881, "answer_id": 50840729, "question_id": 50840608, "link": "https://stackoverflow.com/questions/50840608/need-3-separate-outputs/50840729#50840729", "title": "Need 3 separate outputs", "body": "<p>1) You should initialize the <code>column</code> at the beginning of each loop to <code>0</code>.<br>\n2) Within the <code>while</code> and <code>do</code> loops, initialize the <code>row</code> to <code>0</code> before entering the inner-loop</p>\n\n<p>The output <code>3 3</code> at the end is due to a single entrance in the <code>do-while</code> loop.</p>\n"}, {"tags": [], "owner": {"reputation": 538, "user_id": 9379842, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AneDlPPq_xc/AAAAAAAAAAI/AAAAAAAAAGY/y4-NHmeaHO8/photo.jpg?sz=128", "display_name": "Hello World", "link": "https://stackoverflow.com/users/9379842/hello-world"}, "is_accepted": true, "score": 1, "last_activity_date": 1528903611, "last_edit_date": 1528903611, "creation_date": 1528903190, "answer_id": 50840836, "question_id": 50840608, "link": "https://stackoverflow.com/questions/50840608/need-3-separate-outputs/50840836#50840836", "title": "Need 3 separate outputs", "body": "<p>You can leave the <code>for</code> loop as it is:</p>\n\n<pre><code>    for (; column &lt; colCount; column++){\n        for(row = 0; row &lt;= (rowCount - 1); row++){\n            std::cout &lt;&lt; column &lt;&lt; \" \" &lt;&lt; row;\n            if(row &lt; (rowCount - 1))\n                std::cout &lt;&lt; \", \";\n        }\n        std::cout &lt;&lt; std::endl;\n    }\n</code></pre>\n\n<p>Now <code>column</code> and <code>row</code> gets to 3 in the <code>for-loop</code> above, which makes it the <code>while loop</code> never going to be executed. So, you need to make both of them to <code>0</code>.</p>\n\n<p>And, the third <code>do-while</code> loop always executes before any condition checks, thats why you get <code>3 3</code></p>\n\n<p>Anyways, here is a solution for your problem.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main ()\n{\n    int row, column = 0, colCount = 3, rowCount = 3;\n\n    //for loop\n    for (column; column &lt; colCount; column++){\n        for(row = 0; row &lt;= (rowCount - 1); row++){\n            std::cout &lt;&lt; column &lt;&lt; \" \" &lt;&lt; row;\n            if(row &lt; (rowCount - 1))\n                std::cout &lt;&lt; \", \";\n        }\n        std::cout &lt;&lt; std::endl;\n    }\n    std::cout&lt;&lt;std::endl;\n    //while loop\n    column = 0;\n    row = 0;\n    while(column &lt; rowCount){\n        while(row &lt; rowCount){\n            std::cout &lt;&lt; column &lt;&lt; \" \"&lt;&lt; row;\n            if(row &lt; (rowCount - 1))\n                std::cout &lt;&lt; \", \";\n            row++;          \n        }\n        std::cout &lt;&lt; std::endl;   \n        column += 1;\n        row = 0;\n    }\n    //do while loop\n    std::cout&lt;&lt;std::endl;\n    column = 0;\n    row = 0;\n    do{\n        do{\n            std::cout &lt;&lt; column &lt;&lt; \" \"&lt;&lt; row;\n            if(row &lt; (rowCount - 1))\n                std::cout &lt;&lt; \", \";\n            row++;  \n        }while(row &lt; rowCount);\n        std::cout &lt;&lt; std::endl;\n        column +=1;\n        row = 0;\n    }while(column &lt; colCount);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 9876588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc9636f786d04d3f9d0f82d72c37130b?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob J", "link": "https://stackoverflow.com/users/9876588/jacob-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 50840836, "answer_count": 2, "score": 0, "last_activity_date": 1531361595, "creation_date": 1528902544, "last_edit_date": 1531361595, "question_id": 50840608, "link": "https://stackoverflow.com/questions/50840608/need-3-separate-outputs", "title": "Need 3 separate outputs", "body": "<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main (){\n\n    int row, \n        column = 0,\n        colCount = 3,\n        rowCount = 3;\n\n    //for loop\n    for (column; column &lt; colCount; column++){\n\n        for(row = 0; row &lt;= (rowCount - 1); row++){\n\n            cout &lt;&lt; column &lt;&lt; \" \" &lt;&lt; row;\n\n            if(row &lt; (rowCount - 1)){\n                cout &lt;&lt; \", \";           \n            }\n\n        }\n\n        cout &lt;&lt; endl;\n\n    }\n\n    //while loop\n    while(column &lt; colCount){\n\n        while(row &lt; rowCount){\n\n            cout &lt;&lt; column &lt;&lt; \" \"&lt;&lt; row;\n\n            if(row &lt; (rowCount - 1)){\n                cout &lt;&lt; \", \";           \n            }\n\n            row++;          \n\n        }\n\n        cout &lt;&lt; endl;   \n        column += 1;\n        row = 0;\n    }\n\n    //do while loop\n    do{\n        do{\n            cout &lt;&lt; column &lt;&lt; \" \"&lt;&lt; row;\n\n            if(row &lt; (rowCount - 1)){\n                cout &lt;&lt; \", \";           \n            }\n\n            row++;  \n        }while(row &lt; rowCount);\n\n        cout &lt;&lt; endl;\n        column +=1;\n        row = 0;\n    }while(column &lt; colCount);\n\n}\n</code></pre>\n\n<p>When commenting out 2/3 loops, each one will produce the wanted output.\nAll together it seems to run on top of each other and adds extra output.</p>\n\n<h2>Current output:</h2>\n\n<pre><code>0 0, 0 1, 0 2\n1 0, 1 1, 1 2\n2 0, 2 1, 2 2\n3 3\n</code></pre>\n\n<h2>Wanted output:</h2>\n\n<pre><code>0 0, 0 1, 0 2\n1 0, 1 1, 1 2\n2 0, 2 1, 2 2\n\n0 0, 0 1, 0 2\n1 0, 1 1, 1 2\n2 0, 2 1, 2 2\n\n0 0, 0 1, 0 2\n1 0, 1 1, 1 2\n2 0, 2 1, 2 2\n</code></pre>\n\n<p>How do I get an output out of each loop?</p>\n"}, {"tags": ["android", "c++", "grpc"], "answers": [{"comments": [{"owner": {"reputation": 1810, "user_id": 426180, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/842588516960b41c058cb11c5d02b1fb?s=128&d=identicon&r=PG&f=1", "display_name": "xarly", "link": "https://stackoverflow.com/users/426180/xarly"}, "edited": false, "score": 0, "creation_date": 1528967705, "post_id": 50843072, "comment_id": 88710366, "body": "Yeah, I know about that problem. I&#39;m using master though. But I decided to use your cherry pick and it stills showing the same error. Thanks anyway :)"}], "tags": [], "owner": {"reputation": 3853, "user_id": 237399, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f444e120ef366a34829cedf6a59e891?s=128&d=identicon&r=PG", "display_name": "Eric G", "link": "https://stackoverflow.com/users/237399/eric-g"}, "is_accepted": true, "score": 3, "last_activity_date": 1528911021, "creation_date": 1528911021, "answer_id": 50843072, "question_id": 50840444, "link": "https://stackoverflow.com/questions/50840444/well-known-types-embed-cc-bin-sh-js-embed-command-not-found/50843072#50843072", "title": "well_known_types_embed.cc - /bin/sh: js_embed: command not found", "body": "<p>Building gRPC C++ for Android requires a fix to the protobuf build rules (<a href=\"https://github.com/google/protobuf/pull/3878\" rel=\"nofollow noreferrer\">https://github.com/google/protobuf/pull/3878</a>) that is merged into master but hasn't made it into a release yet.</p>\n\n<p>As noted in <a href=\"https://github.com/grpc/grpc/blob/master/examples/android/helloworld/README.md\" rel=\"nofollow noreferrer\">https://github.com/grpc/grpc/blob/master/examples/android/helloworld/README.md</a>, for the moment you must manually patch this pull request into <code>third_party/protobuf</code> before building gRPC for Android. You can do this with the following commands from the grpc repository's root directory:</p>\n\n<pre><code>cd third_party/protobuf\ngit cherry-pick cba18efe1861d1fc1eecd6dc2af86fc1f0d9922f\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1810, "user_id": 426180, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/842588516960b41c058cb11c5d02b1fb?s=128&d=identicon&r=PG&f=1", "display_name": "xarly", "link": "https://stackoverflow.com/users/426180/xarly"}, "is_accepted": false, "score": 0, "last_activity_date": 1528969343, "creation_date": 1528969343, "answer_id": 50854377, "question_id": 50840444, "link": "https://stackoverflow.com/questions/50840444/well-known-types-embed-cc-bin-sh-js-embed-command-not-found/50854377#50854377", "title": "well_known_types_embed.cc - /bin/sh: js_embed: command not found", "body": "<p>I made it work. </p>\n\n<p>I think it was involve with updating android Studio. But to be honest I'm not sure.</p>\n\n<p>I clean the directory with any changes made with the unfinished build ( except for the local.properties, where I point where it's the sdk )</p>\n\n<p>I run</p>\n\n<pre><code> /gradlew installDebug --stacktrace\n</code></pre>\n\n<p>And works. </p>\n\n<p>I got another error but it's realed with gradlew. It can't find a device to run the project, so I openned Android studio and worked.</p>\n"}], "owner": {"reputation": 1810, "user_id": 426180, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/842588516960b41c058cb11c5d02b1fb?s=128&d=identicon&r=PG&f=1", "display_name": "xarly", "link": "https://stackoverflow.com/users/426180/xarly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 582, "favorite_count": 0, "accepted_answer_id": 50843072, "answer_count": 2, "score": 0, "last_activity_date": 1528969343, "creation_date": 1528902009, "last_edit_date": 1528913776, "question_id": 50840444, "link": "https://stackoverflow.com/questions/50840444/well-known-types-embed-cc-bin-sh-js-embed-command-not-found", "title": "well_known_types_embed.cc - /bin/sh: js_embed: command not found", "body": "<p>I'm trying to run the example from <a href=\"https://github.com/grpc/grpc/tree/master/examples/android/helloworld\" rel=\"nofollow noreferrer\">https://github.com/grpc/grpc/tree/master/examples/android/helloworld</a>.</p>\n\n<p>I checked that I have:</p>\n\n<p>Android SDK\nAndroid NDK\nprotoc \ngrpc_cpp_plugin</p>\n\n<p>Also I've run git submodule update --init in the repository to download all dependencies.</p>\n\n<p>When I run /gradlew installDebug --stacktrace</p>\n\n<p>I get this error:</p>\n\n<pre><code>Error while executing process \n/Users/myuser/Library/Android/sdk/cmake/3.6.4111459/bin/cmake with arguments {--build /Users/..path../exampleAndroidUsingCPP/grpc/examples/android/helloworld/app/.externalNativeBuild/cmake/debug/x86 --target protoc}\n[1/98] Generating ../../../../../../../../../../../../third_party/protobuf/src/google/protobuf/compiler/js/well_known_types_embed.cc\nFAILED: cd /Users/..path../exampleAndroidUsingCPP/grpc/examples/android/helloworld/app/.externalNativeBuild/cmake/debug/grpc/outputs/x86/third_party/protobuf &amp;&amp; js_embed /Users/..path../exampleAndroidUsingCPP/grpc/third_party/protobuf/src/google/protobuf/compiler/js/well_known_types/any.js /Users/..path../exampleAndroidUsingCPP/grpc/third_party/pr tobuf/src/google/protobuf/compiler/js/well_known_types/struct.js /Users/..path../exampleAndroidUsingCPP/grpc/third_party/protobuf/src/google/protobuf/compiler/js/well_known_types/timestamp.js &gt; /Users/..path../exampleAndroidUsingCPP/grpc/third_party/protobuf/src/google/protobuf/compiler/js/well_known_types_embed.cc\n/bin/sh: js_embed: command not found\nninja: build stopped: subcommand failed.\n</code></pre>\n\n<p>I'm running this in a OSX</p>\n\n<p>Any idea where I can look to fix it?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "qt", "dcmtk"], "comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 2, "creation_date": 1528901963, "post_id": 50840377, "comment_id": 88684520, "body": "Please copy the actual error message, don&#39;t link a picture. And do show at least one of the lines you tried."}, {"owner": {"reputation": 1, "user_id": 9936741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3273b0a18be15649ea5d9817b599d28f?s=128&d=identicon&r=PG&f=1", "display_name": "Laura H", "link": "https://stackoverflow.com/users/9936741/laura-h"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1528903608, "post_id": 50840377, "comment_id": 88685550, "body": "Thank you I didn&#39;t know it was just linking the images, the error is &quot;Undefined symbols for architecture x86_64&quot; I think I am missing some LIB include but I don&#39;t really get how it works"}, {"owner": {"reputation": 1, "user_id": 9936741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3273b0a18be15649ea5d9817b599d28f?s=128&d=identicon&r=PG&f=1", "display_name": "Laura H", "link": "https://stackoverflow.com/users/9936741/laura-h"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1528903863, "post_id": 50840377, "comment_id": 88685715, "body": "I tried : 1.  LIBS += -L&quot;C:\\Program Files (x86)\\DCMTK_1\\lib&quot; LIBS +=-ldcmimgle -ldcmdata -loflog -lofstd ... which is obviously for windows ---  2.LIBS += -framework AppKit LIBS += -framework CoreAudio LIBS += -framework AudioToolbox ---  3.DCMAKE_CXX_FLAGS=&quot;-stdlib=libstdc++&quot; cmake -DCMAKE_CXX_FLAGS=&quot;-stdlib=libstdc++&quot; --- 4. LIBS += &quot;/Syst&#232;me/Biblioth&#232;que/Frameworks/CoreFoundation.framework/V&zwnj;&#8203;ersions/A/Headers/Co&zwnj;&#8203;reFoundation.h&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 1135, "user_id": 264359, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Mnrxa.jpg?s=128&g=1", "display_name": "Pieter", "link": "https://stackoverflow.com/users/264359/pieter"}, "edited": false, "score": 0, "creation_date": 1528977889, "post_id": 50851387, "comment_id": 88716690, "body": "Also, the dcmtk forums mention that linking order is important, I use linking order: LIBS += -lofstd -ldcmdata -ldcmimgle -ldcmimage -loflog"}, {"owner": {"reputation": 1, "user_id": 9936741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3273b0a18be15649ea5d9817b599d28f?s=128&d=identicon&r=PG&f=1", "display_name": "Laura H", "link": "https://stackoverflow.com/users/9936741/laura-h"}, "edited": false, "score": 0, "creation_date": 1529416853, "post_id": 50851387, "comment_id": 88859521, "body": "I tried to link as you say but I still have the same error. I wonder if some path aren&#39;t overlapping in my computer and lead to this error"}], "tags": [], "owner": {"reputation": 1135, "user_id": 264359, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Mnrxa.jpg?s=128&g=1", "display_name": "Pieter", "link": "https://stackoverflow.com/users/264359/pieter"}, "is_accepted": false, "score": 0, "last_activity_date": 1528959554, "creation_date": 1528959554, "answer_id": 50851387, "question_id": 50840377, "link": "https://stackoverflow.com/questions/50840377/how-to-link-dcmtk-with-qt-on-mac-osx/50851387#50851387", "title": "How to link DCMTK with Qt on Mac OSX", "body": "<p>Did you forget to link with dcmimage?</p>\n\n<p>try adding LIBS += -ldcmimage</p>\n"}], "owner": {"reputation": 1, "user_id": 9936741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3273b0a18be15649ea5d9817b599d28f?s=128&d=identicon&r=PG&f=1", "display_name": "Laura H", "link": "https://stackoverflow.com/users/9936741/laura-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528959554, "creation_date": 1528901831, "last_edit_date": 1528903547, "question_id": 50840377, "link": "https://stackoverflow.com/questions/50840377/how-to-link-dcmtk-with-qt-on-mac-osx", "title": "How to link DCMTK with Qt on Mac OSX", "body": "<p>I am new with all of these Qt, Dcmtk and CMake and I am suppose to use it for a school project. A lot of things are available on the internet but essentially for Windows..</p>\n\n<p>I am trying to link Dcmtk with Qt and make it run on my mac but It is not working, the error is:</p>\n\n<p><em>Error output</em></p>\n\n<p><img src=\"https://i.stack.imgur.com/glIgI.png\" alt=\"Error output\"></p>\n\n<p>I have already built dcmtk with CMake (note the CMake wasn't generating the right paths...)</p>\n\n<p>I know this error seems recurrent and I should add a LIB += ... \nBut I tried a lot of different one and I couldn't find anything that solve my problem according to linking dcmtk</p>\n\n<p>Here is my current code according to some found online:</p>\n\n<p><em>.pro file</em></p>\n\n<p><img src=\"https://i.stack.imgur.com/c7tVk.png\" alt=\".pro file\"> </p>\n\n<p><em>main.cpp</em></p>\n\n<p><img src=\"https://i.stack.imgur.com/qHFow.png\" alt=\"main.cpp\"></p>\n\n<p>I am feeling a bit powerless right now if someone could enlighten me.</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c++", "template-meta-programming"], "comments": [{"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1528901468, "post_id": 50840097, "comment_id": 88684174, "body": "Since you only have <code>static</code> attribute in <code>Configuration</code>, use a template type parameter."}], "answers": [{"comments": [{"owner": {"reputation": 7123, "user_id": 282729, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/ff7f055d016c0273792b89cb0f002a21?s=128&d=identicon&r=PG", "display_name": "feklee", "link": "https://stackoverflow.com/users/282729/feklee"}, "edited": false, "score": 0, "creation_date": 1528903720, "post_id": 50840306, "comment_id": 88685627, "body": "The 1st example does not compile with <code>g++ -std=C++17</code>. At <code>A&lt;conf, 3&gt; a;</code> it complains: <code>the value of \u2018conf\u2019 is not usable in a constant expression</code> With the 2nd example, at <code>template &lt;auto const&amp; conf, int x&gt;</code>. the compiler complains: <code>\u2018auto\u2019 parameter not permitted in this context</code>. Thanks for the suggestion about using <code>constexpr</code>! Although: Looking at assembly code I found that specifying <code>static const</code> is generally sufficient for <code>g++</code> to apply compile time optimizations. Nevertheless, I edited my question, replacing <code>const</code> with <code>constexpr</code> (as this distracts from the actual issue)."}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "reply_to_user": {"reputation": 7123, "user_id": 282729, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/ff7f055d016c0273792b89cb0f002a21?s=128&d=identicon&r=PG", "display_name": "feklee", "link": "https://stackoverflow.com/users/282729/feklee"}, "edited": false, "score": 0, "creation_date": 1528903825, "post_id": 50840306, "comment_id": 88685697, "body": "@feklee As I mentioned, for the second example, you need <code>conf</code> to have static storage duration, so typically not a local variable (unless you add a <code>static</code> modifier), see this example: <a href=\"https://godbolt.org/g/6Xd9hs\" rel=\"nofollow noreferrer\">godbolt.org/g/6Xd9hs</a> Note that you need a quite recent version of gcc apparently (at least 7.1 according to godbolt)."}, {"owner": {"reputation": 7123, "user_id": 282729, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/ff7f055d016c0273792b89cb0f002a21?s=128&d=identicon&r=PG", "display_name": "feklee", "link": "https://stackoverflow.com/users/282729/feklee"}, "edited": false, "score": 0, "creation_date": 1528904554, "post_id": 50840306, "comment_id": 88686119, "body": "@Holt Thanks, indeed the compiler I tested it with seems to have been too old. <i>What about the first example?</i> I cannot get it to compile at all. It would be nice to have sth. that works with C++11, but I have to accept it if that&#39;s not possible."}, {"owner": {"reputation": 7123, "user_id": 282729, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/ff7f055d016c0273792b89cb0f002a21?s=128&d=identicon&r=PG", "display_name": "feklee", "link": "https://stackoverflow.com/users/282729/feklee"}, "edited": false, "score": 0, "creation_date": 1528905931, "post_id": 50840306, "comment_id": 88686875, "body": "Well, the first example does work, if I replace <code>constexpr Configuration&lt;3, false&gt; conf;</code> with <code>typedef Configuration&lt;3, false&gt; conf;</code>. <i>Is that what you had in mind?</i>"}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "reply_to_user": {"reputation": 7123, "user_id": 282729, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/ff7f055d016c0273792b89cb0f002a21?s=128&d=identicon&r=PG", "display_name": "feklee", "link": "https://stackoverflow.com/users/282729/feklee"}, "edited": false, "score": 0, "creation_date": 1528908356, "post_id": 50840306, "comment_id": 88688218, "body": "@feklee Yes, exactly, I&#39;ve added example of usage in the answer (<code>typedef</code> and <code>using</code> are the same thing here)."}], "tags": [], "owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "is_accepted": true, "score": 3, "last_activity_date": 1528956979, "last_edit_date": 1528956979, "creation_date": 1528901635, "answer_id": 50840306, "question_id": 50840097, "link": "https://stackoverflow.com/questions/50840097/template-template-parameter-with-typed-parameters/50840306#50840306", "title": "Template template parameter with typed parameters?", "body": "<p>Since the attributes of <code>Configuration</code> are <code>static</code>, you should use a template type parameter<sup>1</sup>:</p>\n\n<pre><code>template &lt;class ConfT, int x&gt;\nclass A {\npublic:\n  int doSomething() {\n    if (ConfT::debug) { // Optimize away if false\n\n    }\n    return x * ConfT::commonValue;\n  }\n};\n</code></pre>\n\n<p>And then:</p>\n\n<pre><code>// Alias (not required):\nusing conf = Configuration&lt;3, false&gt;;\n\nA&lt;conf, 2&gt; a;\nA&lt;conf, 3&gt; b;\n</code></pre>\n\n<p>If you want non-static members, I don't think this is doable pre-C++17 (without passing template parameters of <code>Configuration</code> to  <code>A</code>), but in C++17 you could do<sup>1</sup>:</p>\n\n<pre><code>template &lt;auto const&amp; conf, int x&gt;\nclass A {\npublic:\n  int doSomething() {\n    if (conf.debug) { // Optimize away if false\n    }\n    return x * conf.commonValue;\n  }\n};\n</code></pre>\n\n<p>But note that you can only pass references to variables with static storage duration.</p>\n\n<p><sub><sup>1</sup> In the first case, you can restrict the type to <code>Configuration&lt;...&gt;</code> by specializing <code>A</code>, in the second case, you can restrict the type of <code>conf</code> using an extra template parameter with <code>std::enable_if</code>.</sub></p>\n\n<hr>\n\n<p>You should also make the attributes <code>constexpr</code> in <code>Configuration</code>, not simply <code>const</code>:</p>\n\n<pre><code>template &lt;int t, bool u&gt;\nstruct Configuration {\n  static constexpr int commonValue = t;\n  static constexpr bool debug = u;\n};\n</code></pre>\n"}], "owner": {"reputation": 7123, "user_id": 282729, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/ff7f055d016c0273792b89cb0f002a21?s=128&d=identicon&r=PG", "display_name": "feklee", "link": "https://stackoverflow.com/users/282729/feklee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 2, "accepted_answer_id": 50840306, "answer_count": 1, "score": 1, "last_activity_date": 1528956979, "creation_date": 1528901053, "last_edit_date": 1528904291, "question_id": 50840097, "link": "https://stackoverflow.com/questions/50840097/template-template-parameter-with-typed-parameters", "title": "Template template parameter with typed parameters?", "body": "<p>The following code does not compile. <em>Is it even possible to pass an instance of <code>Configuration&lt;t, u&gt;</code> as a template parameter? (to profit from optimization of constant expressions)</em></p>\n\n<p>API:</p>\n\n<pre><code>template &lt;int t, bool u&gt;\nstruct Configuration {\n  static constexpr int commonValue = t;\n  static constexpr bool debug = u;\n};\n\ntemplate &lt;\n  template&lt;int t, bool u&gt; Configuration&lt;t, u&gt; &amp;conf,\n  int x\n&gt;\nclass A {\npublic:\n  int doSomething() {\n    if (conf.debug) { // Optimize away if false\n      // ...\n    }\n    return x * conf.commonValue; // Optimize to e.g. 6 with `conf.commonValue` =\n                                 // 3, `x` = 2\n  }\n};\n</code></pre>\n\n<p>The user of the API should be able to do:</p>\n\n<pre><code>int main() {\n    static constexpr Configuration&lt;3, false&gt; conf;\n    A&lt;conf, 2&gt; a;\n    A&lt;conf, 5&gt; b;\n    A&lt;conf, 8&gt; c;\n    std::cout &lt;&lt; a.doSomething() &lt;&lt; std::endl; // 6 (evaluated at compile time!)\n    std::cout &lt;&lt; b.doSomething() &lt;&lt; std::endl; // 15\n    std::cout &lt;&lt; c.doSomething() &lt;&lt; std::endl; // 24\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "sparse-matrix", "linear-algebra", "eigen"], "comments": [{"owner": {"reputation": 323, "user_id": 3338779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f187f0e48adb0fccebd823c4a5d9d9a5?s=128&d=identicon&r=PG&f=1", "display_name": "hammadian", "link": "https://stackoverflow.com/users/3338779/hammadian"}, "edited": false, "score": 4, "creation_date": 1528902211, "post_id": 50840094, "comment_id": 88684672, "body": "I think you need to provide a Minimum Working Example to help us help you. For example, no information is given about m_LeftMatrix or m_RightMatrix. Does it crash in call m_LeftMatrix.makeCompressed() or tmp_v_x = \u039c\u03a5solver.solve(m_RightMatrix)?"}, {"owner": {"reputation": 25324, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "edited": false, "score": 1, "creation_date": 1529001383, "post_id": 50840094, "comment_id": 88730172, "body": "Look at the backtrace to identify the origin of the problem."}], "owner": {"reputation": 1, "user_id": 9936645, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-T7nsIgP_uts/AAAAAAAAAAI/AAAAAAAAAAo/8ttWO43lvXg/photo.jpg?sz=128", "display_name": "Tsagkas", "link": "https://stackoverflow.com/users/9936645/tsagkas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 354, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1528902454, "creation_date": 1528901045, "last_edit_date": 1528902454, "question_id": 50840094, "link": "https://stackoverflow.com/questions/50840094/assertion-failed-in-eigen-c", "title": "Assertion failed in Eigen, C++", "body": "<p>I'm currently working on a piece of code and I have to solve a linear algebra system ( A x = B ) using Eigen. I've checked that the size of the matrices are correct. \nAfter i execute this code: </p>\n\n<pre><code>SparseQR&lt;SparseMatrix&lt;double&gt;, COLAMDOrdering&lt;int&gt;&gt; \u039c\u03a5solver;\nm_LeftMatrix.makeCompressed();\n\u039c\u03a5solver.compute(m_LeftMatrix);\n\nif (\u039c\u03a5solver.info() != Success) {\n    cout &lt;&lt; \"!!! decomposition failed !!!\\n\";\n    return;\n}\n\nSparseMatrix&lt;double&gt; tmp_v_x(SIZE, 1);\n\ntmp_v_x = \u039c\u03a5solver.solve(m_RightMatrix);\nif (MYsolver.info() != Success) {\n    cout &lt;&lt; \"!!! solving failed !!!\\n\";\n    return;\n}\n</code></pre>\n\n<p>I receive the following error message (7 times):</p>\n\n<pre><code>Assertion failed: rows == this-&gt;rows() &amp;&amp; cols == this-&gt;cols() &amp;&amp; \"DenseBase::resize() does not actually allow to resize.\", file c:\\users\\Nikos\\downloads\\eigen\\eigen\\src\\core\\densebase.h, line 257  \n</code></pre>\n\n<p><strong>And the following pop up window 3 times!</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/PKY3B.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PKY3B.png\" alt=\"enter image description here\"></a></p>\n\n<p>Does anybody know what's wrong!? I'm certainly not changing the size of my vectors. Why is this happening?</p>\n"}, {"tags": ["c++", "collision-detection", "sfml", "top-down"], "comments": [{"owner": {"reputation": 793, "user_id": 2684203, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/71zMc.png?s=128&g=1", "display_name": "X39", "link": "https://stackoverflow.com/users/2684203/x39"}, "edited": false, "score": 0, "creation_date": 1528900304, "post_id": 50839694, "comment_id": 88683358, "body": "without full code, i would guess from the gif faceDirection does not changes &quot;fast enough&quot; so that when you actually execute that method, faceDirection still says <code>UP</code> causing your whole method there to fail."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9043613"}, "edited": false, "score": 0, "creation_date": 1528911623, "post_id": 50840398, "comment_id": 88689950, "body": "I don&#39;t think I understand."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9043613"}, "edited": false, "score": 0, "creation_date": 1528911667, "post_id": 50840398, "comment_id": 88689971, "body": "I mean, both the player and the wall are rectangles, that have a position of the top left corner, and a size. what is this radius value?"}, {"owner": {"reputation": 161, "user_id": 9260020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f709479154c250e6f3a7f0314eeb608?s=128&d=identicon&r=PG&f=1", "display_name": "Karl", "link": "https://stackoverflow.com/users/9260020/karl"}, "edited": false, "score": 0, "creation_date": 1528914470, "post_id": 50840398, "comment_id": 88691355, "body": "@aradarbel10 It was just an example, what I really meant was something like the edit."}], "tags": [], "owner": {"reputation": 161, "user_id": 9260020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f709479154c250e6f3a7f0314eeb608?s=128&d=identicon&r=PG&f=1", "display_name": "Karl", "link": "https://stackoverflow.com/users/9260020/karl"}, "is_accepted": false, "score": 0, "last_activity_date": 1528914684, "last_edit_date": 1528914684, "creation_date": 1528901894, "answer_id": 50840398, "question_id": 50839694, "link": "https://stackoverflow.com/questions/50839694/c-player-wall-collision-with-sfml/50840398#50840398", "title": "c++ player-wall collision with SFML", "body": "<p>Just a guess with the info provided, but notice that when you go through the wall, you're character isn't actually facing to the right. It's facing up, so collidesRight will be false. Instead of inhibiting movement based on which direction your character is facing, inhibit solely based on position i.e.</p>\n\n<pre><code>if (intersecting_right(player, wall) &amp;&amp; player.x_vel &gt; 0)\n    player.x_vel = 0;\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9043613"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 672, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528914684, "creation_date": 1528899938, "last_edit_date": 1528902787, "question_id": 50839694, "link": "https://stackoverflow.com/questions/50839694/c-player-wall-collision-with-sfml", "title": "c++ player-wall collision with SFML", "body": "<p>My friend and I are developing a top down puzzle game.<br>\nWe have already implemented a player class that can walk and collide the walls, but the problem is after the collision itself.  </p>\n\n<p><strong>For example:</strong><br>\nWhen the player hits a wall to its right, we set the velocity on the <strong><code>x</code></strong> axis to be <strong>0</strong>, and the player stops. But after that, if the user presses the <kbd>up</kbd> key, the player moves one pixel up, and then stops again.<br>\nAfter that if you keep pressing right and up alternately, the player is walking through the wall pixel after pixel.</p>\n\n<p><a href=\"https://i.stack.imgur.com/WVO9E.gif\" rel=\"nofollow noreferrer\">The player moves through the wall</a></p>\n\n<p>And here is the collision detection of the player:</p>\n\n<pre><code>for (int i = 0; i &lt; lvl.getSizeInTiles().x; i++) {\n        for (int j = 0; j &lt; lvl.getSizeInTiles().y; j++) {\n            if (lvl.getTileFromBuffer(i, j).getType() == \"wall\") {\n                if (intersects(lvl.getTileFromBuffer(i, j).getPosition().x, lvl.getTileFromBuffer(i, j).getPosition().y, lvl.getTileFromBuffer(i, j).getSize().x, lvl.getTileFromBuffer(i, j).getSize().y)) {\n                    if (faceDirection == \"UP\" &amp;&amp; vel.y &lt; 0) {\n                        collidesUp = true;\n                    }\n                    else {\n                        collidesUp = false;\n                    }\n\n                    if (faceDirection == \"DOWN\" &amp;&amp; vel.y &gt; 0) {\n                        collidesDown = true;\n                    }\n                    else {\n                        collidesDown = false;\n                    }\n\n                    if (faceDirection == \"LEFT\" &amp;&amp; vel.x &lt; 0) {\n                        collidesLeft = true;\n                    }\n                    else {\n                        collidesLeft = false;\n                    }\n\n                    if (faceDirection == \"RIGHT\" &amp;&amp; vel.x &gt; 0) {\n                        collidesRight = true;\n                    }\n                    else {\n                        collidesRight = false;\n                    }\n                }\n            }\n        }\n    }\n}\nif (vel.x &gt; 0 &amp;&amp; !collidesRight) {\n    pos.x += vel.x;\n}\nif (vel.x &lt; 0 &amp;&amp; !collidesLeft) {\n    pos.x += vel.x;\n}\nif (vel.y &gt; 0 &amp;&amp; !collidesDown) {\n    pos.y += vel.y;\n}\nif (vel.y &lt; 0 &amp;&amp; !collidesUp) {\n    pos.y += vel.y;\n}\n</code></pre>\n\n<p><strong>Just a quick note:</strong> The <strong><code>intersect(x, y, w, h)</code></strong> function is a part of the player class, and tell us if you need to see it.</p>\n\n<p>We will be happy if you send a reply about our code, or link us to a place we can find a solution.</p>\n\n<p>So thank you for any help, and please ask questions if you need to, Arad and Ron.  </p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 2, "creation_date": 1528900185, "post_id": 50839688, "comment_id": 88683283, "body": "As long as nothing says about paint event we can assume the flow is maybe incorrect. You need to use QPainter from pain event handler and call widget update() not from paint event handler for the case when the drawing must change. <a href=\"https://wiki.qt.io/How_to_use_QPainter\" rel=\"nofollow noreferrer\">wiki.qt.io/How_to_use_QPainter</a>"}, {"owner": {"reputation": 169, "user_id": 8604902, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2ce010ce4582052ae9a422330dc98d6c?s=128&d=identicon&r=PG&f=1", "display_name": "Sanakum", "link": "https://stackoverflow.com/users/8604902/sanakum"}, "reply_to_user": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1529492603, "post_id": 50839688, "comment_id": 88890619, "body": "Hey Alexander. thanks for your comment and sorry for my late reply. Still I am facing this problem. I can share the link of code if it doesn&#39;t bother you."}, {"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1529505444, "post_id": 50839688, "comment_id": 88899252, "body": "Of course you can share more complete code for understanding the problem and you should have when posting the question."}, {"owner": {"reputation": 169, "user_id": 8604902, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2ce010ce4582052ae9a422330dc98d6c?s=128&d=identicon&r=PG&f=1", "display_name": "Sanakum", "link": "https://stackoverflow.com/users/8604902/sanakum"}, "reply_to_user": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1529516667, "post_id": 50839688, "comment_id": 88906060, "body": "<a href=\"https://github.com/ashraful100/Cropping-App/blob/master/mainwindow.cpp\" rel=\"nofollow noreferrer\">Here</a> is the complete code. The problem regarding the <code>QPainter</code> is in <code>Mainwindow::slotMouseMovedWithRightClickDown(QRect rectangle)</code>"}, {"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 1, "creation_date": 1529517985, "post_id": 50839688, "comment_id": 88906675, "body": "The code has no paint event handler and you should follow <a href=\"https://wiki.qt.io/How_to_use_QPainter\" rel=\"nofollow noreferrer\">wiki.qt.io/How_to_use_QPainter</a>. ALL draw actions can only be called from paintEvent handler and wherever you now do paint directly you should do thisWidget-&gt;update()."}], "owner": {"reputation": 169, "user_id": 8604902, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2ce010ce4582052ae9a422330dc98d6c?s=128&d=identicon&r=PG&f=1", "display_name": "Sanakum", "link": "https://stackoverflow.com/users/8604902/sanakum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 338, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1528902803, "creation_date": 1528899925, "last_edit_date": 1528902803, "question_id": 50839688, "link": "https://stackoverflow.com/questions/50839688/qpainter-is-drawing-rectangle-but-not-displaying-the-rectangle-box", "title": "QPainter is drawing rectangle but not displaying the rectangle box", "body": "<p>It's really a strange problem to me. Let me explain first.</p>\n\n<p>I am trying to develop a <code>Qt</code> application to crop objects from an image.<br>\nThere, while I am cropping by mouse right button, I am using <code>QPainter</code> to draw the rectangle by <code>QPainter::setPen()</code> function and display it.  </p>\n\n<p>But I observed that when the image size is so big (like let's say 3000 pixel x 4000 pixel), <code>QPainter</code> is drawing the rectangle, but it can not be visualized after some portion.  </p>\n\n<p>For smaller images, it shows the rectangle fine.</p>\n\n<p>For example, I am trying to crop 150 pixel x 150 pixel object from 3000 pixel x 4000 pixel image.  </p>\n\n<p>When I start cropping, it shows the rectangle fine.<br>\nBut when I starts moving mouse to draw 150 x 150 rectangle, it stops displaying let's say after 50 x 50 pixel.  </p>\n\n<p>When I release mouse, I am displaying the rectangle in a another <code>QWidget</code>, where I see the rectangle it displayed was 150 x 150 pixel instead of 50 x 50 (that means exactly what I cropped).  </p>\n\n<p>The codes written below is used to draw the rectangle.</p>\n\n<pre><code>QPainter paint;    \npaint.begin(&amp;scaled);\npaint.setBrush(Qt::blue);\npaint.setPen(Qt::blue);\npaint.setOpacity(0.5); // Between 0 and 1.\npaint.drawRect(rectangle);\npaint.end();\n</code></pre>\n\n<p>Can anyone tell me why it is happening so?\nThanks in advance.</p>\n"}, {"tags": ["c++", "mfc"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1528900932, "post_id": 50839685, "comment_id": 88683804, "body": "That assertion means (a) the window has not yet been created, or (b) the window has already been destroyed. If you put a break-point on the line triggering the assertion, and another on the line you claim creates the child window, you can conclude which case is happening fairly quickly. That, of course, assuming the child window is created successfully (which you never validate, as you&#39;re ignoring the result of the <code>Create</code> call)."}, {"owner": {"reputation": 21, "user_id": 9895177, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "V J", "link": "https://stackoverflow.com/users/9895177/v-j"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1528901280, "post_id": 50839685, "comment_id": 88684045, "body": "Thank you Whoz Craig. The creation is successful because I can see the CStatic - it persists because it is a member of the class that creates the child window that hosts it. However following your advice I see that &quot;plotScreen&quot; is a null handle both during creation and during the Get DC(). Do you have any advice for how to obtain device context for a child window or Cstatic, or how to get the handle properly?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1528901448, "post_id": 50839685, "comment_id": 88684164, "body": "Your parent window&#39;s <code>OnCreate</code> is the place to invoke the child create, and that only after the base (which I assume is a <code>CFrameWnd</code>) has been invoked (usually the first thing in the <code>OnCreate</code> override). And you never mentioned it: did the <code>Create</code> of the child control return TRUE or not?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1528901828, "post_id": 50839685, "comment_id": 88684427, "body": "And fyi, <code>DT_CENTER</code> does not belong in the window style of your child control. That&#39;s a <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd162498(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>DrawText</code></a> format indicator; not a window style."}, {"owner": {"reputation": 21, "user_id": 9895177, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "V J", "link": "https://stackoverflow.com/users/9895177/v-j"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1528901833, "post_id": 50839685, "comment_id": 88684432, "body": "Yes the Create returned TRUE (non-zero). I created this CStatic manually as it is a rectangle to hold the plot in a child window, not a dialog. It is created in the OnCreate override of the child window Plot, which is a child on the main frame. Plot is created in the OnCreate of the main frame."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1528902133, "post_id": 50839685, "comment_id": 88684624, "body": "It&#39;s supposed to be a button? Any reason you&#39;re not using <code>CButton</code>? Just curious.  That sets using the window class for a button (which is &quot;BUTTON&quot;, btw)."}, {"owner": {"reputation": 21, "user_id": 9895177, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "V J", "link": "https://stackoverflow.com/users/9895177/v-j"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1528902282, "post_id": 50839685, "comment_id": 88684736, "body": "Its just a rectangle to hold the plotting area... I put it to leave a bit of a frame and to make it easier to tell it where to plot when I do... I&#39;m really not sure of the best way - the code I am reformulating used a picture control in a dialog box."}], "answers": [{"comments": [{"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1528910794, "post_id": 50842528, "comment_id": 88689533, "body": "<code>GetDC</code> is generally not meant for drawing (it also needs <code>ReleaseDC</code> cleanup). Try owner draw static control <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb760767(v=vs.85).aspx#owner_drawn_static_control\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}], "tags": [], "owner": {"reputation": 21, "user_id": 9895177, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "V J", "link": "https://stackoverflow.com/users/9895177/v-j"}, "is_accepted": false, "score": 0, "last_activity_date": 1528908947, "creation_date": 1528908947, "answer_id": 50842528, "question_id": 50839685, "link": "https://stackoverflow.com/questions/50839685/mfc-getdc-assertion-failure-not-a-window/50842528#50842528", "title": "MFC GetDC() Assertion failure - &quot;Not a window&quot;", "body": "<p>Solution = get a pointer for the window containing the CStatic during the OnCreate of that window. Store in a global variable. Use this pointer to get DC. </p>\n"}], "owner": {"reputation": 21, "user_id": 9895177, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "V J", "link": "https://stackoverflow.com/users/9895177/v-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 333, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528908947, "creation_date": 1528899917, "last_edit_date": 1528907599, "question_id": 50839685, "link": "https://stackoverflow.com/questions/50839685/mfc-getdc-assertion-failure-not-a-window", "title": "MFC GetDC() Assertion failure - &quot;Not a window&quot;", "body": "<p>Goal: Draw a plot in a child window, on a static control plotScreen. The plot will somtimes be drawn from live incoming data so I am drawing to a compatible DC to reduce flickering. </p>\n\n<p>Problem: The code works correctly to draw the plot to the main frame using <code>GetActiveWindow()</code> then <code>GetDC()</code>, but I cannot get the program to recognize the child window or the static control as a window. </p>\n\n<p>The line that causes the assertion failure:</p>\n\n<pre><code>CDC *pDC = plotScreen.GetDC();\n</code></pre>\n\n<p>The creation of plotScreen:</p>\n\n<pre><code>plotScreen.Create(\"Gamma Playback\", WS_CHILD | WS_VISIBLE | WS_TABSTOP | BS_PUSHBUTTON | DT_CENTER, plotRect, thisParent, NULL);\n</code></pre>\n\n<p>The assertion failure:</p>\n\n<pre><code>ASSERT(::IsWindow(m_hWnd)); return CDC::FromHandle(::GetDC(m_hWnd)); }\n</code></pre>\n\n<p>The static is created before the GetDC is called.</p>\n\n<p>Edit: the static is successfully created but destroyed. I tried using new to allocate on the heap but it is still destroyed before I can use it in a later function. </p>\n"}, {"tags": ["c++", "boost", "message-queue"], "answers": [{"comments": [{"owner": {"reputation": 9345, "user_id": 1021920, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VukgG.jpg?s=128&g=1", "display_name": "hellow", "link": "https://stackoverflow.com/users/1021920/hellow"}, "edited": false, "score": 0, "creation_date": 1528900846, "post_id": 50839725, "comment_id": 88683749, "body": "Not satisfied with the answer? Tell me why ;) (to the person who downvoted it)"}], "tags": [], "owner": {"reputation": 9345, "user_id": 1021920, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VukgG.jpg?s=128&g=1", "display_name": "hellow", "link": "https://stackoverflow.com/users/1021920/hellow"}, "is_accepted": false, "score": 3, "last_activity_date": 1528902417, "last_edit_date": 1528902417, "creation_date": 1528900023, "answer_id": 50839725, "question_id": 50839639, "link": "https://stackoverflow.com/questions/50839639/how-to-check-if-boost-message-queue-exists/50839725#50839725", "title": "How to check if boost message queue exists", "body": "<p>According to the <a href=\"https://www.boost.org/doc/libs/1_67_0/doc/html/boost/interprocess/message_queue_t.html#boost.interprocess.message_queue_tconstruct-copy-destruct\" rel=\"nofollow noreferrer\">doc</a>:</p>\n\n<blockquote>\n  <p>Opens a previously created process shared message queue with name \"name\". If the queue was not previously created or there are no free resources, throws an error. </p>\n</blockquote>\n\n<p>So you should be able to catch an exception if the message queue does not exist.</p>\n\n<p>A <a href=\"https://wandbox.org/permlink/b9bOwTvQB3aYLSnE\" rel=\"nofollow noreferrer\">simple test_program</a> showed me, that the <a href=\"https://www.boost.org/doc/libs/1_67_0/doc/html/boost/interprocess/interprocess_exception.html\" rel=\"nofollow noreferrer\">interprocess_exception</a> is thrown and the error code is 7, which indicates a <a href=\"https://www.boost.org/doc/libs/1_67_0/doc/html/interprocess/indexes_reference.html#header.boost.interprocess.errors_hpp\" rel=\"nofollow noreferrer\"><code>not_found_error</code></a>.</p>\n"}, {"comments": [{"owner": {"reputation": 9345, "user_id": 1021920, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VukgG.jpg?s=128&g=1", "display_name": "hellow", "link": "https://stackoverflow.com/users/1021920/hellow"}, "edited": false, "score": 0, "creation_date": 1528900399, "post_id": 50839790, "comment_id": 88683419, "body": "Better use <a href=\"https://www.boost.org/doc/libs/1_55_0/doc/html/interprocess/synchronization_mechanisms.html#interprocess.synchronization_mechanisms.message_queue.message_queue_example\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_55_0/doc/html/interprocess/&hellip;</a> as link and maybe the latest version?! (which would be <a href=\"https://www.boost.org/doc/libs/1_67_0/doc/html/interprocess/synchronization_mechanisms.html#interprocess.synchronization_mechanisms.message_queue.message_queue_example\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_67_0/doc/html/interprocess/&hellip;</a> )"}, {"owner": {"reputation": 312, "user_id": 8856358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eece51b12abc3887d561ede1c69c3265?s=128&d=identicon&r=PG", "display_name": "MauriceRandomNumber", "link": "https://stackoverflow.com/users/8856358/mauricerandomnumber"}, "reply_to_user": {"reputation": 9345, "user_id": 1021920, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VukgG.jpg?s=128&g=1", "display_name": "hellow", "link": "https://stackoverflow.com/users/1021920/hellow"}, "edited": false, "score": 0, "creation_date": 1528900520, "post_id": 50839790, "comment_id": 88683510, "body": "My experience only goes to boost 1.55 so far. Did not dare to assume it will stay the same in the latest version"}, {"owner": {"reputation": 9345, "user_id": 1021920, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VukgG.jpg?s=128&g=1", "display_name": "hellow", "link": "https://stackoverflow.com/users/1021920/hellow"}, "edited": false, "score": 0, "creation_date": 1528900634, "post_id": 50839790, "comment_id": 88683588, "body": "&quot;there is an <code>already_exists_error</code>&quot;. He wants to know, if the message queue does not exist :)"}, {"owner": {"reputation": 41, "user_id": 6819485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11572bff1c4965d0fdbef38694ec1317?s=128&d=identicon&r=PG&f=1", "display_name": "Eliya", "link": "https://stackoverflow.com/users/6819485/eliya"}, "edited": false, "score": 0, "creation_date": 1528901182, "post_id": 50839790, "comment_id": 88683984, "body": "But i declare it out of function in cpp file, and i can&#39;t use try catch."}], "tags": [], "owner": {"reputation": 312, "user_id": 8856358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eece51b12abc3887d561ede1c69c3265?s=128&d=identicon&r=PG", "display_name": "MauriceRandomNumber", "link": "https://stackoverflow.com/users/8856358/mauricerandomnumber"}, "is_accepted": false, "score": 2, "last_activity_date": 1528900466, "last_edit_date": 1528900466, "creation_date": 1528900205, "answer_id": 50839790, "question_id": 50839639, "link": "https://stackoverflow.com/questions/50839639/how-to-check-if-boost-message-queue-exists/50839790#50839790", "title": "How to check if boost message queue exists", "body": "<p>Create it and surround with <code>try</code> and <code>catch</code>. Read the doc to find the error code (for your specific version of boost) for already_exists (or something like that)</p>\n\n<p>Check <a href=\"https://www.boost.org/doc/libs/1_55_0/doc/html/interprocess/synchronization_mechanisms.html#interprocess.synchronization_mechanisms.message_queue\" rel=\"nofollow noreferrer\">Boost 1.55 doc</a> for an example in that version</p>\n\n<p>Specifically, take a look at the linked code:</p>\n\n<pre><code>namespace boost {\n  namespace interprocess {\n\n    enum error_code_t { no_error = = 0, system_error, other_error, \n                        security_error, read_only_error, io_error, path_error, \n                        not_found_error, busy_error, already_exists_error, \n                        not_empty_error, is_directory_error, \n                        out_of_space_error, out_of_memory_error, \n                        out_of_resource_error, lock_error, sem_error, \n                        mode_error, size_error, corrupted_error, \n                        not_such_file_or_directory, invalid_argument, \n                        timeout_when_locking_error, \n                        timeout_when_waiting_error };\n\n    typedef int native_error_t;\n  }\n}\n</code></pre>\n\n<p>there is an </p>\n\n<pre><code>already_exists_error\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 6819485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11572bff1c4965d0fdbef38694ec1317?s=128&d=identicon&r=PG&f=1", "display_name": "Eliya", "link": "https://stackoverflow.com/users/6819485/eliya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 588, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1528902417, "creation_date": 1528899796, "last_edit_date": 1528901953, "question_id": 50839639, "link": "https://stackoverflow.com/questions/50839639/how-to-check-if-boost-message-queue-exists", "title": "How to check if boost message queue exists", "body": "<p>I'm using boost message_queue and I create the queue in one c++ program and use it in another program.</p>\n\n<p>My problem is, that sometimes the first program doesn't run yet, but the second is running. </p>\n\n<p>So when I start first program, I want to know, if the queue exists.\nI don't want to use message_queue::remove() because I don't want to lose some data.</p>\n\n<p>The question is, how can I know if message_queue \"bla_bla_queue\" exists, or not?</p>\n\n<pre><code>message_queue q(open_only,\"q\");\n</code></pre>\n"}, {"tags": ["python", "c++", "ros"], "answers": [{"tags": [], "owner": {"reputation": 15086, "user_id": 3702377, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Ac4wz.jpg?s=128&g=1", "display_name": "Benyamin Jafari", "link": "https://stackoverflow.com/users/3702377/benyamin-jafari"}, "is_accepted": true, "score": 1, "last_activity_date": 1534408470, "last_edit_date": 1534408470, "creation_date": 1530634146, "answer_id": 51158976, "question_id": 50839633, "link": "https://stackoverflow.com/questions/50839633/ros-cpp-equivalent-of-python-subprocess-call-with-shell-true/51158976#51158976", "title": "ROS CPP equivalent of Python subprocess.call() with shell=True", "body": "<p><code>.system()</code> method that's it.</p>\n\n<p>Before, I used this method in a ROS package, as following to publish a topic manually:</p>\n\n<pre><code>system(\"rostopic pub -1 /tilt_scan_controller/command std_msgs/Float64 -- 0.0\"); \n</code></pre>\n\n<p>In your situation will be:</p>\n\n<pre><code>system(\"rosnode kill &lt;your-node-name&gt;\"); \n</code></pre>\n"}], "owner": {"reputation": 5084, "user_id": 1175065, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5d39d28e20ba99165ad648135d853ff3?s=128&d=identicon&r=PG", "display_name": "Ravi Joshi", "link": "https://stackoverflow.com/users/1175065/ravi-joshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 219, "favorite_count": 0, "accepted_answer_id": 51158976, "answer_count": 1, "score": 2, "last_activity_date": 1534408470, "creation_date": 1528899775, "question_id": 50839633, "link": "https://stackoverflow.com/questions/50839633/ros-cpp-equivalent-of-python-subprocess-call-with-shell-true", "title": "ROS CPP equivalent of Python subprocess.call() with shell=True", "body": "<p>The following code snippet works fine in ROS Indigo (Python 2.7)-</p>\n\n<pre><code>import subprocess\nsubprocess.call([\"rosnode\", \"kill\", \"my_node\"], shell=True)\n</code></pre>\n\n<p>However, I am looking for ROS CPP equivalent of above function. The <code>system</code> command isn't working since the specified command is supposed to be executed through the shell.</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1528899529, "post_id": 50839448, "comment_id": 88682809, "body": "FWIW <code>template&lt;typename T&gt; int alloc(T*&amp; entry)</code> can be written as <code>template&lt;typename T&gt; int alloc(T*&amp; entry) = delete;</code> as well.  You won&#39;t get as nice of an error message but you won&#39;t have to type as much."}], "answers": [{"comments": [{"owner": {"reputation": 2107, "user_id": 3770881, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9a575ab4e645630e948c8ae7eebeda74?s=128&d=identicon&r=PG&f=1", "display_name": "lpares12", "link": "https://stackoverflow.com/users/3770881/lpares12"}, "edited": false, "score": 0, "creation_date": 1528906139, "post_id": 50839714, "comment_id": 88687026, "body": "This is what I was looking for. The only problem is that whenever I try to compile I get: <code>expected \u2018(\u2019 before \u2018constexpr\u2019</code>, as if <code>constexpr</code> was not recognized. I made sure I&#39;m compiling with <code>gcc 6</code> (in case C++17 is not compatible with my other cpp compilers), but I get the same error anyways."}], "tags": [], "owner": {"reputation": 4802, "user_id": 921070, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f584b200a79f438d9092d7f76da7ede6?s=128&d=identicon&r=PG", "display_name": "Dean Seo", "link": "https://stackoverflow.com/users/921070/dean-seo"}, "is_accepted": false, "score": 1, "last_activity_date": 1528907228, "last_edit_date": 1528907228, "creation_date": 1528899981, "answer_id": 50839714, "question_id": 50839448, "link": "https://stackoverflow.com/questions/50839448/c-workaround-invalid-initialization-of-reference-of-type-c-from-expressi/50839714#50839714", "title": "c++ workaround: `invalid initialization of reference of type \u2018C*&amp;\u2019 from expression of type \u2018B*\u2019", "body": "<blockquote>\n  <p>I understand that the error appears <strong>because when compiling the method whatever with isB = true it is also trying to compile also the alloc_c() call</strong>, so it checks that T = B and can't find any alloc_c(B*&amp; entry) method, so it fails.</p>\n</blockquote>\n\n<p>You can prevent that from happening by giving this compile-time evaluated <code>isB</code> instead:</p>\n\n<pre><code>template&lt;typename T, bool isB&gt;\nint whatever();\n</code></pre>\n\n<p>Now, using <a href=\"http://en.cppreference.com/w/cpp/language/if\" rel=\"nofollow noreferrer\"><code>if constexpr</code></a> will give you the desired feature without hurting your code too much:</p>\n\n<pre><code>template&lt;typename T, bool isB&gt;\nint whatever() {\n    T* entry = NULL;\n    if constexpr (isB) {\n        alloc_b(entry);\n    } else {\n        alloc_c(entry);\n    }\n\n    std::cout &lt;&lt; entry-&gt;val &lt;&lt; \"\\n\";\n}\n\nwhatever&lt;B, true&gt;();\nwhatever&lt;C, false&gt;();\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/FA73ek9HA2arvz3z\" rel=\"nofollow noreferrer\">Live Demo</a></p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Without <code>if constexpr</code>, SFINAE still works - you'll just have to do more typing:</p>\n\n<pre><code>template&lt;typename T, bool isB&gt;\ntypename std::enable_if&lt;isB, int&gt;::type whatever() {\n    T* entry = NULL;\n    alloc_b(entry);\n\n    std::cout &lt;&lt; entry-&gt;val &lt;&lt; \"\\n\";\n}\n\ntemplate&lt;typename T, bool isB&gt;\ntypename std::enable_if&lt;!isB, int&gt;::type whatever() {\n    T* entry = NULL;\n    alloc_c(entry);\n\n    std::cout &lt;&lt; entry-&gt;val &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/pa1RYxdcWdCsQpK2\" rel=\"nofollow noreferrer\">Tested with gcc 6.1.0.</a></p>\n"}], "owner": {"reputation": 2107, "user_id": 3770881, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9a575ab4e645630e948c8ae7eebeda74?s=128&d=identicon&r=PG&f=1", "display_name": "lpares12", "link": "https://stackoverflow.com/users/3770881/lpares12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1528907228, "creation_date": 1528899271, "question_id": 50839448, "link": "https://stackoverflow.com/questions/50839448/c-workaround-invalid-initialization-of-reference-of-type-c-from-expressi", "title": "c++ workaround: `invalid initialization of reference of type \u2018C*&amp;\u2019 from expression of type \u2018B*\u2019", "body": "<p>Lately I've found this error for the first time: <code>invalid initialization of reference of type \u2018C*&amp;\u2019 from expression of type \u2018B*\u2019</code>. The error came up when porting code from <code>gcc 4.9</code> to <code>gcc 6</code>. Below I pasted a minimal example of the code.</p>\n\n<pre><code>class A {\npublic:\n    A() : a(1) {};\n    virtual ~A() {};\n    int a;\n};\n\nclass B : public A {\npublic:\n    B() : val(2) {};\n    int val;\n};\n\nclass C : public A {\npublic:\n    C() : val(3) {};\n    float val;\n};\n\nint alloc_b(B*&amp; entry) {\n    try {\n        entry = new B;\n    } catch(...) {\n        return -1;\n    }\n    return 0;\n}\n\nint alloc_c(C*&amp; entry) {\n    try {\n        entry = new C;\n    } catch(...) {\n        return -1;\n    }\n    return 0;\n}\n\ntemplate&lt;typename T&gt;\nint whatever(const bool isB) {\n    T* entry = NULL;\n    if(isB) {\n        alloc_b(entry);\n    } else {\n        alloc_c(entry);\n    }\n\n    std::cout &lt;&lt; entry-&gt;val &lt;&lt; \"\\n\";\n}\n\nint main() {\n    int rv;\n    B* ptrB;\n    C* ptrC;\n\n    whatever&lt;B&gt;(true);\n    whatever&lt;C&gt;(false);\n    return 0;\n}\n</code></pre>\n\n<p>I understand that the error appears because when compiling the method <code>whatever</code> with <code>isB = true</code> it is also trying to compile also the <code>alloc_c()</code> call, so it checks that <code>T = B</code> and can't find any <code>alloc_c(B*&amp; entry)</code> method, so it fails. And the other way <code>invalid initialization of reference of type \u2018B*&amp;\u2019 from expression of type \u2018C*\u2019</code> when the method <code>whatever</code> is called with type <code>C</code> and <code>isB = false</code>.</p>\n\n<p>I was just wondering what's the cleanest way to get around this problem. The only solution I've found was creating a method template <code>alloc</code> with some specializations:</p>\n\n<pre><code>template&lt;typename T&gt;\nint alloc(T*&amp; entry) {\n    static_assert((std::is_same&lt;decltype(entry), B&gt;::value ||\n                    std::is_same&lt;decltype(entry), C&gt;::value),\n                    \"Class must be A or B\");\n}\n\ntemplate&lt;&gt;\nint alloc(B*&amp; entry) {\n    return alloc_b(entry);\n}\n\ntemplate&lt;&gt;\nint alloc(C*&amp; entry) {\n    return alloc_c(entry);\n}\n</code></pre>\n\n<p>And then from inside the <code>whatever</code> function, I'd call that alloc instead of the other allocs.</p>\n\n<pre><code>template&lt;typename T&gt;\nint whatever(const bool isB) {\n    T* entry = NULL;\n    alloc(entry);\n\n    std::cout &lt;&lt; entry-&gt;val &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>But I'm sure there has to be a cleaner way to get around this error.</p>\n"}, {"tags": ["c++", "windows"], "comments": [{"owner": {"reputation": 252, "user_id": 5364211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ixqyo.jpg?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5364211/tom"}, "edited": false, "score": 0, "creation_date": 1528899320, "post_id": 50839443, "comment_id": 88682661, "body": "PathAppend or PathAppendA?"}, {"owner": {"reputation": 41, "user_id": 9910279, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R9W3fzv0mhk/AAAAAAAAAAI/AAAAAAAAAOM/1mYLsSfb2ww/photo.jpg?sz=128", "display_name": "Jacob McNamara", "link": "https://stackoverflow.com/users/9910279/jacob-mcnamara"}, "reply_to_user": {"reputation": 252, "user_id": 5364211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ixqyo.jpg?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5364211/tom"}, "edited": false, "score": 0, "creation_date": 1528899377, "post_id": 50839443, "comment_id": 88682703, "body": "@TCouch Both give the same result."}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 2, "creation_date": 1528902630, "post_id": 50839443, "comment_id": 88684977, "body": "Documentation for <code>PathAppend</code> says to add <code>&quot;Shlwapi.lib&quot;</code>"}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1528902849, "post_id": 50839443, "comment_id": 88685106, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/16948064/unresolved-external-symbol-lnk2019\">Unresolved external symbol LNK2019</a>"}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 9910279, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R9W3fzv0mhk/AAAAAAAAAAI/AAAAAAAAAOM/1mYLsSfb2ww/photo.jpg?sz=128", "display_name": "Jacob McNamara", "link": "https://stackoverflow.com/users/9910279/jacob-mcnamara"}, "is_accepted": false, "score": 0, "last_activity_date": 1528903797, "creation_date": 1528903797, "answer_id": 50841045, "question_id": 50839443, "link": "https://stackoverflow.com/questions/50839443/unresolved-external-symbol-error-on-function-pathappend/50841045#50841045", "title": "Unresolved External Symbol Error on Function PathAppend", "body": "<p>Credit to: Barmak Shemirani</p>\n\n<p>Open your project properties, go to Linker->Input and add Shlwapi.lib to dependencies. Works like a charm.</p>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 8815765, "user_type": "registered", "profile_image": "https://graph.facebook.com/1347513675298278/picture?type=large", "display_name": "Ilia Karkamov", "link": "https://stackoverflow.com/users/8815765/ilia-karkamov"}, "is_accepted": true, "score": 0, "last_activity_date": 1528904275, "creation_date": 1528904275, "answer_id": 50841184, "question_id": 50839443, "link": "https://stackoverflow.com/questions/50839443/unresolved-external-symbol-error-on-function-pathappend/50841184#50841184", "title": "Unresolved External Symbol Error on Function PathAppend", "body": "<p>The error doesn't mean that you havn't included the header file. \nThis error means that you are not linking against the corresponding library.</p>\n\n<p>The error is linker error and the solution is to include in your project the lib file \"Shlwapi.lib\"</p>\n\n<p>You can include the lib file in your project settings. </p>\n"}], "owner": {"reputation": 41, "user_id": 9910279, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R9W3fzv0mhk/AAAAAAAAAAI/AAAAAAAAAOM/1mYLsSfb2ww/photo.jpg?sz=128", "display_name": "Jacob McNamara", "link": "https://stackoverflow.com/users/9910279/jacob-mcnamara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 414, "favorite_count": 0, "accepted_answer_id": 50841184, "answer_count": 2, "score": 0, "last_activity_date": 1528904275, "creation_date": 1528899262, "last_edit_date": 1528899410, "question_id": 50839443, "link": "https://stackoverflow.com/questions/50839443/unresolved-external-symbol-error-on-function-pathappend", "title": "Unresolved External Symbol Error on Function PathAppend", "body": "<p>I'm trying to create a new directory for save files in my game, and I'm getting an unresolved external symbol error when I use <code>PathAppend</code>.</p>\n\n<pre><code>if (SUCCEEDED(SHGetFolderPath(NULL, CSIDL_COMMON_DOCUMENTS, NULL, 0, path))) {\n            PathAppend(path, \"AotDK\\\\saves\");\n            if (SHCreateDirectoryEx(NULL, path, NULL) != ERROR_SUCCESS) {\n                std::cout &lt;&lt; \"Error: \" &lt;&lt; GetLastError();\n            }\n        } else {\n        std::cout &lt;&lt; \"Error: \" &lt;&lt; GetLastError();\n        }\n</code></pre>\n\n<p>I know that this usually means I haven't included a header file, but from what I can gather I've included all that I need. Am I missing one?</p>\n\n<pre><code>#include \"main.hpp\"\n#include &lt;iostream&gt;\n#include &lt;Windows.h&gt;\n#include &lt;ShlObj.h&gt;\n#include &lt;Shlwapi.h&gt;\n</code></pre>\n\n<p>If not, did I structure the code wrong? I  based it off of a previously asked question's answer, so I would assume not.</p>\n"}, {"tags": ["c++", "c", "memory-management", "dlopen", "jemalloc"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1528899709, "post_id": 50839284, "comment_id": 88682963, "body": "I do not think those libraries are designed to be open with <code>dlopen</code>."}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1528900304, "post_id": 50839284, "comment_id": 88683357, "body": "Seems like an issue in jemalloc version you have. In any case this is not really good idea to use dynamic library loading nether dlopen nor LoadLibrary for memory allocators. Imagine what is going to happen, when you call to a <code>free</code> function when allocator is already unloaded. Link shared libraries to the executable instead."}, {"owner": {"reputation": 603, "user_id": 6304206, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bxeU_Wvk3RQ/AAAAAAAAAAI/AAAAAAAABAE/WUQH4BtsS-I/photo.jpg?sz=128", "display_name": "EnzoMolion", "link": "https://stackoverflow.com/users/6304206/enzomolion"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1528901889, "post_id": 50839284, "comment_id": 88684473, "body": "@SergeyA What do you mean by not &quot;designed to be open with <code>dlopen</code>&quot;, please ? @VictorGubin I am aware of this pitfall. I am trying to design a subsystem to be able to use multple allocation strategies within the same program. Linking sharing libraries is thus not enough and making sure to free allocated memory with the good allocator is part of the program design."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1528902236, "post_id": 50839284, "comment_id": 88684694, "body": "They are designed to be linked automatically through dynamic loader and become available before program starts executing."}, {"owner": {"reputation": 4747, "user_id": 611560, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/25ee461bdf2849f6db82054c73192ea1?s=128&d=identicon&r=PG", "display_name": "Yann Droneaud", "link": "https://stackoverflow.com/users/611560/yann-droneaud"}, "edited": false, "score": 0, "creation_date": 1528920811, "post_id": 50839284, "comment_id": 88694523, "body": "One has to use <code>dlsym()</code> to retrieve the <code>calloc()</code>, <code>free()</code>, <code>malloc()</code> and <code>realloc()</code>  functions provided by the allocator dynamic library <i>and</i> one has to be very careful not to free or reallocate a pointer provided by one allocator with the functions of another allocator."}], "answers": [{"tags": [], "owner": {"reputation": 603, "user_id": 6304206, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bxeU_Wvk3RQ/AAAAAAAAAAI/AAAAAAAABAE/WUQH4BtsS-I/photo.jpg?sz=128", "display_name": "EnzoMolion", "link": "https://stackoverflow.com/users/6304206/enzomolion"}, "is_accepted": true, "score": 1, "last_activity_date": 1528912386, "creation_date": 1528912386, "answer_id": 50843393, "question_id": 50839284, "link": "https://stackoverflow.com/questions/50839284/how-to-dlopen-jemalloc-dynamic-library/50843393#50843393", "title": "How to dlopen jemalloc dynamic library", "body": "<p>I was able to find a solution to this thanks to <code>jemalloc</code>'s GitHub repository <a href=\"https://github.com/jemalloc/jemalloc/issues/1237\" rel=\"nofollow noreferrer\">issue #1237</a>. </p>\n\n<p>This solution was to recompile <code>jemalloc</code> using the <code>--disable-initial-exec-tls</code> according to the <a href=\"https://github.com/jemalloc/jemalloc/blob/dev/INSTALL.md\" rel=\"nofollow noreferrer\">INSTALL.md</a>, my bad.</p>\n"}], "owner": {"reputation": 603, "user_id": 6304206, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bxeU_Wvk3RQ/AAAAAAAAAAI/AAAAAAAABAE/WUQH4BtsS-I/photo.jpg?sz=128", "display_name": "EnzoMolion", "link": "https://stackoverflow.com/users/6304206/enzomolion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 567, "favorite_count": 0, "accepted_answer_id": 50843393, "answer_count": 1, "score": 0, "last_activity_date": 1528912386, "creation_date": 1528898797, "question_id": 50839284, "link": "https://stackoverflow.com/questions/50839284/how-to-dlopen-jemalloc-dynamic-library", "title": "How to dlopen jemalloc dynamic library", "body": "<p>I am trying to <code>dlopen</code> memory allocators at runtime. \nI have no problem with <code>libc</code>, <code>tcmalloc</code> and <code>tbbmalloc</code>. But trying to <code>dlopen</code> <code>jemalloc</code> results in the following error (caught via <code>dlerror</code>) : </p>\n\n<p><code>/path/to/lib/libjemalloc.so: cannot allocate memory in static TLS block</code> </p>\n\n<p>Do you have any idea of the reason for this error and hence how I could tackle this ?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1528898744, "post_id": 50839210, "comment_id": 88682270, "body": "It is an abstract class, you cannot create an instance of it - so why would you need to implement other virtual functions?"}, {"owner": {"reputation": 75, "user_id": 9198982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28af0a59e992bf141957562b2ebbb0a0?s=128&d=identicon&r=PG&f=1", "display_name": "Wballer3", "link": "https://stackoverflow.com/users/9198982/wballer3"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1528898856, "post_id": 50839210, "comment_id": 88682357, "body": "I do not know, but the code base which I am working with has this structure, so I am just curious how it is possible."}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 2, "creation_date": 1528898882, "post_id": 50839210, "comment_id": 88682378, "body": "<code>A</code> inherits <code>B</code>&#39;s pure virtual functions and they become pure virtual in <code>A</code>, which makes <code>A</code> abstract irrelevant of any pure virtual functions it provides itself."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1528900079, "post_id": 50839210, "comment_id": 88683207, "body": "Designing class hierarchies would be really inconvenient if every pure virtual function had to be implemented immediately when inheriting one level down."}], "answers": [{"tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": false, "score": 8, "last_activity_date": 1528898883, "creation_date": 1528898883, "answer_id": 50839313, "question_id": 50839210, "link": "https://stackoverflow.com/questions/50839210/abstract-class-inheriting-another-abstract-class-in-c/50839313#50839313", "title": "Abstract class inheriting another abstract class in C++", "body": "<p>A class that inherits from an abstract class does not have to implement the pure virtual methods. Not doing so it becomes an abstract class itself which means in this case that <code>A</code> is also an abstract class regardless of other pure virtual methods declared in <code>A</code>.</p>\n"}], "owner": {"reputation": 75, "user_id": 9198982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28af0a59e992bf141957562b2ebbb0a0?s=128&d=identicon&r=PG&f=1", "display_name": "Wballer3", "link": "https://stackoverflow.com/users/9198982/wballer3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 827, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528898883, "creation_date": 1528898594, "question_id": 50839210, "link": "https://stackoverflow.com/questions/50839210/abstract-class-inheriting-another-abstract-class-in-c", "title": "Abstract class inheriting another abstract class in C++", "body": "<p>I have a class which has a pure virtual function declared, like this:</p>\n\n<pre><code>class A : public virtual B\n{\npublic:\n\n   virtual void setOn() = 0;\n\n   virtual void setOff() = 0;\n};\n</code></pre>\n\n<p>Now, class B is also abstract:</p>\n\n<pre><code>class B\n{\npublic:\n\n   virtual const ElementId&amp; getElementId() const = 0;\n\n   virtual const std::string&amp; getName() const = 0;\n\n   virtual ~B();\n\n};\n</code></pre>\n\n<p>My question is how class A can be valid, since it does not provide the implementation of the pure virtual methods in class B?</p>\n"}, {"tags": ["c++", "unreal-engine4", "raycasting"], "answers": [{"tags": [], "owner": {"reputation": 604, "user_id": 4168176, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/38a185dafac089d7771daa6317c293c6?s=128&d=identicon&r=PG&f=1", "display_name": "BenjaFriend", "link": "https://stackoverflow.com/users/4168176/benjafriend"}, "is_accepted": false, "score": 0, "last_activity_date": 1528909140, "creation_date": 1528909140, "answer_id": 50842587, "question_id": 50839130, "link": "https://stackoverflow.com/questions/50839130/raycasting-from-player-hitting-object-and-setting-off-custom-event-c-ue4/50842587#50842587", "title": "Raycasting from player, hitting object and setting off custom event C++ UE4", "body": "<p>What I would do is use a <code>BlueprintNativeEvent</code>. This will allow you to create an <code>Implementation</code> function of the stuff you want to happen in C++, as well as a blueprint implementation, which can be different for each blueprint of that object type.</p>\n\n<p>It is quite simple to use as well, for example, in your character's header file: </p>\n\n<pre><code>/** Called when the player presses the fire key */\nUFUNCTION(BlueprintNativeEvent, Category = \"Shooting\")\nvoid OnHit();\nvirtual void OnHit_Implementation();\n</code></pre>\n\n<p>And now your Cpp: </p>\n\n<pre><code> void AMyGameCharacter::OnHit_Implementation()\n {\n     UE_LOG(LogTemp, Warning, TEXT(\"OnHit_Implementation!\"));\n     // Do whatever stuff you want to do in C++ here\n }\n</code></pre>\n\n<p>Now over in your character / actor blueprint, just go to the event graph, right click, and add the event of type <code>OnHit</code>. Make sure that you make a callback to the parent <code>OnHit</code> event though (right click on the event and hit \"Add Call to Parent Function\")</p>\n\n<p>If you want an example of this you can look at the <a href=\"https://www.youtube.com/watch?v=EIptJ0YrYg0\" rel=\"nofollow noreferrer\">C++ Battery Collector series</a> or the <a href=\"https://wiki.unrealengine.com/Blueprints,_Empower_Your_Entire_Team_With_BlueprintNativeEvents\" rel=\"nofollow noreferrer\">docs</a>.</p>\n"}], "owner": {"reputation": 1, "user_id": 7323501, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155623699124502/picture?type=large", "display_name": "Harvey Rush", "link": "https://stackoverflow.com/users/7323501/harvey-rush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 748, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528909140, "creation_date": 1528898321, "question_id": 50839130, "link": "https://stackoverflow.com/questions/50839130/raycasting-from-player-hitting-object-and-setting-off-custom-event-c-ue4", "title": "Raycasting from player, hitting object and setting off custom event C++ UE4", "body": "<p>I've been going in circles for a day now trying to get this going and I'm just getting nowhere. I'm trying to have multiple objects in the scene with individual animations and when I fire a raycast from my player and it hits one, have the UFunction(blueprintimplementableevent) go off on the object that it hits. Please help me this is absolutely stumping me.</p>\n"}, {"tags": ["c++", "inheritance"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1528897750, "post_id": 50838869, "comment_id": 88681549, "body": "1] <code>dynamic_cast</code> and test. 2] opinion based. [0] <i>&quot;... best practice...&quot;</i> option based."}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1528897766, "post_id": 50838869, "comment_id": 88681560, "body": "There is nothing wrong with having a pure virtual member function in a class."}, {"owner": {"reputation": 754, "user_id": 8402500, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/XZRs6.jpg?s=128&g=1", "display_name": "G.Alexander", "link": "https://stackoverflow.com/users/8402500/g-alexander"}, "edited": false, "score": 0, "creation_date": 1528897837, "post_id": 50838869, "comment_id": 88681620, "body": "@Deep I think, if you want to use virtual functions without a type cast, please make <code>interface</code>. And [1] is a good practice may be."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1528898071, "post_id": 50838869, "comment_id": 88681775, "body": "This is a design question and depends on the specific case, and sometimes on business requirements and maybe even personal preference. I&#39;m not sure this question is a good fit for Stack Overflow."}, {"owner": {"reputation": 706, "user_id": 4070330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5de272559ba2ec727fe9b3108afa222f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kashpur", "link": "https://stackoverflow.com/users/4070330/andrew-kashpur"}, "edited": false, "score": 4, "creation_date": 1528898076, "post_id": 50838869, "comment_id": 88681778, "body": "i think the whole situation is design flaw. (1) You store map of base class pointers mean you do not need to know implementation details, just interface. (2) You want perform on implementation specific operation on base class pointer means you need to know implementation details. Which one is the case ?"}, {"owner": {"reputation": 1, "user_id": 9933832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09d0bb30f032b90ef69ae4e28b22547b?s=128&d=identicon&r=PG&f=1", "display_name": "Deep", "link": "https://stackoverflow.com/users/9933832/deep"}, "reply_to_user": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1528899326, "post_id": 50838869, "comment_id": 88682665, "body": "@Ron what if the virtual member doesn&#39;t apply to all the derived classes ? If we take the traditional inheritance example, a class student and class employee inherits from class person. Many fields such as age, name, place are applicable to both student and employee. But salary, it is applicable only to employee. Assuming a getMethod for salary. Is it a good one to have a pure virtual function getSalary() in class person ?"}, {"owner": {"reputation": 1, "user_id": 9933832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09d0bb30f032b90ef69ae4e28b22547b?s=128&d=identicon&r=PG&f=1", "display_name": "Deep", "link": "https://stackoverflow.com/users/9933832/deep"}, "reply_to_user": {"reputation": 706, "user_id": 4070330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5de272559ba2ec727fe9b3108afa222f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kashpur", "link": "https://stackoverflow.com/users/4070330/andrew-kashpur"}, "edited": false, "score": 0, "creation_date": 1528899577, "post_id": 50838869, "comment_id": 88682857, "body": "@AndrewKashpur Thanks for the feedback. The reason they are maintained in a same map is that they all are essentially the same. If we maintain them separate, then there is no point in inheriting them. After the base class pointer to be acted upon is identified, it is time to take one step forward and act on it. That is where I need to know what I am dealing with. Do you think of an alternative ?"}, {"owner": {"reputation": 1773, "user_id": 8805095, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4948ba17681551aa212dbc7be9bff40?s=128&d=identicon&r=PG&f=1", "display_name": "Moia", "link": "https://stackoverflow.com/users/8805095/moia"}, "edited": false, "score": 0, "creation_date": 1528899647, "post_id": 50838869, "comment_id": 88682917, "body": "@Deep then you need an additional level of abstraction. Person is an interface and Employee inherits from Person but is itself another interface exposing getSalary etc.."}, {"owner": {"reputation": 1773, "user_id": 8805095, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4948ba17681551aa212dbc7be9bff40?s=128&d=identicon&r=PG&f=1", "display_name": "Moia", "link": "https://stackoverflow.com/users/8805095/moia"}, "edited": false, "score": 0, "creation_date": 1528900021, "post_id": 50838869, "comment_id": 88683165, "body": "@Deep about your answer to AndrewKashpur: there is still point in inheriting those, because they do model the same thing (a person). Now it gives me the hint you need a Visitor Pattern to model your problem, the interface inheritance is just ok. You don&#39;t feel confortable (I guess) because it doesn&#39;t fit the problem you&#39;re trying to solve, but the patterns comes just to help you to do that."}, {"owner": {"reputation": 706, "user_id": 4070330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5de272559ba2ec727fe9b3108afa222f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kashpur", "link": "https://stackoverflow.com/users/4070330/andrew-kashpur"}, "edited": false, "score": 1, "creation_date": 1528901036, "post_id": 50838869, "comment_id": 88683880, "body": "@Deep Cola and gazoline are essentialy liquids. So you put both cola and gazoline into bottles. then you put all bottles in one box. next you iterate through the box, and if it is cola you drink it, if its gazoline you put it into your car. But is it really good idea to store all bottles in the same box ? The thing is, if derived classes were really essentialy the same, pointer to base class would be enough. But since pointer to base class is not enough, they are not essentialy the same."}, {"owner": {"reputation": 1, "user_id": 9933832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09d0bb30f032b90ef69ae4e28b22547b?s=128&d=identicon&r=PG&f=1", "display_name": "Deep", "link": "https://stackoverflow.com/users/9933832/deep"}, "reply_to_user": {"reputation": 1773, "user_id": 8805095, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4948ba17681551aa212dbc7be9bff40?s=128&d=identicon&r=PG&f=1", "display_name": "Moia", "link": "https://stackoverflow.com/users/8805095/moia"}, "edited": false, "score": 0, "creation_date": 1528907957, "post_id": 50838869, "comment_id": 88688017, "body": "@moia and Andrew I am convinced by both of your explanation. Will re-think abt my design."}], "answers": [{"tags": [], "owner": {"reputation": 2933, "user_id": 3291022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z6iSB.jpg?s=128&g=1", "display_name": "Alexey Voytenko", "link": "https://stackoverflow.com/users/3291022/alexey-voytenko"}, "is_accepted": false, "score": 1, "last_activity_date": 1528899019, "creation_date": 1528899019, "answer_id": 50839368, "question_id": 50838869, "link": "https://stackoverflow.com/questions/50838869/best-practice-when-dealing-with-c-inheritance/50839368#50839368", "title": "Best practice when dealing with C++ inheritance", "body": "<p>Virtual functions were specially designed to work via pointers to the base class with objects of based or derived. Thus you'll get run time polymorphism, if all you classes support operation x().</p>\n\n<p>However, if, say, only C supports x(), what behaviour you want for pointers to objects A and B? May be just store a range of pointers to C separately? You do not need inheritance in this case.</p>\n\n<p>Either you can specify some empty implementation for x() in class A - which can be abstract if you do not need objects of class A. This is a usual practice.</p>\n\n<p>Run-time casting has time cost and also involves if- check which has performance overhead.</p>\n"}], "owner": {"reputation": 1, "user_id": 9933832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09d0bb30f032b90ef69ae4e28b22547b?s=128&d=identicon&r=PG&f=1", "display_name": "Deep", "link": "https://stackoverflow.com/users/9933832/deep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 389, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528899019, "creation_date": 1528897589, "last_edit_date": 1528897695, "question_id": 50838869, "link": "https://stackoverflow.com/questions/50838869/best-practice-when-dealing-with-c-inheritance", "title": "Best practice when dealing with C++ inheritance", "body": "<p>I would like to know in the below scenario, which practice would be right/ideal and if there are any other options I have.</p>\n\n<p>Assume I have a class being inherited from another class.</p>\n\n<pre><code>class A { };\n\nclass B : public A { };\n\nclass C : public A { };\n</code></pre>\n\n<p>I maintain a map of A pointers (base class). These are actually either derived class B or class C.</p>\n\n<p>Now, say I would like to do an operation x on one of the derived class pointers in the map. I see there are two ways of doing it.</p>\n\n<p>1] Typecast the base class into dervied class and do the operation on it. Is this a good practice ?</p>\n\n<p>2] Have a virtual function available in base class, so that you can do the operation without a typecast. The problem here I feel is that some of the methods might truly belong to the derived class, rather than with the base class. I mean, one method applicable to derived class B may not be applicable to derived class C. It makes me uncomfortable to have a pure virtual function on A. Having a pure virtual, is this a good practice ? Alternatively what can be done ? </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 2909, "user_id": 9691656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6944dacfe20c1ae8aa3cf5131b2cde3?s=128&d=identicon&r=PG&f=1", "display_name": "Tyker", "link": "https://stackoverflow.com/users/9691656/tyker"}, "edited": false, "score": 0, "creation_date": 1528897401, "post_id": 50838710, "comment_id": 88681324, "body": "having the same name for template parameters and struct is confusing"}, {"owner": {"reputation": 4038, "user_id": 2159939, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/d4Hlu.jpg?s=128&g=1", "display_name": "Ivan Smirnov", "link": "https://stackoverflow.com/users/2159939/ivan-smirnov"}, "edited": false, "score": 0, "creation_date": 1528897429, "post_id": 50838710, "comment_id": 88681344, "body": "I suggest reading about <a href=\"https://en.wikipedia.org/wiki/Curiously_recurring_template_pattern\" rel=\"nofollow noreferrer\">CRTP</a>. It doesn&#39;t solve the problem directly but still may help."}, {"owner": {"reputation": 1618, "user_id": 2604712, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/b9760d85f8c8319e665561fdc6db1feb?s=128&d=identicon&r=PG&f=1", "display_name": "jnbrq -Canberk S&#246;nmez", "link": "https://stackoverflow.com/users/2604712/jnbrq-canberk-s%c3%b6nmez"}, "reply_to_user": {"reputation": 2909, "user_id": 9691656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6944dacfe20c1ae8aa3cf5131b2cde3?s=128&d=identicon&r=PG&f=1", "display_name": "Tyker", "link": "https://stackoverflow.com/users/9691656/tyker"}, "edited": false, "score": 0, "creation_date": 1528897652, "post_id": 50838710, "comment_id": 88681491, "body": "@Tyker I fixed that"}, {"owner": {"reputation": 1618, "user_id": 2604712, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/b9760d85f8c8319e665561fdc6db1feb?s=128&d=identicon&r=PG&f=1", "display_name": "jnbrq -Canberk S&#246;nmez", "link": "https://stackoverflow.com/users/2604712/jnbrq-canberk-s%c3%b6nmez"}, "reply_to_user": {"reputation": 4038, "user_id": 2159939, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/d4Hlu.jpg?s=128&g=1", "display_name": "Ivan Smirnov", "link": "https://stackoverflow.com/users/2159939/ivan-smirnov"}, "edited": false, "score": 0, "creation_date": 1528897768, "post_id": 50838710, "comment_id": 88681563, "body": "@IvanSmirnov Thank you for your comment, I know about CRTP. I can change my design to use that and avoid this issue. However, I am curious if there is a fix in C++ regarding this."}, {"owner": {"reputation": 2909, "user_id": 9691656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6944dacfe20c1ae8aa3cf5131b2cde3?s=128&d=identicon&r=PG&f=1", "display_name": "Tyker", "link": "https://stackoverflow.com/users/9691656/tyker"}, "edited": false, "score": 1, "creation_date": 1528897902, "post_id": 50838710, "comment_id": 88681663, "body": "A or B aren&#39;t type they are template type so you would need a terminating type to terminate the recursive type and compiler have limits on the amont of recursive type the can so it won&#39;t be infinite but very high"}], "answers": [{"tags": [], "owner": {"reputation": 4038, "user_id": 2159939, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/d4Hlu.jpg?s=128&g=1", "display_name": "Ivan Smirnov", "link": "https://stackoverflow.com/users/2159939/ivan-smirnov"}, "is_accepted": true, "score": 5, "last_activity_date": 1528898262, "creation_date": 1528898262, "answer_id": 50839109, "question_id": 50838710, "link": "https://stackoverflow.com/questions/50838710/c-tightly-coupled-template-definitions-infinitely-recurring-template-paramete/50839109#50839109", "title": "c++ Tightly Coupled Template Definitions, Infinitely Recurring Template Parameters", "body": "<p>What about this?</p>\n\n<pre><code>template&lt;template&lt;typename&gt; class Bp&gt;\nstruct A;\n\ntemplate&lt;typename Ap&gt;\nstruct B;\n\ntemplate&lt;template&lt;typename&gt; class Bp&gt;\nstruct A {\n    Bp&lt;A&gt;&amp; b;\n    A(Bp&lt;A&gt;&amp; b_) : b(b_) {}\n};\n\ntemplate&lt;typename Ap&gt;\nstruct B {\n    Ap a;\n    B() : a{*this} {}\n};\n\nint main() {\n    B&lt;A&lt;B&gt;&gt; b;\n}\n</code></pre>\n"}], "owner": {"reputation": 1618, "user_id": 2604712, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/b9760d85f8c8319e665561fdc6db1feb?s=128&d=identicon&r=PG&f=1", "display_name": "jnbrq -Canberk S&#246;nmez", "link": "https://stackoverflow.com/users/2604712/jnbrq-canberk-s%c3%b6nmez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 2, "accepted_answer_id": 50839109, "answer_count": 1, "score": 4, "last_activity_date": 1528898262, "creation_date": 1528897135, "last_edit_date": 1528897630, "question_id": 50838710, "link": "https://stackoverflow.com/questions/50838710/c-tightly-coupled-template-definitions-infinitely-recurring-template-paramete", "title": "c++ Tightly Coupled Template Definitions, Infinitely Recurring Template Parameters", "body": "<p>Consider the following simple and usual case:</p>\n\n<pre><code>struct A;\nstruct B;\n\nstruct A {\n    B &amp;b;\n    A(B &amp;b_): b{b_} {\n    }\n};\n\nstruct B {\n    A a;\n    B(): a{*this} {\n    }\n};\n\nint main() {\n    B b;\n    return 0;\n}\n</code></pre>\n\n<p>This coding pattern is used for tightly coupling a class to another via composition. Now, let's assume that I want to do this via templates. Consider the following:</p>\n\n<pre><code>template &lt;typename Bparam&gt;\nstruct A;\n\ntemplate &lt;typename Aparam&gt;\nstruct B;\n\ntemplate &lt;typename Bparam&gt;\nstruct A {\n    Bparam &amp;b;\n    A(Bparam &amp;b_): b{b_} {\n    }\n};\n\ntemplate &lt;typename Aparam&gt;\nstruct B {\n    Aparam a;\n    B(): a{*this} {\n    }\n};\n\nint main() {\n    B&lt;A&lt;B&gt;&gt; b; // infinitely many template parameters here ???\n    return 0;\n}\n</code></pre>\n\n<p>Is it possible to implement such a thing in C++?</p>\n"}, {"tags": ["c++", "memory", "stl", "containers", "unsafe"], "comments": [{"owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "edited": false, "score": 0, "creation_date": 1528984179, "post_id": 50838624, "comment_id": 88720771, "body": "There is difference between destruction and freeing. Also you should not block &quot;delete this;&quot; (that is legal <a href=\"https://isocpp.org/wiki/faq/freestore-mgmt#delete-this\" rel=\"nofollow noreferrer\">isocpp.org/wiki/faq/freestore-mgmt#delete-this</a>) but should block accessing stuff after destruction."}], "answers": [{"comments": [{"owner": {"reputation": 399, "user_id": 1209647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1e87a4510d64c86f2b3eda60f2a62bf?s=128&d=identicon&r=PG", "display_name": "Karsten Pedersen", "link": "https://stackoverflow.com/users/1209647/karsten-pedersen"}, "edited": false, "score": 0, "creation_date": 1528929402, "post_id": 50842752, "comment_id": 88697904, "body": "MemorySanitizer has some of the same issues as mudflap, ElectricFence and Valgrind in that it will not pick up this kind of invalid C++ because as far as memory and C goes, if you erase an element in a std::vector, it will not resize / realloc so the memory behind the std::vector has not been free&#39;d so as far as these tools is concerned, it is not a use after free. I need something more mechanical using some of the functionality of RAII."}, {"owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "reply_to_user": {"reputation": 399, "user_id": 1209647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1e87a4510d64c86f2b3eda60f2a62bf?s=128&d=identicon&r=PG", "display_name": "Karsten Pedersen", "link": "https://stackoverflow.com/users/1209647/karsten-pedersen"}, "edited": false, "score": 1, "creation_date": 1528961096, "post_id": 50842752, "comment_id": 88706259, "body": "When you erase element of vector then its destructor is ran and so the object is poisoned by MemorySanitizer and so the issue you described is caught. May be you did not use Clang option -fsanitize-memory-use-after-dtor or you did not set environment variable MSAN_OPTIONS=poison_in_dtor=1 before running the program."}, {"owner": {"reputation": 399, "user_id": 1209647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1e87a4510d64c86f2b3eda60f2a62bf?s=128&d=identicon&r=PG", "display_name": "Karsten Pedersen", "link": "https://stackoverflow.com/users/1209647/karsten-pedersen"}, "edited": false, "score": 0, "creation_date": 1528966395, "post_id": 50842752, "comment_id": 88709520, "body": "-fsanitize-memory-use-after-dtor looks like a very useful feature. I am not in the position to switch to clang from gcc just yet but I will keep that one in mind. I am assuming that if the memory is poisoned but then reallocated later on by the runtime, this still wont trigger an error? It looks mostly robust though."}, {"owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "reply_to_user": {"reputation": 399, "user_id": 1209647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1e87a4510d64c86f2b3eda60f2a62bf?s=128&d=identicon&r=PG", "display_name": "Karsten Pedersen", "link": "https://stackoverflow.com/users/1209647/karsten-pedersen"}, "edited": false, "score": 0, "creation_date": 1528984507, "post_id": 50842752, "comment_id": 88720967, "body": "I am usually setting tests to compile with several versions of different compilers. It may be end product is to be delivered compiled with icc but it is still useful to see during production what gcc, clang and msvc think of it."}, {"owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "reply_to_user": {"reputation": 399, "user_id": 1209647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1e87a4510d64c86f2b3eda60f2a62bf?s=128&d=identicon&r=PG", "display_name": "Karsten Pedersen", "link": "https://stackoverflow.com/users/1209647/karsten-pedersen"}, "edited": false, "score": 0, "creation_date": 1528984753, "post_id": 50842752, "comment_id": 88721139, "body": "All tools (including MemorySanitizer) may give false positives but then often something too clever is going on. If it did confuse a tool then it surely will confuse next maintainer of it as well."}], "tags": [], "owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "is_accepted": false, "score": 3, "last_activity_date": 1528962232, "last_edit_date": 1528962232, "creation_date": 1528909763, "answer_id": 50842752, "question_id": 50838624, "link": "https://stackoverflow.com/questions/50838624/prevent-or-detect-this-from-being-deleted-during-use/50842752#50842752", "title": "Prevent or detect &quot;this&quot; from being deleted during use", "body": "<p>Easiest way is to run your unit tests with <a href=\"https://clang.llvm.org/docs/MemorySanitizer.html\" rel=\"nofollow noreferrer\">Clang MemorySanitizer</a> linked in. \nLet some continuous-integration Linux box to do it automatically on each push\ninto repo.</p>\n\n<p>MemorySanitizer has \"Use-after-destruction detection\" (flag <code>-fsanitize-memory-use-after-dtor</code> + environment variable <code>MSAN_OPTIONS=poison_in_dtor=1</code>) and so it will blow the test up that executes the code and that turns your continuous-integration red.</p>\n\n<p>If you have neither unit tests nor continuous integration in place then you can also just manually debug your code with MemorySanitizer but that is hard way compared with the easiest. So better start to use continuous integration and write unit tests.</p>\n\n<p>Note that there may be legitimate reasons of memory reads and writes after destructor has been ran but memory hasn't yet been freed. For example  <code>std::variant&lt;std::string,double&gt;</code>. It lets us to assign it <code>std::string</code> then <code>double</code> and so its implementation might destroy the <code>string</code> and reuse same storage for <code>double</code>. Filtering such cases out is unfortunately manual work at the moment, but tools evolve.</p>\n"}, {"comments": [{"owner": {"reputation": 3193, "user_id": 6608866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/395a0bd6f09706e701866702448c5924?s=128&d=identicon&r=PG&f=1", "display_name": "PaulR", "link": "https://stackoverflow.com/users/6608866/paulr"}, "edited": false, "score": 1, "creation_date": 1528987624, "post_id": 50847381, "comment_id": 88723016, "body": "Did you know about the debug mode of libstdc++? It is enabled by passing -D_GLIBCXX_DEBUG to the command line and adds expensive extra checking. AFAIK Visual studio perfors a few extra checks on iterators in debug mode as well. <a href=\"https://gcc.gnu.org/onlinedocs/libstdc++/manual/debug_mode.html\" rel=\"nofollow noreferrer\">gcc.gnu.org/onlinedocs/libstdc++/manual/debug_mode.html</a> It would be interesting if it catches as many bugs as your implementation (it looks like it checks iterator accesses, but does not flag the clear() itself. <a href=\"https://wandbox.org/permlink/MXz9vzXMa7guktJJ\" rel=\"nofollow noreferrer\">wandbox.org/permlink/MXz9vzXMa7guktJJ</a>"}], "tags": [], "owner": {"reputation": 399, "user_id": 1209647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1e87a4510d64c86f2b3eda60f2a62bf?s=128&d=identicon&r=PG", "display_name": "Karsten Pedersen", "link": "https://stackoverflow.com/users/1209647/karsten-pedersen"}, "is_accepted": false, "score": 0, "last_activity_date": 1528967050, "last_edit_date": 1528967050, "creation_date": 1528930198, "answer_id": 50847381, "question_id": 50838624, "link": "https://stackoverflow.com/questions/50838624/prevent-or-detect-this-from-being-deleted-during-use/50847381#50847381", "title": "Prevent or detect &quot;this&quot; from being deleted during use", "body": "<p>In the end I went with a custom iterator that if the owner std::vector resizes whilst the iterator is still in scope, it will log an error or abort (giving me a stacktrace of the program). This example is a bit convoluted but I have tried to simplify it as much as possible and removed unused functionality from the iterator.</p>\n\n<p>This system has flagged up about 50 errors of this nature. Some may be repeats. However Valgrind and ElecricFence at this point came up clean which is disappointing (In total they flagged up around 10 which I have already fixed since the start of the code cleanup).</p>\n\n<p>In this example I use <strong>clear()</strong> which Valgrind does flag as an error. However in the actual codebase it is random access erases (i.e <strong>vec.erase(vec.begin() + 9)</strong>) which I need to check and Valgrind unfortunately misses quite a few.</p>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>#include \"sstd_vector.h\"\n\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;memory&gt;\n\nclass Bomb;\n\nsstd::vector&lt;std::shared_ptr&lt;Bomb&gt; &gt; bombs;\n\nclass Bomb\n{\n  std::string name;\n\npublic:\n  Bomb(std::string name)\n  {\n    this-&gt;name = name;\n  }\n\n  void touch()\n  {\n    if(rand() % 100 &gt; 30)\n    {\n      /* Simulate everything being exploded! */\n      bombs.clear(); // Causes an ABORT\n\n      std::cout &lt;&lt; \"Crickey! The bomb was set off by \" &lt;&lt; name &lt;&lt; std::endl;\n    }\n  }\n};\n\nint main()\n{\n  bombs.push_back(std::make_shared&lt;Bomb&gt;(\"Freddy\"));\n  bombs.push_back(std::make_shared&lt;Bomb&gt;(\"Charlie\"));\n  bombs.push_back(std::make_shared&lt;Bomb&gt;(\"Teddy\"));\n  bombs.push_back(std::make_shared&lt;Bomb&gt;(\"Trudy\"));\n\n  /* The key part is the lifetime of the iterator. If the vector\n   * changes during the lifetime of the iterator, even if it did\n   * not reallocate, an error will be logged */\n  for(sstd::vector&lt;std::shared_ptr&lt;Bomb&gt; &gt;::iterator it = bombs.begin(); it != bombs.end(); it++)\n  {\n    it-&gt;get()-&gt;touch();\n  }\n\n  return 0;\n}\n</code></pre>\n\n<p><strong>sstd_vector.h</strong></p>\n\n<pre><code>#include &lt;vector&gt;\n\n#include &lt;stdlib.h&gt;\n\nnamespace sstd\n{\n\ntemplate &lt;typename T&gt;\nclass vector\n{\n  std::vector&lt;T&gt; data;\n  size_t refs;\n\n  void check_valid()\n  {\n    if(refs &gt; 0)\n    {\n      /* Report an error or abort */\n      abort();\n    }\n  }\n\npublic:\n  vector() : refs(0) { }\n\n  ~vector()\n  {\n    check_valid();\n  }\n\n  vector&amp; operator=(vector const&amp; other)\n  {\n    check_valid();\n    data = other.data;\n\n    return *this;\n  }\n\n  void push_back(T val)\n  {\n    check_valid();\n    data.push_back(val);\n  }\n\n  void clear()\n  {\n    check_valid();\n    data.clear();\n  }\n\n  class iterator\n  {\n    friend class vector;\n\n    typename std::vector&lt;T&gt;::iterator it;\n    vector&lt;T&gt;* parent;\n\n    iterator() { }\n    iterator&amp; operator=(iterator const&amp;) { abort(); }\n\n  public:\n    iterator(iterator const&amp; other)\n    {\n      it = other.it;\n      parent = other.parent;\n      parent-&gt;refs++;\n    }\n\n    ~iterator()\n    {\n      parent-&gt;refs--;\n    }\n\n    bool operator !=(iterator const&amp; other)\n    {\n      if(it != other.it) return true;\n      if(parent != other.parent) return true;\n\n      return false;\n    }\n\n    iterator operator ++(int val)\n    {\n      iterator rtn = *this;\n      it ++;\n\n      return rtn;\n    }\n\n    T* operator -&gt;()\n    {\n      return &amp;(*it);\n    }\n\n    T&amp; operator *()\n    {\n      return *it;\n    }\n  };\n\n  iterator begin()\n  {\n    iterator rtn;\n\n    rtn.it = data.begin();\n    rtn.parent = this;\n    refs++;\n\n    return rtn;\n  }\n\n  iterator end()\n  {\n    iterator rtn;\n\n    rtn.it = data.end();\n    rtn.parent = this;\n    refs++;\n\n    return rtn;\n  }\n};\n\n}\n</code></pre>\n\n<p>The disadvantages of this system is that I must use an iterator rather than <strong>.at(idx)</strong> or <strong>[idx]</strong>. I personally don't mind this one so much. I can still use <strong>.begin() + idx</strong> if random access is needed.</p>\n\n<p>It is a little bit slower (nothing compared to Valgrind though). When I am done, I can do a search / replace of <strong>sstd::vector</strong> with <strong>std::vector</strong> and there should be no performance drop.</p>\n"}, {"comments": [{"owner": {"reputation": 399, "user_id": 1209647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1e87a4510d64c86f2b3eda60f2a62bf?s=128&d=identicon&r=PG", "display_name": "Karsten Pedersen", "link": "https://stackoverflow.com/users/1209647/karsten-pedersen"}, "edited": false, "score": 0, "creation_date": 1528966481, "post_id": 50847815, "comment_id": 88709573, "body": "This idea has crossed my mind and if this was a C (not C++) program I would very likely be attempting it in this very way. What I am doing instead with a custom iterator (I added the code just under this answer) is actually pretty much your same idea. The reference is incremented as it is created and decremented by RAII as it goes out of scope. If the vector resizes and the reference count &gt; 0, it will abort/log. The only place it differs is that it doesn&#39;t detect individual objects lifetimes and works on the vector as a whole."}, {"owner": {"reputation": 399, "user_id": 1209647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1e87a4510d64c86f2b3eda60f2a62bf?s=128&d=identicon&r=PG", "display_name": "Karsten Pedersen", "link": "https://stackoverflow.com/users/1209647/karsten-pedersen"}, "edited": false, "score": 0, "creation_date": 1528967199, "post_id": 50847815, "comment_id": 88710063, "body": "I&#39;m going to mark your solution as the answer. My iterator idea basically just makes this system an automatic process. I think the custom iterator could be made thread-safe too (apply a mutex around the inc/dec of the reference)."}, {"owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "edited": false, "score": 0, "creation_date": 1528983963, "post_id": 50847815, "comment_id": 88720637, "body": "Note that it is hard to imagine anyone giving budget for such manual instrumentation of all classes in a semi-decent code base."}], "tags": [], "owner": {"reputation": 4966, "user_id": 9883438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e9176c9238126b88b11234a86f45cbe?s=128&d=identicon&r=PG&f=1", "display_name": "sebrockm", "link": "https://stackoverflow.com/users/9883438/sebrockm"}, "is_accepted": true, "score": 1, "last_activity_date": 1528934034, "creation_date": 1528934034, "answer_id": 50847815, "question_id": 50838624, "link": "https://stackoverflow.com/questions/50838624/prevent-or-detect-this-from-being-deleted-during-use/50847815#50847815", "title": "Prevent or detect &quot;this&quot; from being deleted during use", "body": "<p>In your particular example the misery boils down to no less than two design flaws:</p>\n\n<ol>\n<li>Your vector is a global variable. Limit the scope of all of your objects as much as possible and issues like this are less likely to occur.</li>\n<li>Having the <em>single responsibility principle</em> in mind, I can hardly imagine how one could come up with a class that <em>needs</em> to have some method that either directly or indirectly (maybe through 100 layers of call stack) deletes objects that could happen to be <code>this</code>.</li>\n</ol>\n\n<p>I am aware that your example is artificial and intentionally bad, so please don't get me wrong here: I'm sure that in your actual case it is not so obvious how sticking to some basic design rules can prevent you from doing this. But as I said, I strongly believe that good design will reduce the likelyhood of such bugs coming up. And in fact, I cannot remember that I was ever facing such an issue, but maybe I am just not experienced enough :)</p>\n\n<p>However, if this really keeps being an issue despite sticking with some design rules, then I have this idea how to detect it:</p>\n\n<ol>\n<li>Create a member <code>int recursionDepth</code> in your class and initialize it with <code>0</code></li>\n<li>At the beginning of each non-private method increment it.</li>\n<li>Use RAII to make sure that at the end of each method it is decremented again</li>\n<li>In the destructor check it to be <code>0</code>, otherwise it means that the destructor is directly or indirectly called by some method of <code>this</code>.</li>\n<li>You may want to <code>#ifdef</code> all of this and enable it only in debug build. This would essentially make it a debug assertion, some people like them :)</li>\n</ol>\n\n<p>Note, that this does not work in a multi threaded environment.</p>\n"}], "owner": {"reputation": 399, "user_id": 1209647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1e87a4510d64c86f2b3eda60f2a62bf?s=128&d=identicon&r=PG", "display_name": "Karsten Pedersen", "link": "https://stackoverflow.com/users/1209647/karsten-pedersen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 1, "accepted_answer_id": 50847815, "answer_count": 3, "score": 2, "last_activity_date": 1528967050, "creation_date": 1528896881, "last_edit_date": 1528899092, "question_id": 50838624, "link": "https://stackoverflow.com/questions/50838624/prevent-or-detect-this-from-being-deleted-during-use", "title": "Prevent or detect &quot;this&quot; from being deleted during use", "body": "<p>One error that I often see is a container being cleared whilst iterating through it. I have attempted to put together a small example program demonstrating this happening. One thing to note is that this can often happen many function calls deep so is quite hard to detect.</p>\n\n<p>Note: This example deliberately shows some poorly designed code. I am trying to find a solution to detect the errors caused by writing code such as this without having to meticulously examine an entire codebase (~500 C++ units)</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\nclass Bomb;\n\nstd::vector&lt;Bomb&gt; bombs;\n\nclass Bomb\n{\n  std::string name;\n\npublic:\n  Bomb(std::string name)\n  {\n    this-&gt;name = name;\n  }\n\n  void touch()\n  {\n    if(rand() % 100 &gt; 30)\n    {\n      /* Simulate everything being exploded! */\n      bombs.clear();\n\n      /* An error: \"this\" is no longer valid */\n      std::cout &lt;&lt; \"Crickey! The bomb was set off by \" &lt;&lt; name &lt;&lt; std::endl;\n    }\n  }\n};\n\nint main()\n{\n  bombs.push_back(Bomb(\"Freddy\"));\n  bombs.push_back(Bomb(\"Charlie\"));\n  bombs.push_back(Bomb(\"Teddy\"));\n  bombs.push_back(Bomb(\"Trudy\"));\n\n  for(size_t i = 0; i &lt; bombs.size(); i++)\n  {\n    bombs.at(i).touch();\n  }\n\n  return 0;\n}\n</code></pre>\n\n<p>Can anyone suggest a way of guaranteeing this cannot happen?\nThe only way I can currently detect this kind of thing is replacing the global <strong>new</strong> and <strong>delete</strong> with <strong>mmap</strong> / <strong>mprotect</strong> and detecting use after free memory accesses. This and Valgrind however sometimes fail to pick it up if the vector does not need to reallocate (i.e only some elements removed or the new size is not yet the reserve size). Ideally I don't want to have to clone much of the STL to make a version of std::vector that always reallocates every insertion/deletion during debug / testing.</p>\n\n<p>One way that almost works is if the <strong>std::vector</strong> instead contains <strong>std::weak_ptr</strong>, then the usage of <strong>.lock()</strong> to create a temporary reference prevents its deletion whilst execution is within the classes method. However this cannot work with <strong>std::shared_ptr</strong> because you do not need <strong>lock()</strong> and same with plain objects. Creating a container of weak pointers just for this would be wasteful.</p>\n\n<p>Can anyone else think of a way to protect ourselves from this.</p>\n"}, {"tags": ["c++", "tuples", "c++17"], "answers": [{"tags": [], "owner": {"reputation": 1686, "user_id": 2615118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c15506113bb2e6d1ebf17502d71a1c?s=128&d=identicon&r=PG", "display_name": "Julius", "link": "https://stackoverflow.com/users/2615118/julius"}, "is_accepted": true, "score": 2, "last_activity_date": 1528903013, "creation_date": 1528903013, "answer_id": 50840774, "question_id": 50838621, "link": "https://stackoverflow.com/questions/50838621/check-if-one-set-of-types-is-subsets-with-composition/50840774#50840774", "title": "Check if one set of types is subsets with composition", "body": "<p>You can \"flatten\" the nested tuples if you are not interested in the structure of tuple nesting. This would imply</p>\n\n<pre><code>int main() {\n  using t1 = std::tuple&lt;int, double&gt;;\n  using t2 = std::tuple&lt;double, int&gt;;\n  using t3 = std::tuple&lt;t1, t2&gt;;\n\n  static_assert(\n    std::is_same&lt;\n      flatten&lt;t3&gt;,\n      std::tuple&lt;int, double, double, int&gt;\n    &gt;{}\n  );\n\n  static_assert(false == is_subset_of&lt;t1, t3&gt;);\n  static_assert(true == is_subset_of&lt; t1, flatten&lt;t3&gt; &gt;);\n\n  return 0;\n}\n</code></pre>\n\n<p>A quick-and-dirty implementation of <code>flatten</code> could look like the following.</p>\n\n<pre><code>namespace detail {\n\ntemplate&lt;class... Ts&gt;\nstruct flatten {\n  static_assert(sizeof...(Ts) == 0, \"recursion break (see specializations)\");\n\n  template&lt;class... Result&gt;// flattened types are accumulated in this pack\n  using type = std::tuple&lt;Result...&gt;;\n};\n\ntemplate&lt;template&lt;class...&gt; class Nester, class... Nested, class... Ts&gt;\nstruct flatten&lt;Nester&lt;Nested...&gt;, Ts...&gt; {// if first arg is nested then unpack\n  template&lt;class... Result&gt;\n  using type = typename flatten&lt;Nested..., Ts...&gt;::template type&lt;Result...&gt;;\n};\n\ntemplate&lt;class T0, class... Ts&gt;\nstruct flatten&lt;T0, Ts...&gt; {// if `T0` is flat then just append it to `Result...`\n  template&lt;class... Result&gt;\n  using type = typename flatten&lt;Ts...&gt;::template type&lt;Result..., T0&gt;;\n};\n\n};// detail\n\ntemplate&lt;class... Ts&gt;\nusing flatten = typename detail::flatten&lt;Ts...&gt;::template type&lt;&gt;;\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 5811300, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-FKKdCCDC6tY/AAAAAAAAAAI/AAAAAAAAFE4/F9-Iuyn1rFM/photo.jpg?sz=128", "display_name": "coder", "link": "https://stackoverflow.com/users/5811300/coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 50840774, "answer_count": 1, "score": 0, "last_activity_date": 1528903013, "creation_date": 1528896871, "question_id": 50838621, "link": "https://stackoverflow.com/questions/50838621/check-if-one-set-of-types-is-subsets-with-composition", "title": "Check if one set of types is subsets with composition", "body": "<p>I have to check if given two tuples one is the subset of another. I found this elegant solution <a href=\"https://stackoverflow.com/questions/42580997/check-if-one-set-of-types-is-a-subset-of-the-other\">Check if one set of types is a subset of the other</a>. </p>\n\n<p>But the issue with this solution is that it does not consider subtypes for example </p>\n\n<pre><code>using t1 = std::tuple&lt;int, double&gt;;\nusing t2 = std::tuple&lt;double, int&gt;;\nusing t3 = std::tuple&lt;t1, t2&gt;;\n</code></pre>\n\n<p>This would fail the subset test. </p>\n\n<pre><code>#include &lt;tuple&gt;\n#include &lt;type_traits&gt;\n\ntemplate &lt;typename T, typename... Ts&gt;\nconstexpr bool contains = (std::is_same&lt;T, Ts&gt;{} || ...);\n\ntemplate &lt;typename Subset, typename Set&gt;\nconstexpr bool is_subset_of = false;\n\ntemplate &lt;typename... Ts, typename... Us&gt;\nconstexpr bool is_subset_of&lt;std::tuple&lt;Ts...&gt;, std::tuple&lt;Us...&gt;&gt;\n       = (contains&lt;Ts, Us...&gt; &amp;&amp; ...);\n</code></pre>\n\n<p>The reason being that if we do subset on t1 and t3, the contains expression compares int with t1 which fails. So the change needed is for contains function to search subtypes.</p>\n\n<p>P.S This code would only work in C++17</p>\n"}, {"tags": ["c++", "lzw"], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 7306594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19b434ffa2e019aa5b80620a56bc968a?s=128&d=identicon&r=PG&f=1", "display_name": "Haza", "link": "https://stackoverflow.com/users/7306594/haza"}, "edited": false, "score": 0, "creation_date": 1528903922, "post_id": 50838846, "comment_id": 88685759, "body": "what i meant by nodes it&#39;s some kind of binary tree i saw some people use it (in C ) to see if a string is already in the dictionary . Thank you for answering my question ."}], "tags": [], "owner": {"reputation": 2933, "user_id": 3291022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z6iSB.jpg?s=128&g=1", "display_name": "Alexey Voytenko", "link": "https://stackoverflow.com/users/3291022/alexey-voytenko"}, "is_accepted": true, "score": 2, "last_activity_date": 1528897532, "creation_date": 1528897532, "answer_id": 50838846, "question_id": 50838393, "link": "https://stackoverflow.com/questions/50838393/lzw-c-simple-implementation/50838846#50838846", "title": "LZW C++ Simple Implementation", "body": "<p>The answers follow from the algorithm, the description can be taken, for instance, <a href=\"https://www2.cs.duke.edu/csed/curious/compression/lzw.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>1) You need constantly check, if the input string is already present. You do not need order of the strings as std::map provides, you can use std::unordered_map which uses hash and is more efficient.</p>\n\n<p>2) You can use string / unsigned int, as index is > 0.</p>\n\n<p>3) Yes, from the algorithm description initial dictionary is 256 ASCII chars.</p>\n\n<p>4) What do you mean by \"nodes\"?</p>\n\n<p>Try to implement what is described in the article. The sample provided can be a unit test. </p>\n"}], "owner": {"reputation": 87, "user_id": 7306594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19b434ffa2e019aa5b80620a56bc968a?s=128&d=identicon&r=PG&f=1", "display_name": "Haza", "link": "https://stackoverflow.com/users/7306594/haza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1158, "favorite_count": 0, "accepted_answer_id": 50838846, "answer_count": 1, "score": 0, "last_activity_date": 1528897532, "creation_date": 1528896189, "question_id": 50838393, "link": "https://stackoverflow.com/questions/50838393/lzw-c-simple-implementation", "title": "LZW C++ Simple Implementation", "body": "<p>so I'm trying to make a simple file compressor / decompressor in C++ (I'm not aiming for the best result possible) but I'm really stuck because I'm full of question so here they are :</p>\n\n<p>What kind of dictionary should I use (i'm using map) ?\nWhat kind of Data should i store (i'm using String/int as key/value ) ?\nShould I initialize the dictionary with ASCII in it ? \nI saw some people uses nodes is it a god way to do it is it hard  ?</p>\n\n<p>Here's the code so far this isnt much :</p>\n\n<pre><code>#define MAX = 1024 //2^10 Where the dictionary reset \n\nint main(int argc, char *argv[]){\n    ifstream in(argv[2], ios_base::binary);\n    ofstream of(argv[3], ios_base::binary);\n    string str ;\n    char c;\n    int i;\n\n    if (string(argv[1]) == \"-c\" ){\n        map&lt;string,int&gt; Dic;\n        while (in.get(c))\n        {   \n        }\n        in.close();\n    }\n}\n</code></pre>\n\n<p>Any comment on the code is welcome ! </p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1528896265, "post_id": 50838368, "comment_id": 88680553, "body": "Take a look here: <code>std::remove(vector_t.begin(), vector_t.end(), i)</code>. The last argument needs to be <code>hello</code> not <code>unsigned int</code>."}, {"owner": {"reputation": 9804, "user_id": 1332041, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/871cd231304bb5650f381016cac34d8f?s=128&d=identicon&r=PG", "display_name": "acraig5075", "link": "https://stackoverflow.com/users/1332041/acraig5075"}, "edited": false, "score": 1, "creation_date": 1528896268, "post_id": 50838368, "comment_id": 88680557, "body": "Third param <code>i</code> of <code>remove</code> needs to be of type <code>hello</code>"}, {"owner": {"reputation": 381, "user_id": 9629245, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UIobdmipCvQ/AAAAAAAAAAI/AAAAAAAAACQ/HnSiJyeFkHE/photo.jpg?sz=128", "display_name": "Zeeshan Hayat", "link": "https://stackoverflow.com/users/9629245/zeeshan-hayat"}, "reply_to_user": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1528896432, "post_id": 50838368, "comment_id": 88680673, "body": "@DimChtz This gives the following error: <code>&#39;hello&#39;: illegal use of this type as an expression vector_test</code>"}, {"owner": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 2, "creation_date": 1528896467, "post_id": 50838368, "comment_id": 88680700, "body": "what do you want to acheive? delete a range of elements? or a single element?"}, {"owner": {"reputation": 381, "user_id": 9629245, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UIobdmipCvQ/AAAAAAAAAAI/AAAAAAAAACQ/HnSiJyeFkHE/photo.jpg?sz=128", "display_name": "Zeeshan Hayat", "link": "https://stackoverflow.com/users/9629245/zeeshan-hayat"}, "reply_to_user": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 0, "creation_date": 1528896539, "post_id": 50838368, "comment_id": 88680755, "body": "@SamerTufail it is very clear in the heading: to remove the vector elements by value."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1528896721, "post_id": 50838368, "comment_id": 88680868, "body": "It&#39;s a reasonable question, since your <code>i</code> looks like a <i>position</i> (it iterates over the vector indices) rather than a value (it isn&#39;t comparable or convertible to a <code>hello</code>)."}, {"owner": {"reputation": 754, "user_id": 8402500, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/XZRs6.jpg?s=128&g=1", "display_name": "G.Alexander", "link": "https://stackoverflow.com/users/8402500/g-alexander"}, "edited": false, "score": 0, "creation_date": 1528896769, "post_id": 50838368, "comment_id": 88680908, "body": "@Zeeshan Hayat Use this code : <code>vector_t.erase(vector_t.begin() + i);</code>"}, {"owner": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 0, "creation_date": 1528896771, "post_id": 50838368, "comment_id": 88680909, "body": "@ZeeshanHayat it is from the heading but from your code it looks like you are trying to delete a range of elements."}], "answers": [{"tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": false, "score": 3, "last_activity_date": 1528896302, "creation_date": 1528896302, "answer_id": 50838429, "question_id": 50838368, "link": "https://stackoverflow.com/questions/50838368/c-removing-element-by-value-of-custom-data-type-vector/50838429#50838429", "title": "C++ - Removing element by value of custom data type vector", "body": "<p><code>remove</code> tries to find all elements that <em>compare equal</em> to whatever you passed to it. If you do not tell the compiler how to compare <code>hello</code> objects with the integer <code>i</code> value, it cannot do that.</p>\n\n<p>What you probably wanted to do was to just remove the i-th element of the vector if it satisfies your criterion:</p>\n\n<pre><code>for (unsigned int i = 0; i &lt; vector_t.size(); i++)\n{\n    if (vector_t[i].x)\n    {\n        vector_t.erase(vector_t.begin() + i);\n        --i; // The next element is now at position i, don't forget it!\n    }\n}\n</code></pre>\n\n<p>The most idiomatic way would be using <code>std::remove_if</code> as shown in acgraig5075's answer.</p>\n"}, {"comments": [{"owner": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 0, "creation_date": 1528896591, "post_id": 50838464, "comment_id": 88680786, "body": "This renders the <code>if(vector_t[i].x)</code> redundant."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 1, "creation_date": 1528896637, "post_id": 50838464, "comment_id": 88680802, "body": "@SamerTufail yes, this replaces the whole loop"}, {"owner": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 0, "creation_date": 1528896667, "post_id": 50838464, "comment_id": 88680825, "body": "Yea I know but just thought you would let the OP know, it would do that. (:"}, {"owner": {"reputation": 381, "user_id": 9629245, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UIobdmipCvQ/AAAAAAAAAAI/AAAAAAAAACQ/HnSiJyeFkHE/photo.jpg?sz=128", "display_name": "Zeeshan Hayat", "link": "https://stackoverflow.com/users/9629245/zeeshan-hayat"}, "edited": false, "score": 0, "creation_date": 1528898531, "post_id": 50838464, "comment_id": 88682113, "body": "@acraig5075 very elegant solution, Thanks :)"}, {"owner": {"reputation": 118, "user_id": 9426480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M5xOC.jpg?s=128&g=1", "display_name": "vcloarec", "link": "https://stackoverflow.com/users/9426480/vcloarec"}, "edited": false, "score": 0, "creation_date": 1528900579, "post_id": 50838464, "comment_id": 88683554, "body": "Anybody can explain me why using only <code>remove-if</code> is not adequate to delete the element by value. <code>vector_t.erase(...,vector_t.end())</code> will not erase all the elements until the end of the vector whatever their value ?"}, {"owner": {"reputation": 118, "user_id": 9426480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M5xOC.jpg?s=128&g=1", "display_name": "vcloarec", "link": "https://stackoverflow.com/users/9426480/vcloarec"}, "edited": false, "score": 1, "creation_date": 1528901939, "post_id": 50838464, "comment_id": 88684507, "body": "@acraig5075, thanks, the next time i would read better the documentation that confirm how remove_if works"}], "tags": [], "owner": {"reputation": 9804, "user_id": 1332041, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/871cd231304bb5650f381016cac34d8f?s=128&d=identicon&r=PG", "display_name": "acraig5075", "link": "https://stackoverflow.com/users/1332041/acraig5075"}, "is_accepted": true, "score": 4, "last_activity_date": 1528896701, "last_edit_date": 1528896701, "creation_date": 1528896400, "answer_id": 50838464, "question_id": 50838368, "link": "https://stackoverflow.com/questions/50838368/c-removing-element-by-value-of-custom-data-type-vector/50838464#50838464", "title": "C++ - Removing element by value of custom data type vector", "body": "<p>Looks like you want to rather use <a href=\"http://en.cppreference.com/w/cpp/algorithm/remove\" rel=\"nofollow noreferrer\"><code>remove_if</code></a> where the <code>.x</code> member is true.</p>\n\n<pre><code>vector_t.erase(std::remove_if(vector_t.begin(), vector_t.end(), [](const hello &amp;h) { return h.x; }), vector_t.end());\n</code></pre>\n\n<p>The <code>for</code> loop and <code>if</code> condition aren't necessary, they're not needed this way.</p>\n"}, {"comments": [{"owner": {"reputation": 381, "user_id": 9629245, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UIobdmipCvQ/AAAAAAAAAAI/AAAAAAAAACQ/HnSiJyeFkHE/photo.jpg?sz=128", "display_name": "Zeeshan Hayat", "link": "https://stackoverflow.com/users/9629245/zeeshan-hayat"}, "edited": false, "score": 0, "creation_date": 1528897642, "post_id": 50838708, "comment_id": 88681486, "body": "== operator overloading requires two arguments, isn&#39;t?"}, {"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "reply_to_user": {"reputation": 381, "user_id": 9629245, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UIobdmipCvQ/AAAAAAAAAAI/AAAAAAAAACQ/HnSiJyeFkHE/photo.jpg?sz=128", "display_name": "Zeeshan Hayat", "link": "https://stackoverflow.com/users/9629245/zeeshan-hayat"}, "edited": false, "score": 1, "creation_date": 1528897717, "post_id": 50838708, "comment_id": 88681528, "body": "@ZeeshanHayat Not always. This one is part of your class so it only needs another class as argument. Check the demo."}], "tags": [], "owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "is_accepted": false, "score": 3, "last_activity_date": 1528897651, "last_edit_date": 1528897651, "creation_date": 1528897132, "answer_id": 50838708, "question_id": 50838368, "link": "https://stackoverflow.com/questions/50838368/c-removing-element-by-value-of-custom-data-type-vector/50838708#50838708", "title": "C++ - Removing element by value of custom data type vector", "body": "<blockquote>\n  <p>It shows an error:</p>\n  \n  <p><code>binary '==': no operator found which takes a left-hand operand of type\n  'hello' (or there is no acceptable conversion) vector_test</code></p>\n</blockquote>\n\n<p>You can provide the obviously missing operator <code>==</code> for your class which will solve the issue:</p>\n\n<pre><code>bool operator==(hello const &amp;h)\n{\n    return this-&gt;x == h.x;\n} \n</code></pre>\n\n<p>Your remove/erase should look like this though:</p>\n\n<pre><code>vector_t.erase(std::remove(vector_t.begin(), vector_t.end(), vector_t[i]), vector_t.end());\n</code></pre>\n\n<p>Demo: <a href=\"https://ideone.com/E3aV76\" rel=\"nofollow noreferrer\">https://ideone.com/E3aV76</a></p>\n"}], "owner": {"reputation": 381, "user_id": 9629245, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UIobdmipCvQ/AAAAAAAAAAI/AAAAAAAAACQ/HnSiJyeFkHE/photo.jpg?sz=128", "display_name": "Zeeshan Hayat", "link": "https://stackoverflow.com/users/9629245/zeeshan-hayat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 50838464, "answer_count": 3, "score": 1, "last_activity_date": 1528897885, "creation_date": 1528896119, "last_edit_date": 1528897885, "question_id": 50838368, "link": "https://stackoverflow.com/questions/50838368/c-removing-element-by-value-of-custom-data-type-vector", "title": "C++ - Removing element by value of custom data type vector", "body": "<p>I am trying to delete vector element by value for custom data type vector. It works fine If I use the simple data type like <code>int</code> etc instead of <code>hello</code> data type. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n\nclass hello\n{\n\npublic:\n    hello() {\n        x = false;\n    }\n    bool x;\n};\n\nint main() {\n\n   hello f1;\n   hello f2;\n   hello f3;\n\n   std::vector &lt;hello&gt; vector_t;\n\n   vector_t.push_back(f1);\n   vector_t.push_back(f2);\n   vector_t.push_back(f3);\n\n   for (unsigned int i = 0; i &lt; vector_t.size(); i++)\n       {\n       if (vector_t[i].x)\n       {\n            vector_t.erase(std::remove(vector_t.begin(), vector_t.end(), i), vector_t.end());\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>It shows an error:</p>\n\n<blockquote>\n  <p>binary '==': no operator found which takes a left-hand operand of type 'hello' (or there is no acceptable conversion) vector_test</p>\n</blockquote>\n"}]