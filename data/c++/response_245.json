[{"tags": ["c++", "c", "error-handling", "shared-libraries", "terminate"], "comments": [{"owner": {"reputation": 1873, "user_id": 765294, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/99UFa.jpg?s=128&g=1", "display_name": "Will", "link": "https://stackoverflow.com/users/765294/will"}, "edited": false, "score": 0, "creation_date": 1568850983, "post_id": 58002026, "comment_id": 102409678, "body": "BTW, I guess it might seem like I&#39;m just trying to win some petty argument on the internet, but I really am just as happy to be shown to be wrong here\u2014because that would mean I get to learn something valuable at least."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1568986241, "post_id": 58002026, "comment_id": 102461067, "body": "no rule should be if there was not be an exception for it.  Try to think a little on the subject and you&#39;ll see cases in which even both approaches are equally valid.  Anyway, if you write a general purpose library, then you have no knowledge of what the calling software is about to require... so the statement should be, at least, considered true."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1568986483, "post_id": 58002026, "comment_id": 102461207, "body": "When I was young, there was a similar statement saying <i>&quot;Goto&#39;s are bad&quot;</i>, but <code>goto</code> keyword has never dissapeared from those languages that incorporated them.   So some unextremism can always be considered a good startting point."}], "answers": [{"tags": [], "owner": {"reputation": 11934, "user_id": 54606, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e7de961282b156410426c657342ef466?s=128&d=identicon&r=PG", "display_name": "Lo&#239;c Faure-Lacroix", "link": "https://stackoverflow.com/users/54606/lo%c3%afc-faure-lacroix"}, "is_accepted": true, "score": 1, "last_activity_date": 1568865150, "last_edit_date": 1568865150, "creation_date": 1568864757, "answer_id": 58003455, "question_id": 58002026, "link": "https://stackoverflow.com/questions/58002026/is-it-always-wrong-to-terminate-the-calling-program-e-g-call-exit-from-a-l/58003455#58003455", "title": "Is it always wrong to terminate the calling program (e.g., call exit()) from a library when an error/exception could be returned instead?", "body": "<p>This kind of question is difficult to answer because there isn't a 1 size fits all.</p>\n\n<p>The first issue that could arise if a plugin/library prematurely exit a program is that it will stop the program before any kind of cleanup can be done by a program closing normally. So if a program doesn't use hooks like atexit, on_exit. It's quite possible that the program will close in an undetermined state.</p>\n\n<blockquote>\n  <p>All functions registered with atexit(3) and on_exit(3) are called, in\n         the reverse order of their registration.  (It is possible for one of\n         these functions to use atexit(3) or on_exit(3) to register an\n         additional function to be executed during exit processing; the new\n         registration is added to the front of the list of functions that\n         remain to be called.)  If one of these functions does not return\n         (e.g., it calls _exit(2), or kills itself with a signal), then none\n         of the remaining functions is called, and further exit processing (in\n         particular, flushing of stdio(3) streams) is abandoned.  If a\n         function has been registered multiple times using atexit(3) or\n         on_exit(3), then it is called as many times as it was registered.</p>\n</blockquote>\n\n<p><a href=\"http://man7.org/linux/man-pages/man3/exit.3.html\" rel=\"nofollow noreferrer\">http://man7.org/linux/man-pages/man3/exit.3.html</a></p>\n\n<p>The other problem would be that some program rely on some particular exit codes so if the program exit with <code>exit(0)</code> it has to exit because the program ended normally otherwise it should use some kind of exit code that make sense to the program.</p>\n\n<p>If the program implement correctly exiting callbacks, it wouldn't be terrible to use exit directly assuming that the program can do the cleanups.</p>\n\n<p>On the other hand, if a program provide some APIs to exit the program it should be used instead of exit directly.</p>\n\n<p>So it really depends if the program actually handle the \"exiting\" situations.</p>\n\n<p>But if we're talking about a library like an NFCReader library... or something general that isn't coupled with the main program. That would be weird and possibly annoying to have a library that would make your program die in cases that aren't unrecoverable errors.</p>\n\n<p>In the case of a general library, the library writer cannot know if any of the program using their library use the same exit codes, or have actual exitting callbacks enabled so it would be a terrible idea to do that and in worse case it could become even dangerous.</p>\n\n<p>Imagine a regex library being used on some medical equipment that in some weird scenario would fail to parse a regex and decide to exit the program in the middle of an operation. </p>\n"}], "owner": {"reputation": 1873, "user_id": 765294, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/99UFa.jpg?s=128&g=1", "display_name": "Will", "link": "https://stackoverflow.com/users/765294/will"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 58003455, "answer_count": 1, "score": 1, "last_activity_date": 1568865150, "creation_date": 1568850755, "last_edit_date": 1568852690, "question_id": 58002026, "link": "https://stackoverflow.com/questions/58002026/is-it-always-wrong-to-terminate-the-calling-program-e-g-call-exit-from-a-l", "title": "Is it always wrong to terminate the calling program (e.g., call exit()) from a library when an error/exception could be returned instead?", "body": "<p>I have always believed the answer to be unequivocally: <strong>yes</strong>.</p>\n\n<p>Yesterday I wrote the following in a <a href=\"https://www.reddit.com/r/C_Programming/comments/d5k1cp/a_simple_gap_buffer_implementation_in_c/f0nyavf/\" rel=\"nofollow noreferrer\">comment</a> on <a href=\"https://www.reddit.com/r/C_Programming\" rel=\"nofollow noreferrer\">reddit.com/r/c_programming</a>:</p>\n\n<blockquote>\n  <p>Terminating a calling program inside a library is a severe violation of separation of concerns: it's the library's responsibility to return a result, be it the intended result or an error, nothing more, nothing less; whereas it's the caller's responsibility and prerogative to do with that result whatever it deems best.</p>\n</blockquote>\n\n<p>However, to my surprise, I could find no question on <em>Stack Overflow</em> or <em>Software Engineering</em> that directly addresses this fairly fundamental concern.</p>\n\n<p>If this question is not a duplicate, I figure it might be useful if it were to serve as a future point of reference in that regard\u2014hoping to see some convincing arguments, official guidelines, or otherwise authoritative sources.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 2, "creation_date": 1568849352, "post_id": 58001853, "comment_id": 102409332, "body": "I&#39;d start by indenting your code. Without that, following the logic of the if/then/else statements is next to impossible. As soon as I indented it, some logic problems nearly jumped out."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 1, "creation_date": 1568849439, "post_id": 58001853, "comment_id": 102409358, "body": "Show how <code>haveDiscount</code> and <code>discountType</code> are declared."}, {"owner": {"reputation": 1, "user_id": 12087480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e66c4fc64846c7e944cbe0b51904f3?s=128&d=identicon&r=PG&f=1", "display_name": "tomka", "link": "https://stackoverflow.com/users/12087480/tomka"}, "edited": false, "score": 0, "creation_date": 1568849761, "post_id": 58001853, "comment_id": 102409439, "body": "just as a string so string haveDiscount, discountType; also, I do have it indented in my actual code, it was just not copying well from there for some reason so I had to take those out"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1568850806, "post_id": 58001853, "comment_id": 102409648, "body": "Is it a <code>std::string</code> or a  c-string / char array?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1568850935, "post_id": 58001853, "comment_id": 102409667, "body": "Looks like you could be leaving <code>discountType</code> improperly set, but it&#39;s hard to say without better context."}, {"owner": {"reputation": 1, "user_id": 12087480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e66c4fc64846c7e944cbe0b51904f3?s=128&d=identicon&r=PG&f=1", "display_name": "tomka", "link": "https://stackoverflow.com/users/12087480/tomka"}, "edited": false, "score": 0, "creation_date": 1568851975, "post_id": 58001853, "comment_id": 102409818, "body": "std::string and it does work when I have all the if/else statements together no problem, it&#39;s just that I have to have certain things printed in certain order, that&#39;s why I had to change it and started having problems."}, {"owner": {"reputation": 309, "user_id": 8723329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb48604cc29c70e53189e174b4e28959?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathon K", "link": "https://stackoverflow.com/users/8723329/jonathon-k"}, "edited": false, "score": 1, "creation_date": 1568852099, "post_id": 58001853, "comment_id": 102409837, "body": "When <code>haveDiscount == &quot;Y&quot;</code> is true then <code>haveDiscount == &quot;N&quot;</code> will always be false causing the else to execute.  Why is you error about the discount type when you haven&#39;t check that variable?"}, {"owner": {"reputation": 309, "user_id": 8723329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb48604cc29c70e53189e174b4e28959?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathon K", "link": "https://stackoverflow.com/users/8723329/jonathon-k"}, "edited": false, "score": 0, "creation_date": 1568852279, "post_id": 58001853, "comment_id": 102409874, "body": "You may also want to look for if...else if... else..."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12087480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e66c4fc64846c7e944cbe0b51904f3?s=128&d=identicon&r=PG&f=1", "display_name": "tomka", "link": "https://stackoverflow.com/users/12087480/tomka"}, "edited": false, "score": 0, "creation_date": 1568850119, "post_id": 58001932, "comment_id": 102409520, "body": "I do have discountType C and A declared on the bottom because the discount amount has to print out only when those are selected but after the number of child tickets. And the error message has to print out right after &quot;Is the discount for an adult or child&#39;s ticket?&quot; This is where my problem is, the order in which these have to print out."}, {"owner": {"reputation": 150, "user_id": 9732740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab00e8a93b7bbe482df119151d4993c1?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob P", "link": "https://stackoverflow.com/users/9732740/jacob-p"}, "reply_to_user": {"reputation": 1, "user_id": 12087480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e66c4fc64846c7e944cbe0b51904f3?s=128&d=identicon&r=PG&f=1", "display_name": "tomka", "link": "https://stackoverflow.com/users/12087480/tomka"}, "edited": false, "score": 0, "creation_date": 1569389381, "post_id": 58001932, "comment_id": 102575932, "body": "Yes, it should still have the error right after the way I have it here."}], "tags": [], "owner": {"reputation": 150, "user_id": 9732740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab00e8a93b7bbe482df119151d4993c1?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob P", "link": "https://stackoverflow.com/users/9732740/jacob-p"}, "is_accepted": false, "score": 0, "last_activity_date": 1568850066, "last_edit_date": 1568850066, "creation_date": 1568849746, "answer_id": 58001932, "question_id": 58001853, "link": "https://stackoverflow.com/questions/58001853/output-prints-inside-else-statement-when-its-not-supposed-to/58001932#58001932", "title": "Output prints inside else statement when it&#39;s not supposed to", "body": "<p>If you indent your code it's a lot easier to read. It looks like you're missing a couple ifs and elses.\nIt looks like this right now:</p>\n\n<pre><code>if (haveDiscount == \"Y\") \n{\n   // ask next question\n}\nif (haveDiscount == \"N\") \n{\n   // print new line\n} \nelse \n{\n   // print error\n}\n</code></pre>\n\n<p>Which means no matter what if they have a discount it will print the error. It's printing the error if haveDiscount does not equal \"N\" - which will always be true if they answered \"Y\" for the first question.\nYou probably want something more like this:</p>\n\n<pre><code>if (haveDiscount == \"Y\") \n{\n   // ask next question\n   if (discountType == \"C\" || discountType == \"A\")\n   {\n      // do something\n   }\n   else \n   {\n      // print error\n   }\n}\nelse \n{\n   // print new line\n} \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 309, "user_id": 8723329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb48604cc29c70e53189e174b4e28959?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathon K", "link": "https://stackoverflow.com/users/8723329/jonathon-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1568852691, "creation_date": 1568852691, "answer_id": 58002189, "question_id": 58001853, "link": "https://stackoverflow.com/questions/58001853/output-prints-inside-else-statement-when-its-not-supposed-to/58002189#58002189", "title": "Output prints inside else statement when it&#39;s not supposed to", "body": "<p>To print your error when <code>discountType</code> is not C or A could look like</p>\n\n<pre><code>if (discountType == \"A\") \n{\n    coupon = 11.25; cout&lt;&lt; \"\\nDiscount: \" &lt;&lt; setw(26) &lt;&lt; coupon &lt;&lt; endl; \n}\nelse if (discountType == \"C\")\n{\n    coupon = 4.50; cout&lt;&lt; \"\\nDiscount: \" &lt;&lt; setw(26) &lt;&lt; coupon &lt;&lt; endl;\n}\nelse\n{\n    cout&lt;&lt; \"\\nError: \";\n    cout&lt;&lt; discountType;\n    cout&lt;&lt;\" is not a valid discount type. No discount will be applied.\"; }\n}\n</code></pre>\n\n<p>If you want the error to print before the receipt, then you could do</p>\n\n<pre><code>if (discountType != \"C\" || discountType != \"A\")\n{\n    // Error message\n}\n</code></pre>\n\n<p>Somewhere after <code>discountType</code> has been set.</p>\n"}], "owner": {"reputation": 1, "user_id": 12087480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e66c4fc64846c7e944cbe0b51904f3?s=128&d=identicon&r=PG&f=1", "display_name": "tomka", "link": "https://stackoverflow.com/users/12087480/tomka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1568852691, "creation_date": 1568849025, "last_edit_date": 1568851024, "question_id": 58001853, "link": "https://stackoverflow.com/questions/58001853/output-prints-inside-else-statement-when-its-not-supposed-to", "title": "Output prints inside else statement when it&#39;s not supposed to", "body": "<p>So I am having issues with the order of everything printing out. It should be \"Do you have a discount coupon?\" Then \"Is the discount for an adult or child's ticket?\" Then based on the answer either an error code or proceeding to the receipt. Discount should only pop up if the user had a Y answer in the \"Do you have a discount coupon?\" section. But I can't make it work with the if and else statements.</p>\n\n<p>At first I tried to have all the if and else statements together, but the order in which things printed wasn't right. So now I tried inserting the receipt in the middle but that's messing with the if statement's operation and it doesn't print right. Regardless if I enter C or A (which are both characters declared later on and should not prompt the error message to print) the error message prints. The discount still applies but the error message should not print.</p>\n\n<pre><code>cout&lt;&lt; \"\\nDo you have a discount coupon (Y for yes)? \";                             \ncin&gt;&gt; haveDiscount;\n\nif (haveDiscount == \"Y\")\n{\n    cout&lt;&lt; \"\\nIs the discount for an adult or child's ticket (A for adult, C for child)? \";\n    cin&gt;&gt; discountType;\n}\nif (haveDiscount == \"N\")\n{\n    cout&lt;&lt; endl;\n}\nelse\n{\n    cout&lt;&lt; \"\\nError: \";\n    cout&lt;&lt; discountType;\n    cout&lt;&lt;\" is not a valid discount type. No discount will be applied.\";\n}\n\ncout&lt;&lt; \"\\n\\n************************************\" &lt;&lt; endl;\ncout&lt;&lt; right &lt;&lt; setw(22) &lt;&lt; \"Theater Sale\";\ncout&lt;&lt; \"\\n************************************\";                                            \ncout&lt;&lt; \"\\n\\nNumber of adult tickets: \" &lt;&lt; setw(11) &lt;&lt; adultTickets;                         \ncout&lt;&lt; \"\\nNumber of child tickets: \" &lt;&lt; setw(11) &lt;&lt; childTickets &lt;&lt; endl;\n\nif (discountType == \"A\")\n{\n    coupon = 11.25;\n    cout&lt;&lt; \"\\nDiscount: \" &lt;&lt; setw(26) &lt;&lt; coupon &lt;&lt; endl;\n}\nelse\n{\n    if (discountType == \"C\")\n    {\n        coupon = 4.50;\n        cout&lt;&lt; \"\\nDiscount: \" &lt;&lt; setw(26) &lt;&lt; coupon &lt;&lt; endl;\n    }\n}\n\ntotal = (adultPrice * adultTickets) + (childPrice * childTickets) - coupon;\ncout&lt;&lt; \"\\nTotal purchase: \" &lt;&lt; setw(20) &lt;&lt; total;\n</code></pre>\n\n<p>I need the error message to not print when I enter C or A (these are declared for the discounts), and only print in any other cases.</p>\n"}, {"tags": ["c++", "c", "gcc"], "comments": [{"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1568845044, "post_id": 58001381, "comment_id": 102408445, "body": "Would memory barriers do what you&#39;re looking for?"}, {"owner": {"reputation": 354, "user_id": 5199427, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/YdwB1.jpg?s=128&g=1", "display_name": "Alifornia", "link": "https://stackoverflow.com/users/5199427/alifornia"}, "edited": false, "score": 1, "creation_date": 1568845609, "post_id": 58001381, "comment_id": 102408570, "body": "While you can use compiler options, there is no guarantee that the compiler obeys your expected order of operations, precisely. A compiler only guarantees to not change the meaning of the given program."}, {"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 3, "creation_date": 1568846025, "post_id": 58001381, "comment_id": 102408664, "body": "It&#39;s a good question! One that needs some thought. But, in the meantime, please use &#39;better&#39; code - rather than <code>using namespace std</code> (lazy) do <code>using std::cout</code>. You&#39;re better than that."}, {"owner": {"reputation": 177, "user_id": 7304614, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-uFr3kLgPAm0/AAAAAAAAAAI/AAAAAAAAAAA/VJy8zzehJeA/photo.jpg?sz=128", "display_name": "Colin Weltin-Wu", "link": "https://stackoverflow.com/users/7304614/colin-weltin-wu"}, "edited": false, "score": 0, "creation_date": 1568850277, "post_id": 58001381, "comment_id": 102409548, "body": "Hoookay no lazy :(. I looked at memory barriers, I had to Google, and it looks like it would do what I want but like swatting a fly with a hammer (this is actually very hard). I think it would also be a massive performance hit and I can&#39;t afford that where these computations lie. Thanks though."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 2, "creation_date": 1568850367, "post_id": 58001381, "comment_id": 102409566, "body": "lol - if it gets that important, asm."}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 1, "creation_date": 1568857590, "post_id": 58001381, "comment_id": 102410790, "body": "If you don&#39;t want the compiler to optimise a specific function have a look at this:   <a href=\"https://stackoverflow.com/questions/4713320/is-there-any-way-to-disable-compiler-optimisation-for-a-specific-line-of-code\" title=\"is there any way to disable compiler optimisation for a specific line of code\">stackoverflow.com/questions/4713320/&hellip;</a>  You will need to make sure that the code you put into that function is optimised by hand..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1568870422, "post_id": 58001381, "comment_id": 102413177, "body": "Keep in mind that no matter what you do, <a href=\"https://stackoverflow.com/q/588004/10957435\">floating point math will always be slightly inaccurate</a>. If you need that level of accuracy, you may just need a more precision."}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 1, "creation_date": 1568874157, "post_id": 58001381, "comment_id": 102414560, "body": "You can put every intermediate result in a volatile variable, and re-read it from that variable."}, {"owner": {"reputation": 177, "user_id": 7304614, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-uFr3kLgPAm0/AAAAAAAAAAI/AAAAAAAAAAA/VJy8zzehJeA/photo.jpg?sz=128", "display_name": "Colin Weltin-Wu", "link": "https://stackoverflow.com/users/7304614/colin-weltin-wu"}, "edited": false, "score": 0, "creation_date": 1568913289, "post_id": 58001381, "comment_id": 102435742, "body": "My only constraint is I rely on the deterministic behavior of floating point computations, which as I understand is guaranteed by the IEEE standard, secondary consideration is the absolute precision. I just need to guarantee the exact sequence of operations is what I want it to be. I think I will end up going the assembly route one day. I would try the trick with volatiles but first I need to concoct a test case. Thanks everyone for the ideas!"}], "owner": {"reputation": 177, "user_id": 7304614, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-uFr3kLgPAm0/AAAAAAAAAAI/AAAAAAAAAAA/VJy8zzehJeA/photo.jpg?sz=128", "display_name": "Colin Weltin-Wu", "link": "https://stackoverflow.com/users/7304614/colin-weltin-wu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 270, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1568850125, "creation_date": 1568844895, "last_edit_date": 1568850125, "question_id": 58001381, "link": "https://stackoverflow.com/questions/58001381/c-c-tricks-to-enforce-floating-point-order-of-operations", "title": "C/C++ Tricks to Enforce Floating Point Order of Operations", "body": "<p>I am looking for ways to force gcc to respect a particular order of operations (it does not have to be the order that minimizes floating point error, just whatever order I happen to want) regarding double-precision arithmetic of a particular section of code, while allowing full <code>-O3 -funsafe-math-optimizations</code> elsewhere. I have seen a few posts on this matter:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/13913017/are-floating-point-operations-in-c-associative\">Are floating point operations in C associative?</a></p>\n\n<p><a href=\"https://devblogs.microsoft.com/cppblog/do-you-prefer-fast-or-precise/\" rel=\"nofollow noreferrer\">https://devblogs.microsoft.com/cppblog/do-you-prefer-fast-or-precise/</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/11296854/c-c-math-order-of-operation?noredirect=1&amp;lq=1\">C/C++ Math Order of Operation</a></p>\n\n<p>The above links discuss global options, but I'd like to understand if local compiler directives exist. For example, when doing hardware synthesis, it is possible to force the compiler to synthesize a logical expression verbatim without doing any reduction.</p>\n\n<p>For example, consider</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;iomanip&gt;\n\nusing std::cout;\n\nint main()\n{\n    double a = 1.0 + 1.3e-16;\n    double b = 1.0;\n    double c = 100.0;\n\n    double d = (a - b) / c;\n    double e = a / c - b / c;\n\n    cout &lt;&lt; std::scientific;\n    cout &lt;&lt; \"Calculation d = \" &lt;&lt; d &lt;&lt; \"\\n\";\n    cout &lt;&lt; \"Calculation e = \" &lt;&lt; e &lt;&lt; \"\\n\";\n\n    double f = 1.0;\n    double g = 2e-15;\n    double h = 1.0;\n    double i = 1e-15;\n\n    double j = (f + g) - (h + i);\n    double k = (f - h) + (g - i);\n    double m = f + g - h - i;\n    double n = f - h + g - i;\n\n    cout &lt;&lt; \"Calculation j = \" &lt;&lt; j &lt;&lt; \"\\n\";\n    cout &lt;&lt; \"Calculation k = \" &lt;&lt; k &lt;&lt; \"\\n\";\n    cout &lt;&lt; \"Calculation m = \" &lt;&lt; m &lt;&lt; \"\\n\";\n    cout &lt;&lt; \"Calculation n = \" &lt;&lt; n &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>Using <a href=\"http://cpp.sh\" rel=\"nofollow noreferrer\">http://cpp.sh</a>, I get</p>\n\n<pre><code>Calculation d = 2.220446e-18\nCalculation e = 1.734723e-18\nCalculation j = 8.881784e-16\nCalculation k = 1.000000e-15\nCalculation m = 9.984014e-16\nCalculation n = 1.000000e-15\n</code></pre>\n\n<p>This was independent of the optimization level I used, so it seems that the compiler will calculate things in the order I expect based on the expression, plus even maintains left-right order for the +/- But is this absolutely guaranteed, when optimizations are turned on?</p>\n\n<p>I can think of a scenario for example where one of the operands is already sitting in some useful register whereby it would save some memory move to compute things in a different order than I wrote, but would maintain symbolic correctness.</p>\n\n<p>Basically I can't begin to try different hacks to fix the issue, e.g., I read that declaring sub-products as volatile variables would help, since my example doesn't show the problem. So I'd like to know if this is indeed a non-problem, or if not, what tricks exist.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 6, "creation_date": 1568843431, "post_id": 58001156, "comment_id": 102408033, "body": "The Answer to the Ultimate Question of Life, The Universe, and Everything"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 2, "creation_date": 1568846317, "post_id": 58001156, "comment_id": 102408745, "body": "You are the victim or somebody&#39;s practical joke.  Not necessarily limited to anybody that would respond when you yell &quot;what does 42 mean?&quot; from your cubicle.  The Linux peeps made an effort to #define ENOMSG to 42, for example.   Don&#39;t use void main(), show your code, name you compiler and OS to get ahead."}, {"owner": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "edited": false, "score": 1, "creation_date": 1568847994, "post_id": 58001156, "comment_id": 102409106, "body": "So you&#39;re making a program and it is closing on itself, and you ask us why without providing any code whatsoever. How are we supposed to help you?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1568848422, "post_id": 58001156, "comment_id": 102409172, "body": "<a href=\"https://stackoverflow.com/q/39366400/10957435\">relevant</a>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1568848449, "post_id": 58001156, "comment_id": 102409180, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/39366400/why-is-it-exit42\">Why is it exit(42)?</a>"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1568855678, "post_id": 58001156, "comment_id": 102410446, "body": "Hang on. You said you&#39;re &quot;doing a program with matrix&quot;. Are you saying that you&#39;re getting this status from a program that you wrote? If so, and if you want help, you <i>must</i> show us a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> (read that link) and tell us what environment you&#39;re using (operating system, compiler, IDE if any). I can imagine that some C++ implementation would cause your program to do an implicit <code>exit(42)</code> in some circumstances, but we can&#39;t tell without more information. (And now I&#39;m curious.)"}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1568843715, "post_id": 58001193, "comment_id": 102408117, "body": "42. The oddest even number around."}, {"owner": {"reputation": 1, "user_id": 11965321, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDF3MN1TQJChaHgQJr4iCut_043LASeQdvzQwhXzQ=k-s128", "display_name": "Johan", "link": "https://stackoverflow.com/users/11965321/johan"}, "edited": false, "score": 0, "creation_date": 1568844280, "post_id": 58001193, "comment_id": 102408250, "body": "Is there any way to hide it from the screen?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 1, "user_id": 11965321, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDF3MN1TQJChaHgQJr4iCut_043LASeQdvzQwhXzQ=k-s128", "display_name": "Johan", "link": "https://stackoverflow.com/users/11965321/johan"}, "edited": false, "score": 0, "creation_date": 1568855340, "post_id": 58001193, "comment_id": 102410392, "body": "@Johan: It depends on the environment in which you run the program."}], "tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": false, "score": 4, "last_activity_date": 1568843517, "creation_date": 1568843517, "answer_id": 58001193, "question_id": 58001156, "link": "https://stackoverflow.com/questions/58001156/what-is-exit-status-42/58001193#58001193", "title": "What is exit status 42?", "body": "<p>It means that the program executed <code>exit(42)</code>, or <code>return 42;</code> from within the <code>main</code> function, or some equivalent. It has no universal meaning.</p>\n\n<p>On UNIX-like systems conventionally <code>0</code> means success and <code>1</code> means failure. Other return values may have meanings, but they're specific to each program (there <em>might</em> be some more general conventions, but they're not universal).</p>\n\n<p>I sometimes use <code>exit(42)</code> as a placeholder. <code>42</code> is a common \"arbitrary\" integer value, just as <code>foo</code> is a common arbitrary identifier, because <code>42</code> is the <a href=\"https://en.wikipedia.org/wiki/Phrases_from_The_Hitchhiker%27s_Guide_to_the_Galaxy#Answer_to_the_Ultimate_Question_of_Life,_the_Universe,_and_Everything_(42)\" rel=\"nofollow noreferrer\">Answer to the Ultimate Question of Life, the Universe, and Everything</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6477135, "user_type": "registered", "profile_image": "https://graph.facebook.com/1027049640736065/picture?type=large", "display_name": "Kushal Babel", "link": "https://stackoverflow.com/users/6477135/kushal-babel"}, "is_accepted": false, "score": 0, "last_activity_date": 1568847235, "creation_date": 1568847235, "answer_id": 58001678, "question_id": 58001156, "link": "https://stackoverflow.com/questions/58001156/what-is-exit-status-42/58001678#58001678", "title": "What is exit status 42?", "body": "<p>This is a custom return code from the pacman implementation, and you should look up the spec of the implementation to figure out what error does 42 indicate.</p>\n"}], "owner": {"reputation": 1, "user_id": 11965321, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDF3MN1TQJChaHgQJr4iCut_043LASeQdvzQwhXzQ=k-s128", "display_name": "Johan", "link": "https://stackoverflow.com/users/11965321/johan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1093, "favorite_count": 0, "closed_date": 1568851098, "answer_count": 2, "score": -6, "last_activity_date": 1568847235, "creation_date": 1568843305, "question_id": 58001156, "link": "https://stackoverflow.com/questions/58001156/what-is-exit-status-42", "closed_reason": "Not suitable for this site", "title": "What is exit status 42?", "body": "<p>I would like to know what that means, Im doing a program with matrix, kinda like pacman, but whenever I try to interact with the program it ends and returns \"Exit status 42\"</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1568842260, "post_id": 58000956, "comment_id": 102407704, "body": "Get the size of both arrays, loop to the minimum one."}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 1, "creation_date": 1568842571, "post_id": 58000956, "comment_id": 102407800, "body": "Are you sure you want to allocate array of 0 elements?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1568843294, "post_id": 58000956, "comment_id": 102407997, "body": "It would help if you would show what the content of <code>newArr</code> is supposed to look like after the looping is finished."}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 0, "last_activity_date": 1568843091, "creation_date": 1568843091, "answer_id": 58001122, "question_id": 58000956, "link": "https://stackoverflow.com/questions/58000956/how-do-i-use-a-for-loop-to-compare-arrays-of-different-sizes/58001122#58001122", "title": "how do i use a for loop to compare arrays of different sizes", "body": "<p>Try something like this:</p>\n\n<pre><code>int arr1[] = {0, 1, 2, 3, 4, 5, 6};\nint size_arr1 = 7;\n\nint arr2[] = {0, 1, 3, 3, 4, 6};\nint size_arr2 = 6;\n\nint *newArr = new int[size_arr1 + size_arr2];\nint n = 0;\n\nfor (int i = 0; i &lt; size_arr1; i++) {\n    newArr[n++] = arr1[i];\n}\n\nfor (int i = 0; i &lt; size_arr2; i++) {\n    bool found = false;\n    for (int j = 0; j &lt; n; j++) {\n        if (arr2[i] == newArr2[j]) {\n            found = true;\n            break;\n        }\n    }\n    if (!found)\n        newArr[n++] = arr1[i];\n}\n\nfor (int i = 0; i &lt; n; i++) {\n    cout &lt;&lt; newArr[i] &lt;&lt; endl;\n}\n\ndelete[] newArr;\n</code></pre>\n\n<p>Another way to collect unique numbers from both arrays is to use a <a href=\"https://en.cppreference.com/w/cpp/container/set\" rel=\"nofollow noreferrer\"><code>std::set</code></a> or <a href=\"https://en.cppreference.com/w/cpp/container/unordered_set\" rel=\"nofollow noreferrer\"><code>std::unsorted_set</code></a> instead, eg:</p>\n\n<pre><code>#include &lt;unordered_set&gt;\n\nint arr1[] = {0, 1, 2, 3, 4, 5, 6};\nint arr2[] = {0, 1, 3, 3, 4, 6};\nset::unsorted_set newArr;\n\nfor(int num : arr1) {\n    newArr.insert(num);\n}\n\nfor(int num : arr2) {\n    newArr.insert(num);\n}\n\nfor (int num : newArr) {\n   std:: cout &lt;&lt; num &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 57, "user_id": 9704219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f6bfa4b2e8698387a63b2fe7629435a?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Cina", "link": "https://stackoverflow.com/users/9704219/andrew-cina"}, "is_accepted": false, "score": 0, "last_activity_date": 1568849745, "creation_date": 1568849745, "answer_id": 58001931, "question_id": 58000956, "link": "https://stackoverflow.com/questions/58000956/how-do-i-use-a-for-loop-to-compare-arrays-of-different-sizes/58001931#58001931", "title": "how do i use a for loop to compare arrays of different sizes", "body": "<p>You've declared the arrays dynamically in your code (i.e. on the heap) and initializing them with numbers isn't as straight forward. You are also allocating an array of 0 size. If you declare your arrays on the stack then you can achieve what you want to do with a nested for loop.</p>\n\n<p>Take note though that for large datasets this would be inefficient. If you're curious research binary search algorithms.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main()\n{\n    int arr1Size = 6;\n    int arr2Size = 8;\n\n    int arr1[] = { 2, 5, 7, 12, 45, 65 };\n    int arr2[] = { 2, 5, 6, 10, 32, 65, 98, 123 };\n\n\n    for (int i = 0; i &lt; arr1Size; i++)\n    {\n        for (int j = 0; j &lt; arr2Size; j++)\n        {\n            if (arr1[i] == arr2[j])\n            {\n                std::cout &lt;&lt; arr1[i] &lt;&lt; std::endl;\n            }\n        }\n    }\n}\n\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9606, "user_id": 3677097, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8c49e598194e53b9aba3a195da387a5?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas DM", "link": "https://stackoverflow.com/users/3677097/andreas-dm"}, "is_accepted": false, "score": 1, "last_activity_date": 1568851468, "creation_date": 1568851468, "answer_id": 58002081, "question_id": 58000956, "link": "https://stackoverflow.com/questions/58000956/how-do-i-use-a-for-loop-to-compare-arrays-of-different-sizes/58002081#58002081", "title": "how do i use a for loop to compare arrays of different sizes", "body": "<blockquote>\n  <p>I'm trying to write a function to compare the two arrays and make a\n  new array with the missing numbers.</p>\n</blockquote>\n\n<p>You can use a range-based for loop and <code>std::find</code> to check both arrays for the missing numbers<br>\nAnd then store the result in a <code>std::set</code></p>\n\n<p>Example</p>\n\n<pre><code>int main()\n{\n  int           a[] { 0, 1, 2, 3, 4, 5, 6 };\n  int           b[] { 0, 1, 3, 3, 4, 6    };\n  std::set&lt;int&gt; c;\n\n  for (auto const&amp; i : a)\n    if (std::find(std::begin(b), std::end(b), i) == std::end(b))\n      c.insert(i);\n\n  for (auto const&amp; i : b)\n    if (std::find(std::begin(a), std::end(a), i) == std::end(a))\n      c.insert(i);\n}\n</code></pre>\n\n<p>or using a regular for loop</p>\n\n<pre><code>for (auto it = std::begin(a); it != std::end(a); ++it)\n  if (std::find(std::begin(b), std::end(b), *it) == std::end(b))\n    c.insert(*it);\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11385776"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 3, "score": -4, "last_activity_date": 1568931934, "creation_date": 1568842196, "last_edit_date": 1568931934, "question_id": 58000956, "link": "https://stackoverflow.com/questions/58000956/how-do-i-use-a-for-loop-to-compare-arrays-of-different-sizes", "title": "how do i use a for loop to compare arrays of different sizes", "body": "<p>I have 2 arrays:</p>\n\n<p>arr1 = [0, 1, 2, 3, 4, 5, 6]\narr2 = [0, 1, 3, 3, 4, 6]</p>\n\n<p>I'm trying to write a function to compare the two arrays and make a new array with the missing numbers.</p>\n\n<p>I tried this for loop but it didn't print out anything. What other ways can I compare 2 arrays of different sizes?</p>\n\n<pre><code>int n = 0;\nint *newArr = new int[];\nfor (int i = 0; i&lt;=6; i++) {\n if (arr1[i] != arr2[i]) {\n newArr[n] = arr1[i]\n n++;\n}\n}\nfor (int j = 0; j&lt;n; j++) {\n cout &lt;&lt; arr[j] &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 7, "creation_date": 1568840583, "post_id": 58000664, "comment_id": 102407154, "body": "What is wrong with the code you are showing?  Please <a href=\"https://stackoverflow.com/posts/58000664/edit\">edit</a> your question to contain a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1568841223, "post_id": 58000664, "comment_id": 102407370, "body": "<code>v[i+1]</code> is undefined behavior, when <code>i = v.size () - 1</code>, due to indexing <code>v</code> out of bounds."}], "answers": [{"tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 0, "last_activity_date": 1568842869, "last_edit_date": 1568842869, "creation_date": 1568841498, "answer_id": 58000846, "question_id": 58000664, "link": "https://stackoverflow.com/questions/58000664/how-to-find-if-the-elements-of-a-vector-alternate-as-sign/58000846#58000846", "title": "How to find if the elements of a vector alternate as sign?", "body": "<p>Well, there are (at least) two problems with your code:</p>\n\n<ol>\n<li><p>You access beyond the vector due to <code>[i+1]</code>. Change the loop to stop at <code>v.size()-1</code></p></li>\n<li><p>You don't handle the value zero correct. Change <code>&gt;</code> to <code>&gt;=</code></p></li>\n</ol>\n\n<p>But why not use the c++ algorithm library for this?</p>\n\n<blockquote>\n  <p>How to find if the elements of a vector alternate as sign?</p>\n</blockquote>\n\n<p><code>std::adjacent_find</code> can help. Use it like:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n\nbool alternating_sign(std::vector&lt;int&gt;&amp; v)\n{\n    auto it = std::adjacent_find(v.begin(), v.end(), \n        [](const int&amp; a, const int&amp; b){return ((a&lt;0 &amp;&amp; b&lt;0) || (a&gt;=0 &amp;&amp; b&gt;=0));});\n    return (it == v.end());\n}\n\nint main() {\n    std::vector&lt;int&gt; v1 = {1, -2, 3, -4, 1, 5, -2};\n    std::vector&lt;int&gt; v2 = {1, -2, 3, -4, 1, -2};\n    std::cout &lt;&lt; \"Test v1: \";\n    std::cout &lt;&lt; (alternating_sign(v1) ? \"sign alternating\" : \"sign not alternating\") &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Test v2: \";\n    std::cout &lt;&lt; (alternating_sign(v2) ? \"sign alternating\" : \"sign not alternating\") &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Test v1: sign not alternating\nTest v2: sign alternating\n</code></pre>\n\n<p>The code looks for two adjacent elements that have same sign. If such two elements are found, you know that the sign isn't alternating.</p>\n"}], "owner": {"reputation": 21, "user_id": 8849138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b41787fc656144c1cbd29608811fb9fe?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Julian", "link": "https://stackoverflow.com/users/8849138/andrew-julian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 1, "answer_count": 1, "score": -5, "last_activity_date": 1568842869, "creation_date": 1568840459, "last_edit_date": 1568841335, "question_id": 58000664, "link": "https://stackoverflow.com/questions/58000664/how-to-find-if-the-elements-of-a-vector-alternate-as-sign", "title": "How to find if the elements of a vector alternate as sign?", "body": "<p>I tried to write a piece of code to find if the elements of vector are alternating and I count this in order to display. Help me a little bit!</p>\n\n<pre><code>int main(){\nint n;\nint temp;\nvector&lt;int&gt; v;\nint c=0;\n\ncin&gt;&gt;n;\n    for(int i=0;i&lt;n;i++){\n        cin&gt;&gt;temp;\n        v.push_back(temp);\n    }\n\n    for(int i=0;i&lt;v.size();i++){\n\n        if( (v[i]&gt;0 &amp;&amp; v[i+1]&lt;0) || (v[i]&lt;0 &amp;&amp; v[i+1]&gt;0) ){\n\n            c++;\n        }\n\n    }\ncout&lt;&lt;c;\n</code></pre>\n\n<p>Input:</p>\n\n<p>16</p>\n\n<p>1 -5 -3 2 -1 7 -2 5 1 -7 -9 0 -1 6 -1 -8</p>\n\n<p>Output:</p>\n\n<p>6</p>\n\n<p>-3 2 -1 7 -2 5</p>\n"}, {"tags": ["c++", "class"], "comments": [{"owner": {"reputation": 1802, "user_id": 7034621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZCc06.jpg?s=128&g=1", "display_name": "orhtej2", "link": "https://stackoverflow.com/users/7034621/orhtej2"}, "edited": false, "score": 0, "creation_date": 1568840514, "post_id": 58000642, "comment_id": 102407126, "body": "Regarding <code>A</code> passing instance of itself to <code>B</code>: <a href=\"https://stackoverflow.com/questions/16492736/what-is-the-this-pointer\" title=\"what is the this pointer\">stackoverflow.com/questions/16492736/what-is-the-this-pointe&zwnj;&#8203;r</a>"}, {"owner": {"reputation": 1802, "user_id": 7034621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZCc06.jpg?s=128&g=1", "display_name": "orhtej2", "link": "https://stackoverflow.com/users/7034621/orhtej2"}, "edited": false, "score": 3, "creation_date": 1568840557, "post_id": 58000642, "comment_id": 102407141, "body": "Regarding the main question: you sort of provided the code that does what you wanted, what is the problem here?"}, {"owner": {"reputation": 57, "user_id": 9704219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f6bfa4b2e8698387a63b2fe7629435a?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Cina", "link": "https://stackoverflow.com/users/9704219/andrew-cina"}, "reply_to_user": {"reputation": 1802, "user_id": 7034621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZCc06.jpg?s=128&g=1", "display_name": "orhtej2", "link": "https://stackoverflow.com/users/7034621/orhtej2"}, "edited": false, "score": 0, "creation_date": 1568840729, "post_id": 58000642, "comment_id": 102407208, "body": "@orhtej2 For some reason when I write the actual code out it doesn&#39;t work. If there isn&#39;t anything obvious that I&#39;m missing in the above then I might be making the error elsewhere, but your &quot;sort of&quot; makes me a unsure :)"}, {"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 0, "creation_date": 1568841073, "post_id": 58000642, "comment_id": 102407314, "body": "What definition of &quot;use&quot; are you ... using?"}, {"owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "edited": false, "score": 0, "creation_date": 1568841219, "post_id": 58000642, "comment_id": 102407367, "body": "Well you didn&#39;t specify any data type for <code>B::x</code> and <code>B::y</code> in your class definition. And you should forward declare <code>class A;</code> before the definition of <code>B</code>."}, {"owner": {"reputation": 57, "user_id": 9704219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f6bfa4b2e8698387a63b2fe7629435a?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Cina", "link": "https://stackoverflow.com/users/9704219/andrew-cina"}, "reply_to_user": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 0, "creation_date": 1568841219, "post_id": 58000642, "comment_id": 102407368, "body": "@Kaz To be speceific, <b>call</b> method in A but use variables initialized in B."}, {"owner": {"reputation": 57, "user_id": 9704219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f6bfa4b2e8698387a63b2fe7629435a?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Cina", "link": "https://stackoverflow.com/users/9704219/andrew-cina"}, "reply_to_user": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "edited": false, "score": 0, "creation_date": 1568841336, "post_id": 58000642, "comment_id": 102407410, "body": "@Timo It was sort of pseudo code to explain the concept. But the types could be float for example. Fixing now."}, {"owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "edited": false, "score": 0, "creation_date": 1568841407, "post_id": 58000642, "comment_id": 102407446, "body": "Also, the declaration of <code>A::DoThat</code> is different from the definition."}, {"owner": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 0, "creation_date": 1568841452, "post_id": 58000642, "comment_id": 102407467, "body": "@AndrewCina before posting, you should run your code to make it most bug free"}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 9704219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f6bfa4b2e8698387a63b2fe7629435a?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Cina", "link": "https://stackoverflow.com/users/9704219/andrew-cina"}, "edited": false, "score": 0, "creation_date": 1568842718, "post_id": 58000858, "comment_id": 102407845, "body": "It seems I&#39;m getting some circular references in my headers then. I&#39;ve searched around and tried to fix the issue, but I&#39;m having no luck."}], "tags": [], "owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "is_accepted": false, "score": 1, "last_activity_date": 1568841577, "creation_date": 1568841577, "answer_id": 58000858, "question_id": 58000642, "link": "https://stackoverflow.com/questions/58000642/c-is-it-possible-to-use-the-method-of-another-class-without-inheritance/58000858#58000858", "title": "C++ - Is it possible to use the method of another class without inheritance?", "body": "<p>The only problem is that your code contains numerous rudimentary errors, like lack of type specifiers in declarations, lack of terminating semicolons, wrong order (using a class <code>A</code> before it has been declared), mismatches between calls and declarations and such.</p>\n\n<p>Here is a patch to fix the problems. I also added a <code>,</code> (comma space) between the two numbers being output, and a terminating newline.</p>\n\n<pre><code>--- dothis-ORIG.cc  2019-09-18 14:13:15.002235916 -0700\n+++ dothis.cc   2019-09-18 14:16:56.548099037 -0700\n@@ -1,32 +1,36 @@\n+#include &lt;iostream&gt;\n+\n+class A;\n+\n class B\n {\n-    x = 10;\n-    y = 10;\n+    int x = 10;\n+    int y = 10;\n public:\n-    DoThis(A* obj);\n-}\n-\n-B::DoThis(A* obj)\n-{\n-    obj-&gt;DoThat(x, y)\n-}\n+    void DoThis(A* obj);\n+};\n\n class A\n {\n public:\n-    DoSomething();\n-    DoThat();\n+    void DoSomething();\n+    void DoThat(int x, int y);\n+};\n+\n+void B::DoThis(A* obj)\n+{\n+    obj-&gt;DoThat(x, y);\n }\n\n-A::DoSomething()\n+void A::DoSomething()\n {\n     B objB;\n     objB.DoThis(this);\n }\n\n-A::DoThat(x, y)\n+void A::DoThat(int x, int y)\n {\n-   std::cout &lt;&lt; x &lt;&lt; y;\n+   std::cout &lt;&lt; x &lt;&lt; \", \" &lt;&lt; y &lt;&lt; std::endl;\n }\n\n int main()\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 9704219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f6bfa4b2e8698387a63b2fe7629435a?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Cina", "link": "https://stackoverflow.com/users/9704219/andrew-cina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568841672, "creation_date": 1568840275, "last_edit_date": 1568841672, "question_id": 58000642, "link": "https://stackoverflow.com/questions/58000642/c-is-it-possible-to-use-the-method-of-another-class-without-inheritance", "title": "C++ - Is it possible to use the method of another class without inheritance?", "body": "<p>I'm fairly nooby at C++ but have this question that I hope makes sense:</p>\n\n<p>Can a method in class B call a method within class A under these conditions:</p>\n\n<ul>\n<li>B cannot inherit from A</li>\n<li>you cannot create an object of A within B</li>\n<li>the method in A cannot be static</li>\n</ul>\n\n<p>For example, can this be done by passing an object of A by reference to the method call of B.</p>\n\n<p>My next question would be, what if an object of B was created WITHIN an object of A. How does A reference itself to pass to the method of object B? </p>\n\n<p>An example of what I'm imagining:</p>\n\n<pre><code>class A;\n\nclass B\n{\n    int x = 10;\n    int y = 10;\npublic:\n    DoThis(A* obj);\n};\n\nB::DoThis(A* obj)\n{\n    obj-&gt;DoThat(int x, int y);\n}\n</code></pre>\n\n<pre><code>class A\n{\npublic:\n    DoSomething();\n    DoThat(int x, int y);\n};\n\nA::DoSomething()\n{\n    B objB;\n    objB.DoThis(this);\n}\n\nA::DoThat(int x, int y)\n{\n   std::cout &lt;&lt; x &lt;&lt; y;\n}\n</code></pre>\n\n<pre><code>int main()\n{\n    A* objA = new A;\n    objA-&gt;DoSomething();\n\n}\n</code></pre>\n"}, {"tags": ["android", "c++", "java-native-interface", "std-pair", "jnienv"], "comments": [{"owner": {"reputation": 2323, "user_id": 5184092, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/TRnWc.jpg?s=128&g=1", "display_name": "luckyging3r", "link": "https://stackoverflow.com/users/5184092/luckyging3r"}, "edited": false, "score": 0, "creation_date": 1568838863, "post_id": 58000303, "comment_id": 102406557, "body": "<code>ArrayList&lt;Pair&lt;Pair&lt;Float, Float&gt;, Pair&lt;Float, Float&gt;&gt;&gt;</code>... Why?"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1568839101, "post_id": 58000303, "comment_id": 102406630, "body": "JNI is a <code>C</code> interface. Good luck."}, {"owner": {"reputation": 509, "user_id": 982053, "user_type": "registered", "accept_rate": 53, "profile_image": "https://graph.facebook.com/100000924733398/picture?type=large", "display_name": "abhijit jagdale", "link": "https://stackoverflow.com/users/982053/abhijit-jagdale"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1568839551, "post_id": 58000303, "comment_id": 102406799, "body": "@RichardCritten is there a way to access Fields of Pair.  I was able to access ArrayList data by :  <code>jclass arrayListClass = env-&gt;FindClass(&quot;java&#47;util&#47;ArrayList&quot;);      jmethodID arrayListSize = env-&gt;GetMethodID(arrayListClass, &quot;size&quot;, &quot;()I&quot;);</code>"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1568839720, "post_id": 58000303, "comment_id": 102406850, "body": "Call the the Pair methods <code>getKey()</code> and <code>getValue()</code>  from JNI.  Basically yes you are going to have to bind to every Java class in your structure from JNI; get the values and recreate it in <code>C++</code> element by element."}, {"owner": {"reputation": 509, "user_id": 982053, "user_type": "registered", "accept_rate": 53, "profile_image": "https://graph.facebook.com/100000924733398/picture?type=large", "display_name": "abhijit jagdale", "link": "https://stackoverflow.com/users/982053/abhijit-jagdale"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1568840268, "post_id": 58000303, "comment_id": 102407047, "body": "@RichardCritten android.util.Pair do not have those methods. Instead it has first and second field as public."}, {"owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "edited": false, "score": 0, "creation_date": 1568860411, "post_id": 58000303, "comment_id": 102411235, "body": "Surely it&#39;s <code>java&#47;lang&#47;Object</code>, not <code>java&#47;util&#47;Objects</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1568885640, "post_id": 58003478, "comment_id": 102420356, "body": "Nitpick: getting three references per invocation of <code>extract_pair</code> will quickly exhaust the local reference table."}, {"owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "reply_to_user": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1568901307, "post_id": 58003478, "comment_id": 102429448, "body": "@Botje I&#39;m not familiar with the JNI. Would it be safe/idiomatic to use a <code>static</code> variable in <code>extract_pair</code>/<code>extract_float</code> to hold the offending variables?"}, {"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1568901483, "post_id": 58003478, "comment_id": 102429571, "body": "No, the references expire once you return to Java. But that can be solved by rewriting <code>extract_pair</code> as a lambda with captures. Not that you rewrite your answer \u2014 just mentioning it for future readers."}, {"owner": {"reputation": 230, "user_id": 4725089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883113800d5e499286629ed77d944b5a?s=128&d=identicon&r=PG&f=1", "display_name": "StainlessSteelRat", "link": "https://stackoverflow.com/users/4725089/stainlesssteelrat"}, "edited": false, "score": 0, "creation_date": 1585894340, "post_id": 58003478, "comment_id": 107929424, "body": "When I update Pair to android x&#39;s implementation I get a crash in my proguarded release build. I tried adding Pair to the pro guards rules but was unsuccessful in getting it to recognize the fields &quot;first&quot; and &quot;second&quot;. Anyone have any ideas?"}], "tags": [], "owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "is_accepted": true, "score": 2, "last_activity_date": 1568865041, "creation_date": 1568865041, "answer_id": 58003478, "question_id": 58000303, "link": "https://stackoverflow.com/questions/58000303/how-to-access-pair-of-java-in-jni/58003478#58003478", "title": "How to access Pair&lt;&gt; of Java in JNI?", "body": "<p>The type of the field has to be given as a <em>signature</em>; that is, you need to use the <code>int</code> -> <code>I</code>, <code>T[]</code> -> <code>[T</code>, <code>reference.Type</code> -> <code>Lreference/Type;</code> encoding. Also, the type of the field is <code>java.lang.Object</code>, not <code>java.util.Objects</code>.</p>\n\n<pre><code>jfieldID first = env-&gt;GetFieldID(pairClass, \"first\", \"Ljava/lang/Object;\");\njfieldID second = env-&gt;GetFieldID(pairClass, \"second\", \"Ljava/lang/Object;\");\n</code></pre>\n\n<p>The rest is tedious, but not hard:</p>\n\n<pre><code>jfloat extract_float(JNIEnv *env, jobject f) {\n    // Note the syntax of signatures: float floatValue() has signature \"()F\"\n    return env-&gt;CallFloatMethod(f,\n        env-&gt;GetMethodID(env-&gt;FindClass(\"java/lang/Float\"), \"floatValue\", \"()F\"));\n}\nstd::pair&lt;jobject, jobject&gt; extract_pair(JNIEnv *env, jobject p) {\n    jclass pairClass = env-&gt;FindClass(\"android/util/Pair\");\n    jfieldID first = env-&gt;GetFieldID(pairClass, \"first\", \"Ljava/lang/Object;\");\n    jfieldID second = env-&gt;GetFieldID(pairClass, \"second\", \"Ljava/lang/Object;\");\n\n    return std::pair(env-&gt;GetObjectField(p, first), env-&gt;GetObjectField(p, second));\n}\n\nJNIEnv *env;\njobject pair;\nauto [f1, f2] = extract_pair(env, pair);\nauto [f11, f12] = extract_pair(env, f1);\nauto [f21, f22] = extract_pair(env, f2);\nstd::pair p(\n        std::pair(extract_float(env, f11), extract_float(env, f12)),\n        std::pair(extract_float(env, f21), extract_float(env, f22)));\n</code></pre>\n\n<p>Though, I think I must ask, do you actually need to do this? Can you preprocess the nested pairs to something nicer on the Java side? Doing it on this side is ugly.</p>\n"}], "owner": {"reputation": 509, "user_id": 982053, "user_type": "registered", "accept_rate": 53, "profile_image": "https://graph.facebook.com/100000924733398/picture?type=large", "display_name": "abhijit jagdale", "link": "https://stackoverflow.com/users/982053/abhijit-jagdale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 456, "favorite_count": 0, "accepted_answer_id": 58003478, "answer_count": 1, "score": 1, "last_activity_date": 1568865041, "creation_date": 1568838460, "last_edit_date": 1568839335, "question_id": 58000303, "link": "https://stackoverflow.com/questions/58000303/how-to-access-pair-of-java-in-jni", "title": "How to access Pair&lt;&gt; of Java in JNI?", "body": "<p>I have <code>ArrayList&lt;Pair&lt;Pair&lt;Float, Float&gt;, Pair&lt;Float, Float&gt;&gt;&gt;</code> on Java side and want to use this data in JNI.</p>\n\n<p>What methods and classes to use to convert to <code>std::pair&lt;std::pair&lt;float, float&gt;, std::pair&lt;float, float&gt;&gt;</code></p>\n\n<p>I tried following</p>\n\n<p><code>jclass pairClass = env-&gt;FindClass(\"android/util/Pair\");</code></p>\n\n<p><code>jfieldID pairGetKey = env-&gt;GetFieldID(pairClass, \"first\", \"java/util/Objects\");</code></p>\n\n<p><code>pairGetKey</code> is always null</p>\n"}, {"tags": ["c++", "embedded", "clock", "atmelstudio"], "comments": [{"owner": {"reputation": 991, "user_id": 2012815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gFdPO.jpg?s=128&g=1", "display_name": "Peter L.", "link": "https://stackoverflow.com/users/2012815/peter-l"}, "edited": false, "score": 0, "creation_date": 1568838504, "post_id": 58000219, "comment_id": 102406427, "body": "Perhaps you need to link to a particular static library."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1568838684, "post_id": 58000219, "comment_id": 102406496, "body": "<code>clock()</code> is often implemented on top of <code>clock_gettime(CLOCK_PROCESS_CPUTIME_ID)</code> - so search for that too."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1568838873, "post_id": 58000219, "comment_id": 102406561, "body": "@TedLyngmo most likely, OP will end with the same result. Their C++ implementation seems to do everything correctly, but underlying <code>_times</code> is just not there because MCU has no way of providing this information."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1568838988, "post_id": 58000219, "comment_id": 102406599, "body": "@SergeyA You are probably right. It&#39;s worth a try though. Doesn&#39;t take many seconds(!) :-)"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1568844645, "post_id": 58000219, "comment_id": 102408341, "body": "<code>clock()</code> has hardware dependencies so you are normally required to implement or override a non-functional implementation with your own code using available timing hardware on your target.  It is generally a very simple function to implement using an on-chip timer or sysclk interrupt.  Related <a href=\"https://stackoverflow.com/questions/46335353/built-in-function-clock-not-working-in-atmel-studio-7-0\" title=\"built in function clock not working in atmel studio 7 0\">stackoverflow.com/questions/46335353/&hellip;</a>."}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 2, "last_activity_date": 1568838675, "creation_date": 1568838675, "answer_id": 58000345, "question_id": 58000219, "link": "https://stackoverflow.com/questions/58000219/calling-clock-gives-an-error-undefined-reference-to-times/58000345#58000345", "title": "Calling `clock()` gives an error: undefined reference to `_times&#39;", "body": "<p>MCU's normally do not expose processor use time. A library <code>clock</code> function calls the expected <code>_times</code> function to get the value, but the function is not defined for MCU for the reason stated above.</p>\n"}], "owner": {"reputation": 48, "user_id": 8616310, "user_type": "registered", "profile_image": "https://graph.facebook.com/1252403944865992/picture?type=large", "display_name": "Jonathan Lane-Smith", "link": "https://stackoverflow.com/users/8616310/jonathan-lane-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 914, "favorite_count": 0, "accepted_answer_id": 58000345, "answer_count": 1, "score": 1, "last_activity_date": 1568838675, "creation_date": 1568838023, "question_id": 58000219, "link": "https://stackoverflow.com/questions/58000219/calling-clock-gives-an-error-undefined-reference-to-times", "title": "Calling `clock()` gives an error: undefined reference to `_times&#39;", "body": "<p>I'm trying to use the <code>clock()</code> function in my C++ code but it's not working. I've tried adding <code>#include &lt;time.h&gt;</code> or <code>#include &lt;ctime&gt;</code> but it hasn't helped. I'm using Atmel Studio. </p>\n\n<pre><code>#include &lt;time.h&gt;\n\nint main(void)\n{\n        clock_t myClock = clock();\n}\n</code></pre>\n\n<p>There shouldn't be an error, but I'm getting the following error messages:</p>\n\n<pre><code>recipe for target 'SAMS70.elf' failed\nundefined reference to `_times'\nld returned 1 exit status\n</code></pre>\n\n<p>Does anyone have an idea why this might be happening?</p>\n"}, {"tags": ["c++", "dynamic", "polymorphism", "shared-libraries", "rtti"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1568836795, "post_id": 57999911, "comment_id": 102405793, "body": "You answered the question yourself. There is no standardized ABIs for virtual calls, so absent any implicit guarantees, you can&#39;t use it."}, {"owner": {"reputation": 768, "user_id": 6530474, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qeyoz.png?s=128&g=1", "display_name": "Hrisip", "link": "https://stackoverflow.com/users/6530474/hrisip"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1568837215, "post_id": 57999911, "comment_id": 102405938, "body": "@SergeyA, my fears are justified... The whole world of mine begins to collapse"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1568837597, "post_id": 57999911, "comment_id": 102406068, "body": "Well, don&#39;t be so grim. If you are on Linux, I am pretty certain all 3 big compilers (icc, CLang, gcc) will use same mechanisms for virtual dispatch."}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1568837696, "post_id": 57999911, "comment_id": 102406099, "body": "Same on Mac, all the compilers use the same ABI. On Windows gcc wont use the visual studio ABI but clang can if you use the right switches"}, {"owner": {"reputation": 768, "user_id": 6530474, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qeyoz.png?s=128&g=1", "display_name": "Hrisip", "link": "https://stackoverflow.com/users/6530474/hrisip"}, "edited": false, "score": 0, "creation_date": 1568838124, "post_id": 57999911, "comment_id": 102406275, "body": "I know, there&#39;s a great chance the ABIs will match, but still, it&#39;s not guaranteed. Even the same compiler can change the ABI(though it&#39;s extremely unlikely in the front of object and virtual tables layout). BTY, I&#39;m on Windows, deep in legacy."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1568838347, "post_id": 57999911, "comment_id": 102406369, "body": "There is no compatibility  guaranteed even if everything is compiled with the same compiler. In order to use any kind of objects from dll both binaries must be compiled with compatible settings (which typically implies not only the same version of the compiler but also relevant arguments being the same). <code>dynamic_cast</code> does use RTTI when casting from parent class to child class. If you are looking for a standardized way of doing polymorphism you should rely on pure C api like COM does. With C compilers are less likely to break things."}, {"owner": {"reputation": 768, "user_id": 6530474, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qeyoz.png?s=128&g=1", "display_name": "Hrisip", "link": "https://stackoverflow.com/users/6530474/hrisip"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1568838989, "post_id": 57999911, "comment_id": 102406600, "body": "@VTT if <code>dynamic_cast</code> does use RTTI,how do you explain the need for the type to be polymorphic and the absence of errors when I turn off RTTI and use <code>dynamic_cast</code>. It can deduce the type from the vtable pointer, why would it bother with some type information(that actually rests in the vtable itself, if I&#39;m not mistaken). And I don&#39;t see how the fact that COM uses C makes it any better. You still would write a COM object in C++, which means that your compiler must generate the same code COM expects. And there&#39;s nothing a C compiler can break there, since an interface is just a <code>struct</code> in C"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1568839590, "post_id": 57999911, "comment_id": 102406809, "body": "It can deduce the type from the runtime information accessible through the same vtable pointer. <i>&quot;absence of errors when I turn off RTTI and use dynamic_cast&quot;</i> - mcve or it did not happen. Note that compilers typically issue a warning or an error when <code>dynamic_cast</code> is used while RTTI is disabled. C makes it better by prohibiting use of C++ABI dependent types in public interface. COM also defines format of vtable and member function pointers stored in it, as well as COM-style RTTI and <code>dynamic_cast</code>  through QuoeryInterface which is again does not depend on C++ABI or RTTI."}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1568839855, "post_id": 57999911, "comment_id": 102406910, "body": "COM (CORBA) specifies the ABI for objects and their interactions. Without it, there is just the.platform ABI, specifying structs and free functions. You can write COM in C++; the compiler will then make sure to generate interoperable code."}, {"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1568845502, "post_id": 57999911, "comment_id": 102408554, "body": "How do you think <code>dynamic_cast</code> is implemented? It&#39;s probably just a hidden function added to the vtable."}, {"owner": {"reputation": 768, "user_id": 6530474, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qeyoz.png?s=128&g=1", "display_name": "Hrisip", "link": "https://stackoverflow.com/users/6530474/hrisip"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1568872371, "post_id": 57999911, "comment_id": 102413811, "body": "@VTT, Suppose you have a registered COM object in some .dll written in C++, so this object is just a class that inherits from a class that has only pure virtual functions.  You create that object, meaning you get a pointer to an object layout that is unknown, like what if the vtable pointer is in the end of the layout, what if the pointers in the table are rearranged. Which means you get UB when you call a method of such object. The only way to enforce it is to have some special flags in the compiler. I really don&#39;t see how it can be guaranteed by the standard. Or I&#39;m not seeing your point..."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1568884385, "post_id": 57999911, "comment_id": 102419689, "body": "If you have a COM object in some dll written in C, C++, C#, Ada or whatever other language this means that layout of interface object (position of vtable pointer that is), structure of vtable and calling convention of functions are all well-defined. So COM interface consumers may use COM objects even if implementation languages are completely different. But it is not in case if you are trying to use some abstract C++ class as an interface to work with random C++ dll."}], "answers": [{"comments": [{"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1568884708, "post_id": 58001084, "comment_id": 102419849, "body": "There is no such thing as &quot;ABI compatible C++ interfaces&quot;. One can not hope to be able to all method of some class through a some abstract base class. COM works because it defines ABI. Writing COM-like C++ interfaces does not automatically mean that objects can be used from code compiled with different compiler."}, {"owner": {"reputation": 76, "user_id": 6063908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wXrSZ.jpg?s=128&g=1", "display_name": "Spacechild1", "link": "https://stackoverflow.com/users/6063908/spacechild1"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1568898756, "post_id": 58001084, "comment_id": 102427840, "body": "My very first sentence is: &quot;C++ doesn&#39;t have a standardized ABI, but if your interface follows a couple of rules, you can achieve ABI compatibility between most compilers.&quot; Maybe I should stress the word &quot;most&quot;?  So yes, it&#39;s not guaranteed by the standard but in practice, COM-like C++ interfaces are supported by all major compilers, <i>especially</i> on Windows. The VST3 SDK has a cross-platform COM-like plugin interface that has been around for over 10 years now..."}], "tags": [], "owner": {"reputation": 76, "user_id": 6063908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wXrSZ.jpg?s=128&g=1", "display_name": "Spacechild1", "link": "https://stackoverflow.com/users/6063908/spacechild1"}, "is_accepted": true, "score": 1, "last_activity_date": 1568899603, "last_edit_date": 1568899603, "creation_date": 1568842909, "answer_id": 58001084, "question_id": 57999911, "link": "https://stackoverflow.com/questions/57999911/is-it-safe-to-use-polymorphic-objects-from-a-shared-library/58001084#58001084", "title": "Is it safe to use polymorphic objects from a shared library?", "body": "<p>C++ doesn't have a standardized ABI but if your interface follows a couple of rules, you can achieve ABI compatibility between <strong>most</strong> compilers - especially on Windows. This technique is most famously used in Microsoft's COM (<a href=\"https://en.wikipedia.org/wiki/Component_Object_Model\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Component_Object_Model</a>), but I've also seen it in Steinberg's VST Model Architecture (<a href=\"https://steinbergmedia.github.io/vst3_doc/base/index.html\" rel=\"nofollow noreferrer\">https://steinbergmedia.github.io/vst3_doc/base/index.html</a>) and in the \"openvr\" library (<a href=\"https://github.com/ValveSoftware/openvr/blob/5aa6c5f0f6520c59c4dce124541ecc62604fd7a5/headers/openvr.h#L1940\" rel=\"nofollow noreferrer\">https://github.com/ValveSoftware/openvr/blob/5aa6c5f0f6520c59c4dce124541ecc62604fd7a5/headers/openvr.h#L1940</a>).</p>\n\n<p>Here are the basic rules for such ABI compatible C++ interfaces:</p>\n\n<ol>\n<li>Only pure virtual methods. This makes multiple inheritance relatively unproblematic. One important caveat is that only the implementation side is allowed to perform a <code>static_cast</code> from one interface to another (to guarantee the right <code>this</code>-pointer adjustment). To solve this problem, every COM interface provides the <code>QueryInterface()</code> method, which is a bit similar to a <code>dynamic_cast</code>.</li>\n<li>No virtual destructors. Some compilers generate more than 1 vtable entry (see <a href=\"https://stackoverflow.com/questions/44558119/why-do-i-have-two-destructor-implementations-in-my-assembly-output\">Why do I have two destructor implementations in my assembly output?</a>). This means you must implement your own mechanism for destructing an object from a base pointer. COM and VST3 use reference counting with <code>addRef()</code> and <code>release()</code> and they have their own type of client-side smart pointers. Alternatively, you can have a simple <code>destroy()</code> method and store your object instance in a regular <code>std::unique_ptr</code> or <code>std::shared_ptr</code> with a custom deleter.</li>\n<li>Memory management must not cross interface boundaries, i.e. you must not allocate memory on one side and deallocate on the other side, because each side might use a different runtime. The library has to provide a free function or interface method to deallocate objects. It might also allow users to pass an allocator, so the memory management stays on the client side.</li>\n<li>No overloaded virtual methods. Most compilers generally put methods in the vtable in the order of their declaration, but apparently the order of <em>overloaded methods</em> in the vtable varies across compilers.</li>\n<li>All method parameters must be primitive types or public classes with a stable object layout (preferable PODs). You must not use any classes from the C++ standard library like <code>std::string</code> because the implementation is not stable.</li>\n<li>Once the interface is published, it must never change. You can extend existing interfaces by inheriting from them:</li>\n</ol>\n\n<pre><code>class IFoo { \npublic:\n    virtual void foo() = 0; \n};\n\nclass IFooEx : public IFoo {\npublic:\n    virtual void bar() = 0; \n};\n</code></pre>\n\n<p>or add a new interface and use multiple inheritance.</p>\n\n<p>That being said, as a library author you should think twice before choosing this technique, especially if you plan to add bindings for other languages. Although the vtables of such C++ interface can be translated to C structs of function pointers, the usual approaches are</p>\n\n<p><em>a)</em> start with a C API and provide a client-side C++ wrapper</p>\n\n<p><em>b)</em> use regular C++ interfaces and provide a C layer on top of it.</p>\n\n<p>But with the right abstractions, COM-like C++ interfaces can be quite nice to program with.</p>\n"}], "owner": {"reputation": 768, "user_id": 6530474, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qeyoz.png?s=128&g=1", "display_name": "Hrisip", "link": "https://stackoverflow.com/users/6530474/hrisip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 1, "accepted_answer_id": 58001084, "answer_count": 1, "score": 2, "last_activity_date": 1568899603, "creation_date": 1568836474, "question_id": 57999911, "link": "https://stackoverflow.com/questions/57999911/is-it-safe-to-use-polymorphic-objects-from-a-shared-library", "title": "Is it safe to use polymorphic objects from a shared library?", "body": "<p>I have an interface, and I have an implementation of that interface in a shared library, and who knows what it was compiled with.</p>\n\n<p><code>dynamic_cast</code> works only on polymorphic types. So I can assume it does not use RTTI, so I do disable it, and it compiles.</p>\n\n<p>And since there's no standardized way of doing polymorphism, the layout of an object of a polymorphic type is unknown, so is the layout of its vtable.</p>\n\n<p>Thus the question arises: can I use an object of a polymorphic type from a shared library that was compiled with a compiler different from the one I use? And, more importantly, why?</p>\n"}, {"tags": ["c++", "file-io", "ifstream"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 4, "creation_date": 1568835857, "post_id": 57999769, "comment_id": 102405420, "body": "Use a <code>while</code> loop instead of <code>if</code>."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 2, "creation_date": 1568835870, "post_id": 57999769, "comment_id": 102405429, "body": "1) &quot;<i>I have it working for the first line in a text file, but how do I read the others?</i>&quot; Did you try using a loop? Consider learning from a <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good C++ book</a>. 2) Why is this question tagged with <a href=\"https://stackoverflow.com/questions/tagged/c\">c</a>, if it&#39;s, obviously, not C?"}, {"owner": {"reputation": 382, "user_id": 11226568, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lYOrC.jpg?s=128&g=1", "display_name": "EatSleepCode", "link": "https://stackoverflow.com/users/11226568/eatsleepcode"}, "edited": false, "score": 0, "creation_date": 1568835994, "post_id": 57999769, "comment_id": 102405476, "body": "Super noob is ranking up. Thank you Johnny Mopp"}], "answers": [{"tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 1, "last_activity_date": 1568836821, "creation_date": 1568836821, "answer_id": 57999972, "question_id": 57999769, "link": "https://stackoverflow.com/questions/57999769/how-to-read-the-2nd-3rd-and-4th-line-of-a-text-file-c/57999972#57999972", "title": "How to read the 2nd, 3rd and 4th line of a text file. C++", "body": "<p>I'll give you some hints - this is probably more like <a href=\"https://codereview.stackexchange.com/\">CodeReview.SE</a> now...</p>\n\n<p>I would recommend</p>\n\n<ul>\n<li>separating the reading from printing</li>\n<li>treating the grades as numbers (e.g. <code>int</code> or <code>double</code>) so you can actually work with them, and have some validation that you're not reading non-sense</li>\n<li>Use idiomatic loops, don't just <code>if (infile.good())</code> - e.g. you can't tell whether you've reached end-of-file before you try to read</li>\n</ul>\n\n<p>Fixing up the interface, I'd suggest something like this</p>\n\n<pre><code>struct Grade {\n    void readInput(std::string fname);\n\n    void print(std::ostream&amp; os = std::cout) const;\n  private:\n    static constexpr auto max_line_length = std::numeric_limits&lt;ssize_t&gt;::max();\n    std::vector&lt;int&gt; grades;\n};\n</code></pre>\n\n<p>Note that <code>readInput</code> reads into <code>grades</code> without printing anything. Note <em>also</em> that it takes the name of the file to read as the argument, instead of hardcoding some filename.</p>\n\n<pre><code>int main() {\n    Grade grading;\n\n    grading.readInput(\"grades.txt\");\n    grading.print();\n}\n</code></pre>\n\n<p>This would be the main program. </p>\n\n<p>The simplified/extended version of <code>readGrades</code> could be:</p>\n\n<pre><code>void Grade::readInput(std::string fname) {\n    std::ifstream infile(fname);\n\n    infile.ignore(max_line_length, '\\n'); // ignore the first line\n\n    int grade = 0;\n\n    while (infile &gt;&gt; grade) {\n        grades.push_back(grade);\n        infile.ignore(max_line_length, '\\n'); // ignore rest eating newline\n    }\n}\n</code></pre>\n\n<p>Note how we ignore lines or parts thereof that we are not interested in. For extra control consider disabling white-space skipping:</p>\n\n<pre><code> infile &gt;&gt; std::nowskipws;\n</code></pre>\n\n<p>The print function could be a simple:</p>\n\n<pre><code>void Grade::print(std::ostream&amp; os) const {\n    os &lt;&lt; \"Grades:\";\n    for (int g : grades) {\n        os &lt;&lt; \" \" &lt;&lt; g;\n    }\n    os &lt;&lt; std::endl;\n}\n</code></pre>\n\n<h2>Full Demo</h2>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/3a59f798409caba8\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n\nstruct Grade {\n    void readInput(std::string fname);\n\n    void print(std::ostream&amp; os = std::cout) const;\n  private:\n    static constexpr auto max_line_length = std::numeric_limits&lt;ssize_t&gt;::max();\n    std::vector&lt;int&gt; grades;\n};\n\nint main() {\n    Grade grading;\n\n    grading.readInput(\"grades.txt\");\n    grading.print();\n}\n\nvoid Grade::readInput(std::string fname) {\n    std::ifstream infile(fname);\n\n    infile.ignore(max_line_length, '\\n'); // ignore the first line\n\n    int grade = 0;\n\n    while (infile &gt;&gt; grade) {\n        grades.push_back(grade);\n        infile.ignore(max_line_length, '\\n'); // ignore rest eating newline\n    }\n}\n\nvoid Grade::print(std::ostream&amp; os) const {\n    os &lt;&lt; \"Grades:\";\n    for (int g : grades) {\n        os &lt;&lt; \" \" &lt;&lt; g;\n    }\n    os &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Prints</p>\n\n<pre><code>Grades: 12 17 1 29\n</code></pre>\n\n<p>Given <code>grades.txt</code>:</p>\n\n<pre><code>Ignore the first line\n12\n17\n1\n29\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1568838288, "creation_date": 1568838288, "answer_id": 58000274, "question_id": 57999769, "link": "https://stackoverflow.com/questions/57999769/how-to-read-the-2nd-3rd-and-4th-line-of-a-text-file-c/58000274#58000274", "title": "How to read the 2nd, 3rd and 4th line of a text file. C++", "body": "<p>A simple version:  </p>\n\n<pre><code>std::string line1;\nstd::string line2;\nstd::string line3;\nstd::string line4;\nstd::getline(infile, line1);\nstd::getline(infile, line2);\nstd::getline(infile, line3);\nstd::getline(infile, line4);\n</code></pre>\n\n<p>With a loop:</p>\n\n<pre><code>static const unsigned int LINES_TO_READ = 3;\nstd::string line1_ignored;\nstd::getline(infile, line1_ignored);\nfor (unsigned int i = 0; (i &lt; LINES_TO_READ); ++i)\n{\n   std::string text_line;\n   if (std::getline(infile, text_line))\n   {\n      std::cout &lt;&lt; text_line &lt;&lt; std::endl;\n   }\n   else\n   {\n       break;\n   }\n}\n</code></pre>\n\n<p>Both versions read the first line.  Ignore the contents in the variable if you wish.  </p>\n\n<p>The simple method reads each text line, into separate variables.  </p>\n\n<p>The second reads text lines using a known-quantity loop.  </p>\n"}], "owner": {"reputation": 382, "user_id": 11226568, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lYOrC.jpg?s=128&g=1", "display_name": "EatSleepCode", "link": "https://stackoverflow.com/users/11226568/eatsleepcode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1568838288, "creation_date": 1568835739, "last_edit_date": 1568836861, "question_id": 57999769, "link": "https://stackoverflow.com/questions/57999769/how-to-read-the-2nd-3rd-and-4th-line-of-a-text-file-c", "title": "How to read the 2nd, 3rd and 4th line of a text file. C++", "body": "<p>I am trying to read each line of a text file in C++. I have it working for the first line in a text file, but how do I read the others? Also, I am a C++ super noob, please don't roast me.</p>\n\n<p>Code:</p>\n\n<pre><code>void Grade::readInput()\n{\n    ifstream infile(\"Grades.txt\");\n\n    if (infile.good())\n    {\n        string sLine;\n        getline(infile, sLine);\n        cout &lt;&lt; \"This is the val \" &lt;&lt; sLine &lt;&lt; endl;\n    }\n\n    infile.close();\n}\n</code></pre>\n\n<p>This is the output I want:</p>\n\n<p>This is the val 12</p>\n\n<p>This is the val 17</p>\n\n<p>This is the val 1</p>\n\n<p>This is the val 29</p>\n"}, {"tags": ["c++", "c", "xcode", "architecture"], "comments": [{"owner": {"reputation": 1, "user_id": 12086946, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-kI2mPvEYR1k/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re-mZGEJVR1gLzRxjaZDWKGTTuicA/photo.jpg?sz=128", "display_name": "Yuhongze Zhou", "link": "https://stackoverflow.com/users/12086946/yuhongze-zhou"}, "edited": false, "score": 0, "creation_date": 1568835593, "post_id": 57999716, "comment_id": 102405301, "body": "Image Link is below."}, {"owner": {"reputation": 806, "user_id": 3472073, "user_type": "registered", "profile_image": "https://graph.facebook.com/1809942272/picture?type=large", "display_name": "ale_stro", "link": "https://stackoverflow.com/users/3472073/ale-stro"}, "edited": false, "score": 0, "creation_date": 1570615707, "post_id": 57999716, "comment_id": 102966031, "body": "the same for me"}], "owner": {"reputation": 1, "user_id": 12086946, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-kI2mPvEYR1k/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re-mZGEJVR1gLzRxjaZDWKGTTuicA/photo.jpg?sz=128", "display_name": "Yuhongze Zhou", "link": "https://stackoverflow.com/users/12086946/yuhongze-zhou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568835433, "creation_date": 1568835433, "question_id": 57999716, "link": "https://stackoverflow.com/questions/57999716/transfer-old-32-bit-project-to-64-bit-in-xcode-9-3-with-32bit-target", "title": "Transfer Old 32-bit Project to 64 bit in Xcode 9.3 with 32bit target", "body": "<p>as the title mentioned, Here are errors thrown from target who uses 32-bit library and the screenshot of Architectures of this target. I do not know where it is going wrong. Thank you for all possible help! I am in Mojave MacOSX. In order to build old 32-bit, I changed architectures of other target to 64 bit and there is no error for them while building. But for one target which is something like SWIG interface using python in C/C++. \n[enter image description here][1]</p>\n\n<pre><code>    cd \"/Users/zhouyuhongze/Downloads/cove_dev copy-64-9.3\"\n    export LANG=en_US.US-ASCII\n    /Applications/Xcode9.3.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x c++-header -arch ppc -fmessage-length=0 -fdiagnostics-show-note-include-stack -fmacro-backtrace-limit=0 -gmodules -Wno-trigraphs -fpascal-strings -O0 -Wno-missing-field-initializers -Wno-missing-prototypes -Wno-non-virtual-dtor -Wno-overloaded-virtual -Wno-exit-time-destructors -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wno-empty-body -Wno-uninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wno-constant-conversion -Wno-int-conversion -Wno-bool-conversion -Wno-enum-conversion -Wno-float-conversion -Wno-non-literal-null-conversion -Wno-objc-literal-conversion -Wno-shorten-64-to-32 -Wno-newline-eof -Wno-c++11-extensions -DMAC -DUWWF_EXPORTS -isysroot /Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk -fstrict-aliasing -Wdeprecated-declarations -Winvalid-offsetof -mmacosx-version-min=10.14 -g -fvisibility-inlines-hidden -Wno-sign-conversion -Wno-infinite-recursion -Wno-move -Wno-comma -Wno-block-capture-autoreleasing -Wno-strict-prototypes -Wno-range-loop-analysis -index-store-path /Users/zhouyuhongze/Library/Developer/Xcode/DerivedData/cove-brktkbotsuuztjcusjhbbaohvtrb/Index/DataStore -I/Users/zhouyuhongze/Library/Developer/Xcode/DerivedData/cove-brktkbotsuuztjcusjhbbaohvtrb/Build/Intermediates.noindex/cove.build/Debug/uwwf_python.build/_uwwf_python.hmap -I/Users/zhouyuhongze/Library/Developer/Xcode/DerivedData/cove-brktkbotsuuztjcusjhbbaohvtrb/Build/Products/Debug/include -Ibase -Ibase/vl/include -Iidv -Ilib/fltk -Ilib/netcdf -I/Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I/Users/zhouyuhongze/Library/Developer/Xcode/DerivedData/cove-brktkbotsuuztjcusjhbbaohvtrb/Build/Intermediates.noindex/cove.build/Debug/uwwf_python.build/DerivedSources/ppc -I/Users/zhouyuhongze/Library/Developer/Xcode/DerivedData/cove-brktkbotsuuztjcusjhbbaohvtrb/Build/Intermediates.noindex/cove.build/Debug/uwwf_python.build/DerivedSources -F/Users/zhouyuhongze/Library/Developer/Xcode/DerivedData/cove-brktkbotsuuztjcusjhbbaohvtrb/Build/Products/Debug -MD -MT dependencies -MF /Users/zhouyuhongze/Library/Developer/Xcode/DerivedData/cove-brktkbotsuuztjcusjhbbaohvtrb/Build/Intermediates.noindex/PrecompiledHeaders/cove_Prefix-gvxvqsoycewanvflcbunhiimhfnz/cove_Prefix.pch.d -c /Users/zhouyuhongze/Downloads/cove_dev\\ copy-64-9.3/cove_Prefix.pch -o /Users/zhouyuhongze/Library/Developer/Xcode/DerivedData/cove-brktkbotsuuztjcusjhbbaohvtrb/Build/Intermediates.noindex/PrecompiledHeaders/cove_Prefix-gvxvqsoycewanvflcbunhiimhfnz/cove_Prefix.pch.pch --serialize-diagnostics /Users/zhouyuhongze/Library/Developer/Xcode/DerivedData/cove-brktkbotsuuztjcusjhbbaohvtrb/Build/Intermediates.noindex/PrecompiledHeaders/cove_Prefix-gvxvqsoycewanvflcbunhiimhfnz/cove_Prefix.pch.dia\n\nIn file included from /Users/zhouyuhongze/Downloads/cove_dev copy-64-9.3/cove_Prefix.pch:5:\nIn file included from /Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/System/Library/Frameworks/Carbon.framework/Headers/Carbon.h:20:\nIn file included from /Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/System/Library/Frameworks/CoreServices.framework/Headers/CoreServices.h:19:\nIn file included from /Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/System/Library/Frameworks/CoreFoundation.framework/Headers/CoreFoundation.h:16:\nIn file included from /Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/usr/include/sys/types.h:75:\n/Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/usr/include/sys/cdefs.h:763:2: error: Unsupported architecture\n#error Unsupported architecture\n ^\nIn file included from /Users/zhouyuhongze/Downloads/cove_dev copy-64-9.3/cove_Prefix.pch:5:\nIn file included from /Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/System/Library/Frameworks/Carbon.framework/Headers/Carbon.h:20:\nIn file included from /Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/System/Library/Frameworks/CoreServices.framework/Headers/CoreServices.h:19:\nIn file included from /Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/System/Library/Frameworks/CoreFoundation.framework/Headers/CoreFoundation.h:16:\nIn file included from /Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/usr/include/sys/types.h:78:\n/Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/usr/include/machine/types.h:37:2: error: architecture not supported\n#error architecture not supported\n ^\nIn file included from /Users/zhouyuhongze/Downloads/cove_dev copy-64-9.3/cove_Prefix.pch:5:\nIn file included from /Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/System/Library/Frameworks/Carbon.framework/Headers/Carbon.h:20:\nIn file included from /Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/System/Library/Frameworks/CoreServices.framework/Headers/CoreServices.h:19:\nIn file included from /Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/System/Library/Frameworks/CoreFoundation.framework/Headers/CoreFoundation.h:16:\nIn file included from /Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/usr/include/sys/types.h:79:\nIn file included from /Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/usr/include/sys/_types.h:33:\n/Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/usr/include/machine/_types.h:34:2: error: architecture not supported\n#error architecture not supported\n ^\nIn file included from /Users/zhouyuhongze/Downloads/cove_dev copy-64-9.3/cove_Prefix.pch:5:\nIn file included from /Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/System/Library/Frameworks/Carbon.framework/Headers/Carbon.h:20:\nIn file included from /Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/System/Library/Frameworks/CoreServices.framework/Headers/CoreServices.h:19:\nIn file included from /Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/System/Library/Frameworks/CoreFoundation.framework/Headers/CoreFoundation.h:16:\nIn file included from /Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/usr/include/sys/types.h:79:\n/Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/usr/include/sys/_types.h:55:9: error: unknown type name '__int64_t'\ntypedef __int64_t       __darwin_blkcnt_t;      /* total blocks */\n        ^\n/Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/usr/include/sys/_types.h:56:9: error: unknown type name '__int32_t'\ntypedef __int32_t       __darwin_blksize_t;     /* preferred block size */\n        ^\n/Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/usr/include/sys/_types.h:57:9: error: unknown type name '__int32_t'\ntypedef __int32_t       __darwin_dev_t;         /* dev_t */\n        ^\n/Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/usr/include/sys/_types.h:60:9: error: unknown type name '__uint32_t'\ntypedef __uint32_t      __darwin_gid_t;         /* [???] process and group IDs */\n        ^\n/Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/usr/include/sys/_types.h:61:9: error: unknown type name '__uint32_t'\ntypedef __uint32_t      __darwin_id_t;          /* [XSI] pid_t, uid_t, or gid_t*/\n        ^\n/Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/usr/include/sys/_types.h:62:9: error: unknown type name '__uint64_t'\ntypedef __uint64_t      __darwin_ino64_t;       /* [???] Used for 64 bit inodes */\n        ^\n/Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/usr/include/sys/_types.h:68:9: error: unknown type name '__darwin_natural_t'\ntypedef __darwin_natural_t __darwin_mach_port_name_t; /* Used by mach */\n        ^\n/Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/usr/include/sys/_types.h:70:9: error: unknown type name '__uint16_t'\ntypedef __uint16_t      __darwin_mode_t;        /* [???] Some file attributes */\n        ^\n/Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/usr/include/sys/_types.h:71:9: error: unknown type name '__int64_t'\ntypedef __int64_t       __darwin_off_t;         /* [???] Used for file sizes */\n        ^\n/Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/usr/include/sys/_types.h:72:9: error: unknown type name '__int32_t'\ntypedef __int32_t       __darwin_pid_t;         /* [???] process and group IDs */\n        ^\n/Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/usr/include/sys/_types.h:73:9: error: unknown type name '__uint32_t'\ntypedef __uint32_t      __darwin_sigset_t;      /* [???] signal set */\n        ^\n/Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/usr/include/sys/_types.h:74:9: error: unknown type name '__int32_t'\ntypedef __int32_t       __darwin_suseconds_t;   /* [???] microseconds */\n        ^\n/Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/usr/include/sys/_types.h:75:9: error: unknown type name '__uint32_t'\ntypedef __uint32_t      __darwin_uid_t;         /* [???] user IDs */\n        ^\n/Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/usr/include/sys/_types.h:76:9: error: unknown type name '__uint32_t'\ntypedef __uint32_t      __darwin_useconds_t;    /* [???] microseconds */\n        ^\nIn file included from /Users/zhouyuhongze/Downloads/cove_dev copy-64-9.3/cove_Prefix.pch:5:\nIn file included from /Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/System/Library/Frameworks/Carbon.framework/Headers/Carbon.h:20:\nIn file included from /Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/System/Library/Frameworks/CoreServices.framework/Headers/CoreServices.h:19:\nIn file included from /Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/System/Library/Frameworks/CoreFoundation.framework/Headers/CoreFoundation.h:16:\nIn file included from /Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/usr/include/sys/types.h:81:\n/Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/usr/include/machine/endian.h:37:2: error: architecture not supported\n#error architecture not supported\n ^\nIn file included from /Users/zhouyuhongze/Downloads/cove_dev copy-64-9.3/cove_Prefix.pch:5:\nIn file included from /Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/System/Library/Frameworks/Carbon.framework/Headers/Carbon.h:20:\nIn file included from /Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/System/Library/Frameworks/CoreServices.framework/Headers/CoreServices.h:19:\nIn file included from /Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/System/Library/Frameworks/CoreFoundation.framework/Headers/CoreFoundation.h:16:\n/Applications/Xcode9.3.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/usr/include/sys/types.h:95:9: error: unknown type name 'u_int64_t'\ntypedef u_int64_t               u_quad_t;       /* quads */\n        ^\nfatal error: too many errors emitted, stopping now [-ferror-limit=]\n20 errors generated.```\n\n\n  [1]: https://i.stack.imgur.com/LmnLG.png\n</code></pre>\n"}, {"tags": ["c++", "linux", "ubuntu", "caffe", "ld"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1568842855, "post_id": 57999582, "comment_id": 102407884, "body": "<a href=\"https://askubuntu.com/q/160897\">How do I search for available packages from the command-line?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2191, "user_id": 7070965, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qEhQf.png?s=128&g=1", "display_name": "dtell", "link": "https://stackoverflow.com/users/7070965/dtell"}, "edited": false, "score": 1, "creation_date": 1568835047, "post_id": 57999628, "comment_id": 102405105, "body": "While this code snippet may solve the question, <a href=\"http://meta.stackexchange.com/questions/114762/explaining-entirely-code-based-answers\">including an explanation</a> really helps to improve the quality of your post. Remember that you are answering the question for readers in the future, and those people might not know the reasons for your code suggestion."}, {"owner": {"reputation": 893, "user_id": 6277384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6172ff7a5d08eb58a7bbcc7dd99a08c?s=128&d=identicon&r=PG", "display_name": "yumetodo", "link": "https://stackoverflow.com/users/6277384/yumetodo"}, "reply_to_user": {"reputation": 2191, "user_id": 7070965, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qEhQf.png?s=128&g=1", "display_name": "dtell", "link": "https://stackoverflow.com/users/7070965/dtell"}, "edited": false, "score": 0, "creation_date": 1568835351, "post_id": 57999628, "comment_id": 102405225, "body": "It&#39;s widely known that to use some library on Ubuntu, we need to install <code>libxxx-dev</code> package."}, {"owner": {"reputation": 2191, "user_id": 7070965, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qEhQf.png?s=128&g=1", "display_name": "dtell", "link": "https://stackoverflow.com/users/7070965/dtell"}, "edited": false, "score": 0, "creation_date": 1568835419, "post_id": 57999628, "comment_id": 102405247, "body": "Yes, but we don&#39;t like code only answers here. Adding just one or two sentences that make your answer more readable would be great!"}, {"owner": {"reputation": 893, "user_id": 6277384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6172ff7a5d08eb58a7bbcc7dd99a08c?s=128&d=identicon&r=PG", "display_name": "yumetodo", "link": "https://stackoverflow.com/users/6277384/yumetodo"}, "reply_to_user": {"reputation": 2191, "user_id": 7070965, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qEhQf.png?s=128&g=1", "display_name": "dtell", "link": "https://stackoverflow.com/users/7070965/dtell"}, "edited": false, "score": 0, "creation_date": 1568835554, "post_id": 57999628, "comment_id": 102405288, "body": "OK, Ok, ok. I just now add completely same text that already commented."}, {"owner": {"reputation": 3341, "user_id": 3204706, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/GIk0b.jpg?s=128&g=1", "display_name": "Tina J", "link": "https://stackoverflow.com/users/3204706/tina-j"}, "edited": false, "score": 0, "creation_date": 1568835557, "post_id": 57999628, "comment_id": 102405291, "body": "@yumetodo didn&#39;t know that before...especially that Caffe website itself didn&#39;t mention it. Does this rule apply to ALL libraries?!"}, {"owner": {"reputation": 4535, "user_id": 59081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c17b54bbea172f608e552f9bf67d4f9?s=128&d=identicon&r=PG", "display_name": "Tanveer Badar", "link": "https://stackoverflow.com/users/59081/tanveer-badar"}, "edited": false, "score": 0, "creation_date": 1568835667, "post_id": 57999628, "comment_id": 102405345, "body": "Guess then I don&#39;t make the cut to be in &quot;widely knowing&quot; group. &quot;Narrator: It wasn&#39;t widely known outside the cult.&quot;"}, {"owner": {"reputation": 893, "user_id": 6277384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6172ff7a5d08eb58a7bbcc7dd99a08c?s=128&d=identicon&r=PG", "display_name": "yumetodo", "link": "https://stackoverflow.com/users/6277384/yumetodo"}, "edited": false, "score": 1, "creation_date": 1568835793, "post_id": 57999628, "comment_id": 102405394, "body": "AFAIK, this rule can be applied to almost all library. If you run <code>apt search caffe-cpu</code>, you could notice <code>libcaffe-cpu-dev</code>."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 3341, "user_id": 3204706, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/GIk0b.jpg?s=128&g=1", "display_name": "Tina J", "link": "https://stackoverflow.com/users/3204706/tina-j"}, "edited": false, "score": 1, "creation_date": 1568838161, "post_id": 57999628, "comment_id": 102406292, "body": "@TinaJ It&#39;s applicable for the libraries you&#39;d like to use in development since the <code>dev</code> packages includes header files that you need to compile and debug versions of the libraries etc.. To use an already release-compiled program, you won&#39;t need the <code>dev</code> packages. It&#39;s similar on many platforms."}], "tags": [], "owner": {"reputation": 893, "user_id": 6277384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6172ff7a5d08eb58a7bbcc7dd99a08c?s=128&d=identicon&r=PG", "display_name": "yumetodo", "link": "https://stackoverflow.com/users/6277384/yumetodo"}, "is_accepted": true, "score": 2, "last_activity_date": 1568835511, "last_edit_date": 1568835511, "creation_date": 1568834971, "answer_id": 57999628, "question_id": 57999582, "link": "https://stackoverflow.com/questions/57999582/usr-bin-ld-cannot-find-lcaffe/57999628#57999628", "title": "/usr/bin/ld: cannot find -lcaffe", "body": "<pre><code>sudo apt install libcaffe-cpu-dev\n</code></pre>\n\n<p>It's widely known that to use some library on Ubuntu, we need to install <code>libxxx-dev</code> package.</p>\n"}], "owner": {"reputation": 3341, "user_id": 3204706, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/GIk0b.jpg?s=128&g=1", "display_name": "Tina J", "link": "https://stackoverflow.com/users/3204706/tina-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1563, "favorite_count": 1, "accepted_answer_id": 57999628, "answer_count": 1, "score": -2, "last_activity_date": 1568835511, "creation_date": 1568834794, "question_id": 57999582, "link": "https://stackoverflow.com/questions/57999582/usr-bin-ld-cannot-find-lcaffe", "title": "/usr/bin/ld: cannot find -lcaffe", "body": "<p>I installed Caffe-cpu on my Ubuntu 18.04 via the apt-get command, as it instructs on their <a href=\"https://caffe.berkeleyvision.org/install_apt.html\" rel=\"nofollow noreferrer\">official website</a>:</p>\n\n<pre><code>sudo apt install caffe-cpu\n</code></pre>\n\n<p>But when trying to run a sample from a <a href=\"https://github.com/Pratik08/Vis-DSS\" rel=\"nofollow noreferrer\">git repo</a>, it needs the header files (<code>caffe.hpp</code>). For that, I downloaded the latest Caffe Git repo and pointed to the sources. But it also complains at the make time:</p>\n\n<pre><code>/usr/bin/ld: cannot find -lcaffe\n</code></pre>\n\n<p>My understanding of similar problems is that apparently it needs to link to <code>caffe.so</code>, but I can't find it anywhere on my machine. What's the problem? How to fix it?</p>\n"}, {"tags": ["c++", "c", "opengl-es", "gtk"], "comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1568836536, "post_id": 57999432, "comment_id": 102405691, "body": "<code>glEGLImageTargetTexture2DOES(GL_TEXTURE_2D, ...);</code> is not legal. <code>glEGLImageTargetTexture2DOES</code> can only ever take <code>GL_TEXTURE_EXTERNAL_OES</code> as a target."}, {"owner": {"reputation": 305, "user_id": 6655884, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JBKc9.jpg?s=128&g=1", "display_name": "Lucas Zanella", "link": "https://stackoverflow.com/users/6655884/lucas-zanella"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1568841091, "post_id": 57999432, "comment_id": 102407321, "body": "@NicolBolas that&#39;s strnge, because no error happens after this call, and it apparently worked when I&#39;ve read with glReadPixels. Also, I took it from where where he said it worked: <a href=\"https://devtalk.nvidia.com/default/topic/1028811/export-gl-texture-as-dmabuf/?offset=8#5384937\" rel=\"nofollow noreferrer\">devtalk.nvidia.com/default/topic/1028811/&hellip;</a>. Do you have an alternative suggestion if not using <code>glEGLImageTargetTexture2DOES</code>?"}, {"owner": {"reputation": 305, "user_id": 6655884, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JBKc9.jpg?s=128&g=1", "display_name": "Lucas Zanella", "link": "https://stackoverflow.com/users/6655884/lucas-zanella"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 1, "creation_date": 1568841141, "post_id": 57999432, "comment_id": 102407338, "body": "@NicolBolas it&#39;s also used here <a href=\"https://devtalk.nvidia.com/default/topic/1030669/jetson-tx1/trying-to-process-with-opengl-an-eglimage-created-from-a-dmabuf_fd-/\" rel=\"nofollow noreferrer\">devtalk.nvidia.com/default/topic/1030669/jetson-tx1/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2453, "user_id": 1853243, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4ka9z.jpg?s=128&g=1", "display_name": "Sreeram Nair", "link": "https://stackoverflow.com/users/1853243/sreeram-nair"}, "is_accepted": true, "score": 2, "last_activity_date": 1569551622, "creation_date": 1569551622, "answer_id": 58127005, "question_id": 57999432, "link": "https://stackoverflow.com/questions/57999432/rendering-an-egl-image-to-a-frame-buffer-with-gtk/58127005#58127005", "title": "Rendering an EGL Image to a frame buffer with GTK", "body": "<p>Check the example implementations in <a href=\"https://devtalk.nvidia.com\" rel=\"nofollow noreferrer\">nvidia</a></p>\n\n<pre><code>tegra_multimedia_api\\argus\\samples\\utils\\PreviewConsumer.cpp\ntegra_multimedia_api\\samples\\common\\classes\\NvEglRenderer.cpp\n</code></pre>\n"}], "owner": {"reputation": 305, "user_id": 6655884, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JBKc9.jpg?s=128&g=1", "display_name": "Lucas Zanella", "link": "https://stackoverflow.com/users/6655884/lucas-zanella"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 654, "favorite_count": 0, "accepted_answer_id": 58127005, "answer_count": 1, "score": 7, "last_activity_date": 1569551622, "creation_date": 1568834000, "last_edit_date": 1569044585, "question_id": 57999432, "link": "https://stackoverflow.com/questions/57999432/rendering-an-egl-image-to-a-frame-buffer-with-gtk", "title": "Rendering an EGL Image to a frame buffer with GTK", "body": "<p>I'm trying to render an <code>EGLImageKHR</code> that I get from NVIDIA's decoder, to a frame buffer so I can render this frame buffer in the screen. I wrote a code that does the following:</p>\n\n<p>Creates two textures, <code>frameBufferTexture</code> and <code>externalTexture</code>. We write our EGLImage to <code>externalTexture</code> and draw to <code>frameBufferTexture</code> from <code>externalTexture</code>. Then we read from <code>frameBufferTexture</code> with <code>glReadPixels</code>:</p>\n\n<pre><code>    glGenFramebuffers(1, &amp;frameBuffer);\n    glBindFramebuffer(GL_FRAMEBUFFER, frameBuffer);\n    glGenTextures(1, &amp;externalTexture);\n    glGenTextures(1, &amp;frameBufferTexture);\n    glBindTexture(GL_TEXTURE_2D, frameBufferTexture);\n    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA8, decodedNvFrame-&gt;width, decodedNvFrame-&gt;height, 0, GL_RGBA, GL_UNSIGNED_BYTE, 0);\n    glUniform1i(texLocation, 0);\n\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\n\n    glBindFramebuffer(GL_FRAMEBUFFER, frameBuffer);\n    glBindTexture(GL_TEXTURE_2D, frameBufferTexture);\n\n    EGLImageKHR hEglImage;\n\n    hEglImage = NvEGLImageFromFd(eglDisplay, decodedNvFrame-&gt;nvBuffer-&gt;planes[0].fd);\n    if (!hEglImage)\n        printf(\"Could not get EglImage from fd. Not rendering\\n\");\n    glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, frameBufferTexture, 0);     \n    glBindTexture(GL_TEXTURE_2D, externalTexture);\n    glEGLImageTargetTexture2DOES(GL_TEXTURE_2D, hEglImage);\n    glUniform1i(texLocation, 0);\n    glBindVertexArray(vertexArrayObject);\n\n    glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);\n\n    glReadBuffer(GL_COLOR_ATTACHMENT0);\n\n    GLenum frameBufferStatus = glCheckFramebufferStatus(GL_FRAMEBUFFER);\n    if (frameBufferStatus!=GL_FRAMEBUFFER_COMPLETE) {\n        printf(\"frameBufferStatus problem!\\n\");\n        abort();\n    }\n    glReadPixels(0, 0, 512, 512, GL_RGBA, GL_UNSIGNED_BYTE, r);\n\n    for (int i = 0; i &lt; 100; ++i)\n    {\n        printf(\"%i \", r[i]);\n    }\n    printf(\"\\n\");\n\n    NvDestroyEGLImage(eglDisplay, hEglImage);\n</code></pre>\n\n<p>See that I'm using glReadPixels to get just a piece of the frame buffer so I can see what's happening.</p>\n\n<p>This is what I get in the output:</p>\n\n<pre><code>0 0 0 255 0 0 0 255 0 0 0 255 ...\n</code></pre>\n\n<p>which I guess comes from the <code>glTexImage2D</code> cal where I pass <code>0</code>. This means that <code>glEGLImageTargetTexture2DOES</code> isn't pushing our image to the <code>externalTexture</code>.</p>\n\n<p>Here's the fragment shader:</p>\n\n<pre><code>#version 330 core\nout vec4 FragColor;\n\nin vec2 TexCoord;\nuniform sampler2D tex;\n\nvoid main()\n{\n    FragColor = texture(tex, TexCoord);\n}\n</code></pre>\n\n<p>If I change this shader to <code>FragColor = vec4(1.0,texture(tex, TexCoord).r,0,1.0)</code> I get this output:</p>\n\n<pre><code>255 0 0 255 255 0 0 255 255 0 0 255 ... \n</code></pre>\n\n<p>which means the shader is working and is writing to the frame buffer.\nIf I put</p>\n\n<pre><code>        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);\n        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);\n        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);\n        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\n        glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA8, 512, 512, 0, GL_RGBA, GL_UNSIGNED_BYTE, d);\n</code></pre>\n\n<p>right after <code>glBindTexture(GL_TEXTURE_2D, externalTexture);</code>, I can see the contents of <code>d</code>, which means my fragment shader is writing data correctly from the texture <code>externalTexture</code>. </p>\n\n<p>This puts the problem in <code>glEGLImageTargetTexture2DOES</code>. It's not filling externalTexture with my image!</p>\n\n<p>Why?</p>\n\n<p><strong>ps</strong>: I suspect of <code>eglDisplay</code>. Why do I need a display to create an <code>EGLImageKHR</code>? I've seen code from NVIDIA that uses <code>NvEGLImageFromFd</code> and passes an eglDisplay from an X11 window. But I'm in GTK and I don t get why an egl display is important, first of all because I'm rendering to a frame buffer, but secondly because I render to GTK's framebuffer when I want to render images.</p>\n"}, {"tags": ["c++", "c++11", "templates", "multidimensional-array", "stdinitializerlist"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1568832510, "post_id": 57999086, "comment_id": 102404052, "body": "Hint: range-<code>for</code> is your friend."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1568871747, "post_id": 57999086, "comment_id": 102413588, "body": "Since an initializer_list is implemented by an underlying array (according to <a href=\"https://en.cppreference.com/w/cpp/utility/initializer_list\" rel=\"nofollow noreferrer\">cppreference</a>) I suppose you could memcpy from the pointer to the first element returned by <code>begin()</code> (the begin() of each row element; the outer list contains only the proxy initializer_lists). It would be totally anti-paradigmatic but what the heck."}], "answers": [{"comments": [{"owner": {"reputation": 329, "user_id": 3434305, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/56ca245206e5b80befba7113d5c76bc1?s=128&d=identicon&r=PG&f=1", "display_name": "kubci98", "link": "https://stackoverflow.com/users/3434305/kubci98"}, "edited": false, "score": 0, "creation_date": 1568840914, "post_id": 57999469, "comment_id": 102407263, "body": "Thanks, changed the underlying array to std::array and used your suggestion, and it works great!"}, {"owner": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "reply_to_user": {"reputation": 329, "user_id": 3434305, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/56ca245206e5b80befba7113d5c76bc1?s=128&d=identicon&r=PG&f=1", "display_name": "kubci98", "link": "https://stackoverflow.com/users/3434305/kubci98"}, "edited": false, "score": 1, "creation_date": 1568870443, "post_id": 57999469, "comment_id": 102413183, "body": "@kubci98 There was a typo in the previous solution and now I have added the solution for plain c style arrays. Check out the updates."}], "tags": [], "owner": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "is_accepted": true, "score": 3, "last_activity_date": 1568870365, "last_edit_date": 1568870365, "creation_date": 1568834196, "answer_id": 57999469, "question_id": 57999086, "link": "https://stackoverflow.com/questions/57999086/how-to-initialize-a-2d-c-style-array-from-a-nested-stdinitializer-list/57999469#57999469", "title": "How to initialize a 2D C-style array from a nested std::initializer_list?", "body": "<p>You should provide exact type to the <code>Matrix(std::initializer_list&lt;/* here */&gt; list);</code>.\nThen to fill the array, you need to iterate through the list passed and fill the array. <strong>(<a href=\"https://wandbox.org/permlink/4FjE9yNKSC29YKpj\" rel=\"nofollow noreferrer\">See live online</a>)</strong></p>\n\n<pre><code>#include &lt;initializer_list&gt; // std::initializer_list\n\ntemplate&lt;typename T, std::size_t R, std::size_t C&gt;\nclass Matrix\n{\n    T mArray2D[R][C]{};\n\npublic:\n    Matrix(const std::initializer_list&lt;T[C]&gt; list)\n    //                                 ^^^^^ --&gt; type of the row\n    {\n        auto iter{ list.begin() }; // returns pointer to T[C]\n        for (std::size_t row{}; row &lt; R; ++row)\n        {\n            const auto&amp; rowElements{ *iter };\n            for (std::size_t col{}; col &lt; C; ++col)\n            {\n                mArray2D[row][col] = rowElements[col];\n            }\n            ++iter;\n        }\n    }\n};\n</code></pre>\n\n<p>Now in the <code>main()</code> you can initialize <code>Matrix</code> using an initializer list as follows:</p>\n\n<pre><code>Matrix&lt;int, 2, 2&gt; mat{ {1,2}, {3,4} };\n// or\n// Matrix&lt;int, 2, 2&gt; mat = { {1,2}, {3,4} };\n</code></pre>\n\n<hr>\n\n<p>If you could use <a href=\"https://en.cppreference.com/w/cpp/container/array\" rel=\"nofollow noreferrer\"><code>std::array</code></a>, you could do the following. <strong>(<a href=\"https://wandbox.org/permlink/pIZyANPTwim0BzXN\" rel=\"nofollow noreferrer\">See live online</a>)</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;array&gt;            // std::array\n#include &lt;initializer_list&gt; // std::initializer_list\n\ntemplate&lt;typename T, std::size_t R, std::size_t C&gt;\nclass Matrix\n{\n    using RowType = std::array&lt;T, C&gt;;\n    T mArray2D[R][C]{};\n\npublic:\n    Matrix(const std::initializer_list&lt;RowType&gt; list)\n    {\n        auto iter{ list.begin() };\n        for (std::size_t row{}; row &lt; R; ++row)\n        {\n            const RowType&amp; rowElements{ *iter };\n            for (std::size_t col{}; col &lt; C; ++col)\n            {\n                mArray2D[row][col] = rowElements[col];\n            }\n            ++iter;\n        }\n    }\n};\n</code></pre>\n\n<hr>\n\n<p>If the multidimensional array in the class could be an <em><code>std::array</code> of <code>std::array</code> of type <code>T</code></em>, you could use <a href=\"https://en.cppreference.com/w/cpp/algorithm/copy\" rel=\"nofollow noreferrer\"><code>std::copy</code></a> as well. <strong>(<a href=\"https://wandbox.org/permlink/1jf0MaeZkDEym35X\" rel=\"nofollow noreferrer\">See live online</a>)</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;array&gt;            // std::array\n#include &lt;initializer_list&gt; // std::initializer_list\n#include &lt;algorithm&gt;        // std::copy\n\ntemplate&lt;typename T, std::size_t R, std::size_t C&gt;\nclass Matrix\n{\n    using RowType = std::array&lt;T, C&gt;;\n    using Array2D = std::array&lt;RowType, R&gt;;\n    Array2D mArray{ RowType{} }; // initialize the matrix\n\npublic:\n    Matrix(const std::initializer_list&lt;RowType&gt; list)\n    {\n       std::copy(list.begin(), list.end(), mArray.begin());\n    }\n};\n</code></pre>\n"}], "owner": {"reputation": 329, "user_id": 3434305, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/56ca245206e5b80befba7113d5c76bc1?s=128&d=identicon&r=PG&f=1", "display_name": "kubci98", "link": "https://stackoverflow.com/users/3434305/kubci98"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 57999469, "answer_count": 1, "score": 1, "last_activity_date": 1568870365, "creation_date": 1568832306, "last_edit_date": 1568869658, "question_id": 57999086, "link": "https://stackoverflow.com/questions/57999086/how-to-initialize-a-2d-c-style-array-from-a-nested-stdinitializer-list", "title": "How to initialize a 2D C-style array from a nested std::initializer_list?", "body": "<p>I am creating a <code>Matrix&lt;type, width, height&gt;</code> class which I want to be able to initialize using <code>initializer_list</code>, for instance:</p>\n\n<pre><code>Matrix&lt;int, 2, 2&gt; mat = Matrix&lt;int, 2, 2&gt;{ {1,2},{3,4} };\n</code></pre>\n\n<p>The matrix is implemented using a <code>T[height][width]</code> 2D array.</p>\n\n<p>To do this, I have tried making a constructor such as:</p>\n\n<pre><code>Matrix(std::initializer_list&lt; std::initializer_list&lt;T&gt;&gt; input);\n</code></pre>\n\n<p>However, I do not know how to fill the array with from the list. I have tried </p>\n\n<ul>\n<li><p>using <code>memcpy</code> (corrupted memory), </p></li>\n<li><p><code>std::copy</code> (seems it is not possible to copy from an\n<code>std::initializer_list</code>),</p></li>\n<li>as well as used the <em>assignment operator</em> and <code>()</code> constructor call\n(but 2D arrays are not assignable and () constructor call does not\ncompile).</li>\n</ul>\n\n<p>Is there any other way, preferably as safe as possible, to do this?</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1568831909, "post_id": 57998948, "comment_id": 102403823, "body": "c or c++ ? They are not the same. If c++, then what standard? Tag the one you are using (or none if you use the current one)"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 3, "creation_date": 1568831993, "post_id": 57998948, "comment_id": 102403867, "body": "Also, the sizes of your fields are wrong. First one: <code>uint8_t version:4;</code> Use bit fields."}, {"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1568832032, "post_id": 57998948, "comment_id": 102403875, "body": "Since you&#39;ve clarified that you know this is possible by reading raw bytes and casting to the correct types, have you tried anything else yet?"}, {"owner": {"reputation": 5092, "user_id": 5481471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6efc50461d3521db348bf483652040?s=128&d=identicon&r=PG&f=1", "display_name": "G. Sliepen", "link": "https://stackoverflow.com/users/5481471/g-sliepen"}, "edited": false, "score": 1, "creation_date": 1568832268, "post_id": 57998948, "comment_id": 102403967, "body": "It would help if you made the struct in such a way that it is binary compatible with an actual IP header (minus the endianness). That way you can just read from the file straight into the memory belonging to <code>struct ip_header</code> variable. Have a look at <code>struct iphdr</code> in <code>&#47;usr&#47;include&#47;netinet&#47;ip.h</code>."}, {"owner": {"reputation": 81, "user_id": 10149041, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NeoNsoNo5cQ/AAAAAAAAAAI/AAAAAAAAAEU/PBgUeX1WGuw/photo.jpg?sz=128", "display_name": "KAUSHAL KISHORE", "link": "https://stackoverflow.com/users/10149041/kaushal-kishore"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1568832641, "post_id": 57998948, "comment_id": 102404112, "body": "Thanks for the information @TedLyngmo."}, {"owner": {"reputation": 81, "user_id": 10149041, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NeoNsoNo5cQ/AAAAAAAAAAI/AAAAAAAAAEU/PBgUeX1WGuw/photo.jpg?sz=128", "display_name": "KAUSHAL KISHORE", "link": "https://stackoverflow.com/users/10149041/kaushal-kishore"}, "reply_to_user": {"reputation": 5092, "user_id": 5481471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6efc50461d3521db348bf483652040?s=128&d=identicon&r=PG&f=1", "display_name": "G. Sliepen", "link": "https://stackoverflow.com/users/5481471/g-sliepen"}, "edited": false, "score": 0, "creation_date": 1568832749, "post_id": 57998948, "comment_id": 102404157, "body": "Thanks @G.Sliepen, it was really helpful."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1568833277, "post_id": 57998948, "comment_id": 102404392, "body": "@KAUSHALKISHORE Usually you byte pack the struct (#pragma pack(1) or whatever your compiler uses) if you want the fields to match up with the data.  If you don&#39;t do that, there is a possibility of the fields not lining up with the data due to padding bytes placed in the struct."}, {"owner": {"reputation": 893, "user_id": 6277384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6172ff7a5d08eb58a7bbcc7dd99a08c?s=128&d=identicon&r=PG", "display_name": "yumetodo", "link": "https://stackoverflow.com/users/6277384/yumetodo"}, "edited": false, "score": 0, "creation_date": 1568834582, "post_id": 57998948, "comment_id": 102404925, "body": "Have you ever considered to use a boost.asio?"}], "answers": [{"comments": [{"owner": {"reputation": 893, "user_id": 6277384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6172ff7a5d08eb58a7bbcc7dd99a08c?s=128&d=identicon&r=PG", "display_name": "yumetodo", "link": "https://stackoverflow.com/users/6277384/yumetodo"}, "edited": false, "score": 1, "creation_date": 1568834533, "post_id": 57999285, "comment_id": 102404910, "body": "AFAIK, bit field has no effect to remove paddings."}, {"owner": {"reputation": 81, "user_id": 10149041, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NeoNsoNo5cQ/AAAAAAAAAAI/AAAAAAAAAEU/PBgUeX1WGuw/photo.jpg?sz=128", "display_name": "KAUSHAL KISHORE", "link": "https://stackoverflow.com/users/10149041/kaushal-kishore"}, "edited": false, "score": 0, "creation_date": 1568873595, "post_id": 57999285, "comment_id": 102414328, "body": "Thanks for the ip header structure @Mirko. But the issue was not to read the file. My question was: Is there any way in which I can directly read the structure from the binary file, in which case I wouldn&#39;t have to explicitly assign all the fields in the ip header structure."}, {"owner": {"reputation": 963, "user_id": 7471267, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4GGWfiRBWAY/AAAAAAAAAAI/AAAAAAAAAFo/awzT9uvFc5E/photo.jpg?sz=128", "display_name": "Mirko", "link": "https://stackoverflow.com/users/7471267/mirko"}, "edited": false, "score": 1, "creation_date": 1568923692, "post_id": 57999285, "comment_id": 102440132, "body": "The way I presented it you read all the structure at once in one line of code. You&#39;re not reading and assigning explicitly: it&#39;s done for you programmatically by the compiler."}, {"owner": {"reputation": 963, "user_id": 7471267, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4GGWfiRBWAY/AAAAAAAAAAI/AAAAAAAAAFo/awzT9uvFc5E/photo.jpg?sz=128", "display_name": "Mirko", "link": "https://stackoverflow.com/users/7471267/mirko"}, "reply_to_user": {"reputation": 893, "user_id": 6277384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6172ff7a5d08eb58a7bbcc7dd99a08c?s=128&d=identicon&r=PG", "display_name": "yumetodo", "link": "https://stackoverflow.com/users/6277384/yumetodo"}, "edited": false, "score": 0, "creation_date": 1568923798, "post_id": 57999285, "comment_id": 102440170, "body": "@yumetodo I dont follow what you&#39;re saying. Who is talking about padding?"}, {"owner": {"reputation": 893, "user_id": 6277384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6172ff7a5d08eb58a7bbcc7dd99a08c?s=128&d=identicon&r=PG", "display_name": "yumetodo", "link": "https://stackoverflow.com/users/6277384/yumetodo"}, "edited": false, "score": 0, "creation_date": 1568967063, "post_id": 57999285, "comment_id": 102451233, "body": "I concern about binary capability problem."}], "tags": [], "owner": {"reputation": 963, "user_id": 7471267, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4GGWfiRBWAY/AAAAAAAAAAI/AAAAAAAAAFo/awzT9uvFc5E/photo.jpg?sz=128", "display_name": "Mirko", "link": "https://stackoverflow.com/users/7471267/mirko"}, "is_accepted": true, "score": 2, "last_activity_date": 1568833300, "creation_date": 1568833300, "answer_id": 57999285, "question_id": 57998948, "link": "https://stackoverflow.com/questions/57998948/what-is-the-best-way-to-read-a-structure-from-a-binary-file-containing-ip-header/57999285#57999285", "title": "What is the best way to read a structure from a binary file containing IP header fragments?", "body": "<p>Usual way is to use something like <code>fread</code></p>\n\n<pre><code>bool readIpHeader(ip&amp; buffer, const std::string&amp; filename)\n{\n    auto pFile= fopen(filename.data(), \"rb\");\n    if (!pFile) {\n        return false;\n    }\n    auto ok= fread(&amp;buffer, sizeof(buffer), 1, pFile) == 1;\n    fclose(pFile);\n    return ok;\n}\n</code></pre>\n\n<p>This will read <code>sizeof(buffer)</code> into address <code>&amp;buffer</code>: it will fill the buffer with the contents of the file; <code>fread</code> will return 1 on success.</p>\n\n<p>Like Ted pointed out, your structure is bad. You can take <a href=\"https://unix.superglobalmegacorp.com/Net2/newsrc/netinet/ip.h.html\" rel=\"nofollow noreferrer\">https://unix.superglobalmegacorp.com/Net2/newsrc/netinet/ip.h.html</a> as a source (most likely, you can <code>include</code> the file if you are on Linux):</p>\n\n<pre><code>struct ip {\n#if BYTE_ORDER == LITTLE_ENDIAN \n    u_char    ip_hl:4,           /* header length */\n              ip_v:4;            /* version */\n#endif\n#if BYTE_ORDER == BIG_ENDIAN \n    u_char    ip_v:4,            /* version */\n        ip_hl:4;        /* header length */\n#endif\n    u_char    ip_tos;            /* type of service */\n    short     ip_len;            /* total length */\n    u_short   ip_id;             /* identification */\n    short     ip_off;            /* fragment offset field */\n#define    IP_DF 0x4000          /* dont fragment flag */\n#define    IP_MF 0x2000          /* more fragments flag */\n    u_char    ip_ttl;            /* time to live */\n    u_char    ip_p;              /* protocol */\n    u_short   ip_sum;            /* checksum */\n    struct    in_addr ip_src,ip_dst;    /* source and dest address */\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8402, "user_id": 4664415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hsfxj.jpg?s=128&g=1", "display_name": "mevets", "link": "https://stackoverflow.com/users/4664415/mevets"}, "is_accepted": false, "score": 0, "last_activity_date": 1568835649, "creation_date": 1568835649, "answer_id": 57999754, "question_id": 57998948, "link": "https://stackoverflow.com/questions/57998948/what-is-the-best-way-to-read-a-structure-from-a-binary-file-containing-ip-header/57999754#57999754", "title": "What is the best way to read a structure from a binary file containing IP header fragments?", "body": "<p>I think this:</p>\n\n<pre><code>    #include &lt;stdint.h&gt;\n    #include &lt;arpa/inet.h&gt;\n    #include &lt;netinet/ip.h&gt;\n    ....\n    #define IPSIZ  20\n    static void ntoip(uint8_t *buf, struct ip *i) {\n        i-&gt;ip_vhl = buf[0];\n        i-&gt;ip_tos = buf[1];\n        i-&gt;ip_len = ntohs(buf+2);\n        i-&gt;ip_id  = ntohs(buf+4);\n        i-&gt;ip_off = ntohs(buf+6);\n        i-&gt;ip_ttl = buf[8];\n        i-&gt;ip_p   = buf[9];\n        i-&gt;ip_sum = ntohs(buf+10);\n        i-&gt;ip_src = ntohl(buf+12);\n        i-&gt;ip_dst = ntohl(buf+16);           \n    }\n    int fget_ip(FILE *fp, struct ip *i) {\n        uint8_t buf[IPSIZ];\n        if (fread(buf, sizeof buf, 1, fp) == 1) {\n            ntoip(buf, i);\n            return 1;\n        }\n        return 0;\n    }\n...\n    void iptoh(struct ip *i, uint8_t *buf) {\n...\n    }\n    int fput_ip(struct ip *i, FILE *fp) {\n....\n    }\n</code></pre>\n\n<p>is your best bet.  Simple, clear, easy to understand, portable.  You can make sure it is always read and stored in network order, that way it works whether from a file or an actual device.</p>\n\n<p>If somehow it becomes a performance problem, it is encapsulated and you can replace it with the usual heap of shenanigans in one place.</p>\n"}, {"tags": [], "owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "is_accepted": false, "score": 2, "last_activity_date": 1568857417, "last_edit_date": 1568857417, "creation_date": 1568855777, "answer_id": 58002469, "question_id": 57998948, "link": "https://stackoverflow.com/questions/57998948/what-is-the-best-way-to-read-a-structure-from-a-binary-file-containing-ip-header/58002469#58002469", "title": "What is the best way to read a structure from a binary file containing IP header fragments?", "body": "<p>If you care about portability\u2014particularly with big-endian architectures that enforce natural alignment of 16-bit and 32-bit variables\u2014you can\u2019t just write the memory layout of your <code>struct</code> to disk.  The next release of the compiler might pack the data differently and break compatibility with all your data files.  And more than one big company has found out that they accidentally created two data formats, big-endian and little-endian, by compiling on another CPU and not normalizing.  Often, there wasn\u2019t any easy way to tell which one an old file was saved in.  Remember, data outlives code!</p>\n\n<p>This assumes that you want to use the <code>ip_header</code> structure within your program, it should be padded for efficient access, and that its purpose is not merely to shadow the file layout.</p>\n\n<p>When the fields have different sizes interspersed together, there\u2019s not a good way around setting them individually.  You cannot assume that the implementation can use an arbitrary, unaligned address as a pointer.  In this case, I also didn\u2019t assume that the file has the same endianness as your CPU; I defined the byte order as big-endian.  (If you expect this code to run on a little-endian CPU like the x86, you might define the order as little-endian, but still code defensively by using a library such as <a href=\"https://developer.gnome.org/glib/2.62/glib-Byte-Order-Macros.html\" rel=\"nofollow noreferrer\">glib</a> or the little-endian conversion functions of the OS.)</p>\n\n<p>You can portably convert from a layout on disk to a structure in memory like so:</p>\n\n<pre><code>#include &lt;arpa/inet.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct ip_header {\n    uint8_t version;\n    uint8_t header_length;\n    uint8_t service_type;\n    uint16_t total_length;\n    uint16_t identification;\n    uint8_t flags;\n    uint16_t fragment_offset;\n    uint8_t ttl;\n    uint8_t protocol;\n    uint16_t checksum;\n    uint32_t src;\n    uint32_t dest;\n    /* other fields for options if needed */\n} ip_header;\n\n#define IP_HEADER_DISK_LEN 22U\n\nbool read_ip_header( FILE* const input, ip_header* const d )\n{\n  char buffer[IP_HEADER_DISK_LEN];\n\n  if ( IP_HEADER_DISK_LEN !=\n       fread( buffer, 1, IP_HEADER_DISK_LEN, input ) ) {\n    return false;\n  }\n\n  memset( d, 0, sizeof(*d) );\n\n  memcpy( &amp;d-&gt;version,         &amp;buffer[0],  sizeof(d-&gt;version) );\n  memcpy( &amp;d-&gt;header_length,   &amp;buffer[1],  sizeof(d-&gt;header_length) );\n  memcpy( &amp;d-&gt;service_type,    &amp;buffer[2],  sizeof(d-&gt;service_type) );\n  memcpy( &amp;d-&gt;total_length,    &amp;buffer[3],  sizeof(d-&gt;total_length) );\n  d-&gt;total_length = ntohs(d-&gt;total_length);\n  memcpy( &amp;d-&gt;identification,  &amp;buffer[5],  sizeof(d-&gt;identification) );\n  d-&gt;identification = ntohs(d-&gt;identification);\n  memcpy( &amp;d-&gt;flags,           &amp;buffer[7],  sizeof(d-&gt;flags) );\n  memcpy( &amp;d-&gt;fragment_offset, &amp;buffer[8],  sizeof(d-&gt;fragment_offset) );\n  d-&gt;fragment_offset = ntohs(d-&gt;fragment_offset);\n  memcpy( &amp;d-&gt;ttl,             &amp;buffer[10], sizeof(d-&gt;ttl) );\n  memcpy( &amp;d-&gt;protocol,        &amp;buffer[11], sizeof(d-&gt;protocol) );\n  memcpy( &amp;d-&gt;checksum,        &amp;buffer[12], sizeof(d-&gt;checksum) );\n  d-&gt;checksum = ntohs(d-&gt;checksum);\n  memcpy( &amp;d-&gt;src,             &amp;buffer[14], sizeof(d-&gt;src) );\n  d-&gt;src = ntohl(d-&gt;src);\n  memcpy( &amp;d-&gt;dest,            &amp;buffer[18], sizeof(d-&gt;dest) );\n  d-&gt;dest = ntohl(d-&gt;dest);\n\n  return true;\n}\n</code></pre>\n\n<p>This does a single read of the entire header, but you might do separate I/O calls, or even map the file into memory.  Most modern compilers are smart enough to combine consecutive <code>memcpy()</code> calls to consecutive locations, to compile unneeded byte-swaps to no-ops, and to only <code>memset()</code> bytes that won\u2019t be overwritten immediately after, so, if you could get away with just copying the bytes, this way should be just as efficient.  (For your purposes, you could even skip zeroing-out the padding bytes and doing endian-conversion.)</p>\n\n<p>Remember, the read operation will take much, much longer than any of the bit-twiddling to deal with alignment endianness, or padding.  Trying to optimize those is not a good use of your time.  Especially if it compiles to an incompatible program on another compiler!</p>\n"}, {"tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": false, "score": 2, "last_activity_date": 1568913933, "creation_date": 1568913933, "answer_id": 58016160, "question_id": 57998948, "link": "https://stackoverflow.com/questions/57998948/what-is-the-best-way-to-read-a-structure-from-a-binary-file-containing-ip-header/58016160#58016160", "title": "What is the best way to read a structure from a binary file containing IP header fragments?", "body": "<p>If your IPv4 headers are stored in the same format as \"they came in\" (which is the usual way to store them) - with source and destination address being the last fields in the header, this should do it:</p>\n\n<pre><code>#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n\n#include &lt;netinet/ip.h&gt; // a common place to find a \"iphdr\" definition\n\n// add a streaming operator for reading an iphdr\nstd::istream&amp; operator&gt;&gt;(std::istream&amp; is, iphdr&amp; ip) {\n    return is.read(reinterpret_cast&lt;char*&gt;(&amp;ip), sizeof(iphdr));\n}\n\n// add a streaming operator for writing an iphdr\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const iphdr&amp; ip) {\n    return os.write(reinterpret_cast&lt;const char*&gt;(&amp;ip), sizeof(iphdr));\n}\n\nint main() {\n    std::ifstream ips(\"ipheaders\");\n    if(ips) {\n        iphdr h;\n        while(ips &gt;&gt; h) {\n            std::cout &lt;&lt; h.version &lt;&lt; \"\\n\"\n                      &lt;&lt; h.ihl &lt;&lt; \"\\n\"\n                      &lt;&lt; h.tos &lt;&lt; \"\\n\"\n                      &lt;&lt; h.tot_len &lt;&lt; \"\\n\"\n                      &lt;&lt; h.id &lt;&lt; \"\\n\"\n                      &lt;&lt; h.frag_off &lt;&lt; \"\\n\"\n                      &lt;&lt; h.ttl &lt;&lt; \"\\n\"\n                      &lt;&lt; h.protocol &lt;&lt; \"\\n\"\n                      &lt;&lt; h.check &lt;&lt; \"\\n\"\n                      &lt;&lt; h.saddr &lt;&lt; \"\\n\"\n                      &lt;&lt; h.daddr &lt;&lt; \"\\n\";\n        }\n    }\n}\n\n</code></pre>\n\n<p>The first 4 bits in the physical header is always <code>version</code> but as @Mirco showed, the endianness of the computer you compile the program for matters when you fiddle with bit fields. The first 4 bits coming through the network and that are stored in the file are still <code>version</code> - and will be if you write your <code>iphdr</code> to disk using the added <code>operator&lt;&lt;</code> too. If you want to be portable, read and write the IP headers exactly as they have looked since IPv4 was invented. </p>\n\n<p>And luckily the layout of the ip header matches the alignment of the needed fundamental datatypes on the majority of systems. In case you find a system where it's not possible to create an IP header struct matching the raw data, you will most likely not find <code>netinet/ip.h</code> - but if you are still worried about it, you can add a compile time check:</p>\n\n<pre><code>    static_assert(alignof(uint8_t) == 1);\n    static_assert(alignof(uint16_t) == 2);\n    static_assert(alignof(uint32_t) == 4);\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 10149041, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NeoNsoNo5cQ/AAAAAAAAAAI/AAAAAAAAAEU/PBgUeX1WGuw/photo.jpg?sz=128", "display_name": "KAUSHAL KISHORE", "link": "https://stackoverflow.com/users/10149041/kaushal-kishore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 377, "favorite_count": 1, "accepted_answer_id": 57999285, "answer_count": 4, "score": 1, "last_activity_date": 1568913933, "creation_date": 1568831664, "last_edit_date": 1568873361, "question_id": 57998948, "link": "https://stackoverflow.com/questions/57998948/what-is-the-best-way-to-read-a-structure-from-a-binary-file-containing-ip-header", "title": "What is the best way to read a structure from a binary file containing IP header fragments?", "body": "<p>During my computer networks lab, I had to read many binary files which contains the packet in IPv4 format. <a href=\"https://static.thegeekstuff.com/wp-content/uploads/2012/03/ip-header-2.png\" rel=\"nofollow noreferrer\">Here</a> is the IPv4 header file format.</p>\n\n<p>The following structure encapsulates all the essential part of the IP header. </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>struct ip_header {\n    uint8_t version;\n    uint8_t header_length;\n    uint8_t service_type;\n    uint16_t total_length;\n    uint16_t identification;\n    uint8_t flags;\n    uint16_t fragment_offset;\n    uint8_t ttl;\n    uint8_t protocol;\n    uint16_t checksum;\n    uint32_t src;\n    uint32_t dest;\n    /* other fields for options if needed */\n};\n</code></pre>\n\n<p>One way to read the binary file to get the data in a structured format is to read the file bytes-by-bytes and then specifically typecast each byte field to respective fields for the above structure. Reading the file is not an issue.</p>\n\n<p>I want to know whether this is the only way to do it, or is there any other nice and magical way to achieve the same. Also, recently I got know that endianness also creates some problem while reading these kinds of files with different sized data types.</p>\n"}, {"tags": ["c++", "class", "object", "reference"], "comments": [{"owner": {"reputation": 57, "user_id": 9704219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f6bfa4b2e8698387a63b2fe7629435a?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Cina", "link": "https://stackoverflow.com/users/9704219/andrew-cina"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1568832336, "post_id": 57998934, "comment_id": 102403991, "body": "It&#39;s not obvious to me how that answers my question. I said that was a side point, however my main problem referred to something else."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1568832461, "post_id": 57998934, "comment_id": 102404039, "body": "Regarding <i>&quot;Game does not name a type&quot;</i> see <a href=\"https://stackoverflow.com/questions/11971408/c-circular-header-includes\">this question</a>."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1568832615, "post_id": 57998934, "comment_id": 102404098, "body": "I don&#39;t understand the first part of your question. It&#39;s not clear to me what you are trying to do exactly and what is stopping you. My best guess is that you want to remove <code>Game* oGame</code> from <code>Player</code>&#39;s constructor and want to add it to it&#39;s <code>DrawSelf</code> member function instead. Is this correct?"}, {"owner": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "edited": false, "score": 0, "creation_date": 1568837418, "post_id": 57998934, "comment_id": 102406011, "body": "<code>Game does not name a type</code> could result from a circular dependency in some headers or you used the class before declaring it. But what is your main problem?"}, {"owner": {"reputation": 57, "user_id": 9704219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f6bfa4b2e8698387a63b2fe7629435a?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Cina", "link": "https://stackoverflow.com/users/9704219/andrew-cina"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1568838088, "post_id": 57998934, "comment_id": 102406259, "body": "@Fran&#231;ois Andrieux, I fixed the circular dependency issue: my problem is that I want a method of A to be available for use by class B without B inheriting from A. If you look at my player.cpp Player class I call Draw(...) which is a method of engine.h Engine class. I&#39;ve tried an implementation to get it to work, alas it doesn&#39;t. So that&#39;s the problem I&#39;m looking for a solution for."}, {"owner": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "edited": false, "score": 0, "creation_date": 1568873372, "post_id": 57998934, "comment_id": 102414226, "body": "you call <code>game-&gt;draw(x, y)</code> but <code>Game</code> does not define such a method.  Either you declare such a method in <code>Game</code> or if you mean to call <code>Engine::draw()</code> you need a pointer to an &#236;nstance of <code>Engine</code>. Or you pass this instance by reference to <code>Player::DrawSelf</code>."}], "owner": {"reputation": 57, "user_id": 9704219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f6bfa4b2e8698387a63b2fe7629435a?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Cina", "link": "https://stackoverflow.com/users/9704219/andrew-cina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1568838382, "creation_date": 1568831619, "last_edit_date": 1568838382, "question_id": 57998934, "link": "https://stackoverflow.com/questions/57998934/c-how-do-i-pass-object-by-reference-to-access-its-methods", "title": "C++ - how do I pass object by reference to access its methods?", "body": "<p>I'm exercising with understanding classes better. I have a pseudo layout for a game, including an \"Engine\" class that has a Draw(x, y, ...) method, and a Player class. I also have a \"Game\" class that simply inherits from Engine and has the GameLoop() method. </p>\n\n<p>My issue is: inside the Game object GameLoop method I want my <code>Player player;</code> to draw himself via a method <code>DrawSelf(this);</code> e.g. <code>player.DrawSelf(this);</code>, effectively passing the Game object by reference and allowing me to define WITHIN the DrawSelf method, how to Draw(x, y, ...).</p>\n\n<p>Essentially I want to be able to call Draw(x,y) from the Player class.</p>\n\n<p>I also have a minor issue at the moment with \"Game does not name a type\" error, which I assume is something to do with my header declarations, but I am not exactly sure. Here is what I have so far:</p>\n\n<p>engine.h</p>\n\n<pre><code>#ifndef ENGINE_H\n#define ENGINE_H\n\n#include &lt;iostream&gt;\n\nclass Engine\n{\npublic:\n    void Draw(float x, float y);\n};\n\nEngine::Draw(float x, float y)\n{\n    std::cout &lt;&lt; \"Drawing at (\" &lt;&lt; x &lt;&lt; \", \" &lt;&lt; y &lt;&lt; \").\" &lt;&lt; std::endl;\n}\n#endif /*ENGINE_H*/\n</code></pre>\n\n<p>main.h</p>\n\n<pre><code>#ifndef MAIN_H\n#define MAIN_H\n\n#include \"engine.h\"\n#include \"player.h\"\n\nclass Game : public Engine\n{\npublic:\n    void GameLoop(int frames);\n};\n\n#endif /* MAIN_H */\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include \"main.h'\n\nclass Game::GameLoop(int frames)\n{\n    Player player(this); // create player object here and hope to pass Game object to it.\n\n    for (int i = 0; i &lt; frames; i++)\n    {\n        player.DrawSelf();\n    }\n};\n\nint main()\n{\n    Game myGame;\n    myGame.GameLoop(5);\n    return 0;\n}\n</code></pre>\n\n<p>player.h</p>\n\n<pre><code>#ifndef PLAYER_H\n#define PLAYER_H\n\nclass Player\n{\npublic:\n    class Game; // forward declare to help compiler\n    float x, y;\n    Game* game; // pointer to game object to be initialized to game object passed in constructor\npublic:\n    Player(game* oGame);\n    void DrawSelf();\n};\n\n#endif /* PLAYER_H*/\n</code></pre>\n\n<p>player.cpp</p>\n\n<pre><code>#include \"main.h\"\n\nPlayer::Player(Game* oGame)\n{\n    x = 7.0f;\n    y = -2.0f;\n    game = oGame; // initializing game object\n}\n\nvoid Player::DrawSelf()\n{\n    game-&gt;Draw(x, y); // trying to use Draw method of Game object inherited from Engine\n}\n</code></pre>\n"}, {"tags": ["c++", "input", "filter"], "comments": [{"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1568831181, "post_id": 57998746, "comment_id": 102403514, "body": "Please provide what you&#39;ve done so far - in code."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1568831829, "post_id": 57998746, "comment_id": 102403785, "body": "@TedLyngmo I don&#39;t think that&#39;s necessary here. The question is about the algorithm more than it&#39;s about code."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1568831919, "post_id": 57998746, "comment_id": 102403828, "body": "Then it should be tagged language-agnostic and not C++ I guess?"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1568831983, "post_id": 57998746, "comment_id": 102403858, "body": "@TedLyngmo At the same time, it is tied to C++ specifics such as streams."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1568832087, "post_id": 57998746, "comment_id": 102403895, "body": "Nowadays, even a <code>FILE*</code> is called a stream in most documents I&#39;ve seen. :-)"}], "answers": [{"comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 2, "creation_date": 1568831538, "post_id": 57998868, "comment_id": 102403664, "body": "Is the show/hide feature the consequence of using <code>&gt;!</code> in the markup?"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 2, "creation_date": 1568831570, "post_id": 57998868, "comment_id": 102403682, "body": "@RSahu Yes; used intentionally."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1568831604, "post_id": 57998868, "comment_id": 102403693, "body": "Good to know. Hopefully I will remember it when I need it :)"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1568831756, "post_id": 57998868, "comment_id": 102403758, "body": "@RSahu If not, head over to <a href=\"https://scifi.stackexchange.com/\">scifi.stackexchange.com</a> and browse a few questions, you&#39;re likely to hit this spolier markup sooner of later."}, {"owner": {"reputation": 47, "user_id": 7667468, "user_type": "registered", "profile_image": "https://graph.facebook.com/578230882361538/picture?type=large", "display_name": "Brian", "link": "https://stackoverflow.com/users/7667468/brian"}, "edited": false, "score": 0, "creation_date": 1568832403, "post_id": 57998868, "comment_id": 102404016, "body": "Angew, you&#39;re a blessing! I swear I tried to understand without peaking but I&#39;m starting to fear I&#39;m the polar opposite of a natural when it comes to programming (even though I really like it)... The solution is ridiculously easy. I didn&#39;t know about Ctrl D either so that&#39;s always good to know :)"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 47, "user_id": 7667468, "user_type": "registered", "profile_image": "https://graph.facebook.com/578230882361538/picture?type=large", "display_name": "Brian", "link": "https://stackoverflow.com/users/7667468/brian"}, "edited": false, "score": 1, "creation_date": 1568832507, "post_id": 57998868, "comment_id": 102404050, "body": "@Brian You don&#39;t have to be a natural; a programmer&#39;s intuition can be trained and come with practice."}], "tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": true, "score": 4, "last_activity_date": 1568831709, "last_edit_date": 1568831709, "creation_date": 1568831347, "answer_id": 57998868, "question_id": 57998746, "link": "https://stackoverflow.com/questions/57998746/c-how-to-remove-blank-lines-at-the-end-of-input/57998868#57998868", "title": "C++ how to remove blank lines at the end of input?", "body": "<p>Since this is homework, I will advise about the algorithm but not provide code (that would remove the point of the exercise).</p>\n\n<p>Blank lines at the beginning and at the end must be removed, but blank lines in the middle must be kept. You can only cache one line of input. Think about it: do you need to cache an empty line to print it? Or can you print such a line (or many such lines) without caching them? And what necessarily follows after a block of one or more blank lines?</p>\n\n<p>If these hints are not enough for you, here's the algorithm:</p>\n\n<blockquote class=\"spoiler\">\n  <p> Read from <code>cin</code> one line at a time. If it's not empty, print it. If it's empty, remember that you've encountered one blank line. Keep reading, and as long as successive lines are blank, keep incrementing the blank line counter. Eventually, you will either hit a non-empty lone, or EOF. If EOF, simply end. If a non-empty line, output <code>counter</code> empty lines, and reset <code>counter</code>.</p>\n</blockquote>\n\n<hr>\n\n<p>Regarding the other question: C++ abstracts files as <em>streams</em> of input (or output). A stream ends by reaching the EOF (end-of-file). <code>std::cin</code> is just one specific stream (subclassed from <code>std::istream</code>), as is <code>std::ifstream</code>. You also never know whether <code>std::cin</code> comes from the keyboard, or from a file (using e.g. shell redirection), and neither should you care. Simply write your code to the stream interface. Note that it <em>is</em> possible to send an EOF on interactive input too; in Linux for example, it's done by pressing <kbd>Ctrl</kbd>+<kbd>D</kbd>.</p>\n"}], "owner": {"reputation": 47, "user_id": 7667468, "user_type": "registered", "profile_image": "https://graph.facebook.com/578230882361538/picture?type=large", "display_name": "Brian", "link": "https://stackoverflow.com/users/7667468/brian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 0, "accepted_answer_id": 57998868, "answer_count": 1, "score": 3, "last_activity_date": 1568831709, "creation_date": 1568830880, "question_id": 57998746, "link": "https://stackoverflow.com/questions/57998746/c-how-to-remove-blank-lines-at-the-end-of-input", "title": "C++ how to remove blank lines at the end of input?", "body": "<p>I have a homework exercise where I need to create a filter that removes blank lines at the beginning and end of <em>cin</em>. Obviously the beginning is easy but I'm stumped on the end. I wanted to use a dynamic array but that's not allowed... </p>\n\n<p>Here's the exercise text: </p>\n\n<blockquote>\n  <p>In this exercise develop a filter that removes empty lines existing at\n  the beginning of cin and at the end of cin. A line is not empty if it\n  contains at least one non-blank character. If an empty line contains\n  blank characters then those characters can be ignored when writing\n  that empty line to the standard output stream.</p>\n  \n  <p>Caveats: we haven't covered arrays of undetermined sizes yet, so you\n  can't store lines in an array, and you're not supposed to adopt the\n  Perl approach, where you first read in the full file, and then process\n  what you've got. Using a std::string variable is OK, but that variable\n  may never contain more than one line read from the standard input.</p>\n</blockquote>\n\n<p>I have absolutely no idea how you can know it's a blank line at the end without knowing what input is still to come. I'd appreciate any help or tips pointing me in the right direction.</p>\n\n<p>I have a second, smaller, question. It's says file but does that mean it only need to work with an input file? As of now I can only make it work for either manual typing (ending input by some special combination of characters) or just scanning for a new line (which only works with files). Is there any way to end scanning the same way in both scenarios? (I'm just using a while loop atm)</p>\n\n<p>And while we're at it, I'm kind of confused by the wording. Are lines containing only blank characters supposed to be printed, or treated as a blank line and skipped? </p>\n\n<p>Thanks in advance! </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 1, "creation_date": 1568829939, "post_id": 57998492, "comment_id": 102402998, "body": "That code&#39;s incomplete (think <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>). Also, what do you think (consider &quot;reasonable effort&quot;) and why?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1568830024, "post_id": 57998492, "comment_id": 102403029, "body": "You should always try to avoid casting down as you could lose data."}, {"owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "reply_to_user": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1568830030, "post_id": 57998492, "comment_id": 102403033, "body": "@UlrichEckhardt Oops, sorry. Fixed."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1568830039, "post_id": 57998492, "comment_id": 102403038, "body": "On most systems a <code>size_t</code> is larger than an <code>int</code>, so this conversion looses precision (which can lead to problems)"}, {"owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1568830220, "post_id": 57998492, "comment_id": 102403117, "body": "@UnholySheep Isn&#39;t it true that this can only happen for huge arrays that don&#39;t fit on the stack anyways?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1568830377, "post_id": 57998492, "comment_id": 102403195, "body": "@AlwaysLearning In this case, it won&#39;t break unless someone makes a change. Maybe they wrap your logic in a function and reuse it later with larger arrays. Not a big risk but it&#39;s there. But at the same time, what is there to gain from performing the cast? You have zero gains for non-zero risk <i>and</i> it takes extra effort to request this conversion."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1568830464, "post_id": 57998492, "comment_id": 102403233, "body": "There is nothing technically wrong with this example.  The wrongness comes from using a technique that does not scale/transpose to other containers.  Consistency in styling and coding practices makes maintaining a code base a lot easier and having multiple different types of loop for different situations increases your maintenance cost."}], "answers": [{"comments": [{"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 0, "creation_date": 1568830483, "post_id": 57998614, "comment_id": 102403240, "body": "I&#39;d change the word <code>precision</code>. When the value is large, you&#39;ll get a flat-out incorrect value (possibly negative), not just an imprecise one."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 0, "creation_date": 1568830542, "post_id": 57998614, "comment_id": 102403259, "body": "@Jeffrey, agreed."}, {"owner": {"reputation": 4535, "user_id": 59081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c17b54bbea172f608e552f9bf67d4f9?s=128&d=identicon&r=PG", "display_name": "Tanveer Badar", "link": "https://stackoverflow.com/users/59081/tanveer-badar"}, "edited": false, "score": 0, "creation_date": 1568830804, "post_id": 57998614, "comment_id": 102403368, "body": "And I don&#39;t think it is specific to C++. C# also lets you do this <code>var s = (short)(int)5;</code>"}, {"owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "edited": false, "score": 0, "creation_date": 1568831111, "post_id": 57998614, "comment_id": 102403486, "body": "So, for an array allocated on the stack (which cannot be that large), my conversion is safe, right?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "edited": false, "score": 0, "creation_date": 1568831365, "post_id": 57998614, "comment_id": 102403600, "body": "@AlwaysLearning, most likely but you must ask yourself - why use <code>int</code> instead of <code>std::size_t</code>?"}, {"owner": {"reputation": 9157, "user_id": 1794803, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f3b30f8ee9338ee3d87152343ceb0665?s=128&d=identicon&r=PG", "display_name": "Peregring-lk", "link": "https://stackoverflow.com/users/1794803/peregring-lk"}, "edited": false, "score": 0, "creation_date": 1568834818, "post_id": 57998614, "comment_id": 102405018, "body": "@RSahu <code>int</code> is assumed to be the type with the fastest size for the processor. <code>size_t</code> is designed to be the biggest size able to hold any memory offset."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 9157, "user_id": 1794803, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f3b30f8ee9338ee3d87152343ceb0665?s=128&d=identicon&r=PG", "display_name": "Peregring-lk", "link": "https://stackoverflow.com/users/1794803/peregring-lk"}, "edited": false, "score": 0, "creation_date": 1568835104, "post_id": 57998614, "comment_id": 102405129, "body": "@Peregring-lk, that would be a compelling reason but only in performace critical parts."}, {"owner": {"reputation": 9157, "user_id": 1794803, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f3b30f8ee9338ee3d87152343ceb0665?s=128&d=identicon&r=PG", "display_name": "Peregring-lk", "link": "https://stackoverflow.com/users/1794803/peregring-lk"}, "edited": false, "score": 0, "creation_date": 1568835213, "post_id": 57998614, "comment_id": 102405168, "body": "@RSahu I use <code>std::size_t</code> anyway."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1568831307, "last_edit_date": 1568831307, "creation_date": 1568830372, "answer_id": 57998614, "question_id": 57998492, "link": "https://stackoverflow.com/questions/57998492/what-is-wrong-with-converting-size-to-int/57998614#57998614", "title": "What is wrong with converting size to int?", "body": "<blockquote>\n  <p>What is wrong with converting size to int?</p>\n</blockquote>\n\n<p>There is no problem when the value of interest is small, such as 3.</p>\n\n<p>When the value being cast to <code>int</code> is larger than what an <code>int</code> can hold, you will an incorrect value after the cast. C++ lets you shoot in the foot if you are determined to do so. You just have to know when you are in danger of doing that and be prepared for the consequences.</p>\n\n<p>Having said that, it is better to stick with code that does not need a cast.</p>\n\n<pre><code>for (std::size_t i = 0;  ... )\n</code></pre>\n\n<p>You must have a very compelling reason to use <code>int</code> instead of <code>std::size_t</code>. </p>\n"}], "owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568831307, "creation_date": 1568829835, "last_edit_date": 1568830013, "question_id": 57998492, "link": "https://stackoverflow.com/questions/57998492/what-is-wrong-with-converting-size-to-int", "title": "What is wrong with converting size to int?", "body": "<p>Should the following conversion be avoided and for what reason?</p>\n\n<pre><code>int arr[] = { 10, 20, 30 };\nfor (int i = 0; i &lt; static_cast&lt;int&gt;(size(arr)); ++i) // std::size() from C++17\n    cout &lt;&lt; arr[i];\n</code></pre>\n"}, {"tags": ["c++", "networking", "tcp", "udp"], "comments": [{"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 2, "creation_date": 1568830188, "post_id": 57998471, "comment_id": 102403104, "body": "<code>recvfrom()</code> will block until it receives data; so if <code>recvfrom()</code> is not returning, the explanation is almost certainly that it had not received any data yet.  Are you sure that your server is sending the reply UDP packet to the address that the <i>client</i> is listening on?  (Because it appears to be trying to send it to a <code>struct sockaddr *</code> named <code>server</code>, which would presumably be back to itself, not to the client)"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1568844475, "post_id": 57998471, "comment_id": 102408302, "body": "There&#39;s no &#39;four bytes at a time&#39; here. You are sending one datagram of 32 bytes."}], "answers": [{"tags": [], "owner": {"reputation": 290, "user_id": 11894205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/837aff270d16e6c652676fc538c10769?s=128&d=identicon&r=PG&f=1", "display_name": "vS12", "link": "https://stackoverflow.com/users/11894205/vs12"}, "is_accepted": true, "score": 1, "last_activity_date": 1568833569, "creation_date": 1568833569, "answer_id": 57999343, "question_id": 57998471, "link": "https://stackoverflow.com/questions/57998471/issue-with-c-udp-client-hanging-up/57999343#57999343", "title": "Issue with C++ UDP Client Hanging Up", "body": "<pre><code>ssize_t sendto(**int sockfd**, const void *buf, size_t len, int flags,\n               const struct **sockaddr *dest_addr**, socklen_t addrlen);\n</code></pre>\n\n<p>Reference : <a href=\"https://linux.die.net/man/2/sendto\" rel=\"nofollow noreferrer\">https://linux.die.net/man/2/sendto</a></p>\n\n<p>Your destination address should be : (sockaddr *) &amp;client</p>\n"}], "owner": {"reputation": 99, "user_id": 6332404, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/3TDqT.png?s=128&g=1", "display_name": "Kaleb Meeks", "link": "https://stackoverflow.com/users/6332404/kaleb-meeks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 259, "favorite_count": 0, "accepted_answer_id": 57999343, "answer_count": 1, "score": -1, "last_activity_date": 1568833569, "creation_date": 1568829735, "question_id": 57998471, "link": "https://stackoverflow.com/questions/57998471/issue-with-c-udp-client-hanging-up", "title": "Issue with C++ UDP Client Hanging Up", "body": "<p>The project I am working on uses TCP and UDP to create a file transport protocol. The TCP connection generates a random port in which it returns to the client and the client then connects to the server on that port number using UDP. UDP is then used to transfer a text file four characters a time to the server and the server will send back the characters capitalized in which will then be displayed on the client. The issue is that the client is hanging up when waiting for the server to send back the capitalized version of the characters. I will leave the code below. The part of the code that is not working is commented out towards the end of the client and server files. Any help is appreciated!</p>\n\n<p><strong>Client Code</strong></p>\n\n<pre><code>// Libraries\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;iostream&gt;\n#include &lt;unistd.h&gt;\n\nusing namespace std;\n\nint main(int argc, char* argv[]) {\n\n// Variables\nint port = strtol(argv[2], NULL, 10);\nstring file = argv[3];\nint r_port;\nFILE* fp;\nstring fileString;\nstring dataBuffer;\nint charCounter = 0;\nchar c;\n\n// *** Declare TCP socket ***\nint tcpsocket = 0;\ntcpsocket = socket(AF_INET, SOCK_STREAM, 0);\nif (tcpsocket == -1) {\n    cerr &lt;&lt; \"Can't create a socket\";\n    return 1;\n}\n\n// Get host IP address\nstruct hostent *s;\ns = gethostbyname(argv[1]);\n\n// Setting destination info\nstruct sockaddr_in server;\nmemset((char *) &amp;server, 0, sizeof(server));\nserver.sin_family = AF_INET;\nserver.sin_port = htons(port);\nbcopy((char *) s-&gt;h_addr, (char *) &amp;server.sin_addr.s_addr, s-&gt;h_length);\n\n// Connect to server\nint connectRes = connect(tcpsocket, (sockaddr*)&amp;server, sizeof(server));\nif (connectRes == -1) {\n    cerr &lt;&lt; \"Can't connect to socket\";\n    return 1;\n}\n\n// Sending data to server\nchar payload[512] = \"117\";\nint sendRes = send(tcpsocket, payload, 512, 0);\nif (sendRes == -1) {\n    cerr &lt;&lt; \"Could not send to server\";\n    return 1;\n}\n\n// Receive r_port from server\nmemset(payload, 0, sizeof(payload));\nrecv(tcpsocket, payload, 512, 0);\nr_port = strtol(payload, NULL, 10);\nclose(tcpsocket);\n\n// *** Declare UDP socket ***\nint udpsocket = 0;\nudpsocket = socket(AF_INET, SOCK_DGRAM, 0);\nif (udpsocket == -1) {\n    cerr &lt;&lt; \"Can't create a socket\";\n    return 1;\n}\n\n// Get host IP address\ns = gethostbyname(argv[1]);\n\n// Setting destination info\nmemset((char *) &amp;server, 0, sizeof(server));\nserver.sin_family = AF_INET;\nserver.sin_port = htons(r_port);\nbcopy((char *) s-&gt;h_addr, (char *) &amp;server.sin_addr.s_addr, s-&gt;h_length);\n\n// File manipulation\nfp = fopen(file.c_str(), \"r\");\n    while (c != EOF) {\n        c = fgetc(fp);\n        fileString += c;\n        charCounter++;\n    }\nfclose(fp);\n\n// UDP file transfer\nfor (int i = 4; i &lt; 8; i++) {\n    dataBuffer += fileString[i];\n}\n\nsocklen_t slen = sizeof(server);\nmemset(payload, 0, sizeof(payload));\nstrcpy(payload, dataBuffer.c_str());\n\nsendRes = sendto(udpsocket, payload, 32, 0, (struct sockaddr *) &amp;server, slen);\nif (sendRes == -1) {\n    cerr &lt;&lt; \"Could not send to server\";\n    return 1;\n}\n\n// Receive ack\n// slen = sizeof(server);\n// memset(payload, 0, sizeof(payload));\n// recvfrom(udpsocket, payload, 32, 0, (sockaddr*)&amp;server, &amp;slen);\n// cout &lt;&lt; \"Capitalized data: \" &lt;&lt; payload;\n\nclose(udpsocket);\nreturn 0;\n}\n</code></pre>\n\n<p><strong>Server Code</strong></p>\n\n<pre><code>// Libraries\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;iostream&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;cstdlib&gt;\n#include &lt;time.h&gt;\n#include &lt;ctype.h&gt;\n\nusing namespace std;\n\n// Variables\nint r_port;\nstring fileData;\n\n// Generate Random Port\nint randomPort() {\n    srand(time(NULL));\n    return rand() % ((65535 - 1024) + 1) + 1024;\n}\n\n// Capitalization Function\nstring capitalize(char* payload) {\n    int i = 0;\n    char c;\n    string charArr;\n    while(payload[i]) {\n        c = payload[i];\n        charArr += toupper(c);\n        i++;\n    }\n    return charArr;\n}\n\nint main(int argc, char* argv[]) {\n\n    // Variables\n    int port = strtol(argv[1], NULL, 10);\n\n    // *** Declare TCP socket ***\n    int tcpsocket = 0;\n    tcpsocket = socket(AF_INET, SOCK_STREAM, 0);\n    if (tcpsocket == -1) {\n        cerr &lt;&lt; \"Can't create a socket\";\n        return -1;\n    }\n\n    // Receive data\n    struct sockaddr_in server;\n    memset((char *) &amp;server, 0, sizeof(server));\n    server.sin_family = AF_INET;\n    server.sin_port = htons(port);\n    server.sin_addr.s_addr = htonl(INADDR_ANY);\n\n    if (bind(tcpsocket, (struct sockaddr *) &amp;server, sizeof(server)) == -1) {\n        cerr &lt;&lt; \"Can't bind to IP/Port\";\n        return -2;\n    }\n\n    if (listen(tcpsocket, SOMAXCONN) == -1) {\n        cerr &lt;&lt; \"Can't listen\";\n        return -3;\n    }\n\n    struct sockaddr_in client;\n    char payload[512];\n    socklen_t clen = sizeof(client);\n    int clientSocket = accept(tcpsocket, (sockaddr*)&amp;client, &amp;clen);\n\n    if (clientSocket == -1) {\n        cerr &lt;&lt; \"Problem with client connecting\";\n        return -4;\n    }\n    recv(clientSocket, payload, 512, 0);\n\n    // Check client data\n    if (strtol(payload,NULL,10) == 117) {\n        r_port = randomPort();\n        cout &lt;&lt; \"Handshake detected. Selected the random port \" &lt;&lt; r_port &lt;&lt; \"\\n\";\n        }\n    else {\n        cout &lt;&lt; \"Error occurred\\n\";\n    }\n\n    // Return random port\n    memset(payload, 0, sizeof(payload));\n    sprintf(payload,\"%ld\",r_port);\n    int sendRes = send(clientSocket, payload, 512, 0);\n    if (sendRes == -1) {\n        cerr &lt;&lt; \"Could not send to server\\n\";\n        return 1;\n    }\n    close(clientSocket);\n    close(tcpsocket);\n\n    // *** Declare UDP socket ***\n    int udpsocket = 0;\n    udpsocket = socket(AF_INET, SOCK_DGRAM, 0);\n    if (udpsocket == -1) {\n        cerr &lt;&lt; \"Can't create a socket\";\n        return -1;\n    }\n\n    // Receive data\n    memset((char *) &amp;server, 0, sizeof(server));\n    server.sin_family = AF_INET;\n    server.sin_port = htons(r_port);\n    server.sin_addr.s_addr = htonl(INADDR_ANY);\n\n    if (bind(udpsocket, (struct sockaddr *) &amp;server, sizeof(server)) == -1) {\n        cerr &lt;&lt; \"Can't bind to IP/Port\";\n        return -2;\n    }\n\n    clen = sizeof(client);\n    memset(payload, 0, sizeof(payload));\n    recvfrom(udpsocket, payload, 32, 0, (sockaddr*)&amp;client, &amp;clen);\n\n    fileData = capitalize(payload);\n    cout &lt;&lt; \"Payload: \" &lt;&lt; fileData &lt;&lt; \"\\n\";\n\n    // Send ack \n    // socklen_t slen = sizeof(server);\n    // memset(payload, 0, sizeof(payload));\n    // strcpy(payload, fileData.c_str());\n    // sendRes = sendto(udpsocket, payload, 32, 0, (struct sockaddr *) &amp;server, slen);\n    // if (sendRes == -1) {\n    // cerr &lt;&lt; \"Could not send to server\";\n    // return 1;\n    // }\n\n    close(udpsocket);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 2, "creation_date": 1568829480, "post_id": 57998403, "comment_id": 102402826, "body": "Even better, return a <code>std::vector&lt;int&gt;</code> by value."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 2, "creation_date": 1568829529, "post_id": 57998403, "comment_id": 102402845, "body": "@Thomas Briggs There is no relation between these two different approaches. So there is nothing to compare."}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1568829655, "post_id": 57998403, "comment_id": 102402892, "body": "It&#39;s better to avoid anything that requires calling <code>new</code> or <code>delete[]</code> if you can, because they are error-prone to use and tend to lead to crashing and/or memory-leaking programs unless handled very carefully.  Therefore between the two options, option 2 is better (although in C++ <code>std::vector&lt;int&gt;</code> is better still, as @CoryKramer pointed out)"}, {"owner": {"reputation": 107, "user_id": 7187050, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pcia6b6Ce6w/AAAAAAAAAAI/AAAAAAAAAIw/jmeT4DCHg94/photo.jpg?sz=128", "display_name": "Thomas Briggs", "link": "https://stackoverflow.com/users/7187050/thomas-briggs"}, "edited": false, "score": 0, "creation_date": 1568829691, "post_id": 57998403, "comment_id": 102402901, "body": "Well I have a function that generates a given amount of primes numbers and outputs an array with them all in, which way would be considered better, to pass an array into the function and put the prime numbers in that array or to return an pointer to an array that the function created because they seem to have the same outcome except one is an actual array where is one is a pointer, and the actual array seems to be better than way it is easy to find the size of it."}, {"owner": {"reputation": 2783, "user_id": 782570, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cbbf87d7ce9ed596faa7e64231114991?s=128&d=identicon&r=PG&f=1", "display_name": "giusti", "link": "https://stackoverflow.com/users/782570/giusti"}, "edited": false, "score": 1, "creation_date": 1568829696, "post_id": 57998403, "comment_id": 102402903, "body": "I would reword the question as when to use the first approach versus when to use the second. And limit it to either C. In C++ the answer will probably be &quot;use <code>std::vector</code>&quot;"}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 1, "creation_date": 1568829839, "post_id": 57998403, "comment_id": 102402965, "body": "In C++, neither approach is idiomatic. In C, it depends on the specific circumstances (i.e. the use case for the function)."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1568830137, "post_id": 57998403, "comment_id": 102403081, "body": "C or C++ ? The question is tagged C, but your code is C++"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1568830181, "post_id": 57998403, "comment_id": 102403100, "body": "@Jabberwocky  The language tag toggles every minute :-)"}, {"owner": {"reputation": 107, "user_id": 7187050, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pcia6b6Ce6w/AAAAAAAAAAI/AAAAAAAAAIw/jmeT4DCHg94/photo.jpg?sz=128", "display_name": "Thomas Briggs", "link": "https://stackoverflow.com/users/7187050/thomas-briggs"}, "edited": false, "score": 0, "creation_date": 1568830329, "post_id": 57998403, "comment_id": 102403170, "body": "It was meant to be c++"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1568830354, "post_id": 57998403, "comment_id": 102403188, "body": "@ThomasBriggs It <i>is</i> C++. <code>new</code> doesn&#39;t exist in C."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1568830714, "post_id": 57998403, "comment_id": 102403326, "body": "@ThomasBriggs The expected way of solving this problem is to simply return a <code>std::vector&lt;int&gt;</code> and forget that dynamically allocating arrays even exists. It&#39;s easier for you to write, it&#39;s easier for the function&#39;s user to use and it&#39;s safer for everyone."}], "answers": [{"tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": true, "score": 3, "last_activity_date": 1568830916, "creation_date": 1568830916, "answer_id": 57998753, "question_id": 57998403, "link": "https://stackoverflow.com/questions/57998403/when-should-i-return-a-pointer-to-an-array-vs-setting-values-in-an-existing-arra/57998753#57998753", "title": "When should I return a pointer to an array vs setting values in an existing array", "body": "<blockquote>\n  <p>When sould I return a pointer to an array </p>\n</blockquote>\n\n<p>When you have a function that creates an array - but there are better ways to do it in C++ than to return a raw pointer to the memory (since those pointers are easy to forget about so you get memory leaks etc). You can for example use the dynamic array-like <code>std::vector</code>:</p>\n\n<pre><code>std::vector&lt;int&gt; foo(size_t n) {\n    std::vector&lt;int&gt; output(n);\n    for(size_t i = 0; i &lt; n; ++i)\n        output[i] = i;\n    return output;\n}\n\nstd::vector&lt;int&gt; arr = foo(10);\nstd::cout &lt;&lt; arr.size() &lt;&lt; \"\\n\";\nstd::cout &lt;&lt; arr[9] &lt;&lt; \"\\n\";\n</code></pre>\n\n<blockquote>\n  <p>vs setting values in an existing array</p>\n</blockquote>\n\n<p>When you already have an array that you want to use as input and you want to modify it.</p>\n\n<pre><code>void foo(std::vector&lt;int&gt;&amp; inout) { \n    for(int&amp; val : inout)\n        val += 10;                   // add 10 to every element\n}\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 7187050, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pcia6b6Ce6w/AAAAAAAAAAI/AAAAAAAAAIw/jmeT4DCHg94/photo.jpg?sz=128", "display_name": "Thomas Briggs", "link": "https://stackoverflow.com/users/7187050/thomas-briggs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 57998753, "answer_count": 1, "score": -2, "last_activity_date": 1568833280, "creation_date": 1568829422, "last_edit_date": 1568833280, "question_id": 57998403, "link": "https://stackoverflow.com/questions/57998403/when-should-i-return-a-pointer-to-an-array-vs-setting-values-in-an-existing-arra", "title": "When should I return a pointer to an array vs setting values in an existing array", "body": "<p>When is it better to have a function return a pointer to an array, like this:</p>\n\n<pre><code>int * foo(int n) {\n    int * output = new int[n];\n    for (int i = 0; i &lt; n; i++) {\n        output[i] = i;\n    }\n    return output;    \n}\n\nint main() {\n    int * arr = foo(10);\n    return 0;\n}\n</code></pre>\n\n<p>vs having the function not return anything but just set values of an array given in the parameters, like this:</p>\n\n<pre><code>void foo(int n, int output[]) {\n    for (int i = 0; i &lt; n; i++) {\n        output[i] = i;\n    }\n}\n\nint main() {\n    int arr[10];\n    foo(10, arr);\n    return 0;\n}\n</code></pre>\n\n<p>For example, I have a function that generates prime numbers, and I would like to return them as an array. Should I use the first option and return a pointer to the array, or pass an array into the function and put the values in that?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1568829288, "post_id": 57998346, "comment_id": 102402746, "body": "Can you add the challenge description to the question?"}, {"owner": {"reputation": 311, "user_id": 4699255, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uPVhg.jpg?s=128&g=1", "display_name": "Vocaloidas", "link": "https://stackoverflow.com/users/4699255/vocaloidas"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1568829410, "post_id": 57998346, "comment_id": 102402794, "body": "I updated the post."}], "answers": [{"comments": [{"owner": {"reputation": 311, "user_id": 4699255, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uPVhg.jpg?s=128&g=1", "display_name": "Vocaloidas", "link": "https://stackoverflow.com/users/4699255/vocaloidas"}, "edited": false, "score": 0, "creation_date": 1568835906, "post_id": 57998923, "comment_id": 102405444, "body": "Hi, that&#39;s a nice an intuitive way to approach this problem, however when I tried to implement it, it was difficult to keep track of nested loops and if statements."}], "tags": [], "owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "is_accepted": false, "score": 1, "last_activity_date": 1568831569, "creation_date": 1568831569, "answer_id": 57998923, "question_id": 57998346, "link": "https://stackoverflow.com/questions/57998346/why-does-my-c-solution-to-the-fish-challange-by-codility-fail/57998923#57998923", "title": "Why does my C++ solution to the &quot;Fish&quot; challange by codility fail?", "body": "<p>I'm going to post some algorithm thoughts and ideas for you.  Hopefully this will help you visual the problem.</p>\n\n<p>Some initial observations - all fish swimming upstream at the beginning of the array can never eat or be eaten.  Same for fish at the bottom of the array swimming downstream.  The action occur when scanning from front to back when a downstream meets an up.  </p>\n\n<p>First, walk your array front to back until you find a down swimming fish.</p>\n\n<p>Next continue walking your down/up array until it swaps from down to up.  </p>\n\n<p>Resolve combat and increment a combat counter.  </p>\n\n<p>If down wins, keep walking down.  If up wins, save the index of your location in the array(s), then walk it up the array until it is eaten or you hit a fish swimming the same direction.  </p>\n\n<p>If it finds a fish swimming its direction, it will live, jump back to where it started scan downwards again.</p>\n\n<p>If it is eaten, take this fish and start comparing where you left off in the down array.  </p>\n\n<p>Repeat until you reach the end of the list.  Return the (starting number of fish - number of combats)</p>\n\n<p>The neat part is this is in-place.  No moving of memory, no need to mark dead fish, etc.  It will run linear time - at most nearly 2x linear.</p>\n\n<p>This the the pseudo code I would use to resolve this.</p>\n"}, {"tags": [], "owner": {"reputation": 825, "user_id": 1404216, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5e46845cdb10d5563e13db44aaefadcc?s=128&d=identicon&r=PG", "display_name": "xeed", "link": "https://stackoverflow.com/users/1404216/xeed"}, "is_accepted": true, "score": 3, "last_activity_date": 1568832683, "creation_date": 1568832683, "answer_id": 57999160, "question_id": 57998346, "link": "https://stackoverflow.com/questions/57998346/why-does-my-c-solution-to-the-fish-challange-by-codility-fail/57999160#57999160", "title": "Why does my C++ solution to the &quot;Fish&quot; challange by codility fail?", "body": "<p>I suspect the problem with your code is using a queue. I think it is going to work, if you replace it with a stack instead. Consider this example:</p>\n\n<pre><code>vector&lt;int&gt; A = { 4,2,1,3 };\nvector&lt;int&gt; B = { 1,0,1,0 };\n</code></pre>\n\n<p>With a stack: 0 eats 1, 3 eats 2 and then 0 eats 3. </p>\n\n<p>With your queue: 0 eats 1, 0 eats 3 and 2 cannot be eaten anymore. </p>\n\n<p>Note: A queue works first in first out. On the otherhand a stack is last in first out. And thats what you want here.</p>\n"}, {"tags": [], "owner": {"reputation": 1020, "user_id": 10947572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88b11d313e9b4aad48fbb60bec2b2f37?s=128&d=identicon&r=PG&f=1", "display_name": "Giogre", "link": "https://stackoverflow.com/users/10947572/giogre"}, "is_accepted": false, "score": 0, "last_activity_date": 1605869712, "creation_date": 1605869712, "answer_id": 64928193, "question_id": 57998346, "link": "https://stackoverflow.com/questions/57998346/why-does-my-c-solution-to-the-fish-challange-by-codility-fail/64928193#64928193", "title": "Why does my C++ solution to the &quot;Fish&quot; challange by codility fail?", "body": "<p>Here is a (admittedly moderately convoluted) solution:</p>\n<pre><code>// you can use includes, for example:\n// #include &lt;algorithm&gt;\n#include &lt;list&gt;\n#include &lt;stack&gt;\n\n// you can write to stdout for debugging purposes, e.g.\n// cout &lt;&lt; &quot;this is a debug message&quot; &lt;&lt; endl;\n\nint solution(vector&lt;int&gt; &amp;A, vector&lt;int&gt; &amp;B) {\n    list&lt;int&gt; fish;\n    stack&lt;int&gt; upstream;\n    for (int ii = A.size() - 1; ii &gt;= 0; --ii) {\n        if (B[ii] == 0)\n            upstream.push(A[ii]);\n        else {\n            fish.push_back(A[ii]);\n            while ( !upstream.empty() ) {\n                if ( upstream.top() &gt; fish.back() ) {\n                    fish.pop_back();\n                    fish.push_back( upstream.top() );\n                    upstream.pop();\n                    --ii;\n                    if (ii &lt; 0) {\n                        ++ii;\n                        break;\n                    } else {\n                        while (!fish.empty() &amp;&amp; ii &lt; (int) B.size()) {\n                            if (B[ii] == 0) {\n                                upstream.push(fish.back());\n                                fish.pop_back();\n                                ++ii;\n                                break;\n                            }\n                            if ( fish.back() &gt; A[ii] )\n                                --ii;\n                            else {\n                                ++ii;\n                                fish.pop_back();\n                                break;\n                            }\n                        }\n                        break;\n                    }\n                } else\n                    upstream.pop();\n            }\n        }\n    }\n\n    int add_size = 0;\n    if ( !upstream.empty() )\n        add_size = upstream.size();\n\n    return fish.size() + add_size;\n}\n</code></pre>\n<p>Algorithm:</p>\n<ul>\n<li>Input vector of fish sizes <code>A</code> gets traversed.</li>\n<li>Solution above assigns upstream swimming fish to a stack.</li>\n<li>When fish <code>ii</code> is swimming downstream (<code>B[ii] = 0</code>), it gets compared with fish in the <code>upstream</code> stack.</li>\n<li>If fish in the stack wins the comparison, it replaces fish <code>ii</code> in the list solution (that I have unimaginatively named <code>fish</code>), but it does not get popped from the <code>upstream</code> stack.</li>\n<li>Only if a fish in the stack is beaten, then it gets popped from the stack.</li>\n<li>After input has been traversed, return sum of survivors in the list and in the stack.</li>\n</ul>\n<p>This passes the test proposed by @xeed and obtains overall 100% on Codility.\nFor a complete MWE, here is a driver main testing program:</p>\n<pre><code>int main()\n{\n    vector&lt;int&gt; A = {4,3,2,1,5};\n    vector&lt;int&gt; B = {0,1,0,0,0};\n    int sol = solution(A, B);\n    cout &lt;&lt; &quot;A = {4,3,2,1,5}, B = {0,1,0,0,0}? 2: &quot; &lt;&lt; sol &lt;&lt; endl;\n\n    A = {1,0};\n    B = {1,0};\n    sol = solution(A, B);\n    cout &lt;&lt; &quot;A = {1,0}, B = {1,0}? 1: &quot; &lt;&lt; sol &lt;&lt; endl;\n\n    A = {0,1};\n    B = {0,0};\n    sol = solution(A, B);\n    cout &lt;&lt; &quot;A = {0,1}, B = {0,0}? 2: &quot; &lt;&lt; sol &lt;&lt; endl;\n\n    A = {0};\n    B = {1};\n    sol = solution(A, B);\n    cout &lt;&lt; &quot;A = {0}, B = {1}? 1: &quot; &lt;&lt; sol &lt;&lt; endl;\n\n    A = {1};\n    B = {0};\n    sol = solution(A, B);\n    cout &lt;&lt; &quot;A = {1}, B = {0}? 1: &quot; &lt;&lt; sol &lt;&lt; endl;\n\n    A = {7,4,3,2,5,6};\n    B = {0,1,1,1,0,1};\n    sol = solution(A, B);\n    cout &lt;&lt; &quot;A = {7,4,3,2,5,6}, B = {0,1,1,1,0,1}? 3: &quot; &lt;&lt; sol &lt;&lt; endl;\n\n    A = {3,4,2,1,5};\n    B = {1,0,0,0,0};\n    sol = solution(A, B);\n    cout &lt;&lt; &quot;A = {3,4,2,1,5}, B = {1,0,0,0,0}? 4: &quot; &lt;&lt; sol &lt;&lt; endl;\n\n    A = {1,2};\n    B = {0,1};\n    sol = solution(A, B);\n    cout &lt;&lt; &quot;A = {1,2}, B = {0,1}? 2: &quot; &lt;&lt; sol &lt;&lt; endl;\n\n    A = {4,2,1,3};\n    B = {1,0,1,0};\n    sol = solution(A, B);\n    cout &lt;&lt; &quot;A = {4,2,1,3}, B = {1,0,1,0}? 1: &quot; &lt;&lt; sol &lt;&lt; endl;\n\n    A = {4,3,2,5,6};\n    B = {1,0,1,0,1};\n    sol = solution(A, B);\n    cout &lt;&lt; &quot;A = {4,3,2,5,6}, B = {1,0,1,0,1}? 2: &quot; &lt;&lt; sol &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2038, "user_id": 1031809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36d015a882704b09dee6046ded8e8a7e?s=128&d=identicon&r=PG", "display_name": "Mital Vora", "link": "https://stackoverflow.com/users/1031809/mital-vora"}, "is_accepted": false, "score": 0, "last_activity_date": 1605877599, "creation_date": 1605877599, "answer_id": 64930037, "question_id": 57998346, "link": "https://stackoverflow.com/questions/57998346/why-does-my-c-solution-to-the-fish-challange-by-codility-fail/64930037#64930037", "title": "Why does my C++ solution to the &quot;Fish&quot; challange by codility fail?", "body": "<p>Here is a solution I wrote taking your testcase:</p>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n\nint main()\n{\n    std::vector&lt;int&gt; fishSize = { 4, 3, 2, 1, 5 };\n    std::vector&lt;int&gt; fishDirection = { 0, 1, 0, 0, 0 };\n    \n    int numberOfFish = fishSize.size();\n    for (int i=0; i &lt; numberOfFish; i++) {\n        int curFishSize = fishSize[i];\n        int curFishDirection = fishDirection[i];\n        if (curFishDirection == 0) {\n            // Direction down\n            for (int j = i - 1; j &gt; 0; j--) {\n                int compareFishSize = fishSize[j];\n                int compareFishDirection = fishDirection[j];\n                if (compareFishDirection == 1 &amp;&amp; compareFishSize &lt; curFishSize) {\n                    // Eat this fish\n                    fishSize[j] = -1;\n                    fishDirection[j] = -1;\n                    std::cout &lt;&lt; &quot;Direction Down: Eating Fish &quot; &lt;&lt; j &lt;&lt; &quot; by &quot; &lt;&lt; i &lt;&lt; std::endl;\n                } else if (compareFishDirection == -1) {\n                    continue;\n                    \n                } else {\n                    break;\n                }\n            }\n            \n        } else if (curFishDirection == 1) {\n            // Direction up\n            for (int j = i+1; j &lt; numberOfFish; j++) {\n                int compareFishSize = fishSize[j];\n                int compareFishDirection = fishDirection[j];\n                if (compareFishDirection == 0 &amp;&amp; compareFishSize &lt; curFishSize) {\n                    // Eat this fish\n                    std::cout &lt;&lt; &quot;Direction Up: Eating Fish &quot; &lt;&lt; j &lt;&lt; &quot; by &quot; &lt;&lt; i &lt;&lt; std::endl;\n                    fishSize[j] = -1;\n                    fishDirection[j] = -1;\n                } else if (compareFishDirection == -1) {\n                    continue;\n                } else {\n                    break;\n                }\n            }\n        }\n    }\n    \n    int numberOfFishRemaining = 0;\n    for(int a : fishSize) {\n        if (a != -1) numberOfFishRemaining++;\n    }\n    \n    std::cout &lt;&lt; &quot;Number Of Fish Remaining are: &quot; &lt;&lt; numberOfFishRemaining &lt;&lt; std::endl;\n\n\n    return 0;\n}\n</code></pre>\n<p>This solution will generate following output:</p>\n<pre><code>Direction Up: Eating Fish 2 by 1                                                                                                                     \nDirection Up: Eating Fish 3 by 1                                                                                                                     \nDirection Down: Eating Fish 1 by 4                                                                                                                   \nNumber Of Fish Remaining are: 2 \n</code></pre>\n<p>I hope this also solves all your testcases.</p>\n"}], "owner": {"reputation": 311, "user_id": 4699255, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uPVhg.jpg?s=128&g=1", "display_name": "Vocaloidas", "link": "https://stackoverflow.com/users/4699255/vocaloidas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 729, "favorite_count": 0, "accepted_answer_id": 57999160, "answer_count": 4, "score": 1, "last_activity_date": 1605877599, "creation_date": 1568829171, "last_edit_date": 1568829382, "question_id": 57998346, "link": "https://stackoverflow.com/questions/57998346/why-does-my-c-solution-to-the-fish-challange-by-codility-fail", "title": "Why does my C++ solution to the &quot;Fish&quot; challange by codility fail?", "body": "<p>I'm attempting Codility fish challange which is described as follows:</p>\n\n<blockquote>\n  <p>You are given two non-empty arrays A and B consisting of N integers.\n  Arrays A and B represent N voracious fish in a river, ordered\n  downstream along the flow of the river.</p>\n  \n  <p>The fish are numbered from 0 to N \u2212 1. If P and Q are two fish and P &lt;\n  Q, then fish P is initially upstream of fish Q. Initially, each fish\n  has a unique position.</p>\n  \n  <p>Fish number P is represented by A[P] and B[P]. Array A contains the\n  sizes of the fish. All its elements are unique. Array B contains the\n  directions of the fish. It contains only 0s and/or 1s, where:</p>\n  \n  <p>0 represents a fish flowing upstream, 1 represents a fish flowing\n  downstream. If two fish move in opposite directions and there are no\n  other (living) fish between them, they will eventually meet each\n  other. Then only one fish can stay alive \u2212 the larger fish eats the\n  smaller one. More precisely, we say that two fish P and Q meet each\n  other when P &lt; Q, B[P] = 1 and B[Q] = 0, and there are no living fish\n  between them. After they meet:</p>\n  \n  <p>If A[P] > A[Q] then P eats Q, and P will still be flowing downstream,\n  If A[Q] > A[P] then Q eats P, and Q will still be flowing upstream. We\n  assume that all the fish are flowing at the same speed. That is, fish\n  moving in the same direction never meet. The goal is to calculate the\n  number of fish that will stay alive.</p>\n  \n  <p>For example, consider arrays A and B such that:</p>\n  \n  <p>A[0] = 4    B[0] = 0   A<a href=\"https://app.codility.com/programmers/lessons/7-stacks_and_queues/fish/\" rel=\"nofollow noreferrer\">1</a> = 3    B<a href=\"https://app.codility.com/programmers/lessons/7-stacks_and_queues/fish/\" rel=\"nofollow noreferrer\">1</a> = 1   A<a href=\"https://i.stack.imgur.com/WNfIG.png\" rel=\"nofollow noreferrer\">2</a> = 2    B<a href=\"https://i.stack.imgur.com/WNfIG.png\" rel=\"nofollow noreferrer\">2</a> = 0<br>\n  A[3] = 1    B[3] = 0   A[4] = 5    B[4] = 0 Initially all the fish are\n  alive and all except fish number 1 are moving upstream. Fish number 1\n  meets fish number 2 and eats it, then it meets fish number 3 and eats\n  it too. Finally, it meets fish number 4 and is eaten by it. The\n  remaining two fish, number 0 and 4, never meet and therefore stay\n  alive.</p>\n  \n  <p>Write a function:</p>\n  \n  <p>int solution(vector &amp;A, vector &amp;B);</p>\n  \n  <p>that, given two non-empty arrays A and B consisting of N integers,\n  returns the number of fish that will stay alive.</p>\n  \n  <p>For example, given the arrays shown above, the function should return\n  2, as explained above.</p>\n  \n  <p>Write an efficient algorithm for the following assumptions:</p>\n  \n  <p>N is an integer within the range [1..100,000]; each element of array A\n  is an integer within the range [0..1,000,000,000]; each element of\n  array B is an integer that can have one of the following values: 0, 1;\n  the elements of A are all distinct.</p>\n</blockquote>\n\n<p>My solution is as follows:</p>\n\n<pre><code>// you can use includes, for example:\n// #include &lt;algorithm&gt;\n#include &lt;queue&gt;\n// you can write to stdout for debugging purposes, e.g.\n// cout &lt;&lt; \"this is a debug message\" &lt;&lt; endl;\n\nint solution(vector&lt;int&gt; &amp;A, vector&lt;int&gt; &amp;B) {\n    // write your code in C++14 (g++ 6.2.0)\n    std::queue&lt;int&gt; downStreamers;\n    int deadFish = 0;\n\n    for(int i = 0; i &lt; (int)B.size(); i++)\n    {\n        int direction = B[i];\n        int size = A[i];\n\n        if(direction == 1)\n            downStreamers.push(size);\n        else\n        {\n            while(!downStreamers.empty()) \n            {\n                deadFish += 1;\n                if(size &gt; downStreamers.front())\n                {  \n                    downStreamers.pop();\n                }\n                else\n                    break;\n            }\n        }\n    }\n\n    return A.size()-deadFish;\n\n}\n</code></pre>\n\n<p>Here is how I designed this code (in my head):</p>\n\n<p>Queue structure called downStreamers will contain fish going in the downstream direction (1)</p>\n\n<p>deadFish will contain counter of deaths that occur due to direction collision</p>\n\n<p>The Loop:</p>\n\n<p>For every fish i</p>\n\n<ul>\n<li>check if i fish is going downstream (1), if so add the size of the said\nfish at the back of the downStreamers queue.</li>\n<li>given that the ith fish is going upstream (0), I want to increase the deadFish counter given that the queue is not empty. If the fish get's defeated by downStreamers stack, simply exit the loop, else pop the fish from the downStreamers untill it's empty.</li>\n</ul>\n\n<p>At the end of the loop, the result should be the number of fishes (A.size()) - deadFishes. This works for simple test cases. However, it fails the hidden ones and codility doesn't provide much feedback as to what went wrong.</p>\n\n<p>Here are my testing results.</p>\n\n<p><a href=\"https://i.stack.imgur.com/WNfIG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WNfIG.png\" alt=\"enter image description here\"></a></p>\n\n<p>I'd appreciate if someone would provide me with the insight into how approach these problems in a fool-proof manner.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1409, "user_id": 6385640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-muwyWfIjFd8/AAAAAAAAAAI/AAAAAAAAAG0/nctjQMOQOQY/photo.jpg?sz=128", "display_name": "Red.Wave", "link": "https://stackoverflow.com/users/6385640/red-wave"}, "edited": false, "score": 0, "creation_date": 1568909246, "post_id": 57998336, "comment_id": 102433970, "body": "What are \u2018pin\u2018 and \u2018mode\u2018 aruments supposed to do? How are they related to \u2018callback\u2018? You can find this info in the docs of your external lib. Please share that part of the docs; so freinds can present more precise replies."}, {"owner": {"reputation": 63, "user_id": 11605943, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-02Slnkiy7J8/AAAAAAAAAAI/AAAAAAAAASI/dFsD__-f_Mw/photo.jpg?sz=128", "display_name": "Steven Welch", "link": "https://stackoverflow.com/users/11605943/steven-welch"}, "reply_to_user": {"reputation": 1409, "user_id": 6385640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-muwyWfIjFd8/AAAAAAAAAAI/AAAAAAAAAG0/nctjQMOQOQY/photo.jpg?sz=128", "display_name": "Red.Wave", "link": "https://stackoverflow.com/users/6385640/red-wave"}, "edited": false, "score": 0, "creation_date": 1569877891, "post_id": 57998336, "comment_id": 102731382, "body": "Docs... Thats funny."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 11605943, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-02Slnkiy7J8/AAAAAAAAAAI/AAAAAAAAASI/dFsD__-f_Mw/photo.jpg?sz=128", "display_name": "Steven Welch", "link": "https://stackoverflow.com/users/11605943/steven-welch"}, "edited": false, "score": 0, "creation_date": 1569979720, "post_id": 57998946, "comment_id": 102767229, "body": "Doesn&#39;t that only work if there is a single button. What do you do if you have two buttons?"}], "tags": [], "owner": {"reputation": 1738, "user_id": 1342231, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/MUVfk.jpg?s=128&g=1", "display_name": "Machinegon", "link": "https://stackoverflow.com/users/1342231/machinegon"}, "is_accepted": false, "score": 5, "last_activity_date": 1568832068, "last_edit_date": 1568832068, "creation_date": 1568831657, "answer_id": 57998946, "question_id": 57998336, "link": "https://stackoverflow.com/questions/57998336/how-do-i-pass-an-instance-of-a-object-function-to-another-function/57998946#57998946", "title": "How do I pass an instance of a object function to another function?", "body": "<p>You're using an old c-style function pointer callback. This does not work for member function of an object. If you can't change the callback, you need to make the Buttons::released function static.</p>\n"}, {"comments": [{"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 0, "creation_date": 1568847457, "post_id": 58001544, "comment_id": 102409015, "body": "If you can change the types of your callback, you probably want the STL types from <code>&lt;functional&gt;</code> instead of rolling your own."}, {"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "reply_to_user": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 1, "creation_date": 1568847805, "post_id": 58001544, "comment_id": 102409079, "body": "That&#39;s entirely true, @Davislor.  This is all mainly just a workaround for <code>std::function</code> not being compatible with raw function pointers in and of itself; it could be implemented with <code>std::function</code>, too, but I chose not to do that since it wouldn&#39;t really reap the main benefits of doing so by just converting back to normal function pointer anyways."}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 0, "creation_date": 1568859940, "post_id": 58001544, "comment_id": 102411163, "body": "Clever approach! Now I\u2019m tempted to implement my own solution with templated singleton classes."}, {"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "reply_to_user": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 0, "creation_date": 1568906607, "post_id": 58001544, "comment_id": 102432680, "body": "Thanks, @Davislor.  That would definitely be an improvement, and is something I looked at myself.  The simplest means of doing so appeared (to me) to be a compile-time counter, but the validity of such an approach is currently up in the air (I believe the <code>constexpr</code> ADL counter in particular is considered a potential defect, and thus may be rendered illegal in the future), and to my knowledge there are no implicit or explicit partial deduction guides, so my approach would&#39;ve increased complexity more than I wanted to suggest.  I hope you fare better at it than I did! ^_^"}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 1, "creation_date": 1568907102, "post_id": 58001544, "comment_id": 102432936, "body": "Maybe just cut the Gordian Knot and have the programmer provide an ID as the template parameter?"}, {"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "reply_to_user": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 0, "creation_date": 1569093365, "post_id": 58001544, "comment_id": 102486978, "body": "That works, @Davislor, yeah. ;P  <code>Caller</code> would be easily modifiable to work with an ID parameter, although <code>MultiCaller</code> might have to either take another non-type parameter to indicate the maximum number of stored pointers or lose the safety of compile-time bounds checking."}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 1, "creation_date": 1569100352, "post_id": 58001544, "comment_id": 102488528, "body": "It should also be possible to simplify considerably by using <code>std::enable_if</code>. When I get the chance, I think I would like to take a crack at it. It\u2019s an interesting problem."}, {"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "reply_to_user": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 0, "creation_date": 1569121023, "post_id": 58001544, "comment_id": 102490996, "body": "Can&#39;t wait to see what you come up with, @Davislor! ^_^"}, {"owner": {"reputation": 63, "user_id": 11605943, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-02Slnkiy7J8/AAAAAAAAAAI/AAAAAAAAASI/dFsD__-f_Mw/photo.jpg?sz=128", "display_name": "Steven Welch", "link": "https://stackoverflow.com/users/11605943/steven-welch"}, "reply_to_user": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 0, "creation_date": 1569879465, "post_id": 58001544, "comment_id": 102731879, "body": "Thanks @Davislor! It will take me some time to digest your example. I will play around with it on compiler explore as you suggest."}], "tags": [], "owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1568846144, "creation_date": 1568846144, "answer_id": 58001544, "question_id": 57998336, "link": "https://stackoverflow.com/questions/57998336/how-do-i-pass-an-instance-of-a-object-function-to-another-function/58001544#58001544", "title": "How do I pass an instance of a object function to another function?", "body": "<p>[Note that this code will use the following simplified version of your MCVE, primarily to have an easily-usable callback caller when testing &amp; demonstrating the implementation:]</p>\n\n<pre><code>// Pointer type.\ntypedef void (*voidFuncPtr)(void);\n\n// Dummy callback callers.\nvoid takesVoidFuncPtr(voidFuncPtr vfp) {\n    std::cout &lt;&lt; \"Now calling vfp...\\n\";\n    vfp();\n    std::cout &lt;&lt; \"vfp called.\\n\";\n}\nstruct DelayedCaller {\n    voidFuncPtr ptr;\n    DelayedCaller(voidFuncPtr p) : ptr(p) {}\n    void callIt() { return ptr(); }\n};\n\n// Simple stand-in for Button.\nstruct HasMemberFunction {\n    std::string name;\n\n    HasMemberFunction(std::string n) : name(std::move(n)) {}\n\n    void memfunc() { std::cout &lt;&lt; \"--&gt;Inside \" &lt;&lt; name &lt;&lt; \".memfunc()&lt;--\\n\"; }\n    void funcmem() { static std::string out(\"Don't call me, I'm lazy. &gt;.&lt;\\n\"); std::cout &lt;&lt; out; }\n};\n\n// Calling instance.\nHasMemberFunction hmf(\"instance\");\n</code></pre>\n\n<hr>\n\n<p>Ideally, you'd be able to bind the function to an instance with a lambda, and pass that to the consuming function as the callback.  Unfortunately, though, capturing lambdas can't be converted to non-member function pointers, so this option isn't viable.  However...</p>\n\n<p>[Note that I have omitted proper encapsulation both for brevity, and for a demonstration of this approach's caveats at the end of the answer.  I would recommend adding it if you actually use this.]</p>\n\n<pre><code>// Helper.\n// Can easily be simplified if desired, Caller and MultiCaller only use FuncPtrTraits::ContainingClass.\nnamespace detail {\n    template&lt;typename...&gt; struct Pack {};\n\n    template&lt;typename T&gt; struct FuncPtrTraits;\n\n    template&lt;typename Ret, typename Class, typename... Params&gt;\n    struct FuncPtrTraits&lt;Ret (Class::*)(Params...)&gt; {\n        using ReturnType = Ret;\n        using ContainingClass = Class;\n        using ParameterList = Pack&lt;Params...&gt;;\n    };\n\n    template&lt;typename T&gt;\n    using ContainingClass = typename FuncPtrTraits&lt;T&gt;::ContainingClass;\n} // detail\n\n// Calling wrapper.\n// Only allows one pointer-to-member-function to be wrapped per class.\ntemplate&lt;typename MemFunc, typename Class = detail::ContainingClass&lt;MemFunc&gt;&gt;\nstruct Caller {\n    static_assert(std::is_member_function_pointer&lt;MemFunc&gt;::value, \"Must be built with pointer-to-member-function.\");\n\n    static Class*   c;\n    static MemFunc mf;\n\n    static void prep(Class&amp; cls, MemFunc mem) { c = &amp;cls; mf = mem; }\n    static void clean() { c = nullptr; mf = nullptr; }\n    static void call() { return (c-&gt;*mf)(); }\n\n    // Constructor is provided for convenience of creation, to effectively tie prep() to deduction guide.\n    // Note that it operates on static members only.\n    // Convenient, but likely confusing.  ...Probably best not to do this. ;3\n    Caller(Class&amp; cls, MemFunc mem) { prep(cls, mem); }\n\n    // Default constructor is required if we provide the above hax ctor.\n    Caller() = default;\n};\ntemplate&lt;typename MemFunc, typename Class&gt; Class*  Caller&lt;MemFunc, Class&gt;::c  = nullptr;\ntemplate&lt;typename MemFunc, typename Class&gt; MemFunc Caller&lt;MemFunc, Class&gt;::mf = nullptr;\n</code></pre>\n\n<p>We can instead provide the desired behaviour by using a wrapper class, which stores the desired function and instance as static member variables, and provides a static member function that matches <code>voidFuncPtr</code> and contains the actual, desired function call.  It can be used like so:</p>\n\n<pre><code>std::cout &lt;&lt; \"\\nSimple caller, by type alias:\\n\";\nusing MyCaller = Caller&lt;decltype(&amp;HasMemberFunction::memfunc)&gt;;\nMyCaller::prep(hmf, &amp;HasMemberFunction::memfunc);\ntakesVoidFuncPtr(&amp;MyCaller::call);\nMyCaller::clean(); // Not strictly necessary, but may be useful once the callback will no longer be called.\n\n// Or...\n\nstd::cout &lt;&lt; \"\\nSimple caller, via dummy instance:\\n\";\nCaller&lt;decltype(&amp;HasMemberFunction::memfunc)&gt; caller;\ncaller.prep(hmf, &amp;HasMemberFunction::memfunc);\ntakesVoidFuncPtr(&amp;caller.call);\ncaller.clean(); // Not strictly necessary, but may be useful once the callback will no longer be called.\n</code></pre>\n\n<p>That's a bit of a mess, so a hacky constructor is provided to simplify it.<br>\n[Note that this may violate the principle of least astonishment, and thus isn't necessarily the best option.]</p>\n\n<pre><code>std::cout &lt;&lt; \"\\nSimple caller, via hax ctor:\\n\";\nCaller clr(hmf, &amp;HasMemberFunction::memfunc);\ntakesVoidFuncPtr(&amp;clr.call);\nclr.clean(); // Not strictly necessary, but may be useful once the callback will no longer be called.\n</code></pre>\n\n<hr>\n\n<p>Now, this version only allows one function to be wrapped per class.  If multiple functions per class are required, we'll need to expand it a little.</p>\n\n<p>[Note that this would be pretty awkward to typedef, as the optimal template parameter order places the first pointer-to-member-function first, to allow <code>Class</code> to be automatically deduced if only one function needs to be wrapped; the \"hax ctor\" approach was primarily intended for this version of <code>Caller</code>, although a deduction guide could likely also be used to swap <code>Class</code> and <code>MemFunc</code>.]<br>\n[Also note that all wrapped member functions must have the same signature.]</p>\n\n<pre><code>// Calling wrapper.\n// Slightly more complex version, allows multiple instances of MemFunc to be wrapped.\ntemplate&lt;typename MemFunc, typename Class = detail::ContainingClass&lt;MemFunc&gt;, typename... MemFuncs&gt;\nstruct MultiCaller {\n    static_assert(std::is_member_function_pointer&lt;MemFunc&gt;::value, \"Must be built with pointer-to-member-function.\");\n    static_assert(std::conjunction_v&lt;std::is_same&lt;MemFunc, MemFuncs&gt;...&gt;, \"All pointers-to-member-function must be the same type.\");\n\n    static Class* c;\n    static std::array&lt;MemFunc, 1 + sizeof...(MemFuncs)&gt; mfs;\n\n    static void prep(Class&amp; cls, MemFunc mem, MemFuncs... mems) { c = &amp;cls; mfs = { mem, mems... }; }\n    static void clean() { c = nullptr; for (auto&amp; m : mfs) { m = nullptr; } }\n\n    // Registered functions are wrapped by index, with index specified as a template parameter to match empty parameter list.\n    template&lt;size_t N = 0, bool B = (N &lt; mfs.size())&gt;\n    static void call() {\n        static_assert(B, \"Index must be a valid index for mfs.\");\n        return (c-&gt;*mfs[N])();\n    }\n\n    // Constructor is provided for convenience of creation, to effectively tie prep() to deduction guide.\n    // Note that it operates on static members only.\n    // Convenient, but likely confusing.  Primarily used because instantiation &amp; preparation get really repetitive otherwise.\n    MultiCaller(Class&amp; cls, MemFunc mem, MemFuncs... mems) { prep(cls, mem, mems...); }\n\n    // Default constructor is required if we provide the above hax ctor.\n    MultiCaller() = default;\n};\ntemplate&lt;typename MemFunc, typename Class, typename... MemFuncs&gt; Class*                                       MultiCaller&lt;MemFunc, Class, MemFuncs...&gt;::c   = nullptr;\ntemplate&lt;typename MemFunc, typename Class, typename... MemFuncs&gt; std::array&lt;MemFunc, 1 + sizeof...(MemFuncs)&gt; MultiCaller&lt;MemFunc, Class, MemFuncs...&gt;::mfs = {nullptr};\n</code></pre>\n\n<p>It can be used by type alias as before, or the \"hax ctor\" can be used to couple it to a deduction guide like so:</p>\n\n<pre><code>std::cout &lt;&lt; \"\\nMulti-registration caller, by type alias:\\n\";\nusing MyMultiCaller = MultiCaller&lt;decltype(&amp;HasMemberFunction::memfunc), HasMemberFunction, decltype(&amp;HasMemberFunction::funcmem)&gt;;\nMyMultiCaller::prep(hmf, &amp;HasMemberFunction::memfunc, &amp;HasMemberFunction::funcmem);\ntakesVoidFuncPtr(&amp;MyMultiCaller::call&lt;0&gt;); // memfunc\ntakesVoidFuncPtr(&amp;MyMultiCaller::call&lt;1&gt;); // funcmem\nMyMultiCaller::clean(); // Not strictly necessary, but may be useful once the callback will no longer be called.\n\n// Or...\n\nstd::cout &lt;&lt; \"\\nMulti-registration caller, via hax ctor:\\n\";\nMultiCaller mclr(hmf, &amp;HasMemberFunction::memfunc, &amp;HasMemberFunction::funcmem);\ntakesVoidFuncPtr(&amp;mclr.call&lt;0&gt;); // memfunc\ntakesVoidFuncPtr(&amp;mclr.call&lt;1&gt;); // funcmem\nmclr.clean(); // Not strictly necessary, but may be useful once the callback will no longer be called.\n</code></pre>\n\n<hr>\n\n<p>Note that in all cases, this has all the caveats of static members.  In particular, since the binding relies on the static class members and isn't contained within the wrapper function itself, modifying the members after a callback is passed will <em>immediately</em> change the results of calling said already-passed callback.</p>\n\n<pre><code>std::cout &lt;&lt; \"\\nBut alas:\\n\";\nMyCaller::prep(hmf, &amp;HasMemberFunction::memfunc);\nDelayedCaller dc(&amp;MyCaller::call);\ndc.callIt(); // Output: \"--&gt;Inside instance.memfunc()&lt;--\"\nstd::cout &lt;&lt; \"Changing the registered instance will...\\n\";\nHasMemberFunction hmf2(\"spinstance\");\nMyCaller::c = &amp;hmf2;\ndc.callIt(); // Output: \"--&gt;Inside spinstance.memfunc()&lt;--\"\n</code></pre>\n\n<p>You can see the different variants <a href=\"https://godbolt.org/z/6RG4Od\" rel=\"nofollow noreferrer\">here, on Compiler Explorer</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1568849094, "post_id": 58001623, "comment_id": 102409290, "body": "This would be a cleaner solution than my own, but I don&#39;t believe he&#39;s able to change <code>attachInterrupt()</code> at all.  The description suggests it&#39;s in an external library, and that he&#39;s trying to figure out how to properly call it in <code>Buttons::begin()</code>."}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "reply_to_user": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1568850427, "post_id": 58001623, "comment_id": 102409577, "body": "@JustinTime You\u2019re correct, and I acknowledge that in my answer. The question was ambiguous enough that it might still be useful. At least to someone searching for this question."}, {"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1568906151, "post_id": 58001623, "comment_id": 102432427, "body": "Fair enough. ;P  I can see having different approaches that only modify specific parts of the overall design being pretty useful, other coders might indeed have different constraints (such as, e.g., whoever maintains <code>attachInterrupt()</code>, and may have to maintain compatibility with <code>Button</code> in the future)."}, {"owner": {"reputation": 63, "user_id": 11605943, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-02Slnkiy7J8/AAAAAAAAAAI/AAAAAAAAASI/dFsD__-f_Mw/photo.jpg?sz=128", "display_name": "Steven Welch", "link": "https://stackoverflow.com/users/11605943/steven-welch"}, "reply_to_user": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1569878255, "post_id": 58001623, "comment_id": 102731509, "body": "@JustinTime You are correct that attachInterrupt() is a function in an external library.  Thanks very much for your response, it was very helpful in helping me understand the problem and all the potential options."}], "tags": [], "owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "is_accepted": true, "score": 2, "last_activity_date": 1569001069, "last_edit_date": 1569001069, "creation_date": 1568846777, "answer_id": 58001623, "question_id": 57998336, "link": "https://stackoverflow.com/questions/57998336/how-do-i-pass-an-instance-of-a-object-function-to-another-function/58001623#58001623", "title": "How do I pass an instance of a object function to another function?", "body": "<p>The problem you were facing is that you wanted to pass two pieces of data as your callback: the member function, and a class instance to call that member function on.</p>\n\n<p>With the existing interface, which only accepts a function pointer with no arguments, you might create a static <code>Button</code> object and then write a static wrapper function that calls <code>someStaticButton.released()</code>.  Then you could pass the address of this wrapper function as your callback.  Justin Time\u2019s answer approaches from a different, and clever, direction: wrap the instance and member in a singleton class, and give that a static member callback function.  A simpler way to allow more than one singleton class would be to add a numeric ID as template parameter.</p>\n\n<p>You might also be able to make <code>button::released()</code> a <code>static</code> member function, but your implementation appears to refer to member data.  This wouldn\u2019t be an option unless there is only one button in the program, represented by a singleton class.</p>\n\n<p>If you can pass the instance pointer as the first argument to your callback function, or any other argument that can do a round-trip conversion to and from an object pointer (such as <code>void*</code> or any integer as wide as <code>intptr_t</code>), you can make the member function <code>static</code> and pass the <code>this</code> pointer as its argument.</p>\n\n<p>If you can overload <code>attachInterrupt</code> to take a <code>std::function</code> object as your callback, you can do what you originally wanted.  This type can represent a static function, a member function, or a closure containing a member function and a <code>this</code> pointer.</p>\n\n<p>You unfortunately say you cannot change the callback function, but perhaps you can extend the interface in a backward-compatible way, such as:</p>\n\n<pre><code>#include &lt;array&gt;\n#include &lt;iostream&gt;\n#include &lt;functional&gt;\n#include &lt;stdint.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;utility&gt;\n\nusing std::cout;\nusing std::endl;\nusing voidFuncPtr = void(*)(void);\nusing Callback = std::function&lt;void(void)&gt;;\n\nstd::array&lt;Callback, 1&gt; interrupts;\n\nvoid attachInterruptEx( const uint32_t pin,\n                        Callback&amp;&amp; callback,\n                        const uint32_t /* unused */ )\n{\n  interrupts.at(pin) = std::move(callback);\n}\n\nvoid attachInterrupt( const uint32_t pin,\n                      const voidFuncPtr callbackPtr,\n                      const uint32_t mode )\n{\n  /* Passing callbackPtr to a function that expects Callback&amp;&amp; implicitly\n   * invokes the constructor Callback(voidFuncPtr).  This is sugar for\n   * std::function&lt;void(void)&gt;(void(*)(void)). That is, it initializes a\n   * temporary Callback object from callbackPtr.\n   */\n  return attachInterruptEx( pin, callbackPtr, mode );\n}\n\nclass Buttons {\n  public:\n     Buttons() = default;\n\n     bool begin(int buttonPin);\n     void released();\n     unsigned long buttonPresses() { return numButtonPresses; }\n\n  private:\n     // Empty stub function, probably calls a timer.\n     unsigned long millis() { return 0; };\n\n     static constexpr uint32_t LOW = 0;\n     uint32_t buttonState = LOW;\n     unsigned long numButtonPresses = 0;\n     unsigned long pressStartTime = 0;\n     unsigned long pressLength = 0;\n};\n\n/* Per C++17, a constant known at compile time is not odr-used, so this\n * definition is deprecated.  Still included out of an abundance of caution.\n * It cannot have an initializer.\n */\nconstexpr uint32_t Buttons::LOW;\n\nbool Buttons::begin(int buttonPin)\n{\n/* The C++17 Standard says little about the return type of std::bind().\n * Since the result is a callable object, a std::function can be initialized\n * from it.  I make the constructor call explicit in case the return type of\n * std::bind is a subclass of std::function in some implementation, and\n * it resolves the overload in a way we don't expect.\n */\n  attachInterruptEx( static_cast&lt;uint32_t&gt;(buttonPin),\n                     Callback(std::bind(&amp;Buttons::released, this)),\n                     LOW );\n\n  return false;\n}\n\nvoid Buttons::released()\n{\n    numButtonPresses++;\n    pressLength = millis()-pressStartTime;\n    pressStartTime = 0;\n    buttonState=LOW;\n}\n\nint main(void)\n{\n  Buttons buttons;\n\n  buttons.begin(0);\n  interrupts[0]();\n\n  // Should be 1.\n  cout &lt;&lt; buttons.buttonPresses() &lt;&lt; endl;\n\n  return EXIT_SUCCESS;\n}\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 11605943, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-02Slnkiy7J8/AAAAAAAAAAI/AAAAAAAAASI/dFsD__-f_Mw/photo.jpg?sz=128", "display_name": "Steven Welch", "link": "https://stackoverflow.com/users/11605943/steven-welch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 58001623, "answer_count": 3, "score": 3, "last_activity_date": 1569001069, "creation_date": 1568829099, "question_id": 57998336, "link": "https://stackoverflow.com/questions/57998336/how-do-i-pass-an-instance-of-a-object-function-to-another-function", "title": "How do I pass an instance of a object function to another function?", "body": "<p>I have a class that is trying to encapsulate the setup of an interrupt. I need to pass an instantiated reference/pointer/etc to an external function that then calls my function. </p>\n\n<p>I can't change this function:</p>\n\n<pre><code>typedef void (*voidFuncPtr)(void);\nvoid attachInterrupt(uint32_t pin, voidFuncPtr callback, uint32_t mode);\n</code></pre>\n\n<p>My Library:</p>\n\n<pre><code>\nclass Buttons ... \n\nbool Buttons::begin(int buttonPin)\n{\n    //attachInterrupt(buttonPin, (this-&gt;*func)Buttons::released, HIGH);\n    attachInterrupt(buttonPin, &amp;Buttons::released, LOW);\n\nreturn 0;\n}\n\nvoid Buttons::released()\n{\n    numButtonPresses++;\n    pressLength = millis()-pressStartTime;\n    pressStartTime = 0;\n    buttonState=LOW;\n}\n</code></pre>\n\n<p>The problem is that I don't know what to put inside the attachInterupt function in the Buttons::begin method. I am sure I am doing something wrong in the way I am approaching this problem, but I am not sure what it is or what I should do about it. I would greatly appreciate any suggestions!</p>\n"}, {"tags": ["c++", "arrays", "counting"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1568828088, "post_id": 57998061, "comment_id": 102402292, "body": "Your loop in <code>hasNum</code> always returns on the first iteration. You probably meant to only <code>return false;</code> at the end of the function."}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 2, "creation_date": 1568828129, "post_id": 57998061, "comment_id": 102402306, "body": "<code>if (\u2026) return true; else return false;</code> should <i>always</i> be written as <code>return \u2026;</code>."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1568828963, "post_id": 57998061, "comment_id": 102402622, "body": "@JJaco It is unclear what you are trying to determine for a given array. Whether the array shall contain all numbers from other array?"}, {"owner": {"reputation": 1000, "user_id": 2119377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/658d809fd5cca51330dd21dfa2474fd0?s=128&d=identicon&r=PG", "display_name": "Wolfgang Brehm", "link": "https://stackoverflow.com/users/2119377/wolfgang-brehm"}, "edited": false, "score": 0, "creation_date": 1568828992, "post_id": 57998061, "comment_id": 102402636, "body": "There is a lot wrong with it but it should terminate eventually so long size is not very large."}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "edited": false, "score": 0, "creation_date": 1568830787, "post_id": 57998061, "comment_id": 102403361, "body": "Appear to be trying to find matches in a 2D square matrix but are using 1D arrays amongst the other problems described by previous commenters. For instance this <code>for (int i = 0; i &lt; size; i++) </code> does not use <code>i</code> anywhere else."}], "answers": [{"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1568829232, "post_id": 57998100, "comment_id": 102402723, "body": "<code>std::find</code> would be simpler in this case and they can work with arrays just fine."}, {"owner": {"reputation": 12139, "user_id": 2412846, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/eBJip.gif?s=128&g=1", "display_name": "davidhigh", "link": "https://stackoverflow.com/users/2412846/davidhigh"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1568829426, "post_id": 57998100, "comment_id": 102402803, "body": "@Slava: Not sure about that. Do you really prefer the <code>std::find(...) != std::end(a)</code> syntax to the stuff above? \u2013"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1568829536, "post_id": 57998100, "comment_id": 102402848, "body": "It would not require lambda, so it would me simpler to write and read and I think show intention better. But that is my humble opinion I did not say your answer is wrong."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1568829767, "post_id": 57998100, "comment_id": 102402936, "body": "For arrays - your suggestion to use <code>std::vector</code> is valid but it may sound like you must use it to use <code>std::count_if</code> etc. So I would reword that a little."}], "tags": [], "owner": {"reputation": 12139, "user_id": 2412846, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/eBJip.gif?s=128&g=1", "display_name": "davidhigh", "link": "https://stackoverflow.com/users/2412846/davidhigh"}, "is_accepted": false, "score": 2, "last_activity_date": 1568828139, "creation_date": 1568828139, "answer_id": 57998100, "question_id": 57998061, "link": "https://stackoverflow.com/questions/57998061/how-can-i-check-if-a-array-contains-multiple-elements/57998100#57998100", "title": "How can I check if a array contains multiple elements?", "body": "<p>Man, that's C++. So use a standard vector and the count_if function from the standard library:</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;vector&gt;\n\nstd::vector&lt;int&gt; a { /* fill vector */ };\nstd::count_if(std::begin(a), std::end(a), [](auto const&amp; x){ return x == 1;});\n</code></pre>\n\n<p>Return the number of elements with value <code>1</code>.</p>\n\n<p>Also good, to question whether there's any value of <code>1</code>:</p>\n\n<pre><code>std::any_of(std::begin(a), std::end(a), [](auto const&amp; x){ return x == 1;});\n</code></pre>\n\n<p>I know this is strictly not an answer ...</p>\n"}, {"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1568828641, "post_id": 57998118, "comment_id": 102402495, "body": "Suggesting the use of STL is fine, but it goes in a comment. Many questions asked here have constraints to use fundamental type arrays instead of containers. Finding out if that is the case is also the subject of a comment."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1568828799, "post_id": 57998118, "comment_id": 102402560, "body": "@DavidC.Rankin Absent specification to the contrary, the default assumption when answering a question is that the entire language is available."}, {"owner": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1568828808, "post_id": 57998118, "comment_id": 102402563, "body": "@DavidC.Rankin it is sad that in Uni&#39;s and Collages they teach such worthless crap. And it isn&#39;t hard to replace <code>std::array</code> with <code>bool hist[10]</code> and <code>std::vector&lt;int&gt;</code> with <code>int *a, size_t n</code>"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1568829363, "post_id": 57998118, "comment_id": 102402771, "body": "There is nothing wrong with STL or an array of fundamental types. Understanding what the questioner needs is the operative question."}, {"owner": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "edited": false, "score": 0, "creation_date": 1568829908, "post_id": 57998118, "comment_id": 102402989, "body": "@ DavidC.Rankin one of basic answers to noob-style questions: you do something fundamentally wrong. It&#39;s better that people understand this rather than the opposite - learn to write horrible code, which is unfortunately taught at various places."}], "tags": [], "owner": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "is_accepted": false, "score": 0, "last_activity_date": 1568828208, "creation_date": 1568828208, "answer_id": 57998118, "question_id": 57998061, "link": "https://stackoverflow.com/questions/57998061/how-can-i-check-if-a-array-contains-multiple-elements/57998118#57998118", "title": "How can I check if a array contains multiple elements?", "body": "<p>Basically, your code is far from any C++ guidelines.</p>\n\n<p>First, you don't pass array in C++ as <code>int a[]</code>. Use <code>std::vector&lt;int&gt;</code> instead.</p>\n\n<p>Second your algorithm is badly inefficient. Consider using histogram approach.</p>\n\n<pre><code>bool isSolved(const std::vector&lt;int&gt;&amp; a)\n{\n     std::array&lt;bool,10&gt; hist;\n     for(int i=0; i&lt;10; i++)\n     {\n         hist[i]=false;\n     }\n     for(auto x : a)\n     {\n         if(x&gt;=0 &amp;&amp; x&lt;10)\n         {\n              hist[x] = true;\n         }\n     }\n\n     for(int i=0; i&lt;10; i++)\n     {\n         if(!hist[i]) return false;\n     }\n     return true;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19618, "user_id": 860585, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/YagL1.jpg?s=128&g=1", "display_name": "Rotem", "link": "https://stackoverflow.com/users/860585/rotem"}, "edited": false, "score": 1, "creation_date": 1568828484, "post_id": 57998150, "comment_id": 102402423, "body": "Really? This is what you consider a helpful answer?"}, {"owner": {"reputation": 12139, "user_id": 2412846, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/eBJip.gif?s=128&g=1", "display_name": "davidhigh", "link": "https://stackoverflow.com/users/2412846/davidhigh"}, "edited": false, "score": 0, "creation_date": 1568828513, "post_id": 57998150, "comment_id": 102402435, "body": "No, this is what I consider a funny answer. And it&#39;s true."}, {"owner": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "reply_to_user": {"reputation": 19618, "user_id": 860585, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/YagL1.jpg?s=128&g=1", "display_name": "Rotem", "link": "https://stackoverflow.com/users/860585/rotem"}, "edited": false, "score": 0, "creation_date": 1568828539, "post_id": 57998150, "comment_id": 102402444, "body": "@Rotem nothing wrong with a joke. Even if it is a logical joke."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 1, "last_activity_date": 1568828360, "creation_date": 1568828360, "answer_id": 57998150, "question_id": 57998061, "link": "https://stackoverflow.com/questions/57998061/how-can-i-check-if-a-array-contains-multiple-elements/57998150#57998150", "title": "How can I check if a array contains multiple elements?", "body": "<blockquote>\n  <p>I am trying to see if an array contains multiple values at any given index in the array</p>\n</blockquote>\n\n<p>An array always contains exactly one value in every index.</p>\n"}, {"tags": [], "owner": {"reputation": 592, "user_id": 6022626, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-TE4SgJMzh3g/AAAAAAAAAAI/AAAAAAAAAE4/BpGV2AGlUG0/photo.jpg?sz=128", "display_name": "Suraj", "link": "https://stackoverflow.com/users/6022626/suraj"}, "is_accepted": true, "score": 1, "last_activity_date": 1568828476, "creation_date": 1568828476, "answer_id": 57998175, "question_id": 57998061, "link": "https://stackoverflow.com/questions/57998061/how-can-i-check-if-a-array-contains-multiple-elements/57998175#57998175", "title": "How can I check if a array contains multiple elements?", "body": "<p>There's no need to have 2 for loops in your <code>hasNum</code> function. Also, you are returning false if any of the values in the array is not equal to the number passed. You need to return false after the for loop ends.</p>\n\n<p>Rewrite your <code>hasNum</code> function as shown below:</p>\n\n<pre><code>bool hasNum(int a[], int size, int num) {\n\n    for (int i = 0; i &lt; size; i++) {\n        if (a[i] == num) {\n            return true;\n        }\n    }\n    return false;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95, "user_id": 11923505, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-C6rwhQ11j2c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc9jkyB24w3AUZ5sNzK1lOdvZn_Uw/photo.jpg?sz=128", "display_name": "C. R. Ward", "link": "https://stackoverflow.com/users/11923505/c-r-ward"}, "is_accepted": false, "score": 0, "last_activity_date": 1568828806, "creation_date": 1568828806, "answer_id": 57998267, "question_id": 57998061, "link": "https://stackoverflow.com/questions/57998061/how-can-i-check-if-a-array-contains-multiple-elements/57998267#57998267", "title": "How can I check if a array contains multiple elements?", "body": "<p>Here is a hint to the solution to your problem:</p>\n\n<pre><code>class BinaryTreeSet : public BinarySearchTree {\n    ...\n    operator==\n    ...\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1000, "user_id": 2119377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/658d809fd5cca51330dd21dfa2474fd0?s=128&d=identicon&r=PG", "display_name": "Wolfgang Brehm", "link": "https://stackoverflow.com/users/2119377/wolfgang-brehm"}, "is_accepted": false, "score": 0, "last_activity_date": 1568829661, "creation_date": 1568829661, "answer_id": 57998460, "question_id": 57998061, "link": "https://stackoverflow.com/questions/57998061/how-can-i-check-if-a-array-contains-multiple-elements/57998460#57998460", "title": "How can I check if a array contains multiple elements?", "body": "<p>You are best off using std algorithms like find_if:</p>\n\n<pre><code>#include &lt;algorithm&gt;\nint a[42]; // or vector&lt;int&gt; a(42) or any other container of any size\nstd::find_if(std::begin(a),std::end(a),[](auto const&amp; v){return (v&gt;=1)&amp;&amp;(v&lt;=9);});\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 9104121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55cef638515a3a20f4c13c4296c1c7ea?s=128&d=identicon&r=PG&f=1", "display_name": "JJaco", "link": "https://stackoverflow.com/users/9104121/jjaco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 698, "favorite_count": 0, "accepted_answer_id": 57998175, "answer_count": 6, "score": 0, "last_activity_date": 1568829661, "creation_date": 1568827937, "last_edit_date": 1568828094, "question_id": 57998061, "link": "https://stackoverflow.com/questions/57998061/how-can-i-check-if-a-array-contains-multiple-elements", "title": "How can I check if a array contains multiple elements?", "body": "<p>I am trying to see if an array contains multiple values at any given index in the array, and if it does I want it to return true and if not return false. I want it to return true when it finds the numbers 1-9 and false if it does not.</p>\n\n<pre><code> bool isSolved(int a[], int size) {\n    int count = 0;\n    for (int i = 1; i &lt; 10; i++) {\n        if (hasNum(a,size,i)) {\n            count++;\n        }\n    }\n    if (count == 9) {\n        return true;\n    }\n    else { \n        return false;\n    }\n}\n\nbool hasNum(int a[], int size, int num) {\n\n    for (int i = 0; i &lt; size; i++) {\n        for (int j = 0; j &lt; size; j++) {\n            if (a[j] == num) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>This is what I have so far and it just gets stuck and never ends.</p>\n"}, {"tags": ["c++", "class", "inheritance", "polymorphism", "virtual"], "comments": [{"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 2, "creation_date": 1568827724, "post_id": 57997870, "comment_id": 102402152, "body": "As an aside, <code>void</code> in parameter lists has no effect in C++, unlike in C."}], "answers": [{"comments": [{"owner": {"reputation": 874, "user_id": 6094393, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ba92648aa6c95d5fe92312b97c4d996f?s=128&d=identicon&r=PG&f=1", "display_name": "edgarstack", "link": "https://stackoverflow.com/users/6094393/edgarstack"}, "edited": false, "score": 0, "creation_date": 1568827445, "post_id": 57997920, "comment_id": 102402053, "body": "Can&#39;t I make the data.a from <code>Child</code> be the same than the Parent one? Somehow I want that the child has data.a filled by the parent and its contained in the <code>Childs</code> struct."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 874, "user_id": 6094393, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ba92648aa6c95d5fe92312b97c4d996f?s=128&d=identicon&r=PG&f=1", "display_name": "edgarstack", "link": "https://stackoverflow.com/users/6094393/edgarstack"}, "edited": false, "score": 0, "creation_date": 1568827497, "post_id": 57997920, "comment_id": 102402078, "body": "@edgarstack In the parent class you did not initialize the data member a. The base class knows nothing about the new structure info2 of the derived class."}, {"owner": {"reputation": 874, "user_id": 6094393, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ba92648aa6c95d5fe92312b97c4d996f?s=128&d=identicon&r=PG&f=1", "display_name": "edgarstack", "link": "https://stackoverflow.com/users/6094393/edgarstack"}, "edited": false, "score": 0, "creation_date": 1568827584, "post_id": 57997920, "comment_id": 102402104, "body": "Well, I want the <code>Parent::main()</code> method to modify <code>Child::data.a</code>. Is there a way to achieve that?"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 874, "user_id": 6094393, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ba92648aa6c95d5fe92312b97c4d996f?s=128&d=identicon&r=PG&f=1", "display_name": "edgarstack", "link": "https://stackoverflow.com/users/6094393/edgarstack"}, "edited": false, "score": 0, "creation_date": 1568827776, "post_id": 57997920, "comment_id": 102402173, "body": "@edgarstack No there is no way. Base classes know nothing about which new data members their derived classes have."}, {"owner": {"reputation": 874, "user_id": 6094393, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ba92648aa6c95d5fe92312b97c4d996f?s=128&d=identicon&r=PG&f=1", "display_name": "edgarstack", "link": "https://stackoverflow.com/users/6094393/edgarstack"}, "edited": false, "score": 0, "creation_date": 1568827989, "post_id": 57997920, "comment_id": 102402256, "body": "So maybe I am approaching this from the wrong angle. Is there a better/more correct way of doing what I am trying to do? So basically: Parent class has a struct that is modified by its methods. Then the Child wants to add some new information unique for the child in the same structure. However, I want to combine (and reuse) calls to Parent&#39;s methods with Child methods to fill the structure."}, {"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "reply_to_user": {"reputation": 874, "user_id": 6094393, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ba92648aa6c95d5fe92312b97c4d996f?s=128&d=identicon&r=PG&f=1", "display_name": "edgarstack", "link": "https://stackoverflow.com/users/6094393/edgarstack"}, "edited": false, "score": 0, "creation_date": 1568828411, "post_id": 57997920, "comment_id": 102402398, "body": "In this case, @edgarstack, you would most likely need to use <code>data</code> polymorphically, too."}, {"owner": {"reputation": 874, "user_id": 6094393, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ba92648aa6c95d5fe92312b97c4d996f?s=128&d=identicon&r=PG&f=1", "display_name": "edgarstack", "link": "https://stackoverflow.com/users/6094393/edgarstack"}, "edited": false, "score": 0, "creation_date": 1568828575, "post_id": 57997920, "comment_id": 102402467, "body": "Any pointers on how to use <code>data</code> polymorphically?  I know how to do it with class methods, but not with struct members."}, {"owner": {"reputation": 874, "user_id": 6094393, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ba92648aa6c95d5fe92312b97c4d996f?s=128&d=identicon&r=PG&f=1", "display_name": "edgarstack", "link": "https://stackoverflow.com/users/6094393/edgarstack"}, "edited": false, "score": 0, "creation_date": 1568829021, "post_id": 57997920, "comment_id": 102402648, "body": "Thanks for the example. The only problem is that you had to call the <code>Set(3)</code> in the Child, but what I want to do is <code>Parent::main()</code> to do the set. In the example I posted here the functions are just a mock, in my real case the Parent::main() is doing a lot of things until it knows what to set as a value to all the members (there are many more too). So I just wanted to avoid copying the Parents::main to the Child, cuz a solution would be to duplicate the code, but is not elegant nor robust."}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1568828624, "last_edit_date": 1568828624, "creation_date": 1568827267, "answer_id": 57997920, "question_id": 57997870, "link": "https://stackoverflow.com/questions/57997870/nested-struct-attributes-inheritance/57997920#57997920", "title": "Nested struct attributes inheritance", "body": "<p>You mean</p>\n\n<pre><code>void Child::main(void)\n{\n  Parent::main();\n  data.b = 2;\n  std::cout &lt;&lt; Parent::data.a &lt;&lt; \"\\n\";\n  std::cout &lt;&lt; data.b &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>The name <code>data</code> declared in the derived class hides the name <code>data</code> declared in the base class. So you need to use a qualified name to access a hidden member of the parent class.</p>\n\n<p>As for data member <code>a</code> of the member data of the derived class then it was not initialized. </p>\n\n<p>Objects of the derived class have two data members <code>data</code>: one is inherited with the type info (which name is hidden in the derived class) and other is the own data member of the derived class.</p>\n\n<p>The base class knows nothing about the data member <code>data</code> of the derived class.</p>\n\n<p>You could define a virtual function within the class info. For example</p>\n\n<pre><code>#include &lt;iostream&gt;\nclass Parent\n{\n  public:\n\n    struct info \n    {\n      int a;\n      virtual void set( int a )\n      {\n        this-&gt;a = a;\n      }\n    };\n\n    info data;\n    virtual void main(void);\n\n};\n\nvoid Parent::main()\n{\n  data.set( 1 );\n}\n\nclass Child: public Parent\n{\n  public:\n\n  struct info2: public info\n  {\n    int b;\n    void set( int a ) override\n    {\n        this-&gt;a = a;\n    }\n  };\n\n  info2 data;\n  virtual void main(void);\n};\n\nvoid Child::main(void)\n{\n    data.set( 3 );\n  data.b = 2;\n  std::cout &lt;&lt; data.a &lt;&lt; \"\\n\";\n  std::cout &lt;&lt; data.b &lt;&lt; \"\\n\";\n}\n\nint main(void)\n{\n  Parent *base;\n  Child derived;\n  base = &amp;derived;\n\n  base-&gt;main();\n\n  return 0;\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>3\n2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 228, "user_id": 8309258, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ro5pe.jpg?s=128&g=1", "display_name": "Vahid Bahramian", "link": "https://stackoverflow.com/users/8309258/vahid-bahramian"}, "is_accepted": false, "score": 1, "last_activity_date": 1568828726, "creation_date": 1568828726, "answer_id": 57998252, "question_id": 57997870, "link": "https://stackoverflow.com/questions/57997870/nested-struct-attributes-inheritance/57998252#57998252", "title": "Nested struct attributes inheritance", "body": "<p>You have to use the below code:</p>\n\n<pre><code>void Child::main(void)\n{\n    Parent::main();\n    data.b = 2;\n    std::cout &lt;&lt; Parent::data.a &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; data.b &lt;&lt; \"\\n\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 874, "user_id": 6094393, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ba92648aa6c95d5fe92312b97c4d996f?s=128&d=identicon&r=PG&f=1", "display_name": "edgarstack", "link": "https://stackoverflow.com/users/6094393/edgarstack"}, "edited": false, "score": 0, "creation_date": 1568884046, "post_id": 57998820, "comment_id": 102419507, "body": "amazing! thats what I wanted. Is there any place I can learn these things properly? I don&#39;t think I will find this in a standard C++ book."}, {"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "reply_to_user": {"reputation": 874, "user_id": 6094393, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ba92648aa6c95d5fe92312b97c4d996f?s=128&d=identicon&r=PG&f=1", "display_name": "edgarstack", "link": "https://stackoverflow.com/users/6094393/edgarstack"}, "edited": false, "score": 1, "creation_date": 1568903357, "post_id": 57998820, "comment_id": 102430740, "body": "I&#39;m sure there are books that teach as least some of this stuff, @edgarstack; I&#39;d be surprised if the Rule of Three/Five/Zero isn&#39;t discussed anywhere.  Apart from that, CPPReference.com is a <i>mostly</i> accurate, slightly easier-to-read reference for the C++ standard, and CPlusPlus.com is easier to read than it (albeit somewhat out of date).  There are tutorials online on sites like CProgramming.com, and a lot of good explanations on here (if you can find them). A lot of times, though, experimentation will be your best teacher, and a lot of complex tricks like this are just knowing how to use..."}, {"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "reply_to_user": {"reputation": 874, "user_id": 6094393, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ba92648aa6c95d5fe92312b97c4d996f?s=128&d=identicon&r=PG&f=1", "display_name": "edgarstack", "link": "https://stackoverflow.com/users/6094393/edgarstack"}, "edited": false, "score": 1, "creation_date": 1568904738, "post_id": 57998820, "comment_id": 102431590, "body": "...simple things you&#39;re more likely to find explained elsewhere.  (In this case, for example, I&#39;m just applying the same principles you&#39;re learning about, inheritance &amp; polymorphism.  Accessing <code>data</code>&#39;s fields through a pointer here works similarly to <code>base-&gt;main()</code> dynamically choosing the correct version of <code>main()</code> to call even though <code>base</code> is ` Parent*` (because every <code>Child</code> is also a <code>Parent</code>, or more mechanically contains a <code>Parent</code> for the pointer to latch onto); the main difference is that we do the dynamic dispatch work ourself instead of it being automated by <code>virtual</code> functions."}, {"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "reply_to_user": {"reputation": 874, "user_id": 6094393, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ba92648aa6c95d5fe92312b97c4d996f?s=128&d=identicon&r=PG&f=1", "display_name": "edgarstack", "link": "https://stackoverflow.com/users/6094393/edgarstack"}, "edited": false, "score": 1, "creation_date": 1568905188, "post_id": 57998820, "comment_id": 102431837, "body": "(Also note that you need to be careful when doing something like downcasting <code>info*</code> to <code>info2*</code> with <code>static_cast</code>, though.  Downcasting by <code>static_cast</code> doesn&#39;t do any type checking, and is thus only for when you know the actual pointed-to type is-an <code>info2</code> (where &quot;is-a(n) <code>X</code>&quot; means &quot;is either <code>X</code> or derived from <code>X</code>); since <code>Child</code> explicitly provides an <code>info2</code> for <code>data</code>, we can guarantee this.  You&#39;d normally use <code>dynamic_cast</code> if you need to downcast, which would give you a <code>nullptr</code> if the object&#39;s actual type isn&#39;t actually the type you&#39;re casting it to.)"}], "tags": [], "owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1568831146, "creation_date": 1568831146, "answer_id": 57998820, "question_id": 57997870, "link": "https://stackoverflow.com/questions/57997870/nested-struct-attributes-inheritance/57998820#57998820", "title": "Nested struct attributes inheritance", "body": "<p>You're entirely correct, <code>Parent::main()</code> is unable to access <code>Child::data</code>, and knows nothing about any mythical <code>info2</code> type; to it, <code>Parent::data</code> is all there is, and <code>info</code> is its type.</p>\n\n<p>There are a few easy ways to make <code>Child::main()</code> work with <code>Child::data</code> instead of <code>Parent::data</code>, or to make it access the desired field from each version, but I suspect that's not what you're after.  If you want both <code>Parent</code> and <code>Child</code> to see the same <code>data</code> (as an <code>info</code> and an <code>info2</code>, respectively), then <code>data</code> should itself be used polymorphically.  For this example, I'll use a regular pointer for simplicity (and in turn, <code>operator.</code> will be replaced with <code>operator-&gt;</code>, when accessing <code>data</code>'s members), but I would recommend looking into smart pointers such as <code>std::unique_ptr</code> to simplify the memory management.</p>\n\n<pre><code>class Parent\n{\n  public:\n\n    struct info \n    {\n      int a;\n\n      // Chances are, it's going to be deleted through an info* no matter what it is.  Therefore, virtual destructor.\n      virtual ~info() = default;\n    };\n\n    info* data;  // Consider using a smart pointer here, like std::unique_ptr.\n    virtual void main(void);\n    virtual void output() const; // Just adding this for convenience.\n\n    // Default constructor now allows data to be supplied, or creates it if necessary.\n    Parent(info* dp = nullptr) : data(dp ? dp : new info) {}\n    // Correct destructor will always be called.\n    virtual ~Parent() { if(data) { delete data; } }\n\n};\n\nvoid Parent::main()\n{\n  data-&gt;a =1;\n}\n</code></pre>\n\n<p>We now remove the field <code>Child::data</code>, and instead have <code>Child</code> supply its desired <code>data</code> to <code>Parent</code>'s constructor.</p>\n\n<pre><code>class Child: public Parent\n{\n  public:\n\n  struct info2: public info\n  {\n    int b;\n  };\n\n  //info2 data;\n  virtual void main(void);\n  void output() const override; // Just adding this for convenience.\n\n  Child() : Parent(new info2) {}\n};\n</code></pre>\n\n<p><code>Child</code> will, when required, view <code>data</code> as an <code>info2</code> instead of an <code>info</code>.</p>\n\n<pre><code>void Child::main(void)\n{\n  Parent::main();\n  auto dataPtr = static_cast&lt;info2*&gt;(data); // In Child, we know data is an info2*.\n  dataPtr-&gt;b = 2;\n\n  // Just gonna move these to output(), for a cleaner illustration.\n  //std::cout &lt;&lt; \"Data-&gt;a: \" &lt;&lt; data-&gt;a &lt;&lt; \"\\n\";\n  //std::cout &lt;&lt; \"Data-&gt;b: \" &lt;&lt; dataPtr-&gt;b &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>This will then cause <code>data</code> to work as desired, with <code>Parent</code> and <code>Child</code> both having the correct type.</p>\n\n<pre><code>void Parent::output() const {\n  std::cout &lt;&lt; \"Parent:\\n\";\n  std::cout &lt;&lt; \"&gt; Data-&gt;a: \" &lt;&lt; data-&gt;a &lt;&lt; \"\\n\";\n}\n\nvoid Child::output() const /*override*/ {\n  std::cout &lt;&lt; \"Child as \";\n  Parent::output();\n\n  auto dataPtr = static_cast&lt;info2*&gt;(data);\n  std::cout &lt;&lt; \"Child:\\n\";\n  std::cout &lt;&lt; \"&gt; Data-&gt;a: \" &lt;&lt; dataPtr-&gt;a &lt;&lt; \"\\n\";\n  std::cout &lt;&lt; \"&gt; Data-&gt;b: \" &lt;&lt; dataPtr-&gt;b &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>This will then perform as expected, as seen <a href=\"https://coliru.stacked-crooked.com/a/f4a9d8613b073d95\" rel=\"nofollow noreferrer\">live on Coliru</a>.  Note that if you want to be able to, e.g., create a <code>Child</code> from a pre-existing <code>Parent</code>, you'll want to add a move constructor that can make an <code>info2</code> from an <code>info</code>; you should consider following the <a href=\"https://stackoverflow.com/a/4172724/5386374\">Rule of Five</a>, or using a smart pointer instead of a raw pointer. ;P</p>\n"}], "owner": {"reputation": 874, "user_id": 6094393, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ba92648aa6c95d5fe92312b97c4d996f?s=128&d=identicon&r=PG&f=1", "display_name": "edgarstack", "link": "https://stackoverflow.com/users/6094393/edgarstack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 348, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1568831146, "creation_date": 1568827046, "last_edit_date": 1568828734, "question_id": 57997870, "link": "https://stackoverflow.com/questions/57997870/nested-struct-attributes-inheritance", "title": "Nested struct attributes inheritance", "body": "<p>I read that you can extend a structure by using inheritance. I have a derived class in which I want to have the same struct that its parent but extended with more fields. This seems to work, however when I call a method from the Parent class that modified the structure, it does not have effect in the Child structure attribute. Here, an example of what am I trying:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class Parent\n{\n  public:\n\n    struct info \n    {\n      int a;\n    };\n\n    info data;\n    virtual void main(void);\n\n};\n\nvoid Parent::main()\n{\n  data.a =1;\n}\n\nclass Child: public Parent\n{\n  public:\n\n  struct info2: public info\n  {\n    int b;\n  };\n\n  info2 data;\n  virtual void main(void);\n};\n\nvoid Child::main(void)\n{\n  Parent::main();\n  data.b = 2;\n  std::cout &lt;&lt; data.a &lt;&lt; \"\\n\";\n  std::cout &lt;&lt; data.b &lt;&lt; \"\\n\";\n}\n\nint main(void)\n{\n  Parent *base;\n  Child derived;\n  base = &amp;derived;\n\n  base-&gt;main();\n\n  return 0;\n}\n</code></pre>\n\n<p>This instead of printing <code>1 and 2</code> prints <code>0 and 2</code>. So basically as if the attribute data from the derived class is not modified by the call to <code>Parent::main</code>.</p>\n\n<p>What the right way of doing that? Am I completely doing it wrong?</p>\n"}, {"tags": ["c++", "arrays", "loops", "pointers"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 4, "creation_date": 1568826181, "post_id": 57997635, "comment_id": 102401567, "body": "Typo perhaps? You need <code>infile.get((agencies_ptr-&gt;name), MAX_SIZE, space);</code>"}, {"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 0, "creation_date": 1568826762, "post_id": 57997635, "comment_id": 102401798, "body": "what is <code>agencies</code> ? How can we know whether <code>++agencies_ptr</code> makes sense without seeing <code>agencies</code> ?"}, {"owner": {"reputation": 15, "user_id": 12022312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b879edb41536a81ebe8d8d0a9b2a6dfa?s=128&d=identicon&r=PG&f=1", "display_name": "MichaelConnors1017", "link": "https://stackoverflow.com/users/12022312/michaelconnors1017"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1568827088, "post_id": 57997635, "comment_id": 102401920, "body": "Ah yes you are correct, I am new to pointers and do not understand. Thank you @RSahu"}], "answers": [{"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1568826858, "creation_date": 1568826858, "answer_id": 57997835, "question_id": 57997635, "link": "https://stackoverflow.com/questions/57997635/for-loop-using-pointers-to-traverse-array-not-working-properly/57997835#57997835", "title": "For loop using pointers to traverse array not working properly", "body": "<p>Just write</p>\n\n<pre><code>for(int i = 0; i &lt; 3; i++){\n    infile.get( agencies_ptr[i].name, MAX_SIZE, space );\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9157, "user_id": 1794803, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f3b30f8ee9338ee3d87152343ceb0665?s=128&d=identicon&r=PG", "display_name": "Peregring-lk", "link": "https://stackoverflow.com/users/1794803/peregring-lk"}, "is_accepted": false, "score": 0, "last_activity_date": 1568830546, "creation_date": 1568830546, "answer_id": 57998663, "question_id": 57997635, "link": "https://stackoverflow.com/questions/57997635/for-loop-using-pointers-to-traverse-array-not-working-properly/57998663#57998663", "title": "For loop using pointers to traverse array not working properly", "body": "<p>You are desreferencing <code>agencies</code>, not <code>agencies_ptr</code> (and the parenthesis are not needed):</p>\n\n<pre><code>RentalAgency *agencies_ptr = agencies;\n\nfor(int i = 0; i &lt; 3; ++i, ++agencies_ptr)\n   infile.get(agencies_ptr-&gt;name, MAX_SIZE, space);\n</code></pre>\n\n<p>But a more idiomatic way of traversing a \"range\" is this (<code>it</code> stands for <code>iterator</code>):</p>\n\n<pre><code>RentalAgency *agencies_it = agencies;\nRentalAgency *agencies_end = agencies_it + 3;\n\nfor(; agencies_it != agencies_end; ++agencies_it)\n   infile.get(agencies_it-&gt;name, MAX_SIZE, space);\n</code></pre>\n\n<p>It's cleaner, express intent better and is more familiar to see among experienced programmers.</p>\n"}], "owner": {"reputation": 15, "user_id": 12022312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b879edb41536a81ebe8d8d0a9b2a6dfa?s=128&d=identicon&r=PG&f=1", "display_name": "MichaelConnors1017", "link": "https://stackoverflow.com/users/12022312/michaelconnors1017"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1568830546, "creation_date": 1568826025, "question_id": 57997635, "link": "https://stackoverflow.com/questions/57997635/for-loop-using-pointers-to-traverse-array-not-working-properly", "title": "For loop using pointers to traverse array not working properly", "body": "<p>For my homework problem I must use pointers to traverse arrays. When I try to store 3 \"name\" values into member variables of an array of an <code>Object</code> called <code>RentalAgency</code>, I find that it stores the value, but never increments. Therefore the last value given is stored in the first index and the next two are empty.</p>\n\n<pre><code>RentalAgency *agencies_ptr = agencies;\n\nfor(int i = 0; i &lt; 3;i++,++agencies_ptr){\n    infile.get((agencies-&gt;name),MAX_SIZE,space);\n}\n</code></pre>\n\n<p>Where <code>agencies</code> is an array of Objects</p>\n\n<p>If the input is Hertz, Alamo, and Budget, it should output Hertz, Alamo, and Budget.\nThe actual output is just Budget.</p>\n"}, {"tags": ["c++", "arithmetic-expressions"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1568826012, "post_id": 57997596, "comment_id": 102401508, "body": "If the code works correctly, and you only want to increase its performance, consider asking on <a href=\"https://codereview.stackexchange.com/\">codereview.stackexchange.com</a> instead of SO. &quot;<i>I can&#39;t find why it throws such error.</i>&quot; Typically, an automated checking system shows this error, if execution, of your code took longer, that maximum allowed time."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1568826632, "post_id": 57997596, "comment_id": 102401751, "body": "<code>std::gcd</code> could be helpful if you&#39;re not forbidden to use the standard library."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 1, "creation_date": 1568826745, "post_id": 57997596, "comment_id": 102401790, "body": "Find the smallest divisor, then divide <code>n</code> by it to get the largest. It will be significantly faster. You can stop the loop when you find the first divisor, or you get to sqrt(n)."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1568826961, "post_id": 57997596, "comment_id": 102401876, "body": "@interjay For even <code>n</code> the answer is <code>n&#47;2</code>."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "reply_to_user": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 1, "creation_date": 1568827047, "post_id": 57997596, "comment_id": 102401907, "body": "@MaximEgorushkin True, but there&#39;s no need to special-case this. The smallest divisor in this case is 2 so the largest is n/2."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1568827782, "post_id": 57997596, "comment_id": 102402177, "body": "@interjay You are totally right."}], "answers": [{"comments": [{"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "reply_to_user": {"reputation": 27, "user_id": 8648222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96d4ab74a0cd591be975850047582326?s=128&d=identicon&r=PG&f=1", "display_name": "v_head", "link": "https://stackoverflow.com/users/8648222/v-head"}, "edited": false, "score": 0, "creation_date": 1568882608, "post_id": 57997986, "comment_id": 102418703, "body": "@Papa The loop will run from 2 to sqrt(n). In the case of n=3, sqrt(n) is less than 2 so the loop will do nothing."}], "tags": [], "owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "is_accepted": false, "score": 0, "last_activity_date": 1568827557, "creation_date": 1568827557, "answer_id": 57997986, "question_id": 57997596, "link": "https://stackoverflow.com/questions/57997596/simple-greatest-divisor-problem-c-implementation-throws-time-limit-exceeded/57997986#57997986", "title": "simple Greatest divisor problem c++ implementation throws Time-Limit Exceeded", "body": "<p>Instead of finding the greatest divisor, look for the smallest divisor <code>d</code> (where <code>d &gt; 1</code>). The greatest divisor is then <code>n/d</code>. </p>\n\n<p>You can do this with a simple loop like you have which <code>break</code>s when it finds the first divisor. The loop can stop when it passes <code>sqrt(n)</code>, in which case the number is prime.</p>\n\n<p>This is faster in the worst-case because it limits the number of iterations to sqrt(n). And in common cases where <code>d</code> is small, it will take a very small number of operations.</p>\n"}], "owner": {"reputation": 27, "user_id": 8648222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96d4ab74a0cd591be975850047582326?s=128&d=identicon&r=PG&f=1", "display_name": "v_head", "link": "https://stackoverflow.com/users/8648222/v-head"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568827557, "creation_date": 1568825894, "question_id": 57997596, "link": "https://stackoverflow.com/questions/57997596/simple-greatest-divisor-problem-c-implementation-throws-time-limit-exceeded", "title": "simple Greatest divisor problem c++ implementation throws Time-Limit Exceeded", "body": "<p>I am submitting code to my university's tester, the code for me works thoroughly for the the test cases I provided.  </p>\n\n<p>The checker throws Time-Limit Exceeded error, I am testing in visual studio, and that's exactly compatible with the online judge compiler. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;math.h&gt;\nusing namespace std;\n\n    freopen(\"input.txt\", \"r\", stdin);\n    freopen(\"output.txt\", \"w\", stdout);\n    int i, n, gd; cin &gt;&gt; n;\n    gd = 1;\n    if (n &gt; 1) {\n        for (i = 2; i &lt; n; i++)\n        {\n            if (n % i == 0)\n            {\n                gd = i;\n            }\n        }\n        cout &lt;&lt; gd;\n    }\n\n    return 0;\n}\n}\n</code></pre>\n\n<p>I can't find why it throws such error. Thanks</p>\n\n<p>The code just works in my visual studio, but can't pass the test. The checker hides test cases by the way.</p>\n"}, {"tags": ["c++", "arduino", "embedded", "signals", "can-bus"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1568890292, "post_id": 57997148, "comment_id": 102422907, "body": "Please edit your code and fix the indention."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1568890469, "post_id": 57997148, "comment_id": 102423013, "body": "Anyway, the bug is almost certainly array out of bounds access. Single step through the assign function in your debugger, watch <code>i</code> and the various arrays."}, {"owner": {"reputation": 3699, "user_id": 474173, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/18331a42eeb0683a21fe3af6722c04cc?s=128&d=identicon&r=PG", "display_name": "Swanand", "link": "https://stackoverflow.com/users/474173/swanand"}, "edited": false, "score": 0, "creation_date": 1568903235, "post_id": 57997148, "comment_id": 102430662, "body": "Reason is you are printing <code>temp_buf</code>. If ID is 0x140 then you are storing data in SOC_xxx and for 0x170, data is in volt_xxx but you are printing temp_buf. Means, your code prints every message received. So your code is working exactly like it should."}], "owner": {"reputation": 11, "user_id": 9079714, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3zDq1vf0ngE/AAAAAAAAAAI/AAAAAAAAAKc/6PhhD5kFHxc/photo.jpg?sz=128", "display_name": "Haris Sajwani", "link": "https://stackoverflow.com/users/9079714/haris-sajwani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 248, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568890224, "creation_date": 1568824036, "last_edit_date": 1568890224, "question_id": 57997148, "link": "https://stackoverflow.com/questions/57997148/can-identifier-message-sync-issue", "title": "CAN identifier message sync issue", "body": "<p>I am struggling with a CAN code. with Arduino I am sending two signals with 2 different identifiers and my code checks the identifier id and then interprets the message as eithr state-of-charge or a Voltage message. The code works fine with a single SOC or volt message.\nThe problem im getting is that when there are multiple message, the code reads the identifier once and then reads all messages given. This means, it reads id 0x140, then reads all signals even the ones that are associated with other ids. \nI don't know if its problem with my code or have to activate some flags or something.</p>\n\n<pre><code>//WORKS FINE FOR A SINGLE CAN MESSAGE, BUT HAVE ID - MESSAGE SYN ISSUES \n//WITH MULTIPLE MESSAGES//\n    #include \"pin_info.h\"\n    #include &lt;stdio.h&gt;\n    #include &lt;stdlib.h&gt;\n    #include &lt;Time.h&gt;\n    #include &lt;SPI.h&gt; //for CAN\n    #include \"mcp_can.h\"\n    //#include \"canLib.h\"\n    #include \"FreeMono9pt7b.h\"\n\n    const int spiCSPin = 3;\n    MCP_CAN CAN(spiCSPin);\n\n    unsigned char len = 0;\n    unsigned char temp_buf[8];\n    unsigned char soc_buf[8]={0};\n    unsigned char volt_buf[8]={0};\n    unsigned char soc_mean[2], soc_min[2], soc_max[2] ={0,0};\n    float s_mean, s_min, s_max;\n    unsigned char volt_mean[2], volt_max[2], volt_min[2]= {0,0};\n    float v_mean, v_min, v_max;\n    int len_= sizeof(soc_mean);    \n    const char Message[]= \"CAN Message: \" ;\n    const char Name[]= \"foxBMS\";\n    //enum type{soc,SOC, volt, VOLT};\n\n    void setup()\n    {\n        /*FOR CAN*/\n        Serial.begin(115200);\n        pinMode(LED_BUILTIN,OUTPUT);\n        while (CAN_OK != CAN.begin(CAN_500KBPS))\n        {\n        Serial.println(\"CAN BUS Init Failed\");\n        delay(100);\n        }\n        Serial.println(\"CAN BUS  Init OK!\");\n\n        /* set mask, set both the mask to 0x3ff*/\n        CAN.init_Mask(0, 0, 0x3ff);    // there are 2 mask in mcp2515, you need to set both of them\n        CAN.init_Mask(1, 0, 0x3ff);\n\n        /*set filter, we can receive id from 0x140 &amp; 0x170 */\n        CAN.init_Filt(0, 0, 0x140);                          // there are 6 filter in mcp2515\n        CAN.init_Filt(1, 0, 0x170);                          // there are 6 filter in mcp2515\n   }\n\nvoid loop()\n    {\n       if(CAN_MSGAVAIL == CAN.checkReceive())\n    {\n     unsigned long canId = CAN.getCanId();\n     CAN.readMsgBuf(&amp;len, temp_buf);\n\n     assign(temp_buf,canId);\n     serialDisplay(canId);\n     //CAN.checkClearRxStatus(temp_buf);\n     CAN.clearBufferTransmitIfFlags(); \n    }\n\n    else\n       { Serial.print(\"No message received \\n\");\n\n       }\n      }\n\n\n    void assign(unsigned char buf[], unsigned long id)\n    {\n      if(id==0x00)\n      {}\n      else if(id==0x140)\n      {\n        for (int i=0; i&lt;len; i++)\n          {\n            if (i&lt;2)\n              soc_mean[i]= buf[i];\n            else if (i&lt;4 &amp;&amp; i&gt;=2)\n              soc_min[i-2]= buf[i];\n            else if (i&lt;6 &amp;&amp; i&gt;=4)\n              soc_max[i-4]= buf[i];\n           }\n     }\n      else if(id==0x170)\n      {\n        for (int i=0; i&lt;len; i++)\n          {\n            if (i&lt;2)\n              volt_mean[i]= buf[i];\n            else if (i&lt;4 &amp;&amp; i&gt;=2)\n              volt_min[i-2]= buf[i];\n            else if (i&lt;6 &amp;&amp; i&gt;=4)\n              volt_max[i-4]= buf[i];\n           }\n       }\n     }\n\n\n    void serialDisplay(unsigned long id)\n    {\n        Serial.println(\"-----------------------------\");\n        Serial.print(\"Data from ID: \");\n        Serial.print(id,HEX); Serial.println(\"- CAN0_MSG\");\n       for(int i = 0; i&lt;len; i++)\n         {\n          Serial.print(temp_buf[i], HEX); Serial.print(\"\\t\");\n          }\n        Serial.print(\"\\n\"); \n    }\n</code></pre>\n"}, {"tags": ["c++", "opencv"], "answers": [{"tags": [], "owner": {"reputation": 2124, "user_id": 6055233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/041547c8fcabcab4b2536d730fa01d03?s=128&d=identicon&r=PG&f=1", "display_name": "Catree", "link": "https://stackoverflow.com/users/6055233/catree"}, "is_accepted": true, "score": 1, "last_activity_date": 1568885958, "creation_date": 1568885958, "answer_id": 58008084, "question_id": 57997144, "link": "https://stackoverflow.com/questions/57997144/assertion-fails-for-the-number-of-points-on-opencvs-solvepnp/58008084#58008084", "title": "Assertion fails for the number of points, on OpenCV&#39;s solvePNP", "body": "<p>Have a look at the <a href=\"https://docs.opencv.org/\" rel=\"nofollow noreferrer\">OpenCV documentation</a>. Since you are using <code>3.4.1</code> version, the documentation for <code>solvePnP</code> is <a href=\"https://docs.opencv.org/3.4.1/d9/d0c/group__calib3d.html#ga549c2075fac14829ff4a58bc931c033d\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>It is <code>objectPoints</code> first then <code>imagePoints</code>.</p>\n"}], "owner": {"reputation": 1246, "user_id": 2032568, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/74110b3322d65254f040bfa592668d6f?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/2032568/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "accepted_answer_id": 58008084, "answer_count": 1, "score": 0, "last_activity_date": 1568885958, "creation_date": 1568824007, "question_id": 57997144, "link": "https://stackoverflow.com/questions/57997144/assertion-fails-for-the-number-of-points-on-opencvs-solvepnp", "title": "Assertion fails for the number of points, on OpenCV&#39;s solvePNP", "body": "<p>Consider the following code:</p>\n\n<pre><code>  std::vector&lt;cv::Point2f&gt; vecUV = Vec2DFromFile(argv[2]);\n  std::vector&lt;cv::Point3f&gt; vecXYZ = Vec3DFromFile(argv[3]);\n\n  cv::Mat matCalib(3, 3, CV_64F);\n  cv::setIdentity(matCalib);\n\n  cv::Mat matRot(3, 1, CV_64F);\n  cv::Mat matTrans(3, 1, CV_64F);\n\n  cv::Mat matDistortion = cv::Mat::zeros(4, 1, CV_64F);\n\n  cv::solvePnP(vecUV, vecXYZ, matCalib, matDistortion, matRot, matTrans);\n</code></pre>\n\n<p>Where vecUV and vecXYZ are both size 4. This fails with:</p>\n\n<pre><code>OpenCV(3.4.1) Error: Assertion failed (( (npoints &gt;= 4) || (npoints == 3 &amp;&amp; flags == SOLVEPNP_ITERATIVE &amp;&amp; useExtrinsicGuess) ) &amp;&amp; npoints == std::max(ipoints.checkVector(2, 5), ipoints.checkVector(2, 6))) in solvePnP, file /var/tmp/portage/media-libs/opencv-3.4.1-r5/work/opencv-3.4.1/modules/calib3d/src/solvepnp.cpp, line 65\nterminate called after throwing an instance of 'cv::Exception'\n  what():  OpenCV(3.4.1) /var/tmp/portage/media-libs/opencv-3.4.1-r5/work/opencv-3.4.1/modules/calib3d/src/solvepnp.cpp:65: error: (-215) ( (npoints &gt;= 4) || (npoints == 3 &amp;&amp; flags == SOLVEPNP_ITERATIVE &amp;&amp; useExtrinsicGuess) ) &amp;&amp; npoints == std::max(ipoints.checkVector(2, 5), ipoints.checkVector(2, 6)) in function solvePnP\n</code></pre>\n\n<p>I don't understand why the assertion fails given that I have 4 points for each vector. I tried stepping into it with gdb, to no avail:</p>\n\n<pre><code>...\n(gdb) s\ncv::_InputArray::init (this=0x7fffffffe350, _flags=-2130509811, _obj=0x7fffffffe2f0)\n    at /usr/include/opencv2/core/mat.inl.hpp:67\n67      { flags = _flags; obj = (void*)_obj; }\n(gdb) s\ncv::_InputArray::_InputArray&lt;cv::Point_&lt;float&gt; &gt; (this=0x7fffffffe350, \n    vec=std::vector of length 4, capacity 4 = {...}) at /usr/include/opencv2/core/mat.inl.hpp:85\n85      { init(FIXED_TYPE + STD_VECTOR + traits::Type&lt;_Tp&gt;::value + ACCESS_READ, &amp;vec); }\n(gdb) s\nOpenCV(3.4.1) Error: Assertion failed (( (npoints &gt;= 4) || (npoints == 3 &amp;&amp; flags == SOLVEPNP_ITERATIVE &amp;&amp; useExtrinsicGuess) ) &amp;&amp; npoints == std::max(ipoints.checkVector(2, 5), ipoints.checkVector(2, 6))) in solvePnP, file /var/tmp/portage/media-libs/opencv-3.4.1-r5/work/opencv-3.4.1/modules/calib3d/src/solvepnp.cpp, line 65\nterminate called after throwing an instance of 'cv::Exception'\n0x00007ffff6e7334f in __gnu_cxx::__verbose_terminate_handler ()\n   from /usr/lib/gcc/x86_64-pc-linux-gnu/8.3.0/libstdc++.so.6\n</code></pre>\n\n<p>I have read <a href=\"https://stackoverflow.com/questions/36815605/opencv-assertion-failed-with-solvepnp\">this</a>,m <a href=\"https://stackoverflow.com/questions/12808702/opencvsolvepnp-assertion-failed\">this</a> and <a href=\"https://stackoverflow.com/questions/36815605/opencv-assertion-failed-with-solvepnp\">this answer</a>, but it does not seem to be the same case - there, a wrong parameter type was to blame.</p>\n\n<p><a href=\"http://marius2.mooo.com/files/ex.zip\" rel=\"nofollow noreferrer\">.zip with minimum reproducible example</a> - pass the input files as second and third parameters, first parameter is reserved.</p>\n"}, {"tags": ["c++", "string"], "comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 2, "creation_date": 1568825095, "post_id": 57997121, "comment_id": 102401161, "body": "Why would you store UTF-8 in a <code>std::wstring</code>?"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 1, "creation_date": 1568825293, "post_id": 57997121, "comment_id": 102401245, "body": "Are you using C++17? If so, consider <code>std::filesystem</code> instead. <code>path</code> has a <code>generic_u8string()</code> method. that might be useful. Btw, how are you printing the converted string? Are you using <code>std::wcout</code>? You should probably not mix <code>std::cout</code> and <code>std::wcout</code> too much."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1568827782, "post_id": 57997121, "comment_id": 102402178, "body": "Not convinced by the duplicate. It may not consider the OP&#39;s specific encoding needs. Instead I&#39;d like to see a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and a full explanation of the circumstances of the bug."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1568827955, "post_id": 57997121, "comment_id": 102402244, "body": "Also how do you witness this result? Are you sure you&#39;re not just misinterpreting <code>shared_dir</code> as ASCII?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1568827963, "post_id": 57997121, "comment_id": 102402247, "body": "@eerorika I suspect the title is just wrong/misleading though ofc we cannot be sure right now"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 3, "creation_date": 1568833563, "post_id": 57997121, "comment_id": 102404517, "body": "&quot;<i>but unfortunatelly the result of the following text is this</i>&quot; - <code>&#195;&#161;rv&#195;&#173;zt&#197;&#177;r&#197;\u2018t&#195;&#188;k&#195;&#182;rf&#195;&#186;r&#195;&#179;g&#195;&#169;p</code> is the UTF-8 encoded form of <code>&#225;rv&#237;zt\u0171r\u0151t&#252;k&#246;rf&#250;r&#243;g&#233;p</code> being <i>misinterpreted</i> as ANSI instead of UTF-8. The code is fine, the data is correct, it is just the <i>display</i> of the UTF-8 data that is faulty."}, {"owner": {"reputation": 163, "user_id": 2202981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dea29b9aec281b7e637e8f866c417af?s=128&d=identicon&r=PG", "display_name": "Csuszmusz", "link": "https://stackoverflow.com/users/2202981/csuszmusz"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1568878736, "post_id": 57997121, "comment_id": 102416831, "body": "@TedLyngmo Unfortunatelly I am only using C++14.I am using the VS locals to check the contain of the variables."}, {"owner": {"reputation": 163, "user_id": 2202981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dea29b9aec281b7e637e8f866c417af?s=128&d=identicon&r=PG", "display_name": "Csuszmusz", "link": "https://stackoverflow.com/users/2202981/csuszmusz"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1568879083, "post_id": 57997121, "comment_id": 102416994, "body": "@LightnessRacesinOrbit Minimal example is added to the post. Also, how could I misinterpret shared_dir as ASCII?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1568894772, "post_id": 57997121, "comment_id": 102425386, "body": "@Csuszmusz There are many such ways. Bad terminal settings, for example. There&#39;s still no minimal example because you do not show us how you are witnessing the behaviour. What do you <i>do</i> with <code>shared_dir</code> at the end of this program? Where you look at it? In what? With what settings? Your example does not even output the string!"}, {"owner": {"reputation": 163, "user_id": 2202981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dea29b9aec281b7e637e8f866c417af?s=128&d=identicon&r=PG", "display_name": "Csuszmusz", "link": "https://stackoverflow.com/users/2202981/csuszmusz"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1568907406, "post_id": 57997121, "comment_id": 102433079, "body": "Part1 @LightnessRacesinOrbit Thank you for your answer and the solution ideas that you are implying with it. So basically I was checking the value of the variable in visual studio debug mode. I also tried to convert the variable back with conv1.from_bytes and I got back the right result."}, {"owner": {"reputation": 163, "user_id": 2202981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dea29b9aec281b7e637e8f866c417af?s=128&d=identicon&r=PG", "display_name": "Csuszmusz", "link": "https://stackoverflow.com/users/2202981/csuszmusz"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1568907419, "post_id": 57997121, "comment_id": 102433091, "body": "Part2 @LightnessRacesinOrbit Also I tried this code snippet that I inserted above in a sandbox project and I see the &quot;&#225;rv&#237;zt\u0171r\u0151t&#252;k&#246;rf&#250;r&#243;g&#233;p&quot; correctly, so the problem should be project specific. This lead me to the following question: <a href=\"https://stackoverflow.com/questions/58013410/stdlocale-throws-runtime-error-exception-to-en-us-utf-8-locale\">possible_root_cause</a>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1568908077, "post_id": 57997121, "comment_id": 102433417, "body": "Okay, then I have posted an answer on that basis."}, {"owner": {"reputation": 5790, "user_id": 3258851, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/fUPld.jpg?s=128&g=1", "display_name": "Marc.2377", "link": "https://stackoverflow.com/users/3258851/marc-2377"}, "edited": false, "score": 0, "creation_date": 1568908206, "post_id": 57997121, "comment_id": 102433469, "body": "Check out my answer to <a href=\"https://stackoverflow.com/a/40337240/3258851\">C++ Visual Studio character encoding issues</a> and also <a href=\"https://stackoverflow.com/a/49567787/3258851\">this one</a>. Also, since you are using Boost, consider <code>boost::locale::conv::utf_to_utf&lt;char&gt;(wstr);</code>, since the <code>&lt;codecvt&gt;</code> header is deprecated in C++17."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 5790, "user_id": 3258851, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/fUPld.jpg?s=128&g=1", "display_name": "Marc.2377", "link": "https://stackoverflow.com/users/3258851/marc-2377"}, "edited": false, "score": 0, "creation_date": 1568908817, "post_id": 57997121, "comment_id": 102433783, "body": "@Marc.2377 I don&#39;t believe either of those answers are relevant."}, {"owner": {"reputation": 5790, "user_id": 3258851, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/fUPld.jpg?s=128&g=1", "display_name": "Marc.2377", "link": "https://stackoverflow.com/users/3258851/marc-2377"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1568909811, "post_id": 57997121, "comment_id": 102434207, "body": "@LightnessRacesinOrbit Having now seen your answer, I agree, you&#39;re right. I think I&#39;ll leave the comment, though."}], "answers": [{"comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1568911111, "post_id": 58014687, "comment_id": 102434827, "body": "ASCII doesn&#39;t have any accented letters. Please don&#39;t tell me this is &quot;the extended ASCII&quot; either, there&#39;s no such thing. This is most likely CP1252."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1568974439, "post_id": 58014687, "comment_id": 102455010, "body": "@n.m. Well, granted - I have added a caveat"}, {"owner": {"reputation": 163, "user_id": 2202981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dea29b9aec281b7e637e8f866c417af?s=128&d=identicon&r=PG", "display_name": "Csuszmusz", "link": "https://stackoverflow.com/users/2202981/csuszmusz"}, "edited": false, "score": 0, "creation_date": 1568975921, "post_id": 58014687, "comment_id": 102455788, "body": "@LightnessRacesinOrbit I really appreciate your answer and your time and I tried this method in VS Watch and you was correct, I saw the right format, but then I called the boost::filesystem::create_directories(str) both in my project and both in my sandbox project and the folder was created had different names. In my sandbox project it was the correct folder name with accents, but in my project the folder had this name: \u0102\u02c7rv\u0102&#173;zt\u0139&#177;r\u0139\u2018t\u0102\u013dk\u0102&#182;rf\u0102\u015fr\u0102\u0142g\u0102&#169;p. I suppose there is still an encoding issue, but I can not wrap my head around this."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 163, "user_id": 2202981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dea29b9aec281b7e637e8f866c417af?s=128&d=identicon&r=PG", "display_name": "Csuszmusz", "link": "https://stackoverflow.com/users/2202981/csuszmusz"}, "edited": false, "score": 0, "creation_date": 1568976176, "post_id": 58014687, "comment_id": 102455914, "body": "@Csuszmusz Again you need to provide the encoding appropriate to the task. You are passing UTF-8 to <code>boost::filesystem::create_directories()</code> on Windows; this converts the arg to <code>boost::filesystem::path</code> (because that&#39;s what the function takes), and you already know that such a path should be a <code>wstring</code> holding UTF-16. You&#39;ll have to re-encode it back again! (There <i>is</i> <a href=\"https://www.boost.org/doc/libs/1_69_0/libs/filesystem/doc/reference.html#path-Encoding-conversions\" rel=\"nofollow noreferrer\">a feature to do this autonomously</a> but I think you have to play with locales to make it work the way you want)"}, {"owner": {"reputation": 163, "user_id": 2202981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dea29b9aec281b7e637e8f866c417af?s=128&d=identicon&r=PG", "display_name": "Csuszmusz", "link": "https://stackoverflow.com/users/2202981/csuszmusz"}, "edited": false, "score": 0, "creation_date": 1568977577, "post_id": 58014687, "comment_id": 102456553, "body": "Part1 @LightnessRacesinOrbit To extend why do I need this is that because I am using boost ipc and I am overriding the get_shared_dir(std::string &amp;shared_dir); function which takes a string and if I create_directories with boost::path as a parameter the directory name is correct but the function gives back the string containing the \u0102\u02c7rv\u0102&#173;zt\u0139&#177;r\u0139\u2018t\u0102\u013dk\u0102&#182;rf\u0102\u015fr\u0102\u0142g\u0102&#169;p  and boost is using it inside the boost library where I can not explicit re-encode the string back and it is looking for the folder with utf8 name which will not exist, so it looks like the root cause is indeed the locales."}, {"owner": {"reputation": 163, "user_id": 2202981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dea29b9aec281b7e637e8f866c417af?s=128&d=identicon&r=PG", "display_name": "Csuszmusz", "link": "https://stackoverflow.com/users/2202981/csuszmusz"}, "edited": false, "score": 0, "creation_date": 1568977651, "post_id": 58014687, "comment_id": 102456595, "body": "Part2 @LightnessRacesinOrbit ... which lead me to this problem: [locale setting issue] (<a href=\"https://stackoverflow.com/questions/58013410/stdlocale-throws-runtime-error-exception-to-en-us-utf-8-locale\" title=\"stdlocale throws runtime error exception to en us utf 8 locale\">stackoverflow.com/questions/58013410/&hellip;</a>) Also thanks again for your time and support."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1568977895, "post_id": 58014687, "comment_id": 102456721, "body": "You keep linking to that page, and I don&#39;t know why because it does not seem to have anything to do with this question. This is not fundamentally about locales; it&#39;s about you providing the wrong input to library functions. It&#39;s simple: if a function expects a string with UTF-8 in it, provide that. If a function expects a wstring with UTF-16 in it, provide that. Convert between them as needed (but try to do so a little as possible because this takes time!)"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 3, "last_activity_date": 1568974557, "last_edit_date": 1568974557, "creation_date": 1568907912, "answer_id": 58014687, "question_id": 57997121, "link": "https://stackoverflow.com/questions/57997121/convert-utf8-wstring-to-string-on-windows-in-c/58014687#58014687", "title": "Convert utf8 wstring to string on windows in C++", "body": "<p>The code is fine.</p>\n\n<p>You're taking a <code>wstring</code> that stores UTF-16 encoded data, and creating a <code>string</code> that stores UTF-8 encoded data.</p>\n\n<blockquote>\n  <p>I was checking the value of the variable in visual studio debug mode.</p>\n</blockquote>\n\n<p>Visual Studio's debugger has no idea that your string stores UTF-8. A <code>string</code> just contains bytes. Only you (and people reading your documentation!) know that you put UTF-8 data inside it. You could have put something else inside it.</p>\n\n<p>So, in the absence of anything more sensible to do, the debugger just renders the string as ASCII*. What you're seeing is the ASCII* representation of the bytes in your string.</p>\n\n<p><strong>Nothing is wrong here.</strong></p>\n\n<p>If you were to output the string like <code>std::cout &lt;&lt; str</code>, and if you were running the program in a command line window set to UTF-8, you'd get your expected result. Furthermore, if you inspect the individual bytes in your string, you'll see that they are encoded correctly and hold your desired values.</p>\n\n<p>You <em>can</em> push the IDE to decode the string as UTF-8, though, on an as-needed basis: in the Watch window type <code>str,s8</code>; or, in the Command window, type <code>? &amp;str[0],s8</code>. These techniques are explored by Giovanni Dicanio in his article \"<a href=\"https://blogs.msmvps.com/gdicanio/2016/11/22/whats-wrong-with-my-utf-8-strings-in-visual-studio/\" rel=\"nofollow noreferrer\">What's Wrong with My UTF-8 Strings in Visual Studio?</a>\".</p>\n\n<hr>\n\n<p><sub>It's not even really ASCII; it'll be some 8-bit encoding decided by your system, most likely the code page <a href=\"https://en.wikipedia.org/wiki/Windows-1252\" rel=\"nofollow noreferrer\">Windows-1252</a> given the platform. ASCII only defines the lower 7 bits. Historically, the various 8-bit code pages have been colloquially (if incorrectly) called \"extended ASCII\" in various settings. But the point is that the multi-byte nature of the data is not at all considered by the component rendering the string to your screen, let alone specifically its UTF-8-ness.</sub></p>\n"}], "owner": {"reputation": 163, "user_id": 2202981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dea29b9aec281b7e637e8f866c417af?s=128&d=identicon&r=PG", "display_name": "Csuszmusz", "link": "https://stackoverflow.com/users/2202981/csuszmusz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1568974557, "creation_date": 1568823904, "last_edit_date": 1568908107, "question_id": 57997121, "link": "https://stackoverflow.com/questions/57997121/convert-utf8-wstring-to-string-on-windows-in-c", "title": "Convert utf8 wstring to string on windows in C++", "body": "<p>I am representing folder paths with boost::filesystem::path which is a wstring on windows OS and I would like to convert it to std::string with the following method:</p>\n\n<pre><code>std::wstring_convert&lt;std::codecvt_utf8_utf16&lt;wchar_t&gt;&gt; conv1;\nshared_dir = conv1.to_bytes(temp.wstring());\n</code></pre>\n\n<p>but unfortunatelly the result of the following text is this: </p>\n\n<p>\"c:\\git\\myproject\\bin\\\u00e1rv\u00edzt\u0171r\u0151t\u00fck\u00f6rf\u00far\u00f3g\u00e9p\" ->\n\"c:\\git\\myproject\\bin\\\u00c3\u00a1rv\u00c3\u00adzt\u00c5\u00b1r\u00c5\u2018t\u00c3\u00bck\u00c3\u00b6rf\u00c3\u00bar\u00c3\u00b3g\u00c3\u00a9p\"</p>\n\n<p>What do I do wrong?</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;locale&gt;\n#include &lt;codecvt&gt;\n\nint main()\n{\n    // wide character data\n    std::wstring wstr =  L\"\u00e1rv\u00edzt\u0171r\u0151t\u00fck\u00f6rf\u00far\u00f3g\u00e9p\";\n\n    // wide to UTF-8\n    std::wstring_convert&lt;std::codecvt_utf8&lt;wchar_t&gt;&gt; conv1;\n    std::string str = conv1.to_bytes(wstr);\n}\n</code></pre>\n\n<p>I was checking the value of the variable in visual studio debug mode.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1568824058, "post_id": 57997065, "comment_id": 102400721, "body": "Some header files might (directly or indirectly) include other header files. It&#39;s implementation details that you can&#39;t rely on. Always include the header files you require."}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1568880694, "post_id": 57997065, "comment_id": 102417749, "body": "Simply add following  <code>#ifndef EXIT_SUCCESS #define EXIT_SUCCESS 0 #endif #ifndef EXIT_FAILURE #define EXIT_FAILURE -1 #endif</code> before the  <code>int main()</code>"}], "owner": {"reputation": 1, "user_id": 2565352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa842095b1df4192d7520c42ba7fd70e?s=128&d=identicon&r=PG", "display_name": "user2565352", "link": "https://stackoverflow.com/users/2565352/user2565352"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568823665, "creation_date": 1568823665, "question_id": 57997065, "link": "https://stackoverflow.com/questions/57997065/why-is-geany-ide-not-catching-an-error-exit-success-needs-correct-header-file", "title": "Why is Geany IDE NOT catching an error? EXIT_SUCCESS; needs correct header file, c++", "body": "<p>On both windows and linux I am using Geany IDE and writing a c++ program. For some reason right now it is not catching an error on either linux/windows. I am using EXIT_SUCCESS and need to have the header file , right? also using copy function and it requires ? It only stops when I exclude  and  I discovered this because in my code I left it out by accident but it compiled, built and ran just fine. </p>\n\n<p>It catches it when I use just G++, I'm not sure what is going on, could it be some setting I have in Geany? </p>\n\n<p>Here is the code I'm working with</p>\n\n<pre><code>    #include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;cassert&gt;\n//~ #include &lt;cstdlib&gt;\nint main()\n{\n    int xSize = 10;\n    int ySize = 50;\n    int xData[xSize];\n    int yData[ySize];\n\n    for(int i = 0; i &lt; xSize; ++i) {\n        xData[i] = i;\n        std::cout &lt;&lt; \" First X Array value: \"&lt;&lt; xData[i] &lt;&lt; \" \" &lt;&lt; std::endl;\n    }\n    std::cout &lt;&lt; std::endl;\n    for(int i = ySize; i &gt;= 0; --i) {\n        yData[i] = i;\n        std::cout &lt;&lt; \" First Y Array value: \"&lt;&lt; yData[i] &lt;&lt; \" \" &lt;&lt; std::endl;\n    }\n\n    std::cout &lt;&lt; std::endl;\n    std::copy(xData, xData+6,yData+42);\n\n    std::cout &lt;&lt; \"The copy function added it's first 6 values to the yData array starting at Y's 42nd array position\" &lt;&lt; std::endl;\n    for (int i = 42; i &lt; ySize; ++i) {\n        std::cout &lt;&lt; \"First array value of Y is now: \" &lt;&lt; yData[i] &lt;&lt; std::endl;\n    }\n    assert(yData[42]==0);\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 5, "creation_date": 1568823544, "post_id": 57996953, "comment_id": 102400507, "body": "<i>data_packet (assuming 32 points and 12 data) will have 42+ (12*(2+2+32(3))) + 4 + 2 = 1248</i> -- And there is your possible flaw -- the calculation.  You didn&#39;t take into account any fields used for padding within the struct.  The number of bytes that <code>data_packet</code> takes up is <code>sizeof(data_packet)</code>, not some calculation you came up with."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1568823551, "post_id": 57996953, "comment_id": 102400512, "body": "what do you mean with &quot;always loose some data&quot; ? number of bytes in the vector is <code>sizeof(data_packet)</code> * number of elements"}, {"owner": {"reputation": 135, "user_id": 11312480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bae1c0d0936a0a82792a1b8d44407e21?s=128&d=identicon&r=PG&f=1", "display_name": "Skanda", "link": "https://stackoverflow.com/users/11312480/skanda"}, "edited": false, "score": 0, "creation_date": 1568824083, "post_id": 57996953, "comment_id": 102400735, "body": "Thank you both of you. Is it possible to calculate in run-time?"}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 1, "creation_date": 1568824486, "post_id": 57996953, "comment_id": 102400930, "body": "Note: The vector does not store its data locally. The  vector contains pointers to the actual data so if you are simply copying the byte info from these structures that will fail. In C++ an objects state is controlled via the constructor/destructor you can <b>NOT</b> just copy the raw data of a vector and place in another vector object and expect it to work. What are you actually trying to do here that you need the byte offset of things."}, {"owner": {"reputation": 135, "user_id": 11312480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bae1c0d0936a0a82792a1b8d44407e21?s=128&d=identicon&r=PG&f=1", "display_name": "Skanda", "link": "https://stackoverflow.com/users/11312480/skanda"}, "edited": false, "score": 0, "creation_date": 1568824604, "post_id": 57996953, "comment_id": 102400972, "body": "I am using boost buffer to send this data to a client. I need to know the size of the data (start address of the serialized data is known)."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1568828185, "post_id": 57996953, "comment_id": 102402327, "body": "Then as Martin said <i>this solution cannot work</i>. You must not treat a <code>data_packet</code> as a serialisable block of bytes. You must not serialise a vector like that. You should write a proper serialiser... Besides, if the vectors &quot;always have 32/12 elements&quot; (even if it takes you a while to build up to it) why not just have arrays? Then you <i>can</i> treat them as blocks of bytes..."}], "answers": [{"tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": true, "score": 3, "last_activity_date": 1568824711, "last_edit_date": 1568824711, "creation_date": 1568824242, "answer_id": 57997196, "question_id": 57996953, "link": "https://stackoverflow.com/questions/57996953/how-to-calculate-number-of-bytes-in-a-vector-in-c/57997196#57997196", "title": "How to calculate number of bytes in a vector in C++?", "body": "<p>Take a look at this code:</p>\n\n<pre><code>int main() {\n    static std::vector&lt;data_packet&gt; packets_from_current_frame;\n\n    std::cout &lt;&lt; \"sizeof data_point  = \" &lt;&lt; (sizeof(data_point)) &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"sizeof data_block  = \" &lt;&lt; (sizeof(data_block)) &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"sizeof data_packet = \" &lt;&lt; (sizeof(data_packet)) &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>sizeof data_point  = 3\nsizeof data_block  = 32\nsizeof data_packet = 80\n</code></pre>\n\n<p>From this it is clear why your calculation fails.</p>\n\n<p>You have forgotten to take into account things like the vector itself, fields after the vector and padding.</p>\n\n<p>The correct way to calculate it is:</p>\n\n<pre><code>packets_from_current_frame.size() * (sizeof(data_packet) + data.size() * (sizeof(data_block) + points.size() * sizeof(data_point)))\n</code></pre>\n\n<p>Note: This amount of bytes are not stored in one consecutive memory block so don't try any direct memcpy.</p>\n\n<p>The individual vector has consecutive data. If you want to know the address of the data held by a vector, use vector::data()</p>\n"}], "owner": {"reputation": 135, "user_id": 11312480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bae1c0d0936a0a82792a1b8d44407e21?s=128&d=identicon&r=PG&f=1", "display_name": "Skanda", "link": "https://stackoverflow.com/users/11312480/skanda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 1, "accepted_answer_id": 57997196, "answer_count": 1, "score": 0, "last_activity_date": 1568824711, "creation_date": 1568823254, "question_id": 57996953, "link": "https://stackoverflow.com/questions/57996953/how-to-calculate-number-of-bytes-in-a-vector-in-c", "title": "How to calculate number of bytes in a vector in C++?", "body": "<p>I have a code that looks as below:</p>\n\n<pre><code>typedef struct{\n    uint8_t distance[2];\n    uint8_t reflectivity;      \n}data_point;\n\ntypedef struct{\n    uint8_t flag[2];\n    uint8_t Azimuth[2];\n    std::vector&lt;data_point&gt; points; // always size is 32 but not initialized whereas filled in run-time using emplace_back\n}data_block;\n\ntypedef struct{\n    uint8_t UDP[42];\n    std::vector&lt;data_block&gt; data; // always size is 12 but not initialized whereas filled in run-time using emplace_back\n    uint8_t time_stamp[4];\n    uint8_t factory[2];\n}data_packet;\n\nstatic std::vector&lt;data_packet&gt; packets_from_current_frame;\n</code></pre>\n\n<p>Assuming <code>packets_from_current_frame.size() = 26</code>, How can I calculate the number of bytes in <code>packets_from_current_frame</code>?</p>\n\n<p>My solution on paper:</p>\n\n<p>1 <code>data_packet</code> (assuming 32 <code>points</code> and 12 <code>data</code>) will have <code>42+ (12*(2+2+32(3))) + 4 + 2 = 1248</code>. Hence, the end address is <code>_begin + sizeof(uint8_t) * 26 * 1248</code> (<code>_begin</code> is the start address of the memory buffer).</p>\n\n<p>With this calculation I always loose some data. Number of bytes that is lost depends on <code>packets_from_current_frame.size()</code>. What is wrong with the calculation?</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 11, "creation_date": 1568822758, "post_id": 57996806, "comment_id": 102400178, "body": "Welcome to undefined behavior land, where anything can happen."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1568824326, "post_id": 57996806, "comment_id": 102400846, "body": "@MarekR You managed to misspell &quot;heartbeat&quot; twice in two different ways... :D"}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1568825092, "post_id": 57996806, "comment_id": 102401158, "body": "You have killed a man Config and you are checking its heartbeat (m_maxSize). There is small chance that this zombie has a heartbeat, but quite slim."}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 4, "last_activity_date": 1568823259, "last_edit_date": 1568823259, "creation_date": 1568822896, "answer_id": 57996859, "question_id": 57996806, "link": "https://stackoverflow.com/questions/57996806/reference-member-is-set-to-0-after-object-is-out-of-scope/57996859#57996859", "title": "Reference member is set to 0 after object is out of scope", "body": "<blockquote>\n  <p>My question is why is it zero?</p>\n</blockquote>\n\n<p>Because the behaviour of the program is undefined. This is one possible behaviour that the program could have.</p>\n\n<blockquote>\n  <p>I would expect to</p>\n</blockquote>\n\n<p>It is foolish to expect any particular behaviour. None of your expectations are guaranteed to be correct.</p>\n\n<blockquote>\n  <p>expect to have access violation if memory was already taken by some other object</p>\n</blockquote>\n\n<p>Memory access violations are detected by the operating system. The operating system has no knowledge of \"objects\" that the C++ program uses, so whether some piece of memory is used by one object or another is not known to the OS. You get access violations when you attempt to access memory pages that have an invalid mapping.</p>\n\n<p>More generally, the language does not guarantee that you will get a memory access violation if you access objects outside of their lifetime. In fact, I don't think there are any situations where the C++ language would have such guarantee.</p>\n\n<blockquote>\n  <p>or to have untouched old (1234) value</p>\n</blockquote>\n\n<p>There is no guarantee that you get the untouched value when you access an object outside of its lifetime. There are no guarantees whatsoever.</p>\n"}], "owner": {"reputation": 705, "user_id": 6836791, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7e905a793e9881a8199d6ff3c0e72456?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Stepniak", "link": "https://stackoverflow.com/users/6836791/adam-stepniak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "closed_date": 1568824392, "accepted_answer_id": 57996859, "answer_count": 1, "score": 0, "last_activity_date": 1568823259, "creation_date": 1568822676, "question_id": 57996806, "link": "https://stackoverflow.com/questions/57996806/reference-member-is-set-to-0-after-object-is-out-of-scope", "closed_reason": "Duplicate", "title": "Reference member is set to 0 after object is out of scope", "body": "<p>Let's consider the following example of having reference to already destroyed object.</p>\n\n<pre><code>struct Config\n{\n    unsigned int m_maxSize = 1;\n};\n\nclass FileReader\n{\npublic:\n    FileReader(Config&amp; config) : m_cfg(config){\n    }\n\n    Config&amp; m_cfg;\n};\n\nclass FileReaderUser\n{\n    FileReader* m_fileReader;\npublic:\n    FileReaderUser(){\n        Config cfg;\n        cfg.m_maxSize = 1234;\n        m_fileReader = new FileReader(cfg);\n    }\n\n    void PrintSize(){\n        std::cout &lt;&lt; \"Config value: \" &lt;&lt; m_fileReader-&gt;m_cfg.m_maxSize &lt;&lt; std::endl;\n    }\n};\n\nint main()\n{\n    FileReaderUser fileReaderUser;\n    fileReaderUser.PrintSize();\n}\n</code></pre>\n\n<p>In this example output is 0. My question is why is it zero? I would expect to have access violation if memory was already taken by some other object (not sure if it's true), or to have untouched old (1234) value. It's compiled on GCC 7.2.0 in Debug.</p>\n"}, {"tags": ["c++", "cmake"], "answers": [{"comments": [{"owner": {"reputation": 909, "user_id": 10854225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xd3kl.png?s=128&g=1", "display_name": "vincenzopalazzo", "link": "https://stackoverflow.com/users/10854225/vincenzopalazzo"}, "edited": false, "score": 1, "creation_date": 1568828394, "post_id": 57998010, "comment_id": 102402394, "body": "Thanks so much for your clarification"}], "tags": [], "owner": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "is_accepted": true, "score": 1, "last_activity_date": 1568828574, "last_edit_date": 1568828574, "creation_date": 1568827714, "answer_id": 57998010, "question_id": 57996718, "link": "https://stackoverflow.com/questions/57996718/how-work-target-include-directories-cmake-for-include-the-local-library-how-pat/57998010#57998010", "title": "How work target_include_directories cmake for include the local library how &lt;path/lib.h&gt;", "body": "<pre class=\"lang-cmake prettyprint-override\"><code>target_include_directories(Decompiler PUBLIC \n        $&lt;BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}&gt;/bitcoinlib)\n</code></pre>\n\n<p>This line is telling the compiler that <code>./bitcoinlib</code> is the root of the include path.</p>\n\n<p>So <code>#include &lt;bitcoinlib/script.h&gt;</code> is looking for <code>./bitcoinlib/bitcoinlib/script.h</code>.</p>\n\n<p>You seem to have set up your project directory with <code>CMakeLists.txt</code> <em>inside</em> your source/headers directory, so you can change the <code>target_include_directories</code> setting like this:</p>\n\n<pre class=\"lang-cmake prettyprint-override\"><code>target_include_directories(Decompiler PUBLIC \n        $&lt;BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}&gt;)\n</code></pre>\n\n<p>Or, you can change <code>./bitcoinlib/script.cpp</code> to <code>#include &lt;script.h&gt;</code> since that header is in the same directory as the .cpp file anyways.</p>\n\n<hr>\n\n<p>I would recommend that you restructure your project a bit though:</p>\n\n<pre class=\"lang-plaintext prettyprint-override\"><code>&lt;Project Directory&gt;\n    CMakeLists.txt\n    include\n        bitcoinlib\n            &lt; your bitcoinlib headers here &gt;\n    src\n        bitcoinlib\n            &lt; your bitcoinlib sources here &gt;\n        main.cpp\n</code></pre>\n\n<pre class=\"lang-cmake prettyprint-override\"><code>target_include_directories(Decompiler PUBLIC \n        $&lt;BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/include&gt;)\n</code></pre>\n"}], "owner": {"reputation": 909, "user_id": 10854225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xd3kl.png?s=128&g=1", "display_name": "vincenzopalazzo", "link": "https://stackoverflow.com/users/10854225/vincenzopalazzo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 0, "accepted_answer_id": 57998010, "answer_count": 1, "score": 0, "last_activity_date": 1568828574, "creation_date": 1568822254, "question_id": 57996718, "link": "https://stackoverflow.com/questions/57996718/how-work-target-include-directories-cmake-for-include-the-local-library-how-pat", "title": "How work target_include_directories cmake for include the local library how &lt;path/lib.h&gt;", "body": "<p>I'm using external files for work with my library, so but I do not want using the relative path inside my file C++ but I want using this convention </p>\n\n<p>I read that with CMake is possible to create this if using the <a href=\"https://cmake.org/cmake/help/v3.0/command/target_include_directories.html\" rel=\"nofollow noreferrer\">target_include_directories</a> \nI'm new with Cmake and I have a problem with configuring this target on my project</p>\n\n<p>This is my directory configuration</p>\n\n<p><a href=\"https://i.stack.imgur.com/nM9sE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nM9sE.png\" alt=\"enter image description here\"></a></p>\n\n<p>This is my CMake configuration</p>\n\n<pre><code>cmake_minimum_required(VERSION 2.6)\nproject(decompile-bitcoin-script)\n\nset(CMAKE_CXX_STANDARD 11)\n\n    set(SOURCE_FILES \n            main.cpp\n\n            #Bitcoin Lib\n            bitcoinlib/script.cpp\n            bitcoinlib/script_error.cpp\n            bitcoinlib/key_io.cpp\n            bitcoinlib/pubkey.cpp\n            bitcoinlib/sign.cpp\n            bitcoinlib/standard.cpp\n        )\n\n    add_executable(Decompiler ${SOURCE_FILES})\n\n    target_include_directories(Decompiler PUBLIC \n        $&lt;BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}&gt;/bitcoinlib)\n</code></pre>\n\n<p>This is the compiler error</p>\n\n<pre><code>[ 12%] Building CXX object CMakeFiles/Decompiler.dir/main.cpp.o\n[ 25%] Building CXX object CMakeFiles/Decompiler.dir/bitcoinlib/script.cpp.o\n/home/vincenzo/Github/decompiler-bitcoin-script/bitcoinlib/script.cpp:6:10: fatal error: bitcoinlib/script.h: No such file or directory\n #include &lt;bitcoinlib/script.h&gt;\n          ^~~~~~~~~~~~~~~~~~~~~\ncompilation terminated.\nCMakeFiles/Decompiler.dir/build.make:86: recipe for target 'CMakeFiles/Decompiler.dir/bitcoinlib/script.cpp.o' failed\nmake[2]: *** [CMakeFiles/Decompiler.dir/bitcoinlib/script.cpp.o] Error 1\nCMakeFiles/Makefile2:67: recipe for target 'CMakeFiles/Decompiler.dir/all' failed\nmake[1]: *** [CMakeFiles/Decompiler.dir/all] Error 2\nMakefile:83: recipe for target 'all' failed\nmake: *** [all] Error 2\n</code></pre>\n\n<p>Inside the main not have code but I have only main with a <code>cout&lt;&lt;\"foo\";</code></p>\n\n<p>What I'm doing wrong?</p>\n"}, {"tags": ["c++", "arrays", "pointers"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1568821753, "post_id": 57996510, "comment_id": 102399642, "body": "Time to learn how to use a debugger to step through your code statement by statement while monitoring variables and their values."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 2, "creation_date": 1568821768, "post_id": 57996510, "comment_id": 102399652, "body": "<code>arr[j+1]</code> (in <code>bubble_sort</code>) is undefined behavior, when <code>i == 0</code>, and <code>j == last - i - 1</code>, since it tries to access an element <code>arr[last]</code>, which is out of bounds."}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1568822114, "post_id": 57996510, "comment_id": 102399860, "body": "You should read <a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\">Why is \u201cusing namespace std;\u201d considered bad practice?</a>. You defined a function called <code>swap</code>. C++ already contains <a href=\"https://en.cppreference.com/w/cpp/algorithm/swap\" rel=\"nofollow noreferrer\">std::swap</a>. This can cause strange errors. I can&#39;t compile your code because of your global variable <code>count</code> and <a href=\"https://en.cppreference.com/w/cpp/algorithm/count\" rel=\"nofollow noreferrer\">std::count</a>. The error message is <code>error: reference to &#39;count&#39; is ambiguous</code>."}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1568822678, "post_id": 57996510, "comment_id": 102400138, "body": "You are actually not using your own <code>swap</code> function. You are using <a href=\"https://en.cppreference.com/w/cpp/algorithm/swap\" rel=\"nofollow noreferrer\">std::swap</a>. You can check it if you add a line like <code>std::cout &lt;&lt; &quot;My Swap\\n&quot;;</code> into your swap function. It&#39;s not called. Your swap function expects two pointers. <code>arr[j]</code> and <code>arr[j+1]</code> are integer values. You can&#39;t pass two integer values to your <code>swap</code> function."}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1568823017, "post_id": 57996510, "comment_id": 102400307, "body": "Here you can see it: <a href=\"https://wandbox.org/permlink/YvkNrUHsKjpX732O\" rel=\"nofollow noreferrer\">wandbox.org/permlink/YvkNrUHsKjpX732O</a>"}, {"owner": {"reputation": 33, "user_id": 10525539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a07a33d9956300f5ecd3e6ea850fa7ee?s=128&d=identicon&r=PG&f=1", "display_name": "axionevolved", "link": "https://stackoverflow.com/users/10525539/axionevolved"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1568826192, "post_id": 57996510, "comment_id": 102401574, "body": "@AlgirdasPreid\u017eius can you expand on that a bit?  The way I&#39;m understanding that is <code>arr[j+1]</code> basically equals <code>arr[j+1-1]</code> when <code>i == 0</code> ?"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1568826460, "post_id": 57996510, "comment_id": 102401670, "body": "@axionevolved I thought, that I expanded enough. When <code>i == 0</code>, the loop condition is <code>j &lt; last - i</code> === <code>j &lt; last</code>. Hence the last possible value of <code>j</code> is <code>last - 1</code>. So, <code>j + 1</code>, given <code>j = last - 1</code> is <code>last + 1 - 1</code> === <code>last</code>. Which is out of bounds of array, since the last valid index is <code>last - 1</code>."}, {"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 0, "creation_date": 1568829444, "post_id": 57996510, "comment_id": 102402810, "body": "In any case, why <code>j+1</code>? Looks like this was meant as <code>i</code>."}], "answers": [{"tags": [], "owner": {"reputation": 228, "user_id": 8309258, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ro5pe.jpg?s=128&g=1", "display_name": "Vahid Bahramian", "link": "https://stackoverflow.com/users/8309258/vahid-bahramian"}, "is_accepted": false, "score": 1, "last_activity_date": 1568830813, "creation_date": 1568830813, "answer_id": 57998728, "question_id": 57996510, "link": "https://stackoverflow.com/questions/57996510/cant-figure-out-why-my-print-array-is-replacing-elements/57998728#57998728", "title": "Can&#39;t figure out why my Print Array is replacing elements", "body": "<p>you have to do this change is in bubble_sort function</p>\n\n<pre><code>for (j = 1; j &lt; last - i; j++)\n        {\n            //Use the function pointer to determine which logic to use\n            if (ptr(arr[j-1], arr[j]))\n            {\n                swap(arr[j-1], arr[j]);\n                swapped = true;\n            }\n        }\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 10525539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a07a33d9956300f5ecd3e6ea850fa7ee?s=128&d=identicon&r=PG&f=1", "display_name": "axionevolved", "link": "https://stackoverflow.com/users/10525539/axionevolved"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1568830813, "creation_date": 1568821435, "question_id": 57996510, "link": "https://stackoverflow.com/questions/57996510/cant-figure-out-why-my-print-array-is-replacing-elements", "title": "Can&#39;t figure out why my Print Array is replacing elements", "body": "<p>I'm taking a C++ class and we've gotten to pointers.  The assignment we've been given is to basically bubble sort an array that was read from a text file by passing pointers as parameters for various functions.  I think I have a decent setup that outputs what I'm looking for, but for specific actions, I'm getting a zero as an element when there isn't one written to the array.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\n\nint capacity;\nint count;\n\nint readData(int *&amp;arr);\nvoid swap(int *xp, int *yp);\nvoid bsort(int *arr, int last);\nvoid writeToConsole(int *arr, int last);\nvoid bubble_sort(int *arr, int last, int(*ptr)(int, int));\nint ascending(int a, int b);\nint descending(int a, int b);\n\nint main() {\n\n    int *whatever = NULL;\n    count = readData(whatever);\n    cout &lt;&lt; \"Raw array data:\" &lt;&lt; endl;\n    writeToConsole(whatever, capacity);\n    cout &lt;&lt; \"After simple bubble sort:\" &lt;&lt; endl;\n    bubble_sort(whatever, capacity, ascending);\n    writeToConsole(whatever, capacity);\n    cout &lt;&lt; \"Now descending:\" &lt;&lt; endl;\n    bubble_sort(whatever, capacity, descending);\n    writeToConsole(whatever, capacity);\n\n\n    return 0;\n}\n\nint readData(int *&amp;arr) {\n    ifstream inputFile;\n    inputFile.open(\"data.txt\");\n    if (!inputFile) {\n        cout &lt;&lt; \"Error!\";\n    }\n    inputFile &gt;&gt; capacity;\n    arr = new int[capacity];\n    for(int i = 0; i &lt; capacity; i++){\n        inputFile &gt;&gt; arr[i];\n    }\n    inputFile.close();\n    return capacity;\n}\n\nvoid swap(int *xp, int *yp) {  \n    int temp = *xp;  \n    *xp = *yp;  \n    *yp = temp;  \n}\n\nvoid bsort(int *arr, int last) {\n   int i, j; \n   bool swapped; \n   for (i = 0; i &lt; last + 1; i++) \n   { \n     swapped = false; \n     for (j = 0; j &lt; last-i; j++) \n     { \n        if (arr[j] &gt; arr[j+1]) \n        { \n           swap(arr[j], arr[j+1]); \n           swapped = true; \n        } \n     } \n     // IF no two elements were swapped by inner loop, then break \n     if (swapped == false) \n        break; \n   } \n} \n\nvoid writeToConsole(int *arr, int last) {\n\n    cout &lt;&lt; \"[ \";\n    for(int i = 0; i &lt; last; i++){\n        cout &lt;&lt; arr[i] &lt;&lt; \" \";\n    }\n    cout &lt;&lt; \"]\" &lt;&lt; endl;\n}\n\nvoid bubble_sort(int *arr, int last, int(*ptr)(int, int)){\n    int i, j; \n    bool swapped; \n    for (i = 0; i &lt; last; i++) \n    { \n      swapped = false; \n      for (j = 0; j &lt; last-i; j++) \n      {\n         //Use the function pointer to determine which logic to use\n         if (ptr(arr[j] , arr[j+1])) \n         { \n           swap(arr[j], arr[j+1]); \n           swapped = true; \n         } \n      }  \n\n      // IF no two elements were swapped by inner loop, then break \n      if (swapped == false) \n        break; \n    } \n}\n\nint ascending(int a, int b){\n    return a &gt; b;\n}\n\nint descending(int a, int b){\n    return a &lt; b;\n}\n</code></pre>\n\n<p>My output looks like this:</p>\n\n<p>Raw array data:\n[ 8 4 7 2 9 5 6 1 3 ]\nAfter simple bubble sort:\n[ 0 1 2 3 4 5 6 7 8 ]\nNow descending:\n[ 9 8 7 6 5 4 3 2 1 ]</p>\n\n<p>Any ideas as to why my second sort is throwing in a zero?  Thank you!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1568822420, "post_id": 57996266, "comment_id": 102400016, "body": "Aside: writing a <code>std::istream&amp; operator&gt;&gt;(std::istream&amp;, Records&amp;)</code> means you can check whether the whole record is valid, rather than assume the stream has more if <code>fail</code> isn&#39;t set. At the moment you add an invalid <code>Record</code> at the end. The loop could become <code>for (Records awardIn; inFS &gt;&gt; awardsIn;) { input.push_back(awardIn); }</code> (or you could populate <code>inputs</code> in it&#39;s declaration, with <code>std::istream_iterator&lt;Record&gt;</code>)"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 12085939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/549dc18f93bfaa8ac71dc04155bbf3a1?s=128&d=identicon&r=PG&f=1", "display_name": "kingk", "link": "https://stackoverflow.com/users/12085939/kingk"}, "edited": false, "score": 0, "creation_date": 1568825719, "post_id": 57996567, "comment_id": 102401409, "body": "Is there anyway you could give me a bit more on how this works? My professor hasn&#39;t gone over this and I&#39;m a little lost on auto comp"}, {"owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "reply_to_user": {"reputation": 19, "user_id": 12085939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/549dc18f93bfaa8ac71dc04155bbf3a1?s=128&d=identicon&r=PG&f=1", "display_name": "kingk", "link": "https://stackoverflow.com/users/12085939/kingk"}, "edited": false, "score": 0, "creation_date": 1568826571, "post_id": 57996567, "comment_id": 102401723, "body": "<code>comp</code> is a <a href=\"https://stackoverflow.com/questions/7627098/what-is-a-lambda-expression-in-c11\">lambda</a>. The <code>auto</code> keyword means that the compiler should choose an appropriate data type. <code>comp</code> is basically a function here. What <code>find_if</code> does, is iterate over each element in your container (here <code>input</code>) and call <code>comp(element)</code>. If that call returns <code>true</code>, <code>find_if</code> will return with an iterator to that element."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 19, "user_id": 12085939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/549dc18f93bfaa8ac71dc04155bbf3a1?s=128&d=identicon&r=PG&f=1", "display_name": "kingk", "link": "https://stackoverflow.com/users/12085939/kingk"}, "edited": false, "score": 0, "creation_date": 1568829246, "post_id": 57996567, "comment_id": 102402728, "body": "@kingk Note that even though the <code>while</code> condition isn&#39;t wrong, it <i>is</i> wrong to use that condition before reading 4 lines and adding a <code>Records</code> to the vector."}, {"owner": {"reputation": 19, "user_id": 12085939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/549dc18f93bfaa8ac71dc04155bbf3a1?s=128&d=identicon&r=PG&f=1", "display_name": "kingk", "link": "https://stackoverflow.com/users/12085939/kingk"}, "edited": false, "score": 0, "creation_date": 1568841758, "post_id": 57996567, "comment_id": 102407573, "body": "@Timo Thank you! Now if I want to print matching data members would I use at() at it?"}, {"owner": {"reputation": 19, "user_id": 12085939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/549dc18f93bfaa8ac71dc04155bbf3a1?s=128&d=identicon&r=PG&f=1", "display_name": "kingk", "link": "https://stackoverflow.com/users/12085939/kingk"}, "edited": false, "score": 0, "creation_date": 1568843223, "post_id": 57996567, "comment_id": 102407973, "body": "I want to add what my goal is it might help. I need to search a file for reference to a name and print the award the name is associated with. If the name shows up more than once I need to print it more than once."}, {"owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "reply_to_user": {"reputation": 19, "user_id": 12085939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/549dc18f93bfaa8ac71dc04155bbf3a1?s=128&d=identicon&r=PG&f=1", "display_name": "kingk", "link": "https://stackoverflow.com/users/12085939/kingk"}, "edited": false, "score": 0, "creation_date": 1568844183, "post_id": 57996567, "comment_id": 102408223, "body": "@kingk that&#39;s exactly what the loop does."}, {"owner": {"reputation": 19, "user_id": 12085939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/549dc18f93bfaa8ac71dc04155bbf3a1?s=128&d=identicon&r=PG&f=1", "display_name": "kingk", "link": "https://stackoverflow.com/users/12085939/kingk"}, "edited": false, "score": 0, "creation_date": 1568847986, "post_id": 57996567, "comment_id": 102409103, "body": "I get the compiler error &quot; no match for &#39;operator&lt;&lt;&#39; (operand types are &#39;std::ostream&#39; {aka &#39;std::basic_ostream&lt;char&gt;&#39;} and &#39;Records&#39;) &quot;      cout &lt;&lt; record &lt;&lt; endl;"}, {"owner": {"reputation": 19, "user_id": 12085939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/549dc18f93bfaa8ac71dc04155bbf3a1?s=128&d=identicon&r=PG&f=1", "display_name": "kingk", "link": "https://stackoverflow.com/users/12085939/kingk"}, "edited": false, "score": 0, "creation_date": 1568857192, "post_id": 57996567, "comment_id": 102410716, "body": "Whoever reads this I ended up creating a custom ostream operator in order to resolve the error"}], "tags": [], "owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "is_accepted": true, "score": 0, "last_activity_date": 1568844124, "last_edit_date": 1568844124, "creation_date": 1568821700, "answer_id": 57996567, "question_id": 57996266, "link": "https://stackoverflow.com/questions/57996266/searching-a-vector-of-structs-for-one-data-member-then-printing-all-data-member/57996567#57996567", "title": "Searching a vector of structs for one data member, then printing all data members that match", "body": "<p>First off your while loop condition is not wrong, but could be simplified by using operator bool instead: </p>\n\n<pre><code>while(inFS)\n{\n    ...\n}\n</code></pre>\n\n<p>Second, your usage of <code>std::find_if</code> is incorrect. The third argument must be a callable of signature <code>bool(Record)</code> (possibly <code>const</code> or ref qualified) and returns an iterator to the first match. </p>\n\n<p>From your variable names and strings I guess you want to search over the <code>Records::recip</code> members in your vector. <code>std::find_if</code> is a good way to achieve this:</p>\n\n<pre><code>auto comp = [&amp;search](Record const&amp; r) { return r.receip == search; };\n\nfor (auto it = std::find_if(input.begin(), input.end(), comp);\n     it != input.end();\n     it = std::find_if(++it, input.end(), comp))\n{\n    // this loop iterates over all matches for search in Record::receip\n    Record&amp; record = *it;\n    std::cout &lt;&lt; record &lt;&lt; '\\n';\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18, "user_id": 4858935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fcc79fea503f35988018eaa6ccf954e?s=128&d=identicon&r=PG&f=1", "display_name": "Artem Suprunov", "link": "https://stackoverflow.com/users/4858935/artem-suprunov"}, "is_accepted": false, "score": 0, "last_activity_date": 1568822108, "creation_date": 1568822108, "answer_id": 57996686, "question_id": 57996266, "link": "https://stackoverflow.com/questions/57996266/searching-a-vector-of-structs-for-one-data-member-then-printing-all-data-member/57996686#57996686", "title": "Searching a vector of structs for one data member, then printing all data members that match", "body": "<p>The way you use find_if is incorrect, you need to use lambda to make custom search in your vector of structs. Here is more straight way:</p>\n\n<pre><code>for(const Record&amp; record : input) // Iterate all records\n{\n    if(record.recip == search) // Check if 'recip' of the record matches the requested one\n    {\n        cout &lt;&lt; \"found\";\n        return 0;\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": false, "score": 0, "last_activity_date": 1568823615, "creation_date": 1568823615, "answer_id": 57997049, "question_id": 57996266, "link": "https://stackoverflow.com/questions/57996266/searching-a-vector-of-structs-for-one-data-member-then-printing-all-data-member/57997049#57997049", "title": "Searching a vector of structs for one data member, then printing all data members that match", "body": "<p><code>!= string::npos</code> is not the correct condition. <code>find_if</code> returns an iterator to the first element satisfying the condition or <code>last</code> if no such element is found. <code>last</code> is in your case <code>input.end()</code>.</p>\n\n<p>You read the fields by <code>getline</code>, but when you enter the search string, you use formatted input (breaking on space). If the field contained a space in the file, you'd never be able to find it.</p>\n\n<p>To make input/output easier, consider adding operator <code>&lt;&lt;</code> and <code>&gt;&gt;</code> to your class. Your current <code>while(!inFS.fail())</code> condition does not work. If you read the last <code>Records</code> struct from the file, <code>fail()</code> will <em>not</em> be true and you'll therefor try to read one complete <code>Records</code> (but failing on every line). You'll still add the erroneous <code>Records</code> struct to the <code>vector</code>.</p>\n\n<p>As an alternative to the other suggestions using a lambda (which is nice) you could also add <code>operator==</code> to your <code>Records</code> - if you only want to be able to search for the same thing.</p>\n\n<p>Also, read <a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\">Why is \u201cusing namespace std;\u201d considered bad practice?</a></p>\n\n<p>Example:</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\nstruct Records {\n    std::string year{};\n    std::string category{};\n    std::string won{};\n    std::string recip{};\n\n    // added operator to be able to compare a Records with a string\n    bool operator==(const std::string&amp; Recip) const { return recip == Recip; }\n};\n\n// custom streaming operator for reading one `Records` from a stream (like a file)\nstd::istream&amp; operator&gt;&gt;(std::istream&amp; is, Records&amp; r) {\n    std::getline(is, r.year, ',') &amp;&amp; std::getline(is, r.category, ',') &amp;&amp;\n        std::getline(is, r.won, ',') &amp;&amp; std::getline(is, r.recip);\n    return is;\n}\n\n// custom streaming operator to write a `Records` to a stream\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const Records&amp; r) {\n    return os &lt;&lt; r.year &lt;&lt; '\\n' &lt;&lt; r.category &lt;&lt; '\\n' &lt;&lt; r.won &lt;&lt; '\\n' &lt;&lt; r.recip &lt;&lt; '\\n';\n}\n\nint main() {\n    std::ifstream inFS(\"oscars.csv\");\n\n    if(!inFS) { // in boolean context, inFS will be false if not opened\n        std::cout &lt;&lt; \"Failed to open file.\\n\";\n        return 1;\n    }\n\n    std::vector&lt;Records&gt; input;\n    Records awardIn;\n\n    // use the custom operator&gt;&gt; to extract a \"Records\" from the file and push it back\n    // inFS will be false in boolean context if the extraction failed\n    while(inFS &gt;&gt; awardIn)\n        input.push_back(awardIn);\n\n    std::string search;\n    std::cout &lt;&lt; \"Enter recipient: \";\n\n    if(std::getline(std::cin, search)) { // check that reading succeed\n\n        // with the added operator== you can use a normal std::find\n        for(auto it = std::find(input.begin(), input.end(), search);\n            it != input.end(); \n            it = std::find(std::next(it), input.end(), search)) \n        {\n            // use the custom operator&lt;&lt; to print the Records\n            std::cout &lt;&lt; *it &lt;&lt; \"\\n\";\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 12085939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/549dc18f93bfaa8ac71dc04155bbf3a1?s=128&d=identicon&r=PG&f=1", "display_name": "kingk", "link": "https://stackoverflow.com/users/12085939/kingk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 57996567, "answer_count": 3, "score": 0, "last_activity_date": 1568857221, "creation_date": 1568820518, "last_edit_date": 1568857221, "question_id": 57996266, "link": "https://stackoverflow.com/questions/57996266/searching-a-vector-of-structs-for-one-data-member-then-printing-all-data-member", "title": "Searching a vector of structs for one data member, then printing all data members that match", "body": "<p>I'm attempting to search a csv file in order to print the data found with a certain name. \nI have tried multiple suggestions found on this website but nothing seems to be working as I get constant errors. Possibly because I'm not quite understanding why my code is not working, so I would very much appreciate an explanation. My code can be found below:</p>\n\n<pre><code>code removed\n</code></pre>\n"}, {"tags": ["c++", "tree"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1568820188, "post_id": 57996135, "comment_id": 102398720, "body": "What you have is the right way to do it.  Is there a reason you want only a single function?"}, {"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1568820579, "post_id": 57996135, "comment_id": 102398955, "body": "@NathanOliver. I&#39;m not entirley convinced this is right. This is a (not tail callable) recursive function running on a binary tree which seemingly doens&#39;t have to be balanced. Its very likely that this function will overflow the stack in some use cases. Turning recursive to iterative seems like a good thing to do. (And thats how I read what his question is actually asking, but its unclear)"}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "reply_to_user": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 2, "creation_date": 1568820646, "post_id": 57996135, "comment_id": 102399001, "body": "@MikeVine That&#39;s not really what OP is asking... Combining both <code>height()</code> and <code>height(TreeNode* root)</code> into a single function will not make it tail recursive, nor iterative."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 0, "creation_date": 1568820661, "post_id": 57996135, "comment_id": 102399010, "body": "@MikeVine By right way, I mean right way to do it this way.  Whether or not recursion should be used at all is a different question."}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1568821818, "post_id": 57996135, "comment_id": 102399684, "body": "What exactly is &quot;right&quot; about using a method that does not use <i>any</i> of the information within its object (which is the case with the second version of <code>height</code>)?"}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1568821116, "post_id": 57996381, "comment_id": 102399278, "body": "Small suggestion: <code>return std::max(lheight, rheight) + 1</code>"}, {"owner": {"reputation": 7679, "user_id": 896012, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/05779413dbb3915fa5b2f3ed82d66007?s=128&d=identicon&r=PG", "display_name": "Gupta", "link": "https://stackoverflow.com/users/896012/gupta"}, "edited": false, "score": 2, "creation_date": 1568821118, "post_id": 57996381, "comment_id": 102399279, "body": "But <code>TreeNode</code> does not have a <code>height()</code> method."}, {"owner": {"reputation": 600, "user_id": 6703592, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/bdbeb38b8bd0369458b1d7b994bc9bbc?s=128&d=identicon&r=PG&f=1", "display_name": "user6703592", "link": "https://stackoverflow.com/users/6703592/user6703592"}, "edited": false, "score": 0, "creation_date": 1568821271, "post_id": 57996381, "comment_id": 102399358, "body": "for <code>root-&gt;left.height()</code>, I have the error <code>TreeNode* BinaryTree::root expression must have class type</code>"}, {"owner": {"reputation": 7679, "user_id": 896012, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/05779413dbb3915fa5b2f3ed82d66007?s=128&d=identicon&r=PG", "display_name": "Gupta", "link": "https://stackoverflow.com/users/896012/gupta"}, "reply_to_user": {"reputation": 600, "user_id": 6703592, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/bdbeb38b8bd0369458b1d7b994bc9bbc?s=128&d=identicon&r=PG&f=1", "display_name": "user6703592", "link": "https://stackoverflow.com/users/6703592/user6703592"}, "edited": false, "score": 1, "creation_date": 1568821329, "post_id": 57996381, "comment_id": 102399395, "body": "@user6703592 This is what I mentioned. You should move <code>height()</code> method to your <code>TreeNode</code> struct."}], "tags": [], "owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "is_accepted": true, "score": 3, "last_activity_date": 1568821384, "last_edit_date": 1568821384, "creation_date": 1568820937, "answer_id": 57996381, "question_id": 57996135, "link": "https://stackoverflow.com/questions/57996135/use-one-member-function-to-calculate-the-height-of-a-binary-tree-in-c/57996381#57996381", "title": "use one member function to calculate the height of a binary tree in C++", "body": "<p>I think this is what you're asking for; it just uses the method for computing a tree's own height on the subtrees, as opposed to calling a method to compute an <em>arbitrary</em> tree's height on the subtrees.</p>\n\n<pre><code>int height() {\n    if (!root)\n    {\n        return 0;\n    }\n    else\n    {\n        int lheight = root-&gt;left  ? root-&gt;left.height()  : 0;\n        int rheight = root-&gt;right ? root-&gt;right.height() : 0;\n        return lheight &gt; rheight ? lheight + 1 : rheight + 1;\n    }\n}\n</code></pre>\n\n<p><em>Update</em>: As @Gupta points out, <code>TreeNode</code> does not have a <code>height</code> method.  I would argue that it <em>should</em>, but that doesn't make this solution any less incorrect.</p>\n\n<p>Here's a version that can be added to <code>TreeNode</code>:</p>\n\n<pre><code>int height() {\n    int lheight = left ? left.height() : 0;\n    int rheight = right ? ight.height() : 0;\n    return std::max(lheight, rheight) + 1;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 1, "creation_date": 1568821739, "post_id": 57996462, "comment_id": 102399637, "body": "TBH this code is the right code as it remvoed the recursion.. And it answers the question. +1"}], "tags": [], "owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "is_accepted": false, "score": 1, "last_activity_date": 1568821285, "creation_date": 1568821285, "answer_id": 57996462, "question_id": 57996135, "link": "https://stackoverflow.com/questions/57996135/use-one-member-function-to-calculate-the-height-of-a-binary-tree-in-c/57996462#57996462", "title": "use one member function to calculate the height of a binary tree in C++", "body": "<p>Although it's less succinct, you can re-write the method to be iterative using an explicit stack:</p>\n\n<pre><code>int height() {\n    std::stack&lt;std::pair&lt;TreeNode *, int&gt; &gt; node_stack;\n    node_stack.push(std::make_pair(root, 1));\n    int height = 0;\n\n    while (!node_stack.empty()) {\n        auto node = node_stack.top();\n        node_stack.pop();\n\n        if (node.first) {\n            height = std::max(height, node.second);\n            node_stack.push(std::make_pair(node.first-&gt;left, node.second + 1));\n            node_stack.push(std::make_pair(node.first-&gt;right, node.second + 1));\n        }\n    }\n\n    return height;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 2, "last_activity_date": 1578807502, "last_edit_date": 1578807502, "creation_date": 1568821391, "answer_id": 57996496, "question_id": 57996135, "link": "https://stackoverflow.com/questions/57996135/use-one-member-function-to-calculate-the-height-of-a-binary-tree-in-c/57996496#57996496", "title": "use one member function to calculate the height of a binary tree in C++", "body": "<p>Answering question on its face value. Following code will combine two overloads of <code>height</code> into one:</p>\n\n<pre><code>class BinaryTree {\n    inline static const TreeNode sentinel;\n...\npublic:\nint height(const TreeNode* root_in = &amp;sentinel) const {\n    if (root_in == &amp;sentinel)\n        return height(root); \n\n    if (!root_in)\n        return 0;\n\n    int lheight = height(root_in-&gt;left);\n    int rheight = height(root_in-&gt;right);\n\n    return std::max(lheight, rheight) + 1;\n}\n</code></pre>\n"}], "owner": {"reputation": 600, "user_id": 6703592, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/bdbeb38b8bd0369458b1d7b994bc9bbc?s=128&d=identicon&r=PG&f=1", "display_name": "user6703592", "link": "https://stackoverflow.com/users/6703592/user6703592"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 57996381, "answer_count": 3, "score": 3, "last_activity_date": 1578807502, "creation_date": 1568820060, "last_edit_date": 1568820689, "question_id": 57996135, "link": "https://stackoverflow.com/questions/57996135/use-one-member-function-to-calculate-the-height-of-a-binary-tree-in-c", "title": "use one member function to calculate the height of a binary tree in C++", "body": "<p>Here is the code for calculating the height of a binary tree. We assume all the node values are positive int. I used the recursion of <code>height</code> function. Is it possible to combine the member functions <code>int height()</code> and  <code>int height(TreeNode* root)</code> into one function? It is easy to implement for one dimension case (linked list), but I have no idea for Tree.</p>\n\n<pre><code>    struct TreeNode\n    {\n        int val = 0;\n        TreeNode *left = NULL;\n        TreeNode *right = NULL;\n        TreeNode(int val): val(val){}\n    };\n\n    struct BinaryTree\n    {\n        TreeNode *root;\n        BinaryTree(TreeNode *root) : root(root) {}\n\n        int height() {\n            return height(root);\n        }\n\n        int height(TreeNode* root) {\n            if (!root)\n            {\n                return 0;\n            }\n            else\n            {\n                int lheight = height(root-&gt;left);\n                int rheight = height(root-&gt;right);\n\n                return lheight &gt; rheight ? lheight + 1 : rheight + 1;\n            }\n        }\n</code></pre>\n"}, {"tags": ["c++", "identifier"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1568820054, "post_id": 57996104, "comment_id": 102398643, "body": "Please <b><a href=\"https://stackoverflow.com/posts/57996104/edit\">edit</a></b> your question with an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> or <a href=\"http://sscce.org\" rel=\"nofollow noreferrer\">SSCCE (Short, Self Contained, Correct Example)</a>"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1568820177, "post_id": 57996104, "comment_id": 102398711, "body": "Who told you, that they are invalid identifier names? It <a href=\"https://wandbox.org/permlink/cX9L44W9RysxQfqf\" rel=\"nofollow noreferrer\">compiles successfully</a>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1568820414, "post_id": 57996104, "comment_id": 102398844, "body": "There is likely some missing context that renders them invalid as there is nothing in the language that forbids them."}, {"owner": {"reputation": 45, "user_id": 10595409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a17820757764bb10d7f15fc531c6ff9f?s=128&d=identicon&r=PG&f=1", "display_name": "limonade", "link": "https://stackoverflow.com/users/10595409/limonade"}, "edited": false, "score": 0, "creation_date": 1568820616, "post_id": 57996104, "comment_id": 102398984, "body": "There is a list of identifiers.   a) z b) 14okt c) ende d) mat.nr e) eingabedatum f) c2356 g) ws94/95 h) ausgabe-vektor i) zero j) x_achse k) RADIUS l) Var  According to Solution These are valid: a),c),e),f),i),j)  that means also that RADIUS and Var are invalid."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1568820795, "post_id": 57996104, "comment_id": 102399091, "body": "@limonade What book are you using?"}, {"owner": {"reputation": 1894, "user_id": 8473031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4878bfc9d6a80397a8446111fffa4dd?s=128&d=identicon&r=PG&f=1", "display_name": "RoQuOTriX", "link": "https://stackoverflow.com/users/8473031/roquotrix"}, "edited": false, "score": 0, "creation_date": 1568820801, "post_id": 57996104, "comment_id": 102399094, "body": "I could imagine the author wants to force a variable style, where you aren&#39;t allowed to name a variable with a starting upper case letter."}, {"owner": {"reputation": 45, "user_id": 10595409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a17820757764bb10d7f15fc531c6ff9f?s=128&d=identicon&r=PG&f=1", "display_name": "limonade", "link": "https://stackoverflow.com/users/10595409/limonade"}, "edited": false, "score": 0, "creation_date": 1568820808, "post_id": 57996104, "comment_id": 102399096, "body": "Book: C/C++ f&#252;r Studium und Beruf, link: <a href=\"https://link.springer.com/book/10.1007/978-3-658-18581-7\" rel=\"nofollow noreferrer\">link.springer.com/book/10.1007/978-3-658-18581-7</a>"}, {"owner": {"reputation": 45, "user_id": 10595409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a17820757764bb10d7f15fc531c6ff9f?s=128&d=identicon&r=PG&f=1", "display_name": "limonade", "link": "https://stackoverflow.com/users/10595409/limonade"}, "edited": false, "score": 0, "creation_date": 1568820940, "post_id": 57996104, "comment_id": 102399179, "body": "If we talk about books, is <a href=\"https://www.learncpp.com/\" rel=\"nofollow noreferrer\">learncpp.com</a> reliable ? It covers a lot of topics I need. But I have no experience with it but it is rated (on a website) as a good tutorial."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1568820978, "post_id": 57996104, "comment_id": 102399197, "body": "If you are not required to use that book, I would sugges getting <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">one of these</a>.  C/C++ is not a language so even that books title would make me want to throw it away."}, {"owner": {"reputation": 1894, "user_id": 8473031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4878bfc9d6a80397a8446111fffa4dd?s=128&d=identicon&r=PG&f=1", "display_name": "RoQuOTriX", "link": "https://stackoverflow.com/users/8473031/roquotrix"}, "edited": false, "score": 0, "creation_date": 1568821059, "post_id": 57996104, "comment_id": 102399243, "body": "Ok I read the lines in the book. Seems clearly wrong to me"}, {"owner": {"reputation": 45, "user_id": 10595409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a17820757764bb10d7f15fc531c6ff9f?s=128&d=identicon&r=PG&f=1", "display_name": "limonade", "link": "https://stackoverflow.com/users/10595409/limonade"}, "edited": false, "score": 0, "creation_date": 1568821218, "post_id": 57996104, "comment_id": 102399326, "body": "Thanks, I should change that book."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1568821549, "post_id": 57996104, "comment_id": 102399524, "body": "@limonade There are no known good online C++ tutorials."}, {"owner": {"reputation": 45, "user_id": 10595409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a17820757764bb10d7f15fc531c6ff9f?s=128&d=identicon&r=PG&f=1", "display_name": "limonade", "link": "https://stackoverflow.com/users/10595409/limonade"}, "edited": false, "score": 0, "creation_date": 1568821767, "post_id": 57996104, "comment_id": 102399650, "body": "The problem is that in my university they do not provide a Skript.  I failed on the test last summer and now I&#39;ll have the exam in Winter and according to my question it is clear that I&#39;m a beginner. :( So I&#39;m looking for something where I can learn cpp good."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1568826461, "post_id": 57996104, "comment_id": 102401671, "body": "I won&#39;t go as far as molbdnilo, but the vast majority of C++ tutorials do suck. This is in line with <a href=\"https://en.wikipedia.org/wiki/Sturgeon%27s_law\" rel=\"nofollow noreferrer\">Sturgeon&#39;s Revelation</a> and should be expected. As a result, unless you know enough of the language, usually from <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">reading books of good pedigree</a>, to be able to identify bad tutorials, you&#39;re probably going to find and learn from bad tutorials."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 10595409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a17820757764bb10d7f15fc531c6ff9f?s=128&d=identicon&r=PG&f=1", "display_name": "limonade", "link": "https://stackoverflow.com/users/10595409/limonade"}, "edited": false, "score": 0, "creation_date": 1568821608, "post_id": 57996470, "comment_id": 102399557, "body": "Thank you so much !"}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1568822249, "post_id": 57996470, "comment_id": 102399922, "body": "Not so sure about this being due to the rule. If you look at the supposed answers for the following question number 4, where you are supposed to identify &quot;self-defined names&quot; in a code sample, it says that only <code>prod</code> is one, while the sample contains a declaration <code>int a, b, prod;</code>. So <code>a</code> and <code>b</code> should clearly be included as well. The answer to question number 5 (&quot;write a program printing [...]&quot;) contains <code>#include &lt;iostreamh&gt;</code> [sic!]. I think they were just sloppy in writing out the answers."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1568825308, "post_id": 57996470, "comment_id": 102401252, "body": "Or sloppy and using TurboC++."}], "tags": [], "owner": {"reputation": 1894, "user_id": 8473031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4878bfc9d6a80397a8446111fffa4dd?s=128&d=identicon&r=PG&f=1", "display_name": "RoQuOTriX", "link": "https://stackoverflow.com/users/8473031/roquotrix"}, "is_accepted": false, "score": -2, "last_activity_date": 1568822067, "last_edit_date": 1592644375, "creation_date": 1568821308, "answer_id": 57996470, "question_id": 57996104, "link": "https://stackoverflow.com/questions/57996104/why-is-var-or-radius-invalid-for-a-typename-identifier-in-c/57996470#57996470", "title": "Why is Var or RADIUS invalid for a typename (identifier) in C++?", "body": "<p>The book quotes:</p>\n<blockquote>\n<p>C/C++-Konvention (nicht zwingend)</p>\n<p>\u00dcblicherweise schreibt man Variablen- und Funktionsnamen in Kleinbuchstaben,\nsymbolische Konstanten dagegen in Gro\u00dfbuchstaben</p>\n</blockquote>\n<p>English:</p>\n<blockquote>\n<p>C/C++ Convention (not forced):</p>\n<p>In general, variables and functions are written with lower-case letters,\nsymbolic constants on the other hand with upper-case letters</p>\n</blockquote>\n<p>So the author wants to force his recommended style in this question, which is asked really bad, because he only asks which identifiers are valid, not which are &quot;good&quot;</p>\n"}], "owner": {"reputation": 45, "user_id": 10595409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a17820757764bb10d7f15fc531c6ff9f?s=128&d=identicon&r=PG&f=1", "display_name": "limonade", "link": "https://stackoverflow.com/users/10595409/limonade"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 1, "answer_count": 1, "score": -3, "last_activity_date": 1568822067, "creation_date": 1568819967, "question_id": 57996104, "link": "https://stackoverflow.com/questions/57996104/why-is-var-or-radius-invalid-for-a-typename-identifier-in-c", "title": "Why is Var or RADIUS invalid for a typename (identifier) in C++?", "body": "<p><strong>Situation:</strong>\nI'm learning C++ whth a book and theres an excercise to dertemine whether an identifier/typename is valid or not. </p>\n\n<p>My mistakes were that the following identifier/typename I said to be valid. </p>\n\n<p>a) RADUIS \nb) Var</p>\n\n<p><strong>What i did afterwards:</strong> \nI checked if they are reserved, but they're not. </p>\n\n<p><strong>Question:</strong>\nWhy are RADIUS and Var not allowed to use them as identifiers ?</p>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 1, "last_activity_date": 1568819867, "last_edit_date": 1592644375, "creation_date": 1568819867, "answer_id": 57996077, "question_id": 57995973, "link": "https://stackoverflow.com/questions/57995973/const-but-not-constexpr-used-as-the-built-in-array-size/57996077#57996077", "title": "const (but not constexpr) used as the built-in array size", "body": "<blockquote>\n<pre><code>// n is not a constant expression type!\n</code></pre>\n</blockquote>\n<p>But it is.  Per <a href=\"https://timsong-cpp.github.io/cppwp/expr.const#3\" rel=\"nofollow noreferrer\">[expr.const]/3</a></p>\n<blockquote>\n<p>A variable is usable in constant expressions after its initializing declaration is encountered if it is a constexpr variable, or it is a constant-initialized variable of reference type or of const-qualified integral or enumeration type. An object or reference is usable in constant expressions if it is [...]</p>\n<ul>\n<li>a complete temporary object of non-volatile const-qualified integral or enumeration type that is initialized with a constant expression.</li>\n</ul>\n</blockquote>\n<p>So, if you have a <code>const</code> integer intialized with a constant expression then you still have a constant expression as nothing can change.  This is a rule that existed before <code>constexpr</code> was ever a thing as it allowed programmers to initialize arrays with constant variables instead of using macros.</p>\n<blockquote>\n<p>Furthermore, if the compiler is smart enough to see that n is initialized with 5, then why does the following not compile:</p>\n</blockquote>\n<p>Because the integer is not <code>const</code> so it could be changed.  Even though in your case you can prove it can't change, in general you can't so it is just not allowed.</p>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 4, "last_activity_date": 1568821467, "last_edit_date": 1568821467, "creation_date": 1568819957, "answer_id": 57996102, "question_id": 57995973, "link": "https://stackoverflow.com/questions/57995973/const-but-not-constexpr-used-as-the-built-in-array-size/57996102#57996102", "title": "const (but not constexpr) used as the built-in array size", "body": "<blockquote>\n  <p>n is not a constant expression type!</p>\n</blockquote>\n\n<p>There is no such thing as a constant expression <strong>type</strong>. <code>n</code> in that example is a expression, and it is in fact a constant expression. And that is why it can be used as the array size.</p>\n\n<p>It is not necessary for a variable to be declared <code>constexpr</code> in order for its name to be a constant expression. What <code>constexpr</code> does for a variable, is the enforcement of compile time constness. Examples:</p>\n\n<pre><code>int a = 42;\n</code></pre>\n\n<p>Even though 42 is a consant expression, <code>a</code> is not; Its value may change at runtime.</p>\n\n<pre><code>const int b = 42;\n</code></pre>\n\n<p><code>b</code> is a constant expression. Its value is known at compile time</p>\n\n<pre><code>const int c = rand();\n</code></pre>\n\n<p><code>rand()</code> is not a constant expression, and so <code>c</code> is neither. Its value is determined at runtime, but may not change after initialisation. </p>\n\n<pre><code>constexpr int d = 42;\n</code></pre>\n\n<p><code>d</code> is a constant expression, just like <code>b</code>.</p>\n\n<pre><code>constexpr int f = rand();\n</code></pre>\n\n<p>Does not compile, because constexpr variables must be initialised with a constant expression.</p>\n\n<hr>\n\n<blockquote>\n  <p>then why does the following not compile:</p>\n</blockquote>\n\n<p>Because the rules of the language don't allow it. The value of <code>n</code> is not compile time constant. The value of a non-const variable can change at runtime.</p>\n\n<p>The language cannot have a rule that some value doesn't change at runtime, then it is a constant expression. That would not be of any use to the programmer since they cannot assume which compiler will be able to prove the constness of which variable.</p>\n\n<p>The language has to exactly specify the cases where an expression is constant. It would also be infeasible to specify that a non-const variable is a constant expression if it hasn't been modified before its use, because it is impossible to prove in most cases, even though you've found one case where the proof happens to be easy.</p>\n"}, {"tags": [], "owner": {"reputation": 465, "user_id": 11241587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82bea334bb29226f73a25b431b3e48b5?s=128&d=identicon&r=PG&f=1", "display_name": "Theodor Badea", "link": "https://stackoverflow.com/users/11241587/theodor-badea"}, "is_accepted": false, "score": 0, "last_activity_date": 1568820669, "creation_date": 1568820669, "answer_id": 57996307, "question_id": 57995973, "link": "https://stackoverflow.com/questions/57995973/const-but-not-constexpr-used-as-the-built-in-array-size/57996307#57996307", "title": "const (but not constexpr) used as the built-in array size", "body": "<p>A value declared <strong>constexpr</strong> means that this value does not change and is <strong>known during compile time</strong>.</p>\n\n<p>A value declared <strong>const</strong> means that this value does not change after initialization, but it is not mandatory to be known during compile time.  In other words, a constexpr is const, but a const is not constexpr.</p>\n\n<p>Your \"Code 3\" example doesn't work because you need a constant known at compile time in order to allocate memory for a vector, so you need a <strong>constexpr</strong>.</p>\n"}], "owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 57996102, "answer_count": 3, "score": 3, "last_activity_date": 1568821467, "creation_date": 1568819525, "question_id": 57995973, "link": "https://stackoverflow.com/questions/57995973/const-but-not-constexpr-used-as-the-built-in-array-size", "title": "const (but not constexpr) used as the built-in array size", "body": "<p>I understand that the size of the built-in array must be a constant expression:</p>\n\n<pre><code>// Code 1\nconstexpr int n = 5;\ndouble arr[n];\n</code></pre>\n\n<p>I do not understand why the following compiles:</p>\n\n<pre><code>// Code 2\nconst int n = 5;\ndouble arr[n]; // n is not a constant expression type!\n</code></pre>\n\n<p>Furthermore, if the compiler is smart enough to see that <code>n</code> is initialized with 5, then why does the following not compile:</p>\n\n<pre><code>// Code 3\nint n = 5;\ndouble arr[n]; // n is initialized with 5, so how is this different from Code 2?\n</code></pre>\n\n<p>P.S. <a href=\"https://stackoverflow.com/a/26176025/2725810\">This</a> post answers using quotes from the standard, which I do not understand. I will very much appreciate an answer that uses a simpler language.</p>\n"}, {"tags": ["java", "c++", "language-agnostic", "type-systems"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 6, "creation_date": 1568820157, "post_id": 57995970, "comment_id": 102398695, "body": "point three can be answered with Yes, and that makes points 1 and 2 kinda messy."}, {"owner": {"reputation": 22489, "user_id": 3208297, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/KzpAh.jpg?s=128&g=1", "display_name": "blue_note", "link": "https://stackoverflow.com/users/3208297/blue-note"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1568820496, "post_id": 57995970, "comment_id": 102398910, "body": "@user4581301: thanks. I suspected so, just wanted some example of enforcing or not enforcing types at runtime"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1568821089, "post_id": 57995970, "comment_id": 102399264, "body": "C++&#39;s goal is to get as much out as possible at compile time, so unless you ask for run-time typing, it&#39;s gone, with the variables reduced to reduced to offsets in memory. Unless polymorphism is involved asking for <code>typeid</code> in the program is almost certainly replaced at compile-time with the correct type information. Java I don&#39;t know nearly well enough anymore (and assuming I ever did is risky) to comment on."}, {"owner": {"reputation": 21891, "user_id": 1243762, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b9b83cf6ca76699d7abfbba07f4675a3?s=128&d=identicon&r=PG&f=1", "display_name": "Guy Coder", "link": "https://stackoverflow.com/users/1243762/guy-coder"}, "edited": false, "score": 1, "creation_date": 1568893940, "post_id": 57995970, "comment_id": 102424938, "body": "<code>example of enforcing or not enforcing types at runtime</code> See: <a href=\"https://en.wikipedia.org/wiki/Hindley%E2%80%93Milner_type_system\" rel=\"nofollow noreferrer\">Hindley\u2013Milner (HM) type system</a>"}, {"owner": {"reputation": 21891, "user_id": 1243762, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b9b83cf6ca76699d7abfbba07f4675a3?s=128&d=identicon&r=PG&f=1", "display_name": "Guy Coder", "link": "https://stackoverflow.com/users/1243762/guy-coder"}, "edited": false, "score": 0, "creation_date": 1568894837, "post_id": 57995970, "comment_id": 102425422, "body": "<code>thanks.</code> I don&#39;t know if thanks is the right word. If you dig into it, it will be more like <code>agony and ecstasy</code>"}, {"owner": {"reputation": 22489, "user_id": 3208297, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/KzpAh.jpg?s=128&g=1", "display_name": "blue_note", "link": "https://stackoverflow.com/users/3208297/blue-note"}, "reply_to_user": {"reputation": 21891, "user_id": 1243762, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b9b83cf6ca76699d7abfbba07f4675a3?s=128&d=identicon&r=PG&f=1", "display_name": "Guy Coder", "link": "https://stackoverflow.com/users/1243762/guy-coder"}, "edited": false, "score": 0, "creation_date": 1568894894, "post_id": 57995970, "comment_id": 102425455, "body": "@GuyCoder: I suppose so. It produces the best static inference system I have seen."}, {"owner": {"reputation": 21891, "user_id": 1243762, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b9b83cf6ca76699d7abfbba07f4675a3?s=128&d=identicon&r=PG&f=1", "display_name": "Guy Coder", "link": "https://stackoverflow.com/users/1243762/guy-coder"}, "edited": false, "score": 0, "creation_date": 1568895223, "post_id": 57995970, "comment_id": 102425633, "body": "If you really like to learn more about type systems (<a href=\"https://cs.stackexchange.com/questions/9548/%ce%bb-calculus-extensions-meaning-of-extension-symbols\">examples</a>) then get &quot;<a href=\"http://www.cis.upenn.edu/~bcpierce/tapl/\" rel=\"nofollow noreferrer\">Types and Programming Languages</a>&quot; (<a href=\"http://www.worldcat.org/title/types-and-programming-languages/oclc/51958338&amp;referer=brief_results\" rel=\"nofollow noreferrer\">WorldCat</a>) by Benjamin C. Pierce."}, {"owner": {"reputation": 21891, "user_id": 1243762, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b9b83cf6ca76699d7abfbba07f4675a3?s=128&d=identicon&r=PG&f=1", "display_name": "Guy Coder", "link": "https://stackoverflow.com/users/1243762/guy-coder"}, "edited": false, "score": 1, "creation_date": 1569521301, "post_id": 57995970, "comment_id": 102633488, "body": "Of interest: <a href=\"https://softwarefoundations.cis.upenn.edu\" rel=\"nofollow noreferrer\">Software Foundations</a>"}], "answers": [{"comments": [{"owner": {"reputation": 383, "user_id": 6858195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1ff63a4f83525271de63f0a57b545e3?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin Berman", "link": "https://stackoverflow.com/users/6858195/benjamin-berman"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1568821347, "post_id": 57996305, "comment_id": 102399409, "body": "@user4581301 Edited"}], "tags": [], "owner": {"reputation": 383, "user_id": 6858195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1ff63a4f83525271de63f0a57b545e3?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin Berman", "link": "https://stackoverflow.com/users/6858195/benjamin-berman"}, "is_accepted": false, "score": 1, "last_activity_date": 1568821263, "last_edit_date": 1568821263, "creation_date": 1568820668, "answer_id": 57996305, "question_id": 57995970, "link": "https://stackoverflow.com/questions/57995970/is-static-typing-enforced-at-compile-time-or-run-time/57996305#57996305", "title": "Is static typing enforced at compile-time or run-time?", "body": "<p>In Java, some type information is kept at runtime.  This is why you can get <code>java.lang.ClassCastException</code>s.  Not all of it is, though.  In particular, Generics in Java are implemented using type erasure, meaning that, at runtime, a <code>ArrayList&lt;String&gt;</code> looks like a <code>ArrayList&lt;Integer&gt;</code> (it won't look like a <code>HashSet&lt;String&gt;</code>, though).</p>\n\n<p>In other languages the behavior differs.  In C, for instance, you can do all sorts of things at runtime (e.g. copy a pointer to a string into a variable containing a pointer to an array of integers) without errors, despite the static typing.</p>\n"}, {"tags": [], "owner": {"reputation": 16607, "user_id": 267482, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fd69625825bed998b63fef68a23592aa?s=128&d=identicon&r=PG", "display_name": "bobah", "link": "https://stackoverflow.com/users/267482/bobah"}, "is_accepted": false, "score": 1, "last_activity_date": 1568823561, "creation_date": 1568823561, "answer_id": 57997030, "question_id": 57995970, "link": "https://stackoverflow.com/questions/57995970/is-static-typing-enforced-at-compile-time-or-run-time/57997030#57997030", "title": "Is static typing enforced at compile-time or run-time?", "body": "<p>Types in C++ are for the compiler and are compile time. Templates are <em>not</em> generics, they are actually instructions for the compiler to generate static type-specific code. For instance, you can call a static method of a template argument, which is syntactically impossible in Java.</p>\n\n<p>C++ runtime type information is available via <a href=\"https://en.cppreference.com/w/cpp/header/typeinfo\" rel=\"nofollow noreferrer\">typeid/typeinfo</a>, and via the <a href=\"https://en.cppreference.com/w/cpp/language/dynamic_cast\" rel=\"nofollow noreferrer\">dynamic_cast</a> operator (the latter may use the former). But even this can be disabled during the compilation to save space.</p>\n"}], "owner": {"reputation": 22489, "user_id": 3208297, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/KzpAh.jpg?s=128&g=1", "display_name": "blue_note", "link": "https://stackoverflow.com/users/3208297/blue-note"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1568893966, "creation_date": 1568819509, "last_edit_date": 1568893966, "question_id": 57995970, "link": "https://stackoverflow.com/questions/57995970/is-static-typing-enforced-at-compile-time-or-run-time", "title": "Is static typing enforced at compile-time or run-time?", "body": "<p>Mostly asking about java/c++ with which I'm mainly familiar.</p>\n\n<ul>\n<li>Is the type information used to check correctness only at compile time and then discarded? (ie. does java work like python after compilation?)</li>\n<li>Is the type information kept and used again for checking during runtime?</li>\n<li>Does this behavior differ among languages</li>\n</ul>\n"}, {"tags": ["c++", "comparison", "c-strings", "strcmp"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 4, "creation_date": 1568819415, "post_id": 57995914, "comment_id": 102398291, "body": "Why aren&#39;t you using <code>std::string input;</code> for storing the input, and <code>std::getline (std::cin, input);</code> for reading the input?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3171451"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1568819588, "post_id": 57995914, "comment_id": 102398395, "body": "Oh thx you sir, I did wrong, std::cin.getline(input) instead of std::getling(std::cin,input). Thx"}], "answers": [{"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1568821410, "last_edit_date": 1568821410, "creation_date": 1568819495, "answer_id": 57995967, "question_id": 57995914, "link": "https://stackoverflow.com/questions/57995914/char-type-declaration-and-verification/57995967#57995967", "title": "char type declaration and verification", "body": "<p>In expressions (with rare exception as for example when they are used in sizeof operator) arrays are implicitly converted to pointers to their first elements.</p>\n\n<p>In this condition</p>\n\n<pre><code>while(input != \"1\")\n</code></pre>\n\n<p>there are compared addresses of the first character of the array <code>input</code> and of the first character of the string literal <code>\"1\"</code>. </p>\n\n<p>Use instead standard C function <code>strcmp</code> declared in the header <code>&lt;cstring&gt;</code>.</p>\n\n<p>Pay attention to that in your code snippet the array <code>input</code> is not initialized.  So before comparing it with something you have to initialize it.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3171451"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568821410, "creation_date": 1568819335, "last_edit_date": 1568821251, "question_id": 57995914, "link": "https://stackoverflow.com/questions/57995914/char-type-declaration-and-verification", "title": "char type declaration and verification", "body": "<p>How to check the char type? my variable input need to be a char, cause it contain letters and numbers.\nIf I use string instead of char, I don't have error with while, but I have error with cin.getline(input,10)</p>\n\n<pre><code>char input[10];\nwhile(input != \"1\") //Error: result of comparison against a string literal is unspecified(use strncmp //instead)\n{\ncin.getline(input, 10);\n}\n</code></pre>\n"}, {"tags": ["c++", "list", "arduino", "maps", "fastled"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1568819445, "post_id": 57995853, "comment_id": 102398310, "body": "Warning: arrays have no member functions. <code>int led[] = list[i];</code> isn&#39;t proper either."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1568819633, "post_id": 57995853, "comment_id": 102398415, "body": "<code>std::vector</code> of <code>std::pair</code> may be suited to that you want. There&#39;s a lot of overhead in C++&#39;s <code>map</code> that you aren&#39;t going to be using."}], "owner": {"reputation": 80, "user_id": 11434501, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5WmNzvC0QUI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdZzkQHiNb8MnV6R7GulcRUDaF8VA/mo/photo.jpg?sz=128", "display_name": "Igor D", "link": "https://stackoverflow.com/users/11434501/igor-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1569333430, "creation_date": 1568819114, "last_edit_date": 1569333430, "question_id": 57995853, "link": "https://stackoverflow.com/questions/57995853/arduino-maps-or-lists-for-led-board-animations", "title": "Arduino Maps or Lists for LED board animations", "body": "<p>im working with an arduino attached with 6 LED programmable strips and the FASTLED library. for animations i need to efficiently pass data to methods to create easy animations. </p>\n\n<p>the leds are in a grid of 6 X 30, and the only way to light them is to specify the strip and the index on that strip. </p>\n\n<p>i currently have this piece of code to pass the strip and leds through easily:</p>\n\n<pre><code>//i want to pass the data through as this: setArrayLeds(   [{1,4,5,6},{2,4,5,6}] );\n//where the first index per array is the led strip, the latter the leds.\n\nvoid setArrayLeds(int list[]){\n    for(int i = 0; i &lt; list.size(); ++i){\n\n       int led[] = list[i];\n\n       for(int j = 1; j &lt; led.length(); j++){\n\n          //array with ledstrip individally assignable\n          ArrayOfLeds[led[0]][led[j]].setRGB(255,0,0);\n\n        }\n\n      }\n}\n</code></pre>\n\n<p>but even better option would be to use maps to pass data around, such as this code </p>\n\n<pre><code>setMapsLeds( map containing &gt; 1:{1,2,3,4}, 2:{5,6,7}, 3:{8,9,10});\n</code></pre>\n\n<p>where a function will iterate over the keys and light the corresponding leds on the right ledstrip. </p>\n\n<p>do you guys have any idea how to make this possible </p>\n"}, {"tags": ["c++", "regex"], "answers": [{"comments": [{"owner": {"reputation": 407, "user_id": 5696425, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6112ba87f3610be62d8a0263027f638b?s=128&d=identicon&r=PG&f=1", "display_name": "ZoOl007", "link": "https://stackoverflow.com/users/5696425/zool007"}, "edited": false, "score": 0, "creation_date": 1568819314, "post_id": 57995820, "comment_id": 102398237, "body": "I think it&#39;s not 100% correct. Paste the data and the regex in regex101.com and you&#39;ll see. The 3th line in the data for example gives wrong results."}, {"owner": {"reputation": 407, "user_id": 5696425, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6112ba87f3610be62d8a0263027f638b?s=128&d=identicon&r=PG&f=1", "display_name": "ZoOl007", "link": "https://stackoverflow.com/users/5696425/zool007"}, "edited": false, "score": 0, "creation_date": 1568819967, "post_id": 57995820, "comment_id": 102398590, "body": "correction: the 3th item per line gives wrong results in results[1]"}], "tags": [], "owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "is_accepted": false, "score": 0, "last_activity_date": 1568818991, "creation_date": 1568818991, "answer_id": 57995820, "question_id": 57995619, "link": "https://stackoverflow.com/questions/57995619/match-strings-between-outer-single-quotes/57995820#57995820", "title": "match strings between outer single quotes", "body": "<p>You already have a group in your regex - you can read it.</p>\n\n<p>If you have <code>std::smatch</code> called <code>results</code> (or whatever you use as <a href=\"https://en.cppreference.com/w/cpp/regex/match_results\" rel=\"nofollow noreferrer\"><code>std::match_results</code></a>), then <a href=\"https://en.cppreference.com/w/cpp/regex/match_results/operator_at\" rel=\"nofollow noreferrer\"><code>results[1]</code></a> will give you the first (and only) group - provided that string was actually matched, otherwise it's UB.</p>\n\n<pre><code>std::regex r {\"\\'(\\\\.|[^\\'])*\\'\"};\nstd::string input = \"compose '`' 'A' to '\\\\C0'\";\nstd::smatch results;\nif(std::regex_search(input, results, r)) {\n    std::cout &lt;&lt; results[0] &lt;&lt; std::endl  //full match\n              &lt;&lt; results[1] &lt;&lt; std::endl; //first group\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "is_accepted": false, "score": 1, "last_activity_date": 1568820262, "creation_date": 1568820262, "answer_id": 57996186, "question_id": 57995619, "link": "https://stackoverflow.com/questions/57995619/match-strings-between-outer-single-quotes/57996186#57996186", "title": "match strings between outer single quotes", "body": "<p>Your regex is not optimal. I don't know what exactly you are allowed to match, but from the data that you have given us this regex will do the trick: <code>\\s\\'(\\S+?\\'?)\\'</code>.</p>\n\n<pre><code>std::regex reg(R\"(\\s\\'(\\S+?\\'?)\\')\");\nstd::string input = R\"(\ncompose '`' 'A' to '\\C0'\ncompose '`' 'a' to '\\E0'\ncompose '\\'' 'A' to '\\C1'\ncompose '\\'' 'a' to '\\E1'\ncompose '^' 'A' to '\\C2'\ncompose '^' 'a' to '\\E2')\";\n\nauto begin = std::sregex_iterator(input.begin(), input.end(), reg);\nauto end = std::sregex_iterator();\nfor (auto it = begin; it != end; ++it)\n    std::cout &lt;&lt; (*it)[1].str() &lt;&lt; '\\n';\n</code></pre>\n\n<p><a href=\"https://godbolt.org/z/GPPXAO\" rel=\"nofollow noreferrer\">Here</a> is a full example.</p>\n"}, {"comments": [{"owner": {"reputation": 407, "user_id": 5696425, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6112ba87f3610be62d8a0263027f638b?s=128&d=identicon&r=PG&f=1", "display_name": "ZoOl007", "link": "https://stackoverflow.com/users/5696425/zool007"}, "edited": false, "score": 0, "creation_date": 1568839250, "post_id": 57996501, "comment_id": 102406683, "body": "Thx. I chose yours as the accepted answer as is processes slightly faster than Timo&#39;s regex."}], "tags": [], "owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "is_accepted": true, "score": 1, "last_activity_date": 1568821410, "creation_date": 1568821410, "answer_id": 57996501, "question_id": 57995619, "link": "https://stackoverflow.com/questions/57995619/match-strings-between-outer-single-quotes/57996501#57996501", "title": "match strings between outer single quotes", "body": "<p>Your regex needs a slight modification, capturing a group multiple times doesn't really work. What you really want is a group containing zero or more copies of your <code>\\\\.|[^\\']</code> expresssion. You can do this with a non capturing group which is written by adding <code>?:</code> inside the opening parenthesis of the group. The full regex is then:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>\\'((?:\\\\.|[^\\'])*)\\'\n</code></pre>\n\n<p>You can try it out on <a href=\"https://regex101.com/r/n0iksu/1\" rel=\"nofollow noreferrer\">regex101</a>.</p>\n"}], "owner": {"reputation": 407, "user_id": 5696425, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6112ba87f3610be62d8a0263027f638b?s=128&d=identicon&r=PG&f=1", "display_name": "ZoOl007", "link": "https://stackoverflow.com/users/5696425/zool007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 57996501, "answer_count": 3, "score": 0, "last_activity_date": 1568821410, "creation_date": 1568818334, "last_edit_date": 1568820838, "question_id": 57995619, "link": "https://stackoverflow.com/questions/57995619/match-strings-between-outer-single-quotes", "title": "match strings between outer single quotes", "body": "<p>I have the following data:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>compose '`' 'A' to '\\C0'\ncompose '`' 'a' to '\\E0'\ncompose '\\'' 'A' to '\\C1'\ncompose '\\'' 'a' to '\\E1'\ncompose '^' 'A' to '\\C2'\ncompose '^' 'a' to '\\E2'\n</code></pre>\n\n<p>All the quotes are single quotes</p>\n\n<p>I have this regex </p>\n\n<pre><code>\\'(\\\\.|[^\\'])*\\'\n</code></pre>\n\n<p>It matches what I want in the full matches but it includes the outer single quotes.</p>\n\n<p>This string <code>compose '\\'' 'A' to '\\C1'</code> gives me <code>'\\''</code> and <code>'A'</code> and <code>'\\C1'</code> but I need <code>\\'</code> and <code>A</code> and <code>\\C1</code></p>\n\n<p>I could get away with removing the first and last single quote from the string but I'd like to do it with regex.</p>\n\n<p>How can I obtain the result I want please?</p>\n\n<p>As for the regex engine, it's for use in a qt5 core application, so c++</p>\n"}, {"tags": ["c++", "inline", "icc"], "comments": [{"owner": {"reputation": 51, "user_id": 2200087, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8accc354f33db1811b7840d09a71fe9?s=128&d=identicon&r=PG", "display_name": "Mr.P", "link": "https://stackoverflow.com/users/2200087/mr-p"}, "edited": false, "score": 0, "creation_date": 1568987679, "post_id": 57995604, "comment_id": 102461934, "body": "I found that adding <code>-ipo</code> for interprocedural optimization did eliminate the error warnings and, ostensibly, improved performance."}], "owner": {"reputation": 51, "user_id": 2200087, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8accc354f33db1811b7840d09a71fe9?s=128&d=identicon&r=PG", "display_name": "Mr.P", "link": "https://stackoverflow.com/users/2200087/mr-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1568818280, "creation_date": 1568818280, "question_id": 57995604, "link": "https://stackoverflow.com/questions/57995604/excessive-inline-warnings-with-intel-compiler", "title": "Excessive inline warnings with intel compiler", "body": "<p>I am compiling an HPC code using the intel c++ compiler. There are several functions which must be inlined so I compile with the <code>-Winline</code> option to warn if they are not inlined correctly.</p>\n\n<p>However, with <code>-Winline</code> turned on, there appear to be warnings generated for <em>every</em> function specified in the code that was not inlined, including those that were not specified as inline. I can remove the warning for individual functions by adding <code>__attribute__((noinline))</code> before the function, but I do not want to have to do this for every function in the code.</p>\n\n<p>How do I tell the intel compiler to only provide warnings for functions which are specified as inline and have not been inlined? </p>\n"}, {"tags": ["c++", "lua", "integration-testing", "embedded-linux"], "comments": [{"owner": {"reputation": 5746, "user_id": 4984564, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9bc286af6678a63ceb881eaf9e966f5f?s=128&d=identicon&r=PG", "display_name": "DarkWiiPlayer", "link": "https://stackoverflow.com/users/4984564/darkwiiplayer"}, "edited": false, "score": 0, "creation_date": 1568820449, "post_id": 57995585, "comment_id": 102398877, "body": "So, to clarify, Lua is just what you plan to use for testing, but not what you want to use to mock the device, right?"}, {"owner": {"reputation": 31, "user_id": 9511149, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-izslf3FAcS4/AAAAAAAAAAI/AAAAAAAABVI/RcigDcdb1YQ/photo.jpg?sz=128", "display_name": "Mehmet Sergen Ergen", "link": "https://stackoverflow.com/users/9511149/mehmet-sergen-ergen"}, "reply_to_user": {"reputation": 5746, "user_id": 4984564, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9bc286af6678a63ceb881eaf9e966f5f?s=128&d=identicon&r=PG", "display_name": "DarkWiiPlayer", "link": "https://stackoverflow.com/users/4984564/darkwiiplayer"}, "edited": false, "score": 0, "creation_date": 1568876737, "post_id": 57995585, "comment_id": 102415748, "body": "I will mock devices, send mocked input to C++ code. And I will use mocked-input in C++ code , use with Lua. (only integration tests) Actually, I want to write blackbox test (integration test). I work on AGL.  Example above (mouse-related ) is for your umockdev testing.  So, I will mock input device. Such as, volume change button, forward-backforward button."}, {"owner": {"reputation": 31, "user_id": 9511149, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-izslf3FAcS4/AAAAAAAAAAI/AAAAAAAABVI/RcigDcdb1YQ/photo.jpg?sz=128", "display_name": "Mehmet Sergen Ergen", "link": "https://stackoverflow.com/users/9511149/mehmet-sergen-ergen"}, "reply_to_user": {"reputation": 5746, "user_id": 4984564, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9bc286af6678a63ceb881eaf9e966f5f?s=128&d=identicon&r=PG", "display_name": "DarkWiiPlayer", "link": "https://stackoverflow.com/users/4984564/darkwiiplayer"}, "edited": false, "score": 0, "creation_date": 1568903479, "post_id": 57995585, "comment_id": 102430831, "body": "I am sorry I forgot to answer your question. Exactly yes :)  Do you want to recommend anything else?"}], "owner": {"reputation": 31, "user_id": 9511149, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-izslf3FAcS4/AAAAAAAAAAI/AAAAAAAABVI/RcigDcdb1YQ/photo.jpg?sz=128", "display_name": "Mehmet Sergen Ergen", "link": "https://stackoverflow.com/users/9511149/mehmet-sergen-ergen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 284, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1568818196, "creation_date": 1568818196, "question_id": 57995585, "link": "https://stackoverflow.com/questions/57995585/how-to-create-a-fake-device-file-that-accepts-input-from-a-c-program", "title": "How to create a fake device file that accepts input from a C++ program?", "body": "<p>I work on embedded linux. I want to mocks Linux devices for creating integration tests.\nI need to send input from fake devices. I will integrate in C++ code.\nActually if I do this, I will write Integration Test with Lua.\nWould you like recommend any solution about mock input device?</p>\n\n<p><strong>I used umockdev. But I have a problem about record device. I didn't record anything into ioctl file.</strong></p>\n\n<p>************************** Touchpad ****************************</p>\n\n<pre><code>sudo umockdev-record /dev/input/event5 &gt; mouse.umockdev\n\nsudo umockdev-record -i /dev/input/event5=mouse.ioctl -e /dev/input/event5=mouse.events -- evtest /dev/input/event5\n\numockdev-run -d mouse.umockdev -i /dev/input/event5=mouse.ioctl -e /dev/input/event5=mouse.events -- evtest /dev/input/event5\n</code></pre>\n\n<p>After this step I got following error message Step: \"umockdev-run -d</p>\n\n<blockquote>\n  <p>event-kbd.umockdev -i /dev/input/event10=event-kbd.ioctl -e\n  /dev/input/event10=event-kbd.events -- evtest /dev/input/event10\" \n  \"ERROR: libumockdev-preload: failed to load ioctl record file for\n  /dev/input/event10: empty or invalid format\"</p>\n</blockquote>\n\n<p>I didn't get any error during installation. Probably umockdev didn't record to \"*.ioctl\" file  anything which didn't contain anything. </p>\n\n<blockquote>\n  <p>(Only contain this one: \"@DEV /dev/input/event10\" )</p>\n</blockquote>\n"}, {"tags": ["c++", "qt", "qt-creator", "qmake"], "comments": [{"owner": {"reputation": 1324, "user_id": 8147455, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/c0f9204eec46dea673aa01464b496362?s=128&d=identicon&r=PG&f=1", "display_name": "Xatyrian", "link": "https://stackoverflow.com/users/8147455/xatyrian"}, "edited": false, "score": 0, "creation_date": 1568818502, "post_id": 57995545, "comment_id": 102397782, "body": "Have you run qmake again ?"}, {"owner": {"reputation": 575, "user_id": 1521297, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/75b3bf6a7896c108b25c751444f49505?s=128&d=identicon&r=PG", "display_name": "Greg B", "link": "https://stackoverflow.com/users/1521297/greg-b"}, "reply_to_user": {"reputation": 1324, "user_id": 8147455, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/c0f9204eec46dea673aa01464b496362?s=128&d=identicon&r=PG&f=1", "display_name": "Xatyrian", "link": "https://stackoverflow.com/users/8147455/xatyrian"}, "edited": false, "score": 0, "creation_date": 1568819030, "post_id": 57995545, "comment_id": 102398072, "body": "Yes. After running qmake, the build.sh script has changed it&#39;s internal build number"}], "answers": [{"comments": [{"owner": {"reputation": 10774, "user_id": 4419802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d0f1bd19b8b8481b6b3e812691c1ccb?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/4419802/matt"}, "edited": false, "score": 1, "creation_date": 1568824258, "post_id": 57996382, "comment_id": 102400819, "body": "Actually, a colon in qmake is a condition(s)/command delimiter, so it can be used after &quot;else&quot;, but a newline should not be used then: <code>else:DEFINES+=BUILD_NUM=0</code>."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 10774, "user_id": 4419802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d0f1bd19b8b8481b6b3e812691c1ccb?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/4419802/matt"}, "edited": false, "score": 0, "creation_date": 1568824546, "post_id": 57996382, "comment_id": 102400945, "body": "@Matt Yes, I am also thinking about it by analyzing similar expressions since the docs does not explicitly state it, I will add it to my answer if there is no problem"}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 3, "last_activity_date": 1568824695, "last_edit_date": 1568824695, "creation_date": 1568820938, "answer_id": 57996382, "question_id": 57995545, "link": "https://stackoverflow.com/questions/57995545/running-script-from-qmake-to-get-build-number/57996382#57996382", "title": "Running script from qmake to get build number", "body": "<p>Your .pro syntax is incorrect since the \"else\" command should not use \":\" but \"{}\", so the previous command is always overridden.</p>\n\n<pre><code>unix: {\n    BUILDNO = $$system(sh $$(PWD)/build.sh)\n    DEFINES += BUILD_NUM=$${BUILDNO}\n}\nelse {\n    DEFINES += BUILD_NUM=0\n}\n</code></pre>\n\n<hr>\n\n<p>As <a href=\"https://stackoverflow.com/users/4419802/matt\">@Matt</a> points out, you can use \":\" if the command is on the same line:</p>\n\n<pre><code>unix: {\n    BUILDNO = $$system(sh $$(PWD)/build.sh)\n    DEFINES += BUILD_NUM=$${BUILDNO}\n}\nelse: DEFINES += BUILD_NUM=0\n</code></pre>\n"}], "owner": {"reputation": 575, "user_id": 1521297, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/75b3bf6a7896c108b25c751444f49505?s=128&d=identicon&r=PG", "display_name": "Greg B", "link": "https://stackoverflow.com/users/1521297/greg-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 57996382, "answer_count": 1, "score": 2, "last_activity_date": 1568824695, "creation_date": 1568818101, "question_id": 57995545, "link": "https://stackoverflow.com/questions/57995545/running-script-from-qmake-to-get-build-number", "title": "Running script from qmake to get build number", "body": "<p>I am trying to add a build number to my Qt project, by including that number as a DEFINE. I've found a few examples, but I can't seem to get them to work. Basically the build.sh is called from the command line, echoing the current build number. That number should be set as a #DEFINE in qmake, and included in my code</p>\n\n<p>I have the following code in the .pro file</p>\n\n<pre><code>unix: {\n    BUILDNO = $$system(./build.sh)\n    DEFINES += BUILD_NUM=$${BUILDNO}\n}\nelse:\n    DEFINES += BUILD_NUM=0\n</code></pre>\n\n<p>And this code in my build.sh file</p>\n\n<pre><code>#!/bin/bash    \nn=25;#the variable that I want to be incremented\nnext_n=$[$n+1]\nsed -i \"/#the variable that I want to be incremented$/s/=.*#/=$next_n;#/\" ${0}\necho $n\n</code></pre>\n\n<p>And an example line from my code:</p>\n\n<pre><code>a.setApplicationVersion(QString(\"%1.%2.%3\").arg(VERSION_MAJ).arg(VERSION_MIN).arg(BUILD_NUM));\n</code></pre>\n\n<p>Running the build.sh script from the command line works just fine. It echos a single number to the command line, and increments the number in the script. That number increments when I build my project, so I know's its being executed. But the number that is echoed is not showing up in my code when I print the DEFINE variable. But... on Linux, it is always 0</p>\n"}, {"tags": ["c++", "average", "duration", "chrono"], "comments": [{"owner": {"reputation": 715, "user_id": 3175046, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bdd83ad7a151df4caca46ddace68a4c6?s=128&d=identicon&r=PG&f=1", "display_name": "Hadi", "link": "https://stackoverflow.com/users/3175046/hadi"}, "edited": false, "score": 0, "creation_date": 1568817638, "post_id": 57995392, "comment_id": 102397204, "body": "I basically want to have something like that. But the problem is that I can&#39;t add the duration to any int or primitive data type as their is a type mismatch. I am also not able to find how to achieve this with existing duration operators."}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1568820281, "post_id": 57995392, "comment_id": 102398778, "body": "Here&#39;s a chrono video tutorial: <a href=\"https://www.youtube.com/watch?v=P32hvk8b13M\" rel=\"nofollow noreferrer\">youtube.com/watch?v=P32hvk8b13M</a>  It&#39;s about an hour and I encourage you to watch all of it.  However at the 43:28 mark it specifically covers the mistake in algebra that you are making, which is the cause of your compile-time error.  <code>chrono</code> is all about catching your mistakes at compile-time, so that once you get things to compile, run-time errors are far less likely."}, {"owner": {"reputation": 715, "user_id": 3175046, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bdd83ad7a151df4caca46ddace68a4c6?s=128&d=identicon&r=PG&f=1", "display_name": "Hadi", "link": "https://stackoverflow.com/users/3175046/hadi"}, "reply_to_user": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1568831014, "post_id": 57995392, "comment_id": 102403454, "body": "Thanks I&#39;ll watch."}], "answers": [{"tags": [], "owner": {"reputation": 5009, "user_id": 1455108, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/zaRtd.jpg?s=128&g=1", "display_name": "Jo&#227;o Paulo", "link": "https://stackoverflow.com/users/1455108/jo%c3%a3o-paulo"}, "is_accepted": false, "score": 0, "last_activity_date": 1568818709, "last_edit_date": 1568818709, "creation_date": 1568818014, "answer_id": 57995527, "question_id": 57995392, "link": "https://stackoverflow.com/questions/57995392/get-average-of-time-spent-using-stdchrono/57995527#57995527", "title": "Get average of time spent using std::chrono", "body": "<p>First, the type here is int:</p>\n\n<pre><code>auto duration_total = 0;\n</code></pre>\n\n<p>You should do something similar to it:</p>\n\n<pre><code>auto t1 = std::chrono::steady_clock::now();\n//do some work\nauto t2 = std::chrono::steady_clock::now();\ndouble duration_in_seconds = std::chrono::duration_cast&lt;std::chrono::duration&lt;double&gt;&gt;(t2 - t1).count();\n</code></pre>\n\n<p>Note that I'm casting the duration to double. Then you can use the duration value more freely.</p>\n\n<p>If you prefer nanoseconds:</p>\n\n<pre><code>double duration_in_nanoseconds =  std::chrono::duration_cast&lt;std::chrono::nanoseconds&gt;(t2 - t1).count();\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 1, "creation_date": 1568819545, "post_id": 57995595, "comment_id": 102398374, "body": "A better style would be to stay within the chrono type system while doing the averaging and only escape when you absolutely have to.  Namely at the print statement:  <code>std::cout &lt;&lt; average_duration.count() &lt;&lt;  &quot;ns\\n&quot;;</code>  This suggested style allows the compiler check your duration algebra for logic mistakes, and emit an error if you accidentally make one (not that you did in this case).  In C++20 you won&#39;t even have to escape the type system at the print statement:  <code>std::cout &lt;&lt; average_duration &lt;&lt;  &quot;\\n&quot;;</code>."}, {"owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "reply_to_user": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1568824150, "post_id": 57995595, "comment_id": 102400763, "body": "@HowardHinnant Thanks! I&#39;ll check out more the C++20 type system."}, {"owner": {"reputation": 715, "user_id": 3175046, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bdd83ad7a151df4caca46ddace68a4c6?s=128&d=identicon&r=PG&f=1", "display_name": "Hadi", "link": "https://stackoverflow.com/users/3175046/hadi"}, "reply_to_user": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1568830939, "post_id": 57995595, "comment_id": 102403420, "body": "@HowardHinnant Yeah I was wondering about type safety. Other links suggest not moving out. In my case though."}], "tags": [], "owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "is_accepted": true, "score": 2, "last_activity_date": 1568818247, "creation_date": 1568818247, "answer_id": 57995595, "question_id": 57995392, "link": "https://stackoverflow.com/questions/57995392/get-average-of-time-spent-using-stdchrono/57995595#57995595", "title": "Get average of time spent using std::chrono", "body": "<p>If you look at <a href=\"https://en.cppreference.com/w/cpp/chrono/duration/count\" rel=\"nofollow noreferrer\"><code>std::chrono::duration&lt;Rep,Period&gt;::count</code></a>, you can see that you can use </p>\n\n<pre><code>int duration = std::chrono::duration_cast&lt;std::chrono::nanoseconds&gt;( t2 - t1 ).count();\n</code></pre>\n\n<p>(or something else, e.g., <code>unsigned long</code>), as the return value is</p>\n\n<blockquote>\n  <p>The number of ticks for this duration.</p>\n</blockquote>\n\n<p>in full:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;chrono&gt;\n\nint main()\n{\n    int counter = 0;\n    auto duration_total = 0; //not sure about the type\n    std::chrono::high_resolution_clock::time_point t1, t2;\n\n    t1 = std::chrono::high_resolution_clock::now(); \n\n    t2 = std::chrono::high_resolution_clock::now();\n    int duration = std::chrono::duration_cast&lt;std::chrono::nanoseconds&gt;( t2 - t1 ).count();\n    duration_total += duration;\n\n    if(counter %10000 == 0){\n          long int average_duration = duration_total/10000;\n          duration_total = 0;\n          std::cout &lt;&lt; average_duration &lt;&lt; \"\\n\";\n    }\n}\n</code></pre>\n\n<p>See it in <a href=\"https://coliru.stacked-crooked.com/a/d0d7478934ef00a4\" rel=\"nofollow noreferrer\">Coliru</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 715, "user_id": 3175046, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bdd83ad7a151df4caca46ddace68a4c6?s=128&d=identicon&r=PG&f=1", "display_name": "Hadi", "link": "https://stackoverflow.com/users/3175046/hadi"}, "edited": false, "score": 0, "creation_date": 1568818634, "post_id": 57995606, "comment_id": 102397862, "body": "It won&#39;t work in my case. I have a thread that is calling this function and am summing up the timings that the thread is using this function live. I can&#39;t iterate through it like that."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 715, "user_id": 3175046, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bdd83ad7a151df4caca46ddace68a4c6?s=128&d=identicon&r=PG&f=1", "display_name": "Hadi", "link": "https://stackoverflow.com/users/3175046/hadi"}, "edited": false, "score": 0, "creation_date": 1568819456, "post_id": 57995606, "comment_id": 102398318, "body": "@Hadi The principle is the same. Added example."}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1568819673, "post_id": 57995606, "comment_id": 102398440, "body": "Upvoted for staying within the chrono type system until the print statement.  Best (safest) style!"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1568819781, "post_id": 57995606, "comment_id": 102398493, "body": "@HowardHinnant Thanks - it&#39;s nice to hear that from the time master himself :-)"}], "tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": false, "score": 2, "last_activity_date": 1568819448, "last_edit_date": 1568819448, "creation_date": 1568818295, "answer_id": 57995606, "question_id": 57995392, "link": "https://stackoverflow.com/questions/57995392/get-average-of-time-spent-using-stdchrono/57995606#57995606", "title": "Get average of time spent using std::chrono", "body": "<p>You create a clock when you start and one when you stop.\nWhen subtracting one clock from another, you get a duration. Divide the duration with the number of iterations.</p>\n\n<p>Example:</p>\n\n<pre><code>#include &lt;chrono&gt;\n#include &lt;functional&gt;\n#include &lt;iostream&gt;\n\ntemplate&lt;typename T&gt;\nauto timeit(size_t iterations, std::function&lt;void()&gt; func_to_test) {\n    auto start = std::chrono::high_resolution_clock::now();\n\n    for(size_t i = 0; i &lt; iterations; ++i)\n        func_to_test();\n\n    auto end = std::chrono::high_resolution_clock::now();\n\n    return std::chrono::duration_cast&lt;T&gt;(end - start) / iterations;\n}\n\nint main() {\n    auto dur =\n        timeit&lt;std::chrono::microseconds&gt;(10000, [] { system(\"echo Hello World\"); });\n\n    std::cout &lt;&lt; dur.count() &lt;&lt; \" \u00b5s\\n\";\n}\n</code></pre>\n\n<p>If you need to sum up individual runs, keep a duration variable that you add to. I'm reusing the same <code>timeit</code> function, but you can remove the <code>iteration</code> stuff in it if you only want to run it once.</p>\n\n<pre><code>int main() {\n    std::chrono::microseconds tot{0};\n    size_t iterations = 0;\n\n    for(size_t i = 0; i &lt; 10; ++i) {\n        // sum up the total time spent\n        tot += timeit&lt;decltype(tot)&gt;(1, [] { system(\"echo Hello World\"); });\n        ++iterations;\n    }\n    // divide with the number of iterations\n    std::cout &lt;&lt; (tot / iterations).count() &lt;&lt; \" \u00b5s\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 715, "user_id": 3175046, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bdd83ad7a151df4caca46ddace68a4c6?s=128&d=identicon&r=PG&f=1", "display_name": "Hadi", "link": "https://stackoverflow.com/users/3175046/hadi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1348, "favorite_count": 0, "accepted_answer_id": 57995595, "answer_count": 3, "score": 1, "last_activity_date": 1568819448, "creation_date": 1568817575, "question_id": 57995392, "link": "https://stackoverflow.com/questions/57995392/get-average-of-time-spent-using-stdchrono", "title": "Get average of time spent using std::chrono", "body": "<p>I have a function running more than a million times. I want to print out the duration of how long the function takes to run by printing the sum of durations of 10,000 calls to the function.</p>\n\n<p>At the start of each function I have something like this:</p>\n\n<pre><code>int counter = 0;\nauto duration_total = 0; //not sure about the type\nstd::chrono::high_resolution_clock::time_point t1, t2, duration;\n\nt1 = std::chrono::high_resolution_clock::now(); \nFunction f(){\n  counter++;\n}\n\nt2 = std::chrono::high_resolution_clock::now();\nduration= std::chrono::duration_cast&lt;std::chrono::nanoseconds&gt;( t2 - t1 ).count();\nduration_total += duration;\n\nif(counter %10000 == 0){\n      long int average_duration = duration_total/10000;\n      duration_total = 0;\n      cout &lt;&lt; average_duration &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>I can't find a way to add durations and then get their average.</p>\n"}, {"tags": ["c++", "jna"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 5464190, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UNVIFayp8_w/AAAAAAAAAAI/AAAAAAAAAGg/vyTrP2Oa95M/photo.jpg?sz=128", "display_name": "Niko", "link": "https://stackoverflow.com/users/5464190/niko"}, "edited": false, "score": 0, "creation_date": 1568879877, "post_id": 57998425, "comment_id": 102417387, "body": "after calling the read() method , my structure is empty. eventMsg contains some data before passing to the xlCanTransmit method. So I can&#39;t explain, why I can&#39;t see the data in CANoe Trace :(   I have to map <b>void*</b> pointer  in java."}, {"owner": {"reputation": 5374, "user_id": 1161484, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/lg24v.png?s=128&g=1", "display_name": "Daniel Widdis", "link": "https://stackoverflow.com/users/1161484/daniel-widdis"}, "reply_to_user": {"reputation": 21, "user_id": 5464190, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UNVIFayp8_w/AAAAAAAAAAI/AAAAAAAAAGg/vyTrP2Oa95M/photo.jpg?sz=128", "display_name": "Niko", "link": "https://stackoverflow.com/users/5464190/niko"}, "edited": false, "score": 0, "creation_date": 1568946762, "post_id": 57998425, "comment_id": 102445260, "body": "What does the API indicate should be returned in that data after you send?   I can&#39;t see any other issues with your code for sending, but not sure how you&#39;re detecting the sent message."}, {"owner": {"reputation": 21, "user_id": 5464190, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UNVIFayp8_w/AAAAAAAAAAI/AAAAAAAAAGg/vyTrP2Oa95M/photo.jpg?sz=128", "display_name": "Niko", "link": "https://stackoverflow.com/users/5464190/niko"}, "edited": false, "score": 0, "creation_date": 1568962622, "post_id": 57998425, "comment_id": 102449135, "body": "Daniel there are no need in particular moment to return what the API indicates. You can detect sent messages with CANoe. Only what I need is to send the data. I have tried without pointer, but I had same result. There was only empty frame :) May be I should re-check the structures and unions."}, {"owner": {"reputation": 21, "user_id": 5464190, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UNVIFayp8_w/AAAAAAAAAAI/AAAAAAAAAGg/vyTrP2Oa95M/photo.jpg?sz=128", "display_name": "Niko", "link": "https://stackoverflow.com/users/5464190/niko"}, "edited": false, "score": 0, "creation_date": 1568970720, "post_id": 57998425, "comment_id": 102452950, "body": "I think the problem is <b>read();</b> method. After calling it there are only zeroes in the structure. I called it manually before writing in the structure , but only ID is sent. DLC is 0 again. I can&#39;t explain this behavior"}], "tags": [], "owner": {"reputation": 5374, "user_id": 1161484, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/lg24v.png?s=128&g=1", "display_name": "Daniel Widdis", "link": "https://stackoverflow.com/users/1161484/daniel-widdis"}, "is_accepted": false, "score": 0, "last_activity_date": 1568829510, "creation_date": 1568829510, "answer_id": 57998425, "question_id": 57995326, "link": "https://stackoverflow.com/questions/57995326/xlcantransmit-function-does-not-work-properly/57998425#57998425", "title": "xlCanTransmit() function does not work properly", "body": "<p>The return value of <code>0</code> indicates the function preformed properly on the native side, but you haven't copied the native memory back to Java.</p>\n\n<p>This is normally done automatically when you pass a <code>Structure</code> in a function, but you have passed the <code>Pointer</code> to the structure instead. Your last argument is <code>eventMsg.getPointer()</code>.  JNA doesn't know how the <code>Pointer</code> maps to your structure until you tell it to do so, and in the current way you're calling it requires using <code>read()</code> to copy the value back to JNA.</p>\n\n<p>You could probably get the results you want by just executing <code>eventMsg.read()</code> after calling the function, but the better solition is to pass the <code>Structure</code> to the function in the first place and let JNA do the conversion to Pointer and auto-<code>read()</code> for you.  Change your function call to pass <code>eventMsg</code> as the argument.</p>\n"}], "owner": {"reputation": 21, "user_id": 5464190, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UNVIFayp8_w/AAAAAAAAAAI/AAAAAAAAAGg/vyTrP2Oa95M/photo.jpg?sz=128", "display_name": "Niko", "link": "https://stackoverflow.com/users/5464190/niko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 143, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1579172500, "creation_date": 1568817399, "last_edit_date": 1568908275, "question_id": 57995326, "link": "https://stackoverflow.com/questions/57995326/xlcantransmit-function-does-not-work-properly", "title": "xlCanTransmit() function does not work properly", "body": "<p>I am trying to send CAN Frames with xlCanTransmit method. The problem is that it returns 0 (XL_SUCCESS), but the frame is empty. there are only zeroes in the Frame. </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>\nIVxlApi.s_xl_event eventMsg = new IVxlApi.s_xl_event();\n\n...\n...\n\nxlStatus = dll.xlCanTransmit(GlobalConfig.g_xlPortHandle, GlobalConfig.g_xlChannelMask[channelIndex],\n                pEventCount, eventMsg.getPointer());\n\n</code></pre>\n\n<p>After Calling the function xlCanTransmit() the frame is sent, but there is no data in it.  The function is called from dll file and you can't debug it.</p>\n\n<p><strong>My mapped Structure</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code> public static class s_xl_event extends Structure {\n\n        public byte tag;\n        public byte chanIndex;\n        public byte[] transId = new byte[SHORT];\n        public byte[] portHandle = new byte[SHORT];\n        public byte flags;\n        public byte reserved;\n        public byte[] timeStamp = new byte[LONG];\n        public s_xl_tag_data tagData;\n\n        @Override\n        public void read() {\n            // read from native memory, populate tag\n            super.read();\n            // set union type based on tag\n            switch (tag) {\n                case XL_RECEIVE_MSG:\n                case XL_TRANSMIT_MSG:\n                    tagData.setType(s_xl_can_msg.class);\n                    break;\n                case XL_CHIP_STATE:\n                    tagData.setType(s_xl_chip_state.class);\n                    break;\n                case XL_LIN_MSG:\n                    tagData.setType(s_xl_lin_msg_api.class);\n                    break;\n                case XL_SYNC_PULSE:\n                    tagData.setType(s_xl_sync_pulse.class);\n                    break;\n                case XL_RECEIVE_DAIO_DATA:\n                    tagData.setType(s_xl_daio_data.class);\n                    break;\n                case XL_TRANSCEIVER:\n                    tagData.setType(s_xl_transceiver.class);\n                    break;\n                case XL_RECEIVE_DAIO_PIGGY:\n                    tagData.setType(s_xl_daio_piggy_data.class);\n                    break;\n                case XL_KLINE_MSG:\n                    tagData.setType(s_xl_kline_data.class);\n                    break;\n                default:\n                    // add default type or throw exception etc. \n                    tagData.setType(s_xl_can_msg.class);\n                    break;\n            }\n            // now read tagData from native memory\n            tagData.read();\n        }\n\n        @Override\n        protected List&lt;String&gt; getFieldOrder() {\n            return Arrays.asList(\"tag\", \"chanIndex\", \"transId\", \"portHandle\", \"flags\", \"reserved\", \"timeStamp\", \"tagData\");\n        }\n    }\n</code></pre>\n\n<p>CAN Frame in CANoe Trace</p>\n\n<p><a href=\"https://i.stack.imgur.com/UQOO3.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p>The function on the native side looks like this </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>DECL_STDXL_FUNC(xlCanTransmit, XLCANTRANSMIT, (\n        XLportHandle  portHandle,\n        XLaccess      accessMask,\n        unsigned int* pEventCount,\n        void* pEvents)\n    );\n\n</code></pre>\n\n<p>My mapping in java </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>\nshort xlCanTransmit(long portHandle, long accessMask, IntByReference pEventCount, Pointer pEvents);\n</code></pre>\n\n<p>I wrote some random data manually and called the xlCanTransmit() function. </p>\n\n<p>But in CANoe trace I see only empty frame with no data and id.</p>\n\n<p>My send function in java</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>\n public short send(String txID, String dlc, String[] data, int channelIndex) {\n        short xlStatus = IVxlApi.XL_ERROR;\n\n        IntByReference pEventCount = new IntByReference(1);\n        IVxlApi.s_xl_event eventMsg = new IVxlApi.s_xl_event();\n\n        eventMsg.tag = IVxlApi.XL_TRANSMIT_MSG;\n\n        eventMsg.tagData.msg.id[0] = 2;// = Long.parseLong(txID);\n\n        eventMsg.tagData.msg.dlc[0] = 8;// = Short.parseShort(dlc);\n        eventMsg.tagData.msg.flags[0] = 0;\n\n        eventMsg.tagData.msg.data[0] = Byte.parseByte(data[0]);\n        eventMsg.tagData.msg.data[1] = Byte.parseByte(data[1]);\n        eventMsg.tagData.msg.data[2] = Byte.parseByte(data[2]);\n        eventMsg.tagData.msg.data[3] = Byte.parseByte(data[3]);\n        eventMsg.tagData.msg.data[4] = Byte.parseByte(data[4]);\n        eventMsg.tagData.msg.data[5] = Byte.parseByte(data[5]);\n        eventMsg.tagData.msg.data[6] = Byte.parseByte(data[6]);\n        eventMsg.tagData.msg.data[7] = Byte.parseByte(data[7]);\n\n        /*if(true){\n            eventMsg.tagData.msg.id  |= IVxlApi.XL_CAN_EXT_MSG_ID;\n        }*/\n        eventMsg.write();\n        xlStatus = dll.xlCanTransmit(GlobalConfig.g_xlPortHandle, GlobalConfig.g_xlChannelMask[channelIndex],\n                pEventCount, eventMsg.getPointer());\n\n         eventMsg.read();\n\n\n        return xlStatus;\n    }\n\n\n</code></pre>\n\n<p>CAN Frame in CANoe Trace</p>\n\n<p><a href=\"https://i.stack.imgur.com/UQOO3.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p>After calling tagData.read() (line 475) the data initialized with zeroes\n<a href=\"https://i.stack.imgur.com/EGu03.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1568818189, "post_id": 57995082, "comment_id": 102397576, "body": "@MaxLanghof Good point. After the coffee break, I&#39;d still suggest a container (the variables in OP&#39;s code are of the same type, anyways)."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 3, "creation_date": 1568818280, "post_id": 57995082, "comment_id": 102397645, "body": "Not without some kind of string-to-variable mapping structure. The way to create this structure that is best-suited depends on your specific needs and constraints."}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 4, "last_activity_date": 1568819499, "creation_date": 1568819499, "answer_id": 57995969, "question_id": 57995082, "link": "https://stackoverflow.com/questions/57995082/how-do-i-modify-a-variable-specified-by-the-user/57995969#57995969", "title": "How do I modify a variable specified by the user?", "body": "<p>You can use an associative container to map the input to the variable. An example:</p>\n\n<pre><code>std::unordered_map&lt;std::string, int*&gt; vars = {\n    {\"a\", &amp;a},\n    {\"b\", &amp;b},\n};\n\n// the assignment\n*vars.at(input) = 1;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12085615, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCFnoIETrJJuPgkOhDZ3Km9gK5TpcHMWWU-5dm0=k-s128", "display_name": "Party Pineapple", "link": "https://stackoverflow.com/users/12085615/party-pineapple"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568836002, "creation_date": 1568816683, "last_edit_date": 1568836002, "question_id": 57995082, "link": "https://stackoverflow.com/questions/57995082/how-do-i-modify-a-variable-specified-by-the-user", "title": "How do I modify a variable specified by the user?", "body": "<p>I want to be able to change a variable based on user input, but I don't want to use <code>if</code>/<code>else</code> statements. I'm using a lot of variables in my actual code. Is there any way to change a variable from input alone?</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint a = 0;\nint b = 0;\n\nstring input;\n\nint main() {\n    cin &gt;&gt; input;\n    *variable specified by input variable* = 1;\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-code", "portability"], "comments": [{"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 1, "creation_date": 1568818040, "post_id": 57994844, "comment_id": 102397488, "body": "change <code>.out</code> to <code>.exe</code>, windows won&#39;t automatically execute a <code>.out</code> file. You also don&#39;t need the <code>.&#47;</code>, thats for Unix based systems. <code>cwd</code> is the current working directory, should probably be set to your workspace directory rather than the compiler location."}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 10955545, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qnuKm.jpg?s=128&g=1", "display_name": "Pauete Galopa", "link": "https://stackoverflow.com/users/10955545/pauete-galopa"}, "edited": false, "score": 0, "creation_date": 1568817082, "post_id": 57995092, "comment_id": 102396836, "body": "Mhh, mine works fine, since it compiles de .cc file, the problem lies when trying to run it. Note: the &amp;&amp; conector(?) it doesn&#39;t work for me, don&#39;t know why tho. Thanks anyway!"}, {"owner": {"reputation": 505, "user_id": 9957598, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sDfEWpTibVk/AAAAAAAAAAI/AAAAAAAAAPI/NZ-1XBYt9Jg/photo.jpg?sz=128", "display_name": "Rokas Vi\u0161inskas", "link": "https://stackoverflow.com/users/9957598/rokas-vi%c5%a1inskas"}, "reply_to_user": {"reputation": 113, "user_id": 10955545, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qnuKm.jpg?s=128&g=1", "display_name": "Pauete Galopa", "link": "https://stackoverflow.com/users/10955545/pauete-galopa"}, "edited": false, "score": 2, "creation_date": 1568817922, "post_id": 57995092, "comment_id": 102397419, "body": "Maybe you&#39;re using <code>powershell</code> instead of <code>cmd</code> as the shell?"}], "tags": [], "owner": {"reputation": 505, "user_id": 9957598, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sDfEWpTibVk/AAAAAAAAAAI/AAAAAAAAAPI/NZ-1XBYt9Jg/photo.jpg?sz=128", "display_name": "Rokas Vi\u0161inskas", "link": "https://stackoverflow.com/users/9957598/rokas-vi%c5%a1inskas"}, "is_accepted": false, "score": 0, "last_activity_date": 1568816721, "creation_date": 1568816721, "answer_id": 57995092, "question_id": 57994844, "link": "https://stackoverflow.com/questions/57994844/how-do-i-create-a-json-task-for-c-compiling-and-running-vscode/57995092#57995092", "title": "How do I create a .JSON task for C++ compiling and running? (VScode)", "body": "<p>Since you pretty much want a template, I will post mine for you to reverse engineer.\nThis will probably get down voted since it's not a complete answer, but it's the only way I can help you.</p>\n\n<pre><code>{\n    {\n    \"version\": \"2.0.0\",\n    \"tasks\": [\n        {\n            \"label\": \"Build &amp; run\",\n            \"type\": \"shell\",\n            \"command\": \"path/to/bin/g++ main.cpp -o main.exe &amp;&amp; main\",\n            \"problemMatcher\":\"$gcc\",\n            \"presentation\": {\n                \"echo\": false,\n                \"reveal\": \"always\",\n                \"focus\": false,\n                \"panel\": \"shared\",\n                \"showReuseMessage\": false,\n                \"clear\": true\n            },\n            \"group\": {\n                \"kind\": \"build\",\n                \"isDefault\": true\n            }\n        }\n    ]\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 139, "user_id": 8517811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ca967d9d8db63779718c7b12c458de4?s=128&d=identicon&r=PG&f=1", "display_name": "Bob Brown", "link": "https://stackoverflow.com/users/8517811/bob-brown"}, "is_accepted": false, "score": 0, "last_activity_date": 1568993185, "creation_date": 1568993185, "answer_id": 58031236, "question_id": 57994844, "link": "https://stackoverflow.com/questions/57994844/how-do-i-create-a-json-task-for-c-compiling-and-running-vscode/58031236#58031236", "title": "How do I create a .JSON task for C++ compiling and running? (VScode)", "body": "<p><code>tasks.json</code> is not the file you want to use for running/debugging an executable.  For that, you want to use <code>launch.json</code>.  You can create a launch task that takes a dependency on a build task.</p>\n\n<p>Documentation here: <a href=\"https://code.visualstudio.com/Docs/editor/debugging#_launch-configurations\" rel=\"nofollow noreferrer\">https://code.visualstudio.com/Docs/editor/debugging#_launch-configurations</a><br/>\nand here (C++ specific): <a href=\"https://code.visualstudio.com/docs/cpp/launch-json-reference\" rel=\"nofollow noreferrer\">https://code.visualstudio.com/docs/cpp/launch-json-reference</a></p>\n"}, {"tags": [], "owner": {"reputation": 80, "user_id": 11716937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18d40001c4ae0af8d39fbbf9a66be6ef?s=128&d=identicon&r=PG&f=1", "display_name": "piyush172", "link": "https://stackoverflow.com/users/11716937/piyush172"}, "is_accepted": false, "score": 0, "last_activity_date": 1596368625, "last_edit_date": 1596368625, "creation_date": 1596367474, "answer_id": 63215428, "question_id": 57994844, "link": "https://stackoverflow.com/questions/57994844/how-do-i-create-a-json-task-for-c-compiling-and-running-vscode/63215428#63215428", "title": "How do I create a .JSON task for C++ compiling and running? (VScode)", "body": "<pre><code>{\n&quot;version&quot;: &quot;2.0.0&quot;,\n    &quot;tasks&quot;: [\n      \n        {\n            &quot;label&quot;: &quot;Compile and run&quot;,\n            &quot;type&quot;: &quot;shell&quot;,\n            &quot;command&quot;: &quot;g++&quot;,\n            &quot;args&quot;: [\n            \n                &quot;-g&quot;,\n                &quot;${file}&quot;,\n                &quot;-o&quot;,\n                &quot;ans.exe&quot;,\n                &quot;;&quot;,\n                &quot;cls&quot;,\n                &quot;;&quot;,\n                &quot;./ans.exe&quot;\n            ],\n            &quot;group&quot;: {\n                &quot;kind&quot;: &quot;build&quot;,\n                &quot;isDefault&quot;: true\n            },\n            &quot;problemMatcher&quot;: {\n                &quot;owner&quot;: &quot;cpp&quot;,\n                &quot;fileLocation&quot;: [\n                    &quot;relative&quot;,\n                    &quot;${workspaceRoot}&quot;\n                ],\n                &quot;pattern&quot;: {\n                    &quot;regexp&quot;: &quot;^(.):(\\\\d+):(\\\\d+):\\\\s+(warning|error):\\\\s+(.)$&quot;,\n                    &quot;file&quot;: 1,\n                    &quot;line&quot;: 2,\n                    &quot;column&quot;: 3,\n                    &quot;severity&quot;: 4,\n                    &quot;message&quot;: 5\n                }\n            }\n        },\n    ]\n}\n</code></pre>\n<p>This is working very fine</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 15445786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6569763cda229f85a2d461c45c41b05?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket", "link": "https://stackoverflow.com/users/15445786/aniket"}, "is_accepted": false, "score": 0, "last_activity_date": 1617649610, "creation_date": 1617649610, "answer_id": 66958420, "question_id": 57994844, "link": "https://stackoverflow.com/questions/57994844/how-do-i-create-a-json-task-for-c-compiling-and-running-vscode/66958420#66958420", "title": "How do I create a .JSON task for C++ compiling and running? (VScode)", "body": "<p>If someone is looking for a way to auto build the cpp files in VSCode before debug (on pressing F5), a simple solution is to add <code>&quot;preLaunchTask&quot;: &quot;${defaultBuildTask}&quot;,</code> in the launch.json file.</p>\n<p>Here are my files in linux with g++ for example (you can remove the smfl libs)</p>\n<p>tasks.json</p>\n<pre><code>{\n    &quot;version&quot;: &quot;2.0.0&quot;,\n    &quot;tasks&quot;: [\n        {\n            &quot;type&quot;: &quot;cppbuild&quot;,\n            &quot;label&quot;: &quot;C/C++: g++ build active file&quot;,\n            &quot;command&quot;: &quot;/usr/bin/g++&quot;,\n            &quot;args&quot;: [\n                &quot;-g&quot;,\n                &quot;${workspaceFolder}/src/*.cpp&quot;,\n                &quot;-o&quot;,\n                &quot;${workspaceFolder}/bin/outputfile&quot;,\n                &quot;-lsfml-audio&quot;,\n                &quot;-lsfml-graphics&quot;,\n                &quot;-lsfml-network&quot;,\n                &quot;-lsfml-system&quot;,\n                &quot;-lsfml-window&quot;\n            ],\n            &quot;options&quot;: {\n                &quot;cwd&quot;: &quot;${workspaceFolder}&quot;\n            },\n            &quot;problemMatcher&quot;: [\n                &quot;$gcc&quot;\n            ],\n            &quot;group&quot;: {\n                &quot;kind&quot;: &quot;build&quot;,\n                &quot;isDefault&quot;: true\n            },\n            &quot;detail&quot;: &quot;compiler: /usr/bin/g++&quot;\n        }\n    ]\n}\n</code></pre>\n<p>launch.json</p>\n<pre><code>{\n    // Use IntelliSense to learn about possible attributes.\n    // Hover to view descriptions of existing attributes.\n    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387\n    &quot;version&quot;: &quot;0.2.0&quot;,\n    &quot;configurations&quot;: [\n        \n        {\n            &quot;name&quot;: &quot;(gdb) Launch&quot;,\n            &quot;type&quot;: &quot;cppdbg&quot;,\n            &quot;request&quot;: &quot;launch&quot;,\n            &quot;program&quot;: &quot;${workspaceFolder}/bin/outputfile&quot;,\n            &quot;args&quot;: [],\n            &quot;stopAtEntry&quot;: false,\n            &quot;cwd&quot;: &quot;${workspaceFolder}&quot;,\n            &quot;environment&quot;: [],\n            &quot;externalConsole&quot;: false,\n            &quot;MIMode&quot;: &quot;gdb&quot;,\n            &quot;preLaunchTask&quot;: &quot;${defaultBuildTask}&quot;,\n            &quot;setupCommands&quot;: [\n                {\n                    &quot;description&quot;: &quot;Enable pretty-printing for gdb&quot;,\n                    &quot;text&quot;: &quot;-enable-pretty-printing&quot;,\n                    &quot;ignoreFailures&quot;: true\n                }\n            ]\n        }\n    ]\n}\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 10955545, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qnuKm.jpg?s=128&g=1", "display_name": "Pauete Galopa", "link": "https://stackoverflow.com/users/10955545/pauete-galopa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3082, "favorite_count": 1, "answer_count": 4, "score": 1, "last_activity_date": 1617649610, "creation_date": 1568815995, "last_edit_date": 1568818175, "question_id": 57994844, "link": "https://stackoverflow.com/questions/57994844/how-do-i-create-a-json-task-for-c-compiling-and-running-vscode", "title": "How do I create a .JSON task for C++ compiling and running? (VScode)", "body": "<p>I'm setting up a portable enviroment based in VSCode that can run from a USBdrive. I've installed MinGW and VScode, at the root directory (D:) and created a folder that will contain the C++ env. configuration.\nEdit:\nThis is intended to work on Windows.</p>\n\n<p><a href=\"https://i.stack.imgur.com/CJEkz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CJEkz.png\" alt=\"enter image description here\"></a></p>\n\n<p>So, I know that in order to compile and run a .cc file I have to run a Build Task or Task (I just understand the basic concept). I've tried to build the .json task that should do that but I'm not gettig any result.</p>\n\n<p>I would like to understand the basics so I can create my own (and simple) .json tasks for other enviroments.</p>\n\n<p>This is what I tried so far:</p>\n\n<pre><code>{\n\"version\": \"2.0.0\",\n\"tasks\": [\n    {\n        \"type\": \"shell\",\n        \"label\": \"Compile&amp;Run\",\n        \"command\":[\"D:\\\\mingw-w64\\\\x86_64-8.1.0-win32-seh-rt_v6-rev0\\\\mingw64\\\\bin\\\\g++.exe\"],\n        \"args\": [\n            \"-g\",\n            \"${file}\",\n            \"-o\",                                    // I think that this is the problem\n            \"${fileBasenameNoExtension}.out\", \",\", \"./${fileBasenameNoExtension}.out\"\n        ],\n\n        //I do not fully understand what this next lines mean or do, they came by defaul.\n        \"options\": {\n            \"cwd\": \"D:\\\\mingw-w64\\\\x86_64-8.1.0-win32-seh-rt_v6-rev0\\\\mingw64\\\\bin\"\n        },\n        \"problemMatcher\": [\n            \"$gcc\"\n        ],\n        \"group\": {\n            \"kind\": \"build\",\n            \"isDefault\": true\n        }\n    }\n]\n</code></pre>\n\n<p>}</p>\n\n<p>This is the task.json I have in my linux system, I got it by searching templatesand managed to make it work. It does just what I need.\nCreates and run a .out file.</p>\n\n<pre><code>{\n    \"version\": \"2.0.0\",\n    \"tasks\": [\n        {\n            \"label\": \"debug\",\n            \"type\": \"shell\",\n            \"command\": \"\",\n            \"args\": [\"g++\",\"-g\", \"${relativeFile}\", \"-o\",\"a.exe\"]\n        },\n        {\n            \"label\": \"Compile and run\",\n            \"type\": \"shell\",\n            \"command\": \"\",\n            \"args\": [\n                \"g++\",\"-g\", \"${relativeFile}\", \"-o\",\"${fileBasenameNoExtension}.out\", \"&amp;&amp;\", \"clear\" , \"&amp;&amp;\" , \"./${fileBasenameNoExtension}.out\"\n            ],\n            \"group\": {\n                \"kind\": \"build\",\n                \"isDefault\": true  \n            },\n            \"problemMatcher\": {\n                \"owner\": \"cpp\",\n                \"fileLocation\": [\"relative\", \"${workspaceRoot}\"],\n                \"pattern\": {\n                    \"regexp\": \"^(.*):(\\\\d+):(\\\\d+):\\\\s+(warning|error):\\\\s+(.*)$\",\n                    \"file\": 1,\n                    \"line\": 2,\n                    \"column\": 3,\n                    \"severity\": 4,\n                    \"message\": 5\n                }\n            }\n        },\n\n    ]\n}\n</code></pre>\n"}, {"tags": ["c++", "boost", "sleep"], "comments": [{"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "edited": false, "score": 0, "creation_date": 1568815876, "post_id": 57994715, "comment_id": 102396093, "body": "<code>std::chrono</code> is better suited for precision time measurements"}, {"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 0, "creation_date": 1568817003, "post_id": 57994715, "comment_id": 102396784, "body": "You should not rely on sleep precisely sleeping for any amount of time. Even when you&#39;r not calling sleep, the OS can (will) schedule you in and out. So any reliance on it will cause problem. Rather, check the clock and accumulate elapsed time, if you need to do something at regular interval. e.g. if it&#39;s been an hour and you want to do something every second, then you should have done it 3600 times."}, {"owner": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 0, "creation_date": 1568818235, "post_id": 57994715, "comment_id": 102397606, "body": "The actual technical reason for the rather large tolerance is here <a href=\"https://github.com/boostorg/thread/blob/970dcb8afd1eb470d1c99e74fc13d1dafaadc46d/src/win32/thread.cpp#L637-L659\" rel=\"nofollow noreferrer\">github.com/boostorg/thread/blob/&hellip;</a>"}, {"owner": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 0, "creation_date": 1568819650, "post_id": 57994715, "comment_id": 102398423, "body": "for more context see this question <a href=\"https://stackoverflow.com/questions/30381866/boost-thread-wakes-up-too-late-in-1-58\" title=\"boost thread wakes up too late in 1 58\">stackoverflow.com/questions/30381866/&hellip;</a>"}, {"owner": {"reputation": 31, "user_id": 5516912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57a619be97aae4f350ee3bb6276f82de?s=128&d=identicon&r=PG&f=1", "display_name": "Pixnutz", "link": "https://stackoverflow.com/users/5516912/pixnutz"}, "edited": false, "score": 0, "creation_date": 1568877949, "post_id": 57994715, "comment_id": 102416386, "body": "Thanks for the answers! I wondered what was so different with boost&#39;s sleep, now I understand."}], "owner": {"reputation": 31, "user_id": 5516912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57a619be97aae4f350ee3bb6276f82de?s=128&d=identicon&r=PG&f=1", "display_name": "Pixnutz", "link": "https://stackoverflow.com/users/5516912/pixnutz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "closed_date": 1568815862, "answer_count": 0, "score": 2, "last_activity_date": 1609123144, "creation_date": 1568815662, "last_edit_date": 1609123144, "question_id": 57994715, "link": "https://stackoverflow.com/questions/57994715/boost-sleep-inaccurate", "closed_reason": "Duplicate", "title": "Boost sleep inaccurate?", "body": "<p>I'm experiencing strange issues with the <code>boost::this_thread::sleep_for</code> function. Whenever I try to sleep for longer periods of time the result is always inaccurate and the program sleeps longer than expected.</p>\n<p>Here are some results:</p>\n<pre><code>sleep(360) -&gt; sleeps around 378 seconds\nsleep(180) -&gt; sleeps around 189 seconds\nsleep(100) -&gt; sleeps around 105 seconds\n</code></pre>\n<p>The time it actually sleeps is around 5% more than what was intented.</p>\n<p>I've tested on two different computers and the result is the same. When I test Standard Library's <code>std::this_thread::sleep_for</code> or Windows API's <code>Sleep</code> functions it works.</p>\n<p>I haven't been able to figure out the problem. Haven't been able to find anything on the internet or in the boost documentation. Any suggestions?</p>\n<p><strong>See comments below for answers!</strong></p>\n"}, {"tags": ["python", "c++", "c"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 4, "creation_date": 1568815566, "post_id": 57994633, "comment_id": 102395909, "body": "In general, you <i>write</i> the implementation in a single language such as C++. Then you <i>wrap</i> the interface with bindings to other langauges, such as Python. There are a number of tools and libraries to wrap interfaces such as <a href=\"http://www.swig.org/tutorial.html\" rel=\"nofollow noreferrer\">swig</a>"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1568815595, "post_id": 57994633, "comment_id": 102395922, "body": "<a href=\"https://docs.python.org/3/extending/index.html\" rel=\"nofollow noreferrer\">Extending and Embedding the Python Interpreter</a>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1568815788, "post_id": 57994633, "comment_id": 102396042, "body": "Read about creating dynamic or shared libraries.  They can be created in any language and used by any language that can interface with them."}, {"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 0, "creation_date": 1568815811, "post_id": 57994633, "comment_id": 102396051, "body": "Highly recommend pybind11"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1568815913, "post_id": 57994633, "comment_id": 102396115, "body": "No programming language is well suited to everything.   C and C++ (which are separate languages - there is no such thing as C/C++) are suited well to some tasks, but not others.   Python is better suited to a different set of tasks, and not others.   When the effort of interfacing between code in different languages (say, allowing Python to call a C function) is small compared with the benefits of using each language for tasks they work well for, then an application may well be constructed in multiple languages."}, {"owner": {"reputation": 1481, "user_id": 11915854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34b4ba370c4dc9583ed1de5f778e118b?s=128&d=identicon&r=PG&f=1", "display_name": "Sid", "link": "https://stackoverflow.com/users/11915854/sid"}, "edited": false, "score": 0, "creation_date": 1568816023, "post_id": 57994633, "comment_id": 102396167, "body": "Maybe this will help you - <a href=\"https://stackoverflow.com/questions/145270/calling-c-c-from-python#145649\" title=\"calling c c from python%23145649\">stackoverflow.com/questions/145270/&hellip;</a>"}], "owner": {"reputation": 43, "user_id": 5744053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9874cbe79e777a488cdeb30b41622ae?s=128&d=identicon&r=PG&f=1", "display_name": "Nitin", "link": "https://stackoverflow.com/users/5744053/nitin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "closed_date": 1568816529, "answer_count": 0, "score": 2, "last_activity_date": 1568815433, "creation_date": 1568815433, "question_id": 57994633, "link": "https://stackoverflow.com/questions/57994633/how-do-you-write-applications-in-multiple-languages", "closed_reason": "Needs more focus", "title": "How do you write applications in multiple languages?", "body": "<p>Sorry guys if this seems like a really basic question. I understand how to build applications using a programming language. Now, I read that tensorflow is written partly in C/C++ and Python. I'm wondering why this is done and how you can get multiple languages to interface with each other.</p>\n"}, {"tags": ["c#", "c++", "marshalling"], "comments": [{"owner": {"reputation": 1493, "user_id": 4377932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f9nFx.jpg?s=128&g=1", "display_name": "artcorpse", "link": "https://stackoverflow.com/users/4377932/artcorpse"}, "edited": false, "score": 0, "creation_date": 1568816548, "post_id": 57994559, "comment_id": 102396518, "body": "The parameter order doesn&#39;t seem to match."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1568816790, "post_id": 57994559, "comment_id": 102396662, "body": "The server name is first.  unsigned char is pretty unusual for an argument that looks like a string, but anything with &quot;VMS&quot; in the name is likely to be very old and char used to be unsigned in the good old days.   So use string instead of IntPtr.  You can&#39;t omit the &quot;unused&quot; arguments, use IntPtr and pass IntPtr.Zero.  Don&#39;t ignore the return value, it ought to give you an error indication.  If &quot;winapi&quot; is somewhat trustworthy then it is CallingConvention.Stdcall."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1568817197, "post_id": 57994559, "comment_id": 102396906, "body": "Fwiw, intentionally obfuscating a published api by a company like Gemalto is a very bad idea."}], "owner": {"reputation": 103, "user_id": 4324532, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/259a9a75a419ca6997a83da73fb185ca?s=128&d=identicon&r=PG&f=1", "display_name": "FlorianQo", "link": "https://stackoverflow.com/users/4324532/florianqo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568815220, "creation_date": 1568815220, "question_id": 57994559, "link": "https://stackoverflow.com/questions/57994559/how-to-marshal-the-following-c-method-into-c", "title": "How to marshal the following c++ method into c#", "body": "<p>We need to import native c## methods in c#, but we don't know how to marshal the code correctly. Especially we don't know which datatypes to use.</p>\n\n<p>Are the used datatypes in the dll import correct? </p>\n\n<pre><code>VDLL32 LS_STATUS_CODE VMSWINAPI MyMethodToImport(\n      unsigned char LSFAR *server_name, /*  IN */\n      VLSservInfo   LSFAR *srv_info,  /* out */\n      unsigned char LSFAR *unused1,   /*reserved*/\n      unsigned long LSFAR *unused2    /*reserved*/\n   );\n</code></pre>\n\n<p>For C# we used the following: </p>\n\n<pre><code>[DllImport(LibraryName, CallingConvention = CallingConvention.Cdecl, EntryPoint = \"MyMethodToImport\", CharSet = CharSet.Ansi)]\n                public static extern int MyMethodToImport(ref VLSservInfo servInfo, IntPtr serverName);\n</code></pre>\n\n<p>The current result is empty, so serverName is not interpreted correctly inside the native dll\nI expect a not empty ServInfo object, but the actual output is empty.</p>\n"}, {"tags": ["c++", "qt", "compiler-errors", "canon-sdk"], "answers": [{"tags": [], "owner": {"reputation": 432, "user_id": 11092567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c68ea55ffcdd5622ddb3c4f62350b58?s=128&d=identicon&r=PG&f=1", "display_name": "George", "link": "https://stackoverflow.com/users/11092567/george"}, "is_accepted": true, "score": 0, "last_activity_date": 1568892263, "creation_date": 1568892263, "answer_id": 58009918, "question_id": 57994516, "link": "https://stackoverflow.com/questions/57994516/undefined-reference-error-when-using-canon-edsdk/58009918#58009918", "title": "Undefined reference error when using canon EDSDK", "body": "<p>Moving <em>.dll</em> files to the location of the exe file did the trick for me</p>\n"}], "owner": {"reputation": 432, "user_id": 11092567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c68ea55ffcdd5622ddb3c4f62350b58?s=128&d=identicon&r=PG&f=1", "display_name": "George", "link": "https://stackoverflow.com/users/11092567/george"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 58009918, "answer_count": 1, "score": 0, "last_activity_date": 1568892263, "creation_date": 1568815109, "question_id": 57994516, "link": "https://stackoverflow.com/questions/57994516/undefined-reference-error-when-using-canon-edsdk", "title": "Undefined reference error when using canon EDSDK", "body": "<p>I'm developing an application which uses canon EDSDK.</p>\n\n<p>According to documentation, i've moved EDSDK folder into my project folder, included a path to <em>.h</em> files and linked the EDSDK library to my project using theese lines of code in my <em>.pro</em> file:</p>\n\n<pre><code>INCLUDEPATH += C:\\QtProjects\\EcoGeosPhoto\\EDSDK\\Header\n\nLIBS += C:\\QtProjects\\EcoGeosPhoto\\EDSDK\\Library\\EDSDK.lib\n</code></pre>\n\n<p>The paths are correct.</p>\n\n<p>I also included all the <em>.h</em> files like so:</p>\n\n<pre><code>#include \"EDSDK.h\"\n#include \"EDSDKErrors.h\"\n#include \"EDSDKTypes.h\"\n</code></pre>\n\n<p>The problem is that when i use simple lines of code, such as:</p>\n\n<pre><code>EdsError err = EDS_ERR_OK;\nEdsCameraListRef cameraList = nullptr;\nerr = EdsGetCameraList(&amp;cameraList);\n</code></pre>\n\n<p>compiler complains about \"<em>undefined reference to `__imp_EdsGetCameraList'</em>\".</p>\n\n<p>Am i missing something? Any help is appreciated.</p>\n\n<p>P.s. i'm using MinGW 7.3.0. 64-bit for C++ compiler, if that matters.</p>\n"}, {"tags": ["c++", "crt"], "owner": {"reputation": 535, "user_id": 2054335, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1ec8e695a700d149e007928fc18e5582?s=128&d=identicon&r=PG", "display_name": "x6herbius", "link": "https://stackoverflow.com/users/2054335/x6herbius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1568815019, "creation_date": 1568815019, "question_id": 57994481, "link": "https://stackoverflow.com/questions/57994481/substituting-overriding-windows-crt-for-low-level-debugging", "title": "Substituting/overriding Windows CRT for low-level debugging", "body": "<p>I have been looking at <a href=\"https://github.com/ValveSoftware/source-sdk-2013/blob/master/mp/src/public/tier0/memoverride.cpp\" rel=\"nofollow noreferrer\">some Source Engine code</a> recently, and in the very low layers the developers have a file called <code>memoverride.cpp</code> which overrides some core runtime facilities for debugging purposes. This involves re-implementing the entire interface that the CRT provides (eg. functions for <code>malloc</code> and <code>msize</code>, stubs for <code>_crtBreakAlloc</code>, etc.) and routing the calls through a custom class to keep track of allocations and the like.</p>\n\n<p>I thought this was interesting and tried to recreate it myself out of curiosity, but when linking I get conflicts between the custom implementation and <code>libucrt</code>'s symbols. If I use the <code>/Zl</code> compiler option on Windows to not link against the Windows CRT, I then get all sorts of undefined symbols regarding the rest of the CRT functionality (the string functions, for example).</p>\n\n<p>Is this approach advisable for low-level debugging, and if so, what's the correct way to accomplish it? Would it require not linking against the CRT at all, or only choosing parts of it?</p>\n"}, {"tags": ["c++", "class", "scope", "typedef"], "answers": [{"tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 1, "last_activity_date": 1568815219, "creation_date": 1568815219, "answer_id": 57994558, "question_id": 57994479, "link": "https://stackoverflow.com/questions/57994479/should-a-typedef-be-both-in-the-class-definition-and-class-declaration/57994558#57994558", "title": "Should a typedef be both in the class definition and class declaration?", "body": "<p>Your two typdefs actually declare two different aliases for the same type. One is <code>ProductFilter::Items</code> the other is <code>Items</code> in the global namespace. </p>\n\n<p>Actually I am not sure of the rules which one you get when writing <code>Items</code> within the scope of <code>ProductFilter</code>, though it doesnt really matter as they are identical anyhow. </p>\n\n<p>You only need either of them. Which one you pick depends on in which scope you want declare it. If <code>Items</code> semantically belongs to <code>ProductFilter</code> then I'd choose the first and put it in the declaration only.</p>\n\n<p>You would have to qualify the return type as <code>ProductFilter::Items</code> (or use trailing return type).</p>\n"}, {"comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1568815315, "post_id": 57994576, "comment_id": 102395750, "body": "Or <code>auto ProductFilter::by_color(Items items, Color color) -&gt; Items</code>."}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1568815278, "creation_date": 1568815278, "answer_id": 57994576, "question_id": 57994479, "link": "https://stackoverflow.com/questions/57994479/should-a-typedef-be-both-in-the-class-definition-and-class-declaration/57994576#57994576", "title": "Should a typedef be both in the class definition and class declaration?", "body": "<p>Just use the qualified name of the typedef outside the class scope</p>\n\n<pre><code>ProductFilter::Items ProductFilter::by_color(Items items, Color color) {\n    Items result;\n    for (auto&amp; item : items)\n        if (item-&gt;color == color)\n            result.push_back(item);\n    return result;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 2, "last_activity_date": 1568815327, "creation_date": 1568815327, "answer_id": 57994595, "question_id": 57994479, "link": "https://stackoverflow.com/questions/57994479/should-a-typedef-be-both-in-the-class-definition-and-class-declaration/57994595#57994595", "title": "Should a typedef be both in the class definition and class declaration?", "body": "<p>You don't need to defined the typedef in the class declaration and class definition.  The reason you are doing so is that when you do</p>\n\n<pre><code>Items ProductFilter::by_color(Items items, Color color) {\n    Items result;\n    for (auto&amp; item : items)\n        if (item-&gt;color == color)\n            result.push_back(item);\n    return result;\n}\n</code></pre>\n\n<p>The <code>Items</code> for the return type is not scoped to the class, so <code>Items</code> needs to be a name in the global scope.  If you use</p>\n\n<pre><code>ProductFilter::Items ProductFilter::by_color(Items items, Color color) {\n    Items result;\n    for (auto&amp; item : items)\n        if (item-&gt;color == color)\n            result.push_back(item);\n    return result;\n}\n</code></pre>\n\n<p>Then you no longer have this issue and you can just have the typedef in the class declaration.</p>\n\n<hr>\n\n<p>The reason you don't need to do <code>ProductFilter::Items</code> in</p>\n\n<pre><code>ProductFilter::by_color(Items items, Color color)\n</code></pre>\n\n<p>is because the <code>ProductFilter::</code> puts you in the scope of the class so you can use names defined in the class without having to qualify them.</p>\n"}, {"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 2, "last_activity_date": 1568815394, "creation_date": 1568815394, "answer_id": 57994622, "question_id": 57994479, "link": "https://stackoverflow.com/questions/57994479/should-a-typedef-be-both-in-the-class-definition-and-class-declaration/57994622#57994622", "title": "Should a typedef be both in the class definition and class declaration?", "body": "<p>Your definition should be:</p>\n\n<pre><code>ProductFilter::Items ProductFilter::by_color(Items items, Color color)\n{\n    // ...\n}\n</code></pre>\n\n<p>or, with trailing return type:</p>\n\n<pre><code>auto ProductFilter::by_color(Items items, Color color) -&gt; Items \n{\n    // ...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 405, "user_id": 7080683, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vHnjck4jA_4/AAAAAAAAAAI/AAAAAAAAACE/wU6N3qQY4hM/photo.jpg?sz=128", "display_name": "Arne J", "link": "https://stackoverflow.com/users/7080683/arne-j"}, "is_accepted": false, "score": 0, "last_activity_date": 1568816338, "creation_date": 1568816338, "answer_id": 57994961, "question_id": 57994479, "link": "https://stackoverflow.com/questions/57994479/should-a-typedef-be-both-in-the-class-definition-and-class-declaration/57994961#57994961", "title": "Should a typedef be both in the class definition and class declaration?", "body": "<p>There is nothing wrong with wanting to get the type out of that class in the cpp for practical reasons. You just should not redefine, but alias it instead :</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// top of cpp file\nusing Items = ProductFilter::Items;\n</code></pre>\n\n<p>If the type of Items ever changes, the alias will not need to be rewritten.</p>\n"}], "owner": {"reputation": 23, "user_id": 11748085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa7f8b7ee47a611bf477e25c645c5d69?s=128&d=identicon&r=PG&f=1", "display_name": "xatja", "link": "https://stackoverflow.com/users/11748085/xatja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 57994595, "answer_count": 5, "score": 2, "last_activity_date": 1568816338, "creation_date": 1568815012, "last_edit_date": 1568815506, "question_id": 57994479, "link": "https://stackoverflow.com/questions/57994479/should-a-typedef-be-both-in-the-class-definition-and-class-declaration", "title": "Should a typedef be both in the class definition and class declaration?", "body": "<p>I'm learning C++. I know that C++ is a bit more verbose than most other languages, however defining a <code>typedef</code> in a struct/ class declaration and then again in the struct/ class definition got me thinking if there isn't a better or more central place for the <code>typedef</code> where it only has to be defined once, and whether this follows what is thought of as C++ best practices. I couldn't find anything in particular about this on the web.</p>\n\n<p>Moving the <code>typedef</code> to a more global place seems inappropriate and the <code>typedef</code> is both used for the definition and implementation of the method within the struct. </p>\n\n<pre><code>//--ProductFilter.h--\nstruct ProductFilter {\n    typedef std::vector&lt;Product*&gt; Items;\n    static Items by_color(Items items, Color color);\n};\n\n//--ProductFilter.cpp--\ntypedef std::vector&lt;Product*&gt; Items;\nItems ProductFilter::by_color(Items items, Color color) {\n    Items result;\n    for (auto&amp; item : items)\n        if (item-&gt;color == color)\n            result.push_back(item);\n    return result;\n}\n</code></pre>\n"}, {"tags": ["c++", "abstract-class", "access-modifiers"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1568814717, "post_id": 57994320, "comment_id": 102395363, "body": "You can&#39;t if you want to keep it public.  Public means everyone has access."}, {"owner": {"reputation": 846, "user_id": 7200084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e3f015adb015ff957d7924beb4be217?s=128&d=identicon&r=PG&f=1", "display_name": "f4f", "link": "https://stackoverflow.com/users/7200084/f4f"}, "edited": false, "score": 0, "creation_date": 1568814940, "post_id": 57994320, "comment_id": 102395520, "body": "You may use protected function and inheritance or friend functions."}, {"owner": {"reputation": 443, "user_id": 6632694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a733fba5a6e866a17b36d7873a8e68f7?s=128&d=identicon&r=PG&f=1", "display_name": "Kiran Thilak", "link": "https://stackoverflow.com/users/6632694/kiran-thilak"}, "edited": false, "score": 0, "creation_date": 1568815119, "post_id": 57994320, "comment_id": 102395633, "body": "Make class <code>B</code> inherit <code>A</code> ( <code>class B : public A</code> ) then we will be able to define foo in B or any of its subclasses."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1568815198, "post_id": 57994320, "comment_id": 102395685, "body": "All of your accessibility restrictions can be disabled with <code>#define private public</code> and <code>#define class struct</code> if someone is so inclined."}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1568815397, "post_id": 57994460, "comment_id": 102395809, "body": "If they make it private the name is not available to the derived classes."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1568815493, "post_id": 57994460, "comment_id": 102395864, "body": "@NathanOliver It&#39;s infeasible for <code>A</code> to list the derived classes of <code>B</code> as friends. That&#39;s why the derived classes need to access the function through the helper in base."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 2, "last_activity_date": 1568815558, "last_edit_date": 1568815558, "creation_date": 1568814961, "answer_id": 57994460, "question_id": 57994320, "link": "https://stackoverflow.com/questions/57994320/how-to-limit-the-accessibility-of-an-abstract-class-to-another-abstract-class-an/57994460#57994460", "title": "How to limit the accessibility of an abstract class to another abstract class and its subclasses?", "body": "<p>Declare <code>A::foo</code> private (or protected). If it is public, then there are no limits on access.</p>\n\n<p>Only way to give access to a non-public function to unrelated class is to declare the class a friend.</p>\n\n<p>Friendliness is not inherited however. So, <code>B</code> needs to provide protected function that delegates to the restricted function so that derived classes can access the member through <code>B</code>.</p>\n\n<p>An example:</p>\n\n<pre><code>class A {\n   ...\n   friend class B;\nprivate:\n   virtual void foo() = 0;\n};\n\nclass B {\n   ...\nprotected:\n    void foo(A&amp; a) {\n        a.foo();\n    }\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "is_accepted": false, "score": 1, "last_activity_date": 1568816893, "creation_date": 1568816893, "answer_id": 57995154, "question_id": 57994320, "link": "https://stackoverflow.com/questions/57994320/how-to-limit-the-accessibility-of-an-abstract-class-to-another-abstract-class-an/57995154#57995154", "title": "How to limit the accessibility of an abstract class to another abstract class and its subclasses?", "body": "<p>This is probably overengineered, but here's my suggestion.</p>\n\n<p>TL;DR: Make <code>goo()</code> public and add a dummy parameter to it that can only be constructed by <code>B</code> or classes derived from it.</p>\n\n<hr>\n\n<p>First, you create a dummy class (let's say <code>AccessKey&lt;T&gt;</code>) that can only be constructed by <code>T</code> (the constructor is private and <code>T</code> is a <code>friend</code>).</p>\n\n<p>Additionally, <code>AccessKey&lt;T&gt;</code> should be convertible to <code>AccessKey&lt;U&gt;</code> if <code>U</code> is a base of <code>T</code>.</p>\n\n<pre><code>#include &lt;cstddef&gt;\n#include &lt;type_traits&gt;\n\ntemplate &lt;typename T&gt;\nclass AccessKey\n{\n    friend T;\n    template &lt;typename&gt; friend class AccessKey;\n\n    constexpr AccessKey() {}\n\n  public:\n    template &lt;typename U, std::enable_if_t&lt;std::is_base_of_v&lt;U, T&gt;, std::nullptr_t&gt; = nullptr&gt;\n    constexpr operator AccessKey&lt;U&gt;() const {return {};}\n};\n</code></pre>\n\n<p>Then you make <code>virtual void foo() = 0</code> public, and add a <code>AccessKey&lt;B&gt;</code> parameter (forward-declare <code>class B</code> first).</p>\n\n<pre><code>class A\n{\n  public:\n    virtual void foo(AccessKey&lt;B&gt;) = 0;\n};\n</code></pre>\n\n<p>Then...</p>\n\n<pre><code>class B\n{\n  public:\n    void goo(A &amp;a)\n    {\n        a.foo(AccessKey&lt;B&gt;{}); // ok\n    }\n};\n\nclass C : public B\n{\n  public:\n    void goo(A &amp;a)\n    {\n        a.foo(AccessKey&lt;C&gt;{}); // ok\n    }\n};\n\nclass D\n{\n  public:\n    void goo(A &amp;a)\n    {\n        a.foo(AccessKey&lt;D&gt;{}); // error: AccessKey&lt;D&gt; is not convertible to AccessKey&lt;B&gt;\n        a.foo(AccessKey&lt;B&gt;{}); // error: AccessKey&lt;B&gt;() is private\n    }\n};\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5323639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d251ba5460056c9d39e01f61b9f4423?s=128&d=identicon&r=PG&f=1", "display_name": "chen", "link": "https://stackoverflow.com/users/5323639/chen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1568816893, "creation_date": 1568814578, "question_id": 57994320, "link": "https://stackoverflow.com/questions/57994320/how-to-limit-the-accessibility-of-an-abstract-class-to-another-abstract-class-an", "title": "How to limit the accessibility of an abstract class to another abstract class and its subclasses?", "body": "<p>Given two abstract classes A and B, how to make the public member function of A only accessible to B and its derived classes? i.e.</p>\n\n<pre><code>class A {\npublic:\n   virtual ~A(){}\n   virtual void foo() = 0; // foo only accessible to B and its subclasses; foo is private to others\n};\nclass B {\n   virtual ~B(){}\n   virtual void goo() = 0;\n};\n</code></pre>\n"}, {"tags": ["java", "c++", "algorithm"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1568880467, "post_id": 57994109, "comment_id": 102417637, "body": "<b>Moderator note</b>: do not vandalise posts; as per the terms and conditions it has been licensed to the site the moment you posted it.  We do not delete questions once they have accrued answers, as the posted solutions may prove helpful to future visitors."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1568880514, "post_id": 57994109, "comment_id": 102417659, "body": "(And it appears I accidentally cleared your flag requesting deletion last night, which would ordinarily have been declined. My apologies if this caused confusion)."}], "answers": [{"tags": [], "owner": {"reputation": 11552, "user_id": 8112138, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3b1ddf31abbf37d5fe71ad387e2772c?s=128&d=identicon&r=PG&f=1", "display_name": "Primusa", "link": "https://stackoverflow.com/users/8112138/primusa"}, "is_accepted": true, "score": 3, "last_activity_date": 1568821358, "last_edit_date": 1568821358, "creation_date": 1568816848, "answer_id": 57995142, "question_id": 57994109, "link": "https://stackoverflow.com/questions/57994109/how-to-convert-this-recurrence-solution-to-divide-and-conquer/57995142#57995142", "title": "How to convert this recurrence solution to divide and conquer?", "body": "<p>This appears to be the a minor modification of the <a href=\"https://leetcode.com/problems/burst-balloons/\" rel=\"nofollow noreferrer\">burst balloons problem on leetcode</a> which I wrote the editorial solution to. </p>\n\n<p>Recursion will work but for our intents and purposes it is too slow. Recursively removing every balloon and caching gives us <code>2^N</code> states, which is the power set of our balloons. We'd like to solve this problem in polynomial time. </p>\n\n<p>Divide and conquer is definitely the right idea. </p>\n\n<ul>\n<li><p>After bursting balloon <code>i</code>, we can divide the problem into the balloons to the left of <code>i</code> (<code>nums[0:i]</code>) and to the right of <code>i</code> (<code>nums[i+1:]</code>).</p></li>\n<li><p>To find the optimal solution we check every optimal solution after bursting each balloon.</p></li>\n<li><p>Since we will find the optimal solution for every range in nums, and we burst every balloon in every range to find the optimal solution, we have an <code>O(N^2)</code> ranges times <code>O(N)</code> time per range which is a <code>O(N^3)</code> solution</p></li>\n<li><p>However, if we try to divide our problem in the order where we burst balloons first, we run into an issue. As balloons burst, the adjacency of other balloons changes. We are unable to keep track of what balloons the endpoints of our intervals are adjacent to. This is where your solution has issues. </p></li>\n</ul>\n\n<p>To elaborate on that last point:</p>\n\n<p>When you do:</p>\n\n<pre><code>int l = find(v, L, i-1);\n</code></pre>\n\n<p>You might not actually get the optimal solution. Consider that balloon <code>i - 1</code> is now adjacent to balloon <code>i + 1</code> after you've burst balloon <code>i</code>. If you then burst balloon <code>i - 1</code>, balloon <code>i - 2</code> is now adjacent to balloon <code>i + 1</code>. If you attempt divide on every balloon burst, your <code>find</code> has to somehow still consider balloons outside the range <code>[L, R]</code>.</p>\n\n<p>To solve this instead of bursting balloons and dividing we consider adding balloons into an initially empty interval in reverse the order that they were burst.</p>\n\n<p>Let <code>dp(i, j)</code> denote the maximum score on <code>[i, j]</code>. For each balloon <code>k</code> on <code>[i + 1, j - 1]</code>, we add it into the interval and compute the score. After we add the balloon we can always then divide the problem into <code>[i, k]</code> and <code>[k, j]</code>, because the left and right boundaries are known. This gets rid of adjacency issues. </p>\n\n<p>A trickier part is to fulfill \"if you burst the last balloon then you will get the amount of points written on it.\" We manually iterate over the last balloon we burst and apply divide and conquer as with before. </p>\n\n<p>See the code to get a better idea:</p>\n\n<pre><code>\nclass Solution {\n    public int maxCoins(int[] nums) {\n\n        int n = nums.length + 2;\n        int[] new_nums = new int[n];\n\n        for(int i = 0; i &lt; nums.length; i++){\n            new_nums[i+1] = nums[i];\n        }\n\n        new_nums[0] = new_nums[n - 1] = 1;\n\n        // cache the results of dp\n        int[][] memo = new int[n][n];\n\n        // find the maximum number of coins obtained from adding all balloons from (0, len(nums) - 1)\n        int ans = 0;\n\n        // manually burst the last balloon because it has special rules\n        for(int i = 1; i &lt; n; ++i){\n            ans = Math.max(ans, new_nums[i] + dp(memo, new_nums, i, n - 1) + dp(memo, new_nums, 0, i));\n        }\n        return ans;\n    }\n\n    public int dp(int[][] memo, int[] nums, int left, int right) {\n        // no more balloons can be added\n        if (left + 1 == right) return 0;\n\n        // we've already seen this, return from cache\n        if (memo[left][right] &gt; 0) return memo[left][right];\n\n        // add each balloon on the interval and return the maximum score\n        int ans = 0;\n        for (int i = left + 1; i &lt; right; ++i)\n            ans = Math.max(ans, nums[left] * nums[right]\n            + dp(memo, nums, left, i) + dp(memo, nums, i, right));\n        // add to the cache\n        memo[left][right] = ans;\n        return ans;\n    }\n}\n\n</code></pre>\n\n<p>Input:</p>\n\n<pre><code>[1, 2, 3, 4]\n[5, 7, 8]\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>20\n56\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 12085303, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-401FYgwHWzY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcpMiTSwL7Plt3ZZo9BjKx4N_ymxw/photo.jpg?sz=128", "display_name": "Uzi Yokohama", "link": "https://stackoverflow.com/users/12085303/uzi-yokohama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 355, "favorite_count": 0, "accepted_answer_id": 57995142, "answer_count": 1, "score": -1, "last_activity_date": 1568880299, "creation_date": 1568813896, "last_edit_date": 1568880285, "question_id": 57994109, "link": "https://stackoverflow.com/questions/57994109/how-to-convert-this-recurrence-solution-to-divide-and-conquer", "title": "How to convert this recurrence solution to divide and conquer?", "body": "<p>How to solve this question:</p>\n\n<blockquote>\n  <p>Given n balloons, indexed from 0 to n-1. Each balloon is painted with\n  a number on it represented by array nums. You are asked to burst all\n  the balloons. If the you burst balloon i you will get nums[left] *\n  nums[right] coins. Here left and right are adjacent indices of i.\n  After the burst, the left and right then becomes adjacent.If you burst\n  the corner balloons then you will get the points that are adjacent to\n  those balloons.If you burst the last balloon then you will get the\n  amount of points written on it.  Find the maximum coins you can\n  collect by bursting the balloons wisely.</p>\n</blockquote>\n\n<p>Sample test case :</p>\n\n<pre><code>{1,2,3,4}\n20\n{5,7,8}\n56\n</code></pre>\n\n<p>I have tried this solution using recursion which seems to give the correct answer:</p>\n\n<pre><code>public static int maxCoints(List&lt;Integer&gt; list) {\n        int max = 0;\n        if (list.size() == 1) {\n            return list.get(0);\n        }\n        if(list.size() == 2) {\n            return Math.max(list.get(0),list.get(1))*2;\n        }\n        for (int i = 0; i &lt; list.size(); i++) {\n            int left = i == 0 ? 1 : list.get(i-1);\n            int right = i == list.size()-1 ? 1 : list.get(i+1);\n            int n = left * right;\n            List&lt;Integer&gt; tmp = new ArrayList&lt;&gt;(list);\n            tmp.remove(i);\n            max = Math.max(max, n + maxCoints(tmp));\n        }\n        return max;\n    }\n</code></pre>\n\n<p>But I have tried this solution for divide and conquer but it seems to give wrong answer for the first test case this gives answer as 17 instead of 20</p>\n\n<pre><code>int find(vector&lt;int&gt;&amp; v, int L, int R) {\n    int ans = 0;\n    // if(L==R)    return v[L];\n    for (int i = L; i &lt;= R; i++) {\n        int l = find(v, L, i-1);\n        int r = find(v, i+1, R);\n        int val = v[L-1]*v[R+1] + l + r;\n        ans = max(ans, val);\n    }\n    return ans;\n}\n\nint32_t main() {\nfast_io;\n    ll tt;  cin &gt;&gt; tt;\n    while(tt--) {\n        ll n;   cin &gt;&gt; n;\n        vector&lt;int&gt; v(n+2,1);\n        for(int i=1;i&lt;=n;i++) {\n            cin &gt;&gt; v[i];\n        }\n        cout &lt;&lt; find(v,1,n) &lt;&lt; \"\\n\";\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Please help me figure out the mistake.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "edited": false, "score": 0, "creation_date": 1568818023, "post_id": 57994015, "comment_id": 102397478, "body": "What is the call returning? Is it a value or null? Is null what you mean by, <i>I am not getting any information</i>?"}, {"owner": {"reputation": 11, "user_id": 6777649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/252ccfcef19a90bc8468b9c461249ee4?s=128&d=identicon&r=PG&f=1", "display_name": "Prashanth", "link": "https://stackoverflow.com/users/6777649/prashanth"}, "reply_to_user": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "edited": false, "score": 0, "creation_date": 1568871865, "post_id": 57994015, "comment_id": 102413637, "body": "Its returning a null value"}, {"owner": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "edited": false, "score": 0, "creation_date": 1568909201, "post_id": 57994015, "comment_id": 102433950, "body": "I&#39;m coming up with nothing on sharing an image handle between apps. Is the other process yours? google <code>cross process handle sharing</code>. It doesn&#39;t look like you can just share a handle without some hoops. But I don&#39;t know for sure. You should add more tags that address this to your question."}], "owner": {"reputation": 11, "user_id": 6777649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/252ccfcef19a90bc8468b9c461249ee4?s=128&d=identicon&r=PG&f=1", "display_name": "Prashanth", "link": "https://stackoverflow.com/users/6777649/prashanth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568813602, "creation_date": 1568813602, "question_id": 57994015, "link": "https://stackoverflow.com/questions/57994015/get-images-of-a-listview-from-another-process-in-c", "title": "Get Images of a listview from another process in c++", "body": "<p>I am trying to get all the images from listview which I am running from another process.</p>\n\n<p>I am trying ::SendMessage(hwndListView, LVM_GETIMAGELIST, LVSIL_NORMAL) <a href=\"https://docs.microsoft.com/en-us/windows/win32/controls/lvm-getimagelist\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/windows/win32/controls/lvm-getimagelist</a> says it returns a handle but I am not getting any information </p>\n\n<p>I want to get all the images of the listview item in the form of bitmap or any other form.</p>\n\n<p>Any sample code would be helpful</p>\n"}, {"tags": ["c++", "vector", "struct", "find"], "answers": [{"comments": [{"owner": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "edited": false, "score": 0, "creation_date": 1568813952, "post_id": 57994077, "comment_id": 102394881, "body": "One could use <code>std::string::npos</code> instead of a literal <code>-1</code>."}, {"owner": {"reputation": 405, "user_id": 7080683, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vHnjck4jA_4/AAAAAAAAAAI/AAAAAAAAACE/wU6N3qQY4hM/photo.jpg?sz=128", "display_name": "Arne J", "link": "https://stackoverflow.com/users/7080683/arne-j"}, "reply_to_user": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "edited": false, "score": 0, "creation_date": 1568814246, "post_id": 57994077, "comment_id": 102395056, "body": "Absolutely ! But I don&#39;t like giving the complete answer :) better to inspire to look up the find() method"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1568815808, "post_id": 57994077, "comment_id": 102396049, "body": "strictly speaking the value is not <code>-1</code>, the <code>-1</code> is only used to define it. <code>std::string::find</code> returns an unsigned"}], "tags": [], "owner": {"reputation": 405, "user_id": 7080683, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vHnjck4jA_4/AAAAAAAAAAI/AAAAAAAAACE/wU6N3qQY4hM/photo.jpg?sz=128", "display_name": "Arne J", "link": "https://stackoverflow.com/users/7080683/arne-j"}, "is_accepted": false, "score": 1, "last_activity_date": 1568813793, "creation_date": 1568813793, "answer_id": 57994077, "question_id": 57993929, "link": "https://stackoverflow.com/questions/57993929/search-vector-of-struct-for-user-inputted-string/57994077#57994077", "title": "Search vector of struct for user inputted string", "body": "<p>The problem lies with <code>if(Oscars.at(i).entity.find(input)){</code> : the <code>std::string::find</code> will return -1 whenever some text is not found. So <code>if(-1)</code> will be evaluated to true in the very first entry if the first entry doesn't contain the words to be searched for.</p>\n"}, {"tags": [], "owner": {"reputation": 505, "user_id": 9957598, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sDfEWpTibVk/AAAAAAAAAAI/AAAAAAAAAPI/NZ-1XBYt9Jg/photo.jpg?sz=128", "display_name": "Rokas Vi\u0161inskas", "link": "https://stackoverflow.com/users/9957598/rokas-vi%c5%a1inskas"}, "is_accepted": true, "score": 3, "last_activity_date": 1568815111, "last_edit_date": 1568815111, "creation_date": 1568813827, "answer_id": 57994089, "question_id": 57993929, "link": "https://stackoverflow.com/questions/57993929/search-vector-of-struct-for-user-inputted-string/57994089#57994089", "title": "Search vector of struct for user inputted string", "body": "<p>You are using <code>string::find</code> instead of just comparing a string with a string.\nAssuming <code>entity</code> is of type <code>string</code>. The following code should work fine.</p>\n\n<pre><code>bool found = false;\nfor(int i = 0; i &lt; Oscars.size(); i++){\n    if(Oscars[i].entity == input){\n        cout &lt;&lt; \"Found at \" &lt;&lt; i &lt;&lt; '\\n';\n        found = true;\n        break;\n    }\n\n}\n</code></pre>\n\n<p>Some points:</p>\n\n<ul>\n<li><a href=\"https://www.youtube.com/watch?v=GMqQOEZYVJQ\" rel=\"nofollow noreferrer\">Kindly consider not using endl.</a></li>\n<li>You don't need the safety of <code>vector::at</code> when iterating based on <code>i &lt; vec.size()</code>.</li>\n</ul>\n"}], "owner": {"reputation": 49, "user_id": 11076262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d953374a03243285613b388d31afc58?s=128&d=identicon&r=PG&f=1", "display_name": "Hudie", "link": "https://stackoverflow.com/users/11076262/hudie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 57994089, "answer_count": 2, "score": 1, "last_activity_date": 1568815111, "creation_date": 1568813327, "question_id": 57993929, "link": "https://stackoverflow.com/questions/57993929/search-vector-of-struct-for-user-inputted-string", "title": "Search vector of struct for user inputted string", "body": "<p>I've created a program that takes in an input file with 1000+ entries formatted as such:</p>\n\n<p>year, category, won, entity</p>\n\n<p>I created a struct with a string element for each of parts of one entry. I now want to ask the user to input a specific entity's name such as \"Emil Jannings\" and return the index it is at so I can use that index to print out the line of information for that entity. </p>\n\n<p>The first few lines of the input file are this:</p>\n\n<p>year,category,winner,entity</p>\n\n<p>1927,ACTOR,FALSE,Richard Barthelmess</p>\n\n<p>1927,ACTOR,TRUE,Emil Jannings</p>\n\n<p>1927,ACTRESS,FALSE,Louise Dresser</p>\n\n<p>If the user inputted \"Emil Jannings\" as the input string, I want my loop to return the index it is at. My problem is that the loop returns 0 for i no matter what. Is there something fundamentally wrong with how my loop is set up? In addition theres a unknown amount of the same entity in the input file, Emil Jannings can show up more than once. How can I alter the loop to continue giving me every index it is found until the end of the input file? Thank you.</p>\n\n<pre><code>    for(;(getline(in, str)); i++){\n\n    istringstream iss(str);\n    Oscars.push_back(Oscar_Awards());\n\n    getline(iss, str2, ',');\n        Oscars.at(i).year = str2;\n    getline(iss, str2, ',');\n        Oscars.at(i).category = str2;\n    getline(iss, str2, ',');\n        Oscars.at(i).won = str2;\n    getline(iss, str2, ',');\n        Oscars.at(i).entity = str2;\n\n}\n\ncout &lt;&lt; \"Input Name of Entity\" &lt;&lt; endl;\nstring input;\ncin &gt;&gt; input;\n\n\n\nbool found = false;\nfor(int i = 0; i &lt; Oscars.size(); i++){\n    if(Oscars.at(i).entity.find(input)){\n        cout &lt;&lt; \"Found at \" &lt;&lt; i &lt;&lt; endl;\n        found = true;\n        break;\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c++", "gcc", "dll", "c++17"], "comments": [{"owner": {"reputation": 413, "user_id": 4567486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b002548b61e476dc1b4c61a5dafb0d9?s=128&d=identicon&r=PG&f=1", "display_name": "andrey", "link": "https://stackoverflow.com/users/4567486/andrey"}, "edited": false, "score": 0, "creation_date": 1568814589, "post_id": 57993818, "comment_id": 102395270, "body": "Considering that Clang <a href=\"https://godbolt.org/z/nc6kgW\" rel=\"nofollow noreferrer\">handles</a> the <code>struct __attribute__((dllexport)) [[nodiscard]] MyObject</code> version, it might be a bug (or rather absence of a feature) in GCC.  Also note that GCC on Windows <a href=\"https://gcc.gnu.org/wiki/Visibility\" rel=\"nofollow noreferrer\">handles</a> <code>__declspec(dllexport)</code>."}, {"owner": {"reputation": 338, "user_id": 2999946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3485bd72f70abc54bafe40f7fe52d843?s=128&d=identicon&r=PG&f=1", "display_name": "Taras", "link": "https://stackoverflow.com/users/2999946/taras"}, "reply_to_user": {"reputation": 413, "user_id": 4567486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b002548b61e476dc1b4c61a5dafb0d9?s=128&d=identicon&r=PG&f=1", "display_name": "andrey", "link": "https://stackoverflow.com/users/4567486/andrey"}, "edited": false, "score": 0, "creation_date": 1568816399, "post_id": 57993818, "comment_id": 102396412, "body": "@andrey  The link you provided shows me the code with <code>__attribute__((visibility(&quot;default&quot;)))</code> instead of <code>__attribute__((dllexport))</code>. And if I replace that with <code>__attribute__((dllexport))</code>, I get the following warning: <code>unknown attribute &#39;dllexport&#39; ignored [-Wunknown-attributes]</code>."}, {"owner": {"reputation": 413, "user_id": 4567486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b002548b61e476dc1b4c61a5dafb0d9?s=128&d=identicon&r=PG&f=1", "display_name": "andrey", "link": "https://stackoverflow.com/users/4567486/andrey"}, "edited": false, "score": 0, "creation_date": 1568816880, "post_id": 57993818, "comment_id": 102396717, "body": "That&#39;s because the Compiler Explorer node with Clang is running Linux. <code>dllexport</code> is for DLLs, which are Windows shared libraries. The equivalent attribute for shared libraries on Linux (and probably MacOS) is <code>visibility(&quot;default&quot;)</code> with <code>-fvisibility=hidden</code> on the command line. Naturally when building for Linux the compiler doesn&#39;t recognize the <code>dllexport</code> attribute (how ever it&#39;s written), but what matters, is that the attribute is parsed correctly (even if it&#39;s then ignored)."}, {"owner": {"reputation": 338, "user_id": 2999946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3485bd72f70abc54bafe40f7fe52d843?s=128&d=identicon&r=PG&f=1", "display_name": "Taras", "link": "https://stackoverflow.com/users/2999946/taras"}, "reply_to_user": {"reputation": 413, "user_id": 4567486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b002548b61e476dc1b4c61a5dafb0d9?s=128&d=identicon&r=PG&f=1", "display_name": "andrey", "link": "https://stackoverflow.com/users/4567486/andrey"}, "edited": false, "score": 0, "creation_date": 1568828229, "post_id": 57993818, "comment_id": 102402339, "body": "@andrey  Yes, I tested that code on Linux, but I didn&#39;t know much about creating shared libraries on Linux, so I thought that Linux compilers would be able to somehow recognize <code>dllexport</code> as well. Okay, so I should have used <code>__attribute__((visibility(&quot;default&quot;)))</code> instead. That&#39;s clear. Then, indeed, it&#39;s most likely a (yet another) GCC bug. If you write this as an answer, I will mark it as accepted."}], "answers": [{"comments": [{"owner": {"reputation": 338, "user_id": 2999946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3485bd72f70abc54bafe40f7fe52d843?s=128&d=identicon&r=PG&f=1", "display_name": "Taras", "link": "https://stackoverflow.com/users/2999946/taras"}, "edited": false, "score": 0, "creation_date": 1568816009, "post_id": 57994115, "comment_id": 102396160, "body": "I don&#39;t think it&#39;ll work. I thought that <code>[[gnu::dllexport]]</code> might exist, and googled specifically for it before asking this question on stackoverflow. But I found nothing then. And now, when I try to compile your piece of code, I get the warning <code>&#39;gnu::dllexport&#39; scoped attribute directive ignored</code>, which means that <code>[[gnu::dllexport]]</code> is an unknown attribute to GCC."}, {"owner": {"reputation": 413, "user_id": 4567486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b002548b61e476dc1b4c61a5dafb0d9?s=128&d=identicon&r=PG&f=1", "display_name": "andrey", "link": "https://stackoverflow.com/users/4567486/andrey"}, "reply_to_user": {"reputation": 338, "user_id": 2999946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3485bd72f70abc54bafe40f7fe52d843?s=128&d=identicon&r=PG&f=1", "display_name": "Taras", "link": "https://stackoverflow.com/users/2999946/taras"}, "edited": false, "score": 0, "creation_date": 1568819210, "post_id": 57994115, "comment_id": 102398167, "body": "@Taras I tried MinGW with GCC 8.1.0 and it recognized <code>[[gnu::dllexport]]</code> and <code>[[gnu::dllimport]]</code> (and the symbol was actually exported). Maybe you aren&#39;t on Windows?"}, {"owner": {"reputation": 413, "user_id": 4567486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b002548b61e476dc1b4c61a5dafb0d9?s=128&d=identicon&r=PG&f=1", "display_name": "andrey", "link": "https://stackoverflow.com/users/4567486/andrey"}, "reply_to_user": {"reputation": 338, "user_id": 2999946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3485bd72f70abc54bafe40f7fe52d843?s=128&d=identicon&r=PG&f=1", "display_name": "Taras", "link": "https://stackoverflow.com/users/2999946/taras"}, "edited": false, "score": 0, "creation_date": 1568824249, "post_id": 57994115, "comment_id": 102400814, "body": "@Taras Or maybe you are using an older version of GCC that doesn&#39;t support <code>[[gnu::dllexport]]</code>?"}, {"owner": {"reputation": 338, "user_id": 2999946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3485bd72f70abc54bafe40f7fe52d843?s=128&d=identicon&r=PG&f=1", "display_name": "Taras", "link": "https://stackoverflow.com/users/2999946/taras"}, "reply_to_user": {"reputation": 413, "user_id": 4567486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b002548b61e476dc1b4c61a5dafb0d9?s=128&d=identicon&r=PG&f=1", "display_name": "andrey", "link": "https://stackoverflow.com/users/4567486/andrey"}, "edited": false, "score": 0, "creation_date": 1568828252, "post_id": 57994115, "comment_id": 102402347, "body": "@andrey Replied to you in the comments above."}, {"owner": {"reputation": 338, "user_id": 2999946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3485bd72f70abc54bafe40f7fe52d843?s=128&d=identicon&r=PG&f=1", "display_name": "Taras", "link": "https://stackoverflow.com/users/2999946/taras"}, "edited": false, "score": 0, "creation_date": 1568828673, "post_id": 57994115, "comment_id": 102402507, "body": "Another little question from me: isn&#39;t there any <code>[[gnu::...]]</code> alternative for <code>__attribute__((visibility(&quot;default&quot;)))</code>?"}, {"owner": {"reputation": 413, "user_id": 4567486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b002548b61e476dc1b4c61a5dafb0d9?s=128&d=identicon&r=PG&f=1", "display_name": "andrey", "link": "https://stackoverflow.com/users/4567486/andrey"}, "reply_to_user": {"reputation": 338, "user_id": 2999946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3485bd72f70abc54bafe40f7fe52d843?s=128&d=identicon&r=PG&f=1", "display_name": "Taras", "link": "https://stackoverflow.com/users/2999946/taras"}, "edited": false, "score": 1, "creation_date": 1568829994, "post_id": 57994115, "comment_id": 102403018, "body": "@Taras There is. It&#39;s <a href=\"https://godbolt.org/z/1_-bOP\" rel=\"nofollow noreferrer\"><code>[[gnu::visibility(&quot;default&quot;)]]</code></a> :)"}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1568837959, "post_id": 57994115, "comment_id": 102406205, "body": "<a href=\"http://clang.llvm.org/docs/LanguageExtensions.html#non-standard-c-11-attributes\" rel=\"nofollow noreferrer\">At least clang</a> accepts all <code>__attribute__((name))</code>s also as c++11 <code>[[gnu::name]]</code>. While I think GCC does the same, I found no mention."}], "tags": [], "owner": {"reputation": 15724, "user_id": 5754656, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7jfX3.png?s=128&g=1", "display_name": "Artyer", "link": "https://stackoverflow.com/users/5754656/artyer"}, "is_accepted": false, "score": 2, "last_activity_date": 1568813915, "creation_date": 1568813915, "answer_id": 57994115, "question_id": 57993818, "link": "https://stackoverflow.com/questions/57993818/gcc-how-to-combine-attribute-dllexport-and-nodiscard-in-a-struct-de/57994115#57994115", "title": "gcc - How to combine __attribute__((dllexport)) and [[nodiscard]] in a struct definition?", "body": "<p>Try C++ attributes instead of using <code>__attribute__</code>:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>struct [[gnu::dllexport]] [[nodiscard]] MyObject final\n</code></pre>\n\n<p>And use a define to work with MSVC too</p>\n"}, {"comments": [{"owner": {"reputation": 338, "user_id": 2999946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3485bd72f70abc54bafe40f7fe52d843?s=128&d=identicon&r=PG&f=1", "display_name": "Taras", "link": "https://stackoverflow.com/users/2999946/taras"}, "edited": false, "score": 0, "creation_date": 1568910401, "post_id": 57999050, "comment_id": 102434487, "body": "Good answer, thank you. I also want to add that <code>__attribute__((visibility(&quot;default&quot;)))</code> and <code>[[gnu::visibility(&quot;default&quot;)]]</code> are not fully interchangeable. <code>__attribute((visibility(&quot;default&quot;))) int foo();</code> and <code>int __attribute((visibility(&quot;default&quot;))) foo();</code> are both valid, but the C++&#39;s standard attributes syntax is more restrictive: <code>[[gnu::visibility(&quot;default&quot;)]] int foo();</code> works correctly while <code>int [[gnu::visibility(&quot;default&quot;)]] foo();</code> does not :("}], "tags": [], "owner": {"reputation": 413, "user_id": 4567486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b002548b61e476dc1b4c61a5dafb0d9?s=128&d=identicon&r=PG&f=1", "display_name": "andrey", "link": "https://stackoverflow.com/users/4567486/andrey"}, "is_accepted": true, "score": 2, "last_activity_date": 1568832158, "creation_date": 1568832158, "answer_id": 57999050, "question_id": 57993818, "link": "https://stackoverflow.com/questions/57993818/gcc-how-to-combine-attribute-dllexport-and-nodiscard-in-a-struct-de/57999050#57999050", "title": "gcc - How to combine __attribute__((dllexport)) and [[nodiscard]] in a struct definition?", "body": "<p><em>All of this applies to both <code>dllexport</code> and <code>dllimport</code>.</em></p>\n\n<p>This seems to be a bug in the GCC parser.</p>\n\n<p>Clang <a href=\"https://godbolt.org/z/dmkWo8\" rel=\"nofollow noreferrer\">manages to parse</a> the <code>struct __attribute__((dllexport)) [[nodiscard]] MyObject ...</code> version.</p>\n\n<p>As was noted by <a href=\"https://stackoverflow.com/a/57994115/4567486\">@Artyer</a>, GCC (and Clang) support the C++ syntax for <code>dllexport</code> - <code>[[gnu::dllexport]]</code>.</p>\n\n<p>Also it should be noted that GCC on Windows (MinGW) supports <code>__declspec(dllexport)</code> for compatibility with Visual C++ and actually parses <code>class __declspec(dllexport) [[nodiscard]] Test ...</code> correctly (tested with GCC 8.1.0).</p>\n\n<hr>\n\n<p>All of the above assumes you're compiling for Windows, where <code>dllexport</code> actually means something. On other platforms the compiler will simply ignore it (and usually emit a warning).</p>\n\n<p>On Linux one should use <code>-fvisibility=hidden</code> to hide all symbols except the ones chosen by the attribute <code>visibility(\"default\")</code>. There is no \"import\" alternative - use <code>\"default\"</code> both when building and using the library. When exporting a class on Linux, anything that you don't want to export can then be marked with <code>visibility(\"hidden\")</code> to override the class's attribute.</p>\n\n<p>GCC and Clang support both syntaxes for <code>visibility</code>: <code>__attribute__((visibility(\"default\")))</code> and <code>[[gnu::visibility(\"default\")]]</code>.</p>\n\n<p>More on visibility in GCC can be found <a href=\"https://gcc.gnu.org/wiki/Visibility\" rel=\"nofollow noreferrer\">HERE</a>.</p>\n\n<p>I'm not sure how exporting symbols from shared libraries works on MacOS (maybe the same as on Linux?).</p>\n"}], "owner": {"reputation": 338, "user_id": 2999946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3485bd72f70abc54bafe40f7fe52d843?s=128&d=identicon&r=PG&f=1", "display_name": "Taras", "link": "https://stackoverflow.com/users/2999946/taras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1236, "favorite_count": 0, "accepted_answer_id": 57999050, "answer_count": 2, "score": 0, "last_activity_date": 1568832158, "creation_date": 1568812974, "last_edit_date": 1568828567, "question_id": 57993818, "link": "https://stackoverflow.com/questions/57993818/gcc-how-to-combine-attribute-dllexport-and-nodiscard-in-a-struct-de", "title": "gcc - How to combine __attribute__((dllexport)) and [[nodiscard]] in a struct definition?", "body": "<p>I have a struct that is marked with the C++17's <code>[[nodiscard]]</code> attribute. It is defined like this:</p>\n\n<pre><code>struct [[nodiscard]] MyObject final\n{\n    explicit MyObject(int id);\n    ~MyObject();\n\n    MyObject(const MyObject&amp;) = delete;\n    MyObject&amp; operator=(const MyObject&amp;) = delete;\n\n    int id;\n};\n</code></pre>\n\n<p>Now I want to export it from my dynamic library.</p>\n\n<p>On MSVC, the syntax <code>struct __declspec(dllexport) [[nodiscard]] MyObject final</code> works as expected.</p>\n\n<p>But GCC fails to compile both <code>struct __attribute__((dllexport)) [[nodiscard]] MyObject final</code> and <code>struct [[nodiscard]] __attribute__((dllexport)) MyObject final</code>: the compiler just cannot handle such syntax.</p>\n\n<p>And the syntax <code>__attribute__((dllexport)) struct [[nodiscard]] MyObject final</code> compiles but doesn't seem to do what I want, because it produces the following warning:</p>\n\n<blockquote>\n  <p>:1:49: warning: attribute ignored in declaration of 'struct\n  MyObject' [-Wattributes]</p>\n\n<pre><code>1 | __attribute__((dllexport)) struct [[nodiscard]] MyObject final\n\n  |                                                 ^~~~~~~~\n</code></pre>\n  \n  <p>:1:49: note: attribute for 'struct MyObject' must follow the\n  'struct' keyword</p>\n</blockquote>\n\n<p>So, how can I export a <code>[[nodiscard]]</code> struct from a dynamic library on GCC?</p>\n"}, {"tags": ["c++", "stl", "constants", "reference-wrapper"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1568813065, "post_id": 57993706, "comment_id": 102394362, "body": "Do you want to keep the <code>Data</code> object in the vector mutable inside <code>A</code>?"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 2, "creation_date": 1568813130, "post_id": 57993706, "comment_id": 102394394, "body": "Make your own const-propagating replacement for <code>reference_wrapper</code>? Or, instead of returning a reference to the entire vector, make a (const-correct) function that returns a reference to a single vector element (by index)."}, {"owner": {"reputation": 8564, "user_id": 1043352, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f336066e4f8700aa439943ee4f5ffbd9?s=128&d=identicon&r=PG", "display_name": "Jakub Zaverka", "link": "https://stackoverflow.com/users/1043352/jakub-zaverka"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1568813674, "post_id": 57993706, "comment_id": 102394715, "body": "@NathanOliver yes, I want to be able to also pass the data as non-const."}, {"owner": {"reputation": 405, "user_id": 7080683, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vHnjck4jA_4/AAAAAAAAAAI/AAAAAAAAACE/wU6N3qQY4hM/photo.jpg?sz=128", "display_name": "Arne J", "link": "https://stackoverflow.com/users/7080683/arne-j"}, "edited": false, "score": 0, "creation_date": 1568814533, "post_id": 57993706, "comment_id": 102395232, "body": "I would simply use a reinterpret cast to a reference to a vector of const reference wrappers."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1568814662, "post_id": 57993706, "comment_id": 102395335, "body": "The best ting I can think of is to make a proxy pobject that holds a reference to the vector and only exposes a <code>const</code> from there."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 405, "user_id": 7080683, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vHnjck4jA_4/AAAAAAAAAAI/AAAAAAAAACE/wU6N3qQY4hM/photo.jpg?sz=128", "display_name": "Arne J", "link": "https://stackoverflow.com/users/7080683/arne-j"}, "edited": false, "score": 0, "creation_date": 1568820918, "post_id": 57993706, "comment_id": 102399164, "body": "@ArneJ that&#39;s undefined"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 405, "user_id": 7080683, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vHnjck4jA_4/AAAAAAAAAAI/AAAAAAAAACE/wU6N3qQY4hM/photo.jpg?sz=128", "display_name": "Arne J", "link": "https://stackoverflow.com/users/7080683/arne-j"}, "edited": false, "score": 2, "creation_date": 1568822650, "post_id": 57993706, "comment_id": 102400122, "body": "@ArneJ Nooooooooo"}, {"owner": {"reputation": 405, "user_id": 7080683, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vHnjck4jA_4/AAAAAAAAAAI/AAAAAAAAACE/wU6N3qQY4hM/photo.jpg?sz=128", "display_name": "Arne J", "link": "https://stackoverflow.com/users/7080683/arne-j"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1568963701, "post_id": 57993706, "comment_id": 102449611, "body": "@LightnessRacesinOrbit @Caleth I would be surprised if casting ever produced a problem. But as a more correct alternative, I would suggest programming the Visitor Pattern in class <code>A</code> : <code>void accept(Visitor &amp; visitor)</code> with visitor having the method <code>virtual void visit(const Data &amp; data) = 0;</code>"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1568966016, "post_id": 57993706, "comment_id": 102450751, "body": "Don&#39;t expose concrete containers used to implement your class. Instead, make the class itself a container, forvarding operations to the internal implementation."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 405, "user_id": 7080683, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vHnjck4jA_4/AAAAAAAAAAI/AAAAAAAAACE/wU6N3qQY4hM/photo.jpg?sz=128", "display_name": "Arne J", "link": "https://stackoverflow.com/users/7080683/arne-j"}, "edited": false, "score": 0, "creation_date": 1568967779, "post_id": 57993706, "comment_id": 102451540, "body": "@ArneJ who says the users of <code>A</code> will access each element once, in order?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 405, "user_id": 7080683, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vHnjck4jA_4/AAAAAAAAAAI/AAAAAAAAACE/wU6N3qQY4hM/photo.jpg?sz=128", "display_name": "Arne J", "link": "https://stackoverflow.com/users/7080683/arne-j"}, "edited": false, "score": 0, "creation_date": 1568974675, "post_id": 57993706, "comment_id": 102455139, "body": "@Arne I wouldn&#39;t be at all surprised if it produced a problem. The implementations could be completely different! Compilers are crazy complex and committing sins of UB can result in the most &quot;bizarre&quot; happenstances. Never, ever rely on it (unless otherwise documented as safe by your specific toolchain)."}], "answers": [{"comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1568966212, "post_id": 57996530, "comment_id": 102450844, "body": "It isn&#39;t quite clear how it would help. OP wants to return a const reference to a vector in all cases. One needs a vector wrapper that propagates constness (or non-constness!) to vector <i>elements</i>, regardless of constness of the vector itself."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1568967648, "post_id": 57996530, "comment_id": 102451484, "body": "@n.m. I didn&#39;t notice it was <code>const vector &amp;</code>, thanks. <code>span</code> is a reasonable substitute for <code>vector</code> in that case"}, {"owner": {"reputation": 8564, "user_id": 1043352, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f336066e4f8700aa439943ee4f5ffbd9?s=128&d=identicon&r=PG", "display_name": "Jakub Zaverka", "link": "https://stackoverflow.com/users/1043352/jakub-zaverka"}, "edited": false, "score": 0, "creation_date": 1569855740, "post_id": 57996530, "comment_id": 102722257, "body": "Your second getData returns a reference_wrapper of non-const Data. I need the data to be const."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 8564, "user_id": 1043352, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f336066e4f8700aa439943ee4f5ffbd9?s=128&d=identicon&r=PG", "display_name": "Jakub Zaverka", "link": "https://stackoverflow.com/users/1043352/jakub-zaverka"}, "edited": false, "score": 0, "creation_date": 1569857011, "post_id": 57996530, "comment_id": 102722893, "body": "@JakubZaverka I&#39;ve fixed the issue of copying the <code>const reference_wrapper</code>, now there is only <code>const</code> access through <code>getData() const</code>"}], "tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": false, "score": 2, "last_activity_date": 1569857396, "last_edit_date": 1569857396, "creation_date": 1568821534, "answer_id": 57996530, "question_id": 57993706, "link": "https://stackoverflow.com/questions/57993706/const-correctness-of-stl-library-with-reference-wrapper/57996530#57996530", "title": "Const correctness of STL library with reference-wrapper?", "body": "<p>Here's a const propagating <code>reference_wrapper</code>, based on <a href=\"https://en.cppreference.com/w/cpp/utility/functional/reference_wrapper\" rel=\"nofollow noreferrer\">cppreference's possible implementation</a></p>\n\n<pre><code>#include &lt;utility&gt;\n#include &lt;functional&gt;\n#include &lt;type_traits&gt;\n\nnamespace detail {\ntemplate &lt;class T&gt; T&amp; FUN(T&amp; t) noexcept { return t; }\ntemplate &lt;class T&gt; void FUN(T&amp;&amp;) = delete;\n}\n\ntemplate &lt;class T&gt;\nclass reference_wrapper {\npublic:\n  // types\n  typedef T type;\n\n  // construct/copy/destroy\n  template &lt;class U, class = decltype(\n    detail::FUN&lt;T&gt;(std::declval&lt;U&gt;()),\n    std::enable_if_t&lt;!std::is_same_v&lt;reference_wrapper, std::remove_cvref_t&lt;U&gt;&gt; &amp;&amp; !std::is_same_v&lt;reference_wrapper&lt;const T&gt;, std::remove_cvref_t&lt;U&gt;&gt;&gt;()\n  )&gt;\n  reference_wrapper(U&amp;&amp; u) noexcept(noexcept(detail::FUN&lt;T&gt;(std::forward&lt;U&gt;(u))))\n    : _ptr(std::addressof(detail::FUN&lt;T&gt;(std::forward&lt;U&gt;(u)))) {}\n  reference_wrapper(reference_wrapper&amp;) noexcept = default;\n  reference_wrapper(reference_wrapper&amp;&amp;) noexcept = default;\n\n  // assignment\n  reference_wrapper&amp; operator=(reference_wrapper&amp; x) noexcept = default;\n  reference_wrapper&amp; operator=(reference_wrapper&amp;&amp; x) noexcept = default;\n\n  // access\n  operator T&amp; () noexcept { return *_ptr; }\n  T&amp; get() noexcept { return *_ptr; }\n  operator const T&amp; () const noexcept { return *_ptr; }\n  const T&amp; get() const noexcept { return *_ptr; }\n\n  template&lt; class... ArgTypes &gt;\n  std::invoke_result_t&lt;T&amp;, ArgTypes...&gt;\n    operator() ( ArgTypes&amp;&amp;... args ) {\n    return std::invoke(get(), std::forward&lt;ArgTypes&gt;(args)...);\n  }\n\n  template&lt; class... ArgTypes &gt;\n  std::invoke_result_t&lt;const T&amp;, ArgTypes...&gt;\n    operator() ( ArgTypes&amp;&amp;... args ) const {\n    return std::invoke(get(), std::forward&lt;ArgTypes&gt;(args)...);\n  }\n\nprivate:\n  T* _ptr;\n};\n\ntemplate &lt;class T&gt;\nclass reference_wrapper&lt;const T&gt; {\npublic:\n  // types\n  typedef const T type;\n\n  // construct/copy/destroy\n  template &lt;class U, class = decltype(\n    detail::FUN&lt;const T&gt;(std::declval&lt;U&gt;()),\n    std::enable_if_t&lt;!std::is_same_v&lt;reference_wrapper, std::remove_cvref_t&lt;U&gt;&gt; &amp;&amp; !std::is_same_v&lt;reference_wrapper&lt;T&gt;, std::remove_cvref_t&lt;U&gt;&gt;&gt;()\n  )&gt;\n  reference_wrapper(U&amp;&amp; u) noexcept(noexcept(detail::FUN&lt;const T&gt;(std::forward&lt;U&gt;(u))))\n    : _ptr(std::addressof(detail::FUN&lt;const T&gt;(std::forward&lt;U&gt;(u)))) {}\n  reference_wrapper(const reference_wrapper&lt;T&gt;&amp; o) noexcept \n    : _ptr(std::addressof(o.get())) {}\n  reference_wrapper(const reference_wrapper&amp;) noexcept = default;\n  reference_wrapper(reference_wrapper&amp;&amp;) noexcept = default;\n\n  // assignment\n  reference_wrapper&amp; operator=(const reference_wrapper&amp; x) noexcept = default;\n  reference_wrapper&amp; operator=(reference_wrapper&amp;&amp; x) noexcept = default;\n\n  // access\n  operator const T&amp; () const noexcept { return *_ptr; }\n  const T&amp; get() const noexcept { return *_ptr; }\n\n  template&lt; class... ArgTypes &gt;\n  std::invoke_result_t&lt;const T&amp;, ArgTypes...&gt;\n    operator() ( ArgTypes&amp;&amp;... args ) const {\n    return std::invoke(get(), std::forward&lt;ArgTypes&gt;(args)...);\n  }\n\nprivate:\n  const T* _ptr;\n};\n\n// deduction guides\ntemplate&lt;class T&gt;\nreference_wrapper(T&amp;) -&gt; reference_wrapper&lt;T&gt;;\n</code></pre>\n\n<p>You can then add const qualified access via <a href=\"https://en.cppreference.com/w/cpp/container/span\" rel=\"nofollow noreferrer\"><code>span</code></a>.</p>\n\n<pre><code>class A\n{\npublic:\n    void addData(Data&amp; _data) {data.emplace_back(_data);}\n    std::span&lt;reference_wrapper&lt;Data&gt;&gt; getData() { return { data.data(), data.size() }; }\n    std::span&lt;const reference_wrapper&lt;Data&gt;&gt; getData() const { return { data.data(), data.size() }; }\nprivate:\n    std::vector&lt;reference_wrapper&lt;Data&gt;&gt; data;\n}\n</code></pre>\n\n<p>Note that you can't copy or move the <code>const reference_wrapper&lt;Data&gt;</code>s from the second <code>getData</code>, and there is only access to <code>const Data &amp;</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 405, "user_id": 7080683, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vHnjck4jA_4/AAAAAAAAAAI/AAAAAAAAACE/wU6N3qQY4hM/photo.jpg?sz=128", "display_name": "Arne J", "link": "https://stackoverflow.com/users/7080683/arne-j"}, "is_accepted": false, "score": 1, "last_activity_date": 1568964920, "last_edit_date": 1568964920, "creation_date": 1568964099, "answer_id": 58023612, "question_id": 57993706, "link": "https://stackoverflow.com/questions/57993706/const-correctness-of-stl-library-with-reference-wrapper/58023612#58023612", "title": "Const correctness of STL library with reference-wrapper?", "body": "<p>Consider the visitor pattern :</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>struct ConstVisitor {\n  virtual ~ConstVisitor() = default;\n  virtual bool visit(const Data &amp; data) = 0;//returns true if search should keep going on\n};\n\nvoid A::accept(ConstVisitor &amp; visitor) const;\n</code></pre>\n\n<p>This way it does not matter to the outside world what kind of container Data is stored in (here a std::vector). The visitor pattern is very similar to an Enumerator in C#.</p>\n"}], "owner": {"reputation": 8564, "user_id": 1043352, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f336066e4f8700aa439943ee4f5ffbd9?s=128&d=identicon&r=PG", "display_name": "Jakub Zaverka", "link": "https://stackoverflow.com/users/1043352/jakub-zaverka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1569857396, "creation_date": 1568812603, "question_id": 57993706, "link": "https://stackoverflow.com/questions/57993706/const-correctness-of-stl-library-with-reference-wrapper", "title": "Const correctness of STL library with reference-wrapper?", "body": "<p>I have the following class:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class Data;\nclass A\n{\npublic:\n    A(Data&amp; _data) : data(_data) {}\n    Data&amp; getData() {return data;}\n    const Data&amp; getData() const {return data;}\nprivate:\n    Data&amp; data;\n};\n</code></pre>\n\n<p>Now imagine I need to keep not one, but multiple instances of Data. I keep them in a vector of reference wrappers, but I would also like to keep the const correctness: pass the data as unmodifiable in const context.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class A\n{\npublic:\n    void addData(Data&amp; _data) {data.push_back(std::ref(_data));}\n    const std::vector&lt;std::reference_wrapper&lt;Data&gt;&gt;&amp; getData() {return data;}\n    //doesn't compile\n    //const std::vector&lt;std::reference_wrapper&lt;const Data&gt;&gt;&amp; getData() const {return data;}\nprivate:\n    std::vector&lt;std::reference_wrapper&lt;Data&gt;&gt; data;\n}\n</code></pre>\n\n<p>How to implement this without having physical copying of the data? I.e. I don't want to return a copy of the vector by value and I don't want to keep two separate vectors in class A. Both are performance-impacting solutions for what is basically just a semantic problem.</p>\n"}, {"tags": ["c++", "unit-testing", "testing", "dependency-injection"], "comments": [{"owner": {"reputation": 405, "user_id": 7080683, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vHnjck4jA_4/AAAAAAAAAAI/AAAAAAAAACE/wU6N3qQY4hM/photo.jpg?sz=128", "display_name": "Arne J", "link": "https://stackoverflow.com/users/7080683/arne-j"}, "edited": false, "score": 0, "creation_date": 1568815180, "post_id": 57993524, "comment_id": 102395668, "body": "Well done on your preferences for lifetime management ! Maybe something to try to compile in Rust as well ?"}, {"owner": {"reputation": 131, "user_id": 2759134, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IeyNd.jpg?s=128&g=1", "display_name": "Lexusminds", "link": "https://stackoverflow.com/users/2759134/lexusminds"}, "reply_to_user": {"reputation": 405, "user_id": 7080683, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vHnjck4jA_4/AAAAAAAAAAI/AAAAAAAAACE/wU6N3qQY4hM/photo.jpg?sz=128", "display_name": "Arne J", "link": "https://stackoverflow.com/users/7080683/arne-j"}, "edited": false, "score": 0, "creation_date": 1568815261, "post_id": 57993524, "comment_id": 102395720, "body": "I don&#39;t understand what made you think about Rust tbh :&#39;D"}, {"owner": {"reputation": 405, "user_id": 7080683, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vHnjck4jA_4/AAAAAAAAAAI/AAAAAAAAACE/wU6N3qQY4hM/photo.jpg?sz=128", "display_name": "Arne J", "link": "https://stackoverflow.com/users/7080683/arne-j"}, "edited": false, "score": 0, "creation_date": 1568815712, "post_id": 57993524, "comment_id": 102395986, "body": "Well since Rust is far more careful with lifetime management, anything that works in Rust should be perfect for C++ as well. Some of the solutions you want to avoid will indeed cause trouble with the Rust compiler if I am not mistaken, which should prove your point."}, {"owner": {"reputation": 131, "user_id": 2759134, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IeyNd.jpg?s=128&g=1", "display_name": "Lexusminds", "link": "https://stackoverflow.com/users/2759134/lexusminds"}, "reply_to_user": {"reputation": 405, "user_id": 7080683, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vHnjck4jA_4/AAAAAAAAAAI/AAAAAAAAACE/wU6N3qQY4hM/photo.jpg?sz=128", "display_name": "Arne J", "link": "https://stackoverflow.com/users/7080683/arne-j"}, "edited": false, "score": 0, "creation_date": 1568815743, "post_id": 57993524, "comment_id": 102396008, "body": "Oh I see, didn&#39;t know about that :) Thanks for clarifying!"}], "answers": [{"comments": [{"owner": {"reputation": 131, "user_id": 2759134, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IeyNd.jpg?s=128&g=1", "display_name": "Lexusminds", "link": "https://stackoverflow.com/users/2759134/lexusminds"}, "edited": false, "score": 0, "creation_date": 1568815115, "post_id": 57994399, "comment_id": 102395629, "body": "Thanks for you answer! I want to comment on your point about using a virtual class.  Of course, when using a mock object, I&#39;d first derive an interface of B - let&#39;s call it B_Interface.  This still leaves me with the problem of having to construct an implementation of B_Interface - namely B - in the production code. Same problem, because the B will still need &#39;field_of_a&#39; as a construction parameter."}, {"owner": {"reputation": 405, "user_id": 7080683, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vHnjck4jA_4/AAAAAAAAAAI/AAAAAAAAACE/wU6N3qQY4hM/photo.jpg?sz=128", "display_name": "Arne J", "link": "https://stackoverflow.com/users/7080683/arne-j"}, "reply_to_user": {"reputation": 131, "user_id": 2759134, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IeyNd.jpg?s=128&g=1", "display_name": "Lexusminds", "link": "https://stackoverflow.com/users/2759134/lexusminds"}, "edited": false, "score": 0, "creation_date": 1568815308, "post_id": 57994399, "comment_id": 102395747, "body": "The factory could generate B directly, no need for an interface for B. It is the factory that should be tested in your case : production code -&gt; it just calls B&#39;s constructor, test code -&gt; it first tells gmock that B will be constructed"}, {"owner": {"reputation": 131, "user_id": 2759134, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IeyNd.jpg?s=128&g=1", "display_name": "Lexusminds", "link": "https://stackoverflow.com/users/2759134/lexusminds"}, "edited": false, "score": 0, "creation_date": 1568815436, "post_id": 57994399, "comment_id": 102395830, "body": "So you&#39;re saying &quot;it just calls B&#39;s constructor&quot;. Your idea is to pass the &#39;field_of_a&#39; variable to the factory&#39;s creation method then if I get you correctly? Because the factory will need &#39;field_of_a&#39; for constructing B."}, {"owner": {"reputation": 405, "user_id": 7080683, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vHnjck4jA_4/AAAAAAAAAAI/AAAAAAAAACE/wU6N3qQY4hM/photo.jpg?sz=128", "display_name": "Arne J", "link": "https://stackoverflow.com/users/7080683/arne-j"}, "reply_to_user": {"reputation": 131, "user_id": 2759134, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IeyNd.jpg?s=128&g=1", "display_name": "Lexusminds", "link": "https://stackoverflow.com/users/2759134/lexusminds"}, "edited": false, "score": 0, "creation_date": 1568815549, "post_id": 57994399, "comment_id": 102395900, "body": "Exactly. Though I do understand this code does not explicitly test the constructor of B, it just informs that the constructor will be invoked.. The exact code will depend on what exactly it is you want/need to verify I guess."}, {"owner": {"reputation": 131, "user_id": 2759134, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IeyNd.jpg?s=128&g=1", "display_name": "Lexusminds", "link": "https://stackoverflow.com/users/2759134/lexusminds"}, "edited": false, "score": 0, "creation_date": 1568815722, "post_id": 57994399, "comment_id": 102395992, "body": "Yeah so currently B holds all kinds of timers and timer related methods. Its methods are called by A during message handling. B needs access to a queue and a few other resources located inside of A. When testing A, I want to verify that during message handling the timers are started/stopped correctly."}, {"owner": {"reputation": 131, "user_id": 2759134, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IeyNd.jpg?s=128&g=1", "display_name": "Lexusminds", "link": "https://stackoverflow.com/users/2759134/lexusminds"}, "edited": false, "score": 0, "creation_date": 1568817301, "post_id": 57994399, "comment_id": 102396968, "body": "Do you think a factory suits the problem I described in the comment above?"}, {"owner": {"reputation": 405, "user_id": 7080683, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vHnjck4jA_4/AAAAAAAAAAI/AAAAAAAAACE/wU6N3qQY4hM/photo.jpg?sz=128", "display_name": "Arne J", "link": "https://stackoverflow.com/users/7080683/arne-j"}, "reply_to_user": {"reputation": 131, "user_id": 2759134, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IeyNd.jpg?s=128&g=1", "display_name": "Lexusminds", "link": "https://stackoverflow.com/users/2759134/lexusminds"}, "edited": false, "score": 0, "creation_date": 1568817665, "post_id": 57994399, "comment_id": 102397221, "body": "Not certain any more, no. There are tons of ways to handle this... If it&#39;s the timers that you want to test, it could be the timers that are generated from a factory. If it is the constructor of B you want to test, then B will need to become a template parameter, an abstract class or hold some reference to an abstract observer monitoring B&#39;s actions... It all really depends on your code and exactly what must be tested. Can&#39;t help you there..."}, {"owner": {"reputation": 131, "user_id": 2759134, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IeyNd.jpg?s=128&g=1", "display_name": "Lexusminds", "link": "https://stackoverflow.com/users/2759134/lexusminds"}, "edited": false, "score": 0, "creation_date": 1568818264, "post_id": 57994399, "comment_id": 102397627, "body": "The class under test is A! I want to verify, that A calls B&#39;s methods. Which is why I want to replace B with a mock object. A test would typically be: &quot;On receiving message &#39;Hello&#39;, A should validate the message and stop all timers&quot;. Here I&#39;d want to verify that A calls B&#39;s &quot;StopAllTimers&quot; method by using a mock object."}, {"owner": {"reputation": 405, "user_id": 7080683, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vHnjck4jA_4/AAAAAAAAAAI/AAAAAAAAACE/wU6N3qQY4hM/photo.jpg?sz=128", "display_name": "Arne J", "link": "https://stackoverflow.com/users/7080683/arne-j"}, "reply_to_user": {"reputation": 131, "user_id": 2759134, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IeyNd.jpg?s=128&g=1", "display_name": "Lexusminds", "link": "https://stackoverflow.com/users/2759134/lexusminds"}, "edited": false, "score": 0, "creation_date": 1568818743, "post_id": 57994399, "comment_id": 102397936, "body": "Then you should indeed add an interface to B, and let a factory generate an instance of std::unique_ptr&lt;BInterface&gt; . Let A accept such a factory at construction time. During your tests the factory can spawn a mocked B object. It will get the job done."}, {"owner": {"reputation": 131, "user_id": 2759134, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IeyNd.jpg?s=128&g=1", "display_name": "Lexusminds", "link": "https://stackoverflow.com/users/2759134/lexusminds"}, "edited": false, "score": 0, "creation_date": 1568821353, "post_id": 57994399, "comment_id": 102399414, "body": "Thanks, I&#39;ll definitely try that out :)"}, {"owner": {"reputation": 131, "user_id": 2759134, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IeyNd.jpg?s=128&g=1", "display_name": "Lexusminds", "link": "https://stackoverflow.com/users/2759134/lexusminds"}, "edited": false, "score": 0, "creation_date": 1568824612, "post_id": 57994399, "comment_id": 102400978, "body": "So if I understand this correctly, I will have to create an abstract factory?  Because my first attempt looked like this:  <code>cpp class MyFactory {  public:   std::unique_ptr&lt;BInterface&gt; CreateB(int field_of_a) {     return std::make_unique&lt;B&gt;(field_of_a);   } }; </code>  I pass that factory into A&#39;s constructor which then calls its CreateB method in production code.  But now I don&#39;t know how to replace B with my mock object in the tests. Should I create an abstract IMyFactory which gets passed to A and make the CreateB method virtual?"}, {"owner": {"reputation": 405, "user_id": 7080683, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vHnjck4jA_4/AAAAAAAAAAI/AAAAAAAAACE/wU6N3qQY4hM/photo.jpg?sz=128", "display_name": "Arne J", "link": "https://stackoverflow.com/users/7080683/arne-j"}, "reply_to_user": {"reputation": 131, "user_id": 2759134, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IeyNd.jpg?s=128&g=1", "display_name": "Lexusminds", "link": "https://stackoverflow.com/users/2759134/lexusminds"}, "edited": false, "score": 1, "creation_date": 1568830333, "post_id": 57994399, "comment_id": 102403173, "body": "Absolutely ! I&#39;ve programmed and tested a lot of code this way. I see you&#39;re really getting the point here"}], "tags": [], "owner": {"reputation": 405, "user_id": 7080683, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vHnjck4jA_4/AAAAAAAAAAI/AAAAAAAAACE/wU6N3qQY4hM/photo.jpg?sz=128", "display_name": "Arne J", "link": "https://stackoverflow.com/users/7080683/arne-j"}, "is_accepted": false, "score": 1, "last_activity_date": 1568831375, "last_edit_date": 1568831375, "creation_date": 1568814804, "answer_id": 57994399, "question_id": 57993524, "link": "https://stackoverflow.com/questions/57993524/dependency-injection-dependency-needs-field-member/57994399#57994399", "title": "Dependency Injection: Dependency needs field/member", "body": "<p>Instead of passing B, you should pass a factory that generates B. It still maintains the dependency injection.\nThe factory could be a virtual class, a function pointer, a std::function, ...</p>\n\n<p>It is then up to A to use the factory. Your test would simply verify that the factory is used during construction of A.</p>\n\n<p>Update : your factory should be abstract, and return an instance to the public interface of B that A requires. During testing the factory can be programmed to spawn mocked instances of B.</p>\n\n<p>Also, make sure that in the class definition of A the member passed to B is declared first, then the member holding a B instance. This in order to make the first member's lifetime outlive that of B.</p>\n"}], "owner": {"reputation": 131, "user_id": 2759134, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IeyNd.jpg?s=128&g=1", "display_name": "Lexusminds", "link": "https://stackoverflow.com/users/2759134/lexusminds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568831375, "creation_date": 1568811995, "last_edit_date": 1568815843, "question_id": 57993524, "link": "https://stackoverflow.com/questions/57993524/dependency-injection-dependency-needs-field-member", "title": "Dependency Injection: Dependency needs field/member", "body": "<p>I have two classes A and B. Currently, B is constructed inside of A. Since I want to verify in my unit tests that A calls B's methods correctly, I want to <strong>inject B into A</strong> instead to enable mocking.</p>\n\n<p>The problem is: Upon construction, <strong>B needs one of A's fields</strong> as a constructor parameter. Which means that if I inject B and therefore move its construction out of A, I would also have to move that field's construction out of A.</p>\n\n<p>What's the most elegant solution here? I hope I explained the problem properly. If not, please feel free to ask any questions.</p>\n\n<p>An attempt at explaining the problem with code snippets:</p>\n\n<p>What it's currently like:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// constructor of class A. b_ is being constructed. field_of_a_ is initialized.\nA::A() : b_{field_of_a_}, field_of_a_{5} {\n\n}\n</code></pre>\n\n<p>What I want to avoid:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// In the class constructing A...\nint field_of_a;\nB b(field_of_a);\nA a(b, field_of_a);\n\n// and inside A...\nA::A(B&amp; b, int&amp; field_of_a) : b_{b}, field_of_a_{field_of_a} {\n\n}\n</code></pre>\n\n<p>EDIT 1: Clarification from inside one of my comments:</p>\n\n<p><em>Yeah so currently B holds all kinds of timers and timer related methods. Its methods are called by A during message handling. B needs access to a queue and a few other resources located inside of A. When testing A, I want to verify that during message handling the timers are started/stopped correctly.</em> </p>\n"}, {"tags": ["c++", "shared-ptr"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 7, "creation_date": 1568811419, "post_id": 57993303, "comment_id": 102393381, "body": "You are right to hesitate to blindly use <code>std::shared_ptr</code>. Many times when developers jump straight to <code>std::shared_ptr</code> it is because they don&#39;t have a clear idea of what object <i>actually</i> is supposed to own that memory. Much of the time, there is a single object that is responsible for the memory ownership, therefore <code>std::unique_ptr</code> is the applicable choice in those cases."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1568811648, "post_id": 57993303, "comment_id": 102393507, "body": "Start with <code>unique_ptr</code>.  It is trivial to change it to <code>shared_ptr</code> later on."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1568811856, "post_id": 57993303, "comment_id": 102393631, "body": "Generally speaking, functions don&#39;t need to own their parameters, so you shouldn&#39;t be defaulting to passing pointers around"}, {"owner": {"reputation": 1773, "user_id": 8805095, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4948ba17681551aa212dbc7be9bff40?s=128&d=identicon&r=PG&f=1", "display_name": "Moia", "link": "https://stackoverflow.com/users/8805095/moia"}, "edited": false, "score": 0, "creation_date": 1568813845, "post_id": 57993303, "comment_id": 102394811, "body": "Maybe are they overusing shared pointer passing around something should be passed by const reference instead?"}, {"owner": {"reputation": 405, "user_id": 7080683, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vHnjck4jA_4/AAAAAAAAAAI/AAAAAAAAACE/wU6N3qQY4hM/photo.jpg?sz=128", "display_name": "Arne J", "link": "https://stackoverflow.com/users/7080683/arne-j"}, "edited": false, "score": 2, "creation_date": 1568816813, "post_id": 57993303, "comment_id": 102396684, "body": "My thoughts : if you can&#39;t decide on what kind of pointer to write, then it is a sign the main problem is that there is no clear architectural design/insight.  That being said, shared_ptr cause overhead indeed and there is a mighty risk for cyclic reference counting, causing memory leaks. Go for a garbage collector instead if you really have trouble deciding."}], "answers": [{"comments": [{"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 573, "user_id": 6328514, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yae7F.jpg?s=128&g=1", "display_name": "Lewis Chan", "link": "https://stackoverflow.com/users/6328514/lewis-chan"}, "edited": false, "score": 0, "creation_date": 1568877199, "post_id": 57993443, "comment_id": 102415989, "body": "@LewisChan many objects whose ownership you have to pass around?"}], "tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": false, "score": 1, "last_activity_date": 1568877359, "last_edit_date": 1568877359, "creation_date": 1568811749, "answer_id": 57993443, "question_id": 57993303, "link": "https://stackoverflow.com/questions/57993303/how-to-flexibly-use-and-replace-stdshared-ptr-or-stdunique-ptr-or-raw-pointe/57993443#57993443", "title": "How to flexibly use and replace std::shared_ptr or std::unique_ptr or raw pointer in C++ code?", "body": "<p>You don't need a wrapper object, just an alias</p>\n\n<pre><code>using FooPtr = std::unique_ptr&lt;Foo&gt;;\n</code></pre>\n\n<p>and then use <code>FooPtr</code> throughout. </p>\n\n<p>Often you don't need pointers <em>at all</em>. Consider returning <code>Foo</code>, <code>const Foo &amp;</code> or <code>Foo &amp;</code>.</p>\n"}], "owner": {"reputation": 573, "user_id": 6328514, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yae7F.jpg?s=128&g=1", "display_name": "Lewis Chan", "link": "https://stackoverflow.com/users/6328514/lewis-chan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1568877359, "creation_date": 1568811194, "question_id": 57993303, "link": "https://stackoverflow.com/questions/57993303/how-to-flexibly-use-and-replace-stdshared-ptr-or-stdunique-ptr-or-raw-pointe", "title": "How to flexibly use and replace std::shared_ptr or std::unique_ptr or raw pointer in C++ code?", "body": "<p>Here's my meaning. Many times When I start a new program, I can't decide beforehand whether to use <code>std::shared</code> or <code>std::unique_ptr</code> or raw pointer to some C++ object. From performance perspective, I know <code>shared_ptr</code> has more penalty than <code>unique_ptr</code>, and sometimes raw pointer is better than <code>unique_ptr</code>.</p>\n\n<p>In my recent project, team members all use <code>shared_ptr</code> no matter whether its wrapped object has multiple owners or not. It seems that <code>shared_ptr</code> is much safer to them, so they use it arbitrarily. However, to my experience, many objects needn't shared_ptr, when we realize that and refactor the code later, it's very likely that many API declarations need to be changed, which is not good.</p>\n\n<p>So I reflex on this, and want to ask: Is there a way to decrease this refactoring cost ? Maybe we should design a wrapper object which may wrap shared_ptr, or unique_ptr, or raw pointer, and later when we realize we need to change the underlying structure, we only modify the wrapper. No changes to other API. Is that possible ? Anyone who try to do this ?</p>\n"}, {"tags": ["c++", "c++11", "inheritance", "constructor", "deleted-functions"], "comments": [{"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1568811310, "post_id": 57993273, "comment_id": 102393311, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/32954730/deleting-copy-constructor-breaks-inherited-constructors\">Deleting copy constructor breaks inherited constructors</a>"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1568811373, "post_id": 57993273, "comment_id": 102393355, "body": "Realted/duplicate: <a href=\"https://stackoverflow.com/questions/55007528/is-deleting-copy-and-move-constructors-assignment-operators-in-base-class-enough\" title=\"is deleting copy and move constructors assignment operators in base class enough\">stackoverflow.com/questions/55007528/&hellip;</a>"}, {"owner": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "edited": false, "score": 0, "creation_date": 1569015638, "post_id": 57993273, "comment_id": 102472701, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/55007528/is-deleting-copy-and-move-constructors-assignment-operators-in-base-class-enough\">Is deleting copy and move constructors/assignment operators in base class enough?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1568813114, "last_edit_date": 1568813114, "creation_date": 1568811330, "answer_id": 57993338, "question_id": 57993273, "link": "https://stackoverflow.com/questions/57993273/inheritance-of-delete-functions/57993338#57993338", "title": "Inheritance of =delete functions", "body": "<p>The copy constructor of the derived class is also implicitly deleted in the first code snippet.</p>\n\n<p>From the C++ 17 Standard (15.8.1 Copy/move constructors)</p>\n\n<blockquote>\n  <p>10 An implicitly-declared copy/move constructor is an inline public\n  member of its class. A defaulted copy/move constructor for a class X\n  is defined as deleted (11.4.3) if X has:</p>\n  \n  <p>(10.1) \u2014 a potentially constructed subobject type M (or array thereof)\n  that cannot be copied/moved because overload resolution (16.3), as\n  applied to find M\u2019s corresponding constructor, results in an ambiguity\n  or a function that is deleted or inaccessible from the defaulted\n  constructor,</p>\n</blockquote>\n\n<p>But for self-documentation of your code you can explicitly specify in derived classes that the copy constructor is deleted.</p>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 4, "last_activity_date": 1568811347, "creation_date": 1568811347, "answer_id": 57993343, "question_id": 57993273, "link": "https://stackoverflow.com/questions/57993273/inheritance-of-delete-functions/57993343#57993343", "title": "Inheritance of =delete functions", "body": "<p>Your first code block is all you need.  Since <code>File</code> is not copyable when the compiler goes to generate the copy constructor for <code>TextFile</code> it will see that and implicitly delete it since it can't make a legal copy constructor.</p>\n\n<p>What it does not do though is to stop you from making your own copy constructor in the derived class.  If you are okay with that then that is all you need.</p>\n"}], "owner": {"reputation": 443, "user_id": 9063850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/671893f704960bd2d8c8f4834e105dd4?s=128&d=identicon&r=PG&f=1", "display_name": "\u05d0\u05d9\u05ea\u05df \u05dc\u05d5\u05d9", "link": "https://stackoverflow.com/users/9063850/%d7%90%d7%99%d7%aa%d7%9f-%d7%9c%d7%95%d7%99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 1, "accepted_answer_id": 57993343, "answer_count": 2, "score": 2, "last_activity_date": 1568813114, "creation_date": 1568811078, "last_edit_date": 1568812341, "question_id": 57993273, "link": "https://stackoverflow.com/questions/57993273/inheritance-of-delete-functions", "title": "Inheritance of =delete functions", "body": "<p>let's say I have a class named <code>File</code>.\nI want to disable the copy constructor  for every son of <code>File</code>, for example <code>TextFile</code>.</p>\n\n<p>Would doing something like this will still disable the copy constructor of <code>TextFile</code>?</p>\n\n<pre><code>class File {\npublic:\n    File(const File&amp; f) = delete;\n};\n\nclass TextFile:public File {\npublic:\n};\n</code></pre>\n\n<p>Or is this necessary in order for this to be disabled?</p>\n\n<pre><code>class File {\npublic:\n    File(const File&amp; f) = delete;\n};\n\nclass TextFile:public File {\npublic:\n    TextFile(const TextFile&amp; tf) = delete;\n};\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-2012", "smart-pointers", "unique-ptr", "forward-declaration"], "comments": [{"owner": {"reputation": 15724, "user_id": 5754656, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7jfX3.png?s=128&g=1", "display_name": "Artyer", "link": "https://stackoverflow.com/users/5754656/artyer"}, "edited": false, "score": 0, "creation_date": 1568810300, "post_id": 57992892, "comment_id": 102392766, "body": "Is <code>pFoo</code> a member or a variable? Also, if visual studio 2012s standard library is not C++11 compliant, could you use <code>boost::scoped_ptr</code> instead?"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 15724, "user_id": 5754656, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7jfX3.png?s=128&g=1", "display_name": "Artyer", "link": "https://stackoverflow.com/users/5754656/artyer"}, "edited": false, "score": 0, "creation_date": 1568810690, "post_id": 57992892, "comment_id": 102392974, "body": "@Artyer <code>pFoo</code> is a member. I haven&#39;t included Boost in this project, and I think I&#39;d surrender my forward declaration long before I did. VS2012 <i>does</i> support <code>unique_ptr</code> but yeah, it seems like it is not fully supported."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1568811284, "post_id": 57992892, "comment_id": 102393299, "body": "Is the destructor of the class containing <code>pFoo</code> implemented in the header or in the <code>.cpp</code>? (Defaulted/not user-declared counts as &quot;in the header&quot;.) If the former is the case, try the latter."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1568813649, "post_id": 57992892, "comment_id": 102394706, "body": "@MaxLanghof Tried both, neither worked for me :("}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1568814745, "post_id": 57992892, "comment_id": 102395391, "body": "You might try to provide specific Deleter which doesn&#39;t requires complete class from declaration."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1568815535, "post_id": 57992892, "comment_id": 102395891, "body": "@Jarod42 I don&#39;t understand what you&#39;re suggesting here. It almost sounds like you want me to somehow give my forward declared type a destructor."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1568815933, "post_id": 57992892, "comment_id": 102396129, "body": "<code>std::unique_ptr&lt;Foo, MyDeleter&lt;Foo&gt;&gt; pFoo;</code>. I think old <code>std::default_deleter</code> declaration requires complete <code>T</code> whereas now, only the actual call need complete definition."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1568816448, "post_id": 57992892, "comment_id": 102396449, "body": "@Jarod42 What should this look like? <code>template &lt;typename T&gt;void MyDeleter(T&amp; param){ delete param; }</code>"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1568819338, "post_id": 57992892, "comment_id": 102398251, "body": "<code>T*</code> instead of <code>T&amp;</code>, but probably split declaration and definition. <code>delete</code> requires complete type."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1568895572, "post_id": 57992892, "comment_id": 102425844, "body": "@Jarod42 I tried this, but I&#39;m getting the error: &quot;error C2207: &#39;std::_Unique_ptr_base&lt;_Ty,_Dx,_Empty_deleter&gt;::_Mydel&#39; : a member of a class template cannot acquire a function type (..\\..\\src\\STETestbed\\ComponentDirector.cpp)&quot; When I declare my <code>unique_ptr&lt;Foo, decltype(MyDeleter&lt;Foo&gt;)&gt;</code> Do I need to wrap this in a <code>function</code> or something?"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 1409, "user_id": 6385640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-muwyWfIjFd8/AAAAAAAAAAI/AAAAAAAAAG0/nctjQMOQOQY/photo.jpg?sz=128", "display_name": "Red.Wave", "link": "https://stackoverflow.com/users/6385640/red-wave"}, "edited": false, "score": 0, "creation_date": 1568924912, "post_id": 57992892, "comment_id": 102440581, "body": "@Red.Wave Since I just wrote the proposed duplicate as a follow up question it&#39;s probably safe to say that these are <i>not</i> duplicates."}, {"owner": {"reputation": 1409, "user_id": 6385640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-muwyWfIjFd8/AAAAAAAAAAI/AAAAAAAAAG0/nctjQMOQOQY/photo.jpg?sz=128", "display_name": "Red.Wave", "link": "https://stackoverflow.com/users/6385640/red-wave"}, "edited": false, "score": 0, "creation_date": 1568992903, "post_id": 57992892, "comment_id": 102464780, "body": "I had another duplicate in mind, but I faced some difficulty removing the wrong duplicate flag."}], "answers": [{"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1568897545, "post_id": 58011286, "comment_id": 102427027, "body": "<code>struct custom_deleter { template &lt;typename T&gt; void operator() (T* param) const{     delete param; }};</code> would allow <code>std::unique_ptr&lt;Foo, custom_deleter&gt; pFoo;</code> and simply <code>pFoo = decltype(pFoo)(new Foo);</code> (that you should probably wrap in <code>custom_make_unique</code> anyway)."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1568897607, "post_id": 58011286, "comment_id": 102427074, "body": "@Jarod42 Wow, thanks. I try to avoid <code>new</code> and <code>delete</code> like the plague so I&#39;m just not that familiar with them. But when I looked this up, yeah, you&#39;re totally right. <code>delete</code> already handles the <code>nullptr</code> case for me. I&#39;ve edited."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1568898088, "post_id": 58011286, "comment_id": 102427385, "body": "@Jarod42 Also I&#39;d tried wrapping this in a <code>struct custom_deleter</code> but I get this error: &quot;warning C4150: deletion of pointer to incomplete type <code>Foo;</code> no destructor called&quot; I&#39;ll ask a follow up question on how to implement that."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1568899026, "post_id": 58011286, "comment_id": 102428014, "body": "@Jarod42 I&#39;ve asked the follow up question here: <a href=\"https://stackoverflow.com/q/58011898/2642059\">stackoverflow.com/q/58011898/2642059</a>"}], "tags": [], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": false, "score": 0, "last_activity_date": 1568897526, "last_edit_date": 1568897526, "creation_date": 1568896959, "answer_id": 58011286, "question_id": 57992892, "link": "https://stackoverflow.com/questions/57992892/workaround-for-making-a-unique-ptr-to-a-forward-declared-type/58011286#58011286", "title": "Workaround for Making a unique_ptr to a Forward Declared Type", "body": "<p><a href=\"https://stackoverflow.com/questions/57992892/workaround-for-making-a-unique-ptr-to-a-forward-declared-type?noredirect=1#comment102396129_57992892\">As mentioned by Jarod42</a> The problem seems to be that the <code>default_deleter</code> implemented by <a href=\"/questions/tagged/visual-studio-2012\" class=\"post-tag\" title=\"show questions tagged &#39;visual-studio-2012&#39;\" rel=\"tag\">visual-studio-2012</a> required a complete type <em>on declaration.</em> Latter versions of <a href=\"/questions/tagged/visual-studio\" class=\"post-tag\" title=\"show questions tagged &#39;visual-studio&#39;\" rel=\"tag\">visual-studio</a> only required the complete type at the point the parenthesis operator is called.</p>\n\n<p>We can work around this by providing a functor which provides a deleter which does not require the complete type on declaration:</p>\n\n<pre><code>template &lt;typename T&gt;\nvoid custom_deleter(T* param) {\n    delete param;\n}\n</code></pre>\n\n<p>To use <code>custom_deleter</code> as a template parameter we'll need to make it into a functor otherwise the compiler will error:</p>\n\n<blockquote>\n  <p>error C2207: <code>std::_Unique_ptr_base&lt;_Ty,_Dx,_Empty_deleter&gt;::_Mydel</code> : a member of a class template cannot acquire a function type</p>\n</blockquote>\n\n<p>So in the header where <code>Foo</code> is forward declared we'll need to define the <code>unique_ptr</code> as:</p>\n\n<pre><code>unique_ptr&lt;Foo, function&lt;void(Foo*)&gt;&gt; pFoo\n</code></pre>\n\n<p>And in the implementation file where <code>Foo</code> is defined we'll need to assign it as:</p>\n\n<pre><code>pFoo = decltype(pFoo)(new Foo, std::function&lt;void(Foo*)&gt;(custom_deleter&lt;Foo&gt;))\n</code></pre>\n"}], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568897526, "creation_date": 1568809856, "last_edit_date": 1568815433, "question_id": 57992892, "link": "https://stackoverflow.com/questions/57992892/workaround-for-making-a-unique-ptr-to-a-forward-declared-type", "title": "Workaround for Making a unique_ptr to a Forward Declared Type", "body": "<p>Given that I have a <a href=\"https://en.wikipedia.org/wiki/Forward_declaration\" rel=\"nofollow noreferrer\">forward declared</a> type:</p>\n\n<pre><code>class Foo;\n</code></pre>\n\n<p>I want to make a <a href=\"https://en.cppreference.com/w/cpp/memory/unique_ptr\" rel=\"nofollow noreferrer\"><code>unique_ptr</code></a> to this type:</p>\n\n<pre><code>unique_ptr&lt;Foo&gt; pFoo;\n</code></pre>\n\n<p>This works fine in <a href=\"/questions/tagged/visual-studio-2017\" class=\"post-tag\" title=\"show questions tagged &#39;visual-studio-2017&#39;\" rel=\"tag\">visual-studio-2017</a> but I can't make it work in <a href=\"/questions/tagged/visual-studio-2012\" class=\"post-tag\" title=\"show questions tagged &#39;visual-studio-2012&#39;\" rel=\"tag\">visual-studio-2012</a>.</p>\n\n<blockquote>\n  <p>C:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\VC\\include\\memory(1150): error C2027: use of undefined type <code>Foo</code> (....\\src\\STETestbed\\STETestbed.cpp)<br>\n         O:\\Engine\\stetestbed\\include\\STETestbed\\ComponentDirector.h(26) : see declaration of <code>Foo</code><br>\n         C:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\VC\\include\\memory(1149) : while compiling class template member function <code>void std::default_delete&lt;_Ty&gt;::operator ()(_Ty *) throw() const</code><br>\n         with<br>\n         [<br>\n             _Ty=Foo<br>\n         ]<br>\n         C:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\VC\\include\\memory(1444) : see reference to function template instantiation <code>void std::default_delete&lt;_Ty&gt;::operator ()(_Ty *) throw() const</code> being compiled<br>\n         with<br>\n         [<br>\n             _Ty=Foo<br>\n         ]<br>\n         C:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\VC\\include\\type_traits(743) : see reference to class template instantiation <code>std::default_delete&lt;_Ty&gt;</code> being compiled<br>\n         with<br>\n         [<br>\n             _Ty=Foo<br>\n         ]<br>\n         C:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\VC\\include\\memory(1281) : see reference to class template instantiation <code>std::is_empty&lt;_Ty&gt;</code> being compiled<br>\n         with<br>\n         [<br>\n             _Ty=std::default_delete<br>\n         ]<br>\n         O:\\Engine\\stetestbed\\include\\STETestbed\\ComponentDirector.h(63) : see reference to class template instantiation <code>std::unique_ptr&lt;_Ty&gt;</code> being compiled<br>\n         with<br>\n         [<br>\n             _Ty=Foo<br>\n         ]<br>\n  C:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\VC\\include\\memory(1151): error C2338: can't delete an incomplete type (....\\src\\STETestbed\\STETestbed.cpp)<br>\n  C:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\VC\\include\\memory(1152): warning C4150: deletion of pointer to incomplete type <code>Foo</code>; no destructor called (....\\src\\STETestbed\\STETestbed.cpp)<br>\n         O:\\Engine\\stetestbed\\include\\STETestbed\\ComponentDirector.h(26) : see declaration of <code>Foo</code></p>\n</blockquote>\n\n<p>Was there a workaround for that back in the dark ages, or can I just not forward declare?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 1, "creation_date": 1568809794, "post_id": 57992812, "comment_id": 102392482, "body": "Can you at least explain in short what the code does? and/or provide a couple of test case examples (input/output)?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1568809873, "post_id": 57992812, "comment_id": 102392528, "body": "Would it be practical to load input.txt? How many lines does it have?"}, {"owner": {"reputation": 27, "user_id": 8648222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96d4ab74a0cd591be975850047582326?s=128&d=identicon&r=PG&f=1", "display_name": "v_head", "link": "https://stackoverflow.com/users/8648222/v-head"}, "reply_to_user": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1568809897, "post_id": 57992812, "comment_id": 102392539, "body": "@DimChtz, yes, the code is about a c++ implementation of the quadratic equation, the inputs are a, b, c, the coefficients, the output is the solution or -1 for no solutions. Thanks"}, {"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 0, "creation_date": 1568809911, "post_id": 57992812, "comment_id": 102392548, "body": "Why are you using <code>int</code> variables? Your code would fail for, say, <code>a = 1.5</code>."}, {"owner": {"reputation": 27, "user_id": 8648222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96d4ab74a0cd591be975850047582326?s=128&d=identicon&r=PG&f=1", "display_name": "v_head", "link": "https://stackoverflow.com/users/8648222/v-head"}, "reply_to_user": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 0, "creation_date": 1568809950, "post_id": 57992812, "comment_id": 102392571, "body": "@Adrian, actually, the problem states that the inputs are integers"}, {"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 0, "creation_date": 1568810008, "post_id": 57992812, "comment_id": 102392609, "body": "OK - just asking. However, in <code>delta = ((b * b) - (4 * a * c))</code> the multiplications are performed as <code>int</code> before the subtraction promotes to <code>double</code>, so what if the products are greater than <code>INT_MAX</code>?"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 1, "creation_date": 1568810056, "post_id": 57992812, "comment_id": 102392623, "body": "If the target machine supports a 32-bit <code>int</code> (fairly common in practice, including on a lot of windows boxes) then a value of <code>b</code> entered of <code>100000</code> will cause <code>b*b</code> to overflow.   That causes undefined behaviour - and, odds are, if there is a test case which enters such a value, that test case will not produce the required results."}, {"owner": {"reputation": 27, "user_id": 8648222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96d4ab74a0cd591be975850047582326?s=128&d=identicon&r=PG&f=1", "display_name": "v_head", "link": "https://stackoverflow.com/users/8648222/v-head"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1568810137, "post_id": 57992812, "comment_id": 102392667, "body": "@Peter, that&#39;s a great note, though, the problem states that |a,b,c| &lt;= 1000"}, {"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 0, "creation_date": 1568810366, "post_id": 57992812, "comment_id": 102392801, "body": "Presumably <code>-1</code> is the expected output if a solution cannot be found (<code>a=b=0</code> or <code>delta</code> negative)? Could there be a problem with rounding/default-precision of outputting the <code>x</code>/<code>x1</code>/<code>x2</code> values making what you produce and what they expect not quite match? (e.g. <code>1.999999</code> vs. <code>2</code> or <code>2.0</code> vs <code>2</code>)"}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1568810488, "post_id": 57992812, "comment_id": 102392866, "body": "Do you have example test cases? Do you know if at least one test case passes the test? Is it possible that all test cases are wrong because you have one whitespace or a newline to much? Maybe a newline is missing at the end."}, {"owner": {"reputation": 27, "user_id": 8648222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96d4ab74a0cd591be975850047582326?s=128&d=identicon&r=PG&f=1", "display_name": "v_head", "link": "https://stackoverflow.com/users/8648222/v-head"}, "reply_to_user": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1568810615, "post_id": 57992812, "comment_id": 102392928, "body": "@ThomasSablik, actually I tested with manually with differents test cases, here is the thing, the checker hides test cases, it says wrong for case n."}, {"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 1, "creation_date": 1568810674, "post_id": 57992812, "comment_id": 102392962, "body": "I think your problem is the <code>delta==0</code> case. You&#39;re outputting <code>1</code> and a root; the correct answer is the same root twice. E.g. <code>x^2 + 2x + 1 = 0</code> has a repeated root <code>-1</code>, but you produce <code>1 -1</code>"}, {"owner": {"reputation": 369, "user_id": 3476183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9a7dda5864aa1b7c18ec44452576bf5?s=128&d=identicon&r=PG&f=1", "display_name": "Albjenow", "link": "https://stackoverflow.com/users/3476183/albjenow"}, "edited": false, "score": 0, "creation_date": 1568810702, "post_id": 57992812, "comment_id": 102392985, "body": "Have you tried reversing the order of <code>x1</code> and <code>x2</code>"}, {"owner": {"reputation": 27, "user_id": 8648222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96d4ab74a0cd591be975850047582326?s=128&d=identicon&r=PG&f=1", "display_name": "v_head", "link": "https://stackoverflow.com/users/8648222/v-head"}, "reply_to_user": {"reputation": 369, "user_id": 3476183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9a7dda5864aa1b7c18ec44452576bf5?s=128&d=identicon&r=PG&f=1", "display_name": "Albjenow", "link": "https://stackoverflow.com/users/3476183/albjenow"}, "edited": false, "score": 0, "creation_date": 1568810760, "post_id": 57992812, "comment_id": 102393018, "body": "@Albjenow, they demand the two solutions to be in an ascending order"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 2, "creation_date": 1568810811, "post_id": 57992812, "comment_id": 102393032, "body": "@Papa - I&#39;m not a mindreader, and can&#39;t be aware of constraints before you provide them.   Also, consider what happens if input contains <code>1.0</code> as one the value of <code>a</code> - that is an integral value, but will prevent <code>b</code> and <code>c</code> being read as <code>int</code>s.   Also, consider what happens if negative values are entered - the output values may not be ascending (in magnitude)"}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1568810908, "post_id": 57992812, "comment_id": 102393076, "body": "Does at least one test case pass the test? <i>&quot;it says wrong for case n&quot;</i> does this n change?"}, {"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 0, "creation_date": 1568810927, "post_id": 57992812, "comment_id": 102393086, "body": "@Papa You also don&#39;t line-terminate the output (<code>... &lt;&lt; endl</code>) which <i>might</i> break their checker. But the repeated root error is probably the most likely."}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1568811133, "post_id": 57992812, "comment_id": 102393221, "body": "Please provide the exact assignment text"}, {"owner": {"reputation": 27, "user_id": 8648222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96d4ab74a0cd591be975850047582326?s=128&d=identicon&r=PG&f=1", "display_name": "v_head", "link": "https://stackoverflow.com/users/8648222/v-head"}, "reply_to_user": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1568811410, "post_id": 57992812, "comment_id": 102393377, "body": "@ThomasSablik, i have included the problem description. the example output is described as follows; intput; 1 -8 15  output 2 3 5"}, {"owner": {"reputation": 27, "user_id": 8648222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96d4ab74a0cd591be975850047582326?s=128&d=identicon&r=PG&f=1", "display_name": "v_head", "link": "https://stackoverflow.com/users/8648222/v-head"}, "reply_to_user": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 0, "creation_date": 1568811736, "post_id": 57992812, "comment_id": 102393554, "body": "@TripeHound, actually I thought of that, and asked our tutor, her only answer was the problem is clearly defined!"}, {"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 0, "creation_date": 1568811830, "post_id": 57992812, "comment_id": 102393618, "body": "@Papa Which point are you referring to? An input of <code>1 2 1</code> gives the wrong answer (<code>1 -1</code>) instead of <code>-1 -1</code>"}, {"owner": {"reputation": 27, "user_id": 8648222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96d4ab74a0cd591be975850047582326?s=128&d=identicon&r=PG&f=1", "display_name": "v_head", "link": "https://stackoverflow.com/users/8648222/v-head"}, "reply_to_user": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 0, "creation_date": 1568812069, "post_id": 57992812, "comment_id": 102393761, "body": "@TripeHound, input 1 -2 1 gives right output 1 -1 (1 refers to the number of soluttions), please get back to the problem description above that I have include the formal problem statement by our online judge."}, {"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 1, "creation_date": 1568812616, "post_id": 57992812, "comment_id": 102394060, "body": "@Papa &quot;<i>please get back to the problem description above</i>&quot; Wasn&#39;t there when I replied! One could argue that the correct answer in that case is <code>2 -1 -1</code>. Other possibilities: might they want the output on separate lines? You say &quot;<i>The checker tells there are some test cases that can&#39;t pass</i>&quot;... does it <i>explicitly</i> say that some of the test cases <i>do</i> pass (in which case it could be overflow etc. for <i>specific</i> inputs that&#39;s the problem). If it doesn&#39;t, it could be that <i>all</i> test cases are failing (which would imply something common to <i>all</i> inputs, like not being on separate lines)."}, {"owner": {"reputation": 27, "user_id": 8648222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96d4ab74a0cd591be975850047582326?s=128&d=identicon&r=PG&f=1", "display_name": "v_head", "link": "https://stackoverflow.com/users/8648222/v-head"}, "reply_to_user": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 0, "creation_date": 1568813284, "post_id": 57992812, "comment_id": 102394484, "body": "@TripeHound, actually, it mentions some tests passed. No, output in the same line with space, and first output number is about the number of solutions otherwise -1"}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1568813992, "post_id": 57992812, "comment_id": 102394900, "body": "<i>No, output in the same line with space</i> You should try to add a newline or space at the end of your output line. If they write all test cases to the same output file the first number of the second test case is next to the last number of the first test case. TC1: 1 2 1, TC2: 1 - 8 15, outputfile: 2 -12 3 5 instead of 2 -1 2 3 5"}, {"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 1, "creation_date": 1568813993, "post_id": 57992812, "comment_id": 102394902, "body": "@Papa &quot;<i>output in the same line with space</i>&quot; THAT isn&#39;t mentioned in what you edited into the question. As others have said, without the EXACT requirements, we&#39;re only guessing at what might be wrong."}, {"owner": {"reputation": 27, "user_id": 8648222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96d4ab74a0cd591be975850047582326?s=128&d=identicon&r=PG&f=1", "display_name": "v_head", "link": "https://stackoverflow.com/users/8648222/v-head"}, "reply_to_user": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 0, "creation_date": 1568814199, "post_id": 57992812, "comment_id": 102395021, "body": "@TripeHound, that wasn t stated, it s just an image of the input output"}, {"owner": {"reputation": 199, "user_id": 4883238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbdd8a03ea95fc24d6fd7087fc215c26?s=128&d=identicon&r=PG&f=1", "display_name": "BugSquasher", "link": "https://stackoverflow.com/users/4883238/bugsquasher"}, "edited": false, "score": 0, "creation_date": 1568895031, "post_id": 57992812, "comment_id": 102425531, "body": "Are you supposed to provide imaginary solutions? Which cases does it fail on? We NEED more info."}, {"owner": {"reputation": 67968, "user_id": 584192, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YBSIc.png?s=128&g=1", "display_name": "Samuel Liew", "link": "https://stackoverflow.com/users/584192/samuel-liew"}, "edited": false, "score": 0, "creation_date": 1569143580, "post_id": 57992812, "comment_id": 102494283, "body": "Comments are not for extended discussion; this conversation has been <a href=\"https://chat.stackoverflow.com/rooms/199785/discussion-on-question-by-papa-c-quadratic-equation-not-working-properly-for-a\">moved to chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 76, "user_id": 12026628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef79d570f88de06030c1c66288ce6c45?s=128&d=identicon&r=PG&f=1", "display_name": "Gwaeren", "link": "https://stackoverflow.com/users/12026628/gwaeren"}, "is_accepted": false, "score": -3, "last_activity_date": 1568812478, "creation_date": 1568812478, "answer_id": 57993669, "question_id": 57992812, "link": "https://stackoverflow.com/questions/57992812/c-quadratic-equation-not-working-properly-for-a-code-checker/57993669#57993669", "title": "c++ quadratic equation not working properly for a code checker", "body": "<p>I think default cout precision does not math to your problem. Try </p>\n\n<pre><code>std::cout &lt;&lt; std::setprecision(10);\n</code></pre>\n\n<p>or greater.\nAlso u can try use </p>\n\n<pre><code>std::cout &lt;&lt; std::flush\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 27, "user_id": 8648222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96d4ab74a0cd591be975850047582326?s=128&d=identicon&r=PG&f=1", "display_name": "v_head", "link": "https://stackoverflow.com/users/8648222/v-head"}, "edited": false, "score": 0, "creation_date": 1568820399, "post_id": 57994205, "comment_id": 102398838, "body": "I did update the code, and still stops at test 5 fails."}, {"owner": {"reputation": 27, "user_id": 8648222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96d4ab74a0cd591be975850047582326?s=128&d=identicon&r=PG&f=1", "display_name": "v_head", "link": "https://stackoverflow.com/users/8648222/v-head"}, "edited": false, "score": 0, "creation_date": 1568823509, "post_id": 57994205, "comment_id": 102400488, "body": "@Bon is there another way of printing 0 insteadof -0 other than the way you did it."}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "reply_to_user": {"reputation": 27, "user_id": 8648222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96d4ab74a0cd591be975850047582326?s=128&d=identicon&r=PG&f=1", "display_name": "v_head", "link": "https://stackoverflow.com/users/8648222/v-head"}, "edited": false, "score": 0, "creation_date": 1568823883, "post_id": 57994205, "comment_id": 102400643, "body": "@Papa Well, you can always use a normal <code>if</code> instead of the conditional operator. If that is problem."}, {"owner": {"reputation": 27, "user_id": 8648222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96d4ab74a0cd591be975850047582326?s=128&d=identicon&r=PG&f=1", "display_name": "v_head", "link": "https://stackoverflow.com/users/8648222/v-head"}, "edited": false, "score": 0, "creation_date": 1568823996, "post_id": 57994205, "comment_id": 102400696, "body": "I edited the code that prints 0 instead of -0, still doesn&#39;t pass the test 5, I mean the same as the one you gave."}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "reply_to_user": {"reputation": 27, "user_id": 8648222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96d4ab74a0cd591be975850047582326?s=128&d=identicon&r=PG&f=1", "display_name": "v_head", "link": "https://stackoverflow.com/users/8648222/v-head"}, "edited": false, "score": 0, "creation_date": 1568824369, "post_id": 57994205, "comment_id": 102400870, "body": "@Papa It would help to know what that test is about, if it&#39;s a precision or formatting issue, the double solutions problem or some corner case. Without any further data, we (me, at least) can&#39;t really help."}, {"owner": {"reputation": 27, "user_id": 8648222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96d4ab74a0cd591be975850047582326?s=128&d=identicon&r=PG&f=1", "display_name": "v_head", "link": "https://stackoverflow.com/users/8648222/v-head"}, "edited": false, "score": 0, "creation_date": 1568824467, "post_id": 57994205, "comment_id": 102400918, "body": "the checker doesn&#39;t provide it. In any case, thanks."}, {"owner": {"reputation": 199, "user_id": 4883238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbdd8a03ea95fc24d6fd7087fc215c26?s=128&d=identicon&r=PG&f=1", "display_name": "BugSquasher", "link": "https://stackoverflow.com/users/4883238/bugsquasher"}, "edited": false, "score": 0, "creation_date": 1568840220, "post_id": 57994205, "comment_id": 102407032, "body": "Without having a clearly defined output format, there is no way to verify the correctness of your program. Your professor needs to explain the format further."}], "tags": [], "owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "is_accepted": false, "score": 2, "last_activity_date": 1568832106, "last_edit_date": 1568832106, "creation_date": 1568814222, "answer_id": 57994205, "question_id": 57992812, "link": "https://stackoverflow.com/questions/57992812/c-quadratic-equation-not-working-properly-for-a-code-checker/57994205#57994205", "title": "c++ quadratic equation not working properly for a code checker", "body": "<blockquote>\n  <p>the example output is described as follows; intput: 1 -8 15 output: 2 3 5</p>\n</blockquote>\n\n<p>If the input was <code>-1 8 -15</code>, this program would output <code>2 5 3</code>, while the two solutions are requested to be printed in ascending order. So you need to sort them before printing. Also I'd add a newline to every output statement.</p>\n\n<p><strong><em>-edit-</em></strong></p>\n\n<p>Without knowing the exact format required and the numbers in the failing tests, we can only speculate on how to modify the posted program. Some changes, though, could be beneficial.</p>\n\n<p><strong>I/O</strong></p>\n\n<p>There isn't any check of the input. On-line judges usually give well defined input, but you can always add some test.</p>\n\n<pre><code>cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;\nif (!cin)\n    cout &lt;&lt; \"-1\\n\";\n</code></pre>\n\n<p>I already mentioned the newline at the end of the line, another (unknown) requirement could be a particular precision of the outputted numbers (in fixed or scientific format).</p>\n\n<p>In the comments I also pointed out the particular case of <code>-0.0</code> or (<code>-0</code>), which while beeing a perfectly valid floating point value, could be for some reason rejected by the tester. Unlikely, but possible. So you could write the first case like this:</p>\n\n<pre><code>if (a == 0)\n{\n    if (b != 0)\n    {\n        if ( c == 0 )\n            x = 0.0;\n        else\n            x = double(-c) / b;\n\n        cout &lt;&lt; \"1 \" &lt;&lt; x &lt;&lt; '\\n';\n    }\n    else\n        cout &lt;&lt; \"-1\\n\";\n}\n</code></pre>\n\n<p><strong>precision and corner cases</strong></p>\n\n<p>In the unlikely (given the ranges of the input values) case that you are running into precision issues, you could choose other formulas (see e.g. <a href=\"https://math.stackexchange.com/questions/866331/numerically-stable-algorithm-for-solving-the-quadratic-equation-when-a-is-very\">numerically stable algorithm for solving the quadratic equation</a>).</p>\n\n<pre><code>else if (delta &gt; 0)\n{\n    if ( c == 0 )\n    {\n        x1 = 0.0;\n        x2 = double(-b) / a;\n    }\n    else\n    {\n        if ( b &gt; 0 )\n            x1 = -0.5 * (b + std::sqrt(delta)) / a;\n        else\n            x1 = -0.5 * (b - std::sqrt(delta)) / a;\n        x2 = c / (a * x1);\n    }\n\n    if (x1 &gt; x2)\n        cout &lt;&lt; \"2 \" &lt;&lt; x2 &lt;&lt; \" \" &lt;&lt; x1 &lt;&lt; '\\n';\n    else\n        cout &lt;&lt; \"2 \" &lt;&lt; x1 &lt;&lt; \" \" &lt;&lt; x2 &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>The last part really boils down to how to consider two coincident solutions.</p>\n\n<pre><code>else if (delta == 0)\n{\n    if ( b == 0 )\n        x = 0.0;\n    else\n        x = -0.5 * b / a;\n\n    cout &lt;&lt; \"1 \" &lt;&lt; x &lt;&lt; '\\n';\n    // Assuming they don't require (\"all the roots\")\n    // cout &lt;&lt; \"2 \" &lt;&lt; x &lt;&lt; ' ' &lt;&lt; x &lt;&lt; '\\n';\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 199, "user_id": 4883238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbdd8a03ea95fc24d6fd7087fc215c26?s=128&d=identicon&r=PG&f=1", "display_name": "BugSquasher", "link": "https://stackoverflow.com/users/4883238/bugsquasher"}, "reply_to_user": {"reputation": 27, "user_id": 8648222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96d4ab74a0cd591be975850047582326?s=128&d=identicon&r=PG&f=1", "display_name": "v_head", "link": "https://stackoverflow.com/users/8648222/v-head"}, "edited": false, "score": 0, "creation_date": 1568894289, "post_id": 58000609, "comment_id": 102425116, "body": "Please give us the exact wording of the assignment."}, {"owner": {"reputation": 27, "user_id": 8648222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96d4ab74a0cd591be975850047582326?s=128&d=identicon&r=PG&f=1", "display_name": "v_head", "link": "https://stackoverflow.com/users/8648222/v-head"}, "edited": false, "score": 0, "creation_date": 1568895778, "post_id": 58000609, "comment_id": 102425963, "body": "This is the format: Input:  Contains 3 integer numbers: a,b,c (|a,b,c|&lt;=1000).  Output:  The number of the equation&#39;s roots, then all roots in an ascending order. If you cannot do this, output &quot;-1&quot;. Example; input: 1 -8 15 output: 2 3 5"}, {"owner": {"reputation": 199, "user_id": 4883238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbdd8a03ea95fc24d6fd7087fc215c26?s=128&d=identicon&r=PG&f=1", "display_name": "BugSquasher", "link": "https://stackoverflow.com/users/4883238/bugsquasher"}, "reply_to_user": {"reputation": 27, "user_id": 8648222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96d4ab74a0cd591be975850047582326?s=128&d=identicon&r=PG&f=1", "display_name": "v_head", "link": "https://stackoverflow.com/users/8648222/v-head"}, "edited": false, "score": 0, "creation_date": 1569438369, "post_id": 58000609, "comment_id": 102600996, "body": "If reversing the order of output of x1 and x2 doesn&#39;t do it (using my code) then they&#39;re not giving us enough information. My code should work except for outputting two in ascending order, but that&#39;s a minor fix."}], "tags": [], "owner": {"reputation": 199, "user_id": 4883238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbdd8a03ea95fc24d6fd7087fc215c26?s=128&d=identicon&r=PG&f=1", "display_name": "BugSquasher", "link": "https://stackoverflow.com/users/4883238/bugsquasher"}, "is_accepted": false, "score": 0, "last_activity_date": 1568840045, "creation_date": 1568840045, "answer_id": 58000609, "question_id": 57992812, "link": "https://stackoverflow.com/questions/57992812/c-quadratic-equation-not-working-properly-for-a-code-checker/58000609#58000609", "title": "c++ quadratic equation not working properly for a code checker", "body": "<p>The problems would likely lie in the realm of int to double conversion.</p>\n\n<p>To debug this, you need to separate out your operations into distinct lines the debugger can stop on. For instance the expression <code>-(c*1.0)</code> is better expressed as <code>(double)-c</code>. It at least makes it clearer and utilizes a negation (free) and cast (more precise [linguistically] than multiplication by 1.0).</p>\n\n<p>So for instance, your code would become something like this :</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;math.h&gt;\nusing namespace std;\nint mainC(int argc , char** argv)\n{\n    (void)argc;\n    (void)argv;\n\n    freopen(\"input.txt\", \"r\", stdin);\n    freopen(\"output.txt\", \"w\", stdout);\n\n    int a, b, c, delta;\n\n    double x1, x2, x;\n\n    cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;\n\n    delta = ((b*b) - (4 * a * c));\n\n    if (a == 0) {\n        if (b != 0) {\n///            x = (-(c*1.0) / (b));\n            /// separate the operation and avoid multiplication and implicit casts\n            x = ((double)-c);\n            x /= (double)b;\n            cout &lt;&lt; 1 &lt;&lt; \" \" &lt;&lt; x;\n        }\n        else\n            cout &lt;&lt; \"-1\";\n    }\n    else\n        if (delta &gt; 0)\n        {\n///            x1 = ((-(b + sqrt(delta))*1.0) / (2 * a));\n///            x2 = ((-(b - sqrt(delta))*1.0) / (2 * a));\n            /// separate the operation and avoid multiplication and implicit casts\n            // discriminant\n            const double discrim = sqrt(delta);\n            x = (double)-b;\n            x1 = x + discrim;\n            x2 = x - discrim;\n            x1 /= (double)(2*a);\n            x2 /= (double)(2*a);\n            cout &lt;&lt; 2 &lt;&lt; \" \" &lt;&lt; x1 &lt;&lt; \" \" &lt;&lt; x2;\n        }\n        else if (delta == 0)\n        {\n///            x = (-(b*1.0) / (2 * a));\n            /// separate the operation and avoid multiplication and implicit casts\n            x = (double)-b;\n            x /= (double)(2*a);\n            cout &lt;&lt; 1 &lt;&lt; \" \" &lt;&lt; x;\n        }\n        else\n            cout &lt;&lt; \"-1\";\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 8648222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96d4ab74a0cd591be975850047582326?s=128&d=identicon&r=PG&f=1", "display_name": "v_head", "link": "https://stackoverflow.com/users/8648222/v-head"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 1, "answer_count": 3, "score": -3, "last_activity_date": 1568840045, "creation_date": 1568809618, "last_edit_date": 1568823917, "question_id": 57992812, "link": "https://stackoverflow.com/questions/57992812/c-quadratic-equation-not-working-properly-for-a-code-checker", "title": "c++ quadratic equation not working properly for a code checker", "body": "<p>I am submitting code to my university's tester, the code for me works thoroughly for the the test cases I provided.  </p>\n\n<p>The checker tells there are some test cases that can't pass, I am testing in visual studio, and that's exactly compatible with the online judge compiler. </p>\n\n<p>The problem description: \ninput : Contains 3 integer numbers: a,b,c (|a,b,c|&lt;=1000).\noutput; The number of the equation's roots, then all roots in an ascending order. If you cannot do this, output \"-1\".</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;math.h&gt;\nusing namespace std;\nint main()\n{\n    freopen(\"input.txt\", \"r\", stdin);\n    freopen(\"output.txt\", \"w\", stdout);\n    int a, b, c, delta;\n    double x1, x2, x;\n    cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;\n    delta = ((b*b) - (4 * a * c));\n    if (a == 0) {\n        if (b != 0) {\n            x = (-(c)*1.0 / (b));\n            cout &lt;&lt; 1 &lt;&lt; \" \" &lt;&lt; x;\n        }\n        else\n            cout &lt;&lt; \"-1\";\n    }\n    else\n        if (delta &gt; 0)\n        {\n            x1 = ((-(b + sqrt(delta))*1.0) / (2 * a));\n            x2 = ((-(b - sqrt(delta))*1.0) / (2 * a));\n            if (x1 &lt;= x2) {\n                cout &lt;&lt; 2 &lt;&lt; \" \" &lt;&lt; x1 &lt;&lt; \" \" &lt;&lt; x2;\n            }\n            else \n                cout &lt;&lt; 2 &lt;&lt; \" \" &lt;&lt; x2 &lt;&lt; \" \" &lt;&lt; x1;\n\n        }\n        else if (delta == 0)\n        {\n            x = (-(b)*1.0 / (2 * a));\n            cout &lt;&lt; 1 &lt;&lt; \" \" &lt;&lt; x;\n        }\n        else\n            cout &lt;&lt; \"-1\";\n    return 0;\n}\n</code></pre>\n\n<p>I can't find any test case that fails my program, please if you can find some test cases, hints whatever I am just stuck at the problem. Thanks</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 59891, "user_id": 1207195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3P4g.jpg?s=128&g=1", "display_name": "Adriano Repetti", "link": "https://stackoverflow.com/users/1207195/adriano-repetti"}, "edited": false, "score": 2, "creation_date": 1568809571, "post_id": 57992749, "comment_id": 102392338, "body": "Just to mention few: you may also consider <code>if (isPositive(input))</code> but if that&#39;s not what you reeaaally want then you might create an <code>Input</code> class (let&#39;s say) with an overloaded <code>==</code> operator (and <code>Positive</code> has to be an instance of that class). Note that if you have a list <code>std::vector&lt;string&gt;</code> of words then a simple <code>find()</code> might do."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 505, "user_id": 9957598, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sDfEWpTibVk/AAAAAAAAAAI/AAAAAAAAAPI/NZ-1XBYt9Jg/photo.jpg?sz=128", "display_name": "Rokas Vi\u0161inskas", "link": "https://stackoverflow.com/users/9957598/rokas-vi%c5%a1inskas"}, "edited": false, "score": 2, "creation_date": 1568809682, "post_id": 57992749, "comment_id": 102392415, "body": "@Habitate C++ can&#39;t <code>switch</code> on non-integral types."}, {"owner": {"reputation": 505, "user_id": 9957598, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sDfEWpTibVk/AAAAAAAAAAI/AAAAAAAAAPI/NZ-1XBYt9Jg/photo.jpg?sz=128", "display_name": "Rokas Vi\u0161inskas", "link": "https://stackoverflow.com/users/9957598/rokas-vi%c5%a1inskas"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1568810251, "post_id": 57992749, "comment_id": 102392734, "body": "@Quentin oh yeah, totaly forgot"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 59891, "user_id": 1207195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3P4g.jpg?s=128&g=1", "display_name": "Adriano Repetti", "link": "https://stackoverflow.com/users/1207195/adriano-repetti"}, "edited": false, "score": 0, "creation_date": 1568810287, "post_id": 57992749, "comment_id": 102392759, "body": "@AdrianoRepetti Solution is the C++ way to do this.  Put the code you don&#39;t want to repeat in a function, and then call that function when needed.  You could use something like <a href=\"https://stackoverflow.com/questions/43020246/simulating-pythons-in-in-c\">this</a> to make it Pythony but it can/will cause you issues later on down the road."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1568810418, "post_id": 57992749, "comment_id": 102392827, "body": "Note that achieving the syntax you wish for, and wrapping that in a reusable component are two different questions. The latter depends on which C++ toolchain you are using, which you haven&#39;t mentioned."}, {"owner": {"reputation": 7405, "user_id": 5735010, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/znAEN.jpg?s=128&g=1", "display_name": "abhiarora", "link": "https://stackoverflow.com/users/5735010/abhiarora"}, "edited": false, "score": 0, "creation_date": 1568810713, "post_id": 57992749, "comment_id": 102392989, "body": "You can use regular expression to solve this problem statement."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1568811334, "post_id": 57992749, "comment_id": 102393330, "body": "@phuclv, that applies to integers rather than strings - the bitmasking solutions there aren&#39;t applicable here."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1568811547, "post_id": 57992749, "comment_id": 102393446, "body": "@TobySpeight there are various solutions there. And of course there are countless number of duplicates: <a href=\"https://stackoverflow.com/q/43484761/995714\">C++ multiple strings inside an if statement</a>, <a href=\"https://stackoverflow.com/q/11583592/995714\">Check for multiple values when using comparison operators</a>, <a href=\"https://stackoverflow.com/q/14515274/995714\">Check if string is in string (list of strings)</a>"}, {"owner": {"reputation": 59891, "user_id": 1207195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3P4g.jpg?s=128&g=1", "display_name": "Adriano Repetti", "link": "https://stackoverflow.com/users/1207195/adriano-repetti"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1568811683, "post_id": 57992749, "comment_id": 102393523, "body": "@NathanOliver I agree, that&#39;s why the &quot;reeaally&quot;. I&#39;d personally feel confused to see <code>==</code> used as <code>in</code> too."}], "answers": [{"comments": [{"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1568810994, "post_id": 57993217, "comment_id": 102393131, "body": "You can also use <code>count</code> instead of <code>find</code> - it returns 1 when found and 0 otherwise. This will avoid the long-winded <code>== .end()</code> syntax."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "reply_to_user": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1568811111, "post_id": 57993217, "comment_id": 102393206, "body": "Of course - thanks!  A set knows that count is at most 1, so there&#39;s no inefficiency as there would be with a vector or list."}, {"owner": {"reputation": 2853, "user_id": 626796, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4b13deba744c5599a43e06f52af13366?s=128&d=identicon&r=PG", "display_name": "Tharwen", "link": "https://stackoverflow.com/users/626796/tharwen"}, "edited": false, "score": 0, "creation_date": 1568811130, "post_id": 57993217, "comment_id": 102393220, "body": "Why not an unordered_set?"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "reply_to_user": {"reputation": 2853, "user_id": 626796, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4b13deba744c5599a43e06f52af13366?s=128&d=identicon&r=PG", "display_name": "Tharwen", "link": "https://stackoverflow.com/users/626796/tharwen"}, "edited": false, "score": 0, "creation_date": 1568811199, "post_id": 57993217, "comment_id": 102393257, "body": "@Tharwen - no good reason; either is as good as the other for a small set of alternatives such as this."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1568814370, "post_id": 57993217, "comment_id": 102395126, "body": "...on the other hand <code>count</code> wont stop counting once it found the first positive, though for 5 elements that shouldnt really matter"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1568814745, "post_id": 57993217, "comment_id": 102395390, "body": "@formerlyknownas_463035818: as I commented, a set&#39;s <code>count()</code> <i>does</i> &quot;stop counting&quot; once it&#39;s determined whether or not the item is present in the set.  You may be thinking of the <code>std::count()</code> function in <code>&lt;algorithm&gt;</code>, which would examine every member of the set.  Don&#39;t use that."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1568814926, "post_id": 57993217, "comment_id": 102395510, "body": "ah sorry, I read anatolygs comment, but understood it only now"}], "tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": true, "score": 2, "last_activity_date": 1568813268, "last_edit_date": 1568813268, "creation_date": 1568810908, "answer_id": 57993217, "question_id": 57992749, "link": "https://stackoverflow.com/questions/57992749/how-can-i-check-equality-with-one-of-a-set-of-values/57993217#57993217", "title": "How can I check equality with one of a set of values?", "body": "<p>There are many ways to test for inclusion.  The most natural is to use a set:</p>\n\n<pre><code>#include &lt;set&gt;\n#include &lt;string&gt;\n</code></pre>\n\n\n\n<pre><code>    static const std::set&lt;std::string&gt; positive_answers =\n        { \"yes\", \"Yes\", \"YES\", \"Ya\", \"ya\" };\n\n    if (positive_answers.count(input) &gt; 0) {\n\n        // Do something\n    }\n</code></pre>\n\n<hr>\n\n<p>Here's a full program version of the above:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;set&gt;\n#include &lt;string&gt;\n\nint main()\n{\n    std::string input = \"YES\";\n\n    static const std::set&lt;std::string&gt; positive_answers =\n        { \"yes\", \"Yes\", \"YES\", \"Ya\", \"ya\" };\n\n    if (positive_answers.count(input) &gt; 0) {\n        std::cout &lt;&lt; \"Agreed\\n\";\n    } else {\n        std::cout &lt;&lt; \"Disagreed\\n\";\n    }\n}\n</code></pre>\n\n<hr>\n\n<p>You might consider using a variadic template:</p>\n\n<pre><code>template&lt;typename T, typename... U&gt;\nbool is_in(T candidate, U... positives)\n{\n    const std::set&lt;std::string&gt; positive_answers{{positives...}};\n    return positive_answers.count(candidate) &gt; 0;\n}\n</code></pre>\n\n<p>used like this:</p>\n\n<pre><code>    if (is_in(input, \"yes\", \"Yes\", \"YES\", \"Ya\", \"ya\"))\n</code></pre>\n\n<p>That can work, but be careful if <code>input</code> is a C-style string (<code>char*</code>), as that will use a pointer's comparison function.</p>\n"}], "owner": {"reputation": 35, "user_id": 11423653, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ix3vijy0F2U/AAAAAAAAAAI/AAAAAAAAA2k/OLfiVD02eE4/photo.jpg?sz=128", "display_name": "SneakySteve", "link": "https://stackoverflow.com/users/11423653/sneakysteve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "closed_date": 1606707157, "accepted_answer_id": 57993217, "answer_count": 1, "score": 0, "last_activity_date": 1568813268, "creation_date": 1568809426, "last_edit_date": 1568810310, "question_id": 57992749, "link": "https://stackoverflow.com/questions/57992749/how-can-i-check-equality-with-one-of-a-set-of-values", "closed_reason": "Duplicate", "title": "How can I check equality with one of a set of values?", "body": "<p>I would like to be able to use an <code>if</code> statement that looks something like this:</p>\n\n<pre><code>if (input == Positive)\n{\n    // Do something\n}\n</code></pre>\n\n<p>To be actually doing something that looks like this:</p>\n\n<pre><code>if (input == \"yes\" ||input ==  \"Yes\" ||input ==  \"YES\" ||input ==  \"Ya\" ||input ==  \"ya\" (etc all the rest of positive words/ways to say yes))\n{\n    // Do something\n}\n</code></pre>\n\n<p>I was thinking I would keep my code in a static library (though I don't know much about them so feel free to correct me if there is a better way) so that I can access it from any future program I use and I don't have to copy-paste this same code over and over. Is there any way to do this? Or something similar to this?</p>\n\n<p>Thanks very much in advance :)</p>\n"}, {"tags": ["c++", "c++11", "software-design"], "comments": [{"owner": {"reputation": 2156, "user_id": 3476954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fb810a12cd393949bca88e4b0cdba75?s=128&d=identicon&r=PG&f=1", "display_name": "Mansoor", "link": "https://stackoverflow.com/users/3476954/mansoor"}, "edited": false, "score": 3, "creation_date": 1568808854, "post_id": 57992512, "comment_id": 102391924, "body": "By uniformity, I think you are referring to equality here? Define a member function in the struct which wraps the equality operator."}], "answers": [{"comments": [{"owner": {"reputation": 2156, "user_id": 3476954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fb810a12cd393949bca88e4b0cdba75?s=128&d=identicon&r=PG&f=1", "display_name": "Mansoor", "link": "https://stackoverflow.com/users/3476954/mansoor"}, "edited": false, "score": 0, "creation_date": 1568809430, "post_id": 57992704, "comment_id": 102392251, "body": "Dereferencing a potentially empty <code>optional</code>?"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 2156, "user_id": 3476954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fb810a12cd393949bca88e4b0cdba75?s=128&d=identicon&r=PG&f=1", "display_name": "Mansoor", "link": "https://stackoverflow.com/users/3476954/mansoor"}, "edited": false, "score": 2, "creation_date": 1568809475, "post_id": 57992704, "comment_id": 102392282, "body": "@Mansoor if it is empty, its contextual conversion to <code>bool</code> will yield <code>false</code> and the <code>else</code> branch will be taken. No dereferencing there."}, {"owner": {"reputation": 1075, "user_id": 4649452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e4dd1f293d2f89718a5e3210f998a90?s=128&d=identicon&r=PG&f=1", "display_name": "Sparkofska", "link": "https://stackoverflow.com/users/4649452/sparkofska"}, "edited": false, "score": 0, "creation_date": 1568809654, "post_id": 57992704, "comment_id": 102392395, "body": "Since I&#39;m on a C++11 compiler, I cannot use this packing <code>...</code> syntax. So I would have to write the loop my own, I guess?"}, {"owner": {"reputation": 2156, "user_id": 3476954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fb810a12cd393949bca88e4b0cdba75?s=128&d=identicon&r=PG&f=1", "display_name": "Mansoor", "link": "https://stackoverflow.com/users/3476954/mansoor"}, "edited": false, "score": 0, "creation_date": 1568809659, "post_id": 57992704, "comment_id": 102392397, "body": "@Quentin Ahh yes, I missed that."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 1075, "user_id": 4649452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e4dd1f293d2f89718a5e3210f998a90?s=128&d=identicon&r=PG&f=1", "display_name": "Sparkofska", "link": "https://stackoverflow.com/users/4649452/sparkofska"}, "edited": false, "score": 0, "creation_date": 1568809757, "post_id": 57992704, "comment_id": 102392455, "body": "@Sparkofska please remember to add the relevant tag when using an older version of C++, I&#39;ve done it for you up there. C++11 requires a lot more boilerplate, but is still feasible."}], "tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": false, "score": 1, "last_activity_date": 1568810076, "last_edit_date": 1568810076, "creation_date": 1568809289, "answer_id": 57992704, "question_id": 57992512, "link": "https://stackoverflow.com/questions/57992512/whats-the-best-way-to-check-uniform-data/57992704#57992704", "title": "What&#39;s the best way to check uniform data?", "body": "<p>First, define an equality operator for <code>MyData</code> so we can compare instances:</p>\n\n<pre><code>bool operator == (MyData const &amp;lhs, MyData const &amp;rhs) {\n    return std::tie(lhs.foo, lhs.bar)\n        == std::tie(rhs.foo, rhs.bar);\n}\n</code></pre>\n\n<p>Note: this will soon get easier in C++20 with <code>operator &lt;=&gt;</code>.</p>\n\n<p>Then, it's just a matter of unpacking all of the arguments to <code>isUniform</code> and see if they are all equal. C++11 solution here, C++17 below.</p>\n\n<pre><code>template &lt;class First, class... Rest&gt;\nbool isUniform(First const &amp;first, Rest const &amp;... rest) {\n    bool all_equal = true;\n\n    bool expander[]{ false, (all_equal = all_equal &amp;&amp; first == rest)... };\n    static_cast&lt;void&gt;(expander);\n\n    return all_equal;\n}\n</code></pre>\n\n<p>Usage looks like:</p>\n\n<pre><code>if(isUniform(data1, data2))\n    print(data1);\nelse\n    std::cout &lt;&lt; \"Not uniform\\n\";\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/dVE1NYUxG5AYzClx\" rel=\"nofollow noreferrer\">See it live on Wandbox</a></p>\n\n<hr>\n\n<p>C++17 version:</p>\n\n<pre><code>template &lt;class First, class... Rest&gt;\nstd::optional&lt;First&gt; isUniform(First const &amp;first, Rest const &amp;... rest) {\n    if(((first == rest) &amp;&amp; ...))\n        return first;\n\n    return {};\n}\n</code></pre>\n\n<p>Usage looks like:</p>\n\n<pre><code>if(auto o = isUniform(data1, data2, data3))\n    print(*o);\nelse\n    std::cout &lt;&lt; \"Not uniform\\n\";\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/OLyuMOqMFYmcGkiV\" rel=\"nofollow noreferrer\">See it live on Wandbox</a></p>\n"}], "owner": {"reputation": 1075, "user_id": 4649452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e4dd1f293d2f89718a5e3210f998a90?s=128&d=identicon&r=PG&f=1", "display_name": "Sparkofska", "link": "https://stackoverflow.com/users/4649452/sparkofska"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1568810076, "creation_date": 1568808693, "last_edit_date": 1568809703, "question_id": 57992512, "link": "https://stackoverflow.com/questions/57992512/whats-the-best-way-to-check-uniform-data", "title": "What&#39;s the best way to check uniform data?", "body": "<p>I need an idea for the following situation (see code for clarity): Having several instances of struct <code>MyData</code>, what is the most concise way to check the instances for uniformity and returning a uniform instance. How can I reduce code duplication while maintaining readability?\nUniformity means having the same values.</p>\n\n<p>Given this example:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>struct MyData {\n   int foo;\n   int bar;\n   // ...\n}\n\nvoid print(MyData d)\n{\n    std::cout &lt;&lt; \"MyData[\" &lt;&lt; d.foo &lt;&lt; \", \" &lt;&lt; d.bar &lt;&lt; \"]\" std::endl;\n}\n\nMyData data1 = {5, 6};\nMyData data2 = {5, 6};\nMyData data3 = {5, 42};\n</code></pre>\n\n<p>I'm looking for a good code style to get the desired output:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>isUniform(data1, data2);\n &gt;&gt;&gt; MyData[5, 6]\n\nisUniform(data1, data2, data3);\n &gt;&gt;&gt; \"Not uniform\"\n</code></pre>\n"}, {"tags": ["c++", "pointers", "gcc", "gcc8"], "comments": [{"owner": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 2, "creation_date": 1568808784, "post_id": 57992494, "comment_id": 102391883, "body": "<code>-Werror=return-type</code>"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 5, "creation_date": 1568808818, "post_id": 57992494, "comment_id": 102391899, "body": "As the old saying goes, undefined behaviour is undefined."}, {"owner": {"reputation": 3209, "user_id": 5794048, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Egkox.jpg?s=128&g=1", "display_name": "Murphy", "link": "https://stackoverflow.com/users/5794048/murphy"}, "edited": false, "score": 0, "creation_date": 1568808930, "post_id": 57992494, "comment_id": 102391967, "body": "The GCC-7 man page states it&#39;s also activated by <code>-Wall</code>, which is recommended to be <b>always</b> enabled."}, {"owner": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "reply_to_user": {"reputation": 3209, "user_id": 5794048, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Egkox.jpg?s=128&g=1", "display_name": "Murphy", "link": "https://stackoverflow.com/users/5794048/murphy"}, "edited": false, "score": 0, "creation_date": 1568809026, "post_id": 57992494, "comment_id": 102392020, "body": "@Murphy you can enable <code>-Wall -Werror=return-type</code>. It&#39;s not a good idea to treat all warnings as errors (at least if your code may be compiled by users), thus the selective <code>-Werror=</code> option."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 1, "creation_date": 1568809033, "post_id": 57992494, "comment_id": 102392024, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/3402178/omitting-return-statement-in-c\">Omitting return statement in C++</a>"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1568809107, "post_id": 57992494, "comment_id": 102392065, "body": "<a href=\"https://stackoverflow.com/questions/57842756/why-should-i-always-enable-compiler-warnings\">Related</a>."}, {"owner": {"reputation": 153, "user_id": 8976784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1a0508537033e1de7730459dbd3405a?s=128&d=identicon&r=PG&f=1", "display_name": "jfh", "link": "https://stackoverflow.com/users/8976784/jfh"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1568817212, "post_id": 57992494, "comment_id": 102396913, "body": "@molbdnilo I do see that that is undefined behavior, but I wonder how different compilers handle it. I could&#39;ve sworn I read somewhere that functions that are declared to return a value but otherwise don&#39;t are technically still defined as long as the (would be) return value is always discarded (in gcc at least). I&#39;ve seen this in production code (unfortunately) but it was on an old environment and compiler, and the relevant assembly was fully conforming. I wonder if gcc explicitly defines it somewhere."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "reply_to_user": {"reputation": 153, "user_id": 8976784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1a0508537033e1de7730459dbd3405a?s=128&d=identicon&r=PG&f=1", "display_name": "jfh", "link": "https://stackoverflow.com/users/8976784/jfh"}, "edited": false, "score": 1, "creation_date": 1568819305, "post_id": 57992494, "comment_id": 102398234, "body": "@jfh &quot;flowing off the end of a function other than <code>main</code> results in undefined behavior&quot; [stmt.return]. The <a href=\"https://gcc.gnu.org/onlinedocs/gcc/C-Extensions.html\" rel=\"nofollow noreferrer\">list of gcc extensions</a> does not mention defining it."}, {"owner": {"reputation": 15724, "user_id": 5754656, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7jfX3.png?s=128&g=1", "display_name": "Artyer", "link": "https://stackoverflow.com/users/5754656/artyer"}, "reply_to_user": {"reputation": 153, "user_id": 8976784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1a0508537033e1de7730459dbd3405a?s=128&d=identicon&r=PG&f=1", "display_name": "jfh", "link": "https://stackoverflow.com/users/8976784/jfh"}, "edited": false, "score": 2, "creation_date": 1568824245, "post_id": 57992494, "comment_id": 102400810, "body": "@jfh This wouldn&#39;t be undefined in C (Reaching the end of a function without returning and then not using the return value is not UB). <a href=\"http://eel.is/c++draft/stmt.return#2.sentence-8\" rel=\"nofollow noreferrer\">It&#39;s UB in C++</a> (probably because of destructors)."}, {"owner": {"reputation": 153, "user_id": 8976784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1a0508537033e1de7730459dbd3405a?s=128&d=identicon&r=PG&f=1", "display_name": "jfh", "link": "https://stackoverflow.com/users/8976784/jfh"}, "reply_to_user": {"reputation": 15724, "user_id": 5754656, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7jfX3.png?s=128&g=1", "display_name": "Artyer", "link": "https://stackoverflow.com/users/5754656/artyer"}, "edited": false, "score": 1, "creation_date": 1568824395, "post_id": 57992494, "comment_id": 102400886, "body": "@Artyer Ahh that&#39;s probably why it&#39;s all over that codebase, as it was ported from C. Many thanks"}], "answers": [{"tags": [], "owner": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "is_accepted": true, "score": 4, "last_activity_date": 1568811163, "creation_date": 1568811163, "answer_id": 57993295, "question_id": 57992494, "link": "https://stackoverflow.com/questions/57992494/why-declaring-a-return-value-for-a-function-that-doesnt-return-nothing-leads-to/57993295#57993295", "title": "Why declaring a return value for a function that doesn&#39;t return nothing leads to run-time crash in gcc8 only", "body": "<p>Starting with GCC 8, your <code>setYear</code> function simply doesn't have the <code>RET</code> instruction when your source is compiled with <code>-Og</code> (at higher levels the function is inlined, making understanding what's going on harder), and the <code>main</code> where the function is called also lacks any continuation.</p>\n\n<p>See for comparison <a href=\"https://gcc.godbolt.org/z/lYwCx7\" rel=\"nofollow noreferrer\">the original code at Compiler Explorer</a>:</p>\n\n<pre><code>&lt;...&gt;\nsetYear(int):\n        mov     DWORD PTR year[rip], edi\n.LC0:\n        .string \"Hello World!\"\nmain:\n&lt;...&gt;\n</code></pre>\n\n<p>And the code where return type <code>int</code> has been changed to <code>void</code> (<a href=\"https://gcc.godbolt.org/z/vLLY4g\" rel=\"nofollow noreferrer\">link</a>):</p>\n\n<pre><code>&lt;...&gt;\nsetYear(int):\n        mov     DWORD PTR year[rip], edi\n        ret\n.LC0:\n        .string \"Hello World!\"\n.LC1:\n        .string \"Year: \"\nmain:\n&lt;...&gt;\n</code></pre>\n\n<p>This omission alone is enough for execution flow to bump into <code>main</code> (the <code>.string</code>s are declared in another section), executing it again instead of returning to the point of call. Apparenly, gcc doesn't consider it worth adding the <code>RET</code> instruction when there's no <code>return</code> statement in a function other than <code>main</code> returning non-<code>void</code>.</p>\n\n<p>Of course, in many cases the problem is easily detectable by the compiler at the compilation stage. I'd recommend using <code>-Werror=return-type</code> option, which makes this an error, unconditionally (unlike <code>-Werror</code> in general). It's very rare when you'd want to avoid this option, and it's extremely useful.</p>\n"}], "owner": {"reputation": 3955, "user_id": 1586860, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e1c313b9930142e847eefa22594db994?s=128&d=identicon&r=PG", "display_name": "Antonello", "link": "https://stackoverflow.com/users/1586860/antonello"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 57993295, "answer_count": 1, "score": 2, "last_activity_date": 1568811985, "creation_date": 1568808632, "last_edit_date": 1568811985, "question_id": 57992494, "link": "https://stackoverflow.com/questions/57992494/why-declaring-a-return-value-for-a-function-that-doesnt-return-nothing-leads-to", "title": "Why declaring a return value for a function that doesn&#39;t return nothing leads to run-time crash in gcc8 only", "body": "<p>In the following code a function is declared/defined as <code>int setYear(int year_h){year = year_h;}</code> (instead of <code>void setYear(...)</code>, leading to run-time crash in gcc 8 AND with the flag <code>-O[X]</code> only.</p>\n\n<p>Specific questions:</p>\n\n<ol>\n<li>What have changed in gcc 8, as it worked in gcc 7 ?</li>\n<li>Which flags can I use (if any) to generate a compilation error (rather than a warning) in gcc8 ?</li>\n</ol>\n\n<p>main.cpp:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint year = 2000;\nint setYear(int year_h){year = year_h;}\n\nint main()\n{\n    cout &lt;&lt; \"Hello World!\" &lt;&lt; endl;\n    setYear(2019);\n    cout &lt;&lt; \"Year: \" &lt;&lt; year &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>Run-time crash with:</p>\n\n<pre><code>g++-8 -O2  -o main main.cpp\n./main\nHello World!\nHello World!\nSegmentation fault (core dumped)\n</code></pre>\n\n<p>Works with:</p>\n\n<pre><code>g++-7 -O2  -o main main.cpp\n</code></pre>\n\n<p>or</p>\n\n<pre><code>g++-8 -o main main.cpp\n</code></pre>\n\n<p>EDIT: The question <a href=\"https://stackoverflow.com/questions/3402178/omitting-return-statement-in-c\">Omitting return statement in C++</a> answers my second question, but not the first one (on the difference between gcc 7 and gcc 8). </p>\n"}, {"tags": ["c++", "string", "char", "getline"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 3, "creation_date": 1568809315, "post_id": 57992491, "comment_id": 102392192, "body": "<i>&quot;I have 2 variables of char type.&quot;</i> No, you don&#39;t."}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 3852287, "user_type": "registered", "profile_image": "https://graph.facebook.com/1517890098/picture?type=large", "display_name": "Abinash Nanda", "link": "https://stackoverflow.com/users/3852287/abinash-nanda"}, "edited": false, "score": 1, "creation_date": 1568815590, "post_id": 57992549, "comment_id": 102395918, "body": "Thank you for the quick response."}], "tags": [], "owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "is_accepted": true, "score": 7, "last_activity_date": 1568808820, "creation_date": 1568808820, "answer_id": 57992549, "question_id": 57992491, "link": "https://stackoverflow.com/questions/57992491/why-the-second-character-is-getting-lost-for-the-second-variable/57992549#57992549", "title": "Why the second character is getting lost for the second variable", "body": "<p>Take a look at the documentation of <a href=\"http://www.cplusplus.com/reference/istream/istream/getline/\" rel=\"noreferrer\"><code>getline</code></a> (emphasis mine):</p>\n\n<blockquote>\n  <p>Maximum number of characters to write to s <strong>(including the terminating\n  null character)</strong>.</p>\n</blockquote>\n\n<p>So if you want to read in two symbols, you have to put a size of <code>3</code>.</p>\n\n<pre><code>cin.getline(code,3);\n</code></pre>\n\n<p>Change your buffer size to <code>3</code>, too:</p>\n\n<pre><code>char code[3];\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 3852287, "user_type": "registered", "profile_image": "https://graph.facebook.com/1517890098/picture?type=large", "display_name": "Abinash Nanda", "link": "https://stackoverflow.com/users/3852287/abinash-nanda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 57992549, "answer_count": 1, "score": 3, "last_activity_date": 1568882435, "creation_date": 1568808624, "last_edit_date": 1568882435, "question_id": 57992491, "link": "https://stackoverflow.com/questions/57992491/why-the-second-character-is-getting-lost-for-the-second-variable", "title": "Why the second character is getting lost for the second variable", "body": "<p>I have 2 variables of <code>char</code> type. </p>\n\n<pre><code>char desc[30];\nchar code[2];\ncout &lt;&lt; \"Enter values : \"&lt;&lt;\"\\n\";\ncin.getline(desc,30);\ncin.getline(code,2);\n\ncout &lt;&lt; \"\\nValues Entered: \"&lt;&lt;\"\\n\";\ncout &lt;&lt; desc &lt;&lt;\"\\t\";\ncout &lt;&lt; code &lt;&lt;\"\\n\";\n</code></pre>\n\n<p>When the input values are provided as below, the second character for the second variable is lost. I have tried <code>cin&gt;&gt;marks</code> and <code>cin.get(marks,2)</code>, but the behaviour is always same. </p>\n\n<pre>\nEnter values :\nThis is a test line\nLH\n\nValues Entered:\nThis is a test line     L\n\nProcess returned 0 (0x0)   execution time : 11.285 s\nPress any key to continue.\n</pre>\n\n<p>In the example above even though the input is <code>LH</code>, in the output only 'L' is available and 'H' is lost. Can someone advise what is wrong here?</p>\n"}, {"tags": ["c++", "c", "wayland", "uinput"], "answers": [{"tags": [], "owner": {"reputation": 129, "user_id": 11190671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48b6fdc090508f18b0ded988cc4b0745?s=128&d=identicon&r=PG&f=1", "display_name": "AJ Cole", "link": "https://stackoverflow.com/users/11190671/aj-cole"}, "is_accepted": false, "score": 0, "last_activity_date": 1568808819, "creation_date": 1568808819, "answer_id": 57992547, "question_id": 57992400, "link": "https://stackoverflow.com/questions/57992400/uinput-emulate-lwin-s-under-wayland-weston/57992547#57992547", "title": "uinput emulate LWIN + S under wayland/weston", "body": "<p>I actually found it out a few minutes afer posting this! And it works!</p>\n\n<p>The key code is KEY_LEFTMETA, i found it out using the evtest package. Screenshot is successfully made.</p>\n"}], "owner": {"reputation": 129, "user_id": 11190671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48b6fdc090508f18b0ded988cc4b0745?s=128&d=identicon&r=PG&f=1", "display_name": "AJ Cole", "link": "https://stackoverflow.com/users/11190671/aj-cole"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568808819, "creation_date": 1568808328, "question_id": 57992400, "link": "https://stackoverflow.com/questions/57992400/uinput-emulate-lwin-s-under-wayland-weston", "title": "uinput emulate LWIN + S under wayland/weston", "body": "<p>I'm trying to emulate a key combination of Left Windows Key (Super) + S under wayland to perform a screenshot automatically (this key combination properly starts weston-screenshooter that saves a screenshot to the home directory, but it cannot be executed from terminal).\nI found out about using uinput to do this, I found a few examples and came up with this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;linux/input.h&gt;\n#include &lt;linux/uinput.h&gt;\n\n#define die(str) do { \\\n        perror(str); \\\n        exit(EXIT_FAILURE); \\\n    } while(0)\n\nvoid emitEvent(int fd, uint16_t type, uint16_t code, int val)\n{\n    struct input_event ie;\n\n    ie.type = type;\n    ie.code = code;\n    ie.value = val;\n    /* timestamp values below are ignored */\n    ie.time.tv_sec = 0;\n    ie.time.tv_usec = 0;\n\n    write(fd, &amp;ie, sizeof(ie));\n}\n\n#define UI_DEV_SETUP _IOW(UINPUT_IOCTL_BASE, 3, struct uinput_setup)\n\nint main(int argc, char *argv[])\n{\n    int                    fd;\n    struct uinput_user_dev uidev;\n\n    fd = open(\"/dev/uinput\", O_WRONLY | O_NONBLOCK);\n    if(fd &lt; 0)\n        die(\"error: open\");\n\n    if(ioctl(fd, UI_SET_EVBIT, EV_KEY) &lt; 0)\n        die(\"error: ioctl\");\n    if(ioctl(fd, UI_SET_KEYBIT, KEY_S) &lt; 0)\n        die(\"error: ioctl\");\n    if(ioctl(fd, UI_SET_KEYBIT, 133) &lt; 0)\n        die(\"error: ioctl\");\n\n    memset(&amp;uidev, 0, sizeof(uidev));\n    snprintf(uidev.name, UINPUT_MAX_NAME_SIZE, \"uinput-sample\");\n    uidev.id.bustype = BUS_USB;\n    uidev.id.vendor  = 0x1234; // random stuff\n    uidev.id.product = 0x6433;\n    uidev.id.version = 1;\n\n    if(write(fd, &amp;uidev, sizeof(uidev)) &lt; 0)\n        die(\"error: write\");\n\n    if(ioctl(fd, UI_DEV_CREATE) &lt; 0)\n        die(\"error: ioctl\");\n\n    sleep(1);\n\n   // srand(time(NULL));\n\n    emitEvent(fd, EV_KEY, 133, 1);\n    emitEvent(fd, EV_KEY, KEY_S, 1);\n    emitEvent(fd, EV_SYN, SYN_REPORT, 0);\n    usleep(300);\n    emitEvent(fd, EV_KEY, KEY_S, 0);\n    emitEvent(fd, EV_KEY, 133, 0);\n    emitEvent(fd, EV_SYN, SYN_REPORT, 0);\n\n    sleep(1);\n\n    if(ioctl(fd, UI_DEV_DESTROY) &lt; 0)\n        die(\"error: ioctl\");\n\n    close(fd);\n\n    return 0;\n}\n</code></pre>\n\n<p>My biggest problem is that I don't know which KEY_ is the Left Win/Left Super key, the key definitons aren't showing me anything related to win or super or mod_s at all, using xev on x11 i found that LWIN should be 133, but I think it's not correct because KEY_S = 31 in code but in xev it's 39.</p>\n\n<p>When running the application I can see the device is being registered in the system:</p>\n\n<pre><code>[ 6278.405013] input: uinput-sample as /devices/virtual/input/input23\n[14:02:17.556] event2  - [14:02:17.556] uinput-sample: [14:02:17.556] is tagged by udev as: Keyboard\n[14:02:17.556] event2  - [14:02:17.557] uinput-sample: [14:02:17.557] device is a keyboard\n[14:02:19.549] event2  - [14:02:19.550] uinput-sample: [14:02:19.550] device removed\n</code></pre>\n\n<p>but nothing else is happening.</p>\n\n<p>What is the proper key definition for Left Windows key? Is the code above valid for sending a key <strong>combination</strong> (2 keys pressed at once)? Is it even possible to achieve what I want? I have full root access in the system.</p>\n"}, {"tags": ["c++", "vector", "graph", "detection", "pattern-recognition"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 9784644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e4a45f7d63aa38b2ca884ab09b98e7d?s=128&d=identicon&r=PG&f=1", "display_name": "PatternRecognition", "link": "https://stackoverflow.com/users/9784644/patternrecognition"}, "is_accepted": false, "score": 0, "last_activity_date": 1573504289, "creation_date": 1573504289, "answer_id": 58808304, "question_id": 57992392, "link": "https://stackoverflow.com/questions/57992392/motion-detection-of-an-1d-array-neural-network-or-other-options/58808304#58808304", "title": "Motion Detection of an 1D Array (neural network or other options?)", "body": "<p>Sound recognition is still competitive.\nNo one can give you a solution where he can say this will work. Maybe someone who is very experienced in this field (+15 years in sound recognition). </p>\n\n<p>To 1) You can use a recurrent neural network, but i wouldn't give them so much chance that they work good in this case. But it can. You should rather use a Bayes network. Bayes networks are used in word recognition of spoken words. Here is a link to the first paper i found: <a href=\"https://www.aaai.org/Papers/AAAI/1998/AAAI98-024.pdf\" rel=\"nofollow noreferrer\">https://www.aaai.org/Papers/AAAI/1998/AAAI98-024.pdf</a> I haven't read it, just that you have an idea what i am talking about. Wikipedia should help too. </p>\n\n<p>To 2) Clearly you can try more features with your neural network. By example the number of apex, the frequency of apex, gradients and so on. This can work, it worked for me for a problem with time depended data. Was as good as time prediction. \nIn a perfect manner you make a lot of features, than you apply a principal component analysis (pca) or linear discriminant analysis (lda). This removes unimportant data which can confuse your neural network and makes train duration very high. </p>\n\n<p>I would try 2 first, because it's less work. Just making more features and train your ANN again. By the way, one layer seem not much for that problem, even i don't know your number of features and outputs. Probably you should use 2 mid-layer at least.</p>\n\n<p>If you don't get a solution with 2 you should decide by the result of 2 if you take RNN or Bayesian Network. If solution 2 with new features is bad i wouldn't try RNN because they are very similar. Bayesian Network are known to work good for time dependent data. </p>\n"}], "owner": {"reputation": 1, "user_id": 3161753, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000155265990/picture?type=large", "display_name": "user3161753", "link": "https://stackoverflow.com/users/3161753/user3161753"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573504289, "creation_date": 1568808310, "question_id": 57992392, "link": "https://stackoverflow.com/questions/57992392/motion-detection-of-an-1d-array-neural-network-or-other-options", "title": "Motion Detection of an 1D Array (neural network or other options?)", "body": "<p>I am currently developing a project for the detection of different sounds. The software should analyze an incoming sound as a wave file and recognize certain tags. For some tags, I use neural networks, which works well too. Now, however, I have a tag that makes problems. It's about motion detection. </p>\n\n<p>I want to know if the sound is rigid and stands still (slight variations are of course allowed) or if the sound may contain movement. To do this, I split the wave into frames of equal size and apply an FFT to get the spectrum. For the people here who are unfamiliar with the field, ... do not worry. You do not have to, because in the end only one graph comes out and I want to see if and how much this graph moves over time. </p>\n\n<p>Here is a small example. I load a wave (in the picture on the top right) that looks very similar visually over time. However, you can see in the spectrum (bottom right) that the height proportions (higher frequencies) per frame decrease. I would like to recognize such movements somehow.</p>\n\n<p>The example shows three frames. One frame per picture...\n(Unfortunately, I can not post any pictures here)</p>\n\n<p>Frame 1:\n<a href=\"https://ruta-sound.com/other_stuff/img/frame0.png\" rel=\"nofollow noreferrer\">https://ruta-sound.com/other_stuff/img/frame0.png</a></p>\n\n<p>Frame 2:\n<a href=\"https://ruta-sound.com/other_stuff/img/frame1.png\" rel=\"nofollow noreferrer\">https://ruta-sound.com/other_stuff/img/frame1.png</a></p>\n\n<p>Frame 3:\n<a href=\"https://ruta-sound.com/other_stuff/img/frame2.png\" rel=\"nofollow noreferrer\">https://ruta-sound.com/other_stuff/img/frame2.png</a></p>\n\n<p>Can somebody possibly give me an approach, how I can solve this problem?</p>\n\n<p>For a better illustration, there is the spectrogram below left. Here you can see the complete spectrum over time. X represents the time and Y the frequencies. Again, you can see the movement well.</p>\n\n<p>For a long time I have tried the following two ideas, but without success or wrongly implemented:</p>\n\n<p>1st approach: Also a neural network, as well as the other tags (it works great there). I take the complete picture at the bottom left and give it to the input of the network, just like with an image recognition. So you have X * Y input neurons, a hidden layer with 2/3 times neurons and two output neurons for \"movement\" or just \"no movement\". As I said, the other attributes are wonderful, but this one does not bother with this one. Do I need any recurrent networks? If so, does anyone know anything? </p>\n\n<p>2nd approach: I calculate the difference of the points in the spectrum from current to next frame and sum them. Suppose point 0 in the spectrum (lowest frequency) has the value \"0.5\" in frame 0, the value \"0.5\" in frame 1 and the value \"0.6\" in frame 2, then I would have a total of \"0.1\". I do that for all points and sum them together. The higher the value, the bigger the movement, right? Unfortunately not quite, because if there's just a kind of light shivering, so it goes slightly up and down from frame to frame, but does not move at all, then it still sums up and a movement is recognized, but hardly any is available.</p>\n"}, {"tags": ["c++", "file"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1568808298, "post_id": 57992314, "comment_id": 102391600, "body": "With text files, where each line could be of different length, you can&#39;t use file position (which you <i>can</i> get) as it depends in the previous contents and the length of the previous lines. If you want to process data from a specific line in the file you have to read all lines and check them for the starting point. The lines you read you can just discard."}, {"owner": {"reputation": 25, "user_id": 11924508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66c7e9c0f7744ab2f7cfb61b42f9aa4b?s=128&d=identicon&r=PG&f=1", "display_name": "throwawayinvisible", "link": "https://stackoverflow.com/users/11924508/throwawayinvisible"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1568808473, "post_id": 57992314, "comment_id": 102391700, "body": "so even if it&#39;s &quot;myfile.txt&quot; with only numbers on the file, I can&#39;t use the file position function?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1568808690, "post_id": 57992314, "comment_id": 102391827, "body": "Only, and <b><i>only</i></b> if the lines are all the <i>exact</i> same size. If you have even one line with a different number of characters then it&#39;s not possible."}, {"owner": {"reputation": 25, "user_id": 11924508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66c7e9c0f7744ab2f7cfb61b42f9aa4b?s=128&d=identicon&r=PG&f=1", "display_name": "throwawayinvisible", "link": "https://stackoverflow.com/users/11924508/throwawayinvisible"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1568809017, "post_id": 57992314, "comment_id": 102392012, "body": "For example, I have the number, 2, 34, 295, if, in some way, I don&#39;t know how, I add some special characters to: 2 and 34, so I can control the number of characters, then, might it be doable?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1568809049, "post_id": 57992314, "comment_id": 102392030, "body": "Oh and even if the lines are all the exact same length, you might still have to worry about line endings. The &quot;newline&quot; at the end of a line depends on the operating system the file was created on."}, {"owner": {"reputation": 25, "user_id": 11924508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66c7e9c0f7744ab2f7cfb61b42f9aa4b?s=128&d=identicon&r=PG&f=1", "display_name": "throwawayinvisible", "link": "https://stackoverflow.com/users/11924508/throwawayinvisible"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1568809112, "post_id": 57992314, "comment_id": 102392070, "body": "<a href=\"https://stackoverflow.com/questions/5207550/in-c-is-there-a-way-to-go-to-a-specific-line-in-a-text-file\" title=\"in c is there a way to go to a specific line in a text file\">stackoverflow.com/questions/5207550/&hellip;</a>, I had found this, isn&#39;t more and less the same thing? the function does give back the cursor, no?"}, {"owner": {"reputation": 25, "user_id": 11924508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66c7e9c0f7744ab2f7cfb61b42f9aa4b?s=128&d=identicon&r=PG&f=1", "display_name": "throwawayinvisible", "link": "https://stackoverflow.com/users/11924508/throwawayinvisible"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1568809277, "post_id": 57992314, "comment_id": 102392170, "body": "So, in the example given in the post, if I would like to read the values 12, 145 and 698, i should know the number of the amount of items read, and i have to know how many item have to scroll from down to up, to reach the reading point. Now my idea doable, or even that is not something possible?"}, {"owner": {"reputation": 12461, "user_id": 266487, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/585595b6a24df9b742ebc186788e9a8e?s=128&d=identicon&r=PG", "display_name": "harper", "link": "https://stackoverflow.com/users/266487/harper"}, "edited": false, "score": 1, "creation_date": 1568809850, "post_id": 57992314, "comment_id": 102392514, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/5207550/in-c-is-there-a-way-to-go-to-a-specific-line-in-a-text-file\">In C++ is there a way to go to a specific line in a text file?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 11924508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66c7e9c0f7744ab2f7cfb61b42f9aa4b?s=128&d=identicon&r=PG&f=1", "display_name": "throwawayinvisible", "link": "https://stackoverflow.com/users/11924508/throwawayinvisible"}, "edited": false, "score": 0, "creation_date": 1568811245, "post_id": 57992822, "comment_id": 102393279, "body": "i have read about it, and it says that the things written in the first amount of N lines that i would like to ignore, then are deleted, but that&#39;s not what i would like. I just would like to ignore them."}], "tags": [], "owner": {"reputation": 298, "user_id": 5547634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fa8fcc37affe9d14ac68b07003eb3f8?s=128&d=identicon&r=PG&f=1", "display_name": "Loki", "link": "https://stackoverflow.com/users/5547634/loki"}, "is_accepted": false, "score": 2, "last_activity_date": 1568809640, "creation_date": 1568809640, "answer_id": 57992822, "question_id": 57992314, "link": "https://stackoverflow.com/questions/57992314/how-to-read-a-certain-line-from-a-file-and-read-from-that-point-below-in-c/57992822#57992822", "title": "How to read a certain line from a file and read from that point below, in c++?", "body": "<p>You can use getline : <a href=\"http://www.cplusplus.com/reference/string/string/getline/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/string/string/getline/</a>\nAnd call it in a loop to skip the first N lines.</p>\n"}], "owner": {"reputation": 25, "user_id": 11924508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66c7e9c0f7744ab2f7cfb61b42f9aa4b?s=128&d=identicon&r=PG&f=1", "display_name": "throwawayinvisible", "link": "https://stackoverflow.com/users/11924508/throwawayinvisible"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568809640, "creation_date": 1568808068, "question_id": 57992314, "link": "https://stackoverflow.com/questions/57992314/how-to-read-a-certain-line-from-a-file-and-read-from-that-point-below-in-c", "title": "How to read a certain line from a file and read from that point below, in c++?", "body": "<p>I have a txt file, with some numbers. Let's say I have these lines.</p>\n\n<p>124</p>\n\n<p>559</p>\n\n<p>774</p>\n\n<p>12</p>\n\n<p>145</p>\n\n<p>698</p>\n\n<p>So there are 6 lines, let's say, I would like to read the file from 12 and below, is there a function in c++ that returns the cursor of the file? I don't know prior what are the values, I was just trying to explain what I would like to do. \nSo for example if I would like to read the values 12, 145, 698, is it possible, and ignoring the prior values, not deleting.</p>\n"}, {"tags": ["c++", "constructor", "abstract-class"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1568808586, "post_id": 57992309, "comment_id": 102391769, "body": "From which point, and to which end?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1568809187, "post_id": 57992309, "comment_id": 102392120, "body": "Why does it matter to <code>A</code> how derived classes are created?"}], "answers": [{"tags": [], "owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "is_accepted": false, "score": 0, "last_activity_date": 1568808674, "creation_date": 1568808674, "answer_id": 57992505, "question_id": 57992309, "link": "https://stackoverflow.com/questions/57992309/how-to-enforce-implementing-the-constructor-of-a-specific-data-type-on-a-derived/57992505#57992505", "title": "How to enforce implementing the constructor of a specific data type on a derived class?", "body": "<p>If <code>A</code> will have it's own constructor which takes parameter and no default constructor </p>\n\n<pre><code>class A {\npublic:\n   A(T t) {};\n   virtual ~A() {}\n   virtual void foo() = 0;\n};\n</code></pre>\n\n<p>Then all derived classes have to initialize that in their constructor, which means <em>at least one</em> constructor will be needed.</p>\n\n<p>See below examples:</p>\n\n<pre><code>class B : public A {\npublic:\n   B(T t):A(t) { ... } // pass parameter to A constructor\n};\n\nclass C : public A {\npublic:\n   C(): A(T{}) { ... } // initialize A with a default T\n};\n\nclass D : public A {\npublic:\n   using A::A; // inherit A's constructors\n};\n\nclass E : public A {\npublic:\n    //error - doesn't work without any constructor!\n};\n</code></pre>\n\n<p>You shouldn't try to force any constructor syntax in derived classes - they may know things which you don't know and they may or may not need T. I'm not sure if forcing constructor signature is even possible.</p>\n"}, {"comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1568808755, "post_id": 57992506, "comment_id": 102391866, "body": "You can move the <code>static_assert</code> into e.g. a constructor of <code>A_CRTP</code>, so that <code>B</code> is complete by the time it is instantiated."}, {"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "edited": false, "score": 1, "creation_date": 1568811816, "post_id": 57992506, "comment_id": 102393606, "body": "@MaxLanghof another point is that you aren&#39;t required to pass the derived type, eg. <code>class B : public A_CRTP&lt;C&gt; {</code> could work - so it is relying on benign use"}], "tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": false, "score": 0, "last_activity_date": 1568809230, "last_edit_date": 1568809230, "creation_date": 1568808676, "answer_id": 57992506, "question_id": 57992309, "link": "https://stackoverflow.com/questions/57992309/how-to-enforce-implementing-the-constructor-of-a-specific-data-type-on-a-derived/57992506#57992506", "title": "How to enforce implementing the constructor of a specific data type on a derived class?", "body": "<p>My best shot would be using CRTP, so that you can check the properties of the derived class within the base class:</p>\n\n<pre><code>template &lt;class Derived&gt;\nclass A_CRTP //: public A_Base\n{\nprotected:\n  A() {\n    static_assert(sizeof(Derived{T}) &gt; 0, \"Constructor from T not present\");\n  }\n};\n\nclass B : public A_CRTP&lt;B&gt; {\npublic:\n  B();\n  B(T); // removing this is a compile-time error.\n};\n</code></pre>\n\n<p>However, this is trivially bypassed:</p>\n\n<pre><code>class C : public B\n{\n  C();\n  // No C(T) needed, B has that and A doesn't know about C.\n};\n</code></pre>\n\n<p><a href=\"https://godbolt.org/z/qzd_LJ\" rel=\"nofollow noreferrer\">https://godbolt.org/z/qzd_LJ</a></p>\n\n<p>That makes this whole exercise somewhat pointless, as it just forces users to take extra steps before they can write the set of constructors <em>they</em> want (see answer of @Yksisarvinen).</p>\n"}, {"comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1568810215, "post_id": 57992667, "comment_id": 102392713, "body": "There is a way to &quot;pick&quot; this lock: <a href=\"https://godbolt.org/z/S1zjzh\" rel=\"nofollow noreferrer\">godbolt.org/z/S1zjzh</a> However, that is easy enough to thwart by giving <code>create_token</code> some behavior that is actually hideable in <code>A</code> (e.g. requiring some state, not just any instance of <code>create_token</code>. That could then be hidden away in some library, unlike the templated <code>create</code>)."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1568811082, "post_id": 57992667, "comment_id": 102393184, "body": "More generally, it would be possible to create some helper code to obtain a valid token from <code>A</code> for a dummy <code>A</code>-derived class class and then use those tokens to write arbitrarily-parametrized constructors in other <code>A</code>-derived classes. I don&#39;t expect that to be relevant in most cases (such an attacker might as well go to reverse engineering/code injection) but it&#39;s a C++-conforming way to break out of this interface."}, {"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1568811631, "post_id": 57992667, "comment_id": 102393496, "body": "@MaxLanghof indeed -  it&#39;s easy enough to thwart as it is - like you have demonstrated. My point is that it is possible <b>by design</b> at the language level - I don&#39;t have time atm. to polish off the answer, maybe later."}, {"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1568878044, "post_id": 57992667, "comment_id": 102416440, "body": "@MaxLanghof I have updated the example - now using friend + private constructor - that should stop the immediate Stealing, wouldn&#39;t you say ?"}], "tags": [], "owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "is_accepted": false, "score": 1, "last_activity_date": 1568877810, "last_edit_date": 1568877810, "creation_date": 1568809201, "answer_id": 57992667, "question_id": 57992309, "link": "https://stackoverflow.com/questions/57992309/how-to-enforce-implementing-the-constructor-of-a-specific-data-type-on-a-derived/57992667#57992667", "title": "How to enforce implementing the constructor of a specific data type on a derived class?", "body": "<p><strong>It is possible</strong> with a private token based design. This idea looks something like the following:</p>\n\n<pre><code>#include &lt;utility&gt;\n#include &lt;memory&gt;\n\nclass A{\nprivate:\n  struct create_token \n  { \n    create_token(const create_token &amp;) = delete; \n    create_token&amp; operator=(const create_token &amp;) = delete; \n    create_token(create_token &amp;&amp;) = default; \n    create_token&amp; operator=(create_token &amp;&amp;) = default; \n    friend class A;\n      private:\n    create_token(){};\n  };\n  inline static auto token = create_token{};\nprotected:\n  A(create_token) {}\npublic:\n  template&lt;class T, typename... ARGUMENTS&gt;\n  static std::unique_ptr&lt;T&gt; create(ARGUMENTS&amp;&amp;... arguments)\n  {\n    // Whatever creation mechanism here\n    return std::make_unique&lt;T&gt;(create_token{}, std::forward&lt;ARGUMENTS&gt;(arguments)...);\n  }\n};\n\nclass B : public A {\npublic:\n  template &lt;typename Token&gt; // Can't name A::create_token, it is private\n  B(Token tok) : A(std::move(tok)) {}\n  B(){} // Will always lack a `create_token`\n};\n</code></pre>\n\n<p>The example needs a bit of modification for your case (mainly to restrict the constructor) - but the point is that construction can only go through the factory <code>create</code> function.</p>\n"}], "owner": {"reputation": 11, "user_id": 5323639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d251ba5460056c9d39e01f61b9f4423?s=128&d=identicon&r=PG&f=1", "display_name": "chen", "link": "https://stackoverflow.com/users/5323639/chen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1568877810, "creation_date": 1568808055, "question_id": 57992309, "link": "https://stackoverflow.com/questions/57992309/how-to-enforce-implementing-the-constructor-of-a-specific-data-type-on-a-derived", "title": "How to enforce implementing the constructor of a specific data type on a derived class?", "body": "<p>Given an abstract class A and a data type T, is there a way to enforce implementing a constructor of T on a derived class of A? i.e.</p>\n\n<pre><code>class A {\npublic:\n   virtual ~A() {}\n   virtual void foo() = 0;\n};\nclass B : public A {\npublic:\n   B(T t) { ... } // this constructor must be implemented otherwise compilation will error out\n};\n</code></pre>\n"}, {"tags": ["c++", "qt", "qlineedit"], "comments": [{"owner": {"reputation": 3580, "user_id": 3246449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Oh5uF.jpg?s=128&g=1", "display_name": "Maxim Paperno", "link": "https://stackoverflow.com/users/3246449/maxim-paperno"}, "edited": false, "score": 0, "creation_date": 1568867077, "post_id": 57992228, "comment_id": 102412378, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/47908521/qpushbutton-alignment-on-top-another-widget\">QPushButton alignment on top another widget</a>"}], "answers": [{"tags": [], "owner": {"reputation": 8569, "user_id": 276451, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/D6E5v.jpg?s=128&g=1", "display_name": "Jos&#233; Tom&#225;s Tocino", "link": "https://stackoverflow.com/users/276451/jos%c3%a9-tom%c3%a1s-tocino"}, "is_accepted": true, "score": 4, "last_activity_date": 1568807981, "creation_date": 1568807981, "answer_id": 57992285, "question_id": 57992228, "link": "https://stackoverflow.com/questions/57992228/change-x-and-y-position-of-a-qlineedit/57992285#57992285", "title": "Change x and y position of a QLineEdit", "body": "<p>It depends on how the QLineEdit is initially positioned. Is it placed within a layout? If so, you won't be able to place it at an absolute position.</p>\n\n<p>But if it does not belong to any layout, you can just use the <code>move</code> method:</p>\n\n<pre><code>ui-&gt;lineEdit-&gt;move(x, y);\n</code></pre>\n\n<p><a href=\"https://doc.qt.io/qt-5/qwidget.html#move-1\" rel=\"nofollow noreferrer\">Here's the docs</a>.</p>\n"}], "owner": {"reputation": 39, "user_id": 11419443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dbc234f15d8c6e5f5857a2b22a35e2c?s=128&d=identicon&r=PG&f=1", "display_name": "JustProgrammingQuestions", "link": "https://stackoverflow.com/users/11419443/justprogrammingquestions"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 354, "favorite_count": 0, "accepted_answer_id": 57992285, "answer_count": 1, "score": 0, "last_activity_date": 1568814958, "creation_date": 1568807821, "last_edit_date": 1568814958, "question_id": 57992228, "link": "https://stackoverflow.com/questions/57992228/change-x-and-y-position-of-a-qlineedit", "title": "Change x and y position of a QLineEdit", "body": "<p>I would like to change the position of the lineEdit (or even a PushButton if it's not possible with the lineEdit) from my Qt application, according to the input given.\nSo let's say that I want the x position to be 150 pixels, then I would insert 150 into the lineEdit.\nIs there any way to do this? </p>\n\n<p>I've already tried this:</p>\n\n<pre><code>void DrawTest::on_lineEdit_returnPressed()\n{\n    QString x = ui-&gt;lineEdit-&gt;text();\n    qDebug() &lt;&lt; \"x: \" &lt;&lt; x;\n    QString style = \"QLineEdit {\"\n                    \":\" +ui-&gt;lineEdit-&gt;text()+ \"px;\"\n                    \"background-color: #FF00FF;\"\n                    \"};\";\n    qDebug() &lt;&lt; \"Style: \" &lt;&lt; style;\n    ui-&gt;lineEdit-&gt;setStyleSheet(style);\n}\n\n</code></pre>\n"}, {"tags": ["c++", "template-meta-programming", "decltype"], "comments": [{"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 4, "creation_date": 1568807338, "post_id": 57991984, "comment_id": 102391097, "body": "maybe <code>template&lt;typename T&gt; using message_type = T::element_type::message_type;</code> using it through <code>decltype()</code> (I mean: <code>message_type&lt;decltype(ptr)&gt; number = 5;</code>) ?"}], "answers": [{"comments": [{"owner": {"reputation": 176, "user_id": 2558184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cba2a82649b0bc2d7f6da438f5c32b6?s=128&d=identicon&r=PG", "display_name": "Matou\u0161 Vrba", "link": "https://stackoverflow.com/users/2558184/matou%c5%a1-vrba"}, "edited": false, "score": 0, "creation_date": 1568807701, "post_id": 57992152, "comment_id": 102391267, "body": "I think this is the correct answer... I&#39;ll accept it after some time unless someone has anything more to add."}], "tags": [], "owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "is_accepted": true, "score": 4, "last_activity_date": 1568807567, "creation_date": 1568807567, "answer_id": 57992152, "question_id": 57991984, "link": "https://stackoverflow.com/questions/57991984/metafunction-returning-element-type-using-decltype/57992152#57992152", "title": "Metafunction returning element type using decltype", "body": "<p>This works:</p>\n\n<pre><code>#include &lt;memory&gt;\n\ntemplate&lt;typename T&gt;\nusing message_type = typename T::element_type::message_type;\n\ntemplate&lt;typename T&gt;\nclass Foo\n{\n    public:\n        using message_type = T;\n};\n\nint main()\n{\n    std::shared_ptr&lt;Foo&lt;int&gt;&gt; ptr;\n    message_type&lt;decltype(ptr)&gt; number = 5;\n\n    return 0;\n}\n</code></pre>\n\n<p>I don't think you can do much better as you aren't allowed to use <code>std::shared_ptr</code> as a non-type template parameter so you have to do <code>message_type&lt;decltype(ptr)&gt;</code>, <code>message_type&lt;ptr&gt;</code> is not possible to implement (yet).</p>\n"}], "owner": {"reputation": 176, "user_id": 2558184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cba2a82649b0bc2d7f6da438f5c32b6?s=128&d=identicon&r=PG", "display_name": "Matou\u0161 Vrba", "link": "https://stackoverflow.com/users/2558184/matou%c5%a1-vrba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 57992152, "answer_count": 1, "score": 0, "last_activity_date": 1568807567, "creation_date": 1568806976, "question_id": 57991984, "link": "https://stackoverflow.com/questions/57991984/metafunction-returning-element-type-using-decltype", "title": "Metafunction returning element type using decltype", "body": "<p>I have the following MWE:</p>\n\n<pre><code>#include &lt;memory&gt;\n\ntemplate&lt;typename T&gt;\nclass Foo\n{\n    public:\n        using message_type = T;\n};\n\nint main()\n{\n    std::shared_ptr&lt;Foo&lt;int&gt;&gt; ptr;\n    decltype(ptr)::element_type::message_type number = 5;\n\n    return 0;\n}\n</code></pre>\n\n<p>and I would like to have a shorthand way to access the <code>message_type</code> type of a variable (such as <code>ptr</code>) without having to write out the whole <code>decltype(ptr)::element_type::message_type</code> part. I.e. have some alias to <code>decltype(ptr)::element_type::message_type</code> along the lies of <code>message_type(ptr)</code>, which would have the same result.</p>\n\n<p>My first idea was along the lines of</p>\n\n<pre><code>template&lt;typename T&gt;\nusing message_type = decltype(T)::element_type::message_type;\n</code></pre>\n\n<p>which seems logical at first, but it's actually mixing concepts of types and variables, so it does not even compile. My only working solution so far is</p>\n\n<pre><code>#define MSG_TYPE(x) decltype(x)::element_type::message_type\n</code></pre>\n\n<p>however I'd like to avoid using macros.</p>\n\n<p>Is this even possible with current C++ metaprogramming? If so, what is the correct syntax?</p>\n"}, {"tags": ["c++", "opengl", "glsl", "shader", "sfml"], "comments": [{"owner": {"reputation": 18072, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1568806593, "post_id": 57991822, "comment_id": 102390714, "body": "You should definitely not define your own OpenGL constants. Use something like glad, glew, or any other extension loading mechanism you like."}, {"owner": {"reputation": 5451, "user_id": 414063, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5b1e3128b33fa994d6c6640fb49898da?s=128&d=identicon&r=PG", "display_name": "jokoon", "link": "https://stackoverflow.com/users/414063/jokoon"}, "reply_to_user": {"reputation": 18072, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1568806683, "post_id": 57991822, "comment_id": 102390762, "body": "it works, constants are the same across opengl versions. SFML is already using GLAD"}, {"owner": {"reputation": 18072, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1568806953, "post_id": 57991822, "comment_id": 102390903, "body": "About the real problem: Could it be that you are misunderstanding what texture are doing? There is a missing part where you somewhere move/copy the rendered data to the texture. Otherwise it will never contain any values that you render. Either you attach the texture to a framebuffer or you read the default renderbuffer back directly. You might want to look into <a href=\"http://www.opengl-tutorial.org/intermediate-tutorials/tutorial-14-render-to-texture/\" rel=\"nofollow noreferrer\">Render to Texture</a> if you really need it in a texture, but I suggest reading the backbuffer directly using glReadPixels."}, {"owner": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "edited": false, "score": 0, "creation_date": 1568835299, "post_id": 57991822, "comment_id": 102405207, "body": "SFML actually provides the <a href=\"https://www.sfml-dev.org/documentation/2.5.1/classsf_1_1RenderTexture.php\" rel=\"nofollow noreferrer\">RenderTexture</a> class to facilitate rendering to a texture. And it has a method to copy the GPU texture back to an image in memory too: <code>sf::Image img = renderTexture.getTexture().copyToImage();</code> You may even be able to generate the image asynchronously with a separate OpenGL context if you want to go that far."}, {"owner": {"reputation": 5451, "user_id": 414063, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5b1e3128b33fa994d6c6640fb49898da?s=128&d=identicon&r=PG", "display_name": "jokoon", "link": "https://stackoverflow.com/users/414063/jokoon"}, "reply_to_user": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "edited": false, "score": 0, "creation_date": 1568921441, "post_id": 57991822, "comment_id": 102439163, "body": "@Romen that&#39;s not what I want to do. I want to get an array of float. A texture is made of 4 8bits channels colors."}, {"owner": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "edited": false, "score": 0, "creation_date": 1568923462, "post_id": 57991822, "comment_id": 102440031, "body": "@Jokoon, sorry I wasn&#39;t aware until looking closer that SFML did not support floating point textures. You can still do the same thing as that SFML line with pure OpenGL but using <code>GL_FLOAT</code> for a floating-point render target. See the &#39;Render to Texture&#39; link in BDL&#39;s comment above."}, {"owner": {"reputation": 5451, "user_id": 414063, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5b1e3128b33fa994d6c6640fb49898da?s=128&d=identicon&r=PG", "display_name": "jokoon", "link": "https://stackoverflow.com/users/414063/jokoon"}, "edited": false, "score": 0, "creation_date": 1568964453, "post_id": 57991822, "comment_id": 102449980, "body": "have you read my code? <code>glTexImage2D(GL_TEXTURE_2D, 0, GL_R32F, size.x, size.y, 0, GL_RED, GL_FLOAT, NULL);</code> declares the texture as float. what do you mean by a &quot;floating-point render target&quot;?"}, {"owner": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "edited": false, "score": 0, "creation_date": 1568990657, "post_id": 57991822, "comment_id": 102463576, "body": "@jokoon, I have read your code. You can render your shader to a texture by following this <a href=\"http://www.opengl-tutorial.org/intermediate-tutorials/tutorial-14-render-to-texture/\" rel=\"nofollow noreferrer\">tutorial</a>. The texture that you bind as the render target (aka frame buffer) should be set up as <code>GL_FLOAT</code>, then you can download that texture with <code>glGetTexImage</code> into an array of float values on the CPU. It looks like you&#39;ve written the code for most of this already, but you seem to have missed the step where you bind a custom framebuffer."}, {"owner": {"reputation": 5451, "user_id": 414063, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5b1e3128b33fa994d6c6640fb49898da?s=128&d=identicon&r=PG", "display_name": "jokoon", "link": "https://stackoverflow.com/users/414063/jokoon"}, "reply_to_user": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "edited": false, "score": 0, "creation_date": 1568997040, "post_id": 57991822, "comment_id": 102466540, "body": "@Romen <a href=\"https://bpaste.net/show/fUx1\" rel=\"nofollow noreferrer\">bpaste.net/show/fUx1</a>"}, {"owner": {"reputation": 5451, "user_id": 414063, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5b1e3128b33fa994d6c6640fb49898da?s=128&d=identicon&r=PG", "display_name": "jokoon", "link": "https://stackoverflow.com/users/414063/jokoon"}, "edited": false, "score": 0, "creation_date": 1568997776, "post_id": 57991822, "comment_id": 102466812, "body": "(sorry, before your last answer, I noticed you already posted that tutorial and I hadn&#39;t checked it)"}, {"owner": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "edited": false, "score": 0, "creation_date": 1568997926, "post_id": 57991822, "comment_id": 102466864, "body": "@jokoon, After reading that tutorial, let me know if you still need guidance. You need to bind a custom frame buffer, render with your shader and <code>sprite_perlin</code> texture to that framebuffer, then copy the texture bound to that frame buffer back to your <code>values</code> array with <code>glGetTexImage</code>."}, {"owner": {"reputation": 5451, "user_id": 414063, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5b1e3128b33fa994d6c6640fb49898da?s=128&d=identicon&r=PG", "display_name": "jokoon", "link": "https://stackoverflow.com/users/414063/jokoon"}, "reply_to_user": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "edited": false, "score": 0, "creation_date": 1569013962, "post_id": 57991822, "comment_id": 102472307, "body": "@Romen After reading SFML code for RenderTextureFBO.cpp (github) and reading the tutorial, I can&#39;t manage to intersect what part of the code I can use. IRC people suggested me to use SFML to do what I want... here is some changes I made <a href=\"https://bpaste.net/show/237d\" rel=\"nofollow noreferrer\">bpaste.net/show/237d</a>"}], "answers": [{"comments": [{"owner": {"reputation": 5451, "user_id": 414063, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5b1e3128b33fa994d6c6640fb49898da?s=128&d=identicon&r=PG", "display_name": "jokoon", "link": "https://stackoverflow.com/users/414063/jokoon"}, "edited": false, "score": 0, "creation_date": 1569158898, "post_id": 58041244, "comment_id": 102497723, "body": "Wouldn&#39;t GL_R32F also work? Also tex32f should be void* in glTexImage2D(), didn&#39;t you mean 0?"}, {"owner": {"reputation": 5451, "user_id": 414063, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5b1e3128b33fa994d6c6640fb49898da?s=128&d=identicon&r=PG", "display_name": "jokoon", "link": "https://stackoverflow.com/users/414063/jokoon"}, "edited": false, "score": 0, "creation_date": 1569159938, "post_id": 58041244, "comment_id": 102497970, "body": "I want to extract the noise data as float, so it&#39;s only 1 channel."}, {"owner": {"reputation": 5451, "user_id": 414063, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5b1e3128b33fa994d6c6640fb49898da?s=128&d=identicon&r=PG", "display_name": "jokoon", "link": "https://stackoverflow.com/users/414063/jokoon"}, "edited": false, "score": 0, "creation_date": 1569160511, "post_id": 58041244, "comment_id": 102498083, "body": "Tou declared tex32f as GLuint. I would have thought the last argument of glTexImage2D should be 0, since the texture is generated by the shader."}, {"owner": {"reputation": 5451, "user_id": 414063, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5b1e3128b33fa994d6c6640fb49898da?s=128&d=identicon&r=PG", "display_name": "jokoon", "link": "https://stackoverflow.com/users/414063/jokoon"}, "edited": false, "score": 0, "creation_date": 1569169570, "post_id": 58041244, "comment_id": 102500379, "body": "I have to admit I&#39;m a rookie so I don&#39;t really know what kind of code I need to add to yours, I know getTexImage2D is called somewhere..."}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "reply_to_user": {"reputation": 5451, "user_id": 414063, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5b1e3128b33fa994d6c6640fb49898da?s=128&d=identicon&r=PG", "display_name": "jokoon", "link": "https://stackoverflow.com/users/414063/jokoon"}, "edited": false, "score": 0, "creation_date": 1569172009, "post_id": 58041244, "comment_id": 102501069, "body": "@jokoon Render the image after <code>glBindFramebuffer(GL_FRAMEBUFFER, fbo)</code>. After the rendering by the shader the image is stored in the texture object, because the texture is attached to the color plane of <code>fbo</code>. So at this point the texture can be read by <code>glGetTexImage</code>. What you&#39;ve to to is similar the first pass of the tutorial <a href=\"https://learnopengl.com/Advanced-OpenGL/Framebuffers\" rel=\"nofollow noreferrer\">LearnOpenGL - Framebuffers</a>. Instead of the second pass you have to read the texture by <code>glGetTexImage</code>."}, {"owner": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "edited": false, "score": 0, "creation_date": 1569270760, "post_id": 58041244, "comment_id": 102535325, "body": "@Rabbid76, I think you should update your answer with code based on that last comment. The question is <i>&quot;How can I pull back float data to the CPU?&quot;</i> But your answer only explains how to do the first part, capturing shader output in a texture. It does not explain how to pull that texture back to CPU memory ;)"}, {"owner": {"reputation": 5451, "user_id": 414063, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5b1e3128b33fa994d6c6640fb49898da?s=128&d=identicon&r=PG", "display_name": "jokoon", "link": "https://stackoverflow.com/users/414063/jokoon"}, "edited": false, "score": 0, "creation_date": 1569358572, "post_id": 58041244, "comment_id": 102569474, "body": "@Rabbid76 <a href=\"https://bpaste.net/show/Dh16\" rel=\"nofollow noreferrer\">bpaste.net/show/Dh16</a> do you see anything in that code that feels wrong ? shaders are here <a href=\"https://bpaste.net/show/Xh3Z\" rel=\"nofollow noreferrer\">bpaste.net/show/Xh3Z</a>"}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "reply_to_user": {"reputation": 5451, "user_id": 414063, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5b1e3128b33fa994d6c6640fb49898da?s=128&d=identicon&r=PG", "display_name": "jokoon", "link": "https://stackoverflow.com/users/414063/jokoon"}, "edited": false, "score": 0, "creation_date": 1569364282, "post_id": 58041244, "comment_id": 102571073, "body": "@jokoon <code>glGetTexImage(GL_TEXTURE_2D, 0, GL_RED, GL_FLOAT, values);</code> rather than <code>glGetTexImage(tex32F, 0, GL_RED, GL_FLOAT, values);</code>"}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "reply_to_user": {"reputation": 5451, "user_id": 414063, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5b1e3128b33fa994d6c6640fb49898da?s=128&d=identicon&r=PG", "display_name": "jokoon", "link": "https://stackoverflow.com/users/414063/jokoon"}, "edited": false, "score": 0, "creation_date": 1569364747, "post_id": 58041244, "comment_id": 102571176, "body": "@jokoon You&#39;ve to switch the viewport. <code>glViewport(0, 0, width, height)</code> when you render to the window, but <code>glViewport(0, 0, 300, 300);</code> when you render to texture (framebuffer)."}], "tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 1, "last_activity_date": 1569271275, "last_edit_date": 1569271275, "creation_date": 1569076256, "answer_id": 58041244, "question_id": 57991822, "link": "https://stackoverflow.com/questions/57991822/how-can-i-pull-back-float-data-not-color-generated-in-a-shader-to-the-cpu/58041244#58041244", "title": "How can I pull back float data, not color, generated in a shader to the CPU?", "body": "<blockquote>\n  <p>How can I pull back float data, [...]</p>\n</blockquote>\n\n<p>The output of the fragment shader is written to the framebuffer. The precision depends on the format of the framebuffer. The format of the <a href=\"https://www.khronos.org/opengl/wiki/Default_Framebuffer\" rel=\"nofollow noreferrer\">Default Framebuffer</a> is (probably) 1 byte for each color channel. So it doesn't matter which type you use when you read the color from the buffer. The precision is lost when the color is written into the buffer.  </p>\n\n<p>If you want to store the colors with a higher precision, then you've to render to a <a href=\"https://www.khronos.org/opengl/wiki/Framebuffer_Object\" rel=\"nofollow noreferrer\">Framebuffer</a>, that uses a <a href=\"https://www.khronos.org/opengl/wiki/Renderbuffer_Object\" rel=\"nofollow noreferrer\">Renderbuffer</a> or <a href=\"https://www.khronos.org/opengl/wiki/Texture\" rel=\"nofollow noreferrer\">Texture</a> with a format that can store the values with an higher precision.<br>\nSee <a href=\"https://www.khronos.org/opengl/wiki/Image_Format\" rel=\"nofollow noreferrer\">Image Format</a>.</p>\n\n<p>If you want to render to a framebuffer, then I recommend to read a tutorial like <a href=\"https://learnopengl.com/Advanced-OpenGL/Framebuffers\" rel=\"nofollow noreferrer\">Framebuffers</a> or <a href=\"http://www.opengl-tutorial.org/intermediate-tutorials/tutorial-14-render-to-texture/\" rel=\"nofollow noreferrer\">Render To Texture</a> respectively <a href=\"https://www.khronos.org/opengl/wiki/Framebuffer_Object_Extension_Examples#Quick_example.2C_render_to_buffer_.28p-buffer_replacement.29\" rel=\"nofollow noreferrer\">Khronos wiki - Framebuffer Object Extension Examples</a>.</p>\n\n<p>Anyway, I'll provide an example. You've to setup a framebuffer with provides the internal format <code>GL_R32F</code> (or <code>GL_RGBA32F</code> for 4 color channels).</p>\n\n<p>Either setup a render buffer with the internal format <code>GL_R32F</code> and attach it to the framebuffer:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// render buffer with internal format `GL_RGBA32F`\nGLuint rbo32F = 0;\nglGenRenderbuffers(1, &amp;rbo32F);\nglBindRenderbuffer(GL_RENDERBUFFER, rbo32F);\nglRenderbufferStorage(GL_RENDERBUFFER, GL_R32F, size.x, size.y);\n\n// framebuffer with attached render buffer\nGLuint fbo = 0;\nglGenFramebuffers(1, &amp;fbo);\nglBindFramebuffer(GL_FRAMEBUFFER, fbo);\nglFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_RENDERBUFFER, rbo32F);\nglBindFramebuffer(GL_FRAMEBUFFER, 0);\n</code></pre>\n\n<p>Or setup a texture with the format <code>GL_R32F</code> and attach it to the framebuffer. If you just to want to create a texture, which is used for further rendering, then is is the approach for you used to be. There is no need to upload the image to the CPU, because the image is already rendered to a texture, which can be used further.   </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// texture with internal format `GL_R32F`\nGLuint tex32F = 0;\nglGenTextures(1, &amp;tex32F);\nglBindTexture(GL_TEXTURE_2D, tex32F);\nglTexImage2D(GL_TEXTURE_2D, 0, GL_R32F, size.x, size.y, 0, GL_RED, GL_FLOAT, nullptr);\nglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);\nglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\n\n// framebuffer with attached texture\nGLuint fbo = 0;\nglGenFramebuffers(1, &amp;fbo);\nglBindFramebuffer(GL_FRAMEBUFFER, fbo);\nglFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, tex32F, 0);\nglBindFramebuffer(GL_FRAMEBUFFER, 0);\n</code></pre>\n\n<p>In both cases you should validate the completeness of the frambuffer <code>glCheckFramebufferStatus</code>:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>glBindFramebuffer(GL_FRAMEBUFFER, fbo);\nint status = glCheckFramebufferStatus(GL_FRAMEBUFFER);\nif (status != GL_FRAMEBUFFER_COMPLETE) {\n    // error handling\n    // [...]\n}\nglBindFramebuffer(GL_FRAMEBUFFER, 0);\n</code></pre>\n\n<p>Bind the framebuffer before rendering:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>glBindFramebuffer(GL_FRAMEBUFFER, fbo);\n</code></pre>\n\n<p>After you've draw the geometry, the texture can be read by <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glGetTexImage.xhtml\" rel=\"nofollow noreferrer\"><code>glGetTexImage</code></a>. e.g.: </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>std::vector&lt;GLfloat&gt; buffer(size.x * size.y * 1); // widht * height * 1 color channel\nglBindTexture(GL_TEXTURE_2D, tex32F);\nglGetTexImage(GL_TEXTURE_2D, 0, GL_RED, GL_FLOAT, buffer.data());\n</code></pre>\n"}], "owner": {"reputation": 5451, "user_id": 414063, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5b1e3128b33fa994d6c6640fb49898da?s=128&d=identicon&r=PG", "display_name": "jokoon", "link": "https://stackoverflow.com/users/414063/jokoon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 232, "favorite_count": 0, "accepted_answer_id": 58041244, "answer_count": 1, "score": 1, "last_activity_date": 1569530103, "creation_date": 1568806457, "last_edit_date": 1569530103, "question_id": 57991822, "link": "https://stackoverflow.com/questions/57991822/how-can-i-pull-back-float-data-not-color-generated-in-a-shader-to-the-cpu", "title": "How can I pull back float data, not color, generated in a shader to the CPU?", "body": "<p>I wrote a shader that generates noise, it uses gl_TexCoord[0].xy (a thing generated by SFML) as input and outputs a float for every pixel.</p>\n\n<p>I want the data on the CPU, as an array of 32bits float.</p>\n\n<p>Here is what I'm doing:</p>\n\n<pre><code>//using opengl 3.0 (I also tried 3.2)\nContextSettings settings(0, 0, 0, 3, 0);\nsf::RenderWindow window(sf::VideoMode(windowsize.x, windowsize.y),\n    \"yada\", 7, settings\n);\n</code></pre>\n\n<p>Here I overwrite the texture after the texture is created. I'm using windows which only has opengl1.1 headers, so I have to manually set GL_R32F (found in glad done by dav1d):</p>\n\n<pre><code>#ifndef GL_R32F \n#define GL_R32F 0x822E // found this in glad.h for opengl 3.0, easy guess is that this value doesn't change across opengl versions\n#endif\nauto handle = sprite_perlin.getTexture()-&gt;getNativeHandle(); \nglBindTexture(GL_TEXTURE_2D, handle);\nauto size = sprite_perlin.getTexture()-&gt;getSize();\nglTexImage2D(GL_TEXTURE_2D, 0, GL_R32F, size.x, size.y, 0, GL_RED, GL_FLOAT, NULL);\n        }\n</code></pre>\n\n<p>Here I read the texture data into values:</p>\n\n<pre><code>float values[4096];\n// whole_size is the size of the texture, here it is 60\nif(whole_size*whole_size &lt; 4096)\n    glGetTexImage(GL_TEXTURE_2D, 0, GL_RED, GL_FLOAT, values);\n\nImage brought_back;\nbrought_back.create(whole_size, whole_size, Color::Red);\n\nfloat mi = 1e20, ma = -1e20;\n\nfor (int i = 0; i &lt; whole_size; ++i) {\n    for (int j = 0; j &lt; whole_size; ++j) {\n        brought_back.setPixel(i, j, { 0,Uint8(255.f*values[whole_size*i + j]),0 });\n        ma = max(values[whole_size*i + j], ma);\n        mi = min(values[whole_size*i + j], mi);\n    }\n}\n</code></pre>\n\n<p>mi and ma are both to 0.0f;</p>\n\n<p>Here is the noise generated when showed on a sprite with the shader (with some color function that takes a float) The shader works as intended, I would just like to retrieve the data as float on the CPU.</p>\n\n<p><a href=\"https://i.stack.imgur.com/jhnZ3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jhnZ3.png\" alt=\"noise example\"></a></p>\n\n<p>Here is a simplified version of the shader:</p>\n\n<pre><code>uniform int texture_size;\n\nfloat get_value_at(ivec2 pixel_coord) {\n    //dummy value\n    return 0.34f;\n}\n\nvoid main(){\n    ivec2 pix_pos = ivec2(gl_TexCoord[0].xy*texture_size);\n\n    float val = get_value_at(pix_pos);\n\n    gl_FragColor = vec4(val,0,0,1);\n}\n</code></pre>\n"}, {"tags": ["c++", "opengl", "game-engine", "glm-math"], "comments": [{"owner": {"reputation": 13335, "user_id": 8204776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6qyq.jpg?s=128&g=1", "display_name": "meowgoesthedog", "link": "https://stackoverflow.com/users/8204776/meowgoesthedog"}, "edited": false, "score": 3, "creation_date": 1568810239, "post_id": 57991636, "comment_id": 102392728, "body": "<a href=\"https://glm.g-truc.net/0.9.3/api/a00164.html\" rel=\"nofollow noreferrer\"><code>GLM_GTX_euler_angles</code></a>"}], "answers": [{"tags": [], "owner": {"reputation": 238, "user_id": 1848571, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d3e160ae71c584485acc7e05afe530ac?s=128&d=identicon&r=PG", "display_name": "NullOverFlow", "link": "https://stackoverflow.com/users/1848571/nulloverflow"}, "is_accepted": false, "score": 2, "last_activity_date": 1568814409, "creation_date": 1568814409, "answer_id": 57994269, "question_id": 57991636, "link": "https://stackoverflow.com/questions/57991636/efficient-3d-rotation-using-vector-of-angles/57994269#57994269", "title": "Efficient 3D rotation using vector of angles", "body": "<p>Thanks to @meowgoesthedog\nthis can be achieved as follows.</p>\n\n<pre><code>ModelMatrix = ModelMatrix * glm::eulerAngleXYZ(glm::radians(rotation.x), glm::radians(rotationVec.y), glm::radians(rotationVec.z));\n</code></pre>\n"}], "owner": {"reputation": 238, "user_id": 1848571, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d3e160ae71c584485acc7e05afe530ac?s=128&d=identicon&r=PG", "display_name": "NullOverFlow", "link": "https://stackoverflow.com/users/1848571/nulloverflow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1568815873, "creation_date": 1568805794, "last_edit_date": 1568815873, "question_id": 57991636, "link": "https://stackoverflow.com/questions/57991636/efficient-3d-rotation-using-vector-of-angles", "title": "Efficient 3D rotation using vector of angles", "body": "<p>I was wondering if there is a better way to achieve the following:</p>\n\n<pre><code>ModelMatrix = glm::rotate(ModelMatrix, glm::radians(rotationVec.x), glm::vec3(1.0f, 0.0f, 0.0f));\nModelMatrix = glm::rotate(ModelMatrix, glm::radians(rotationVec.y), glm::vec3(0.0f, 1.0f, 0.0f));\nModelMatrix = glm::rotate(ModelMatrix, glm::radians(rotationVec.z), glm::vec3(0.0f, 0.0f, 1.0f));\n</code></pre>\n\n<p>Is there a more efficient way of achieving the same calculation, possibly with a single function call?\nThe <code>rotationVec</code> is a vector of angles, similarly how the Unity engine does the gameobject rotations.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 2, "creation_date": 1568805900, "post_id": 57991563, "comment_id": 102390314, "body": "Open the <code>.vcxproj</code> file in a text editor and search for that string. There are too many places where that setting can hide and only you have the file."}, {"owner": {"reputation": 145, "user_id": 9088108, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/540ece36b5c9fd67855b0b530d095ed8?s=128&d=identicon&r=PG&f=1", "display_name": "samini", "link": "https://stackoverflow.com/users/9088108/samini"}, "edited": false, "score": 0, "creation_date": 1568805965, "post_id": 57991563, "comment_id": 102390356, "body": "look at this <a href=\"https://stackoverflow.com/questions/6451324/visual-studio-link-fatal-error-lnk1181-cannot-open-input-file\" title=\"visual studio link fatal error lnk1181 cannot open input file\">stackoverflow.com/questions/6451324/&hellip;</a>"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1568806535, "post_id": 57991563, "comment_id": 102390689, "body": "There is more than one way to specify a link dependency, it can also be done in code with #pragma comment(lib, &quot;yadayada&quot;).  But certainly best to talk to this &quot;someone&quot; so we don&#39;t have to guess."}], "owner": {"reputation": 17, "user_id": 11801256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0d5dd4370f24a5b009b10ae413a184e?s=128&d=identicon&r=PG&f=1", "display_name": "Sonya  gold", "link": "https://stackoverflow.com/users/11801256/sonya-gold"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568805909, "creation_date": 1568805571, "last_edit_date": 1568805909, "question_id": 57991563, "link": "https://stackoverflow.com/questions/57991563/lnk1181-error-c-got-a-sample-project-but-facing-lnk1181-and-theres-nothing-i", "title": "LNK1181 Error, C++: Got a sample project but facing LNK1181 and theres nothing in the input", "body": "<p>I got a sample project from someone. I tried to compile it and got LINK1181 </p>\n\n<pre><code>Error   LNK1181 cannot open input file 'C:\\Users\\USER_NAME\\Documents\\Visual Studio 2015\\Projects\\PROJECT_NAME\\x64\\Debug\\PROJECT_NAME_LIB_FILE.lib'  TryingStuff_UnitTestsProject\n</code></pre>\n\n<p>Where PROJECT_NAME is the name of the pc of the user that provided that sample project to me.\nNow, I looked  everywhere, I couldn't find leftovers whatsoever for that particular user name. Nor in the input of 'Linker' under Properties.<br>\nAny idea where might this be coming from?</p>\n\n<p>Many thanks</p>\n"}, {"tags": ["c++", "visual-studio", "sfml"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 6, "creation_date": 1568805857, "post_id": 57991556, "comment_id": 102390284, "body": "You cannot examine <code>event.key</code> if <code>event.type</code> is not a keyboard event (e.g.  <code>sf::Event::KeyPressed</code>). <a href=\"https://www.sfml-dev.org/documentation/2.5.1/classsf_1_1Event.php#details\" rel=\"nofollow noreferrer\">See</a>."}, {"owner": {"reputation": 896, "user_id": 3285836, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f1e2758357ea983b75eb3833ade10cdd?s=128&d=identicon&r=PG&f=1", "display_name": "Einar", "link": "https://stackoverflow.com/users/3285836/einar"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1568806235, "post_id": 57991556, "comment_id": 102390504, "body": "Seems to have worked. Thank you. If you post it as an answer, I&#39;ll mark it as answered. So it&#39;s likely that it fired an event when I left/entered the window and it crashed because it couldn&#39;t read it?"}, {"owner": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 1, "creation_date": 1568806370, "post_id": 57991556, "comment_id": 102390590, "body": "@Einar <code>event</code> is a union of <a href=\"https://www.sfml-dev.org/documentation/2.5.1/Event_8hpp_source.php#l00221\" rel=\"nofollow noreferrer\">several structures</a>. That means that a lot of events is being generated and processed. To process the corrent one, you need to know the type of it, otherwise, you will get an UB"}, {"owner": {"reputation": 896, "user_id": 3285836, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f1e2758357ea983b75eb3833ade10cdd?s=128&d=identicon&r=PG&f=1", "display_name": "Einar", "link": "https://stackoverflow.com/users/3285836/einar"}, "edited": false, "score": 0, "creation_date": 1568806418, "post_id": 57991556, "comment_id": 102390622, "body": "I see. Thank you."}, {"owner": {"reputation": 896, "user_id": 3285836, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f1e2758357ea983b75eb3833ade10cdd?s=128&d=identicon&r=PG&f=1", "display_name": "Einar", "link": "https://stackoverflow.com/users/3285836/einar"}, "edited": false, "score": 0, "creation_date": 1568806456, "post_id": 57991556, "comment_id": 102390648, "body": "Adding the title of the book that gave me this code for handling events / closing a window, just in case someone google&#39;s it: &quot;C++ Game Development by Example&quot; (Kindle location/page 1748)."}], "answers": [{"tags": [], "owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "is_accepted": true, "score": 4, "last_activity_date": 1568806800, "creation_date": 1568806800, "answer_id": 57991924, "question_id": 57991556, "link": "https://stackoverflow.com/questions/57991556/sfml-window-closes-by-itself-when-mouse-goes-outside-of-window/57991924#57991924", "title": "SFML Window closes by itself when mouse goes outside of window", "body": "<p><code>sf::Event</code> is organised as a tagged union, where the <code>type</code> member is the tag, and the active member depends on the tag.</p>\n\n<p>The <code>key</code> member is only active when <code>type</code> is one of the keyboard event types (<code>sf::Event::KeyPressed</code> or <code>sf::Event::KeyReleased</code>). </p>\n\n<p>Examining an inactive union member is undefined behaviour. In practice, what's happening is probably something like the following. Some other event occurs, with a member which is numerically equal to <code>sf::Keyboard::Escape</code> and which physically shares the space with <code>key.code</code>. The program is accessing that member and erroneously interpreting it as <code>key.code</code>.</p>\n\n<hr>\n\n<p>Relevant documentation:</p>\n\n<ul>\n<li><a href=\"https://www.sfml-dev.org/documentation/2.5.1/classsf_1_1Event.php#details\" rel=\"noreferrer\">Explanation</a></li>\n<li><a href=\"https://www.sfml-dev.org/documentation/2.5.1/Event_8hpp_source.php#l00221\" rel=\"noreferrer\">Code</a></li>\n</ul>\n"}], "owner": {"reputation": 896, "user_id": 3285836, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f1e2758357ea983b75eb3833ade10cdd?s=128&d=identicon&r=PG&f=1", "display_name": "Einar", "link": "https://stackoverflow.com/users/3285836/einar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 1, "accepted_answer_id": 57991924, "answer_count": 1, "score": 1, "last_activity_date": 1568806800, "creation_date": 1568805516, "question_id": 57991556, "link": "https://stackoverflow.com/questions/57991556/sfml-window-closes-by-itself-when-mouse-goes-outside-of-window", "title": "SFML Window closes by itself when mouse goes outside of window", "body": "<p>My SFML application builds and runs as expected, but when let the mouse exit/enter the window on the left window-border, then it closes unexpectedly.</p>\n\n<p>How can I make this error stop happening? I don't want the window to close unless I call it in the code.</p>\n\n<p>Visual Studio 2019</p>\n\n<p>SFML-2.5.1\n(I think I downloaded the version: Visual C++ 15 (2017) - 32-bit)</p>\n\n<p>Here's a bare minimum example of the code I'm running, that produces said error:</p>\n\n<pre><code>#include \"SFML-2.5.1/include/SFML/Graphics.hpp\"\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n\nusing std::cout;\nusing std::endl;\nusing std::vector;\nusing std::endl;\nusing std::string;\n\nsf::Vector2f window_size(800, 600);\nsf::VideoMode video_mode(window_size.x, window_size.y);\nsf::RenderWindow window(video_mode, \"Hello\");\n\nint main() {\n    while (window.isOpen()) {\n        //Deal with input and update program\n        sf::Event event;\n\n        while (window.pollEvent(event)) {\n            if (event.type == sf::Event::Closed\n            || event.key.code == sf::Keyboard::Escape) {\n                window.close();\n            }\n        }\n\n        //Draw things on screen\n        window.clear(sf::Color::White);\n        //Draw things here, not nothing right now    \n        window.display();\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "pointers", "interface"], "comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 5, "creation_date": 1568804963, "post_id": 57991250, "comment_id": 102389747, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>: <code>T</code> is probably not what you think it is."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 3, "creation_date": 1568805021, "post_id": 57991250, "comment_id": 102389782, "body": "Unrelated, but the <code>for</code> loop looks <i>weird.</i> There&#39;s no looping at all, why are you using a loop?"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1568806010, "post_id": 57991250, "comment_id": 102390378, "body": "@molbdnilo Well, it half-makes-sense if <code>T</code> is a class derived from <code>IService</code>. Which I assume this is what is attempted here, in which case <code>dynamic_cast&lt;T*&gt;</code> should solve it."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1568806149, "post_id": 57991250, "comment_id": 102390448, "body": "<code>getService</code> also has undefined behavior if <code>serviceType</code> is not a key of <code>_services</code>, and I&#39;m quite sure the compiler really wants to warn you about that."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1568806154, "post_id": 57991250, "comment_id": 102390451, "body": "@MaxLanghof I would agree with you, so I do."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1568808159, "post_id": 57991250, "comment_id": 102391512, "body": "Since you already have one map for each <code>T</code>, you might as well put <code>T*</code> in your map instead. I suspect that this particular feature is not what you had in mind, though."}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 12084600, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAWXJXvZxpo5o6GLHEbevMYpOx93X7W7dCMF8xk=k-s128", "display_name": "Mathieu Bouchonnet", "link": "https://stackoverflow.com/users/12084600/mathieu-bouchonnet"}, "edited": false, "score": 0, "creation_date": 1568812432, "post_id": 57992367, "comment_id": 102393957, "body": "I don&#39;t get the second part of your answer with the variable for the static map. Why should I do that? What should be ServiceImpl ? Thanks for the first part, the dynamic cast solved the problem! But now I have a link error, and I think it&#39;s related to the second part of your answer"}, {"owner": {"reputation": 164, "user_id": 12080328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00842a64020529296243795f891fe6af?s=128&d=identicon&r=PG&f=1", "display_name": "mommos", "link": "https://stackoverflow.com/users/12080328/mommos"}, "reply_to_user": {"reputation": 29, "user_id": 12084600, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAWXJXvZxpo5o6GLHEbevMYpOx93X7W7dCMF8xk=k-s128", "display_name": "Mathieu Bouchonnet", "link": "https://stackoverflow.com/users/12084600/mathieu-bouchonnet"}, "edited": false, "score": 0, "creation_date": 1568954761, "post_id": 57992367, "comment_id": 102446642, "body": "You are right .. that needs a little bit more explanation. Static functions can only access static members ..  so the static member &quot;_services&quot; must be defined for each different type T somewhere in the CPP code (otherwise an &quot;unresolved external&quot; error will be reported from the linker. If you you use a <code>Locator&lt;T&gt;</code> with <code>T = ServiceImpl</code> you will need the definition of the map as given in the sample in the CPP code."}], "tags": [], "owner": {"reputation": 164, "user_id": 12080328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00842a64020529296243795f891fe6af?s=128&d=identicon&r=PG&f=1", "display_name": "mommos", "link": "https://stackoverflow.com/users/12080328/mommos"}, "is_accepted": true, "score": 0, "last_activity_date": 1568808225, "creation_date": 1568808225, "answer_id": 57992367, "question_id": 57991250, "link": "https://stackoverflow.com/questions/57991250/cannot-convert-from-ty2-to-t-error-with-map/57992367#57992367", "title": "&#39;Cannot convert from _Ty2 to T*&#39; error&#39; with map", "body": "<ol>\n<li>The for loop makes no sense -- the first match will break it and return. </li>\n<li>There is a cast missing for the return value -- the map contains IService pointers which are unrelated to the return Type T*, except T* is a base of IService (but does not look like taht is intended). A dynamic cast can solve it in case of IService is a polymorphic type and the contained map elements support the cast to T*. </li>\n</ol>\n\n<p>So try that: </p>\n\n<pre><code>template &lt;class T&gt;\nT* Locator&lt;T&gt;::getService(ServiceType serviceType)\n{\n  auto itr = _services.find(serviceType);\n  return itr != _services.end() ? dynamic_cast&lt;T*&gt;(itr-&gt;second) : nullptr;\n}\n</code></pre>\n\n<p>And don't forget to add the variable for the static map (somewhere in the cpp):</p>\n\n<pre><code>std::unordered_map&lt;ServiceType, IService*&gt; Locator&lt;ServiceImpl&gt;::_services;\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 12084600, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAWXJXvZxpo5o6GLHEbevMYpOx93X7W7dCMF8xk=k-s128", "display_name": "Mathieu Bouchonnet", "link": "https://stackoverflow.com/users/12084600/mathieu-bouchonnet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 57992367, "answer_count": 1, "score": 0, "last_activity_date": 1568808225, "creation_date": 1568804559, "last_edit_date": 1568807169, "question_id": 57991250, "link": "https://stackoverflow.com/questions/57991250/cannot-convert-from-ty2-to-t-error-with-map", "title": "&#39;Cannot convert from _Ty2 to T*&#39; error&#39; with map", "body": "<p>I want to return an element from a std::map as a pointer, but I keep getting this error and can't find a way to solve it.</p>\n\n<p>The second element of map is a pointer to a IService, and the return of getService is a pointer to T, which is an IService, so I don't get why I get this error.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// Locator.h\ntemplate &lt;class T&gt;\nclass Locator\n{\npublic:\n    static T* getService(ServiceType serviceType);\n    static void provide(ServiceType serviceType, T* service);\n\nprivate:\n    static std::unordered_map&lt;ServiceType, IService*&gt; _services;\n};\n</code></pre>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// Locator.cpp\ntemplate &lt;class T&gt;\nT* Locator&lt;T&gt;::getService(ServiceType serviceType)\n{\n    for (auto itr = _services.find(serviceType); itr != _services.end(); itr++)\n    {\n        return itr-&gt;second;\n    }\n}\n</code></pre>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>//IService.h\nclass IService\n{\npublic:\n    virtual void start() = 0;\n    virtual void stop() = 0;\n    virtual void update() = 0;\n};\n</code></pre>\n"}, {"tags": ["c++", "c++17", "variadic-templates", "stdtuple"], "answers": [{"comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1568805564, "post_id": 57991380, "comment_id": 102390102, "body": "In my eyes this is also better than the original idea of the OP as it lets and <b>makes</b> the user explicitly specify the default values to use. (I mean, at least from what I can tell - of course I don&#39;t know OP&#39;s use case better than them)"}, {"owner": {"reputation": 71, "user_id": 7804830, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Ytqj.jpg?s=128&g=1", "display_name": "Greadimar", "link": "https://stackoverflow.com/users/7804830/greadimar"}, "edited": false, "score": 0, "creation_date": 1568805768, "post_id": 57991380, "comment_id": 102390231, "body": "Unfortunately I can\u2019t use default values of arguments in lambda. The way I use it would make it too syntax heavy. It will take a lot of arguments and also will be constructed inside a function on a fly. Also I will keep cmd in shared pointers and need the wrapper anyway for other reasons. ( it will be polymorphic approach to keep it on vector)"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 71, "user_id": 7804830, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Ytqj.jpg?s=128&g=1", "display_name": "Greadimar", "link": "https://stackoverflow.com/users/7804830/greadimar"}, "edited": false, "score": 0, "creation_date": 1568806516, "post_id": 57991380, "comment_id": 102390679, "body": "@MrBaPHuk: <code>CmdFu</code>&#39;s part added too for completeness."}, {"owner": {"reputation": 71, "user_id": 7804830, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Ytqj.jpg?s=128&g=1", "display_name": "Greadimar", "link": "https://stackoverflow.com/users/7804830/greadimar"}, "edited": false, "score": 0, "creation_date": 1568806805, "post_id": 57991380, "comment_id": 102390813, "body": "Offset :0 didn\u2019t know it\u2019s legal and so easy. Thank you! About sfinae I tried to make it through decltype but messed with syntax a bit. It failed on runtime because the whole code is bit more complex. Provided tuple actually made with std::any and virtual non templated class. I\u2019ll try it as soon as I can and commit it as an answer"}, {"owner": {"reputation": 71, "user_id": 7804830, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Ytqj.jpg?s=128&g=1", "display_name": "Greadimar", "link": "https://stackoverflow.com/users/7804830/greadimar"}, "edited": false, "score": 0, "creation_date": 1568811973, "post_id": 57991380, "comment_id": 102393700, "body": "everything works fine, though for decltype the m_function should be declared before the template. And special regards for perfect forwarding."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 2, "last_activity_date": 1568806379, "last_edit_date": 1568806379, "creation_date": 1568804966, "answer_id": 57991380, "question_id": 57991245, "link": "https://stackoverflow.com/questions/57991245/running-any-functor-with-half-of-arguments/57991380#57991380", "title": "Running any functor with half of arguments", "body": "<p>If you don't wrap in <code>std::function</code>, but keep the functor, you might already do</p>\n\n<pre><code>auto lambda = [](bool isSucceed, int v = 0, std::vector&lt;uint&gt; vec = {}){\n    //doing smth\n    qDebug() &lt;&lt; \"insideLamda\" &lt;&lt; isSucceed &lt;&lt; v &lt;&lt; vec;\n};\nRequest req(lambda);\nreq.onSuccess(4, std::vector&lt;uint&gt;{1,2});\nreq.onFail();\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/db9578c69931e2f7\" rel=\"nofollow noreferrer\">Demo</a></p>\n\n<p>For <code>CmdFu</code> implementation, you might do:</p>\n\n<pre><code>template &lt;typename ...Args&gt; class CmdFu\n{\npublic:\n    explicit CmdFu(std::function&lt;void(Args...)&gt; f): m_function(f){}\n\n    template &lt;typename ...Ts&gt;\n    void call(Ts&amp;&amp;... args){\n        m_function(std::forward&lt;Ts&gt;(args)...);\n    }\n\n    template &lt;typename ...Ts&gt;\n    void callWithDefault(Ts&amp;&amp;...args)\n    {\n        callDefaultImpl&lt;sizeof...(Ts)&gt;(std::make_index_sequence&lt;sizeof...(Args)\n                                                                - sizeof...(Ts)&gt;{},\n                                       std::forward&lt;Ts&gt;(args)...);\n    }\nprivate:\n\n    template &lt;std::size_t Offset, size_t...Is, typename ...Ts&gt;\n    void callDefaultImpl(std::index_sequence&lt;Is...&gt;, Ts&amp;&amp;...args){\n        m_function(std::forward&lt;Ts&gt;(args)...,\n                   std::tuple_element_t&lt;Offset + Is, std::tuple&lt;Args...&gt;&gt;{}...);\n    }\n    std::function&lt;void(Args...)&gt; m_function;\n};\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/4efd2b4d902eb034\" rel=\"nofollow noreferrer\">Demo</a></p>\n\n<blockquote>\n  <p>1) How to set my own arguments to default tuple?</p>\n</blockquote>\n\n<p>Creating default missing argument is done with:</p>\n\n<pre><code>std::tuple_element_t&lt;Offset + Is, std::tuple&lt;Args...&gt;&gt;{}...\n</code></pre>\n\n<blockquote>\n  <p>2) How to create index_sequence with starting sizeOfRemainingIndecies ?</p>\n</blockquote>\n\n<p>You might create regular index sequence and an offset:</p>\n\n<pre><code>template &lt;std::size_t Offset, std::size_t... Is&gt;\nconstexpr std::index_sequence&lt;(Offset + Is)...&gt;\nindex_sequence_with_offset(std::index_sequence&lt;Is...&gt;)\n{ return {}; }\n</code></pre>\n\n<blockquote>\n  <p>3) Is it possible to check the calling signature to avoid runtime crashes inside call()?</p>\n</blockquote>\n\n<p>If signature mismatches, it won't compile, you might use SFINAE to discard the invalid overloads if wanted. There are several syntax possible, for example:</p>\n\n<pre><code>template &lt;typename ...Ts&gt;\nauto call(Ts&amp;&amp;... args)\n-&gt; decltype(m_function(std::forward&lt;Ts&gt;(args)...), void())\n{\n    m_function(std::forward&lt;Ts&gt;(args)...);\n}\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 7804830, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Ytqj.jpg?s=128&g=1", "display_name": "Greadimar", "link": "https://stackoverflow.com/users/7804830/greadimar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 57991380, "answer_count": 1, "score": 1, "last_activity_date": 1568806379, "creation_date": 1568804538, "question_id": 57991245, "link": "https://stackoverflow.com/questions/57991245/running-any-functor-with-half-of-arguments", "title": "Running any functor with half of arguments", "body": "<p>What am I trying to achieve:\nI have the following class Request which has it's own templated function. I'd like to call it with two states:<br>\n1) with provided arguments;<br>\n2) only with one argument, others should be created as default   </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt;typename TCmd&gt; class Request{\n    public:\n    Request(TCmd applyingCommand): cmd(applyingCommand){}\n    template&lt;typename ...TReplyData&gt; void onSuccess(TReplyData... args){\n        //  cmd(true, args...);\n    }\n    void onFail(){\n         // cmd(false) //here I want to create a wrapper, who calls the cmd with false + empty arguments\n                       //which should be created by their constructor.\n    }\n    TCmd cmd;\n};\n</code></pre>\n\n<p>Here how I want to use it:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>auto lambda = [](bool isSucceed, int v, std::vector&lt;uint&gt; vec){\n        //doing smth\n        qDebug() &lt;&lt; \"insideLamda\" &lt;&lt; isSucceed &lt;&lt; v &lt;&lt; vec;\n    };\n    std::function&lt;void(bool, int, std::vector&lt;uint&gt;)&gt; fu = lambda;\n    Request req(fu);\n    req.onSuccess(4, std::vector&lt;uint&gt;{1,2});\n    req.onFail();\n</code></pre>\n\n<p>So here is my idea how to implement it, but I stuck on tuples and variadic templates\nThe point is in creating a following wrapper of function</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt;typename ...Args&gt; class CmdFu\n{\npublic:\n    explicit CmdFu(std::function&lt;void(Args...)&gt; f): m_function(f){\n    }\n    template &lt;typename ...ProvidedArgs&gt;void call(ProvidedArgs... args){\n        m_function(args...);\n    }\n    template &lt;typename ...ProvidedArgs&gt;void callWithDefault(ProvidedArgs...args){ //here\n        auto neededIndecies = std::make_index_sequence&lt;sizeof... (Args)&gt;{};\n        size_t sizeOfRemainingIndecies = sizeof... (Args) - sizeof... (args);\n        callDefault(neededIndecies, args...);\n    }\nprivate:\n    template&lt;class T&gt; T create(){\n        T t; return t;\n    }\n     template &lt;typename ...ProvidedArgs, size_t...indecies&gt; void callDefault( std::index_sequence&lt;indecies...&gt;, ProvidedArgs...args){\n        auto providedTuple = std::make_tuple(args...);\n        auto providedIndecies = std::index_sequence_for&lt;ProvidedArgs...&gt;();\n        //Approach #1: I create whole default tuple and somehow applying my provided Tuple to it\n        // NeededTuple t;\n        // ResultTuple r??\n        // std::apply(m_function, r);\n\n        //Aprroach #2: I make std::index_sequence with remaining indexes, like 2,3,4,5 and create remaining tuple\n        //then make the resulting tuple with std::tuple_cat\n        // also std::apply\n    }\n    size_t sizeOfNeededIndecies;\n    std::function&lt;void(Args...)&gt; m_function;\n    using NeededTuple = std::tuple&lt;Args...&gt;;\n};\n\n</code></pre>\n\n<p>Here are my main problems:<br>\n1) How to set my own arguments to default tuple ?<br>\n2) How to create index_sequence with starting sizeOfRemainingIndecies ?<br>\n3) Is it possible to check the calling signature to avoid runtime crashes inside call()?</p>\n"}, {"tags": ["c++", "serialization", "boost", "boost-serialization"], "answers": [{"comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 1, "creation_date": 1568841058, "post_id": 57991469, "comment_id": 102407311, "body": "The flush and close are redundant now"}], "tags": [], "owner": {"reputation": 347, "user_id": 978019, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/aa37e58ecc5ac8a0a72e1d2b146f3cbb?s=128&d=identicon&r=PG", "display_name": "Arne B&#246;ckmann", "link": "https://stackoverflow.com/users/978019/arne-b%c3%b6ckmann"}, "is_accepted": false, "score": 1, "last_activity_date": 1568888795, "last_edit_date": 1568888795, "creation_date": 1568805261, "answer_id": 57991469, "question_id": 57991230, "link": "https://stackoverflow.com/questions/57991230/boost-1-65-1-serialization-to-vector-fails-with-assertion-initialized-failed/57991469#57991469", "title": "Boost 1.65.1 serialization to vector fails with &#39;Assertion initialized_ failed&#39;", "body": "<p>Ok I figured it out. The <code>binary_oarchive</code> does something inside its destructor that requires that the stream is still open. \nThe following works:</p>\n\n<pre><code>BOOST_AUTO_TEST_CASE(serialize_base_test)\n{\n    int t = 42;\n    std::vector&lt;char&gt; buffer;\n\n    iostreams::back_insert_device&lt;std::vector&lt;char&gt;&gt; sink{buffer};\n    iostreams::stream&lt;iostreams::back_insert_device&lt;std::vector&lt;char&gt;&gt;&gt; os;\n    os.open(sink);\n    {\n        archive::binary_oarchive oa(os);\n        oa &lt;&lt; t; \n    }\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "is_accepted": true, "score": 2, "last_activity_date": 1568805979, "creation_date": 1568805979, "answer_id": 57991689, "question_id": 57991230, "link": "https://stackoverflow.com/questions/57991230/boost-1-65-1-serialization-to-vector-fails-with-assertion-initialized-failed/57991689#57991689", "title": "Boost 1.65.1 serialization to vector fails with &#39;Assertion initialized_ failed&#39;", "body": "<p>Destructor for an archive should be called before the stream is closed because it restores any altered stream facets to their state before the archive was opened.</p>\n"}], "owner": {"reputation": 347, "user_id": 978019, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/aa37e58ecc5ac8a0a72e1d2b146f3cbb?s=128&d=identicon&r=PG", "display_name": "Arne B&#246;ckmann", "link": "https://stackoverflow.com/users/978019/arne-b%c3%b6ckmann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 57991689, "answer_count": 2, "score": 0, "last_activity_date": 1568888795, "creation_date": 1568804499, "last_edit_date": 1568804897, "question_id": 57991230, "link": "https://stackoverflow.com/questions/57991230/boost-1-65-1-serialization-to-vector-fails-with-assertion-initialized-failed", "title": "Boost 1.65.1 serialization to vector fails with &#39;Assertion initialized_ failed&#39;", "body": "<p>I have the following test case that serializes  an int into <code>std:vector</code>.</p>\n\n<p>It crashes with the following assertion:</p>\n\n<pre><code>serialization_test: /usr/include/boost/iostreams/detail/optional.hpp:55: T&amp; boost::iostreams::detail::optional&lt;T&gt;::operator*() [with T = boost::iostreams::detail::concept_adapter&lt;boost::iostreams::back_insert_device&lt;std::vector&lt;char&gt; &gt; &gt;]: Assertion `initialized_' failed.\n</code></pre>\n\n<p>Any ideas? I think this should work...</p>\n\n<pre><code>BOOST_AUTO_TEST_CASE(serialize_base_test)\n{\n    int t = 42;\n    std::vector&lt;char&gt; buffer;\n\n    iostreams::back_insert_device&lt;std::vector&lt;char&gt;&gt; sink{buffer};\n    iostreams::stream&lt;iostreams::back_insert_device&lt;std::vector&lt;char&gt;&gt;&gt; os;\n    os.open(sink);\n    archive::binary_oarchive oa(os);\n\n    oa &lt;&lt; t;\n    os.flush();\n    os.close();\n\n}\n</code></pre>\n\n<p><strong>edit:</strong> I simplified the test case.</p>\n"}, {"tags": ["c++", "qt", "qt-signals"], "comments": [{"owner": {"reputation": 1894, "user_id": 8473031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4878bfc9d6a80397a8446111fffa4dd?s=128&d=identicon&r=PG&f=1", "display_name": "RoQuOTriX", "link": "https://stackoverflow.com/users/8473031/roquotrix"}, "edited": false, "score": 1, "creation_date": 1568804317, "post_id": 57991137, "comment_id": 102389401, "body": "Are the signals always coming in this order or is the order irrelevant?"}, {"owner": {"reputation": 5298, "user_id": 3405291, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f6499e84a22df10a3f4fec15a8bd0d06?s=128&d=identicon&r=PG&f=1", "display_name": "user3405291", "link": "https://stackoverflow.com/users/3405291/user3405291"}, "reply_to_user": {"reputation": 1894, "user_id": 8473031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4878bfc9d6a80397a8446111fffa4dd?s=128&d=identicon&r=PG&f=1", "display_name": "RoQuOTriX", "link": "https://stackoverflow.com/users/8473031/roquotrix"}, "edited": false, "score": 0, "creation_date": 1568804456, "post_id": 57991137, "comment_id": 102389482, "body": "@RoQuOTriX Signals might be received in any order."}], "answers": [{"comments": [{"owner": {"reputation": 5298, "user_id": 3405291, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f6499e84a22df10a3f4fec15a8bd0d06?s=128&d=identicon&r=PG&f=1", "display_name": "user3405291", "link": "https://stackoverflow.com/users/3405291/user3405291"}, "edited": false, "score": 0, "creation_date": 1568804840, "post_id": 57991262, "comment_id": 102389685, "body": "Thanks =) let me try to implement this approach :)"}], "tags": [], "owner": {"reputation": 1894, "user_id": 8473031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4878bfc9d6a80397a8446111fffa4dd?s=128&d=identicon&r=PG&f=1", "display_name": "RoQuOTriX", "link": "https://stackoverflow.com/users/8473031/roquotrix"}, "is_accepted": true, "score": 2, "last_activity_date": 1568804860, "last_edit_date": 1568804860, "creation_date": 1568804601, "answer_id": 57991262, "question_id": 57991137, "link": "https://stackoverflow.com/questions/57991137/running-a-function-depending-upon-multiple-signals/57991262#57991262", "title": "Running a function depending upon multiple signals", "body": "<p>Write a method in MyClass which checks if both conditions are true and call this methiod in both slots. Make the conditions member of myClass</p>\n\n<pre><code>bool MyClass::areBothConditionsTrue() {\n    if(m_conditionA &amp;&amp; m_conditionB)\n        return true:\n    return false;\n}\n\nvoid MyClass::handleReady()\n{\n    qDebug() &lt;&lt; \"Ready to do next step\";\n    m_conditionA = true;\n    bool b = areBothConditionsTrue();\n}\n\nvoid MyClass::handleEnabledChange(const bool enabled)\n{\n    qDebug() &lt;&lt; \"Is member enabled?\" &lt;&lt; enabled;\n    m_conditionB = enabled;\n    bool b = areBothConditionsTrue();\n}\n</code></pre>\n\n<p>The further code does depend on what you want to do with this information</p>\n"}, {"comments": [{"owner": {"reputation": 5298, "user_id": 3405291, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f6499e84a22df10a3f4fec15a8bd0d06?s=128&d=identicon&r=PG&f=1", "display_name": "user3405291", "link": "https://stackoverflow.com/users/3405291/user3405291"}, "edited": false, "score": 0, "creation_date": 1568809503, "post_id": 57992632, "comment_id": 102392297, "body": "Actually my handlers count is increased to 3 now! Thanks =)"}], "tags": [], "owner": {"reputation": 23, "user_id": 5880425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da1c1465de38f8bbf5de8ac1f1b00a7f?s=128&d=identicon&r=PG&f=1", "display_name": "ilev4ik", "link": "https://stackoverflow.com/users/5880425/ilev4ik"}, "is_accepted": false, "score": 2, "last_activity_date": 1568809076, "creation_date": 1568809076, "answer_id": 57992632, "question_id": 57991137, "link": "https://stackoverflow.com/questions/57991137/running-a-function-depending-upon-multiple-signals/57992632#57992632", "title": "Running a function depending upon multiple signals", "body": "<p>I do not have reputation enough to comment <a href=\"https://stackoverflow.com/a/57991262/5880425\">RoQuOTriX answer</a> so made a separate one.</p>\n\n<p>In case your handlers count will increase, you can create the state object in <code>MyClass</code> which stores all conditions by adding extra level of abstraction:</p>\n\n<pre><code>void MyClass::handleReady(State&amp; state)\n{\n    qDebug() &lt;&lt; \"Ready to do next step\";\n    state.m_conditionA.setFlag(true);\n}\n</code></pre>\n\n<p>...but then you will need to implement the <code>State</code> class and <code>State</code>'s conditions holder class inherited from <code>QObject</code> to emit signal <code>flagChanged</code> when <code>setFlag</code> is called. Then just <code>connect(m_conditionA, &amp;Condition::flagChanged, this, &amp;State::checkAllConditions)</code> and store all conditions in some associative container.</p>\n"}], "owner": {"reputation": 5298, "user_id": 3405291, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f6499e84a22df10a3f4fec15a8bd0d06?s=128&d=identicon&r=PG&f=1", "display_name": "user3405291", "link": "https://stackoverflow.com/users/3405291/user3405291"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 57991262, "answer_count": 2, "score": 0, "last_activity_date": 1568816298, "creation_date": 1568804190, "last_edit_date": 1568816298, "question_id": 57991137, "link": "https://stackoverflow.com/questions/57991137/running-a-function-depending-upon-multiple-signals", "title": "Running a function depending upon multiple signals", "body": "<p>I have two signals which are NOT necessarily received at the same time.</p>\n\n<h3>First signal</h3>\n\n<p>First signal is emitted by <code>MyClass</code> and is handled by a slot of <code>MyClass</code>:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>QObject::connect(this, &amp;MyClass::ready, \n                 this, &amp;MyClass::handleReady);\n\nvoid MyClass::handleReady()\n{\n    qDebug() &lt;&lt; \"Ready to do next step\";\n}\n\n// ... somewhere in MyClass implementation, signal is emitted:\nemit ready();\n</code></pre>\n\n<h3>Second signal</h3>\n\n<p>Second signal is emitted by a member object and is handled by a slot of <code>MyClass</code>:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>QObject::connect(m_member, &amp;MemberClass::enabledChanged, \n                 this,     &amp;MyClass::handleEnabledChange);\n//...\nvoid MyClass::handleEnabledChange(const bool enabled)\n{\n    qDebug() &lt;&lt; \"Is member enabled?\" &lt;&lt; enabled;\n}\n</code></pre>\n\n<hr>\n\n<p>I intend to run some code (like a function), depending upon two condition:</p>\n\n<ol>\n<li>First signal, i.e. <code>ready</code> is received</li>\n<li>Second signal, i.e. <code>enabledChanged</code>, is received and its Boolean parameter is <code>true</code></li>\n</ol>\n\n<p>I cannot figure out how to check for satisfaction of above conditions.</p>\n\n<h2>UPDATE</h2>\n\n<p>Now my signals count is increased to three. So my code execution depends on three conditions.</p>\n"}, {"tags": ["c++", "visual-c++"], "comments": [{"owner": {"reputation": 70686, "user_id": 11683, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d4d284c3c214d52f004df795aee394e3?s=128&d=identicon&r=PG", "display_name": "GSerg", "link": "https://stackoverflow.com/users/11683/gserg"}, "edited": false, "score": 3, "creation_date": 1568802758, "post_id": 57990690, "comment_id": 102388564, "body": "No. The correct way is to fix the place that produces <code>someDWORD</code> and make it produce a pointer sized something."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1568805886, "post_id": 57990690, "comment_id": 102390302, "body": "Maybe, big maybe.  Be sure to run the program on Win8.1 or higher, it flushes out bugs like this by intentionally allocating memory above the 4GB zone."}], "answers": [{"comments": [{"owner": {"reputation": 1019, "user_id": 332766, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/842cab0f6f501c0d88228006127d9a9a?s=128&d=identicon&r=PG", "display_name": "Werner", "link": "https://stackoverflow.com/users/332766/werner"}, "edited": false, "score": 0, "creation_date": 1568804293, "post_id": 57990758, "comment_id": 102389387, "body": "I see, in fact &quot;someDWORD&quot; is a DWORD in a struct that is used everywhere, and I&#39;d like to avoid too much refactoring (just need to make this run in a 64 bit context). Could a solution be to use one of the cast helpers (e.g. using static_cast with uintptr_t, etc)? Or is that the same?"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 1019, "user_id": 332766, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/842cab0f6f501c0d88228006127d9a9a?s=128&d=identicon&r=PG", "display_name": "Werner", "link": "https://stackoverflow.com/users/332766/werner"}, "edited": false, "score": 0, "creation_date": 1568804478, "post_id": 57990758, "comment_id": 102389497, "body": "@Werner If the <code>DWORD</code> in the struct is only 32 bits large, then it is impossible in every sense of the word to retrieve the original 64 bits from just that information. You can cast around until the moon turns blue, but unless you store all 64 bits of the pointer value that you need, you won&#39;t get the correct value back."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1568804704, "post_id": 57990758, "comment_id": 102389612, "body": "Put another way: If your country used to have 4 digit ZIP codes but switches to 6 digits, you can&#39;t keep giving people forms that only have space for 4 digits. You need to update the forms (your struct), otherwise you won&#39;t have any way to retrieve the correct information. Yes, this may even mean changing the size of the paper that the form is printed on (i.e. the size of the struct), which may necessitate more changes."}, {"owner": {"reputation": 1019, "user_id": 332766, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/842cab0f6f501c0d88228006127d9a9a?s=128&d=identicon&r=PG", "display_name": "Werner", "link": "https://stackoverflow.com/users/332766/werner"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1568808487, "post_id": 57990758, "comment_id": 102391711, "body": "@MaxLanghof true, but if the switch to 6 digits was because of some bureaucratic decision to follow EU standards where zip codes are 6 digits...while in reality, there would never, ever be a 6 digit zipcode in my country? We could continue using our forms but when passing on zip codes to the EU, we would just pad them like &quot;001234&quot;."}, {"owner": {"reputation": 70686, "user_id": 11683, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d4d284c3c214d52f004df795aee394e3?s=128&d=identicon&r=PG", "display_name": "GSerg", "link": "https://stackoverflow.com/users/11683/gserg"}, "reply_to_user": {"reputation": 1019, "user_id": 332766, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/842cab0f6f501c0d88228006127d9a9a?s=128&d=identicon&r=PG", "display_name": "Werner", "link": "https://stackoverflow.com/users/332766/werner"}, "edited": false, "score": 1, "creation_date": 1568826182, "post_id": 57990758, "comment_id": 102401568, "body": "@Werner That&#39;s not the case here though. That place that produces <code>someDWORD</code>, it has to start with an actual pointer (returned by the <code>&amp;</code> operator or some flavor of <code>malloc</code>), and then it casts it to <code>DWORD</code>. That is the point of the actual error, everything else is wrong after that, including casting it back to a pointer. You should be getting another warning about writing <i>to</i> <code>someDWORD</code>, pay attention to that one first."}], "tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": true, "score": 3, "last_activity_date": 1568802869, "creation_date": 1568802869, "answer_id": 57990758, "question_id": 57990690, "link": "https://stackoverflow.com/questions/57990690/type-cast-warning-from-dword-to-64-bit-pointer/57990758#57990758", "title": "Type cast warning from DWORD to 64 bit pointer", "body": "<p>That savage cast to <code>DWORD_PTR</code> will only pad <code>someDWORD</code> with zeros, it won't bring back the upper half of the pointer value that was lost.</p>\n\n<p>You need <code>someDWORD</code> to be a <code>DWORD_PTR</code> (or, in fact, a <code>std::uintptr_t</code>) from the beginning.</p>\n"}], "owner": {"reputation": 1019, "user_id": 332766, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/842cab0f6f501c0d88228006127d9a9a?s=128&d=identicon&r=PG", "display_name": "Werner", "link": "https://stackoverflow.com/users/332766/werner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "accepted_answer_id": 57990758, "answer_count": 1, "score": 1, "last_activity_date": 1568964640, "creation_date": 1568802649, "last_edit_date": 1568964640, "question_id": 57990690, "link": "https://stackoverflow.com/questions/57990690/type-cast-warning-from-dword-to-64-bit-pointer", "title": "Type cast warning from DWORD to 64 bit pointer", "body": "<p>An old 32 bit C++ application (MS Visual Studio) has code lines like this:</p>\n\n<pre><code>m_value = (PUCHAR)someDWORD;\n</code></pre>\n\n<p>Where PUCHAR is a pointer to an unsigned char.</p>\n\n<p>Now I have changed to 64 bit and I get a (valid) warning about conversion from DWORD to the 64 bit pointer. My unqualified solution to this is to write like this:</p>\n\n<pre><code>m_value = (PUCHAR)(DWARD_PTR)someDWORD;\n</code></pre>\n\n<p>Is this the correct way to fix this warning (and potential runtime error)?</p>\n"}, {"tags": ["c++", "boost", "tcp", "boost-asio", "keep-alive"], "comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1568806923, "post_id": 57990631, "comment_id": 102390883, "body": "Without a reproducer this question doesn&#39;t really fly. You could contact the mailing list with a generic out-of-context question like that."}], "owner": {"reputation": 3107, "user_id": 4131673, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/100000565112046/picture?type=large", "display_name": "jaskmar", "link": "https://stackoverflow.com/users/4131673/jaskmar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1568802467, "creation_date": 1568802467, "question_id": 57990631, "link": "https://stackoverflow.com/questions/57990631/boost-asio-sometimes-doesnt-notify-about-tcp-keep-alive-timeout", "title": "Boost.Asio sometimes doesn&#39;t notify about TCP keep-alive timeout", "body": "<p>I have TCP socket with enabled keep-alive and configured keep-alive timeouts to some reasonable values. When I unplug the connection, <code>async_read</code> handler is invoked with an error, but not always. It seems like it doesn't work when I run another <code>io_service</code> in another thread. Can another <code>io_service</code> interfere somehow with the local one?</p>\n\n<p>I've checked by Wireshark that keep-alive messages works as expected - it detects disconnection properly.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1568802375, "post_id": 57990547, "comment_id": 102388341, "body": "<code>std::vector&lt;bool&gt;</code> is a specialization that usually stores bits in a compact way. It&#39;s really very different from any other vector."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 3, "creation_date": 1568802496, "post_id": 57990547, "comment_id": 102388410, "body": "<a href=\"http://eel.is/c++draft/vector.bool#4.sentence-1\" rel=\"nofollow noreferrer\"><code>reference</code> is a class that simulates the behavior of references of a single bit in <code>vector&lt;bool&gt;</code>.</a> Note that you are printing the address of an object of that <code>reference</code> class."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 3, "creation_date": 1568802663, "post_id": 57990547, "comment_id": 102388507, "body": "Oh my... I was thinking &quot;surely <code>&amp;a-&gt;isInfluenced[i]</code> shouldn&#39;t compile, it&#39;s taking the address of a temporary&quot;... After putting it to the test, the proxy type (<code>std::__1::__bit_reference&lt;...&gt;</code> here) actually overloads <code>operator &amp;</code> to return a <code>std::__1::__bit_iterator&lt;...&gt;</code>... What a wretched container-oid."}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1568802669, "post_id": 57990547, "comment_id": 102388510, "body": "Recommended read: <a href=\"https://howardhinnant.github.io/onvectorbool.html\" rel=\"nofollow noreferrer\">On <code>vector&lt;bool&gt;</code></a>"}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 1, "creation_date": 1568802823, "post_id": 57990547, "comment_id": 102388598, "body": "As you find in <a href=\"https://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/container/vector</a> <code>std::vector&lt;bool&gt;</code> is the only specialized vector."}, {"owner": {"reputation": 331, "user_id": 8231265, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/cr6PJ.jpg?s=128&g=1", "display_name": "Hello Everyone", "link": "https://stackoverflow.com/users/8231265/hello-everyone"}, "edited": false, "score": 0, "creation_date": 1568803077, "post_id": 57990547, "comment_id": 102388728, "body": "a bool costs only one 1 bit, why spread it all over 3 or 8 bytes?"}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "reply_to_user": {"reputation": 331, "user_id": 8231265, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/cr6PJ.jpg?s=128&g=1", "display_name": "Hello Everyone", "link": "https://stackoverflow.com/users/8231265/hello-everyone"}, "edited": false, "score": 0, "creation_date": 1568803184, "post_id": 57990547, "comment_id": 102388791, "body": "@Dr.Cutner To make <code>vector&lt;bool&gt;</code> a Container."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 331, "user_id": 8231265, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/cr6PJ.jpg?s=128&g=1", "display_name": "Hello Everyone", "link": "https://stackoverflow.com/users/8231265/hello-everyone"}, "edited": false, "score": 3, "creation_date": 1568803309, "post_id": 57990547, "comment_id": 102388856, "body": "@Dr.Cutner for consistency with other containers, for consistency with the rest of <code>std::vector</code>, for <code>operator[]</code> to return a actual reference to 1 element and not a proxy, for fast iteration, access and modification, for avoiding surprising behaviors and for the absence of the wtf moments. And if you want a space-efficient array of bool then a different container like bitset should have been used. In retrospect <code>std::vector&lt;bool&gt;</code> is one of the most unfortunate decision of C++."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1568804043, "post_id": 57990547, "comment_id": 102389268, "body": "@bolov It can (in theory) be a massive performance boost (see Hinnant&#39;s article). But on balance I&#39;m kind of surprised this hasn&#39;t been deprecated yet. I suppose one reason might be that they could never remove the specialisation outright, so deprecation is the beginning of an unclear path."}], "answers": [{"comments": [{"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1568803036, "post_id": 57990763, "comment_id": 102388706, "body": "<code>reference</code> doesn&#39;t have a <code>operator&amp;</code>."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1568803082, "post_id": 57990763, "comment_id": 102388730, "body": "@L.F. it does... in some implementations, as mentioned. Which is just scary to me."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1568803104, "post_id": 57990763, "comment_id": 102388743, "body": "@L.F. Not a mandated one but at least one impl makes <code>&amp;</code> work in that way (per Quentin&#39;s comment under the question)."}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1568803127, "post_id": 57990763, "comment_id": 102388757, "body": "@Quentin Really!  Is that conforming?  I think that modifies observable behavior."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1568803207, "post_id": 57990763, "comment_id": 102388805, "body": "@L.F. no idea. I just went to <a href=\"https://wandbox.org/permlink/xwuvmFXPNFUlz4Sf\" rel=\"nofollow noreferrer\">Wandbox</a> to see why this wasn&#39;t a &quot;taking address of rvalue&quot; error, and presto, <code>&amp;a-&gt;isInfluenced[i]</code> returned <code>std::__1::__bit_iterator&lt;...&gt;</code>..."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1568803245, "post_id": 57990763, "comment_id": 102388826, "body": "@L.F. Possibly so."}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 1, "creation_date": 1568804409, "post_id": 57990763, "comment_id": 102389456, "body": "Nitpicking: &quot;vector&lt;bool&gt; is the only one.&quot;  Actually vector&lt;bool, A&gt;"}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 1, "creation_date": 1568843237, "post_id": 57990763, "comment_id": 102407979, "body": "Your first line sounds like a case of <a href=\"https://knowyourmeme.com/memes/well-yes-but-actually-no\" rel=\"nofollow noreferrer\">&quot;Well yes, but actually no.&quot;</a> :p great answer!"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 1, "creation_date": 1568894948, "post_id": 57990763, "comment_id": 102425481, "body": "@scohe001 Also channeling the Tenth Doctor a little there. Weeell, I&#39;m not. Weell, I am... ;)"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 19, "last_activity_date": 1568804281, "last_edit_date": 1568804281, "creation_date": 1568802876, "answer_id": 57990763, "question_id": 57990547, "link": "https://stackoverflow.com/questions/57990547/why-do-different-vectorbool-elements-share-the-same-address/57990763#57990763", "title": "Why do different vector&lt;bool&gt; elements share the same address?", "body": "<p>They don't. Well, they do&hellip;</p>\n\n<p><code>vector&lt;bool&gt;</code> is not like other vectors.</p>\n\n<p>The elements of a <code>vector&lt;bool&gt;</code> cannot be directly accessed like this, because they are/may be smaller than a byte, which is the \"resolution\" of addresses in C++. So many bits/elements are packed into a single memory location on your computer. But that's not why you get these results.</p>\n\n<p>You're sort of observing the address of a temporary. That temporary is some proxy object that provides mutable access to a single <em>bit</em> in your collection.</p>\n\n<p>I say \"sort of\" because you're not even really taking the address; said proxy object has an <code>operator&amp;</code> that gives you something called a \"bit iterator\" in some implementations.</p>\n\n<p>Here's <a href=\"https://howardhinnant.github.io/onvectorbool.html\" rel=\"noreferrer\">Howard Hinnant on <code>vector&lt;bool&gt;</code></a>.</p>\n\n<p>In the meantime, when working with <code>vector&lt;bool&gt;</code>, unlearn what you know about vectors. \ud83d\ude1c</p>\n\n<hr>\n\n<blockquote>\n  <p>Are there any other special cases about <code>vector</code> I should be aware of, or is <code>vector&lt;bool&gt;</code> the only one I need to watch out for?</p>\n</blockquote>\n\n<p><code>vector&lt;bool&gt;</code> is the only one.</p>\n"}, {"tags": [], "owner": {"reputation": 605, "user_id": 2261717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c76361198fca3cb141650a537cee8edc?s=128&d=identicon&r=PG", "display_name": "Mattias Wallin", "link": "https://stackoverflow.com/users/2261717/mattias-wallin"}, "is_accepted": false, "score": 1, "last_activity_date": 1569439195, "creation_date": 1569439195, "answer_id": 58105233, "question_id": 57990547, "link": "https://stackoverflow.com/questions/57990547/why-do-different-vectorbool-elements-share-the-same-address/58105233#58105233", "title": "Why do different vector&lt;bool&gt; elements share the same address?", "body": "<p><code>std::vector&lt;bool&gt;::operator[]</code> is <strong>not</strong> returning a <code>bool&amp;</code> as you might expect from normal vectors, it is returning a <code>std::vector&lt;bool&gt;::reference</code>.</p>\n\n<p><code>std::vector&lt;bool&gt;::reference</code> is a proxy object containing information about what bit it is referencing. Using this information, it supports a couple of operations to make it <em>almost</em> behave like a <code>bool&amp;</code>. <a href=\"https://en.cppreference.com/w/cpp/container/vector_bool/reference\" rel=\"nofollow noreferrer\">std::vector&lt;bool&gt;::reference on cppreference.com</a></p>\n\n<p>When you do <code>&amp;(a-&gt;childInds[i])</code>, you take the address of the r-value <code>std::vector&lt;bool&gt;::reference</code> object. In your case the compiler is reusing the memory on the second call to operator[], and therefore prints the same address.</p>\n\n<p>This is the only specialization of std::vector.</p>\n"}], "owner": {"reputation": 163, "user_id": 11852699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b638d87f3cca53e4cc5506213cb6e4e?s=128&d=identicon&r=PG&f=1", "display_name": "edwardliang2019", "link": "https://stackoverflow.com/users/11852699/edwardliang2019"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 739, "favorite_count": 0, "answer_count": 2, "score": 14, "last_activity_date": 1569439195, "creation_date": 1568802217, "last_edit_date": 1568804073, "question_id": 57990547, "link": "https://stackoverflow.com/questions/57990547/why-do-different-vectorbool-elements-share-the-same-address", "title": "Why do different vector&lt;bool&gt; elements share the same address?", "body": "<p>I have defined the following class.</p>\n\n<pre><code>class STTreeNode\n{\npublic:\n    int ind;\n    int parentInd;  \n    std::vector&lt;int&gt; childInds;\n\n    int numTrain;\n    std::vector&lt;bool&gt; isInfluenced;\n\n    STTreeNode(int ind, int parentInd, int numTrain);\n};\n\nSTTreeNode::STTreeNode(int ind, int parentInd, int numTrain) {\n    this-&gt;ind = ind;\n    this-&gt;parentInd = parentInd;\n    this-&gt;numTrain = numTrain;\n}\n\n</code></pre>\n\n<p>and I ran the following code snippet.</p>\n\n<pre><code>STTreeNode *a = new STTreeNode(3, 4, 5);\na-&gt;childInds.push_back(20);\na-&gt;childInds.push_back(30);\na-&gt;isInfluenced.push_back(true);\na-&gt;isInfluenced.push_back(false);\n\nfor (int i = 0; i &lt; a-&gt;childInds.size(); i++)\n    std::cout &lt;&lt; &amp;(a-&gt;childInds[i]) &lt;&lt; \" \";\nstd::cout &lt;&lt; std::endl;\nfor (int i = 0; i &lt; a-&gt;isInfluenced.size(); i++)\n    std::cout &lt;&lt; &amp;(a-&gt;isInfluenced[i]) &lt;&lt; \" \";\nstd::cout &lt;&lt; std::endl;\n</code></pre>\n\n<p>The output was</p>\n\n<pre><code>0000020351C18520 0000020351C18524\n00000083540FFC60 00000083540FFC60\n</code></pre>\n\n<p>I am very confused about this. Why do the two elements in <code>a-&gt;childInd</code>s have consecutive addresses (as expected), while the two elements in <code>a-&gt;isInfluenced</code> seem to share the same address?</p>\n\n<p>Update:</p>\n\n<p>From the comments I understand that this has to do with the difference between <code>vector&lt;bool&gt;</code> and other <code>vector</code>s. Are there any other special cases about <code>vector</code> I should be aware of, or is <code>vector&lt;bool&gt;</code> the only one I need to watch out for?</p>\n"}, {"tags": ["c++", "c++11", "winapi"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1568802206, "post_id": 57990463, "comment_id": 102388230, "body": "You can solve the error easily by getting a pointer to the first element of the string (as in <code>&amp;strexepath[0]</code>). <i>But</i> that could lead to other errors if the object <code>strexepath</code> ends its life and gets destructed before the pointer does."}, {"owner": {"reputation": 7679, "user_id": 896012, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/05779413dbb3915fa5b2f3ed82d66007?s=128&d=identicon&r=PG", "display_name": "Gupta", "link": "https://stackoverflow.com/users/896012/gupta"}, "edited": false, "score": 2, "creation_date": 1568802265, "post_id": 57990463, "comment_id": 102388261, "body": "Why not using <code>mcTskInfo.pwszTaskTrigger = strexepath.c_str();</code>?"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 7679, "user_id": 896012, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/05779413dbb3915fa5b2f3ed82d66007?s=128&d=identicon&r=PG", "display_name": "Gupta", "link": "https://stackoverflow.com/users/896012/gupta"}, "edited": false, "score": 0, "creation_date": 1568802298, "post_id": 57990463, "comment_id": 102388288, "body": "@Gupta that&#39;s <code>const wchar_t *</code>."}, {"owner": {"reputation": 7679, "user_id": 896012, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/05779413dbb3915fa5b2f3ed82d66007?s=128&d=identicon&r=PG", "display_name": "Gupta", "link": "https://stackoverflow.com/users/896012/gupta"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1568802918, "post_id": 57990463, "comment_id": 102388656, "body": "@Quentin What do you mean? In C++11, <code>data()</code> and <code>c_str()</code> are the same, no?"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 7679, "user_id": 896012, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/05779413dbb3915fa5b2f3ed82d66007?s=128&d=identicon&r=PG", "display_name": "Gupta", "link": "https://stackoverflow.com/users/896012/gupta"}, "edited": false, "score": 0, "creation_date": 1568803006, "post_id": 57990463, "comment_id": 102388692, "body": "@Gupta yes, and both of them return <code>const</code>... I just fixed my answer thanks to sklott."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 7679, "user_id": 896012, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/05779413dbb3915fa5b2f3ed82d66007?s=128&d=identicon&r=PG", "display_name": "Gupta", "link": "https://stackoverflow.com/users/896012/gupta"}, "edited": false, "score": 1, "creation_date": 1568828452, "post_id": 57990463, "comment_id": 102402412, "body": "@Gupta In C++17, <code>data()</code> has an overload that returns a non-const pointer."}], "answers": [{"comments": [{"owner": {"reputation": 1288, "user_id": 11680056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/352e207181e5b85c5ffeef7be921898c?s=128&d=identicon&r=PG&f=1", "display_name": "sklott", "link": "https://stackoverflow.com/users/11680056/sklott"}, "edited": false, "score": 0, "creation_date": 1568802897, "post_id": 57990552, "comment_id": 102388640, "body": "Non-const <code>data()</code> is available only since C++17, and this question has C++11 tag."}, {"owner": {"reputation": 181, "user_id": 11868802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cb315c27582f9a174c79dfc5f59fd5a?s=128&d=identicon&r=PG&f=1", "display_name": "John Paul Coder", "link": "https://stackoverflow.com/users/11868802/john-paul-coder"}, "edited": false, "score": 0, "creation_date": 1568809123, "post_id": 57990552, "comment_id": 102392075, "body": "Hi @Quentin, As you mentioned I changed like: mcTskInfo.pwszTaskTrigger = strexepath.data();"}, {"owner": {"reputation": 181, "user_id": 11868802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cb315c27582f9a174c79dfc5f59fd5a?s=128&d=identicon&r=PG&f=1", "display_name": "John Paul Coder", "link": "https://stackoverflow.com/users/11868802/john-paul-coder"}, "edited": false, "score": 0, "creation_date": 1568809155, "post_id": 57990552, "comment_id": 102392096, "body": "But it is showing the error message: a value of type &quot;const wchar_t*&quot; cannot be assigned to an entity of type &quot;LPWSTR&quot;"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 181, "user_id": 11868802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cb315c27582f9a174c79dfc5f59fd5a?s=128&d=identicon&r=PG&f=1", "display_name": "John Paul Coder", "link": "https://stackoverflow.com/users/11868802/john-paul-coder"}, "edited": false, "score": 0, "creation_date": 1568809432, "post_id": 57990552, "comment_id": 102392254, "body": "@JohnPaulCoder that&#39;s because you are using C++11, which sklott pointed out to me. <code>data</code> has been updated since then, but you&#39;re restricted to using <code>&amp;strexepath[0]</code> which has the same effect."}, {"owner": {"reputation": 181, "user_id": 11868802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cb315c27582f9a174c79dfc5f59fd5a?s=128&d=identicon&r=PG&f=1", "display_name": "John Paul Coder", "link": "https://stackoverflow.com/users/11868802/john-paul-coder"}, "edited": false, "score": 0, "creation_date": 1568823683, "post_id": 57990552, "comment_id": 102400556, "body": "Thank you @Quentin, mcTskInfo.pwszTaskTrigger = &amp;strexepath[0]; is working."}, {"owner": {"reputation": 181, "user_id": 11868802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cb315c27582f9a174c79dfc5f59fd5a?s=128&d=identicon&r=PG&f=1", "display_name": "John Paul Coder", "link": "https://stackoverflow.com/users/11868802/john-paul-coder"}, "edited": false, "score": 0, "creation_date": 1568823734, "post_id": 57990552, "comment_id": 102400569, "body": "mcTskInfo.pwszTaskTrigger = (LPWSTR)strupdatepath.c_str();  --- This way also it is working. Can I use this way?"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 181, "user_id": 11868802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cb315c27582f9a174c79dfc5f59fd5a?s=128&d=identicon&r=PG&f=1", "display_name": "John Paul Coder", "link": "https://stackoverflow.com/users/11868802/john-paul-coder"}, "edited": false, "score": 0, "creation_date": 1568823860, "post_id": 57990552, "comment_id": 102400628, "body": "@JohnPaulCoder I&#39;d say it is way uglier since you have to cast <code>const</code> away."}], "tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": true, "score": 1, "last_activity_date": 1568802946, "last_edit_date": 1568802946, "creation_date": 1568802232, "answer_id": 57990552, "question_id": 57990463, "link": "https://stackoverflow.com/questions/57990463/no-suitable-conversion-function-from-stdwstring-to-lpwstr-exists-in-c/57990552#57990552", "title": "no suitable conversion function from &quot;std::wstring&quot; to &quot;LPWSTR&quot; exists in C++", "body": "<p>You can use:</p>\n\n<pre><code>mcTskInfo.pwszTaskTrigger = &amp;strexepath[0];\n</code></pre>\n\n<p>Or, in C++17, be more descriptive and use <code>data</code>:</p>\n\n<pre><code>mcTskInfo.pwszTaskTrigger = strexepath.data();\n</code></pre>\n\n<p>But make extra sure that nothing writes more than the length of the string through that pointer, nor uses it after <code>strexepath</code>'s lifetime has ended.</p>\n"}, {"comments": [{"owner": {"reputation": 181, "user_id": 11868802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cb315c27582f9a174c79dfc5f59fd5a?s=128&d=identicon&r=PG&f=1", "display_name": "John Paul Coder", "link": "https://stackoverflow.com/users/11868802/john-paul-coder"}, "edited": false, "score": 0, "creation_date": 1568823770, "post_id": 57995533, "comment_id": 102400586, "body": "Can I use this way? mcTskInfo.pwszTaskTrigger = (LPWSTR)strupdatepath.c_str();  --- It is also working."}, {"owner": {"reputation": 2324, "user_id": 832220, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/474e24012185034fd5c116ee32037c5e?s=128&d=identicon&r=PG", "display_name": "Norbert Willhelm", "link": "https://stackoverflow.com/users/832220/norbert-willhelm"}, "reply_to_user": {"reputation": 181, "user_id": 11868802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cb315c27582f9a174c79dfc5f59fd5a?s=128&d=identicon&r=PG&f=1", "display_name": "John Paul Coder", "link": "https://stackoverflow.com/users/11868802/john-paul-coder"}, "edited": false, "score": 0, "creation_date": 1568824838, "post_id": 57995533, "comment_id": 102401048, "body": "I added the possibility of using a C-style cast to my answer."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1568828519, "post_id": 57995533, "comment_id": 102402439, "body": "You don&#39;t need the cast: <code>mcTskInfo.pwszTaskTrigger = &amp;strexepath[0];</code>, or <code>mcTskInfo.pwszTaskTrigger = strexepath.data();</code> in C++17."}], "tags": [], "owner": {"reputation": 2324, "user_id": 832220, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/474e24012185034fd5c116ee32037c5e?s=128&d=identicon&r=PG", "display_name": "Norbert Willhelm", "link": "https://stackoverflow.com/users/832220/norbert-willhelm"}, "is_accepted": false, "score": 1, "last_activity_date": 1568824783, "last_edit_date": 1568824783, "creation_date": 1568818040, "answer_id": 57995533, "question_id": 57990463, "link": "https://stackoverflow.com/questions/57990463/no-suitable-conversion-function-from-stdwstring-to-lpwstr-exists-in-c/57995533#57995533", "title": "no suitable conversion function from &quot;std::wstring&quot; to &quot;LPWSTR&quot; exists in C++", "body": "<p>Use the following:</p>\n\n<pre><code>mcTskInfo.pwszTaskTrigger=const_cast&lt;wchar_t*&gt;(strexepath.c_str());\n</code></pre>\n\n<p>You can also use a C-style cast instead of const_cast. Then the line would look like:</p>\n\n<pre><code>mcTskInfo.pwszTaskTrigger = (LPWSTR)strupdatepath.c_str();\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 11868802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cb315c27582f9a174c79dfc5f59fd5a?s=128&d=identicon&r=PG&f=1", "display_name": "John Paul Coder", "link": "https://stackoverflow.com/users/11868802/john-paul-coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 790, "favorite_count": 0, "accepted_answer_id": 57990552, "answer_count": 2, "score": 2, "last_activity_date": 1568824783, "creation_date": 1568801949, "last_edit_date": 1568802124, "question_id": 57990463, "link": "https://stackoverflow.com/questions/57990463/no-suitable-conversion-function-from-stdwstring-to-lpwstr-exists-in-c", "title": "no suitable conversion function from &quot;std::wstring&quot; to &quot;LPWSTR&quot; exists in C++", "body": "<p>By using the below code, I am getting the path \"C:\\ProgramFiles\"</p>\n\n<p>And then appending \"\\Test\\myupdate.exe\" to it.</p>\n\n<p>After that I am storing this path in the \"pwszTaskTrigger\" structure variable like as below:</p>\n\n<pre><code>mcTskInfo.pwszTaskTrigger = strexepath;\n</code></pre>\n\n<p>But, When storing I am getting a warning message (\"no suitable conversion function from \"std::wstring\" to \"LPWSTR\" exists\"):</p>\n\n<p>Below is the complete Code:</p>\n\n<pre><code>MCTASKINFO mcTskInfo = { 0 };\nWCHAR szCommonFiles[MAX_PATH] = { 0 };\nlRet = SHGetFolderPathW(NULL, CSIDL_PROGRAM_FILES, NULL, 0, szCommonFiles);\nstd::wstring strexepath = L\"\";\n    strexepath.append(szCommonFiles);  //szCommonFiles gives the path \"C:\\\\ProgramFiles\"\n    strexepath.append(ADD_MCUPDTPATH);\n    mcTskInfo.pwszTaskTrigger = strexepath;\n\n#define ADD_MCUPDTPATH          L\"\\\\Test\\\\myupdate.exe\"\n\n\nstruct MCTASKINFO\n{\n\nLPWSTR pwszTaskTrigger; \n\n};\n</code></pre>\n\n<p>Here I should not change the structure variable pwszTaskTrigger from LPWSTR to LPCWSTR. Because this file is the include file.</p>\n\n<p>How can I fix this issue without changing LPWSTR to LPCWSTR?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1568801968, "post_id": 57990421, "comment_id": 102388104, "body": "you can <a href=\"https://stackoverflow.com/posts/57990421/edit\">edit</a> the question to add a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Even with the image the question is unclear. Dont post code as images  please"}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1568806100, "post_id": 57990421, "comment_id": 102390425, "body": "@Mr.Weson If you had posted code instead of an image of code, you could fix it instead of commenting on how it is wrong. Also, comments are ephemeral, so any corrections should be made in the question itself, not in a comment."}], "answers": [{"tags": [], "owner": {"reputation": 33577, "user_id": 9593596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JdCIQ.jpg?s=128&g=1", "display_name": "lubgr", "link": "https://stackoverflow.com/users/9593596/lubgr"}, "is_accepted": true, "score": 0, "last_activity_date": 1568802069, "creation_date": 1568802069, "answer_id": 57990497, "question_id": 57990421, "link": "https://stackoverflow.com/questions/57990421/c-primer-plus-list10-9-the-top-pointer-problem/57990497#57990497", "title": "C++ primer plus list:10.9 The \u201ctop\u201d pointer problem", "body": "<p>The ampersand in front of <code>&amp;top-&gt;topval(...)</code> returns the address of the object returned from <code>topval</code>. This is because the member access operator <code>-&gt;</code> has higher precedence than the address-of operator. So when we assume that <code>Stock::topval</code> returns a reference to another <code>Stock</code> object, we can get the address of that one and bind it to <code>Stock *top</code>.</p>\n"}], "owner": {"reputation": 17, "user_id": 10766746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df58c105f01c1a51cd022e017634c650?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.Weson", "link": "https://stackoverflow.com/users/10766746/mr-weson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 1, "accepted_answer_id": 57990497, "answer_count": 1, "score": -5, "last_activity_date": 1569166909, "creation_date": 1568801844, "last_edit_date": 1569166909, "question_id": 57990421, "link": "https://stackoverflow.com/questions/57990421/c-primer-plus-list10-9-the-top-pointer-problem", "title": "C++ primer plus list:10.9 The \u201ctop\u201d pointer problem", "body": "<p><strong>strong text</strong> </p>\n\n<p>The list show the <code>top = &amp;top-&gt;topval(stocks[st])</code>, this means that 'top' point to its own address then point to <code>topval()</code>'s return object? I can't understand.</p>\n"}, {"tags": ["python", "c++", "pybind11"], "answers": [{"tags": [], "owner": {"reputation": 1239, "user_id": 1741477, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34ae9525b1796a547c77f64fc2186d6b?s=128&d=identicon&r=PG", "display_name": "Sergei", "link": "https://stackoverflow.com/users/1741477/sergei"}, "is_accepted": true, "score": 2, "last_activity_date": 1568807872, "creation_date": 1568807872, "answer_id": 57992245, "question_id": 57990269, "link": "https://stackoverflow.com/questions/57990269/passing-pointer-to-c-from-python-using-pybind11/57992245#57992245", "title": "passing pointer to C++ from python using pybind11", "body": "<p>Pybind does automatic conversions. When you bind <code>f(double *)</code> the argument is assumed to be a pointer to a singe value, not a pointer to the array begin, because it would be quite unnatural to expect such input from python side. So pybind will convert argument using this logic. </p>\n\n<p>If you need to pass raw array to c++ use <code>py::buffer</code> like <a href=\"https://pybind11.readthedocs.io/en/stable/advanced/pycpp/numpy.html\" rel=\"nofollow noreferrer\">here</a>:</p>\n\n<pre><code>py::class_&lt;Matrix&gt;(m, \"Matrix\", py::buffer_protocol())\n    .def(\"__init__\", [](Matrix &amp;m, py::buffer b) {\n        typedef Eigen::Stride&lt;Eigen::Dynamic, Eigen::Dynamic&gt; Strides;\n\n        /* Request a buffer descriptor from Python */\n        py::buffer_info info = b.request();\n\n        /* Some sanity checks ... */\n        if (info.format != py::format_descriptor&lt;Scalar&gt;::format())\n            throw std::runtime_error(\"Incompatible format: expected a double array!\");\n\n        if (info.ndim != 2)\n            throw std::runtime_error(\"Incompatible buffer dimension!\");\n\n        auto strides = Strides(\n            info.strides[rowMajor ? 0 : 1] / (py::ssize_t)sizeof(Scalar),\n            info.strides[rowMajor ? 1 : 0] / (py::ssize_t)sizeof(Scalar));\n\n        auto map = Eigen::Map&lt;Matrix, 0, Strides&gt;(\n            static_cast&lt;Scalar *&gt;(info.ptr), info.shape[0], info.shape[1], strides);\n\n        new (&amp;m) Matrix(map);\n    });\n</code></pre>\n\n<p>To make it work you need to pass a type which follows python buffer protocol. </p>\n"}], "owner": {"reputation": 1935, "user_id": 1479628, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/28786d848d6d02f535c37eb41c9336c4?s=128&d=identicon&r=PG", "display_name": "Frank", "link": "https://stackoverflow.com/users/1479628/frank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2001, "favorite_count": 1, "accepted_answer_id": 57992245, "answer_count": 1, "score": 9, "last_activity_date": 1568877654, "creation_date": 1568801358, "last_edit_date": 1568877654, "question_id": 57990269, "link": "https://stackoverflow.com/questions/57990269/passing-pointer-to-c-from-python-using-pybind11", "title": "passing pointer to C++ from python using pybind11", "body": "<p>I have created the following class using pybind11:</p>\n\n<pre><code>py::class_&lt;Raster&gt;(m, \"Raster\")\n        .def(py::init&lt;double*, std::size_t, std::size_t, std::size_t, double, double, double&gt;());\n</code></pre>\n\n<p>However I have no idea how I would call this constructor in Python.. I see that Python expects a float in the place of the double*, but I cannot seem to call it.</p>\n\n<p>I have tried, <code>ctypes.data_as(ctypes.POINTER(ctypes.c_double))</code> but this does not work...</p>\n\n<p>Edit:</p>\n\n<p>I have distilled the answer from @Sergei answer. </p>\n\n<pre><code>py::class_&lt;Raster&gt;(m, \"Raster\", py::buffer_protocol())\n    .def(\"__init__\", [](Raster&amp; raster, py::array_t&lt;double&gt; buffer, double spacingX, double spacingY, double spacingZ) {\n    py::buffer_info info = buffer.request();\n    new (&amp;raster) Raster3D(static_cast&lt;double*&gt;(info.ptr), info.shape[0], info.shape[1], info.shape[2], spacingX, spacingY, spacingZ);\n    })\n</code></pre>\n"}, {"tags": ["c++", "file"], "comments": [{"owner": {"reputation": 145, "user_id": 9088108, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/540ece36b5c9fd67855b0b530d095ed8?s=128&d=identicon&r=PG&f=1", "display_name": "samini", "link": "https://stackoverflow.com/users/9088108/samini"}, "edited": false, "score": 0, "creation_date": 1568801378, "post_id": 57990128, "comment_id": 102387798, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/24189029/how-to-clear-the-content-of-a-file-after-it-is-opened-using-fstream\">How to clear the content of a file after it is opened using fstream?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": false, "score": 2, "last_activity_date": 1568801402, "creation_date": 1568801402, "answer_id": 57990286, "question_id": 57990128, "link": "https://stackoverflow.com/questions/57990128/how-to-delete-data-content-from-a-txt-file/57990286#57990286", "title": "How to delete data/content from a txt file", "body": "<p>Using <a href=\"https://en.cppreference.com/w/cpp/filesystem/resize_file\" rel=\"nofollow noreferrer\"><code>std::filesystem::resize_file</code></a>:</p>\n\n<pre><code>std::filesystem::resize_file(your_file, 0);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 2, "creation_date": 1568801494, "post_id": 57990290, "comment_id": 102387871, "body": "&quot;junks&quot; -&gt; &quot;chunks&quot; - unless you&#39;re evaluating the quality of the stored data :)"}], "tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": false, "score": 2, "last_activity_date": 1568801497, "last_edit_date": 1568801497, "creation_date": 1568801415, "answer_id": 57990290, "question_id": 57990128, "link": "https://stackoverflow.com/questions/57990128/how-to-delete-data-content-from-a-txt-file/57990290#57990290", "title": "How to delete data/content from a txt file", "body": "<p>In such a case, you usually just re-write the file as a whole. If it is a small file, you can read in the entire content, modify the content and write the file back.</p>\n\n<p>With large files, if you fear that you are consuming too much memory, you can read in the file in chunks of appropriate size, but you'd write these chunks to <em>another</em>, temporary file. When being finished, you delete the old file and move the temporary file to the location of the old file.</p>\n\n<p>You can combine both aproaches, too: Read the entire file, write it to temporary at once, then delete and move; if anything goes wrong while writing the temporary, you'd still have the old file as backup...</p>\n"}, {"tags": [], "owner": {"reputation": 159, "user_id": 5718591, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-t6R_22V8wGA/AAAAAAAAAAI/AAAAAAAAAC4/G6Da1N__d-A/photo.jpg?sz=128", "display_name": "shohag sarkar", "link": "https://stackoverflow.com/users/5718591/shohag-sarkar"}, "is_accepted": false, "score": 1, "last_activity_date": 1568801450, "creation_date": 1568801450, "answer_id": 57990299, "question_id": 57990128, "link": "https://stackoverflow.com/questions/57990128/how-to-delete-data-content-from-a-txt-file/57990299#57990299", "title": "How to delete data/content from a txt file", "body": "<p>You can open the file in writing mode (w) and then close it . It will truncate all previous data.  </p>\n"}, {"tags": [], "owner": {"reputation": 6911, "user_id": 2970186, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Vo0Wc.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2970186/daniel"}, "is_accepted": false, "score": 1, "last_activity_date": 1568802793, "creation_date": 1568802793, "answer_id": 57990729, "question_id": 57990128, "link": "https://stackoverflow.com/questions/57990128/how-to-delete-data-content-from-a-txt-file/57990729#57990729", "title": "How to delete data/content from a txt file", "body": "<p>It's generally a good idea to clean up temporary files once your program ends. I certainly wouldn't leave an empty temporary file hanging around. You can easily remove file (e.g. with <a href=\"https://www.boost.org/doc/libs/1_47_0/libs/filesystem/v3/doc/reference.html#remove\" rel=\"nofollow noreferrer\"><code>boost::filesystem::remove</code></a> or <a href=\"https://en.cppreference.com/w/cpp/filesystem/remove\" rel=\"nofollow noreferrer\"><code>std::filesystem::remove</code></a>). If you really just want to 'clear' a file then:</p>\n\n<pre><code>void clear_file(const std::string&amp; filename)\n{\n    std::ofstream file {filename}; \n}\n</code></pre>\n\n<p>Will do the job.</p>\n"}], "owner": {"reputation": 25, "user_id": 11924508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66c7e9c0f7744ab2f7cfb61b42f9aa4b?s=128&d=identicon&r=PG&f=1", "display_name": "throwawayinvisible", "link": "https://stackoverflow.com/users/11924508/throwawayinvisible"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1568810672, "creation_date": 1568800983, "question_id": 57990128, "link": "https://stackoverflow.com/questions/57990128/how-to-delete-data-content-from-a-txt-file", "title": "How to delete data/content from a txt file", "body": "<p>I am trying to learn how to handle and work on files, now I know how to open them, write on them and read. What I would like to do is, how can I delete data/content from the file, when I have finished to use the program? \nI use the a txt file to save some informations that I used them, when I need during the execution of the program, but when I finish, I would like to delete the data saved, which are simply numbers. I was thinking to remove the file each time, and to create, but I think it's not the ideal. Any suggestions?</p>\n"}, {"tags": ["c++", "templates", "language-lawyer"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1568801059, "post_id": 57990045, "comment_id": 102387626, "body": "Is the lack of <i>definition</i> of <code>C</code> on purpose?"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1568802784, "post_id": 57990045, "comment_id": 102388579, "body": "@Someprogrammerdude Pretty sure it is, otherwise the scope would be clear, wouldn&#39;t it?"}], "answers": [{"comments": [{"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1568803074, "post_id": 57990309, "comment_id": 102388727, "body": "<i>&#39;or block scope&#39;</i> \u2013 could it be unclear to question author that the class braces don&#39;t form a block scope? If so, then perhaps better mention?"}], "tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1568801475, "creation_date": 1568801475, "answer_id": 57990309, "question_id": 57990045, "link": "https://stackoverflow.com/questions/57990045/the-scope-of-a-declaration-in-c-template-specialization/57990309#57990309", "title": "The scope of a declaration in C++ template specialization", "body": "<p>This is detailed in the C++ standard at the following sections:</p>\n\n<blockquote>\n  <p><strong>[basic.lookup.elab]</strong></p>\n  \n  <p><a href=\"https://timsong-cpp.github.io/cppwp/n4659/basic.lookup.elab#2\" rel=\"nofollow noreferrer\">2</a> If the elaborated-type-specifier is introduced by the class-key\n  and this lookup does not find a previously declared type-name, or if\n  the elaborated-type-specifier appears in a declaration with the form:</p>\n\n<pre>   class-key attribute-specifier-seq<sub>opt</sub> identifier ;\n</pre>\n  \n  <p>the elaborated-type-specifier is a declaration that introduces the\n  class-name as described in [basic.scope.pdecl].</p>\n  \n  <p><strong>[basic.scope.pdecl]</strong> (emphasis mine)</p>\n  \n  <p><a href=\"https://timsong-cpp.github.io/cppwp/n4659/basic.scope.pdecl#7\" rel=\"nofollow noreferrer\">7</a> The point of declaration of a class first declared in an\n  elaborated-type-specifier is as follows:</p>\n  \n  <ul>\n  <li>[...]</li>\n  <li>... if the elaborated-type-specifier is used in the decl-specifier-seq or parameter-declaration-clause of a function\n  defined in namespace scope, the identifier is declared as a class-name\n  in the namespace that contains the declaration; <strong>otherwise, except as\n  a friend declaration, the identifier is declared in the smallest\n  namespace or block scope that contains the declaration.</strong></li>\n  </ul>\n</blockquote>\n\n<p>The argument list of a template falls in the \"otherwise\" clause. <code>A</code> is the smallest namespace that contains the declaration, so the class type <code>C</code> is declared inside of it. <code>A::C</code> is the correct way to refer to it.</p>\n"}], "owner": {"reputation": 1439, "user_id": 5973032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1c03d08c4ff4a1e00aaaf94a1ddd95c?s=128&d=identicon&r=PG", "display_name": "Wei Li", "link": "https://stackoverflow.com/users/5973032/wei-li"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 57990309, "answer_count": 1, "score": 2, "last_activity_date": 1568801710, "creation_date": 1568800740, "last_edit_date": 1568801710, "question_id": 57990045, "link": "https://stackoverflow.com/questions/57990045/the-scope-of-a-declaration-in-c-template-specialization", "title": "The scope of a declaration in C++ template specialization", "body": "<p>For the following code:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>namespace A\n{\n    struct B\n    {\n        using type = std::tuple&lt;struct C&gt;;\n    };\n}\n\nint main()\n{\n    C* ptr = nullptr;\n    B::C* ptr2 = nullptr;\n    A::B::C* ptr3 = nullptr;\n    A::C* ptr4 = nullptr;\n}\n</code></pre>\n\n<p>I just want to know what is the scope of <code>C</code>. I have tried in gcc 6.5/7.4/8.3/9.1 and clang 6/7/8, they all told me that <code>A::C</code> is correct. But I am not sure whether there are any materials in the C++ standard that describe the scope of <code>C</code> in the above situation.</p>\n\n<p>Could you tell me if you know the materials in the C++ standard that related to this topic? Thanks very much !</p>\n"}, {"tags": ["c++", "c++11", "dictionary"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1568800622, "post_id": 57989990, "comment_id": 102387363, "body": "<code>myMap[key].push_back(value)</code>?"}, {"owner": {"reputation": 1412, "user_id": 5698626, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f77263c99c1d7820eea60087ce2164f2?s=128&d=identicon&r=PG&f=1", "display_name": "PlsWork", "link": "https://stackoverflow.com/users/5698626/plswork"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1568800652, "post_id": 57989990, "comment_id": 102387383, "body": "@Someprogrammerdude does the operator[] handle the case when key is not in the map?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1568800676, "post_id": 57989990, "comment_id": 102387400, "body": "And the <code>operator[]</code> function creates a default-constructor or initialized value if the key doesn&#39;t exist, so for your vector it will create an empty vector. This should be well-documented in many places."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 1, "creation_date": 1568800817, "post_id": 57989990, "comment_id": 102387499, "body": "This means, on the other hand, that you cannot use <code>operator[]</code> if you <i>don&#39;t</i> want to insert non-existing elements (and you cannot use it on const maps). In such a scenario, you&#39;d rely on <code>find</code> function."}], "answers": [{"comments": [{"owner": {"reputation": 1412, "user_id": 5698626, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f77263c99c1d7820eea60087ce2164f2?s=128&d=identicon&r=PG&f=1", "display_name": "PlsWork", "link": "https://stackoverflow.com/users/5698626/plswork"}, "edited": false, "score": 1, "creation_date": 1568800891, "post_id": 57990018, "comment_id": 102387533, "body": "&quot;Maybe it is worth pointing out an empty vector will be created automatically.&quot; -someone&#39;s deleted comment"}], "tags": [], "owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "is_accepted": true, "score": 7, "last_activity_date": 1568800653, "creation_date": 1568800653, "answer_id": 57990018, "question_id": 57989990, "link": "https://stackoverflow.com/questions/57989990/c-working-with-a-map-with-vectors-as-values/57990018#57990018", "title": "C++ working with a map with vectors as values", "body": "<p>You want:</p>\n\n<pre><code>myMap[\"key\"].push_back(\"string\");\n</code></pre>\n\n<p>If the vector for this key doesn't exist, it will be created automatically.</p>\n"}], "owner": {"reputation": 1412, "user_id": 5698626, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f77263c99c1d7820eea60087ce2164f2?s=128&d=identicon&r=PG&f=1", "display_name": "PlsWork", "link": "https://stackoverflow.com/users/5698626/plswork"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 57990018, "answer_count": 1, "score": 0, "last_activity_date": 1568800653, "creation_date": 1568800552, "question_id": 57989990, "link": "https://stackoverflow.com/questions/57989990/c-working-with-a-map-with-vectors-as-values", "title": "C++ working with a map with vectors as values", "body": "<p>I have a map that maps strings to vectors of strings:</p>\n\n<p><code>std::unordered_map&lt;std::string, std::vector&lt;std::string&gt;&gt;&gt; myMap;</code>.</p>\n\n<p>Is there a nice way (as little code as possible while still being readable) to append a value to the vector of a given key?</p>\n\n<p>How to handle the case of adding a value to a vector for a new key for which the vector hasn't been initialized yet?</p>\n"}, {"tags": ["c++", "tuples", "c++17", "variadic-templates", "template-meta-programming"], "answers": [{"comments": [{"owner": {"reputation": 621, "user_id": 6018652, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/789cd26372e294e2d5af130f51d021ff?s=128&d=identicon&r=PG", "display_name": "Fluffy", "link": "https://stackoverflow.com/users/6018652/fluffy"}, "edited": false, "score": 0, "creation_date": 1568800663, "post_id": 57989812, "comment_id": 102387392, "body": "Wow... okay, missed that apparently! Template deduction fails <a href=\"https://godbolt.org/z/a0CT5L\" rel=\"nofollow noreferrer\">in this demo</a> though, any idea why?"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 621, "user_id": 6018652, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/789cd26372e294e2d5af130f51d021ff?s=128&d=identicon&r=PG", "display_name": "Fluffy", "link": "https://stackoverflow.com/users/6018652/fluffy"}, "edited": false, "score": 2, "creation_date": 1568800769, "post_id": 57989812, "comment_id": 102387469, "body": "@Fluffy Why, why, <i>why</i> do I keep posting answers without testing them first. Fix is on the way..."}], "tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": true, "score": 6, "last_activity_date": 1568800892, "last_edit_date": 1568800892, "creation_date": 1568800007, "answer_id": 57989812, "question_id": 57989756, "link": "https://stackoverflow.com/questions/57989756/using-integer-sequences-with-tuples-and-variadic-templates/57989812#57989812", "title": "Using integer sequences with tuples and variadic templates", "body": "<pre><code>template&lt;typename... Args&gt;\ndecltype(auto) tokenize(const std::tuple&lt;Args...&gt;&amp; t) {\n    return std::apply(\n        [](auto const &amp;... o) -&gt; decltype(auto) { return to_token(o...); },\n        t\n    );\n}\n</code></pre>\n\n<p>The lambda is required to defer <code>to_token</code>'s argument deduction until it can actually take place inside of <code>std::apply</code>, otherwise <code>to_token</code> has no definite type and can't be passed as a parameter.</p>\n"}, {"comments": [{"owner": {"reputation": 621, "user_id": 6018652, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/789cd26372e294e2d5af130f51d021ff?s=128&d=identicon&r=PG", "display_name": "Fluffy", "link": "https://stackoverflow.com/users/6018652/fluffy"}, "edited": false, "score": 0, "creation_date": 1568800780, "post_id": 57989946, "comment_id": 102387475, "body": "Awesome, exactly what I failed to write. Thanks!"}], "tags": [], "owner": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "is_accepted": false, "score": 4, "last_activity_date": 1568800406, "creation_date": 1568800406, "answer_id": 57989946, "question_id": 57989756, "link": "https://stackoverflow.com/questions/57989756/using-integer-sequences-with-tuples-and-variadic-templates/57989946#57989946", "title": "Using integer sequences with tuples and variadic templates", "body": "<pre><code>std::string typeToString(int) {\n    return \"integral\";\n}\n\nstd::string typeToString(char) {\n    return \"char\";\n}\n// overload this method to support other types\n\ntemplate&lt;typename Tuple, std::size_t... Is&gt;\nauto tokenize_impl(const Tuple&amp; t, std::index_sequence&lt;Is...&gt;) {\n    return std::vector&lt;std::string&gt;( {typeToString(std::get&lt;Is&gt;(t))...} );\n}\n\ntemplate&lt;typename... Args&gt;\nauto tokenize(const std::tuple&lt;Args...&gt;&amp; t) {\n    return tokenize_impl(t, std::index_sequence_for&lt;Args...&gt;{});\n}\n\n\nint main() {\n    auto t = std::make_tuple(1,'a',4);\n    auto res = tokenize(t);\n    for (auto elem : res)\n        std::cout &lt;&lt; elem &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>as output:</p>\n\n<pre><code>integral\nchar\nintegral\n</code></pre>\n\n<p><a href=\"https://godbolt.org/z/ZhNJme\" rel=\"nofollow noreferrer\">Live demo</a></p>\n"}], "owner": {"reputation": 621, "user_id": 6018652, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/789cd26372e294e2d5af130f51d021ff?s=128&d=identicon&r=PG", "display_name": "Fluffy", "link": "https://stackoverflow.com/users/6018652/fluffy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 57989812, "answer_count": 2, "score": 3, "last_activity_date": 1568800892, "creation_date": 1568799828, "last_edit_date": 1568800333, "question_id": 57989756, "link": "https://stackoverflow.com/questions/57989756/using-integer-sequences-with-tuples-and-variadic-templates", "title": "Using integer sequences with tuples and variadic templates", "body": "<p>Let's say I have a tuple:  </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>std::tuple&lt;int, char, unsigned int&gt; t{1, 'a', 4}\n</code></pre>\n\n<p>How do I iterate on the types of the above tuple using <code>std::index_sequence</code> and friends, so I can use (or re-write if needed) the function <code>to_token</code> below?</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;typename P1, typename... Param&gt;\nstd::vector&lt;std::string&gt; to_token(const P1&amp; p1, const Param&amp;... param) {\n    const auto to_token_impl = [](const auto&amp; t) {\n        using ParamType = std::decay_t&lt;decltype(t)&gt;;\n        std::stringstream ss;\n\n        if constexpr (std::is_same_v&lt;ParamType, char&gt;)\n            ss &lt;&lt; \"char\";\n        else if constexpr (std::is_integral_v&lt;ParamType&gt;) {\n            ss &lt;&lt; \"integral\";\n        }\n        return ss.str();\n    };\n    return {to_token_impl(p1), to_token_impl(param)...};\n}\n</code></pre>\n\n<p>Expected output: <code>{ \"integral\", \"char\", \"integral\" }</code></p>\n\n<p>Based on the examples found <a href=\"https://en.cppreference.com/w/cpp/utility/integer_sequence\" rel=\"nofollow noreferrer\">here</a>, I've started working on this indirection but I can't wrap my mind around what to do next...</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;typename... Args&gt;\nvoid tokenize(const std::tuple&lt;Args...&gt;&amp; t) {\n    tokenize_impl(t, std::index_sequence_for&lt;Args...&gt;{});\n}\n\ntemplate&lt;typename Tuple, std::size_t... Is&gt;\nvoid tokenize_impl(const Tuple&amp; t, std::index_sequence&lt;Is...&gt;) {\n    // ?\n}\n</code></pre>\n"}, {"tags": ["c++", "delete-operator"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1568800694, "post_id": 57989703, "comment_id": 102387412, "body": "delete_me() would inspire <code>delete this</code>.  Which is safe when no other references exist.  <code>delete aPtr</code> is a wholeheckofalot riskier since the destructor still needs to run.  Which ought to be expected to do something with aPtr.  Like deleting it, that won&#39;t end well.  Set to nullptr to avoid the heck."}], "answers": [{"comments": [{"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1568800119, "post_id": 57989753, "comment_id": 102387085, "body": "You are also assuming that there are no dangling references or pointers to the destroyed <code>A</code> which are subsequently used to access its members."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 4, "creation_date": 1568800175, "post_id": 57989753, "comment_id": 102387122, "body": "@Peter You always assume that when you <code>delete</code> something."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1568800451, "post_id": 57989753, "comment_id": 102387261, "body": "@MaxLanghof - Sure.    And how many bugs are caused because some code assumes something is true, when it really is not?   My point is that more assumptions are being made in the question than just &quot;<code>A</code> does not access any of its members ...&quot;.    And, for <code>pPtr-&gt;delete_me()</code> to successfully destroy the <code>A</code>, it must be accessing the address of the <code>A</code> from somewhere else."}], "tags": [], "owner": {"reputation": 33577, "user_id": 9593596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JdCIQ.jpg?s=128&g=1", "display_name": "lubgr", "link": "https://stackoverflow.com/users/9593596/lubgr"}, "is_accepted": true, "score": 7, "last_activity_date": 1568799821, "creation_date": 1568799821, "answer_id": 57989753, "question_id": 57989703, "link": "https://stackoverflow.com/questions/57989703/can-i-tell-an-object-to-delete-me/57989753#57989753", "title": "Can i tell an object to delete me?", "body": "<blockquote>\n  <p>Is this safe, given that <code>A</code> does not access any of its members after calling <code>bPtr-&gt;delete_me();</code>?</p>\n</blockquote>\n\n<p>Yes. It's very similar to <code>delete this;</code>, which has been discussed <a href=\"https://stackoverflow.com/q/3150942/9593596\">here</a>.</p>\n"}], "owner": {"reputation": 14124, "user_id": 3545094, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5105cb702f101f44d85e885bc61c8525?s=128&d=identicon&r=PG&f=1", "display_name": "Martin G", "link": "https://stackoverflow.com/users/3545094/martin-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 57989753, "answer_count": 1, "score": 2, "last_activity_date": 1568799821, "creation_date": 1568799634, "question_id": 57989703, "link": "https://stackoverflow.com/questions/57989703/can-i-tell-an-object-to-delete-me", "title": "Can i tell an object to delete me?", "body": "<p>An object <code>a</code> of class <code>A</code> calls an object <code>b</code> of class <code>B</code>, through a pointer:</p>\n\n<pre><code>void A::fun(){\n  bPtr-&gt;delete_me();\n}\n</code></pre>\n\n<p>In the called function we delete the calling object through a pointer (which was stored earlier):</p>\n\n<pre><code>void B::delete_me(){\n  delete aPtr;\n}\n</code></pre>\n\n<p>Is this safe, given that <code>A</code> does <strong>not</strong> access any of its members after calling <code>bPtr-&gt;delete_me();</code>?</p>\n"}, {"tags": ["c++", "multithreading", "c++11", "condition-variable"], "comments": [{"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1568799744, "post_id": 57989575, "comment_id": 102386881, "body": "Unrelated, but don&#39;t use <code>system_clock</code> to <i>measure</i> time, prefer <code>steady_clock</code> instead (system clock can get adjusted, e. g. being updated via ntp)."}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 12084160, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215355207973387/picture?type=large", "display_name": "Seriousl Lancerl", "link": "https://stackoverflow.com/users/12084160/seriousl-lancerl"}, "edited": false, "score": 0, "creation_date": 1568803892, "post_id": 57989748, "comment_id": 102389192, "body": "Yeah, I thought about that but can that be systematic? I mean, i run that codes at least 10 times each and the result was always the same (no spurious wake up in the previous case and always in the seconds)....the explanation I gave myself was that maybe this spurious wake up is really systematic and the creation of a thread requires the right amount of time do let it pass before i enter in the wait condition.....but i dont know if that makes sense at all. Can you agree with my theory? ps.thanks for the answer"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 75, "user_id": 12084160, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215355207973387/picture?type=large", "display_name": "Seriousl Lancerl", "link": "https://stackoverflow.com/users/12084160/seriousl-lancerl"}, "edited": false, "score": 0, "creation_date": 1568804058, "post_id": 57989748, "comment_id": 102389277, "body": "@SeriouslLancerl the mechanisms of and all the factors that influence spurious wakeups are very complex and way above my pay grade. Only an expert with experience in low level system architecture, synchronization mechanisms and compiler implementation can answer that."}], "tags": [], "owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "is_accepted": false, "score": 4, "last_activity_date": 1568799789, "creation_date": 1568799789, "answer_id": 57989748, "question_id": 57989575, "link": "https://stackoverflow.com/questions/57989575/does-wait-until-work-differently-in-main-thread-wrt-not-main-one-c/57989748#57989748", "title": "Does wait_until work differently in main thread wrt not main one? c++", "body": "<p>It's because of <a href=\"https://en.wikipedia.org/wiki/Spurious_wakeup\" rel=\"noreferrer\">spurious wakeups</a></p>\n\n<blockquote>\n  <p>Spurious wakeup describes a complication in the use of condition\n  variables as provided by certain multithreading APIs such as POSIX\n  Threads and the Windows API.</p>\n  \n  <p>Even after a condition variable appears to have been signaled from a\n  waiting thread's point of view, the condition that was awaited may\n  still be false. One of the reasons for this is a spurious wakeup; that\n  is, a thread might be awoken from its waiting state even though no\n  thread signaled the condition variable. For correctness it is\n  necessary, then, to verify that the condition is indeed true after the\n  thread has finished waiting. Because spurious wakeup can happen\n  repeatedly, this is achieved by waiting inside a loop that terminates\n  when the condition is true</p>\n</blockquote>\n\n<p>Further read:</p>\n\n<p><a href=\"https://www.modernescpp.com/index.php/c-core-guidelines-be-aware-of-the-traps-of-condition-variables\" rel=\"noreferrer\">C++ Core Guidelines: Be Aware of the Traps of Condition Variables</a></p>\n"}, {"comments": [{"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 1, "creation_date": 1568800491, "post_id": 57989785, "comment_id": 102387280, "body": "Alternatively, there&#39;s a wait function with a predicate as additional parameter doing the same: <code>c.wait(l, []() { return shared_state; });</code>"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1568801812, "post_id": 57989785, "comment_id": 102388028, "body": "@Aconcagua It is easy to make things bigger and more complicated. It is hard to make them any better. Think about the carbon footprint, otherwise unnecessary, that goes into creating a unique lambda class, lambda object of that class and the optimizer optimizing it away."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1568802245, "post_id": 57989785, "comment_id": 102388251, "body": "With such a simple predicate I&#39;d assume the compiler optimising any overhead away again... That said, I just wanted to show up that another way <i>exists</i> (&#39;alternatively&#39;), without any qualification if better or worse, leaving this to the readers..."}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1568799944, "creation_date": 1568799944, "answer_id": 57989785, "question_id": 57989575, "link": "https://stackoverflow.com/questions/57989575/does-wait-until-work-differently-in-main-thread-wrt-not-main-one-c/57989785#57989785", "title": "Does wait_until work differently in main thread wrt not main one? c++", "body": "<p>A condition variable is merely a notification mechanism with no state, so that notifications get lost when there are no waiters and spurious wake-ups unblock it when no notification was emitted.</p>\n\n<p>You must wait for a change in a shared state. E.g.:</p>\n\n<pre><code>std::mutex m;\nstd::condition_variable c;\n\n// Only ever read or write shared_state when the mutex is locked.\n// Otherwise race conditions create a deadlock.\nbool shared_state = false;\n\n// Waiting thread.\nvoid wait() {\n    std::unique_lock&lt;std::mutex&gt; l(m);\n    while(!shared_state) // Also handles spurious wake ups.\n        c.wait(l);\n    // shared_state is true, mutex is locked.\n}\n\n// Notifying thread.\nvoid wait() {\n    {\n        std::unique_lock&lt;std::mutex&gt; l(m);\n        shared_state = true;\n    }\n    c.notify_one();\n}\n\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 12084160, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215355207973387/picture?type=large", "display_name": "Seriousl Lancerl", "link": "https://stackoverflow.com/users/12084160/seriousl-lancerl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1568801304, "creation_date": 1568799256, "last_edit_date": 1568801304, "question_id": 57989575, "link": "https://stackoverflow.com/questions/57989575/does-wait-until-work-differently-in-main-thread-wrt-not-main-one-c", "title": "Does wait_until work differently in main thread wrt not main one? c++", "body": "<p>Executing the same code in main thread wrt a separate one,the condition variable behaves differently</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;condition_variable&gt;\n#include &lt;mutex&gt;\n#include &lt;chrono&gt;\n#include &lt;thread&gt;\nusing namespace std;\nusing namespace std::chrono;\nusing namespace std::chrono_literals;\nvoid waits()\n{\n    std::mutex mCvMtx;\n    std::condition_variable mCondVar;\n\n   auto now = std::chrono::system_clock::now();\n\n    std::unique_lock&lt;std::mutex&gt; lk(mCvMtx);\n    if(mCondVar.wait_until(lk, now+ 3*1000ms) ==  cv_status::timeout)\n    {\n        cout &lt;&lt; \"Fire\";\n    }\n    else\n    {\n        cout &lt;&lt; \"Condition variable notified \";\n    }\n    now = std::chrono::system_clock::now();\n}\n\nint main()\n{\n\n     std::thread t1(waits);\n     t1.join(); \n\n    return 0;\n}\n</code></pre>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;condition_variable&gt;\n#include &lt;mutex&gt;\n#include &lt;chrono&gt;\n#include &lt;thread&gt;\nusing namespace std;\nusing namespace std::chrono;\nusing namespace std::chrono_literals;\n\nint main()\n{\n     std::mutex mCvMtx;\n    std::condition_variable mCondVar;\n\n   auto now = std::chrono::system_clock::now();\n\n    std::unique_lock&lt;std::mutex&gt; lk(mCvMtx);\n    if(mCondVar.wait_until(lk, now+ 3*1000ms) ==  cv_status::timeout)\n    {\n        cout &lt;&lt; \"Fire\";\n    }\n    else\n    {\n        cout &lt;&lt; \"Condition variable notified \";\n    }\n    now = std::chrono::system_clock::now();\n\n    return 0;\n}\n</code></pre>\n\n<p>I cannot understand why in the first example the output results in \"Fire\" (so the cv was not notified and it waits the time I indicated) while in the second case where I execute the same code in the main thread, the output results in \"Condition variable notified\", without wait any seconds.</p>\n\n<p>Do you have any explanantion? thanks</p>\n"}, {"tags": ["c++", "operator-precedence"], "comments": [{"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 3, "creation_date": 1568798462, "post_id": 57989262, "comment_id": 102386093, "body": "The <code>+</code> is <i>inside</i> the <code>[]</code>. How could <code>arr[1+2]</code> be anything else than <code>arr[3]</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2956272"}, "edited": false, "score": 2, "creation_date": 1568798507, "post_id": 57989262, "comment_id": 102386119, "body": "The purpose of precedence is to resolve ambiguities. What is an ambiguity here?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1568798609, "post_id": 57989262, "comment_id": 102386184, "body": "I quite like this question - we all get confused from time to time. It&#39;s well asked."}, {"owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "edited": false, "score": 0, "creation_date": 1568798862, "post_id": 57989262, "comment_id": 102386343, "body": "@dyukha Can you come up with a situation, in which the high precedence of <code>[]</code> is necessary?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1568798955, "post_id": 57989262, "comment_id": 102386409, "body": "What other results are you imagining could happen that would suggest that <code>1+2</code> was evaluated after subscripting?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1568799012, "post_id": 57989262, "comment_id": 102386454, "body": "The grouping could have been <code>(cout &lt;&lt; arr)[1 + 2]</code>. Some folk think the precedence of <code>&lt;&lt;</code> is too low anyway. But that would be extreme indeed."}, {"owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1568799044, "post_id": 57989262, "comment_id": 102386471, "body": "@molbdnilo Given the precedence table, I would say I&#39;d expect to get a syntax error. It should really have a lower precedence, just above the assignment operator."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1568799125, "post_id": 57989262, "comment_id": 102386518, "body": "Do you also have a question about <code>(1+2)*3</code> by any chance?"}, {"owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1568799189, "post_id": 57989262, "comment_id": 102386551, "body": "@n.m. No, because parentheses here is not an operator. They define an operand for <code>*</code>."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1568799829, "post_id": 57989262, "comment_id": 102386922, "body": "So you have somehow (how?) decided that <code>()</code> make an operand of everything that is inside. You have however decided that <code>[]</code> do not make an operand out of everything that is inside, despite of obvious similarities between the two syntaxes. Why is it so? Also what about <code>sin(a+b)&#47;2</code>? Parentheses do signify an operator (the function call operator) here."}, {"owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1568800114, "post_id": 57989262, "comment_id": 102387081, "body": "@n.m. Correct. I could ask the same question about your second example. But, instead of ridiculing the question, can you come up with a situation, in which the high precedence of <code>[]</code> is necessary? It&#39;s high up there for a reason, isn&#39;t it?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1568801142, "post_id": 57989262, "comment_id": 102387665, "body": "It isn&#39;t quite clear what you mean. How would you define such an operator with low preccedence? Do you want <code>x+y[0]</code> to mean <code>(x+y)[0]? What do you want </code>y[0]+z` to mean?"}], "answers": [{"comments": [{"owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "edited": false, "score": 0, "creation_date": 1568800508, "post_id": 57989336, "comment_id": 102387291, "body": "Oh, right! It&#39;s a binary operator and in functional notation it would look like <code>[](arr, 1 + 2)</code>. So, I would write &quot;and the second operand is 1+2&quot;. BTW, there are prefix, infix, postfix operators. Is there a category for operators like subscript?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "edited": false, "score": 0, "creation_date": 1568801296, "post_id": 57989336, "comment_id": 102387745, "body": "@AlwaysLearning The postscript operator and the function call operator are classified as postfix in the C++ srandard."}, {"owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1568802038, "post_id": 57989336, "comment_id": 102388141, "body": "@n.m. What is the postscript operator?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "edited": false, "score": 0, "creation_date": 1568805679, "post_id": 57989336, "comment_id": 102390163, "body": "@AlwaysLearning sorry I meant subscript, not postscript."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 5, "last_activity_date": 1568798523, "creation_date": 1568798523, "answer_id": 57989336, "question_id": 57989262, "link": "https://stackoverflow.com/questions/57989262/subscript-operator-precedence/57989336#57989336", "title": "Subscript operator precedence", "body": "<p>The subscript operator <code>[]</code> is applying to <code>arr</code> and the <em>argument</em> is 1 + 2. The argument is not relevant to the precedence of the <code>[]</code> operator.</p>\n\n<p>Cf. an expression like <code>1 + arr[1 + 2]</code>. That is <em>grouped</em> as <code>1 + (arr[1 + 2])</code> due to the precedence that you cite, <strong>not</strong> <code>(1 + arr)[1 + 2]</code> which would be some curious pointer arithmetic!</p>\n"}], "owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 57989336, "answer_count": 1, "score": 1, "last_activity_date": 1568798523, "creation_date": 1568798327, "question_id": 57989262, "link": "https://stackoverflow.com/questions/57989262/subscript-operator-precedence", "title": "Subscript operator precedence", "body": "<p>The subscript operator has the second highest operator precedence (see <a href=\"https://en.cppreference.com/w/cpp/language/operator_precedence\" rel=\"nofollow noreferrer\">the table</a>). However, it seems to behave as if it had a low precedence. For example:</p>\n\n<pre><code>int arr[] = {10,20,30,40,50};\ncout &lt;&lt; arr[1+2];\n</code></pre>\n\n<p>This code outputs 40, which suggests that the result of <code>+</code> was available before the application of the subscript operator, which in turn suggests that <code>+</code> has a higher precedence than the subscript operator. What am I missing and how does the high precedence of the subscript operator express itself?</p>\n"}, {"tags": ["c++", "memory", "dynamic", "allocation", "stddeque"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1568798285, "post_id": 57989200, "comment_id": 102385980, "body": "If you run out of memory you have bigger problems.  If you are running on a limited memory platform (eg embedded), this should be a design issue."}, {"owner": {"reputation": 13, "user_id": 11950679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f507ab90133fc7994d93ef6977b5a67?s=128&d=identicon&r=PG&f=1", "display_name": "cmax", "link": "https://stackoverflow.com/users/11950679/cmax"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1568799613, "post_id": 57989200, "comment_id": 102386798, "body": "@RichardCritten: It is an limited embedded platform and I am building a databuffer with specialized buffer-overrun-technqieues (think of filtering entries). Running in out of mem should normally not happen because I introduce a max_buffer_size. But if max_buffer_size is reached OR system is out of memory, I want to detect it to &quot;filter&quot; my buffer."}], "answers": [{"tags": [], "owner": {"reputation": 33577, "user_id": 9593596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JdCIQ.jpg?s=128&g=1", "display_name": "lubgr", "link": "https://stackoverflow.com/users/9593596/lubgr"}, "is_accepted": true, "score": 0, "last_activity_date": 1568798359, "creation_date": 1568798359, "answer_id": 57989270, "question_id": 57989200, "link": "https://stackoverflow.com/questions/57989200/howto-detect-a-fail-of-dynamic-memory-allocation-when-pushing-to-stddeque/57989270#57989270", "title": "Howto detect a fail of dynamic memory allocation when pushing to std::deque?", "body": "<p>Handling out-of-memory situations within standard containers is delegated to the underlying allocator (the second, often not specified template parameter of <code>std::deque</code>). If you go with the default <code>std::allocator</code>, which throws upon failure in <a href=\"https://en.cppreference.com/w/cpp/memory/allocator/allocate\" rel=\"nofollow noreferrer\"><code>std::allocator::allocate</code></a>, you can wrap the insertion into a try-catch block:</p>\n\n<pre><code>try {\n   myDeque.push_back(42);\n} catch (const std::bad_alloc&amp; e) {\n  // Do something...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "is_accepted": false, "score": 1, "last_activity_date": 1568798395, "creation_date": 1568798395, "answer_id": 57989281, "question_id": 57989200, "link": "https://stackoverflow.com/questions/57989200/howto-detect-a-fail-of-dynamic-memory-allocation-when-pushing-to-stddeque/57989281#57989281", "title": "Howto detect a fail of dynamic memory allocation when pushing to std::deque?", "body": "<p>Use the <a href=\"https://en.cppreference.com/w/cpp/container/deque\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n\n<p>For example, for <a href=\"https://en.cppreference.com/w/cpp/container/deque\" rel=\"nofollow noreferrer\"><code>std::deque::push_back</code></a> we read:</p>\n\n<blockquote>\n  <p>If an exception is thrown (which can be due to Allocator::allocate() or element copy/move constructor/assignment), this function has no effect (strong exception guarantee). </p>\n</blockquote>\n\n<p>Assuming your type doesn't throw on copy/move operations, the only possible place to throw is allocator.</p>\n\n<p><a href=\"https://en.cppreference.com/w/cpp/memory/allocator/allocate\" rel=\"nofollow noreferrer\"><code>std::allocator::allocate()</code></a> will throw <code>std::bad_alloc</code> on failure:</p>\n\n<blockquote>\n  <p>Throws std::bad_alloc if allocation fails. </p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 11950679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f507ab90133fc7994d93ef6977b5a67?s=128&d=identicon&r=PG&f=1", "display_name": "cmax", "link": "https://stackoverflow.com/users/11950679/cmax"}, "edited": false, "score": 0, "creation_date": 1568798714, "post_id": 57989291, "comment_id": 102386245, "body": "Thanks a lot @Some programmer dude!"}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 3, "last_activity_date": 1568798408, "creation_date": 1568798408, "answer_id": 57989291, "question_id": 57989200, "link": "https://stackoverflow.com/questions/57989200/howto-detect-a-fail-of-dynamic-memory-allocation-when-pushing-to-stddeque/57989291#57989291", "title": "Howto detect a fail of dynamic memory allocation when pushing to std::deque?", "body": "<p>Allocations by the <a href=\"https://en.cppreference.com/w/cpp/container\" rel=\"nofollow noreferrer\">standard containers</a> are handled by their allocator, which defaults to <a href=\"https://en.cppreference.com/w/cpp/memory/allocator\" rel=\"nofollow noreferrer\"><code>std::allocator</code></a>.</p>\n\n<p>The <code>std::allocator</code> <a href=\"https://en.cppreference.com/w/cpp/memory/allocator/allocate\" rel=\"nofollow noreferrer\"><code>allocate</code></a> function is using <a href=\"https://en.cppreference.com/w/cpp/memory/new/operator_new\" rel=\"nofollow noreferrer\"><code>operator new</code></a> for the allocation.</p>\n\n<p>And <code>operator new</code> throws the <a href=\"https://en.cppreference.com/w/cpp/memory/new/bad_alloc\" rel=\"nofollow noreferrer\"><code>std::bad_alloc</code></a> exception if it fails.</p>\n"}], "owner": {"reputation": 13, "user_id": 11950679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f507ab90133fc7994d93ef6977b5a67?s=128&d=identicon&r=PG&f=1", "display_name": "cmax", "link": "https://stackoverflow.com/users/11950679/cmax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 57989270, "answer_count": 3, "score": 1, "last_activity_date": 1568798408, "creation_date": 1568798141, "question_id": 57989200, "link": "https://stackoverflow.com/questions/57989200/howto-detect-a-fail-of-dynamic-memory-allocation-when-pushing-to-stddeque", "title": "Howto detect a fail of dynamic memory allocation when pushing to std::deque?", "body": "<p>I am looking for a technique to detect if it is possible or not to push/insert/etc. further elements to a std::deque. It should do dynamic memory allocation for me, but what happens when my memory is full? By using malloc() I would receive a Nullpointer but how to detect a out of memory situation when using a std::deque?</p>\n"}, {"tags": ["c++", "c++11", "inheritance", "initialization-list", "friend-class"], "comments": [{"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1568798354, "post_id": 57989127, "comment_id": 102386018, "body": "Cannot reproduce with clang++ (that give me only a warning, suggesting another brace level, <code>i_gossip::i_am_secret secret = {{0, {0,1,2}}};</code>) and with g++ (no error and no warning). Which compiler are you using?"}, {"owner": {"reputation": 1367, "user_id": 1467600, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90323ac767ad86e163a062fb0823f99f?s=128&d=identicon&r=PG", "display_name": "David T&#243;th", "link": "https://stackoverflow.com/users/1467600/david-t%c3%b3th"}, "reply_to_user": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1568798458, "post_id": 57989127, "comment_id": 102386086, "body": "gcc version 9.2.0 (Rev2, Built by MSYS2 project) with -std=c++11"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 1, "creation_date": 1568798459, "post_id": 57989127, "comment_id": 102386088, "body": "Sorry: I&#39;ve compiled C++17; yes: with C++11 and C++14 I reproduce your error."}], "answers": [{"tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 4, "last_activity_date": 1568798686, "creation_date": 1568798686, "answer_id": 57989388, "question_id": 57989127, "link": "https://stackoverflow.com/questions/57989127/unable-to-use-brace-enclosed-initializer-list-while-inheriting-from-friend-class/57989388#57989388", "title": "Unable to use brace enclosed initializer-list while inheriting from friend class", "body": "<p>The two lines are not equivalent, despite the same identifier appearing in both. This one</p>\n\n<pre><code>i_have_secrets::i_have_secrets(){\n    i_am_secret = {0, {0,1,2}}; // Totally fine\n}\n</code></pre>\n\n<p>assigns to the <em>member variable</em> whose type is <code>secret_t</code>. It just so happens that <code>secret_t</code> is an aggregate in C++11, so what it does is perform <a href=\"https://en.cppreference.com/w/cpp/language/aggregate_initialization\" rel=\"nofollow noreferrer\">aggregate initialization</a> of a temporary <code>secret_t</code> that gets assigned to <code>i_have_secrets::i_am_secret</code>.</p>\n\n<p>On the other hand, this line</p>\n\n<pre><code>int main(int argc,char** args){\n    i_gossip::i_am_secret secret = {0, {0,1,2}}; // Compile error\n    return 0;\n}\n</code></pre>\n\n<p>Attempts to initialize an object of type <code>i_gossip::i_am_secret</code> (not <code>secret_t</code>). In C++11, a class that has any base classes is not an aggregate. So the attempt at initializing a non-aggregate via aggregate initialization won't work.</p>\n\n<p>You can use a type alias instead of a derived class</p>\n\n<pre><code>class i_gossip{\npublic:\n    using i_am_secret = i_have_secrets::secret_t;\n};\n</code></pre>\n\n<p>This will expose the inner type, aggregate initialization and all.</p>\n\n<p>Alternatively, you can switch to C++17, where an aggregate is allowed to have public base classes.</p>\n"}], "owner": {"reputation": 1367, "user_id": 1467600, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90323ac767ad86e163a062fb0823f99f?s=128&d=identicon&r=PG", "display_name": "David T&#243;th", "link": "https://stackoverflow.com/users/1467600/david-t%c3%b3th"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 57989388, "answer_count": 1, "score": 1, "last_activity_date": 1568798686, "creation_date": 1568797926, "question_id": 57989127, "link": "https://stackoverflow.com/questions/57989127/unable-to-use-brace-enclosed-initializer-list-while-inheriting-from-friend-class", "title": "Unable to use brace enclosed initializer-list while inheriting from friend class", "body": "<p>I am trying to use an initializer list for a data structure which inherits from its parents friend class's subclass. \nBelow I compiled an example which demonstrates the problem(in c++11).</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nclass i_gossip;\n\nclass i_have_secrets{\n    friend class i_gossip;\npublic:\n    i_have_secrets();\nprivate:\n    struct secret_t{\n        int secret_number;\n        std::vector&lt;int&gt; secret_vector;\n    }i_am_secret;\n};\n\nclass i_gossip{\npublic:\n    struct i_am_secret : public i_have_secrets::secret_t { };\n};\n\ni_have_secrets::i_have_secrets(){\n    i_am_secret = {0, {0,1,2}}; // Totally fine\n}\n\nint main(int argc,char** args){\n    i_gossip::i_am_secret secret = {0, {0,1,2}}; // Compile error\n    return 0;\n}\n\n</code></pre>\n\n<p>The declaration is fine, but the initialization isn't, it gives the error <code>could not convert {...} from '&lt;brace-enclosed initializer list&gt;' to i_gossip::i_am_secret secret</code>. It is possible to compile the program by adressing and setting each induvidual members of the struct by so: </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>    i_gossip::i_am_secret secret;\n    secret.secret_number = 0;\n    secret.secret_vector = {0,1,2};\n</code></pre>\n\n<p>If the members are available to use, why does an initialization-list fails with a compile error? </p>\n"}]