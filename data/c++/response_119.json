[{"tags": ["c++", "stl", "iterator"], "answers": [{"comments": [{"owner": {"reputation": 19199, "user_id": 1424877, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/8a14e5bb44bbb4c2721ac711bd8a7bcf?s=128&d=identicon&r=PG", "display_name": "Quuxplusone", "link": "https://stackoverflow.com/users/1424877/quuxplusone"}, "edited": false, "score": 0, "creation_date": 1492647057, "post_id": 43507911, "comment_id": 74070684, "body": "Oho, so it&#39;s about equality-comparability. IMHO it&#39;s unfortunate that the current standard concepts tie together the idea of &quot;equality-comparable&quot; and the idea of &quot;input-iterable&quot; \u2014 I think it would be reasonable to have something like <code>class SentineledOstreamIterator</code> that was equality-comparable <code>o1 == o2</code> and assignable <code>*o1 = v</code> but you still weren&#39;t allowed to read from it <code>v = *o1</code>. But okay, with the current concept hierarchy, I get why OutputIterator isn&#39;t constrained enough."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 19199, "user_id": 1424877, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/8a14e5bb44bbb4c2721ac711bd8a7bcf?s=128&d=identicon&r=PG", "display_name": "Quuxplusone", "link": "https://stackoverflow.com/users/1424877/quuxplusone"}, "edited": false, "score": 1, "creation_date": 1492647673, "post_id": 43507911, "comment_id": 74070820, "body": "@Quuxplusone it doesn&#39;t make sense for a general output iterator to be comparable; e.g. imagine if the output iterator is outputting to an <code>ofstream</code> attached to a terminal . What does it mean to compare two of those?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1492648011, "post_id": 43507911, "comment_id": 74070893, "body": "I guess it doesn&#39;t make sense to compare general <code>istream</code> iterators either, although there is the useful case of comparing against the singular iterator (which represents end-of-file or error) in order to read the remainder of the stream; whereas for output there isn&#39;t such a thing as &quot;write until end of file&quot;"}, {"owner": {"reputation": 19199, "user_id": 1424877, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/8a14e5bb44bbb4c2721ac711bd8a7bcf?s=128&d=identicon&r=PG", "display_name": "Quuxplusone", "link": "https://stackoverflow.com/users/1424877/quuxplusone"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1492648610, "post_id": 43507911, "comment_id": 74071021, "body": "@M.M (second comment): exactly! <i>Generally</i> input and output iterators aren&#39;t comparable, but <i>sometimes</i> they can be. For example, the semantics of <code>ostream_iterator::operator==</code> could have been similar to <code>istream_iterator::operator==</code>, namely, return <code>(!x.ready() &amp;&amp; !y.ready()) || (&amp;x == &amp;y)</code> on the underlying streams. Of course this would be useful mainly for programs that want to &quot;write the same byte until you get a disk error or filesystem full&quot;, which is probably an uncommon case. ;)"}], "tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": true, "score": 9, "last_activity_date": 1492645863, "creation_date": 1492645863, "answer_id": 43507911, "question_id": 43507846, "link": "https://stackoverflow.com/questions/43507846/why-does-stdfill-use-forwarditerator-not-outputiterator/43507911#43507911", "title": "Why does std::fill use ForwardIterator, not OutputIterator?", "body": "<p>Output iterators are not comparable. The <code>==</code> and <code>!=</code> operators are not defined for output iterators.</p>\n\n<p>You need a forward iterator, because it</p>\n\n<blockquote>\n  <p>satisfies the requirements of an input iterator</p>\n</blockquote>\n\n<p>which supports <em>EqualityComparable</em>.</p>\n\n<p>With output iterators, <code>std::fill</code> cannot compare <code>first</code> with <code>last</code>:</p>\n\n<pre><code>while (first != last) {\n</code></pre>\n\n<p>Not supported, for output iterators.</p>\n\n<p><code>std::fill_n</code> avoids this comparison, it just uses the counter to write to the iterator, so all it needs is an output iterator.</p>\n"}, {"comments": [{"owner": {"reputation": 19199, "user_id": 1424877, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/8a14e5bb44bbb4c2721ac711bd8a7bcf?s=128&d=identicon&r=PG", "display_name": "Quuxplusone", "link": "https://stackoverflow.com/users/1424877/quuxplusone"}, "edited": false, "score": 0, "creation_date": 1492647218, "post_id": 43508009, "comment_id": 74070719, "body": "I think your edit actually took this answer from &quot;good&quot; to &quot;worse&quot;. <code>std::fill</code> doesn&#39;t attempt to read from its iterator arguments; it <i>does</i> only use <code>*x</code> on the left-hand side of an assignment. So bringing in that factoid motivates my question, but it doesn&#39;t help answer it."}, {"owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "reply_to_user": {"reputation": 19199, "user_id": 1424877, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/8a14e5bb44bbb4c2721ac711bd8a7bcf?s=128&d=identicon&r=PG", "display_name": "Quuxplusone", "link": "https://stackoverflow.com/users/1424877/quuxplusone"}, "edited": false, "score": 0, "creation_date": 1492647822, "post_id": 43508009, "comment_id": 74070857, "body": "Would another quote to contrast that <code>ForwardIterator</code> <i>must</i> be readable to help? I know that <code>fill</code> doesn&#39;t read elements, but it doesn&#39;t matter. It is designed to work over a range of elements. I wasn&#39;t sure if you do not understand the difference betweem the Iterator types, or the technicality which makes your proposed implementation not possible. I addressed the former. The latter was explained in the other answer. Maybe this one is gonna be useful for someone else in the future."}], "tags": [], "owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "is_accepted": false, "score": 0, "last_activity_date": 1492647870, "last_edit_date": 1492647870, "creation_date": 1492646537, "answer_id": 43508009, "question_id": 43507846, "link": "https://stackoverflow.com/questions/43507846/why-does-stdfill-use-forwarditerator-not-outputiterator/43508009#43508009", "title": "Why does std::fill use ForwardIterator, not OutputIterator?", "body": "<p>There is no notion of \"range\" for <code>OutputIterator</code>. Thus you must provide a repetition count. With <code>ForwardIterator</code> you can work over a range of elements.</p>\n\n<p>Those are semantically different things. <code>fill_n</code> is for adding some elements starting from a supplied iterator. <code>fill</code> is for changing a range of elements.</p>\n\n<p>Take inserters (e.g. a <code>back_inserter</code>) for an example. You can insert more elements than there is in the container, so <code>last</code> doesn't even make sense.</p>\n\n<p><code>OutputIterator</code> gives you a place where you can throw in an object. <code>ForwardIterator</code> objects must exists.</p>\n\n<p>From <a href=\"http://en.cppreference.com/w/cpp/concept/OutputIterator\" rel=\"nofollow noreferrer\">cppreference</a>:</p>\n\n<blockquote>\n  <p>The only valid use of operator* with an output iterator is on the left of an assignment: operator* may return a proxy object, which defines a member operator= (which may be a template) </p>\n</blockquote>\n\n<p>This means you basically cannot read from it, which is in the contrast to the <code>ForwardIterator</code>:</p>\n\n<blockquote>\n  <p>A ForwardIterator is an Iterator that can read data from the pointed-to element. </p>\n</blockquote>\n"}], "owner": {"reputation": 19199, "user_id": 1424877, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/8a14e5bb44bbb4c2721ac711bd8a7bcf?s=128&d=identicon&r=PG", "display_name": "Quuxplusone", "link": "https://stackoverflow.com/users/1424877/quuxplusone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 43507911, "answer_count": 2, "score": 4, "last_activity_date": 1492647870, "creation_date": 1492645401, "last_edit_date": 1495540471, "question_id": 43507846, "link": "https://stackoverflow.com/questions/43507846/why-does-stdfill-use-forwarditerator-not-outputiterator", "title": "Why does std::fill use ForwardIterator, not OutputIterator?", "body": "<p>(This question has the same \"question template\" as <a href=\"https://stackoverflow.com/questions/12452356/why-does-stdmax-element-require-a-forwarditerator\">Why does std::max_element require a ForwardIterator?</a> but the answer has to be different, because <code>std::fill</code> doesn't return an iterator into the output sequence.)</p>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/algorithm/fill\" rel=\"nofollow noreferrer\"><code>std::fill</code></a> is defined to work only when the output range is given by a pair of ForwardIterators. However, the superficially similar <a href=\"http://en.cppreference.com/w/cpp/algorithm/fill_n\" rel=\"nofollow noreferrer\"><code>std::fill_n</code></a> works fine with OutputIterator.</p>\n\n<p>Surely the algorithm is simply</p>\n\n<pre><code>template&lt;class OutIt, class T&gt;\nvoid fill(OutIt first, OutIt last, T value)\n{\n    while (first != last) {\n        *first = value;\n        ++first;\n    }\n}\n</code></pre>\n\n<p>What about this algorithm requires ForwardIterator? What am I missing?</p>\n"}, {"tags": ["c++", "qt", "resize", "qt-creator"], "comments": [{"owner": {"reputation": 2418, "user_id": 2505590, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/e5sYJ.jpg?s=128&g=1", "display_name": "baci", "link": "https://stackoverflow.com/users/2505590/baci"}, "edited": false, "score": 0, "creation_date": 1492660931, "post_id": 43507826, "comment_id": 74074187, "body": "check out QSizeGrip"}], "answers": [{"comments": [{"owner": {"reputation": 11885, "user_id": 2257050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VknAq.png?s=128&g=1", "display_name": "thuga", "link": "https://stackoverflow.com/users/2257050/thuga"}, "edited": false, "score": 1, "creation_date": 1492674126, "post_id": 43512707, "comment_id": 74080085, "body": "There is also a convenience function <a href=\"http://doc.qt.io/qt-5/qwidget.html#setFixedWidth\" rel=\"nofollow noreferrer\"><code>QWidget::setFixedWidth</code></a>."}, {"owner": {"reputation": 8601, "user_id": 1485885, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tdPE1.jpg?s=128&g=1", "display_name": "cbuchart", "link": "https://stackoverflow.com/users/1485885/cbuchart"}, "reply_to_user": {"reputation": 11885, "user_id": 2257050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VknAq.png?s=128&g=1", "display_name": "thuga", "link": "https://stackoverflow.com/users/2257050/thuga"}, "edited": false, "score": 0, "creation_date": 1492675651, "post_id": 43512707, "comment_id": 74081018, "body": "Oh! I didn&#39;t know that, nice! Thanks @thuga!"}, {"owner": {"reputation": 8601, "user_id": 1485885, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tdPE1.jpg?s=128&g=1", "display_name": "cbuchart", "link": "https://stackoverflow.com/users/1485885/cbuchart"}, "reply_to_user": {"reputation": 11885, "user_id": 2257050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VknAq.png?s=128&g=1", "display_name": "thuga", "link": "https://stackoverflow.com/users/2257050/thuga"}, "edited": false, "score": 0, "creation_date": 1492675656, "post_id": 43512707, "comment_id": 74081022, "body": "I&#39;ve just remember that if, in the Designer, you right-click on a <code>QWidget</code>, there is a <i>Size constrains</i> submenu that help you with setting minimum or maximum sizes to the current one."}], "tags": [], "owner": {"reputation": 8601, "user_id": 1485885, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tdPE1.jpg?s=128&g=1", "display_name": "cbuchart", "link": "https://stackoverflow.com/users/1485885/cbuchart"}, "is_accepted": true, "score": 1, "last_activity_date": 1492677837, "last_edit_date": 1492677837, "creation_date": 1492672625, "answer_id": 43512707, "question_id": 43507826, "link": "https://stackoverflow.com/questions/43507826/how-to-let-user-vertically-resize-window/43512707#43512707", "title": "How to let user vertically resize window", "body": "<p>By default, if a <code>QWidget</code> is the top-level window you are able to resize it given that the <code>minimumSize</code> and <code>maximumSize</code> are different since they indicate the range of resizing.</p>\n\n<p>If you want to let the user to resize vertically <strong>only</strong>, then you just have to set both <code>minimumWidth</code> and <code>maximumWidth</code> to the same value (probably to the current width of your <code>QWidget</code>). Qt will take care of indicating the underlying windows manager the rest.</p>\n\n<p>You can do it in the Designer or programmatically using the <a href=\"http://doc.qt.io/qt-5/qwidget.html#minimumWidth-prop\" rel=\"nofollow noreferrer\"><code>setMinimumWidth</code></a> and <a href=\"http://doc.qt.io/qt-5/qwidget.html#maximumWidth-prop\" rel=\"nofollow noreferrer\"><code>setMaximumWidth</code></a> methods. <em>Edit</em>: As mentioned in a comment, there is a <a href=\"http://doc.qt.io/qt-5/qwidget.html#setFixedWidth\" rel=\"nofollow noreferrer\"><code>setFixedWidth</code></a> method that simplifies this operation (and make it more explicit in your code).</p>\n\n<p>Of course, you can play with the combinations such as setting a minimum width (or height, or both -minimum size-) to avoid your top-level window to collapse and become unusable, setting a maximum size... One common setting is making <code>minimumSize = maximumSize</code>, so you make the window fixed size (you can use the convenience method <a href=\"http://doc.qt.io/qt-5/qwidget.html#setFixedSize\" rel=\"nofollow noreferrer\"><code>setFixedSize</code></a>).</p>\n\n<p>PS: see that this has nothing to do with the <code>sizePolicy</code>, which simply indicates parent layout which actions can be taken -regarding size- when placing the widget. As a top-level window has no parent layout this policy is simply not used.</p>\n"}], "owner": {"reputation": 6825, "user_id": 1054937, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6b85a31d8e69d0ce9fe80df2ed567969?s=128&d=identicon&r=PG", "display_name": "Jon", "link": "https://stackoverflow.com/users/1054937/jon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 43512707, "answer_count": 1, "score": 1, "last_activity_date": 1492677837, "creation_date": 1492645263, "last_edit_date": 1492676987, "question_id": 43507826, "link": "https://stackoverflow.com/questions/43507826/how-to-let-user-vertically-resize-window", "title": "How to let user vertically resize window", "body": "<p>I want the user to be able to vertically resize the Window but I'm unsure how I would do this. I have selected my root object (View of type <code>QWidget</code>) in Qt Creator but I do not see an option to allow users to vertically resize the object. Does this have to be done through code?</p>\n"}, {"tags": ["c++", "heap", "priority-queue", "binary-heap"], "comments": [{"owner": {"reputation": 786, "user_id": 5764282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4b16fe337d11b30cbdb5a4817727761?s=128&d=identicon&r=PG", "display_name": "Khouri Giordano", "link": "https://stackoverflow.com/users/5764282/khouri-giordano"}, "edited": false, "score": 0, "creation_date": 1492646129, "post_id": 43507784, "comment_id": 74070458, "body": "On which insertion does this assertion fail? Put some printfs in there or follow along in a debugger."}], "answers": [{"tags": [], "owner": {"reputation": 21474, "user_id": 718379, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4810c6c963334e5dce573e6671d746ec?s=128&d=identicon&r=PG", "display_name": "timrau", "link": "https://stackoverflow.com/users/718379/timrau"}, "is_accepted": true, "score": 0, "last_activity_date": 1492646314, "creation_date": 1492646314, "answer_id": 43507976, "question_id": 43507784, "link": "https://stackoverflow.com/questions/43507784/error-adding-multiple-items-to-a-priority-queue-with-a-fixed-size-array/43507976#43507976", "title": "Error Adding Multiple Items to a Priority Queue with a Fixed Size Array", "body": "<pre><code>while(parent_priority(i) &lt; priority)\n</code></pre>\n\n<p>You kept looking for parent even when <code>i == 0</code>. Change it into <code>while (i &gt; 0 &amp;&amp; parent_priority(i) &lt; priority)</code>.</p>\n"}], "owner": {"reputation": 17, "user_id": 6837121, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/351902507d04ecedf52880473c3d774a?s=128&d=identicon&r=PG&f=1", "display_name": "Blankets_McGee", "link": "https://stackoverflow.com/users/6837121/blankets-mcgee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 376, "favorite_count": 0, "accepted_answer_id": 43507976, "answer_count": 1, "score": 0, "last_activity_date": 1492646374, "creation_date": 1492644992, "last_edit_date": 1492646374, "question_id": 43507784, "link": "https://stackoverflow.com/questions/43507784/error-adding-multiple-items-to-a-priority-queue-with-a-fixed-size-array", "title": "Error Adding Multiple Items to a Priority Queue with a Fixed Size Array", "body": "<p>before we get started, yes this is homework.</p>\n\n<p>hopefully I can get some clarification here. I am implementing a priority queue with a fixed size array and have all the functions written and everything compiles but I am having a problem with the option M in the test file. All the other functions work just fine but when I try to <code>add_multiple_items</code> I get an expression error in the assert of the <code>swap_with_parent</code> function. here is my program files. The <code>pqtest2.cpp</code> file:</p>\n\n<pre><code>// FILE: pqtest2.cpp\n// An interactive test program for the Priority Queue class\n#include &lt;cctype&gt;     // Provides toupper\n#include &lt;iostream&gt;  // Provides cout and cin\n#include &lt;cstdlib&gt;    // Provides EXIT_SUCCESS and size_t\n#include \"pqueue2.h\"   // Implemented using a heap\nusing namespace std;\n\n// PROTOTYPES for functions used by this test program:\nvoid print_menu( );\nchar get_user_command( );\nint get_number(const char message[ ]);\nvoid add_multiple_entries(PriorityQueue &amp;q);\n\nint main( )\n{\n    PriorityQueue test;\n    char choice;\n    cout &lt;&lt; \"CSC-161 Lesson Ten Test Program\" &lt;&lt; endl &lt;&lt; endl;\n    do\n{\n    print_menu( );\n    choice = toupper(get_user_command( ));\n    switch (choice)\n    {\n        case 'E':\n            if (test.is_empty( ))\n                cout &lt;&lt; \"The Priority Queue is empty.\" &lt;&lt; endl;\n            else\n                cout &lt;&lt; \"The Priority Queue is not empty.\" &lt;&lt; endl;\n            break;\n        case 'G':\n            if (!test.is_empty( ))\n                cout &lt;&lt; \"Front item is: \" &lt;&lt; test.get_front( ) &lt;&lt; endl;\n            else\n                cout &lt;&lt; \"There is no current item.\" &lt;&lt; endl;\n            break;\n        case 'I':\n            test.insert(get_number(\"Please enter the next item: \"),\n                (unsigned int) get_number(\"The item's priority: \"));\n            break;\n        case 'M':\n            add_multiple_entries(test);\n            break;\n        case 'P':\n            test.print_tree(\"Contents of heap:\");\n            break;\n        case 'S': \n            cout &lt;&lt; \"The size is \" &lt;&lt; test.size( ) &lt;&lt; endl;\n            break;\n        case 'X': \n            if (test.is_empty( ))\n                cout &lt;&lt; \"The Priority Queue is empty.\" &lt;&lt; endl;\n            else\n                while(!test.is_empty())\n                    cout &lt;&lt; \"Value: \" &lt;&lt; test.get_front() &lt;&lt; endl;\n            break;\n        case 'Q': \n            break;\n        default:  \n            cout &lt;&lt; choice &lt;&lt; \" is an invalid choice.\" &lt;&lt; endl;\n    }\n}\nwhile ((choice != 'Q'));\nreturn EXIT_SUCCESS;\n}\n\nvoid print_menu( )\n{\n    cout &lt;&lt; endl; \ncout &lt;&lt; \"The following choices are available: \" &lt;&lt; endl;\ncout &lt;&lt; \" E   Print the result from the is_empty( ) function\" &lt;&lt; endl;\ncout &lt;&lt; \" G   Print the result from the get_front( ) function\" &lt;&lt; endl;\ncout &lt;&lt; \" I   Insert a new item with the insert(...) function\" &lt;&lt; endl;\ncout &lt;&lt; \" M   Add multiple items with varying priorities \" &lt;&lt; endl;\ncout &lt;&lt; \" P   Print the internal heap using the print_tree(...) function\" &lt;&lt; endl;\ncout &lt;&lt; \" S   Print the result from the size( ) function\" &lt;&lt; endl;\ncout &lt;&lt; \" X   Extract and print values in priority order\" &lt;&lt; endl;\ncout &lt;&lt; \" Q   Quit this test program\" &lt;&lt; endl;\n}\n\nchar get_user_command( )\n{\nchar command;\ncout &lt;&lt; \"\\nEnter choice: \";\ncin &gt;&gt; command; \nreturn command;\n}\n\nint get_number(const char message[ ])\n{\nint result;\ncout &lt;&lt; message;\ncin  &gt;&gt; result;\nreturn result;\n}\nvoid add_multiple_entries(PriorityQueue &amp;thisQueue)\n{\nthisQueue.insert(100, 10);\nthisQueue.insert(200, 10);\nthisQueue.insert(300, 5);\nthisQueue.insert(400, 5);\nthisQueue.insert(500, 20);\nthisQueue.insert(600, 20);\nthisQueue.insert(700, 20);\nthisQueue.insert(800, 10);\nthisQueue.insert(900, 10);\nreturn;\n}\n</code></pre>\n\n<p>The <code>pqueue.h</code> file:</p>\n\n<pre><code>// FILE: pqueue2.h\n// CLASS PROVIDED: PriorityQueue (a priority queue of items)\n//\n// TYPEDEF and MEMBER CONSTANT for the PriorityQueue class:\n//   static const size_t CAPACITY = ______\n//     PriorityQueue::CAPACITY is the maximum number of entries that\n//     may be be in the priority queue at any one time.\n//\n//   typedef _____ Item \n//     The type Item is the data type of the items in the Priority Queue.\n//     It may be any of the C++ built-in types (int, char, etc.), or a class \n//     with a default constructor, a copy constructor, and assignment operator.\n//\n// CONSTRUCTOR for the PriorityQueue class:\n//   PriorityQueue( )\n//     Postcondition: The PriorityQueue has been initialized with no Items.\n//\n// MODIFICATION MEMBER FUNCTIONS for the PriorityQueue class:\n//   void insert(const Item&amp; entry, unsigned int priority)\n//     Postcondition: A new copy of entry has been inserted with the specified\n//     priority.\n//\n//   Item get_front( )\n//     Precondition: size( ) &gt; 0.\n//     Postcondition: The highest priority item has been returned and has been\n//     removed from the PriorityQueue. (If several items have equal priority,\n//     then there is no guarantee about which one will come out first!\n//     This differs from our first priority queue.)\n//\n// CONSTANT MEMBER FUNCTIONS for the PriorityQueue class:\n//   size_t size( ) const\n//     Postcondition: Return value is the total number of items in the\n//     PriorityQueue.\n//\n//   bool is_empty( ) const\n//     Postcondition: Return value is true if the PriorityQueue is empty.\n//\n// VALUE SEMANTICS for the PriorityQueue class:\n//   Assignments and the copy constructor may be used with\n//   PriorityQueue objects\n\n#ifndef PQUEUE_H\n#define PQUEUE_H\n#include &lt;cstdlib&gt; // Provides size_t\n\n    class PriorityQueue\n    {\n    public:\n        // TYPEDEF and MEMBER CONSTANT\n        typedef double Item;\n        static const size_t CAPACITY = 5000;\n        // CONSTRUCTOR\n        PriorityQueue( );\n        // MODIFICATION MEMBER FUNCTIONS\n        void insert(const Item&amp; entry, unsigned int priority);\n        Item get_front( );\n        // CONSTANT MEMBER FUNCTIONS\n        size_t size( ) const { return many_items; }\n        bool is_empty( ) const { return (many_items == 0); }\n        // MEMBER FUNCTION FOR DEBUGGING\n        void print_tree(const char message[ ] = \"\", size_t i = 0) const;\n    private:\n        // STRUCT DEFINITION to store information about one item in the pqueue\n        struct OneItemInfo\n        {\n            Item data;\n            unsigned int priority;\n        };\n        // PRIVATE MEMBER VARIABLES\n        OneItemInfo heap[CAPACITY];\n        size_t many_items;\n        // PRIVATE HELPER FUNCTIONS -- see pqueue2.cxx for documentation\n        bool is_leaf(size_t i) const;\n        size_t parent_index(size_t i) const;\n        unsigned int parent_priority(size_t i) const;\n        size_t big_child_index(size_t i) const;\n        unsigned int big_child_priority(size_t i) const;\n        void swap_with_parent(size_t i);\n    };\n\n#endif\n</code></pre>\n\n<p>The <code>pqueue2.cpp</code> file:</p>\n\n<pre><code>// FILE: pqueue2.cpp\n// IMPLEMENTS: PriorityQueue (See pqueue2.h for documentation.)\n// IMPLEMENTED BY: Michael Main (main@colorado.edu)\n// \n//  Alex Chapman ID: S02084651\n//\n//\n// INVARIANT for the PriorityQueue Class:\n//   1. The member variable many_items is the number of items in the\n//      PriorityQueue.\n//   2. The items themselves are stored in the member variable heap,\n//      which is a partially filled array organized to follow the usual\n//      heap storage rules from Chapter 11 of the class notes.\n// NOTE: Private helper functions are implemented at the bottom of this\n// file along with their precondition/postcondition contracts.\n\n#include &lt;cassert&gt;    // Provides assert function\n#include &lt;iostream&gt;  // Provides cin, cout\n#include &lt;iomanip&gt;   // Provides setw\n#include &lt;cmath&gt;      // Provides log2\n#include \"pqueue2.h\"\nusing namespace std;\n\nPriorityQueue::PriorityQueue( )\n{\n    heap[CAPACITY];\n    many_items = 0;\n}\n\nvoid PriorityQueue::insert(const Item&amp; entry, unsigned int priority)\n{\n    if (many_items == 0)\n    {\n        heap[many_items].data = entry;\n        heap[many_items].priority = priority;\n        many_items++;\n    }\n    else\n    {\n        heap[many_items].data = entry;\n        heap[many_items].priority = priority;\n        unsigned int i = many_items;\n        many_items++;\n\n        while(parent_priority(i) &lt; priority)\n        {\n            swap_with_parent(i);\n            i = parent_index(i);\n        }\n    }\n}\n\nPriorityQueue::Item PriorityQueue::get_front( )\n{\n    assert(many_items &gt; 0);\n    if (many_items == 1)\n    {\n        Item front_value = heap[0].data;\n        many_items--;\n        return front_value;\n    }\n    else\n    {\n        Item front_value = heap[0].data;\n        heap[0] = heap[many_items - 1];\n        unsigned int priority = heap[many_items - 1].priority;\n        unsigned int k = 0;\n\n        while((k &lt; many_items) &amp;&amp; !is_leaf(k) &amp;&amp; big_child_priority(k) &gt; priority)\n        {\n            unsigned int j = big_child_index(k);\n            swap_with_parent(big_child_index(k));\n            k = j;\n        }\n        many_items--;\n        return front_value;\n    }\n}\n\nbool PriorityQueue::is_leaf(size_t i) const\n// Precondition: (i &lt; many_items)\n// Postcondition: If heap[i] has no children in the heap, then the function\n// returns true. Otherwise the function returns false.\n{\n    if (2 * i + 1 &gt;= many_items)\n    {\n        return 1;\n    }\n    else\n    {\n        return 0;\n    }\n}\n\nsize_t PriorityQueue::parent_index(size_t i) const\n// Precondition: (i &gt; 0) &amp;&amp; (i &lt; many_items)\n// Postcondition: The return value is the index of the parent of heap[i].\n{\n    return (i - 1) / 2;\n}\n\nunsigned int PriorityQueue::parent_priority(size_t i) const\n// Precondition: (i &gt; 0) &amp;&amp; (i &lt; many_items)\n// Postcondition: The return value is the priority of the parent of heap[i].\n{\n    return heap[(i - 1) / 2].priority;\n}\n\nsize_t PriorityQueue::big_child_index(size_t i) const\n// Precondition: !is_leaf(i)\n// Postcondition: The return value is the index of one of heap[i]'s children.\n// This is the child with the larger priority.\n{\n    assert(!is_leaf(i));\n\n    if ((2 * i) + 2 &lt; many_items)\n    {\n        if (heap[(2 * i) + 1].priority &gt; heap[(2 * i) + 2].priority)\n        {\n            return (2 * i) + 1;\n        }\n        else\n        {\n            return (2 * i) + 2;\n        }\n    }\n    else\n    {\n        return (2 * i) + 1;\n    }\n}\n\nunsigned int PriorityQueue::big_child_priority(size_t i) const\n// Precondition: !is_leaf(i)\n// Postcondition: The return value heap[big_child_index(i)].priority\n{\n    return heap[big_child_index(i)].priority;\n}\n\nvoid PriorityQueue::swap_with_parent(size_t i)\n// Precondition: (i &gt; 0) &amp;&amp; (i &lt; many_items)\n// Postcondition: heap[i] has been swapped with heap[parent_index(i)]\n{\n    assert (i&gt;0 &amp;&amp; i&lt; many_items);\n    OneItemInfo temp_parent = heap[parent_index(i)];\n    OneItemInfo temp_child = heap[i];\n    heap[i] = temp_parent;\n    heap[parent_index(i)] = temp_child;\n}\n\nvoid PriorityQueue::print_tree(const char message[ ], size_t i) const\n// Postcondition: If the message is non-empty, then that has been written\n// to cout. After the message, the portion of the heap with root at node\n// node i has been written to the screen. Each node's data is indented\n// 4*d, where d is the depth of the node.\n// NOTE: The default argument for message is the empty string, and the\n// default argument for i is zero. For example, to print the entire\n// tree of a PriorityQueue p, with a message of \"The tree:\", you can call:\n//     p.print_tree(\"The tree:\");\n// This call uses i=0, which prints the whole tree.\n{\n    const char NO_MESSAGE[] = \"\";\n    size_t depth;\n\n    if (message[0] != '\\0')\n    {\n        cout &lt;&lt; message &lt;&lt; endl;\n    }\n    if (i &gt; many_items)\n    {\n        cout &lt;&lt; \"No Nodes\" &lt;&lt; endl;\n    }\n    else\n    {\n        depth = int(log(double(i + 1))/log(2.0));\n        cout &lt;&lt; setw(depth * 4) &lt;&lt; \"\";\n        cout &lt;&lt; heap[i].data;\n        cout &lt;&lt; \" (priority \" &lt;&lt; heap[i].priority &lt;&lt; \")\" &lt;&lt; endl;\n\n        if (2 * i + 1 &lt; many_items)\n        {\n            print_tree(NO_MESSAGE, 2 * i + 1);\n        }\n        if (2 * i + 2 &lt; many_items)\n        {\n            print_tree(NO_MESSAGE, 2 * i + 2);\n        }\n    }\n}\n</code></pre>\n\n<p>Also I have attached the error pic.</p>\n\n<p><a href=\"https://i.stack.imgur.com/bkqCA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bkqCA.png\" alt=\"This is the original output when you first start the program\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/NmkCv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NmkCv.png\" alt=\"Here is the error I get when I try option M\"></a></p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 8, "creation_date": 1492644503, "post_id": 43507697, "comment_id": 74070016, "body": "<code>sizeof</code> can be evaluated at compile time while <code>string.size()</code> cannot."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 8, "creation_date": 1492644545, "post_id": 43507697, "comment_id": 74070029, "body": "There&#39;s an important difference between a <code>const</code> variable and a constant expression."}, {"owner": {"reputation": 2469, "user_id": 778117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cw2EQ.jpg?s=128&g=1", "display_name": "Fatih BAKIR", "link": "https://stackoverflow.com/users/778117/fatih-bakir"}, "edited": false, "score": 0, "creation_date": 1492644583, "post_id": 43507697, "comment_id": 74070042, "body": "<code>const</code> is not <code>constexpr</code>. If your compiler can figure a <code>const</code> is a constant expression, as with the <code>sizeof</code>, it might let you use it as a <code>constexpr</code> variable, but not if you throw in a runtime-only expression such as <code>saveAs.size()</code>"}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1492644904, "post_id": 43507697, "comment_id": 74070157, "body": "Perhaps a <code>std::vector</code> might help you? Or something like: <code>string message(&quot;NOTE| sent get request to: &quot;); message.append(saveAs); _cRec-&gt;output(message.c_str());</code> (assuming <code>_cRec-&gt;output()</code> doesn&#39;t modify the passed in string)."}, {"owner": {"reputation": 12557, "user_id": 1270789, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FXwoB.png?s=128&g=1", "display_name": "Ken Y-N", "link": "https://stackoverflow.com/users/1270789/ken-y-n"}, "edited": false, "score": 1, "creation_date": 1492644923, "post_id": 43507697, "comment_id": 74070162, "body": "Since you&#39;re using C++, a <code>std::string</code> would be much more appropriate here."}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1492645999, "post_id": 43507697, "comment_id": 74070426, "body": "Or if you want to get a little code-golfy: <code>_cRec-&gt;output(string(&quot;NOTE| sent get request to: &quot;).append(saveAs).c_str());</code>"}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 1, "creation_date": 1492646688, "post_id": 43507697, "comment_id": 74070586, "body": "My point is that manually managing string buffer sizes is where bugs live - let the C++ <code>string</code> class deal with that crap to the maximum extent possible.  For example, why did you add <code>10</code> to <code>msgSize</code>?  Just to make extra sure that there was enough space for the message? Or does `output() actually write past the end of the passed in string?"}, {"owner": {"reputation": 41, "user_id": 4056802, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/2DPdn.jpg?s=128&g=1", "display_name": "Bolian", "link": "https://stackoverflow.com/users/4056802/bolian"}, "edited": false, "score": 0, "creation_date": 1492647191, "post_id": 43507697, "comment_id": 74070713, "body": "added 10 to make sure it would be null terminated. Since for somereason it returns a wrong value on really long strings. Actually i have no idea why i didnt just use a regular string."}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1492648507, "post_id": 43507697, "comment_id": 74071001, "body": "&quot;for some reason it returns a wrong value on really long strings&quot;: I&#39;m not sure exactly what you mean by &quot;it&quot; (<code>saveAs.size()</code> or <code>sizeof()</code> or ???) but that sounds very weird. You might consider posting a question specifically about that problem."}, {"owner": {"reputation": 41, "user_id": 4056802, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/2DPdn.jpg?s=128&g=1", "display_name": "Bolian", "link": "https://stackoverflow.com/users/4056802/bolian"}, "edited": false, "score": 0, "creation_date": 1492773807, "post_id": 43507697, "comment_id": 74134692, "body": "I cant remember which it was. I solved it. I shouldn&#39;t say &quot;it returns wrong value&quot; i guess. Since it&#39;s returning the value it should haha. Altho i&#39;m after another value, i just got the two functions mixed up."}], "answers": [{"tags": [], "owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "is_accepted": false, "score": 0, "last_activity_date": 1492645000, "last_edit_date": 1492645000, "creation_date": 1492644905, "answer_id": 43507778, "question_id": 43507697, "link": "https://stackoverflow.com/questions/43507697/c-create-an-array-with-stringsize/43507778#43507778", "title": "c++ create an array with string::size", "body": "<p>You would have to make your array dynamic.\nThe size of the string is not known at <em>compile</em> time, but only at run time.</p>\n\n<p>Also, your listing is not a minimal compilable example. I can only assume <code>saveAs</code> is an std::string.</p>\n\n<p>The following would work:</p>\n\n<pre><code>int main()\n   {\n        std::string myString(\"My string\");\n        char * myCStyleString = new char[myString.size()];\n\n        delete[] myCStyleString;\n   }\n</code></pre>\n\n<p>because we are <em>dynamically</em> allocating an array there.</p>\n\n<p>What are you trying to do? It looks like you just want to copy a filename into a message string. Just keep using std::string;</p>\n\n<pre><code>   int main()\n   {\n        std::string myString(\"My string\");\n        std::string message = \"I like beans and rice with: \";\n        message += myString;\n\n        return 0;\n   }\n</code></pre>\n\n<p>but again, I'd need a minimal compilable example to determine your goal.</p>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1495369713, "post_id": 43507788, "comment_id": 75214399, "body": "<i>&quot;Why it is designed this way is beyond me.&quot;</i> How could <code>std::string</code> possibly be <code>constexpr</code> when it involves dynamic allocation at runtime?"}, {"owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1495369914, "post_id": 43507788, "comment_id": 75214466, "body": "Have you read following sentences? There are more implementations, so your statement is not universally true. The question is about design. You give technical detail which is a consequence. Maybe c++ is lacking const-string type?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1495371743, "post_id": 43507788, "comment_id": 75215087, "body": "There are not &quot;more implementations&quot;; SSO exists but it is not possible at compile-time to know whether it will be sufficient or whether further resizing will be required. Supporting that requires either dynamic allocation, or infinite statically-allocated space. As for a const-string type, I&#39;d like to see that; perhaps some thin-ish wrapper around a <code>char[n]</code>. It would be very limited, though."}], "tags": [], "owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "is_accepted": true, "score": 1, "last_activity_date": 1492645443, "last_edit_date": 1492645443, "creation_date": 1492645007, "answer_id": 43507788, "question_id": 43507697, "link": "https://stackoverflow.com/questions/43507697/c-create-an-array-with-stringsize/43507788#43507788", "title": "c++ create an array with string::size", "body": "<p>Well <code>const</code> just means that you promise that the value won't change. And you can even override that with a <code>const_cast</code>.</p>\n\n<p>What compiler needs there is a value that can be evaluated at the compile time. This is a stronger requirement. Such values are marked with <code>constexpr</code> keyword.</p>\n\n<p>Unfortunately you are out of luck with <code>std::string</code>... <code>size()</code> is not a <code>constexpr</code>.</p>\n\n<p>I played with the <a href=\"http://coliru.stacked-crooked.com/a/dac243b31b7d5cd6\" rel=\"nofollow noreferrer\"><code>following example</code></a>:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nconst string msg(\"Some msg\");\nconstexpr int msg_len = msg.size();\n\nint main() {\n\n    char msg[msg_len];\n\n    cout &lt;&lt; sizeof(msg);\n    return 0;\n}\n</code></pre>\n\n<p>The thing is that <code>size()</code> is not a <code>constexpr</code>, and you cannot make <code>string</code> a <code>constexpr</code> because it has a non-trivial destructor.</p>\n\n<p>Why it is designed this way is beyond me. Seems like a counter intuitive and serious limitation. However, there are pretty clever implementation of <code>string</code>, for example with small storage optimization. It might be hard to make them <code>constexpr</code> with out serious changes in the implementation.</p>\n"}, {"tags": [], "owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "is_accepted": false, "score": 0, "last_activity_date": 1492646526, "last_edit_date": 1492646526, "creation_date": 1492645112, "answer_id": 43507804, "question_id": 43507697, "link": "https://stackoverflow.com/questions/43507697/c-create-an-array-with-stringsize/43507804#43507804", "title": "c++ create an array with string::size", "body": "<blockquote>\n  <p>Why am i allowed to make a constant but i'm not allowed to use it to\n  something that needs a const.</p>\n</blockquote>\n\n<p>This is because the \"constant\" expression you have is made up of non constant parts i.e. the size method of the string class. It is not truly constant in terms of having a known value at compile time.</p>\n\n<p>Consider using <code>constexpr</code> variable/function in the future</p>\n\n<blockquote>\n  <p>If the answer is that: \"the size of the string could change\" then the\n  same argument can be made for using sizeof(), but that works.</p>\n</blockquote>\n\n<p>No that same argument cannot be used for sizeof because sizeof does not need it's arguement to be a constant.</p>\n\n<hr>\n\n<p>If you know for a fact that <code>saveAs</code> contains a string with a known size, then perhaps it would be best if you declare that size as a constant and then refer to it in your calculation:</p>\n\n<pre><code>constexpr unsigned int msgSize = \n        SAVEAS_SIZE +\n        sizeof(\"NOTE|  sent get request to: \") + 10;\n</code></pre>\n\n<p>Then this will allow you to do:</p>\n\n<pre><code>char message[msgSize];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "is_accepted": false, "score": 0, "last_activity_date": 1492645395, "creation_date": 1492645395, "answer_id": 43507845, "question_id": 43507697, "link": "https://stackoverflow.com/questions/43507697/c-create-an-array-with-stringsize/43507845#43507845", "title": "c++ create an array with string::size", "body": "<p>In C++ you cannot declare <a href=\"https://en.wikipedia.org/wiki/Variable-length_array\" rel=\"nofollow noreferrer\">VLA</a>s.</p>\n\n<p>When you declare an array, for example:</p>\n\n<pre><code>char message[x];\n</code></pre>\n\n<p>The expression <code>x</code> must to be valuable at <a href=\"https://en.wikipedia.org/wiki/Compile_time\" rel=\"nofollow noreferrer\">compile time</a>, that is its value has to be well-known when the source is compiled.</p>\n\n<p>In you example:</p>\n\n<pre><code>char message[msgSize];\n</code></pre>\n\n<p>The expression (variable) <code>msgSize</code> is not known at compile time, but only at run time. That because the compiler has to know how many bytes reserve in the stack.</p>\n\n<p>Note: the variable <code>msgSize</code> is a <em>constant</em> value. A constant value is <em>not</em> an expression evaluate at compile time. It simply means that its value cannot change once has been assigned.</p>\n\n<p>In C++11 has been introduced the keywork <code>constexpr</code> in order to define an expression which should be evaluate at compile time.</p>\n\n<p>However in your case there is not way to get the size of a dynamic string at compile time. So what you have to do is use dynamic array (dynamic memory).</p>\n\n<pre><code>char* message = new char[msgSize];\n// now you have an array of msgSize lenght\n// ... do stuff...\n// do not forget to release the memory when end\ndelete[] message;\n</code></pre>\n\n<p>Finally, I suggest you to re-elaborate your code because it's likely you don't need a dynamic array of chars, but just a <code>std::string</code>. Indeed you can use overloaded operator <code>+</code> in order to concatenate strings and the method <code>std::string::c_str()</code> to access as <code>const char*</code> for backward compatibility. </p>\n"}, {"tags": [], "owner": {"reputation": 866, "user_id": 7607594, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OyzH_J0Nigs/AAAAAAAAAAI/AAAAAAAAAFg/tWm2BVaSBwY/photo.jpg?sz=128", "display_name": "Jorge Omar Medra", "link": "https://stackoverflow.com/users/7607594/jorge-omar-medra"}, "is_accepted": false, "score": 0, "last_activity_date": 1492651411, "last_edit_date": 1492651411, "creation_date": 1492646165, "answer_id": 43507958, "question_id": 43507697, "link": "https://stackoverflow.com/questions/43507697/c-create-an-array-with-stringsize/43507958#43507958", "title": "c++ create an array with string::size", "body": "<p>You need a <strong>compile-time constant</strong> with <code>char message[msgSize];</code> because this is a local variable which uses <strong>static memory that is allocated in the data segment</strong>, so the compiler needs to calculate the number of bytes required by the code, including the local variables and arrays. </p>\n\n<p>You can use dynamic memory to solve your problem. <strong>The dynamic memory is allocated in the heap</strong>.  In C, you should use <code>malloc()</code>.  In C++, you should use <code>new[]</code> (or better, <code>std::vector</code>, or even <code>std::string</code>).  Then you can specify the memory size using a runtime value in a variable.</p>\n\n<p>So, your code would look more like the follow:</p>\n\n<pre><code>char* message = new char[msgSize]; //Allocated memory\n//Do everything that you need...\ndelete[] message; //Release memory\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>#include &lt;vector&gt;\n\nstd::vector&lt;char&gt; message(msgSize); //Allocated memory\n//Do everything that you need...\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 4056802, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/2DPdn.jpg?s=128&g=1", "display_name": "Bolian", "link": "https://stackoverflow.com/users/4056802/bolian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 573, "favorite_count": 0, "accepted_answer_id": 43507788, "answer_count": 5, "score": 2, "last_activity_date": 1492651411, "creation_date": 1492644318, "question_id": 43507697, "link": "https://stackoverflow.com/questions/43507697/c-create-an-array-with-stringsize", "title": "c++ create an array with string::size", "body": "<p>Im trying to create an array with the string::size member but its complaining at the declaration of \"char message[msgSize]\" that the expression did not evalute to a constant. </p>\n\n<p>However it alows me to declare \"msgSize\".</p>\n\n<p>How can this be? Why am i allowed to make a constant but i'm not allowed to use it to something that needs a const.</p>\n\n<p>If the answer is that: \"the size of the string could change\" then the same argument can be made for using sizeof(), but that works.</p>\n\n<pre><code>const unsigned int msgSize = \n        saveAs.size() +\n        sizeof(\"NOTE|  sent get request to: \") + 10;\n\n    char message[msgSize];\n    memset(message, 0, msgSize);\n    sprintf_s(message, msgSize,\"NOTE| sent get request to: %s\", saveAs.c_str());\n    _cRec-&gt;output(message);\n</code></pre>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1492644095, "post_id": 43507605, "comment_id": 74069906, "body": "See <a href=\"http://stackoverflow.com/q/27960325/241631\">this</a>, probably a duplicate"}], "answers": [{"tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": false, "score": 3, "last_activity_date": 1492644041, "creation_date": 1492644041, "answer_id": 43507659, "question_id": 43507605, "link": "https://stackoverflow.com/questions/43507605/c-map-emplace/43507659#43507659", "title": "C++ map emplace", "body": "<p>The <code>value_type</code> of your <code>map</code> is <code>std::pair&lt;const int, Foo&gt;</code>.  <code>pair</code> does not have a <a href=\"http://en.cppreference.com/w/cpp/utility/pair/pair\" rel=\"nofollow noreferrer\">constructor</a> taking three <code>int</code> arguments.</p>\n\n<p>You can do</p>\n\n<pre><code>m.emplace(1, Foo(2, 3));\n</code></pre>\n\n<p>Or if you really don't want to call a move constructor of <code>Foo</code>,</p>\n\n<pre><code>m.emplace(std::piecewise_construct,\n          std::make_tuple(1),\n          std::make_tuple(2, 3));\n</code></pre>\n"}], "owner": {"reputation": 139, "user_id": 6273750, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5f568f77f1189d0b536c753e0f24aaad?s=128&d=identicon&r=PG&f=1", "display_name": "Amarnath Shanbhag", "link": "https://stackoverflow.com/users/6273750/amarnath-shanbhag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2623, "favorite_count": 0, "closed_date": 1492644142, "answer_count": 1, "score": 0, "last_activity_date": 1492644165, "creation_date": 1492643704, "last_edit_date": 1492644165, "question_id": 43507605, "link": "https://stackoverflow.com/questions/43507605/c-map-emplace", "closed_reason": "Duplicate", "title": "C++ map emplace", "body": "<pre><code>struct Foo {\n    Foo(int a, int b) : a_(a), b_(b) {}\n    int a_;\n    int b_;\n};\n\nint main() \n{\n    vector&lt;Foo&gt; vec;\n    vec.emplace_back(1, 2);\n}\n</code></pre>\n\n<p>The above code compiles since emplace_back constructs the Foo object in place.</p>\n\n<pre><code>int main() \n{\n    map&lt;int, Foo&gt; m;\n    m.emplace(1, 2, 3);\n}\n</code></pre>\n\n<p>The above code does not compile. Why does <code>emplace</code> not construct <code>Foo</code> in place using args <code>2</code> and <code>3</code> ? If <code>Foo</code> constructor has 1 arg, the above style works.</p>\n\n<p>I am using gcc 4.9.2 which is not the latest. Does anyone think the above code would compile in later compilers ?</p>\n"}, {"tags": ["c++", "eclipse", "input", "sdl"], "comments": [{"owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 1, "creation_date": 1492657339, "post_id": 43507504, "comment_id": 74073199, "body": "You don&#39;t seem to have created a window. SDL don&#39;t have buitin full-system input grab functionality (which, for many reasons, might be problemmatic or not-very-possible to implement). For text game keypresses you need to read from stdin (read, getch, ...)."}], "answers": [{"tags": [], "owner": {"reputation": 516, "user_id": 3578397, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/751b0ab3cfc56e56b4077364c041be54?s=128&d=identicon&r=PG&f=1", "display_name": "Pradana Aumars", "link": "https://stackoverflow.com/users/3578397/pradana-aumars"}, "is_accepted": false, "score": 0, "last_activity_date": 1494773383, "creation_date": 1494773383, "answer_id": 43965269, "question_id": 43507504, "link": "https://stackoverflow.com/questions/43507504/sdl-keyboard-inputs-not-triggering/43965269#43965269", "title": "SDL keyboard inputs not triggering", "body": "<p>There are multiple red flags.</p>\n\n<p>Firstly, <code>std::cout</code> does not work with <a href=\"/questions/tagged/sdl\" class=\"post-tag\" title=\"show questions tagged &#39;sdl&#39;\" rel=\"tag\">sdl</a>. The library uses windows, not consoles/terminals. If you want to render text, read an appropriate tutorial.</p>\n\n<p>Secondly, you can't check events if you haven't initialised an event handler. You should have added <code>SDL_Event event;</code> before the <a href=\"/questions/tagged/while\" class=\"post-tag\" title=\"show questions tagged &#39;while&#39;\" rel=\"tag\">while</a> loop.</p>\n\n<p>Thirdly, using a <a href=\"/questions/tagged/class\" class=\"post-tag\" title=\"show questions tagged &#39;class&#39;\" rel=\"tag\">class</a> to handle input is unnecessary, this is more suitable:</p>\n\n<pre><code>bool quit = false;\nSDL_Event event;\n\nwhile (!quit)\n{\n    while (SDL_PollEvent(&amp;event) != 0)\n    {\n        if (event.type == SDL_QUIT)\n        {\n            quit = true;\n        }\n\n         // Add if blocks, switch statements, and what have you\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 167, "user_id": 7691845, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/hcnFD.png?s=128&g=1", "display_name": "Starfruit", "link": "https://stackoverflow.com/users/7691845/starfruit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 416, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1494773383, "creation_date": 1492643074, "question_id": 43507504, "link": "https://stackoverflow.com/questions/43507504/sdl-keyboard-inputs-not-triggering", "title": "SDL keyboard inputs not triggering", "body": "<p>I am trying to make a simple text game, but I have come across an odd problem. I have a class set up to take inputs from the user's keyboard using SDL_KEYDOWN. When ever the function <code>check_event()</code> is called it runs a loop that polls keyboard input and returns a string for the button. The odd thing is that pressing down on the keys have no effect. The code stops for my while loop, but it seems like my function has no effect at all.</p>\n\n<p>Here is my main code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;SDL.h&gt;\n#include \"SDL_ttf.h\"\n#include \"input.h\"\n\n\nusing namespace std;\n\nInput input;\n\nint main(int argc, char* argv[]) {\n     if (SDL_Init(SDL_INIT_VIDEO|SDL_INIT_AUDIO) != 0) {\n            SDL_Log(\"Unable to initialize SDL: %s\", SDL_GetError());\n            return 1;\n        }\n\n     cout &lt;&lt; \"Welcome to Hero V1.0!\" &lt;&lt; endl; //intro stuff\n     cout &lt;&lt; \"Written By: Jojo\" &lt;&lt; endl;\n     cout &lt;&lt; endl;\n\n     cout &lt;&lt; \"1) New Game\" &lt;&lt; endl;\n     cout &lt;&lt; \"2) Continue Game\" &lt;&lt; endl;\n\n\n     while (true) {\n         string event = input.check_event();\n         if(event == \"1\"){\n             cout &lt;&lt; \"Test\" &lt;&lt; flush;\n         }\n     }\n\n    SDL_Quit();\n    return 0;\n}\n</code></pre>\n\n<p>And here is my input class .cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;SDL.h&gt;\n#include \"Input.h\"\nusing namespace std;\nstring Input::check_event() {\n    while (SDL_PollEvent(&amp;event)) {\n            if(event.type == SDL_KEYDOWN){\n                switch(event.key.keysym.sym){\n                case SDLK_1:\n                    return \"1\";\n                }\n            }\n        }\n        return \"null\";\n    }\n</code></pre>\n\n<p>Any help is greatly appreciated.</p>\n"}, {"tags": ["c++", "oop", "delete-operator"], "comments": [{"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 1, "creation_date": 1492642791, "post_id": 43507425, "comment_id": 74069500, "body": "Where is <code>property</code> even declared? Also, you only use <code>delete</code> to free things created with <code>new</code>. <code>p</code> in <code>main()</code> is stack-allocated, so <code>Demo::~Demo()</code> is effectively deleting a stack-allocated object, which is undefined behavior."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1492642823, "post_id": 43507425, "comment_id": 74069511, "body": "Besides the fact that this doesn&#39;t even compile (<code>property</code> doesn&#39;t exist), there are so many misconceptions here I don&#39;t even know where to begin. Why are you using dynamic allocation in the first place, pray tell?"}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1492642929, "post_id": 43507425, "comment_id": 74069548, "body": "You&#39;re violating the <a href=\"https://en.wikipedia.org/wiki/Rule_of_three_(C%2B%2B_programming)\" rel=\"nofollow noreferrer\">rule of 3</a>, and you&#39;re trying to delete an object that wasn&#39;t allocated with <code>new</code>."}, {"owner": {"reputation": 11, "user_id": 2430513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc0b1af5786de12654817802eec420f1?s=128&d=identicon&r=PG", "display_name": "Noah K", "link": "https://stackoverflow.com/users/2430513/noah-k"}, "edited": false, "score": 0, "creation_date": 1492643135, "post_id": 43507425, "comment_id": 74069613, "body": "I realized that I forgot the protected Property *property;"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1492643260, "post_id": 43507425, "comment_id": 74069654, "body": "You aren&#39;t allowed to <code>delete</code> objects that weren&#39;t created with <code>new</code>. That explains the crash."}], "answers": [{"tags": [], "owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "is_accepted": false, "score": 5, "last_activity_date": 1492643622, "last_edit_date": 1492643622, "creation_date": 1492643096, "answer_id": 43507508, "question_id": 43507425, "link": "https://stackoverflow.com/questions/43507425/c-how-to-delete-a-default-object-member-which-is-a-pointer/43507508#43507508", "title": "C++ How to delete a default object member which is a pointer", "body": "<p>You pass address of object not created by <code>new</code> and then try to <code>delete</code> it. This is undefined behaviour. </p>\n\n<p>The most probable crash course explantion is that standard library also frees <code>Property p</code>. You free it first, then at the end of the program it again frees <code>p</code>.</p>\n\n<p>The possible \"fix\" is to pass an object that is allowed to be deleted, i.e. created by <code>new</code>.</p>\n\n<pre><code>int main(){\n    Property *p = new Property();\n    Demo * d = new Demo();\n\n    d-&gt;setProperty(p); // Demo is responsible for freeing `p`.\n\n    delete d;\n} // standard libraries do clean up objects from `main` here\n</code></pre>\n\n<p>Please note that there are better and cleaner ways of implementing what you are trying to do. This answer just explains the crash.</p>\n\n<p>You should see this, that is pretty hard with this desing to chose whether you should free or not. So your code depends on parameter origin. That should be a red-flag for design.</p>\n"}, {"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 3, "last_activity_date": 1492644333, "creation_date": 1492644333, "answer_id": 43507698, "question_id": 43507425, "link": "https://stackoverflow.com/questions/43507425/c-how-to-delete-a-default-object-member-which-is-a-pointer/43507698#43507698", "title": "C++ How to delete a default object member which is a pointer", "body": "<p>Eliminate all memory management woes by using the appropriate tools provided by the standard library.</p>\n\n<pre><code>#include &lt;memory&gt;\n\nclass Property{ };\n\n\nclass Demo{\n    protected:\n            std::unique_ptr&lt;Property&gt; property;\n    public:\n            Demo()\n            : property { new Property() }\n            { }\n\n            void setProperty(std::unique_ptr&lt;Property&gt; p){\n                property = std::move(p);\n            };\n\n    // un-necessary\n    //        ~Demo(){\n    //                delete property;\n    //        };\n};\n\nint main(){\n    auto p = std::unique_ptr&lt;Property&gt;(new Property);  // or in c++14: = std::make_unique&lt;Property&gt;();\n    auto d = std::unique_ptr&lt;Demo&gt;(new Demo); // or in c++14: = std::make_unique&lt;Demo&gt;();\n\n    d-&gt;setProperty(std::move(p));\n\n    // no longer necessary\n    // delete d;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 2430513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc0b1af5786de12654817802eec420f1?s=128&d=identicon&r=PG", "display_name": "Noah K", "link": "https://stackoverflow.com/users/2430513/noah-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 883, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1492644333, "creation_date": 1492642588, "last_edit_date": 1492643044, "question_id": 43507425, "link": "https://stackoverflow.com/questions/43507425/c-how-to-delete-a-default-object-member-which-is-a-pointer", "title": "C++ How to delete a default object member which is a pointer", "body": "<p>I have a type which has as a member a pointer to another object. When the object (Demo) is created, it initializes the other object (Property) in the constructor. I figure if I have a lot of these objects, I wouldn't want to waste heap space when I change property to something differently, so I free the initialized memory in <code>setProperty</code>, then in the Demo's deconstrucor I delete it again, since it will have been set to something different by that point. However, this causes the code to crash. Why does it crash if I'm reassigning <code>property</code> when it is reset?  </p>\n\n<pre><code>class Property{ };\n\n\nclass Demo{\n    protected:\n            Property *property;\n    public:\n            Demo(){ property = new Property();};\n\n            void setProperty(Property *p){\n                    delete property;\n                    property = p;\n            };\n\n            ~Demo(){\n                    delete property;\n            };\n};\n\nint main(){\n    Property p = Property();\n    Demo * d = new Demo();\n\n    d-&gt;setProperty(&amp;p);\n\n    delete d;\n}\n</code></pre>\n"}, {"tags": ["c++", "decoding", "ms-media-foundation", "mov", "interlacing"], "comments": [{"owner": {"reputation": 1778, "user_id": 2440728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fWyQ.jpg?s=128&g=1", "display_name": "VuVirt", "link": "https://stackoverflow.com/users/2440728/vuvirt"}, "edited": false, "score": 1, "creation_date": 1492679099, "post_id": 43507393, "comment_id": 74083245, "body": "Maybe you should try to call GetNativeMediaType first instead of m_pReader-&gt;GetCurrentMediaType(MF_SOURCE_READER_FIRST_VIDEO_&zwnj;&#8203;STREAM, &amp;pFileVideoMediaType);. Did you also check if each sample is interlaced: pSample-&gt;GetUINT32(MFSampleExtension_Interlaced, &amp;isSampleInterlaced);"}, {"owner": {"reputation": 1778, "user_id": 2440728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fWyQ.jpg?s=128&g=1", "display_name": "VuVirt", "link": "https://stackoverflow.com/users/2440728/vuvirt"}, "edited": false, "score": 1, "creation_date": 1492679570, "post_id": 43507393, "comment_id": 74083590, "body": "You can check the ConfigureDecoder function here: <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd389281(v=vs.85).aspx#setting_output_formats\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>. You can also check for MF_SOURCE_READERF_CURRENTMEDIATYPECHANGED  in the receives status flags when calling ReadSample, to see if the type has been changed."}, {"owner": {"reputation": 787, "user_id": 3419885, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100001500229007/picture?type=large", "display_name": "mbaros", "link": "https://stackoverflow.com/users/3419885/mbaros"}, "reply_to_user": {"reputation": 1778, "user_id": 2440728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fWyQ.jpg?s=128&g=1", "display_name": "VuVirt", "link": "https://stackoverflow.com/users/2440728/vuvirt"}, "edited": false, "score": 0, "creation_date": 1492693301, "post_id": 43507393, "comment_id": 74093865, "body": "@VuVirt, thanks for your comments.  Getting native media type did not change anything. Checking a sample for interlacing ended up with an error. And there was no media type change. Is there something else in your mind? In  case you can find couple of minutes to look at my code : <a href=\"https://github.com/mbaros100/Media-Foundation-video-decoder\" rel=\"nofollow noreferrer\">github.com/mbaros100/Media-Foundation-video-decoder</a>. Thank you very much for your help."}, {"owner": {"reputation": 1778, "user_id": 2440728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fWyQ.jpg?s=128&g=1", "display_name": "VuVirt", "link": "https://stackoverflow.com/users/2440728/vuvirt"}, "edited": false, "score": 0, "creation_date": 1492694086, "post_id": 43507393, "comment_id": 74094510, "body": "try without pTypeUncomp-&gt;CopyAllItems. Just build the uncompressed video media type manually by using all the neccessary attributes, as shown in this link: <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ff485865(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}, {"owner": {"reputation": 787, "user_id": 3419885, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100001500229007/picture?type=large", "display_name": "mbaros", "link": "https://stackoverflow.com/users/3419885/mbaros"}, "reply_to_user": {"reputation": 1778, "user_id": 2440728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fWyQ.jpg?s=128&g=1", "display_name": "VuVirt", "link": "https://stackoverflow.com/users/2440728/vuvirt"}, "edited": false, "score": 0, "creation_date": 1492698094, "post_id": 43507393, "comment_id": 74097796, "body": "@VuVirt, I have followed the link you sent me and did as it says. No any positive change. I have updated the code in the repo."}, {"owner": {"reputation": 1778, "user_id": 2440728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fWyQ.jpg?s=128&g=1", "display_name": "VuVirt", "link": "https://stackoverflow.com/users/2440728/vuvirt"}, "edited": false, "score": 1, "creation_date": 1492701037, "post_id": 43507393, "comment_id": 74100240, "body": "You shouldn&#39;t set MFVideoFormat_Base for the subtype. Try with MFVideoFormat_RGB32."}], "answers": [{"comments": [{"owner": {"reputation": 787, "user_id": 3419885, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100001500229007/picture?type=large", "display_name": "mbaros", "link": "https://stackoverflow.com/users/3419885/mbaros"}, "edited": false, "score": 1, "creation_date": 1492727384, "post_id": 43524762, "comment_id": 74114421, "body": "Worked for me. Thank you very much."}, {"owner": {"reputation": 787, "user_id": 3419885, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100001500229007/picture?type=large", "display_name": "mbaros", "link": "https://stackoverflow.com/users/3419885/mbaros"}, "edited": false, "score": 0, "creation_date": 1492810968, "post_id": 43524762, "comment_id": 74157060, "body": "let me ask you one more question. For some files I have got that buffersize exactly matching image height<i>width*4 and the data was correct. For some other files I got the buffer size bigger than the height</i>width*4. Do you know what is this additional data standing for ?"}, {"owner": {"reputation": 787, "user_id": 3419885, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100001500229007/picture?type=large", "display_name": "mbaros", "link": "https://stackoverflow.com/users/3419885/mbaros"}, "edited": false, "score": 0, "creation_date": 1492815896, "post_id": 43524762, "comment_id": 74158727, "body": "VuVirt, I saw your answer to <a href=\"http://stackoverflow.com/questions/43014780/extarct-rgb32-byte-data-from-imfsample/43027190#43027190\" title=\"extarct rgb32 byte data from imfsample\">stackoverflow.com/questions/43014780/&hellip;</a>, which is very nice. I tried to lock my IMFSample to 2D data as you said, but I ended up with an error. Can you also please share a piece of code that show how to correctly lock and access sample data with 2D? Thanks in advance"}, {"owner": {"reputation": 1778, "user_id": 2440728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fWyQ.jpg?s=128&g=1", "display_name": "VuVirt", "link": "https://stackoverflow.com/users/2440728/vuvirt"}, "reply_to_user": {"reputation": 787, "user_id": 3419885, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100001500229007/picture?type=large", "display_name": "mbaros", "link": "https://stackoverflow.com/users/3419885/mbaros"}, "edited": false, "score": 1, "creation_date": 1492848045, "post_id": 43524762, "comment_id": 74165033, "body": "@mbaros What error? Some samples do not expose IMF2DBuffer. You might need to lock IMFMediaBuffer directly in this case. Or query for D3D texture. Follow the links in the other answer, there is enough source code and explanations to start with. As for the bigger width, it is called stride: <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa473780(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>. Thanks!"}, {"owner": {"reputation": 787, "user_id": 3419885, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100001500229007/picture?type=large", "display_name": "mbaros", "link": "https://stackoverflow.com/users/3419885/mbaros"}, "edited": false, "score": 0, "creation_date": 1492980571, "post_id": 43524762, "comment_id": 74202900, "body": "VuVirt look. Most probably it&#39;s the case that samples do not expose IMF2DBuffer. I do use IMFMediaBuffer. I have tested 3 media files. In all cases stride = width*4. The issue is that for some cases sample buffer length is more that h<i>w*4. And taking first h</i>w*4 bytes of data gives wrong output image. Whenever my buffer length is h*w*4 the data is correct."}, {"owner": {"reputation": 1778, "user_id": 2440728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fWyQ.jpg?s=128&g=1", "display_name": "VuVirt", "link": "https://stackoverflow.com/users/2440728/vuvirt"}, "reply_to_user": {"reputation": 787, "user_id": 3419885, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100001500229007/picture?type=large", "display_name": "mbaros", "link": "https://stackoverflow.com/users/3419885/mbaros"}, "edited": false, "score": 0, "creation_date": 1493018017, "post_id": 43524762, "comment_id": 74212951, "body": "You should use the stride obtained by the Lock call and iterate the image line by line by incrementing stride bytes on each iteration."}, {"owner": {"reputation": 14452, "user_id": 147511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/ko7iJ.jpg?s=128&g=1", "display_name": "Glenn Slayden", "link": "https://stackoverflow.com/users/147511/glenn-slayden"}, "edited": false, "score": 0, "creation_date": 1501887546, "post_id": 43524762, "comment_id": 77994386, "body": "If you&#39;re using <code>IMFMediaSession</code> for playback in <b>Direct3D11/DXGI</b> mode, then by default your <code>IMFMediaSink</code> won&#39;t see the full range of deinterlacing and color formats. Fortunately, it&#39;s trivial to remedy this by simply setting <code>MF_TOPOLOGY_ENABLE_XVP_FOR_PLAYBACK</code> to <code>UINT32&#47;TRUE</code> on your <code>IMFTopology</code>. Presto, the pipeline will include the <code>XVP</code> processor MFT to do color-conversion, deinterlacing, etc., and your <code>IMFMediaSink</code> will be presented with many more options during format negotiation."}, {"owner": {"reputation": 14452, "user_id": 147511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/ko7iJ.jpg?s=128&g=1", "display_name": "Glenn Slayden", "link": "https://stackoverflow.com/users/147511/glenn-slayden"}, "edited": false, "score": 0, "creation_date": 1501891871, "post_id": 43524762, "comment_id": 77995271, "body": "Oh, and by the way, <code>MF_TOPOLOGY_ENABLE_XVP_FOR_PLAYBACK</code> doesn&#39;t seem to be documented anywhere. I&#39;m posting this note here in case it helps anyone, since it took me forever and a hideous struggle before  stumbling upon such an easy fix. For example, the Microsoft D3D11 <code>IMFMediaSink</code> sample--by demonstrating the explicit manual hook-up and calling of external XVP--would lead you to believe that when the D3D9 <code>EVR</code> model was abandoned in D3D11, the <code>IMFMediaSink</code> had to take on the burden of those chores.Not entirely so, apparently."}], "tags": [], "owner": {"reputation": 1778, "user_id": 2440728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fWyQ.jpg?s=128&g=1", "display_name": "VuVirt", "link": "https://stackoverflow.com/users/2440728/vuvirt"}, "is_accepted": true, "score": 3, "last_activity_date": 1598888384, "last_edit_date": 1598888384, "creation_date": 1492704831, "answer_id": 43524762, "question_id": 43507393, "link": "https://stackoverflow.com/questions/43507393/media-foundation-set-video-interlacing-and-decode/43524762#43524762", "title": "Media Foundation set video interlacing and decode", "body": "<p>In order to make SourceReader convert the samples to RGB you need to create it like this:</p>\n<pre><code>IMFAttributes* pAttr = NULL;\nMFCreateAttributes(&amp;pAttr, 1);\npAttr-&gt;SetUINT32(MF_READWRITE_ENABLE_HARDWARE_TRANSFORMS, TRUE);\npAttr-&gt;SetUINT32(MF_SOURCE_READER_ENABLE_VIDEO_PROCESSING, TRUE);\n    \nIMFSourceReader* m_pReader;\nthrowIfFailed(MFCreateSourceReaderFromURL(filePath, pAttr, &amp;m_pReader), Can't create source reader from url&quot;);\npAttr-&gt;Release();\n</code></pre>\n<p>Later, you shouldn't break from the cycle when MF_SOURCE_READERF_CURRENTMEDIATYPECHANGED occurs. Now you'll have all samples with the same size.\nOtherwise you can use MFVideoFormat_NV12 subtype and then you won't need to specify MF_SOURCE_READER_ENABLE_VIDEO_PROCESSING attribute when creating the reader.</p>\n"}], "owner": {"reputation": 787, "user_id": 3419885, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100001500229007/picture?type=large", "display_name": "mbaros", "link": "https://stackoverflow.com/users/3419885/mbaros"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 847, "favorite_count": 1, "accepted_answer_id": 43524762, "answer_count": 1, "score": 3, "last_activity_date": 1598888384, "creation_date": 1492642387, "last_edit_date": 1495542852, "question_id": 43507393, "link": "https://stackoverflow.com/questions/43507393/media-foundation-set-video-interlacing-and-decode", "title": "Media Foundation set video interlacing and decode", "body": "<p>I have an MOV file and I want to decode it and have all frames as separate images.</p>\n\n<p>So I try to configure an uncompressed media type in the following way:</p>\n\n<pre><code>// configure the source reader\nIMFSourceReader* m_pReader;\nMFCreateSourceReaderFromURL(filePath, NULL, &amp;m_pReader);\n\n// get the compressed media type\nIMFMediaType* pFileVideoMediaType;\nm_pReader-&gt;GetCurrentMediaType(MF_SOURCE_READER_FIRST_VIDEO_STREAM, &amp;pFileVideoMediaType);\n\n// create new media type for uncompressed type\nIMFMediaType* pTypeUncomp;\nMFCreateMediaType(&amp;pTypeUncomp);\n\n// copy all settings from compressed to uncompressed type\npFileVideoMediaType-&gt;CopyAllItems(pTypeUncomp);\n\n// set the uncompressed video attributes\npTypeUncomp-&gt;SetGUID(MF_MT_SUBTYPE, MFVideoFormat_RGB8);\npTypeUncomp-&gt;SetUINT32(MF_MT_ALL_SAMPLES_INDEPENDENT, TRUE);\npTypeUncomp-&gt;SetUINT32(MF_MT_INTERLACE_MODE, MFVideoInterlace_Progressive);\n\n// set the new uncompressed type to source reader\nm_pReader-&gt;SetCurrentMediaType(MF_SOURCE_READER_FIRST_VIDEO_STREAM, 0, pTypeUncomp);\n\n// get the full uncompressed media type\nm_pReader-&gt;GetCurrentMediaType(MF_SOURCE_READER_FIRST_VIDEO_STREAM, &amp;pTypeUncomp);\n</code></pre>\n\n<p>I noticed that even I explicitly set the <code>MF_MT_INTERLACE_MODE</code> to <code>MFVideoInterlace_Progressive</code> the final configuration is still configured with the old mode <code>MFVideoInterlace_MixedInterlaceOrProgressive</code>.</p>\n\n<p>Afterwards, I loop through all samples and look at their size:</p>\n\n<pre><code>IMFSample* videoSample = nullptr;\nIMFMediaBuffer* mbuffer = nullptr;\nLONGLONG llTimeStamp;\nDWORD streamIndex, flags;\n\nm_pReader-&gt;ReadSample(\n            MF_SOURCE_READER_FIRST_VIDEO_STREAM,\n            0,                               // Flags.\n            &amp;streamIndex,                    // Receives the actual stream index. \n            &amp;flags,                          // Receives status flags.\n            &amp;llTimeStamp,                    // Receives the time stamp.\n            &amp;videoSample)                    // Receives the sample or NULL.\n\nvideoSample-&gt;ConvertToContiguousBuffer(&amp;mbuffer);\n\nBYTE* videoData = nullptr;\nDWORD sampleBufferLength = 0;\n\nmbuffer-&gt;Lock(&amp;videoData, nullptr, &amp;sampleBufferLength);\ncout &lt;&lt; sampleBufferLength &lt;&lt; endl;\n</code></pre>\n\n<p>And I get quite different sizes for the samples: from 31bytes to 18000bytes.\nEven changing the format to <code>MFVideoFormat_RGB32</code> does not change affect the sample sizes.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/20072475/media-foundation-onreadsample-wrong-size-of-returned-sample\">This</a> question seems to have the same issue but the solution is not fixing it.</p>\n\n<p>Any help on why I can't change the interlacing and how to properly decode video frames and get image data out of samples?</p>\n\n<p>Many thanks in advance.</p>\n"}, {"tags": ["c++", "performance", "pointers", "vector", "stl"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1492642466, "post_id": 43507351, "comment_id": 74069390, "body": "If the objects are polymorphic, you have to use pointers. If you make it a vector of objects, you&#39;ll slice them when you store them into the vector. And if you need to maintain object identity, you lose that with a vector of objects, because it makes copies."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 3, "creation_date": 1492642507, "post_id": 43507351, "comment_id": 74069409, "body": "The pointers are stored contiguously. The data referenced by the pointer is Crom-knows-where. Only way to know for sure if this is a performance problem is profiling both options. But before you head off and do that, does the current version meet the required performance spec? Is there any need for improvement at all?"}, {"owner": {"reputation": 1029, "user_id": 7878485, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/15dabd902549f21699b86daa04ecaeed?s=128&d=identicon&r=PG&f=1", "display_name": "nitronoid", "link": "https://stackoverflow.com/users/7878485/nitronoid"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1492643216, "post_id": 43507351, "comment_id": 74069639, "body": "@Barmar yes the objects are polymorphic, but my reason for asking the question was more to do with whether I will need to redesign my project due to these performance implications. Could you explain what you mean when you say &quot;you&#39;ll slice them when you store them into the vector&quot;? I&#39;m not sure I understand you fully."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1492643348, "post_id": 43507351, "comment_id": 74069682, "body": "<b><i>more to do with whether I will need to redesign my project due to these performance implications</i></b> Most likely not."}, {"owner": {"reputation": 1029, "user_id": 7878485, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/15dabd902549f21699b86daa04ecaeed?s=128&d=identicon&r=PG&f=1", "display_name": "nitronoid", "link": "https://stackoverflow.com/users/7878485/nitronoid"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1492643406, "post_id": 43507351, "comment_id": 74069693, "body": "@user4581301 My project is a particle system, and current design runs fine with a small number of particles (5000 -ish), however I wish for it to run just as well with a larger number (20000 -ish), currently it is unacceptably slow at that number and I am wondering if this could be the design flaw."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1492643487, "post_id": 43507351, "comment_id": 74069718, "body": "I doubt that this is the cause of your slowdown."}, {"owner": {"reputation": 1029, "user_id": 7878485, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/15dabd902549f21699b86daa04ecaeed?s=128&d=identicon&r=PG&f=1", "display_name": "nitronoid", "link": "https://stackoverflow.com/users/7878485/nitronoid"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1492644572, "post_id": 43507351, "comment_id": 74070036, "body": "@drescherjm thanks for your opinion, I&#39;ll look at the other parts of my design instead."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1492644859, "post_id": 43507351, "comment_id": 74070140, "body": "Run your program through a profiler to see what piece of code its taking up your time, then hunt and kill the inefficiencies in that piece of code. If that turns out to be how you store your data, so be it, but nothing beats hard numbers when making a decision. Hacking at the code because you have a feeling... Works for Jedi, I guess. Meesa no Jedi, okeeday? Take a look at using valgrind or whatever&#39;s built into Visual Studio. If it&#39;s all you have available, gprof is better than nothing."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 3, "creation_date": 1492645353, "post_id": 43507351, "comment_id": 74070264, "body": "<a href=\"http://c2.com/cgi/wiki?PrematureOptimization\" rel=\"nofollow noreferrer\">premature optimization is the root of all evil</a>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1492645478, "post_id": 43507351, "comment_id": 74070296, "body": "Ensuring contiguous data was important in the days when memory was very limited, so paging was a serious performance drain. This is less of an issue these days, when RAM is measured in gigabytes. Cache misses can sometimes be an issue, but it&#39;s not nearly as big a performance hit as paging was."}, {"owner": {"reputation": 844, "user_id": 6476520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec3fd95868cd06cf93b9d3f49695766c?s=128&d=identicon&r=PG", "display_name": "1stCLord", "link": "https://stackoverflow.com/users/6476520/1stclord"}, "edited": false, "score": 1, "creation_date": 1492645703, "post_id": 43507351, "comment_id": 74070353, "body": "Actually in C++ on a modern CPU cache coherence, and branch predicatbility is by far the #1 performace concern for hot code. Roughly every layer of cache you need to travel to for data, add another 0 onto the number of cycles it&#39;ll take. L1 ~10, L2 ~100, RAM ~1000"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1492646647, "post_id": 43507351, "comment_id": 74070575, "body": "Hot code... That&#39;ll be about 425F, I guess. How long do I bake?"}], "answers": [{"comments": [{"owner": {"reputation": 1029, "user_id": 7878485, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/15dabd902549f21699b86daa04ecaeed?s=128&d=identicon&r=PG&f=1", "display_name": "nitronoid", "link": "https://stackoverflow.com/users/7878485/nitronoid"}, "edited": false, "score": 0, "creation_date": 1492695866, "post_id": 43507801, "comment_id": 74095974, "body": "Thanks for your answer, it was very insightful, I was not aware of the specifics of cache misses and your example helped me to understand them. Extra thanks for explaining slicing!"}], "tags": [], "owner": {"reputation": 844, "user_id": 6476520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec3fd95868cd06cf93b9d3f49695766c?s=128&d=identicon&r=PG", "display_name": "1stCLord", "link": "https://stackoverflow.com/users/6476520/1stclord"}, "is_accepted": true, "score": 3, "last_activity_date": 1492646413, "last_edit_date": 1492646413, "creation_date": 1492645101, "answer_id": 43507801, "question_id": 43507351, "link": "https://stackoverflow.com/questions/43507351/c-how-does-a-vector-of-pointers-affect-performance/43507801#43507801", "title": "C++ How does a vector of pointers affect performance?", "body": "<p>If you need the polymorphism, as people have said, you should store the pointers to the base. If, later, you decide this code is hot and needs to optimise it's cpu cache usage you can do that say by making the objects fit cleanly in cache lanes and/or with a custom allocator to ensure code locality of the dereferenced data.</p>\n\n<p>Slicing is when you store objects by value Base and copy construct or allocate into them a Derived, Derived will be Sliced, the copy constructor or allocator only takes a Base and will ignore any data in Derived, there isn't enough space allocated in Base to take the full size of Derived. i.e. if Base is 8 bytes and Derived is 16, there's only enough room for Base's 8 bytes in the destination value even if you provided a copy constructor/allocator that explicitly took a Dervived.</p>\n\n<p>I should say it's really not worth thinking about data cache coherence if you're using virtualisation heavily that wont be elided by the optimiser. An instruction cache miss is far more devestating than a data cache miss and virtualisation can cause instruction cache misses because it has to look up the vtable pointer before loading the function into the instruction cache and so can't preemptively load them.</p>\n\n<p>CPU's tend to like to preload as much data as they can into caches, if you load an address an entire cache lane (~64 bytes) will be loaded into a cache lane and often it will also load the cache lane before and after which is why people are so keen on data locality.</p>\n\n<p>So in your vector of pointers scenario when you load the first pointer you'll get lots of pointers in the cache at once loading through the pointer will trigger a cache miss and load up the data around that object, if your actual particles are 16 bytes and local to each other, you wont lose much beyond this. if they're all over the heap and massive you will get very cache churny on each iteration and relatively ok while working on a particle.</p>\n\n<p>Traditionally, particle systems tend to be very hot and like to pack data tightly, it's common to see 16 byte Plain Old Data particle systems which you iterate linearly over with very predicatble branching. meaning you can generally rely on 4 particles per cache lane and have the prefetcher stay well ahead of your code.</p>\n\n<p>I also should say that cpu caches are cpu dependant and i'm focusing on intel x86. Arm for example tends to be quite a bit behind intel &amp; the pipeline is less complex, the prefetcher less capable and so cache misses can be less devastating.</p>\n"}], "owner": {"reputation": 1029, "user_id": 7878485, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/15dabd902549f21699b86daa04ecaeed?s=128&d=identicon&r=PG&f=1", "display_name": "nitronoid", "link": "https://stackoverflow.com/users/7878485/nitronoid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 938, "favorite_count": 1, "accepted_answer_id": 43507801, "answer_count": 1, "score": 1, "last_activity_date": 1492646413, "creation_date": 1492642101, "question_id": 43507351, "link": "https://stackoverflow.com/questions/43507351/c-how-does-a-vector-of-pointers-affect-performance", "title": "C++ How does a vector of pointers affect performance?", "body": "<p>I am wondering how a std::vector of pointers to objects affects the performance of a program, vs. using a std::vector directly containing the objects. Specifically I am referring to the speed of the program. </p>\n\n<p>I was taught to use the std::vector over other STL such as the std::list for it's speed, due to all of it's data being stored contiguously in memory, rather than being fragmented. This meant that iterating over the elements was fast, however my thinking is that if my vector contains pointers to the objects, then the objects can still be stored anywhere in memory and only the pointers are stored contiguously. I am wondering how this would affect the performance of a program when it comes to iterating over the vector and accessing the objects. </p>\n\n<p>My current project design uses a vector of pointers so that I can take advantage of virtual functions however i'm unsure whether this is worth the speed hit i may encounter when my vector becomes very large. Thanks for your help!</p>\n"}, {"tags": ["c#", "c++", "performance", "memory-management"], "comments": [{"owner": {"reputation": 1974, "user_id": 932549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f62f513f2fc140506c7d3a9f6b9fed07?s=128&d=identicon&r=PG&f=1", "display_name": "krowe", "link": "https://stackoverflow.com/users/932549/krowe"}, "edited": false, "score": 0, "creation_date": 1492642802, "post_id": 43507349, "comment_id": 74069505, "body": "If the C# version of the DLL has an interface that you are happy with then I&#39;d guess that your C++ version is going to have a similar interface. If that is the case then why speculate? Just make it work using the C# lib because it is already done. If it turns out to be too slow\\hungry then the worst case scenario is that you&#39;ll need to write the C++ lib but at least your interface is already defined so you won&#39;t need to redesign it and others who already are familiar with the C# lib will be able to quickly understand your C++ lib. If it does work then you&#39;ve saved a lot of effort."}, {"owner": {"reputation": 921791, "user_id": 23354, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CrVFH.png?s=128&g=1", "display_name": "Marc Gravell", "link": "https://stackoverflow.com/users/23354/marc-gravell"}, "edited": false, "score": 0, "creation_date": 1492642903, "post_id": 43507349, "comment_id": 74069539, "body": "who is allocating the memory? although to be honest you&#39;ll be fine either way - just expect to get familar with either <code>unsafe</code> (keyword) or <code>Unsafe</code> (<a href=\"https://www.nuget.org/packages/System.Runtime.CompilerServices.Unsafe/\" rel=\"nofollow noreferrer\">nuget package</a>),"}], "owner": {"reputation": 5668, "user_id": 1430705, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/9506189ea17aabbf0e847fe365e8054f?s=128&d=identicon&r=PG", "display_name": "Karlovsky120", "link": "https://stackoverflow.com/users/1430705/karlovsky120"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1492642093, "creation_date": 1492642093, "question_id": 43507349, "link": "https://stackoverflow.com/questions/43507349/performance-and-memory-managment-impact-of-using-a-c-dll-with-native-c", "title": "Performance and memory managment impact of using a C# dll with native C++", "body": "<p>I want to write a map editor for a game. I intend doing it using C++ and OpenGL. However, the game was written in Unity, so map loading/saving code was written in C#.</p>\n\n<p>Since I worked on a similar project in C# WinForms, I have already written a C# dll that can manage some game generated files, including map files. I now plan to use it to load/save map files in the main C++ program.</p>\n\n<p>What does the C# dll do? (<strong>tl;dr</strong> below the second line)</p>\n\n<hr>\n\n<p>It has a method for loading <code>Region</code> into memory, consisting of an array of 1024 <code>MemoryStreams</code> that each contain a compressed <code>Chunk</code> (about 2kB to 20kB per chunk, mostly around 5kB). It also has a method for requesting a <code>Chunk</code> from the <code>Region</code>. It decompresses the stream and reads it into a <code>Chunk</code> object (which is a complex object with arrays, lists, dictionaries and other custom classes with complexities of their own).</p>\n\n<p>I also have the methods that do the reverse - pack the <code>Chunk</code> object into a <code>MemoryStream</code>, compress it and add it the <code>Region</code> object that has a method which saves it to a file on the disk.</p>\n\n<p>The uncompressed chunk data ranges from 15kB to over 120kB in size, and that's just raw data, not including any object creation related overhead.</p>\n\n<p>In the main program, I'd probably have several thousand of those <code>Chunks</code>loaded into memory at once, some maybe briefly to cache some data and be unloaded (to perhaps generate distant terrain), others fully to modify them to the users wishes.</p>\n\n<hr>\n\n<p><strong>tl;dr</strong> I'd be loading anywhere from a few hundred megabytes up to over a gigabyte of data within a managed c# dll. The data wouldn't be heavily accessed, only changed when user does changes to terrain, which is not that often speaking in terms of time in CPU scale. But as the user moves the map, a lot of chunks might be requested to be loaded/unloaded at a time.</p>\n\n<p>Given that all this is within a managed C# dll, my question is, what happens to memory management and how does that impact performance of the native C++ program? To what extent can I control the memory allocation for the <code>Region</code>/<code>Chunk</code> objects? How does that impact the speed of execution?</p>\n\n<p>Is it something that can be overlooked/ignored and/or dealt with, or will it pose enough of a problem to justify rewriting the dll in native C++ with a more elaborate memory management scheme?</p>\n"}, {"tags": ["c++", "binary-search-tree", "default-constructor"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6928395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6978e7d709ec4541cfdbc52b36bfc30e?s=128&d=identicon&r=PG&f=1", "display_name": "Garrett Maynard", "link": "https://stackoverflow.com/users/6928395/garrett-maynard"}, "edited": false, "score": 0, "creation_date": 1492645350, "post_id": 43507362, "comment_id": 74070261, "body": "I realized I hadn&#39;t even created the class function for it so I attempted to do so but I&#39;m getting many errors."}], "tags": [], "owner": {"reputation": 720, "user_id": 7163293, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c6db1c0115965f6a6f13465cad0615d4?s=128&d=identicon&r=PG&f=1", "display_name": "SunnyIsaLearner", "link": "https://stackoverflow.com/users/7163293/sunnyisalearner"}, "is_accepted": false, "score": 0, "last_activity_date": 1492642488, "last_edit_date": 1492642488, "creation_date": 1492642181, "answer_id": 43507362, "question_id": 43507311, "link": "https://stackoverflow.com/questions/43507311/trouble-with-binary-search-tree-construction/43507362#43507362", "title": "Trouble With Binary Search Tree Construction", "body": "<p><strong>Contructor</strong> \nA constructor will have exact same name as the class and it does not have any return type at all, not even void.</p>\n\n<p><strong>Default Constructor</strong>\nA default constructor is a constructor which can be called with no arguments. A possible definition of the default constructor can be like:</p>\n\n<pre><code>BST::BST()\n{\n     node * Root = NULL; \n}\n</code></pre>\n\n<p>A parameterized constructor can be like:</p>\n\n<pre><code>BST::BST(int * arr, int size)\n{\n     node * Root = NULL;\n     for(int i = 0; i &lt; size; i++)\n         insert(&amp;Root, arr[i]);\n }\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6928395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6978e7d709ec4541cfdbc52b36bfc30e?s=128&d=identicon&r=PG&f=1", "display_name": "Garrett Maynard", "link": "https://stackoverflow.com/users/6928395/garrett-maynard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 511, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1492645551, "creation_date": 1492641880, "question_id": 43507311, "link": "https://stackoverflow.com/questions/43507311/trouble-with-binary-search-tree-construction", "title": "Trouble With Binary Search Tree Construction", "body": "<p>I have this code written however it is not acting the way it should, when it's run as \n<code>BST T(arr, 10)</code>\n, how our professor wants it to be, I get an error that there should be a ; before T, but I don't know how I need to change my code top encompass that. Specifically, the professor has it stated like this in the project overview: \n\"<code>BST()</code> Default constructor, creates an empty tree.     </p>\n\n<pre><code>BST(int[], int)\n</code></pre>\n\n<p>Constructor, first parameter is an ordered array of elements and the second parameter is the number of elements in the array. The tree should be built in a balanced fashion\" \nI also am a bit confused on how I should write my default constructor, should I simply write a code that is <code>void BST()</code> without anything passed to it and constructs and empty tree?\nHere is my constructor currently.</p>\n\n<pre><code>void BST(int * arr, int size)\n{\n     node * Root = NULL;\n     for(int i = 0; i &lt; size; i++)\n         insert(&amp;Root, arr[i]);\n }\n</code></pre>\n"}, {"tags": ["c++", "visual-c++", "bitmap", "null", "loadimage"], "comments": [{"owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 1, "creation_date": 1492642255, "post_id": 43507270, "comment_id": 74069313, "body": "<code>0xcccccccc</code> is the standard value in debug builds for an uninitialized stack variable.  Your code looks correct. I even tested it with my own image.  When <code>LoadImage</code> returns NULL  You need to call <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms679360(v=vs.85).aspx\" rel=\"nofollow noreferrer\">GetLastError</a> to get the error code for why it failed.  Are you sure that TILE_01.bmp exists and is a real BMP file and not some other format?"}, {"owner": {"reputation": 13, "user_id": 7892317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e9b8bed76ab75100c64be30ca164c70?s=128&d=identicon&r=PG&f=1", "display_name": "Jemma", "link": "https://stackoverflow.com/users/7892317/jemma"}, "reply_to_user": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 0, "creation_date": 1492643111, "post_id": 43507270, "comment_id": 74069607, "body": "Thanks for your fast response, I had a PNG file that I converted to BITMAP. I&#39;ve just downloaded a BMP file and it seems to work fine now :) Thanks again"}, {"owner": {"reputation": 3651, "user_id": 383779, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/363c7fb07b9e121acdb8c40115b94e34?s=128&d=identicon&r=PG", "display_name": "sergiol", "link": "https://stackoverflow.com/users/383779/sergiol"}, "edited": false, "score": 0, "creation_date": 1492709846, "post_id": 43507270, "comment_id": 74105838, "body": "MFC is very limited on what image files it can accept. If your image has transparencies, you will need to save the file in a very specific format as in my own comment: <a href=\"http://stackoverflow.com/questions/41953499/mfc-toolbar-icon-not-visible-in-visual-studio-2015#comment71572831_41953499\" title=\"mfc toolbar icon not visible in visual studio 2015%23comment71572831_41953499\">stackoverflow.com/questions/41953499/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7892317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e9b8bed76ab75100c64be30ca164c70?s=128&d=identicon&r=PG&f=1", "display_name": "Jemma", "link": "https://stackoverflow.com/users/7892317/jemma"}, "edited": false, "score": 0, "creation_date": 1492703956, "post_id": 43507679, "comment_id": 74102293, "body": "Thanks for the tip. I followed your advice and after another few hours of debugging :/ I&#39;ve found that after the loadImage() function @err,hr says: &quot;ERROR_INVALID_HANDLE : The handle is invalid&quot;"}, {"owner": {"reputation": 13852, "user_id": 468725, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/85a49cd89084e6512dee0f140e86d5b4?s=128&d=identicon&r=PG", "display_name": "Pavel P", "link": "https://stackoverflow.com/users/468725/pavel-p"}, "reply_to_user": {"reputation": 13, "user_id": 7892317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e9b8bed76ab75100c64be30ca164c70?s=128&d=identicon&r=PG&f=1", "display_name": "Jemma", "link": "https://stackoverflow.com/users/7892317/jemma"}, "edited": false, "score": 0, "creation_date": 1492704552, "post_id": 43507679, "comment_id": 74102698, "body": "@Jemma try to use <code>LoadImage((HINSTANCE)NULL, ...</code>"}, {"owner": {"reputation": 13, "user_id": 7892317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e9b8bed76ab75100c64be30ca164c70?s=128&d=identicon&r=PG&f=1", "display_name": "Jemma", "link": "https://stackoverflow.com/users/7892317/jemma"}, "edited": false, "score": 0, "creation_date": 1492769122, "post_id": 43507679, "comment_id": 74131369, "body": "Hi, just tried that and it still says invalid handle, I&#39;ve also tried <code>LoadImage((HINSTANCE) hInstance,...  </code> just incase and it still comes up with invalid handle, I&#39;ve noted that under autos while debugging the hInstance value says Maze Game.exe!0x00810000(Type information missing from symbol file) {unused=946030} not sure if that could be causing issues"}, {"owner": {"reputation": 135, "user_id": 10944850, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MGdllAwiEcE/AAAAAAAAAAI/AAAAAAAAAF0/oOwn6Rtxwbw/photo.jpg?sz=128", "display_name": "\u0645\u062d\u0645\u062f \u062e\u064a\u0631 \u0627\u0644\u062e\u0644\u0642", "link": "https://stackoverflow.com/users/10944850/%d9%85%d8%ad%d9%85%d8%af-%d8%ae%d9%8a%d8%b1-%d8%a7%d9%84%d8%ae%d9%84%d9%82"}, "reply_to_user": {"reputation": 13, "user_id": 7892317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e9b8bed76ab75100c64be30ca164c70?s=128&d=identicon&r=PG&f=1", "display_name": "Jemma", "link": "https://stackoverflow.com/users/7892317/jemma"}, "edited": false, "score": 0, "creation_date": 1597326645, "post_id": 43507679, "comment_id": 112101288, "body": "@Jemma Are you still having this issue? if not how did you fix it?"}, {"owner": {"reputation": 700, "user_id": 5351370, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DIXlPTT7PX0/AAAAAAAAAAI/AAAAAAAAAEg/YKyBJlcyYv4/photo.jpg?sz=128", "display_name": "Biesi Grr", "link": "https://stackoverflow.com/users/5351370/biesi-grr"}, "edited": false, "score": 0, "creation_date": 1606248047, "post_id": 43507679, "comment_id": 114905229, "body": "I got it working by saving the bitmap with 24 bits only. With 32 bits it didn&#39;t work."}], "tags": [], "owner": {"reputation": 13852, "user_id": 468725, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/85a49cd89084e6512dee0f140e86d5b4?s=128&d=identicon&r=PG", "display_name": "Pavel P", "link": "https://stackoverflow.com/users/468725/pavel-p"}, "is_accepted": false, "score": 1, "last_activity_date": 1492786133, "last_edit_date": 1492786133, "creation_date": 1492644188, "answer_id": 43507679, "question_id": 43507270, "link": "https://stackoverflow.com/questions/43507270/hbitmap-hbm-loadimage-function-returns-null/43507679#43507679", "title": "HBITMAP hbm=LoadImage function returns NULL", "body": "<p>First of all, make sure that your image is real bmp file and can be opened with image viewer. Then try this to load that HBITMAP using <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms648045%28v=vs.85%29.aspx?f=255&amp;MSPPError=-2147217396\" rel=\"nofollow noreferrer\">LoadImage</a>:</p>\n\n<pre><code>const char* filename = \"C:\\\\Users\\\\Jemma\\\\Desktop\\\\Maze Game\\\\Assets\\\\TILE_01.bmp\";\nHBITMAP bmp = (HBITMAP)LoadImage(NULL, filename,\n    IMAGE_BITMAP, 0, 0, LR_CREATEDIBSECTION | LR_DEFAULTSIZE | LR_LOADFROMFILE);\nif (hbm == NULL)\n{\n    DWORD lastError = GetLastError();\n    return 1;\n}\n</code></pre>\n\n<p>Note, you need to use 0, 0 for sizes when you use <code>LR_DEFAULTSIZE</code>, also, when loading from file you need to use <code>LR_LOADFROMFILE</code>. All of these are mentioned in <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms648045%28v=vs.85%29.aspx?f=255&amp;MSPPError=-2147217396\" rel=\"nofollow noreferrer\">documentation of LoadImage function</a>.</p>\n\n<p>When stepping through with debugger if you get something unexpected you need to check <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms679360(v=vs.85).aspx\" rel=\"nofollow noreferrer\">GetLastError</a>. If you are stepping through with VS debugger, you can simply add <code>@err</code> in watch window and you'll always see the last error without changing your code. You can also add it as <code>@err,hr</code> and it will show you readable description of the error that happened.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 14982617, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-H0JwgwdC9Ac/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucmkFYczHzEML0CkKyBj8EUmGu3NVQ/s96-c/photo.jpg?sz=128", "display_name": "Pushpendra Diwedi", "link": "https://stackoverflow.com/users/14982617/pushpendra-diwedi"}, "is_accepted": false, "score": 0, "last_activity_date": 1610360534, "creation_date": 1610360534, "answer_id": 65665019, "question_id": 43507270, "link": "https://stackoverflow.com/questions/43507270/hbitmap-hbm-loadimage-function-returns-null/65665019#65665019", "title": "HBITMAP hbm=LoadImage function returns NULL", "body": "<pre><code>const char* filename = &quot;C:\\\\Users\\\\Jemma\\\\Desktop\\\\Maze Game\\\\Assets\\\\TILE_01.bmp&quot;;\nHBITMAP bmp = (HBITMAP)LoadImage(NULL, filename,\n    IMAGE_BITMAP, 0, 0, LR_CREATEDIBSECTION | LR_DEFAULTSIZE | LR_LOADFROMFILE);\nif (bmp== NULL)\n{\n    DWORD lastError = GetLastError();\n    return 1;\n}\n\nI am using the same code as above mentioned but LoadImage() is returning NULL and getting lasterror =2 , even i am sure file is already there from belowcode:\n\nstring filePath = &quot;D:\\\\ACC_car_Ego.bmp&quot;;\n    if (boost::filesystem::exists(filePath))    // does filePath actually exist?\n        DWORD lastError = GetLastError();\n    else\n        DWORD lastError1 = GetLastError();\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7892317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e9b8bed76ab75100c64be30ca164c70?s=128&d=identicon&r=PG&f=1", "display_name": "Jemma", "link": "https://stackoverflow.com/users/7892317/jemma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2794, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1610360534, "creation_date": 1492641620, "question_id": 43507270, "link": "https://stackoverflow.com/questions/43507270/hbitmap-hbm-loadimage-function-returns-null", "title": "HBITMAP hbm=LoadImage function returns NULL", "body": "<p>I'm having issues displaying a bitmap on the screen. When I complile and run its not displaying anything so I tried debugging step by step and found that the below code is the issue.</p>\n\n<pre><code>HBITMAP hbm = (HBITMAP)LoadImage(hInstance, \n                        \"C:\\\\Users\\\\Jemma\\\\Desktop\\\\Maze Game\\\\Assets\\\\TILE_01.bmp\", \n                        IMAGE_BITMAP, \n                        SWidth, SHeight, \n                        LR_LOADFROMFILE | LR_CREATEDIBSECTION); \n    if (hbm == NULL || m_Surface == NULL)\n{\n    DWORD lastError = GetLastError();\n    return 1;\n}\n</code></pre>\n\n<p>When I get to this function under autos first it says hbm=0xcccccccc{unused=???} (I'm assuming it's due to not being initialised as this comes up when I get to the line so I haven't stepped into it at this point - Just thought I'd put it in just incase) after I've stepped into this line it says hbm = NULL, and the GetLastError function returns 0 which I've read means function was successful. I've tried passing NULL instead of hInstance, I've tried passing the filename in as LPCSTR szFileName -- I declared it as LPCSTR szFileName(\"C:\\Users\\Jemma\\Desktop\\Maze Game\\Assets\\TILE_01.bmp\").\nAbsolutely no idea what to try next. Any help on this would be greatly appreciated.</p>\n"}, {"tags": ["c++", "file"], "comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 1, "creation_date": 1492641296, "post_id": 43507187, "comment_id": 74069036, "body": "Use + to append <code>std::string</code> objects."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1492641562, "post_id": 43507187, "comment_id": 74069118, "body": "You can only use string pasting with string literals, it can&#39;t be used to concatenate with variables or expressions."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 1, "creation_date": 1492641585, "post_id": 43507187, "comment_id": 74069131, "body": "@aschepler Post that as an answer."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1492641627, "post_id": 43507187, "comment_id": 74069145, "body": "...and fix the comma splice while you&#39;re at it"}, {"owner": {"reputation": 27, "user_id": 7269235, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/114c66e128556bd9b07232479450666d?s=128&d=identicon&r=PG&f=1", "display_name": "NewUser2810", "link": "https://stackoverflow.com/users/7269235/newuser2810"}, "edited": false, "score": 0, "creation_date": 1492643952, "post_id": 43507187, "comment_id": 74069860, "body": "thanks! yeah i forgot the + ..."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1492644329, "post_id": 43507286, "comment_id": 74069963, "body": "also <code>name</code> is not declared... maybe better would be <code>Writer(&quot;bla&quot; + ostr.str());</code>"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 0, "last_activity_date": 1492641716, "creation_date": 1492641716, "answer_id": 43507286, "question_id": 43507187, "link": "https://stackoverflow.com/questions/43507187/string-as-function-and-called-by-other-sub-class-with-integer-value/43507286#43507286", "title": "String as function and called by other sub class with integer value", "body": "<p>This problem is very unclearly stated but, if we assume that <code>name</code> is an <code>std::string</code>, then:</p>\n\n<pre><code>name = \"\\n\"  \"Test\\n\"\"Test\\n\"\"Test\\n\" ostr.str();\n</code></pre>\n\n<p>This is just a bunch of string literals written next to each other, followed by an <code>std::string</code> expression also just randomly floating there in free space.</p>\n\n<p>Your computer doesn't know what you want it to do.</p>\n\n<p>Although you actually <em>can</em> concatenate string literals in this way (literals are something like <code>\"hello world\"</code>, but <em>not</em> something like <code>aStringVariable</code>), that doesn't apply to arbitrary expressions (and you don't even need it where you've used it).</p>\n\n<p>I think that what you meant was this:</p>\n\n<pre><code>name = \"\\nTest\\nTest\\nTest\\n\" + ostr.str();\n</code></pre>\n\n<p>I hope that your C++ book teaches this; if not, get a better one.</p>\n"}], "owner": {"reputation": 27, "user_id": 7269235, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/114c66e128556bd9b07232479450666d?s=128&d=identicon&r=PG&f=1", "display_name": "NewUser2810", "link": "https://stackoverflow.com/users/7269235/newuser2810"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1492641716, "creation_date": 1492641179, "last_edit_date": 1492641494, "question_id": 43507187, "link": "https://stackoverflow.com/questions/43507187/string-as-function-and-called-by-other-sub-class-with-integer-value", "title": "String as function and called by other sub class with integer value", "body": "<p>I want to create a file with C++ and write something in it. I have two classes, one with a Vererbung::writer(string name) and another subclass called Vererbung1(int zahl). Without the integer it works peferctly but when I want to write the integer to string and paste it after the function it wont work.</p>\n\n<p>this works normally</p>\n\n<p>Vererbung.cpp</p>\n\n<pre><code>void Vererbung::Writer(string name)\n{\n    ofstream text;\n    text.open (\"test.txt\", ios::trunc);\n\n    text &lt;&lt;\"write something\\n\";\n    text &lt;&lt;\"again2 \\n\";\n    text &lt;&lt;\"again 3\\n\";\n    text &lt;&lt; name;\n\n    text.close();\n}\n</code></pre>\n\n<p>Vererbung1.cpp</p>\n\n<pre><code>include \"Vererbung.h\"\n\n\nvoid Vererbung1::Writer(int zahl)\n{\n    std::ostringstream ostr;\n    ostr&lt;&lt; zahl;\n\n    name = \"\\n\"  \"Test\\n\"\"Test\\n\"\"Test\\n\" ostr.str();\n\n    Vererbung::Writer(name);\n}\n</code></pre>\n\n<p>When I run it in main it says that I need a ';' before ostr.str(); how can I fix this, If I want a integer value to string in a file in it?</p>\n"}, {"tags": ["c++", "exception", "memory", "strcpy"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 4, "creation_date": 1492640059, "post_id": 43506966, "comment_id": 74068631, "body": "That is not a valid class definition. Your code is not valid C++; you are very unlucky to be using a broken compiler (or using a compiler in a broken way) that it lets you get away with this."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1492640106, "post_id": 43506966, "comment_id": 74068638, "body": "Please edit your question to contain a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1492640130, "post_id": 43506966, "comment_id": 74068651, "body": "@Slava: it probably is. This looks like a C flexible array member, strangely permitted in C++."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1492640163, "post_id": 43506966, "comment_id": 74068665, "body": "How does it work in C?"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1492640195, "post_id": 43506966, "comment_id": 74068669, "body": "@Slava: It&#39;s called a &quot;<a href=\"https://en.wikipedia.org/wiki/Flexible_array_member\" rel=\"nofollow noreferrer\">flexible array member</a>&quot;. You can only use it in dynamic allocation contexts."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1492640299, "post_id": 43506966, "comment_id": 74068695, "body": "If you are using GCC, add the -pedantic flag. Also, I really doubt that an exception is being thrown. You are almost certainly getting a segmentation fault or something similar - these are not exceptions in the C++ sense."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 1, "creation_date": 1492640401, "post_id": 43506966, "comment_id": 74068730, "body": "The code is not a MCVE, since it lacks the needed <code>#include</code>s and the definition of <code>~TestClass</code>."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1492640474, "post_id": 43506966, "comment_id": 74068755, "body": "The problem is not <code>strcpy</code>, the problem is that you write to <code>test-&gt;teststring</code> which doesn&#39;t have memory to hold <code>&quot;Cheezit&quot;</code>."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 2, "creation_date": 1492640485, "post_id": 43506966, "comment_id": 74068758, "body": "Does not compile on gcc <a href=\"http://ideone.com/Z1JY2J\" rel=\"nofollow noreferrer\">ideone.com/Z1JY2J</a>"}], "answers": [{"tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": false, "score": 1, "last_activity_date": 1492640245, "creation_date": 1492640245, "answer_id": 43507020, "question_id": 43506966, "link": "https://stackoverflow.com/questions/43506966/unable-to-delete-object-that-used-strcpy/43507020#43507020", "title": "Unable to delete object that used strcpy()", "body": "<pre><code>char teststring[];\n</code></pre>\n\n<p>as an array member is not allowed in Standard C++.</p>\n\n<p>Your compiler appears to be treating it as a Flexible Array Member, a feature from C, as an extension to C++.  However, using a Flexible Array Member correctly requires some care with allocation, which you have not done.  So even supposing there is some such extension, your program still has undefined behavior.</p>\n"}, {"comments": [{"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1492641293, "post_id": 43507042, "comment_id": 74069035, "body": "With C++17 he could make it a template class and have the size deduced: <a href=\"http://en.cppreference.com/w/cpp/language/class_template_deduction\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/class_template_deduction</a>"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1492641368, "post_id": 43507042, "comment_id": 74069062, "body": "@JerryJeremiah: Sure, but that&#39;s something completely different... (And you wouldn&#39;t deduce of a constructor parameter <i>value</i>!)"}, {"owner": {"reputation": 1, "user_id": 6213989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bf7dc571390262808e97c58ced2bd43?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Oelbaum", "link": "https://stackoverflow.com/users/6213989/daniel-oelbaum"}, "edited": false, "score": 0, "creation_date": 1492704834, "post_id": 43507042, "comment_id": 74102864, "body": "@KerrekSB thank you, I have since changed teststring to a char pointer (char*) and in TestClass&#39;s constructor I have a line just before strcpy() that reads: &quot;teststring = new char[sizeof(incstring)];&quot;. Will this make teststring point to an array the size of incstring? and is this memory safe?"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 1, "user_id": 6213989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bf7dc571390262808e97c58ced2bd43?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Oelbaum", "link": "https://stackoverflow.com/users/6213989/daniel-oelbaum"}, "edited": false, "score": 1, "creation_date": 1492715402, "post_id": 43507042, "comment_id": 74108993, "body": "@DanielOelbaum: It is none of these things. Every single thing you said has a bug in it. Update your question and I can point them out. Or just look on this website, search for &quot;array size&quot; and &quot;sizeof&quot;. And look up how null-terminated strings work and how <code>strcpy</code> works."}, {"owner": {"reputation": 1, "user_id": 6213989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bf7dc571390262808e97c58ced2bd43?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Oelbaum", "link": "https://stackoverflow.com/users/6213989/daniel-oelbaum"}, "edited": false, "score": 0, "creation_date": 1492733988, "post_id": 43507042, "comment_id": 74116312, "body": "I did some research and think I have made some progress. I have posted another question at <a href=\"http://stackoverflow.com/questions/43531933/using-passed-in-array-to-initialize-other-array\" title=\"using passed in array to initialize other array\">stackoverflow.com/questions/43531933/&hellip;</a>. if any of you could help me out there, I would appreciate it greatly"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 1, "user_id": 6213989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bf7dc571390262808e97c58ced2bd43?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Oelbaum", "link": "https://stackoverflow.com/users/6213989/daniel-oelbaum"}, "edited": false, "score": 0, "creation_date": 1492734082, "post_id": 43507042, "comment_id": 74116336, "body": "@DanielOelbaum: Yeah, I saw... to be honest, there is just <i>so much</i> wrong with that code, it&#39;s really hard to point out in a brief answer. I could probably spend a whole hour dissecting that code... maybe someone will post a longer review answer."}], "tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": false, "score": 2, "last_activity_date": 1492640375, "creation_date": 1492640375, "answer_id": 43507042, "question_id": 43506966, "link": "https://stackoverflow.com/questions/43506966/unable-to-delete-object-that-used-strcpy/43507042#43507042", "title": "Unable to delete object that used strcpy()", "body": "<p>Your code is not valid C++. In C++, all non-static class data members must have <em>complete</em> type, and <code>char[]</code> is not a complete type. You need to specify the array size, and then initialize the array accordingly:</p>\n\n<pre><code>class TestClass\n{\npublic:\n    TestClass(char a[]) : teststring{} { std::strncpy(teststring, a, 2); }\n    char teststring[3];\n};\n</code></pre>\n\n<p>You cannot deduce the array size from any constructor, because the constructor is <em>part of the class</em>, and the class is not complete until the array size has been specified.</p>\n"}], "owner": {"reputation": 1, "user_id": 6213989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bf7dc571390262808e97c58ced2bd43?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Oelbaum", "link": "https://stackoverflow.com/users/6213989/daniel-oelbaum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1492640375, "creation_date": 1492639984, "question_id": 43506966, "link": "https://stackoverflow.com/questions/43506966/unable-to-delete-object-that-used-strcpy", "title": "Unable to delete object that used strcpy()", "body": "<p>Recently I was deleting an object and an exception would get thrown, and I have narrowed it down to the use of strcpy(). To test this, I made a simple test class that uses (basically) only strcpy() and voila, an exception.</p>\n\n<pre><code>#pragma once\nclass TestClass\n{\npublic:\n    TestClass(char []);\n    ~TestClass();\n\n    char teststring[];\n};\n</code></pre>\n\n<p>It's constructor looks like this:</p>\n\n<pre><code>TestClass::TestClass(char incstring[])\n{\n    strcpy(teststring, incstring);\n    printf(teststring);\n}\n</code></pre>\n\n<p>If I run the following code:</p>\n\n<pre><code>int main(){\n    TestClass* test = new TestClass(\"Cheezit\");\n\n    delete test;\n}\n</code></pre>\n\n<p>I get a thrown exception! What is HAPPENING WITH STRCPY()??!?!?!?! </p>\n\n<p>Note: The console window does print \"Cheezit\".</p>\n"}, {"tags": ["c++", "c++11", "c++14", "automatic-storage"], "comments": [{"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 2, "creation_date": 1492639754, "post_id": 43506853, "comment_id": 74068503, "body": "Can you go just one level deeper and have every element contain a reference to a singleton object on the stack?"}, {"owner": {"reputation": 7041, "user_id": 314290, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5ffde821f0f9670e601b19f1731a6849?s=128&d=identicon&r=PG", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/314290/mikhail"}, "edited": false, "score": 0, "creation_date": 1492639806, "post_id": 43506853, "comment_id": 74068524, "body": "What behavior do you want from placement new? Do you need to differentiate between heap and stack? The problem is that in practice the memory reserved for these places depends a lot, for example gcc&#39;s  <code>-fsplit-stack</code>"}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 2, "creation_date": 1492639835, "post_id": 43506853, "comment_id": 74068531, "body": "Is it not sufficient to use the api for all content handled in the other language?  The c++ class should use that api for allocation or cleanup of {other language&#39;s stuff}, making it irrelevant how the c++ class is destructed."}, {"owner": {"reputation": 2252, "user_id": 1672986, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e242f8881f17c6bc32f2ad1119e5ca24?s=128&d=identicon&r=PG", "display_name": "markt1964", "link": "https://stackoverflow.com/users/1672986/markt1964"}, "edited": false, "score": 0, "creation_date": 1492639950, "post_id": 43506853, "comment_id": 74068582, "body": "It is irrelevant to that class how the C++ class is destructed.... I just do not want it containing references to things that the language might have garbage collected.   If instances of my native class are only ever on the stack, the language knows to leave any content they refer to alive until there are no more references to it inside of the stack bounds."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 12, "creation_date": 1492640003, "post_id": 43506853, "comment_id": 74068602, "body": "Such a thing is not possible."}, {"owner": {"reputation": 2252, "user_id": 1672986, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e242f8881f17c6bc32f2ad1119e5ca24?s=128&d=identicon&r=PG", "display_name": "markt1964", "link": "https://stackoverflow.com/users/1672986/markt1964"}, "edited": false, "score": 0, "creation_date": 1492640098, "post_id": 43506853, "comment_id": 74068635, "body": "@WhozCraig that should be disallowed... and is why simply overload <code>new</code> or deleting it would not really present a solution that is signfiicantly better than the honor system based one I am using right now by naming the class something that reminds the user of it that it is only for automatic storage."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1492640196, "post_id": 43506853, "comment_id": 74068670, "body": "@markt1964 After reading your text deeper and seeing you mention this, I honestly don&#39;t see how this is possible regardless. That simply isn&#39;t how <i>this</i> language works. Right now it appears honor is about all you have to fallback to."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 5, "creation_date": 1492640696, "post_id": 43506853, "comment_id": 74068830, "body": "Just like with people wanting singleton types when all they need is &quot;a single object&quot;, I would recommend the conservative approach and say, &quot;just put your objects on the stack and move on&quot;."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1492640757, "post_id": 43506853, "comment_id": 74068846, "body": "If the C++ class contains a reference to data from the other API, then presumably the API&#39;s garbage collector won&#39;t even try to release the data while an instance of the C++ class refers to the data, so this is really a moot issue. The C++ class instance could be on the stack or heap, it wouldn&#39;t matter as long as the instance manages the reference correctly so the API doesn&#39;t try to release the data prematurely while the class instance is still alive."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1492640846, "post_id": 43506853, "comment_id": 74068878, "body": "<code>alloca</code> can be used to grab stack and you might be able to overload new/delete to use this, but you will be having some fun here to catch all the edge cases.  Might be better to put your C++ stuff in its own executable and talk with the interpreted stuff via the OS."}, {"owner": {"reputation": 2252, "user_id": 1672986, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e242f8881f17c6bc32f2ad1119e5ca24?s=128&d=identicon&r=PG", "display_name": "markt1964", "link": "https://stackoverflow.com/users/1672986/markt1964"}, "edited": false, "score": 0, "creation_date": 1492640897, "post_id": 43506853, "comment_id": 74068901, "body": "That presumption would be wrong.... the only data that it won&#39;t try to release is data that is referred to by something on the program&#39;s stack.  There are ways of blocking the garbage collection entirely, but they are prohibitively expensive, and I wouldn&#39;t want to use it in a general case when an instance of the class is being allocated in automatic storage anyways and wouldn&#39;t be be necessary"}, {"owner": {"reputation": 3834, "user_id": 517580, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d04aa91a34f0171bcf5898f0b6d81101?s=128&d=identicon&r=PG", "display_name": "engf-010", "link": "https://stackoverflow.com/users/517580/engf-010"}, "edited": false, "score": 0, "creation_date": 1492640975, "post_id": 43506853, "comment_id": 74068917, "body": "maybe this an idea : use a private subtype in a class and return objects of this private type via a factory function. The user can use the object like any other object except can&#39;t use its typename."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1492641133, "post_id": 43506853, "comment_id": 74068973, "body": "@markt1964: how does the API know that a reference exists on the stack? How does it even know how many references there are to begin with? They are outside of the API, outside of its control, there is no possible way for it to gleam WHERE the references exist, only WHAT they are referring to. The data being referred to has to exist in memory somewhere, so either the data was allocated on the stack, or it was allocated on the heap. The garbage collection should be smart enough to know that and act accordingly. Where the references are allocated is irrelevant."}, {"owner": {"reputation": 2252, "user_id": 1672986, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e242f8881f17c6bc32f2ad1119e5ca24?s=128&d=identicon&r=PG", "display_name": "markt1964", "link": "https://stackoverflow.com/users/1672986/markt1964"}, "edited": false, "score": 0, "creation_date": 1492641272, "post_id": 43506853, "comment_id": 74069022, "body": "I&#39;m not 100% sure of the specifics, but my understanding is that when it sees something being assigned to within the interpreted language, it iterates over the current program&#39;s stack bounds to see if there are any other pointers to the same content, and if there are, it will conservatively choose to leave it alive."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1492641432, "post_id": 43506853, "comment_id": 74069085, "body": "@markt1964L that would be extremely invasive, not to mention unreliable. What if multiple threads refer to the same piece of data within the API? Is the API going to iterate the stacks of every thread in the process? No, that is wasteful, time consuming, error prone, non-portable, and just outright wrong. A proper gargage collector would simply keep track of a reference count associated with the data item, where each reference must increment the counter when assigned and decrement the counter when cleared. The GC would then release the data appropriately after its counter falls to 0."}, {"owner": {"reputation": 2252, "user_id": 1672986, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e242f8881f17c6bc32f2ad1119e5ca24?s=128&d=identicon&r=PG", "display_name": "markt1964", "link": "https://stackoverflow.com/users/1672986/markt1964"}, "edited": false, "score": 0, "creation_date": 1492641714, "post_id": 43506853, "comment_id": 74069172, "body": "Well, as I said, I&#39;m not 100% sure of the specifics.  I would imagine reference counting is involved as well, but that only goes so far... when you have a container containing a container containing the first container, reference counts are meaningless.  You have to go through storage and for every entry that refers to something that your system knows about, walk down that tree to ensure that everything pointed to stays alive.  When you are done, anything that you knew about that wasn&#39;t marked alive can be freed."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1492641904, "post_id": 43506853, "comment_id": 74069219, "body": "&quot;<i>Well, as I said, I&#39;m not 100% sure of the specifics</i>&quot; - then I suggest you find out the specifics, because it has a BIG IMPACT on how you write your code. What you describe is not how a reliable garbage collection based API should work. Especially if it can be used in different programing languages, then it definitely cant do what you describe. And the whole &quot;container containing a container containing the first container&quot; is easily addressed using <i>weak</i> referencing rather than <i>strong</i> referencing.  Only strong references to an object manipulate its reference count, weak references do not."}, {"owner": {"reputation": 3142, "user_id": 2474792, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/327964b28dd74fd6bbbe669aac4edf04?s=128&d=identicon&r=PG", "display_name": "Demi", "link": "https://stackoverflow.com/users/2474792/demi"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1492642529, "post_id": 43506853, "comment_id": 74069414, "body": "@RemyLebeau What they are describing is EXACTLY how MANY garbage-collectors work.  Including Ruby, the Bohem GC, JavaScriptCore, Chakra (MS JS engine), SBCL, D, Mono (even SGen!) and Emacs.  Every one of those is used in production.  You have probably used software that contained at least one of them."}, {"owner": {"reputation": 3142, "user_id": 2474792, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/327964b28dd74fd6bbbe669aac4edf04?s=128&d=identicon&r=PG", "display_name": "Demi", "link": "https://stackoverflow.com/users/2474792/demi"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1492642827, "post_id": 43506853, "comment_id": 74069512, "body": "@RemyLebeau The only thing the GC needs is to be able to tell, \u201cDo these bytes point to something I manage?\u201d.  If the answer is \u201cyes\u201d, then that object is live and must not be moved.  If the answer is \u201cno\u201d then that pointer can be ignored.  In most cases, the rate of false positives (objects marked live that really aren\u2019t) is acceptably low.  And trust me, the other APIs for dealing with GCd objects in C++ are worse (try having to register each and every variable (including temporaries!) that holds a GC pointer)."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 7, "creation_date": 1492643935, "post_id": 43506853, "comment_id": 74069855, "body": "Even if you somehow manage to enforce that only automatic storage duration objects are created, the C++ implementation isn&#39;t obligated to put them on the stack and keep them there for their whole lifetime. It might, say, keep it in registers, only spilling to stack when required, or it might determine that nothing in your C++ code needs the value any longer and reuse the storage early, not aware of the GC behind its back. This is the sort of thing that needs to be worked out properly, with whatever API the GC supplies, rather than hacked on in the C++ side."}, {"owner": {"reputation": 6524, "user_id": 396551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbcfa45e0170031552a9328c7b4dbe7e?s=128&d=identicon&r=PG", "display_name": "Sjoerd", "link": "https://stackoverflow.com/users/396551/sjoerd"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1492644593, "post_id": 43506853, "comment_id": 74070047, "body": "@T.C. On top of that: As main() cannot be called directly, all local variables of main() can be stored in static storage as only one version will ever exist. I&#39;m not aware of any compiler that does, although it might be useful for really large objects."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 3142, "user_id": 2474792, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/327964b28dd74fd6bbbe669aac4edf04?s=128&d=identicon&r=PG", "display_name": "Demi", "link": "https://stackoverflow.com/users/2474792/demi"}, "edited": false, "score": 0, "creation_date": 1492644751, "post_id": 43506853, "comment_id": 74070104, "body": "@Demi: I can&#39;t fathom any GC-based system scanning someone else&#39;s stacks that it doesn&#39;t own/manage, looking for active references.  But whatever.  I don&#39;t use <i>any</i> GC-based apps at all, and I don&#39;t use any GC-based APIs in my own code."}, {"owner": {"reputation": 2252, "user_id": 1672986, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e242f8881f17c6bc32f2ad1119e5ca24?s=128&d=identicon&r=PG", "display_name": "markt1964", "link": "https://stackoverflow.com/users/1672986/markt1964"}, "edited": false, "score": 0, "creation_date": 1492645720, "post_id": 43506853, "comment_id": 74070356, "body": "Well, it only needs to scan the stack to look for references to data that the other language&#39;s own storage system suggest could be garbage collected. If a reference is found on the stack, it makes the conservative judgement that it should be kept alive (for now).  Since the system knew about that data already anyways, there&#39;s no chance that it could corrupt memory.  Even <i>IF</i> there is content on the stack that coincidentally happens to look exactly like a pointer to data that the GC was already considering freeing, the worst that happens is that the data doesn&#39;t get freed right then and there."}, {"owner": {"reputation": 3454, "user_id": 2483065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/445fde8324a574466843732d0934404d?s=128&d=identicon&r=PG&f=1", "display_name": "Logman", "link": "https://stackoverflow.com/users/2483065/logman"}, "edited": false, "score": 0, "creation_date": 1492645932, "post_id": 43506853, "comment_id": 74070408, "body": "Why you even want to have an object? Are you in need of preserve some kind of state between api calls?"}, {"owner": {"reputation": 26542, "user_id": 3699139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pYdt3.jpg?s=128&g=1", "display_name": "Jorn Vernee", "link": "https://stackoverflow.com/users/3699139/jorn-vernee"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1492687888, "post_id": 43506853, "comment_id": 74089671, "body": "@T.C. has a point. If native interop is genuinely supported by the api you&#39;re using I would expect functions to pin/unpin gc managed objects. Maybe someone could make a suggestion based on the api you&#39;re using, if you include the name."}, {"owner": {"reputation": 2252, "user_id": 1672986, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e242f8881f17c6bc32f2ad1119e5ca24?s=128&d=identicon&r=PG", "display_name": "markt1964", "link": "https://stackoverflow.com/users/1672986/markt1964"}, "edited": false, "score": 0, "creation_date": 1492694349, "post_id": 43506853, "comment_id": 74094716, "body": "They exist, but they are expensive.... and I would not want them to be used on data that actually <i>was</i> on the stack and wasn&#39;t even needed."}, {"owner": {"reputation": 26542, "user_id": 3699139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pYdt3.jpg?s=128&g=1", "display_name": "Jorn Vernee", "link": "https://stackoverflow.com/users/3699139/jorn-vernee"}, "edited": false, "score": 0, "creation_date": 1492696975, "post_id": 43506853, "comment_id": 74096876, "body": "Don&#39;t you think the api designers have thought of that? It may already be taken into account."}, {"owner": {"reputation": 2252, "user_id": 1672986, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e242f8881f17c6bc32f2ad1119e5ca24?s=128&d=identicon&r=PG", "display_name": "markt1964", "link": "https://stackoverflow.com/users/1672986/markt1964"}, "edited": false, "score": 0, "creation_date": 1492707975, "post_id": 43506853, "comment_id": 74104740, "body": "I do not think so.... if I have my class instance on the stack with a reference to this language&#39;s data, even at best marking it as unavailable for garbage collection is going to be completely redundant.   Given the fact that accessing this data is already quite burdensome when using native code, I do not want to do any unnecessary processing, if there is any possible way it can be avoided (and why I would prefer a compile-time solution)"}], "answers": [{"comments": [{"owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "edited": false, "score": 10, "creation_date": 1492640889, "post_id": 43507054, "comment_id": 74068897, "body": "May I kindly ask downvoters to explain why you think this is a wrong answer? Then I can learn..."}, {"owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "reply_to_user": {"reputation": 6524, "user_id": 396551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbcfa45e0170031552a9328c7b4dbe7e?s=128&d=identicon&r=PG", "display_name": "Sjoerd", "link": "https://stackoverflow.com/users/396551/sjoerd"}, "edited": false, "score": 0, "creation_date": 1492641605, "post_id": 43507054, "comment_id": 74069136, "body": "@Jarod42 : sorry &amp; thanks for catching. Typing using phone, couldn&#39;t run it :) fixed."}, {"owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "reply_to_user": {"reputation": 6524, "user_id": 396551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbcfa45e0170031552a9328c7b4dbe7e?s=128&d=identicon&r=PG", "display_name": "Sjoerd", "link": "https://stackoverflow.com/users/396551/sjoerd"}, "edited": false, "score": 0, "creation_date": 1492641689, "post_id": 43507054, "comment_id": 74069161, "body": "@Sjoerd : ASDV is automatic storage duration variable. Resolved this acronym and CPS in the answer."}, {"owner": {"reputation": 11697, "user_id": 114421, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/loFOW.jpg?s=128&g=1", "display_name": "Peter Ruderman", "link": "https://stackoverflow.com/users/114421/peter-ruderman"}, "edited": false, "score": 6, "creation_date": 1492641902, "post_id": 43507054, "comment_id": 74069218, "body": "That&#39;s quite clever.  The down votes are probably from people who don&#39;t understand what this does.  It might help to explain in addition to showing the code."}, {"owner": {"reputation": 6524, "user_id": 396551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbcfa45e0170031552a9328c7b4dbe7e?s=128&d=identicon&r=PG", "display_name": "Sjoerd", "link": "https://stackoverflow.com/users/396551/sjoerd"}, "edited": false, "score": 9, "creation_date": 1492642206, "post_id": 43507054, "comment_id": 74069298, "body": "Downsides: 1) Not able to use A as member or base class. 2) Arguments to creating an A are after the function using A, which is a very strange order. 3) As a result, the main effect is that it&#39;s obfuscating the code. IMHO, documenting that &quot;using A not on the stack creates Undefined Behavior&quot; is more in line with the C++ approach."}, {"owner": {"reputation": 3142, "user_id": 2474792, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/327964b28dd74fd6bbbe669aac4edf04?s=128&d=identicon&r=PG", "display_name": "Demi", "link": "https://stackoverflow.com/users/2474792/demi"}, "edited": false, "score": 1, "creation_date": 1492642597, "post_id": 43507054, "comment_id": 74069439, "body": "This, IMO, is the only valid answer.  Some Rust code uses a similar trick."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1492642880, "post_id": 43507054, "comment_id": 74069534, "body": "I would say the downvotes are from trolls who think &quot;this is a dumb idea and you shouldn&#39;t do it&quot;"}, {"owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "reply_to_user": {"reputation": 6524, "user_id": 396551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbcfa45e0170031552a9328c7b4dbe7e?s=128&d=identicon&r=PG", "display_name": "Sjoerd", "link": "https://stackoverflow.com/users/396551/sjoerd"}, "edited": false, "score": 12, "creation_date": 1492643198, "post_id": 43507054, "comment_id": 74069632, "body": "@Sjoerd : 1) Member: impossible indeed. If you could, you&#39;d be able to create a static instance of the enclosing class, which is defying OP&#39;s intentions. 2) I&#39;ve tried to post the simplest solution, not the most convenient (lib-ready) one. At home, I&#39;d probably do an override on operator&gt;&gt; to feed the lambda. 3) Yes, this is difficult code. Wouldn&#39;t call it obfuscated though: CPS is there for some time. It&#39;s not for everyone and you should always weight the cost vs. benefit. Doc is not checked by compiler: if cost of error is high, use types, if low, doc it."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 2, "creation_date": 1492643780, "post_id": 43507054, "comment_id": 74069808, "body": "@lorro consider using <code>operator-&gt;*</code> instead.  Like <code>f-&gt;*pass_A(args...)</code> does a <code>f(A(args...))</code>.  <code>operator-&gt;*</code> is freely overridable, rarely used, and is the member function dereference operator; this is sort of like writing a member function on <code>f</code>."}, {"owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "reply_to_user": {"reputation": 6524, "user_id": 396551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbcfa45e0170031552a9328c7b4dbe7e?s=128&d=identicon&r=PG", "display_name": "Sjoerd", "link": "https://stackoverflow.com/users/396551/sjoerd"}, "edited": false, "score": 0, "creation_date": 1492643837, "post_id": 43507054, "comment_id": 74069825, "body": "@Sjoerd : 1) Using as a base class is possible [with cps], but way more complicated than above. You basically put the above pattern in a CRTP base class, create a key token (struct) that has the factory as a friend, then allow descendant&#39;s ctors which take the key token to create instances normally. Or you just &#39;tunnel down&#39; the key token created in cps_make / cps_factory. Now, this is complex for OP&#39;s request and is probably unneeded there; but, if you&#39;d need a pattern/example for that, I can come up with it."}, {"owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1492644010, "post_id": 43507054, "comment_id": 74069879, "body": "@Yakk: I&#39;m ok with either operator, but Sjoerd brout up the (valid) concern that f should come after args... I.e., with op&gt;&gt; it&#39;s like pass_A(args...) &gt;&gt; [&amp;](A a) { /* ... */ };"}, {"owner": {"reputation": 6524, "user_id": 396551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbcfa45e0170031552a9328c7b4dbe7e?s=128&d=identicon&r=PG", "display_name": "Sjoerd", "link": "https://stackoverflow.com/users/396551/sjoerd"}, "edited": false, "score": 0, "creation_date": 1492644046, "post_id": 43507054, "comment_id": 74069890, "body": "@lorro No need to do that for me. I&#39;ll just look for a way to tell the 3rd party library that an object is in use and create a simple RAII wrapper for such a dont_gc() function. A sensible library will have such a function."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1492645137, "post_id": 43507054, "comment_id": 74070219, "body": "That&#39;s really clever :) Care to explain what you mean about that &quot;hint&quot;?"}, {"owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "reply_to_user": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 1, "creation_date": 1492645385, "post_id": 43507054, "comment_id": 74070269, "body": "@DanielJour : statement expressions proposal, parametric/named SEs, sneak peak: <a href=\"http://lorro.hu/cplusplus/statement_expressions.html\" rel=\"nofollow noreferrer\">lorro.hu/cplusplus/statement_expressions.html</a> but please note this is way too work-in-progress. Comments are welcome though."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1492648894, "post_id": 43507054, "comment_id": 74071089, "body": "@lorro and <code>make_A(args..)-&gt;*f</code> does match the idea that the method pointer &quot;goes on the right&quot;."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 2, "creation_date": 1492649528, "post_id": 43507054, "comment_id": 74071273, "body": "<a href=\"http://coliru.stacked-crooked.com/a/5209a02490e84dd6\" rel=\"nofollow noreferrer\">Here</a> is a live example using CRTP to reduce the boilerplate of an instance.  It is missing making (most) things private to avoid bypassing how it is supposed to be used.  You have permission to copy it into your answer, if you want it, and modify it."}, {"owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1492672105, "post_id": 43507054, "comment_id": 74078847, "body": "@Yakk: nice :). Btw you can check if public ctor is available via std::is_constructible"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1492688845, "post_id": 43507054, "comment_id": 74090410, "body": "Question: who are &quot;we&quot;?"}, {"owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1492875247, "post_id": 43507054, "comment_id": 74173118, "body": "@YSC: if you want a single point of contact, that&#39;s me. However, I&#39;ve received a lot of help from ISO C++ mailing list: the idea of standardizin (non-parametric) statement expressions, the original idea on for-break, the hints that for-break/else and throwaway continuations (and thus exceptions) are similar, the tips on what should be extended and rewritten; also, comments on the original (for-else) workaround from my collegues; lots of help I&#39;ve received. And I&#39;m still open to new ideas on this, so if you have the time, your comments are very welcome :)."}], "tags": [], "owner": {"reputation": 4939, "user_id": 6292621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a024e1125c7f69a49d7f1a4861d7b63?s=128&d=identicon&r=PG&f=1", "display_name": "lorro", "link": "https://stackoverflow.com/users/6292621/lorro"}, "is_accepted": false, "score": 40, "last_activity_date": 1492642696, "last_edit_date": 1492642696, "creation_date": 1492640468, "answer_id": 43507054, "question_id": 43506853, "link": "https://stackoverflow.com/questions/43506853/is-there-any-way-to-enforce-that-instances-are-only-ever-on-the-stack/43507054#43507054", "title": "Is there any way to enforce that instances are only ever on the stack?", "body": "<p>Disclaimer: 'stack' is not part of the c++ standard to my knowledge, there we have ASDVs (automatic storage duration variables). ABI might define stack. Note that sometimes these are passed in registers, which I believe is OK in your case.</p>\n\n<p>Define a CPS (continuation-passing style) factory method:</p>\n\n<pre><code>class A {\npublic:\n   template&lt;typename F, typename... Args&gt;\n   static auto cps_make(F f, Args&amp;&amp;... args) {\n      return f(A(std::forward&lt;Args&gt;(args)...));\n   }\nprivate:\n   A(/* ... */) {}\n   A(const A&amp;) = delete;\n   A(A&amp;&amp;) = delete;\n};\n</code></pre>\n\n<p>Usage: pass a lambda taking A and the ctor parameters of A. E.g.</p>\n\n<pre><code>return A::cps_make([&amp;](A a) {\n   /* do something with a */\n   return true;\n});\n</code></pre>\n\n<p>Function arguments are always ASDVs inside.</p>\n\n<p>How the code works: cps_make takes a functor (usually a lambda) which takes an instance of the given type; and optional ctor parameters. It creates the instance (by forwarding any optional params to the ctor), calls the functor and returns what the functor returns. Since the functor can be a lambda in C++11, it doesn't break the normal code flow.</p>\n\n<p>The beauty of CPS is, you can have static polymorphism just by using an auto-lambda in C++14: your cps_make() can create just about anything you wish (hierarchy, variant, any, etc.). Then you save the virtual overhead for closed hierarchies. You can even have a lambda for normal flow and one if ctor would fail; this comes handy when exceptions are no-go.</p>\n\n<p>The drawback is, currently you can't directly use the control flow statements of the outside scope inside the lambda. /* Hint: we're working on it. */</p>\n"}, {"comments": [{"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1492645965, "post_id": 43507607, "comment_id": 74070421, "body": "<i>since compiler cannot know the local variables [...]</i> What about inter-source optimisation?"}, {"owner": {"reputation": 2469, "user_id": 778117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cw2EQ.jpg?s=128&g=1", "display_name": "Fatih BAKIR", "link": "https://stackoverflow.com/users/778117/fatih-bakir"}, "reply_to_user": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1492692196, "post_id": 43507607, "comment_id": 74092868, "body": "@Walter, If you mean link time optimizations, I&#39;d expect the linker to respect a <code>noinline</code> request. <a href=\"http://gcc.1065356.n8.nabble.com/Preventing-link-time-optimization-from-inlining-tp899277p899502.html\" rel=\"nofollow noreferrer\">here</a> it&#39;s somewhat confirmed by also adding a <code>noclone</code> attribute as well."}, {"owner": {"reputation": 39045, "user_id": 458390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac239077d2404f412c4e76fa5bd1e539?s=128&d=identicon&r=PG", "display_name": "ughoavgfhw", "link": "https://stackoverflow.com/users/458390/ughoavgfhw"}, "edited": false, "score": 0, "creation_date": 1492735443, "post_id": 43507607, "comment_id": 74116635, "body": "In practice this is probably fine for most cases. But it&#39;s certainly possible for stack variables in the same thread to be in non-contiguous memory, in which case you can&#39;t say anything about the order. E.g. signal handlers with alternate stacks. Or an atypical system where that&#39;s just normal."}], "tags": [], "owner": {"reputation": 2469, "user_id": 778117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cw2EQ.jpg?s=128&g=1", "display_name": "Fatih BAKIR", "link": "https://stackoverflow.com/users/778117/fatih-bakir"}, "is_accepted": false, "score": 6, "last_activity_date": 1492643719, "creation_date": 1492643719, "answer_id": 43507607, "question_id": 43506853, "link": "https://stackoverflow.com/questions/43506853/is-there-any-way-to-enforce-that-instances-are-only-ever-on-the-stack/43507607#43507607", "title": "Is there any way to enforce that instances are only ever on the stack?", "body": "<p>Okay, so here is my take:</p>\n\n<pre><code>struct stack_marker\n{\n    thread_local static uint8_t* marker;\n    uint8_t stk;\n\n    stack_marker()\n    {\n        if (marker != nullptr)\n        {\n            throw std::runtime_error(\"second twice marker! don't do it\");\n        }\n        marker = &amp;stk;\n    }\n};\n\nthread_local uint8_t* stack_marker::marker = nullptr;\n\nvoid sort3(uint8_t* (&amp;a)[3]); //sorts 3 pointers, see gist\n\nclass only_on_stack\n{\n    uint8_t place;\npublic:\n    NO_INLINE only_on_stack(int x)\n    {\n        uint8_t a;\n\n        if (!stack_marker::marker)\n        {\n            // not initialized yet, either forgot to put stack_marker in main\n            // or we are running before main, which is static storage\n\n            //throw std::runtime_error(\"only on stack object created in non-stack\");\n            std::cout &lt;&lt; x &lt;&lt; \": I'm NOT on stack\\n\";\n            return;\n        }\n\n        uint8_t* ptrs[] = {\n            stack_marker::marker,\n            &amp;place,\n            &amp;a\n        };\n\n        sort3(ptrs);\n\n        if (ptrs[1] == &amp;place) // place must be in the middle\n        {\n            std::cout &lt;&lt; x &lt;&lt; \": I'm on stack\\n\";\n        }\n        else\n        {\n            //throw std::runtime_error(\"only_on_stack object created in non-stack\");\n            std::cout &lt;&lt; x &lt;&lt; \": I'm NOT on stack\\n\";\n        }\n    }\n};\n\nonly_on_stack static_storage(1);\nthread_local only_on_stack tl_storage(4);\n\nint NO_INLINE stuff()\n{\n    only_on_stack oos(2);\n}\n\nint main()\n{\n    stack_marker mrk;\n    stuff();\n    auto test = new only_on_stack(3);\n    tl_storage; // access thread local to construct, or gcc omits it\n}\n</code></pre>\n\n<p>Admittedly, my solution is not the cleanest of them all, but it allows you to keep using the regular local object syntax.</p>\n\n<p>Basically, the trick is to put 2 additional objects on the stack, other than our object: one at the beginning of the thread, and one at the constructor. Therefore, one of the objects is created on the stack <em>after</em> our object and one of them <em>before</em>. With this information, we could just check the order of the addresses of these 3 objects. If the object is really on the stack, address of it should be in the middle.</p>\n\n<p>However, C++ doesn't define the address order of objects in a function scope, therefore doing something like this:</p>\n\n<pre><code>int main()\n{\n    int a;\n    int b;\n    int c;\n}\n</code></pre>\n\n<p>Does <strong>not</strong> guarantee that <code>&amp;b</code> is in the middle of <code>&amp;a</code> and <code>&amp;c</code>.</p>\n\n<p>To workaround this, we could keep <code>a</code> in the main function and move <code>b</code> and <code>c</code> in a different <strong>force non-inlined</strong> function:</p>\n\n<pre><code>void NO_INLINE foo()\n{\n    int b;\n    int c;\n}\n\nint main()\n{\n    int a;\n    foo();\n}\n</code></pre>\n\n<p>In this case, since compiler cannot know the local variables of <code>foo</code> in <code>main</code>, <code>&amp;a</code> > <code>&amp;b</code>, <code>&amp;c</code> or <code>&amp;a</code> &lt; <code>&amp;b</code>, <code>&amp;c</code>. By applying the same thing to <code>c</code> by moving it to another non-inlineable function, we could guarantee that &amp;b is in the middle of <code>&amp;a</code> and <code>&amp;c</code>.</p>\n\n<p>In my implementation, <code>stuff</code> function is the <code>foo</code> function and the function which we move <code>c</code> into is the constructor of <code>only_on_stack</code>.</p>\n\n<p>Actual working implementation is here: <a href=\"https://gist.github.com/FatihBAKIR/dd125cf4f06cbf13bb4434f79e7f1d43\" rel=\"noreferrer\">https://gist.github.com/FatihBAKIR/dd125cf4f06cbf13bb4434f79e7f1d43</a></p>\n\n<p>It should work whether the stack grows downwards or upwards and regardless of the object file type and hopefully the ABI, as long as the compiler doesn't somehow reorder the local variables of non-inline functions.</p>\n\n<p>This was tested with <code>-O3</code> on g++-6 on linux and latest clang on mac os x. It <em>should</em> work on MSVC, hopefully someone can test it.</p>\n\n<p>Output from both is:</p>\n\n<pre><code>1: I'm NOT on stack\n2: I'm on stack\n3: I'm NOT on stack\n4: I'm NOT on stack\n</code></pre>\n\n<p>Usage is basically, you put a <code>stack_marker</code> object at the beginning of every thread (<code>main</code> included) and call another <em>not inlineable</em> function and use it as your actual entry point.</p>\n"}, {"comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 5, "creation_date": 1492653237, "post_id": 43507720, "comment_id": 74072225, "body": "Until guaranteed elision hits and you can do <code>new A(A::Make())</code> anyway"}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 5, "last_activity_date": 1492676320, "last_edit_date": 1492676320, "creation_date": 1492644438, "answer_id": 43507720, "question_id": 43506853, "link": "https://stackoverflow.com/questions/43506853/is-there-any-way-to-enforce-that-instances-are-only-ever-on-the-stack/43507720#43507720", "title": "Is there any way to enforce that instances are only ever on the stack?", "body": "<p>A possibility is to allow only temporary variables (with extended life time), something like:</p>\n\n<pre><code>class A\n{\nprivate:\n    A() = default;\n    A(const A&amp;) = delete;\n    A(A&amp;&amp;) = delete;\n    A&amp; operator =(const A&amp;) = delete;\n    A&amp; operator =(A&amp;&amp;) = delete;\n\npublic:\n    static A Make() { return {}; } \n};\n\nauto&amp;&amp; g = A::Make(); // possible :/\n\nint main() {\n    auto&amp;&amp; a = A::Make(); // possible\n\n#if 0\n    new A(); // error\n\n    struct InnerA\n    {\n        A a; // error\n    };\n#endif\n}\n</code></pre>\n\n<p>It will no longer be valid in C++17 with guaranteed copy elision.</p>\n"}], "owner": {"reputation": 2252, "user_id": 1672986, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e242f8881f17c6bc32f2ad1119e5ca24?s=128&d=identicon&r=PG", "display_name": "markt1964", "link": "https://stackoverflow.com/users/1672986/markt1964"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2462, "favorite_count": 3, "answer_count": 3, "score": 31, "last_activity_date": 1492686130, "creation_date": 1492639439, "last_edit_date": 1495542863, "question_id": 43506853, "link": "https://stackoverflow.com/questions/43506853/is-there-any-way-to-enforce-that-instances-are-only-ever-on-the-stack", "title": "Is there any way to enforce that instances are only ever on the stack?", "body": "<p>I have a C++ class for which I only ever want it to be instantiated on the stack.  I am using an api to access content that was developed in another (interpreted) language which comes with its own garbage collection.  The mechanisms in this language know enough to leave any content that it finds references to on the stack alone, and since this native class contains such a reference, it is of vital importance that for correct behavior, the user of the native C++ class it does not ever try to allocate an instance of it anywhere else.</p>\n\n<p>Note, I not only want to prohibit the instance of my class from being allocated with new (if that were all I needed to do, I could overload the class's <code>new</code> operator and make it private, or explicitly delete it since C++11), but to also disallow any static or possible global instances of the class as well. The only valid way to instantiate this class safely should be on the stack, and I would like to somehow guarantee that. As far as I know, making <code>new</code> private or deleting it also does not prevent another class from being declared with my class as a member variable and an instance of that being allocated on the heap.</p>\n\n<p>How I am managing this right now is to have the word \"Local\" as part of the name of the class as a friendly reminder to the user that the instance is only intended to be used on the stack, but of course, this isn't actually enforced by the compiler or any other mechanism, and I would prefer a solution that is more enforceable.</p>\n\n<p>Ideally I want to ensure this at compile time and fail compilation if used incorrectly.  If this is simply not possible, throwing an exception at runtime when the instance is constructed is still an acceptable fallback.  Solutions that work in C++11 or C++14 are fine.</p>\n\n<p>Please note that this question is definitely <em>NOT</em> the same as <a href=\"https://stackoverflow.com/questions/124856/how-do-i-prevent-a-class-from-being-allocated-via-the-new-operator-id-like\">this</a> one, which only wanted to prevent allocaton with <code>new</code></p>\n"}, {"tags": ["c++", "c++11", "g++", "macos-sierra", "clang++"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1492641225, "post_id": 43506848, "comment_id": 74069009, "body": "You forward declared <code>string eval_expr(stack&lt;string&gt; &amp;operands,                       stack&lt;string&gt; &amp;operators,                       map&lt;string, int&gt; optor_to_num_opnd);</code>, but you implemented <code>string eval_expr(stack&lt;string&gt; &amp;operands,                       stack&lt;string&gt; &amp;operators,                       const map&lt;string, int&gt; &amp;optor_to_num_opnd)</code>. See the extra <code>const</code> in the third parameter of the function&#39;s definition? Apply it to the forward declaration or remove the forward declarations and define the functions ahead of their first use."}, {"owner": {"reputation": 21, "user_id": 7892314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7a54063865c30563601b2b60d91006?s=128&d=identicon&r=PG&f=1", "display_name": "Kamran Siddiqui", "link": "https://stackoverflow.com/users/7892314/kamran-siddiqui"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1492641433, "post_id": 43506848, "comment_id": 74069086, "body": "nice catch @user4581301! I added it to the forward declaration but am still getting the same compiler errors listed in the op."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1492641506, "post_id": 43506848, "comment_id": 74069103, "body": "Revert to your original command line. You may still have linking errors, but they will be for different reasons."}, {"owner": {"reputation": 21, "user_id": 7892314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7a54063865c30563601b2b60d91006?s=128&d=identicon&r=PG&f=1", "display_name": "Kamran Siddiqui", "link": "https://stackoverflow.com/users/7892314/kamran-siddiqui"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1492642432, "post_id": 43506848, "comment_id": 74069377, "body": "The original command line is still giving the same linking error."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1492643213, "post_id": 43506848, "comment_id": 74069638, "body": "Also missing a reference: ` const map&lt;string, int&gt; **&amp;**optor_to_num_opnd`. Save yourself the hassle cut and paste the function prototype from the implementation over top of the current forward declaration."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1492643416, "post_id": 43506848, "comment_id": 74069698, "body": "None of this would have happened, you would have gotten a much easier to read compiler error, if you had defined the functions ahead of first use and gone without the forward declarations. Personally I avoid forward declarations until they become absolutely necessary. If I don&#39;t need it, it&#39;s just one more place for a subtle mistake or a forgotten edit to trip me up."}, {"owner": {"reputation": 21, "user_id": 7892314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7a54063865c30563601b2b60d91006?s=128&d=identicon&r=PG&f=1", "display_name": "Kamran Siddiqui", "link": "https://stackoverflow.com/users/7892314/kamran-siddiqui"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1492643591, "post_id": 43506848, "comment_id": 74069749, "body": "That did it! It was the const and the missing reference. Thanks for the help @user4581301."}, {"owner": {"reputation": 866, "user_id": 7607594, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OyzH_J0Nigs/AAAAAAAAAAI/AAAAAAAAAFg/tWm2BVaSBwY/photo.jpg?sz=128", "display_name": "Jorge Omar Medra", "link": "https://stackoverflow.com/users/7607594/jorge-omar-medra"}, "edited": false, "score": 0, "creation_date": 1492724528, "post_id": 43506848, "comment_id": 74113421, "body": "Try to add the path where <b>libstdc++.dlyb</b> is found that is <b>/usr/lib</b> using the option <code>-L</code>"}], "owner": {"reputation": 21, "user_id": 7892314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7a54063865c30563601b2b60d91006?s=128&d=identicon&r=PG&f=1", "display_name": "Kamran Siddiqui", "link": "https://stackoverflow.com/users/7892314/kamran-siddiqui"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 520, "favorite_count": 0, "closed_date": 1492736332, "answer_count": 0, "score": 2, "last_activity_date": 1492722211, "creation_date": 1492639417, "last_edit_date": 1492722211, "question_id": 43506848, "link": "https://stackoverflow.com/questions/43506848/undefined-symbols-and-use-of-undeclared-identifier", "closed_reason": "Not suitable for this site", "title": "Undefined Symbols and use of undeclared identifier", "body": "<p>I am a new C++ programmer and I have one C++ file that I am trying to compile on my MacBook Pro with macOS Sierra installed. When I first tried to compile it with:</p>\n\n<pre><code>g++ -std=c++11 Main.cpp -o rpns \n</code></pre>\n\n<p>I got this error:</p>\n\n<pre><code>Undefined symbols for architecture x86_64:\n\"eval_expr(std::__1::stack&lt;std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;, std::__1::deque&lt;std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;, std::__1::allocator&lt;std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; &gt; &gt; &gt;&amp;, std::__1::stack&lt;std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;, std::__1::deque&lt;std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;, std::__1::allocator&lt;std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; &gt; &gt; &gt;&amp;, std::__1::map&lt;std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;, int, std::__1::less&lt;std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; &gt;, std::__1::allocator&lt;std::__1::pair&lt;std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; const, int&gt; &gt; &gt;)\", referenced from:\n  _main in Main-2c97f0.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n\n<p>I then found some answers that said I should compile like this:</p>\n\n<pre><code>g++ -std=c++11 -stdlib=libstdc++ Main.cpp -o rpns\n</code></pre>\n\n<p>I then got this error:</p>\n\n<pre><code>Main.cpp:105:11: error: use of undeclared identifier 'stoi'\n  ind = stoi(n, &amp;sz);\n      ^\nMain.cpp:120:11: error: use of undeclared identifier 'stoi'\n  ind = stoi(n, &amp;sz);\n      ^\nMain.cpp:133:10: error: use of undeclared identifier 'to_string'\n  return to_string(len);\n     ^\nMain.cpp:138:10: error: use of undeclared identifier 'to_string'\n  return to_string(ind);\n     ^\nMain.cpp:146:9: error: use of undeclared identifier 'stoi'\n  x = stoi(num1, &amp;sz);\n    ^\nMain.cpp:147:9: error: use of undeclared identifier 'stoi'\n  y = stoi(num2, &amp;sz);\n    ^\nMain.cpp:155:11: error: use of undeclared identifier 'to_string'\n  return to_string(x + y);\n           ^\nMain.cpp:163:9: error: use of undeclared identifier 'stoi'\n  x = stoi(num1, &amp;sz);\n    ^\nMain.cpp:164:9: error: use of undeclared identifier 'stoi'\n  y = stoi(num2, &amp;sz);\n    ^\nMain.cpp:172:11: error: use of undeclared identifier 'to_string'\n  return to_string(x - y);\n           ^\n10 errors generated.\n</code></pre>\n\n<p>Here is my code for Main.cpp:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;stack&gt;\n#include &lt;vector&gt;\n#include &lt;map&gt;\n#include &lt;stdexcept&gt;\nusing namespace std;\n\nvoid init_map(map&lt;string, int&gt;&amp; operatorToNumOperands);\nstring eval_expr(stack&lt;string&gt; &amp;operands, stack&lt;string&gt; &amp;operators, map&lt;string, int&gt; optor_to_num_opnd);\nstring operator_tilde(const string s1, const string s2);\n\nstring operator_right(const string s, const string n);\n\nstring operator_left(const string s, const string n);\n\nstring operator_len(const string&amp; s);\n\nstring operator_find(const string&amp; s, const string&amp; f);\n\nstring operator_plus(const string num1, const string num2);\n\nstring operator_minus(const string num1, const string num2);\n\nint main() {\n   return 0;\n}\n\n\nvoid init_map(map&lt;string, int&gt;&amp; operatorToNumOperands) {\n}\n\nstring eval_expr(stack&lt;string&gt; &amp;operands, stack&lt;string&gt; &amp;operators, const map&lt;string, int&gt; &amp;optor_to_num_opnd) {\n  while(!operators.empty()) {\n    int numOperands = optor_to_num_opnd.at(operators.top());\n    vector&lt;string&gt; opands;\n    while(numOperands &gt; 0) {\n      if(operands.empty())\n        throw \"not enough arguments given for: '\" + operators.top() + \"' operator\";\n      opands.push_back(string(operators.top()));\n      numOperands--;\n    }\n    string expr_val = \"\";\n    try {\n        if(operators.top() == \"~\") {\n          expr_val = operator_tilde(opands[1], opands[0]);\n        } else if(operators.top() == \"-&gt;\") {\n          expr_val = operator_right(opands[1], opands[0]);\n        } else if(operators.top() == \"&lt;-\") {\n          expr_val = operator_left(opands[1], opands[0]);\n        } else if(operators.top() == \"#\") {\n          expr_val = operator_len(opands[0]);\n        } else if(operators.top() == \"?\") {\n          expr_val = operator_find(opands[1], opands[0]);\n        } else if(operators.top() == \"+\") {\n          expr_val = operator_plus(opands[1], opands[0]);\n        } else  { \n          expr_val = operator_minus(opands[1], opands[0]);\n        }\n        operators.pop();\n    } catch (const invalid_argument&amp; ia) {\n        throw invalid_argument(\"InvalidArgumentError: \" + string(ia.what()) + \"\\n\");\n    } catch (const out_of_range&amp; oor) {\n        throw out_of_range(\"OutofRangeError\" + string(oor.what()) + \"\\n\");\n    }\n    operands.push(expr_val);\n  }\n  return string(operands.top());\n}\n</code></pre>\n\n<p>I've been stuck on these two errors for hours. Thanks in advance for any help.</p>\n"}, {"tags": ["android", "c++", "android-ndk", "shared-libraries"], "comments": [{"owner": {"reputation": 8554, "user_id": 632035, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ed69ad748c440a055502c1b213757e5?s=128&d=identicon&r=PG", "display_name": "Dan Albert", "link": "https://stackoverflow.com/users/632035/dan-albert"}, "edited": false, "score": 0, "creation_date": 1492640150, "post_id": 43506839, "comment_id": 74068661, "body": "<code>ndk-build V=1</code> will show you all the commands it&#39;s running. Make sure those match what you expect."}, {"owner": {"reputation": 387, "user_id": 2142136, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0da7c9568606eae4d3f6301ec976a1ad?s=128&d=identicon&r=PG", "display_name": "Rampartisan", "link": "https://stackoverflow.com/users/2142136/rampartisan"}, "reply_to_user": {"reputation": 8554, "user_id": 632035, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ed69ad748c440a055502c1b213757e5?s=128&d=identicon&r=PG", "display_name": "Dan Albert", "link": "https://stackoverflow.com/users/632035/dan-albert"}, "edited": false, "score": 0, "creation_date": 1492691431, "post_id": 43506839, "comment_id": 74092236, "body": "Thanks, NDK_PROJECT_PATH was defaulting into the NDK root directory, instead of my project. Added an extra argument when calling the ndk-build NDK_PROJECT_PATH=&lt;PATH_TO_PROJECT&gt;  So it builds now (it crashes on load in unity Android, but it builds!)"}], "owner": {"reputation": 387, "user_id": 2142136, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0da7c9568606eae4d3f6301ec976a1ad?s=128&d=identicon&r=PG", "display_name": "Rampartisan", "link": "https://stackoverflow.com/users/2142136/rampartisan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 549, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1492639371, "creation_date": 1492639371, "question_id": 43506839, "link": "https://stackoverflow.com/questions/43506839/c-to-android-shared-library-with-android-ndk", "title": "C++ to android shared library with Android-NDK", "body": "<p>I am trying to get a unity native audio plugin to run on android, I have a .bundle complied by xcode that runs on osx.</p>\n\n<p>My steps for attempting to get the .so needed for android is having the two following mk files in the project folder :</p>\n\n<p>Android.mk</p>\n\n<pre><code>include $(CLEAR_VARS)\nLOCAL_ARM_MODE := arm\n\nLOCAL_PATH := $(call my-dir)\nLOCAL_MODULE := AudioPluginDemo\nLOCAL_C_INCLUDES := $(FILE_LIST:$(LOCAL_PATH)/include/%=%)\nFILE_LIST := $(wildcard $(LOCAL_PATH)/src/*.cpp)\nLOCAL_SRC_FILES := $(FILE_LIST:$(LOCAL_PATH)/%=%)\nLOCAL_LDLIBS := -llog\n\ninclude $(BUILD_SHARED_LIBRARY)\n</code></pre>\n\n<p>I am expecting this file to set LOCAL_PATH to the project folder, find a list of all cpp files in src, all files in include and then build a .so with them.</p>\n\n<p>Application.mk</p>\n\n<pre><code>APP_OPTIM        := release\nAPP_ABI          := all\nAPP_PLATFORM     := android-17\nAPP_BUILD_SCRIPT := Android.mk\nAPP_STL          := gnustl_static\n</code></pre>\n\n<p>and then running with :</p>\n\n<pre><code>ndk-build NDK_APPLICATION_MK=&lt;PATH_TO_APPLICATION.MK&gt;\n</code></pre>\n\n<p>this appears to run fine, creating all the .so files. However they are small in size (6kb) and when running on unity android the plugins are not found. Peeking into them with nm -D also does not give me the expected symbols. I have a feeling that I am not telling ndk-build to look in the right locations for the source files, (ndk-build -d to debug shows a lot of references to the NDK path, but none to the project folder) but can not work out why.</p>\n"}, {"tags": ["c++", "codeblocks"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1492638695, "post_id": 43506659, "comment_id": 74068093, "body": "add <code>#include &lt;string&gt;</code> on your code"}, {"owner": {"reputation": 47, "user_id": 6630671, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lcBitgofhNo/AAAAAAAAAAI/AAAAAAAAAHA/SukErSp2AdM/photo.jpg?sz=128", "display_name": "SamelCamel", "link": "https://stackoverflow.com/users/6630671/samelcamel"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1492639137, "post_id": 43506659, "comment_id": 74068254, "body": "@eyllanesc It didn&#39;t seem to fix it, I still got the same error."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1492639325, "post_id": 43506659, "comment_id": 74068327, "body": "Your executable is static linking to an external DLL that does not export the <code>std::basic_string</code> class, but the compiler/linker emitted a reference to that DLL.  So either you have the wrong version of the DLL for your executable to use, or you should tweak your project settings to remove the external linkage to begin with."}, {"owner": {"reputation": 47, "user_id": 6630671, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lcBitgofhNo/AAAAAAAAAAI/AAAAAAAAAHA/SukErSp2AdM/photo.jpg?sz=128", "display_name": "SamelCamel", "link": "https://stackoverflow.com/users/6630671/samelcamel"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1492639449, "post_id": 43506659, "comment_id": 74068380, "body": "@RemyLebeau I did link <code>-static-libstdc++</code> to the project because I can&#39;t run the executable without it. Would that be the problem?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1492639492, "post_id": 43506659, "comment_id": 74068397, "body": "What happens is that your executable is using a dynamic library, your IDE is adding it, but when you use it from the cmd you must do it manually."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1492639550, "post_id": 43506659, "comment_id": 74068420, "body": "You could search for the .dll file"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1492639637, "post_id": 43506659, "comment_id": 74068456, "body": "see this: <a href=\"http://stackoverflow.com/questions/2463243/dll-search-on-windows\">stackoverflow.com/questions/2463243/dll-search-on-windows</a>"}, {"owner": {"reputation": 47, "user_id": 6630671, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lcBitgofhNo/AAAAAAAAAAI/AAAAAAAAAHA/SukErSp2AdM/photo.jpg?sz=128", "display_name": "SamelCamel", "link": "https://stackoverflow.com/users/6630671/samelcamel"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1492639685, "post_id": 43506659, "comment_id": 74068484, "body": "@eyllanesc I think it has something to do with strings because any executable that I created runs fine, it&#39;s just when I add strings that the error appears. I could also be entirely wrong because I just started c++ recently."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1492640038, "post_id": 43506659, "comment_id": 74068619, "body": "That is what I say, when using the string class, this uses a dll, the IDE calls it and so you can use it, but in the cmd does not happen that, I recommend looking for the dll that contains the implementation of string.h , Find a file called string.dll or similar and copy it into the same folder as your executable"}, {"owner": {"reputation": 195, "user_id": 2585832, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/jqzR7.jpg?s=128&g=1", "display_name": "salted", "link": "https://stackoverflow.com/users/2585832/salted"}, "edited": false, "score": 2, "creation_date": 1504392255, "post_id": 43506659, "comment_id": 78997464, "body": "If you use MinGW, then copy libstdc++-6.dll and libgcc_s_dw2-1.dll into the same folder as your executable."}], "owner": {"reputation": 47, "user_id": 6630671, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lcBitgofhNo/AAAAAAAAAAI/AAAAAAAAAHA/SukErSp2AdM/photo.jpg?sz=128", "display_name": "SamelCamel", "link": "https://stackoverflow.com/users/6630671/samelcamel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1266, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1531806267, "creation_date": 1492638492, "last_edit_date": 1492639207, "question_id": 43506659, "link": "https://stackoverflow.com/questions/43506659/procedure-entry-point-error-when-using-strings", "title": "Procedure entry point error when using strings", "body": "<p>I just recently downloaded Code::Blocks for c++ use, and I'm getting an error for this code:</p>\n\n<pre><code>#include &lt;windows.h&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n{\n    string name;\n    cin &gt;&gt; name;\n    cout &lt;&lt; \"hello, \" &lt;&lt; name &lt;&lt; \"\\n\";\n    system(\"pause\");\n}\n</code></pre>\n\n<p>The error says:</p>\n\n<blockquote>\n  <p>The procedure entry point _ZNSt7_cxx1112basic_stringlcSt11char_traitslcESalcEEC1Ev could not be located in the dynamic link library (path)</p>\n</blockquote>\n\n<p>Everything compiles perfectly, and it runs properly in the IDE, but when running the executable it gives me the error. I'm using the mingw compiler. Any help is appreciated!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1492639161, "post_id": 43506647, "comment_id": 74068259, "body": "What line is the error on?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1492639475, "post_id": 43506647, "comment_id": 74068393, "body": "Avoid <code>using namespace std;</code>, especially in header files."}, {"owner": {"reputation": 59, "user_id": 4279812, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1640744268/picture?type=large", "display_name": "Ra&#39;kiir", "link": "https://stackoverflow.com/users/4279812/rakiir"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1492648973, "post_id": 43506647, "comment_id": 74071113, "body": "@aschepler on the line ending the HastTable class that reads &quot;};  //End of HashTable Class&quot;"}, {"owner": {"reputation": 59, "user_id": 4279812, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1640744268/picture?type=large", "display_name": "Ra&#39;kiir", "link": "https://stackoverflow.com/users/4279812/rakiir"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1492649006, "post_id": 43506647, "comment_id": 74071126, "body": "@Jarod42 oh okay that&#39;s good to know.  Does using it cause problems or is it just a convention thing?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1492650093, "post_id": 43506647, "comment_id": 74071416, "body": "See <a href=\"http://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\">why-is-using-namespace-std-considered-bad-practice</a>"}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 4279812, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1640744268/picture?type=large", "display_name": "Ra&#39;kiir", "link": "https://stackoverflow.com/users/4279812/rakiir"}, "edited": false, "score": 0, "creation_date": 1492648865, "post_id": 43506859, "comment_id": 74071084, "body": "Hmmm but that gives me two new errors:  (1) &quot;Class Template Has Already Been Defined&quot; error on the end of the HashTable class &amp; (2) &quot;Unable to Match Function Definition to an Existing Declaration&quot; on the constructor, destructor, and each method."}], "tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": false, "score": 0, "last_activity_date": 1492639476, "creation_date": 1492639476, "answer_id": 43506859, "question_id": 43506647, "link": "https://stackoverflow.com/questions/43506647/c-partial-specialization-cannot-match-argument-list-for-primary-template/43506859#43506859", "title": "C++ Partial Specialization Cannot Match Argument List for Primary Template", "body": "<pre><code>template &lt;class T&gt;\nclass HashTable&lt;T&gt; {\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>template &lt;class T&gt;\nclass HashTable {\n</code></pre>\n\n<p>You don't put an argument list after the class name when defining the primary class template, only when defining a specialization.</p>\n"}], "owner": {"reputation": 59, "user_id": 4279812, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1640744268/picture?type=large", "display_name": "Ra&#39;kiir", "link": "https://stackoverflow.com/users/4279812/rakiir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 855, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1492639476, "creation_date": 1492638455, "last_edit_date": 1495535462, "question_id": 43506647, "link": "https://stackoverflow.com/questions/43506647/c-partial-specialization-cannot-match-argument-list-for-primary-template", "title": "C++ Partial Specialization Cannot Match Argument List for Primary Template", "body": "<p>I'm getting an error code C2753 -- 'HashTable: Partial Specialization Cannot Match Argument List for Primary Template -- when I try to build my project.</p>\n\n<p>My HashTable.h file:</p>\n\n<pre><code>#pragma once  //should prevent error C2953..... 'HashTable': class template has already been defined. https://stackoverflow.com/questions/10157416/error-class-template-has-already-been-defined\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include \"Record.h\"\n\nusing namespace std;\n\n/*Create a closed hash HashTable using Double Hashing &amp; Templates and does not allow duplicates.*/\ntemplate &lt;class T&gt;\nclass HashTable&lt;T&gt; {\nprivate:\n    int numItems;\n    int hashSize;\n    Record&lt;T&gt; *hashArray;\n    int hashOne(int) const;\n    int hashTwo(int) const;\n\npublic:\n    /*TEMPLATE*/\n    HashTable();\n    ~HashTable();\n    bool insert(int, T, int&amp;);\n    bool remove(int);\n    bool find(int, T&amp;);\n    float alpha();\n    int getNumItems();\n    int getSize();\n    bool print();\n\n/*Source:  Partial Code for Overriding print method from StackOverflow.com*/\nostream&amp; print(ostream&amp; os) const {\n    os &lt;&lt; \"-----------------------------------------------------------------------\" &lt;&lt; endl;\n    os &lt;&lt; \"Hash Table Slot #|\" &lt;&lt; setw(20) &lt;&lt; \"Key and Value\" &lt;&lt; setw(12) &lt;&lt; \"\" &lt;&lt; endl;\n    os &lt;&lt; \"-----------------------------------------------------------------------\" &lt;&lt; endl;\n    for (int i = 0; i &lt; hashSize; i++)\n    {\n        os &lt;&lt; setw(10) &lt;&lt; i &lt;&lt; setw(8) &lt;&lt; \"|\";\n        if (hashArray[i].isEmpty())\n            os &lt;&lt; setw(16) &lt;&lt; hashArray[i] &lt;&lt; setw(14) &lt;&lt; \"\" &lt;&lt; endl;\n        else if (hashArray[i].isTombstone())\n            os &lt;&lt; setw(20) &lt;&lt; hashArray[i] &lt;&lt; setw(12) &lt;&lt; \"\" &lt;&lt; endl;\n        else\n            os &lt;&lt; setw(12) &lt;&lt; hashArray[i] &lt;&lt; endl;\n    }\n    os &lt;&lt; \"-----------------------------------------------------------------------\" &lt;&lt; endl;\n    return os;\n    }\n};  //End of HashTable Class\n\n/*Constructor of the HashTable.\nInitializes the size to 1000 and numItems to 0.\nLoop to fill hashArray with empty records.*/\ntemplate &lt;class T&gt;\nHashTable&lt;T&gt;::HashTable() {\n    this-&gt;hashSize = 1000;\n    this-&gt;numItems = 0;\n    hashArray = new Record&lt;T&gt;[hashSize];\n    for (int i = 0; i &lt; hashSize; i++) {\n        hashArray[i] = Record&lt;T&gt;();\n    }\n}  //end of Constructor\n\n/*Deconstructor for HashTable.  Deletes hashArray.*/\ntemplate &lt;class T&gt;\nHashTable&lt;T&gt;::~HashTable() {\n    delete[] hashArray;\n}  //end of Deconstructor\n\n/*Insert a new key/value pair into the HashTable, duplicates not allowed.\nIf added return true, return the numver of collisions in int&amp; collisions,and increment numItems.\nOtherwise return false.*/\ntemplate&lt;class T&gt;\nbool HashTable&lt;T&gt;::insert(int key, T value, int&amp; collisions) {\n    if (numItems &gt;= hashSize) {\n        cout &lt;&lt; \"HashArray FULL!\" &lt;&lt; endl;\n        return false;\n    }\n    if (hashArray[hashOne(key)].isNormal()) {\n        int loc = 0;\n        if (hashArray[(hashOne(key) + loc) % hashSize].getKey() == key) {\n            return false;\n    }\n    while (hashArray[(hashOne(key) + loc) % hashSize].isNormal()) {\n        collisions++;\n        loc = loc + hashTwo(key);\n            if (hashArray[(hashOne(key) + loc) % hashSize].getKey() == key) {\n                return false;\n            }\n        }\n        hashArray[(hashOne(key) + loc) % hashSize] = Record&lt;T&gt;(key, value);\n        numItems++;\n        return true;\n    }\n    else {\n        hashArray[hashOne(key)] = Record&lt;T&gt;(key, value);\n        numItems++;\n        return true;\n    }\n    return false;\n}  //end insert method\n\n//...other methods go here...//\n//hashOne &amp; hashTwo functions are my last two functions, if that matters.\n</code></pre>\n\n<p>My .cpp file is really just bare bones, but here it is:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include \"HashTable.h\"\n\nint main() {\n    return 0;\n}\n</code></pre>\n\n<p>I am using Visual Studio 2015 &amp; have already looked <a href=\"https://stackoverflow.com/questions/4445593/c-partial-template-specialization-syntax\">Here</a>, <a href=\"https://stackoverflow.com/questions/15374841/c-template-partial-specialization-member-function\">here</a>, <a href=\"https://stackoverflow.com/questions/882478/c-partial-specialization-function-pointers\">here</a>, and <a href=\"https://stackoverflow.com/questions/6138439/understanding-simple-c-partial-template-specialization\">here</a> trying to find a solution, along with numerous other sources from Google and cplusplus.com, but none of these have solved my problem.</p>\n\n<p>Any help or advice will be greatly appreciated!</p>\n"}, {"tags": ["c++", "templates", "polymorphism"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1492638140, "post_id": 43506562, "comment_id": 74067866, "body": "You&#39;ll need to <code>dynamic_cast</code>, but what you really want is a variant type."}, {"owner": {"reputation": 9148, "user_id": 468904, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/99fc6c2bf830c9d66e74f4cf37d31645?s=128&d=identicon&r=PG", "display_name": "Michael J. Gray", "link": "https://stackoverflow.com/users/468904/michael-j-gray"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1492638596, "post_id": 43506562, "comment_id": 74068052, "body": "Yeah I know I&#39;ll need to do a dynamic cast to the parent type. The thing is, I can&#39;t determine which type to cast to without testing every single type in a hard coded fashion. In the end, I basically need to be able to determine the size of whatever the data is, like the number of elements in the vector or the length of a string; those member functions change based on the type. I thought about a template and just assuming T::size exists, but it may be risky if the function&#39;s behavior is defined differently between types."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1492640985, "post_id": 43506562, "comment_id": 74068921, "body": "If you need to determine a &quot;size&quot; of the data, how about adding <code>virtual std::size_t size() const = 0;</code> to <code>Child</code>?"}, {"owner": {"reputation": 9148, "user_id": 468904, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/99fc6c2bf830c9d66e74f4cf37d31645?s=128&d=identicon&r=PG", "display_name": "Michael J. Gray", "link": "https://stackoverflow.com/users/468904/michael-j-gray"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1492642820, "post_id": 43506562, "comment_id": 74069510, "body": "@aschepler missed your comment before posting my comment on an answer below. This seems like the easiest approach but the downside is that I have to make classes for <i>each</i> data type I want to support."}, {"owner": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "edited": false, "score": 0, "creation_date": 1492643092, "post_id": 43506562, "comment_id": 74069598, "body": "May I ask what exactly you plan to do with the data in that for? And why this can&#39;t be done under the responsibility of parent? I&#39;m asking mostly of curiosity."}, {"owner": {"reputation": 9148, "user_id": 468904, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/99fc6c2bf830c9d66e74f4cf37d31645?s=128&d=identicon&r=PG", "display_name": "Michael J. Gray", "link": "https://stackoverflow.com/users/468904/michael-j-gray"}, "reply_to_user": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "edited": false, "score": 0, "creation_date": 1492646648, "post_id": 43506562, "comment_id": 74070576, "body": "@Aziuth In my real code, I am making an abstraction for Microsoft&#39;s SQL connectivity client and want to store a vector of parameters. Each of the parameters can have different data types (both native and SQL types) and many native types can map to one kind of SQL type (vector, array, string, can map to varchar). I am going to take a pointer to it and pass it to the function Microsoft has exposed to bind parameters to a parameterized SQL statement. This requires a pointer to the data (void *) and a size of the data (numbers of chars, length of binary data, etc). This reduces complexity overall."}], "answers": [{"tags": [], "owner": {"reputation": 8788, "user_id": 6866309, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CFXxE.jpg?s=128&g=1", "display_name": "Pavan Chandaka", "link": "https://stackoverflow.com/users/6866309/pavan-chandaka"}, "is_accepted": false, "score": 0, "last_activity_date": 1492641759, "last_edit_date": 1492641759, "creation_date": 1492641135, "answer_id": 43507175, "question_id": 43506562, "link": "https://stackoverflow.com/questions/43506562/how-can-i-get-the-value-back-from-a-templated-parent-class-without-knowing-the-u/43507175#43507175", "title": "How can I get the value back from a templated parent class without knowing the underlying type?", "body": "<p>Try this program (for the question: <em>How would I determine the type used in the parent class from the base class here?</em>):</p>\n\n<p>The output prints the types..\nBut some more work is needed to look better</p>\n\n<pre><code>value a of type:i\nvalue b of type:NSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE\n</code></pre>\n\n<p>Here \"i\" means integer in the first line.</p>\n\n<p>The second one has \"basic_string\" in it. But some junk around it.</p>\n\n<p>I am posting this because, it may trigger better ideas.</p>\n\n<p>Added comments for the code modified.</p>\n\n<pre><code>//g++  5.4.0\n\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;memory&gt;\n\n//CREATED ANOTHER VARIABLE AND FUNCTION FOR TYPENAME.\n//MODIFIED CONSTRUCTOR ACCORDINGLY.\nclass Child \n{\n    private:\n    std::string name;\n    std::string tyName;\n\n    public:\n    Child(const std::string &amp; name,const std::string &amp;tyname):name(name), tyName (tyname)\n    { }\n\n    std::string  getName()\n    {\n        return name;\n    }\n\n    std::string  getTypeName()\n    {\n        return tyName;\n    }\n};\n\n//MODIFIED CONSTRUCTOR TO PASS THE TYPENAME TO PARENT CLASS.\ntemplate&lt;typename T&gt;\nclass Parent : public Child\n{\n     private:\n     T data;\n\n     public:\n     Parent(const std::string &amp; name, const T &amp; data) : Child(name,typeid(data).name()), data(data) \n     { }\n\n     inline T GetData() const\n     {\n           return this-&gt;data;\n       }\n};\n\n\n\nint main()\n{\n    std::vector&lt;std::unique_ptr&lt;Child&gt;&gt; values;\n    values.emplace_back(std::make_unique&lt;Parent&lt;int&gt;&gt;(\"value a\", 4));\n    values.emplace_back(std::make_unique&lt;Parent&lt;std::string&gt;&gt;(\"value b\", \"test\"));\n\n\n    //GET THE POINTER OF YOUR BASE CLASS.\n    //PRINT THE TYPE NAME.\n    for (const auto &amp; v : values)\n    {\n        Child *p = dynamic_cast&lt;Child*&gt;(v.get());\n        std::cout&lt;&lt;p-&gt;getName()&lt;&lt;\" of type:\"&lt;&lt;p-&gt;getTypeName()&lt;&lt;std::endl;        \n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9148, "user_id": 468904, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/99fc6c2bf830c9d66e74f4cf37d31645?s=128&d=identicon&r=PG", "display_name": "Michael J. Gray", "link": "https://stackoverflow.com/users/468904/michael-j-gray"}, "edited": false, "score": 0, "creation_date": 1492642766, "post_id": 43507203, "comment_id": 74069496, "body": "You said abstract functionality and it made me think. Would it be an appropriate design to have a <code>virtual size_t GetSize() = 0</code> in my parent class and then implement it in numerous child classes that specialize to the supported backing data? For example, I&#39;d have a <code>StringChild</code> and a <code>IntChild</code> and each would implement their own way of getting their data and data size. I&#39;d then switch inside my loop and use an enum to keep track of the data type and then dynamically cast it when I need to get the data. Seems like a lot of code, but it makes my interface far narrower."}, {"owner": {"reputation": 9148, "user_id": 468904, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/99fc6c2bf830c9d66e74f4cf37d31645?s=128&d=identicon&r=PG", "display_name": "Michael J. Gray", "link": "https://stackoverflow.com/users/468904/michael-j-gray"}, "edited": false, "score": 0, "creation_date": 1492729005, "post_id": 43507203, "comment_id": 74115033, "body": "After some reading and messing around, <code>std::variant</code> fits my needs quite well actually. I&#39;ve reduced my functionality to a set of supported types for each of the SQL types and just <i>attempt</i> conversions of the few supported data types based on the expected SQL type for the parameter in the query."}], "tags": [], "owner": {"reputation": 844, "user_id": 6476520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec3fd95868cd06cf93b9d3f49695766c?s=128&d=identicon&r=PG", "display_name": "1stCLord", "link": "https://stackoverflow.com/users/6476520/1stclord"}, "is_accepted": true, "score": 0, "last_activity_date": 1492641966, "last_edit_date": 1492641966, "creation_date": 1492641260, "answer_id": 43507203, "question_id": 43506562, "link": "https://stackoverflow.com/questions/43506562/how-can-i-get-the-value-back-from-a-templated-parent-class-without-knowing-the-u/43507203#43507203", "title": "How can I get the value back from a templated parent class without knowing the underlying type?", "body": "<p>You want Child promise functionality (returning typed data) that only exists in derived types. Under inheritance, this is abstract functionality. So a set of speculative virtual accessors. upcasts aren't really required here.</p>\n\n<p>I would say. If you don't want Child to promise what it returns, just that it returns <em>something</em> then it seems like your interface is too broad, you are putting the interface in the code that consumes the interface instead, say with speculative casts etc.</p>\n\n<p>Either a set of Child's can be interfaced with though the interface defined in Child or they have some special functionality only available in Derived and must be spoken to that way.</p>\n\n<p>As a wee addendum, you might consider a <code>std::vector&lt;std::variant&lt;type1, type2, ...&gt;&gt;</code> instead of completely erroding the type information in the container? std::variant is C++17 ofc so may not be suitable, but there are 3rd party implementations - boost variant etc.</p>\n"}], "owner": {"reputation": 9148, "user_id": 468904, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/99fc6c2bf830c9d66e74f4cf37d31645?s=128&d=identicon&r=PG", "display_name": "Michael J. Gray", "link": "https://stackoverflow.com/users/468904/michael-j-gray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 2, "accepted_answer_id": 43507203, "answer_count": 2, "score": 2, "last_activity_date": 1492641966, "creation_date": 1492638025, "last_edit_date": 1492638285, "question_id": 43506562, "link": "https://stackoverflow.com/questions/43506562/how-can-i-get-the-value-back-from-a-templated-parent-class-without-knowing-the-u", "title": "How can I get the value back from a templated parent class without knowing the underlying type?", "body": "<p>Given these definitions and some code along these lines for illustration purposes:</p>\n\n<pre><code>class Child\n{\n    private:\n    std::string name;\n\n    public:\n    Child(const std::string &amp; name) name(name)\n    { }\n}\n\ntemplate&lt;typename T&gt;\nclass Parent : public Child\n{\n    private:\n    T data;\n\n    public Parent(const std::string &amp; name, const T &amp; data) : Child(name), data(data)\n    { }\n\n    inline GetData() const\n    {\n        return this-&gt;data;\n    }\n}\n\nstd::vector&lt;std::unique_ptr&lt;Child&gt;&gt; values;\nvalues.emplace_back(std::make_unique&lt;Parent&lt;int&gt;&gt;(\"value a\", 4));\nvalues.emplace_back(std::make_unique&lt;Parent&lt;std::string&gt;&gt;(\"value b\", \"test\"));\n\nfor (const auto &amp; v : values)\n{\n    // I want to access the int and string here!\n}\n</code></pre>\n\n<p>How would I determine the type used in the parent class from the base class here?</p>\n\n<p>The concrete scenario I am working with is actually that I have a bunch of <code>SqlParameterBase</code> classes which contain information about SQL parameters for stored procedures and a <code>SqlParameter&lt;T&gt;</code> template that is supposed to be contained in a <code>std::vector&lt;std::unique_ptr&lt;SqlParameterBase&gt;&gt;</code> and passed into a class that represents a stored procedure configuration, so that it can be called.</p>\n\n<p>But the fundamental problem here is that I need access to the underlying data and I wanted to avoid defining a <code>void *</code> in the base class to contain a pointer to the data. I'd prefer it to be as type safe as possible.</p>\n\n<p>I'm open to alternative designs or approaches to solving this problem as well, so please feel free to suggest something entirely different if you feel it's better.</p>\n"}, {"tags": ["c++", "lua", "visual-studio-2017"], "comments": [{"owner": {"reputation": 64130, "user_id": 107090, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/RZVHK.png?s=128&g=1", "display_name": "lhf", "link": "https://stackoverflow.com/users/107090/lhf"}, "edited": false, "score": 0, "creation_date": 1492648562, "post_id": 43506556, "comment_id": 74071012, "body": "This seems perfectly ok. Perhaps <code>lua_getglobal</code> failed?"}, {"owner": {"reputation": 29, "user_id": 7892285, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g7OSQ.jpg?s=128&g=1", "display_name": "Jiro Komyoji", "link": "https://stackoverflow.com/users/7892285/jiro-komyoji"}, "reply_to_user": {"reputation": 64130, "user_id": 107090, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/RZVHK.png?s=128&g=1", "display_name": "lhf", "link": "https://stackoverflow.com/users/107090/lhf"}, "edited": false, "score": 0, "creation_date": 1492651745, "post_id": 43506556, "comment_id": 74071858, "body": "Using F10 and F11 to move forward, the debugger doesn&#39;t seem to mind anything in lua_getglobal. It&#39;s only when I reach lua_gettable (state_, -2); that it exits with &quot;The program &#39;[12308] src.exe&#39; has exited with code 3 (0x3).&quot; There is no debugging information, even though I compiled and linked lua3.5.4.dll with /DEBUG:FULL and /PDB:FILENAME. It just exits. It&#39;s also not possible to step into lua_gettable for some reason."}, {"owner": {"reputation": 64130, "user_id": 107090, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/RZVHK.png?s=128&g=1", "display_name": "lhf", "link": "https://stackoverflow.com/users/107090/lhf"}, "edited": false, "score": 1, "creation_date": 1492653120, "post_id": 43506556, "comment_id": 74072198, "body": "I meant, did <code>lua_getglobal</code> leave nil on the Lua stack?"}, {"owner": {"reputation": 29, "user_id": 7892285, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g7OSQ.jpg?s=128&g=1", "display_name": "Jiro Komyoji", "link": "https://stackoverflow.com/users/7892285/jiro-komyoji"}, "reply_to_user": {"reputation": 64130, "user_id": 107090, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/RZVHK.png?s=128&g=1", "display_name": "lhf", "link": "https://stackoverflow.com/users/107090/lhf"}, "edited": false, "score": 0, "creation_date": 1492705029, "post_id": 43506556, "comment_id": 74102982, "body": "I&#39;m not succeeding in getting the stack value during debug. Used lua_stacktrace() and still nothing."}, {"owner": {"reputation": 64130, "user_id": 107090, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/RZVHK.png?s=128&g=1", "display_name": "lhf", "link": "https://stackoverflow.com/users/107090/lhf"}, "edited": false, "score": 1, "creation_date": 1492706471, "post_id": 43506556, "comment_id": 74103797, "body": "Add  <code>assert(lua_istable(state,-1));</code> after <code>lua_getglobal</code>."}, {"owner": {"reputation": 29, "user_id": 7892285, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g7OSQ.jpg?s=128&g=1", "display_name": "Jiro Komyoji", "link": "https://stackoverflow.com/users/7892285/jiro-komyoji"}, "reply_to_user": {"reputation": 64130, "user_id": 107090, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/RZVHK.png?s=128&g=1", "display_name": "lhf", "link": "https://stackoverflow.com/users/107090/lhf"}, "edited": false, "score": 0, "creation_date": 1492973374, "post_id": 43506556, "comment_id": 74200353, "body": "Hello again and thank you for offering help. When debugging, an exception is thrown at the line you suggested. I have included assert.h. It seems the value of &quot;state&quot; is now {...}."}, {"owner": {"reputation": 29, "user_id": 7892285, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g7OSQ.jpg?s=128&g=1", "display_name": "Jiro Komyoji", "link": "https://stackoverflow.com/users/7892285/jiro-komyoji"}, "reply_to_user": {"reputation": 64130, "user_id": 107090, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/RZVHK.png?s=128&g=1", "display_name": "lhf", "link": "https://stackoverflow.com/users/107090/lhf"}, "edited": false, "score": 0, "creation_date": 1492973824, "post_id": 43506556, "comment_id": 74200530, "body": "It is unfortunate. I was not the one who added Lua to the code in the past. Unsure if this makes a difference, original code contained lua_open(), which would not compile now. I had to change the function to luaL_newstate()"}, {"owner": {"reputation": 64130, "user_id": 107090, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/RZVHK.png?s=128&g=1", "display_name": "lhf", "link": "https://stackoverflow.com/users/107090/lhf"}, "edited": false, "score": 0, "creation_date": 1492973982, "post_id": 43506556, "comment_id": 74200595, "body": "Can you just try with the version of Lua that you used in 2005? (I&#39;m guessing 5.0.)"}], "owner": {"reputation": 29, "user_id": 7892285, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g7OSQ.jpg?s=128&g=1", "display_name": "Jiro Komyoji", "link": "https://stackoverflow.com/users/7892285/jiro-komyoji"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 375, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1492638009, "creation_date": 1492638009, "question_id": 43506556, "link": "https://stackoverflow.com/questions/43506556/need-help-updating-lua-code-in-visual-studio-2017-c-code", "title": "Need help updating Lua code in Visual Studio 2017 C++ code", "body": "<p>I have this code that used to work in 2005 but it seems that Lua has changed and I admit I'm stumped. </p>\n\n<pre><code>bool SLua::getValue (const char *table, const char *key, int  *result){\n\nlua_getglobal (state_, table);\nlua_pushstring (state_, key);\nlua_gettable (state_, -2); \n\n*result = lua_tonumber (state_, -1);\nlua_pop (state_, 2);\n\nreturn true; }\n</code></pre>\n\n<p>My compiled app crashes every time on lua_gettable (state_, -2);\nIs this due to changes in Lua? I already had to swap lua_open() elsewhere with luaL_newstate().</p>\n\n<p>Thanks for any help</p>\n"}, {"tags": ["c++", "c++11", "templates", "variadic-templates", "template-templates"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1492638691, "post_id": 43506517, "comment_id": 74068092, "body": "Not directly, but a template alias would certainly seem viable, wouldn&#39;t it?"}], "answers": [{"comments": [{"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1492646191, "post_id": 43506643, "comment_id": 74070479, "body": "sorry but... what about using <code>std::priority_queue&lt;T&gt;::container_type</code> instead of <code>decltype(get_queue_storage(std::priority_queue&lt;T&gt;{}))</code>? I suppose you can do without <code>get_queue_storage()</code>"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "reply_to_user": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1492646441, "post_id": 43506643, "comment_id": 74070536, "body": "@max66 Yeah, that would be smarter."}], "tags": [], "owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "is_accepted": true, "score": 3, "last_activity_date": 1492647627, "last_edit_date": 1492647627, "creation_date": 1492638426, "answer_id": 43506643, "question_id": 43506517, "link": "https://stackoverflow.com/questions/43506517/using-default-template-argument/43506643#43506643", "title": "Using default template argument", "body": "<p>You can use this:</p>\n\n<pre><code>template &lt;class T, class Comparator&gt;\nusing dcpq = /*default container priority queue*/\n    std::priority_queue&lt;T, typename std::priority_queue&lt;T&gt;::container_type, Comparator&gt;;\n</code></pre>\n\n<p>to be used like</p>\n\n<pre><code>int main() {\n    auto cmp_fn = [](const std::string &amp;left, const std::string &amp;right)\n                    { return right &lt; left; };\n    dcpq&lt;std::string, decltype(cmp_fn)&gt; queue(cmp_fn);\n}\n</code></pre>\n\n<p>although directly writing</p>\n\n<pre><code>std::priority_queue&lt;std::string, typename std::priority_queue&lt;T&gt;::container,\n    decltype(cmp_fn)&gt; queue(cmp_fn);\n</code></pre>\n\n<p>might be easier.</p>\n"}, {"tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 1, "last_activity_date": 1492648436, "last_edit_date": 1492648436, "creation_date": 1492647978, "answer_id": 43508211, "question_id": 43506517, "link": "https://stackoverflow.com/questions/43506517/using-default-template-argument/43508211#43508211", "title": "Using default template argument", "body": "<p>If you're interested in a specific solution for the second template parameter of <code>std::priority_queue</code>, I suppose you can use the <code>typename std::priority_queue&lt;T&gt;::container_type</code> in some way (see, by example, the solution from nwp; +1).</p>\n\n<p>If your interested in a more general solution (non only for the second default template type, non only for <code>std::priority_queue</code>), I suppose you can first develop a type trait <code>type_n</code> to estract the n-th type from a list</p>\n\n<pre><code>template &lt;std::size_t N, typename T0, typename ... Ts&gt;\nstruct type_n\n { using type = typename type_n&lt;N-1U, Ts...&gt;::type; };\n\ntemplate &lt;typename T0, typename ... Ts&gt;\nstruct type_n&lt;0U, T0, Ts...&gt;\n { using type = T0; };\n</code></pre>\n\n<p>next a type traits <code>type_cnt_n</code> (that use <code>type_n</code>) to extract the n-th type argument of a template-template parameter</p>\n\n<pre><code>template &lt;std::size_t, typename&gt;\nstruct type_cnt_n;\n\ntemplate &lt;std::size_t N, template &lt;typename ...&gt; class Cnt, typename ... Ts&gt;\nstruct type_cnt_n&lt;N, Cnt&lt;Ts...&gt;&gt;\n { using type = typename type_n&lt;N, Ts...&gt;::type; };\n</code></pre>\n\n<p>and last (following the answer from nwp) a <code>make_priority_queue()</code> function</p>\n\n<pre><code>template &lt;typename T, typename Cmp&gt;\nauto make_priority_queue (Cmp const &amp; cmp)\n { return std::priority_queue&lt;T,\n      typename type_cnt_n&lt;1U, std::priority_queue&lt;T&gt;&gt;::type, Cmp&gt; { cmp }; }\n</code></pre>\n\n<p>The problem of this solution is that works only with template-template types with type-only template parameter (so works with <code>std::priority_queue</code>, with <code>std::vector</code>, with <code>std::map</code> but doesn't work with <code>std::array</code>).</p>\n\n<p>The following is a full working ... well, a full compiling... example</p>\n\n<pre><code>#include &lt;queue&gt;\n#include &lt;iostream&gt;\n\ntemplate &lt;std::size_t N, typename T0, typename ... Ts&gt;\nstruct type_n\n { using type = typename type_n&lt;N-1U, Ts...&gt;::type; };\n\ntemplate &lt;typename T0, typename ... Ts&gt;\nstruct type_n&lt;0U, T0, Ts...&gt;\n { using type = T0; };\n\ntemplate &lt;std::size_t, typename&gt;\nstruct type_cnt_n;\n\ntemplate &lt;std::size_t N, template &lt;typename ...&gt; class Cnt, typename ... Ts&gt;\nstruct type_cnt_n&lt;N, Cnt&lt;Ts...&gt;&gt;\n { using type = typename type_n&lt;N, Ts...&gt;::type; };\n\n\ntemplate &lt;typename T, typename Cmp&gt;\nauto make_priority_queue (Cmp const &amp; cmp)\n { return std::priority_queue&lt;T,\n      typename type_cnt_n&lt;1U, std::priority_queue&lt;T&gt;&gt;::type, Cmp&gt; { cmp }; }\n\nint main()\n {\n   auto cmpFn = [](std::string const &amp; l, std::string const &amp;r)\n    { return r &lt; l; };\n\n   auto pq = make_priority_queue&lt;std::string&gt;(cmpFn);\n }\n</code></pre>\n"}], "owner": {"reputation": 2676, "user_id": 5718020, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/RdYmf.png?s=128&g=1", "display_name": "gowrath", "link": "https://stackoverflow.com/users/5718020/gowrath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 1, "accepted_answer_id": 43506643, "answer_count": 2, "score": 2, "last_activity_date": 1492648436, "creation_date": 1492637809, "last_edit_date": 1492648167, "question_id": 43506517, "link": "https://stackoverflow.com/questions/43506517/using-default-template-argument", "title": "Using default template argument", "body": "<p>This question is best asked by example. Say I want to declare a <code>std::priority_queue</code> with a comparator function. I could do:</p>\n\n<pre><code>auto cmp_fn = [](const std::string&amp; left, const std::string&amp; right) {\n    return right &lt; left;\n};\n\nstd::priority_queue&lt;std::string, std::vector&lt;std::string&gt;, decltype(cmp_fn)&gt; queue(cmp_fn);\n</code></pre>\n\n<p>Is there any way to avoid specifying the middle template parameter so that the default is used? Something like</p>\n\n<pre><code>auto cmp_fn = [](const std::string&amp; left, const std::string&amp; right) {\n    return right &lt; left;\n};\n\nstd::priority_queue&lt;std::string, /* use default */, decltype(cmp_fn)&gt; queue(cmp_fn);\n</code></pre>\n\n<p><strong>Note:</strong> This is a simplified example of something more complicated I'm doing. Please don't answer with suggestion of the form: \"just use <code>std::greater</code>\". My question is about the template arguments.</p>\n"}, {"tags": ["c++", "opengl", "cuda"], "comments": [{"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 5, "creation_date": 1492638017, "post_id": 43506313, "comment_id": 74067814, "body": "this is called CUDA/OpenGL interop, and there is CUDA API support for it as well as CUDA sample codes demonstrating various approaches.  You might want to review those."}, {"owner": {"reputation": 411, "user_id": 5546661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G0831.png?s=128&g=1", "display_name": "AlexStepanov", "link": "https://stackoverflow.com/users/5546661/alexstepanov"}, "reply_to_user": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1492692161, "post_id": 43506313, "comment_id": 74092831, "body": "@RobertCrovella thanks for your comment. I didn&#39;t know about this feature and I googled into a wrong direction."}], "owner": {"reputation": 411, "user_id": 5546661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G0831.png?s=128&g=1", "display_name": "AlexStepanov", "link": "https://stackoverflow.com/users/5546661/alexstepanov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "closed_date": 1492662046, "answer_count": 0, "score": 0, "last_activity_date": 1492637038, "creation_date": 1492637038, "question_id": 43506313, "link": "https://stackoverflow.com/questions/43506313/opengl-draw-triangles-from-gpu-memory", "closed_reason": "Duplicate", "title": "OpenGL: draw triangles from GPU memory", "body": "<p>I have a CUDA code that builds a mesh over some set of points. The output of the algorithms is an array of points where each 3 consequtive points form a triangle. Here is an example of the first 9 points (each component is a 4-byte float):</p>\n\n<p><code>XYZRGB XYZRGB XYZRGB XYZRGB XYZRGB XYZRGB XYZRGB XYZRGB XYZRGB ... \n &lt;---1st triangle---&gt; &lt;---2nd triangle---&gt; &lt;---3rd triangle---&gt; ...</code></p>\n\n<p>Now I want to draw these triangles using OpenGL. My current approach is the following: I download the output list of points to CPU memory, pass it to OpenGL and draw them. The obvious problem here is copying data from GPU to the main memory and back to GPU. Copying data in one direction takes up to 10ms. So I want to optimize my code and eliminate memory transfers. Is there a way to tell OpenGL to use my GPU memory?</p>\n\n<p>The main cycle in my code looks like this:</p>\n\n<pre><code>std::vector&lt;Point6f&gt; mesh(config.MaxMeshIndex);\nfor (;;)\n{\n    //build mesh\n    builder-&gt;Build(devPoints.ptr(), devPoints.size());\n    //download to the main memory\n    auto meshSize = builder-&gt;GetMesh(mesh);\n\n    glUseProgram(shaderProgram);\n\n    glBindVertexArray(VAO);\n    glBindBuffer(GL_ARRAY_BUFFER, VBO);\n\n    // tell OpenGL to use points from the main memory\n    glBufferSubData(GL_ARRAY_BUFFER, 0, meshSize * sizeof(Point6f), mesh.data());\n\n    glBindBuffer(GL_ARRAY_BUFFER, 0);\n    glDrawArrays(GL_TRIANGLES, 0, meshSize);\n\n    glBindVertexArray(0);\n}\n</code></pre>\n\n<p>I know OpenGL abstracts much, so maybe there is no API call for this. How about extensions? Or maybe abandon OpenGL in favor of another library?</p>\n\n<p>It's a custom code, so I don't need to be it compatible with all the existing video cards. I need it working on NVidia cards, 1080 GTX specifically.</p>\n"}, {"tags": ["c++", "visual-studio", "unit-testing", "code-coverage"], "owner": {"reputation": 1029, "user_id": 4275854, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/7fbb7391f5e6dd70008e5f390b2a77a9?s=128&d=identicon&r=PG&f=1", "display_name": "MuhKuh", "link": "https://stackoverflow.com/users/4275854/muhkuh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 403, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1492686309, "creation_date": 1492636956, "last_edit_date": 1492686309, "question_id": 43506296, "link": "https://stackoverflow.com/questions/43506296/html-code-coverage-report-with-visual-c-and-catch", "title": "HTML Code Coverage Report with Visual C++ and Catch", "body": "<p>I have a C++ project which uses cmake to build for Unix with gcc and Windows with Visual Studio. The project uses the Catch unit testing framework (<a href=\"https://github.com/philsquared/Catch\" rel=\"nofollow noreferrer\">https://github.com/philsquared/Catch</a>)</p>\n\n<p>Now for Unix I can create a HTML code coverage report with gcov/lcov.</p>\n\n<p>Does anyone know a similar tool like gcov and lcov that can be used to create HTML code coverage reports under Windows with the Microsoft compiler? It must work with the MSBuild system on the console and should not rely on an installed Visual Studio, so it can be used on a build server.</p>\n\n<p>I am aware of the possibility to use things like Cygwin, MinGW or MSYS2 but I was hoping there is something that can be used with the MS C++ compiler and the MSBuild system.</p>\n"}, {"tags": ["c++", "linked-list", "doubly-linked-list"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1492637043, "post_id": 43506277, "comment_id": 74067382, "body": "Why would you need a counter. Just enumerate the list and remove any nodes where the string matches. If you need to somehow return the number of instances removed, that&#39;s  a <i>barely</i> related issue."}, {"owner": {"reputation": 1, "user_id": 7610257, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d7ef800960001f22c84679e5845a7e0a?s=128&d=identicon&r=PG&f=1", "display_name": "StevenSchulze", "link": "https://stackoverflow.com/users/7610257/stevenschulze"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1492637155, "post_id": 43506277, "comment_id": 74067423, "body": "is it really not that related?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1492637652, "post_id": 43506277, "comment_id": 74067643, "body": "Yeah, it&#39;s really not related. You walk the list, pulling matching nodes and disposing of them as appropriate. How many is irrelevant unless the function is specifically targeting a specific number of removals."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1492637697, "post_id": 43506277, "comment_id": 74067667, "body": "From what you have: <code>void removeAll(string value) { while(remove(value)) &#47;*empty*&#47;; }</code>. (even if it is not performant)"}], "answers": [{"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1492637816, "post_id": 43506441, "comment_id": 74067718, "body": "It seems you don&#39;t handle when <code>head == tail == curr</code>."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1492637960, "post_id": 43506441, "comment_id": 74067783, "body": "@Jarod42 Thanks, fixed."}, {"owner": {"reputation": 1, "user_id": 7610257, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d7ef800960001f22c84679e5845a7e0a?s=128&d=identicon&r=PG&f=1", "display_name": "StevenSchulze", "link": "https://stackoverflow.com/users/7610257/stevenschulze"}, "edited": false, "score": 0, "creation_date": 1492638460, "post_id": 43506441, "comment_id": 74067993, "body": "@DavidSchwartz wow that was incredibly fast, basically you wrap the function in a while loop?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 1, "user_id": 7610257, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d7ef800960001f22c84679e5845a7e0a?s=128&d=identicon&r=PG&f=1", "display_name": "StevenSchulze", "link": "https://stackoverflow.com/users/7610257/stevenschulze"}, "edited": false, "score": 0, "creation_date": 1492638511, "post_id": 43506441, "comment_id": 74068012, "body": "@LearningCode Yes, exactly. (You could make this simpler by adding a <code>deleteNode</code> function that deletes a node and returns the next node after it.)"}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 0, "last_activity_date": 1492637914, "last_edit_date": 1492637914, "creation_date": 1492637520, "answer_id": 43506441, "question_id": 43506277, "link": "https://stackoverflow.com/questions/43506277/remove-all-occurrences-of-the-given-string-from-doubly-linked-list/43506441#43506441", "title": "Remove all occurrences of the given string from doubly linked list", "body": "<pre><code>int StringList::remove(string value)\n{\n    Node* curr = head;\n    while (curr != NULL)\n    {\n        if ((curr-&gt;data) == value)\n        {\n            if (curr == head)\n            {\n                head = curr-&gt;next;\n                if (head-&gt;prev != NULL)\n                    head-&gt;prev = NULL;\n                else\n                    tail = NULL;\n                delete curr;\n                curr = head;\n            }\n            else if (curr == tail)\n            {\n                tail = curr-&gt;prev;\n                tail-&gt;next = NULL;\n                delete curr;\n                curr = NULL;\n            }\n            else\n            {\n                curr-&gt;prev-&gt;next = curr-&gt;next;\n                curr-&gt;next-&gt;prev = curr-&gt;prev;\n                Node* next = curr-&gt;next;\n                delete curr;\n                curr = next;\n            }\n        }\n        else\n            curr = curr-&gt;next;\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 0, "last_activity_date": 1492638651, "creation_date": 1492638651, "answer_id": 43506694, "question_id": 43506277, "link": "https://stackoverflow.com/questions/43506277/remove-all-occurrences-of-the-given-string-from-doubly-linked-list/43506694#43506694", "title": "Remove all occurrences of the given string from doubly linked list", "body": "<pre><code>int StringList::remove(string value)\n{\n    int numDeleted = 0;\n\n    Node *node = head;\n    while (node)\n    {\n        Node *nextNode = node-&gt;next;\n\n        if (node-&gt;data == value)\n        {\n            if (head == node)\n                head = head-&gt;next;\n\n            if (tail == node)\n                tail = tail-&gt;previous;\n\n            if (node-&gt;previous)\n                node-&gt;previous-&gt;next = node-&gt;next;\n\n            if (node-&gt;next)\n                node-&gt;next-&gt;previous = node-&gt;previous;\n\n            delete node;\n            ++numDeleted;\n        }\n\n        node = nextNode;\n    }\n\n    return numDeleted;\n}\n</code></pre>\n\n<p>That being said, you really should use <code>std::list</code> instead of a manual list implementation.  Let it handle the nodes for you, including removing values, eg:</p>\n\n<pre><code>#include &lt;list&gt;\n\nclass StringList\n{\nprivate:\n    std::list&lt;std::string&gt; data;\n\npublic:\n    ...\n    void remove(string value);\n};\n\nvoid StringList::remove(string value)\n{\n    data.remove(value);\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7610257, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d7ef800960001f22c84679e5845a7e0a?s=128&d=identicon&r=PG&f=1", "display_name": "StevenSchulze", "link": "https://stackoverflow.com/users/7610257/stevenschulze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 576, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1492638651, "creation_date": 1492636868, "question_id": 43506277, "link": "https://stackoverflow.com/questions/43506277/remove-all-occurrences-of-the-given-string-from-doubly-linked-list", "title": "Remove all occurrences of the given string from doubly linked list", "body": "<pre><code>int StringList::remove(string value)\n{\nif ((head == NULL) || (value &gt; tail-&gt;data) || (value &lt; head-&gt;data))\n{\n    return false;\n}\n\nif ((head == tail) &amp;&amp; (head-&gt;data == value))\n{\n    delete head;\n    head = tail = NULL;\n    return true;\n}\n\nif ((head-&gt;data) == value)\n{\n    head = head-&gt;next;\n    delete head-&gt;previous;\n    head-&gt;previous = NULL;\n    return true;\n}\n\nif ((tail-&gt;data) == value)\n{\n    tail = tail-&gt;previous;\n    delete tail-&gt;next;\n    tail-&gt;next = NULL;\n    return true;\n}\n\nNode *nodeToDelete = head;\n\nwhile ((nodeToDelete-&gt;data) &lt; value)\n{\n    nodeToDelete = nodeToDelete-&gt;next;\n}\n\nif ((nodeToDelete-&gt;data) == value)\n{\n    nodeToDelete-&gt;previous-&gt;next = nodeToDelete-&gt;next;\n    nodeToDelete-&gt;next-&gt;previous = nodeToDelete-&gt;previous;\n    delete nodeToDelete;\n    return true;\n}\nelse\n{\n    return false;\n}\n}\n</code></pre>\n\n<p>I have a doubly linked list here and im trying to remove all occurrences of a given string. Currently the function will only remove one occurrence, which is good but not quite working. I believe I need to somehow implement a counter variable that will count how many times the given string has been removed but im not quite sure how to go about it.  </p>\n\n<p>full code: <a href=\"https://pastebin.com/3bRfJzJT\" rel=\"nofollow noreferrer\">https://pastebin.com/3bRfJzJT</a></p>\n"}, {"tags": ["c++", "arduino"], "comments": [{"owner": {"reputation": 1253, "user_id": 657280, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e014b064025cddd89b9d836679f1ff9c?s=128&d=identicon&r=PG", "display_name": "isick", "link": "https://stackoverflow.com/users/657280/isick"}, "edited": false, "score": 0, "creation_date": 1492636786, "post_id": 43506217, "comment_id": 74067266, "body": "Is it possible there&#39;s a conditional return within the other code inside the main project&#39;s loop?"}, {"owner": {"reputation": 41, "user_id": 4681862, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/98906380a055bda91a2238f5e29259a6?s=128&d=identicon&r=PG&f=1", "display_name": "c_user", "link": "https://stackoverflow.com/users/4681862/c-user"}, "reply_to_user": {"reputation": 1253, "user_id": 657280, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e014b064025cddd89b9d836679f1ff9c?s=128&d=identicon&r=PG", "display_name": "isick", "link": "https://stackoverflow.com/users/657280/isick"}, "edited": false, "score": 0, "creation_date": 1492636930, "post_id": 43506217, "comment_id": 74067327, "body": "Thanks for your quick response.  There are no returns within the main project code.  Just computing data and displaying it to an LCD all within one main loop. @isick"}, {"owner": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 1, "creation_date": 1492637421, "post_id": 43506217, "comment_id": 74067555, "body": "What happens when <code>rpmcount</code> is greater than 1? Maybe you could try <code>if (rpmcount &gt; 0 ) ...</code>"}, {"owner": {"reputation": 41, "user_id": 4681862, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/98906380a055bda91a2238f5e29259a6?s=128&d=identicon&r=PG&f=1", "display_name": "c_user", "link": "https://stackoverflow.com/users/4681862/c-user"}, "edited": false, "score": 0, "creation_date": 1492637982, "post_id": 43506217, "comment_id": 74067794, "body": "rpmcount is reset to 0 in the &#39;If (rpmcount == 0)&#39; instructions so it really never reaches above 1."}, {"owner": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 0, "creation_date": 1492639970, "post_id": 43506217, "comment_id": 74068587, "body": "@c_user Can you guarantee that <code>RPM()</code> is called only once for each call to <code>loop()</code> function?"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 4681862, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/98906380a055bda91a2238f5e29259a6?s=128&d=identicon&r=PG&f=1", "display_name": "c_user", "link": "https://stackoverflow.com/users/4681862/c-user"}, "edited": false, "score": 0, "creation_date": 1492638084, "post_id": 43506406, "comment_id": 74067849, "body": "Thank you for the response, it would make good sense as there is stacks of code contained within void loop (), rpmcount is reset to 0 in the &#39;If (rpmcount == 0)&#39; instructions so it really never reaches above 1."}, {"owner": {"reputation": 41, "user_id": 4681862, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/98906380a055bda91a2238f5e29259a6?s=128&d=identicon&r=PG&f=1", "display_name": "c_user", "link": "https://stackoverflow.com/users/4681862/c-user"}, "edited": false, "score": 0, "creation_date": 1492664631, "post_id": 43506406, "comment_id": 74075253, "body": "Sorry I meant &#39;if(rpmcount == 1)&#39;"}, {"owner": {"reputation": 1253, "user_id": 657280, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e014b064025cddd89b9d836679f1ff9c?s=128&d=identicon&r=PG", "display_name": "isick", "link": "https://stackoverflow.com/users/657280/isick"}, "reply_to_user": {"reputation": 41, "user_id": 4681862, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/98906380a055bda91a2238f5e29259a6?s=128&d=identicon&r=PG&f=1", "display_name": "c_user", "link": "https://stackoverflow.com/users/4681862/c-user"}, "edited": false, "score": 0, "creation_date": 1492718586, "post_id": 43506406, "comment_id": 74110706, "body": "@c_user I think it could reach above one because the function that handles incrementing the rpmcount interrupts. So if your spinning wheel completes two rotations before the main loop completes (possible depending on how much other stuff is in loop) then it could get to 2. Might as well change it to <code>&gt; 0</code> and see if it works"}], "tags": [], "owner": {"reputation": 1103, "user_id": 4200424, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1bb83ff2ad5dcb60ee8e408792526e49?s=128&d=identicon&r=PG&f=1", "display_name": "bennji_of_the_overflow", "link": "https://stackoverflow.com/users/4200424/bennji-of-the-overflow"}, "is_accepted": false, "score": 0, "last_activity_date": 1492653123, "last_edit_date": 1492653123, "creation_date": 1492637397, "answer_id": 43506406, "question_id": 43506217, "link": "https://stackoverflow.com/questions/43506217/cant-figure-out-why-this-arduino-code-will-not-work/43506406#43506406", "title": "Can&#39;t figure out why this Arduino code will not work?", "body": "<p>I'm not an Arduino expert, but it seems to me that it would be possible (in fact, likely) for <code>rpmcount</code> to be sometimes greater than 1 when <code>loop()</code> is executed. The variable <code>rpmcount</code> is being incremented by means of an interrupt, and there doesn't appear to be any way of ensuring that loop is called once for each interrupt. In other words, what happens if there are multiple revolutions of the wheel in between calls to <code>loop()</code>?</p>\n\n<p>This would be especially likely to cause the problem you are seeing if <code>loop()</code> in your full project has a lot of other tasks to perform and may explain why it sometimes works right at the start. </p>\n\n<p>You should be able to fix the issue by just testing for <code>rpmcount &gt;= 1</code></p>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 4681862, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/98906380a055bda91a2238f5e29259a6?s=128&d=identicon&r=PG&f=1", "display_name": "c_user", "link": "https://stackoverflow.com/users/4681862/c-user"}, "edited": false, "score": 0, "creation_date": 1492664749, "post_id": 43509928, "comment_id": 74075299, "body": "Thank you for the response! Could you possibly give some example of the millis() calls for the LCD, im not quite sure how I would do that. @Derek"}, {"owner": {"reputation": 58, "user_id": 7021499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2f164f2dd408976431ba91462ee3dc0?s=128&d=identicon&r=PG", "display_name": "Derek", "link": "https://stackoverflow.com/users/7021499/derek"}, "reply_to_user": {"reputation": 41, "user_id": 4681862, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/98906380a055bda91a2238f5e29259a6?s=128&d=identicon&r=PG&f=1", "display_name": "c_user", "link": "https://stackoverflow.com/users/4681862/c-user"}, "edited": false, "score": 0, "creation_date": 1492688232, "post_id": 43509928, "comment_id": 74089920, "body": "The block of code in the response above is an example of how to figure out how long a section of code takes to run. The current millis is saved in temp, the code that is under analysis is allowed to run, and then the difference in time from the start is output over the serial connection. In order to see the value being produced one needs to open the terminal (Serial Monitor) in the arduino IDE."}], "tags": [], "owner": {"reputation": 58, "user_id": 7021499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2f164f2dd408976431ba91462ee3dc0?s=128&d=identicon&r=PG", "display_name": "Derek", "link": "https://stackoverflow.com/users/7021499/derek"}, "is_accepted": false, "score": 0, "last_activity_date": 1492660504, "creation_date": 1492660504, "answer_id": 43509928, "question_id": 43506217, "link": "https://stackoverflow.com/questions/43506217/cant-figure-out-why-this-arduino-code-will-not-work/43509928#43509928", "title": "Can&#39;t figure out why this Arduino code will not work?", "body": "<p>Other people have recommended that the if statement rpmcount == 1 be updated to rpmcount >= 1. I agree with them and here is why:</p>\n\n<p>When the LCD code is added to your project it makes the loop() call take far longer than when it is not there. Since the loop call is taking so long the wheel is going to get around several times before the rpmcount = 0 code even gets a chance to run. Try removing the rpm code and putting millis() calls around the LCD code to see how long it takes to update the LCD. Then as a test replace the LCD update code with a delay of the measured interval.</p>\n\n<pre><code>  unsigned long temp = millis();\n\n  lcd.clear();\n  lcd.begin(16,2);\n  lcd.setCursor(0,0);\n  lcd.print(\"GS=\");\n  lcd.setCursor(3,0);\n  lcd.print(groundspeed,1);\n  lcd.print(\"m/s\");\n  lcd.setCursor(10,0);\n  lcd.print(\"D=\");\n  lcd.print(distance,0);\n  lcd.print(\"m\");\n\n  Serial.println(millis()-temp); // println can take a while too, \n                                 // so don't add to many in parts \n                                 // of the code that are timing critical.\n</code></pre>\n\n<p>A couple of other points to note:</p>\n\n<p>rpmcount is read before a value has been assigned to it. So it should be initialized to 0 in the setup function. </p>\n\n<p>The same is true for fin_time, as good practice the code should initialize all of the global variables. </p>\n\n<p>Uninitialized variables might cause of some of the undesired behavior... Sometimes.</p>\n"}], "owner": {"reputation": 41, "user_id": 4681862, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/98906380a055bda91a2238f5e29259a6?s=128&d=identicon&r=PG&f=1", "display_name": "c_user", "link": "https://stackoverflow.com/users/4681862/c-user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1492665330, "creation_date": 1492636607, "last_edit_date": 1492665330, "question_id": 43506217, "link": "https://stackoverflow.com/questions/43506217/cant-figure-out-why-this-arduino-code-will-not-work", "title": "Can&#39;t figure out why this Arduino code will not work?", "body": "<p>I am creating a code for a wheel speed sensor as part of a bigger group project.  The code will measure and display ground speed and distance travelled for an autonomous land yacht using a Hall effect sensor and a magnet attached to the wheel.  I have written the code and on its own it works perfectly fine.  However when I try to add it to the full project code it does not seem to work at all.  The only difference is that inside <code>void loop()</code> there is a bunch of other things happening.  I have checked and double checked all the pins and all of the code and I simply can not work it out.  it will work sometimes for one spin of the wheel then it seems to sort of exit a loop somehow as the speed then always reads <code>0m/s</code> once the wheel has stopped and started again,</p>\n\n<p>Here is the code on its own:</p>\n\n<pre><code>int sensorPin1 = 2; // hall effect\nfloat revs;\nfloat rpm;\nvolatile byte rpmcount;\n\nlong fin_time;\nlong current_time;\nlong stop_time;\nfloat distance;\nconst float circumference = 0.31416;\nfloat groundspeed;\nconst float Pi = 3.14159;\n\n#include &lt;LiquidCrystal.h&gt;\nLiquidCrystal lcd(12, 11, 5, 4, 3, 13);\n\n\nvoid setup() \n{\n  Serial.begin(9600);\n  pinMode(sensorPin1, INPUT);\n  attachInterrupt(0, RPM, RISING);  \n}\n\nvoid RPM()\n{\n  rpmcount++;\n  revs++;\n} \n\nvoid loop() \n{\n  lcd.clear();\n  lcd.begin(16,2);\n  lcd.setCursor(0,0);\n  lcd.print(\"GS=\");\n  lcd.setCursor(3,0);\n  lcd.print(groundspeed,1);\n  lcd.print(\"m/s\");\n  lcd.setCursor(10,0);\n  lcd.print(\"D=\");\n  lcd.print(distance,0);\n  lcd.print(\"m\");\n\n  if(rpmcount == 1)\n  {\n    current_time = time - fin_time;\n    rpm = ((60000)/current_time);\n    groundspeed = ((rpm * circumference) / 60);\n    distance = revs*circumference;\n    rpmcount = 0;\n    fin_time = millis();\n  }\n\n  stop_time = millis() - fin_time;\n  if(stop_time &gt;= 2000)\n  {\n    rpm = 0;\n    groundspeed = 0;\n    delay(20);\n  }\n}\n</code></pre>\n\n<p>the code within the main project takes up the exact same structure, the only difference is that <code>void setup()</code> and <code>void loop()</code> have a bunch of other things in side them for all of the other sensors on the vessel.  I have checked the code over and the main arithmetic inside my code is not contained within any other <code>if</code> loops or anything other than <code>if (rpmcount == 1)</code>.</p>\n\n<p>Does anybody have an ideas?</p>\n\n<p>I could upload the full project code but it is hundreds of lines and this question is long enough already.</p>\n"}, {"tags": ["c++", "c++17", "typetraits", "expression-templates"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 7892058, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-H9kGQQyUvjM/AAAAAAAAAAI/AAAAAAAAAJo/5SgW0ObzvjI/photo.jpg?sz=128", "display_name": "Ananta Yudica", "link": "https://stackoverflow.com/users/7892058/ananta-yudica"}, "is_accepted": false, "score": -1, "last_activity_date": 1492640971, "creation_date": 1492640971, "answer_id": 43507154, "question_id": 43506154, "link": "https://stackoverflow.com/questions/43506154/implementing-an-assignment-operator-for-a-row-class-in-a-matrix-library-which-us/43507154#43507154", "title": "Implementing an assignment operator for a row class in a matrix library which uses expression templates", "body": "<p>In member class <code>numeric::detail::row</code>, already defined element(<code>m_e</code>) and index(<code>m_i</code>), then my code like this :</p>\n\n<pre><code>        template&lt;class F,\n            class = std::enable_if_t&lt;is_assignable_v&lt;E&amp;, F&gt;&gt;&gt;\n            row&amp; operator=(vector_expression&lt;F&gt; const&amp; e)\n        {\n            for (size_type i = 0; i &lt; m_e.row_size(); ++i)\n            {\n                m_e(m_i, i) = e(i);\n            }\n            return *this;\n        }\n</code></pre>\n"}], "owner": {"reputation": 14402, "user_id": 547231, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4dbfd610336a9667e0b11eac69b9cc34?s=128&d=identicon&r=PG", "display_name": "0xbadf00d", "link": "https://stackoverflow.com/users/547231/0xbadf00d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1492640971, "creation_date": 1492636331, "question_id": 43506154, "link": "https://stackoverflow.com/questions/43506154/implementing-an-assignment-operator-for-a-row-class-in-a-matrix-library-which-us", "title": "Implementing an assignment operator for a row class in a matrix library which uses expression templates", "body": "<p>Suppose we have a <code>matrix</code> class which makes use of <em>expression templates</em> such that proxy objects are used to make it possible for the compiler to optimize compound expressions.</p>\n\n<p>Now, it's quite natural to create a <code>row</code> class of the following form:</p>\n\n<pre><code>namespace detail\n{\n    template&lt;class E&gt;\n    class row\n        : public vector_expression&lt;row&lt;E&gt;&gt;\n    {\n    public:\n        using size_type = size_type_t&lt;E&gt;;\n\n        template&lt;class F&gt;\n        row(F&amp;&amp; e, size_type i)\n            : m_e(std::forward&lt;F&gt;(e)),\n              m_i(i)\n        {}\n\n        result_of_call_operator_t&lt;E&amp;&gt; operator()(size_type j) { return m_e(m_i, j); }\n        result_of_call_operator_t&lt;E const&amp;&gt; operator()(size_type j) const { return m_e(m_i, j); }\n\n    private:\n        E m_e;\n        size_type const m_i;\n    };\n}\n</code></pre>\n\n<p>and a corresponding helper function of the following form:</p>\n\n<pre><code>template&lt;class E, class =\n    std::enable_if_t&lt;detail::is_matrix_expression_v&lt;E&gt;&gt;&gt;\ndetail::row&lt;E&gt; row(E&amp;&amp; e, detail::size_type_t&lt;E&gt; i) {\n    return { std::forward&lt;E&gt;(e), i };\n}\n</code></pre>\n\n<p>The idea is that a <code>row</code> might be the row of an actual <code>matrix</code> object or a (temporal) <code>matrix_expression</code>.</p>\n\n<blockquote>\n  <p>What I want to do now is equipping <code>row</code> with an assignment operator such that we can assign (compatible) <code>vector_expression</code>s to a <code>row</code>. Of course, such an operator should be disabled, if the related <code>matrix_expression</code> of the <code>row</code> object is not \"assignable\".</p>\n</blockquote>\n\n<p>Here's a first idea for a useful type trait:</p>\n\n<pre><code>template&lt;class E, class F&gt;\nusing is_assignable_t = decltype(std::declval&lt;result_of_call_operator_t&lt;E&gt;&gt;() = std::declval&lt;result_of_call_operator_t&lt;F&gt;&gt;());\ntemplate&lt;class E, class F&gt;\nconstexpr bool is_assignable_v = is_detected_v&lt;is_assignable_t, E, F&gt;;\n</code></pre>\n\n<blockquote>\n  <p>Now, the problem is that we might have a <code>column</code> class and many similar classes too. So, I'm searching for a way to implement the idea described above in a way which doesn't forces me to add an assignment operator to each of these classes.</p>\n</blockquote>\n\n<p>To be precise, I could equip <code>row</code> with the following operaotr:</p>\n\n<pre><code>template&lt;class F,\n    class = std::enable_if_t&lt;is_assignable_v&lt;E&amp;, F&gt;&gt;&gt;\nrow&amp; operator=(vector_expression&lt;F&gt; const&amp; e)\n{\n    /* ... */\n    return *this;\n}\n</code></pre>\n\n<p>However, I would need to add such an operator to the <code>column</code> class and any other class of this kind too.</p>\n\n<blockquote>\n  <p>To summarize, I would like to implement this at the <code>vector_expression</code> level such that a \"compatible\" (i.e. elements are convertible) <code>vector_expression</code> can be assigned to a \"assignable\" (in the above sense) <code>vector_expression</code>. How can we do that?</p>\n</blockquote>\n\n<p>I've hided the implementation details above, but <a href=\"http://coliru.stacked-crooked.com/view?id=375e58b4bf5b0272\" rel=\"nofollow noreferrer\">here</a> is a Live demo of the stuff you need to answer my question.</p>\n"}, {"tags": ["c++", "opengl", "sdl-2"], "comments": [{"owner": {"reputation": 2020, "user_id": 1433712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2be98543dfefb8fbc4c9560de093c34c?s=128&d=identicon&r=PG", "display_name": "Alden", "link": "https://stackoverflow.com/users/1433712/alden"}, "edited": false, "score": 2, "creation_date": 1492635958, "post_id": 43505983, "comment_id": 74066817, "body": "You&#39;ll need to provide an <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>."}, {"owner": {"reputation": 1, "user_id": 7716611, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209489774215429/picture?type=large", "display_name": "Davide Passaro", "link": "https://stackoverflow.com/users/7716611/davide-passaro"}, "reply_to_user": {"reputation": 2020, "user_id": 1433712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2be98543dfefb8fbc4c9560de093c34c?s=128&d=identicon&r=PG", "display_name": "Alden", "link": "https://stackoverflow.com/users/1433712/alden"}, "edited": false, "score": 0, "creation_date": 1492637070, "post_id": 43505983, "comment_id": 74067388, "body": "Ok! I&#39;m working on it! Thanks for the suggestion!"}, {"owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 0, "creation_date": 1492656979, "post_id": 43505983, "comment_id": 74073119, "body": "Are you switching GL context back to your initial window? Maybe software renderer will solve it for you, although I don&#39;t understand why you needed separate window in the first place."}], "answers": [{"tags": [], "owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "is_accepted": false, "score": 0, "last_activity_date": 1492636693, "creation_date": 1492636693, "answer_id": 43506236, "question_id": 43505983, "link": "https://stackoverflow.com/questions/43505983/sdl-renderer-opengl-conflict/43506236#43506236", "title": "SDL_Renderer opengl conflict", "body": "<p>Don't try to inter-op OpenGL and SDL_Renderer: even if you <em>could</em> guarantee that your platform did/did not implement SDL_Renderer in terms of OpenGL the SDL_Renderer API doesn't have any way to properly set/restore the OpenGL state that SDL_Renderer uses.</p>\n"}], "owner": {"reputation": 1, "user_id": 7716611, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209489774215429/picture?type=large", "display_name": "Davide Passaro", "link": "https://stackoverflow.com/users/7716611/davide-passaro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1492636693, "creation_date": 1492635667, "question_id": 43505983, "link": "https://stackoverflow.com/questions/43505983/sdl-renderer-opengl-conflict", "title": "SDL_Renderer opengl conflict", "body": "<p>I'm new to openGL and SDL and I'm having some problems with a basic program I wrote. I've narrowed it down and it seems like the problem is a conflict between the SDL_CreateRenderer function and how SDL manages OpenGL.</p>\n\n<p>Basically the program is a simple game, drawn with OpenGL, and the problem has risen with me creating a menu. Since the game window was created with the \"SDL_WINDOW_OPENGL\" flag, I created another window for the menu. Whenever I need to switch between game and menu I just hide and show whichever window I need. To draw on the menu window though I need to create a renderer but after doing so, if I try to go back to the OpenGL window everything crashes catastrophically (computer slows down, everything is unresponsive...).</p>\n\n<p>Can anyone guess where the problem could lie? Or can anyone suggest a better way to solve my game-menu problem?</p>\n"}, {"tags": ["android", "c++", "android-ndk", "clang"], "comments": [{"owner": {"reputation": 77347, "user_id": 1631193, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c713494416ceac454d71c524e15f1c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe Sechan", "link": "https://stackoverflow.com/users/1631193/gabe-sechan"}, "edited": false, "score": 0, "creation_date": 1492636719, "post_id": 43505958, "comment_id": 74067224, "body": "Why not raise your target api to 21?  You can keep the minimum at 15, and not have to worry about there being a problem.  Are you desperately trying to avoid runtime permissions?"}, {"owner": {"reputation": 67098, "user_id": 1235698, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90fd9ad4efef8eb93209f42183c48f3e?s=128&d=identicon&r=PG", "display_name": "Marcin Orlowski", "link": "https://stackoverflow.com/users/1235698/marcin-orlowski"}, "edited": false, "score": 0, "creation_date": 1492636774, "post_id": 43505958, "comment_id": 74067256, "body": "Runtime permissions kicks in at API 23"}, {"owner": {"reputation": 8554, "user_id": 632035, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ed69ad748c440a055502c1b213757e5?s=128&d=identicon&r=PG", "display_name": "Dan Albert", "link": "https://stackoverflow.com/users/632035/dan-albert"}, "edited": false, "score": 2, "creation_date": 1492637079, "post_id": 43505958, "comment_id": 74067393, "body": "&quot;However, there seems to be a bug with Clang + LLVM STL in NDK r14 where symbols like <code>strtold</code> do not get properly defined unless you use a minimum of <code>android-21</code> on the NDK side.&quot; This isn&#39;t a bug. <code>android-21</code> was the first version of Android that had <code>strtold</code>."}, {"owner": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "reply_to_user": {"reputation": 8554, "user_id": 632035, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ed69ad748c440a055502c1b213757e5?s=128&d=identicon&r=PG", "display_name": "Dan Albert", "link": "https://stackoverflow.com/users/632035/dan-albert"}, "edited": false, "score": 0, "creation_date": 1492695338, "post_id": 43505958, "comment_id": 74095529, "body": "@DanAlbert How do you reconcile what C library functions are not available in different NDK API levels? This is very prohibitive, since I can&#39;t use newer toolchains with older APIs since they are missing certain functions that boost and STL require, especially when C++14 is turned on."}, {"owner": {"reputation": 8554, "user_id": 632035, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ed69ad748c440a055502c1b213757e5?s=128&d=identicon&r=PG", "display_name": "Dan Albert", "link": "https://stackoverflow.com/users/632035/dan-albert"}, "edited": false, "score": 0, "creation_date": 1492706910, "post_id": 43505958, "comment_id": 74104073, "body": "Easiest way to figure out what was available when is to read <a href=\"https://android.googlesource.com/platform/bionic/+/master/libc/libc.map.txt\" rel=\"nofollow noreferrer\">the version script</a> (there&#39;s a similar one for libm in <code>..&#47;libm</code>). When it comes to the STL, nothing in the STL should come up as missing because libc++ is backed by libandroid_support. Are you using a custom build system? If your build system isn&#39;t using libandroid_support, that&#39;ll be the issue."}, {"owner": {"reputation": 8554, "user_id": 632035, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ed69ad748c440a055502c1b213757e5?s=128&d=identicon&r=PG", "display_name": "Dan Albert", "link": "https://stackoverflow.com/users/632035/dan-albert"}, "edited": false, "score": 0, "creation_date": 1492706937, "post_id": 43505958, "comment_id": 74104093, "body": "Doing the same for everything in Boost is a different story. We do have some plans for solving this generically in <a href=\"https://android.googlesource.com/platform/ndk/+/master/docs/Roadmap.md#NDK-r16-NDK-Compatibility-Library\" rel=\"nofollow noreferrer\">our roadmap</a>."}], "answers": [{"comments": [{"owner": {"reputation": 8554, "user_id": 632035, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ed69ad748c440a055502c1b213757e5?s=128&d=identicon&r=PG", "display_name": "Dan Albert", "link": "https://stackoverflow.com/users/632035/dan-albert"}, "edited": false, "score": 0, "creation_date": 1492637466, "post_id": 43506359, "comment_id": 74067576, "body": "Your second and third paragraphs simply are not correct. The NDK STLs are not shipped on the device at all, but with the user&#39;s app. libc++ does use things that are not available until android-21 (or even newer), but those definitions are provided by <code>libandroid_support</code> for older devices."}, {"owner": {"reputation": 844, "user_id": 6476520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec3fd95868cd06cf93b9d3f49695766c?s=128&d=identicon&r=PG", "display_name": "1stCLord", "link": "https://stackoverflow.com/users/6476520/1stclord"}, "reply_to_user": {"reputation": 8554, "user_id": 632035, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ed69ad748c440a055502c1b213757e5?s=128&d=identicon&r=PG", "display_name": "Dan Albert", "link": "https://stackoverflow.com/users/632035/dan-albert"}, "edited": false, "score": 0, "creation_date": 1492638233, "post_id": 43506359, "comment_id": 74067902, "body": "Out of curiosity, what&#39;s the point in dynamic linking the runtimes, if each app bundles their own copy? I assume they&#39;re still deduplicated in memory where possible?  Microsoft, for example, don&#39;t like you bundling runtimes with your app. instead they prefer you to bundle the installer, to allow them to hotfix runtimes etc."}, {"owner": {"reputation": 8554, "user_id": 632035, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ed69ad748c440a055502c1b213757e5?s=128&d=identicon&r=PG", "display_name": "Dan Albert", "link": "https://stackoverflow.com/users/632035/dan-albert"}, "edited": false, "score": 0, "creation_date": 1492638517, "post_id": 43506359, "comment_id": 74068015, "body": "If you have multiple shared libs in your app, you need to use the shared STL rather than the static one. If you have only one shared library, you&#39;re actually better off with the static one."}], "tags": [], "owner": {"reputation": 844, "user_id": 6476520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec3fd95868cd06cf93b9d3f49695766c?s=128&d=identicon&r=PG", "display_name": "1stCLord", "link": "https://stackoverflow.com/users/6476520/1stclord"}, "is_accepted": false, "score": 0, "last_activity_date": 1492638094, "last_edit_date": 1492638094, "creation_date": 1492637232, "answer_id": 43506359, "question_id": 43505958, "link": "https://stackoverflow.com/questions/43505958/is-it-valid-to-use-a-higher-api-in-the-android-ndk-than-the-minimum-in-android-m/43506359#43506359", "title": "Is it valid to use a higher API in the Android NDK than the minimum in Android Manifest?", "body": "<p>If I remember right specifying a minimum in the ndk will include headers and link against the libraries shipped with that release of android. \nThis, in theory, will be fine as long as 1.) the libraries exist in the old version and 2.) the libraries are ABI compatible with the old version. That means no breaking changes in class definitions or presence, absence or location of symbols in the binary, generally linux is quite good at preserving ABI compatibility but it isn't bulletproof and with android, google seem to add and remove things as and when they feel like it for virtually no reason. They certainly don't advertise when they break or preserve ABI compatibility in older versions.</p>\n\n<p><s>I think modern versions of android will also warn you in the loadlibrary code if you try and load libraries linked against newer platforms. Which doesn't look good.</s> (I must've imagined this)</p>\n\n<p>All this conspires to say you probably shouldn't do it. <s>In your case I would probably recommend not using the LLVM STL (or linking it statically), since that is the source of the undefined symbols, the LLVM STL did not ship on devices before platform 21, so you cannot link against it and target those devices.</s></p>\n"}, {"comments": [{"owner": {"reputation": 844, "user_id": 6476520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec3fd95868cd06cf93b9d3f49695766c?s=128&d=identicon&r=PG", "display_name": "1stCLord", "link": "https://stackoverflow.com/users/6476520/1stclord"}, "edited": false, "score": 0, "creation_date": 1492637401, "post_id": 43506377, "comment_id": 74067543, "body": "we seem to keep bumping into each other :-P"}, {"owner": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "edited": false, "score": 0, "creation_date": 1492638453, "post_id": 43506377, "comment_id": 74067986, "body": "Does this really matter if I&#39;m statically linking STL?"}, {"owner": {"reputation": 8554, "user_id": 632035, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ed69ad748c440a055502c1b213757e5?s=128&d=identicon&r=PG", "display_name": "Dan Albert", "link": "https://stackoverflow.com/users/632035/dan-albert"}, "edited": false, "score": 0, "creation_date": 1492638584, "post_id": 43506377, "comment_id": 74068048, "body": "That&#39;s neither here nor there. The C library isn&#39;t statically linked."}], "tags": [], "owner": {"reputation": 8554, "user_id": 632035, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ed69ad748c440a055502c1b213757e5?s=128&d=identicon&r=PG", "display_name": "Dan Albert", "link": "https://stackoverflow.com/users/632035/dan-albert"}, "is_accepted": true, "score": 1, "last_activity_date": 1492637295, "last_edit_date": 1592644375, "creation_date": 1492637295, "answer_id": 43506377, "question_id": 43505958, "link": "https://stackoverflow.com/questions/43505958/is-it-valid-to-use-a-higher-api-in-the-android-ndk-than-the-minimum-in-android-m/43506377#43506377", "title": "Is it valid to use a higher API in the Android NDK than the minimum in Android Manifest?", "body": "<p>Short answer: no. See our <a href=\"https://android.googlesource.com/platform/ndk/+/master/docs/user/common_problems.md#Target-API-Set-Higher-Than-Device-API\" rel=\"nofollow noreferrer\">Common Problems doc</a>.</p>\n<blockquote>\n<p>The target API level in the NDK has a very different meaning than <code>targetSdkVersion</code> does in Java. The NDK target API level is your app's <strong>minimum</strong> supported API level. In <code>ndk-build</code>, this is your <code>APP_PLATFORM</code> setting.</p>\n<p>Since references to functions are (typically) resolved when a library is loaded rather than when they are first called, you cannot reference APIs that are not always present and guard their use with API level checks. If they are referred to at all, they must be present.</p>\n</blockquote>\n<p>Somewhat longer, more pedantic answer: only in special cases where it isn't really higher. There is no android-20 in the NDK, for example. In this case, you'll fall back to android-19, so it's okay to set the NDK target API to android-20 with a <code>minSdkVersion</code> of 19 because you'll actually end up using android-19 anyway.</p>\n"}], "owner": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 861, "favorite_count": 0, "accepted_answer_id": 43506377, "answer_count": 2, "score": 1, "last_activity_date": 1492638094, "creation_date": 1492635556, "last_edit_date": 1492635863, "question_id": 43505958, "link": "https://stackoverflow.com/questions/43505958/is-it-valid-to-use-a-higher-api-in-the-android-ndk-than-the-minimum-in-android-m", "title": "Is it valid to use a higher API in the Android NDK than the minimum in Android Manifest?", "body": "<p>I have an Android app that specifies a minimum API level of 15 and a target API of 17. Normally, I specify <code>android-15</code> (<code>&lt;ndk&gt;/platforms/android-15</code>) as my API level (via <code>--sysroot</code>) for the native portions of my application that use the Android NDK, since AFAIK the minimum should be targeted via the NDK.</p>\n\n<p>However, there seems to be a bug with Clang + LLVM STL in NDK r14 where symbols like <code>strtold</code> do not get properly defined unless you use a <em>minimum</em> of <code>android-21</code> on the NDK side.</p>\n\n<p>So my question is: What are the repercussions of using a <code>*.so</code> compiled for <code>android-21</code> with an APK targeted for min SDK of 15 and target SDK of 17? Can I get away with this?</p>\n"}, {"tags": ["c++", "arrays", "qt"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1492634953, "post_id": 43505702, "comment_id": 74066313, "body": "I&#39;m currious; why would you use old-school C arrays (that decay to pointers when passed as arguments, don&#39;t know their size &amp; can&#39;t be resized) when you could be using <code>std::vector</code> instead?"}, {"owner": {"reputation": 91, "user_id": 1496925, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2Zu7a.png?s=128&g=1", "display_name": "Banjo Batman", "link": "https://stackoverflow.com/users/1496925/banjo-batman"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1492635476, "post_id": 43505702, "comment_id": 74066580, "body": "I studied C in the late 90&#39;s in college and switched to C# around 2003 - so I&#39;ve never really studied C++ directly. I had seen std::vector, but using an array of ints here seemed like a valid use to me. I mean, that&#39;s how I would do it in C# since it&#39;s literally an array of integers and it&#39;s not going to change size once the application is started. Do people not use int[] anymore?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1492636243, "post_id": 43505702, "comment_id": 74066964, "body": "I do not see any problems in the statement you made, only you have done it with the C style, and it works. I have a doubt: I see that it declares the <code>m_array</code> variable and initializes it, but when you emit the signal you send the <code>array</code> variable, you could show how you created the variable array."}], "owner": {"reputation": 91, "user_id": 1496925, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2Zu7a.png?s=128&g=1", "display_name": "Banjo Batman", "link": "https://stackoverflow.com/users/1496925/banjo-batman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 565, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1492634604, "creation_date": 1492634604, "question_id": 43505702, "link": "https://stackoverflow.com/questions/43505702/emitting-array-of-int-with-qt-signal-results-in-uninitialized-array", "title": "Emitting Array of int with QT Signal Results in uninitialized array", "body": "<p>I've declared a signal in QT like this:</p>\n\n<pre><code>signals:\n void onResult(int,int[],int,int);\n</code></pre>\n\n<p>and a slot:</p>\n\n<pre><code>public slots:\nvoid onBinarySearchComplete(int valueToSearchFor, int array[], int  arraySize, int valueIndex); //this slot is connected to the onResult of the BinarySearch class.\n</code></pre>\n\n<p>I'm declaring the array as a global object in my MainWindow class.</p>\n\n<pre><code> int* m_array;\n</code></pre>\n\n<p>and dynamically allocating its memory later,</p>\n\n<pre><code>//create a random array to search.\n int arraySize = 50;\n m_array = new int[arraySize];\n</code></pre>\n\n<p>I then pass the array to the BinarySearch Object, which is also globally declared. </p>\n\n<pre><code> //call the search\n int returnVal= s-&gt;search(searchValue,m_array,arraySize); //the binarysearch class will emit the onResult signal when the search is complete.\n</code></pre>\n\n<p>Inside my BinarySearch Object, I'm sorting the array, and then doing a search inside of the array for an element. \nI can print the array to qDebug() just before I call emit.</p>\n\n<pre><code>//this is the code that emits the signal in my BinarySearch class//\n qDebug()&lt;&lt;\"Printing Array Just Before Emit\";\n printArrayToDebug(array,arraySize);//the array is correct here!\n emit onResult(valueToSearchFor,array,arraySize,halfWayIndex);\n</code></pre>\n\n<p>At that point, the array contains the elements I've put in it, and it's ordered. However, when the array is received in the slot, the array appears to be new, and filled with nonsense. </p>\n\n<pre><code>//This is the slot the receives the signal in my MainWindow class//\nvoid MainWindow::onBinarySearchComplete(int valueToSearchFor, int  array[], int arraySize, int valueIndex){\n\n//this array appears uninitialized!\nfor(int i=0;i&lt;arraySize;i++){\n\n    qDebug()&lt;&lt;array[i];\n}\n</code></pre>\n\n<p>I was under the impression that C++ would pass array as int * in this case, and that this would still work. Is that incorrect? If so, how should I properly pass this array around between these objects?</p>\n"}, {"tags": ["c++", "qt", "winapi"], "comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1492634666, "post_id": 43505580, "comment_id": 74066150, "body": "you can handle <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms645618(v=vs.85).aspx\" rel=\"nofollow noreferrer\">WM_NCHITTEST</a> and return for example <i>HTLEFT</i> when X_cursor - X_window &lt;= SM_CXBORDER . and so for for 4 sides"}, {"owner": {"reputation": 2537, "user_id": 4149835, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh6.googleusercontent.com/-n_QVH3KiURQ/AAAAAAAAAAI/AAAAAAAAAFM/RomdbXIW1hU/photo.jpg?sz=128", "display_name": "Vladimir Bershov", "link": "https://stackoverflow.com/users/4149835/vladimir-bershov"}, "edited": false, "score": 1, "creation_date": 1492634962, "post_id": 43505580, "comment_id": 74066319, "body": "See <a href=\"http://stackoverflow.com/a/37507341/4149835\">stackoverflow.com/a/37507341/4149835</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3287, "user_id": 964478, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Md8qK.png?s=128&g=1", "display_name": "Alex P.", "link": "https://stackoverflow.com/users/964478/alex-p"}, "is_accepted": true, "score": 5, "last_activity_date": 1493017963, "last_edit_date": 1495540015, "creation_date": 1493017963, "answer_id": 43581906, "question_id": 43505580, "link": "https://stackoverflow.com/questions/43505580/qt-windows-resizable-frameless-window/43581906#43581906", "title": "Qt/Windows, resizable frameless window", "body": "<p>Solved it using WM_NCHITTEST, based on code from <a href=\"https://bugreports.qt.io/browse/QTBUG-40578\" rel=\"noreferrer\">https://bugreports.qt.io/browse/QTBUG-40578</a> (bug report not related to this).</p>\n\n<p>.h</p>\n\n<pre><code>class MainWindow : public QMainWindow\n{\n    Q_OBJECT\n......\nprotected:\n    bool nativeEvent(const QByteArray&amp; eventType, void* message, long* result) override;\n};\n</code></pre>\n\n<p>.cpp</p>\n\n<pre><code>bool MainWindow::nativeEvent(const QByteArray&amp; eventType, void* message, long* result)\n{\n    MSG* msg = static_cast&lt;MSG*&gt;(message);\n\n    if (msg-&gt;message == WM_NCHITTEST)\n    {\n        if (isMaximized())\n        {\n            return false;\n        }\n\n        *result = 0;\n        const LONG borderWidth = 8;\n        RECT winrect;\n        GetWindowRect(reinterpret_cast&lt;HWND&gt;(winId()), &amp;winrect);\n\n        // must be short to correctly work with multiple monitors (negative coordinates)\n        short x = msg-&gt;lParam &amp; 0x0000FFFF;\n        short y = (msg-&gt;lParam &amp; 0xFFFF0000) &gt;&gt; 16;\n\n        bool resizeWidth = minimumWidth() != maximumWidth();\n        bool resizeHeight = minimumHeight() != maximumHeight();\n        if (resizeWidth)\n        {\n            //left border\n            if (x &gt;= winrect.left &amp;&amp; x &lt; winrect.left + borderWidth)\n            {\n                *result = HTLEFT;\n            }\n            //right border\n            if (x &lt; winrect.right &amp;&amp; x &gt;= winrect.right - borderWidth)\n            {\n                *result = HTRIGHT;\n            }\n        }\n        if (resizeHeight)\n        {\n            //bottom border\n            if (y &lt; winrect.bottom &amp;&amp; y &gt;= winrect.bottom - borderWidth)\n            {\n                *result = HTBOTTOM;\n            }\n            //top border\n            if (y &gt;= winrect.top &amp;&amp; y &lt; winrect.top + borderWidth)\n            {\n                *result = HTTOP;\n            }\n        }\n        if (resizeWidth &amp;&amp; resizeHeight)\n        {\n            //bottom left corner\n            if (x &gt;= winrect.left &amp;&amp; x &lt; winrect.left + borderWidth &amp;&amp;\n                y &lt; winrect.bottom &amp;&amp; y &gt;= winrect.bottom - borderWidth)\n            {\n                *result = HTBOTTOMLEFT;\n            }\n            //bottom right corner\n            if (x &lt; winrect.right &amp;&amp; x &gt;= winrect.right - borderWidth &amp;&amp;\n                y &lt; winrect.bottom &amp;&amp; y &gt;= winrect.bottom - borderWidth)\n            {\n                *result = HTBOTTOMRIGHT;\n            }\n            //top left corner\n            if (x &gt;= winrect.left &amp;&amp; x &lt; winrect.left + borderWidth &amp;&amp;\n                y &gt;= winrect.top &amp;&amp; y &lt; winrect.top + borderWidth)\n            {\n                *result = HTTOPLEFT;\n            }\n            //top right corner\n            if (x &lt; winrect.right &amp;&amp; x &gt;= winrect.right - borderWidth &amp;&amp;\n                y &gt;= winrect.top &amp;&amp; y &lt; winrect.top + borderWidth)\n            {\n                *result = HTTOPRIGHT;\n            }\n        }\n\n        if (*result != 0)\n            return true;\n\n        QWidget *action = QApplication::widgetAt(QCursor::pos());\n        if (action == this){\n            *result = HTCAPTION;\n            return true;\n        }\n    }\n\n    return false;\n}\n</code></pre>\n\n<p>implementation from <a href=\"https://stackoverflow.com/questions/5752408/qt-resize-borderless-widget/37507341#37507341\">Qt: Resize borderless widget</a> did not work well: sometimes the window is moved during resizing (even in the first version without dragging)</p>\n"}], "owner": {"reputation": 3287, "user_id": 964478, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Md8qK.png?s=128&g=1", "display_name": "Alex P.", "link": "https://stackoverflow.com/users/964478/alex-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4162, "favorite_count": 0, "accepted_answer_id": 43581906, "answer_count": 1, "score": 3, "last_activity_date": 1500459521, "creation_date": 1492634112, "question_id": 43505580, "link": "https://stackoverflow.com/questions/43505580/qt-windows-resizable-frameless-window", "title": "Qt/Windows, resizable frameless window", "body": "<p>I need to create a frameless Qt Windows app that supports resizing.</p>\n\n<p>If I use </p>\n\n<pre><code>setWindowFlags(Qt::FramelessWindowHint);\n</code></pre>\n\n<p>then I can resize only from bottom-right corner (like with the size grip, I guess QMainWindow includes it somehow?).</p>\n\n<p>Is there any easy way to make it resizable from all sides like a normal window? Maybe something platform-specific (Windows)?</p>\n"}, {"tags": ["c++", "algorithm", "memory", "bioinformatics"], "comments": [{"owner": {"reputation": 35084, "user_id": 585411, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/xvEpe.jpg?s=128&g=1", "display_name": "btilly", "link": "https://stackoverflow.com/users/585411/btilly"}, "edited": false, "score": 0, "creation_date": 1492636245, "post_id": 43505558, "comment_id": 74066969, "body": "What are your time needs?  Really?  My first pass would be to create a file whose rows are each kmer.  Do an external sort using the Unix sort utility, then scan it for my counts.  Inefficient, sure.  But simple code to write, simple to understand, and able to handle 100 GB files in a matter of minutes."}], "answers": [{"tags": [], "owner": {"reputation": 17464, "user_id": 2040251, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UsW2G.jpg?s=128&g=1", "display_name": "kraskevich", "link": "https://stackoverflow.com/users/2040251/kraskevich"}, "is_accepted": false, "score": 1, "last_activity_date": 1492635024, "creation_date": 1492635024, "answer_id": 43505797, "question_id": 43505558, "link": "https://stackoverflow.com/questions/43505558/finding-most-common-k-mers-and-their-number-of-apperance-in-c/43505797#43505797", "title": "Finding most common k-mers and their number of apperance in C++", "body": "<p>You can speed up your code by storing the most frequent k-mers in a hash table instead of an array. This way, you'll be able to process one k-mer in <code>O(1)</code> time (assuming that the length is constant) if it's already in the cache (if it's not, it would still require a linear pass, but it might give a big improvement on average). </p>\n\n<p>You could also make it even faster if there're a lot of misses by keeping additional information in some kind of auxiliary data structure (like a priority queue) so that you can find the element with <code>count = 0</code> and remove them without checking all other elements. </p>\n\n<p>Taking into account that <code>k</code> is pretty small in your example, you could increase the size of your in-memory cache (a typical computer should easily keep a few millions of such strings in memory) so that there're less misses. </p>\n\n<p>You could store even more data during the first pass by hashing k-mers (this way, you'll just need to store integers in memory instead of strings).</p>\n\n<p>To sum it up, I'll recommend to make the cache larger (as long as it fits into memory) and use a more suitable data structure that supports fast lookups, like a hash table (<code>std::unordered_map</code> in C++).</p>\n"}], "owner": {"reputation": 47, "user_id": 5836708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b90a8c927299cfbf52d77020370a95c?s=128&d=identicon&r=PG&f=1", "display_name": "theycallmefm", "link": "https://stackoverflow.com/users/5836708/theycallmefm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 460, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1492635024, "creation_date": 1492634018, "question_id": 43505558, "link": "https://stackoverflow.com/questions/43505558/finding-most-common-k-mers-and-their-number-of-apperance-in-c", "title": "Finding most common k-mers and their number of apperance in C++", "body": "<p>Regarding kmer <a href=\"https://en.wikipedia.org/wiki/K-mer\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/K-mer</a></p>\n\n<p>I am trying to find most frequent k-mers in a large fastq file. My plan was to use misra-gries algorithm to find most frequent k-mers, then searching each frequent k-mer's count in file with a second pass. Yet I don't think my algorithm is efficient enough. Here is my first draft below. I try to be memory efficient as possible.(program must not run out of memory) </p>\n\n<p>I also found this DSK algorithm, yet this one is too hard for me to understand without seeing a simple implementation. <a href=\"http://minia.genouest.org/dsk/\" rel=\"nofollow noreferrer\">http://minia.genouest.org/dsk/</a></p>\n\n<p>Note: Also ID of each counter will be integers not strings, I am going to change it later in my final draft.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;sstream&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\nstruct node {\n    string id;\n    int count;\n};\n\nvoid searchCount(vector &lt;node&gt;&amp;memory, string line,int k) {\n    int count = 0;\n    string kMer;\n    for (int i = 0; i &lt; memory.size(); i++) {\n        if (memory[i].id != \"\") {\n            for (int j = 0; j &lt; line.length() - k + 1; j++) {\n                kMer = line.substr(j, k);\n                if (kMer == memory[i].id) {\n                    count++;\n                }\n            }\n        }\n        memory[i].count = count;\n        count = 0;\n    }\n}\n\nint doWeHaveSpace(vector &lt;node&gt; memory) {\n    for (int i = 0; i &lt; memory.size(); i++) {\n        if (memory[i].id == \"\") {\n            return i;\n        }\n    }\n    return -1;\n\n\n}\n\nvoid MisraGries(string element, vector &lt;node&gt; &amp;memory) {\n    bool isHere = false;\n    int index;\n\n    for (int i = 0; i &lt; memory.size(); i++) {\n        if (memory[i].id == element) {\n            isHere = true;\n            index = i;\n        }\n    }\n    if (isHere) {\n        memory[index].count++;\n    }\n    else {\n        int freeIndex = doWeHaveSpace(memory);\n        if (freeIndex+1) {\n            memory[freeIndex].count++;\n            memory[freeIndex].id = element;\n        }\n        else {\n            for (int i = 0; i &lt; memory.size(); i++) {\n                if (memory[i].count != 0) {\n                    memory[i].count--;\n                    if (memory[i].count == 0) {\n                        memory[i].id = \"\";\n                    }\n                }\n            }\n        }\n    }\n}\nvoid filecheck(ifstream &amp; input, string prompt)  // this function checks and opens input files\n{\n    string filename;\n    cout &lt;&lt; \"Please enter file directory and name for \" &lt;&lt; prompt &lt;&lt; \": \";\n    do\n    {\n        getline(cin, filename);\n        input.open(filename.c_str());\n        if (input.fail())\n            cout &lt;&lt; \" wrong file directory. Please enter real directory. \";\n    } while (input.fail());\n}\n\nint main() {\n    int line = 1;\n    string filename;\n    ifstream input;\n    ofstream output;\n    string search;\n    vector &lt;node&gt; frequent(1000);\n    for (int i = 0; i &lt; frequent.size(); i++) {\n        frequent[i].id = \"\";\n        frequent[i].count = 0;\n    }\n    int k = 30;\n    string kMer;\n    filecheck(input, \"input file\");\n\n    while (!input.eof())\n    {\n        getline(input, search); // it gets infos line by line to count lines\n        line++;\n        if (line == 3) {\n            for (int i = 0; i &lt; search.length() - k + 1; i++) {\n                kMer = search.substr(i, k);\n                MisraGries(kMer, frequent);\n            }\n            line = -1;\n        }\n\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "vector", "printing", "cout"], "comments": [{"owner": {"reputation": 646, "user_id": 7251286, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0e021813332cd736c36621f3a549487f?s=128&d=identicon&r=PG&f=1", "display_name": "florgeng", "link": "https://stackoverflow.com/users/7251286/florgeng"}, "edited": false, "score": 0, "creation_date": 1492634109, "post_id": 43505516, "comment_id": 74065814, "body": "Your vector stores pointer of your class, so you need to dereference it before printing."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1492634114, "post_id": 43505516, "comment_id": 74065817, "body": "If you really think it has something to do with the vector, try without it and see if anything changes."}, {"owner": {"reputation": 43, "user_id": 7863079, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/789749880a575aec13c3af3dfe0e2f7e?s=128&d=identicon&r=PG&f=1", "display_name": "hypr2", "link": "https://stackoverflow.com/users/7863079/hypr2"}, "edited": false, "score": 0, "creation_date": 1492634232, "post_id": 43505516, "comment_id": 74065888, "body": "how do I do that dereference?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1492634563, "post_id": 43505516, "comment_id": 74066084, "body": "There we go. This link will work better: <a href=\"http://en.cppreference.com/w/c/language/operator_member_access#Dereference\" rel=\"nofollow noreferrer\">en.cppreference.com/w/c/language/&hellip;</a> A more correct for C++ version is a bit harder to headwrap: <a href=\"http://en.cppreference.com/w/cpp/language/operator_member_access#Built-in_indirection_operator\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/&hellip;</a>"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1492634581, "post_id": 43505516, "comment_id": 74066095, "body": "@hypr2 it depends on how <code>Component</code> is suppose to be printed"}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1492635072, "post_id": 43505691, "comment_id": 74066378, "body": "New minor nag: point the reader here: <a href=\"http://stackoverflow.com/questions/4421706/operator-overloading\">stackoverflow.com/questions/4421706/operator-overloading</a> God knows what crap they might accidentally stumble into with a Google search."}], "tags": [], "owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "is_accepted": true, "score": 3, "last_activity_date": 1492639793, "last_edit_date": 1495542357, "creation_date": 1492634569, "answer_id": 43505691, "question_id": 43505516, "link": "https://stackoverflow.com/questions/43505516/cout-vector-addresses/43505691#43505691", "title": "Cout vector addresses", "body": "<p>You are storing pointers in your vector. The value of a pointer is a memory address, therefore you are seeing addresses in your output. You need to dereference the pointers to access the actual <code>Component</code> objects:</p>\n\n<pre><code>void Frame::print()\n{\n    for (int i = 0; i &lt; vect.size(); i++)\n    {\n        Component *component = vect[i];\n        cout &lt;&lt; *component &lt;&lt; endl; // &lt;-- not the extra '*'\n    }\n}\n</code></pre>\n\n<p>In order for this to work, an <code>operator&lt;&lt;</code> overload for <code>Component</code> is also required:</p>\n\n<pre><code>ostream&amp; operator&lt;&lt;(ostream &amp;out, const Component &amp;comp)\n{\n    // print comp values to out as needed...\n    return out;\n}\n</code></pre>\n\n<p>Recommended reading:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/4421706/operator-overloading\">Operator overloading</a></p>\n\n<p>You also need to study up on pointers and references in general.</p>\n"}, {"comments": [{"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1492634692, "post_id": 43505698, "comment_id": 74066166, "body": "Who is frowning and what is their justification for their frowny faces? cache misses vs construction time?"}, {"owner": {"reputation": 844, "user_id": 6476520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec3fd95868cd06cf93b9d3f49695766c?s=128&d=identicon&r=PG", "display_name": "1stCLord", "link": "https://stackoverflow.com/users/6476520/1stclord"}, "reply_to_user": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1492634969, "post_id": 43505698, "comment_id": 74066327, "body": "Yeah I knew as soon as I hit commit i&#39;d messed up the operator overload, fixed now sorry."}, {"owner": {"reputation": 844, "user_id": 6476520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec3fd95868cd06cf93b9d3f49695766c?s=128&d=identicon&r=PG", "display_name": "1stCLord", "link": "https://stackoverflow.com/users/6476520/1stclord"}, "reply_to_user": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1492635291, "post_id": 43505698, "comment_id": 74066477, "body": "The main reason it&#39;s frowned upon to use raw pointers is it defies RAII, which means leaks are inevitable unless you know every single line of code between new and delete doesn&#39;t unwind the stack, which is very difficult to prove in real code."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1492635365, "post_id": 43505698, "comment_id": 74066514, "body": "So, you&#39;d turn your frown upside down if I had collections of shared_ptr to domain objects?"}, {"owner": {"reputation": 844, "user_id": 6476520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec3fd95868cd06cf93b9d3f49695766c?s=128&d=identicon&r=PG", "display_name": "1stCLord", "link": "https://stackoverflow.com/users/6476520/1stclord"}, "reply_to_user": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1492635814, "post_id": 43505698, "comment_id": 74066753, "body": "Well shared_ptr&#39;s require synchronisation on their reference count so should be used sparingly and shared ownership <i>should</i> be a rare paradigm."}], "tags": [], "owner": {"reputation": 844, "user_id": 6476520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec3fd95868cd06cf93b9d3f49695766c?s=128&d=identicon&r=PG", "display_name": "1stCLord", "link": "https://stackoverflow.com/users/6476520/1stclord"}, "is_accepted": false, "score": 1, "last_activity_date": 1492634934, "last_edit_date": 1492634934, "creation_date": 1492634590, "answer_id": 43505698, "question_id": 43505516, "link": "https://stackoverflow.com/questions/43505516/cout-vector-addresses/43505698#43505698", "title": "Cout vector addresses", "body": "<p>vect is a vector (aka a lump of contiguous storage) of Component * (aka Component pointers) that is it's a chunk of memory with addresses of other chunks of memory which the compiler will treat as a Component class object. Printing those addresses via cout will just give you a big list of meaningless numbers.</p>\n\n<p>What I suspect you want to do is probably not store a vector of Component pointers at all and just store a vector of Components. It's frowned upon in C++ these days to store raw pointers unless you know exactly what you are doing. If you really do want pointers you should use a vector of std::unique_ptr and std::make_unique.</p>\n\n<p>Once you start trying to print Components rather than addresses of them you will most likely see that there is no &lt;&lt; operator for Component. You will need to write one. Something like </p>\n\n<pre><code>std::ostream&amp; operator&lt;&lt;(std::ostream &amp;stream, const Component&amp;component)\n{\n  stream &lt;&lt; component.string_member;\n  return stream;\n}\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 7863079, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/789749880a575aec13c3af3dfe0e2f7e?s=128&d=identicon&r=PG&f=1", "display_name": "hypr2", "link": "https://stackoverflow.com/users/7863079/hypr2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 915, "favorite_count": 0, "accepted_answer_id": 43505691, "answer_count": 2, "score": 0, "last_activity_date": 1492639793, "creation_date": 1492633873, "last_edit_date": 1492634212, "question_id": 43505516, "link": "https://stackoverflow.com/questions/43505516/cout-vector-addresses", "title": "Cout vector addresses", "body": "<p>I'm new to this website and a bit new in programming. I'm using vector for the first time and I want to print content of it but I'm getting addresses instead of normal words. I don't know how to do that in other way than this.</p>\n\n<p>My vector:</p>\n\n<pre><code>vector&lt;Component*&gt; vect;\n</code></pre>\n\n<p>and my code for printing:</p>\n\n<pre><code>void Frame::print() {\n    for (int i = 0; i &lt; vect.size(); i++)\n        cout &lt;&lt; vect[i] &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "gcc"], "comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 3, "creation_date": 1492633353, "post_id": 43505370, "comment_id": 74065372, "body": "Including a *.cpp file is generally a bad idea.  What do you expect to happen when &quot;T1.cpp&quot; is compiled on its own?"}, {"owner": {"reputation": 13852, "user_id": 468725, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/85a49cd89084e6512dee0f140e86d5b4?s=128&d=identicon&r=PG", "display_name": "Pavel P", "link": "https://stackoverflow.com/users/468725/pavel-p"}, "edited": false, "score": 1, "creation_date": 1492633355, "post_id": 43505370, "comment_id": 74065373, "body": "why would you <code>#include &quot;T1.cpp&quot;</code> from main.cpp? Rename it to .h then"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1492633426, "post_id": 43505370, "comment_id": 74065415, "body": "When you compile &quot;T1.cpp&quot; it is not being included in &quot;main.cpp&quot; therefore it isn&#39;t preceded by the <code>namespace</code> declaration. The <code>namespace</code> should be a in a header included by both implementation files, and you should not include implementations in each-other."}, {"owner": {"reputation": 72, "user_id": 1344885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b29d503b45fa38406abcac4be7c44c2?s=128&d=identicon&r=PG&f=1", "display_name": "vpprof", "link": "https://stackoverflow.com/users/1344885/vpprof"}, "reply_to_user": {"reputation": 13852, "user_id": 468725, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/85a49cd89084e6512dee0f140e86d5b4?s=128&d=identicon&r=PG", "display_name": "Pavel P", "link": "https://stackoverflow.com/users/468725/pavel-p"}, "edited": false, "score": 0, "creation_date": 1492634005, "post_id": 43505370, "comment_id": 74065748, "body": "@Pavel: it has nothing to do with the extension. In any case, MyName isn&#39;t accessible from the .cpp associated with the .h file."}, {"owner": {"reputation": 72, "user_id": 1344885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b29d503b45fa38406abcac4be7c44c2?s=128&d=identicon&r=PG&f=1", "display_name": "vpprof", "link": "https://stackoverflow.com/users/1344885/vpprof"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1492634111, "post_id": 43505370, "comment_id": 74065815, "body": "@Fran&#231;oisAndrieux This makes sense, thank you. If I may ask, are the contents of one implementation ever pasted by compiler (or preprocessor) into another implementation, the &quot;master&quot; implementation (or whatever one should call it)?"}, {"owner": {"reputation": 13852, "user_id": 468725, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/85a49cd89084e6512dee0f140e86d5b4?s=128&d=identicon&r=PG", "display_name": "Pavel P", "link": "https://stackoverflow.com/users/468725/pavel-p"}, "edited": false, "score": 0, "creation_date": 1492634128, "post_id": 43505370, "comment_id": 74065827, "body": "@vpprof and what file is &quot;associated with the .h file&quot;? If T1.cpp has only single line as you said it cannot be compiled on it&#39;s own"}, {"owner": {"reputation": 13852, "user_id": 468725, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/85a49cd89084e6512dee0f140e86d5b4?s=128&d=identicon&r=PG", "display_name": "Pavel P", "link": "https://stackoverflow.com/users/468725/pavel-p"}, "edited": false, "score": 0, "creation_date": 1492634221, "post_id": 43505370, "comment_id": 74065879, "body": "@there is no such thing as &quot;contents of one implementation ever pasted by compiler (or preprocessor) into another implementation&quot;. #include means you take that file that you want to include and put its contents in place of that include directive."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1492634241, "post_id": 43505370, "comment_id": 74065900, "body": "@vpprof No, this never happens unless you <code>#include</code> them yourself (which you should generally not do). Each implementation file is compiled by itself without any regard for any other implementation file&#39;s compilation. Each results in it&#39;s own intermediate file. These files are then linker together in a separate step."}, {"owner": {"reputation": 2020, "user_id": 1433712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2be98543dfefb8fbc4c9560de093c34c?s=128&d=identicon&r=PG", "display_name": "Alden", "link": "https://stackoverflow.com/users/1433712/alden"}, "edited": false, "score": 0, "creation_date": 1492634397, "post_id": 43505370, "comment_id": 74065989, "body": "@vpprof with C++ each <code>.cpp</code> file is compiled independently. Usually header files will have some kind of declaration like <code>class MyClass</code>, which tells the compiler that <code>MyClass</code> exists somewhere, and don&#39;t worry about it until later. The linker will find all the missing parts of each <code>.cpp</code> file and combine them."}, {"owner": {"reputation": 72, "user_id": 1344885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b29d503b45fa38406abcac4be7c44c2?s=128&d=identicon&r=PG&f=1", "display_name": "vpprof", "link": "https://stackoverflow.com/users/1344885/vpprof"}, "edited": false, "score": 0, "creation_date": 1492635064, "post_id": 43505370, "comment_id": 74066373, "body": "Hey guys, a very big &quot;thank you&quot; for your valuable information; I think I have a good chance now of finally understanding the idea of .h and .cpp files. So basically each .cpp spawns an .o or .obj file and then the linker combines them into .exe? And my <i>Main.cpp</i> does not need to know the workings of any classes that might be declared in .h files \u2014 it just needs to know they exist and what arguments they take \u2014 and that is why I must include the .h files in my <i>Main.cpp</i>? Is that right?"}, {"owner": {"reputation": 2020, "user_id": 1433712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2be98543dfefb8fbc4c9560de093c34c?s=128&d=identicon&r=PG", "display_name": "Alden", "link": "https://stackoverflow.com/users/1433712/alden"}, "edited": false, "score": 0, "creation_date": 1492635414, "post_id": 43505370, "comment_id": 74066540, "body": "@vpprof that is correct."}], "answers": [{"comments": [{"owner": {"reputation": 72, "user_id": 1344885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b29d503b45fa38406abcac4be7c44c2?s=128&d=identicon&r=PG&f=1", "display_name": "vpprof", "link": "https://stackoverflow.com/users/1344885/vpprof"}, "edited": false, "score": 0, "creation_date": 1492634383, "post_id": 43505468, "comment_id": 74065984, "body": "I see. But the problem persists when I include a header, say <i>T1.h</i> in <i>Main.cpp</i> \u2014 the MyName namespace is invisible to <i>T1.h</i>. So I understand that including a header file <i>T1.h</i> in <i>Main.cpp</i> does not in any way make the code in <i>Main.cpp</i> visible to the associated implementation file <i>T1.cpp</i>?"}, {"owner": {"reputation": 13852, "user_id": 468725, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/85a49cd89084e6512dee0f140e86d5b4?s=128&d=identicon&r=PG", "display_name": "Pavel P", "link": "https://stackoverflow.com/users/468725/pavel-p"}, "reply_to_user": {"reputation": 72, "user_id": 1344885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b29d503b45fa38406abcac4be7c44c2?s=128&d=identicon&r=PG&f=1", "display_name": "vpprof", "link": "https://stackoverflow.com/users/1344885/vpprof"}, "edited": false, "score": 0, "creation_date": 1492634923, "post_id": 43505468, "comment_id": 74066291, "body": "@vpprof as I said, imagine that includes were replaced with contents of the files. What you would get in this case is what compiler sees and for that reason you get errors. It seems that you do not understand this simplest concept."}, {"owner": {"reputation": 2020, "user_id": 1433712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2be98543dfefb8fbc4c9560de093c34c?s=128&d=identicon&r=PG", "display_name": "Alden", "link": "https://stackoverflow.com/users/1433712/alden"}, "reply_to_user": {"reputation": 72, "user_id": 1344885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b29d503b45fa38406abcac4be7c44c2?s=128&d=identicon&r=PG&f=1", "display_name": "vpprof", "link": "https://stackoverflow.com/users/1344885/vpprof"}, "edited": false, "score": 0, "creation_date": 1492635177, "post_id": 43505468, "comment_id": 74066425, "body": "@vpprof take a look at my edit and let me know if it makes sense."}, {"owner": {"reputation": 72, "user_id": 1344885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b29d503b45fa38406abcac4be7c44c2?s=128&d=identicon&r=PG&f=1", "display_name": "vpprof", "link": "https://stackoverflow.com/users/1344885/vpprof"}, "reply_to_user": {"reputation": 13852, "user_id": 468725, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/85a49cd89084e6512dee0f140e86d5b4?s=128&d=identicon&r=PG", "display_name": "Pavel P", "link": "https://stackoverflow.com/users/468725/pavel-p"}, "edited": false, "score": 0, "creation_date": 1492636031, "post_id": 43505468, "comment_id": 74066851, "body": "@Pavel, yes, I daresay I understand how the preprocessor works, thank you. The piece of information that I was missing, is that every .cpp compiles on its own with no regard to any other .cpp. Now I understand, my <i>main.cpp</i> compiled correctly while my <i>T1.cpp</i> compiled incorrectly because it had no knowledge of the <i>main.cpp</i>&#39;s existence."}, {"owner": {"reputation": 72, "user_id": 1344885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b29d503b45fa38406abcac4be7c44c2?s=128&d=identicon&r=PG&f=1", "display_name": "vpprof", "link": "https://stackoverflow.com/users/1344885/vpprof"}, "edited": false, "score": 0, "creation_date": 1492636114, "post_id": 43505468, "comment_id": 74066894, "body": "@Alden \u2014 yes indeed, this makes sense. One question though, is the <code>extern</code> absolutely necessary? Would the compiler show errors if it encountered two definitions like <code>int MyVar</code>? Does this logic also apply to declaring functions?"}, {"owner": {"reputation": 2020, "user_id": 1433712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2be98543dfefb8fbc4c9560de093c34c?s=128&d=identicon&r=PG", "display_name": "Alden", "link": "https://stackoverflow.com/users/1433712/alden"}, "reply_to_user": {"reputation": 72, "user_id": 1344885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b29d503b45fa38406abcac4be7c44c2?s=128&d=identicon&r=PG&f=1", "display_name": "vpprof", "link": "https://stackoverflow.com/users/1344885/vpprof"}, "edited": false, "score": 0, "creation_date": 1492636499, "post_id": 43505468, "comment_id": 74067100, "body": "@vpprof <code>extern</code> tells the compiler to not allocate space for the variable because it will be allocated elsewhere. If excluded, with <code>T1.cpp</code> it will complain that <code>MyVar</code> is being redefined. Functions behave differently. You can declare a function, <code>int myfunc();</code> and define a function, <code>int myfunc() {return 1;}</code>. Declarations should go in headers and they let your <code>.cpp</code> know that the definition will exist somewhere."}], "tags": [], "owner": {"reputation": 2020, "user_id": 1433712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2be98543dfefb8fbc4c9560de093c34c?s=128&d=identicon&r=PG", "display_name": "Alden", "link": "https://stackoverflow.com/users/1433712/alden"}, "is_accepted": true, "score": 0, "last_activity_date": 1492635095, "last_edit_date": 1492635095, "creation_date": 1492633656, "answer_id": 43505468, "question_id": 43505370, "link": "https://stackoverflow.com/questions/43505370/c-gcc-namespace-not-found/43505468#43505468", "title": "C++ gcc Namespace not found", "body": "<p>What's happening is that CodeBlocks is compiling both main.cpp and T1.cpp. Here is what happens when you try to compile each one:</p>\n\n<p>main.cpp:</p>\n\n<pre><code>$ g++ main.cpp\n$\n</code></pre>\n\n<p>T1.cpp</p>\n\n<pre><code>$ g++ T1.cpp\nT1.cpp:1:17: error: \u2018MyName\u2019 is not a namespace-name\n using namespace MyName;\n                 ^\nT1.cpp:1:23: error: expected namespace-name before \u2018;\u2019 token\n using namespace MyName;\n                       ^\n$\n</code></pre>\n\n<p>T1.cpp, when compiled on it's own, has no knowledge of <code>MyName</code>. To fix this, don't include <code>.cpp</code> files, and put your declarations in header files.</p>\n\n<p>Edit: From what I gather, this may be a better way to organize your example:</p>\n\n<p>T1.h:</p>\n\n<pre><code>namespace MyName {\n    extern int MyVar;\n}\n</code></pre>\n\n<p>T1.cpp</p>\n\n<pre><code>#include \"T1.h\"\n\nint MyName::MyVar = 5;\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include \"T1.h\"\n#include &lt;iostream&gt;\n\nusing namespace MyName;\n\nint main()\n{\n    std::cout &lt;&lt; MyVar &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>Now it will compile correctly:</p>\n\n<pre><code>$ g++ -c T1.cpp -o T1.o\n$ g++ -c main.cpp -o main.o\n$ g++ T1.o main.o\n$ ./a.out\n5\n</code></pre>\n"}], "owner": {"reputation": 72, "user_id": 1344885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b29d503b45fa38406abcac4be7c44c2?s=128&d=identicon&r=PG&f=1", "display_name": "vpprof", "link": "https://stackoverflow.com/users/1344885/vpprof"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 876, "favorite_count": 0, "accepted_answer_id": 43505468, "answer_count": 1, "score": -1, "last_activity_date": 1492635095, "creation_date": 1492633220, "question_id": 43505370, "link": "https://stackoverflow.com/questions/43505370/c-gcc-namespace-not-found", "title": "C++ gcc Namespace not found", "body": "<p>I know there are many similar topics but there are equally many unique mistakes that may lead to this problem (so I think). Therefore I ask, after some research.</p>\n\n<p>My problem is that the compiler, GNU GCC, when compiling one file does not see my namespace declared in another file. The IDE (CodeBlocks) evidently does see it as it auto-completes the name of the namespace. I tried to isolate the problem and came up with this:</p>\n\n<p>File main.cpp:</p>\n\n<pre><code>namespace MyName\n{\n    int MyVar;\n}\n\n#include \"T1.cpp\"\n\nint main()\n{\n    return 0;\n}\n</code></pre>\n\n<p>File T1.cpp:</p>\n\n<pre><code>using namespace MyName;\n</code></pre>\n\n<p><em>error: 'MyName' is not a name-space name.</em></p>\n\n<p>In my project I have a header file, say T1.h, and an implementation file T1.cpp \u2014 and MyName isn't accessible in either of them.</p>\n\n<p>Any help or guidance would be appreciated.</p>\n"}, {"tags": ["c++", "com", "msxml"], "comments": [{"owner": {"reputation": 1221, "user_id": 6610379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/869458e7097eb3f538a64ab550a0aa4b?s=128&d=identicon&r=PG&f=1", "display_name": "Phil Brubaker", "link": "https://stackoverflow.com/users/6610379/phil-brubaker"}, "edited": false, "score": 0, "creation_date": 1492632983, "post_id": 43505040, "comment_id": 74065178, "body": "<a href=\"https://msdn.microsoft.com/en-us/library/ms757028(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>IXMLDOMNodeList</code></a> doesn&#39;t look like it wants to be modified as you&#39;ve found.  Depending on what needs to consume that list and/or what further processing you need to do, removing white space (but not other text nodes, right?) on the front-end sounds reasonable.  This may be of some help: <a href=\"http://stackoverflow.com/questions/11776910/xpath-expression-to-remove-whitespace\" title=\"xpath expression to remove whitespace\">stackoverflow.com/questions/11776910/&hellip;</a>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1492639894, "post_id": 43505040, "comment_id": 74068560, "body": "If you don&#39;t want the whitespace nodes, why are you setting <code>preserveWhiteSpace</code> to true in the first place?"}, {"owner": {"reputation": 25, "user_id": 6710849, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/839d68d830cde0d89b2139b0ddf70e9c?s=128&d=identicon&r=PG&f=1", "display_name": "jebusayah", "link": "https://stackoverflow.com/users/6710849/jebusayah"}, "edited": false, "score": 0, "creation_date": 1492696341, "post_id": 43505040, "comment_id": 74096353, "body": "The XML files are an outline for a report. It has a grid, with rows/columns. I want to add some whitespace before some of the row names so I can add a header. I can add something like [space%4%] and match it to draw 4 whitespaces whenever it appears, but I would prefer not to if it can be avoided."}, {"owner": {"reputation": 1221, "user_id": 6610379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/869458e7097eb3f538a64ab550a0aa4b?s=128&d=identicon&r=PG&f=1", "display_name": "Phil Brubaker", "link": "https://stackoverflow.com/users/6610379/phil-brubaker"}, "edited": false, "score": 0, "creation_date": 1492792961, "post_id": 43505040, "comment_id": 74148012, "body": "@jebusayah So does that mean there&#39;s some formatting &quot;baked in&quot; to the XML data, via strategically-placed spacing?  (<i>Going on that assumption</i>...) ...while it&#39;s going to add work, you might look at <a href=\"https://en.wikipedia.org/wiki/XSLT\" rel=\"nofollow noreferrer\">XSLT</a> for your formatting needs.  XML is a vehicle for the data, but isn&#39;t traditionally used as its presentation."}], "owner": {"reputation": 25, "user_id": 6710849, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/839d68d830cde0d89b2139b0ddf70e9c?s=128&d=identicon&r=PG&f=1", "display_name": "jebusayah", "link": "https://stackoverflow.com/users/6710849/jebusayah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1492639870, "creation_date": 1492632033, "last_edit_date": 1492639870, "question_id": 43505040, "link": "https://stackoverflow.com/questions/43505040/c-reading-xml-files-using-with-preservewhitespace-enabled", "title": "C++: Reading XML files using with &#39;preserveWhitespace&#39; enabled", "body": "<p>I'm using <code>IXMLDOMNode::get_childNodes()</code> with <code>preserveWhiteSpace</code> set to true, which causes it to treat carriage returns between elements as nodes. In my child list, I get a few nodes with the name <code>#text</code>.</p>\n\n<p>Is there any way to remove these nodes from my list? I have a <code>CComPtr&lt;IXMLDOMNodeList&gt;</code> object, and there are no members that allow me to add/remove to it.</p>\n\n<p>I'm thinking of using <code>selectNodes()</code> instead, and passing an expression that ignores all nodes with the name <code>#text</code>. Would this be possible? </p>\n\n<p>I just tried <code>selectNodes()</code> and passed the expression <code>//*[not(self::#text)]</code>, but that doesn't seem to work.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1492631189, "post_id": 43504768, "comment_id": 74064133, "body": "I&#39;m confused. What mechanism were you expecting to come into play to <code>delete</code> your singleton if you do not call <code>delete</code> on it? Implementing a destructor simply describes what happens when an instance is destroyed, it does not have any impact on <i>if</i> or <i>when</i> it is destroyed."}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1492631267, "post_id": 43504768, "comment_id": 74064180, "body": "Your destructor is going to fail at least once."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1492631340, "post_id": 43504768, "comment_id": 74064213, "body": "Pointers don&#39;t get deleted when they go out of scope. Normally a singleton is initialized once anyway. Calling <code>delete</code> on yourself inside your own destructor is also probably a super bad idea."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6774424"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1492631429, "post_id": 43504768, "comment_id": 74064263, "body": "@Fran&#231;oisAndrieux I don&#39;t really know. From what I understand it&#39;s just good practice to delete things allocated with <code>new</code>. Though I will still use the destructor for other things."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1492631479, "post_id": 43504768, "comment_id": 74064294, "body": "@TomSmale <i>So I&#39;ve written a simple singleton class</i> -- Not as simple as the <a href=\"http://stackoverflow.com/questions/17712001/how-is-meyers-implementation-of-a-singleton-actually-a-singleton\">Meyer&#39;s singleton</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6774424"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1492631622, "post_id": 43504768, "comment_id": 74064382, "body": "@JesperJuhl Oh I see. So the destructor will not get called on a singleton untill the end of the program. I think I&#39;ve overlooked the attributes of the static keyword."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1492632287, "post_id": 43504768, "comment_id": 74064778, "body": "@TomSmale To be clear, with the code you showed (with destroyInstance commented out), the destructor never runs, not at the end of the program either. The end of the program can&#39;t magically run destructors (it will however reclaim most resources, memory, sockets, etc)."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1492632287, "post_id": 43504768, "comment_id": 74064779, "body": "@TomSmale A pointer reaching the end of it&#39;s lifetime does not automatically cause the deletion of the pointed object. You <i>must</i> call <code>delete</code> yourself on every instance you allocate with <code>new</code> (it&#39;s not just good practice). Destructors are called when an instance is destroyed, for example when you call <code>delete</code> yourself. They are in no way a replacement for <code>delete</code> and preform very different duties than <code>delete</code>."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1492632355, "post_id": 43504768, "comment_id": 74064818, "body": "@TomSmale You may be interested in <a href=\"http://en.cppreference.com/w/cpp/memory/unique_ptr\" rel=\"nofollow noreferrer\"><code>std::unique_ptr</code></a> and <a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr\" rel=\"nofollow noreferrer\"><code>std::shared_ptr</code></a>."}, {"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1492634148, "post_id": 43504768, "comment_id": 74065835, "body": "You have no automatic duration <code>Singleton</code>, so you shouldn&#39;t expect the destructor to run automatically.  The pointer itself is destroyed, but not what it points to; that&#39;s what <code>delete</code> is for, it lets you call the pointed-to object&#39;s destructor and deallocate the memory itself in one fell swoop.  As Fran&#231;ois Andrieux said, you might want to look into <code>std::unique_ptr</code>; it would let you do <a href=\"http://rextester.com/UOFG36197\" rel=\"nofollow noreferrer\">something like this</a>.  (The destructor does nothing because the <code>unique_ptr</code>&#39;s destructor will automatically delete the pointer for you.)"}], "answers": [{"comments": [{"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1492632058, "post_id": 43504852, "comment_id": 74064632, "body": "It looks to me like it&#39;s less a case of needing to destroy and recreate it during runtime, and more a case of lazy creation."}], "tags": [], "owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "is_accepted": false, "score": 5, "last_activity_date": 1492631355, "creation_date": 1492631355, "answer_id": 43504852, "question_id": 43504768, "link": "https://stackoverflow.com/questions/43504768/singleton-destructor-not-called/43504852#43504852", "title": "Singleton destructor not called?", "body": "<p>The logic in your destructor is weirdly recursive:</p>\n\n<pre><code>~Singleton( )\n{\n    if (instance != nullptr) {\n        cout &lt;&lt; \"Destroying instance.\\n\";\n        delete instance;\n        instance = nullptr;\n    }\n}\n</code></pre>\n\n<p>You call delete on the instance in the destructor, but calling delete is what triggers the destructor to run!</p>\n\n<p>You say that the destructor doesn't get called when it goes out of scope, but remember that you created your singleton with <code>new</code>; such objects do not have their destructor called automatically any more when scope ends.</p>\n\n<p>Unless you really desperately need to destroy and re-create your singleton in the middle of the program (extremely rare in my experience), just create your singleton like this instead:</p>\n\n<pre><code>static Singleton&amp; getInstance() {\n    static Singleton s;\n    return s;\n}\n</code></pre>\n\n<p>Get rid of <code>destroyInstance</code>, and just have the destructor clean up after itself as it should, without worrying about the static instance.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 7892058, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-H9kGQQyUvjM/AAAAAAAAAAI/AAAAAAAAAJo/5SgW0ObzvjI/photo.jpg?sz=128", "display_name": "Ananta Yudica", "link": "https://stackoverflow.com/users/7892058/ananta-yudica"}, "is_accepted": false, "score": 0, "last_activity_date": 1492636536, "creation_date": 1492636536, "answer_id": 43506204, "question_id": 43504768, "link": "https://stackoverflow.com/questions/43504768/singleton-destructor-not-called/43506204#43506204", "title": "Singleton destructor not called?", "body": "<p>Using smart pointer (<code>#include &lt;memory&gt;</code>)</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n\nusing namespace std;\n\nclass Singleton {\npublic:\n    static Singleton &amp;getInstance()\n    {\n        if (instance == nullptr) {\n            cout &lt;&lt; \"Creating instance.\\n\";\n            instance = std::shared_ptr&lt;Singleton&gt;(new Singleton());\n        }\n        return *instance;\n    }\n    static void destroyInstance()\n    {\n        if (instance != nullptr) {\n            cout &lt;&lt; \"Destroying instance.\\n\";\n            instance.reset();\n            instance = nullptr;\n        }\n    }\n    ~Singleton()\n    {\n        if (instance != nullptr) {\n            cout &lt;&lt; \"Destroying instance.\\n\";\n            instance.reset();\n            instance = nullptr;\n        }\n    }\nprivate:\n    Singleton() { }\n\n    static std::shared_ptr&lt;Singleton&gt; instance;\n};\nstd::shared_ptr&lt;Singleton&gt; Singleton::instance = nullptr;\n\nint main()\n{\n    Singleton &amp;singleton = Singleton::getInstance();\n\n    //singleton.destroyInstance();\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6774424"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1507, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1492775074, "creation_date": 1492631050, "last_edit_date": 1492632117, "question_id": 43504768, "link": "https://stackoverflow.com/questions/43504768/singleton-destructor-not-called", "title": "Singleton destructor not called?", "body": "<p>So I've written a simple singleton class. When I create an object the constructor is called, but it's destructor (which frees the object) doesn't seem to be called when it goes out of scope.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass Singleton {\npublic:\n    static Singleton &amp;getInstance( )\n    {\n        if (instance == nullptr) {\n            cout &lt;&lt; \"Creating instance.\\n\";\n            instance = new Singleton();\n        }\n        return *instance;\n    }\n    static void destroyInstance( )\n    {\n        if (instance != nullptr) {\n            cout &lt;&lt; \"Destroying instance.\\n\";\n            delete instance;\n            instance = nullptr;\n        }\n    }\n    ~Singleton( )\n    {\n        if (instance != nullptr) {\n            cout &lt;&lt; \"Destroying instance.\\n\";\n            delete instance;\n            instance = nullptr;\n        }\n    }\nprivate:\n    Singleton( ) { }\n\n    static Singleton *instance;\n};\nSingleton *Singleton::instance = nullptr;\n\nint main( )\n{\n    Singleton &amp;singleton = Singleton::getInstance();\n\n    //singleton.destroyInstance();\n\n    return 0;\n}\n</code></pre>\n\n<p>With the destructor code the program just outputs this.</p>\n\n<pre><code>Creating instance.\n</code></pre>\n\n<p>If I comment out the destructor and use the <code>destroyInstance()</code> function it outputs this.</p>\n\n<pre><code>Creating instance.\nDestorying instance.\n</code></pre>\n\n<p>Why is it doing this?</p>\n\n<p>EDIT: I'm an idiot. Just overlooked a bunch of things. This question might as well be deleted as it's not really that useful. </p>\n"}, {"tags": ["c++", "opencv", "svm"], "comments": [{"owner": {"reputation": 2837, "user_id": 6730448, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/68eebbe4b190040ef1201b845374a7c1?s=128&d=identicon&r=PG&f=1", "display_name": "Rick M.", "link": "https://stackoverflow.com/users/6730448/rick-m"}, "edited": false, "score": 1, "creation_date": 1492639316, "post_id": 43504697, "comment_id": 74068323, "body": "You are checking only for <code>result1</code>. Correct me if I&#39;m wrong, but shouldn&#39;t you be checking the other results too, if you are assigning them?"}, {"owner": {"reputation": 821, "user_id": 5507319, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a5f152bdfe99cba0d730ab47b5d68717?s=128&d=identicon&r=PG&f=1", "display_name": "Yirga", "link": "https://stackoverflow.com/users/5507319/yirga"}, "reply_to_user": {"reputation": 2837, "user_id": 6730448, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/68eebbe4b190040ef1201b845374a7c1?s=128&d=identicon&r=PG&f=1", "display_name": "Rick M.", "link": "https://stackoverflow.com/users/6730448/rick-m"}, "edited": false, "score": 0, "creation_date": 1492640371, "post_id": 43504697, "comment_id": 74068719, "body": "I am sorry you are right i have edited my question. This error occur when i write this question in my original code it is not only result1 there are result2 and result3 checked."}], "owner": {"reputation": 821, "user_id": 5507319, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a5f152bdfe99cba0d730ab47b5d68717?s=128&d=identicon&r=PG&f=1", "display_name": "Yirga", "link": "https://stackoverflow.com/users/5507319/yirga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 571, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1492640134, "creation_date": 1492630810, "last_edit_date": 1495540932, "question_id": 43504697, "link": "https://stackoverflow.com/questions/43504697/opencv-svm-predict-the-same-label-for-different-image-inputs", "title": "Opencv SVM predict the same label for different image inputs?", "body": "<p>There are many similar question in this site like <a href=\"https://stackoverflow.com/questions/33699200/opencv-svm-gives-strange-prediction-results?rq=1\">this</a>, <a href=\"https://stackoverflow.com/questions/33755408/opencv-svm-always-predicts-higher-class-label\">this</a> and many resources on how optimize the SVM parameters inorder to have accurate result but none of the give me any solution to my problem. I am using Opencv SVM i have 100 training images with three classes(Cat, Dog and Human) and i have also 10 test images from the training images.</p>\n\n<p>My code is  </p>\n\n<pre><code> //Read images, detect the keypoints and compute descriptor.\n for(int i=0; i&lt;99; i++)\n    {\n\n        sprintf(filePathName,\"C:\\\\Users\\\\what\\\\Documents\\\\images\\\\%i.jpg\",i+1);\n        mat=cv::imread(filePathName);\n        siftFeatureDetector.detect(mat,keypoint);\n        siftDescriptorExtractor.compute(mat,keypoint,descriptor);\n   //add the descriptor to unclustered descriptor to cluster them using Bow.\n        unclusteredDescriptors.push_back(descriptor);\n\n    }\nint dictionarySize=2000;\nint retries=1;\ncv::TermCriteria tc(cv::TermCriteria::COUNT,100000,0.001);\nint flags=KMEANS_PP_CENTERS;\ncv::BOWKMeansTrainer bowTrainer(dictionarySize,tc,retries,flags);\ncv::Mat dictionary=bowTrainer.cluster(unclusteredDescriptors);\n\n//Label the images\nvector&lt;string&gt; imageFilenames;\nvector&lt;string&gt; labels;\nfor(int i=0; i&lt;99; i++)\n{\n    sprintf(filename,\"C:\\\\Users\\\\what\\\\Documents\\\\images\\\\%i.jpg\",i+1);\n    imageFilenames.push_back(filename);\n    if(i&gt;=0 &amp;&amp; i&lt;=46)\n        labels.push_back(\"Cat\");\n    else if(i&gt;46&amp;&amp;i&lt;=92)\n        labels.push_back(\"Dog\");\n    else if(i&gt;92&amp;&amp;i&lt;=99)\n        labels.push_back(\"Human\");\n    else\n        cout&lt;&lt;\"Error in labeling the  images\"&lt;&lt;endl;\n}\ncv::Ptr&lt;cv::FeatureDetector&gt; siftFeatureDetector(new cv::SiftFeatureDetector(1000));\ncv::Ptr&lt;cv::DescriptorExtractor&gt; siftDescriptorExtractor(new cv::SiftDescriptorExtractor);\ncv::Ptr&lt;cv::DescriptorMatcher&gt; flannDescriptorMatcher(new cv::FlannBasedMatcher);\ncv::BOWImgDescriptorExtractor bowImgDescriptorExtractor(siftDescriptorExtractor,flannDescriptorMatcher);\nbowImgDescriptorExtractor.setVocabulary(dictionary);\n\n//compute the image descriptor using the BOWImgDescriptorExtractor.  \nstring filename;\ncv::Mat image;\nvector&lt;cv::KeyPoint&gt; keypoint;\ncv::Mat descriptor;\nstring label;\nmap&lt;string,cv::Mat&gt; mapedImage;\n for(int i=0; i&lt;filenames.size(); i++)\n\n{\n    filename=imageFilenames[i];\n    label=labels[i];\n    image=cv::imread(filename);\n    siftFeatureDetector-&gt;detect(image,keypoint);\n    bowImgDescriptorExtractor.compute(image,keypoint,descriptor);\n    if(mapedImage.count(label)==0)\n    {\n        mapedImage[label].create(0,descriptor.cols,descriptor.type());\n     }\n\n    mapedImage[label].push_back(descriptor);\n\n}\n\n//Train the data using SVM one-vs-one multi-class classifier.\nvector&lt;string&gt; trainClassName;\ncv::SVMParams params;\n    params.kernel_type = CvSVM::RBF; //CvSVM::RBF, CvSVM::LINEAR ...\n    params.svm_type=SVM::C_SVC;\n    params.term_crit = cvTermCriteria(CV_TERMCRIT_ITER+CV_TERMCRIT_EPS,1000000,0.000001);\nfor(map&lt;string,cv::Mat&gt;::iterator it =mapedImage.begin(); it!=mapedImage.end(); it++)\n{\n\n    trainClassName.push_back(it-&gt;first);\n}\n//Train the Cat vs Dog.\n cv::Mat svmTrainData1;\ncv::Mat svmLabels1;//\nstring stringLabel1;\n//positive sample.\n stringLabel1=trainClassName[0];\nsvmTrainData1.push_back(mapedImage[stringLabel1]);\ncv::Mat labelone1=cv::Mat::ones(mapedImage[stringLabel1].rows,1,CV_32SC1);\nsvmLabels1.push_back(labelone1);\n//negative sample.\nstringLabel1=trainClassName[1];\nsvmTrainData1.push_back(mapedImage[stringLabel1]);\ncv::Mat labelzero1=cv::Mat::zeros(mapedImage[stringLabel1].rows,1,CV_32SC1);\nsvmLabels1.push_back(labelzero1);\ncv::SVM svm1;\n    bool trainSvm1=svm1.train_auto(svmTrainData1,svmLabels1,cv::Mat(),cv::Mat(),params,10,SVM::get_default_grid(SVM::C),SVM::get_default_grid(SVM::GAMMA),SVM::get_default_grid(SVM::P),SVM::get_default_grid(SVM::NU),\n                     SVM::get_default_grid(SVM::COEF),SVM::get_default_grid(SVM::DEGREE),false); \n                 SVM::get_default_grid(SVM::COEF),SVM::get_default_grid(SVM::DEGREE),false); \n//i have trained the Cat, Human and Human, Dog the same as above. \n //Test stage.\ncv::SVM svmcatordog;\ncv::SVM svmcatorhuman;\ncv::SVM svmdogorhuman;\nsvmcatordog.load(\"C:\\\\Users\\\\what\\\\Documents\\\\svmcatordog.yml\");\nsvmcatorhuman.load(\"C:\\\\Users\\\\what\\\\Documents\\\\svmcatorhuman.yml\");\nsvmdogorhuman.load(\"C:\\\\Users\\\\what\\\\Documents\\\\svmdogorhuman.yml\");\nfor(int i=0;i&lt;10;i++)\n{   sprintf(fileName,\"C:\\\\Users\\\\what\\\\Documents\\\\images\\\\testImage\\\\%i.jpg\",i+1);\nimages=cv::imread(fileName);\nvector&lt;cv::KeyPoint&gt; keypoint;\ncv::Mat testImageDescriptor;\nsiftFeatureDetector-&gt;detect(images,keypoint);\nbowImgDescriptorExtractor.compute(images,keypoint,testImageDescriptor);\nint catCount=0;\nint dogCount=0;\nint humanCount=0;\nint result1=svmcatordog.predict(testImageDescriptor);\nif(result1==1)\n    catCount++;\nif(result1==0)\n    dogCount++;\nint result2=svmcatorhuman.predict(testImageDescriptor); \nif(result2==1)\n    catCount++;\nif(result2==0)\n    humanCount++;\nint result3=svmdogorhuman.predict(testImageDescriptor); \nif(result3==1)\n    dogCount++;\nif(result3==0)\n    humanCount++;\nif(catCount&gt;dogCount&amp;&amp;catCount&gt;&gt;humanCount)\n        cout&lt;&lt;\"Image at \"&lt;&lt;i+1&lt;&lt;\" have cat\"&lt;&lt;endl;\n    else if(dogCount&gt;catCount&amp;&amp;dogCount&gt;humanCount)\n        cout&lt;&lt;\"Image at \"&lt;&lt;i+1&lt;&lt;\" have dog\"&lt;&lt;endl;\n    else if(humanCount&gt;catCount&amp;&amp;humanCount&gt;dogCount)\n        cout&lt;&lt;\"Image at \"&lt;&lt;i+1&lt;&lt;\" have human\"&lt;&lt;endl;\n    else if(catCount==dogCount&amp;&amp;catCount==humanCount)\n         cout&lt;&lt;\"Ambiguous catCount,dogCount and humanCount   are the same\"&lt;&lt;endl;\n    else if(catCount==dogCount)\n        cout&lt;&lt;\"Ambiguous catCount and dogCount are the same\"&lt;&lt;endl;\n    else if(catCount==humanCount)\n        cout&lt;&lt;\"Ambiguous catCount and humanCount are the same\"&lt;&lt;endl;\n    else if(dogCount==humanCount)\n        cout&lt;&lt;\"Ambiguous dogCount and humanCount are the same\"&lt;&lt;endl;\n    else\n        cout&lt;&lt;\"Error in the counting results\"&lt;&lt;endl; \n</code></pre>\n\n<p>}</p>\n\n<p>When i predict the training images the result is same label. It is either \"Image have a cat\" or \"Ambiguous catCount,dogCount and humanCount   are the same\".  Based on <a href=\"https://stackoverflow.com/questions/33755408/opencv-svm-always-predicts-higher-class-label\">this</a> question answer i started changing the value of C and gamma the from default values of C and gamma in the train_auto method which is 1. I changed the values of C from 0.1 to 1000 and gamma from 1e-0008 to 1000 still the result is incorrect. Can any one help me how to stop from predicting the same label for different inputs?\nSorry for the long post! </p>\n"}, {"tags": ["c++", "opengl", "cpu"], "comments": [{"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 3, "creation_date": 1492630809, "post_id": 43504615, "comment_id": 74063867, "body": "You should stop using deprecated <code>glBegin</code>/<code>glEnd</code> and fixed pipeline API and switch to vertex buffers and shaders. <a href=\"http://stackoverflow.com/questions/14300569/opengl-glbegin-glend\">See this question.</a>"}, {"owner": {"reputation": 831, "user_id": 1411030, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/GG56b.jpg?s=128&g=1", "display_name": "ether_joe", "link": "https://stackoverflow.com/users/1411030/ether-joe"}, "edited": false, "score": 0, "creation_date": 1492716562, "post_id": 43504615, "comment_id": 74109592, "body": "I&#39;m sort of an opengl noob, but are you doing face culling properly ? <a href=\"https://learnopengl.com/#!Advanced-OpenGL/Face-culling\" rel=\"nofollow noreferrer\">learnopengl.com/#!Advanced-OpenGL/Face-culling</a>"}, {"owner": {"reputation": 23, "user_id": 7891653, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9f4e132dfa0747fd56f96de490f31d1a?s=128&d=identicon&r=PG&f=1", "display_name": "ground0", "link": "https://stackoverflow.com/users/7891653/ground0"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1492810729, "post_id": 43504615, "comment_id": 74156967, "body": "@VTT can you comment what I added?"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1492841322, "post_id": 43504615, "comment_id": 74163512, "body": "Yes, you do create the whole VB at once instead of pushing vertex by vertex (though recreating the same buffer every frame does not make much sense), but your code still uses the same deprecated fixed pipeline API. Also it is not clear how do you measure performance. Did you actually get more fps our CPU utilization is wasted on something else?"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7891653, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9f4e132dfa0747fd56f96de490f31d1a?s=128&d=identicon&r=PG&f=1", "display_name": "ground0", "link": "https://stackoverflow.com/users/7891653/ground0"}, "edited": false, "score": 0, "creation_date": 1492810812, "post_id": 43505650, "comment_id": 74157006, "body": "Can you comment what I added?"}], "tags": [], "owner": {"reputation": 404, "user_id": 465211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13bc7894da22afb0e3e4f9da10b1adc3?s=128&d=identicon&r=PG", "display_name": "MikeBMcL", "link": "https://stackoverflow.com/users/465211/mikebmcl"}, "is_accepted": false, "score": 2, "last_activity_date": 1492634411, "creation_date": 1492634411, "answer_id": 43505650, "question_id": 43504615, "link": "https://stackoverflow.com/questions/43504615/how-to-properly-render-models-meshes-with-textures-in-opengl-game-without-high/43505650#43505650", "title": "How to properly render models (meshes with textures) in OpenGL game without high CPU usage?", "body": "<p>VTT's comment re: glBegin/glEnd is the correct answer. To expand upon it a bit, by using the old, deprecated API you are running into one definite problem and one potential problem.</p>\n\n<p>The definite problem is that OpenGL cannot take advantage of a number of hardware acceleration features in modern GPUs because rather than having all of the triangles (i.e. vertices) and materials (e.g. textures) stored in GPU memory, it will likely need to copy at least some of those from main memory to GPU memory every time you render things. That's a non-trivial expense that you can easily avoid by using vertex buffers along with vertex shaders and fragment shaders.</p>\n\n<p>There are many examples out there if you search for them so while it may take some time to refactor your code, knowing how to do it shouldn't been an issue.</p>\n\n<p>The potential problem is that the fixed function pipeline has been deprecated for a while (and informally discouraged for even longer) such that many drivers likely contain that functionality more for compatibility with older games and applications rather than as active targets for optimization. In other words, developer time is spent on optimizing the modern APIs rather than the APIs of the late 1990s.</p>\n\n<p>It's likely not your fault that you ended up writing your code in the way you did. Unfortunately, the web and freely available copies of older books provide a lot of examples based on the old fixed function pipeline rather than the modern programmable pipeline. Combined with the fact that (initially) the fixed function pipeline is often easier to understand and use, it leads to situations like the one you are in. But it's well worth the time to learn the modern APIs. It opens a wealth of opportunities in terms of the effects you can use to make your graphics shine even on \"low-end\" systems.</p>\n"}, {"tags": [], "owner": {"reputation": 23673, "user_id": 1118321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56b8390b7457739ed8cc7cbd52bf251?s=128&d=identicon&r=PG", "display_name": "user1118321", "link": "https://stackoverflow.com/users/1118321/user1118321"}, "is_accepted": false, "score": 0, "last_activity_date": 1492824375, "creation_date": 1492824375, "answer_id": 43554231, "question_id": 43504615, "link": "https://stackoverflow.com/questions/43504615/how-to-properly-render-models-meshes-with-textures-in-opengl-game-without-high/43554231#43554231", "title": "How to properly render models (meshes with textures) in OpenGL game without high CPU usage?", "body": "<p>So now you're doing things the new way, but you're not taking advantage of everything you can. You're uploading your geometry every time you render. Since it's not changing (you're using <code>GL_STATIC_DRAW</code>) don't upload it more than once. Once it's up there in video memory it will stay there until you delete it. Same with the uniforms for your shaders. The only calls you need are clearing the color, binding the various arrays and attributes, drawing the arrays, then unbinding the various arrays and attributes. And probably the flush. The <code>glBufferData()</code> call is probably what's taking so long.</p>\n\n<p>Also, I have to say that 10% CPU usage is nothing. I'm not sure why that concerns you. In fact, the various new renderers (Metal, Vulkan, DX12) are basically useful for reducing the CPU component of your rendering. If it was only 10%, they'd hardly be needed!</p>\n"}], "owner": {"reputation": 23, "user_id": 7891653, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9f4e132dfa0747fd56f96de490f31d1a?s=128&d=identicon&r=PG&f=1", "display_name": "ground0", "link": "https://stackoverflow.com/users/7891653/ground0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1492867018, "creation_date": 1492630573, "last_edit_date": 1492867018, "question_id": 43504615, "link": "https://stackoverflow.com/questions/43504615/how-to-properly-render-models-meshes-with-textures-in-opengl-game-without-high", "title": "How to properly render models (meshes with textures) in OpenGL game without high CPU usage?", "body": "<p>I have a game with models and when I render them my CPU usage goes high (about 10% per one model). I use <code>glutMainLoop</code> which calls <code>DisplayFunc</code> 60 times per one second. I call drawing functions there where is</p>\n\n<ul>\n<li>glPushMatrix</li>\n<li>glTranslatef, glRotatef, glScalef</li>\n<li>glMaterialfv so materials for texture, I bind my texture</li>\n<li>glBegin for triangles</li>\n<li>then in loop for faces glNormal3f, glTexCoord2f, glVertex3f for triangles</li>\n<li>glEnd</li>\n<li>and glPopMatrix</li>\n</ul>\n\n<p>I don't know what I am doing wrong and I don't have any foothold, so that's why I'm asking here.</p>\n\n<p>Ok, so I made simple correction and is it all right now?</p>\n\n<pre><code>    #include &lt;GL/glut.h&gt;\n    #include &lt;gl/glext.h&gt;\n\n    void Display();\n    void Reshape(int width, int height);\n\n    const int windowWidth = 480;\n    const int windowHeight = 270;\n\n    GLuint vertexbuffer;\n    static const GLfloat g_vertex_buffer_data[] =\n    {\n        -1.0f, -1.0f, 0.0f,\n        1.0f, -1.0f, 0.0f,\n        0.0f,  1.0f, 0.0f,\n    };\n\n    int main(int argc, char* argv[])\n    {\n        glutInit(&amp;argc, argv);\n        glutInitDisplayMode(GLUT_RGB | GLUT_DOUBLE);\n        glutInitWindowPosition(100, 100);\n        glutInitWindowSize(windowWidth, windowHeight);\n        glutCreateWindow(\"Modern OpenGL\");\n\n        glutDisplayFunc(Display);\n        glutReshapeFunc(Reshape);\n        glutIdleFunc(Display);\n\n        GLfloat reset_ambient[4] = { 0.0f, 0.0f, 0.0f, 1.0f };\n        glLightModelfv(GL_LIGHT_MODEL_AMBIENT, reset_ambient);\n        glEnable(GL_LIGHTING);\n        glShadeModel(GL_SMOOTH);\n        glEnable(GL_LIGHT0);\n\n        glGenBuffers(1, &amp;vertexbuffer);\n\n        glutMainLoop();\n\n        return 0;\n    }\n\n    void Display()\n    {\n        glClearColor(1.0, 1.0, 1.0, 1.0);\n        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n        glLoadIdentity();\n\n        gluLookAt(0,0,10,0,0,0,0,1,0);\n\n        GLfloat light0amb[4] = { 1.0, 1.0, 1.0, 1.0 };\n        glLightfv(GL_LIGHT0, GL_AMBIENT, light0amb);\n        GLfloat light0dif[4] = { 1.0, 1.0, 1.0, 1.0 };\n        glLightfv(GL_LIGHT0, GL_DIFFUSE, light0dif);\n        GLfloat light0spe[4] = { 1.0, 1.0, 1.0, 1.0 };\n        glLightfv(GL_LIGHT0, GL_SPECULAR, light0spe);\n        GLfloat light0pos[4] = { 0.0, 0.0, 0.0, 1.0 };\n        glLightfv(GL_LIGHT0, GL_POSITION, light0pos);\n\n        glBindBuffer(GL_ARRAY_BUFFER, vertexbuffer);\n        glBufferData(GL_ARRAY_BUFFER, sizeof(g_vertex_buffer_data), g_vertex_buffer_data, GL_STATIC_DRAW);\n        glEnableVertexAttribArray(0);\n        glBindBuffer(GL_ARRAY_BUFFER, vertexbuffer);\n        glVertexAttribPointer(\n            0,\n            3,\n            GL_FLOAT,\n            GL_FALSE,\n            0,\n            (void*)0\n        );\n        glDrawArrays(GL_TRIANGLES, 0, 3);\n        glDisableVertexAttribArray(0);\n\n        glFlush();\n        glutSwapBuffers();\n    }\n\n    void Reshape(int width, int height)\n    {\n        glutReshapeWindow(windowWidth, windowHeight);\n        glMatrixMode(GL_PROJECTION);\n        glLoadIdentity();\n        glViewport(0, 0, width, height);\n        gluPerspective(45.0f, width / (double)height, 0.1f, 1000.0f);\n        glMatrixMode(GL_MODELVIEW);\n    }\n</code></pre>\n"}, {"tags": ["c++", "c++11", "templates", "c++17", "functor"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1492630605, "post_id": 43504566, "comment_id": 74063724, "body": "What&#39;s the motivation for this? Have you found a use case where a <code>std::function</code> doesn&#39;t do the job?"}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1492630689, "post_id": 43504566, "comment_id": 74063780, "body": "@RSahu: Don&#39;t <code>std::function</code>s have data members?"}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 1, "creation_date": 1492630692, "post_id": 43504566, "comment_id": 74063783, "body": "Why would you use <code>std::function</code> if you don&#39;t need all of its features? It&#39;s not the right tool of the job unless you need type erasure and ownership semantics."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1492631086, "post_id": 43504566, "comment_id": 74064065, "body": "@einpoklum, it sure does. <a href=\"http://en.cppreference.com/w/cpp/utility/functional/function/target\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/utility/functional/function/target</a>&zwnj;&#8203;."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1492631221, "post_id": 43504566, "comment_id": 74064152, "body": "@RSahu: So I can&#39;t use it. I need a type with no data members."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1492689180, "post_id": 43504566, "comment_id": 74090645, "body": "Re: &quot;My solution might not work for overloaded functions&quot;. No solution works for overloaded functions (yet). We don&#39;t really have a way to refer to a group of otherwise identical functions by just the name. Therefore you always need to be specific about the exact function you want to wrap (in the case of overloads casting to the appropriate type to match the overload you want)"}], "answers": [{"comments": [{"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1492631048, "post_id": 43504714, "comment_id": 74064044, "body": "How can your construct differentiate between the overloads of <code>a</code>?"}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "reply_to_user": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1492631131, "post_id": 43504714, "comment_id": 74064094, "body": "@einpoklum: it can&#39;t unless you explicitly specify the overload you&#39;re interested in. In the second part of my post I show some proposals that wanted to solve this issue. Unfortunately you have to use a macro today (or spell out the lambda)."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1492631140, "post_id": 43504714, "comment_id": 74064102, "body": "Do you mean &quot;spell out its <i>type</i>&quot;?"}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1492631247, "post_id": 43504714, "comment_id": 74064165, "body": "@Quentin: I expressed myself quite poorly - is it clear after my edit?"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1492631313, "post_id": 43504714, "comment_id": 74064201, "body": "Oh, alright. I was thinking about <code>static_cast&lt;void(*)(int)&gt;(foo)</code>."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1492631861, "post_id": 43504714, "comment_id": 74064525, "body": "@VittorioRomeo: (1) The Macro is just C++14, isn&#39;t it? (2) Can you rephrase your answer so as to produce a <i>type</i> rather than a value? Something I can in my declarations rather than inside blocks of code?"}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "reply_to_user": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1492632252, "post_id": 43504714, "comment_id": 74064756, "body": "@einpoklum: (1) Yes, it is. - (2) The <code>functor</code> solution in your question is then basically what you want - it is equivalent to my <code>to_function_object</code> if you replace <code>typename Function, Function&amp; F</code> with <code>auto F</code>. Alternatively you could always <code>decltype(to_function_object&lt;foo&gt;())</code>."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1492689487, "post_id": 43504714, "comment_id": 74090854, "body": "So, +1, but I&#39;ll want to accept something which sticks to C++11 (since I want to use this with CUDA)."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 2, "creation_date": 1492696531, "post_id": 43504714, "comment_id": 74096518, "body": "@einpoklum failing to mention CUDA requirement is a pretty big thing to skip over.  And you explicitly asked for <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b1z\">c++1z</a> in your question.  Don&#39;t move the goalposts; if you have a question about solving this problem in pure C++11 CUDA-compatible code, ask a different question."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1492696681, "post_id": 43504714, "comment_id": 74096655, "body": "@Yakk: I didn&#39;t want to limit my question to just CUDA - as I&#39;m not the only person who might be reading this question. And I did say C++14/17 answers are interesting, but not what I prefer. And I did + 1 this answer. So I think I&#39;m within the bounds of fairness..."}], "tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": false, "score": 3, "last_activity_date": 1492632109, "last_edit_date": 1492632109, "creation_date": 1492630850, "answer_id": 43504714, "question_id": 43504566, "link": "https://stackoverflow.com/questions/43504566/how-do-i-make-a-functor-out-of-an-arbitrary-function/43504714#43504714", "title": "How do I make a functor out of an arbitrary function?", "body": "<p>If the function is not overloaded, you can do this in C++17:</p>\n\n<pre><code>template &lt;auto F&gt;\nauto to_function_object()\n{\n    return [](auto&amp;&amp;... xs) -&gt; decltype(auto)\n    { \n        return F(std::forward&lt;decltype(xs)&gt;(xs)...);\n    };\n} \n</code></pre>\n\n<p></p>\n\n<pre><code>void a(int) { }\n\nint main()\n{\n    auto af = to_function_object&lt;a&gt;();\n    af(1);\n}\n</code></pre>\n\n<hr>\n\n<p>If the function is overloaded, there's no way to pass its <em>overload set</em> as an argument to another function or a template. You're forced to manually write a wrapper lambda on the spot. Example:</p>\n\n<pre><code>void foo(int)  { }\nvoid foo(char) { }\n// ...   \nbar([](auto x){ return foo(x); });\n</code></pre>\n\n<p><a href=\"https://wg21.link/n3617\" rel=\"nofollow noreferrer\">N3617</a> aimed to solve this issue by introducing a <em>\"lift\" operator</em>.</p>\n\n<p><a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/p0119r0.pdf\" rel=\"nofollow noreferrer\">P0119</a> by A. Sutton solves the problem in a different way by allowing overload sets to basically generate the \"wrapper lambda\" for you when passed as arguments. </p>\n\n<p>Until any of those proposal is accepted you can use a <em>beautiful</em> C++14 macro instead:</p>\n\n<pre><code>#define LIFT(f) \\\n    [](auto&amp;&amp;... xs) noexcept(noexcept(f(std::forward&lt;decltype(xs)&gt;(xs)...))) \\\n        -&gt; decltype(f(std::forward&lt;decltype(xs)&gt;(xs)...)) \\\n    { \\\n        return f(std::forward&lt;decltype(xs)&gt;(xs)...); \\\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 1, "last_activity_date": 1492697006, "creation_date": 1492697006, "answer_id": 43521790, "question_id": 43504566, "link": "https://stackoverflow.com/questions/43504566/how-do-i-make-a-functor-out-of-an-arbitrary-function/43521790#43521790", "title": "How do I make a functor out of an arbitrary function?", "body": "<p>First, a concrete example for a fixed type.</p>\n\n<pre><code>int foo( int );\nvoid foo( double );\n\nstruct foo_t {\n  template&lt;class...Args&gt;\n  auto operator()(Args&amp;&amp;...args)const\n  -&gt;decltype( foo( std::declval&lt;Args&gt;()... ) )\n  {  return ( foo( std::forward&lt;Args&gt;(args)... ) ); }\n};\n</code></pre>\n\n<p>now <code>foo_t</code> is an object that invokes the overloads of <code>foo</code> via perfect forwarding.</p>\n\n<p>To make it generic:</p>\n\n<pre><code>#define RETURNS(...) noexcept(noexcept(__VA_ARGS__)) -&gt; decltype(__VA_ARGS__) { return __VA_ARGS__; }\n\n#define OVERLOAD_SET_TYPE(...) \\\n  struct { \\\n    template&lt;class...Args&gt; \\\n    auto operator()(Args&amp;&amp;...args)const \\\n    RETURNS( __VA_ARGS__( std::forward&lt;Args&gt;(args)... ) ) \\\n  }\n</code></pre>\n\n<p>so we can do</p>\n\n<pre><code>using foo_t = OVERLOAD_SET_TYPE(foo);\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/28fb62903722f15c\" rel=\"nofollow noreferrer\">live example</a>.</p>\n\n<p>You cannot manipulate overload sets of a function as an object; the only way to do it is textually.  Hence the macro.</p>\n\n<p>This has all of the usual imperfections of perfect forwarding.  There is no way to generically avoid those imperfections.</p>\n"}], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 43521790, "answer_count": 2, "score": 1, "last_activity_date": 1507144435, "creation_date": 1492630391, "last_edit_date": 1507144435, "question_id": 43504566, "link": "https://stackoverflow.com/questions/43504566/how-do-i-make-a-functor-out-of-an-arbitrary-function", "title": "How do I make a functor out of an arbitrary function?", "body": "<p>I have a bunch of functions which I want to use as functors (that is, use types instead of pass pointers to the functions, or any other kind of data).</p>\n\n<p>Is there an elegant/idiomatic/standard way of doing this with the standard library, or the standard library + Boost? Perhaps using <code>bind()</code> somehow?</p>\n\n<p>Or should I go with something simplistic (well, kind of simplistic) such as:</p>\n\n<pre><code>template&lt;typename Function, Function&amp; F, typename... Parameters&gt;\nstruct functor {\n    using function_type            = Function;\n    using parameters_as_tuple_type = std::tuple&lt;Parameters...&gt;;\n\n    auto operator() (Parameters&amp;&amp;... params) -&gt;\n        decltype(F(std::forward&lt;Parameters&gt;(params)...))\n    {\n        return F(std::forward&lt;Parameters&gt;(params)...);\n    }\n};\n</code></pre>\n\n<p><strong>Notes:</strong> </p>\n\n<ul>\n<li>C++11 solutions are preferred, but if you have something requiring even C++17, that's also interesting.</li>\n<li>My \"solution\" might not work, I think, for overloaded functions.</li>\n</ul>\n"}, {"tags": ["java", "c++", "algorithm", "dynamic-programming"], "answers": [{"comments": [{"owner": {"reputation": 1433, "user_id": 3813188, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8f00a75b89f2346ba7cb9c339d9858b3?s=128&d=identicon&r=PG&f=1", "display_name": "Bassinator", "link": "https://stackoverflow.com/users/3813188/bassinator"}, "edited": false, "score": 0, "creation_date": 1492631061, "post_id": 43504739, "comment_id": 74064053, "body": "This would make sense with what I am seeing in the debugger! But how does your proposed solution create a copy? I&#39;m not following."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "reply_to_user": {"reputation": 1433, "user_id": 3813188, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8f00a75b89f2346ba7cb9c339d9858b3?s=128&d=identicon&r=PG&f=1", "display_name": "Bassinator", "link": "https://stackoverflow.com/users/3813188/bassinator"}, "edited": false, "score": 2, "creation_date": 1492631232, "post_id": 43504739, "comment_id": 74064156, "body": "@Airhead <code>ArrayList(Collection)</code> is a constructor which copies the collection passed in."}], "tags": [], "owner": {"reputation": 11685, "user_id": 4142130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f6c44a570a709b1fd0f4e04b0b8ae?s=128&d=identicon&r=PG&f=1", "display_name": "Hoopje", "link": "https://stackoverflow.com/users/4142130/hoopje"}, "is_accepted": true, "score": 6, "last_activity_date": 1492630952, "creation_date": 1492630952, "answer_id": 43504739, "question_id": 43504548, "link": "https://stackoverflow.com/questions/43504548/how-is-this-c-function-working-differently-than-the-equivalent-java-function/43504739#43504739", "title": "How is this C++ function working differently than the equivalent java function?", "body": "<p>I suspect the problem is that in Java, the cache contains <em>references</em> to lists, whereas in C++ it contains the lists themselves.</p>\n\n<p>Thus, in C++</p>\n\n<pre><code>L[i] = L[j];\n</code></pre>\n\n<p>copies the list at index <code>j</code> to index <code>i</code>, whereas in Java</p>\n\n<pre><code>cache.set(i, cache.get(j));\n</code></pre>\n\n<p>copies a reference. That means, that when you subsequently add items to the one, they are also added to the other.</p>\n\n<p>Maybe use</p>\n\n<pre><code>cache.set(i, new ArrayList&lt;&gt;(cache.get(j)));\n</code></pre>\n\n<p>so that you create a copy, like in C++.</p>\n"}], "owner": {"reputation": 1433, "user_id": 3813188, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8f00a75b89f2346ba7cb9c339d9858b3?s=128&d=identicon&r=PG&f=1", "display_name": "Bassinator", "link": "https://stackoverflow.com/users/3813188/bassinator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 43504739, "answer_count": 1, "score": 1, "last_activity_date": 1492630952, "creation_date": 1492630324, "question_id": 43504548, "link": "https://stackoverflow.com/questions/43504548/how-is-this-c-function-working-differently-than-the-equivalent-java-function", "title": "How is this C++ function working differently than the equivalent java function?", "body": "<p>I'm trying to implement a Java version of the following C++ algorithm:</p>\n\n<pre><code>void constructPrintLIS(int arr[], int n)\n{\n    std::vector&lt; std::vector&lt;int&gt; &gt; L(n);\n\n    L[0].push_back(arr[0]);\n\n    for (int i = 1; i &lt; n; i++)\n    {\n        for (int j = 0; j &lt; i; j++)\n        {\n            if ((arr[i] &gt; arr[j]) &amp;&amp;\n                (L[i].size() &lt; L[j].size() + 1))\n            {\n                L[i] = L[j];\n                cout &lt;&lt; true &lt;&lt; endl;\n            }\n            else\n            {\n                cout &lt;&lt; false &lt;&lt; endl;\n            }\n        }\n\n        L[i].push_back(arr[i]);\n    }\n\n    std::vector&lt;int&gt; max = L[0];\n\n    for (std::vector&lt;int&gt; x : L)\n    {\n        if (x.size() &gt; max.size())\n        {\n            max = x;\n        }\n    }\n\n    printLIS(max);\n}\n</code></pre>\n\n<p>Here is the Java version</p>\n\n<pre><code>private static List&lt;Integer&gt; getLongestIncreasingSubsequence(\n        List&lt;Integer&gt; sequence\n        )\n{   \n    ArrayList&lt;ArrayList&lt;Integer&gt;&gt; cache = \n            new ArrayList&lt;ArrayList&lt;Integer&gt;&gt;(sequence.size());\n    // Populate the elements to avoid a NullPointerException\n    for(int i = 0; i &lt; sequence.size(); i++)\n    {\n        cache.add(new ArrayList&lt;Integer&gt;());\n    }\n    cache.get(0).add(sequence.get(0));\n\n    // start from the first index, since we just handled the 0th\n    for(int i = 1; i &lt; sequence.size(); i++)\n    {\n        // Add element if greater than tail of all existing subsequences\n        for(int j = 0; j &lt; i; j++)\n        {\n            if((sequence.get(i) &gt; sequence.get(j)) \n                    &amp;&amp; (cache.get(i).size() &lt; cache.get(j).size() + 1))\n            {\n                cache.set(i, cache.get(j));\n            }\n        }\n        cache.get(i).add(sequence.get(i));                  \n    }\n\n    // Find the longest subsequence stored in the cache and return it\n    List&lt;Integer&gt; longestIncreasingSubsequence = cache.get(0);\n    for(List&lt;Integer&gt; subsequence : cache)\n    {\n        if(subsequence.size() &gt; longestIncreasingSubsequence.size())\n        {\n            longestIncreasingSubsequence = subsequence;\n        }\n    }\n    return longestIncreasingSubsequence;\n}\n</code></pre>\n\n<p>I don't understand what I am doing differently. The C++ algorithm prints the correct result when the test sequence is <code>{9766, 5435, 624, 6880, 2660, 2069, 5547, 7027, 9636, 1487}</code>, with the correct result being <code>624, 2069, 5547, 7027, 9636</code>. However, the Java version that I have written returns an incorrect result of <code>624, 6880, 2660, 2069, 5547, 7027, 9636, 1487</code> and I don't understand why. I have tried tracing it in the debugger, and I can't figure out what is going wrong. </p>\n\n<p>I tried adding a print statement indicating whether the if statement evaluated to true/false each time, and compared it with the C++ program, and it was the same, so that isn't the problem. </p>\n\n<p>I suspect it is something to do with a subtle difference between a vector and an ArrayList, but I don't know.</p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1492632871, "post_id": 43504517, "comment_id": 74065113, "body": "&quot;can vectors be accessed as 2d array&quot; - Yes."}], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 4228152, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100001521674782/picture?type=large", "display_name": "Muhammad Abu Bakr", "link": "https://stackoverflow.com/users/4228152/muhammad-abu-bakr"}, "edited": false, "score": 0, "creation_date": 1492744431, "post_id": 43504560, "comment_id": 74118893, "body": "how can I find width of vector if no width is explicitly specified?"}], "tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": true, "score": 4, "last_activity_date": 1492630377, "creation_date": 1492630377, "answer_id": 43504560, "question_id": 43504517, "link": "https://stackoverflow.com/questions/43504517/can-vectors-be-accessed-as-2d-array/43504560#43504560", "title": "can vectors be accessed as 2d array", "body": "<p>Yes, but not with <code>vector.size()</code>, as that would be the total count of the elements. You need to keep track of the <em>\"width\"</em> of the 2D array separately.</p>\n\n<pre><code>std::vector&lt;int&gt; v;\nconstexpr int width = 10;\nconstexpr int height = 10;\nv.resize(width * height);\n\nv[2 * width + 5] = 10; // set (y:2, x:5) to 10\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 4228152, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100001521674782/picture?type=large", "display_name": "Muhammad Abu Bakr", "link": "https://stackoverflow.com/users/4228152/muhammad-abu-bakr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 43504560, "answer_count": 1, "score": -2, "last_activity_date": 1492765289, "creation_date": 1492630217, "last_edit_date": 1492765289, "question_id": 43504517, "link": "https://stackoverflow.com/questions/43504517/can-vectors-be-accessed-as-2d-array", "title": "can vectors be accessed as 2d array", "body": "<p>We can use 1D arrays as 2D arrays by accessing them in this way:\n[row * width + col]</p>\n\n<p>My question is as vectors are very much same so can I access usual vector as 2d vector? For example in this way:\n[row * vector.size() + col]</p>\n"}, {"tags": ["c++", "windows", "dll", "breakpoints", "fftw"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 3, "creation_date": 1492631859, "post_id": 43504471, "comment_id": 74064522, "body": "You&#39;ve modified some memory that wasn&#39;t yours, in the vicinity of something that was dynamically allocated. Watch your indexing."}, {"owner": {"reputation": 1221, "user_id": 6610379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/869458e7097eb3f538a64ab550a0aa4b?s=128&d=identicon&r=PG&f=1", "display_name": "Phil Brubaker", "link": "https://stackoverflow.com/users/6610379/phil-brubaker"}, "edited": false, "score": 3, "creation_date": 1492631920, "post_id": 43504471, "comment_id": 74064563, "body": "The loop indexing <code>for (int i=0; i&lt;= N;i++)</code> is suspect.  That means you will iterate <code>N+1</code> times, which is bad news if you&#39;re dealing with a block of <code>N</code> elements."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 7951562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/daa104e0718464f5aca2aaa36a32e6e0?s=128&d=identicon&r=PG&f=1", "display_name": "Shyam Sunder", "link": "https://stackoverflow.com/users/7951562/shyam-sunder"}, "is_accepted": false, "score": 1, "last_activity_date": 1493723978, "last_edit_date": 1493723978, "creation_date": 1493722985, "answer_id": 43736263, "question_id": 43504471, "link": "https://stackoverflow.com/questions/43504471/c-error-windows-has-triggered-a-breakpoint-in-espectrogramafrequencia-exe/43736263#43736263", "title": "C++ error: \u201cWindows has triggered a breakpoint in Espectrogramafrequencia.exe.\u201d", "body": "<p>You are trying to assign value outside of <code>t[]</code> memory limit.<br>\nC++ arrays are zero based index, so the index range of array <code>t[]</code> is 0..549.<br>\nUse a <code>for</code> loop like: </p>\n\n<pre><code>for (int i=0; i&lt; N;i++) \n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7847380, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IK4QhKPP27U/AAAAAAAAAAI/AAAAAAAADNs/6VBiz2fQPsg/photo.jpg?sz=128", "display_name": "Andres Gir&#243;n Cruz", "link": "https://stackoverflow.com/users/7847380/andres-gir%c3%b3n-cruz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 809, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1493723978, "creation_date": 1492630065, "question_id": 43504471, "link": "https://stackoverflow.com/questions/43504471/c-error-windows-has-triggered-a-breakpoint-in-espectrogramafrequencia-exe", "title": "C++ error: \u201cWindows has triggered a breakpoint in Espectrogramafrequencia.exe.\u201d", "body": "<p>I've been working on Microsoft Visual C++ 2010(32-bit system)</p>\n\n<p>The compilation phase is alright, but on execution I get an error that says:</p>\n\n<p>\"Windows has triggered a breakpoint in Espectrogramafrequencia.exe. This may be due to corruption of the heap, which indicates a bug in Espectrogramafrequencia.exe or any of the DLLs it has loaded-. This may also be due to user pressing F12 while Espectrogramafrequencia.exe has focus. The output window may have more diagnostic information. [BREAK] [CONTINUE] [IGNORE]\"</p>\n\n<p>Code:</p>\n\n<pre><code>#include \"StdAfx.h\"\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n#include &lt;fftw3.h&gt;\n#include &lt;iostream&gt;\n#include &lt;cmath&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\n\nint main()\n{\nint i;\nconst int N=550;//Number of points acquired inside the window\ndouble Fs=200;//sampling frequency\ndouble dF=Fs/N;\ndouble  T=1/Fs;//sample time \ndouble f=50;//frequency\ndouble *in;\nfftw_complex *out;\ndouble t[N];//time vector \ndouble ff[N];\nfftw_plan plan_forward;\nin = (double*) fftw_malloc(sizeof(double) * N);\nout = (fftw_complex*) fftw_malloc(sizeof(fftw_complex) * N);\nfor (int i=0; i&lt;= N;i++) \n{\nt[i]=i*T;\ndouble M_PI=3.14159265359;\nin[i] =0.7 *sin(2*M_PI*f*t[i]);// generate sine waveform\ndouble multiplier = 0.5 * (1 - cos(2*M_PI*i/(N-1)));//Hanning Window\nin[i] = multiplier * in[i];\n}\nfor (int i=0; i&lt;= ((N/2)-1);i++){\nff[i]=Fs*i/N;}\nplan_forward = fftw_plan_dft_r2c_1d ( N, in, out, FFTW_ESTIMATE );\nfftw_execute ( plan_forward );\ndouble v[N];\nfor (int i = 0; i&lt;= ((N/2)-1); i++){\nv[i]=(20*log(sqrt(out[i][0]*out[i][0]+ out[i][1]*out[i][1])))/N;  //Here   I have calculated the y axis of the spectrum in dB\n}\nfstream fichero;\nfichero.open(\"example2.txt\",fstream::out);//fichero.open(\"example2.txt\");\nfichero &lt;&lt; \"plot '-' using 1:2\" &lt;&lt; std::endl;//fichero &lt;&lt; \"plot '-' using 1:2\" &lt;&lt; endl;\nfor(i = 0;i&lt; ((N/2)-1); i++){ \nfichero &lt;&lt; ff[i]&lt;&lt; \" \" &lt;&lt; v[i]&lt;&lt; std::endl;\n}\nfichero.close();\nfftw_destroy_plan (plan_forward);\nfftw_free (in);\nfftw_free (out);\nreturn 0;\n}\n</code></pre>\n\n<p>Have you any idea of what this error means? What does \"corruption of the heap\" mean? </p>\n\n<p>Please help</p>\n\n<p>Thank you so much!</p>\n"}, {"tags": ["c++", "list", "stl"], "comments": [{"owner": {"reputation": 771, "user_id": 1385661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a06c08d8f5187a9d81ab7b6f0aa8b4?s=128&d=identicon&r=PG", "display_name": "ehudt", "link": "https://stackoverflow.com/users/1385661/ehudt"}, "edited": false, "score": 0, "creation_date": 1492631639, "post_id": 43504386, "comment_id": 74064391, "body": "Can you post the error? In the for loop&#39;s initialization part (<code>for(itr; ...</code>), itr has no meaning. Try removing that as a start."}], "answers": [{"tags": [], "owner": {"reputation": 771, "user_id": 1385661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a06c08d8f5187a9d81ab7b6f0aa8b4?s=128&d=identicon&r=PG", "display_name": "ehudt", "link": "https://stackoverflow.com/users/1385661/ehudt"}, "is_accepted": false, "score": 0, "last_activity_date": 1492631939, "creation_date": 1492631939, "answer_id": 43505014, "question_id": 43504386, "link": "https://stackoverflow.com/questions/43504386/how-to-display-the-elements-of-a-graphs-adjacency-list/43505014#43505014", "title": "How to display the elements of a graph&#39;s adjacency list?", "body": "<p>An easier way to write this would be:</p>\n\n<pre><code>for(const auto&amp; vm_pair : g1.vm)\n{\n    cout &lt;&lt; vm_pair.first &lt;&lt; \" \";\n    for (const auto&amp; li : vm_pair.second-&gt;adj)\n    {\n        cout &lt;&lt; li-&gt;name &lt;&lt; \" \";\n    }\n    cout &lt;&lt; endl;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 30, "user_id": 6092814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/022937d6ec77413cf43937172d182ddf?s=128&d=identicon&r=PG&f=1", "display_name": "DaniFreecs", "link": "https://stackoverflow.com/users/6092814/danifreecs"}, "edited": false, "score": 0, "creation_date": 1492634970, "post_id": 43505294, "comment_id": 74066328, "body": "Thanks for the help and the explanation, that was the issue!"}], "tags": [], "owner": {"reputation": 1457, "user_id": 2638548, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mkJxQ.jpg?s=128&g=1", "display_name": "dlasalle", "link": "https://stackoverflow.com/users/2638548/dlasalle"}, "is_accepted": true, "score": 1, "last_activity_date": 1492632955, "creation_date": 1492632955, "answer_id": 43505294, "question_id": 43504386, "link": "https://stackoverflow.com/questions/43504386/how-to-display-the-elements-of-a-graphs-adjacency-list/43505294#43505294", "title": "How to display the elements of a graph&#39;s adjacency list?", "body": "<p>Your issue seems to be that <code>li</code> is an iterator of pointers, so you need to de-reference it to access the member <code>name</code>:</p>\n\n<pre><code>cout &lt;&lt; (*li)-&gt;name &lt;&lt; \" \";\n</code></pre>\n\n<p>The reason you didn't need to do this for your top-level iterator, <code>itr</code>, is that its an iterator of <code>std::pair</code>'s, and thus your <code>-&gt;</code> access de-referenced the iterator to get at the members of <code>std::pair</code>.</p>\n\n<p>@ehudt's answer solves this by using the <a href=\"http://en.cppreference.com/w/cpp/language/range-for\" rel=\"nofollow noreferrer\">c++11 range based <code>for</code></a> loops such that the <code>-&gt;</code> operator is on <code>*Vertex</code> and not <code>list&lt;Vertex*&gt;::iterator</code>.</p>\n"}], "owner": {"reputation": 30, "user_id": 6092814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/022937d6ec77413cf43937172d182ddf?s=128&d=identicon&r=PG&f=1", "display_name": "DaniFreecs", "link": "https://stackoverflow.com/users/6092814/danifreecs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 43505294, "answer_count": 2, "score": 0, "last_activity_date": 1492632955, "creation_date": 1492629803, "last_edit_date": 1492630112, "question_id": 43504386, "link": "https://stackoverflow.com/questions/43504386/how-to-display-the-elements-of-a-graphs-adjacency-list", "title": "How to display the elements of a graph&#39;s adjacency list?", "body": "<p>I still study c++ and i'd like to ask a little help. I have the following representation of a graph:</p>\n\n<pre><code>struct Vertex\n{\n    list&lt;Vertex*&gt; adj;\n    string name;\n    Vertex(string str) : name(str) {}\n};\n\nclass Graph\n{\npublic:\n    typedef map&lt;string, Vertex*&gt; vmap;\n    vmap vm;\n    void AddVertex(const string&amp;);\n    void AddEdge(const string&amp; from, const string&amp; to);\n};\n</code></pre>\n\n<p>The way i use it:</p>\n\n<pre><code>Graph g1;\ng1.AddVertex(\"2\");\ng1.AddVertex(\"3\");\ng1.AddVertex(\"4\");\ng1.AddVertex(\"1\");\ng1.AddEdge(\"1\", \"2\");\ng1.AddEdge(\"1\", \"3\");\ng1.AddEdge(\"1\", \"4\");\n</code></pre>\n\n<p>Now i'd like to simply cout the vertices and their connections (if exists any) to check if it's working as i expect. I tried the following way, but i'm getting an error which i'm not fully understand and don't know how it can be fixed:</p>\n\n<pre><code>map&lt;string, Vertex*&gt;::iterator itr = g1.vm.begin();\nfor(itr; itr != g1.vm.end(); itr++)\n{\n    cout &lt;&lt; itr-&gt;first &lt;&lt; \" \";\n    list&lt;Vertex*&gt;::iterator li = itr-&gt;second-&gt;adj.begin();\n    for(li; li != itr-&gt;second-&gt;adj.end(); li++)\n    {\n        cout &lt;&lt; li-&gt;name &lt;&lt; \" \";\n    }\n    cout &lt;&lt; endl;\n}\n</code></pre>\n\n<p>My question is that how can i get the vertices names from that adj list? Thank you in advance!</p>\n"}, {"tags": ["c++", "raii"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 3, "creation_date": 1492629293, "post_id": 43504201, "comment_id": 74062938, "body": "@tadman: You mean <code>Widget</code> needs a virtual destructor."}, {"owner": {"reputation": 13278, "user_id": 688624, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b0714eded10b5ccee614c7134360974b?s=128&d=identicon&r=PG", "display_name": "imallett", "link": "https://stackoverflow.com/users/688624/imallett"}, "edited": false, "score": 0, "creation_date": 1492629326, "post_id": 43504201, "comment_id": 74062957, "body": "Since you tagged this <a href=\"https://stackoverflow.com/questions/tagged/raii\">raii</a>, it seems that you know that the solution is RAII and have at least heard of it . . . ?"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 2, "creation_date": 1492629379, "post_id": 43504201, "comment_id": 74062991, "body": "Time to learn about <code>std::shared_ptr</code> etc..."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1492629479, "post_id": 43504201, "comment_id": 74063055, "body": "Do you have control over the implementations of <code>Widget</code>, <code>BorderDecorator</code>, <code>ScrollDecorator</code>, and <code>TextField</code>?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 2, "creation_date": 1492629566, "post_id": 43504201, "comment_id": 74063101, "body": "Why do all these constructors take pointers?!"}, {"owner": {"reputation": 163, "user_id": 4760299, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6a19fb86544b456b0bc04071834e6328?s=128&d=identicon&r=PG&f=1", "display_name": "beginner 101", "link": "https://stackoverflow.com/users/4760299/beginner-101"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1492629773, "post_id": 43504201, "comment_id": 74063225, "body": "@David: The decorator pattern is built that way.  See the reference: <a href=\"https://sourcemaking.com/design_patterns/decorator/cpp/2\" rel=\"nofollow noreferrer\">sourcemaking.com/design_patterns/decorator/cpp/2</a>"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 2, "creation_date": 1492629933, "post_id": 43504201, "comment_id": 74063314, "body": "This seems like a truly awful pattern to me because it&#39;s not clear who owns what."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1492630116, "post_id": 43504201, "comment_id": 74063415, "body": "It probably got borged from Java and hasn&#39;t found a good implementation yet. And this is a mistake I would not want to see in a textbook: <code>class Widget {   public:     virtual void draw() = 0; };</code> Compiler is 100% on the nose to complain."}, {"owner": {"reputation": 1942, "user_id": 969365, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/1EnZd.png?s=128&g=1", "display_name": "simon", "link": "https://stackoverflow.com/users/969365/simon"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1492630143, "post_id": 43504201, "comment_id": 74063435, "body": "@DavidSchwartz Well, the implementation that was linked is awful. The general idea of the pattern is probably sane."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1492630744, "post_id": 43504201, "comment_id": 74063817, "body": "My advice then would simply be to ignore that page. It definitely looks like it was not actually designed to be C++ code but was Java code that was minimally changed with the intent of illustrating the pattern, not showing how to actually implement the pattern in C++."}], "answers": [{"tags": [], "owner": {"reputation": 6050, "user_id": 1007504, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dc6f5d77519f3c535a794bc5c884fb10?s=128&d=identicon&r=PG", "display_name": "Robert Allan Hennigan Leahy", "link": "https://stackoverflow.com/users/1007504/robert-allan-hennigan-leahy"}, "is_accepted": false, "score": 1, "last_activity_date": 1492794774, "last_edit_date": 1495542352, "creation_date": 1492629349, "answer_id": 43504252, "question_id": 43504201, "link": "https://stackoverflow.com/questions/43504201/how-to-delete-nested-new-in-c/43504252#43504252", "title": "How to delete nested new in C++", "body": "<p>Your problem isn't that you're deleting the object, your problem is that you're deleting a potentially polymorphic object which doesn't have a <code>virtual</code> destructor, which leaves the possibility that the most derived class won't be properly cleaned up.</p>\n\n<p><a href=\"https://stackoverflow.com/a/461224/1007504\">See here for more information.</a></p>\n"}, {"comments": [{"owner": {"reputation": 1942, "user_id": 969365, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/1EnZd.png?s=128&g=1", "display_name": "simon", "link": "https://stackoverflow.com/users/969365/simon"}, "edited": false, "score": 1, "creation_date": 1492630269, "post_id": 43504500, "comment_id": 74063504, "body": "&quot;No <code>new</code>s is good news!&quot;. Amen. Here is a few slides that also explains this: <a href=\"http://klmr.me/slides/modern-cpp.pdf\" rel=\"nofollow noreferrer\">klmr.me/slides/modern-cpp.pdf</a>"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "reply_to_user": {"reputation": 1942, "user_id": 969365, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/1EnZd.png?s=128&g=1", "display_name": "simon", "link": "https://stackoverflow.com/users/969365/simon"}, "edited": false, "score": 1, "creation_date": 1492630554, "post_id": 43504500, "comment_id": 74063690, "body": "@gurka: As far as I&#39;m aware, I just coined that phrase myself (in this context, meaning C++ <code>new</code>). I think it&#39;s going to be my new motto."}], "tags": [], "owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "is_accepted": true, "score": 3, "last_activity_date": 1492630491, "last_edit_date": 1492630491, "creation_date": 1492630163, "answer_id": 43504500, "question_id": 43504201, "link": "https://stackoverflow.com/questions/43504201/how-to-delete-nested-new-in-c/43504500#43504500", "title": "How to delete nested new in C++", "body": "<p>The example you're following glosses over all the memory management. It's likely to lead to bad habits.</p>\n\n<p>To properly manage memory, you could simply avoid dynamic allocations:</p>\n\n<pre><code>TextField textField(80, 24);\nScrollDecorator scrollDecorator(&amp;textField);\nBorderDecorator bd1(&amp;scrollDecorator);\nBorderDecorator bd2(&amp;bd1);\nWidget *aWidget = &amp;bd2;\n</code></pre>\n\n<p>No <code>new</code>s is good news!</p>\n\n<p>And <code>Widget</code> really, really should have a virtual destructor.</p>\n"}], "owner": {"reputation": 163, "user_id": 4760299, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6a19fb86544b456b0bc04071834e6328?s=128&d=identicon&r=PG&f=1", "display_name": "beginner 101", "link": "https://stackoverflow.com/users/4760299/beginner-101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 458, "favorite_count": 0, "accepted_answer_id": 43504500, "answer_count": 2, "score": 0, "last_activity_date": 1492794774, "creation_date": 1492629174, "question_id": 43504201, "link": "https://stackoverflow.com/questions/43504201/how-to-delete-nested-new-in-c", "title": "How to delete nested new in C++", "body": "<p>In <a href=\"https://sourcemaking.com/design_patterns/decorator/cpp/2\" rel=\"nofollow noreferrer\">ref</a>, they have this line of code</p>\n\n<pre><code>Widget *aWidget = new BorderDecorator(new BorderDecorator(new ScrollDecorator\n(new TextField(80, 24))));\n</code></pre>\n\n<p>Two questions: </p>\n\n<blockquote>\n  <p>Say, I want to explicitly delete the objects created with new.  How do\n  you do that?</p>\n  \n  <p>BTW, If I just add </p>\n\n<pre><code>delete aWidget; \n</code></pre>\n  \n  <p>I get warning: deleting object of abstract class type 'Widget'\n  which has non-virtual destructor will cause undefined behaviour\n  [-Wdelete-non-virtual-dtor]</p>\n</blockquote>\n\n<p>Second related question:</p>\n\n<blockquote>\n  <p>How do you write this nested news with unique_ptr</p>\n</blockquote>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "c++11", "gcc", "visual-c++", "bit-fields"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1492629225, "post_id": 43504113, "comment_id": 74062889, "body": "Almost everything with bitfeilds is implementation defined behavior.  Most likely what youe see is gcc/clang being smart and optimizing the 4 fields into 2 <code>uint64_t</code>s where msvs adds an additional one so you don&#39;t have a bitfiled that spans across two <code>uint64_t</code>s"}], "answers": [{"tags": [], "owner": {"reputation": 613, "user_id": 5513013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1681a66e7e0c1d147e62e20769b5488?s=128&d=identicon&r=PG", "display_name": "apardoe", "link": "https://stackoverflow.com/users/5513013/apardoe"}, "is_accepted": true, "score": 2, "last_activity_date": 1492710006, "creation_date": 1492710006, "answer_id": 43526343, "question_id": 43504113, "link": "https://stackoverflow.com/questions/43504113/bitfield-struct-size-different-between-gcc-and-msft-cl/43526343#43526343", "title": "Bitfield struct size different between gcc and MSFT CL", "body": "<p>I believe this is undefined behavior. @NathanOliver has the right answer: GCC and Clang are spanning the two <code>uint64_t</code> values. There's a cost when you read it though: see this very similar code sample on the <a href=\"https://godbolt.org/g/2h1on5\" rel=\"nofollow noreferrer\">Compiler Explorer</a> where GCC now has to read two fields and do some math to give second value.</p>\n"}, {"comments": [{"owner": {"reputation": 3163, "user_id": 34369, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/08127c138596c3d6e9a7414702fd7230?s=128&d=identicon&r=PG", "display_name": "Baget", "link": "https://stackoverflow.com/users/34369/baget"}, "edited": false, "score": 0, "creation_date": 1492798533, "post_id": 43526429, "comment_id": 74151177, "body": "Thanks, I don&#39;t want to add padding, I want to use it on memory."}], "tags": [], "owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "is_accepted": false, "score": 1, "last_activity_date": 1492727242, "last_edit_date": 1492727242, "creation_date": 1492710309, "answer_id": 43526429, "question_id": 43504113, "link": "https://stackoverflow.com/questions/43504113/bitfield-struct-size-different-between-gcc-and-msft-cl/43526429#43526429", "title": "Bitfield struct size different between gcc and MSFT CL", "body": "<p>If you want the two layous to be consistent between the two compilers you can use GCC's <code>__attribute__((ms_struct))</code> directive to have it use Microsoft's bitfield layout algorithm:</p>\n\n<pre><code>using MyType_t \n= union {\n    uint8_t buffer[16];\n    struct  __attribute__((ms_struct)) {\n        uint64_t  a         : 55;   \n        uint64_t  b         : 24;   \n        uint64_t  c         : 1;    \n        uint64_t  d         : 48;   \n    }fields;\n};\n</code></pre>\n\n<p>You can also use the <code>-mms-bitfields</code> option with GCC, but this an ABI changing option that could break other code. </p>\n\n<p>If you want to go the other way, and force Microsoft's compiler to use GCC's bitfield layout, I don't think there's any attribute or option to do that. You would have to change your code and split the <code>b</code> member so it doesn't cross the 64-bit boundary. Something like:</p>\n\n<pre><code>#pragma pack(1)\ntypedef union {\n    uint8_t buffer[16];\n#ifdef USE_GCC_BITFIELDS\n    struct __attribute__((gcc_struct))  {\n        uint64_t  a         : 55;   \n        uint64_t  b         : 24;   \n        uint64_t  c         : 1;    \n        uint64_t  d         : 48;   \n    }fields;\n    uint64_t get_a() { return fields.a; }\n    uint64_t get_b() { return fields.b; }\n    uint64_t get_c() { return fields.c; }\n    uint64_t get_d() { return fields.d; }\n#elif defined(USE_MS_BITFIELDS)\n    struct {\n        uint64_t  a         : 55;   \n        uint64_t  bl        : 9;\n        uint64_t  bh        : 15;  \n        uint64_t  c         : 1;    \n        uint64_t  d         : 48;   \n    }fields;\n    uint64_t get_a() { return fields.a; }\n    uint64_t get_b() { return fields.bl | (fields.bh &lt;&lt; 9); }\n    uint64_t get_c() { return fields.c; }\n    uint64_t get_d() { return fields.d; }\n#else /* portable code that should work anywhere */\n    unsigned long long get_ull(int i) {\n        typedef unsigned long long ull; unsigned char *p = buffer + i;\n        return (ull) p[0] | ((ull) p[1] &lt;&lt; 8) | ((ull) p[2] &lt;&lt; 16) | ((ull) p[3] &lt;&lt;  24)\n            | ((ull) p[4] &lt;&lt; 32) | ((ull) p[5] &lt;&lt; 40) | (((ull) p[6]) &lt;&lt; 48)\n            | ((ull) p[7] &lt;&lt; 56); }\n    unsigned long long get_a() { return get_ull(0) &amp; ((1ULL &lt;&lt; 55) - 1); }\n    unsigned get_b() { return (buffer[6] &gt;&gt; 7) | (buffer[7] &lt;&lt; 1) \n            | (buffer[8] &lt;&lt; 9) | ((buffer[9] &amp; 0x7F) &lt;&lt; 17); }\n    unsigned get_c() { return buffer[9] &gt;&gt; 7; }\n    unsigned long long get_d() { return get_ull(8) &gt;&gt; 16; }\n#endif\n\n} MyType_t;\n#pragma pack()\n</code></pre>\n"}], "owner": {"reputation": 3163, "user_id": 34369, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/08127c138596c3d6e9a7414702fd7230?s=128&d=identicon&r=PG", "display_name": "Baget", "link": "https://stackoverflow.com/users/34369/baget"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 251, "favorite_count": 0, "accepted_answer_id": 43526343, "answer_count": 2, "score": 2, "last_activity_date": 1492727242, "creation_date": 1492628863, "question_id": 43504113, "link": "https://stackoverflow.com/questions/43504113/bitfield-struct-size-different-between-gcc-and-msft-cl", "title": "Bitfield struct size different between gcc and MSFT CL", "body": "<p>I have the following code:</p>\n\n<pre><code>#include &lt;cstdint&gt;\n\n#pragma pack(1)\nusing MyType_t = union {\n    uint8_t buffer[16];\n    struct {\n        uint64_t  a         : 55;   \n        uint64_t  b         : 24;   \n        uint64_t  c         : 1;    \n        uint64_t  d         : 48;   \n    }fields;\n};\n#pragma pack()\n\nint main()\n{\n    return sizeof(MyType_t);\n}\n</code></pre>\n\n<p>I'm getting different result between gcc\\clang and Visual C++ (Microsoft CL), \nwhen I compare the assembly code in Compiler Explorer and I got the following:</p>\n\n<p><strong>clang (-std=c++11 -O3 )</strong></p>\n\n<pre><code>main:                                   # @main\n        mov     eax, 16\n        ret\n</code></pre>\n\n<p><strong>x86-64 gcc 6.3 (-O3)</strong></p>\n\n<pre><code>main:\n        mov     eax, 16\n        ret\n</code></pre>\n\n<p><strong>x86-64 CL 19 2017 RTW (-Ox)</strong></p>\n\n<pre><code>main    PROC\n        mov      eax, 24\n        ret      0\nmain    ENDP\n</code></pre>\n\n<p>is it Visual C++ compiler bug or it is undefined behavior ?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1492628914, "post_id": 43504053, "comment_id": 74062701, "body": "Yes, you should be able override global <code>new</code> / <code>delete</code>. <code>delete</code> operator accepts <code>nullptr</code> to be compatible with usual <code>free</code> semantics. It is not clear why do you want to check it for passed nullptr though."}, {"owner": {"reputation": 23, "user_id": 7891613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdbeb3a2c0cceafcf75de2f517e07eae?s=128&d=identicon&r=PG&f=1", "display_name": "azos", "link": "https://stackoverflow.com/users/7891613/azos"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1492629133, "post_id": 43504053, "comment_id": 74062845, "body": "@VTT and how do I do that?"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1492629319, "post_id": 43504053, "comment_id": 74062952, "body": "The snippet you posted should work."}, {"owner": {"reputation": 23, "user_id": 7891613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdbeb3a2c0cceafcf75de2f517e07eae?s=128&d=identicon&r=PG&f=1", "display_name": "azos", "link": "https://stackoverflow.com/users/7891613/azos"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1492629394, "post_id": 43504053, "comment_id": 74062995, "body": "It doesn&#39;t, try it yourself."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1492629455, "post_id": 43504053, "comment_id": 74063034, "body": "Maybe your compiler is optimizing out the last <code>delete</code>?"}, {"owner": {"reputation": 2352, "user_id": 5711725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cfaab398800db4fd0e9b0aae6621bda?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Mart&#237;n", "link": "https://stackoverflow.com/users/5711725/javier-mart%c3%adn"}, "edited": false, "score": 0, "creation_date": 1492629463, "post_id": 43504053, "comment_id": 74063044, "body": "Deleting a null pointer is defined to be a no-op, so it is possible that the compiler saw that q is always null and removed the call."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1492629529, "post_id": 43504053, "comment_id": 74063081, "body": "It works fine in debug build, even delete with nullptr."}, {"owner": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "edited": false, "score": 0, "creation_date": 1492629585, "post_id": 43504053, "comment_id": 74063111, "body": "Tried, works: <a href=\"http://rextester.com/RZA51383\" rel=\"nofollow noreferrer\">rextester.com/RZA51383</a>"}, {"owner": {"reputation": 23, "user_id": 7891613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdbeb3a2c0cceafcf75de2f517e07eae?s=128&d=identicon&r=PG&f=1", "display_name": "azos", "link": "https://stackoverflow.com/users/7891613/azos"}, "reply_to_user": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "edited": false, "score": 0, "creation_date": 1492630301, "post_id": 43504053, "comment_id": 74063526, "body": "It doesn&#39;t get called even in a more complex program for me(where the pointers aren&#39;t nullptr the whole time), and fine @Revolver_Ocelot it works there, doesn&#39;t work for me, but still doesn&#39;t answer my question if I can somehow force it to get called always. <a href=\"https://ideone.com/WRwInL\" rel=\"nofollow noreferrer\">ideone.com/WRwInL</a>"}, {"owner": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "edited": false, "score": 0, "creation_date": 1492630864, "post_id": 43504053, "comment_id": 74063905, "body": "In your linked question there is an answer pointing that compiler is allowed to call deallocation function with null pointer, but standard does not requires it. So, there is no standard compliant way to force specific behavior. You must check your compiler documentation to see if it provides a way to do that (probably not). The last resort would be to change compiler itself."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7891613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdbeb3a2c0cceafcf75de2f517e07eae?s=128&d=identicon&r=PG&f=1", "display_name": "azos", "link": "https://stackoverflow.com/users/7891613/azos"}, "edited": false, "score": 0, "creation_date": 1492631960, "post_id": 43504790, "comment_id": 74064580, "body": "Not what I was hoping for, but fine."}], "tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": true, "score": 1, "last_activity_date": 1492631159, "creation_date": 1492631159, "answer_id": 43504790, "question_id": 43504053, "link": "https://stackoverflow.com/questions/43504053/using-overloaded-replaced-delete-on-nullptr/43504790#43504790", "title": "Using overloaded/replaced delete[] on nullptr", "body": "<p>The standard leaves this behaviour unspecified.</p>\n\n<p>C++11, \u00a75.3.5, item 7:</p>\n\n<blockquote>\n  <p>If the value of the operand of the delete-expression is not a null\n  pointer value, the delete-expression will call a deallocation function\n  (3.7.4.2). Otherwise, it is unspecified whether the deallocation\n  function will be called.</p>\n</blockquote>\n\n<p>C++14 adds some details for the case of a non-null pointer, but the null case is the same.</p>\n\n<p>If there is any way to force any specific behaviour, it would be a compiler extension.</p>\n"}], "owner": {"reputation": 23, "user_id": 7891613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdbeb3a2c0cceafcf75de2f517e07eae?s=128&d=identicon&r=PG&f=1", "display_name": "azos", "link": "https://stackoverflow.com/users/7891613/azos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 43504790, "answer_count": 1, "score": 2, "last_activity_date": 1492631159, "creation_date": 1492628590, "last_edit_date": 1495541861, "question_id": 43504053, "link": "https://stackoverflow.com/questions/43504053/using-overloaded-replaced-delete-on-nullptr", "title": "Using overloaded/replaced delete[] on nullptr", "body": "<p>After searching on stackoverflow I've found that: \"It's still the responisiblity of operator delete (or delete[]) to check; the standard doesn't guarantee that it won't be given a null pointer; the standard requires that it be a no-op if given a null pointer. \"(<a href=\"https://stackoverflow.com/questions/1108360/delete-a-null-pointer-does-not-call-overloaded-delete-when-destructor-is-written\">delete a NULL pointer does not call overloaded delete when destructor is written</a>)\nNow to my question, is there any way to force the compiler to generate code that actually calls the overloaded/replaced delete[](for nullptr), example:</p>\n\n<pre><code>void *operator new[] (size_t n)\n{\n     std::cout &lt;&lt; \"new works \";\n    return std::malloc (n);\n}\n\nvoid operator delete [] ( void* ptr) {\n     if(!ptr) {\n          std::cout &lt;&lt; \"you just tried to delete a nullptr\";\n          return;\n     }\n     else {\n          std::cout &lt;&lt; \"delete works\";\n          free(ptr);\n     }\n}\nint main(){\n\n     char *p(new char[5]);\n     char *q = nullptr;\n     delete[] p;\n     delete[] q;\n     return 0;\n}\n</code></pre>\n\n<p>Like this it produces the output:</p>\n\n<pre><code>new works delete works\n</code></pre>\n\n<p>I've tried compiling it with -O0, but that doesn't seem to change anything(additional info: g++ --version\ng++ (Ubuntu 5.4.0-6ubuntu1~16.04.4) 5.4.0 20160609\n)</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 4, "creation_date": 1492628592, "post_id": 43504035, "comment_id": 74062526, "body": "Why do you think it should be <code>0.8</code>?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1492628718, "post_id": 43504035, "comment_id": 74062597, "body": "I&#39;d say that it converges to infinity since you&#39;re performing a square 100 times. not really surprising."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1492629108, "post_id": 43504035, "comment_id": 74062830, "body": "I suggest you put the <code>printf</code> inside the loop then you will see the value &quot;escape&quot; at the 23rd iteration. This kind of investigative approach will pay off ... infinitely on the road ahead."}, {"owner": {"reputation": 43, "user_id": 7870951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9546097abfb9df4f36862d6fb05d6756?s=128&d=identicon&r=PG&f=1", "display_name": "vishal_ag", "link": "https://stackoverflow.com/users/7870951/vishal-ag"}, "edited": false, "score": 0, "creation_date": 1492629311, "post_id": 43504035, "comment_id": 74062947, "body": "I think it should be 0.8 because for every iteration, I am getting the value of x as 0.8. and if you look at the number(every time), its not growing. Also if you run this loop for 5 times only, still it is showing run time error with the output value not equal to 0.8."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1492629397, "post_id": 43504035, "comment_id": 74062996, "body": "You are accumulating errors in representation. Please read <a href=\"http://stackoverflow.com/questions/588004/is-floating-point-math-broken\">Is floating point math broken?</a> The value <code>0.8</code> cannot be exactly represented by <code>float</code>."}, {"owner": {"reputation": 43, "user_id": 7870951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9546097abfb9df4f36862d6fb05d6756?s=128&d=identicon&r=PG&f=1", "display_name": "vishal_ag", "link": "https://stackoverflow.com/users/7870951/vishal-ag"}, "edited": false, "score": 0, "creation_date": 1492630658, "post_id": 43504035, "comment_id": 74063756, "body": "so #weather Vanes, I got your point but tell me one thing, if I am doing any basic operation with the no. 0.8, system is not storing the value same all the time. Sometimes its taking 0.799996 and sometime 0.800103. But if I print this floating point value without any operation (simply I am printing x in my code) 100 or 1000 times then its value is never changing. Every time it is giving output 0.8 only. Why?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1492632568, "post_id": 43504035, "comment_id": 74064940, "body": "<code>printf</code> rounds the value it is given, and is using the default 6 decimal places, and so the error in encoding <code>0.8</code> is not noticeable when printed; and that error is repeatable, not random. I understand why you expect <code>x = 0.8 * 0.2 * 5.0</code> to be <code>0.8</code>. But when you make further calculations, the processor uses the inaccurate representation, does not work on exactly <code>0.8</code> so the error gets increasingly worse until the value finally shoots off to infinity. BTW if you want to flag a commenter the style is @WeatherVane."}, {"owner": {"reputation": 3319, "user_id": 1886765, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73af3c058967ab01b4599c1a8f72306f?s=128&d=identicon&r=PG", "display_name": "Pharaoh", "link": "https://stackoverflow.com/users/1886765/pharaoh"}, "edited": false, "score": 3, "creation_date": 1492636759, "post_id": 43504035, "comment_id": 74067246, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/588004/is-floating-point-math-broken\">Is floating point math broken?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 7870951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9546097abfb9df4f36862d6fb05d6756?s=128&d=identicon&r=PG&f=1", "display_name": "vishal_ag", "link": "https://stackoverflow.com/users/7870951/vishal-ag"}, "edited": false, "score": 0, "creation_date": 1492629976, "post_id": 43504129, "comment_id": 74063342, "body": "okey. I am not going to the values now. If I iterate this code for 5 times only, still it is showing run time error. why? [link] (<a href=\"https://ideone.com/shXVur\" rel=\"nofollow noreferrer\">ideone.com/shXVur</a>)"}, {"owner": {"reputation": 374, "user_id": 5062253, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-XOsdVz2hsMk/AAAAAAAAAAI/AAAAAAAAAGk/tRIFxkYOADw/photo.jpg?sz=128", "display_name": "Pablo Escobar", "link": "https://stackoverflow.com/users/5062253/pablo-escobar"}, "reply_to_user": {"reputation": 43, "user_id": 7870951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9546097abfb9df4f36862d6fb05d6756?s=128&d=identicon&r=PG&f=1", "display_name": "vishal_ag", "link": "https://stackoverflow.com/users/7870951/vishal-ag"}, "edited": false, "score": 0, "creation_date": 1492630409, "post_id": 43504129, "comment_id": 74063594, "body": "@vishal_ag the code works fine and output is coming correctly, this is error given by online IDEs so ignore. Try to run code in your system."}], "tags": [], "owner": {"reputation": 374, "user_id": 5062253, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-XOsdVz2hsMk/AAAAAAAAAAI/AAAAAAAAAGk/tRIFxkYOADw/photo.jpg?sz=128", "display_name": "Pablo Escobar", "link": "https://stackoverflow.com/users/5062253/pablo-escobar"}, "is_accepted": true, "score": 3, "last_activity_date": 1492628917, "creation_date": 1492628917, "answer_id": 43504129, "question_id": 43504035, "link": "https://stackoverflow.com/questions/43504035/what-is-the-output-for-this-program/43504129#43504129", "title": "what is the output for this program?", "body": "<p>It means minus infinity.</p>\n\n<blockquote>\n  <p>EEE 754 floating point numbers can represent positive or negative infinity, and NaN (not a number). These three values arise from calculations whose result is undefined or cannot be represented accurately. You can also deliberately set a floating-point variable to any of them, which is sometimes useful. Some examples of calculations that produce infinity or NaN:</p>\n</blockquote>\n\n<p>This is output of you're code</p>\n\n<pre><code>0.800000 \n0.800000 \n0.800000 \n0.800001 \n0.799996 \n0.800011 \n0.799966 \n0.800103 \n0.799692 \n0.800923 \n0.797227 \n0.808280 \n0.774816 \n0.872380 \n0.556664 \n1.233946 \n-1.443383 \n-17.633698 \n-1642.905029 \n-13503899.000000 \n-911776526893056.000000 \n-4156682286578109086379962007552.000000 \n-inf \nafter this -inf -inf\n</code></pre>\n\n<p>because the value is out of range of flat</p>\n"}, {"tags": [], "owner": {"reputation": 311, "user_id": 6019827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sMsg3.jpg?s=128&g=1", "display_name": "Frapto", "link": "https://stackoverflow.com/users/6019827/frapto"}, "is_accepted": false, "score": 2, "last_activity_date": 1492629174, "creation_date": 1492629174, "answer_id": 43504200, "question_id": 43504035, "link": "https://stackoverflow.com/questions/43504035/what-is-the-output-for-this-program/43504200#43504200", "title": "what is the output for this program?", "body": "<p>floating point error: try taking the loop from 0 to 24 and see the output,\nYou get around 0.800018 , that changes the 1-x part which becomes a negative answer (around 40sh loop) so at 100th it is a very low negative number that it is basically -inf.</p>\n\n<p>It basically happens because x=0.8; is not 0.8 sharp but a very close number to 0.8, with loops the number grows until it affects the calculations.</p>\n\n<p>There are lots of solutions -one way is to round x every time-, just search google :)</p>\n"}], "owner": {"reputation": 43, "user_id": 7870951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9546097abfb9df4f36862d6fb05d6756?s=128&d=identicon&r=PG&f=1", "display_name": "vishal_ag", "link": "https://stackoverflow.com/users/7870951/vishal-ag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 43504129, "answer_count": 2, "score": -5, "last_activity_date": 1492629174, "creation_date": 1492628540, "last_edit_date": 1492628617, "question_id": 43504035, "link": "https://stackoverflow.com/questions/43504035/what-is-the-output-for-this-program", "title": "what is the output for this program?", "body": "<pre><code>#include&lt;stdio.h&gt;\nvoid main()\n{\n    int i;\n    float x=0.8;\n    for(i=0; i&lt;100; i++)\n    x=x*(1-x)*5;\n    printf(\"%f \\n\",x);\n}\n</code></pre>\n\n<p>According to me, it looks quite simple with answer <strong>0.80000000</strong> but the real answer is something else. Its getting run time error with the output value <strong>\"-inf\"</strong>. Why? </p>\n"}, {"tags": ["c++", "operator-overloading", "typecast-operator"], "comments": [{"owner": {"reputation": 13, "user_id": 6912605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d87c168c07b27f6dc58bd74a72f7e14?s=128&d=identicon&r=PG&f=1", "display_name": "andybelous2", "link": "https://stackoverflow.com/users/6912605/andybelous2"}, "edited": false, "score": 0, "creation_date": 1492628541, "post_id": 43504005, "comment_id": 74062499, "body": "Sry for my poor English,I tried in Russian version of stackoverflow,but haven`t foud an answer"}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 0, "creation_date": 1492628877, "post_id": 43504005, "comment_id": 74062674, "body": "Why would you want to do this? Regardless, you really cannot as <code>a</code> is an <code>A*</code>, not an <code>A</code>, and you cannot overload <code>A*</code>&#39;s <code>operator B*</code>."}, {"owner": {"reputation": 13, "user_id": 6912605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d87c168c07b27f6dc58bd74a72f7e14?s=128&d=identicon&r=PG&f=1", "display_name": "andybelous2", "link": "https://stackoverflow.com/users/6912605/andybelous2"}, "reply_to_user": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 0, "creation_date": 1492629141, "post_id": 43504005, "comment_id": 74062849, "body": "@VittorioRomeo my task is to throw an exception when I do typecast for this.Class B has to be derived and class A has to be a base class.There wasn`t mentioned that I has to use overloading,but I thought It can work."}, {"owner": {"reputation": 13, "user_id": 6912605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d87c168c07b27f6dc58bd74a72f7e14?s=128&d=identicon&r=PG&f=1", "display_name": "andybelous2", "link": "https://stackoverflow.com/users/6912605/andybelous2"}, "reply_to_user": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 0, "creation_date": 1492629224, "post_id": 43504005, "comment_id": 74062888, "body": "@VittorioRomeo Also tried dynamic cast,but it seems not to generate an exception for pointers,only for links"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1492631482, "post_id": 43504005, "comment_id": 74064297, "body": "The <code>operator B *()</code> converts an object of type <code>A</code> into a <code>B *</code>.  It doesn&#39;t convert an <code>A*</code> to a <code>B*</code>.   There is no way to do the latter with operator overloading   (pointers do not have member functions)."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1492631614, "post_id": 43504005, "comment_id": 74064379, "body": "This question also strikes me as an example of the XY problem.  <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\" title=\"what is the xy problem\">meta.stackexchange.com/questions/66377/what-is-the-xy-proble&zwnj;&#8203;m</a>"}, {"owner": {"reputation": 13, "user_id": 6912605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d87c168c07b27f6dc58bd74a72f7e14?s=128&d=identicon&r=PG&f=1", "display_name": "andybelous2", "link": "https://stackoverflow.com/users/6912605/andybelous2"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1492632439, "post_id": 43504005, "comment_id": 74064860, "body": "@Peter how to do it in another way?Can it work with converting constructor?"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1492633090, "post_id": 43504005, "comment_id": 74065241, "body": "No.   Only struct/class types have constructors.   Pointers do not."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1492633267, "post_id": 43504005, "comment_id": 74065330, "body": "No, there is no way to change the behavior of a cast from <code>A*</code> to <code>B*</code>."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1492633947, "post_id": 43504005, "comment_id": 74065700, "body": "Implicit conversion from an <code>A*</code> to a <code>B*</code> won&#39;t compile anyway.    Making it succeed, and just throwing an exception (i.e. effectively turning a compile-time error into a runtime error) is a step backward anyway."}, {"owner": {"reputation": 13, "user_id": 6912605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d87c168c07b27f6dc58bd74a72f7e14?s=128&d=identicon&r=PG&f=1", "display_name": "andybelous2", "link": "https://stackoverflow.com/users/6912605/andybelous2"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1492634498, "post_id": 43504005, "comment_id": 74066048, "body": "@Peter Im pretty sure it will compile,I`ve just tested it.Im using gcc compiler."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1492636230, "post_id": 43504005, "comment_id": 74066956, "body": "You missed my point.  An IMPLICIT type conversion will not compile.   An explicit conversion will.   Try <code>B *bb = a</code> or [equivalently] <code>B *bb(a)</code> in your code.     But <code>B *bb = (B *)a</code> will compile - a key property of an explicit type conversion is that it forces the compiler to do a conversion it would otherwise refuse to do - which is why explicit conversions are often considered poor practice, even if they are needed sometimes.     But it is still not possible to overload such a conversion, whether it is implicit or explicit."}], "answers": [{"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": true, "score": 0, "last_activity_date": 1492636424, "creation_date": 1492636424, "answer_id": 43506182, "question_id": 43504005, "link": "https://stackoverflow.com/questions/43504005/type-cast-overloading/43506182#43506182", "title": "Type-cast overloading", "body": "<p>You can provide a custom converter only for a class, not for a pointer. But you can create a class that mimics a pointer (that's the way <em>smart pointers</em> work).</p>\n\n<p>Here is an example of such a class:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass A\n{\nprotected:\n    int a;\npublic:\n    int getA() {\n        return a;\n    }\n    virtual ~A() {}  // intended to be derived\n};\n\nclass B;  // forward declaration\n\nclass Astar { // mimics a A*\nprivate:\n    A* pa;\npublic:\n    Astar(A* p): pa(p) {}\n    A* operator -&gt;() {\n        return pa;\n    }\n    operator B* ();  // declare the custom conversion operator\n    A&amp; operator *() {\n        return *pa;\n    }\n};\n\nclass B: public A\n{\nprotected:\n    int b;\npublic:\n    B(int a, int b): b(b) {\n        A::a = a;\n    }\n    int getB() {\n        return b;\n    }\n};\n\nAstar::operator B*() {            // defines the custom conversion\n    return dynamic_cast&lt;B *&gt;(pa);\n}\n\nint main()\n{\n    B b(1,2);\n    Astar x(&amp;b);       // x acts exactly as a A* would:\n    std::cout &lt;&lt; x-&gt;getA() &lt;&lt; \" - \" &lt;&lt; (*x).getA() &lt;&lt; std::endl;\n\n    B* pb = x;         // conversion to a plain B* is automatic\n    std::cout &lt;&lt; pb-&gt;getB() &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>Compiles without a warning and output is <em>as expected</em>...</p>\n"}], "owner": {"reputation": 13, "user_id": 6912605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d87c168c07b27f6dc58bd74a72f7e14?s=128&d=identicon&r=PG&f=1", "display_name": "andybelous2", "link": "https://stackoverflow.com/users/6912605/andybelous2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1035, "favorite_count": 0, "accepted_answer_id": 43506182, "answer_count": 1, "score": 0, "last_activity_date": 1492636424, "creation_date": 1492628384, "last_edit_date": 1492633550, "question_id": 43504005, "link": "https://stackoverflow.com/questions/43504005/type-cast-overloading", "title": "Type-cast overloading", "body": "<p>I need to throw an exception whe I do such typecast: <code>(B*)a</code>where a is a pointer to object of a base class A and B is a derived class.</p>\n\n<pre><code>class A\n{\n    protected:\n        int a;\n    public:\n        operator B*()\n        {\n            throw(1);\n        }\n\n};\n\nclass B: public A\n{\n protected:\n    int b;\n};\n\nvoid main()\n{\n    A *a;\n    (B*)a;\n}\n</code></pre>\n\n<p>I try overloading, but it doesn't work with a pointer to A just works with an object. How to overload this operation to make it work with a pointer to my base class?</p>\n"}, {"tags": ["c++", "coroutine", "c++20"], "comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 3, "creation_date": 1492627478, "post_id": 43503656, "comment_id": 74061877, "body": "To answer &quot;In what way is the concept of <i>coroutines</i> different from <i>parallelism</i> and <i>concurrency</i>?&quot; -- <a href=\"https://en.wikipedia.org/wiki/Coroutine\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Coroutine</a>"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1492627758, "post_id": 43503656, "comment_id": 74062050, "body": "related: <a href=\"http://stackoverflow.com/q/35121078/103167\">stackoverflow.com/q/35121078/103167</a>"}, {"owner": {"reputation": 234, "user_id": 2881005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d9db1e46c994c7d48b69054abe3bdce?s=128&d=identicon&r=PG&f=1", "display_name": "philsumuru", "link": "https://stackoverflow.com/users/2881005/philsumuru"}, "edited": false, "score": 4, "creation_date": 1492627941, "post_id": 43503656, "comment_id": 74062156, "body": "A very good and easy-to-follow intro to coroutine is James McNellis&#39;s presentation \u201cIntroduction to C++ Coroutines&quot; (Cppcon2016)."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 2, "creation_date": 1492628111, "post_id": 43503656, "comment_id": 74062261, "body": "Finally it would also be good to cover &quot;How are <i>coroutines</i> in C++ different from other languages&#39; implementations of coroutines and resumable functions?&quot; (which the above-linked wikipedia article, being language agnostic, doesn&#39;t address)"}, {"owner": {"reputation": 1075, "user_id": 2949645, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cv3Kc.jpg?s=128&g=1", "display_name": "Sahib Yar", "link": "https://stackoverflow.com/users/2949645/sahib-yar"}, "edited": false, "score": 1, "creation_date": 1586784417, "post_id": 43503656, "comment_id": 108246648, "body": "who else read this &quot;quarantine in C++20&quot; ?"}], "answers": [{"comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 10, "creation_date": 1492634038, "post_id": 43503926, "comment_id": 74065778, "body": "Concurrency and separation of concerns are <i>totally</i> unrelated.  Coroutines aren&#39;t to provide information for the suspended routine, they <i>are</i> the resumable routines."}], "tags": [], "owner": {"reputation": 259, "user_id": 7886227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hec3U.jpg?s=128&g=1", "display_name": "Dr t", "link": "https://stackoverflow.com/users/7886227/dr-t"}, "is_accepted": false, "score": 1, "last_activity_date": 1492628151, "creation_date": 1492628151, "answer_id": 43503926, "question_id": 43503656, "link": "https://stackoverflow.com/questions/43503656/what-are-coroutines-in-c20/43503926#43503926", "title": "What are coroutines in C++20?", "body": "<p>coroutines are supposed to be (in C++) functions that are able to \"wait\" for some other routine to complete and to provide whatever is needed for the suspended, paused, waiting, routine to go on.  the feature that is most interesting to C++ folks is that coroutines would ideally take no stack space...C# can already do something like this with await and yield but C++ might have to be rebuilt to get it in.</p>\n\n<p>concurrency is heavily focused on the separation of concerns where a concern is a task that the program is supposed to complete.  this separation of concerns may be accomplished by a number of means...usually be delegation of some sort.  the idea of concurrency is that a number of processes could run independently (separation of concerns) and a 'listener' would direct whatever is produced by those separated concerns to wherever it is supposed to go.  this is heavily dependent on some sort of asynchronous management.  There are a number of approaches to concurrency including Aspect oriented programming and others. C# has the 'delegate' operator which works quite nicely.</p>\n\n<p>parallelism sounds like concurrency and may be involved but is actually a physical construct involving many processors arranged in a more or less parallel fashion with software that is able to direct portions of code to different processors where it will be run and the results will be received back synchronously.</p>\n"}, {"comments": [{"owner": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "edited": false, "score": 31, "creation_date": 1518795019, "post_id": 44244451, "comment_id": 84663843, "body": "This is one of the clearest explanations of what coroutines are that I&#39;ve ever read. Comparing them to and distinguishing them from SIMD and classical threads was an excellent idea."}, {"owner": {"reputation": 15096, "user_id": 445296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/E6JMR.jpg?s=128&g=1", "display_name": "Jive Dadson", "link": "https://stackoverflow.com/users/445296/jive-dadson"}, "edited": false, "score": 3, "creation_date": 1522546092, "post_id": 44244451, "comment_id": 86195451, "body": "I don&#39;t understand the add-optionals example. std::optional&lt;int&gt; is not an awaitable object."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 15096, "user_id": 445296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/E6JMR.jpg?s=128&g=1", "display_name": "Jive Dadson", "link": "https://stackoverflow.com/users/445296/jive-dadson"}, "edited": false, "score": 0, "creation_date": 1522546540, "post_id": 44244451, "comment_id": 86195497, "body": "@jive I think the actual code had an optional augmented to be awaitable.  The effect was that if awaited on a not-&quot;ready&quot; optional it would suspend and return an empty optional, and would be ready if the optional was populated.  This composes nicely and lets you express &quot;if this optional is empty stop computing and return empty, otherwise continue on&quot;.  It was a bit of a hack, and may have required heap allocation."}, {"owner": {"reputation": 8647, "user_id": 112755, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/653e9876709910096ccdde524a306bf8?s=128&d=identicon&r=PG", "display_name": "Mordachai", "link": "https://stackoverflow.com/users/112755/mordachai"}, "edited": false, "score": 0, "creation_date": 1553603812, "post_id": 44244451, "comment_id": 97438221, "body": "Why is <code>r</code> <code>co_return</code>&#39;d and not <code>co_yield</code>&#39;d?  Is that example really to only extract one line and then be done (as written), or should it be returning as many parsed lines as it contains, yielding each one until there are no more?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 8647, "user_id": 112755, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/653e9876709910096ccdde524a306bf8?s=128&d=identicon&r=PG", "display_name": "Mordachai", "link": "https://stackoverflow.com/users/112755/mordachai"}, "edited": false, "score": 1, "creation_date": 1553605256, "post_id": 44244451, "comment_id": 97439259, "body": "@mord yes it is supposed to return 1 element.  Might need polishing; if we want more than one line need a different control flow."}, {"owner": {"reputation": 772, "user_id": 4043866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104dac269b12649d6df8386b88962745?s=128&d=identicon&r=PG", "display_name": "JulianH", "link": "https://stackoverflow.com/users/4043866/julianh"}, "edited": false, "score": 0, "creation_date": 1553957695, "post_id": 44244451, "comment_id": 97582957, "body": "What&#39;s happening if I call a coroutine from different threads?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 772, "user_id": 4043866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104dac269b12649d6df8386b88962745?s=128&d=identicon&r=PG", "display_name": "JulianH", "link": "https://stackoverflow.com/users/4043866/julianh"}, "edited": false, "score": 0, "creation_date": 1553966844, "post_id": 44244451, "comment_id": 97585353, "body": "@JulianH At the same time, or in sequence?  At the same time, nothing good; calling it from one, having it await (block), then passing the coroutine to another thread and calling it there, you should be fine.  But under the C++ proposal, I believe some of this is going to be determined by the implementation details of your coroutine."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 1, "creation_date": 1559916420, "post_id": 44244451, "comment_id": 99580683, "body": "@l.f. sorry, was supposed to be <code>;;</code>."}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1561269309, "post_id": 44244451, "comment_id": 100003502, "body": "What is the difference if we rewrite the coroutine-based generator to something like <code>int generator() { static int i = 0; return i = (i + 1) % 100; }</code>?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1561310950, "post_id": 44244451, "comment_id": 100012453, "body": "@l.f that generator&#39;s state is global?  The coroutine&#39;s is not?"}, {"owner": {"reputation": 4705, "user_id": 20514, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ae5e6f919842852e9e838db77b987d9a?s=128&d=identicon&r=PG", "display_name": "avp", "link": "https://stackoverflow.com/users/20514/avp"}, "reply_to_user": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 1, "creation_date": 1569840686, "post_id": 44244451, "comment_id": 102714312, "body": "@L.F. for such simple function maybe there is no difference. But the difference I see in general is that a coroutine remembers the entry/exit (execution) point in its body whereas a static function starts the execution from the beginning each time. The location of the &quot;local&quot; data is irrelevant I guess."}, {"owner": {"reputation": 9427, "user_id": 1470092, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/0eeda48676f683d04c1431b2542954af?s=128&d=identicon&r=PG", "display_name": "huseyin tugrul buyukisik", "link": "https://stackoverflow.com/users/1470092/huseyin-tugrul-buyukisik"}, "edited": false, "score": 0, "creation_date": 1586254172, "post_id": 44244451, "comment_id": 108054575, "body": "So this runs both SIMD and threads but without developer caring about them? Good isn&#39;t it?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 9427, "user_id": 1470092, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/0eeda48676f683d04c1431b2542954af?s=128&d=identicon&r=PG", "display_name": "huseyin tugrul buyukisik", "link": "https://stackoverflow.com/users/1470092/huseyin-tugrul-buyukisik"}, "edited": false, "score": 0, "creation_date": 1586294753, "post_id": 44244451, "comment_id": 108076171, "body": "@huseyintugrulbuyukisik No."}, {"owner": {"reputation": 4535, "user_id": 59081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c17b54bbea172f608e552f9bf67d4f9?s=128&d=identicon&r=PG", "display_name": "Tanveer Badar", "link": "https://stackoverflow.com/users/59081/tanveer-badar"}, "edited": false, "score": 0, "creation_date": 1597160686, "post_id": 44244451, "comment_id": 112040665, "body": "Thank you, this is extremely well written. Being more well-versed in C# and working with .net for far longer, I was able to draw several parallels from C# and better map the C++ variety into what I am already familiar with."}, {"owner": {"reputation": 16696, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 0, "creation_date": 1601982997, "post_id": 44244451, "comment_id": 113569472, "body": "Does C++20 have <code>std::expected</code>? I couldn&#39;t find it on cppreference.com"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 16696, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 1, "creation_date": 1601989624, "post_id": 44244451, "comment_id": 113572574, "body": "@AyxanHaqverdili No; latest proposal I can find is <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/p0323r7.html\" rel=\"nofollow noreferrer\">open-std.org/jtc1/sc22/wg21/docs/papers/2018/p0323r7.html</a> -- see <a href=\"https://www.reddit.com/r/cpp/comments/c75ipk/why_stdexpected_is_not_in_the_standard_yet_is_it/\" rel=\"nofollow noreferrer\">reddit.com/r/cpp/comments/c75ipk/&hellip;</a> for discussion about it"}, {"owner": {"reputation": 325758, "user_id": 415784, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2WX9Z.jpg?s=128&g=1", "display_name": "Nawaz", "link": "https://stackoverflow.com/users/415784/nawaz"}, "edited": false, "score": 0, "creation_date": 1613092499, "post_id": 44244451, "comment_id": 116977071, "body": "nitpick: <code>return (co_await a) + (co_await b);</code> should use <code>co_return</code> as opposed to <code>return</code> ?"}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 228, "last_activity_date": 1613150242, "last_edit_date": 1613150242, "creation_date": 1496066740, "answer_id": 44244451, "question_id": 43503656, "link": "https://stackoverflow.com/questions/43503656/what-are-coroutines-in-c20/44244451#44244451", "title": "What are coroutines in C++20?", "body": "<p>At an abstract level, Coroutines split the idea of having an execution state off of the idea of having a thread of execution.</p>\n<p>SIMD (single instruction multiple data) has multiple &quot;threads of execution&quot; but only one execution state (it just works on multiple data).  Arguably parallel algorithms are a bit like this, in that you have one &quot;program&quot; run on different data.</p>\n<p>Threading has multiple &quot;threads of execution&quot; and multiple execution states.  You have more than one program, and more than one thread of execution.</p>\n<p>Coroutines has multiple execution states, but does not own a thread of execution.  You have a program, and the program has state, but it has no thread of execution.</p>\n<hr />\n<p>The easiest example of coroutines are generators or enumerables from other languages.</p>\n<p>In pseudo code:</p>\n<pre><code>function Generator() {\n  for (i = 0 to 100)\n    produce i\n}\n</code></pre>\n<p>The <code>Generator</code> is called, and the first time it is called it returns <code>0</code>.  Its state is remembered (how much state varies with implementation of coroutines), and the next time you call it it continues where it left off.  So it returns 1 the next time.  Then 2.</p>\n<p>Finally it reaches the end of the loop and falls off the end of the function; the coroutine is finished.  (What happens here varies based on language we are talking about; in python, it throws an exception).</p>\n<p>Coroutines bring this capability to C++.</p>\n<p>There are two kinds of coroutines; stackful and stackless.</p>\n<p>A stackless coroutine only stores local variables in its state and its location of execution.</p>\n<p>A stackful coroutine stores an entire stack (like a thread).</p>\n<p>Stackless coroutines can be extremely light weight.  The last proposal I read involved basically rewriting your function into something a bit like a lambda; all local variables go into the state of an object, and labels are used to jump to/from the location where the coroutine &quot;produces&quot; intermediate results.</p>\n<p>The process of producing a value is called &quot;yield&quot;, as coroutines are bit like cooperative multithreading; you are yielding the point of execution back to the caller.</p>\n<p>Boost has an implementation of stackful coroutines; it lets you call a function to yield for you.  Stackful coroutines are more powerful, but also more expensive.</p>\n<hr />\n<p>There is more to coroutines than a simple generator.  You can await a coroutine in a coroutine, which lets you compose coroutines in a useful manner.</p>\n<p>Coroutines, like if, loops and function calls, are another kind of &quot;structured goto&quot; that lets you express certain useful patterns (like state machines) in a more natural way.</p>\n<hr />\n<p>The specific implementation of Coroutines in C++ is a bit interesting.</p>\n<p>At its most basic level, it adds a few keywords to C++: <code>co_return</code> <code>co_await</code> <code>co_yield</code>, together with some library types that work with them.</p>\n<p>A function becomes a coroutine by having one of those in its body.  So from their declaration they are indistinguishable from functions.</p>\n<p>When one of those three keywords are used in a function body, some standard mandated examining of the return type and arguments occurs and the function is transformed into a coroutine.  This examining tells the compiler where to store the function state when the function is suspended.</p>\n<p>The simplest coroutine is a generator:</p>\n<pre><code>generator&lt;int&gt; get_integers( int start=0, int step=1 ) {\n  for (int current=start; true; current+= step)\n    co_yield current;\n}\n</code></pre>\n<p><code>co_yield</code> suspends the functions execution, stores that state in the <code>generator&lt;int&gt;</code>, then returns the value of <code>current</code> through the <code>generator&lt;int&gt;</code>.</p>\n<p>You can loop over the integers returned.</p>\n<p><code>co_await</code> meanwhile lets you splice one coroutine onto another.  If you are in one coroutine and you need the results of an awaitable thing (often a coroutine) before progressing, you <code>co_await</code> on it.  If they are ready, you proceed immediately; if not, you suspend until the awaitable you are waiting on is ready.</p>\n<pre><code>std::future&lt;std::expected&lt;std::string&gt;&gt; load_data( std::string resource )\n{\n  auto handle = co_await open_resouce(resource);\n  while( auto line = co_await read_line(handle)) {\n    if (std::optional&lt;std::string&gt; r = parse_data_from_line( line ))\n       co_return *r;\n  }\n  co_return std::unexpected( resource_lacks_data(resource) );\n}\n</code></pre>\n<p><code>load_data</code> is a coroutine that generates a <code>std::future</code> when the named resource is opened and we manage to parse to the point where we found the data requested.</p>\n<p><code>open_resource</code> and <code>read_line</code>s are probably async coroutines that open a file and read lines from it.  The <code>co_await</code> connects the suspending and ready state of <code>load_data</code> to their progress.</p>\n<p>C++ coroutines are much more flexible than this, as they were implemented as a minimal set of language features on top of user-space types.  The user-space types effectively define what <code>co_return</code> <code>co_await</code> and <code>co_yield</code> <em>mean</em> -- I've seen people use it to implement monadic optional expressions such that a <code>co_await</code> on an empty optional automatically propogates the empty state to the outer optional:</p>\n<pre><code>modified_optional&lt;int&gt; add( modified_optional&lt;int&gt; a, modified_optional&lt;int&gt; b ) {\n  co_return (co_await a) + (co_await b);\n}\n</code></pre>\n<p>instead of</p>\n<pre><code>std::optional&lt;int&gt; add( std::optional&lt;int&gt; a, std::optional&lt;int&gt; b ) {\n  if (!a) return std::nullopt;\n  if (!b) return std::nullopt;\n  return *a + *b;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1604269549, "post_id": 47106551, "comment_id": 114288956, "body": "Why is it &quot;like a C function&quot; rather than &quot;like a function&quot;?"}], "tags": [], "owner": {"reputation": 10938, "user_id": 155082, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0f1316ecb725006d020998e6b8a0740c?s=128&d=identicon&r=PG", "display_name": "Lothar", "link": "https://stackoverflow.com/users/155082/lothar"}, "is_accepted": false, "score": 24, "last_activity_date": 1509759598, "creation_date": 1509759598, "answer_id": 47106551, "question_id": 43503656, "link": "https://stackoverflow.com/questions/43503656/what-are-coroutines-in-c20/47106551#47106551", "title": "What are coroutines in C++20?", "body": "<p>A coroutine is like a C function which has multiple return statements and when called a 2nd time does not start execution at the begin of the function but at the first instruction after the previous executed return. This execution location is saved together with all automatic variables that would live on the stack in non coroutine functions.</p>\n\n<p>A previous experimental coroutine implementation from Microsoft did use copied stacks so you could even return from deep nested functions. But this version was rejected by the C++ committee. You can get this implementation for example with the Boosts fiber library.</p>\n"}], "owner": {"reputation": 8788, "user_id": 6866309, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CFXxE.jpg?s=128&g=1", "display_name": "Pavan Chandaka", "link": "https://stackoverflow.com/users/6866309/pavan-chandaka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53707, "favorite_count": 54, "accepted_answer_id": 44244451, "answer_count": 3, "score": 115, "last_activity_date": 1613150242, "creation_date": 1492627149, "last_edit_date": 1518798377, "question_id": 43503656, "link": "https://stackoverflow.com/questions/43503656/what-are-coroutines-in-c20", "title": "What are coroutines in C++20?", "body": "<p>What are coroutines in <a href=\"/questions/tagged/c%2b%2b20\" class=\"post-tag\" title=\"show questions tagged &#39;c++20&#39;\" rel=\"tag\">c++20</a>?</p>\n\n<p>In what ways it is different from \"Parallelism2\" or/and \"Concurrency2\" (look into below image)?</p>\n\n<p>The below image is from ISOCPP.</p>\n\n<p><a href=\"https://isocpp.org/files/img/wg21-timeline-2017-03.png\" rel=\"noreferrer\">https://isocpp.org/files/img/wg21-timeline-2017-03.png</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/4MtgA.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/4MtgA.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "function", "pointers"], "comments": [{"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1492627837, "post_id": 43503600, "comment_id": 74062090, "body": "Are you using C++11/14, or 03?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1492628063, "post_id": 43503600, "comment_id": 74062230, "body": "Ahhhh. The Flying Spaghetti Monster embraces C++ in its noodly appendages!"}, {"owner": {"reputation": 279, "user_id": 951520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1b5af50e127a6adf47890462a470d19e?s=128&d=identicon&r=PG", "display_name": "blooop", "link": "https://stackoverflow.com/users/951520/blooop"}, "edited": false, "score": 0, "creation_date": 1492693611, "post_id": 43503600, "comment_id": 74094126, "body": "I am using c++ 14"}], "answers": [{"comments": [{"owner": {"reputation": 279, "user_id": 951520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1b5af50e127a6adf47890462a470d19e?s=128&d=identicon&r=PG", "display_name": "blooop", "link": "https://stackoverflow.com/users/951520/blooop"}, "edited": false, "score": 0, "creation_date": 1492672216, "post_id": 43504659, "comment_id": 74078929, "body": "Thanks.  I got something similar to this working (your syntax is better though) but I would prefer not to set the state internally because then the compiler will not warn me if I don&#39;t return some type of state transition."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 1, "last_activity_date": 1492630706, "creation_date": 1492630706, "answer_id": 43504659, "question_id": 43503600, "link": "https://stackoverflow.com/questions/43503600/how-to-pass-a-function-pointer-to-a-function-from-within-that-function/43504659#43504659", "title": "How to pass a function pointer to a function from within that function", "body": "<p>If you assign next step directly in the method, if would be simpler.\nYour current way requires some recursive definition type.</p>\n\n<pre><code>class FSM\n{\n    int variable = 0;\n    void (FSM::*currentState) () = &amp;FSM::state1;\npublic:\n    FSM() = default;\n\n    void state1()\n    {\n      variable++;\n      std::cout&lt;&lt;  \"In state1, variable: \" &lt;&lt; variable &lt;&lt;std::endl;\n      if ( variable &gt;2 )\n         currentState = &amp;FSM::state2;\n      else\n         currentState = &amp;FSM::state1;\n    }\n\n    void state2()\n    {\n        std::cout&lt;&lt;  \"In state2, variable: \" &lt;&lt; variable &lt;&lt;std::endl;\n        variable-=2;\n        currentState = &amp;FSM::state1;\n    }\n\n    void update() { (this-&gt;*currentState)(); }\n};\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/dded801d9e63ecdc\" rel=\"nofollow noreferrer\">Demo</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 279, "user_id": 951520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1b5af50e127a6adf47890462a470d19e?s=128&d=identicon&r=PG", "display_name": "blooop", "link": "https://stackoverflow.com/users/951520/blooop"}, "edited": false, "score": 0, "creation_date": 1492681120, "post_id": 43505102, "comment_id": 74084659, "body": "Thanks, that is exactly what I was looking for.  I don&#39;t fully understand exactly how it works yet and was having difficulty creating a default constructor for type fsmFunc.   How would you go about doing that?   For example, if I didn&#39;t want to initialise currentState in the constructor of FSM."}, {"owner": {"reputation": 279, "user_id": 951520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1b5af50e127a6adf47890462a470d19e?s=128&d=identicon&r=PG", "display_name": "blooop", "link": "https://stackoverflow.com/users/951520/blooop"}, "edited": false, "score": 0, "creation_date": 1492694963, "post_id": 43505102, "comment_id": 74095213, "body": "I&#39;ve also noticed some strange behaviour if I copy the FSM object around. My current solution is to store a pointer to the object because I can&#39;t get the move, copy and assignment constructors to work properly with the binding."}, {"owner": {"reputation": 4138, "user_id": 30160, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9cc7a433f140236fb55c21d3266cced8?s=128&d=identicon&r=PG", "display_name": "Derrick Turk", "link": "https://stackoverflow.com/users/30160/derrick-turk"}, "reply_to_user": {"reputation": 279, "user_id": 951520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1b5af50e127a6adf47890462a470d19e?s=128&d=identicon&r=PG", "display_name": "blooop", "link": "https://stackoverflow.com/users/951520/blooop"}, "edited": false, "score": 0, "creation_date": 1492727793, "post_id": 43505102, "comment_id": 74114585, "body": "@blooop you can replace the current <code>explicit</code> constructor on <code>mu</code> with a forwarding constructor <code>template&lt;class... Args&gt; mu(Args&amp;&amp;... args) : T&lt;mu&lt;T&gt;&gt;(std::forward&lt;Args&gt;(args)...) { }</code>; this&#39;ll let you construct the recursive type from any arguments that could construct the underlying type. In this case though, that&#39;s <code>std::function</code>, which has a default constructor but not a terribly useful one: you&#39;ll get a function that throws <code>std::bad_function_call</code> when invoked. I think starting in state 1 is more likely to be the intended behavior."}], "tags": [], "owner": {"reputation": 4138, "user_id": 30160, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9cc7a433f140236fb55c21d3266cced8?s=128&d=identicon&r=PG", "display_name": "Derrick Turk", "link": "https://stackoverflow.com/users/30160/derrick-turk"}, "is_accepted": true, "score": 1, "last_activity_date": 1492632241, "creation_date": 1492632241, "answer_id": 43505102, "question_id": 43503600, "link": "https://stackoverflow.com/questions/43503600/how-to-pass-a-function-pointer-to-a-function-from-within-that-function/43505102#43505102", "title": "How to pass a function pointer to a function from within that function", "body": "<p>The most direct translation is to construct a recursive type, using what's often called \"Fix\" or \"Mu\". I cribbed a bit of my <code>mu</code> definition from <a href=\"http://ericniebler.com/2013/07/16/f-algebras-and-c/\" rel=\"nofollow noreferrer\">http://ericniebler.com/2013/07/16/f-algebras-and-c/</a>.</p>\n\n<pre><code>#include &lt;functional&gt;\n#include &lt;iostream&gt;\n\ntemplate&lt;template&lt;class&gt; class T&gt; struct mu;\ntemplate&lt;template&lt;class&gt; class T&gt; struct mu: T&lt;mu&lt;T&gt;&gt; {\n    explicit mu(T&lt;mu&lt;T&gt;&gt; t) : T&lt;mu&lt;T&gt;&gt;(t) { }\n};\n\ntemplate &lt;class Ret&gt; using no_args_fn = std::function&lt;Ret()&gt;;\ntypedef mu&lt;no_args_fn&gt; fsmFunc;\n\nclass FSM\n{\n\n    public:\n      FSM();\n      void update();\n\n    private:\n      fsmFunc currentState;\n\n      fsmFunc state1();\n      fsmFunc state2();    \n\n      int variable;\n};\n\nFSM::FSM()\n  : currentState(std::bind(&amp;FSM::state1, this))\n{\n  variable = 0;\n}\n\nfsmFunc FSM::state1()\n{\n  variable++;\n  std::cout&lt;&lt;  \"In state1, variable: \" &lt;&lt; variable &lt;&lt;std::endl;\n  if ( variable &gt;2 )\n     return fsmFunc(std::bind(&amp;FSM::state2, this));\n  else\n     return fsmFunc(std::bind (&amp;FSM::state1, this));\n}\n\nfsmFunc FSM::state2()\n{\n  std::cout&lt;&lt;  \"In state2, variable: \" &lt;&lt; variable &lt;&lt;std::endl;\n  variable-=2;\n  return fsmFunc(std::bind(&amp;FSM::state1, this));\n}\n\nvoid FSM::update()\n{\n  currentState = currentState();\n}\n\nint main()\n{\n    FSM fsm;\n    fsm.update();\n    fsm.update();\n    fsm.update();\n    fsm.update();\n}\n</code></pre>\n"}], "owner": {"reputation": 279, "user_id": 951520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1b5af50e127a6adf47890462a470d19e?s=128&d=identicon&r=PG", "display_name": "blooop", "link": "https://stackoverflow.com/users/951520/blooop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 43505102, "answer_count": 2, "score": 0, "last_activity_date": 1492632241, "creation_date": 1492626969, "question_id": 43503600, "link": "https://stackoverflow.com/questions/43503600/how-to-pass-a-function-pointer-to-a-function-from-within-that-function", "title": "How to pass a function pointer to a function from within that function", "body": "<p>I'm attempting to create a simple finite state machine in c++.  The basic idea is that each state in the FSM does some calculations and then returns a function pointer to the next state.  If the state should remain the same then the function returns a pointer to itself.\nAfter failing to create get it to work in c++ as desired I implemented it in python as a sanity check.  </p>\n\n<pre><code>class FSM:\n\ndef __init__(self):\n    self.variable =0\n    self.currentState = self.state1;            \n\ndef state1(self):\n    self.variable = self.variable+1;\n    print \"in state 1, variable =\", self.variable\n    if self.variable &gt;2:\n        return self.state2   \n    return self.state1\n\ndef state2(self):\n    self.variable = self.variable-2\n    print \"in state2, variable =\",self.variable\n    return self.state1\n\ndef update(self):\n    self.currentState = self.currentState()\n\n\nfsm = FSM();\nfor i in range(1,10):\n   fsm.update()    \n</code></pre>\n\n<p>This is what I've written in c++, but it does not compile</p>\n\n<pre><code>typedef std::function&lt;void()&gt; fsmFunc;\n\nclass FSM\n{\n  int variable;\n\n  FSM();\n\n  function&lt;fsmFunc()&gt; currentState;\n\n  fsmFunc state1();\n  fsmFunc state2();    \n\n  void update();\n};\n\nFSM::FSM()\n{\n  variable =0;\n  d.consolePopup&lt;&gt;(\"sdfsd\");\n  currentState = bind ( &amp;FSM::state1,this );\n}\n\nfsmFunc FSM::state1()\n{\n  variable++;\n  std::cout&lt;&lt;  \"In state1, variable: \" &lt;&lt; variable &lt;&lt;std::endl;\n  if ( variable &gt;2 )\n     return std::bind ( &amp;FSM::state2,this );\n  else\n     return std::bind ( &amp;FSM::state1,this );\n}\n\nfsmFunc FSM::state2()\n{\n  std::cout&lt;&lt;  \"In state2, variable: \" &lt;&lt; variable &lt;&lt;std::endl;\n  variable-=2;\n  return std::bind ( &amp;FSM::state1,this );\n}\n\nvoid FSM::update()\n{\n  currentState = currentState();\n}\n</code></pre>\n\n<p>I get this error:</p>\n\n<pre><code>note: candidate function not viable: no known conversion from 'function&lt;void ()&gt;' to 'const function&lt;std::function&lt;void ()&gt; ()&gt;' for 1st argument\n</code></pre>\n\n<p>I have tried lots of different variations but can't get the types to work correctly for the currentState = currentState();</p>\n\n<p>Is this possible in c++?</p>\n"}, {"tags": ["c++", "scp", "libssh"], "comments": [{"owner": {"reputation": 6633, "user_id": 2378300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/852aed09b52c7514ed23f75f2921f6cc?s=128&d=identicon&r=PG", "display_name": "Jonas", "link": "https://stackoverflow.com/users/2378300/jonas"}, "edited": false, "score": 0, "creation_date": 1492627471, "post_id": 43503595, "comment_id": 74061875, "body": "Why does <code>fileSize()</code> not take the file name as a parameter? As it is now, you are looking at two different files. One for get the size and one to read from."}, {"owner": {"reputation": 41, "user_id": 4672369, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/772f33d68cbca3ac225c58e7bc013adb?s=128&d=identicon&r=PG&f=1", "display_name": "Snow", "link": "https://stackoverflow.com/users/4672369/snow"}, "reply_to_user": {"reputation": 6633, "user_id": 2378300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/852aed09b52c7514ed23f75f2921f6cc?s=128&d=identicon&r=PG", "display_name": "Jonas", "link": "https://stackoverflow.com/users/2378300/jonas"}, "edited": false, "score": 0, "creation_date": 1492627710, "post_id": 43503595, "comment_id": 74062018, "body": "I have it &quot;coded in&quot; since is going to be set on a chron job &amp; left alone, but that was a mistake, thank you.  edited post to reflect as it still isn&#39;t working :(.  It&#39;s also a constant filename that wont change*"}, {"owner": {"reputation": 6633, "user_id": 2378300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/852aed09b52c7514ed23f75f2921f6cc?s=128&d=identicon&r=PG", "display_name": "Jonas", "link": "https://stackoverflow.com/users/2378300/jonas"}, "edited": false, "score": 0, "creation_date": 1492627835, "post_id": 43503595, "comment_id": 74062087, "body": "Could you post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"}, {"owner": {"reputation": 18507, "user_id": 13317, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/47a9a5b4589057085336011863d2ee9a?s=128&d=identicon&r=PG", "display_name": "Kenster", "link": "https://stackoverflow.com/users/13317/kenster"}, "edited": false, "score": 0, "creation_date": 1492628168, "post_id": 43503595, "comment_id": 74062289, "body": "<code>rc = ssh_scp_write(scp, cvp, bufferSize);</code> You&#39;re writing out the entire buffer here. You should just write the number of bytes that you read from the input file. Also considering your buffer is 1GB in size, if you&#39;re not seeing that much traffic through tcpdump, that suggests that your program isn&#39;t even reaching this point. And do you need such a large buffer? Anything over 32k-64k is probably a waste."}, {"owner": {"reputation": 41, "user_id": 4672369, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/772f33d68cbca3ac225c58e7bc013adb?s=128&d=identicon&r=PG&f=1", "display_name": "Snow", "link": "https://stackoverflow.com/users/4672369/snow"}, "reply_to_user": {"reputation": 6633, "user_id": 2378300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/852aed09b52c7514ed23f75f2921f6cc?s=128&d=identicon&r=PG", "display_name": "Jonas", "link": "https://stackoverflow.com/users/2378300/jonas"}, "edited": false, "score": 0, "creation_date": 1492628416, "post_id": 43503595, "comment_id": 74062427, "body": "edited w/ more details @Jonas"}, {"owner": {"reputation": 41, "user_id": 4672369, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/772f33d68cbca3ac225c58e7bc013adb?s=128&d=identicon&r=PG&f=1", "display_name": "Snow", "link": "https://stackoverflow.com/users/4672369/snow"}, "reply_to_user": {"reputation": 18507, "user_id": 13317, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/47a9a5b4589057085336011863d2ee9a?s=128&d=identicon&r=PG", "display_name": "Kenster", "link": "https://stackoverflow.com/users/13317/kenster"}, "edited": false, "score": 0, "creation_date": 1492628835, "post_id": 43503595, "comment_id": 74062652, "body": "@Kenster it&#39;s a 2MB file so deff going overkill on the buffer then.  Changed the function to &quot;rc = ssh_scp_write(scp, cvp, length);&quot;  &amp; saw no change, everything looks the same."}, {"owner": {"reputation": 2191, "user_id": 7070965, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qEhQf.png?s=128&g=1", "display_name": "dtell", "link": "https://stackoverflow.com/users/7070965/dtell"}, "edited": false, "score": 0, "creation_date": 1492629899, "post_id": 43503595, "comment_id": 74063290, "body": "Why don&#39;t you use the <code>&lt;libssh&#47;libsshpp.hpp&gt;</code> header which provides a C++ wrapper for <code>&lt;libssh&#47;libssh&gt;</code>?"}, {"owner": {"reputation": 41, "user_id": 4672369, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/772f33d68cbca3ac225c58e7bc013adb?s=128&d=identicon&r=PG&f=1", "display_name": "Snow", "link": "https://stackoverflow.com/users/4672369/snow"}, "reply_to_user": {"reputation": 2191, "user_id": 7070965, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qEhQf.png?s=128&g=1", "display_name": "dtell", "link": "https://stackoverflow.com/users/7070965/dtell"}, "edited": false, "score": 0, "creation_date": 1492629978, "post_id": 43503595, "comment_id": 74063343, "body": "@datell I wasn&#39;t aware of it....I&#39;ll have to check it out :)"}, {"owner": {"reputation": 2191, "user_id": 7070965, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qEhQf.png?s=128&g=1", "display_name": "dtell", "link": "https://stackoverflow.com/users/7070965/dtell"}, "edited": false, "score": 0, "creation_date": 1492630110, "post_id": 43503595, "comment_id": 74063408, "body": "Don&#39;t expect to much! It is horribly documentated, a lot of functions can be found in the source code but not in the doxygen documentation. And it is really just a wrapper like <code>mycppfunc(){return mycfunc();}</code>. It won&#39;t solve your problem, I was just wondering."}, {"owner": {"reputation": 41, "user_id": 4672369, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/772f33d68cbca3ac225c58e7bc013adb?s=128&d=identicon&r=PG&f=1", "display_name": "Snow", "link": "https://stackoverflow.com/users/4672369/snow"}, "edited": false, "score": 0, "creation_date": 1492630112, "post_id": 43503595, "comment_id": 74063411, "body": "Would still like to know why the current code isn&#39;t working**"}, {"owner": {"reputation": 41, "user_id": 4672369, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/772f33d68cbca3ac225c58e7bc013adb?s=128&d=identicon&r=PG&f=1", "display_name": "Snow", "link": "https://stackoverflow.com/users/4672369/snow"}, "reply_to_user": {"reputation": 2191, "user_id": 7070965, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qEhQf.png?s=128&g=1", "display_name": "dtell", "link": "https://stackoverflow.com/users/7070965/dtell"}, "edited": false, "score": 0, "creation_date": 1492630171, "post_id": 43503595, "comment_id": 74063452, "body": "@datell lol tyvm"}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 4672369, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/772f33d68cbca3ac225c58e7bc013adb?s=128&d=identicon&r=PG&f=1", "display_name": "Snow", "link": "https://stackoverflow.com/users/4672369/snow"}, "is_accepted": true, "score": 0, "last_activity_date": 1492707344, "creation_date": 1492707344, "answer_id": 43525557, "question_id": 43503595, "link": "https://stackoverflow.com/questions/43503595/send-file-via-libssh-ssh-scp-push-file-ssh-scp-write/43525557#43525557", "title": "Send File via libssh (ssh_scp_push_file &amp;&amp; ssh_scp_write)", "body": "<p>Solved this issue w/ of course, more reading...</p>\n\n<p>I was not actually initializing the SCP subsystem \"within\" the SSH system.</p>\n\n<p>By adding in;</p>\n\n<pre><code>    scp = ssh_scp_new(my_ssh_session, SSH_SCP_WRITE, \"/\");\n    if (scp == NULL)\n    {\n        fprintf(stderr, \"Error allocating scp session: %s\\n\", ssh_get_error(my_ssh_session));\n        return SSH_ERROR;\n    }\n    rc = ssh_scp_init(scp);\n    if (rc != SSH_OK)\n    {\n        fprintf(stderr, \"Error initializing scp session: %s\\n\", ssh_get_error(my_ssh_session));\n        ssh_scp_free(scp);\n        return rc;\n    }\n</code></pre>\n\n<p>above my push/write functions, I was able to get the SCP subsystem to \"start\".  Haven't gotten her functioning yet (SCP Status Code 1d not valid) error now, but i at least know scp is \"awake\" at this point...</p>\n"}], "owner": {"reputation": 41, "user_id": 4672369, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/772f33d68cbca3ac225c58e7bc013adb?s=128&d=identicon&r=PG&f=1", "display_name": "Snow", "link": "https://stackoverflow.com/users/4672369/snow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1039, "favorite_count": 0, "accepted_answer_id": 43525557, "answer_count": 1, "score": 1, "last_activity_date": 1492707344, "creation_date": 1492626956, "last_edit_date": 1492628396, "question_id": 43503595, "link": "https://stackoverflow.com/questions/43503595/send-file-via-libssh-ssh-scp-push-file-ssh-scp-write", "title": "Send File via libssh (ssh_scp_push_file &amp;&amp; ssh_scp_write)", "body": "<p>Disclaimer: <strong>I'm googling my way through this</strong></p>\n\n<ul>\n<li>Using C++</li>\n<li>Both ends are Linux</li>\n<li>I can see the SSH connection on the far end via TCPDUMP</li>\n<li>No build errors or return codes other than 0 (debug says its all good)</li>\n<li>TCPDUMP doesn't look like its transferring enough data (it is a 2MB file*)</li>\n<li>Connect / Authenticate / Authorize are happening properly as far as I can tell </li>\n</ul>\n\n<p>When i go to the far end looking for the file that was supposedly copied over, it doesn't exist.  I've tried updatedb &amp; locate \"file\", but it's nowhere to be found.</p>\n\n<p>Thank you in advance for any insight possible!</p>\n\n<p>SSH Functions (auth &amp; connect) cleared out for \"Minimal, Complete, and Verifiable example\" since they seem to be working fine*</p>\n\n<pre><code>#include &lt;cstdio&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n#include &lt;fstream&gt;\n#include &lt;curl/curl.h&gt;\n#include &lt;boost/regex.hpp&gt;\n#include &lt;boost/system/error_code.hpp&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;string.h&gt;\n#include &lt;x86_64-linux-gnu/sys/stat.h&gt;\n#define LIBSSH_STATIC 1\n#include &lt;libssh/libssh.h&gt;\n\nusing namespace std;\n\nint sourcePull(void)\n{\n    CURL *curl; \n    FILE *fp;\n    CURLcode res;\n    char *url = \"https://raw.githubusercontent.com/firehol/blocklist-ipsets/master/firehol_level1.netset\";\n    char outfilename[FILENAME_MAX] = \"fireHOL\";\n    curl = curl_easy_init();\n    if (curl)\n    {\n        fp = fopen(outfilename, \"wb\");\n        curl_easy_setopt(curl, CURLOPT_URL, url);\n        curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, NULL);\n        curl_easy_setopt(curl, CURLOPT_WRITEDATA, fp);\n        res = curl_easy_perform(curl);\n        curl_easy_cleanup(curl);\n        fclose(fp);\n    }\n    return 0;\n}\n\nint sourceParse()\n{\n    //Regex for IP's in sourcePull result\n    ifstream infile(\"fireHOL\");\n    string ipAddress;\n    boost::regex expr1(\"^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$\");\n    boost::regex expr2(\"^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(\\\\/([0-9]|[1-2][0-9]|3[0-2]))$\");\n    boost::smatch matches;\n\n        while (infile &gt;&gt; ipAddress)\n        {\n            if (boost::regex_match(ipAddress, matches, expr1)) \n            {\n                ofstream checkpoint;\n                checkpoint.open(\"samp_batch.txt\", ios::out | ios::app);\n                checkpoint &lt;&lt; \"add -t 86400 -a d -l r -o icewall ip -s \" &lt;&lt; ipAddress &lt;&lt; endl;\n                checkpoint &lt;&lt; \"add -t 86400 -a r -l r -o icewall ip -d \" &lt;&lt; ipAddress &lt;&lt; endl;\n            }\n\n            if (boost::regex_match(ipAddress, matches, expr2))\n            {\n                ofstream checkpoint;\n                checkpoint.open(\"samp_batch.txt\", ios::out | ios::app);\n                checkpoint &lt;&lt; \"add -t 86400 -a d -l r -o icewall ip -s \" &lt;&lt; ipAddress &lt;&lt; endl;\n                checkpoint &lt;&lt; \"add -t 86400 -a r -l r -o icewall ip -d \" &lt;&lt; ipAddress &lt;&lt; endl;\n            }\n\n        }\n\n        ofstream terminate;\n        terminate.open(\"samp_batch.txt\", ios::out | ios::app);\n        terminate &lt;&lt; \"EOF\";\n\n    return 0;\n}\n\nint fileSize()\n{\n    int size;\n    streampos begin, end;\n    ifstream inputFile(\"samp_batch\", ios::binary);\n    begin = inputFile.tellg();\n    inputFile.seekg(0, ios::end);\n    end = inputFile.tellg();\n    inputFile.close();\n    return size;\n}\n\nint ssh()\n{\n    ssh_session my_ssh_session;\n    ssh_scp scp;\n    int port = 22;\n    int rc;\n    int method;\n    char password[128] = { 0 };\n    char *banner;\n    //open session &amp; set options\n    my_ssh_session = ssh_new();\n    if (my_ssh_session == NULL)\n        exit(-1);\n    ssh_options_set(my_ssh_session, SSH_OPTIONS_HOST, \"XXX.XXX.XXX.XXX\");\n    ssh_options_set(my_ssh_session, SSH_OPTIONS_PORT, &amp;port);\n    ssh_options_set(my_ssh_session, SSH_OPTIONS_USER, \"security\");\n\n    //connect to server\n    rc = ssh_connect(my_ssh_session);\n    if (rc != SSH_OK)\n    {\n        fprintf(stderr, \"Error connecting to host: %s\\n\", ssh_get_error(my_ssh_session));\n        ssh_free(my_ssh_session);\n        exit(-1);\n    }\n\n    //verify the servers identity\n    if (verify_knownHost(my_ssh_session) &lt; 0)\n    {\n        fprintf(stdout, \"unkown host\\n\");\n        ssh_disconnect(my_ssh_session);\n        ssh_free(my_ssh_session);\n        exit(-1);\n    }\n\n\n    // Try to authenticate\n    rc = ssh_userauth_none(my_ssh_session, NULL);\n    if (rc == SSH_AUTH_ERROR) {\n        error(my_ssh_session);\n        return rc;\n    }\n\n    method = ssh_auth_list(my_ssh_session);\n    while (rc != SSH_AUTH_SUCCESS) {\n        // Try to authenticate with public key first\n        if (method &amp; SSH_AUTH_METHOD_PUBLICKEY) {\n            rc = ssh_userauth_autopubkey(my_ssh_session, NULL);\n            if (rc == SSH_AUTH_ERROR) {\n                error(my_ssh_session);\n                return rc;\n            }\n            else if (rc == SSH_AUTH_SUCCESS) {\n                break;\n            }\n        }\n\n    return rc;\n\n    //SCP samp_batch file here\n    const int length = fileSize();\n    const char *fileName = \"samp_batch\";\n\n\n    ifstream inputFile(fileName);\n    constexpr size_t bufferSize = 1024 * 1024 * 1024;\n    unique_ptr&lt;char[]&gt; buffer(new char[bufferSize]);\n    const void* cvp = &amp;buffer;\n\n    rc = ssh_scp_push_file(scp, \"samp_batch\", length, 0777);\n    if (rc != SSH_OK)\n    {\n        fprintf(stderr, \"Can't open remote file: %s\\n\", ssh_get_error(my_ssh_session));\n        ssh_free(my_ssh_session);\n        exit(-1);\n\n    }\n\n    while (inputFile)\n    {\n\n        inputFile.read(buffer.get(), 1024 * 1024 * 1024);\n\n        rc = ssh_scp_write(scp, cvp, bufferSize);\n        if (rc != SSH_OK)\n        {\n            fprintf(stderr, \"Cant write to remote file: %s\\n\", ssh_get_error(my_ssh_session));\n            ssh_free(my_ssh_session);\n            exit(-1);\n\n        }\n    }\n\n    return SSH_OK;\n\n    ////execute remote command here\n\n\n    //ssh_free(my_ssh_session);\n}\n\nint main()\n{\n\n    sourcePull();\n    sourceParse();\n    ssh();\n\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 455, "user_id": 4533695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36609bdd5d2040262013fd57ef71b4c?s=128&d=identicon&r=PG", "display_name": "Ceros", "link": "https://stackoverflow.com/users/4533695/ceros"}, "edited": false, "score": 2, "creation_date": 1492626908, "post_id": 43503535, "comment_id": 74061546, "body": "Use a loop condition"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 3, "creation_date": 1492627002, "post_id": 43503535, "comment_id": 74061597, "body": "Looks like a good job for a <a href=\"http://en.cppreference.com/w/cpp/language/do\" rel=\"nofollow noreferrer\">do-while loop</a>."}, {"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1492627354, "post_id": 43503535, "comment_id": 74061807, "body": "Is exiting what you want and cannot do? What happens when the <code>return 0;</code> is reached? Is that not what you want? Or is NOT existing what you want, in that case use a loop, as other have commented. Or do you want the command prompt to exit? In that case youmight need to create the command prompt in a way that it closes when your program has ended. that would be a shell question."}, {"owner": {"reputation": 11, "user_id": 7891523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69e9f15605359d347f4b8d1c6b18d657?s=128&d=identicon&r=PG&f=1", "display_name": "Isaiah", "link": "https://stackoverflow.com/users/7891523/isaiah"}, "edited": false, "score": 0, "creation_date": 1492628062, "post_id": 43503535, "comment_id": 74062229, "body": "What I want it to do is if the word exit is typed, the command prompt needs to close."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1492628245, "post_id": 43503535, "comment_id": 74062328, "body": "@Isaiah: That will not be standard C++ and will be OS specific. What OS are you dealing with?"}, {"owner": {"reputation": 11, "user_id": 7891523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69e9f15605359d347f4b8d1c6b18d657?s=128&d=identicon&r=PG&f=1", "display_name": "Isaiah", "link": "https://stackoverflow.com/users/7891523/isaiah"}, "edited": false, "score": 0, "creation_date": 1492628641, "post_id": 43503535, "comment_id": 74062550, "body": "i&#39;m using visual studio"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1492629068, "post_id": 43503535, "comment_id": 74062799, "body": "If you&#39;re running from Visual Studio, just exiting the program will close the window it runs in."}, {"owner": {"reputation": 1953, "user_id": 4169014, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ce596fceb9b79c24c1c983985c7d6b0f?s=128&d=identicon&r=PG&f=1", "display_name": "Shaishav Jogani", "link": "https://stackoverflow.com/users/4169014/shaishav-jogani"}, "edited": false, "score": 0, "creation_date": 1492630331, "post_id": 43503535, "comment_id": 74063540, "body": "@Isaiah, since you are using Visual Studio, I have updated my code which is OS independent. Earlier it was for Linux environment."}, {"owner": {"reputation": 11, "user_id": 7891523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69e9f15605359d347f4b8d1c6b18d657?s=128&d=identicon&r=PG&f=1", "display_name": "Isaiah", "link": "https://stackoverflow.com/users/7891523/isaiah"}, "edited": false, "score": 0, "creation_date": 1492631078, "post_id": 43503535, "comment_id": 74064062, "body": "you guys rock! I appreciate all the help!"}], "answers": [{"comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 3, "creation_date": 1492627677, "post_id": 43503802, "comment_id": 74061991, "body": "I&#39;d probably be more inclined to <code>break</code> than <code>exit(0)</code>, but yeah."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1492637938, "post_id": 43503802, "comment_id": 74067773, "body": "why use <code>boost::iequals()</code> instead of <code>std::string::operator==</code> or <code>std::strcmp()</code> or the like? Not everyone has Boost installed."}], "tags": [], "owner": {"reputation": 1953, "user_id": 4169014, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ce596fceb9b79c24c1c983985c7d6b0f?s=128&d=identicon&r=PG&f=1", "display_name": "Shaishav Jogani", "link": "https://stackoverflow.com/users/4169014/shaishav-jogani"}, "is_accepted": false, "score": 1, "last_activity_date": 1492629195, "last_edit_date": 1492629195, "creation_date": 1492627636, "answer_id": 43503802, "question_id": 43503535, "link": "https://stackoverflow.com/questions/43503535/how-do-i-make-this-exit-in-the-command-promt-if-the-word-exit-is-typed/43503802#43503802", "title": "How do i make this exit in the command promt if the word &quot;exit&quot; is typed?", "body": "<p>You can try following code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;boost/algorithm/string.hpp&gt;\n\nusing namespace std;\n\nint main() {\n    string data;\n    while(true) {\n\n    cout &lt;&lt; \"Type a sentence and press enter.\"\n        \"If the word 'exit' is typed, the program will close.\" &lt;&lt; endl;\n\n    getline(cin, data);\n    if ( boost::iequals(data, \"exit\") ) \n        exit(0);\n    else \n        cout &lt;&lt; data;\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1492631217, "post_id": 43504404, "comment_id": 74064149, "body": "The second example is better handled using a <code>do&#47;while</code> loop instead. No need to duplicate the same code twice."}], "tags": [], "owner": {"reputation": 139, "user_id": 5022276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd4df6d546136c8e31a03c170dc6b3ae?s=128&d=identicon&r=PG&f=1", "display_name": "Monari", "link": "https://stackoverflow.com/users/5022276/monari"}, "is_accepted": false, "score": 3, "last_activity_date": 1492634055, "last_edit_date": 1492634055, "creation_date": 1492629847, "answer_id": 43504404, "question_id": 43503535, "link": "https://stackoverflow.com/questions/43503535/how-do-i-make-this-exit-in-the-command-promt-if-the-word-exit-is-typed/43504404#43504404", "title": "How do i make this exit in the command promt if the word &quot;exit&quot; is typed?", "body": "<p>You could compare the value receive data with \"exit\".\nIf you want just display type back the user data, try this:</p>\n\n<pre><code>int main() {\n    string data;\n\n    cout &lt;&lt; \"Type a sentence and press enter.\"\n            \"If the word 'exit' is typed, the program will close.\" &lt;&lt; endl;\n\n    getline(cin, data);\n\n\n    // validate if data is equals to \"exit\"\n    if (data.compare(\"exit\") != 0) {\n        cout &lt;&lt; data;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>If you want type back use input while \"exit\" is typed, try this:</p>\n\n<pre><code>int main() {\n    string data;\n\n    do {\n\n        cout &lt;&lt; \"Type a sentence and press enter.\"\n                \"If the word 'exit' is typed, the program will close.\" &lt;&lt; endl;\n\n        getline(cin, data);\n\n        // validate if data is not equals to \"exit\"\n        if (data.compare(\"exit\") != 0) {\n            // then type back\n            cout &lt;&lt; data  &lt;&lt; endl;\n        } else {\n            // else interrupt while\n            break;\n        } \n    // will run while break or return be called\n    } while (true);\n\n    // terminate the program\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7891523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69e9f15605359d347f4b8d1c6b18d657?s=128&d=identicon&r=PG&f=1", "display_name": "Isaiah", "link": "https://stackoverflow.com/users/7891523/isaiah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1492634055, "creation_date": 1492626762, "question_id": 43503535, "link": "https://stackoverflow.com/questions/43503535/how-do-i-make-this-exit-in-the-command-promt-if-the-word-exit-is-typed", "title": "How do i make this exit in the command promt if the word &quot;exit&quot; is typed?", "body": "<p>I am having to write a program that asks the user to type a sentence into the command prompt. If the user typed the word \"exit\" or \"Exit\" (without quotes and all lower case), then the program should exit. Otherwise, the program should print what the user typed back to the screen and ask the user to type something else. I understand how to get the sentence in, but I do not know how to make the program exit the command prompt. Help please?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\n\nint main()\n{\n    string data;\n\n    cout &lt;&lt; \"Type a sentence and press enter.\"\n        \"If the word 'exit' is typed, the program will close.\" &lt;&lt; endl;\n\n    getline(cin, data);\n    cout &lt;&lt; data;\n\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "struct", "binaryfiles"], "comments": [{"owner": {"reputation": 455, "user_id": 4533695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36609bdd5d2040262013fd57ef71b4c?s=128&d=identicon&r=PG", "display_name": "Ceros", "link": "https://stackoverflow.com/users/4533695/ceros"}, "edited": false, "score": 0, "creation_date": 1492626831, "post_id": 43503525, "comment_id": 74061490, "body": "by copying it into transfer"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1492629813, "post_id": 43503525, "comment_id": 74063245, "body": "Need information about the file formats of the binary files.  Please edit your post with the answer."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1492629930, "post_id": 43503525, "comment_id": 74063312, "body": "See <a href=\"http://en.cppreference.com/w/cpp/io/basic_istream/read\" rel=\"nofollow noreferrer\">std::ifstream::read</a>.  Usually the <code>read</code> method is used with <i>binary</i> files.  The <code>getline</code> function is used with <i>text</i> files."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1492627822, "creation_date": 1492627822, "answer_id": 43503840, "question_id": 43503525, "link": "https://stackoverflow.com/questions/43503525/reading-info-from-one-binary-file-and-writing-to-another-binary-file/43503840#43503840", "title": "Reading info from one Binary file and writing to another binary file", "body": "<blockquote>\n  <p>If i would like to transfer the title from <code>info.title</code> to <code>transfer.title</code>, which is tied to <code>bfile2.dat</code>, how would i go about doing so?</p>\n</blockquote>\n\n<p>Transferring the data from <code>info.title</code> to <code>transfer.title</code> is easy. </p>\n\n<pre><code>transfer = info;\n</code></pre>\n\n<p>It's not clear to me what you mean by <strong><em><code>transfer.title</code> is tied to <code>bfile2.dat</code></em></strong>.</p>\n"}], "owner": {"reputation": 13, "user_id": 7019824, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/10209424593068575/picture?type=large", "display_name": "Glenn Jordan Chia", "link": "https://stackoverflow.com/users/7019824/glenn-jordan-chia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1492627822, "creation_date": 1492626743, "question_id": 43503525, "link": "https://stackoverflow.com/questions/43503525/reading-info-from-one-binary-file-and-writing-to-another-binary-file", "title": "Reading info from one Binary file and writing to another binary file", "body": "<p>For example if i have a struct, and i have already wrote in the title to the first binary file <code>bfile1.dat</code> using <code>cin.getline(info.title, MAX)</code>. </p>\n\n<p>If i would like to transfer the title from <code>info.title</code> to <code>transfer.title</code> which is tied to <code>bfile2.dat</code>, how would i go about doing so? </p>\n\n<pre><code>struct Information\n{\n   title[MAX]\n}\nconst int MAX = 50\n\nint main();\n{\n   Information info;\n   Information transfer;\n}\n</code></pre>\n"}, {"tags": ["c++", "xcode", "c++11"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1492626631, "post_id": 43503419, "comment_id": 74061372, "body": "Looks like MSVS is letting you add extra <code>typename</code>s.  If you remove those 3 <code>typename</code>s does it compile?  Also, just a FYI, MSVS is not the most standard conformant compiler out there.  g++/clang have much better conformance."}, {"owner": {"reputation": 8388, "user_id": 1130231, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/gHygY.png?s=128&g=1", "display_name": "Martin Perry", "link": "https://stackoverflow.com/users/1130231/martin-perry"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1492626725, "post_id": 43503419, "comment_id": 74061428, "body": "@NathanOliver You are right, stupid mistake, thank you.. post it, please, as an answer."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1492626885, "post_id": 43503419, "comment_id": 74061526, "body": "And stop using reserved identifiers."}], "answers": [{"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1492676546, "post_id": 43503650, "comment_id": 74081531, "body": "Of course <code>_Ty</code> and <code>_Ty1</code> are dependent types; by definition, the type denoted by a template parameter depends on that template parameter. The issue is that you need - and can - only use <code>typename</code> on qualified names."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1492688011, "post_id": 43503650, "comment_id": 74089772, "body": "@T.C. Fixed the answer.  Thanks for the correction."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 2, "last_activity_date": 1492687988, "last_edit_date": 1492687988, "creation_date": 1492627125, "answer_id": 43503650, "question_id": 43503419, "link": "https://stackoverflow.com/questions/43503419/c11-templates-code-failed-to-compile-in-xcode/43503650#43503650", "title": "C++11 templates code - failed to compile in XCode", "body": "<p>In <code>my_decay</code> <code>Ty</code> and <code>_Ty1</code> are not qualified names.  That means you do not need to use <code>typename</code> on them.  It looks as though MSVS is allowing you to do so for some reason. Either it is a bug or they consider it a \"feature\" so people can just spray <code>typename</code> everywhere to get it to work.  The correct version should be:</p>\n\n<pre><code>template&lt;class _Ty&gt;\nstruct my_decay\n{\n    // determines decayed version of _Ty\n    typedef typename std::decay&lt;_Ty&gt;::type _Ty1;\n\n    typedef typename MyIf&lt;\n        std::is_arithmetic&lt;_Ty1&gt;::value, _Ty1, //(1)\n        typename MyIf&lt;\n            std::is_same&lt;void, _Ty1&gt;::value, _Ty1, //(2)\n\n        _Ty //(3)\n        &gt;::type\n    &gt;::type type;\n};\n</code></pre>\n\n<hr>\n\n<p>Also, you should stay away from using leading underscores in your identifiers.  A leading underscore followed by a capital letter is reserved for the system as well as all identifiers with a double underscore in them.</p>\n"}], "owner": {"reputation": 8388, "user_id": 1130231, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/gHygY.png?s=128&g=1", "display_name": "Martin Perry", "link": "https://stackoverflow.com/users/1130231/martin-perry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 43503650, "answer_count": 1, "score": 2, "last_activity_date": 1492687988, "creation_date": 1492626343, "question_id": 43503419, "link": "https://stackoverflow.com/questions/43503419/c11-templates-code-failed-to-compile-in-xcode", "title": "C++11 templates code - failed to compile in XCode", "body": "<p>I have this code:</p>\n\n<pre><code>template&lt;bool, class _Ty1, class _Ty2&gt; struct MyIf\n{   // type is _Ty2 for assumed false\n    typedef _Ty2 type;\n};\n\ntemplate&lt;class _Ty1, class _Ty2&gt; struct MyIf&lt;true, _Ty1, _Ty2&gt;\n{   // type is _Ty1 for assumed true\n    typedef _Ty1 type;\n};\n\ntemplate&lt;class _Ty&gt;\nstruct my_decay\n{\n    // determines decayed version of _Ty\n    typedef typename std::decay&lt;_Ty&gt;::type _Ty1;\n\n    typedef typename MyIf&lt;\n        std::is_arithmetic&lt;_Ty1&gt;::value, typename _Ty1, //(1)\n        typename MyIf&lt;\n            std::is_same&lt;LuaString, _Ty1&gt;::value, typename _Ty1, //(2)\n\n        typename _Ty //(3)\n        &gt;::type\n    &gt;::type type;\n};\n</code></pre>\n\n<p>Under Visual Studio 2015, it compiles fine. However, when I port my code to XCode, I got the following errors:</p>\n\n<blockquote>\n  <ul>\n  <li>for (1) => Expected a qualified name after \"typename\"</li>\n  <li>for (2) => Type name does not allow storage class to be specified</li>\n  <li>for (3) => Type name does not allow storage class to be specified</li>\n  </ul>\n</blockquote>\n\n<p>In Xcode, I have set C++ laguage dialcet to GNU++14, C++ standard library to C++11 support and used compiler is Apple LLVM 8.1.</p>\n"}, {"tags": ["c++", "loops", "error-handling"], "comments": [{"owner": {"reputation": 455, "user_id": 4533695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36609bdd5d2040262013fd57ef71b4c?s=128&d=identicon&r=PG", "display_name": "Ceros", "link": "https://stackoverflow.com/users/4533695/ceros"}, "edited": false, "score": 0, "creation_date": 1492626225, "post_id": 43503303, "comment_id": 74061139, "body": "Have you tried to debug step by step with a debugger? Are you sure that it&#39;s not something in your &quot;do some stuff here&quot; that makes your program crash?"}, {"owner": {"reputation": 1700, "user_id": 3517823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6ead39c453c59e5666b801a3a17919d?s=128&d=identicon&r=PG&f=1", "display_name": "Arash", "link": "https://stackoverflow.com/users/3517823/arash"}, "edited": false, "score": 0, "creation_date": 1492626400, "post_id": 43503303, "comment_id": 74061230, "body": "I cannot reproduce. Your code (with <code>while ( runAgain ){...}</code>) works fine."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1492626533, "post_id": 43503303, "comment_id": 74061307, "body": "Can&#39;t reproduce on my desktop. What&#39;s your build/run environment?"}, {"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1492626665, "post_id": 43503303, "comment_id": 74061395, "body": "In the last code quote I cannot find the definition of runAgain. Sure that you compiled that code as quoted?"}], "answers": [{"tags": [], "owner": {"reputation": 13, "user_id": 7847073, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KVCr2KnHS5Y/AAAAAAAAAAI/AAAAAAAAHYE/gwlPd_PM-XQ/photo.jpg?sz=128", "display_name": "Jeremy Kellogg", "link": "https://stackoverflow.com/users/7847073/jeremy-kellogg"}, "is_accepted": false, "score": 0, "last_activity_date": 1492639490, "creation_date": 1492639490, "answer_id": 43506861, "question_id": 43503303, "link": "https://stackoverflow.com/questions/43503303/trying-to-have-error-correction-while-prompting-to-run-program-again/43506861#43506861", "title": "Trying to have error correction while prompting to run program again", "body": "<p>OK looks like i got it.  The file operations were within the do loop.  I moved them outside of the loop, and it all works.  Thanks!</p>\n"}], "owner": {"reputation": 13, "user_id": 7847073, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KVCr2KnHS5Y/AAAAAAAAAAI/AAAAAAAAHYE/gwlPd_PM-XQ/photo.jpg?sz=128", "display_name": "Jeremy Kellogg", "link": "https://stackoverflow.com/users/7847073/jeremy-kellogg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1492639490, "creation_date": 1492625937, "last_edit_date": 1492638747, "question_id": 43503303, "link": "https://stackoverflow.com/questions/43503303/trying-to-have-error-correction-while-prompting-to-run-program-again", "title": "Trying to have error correction while prompting to run program again", "body": "<p>New to C++.  I have a homework program I am programming.  It is all but done, but our teacher wants us to add error catching to the program.</p>\n\n<p>The issue arises in the code for asking the user to run again.  I use a while loop to monitor a variable until it changes.</p>\n\n<p>This works:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main() {\n    char runAgainYN;\n\n    while ( toupper(runAgainYN != 'N' ) {\n        // Do some stuff here!\n\n        cout &lt;&lt; \"Would you like to run again?\";\n        cin &gt;&gt; runAgainYN;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>It keeps looping the program until runAgain is equal to 'N', then stops.  Now, I modified the program to utilize some error correction for the question about running the program again, to limit the user to only entering Y or N.  Here is the updated code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cctype&gt;\nusing namespace std;\n\nint main() {\n    char runAgainYN;\n    bool runAgain = true;\n\n    while ( runAgain ) {\n\n        // Do some stuff here!\n\n        bool validResponse = false;\n        while ( !validResponse ) {\n            cout &lt;&lt; \"Would you like to run the program again (Y/N): \";\n            cin &gt;&gt; runAgainYN;\n            if ( toupper(runAgainYN) == 'Y' ) {\n                validResponse = true;\n                cin.ignore();\n            }\n            else if ( toupper(runAgainYN) == 'N' ) {\n                runAgain = false;\n                validResponse = true;\n                cin.ignore();\n            }\n            else {\n                cout &lt;&lt; \"INVALID RESPONSE\" &lt;&lt; endl;\n            }\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Here is where the problem arises.  If the user enters 'N', the program exits with code 0, and if the user enters anything but Y or N, the invalid response triggers and asks for the input again.  But, if the user enters Y, the program exits with code -1.  Huh?  I tried a different approach, with the same result: </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cctype&gt;\nusing namespace std;\n\nint main() {\n    char runAgainYN;\n\n    do {\n        // Do some stuff here!\n\n        bool validResponse = false;\n        while ( !validResponse ) {\n            cout &lt;&lt; \"Would you like to run the program again (Y/N): \";\n            cin &gt;&gt; runAgainYN;\n            if ( toupper(runAgainYN) == 'Y' ) {\n                validResponse = true;\n                cin.ignore();\n            }\n            else if ( toupper(runAgainYN) == 'N' ) {\n                runAgain = false;\n                validResponse = true;\n                cin.ignore();\n            }\n            else {\n                cout &lt;&lt; \"INVALID RESPONSE\" &lt;&lt; endl;\n            }\n        }\n    }\n\n    while ( runAgain );\n\n    return 0;\n}\n</code></pre>\n\n<p>Any help guys?  Thanks!!!</p>\n\n<p>OK, so it seems to be something in the actual program causing it.  Here's the source code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;string.h&gt;\n#include &lt;iomanip&gt;\n#include &lt;cctype&gt;\n#include &lt;limits&gt;\n#include &lt;algorithm&gt;\n#include &lt;fstream&gt;\nusing namespace std;\n\nvoid cls();\nvoid printLine( int length );\nvoid showCurrency( double dv, int width = 14 );\n\nint main() {\n\n    string itemName[999][2];\n    double itemPrice[999][3];\n    double salesTotal = 0.0;\n    double salesTax = 0.0;\n    double totalTax = 0.0;\n    double taxRate = 0.0;\n    double grandTotal = 0.0;\n    double test = 0.0;\n    int numLines = 0;\n    string readLine;\n    string temp;\n    ifstream fileIn;\n    string menuHeader = \"Sales Receipt from File\";\n    char runAgainYN;\n    bool runAgain = true;\n\n    do { // Loop until runAgain false\n\n        // Open the file and count the number of lines, then close for next operation:\n        fileIn.open(\"cost.txt\");\n        while (!fileIn.eof()) {\n            fileIn &gt;&gt; temp;\n            numLines++;\n            temp = \"\";\n        }\n        fileIn.close();\n\n        // Open the file and move the data into the arrays, then close:\n        fileIn.open(\"cost.txt\");\n        for ( int i = 0; i &lt; numLines; i++) {\n            fileIn &gt;&gt; itemName[i][1] &gt;&gt; itemPrice[i][1];\n        }\n        fileIn.close();\n\n        cls();\n\n        numLines = numLines / 2;\n\n        cout &lt;&lt; \"/\";\n        printLine(80);\n        cout &lt;&lt; \"\\\\\" &lt;&lt; endl;\n        cout &lt;&lt; \"|\" &lt;&lt; setw(81) &lt;&lt; \"|\" &lt;&lt; endl;\n        cout &lt;&lt; \"|\" &lt;&lt; setw(41 + (menuHeader.length() / 2)) &lt;&lt; menuHeader &lt;&lt; setw(40 - (menuHeader.length() / 2)) &lt;&lt; \"|\" &lt;&lt; endl;\n        cout &lt;&lt; \"|\" &lt;&lt; setw(81) &lt;&lt; \"|\" &lt;&lt; endl;\n        cout &lt;&lt; \"\\\\\";\n        printLine(80);\n        cout &lt;&lt; \"/\" &lt;&lt; endl &lt;&lt; endl;\n\n        cout &lt;&lt; \"Enter the sales tax percentage (ie for 6% enter 6): \";\n\n        // Ask for taxRate and error check:\n        while (!(cin &gt;&gt; taxRate)) {\n            cin.clear();\n            cin.ignore(numeric_limits&lt;streamsize&gt;::max(), '\\n');\n            cout &lt;&lt; \"INVALID RESPONSE\" &lt;&lt; endl &lt;&lt; \"Please enter a number: \";\n        }\n        cout &lt;&lt; endl;\n\n        salesTax = taxRate / 100; // Convert sales tax to percentage\n\n        for (int i = 0; i &lt; numLines; i++ ) { // Set the running tax amounts\n            itemPrice[i][2] = itemPrice[i][1] * salesTax;\n            salesTotal = salesTotal + itemPrice[i][1];\n            totalTax = totalTax + itemPrice[i][2];\n        }\n\n        //totalTax = salesTotal * salesTax; // Calculate tax\n\n        grandTotal = salesTotal + totalTax; // Calculate grand total\n\n        // Output:\n        cls();\n\n        cout &lt;&lt; \"/\" &lt;&lt; setfill('-') &lt;&lt; setw(63) &lt;&lt; \"-\" &lt;&lt; \"\\\\\" &lt;&lt; setfill(' ') &lt;&lt; endl;\n        cout &lt;&lt; \"|                        SALES RECEIPT                          |\" &lt;&lt; endl;\n        cout &lt;&lt; \"|\" &lt;&lt; setfill('-') &lt;&lt; setw(63) &lt;&lt; \"-\" &lt;&lt; \"|\" &lt;&lt; setfill(' ') &lt;&lt; endl;\n        cout &lt;&lt; \"| \" &lt;&lt; left &lt;&lt; setw(32) &lt;&lt; \"Sales item\" &lt;&lt; setw(13) &lt;&lt; right &lt;&lt; \"Price\" &lt;&lt; setw(18) &lt;&lt; \"Tax |\" &lt;&lt; endl;\n        cout &lt;&lt; \"|\" &lt;&lt; setfill('-') &lt;&lt; setw(63) &lt;&lt; \"-\" &lt;&lt; \"|\" &lt;&lt; setfill(' ') &lt;&lt; endl;\n\n        for ( int i = 0; i &lt;= numLines - 1; ++i ){\n            cout &lt;&lt; \"| \" &lt;&lt; left &lt;&lt; setw(32) &lt;&lt; itemName[i][1] &lt;&lt; \"$\" &lt;&lt; setw(12) &lt;&lt; setprecision(2) &lt;&lt; fixed &lt;&lt; right &lt;&lt; itemPrice[i][1] &lt;&lt; setw(5) &lt;&lt; \"$\" &lt;&lt; setw(11) &lt;&lt; itemPrice[i][2] &lt;&lt; \" |\" &lt;&lt; endl;\n        }\n\n        cout &lt;&lt; \"|\" &lt;&lt; setfill('-') &lt;&lt; setw(63) &lt;&lt; \"-\" &lt;&lt; \"|\" &lt;&lt; setfill(' ') &lt;&lt; endl;\n\n        cout &lt;&lt; \"| Total Sales\" &lt;&lt; setw(36);\n        showCurrency(salesTotal);\n        cout &lt;&lt; \" |\" &lt;&lt; endl;\n\n        cout &lt;&lt; \"| Sales Tax (\" &lt;&lt; setprecision(0) &lt;&lt; fixed &lt;&lt; taxRate &lt;&lt; \"%)\" &lt;&lt; setw(33);\n        showCurrency(totalTax);\n        cout &lt;&lt; \" |\" &lt;&lt; endl;\n\n        cout &lt;&lt; \"|\" &lt;&lt; setfill('-') &lt;&lt; setw(63) &lt;&lt; \"-\" &lt;&lt; \"|\" &lt;&lt; setfill(' ') &lt;&lt; endl;\n\n        cout &lt;&lt; \"| Grand Total\" &lt;&lt; setw(36);\n        showCurrency(grandTotal);\n        cout &lt;&lt; \" |\"  &lt;&lt; endl;\n\n        cout &lt;&lt; \"\\\\\" &lt;&lt; setfill('-') &lt;&lt; setw(63) &lt;&lt; \"-\" &lt;&lt; \"/\" &lt;&lt; setfill(' ') &lt;&lt; endl;\n\n        cout &lt;&lt; endl;\n\n        // Clear vars and array for next run:\n        salesTax = 0.0;\n        totalTax = 0.0;\n        salesTotal = 0.0;\n        grandTotal = 0.0;\n        memset(itemPrice, 0, sizeof(itemPrice));\n        memset(itemName, 0, sizeof(itemName));\n\n        // Ask if program is to be run again:\n        bool validResponse = false;\n        while ( !validResponse ) {\n            cout &lt;&lt; \"Would you like to enter a new tax rate (Y/N): \";\n            cin &gt;&gt; runAgainYN;\n            if ( toupper(runAgainYN) == 'Y' ) {\n                validResponse = true;\n                cin.ignore();\n            }\n            else if ( toupper(runAgainYN) == 'N' ) {\n                runAgain = false;\n                validResponse = true;\n                cin.ignore();\n            }\n            else {\n                cout &lt;&lt; \"INVALID RESPONSE\" &lt;&lt; endl;\n            }\n        }\n    }\n\n    while ( runAgain == true );\n\n    return 0;\n\n}\n\nvoid printLine( int length ) {\n    for ( int i = 0; i &lt; length; i++ ) {\n        cout &lt;&lt; \"=\";\n    }\n}\n\nvoid cls() {\n        // check OS and run correct clear screen (I do some of my coding in Linux :)\n    #if (defined (_WIN32) || defined (_WIN64))\n        system(\"CLS\");\n    #elif (defined (LINUX) || defined (__linux__))\n        system(\"clear\");\n    #endif\n}\n\nvoid showCurrency(double dv, int width){\n    /* Credit where credit is due:\n     * The following code snippet was found at https://arachnoid.com/cpptutor/student3.html\n     * Copyright \u00a9 2000, P. Lutus. All rights reserved.\n     */\n\n    const string radix = \".\";\n    const string thousands = \",\";\n    const string unit = \"$\";\n    unsigned long v = (unsigned long) ((dv * 100.0) + .5);\n    string fmt,digit;\n    int i = -2;\n    do {\n        if(i == 0) {\n            fmt = radix + fmt;\n        }\n        if((i &gt; 0) &amp;&amp; (!(i % 3))) {\n            fmt = thousands + fmt;\n        }\n        digit = (v % 10) + '0';\n        fmt = digit + fmt;\n        v /= 10;\n        i++;\n    }\n    while((v) || (i &lt; 1));\n    cout &lt;&lt; unit &lt;&lt; setw(width) &lt;&lt; fmt.c_str();\n}\n</code></pre>\n\n<p>And here is the contents of 'cost.txt':</p>\n\n<pre><code>Books 45.01\nPens 21.03\nPencils 10.90\nHats 50.00\nCaps 800.00\nFood 1.00\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 33, "user_id": 7865983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3e59fd038f539df8a84b14661159a3a?s=128&d=identicon&r=PG&f=1", "display_name": "C.Smith", "link": "https://stackoverflow.com/users/7865983/c-smith"}, "edited": false, "score": 0, "creation_date": 1492625922, "post_id": 43503273, "comment_id": 74060962, "body": "At first I tried a way like, read the first token char, if it is a &#39;/&#39;, keep reading the next char till the end of line. But it only worked for the first line."}, {"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1492625926, "post_id": 43503273, "comment_id": 74060965, "body": "Would you accept sed-based solutions? Or if you insist awk, perl, etc?"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1492625952, "post_id": 43503273, "comment_id": 74060984, "body": "You want us to write code?"}, {"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1492625961, "post_id": 43503273, "comment_id": 74060990, "body": "Please give additional information by editing your question."}, {"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 1, "creation_date": 1492626081, "post_id": 43503273, "comment_id": 74061061, "body": "Ah yes, you are right @EdHeal. Hello OP Welcome to StackOverflow.   Please take the tour stackoverflow.com/tour,   learn asking good questions stackoverflow.com/help/how-to-ask,   make a MCVE stackoverflow.com/help/mcve"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1492626972, "post_id": 43503273, "comment_id": 74061586, "body": "If you tried a way, please post the code in the body of your question. You can edit it at any time to add more detail."}], "answers": [{"tags": [], "owner": {"reputation": 13460, "user_id": 4643584, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d2144be3b64be35ece8bff8f02c606a6?s=128&d=identicon&r=PG&f=1", "display_name": "Shakiba Moshiri", "link": "https://stackoverflow.com/users/4643584/shakiba-moshiri"}, "is_accepted": false, "score": 0, "last_activity_date": 1492628599, "creation_date": 1492628599, "answer_id": 43504054, "question_id": 43503273, "link": "https://stackoverflow.com/questions/43503273/c-tokeniser-skip-the-lines-start-with-and-the-ad-hoc/43504054#43504054", "title": "C++ tokeniser, skip the lines start with &#39;//&#39; and the ad hoc &#39;/**/&#39;", "body": "<p>for <code>//</code> with <code>regex</code> library you can:  </p>\n\n<pre><code>// for \"//\"\nfor( std::string line; std::getline( input_file_stream, line ); ){\n    if( std::regex_search( line, std::regex( R\"(^//)\" ) ) ){\n            // nothing\n    }\n    else {\n        std::cout &lt;&lt; line &lt;&lt; '\\n';\n    }\n}\n</code></pre>\n\n<p>Also for other part <code>/**/</code> you can use <code>regex</code> again<br>\nbut without <code>regex</code> you can:  </p>\n\n<pre><code>std::ifstream input_file_stream( \"file\" );\n\n// for // and /* up to */\nfor( std::string line; std::getline( input_file_stream, line ); ){\n    if( *line.begin() == '/' ){\n        if( *(line.begin() + 1) == '*' ){\n            while( *line.begin() != '*' &amp;&amp; *(line.begin() + 1 ) != '/' ){\n                std::getline( input_file_stream, line );\n            }\n        }\n    } else {\n        std::cout &lt;&lt; line &lt;&lt; '\\n';\n    }\n}\n\ninput_file_stream.close();  \n</code></pre>\n\n<p><strong>test, input:</strong>  </p>\n\n<pre><code>// skip\n// skip\nokay\n// skip\nokay\nokay\n/* skip up to\nnot\nnot\nnot\n*/\nokay\nthe end  \n</code></pre>\n\n<p><strong>and the output:</strong>  </p>\n\n<pre><code>okay\nokay\nokay\nokay\nthe end\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 7865983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3e59fd038f539df8a84b14661159a3a?s=128&d=identicon&r=PG&f=1", "display_name": "C.Smith", "link": "https://stackoverflow.com/users/7865983/c-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1492628599, "creation_date": 1492625819, "question_id": 43503273, "link": "https://stackoverflow.com/questions/43503273/c-tokeniser-skip-the-lines-start-with-and-the-ad-hoc", "title": "C++ tokeniser, skip the lines start with &#39;//&#39; and the ad hoc &#39;/**/&#39;", "body": "<p>I am practising to write a tokeniser in C++, however, I assume that I will need to take a file with some comments as the input file. Then how can I skip the comments like those in the following picture.\nAny ideas?<a href=\"https://i.stack.imgur.com/QTVlW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QTVlW.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1492625722, "post_id": 43503212, "comment_id": 74060841, "body": "If <code>a</code> and <code>b</code> are the same type, you can&#39;t differentiate. From that you may infer that the differentiator is the data&#39;s type."}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1492625730, "post_id": 43503212, "comment_id": 74060845, "body": "In the above linked question, see specifically <a href=\"https://stackoverflow.com/questions/4421706/operator-overloading/4421719#4421719\">stream operators</a> where you can define <code>std::istream&amp; operator&gt;&gt;(std::istream&amp; is, T&amp; obj)</code> for your object"}], "owner": {"reputation": 9, "user_id": 7743032, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b7e8ba78acbd9165a37619745f75c023?s=128&d=identicon&r=PG&f=1", "display_name": "borchr", "link": "https://stackoverflow.com/users/7743032/borchr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 12, "favorite_count": 0, "closed_date": 1492625684, "answer_count": 0, "score": 0, "last_activity_date": 1492625647, "creation_date": 1492625623, "last_edit_date": 1492625647, "question_id": 43503212, "link": "https://stackoverflow.com/questions/43503212/how-to-use-overloaded-input-operator-for-some-inputs-and-normal-input-operator-f", "closed_reason": "Duplicate", "title": "How to use overloaded input operator for some inputs and normal input operator for other inputs?", "body": "<p>I'm trying to figure out how you can overload the input operator for some input but use the normal input operator for other values. For instance,</p>\n\n<pre><code>cin &gt;&gt; a; //take in a normally\nin &gt;&gt; b; //pass with the overloaded input operator\n</code></pre>\n\n<p>How do I differentiate when writing the overloaded operator function?</p>\n"}, {"tags": ["c++", "android-ndk", "cmake", "googletest"], "answers": [{"comments": [{"owner": {"reputation": 1216, "user_id": 2252948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5eb6114307bc12f710bf50ed7b929aa0?s=128&d=identicon&r=PG", "display_name": "AnthonyD973", "link": "https://stackoverflow.com/users/2252948/anthonyd973"}, "edited": false, "score": 0, "creation_date": 1494170523, "post_id": 43728772, "comment_id": 74703079, "body": "@user740857 Was this answer useful? If it was, feel free to accept it and/or award the bounty. If not, could you briefly explain why so that someone else has a chance of providing you a better answer?"}, {"owner": {"reputation": 475, "user_id": 740857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faa2c69fd4c3302628c7db23294eb630?s=128&d=identicon&r=PG", "display_name": "user740857", "link": "https://stackoverflow.com/users/740857/user740857"}, "edited": false, "score": 1, "creation_date": 1494279415, "post_id": 43728772, "comment_id": 74751105, "body": "Thanks so much for your insights. I still can&#39;t seem to understand how to go from your information to the Android setup."}, {"owner": {"reputation": 1216, "user_id": 2252948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5eb6114307bc12f710bf50ed7b929aa0?s=128&d=identicon&r=PG", "display_name": "AnthonyD973", "link": "https://stackoverflow.com/users/2252948/anthonyd973"}, "reply_to_user": {"reputation": 475, "user_id": 740857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faa2c69fd4c3302628c7db23294eb630?s=128&d=identicon&r=PG", "display_name": "user740857", "link": "https://stackoverflow.com/users/740857/user740857"}, "edited": false, "score": 0, "creation_date": 1494291499, "post_id": 43728772, "comment_id": 74754370, "body": "@user740857 Yeah, it&#39;s true I presented you a rather elaborate solution. But I don&#39;t think there is any easy way to port GoogleTest to CMake without writing CMake code."}], "tags": [], "owner": {"reputation": 1216, "user_id": 2252948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5eb6114307bc12f710bf50ed7b929aa0?s=128&d=identicon&r=PG", "display_name": "AnthonyD973", "link": "https://stackoverflow.com/users/2252948/anthonyd973"}, "is_accepted": false, "score": 1, "last_activity_date": 1494169703, "last_edit_date": 1494169703, "creation_date": 1493688852, "answer_id": 43728772, "question_id": 43503192, "link": "https://stackoverflow.com/questions/43503192/googletest-for-android-ndk-c-with-cmake/43728772#43728772", "title": "GoogleTest for Android NDK C++ with CMake", "body": "<p>I can only provide an answer to your first and main question, but it's a working solution. It's not specific to Android ; it works as long as you can run CMake and CTest.</p>\n\n<p>I don't know much about GoogleTest, but I remember having a very similar question a few months ago. In my case, I wanted to use CMake with the Boost UnitTestFramework.</p>\n\n<p>I searched a bit for it, then I fell across <a href=\"https://eb2.co/blog/2015/06/driving-boost-dot-test-with-cmake/\" rel=\"nofollow noreferrer\">a certain tutorial</a>. The solution they provided was merely to parse your test files' contents using a regular expression. The upside is, it's quite customizable and allows for several unit tests per file. I did this, and it worked quite nicely. You have to rerun CMake when you add new unit tests, of course.</p>\n\n<p>Like I said, what I'll post below is for the Boost UnitTestFramework, but the biggest differences are in the regular expressions, and the variable names I use. In case you're not used to using regular expressions with CMake (I'm not), <a href=\"https://cmake.org/cmake/help/v3.0/command/string.html\" rel=\"nofollow noreferrer\">here</a> is an official documentation page regarding string operations.</p>\n\n<p>Here is the <code>CMakeLists.txt</code> file I ended up with. I used this as a standalone <code>CMakeLists.txt</code> file under a <code>test/</code> directory.</p>\n\n<pre><code># =============================\n# =       ADDING TESTS        =\n# =============================\n\ninclude(CTest)\n\nfind_package(Boost COMPONENTS unit_test_framework REQUIRED)\ninclude_directories(${Boost_INCLUDE_DIRS})\n\nfile(GLOB_RECURSE TEST_SRCS RELATIVE ${TEST_SOURCE_DIR} *.cpp)\n\nset(TEST_EXTRA_LIBS ${Boost_LIBRARIES} ${TEST_MAIN_LIB})\n\n\n# Function which, given a file name and a test name, yields the\n# name of the GoogleTest test case.\n# That way, several different files can have the same test name.\n# Adapt this to GoogleTest.\nfunction(getTestCase testFileName testName outTestCase)\n    string(REGEX MATCH \"Test([_a-zA-Z][_a-zA-Z0-9]*)\" match ${testFileName})\n    string(REGEX REPLACE \".*Test([_a-zA-Z][_a-zA-Z0-9]*).*\" \"\\\\1\" testCase ${match})\n    set(testCase Test${testCase}${testName})\n    set(${outTestCase} ${testCase} PARENT_SCOPE)\nendfunction()\n\n\n# Function which adds all tests within a certain test file.\nfunction(add_all_tests_in testSrc)\n    get_filename_component(testFileName ${testSrc} NAME_WE)\n\n    add_executable(${testFileName} ${testSrc})\n    target_link_libraries(${testFileName} ${TEST_EXTRA_LIBS})\n    set_target_properties(${testFileName} PROPERTIES RUNTIME_OUTPUT_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR})\n\n    file(READ \"${testSrc}\" testFileContents)\n\n    # You should change this Regex for what you need in your case.\n    # Maybe something like:\n    # \"TEST\\\\( *([_a-zA-Z][_a-zA-Z0-9]* *, *[_a-zA-Z][_a-zA-Z0-9]*) *\\\\)\"\n    string(REGEX MATCHALL \"DEF_TEST_CASE\\\\( *([_a-zA-Z][_a-zA-Z0-9]*) *\\\\)\" unitTests ${testFileContents})\n\n    foreach(match ${unitTests})\n        # This replace will also probably need some change.\n        string(REGEX REPLACE \".*\\\\( *([_a-zA-Z][_a-zA-Z0-9]*) *\\\\).*\" \"\\\\1\" testName ${match})\n        getTestCase(${testFileName} ${testName} testCase)\n        # Actually add the test.\n        # I wanted my CTest test names to be in the form\n        # &lt;fileName&gt;.&lt;testName&gt;, but you can use any\n        # format you want. Suit yourself.\n        # \n        # Also, in order for CMake to run the tests one by one,\n        # you have to find how to invoke the test executable.\n        # In the case of Boost, the option --run_test=&lt;Boost_Test_Name&gt;\n        # runs only the test called &lt;Boost_Test_Name&gt;. There should be\n        # an equivalent option for GoogleTest, I'm sure.\n        add_test(NAME \"${testFileName}.${testName}\" WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR} COMMAND ${CMAKE_CURRENT_BINARY_DIR}/${testFileName} --run_test=${testCase} --catch_system_error=yes)\n    endforeach()\nendfunction()\n\n\n\n# Actually add all tests in all test files.\nforeach(testSrc ${TEST_SRCS})\n    add_all_tests_in(${testSrc})\nendforeach()\n</code></pre>\n\n<p>Works for me. After running CMake under a <code>build/</code> directory, running all tests yields:</p>\n\n<pre><code>$ cd test &amp;&amp; ctest\n\nTest project /home/anthonyd973/Git/Git_Projects/MySweeper/build/test\n      Start  1: TestFieldMaker.makeFromFile\n 1/12 Test  #1: TestFieldMaker.makeFromFile ........   Passed    0.03 sec\n      Start  2: TestFieldMaker.make\n 2/12 Test  #2: TestFieldMaker.make ................   Passed    0.01 sec\n      Start  3: TestFieldMaker._computeFieldDims\n 3/12 Test  #3: TestFieldMaker._computeFieldDims ...   Passed    0.01 sec\n      Start  4: TestFieldMaker._populateField\n 4/12 Test  #4: TestFieldMaker._populateField ......   Passed    0.00 sec\n      Start  5: TestInputField.InputField\n 5/12 Test  #5: TestInputField.InputField ..........   Passed    0.00 sec\n      Start  6: TestCell.Cell\n 6/12 Test  #6: TestCell.Cell ......................   Passed    0.00 sec\n      Start  7: TestCell.initNeighbours\n 7/12 Test  #7: TestCell.initNeighbours ............   Passed    0.00 sec\n      Start  8: TestCell.updateNeighbours\n 8/12 Test  #8: TestCell.updateNeighbours ..........   Passed    0.00 sec\n      Start  9: TestCell._mark\n 9/12 Test  #9: TestCell._mark .....................   Passed    0.00 sec\n      Start 10: TestMySweeper.MySweeper\n10/12 Test #10: TestMySweeper.MySweeper ............   Passed    0.00 sec\n      Start 11: TestField.Field\n11/12 Test #11: TestField.Field ....................   Passed    0.01 sec\n      Start 12: TestField._initNeighbours\n12/12 Test #12: TestField._initNeighbours ..........   Passed    0.00 sec\n100% tests passed, 0 tests failed out of 12\nTotal Test time (real) =   0.10 sec\n</code></pre>\n\n<p>Hopefully, using regular expression does not cause you <a href=\"https://meta.stackexchange.com/a/20842/338941\">two problems</a> :) .</p>\n"}], "owner": {"reputation": 475, "user_id": 740857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faa2c69fd4c3302628c7db23294eb630?s=128&d=identicon&r=PG", "display_name": "user740857", "link": "https://stackoverflow.com/users/740857/user740857"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1155, "favorite_count": 1, "answer_count": 1, "score": 12, "last_activity_date": 1494169703, "creation_date": 1492625542, "question_id": 43503192, "link": "https://stackoverflow.com/questions/43503192/googletest-for-android-ndk-c-with-cmake", "title": "GoogleTest for Android NDK C++ with CMake", "body": "<p>How do I setup GoogleTest for my native C++ code on Android with CMake? The Android NDK comes bundled with googletest but instructions are available only for Android.mk (<a href=\"https://android.googlesource.com/platform/ndk/+/master/sources/third_party/googletest/README.NDK\" rel=\"noreferrer\">here</a>). How do I port the Android.mk gtest setup to my CMakeLists.txt? And once that is setup, is it possible to run the test runner through Android Studio's test configurations?</p>\n"}, {"tags": ["c++", "loops", "random", "do-while"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1492625112, "post_id": 43502977, "comment_id": 74060479, "body": "You don&#39;t read in answers in your loop-your user gets only a single guess."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 1, "creation_date": 1492625336, "post_id": 43502977, "comment_id": 74060588, "body": "<code>cin &gt;&gt; guess</code> is the input operation - it&#39;s reading the next input value from the standard input stream and storing it in <code>guess</code>.  Since you&#39;re reading into an integer variable, the operation will fail (evaluate to false) if the input string is not a valid integer constant (contains something other than digits).   If you enter something that isn&#39;t an integer, you get the <code>&quot;Please enter only numbers&quot;</code> message - otherwise it compares the input to the random number."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 1, "creation_date": 1492625422, "post_id": 43502977, "comment_id": 74060651, "body": "Expansion to @JohnBode &#39;s comment on what&#39;s happening: <a href=\"http://stackoverflow.com/questions/4600295/what-is-the-meaning-of-operator-bool-const\">Why and how it happens</a>. And more details: <a href=\"http://en.cppreference.com/w/cpp/io/basic_ios/operator_bool\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/io/basic_ios/operator_bool</a>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7891411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd39dcd0710e0d6a6b013f457ceb832b?s=128&d=identicon&r=PG&f=1", "display_name": "HeelsPlusPlus", "link": "https://stackoverflow.com/users/7891411/heelsplusplus"}, "edited": false, "score": 0, "creation_date": 1492676272, "post_id": 43503163, "comment_id": 74081371, "body": "&lt;p&gt;Oh my! I totally understand it now, because the scanf is not in the loop, he only gets to input once, so the loop goes on forever regardless. Bless you! &lt;p&gt; &lt;p&gt;Alright I&#39;ll do well to ensure that I verify that what was entered was a number before the loop runs. Thank you&lt;/p&gt;"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "is_accepted": false, "score": 2, "last_activity_date": 1492625421, "creation_date": 1492625421, "answer_id": 43503163, "question_id": 43502977, "link": "https://stackoverflow.com/questions/43502977/what-is-the-relevance-of-if-cin-variablename-in-this-loop/43503163#43503163", "title": "What is the relevance of if (!(cin &gt;&gt; variableName)) in this loop", "body": "<p>The difference between <code>scanf</code> and <code>cin &gt;&gt;</code> is not relevant here, that's not what makes it work.</p>\n\n<p>Here's what you have:</p>\n\n<pre><code>scanf(\"%d\", &amp;nUserRandNum);\ndo\n{\n    ... print ...\n}\nwhile (randomNumber != nUserRandNum);\n</code></pre>\n\n<p>Your <code>scanf</code> is outside of the loop. Therefore, when the <code>do</code>...<code>while</code> condition is satisfied, the <em>same number that the user already entered</em> is checked again.</p>\n\n<p>This needs to be inside the loop body, like so:</p>\n\n<pre><code>do\n{\n    scanf(\"%d\", &amp;nUserRandNum);\n    ... print ...\n}\nwhile (randomNumber != nUserRandNum);\n</code></pre>\n\n<p>Reading input from <code>cin</code> rather than using <code>scanf</code> is probably a good idea, as it's less easy to get wrong. (Although the code you've shown still manages to do so.)</p>\n\n<p>Checking whether a number was successfully read is probably a good idea too. When the user enters random garbage, you shouldn't treat that as if the user had entered a number.</p>\n\n<p>But neither of those is the cause of your problem.</p>\n"}, {"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1492625633, "post_id": 43503175, "comment_id": 74060781, "body": "This only deals with about 1/3 of OP&#39;s problem. You should expand on why OP&#39;s attempt failed to work."}, {"owner": {"reputation": 25, "user_id": 5675906, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-17MyhLJ-9JQ/AAAAAAAAAAI/AAAAAAAAAEE/hY1vYkZIN20/photo.jpg?sz=128", "display_name": "Gizmo of Arabia", "link": "https://stackoverflow.com/users/5675906/gizmo-of-arabia"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1492625834, "post_id": 43503175, "comment_id": 74060905, "body": "That was already explained by the other answer, I&#39;m addressing the question from the title."}], "tags": [], "owner": {"reputation": 25, "user_id": 5675906, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-17MyhLJ-9JQ/AAAAAAAAAAI/AAAAAAAAAEE/hY1vYkZIN20/photo.jpg?sz=128", "display_name": "Gizmo of Arabia", "link": "https://stackoverflow.com/users/5675906/gizmo-of-arabia"}, "is_accepted": false, "score": 1, "last_activity_date": 1492625894, "last_edit_date": 1492625894, "creation_date": 1492625473, "answer_id": 43503175, "question_id": 43502977, "link": "https://stackoverflow.com/questions/43502977/what-is-the-relevance-of-if-cin-variablename-in-this-loop/43503175#43503175", "title": "What is the relevance of if (!(cin &gt;&gt; variableName)) in this loop", "body": "<p>You can understand that <code>if (!(cin &gt;&gt; guess))</code> statement as \"if inputting the number was unsuccessful\", so <code>(cin &gt;&gt; x)</code> is true if the type entered by the user really is an int.\nNitpick: you switched \"go lower\" with \"go higher\" by the way.</p>\n"}], "owner": {"reputation": 11, "user_id": 7891411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd39dcd0710e0d6a6b013f457ceb832b?s=128&d=identicon&r=PG&f=1", "display_name": "HeelsPlusPlus", "link": "https://stackoverflow.com/users/7891411/heelsplusplus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1492625894, "creation_date": 1492624810, "last_edit_date": 1492625005, "question_id": 43502977, "link": "https://stackoverflow.com/questions/43502977/what-is-the-relevance-of-if-cin-variablename-in-this-loop", "title": "What is the relevance of if (!(cin &gt;&gt; variableName)) in this loop", "body": "<p>I'm a self taught developer trying to learn c++, I found this exercise on google and I wrote the code for it, though all my conditions were correct, it wouldn't work, when I checked their answer, I found this line of code- if (!(cin >> guess)). I honestly don't see the relevance, I don't know why it made my loop not to work. Here is my code:</p>\n\n<pre><code>int main(int argc, char* argv[])    \n{\n\nint nUserRandNum = 0;\n    int randomNumber=0;\n\n    srand (time(NULL));\n    randomNumber = rand() % 100 + 1;\n\n    printf(\"Please enter a random number between 1 - 99 \\n\");\n\n    scanf(\"%d\", &amp;nUserRandNum);\n\n\n    do\n    {\n        if (randomNumber &lt; nUserRandNum)\n        {\n            printf(\"Try to go a little higher than \\n\", nUserRandNum);\n        }\n        else\n        {\n            printf(\"You might want to go a little lower than \\n\", nUserRandNum);    \n        }\n    }\n    while (randomNumber != nUserRandNum);\n\n    printf(\"You got it!!!\");\n\n    system(\"Pause\"); \n\n    return 0;\n}\n</code></pre>\n\n<p>When I checked the answer they had:</p>\n\n<pre><code>int random_number, guess;\n\n// Initialize random seed.\nsrand (time(NULL));\n\n// Generate random number between 1 and 100\nrandom_number = rand() % 100 + 1;\n\ncout &lt;&lt; \"Guess our number (1 to 100) \";\ncin&gt;&gt;guess;\ndo \n{\n    if (!(cin &gt;&gt; guess)) \n    {\n      cout &lt;&lt; \"Please enter only numbers\" &lt;&lt; endl;\n    } \n    else \n    {\n      if (random_number &lt; guess) \n          cout &lt;&lt; \"The secret number is lower than \" &lt;&lt; guess &lt;&lt; endl;\n      else if (random_number &gt; guess) \n          cout &lt;&lt; \"The secret number is higher than \" &lt;&lt; guess &lt;&lt; endl;\n    }\n} while (random_number != guess);\ncout &lt;&lt; \"Congratulations!\" &lt;&lt;  endl;\n</code></pre>\n\n<p>what does that if statement do <code>{if (!(cin &gt;&gt; guess)) }</code>? And are there other reasons my loop didn't work?</p>\n"}, {"tags": ["c++", "ios", "objective-c", "xcode"], "comments": [{"owner": {"reputation": 27, "user_id": 7548106, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WSBTA.jpg?s=128&g=1", "display_name": "Shubham Vij", "link": "https://stackoverflow.com/users/7548106/shubham-vij"}, "edited": false, "score": 0, "creation_date": 1492625088, "post_id": 43502890, "comment_id": 74060459, "body": "My code does compile though, the ide seems to be throwing an error though."}, {"owner": {"reputation": 27, "user_id": 7548106, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WSBTA.jpg?s=128&g=1", "display_name": "Shubham Vij", "link": "https://stackoverflow.com/users/7548106/shubham-vij"}, "edited": false, "score": 0, "creation_date": 1492625553, "post_id": 43502890, "comment_id": 74060736, "body": "@JAL See edit above"}, {"owner": {"reputation": 27, "user_id": 7548106, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WSBTA.jpg?s=128&g=1", "display_name": "Shubham Vij", "link": "https://stackoverflow.com/users/7548106/shubham-vij"}, "edited": false, "score": 0, "creation_date": 1492626553, "post_id": 43502890, "comment_id": 74061322, "body": "@I&#39;L&#39;I see edit"}], "owner": {"reputation": 27, "user_id": 7548106, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WSBTA.jpg?s=128&g=1", "display_name": "Shubham Vij", "link": "https://stackoverflow.com/users/7548106/shubham-vij"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "closed_date": 1492625054, "answer_count": 0, "score": 0, "last_activity_date": 1492638386, "creation_date": 1492624502, "last_edit_date": 1492638386, "question_id": 43502890, "link": "https://stackoverflow.com/questions/43502890/xcode-compiler-error-but-ios-program-compiles", "closed_reason": "Duplicate", "title": "Xcode compiler error, but iOS program compiles", "body": "<p>I am calling the code below in a C++ class.</p>\n\n<pre><code>void CurrentClass::doSomeProcessing() {\n      printf(\"Hello World\");\n}\n\nvoid CurrentClass::someMethod() {\n      std::thread t(&amp;CurrentClass::doSomeProcessing, this);\n}\n</code></pre>\n\n<p>It seems that Xcode IDE throws the following error.</p>\n\n<pre><code>No matching constructor for initialization of 'std::thread'\n</code></pre>\n\n<p>But, the program compiles and runs without an issue.</p>\n\n<p>Any ideas on how I can fix this issue?</p>\n\n<p>I am guessing it is some setting in the build settings for my Xcode project??</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1492624946, "post_id": 43502837, "comment_id": 74060344, "body": "<code>Next</code> and <code>Prev</code> expect a reference to the container associated with the iterator. <code>GetElement</code> is unaware of the container. Since you seem to be using <code>std::vector::iterator</code>s I don&#39;t see how to achieve this. You will either need to pass the container to <code>GetElement</code> or drop that requirement from <code>Next</code> and <code>Prev</code>."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1492625539, "post_id": 43502837, "comment_id": 74060727, "body": "You have not defined what <code>Expects</code> is. You use <code>It</code> as the return type type for <code>Prev</code> and <code>Next</code>, but it&#39;s indeclared. It looks like you meant to use the type <code>I</code>."}, {"owner": {"reputation": 1514, "user_id": 345435, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/82c9023c7384267a4b22107fe5817a10?s=128&d=identicon&r=PG", "display_name": "Kian", "link": "https://stackoverflow.com/users/345435/kian"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1492626040, "post_id": 43502837, "comment_id": 74061038, "body": "I may have simplified too much in my example and exposed things that the caller would be unaware of. The caller doesn&#39;t know how the elements are stored in the class. He just knows that he can get an identifier to an element, and given that he can call &quot;GetNextElement&quot; or &quot;GetPrevElement&quot;. Since these two methods are almost exactly alike, I&#39;d like to be able to have a single method and have the caller specify whether it should use the Next or Prev template function to get the desired element."}], "answers": [{"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 2, "last_activity_date": 1492625056, "creation_date": 1492625056, "answer_id": 43503049, "question_id": 43502837, "link": "https://stackoverflow.com/questions/43502837/how-do-you-pass-a-template-name-to-a-method/43503049#43503049", "title": "How do you pass a template name to a method?", "body": "<pre><code>#define OINVOKE(...) __VA_ARGS__(decltype(args)(args)...)\n#define OVERLOADS_OF(...) [](auto&amp;&amp;...args)\\\n    noexcept(noexcept(OINVOKE(__VA_ARGS__)))\\\n    -&gt;decltype(OINVOKE(__VA_ARGS__))\\\n    { return OINVOKE(__VA_ARGS__); }\n\nauto fNext=OVERLOADS_OF(Next);\nauto fPrev=OVERLOADS_OF(Prev);\n</code></pre>\n\n<p>Then:</p>\n\n<pre><code>template&lt;auto* pf&gt;\nint* GetElement(std::vector&lt;int&gt;::iterator i) {\n  auto next = (*pf)(i, elements);\n  if (next == elements.end()) return nullptr;\n  return &amp;*it;\n}\nauto it = mc.elements.begin();\nauto next = GetElement&lt;&amp;fNext&gt;(it);\n</code></pre>\n\n<p>requires C++17.</p>\n"}, {"comments": [{"owner": {"reputation": 1514, "user_id": 345435, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/82c9023c7384267a4b22107fe5817a10?s=128&d=identicon&r=PG", "display_name": "Kian", "link": "https://stackoverflow.com/users/345435/kian"}, "edited": false, "score": 0, "creation_date": 1492626246, "post_id": 43503143, "comment_id": 74061153, "body": "The caller would not have access to mc.elements itself (it&#39;s private), so a free function would not help. I only exposed it to simplify the example. I want the caller to be able to tell the method to use Next or Prev, but not know what types are used to instantiate it."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 1514, "user_id": 345435, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/82c9023c7384267a4b22107fe5817a10?s=128&d=identicon&r=PG", "display_name": "Kian", "link": "https://stackoverflow.com/users/345435/kian"}, "edited": false, "score": 0, "creation_date": 1492626578, "post_id": 43503143, "comment_id": 74061342, "body": "In your example <code>GetElement&lt;Next&gt;</code> has no way of knowing which instance of <code>mc</code> or <code>mc.element</code> to use. Did you want <code>GetElement&lt;T&gt;</code> to be a member method of <code>MyClass</code>?"}, {"owner": {"reputation": 1514, "user_id": 345435, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/82c9023c7384267a4b22107fe5817a10?s=128&d=identicon&r=PG", "display_name": "Kian", "link": "https://stackoverflow.com/users/345435/kian"}, "edited": false, "score": 0, "creation_date": 1492627987, "post_id": 43503143, "comment_id": 74062188, "body": "Ah, I just noticed that. Yes, GetElement was intended to be a member, replacing the two GetPrevElement and GetNextElement methods. I fixed the typo. Sorry. So the edit doesn&#39;t really address the problem, since it&#39;s calling the two members instead of replacing them."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 1514, "user_id": 345435, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/82c9023c7384267a4b22107fe5817a10?s=128&d=identicon&r=PG", "display_name": "Kian", "link": "https://stackoverflow.com/users/345435/kian"}, "edited": false, "score": 0, "creation_date": 1492628715, "post_id": 43503143, "comment_id": 74062593, "body": "@Kian Edited again."}], "tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": true, "score": 1, "last_activity_date": 1492628707, "last_edit_date": 1492628707, "creation_date": 1492625368, "answer_id": 43503143, "question_id": 43502837, "link": "https://stackoverflow.com/questions/43502837/how-do-you-pass-a-template-name-to-a-method/43503143#43503143", "title": "How do you pass a template name to a method?", "body": "<p>This problem is greatly simplified if you can wrap your functions in <code>struct</code>.</p>\n\n<pre><code>struct Prev\n{\n    template &lt;typename I, typename C&gt;\n    I operator()(I i, const C&amp; c) noexcept {\n        Expects(i != c.end());\n        if (i == c.begin()) return c.end();\n        return i - 1;\n    }\n};\n\nstruct Next\n{\n    template &lt;typename I, typename C&gt;\n    I operator()(I i, const C&amp; c) noexcept {\n        Expects(i != c.end());\n        return i + 1;\n    }\n};\n</code></pre>\n\n<p>You can then simply pass them as template arguments.</p>\n\n<pre><code>struct MyClass \n{\npublic:\n    auto begin() { return elements.begin(); }\n    auto end() { return elements.end(); }\n\n    template&lt;typename T, typename I&gt;\n    I GetElement(I iter)\n    {\n        return T()(iter, this-&gt;elements);\n    }\n\nprivate:\n    std::vector&lt;int&gt; elements;\n};\n\nint main()\n{\n    MyClass mc;\n    auto it = mc.begin();\n    auto next = mc.GetElement&lt;Next&gt;(it);\n    auto prev = mc.GetElement&lt;Prev&gt;(it);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 7892058, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-H9kGQQyUvjM/AAAAAAAAAAI/AAAAAAAAAJo/5SgW0ObzvjI/photo.jpg?sz=128", "display_name": "Ananta Yudica", "link": "https://stackoverflow.com/users/7892058/ananta-yudica"}, "is_accepted": false, "score": 0, "last_activity_date": 1492643671, "creation_date": 1492643671, "answer_id": 43507598, "question_id": 43502837, "link": "https://stackoverflow.com/questions/43502837/how-do-you-pass-a-template-name-to-a-method/43507598#43507598", "title": "How do you pass a template name to a method?", "body": "<p>You can try this code:</p>\n\n<pre><code>template &lt;std::vector&lt;int&gt;::iterator (*FOO)(std::vector&lt;int&gt;::iterator, const std::vector&lt;int&gt;&amp;)&gt;\nstd::vector&lt;int&gt;::iterator GetElement(std::vector&lt;int&gt;::iterator i)\n{\n     return FOO(i, elements);\n}\n</code></pre>\n"}], "owner": {"reputation": 1514, "user_id": 345435, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/82c9023c7384267a4b22107fe5817a10?s=128&d=identicon&r=PG", "display_name": "Kian", "link": "https://stackoverflow.com/users/345435/kian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 1, "accepted_answer_id": 43503143, "answer_count": 3, "score": 1, "last_activity_date": 1492643671, "creation_date": 1492624373, "last_edit_date": 1492627810, "question_id": 43502837, "link": "https://stackoverflow.com/questions/43502837/how-do-you-pass-a-template-name-to-a-method", "title": "How do you pass a template name to a method?", "body": "<p>Lets say I have two template functions for iterating through a container:</p>\n\n<pre><code>template &lt;typename I, typename C&gt;\nIt Prev(I i, const C&amp; c) noexcept {\n    Expects(i != c.end());\n    if (i == c.begin()) return c.end();\n    return i - 1;\n}\n</code></pre>\n\n<p>and </p>\n\n<pre><code>template &lt;typename I, typename C&gt;\nIt Next(I i, const C&amp; c) noexcept {\n    Expects(i != c.end());\n    return i + 1;\n}\n</code></pre>\n\n<p>And a class with a GetNextElement and GetPrevElement that use these templates:</p>\n\n<pre><code>struct MyClass {\n  std::vector&lt;int&gt; elements;\n\n  int* GetNextElement(std::vector&lt;int&gt;::iterator i) {\n    auto next = Next(i, elements);\n    if (next == elements.end()) return nullptr;\n    return &amp;*it;\n  }\n  int* GetPrevElement(std::vector&lt;int&gt;::iterator i) {\n    auto prev = Prev(i, elements);\n    if (prev == elements.end()) return nullptr;\n    return &amp;*it;\n  }\n};\n</code></pre>\n\n<p>These two methods do the same thing, except for calling a different template. How do I turn these into a single member function that might be called like </p>\n\n<pre><code>MyClass mc;\n// ...\nauto it = mc.elements.begin();\nauto next = mc.GetElement&lt;Next&gt;(it);\n// Or maybe mc.GetElement(it, Next);\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 6, "creation_date": 1492623639, "post_id": 43502584, "comment_id": 74059521, "body": "<code>char str[len];</code> -- This is not valid C++, regardless of the compiler.  C++ requires arrays to use constants to denote the number of items.  Use <code>std::vector&lt;char&gt; str(len)</code> instead."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1492623744, "post_id": 43502584, "comment_id": 74059598, "body": "Essentially this: <a href=\"http://stackoverflow.com/questions/43233894/tuple-stdget-not-working-for-variable-defined-constant/43234198#43234198\" title=\"tuple stdget not working for variable defined constant\">stackoverflow.com/questions/43233894/&hellip;</a>"}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1492623752, "post_id": 43502584, "comment_id": 74059602, "body": "gcc and clang allow <a href=\"http://stackoverflow.com/q/21273829/1708801\">VLAs as an extension</a> ... VLAs are from C99 and are not standard C++"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1492623758, "post_id": 43502584, "comment_id": 74059607, "body": "Since <code>classpath.length()</code> does not run at compile time, I would not expect  <code>len</code> to be a compile time constant."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1492623808, "post_id": 43502584, "comment_id": 74059644, "body": "Could use <code>char str[] = &quot;Hello Dolly!&quot;;</code>"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1492623832, "post_id": 43502584, "comment_id": 74059662, "body": "@juerg -- <i>please read what I&#39;m saying!</i> -- Please read what we&#39;re saying.  An array in C++ cannot use a variable to denote the number of elements.  I don&#39;t know how more simply to put it."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1492623904, "post_id": 43502584, "comment_id": 74059705, "body": "@PaulMcKenzie Well it can, it just need to be a compile time constant variable."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1492623941, "post_id": 43502584, "comment_id": 74059734, "body": "@NathanOliver Hmmm &quot;constant variable&quot;?  Do not find that in the C++ spec.  Perhaps constant object?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1492623946, "post_id": 43502584, "comment_id": 74059737, "body": "<i>compile time constant variable</i> -- Sounds like an oxymoron, &quot;constant variable&quot;"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1492624111, "post_id": 43502584, "comment_id": 74059844, "body": "I think the technical term is <i>core constant expression</i>"}, {"owner": {"reputation": 351, "user_id": 2496001, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/843cbaf3ec1c12f8074dff03789b0575?s=128&d=identicon&r=PG", "display_name": "juerg", "link": "https://stackoverflow.com/users/2496001/juerg"}, "edited": false, "score": 0, "creation_date": 1492624115, "post_id": 43502584, "comment_id": 74059847, "body": "please don&#39;t be fixed to much on the snippet. char str[] = &quot;what ever&quot;; can&#39;t be used. the string is comming from c++ part and c char array is in a library! How to have the compiler compute a constexpr?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1492624340, "post_id": 43502584, "comment_id": 74059994, "body": "@juerg MSVC does not support variable length arrays in C, and never has."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1492624364, "post_id": 43502584, "comment_id": 74060008, "body": "<a href=\"http://rextester.com/WIUP19583\" rel=\"nofollow noreferrer\">gcc gives you a warning here when the proper command line is used</a>"}, {"owner": {"reputation": 351, "user_id": 2496001, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/843cbaf3ec1c12f8074dff03789b0575?s=128&d=identicon&r=PG", "display_name": "juerg", "link": "https://stackoverflow.com/users/2496001/juerg"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1492624584, "post_id": 43502584, "comment_id": 74060111, "body": "@Weather Vane and how do you do it? count the caracters and put the number into the array definition? Even MSVC should offer a smarter solution!"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1492624648, "post_id": 43502584, "comment_id": 74060160, "body": "@juerg No, it has nothing to do with MSVC.  The C++ language specification does not allow variable length arrays.  There is no requirement for Visual C++ or any other C++ compiler to &quot;break the rules&quot;."}, {"owner": {"reputation": 351, "user_id": 2496001, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/843cbaf3ec1c12f8074dff03789b0575?s=128&d=identicon&r=PG", "display_name": "juerg", "link": "https://stackoverflow.com/users/2496001/juerg"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1492624682, "post_id": 43502584, "comment_id": 74060189, "body": "@Rakete 111 You should not edit questions if you don&#39;t understand the problem. The tags were correct. It&#39;s a problem of c++ and c and MSVC!"}, {"owner": {"reputation": 351, "user_id": 2496001, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/843cbaf3ec1c12f8074dff03789b0575?s=128&d=identicon&r=PG", "display_name": "juerg", "link": "https://stackoverflow.com/users/2496001/juerg"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1492624764, "post_id": 43502584, "comment_id": 74060245, "body": "@PaulMcKenzie Not if you use c++11 or c++14"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1492624838, "post_id": 43502584, "comment_id": 74060282, "body": "@juerg No, Visual Studio has nothing to do with it. You should only use this tag if you have a specific question about it, not a coding issue. C++ doesn&#39;t have VLAs, those are only available via an extension."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1492624841, "post_id": 43502584, "comment_id": 74060284, "body": "@juerg VLA is not in C++ standard, neither in C++11 nor C++14"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1492624854, "post_id": 43502584, "comment_id": 74060290, "body": "@juerg Even in C++ `11 or 14, variable length arrays are not allowed.  You just stumbled across an extension supported by a certain compiler, and even then, that compiler gives you a warning (or error) if you use the proper command-line arguments to compile your program.  Consider yourself unlucky."}, {"owner": {"reputation": 351, "user_id": 2496001, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/843cbaf3ec1c12f8074dff03789b0575?s=128&d=identicon&r=PG", "display_name": "juerg", "link": "https://stackoverflow.com/users/2496001/juerg"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1492624972, "post_id": 43502584, "comment_id": 74060373, "body": "@Paul McKenzie Ok, but this is not the point, otherwise I would have used vector as already suggested. What I want is to define the array size at compile time and let the compiler compute the space required. Is this so difficulte with C++/c?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1492625488, "post_id": 43502584, "comment_id": 74060691, "body": "Then you&#39;re going about it all wrong by introducing <code>std::string</code> into this whole thing.  A <code>char</code> array can always have its size known at compile time using <code>sizeof(array)</code>  <a href=\"http://rextester.com/TUHPC27655\" rel=\"nofollow noreferrer\">See this</a>"}, {"owner": {"reputation": 351, "user_id": 2496001, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/843cbaf3ec1c12f8074dff03789b0575?s=128&d=identicon&r=PG", "display_name": "juerg", "link": "https://stackoverflow.com/users/2496001/juerg"}, "edited": false, "score": 0, "creation_date": 1492625893, "post_id": 43502584, "comment_id": 74060943, "body": "I&#39;m just showing a condensed example of a much bigger part. So we must accept, the c++ string being given, as well as the requirement to copy the beast to a c char array. For me this  should be very simple. I conclude it&#39;s not, and this is very strange to me! Hence, once again, how do you do it? Count characters?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1492626011, "post_id": 43502584, "comment_id": 74061021, "body": "@juerg A <code>std::string</code> is a dynamic string class.  Nothing about a <code>std::string</code> is known at compile time in terms of the number of characters it may hold later on.  Given that, you have to use runtime solutions, and <code>std::vector&lt;char&gt;</code>, or using <code>std::string</code> throughout your app, or using <code>new char[]</code> are those solutions.  There are others, but those are the ones used the most.  Like I said, you stumbled across something that really doesn&#39;t exist in C++ and Visual C++ slapped it down."}, {"owner": {"reputation": 351, "user_id": 2496001, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/843cbaf3ec1c12f8074dff03789b0575?s=128&d=identicon&r=PG", "display_name": "juerg", "link": "https://stackoverflow.com/users/2496001/juerg"}, "edited": false, "score": 0, "creation_date": 1492626219, "post_id": 43502584, "comment_id": 74061133, "body": "Aha, this is now a good answer. In Jave a String is not permutable and invariable. Hence the question is does c++ have a Java kind of String also?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1492626355, "post_id": 43502584, "comment_id": 74061207, "body": "Yes, it&#39;s called <code>std::string</code>.  You used it, but thought it could be used as a compile-time entity when it really can&#39;t be used that way."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1492626435, "post_id": 43502584, "comment_id": 74061253, "body": "Btw why do you need to copy <code>std::string</code> content into array and not to use <code>std::string::c_str()</code> directly?"}, {"owner": {"reputation": 351, "user_id": 2496001, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/843cbaf3ec1c12f8074dff03789b0575?s=128&d=identicon&r=PG", "display_name": "juerg", "link": "https://stackoverflow.com/users/2496001/juerg"}, "edited": false, "score": 0, "creation_date": 1492626681, "post_id": 43502584, "comment_id": 74061406, "body": "I must try if I can define it like this where required. If I understand correctly this will give me a c char array, from wich I can take the size before copy it to the destination char array, right?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1492627059, "post_id": 43502584, "comment_id": 74061627, "body": "What <code>std::string::c_str()</code> returns to you is already C string. Why do you need to copy it?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1492627179, "post_id": 43502584, "comment_id": 74061710, "body": "@juerg I think you should just use <code>std::string</code> throughout, and use <code>std::string::c_str()</code> for when you are interfacing to a function that requires a <code>const char *</code>.  You may be making the mistake of thinking that if a function requires a char array, you <b>must</b> declare a char array and pass it to that function.  That is not the case."}, {"owner": {"reputation": 351, "user_id": 2496001, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/843cbaf3ec1c12f8074dff03789b0575?s=128&d=identicon&r=PG", "display_name": "juerg", "link": "https://stackoverflow.com/users/2496001/juerg"}, "edited": false, "score": 0, "creation_date": 1492627453, "post_id": 43502584, "comment_id": 74061863, "body": "OK. I didn&#39;t get an answer as expected but at least the conlusion c/c++ can not offer me the solution expected. Thanks any way all of you for the discussion. I&#39;ll start look for a work around to get the goal."}], "answers": [{"comments": [{"owner": {"reputation": 351, "user_id": 2496001, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/843cbaf3ec1c12f8074dff03789b0575?s=128&d=identicon&r=PG", "display_name": "juerg", "link": "https://stackoverflow.com/users/2496001/juerg"}, "edited": false, "score": 0, "creation_date": 1492625407, "post_id": 43502902, "comment_id": 74060638, "body": "Sorry, this is not the point! I will not and can&#39;t use new! Please explain to this lazy Java programmer, used to let the compiler do the work, how you define a char array with the length defined by a c++ sting? Do you count the characters and put the number in? Or do you define simply much bigger than required? I can&#39;t believe this being the answer!"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1492625620, "post_id": 43502902, "comment_id": 74060775, "body": "&quot;Please explain to this lazy Java programmer, used to let the compiler do the work, how you define a char array with the length defined by a c++ sting?&quot; You do not do it. That&#39;s it."}, {"owner": {"reputation": 351, "user_id": 2496001, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/843cbaf3ec1c12f8074dff03789b0575?s=128&d=identicon&r=PG", "display_name": "juerg", "link": "https://stackoverflow.com/users/2496001/juerg"}, "edited": false, "score": 0, "creation_date": 1492626009, "post_id": 43502902, "comment_id": 74061019, "body": "Do you have also a more helpful answer?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1492626150, "post_id": 43502902, "comment_id": 74061101, "body": "What answer do you want? Language does not support VLA, and that <code>const int</code> is not compile time constant, so this not going to work. You need to reserve big enough array or allocate memory dynamically. Or do not use <code>std::string</code> in between."}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1492624788, "last_edit_date": 1492624788, "creation_date": 1492624552, "answer_id": 43502902, "question_id": 43502584, "link": "https://stackoverflow.com/questions/43502584/expression-does-not-evaluate-to-constant/43502902#43502902", "title": "Expression does not evaluate to constant", "body": "<p>In C++ array sizes must be known at compile time.  </p>\n\n<p>You can <em>dynamically allocate</em> contiguous memory during run-time by using <code>operator new</code>:</p>\n\n<pre><code>char * my_array = new char[length];\n</code></pre>\n\n<p>Remember to use the <code>delete[]</code> to free up the memory after you are finished with it.  </p>\n\n<p>Also, C-style arrays need that terminating nul character so you will need to allocate one extra slot in the array.</p>\n\n<p>To copy a <code>std::string</code> to a character array:  </p>\n\n<pre><code>const std::string example = \"example\";\nconst std::string::size_type length = example.length();\nchar * p_array = new char [length + 1];\nstrcpy(p_array, example.c_str());\ncout &lt;&lt; p_array &lt;&lt; endl;\ndelete[] p_array;\n</code></pre>\n"}], "owner": {"reputation": 351, "user_id": 2496001, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/843cbaf3ec1c12f8074dff03789b0575?s=128&d=identicon&r=PG", "display_name": "juerg", "link": "https://stackoverflow.com/users/2496001/juerg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 768, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1492624788, "creation_date": 1492623555, "last_edit_date": 1492623781, "question_id": 43502584, "link": "https://stackoverflow.com/questions/43502584/expression-does-not-evaluate-to-constant", "title": "Expression does not evaluate to constant", "body": "<p>I have the following stupid snippet:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstring&gt;\nusing namespace std;\n\nint main() {\n    const string classpath = \"Hello Dolly!\";\n    const int len = classpath.length()+1;\n    char str[len];\n    strncpy(str, classpath.c_str(), len);\n    cout &lt;&lt; str &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>The aim ist to assign a c++ string to a c char array. The string is known at compile time, hence a constant. But the string may vary from one project to an other. I have no intention to count chars for the compiler. Hence the const len should be computed at compile time as shown. This works with cygwin and on linux. But the visualstudio compiler sees a problem and gives me the error C2131!\nHow to work around? \n(Please consider I'm a Java programmer being troubled loosing time on such kind of problems!)</p>\n"}, {"tags": ["c++", "abstract"], "comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1492623353, "post_id": 43502488, "comment_id": 74059323, "body": "Why would you want to? Having a class with no methods makes absolutely no sense."}, {"owner": {"reputation": 43, "user_id": 7891338, "user_type": "registered", "profile_image": "https://graph.facebook.com/821704214643718/picture?type=large", "display_name": "Faceless", "link": "https://stackoverflow.com/users/7891338/faceless"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1492623408, "post_id": 43502488, "comment_id": 74059372, "body": "I want to confirm whether if i can declare a abstract class as stated above"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1492623495, "post_id": 43502488, "comment_id": 74059442, "body": "It&#39;s not possible, and you should not want to do this. It makes no sense."}], "answers": [{"tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": true, "score": 6, "last_activity_date": 1492623410, "creation_date": 1492623410, "answer_id": 43502543, "question_id": 43502488, "link": "https://stackoverflow.com/questions/43502488/declare-abstract-class-in-c/43502543#43502543", "title": "Declare abstract class in c++", "body": "<blockquote>\n  <p>My question is can I abstract test class like this? </p>\n</blockquote>\n\n<p>No, you can't. An abstract class by definition is a class that contains at least one pure virtual function.</p>\n"}, {"tags": [], "owner": {"reputation": 259, "user_id": 7886227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hec3U.jpg?s=128&g=1", "display_name": "Dr t", "link": "https://stackoverflow.com/users/7886227/dr-t"}, "is_accepted": false, "score": 0, "last_activity_date": 1492624705, "creation_date": 1492624705, "answer_id": 43502941, "question_id": 43502488, "link": "https://stackoverflow.com/questions/43502488/declare-abstract-class-in-c/43502941#43502941", "title": "Declare abstract class in c++", "body": "<p>Your code:</p>\n\n<pre><code>class test\n{\nvirtual void test()=0;\n}\n</code></pre>\n\n<p>creates an abstract class.<br>\nit contains one or more pure virtual functions:</p>\n\n<pre><code>virtual void test()=0;//is a pure virtual function/method\n</code></pre>\n\n<p>An abstract class is a class definition that contains one or more pure virtual functions.  </p>\n\n<p>You can't create instances of an abstract class because it is not a complete definition.  </p>\n\n<p>Your code:   </p>\n\n<pre><code> virtual class test\n{\n    }\n</code></pre>\n\n<p>is nonsensical, does not rise to the definition of an abstract class because it does not contain one or more pure virtual function, and is an improper use of the 'virtual' keyword...</p>\n\n<p>You may be confused by talk about \"Virtual Base Classes\" which is a misleading way of referring to the semantic of the \"Abstract Class\".</p>\n\n<p>purpose for making an abstract class is to inherit it into derived class and there provide a full definition for the pure virtual function/s.</p>\n\n<p>Abstract class could contain many fully defined methods but only one pure virtual method which would make it abstract.  The simplistic example is misleading.  Abstract classes are common and are often a \"fix\" for issues arising from the (Barbara) Liskov Substitution Principle.</p>\n\n<p>Dr t</p>\n"}, {"tags": [], "owner": {"reputation": 1999, "user_id": 2032514, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/0utk8.png?s=128&g=1", "display_name": "0xF", "link": "https://stackoverflow.com/users/2032514/0xf"}, "is_accepted": false, "score": 7, "last_activity_date": 1548348450, "creation_date": 1548348450, "answer_id": 54351594, "question_id": 43502488, "link": "https://stackoverflow.com/questions/43502488/declare-abstract-class-in-c/54351594#54351594", "title": "Declare abstract class in c++", "body": "<p>In most cases, your abstract class contains abstract (\"pure virtual\" in C++ terms) methods:</p>\n\n<pre><code>class Foo {\npublic:\n    virtual ~Foo() = default;\n    virtual void bar() = 0;\n};\n</code></pre>\n\n<p>That is sufficient to make it an abstract class:</p>\n\n<pre><code>Foo foo; // gcc says: cannot declare variable 'foo' to be of abstract type 'Foo'\n</code></pre>\n\n<p>Note that you <strong>really</strong> want to declare the destructor as virtual in your base class, or you risk undefined behavior when destroying your derived object through a base class pointer.</p>\n\n<p>There also might be cases when you have <strong>no abstract methods</strong>, but still want to mark your class as abstract. There are two ways:</p>\n\n<p>a. Declare your base destructor as pure virtual:</p>\n\n<pre><code>class Foo {\npublic:\n    virtual ~Foo() = 0;\n    virtual void bar() { }\n};\n\nFoo::~Foo() = default; // need to define or linker error occurs\n</code></pre>\n\n<p>b. Declare all your base constructors as protected:</p>\n\n<pre><code>class Foo {\npublic:\n    virtual ~Foo() = default;\n    virtual void bar() { }\n\nprotected:\n    Foo() = default;\n};\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 7891338, "user_type": "registered", "profile_image": "https://graph.facebook.com/821704214643718/picture?type=large", "display_name": "Faceless", "link": "https://stackoverflow.com/users/7891338/faceless"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4724, "favorite_count": 0, "accepted_answer_id": 43502543, "answer_count": 3, "score": 4, "last_activity_date": 1548348450, "creation_date": 1492623242, "last_edit_date": 1492623598, "question_id": 43502488, "link": "https://stackoverflow.com/questions/43502488/declare-abstract-class-in-c", "title": "Declare abstract class in c++", "body": "<p>How do i declare abstract class?</p>\n\n<p>For example, I know it's using the keyword virtual like:</p>\n\n<pre><code>class test{\npublic:\nvirtual void test()=0;\n}\n</code></pre>\n\n<p>My question is can I abstract test class like this? If not why and how</p>\n\n<pre><code>virtual class test{\n}\n</code></pre>\n"}, {"tags": ["c++", "nvidia", "nvapi"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1492623593, "post_id": 43502348, "comment_id": 74059494, "body": "This question <a href=\"http://stackoverflow.com/questions/4176763/what-does-this-macro-do-successreturn-0-long\" title=\"what does this macro do successreturn 0 long\">stackoverflow.com/questions/4176763/&hellip;</a> suggests that <code>__success</code> is defined in <code>sal.h</code>. Try to include it. The same question suggests that <code>__success</code> doesn&#39;t change program behaviour, thus you could try to do <code>#define __success(...)</code> if you have problems with abovementioned header."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1492623624, "post_id": 43502348, "comment_id": 74059508, "body": "Try including &lt;windows.h&gt; 1st as the header file looks like it contains quite a few MS specific #defines."}, {"owner": {"reputation": 2888, "user_id": 295246, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9cd2f57961c042dbc58c575ee6c22510?s=128&d=identicon&r=PG", "display_name": "HEADLESS_0NE", "link": "https://stackoverflow.com/users/295246/headless-0ne"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1492627536, "post_id": 43502348, "comment_id": 74061923, "body": "@HolyBlackCat Tried both of your suggestions, including <code>sal.h</code> didn&#39;t change anything. Defining <code>__success(...)</code> somewhat helped but I am still getting compilation errors.  @RichardCritten I tried including <code>&lt;windows.h&gt;</code> first, but it didn&#39;t change anything, sadly."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1492629791, "post_id": 43502348, "comment_id": 74063232, "body": "What are those new errors?"}, {"owner": {"reputation": 2888, "user_id": 295246, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9cd2f57961c042dbc58c575ee6c22510?s=128&d=identicon&r=PG", "display_name": "HEADLESS_0NE", "link": "https://stackoverflow.com/users/295246/headless-0ne"}, "edited": false, "score": 0, "creation_date": 1492633925, "post_id": 43502348, "comment_id": 74065691, "body": "A bunch of compilation errors regarding other <code>__in</code>, <code>__inout</code>, <code>pDisplayIdCount</code>, and a few others not declared in this scope. It seems like the header files provided in the NVAPI SDK are not compatible with <code>g++</code>. Building a VS2010 solution using <code>CMake</code> seems to work...but I&#39;m still running into other issues."}, {"owner": {"reputation": 2888, "user_id": 295246, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9cd2f57961c042dbc58c575ee6c22510?s=128&d=identicon&r=PG", "display_name": "HEADLESS_0NE", "link": "https://stackoverflow.com/users/295246/headless-0ne"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1492692566, "post_id": 43502348, "comment_id": 74093177, "body": "@RichardCritten: It seems like your suggestion actually does resolve the problem I was having once I&#39;m using the Microsoft C/C++ compiler. Also, I found this related answer/question <a href=\"http://stackoverflow.com/questions/30030311/nvapi-nvapi-interface-missing-explicit-type\" title=\"nvapi nvapi interface missing explicit type\">stackoverflow.com/questions/30030311/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2888, "user_id": 295246, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9cd2f57961c042dbc58c575ee6c22510?s=128&d=identicon&r=PG", "display_name": "HEADLESS_0NE", "link": "https://stackoverflow.com/users/295246/headless-0ne"}, "is_accepted": false, "score": 1, "last_activity_date": 1492692194, "last_edit_date": 1492692194, "creation_date": 1492639611, "answer_id": 43506891, "question_id": 43502348, "link": "https://stackoverflow.com/questions/43502348/include-of-nvidias-nvapi-h-causes-compilation-errors/43506891#43506891", "title": "Include of Nvidia&#39;s nvapi.h causes compilation errors", "body": "<p>It seems like the header files provided in NVIDIA's API aren't compatible with <code>g++</code>/GCC compiler. So I opted to use Microsoft's C/C++ x64 compiler.\nI used <code>CMake</code> (v3.5.2) to create a Visual Studio 2010 solution, and that has been working fine after some fiddling with my <code>CMakeLists.txt</code> file.</p>\n\n<p>This is the content of my <code>CMakeLists.txt</code>:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.5)\ninclude_directories(3rdparty)\nlink_directories(3rdparty/amd64)\nadd_executable(nvapi_test nvapi_hello.cpp)\ntarget_link_libraries(nvapi_test nvapi64.lib)\n</code></pre>\n\n<p>And the <code>3rdparty</code> directory contains the <code>amd64</code> folder where <code>nvapi64.lib</code> is, as well as the NVAPI's <code>*.h</code> and <code>*.c</code> files.</p>\n\n<p>Also, as mentioned in the comments to my question (@RichardCritten), I had to add <code>#include &lt;Windows.h&gt;</code> at the top of my <code>.cpp</code> file for it to compile correctly.</p>\n"}, {"comments": [{"owner": {"reputation": 2888, "user_id": 295246, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9cd2f57961c042dbc58c575ee6c22510?s=128&d=identicon&r=PG", "display_name": "HEADLESS_0NE", "link": "https://stackoverflow.com/users/295246/headless-0ne"}, "edited": false, "score": 1, "creation_date": 1535114862, "post_id": 51980847, "comment_id": 90959128, "body": "I&#39;m happy someone followed up on this! Too bad I no longer work at the place where I was attempting to use this. Oh well :) I hope it will be useful to someone else! I wish this NVIDIA API was better documented though, seriously"}], "tags": [], "owner": {"reputation": 1770, "user_id": 2163727, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IGakU.jpg?s=128&g=1", "display_name": "MasterHD", "link": "https://stackoverflow.com/users/2163727/masterhd"}, "is_accepted": true, "score": 2, "last_activity_date": 1535097901, "last_edit_date": 1535097901, "creation_date": 1535010850, "answer_id": 51980847, "question_id": 43502348, "link": "https://stackoverflow.com/questions/43502348/include-of-nvidias-nvapi-h-causes-compilation-errors/51980847#51980847", "title": "Include of Nvidia&#39;s nvapi.h causes compilation errors", "body": "<p>I found an answer <a href=\"https://devtalk.nvidia.com/default/topic/735528/jetson-tk1/how-can-you-compile-nvapi-h-with-mingw-/\" rel=\"nofollow noreferrer\">here</a> that explains these variables are created with <code>#define</code> in the file <code>nvapi_lite_salstart.h</code> and then undefined using <code>#undef</code> in the file <code>nvapi_lite_salend.h</code> which is called at the start and end respectively in each of the header files, as listed here at the start of <code>nvapi.h</code>:</p>\n\n<pre><code>#include\"nvapi_lite_salstart.h\" //Remove this line\n#include\"nvapi_lite_common.h\"\n#include\"nvapi_lite_sli.h\"\n#include\"nvapi_lite_surround.h\"\n#include\"nvapi_lite_stereo.h\"\n#include\"nvapi_lite_d3dext.h\"\n#include\"nvapi_lite_salstart.h\" //Add this line to fix the errors\n</code></pre>\n\n<p>As you can see, it appears the \"salstart\" file just needs to be moved to the end of the list because for some reason it's incorrectly at the top. Not sure why this works properly in Visual Studio (it does without making the above modifications), but this at least it fixed those errors in MinGW; however, the precompiled library file provided by nVidia (either <code>nvapi.lib</code> or <code>nvapi64.lib</code>) is NOT compatible with MinGW, so you're forced to use MS Visual Studio.</p>\n"}], "owner": {"reputation": 2888, "user_id": 295246, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9cd2f57961c042dbc58c575ee6c22510?s=128&d=identicon&r=PG", "display_name": "HEADLESS_0NE", "link": "https://stackoverflow.com/users/295246/headless-0ne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1152, "favorite_count": 0, "accepted_answer_id": 51980847, "answer_count": 2, "score": 2, "last_activity_date": 1535097901, "creation_date": 1492622793, "question_id": 43502348, "link": "https://stackoverflow.com/questions/43502348/include-of-nvidias-nvapi-h-causes-compilation-errors", "title": "Include of Nvidia&#39;s nvapi.h causes compilation errors", "body": "<p>I'm trying to use the NVIDIA's <code>nvapi</code>, and I have compilation errors I don't fully understand. Perhaps I am using the wrong compiler? </p>\n\n<pre><code>#include \"nvapi.h\"\n#include &lt;iostream&gt;\n\nint main()\n{\n    printf(\"Hello nvapi!\");\n    return 0;\n}\n</code></pre>\n\n<p>Compilation:\n<code>g++ nvapi_hello.cpp</code></p>\n\n<p>Output (truncated because it was too long):</p>\n\n<pre><code>In file included from nvapi_lite_d3dext.h:35:0,\n                 from nvapi.h:6,\n                 from nvapi_hello.cpp:1:\nnvapi_lite_salstart.h:821:41: warning: '__success' initialized and declared 'extern'\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                         ^\nnvapi.h:99:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_Initialize();\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:42: error: expected primary-expression before 'return'\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                          ^\nnvapi.h:99:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_Initialize();\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:41: warning: '__success' initialized and declared 'extern'\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                         ^\nnvapi.h:134:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_Unload();\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:41: error: redefinition of 'int __success'\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                         ^\nnvapi.h:134:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_Unload();\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:32: note: 'int __success' previously defined here\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                ^\nnvapi.h:99:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_Initialize();\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:42: error: expected primary-expression before 'return'\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                          ^\nnvapi.h:134:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_Unload();\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:41: warning: '__success' initialized and declared 'extern'\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                         ^\nnvapi.h:153:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_GetErrorMessage(NvAPI_Status nr,NvAPI_ShortString szDesc);\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:41: error: redefinition of 'int __success'\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                         ^\nnvapi.h:153:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_GetErrorMessage(NvAPI_Status nr,NvAPI_ShortString szDesc);\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:32: note: 'int __success' previously defined here\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                ^\nnvapi.h:99:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_Initialize();\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:42: error: expected primary-expression before 'return'\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                          ^\nnvapi.h:153:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_GetErrorMessage(NvAPI_Status nr,NvAPI_ShortString szDesc);\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:41: warning: '__success' initialized and declared 'extern'\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                         ^\nnvapi.h:174:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_GetInterfaceVersionString(NvAPI_ShortString szDesc);\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:41: error: redefinition of 'int __success'\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                         ^\nnvapi.h:174:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_GetInterfaceVersionString(NvAPI_ShortString szDesc);\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:32: note: 'int __success' previously defined here\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                ^\nnvapi.h:99:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_Initialize();\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:42: error: expected primary-expression before 'return'\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                          ^\nnvapi.h:174:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_GetInterfaceVersionString(NvAPI_ShortString szDesc);\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:41: warning: '__success' initialized and declared 'extern'\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                         ^\nnvapi.h:319:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_GPU_GetEDID(NvPhysicalGpuHandle hPhysicalGpu, NvU32 displayOutputId, NV_EDID *pEDID);\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:41: error: redefinition of 'int __success'\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                         ^\nnvapi.h:319:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_GPU_GetEDID(NvPhysicalGpuHandle hPhysicalGpu, NvU32 displayOutputId, NV_EDID *pEDID);\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:32: note: 'int __success' previously defined here\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                ^\nnvapi.h:99:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_Initialize();\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:42: error: expected primary-expression before 'return'\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                          ^\nnvapi.h:319:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_GPU_GetEDID(NvPhysicalGpuHandle hPhysicalGpu, NvU32 displayOutputId, NV_EDID *pEDID);\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:41: warning: '__success' initialized and declared 'extern'\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                         ^\nnvapi.h:669:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_SetView(NvDisplayHandle hNvDisplay, NV_VIEW_TARGET_INFO *pTargetInfo, NV_TARGET_VIEW_MODE targetView);\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:41: error: redefinition of 'int __success'\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                         ^\nnvapi.h:669:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_SetView(NvDisplayHandle hNvDisplay, NV_VIEW_TARGET_INFO *pTargetInfo, NV_TARGET_VIEW_MODE targetView);\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:32: note: 'int __success' previously defined here\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                ^\nnvapi.h:99:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_Initialize();\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:42: error: expected primary-expression before 'return'\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                          ^\nnvapi.h:669:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_SetView(NvDisplayHandle hNvDisplay, NV_VIEW_TARGET_INFO *pTargetInfo, NV_TARGET_VIEW_MODE targetView);\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:41: warning: '__success' initialized and declared 'extern'\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                         ^\nnvapi.h:808:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_SetViewEx(NvDisplayHandle hNvDisplay, NV_DISPLAY_PATH_INFO *pPathInfo, NV_TARGET_VIEW_MODE displayView);\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:41: error: redefinition of 'int __success'\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                         ^\nnvapi.h:808:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_SetViewEx(NvDisplayHandle hNvDisplay, NV_DISPLAY_PATH_INFO *pPathInfo, NV_TARGET_VIEW_MODE displayView);\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:32: note: 'int __success' previously defined here\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                ^\nnvapi.h:99:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_Initialize();\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:42: error: expected primary-expression before 'return'\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                          ^\nnvapi.h:808:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_SetViewEx(NvDisplayHandle hNvDisplay, NV_DISPLAY_PATH_INFO *pPathInfo, NV_TARGET_VIEW_MODE displayView);\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:41: warning: '__success' initialized and declared 'extern'\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                         ^\nnvapi.h:1030:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_GetDisplayDriverVersion(NvDisplayHandle hNvDisplay, NV_DISPLAY_DRIVER_VERSION *pVersion);\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:41: error: redefinition of 'int __success'\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                         ^\nnvapi.h:1030:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_GetDisplayDriverVersion(NvDisplayHandle hNvDisplay, NV_DISPLAY_DRIVER_VERSION *pVersion);\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:32: note: 'int __success' previously defined here\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                ^\nnvapi.h:99:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_Initialize();\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:42: error: expected primary-expression before 'return'\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                          ^\nnvapi.h:1030:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_GetDisplayDriverVersion(NvDisplayHandle hNvDisplay, NV_DISPLAY_DRIVER_VERSION *pVersion);\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:41: warning: '__success' initialized and declared 'extern'\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                         ^\nnvapi.h:1159:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_OGL_ExpertModeSet(NvU32 expertDetailLevel,\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:41: error: redefinition of 'int __success'\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                         ^\nnvapi.h:1159:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_OGL_ExpertModeSet(NvU32 expertDetailLevel,\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:32: note: 'int __success' previously defined here\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                ^\nnvapi.h:99:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_Initialize();\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:42: error: expected primary-expression before 'return'\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                          ^\nnvapi.h:1159:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_OGL_ExpertModeSet(NvU32 expertDetailLevel,\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:41: warning: '__success' initialized and declared 'extern'\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                         ^\nnvapi.h:1167:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_OGL_ExpertModeGet(NvU32 *pExpertDetailLevel,\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:41: error: redefinition of 'int __success'\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                         ^\nnvapi.h:1167:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_OGL_ExpertModeGet(NvU32 *pExpertDetailLevel,\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:32: note: 'int __success' previously defined here\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                ^\nnvapi.h:99:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_Initialize();\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:42: error: expected primary-expression before 'return'\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                          ^\nnvapi.h:1167:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_OGL_ExpertModeGet(NvU32 *pExpertDetailLevel,\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:41: warning: '__success' initialized and declared 'extern'\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                         ^\nnvapi.h:1209:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_OGL_ExpertModeDefaultsSet(NvU32 expertDetailLevel,\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:41: error: redefinition of 'int __success'\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                         ^\nnvapi.h:1209:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_OGL_ExpertModeDefaultsSet(NvU32 expertDetailLevel,\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:32: note: 'int __success' previously defined here\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                ^\nnvapi.h:99:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_Initialize();\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:42: error: expected primary-expression before 'return'\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                          ^\nnvapi.h:1209:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_OGL_ExpertModeDefaultsSet(NvU32 expertDetailLevel,\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:41: warning: '__success' initialized and declared 'extern'\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                         ^\nnvapi.h:1216:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_OGL_ExpertModeDefaultsGet(NvU32 *pExpertDetailLevel,\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:41: error: redefinition of 'int __success'\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                         ^\nnvapi.h:1216:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_OGL_ExpertModeDefaultsGet(NvU32 *pExpertDetailLevel,\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:32: note: 'int __success' previously defined here\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                ^\nnvapi.h:99:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_Initialize();\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:42: error: expected primary-expression before 'return'\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                          ^\nnvapi.h:1216:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_OGL_ExpertModeDefaultsGet(NvU32 *pExpertDetailLevel,\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:41: warning: '__success' initialized and declared 'extern'\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                         ^\nnvapi.h:1251:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_EnumTCCPhysicalGPUs( NvPhysicalGpuHandle nvGPUHandle[NVAPI_MAX_PHYSICAL_GPUS], NvU32 *pGpuCount);\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:41: error: redefinition of 'int __success'\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                         ^\nnvapi.h:1251:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_EnumTCCPhysicalGPUs( NvPhysicalGpuHandle nvGPUHandle[NVAPI_MAX_PHYSICAL_GPUS], NvU32 *pGpuCount);\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:32: note: 'int __success' previously defined here\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                ^\nnvapi.h:99:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_Initialize();\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:42: error: expected primary-expression before 'return'\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                          ^\nnvapi.h:1251:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_EnumTCCPhysicalGPUs( NvPhysicalGpuHandle nvGPUHandle[NVAPI_MAX_PHYSICAL_GPUS], NvU32 *pGpuCount);\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:41: warning: '__success' initialized and declared 'extern'\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                         ^\nnvapi.h:1282:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_EnumLogicalGPUs(NvLogicalGpuHandle nvGPUHandle[NVAPI_MAX_LOGICAL_GPUS], NvU32 *pGpuCount);\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:41: error: redefinition of 'int __success'\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                         ^\nnvapi.h:1282:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_EnumLogicalGPUs(NvLogicalGpuHandle nvGPUHandle[NVAPI_MAX_LOGICAL_GPUS], NvU32 *pGpuCount);\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:32: note: 'int __success' previously defined here\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                ^\nnvapi.h:99:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_Initialize();\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:42: error: expected primary-expression before 'return'\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                          ^\nnvapi.h:1282:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_EnumLogicalGPUs(NvLogicalGpuHandle nvGPUHandle[NVAPI_MAX_LOGICAL_GPUS], NvU32 *pGpuCount);\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:41: warning: '__success' initialized and declared 'extern'\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                         ^\nnvapi.h:1308:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_GetPhysicalGPUsFromDisplay(NvDisplayHandle hNvDisp, NvPhysicalGpuHandle nvGPUHandle[NVAPI_MAX_PHYSICAL_GPUS], NvU32 *pGpuCount);\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:41: error: redefinition of 'int __success'\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                         ^\nnvapi.h:1308:1: note: in expansion of macro 'NVAPI_INTERFACE'\n NVAPI_INTERFACE NvAPI_GetPhysicalGPUsFromDisplay(NvDisplayHandle hNvDisp, NvPhysicalGpuHandle nvGPUHandle[NVAPI_MAX_PHYSICAL_GPUS], NvU32 *pGpuCount);\n ^~~~~~~~~~~~~~~\nnvapi_lite_salstart.h:821:32: note: 'int __success' previously defined here\n #define NVAPI_INTERFACE extern __success(return == NVAPI_OK) NvAPI_Status __cdecl\n                                ^\n ...\n</code></pre>\n\n<p>I installed mingw-w64 and I'm using <code>g++</code> version:</p>\n\n<pre><code>g++ (x86_64-posix-sjlj-rev2, Built by MinGW-W64 project) 6.3.0\nCopyright (C) 2016 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n</code></pre>\n\n<p>I've downloaded NVIDIA's NVAPI SDK from <a href=\"https://developer.nvidia.com/gameworksdownload#?search=nvapi\" rel=\"nofollow noreferrer\">https://developer.nvidia.com/gameworksdownload#?search=nvapi</a></p>\n"}, {"tags": ["c++", "qt", "qt5"], "answers": [{"comments": [{"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1492623753, "post_id": 43502477, "comment_id": 74059603, "body": "The case sensitivity issue wouldn&#39;t be a problem when using the <a href=\"https://wiki.qt.io/New_Signal_Slot_Syntax\" rel=\"nofollow noreferrer\">new signal slot syntax</a> since a compiler error would have been thrown."}, {"owner": {"reputation": 886, "user_id": 7179008, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh3.googleusercontent.com/-3J_iVpOejjY/AAAAAAAAAAI/AAAAAAAAAIU/zxbGBjr8bRw/photo.jpg?sz=128", "display_name": "Viktor", "link": "https://stackoverflow.com/users/7179008/viktor"}, "edited": false, "score": 0, "creation_date": 1492623813, "post_id": 43502477, "comment_id": 74059647, "body": "@Vladimir Bershov i made changes, but still not working"}], "tags": [], "owner": {"reputation": 2537, "user_id": 4149835, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh6.googleusercontent.com/-n_QVH3KiURQ/AAAAAAAAAAI/AAAAAAAAAFM/RomdbXIW1hU/photo.jpg?sz=128", "display_name": "Vladimir Bershov", "link": "https://stackoverflow.com/users/4149835/vladimir-bershov"}, "is_accepted": false, "score": 0, "last_activity_date": 1492623205, "creation_date": 1492623205, "answer_id": 43502477, "question_id": 43502297, "link": "https://stackoverflow.com/questions/43502297/qt-message-box-not-popus-on-button-click/43502477#43502477", "title": "QT message box not popus on button click", "body": "<p>Wrong connection. You should connect the <code>clicked()</code> signal to the <code>mainWindow</code>'s slot <code>popUp()</code>, because it is a member of the <code>MainWindow</code> class. And don't forget about case sensitivity of c++ (pop<strong>Up</strong>, not popup):</p>\n\n<pre><code>QObject::connect(btn, SIGNAL(clicked()), mainWindow, SLOT(popUp()));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 823, "user_id": 1850429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aeac2c1534ffc9cd94072b3196838b9?s=128&d=identicon&r=PG", "display_name": "Jeroen3", "link": "https://stackoverflow.com/users/1850429/jeroen3"}, "is_accepted": false, "score": 0, "last_activity_date": 1492624000, "creation_date": 1492624000, "answer_id": 43502720, "question_id": 43502297, "link": "https://stackoverflow.com/questions/43502297/qt-message-box-not-popus-on-button-click/43502720#43502720", "title": "QT message box not popus on button click", "body": "<p>You're connecting to a private slot from outside mainwindow.\nThe application output probably shows you a warning like this:</p>\n\n<blockquote>\n  <p>QObject::connect: No such slot QApplication::popup()</p>\n</blockquote>\n\n<p>Usually what you'd want to do is put stuff used inside mainwindow, inside mainwindow class.</p>\n\n<p>Eg: Create the layout inside the constructor.<br>\nYou can use the parent argument when creating the objects to get them destroyed when you're done with mainwindow.</p>\n\n<pre><code>MainWindow::MainWindow(QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::MainWindow)\n{\n    ui-&gt;setupUi(this);\n\n    QLabel *text = new QLabel(\"Some text\", this);\n    QPushButton *btn = new QPushButton(\"Click\", this);\n\n    QHBoxLayout *layout = new QHBoxLayout;\n\n    QObject::connect(btn, SIGNAL(clicked()), this, SLOT(popUp()));\n\n    ui-&gt;centralWidget-&gt;setLayout(layout);\n    this-&gt;show();\n}\n</code></pre>\n\n<p>You have to use <code>ui-&gt;centralWidget</code>, because that's how mainwindow works. The application output should have given you a warning for that as well. \nLike this:</p>\n\n<blockquote>\n  <p>QWidget::setLayout: Attempting to set QLayout \"\" on MainWindow \"MainWindow\", which already has a layout</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 886, "user_id": 7179008, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh3.googleusercontent.com/-3J_iVpOejjY/AAAAAAAAAAI/AAAAAAAAAIU/zxbGBjr8bRw/photo.jpg?sz=128", "display_name": "Viktor", "link": "https://stackoverflow.com/users/7179008/viktor"}, "edited": false, "score": 0, "creation_date": 1492624593, "post_id": 43502823, "comment_id": 74060121, "body": "gives me this error: mainwindow.cpp:11: error: &#39;class Ui::MainWindow&#39; has no member named &#39;btn&#39;      connect(ui-&gt;btn, SIGNAL(clicked()), SLOT(popUp()));                  ^"}, {"owner": {"reputation": 71, "user_id": 7695333, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-Iy72DQnMMbg/AAAAAAAAAAI/AAAAAAAAAKM/1I6nocLDoLM/photo.jpg?sz=128", "display_name": "EmLe49", "link": "https://stackoverflow.com/users/7695333/emle49"}, "reply_to_user": {"reputation": 886, "user_id": 7179008, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh3.googleusercontent.com/-3J_iVpOejjY/AAAAAAAAAAI/AAAAAAAAAIU/zxbGBjr8bRw/photo.jpg?sz=128", "display_name": "Viktor", "link": "https://stackoverflow.com/users/7179008/viktor"}, "edited": false, "score": 1, "creation_date": 1492669781, "post_id": 43502823, "comment_id": 74077460, "body": "have you created a PushButton graphic object named btn in the graphic view? If not you have to draw it"}, {"owner": {"reputation": 71, "user_id": 7695333, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-Iy72DQnMMbg/AAAAAAAAAAI/AAAAAAAAAKM/1I6nocLDoLM/photo.jpg?sz=128", "display_name": "EmLe49", "link": "https://stackoverflow.com/users/7695333/emle49"}, "reply_to_user": {"reputation": 886, "user_id": 7179008, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh3.googleusercontent.com/-3J_iVpOejjY/AAAAAAAAAAI/AAAAAAAAAIU/zxbGBjr8bRw/photo.jpg?sz=128", "display_name": "Viktor", "link": "https://stackoverflow.com/users/7179008/viktor"}, "edited": false, "score": 0, "creation_date": 1492670095, "post_id": 43502823, "comment_id": 74077629, "body": "you can create it opening the file mainwindow.ui (in Forms)  and here you can draw your objects"}], "tags": [], "owner": {"reputation": 71, "user_id": 7695333, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-Iy72DQnMMbg/AAAAAAAAAAI/AAAAAAAAAKM/1I6nocLDoLM/photo.jpg?sz=128", "display_name": "EmLe49", "link": "https://stackoverflow.com/users/7695333/emle49"}, "is_accepted": false, "score": 0, "last_activity_date": 1492624328, "creation_date": 1492624328, "answer_id": 43502823, "question_id": 43502297, "link": "https://stackoverflow.com/questions/43502297/qt-message-box-not-popus-on-button-click/43502823#43502823", "title": "QT message box not popus on button click", "body": "<p>Ok, you have to work on the file <code>mainwindow.cpp</code>. You have already create the slot, so connect it adding this code in MainWindow's constructor (if you don't know witch is the mw constructor it is the function where is written <code>ui-&gt;setupUi(this);</code>)</p>\n\n<pre><code>connect(ui-&gt;btn, SIGNAL(clicked()), SLOT(popUp()));\n</code></pre>\n\n<p>now in the slot <code>MainWindow::popUp();</code> put this code:</p>\n\n<pre><code>QMessageBox msgBox;\nmsgBox.setText(\"text to write\");\nmsgBox.exec();\n</code></pre>\n\n<p>remember to include <code>QMessageBox</code> <strong>in mainwindow.cpp</strong>, you shouldn't write code on main.cpp, it must be this:</p>\n\n<pre><code>#include \"mainwindow.h\"\n#include &lt;QApplication&gt;\n\n    int main(int argc, char *argv[])\n    {\n        QApplication a(argc, argv);\n        MainWindow w;\n        w.show();\n\n        return a.exec();\n    }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 886, "user_id": 7179008, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh3.googleusercontent.com/-3J_iVpOejjY/AAAAAAAAAAI/AAAAAAAAAIU/zxbGBjr8bRw/photo.jpg?sz=128", "display_name": "Viktor", "link": "https://stackoverflow.com/users/7179008/viktor"}, "edited": false, "score": 0, "creation_date": 1492626696, "post_id": 43503380, "comment_id": 74061411, "body": "what is centralWidget?? i&#39;m getting error with this widget:  mainwindow.cpp:19: error: invalid use of incomplete type &#39;class QLayout&#39;      ui-&gt;centralWidget-&gt;layout()-&gt;addWidget(btn);                                 ^"}, {"owner": {"reputation": 886, "user_id": 7179008, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh3.googleusercontent.com/-3J_iVpOejjY/AAAAAAAAAAI/AAAAAAAAAIU/zxbGBjr8bRw/photo.jpg?sz=128", "display_name": "Viktor", "link": "https://stackoverflow.com/users/7179008/viktor"}, "edited": false, "score": 0, "creation_date": 1492627421, "post_id": 43503380, "comment_id": 74061843, "body": "@thank you it worked! Can you please explain why in this line connect(btn, &amp;QPushButton::clicked, this, &amp;MainWindow::popUp);  we must use &amp;QPushButton::clicked and &amp;MainWindow::popUp, instead of connect(btn,SIGNAL(clicked()), this, SLOT(popUp()));"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 886, "user_id": 7179008, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh3.googleusercontent.com/-3J_iVpOejjY/AAAAAAAAAAI/AAAAAAAAAIU/zxbGBjr8bRw/photo.jpg?sz=128", "display_name": "Viktor", "link": "https://stackoverflow.com/users/7179008/viktor"}, "edited": false, "score": 2, "creation_date": 1492628669, "post_id": 43503380, "comment_id": 74062562, "body": "That is the new syntax that is recommended to use, for more information you can read: <a href=\"https://wiki.qt.io/New_Signal_Slot_Syntax\" rel=\"nofollow noreferrer\">wiki.qt.io/New_Signal_Slot_Syntax</a> , if my answer helps you please mark it as correct."}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 2, "last_activity_date": 1492626993, "last_edit_date": 1492626993, "creation_date": 1492626209, "answer_id": 43503380, "question_id": 43502297, "link": "https://stackoverflow.com/questions/43502297/qt-message-box-not-popus-on-button-click/43503380#43503380", "title": "QT message box not popus on button click", "body": "<p>I recommend that the graphical part implement it inside the class <code>MainWindow</code> since the member <code>ui</code> that is private handles the design.</p>\n\n<pre><code>#include &lt;QMessageBox&gt;\n#include &lt;QLabel&gt;\n#include &lt;QLayout&gt;\n#include &lt;QPushButton&gt;\n\nMainWindow::MainWindow(QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::MainWindow)\n{\n    ui-&gt;setupUi(this);\n\n    QLabel *text = new QLabel(\"Some text\");\n    QPushButton *btn = new QPushButton(\"Click\");\n\n    QHBoxLayout *layout = new QHBoxLayout;\n\n    layout-&gt;addWidget(btn);\n    layout-&gt;addWidget(text);\n\n    ui-&gt;centralWidget-&gt;setLayout(layout);\n\n    connect(btn, &amp;QPushButton::clicked, this, &amp;MainWindow::popUp);\n}\n</code></pre>\n\n<p>Do not make any changes to <code>main.cpp</code>, the code should look like this:</p>\n\n<pre><code>#include \"mainwindow.h\"\n#include &lt;QApplication&gt;\n\n\n\nint main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n    MainWindow w;\n\n    w.show();\n\n    return a.exec();\n}\n</code></pre>\n"}], "owner": {"reputation": 886, "user_id": 7179008, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh3.googleusercontent.com/-3J_iVpOejjY/AAAAAAAAAAI/AAAAAAAAAIU/zxbGBjr8bRw/photo.jpg?sz=128", "display_name": "Viktor", "link": "https://stackoverflow.com/users/7179008/viktor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1048, "favorite_count": 0, "accepted_answer_id": 43503380, "answer_count": 4, "score": 2, "last_activity_date": 1502167486, "creation_date": 1492622653, "last_edit_date": 1502167486, "question_id": 43502297, "link": "https://stackoverflow.com/questions/43502297/qt-message-box-not-popus-on-button-click", "title": "QT message box not popus on button click", "body": "<p>I just started learning QT and what i wanted to accomplish is to get popup message on buttons click.\nHere is how my file looks like:</p>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>#include \"mainwindow.h\"\n#include &lt;QApplication&gt;\n#include &lt;QDialog&gt;\n#include &lt;QLabel&gt;\n#include &lt;QMessageBox&gt;\n#include &lt;QPushButton&gt;\n#include &lt;QHBoxLayout&gt;\n#include &lt;QVBoxLayout&gt;\n#include &lt;QWidget&gt;\n\n\nint main(int argc, char *argv[])\n{\n    QApplication app(argc, argv);\n    MainWindow *mainWindow = new MainWindow();\n\n\n    QLabel *text = new QLabel(\"Some text\");\n    QPushButton *btn = new QPushButton(\"Click\");\n\n    QHBoxLayout *layout = new QHBoxLayout;\n\n    layout-&gt;addWidget(btn);\n    layout-&gt;addWidget(text);\n\n    QObject::connect(btn, SIGNAL(clicked()), &amp;app, SLOT(popup()));\n\n    mainWindow-&gt;setLayout(layout);\n    mainWindow-&gt;show();\n\n    return app.exec();\n}\n</code></pre>\n\n<p><strong>mainwindow.cpp</strong></p>\n\n<pre><code>#include \"mainwindow.h\"\n#include \"ui_mainwindow.h\"\n\nMainWindow::MainWindow(QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::MainWindow)\n{\n    ui-&gt;setupUi(this);\n}\n\nMainWindow::~MainWindow()\n{\n    delete ui;\n}\n\nvoid MainWindow::popUp()\n{\n    QMessageBox::information(this, \"New Box\", \"Message\");\n}\n</code></pre>\n\n<p><strong>mainwindow.h</strong></p>\n\n<pre><code>#ifndef MAINWINDOW_H\n#define MAINWINDOW_H\n\n#include &lt;QMainWindow&gt;\n#include &lt;QMessageBox&gt;\n\nnamespace Ui {\nclass MainWindow;\n}\n\nclass MainWindow : public QMainWindow\n{\n    Q_OBJECT\n\npublic:\n    explicit MainWindow(QWidget *parent = 0);\n    ~MainWindow();\n\n\nprivate slots:\n    void popUp();\n\nprivate:\n    Ui::MainWindow *ui;\n};\n\n#endif // MAINWINDOW_H\n</code></pre>\n\n<p>Can you please explain what i've done wrong or  maybe there is something missing in my code.</p>\n"}, {"tags": ["c++", "opencv", "parallel-processing", "mpi"], "comments": [{"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1492623217, "post_id": 43502254, "comment_id": 74059246, "body": "Please show the code that you have used converting to <code>int**</code> as well as the specific measurement results that you consider to be <i>slow</i>?"}, {"owner": {"reputation": 21, "user_id": 7891281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5cc8d002013e418e0b62ba63f210168?s=128&d=identicon&r=PG&f=1", "display_name": "RicUfa", "link": "https://stackoverflow.com/users/7891281/ricufa"}, "reply_to_user": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1492624710, "post_id": 43502254, "comment_id": 74060207, "body": "I&#39;ve post the code"}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1492625047, "post_id": 43502254, "comment_id": 74060435, "body": "I don&#39;t see any MPI or performance measurement results."}], "answers": [{"comments": [{"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1492638297, "post_id": 43506523, "comment_id": 74067931, "body": "I saw a related answer just the other day by @Miki (I think) but can&#39;t find it for the moment and it&#39;s late so I&#39;ll hunt again tomorrow and add a link if I can."}, {"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 1, "creation_date": 1492686333, "post_id": 43506523, "comment_id": 74088505, "body": "If the matrix is big, it will be cheaper to register an MPI structure datatype with several elements and use it to directly send both the descriptor and the data without the need to pack everything in a single array. On the receiver side, <code>MPI_Probe</code> and <code>MPI_Get_count</code> can be used to determine the size of the data and used to preallocate the matrix."}, {"owner": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "edited": false, "score": 1, "creation_date": 1492708599, "post_id": 43506523, "comment_id": 74105073, "body": "Here is a piece of code I wrote for a similar question <a href=\"http://stackoverflow.com/questions/28782951/segmentation-fault-while-using-mpi-and-opencv-together/28794709#28794709\" title=\"segmentation fault while using mpi and opencv together\">stackoverflow.com/questions/28782951/&hellip;</a> sending the size and the buffer pointed by <code>im.data</code> It might inspire you..."}], "tags": [], "owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "is_accepted": false, "score": 2, "last_activity_date": 1493825508, "last_edit_date": 1495540027, "creation_date": 1492637825, "answer_id": 43506523, "question_id": 43502254, "link": "https://stackoverflow.com/questions/43502254/what-is-an-optimal-way-to-send-opencv-mat-over-mpi/43506523#43506523", "title": "What is an optimal way to send OPENCV Mat over MPI", "body": "<p>Check the original <code>Mat</code> is contiguous first, and clone it if it isn't.</p>\n\n<p>Then just get the:</p>\n\n<ul>\n<li>rows</li>\n<li>columns</li>\n<li>type</li>\n<li>channels</li>\n</ul>\n\n<p>of the original <code>Mat</code> and save in that order, each as 4 bytes, at the start of a buffer. Then append the appropriate number of bytes from the original <code>Mat</code>'s <code>data</code> pointer and send the whole lot.</p>\n\n<p>Do the opposite at the receiving end... read the first four integers from the buffer and create a <code>Mat</code> of the corresponding size and load the remainder of the data into it.</p>\n\n<hr>\n\n<p>@Miki provides an excellent, related answer <a href=\"https://stackoverflow.com/a/35730601/2836621\">here</a> which demonstrates the details of most of the techniques suggested above - look specifically at <code>Mat2str()</code> and <code>str2Mat()</code>.</p>\n\n<p>I don't do much C++ or much MPI, I am sure anyone who uses MPI or C++ a lot could tighten it up, but the following works and works pretty fast too!</p>\n\n<pre><code>#include &lt;cstdlib&gt;\n#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;ctime&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;chrono&gt;\n#include &lt;thread&gt;\n#include &lt;opencv2/opencv.hpp&gt;\n#include \"opencv2/highgui/highgui.hpp\"\n#include \"mpi.h\"\n\nusing namespace std;\nusing namespace cv;\n\nconst int MAXBYTES=8*1024*1024;\nuchar buffer[MAXBYTES];\n\nvoid matsnd(const Mat&amp; m,int dest){\n      int rows  = m.rows;\n      int cols  = m.cols;\n      int type  = m.type();\n      int channels = m.channels();\n      memcpy(&amp;buffer[0 * sizeof(int)],(uchar*)&amp;rows,sizeof(int));\n      memcpy(&amp;buffer[1 * sizeof(int)],(uchar*)&amp;cols,sizeof(int));\n      memcpy(&amp;buffer[2 * sizeof(int)],(uchar*)&amp;type,sizeof(int));\n\n      // See note at end of answer about \"bytes\" variable below!!!\n      int bytespersample=1; // change if using shorts or floats\n      int bytes=m.rows*m.cols*channels*bytespersample;\ncout &lt;&lt; \"matsnd: rows=\" &lt;&lt; rows &lt;&lt; endl;\ncout &lt;&lt; \"matsnd: cols=\" &lt;&lt; cols &lt;&lt; endl;\ncout &lt;&lt; \"matsnd: type=\" &lt;&lt; type &lt;&lt; endl;\ncout &lt;&lt; \"matsnd: channels=\" &lt;&lt; channels &lt;&lt; endl;\ncout &lt;&lt; \"matsnd: bytes=\" &lt;&lt; bytes &lt;&lt; endl;\n\n      if(!m.isContinuous())\n      { \n         m = m.clone();\n      }\n      memcpy(&amp;buffer[3*sizeof(int)],m.data,bytes);\n      MPI_Send(&amp;buffer,bytes+3*sizeof(int),MPI_UNSIGNED_CHAR,dest,0,MPI_COMM_WORLD);\n}\n\nMat matrcv(int src){\n      MPI_Status status;\n      int count,rows,cols,type,channels;\n\n      MPI_Recv(&amp;buffer,sizeof(buffer),MPI_UNSIGNED_CHAR,src,0,MPI_COMM_WORLD,&amp;status);\n      MPI_Get_count(&amp;status,MPI_UNSIGNED_CHAR,&amp;count);\n      memcpy((uchar*)&amp;rows,&amp;buffer[0 * sizeof(int)], sizeof(int));\n      memcpy((uchar*)&amp;cols,&amp;buffer[1 * sizeof(int)], sizeof(int));\n      memcpy((uchar*)&amp;type,&amp;buffer[2 * sizeof(int)], sizeof(int));\n\ncout &lt;&lt; \"matrcv: Count=\" &lt;&lt; count &lt;&lt; endl;\ncout &lt;&lt; \"matrcv: rows=\" &lt;&lt; rows &lt;&lt; endl;\ncout &lt;&lt; \"matrcv: cols=\" &lt;&lt; cols &lt;&lt; endl;\ncout &lt;&lt; \"matrcv: type=\" &lt;&lt; type &lt;&lt; endl;\n\n      // Make the mat\n      Mat received= Mat(rows,cols,type,(uchar*)&amp;buffer[3*sizeof(int)]);\n      return received;\n}\n\nint main ( int argc, char *argv[] )\n{\n   // Initialise MPI\n   MPI::Init (argc,argv);\n\n   //  Get our rank\n   int id = MPI::COMM_WORLD.Get_rank();\n   if(id==0) \n   {\n      // MASTER - wait to receive image from slave and write to disk for checking\n      Mat received=matrcv(1);\n      imwrite(\"received.jpg\",received);\n   }else{\n      // Slave - read Mat from disk and send to master\n      Mat image=imread(\"image.jpg\",IMREAD_COLOR);\n      matsnd(image,0);\n   }\n\n   //  Terminate MPI\n   MPI::Finalize();\n}\n</code></pre>\n\n<p>I put a loop with 10,000 iterations around:</p>\n\n<ul>\n<li><code>matsnd()</code> in the slave, and</li>\n<li><code>matrcv()</code> in the Master</li>\n</ul>\n\n<p>and it took 1.9 seconds for the 10,000 iterations. I cannot compare as you didn't show any timings.</p>\n\n<p>All the <code>cout</code> statements that are hard-left justified are just debug stuff that can safely be removed.</p>\n\n<p><strong>Note:</strong></p>\n\n<p>Whilst I have used and tested the above, I have since learned that the calculation of the number of bytes I send may be incorrect in some circumstances (probably where there are alignment constraints). If you are interested, please check <a href=\"https://stackoverflow.com/a/26441073/2836621\">this answer</a>.</p>\n\n<p><strong>Keywords</strong>: MPI, MPI_Send, MPI_Recv, OpenCV, Mat, image</p>\n"}], "owner": {"reputation": 21, "user_id": 7891281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5cc8d002013e418e0b62ba63f210168?s=128&d=identicon&r=PG&f=1", "display_name": "RicUfa", "link": "https://stackoverflow.com/users/7891281/ricufa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1301, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1493825508, "creation_date": 1492622514, "last_edit_date": 1492624640, "question_id": 43502254, "link": "https://stackoverflow.com/questions/43502254/what-is-an-optimal-way-to-send-opencv-mat-over-mpi", "title": "What is an optimal way to send OPENCV Mat over MPI", "body": "<p>What is an optimal way to send OPENCV <code>Mat</code> over MPI? Now I have done it by convetring <code>Mat</code> to <code>int**</code> but this is a bit slow solution.</p>\n\n<pre><code>A = alloc2d(n , m);\nfor (int i = 0; i &lt; n ; ++i)\n    for (int j = 0; j &lt; m ; ++j)\n        A[i][j] = img.at&lt;uchar&gt;(i , j);\n\n/////////////////////////////////////\nint ** alloc2d(int rows, int cols) {\n    int * data = (int *)malloc(rows * cols * sizeof(int));\n    int ** arr = (int **)malloc(rows * sizeof(int *));\n    for (int i = 0; i &lt; rows; ++i)\n        arr[i] = &amp;(data[cols * i]);\n    return arr;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 682, "user_id": 7253878, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/52963dc20521e67ea382effca33592b6?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/7253878/matthew"}, "edited": false, "score": 0, "creation_date": 1492623111, "post_id": 43502184, "comment_id": 74059196, "body": "you have a comma which is probably the problem <code>col1, col2</code> which needs to be change to <code>col1 &gt;&gt; col2</code>"}, {"owner": {"reputation": 13028, "user_id": 1401351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/993d07ca1cd59dd11d96a896e7c804d0?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/1401351/peter"}, "edited": false, "score": 1, "creation_date": 1492623212, "post_id": 43502184, "comment_id": 74059243, "body": "You first <code>getline()</code> from the file and ignore the line, then continue reading into your other variables.  If you don&#39;t want your first line to disappear into your <code>line</code> variable, don&#39;t call <code>getline()</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1492623734, "creation_date": 1492623734, "answer_id": 43502639, "question_id": 43502184, "link": "https://stackoverflow.com/questions/43502184/unable-to-display-the-first-column/43502639#43502639", "title": "Unable to display the first column", "body": "<p>I recommend using <code>operator&gt;&gt;</code> to input your data:</p>\n\n<pre><code>double col1, col2, col3;\nchar comma;\nwhile (myFile &gt;&gt; col1)\n{\n  myFile &gt;&gt; comma;\n  myFile &gt;&gt; col2 &gt;&gt; comma;\n  myFile &gt;&gt; col3;\n  //...\n}\n</code></pre>\n\n<p>A better approach would be to model the input line with a structure:  </p>\n\n<pre><code>struct Record\n{\n  double value1;\n  double value2;\n  double value3;\n  friend std::istream&amp; operator&gt;&gt;(std::istream&amp; input, Record&amp; r);\n};\n\nstd::istream&amp; operator&gt;&gt;(std::istream&amp; input, Record&amp; r)\n{\n  char comma;\n  input &gt;&gt; r.value1 &gt;&gt; comma;\n  input &gt;&gt; r.value2 &gt;&gt; comma;\n  input &gt;&gt; r.value3;\n  return input;\n}\n</code></pre>\n\n<p>The above code allows you to read in a file like this:</p>\n\n<pre><code>std::vector&lt;Record&gt; database;\nRecord r;\nwhile (myFile &gt;&gt; r)\n{\n  database.push_back(r);\n}\n</code></pre>\n\n<p>The code fragment to read in the file doesn't depend on the format of the data and can be used to read in other formats.  The structure <code>Record</code> determines how the data is input.</p>\n"}, {"tags": [], "owner": {"reputation": 2191, "user_id": 7070965, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qEhQf.png?s=128&g=1", "display_name": "dtell", "link": "https://stackoverflow.com/users/7070965/dtell"}, "is_accepted": false, "score": 0, "last_activity_date": 1492624274, "creation_date": 1492624274, "answer_id": 43502805, "question_id": 43502184, "link": "https://stackoverflow.com/questions/43502184/unable-to-display-the-first-column/43502805#43502805", "title": "Unable to display the first column", "body": "<p><strong>Getline() and >></strong></p>\n\n<p>The problem is you use <code>getline()</code> to check your input and try do read from your stream using <code>&gt;&gt;</code> afterwards. This does not work as intended.</p>\n\n<p>Imagine it some kind of cursor in your stream. There are member functions of <code>std::fstream</code> that move this cursor, others don't. </p>\n\n<p>You move this cursor forward by using <code>getline()</code>. When you use <code>&gt;&gt;</code> the cursor has already passed the position you want to get.</p>\n\n<p>There are some workarounds for this. The most easy one is</p>\n\n<pre><code>int main(){\n    std::ifstream myFile(\"a.txt\");\n    std::string line;\n    std::string col1, col2, col3;\n    while(myFile &gt;&gt; col1 &gt;&gt; col2 &gt;&gt; col3){\n        std::cout &lt;&lt; col1 &lt;&lt; \" \" &lt;&lt; col2 &lt;&lt; \" \" &lt;&lt; col3 &lt;&lt; std::endl;\n    }\nreturn EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>another one using stringstreams is</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;algorithm&gt;\n#include &lt;iterator&gt;\n\nint main(){\n    std::ifstream myFile(\"a.txt\");\n    std::string line;\n    while(std::getline(myFile, line)){\n        std::string col1, col2, col3;\n        std::istringstream stream(line);\n        copy(std::istream_iterator&lt;std::string&gt;(stream),\n        std::istream_iterator&lt;std::string&gt;(),\n        std::ostream_iterator&lt;std::string&gt;(std::cout, \" \"));\n        std::cout &lt;&lt; std::endl;\n    }\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p><strong>Bad use of comma operator</strong></p>\n\n<p>The following line could also cause problems</p>\n\n<pre><code>myFile &gt;&gt; col1, col2 &gt;&gt; col3;\n</code></pre>\n\n<p>My compiler <code>Apple LLVM version 8.1.0 (clang-802.0.38)</code> doesn't even allow this. (Reproduced <a href=\"https://ideone.com/2eWd8l\" rel=\"nofollow noreferrer\">here</a>) So I suppose you want to use the comma operator <code>,</code> like this</p>\n\n<pre><code> myFile &gt;&gt; (col1, col2) &gt;&gt; col3;\n</code></pre>\n\n<p>The comma operator does the following: If you got <code>expression1,expression2</code> <code>expression1</code> get evaluated, then <code>expression2</code> gets evaluated and the result of <code>expression2</code> is returned as the result of the whole expression <code>expression1,expression2</code>.</p>\n\n<p>Let's check how <code>&gt;&gt;</code> and <code>,</code> work together. <a href=\"http://de.cppreference.com/w/cpp/language/operator_precedence\" rel=\"nofollow noreferrer\">Here</a> you can see that <code>&gt;&gt;</code> binds stronger than <code>,</code> (actually <code>,</code> has the weakest precedence of all C++ operators). </p>\n\n<p>That means </p>\n\n<pre><code>myFile &gt;&gt; (col1, col2) &gt;&gt; col3;\n          ^^^^^^^^^^^^\n          result is col2\n</code></pre>\n\n<p>has the same effect as </p>\n\n<pre><code>myFile &gt;&gt; col2 &gt;&gt; col3;\n</code></pre>\n\n<p>and <code>col1</code> is therefore unused. My compiler (using <code>-Wall -Wpedantic</code>) gives the warning </p>\n\n<blockquote>\n  <p>expression result unused [-Wunused-value]</p>\n</blockquote>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7891252"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1492636632, "creation_date": 1492622303, "last_edit_date": 1492636632, "question_id": 43502184, "link": "https://stackoverflow.com/questions/43502184/unable-to-display-the-first-column", "title": "Unable to display the first column", "body": "<p>Hello I just get some data from a file but it is very weird becuase I can't get the first column of the text file. This is my text file :</p>\n\n<pre><code>1.2 2.6 3.5\n1.02 3.05 4.65\n7.15 0.54 9.26 \n</code></pre>\n\n<p>Here is my code :</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\nint main() {\n  std::ifstream myFile(\"a.txt\");\n  std::string line;\n\n  while(std::getline(myFile, line)) {\n    std::string col1, col2, col3;\n    myFile &gt;&gt; col1, col2 &gt;&gt; col3;\n    std::cout &lt;&lt; col1 &lt;&lt; \" \" &lt;&lt; col2 &lt;&lt; \" \" &lt;&lt; col3 &lt;&lt; std::endl;\n  }\n\n  return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>So I don't understand why I can't see in the terminal when I execute the program :</p>\n\n<pre><code>1.2 2.6 3.5\n1.02 3.05 4.65\n7.15 0.54 9.26 \n</code></pre>\n\n<p>Instead I see this :</p>\n\n<pre><code>1.02 3.05 4.65\n7.15 0.54 9.26 \n</code></pre>\n\n<p>Thank you a lot !</p>\n"}, {"tags": ["c++", "sockets", "tcp"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492621686, "post_id": 43501964, "comment_id": 74058337, "body": "Don&#39;t spam tags! This is not C. C is not C++ is not C!"}, {"owner": {"reputation": 147, "user_id": 7353781, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aa2c61afecf981318131a88eb99f6765?s=128&d=identicon&r=PG&f=1", "display_name": "user7353781", "link": "https://stackoverflow.com/users/7353781/user7353781"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492621732, "post_id": 43501964, "comment_id": 74058362, "body": "@Olaf I know, but the socket library is C code, right?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1492621771, "post_id": 43501964, "comment_id": 74058393, "body": "@user7353781 The language of the socket library is irrelevant to your question."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1492621842, "post_id": 43501964, "comment_id": 74058440, "body": "If the client sends messages faster than the server reads them, the client will eventually block until the server catches up. Are you sure the server is reading the messages?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492621843, "post_id": 43501964, "comment_id": 74058441, "body": "As is almost every library you use at some level. Do you think the C tag should be added for <b>every</b> question?"}, {"owner": {"reputation": 147, "user_id": 7353781, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aa2c61afecf981318131a88eb99f6765?s=128&d=identicon&r=PG&f=1", "display_name": "user7353781", "link": "https://stackoverflow.com/users/7353781/user7353781"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1492621960, "post_id": 43501964, "comment_id": 74058516, "body": "@Barmar Yes, the server prints all the messages and I have the same problem with a greater send interval."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1492622134, "post_id": 43501964, "comment_id": 74058623, "body": "You say that the number of requests depends on the length. Is <code>num*length</code> about the same each time? What is that value?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1492622179, "post_id": 43501964, "comment_id": 74058654, "body": "I don&#39;t see anything obviously wrong in the code, you don&#39;t have to do anything special to use <code>send()</code>."}, {"owner": {"reputation": 147, "user_id": 7353781, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aa2c61afecf981318131a88eb99f6765?s=128&d=identicon&r=PG&f=1", "display_name": "user7353781", "link": "https://stackoverflow.com/users/7353781/user7353781"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492622198, "post_id": 43501964, "comment_id": 74058669, "body": "@Olaf, no I&#39;m sorry, but you changed it. Could you please remove your downvote? I&#39;m just a beginner and it&#39;s really frustrating when questions get downvoted because of these things. In this way, people will probably not even see my question. Thanks for improving my question though."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1492622199, "post_id": 43501964, "comment_id": 74058671, "body": "Does <code>ConnectToServer()</code> set any socket options?"}, {"owner": {"reputation": 147, "user_id": 7353781, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aa2c61afecf981318131a88eb99f6765?s=128&d=identicon&r=PG&f=1", "display_name": "user7353781", "link": "https://stackoverflow.com/users/7353781/user7353781"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1492622323, "post_id": 43501964, "comment_id": 74058759, "body": "@Barmar Nope, <code>ConnectToServer()</code> doesn&#39;t set any socket options. This is the code of <code>ConnectToServer()</code>: <a href=\"https://pastebin.com/Ki29xpY9\" rel=\"nofollow noreferrer\">pastebin.com/Ki29xpY9</a>"}, {"owner": {"reputation": 147, "user_id": 7353781, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aa2c61afecf981318131a88eb99f6765?s=128&d=identicon&r=PG&f=1", "display_name": "user7353781", "link": "https://stackoverflow.com/users/7353781/user7353781"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1492623369, "post_id": 43501964, "comment_id": 74059341, "body": "@Barmar I don&#39;t see a connection between <code>sendInterval</code>, <code>num</code> and <code>length</code>. Here are my test results: <a href=\"https://pastebin.com/RFBP8dXt\" rel=\"nofollow noreferrer\">pastebin.com/RFBP8dXt</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492629235, "post_id": 43501964, "comment_id": 74062897, "body": "@user7353781: 1) ssuming a commenter is also a downvoter is a bad assumption. 2) I don&#39;t downvote for wrong tags. At least if the OP accepts the removal like you do. (Starting a rollback war about tags could change my mind, though). 3) Your question has other issues."}, {"owner": {"reputation": 147, "user_id": 7353781, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aa2c61afecf981318131a88eb99f6765?s=128&d=identicon&r=PG&f=1", "display_name": "user7353781", "link": "https://stackoverflow.com/users/7353781/user7353781"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1492629719, "post_id": 43501964, "comment_id": 74063184, "body": "@Olaf My question had only 3 views, 1 downvote and you edited my question, so I assumed you were the downvoter. My apologies if you weren&#39;t the downvoter. Does my question still have that other issues you&#39;re talking about? If so, what issues do you mean?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1492630866, "post_id": 43501964, "comment_id": 74063907, "body": "From the <a href=\"https://nodejs.org/api/stream.html\" rel=\"nofollow noreferrer\">NodeJS documentation</a>: &quot;<i>Attaching a listener for the &#39;data&#39; event, ... will switch <code>readable._readableState.flowing</code> to true, causing the Readable to begin actively emitting events as data is generated... receiving &quot;back pressure&quot; will cause the <code>readable._readableState.flowing</code> to be set as false, <b>temporarily halting the flowing of events</b> but not halting the generation of data... While <code>readable._readableState.flowing</code> is false, <b>data may be accumulating within the streams internal buffer</b>.</i>&quot;"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1492630883, "post_id": 43501964, "comment_id": 74063923, "body": "Perhaps your server is experiencing <a href=\"http://engineering.voxer.com/2013/09/16/backpressure-in-nodejs/\" rel=\"nofollow noreferrer\">&quot;back pressure&quot;</a>, thus cutting off your <code>onData</code> event handler?"}, {"owner": {"reputation": 2237, "user_id": 1219722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f308a0947ea106f91b5ba413cd9c04c?s=128&d=identicon&r=PG", "display_name": "Dmitry Rubanovich", "link": "https://stackoverflow.com/users/1219722/dmitry-rubanovich"}, "edited": false, "score": 0, "creation_date": 1492632540, "post_id": 43501964, "comment_id": 74064921, "body": "Can you, please, attach the output generated by the <code>iprintf(&quot;req(%d): %d\\n&quot;, nMsgSent, sendResult);</code> statement in the client?  It may help to understand what&#39;s going on."}, {"owner": {"reputation": 147, "user_id": 7353781, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aa2c61afecf981318131a88eb99f6765?s=128&d=identicon&r=PG&f=1", "display_name": "user7353781", "link": "https://stackoverflow.com/users/7353781/user7353781"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1492695240, "post_id": 43501964, "comment_id": 74095444, "body": "@RemyLebeau I don&#39;t think so. I can send the same data to the server with a send interval of 100ms without problems, but when I send that data to the server with a send interval of 2000ms with my C++ client, I get this problem."}], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 7353781, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aa2c61afecf981318131a88eb99f6765?s=128&d=identicon&r=PG&f=1", "display_name": "user7353781", "link": "https://stackoverflow.com/users/7353781/user7353781"}, "edited": false, "score": 0, "creation_date": 1492695389, "post_id": 43507557, "comment_id": 74095576, "body": "This doesn&#39;t work :( The <code>send()</code> doesn&#39;t return any errors (I log the result of <code>send()</code> and everything seems fine). I can&#39;t use multithreading, because my target doesn&#39;t support that. I tried to use <code>FD_SET</code> and <code>select</code>, but that doesn&#39;t work."}, {"owner": {"reputation": 866, "user_id": 7607594, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OyzH_J0Nigs/AAAAAAAAAAI/AAAAAAAAAFg/tWm2BVaSBwY/photo.jpg?sz=128", "display_name": "Jorge Omar Medra", "link": "https://stackoverflow.com/users/7607594/jorge-omar-medra"}, "reply_to_user": {"reputation": 147, "user_id": 7353781, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aa2c61afecf981318131a88eb99f6765?s=128&d=identicon&r=PG&f=1", "display_name": "user7353781", "link": "https://stackoverflow.com/users/7353781/user7353781"}, "edited": false, "score": 0, "creation_date": 1492700195, "post_id": 43507557, "comment_id": 74099564, "body": "@user7353781  Can you change the protocol? If you can you should implement an ANK Message to sinchronize  each transmition and its reception. But i don&#39;t know if you can do it in your program."}, {"owner": {"reputation": 147, "user_id": 7353781, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aa2c61afecf981318131a88eb99f6765?s=128&d=identicon&r=PG&f=1", "display_name": "user7353781", "link": "https://stackoverflow.com/users/7353781/user7353781"}, "edited": false, "score": 0, "creation_date": 1492784349, "post_id": 43507557, "comment_id": 74142161, "body": "No, I want to use tcp."}, {"owner": {"reputation": 147, "user_id": 7353781, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aa2c61afecf981318131a88eb99f6765?s=128&d=identicon&r=PG&f=1", "display_name": "user7353781", "link": "https://stackoverflow.com/users/7353781/user7353781"}, "edited": false, "score": 0, "creation_date": 1492950000, "post_id": 43507557, "comment_id": 74191689, "body": "The code of my server has already been included in my question, but the problem lies with the c++ client, because the nodejs client works perfectly with my server."}, {"owner": {"reputation": 866, "user_id": 7607594, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OyzH_J0Nigs/AAAAAAAAAAI/AAAAAAAAAFg/tWm2BVaSBwY/photo.jpg?sz=128", "display_name": "Jorge Omar Medra", "link": "https://stackoverflow.com/users/7607594/jorge-omar-medra"}, "reply_to_user": {"reputation": 147, "user_id": 7353781, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aa2c61afecf981318131a88eb99f6765?s=128&d=identicon&r=PG&f=1", "display_name": "user7353781", "link": "https://stackoverflow.com/users/7353781/user7353781"}, "edited": false, "score": 0, "creation_date": 1493061232, "post_id": 43507557, "comment_id": 74242026, "body": "@user7353781, a added a sample of how you can use Nonblocking socket and <code>select</code>in your code."}, {"owner": {"reputation": 147, "user_id": 7353781, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aa2c61afecf981318131a88eb99f6765?s=128&d=identicon&r=PG&f=1", "display_name": "user7353781", "link": "https://stackoverflow.com/users/7353781/user7353781"}, "edited": false, "score": 0, "creation_date": 1493403852, "post_id": 43507557, "comment_id": 74419338, "body": "2 questions: Can I use <code>ioctl()</code> instead of <code>ioctlsocket()</code>? <code>ioctlsocket()</code> is not available at my target system. Also, where comes <code>max_sd</code> from? Is it a constant maybe? It&#39;s not available at my target system.  And I might be wrong, but it seems like you&#39;re using Windows sockets, but my target system runs Linux."}, {"owner": {"reputation": 866, "user_id": 7607594, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OyzH_J0Nigs/AAAAAAAAAAI/AAAAAAAAAFg/tWm2BVaSBwY/photo.jpg?sz=128", "display_name": "Jorge Omar Medra", "link": "https://stackoverflow.com/users/7607594/jorge-omar-medra"}, "reply_to_user": {"reputation": 147, "user_id": 7353781, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aa2c61afecf981318131a88eb99f6765?s=128&d=identicon&r=PG&f=1", "display_name": "user7353781", "link": "https://stackoverflow.com/users/7353781/user7353781"}, "edited": false, "score": 0, "creation_date": 1493403942, "post_id": 43507557, "comment_id": 74419381, "body": "For Linux you should use <code>fcntl </code>."}, {"owner": {"reputation": 147, "user_id": 7353781, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aa2c61afecf981318131a88eb99f6765?s=128&d=identicon&r=PG&f=1", "display_name": "user7353781", "link": "https://stackoverflow.com/users/7353781/user7353781"}, "edited": false, "score": 0, "creation_date": 1493403942, "post_id": 43507557, "comment_id": 74419382, "body": "Using your example with <code>ioctl()</code> instead of <code>ioctlsocket()</code> and &#39;1&#39; instead of <code>max_sd</code> doesn&#39;t work btw."}, {"owner": {"reputation": 866, "user_id": 7607594, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OyzH_J0Nigs/AAAAAAAAAAI/AAAAAAAAAFg/tWm2BVaSBwY/photo.jpg?sz=128", "display_name": "Jorge Omar Medra", "link": "https://stackoverflow.com/users/7607594/jorge-omar-medra"}, "reply_to_user": {"reputation": 147, "user_id": 7353781, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aa2c61afecf981318131a88eb99f6765?s=128&d=identicon&r=PG&f=1", "display_name": "user7353781", "link": "https://stackoverflow.com/users/7353781/user7353781"}, "edited": false, "score": 0, "creation_date": 1493404068, "post_id": 43507557, "comment_id": 74419453, "body": "use something like this: <code>int flags = fcntl(socketTx,F_GETFL);</code> \t<code>flags = (flags &amp; ~O_NONBLOCK);</code> <code>nRet = fcntl(socketTx,F_SETFL,flags);</code>"}, {"owner": {"reputation": 147, "user_id": 7353781, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aa2c61afecf981318131a88eb99f6765?s=128&d=identicon&r=PG&f=1", "display_name": "user7353781", "link": "https://stackoverflow.com/users/7353781/user7353781"}, "edited": false, "score": 0, "creation_date": 1493404870, "post_id": 43507557, "comment_id": 74419869, "body": "Still doesn&#39;t work :( Also, it doesn&#39;t throw any errors."}, {"owner": {"reputation": 866, "user_id": 7607594, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OyzH_J0Nigs/AAAAAAAAAAI/AAAAAAAAAFg/tWm2BVaSBwY/photo.jpg?sz=128", "display_name": "Jorge Omar Medra", "link": "https://stackoverflow.com/users/7607594/jorge-omar-medra"}, "reply_to_user": {"reputation": 147, "user_id": 7353781, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aa2c61afecf981318131a88eb99f6765?s=128&d=identicon&r=PG&f=1", "display_name": "user7353781", "link": "https://stackoverflow.com/users/7353781/user7353781"}, "edited": false, "score": 0, "creation_date": 1493850326, "post_id": 43507557, "comment_id": 74583351, "body": "Add these options at your socket, after it is connected: To set the TimeOut to Send (<code>SO_SNDTIMEO</code>), to Set the Transmiton Buffer size (SO_SNDBUF). This could hep you to raise an error in your program. Also i considere use another options, check this link: <a href=\"http://man7.org/linux/man-pages/man7/socket.7.html\" rel=\"nofollow noreferrer\">man7.org/linux/man-pages/man7/socket.7.html</a>. A sample to add this options is: <code>int tout = 2000; </code> <code>setsockopt(socketTx,SOL_SOCKET,SO_RCVTIMEO, (const char*)&amp;tout,sizeof(int));</code>."}], "tags": [], "owner": {"reputation": 866, "user_id": 7607594, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OyzH_J0Nigs/AAAAAAAAAAI/AAAAAAAAAFg/tWm2BVaSBwY/photo.jpg?sz=128", "display_name": "Jorge Omar Medra", "link": "https://stackoverflow.com/users/7607594/jorge-omar-medra"}, "is_accepted": false, "score": 0, "last_activity_date": 1493061182, "last_edit_date": 1592644375, "creation_date": 1492643468, "answer_id": 43507557, "question_id": 43501964, "link": "https://stackoverflow.com/questions/43501964/socket-send-hangs-after-sending-certain-amount-of-bytes/43507557#43507557", "title": "socket send() hangs after sending certain amount of bytes", "body": "<p>As i can see there are some issues that you should attend:</p>\n<ol>\n<li>You are trying to send many message into the while of the client's\ncode, but you are not checking if there is an error, using the\nvariable <code>sendResult </code>. It should be checked before send another\nmessage.</li>\n<li>You are using the same thread to send data and check for the interval which has an infinity loop to send each message, it consume a lot of CPU. I suggest to create a thread (<em>TSync</em>) to attend the interval with <code>sleep</code> or <code>std::chrono</code>  and invoke a method which send the message by socket, but not in the same thread <em>TSync</em> because you will block socket with sleeps.</li>\n<li>Finally, you should use <code>FD_SET</code> and <code>select</code>to check when you can send data by sockets, when the socket is ready to send more bytes.</li>\n</ol>\n<p><strong>It is probably that the way you are sending message without control is afecting the TX channel because it is getting fulled</strong> so you should control the output operation with <code>FD_SET</code> and <code>select</code> to get synchronized with the socket. In the case of write, <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms740141(v=vs.85).aspx\" rel=\"nofollow noreferrer\">Microsoft documentation</a> says:</p>\n<blockquote>\n<p>The select function is used to determine the status of one or more sockets. For each socket, the caller can request information on read, write, or error status.</p>\n<p><strong>writefds</strong>: Data can be sent.</p>\n</blockquote>\n<p><strong>UPDATED, April 21th</strong>: I suggest you share more information about your problem, like the code and configuration of your server to know if there is some time out configured or buffer size. The information that you are supplied is not enough and don't understimated the request that us make you, like this comment:</p>\n<blockquote>\n<p>I don't really think this is necessary, but here is the code of connectToServer():</p>\n</blockquote>\n<p>The connection process is important because we can see if the socket server has some options setted.</p>\n<p>In this case all information that you shared us could be helpful instead of assume that is not important.</p>\n<p>So, at this moment, that is all that i can help you.</p>\n<p><strong>UPDATE April 24th</strong>: Try these steps to control the socket transmition and setting a <strong>NON-Blocing</strong> socket:</p>\n<ul>\n<li><p>After you get a successful connection, in the client, set the socket as NON-BLOCKING.</p>\n</li>\n<li><p>Use in your loop File Descriptor (<code>FD_SET</code>) and <code>select</code> to check when the socket is ready to write.</p>\n</li>\n</ul>\n<p>Your code should has a code as follow:</p>\n<pre><code>void ConnectToServer()\n{\n    //... your code\n\n    int connectResult = ::connect(sock, (struct sockaddr *)&amp;server, sizeof(server));\n    if (connectResult &gt;= 0)\n    {\n        u_long iMode = 1;\n        int iResult = ioctlsocket(sock, FIONBIO, &amp;iMode); //Set the socket Non-Blocking\n\n        printf(&quot;Connected to server!\\n&quot;);\n    }\n    else\n    {\n        printf(&quot;Not connected to server. Err: %d\\n&quot;, connectResult);\n    }\n}\n\nint main(){\n    Connect(); //function to connect with a WiFi network\n    ConnectToServer();\n\n    unsigned long lastSendTime = 0;\n    unsigned long sendInterval = 200; //send a message every 200 milliseconds\n    unsigned int nMsgSent = 0;\n\n\n    fd_set write_fd;\n\n    while (1){\n        unsigned long now = milliseconds(); //function to get the time in milliseconds\n        if ((now - lastSendTime) &gt; sendInterval){\n            std::string request = &quot;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890&quot;;\n            request += request;\n            request += std::to_string(nMsgSent);\n            request += &quot;\\n&quot;;\n\n            FD_ZERO(&amp;write_fd); //Reset the File Descriptor\n            FD_SET(sock, &amp;write_fd); //Set se File descriptor to the socket.\n\n            int result = select(max_sd, NULL, &amp;write_fd, NULL, NULL);   //Wait until the socket is ready to write\n\n            if (result &lt; 0)\n            {\n                iprintf(&quot;There was a problem with the sockets reading.\\n&quot;);\n                FD_ZERO(&amp;write_fd);\n            }\n\n            int sendResult = ::send(sock, request.c_str(), request.length(), 0);\n            iprintf(&quot;req(%d): %d\\n&quot;, nMsgSent, sendResult);\n\n            nMsgSent++;\n            lastSendTime = now;\n        }\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 7353781, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aa2c61afecf981318131a88eb99f6765?s=128&d=identicon&r=PG&f=1", "display_name": "user7353781", "link": "https://stackoverflow.com/users/7353781/user7353781"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2347, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493061182, "creation_date": 1492621612, "last_edit_date": 1492696968, "question_id": 43501964, "link": "https://stackoverflow.com/questions/43501964/socket-send-hangs-after-sending-certain-amount-of-bytes", "title": "socket send() hangs after sending certain amount of bytes", "body": "<p>I want to send a string to my nodejs TCP server.</p>\n\n<p>This is the code for my client (C++):</p>\n\n<pre><code>#include &lt;nds.h&gt;\n#include &lt;dswifi9.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;string&gt;\n\nstd::string hostname = \"hostname\";\nint port = 61733;\nint sock;\n\nint main(){\n    Connect(); //function to connect with a WiFi network\n    ConnectToServer();\n\n    unsigned long lastSendTime = 0;\n    unsigned long sendInterval = 200; //send a message every 200 milliseconds\n    unsigned int nMsgSent = 0;\n\n    while (1){\n        unsigned long now = milliseconds(); //function to get the time in milliseconds\n        if ((now - lastSendTime) &gt; sendInterval){\n            std::string request = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890\";\n            request += request;\n            request += std::to_string(nMsgSent);\n            request += \"\\n\";\n\n            int sendResult = ::send(sock, request.c_str(), request.length(), 0);\n            iprintf(\"req(%d): %d\\n\", nMsgSent, sendResult);\n\n            nMsgSent++;\n            lastSendTime = now;\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>This is my server code (JS):</p>\n\n<pre><code>var net = require('net');\n\nvar tcpServer = net.createServer();  \nvar tcpPort = 61733;\n\ntcpServer.on('connection', onConnection);\n\nfunction onConnection(conn){  \n  var remoteAddress = conn.remoteAddress + ':' + conn.remotePort;\n  console.log('New client connection from: %s', remoteAddress);\n\n  conn.on('data', onData);\n  conn.once('close', onClose);\n  conn.on('error', onError);\n\n  function onData(data){\n    console.log('connection data from %s: %s', remoteAddress, data);\n  }\n\n  function onClose(){\n    console.log('connection from %s closed', remoteAddress);\n  }\n\n  function onError(err){\n    console.log('Connection %s error: %s', remoteAddress, err.message);\n  }\n}\n\ntcpServer.listen(tcpPort, function(){  \n  console.log('Server listening on: %j', tcpServer.address());\n});\n</code></pre>\n\n<p>Here comes the problem:</p>\n\n<p>The client only sends about 180 messages and then <code>send</code> hangs. The server only receives ~120 messages. When I increase the length of the request, the client sends less requests and when I decrease the length, the clients sends more requests. I also found out that when I decrease the sendInterval, I can send more requests before <code>send</code> hangs. I don't know what I'm doing wrong. When I execute similar code with a nodejs client, everything is okay, so the problem lies with the C++ client.</p>\n\n<p>EDIT:</p>\n\n<p>I don't really think this is necessary, but here is the code of <code>connectToServer()</code>:</p>\n\n<pre><code>void ConnectToServer()\n{\n    sock = socket(AF_INET, SOCK_STREAM, 0);\n    if (socket &gt;= 0)\n    {\n        printf(\"Created Socket!\\n\");\n    }\n    else\n    {\n        printf(\"Couldn't create socket\");\n    }\n\n    struct hostent * host = gethostbyname(hostname.c_str());\n    if (host != NULL)\n    {\n        printf(\"Found IP Address!\\n\");\n    }\n    else\n    {\n        printf(\"IP not found\");\n    }   \n\n    struct sockaddr_in server;\n    server.sin_family = AF_INET;\n    server.sin_port = htons(port);\n    server.sin_addr.s_addr = *((unsigned long *)(host-&gt;h_addr_list[0]));\n\n    int connectResult = ::connect(sock, (struct sockaddr *)&amp;server, sizeof(server));\n    if (connectResult &gt;= 0)\n    {\n        printf(\"Connected to server!\\n\");\n    }\n    else\n    {\n        printf(\"Not connected to server. Err: %d\\n\", connectResult);\n    }   \n}\n</code></pre>\n\n<p>Output from C++ client(send interval: 2000ms, msgLength: 126-127 chars):</p>\n\n<pre><code>req(1): 126\nreq(2: 126\nreq(3): 126\n...keeps going on for a while...\nreq(9): 126\nreq(10): 126\nreq(11): 127\nreq(12): 127\n...keeps going on for a while...\nreq(74): 64\nsend() hangs after this\n</code></pre>\n\n<p>Output from nodejs server(only receives 9 messages):</p>\n\n<pre><code>connection data from ip::port: abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ12345678900\n\n...keeps going on for a while...\n\nconnection data from ip::port: abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ12345678909\n</code></pre>\n\n<p>Test results to see if there's a connection between send interval, message length and the number of sent messages:</p>\n\n<pre>\n sendInterval |  msgLength  |   nMsg\n---------------------------------------\n     200      |    127      |    26\n     200      |    65       |    33\n---------------------------------------\n     400      |    65       |    59\n     400      |    127      |    53\n---------------------------------------\n     2000     |    65       |    47\n     2000     |    127      |    21\n</pre>\n\n<p>(I don't see a connection between these values)</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1492621079, "post_id": 43501760, "comment_id": 74057915, "body": "Note that one is portable, the other is not."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1492622804, "post_id": 43501760, "comment_id": 74059046, "body": "But it is hard to find an <i>argument</i> to <code>system</code> which is portable. <code>&quot;&#47;bin&#47;sh ...&quot;</code> certainly is not going to be portable."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 2, "creation_date": 1492621980, "post_id": 43501887, "comment_id": 74058528, "body": "This is wrong. There is no reason for  system() to use fork(), and system() is available on platforms that don&#39;t support it, for example, Windows."}, {"owner": {"reputation": 8788, "user_id": 6866309, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CFXxE.jpg?s=128&g=1", "display_name": "Pavan Chandaka", "link": "https://stackoverflow.com/users/6866309/pavan-chandaka"}, "edited": false, "score": 0, "creation_date": 1492622047, "post_id": 43501887, "comment_id": 74058562, "body": "True.. but his question is specific to linux or some unix like systems as he is using &quot;fork&quot; and &quot;execl&quot;"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1492623023, "post_id": 43501887, "comment_id": 74059153, "body": "Answering with Linux-only facts (and not even disclosing their platform-specific nature) to a question asking for best practice seems kind of dishonest."}, {"owner": {"reputation": 8788, "user_id": 6866309, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CFXxE.jpg?s=128&g=1", "display_name": "Pavan Chandaka", "link": "https://stackoverflow.com/users/6866309/pavan-chandaka"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1492623211, "post_id": 43501887, "comment_id": 74059242, "body": "@BoundaryImposition Yes I agree.... but seeing &quot;fork&quot; and &quot;execl&quot;, I am inclined to Unix like systems..... And also earlier when I gave some answers for cross platform..... I was beaten to death ....... saying, where did you see windows in question.... :)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1492641872, "post_id": 43501887, "comment_id": 74069205, "body": "Yeah, so, you missed the point. The point is that the best practice is to <i>not</i> use <code>fork</code> or <code>execl</code>, so that you <i>can</i> share the code on Windows (and other non-Linux platforms). Instead, you assumed that the Linux approach will be used, to the extent that your answer makes Linux-specific assumptions while discussing <code>system</code>, ignoring and not mentioning that actually your answer is platform-specific too."}], "tags": [], "owner": {"reputation": 8788, "user_id": 6866309, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CFXxE.jpg?s=128&g=1", "display_name": "Pavan Chandaka", "link": "https://stackoverflow.com/users/6866309/pavan-chandaka"}, "is_accepted": false, "score": 1, "last_activity_date": 1492621346, "creation_date": 1492621346, "answer_id": 43501887, "question_id": 43501760, "link": "https://stackoverflow.com/questions/43501760/is-stdsystem-or-exec-better-practice/43501887#43501887", "title": "Is std::system or exec better practice?", "body": "<p>The first <code>system</code> call in your question will do the same, what you are doing in the next piece of code (fork and execl)</p>\n\n<p>From documentation:</p>\n\n<pre><code> The system() library function uses fork(2) to create a child process\n that executes the shell command specified in command using execl(3)\n</code></pre>\n\n<p><a href=\"http://man7.org/linux/man-pages/man3/system.3.html\" rel=\"nofollow noreferrer\">http://man7.org/linux/man-pages/man3/system.3.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1492622055, "post_id": 43502007, "comment_id": 74058568, "body": "Mostly agree. However, purely anecdotally, I prefer to have a properly flexible <code>popen</code> wrapper (e.g. <a href=\"http://stackoverflow.com/q/1683665/560648\">Boost.Process</a>) to hand and use that for basically everything. My only problem with that is that Boost.Process is, for some reason, a compilation-time killer. Works nicely though."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1492622561, "post_id": 43502007, "comment_id": 74058898, "body": "@BoundaryImposition, does that wrapper work with MS VC++? If so, I would love to get my hands on it."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1492622678, "post_id": 43502007, "comment_id": 74058972, "body": "Click on the link and find out! But I have no reason to believe that the answer is no."}, {"owner": {"reputation": 585, "user_id": 2697188, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/80f049a8ea39dae4db4c7e9c8dc6b730?s=128&d=identicon&r=PG&f=1", "display_name": "mjl007", "link": "https://stackoverflow.com/users/2697188/mjl007"}, "edited": false, "score": 0, "creation_date": 1492669196, "post_id": 43502007, "comment_id": 74077125, "body": "So from your response I guess the general rule of thumb is to keep it as simple as possible for portability and readability."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 5, "last_activity_date": 1492621739, "creation_date": 1492621739, "answer_id": 43502007, "question_id": 43501760, "link": "https://stackoverflow.com/questions/43501760/is-stdsystem-or-exec-better-practice/43502007#43502007", "title": "Is std::system or exec better practice?", "body": "<p>Ignoring for the time being that use of <code>system</code> is portable while use of <code>exec</code> family of functions is not portable...</p>\n\n<p>When you combine use of <code>exec</code> family of functions with other POSIX functions such as <code>pipe</code>, <code>dup</code>, <code>wait</code>, you get a lot more control over how to pass data between the parent process and the child process.</p>\n\n<p>When you don't need any of those controls, i.e. you just want to execute a command, then using <code>system</code> is preferable, IMO.</p>\n"}], "owner": {"reputation": 585, "user_id": 2697188, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/80f049a8ea39dae4db4c7e9c8dc6b730?s=128&d=identicon&r=PG&f=1", "display_name": "mjl007", "link": "https://stackoverflow.com/users/2697188/mjl007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6116, "favorite_count": 2, "accepted_answer_id": 43502007, "answer_count": 2, "score": 6, "last_activity_date": 1492621739, "creation_date": 1492620925, "last_edit_date": 1492621441, "question_id": 43501760, "link": "https://stackoverflow.com/questions/43501760/is-stdsystem-or-exec-better-practice", "title": "Is std::system or exec better practice?", "body": "<p>I have a program that calls a shell script tool that I made that goes through a directory and zips up files and gets the checksum value and calls some other tools to upload the files. The operation takes roughly 3 to 4 minutes.</p>\n\n<p>I call the script like this:</p>\n\n<pre><code>int result = system(\"/bin/sh /path/to/my/script\");\n</code></pre>\n\n<p>I've also got the same result by using the <code>exec()</code> family of functions:</p>\n\n<pre><code>int child = fork();\nif(child == 0) {\n    execl( \"/bin/sh\", \"sh\", \"/path/to/my/script\", (char*)0 );\n}\n</code></pre>\n\n<p>I know with <code>exec</code> you can redirect output to the parent program so it can read the output of the command line tools, but other than that when should you use <code>system</code> as opposed to <code>exec</code>?</p>\n"}, {"tags": ["c++", "arduino", "arduino-uno"], "answers": [{"comments": [{"owner": {"reputation": 1450, "user_id": 5554158, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/a8KtK.jpg?s=128&g=1", "display_name": "wokoro douye samuel", "link": "https://stackoverflow.com/users/5554158/wokoro-douye-samuel"}, "edited": false, "score": 0, "creation_date": 1492622530, "post_id": 43501962, "comment_id": 74058880, "body": "its not available either@stackmalux"}, {"owner": {"reputation": 77, "user_id": 6769116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qx0au.jpg?s=128&g=1", "display_name": "stackmalux", "link": "https://stackoverflow.com/users/6769116/stackmalux"}, "reply_to_user": {"reputation": 1450, "user_id": 5554158, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/a8KtK.jpg?s=128&g=1", "display_name": "wokoro douye samuel", "link": "https://stackoverflow.com/users/5554158/wokoro-douye-samuel"}, "edited": false, "score": 0, "creation_date": 1492622709, "post_id": 43501962, "comment_id": 74058994, "body": "try this simple example to test SoftwareSerial with serial [<a href=\"https://www.arduino.cc/en/Reference/SoftwareSerialExample]\" rel=\"nofollow noreferrer\">arduino.cc/en/Reference/SoftwareSerialExample]</a>"}, {"owner": {"reputation": 1450, "user_id": 5554158, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/a8KtK.jpg?s=128&g=1", "display_name": "wokoro douye samuel", "link": "https://stackoverflow.com/users/5554158/wokoro-douye-samuel"}, "edited": false, "score": 0, "creation_date": 1492625284, "post_id": 43501962, "comment_id": 74060565, "body": "It&#39;s working when implemented that way, but that&#39;s not what am trying to do."}, {"owner": {"reputation": 77, "user_id": 6769116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qx0au.jpg?s=128&g=1", "display_name": "stackmalux", "link": "https://stackoverflow.com/users/6769116/stackmalux"}, "reply_to_user": {"reputation": 1450, "user_id": 5554158, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/a8KtK.jpg?s=128&g=1", "display_name": "wokoro douye samuel", "link": "https://stackoverflow.com/users/5554158/wokoro-douye-samuel"}, "edited": false, "score": 0, "creation_date": 1532074250, "post_id": 43501962, "comment_id": 89845833, "body": "have you try it inside the loop?"}], "tags": [], "owner": {"reputation": 77, "user_id": 6769116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qx0au.jpg?s=128&g=1", "display_name": "stackmalux", "link": "https://stackoverflow.com/users/6769116/stackmalux"}, "is_accepted": false, "score": 0, "last_activity_date": 1492651094, "last_edit_date": 1492651094, "creation_date": 1492621593, "answer_id": 43501962, "question_id": 43501641, "link": "https://stackoverflow.com/questions/43501641/how-to-make-softwareserial-variable-available-in-a-function-in-arduino/43501962#43501962", "title": "How to make SoftwareSerial variable available in a function in arduino", "body": "<p>try to use this: </p>\n\n<pre><code>if (mySerial.available()&gt;0){\n   mySerial.read();\n}\n</code></pre>\n"}], "owner": {"reputation": 1450, "user_id": 5554158, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/a8KtK.jpg?s=128&g=1", "display_name": "wokoro douye samuel", "link": "https://stackoverflow.com/users/5554158/wokoro-douye-samuel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 312, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1492651094, "creation_date": 1492620570, "last_edit_date": 1492625473, "question_id": 43501641, "link": "https://stackoverflow.com/questions/43501641/how-to-make-softwareserial-variable-available-in-a-function-in-arduino", "title": "How to make SoftwareSerial variable available in a function in arduino", "body": "<p>I am trying to make use of a SoftwareSerial variable in a function, but for some reason it is always unavailable.\nThe various codes are given below.</p>\n\n<pre><code>gsm.h\n\n#ifndef GSM_H_\n#define GSM_H_\n#include &lt;SoftwareSerial.h&gt;\n\nstruct gsm{\n\n    char *message;\n    char phone_number[20];\n\n    void getText(SoftwareSerial serial, int index);\n};\n\n\n#endif\n\n\ngsm.cpp\n\n#include \"gsm.h\"\n#include &lt;string.h&gt;\n#include &lt;arduino.h&gt;\n#include &lt;SoftwareSerial.h&gt;\n\nvoid gsm::getText(SoftwareSerial serial, int index){\n\n    char str[100];\n    serial.print(\"AT+CMGR=1 \\r\");\n    delay(250);\n    if(serial.available()){\n       Serial.print(\"serial is available\");\n       serial.readBytes(message, 100);\n    }\n\n}\n\n\ntest.ino\n\n#include \"gsm.h\"\n#include &lt;SoftwareSerial.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n\nSoftwareSerial mySerial(10, 11); // RX, TX\n\ngsm gm;\n\nvoid setup(){\n\n   Serial.begin(9600);\n   mySerial.begin(9600);\n   gm.getText(mySerial,1);\n   Serial.print(gm.message);\n}\n\nvoid loop(){\n\n}\n</code></pre>\n\n<p><strong>Serial.print(gm.message)</strong> is supposed to return what has been copied into message by <strong>serial.readBytes(message,100)</strong>. \nBut it seems the test for serial availability failed as the code inside <strong>if(serial.available())</strong> don't get executed. Please i need help as i have been battling with this for some time now.</p>\n"}, {"tags": ["android", "c++", "firebase", "google-cloud-messaging", "firebase-cloud-messaging"], "comments": [{"owner": {"reputation": 33081, "user_id": 4625829, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tw3Uk.png?s=128&g=1", "display_name": "AL.", "link": "https://stackoverflow.com/users/4625829/al"}, "edited": false, "score": 0, "creation_date": 1492654981, "post_id": 43501566, "comment_id": 74072664, "body": "Hi. Depending on the message payload, you might be just experiencing the expected behavior (see <a href=\"https://firebase.google.com/docs/cloud-messaging/android/receive#handling_messages\" rel=\"nofollow noreferrer\">Handling Messages</a>). Could you post a sample payload you&#39;re sending?"}], "answers": [{"tags": [], "owner": {"reputation": 275, "user_id": 2481353, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b53a790e44a9713de17bfef7fd01c894?s=128&d=identicon&r=PG", "display_name": "mr.dog", "link": "https://stackoverflow.com/users/2481353/mr-dog"}, "is_accepted": false, "score": 0, "last_activity_date": 1492694875, "creation_date": 1492694875, "answer_id": 43520935, "question_id": 43501566, "link": "https://stackoverflow.com/questions/43501566/firebase-c-cloud-messaging-background-issues/43520935#43520935", "title": "Firebase C++ Cloud Messaging background issues", "body": "<p>Turned out that Firebase Cloud Messaging C++ SDK for Android requires some additional coding that is not described in the integration documentation, but, can be found in the sample app on Github (<a href=\"https://github.com/firebase/quickstart-cpp/blob/master/messaging/testapp/src/android/java/com/google/firebase/example/TestappNativeActivity.java#L35\" rel=\"nofollow noreferrer\">https://github.com/firebase/quickstart-cpp/blob/master/messaging/testapp/src/android/java/com/google/firebase/example/TestappNativeActivity.java#L35</a>). </p>\n\n<p>When I added the missing code in <strong>onNewIntent</strong> method - FCM <strong>OnMessage</strong> callback started to work as expected;</p>\n"}], "owner": {"reputation": 275, "user_id": 2481353, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b53a790e44a9713de17bfef7fd01c894?s=128&d=identicon&r=PG", "display_name": "mr.dog", "link": "https://stackoverflow.com/users/2481353/mr-dog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 296, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1492694875, "creation_date": 1492620341, "last_edit_date": 1492654892, "question_id": 43501566, "link": "https://stackoverflow.com/questions/43501566/firebase-c-cloud-messaging-background-issues", "title": "Firebase C++ Cloud Messaging background issues", "body": "<p>So, I have a Firebase C++ SDK integrated into my Android app and I'm having certain troubles handling my push notifications when my app is in the background.</p>\n\n<p>The thing is that for some reason <strong>OnMessage</strong> method of <strong>messaging::Listener</strong> class never gets called when I launch my app through a notification, which is weird, because in a situation when my app is already in foreground when the device gets a notification - <strong>OnMessage</strong> gets called perfectly fine and I get all the info about the received notification.</p>\n\n<p>AFAIK <strong>OnMessage</strong> should also be called by the Firebase sdk when a user launches/resumes the app through the notification from the notification bar so that the app could get the payload, but this doesn't happen for me for some reason and I don't know where to look (nothing in adb log, no errors, etc).</p>\n"}, {"tags": ["c++", "vector", "iterator", "language-lawyer", "undefined-behavior"], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1492647330, "post_id": 43501577, "comment_id": 74070746, "body": "Some C++ libraries use a class type for vector iterators (this leads to differing behaviour of the same code across libraries due to ADL, e.g. <code>find(v.begin(), v.end(), x);</code>). In debug mode they attempt to diagnose , for example, comparison of iterators into different vectors"}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 1, "last_activity_date": 1492620369, "creation_date": 1492620369, "answer_id": 43501577, "question_id": 43501525, "link": "https://stackoverflow.com/questions/43501525/invalidated-iterator-in-a-vector/43501577#43501577", "title": "Invalidated iterator in a vector", "body": "<p>Formally any iterator pointing to an element on or after the erased element is invalidated. So</p>\n\n<ol>\n<li><p>Yes this is UB (despite it being a pointer under the hood.)</p></li>\n<li><p>UB again, despite the obvious plausibility.</p></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 2279, "user_id": 2288628, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8e7edd8267abc525a6c48d87d7f7fcf5?s=128&d=identicon&r=PG", "display_name": "PoweredByRice", "link": "https://stackoverflow.com/users/2288628/poweredbyrice"}, "edited": false, "score": 0, "creation_date": 1492645112, "post_id": 43501589, "comment_id": 74070209, "body": "thanks for the answer, I agree with everything you say. However, in this particular case, it looks like <code>it</code> may be <b>non-singular</b>. See <a href=\"http://stackoverflow.com/questions/5441893/what-is-singular-and-non-singular-values-in-the-context-of-stl-iterators\" title=\"what is singular and non singular values in the context of stl iterators\">stackoverflow.com/questions/5441893/&hellip;</a> . While <code>it</code> is invalid, it is &quot;associated&quot; with the container (more accurately, <i>was</i> associated), which makes it non-singular."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 2279, "user_id": 2288628, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8e7edd8267abc525a6c48d87d7f7fcf5?s=128&d=identicon&r=PG", "display_name": "PoweredByRice", "link": "https://stackoverflow.com/users/2288628/poweredbyrice"}, "edited": false, "score": 0, "creation_date": 1492698592, "post_id": 43501589, "comment_id": 74098230, "body": "@PoweredByRice: I don&#39;t see any relevant and/or authoritative statements of the matter on that page. You said it yourself: <b><i>was</i></b> associated, the past tense being the key. It is no longer associated."}, {"owner": {"reputation": 2279, "user_id": 2288628, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8e7edd8267abc525a6c48d87d7f7fcf5?s=128&d=identicon&r=PG", "display_name": "PoweredByRice", "link": "https://stackoverflow.com/users/2288628/poweredbyrice"}, "edited": false, "score": 0, "creation_date": 1492700566, "post_id": 43501589, "comment_id": 74099839, "body": "so I guess the question is: when is an invalid iterator non-singular ?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 2279, "user_id": 2288628, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8e7edd8267abc525a6c48d87d7f7fcf5?s=128&d=identicon&r=PG", "display_name": "PoweredByRice", "link": "https://stackoverflow.com/users/2288628/poweredbyrice"}, "edited": false, "score": 0, "creation_date": 1492701167, "post_id": 43501589, "comment_id": 74100337, "body": "@PoweredByRice: That I don&#39;t know for sure. My interpretation at the moment is that this comes down to the difference between iterator invalidation, and actually &quot;physically&quot; breaking the iterator. That is, for example, an iterator is invalidated after rehashing occurs, even though the resulting state of the container <i>may</i> be the same as it was before. I think the standard wants us to consider all invalid iterators potentially singular and proceed on that basis."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 6, "last_activity_date": 1492620420, "last_edit_date": 1592644375, "creation_date": 1492620420, "answer_id": 43501589, "question_id": 43501525, "link": "https://stackoverflow.com/questions/43501525/invalidated-iterator-in-a-vector/43501589#43501589", "title": "Invalidated iterator in a vector", "body": "<p>Once your iterator has been invalidated, it may be UB to even compare it to something else:</p>\n<blockquote>\n<p><code>[C++14: 24.2.1/10]:</code> An <em>invalid</em> iterator is an iterator that may be singular.</p>\n<p><code>[C++14: 24.2.1/5]:</code> <em>[..]</em> Results of most expressions are undefined for singular values; the only exceptions are destroying an iterator that holds a singular value, the assignment of a non-singular value to an iterator that holds a singular value, and, for iterators that satisfy the <code>DefaultConstructible</code> requirements, using a value-initialized iterator as the source of a copy or move operation. <em>[..]</em></p>\n</blockquote>\n<p>Note that this means you also can't compare a default-constructed iterator to any <code>.end()</code>.</p>\n<p>Contrary to popular belief that &quot;pointers are just memory addresses&quot;, these rules are also largely true for pointers. Indeed, the rules for iterators are a generalisation of the rules for pointers.</p>\n"}], "owner": {"reputation": 2279, "user_id": 2288628, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8e7edd8267abc525a6c48d87d7f7fcf5?s=128&d=identicon&r=PG", "display_name": "PoweredByRice", "link": "https://stackoverflow.com/users/2288628/poweredbyrice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1492744650, "creation_date": 1492620197, "last_edit_date": 1495542357, "question_id": 43501525, "link": "https://stackoverflow.com/questions/43501525/invalidated-iterator-in-a-vector", "title": "Invalidated iterator in a vector", "body": "<p>I'm aware erasing will invalidate iterators at and after the point of the erase. Consider:</p>\n\n<pre><code>std::vector&lt;int&gt; vec = {1, 2, 3, 4, 5};\nstd::vector&lt;int&gt;::iterator it = vec.end() - 1; //last element\nvec.erase(vec.begin()); //shift everything one to the left, 'it' should be the new 'end()' ?\nstd::cout &lt;&lt; (it == vec.end()); //not dereferencing 'it', just comparing, UB ?\n</code></pre>\n\n<p>Is it undefined behavior to compare (not dereference) an invalidated iterator (<code>it</code> in this case)? If not, is <code>it == vec.end()</code> guaranteed to hold true?</p>\n\n<p><strong>Edit</strong>: from the top answer it looks like this is UB if only <code>it</code> is a <strong>singular value</strong>. But from <a href=\"https://stackoverflow.com/questions/5441893/what-is-singular-and-non-singular-values-in-the-context-of-stl-iterators\">What is singular and non-singular values in the context of STL iterators?</a> it seems like <code>it</code> is (or <em>was</em>) associated with the container hence making <code>it</code> <strong>non-singular</strong>. </p>\n\n<p>I'd appreciate further analysis on this, thank you.</p>\n"}, {"tags": ["c++", "cmake", "codeblocks"], "comments": [{"owner": {"reputation": 7444, "user_id": 769220, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc7c01518f7016b35b3eb3a65a69a8e3?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/769220/chris"}, "edited": false, "score": 1, "creation_date": 1548773639, "post_id": 43501490, "comment_id": 95657500, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/37618040/codeblocks-with-cmake\">Code::Blocks with cmake</a>"}], "answers": [{"comments": [{"owner": {"reputation": 826, "user_id": 2536614, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/93215d53518aa2c7bb4e76313f60face?s=128&d=identicon&r=PG", "display_name": "Mert Mertce", "link": "https://stackoverflow.com/users/2536614/mert-mertce"}, "edited": false, "score": 0, "creation_date": 1517567643, "post_id": 43512723, "comment_id": 84157837, "body": "can&#39;t we do this within IDE?"}], "tags": [], "owner": {"reputation": 3967, "user_id": 4184884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fVkAe.png?s=128&g=1", "display_name": "oLen", "link": "https://stackoverflow.com/users/4184884/olen"}, "is_accepted": false, "score": 4, "last_activity_date": 1492672674, "creation_date": 1492672674, "answer_id": 43512723, "question_id": 43501490, "link": "https://stackoverflow.com/questions/43501490/using-cmake-with-codeblocks/43512723#43512723", "title": "Using cmake with Code::Blocks", "body": "<p>You can use CMake to create a Code::Blocks project for you:</p>\n\n<pre><code>cmake -G \"CodeBlocks - Unix Makefiles\" ../src\n</code></pre>\n\n<p>This will produce a <code>cbp</code> project file, which you can just open with Code::Blocks. What to do when clicking on \"Compile\", \"Run\", and so on, will have been set automatically by CMake.</p>\n"}], "owner": {"reputation": 18045, "user_id": 3320135, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a5b91a6e8e17f4a5da0c1aecb6135a91?s=128&d=identicon&r=PG&f=1", "display_name": "Karnivaurus", "link": "https://stackoverflow.com/users/3320135/karnivaurus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3579, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1616288722, "creation_date": 1492620088, "question_id": 43501490, "link": "https://stackoverflow.com/questions/43501490/using-cmake-with-codeblocks", "title": "Using cmake with Code::Blocks", "body": "<p>I have just started using Code::Blocks for editing C++ code, having used Qt Creator up until now. I want to be able to edit and compile some existing code, which comes with a CMakeLists.txt file. How can I do this?</p>\n\n<p>With Qt Creator, you could specify a script which would be run when \"Build\" was clicked from the menu. For example, you might specify \"cmake ../src\", and then \"make\". Is there a way to do this using Code::Blocks?</p>\n"}, {"tags": ["android", "c++", "cmake"], "comments": [{"owner": {"reputation": 1314, "user_id": 2402598, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91b0e9d6a7784337d7ea1deeac7f5f4a?s=128&d=identicon&r=PG", "display_name": "optional", "link": "https://stackoverflow.com/users/2402598/optional"}, "edited": false, "score": 0, "creation_date": 1492680968, "post_id": 43501344, "comment_id": 74084536, "body": "I found out that using <code>target_link_libraries(native-lib native-activity)</code> works but that is contradicting with my understanding of how linking works."}, {"owner": {"reputation": 1314, "user_id": 2402598, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91b0e9d6a7784337d7ea1deeac7f5f4a?s=128&d=identicon&r=PG", "display_name": "optional", "link": "https://stackoverflow.com/users/2402598/optional"}, "edited": false, "score": 0, "creation_date": 1492682486, "post_id": 43501344, "comment_id": 74085683, "body": "I reread on linking and how the <code>target_link_libraries(...)</code> function works and I was right, it is not the way it is intended to do. However, I found a simple solution to my problem by providing absolute paths to the library as following: 1) <code>find_library(native-lib my-native-lib)</code> 2) <code>target_link_libraries(native-activity ${my-native-lib})</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1314, "user_id": 2402598, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91b0e9d6a7784337d7ea1deeac7f5f4a?s=128&d=identicon&r=PG", "display_name": "optional", "link": "https://stackoverflow.com/users/2402598/optional"}, "is_accepted": true, "score": 1, "last_activity_date": 1492683306, "creation_date": 1492683306, "answer_id": 43516624, "question_id": 43501344, "link": "https://stackoverflow.com/questions/43501344/cannot-link-library-using-cmake-in-android-studio-unable-to-load-native-library/43516624#43516624", "title": "Cannot link library using CMake in Android Studio: Unable to load native library", "body": "<p>What worked for me was using the <a href=\"https://cmake.org/cmake/help/v3.0/command/find_library.html\" rel=\"nofollow noreferrer\">find_library(...)</a> CMake command and use the full path to link the library <em>native-lib</em> against <em>native-activity</em>.</p>\n\n<p>The working CMake file is shown below:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.4.1)\n\n# build native_app_glue as a static lib\nadd_library(app-glue STATIC\n            ${ANDROID_NDK}/sources/android/native_app_glue/android_native_app_glue.c)\n\n# now build app's shared lib\nset(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -std=gnu++11\")\n\n# Native-Activity\nadd_library(native-activity SHARED \"\")\n\n# Native-Library\nadd_library(native-lib SHARED \"\")\n\ninclude(\"Native/CMakeLists.txt\")\n\n# Link the native-activity\ntarget_sources(native-activity PRIVATE \"${CMAKE_CURRENT_LIST_DIR}/main.cpp\")\n\ntarget_include_directories(native-activity PRIVATE\n                           ${ANDROID_NDK}/sources/android/native_app_glue)\n\n# add lib dependencies\ntarget_link_libraries(native-activity\n                      android\n                      app-glue\n                      log)\n\nfind_library(native-lib my-native-lib)\n\ntarget_link_libraries(native-activity ${my-native-lib})\n</code></pre>\n"}], "owner": {"reputation": 1314, "user_id": 2402598, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91b0e9d6a7784337d7ea1deeac7f5f4a?s=128&d=identicon&r=PG", "display_name": "optional", "link": "https://stackoverflow.com/users/2402598/optional"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 861, "favorite_count": 0, "accepted_answer_id": 43516624, "answer_count": 1, "score": 0, "last_activity_date": 1492683306, "creation_date": 1492619595, "question_id": 43501344, "link": "https://stackoverflow.com/questions/43501344/cannot-link-library-using-cmake-in-android-studio-unable-to-load-native-library", "title": "Cannot link library using CMake in Android Studio: Unable to load native library", "body": "<p>As soon as I want to add my own library via <code>target_link_libraries(...)</code> my application crashes with the following error:</p>\n\n<pre><code>E/AndroidRuntime: FATAL EXCEPTION: main\nProcess: my.process, PID: 3651\njava.lang.RuntimeException: Unable to start activity ComponentInfo{my.process/android.app.NativeActivity}: java.lang.IllegalArgumentException: Unable to load native library: /data/app/my.process/lib/x86/libnative-activity.so\n</code></pre>\n\n<p>My CMake file in <code>src/cpp/main/CMakeLists.txt</code> looks like this:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.4.1)\n\n# build native_app_glue as a static lib\nadd_library(app-glue STATIC\n            ${ANDROID_NDK}/sources/android/native_app_glue/android_native_app_glue.c)\n\n# now build app's shared lib\nset(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -std=gnu++11\")\n\n# Native-Activity\nadd_library(native-activity SHARED \"\")\n\n# Native-Library\nadd_library(native-lib SHARED \"\")\n\ninclude(\"Native/CMakeLists.txt\")\n\n# Link the native-activity\ntarget_sources(native-activity PRIVATE \"${CMAKE_CURRENT_LIST_DIR}/main.cpp\")\n\ntarget_include_directories(native-activity PRIVATE\n                           ${ANDROID_NDK}/sources/android/native_app_glue)\n\n# add lib dependencies\ntarget_link_libraries(native-activity\n                      android\n                      app-glue\n                      log)\n\ntarget_link_libraries(native-activity native-lib)\n</code></pre>\n\n<p>and the CMake file in <code>src/cpp/main/Native/CMakeLists.txt</code> looks like this:</p>\n\n<pre><code>set_target_properties(native-lib PROPERTIES LINKER_LANGUAGE CXX)\n</code></pre>\n\n<p>If I remove the following line from the first CMake file in <code>src/cpp/main/CMakeLists.txt</code> compilation works:</p>\n\n<pre><code>target_link_libraries(native-activity native-lib)\n</code></pre>\n\n<p>What do I do wrong?</p>\n"}, {"tags": ["c++", "boost-asio"], "answers": [{"comments": [{"owner": {"reputation": 1380, "user_id": 3560873, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4i37O.jpg?s=128&g=1", "display_name": "searchengine27", "link": "https://stackoverflow.com/users/3560873/searchengine27"}, "edited": false, "score": 0, "creation_date": 1596808979, "post_id": 43514881, "comment_id": 111938453, "body": "Can you provide any documentation? A google search of <code>boost enqueue_deadline_async</code> comes up only with this answer (spread around multiple websites from webdata crawlers) which makes me question the legitimacy of this answer."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 1380, "user_id": 3560873, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4i37O.jpg?s=128&g=1", "display_name": "searchengine27", "link": "https://stackoverflow.com/users/3560873/searchengine27"}, "edited": false, "score": 0, "creation_date": 1596811637, "post_id": 43514881, "comment_id": 111939677, "body": "@searchengine27 I think you misunderstood what was &quot;claimed&quot;. The question was about how to accept a time duration. The suggestion was to use <code>boost::posix_time::time_duration</code> exactly what is used <a href=\"https://www.boost.org/doc/libs/1_45_0/doc/html/boost_asio/reference/basic_deadline_timer/expires_from_now/overload3.html\" rel=\"nofollow noreferrer\">in the interface of <code>deadline_timer</code></a> - proof <a href=\"http://coliru.stacked-crooked.com/a/829d4d9c8460769e\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/829d4d9c8460769e</a> (put another way: <code>enqueue_deadline_async</code> is just OP&#39;s own function, as you can see in his question code)"}, {"owner": {"reputation": 1380, "user_id": 3560873, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4i37O.jpg?s=128&g=1", "display_name": "searchengine27", "link": "https://stackoverflow.com/users/3560873/searchengine27"}, "edited": false, "score": 0, "creation_date": 1596813315, "post_id": 43514881, "comment_id": 111940454, "body": "well looks like my vote is locked in now anyway (<a href=\"https://meta.stackexchange.com/questions/80762/why-do-votes-get-locked\" title=\"why do votes get locked\">meta.stackexchange.com/questions/80762/why-do-votes-get-loc&zwnj;&#8203;ked</a>). This is why I don&#39;t like SO."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 1380, "user_id": 3560873, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4i37O.jpg?s=128&g=1", "display_name": "searchengine27", "link": "https://stackoverflow.com/users/3560873/searchengine27"}, "edited": false, "score": 0, "creation_date": 1596813485, "post_id": 43514881, "comment_id": 111940520, "body": "@searchengine27 Nobody made you vote :) I don&#39;t mind so, cheers!"}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 2, "last_activity_date": 1492678906, "creation_date": 1492678906, "answer_id": 43514881, "question_id": 43501254, "link": "https://stackoverflow.com/questions/43501254/combining-a-thread-pool-with-a-deadline-timer-issues-with-template-time/43514881#43514881", "title": "Combining a thread_pool with a deadline_timer - issues with template (time)", "body": "<p>A few things,</p>\n\n<pre><code>template &lt;class Task, class ???&gt;\nvoid enqueue_deadline_async(Task task, const ??? &amp; expiry_time)\n</code></pre>\n\n<p>Since it's a deducible template argument, just name it something, and you're done</p>\n\n<pre><code>template &lt;class Task, class T&gt;\nvoid enqueue_deadline_async(Task task, const T &amp; expiry_time)\n</code></pre>\n\n<p>Next up:</p>\n\n<pre><code>const std::shared_ptr&lt;boost::asio::basic_deadline_timer&lt;???&gt; &gt; apTimer = std::make_shared&lt;boost::asio::deadline_timer&gt;(*get_service_pointer(), expiry_time);\n</code></pre>\n\n<p>First off, <code>boost::asio::deadline_timer</code> already allows what you want in the question. So don't muck with <code>basic_deadline_timer</code>. Secondly, the shared pointer needs to be convertible to the type of <code>apTimer</code> anyways, making it even less useful (because picking another chrono clock model would not even compile).</p>\n\n<h2>Solution</h2>\n\n<p>Just use the interface that deadline_timer also uses:</p>\n\n<pre><code>template &lt;class Task&gt;\nvoid enqueue_deadline_async(Task task, const boost::posix_time::time_duration&amp; expiry_time)\n</code></pre>\n\n<p>It works:</p>\n\n<pre><code>int main() {\n    thread_pool tp;\n    tp.enqueue_deadline_async([]{ }, boost::posix_time::seconds(5));\n    tp.enqueue_deadline_async([]{ }, boost::posix_time::milliseconds(5));\n}\n</code></pre>\n"}], "owner": {"reputation": 491, "user_id": 311724, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9321ed5f3c828c263f1a5a5a874c85b5?s=128&d=identicon&r=PG", "display_name": "ZeroDefect", "link": "https://stackoverflow.com/users/311724/zerodefect"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 259, "favorite_count": 0, "accepted_answer_id": 43514881, "answer_count": 1, "score": 1, "last_activity_date": 1492678906, "creation_date": 1492619286, "last_edit_date": 1492619403, "question_id": 43501254, "link": "https://stackoverflow.com/questions/43501254/combining-a-thread-pool-with-a-deadline-timer-issues-with-template-time", "title": "Combining a thread_pool with a deadline_timer - issues with template (time)", "body": "<p>I have integrated Boost's asio service and used it in conjunction with a thread pool.</p>\n\n<p>Having created a thread pool which handles both futures and async tasks, I am wanting to expand it a bit further to handle deadline timers too (anti-pattern?).  Unfortunately, I am hitting my limit in comprehension of handling templated code.  To be more precise, I would like to pass a boost::posix_time (ex: boost::posix_time::milliseconds(100) or boost::posix_time::seconds(5) ), but I am struggling to understand how I could make this possible.</p>\n\n<p>The partial listing of code below is the current implementation of my thread pool.</p>\n\n<pre><code>//////////////////////////////////////////////////////////////////////////\nclass thread_pool\n{\npublic:\n\n    // ...\n    // Other boring stuff here...\n\n\n    //////////////////////////////////////////////////////////////////////////\n    template&lt;class Task&gt;\n    void enqueue_async(Task task)\n    {\n        m_pIO-&gt;post( std::bind(&amp;thread_pool::wrap_task, this,\n                                                  std::function&lt; void() &gt;( task )));\n    }\n\n    //////////////////////////////////////////////////////////////////////////\n    // NOTE: Needing help here - 'expiry_time' should be relative.\n    template &lt;class Task, class ???&gt;\n    void enqueue_deadline_async(Task task, const ??? &amp; expiry_time)\n    {\n        const std::shared_ptr&lt;boost::asio::basic_deadline_timer&lt;???&gt; &gt; apTimer = std::make_shared&lt;boost::asio::deadline_timer&gt;(*get_service_pointer(), expiry_time);\n        apTimer-&gt;async_wait(std::bind(&amp;thread_pool::enqueue_async, this, task));\n    }\n\nprivate:\n\n    //////////////////////////////////////////////////////////////////////////\n    void wrap_task( std::function&lt; void() &gt; task )\n    {\n        try\n        {\n            task();\n        }\n        catch (const std::exception &amp;e)\n        {\n            // Todo: Log that there is a problem!!\n            BOOST_ASSERT_MSG(0,e.what());\n        }\n    }\n\n};\n</code></pre>\n\n<p>Up until this point, I have been using the enqueue_task(...) to queue an asynchronous task for processing by the thread pool. I would now like to expand the thread pool to be able to asynchronously call a callback parameter to a deadline timer (see enqueue_deadline_async()) BUT let the thread pool handle the task.</p>\n\n<p>The reason to integrate the thread_pool with a deadline_time is to:</p>\n\n<ul>\n<li>Minimize the number of io_services running concurrently in code.</li>\n<li>Prevent a deadline_time from blocking the io_service too long - decrease the impact on other pending timers.</li>\n</ul>\n\n<p>Finally, are my nested calls in the io_service dangerous?</p>\n\n<p>Environment Configuration:</p>\n\n<ul>\n<li>Ubuntu v17.04 (Zesty) x86_x64</li>\n<li>Boost v1.63</li>\n<li>GCC 6.3</li>\n</ul>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 1, "creation_date": 1492619497, "post_id": 43501229, "comment_id": 74056872, "body": "Yes, indirectly. But why?"}, {"owner": {"reputation": 1, "user_id": 7890974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d72b00e2d9634db78259dc38d4c4645?s=128&d=identicon&r=PG&f=1", "display_name": "warsaw_hare", "link": "https://stackoverflow.com/users/7890974/warsaw-hare"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1492620045, "post_id": 43501229, "comment_id": 74057225, "body": "I want to add two numbers (circa 5000 and 6000 chars) read from file, and i wanted to do it with stacks made from tables, but i thought that it <i>might</i> be easier with std::stack."}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1492620582, "post_id": 43501229, "comment_id": 74057568, "body": "That doesn\u2019t explain why you want to limit the stack size. In fact, you probably <i>don\u2019t</i> want to do that."}, {"owner": {"reputation": 2191, "user_id": 7070965, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qEhQf.png?s=128&g=1", "display_name": "dtell", "link": "https://stackoverflow.com/users/7070965/dtell"}, "edited": false, "score": 0, "creation_date": 1492622245, "post_id": 43501229, "comment_id": 74058704, "body": "Hello and welcome to StackOverflow. Please take some time to read the help page, especially the sections named <a href=\"http://stackoverflow.com/help/on-topic\">&quot;What topics can I ask about here?&quot;</a> and <a href=\"http://stackoverflow.com/help/dont-ask\">&quot;What types of questions should I avoid asking?&quot;</a>. And more importantly, please read <a href=\"http://meta.stackexchange.com/q/156810/204922\">the Stack Overflow question checklist</a>. You might also want to learn about <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Examples</a>."}], "answers": [{"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 1, "last_activity_date": 1492619801, "creation_date": 1492619801, "answer_id": 43501401, "question_id": 43501229, "link": "https://stackoverflow.com/questions/43501229/is-it-possible-to-fix-size-of-stack-in-declaration/43501401#43501401", "title": "Is it possible to fix size of stack in declaration?", "body": "<p>You can wrap the container in another type that restricts its maximum size, yes.</p>\n\n<p>I'm not clear on why you'd want to, though.</p>\n"}], "owner": {"reputation": 1, "user_id": 7890974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d72b00e2d9634db78259dc38d4c4645?s=128&d=identicon&r=PG&f=1", "display_name": "warsaw_hare", "link": "https://stackoverflow.com/users/7890974/warsaw-hare"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1492619885, "creation_date": 1492619209, "last_edit_date": 1492619885, "question_id": 43501229, "link": "https://stackoverflow.com/questions/43501229/is-it-possible-to-fix-size-of-stack-in-declaration", "title": "Is it possible to fix size of stack in declaration?", "body": "<p>While using <code>std::stack</code>, can I fix size of stack in similar way to declaring size of array?\ne.g</p>\n\n<pre><code>size1=5;\nchar array[size1];\n</code></pre>\n"}, {"tags": ["c++", "templates", "inheritance"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1492619714, "post_id": 43501225, "comment_id": 74057015, "body": "Both are correct in current example. The first one would be required in case of multiple inheritance (of <code>Association</code>)."}], "answers": [{"tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": true, "score": 2, "last_activity_date": 1492619701, "creation_date": 1492619701, "answer_id": 43501375, "question_id": 43501225, "link": "https://stackoverflow.com/questions/43501225/inheritance-from-template-correct-constructor/43501375#43501375", "title": "Inheritance from template: correct constructor", "body": "<p>Both are correct.  <code>Association&lt;MyClass&gt;</code> is more explicit, but there's an \"injected class name\" visible for name lookup where <code>Association</code> means the same as <code>Association&lt;MyClass&gt;</code>.</p>\n"}], "owner": {"reputation": 5, "user_id": 2834035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbe06d9dd7a0787d0fd9b0eaa4d0507a?s=128&d=identicon&r=PG", "display_name": "Totktonado", "link": "https://stackoverflow.com/users/2834035/totktonado"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 43501375, "answer_count": 1, "score": 0, "last_activity_date": 1492619819, "creation_date": 1492619197, "last_edit_date": 1492619819, "question_id": 43501225, "link": "https://stackoverflow.com/questions/43501225/inheritance-from-template-correct-constructor", "title": "Inheritance from template: correct constructor", "body": "<p>When inheriting from a template in child class constructor is it necessary at a call of the parent constructor to specify template parameter.\nCode example:</p>\n\n<pre><code>    template&lt;typename TYPE&gt;\nclass Association\n{\npublic:\n    Association(TYPE* object) : m_object(object) {}\nprivate:\n    TYPE* m_object;\n};\n\nclass MyClass\n{\n};\n\nclass AssociationToMyClass : public Association&lt;MyClass&gt;\n{\n    // is the constructor correct\n    AssociationToMyClass(MyClass* object) : Association&lt;MyClass&gt;(object) {}\n    // or this one?\n    AssociationToMyClass(MyClass* object) : Association(object) {}\n};\n</code></pre>\n"}, {"tags": ["c++", "hdf5"], "comments": [{"owner": {"reputation": 20746, "user_id": 1233251, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/cI9GF.png?s=128&g=1", "display_name": "E_net4 says don&#39;t copy that", "link": "https://stackoverflow.com/users/1233251/e-net4-says-dont-copy-that"}, "edited": false, "score": 0, "creation_date": 1492692267, "post_id": 43501203, "comment_id": 74092919, "body": "How is <code>data</code> declared? What&#39;s the intended primitive type for each element?"}, {"owner": {"reputation": 10205, "user_id": 562697, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ec5e920ed3b5ccb21509a7aeab7144bb?s=128&d=identicon&r=PG", "display_name": "steveo225", "link": "https://stackoverflow.com/users/562697/steveo225"}, "reply_to_user": {"reputation": 20746, "user_id": 1233251, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/cI9GF.png?s=128&g=1", "display_name": "E_net4 says don&#39;t copy that", "link": "https://stackoverflow.com/users/1233251/e-net4-says-dont-copy-that"}, "edited": false, "score": 0, "creation_date": 1492692454, "post_id": 43501203, "comment_id": 74093076, "body": "The type is actually templated. <code>data</code> is declared as a vector, however, in the context of this method a <code>const T*</code>"}, {"owner": {"reputation": 20746, "user_id": 1233251, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/cI9GF.png?s=128&g=1", "display_name": "E_net4 says don&#39;t copy that", "link": "https://stackoverflow.com/users/1233251/e-net4-says-dont-copy-that"}, "edited": false, "score": 0, "creation_date": 1492693664, "post_id": 43501203, "comment_id": 74094178, "body": "As the data is templated, how are you defining <code>type</code>? Can we also see a sample of the data and its &quot;jumbled&quot; form?"}, {"owner": {"reputation": 10205, "user_id": 562697, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ec5e920ed3b5ccb21509a7aeab7144bb?s=128&d=identicon&r=PG", "display_name": "steveo225", "link": "https://stackoverflow.com/users/562697/steveo225"}, "reply_to_user": {"reputation": 20746, "user_id": 1233251, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/cI9GF.png?s=128&g=1", "display_name": "E_net4 says don&#39;t copy that", "link": "https://stackoverflow.com/users/1233251/e-net4-says-dont-copy-that"}, "edited": false, "score": 0, "creation_date": 1492693906, "post_id": 43501203, "comment_id": 74094368, "body": "The method I posted is private to the class with a bunch of overloads (one for each data type) that forward to this method providing the HDF type. The data is jumbled because of the indexing change. Please see my edit."}, {"owner": {"reputation": 20746, "user_id": 1233251, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/cI9GF.png?s=128&g=1", "display_name": "E_net4 says don&#39;t copy that", "link": "https://stackoverflow.com/users/1233251/e-net4-says-dont-copy-that"}, "edited": false, "score": 0, "creation_date": 1492694404, "post_id": 43501203, "comment_id": 74094763, "body": "I&#39;m sorry, what I mean is that I don&#39;t yet understand in what way the data is (wrongly) organized in the dataset. Assuming that each position in the 3D dataset makes room for one instance of type <code>T</code>, it&#39;s hard to understand why the indexing is a concern. A concrete example would really help."}, {"owner": {"reputation": 10205, "user_id": 562697, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ec5e920ed3b5ccb21509a7aeab7144bb?s=128&d=identicon&r=PG", "display_name": "steveo225", "link": "https://stackoverflow.com/users/562697/steveo225"}, "reply_to_user": {"reputation": 20746, "user_id": 1233251, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/cI9GF.png?s=128&g=1", "display_name": "E_net4 says don&#39;t copy that", "link": "https://stackoverflow.com/users/1233251/e-net4-says-dont-copy-that"}, "edited": false, "score": 0, "creation_date": 1492695050, "post_id": 43501203, "comment_id": 74095291, "body": "The memory in C++ is in Layer x Row x Column format. When I write to the HDF5 file, I am trying to write Row x Column x Layer. Originally, I thought that is how it was supposed to be based on how HDFView displays the data. Therefore, the indexing scheme is changing from <code>data[layer][row][col]</code> to <code>data[row][col][layer]</code>"}, {"owner": {"reputation": 951, "user_id": 6281575, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/00cce1f06e53a6f931cd2d87129d6526?s=128&d=identicon&r=PG&f=1", "display_name": "pablo_worker", "link": "https://stackoverflow.com/users/6281575/pablo-worker"}, "edited": false, "score": 0, "creation_date": 1492697162, "post_id": 43501203, "comment_id": 74097043, "body": "Maybe this is a silly comment but, you have created <code>dim</code> as : <code>dim[] = { rows, cols, layers };</code>,"}, {"owner": {"reputation": 10205, "user_id": 562697, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ec5e920ed3b5ccb21509a7aeab7144bb?s=128&d=identicon&r=PG", "display_name": "steveo225", "link": "https://stackoverflow.com/users/562697/steveo225"}, "edited": false, "score": 0, "creation_date": 1492697772, "post_id": 43501203, "comment_id": 74097539, "body": "That is what I am doing, see above. That makes the dimensions in the HDF file correct, but the data is not in the correct location."}], "answers": [{"comments": [{"owner": {"reputation": 10205, "user_id": 562697, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ec5e920ed3b5ccb21509a7aeab7144bb?s=128&d=identicon&r=PG", "display_name": "steveo225", "link": "https://stackoverflow.com/users/562697/steveo225"}, "edited": false, "score": 0, "creation_date": 1492706277, "post_id": 43522405, "comment_id": 74103703, "body": "That did not work either. In fact, it gave (seemingly) the same answer. I added an image showing what is happening and what is expected. I had forgotten you could specify the memory space differently and really thought this was going to work."}, {"owner": {"reputation": 10205, "user_id": 562697, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ec5e920ed3b5ccb21509a7aeab7144bb?s=128&d=identicon&r=PG", "display_name": "steveo225", "link": "https://stackoverflow.com/users/562697/steveo225"}, "edited": false, "score": 0, "creation_date": 1492707689, "post_id": 43522405, "comment_id": 74104570, "body": "I tried changing the mem_space further to test what would happen. It doesn&#39;t seem to matter what I use as the mem_space, the output is the same, even <code>const hsize_t mem_dim[3] = { layers * rows * cols, 1, 1 };</code>"}, {"owner": {"reputation": 20746, "user_id": 1233251, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/cI9GF.png?s=128&g=1", "display_name": "E_net4 says don&#39;t copy that", "link": "https://stackoverflow.com/users/1233251/e-net4-says-dont-copy-that"}, "reply_to_user": {"reputation": 10205, "user_id": 562697, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ec5e920ed3b5ccb21509a7aeab7144bb?s=128&d=identicon&r=PG", "display_name": "steveo225", "link": "https://stackoverflow.com/users/562697/steveo225"}, "edited": false, "score": 0, "creation_date": 1492717361, "post_id": 43522405, "comment_id": 74110034, "body": "That is intriguing indeed. HDFView should allow you to assign each image dimension when opening a dataset as an image. Have you tried every possible combination from there? We cannot be that far from solving this &quot;riddle&quot;. :)"}, {"owner": {"reputation": 10205, "user_id": 562697, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ec5e920ed3b5ccb21509a7aeab7144bb?s=128&d=identicon&r=PG", "display_name": "steveo225", "link": "https://stackoverflow.com/users/562697/steveo225"}, "edited": false, "score": 0, "creation_date": 1492718666, "post_id": 43522405, "comment_id": 74110763, "body": "I have tried quite a few. I think I need to hyperslab the file_space since it is in a different configuration than the memory space. I&#39;ve been trying, but with no luck. The documentation is ambiguous and there are no 3D examples like this."}], "tags": [], "owner": {"reputation": 20746, "user_id": 1233251, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/cI9GF.png?s=128&g=1", "display_name": "E_net4 says don&#39;t copy that", "link": "https://stackoverflow.com/users/1233251/e-net4-says-dont-copy-that"}, "is_accepted": false, "score": 1, "last_activity_date": 1492699625, "last_edit_date": 1492699625, "creation_date": 1492698584, "answer_id": 43522405, "question_id": 43501203, "link": "https://stackoverflow.com/questions/43501203/writing-a-3d-array-to-hdf5/43522405#43522405", "title": "Writing a 3D array to HDF5", "body": "<p>The elements in the dataset are not in the expected order because an incorrect memory dataspace was specified.</p>\n\n<p>The <a href=\"https://support.hdfgroup.org/HDF5/doc1.6/UG/12_Dataspaces.html\" rel=\"nofollow noreferrer\">user guide</a> in section 4 shows how HDF5 can read between two dataspaces of the same overall size, but with swapped dimensions from file to memory. In practice, the <a href=\"https://support.hdfgroup.org/HDF5/doc1.6/RM_H5D.html#Dataset-Write\" rel=\"nofollow noreferrer\"><code>H5Dwrite</code></a> function is declared like this:</p>\n\n<pre><code>herr_t H5Dwrite(hid_t dataset_id, hid_t mem_type_id, hid_t mem_space_id, hid_t file_space_id, hid_t xfer_plist_id, const void * buf )\n</code></pre>\n\n<p>The third parameter refers to the <em>memory dataspace</em>, which in our case is not the same as the file's (previously defined as <code>(row, col, layer)</code>).\nIt should instead be defined as <code>(layer, row, col)</code>. The same page in the guide clarifies that HDF5 follows the same array storage convention as in C:</p>\n\n<blockquote>\n  <p>Dataspace dimensions are numbered from 1 to rank. HDF5 uses C storage conventions, assuming that the last listed dimension is the fastest-changing dimension and the first-listed dimension is the slowest changing. The HDF5 file format storage layout specification adheres to the C convention and the HDF5 Library adheres to the same convention when storing dataspace dimensions in the file.</p>\n</blockquote>\n\n<p>The corrected code should be something like this:</p>\n\n<pre><code>const hsize_t dim[] = { rows, cols, layers };\nhid_t space = H5Screate_simple(3, dim, NULL);\n\nhid_t dataset = H5Dcreate(file, \"dataset\", type, space, H5P_DEFAULT, H5P_DEFAULT, H5P_DEFAULT);\n\nHDF5_CHECK(dataset);\n\nconst hsize_t mem_dim[] = { layers, rows, cols };\nhid_t mem_space = H5Screate_simple(3, dim, NULL);\nHDF5_CHECK(H5Dwrite(dataset, type, mem_space, H5S_ALL, H5P_DEFAULT, data));\n</code></pre>\n"}], "owner": {"reputation": 10205, "user_id": 562697, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ec5e920ed3b5ccb21509a7aeab7144bb?s=128&d=identicon&r=PG", "display_name": "steveo225", "link": "https://stackoverflow.com/users/562697/steveo225"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1500, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1493994660, "creation_date": 1492619137, "last_edit_date": 1493994660, "question_id": 43501203, "link": "https://stackoverflow.com/questions/43501203/writing-a-3d-array-to-hdf5", "title": "Writing a 3D array to HDF5", "body": "<p>I am trying to write a 3D data set to an HDF5 file. The write succeeds and the dimensions are all correct in the file, however, when using the HDFView tool, the data is jumbled, but has a recognizable structure, so I must be close. I can't figure out what I am missing and can't find a good example for writing 3D data.</p>\n\n<p>The data is a contiguous chunk of memory indexed as such: <code>data[layer][row][col]</code> or <code>data[layer*rows*cols + row*cols + col]</code></p>\n\n<p>The following is the code I am using, where HDF5_CHECK is a macro that throws an exception on error.</p>\n\n<pre><code>const hsize_t dim[] = { rows, cols, layers };\nhid_t space = H5Screate_simple(3, dim, NULL);\n\nhid_t dataset = H5Dcreate(file, \"dataset\", type, space, H5P_DEFAULT, H5P_DEFAULT, H5P_DEFAULT);\nHDF5_CHECK(dataset);\nHDF5_CHECK(H5Dwrite(dataset, type, H5S_ALL, H5S_ALL, H5P_DEFAULT, data));\n\nHDF5_CHECK(H5Sclose(space));\nHDF5_CHECK(H5Dclose(dataset));\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>I believe the issue is related to indexing. The array in C++ is correct. However, I believe I want to store the Z, Y, X data as Y, X, Z in the HDF5 container. This must be possible using hyperslabs, but I am unsure how</p>\n\n<p><strong>EDIT 2</strong></p>\n\n<p>Since the data has structure, I can view the data as an image in HDFView. The following should help show the issue:</p>\n\n<p><strong>EDIT 3</strong></p>\n\n<p>Contacted the HDF group and found out shifting dimensions is not possible in the current implementation. It must be done before writing the dataset.</p>\n\n<p><a href=\"https://i.stack.imgur.com/eoHkL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eoHkL.png\" alt=\"Expected vs Actual results\"></a></p>\n"}, {"tags": ["c++", "image", "opencv", "shared-memory"], "comments": [{"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1492624108, "post_id": 43500974, "comment_id": 74059836, "body": "what type is img? What is the value of sizeof( RDB_IMAGE_t );?"}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 1, "creation_date": 1492624260, "post_id": 43500974, "comment_id": 74059949, "body": "can you remove the cvtColor line and save the image as .png and upload it, please?"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 1, "creation_date": 1492625025, "post_id": 43500974, "comment_id": 74060411, "body": "Title says &quot;4 bit depth&quot;, text says &quot;4 byte per pixel&quot;, so which one is it? Also can&#39;t you just inspect shared memory or dump it after each step to find out when corruption happened?"}, {"owner": {"reputation": 61, "user_id": 7890801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5b8b7fa7ab138abe887ea1c7e59487d?s=128&d=identicon&r=PG&f=1", "display_name": "Marcel", "link": "https://stackoverflow.com/users/7890801/marcel"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1492682199, "post_id": 43500974, "comment_id": 74085438, "body": "Hello guys. Thanks for getting back so fast. @ Micka: I provided more information about img in the text (just edited) and the size of RDB_IMAGE_t is 32. @VTT: the title is a typo its 4 byte per pixel. I think there is no earlier excess of the image. The image is saved under a certain memory address img points to the image and I write the image into an open cv matrix. And what you see then is shown the new image I added (but not flipped). THX"}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 7890801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5b8b7fa7ab138abe887ea1c7e59487d?s=128&d=identicon&r=PG&f=1", "display_name": "Marcel", "link": "https://stackoverflow.com/users/7890801/marcel"}, "edited": false, "score": 0, "creation_date": 1493047735, "post_id": 43558397, "comment_id": 74233861, "body": "Hi Mark. I actually found out the same about the Pixelvalues, resulting in those 3 images. I also tried some mathematical equations I found on the internet, but none worked. Could you explain your formula a little bit more in detail? Thank you very much for taking the time. Regards Marcel"}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "reply_to_user": {"reputation": 61, "user_id": 7890801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5b8b7fa7ab138abe887ea1c7e59487d?s=128&d=identicon&r=PG&f=1", "display_name": "Marcel", "link": "https://stackoverflow.com/users/7890801/marcel"}, "edited": false, "score": 0, "creation_date": 1493051248, "post_id": 43558397, "comment_id": 74236228, "body": "If you look at the middle image, from the middle of the left side going into the image towards the car, there are three clear bands going from black to white. So if you start with black (as value 0) and then build up to white (as value 255), you can see that as you get to white, the bottom image increases by 1 level which is how binary numbers add together, so the bottom image is the MSB and the top image is the next most significant byte because as the second byte reaches 255, the top byte clicks over to the next level."}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "reply_to_user": {"reputation": 61, "user_id": 7890801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5b8b7fa7ab138abe887ea1c7e59487d?s=128&d=identicon&r=PG&f=1", "display_name": "Marcel", "link": "https://stackoverflow.com/users/7890801/marcel"}, "edited": false, "score": 0, "creation_date": 1493193408, "post_id": 43558397, "comment_id": 74304874, "body": "I have updated my answer - please take another look at the final part."}], "tags": [], "owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "is_accepted": false, "score": 0, "last_activity_date": 1493193370, "last_edit_date": 1493193370, "creation_date": 1492858667, "answer_id": 43558397, "question_id": 43500974, "link": "https://stackoverflow.com/questions/43500974/save-4-byte-pp-depth-image-from-shared-memory/43558397#43558397", "title": "Save 4 byte pP depth image from shared memory", "body": "<p>If you split the image you have provided into its constituent channels, you will find a couple of things.</p>\n\n<p>Firstly, it has 4 channels - let's assume for a minute that they are R, G, B and A (although they are not actually).</p>\n\n<p>Secondly, the last two channels are identical - their min/max and standard deviation are the same so we can discard one of them.</p>\n\n<pre><code>Image: depth.png\n  Format: PNG (Portable Network Graphics)\n  Mime type: image/png\n  Class: DirectClass\n  Geometry: 800x600+0+0\n  Units: Undefined\n  Type: TrueColorAlpha\n  Endianess: Undefined\n  Colorspace: sRGB\n  Depth: 8-bit\n  Channel depth:\n    Red: 8-bit\n    Green: 8-bit\n    Blue: 8-bit\n    Alpha: 8-bit\n  Channel statistics:\n    Pixels: 480000\n    Red:\n      min: 0 (0)\n      max: 255 (1)\n      mean: 181.668 (0.712422)\n      standard deviation: 82.4882 (0.323483)\n      kurtosis: -0.888916\n      skewness: -0.74329\n      entropy: 0.734481\n    Green:\n      min: 0 (0)\n      max: 255 (1)\n      mean: 175.737 (0.689165)\n      standard deviation: 84.9054 (0.332963)\n      kurtosis: -1.09314\n      skewness: -0.611227\n      entropy: 0.741165\n    Blue:\n      min: 229 (0.898039)                       &lt;--- HERE\n      max: 255 (1)                              &lt;--- HERE\n      mean: 252.276 (0.989316)                  &lt;--- HERE\n      standard deviation: 5.81622 (0.0228087)   &lt;--- HERE\n      kurtosis: 7.14093\n      skewness: -2.88764\n      entropy: 0.595817\n    Alpha:\n      min: 229 (0.898039)                       &lt;--- HERE\n      max: 255 (1)                              &lt;--- HERE\n      mean: 252.276 (0.989316)                  &lt;--- HERE\n      standard deviation: 5.81622 (0.0228087)   &lt;--- HERE\n      kurtosis: 7.14093\n      skewness: -2.88764\n      entropy: 0.595817\n</code></pre>\n\n<p>If you then extract the 4 channels, you will get this (R first, then G, then B):</p>\n\n<p><a href=\"https://i.stack.imgur.com/51Asz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/51Asz.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/djzeh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/djzeh.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/heY25.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/heY25.png\" alt=\"enter image description here\"></a></p>\n\n<p>I think that as the last image (B channel) just has 4-5 bands that get successively lighter the further you go into the image, it is probably the high byte. The first image (R channel) is banded, so I guess that is a smooth gradient in-between the larger steps in the B channel, so I guess that is the middle byte, The second image is varying the most wildly, so that is probably the least significant byte. I have not done any tests, but I guess if you used a formula something like this, it might work out correct:</p>\n\n<pre><code>24-bit depth = (Blue&lt;&lt;16) | (Red&lt;&lt;8) | Green\n</code></pre>\n\n<p>By way of example, if you take that formula and apply it (using <strong>ImageMagick</strong>) at the command line, like this:</p>\n\n<pre><code>convert depth.png -fx \"(((u.b*255)&lt;&lt;8)|(u.r*255))/65535\" -auto-level  result.png\n</code></pre>\n\n<p>You get this result which appears, to me at least, to show a nice, smooth depth image.</p>\n\n<p><a href=\"https://i.stack.imgur.com/oLybz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oLybz.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 61, "user_id": 7890801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5b8b7fa7ab138abe887ea1c7e59487d?s=128&d=identicon&r=PG&f=1", "display_name": "Marcel", "link": "https://stackoverflow.com/users/7890801/marcel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493193370, "creation_date": 1492618421, "last_edit_date": 1492681777, "question_id": 43500974, "link": "https://stackoverflow.com/questions/43500974/save-4-byte-pp-depth-image-from-shared-memory", "title": "Save 4 byte pP depth image from shared memory", "body": "<p>So far every time I had a question this community helped me without me having to ask a question, but today I have to ask my first question, because I couldn't find an answer and I am desperate for the communities help.</p>\n\n<p>I am working with a simulation Program which writes images into shared memory. Accessing the memory address, I want to save the images. The simulation is sending two images, one normal an one with depth information. Saving the normal image with open cv is no problem.</p>\n\n<p>Reading and saving the normal image is done as follows:</p>\n\n<pre><code>//find image in Memory\nuchar *imageMem = (uchar*)img + sizeof( RDB_IMAGE_t );\n\n//set heights and width to image parameters\nint w = img-&gt;width;\nint h = img-&gt;height;\n\n//create matrix for image\nMat image(h,w,CV_8UC3,imageMem);\n\n//image is upside-down in memory, so it has to be flipped\nMat flipped;\nflip(image,flipped,0);\n\n//change color from bgr to rgb\nMat recolored;\ncvtColor(flipped, recolored, COLOR_BGR2RGB);\n\nstring folderName = \"normal\";\nstring name = \"normal_\";\nstring type = \".png\";\n\nss &lt;&lt; folderName &lt;&lt; \"/\" &lt;&lt; name &lt;&lt; simFrame &lt;&lt; type;\n\nstring filename = ss.str();\nss.str(\"\");\nimwrite( filename, recolored );\n</code></pre>\n\n<p>Now to the actual problem. The simulation saves the depth information under a different shared memory address, but always into img. Depending on the index of the image the normal or depth the pointer img points to the corresponding memory address. The address for the normal image is 0x0811a and for the depth image 0x0811b. The code for saving the depth image looks as follows:</p>\n\n<pre><code>uchar *imageMem = (uchar*)img + sizeof( RDB_IMAGE_t );\n\nint w = img-&gt;width;\nint h = img-&gt;height;\n\nMat image_d(h,w,CV_8UC4,imageMem);\n\nMat flipped;\nflip(image_d,flipped,0);\n\nMat recolored;\ncvtColor(flipped, recolored, CV_BGRA2GRAY, 1);\n\nstring folderName = \"Depth\";\nstring name = \"Depth_\";\nstring type = \".png\";\n\nss &lt;&lt; folderName &lt;&lt; \"/\" &lt;&lt; name &lt;&lt; simFrame &lt;&lt; type;\n\nstring filename = ss.str();\nss.str(\"\");\nimwrite( filename, recolored );   \n</code></pre>\n\n<p>The result after saving the depth information looks like this:</p>\n\n<p><img src=\"https://i.stack.imgur.com/pZcSw.png\" alt=\"Depth image while using CV_8UC4 to save the image.\"></p>\n\n<p>But it should look like this:</p>\n\n<p><img src=\"https://i.stack.imgur.com/4bSOW.png\" alt=\"How the image should look like after saving.\"></p>\n\n<p>The developer of the simulation says the depth image is send to the shared memory as a 4 byte per pixel image and one pixel always has the value 255. This information doesn't help me, but maybe you.</p>\n\n<p>All I know about image processing I thought my self and at this point I really don't know what to do.</p>\n\n<p><a href=\"https://i.stack.imgur.com/jF5U5.png\" rel=\"nofollow noreferrer\">Image Micka requested</a></p>\n"}, {"tags": ["c++", "g++", "clang++"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 3, "creation_date": 1492618205, "post_id": 43500813, "comment_id": 74055980, "body": "You are not overloading anything. You are redefining an existing library function. The effect of this is undefined."}], "owner": {"reputation": 1241, "user_id": 1008966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d946ead65e7f775142938c4dd570791?s=128&d=identicon&r=PG", "display_name": "Dan R", "link": "https://stackoverflow.com/users/1008966/dan-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "closed_date": 1492620090, "answer_count": 0, "score": 3, "last_activity_date": 1492617926, "creation_date": 1492617926, "question_id": 43500813, "link": "https://stackoverflow.com/questions/43500813/clang-vs-g-difference-in-overloaded-function-declaration-order", "closed_reason": "Duplicate", "title": "Clang++ vs g++ difference in overloaded function declaration order", "body": "<p>I found a difference in clang++ vs g++ behavior when adding an overloaded function definition for something in the <code>&lt;cmath&gt;</code> library.</p>\n\n<p>Specifically, in this program:</p>\n\n<pre><code>#include &lt;cmath&gt;\n#include &lt;iostream&gt;\n\ndouble cos(double x) throw();\n\nint main() {\n  std::cout &lt;&lt; cos(1.0) &lt;&lt; std::endl;\n  return 0;\n}\n\ndouble cos(double x) throw() {\n  return 10;\n}\n</code></pre>\n\n<p>when I compile with <code>clang++</code>, it calls my overloaded version of <code>cos</code> and prints <code>10</code>, but with <code>g++</code> it calls the version in the math library and prints <code>0.540302</code>.</p>\n\n<p>Interestingly, <code>g++</code> will also call my overloaded <code>cos</code> if I put the function definition (not just the prototype) before <code>main</code>.</p>\n\n<p>Is there some unspecified behavior here, or a bug in one of these compilers? I can't figure out what the standard says should happen in this case.</p>\n\n<p>I have tried this with multiple versions of both compilers and get the same behavior, with no warnings except that parameter <code>x</code> is unused.</p>\n"}, {"tags": ["c++", "boost-asio"], "comments": [{"owner": {"reputation": 5518, "user_id": 2648679, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6zeEM.jpg?s=128&g=1", "display_name": "Abhinav Gauniyal", "link": "https://stackoverflow.com/users/2648679/abhinav-gauniyal"}, "edited": false, "score": 0, "creation_date": 1492618502, "post_id": 43500713, "comment_id": 74056192, "body": "This is weird, can you check with a debugger which line consumes 3 seconds inside <code>writeHandler</code>? Which protocol is it writing to? If it&#39;s a stream, it might be that buffer could be getting full, but then this is async..."}, {"owner": {"reputation": 1348, "user_id": 798879, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/63a64cc340a481b293867a8db97626dd?s=128&d=identicon&r=PG", "display_name": "Sharath", "link": "https://stackoverflow.com/users/798879/sharath"}, "reply_to_user": {"reputation": 5518, "user_id": 2648679, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6zeEM.jpg?s=128&g=1", "display_name": "Abhinav Gauniyal", "link": "https://stackoverflow.com/users/2648679/abhinav-gauniyal"}, "edited": false, "score": 0, "creation_date": 1492618697, "post_id": 43500713, "comment_id": 74056327, "body": "Not inside writehandler. The writeHandler gets called 3 seconds after I execute async_write() function. It usually comes back in few milliseconds."}, {"owner": {"reputation": 5518, "user_id": 2648679, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6zeEM.jpg?s=128&g=1", "display_name": "Abhinav Gauniyal", "link": "https://stackoverflow.com/users/2648679/abhinav-gauniyal"}, "edited": false, "score": 0, "creation_date": 1492618874, "post_id": 43500713, "comment_id": 74056453, "body": "Try a debugger till someone experienced with boost asio comes along, 3 seconds are lot so debugger should tell you where they are going."}, {"owner": {"reputation": 1348, "user_id": 798879, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/63a64cc340a481b293867a8db97626dd?s=128&d=identicon&r=PG", "display_name": "Sharath", "link": "https://stackoverflow.com/users/798879/sharath"}, "reply_to_user": {"reputation": 5518, "user_id": 2648679, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6zeEM.jpg?s=128&g=1", "display_name": "Abhinav Gauniyal", "link": "https://stackoverflow.com/users/2648679/abhinav-gauniyal"}, "edited": false, "score": 0, "creation_date": 1492626091, "post_id": 43500713, "comment_id": 74061069, "body": "Found the answer myself. Regarding your advice on using debugger, have you tried putting a break point in boost code? It is a maze."}, {"owner": {"reputation": 5518, "user_id": 2648679, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6zeEM.jpg?s=128&g=1", "display_name": "Abhinav Gauniyal", "link": "https://stackoverflow.com/users/2648679/abhinav-gauniyal"}, "edited": false, "score": 0, "creation_date": 1492773666, "post_id": 43500713, "comment_id": 74134595, "body": "I already hinted that it might&#39;ve been buffer in my first comment, if it wasn&#39;t then no matter how difficult it would&#39;ve been, the sane choice was to use a debugger :p"}], "answers": [{"tags": [], "owner": {"reputation": 1348, "user_id": 798879, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/63a64cc340a481b293867a8db97626dd?s=128&d=identicon&r=PG", "display_name": "Sharath", "link": "https://stackoverflow.com/users/798879/sharath"}, "is_accepted": false, "score": 1, "last_activity_date": 1492625991, "creation_date": 1492625991, "answer_id": 43503325, "question_id": 43500713, "link": "https://stackoverflow.com/questions/43500713/asioasync-write-handler-gets-invoked-after-3-seconds/43503325#43503325", "title": "asio::async_write handler gets invoked after 3 seconds", "body": "<p>After thinking about it for a while, I decided to see whether it was the buffer limit issue. So I looked up the send buffer size, it was at 64K. So I changed it to 1MB.</p>\n\n<pre><code>    boost::asio::socket_base::send_buffer_size option(1048576);\n    _socket.set_option(option);\n</code></pre>\n\n<p>Solved!!! No more delay.</p>\n"}], "owner": {"reputation": 1348, "user_id": 798879, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/63a64cc340a481b293867a8db97626dd?s=128&d=identicon&r=PG", "display_name": "Sharath", "link": "https://stackoverflow.com/users/798879/sharath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1492625991, "creation_date": 1492617680, "last_edit_date": 1492619806, "question_id": 43500713, "link": "https://stackoverflow.com/questions/43500713/asioasync-write-handler-gets-invoked-after-3-seconds", "title": "asio::async_write handler gets invoked after 3 seconds", "body": "<p>I have been using boost::asio socket libraries for many years now. However, I am encountering one strange problem. I have a class that continuously sends data to another process. It reads from a queue, and sends it across until the queue gets empty. I have removed all those details from the below example to keep it simple. The function socket_write calls asio::async_write, which invokes writeHandler upon completion. I call the socket_write function again from the handler. This works flawlessly at low volume. </p>\n\n<p>However, at high volume, things become weird. At first the program manages to execute 100 cycles of socket_write operation per second. After a minute or so, the writeHandler doesn't for return 3 seconds. Once it is back, another 100 cycles zip through in a second. Then again writeHandler doesn't return for 3 seconds. Once back, another 100 cycles zips through. </p>\n\n<p>I am flummoxed! What can make writeHandler return 100 times a second, followed by 3 seconds of delay, and back to 100 times a second, followed by 3 seconds delay? This is a consistent pattern once it starts. The volume of data is not too high, each write operation doesn't send more than couple hundred bytes. I have timed the read operation on the receiving server too, it never takes more than few millisecond to read. The delay is only in the write operation.</p>\n\n<pre><code>class myclass\n{\npublic:\n    // other stuff\n    void socket_write()\n    {\n        boost::asio::async_write(_socket,boost::asio::buffer(_writeVector),\n            boost::bind(&amp;this_type::writeHandler, shared_from_this(),\n            pSession,boost::asio::placeholders::bytes_transferred,\n            boost::asio::placeholders::error));\n    }\n    void writeHandler(boost::shared_ptr&lt;MessageSession&gt; pSession, size_t bytesWritten, const boost::system::error_code&amp; ec)\n    {\n          // stuff\n        socket_write();   // Call the socket_write function again.\n    }\n};\n</code></pre>\n"}, {"tags": ["c++", "c++11", "redirect"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1492618982, "post_id": 43500658, "comment_id": 74056523, "body": "The operating system is in charge of processing the output of executables.  The C++ language has no facilities for redirecting output."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1492619088, "post_id": 43500658, "comment_id": 74056607, "body": "Common solutions for sharing data between programs:  files, sockets, piping (tell OS to pipe output of other program into standard input for your program), shared memory areas.  Search the internet."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 1, "creation_date": 1492620359, "post_id": 43500658, "comment_id": 74057417, "body": "Have you tried just making the same freopen calls?"}], "answers": [{"tags": [], "owner": {"reputation": 543, "user_id": 3587570, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001071662888/picture?type=large", "display_name": "Valy", "link": "https://stackoverflow.com/users/3587570/valy"}, "is_accepted": false, "score": 1, "last_activity_date": 1492623193, "last_edit_date": 1492623193, "creation_date": 1492622788, "answer_id": 43502344, "question_id": 43500658, "link": "https://stackoverflow.com/questions/43500658/run-exe-and-redirect-stdin-and-out/43502344#43502344", "title": "Run .exe and redirect stdin and out", "body": "<p>Haven't seen a <code>freopen</code> call in a while. This brings back some old memories.</p>\n\n<p>Anyway, I think you should stick with <code>freopen</code>. The <a href=\"http://www.cplusplus.com/reference/cstdio/freopen/\" rel=\"nofollow noreferrer\">documentation</a> page of the function literally states that this is one of the main use cases:</p>\n\n<blockquote>\n  <p>This function is especially useful for redirecting predefined streams like <em>stdin</em>, <em>stdout</em> and <em>stderr</em> to specific files.</p>\n</blockquote>\n\n<p>I don't think you can do the redirection with <code>iostream</code> only, because the <code>iostream</code> library doesn't have an equivalent for the <code>freopen</code> function.</p>\n\n<p>It is interesting though why this solution you tried doesn't work:</p>\n\n<pre><code>std::cin.rdbuf(instr.rdbuf());\nstd::cout.rdbuf(outstr.rdbuf());\n</code></pre>\n\n<p>Maybe with those two lines you just affect the <em>rdbuf</em> of <code>std::cin</code> and <code>std::cout</code> from the current process and the subprocess has another instance of <code>std::cin</code> and <code>std::cout</code>.</p>\n\n<p>The information about files seems to be copied from the parent process to the subprocess when calling <code>system</code>. That is why the changes you do in the main process on <em>stdin</em> and <em>stdout</em> with <code>freopen</code> are also visible in the subprocess.</p>\n\n<p>Regardless, <a href=\"http://www.cplusplus.com/forum/articles/11153/\" rel=\"nofollow noreferrer\">you should not use system</a> to run a subprogram from your main C++ program. As you are probably on Windows (guessing from <code>foo.exe</code>), I would analyze this <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682499(v=vs.85).aspx\" rel=\"nofollow noreferrer\">example</a> from Microsoft. It explains how to create a subprocess and use pipes to redirect the input and output of the subprogram.</p>\n"}, {"tags": [], "owner": {"reputation": 1874, "user_id": 2392247, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/c75972031d4bef871cc9cb8da36a67f9?s=128&d=identicon&r=PG", "display_name": "user34660", "link": "https://stackoverflow.com/users/2392247/user34660"}, "is_accepted": false, "score": 0, "last_activity_date": 1492764085, "last_edit_date": 1495542852, "creation_date": 1492764085, "answer_id": 43537912, "question_id": 43500658, "link": "https://stackoverflow.com/questions/43500658/run-exe-and-redirect-stdin-and-out/43537912#43537912", "title": "Run .exe and redirect stdin and out", "body": "<p>In your sample code using freopen, you are redirecting to/from physical files, correct? In your sample code using std::istringstream and std::ostringstream you are trying to redirect to/from memory, correct? Physical files are not the same as memory. Memory does not have file descriptors. In Linux you can use fmemopen as in <a href=\"https://stackoverflow.com/questions/12249610/c-create-file-in-memory\">windows - C - create file in memory - Stack Overflow</a> but that won't help with C++ standard classes such as std::istringstream and std::ostringstream nor would you be able to redirect stdin and stdout to/from fmemopen, for one thing because fmemopen is not available in all operating systems. The C++ standard classes don't support this type of thing; see <a href=\"https://stackoverflow.com/questions/109449/getting-a-file-from-a-stdfstream\">c++ - Getting a FILE* from a std::fstream - Stack Overflow</a>. std::istream and std::ostream might look like std::istringstream and std::ostringstream at the C++ interace level but internally they are not compatible.</p>\n"}], "owner": {"reputation": 73, "user_id": 1850883, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/51e67957cf893fea35a8670ba58627a8?s=128&d=identicon&r=PG", "display_name": "Muhammad Irham Rasyidi", "link": "https://stackoverflow.com/users/1850883/muhammad-irham-rasyidi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 900, "favorite_count": 1, "answer_count": 2, "score": 5, "last_activity_date": 1547571799, "creation_date": 1492617470, "last_edit_date": 1547571799, "question_id": 43500658, "link": "https://stackoverflow.com/questions/43500658/run-exe-and-redirect-stdin-and-out", "title": "Run .exe and redirect stdin and out", "body": "<p>For most of my life, I've been using <code>cstdio</code>. Now I'm trying to shift over to <code>iostream</code>.</p>\n\n<p>Suppose I have a separate program called \"foo.cpp\" that looks like this:</p>\n\n<pre><code>int main(){ // foo.cpp\n    int x;\n    std::cin &gt;&gt; x;\n    std::cout &lt;&lt; x + 5 &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>In another program called \"bar.cpp\", I call the foo executable. In the past, if I wanted to redirect stdin and stdout to a file, I would use <code>freopen</code> like so:</p>\n\n<pre><code>int main(){ // bar.cpp, redirecting stdin and stdout\n    freopen(\"foo.in\", \"r\", stdin); // Suppose \"foo.in\" contains a single integer \"42\"\n    freopen(\"foo.out\", \"w\", stdout);\n\n    system(\"foo.exe\"); // \"foo.out\" will contain \"47\"\n}\n</code></pre>\n\n<p>Now I'm trying to redirect <code>std::cin</code> and <code>std::cout</code> to stringstreams. Something like this:</p>\n\n<pre><code>int main(){ // bar.cpp, redirecting cin and cout\n    std::istringstream instr(\"62\");\n    std::ostringstream outstr;\n\n    std::cin.rdbuf(instr.rdbuf());\n    std::cout.rdbuf(outstr.rdbuf());\n\n    system(\"foo.exe\"); // outstr should contain \"67\"\n}\n</code></pre>\n\n<p>But what I've learned is that <code>std::cin</code> and <code>std::cout</code> was not redirected when executing \"foo.exe\". The program now expected user input and will print to <code>std::cout</code>. When execution of \"foo.exe\" was done, <code>std::cin</code> and <code>std::cout</code> within \"bar.cpp\" still remained redirected to <code>instr</code> and <code>outstr</code> respectively.</p>\n\n<p>My question is, is there a way to do it with <code>iostream</code> like I intended, or am I stuck with using <code>freopen</code>?</p>\n"}, {"tags": ["c++", "stl"], "comments": [{"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 5, "creation_date": 1492617488, "post_id": 43500633, "comment_id": 74055494, "body": "because <code>sizeof</code> is the size of the object not the count of the elements, also please don&#39;t post your quiz/homework questions here without showing your current attempts and understanding"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 6, "creation_date": 1492617747, "post_id": 43500633, "comment_id": 74055675, "body": "Calling <code>empty()</code> is going to make the intent obvious to anyone reading the code, and I doubt the others would be any more efficient."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1492617774, "post_id": 43500633, "comment_id": 74055693, "body": "As you can see, with several questions by question, not all are answered."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 1, "creation_date": 1492617957, "post_id": 43500633, "comment_id": 74055820, "body": "How <code>empty()</code> is implemented is an implementation detail that may vary depending on who provides your standard library implementation.  You can&#39;t count on its performance being consistent across all compilers on all platforms. But it&#39;s likely to be cheap. Prefer it unless/until your profiling indicates it&#39;s a bottleneck."}], "answers": [{"comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 5, "creation_date": 1492617564, "post_id": 43500669, "comment_id": 74055534, "body": "Empty base classes have addresses too, it&#39;s just they might share that address with other subobjects."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1492618387, "post_id": 43500669, "comment_id": 74056111, "body": "@aschepler Good point.  I&#39;ll remove that"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 2, "creation_date": 1492618609, "post_id": 43500669, "comment_id": 74056269, "body": "I would add that <code>sizeof()</code> is compile time size of object, you cannot use it to determine runtime information in any way."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1492620094, "post_id": 43500669, "comment_id": 74057256, "body": "While strictly true, this isn&#39;t really the reason why attempting to use <code>sizeof</code> for this task is wrong. The reason is that <code>sizeof</code> means a different thing."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 7, "last_activity_date": 1492620155, "last_edit_date": 1492620155, "creation_date": 1492617513, "answer_id": 43500669, "question_id": 43500633, "link": "https://stackoverflow.com/questions/43500633/what-is-the-most-efficient-way-to-check-if-a-c-container-is-empty/43500669#43500669", "title": "What is the most efficient way to check if a C++ container is empty?", "body": "<p>Why is <code>sizeof(c) == 0</code> wrong?  Every object must have an address which means it must have a size of 1 or more.  That means <code>sizeof(anything)</code> is always greater than <code>0</code>.  Because of that <code>sizeof(c) == 0</code> will never be true.</p>\n\n<hr>\n\n<p>Also note that <code>sizeof</code> is a compile time operation.  It will not be able to give you the size of anything that is only known at run time.  For instance</p>\n\n<pre><code>char * foo = new char[20];\nstd::cout &lt;&lt; sizeof(foo);\n</code></pre>\n\n<p>Will always give you the size of the pointer (4 or 8 on most platforms) and not the size of the memory the pointer points to.</p>\n"}, {"tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": true, "score": 3, "last_activity_date": 1493815322, "last_edit_date": 1493815322, "creation_date": 1492620331, "answer_id": 43501563, "question_id": 43500633, "link": "https://stackoverflow.com/questions/43500633/what-is-the-most-efficient-way-to-check-if-a-c-container-is-empty/43501563#43501563", "title": "What is the most efficient way to check if a C++ container is empty?", "body": "<p>All three options to check for empty container are more or less equivalent. Using <code>empty()</code> shows (as denoted in the comments already) most obviously your intention and as a little bonus, it is even the shortest one to write (that's for the lazy ones like me...).</p>\n\n<p>How it is implemented? Vendor specific, probably inlined. Option 1 being used for is not unlikely, but not guaranteed.</p>\n\n<p>Classes are more or less a collection of data of whatever appropriate type. Their internal structure <em>must</em> be known at compile time and thus <em>must</em> be always fix <sup>*)</sup> &ndash; and so, in consequence is their size (must be...).</p>\n\n<p>sizeof(c) will return this fixed size, even for containers, no matter how many elements you have placed in there, and this is why <code>sizeof(c)</code> is wrong (actually, it can never get 0, as mentioned by NathanOliver in his answer, but even if it could, it would be constantly 0 then even if the container was <em>not</em> empty).</p>\n\n<p><br /></p>\n\n<p>To illustrate <code>sizeof</code>: Lets look at some standard containers (I'll leave out the public interface, just concentrate on the data members):</p>\n\n<pre><code>template &lt;typename T&gt;\nvector\n{\n    size_t capacity;\n    size_t size;\n    T* data;\n};\n</code></pre>\n\n<p>This is roughly all a vector needs. The data contained is stored in some array allocated somewhere on the heap, the only thing that is part of the vector <em>class</em> is the pointer to. <code>sizeof</code> such a vector is likely to be 32 (assuming size_t and pointers being 8 bytes large, as on modern 64 bit hardware, so you get 24 bytes for the members and another 8 for the pointer to the vtable, provided this vector class having virtual members) -- <em>constantly</em>.</p>\n\n<pre><code>template&lt;typename T&gt;\nclass list\n{\n    class Node\n    {\n       Node* next;\n       Node* previous;\n       T data;\n    };\n    Node* head;\n    Node* tail;\n};\n</code></pre>\n\n<p>Again - two pointers internally only, content is allocated inside the nodes somewhere on the heap. <code>head</code> and/or <code>tail</code> <em>might</em> be some dummy nodes for easier use within <code>begin()</code> and <code>end()</code>, but if so, that's an implementation detail... sizeof(list) would then most likely be 24 -- constantly.</p>\n\n<p><br /></p>\n\n<p><sup>*)</sup>\n\"always fix\" - during compile time and during runtime of your compiled program; sizes <em>can</em> vary if you compile for different machines (e. g. the vector and list above might have sizes of 16 and 12 if compiled for older 32 bit hardware). Sizes can even vary from one compilation to the other one e. g. due to changed compiler flags (e. g. changing default alignment, ...). But during compilation and once compiled, <code>sizeof</code> is fix.</p>\n"}], "owner": {"reputation": 323, "user_id": 6792315, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8be7b4e5a36e66755bb6d384ead354ac?s=128&d=identicon&r=PG&f=1", "display_name": "Varun Rao", "link": "https://stackoverflow.com/users/6792315/varun-rao"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 0, "closed_date": 1492736355, "accepted_answer_id": 43501563, "answer_count": 2, "score": -6, "last_activity_date": 1493815322, "creation_date": 1492617396, "last_edit_date": 1492617778, "question_id": 43500633, "link": "https://stackoverflow.com/questions/43500633/what-is-the-most-efficient-way-to-check-if-a-c-container-is-empty", "closed_reason": "Needs details or clarity", "title": "What is the most efficient way to check if a C++ container is empty?", "body": "<p>Which of the following is most efficient to check whether a container is empty?\nAssume 'c' is any container part of the C++ Containers library</p>\n\n<pre><code>1. c.begin()==c.end()\n2. c.empty() \n3. c.size()==0\n</code></pre>\n\n<p>In case of 2, the documentation reads \"<strong>Checks</strong> if the container has no elements, i.e. whether begin() == end()\" but <strong>does not</strong> state whether empty() is <strong>implemented</strong> as begin() == end(). So, how exactly is empty() implemented?</p>\n\n<p>Why is this wrong?</p>\n\n<pre><code>sizeof(c) == 0\n</code></pre>\n"}, {"tags": ["c++", "string", "char", "hex"], "comments": [{"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1492617125, "post_id": 43500467, "comment_id": 74055237, "body": "@Barmar The integer is 0x499602d2"}, {"owner": {"reputation": 1148, "user_id": 5383521, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/01531ac40d262787ab7659f7220505df?s=128&d=identicon&r=PG&f=1", "display_name": "flowit", "link": "https://stackoverflow.com/users/5383521/flowit"}, "edited": false, "score": 0, "creation_date": 1492617132, "post_id": 43500467, "comment_id": 74055241, "body": "Does std::string::c_str do what you need?"}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1492617354, "post_id": 43500563, "comment_id": 74055392, "body": "You should note that it&#39;s best for <code>i</code> to be <code>unsigned</code>."}, {"owner": {"reputation": 1506, "user_id": 3910193, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/JCYgl.jpg?s=128&g=1", "display_name": "Person.Junkie", "link": "https://stackoverflow.com/users/3910193/person-junkie"}, "edited": false, "score": 0, "creation_date": 1492617427, "post_id": 43500563, "comment_id": 74055449, "body": "@dasblinkenlight, thank you, that&#39;s what I need.  Playing with bits is always awesome."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1492617440, "post_id": 43500563, "comment_id": 74055458, "body": "@Barmar Right. Making <code>hex</code> unsigned would do the trick, too. I edited the answer, thank you very much!"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1492620036, "post_id": 43500563, "comment_id": 74057220, "body": "Now rename the variable because calling it <code>hex</code> is extremely misleading"}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1492710332, "post_id": 43500563, "comment_id": 74106114, "body": "be careful, as the <code>0</code> value can be interpersed in the integer, for example if you have the number <code>65536</code>, it should convert into <code>&quot;\\x01\\x00\\x00&quot;</code>, and the final result should be wrong, as you have the delimiter inside your string, acting as the delimiter, you&#39;ll get <code>&quot;\\x01&quot;</code>, not the expected value."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 3, "last_activity_date": 1492617563, "last_edit_date": 1492617563, "creation_date": 1492617199, "answer_id": 43500563, "question_id": 43500467, "link": "https://stackoverflow.com/questions/43500467/hex-string-to-hex-char/43500563#43500563", "title": "Hex string to hex char[]", "body": "<p>Since you are looking for a null-terminated string of printable and non-printable characters, HEX does not enter into the picture: the four characters in the string are simply the four bytes of <code>i</code>'s representation, which you can get as follows:</p>\n\n<pre><code>char hex[] = {\n    (i &gt;&gt; 24) &amp; 0xFF\n,   (i &gt;&gt; 16) &amp; 0xFF\n,   (i &gt;&gt;  8) &amp; 0xFF\n,   (i &gt;&gt;  0) &amp; 0xFF\n,   0 // Null terminator to match your C string\n};\n</code></pre>\n\n<p>Note that it is probably a good idea to make <code>i</code> and <code>hex</code> unsigned.</p>\n\n<p><a href=\"http://ideone.com/YkoAQc\" rel=\"nofollow noreferrer\">Demo.</a></p>\n"}], "owner": {"reputation": 1506, "user_id": 3910193, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/JCYgl.jpg?s=128&g=1", "display_name": "Person.Junkie", "link": "https://stackoverflow.com/users/3910193/person-junkie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 43500563, "answer_count": 1, "score": 0, "last_activity_date": 1492617563, "creation_date": 1492616903, "last_edit_date": 1492617525, "question_id": 43500467, "link": "https://stackoverflow.com/questions/43500467/hex-string-to-hex-char", "title": "Hex string to hex char[]", "body": "<p>I have an integer and want to get hex of this integer in form of char[].</p>\n\n<p>example: </p>\n\n<pre><code>unsigned int i = 1234567890;\n</code></pre>\n\n<p>and I want to get the following char[]:</p>\n\n<pre><code>char hex[] = \"\\x49\\x96\\x02\\d2\";  // hex of i;\n</code></pre>\n\n<p>I can get hex as a string:</p>\n\n<pre><code>        std::stringstream sstream;\n        sstream &lt;&lt; std::hex &lt;&lt; image_base_OEP;\n        auto result =  sstream.str();\n</code></pre>\n\n<p>but that's not what I need.</p>\n"}, {"tags": ["c++", "dictionary", "recursion"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1492617315, "post_id": 43500307, "comment_id": 74055361, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation.  <a href=\"http://stackoverflow.com/help/on-topic\">on topic</a> and <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask</a> apply here. StackOverflow is not a design, coding, research, or tutorial service."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 2, "creation_date": 1492617478, "post_id": 43500307, "comment_id": 74055484, "body": "There are plenty of references on line for graph traversal; you haven&#39;t written any code to attempt any of them.  &quot;How would I go about this&quot; is not a <i>specific</i> programming question; it&#39;s asking us to design the pith of your program without due diligence from you.  Start with Dijkstra&#39;s algorithm, make a good effort at then, and then update your question to something within the range of Stack Overflow."}], "answers": [{"tags": [], "owner": {"reputation": 3529, "user_id": 2036035, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/746fc48544cf535f52f1247079e5a927?s=128&d=identicon&r=PG", "display_name": "hythis", "link": "https://stackoverflow.com/users/2036035/hythis"}, "is_accepted": false, "score": 0, "last_activity_date": 1492621151, "creation_date": 1492621151, "answer_id": 43501836, "question_id": 43500307, "link": "https://stackoverflow.com/questions/43500307/finding-number-of-nodes-along-a-path/43501836#43501836", "title": "Finding number of nodes along a path", "body": "<p>Not sure what you mean by 'ghetto map', I'm guessing you its just a joke. </p>\n\n<p>What you are actually talking about is a concept in Computer Science/Discrete Mathematics called a <a href=\"https://en.wikipedia.org/wiki/Graph_(discrete_mathematics)\" rel=\"nofollow noreferrer\">Graph</a>.  There are many types of graphs, graphs that have only positive weights graphs that contain negative weights, graphs in which all paths are bidirectional, graphs which paths are uni directional graphs where edges must all be connected, graphs were edges have a certain wight, capacity and/or some other feature etc... </p>\n\n<p>In this case what I think what you are dealing with is an unweighted (no weights assigned to edges) <a href=\"https://en.wikipedia.org/wiki/Directed_graph\" rel=\"nofollow noreferrer\">directed</a> (a connection from A to B does not imply a connection from B to A) graph (unweighted directed graph) and where the graph may additional be <a href=\"https://en.wikipedia.org/wiki/Connectivity_(graph_theory)\" rel=\"nofollow noreferrer\">unconnected</a> or not.</p>\n\n<p>You are additionally using a type of <a href=\"https://en.wikipedia.org/wiki/Adjacency_list\" rel=\"nofollow noreferrer\">Adjacency List</a> in order to represent the connections between graph nodes. </p>\n\n<p>There are many algorithms to traverse a graph (such as Dijkstras for path finding or Uniform Cost Search), however most if not all these algorithms come from two basic search algorithms called <a href=\"https://en.wikipedia.org/wiki/Depth-first_search\" rel=\"nofollow noreferrer\">Depth First Search</a> and <a href=\"https://en.wikipedia.org/wiki/Breadth-first_search\" rel=\"nofollow noreferrer\">Breadth First Search</a> </p>\n\n<p>Depth first search is exactly what the name implies.  If you have some structure to represent your graph (say, your adjacency list) you will continually search the right or left most node to the deepest point until you either hit your goal or a dead end.  This might look like the following (note this is Python):</p>\n\n<pre><code>def DepthFirstSearch(adjacencylist, start, end):\n    traversallist = []\n    traversallist.push(start)\n    for edge in adjacencylist[start]:\n        if edge.connectsTo(end):\n           traversalstack.push(end)\n           return traversallist\n        else:\n            resursivelist = DepthFirstSearch(adjacencylist, edge.endNode(), end)\n            if resursive_list != []:\n                return traversallist.extend(recursivelist)\n    return []\n</code></pre>\n\n<p>if it returns an empty list ([]) there was no connection.  If it didn't there was a connection and returned the first path found. </p>\n\n<p>Breadth frist search is exaclty what <em>its</em> name implies.  In the same scenario as before, instead of searching for the deepest node you search along each connecting edge first before going deeper.  This might look like the following:</p>\n\n<pre><code>#note that queue starts with the start element\ndef BreadthFirstSearch(adjacencylist, queue, end):\n    start = queue.pop()\n    traversallist = []\n    traversallist.push(start)\n\n    for edge in adjacencylist[start]:\n        if edge.connectsTo(end):\n           traversalstack.push(end)\n           return traversallist\n    queue.push(adjacencylist[start])\n    if not queue.empty():\n        return traversallist.extend(BreadthFirstSearch(adjacencylist, queue, end))\n    else:\n        return []\n</code></pre>\n\n<p>Both of these methods, however, will run infinently in the case where you have a loop during traversal.   To avoid this, you can setup a list (or for bettern runtime complexity, a hashtable) to see if you've already traversed something.</p>\n\n<pre><code>def DepthFirstSearch(adjacencylist, start, end, closedset):\n    ...\n    if start not in closedset:\n    ...\n    else:\n       return []\n\ndef BreadthFirstSearch(adjacencylist, queue, end, closedset):\n    ...\n    if start not in closedset:\n    ...\n    else:\n       return []\n</code></pre>\n\n<p>This should give you enough information to implement a graph path finder that will return a path (of which you can simply return the size of if you only need the number of nodes) in c++. </p>\n"}], "owner": {"reputation": 179, "user_id": 1717956, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2d2e56c3f0532570bac688679afcd387?s=128&d=identicon&r=PG", "display_name": "ViscousRandom", "link": "https://stackoverflow.com/users/1717956/viscousrandom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1492621151, "creation_date": 1492616440, "last_edit_date": 1492617219, "question_id": 43500307, "link": "https://stackoverflow.com/questions/43500307/finding-number-of-nodes-along-a-path", "title": "Finding number of nodes along a path", "body": "<p>I am trying to navigate through a ghetto map.  I'm inputting my nodes from a .txt that has values like this:</p>\n\n<pre><code>3 -1\n2 3 -1\n1 -1\n0 1 4 6 -1\n3 5 7 -1\n4 7 8 -1\n3 7 -1\n4 5 6 8 -1\n5 7 -1\n10 -1\n9 -1\n</code></pre>\n\n<p>So:</p>\n\n<ul>\n<li>node 0 will be connected to node 3</li>\n<li>node 1 will be connected to nodes 2 and 3</li>\n<li>node 2 will be connected to node 1</li>\n</ul>\n\n<p>and so on... the '-1' is just to terminate the line</p>\n\n<p>Currently, I am storing them in an array of size 11, where I've just used <code>getline()</code> to pull each line number into the matching array cell; this is to output to the screen. I will also put them into a 2d array where each value had its own cell.  I'm going to ask the user for a starting node, and ending node, then I'll use a recursive function to calculate a path between the two (if there is one), and output how many nodes are along that path.  I'm not even interested in the optimal path, any will do. </p>\n\n<p>How would I go about this recursively?</p>\n\n<p>The unfinished code thus far:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;fstream&gt;\n#include&lt;string&gt;\nusing namespace std;\n\nconst int ARRAY_SIZE = 11;\n\nvoid toString(string network[ARRAY_SIZE]);\nint numNodes(string network[], int start, int end);\n\nint main()\n{\n    int start;\n    int end;\n\n    // inputting network into array\n    string network[ARRAY_SIZE];\n\n    ifstream in;\n    in.open(\"network.txt\");\n\n    if (in.is_open())\n    {\n        while (!in.eof())\n        {\n            for (int i = 0; i &lt; ARRAY_SIZE; i++)\n            {\n                getline(in, network[i]);\n            }\n        }\n    }\n\n    in.close();\n\n    //start of user prompts\n    cout &lt;&lt; \"Welcome. \" &lt;&lt; endl &lt;&lt; \"Here is the network \" &lt;&lt; endl &lt;&lt; endl;\n\n    toString(network);\n\n    // the loop for start val\n    do\n    {\n        cout &lt;&lt; \"Please enter a a starting node number (0-10), enter '-1' to quit\" &lt;&lt; endl;\n        cin &gt;&gt; start;\n        if (start == -1)\n            return 0;\n    } while (start &lt; 0 &amp;&amp; start &gt; 10);\n\n    toString(network);\n\n\n    //loop for end value\n    do\n    {\n        cout &lt;&lt; \"Please enter an ending node number (0-10), enter '-1' to quit\" &lt;&lt; endl;\n        cin &gt;&gt; end;\n        if (start == -1)\n            return 0;\n    } while (end &lt; 0 &amp;&amp; end &gt; 10);\n\n\n    //recursive stuffs \n\n    return 0;\n}\n\nint numNodes(string network[], int start, int end)\n{\n    //unfinished function\n    int num;\n\n    //base case\n    if (start == end)\n    {\n        return 1;\n    }\n\n    //recursion\n    else\n    {\n\n    }\n\n    return num;\n}\n\nvoid toString(string network[ARRAY_SIZE])\n{\n    cout &lt;&lt; endl;\n    for (int i = 0; i &lt; ARRAY_SIZE; i++)\n    {\n        cout &lt;&lt; network[i] &lt;&lt; endl;\n    }\n\n    cout &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "performance", "optimization", "boolean"], "comments": [{"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 1, "creation_date": 1492616772, "post_id": 43500300, "comment_id": 74054973, "body": "The book you&#39;ve linked gives detailed examples and explains further just below that quote. If your question is &quot;Should I never use bool again?&quot;, then the answer would be &quot;No&quot;!"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 2, "creation_date": 1492616832, "post_id": 43500300, "comment_id": 74055022, "body": "<i>&quot;all operators that have Boolean variables as input check if the inputs have any other value than 0 or 1&quot;</i> That is not correct. The other text <i>&quot;Boolean variables are stored as 8-bit integers with the value 0 for false and 1 for true.&quot;</i> is also not quite correct, the bits that make up <code>true</code> and <code>false</code> are not specified by the standard and compiler specific. You should consider ignoring everything in that PDF and read something from <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">here</a>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1492617224, "post_id": 43500300, "comment_id": 74055288, "body": "@nwp I thought <code>false</code> was specified as <code>0</code> and all other numbers are <code>true</code>."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1492617344, "post_id": 43500300, "comment_id": 74055387, "body": "@NathanOliver That only applies to integers, not to <code>bool</code>s. Possibly also applies to pointers, except that <code>nullptr</code> isn&#39;t necessarily all bits being <code>0</code>."}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1492618021, "post_id": 43500300, "comment_id": 74055861, "body": "@nwp Note that AF&#39;s book is not about C++ in general, it is about specific implementations on specific platforms, as advertised at the beginning. Did you check what g++/clang++/sunCC (I only tested those 3) generate for <code>bool a,b,c;void fun(){c=a&amp;&amp;b;}</code> on x86_64-linux? Maybe that&#39;s a common bug in those compilers, but bugs can be relevant information. On the other hand, I agree that the statements in the book are too strong and the bool situation should not be presented as being so absolutely, unfixably broken."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "reply_to_user": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1492618486, "post_id": 43500300, "comment_id": 74056176, "body": "@MarcGlisse No I missed that. It is undefined behavior which is even worse. Would recommend deleting immediately."}], "owner": {"reputation": 21, "user_id": 7827870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37bbbfccd88a9da524617e966668ec61?s=128&d=identicon&r=PG&f=1", "display_name": "Splend", "link": "https://stackoverflow.com/users/7827870/splend"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 519, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1492616555, "creation_date": 1492616417, "last_edit_date": 1492616555, "question_id": 43500300, "link": "https://stackoverflow.com/questions/43500300/bool-performance-in-c", "title": "bool performance in C++", "body": "<p>Is there any performance difference in situations when <code>bool</code> is initialized with a value different from <code>0</code> and <code>1</code>?</p>\n\n<p>I have read in <a href=\"http://agner.org/optimize/optimizing_cpp.pdf\" rel=\"nofollow noreferrer\" title=\"Optimizing C++ by Agner Fog\">Optimizing C++ by Agner Fog</a> that:</p>\n\n<blockquote>\n  <p>Boolean variables are overdetermined in the sense that all operators that have Boolean\n  variables as input check if the inputs have any other value than 0 or 1, but operators that\n  have Booleans as output can produce no other value than 0 or 1. This makes operations\n  with Boolean variables as input less efficient than necessary. </p>\n</blockquote>\n\n<p>Can anybody explain what does it mean?</p>\n"}, {"tags": ["c++", "multithreading", "boost"], "comments": [{"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1492615927, "post_id": 43500033, "comment_id": 74054374, "body": "Is there a particular reason you need to use <code>&lt;boost&#47;thread.hpp&gt;</code> instead of <code>&lt;thread&gt;</code> from the C++ Standard Library?"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1492615954, "post_id": 43500033, "comment_id": 74054397, "body": "How is it picking up the <i>&quot;adaptive vision&quot;</i> includes in the middle of including boost?  Looks like 3rd party library naming issues.  If you have any <code>using namespace xxx</code> in your code try removing it/them."}, {"owner": {"reputation": 4270, "user_id": 2386113, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/82njB.jpg?s=128&g=1", "display_name": "skm", "link": "https://stackoverflow.com/users/2386113/skm"}, "reply_to_user": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1492616070, "post_id": 43500033, "comment_id": 74054487, "body": "@Xirema: I am using VS2010 in which its quite difficult to implement multithreading that&#39;s why I am using Boost libraries for multithreading."}, {"owner": {"reputation": 4270, "user_id": 2386113, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/82njB.jpg?s=128&g=1", "display_name": "skm", "link": "https://stackoverflow.com/users/2386113/skm"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1492616213, "post_id": 43500033, "comment_id": 74054590, "body": "@RichardCritten: Yes, adaptive vision is a third party library and the file <code>ThreadManager.cpp</code> already has a namespace <code>namespace avs {  ----CODE---- }</code>. I can add extra files but I must include them into <code>ThreadManager.cpp</code> file and it throws these errors. BTW there is no <code>using namespace</code> in the code."}, {"owner": {"reputation": 142, "user_id": 3894601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcd7b231353ea07e56853705b8c66af2?s=128&d=identicon&r=PG&f=1", "display_name": "pmatyszok", "link": "https://stackoverflow.com/users/3894601/pmatyszok"}, "edited": false, "score": 1, "creation_date": 1492668987, "post_id": 43500033, "comment_id": 74077016, "body": "Have you tried changing order of includes? It looks like name collision, the preprocessor substitutes <code>dummy</code> for <code>atl::dummy</code>. If you include boost header first, and the <code>dummy</code>-macro header second, the problem should not occur anymore?"}, {"owner": {"reputation": 4270, "user_id": 2386113, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/82njB.jpg?s=128&g=1", "display_name": "skm", "link": "https://stackoverflow.com/users/2386113/skm"}, "reply_to_user": {"reputation": 142, "user_id": 3894601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcd7b231353ea07e56853705b8c66af2?s=128&d=identicon&r=PG&f=1", "display_name": "pmatyszok", "link": "https://stackoverflow.com/users/3894601/pmatyszok"}, "edited": false, "score": 0, "creation_date": 1492669484, "post_id": 43500033, "comment_id": 74077276, "body": "@pmatyszok: Solved the problem for now...but is there any proper solution??"}, {"owner": {"reputation": 142, "user_id": 3894601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcd7b231353ea07e56853705b8c66af2?s=128&d=identicon&r=PG&f=1", "display_name": "pmatyszok", "link": "https://stackoverflow.com/users/3894601/pmatyszok"}, "edited": false, "score": 0, "creation_date": 1492672655, "post_id": 43500033, "comment_id": 74079203, "body": "The proper solution is to avoid name collision by software producers, there are means for that, but as a user you cannot do much more. Try contacting support."}], "owner": {"reputation": 4270, "user_id": 2386113, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/82njB.jpg?s=128&g=1", "display_name": "skm", "link": "https://stackoverflow.com/users/2386113/skm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 341, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1492617366, "creation_date": 1492615666, "last_edit_date": 1492617366, "question_id": 43500033, "link": "https://stackoverflow.com/questions/43500033/boost-thread-hpp-include-error", "title": "Boost thread.hpp include error", "body": "<p>I am able to include boost libraries in a simple sample project without any problem and it works fine. But as soon as I include <code>#include &lt;boost/thread.hpp&gt;</code> in one of my other project which is already using some other libraries, I am getting the following compilation errors:</p>\n\n<pre><code>1&gt;ClCompile:    \n1&gt;  ThreadManager.cpp    \n1&gt;C:\\Boost\\include\\boost-1_63\\boost/container/container_fwd.hpp(302): warning C4003: not enough actual parameters for macro 'dummy'     \n1&gt;C:\\Boost\\include\\boost-1_63\\boost/container/container_fwd.hpp(302): error C2976: 'atl::Dummy' : too few template arguments    \n1&gt;C:\\program files\\adaptive vision\\adaptive vision studio 4.3 professional\\sdk\\include\\ATL/Dummy.h(17) : see declaration of 'atl::Dummy'    \n1&gt;C:\\Boost\\include\\boost-1_63\\boost/container/container_fwd.hpp(302): error C3484: syntax error: expected '-&gt;' before the return type    \n1&gt;C:\\Boost\\include\\boost-1_63\\boost/container/container_fwd.hpp(302): error C2061: syntax error : identifier 'Get'    \n1&gt;C:\\Boost\\include\\boost-1_63\\boost/container/container_fwd.hpp(302): error C2334: unexpected token(s) preceding '{'; skipping apparent function body    \n1&gt;    \n1&gt;Build FAILED.\n</code></pre>\n\n<p><strong>PS:</strong> If I include <code>#include &lt;boost/chrono.hpp&gt;</code> instead of <code>#include &lt;boost/thread.hpp&gt;</code> then there is no error.</p>\n\n<p><strong>PSS:</strong> I am using Windows, Visual Studio 2010 (that's why Boost)</p>\n\n<p><strong>Sample Code:</strong></p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n\n#include &lt;stdlib.h&gt;\n\n//Header for boost multithreading\n//#include &lt;boost/chrono.hpp&gt;\n#include &lt;boost/thread.hpp&gt;\n\nnamespace avs //Adaptive Vision\n{\n    class MyProgram : public UserFilter\n    {\n        int Invoke()\n        {\n            //CODE\n        }\n    };\n\n}\n</code></pre>\n"}, {"tags": ["c++", "ubuntu", "vmware", "fbdev"], "answers": [{"tags": [], "owner": {"reputation": 570, "user_id": 3831520, "user_type": "registered", "accept_rate": 11, "profile_image": "https://i.stack.imgur.com/DuZxI.jpg?s=128&g=1", "display_name": "TuanPM", "link": "https://stackoverflow.com/users/3831520/tuanpm"}, "is_accepted": false, "score": 0, "last_activity_date": 1492663766, "creation_date": 1492663766, "answer_id": 43510441, "question_id": 43499989, "link": "https://stackoverflow.com/questions/43499989/linux-content-of-dev-fb0-not-displayed-to-screen-as-expected/43510441#43510441", "title": "Linux: Content of /dev/fb0 not displayed to screen as expected", "body": "<p>I have solved my problem.\nBasically, content of /dev/fb0 not diplayed on x window but displayed on virtual console.\nI have to switch to virtual console by press 'Ctrl + Alt + F1', then run my program. After that my PNG files displayed Ok.</p>\n"}], "owner": {"reputation": 570, "user_id": 3831520, "user_type": "registered", "accept_rate": 11, "profile_image": "https://i.stack.imgur.com/DuZxI.jpg?s=128&g=1", "display_name": "TuanPM", "link": "https://stackoverflow.com/users/3831520/tuanpm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 818, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1492663766, "creation_date": 1492615568, "last_edit_date": 1492653405, "question_id": 43499989, "link": "https://stackoverflow.com/questions/43499989/linux-content-of-dev-fb0-not-displayed-to-screen-as-expected", "title": "Linux: Content of /dev/fb0 not displayed to screen as expected", "body": "<p>I make a small c++ program on Ubuntu 14.04 virtual machine (run by VMWare) to draw some PNG files to framebuffer \"/dev/fb0\".\nI expect content of the PNG files will be displayed on a window on Ubuntu.\nBut after i run program, VMWare switch to other screen (see the picture1.png below) </p>\n\n<p><a href=\"https://i.stack.imgur.com/GghA1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GghA1.png\" alt=\"enter image description here\"></a></p>\n\n<p>Then, if i make the VMWare full screen, the VMWare switch back to screen of Ubuntu (see the picture2.png below) </p>\n\n<p><a href=\"https://i.stack.imgur.com/UPEfX.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UPEfX.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Are there something wrong when run Ubuntu virtual machine by VMWare ?</p>\n"}, {"tags": ["c++", "stl", "set-union"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1492615250, "post_id": 43499806, "comment_id": 74053888, "body": "<a href=\"http://en.cppreference.com/w/cpp/algorithm/set_union\" rel=\"nofollow noreferrer\">This <code>std::set_union</code> reference</a> should be helpful."}], "answers": [{"tags": [], "owner": {"reputation": 5915, "user_id": 2019993, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5QeWd.jpg?s=128&g=1", "display_name": "Zhenxiao Hao", "link": "https://stackoverflow.com/users/2019993/zhenxiao-hao"}, "is_accepted": true, "score": 1, "last_activity_date": 1492615265, "creation_date": 1492615265, "answer_id": 43499874, "question_id": 43499806, "link": "https://stackoverflow.com/questions/43499806/does-std-set-union-always-take-common-elements-from-first/43499874#43499874", "title": "does std set_union always take common elements from first", "body": "<p>Yes, it does, from the reference <a href=\"http://www.cplusplus.com/reference/algorithm/set_union/\" rel=\"nofollow noreferrer\">here</a>:</p>\n\n<blockquote>\n  <p>The union of two sets is formed by the elements that are present in either one of the sets, or in both. Elements from the second range that have an equivalent element in the first range are not copied to the resulting range.</p>\n</blockquote>\n\n<p>If you want it to pick from the second (<strong>fooB</strong>), you swap the arguments:</p>\n\n<pre><code>std::set_union(fooB, fooB+5, fooA, fooA+5, std::back_inserter(fooUnion), comp);\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7890541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b374aa3ac5d55e849073435400dac70?s=128&d=identicon&r=PG&f=1", "display_name": "Daneil", "link": "https://stackoverflow.com/users/7890541/daneil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 43499874, "answer_count": 1, "score": 0, "last_activity_date": 1492615265, "creation_date": 1492615110, "question_id": 43499806, "link": "https://stackoverflow.com/questions/43499806/does-std-set-union-always-take-common-elements-from-first", "title": "does std set_union always take common elements from first", "body": "<p>When there are common elements in two arrays, does std <code>set_union</code> always take those common elements from the first array? From the code snippet below it shows it always picks common elements from the first array, but is this guaranteed? How to make it to pick from the second.</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n\nstruct Foo\n{\n  Foo(int i, const std::string&amp; n): id(i), name(n){}\n  int id;\n  std::string name;\n};\n\nbool comp(const Foo&amp; first, const Foo&amp; second)\n{\n  return first.id &lt; second.id;\n}\n\nint main()\n{\n  Foo foo5A(5, \"A\");\n  Foo foo10A(10, \"A\");\n  Foo foo15A(15, \"A\");\n  Foo foo20A(20, \"A\");\n  Foo foo25A(25, \"A\");\n  Foo fooA[] = {foo5A, foo10A, foo15A, foo20A, foo25A};\n\n  Foo foo10B(10, \"B\");\n  Foo foo20B(20, \"B\");\n  Foo foo30B(30, \"B\");\n  Foo foo40B(40, \"B\");\n  Foo foo50B(50, \"B\");\n  Foo fooB[] = {foo10B, foo20B, foo30B, foo40B, foo50B};\n\n  std::vector&lt;Foo&gt; fooUnion;\n  std::set_union(fooA, fooA+5, fooB, fooB+5, std::back_inserter(fooUnion), comp);\n\n  for(const auto&amp; f : fooUnion)\n  {\n    std::cout &lt;&lt; f.id &lt;&lt; \":\" &lt;&lt; f.name &lt;&lt; std::endl;    \n  }  \n}\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>5:A\n10:A\n15:A\n20:A\n25:A\n30:B\n40:B\n50:B\n</code></pre>\n"}, {"tags": ["c++", "select", "stdin"], "comments": [{"owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "edited": false, "score": 1, "creation_date": 1492615088, "post_id": 43499743, "comment_id": 74053776, "body": "Are you using C <i>or</i> C++? There is no such language as C/C++"}, {"owner": {"reputation": 141, "user_id": 7476166, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/c06b9df249c4f63863b6ed1551dd7bec?s=128&d=identicon&r=PG&f=1", "display_name": "Spook", "link": "https://stackoverflow.com/users/7476166/spook"}, "reply_to_user": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "edited": false, "score": 0, "creation_date": 1492615198, "post_id": 43499743, "comment_id": 74053862, "body": "edited to c++ only"}], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 7476166, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/c06b9df249c4f63863b6ed1551dd7bec?s=128&d=identicon&r=PG&f=1", "display_name": "Spook", "link": "https://stackoverflow.com/users/7476166/spook"}, "edited": false, "score": 0, "creation_date": 1492618529, "post_id": 43499994, "comment_id": 74056209, "body": "I tried using function <code>getchar</code> instead of <code>getline</code> and read till <code>EOF</code> and it still does the same and getchar returns <code>EOF</code> in every iteration of main loop. Could you please write exactly where should I test <code>cin.eof()</code>? Or how can I make it read whole stdin and then wait again for next input?"}, {"owner": {"reputation": 141, "user_id": 7476166, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/c06b9df249c4f63863b6ed1551dd7bec?s=128&d=identicon&r=PG&f=1", "display_name": "Spook", "link": "https://stackoverflow.com/users/7476166/spook"}, "edited": false, "score": 0, "creation_date": 1492619857, "post_id": 43499994, "comment_id": 74057098, "body": "And when I read input and <code>cin.eof()</code> is true but I want to read again, how can I get <code>cin</code> to be readable again. Because <code>cin.eof()</code> returns true after <code>getline</code> but I am not able to read from <code>cin</code> again."}, {"owner": {"reputation": 5543, "user_id": 6372809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O11k5.jpg?s=128&g=1", "display_name": "ilkkachu", "link": "https://stackoverflow.com/users/6372809/ilkkachu"}, "reply_to_user": {"reputation": 141, "user_id": 7476166, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/c06b9df249c4f63863b6ed1551dd7bec?s=128&d=identicon&r=PG&f=1", "display_name": "Spook", "link": "https://stackoverflow.com/users/7476166/spook"}, "edited": false, "score": 0, "creation_date": 1492620357, "post_id": 43499994, "comment_id": 74057414, "body": "@Spook, what do you propose to read after you have already read to the end? With the command you gave: <code>echo foo | .&#47;prog</code> all that comes from standard input is the string output by the <code>echo</code>. There is nothing else to read. (And since it&#39;s a pipe, you can&#39;t even seek it backwards.)"}, {"owner": {"reputation": 141, "user_id": 7476166, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/c06b9df249c4f63863b6ed1551dd7bec?s=128&d=identicon&r=PG&f=1", "display_name": "Spook", "link": "https://stackoverflow.com/users/7476166/spook"}, "edited": false, "score": 0, "creation_date": 1492621195, "post_id": 43499994, "comment_id": 74058009, "body": "ok, so if I send message from input if it only ends with <code>&#39;\\n&#39;</code> and somebody runs command: <code>echo &quot;message1\\n message2&quot; | .&#47;prog</code>, I can only send message1 and end whole program. There is no way user could write new messages while program is running. Is it correct?"}, {"owner": {"reputation": 5543, "user_id": 6372809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O11k5.jpg?s=128&g=1", "display_name": "ilkkachu", "link": "https://stackoverflow.com/users/6372809/ilkkachu"}, "reply_to_user": {"reputation": 141, "user_id": 7476166, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/c06b9df249c4f63863b6ed1551dd7bec?s=128&d=identicon&r=PG&f=1", "display_name": "Spook", "link": "https://stackoverflow.com/users/7476166/spook"}, "edited": false, "score": 0, "creation_date": 1492621555, "post_id": 43499994, "comment_id": 74058250, "body": "@Spook, of course you could open another file or explicitly read from the terminal regardless of a redirected stdin. But that&#39;s a bit of a different matter. Though you could also have the user give something as a command line argument, and then read something else from stdin. But again, I don&#39;t think that&#39;s directly related."}, {"owner": {"reputation": 141, "user_id": 7476166, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/c06b9df249c4f63863b6ed1551dd7bec?s=128&d=identicon&r=PG&f=1", "display_name": "Spook", "link": "https://stackoverflow.com/users/7476166/spook"}, "edited": false, "score": 0, "creation_date": 1492622020, "post_id": 43499994, "comment_id": 74058544, "body": "But it is exactly what I want but cannot achieve. I want to read input passed to program by echo or printf and then continue reading if user writes something else while program is running. Is it possible and if so, how?"}], "tags": [], "owner": {"reputation": 5543, "user_id": 6372809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O11k5.jpg?s=128&g=1", "display_name": "ilkkachu", "link": "https://stackoverflow.com/users/6372809/ilkkachu"}, "is_accepted": true, "score": 2, "last_activity_date": 1492618916, "last_edit_date": 1492618916, "creation_date": 1492615571, "answer_id": 43499994, "question_id": 43499743, "link": "https://stackoverflow.com/questions/43499743/c-function-select-shows-there-are-data-in-stdin-after-they-were-read/43499994#43499994", "title": "C++ - function select shows there are data in stdin after they were read", "body": "<p><a href=\"http://www.cplusplus.com/reference/string/string/getline/\" rel=\"nofollow noreferrer\"><code>getline()</code></a> returns if it reaches end-of-file, which happens when everything coming from the pipe has been read. You need to explicitly test if <code>cin.eof()</code> returns true.</p>\n\n<p>As for <code>select()</code> it's by design that it shows the file as \"readable\" if at end-of-file. That way the program can detect the connection was closed. The Linux <a href=\"http://man7.org/linux/man-pages/man2/select.2.html\" rel=\"nofollow noreferrer\">manual for <code>select()</code></a> states that:</p>\n\n<blockquote>\n  <p>A file descriptor is considered ready if it is possible to perform a\n         corresponding I/O operation (e.g., read(2) without blocking...</p>\n</blockquote>\n\n<p>and a <code>read()</code> on a file descriptor at EOF returns a zero without blocking.</p>\n\n<hr>\n\n<p>I'm not sure if you can get problems by selecting on an fd read through an istream, but this works for me (Linux/gcc):</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sys/select.h&gt;\n#include &lt;unistd.h&gt;\n\nint main()\n{\n  std::string message;\n  while(1) {\n    fd_set fds;\n    FD_ZERO(&amp;fds);\n    FD_SET(STDIN_FILENO, &amp;fds);\n    int ret = select(1, &amp;fds, NULL, NULL, NULL);\n    if (ret == -1) break;\n    getline(std::cin, message);\n    if (std::cin.eof()) {\n      std::cout &lt;&lt; \"eof.\" &lt;&lt; std::endl;\n      break;\n    }\n    std::cout &lt;&lt; \"read: \" &lt;&lt; message &lt;&lt; std::endl;\n  }\n  return 0; \n}\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 7476166, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/c06b9df249c4f63863b6ed1551dd7bec?s=128&d=identicon&r=PG&f=1", "display_name": "Spook", "link": "https://stackoverflow.com/users/7476166/spook"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 746, "favorite_count": 0, "accepted_answer_id": 43499994, "answer_count": 1, "score": 1, "last_activity_date": 1492618916, "creation_date": 1492614946, "last_edit_date": 1492615187, "question_id": 43499743, "link": "https://stackoverflow.com/questions/43499743/c-function-select-shows-there-are-data-in-stdin-after-they-were-read", "title": "C++ - function select shows there are data in stdin after they were read", "body": "<p>I have following code in my chat client:</p>\n\n<pre><code>fd_set fds;\nstruct timeval t;\nt.tv_sec = 0;\nt.tv_usec = 100;\nint ret;\n\nstring message;\n\nwhile(run)\n{\n    FD_ZERO(&amp;fds);\n    FD_SET(STDIN_FILENO, &amp;fds);\n\n    if((ret = select(STDIN_FILENO + 1, &amp;fds, NULL, NULL, &amp;t)) &lt; 0)\n    {\n        exit(ERR_SELECT);\n    }\n    else if(ret &gt; 0 &amp;&amp; FD_ISSET(STDIN_FILENO, &amp;fds))\n    {\n        message.clear();\n        getline(cin, message);\n\n        if(strlen(message.c_str()) &gt; 0)\n        {\n            send_message(&amp;message, client_socket);\n        }\n    }\n}\n</code></pre>\n\n<p>It works fine when I type something while program is running. It reads message in stdin, sends it and then wait in loop for next input. But when I pass input to program on start like this:</p>\n\n<pre><code>echo \"message\" | ./chat_client\n</code></pre>\n\n<p>Or this:</p>\n\n<pre><code>printf \"message\\n\" | ./chat_client\n</code></pre>\n\n<p>It reads and sends \"message\" but then in next iterations of loop it behaves like there is something in stdin but <code>getline</code> reads only empty string. And then when I write something, <code>getline</code> does not read it.</p>\n\n<p>Does anyone know what causes it?</p>\n\n<p>Thanks for any advice</p>\n"}, {"tags": ["c++", "arrays", "pointers", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 42880, "user_id": 982161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/kutcC.png?s=128&g=1", "display_name": "\u03a6Xoc\u0119 \uc6c3 \u041fepe&#250;pa \u30c4", "link": "https://stackoverflow.com/users/982161/%ce%a6xoc%c4%99-%ec%9b%83-%d0%9fepe%c3%bapa-%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1492615022, "post_id": 43499741, "comment_id": 74053732, "body": "the efficiency/power of the language allows you to work with memory places instead of huge data-objects......"}, {"owner": {"reputation": 42880, "user_id": 982161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/kutcC.png?s=128&g=1", "display_name": "\u03a6Xoc\u0119 \uc6c3 \u041fepe&#250;pa \u30c4", "link": "https://stackoverflow.com/users/982161/%ce%a6xoc%c4%99-%ec%9b%83-%d0%9fepe%c3%bapa-%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1492615088, "post_id": 43499741, "comment_id": 74053777, "body": "since you are new to c++ you will for sure find more info about the pros (and pitfalls) of referring things by the memory where they are allocated..."}, {"owner": {"reputation": 8390, "user_id": 1404049, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/vkpuK.png?s=128&g=1", "display_name": "Fallenreaper", "link": "https://stackoverflow.com/users/1404049/fallenreaper"}, "edited": false, "score": 0, "creation_date": 1492615238, "post_id": 43499741, "comment_id": 74053880, "body": "Imagine this.  You are going to put a bunch of blocks on a table..  The table has a BUNCH of junk on it.  Would you rather:  1) have all the blocks taped together, and then have to move around everything on the table such that it fits.... or 2) put the blocks whereever they fit on the table and then just remember the location of where the blocks are.  In both cases, you know nothing about any of the blocks, but you know where they all are.  One of the issues when dealing with stuff is that when you are done dealing with blocks, in both cases you want to remember to remove all of the blocks."}, {"owner": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "edited": false, "score": 0, "creation_date": 1492615361, "post_id": 43499741, "comment_id": 74053954, "body": "The main difference between your two code snippets is stack vs heap allocation. The first will allocate from the heap, while the second will be on the stack. The first requires you to manually release the memory with an explicit <code>delete</code> statement, while the second will be automatically released when leaving the current scope. Each is appropriate for different scenarios and so it depends on what you are trying to do."}, {"owner": {"reputation": 8390, "user_id": 1404049, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/vkpuK.png?s=128&g=1", "display_name": "Fallenreaper", "link": "https://stackoverflow.com/users/1404049/fallenreaper"}, "edited": false, "score": 0, "creation_date": 1492615387, "post_id": 43499741, "comment_id": 74053974, "body": "These are concepts that a novice C++ programmer will learn when going through their initial courses of study, through books presentations etc.  It is an inherited concept from C."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1492620115, "post_id": 43499741, "comment_id": 74057267, "body": "Prefer to use <code>std::vector</code> instead of arrays.  The <code>std::vector</code> class handles dynamic memory management for you.  Also, the <code>std::vector</code> maintains attributes like size."}], "answers": [{"tags": [], "owner": {"reputation": 200, "user_id": 7890728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PS94H.png?s=128&g=1", "display_name": "usernameiwantedwasalreadytaken", "link": "https://stackoverflow.com/users/7890728/usernameiwantedwasalreadytaken"}, "is_accepted": false, "score": 1, "last_activity_date": 1492617899, "last_edit_date": 1492617899, "creation_date": 1492615403, "answer_id": 43499921, "question_id": 43499741, "link": "https://stackoverflow.com/questions/43499741/why-do-we-use-pointers-instead-of-simply-creating-an-array-of-specific-size/43499921#43499921", "title": "Why do we use pointers instead of simply creating an array of specific size?", "body": "<p>One difference is that the second one will only compile if both rowCount and colCount are <a href=\"http://en.cppreference.com/w/cpp/language/constant_expression\" rel=\"nofollow noreferrer\">constant expressions</a>. See also <a href=\"http://en.cppreference.com/w/cpp/language/array\" rel=\"nofollow noreferrer\">Array declaration</a>.</p>\n\n<p>The first one, on the other hand, compiles even if these variables change during runtime.</p>\n\n<p>By the way, all this is similar to C. If you are using C++, you are better using <code>std::vector</code> for the first option and <code>std::array</code> for the second.</p>\n"}], "owner": {"reputation": 11, "user_id": 7890628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/918b4f506fbbda8f816e076bfa7abd97?s=128&d=identicon&r=PG&f=1", "display_name": "SAKSHAM GAUTAM", "link": "https://stackoverflow.com/users/7890628/saksham-gautam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1492617899, "creation_date": 1492614944, "question_id": 43499741, "link": "https://stackoverflow.com/questions/43499741/why-do-we-use-pointers-instead-of-simply-creating-an-array-of-specific-size", "title": "Why do we use pointers instead of simply creating an array of specific size?", "body": "<p>I'm new to C++ and sorry if this has been asked before but I couldn't find it.\nWhy do we use pointers instead of simply creating an array of specific size?</p>\n\n<pre><code>  int** ary = new int*[rowCount];\n   for(int i = 0; i &lt; rowCount; ++i)\n    ary[i] = new int[colCount];\n</code></pre>\n\n<p>and</p>\n\n<pre><code>int ary[rowCount][colCount]; \n</code></pre>\n\n<p>what's the difference between the two?\nI know that first one works on heap memory and second one on stack but why most people work with 1st method?</p>\n"}, {"tags": ["c++", "sqlite"], "answers": [{"comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1492615148, "post_id": 43499787, "comment_id": 74053819, "body": "One of the hazards of copy-paste programming."}, {"owner": {"reputation": 1, "user_id": 7698213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcd1e46e0f2421752fdd763c5c1a66c?s=128&d=identicon&r=PG&f=1", "display_name": "iSadist", "link": "https://stackoverflow.com/users/7698213/isadist"}, "edited": false, "score": 0, "creation_date": 1492627321, "post_id": 43499787, "comment_id": 74061790, "body": "I thought so too first, but that id is the id of which newsgroup the article is suppost to be inserted into. The first INSERT statement doesn&#39;t use the ng_id at all :/   All SQL statements seem to fail (update, delete, insert), but select statements are work still."}, {"owner": {"reputation": 962, "user_id": 596100, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1df682ecad0aabeb97749fe8c5fea798?s=128&d=identicon&r=PG", "display_name": "AlphaTested", "link": "https://stackoverflow.com/users/596100/alphatested"}, "edited": false, "score": 0, "creation_date": 1492628449, "post_id": 43499787, "comment_id": 74062451, "body": "Ok, are you&#39;re sure the DB isn&#39;t enforcing unique entries in the id column?"}, {"owner": {"reputation": 1, "user_id": 7698213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcd1e46e0f2421752fdd763c5c1a66c?s=128&d=identicon&r=PG&f=1", "display_name": "iSadist", "link": "https://stackoverflow.com/users/7698213/isadist"}, "edited": false, "score": 0, "creation_date": 1492630839, "post_id": 43499787, "comment_id": 74063888, "body": "It is, but even different id&#180;s do not work either strangely. The two lines for create_ART are creating two new articles in the newsgroup 1. article_counter is keeping track of the article id on it&#39;s own."}], "tags": [], "owner": {"reputation": 962, "user_id": 596100, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1df682ecad0aabeb97749fe8c5fea798?s=128&d=identicon&r=PG", "display_name": "AlphaTested", "link": "https://stackoverflow.com/users/596100/alphatested"}, "is_accepted": false, "score": 1, "last_activity_date": 1492615167, "last_edit_date": 1492615167, "creation_date": 1492615061, "answer_id": 43499787, "question_id": 43499703, "link": "https://stackoverflow.com/questions/43499703/sqlite3-wont-work-second-time/43499787#43499787", "title": "sqlite3 won&#39;t work second time", "body": "<p>Ah, you're trying to create a new record with the same id. ids are typically unique. try: </p>\n\n<pre><code>db.create_ART(2, \"Chill day\", \"Peter\", \"Sunday afternoon is pretty chill\");\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7698213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcd1e46e0f2421752fdd763c5c1a66c?s=128&d=identicon&r=PG&f=1", "display_name": "iSadist", "link": "https://stackoverflow.com/users/7698213/isadist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1492615167, "creation_date": 1492614832, "question_id": 43499703, "link": "https://stackoverflow.com/questions/43499703/sqlite3-wont-work-second-time", "title": "sqlite3 won&#39;t work second time", "body": "<p>My Sqlite connector works just fine the first time I try to insert rows, but after it is closed and I run the program again it won't work at all.</p>\n\n<p>Here is my constructor</p>\n\n<pre><code>  Sqldatabase::Sqldatabase() {\n  open_connection(\"Database.db\");\n\n  sqlite3_stmt *statement;\n  std::string sql = \"SELECT id FROM articles ORDER BY id DESC LIMIT 1\";\n  char *query = &amp;sql[0];\n  if(sqlite3_prepare_v2(db, query, -1, &amp;statement, 0) == SQLITE_OK &amp;&amp; sqlite3_step(statement) == SQLITE_ROW) {\n    article_counter = sqlite3_column_int(statement, 0) + 1;\n  } else {\n    article_counter = 1;\n  }\n}\n</code></pre>\n\n<p>Here is my preparedStatement method.</p>\n\n<pre><code>bool Sqldatabase::prepareStatement(std::string sql) {\n  char *query = &amp;sql[0];\n  sqlite3_stmt *statement;\n  int result;\n\n  if (sqlite3_prepare_v2(db, query, sql.size(), &amp;statement, 0) == SQLITE_OK) {\n    result = sqlite3_step(statement);\n    std::cout &lt;&lt; sql &lt;&lt; '\\n';\n    sqlite3_finalize(statement);\n    if(result == SQLITE_DONE) {\n       return true;\n     }\n  }\n  std::cout &lt;&lt; \"SQL failed: \" &lt;&lt; sql &lt;&lt; '\\n';\n  return false;\n}\n</code></pre>\n\n<p>And finally here is where I call the method.</p>\n\n<pre><code>bool Sqldatabase::create_ART(int ng_id, std::string title, std::string author, std::string text) {\n  //Creating article\n  std::ostringstream s;\n  s &lt;&lt; \"INSERT INTO articles (id, title, author, content, created) \" &lt;&lt;\n       \"VALUES (\" &lt;&lt; article_counter &lt;&lt; \", '\" &lt;&lt; title &lt;&lt; \"', '\" &lt;&lt; author &lt;&lt; \"', '\" &lt;&lt; text &lt;&lt; \"' , CURRENT_DATE)\";\n  std::string sql(s.str());\n  prepareStatement(sql);\n\n  //Adding article to newsgroup\n  std::ostringstream t;\n  t &lt;&lt; \"INSERT INTO contains VALUES ( \" &lt;&lt; article_counter &lt;&lt; \" ,  \" &lt;&lt; ng_id &lt;&lt; \")\";\n  std::string sql2(t.str());\n  article_counter++;\n  return prepareStatement(sql2);\n}\n</code></pre>\n\n<p>My test script looks like this. And I already have a Newsgroup with id 1 in the database.</p>\n\n<pre><code>Sqldatabase db;\n\nint main(int argc, char* argv[]){\n    std::cout &lt;&lt; \"-----Test of Memdatabase, Newsgroup and Article classes-----\" &lt;&lt; std::endl;\n    db = Sqldatabase();\n\n    db.create_ART(1, \"Happy day\", \"John\", \"Sunday afternoon is pretty chill\");\n    db.create_ART(1, \"Chill day\", \"Peter\", \"Sunday afternoon is pretty chill\");\n\n}\n</code></pre>\n"}, {"tags": ["java", "c++", "intellij-idea"], "comments": [{"owner": {"reputation": 348241, "user_id": 104891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ff652685122f4500dd4f3c21fb32da2?s=128&d=identicon&r=PG", "display_name": "CrazyCoder", "link": "https://stackoverflow.com/users/104891/crazycoder"}, "edited": false, "score": 3, "creation_date": 1492615127, "post_id": 43499594, "comment_id": 74053809, "body": "Can you <a href=\"http://stackoverflow.com/a/35885/104891\">get your own PID</a> inside your app and print it in the console/log?"}], "answers": [{"comments": [{"owner": {"reputation": 14718, "user_id": 163454, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/bdef8bbea2467810a6a8164fc41db6e7?s=128&d=identicon&r=PG", "display_name": "Notinlist", "link": "https://stackoverflow.com/users/163454/notinlist"}, "edited": false, "score": 4, "creation_date": 1525788763, "post_id": 44248103, "comment_id": 87488737, "body": "Hint: <code>jps -l</code> prints package names too which helps distinguishing if you see multiple <code>Main</code> classes, like <code>com.intellij.idea.Main</code>."}], "tags": [], "owner": {"reputation": 14718, "user_id": 163454, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/bdef8bbea2467810a6a8164fc41db6e7?s=128&d=identicon&r=PG", "display_name": "Notinlist", "link": "https://stackoverflow.com/users/163454/notinlist"}, "is_accepted": true, "score": 24, "last_activity_date": 1496083645, "last_edit_date": 1496083645, "creation_date": 1496080330, "answer_id": 44248103, "question_id": 43499594, "link": "https://stackoverflow.com/questions/43499594/intellij-idea-show-process-id/44248103#44248103", "title": "IntelliJ idea: Show process id", "body": "<p>You can list all java processes with the <code>jps</code> utility (Can be executed from Idea terminal window) which makes it extremely easy to identify your process. Example scenario:</p>\n\n<pre><code>D:\\projects\\git\\CENSORED&gt;jps\n12084\n5476 WorkerMain\n8772 WebSocketProxyMain\n9444 Launcher\n12920 RemoteMavenServer\n13400 Bootstrap\n7752 Jps\n</code></pre>\n"}], "owner": {"reputation": 14718, "user_id": 163454, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/bdef8bbea2467810a6a8164fc41db6e7?s=128&d=identicon&r=PG", "display_name": "Notinlist", "link": "https://stackoverflow.com/users/163454/notinlist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4731, "favorite_count": 0, "accepted_answer_id": 44248103, "answer_count": 1, "score": 9, "last_activity_date": 1496083645, "creation_date": 1492614553, "question_id": 43499594, "link": "https://stackoverflow.com/questions/43499594/intellij-idea-show-process-id", "title": "IntelliJ idea: Show process id", "body": "<p>I'm starting a java program from IntelliJ Idea which uses a <code>.dll</code> which is written by me in C++. After the startup of the application I can attach to the process using Microsoft Visual Studio (Debug / Attach to Process...) which allows me to debug the C++ part of the running application.</p>\n\n<p>The name of the process is simply <code>java</code>. It is always a pain to select the right one from all the <code>java</code> processes. The simple <em>Task Manager</em> is not sufficient. The <em>Process Explorer</em> is good, but I still need to inspect multiple processes until I find the right one. It would be much easier for me if Idea would just tell the PID of the application it started.</p>\n\n<p>Does Idea have such a feature?</p>\n\n<p>(Win 7 64bit fresh @ 2017-04-19, Idea 2017.1.1)</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 1221, "user_id": 6610379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/869458e7097eb3f538a64ab550a0aa4b?s=128&d=identicon&r=PG&f=1", "display_name": "Phil Brubaker", "link": "https://stackoverflow.com/users/6610379/phil-brubaker"}, "edited": false, "score": 0, "creation_date": 1492614624, "post_id": 43499522, "comment_id": 74053441, "body": "What is the text of the linker error?"}, {"owner": {"reputation": 1756, "user_id": 5233188, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/OS2a7.png?s=128&g=1", "display_name": "goulashsoup", "link": "https://stackoverflow.com/users/5233188/goulashsoup"}, "reply_to_user": {"reputation": 1221, "user_id": 6610379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/869458e7097eb3f538a64ab550a0aa4b?s=128&d=identicon&r=PG&f=1", "display_name": "Phil Brubaker", "link": "https://stackoverflow.com/users/6610379/phil-brubaker"}, "edited": false, "score": 0, "creation_date": 1492614897, "post_id": 43499522, "comment_id": 74053649, "body": "@PhilBrubaker I added it."}, {"owner": {"reputation": 1221, "user_id": 6610379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/869458e7097eb3f538a64ab550a0aa4b?s=128&d=identicon&r=PG&f=1", "display_name": "Phil Brubaker", "link": "https://stackoverflow.com/users/6610379/phil-brubaker"}, "edited": false, "score": 0, "creation_date": 1492615654, "post_id": 43499522, "comment_id": 74054156, "body": "Are your <code>sql_db_test.*</code> files also part of (i.e., built via) the <code>.pro</code> file?"}, {"owner": {"reputation": 1756, "user_id": 5233188, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/OS2a7.png?s=128&g=1", "display_name": "goulashsoup", "link": "https://stackoverflow.com/users/5233188/goulashsoup"}, "reply_to_user": {"reputation": 1221, "user_id": 6610379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/869458e7097eb3f538a64ab550a0aa4b?s=128&d=identicon&r=PG&f=1", "display_name": "Phil Brubaker", "link": "https://stackoverflow.com/users/6610379/phil-brubaker"}, "edited": false, "score": 0, "creation_date": 1492616660, "post_id": 43499522, "comment_id": 74054898, "body": "@PhilBrubaker Yes, I just skipped them."}], "answers": [{"comments": [{"owner": {"reputation": 1756, "user_id": 5233188, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/OS2a7.png?s=128&g=1", "display_name": "goulashsoup", "link": "https://stackoverflow.com/users/5233188/goulashsoup"}, "edited": false, "score": 0, "creation_date": 1492617810, "post_id": 43500509, "comment_id": 74055717, "body": "That was insane. I allready <i>Cleanded</i> and <i>Rebuild all</i> before without success, so after your post just deleted everything in the Build folder and it worked.... Thanks"}], "tags": [], "owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "is_accepted": true, "score": 2, "last_activity_date": 1492617015, "creation_date": 1492617015, "answer_id": 43500509, "question_id": 43499522, "link": "https://stackoverflow.com/questions/43499522/qt-lnk2019-when-using-function-of-a-namespace-in-member-function-of-a-class/43500509#43500509", "title": "Qt - LNK2019 when using function of a namespace in member function of a class", "body": "<p>This sounds exactly like what happens each time I add a new file to a Qt Project. Qt Creator gets confused about the need to rebuild its own makefile.</p>\n\n<p>If a complete \"Clean all\" followed by \"Rebuild all\" from the Qt Creator menu doesn't work, then simply go up to the parent folder where your project is located and delete the <code>build-...</code> folder that corresponds to your project.</p>\n\n<p>Then \"Clean all\" and \"Rebuild all\" again.</p>\n"}], "owner": {"reputation": 1756, "user_id": 5233188, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/OS2a7.png?s=128&g=1", "display_name": "goulashsoup", "link": "https://stackoverflow.com/users/5233188/goulashsoup"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 232, "favorite_count": 0, "accepted_answer_id": 43500509, "answer_count": 1, "score": 2, "last_activity_date": 1492617015, "creation_date": 1492614320, "last_edit_date": 1492616635, "question_id": 43499522, "link": "https://stackoverflow.com/questions/43499522/qt-lnk2019-when-using-function-of-a-namespace-in-member-function-of-a-class", "title": "Qt - LNK2019 when using function of a namespace in member function of a class", "body": "<p>I have a namespace with function declarations inside <code>Project\\test\\compare_structs.h</code>:</p>\n\n<pre><code>#ifndef COMPARE_STRUCTS_H\n#define COMPARE_STRUCTS_H\n\n#include &lt;QtTest/QtTest&gt;\n#include \"include/Utils/containers.h\"\n\nnamespace compare_structs {\n    void compareRawData(RAW_DATA actual, RAW_DATA expected);\n    ...\n}\n\n#endif // COMPARE_STRUCTS_H\n</code></pre>\n\n<p>I define the functions inside <code>Project\\test\\compare_structs.cpp</code>:</p>\n\n<pre><code>#include \"compare_structs.h\"\n\nvoid compare_structs::compareRawData(RAW_DATA actual, RAW_DATA expected)\n{\n    ...\n}\n</code></pre>\n\n<p>I also added the <code>.h</code> and <code>.cpp</code> files to Qts <code>.pro</code> file:</p>\n\n<pre><code>test {\nHEADERS +=  ...\n            test/sql_db_test.h \\\n            test/compare_structs.h \\\n\nSOURCES +=  ...\n            test/sql_db_test.cpp \\\n            test/compare_structs.cpp \\\n}\n</code></pre>\n\n<p>Now I <code>#include</code> the <code>compare_structs.h</code> to a class <code>.h</code> and call it inside the <code>.cpp</code> file:</p>\n\n<p><code>Project\\test\\sql_db_test.h</code>:</p>\n\n<pre><code>#ifndef SQL_DB_TEST_H\n#define SQL_DB_TEST_H\n\n...\n#include \"test/compare_structs.h\"\n\nclass Sql_DB_Test : public QObject\n{\n    ...\n\nprivate slots:\n    ...\n    void add_get_raw_data_test();\n    ...\n};\n\n#endif // SQL_DB_TEST_H\n</code></pre>\n\n<p><code>Project\\main\\test\\sql_db_test.cpp</code>:</p>\n\n<pre><code>#include \"sql_db_test.h\"\n\nvoid Sql_DB_Test::add_get_raw_data_test()\n{\n    ...\n    compare_structs::compareRawData(rawBack, raw); //LNK2019\n}\n</code></pre>\n\n<p>The error message:</p>\n\n<p><code>sql_db_test.obj:-1: Fehler: LNK2019: Verweis auf nicht aufgel\u00f6stes externes Symbol \"\"void __cdecl compare_structs::compareRawData(struct RAW_DATA,struct RAW_DATA)\" (?compareRawData@compare_structs@@YAXURAW_DATA@@0@Z)\" in Funktion \"\"private: void __thiscall Sql_DB_Test::add_get_raw_data_test(void)\" (?add_get_raw_data_test@Sql_DB_Test@@AAEXXZ)\".</code></p>\n\n<p><em>free</em> translation:\n<code>unresolved externel symbol \"\"void __cdecl compare_structs::compareRawData(struct RAW_DATA,struct RAW_DATA)\" (?compareRawData@compare_structs@@YAXURAW_DATA@@0@Z)\" in function \"\"private: void __thiscall Sql_DB_Test::add_get_raw_data_test(void)\" (?add_get_raw_data_test@Sql_DB_Test@@AAEXXZ)\".</code></p>\n\n<p>What causes the linker error ?</p>\n"}, {"tags": ["c++", "arrays", "smart-pointers"], "comments": [{"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 1, "creation_date": 1492614499, "post_id": 43499512, "comment_id": 74053360, "body": "I think you&#39;d need to encapsulate the heap (i.e. the array) in a container-like type which does that updating for you every time it modifies the heap."}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1492615365, "post_id": 43499512, "comment_id": 74053962, "body": "Of course it&#39;s possible. You just need to write the smart pointer for it. Should be a relatively straight-forward task."}], "answers": [{"comments": [{"owner": {"reputation": 36561, "user_id": 36330, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/087bc3a6b2fe0dbbf39ca49f40e2bac1?s=128&d=identicon&r=PG", "display_name": "joeforker", "link": "https://stackoverflow.com/users/36330/joeforker"}, "edited": false, "score": 0, "creation_date": 1492644419, "post_id": 43500971, "comment_id": 74069990, "body": "Also, this doesn&#39;t appear to be valid C++11"}], "tags": [], "owner": {"reputation": 36561, "user_id": 36330, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/087bc3a6b2fe0dbbf39ca49f40e2bac1?s=128&d=identicon&r=PG", "display_name": "joeforker", "link": "https://stackoverflow.com/users/36330/joeforker"}, "is_accepted": false, "score": 0, "last_activity_date": 1492635486, "last_edit_date": 1492635486, "creation_date": 1492618406, "answer_id": 43500971, "question_id": 43499512, "link": "https://stackoverflow.com/questions/43499512/is-it-possible-to-have-an-array-of-smart-pointers-that-automatically-updates-its/43500971#43500971", "title": "Is it possible to have an array of smart pointers that automatically updates its values with their index?", "body": "<p>This is my attempt at a basic implementation. I would prefer to parameterize <code>Container</code>s reference to the global array without making instances larger than one pointer, and it would be good to improve safety. It would be more useful if it was also a random access iterator.</p>\n\n<pre><code>class Contained {\n    public:\n        uintptr_t index;\n};\n\nclass Container {\n    public:\n        Contained *value;\n\n    Container&amp; operator=(Container&amp; other);\n};\n\nContainer foobars[4];\n\nContainer&amp; Container::operator=(Container&amp; other) {\n    this-&gt;value = other.value;\n    this-&gt;value-&gt;index = ((uintptr_t)this - (uintptr_t)foobars) / sizeof(this-&gt;value);\n    return *this;\n}\n</code></pre>\n"}], "owner": {"reputation": 36561, "user_id": 36330, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/087bc3a6b2fe0dbbf39ca49f40e2bac1?s=128&d=identicon&r=PG", "display_name": "joeforker", "link": "https://stackoverflow.com/users/36330/joeforker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1492635486, "creation_date": 1492614281, "last_edit_date": 1492616561, "question_id": 43499512, "link": "https://stackoverflow.com/questions/43499512/is-it-possible-to-have-an-array-of-smart-pointers-that-automatically-updates-its", "title": "Is it possible to have an array of smart pointers that automatically updates its values with their index?", "body": "<p>In C++, is there a way to write an array of smart pointers that automatically updates the pointed-to values with their index in the array? The pointed-to values have a member to store the index, similar to an intrusive refcount.</p>\n\n<p>I am interested in writing a heap with updatable priorities. If the values in the heap were always updated to point to their index inside the heap storage, without special knowledge inside the heap algorithm, it would be easy to follow that link back into the heap when changing the value's priority. Knowing the position of the changed item, the heap invariant could then be quickly restored.</p>\n"}, {"tags": ["c++", "opencv", "svm"], "comments": [{"owner": {"reputation": 12286, "user_id": 1607442, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/18451ad16ed8ad45b0a18bf70b2aa002?s=128&d=identicon&r=PG", "display_name": "Ivan Aksamentov - Drop", "link": "https://stackoverflow.com/users/1607442/ivan-aksamentov-drop"}, "edited": false, "score": 1, "creation_date": 1492621912, "post_id": 43499445, "comment_id": 74058481, "body": "(1) Introduce 4th class or (2) train another binary classifier (e.g. SVM again) that classifies &quot;known&quot; vs &quot;unknown&quot; and pass &quot;known&quot; samples to 3-class SVN or (3) train one-vs-many SVM, or... Well there are many solutions. It is not really specific to OpenCV."}], "answers": [{"tags": [], "owner": {"reputation": 426, "user_id": 5054505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc0f1e0ffd8e4f58acf3413bafd94dde?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick", "link": "https://stackoverflow.com/users/5054505/patrick"}, "is_accepted": false, "score": 0, "last_activity_date": 1492620542, "creation_date": 1492620542, "answer_id": 43501634, "question_id": 43499445, "link": "https://stackoverflow.com/questions/43499445/opencv-svm-object-does-not-belong-to-any-of-trained-classes/43501634#43501634", "title": "OpenCV SVM - object does not belong to any of trained classes", "body": "<p>Looking at the <a href=\"http://docs.opencv.org/2.4/modules/ml/doc/support_vector_machines.html#cvsvm-predict\" rel=\"nofollow noreferrer\">SVM docs</a>(the predict function, in particular), it seems that the best you can do is get the distance from the support vector, and it looks like you can only even get that from a binary classifier.</p>\n\n<p>Not sure how constrained to OpenCV you are, but if you can use scikit learn for your problem, their SVM has a <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.svm.SVC.html#sklearn.svm.SVC.predict_proba\" rel=\"nofollow noreferrer\">predict_proba</a> function that should be helpful. There is also a predict_log_proba function, if that's your preference. Also, note that you'll need to set probability=true when calling the fit function if you go this route.</p>\n\n<p>If you're contrained to C/C++, you might look into <a href=\"https://www.csie.ntu.edu.tw/~cjlin/libsvm/\" rel=\"nofollow noreferrer\">LibSVM</a>, as they also have the ability to give the probabilities, although I'm not as familiar with their api. Also note that the OpenCV and scikit learn implementations are both based on LibSVM</p>\n\n<p>Hope one of these works for you!</p>\n"}], "owner": {"reputation": 11, "user_id": 7741345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f4e45a8e28b150732614f6278af74e0?s=128&d=identicon&r=PG&f=1", "display_name": "Dagg Wislow", "link": "https://stackoverflow.com/users/7741345/dagg-wislow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1492620542, "creation_date": 1492614122, "question_id": 43499445, "link": "https://stackoverflow.com/questions/43499445/opencv-svm-object-does-not-belong-to-any-of-trained-classes", "title": "OpenCV SVM - object does not belong to any of trained classes", "body": "<p>I'm using OpenCV (3.1) SVM with 3 classes. Is there any way how to handle input data, which does not belong to any of these classes? Is there posibility to get probability from the prediciton?</p>\n\n<p>I just simply want to mark data from unknown class as \"Does not belong to any of trained classes\".</p>\n\n<p>Thank you</p>\n"}, {"tags": ["c++", "class"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 2, "creation_date": 1492614176, "post_id": 43499388, "comment_id": 74053143, "body": "<code>vector&lt;Branch *&gt;</code> will correctly manage the <code>Branch *</code> that it holds, but it will not manage the <code>Branch</code>es that are pointed to by these pointers. Whoever created the <code>Branch</code>es that the pointers are pointing at is responsible for getting rid of them, not the vector. You could use <code>vector&lt;Branch&gt;</code> instead to make the vector responsible for the Branches."}, {"owner": {"reputation": 1015, "user_id": 7691497, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-46wzsjmiSDg/AAAAAAAAAAI/AAAAAAAAAAk/qjgRQMlHINA/photo.jpg?sz=128", "display_name": "Ben Steffan", "link": "https://stackoverflow.com/users/7691497/ben-steffan"}, "edited": false, "score": 0, "creation_date": 1492614181, "post_id": 43499388, "comment_id": 74053147, "body": "Using <code>vector</code> doesn&#39;t magically absolve you from managing memory. If any of the pointers in <code>parent</code>, <code>children</code> point to objects on the heap, you still need to free them in the end."}, {"owner": {"reputation": 1015, "user_id": 7691497, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-46wzsjmiSDg/AAAAAAAAAAI/AAAAAAAAAAk/qjgRQMlHINA/photo.jpg?sz=128", "display_name": "Ben Steffan", "link": "https://stackoverflow.com/users/7691497/ben-steffan"}, "edited": false, "score": 0, "creation_date": 1492614365, "post_id": 43499388, "comment_id": 74053277, "body": "Please also show us your <code>Tree</code>/<code>Branch</code> initialisation code."}, {"owner": {"reputation": 185, "user_id": 7575258, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/30e8110c43e2cb0d9ace90b74097228c?s=128&d=identicon&r=PG&f=1", "display_name": "bengo", "link": "https://stackoverflow.com/users/7575258/bengo"}, "reply_to_user": {"reputation": 1015, "user_id": 7691497, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-46wzsjmiSDg/AAAAAAAAAAI/AAAAAAAAAAk/qjgRQMlHINA/photo.jpg?sz=128", "display_name": "Ben Steffan", "link": "https://stackoverflow.com/users/7691497/ben-steffan"}, "edited": false, "score": 0, "creation_date": 1492615942, "post_id": 43499388, "comment_id": 74054386, "body": "@BenSteffan I can&#39;t put the whole initialisation since it is too big. Now I don&#39;t have the time to work on a minimal example."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1492616879, "post_id": 43499388, "comment_id": 74055062, "body": "What class owns the <code>Branch</code> objects that you have all these pointers to? How does your code know when their lifetime ends? If the <code>Tree</code> owns its branches, then it will have to <code>delete</code> them."}, {"owner": {"reputation": 185, "user_id": 7575258, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/30e8110c43e2cb0d9ace90b74097228c?s=128&d=identicon&r=PG&f=1", "display_name": "bengo", "link": "https://stackoverflow.com/users/7575258/bengo"}, "edited": false, "score": 0, "creation_date": 1492617596, "post_id": 43499388, "comment_id": 74055557, "body": "The only things which I create in my code are pointers to Branches. These pointers to Branches are stocked in a Tree. When I kill/remove a Branch* from the <code>tree_branches</code> vector I erase the vector entry and I erase vectors parent and children. Is it then when I need to call the destructor?"}, {"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1492685411, "post_id": 43499388, "comment_id": 74087810, "body": "Can you provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>? Also, whenever I see somebody mentioning &quot;maybe memory leak&quot; I expect him mentioning valgrind in the next sentence."}, {"owner": {"reputation": 185, "user_id": 7575258, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/30e8110c43e2cb0d9ace90b74097228c?s=128&d=identicon&r=PG&f=1", "display_name": "bengo", "link": "https://stackoverflow.com/users/7575258/bengo"}, "reply_to_user": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1492693718, "post_id": 43499388, "comment_id": 74094226, "body": "@Yunnosch check the minimal example. Sadly this is as minimal as it can get in order to reproduce what is done in the real code."}, {"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1492699004, "post_id": 43499388, "comment_id": 74098581, "body": "Impressive, didn&#39;t expect it to be that large, but it still is better than without - I think."}, {"owner": {"reputation": 185, "user_id": 7575258, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/30e8110c43e2cb0d9ace90b74097228c?s=128&d=identicon&r=PG&f=1", "display_name": "bengo", "link": "https://stackoverflow.com/users/7575258/bengo"}, "edited": false, "score": 0, "creation_date": 1492699637, "post_id": 43499388, "comment_id": 74099096, "body": "Well, I found the source of a bug, there is a problem in the <code>Tree::getLastDescendantIndex</code> I wasn&#39;t <code>return</code>ing in all the possible cases. Besides that I&#39;m still concerned about the fact that it is memory leaking... Sometimes when I run my code in python, it stops running and python throws an error which when googled it is said to be caused by a memory leak..."}], "answers": [{"comments": [{"owner": {"reputation": 185, "user_id": 7575258, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/30e8110c43e2cb0d9ace90b74097228c?s=128&d=identicon&r=PG&f=1", "display_name": "bengo", "link": "https://stackoverflow.com/users/7575258/bengo"}, "edited": false, "score": 0, "creation_date": 1492616889, "post_id": 43500019, "comment_id": 74055069, "body": "Thanks Davide, I find your answer quite clear. I do use <code>push_back(new Branch())</code> or <code>insert</code>. I will try the shared pointer and tell you.  Do I still need to declare a destructor for the <code>Tree</code> class? Would you also change <code>Branch*</code> to <code>shared_ptr&lt;Branch&gt;</code> inside the branch class (I mean for vector&lt;Branch*&gt; children)?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 185, "user_id": 7575258, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/30e8110c43e2cb0d9ace90b74097228c?s=128&d=identicon&r=PG&f=1", "display_name": "bengo", "link": "https://stackoverflow.com/users/7575258/bengo"}, "edited": false, "score": 0, "creation_date": 1492616972, "post_id": 43500019, "comment_id": 74055118, "body": "@bengo If you use <code>shared_ptr&lt;Branch&gt;</code> you don&#39;t need your own destructor. The default destructor of the container will destroy the shared pointers, and if you correctly allocate the object (use <code>make_shared</code>!) then the object will be destroyed when its last shared pointer is destroyed."}, {"owner": {"reputation": 6563, "user_id": 1020072, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ARs87.jpg?s=128&g=1", "display_name": "Sean Cline", "link": "https://stackoverflow.com/users/1020072/sean-cline"}, "edited": false, "score": 0, "creation_date": 1492617031, "post_id": 43500019, "comment_id": 74055161, "body": "Care should be taken if switching to <code>shared_ptr</code> in this case. It&#39;s quite possible to create a circular reference causing nothing to be deleted. This would happen if you held both <code>parent</code>s and <code>children</code> by <code>shared_ptr</code>."}, {"owner": {"reputation": 407, "user_id": 1655018, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7f919ba035817ce6adfdcfbea35662e0?s=128&d=identicon&r=PG", "display_name": "Davide", "link": "https://stackoverflow.com/users/1655018/davide"}, "reply_to_user": {"reputation": 6563, "user_id": 1020072, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ARs87.jpg?s=128&g=1", "display_name": "Sean Cline", "link": "https://stackoverflow.com/users/1020072/sean-cline"}, "edited": false, "score": 0, "creation_date": 1492617418, "post_id": 43500019, "comment_id": 74055437, "body": "@SeanCline i don&#39;t think so. ultimately, the code seems to imply all the Branches are held by the Tree. then when the Tree vector member is destroyed, all the branches will be destroyed sooner(from the tree) or later (from another branch &quot;outsurviving&quot; them); This, provided a branch is not a parent or child of itself which should be checked and avoided in any meaningful application that comes to mind."}, {"owner": {"reputation": 185, "user_id": 7575258, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/30e8110c43e2cb0d9ace90b74097228c?s=128&d=identicon&r=PG&f=1", "display_name": "bengo", "link": "https://stackoverflow.com/users/7575258/bengo"}, "edited": false, "score": 0, "creation_date": 1492617723, "post_id": 43500019, "comment_id": 74055657, "body": "Indeed a branch can&#39;t be a parent or a child of itself. All the existing branches are contained inside the tree which can be traversed by iterating over the vector entries or by using the family relations between branches."}, {"owner": {"reputation": 185, "user_id": 7575258, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/30e8110c43e2cb0d9ace90b74097228c?s=128&d=identicon&r=PG&f=1", "display_name": "bengo", "link": "https://stackoverflow.com/users/7575258/bengo"}, "edited": false, "score": 0, "creation_date": 1492617948, "post_id": 43500019, "comment_id": 74055813, "body": "Do you think it is worthy to declare the destructor and etc? I wanted to avoid that because I&#39;m a complete begginer in C++ (I&#39;m using it in this project because it seemed interesting to use object oriented programming) and I found it complicated. But if I have to do it I can..."}, {"owner": {"reputation": 407, "user_id": 1655018, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7f919ba035817ce6adfdcfbea35662e0?s=128&d=identicon&r=PG", "display_name": "Davide", "link": "https://stackoverflow.com/users/1655018/davide"}, "reply_to_user": {"reputation": 185, "user_id": 7575258, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/30e8110c43e2cb0d9ace90b74097228c?s=128&d=identicon&r=PG&f=1", "display_name": "bengo", "link": "https://stackoverflow.com/users/7575258/bengo"}, "edited": false, "score": 0, "creation_date": 1492618677, "post_id": 43500019, "comment_id": 74056308, "body": "@bengo you don&#39;t need to if you use shared pointers, at the cost of a very small overhead."}], "tags": [], "owner": {"reputation": 407, "user_id": 1655018, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7f919ba035817ce6adfdcfbea35662e0?s=128&d=identicon&r=PG", "display_name": "Davide", "link": "https://stackoverflow.com/users/1655018/davide"}, "is_accepted": true, "score": 3, "last_activity_date": 1492616291, "last_edit_date": 1492616291, "creation_date": 1492615638, "answer_id": 43500019, "question_id": 43499388, "link": "https://stackoverflow.com/questions/43499388/memory-management-for-2-interconnected-c-classes/43500019#43500019", "title": "Memory management for 2 &quot;interconnected&quot; C++ classes", "body": "<blockquote>\n  <p>1) If I understood well, the fact that the only attributes of Tree class are a vector and a map, makes it unnecessary to declare a destructor, a copy-assignement operator and a copy constructor, because the memory is managed \"inside\" the vector and map templates.</p>\n</blockquote>\n\n<p>You are wrong here, as the memory which is managed <em>inside</em> the vector is <strong>only the storage for the addresses of branches</strong>(<code>Branch *</code>). When you insert some branch you  call something like <code>tree_branches.push_back(new Branch)</code>, don't you? Thus, you will need to call the corresponding <code>delete</code> somehow, otherwise the default destructor of the tree won't take care of calling the destructors of the <code>Branch</code>es. </p>\n\n<p>A quick fix for your code could be switching from <code>Branch *</code> to <code>shared_ptr&lt;Branch&gt;</code>. In such way, when the <code>tree_branches</code> vector is destroyed,  the <code>shared_ptr</code>'s will also be destroyed and when the latest <code>shared_ptr</code> to any <code>Branch</code>is destroyed, also the pointed <code>Branch</code> will be. </p>\n\n<blockquote>\n  <p>would stocking the int hierarchy inside a vector avoid declaring a destructor and company?</p>\n</blockquote>\n\n<p>It would change jack squat, as the <code>Branch</code>es default destructors still would not be called, and so the destructors of the <code>Branch</code>es members would never be called.</p>\n"}, {"comments": [{"owner": {"reputation": 407, "user_id": 1655018, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7f919ba035817ce6adfdcfbea35662e0?s=128&d=identicon&r=PG", "display_name": "Davide", "link": "https://stackoverflow.com/users/1655018/davide"}, "edited": false, "score": 0, "creation_date": 1492783001, "post_id": 43543859, "comment_id": 74141191, "body": "Your test will never experience the leaks ( which there are if using Branch* and never delete) simply beacuse 1) you use only one tree in your example 2) the scope of your tree matches the main() body, so that the leak actually exisit only on the very last instruction of your test."}, {"owner": {"reputation": 185, "user_id": 7575258, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/30e8110c43e2cb0d9ace90b74097228c?s=128&d=identicon&r=PG&f=1", "display_name": "bengo", "link": "https://stackoverflow.com/users/7575258/bengo"}, "reply_to_user": {"reputation": 407, "user_id": 1655018, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7f919ba035817ce6adfdcfbea35662e0?s=128&d=identicon&r=PG", "display_name": "Davide", "link": "https://stackoverflow.com/users/1655018/davide"}, "edited": false, "score": 0, "creation_date": 1492784473, "post_id": 43543859, "comment_id": 74142246, "body": "what do you mean by &quot;the leak exists only in the last instruction of your test&quot;? Why using more trees would be a problem?"}], "tags": [], "owner": {"reputation": 185, "user_id": 7575258, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/30e8110c43e2cb0d9ace90b74097228c?s=128&d=identicon&r=PG&f=1", "display_name": "bengo", "link": "https://stackoverflow.com/users/7575258/bengo"}, "is_accepted": false, "score": 0, "last_activity_date": 1492780846, "creation_date": 1492780846, "answer_id": 43543859, "question_id": 43499388, "link": "https://stackoverflow.com/questions/43499388/memory-management-for-2-interconnected-c-classes/43543859#43543859", "title": "Memory management for 2 &quot;interconnected&quot; C++ classes", "body": "<p>Finnally there isn't a memory leak. Thanks @Yunnosch for mentionning Valgrind, I wasn't aware this kind of tool existed. </p>\n\n<p>@Davide I accepted your answer since it provided an alternative to what I've done, even if apparently there aren't problems with the management of the memory in my code. </p>\n\n<p>The code I posted has a problem in function Tree::getLastDescendantIndex.  </p>\n"}], "owner": {"reputation": 185, "user_id": 7575258, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/30e8110c43e2cb0d9ace90b74097228c?s=128&d=identicon&r=PG&f=1", "display_name": "bengo", "link": "https://stackoverflow.com/users/7575258/bengo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 43500019, "answer_count": 2, "score": 1, "last_activity_date": 1492780846, "creation_date": 1492613998, "last_edit_date": 1492694132, "question_id": 43499388, "link": "https://stackoverflow.com/questions/43499388/memory-management-for-2-interconnected-c-classes", "title": "Memory management for 2 &quot;interconnected&quot; C++ classes", "body": "<p>I have a class <code>Branch</code> and a class <code>Tree</code>. The declaration of the classes looks like:</p>\n\n<pre><code>class Branch{\n\nprivate:\n\n  map&lt;string, double&gt; properties;\n\n  vector&lt;Branch *&gt; parent;\n  vector&lt;Branch *&gt; children;\n\n  int hierarchy;\n\n  public: \n  ...\n\n}\n\nclass Tree{\n\nprivate:\n\n  /* Tree is a vector of pointers to branches. */\n  vector&lt;Branch*&gt; tree_branches;\n\n  map&lt;int,int&gt; Hierarchy_distribution;\n\npublic:\n...\n\n}\n</code></pre>\n\n<p>1) If I understood well, the fact that the only attributes of <code>Tree</code> class are a <code>vector</code> and a <code>map</code>, makes it unnecessary to declare a destructor, a copy-assignement operator and  a copy constructor, because the memory is managed \"inside\" the vector and map templates. </p>\n\n<p>2) I use this classes from a python code (I used cython to interface between C++ an python) and all the operations I make are performed through a tree object. I thought that because the branches I \"use\" are contained in a tree object (with a good memory management) I didn't need to declare a destructor, a copy constructor,and a copy assignment operator for the branch class. However I'm experiencing some problems and I think I have a memory leak. </p>\n\n<p>Can someone confirm me if this could be causing a memory leak? If it is would stocking the <code>int hierarchy</code> inside a <code>vector&lt;int&gt;</code> avoid declaring a destructor and company? </p>\n\n<p><strong>EDIT</strong></p>\n\n<p>The branches who are stocked in the tree are created inside a method of the <code>Tree</code> class. It looks like:</p>\n\n<pre><code>Tree::addBranch(){\n  Branch* branch2insert=new Branch();\n  tree_branches.push_back(branch2insert);\n}\n</code></pre>\n\n<p>As a local variable, is <code>branch2insert</code> destructed at the end of the scope? Do I need to write <code>delete branch2insert;</code>? Does someone have an idea of where do the <code>Branch</code> object at which I point to lives? </p>\n\n<p>I still don't get why I need to ensure memory management when I never allocate ressources except inside the <code>Tree</code> class methods... </p>\n\n<p>This whole thing is getting very messy in my head </p>\n\n<p><strong>EDIT 2:EXAMPLE</strong></p>\n\n<p><strong>branch.h</strong></p>\n\n<pre><code>#ifndef BRANCH_H_\n#define BRANCH_H_\n\n#include &lt;memory&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;map&gt;\nusing namespace std;\n\nclass Branch{\n\nprivate:\n\n      vector&lt;Branch*&gt; parent;\n      vector&lt;Branch*&gt; children;\n\npublic:\n\n      Branch();\n\n      bool hasParent();\n      bool hasParent(Branch* test);\n      void addParent(Branch* p);\n      void removeParent();\n      Branch* getParent();\n\n      bool hasChildren();\n      bool hasChild(Branch*test);\n      void addChild(Branch*ch);\n      void removeChild(Branch*ch);\n      void removeChildren();\n      void removeDescendants();\n      vector&lt;Branch*&gt; getBrothers();\n\n\n};\n\n#endif\n</code></pre>\n\n<p><strong>tree.h</strong></p>\n\n<pre><code>#ifndef TREE_H_\n#define TREE_H_\n\n#include &lt;vector&gt;\n#include &lt;map&gt;\n#include\"branch.h\"\n\nusing namespace std;\n\nclass Tree{\n\nprivate:\n\n      vector&lt;Branch*&gt; tree_branches;\n\npublic:\n\n      Tree();\n\n      int getNumberOfBranches();\n\n      Branch* getBranch(int branch_index); /* Returns branch at index. */\n      int getIndex(Branch* branch); /* Returns the index of branch. */\n\n      int getLastDescendantIndex(int ancestor_index); /* Returns index of the last descendant of branch at ancestor index. */\n      int getParentIndex(int child_index); /* Returns index of the parent of branch at child_index. */\n      vector&lt;int&gt; getBrothersIndex(int branch_index); /* Returns indexes of the brothers of branch at branch_index. */\n\n      void addBranch(int parent_index); /* Adds branch without initializing its properties. */\n      void removeBranch(int branch_index); /* Removes branch at branch_index and all its descendants. */\n\n};\n\n#endif\n</code></pre>\n\n<p><strong>branch.cpp</strong></p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;cstring&gt;\n#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;map&gt;\n#include &lt;stdio.h&gt;\n\nusing namespace std;\n\n#include \"branch.h\"\n\nBranch::Branch():parent(vector&lt;Branch*&gt;()),children(vector&lt;Branch*&gt;())\n        {\n        }\n\nbool Branch::hasParent(){\n  if(parent.size()==0)\n        return false;\n    else\n    return true;\n}\n\nbool Branch::hasParent(Branch* test){\n  bool ret = false;\n  for(vector&lt;Branch*&gt;::iterator it=parent.begin();it!=parent.end();it++){//traversing parent vector\n    if((*it)==test){//if test belong to parent vector\n      ret = true;\n      break;\n    }\n  }\n  return ret;\n}\n\nvoid Branch::addParent(Branch* mom){\n  if(parent.size()==0){//if a branch hasn't a parent, multiple parents aren't allowed in a tree-network\n    if(hasParent(mom)==false){//double checking if mom isn't already a parent\n            parent.push_back(mom);//adding mom to parent vector\n      }\n    else{\n      cout &lt;&lt; \"Branch::addParent Error: trying to add a parent twice.\\n\";\n    }\n  }\n  else{\n    cout &lt;&lt; \"Branch::addParent Error: trying to add a parent to a branch that already has one.\\n\";\n  }\n}\n\nvoid Branch::removeParent(){\n    if(this-&gt;hasParent()==true){//if this branch has a parent\n      vector&lt;Branch*&gt;::iterator it=parent.begin();\n      parent.erase(it);//erase it (it is the first and only element of the vector)\n\n    }\n    else{\n      cout &lt;&lt; \"Removing the trunk.\\n\";\n    }\n}\n\nBranch* Branch::getParent(){\n  return parent[0];\n}\n\nbool Branch::hasChildren(){\n  if(children.size()==0)\n        return false;\n    else\n    return true;\n}\n\nbool Branch::hasChild(Branch* test){\n  bool ret = false;\n  for(vector&lt;Branch*&gt;::iterator it=children.begin();it!=children.end();it++){\n    if((*it)==test){\n      ret = true;\n      break;\n    }\n  }\n  return ret;\n}\n\nvoid Branch::addChild(Branch* ch){\n  if(hasChild(ch)==false){\n        children.push_back(ch);\n        ch-&gt;addParent(this); // PARENTHOOD LINK ESTABLISHED IN ADD CHILD. ONLY\n                         // NEEDED ONCE.\n    }\n  else{\n        cout &lt;&lt; \"Branch::addChild Error: trying to add a child but the child has been already added.\\n\";\n  }\n}\n\nvoid Branch::removeChild(Branch* ch){\n  if(hasChild(ch)==true){\n        for(vector&lt;Branch*&gt;::iterator it=children.begin();it!=children.end();it++){\n            if((*it)==ch){\n                children.erase(it);\n                break;\n            }\n        }\n    }\n  else{\n      cout &lt;&lt; \"Branch::removeChild Error: trying to remove a child that doesn't exist.\\n\";\n  }\n}\n\nvoid Branch::removeChildren(){\n  if(this-&gt;hasChildren()==true){\n    children.erase(children.begin(),children.end());\n  }\n  else{\n    cout &lt;&lt; \"Branch::removeChildren Error: trying to remove all the children of a branch but tha branch hasn't any.\\n\";\n  }\n}\n\nvoid Branch::removeDescendants(){\n    if (this!=NULL){\n      if(this-&gt;hasChildren()==true){\n        for(vector&lt;Branch*&gt;::iterator it=children.begin();it!=children.end();it++){\n          (*it)-&gt;removeDescendants();\n        }\n      removeChildren();\n      }\n      for(vector&lt;Branch*&gt;::iterator it=children.begin();it!=children.end();it++){\n        (*it)-&gt;removeParent();\n      }\n    }\n}\n\nvector&lt;Branch*&gt; Branch::getBrothers(){\n  vector&lt;Branch*&gt; brothers;\n  vector&lt;Branch*&gt; potential_brothers;\n  if (parent.size()!=0){\n    potential_brothers=parent[0]-&gt;children;\n    for (vector&lt;Branch*&gt;::iterator it=potential_brothers.begin();it!=potential_brothers.end();it++){\n      if ((*it)!=this){\n        brothers.push_back((*it));\n      }\n    }\n  }\n  return brothers;\n}\n</code></pre>\n\n<p><strong>tree.cpp</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;map&gt;\n#include &lt;algorithm&gt;\n\nusing namespace std;\n\n#include \"tree.h\"\nTree::Tree():tree_branches(vector&lt;Branch*&gt;()){\n    Branch* trunk=new Branch();\n    tree_branches.push_back(trunk);\n}\n\nint Tree::getNumberOfBranches(){\n    int number_of_branches=tree_branches.size(); //retrieving size of vector\n    return number_of_branches;\n}\n\nBranch* Tree::getBranch(int index){\n\n      unsigned int u_index=index;\n      return tree_branches.at(u_index); // returning branch at index of the tree vector\n\n}\n\n\nint Tree::getIndex(Branch* branch){\n    int index=0;\n    for(vector&lt;Branch*&gt;::iterator it=tree_branches.begin();it!=tree_branches.end();it++){\n      if((*it)==branch){\n        return index;\n      }\n      index++;\n    }\n    cout &lt;&lt; \"Tree::getIndex Error: trying to get the index of a branch we can't find. Returning 0.\\n\";\n    return 0;\n}\n\n\nint Tree::getLastDescendantIndex(int ancestor_index){\n\n      if(tree_branches.at(ancestor_index)-&gt;hasChildren()==false){// if it is a leaf\n        return ancestor_index;\n      }\n\n      if(ancestor_index==0){// if it is the trunk\n        int N=tree_branches.size();\n        int last_descendant_index=N-1;\n        return last_descendant_index;\n      }\n\n      vector&lt;int&gt; brothers_indexes=Tree::getBrothersIndex(ancestor_index);\n\n      for(vector&lt;int&gt;::iterator it=brothers_indexes.begin();it!=brothers_indexes.end();it++){\n\n        int brother_index=(*it);\n        if(brother_index&gt;ancestor_index){\n\n          int last_descendant_index=brother_index-1;\n          cout &lt;&lt; \"The last descendant of\" &lt;&lt; ancestor_index &lt;&lt; \" is \"&lt;&lt;last_descendant_index&lt;&lt;\"\\n\";\n          return last_descendant_index;\n\n        }\n      }\n      int parent_index=Tree::getParentIndex(ancestor_index);\n      Tree::getLastDescendantIndex(parent_index);\n}\n\nint Tree::getParentIndex(int child_index){\n\n      if(child_index==0){ //if considered branch is the trunk\n        cout &lt;&lt; \"Tree::getParentIndex: the trunk hasn't a parent. Returning -1.\\n\";\n        return -1;\n      }\n\n      unsigned int u_child_index=child_index;\n      Branch* parent=tree_branches.at(u_child_index)-&gt;getParent(); //retrieving the parent of the considered branch\n      int parent_index=Tree::getIndex(parent);\n      return parent_index; //returning parent index\n}\n\n\nvector&lt;int&gt; Tree::getBrothersIndex(int branch_index){\n    vector&lt;int&gt; brothers_index;\n\n    Branch* this_branch=Tree::getBranch(branch_index);//retrieving the branch from the index\n    vector&lt;Branch*&gt; brothers=this_branch-&gt;getBrothers();//retrieving branch's brothers\n\n    for(vector&lt;Branch*&gt;::iterator it=brothers.begin();it!=brothers.end();it++){ //traversing a vector containing the brothers of the consideered branch\n      int this_index=Tree::getIndex(*it); //retrieving index of a brother\n      brothers_index.push_back(this_index); //stocking the index in a vector\n    }\n\n    return brothers_index; //returning the vector containing the index of all brothers\n  }\n\n\nvoid Tree::addBranch(int parent_index){\n\n      unsigned int u_parent_index=parent_index;\n      Branch* mom=tree_branches.at(u_parent_index);//getting futur parent\n      Branch* branch2insert=new Branch();//creation of branch to insert\n      mom-&gt;addChild(branch2insert);//setting family relationship\n\n      vector&lt;Branch*&gt;::iterator begin=tree_branches.begin();//creating iterators to manipulate vector elements\n      unsigned int inserting_position=u_parent_index+1;//initializing inserting_position\n      tree_branches.insert(begin+inserting_position,branch2insert);//inserting new branch\n\n}\n\n\nvoid Tree::removeBranch(int branch_index){\n\n      int N=tree_branches.size();\n\n      unsigned int u_branch_index=branch_index;\n      Branch* branch2remove=tree_branches.at(u_branch_index);\n      branch2remove-&gt;removeParent(); //removing parenthood link, if branch2remove is the trunk nothing will be done\n\n      if(branch_index!=0){//removing childhood link between parent and branch_index\n        Branch* branch2removeParent=branch2remove-&gt;getParent();\n        branch2removeParent-&gt;removeChild(branch2remove);\n      }\n\n      int last_descendant_index=Tree::getLastDescendantIndex(branch_index);\n      cout&lt;&lt;\"The branch to remove is \"&lt;&lt;branch_index&lt;&lt;\", its last descendant index is \"&lt;&lt;last_descendant_index&lt;&lt;\", the size of the tree is \"&lt;&lt;N&lt;&lt;\".\\n\";\n\n      branch2remove-&gt;removeDescendants();//removing family links for all descendents\n\n      if(last_descendant_index==N-1){\n        vector&lt;Branch*&gt;::iterator begin=tree_branches.begin();\n        tree_branches.erase(tree_branches.begin()+u_branch_index,tree_branches.end());\n      }\n\n      else{\n        vector&lt;Branch*&gt;::iterator begin=tree_branches.begin();\n        unsigned int u_last_descendant_index=last_descendant_index;\n        tree_branches.erase(tree_branches.begin()+u_branch_index,tree_branches.begin()+u_last_descendant_index+1);//removing the considered branch and its descendents from the tree vector\n      }\n}\n</code></pre>\n\n<p><strong>test.cpp</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n#include &lt;typeinfo&gt;\n#include &lt;vector&gt;\n#include &lt;map&gt;\n#include &lt;string&gt;\n#include \"tree.h\"\n\n\n\nusing namespace std;\n\nint main(){\n\n  Tree tree;\n  tree=Tree();\n\n  for(int i=0;i&lt;5;i++){\n    int N=tree.getNumberOfBranches();\n    for(int j=0;j&lt;N;j++){\n      tree.addBranch(j);\n      tree.addBranch(j);\n    }\n  }\n\n  tree.removeBranch(21);\n  tree.removeBranch(30);\n  tree.removeBranch(50);\n\n  return 0;\n}\n</code></pre>\n\n<p>to compile: </p>\n\n<p>g++ -Wall -pedantic -c </p>\n"}, {"tags": ["c++", "windows", "visual-studio"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1492614088, "post_id": 43499368, "comment_id": 74053081, "body": "Most likely you are not linking to the library file."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1492614138, "post_id": 43499368, "comment_id": 74053115, "body": "Building C++ applications is a three-step process: 1) Edit code; 2) Compile code; 3) <i>Link</i> code. The error is coming from the third step, where you don&#39;t link with the actual library. Including header files is happening at step 2, and header files only contains information needed to create the files used by step 3."}], "owner": {"user_type": "does_not_exist", "display_name": "user6512506"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 10, "favorite_count": 0, "closed_date": 1492614073, "answer_count": 0, "score": 0, "last_activity_date": 1492613944, "creation_date": 1492613944, "question_id": 43499368, "link": "https://stackoverflow.com/questions/43499368/c-vs15-linking-problems-with-windows-security-cryptography-h", "closed_reason": "Duplicate", "title": "C++ VS15 linking problems with windows.security.cryptography.h", "body": "<p>Hello I'm quite a noob with linking in windows and linux (I'm a C# programmer)</p>\n\n<p>I have included: </p>\n\n<pre><code>#include &lt;windows.security.cryptography.h&gt;\n</code></pre>\n\n<p>because I want to use RSA sign.\nbut when I compile I get a linking error: </p>\n\n<p>ERROR LNK 2019: reference to the external symbol __imp__CryptDecodeObjectEx@32 not resolved...</p>\n\n<p>I'm using Visual Studio 2015 and I hope to not get errors on Linux :)</p>\n"}, {"tags": ["c++", "polymorphism"], "comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1492614517, "post_id": 43499355, "comment_id": 74053374, "body": "Rather than the cast between 2 completely unrelated types, what&#39;s the matter with a new class D1FunProvider?"}, {"owner": {"reputation": 2785, "user_id": 2267114, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/02QNl.png?s=128&g=1", "display_name": "Dmitry Sokolov", "link": "https://stackoverflow.com/users/2267114/dmitry-sokolov"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1492615576, "post_id": 43499355, "comment_id": 74054109, "body": "They are not unrelated. Consider <code>v2::Derived</code> as fixed <code>v1::Derived</code>."}, {"owner": {"reputation": 2785, "user_id": 2267114, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/02QNl.png?s=128&g=1", "display_name": "Dmitry Sokolov", "link": "https://stackoverflow.com/users/2267114/dmitry-sokolov"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1492615684, "post_id": 43499355, "comment_id": 74054180, "body": "I can not extract any functionality from <code>v1::Derived</code> into new class. I must not change API."}, {"owner": {"reputation": 1848, "user_id": 5505741, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-K0RGKJuJSu4/AAAAAAAAAAI/AAAAAAAAAFw/aodTCStN3gc/photo.jpg?sz=128", "display_name": "Michael Nastenko", "link": "https://stackoverflow.com/users/5505741/michael-nastenko"}, "edited": false, "score": 0, "creation_date": 1492652241, "post_id": 43499355, "comment_id": 74071994, "body": "Why do you need <code>Base1Proxy</code> and <code>Base2Proxy</code> at all?"}, {"owner": {"reputation": 2785, "user_id": 2267114, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/02QNl.png?s=128&g=1", "display_name": "Dmitry Sokolov", "link": "https://stackoverflow.com/users/2267114/dmitry-sokolov"}, "reply_to_user": {"reputation": 1848, "user_id": 5505741, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-K0RGKJuJSu4/AAAAAAAAAAI/AAAAAAAAAFw/aodTCStN3gc/photo.jpg?sz=128", "display_name": "Michael Nastenko", "link": "https://stackoverflow.com/users/5505741/michael-nastenko"}, "edited": false, "score": 0, "creation_date": 1492700782, "post_id": 43499355, "comment_id": 74100027, "body": "@MichaelNastenko, see <a href=\"http://www.gotw.ca/gotw/039.htm\" rel=\"nofollow noreferrer\">gotw.ca/gotw/039.htm</a>"}, {"owner": {"reputation": 1848, "user_id": 5505741, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-K0RGKJuJSu4/AAAAAAAAAAI/AAAAAAAAAFw/aodTCStN3gc/photo.jpg?sz=128", "display_name": "Michael Nastenko", "link": "https://stackoverflow.com/users/5505741/michael-nastenko"}, "edited": false, "score": 0, "creation_date": 1492737264, "post_id": 43499355, "comment_id": 74117087, "body": "@DmitrySokolov This approach can&#39;t work in your case. Adding virtual functions in base classes you changing you vtable, thus your <code>reinterpret_cast</code> can&#39;t be valid. Only possible way I can see is to override those functions in <code>Base1Proxy</code> and <code>Base2Proxy</code>. And still, there is no guaranty it&#39;ll work. AFAIK, standard does not define way vtables constructed for MI, wich means you <code>reinterpret_cast</code> is UB."}, {"owner": {"reputation": 2785, "user_id": 2267114, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/02QNl.png?s=128&g=1", "display_name": "Dmitry Sokolov", "link": "https://stackoverflow.com/users/2267114/dmitry-sokolov"}, "reply_to_user": {"reputation": 1848, "user_id": 5505741, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-K0RGKJuJSu4/AAAAAAAAAAI/AAAAAAAAAFw/aodTCStN3gc/photo.jpg?sz=128", "display_name": "Michael Nastenko", "link": "https://stackoverflow.com/users/5505741/michael-nastenko"}, "edited": false, "score": 0, "creation_date": 1492810515, "post_id": 43499355, "comment_id": 74156899, "body": "@MichaelNastenko, I know that. The question is not about casting and UB. How can I change <code>class Derived</code> to have both derived <code>virtual void fun()</code> methods re-implemented and to have <code>process(Derived*)</code> working as expected (new <code>class Derived</code> is binary compatible with the previous one)?"}], "owner": {"reputation": 2785, "user_id": 2267114, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/02QNl.png?s=128&g=1", "display_name": "Dmitry Sokolov", "link": "https://stackoverflow.com/users/2267114/dmitry-sokolov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1492613908, "creation_date": 1492613908, "last_edit_date": 1495542854, "question_id": 43499355, "link": "https://stackoverflow.com/questions/43499355/override-c-virtual-functions-with-the-same-name-but-leave-the-object-binary-co", "title": "Override C++ virtual functions with the same name but leave the object binary compartible", "body": "<p>I have base classes with virtual methods <code>fun</code>. I need to redefine all <code>fun</code> methods in a derived class. I know of <a href=\"https://stackoverflow.com/questions/3150310/c-virtual-override-functions-with-same-name\">SO: C++ virtual override functions with same name</a>, but it does not work for me.</p>\n\n<p>Function <code>processDerived</code> accepts <code>v1::Derived *</code>. If I pass <code>v2::Derived *</code> there it does not work as expected.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class Base1 {\npublic:\n    virtual ~Base1() {}\n    virtual void funB1_1() {}\n    virtual void funB1_2() {}\n    virtual void fun() { std::cout &lt;&lt; \"Base1::fun()\" &lt;&lt; std::endl; }\n};\n\nclass Base2 {\npublic:\n    virtual ~Base2() {}\n    virtual void fun() { std::cout &lt;&lt; \"Base2::fun()\" &lt;&lt; std::endl; }\n    virtual void funB2() {}\n};\n\nnamespace v1 {\n\n    class Derived : public Base1, public Base2 {\n        int x_;\n    public:\n        Derived() : x_(10) {}\n        virtual ~Derived() {}\n        virtual void funD1(int i) { std::cout &lt;&lt; \"Derived::funD1(\" &lt;&lt; i &lt;&lt; \")\" &lt;&lt; std::endl; }\n    };\n\n}\n\nnamespace v2 {\n\n    class Base1Proxy : public Base1 {\n    public:\n        virtual ~Base1Proxy() {}\n        virtual void fun() override { fun_Base1(); }\n    protected:\n        virtual void fun_Base1() = 0;\n    };\n\n    class Base2Proxy : public Base2 {\n    public:\n        virtual ~Base2Proxy() {}\n        virtual void fun() override { fun_Base2(); }\n    protected:\n        virtual void fun_Base2() = 0;\n    };\n\n    class Derived : public Base1Proxy, public Base2Proxy {\n        int x_;\n    public:\n        Derived() : x_(10) {}\n        virtual ~Derived() {}\n        virtual void funD1(int i) { std::cout &lt;&lt; \"Derived::funD1(\" &lt;&lt; i &lt;&lt; \")\" &lt;&lt; std::endl; }\n    protected:\n        virtual void fun_Base1() override { std::cout &lt;&lt; \"Derived::Base1::fun(), x = \" &lt;&lt; x_ &lt;&lt; std::endl; }\n        virtual void fun_Base2() override { std::cout &lt;&lt; \"Derived::Base2::fun(), x = \" &lt;&lt; x_ &lt;&lt; std::endl; }\n    };\n\n}\n\nvoid processDerived(v1::Derived * d, int i) {\n    d-&gt;funD1(i);\n}\n\nint main() {\n    v1::Derived d;\n    Base1 * b1 = &amp;d;\n    Base2 * b2 = &amp;d;\n    b1-&gt;fun();\n    b2-&gt;fun();\n    processDerived(&amp;d, 100);\n\n    v2::Derived d2;\n    b1 = &amp;d2;\n    b2 = &amp;d2;\n    b1-&gt;fun();\n    b2-&gt;fun();\n    processDerived(reinterpret_cast&lt;v1::Derived *&gt;(&amp;d2), 200);\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Base1::fun()\nBase2::fun()\nDerived::funD1(100)\nDerived::Base1::fun(), x = 10\nDerived::Base2::fun(), x = 10\nDerived::Base1::fun(), x = 10  // expected Derived::funD1(200)\n</code></pre>\n\n<p>VTABLES (generated by MSVC):</p>\n\n<pre><code>;   COMDAT ??_7Derived@v2@@6BBase2Proxy@1@@\nCONST   SEGMENT\n??_7Derived@v2@@6BBase2Proxy@1@@ DQ FLAT:??_R4Derived@v2@@6BBase2Proxy@1@@ ; v2::Derived::`vftable'\n    DQ  FLAT:??_EDerived@v2@@W7EAAPEAXI@Z\n    DQ  FLAT:?fun@Base2Proxy@v2@@UEAAXXZ\n    DQ  FLAT:?funB2@Base2@@UEAAXXZ\n    DQ  FLAT:?fun_Base2@Derived@v2@@MEAAXXZ\nCONST   ENDS\n;   COMDAT ??_7Derived@v2@@6BBase1Proxy@1@@\nCONST   SEGMENT\n??_7Derived@v2@@6BBase1Proxy@1@@ DQ FLAT:??_R4Derived@v2@@6BBase1Proxy@1@@ ; v2::Derived::`vftable'\n    DQ  FLAT:??_EDerived@v2@@UEAAPEAXI@Z\n    DQ  FLAT:?funB1_1@Base1@@UEAAXXZ\n    DQ  FLAT:?funB1_2@Base1@@UEAAXXZ\n    DQ  FLAT:?fun@Base1Proxy@v2@@UEAAXXZ\n    DQ  FLAT:?fun_Base1@Derived@v2@@MEAAXXZ\n    DQ  FLAT:?funD1@Derived@v2@@UEAAXH@Z\nCONST   ENDS\n\n;   COMDAT ??_7Base2Proxy@v2@@6B@\nCONST   SEGMENT\n??_7Base2Proxy@v2@@6B@ DQ FLAT:??_R4Base2Proxy@v2@@6B@  ; v2::Base2Proxy::`vftable'\n    DQ  FLAT:??_EBase2Proxy@v2@@UEAAPEAXI@Z\n    DQ  FLAT:?fun@Base2Proxy@v2@@UEAAXXZ\n    DQ  FLAT:?funB2@Base2@@UEAAXXZ\n    DQ  FLAT:_purecall\nCONST   ENDS\n\n;   COMDAT ??_7Base1Proxy@v2@@6B@\nCONST   SEGMENT\n??_7Base1Proxy@v2@@6B@ DQ FLAT:??_R4Base1Proxy@v2@@6B@  ; v2::Base1Proxy::`vftable'\n    DQ  FLAT:??_EBase1Proxy@v2@@UEAAPEAXI@Z\n    DQ  FLAT:?funB1_1@Base1@@UEAAXXZ\n    DQ  FLAT:?funB1_2@Base1@@UEAAXXZ\n    DQ  FLAT:?fun@Base1Proxy@v2@@UEAAXXZ\n    DQ  FLAT:_purecall\nCONST   ENDS\n\n;   COMDAT ??_7Derived@v1@@6BBase2@@@\nCONST   SEGMENT\n??_7Derived@v1@@6BBase2@@@ DQ FLAT:??_R4Derived@v1@@6BBase2@@@ ; v1::Derived::`vftable'\n    DQ  FLAT:??_EDerived@v1@@W7EAAPEAXI@Z\n    DQ  FLAT:?fun@Base2@@UEAAXXZ\n    DQ  FLAT:?funB2@Base2@@UEAAXXZ\nCONST   ENDS\n;   COMDAT ??_7Derived@v1@@6BBase1@@@\nCONST   SEGMENT\n??_7Derived@v1@@6BBase1@@@ DQ FLAT:??_R4Derived@v1@@6BBase1@@@ ; v1::Derived::`vftable'\n    DQ  FLAT:??_EDerived@v1@@UEAAPEAXI@Z\n    DQ  FLAT:?funB1_1@Base1@@UEAAXXZ\n    DQ  FLAT:?funB1_2@Base1@@UEAAXXZ\n    DQ  FLAT:?fun@Base1@@UEAAXXZ\n    DQ  FLAT:?funD1@Derived@v1@@UEAAXH@Z\nCONST   ENDS\n\n;   COMDAT ??_7Base2@@6B@\nCONST   SEGMENT\n??_7Base2@@6B@ DQ FLAT:??_R4Base2@@6B@          ; Base2::`vftable'\n    DQ  FLAT:??_EBase2@@UEAAPEAXI@Z\n    DQ  FLAT:?fun@Base2@@UEAAXXZ\n    DQ  FLAT:?funB2@Base2@@UEAAXXZ\nCONST   ENDS\n\n;   COMDAT ??_7Base1@@6B@\nCONST   SEGMENT\n??_7Base1@@6B@ DQ FLAT:??_R4Base1@@6B@          ; Base1::`vftable'\n    DQ  FLAT:??_EBase1@@UEAAPEAXI@Z\n    DQ  FLAT:?funB1_1@Base1@@UEAAXXZ\n    DQ  FLAT:?funB1_2@Base1@@UEAAXXZ\n    DQ  FLAT:?fun@Base1@@UEAAXXZ\nCONST   ENDS\n</code></pre>\n\n<p>As you can see method (1) is called instead of (2)</p>\n\n<pre><code>; old Derived::`vftable'\nDQ  FLAT:??_EDerived@v1@@UEAAPEAXI@Z\nDQ  FLAT:?funB1_1@Base1@@UEAAXXZ\nDQ  FLAT:?funB1_2@Base1@@UEAAXXZ\nDQ  FLAT:?fun@Base1@@UEAAXXZ\nDQ  FLAT:?funD1@Derived@v1@@UEAAXH@Z\n\n; new Derived::`vftable'\nDQ  FLAT:??_EDerived@v2@@UEAAPEAXI@Z\nDQ  FLAT:?funB1_1@Base1@@UEAAXXZ\nDQ  FLAT:?funB1_2@Base1@@UEAAXXZ\nDQ  FLAT:?fun@Base1Proxy@v2@@UEAAXXZ\nDQ  FLAT:?fun_Base1@Derived@v2@@MEAAXXZ   ; &lt;== (1)\nDQ  FLAT:?funD1@Derived@v2@@UEAAXH@Z      ; &lt;== (2)\n</code></pre>\n\n<p>Is there a solution for my case?</p>\n\n<p>P.S.\nI know of MSVC-specific solution but I need it to work for GCC, Clang, Apple-Clang.</p>\n"}, {"tags": ["c++", "assembly", "x86"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1492613942, "post_id": 43499212, "comment_id": 74052965, "body": "Have you tried looking at a release build? How much of those &quot;extra&quot; instructions are still there? How much memory does it keep on the stack for local variables then?"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1492614036, "post_id": 43499212, "comment_id": 74053039, "body": "this code is added by <a href=\"https://msdn.microsoft.com/en-us/library/8wtf2dfz.aspx\" rel=\"nofollow noreferrer\">/RTC (Run-Time Error Checks)</a> - off this compiler option and look how your code is changed"}, {"owner": {"reputation": 20235, "user_id": 1462718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7d451483b64aa999fecf316e7132afc6?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1462718/brandon"}, "edited": false, "score": 0, "creation_date": 1492614213, "post_id": 43499212, "comment_id": 74053173, "body": "See: <a href=\"https://godbolt.org/g/RiaU6o\" rel=\"nofollow noreferrer\">godbolt.org/g/RiaU6o</a> for optimized version."}, {"owner": {"reputation": 4467, "user_id": 3867787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gBELu.png?s=128&g=1", "display_name": "Beginner", "link": "https://stackoverflow.com/users/3867787/beginner"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1492614691, "post_id": 43499212, "comment_id": 74053494, "body": "@RbMm thanks, this explains a lot."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1492614924, "post_id": 43499212, "comment_id": 74053671, "body": "@Beginner - really if you will be use full optimization with <i>CL</i> code will be smaller and only 8 bytes must be allocated in stack - <a href=\"https://godbolt.org/g/DYncXj\" rel=\"nofollow noreferrer\">cl x86</a>"}, {"owner": {"reputation": 4467, "user_id": 3867787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gBELu.png?s=128&g=1", "display_name": "Beginner", "link": "https://stackoverflow.com/users/3867787/beginner"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1492615252, "post_id": 43499212, "comment_id": 74053889, "body": "@RbMm yes, got it. Thank you! Its interesting to see how different the resulting assembly is between visual studio and gcc. I did not expect that."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1492616219, "post_id": 43499212, "comment_id": 74054593, "body": "yes, <i>CL</i> and <i>GCC</i> compiler have very different styles in code generation"}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1492616469, "post_id": 43499212, "comment_id": 74054769, "body": "While Microsoft&#39;s and Gnu&#39;s C compilers do have subtly different code generation styles, most of the differences you&#39;re seeing in the above-linked Godbolt Compiler Explorer page is because they use different optimization flags. Also, GCC largely avoids optimizing any function named <code>main</code>, since it is executed only once. If you truly compare <a href=\"https://godbolt.org/g/M4aYui\" rel=\"nofollow noreferrer\">apples</a> to <a href=\"https://godbolt.org/g/TJKhHh\" rel=\"nofollow noreferrer\">apples</a>\u2014meaning that you use equivalent optimization flags\u2014(and ignore the fact that MSVC inlines the <code>printf</code> code), you&#39;ll see that they really aren&#39;t that different."}], "answers": [{"comments": [{"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1492613906, "post_id": 43499282, "comment_id": 74052940, "body": "I think they&#39;re just restating the question."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1492614393, "post_id": 43499282, "comment_id": 74053291, "body": "compiler of course allocate space for local variables, but you can see that 0xd8 is much more than need for 2 <i>int</i> ( sizeof(A)==4) - so need only 8 bytes for local var here. else give debug build with run-time checks, which can be removed"}], "tags": [], "owner": {"reputation": 18530, "user_id": 3344003, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/988af95d5692ee66b1fc2fe725ba738e?s=128&d=identicon&r=PG&f=1", "display_name": "user3344003", "link": "https://stackoverflow.com/users/3344003/user3344003"}, "is_accepted": true, "score": 5, "last_activity_date": 1492613734, "creation_date": 1492613734, "answer_id": 43499282, "question_id": 43499212, "link": "https://stackoverflow.com/questions/43499212/instructions-after-main-in-disassembly/43499282#43499282", "title": "Instructions after main in disassembly", "body": "<pre><code>00CC8223  sub         esp,0D8h  \n</code></pre>\n\n<p>Allocates the stack space for the local variables.</p>\n\n<blockquote>\n  <p>What are these lines after main, but before the first instruction doing?</p>\n</blockquote>\n\n<p>What are you referring to?</p>\n"}], "owner": {"reputation": 4467, "user_id": 3867787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gBELu.png?s=128&g=1", "display_name": "Beginner", "link": "https://stackoverflow.com/users/3867787/beginner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 219, "favorite_count": 0, "accepted_answer_id": 43499282, "answer_count": 1, "score": 1, "last_activity_date": 1492617034, "creation_date": 1492613561, "last_edit_date": 1492617034, "question_id": 43499212, "link": "https://stackoverflow.com/questions/43499212/instructions-after-main-in-disassembly", "title": "Instructions after main in disassembly", "body": "<p>I have a very simple program where my goal was to study how the compiler pushes the values to the different registers. But now the behaviour is much more complicated than expected, at least in debug-mode.</p>\n\n<p>What is going on here?</p>\n\n<pre><code>#include &lt;cstdio&gt;\n\nstruct A\n{\n    int B;\n    A() : B(0) { }\n};\n\nint main()\n{\n    A a;\n    A b(a);\n    printf(\"%d\", b.B);\n    printf(\"%d\", a.B);\n    return 0;\n}\n</code></pre>\n\n<p>This is how the disassembly looks like in Visual Studio:</p>\n\n<pre><code>int main()\n{\n01048210  push        ebp  \n01048211  mov         ebp,esp  \n01048213  sub         esp,0D8h  \n01048219  push        ebx  \n0104821A  push        esi  \n0104821B  push        edi  \n0104821C  lea         edi,[ebp-0D8h]  \n01048222  mov         ecx,36h  \n01048227  mov         eax,0CCCCCCCCh  \n0104822C  rep stos    dword ptr es:[edi]  \n    A a;\n0104822E  lea         ecx,[a]  \n01048231  call        A::A (104678Ah)  \n    A b(a);\n01048236  mov         eax,dword ptr [a]  \n01048239  mov         dword ptr [b],eax  \n    printf(\"%d\", b.B);\n0104823C  mov         eax,dword ptr [b]  \n0104823F  push        eax  \n01048240  push        offset string \"%d\" (1093C6Ch)  \n01048245  call        @ILT+3885(_printf) (1046F32h)  \n0104824A  add         esp,8  \n    printf(\"%d\", a.B);\n0104824D  mov         eax,dword ptr [a]  \n01048250  push        eax  \n01048251  push        offset string \"%d\" (1093C6Ch)  \n01048256  call        @ILT+3885(_printf) (1046F32h)  \n0104825B  add         esp,8  \n}\n</code></pre>\n\n<p>The first lines are explained in this <a href=\"https://reverseengineering.stackexchange.com/a/2074\">answer</a>, they are there to kep the frame pointer so that nice stack traces can be generated.</p>\n\n<p>But the next lines are confusing: why subtract 216 (0D8h) from esp? </p>\n\n<p>What are these lines after main, but before the first line of code <code>A a;</code> doing?</p>\n\n<hr>\n\n<p>Edit: after setting the runtime checks to default the disassembly is much smaller:</p>\n\n<pre><code>int main()\n{\n00247110  push        ebp  \n00247111  mov         ebp,esp  \n00247113  sub         esp,48h  \n00247116  push        ebx  \n00247117  push        esi  \n00247118  push        edi  \n    A a;\n</code></pre>\n\n<hr>\n\n<p>Edit 2: in Release mode (/Ox) a and b are completely optimized away and no memory is allocated on the stack at all:</p>\n\n<pre><code>int main()\n{\n    A a;\n    A b(a);\n    printf(\"%d\", b.B);\n00B41000  push        0  \n00B41002  push        0B499A0h  \n00B41007  call        printf (0B4102Dh)  \n    printf(\"%d\", a.B);\n00B4100C  push        0  \n00B4100E  push        0B499A4h  \n00B41013  call        printf (0B4102Dh)  \n00B41018  add         esp,10h  \n    return 0;\n0127101B  xor         eax,eax  \n}\n0127101D  ret  \n</code></pre>\n\n<hr>\n\n<p>Edit 3: this is the result using <code>gcc -m32 -O3 -mpreferred-stack-boundary=2</code> (thanks to @CodyGray).</p>\n\n<pre><code>.LC0:\n        .string \"%d\"\nTest():\n        push    0\n        push    OFFSET FLAT:.LC0\n        call    printf\n        pop     eax\n        pop     edx\n        push    0\n        push    OFFSET FLAT:.LC0\n        call    printf\n        pop     ecx\n        pop     eax\n        ret\n</code></pre>\n"}]