[{"tags": ["c++", "windows", "dll", "mingw"], "comments": [{"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 2, "creation_date": 1475105170, "post_id": 39759060, "comment_id": 66814290, "body": "You heard wrongly.  A Windows DLL can use a symbol from the executable that loads it, though it&#39;s a little unusual.  You just export the function from the executable (e.g., using <code>__declspec(dllexport)</code>) and import it into the DLL (e.g., using <code>__declspec(dllimport)</code>)."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1475105227, "post_id": 39759060, "comment_id": 66814300, "body": "... although now that I think of it, I don&#39;t know whether MinGW supports doing this.  I don&#39;t see why it <i>wouldn&#39;t</i>, but I don&#39;t know."}, {"owner": {"reputation": 2221, "user_id": 272642, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6cd5090839b1021f85bd329e1ed09264?s=128&d=identicon&r=PG", "display_name": "Vortico", "link": "https://stackoverflow.com/users/272642/vortico"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1475105442, "post_id": 39759060, "comment_id": 66814348, "body": "I&#39;m willing to use Visual C++ if needed, but I&#39;m just happy that this is possible. I&#39;m rereading how <code>dllimport</code> works because I must have misunderstood something last time."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1475105753, "post_id": 39759060, "comment_id": 66814399, "body": "Depends what you&#39;re reading.  I imagine most writers aren&#39;t going to bother covering this stuff.  Even the documentation doesn&#39;t mention it explicitly as far as I know."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1475109898, "post_id": 39759060, "comment_id": 66815268, "body": "<i>&quot;I heard somewhere that all Windows .DLLs must contain definitions for every symbol it references&quot;</i> Where did you hear that? We need to correct the source of that misinformation. Can you imagine if every DLL needed to contain a definition for every standard library symbol it used? Nonsense!"}, {"owner": {"reputation": 2221, "user_id": 272642, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6cd5090839b1021f85bd329e1ed09264?s=128&d=identicon&r=PG", "display_name": "Vortico", "link": "https://stackoverflow.com/users/272642/vortico"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1475110575, "post_id": 39759060, "comment_id": 66815390, "body": "@LightnessRacesinOrbit This isn&#39;t where I originally heard it, but it says it pretty directly here. <a href=\"http://edll.sourceforge.net/\" rel=\"nofollow noreferrer\">edll.sourceforge.net</a> <i>&quot;As many people may know, DLLs have one limitation: they cannot have even one undefined symbol.&quot;</i> Assuming this is correct, how am I misunderstanding this?"}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 1, "creation_date": 1475113181, "post_id": 39759060, "comment_id": 66815854, "body": "An undefined symbol means a symbol that isn&#39;t either present in the source code <i>or in one of the object files you are linking against</i>.  That includes import libraries.  The article goes on to explain how to create an import library for your executable, exactly as in your self-answer, although the author claims that this is &quot;kind of cumbersome&quot; for reasons that escape me."}], "answers": [{"comments": [{"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1475109561, "post_id": 39759522, "comment_id": 66815187, "body": "See <a href=\"http://stackoverflow.com/a/4490536/886887\">stackoverflow.com/a/4490536/886887</a>, the <code>__declspec(dllimport)</code> isn&#39;t necessary but allows the linker to optimize the calls.  (Although since MinGW compiles and links in a single command, perhaps you get the optimization for free too.)"}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1475115201, "post_id": 39759522, "comment_id": 66816278, "body": "For the benefit of future readers, note that the (potential) downside to exporting all symbols rather than specific ones is that it means that a third-party plugin might use an internal symbol or function you hadn&#39;t intended to make available, potentially causing compatibility issues down the track.  If you&#39;re only dealing with your own code this doesn&#39;t matter - although in that case it is usually simpler to use static linking rather than having a DLL at all."}, {"owner": {"reputation": 213, "user_id": 7267991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fdf8318af718e0c72317d3674ce008c?s=128&d=identicon&r=PG", "display_name": "Jimmy", "link": "https://stackoverflow.com/users/7267991/jimmy"}, "edited": false, "score": 0, "creation_date": 1496975149, "post_id": 39759522, "comment_id": 75893867, "body": "It&#39;s a good solution. But I really think the way for windows with mingw to build a DLL is ugly."}], "tags": [], "owner": {"reputation": 2221, "user_id": 272642, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6cd5090839b1021f85bd329e1ed09264?s=128&d=identicon&r=PG", "display_name": "Vortico", "link": "https://stackoverflow.com/users/272642/vortico"}, "is_accepted": true, "score": 4, "last_activity_date": 1475108528, "creation_date": 1475108528, "answer_id": 39759522, "question_id": 39759060, "link": "https://stackoverflow.com/questions/39759060/compile-to-dll-with-some-undefined-references-with-mingw/39759522#39759522", "title": "Compile to .dll with some undefined references with MinGW", "body": "<p>I figured out how to do it with MinGW.</p>\n\n<p>Usually, when linking DLL files (e.g. <code>plugin.dll</code>), you export a list of symbols to <code>libplugin.a</code>, but in this case, I actually want to export the symbols from the host executable <code>host.exe</code> to <code>libhost.a</code>.</p>\n\n<p><code>x86_64-w64-mingw32-g++ -o host.exe host.cpp -Wl,--out-implib,libhost.a</code></p>\n\n<p>This generates the symbol list, which you can link to when building your plugin.</p>\n\n<p><code>x86_64-w64-mingw32-g++ -shared -o plugin.dll plugin.cpp -L. -lhost</code></p>\n\n<p>This builds the DLL using the <code>libhost.a</code> file (in the current directory \".\").</p>\n\n<p>Now, it's a bit annoying to fill your host code with <code>__declspec(dllexport)</code>, so you can add the <code>--export-all-symbols</code> linker flag.\nAnd for some reason, it doesn't seem to require <code>_declspec(dllimport)</code> attributes either after doing this, but I don't know why.\nSo, you can compile the host with</p>\n\n<p><code>x86_64-w64-mingw32-g++ -o host.exe host.cpp -Wl,--export-all-symbols,--out-implib,libhost.a</code></p>\n"}], "owner": {"reputation": 2221, "user_id": 272642, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6cd5090839b1021f85bd329e1ed09264?s=128&d=identicon&r=PG", "display_name": "Vortico", "link": "https://stackoverflow.com/users/272642/vortico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3058, "favorite_count": 1, "accepted_answer_id": 39759522, "answer_count": 1, "score": 1, "last_activity_date": 1475108528, "creation_date": 1475104665, "last_edit_date": 1475106879, "question_id": 39759060, "link": "https://stackoverflow.com/questions/39759060/compile-to-dll-with-some-undefined-references-with-mingw", "title": "Compile to .dll with some undefined references with MinGW", "body": "<p>I heard somewhere that all Windows .DLLs <em>must</em> contain definitions for every symbol it references, so a .DLL file like this would never compile since it doesn't implement <code>bar()</code>.</p>\n\n<pre><code>void bar();\n\n__declspec(dllexport)\nvoid foo() {\n    bar();\n}\n</code></pre>\n\n<p>I think the analogy is that .DLLs are essentially executables with a different entry point, so they have to have all referenced defined, like an executable.</p>\n\n<p>But in a Unix environment, I can compile this to a .so file with no problem. I can then use <code>dlopen(path, RTLD_NOW | RTLD_GLOBAL);</code> from the host application to load the library and merge the host's symbols with the library's. If the host defines <code>bar()</code>, the library will simply call that function.</p>\n\n<p>I can't just re-define everything into the .DLL file, because in my application the library uses thousands of symbols from the host. Using MinGW or possibly Visual C++, is there really no way to use a symbol from the host by leaving it undefined in the .DLL and merging it when loaded? I don't want to set thousands of callback functions in the .DLL either, because that gets difficult with C++ methods.</p>\n"}, {"tags": ["c++", "opengl", "graphics", "glsl", "shader"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 2, "creation_date": 1475107699, "post_id": 39759035, "comment_id": 66814792, "body": "Same as any other uniform?"}, {"owner": {"reputation": 315, "user_id": 1577117, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c67b0dfa6edbd43f7658bf6dd682c466?s=128&d=identicon&r=PG", "display_name": "Fract", "link": "https://stackoverflow.com/users/1577117/fract"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1475129862, "post_id": 39759035, "comment_id": 66820528, "body": "I&#39;ve tried it already: writing &quot;uniform float iGlobalTime;&quot; resulted iGlobalTime=0 constantly. It seems like nothing incremented it."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1475145562, "post_id": 39759035, "comment_id": 66830404, "body": "Yes, OpenGL doesn&#39;t know that iGlobalTime is supposed to be the time, you have to set it yourself (like any other uniform)."}, {"owner": {"reputation": 315, "user_id": 1577117, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c67b0dfa6edbd43f7658bf6dd682c466?s=128&d=identicon&r=PG", "display_name": "Fract", "link": "https://stackoverflow.com/users/1577117/fract"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1475155606, "post_id": 39759035, "comment_id": 66837623, "body": "This makes sense, but how to set it up, please? This is the question here."}], "answers": [{"comments": [{"owner": {"reputation": 315, "user_id": 1577117, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c67b0dfa6edbd43f7658bf6dd682c466?s=128&d=identicon&r=PG", "display_name": "Fract", "link": "https://stackoverflow.com/users/1577117/fract"}, "edited": false, "score": 0, "creation_date": 1475129443, "post_id": 39762527, "comment_id": 66820352, "body": "you mean I can implement this code right into the fragment shader?"}, {"owner": {"reputation": 1988, "user_id": 4717805, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-xAnHpORfxvE/AAAAAAAAAAI/AAAAAAAAACE/QzOPrCINbew/photo.jpg?sz=128", "display_name": "Zouch", "link": "https://stackoverflow.com/users/4717805/zouch"}, "reply_to_user": {"reputation": 315, "user_id": 1577117, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c67b0dfa6edbd43f7658bf6dd682c466?s=128&d=identicon&r=PG", "display_name": "Fract", "link": "https://stackoverflow.com/users/1577117/fract"}, "edited": false, "score": 1, "creation_date": 1475131496, "post_id": 39762527, "comment_id": 66821412, "body": "No it should be in your c++ code, I will make this a bit more cleaner once I have access to a computer"}, {"owner": {"reputation": 315, "user_id": 1577117, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c67b0dfa6edbd43f7658bf6dd682c466?s=128&d=identicon&r=PG", "display_name": "Fract", "link": "https://stackoverflow.com/users/1577117/fract"}, "edited": false, "score": 0, "creation_date": 1475131873, "post_id": 39762527, "comment_id": 66821627, "body": "Thanks in advance."}, {"owner": {"reputation": 1988, "user_id": 4717805, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-xAnHpORfxvE/AAAAAAAAAAI/AAAAAAAAACE/QzOPrCINbew/photo.jpg?sz=128", "display_name": "Zouch", "link": "https://stackoverflow.com/users/4717805/zouch"}, "reply_to_user": {"reputation": 315, "user_id": 1577117, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c67b0dfa6edbd43f7658bf6dd682c466?s=128&d=identicon&r=PG", "display_name": "Fract", "link": "https://stackoverflow.com/users/1577117/fract"}, "edited": false, "score": 1, "creation_date": 1475136235, "post_id": 39762527, "comment_id": 66824113, "body": "I updated the answer, tell me if there is anything still unclear."}, {"owner": {"reputation": 1988, "user_id": 4717805, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-xAnHpORfxvE/AAAAAAAAAAI/AAAAAAAAACE/QzOPrCINbew/photo.jpg?sz=128", "display_name": "Zouch", "link": "https://stackoverflow.com/users/4717805/zouch"}, "reply_to_user": {"reputation": 315, "user_id": 1577117, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c67b0dfa6edbd43f7658bf6dd682c466?s=128&d=identicon&r=PG", "display_name": "Fract", "link": "https://stackoverflow.com/users/1577117/fract"}, "edited": false, "score": 1, "creation_date": 1475136264, "post_id": 39762527, "comment_id": 66824129, "body": "Actually, I did not point out the fact that your shaders remain the same, all of the code I showed is on the c++ side"}, {"owner": {"reputation": 315, "user_id": 1577117, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c67b0dfa6edbd43f7658bf6dd682c466?s=128&d=identicon&r=PG", "display_name": "Fract", "link": "https://stackoverflow.com/users/1577117/fract"}, "edited": false, "score": 0, "creation_date": 1475137288, "post_id": 39762527, "comment_id": 66824778, "body": "Thanks mate. I&#39;ll be back to my computer 2 days from now. Then I&#39;ll try out your source code and I will come back to you with the results. Until then I&#39;m reading your answer and learning... Cheers."}, {"owner": {"reputation": 315, "user_id": 1577117, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c67b0dfa6edbd43f7658bf6dd682c466?s=128&d=identicon&r=PG", "display_name": "Fract", "link": "https://stackoverflow.com/users/1577117/fract"}, "edited": false, "score": 0, "creation_date": 1475433670, "post_id": 39762527, "comment_id": 66931023, "body": "this is the template which I&#39;m trying to update with iGlobalTime: <a href=\"https://github.com/in4k/4k-Intro-Template\" rel=\"nofollow noreferrer\">github.com/in4k/4k-Intro-Template</a>   I don&#39;t know where to implement &quot;glUniform1f()&quot;."}, {"owner": {"reputation": 1988, "user_id": 4717805, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-xAnHpORfxvE/AAAAAAAAAAI/AAAAAAAAACE/QzOPrCINbew/photo.jpg?sz=128", "display_name": "Zouch", "link": "https://stackoverflow.com/users/4717805/zouch"}, "reply_to_user": {"reputation": 315, "user_id": 1577117, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c67b0dfa6edbd43f7658bf6dd682c466?s=128&d=identicon&r=PG", "display_name": "Fract", "link": "https://stackoverflow.com/users/1577117/fract"}, "edited": false, "score": 1, "creation_date": 1475434115, "post_id": 39762527, "comment_id": 66931176, "body": "In intro_do I guess"}, {"owner": {"reputation": 315, "user_id": 1577117, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c67b0dfa6edbd43f7658bf6dd682c466?s=128&d=identicon&r=PG", "display_name": "Fract", "link": "https://stackoverflow.com/users/1577117/fract"}, "edited": false, "score": 0, "creation_date": 1475436229, "post_id": 39762527, "comment_id": 66931949, "body": "if my understanding is correct then in this particular template we do not need chrono since intro_do() already has a &#39;time&#39; parameter. We only need to pass this parameter to glUniform1f, right?"}, {"owner": {"reputation": 1988, "user_id": 4717805, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-xAnHpORfxvE/AAAAAAAAAAI/AAAAAAAAACE/QzOPrCINbew/photo.jpg?sz=128", "display_name": "Zouch", "link": "https://stackoverflow.com/users/4717805/zouch"}, "reply_to_user": {"reputation": 315, "user_id": 1577117, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c67b0dfa6edbd43f7658bf6dd682c466?s=128&d=identicon&r=PG", "display_name": "Fract", "link": "https://stackoverflow.com/users/1577117/fract"}, "edited": false, "score": 1, "creation_date": 1475442296, "post_id": 39762527, "comment_id": 66933729, "body": "You get a long, so I guess this is milli- micro- or nano-seconds, so you might need a bit of conversion if you want seconds, but yeah you can use this value"}, {"owner": {"reputation": 315, "user_id": 1577117, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c67b0dfa6edbd43f7658bf6dd682c466?s=128&d=identicon&r=PG", "display_name": "Fract", "link": "https://stackoverflow.com/users/1577117/fract"}, "edited": false, "score": 0, "creation_date": 1475516971, "post_id": 39762527, "comment_id": 66964460, "body": "Either we use your solution:   [glUniform1f(glGetUniformLocation(program_id, &quot;iGlobalTime&quot;), time * 1000);]    OR something like this:    [shader.setUniform1f(&quot;iGlobalTime&quot;, time * 1000)]    we must have &quot;program_id&quot; or &quot;shader&quot;. My question is regarding to this i4k_Framework template: how can I get &quot;program_id&quot; or &quot;shader&quot; for example? How could I make iGlobalTime work for this framework? A code sample in your original answer would be appreciated. Thanks."}, {"owner": {"reputation": 1988, "user_id": 4717805, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-xAnHpORfxvE/AAAAAAAAAAI/AAAAAAAAACE/QzOPrCINbew/photo.jpg?sz=128", "display_name": "Zouch", "link": "https://stackoverflow.com/users/4717805/zouch"}, "reply_to_user": {"reputation": 315, "user_id": 1577117, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c67b0dfa6edbd43f7658bf6dd682c466?s=128&d=identicon&r=PG", "display_name": "Fract", "link": "https://stackoverflow.com/users/1577117/fract"}, "edited": false, "score": 1, "creation_date": 1475573603, "post_id": 39762527, "comment_id": 66985799, "body": "You have everything in intro.cpp to do what you want. You just have to replace <code>glUniform</code> by <code>glProgramUniform</code> and <code>program_id</code> by <code>fragmentShader</code>..."}, {"owner": {"reputation": 315, "user_id": 1577117, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c67b0dfa6edbd43f7658bf6dd682c466?s=128&d=identicon&r=PG", "display_name": "Fract", "link": "https://stackoverflow.com/users/1577117/fract"}, "edited": false, "score": 0, "creation_date": 1475611765, "post_id": 39762527, "comment_id": 67009763, "body": "Yes, right. Spent several hours to implement your thoughts. I think, I&#39;m very close now... Please see my &quot;Edited&quot; part of my original question. (Everything seems perfect now: application now runns, but crashes.)"}, {"owner": {"reputation": 1988, "user_id": 4717805, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-xAnHpORfxvE/AAAAAAAAAAI/AAAAAAAAACE/QzOPrCINbew/photo.jpg?sz=128", "display_name": "Zouch", "link": "https://stackoverflow.com/users/4717805/zouch"}, "reply_to_user": {"reputation": 315, "user_id": 1577117, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c67b0dfa6edbd43f7658bf6dd682c466?s=128&d=identicon&r=PG", "display_name": "Fract", "link": "https://stackoverflow.com/users/1577117/fract"}, "edited": false, "score": 1, "creation_date": 1475612283, "post_id": 39762527, "comment_id": 67010001, "body": "I guess you will have to debug your program and post a new question if you can&#39;t find what goes wrong here, but this is not the place to discuss about it"}, {"owner": {"reputation": 315, "user_id": 1577117, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c67b0dfa6edbd43f7658bf6dd682c466?s=128&d=identicon&r=PG", "display_name": "Fract", "link": "https://stackoverflow.com/users/1577117/fract"}, "edited": false, "score": 0, "creation_date": 1475612407, "post_id": 39762527, "comment_id": 67010057, "body": "I&#39;ll do so. Thank you for your suggestions, mate."}], "tags": [], "owner": {"reputation": 1988, "user_id": 4717805, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-xAnHpORfxvE/AAAAAAAAAAI/AAAAAAAAACE/QzOPrCINbew/photo.jpg?sz=128", "display_name": "Zouch", "link": "https://stackoverflow.com/users/4717805/zouch"}, "is_accepted": true, "score": 4, "last_activity_date": 1475136006, "last_edit_date": 1475136006, "creation_date": 1475129010, "answer_id": 39762527, "question_id": 39759035, "link": "https://stackoverflow.com/questions/39759035/how-to-implement-iglobaltime-for-a-glsl-fragment-shader-in-c/39762527#39762527", "title": "How to implement iGlobalTime for a GLSL fragment shader in C++?", "body": "<p>You can do something like this (you need a c++11 compliant compiler)</p>\n\n<pre><code>#include &lt;chrono&gt;\n\nint main()\n{\n    // init stuff\n\n    // game loop\n    using Clock = std::chronohigh_resolution_clock;\n    using TimePoint = std::chrono::time_point&lt;Clock&gt;;\n\n    TimePoint t0, t1;\n    float global_time = 0;\n    t0 = Clock::now();\n    while (run_game)\n    {\n        // dt is the time since last frame\n        // global_time is the total time since the start of the game loop\n        t1 = Clock::now();\n        float dt = std::chrono::duration_cast&lt;std::chrono::duration&lt;float, std::chrono::seconds::period&gt;&gt;(t1 - t0);\n        global_time += dt;\n\n        // Send your uniform and kickoff rendering\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Hope this helps (there might be some typos in the code I did not check it)</p>\n\n<p>EDIT:\nIt looks like you misunderstood some stuff so I will try to explain a bit more how stuff happens.</p>\n\n<h3>Shaders</h3>\n\n<p>According to <a href=\"https://www.opengl.org/wiki/Shader\" rel=\"nofollow\">the OpenGL wiki</a>, a shader is \"a user-defined program designed to run on some stage of a graphics processor which purpose is to execute one of the programmable stages of the rendering pipeline.\"</p>\n\n<p>So what this means is that, when you ask the GPU to draw stuff (<em>via</em> a <strong>draw call</strong> , i.e. <code>glDrawArrays</code> or <code>glDrawElements</code>) it will call, for each vertex, the <em>vertex shader</em>, then, for each fragment, the <em>fragment shader</em>. (this is very simplified, for a more complete explanation about the whole pipeline you can refer to <a href=\"https://www.opengl.org/wiki/Rendering_Pipeline_Overview\" rel=\"nofollow\">this OpenGL wiki</a>).</p>\n\n<h3>Communication between the CPU and the GPU</h3>\n\n<p>Before calling <code>glDrawArrays</code> or <code>glDrawElements</code> you had first to send the GPU the vertices you wanted it to draw.</p>\n\n<p>You did something in your c++ code like (this might not be the exact same code, don't worry about it)</p>\n\n<pre><code>GLfloat data[] = { ... } // The data you want to send\nGLuint vao, vbo;\nglGenVertexArrays(1, &amp;vao);\nglBindVertexArray(vao);\nglGenBuffers(1, &amp;vbo);\nglBindBuffer(GL_ARRAY_BUFFER, vbo);\nglBufferData(GL_ARRAY_BUFFER, sizeof data, data, GL_STATIC_DRAW);\nglEnableVertexAttribArray(0);\nglVertexAttribPointer(0, 2, GL_FLOAT, GL_FALSE, 0, (GLvoid*)0);\n</code></pre>\n\n<p>Here, you send some vertex array to the GPU and, on each element of it, your <em>vertex shader</em> will be executed, everytime you issue a <em>drawcall</em>.\nIn it you output a <code>gl_Position</code>, which will then be rasterized by the GPU and input to the <em>fragment</em> (or pixel) <em>shader</em>. Here, for each fragment / pixel your shader will be executed.</p>\n\n<p>\"This is fine, but how do I send global data to the GPU ?\"\nThis is where <code>uniform</code>s come into play. You can send per-shader data to the GPU using them. This is done in your c++ code something like</p>\n\n<pre><code>GLuint location = glGetUniformLocation(program_id, \"uniform_name\");\nglUniform_(location, uniform_data);\n</code></pre>\n\n<p>Since the OpenGL API is written in C, all the <code>glUniform</code> calls are postfixed by the type of data you want to send (see <a href=\"http://docs.gl/gl4/glUniform\" rel=\"nofollow\">the docs</a> for all the calls). Then, after sending the data, you are able to use it in the shader.</p>\n\n<p>Be careful, declaring a uniform in a shader is not enough, you have to send data to the GPU too. This is the same as any variable in C++, as long as you do not affect it anything it won't have a reliable value.</p>\n\n<p>In your case, since you want to send a float uniform, called <code>iGlobalTime</code>, you will have something like</p>\n\n<pre><code>GLuint time_loc = glUniformLocation(program_id, \"iGlobalTime\");\nglUniform1f(time_loc, global_time)\n</code></pre>\n\n<p>The updated c++ code taking most of this into account is</p>\n\n<pre><code>#include &lt;chrono&gt;\nint main()\n{\n    // init stuff\n    // Compile your shader_program and store its id in program_id\n    // Set the vertex data on the GPU\n\n    // game loop\n    using Clock = std::chronohigh_resolution_clock;\n    using TimePoint = std::chrono::time_point&lt;Clock&gt;;\n\n    TimePoint t0, t1;\n    float global_time = 0;\n    t0 = Clock::now();\n\n    while (!quit)\n    {\n        // dt is the time since last frame\n        // global_time is the total time since the start of the game loop\n        t1 = Clock::now();\n        float dt = std::chrono::duration_cast&lt;std::chrono::duration&lt;float, std::chrono::seconds::period&gt;&gt;(t1 - t0);\n        global_time += dt;\n\n        // Activate program\n        glUseProgram(program_id);\n        // Send global_time uniform\n        glUniform1f(glGetUniformLocation(program_id, \"iGlobalTime\"), global_time);\n\n        // Issue draw call\n        glBindVertexArray(vao);\n        glDrawArrays(GL_TRIANGLES, 0, 4);\n        glBindVertexArray(0);\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 315, "user_id": 1577117, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c67b0dfa6edbd43f7658bf6dd682c466?s=128&d=identicon&r=PG", "display_name": "Fract", "link": "https://stackoverflow.com/users/1577117/fract"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1826, "favorite_count": 1, "accepted_answer_id": 39762527, "answer_count": 1, "score": 2, "last_activity_date": 1475611290, "creation_date": 1475104531, "last_edit_date": 1475611290, "question_id": 39759035, "link": "https://stackoverflow.com/questions/39759035/how-to-implement-iglobaltime-for-a-glsl-fragment-shader-in-c", "title": "How to implement iGlobalTime for a GLSL fragment shader in C++?", "body": "<p>Currently I have a tiny C++ application which display a triangle by these two shaders:</p>\n\n<p>Vertex shader:</p>\n\n<pre><code>static const char *vertex_shader_glsl = \\\n\"#version 430\\n\"\n\n\"layout (location=0)in vec2 inVer;\"\n\"out vec2 p;\"\n\"out gl_PerVertex\"\n\"{\"\n\"vec4 gl_Position;\"\n\"};\"\n\n\"void main()\"\n\"{\"\n\"gl_Position=vec4(inVer,0.0,1.0);\"\n\"p=inVer;\"\n\"}\";\n</code></pre>\n\n<p>Fragment shader:</p>\n\n<pre><code>#version 430\n\n\nout vec4 fragColor;\nin vec2 fragCoord;\nvec2 iResolution;\n//uniform float iGlobalTime;\nfloat a = -2;\n\nvoid main()\n{\n    a = sin(-2);\n    //Colors\n    vec3 fgColor = vec3(0.741, 0.635, 0.471);\n    vec3 bgColor = vec3(0.192, 0.329, 0.439);\n\n    //Triangle barycentric coordinates defined on screen space\n\n\n    vec2 t0 = vec2(0.25, 0);\n    vec2 t1 = vec2(0.75, 0.25);\n    vec2 t2 = vec2(0.50, 0.85);\n    vec2 tCentroid  = (t0 + t1 + t2)/3.0;    \n    //Compute UV coordinates\n    vec2 uv = fragCoord.xy;\n\n    vec2 v0 = t2 - t0;\n    vec2 v1 = t1 - t0;\n    vec2 v2 = uv - t0;\n\n    //Compute barycentric coordinates \n    float dot00 = dot(v0, v0);\n    float dot01 = dot(v0, v1);\n    float dot02 = dot(v0, v2);\n    float dot11 = dot(v1, v1);\n    float dot12 = dot(v1, v2);\n\n    float invDenom = 1.0/(dot00 * dot11 - dot01 * dot01);\n    float baryX = (dot11 * dot02 - dot01 * dot12) * invDenom;\n    float baryY = (dot00 * dot12 - dot01 * dot02) * invDenom;\n\n    if((baryX &gt;= 0.0) &amp;&amp; (baryY &gt;= 0.0) &amp;&amp; (baryX + baryY &lt;= 1.0)) {\n        fragColor = vec4(fgColor, 1.0);\n    } else {\n        fragColor = vec4(bgColor, 1.0);\n    }\n}\n</code></pre>\n\n<p>This two shaders display a simple triangle:</p>\n\n<p><a href=\"https://i.stack.imgur.com/M3js4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/M3js4.png\" alt=\"enter image description here\"></a></p>\n\n<p>However I would like to rotate this triangle so I would need some timer implmemntation (iGlobalTime). </p>\n\n<p>I mean, I know that I would need something like this:\n<a href=\"https://www.shadertoy.com/view/Xtt3WX\" rel=\"nofollow noreferrer\">https://www.shadertoy.com/view/Xtt3WX</a></p>\n\n<p>However I cannot copy-paste the code from the link above, since I'm unable to use iGlobalTime in my C++ project. How to update the shaders above to be able to rotate the triangle based on the system time? How to implement iGlobalTime in a very basic C++ application?</p>\n\n<p>===========================</p>\n\n<h1>          EDITED</h1>\n\n<p>I've updated:</p>\n\n<p>ext.h:</p>\n\n<pre><code>...\n    #ifdef DEBUG\n    #define NUMFUNCTIONS 14 // &lt;&lt;== HERE\n    #else\n    #define NUMFUNCTIONS 12 // &lt;&lt;== HERE\n    #endif\n\n    extern void *myglfunc[NUMFUNCTIONS];\n\n    #define glCreateShaderProgramv         ((PFNGLCREATESHADERPROGRAMVPROC)myglfunc[0])\n    #define glGenProgramPipelines          ((PFNGLGENPROGRAMPIPELINESPROC)myglfunc[1])\n    #define glBindProgramPipeline          ((PFNGLBINDPROGRAMPIPELINEPROC)myglfunc[2])\n    #define glUseProgramStages             ((PFNGLUSEPROGRAMSTAGESPROC)myglfunc[3])\n    #define glProgramUniform4fv            ((PFNGLPROGRAMUNIFORM4FVPROC)myglfunc[4])\n    #define glGenFramebuffers              ((PFNGLGENFRAMEBUFFERSPROC)myglfunc[5])\n    #define glBindFramebuffer              ((PFNGLBINDFRAMEBUFFERPROC)myglfunc[6])\n    #define glTexStorage2D                 ((PFNGLTEXSTORAGE2DPROC)myglfunc[7])\n    #define glDrawBuffers                  ((PFNGLDRAWBUFFERSPROC)myglfunc[8])\n    #define glFramebufferTexture           ((PFNGLFRAMEBUFFERTEXTUREPROC)myglfunc[9])\n    #define glProgramUniform1f             ((PFNGLPROGRAMUNIFORM1FPROC)myglfunc[10]) // &lt;&lt;== ADDED NEW LINE HERE\n    #define glGetUniformLocation           ((PFNGLGETUNIFORMLOCATIONPROC)myglfunc[11]) // &lt;&lt;== ADDED NEW LINE HERE\n\n    #ifdef DEBUG\n    #define glGetProgramiv          ((PFNGLGETPROGRAMIVPROC)myglfunc[12])\n    #define glGetProgramInfoLog     ((PFNGLGETPROGRAMINFOLOGPROC)myglfunc[13])\n    #endif\n...\n</code></pre>\n\n<p>updated ext.cpp:</p>\n\n<pre><code>...\nstatic char *strs[] = {\n    \"glCreateShaderProgramv\",\n    \"glGenProgramPipelines\",\n    \"glBindProgramPipeline\",\n    \"glUseProgramStages\",\n    \"glProgramUniform4fv\",\n    \"glProgramUniform1fv\",\n    \"glGenFramebuffers\",\n    \"glBindFramebuffer\",\n    \"glTexStorage2D\",\n    \"glDrawBuffers\",\n    \"glFramebufferTexture\",\n    \"glProgramUniform1f\",        // &lt;&lt;== ADDED NEW LINE HERE\n    \"glGetUniformLocation\",      // &lt;&lt;== ADDED NEW LINE HERE\n\n    #ifdef DEBUG\n    \"glGetProgramiv\",\n    \"glGetProgramInfoLog\",\n    #endif\n    };\n...\n</code></pre>\n\n<p>updated intro.cpp:</p>\n\n<pre><code>...\n    void intro_do(long time)\n    {\n    ...\n    glBindFramebuffer(GL_FRAMEBUFFER, framebuffer);\n        glBindProgramPipeline(renderingPipeline);\n        // Set fparams to give input to shaders\n\n        // Render\n        glProgramUniform4fv(fragmentShader, 0, 4, fparams);\n        glProgramUniform1f(fragmentShader, glGetUniformLocation(fragmentShader, \"iGlobalTime\"), time*1000); // &lt;&lt;== ADDED NEW LINE HERE\n        glRects(-1, -1, 1, 1); // Deprecated. Still seems to work though.\n\n    ...\n    }\n</code></pre>\n\n<p>Application now runns, but crashes immediatelly saying: \"Unhandled exception at 0x7542CB49 in 4kIntro.exe: 0xC0000005: Access violation reading location 0x00000000.\"</p>\n"}, {"tags": ["c++", "winapi", "boost-asio", "api-hook"], "comments": [{"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1475104525, "post_id": 39758949, "comment_id": 66814108, "body": "Can the hook function unhook itself? If so, it could keep track of how many times it has been entered and in response to a global &quot;unhook&quot; flag or signal, unhook itself when the entrance count gets down to 0. It would be hard to make it totally thread-safe though."}, {"owner": {"reputation": 3413, "user_id": 306930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/050d410352880572736fc85f30c170b8?s=128&d=identicon&r=PG", "display_name": "conio", "link": "https://stackoverflow.com/users/306930/conio"}, "edited": false, "score": 1, "creation_date": 1475108642, "post_id": 39758949, "comment_id": 66815004, "body": "OP: First, your title and second paragraph are wrong and misleading. You don\u2019t have a problem with unhooking. Your question is \u201cHow can I determine when it is safe to unload a DLL whose function are used as hooks\u201d or somethig like this. Please edit it. To unhook a function that\u2019s currently blocked you just unhook. It may be that the simplest and safest solution to this problem is just keeping the DLL loaded."}, {"owner": {"reputation": 251, "user_id": 1807816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fd3bb983202ed777b50c2bb65b7d857?s=128&d=identicon&r=PG", "display_name": "Michael Mueller", "link": "https://stackoverflow.com/users/1807816/michael-mueller"}, "reply_to_user": {"reputation": 3413, "user_id": 306930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/050d410352880572736fc85f30c170b8?s=128&d=identicon&r=PG", "display_name": "conio", "link": "https://stackoverflow.com/users/306930/conio"}, "edited": false, "score": 0, "creation_date": 1475126215, "post_id": 39758949, "comment_id": 66819068, "body": "@conio: That&#39;s fair."}], "answers": [{"comments": [{"owner": {"reputation": 251, "user_id": 1807816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fd3bb983202ed777b50c2bb65b7d857?s=128&d=identicon&r=PG", "display_name": "Michael Mueller", "link": "https://stackoverflow.com/users/1807816/michael-mueller"}, "edited": false, "score": 0, "creation_date": 1475127006, "post_id": 39760045, "comment_id": 66819353, "body": "One of the things that this capture DLL does is send data as a dummy TCP conversation through named pipe connection to Wireshark. This is what I needed because I have a Wireshark plugin to dissect the protocol. If the Microsoft Message Analyzer could be converted to raw data, I guess I could write a converter to the pcap format. Thanks for the suggestion."}, {"owner": {"reputation": 3413, "user_id": 306930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/050d410352880572736fc85f30c170b8?s=128&d=identicon&r=PG", "display_name": "conio", "link": "https://stackoverflow.com/users/306930/conio"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1475161187, "post_id": 39760045, "comment_id": 66841818, "body": "@HarryJohnston: You can&#39;t <b>just</b> jump to <code>InterlockedDecrement</code>. OP is hooking Win32 API function, and those are stdcall. Changing the return address on the stack is nice, but what about cleaning up the stack during the return? For example <code>InterlockedDecrement</code> ends with <code>RETN 4</code> while <code>CreateFileW</code> ends with <code>RETN 1C</code>. (Also note there&#39;s no <b>extra</b> call frame. The code <b>replaces</b> the return address and jumps to the hook. But since I can&#39;t use ESP for indirect access as part of a <code>MOV</code> instruction I&#39;m doing <code>POP</code>, <code>PUSH</code> and <code>JMP</code> with the <code>PUSH</code> and <code>JMP</code> condensed to a <code>CALL</code>.)"}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1475189178, "post_id": 39760045, "comment_id": 66856353, "body": "On second thoughts, while it <i>might</i> be possible to do something about threads that are exiting, I don&#39;t think there&#39;s any sensible way to deal with the possibility that one of the threads has already followed the jump to the code cave but not incremented the counter yet.  Oh well, it was a fun thought experiment while it lasted!"}, {"owner": {"reputation": 3413, "user_id": 306930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/050d410352880572736fc85f30c170b8?s=128&d=identicon&r=PG", "display_name": "conio", "link": "https://stackoverflow.com/users/306930/conio"}, "edited": false, "score": 0, "creation_date": 1475189563, "post_id": 39760045, "comment_id": 66856452, "body": "I don\u2019t understand what you\u2019re talking about and how it relates to your previous comment. Nothing\u2019s <i>stopping</i> me from doing anything. I can do whatever I want. But what\u2019s the point? The \u2018standard\u2019 approach is to patch the beginning of the hooked function with a jump to the hook function so the hook function has the exact same prototype as the hooked function and direct access to its arguments. You want to do something else? Go ahead. But what\u2019s the point?"}, {"owner": {"reputation": 3413, "user_id": 306930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/050d410352880572736fc85f30c170b8?s=128&d=identicon&r=PG", "display_name": "conio", "link": "https://stackoverflow.com/users/306930/conio"}, "edited": false, "score": 0, "creation_date": 1475189587, "post_id": 39760045, "comment_id": 66856458, "body": "You can complicate it as much as you want, but please ELI5 how can a jumped-to <code>InterlockedDecrement</code>\u2019s <code>RETN 4</code> can properly clean 0x1C bytes of arguments from the stack. The closest thing you can do is to <i>manually</i> (probably with inline assembly) rearrange the stack before jumping to <code>InterlockedDecrement</code>, but that\u2019s not a <b>general</b> solution. You\u2019ll have to hack this up for each hook function separately."}, {"owner": {"reputation": 3413, "user_id": 306930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/050d410352880572736fc85f30c170b8?s=128&d=identicon&r=PG", "display_name": "conio", "link": "https://stackoverflow.com/users/306930/conio"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1475189601, "post_id": 39760045, "comment_id": 66856463, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/124597/discussion-between-conio-and-harry-johnston\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 3413, "user_id": 306930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/050d410352880572736fc85f30c170b8?s=128&d=identicon&r=PG", "display_name": "conio", "link": "https://stackoverflow.com/users/306930/conio"}, "is_accepted": false, "score": 1, "last_activity_date": 1475113083, "creation_date": 1475113083, "answer_id": 39760045, "question_id": 39758949, "link": "https://stackoverflow.com/questions/39758949/how-can-i-safely-unhook-a-win32-api-that-blocks/39760045#39760045", "title": "How can I safely unhook a Win32 API that blocks?", "body": "<p>I doubt a general and safe solution - other than simply keeping the DLL loaded - exists. Or refraining from all those hooks in the first place... (skip to the end of the answer for a major spoiler!)</p>\n\n<hr />\n\n<p>The argument is along the lines of what I wrote in the comment to the qeustion.</p>\n\n<p>To free the DLL you have to make sure nobody is currently executing code in the DLL and that nobody is going to going to execute code in the DLL (besides the tear-down thread that does what we\u2019re discussing).</p>\n\n<p>Code may be going to be executing in the DLL for two reasons, either we\u2019re about to call it, or we\u2019re going to return to it (or return to code that going to return to the DLL, etc.). Lets say we solve the first problem by unhooking. We\u2019re still left with the second cause. Maybe we\u2019re already inside the hook.</p>\n\n<p>You might think of doing something like this:</p>\n\n<ol>\n<li><p>Allocate a \u201ccode cave\u201d that does something like</p>\n\n<pre><code>PreHookWriteFile:\nLOCK INC [ref_count]\nPOP R15\nCALL HookWriteFile\nPostHookWriteFile:\nLOCK DEC [ref_count]\nJMP R15\n</code></pre></li>\n<li><p>Hook WriteFile with <code>JMP [PreHookWriteFile]</code></p></li>\n<li><p>Perform the release in a dedicated thread that unhooks WriteFile and wait for the recount to go to zero. Then it deallocates the code cave.</p></li>\n</ol>\n\n<p>But there are two problems with that. First, we don\u2019t really have a place to store the original return address. We can\u2019t put it on the stack, since <code>HookWriteFile</code> doesn\u2019t expect to see it there, and we can\u2019t store it in any of the non-volatile registers, because we need to restore it in <code>PostHookWriteFile</code> before jumping back, but the problem is that we don\u2019t have a place to store things.</p>\n\n<p>Second, the release thread might notice the decrease before the jump took place and release the code cave prematurely.</p>\n\n<p>I don\u2019t think it matters how clever we try to be (either with <code>__declspec(naked)</code> functions or by modifying the prototype) to have the hook functions expect the original return address on the stack. The scond problem remains - you decrease the reference count <em>before</em> you return. It\u2019s not safe to remove the code before you returned, but you can\u2019t notify your return since after you\u2019ve returned you\u2019re no longer in control. That\u2019s exactly the reason <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms683153(v=vs.85).aspx\" rel=\"nofollow\"><code>FreeLibraryAndExitThread</code></a> was created.</p>\n\n<p>One might think of something crazy like suspending all threads in the DLL and walking their stacks to make sure no code from the DLL is in any of them, but that\u2019s just opening another can of worms.</p>\n\n<hr />\n\n<p>But there\u2019s good news too.</p>\n\n<p>If what you really want is to monitor named pipe communication and you\u2019re willing to limit yourself to Windows 8 and newer versions there\u2019s a solution that\u2019s much more robust, documented and supported, take considerably less lines of code and isn\u2019t intrusive. <a href=\"https://kobyk.wordpress.com/\" rel=\"nofollow\">Koby Kahane</a> wrote a <a href=\"https://github.com/kobykahane/NpEtw\" rel=\"nofollow\">filesystem mini-filter that does exactly that</a>.</p>\n\n<p>It\u2019s output is ETW events that you can view in <a href=\"https://www.microsoft.com/en-us/download/details.aspx?id=44226\" rel=\"nofollow\">Microsoft Message Analyzer</a> or one of the other tools that consume ETW events from manifest-based providers. If you really need to see it in Wireshark you can write a small ETW consumer that consumes the events and send them through a pipe back to Wireshark. It will still be easier than all those hooks, and certainly safer and a lot less messy.</p>\n"}], "owner": {"reputation": 251, "user_id": 1807816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fd3bb983202ed777b50c2bb65b7d857?s=128&d=identicon&r=PG", "display_name": "Michael Mueller", "link": "https://stackoverflow.com/users/1807816/michael-mueller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 647, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1475113083, "creation_date": 1475103918, "question_id": 39758949, "link": "https://stackoverflow.com/questions/39758949/how-can-i-safely-unhook-a-win32-api-that-blocks", "title": "How can I safely unhook a Win32 API that blocks?", "body": "<p>I have an <a href=\"https://github.com/Vatyx/NamedPipeCapture\" rel=\"nofollow\" title=\"application\">application</a> that does a bunch of API hooking into a Win32 target application (which uses ASIO) for watching named pipe traffic handled by the target. It sets up a beginning for a transaction with a ReadFile or a WriteFile call and gets the result of that call if the call was made synchronously. If the call is asynchronous, it also traps the end of that call through a hook to GetQueuedCompletionStatus. The retrieved data gets sent to my own ASIO thread pool which services a named pipe connection to Wireshark. It's actually pretty sweet.</p>\n\n<p>Everything works great, except when I have to get the program back to its original state. Unhooking the functions works fine, except for the fact that existing calls can be blocked indefinitely in GetQueuedCompletionStatus unless I force the target application to process a ton of requests through the named pipe. If I don't wait around for those threads to unblock, I'll cause AV when GetQueuedCompletionStatus does eventually unblock and return to a code cave that no longer exists.</p>\n\n<p>The other thing I tried was to track each call made to GetQueuedCompletionStatus and have the hooking function notify a signal whenever the LpOverlapped parameter of GetQueuedCompletionStatus matches a corresponding call to PostQueuedCompletionStatus. This unblocks everything, sure, but it seriously messes up code that made the GetQueuedCompletionStatus call, resulting in an AV.</p>\n\n<p>Does anyone know of a good way to handle this? If I could do one of the following, this would work:</p>\n\n<ul>\n<li>Make a call with PostQueuedCompletionStatus that ASIO will ignore</li>\n<li>Trap a dummy call made by PostQueuedCompletionStatus and overwrite the return value in the stack</li>\n<li>Create a semi-permanent code cave containing a trampoline for hooked blocking calls which passes a function pointer accessor to the hooking calls. The trampoline function would see that if this value was not null, it would instead call that function pointer instead of return execution to the caller. Upon unblocking dispatch, the hooking code could set that function pointer to the address of GetQueuedCompletionStatus and then we'd be able to return a proper invocation result to the caller.</li>\n</ul>\n\n<p>The first option would be easy, except that it would be nice to be able to generalize this application for use with other targets. The second would be easy, except for the fact that I want to write the code to be as safe as possible. The last one might be doable, I just don't want to pollute a foreign memory space with code caves.</p>\n"}, {"tags": ["c++", "oop", "inheritance", "polymorphism"], "comments": [{"owner": {"reputation": 28846, "user_id": 327083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/i8ttM.png?s=128&g=1", "display_name": "J...", "link": "https://stackoverflow.com/users/327083/j"}, "edited": false, "score": 1, "creation_date": 1475103833, "post_id": 39758894, "comment_id": 66813916, "body": "Maybe more suited for CodeReview or Programmers?"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1475103841, "post_id": 39758894, "comment_id": 66813923, "body": "Why do you have to &quot;rewrite the entire class and copy a lot of code&quot; shown here as a result changing something about &quot;Impl2&quot;, for example?"}, {"owner": {"reputation": 12273, "user_id": 1048539, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b2bfeca28ec73556f395bed4668f9e16?s=128&d=identicon&r=PG", "display_name": "enderland", "link": "https://stackoverflow.com/users/1048539/enderland"}, "reply_to_user": {"reputation": 28846, "user_id": 327083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/i8ttM.png?s=128&g=1", "display_name": "J...", "link": "https://stackoverflow.com/users/327083/j"}, "edited": false, "score": 1, "creation_date": 1475103935, "post_id": 39758894, "comment_id": 66813949, "body": "@J... code review requires working code, not <code>etc...</code> &quot;implementations.&quot;"}, {"owner": {"reputation": 415, "user_id": 2445507, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/3742424fd95d492934df8b0ccf1b2bf0?s=128&d=identicon&r=PG", "display_name": "user2445507", "link": "https://stackoverflow.com/users/2445507/user2445507"}, "edited": false, "score": 0, "creation_date": 1475103987, "post_id": 39758894, "comment_id": 66813964, "body": "I don&#39;t have to literally rewrite the entire class. I would just copy all the code and change &quot;Impl2&quot; to &quot;Impl8&quot; or something.  I just se a problem coming in the future. I need to copy the code each time I want to change a single implementatoin."}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1475106365, "post_id": 39758894, "comment_id": 66814542, "body": "Does Impl8 inherit Interface2? Wait, why are those impl instances public?"}, {"owner": {"reputation": 6198, "user_id": 839601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6db99aa846a8217f7e2aba6fa198e7c?s=128&d=identicon&r=PG", "display_name": "gnat", "link": "https://stackoverflow.com/users/839601/gnat"}, "reply_to_user": {"reputation": 28846, "user_id": 327083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/i8ttM.png?s=128&g=1", "display_name": "J...", "link": "https://stackoverflow.com/users/327083/j"}, "edited": false, "score": 0, "creation_date": 1475133681, "post_id": 39758894, "comment_id": 66822632, "body": "@J... when referring other sites, it is often helpful to point that <a href=\"http://meta.stackexchange.com/tags/cross-posting/info\">cross-posting is frowned upon</a>"}], "answers": [{"tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": false, "score": 1, "last_activity_date": 1477150289, "creation_date": 1477150289, "answer_id": 40193873, "question_id": 39758894, "link": "https://stackoverflow.com/questions/39758894/how-would-you-refactor-this-polymorphic-design-in-order-to-make-it-more-flexible/40193873#40193873", "title": "How would you refactor this polymorphic design in order to make it more flexible when adding new implementations?", "body": "<p><strong>What I understand from your question:</strong></p>\n\n<p>If I understand correctly, you are wording with classes that are more or less and assembly of basic components, and you want to be able to exchange components with a minimum of coding.    </p>\n\n<p><strong>Alternative 1: dynamic assembly</strong></p>\n\n<p>Why not opt them for a dynamic assembly at construction: </p>\n\n<pre><code>class MyBase : public IMyInterface\n{\npublic:\n   Interface1&amp; get1()  { return *pimpl1; }\n   Interface2&amp; get2()  { return *pimpl2; }\n   //...\n   Interfacen&amp; getn()  { return *pimpln; }\n\nprotected:\n   MyBase (unique_ptr&lt;Interface1&gt; p1, \n             unique_ptr&lt;Interface2&gt; p2, \n             /*...*/ \n             unique_ptr&lt;Interfacen&gt; pn) : // constructor assembles parts\n                   pimpl1(move(p1)),pimpl2(move(p2)),/*...*/pimpln(move(pn)) {}\nprivate:\n   unique_ptr&lt;Interface1&gt; pimpl1;  // implemented with unique ptr for greater safety\n   unique_ptr&lt;Interface2&gt; pimpl2;  \n   //...\n   unique_ptr&lt;Interfacen&gt; pimpln;\n};\n</code></pre>\n\n<p>With such a logic, your derived classes would look like:  </p>\n\n<pre><code>class MyImplementationX : public MyBase {\npublic: \n   MyImplementationX() : MyBase(make_unique&lt;Impl1&gt;(), make_unique&lt;Impl2&gt;(), /*...*/ make_unique&lt;Impln&gt;()) {}\n}; \n\nclass MyImplementationY : public MyBase {\npublic: \n   MyImplementationX() : MyBase(make_unique&lt;Impl1&gt;(), make_unique&lt;Impl2b&gt;(), /*...*/ make_unique&lt;Impln&gt;()) {}\n}; \n</code></pre>\n\n<p><strong>Alternative 2: compile-time assembly</strong></p>\n\n<p>You could get rid of the runtime assembly, the additional allocations and the smart pointers, by using templates: </p>\n\n<pre><code>template &lt;class I1, class I2, /*...*/ class IN, \n          class M1, class M2, /*...*/ class M3&gt;\nclass MyBase {\npublic: \n     I1&amp; get1() { return m1; }\n     I2&amp; get2() { return m2; }\n     ...\nprivate: \n     M1 m1; \n     M2 m2;\n     ...\n};\n</code></pre>\n\n<p>By the way, there's an excellent book about this kind of design: \"<em>Modern C++ design</em>\" by A.Alexandrescu, in which the author promotes a \"<a href=\"https://en.wikipedia.org/wiki/Policy-based_design\" rel=\"nofollow\">policy based design</a>\" (the policies being there a strategy pattern implemented with templates).  </p>\n"}], "owner": {"reputation": 415, "user_id": 2445507, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/3742424fd95d492934df8b0ccf1b2bf0?s=128&d=identicon&r=PG", "display_name": "user2445507", "link": "https://stackoverflow.com/users/2445507/user2445507"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1477150289, "creation_date": 1475103483, "question_id": 39758894, "link": "https://stackoverflow.com/questions/39758894/how-would-you-refactor-this-polymorphic-design-in-order-to-make-it-more-flexible", "title": "How would you refactor this polymorphic design in order to make it more flexible when adding new implementations?", "body": "<p>I have a class that has many virtual functions that allows you to obtain references to interfaces. Clients using my API can implement my interfaces, then implement my top-level interface IMyInterface using their implementations.</p>\n\n<p>My code then acts on their polymorphic IMyInterface implementation.</p>\n\n<p>Here's some example code (not the real code, but you get the idea):</p>\n\n<pre><code>class MyImplementation : public IMyInterface\n{\n\n    public:\n\n        virtual Interface1&amp; get1()\n        {\n            return impl1\n        }\n\n        virtual Interface2&amp; get2()\n        {\n            return impl2;\n        }\n\n        // etc...\n\n    public:\n\n        Impl1 impl1;\n\n        Impl2 impl2;\n\n        // etc...\n\n\n};\n</code></pre>\n\n<p>I thought this design seemed really nice, but one day I wanted to change one of the implementations, but only one. In that case I had to rewrite the entire class and copy a lot of code.</p>\n\n<p>There are actually 6 Impl objects, so I'd have to rewrite a class that has the exact same 5 Impl objects, but with one different.</p>\n\n<p>Another problem is that people rely on this API design, so I need to keep the basics of it.</p>\n\n<p>Is there a way to modify the design to make it more flexible, while still maintaining this API? </p>\n"}, {"tags": ["c++", "windows", "winapi"], "answers": [{"comments": [{"owner": {"reputation": 1617, "user_id": 6864265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f01bd0f9716eca1ad35cf30c47ae8f6f?s=128&d=identicon&r=PG&f=1", "display_name": "Itachi Uchiwa", "link": "https://stackoverflow.com/users/6864265/itachi-uchiwa"}, "edited": false, "score": 0, "creation_date": 1475103968, "post_id": 39758925, "comment_id": 66813956, "body": "I think messages pass through UINT msg not WPARAM and LPARAM. these two variables contain extra information about the message. for example if the event was a mouse click then message passes through msg and lparam contains x-coord and y-coord of the mouse"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 1617, "user_id": 6864265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f01bd0f9716eca1ad35cf30c47ae8f6f?s=128&d=identicon&r=PG&f=1", "display_name": "Itachi Uchiwa", "link": "https://stackoverflow.com/users/6864265/itachi-uchiwa"}, "edited": false, "score": 0, "creation_date": 1475105092, "post_id": 39758925, "comment_id": 66814267, "body": "@ItachiUchiwa: the <code>msg</code> parameter specifies the message ID only. The <code>wParam</code> and <code>lParam</code> parameters carry the actual message data, if any. <i>Every</i> window message passes <code>wParam</code> and <code>lParam</code> (see the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms644958.aspx\" rel=\"nofollow noreferrer\"><code>MSG</code></a> struct), but they do not always have defined values. You are asking why 2 short integers are stuffed into the <code>wParam</code> of <code>WM_COMMAND</code>, or 2 coordinates are stuffed into the <code>lParam</code> of <code>WM_LBUTTON...</code>? The reason is because of space constraints and efficiency when a message needs to pass around more than 2 values."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 5, "last_activity_date": 1475105559, "last_edit_date": 1475105559, "creation_date": 1475103762, "answer_id": 39758925, "question_id": 39758881, "link": "https://stackoverflow.com/questions/39758881/types-of-variables-in-windows/39758925#39758925", "title": "types of variables in windows", "body": "<p>Window messages can only pass around 2 integers (the <code>wParam</code> and <code>lParam</code> parameters).</p>\n\n<p>Integer values by themselves do not require any special marshaling across module/process boundaries, they can be passed around as-is.  They are also very small to pas around, store in message queues, etc.</p>\n\n<p>For <code>WM_COMMAND</code> in particular, <code>lParam</code> may contain an <code>HWND</code> value, so the other message values (notification code and identifier) can only be passed in <code>wParam</code> only.  They are small enough to be stuffed into <code>wParam</code> directly, thus making it easy to pass around 3 values where only 2 values are allowed.</p>\n\n<p>The alternative requires allocating memory for a struct that contains the separate integers, and then pass a pointer to that struct around in one of the message parameters.  And many window messages do exactly that, but usually only when the sender and receiver are in the same process, otherwise it requires marshaling the struct data across module/process boundaries, which is a lot of overhead for simple messaging.</p>\n\n<p>It also puts the burden on the receiver to free the allocated memory, since <code>WM_COMMAND</code> is a posted message that goes through the receiving window's message queue.  The sender does not wait for the message to be processed, and thus would not be able to free the struct memory after posting the message.  The allocated memory would have to stay alive in memory until the message is finally processed by the receiving window procedure.</p>\n\n<p>Sent messages, on the other hand, go directly to a window procedure and block the sender until processed, so they do not have to worry this, the sender can free the memory after the message is sent.  But making all multi-value messages, especially status messages, do this would be a big bottleneck on the system.</p>\n\n<p>In general, it is easier and less overhead to stuff shorter integers into a larger integer whenever possible, especially in posted messages (though sent messages can certainly do it, too).</p>\n"}, {"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1475105491, "post_id": 39759124, "comment_id": 66814356, "body": "&quot;<i>we could have worked with a union</i>&quot; - <code>WM_NOTIFY</code>-based messages operate with unioned structs."}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1475105924, "post_id": 39759124, "comment_id": 66814442, "body": "@RemyLebeau true.  Thanks!  So the interoperability argument is not correct.  i&#39;ll remove it.  However for the rest; what I meant is that we do not pass  unions:  when unions and stuct are used it&#39;s always by passing a pointer, and not copying the union/struct value."}, {"owner": {"reputation": 1617, "user_id": 6864265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f01bd0f9716eca1ad35cf30c47ae8f6f?s=128&d=identicon&r=PG&f=1", "display_name": "Itachi Uchiwa", "link": "https://stackoverflow.com/users/6864265/itachi-uchiwa"}, "edited": false, "score": 1, "creation_date": 1475106657, "post_id": 39759124, "comment_id": 66814603, "body": "@Christophe: thank you your answer is also too useful"}], "tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": false, "score": 2, "last_activity_date": 1475106198, "last_edit_date": 1475106198, "creation_date": 1475105182, "answer_id": 39759124, "question_id": 39758881, "link": "https://stackoverflow.com/questions/39758881/types-of-variables-in-windows/39759124#39759124", "title": "types of variables in windows", "body": "<p>Your example shows a code snippet that processes <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms644927(v=vs.85).aspx#windows_messages\" rel=\"nofollow\">messages</a> on the windows <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms644927(v=vs.85).aspx#handling\" rel=\"nofollow\">message queue</a>. </p>\n\n<p>There are a large number of <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms644927(v=vs.85).aspx#types\" rel=\"nofollow\">different object types</a> which can be sent between windows and windows objects, and the message structure has to cope with all these different messaging requirements.  For example </p>\n\n<ul>\n<li>For a toolbar notification <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb760488(v=vs.85).aspx\" rel=\"nofollow\">NM_CHAR</a>, windows has to pass the address of some structure with additional information in <code>lParam</code>.</li>\n<li>For setting a hotkey, with <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms646284(v=vs.85).aspx\" rel=\"nofollow\">WM_SETHOTKEY</a>, windows need only a key value and the lower part of <code>wParam</code> is sufficient for that </li>\n<li>For processing a command with <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms647591(v=vs.85).aspx\" rel=\"nofollow\">WM_COMMAND</a>, windows need more ore less information depending on the command.  </li>\n</ul>\n\n<p>In an ideal C++ world, we could have implemented a polymorphic data structure for the messages, with only the relevant fields for the needed data.  But the winapi is not C++: it is designed for C and for compatibility with a broad number of languages than can interoperate with C.  </p>\n\n<p>In an ideal C world, we could have worked with a union, which would have required to first make a test on the message type (shared between all the union members) before doing further processing.  For instance in the WM_COMMAND processing, you'd first check the common message type. </p>\n\n<p>In addition if you work with unions, you'd copy the full union if you have to reissue a message, reusing its parameters. So you might copy things that are not needed. It's a small overhead, but the message loop (and in general OS functions) is something that is executed a huge number of time.  So every nanosecond matters. And it's more efficient to work only with the data that is needed, and pack it into words and double words, which 32 and 64 bit processors can handle at their highest speed.     </p>\n"}], "owner": {"reputation": 1617, "user_id": 6864265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f01bd0f9716eca1ad35cf30c47ae8f6f?s=128&d=identicon&r=PG&f=1", "display_name": "Itachi Uchiwa", "link": "https://stackoverflow.com/users/6864265/itachi-uchiwa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 39758925, "answer_count": 2, "score": 1, "last_activity_date": 1475106198, "creation_date": 1475103425, "question_id": 39758881, "link": "https://stackoverflow.com/questions/39758881/types-of-variables-in-windows", "title": "types of variables in windows", "body": "<p>as long as there are different variables types with different sizes why windows maps 2 values in one variable using macros and shift operator eg:</p>\n\n<p>this is a sample of win32 windows procedure:</p>\n\n<pre><code>//...\ncase WM_COMMAND:\n{\n    switch(LOWORD(wParam))\n    {\n        case IDC_LISTBOX:\n        {\n            switch(HIWORD(wParam))\n            {\n                //handle message\n            }\n        }\n        break;\n    }\n}\nbreak;\n</code></pre>\n\n<p>simply why windows doesn't use two variable of type short instead?\nor does this has some privileges?</p>\n\n<p>thank you guys</p>\n"}, {"tags": ["c++", "operating-system", "ipc", "child-process"], "comments": [{"owner": {"reputation": 11, "user_id": 6358278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ff7b5a37e849a8353ea628f820ee531?s=128&d=identicon&r=PG&f=1", "display_name": "TwelveGates", "link": "https://stackoverflow.com/users/6358278/twelvegates"}, "edited": false, "score": 0, "creation_date": 1475103839, "post_id": 39758846, "comment_id": 66813921, "body": "Another interesting caveat is that, if I change the name of the Queue and generate a new one, there aren&#39;t the same errors."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1475104563, "post_id": 39758846, "comment_id": 66814118, "body": "I renaming the queue fixes it, I suspect the problem is that you&#39;re reusing an old queue that still has some messages in it."}, {"owner": {"reputation": 11, "user_id": 6358278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ff7b5a37e849a8353ea628f820ee531?s=128&d=identicon&r=PG&f=1", "display_name": "TwelveGates", "link": "https://stackoverflow.com/users/6358278/twelvegates"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1475105583, "post_id": 39758846, "comment_id": 66814371, "body": "I thought that too except if I loop the sending and send 100+ messages, it starts to repeat received messages and it never receives all 100+."}, {"owner": {"reputation": 2861, "user_id": 1008115, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Nmtel.jpg?s=128&g=1", "display_name": "PnotNP", "link": "https://stackoverflow.com/users/1008115/pnotnp"}, "edited": false, "score": 0, "creation_date": 1475126898, "post_id": 39758846, "comment_id": 66819313, "body": "Firstly <a href=\"http://man7.org/linux/man-pages/man3/mq_receive.3.html\" rel=\"nofollow noreferrer\">mq_recieve</a> message size must be greater than some specified size (read the man page). Secondly, make sure to remove the message queue  <code>mq_unlink</code>. See if these solve your problem. You could <code>ipcs</code> and <code>ipcrm</code> to remove message queues"}, {"owner": {"reputation": 11, "user_id": 6358278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ff7b5a37e849a8353ea628f820ee531?s=128&d=identicon&r=PG&f=1", "display_name": "TwelveGates", "link": "https://stackoverflow.com/users/6358278/twelvegates"}, "edited": false, "score": 0, "creation_date": 1477924501, "post_id": 39758846, "comment_id": 67942772, "body": "This was actually the solution. The storage of previously established pipes and improperly handled messages/message errors were causing the issues. Be sure to properly handle all API calls and wrap them in exception handlers in order to determine that you are in fact using them correctly."}], "owner": {"reputation": 11, "user_id": 6358278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ff7b5a37e849a8353ea628f820ee531?s=128&d=identicon&r=PG&f=1", "display_name": "TwelveGates", "link": "https://stackoverflow.com/users/6358278/twelvegates"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 828, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1475106794, "creation_date": 1475103196, "last_edit_date": 1475106794, "question_id": 39758846, "link": "https://stackoverflow.com/questions/39758846/posix-message-queues-to-pass-text-between-parent-and-child-processes", "title": "POSIX Message Queues to pass text between parent and child processes", "body": "<p>I'm trying to setup demonstrations of different IPCs between parent and child processes. I have the pipe and shared memory implementations down, but for some reason I'm having a really difficult time utilizing a POSIX Message Queue.\n<br/><br/>There seems to be a lot of errors when I let the two processes loop indefinitely (while the parent sends arbitrary text and the child retrieves and outputs it). Do I need some Synchronization outside of the inherent Message Queue blocking to prevent this? I've seen that POSIX Message Queues allow for signalling. Should I be leveraging this in some way? I guess my problem is that I'm not familiar with their utilization and there aren't many concrete examples of large message passing that I've found.<br/><br/> Here's my current code:</p>\n\n<pre><code>pid = fork();\nif(pid == 0){ //Welcome Child Process\n    char buf[LIM];\n    unsigned int prio;\n    int errchkc;\n\n    if((mqdp = mq_open(QUENAME, O_CREAT | O_RDONLY, 0666, 0)) == -1){\n         perror(\"mq_open() Child\");\n         exit(1);\n    }\n\n    errchkc = mq_getattr(mqdp, &amp;attrc);\n    if(DEBUG){\n        cout &lt;&lt; \"mq_getattr status: \" &lt;&lt; errchkc &lt;&lt;\" Messages in the Queue: \" &lt;&lt; attrc.mq_curmsgs &lt;&lt;endl;\n    }\n\n    while(mq_receive(mqdp, buf, LIM, &amp;prio) != -1){\n        printf(\"RECEIVED: %s \\n\", buf);\n\n        memset(&amp;buf[0], 0, sizeof(buf));\n    }\n\n     mq_close(mqdp);\n     //}\n}else if(pid &lt; 0){\n    cout &lt;&lt; \"ERROR: Process fork() experienced an issue...\";\n}else{ //Keep going Parent Process\n    int errchkp;\n    int prio = 1;\n    char buf[LIM];\n\n    char* msg = \"Friends!\";\n    strncpy(buf, msg, LIM);\n\n    if((mqdp = mq_open(QUENAME, O_CREAT | O_WRONLY, 0666, 0)) == -1){\n        perror(\"mq_open() Parent\");\n        exit(1);\n    }\n\n    if((errchkp = mq_send(mqdp, msg, sizeof(msg), prio)) == -1){\n        perror(\"mq_send()\");\n        exit(1);\n    }\n\n    char* msg2 = \"Enemies!\";\n\n    if((errchkp = mq_send(mqdp, msg2, sizeof(msg2), prio)) == -1){\n        perror(\"mq_send()\");\n        exit(1);\n    }\n\n    mq_close(mqdp);\n}\n</code></pre>\n\n<p>I intend for the Child to receive everything sent by the parent and print it out, but sometimes it exits with no messages in the Queue without printing anything or it simply prints \"Friends!\" Does anyone have any idea what I might be doing incorrectly?</p>\n"}, {"tags": ["c++", "c++11", "sdl"], "comments": [{"owner": {"reputation": 1167, "user_id": 5339807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed5db3c9fa9b80760fc44ae03008f7a1?s=128&d=identicon&r=PG&f=1", "display_name": "mascoj", "link": "https://stackoverflow.com/users/5339807/mascoj"}, "edited": false, "score": 0, "creation_date": 1475103290, "post_id": 39758786, "comment_id": 66813772, "body": "Depends. When loading all images needed at once you are holding them in RAM. If you don&#39;t care about memory usage you could technically load them all into memory with no issue (Method 2). If you want the best of both worlds you could have a priority loading (i.e. load X-many images and swap out the least used when you need a new one)"}], "answers": [{"tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": false, "score": 3, "last_activity_date": 1475172048, "last_edit_date": 1475172048, "creation_date": 1475103292, "answer_id": 39758860, "question_id": 39758786, "link": "https://stackoverflow.com/questions/39758786/is-it-less-computer-intensive-to-load-and-unload-an-image-every-time-a-new-image/39758860#39758860", "title": "Is it less computer intensive to load and unload an image every time a new image is needed or to have all of the images loaded at once? (SDL)", "body": "<p>Firstly you dont define 'intensive'. Having a gaming machine using 100% is good - or at least not necessarily bad. It depends on what else is going on on your system.</p>\n\n<p>Second, performance analysis is done by measuring, not by thinking. YOu have measured and found an answer. Believe the answer.</p>\n\n<p>In general it is faster to store things in memory that to load off disk over and over again (as your measurement shows). However you will end up using a lot of memory (no free lunches here). You dont say how much memory you have or how big the images are. Assuming each image is 10mb, then 100 of them takes 1gb. ON a modern desktop thats not a lot, on an embedded system running on an arduiono its a disaster</p>\n\n<p>Why not try with 100 images and see what happens</p>\n"}, {"tags": [], "owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "is_accepted": false, "score": 0, "last_activity_date": 1475123152, "creation_date": 1475123152, "answer_id": 39761394, "question_id": 39758786, "link": "https://stackoverflow.com/questions/39758786/is-it-less-computer-intensive-to-load-and-unload-an-image-every-time-a-new-image/39761394#39761394", "title": "Is it less computer intensive to load and unload an image every time a new image is needed or to have all of the images loaded at once? (SDL)", "body": "<p>Measurement only confirms that doing less work results in faster execution, and doing something once is faster (in a long term) than repeating the same thing multiple times (if you'll restart your animation from first frame - you'll need to reload the same images again). More of a problem here is a latency - what if your image is considerably big and it takes noticeable time to load it, will you just stop rendering until it loads? What if hard disk is under heavy load (especially HDD, SSDs are not that vulnerable to random access) and suddenly image takes 100 times more time to load? (yes can still happen with CPU, but not that likely or extremely).</p>\n\n<p>If you can predict what part of data will be used soon then you'll only need to load that part till specified deadline. It is generally referred as 'streaming' and especially helpful for very big but predictable data - like audio or video files (since you always know playback speed and direction). With animations it may be more difficult - sometimes you know what animation will be played (e.g. cutscenes or trigger), sometimes they're just too general and any of them could be played. In latter case you'll probably need to keep animation data ready to prevent unwanted pauses.</p>\n\n<p>If data is too big you may try to do some compression (e.g. keeping data in memory in compressed form with some fast compression algorithm and decompressing when needed - much faster than reading from slow disk; special cases like for images there may be even better solution).</p>\n"}], "owner": {"reputation": 3, "user_id": 6876320, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VJ_JOJOLzP0/AAAAAAAAAAI/AAAAAAAACj4/KVT-pqZwkRI/photo.jpg?sz=128", "display_name": "Josh D", "link": "https://stackoverflow.com/users/6876320/josh-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1475172048, "creation_date": 1475102823, "question_id": 39758786, "link": "https://stackoverflow.com/questions/39758786/is-it-less-computer-intensive-to-load-and-unload-an-image-every-time-a-new-image", "title": "Is it less computer intensive to load and unload an image every time a new image is needed or to have all of the images loaded at once? (SDL)", "body": "<p>I've created a small animation for a game that uses a set of images as frames, and the current image to render changes over a certain amount of time to create the animation illusion. I've done this in two different ways, and I'm wondering which one is more efficient to use.</p>\n\n<p><strong>Method 1:</strong>\nA single image is loaded and rendered. When a different image needs to be rendered, a function is called that unloads the current image, and loads and renders the new one.</p>\n\n<p><strong>Method 2:</strong>\nAll of the images needed for the animation are loaded once, and then rendered as needed.</p>\n\n<p><strong><em>In simpler terms:</em></strong> Method 1 unloads the current image and loads the new one every time a different image is needed, and Method 2 keeps all the images needed loaded at once.</p>\n\n<p>So basically, the question is, it better to constantly load and unload images to keep as little loaded as possible, or to have many loaded at all times and not unload/load anything during the program? <strong>Does the computer have a harder time loading and unloading images or keeping many images loaded at once?</strong></p>\n\n<p>I ran looked at the task manager while running each method. CPU usage of Method 1 (loading and unloading) fluctuated between 29% and 30%, while that of Method 2 fluctuated between 28% and 29%.</p>\n\n<p>It appears that keeping all the images loaded is better according to these statistics, but the reason I don't really trust them is because the program only loads seven images. </p>\n\n<p>As the game gets bigger, there could be <strong>hundreds of images loaded at once</strong> (Method 2) or <strong>an image loaded and unloaded nearly every frame</strong> (Method 1). Which method is less intensive? Thank you for your time.</p>\n"}, {"tags": ["c++", "templates", "specialization"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1475103243, "post_id": 39758687, "comment_id": 66813759, "body": "It&#39;s difficult to understand what your question is. There aren&#39;t any partially specialized class templates in your question."}, {"owner": {"reputation": 7107, "user_id": 459780, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/55b2cca3b7a11df3a961d57a68705503?s=128&d=identicon&r=PG", "display_name": "Daniel Standage", "link": "https://stackoverflow.com/users/459780/daniel-standage"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1475104220, "post_id": 39758687, "comment_id": 66814020, "body": "@Barry If the generic template is <code>&lt;ElementType, CounterType, maxcount&gt;</code>, isn&#39;t <code>&lt;ElementType, bool, 1&gt;</code> a partial template specialization? I&#39;m happy to be corrected if my terminology is off."}, {"owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "edited": false, "score": 1, "creation_date": 1475104610, "post_id": 39758687, "comment_id": 66814127, "body": "No, it is instantiation of filter template."}], "answers": [{"tags": [], "owner": {"reputation": 642, "user_id": 6452255, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a28085748c79d229dc9daba5b91d21ad?s=128&d=identicon&r=PG&f=1", "display_name": "define cindy const", "link": "https://stackoverflow.com/users/6452255/define-cindy-const"}, "is_accepted": false, "score": 3, "last_activity_date": 1475105890, "last_edit_date": 1495541969, "creation_date": 1475105561, "answer_id": 39759161, "question_id": 39758687, "link": "https://stackoverflow.com/questions/39758687/why-do-i-need-to-redeclare-methods-members-for-partial-template-specialization/39759161#39759161", "title": "Why do I need to redeclare methods/members for partial template specialization?", "body": "<p>Pretty sure your problem is that you need to need to qualify the name <code>_arrays</code> with <code>this</code>. Try changing all instances of <code>_arrays</code> to <code>this-&gt;_arrays</code>.</p>\n\n<p>In C++, in order to access a template base class's member you must further qualify the name in order to clarify whether or not the name is dependent on the template argument to the base class (I think). If you're interested in more technical details of this feature (explained better than I could), look <a href=\"https://stackoverflow.com/questions/4643074/why-do-i-have-to-access-template-base-class-members-through-the-this-pointer\">here</a>.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "is_accepted": false, "score": 0, "last_activity_date": 1475107771, "last_edit_date": 1495540109, "creation_date": 1475106590, "answer_id": 39759282, "question_id": 39758687, "link": "https://stackoverflow.com/questions/39758687/why-do-i-need-to-redeclare-methods-members-for-partial-template-specialization/39759282#39759282", "title": "Why do I need to redeclare methods/members for partial template specialization?", "body": "<p><strong>Comment</strong></p>\n\n<p>You may consider tag dispatching:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\nusing size_t = std::size_t;\n\ntemplate&lt;typename ElementType, typename CounterType, size_t maxcount&gt;\nclass filter\n{\n    private:\n    template &lt;typename C, size_t&gt;\n    struct Tag {};\n\n    using bloom_filter_tag = Tag&lt;bool, 1&gt;;\n\n    template &lt;typename Tag&gt;\n    CounterType get_dispatch(Tag, ElementType element) {\n        std::cout &lt;&lt; \"generic\\n\";\n        return CounterType{};\n    }\n\n    CounterType get_dispatch(bloom_filter_tag, ElementType element) {\n        std::cout &lt;&lt; \"bloom filter\\n\";\n        return CounterType{};\n    }\n\n\n    public:\n    CounterType get(ElementType element) {\n        return get_dispatch(Tag&lt;CounterType, maxcount&gt;(), element);\n    }\n};\n\n\nint main() {\n    filter&lt;int, bool, 1&gt; bloom;\n    bloom.get(1);\n    filter&lt;int, double, 2&gt; generic;\n    generic.get(1);\n}\n</code></pre>\n\n<p>However, <a href=\"https://stackoverflow.com/a/39759161/2249683\">define cindy const</a> is actually answering your question.</p>\n"}], "owner": {"reputation": 7107, "user_id": 459780, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/55b2cca3b7a11df3a961d57a68705503?s=128&d=identicon&r=PG", "display_name": "Daniel Standage", "link": "https://stackoverflow.com/users/459780/daniel-standage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 293, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1475107771, "creation_date": 1475102059, "question_id": 39758687, "link": "https://stackoverflow.com/questions/39758687/why-do-i-need-to-redeclare-methods-members-for-partial-template-specialization", "title": "Why do I need to redeclare methods/members for partial template specialization?", "body": "<p>I'm relatively new to C++ templating and trying to figure out partial template specialization. I'm implementing several related data structures using templates: a Bloom filter (based on bit arrays) for probabilistic presence/absence queries, and a counting Bloom filter (with integers arrays) for abundance queries. I'm starting from the following class definition.</p>\n\n<pre><code>template&lt;typename ElementType, typename CounterType, size_t maxcount&gt;\nclass filter\n{\n    public:\n        explicit filter(std::vector&lt;size_t&gt; array_sizes);\n        void add(ElementType element);\n        CounterType get(ElementType element);\n\n    protected:\n        std::vector&lt;std::vector&lt;CounterType&gt;&gt; _arrays;\n};\n</code></pre>\n\n<p>The generic implementation of both <code>add</code> and <code>get</code> is correct, but <code>get</code> could be optimized for the bit array based Bloom filter. If I just try to add a method with the signature...</p>\n\n<pre><code>template&lt;typename ElementType&gt;\nbool filter&lt;ElementType, bool, 1&gt;::get(ElementType element);\n</code></pre>\n\n<p>...I get the following error message from the compiler.</p>\n\n<pre><code>error: nested name specifier 'filter&lt;ElementType, bool, 1&gt;::'\n    for declaration does not refer into a class, class template\n    or class template partial specialization\n</code></pre>\n\n<p>With a bit of reading, I learned that individual methods cannot be partially specialized unless the entire class is partially specialized. That's actually convenient anyway, as that gives me a chance to provide new labels for the (partially) specialized classes. I added this to the bottom of my header...</p>\n\n<pre><code>template&lt;typename ElementType&gt; class bloomfilter : public filter&lt;ElementType, bool, 1&gt; {};\ntemplate&lt;typename ElementType&gt; class countfilter : public filter&lt;ElementType, uint8_t, 255&gt; {};\ntemplate&lt;typename ElementType&gt; class bigcountfilter : public filter&lt;ElementType, uint32_t, 8589934591&gt; {};\n</code></pre>\n\n<p>...and changed the method signature from...</p>\n\n<pre><code>template&lt;typename ElementType&gt;\nbool filter&lt;ElementType, bool, 1&gt;::get(ElementType element);\n</code></pre>\n\n<p>...to...</p>\n\n<pre><code>template&lt;typename ElementType&gt;\nbool bloomfilter&lt;ElementType&gt;::get(ElementType element);\n</code></pre>\n\n<p>Apparently this isn't enough. I need to explicitly define the <code>bloomfilter::get</code> method in the partially specialized class definition.</p>\n\n<pre><code>template&lt;typename ElementType&gt;\nclass bloomfilter : public filter&lt;ElementType, bool, 1&gt;\n{\n    public:\n        bool get(ElementType element);\n};\n</code></pre>\n\n<p>But now the compiler is complaining that <code>_arrays</code> is an undeclared identifier. It's not until I add this that it compiles correctly.</p>\n\n<pre><code>template&lt;typename ElementType&gt;\nclass bloomfilter : public filter&lt;ElementType, bool, 1&gt;\n{\n    public:\n        bool get(ElementType element);\n\n    protected:\n        std::vector&lt;std::vector&lt;bool&gt;&gt; _arrays;\n};\n</code></pre>\n\n<p>Why do I have to explicitly define <code>get</code> and <code>_arrays</code> in the partially specialized template class? Why aren't they inherited from the generic class?</p>\n"}, {"tags": ["c++", "cmake", "openmp"], "answers": [{"comments": [{"owner": {"reputation": 463, "user_id": 5473533, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/caabf88655865f80e3cb0163f990b3ed?s=128&d=identicon&r=PG&f=1", "display_name": "Hao Shi", "link": "https://stackoverflow.com/users/5473533/hao-shi"}, "edited": false, "score": 0, "creation_date": 1475111249, "post_id": 39758790, "comment_id": 66815511, "body": "Thanks a lot, I write a function followed by your idea. It removes duplicated substrings in a string."}], "tags": [], "owner": {"reputation": 1577, "user_id": 6776535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c515e458c92c554943b271a6789f0372?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Pr&#233;vost", "link": "https://stackoverflow.com/users/6776535/robert-pr%c3%a9vost"}, "is_accepted": false, "score": 3, "last_activity_date": 1475102850, "creation_date": 1475102850, "answer_id": 39758790, "question_id": 39758585, "link": "https://stackoverflow.com/questions/39758585/duplicate-compile-flag-in-cmake-cxx-flags/39758790#39758790", "title": "duplicate compile flag in CMAKE_CXX_FLAGS", "body": "<p>There is a way to make CMake only include one <code>-fopenmp</code>.  <code>CMAKE_CXX_FLAGS</code> is a string that you can search for substrings.  You can conditionally add <code>-fopenmp</code> based upon whether you find it already in <code>CMAKE_CXX_FLAGS</code>.  Assuming that you were careful not to already add it twice, then you can use the following check to see if you need to add it.</p>\n\n<pre><code># find \"-fopenmp\"\nstring(FIND ${CMAKE_CXX_FLAGS} \"-fopenmp\" FLAG_INDEX)\n# check if we found it\nif (FLAG_INDEX GREATER 0)\n   message(STATUS \"WE'VE GOT AT LEAST ONE!\")\nelse()\n   message(STATUS \"WE'VE GOT NONE; ADD IT!\")\n   set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -fopenmp\")\nendif()\n</code></pre>\n\n<p>Just to be safe you could remove all instances of <code>-fopenmp</code> and then add it back in.</p>\n\n<pre><code># remove all occurrences of \"-fopenmp\"\nstring(REPLACE \"-fopenmp\" \"\" CMAKE_CXX_FLAGS ${CMAKE_CXX_FLAGS})\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13260, "user_id": 6612932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3mwe.jpg?s=128&g=1", "display_name": "rgmt", "link": "https://stackoverflow.com/users/6612932/rgmt"}, "is_accepted": true, "score": 1, "last_activity_date": 1475173195, "last_edit_date": 1475173195, "creation_date": 1475143203, "answer_id": 39767203, "question_id": 39758585, "link": "https://stackoverflow.com/questions/39758585/duplicate-compile-flag-in-cmake-cxx-flags/39767203#39767203", "title": "duplicate compile flag in CMAKE_CXX_FLAGS", "body": "<p>Beyond the <code>list(REMOVE_DUPLICATES &lt;list&gt;)</code> solution, I would advice to avoid using <code>CMAKE_CXX_FLAGS</code> nor <code>add_*</code> commands, and prefer <code>target_*</code> commands instead:</p>\n\n<ul>\n<li><a href=\"https://cmake.org/cmake/help/latest/command/target_compile_definitions.html\" rel=\"nofollow\"><code>target_compile_definitions</code></a>;</li>\n<li><a href=\"https://cmake.org/cmake/help/latest/command/target_compile_options.html\" rel=\"nofollow\"><code>target_compile_options</code></a>;</li>\n<li><a href=\"https://cmake.org/cmake/help/latest/command/target_compile_features.html\" rel=\"nofollow\"><code>target_compile_features</code></a>.</li>\n</ul>\n\n<p>Your cmake file may become something like that:</p>\n\n<pre><code>cmake_minimum_required(VERSION 2.8)\nproject(QMCLIB C CXX)\n\nfunction(removeDuplicateSubstring stringIn stringOut)\n    separate_arguments(stringIn)\n    list(REMOVE_DUPLICATES stringIn)\n    string(REPLACE \";\" \" \" stringIn \"${stringIn}\")\n    set(${stringOut} \"${stringIn}\" PARENT_SCOPE)\nendfunction()\n\nfind_package(mypack REQUIRED)\n\nset(mycompile_options -fopenmp ${mypack_flags})\n\nremoveDuplicateSubstring(${mycompile_options} mycompile_options)\n\nadd_executable(QMC codeA.cpp codeB.cpp )\ntarget_compile_definitions(QMC PUBLIC ${mypack_definitions})\ntarget_compile_options(QMC PUBLIC ${mycompile_options})\ntarget_compile_features(QMC PUBLIC cxx_constexpr)\ntarget_include_directories(QMC PUBLIC ${mypack_include_dirs})\ntarget_link_libraries(QMC ${mypack_libraries})\n</code></pre>\n"}], "owner": {"reputation": 463, "user_id": 5473533, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/caabf88655865f80e3cb0163f990b3ed?s=128&d=identicon&r=PG&f=1", "display_name": "Hao Shi", "link": "https://stackoverflow.com/users/5473533/hao-shi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1713, "favorite_count": 1, "accepted_answer_id": 39767203, "answer_count": 2, "score": 2, "last_activity_date": 1475173195, "creation_date": 1475101380, "last_edit_date": 1475111505, "question_id": 39758585, "link": "https://stackoverflow.com/questions/39758585/duplicate-compile-flag-in-cmake-cxx-flags", "title": "duplicate compile flag in CMAKE_CXX_FLAGS", "body": "<p>I am trying to use cmake to link my project. </p>\n\n<p>I need to find a package <code>mypack</code>, it will give me <code>mypack_definitions</code>, <code>mypack_flags</code>, <code>mypack_include_dirs</code> , and <code>mypack_libraries</code>. Here <code>mypack_flags</code> contains relevant flags for linking mypack. I will add <code>mypack_flags</code> to <code>CMAKE_CXX_FLAGS</code>. </p>\n\n<p>Please see the CMakeLists.txt below:</p>\n\n<pre><code>cmake_minimum_required(VERSION 2.8)\nproject(QMCLIB C CXX)\nset(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -std=c++11 -fopenmp\")\n\nfind_package(mypack REQUIRED)\n\nadd_executable(QMC codeA.cpp codeB.cpp )\nadd_definitions(${mypack_definitions})\nset(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} ${mypack_flags}\")\ntarget_link_libraries(QMC ${mypack_libraries})\ntarget_include_directories(QMC PUBLIC ${mypack_include_dirs})\n</code></pre>\n\n<p>However depend on the systems, <code>mypack_flags</code> might or not contain <code>-fopenmp</code>, when it contains <code>-fopenmp</code>, my <code>CMAKE_CXX_FLAGS</code> will have two <code>-fopenmp</code>. I can not remove <code>-fopenmp</code> in</p>\n\n<pre><code>set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -std=c++11 -fopenmp\")\n</code></pre>\n\n<p>If I remove it, when <code>mypack_flags</code> does not contains <code>-fopenmp</code>, then I will have no <code>-fopenmp</code> in CMAKE_CXX_FLAGS.</p>\n\n<p>Is there a way to force cmake only use one <code>-fopenmp</code>? Or is it okay to have two <code>-fopenmp</code>? Thank you for your suggestion.</p>\n\n<p>======================================================================</p>\n\n<p>Thanks to Robert Pr\u00e9vost, here is a general function to remove duplicate substrings:</p>\n\n<pre><code>function(removeDuplicateSubstring stringIn stringOut)\n    separate_arguments(stringIn)\n    list(REMOVE_DUPLICATES stringIn)\n    string(REPLACE \";\" \" \" stringIn \"${stringIn}\")\n    set(${stringOut} \"${stringIn}\" PARENT_SCOPE)\nendfunction()\n</code></pre>\n\n<p>We can call this function by:</p>\n\n<pre><code> removeDuplicateSubstring(${CMAKE_CXX_FLAGS} CMAKE_CXX_FLAGS)\n</code></pre>\n"}, {"tags": ["c++", "constructor", "built-in-types"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1475101613, "post_id": 39758558, "comment_id": 66813309, "body": "<i>&quot;Is there any scenario where this having a constructor for each one is better?&quot;</i> Only if they are doing different things. If you are going to convert to <code>unsigned long long</code> anyways, you can just as well do that by always taking the target type as an argument."}, {"owner": {"reputation": 76876, "user_id": 287586, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/tB5AG.png?s=128&g=1", "display_name": "dan04", "link": "https://stackoverflow.com/users/287586/dan04"}, "edited": false, "score": 0, "creation_date": 1475101649, "post_id": 39758558, "comment_id": 66813319, "body": "Why do you \u201cwant to be able to initialize the class using any built-in type\u201d?  Are you writing a \u201cvariant\u201d class, or implementing a dynamically-typed language?"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1475101660, "post_id": 39758558, "comment_id": 66813322, "body": "What the tree-with-eyes said. Remember <a href=\"https://en.wikipedia.org/wiki/KISS_principle\" rel=\"nofollow noreferrer\">KISS: &quot;Keep It Simple, Stupid&quot;</a>."}], "answers": [{"tags": [], "owner": {"reputation": 8788, "user_id": 6866309, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CFXxE.jpg?s=128&g=1", "display_name": "Pavan Chandaka", "link": "https://stackoverflow.com/users/6866309/pavan-chandaka"}, "is_accepted": false, "score": 0, "last_activity_date": 1475102310, "creation_date": 1475102310, "answer_id": 39758723, "question_id": 39758558, "link": "https://stackoverflow.com/questions/39758558/is-ok-to-have-one-constructor-for-each-built-in-data-types-c/39758723#39758723", "title": "Is ok to have one constructor for each built in data types C++", "body": "<p>I will suggest to implement one constructor for unsigned long long it.</p>\n\n<p>The reason is:\nexecute below code. Code will not compile due to ambiguity. </p>\n\n<p>Then remove the int constructor and build again. Now the code will compile and execute successfully. </p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass myClass {\n    private:\n        unsigned long long int words;\n\n    public:\n\n    myClass(int i)\n    {\n        std::cout&lt;&lt;\"in Int constructor\"&lt;&lt;std::endl;\n\n    }\n\n    myClass(long long int i)\n    {\n\n        std::cout&lt;&lt;\"in long constructor\"&lt;&lt;std::endl;\n    }\n\n};\n\nint main()\n{\n    myClass m(10000000000);    \n\n    return 0;   \n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": true, "score": 0, "last_activity_date": 1475106045, "creation_date": 1475106045, "answer_id": 39759224, "question_id": 39758558, "link": "https://stackoverflow.com/questions/39758558/is-ok-to-have-one-constructor-for-each-built-in-data-types-c/39759224#39759224", "title": "Is ok to have one constructor for each built in data types C++", "body": "<p>The only reason you should make more than one constructor is if extra handling or conversion logic is required. For example:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\n\nclass myClass\n{\n\npublic:\n    unsigned long long int words;// public for ease of example\n\n    // will consume anything convertable to unsigned long long\n    myClass(unsigned long long int val) :\n            words(val)\n    {\n    }\n\n    // will consume anything convertable to std::string, and then convert \n    // the string to unsigned long long\n    myClass(std::string val) :\n            words(std::stoull(val))\n    {\n    }\n\n};\n\nint main()\n{\n    std::cout &lt;&lt; myClass{ 10 }.words &lt;&lt; \": 10\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; myClass{ -10 }.words &lt;&lt; \": -10 (Two's compliment wrap)\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; myClass{ 3.14 }.words &lt;&lt; \": 3.14 (Truncated)\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; myClass{ \"10\" }.words &lt;&lt; \": \\\"10\\\"\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; myClass{ \"-10\" }.words &lt;&lt; \": \\\"-10\\\" (Two's compliment wrap)\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>10 is converted easily. -10 and 3.14 are converted, but will generate warnings because the value will be damaged by the translation. \"10\" and \"-10\" will be accepted by the <code>string</code>-parametered constructor, but \"-10\" will be mangled by <code>std::stoull</code>. Additional logic, and probably use of <code>strtoull</code>, will be required to handle this, if required.</p>\n"}], "owner": {"reputation": 459, "user_id": 4230336, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/132f17aa2d18474ae116fd1ae63761ea?s=128&d=identicon&r=PG&f=1", "display_name": "Ediolot", "link": "https://stackoverflow.com/users/4230336/ediolot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 39759224, "answer_count": 2, "score": 0, "last_activity_date": 1475106045, "creation_date": 1475101228, "question_id": 39758558, "link": "https://stackoverflow.com/questions/39758558/is-ok-to-have-one-constructor-for-each-built-in-data-types-c", "title": "Is ok to have one constructor for each built in data types C++", "body": "<p>Let's say we are going to create a class whose constructor or constructors will save in the variable <code>words</code> a very long number:</p>\n\n<pre><code>class myClass {\n    private:\n        unsigned long long int words;\n\n    public:\n        ...\n}\n</code></pre>\n\n<p>But I want to be able to initialize the class using any built-in type, for example: </p>\n\n<pre><code>int a; myClass A(a);\nfloat b; myClass B(b);\nlong long int c; myClass C(c);\n</code></pre>\n\n<p>Should I implemeting a constructor for each one of the types (listed <a href=\"http://en.cppreference.com/w/cpp/language/types\" rel=\"nofollow\">here</a>) in the form:</p>\n\n<pre><code>...\npublic:\n    ...\n    myClass(const short int i): \n        words(i) {}\n\n    myClass(const unsigned short int i);\n        words(i) {}\n\n    etc...\n</code></pre>\n\n<p>Or should I just implement the constructor for <code>unsigned long long int</code>:</p>\n\n<pre><code>...\npublic:\n    ...\n    myClass(const unsigned long long int i): \n        words(i) {}\n\n    ...\n</code></pre>\n\n<p>What I understand is that using the first option (one for each), this will happen:</p>\n\n<pre><code>int a; myClass(a);\n// Call constructor myClass(const int i)\n// Convert the value i to unsigned long long int and initialize words with it\n</code></pre>\n\n<p>With the second option (one for all):</p>\n\n<pre><code>int a; myClass(a);\n// Convert i to unsigned long long int and this new value as a parameter for the constructor\n// Initialize words with it\n</code></pre>\n\n<p>Now, which one should I use ?. I'm guessing it's just better to use one constructor for <code>unsigned long long int</code>. </p>\n\n<p>Is there any scenario where this having a constructor for each one is better?</p>\n"}, {"tags": ["c++", "qt", "boost", "graph"], "comments": [{"owner": {"reputation": 23, "user_id": 6896192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f872d7eb363b66ef5f6b206a1ebcddb?s=128&d=identicon&r=PG&f=1", "display_name": "Pietro", "link": "https://stackoverflow.com/users/6896192/pietro"}, "edited": false, "score": 0, "creation_date": 1475270821, "post_id": 39758446, "comment_id": 66893231, "body": "I found a similar question, but doesn&#39;t help me. Maybe could help someone else. <a href=\"http://stackoverflow.com/questions/8812466/using-c-boosts-graph-library\">this</a> . My question is similar but I want 2 different kind of nodes."}, {"owner": {"reputation": 5576, "user_id": 1794345, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILvFk.jpg?s=128&g=1", "display_name": "Rerito", "link": "https://stackoverflow.com/users/1794345/rerito"}, "edited": false, "score": 0, "creation_date": 1476263524, "post_id": 39758446, "comment_id": 67267332, "body": "What is the information carried by your node types?"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 6896192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f872d7eb363b66ef5f6b206a1ebcddb?s=128&d=identicon&r=PG&f=1", "display_name": "Pietro", "link": "https://stackoverflow.com/users/6896192/pietro"}, "edited": false, "score": 0, "creation_date": 1476299534, "post_id": 39998469, "comment_id": 67291112, "body": "Perfect. I have to test if the computation complexity for searching nodes inside the graph is log(n). But you answer is what I was searching. Even when you suppose that the graph is undirected you&#39;re right. thank you."}, {"owner": {"reputation": 5576, "user_id": 1794345, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILvFk.jpg?s=128&g=1", "display_name": "Rerito", "link": "https://stackoverflow.com/users/1794345/rerito"}, "reply_to_user": {"reputation": 23, "user_id": 6896192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f872d7eb363b66ef5f6b206a1ebcddb?s=128&d=identicon&r=PG&f=1", "display_name": "Pietro", "link": "https://stackoverflow.com/users/6896192/pietro"}, "edited": false, "score": 0, "creation_date": 1476344319, "post_id": 39998469, "comment_id": 67307220, "body": "@Giorgio It would help a lot to know about the actual algorithm you want to apply on your graph"}, {"owner": {"reputation": 23, "user_id": 6896192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f872d7eb363b66ef5f6b206a1ebcddb?s=128&d=identicon&r=PG&f=1", "display_name": "Pietro", "link": "https://stackoverflow.com/users/6896192/pietro"}, "edited": false, "score": 0, "creation_date": 1477003164, "post_id": 39998469, "comment_id": 67600090, "body": "I just wanted to implement an incremental convexHull. Nothing more."}], "tags": [], "owner": {"reputation": 5576, "user_id": 1794345, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILvFk.jpg?s=128&g=1", "display_name": "Rerito", "link": "https://stackoverflow.com/users/1794345/rerito"}, "is_accepted": true, "score": 0, "last_activity_date": 1476274811, "creation_date": 1476274811, "answer_id": 39998469, "question_id": 39758446, "link": "https://stackoverflow.com/questions/39758446/creating-bipartite-graph-for-incremental-convex-hull/39998469#39998469", "title": "Creating Bipartite Graph for incremental Convex Hull", "body": "<p>When you say bidirectional, I assume you mean undirected. If it means you want your graph to be directed but to have access to both in and out edges of a vertex, then just replace <code>boost::undirectedS</code> with <code>boost::bidirectionalS</code>\nRegarding its creation, here is what you could do:</p>\n\n<pre><code>#include &lt;cstdint&gt;\n#include &lt;boost/graph/adjacency_list.hpp&gt;\n\nenum class vertex_kind : std::uint8_t {\n    POINTD,\n    DCEL_FACE,\n    UNKNOWN\n};\n\nstruct pointd_property { /* Whatever is needed */ };\nstruct dcel_face_property { /* Whatever is needed */};\n\nstruct vertex_property {\n    vertex_kind kind;\n    union {\n        pointd_property pointd;\n        dcel_face_property dcel_face;\n    };\n    vertex_property() : kind(vertex_kind::UNKNOWN) {}\n    vertex_property(pointd_property const&amp; pprop) : kind(vertex_kind::POINTD) { new (&amp;pointd) pointd_property(pprop); }\n    vertex_property(dcel_face_property const&amp; fprop) : kind(vertex_kind::DCEL_FACE) { new (&amp;dcel_face) dcel_face_property(fprop); }\n};\n\ntypedef boost::adjacency_list&lt;boost::vecS, boost::hash_setS, boost::undirectedS, vertex_property&gt; graph_type;\n</code></pre>\n\n<p>Now populating the graph is quite easy:</p>\n\n<pre><code>auto graph = []() {\n    graph_type g;\n    auto a = boost::add_vertex({pointd_property()}, g);\n    auto b = boost::add_vertex({dcel_face_property()}, g);\n    boost::add_edge(a, b, g);\n    return g;\n} ();\n// Do whatever you please with g.\n</code></pre>\n\n<p>Of course the content of the vertex property should be in line with the requirement of the algorithm from the BGL you intend to use. If there are any requirements, let me know so I can edit my answer.</p>\n"}], "owner": {"reputation": 23, "user_id": 6896192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f872d7eb363b66ef5f6b206a1ebcddb?s=128&d=identicon&r=PG&f=1", "display_name": "Pietro", "link": "https://stackoverflow.com/users/6896192/pietro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 39998469, "answer_count": 1, "score": 0, "last_activity_date": 1476274811, "creation_date": 1475100476, "last_edit_date": 1475195094, "question_id": 39758446, "link": "https://stackoverflow.com/questions/39758446/creating-bipartite-graph-for-incremental-convex-hull", "title": "Creating Bipartite Graph for incremental Convex Hull", "body": "<p>I'm trying to create some classes to build a <strong>3D Convex Hull</strong> of a cloud of points in O(N*logN).</p>\n\n<p>I have already solved the naive problem that has a complexity of O(N\u00b2) where <em>N</em> is the number of points.\nIt works like this:</p>\n\n<p>I've a std::list of points. These points are istance of a class that I've created.\nI randomize the list and extract one by one all the points from the list.\nFor every point I check which facets are visible from that point. So, the complexity is too high, because facets are O(N) (more than 6*N)</p>\n\n<p>Then I do some operations to delete visible facets, find horizon and link the point with horizon. Informations about these operation will not help to solve my problem.</p>\n\n<p>What I need is an example for creating and handling a bipartite graph that will be quick in add and remove nodes.</p>\n\n<p>I tried to build my own classes, but I failed because my graph was too slow. \nBut some days ago I found that the boost library has the solution: <a href=\"http://www.boost.org/doc/libs/1_62_0/libs/graph/doc/\" rel=\"nofollow\">this</a>.</p>\n\n<p>But I'm stuck with how to create my simple graph with all these options, I don't understand how to create it. I've read so many times this documentation...</p>\n\n<p><strong>Now, the question is:</strong>\nhow can I build a bipartite graph using boost?</p>\n\n<p>it must be:</p>\n\n<ul>\n<li>bidirectional;  </li>\n<li>bipartite: one type of node will be Pointd the other type will be Dcel::Face;</li>\n<li>the Pointd Nodes must link all the facets that the point can see;</li>\n<li>the Dcel::Face method must link all the point that can see it.  </li>\n<li>quick remove and add operations.</li>\n</ul>\n\n<p>I don't care about memory usage. I just need it to be quick. </p>\n\n<p>This is my first question, so I don't know if it's clear or not. \nIf someone will be so kind to give me an example of how I can build a graph with these characteristic I gave you, it will be great.\nIf you know some other way to create it easily, it will be good either.</p>\n"}, {"tags": ["c++", "templates", "gcc", "clang", "sfinae"], "comments": [{"owner": {"reputation": 1577, "user_id": 6776535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c515e458c92c554943b271a6789f0372?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Pr&#233;vost", "link": "https://stackoverflow.com/users/6776535/robert-pr%c3%a9vost"}, "edited": false, "score": 3, "creation_date": 1475100487, "post_id": 39758335, "comment_id": 66812886, "body": "The latter example is not accepted by gcc versions before at least 4.7.4 (4.8.1 accepts the code)."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1475101935, "post_id": 39758335, "comment_id": 66813390, "body": "Both ICC and MSVS accept the code as well."}, {"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 0, "creation_date": 1475108833, "post_id": 39758335, "comment_id": 66815047, "body": "Deleted my answer (I was wrong). Its probably an old GCC bug, related to <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=51213\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/bugzilla/show_bug.cgi?id=51213</a>?."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4407569"}, "reply_to_user": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 0, "creation_date": 1475110780, "post_id": 39758335, "comment_id": 66815429, "body": "@WhiZTiM Actually after browsing the GCC bug tracker for a while I found <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=61806\" rel=\"nofollow noreferrer\">this</a> which seems to be very much like my test case. It is two years old though already, too."}, {"owner": {"reputation": 2564, "user_id": 2754510, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/OMF8A.jpg?s=128&g=1", "display_name": "Constantinos Glynos", "link": "https://stackoverflow.com/users/2754510/constantinos-glynos"}, "reply_to_user": {"reputation": 1577, "user_id": 6776535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c515e458c92c554943b271a6789f0372?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Pr&#233;vost", "link": "https://stackoverflow.com/users/6776535/robert-pr%c3%a9vost"}, "edited": false, "score": 0, "creation_date": 1479314159, "post_id": 39758335, "comment_id": 68507044, "body": "@RobertPr&#233;vost: g++ 4.9.3 does not accept it. clang 3.7.0 accepts it."}, {"owner": {"reputation": 1577, "user_id": 6776535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c515e458c92c554943b271a6789f0372?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Pr&#233;vost", "link": "https://stackoverflow.com/users/6776535/robert-pr%c3%a9vost"}, "reply_to_user": {"reputation": 2564, "user_id": 2754510, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/OMF8A.jpg?s=128&g=1", "display_name": "Constantinos Glynos", "link": "https://stackoverflow.com/users/2754510/constantinos-glynos"}, "edited": false, "score": 0, "creation_date": 1479314625, "post_id": 39758335, "comment_id": 68507398, "body": "@Cos It works when I try it <a href=\"http://gcc.godbolt.org/\" rel=\"nofollow noreferrer\">here</a> with the flag <code>-std=c++11</code>."}, {"owner": {"reputation": 2564, "user_id": 2754510, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/OMF8A.jpg?s=128&g=1", "display_name": "Constantinos Glynos", "link": "https://stackoverflow.com/users/2754510/constantinos-glynos"}, "reply_to_user": {"reputation": 1577, "user_id": 6776535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c515e458c92c554943b271a6789f0372?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Pr&#233;vost", "link": "https://stackoverflow.com/users/6776535/robert-pr%c3%a9vost"}, "edited": false, "score": 1, "creation_date": 1479314978, "post_id": 39758335, "comment_id": 68507655, "body": "@RobertPr&#233;vost: Wierd.. I tried it in ideone ( <b>C++14* &gt; <a href=\"http://ideone.com/fVyRGB\" rel=\"nofollow noreferrer\">ideone.com/fVyRGB</a> , **C++ 5.1</b> &gt; <a href=\"http://ideone.com/dTPRrH\" rel=\"nofollow noreferrer\">ideone.com/dTPRrH</a> ) and rextester ( <b>g++ 4.9.3</b> &gt; <a href=\"http://rextester.com/UYB67519\" rel=\"nofollow noreferrer\">rextester.com/UYB67519</a> )  and it fails with both 4.9.3 and 5.1.0. 5.1 gives a different error. I think it&#39;s a bug from <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=61806\" rel=\"nofollow noreferrer\">gcc.gnu.org/bugzilla/show_bug.cgi?id=61806</a>"}, {"owner": {"reputation": 1066, "user_id": 954246, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a0237866d201d6d8d7d86cb187359e40?s=128&d=identicon&r=PG", "display_name": "newhouse", "link": "https://stackoverflow.com/users/954246/newhouse"}, "edited": false, "score": 0, "creation_date": 1512372844, "post_id": 39758335, "comment_id": 82214484, "body": "I have the same problem with Microsoft&#39;s compiler. I used a small open source code, which does the private access tricks for me for functions and members. Although it works with members, but it can&#39;t access the functions and I have the same errors. It says, that it is private, we cannot access it. No shit Sherlock :)"}], "answers": [{"comments": [{"owner": {"reputation": 1238, "user_id": 11279879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ufGay.png?s=128&g=1", "display_name": "Dr. Gut", "link": "https://stackoverflow.com/users/11279879/dr-gut"}, "edited": false, "score": 0, "creation_date": 1583186297, "post_id": 40644634, "comment_id": 107024368, "body": "GCC 9.2 still has the <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=61806\" rel=\"nofollow noreferrer\">bug</a>: <a href=\"https://godbolt.org/z/m-dgkC\" rel=\"nofollow noreferrer\">godbolt example</a>. Despite the fact that in Bugzilla it says it is fixed."}, {"owner": {"reputation": 2564, "user_id": 2754510, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/OMF8A.jpg?s=128&g=1", "display_name": "Constantinos Glynos", "link": "https://stackoverflow.com/users/2754510/constantinos-glynos"}, "reply_to_user": {"reputation": 1238, "user_id": 11279879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ufGay.png?s=128&g=1", "display_name": "Dr. Gut", "link": "https://stackoverflow.com/users/11279879/dr-gut"}, "edited": false, "score": 0, "creation_date": 1583228096, "post_id": 40644634, "comment_id": 107036190, "body": "I have found a hack around it using <code>std::declval</code> which is even weirder. I&#39;ll append it to my answer for further help if needed. But it&#39;s best to create a public getter function and use that instead."}], "tags": [], "owner": {"reputation": 2564, "user_id": 2754510, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/OMF8A.jpg?s=128&g=1", "display_name": "Constantinos Glynos", "link": "https://stackoverflow.com/users/2754510/constantinos-glynos"}, "is_accepted": false, "score": 2, "last_activity_date": 1583228386, "last_edit_date": 1583228386, "creation_date": 1479341514, "answer_id": 40644634, "question_id": 39758335, "link": "https://stackoverflow.com/questions/39758335/private-member-access-in-template-substitution-and-sfinae/40644634#40644634", "title": "Private member access in template substitution and SFINAE", "body": "<p>This is very interesting! <strong>I think</strong> it's a g++ compiler bug and <strong>I think</strong> that this is what happens. I've tried several alterations of your code with g++ 4.9.3 and clang 3.7.0 . </p>\n\n<p>Although there are somewhat different rules to function vs class template instantiation, I believe that these are the general steps to a template instantiation:</p>\n\n<ol>\n<li>Compiler reads source file with template definitions.</li>\n<li>Name lookup (may trigger ADL) : It is the procedure by which a name,\nwhen encountered in a program, is associated with the declaration\nthat introduced it.\n(<a href=\"http://en.cppreference.com/w/cpp/language/lookup\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/language/lookup</a>)</li>\n<li>Template argument specification / deduction : In order to\ninstantiate a function template, every template argument must be\nknown, but not every template argument has to be specified. When\npossible, the compiler will deduce the missing template arguments\nfrom the function arguments.\n(<a href=\"http://en.cppreference.com/w/cpp/language/template_argument_deduction\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/language/template_argument_deduction</a>)</li>\n<li>Template substitution (may trigger SFINAE) : Every uses of a\ntemplate parameter in the function parameter list is replaced with\nthe corresponding template arguments.Substitution failure (that is,\nfailure to replace template parameters with the deduced or provided\ntemplate arguments) of a function template removes the function\ntemplate from the overload set. (<a href=\"http://en.cppreference.com/w/cpp/language/function_template#Template_argument_substitution\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/language/function_template#Template_argument_substitution</a>)</li>\n<li>Forming the overload set: Before overload resolution begins, the\nfunctions selected by name lookup and template argument deduction\nare combined to form the set of candidate functions.\n(<a href=\"http://en.cppreference.com/w/cpp/language/overload_resolution#Details\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/language/overload_resolution#Details</a>)</li>\n<li>Overload resolution : In general, the candidate function whose\nparameters match the arguments most closely is the one that is\ncalled.\n(<a href=\"http://en.cppreference.com/w/cpp/language/overload_resolution\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/language/overload_resolution</a>)</li>\n<li>Template Instantiation : the template arguments must be determined\nso that the compiler can generate an actual function (or class, from\na class template). (<a href=\"http://en.cppreference.com/w/cpp/language/function_template#Function_template_instantiation\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/language/function_template#Function_template_instantiation</a>)</li>\n<li>Compiler generates code.</li>\n</ol>\n\n<p>I'll keep these bullet-points as guidelines and references for later on. Furthermore, I'll refer to <em>template evaluation</em> from steps 1-6. If you find anything wrong in the above list please feel free to change it or comment so that I can make the changes. </p>\n\n<p>In the following example:</p>\n\n<pre><code>class A {};\n\ntemplate&lt;typename, typename = void&gt;\nstruct test\n{ test(){std::cout&lt;&lt; \"Using None\" &lt;&lt;std::endl;} };\n\ntemplate&lt;typename T&gt;\nstruct test&lt;T, decltype(T::a)&gt;\n{ test(){std::cout&lt;&lt; \"Using T::a\" &lt;&lt;std::endl;} };\n\nint main()\n{ test&lt;A&gt; a; }\n</code></pre>\n\n<p>Output from both compilers:</p>\n\n<pre><code>Using None\n</code></pre>\n\n<p>This example compiles fine in both g++ and clang, because, when the compiler completes the evaluation process of all the templates, it will only choose to instantiate the first template for being the best match to the template arguments used to create the object in main(). Also, the template substitution process fails when the compiler fails to deduce T::a (SFINAE). Furthermore, due to the argument mismatch, the specialization will not be included in the overload set and will not be instantiated. </p>\n\n<p>Should we add the second template argument, like this:</p>\n\n<pre><code>test&lt;A , decltype(A::a)&gt; a;\n</code></pre>\n\n<p>The code will not compile and both compilers would complain of:</p>\n\n<pre><code>error: no member named 'a' in 'A'\n</code></pre>\n\n<p>In the following example however, things start becoming weird:</p>\n\n<pre><code>class A { int a; };\n\ntemplate&lt;typename, typename = void&gt;\nstruct test\n{ test(){std::cout&lt;&lt; \"Using None\" &lt;&lt;std::endl;} };\n\ntemplate&lt;typename T&gt;\nstruct test&lt;T, decltype(T::a)&gt;\n{ test(){std::cout&lt;&lt; \"Using T::a\" &lt;&lt;std::endl;} };\n\nint main()\n{ test&lt;A&gt; a; }\n</code></pre>\n\n<p>Output from clang:</p>\n\n<pre><code>Using None\n</code></pre>\n\n<p>Output from g++:</p>\n\n<pre><code>error: \u2018int A::a\u2019 is private\n</code></pre>\n\n<p>To begin with, I think that this would have been a nice warning. But why an error? The template won't even get instantiated. Considering the previous example, and the fact that pointers-to-members are constant values known at compile time, it seems, that when clang completes the template evaluation stage, with the SFINAE occuring at template substitution, it accurately instantiates the first template and ignores the specialization. But when g++ goes through the substitution process, and looks for the variable T::a, it sees that it is a private member, and instead of saying SFINAE, it prompts with the error above. I think that this is where the bug is, considering this bug report: <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=61806\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/bugzilla/show_bug.cgi?id=61806</a></p>\n\n<p>Now, the curious part is in the next example, which uses the private member function:</p>\n\n<pre><code>class A{ void a() {}; };\n\ntemplate&lt;typename, typename = void&gt;\nstruct test\n{ test(){std::cout&lt;&lt; \"Using None\" &lt;&lt;std::endl;} };\n\ntemplate&lt;typename T&gt;\nstruct test&lt;T,decltype(&amp;T::a)&gt;\n{ test(){std::cout&lt;&lt; \"Using A::a\" &lt;&lt;std::endl;} };\n\nint main()\n{ test&lt;A&gt; a; }\n</code></pre>\n\n<p>Output by both compilers:</p>\n\n<pre><code>Using None\n</code></pre>\n\n<p>If the previous explanation is true, then why doesn't g++ prompt an error when the private member function is used? Again, this is only an assumption based on the outputs, but I think that this bit actually works as it should. Long story short, SFINAE kicks in, the specialization is discarded from the overload set, and only the first template gets instantiated. Maybe there's more to it than meets the eye, but if we explicitly specify the second template argument, both compilers will prompt the same error.</p>\n\n<pre><code>int main()\n{ test&lt;A , decltype(&amp;A::a)&gt; b; }\n</code></pre>\n\n<p>Output by both compilers:</p>\n\n<pre><code>error: \u2018void A::a()\u2019 is private\n</code></pre>\n\n<p>Anyway, this is the final code I've been using. To demonstrate the outputs, I've made the class public. As an interesting event, I've added a nullptr to point to the member function directly. The type from <strong>decltype(((T*)nullptr)->f())</strong> is <strong>void</strong>, and from the example below, <em>a</em> and <em>c</em> are both invoked by the specialization rather than the first template. The reason is because the second template is more specialized than the first and therefore is the best match for both of them (kill two birds with one stone) (Template Formal Ordering Rules : <a href=\"https://stackoverflow.com/a/9993549/2754510\">https://stackoverflow.com/a/9993549/2754510</a>). The type from <strong>decltype(&amp;T::f)</strong> is <strong>M4GolfFvvE</strong> (possible translation: Men 4 Golf Fear very vicious Elk), which thanks to boost::typeindex::type_id_with_cvr, it is demangled into <strong>void (Golf::*)()</strong>.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;boost/type_index.hpp&gt;\n\nclass Golf\n{\n    public:\n        int v;\n\n        void f()\n        {};\n};\n\n\ntemplate&lt;typename T&gt;\nusing var_t = decltype(T::v);\n\ntemplate&lt;typename T&gt;\nusing func_t = decltype(&amp;T::f);\n//using func_t = decltype(((T*)nullptr)-&gt;f()); //void\n\n\ntemplate&lt;typename, typename = void&gt;\nstruct test\n{\n    test(){std::cout&lt;&lt; \"Using None\" &lt;&lt;std::endl;}\n};\n\ntemplate&lt;typename T&gt;\nstruct test&lt;T,var_t&lt;T&gt; &gt;\n{\n    test(){std::cout&lt;&lt; \"Using Golf::v\" &lt;&lt;std::endl;}\n};\n\ntemplate&lt;typename T&gt;\nstruct test&lt;T,func_t&lt;T&gt; &gt;\n{\n    test(){std::cout&lt;&lt; \"Using Golf::f\" &lt;&lt;std::endl;}\n};\n\n\nint main()\n{\n    test&lt;Golf&gt; a;\n    test&lt;Golf,var_t&lt;Golf&gt; &gt; b;\n    test&lt;Golf,func_t&lt;Golf&gt; &gt; c;\n\n    using boost::typeindex::type_id_with_cvr;\n    std::cout&lt;&lt; typeid(func_t&lt;Golf&gt;).name() &lt;&lt; \" -&gt; \" &lt;&lt; type_id_with_cvr&lt;func_t&lt;Golf&gt;&gt;().pretty_name() &lt;&lt;std::endl;\n}\n</code></pre>\n\n<p>Output from both compilers (func_t = decltype(&amp;T::f)):</p>\n\n<pre><code>Using None\nUsing Golf::v\nUsing Golf::f\nM4GolfFvvE -&gt; void (Golf::*)()\n</code></pre>\n\n<p>Output from both compilers (func_t = decltype(((T*)nullptr)->f())):</p>\n\n<pre><code>Using Golf::f\nUsing Golf::v\nUsing Golf::f\nv -&gt; void\n</code></pre>\n\n<hr>\n\n<p>Edit:</p>\n\n<p>According to @Dr.Gut (comment below) this bug continues to exist in gcc 9.2. However I found a \"hack\" around this using <code>std::declval</code> which makes it look even weirder.</p>\n\n<pre><code>#include &lt;utility&gt;\n\nclass A\n{\n    int a;\n};\n\ntemplate&lt;typename, typename = void&gt;\nclass test\n{};\n\ntemplate&lt;typename T&gt;\nclass test&lt;T,decltype(std::declval&lt;A&gt;().a)&gt;\n{};\n\nint main()\n{\n    test&lt;A&gt; a;\n}\n</code></pre>\n\n<p>Online example: <a href=\"https://rextester.com/BUFU29474\" rel=\"nofollow noreferrer\">https://rextester.com/BUFU29474</a></p>\n\n<p>The code compiles and runs fine in g++ and vc++ but fails in clang++.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4407569"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 760, "favorite_count": 0, "answer_count": 1, "score": 17, "last_activity_date": 1583228386, "creation_date": 1475099901, "last_edit_date": 1475102129, "question_id": 39758335, "link": "https://stackoverflow.com/questions/39758335/private-member-access-in-template-substitution-and-sfinae", "title": "Private member access in template substitution and SFINAE", "body": "<pre><code>class A { int a; };\n\ntemplate&lt;typename, typename = void&gt;\nclass test {};\n\ntemplate&lt;typename T&gt;\nclass test&lt;T,decltype(T::a)&gt; {};\n\nint main() { test&lt;A&gt; a; }\n</code></pre>\n\n<p>The code above compiles without error on <code>clang version 3.8.0-2ubuntu4 (tags/RELEASE_380/final)</code>, but fails to compile on <code>g++-5 (Ubuntu 5.4.1-2ubuntu1~16.04) 5.4.1 20160904</code> and <code>g++-6 (Ubuntu 6.2.0-3ubuntu11~16.04) 6.2.0 20160901</code> with errors like this:</p>\n\n<pre><code>main.cpp: In function \u2018int main()\u2019:\nmain.cpp:9:22: error: \u2018int A::a\u2019 is private within this context\n int main() { test&lt;A&gt; a; }\n                      ^\nmain.cpp:1:15: note: declared private here\n class A { int a; };\n</code></pre>\n\n<p>In both cases I compiled with <code>-std=c++11</code>, but the effect is the same for <code>-std=c++14</code> and <code>-std=c++1z</code>.</p>\n\n<p>Which compiler is correct here? I assumed that, at least since C++11, accessing private members during template substitution should trigger SFINAE, implying that clang is correct and gcc is not. Is there some additional rule I am unaware of?</p>\n\n<p>For referencce, I am thinking of the note in \u00a714.8.2/8 of the current standard draft N4606:</p>\n\n<blockquote>\n  <p>If a substitution results in an invalid type or expression, type\n  deduction fails. An invalid type or expression is one that would be\n  ill-formed, with a diagnostic required, if written using the\n  substituted arguments. [ Note: If no diagnostic is required, the\n  program is still ill-formed. Access checking is done as part of the\n  substitution process. \u2014 end note ]</p>\n</blockquote>\n\n<p>Using a member function and a member function pointer instead is accepted by both compilers:</p>\n\n<pre><code>class A { void a() {}; };\n\ntemplate&lt;typename, typename = void&gt;\nclass test {};\n\ntemplate&lt;typename T&gt;\nclass test&lt;T,decltype(&amp;T::a)&gt; {};\n\nint main() { test&lt;A&gt; a; }\n</code></pre>\n"}, {"tags": ["c++", "vectorization", "sse", "compiler-optimization", "simd"], "comments": [{"owner": {"reputation": 2251, "user_id": 6872237, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7e22a086877a28b729523119d40f5e9c?s=128&d=identicon&r=PG&f=1", "display_name": "hamster on wheels", "link": "https://stackoverflow.com/users/6872237/hamster-on-wheels"}, "edited": false, "score": 0, "creation_date": 1475099923, "post_id": 39758300, "comment_id": 66812667, "body": "he compiler can vectorize loop with variable extents, as described in Richard Hodges&#39; answer to my previous question <a href=\"http://stackoverflow.com/questions/39724268/can-compiler-optimize-loop-with-variable-length\" title=\"can compiler optimize loop with variable length\">stackoverflow.com/questions/39724268/&hellip;</a>"}, {"owner": {"reputation": 2251, "user_id": 6872237, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7e22a086877a28b729523119d40f5e9c?s=128&d=identicon&r=PG&f=1", "display_name": "hamster on wheels", "link": "https://stackoverflow.com/users/6872237/hamster-on-wheels"}, "edited": false, "score": 0, "creation_date": 1475116863, "post_id": 39758300, "comment_id": 66816680, "body": "may be i should try Fortran next time. Or specify the dimension of the arrays in the make file and recompile the program whenever I change the dimension of the arrays... this means all loops will use literal extents."}], "answers": [{"comments": [{"owner": {"reputation": 2251, "user_id": 6872237, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7e22a086877a28b729523119d40f5e9c?s=128&d=identicon&r=PG&f=1", "display_name": "hamster on wheels", "link": "https://stackoverflow.com/users/6872237/hamster-on-wheels"}, "edited": false, "score": 0, "creation_date": 1476216295, "post_id": 39792091, "comment_id": 67250276, "body": "is it true that only the inner-most loop is vectorized?"}], "tags": [], "owner": {"reputation": 15557, "user_id": 390807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f64fce01ffa86130c3fae06b1fcadef?s=128&d=identicon&r=PG", "display_name": "chill", "link": "https://stackoverflow.com/users/390807/chill"}, "is_accepted": true, "score": 2, "last_activity_date": 1475241317, "last_edit_date": 1475241317, "creation_date": 1475240263, "answer_id": 39792091, "question_id": 39758300, "link": "https://stackoverflow.com/questions/39758300/loop-is-not-vectorized-when-variable-extent-is-used/39792091#39792091", "title": "Loop is not vectorized when variable extent is used", "body": "<p>In order to test dependencies between memory accesses within and across loop iterations, the array indices (in the polyhedral model of compilation), should have the form <code>i*c0 + j*c1 + k*c2 + ...</code>, where <code>i, j, k ...</code> are loop counters and <code>c0, c1, c2 ...</code> are integer constants.</p>\n\n<p>In your example, apparently the problem is with <code>c[2] * Astride[2]</code>, because <code>Astride[2]</code> is not a constant.</p>\n\n<p>Indeed, leaving the expression </p>\n\n<pre><code>A_i = c[0]*Astride[0] + c[1]*Astride[1] + c[2];\n</code></pre>\n\n<p>allows the loop to be vectorised.</p>\n\n<p><a href=\"https://godbolt.org/g/gOUVfE\" rel=\"nofollow\">https://godbolt.org/g/gOUVfE</a></p>\n\n<p>(edit: Note that <code>X = Adata + c[0]*Astride[0] + c[1]*Astride[1]</code> is a loop invariant, so within the innermost loop we have just array <code>X</code> and index <code>c[0]</code>).</p>\n\n<p>Now, the question is how to trickle down a constant in the place of <code>AStride[2]</code>. Fortunately, it seems from your calculation in <code>cal_stride</code>, the last one is always 1. So we should be done.</p>\n"}], "owner": {"reputation": 2251, "user_id": 6872237, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7e22a086877a28b729523119d40f5e9c?s=128&d=identicon&r=PG&f=1", "display_name": "hamster on wheels", "link": "https://stackoverflow.com/users/6872237/hamster-on-wheels"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 339, "favorite_count": 0, "accepted_answer_id": 39792091, "answer_count": 1, "score": 3, "last_activity_date": 1475241317, "creation_date": 1475099656, "last_edit_date": 1475240869, "question_id": 39758300, "link": "https://stackoverflow.com/questions/39758300/loop-is-not-vectorized-when-variable-extent-is-used", "title": "Loop is not vectorized when variable extent is used", "body": "<p>Version A code is not vectorized while version B code is vectorized.</p>\n\n<p>How to make version A vectorize and keep the variable extents (without using literal extents)?</p>\n\n<p>The nested loop is for multiplication with broadcasting as in numpy library of python and matlab. Description of broadcasting in numpy library is <a href=\"http://docs.scipy.org/doc/numpy/user/basics.broadcasting.html\" rel=\"nofollow\">here</a>.</p>\n\n<p>Version A code (no std::vector. no vectorization.)</p>\n\n<p>This only uses <code>imull   (%rsi), %edx</code> in <code>.L169</code>, which is not a SIMD instruction.</p>\n\n<p><a href=\"https://gcc.godbolt.org/#compilers:!((compiler:g62,options:&#39;-msse4.2+-std%3Dc%2B%2B14+-O3&#39;,sourcez:MQSwdgxgNgrgJgUwAQB4QHsDOAXATggQwFsA%2BAKFElkVRznGwDoALc7ATwAcFEAzJBgGYATAH1sSACIBBACrTRsgJoAFAKIBuMtgRFOUAjtogAXgnFIAcuUynzEiASijbZgBSv7SNwDJpmZgJuAEoAbUsAXWCAbzIkeKRPC08kAF4kAEYtBKRedFwPOwsQNKQABg0BVCtKgGpakGDEuyQAKnT/QO5QkAjshPxsGFwwZrMtAF9tXX1DZBQkiWsyRbakR2ccXBBEQrMLX06ghDDIpCbYnNWU9I2XOzcjkK04hNXWpH88HeR0sAQAO5jezhPqveJfbaIUJlCKlTwAeieCBhYJyeQKqxK6SyVRQNSQ9UalxyCUhPx6cI6WwpIAAtBkIkiAsdKf14lMcoNhqNyYhJtM9AYjAsiktyDJ5IpVGo1uAQNhRHBDAQ3MCDn4WSFQecSfFri1bk57u5kcF2VI5AplOo1srsARSv8gZLrTLQp40QkMXsvNjypUSvjPHUGjFwaT7QRKaUSrVMhbOQMEEMRkgowLBbMRatlgA3dA7JCcbZgRVRtyu6W2j7SKMAGnVEkOWpOOvDVzFwNKd08j1b5ojPqxpQqeOBoeJEau2DgAC45xB0DAJCh8XWVTG10gAESNneJiN0BdLleoYOzhcIMBwKCZhhIIgEcBuAs7DsJJdgHAIAAeJabJAb1KQQLVWZFQipJBomEMp60EesABYJjArsACFW0g0pogyeD6wyFCIwIFd0E%2BGkaCNTZvl2M0LWI7BSIw6jfnWY1yIQNwMK6E4XhyejSI3B1YzABUlRVftuMHPiSKQNCo2E0SKy445ByPLsIFCG8oOiODdMI0kEgRIzTzLBBcDU/YJGYBhNLgbS4OEesyn0gykCM6yyyQHQoCgTAkABayIGYJACHwLzmGQAAjXB0AIOBHBwcAAHMQt/BBMEYCyvAUEBGzQ0QQAtH0NNhUdKhKuF10w2FQwqmI3IRMjuJCvyPOwVFR2nb18jcDTGTK9ZQn6/FlO6RlaqGqJoga0bkAIVqbP69JhC6gzitCYQoLHDTNuqCDNo0eodqmhr/GOFqkDajattW1yIQKntUVaPkUVK%2BM%2BoiZ72MmwlBs2r7mOui07pyfL/Q%2B1omKhFFxtuu7BOjHK4XaWSo1CMGvRBpAkwMnHsYjEsGDEh1HgbJqVMmIAA)),filterAsm:(colouriseAsm:!t,directives:!t,labels:!t),version:3\" rel=\"nofollow\">gcc godbolt</a></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdint.h&gt;\ntypedef int32_t DATA_TYPE;\ntemplate &lt;size_t N&gt;\nsize_t cal_size(size_t (&amp;Ashape)[N]){\n    size_t size = 1;\n    for(size_t i = 0; i &lt; N; ++i) size *= Ashape[i];\n    return size;\n}\ntemplate &lt;size_t N&gt;\nsize_t * cal_stride(size_t (&amp;Ashape)[N] ) {\n    size_t size = cal_size(Ashape);\n\n    size_t * Astride = new size_t[N];\n    Astride[0] = size/Ashape[0];\n    for(size_t i = 1; i &lt; N; ++i){\n        Astride[i] = Astride[i-1]/Ashape[i];\n    }\n    return Astride;\n}\ntemplate &lt;size_t N&gt;\nDATA_TYPE * init_data( size_t (&amp;Ashape)[N] ){\n    size_t size = cal_size(Ashape);\n    DATA_TYPE * data = new DATA_TYPE[size];\n    for(size_t i = 0; i &lt; size; ++i){\n        data[i] = i + 1;\n    }\n    return data;\n}\n\ntemplate &lt;size_t N&gt;\nvoid print_data(DATA_TYPE * Adata, size_t (&amp;Ashape)[N] ){\n    size_t size = cal_size(Ashape);\n    for(size_t i = 0; i &lt; size; ++i){\n        std::cout &lt;&lt; Adata[i] &lt;&lt; \", \";\n    }\n    std::cout &lt;&lt; std::endl;\n}\n\nint main(void){\n    constexpr size_t nd = 3;\n    size_t Ashape[] = {20,3,4};\n    size_t Bshape[] = {1,3,1};\n    auto Astride = cal_stride(Ashape);\n    auto Bstride = cal_stride(Bshape);\n\n    auto Adata = init_data(Ashape);\n    auto Bdata = init_data(Bshape);\n\n    size_t c[nd] = {0,0,0};\n        ///counter\n    size_t hint[nd] = {0,2,0};\n        //hint tells which are the broadcasting axes.\n    size_t A_i, B_i;\n    for(c[0] = 0; c[0] &lt; Ashape[0]; ++c[0]){ // Ashape as hint[0] = 0\n        for(c[1] = 0; c[1] &lt; Bshape[1]; ++c[1]){ //Bshape as hint[1] = 2\n            for(c[2] = 0; c[2] &lt; Ashape[2];++c[2]){ //Asape as hint[2] = 0\n                A_i = c[0]*Astride[0] + c[1]*Astride[1] + c[2]*Astride[2];\n                B_i = c[1]*Bstride[1];\n                Adata[A_i] *= Bdata[B_i];\n            }\n        }\n    }\n    print_data(Adata, Ashape);\n}\n</code></pre>\n\n<p>Version B Code (no std::vector. literal extents, and this vectorizes)</p>\n\n<p>This uses <code>pmulld  %xmm3, %xmm2</code> in <code>.L20</code>, which is a SIMD instruction.</p>\n\n<p><a href=\"https://gcc.godbolt.org/#compilers:!((compiler:g62,options:&#39;-msse4.2+-std%3Dc%2B%2B14+-O3&#39;,sourcez:AQ4YgSwOwYwGwK4BMCmwA8ED2BnALgE4oCGAtgHwBQo408ya6%2BS0eAdABZU14CeADilQAzYKwDMAJgD6eYABEAggBVF05QE0ACgFEA3NVCGQx4ADcsEJMH4FW0pMTzEAFEtXrtO4ACpgix2cAGmAcCAAvFFlQiLQASgBvUxphLAIXMMjoiGAAXmAABj0xDBjI4oBqCohE5JpQZgAuRpgsBDl0dH9A4gBtCABdDC6AIhCRg3rQAF86kCaWto6uhZQoJDhJmdNTVmBSYmgXCytaqZAJGTkApz7JABYCga2py%2BiAIR7e8We5sqjrtIICF3kCQsCAFZBADWL3qqXSOXyRRKXUkKKqNSS53haRcELyhWKBK64kqFQhZxx5wRLmhhJR9K69z0VWhVOp1LUSLEPgAjJJgBVgBCfPchcBofy4ZypqCeaK%2BTLZTQbs5etyhj58p9br15b8VTRZiqTeczVNbPYei41cQQg8CnE4dMgAAA%3D)),filterAsm:(colouriseAsm:!t,directives:!t,labels:!t),version:3\" rel=\"nofollow\">gcc godbolt</a></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdint.h&gt;\ntypedef int32_t DATA_TYPE;\n\n\nvoid print_data(DATA_TYPE * Adata, size_t size ){\n    for(size_t i = 0; i &lt; size; ++i){\n        std::cout &lt;&lt; Adata[i] &lt;&lt; \", \";\n    }\n    std::cout &lt;&lt; std::endl;\n}\n\nint main(void){\n    int32_t Adata[240];\n    int32_t Bdata[3];\n    size_t A_i, B_i, i,j,k;\n    for(i = 0; i &lt; 20; ++i){\n        for(j = 0; j &lt; 3; ++j){\n            for(k = 0; k &lt; 4;++k){\n                A_i = i*12 + j*4 + k*1;\n                B_i = j*1;\n                Adata[A_i] *= Bdata[B_i];\n            }\n        }\n    }\n    print_data(Adata, 240);\n}\n</code></pre>\n\n<p>boost multiarray vectorize but why?\nNot sure if it use simd alignment for memory.</p>\n\n<p><a href=\"https://gcc.godbolt.org/#compilers:!((compiler:g62,options:&#39;-msse4.2+-std%3Dc%2B%2B14+-O3&#39;,sourcez:MQSwdgxgNgrgJgUwAQCIBGB7DBnALgegFsYpcQB9AQwCdrKBPAOgAsAHVlAKFElkSQA8IHLmoJKhAHydO4XEk6FK4JAAoAlEgDenJEnz4kAYTGVcySkgDMAESQ069JLmZmkIbNaQAPJABYfJAAmXXcweTgARgAaOCDYqwBuUNx6VgREADMkTBEALjziUgoHBiFw6OtJe1oGclT05L0GjIRs0vp6tIQC8ERfPoRvJprHLvSkAEFVXLwCofNw7ABtKIBdVaCNuCs19RGO8eQAIRmsObyFhCXlyO2t272RgynsbBAAczAkADdKWAQnlwGGczGQCCgCEI11w2F0oUyGGoqkGAyQAF4kAAGRLuJAAQkxUVxAGoSSBNKE9IjkaikAArDHY3GMwlIOKkkn09RUvRIGkosD9JAAayZONFBKJSSQZJFPL5iqmyxAG3pGxFayQACpMcdlli1RtDSMEUjBcKQOLcVa2cTZeTKYqBXTGZiJayiUFOdzedTzXSxe7cWK7TK5QqlXo8HAChAMDB5AIBMrVct1ctNSMxLgYNRvjjOABfIAA)),filterAsm:(colouriseAsm:!t,commentOnly:!t,directives:!t,labels:!t),version:3\" rel=\"nofollow\">gcc godbolt</a></p>\n\n<pre><code>#include \"boost/multi_array.hpp\"\n#include &lt;iostream&gt;\n\nint \nmain () {\n  // Create a 3D array that is 3 x 4 x 2\n  int d1,d2,d3;\n  typedef boost::multi_array&lt;int, 3&gt; array_type;\n  typedef array_type::index index;\n  array_type A(boost::extents[d1][d2][d3]);\n  array_type B(boost::extents[1][d2][1]);\n  // Assign values to the elements\n\n  for(index i = 0; i != d1; ++i) \n    for(index j = 0; j != d2; ++j)\n      for(index k = 0; k != d3; ++k)\n        A[i][j][k] *= B[0][j][0];\n\n  for(index i = 0; i != d1; ++i) \n    for(index j = 0; j != d2; ++j)\n      for(index k = 0; k != d3; ++k)\n        std::cout &lt;&lt; A[i][j][k];\n  return 0;\n}\n</code></pre>\n\n<p><a href=\"ftp://gcc.gnu.org/pub/gcc/summit/2004/High%20Level%20Loop%20Optimizations.pdf\" rel=\"nofollow\">2004 pdf</a> at gcc.gnu.org that describes some loop optimization of gcc. I hope the \"Symbolic Chrecs\" (which corresponds to unanalyzed variables) means gcc can fuse nested loop with variable extents.</p>\n\n<p>The last resort is to implement loop fusion with meta-programming.</p>\n"}, {"tags": ["c++", "windows", "qt", "qtwebkit", "qtwebview"], "comments": [{"owner": {"reputation": 5135, "user_id": 6207052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SlsN4.jpg?s=128&g=1", "display_name": "putu", "link": "https://stackoverflow.com/users/6207052/putu"}, "edited": false, "score": 0, "creation_date": 1475102364, "post_id": 39758277, "comment_id": 66813510, "body": "The answer to <a href=\"http://stackoverflow.com/questions/15187296/can-qwebview-load-images-from-qt-resource-files\">this</a> question may help."}], "answers": [{"tags": [], "owner": {"reputation": 3447, "user_id": 4297146, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Zl9y3.jpg?s=128&g=1", "display_name": "mohabouje", "link": "https://stackoverflow.com/users/4297146/mohabouje"}, "is_accepted": false, "score": 1, "last_activity_date": 1475139660, "creation_date": 1475139660, "answer_id": 39765878, "question_id": 39758277, "link": "https://stackoverflow.com/questions/39758277/can-qwebview-load-js-from-qt-resource-files-and-run-them/39765878#39765878", "title": "Can QWebView load *.js from Qt resource files and run them?", "body": "<p>Javascript isn't evaluated from the html. Your JS file could not be found. The following has no effect:</p>\n\n<pre><code>&lt;script src=\"assets.js\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>Try it explicitly:</p>\n\n<pre><code>const QString js = readFile(\"qrc:/web/assets.js\"); // Load your javascript file\nview-&gt;page()-&gt;mainFrame()-&gt;evaluateJavaScript(js);\n</code></pre>\n\n<p>Another solution, more efficient: Use the QRC System and set the baseUrl in setHtml to link all files correctly:</p>\n\n<pre><code>   const QString html = readFile(\":/index.html\");\n   view-&gt;setHtml(html, QUrl(\"qrc:/\"));\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 1404090, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0b28d57a2bf384b1b7cf2a85f1f8e257?s=128&d=identicon&r=PG", "display_name": "marcin", "link": "https://stackoverflow.com/users/1404090/marcin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1076, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1475139660, "creation_date": 1475099563, "question_id": 39758277, "link": "https://stackoverflow.com/questions/39758277/can-qwebview-load-js-from-qt-resource-files-and-run-them", "title": "Can QWebView load *.js from Qt resource files and run them?", "body": "<p>I have <strong>qrc</strong> file that looks like this:</p>\n\n<pre><code> &lt;qresource prefix=\"/web\"&gt;\n        &lt;file alias=\"assets.js\"&gt;../web/assets.js&lt;/file&gt;\n        &lt;file alias=\"index.html\"&gt;../web/index.html&lt;/file&gt;\n&lt;/qresource&gt;\n</code></pre>\n\n<p>Inside <strong>assets.js</strong> Just adding function for allert popup:</p>\n\n<pre><code>    function myFunction() \n    {\n        window.alert(\"Hello from assets.js\");\n    }\n</code></pre>\n\n<p>Inside <strong>index.html</strong> adding another javascript for alert popup, loading <strong>assets.js</strong> and adding 2 buttons. First one to call window popup from external javascript file (<strong>assets.js</strong>) and second to call the javascript that is embeded into <strong>index.html</strong> file:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;script&gt;\n        function localFunction() \n        {\n            window.alert('HTML loaded');\n        }\n\n    &lt;/script&gt;\n\n    &lt;script src=\"assets.js\"&gt;&lt;/script&gt;\n\n    &lt;button onclick=\"myFunction()\"&gt;External JS&lt;/button&gt;\n    &lt;button onclick=\"localFunction()\"&gt;Local JS&lt;/button&gt;\n\n\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Now when I'm trying to load <strong>index.html</strong> in qtwebkit:</p>\n\n<pre><code>webView-&gt;load(QUrl(QStringLiteral(\"qrc:/web/index.html\")));\n</code></pre>\n\n<p>I can see that <strong>index.html</strong> has been loaded ok (I can see the 2 buttons )\nWhen clicking on the button that should call the local (html embeded) javascript it works.\nClicking the second button does nothing.</p>\n\n<p>It seems like the external <strong>assets.js</strong> is not loaded properly.\nAny sugestions how I can get it working?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "winapi", "smartcard", "winscard", "id-card"], "comments": [{"owner": {"reputation": 4509, "user_id": 1435475, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bb5adb94461a2b72be1a84655487be80?s=128&d=identicon&r=PG", "display_name": "guidot", "link": "https://stackoverflow.com/users/1435475/guidot"}, "edited": false, "score": 0, "creation_date": 1475219534, "post_id": 39758253, "comment_id": 66865098, "body": "1) For doing a connect the used protocol should not make a noticable difference in performance. 2) Cards supporting T=0 as well as T=1 are unusual enough 3) In case of doubt always use T=1, its easier for the application and more robust in respect to secure messaging."}], "answers": [{"comments": [{"owner": {"reputation": 844, "user_id": 2278637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/767a91d7f4f23807cb97b1f2847dde6e?s=128&d=identicon&r=PG", "display_name": "boxmein", "link": "https://stackoverflow.com/users/2278637/boxmein"}, "edited": false, "score": 0, "creation_date": 1475130494, "post_id": 39758850, "comment_id": 66820853, "body": "Thank you for your reply. I&#39;ll improve the cases where the card is already taken. However, I&#39;m unaware of how to perform the actions I need (navigate to folders, open the personal datafile, read records) in T=1, which prevents me from supporting the protocol. If I can&#39;t open the card in T=0 quicker, I&#39;ll research T=1 and see if I can do what I need there as well. (Exclusive access may wel be useless in this case, too, but I was trying to reach a deadline so I wanted to avoid any issues relating to sharing)"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 0, "last_activity_date": 1475103246, "creation_date": 1475103246, "answer_id": 39758850, "question_id": 39758253, "link": "https://stackoverflow.com/questions/39758253/winscard-scard-e-proto-mismatch-when-connecting-to-estonian-id-card/39758850#39758850", "title": "WinSCard SCARD_E_PROTO_MISMATCH when connecting to Estonian ID card", "body": "<p>You are asking <code>SCardConnect()</code> for exclusive access to the <code>T0</code> protocol only, so if the card is in use then <code>SCARD_E_SHARING_VIOLATION</code> is returned, and if the card is not in use but <code>T1</code> is active then <code>SCARD_E_PROTO_MISMATCH</code> is returned instead.</p>\n\n<p>When <code>SCardGetStatusChange()</code> reports a notification, you are only checking for the <code>SCARD_STATE_PRESENT</code> flag, but other flags can be present as well that are you ignoring, such as <code>SCARD_STATE_INUSE</code>.</p>\n\n<p>If you need exclusive access to the reader, you will have to wait until <code>SCARD_STATE_INUSE</code> is cleared, and/or <code>SCARD_E_SHARING_VIOLATION</code> is no longer begin reported.  Nothing you can do about that, unless you change your logic to allow connecting in sharing mode instead of exclusive mode.</p>\n\n<p>If you want to connect to the reader regardless of its current protocol (and thus gain exclusive access sooner), you can ask <code>SCardConnect()</code> to accept <em>both</em> <code>T0</code> and <code>T1</code> protocols at the same time, by OR'ing them together in the <code>dwPreferredProtocol</code> parameter (see the example in the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa379473.aspx\" rel=\"nofollow\">documentation</a>).  Then, if the <code>pdwActiveProtocol</code> parameter outputs that <code>T1</code> is the active protocol, you can wait for a status change to the <code>T0</code> protocol before reading the card.</p>\n"}, {"tags": [], "owner": {"reputation": 844, "user_id": 2278637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/767a91d7f4f23807cb97b1f2847dde6e?s=128&d=identicon&r=PG", "display_name": "boxmein", "link": "https://stackoverflow.com/users/2278637/boxmein"}, "is_accepted": true, "score": 1, "last_activity_date": 1475442479, "creation_date": 1475442479, "answer_id": 39821719, "question_id": 39758253, "link": "https://stackoverflow.com/questions/39758253/winscard-scard-e-proto-mismatch-when-connecting-to-estonian-id-card/39821719#39821719", "title": "WinSCard SCARD_E_PROTO_MISMATCH when connecting to Estonian ID card", "body": "<p>After a long scouring of the internet, I discovered that no changes to the commands were necessary. </p>\n\n<p>I simply needed to add an extra zero byte to the end of transmitted read/open commands, and receive the data as the response of the read command, not use a separate command to receive the bytes as well. (T=0 uses a \"request data/read data\" model, while T=1 just responds with the data, it seems)</p>\n\n<p>I also needed to change all mentions of <code>SCARD_PCI_T0</code> to conditionally use <code>SCARD_PCI_T1</code> and make the <code>SCardConnect()</code> function accept T1 too.</p>\n\n<p>I will post a decent code sample here later.</p>\n"}], "owner": {"reputation": 844, "user_id": 2278637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/767a91d7f4f23807cb97b1f2847dde6e?s=128&d=identicon&r=PG", "display_name": "boxmein", "link": "https://stackoverflow.com/users/2278637/boxmein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1308, "favorite_count": 0, "accepted_answer_id": 39821719, "answer_count": 2, "score": 1, "last_activity_date": 1475442479, "creation_date": 1475099424, "question_id": 39758253, "link": "https://stackoverflow.com/questions/39758253/winscard-scard-e-proto-mismatch-when-connecting-to-estonian-id-card", "title": "WinSCard SCARD_E_PROTO_MISMATCH when connecting to Estonian ID card", "body": "<p>I am trying to read the personal file of the Estonian ID card. </p>\n\n<p>I need to send the following data to the card (from \n<a href=\"https://eid.eesti.ee/index.php/Creating_new_eID_applications_old#Direct_communication_with_the_card\" rel=\"nofollow\">here</a>) in order to read records from the personal file (ie ID Number, name, etc):</p>\n\n\n\n<pre><code>00 A4 00 0C          # We choose root folder\n00 A4 01 0C 02 EE EE # We choose folder EEEE\n00 A4 02 04 02 50 44 # We choose file 5044, which contains personal data\n00 B2 XX 04          # We read record XX (see table) from the personal data file\n                     # The card responds 61 YY, where YY denotes the number of bytes waiting to be read\n00 C0 00 00 YY       # We read YY bytes from the card\n                     # Card responds ... 90 00, where ... is the requested data and 90 00 means status OK \n</code></pre>\n\n<p>However, the raw bytes are in the T=0 protocol, and the card is stuck in T=1 for an unreasonably long time before accepting T=0. The sequence of events is as follows:</p>\n\n<ol>\n<li>Card is attached to reader</li>\n<li>Program returns from <code>SCardStatusChange</code> and starts handling card</li>\n<li>On trying to connect to the card (<code>SCardConnect</code> or <code>SCardReconnect</code>) the error <code>SCARD_E_SHARING_VIOLATION</code> is received over and over, for around 5s</li>\n<li>Then, on trying to connect, the error <code>SCARD_E_PROTO_MISMATCH</code> is received for anywhere between 3 and 30 seconds, maybe more.</li>\n<li>After that, the card connects successfully and reads the data.</li>\n</ol>\n\n<p><strong>Can I somehow connect to it quicker in the T=0 protocol?</strong></p>\n\n<p>A simplified version of my source code is as follows:</p>\n\n<pre><code>// NOTE: this is approximately what I do.\n// I haven't tested this code yet - it's almost 1 AM here.\n#include &lt;winscard.h&gt;\nvoid readSmartCard() {\n    LONG sCardErrorCode;\n    SCARDCONTEXT sCardContext;\n    DWORD sCardReaderStrLen = 1024;\n    wchar_t sCardReaderStr[1024];\n    SCARDHANDLE sCardHandle;\n    DWORD sCardActiveProtocol;\n    SCARD_READERSTATE readerState;\n\n    sCardErrorCode = SCardEstablishContext(SCARD_SCOPE_SYSTEM, NULL, NULL, &amp;sCardContext);\n\n    // error handling macro\n\n    ZeroMemory(&amp;sCardReaderState, sizeof(sCardReaderState));\n    sCardReaderState.szReader = L\"\\\\\\\\?PnP?\\\\Notification\";\n    sCardReaderState.pvUserData = nullptr;\n    sCardReaderState.dwEventState = SCARD_STATE_PRESENT;\n\n    sCardErrorCode = SCardGetStatusChange(sCardContext, INFINITE, &amp;readerState, 1);\n\n    // e.h.m\n\n    if (readerState.dwCurrentState == 65538) {\n        sCardErrorCode = SCardListReaders(sCardContext, NULL, sCardReaderStr, &amp;sCardReaderStrLen);\n        // e.h.m\n        readerState.szReader = sCardReaderStr;\n    }\n\n    sCardErrorCode = SCardGetStatusChange(sCardContext, INFINITE, &amp;readerState, 1);\n    // e.h.m\n\n    if (sCardReaderState.dwEventState &amp; SCARD_STATE_PRESENT) {\n\n        while (true) {\n            sCardErrorCode = SCardConnect(sCardContext, readerState.szReader, SCARD_SHARE_EXCLUSIVE,\n                SCARD_PROTOCOL_T0, &amp;sCardHandle, &amp;sCardActiveProtocol);\n\n            // e.h.m\n            printf(\"%x\", sCardErrorCode); \n            // this will print:\n            // 8010000b (for around 5s)\n            // 8010000f (for around 20s)\n            if (sCardErrorCode == SCARD_S_SUCCESS) {\n                break;\n            }\n            Sleep(1000);\n        }\n\n        // open personal file and read data, yay!\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "eigen"], "answers": [{"tags": [], "owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "is_accepted": true, "score": 3, "last_activity_date": 1475099569, "last_edit_date": 1592644375, "creation_date": 1475099569, "answer_id": 39758279, "question_id": 39758044, "link": "https://stackoverflow.com/questions/39758044/how-to-get-original-order-of-eigenvalues-using-eigen/39758279#39758279", "title": "How to get original order of eigenvalues using Eigen?", "body": "<p>There is no &quot;natural&quot; order for eigenvalues of a non-selfadjoint matrix, since they are usually complex (even for real-valued matrices). One could sort them lexicographically (first by real then by complex) or by magnitude, but Eigen does neither. If you have a look <a href=\"http://eigen.tuxfamily.org/dox/classEigen_1_1EigenSolver.html#a1165fd63a951c6afaf239174d22e9945\" rel=\"nofollow noreferrer\">at the documentation</a>, you'll find:</p>\n<blockquote>\n<p>The eigenvalues are repeated according to their algebraic multiplicity, so there are as many eigenvalues as rows in the matrix. <strong>The eigenvalues are not sorted in any particular order.</strong></p>\n</blockquote>\n<p>If your matrix happens to be self-adjoint you should use the <code>SelfAdjointEigenSolver</code>, of course (which does sort the eigenvalues, since they are all real and therefore sortable). Otherwise, you need to sort the eigenvalues manually by whatever criterion you prefer.</p>\n<p>N.B.: The result of <code>matrix.eigenvalues()</code> and <code>es.eigenvalues()</code> should indeed be the same, since exactly the same algorithm is applied. Essentially the first variant is just a short-hand, if you are only interested in the eigenvalues.</p>\n"}], "owner": {"reputation": 172, "user_id": 3975218, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100000527064736/picture?type=large", "display_name": "Karol Borkowski", "link": "https://stackoverflow.com/users/3975218/karol-borkowski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1546, "favorite_count": 0, "accepted_answer_id": 39758279, "answer_count": 1, "score": 2, "last_activity_date": 1475169938, "creation_date": 1475098458, "last_edit_date": 1475169938, "question_id": 39758044, "link": "https://stackoverflow.com/questions/39758044/how-to-get-original-order-of-eigenvalues-using-eigen", "title": "How to get original order of eigenvalues using Eigen?", "body": "<p>I have a diagonal matrix with eigenvalues e.g. 1, 2 and 3. I disturb its values with some noise but it is small enough to change the sequence. When I obtain the eigenvalues of this matrix they are 1,2,3 in 50% cases and 1,3,2 in another 50%. \nWhen I do the same thing without the noise the order is always 1,2,3. </p>\n\n<p>I obtain the eigenvalues using:</p>\n\n<pre><code>matrix.eigenvalues().real();\n</code></pre>\n\n<p>or using:</p>\n\n<pre><code>Eigen::EigenSolver&lt;Eigen::Matrix3d&gt; es(matrix, false);\nes.eigenvalues().real();\n</code></pre>\n\n<p>The result is the same. Any ideas how to fix it? </p>\n"}, {"tags": ["c++", "stack", "infix-notation", "prefix-operator"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1475097916, "post_id": 39757880, "comment_id": 66811859, "body": "It is likely something to do with powers evaluating right-to-left and the others evaluating left-to-right.  But I&#39;ve not looked at what your code is doing to understand it; I&#39;ve not used prefix operator notations before, either."}, {"owner": {"reputation": 813, "user_id": 426736, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/edddecf45c7c30f5540f8fa7826bc538?s=128&d=identicon&r=PG", "display_name": "Tomek Sowi\u0144ski", "link": "https://stackoverflow.com/users/426736/tomek-sowi%c5%84ski"}, "edited": false, "score": 1, "creation_date": 1475098356, "post_id": 39757880, "comment_id": 66812050, "body": "The code sample you gave is incomplete. No definition for <code>isp</code> or <code>isOperand</code> which definitely obscures understanding of your program. Also, do mind the indentation and general readability; remember you&#39;re asking people to help you in their lesuire time."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1475099778, "post_id": 39757880, "comment_id": 66812618, "body": "What are ISP and ICP, and where are these functions?"}], "answers": [{"tags": [], "owner": {"reputation": 34, "user_id": 5946272, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0ba8894f427f34ec02d24e5a3299e0ab?s=128&d=identicon&r=PG&f=1", "display_name": "Riles", "link": "https://stackoverflow.com/users/5946272/riles"}, "is_accepted": false, "score": -2, "last_activity_date": 1475098596, "creation_date": 1475098596, "answer_id": 39758065, "question_id": 39757880, "link": "https://stackoverflow.com/questions/39757880/infix-to-prefix-works-but-not-for-power-caret-function-expressions/39758065#39758065", "title": "Infix to prefix works but not for power (caret) function expressions?", "body": "<p>SOLVED. My professor had coded that the isp of ^ = 3 and icp of ^ = 3, whereas when I changed the isp to 4 it started to work. I will take this up with my professor.</p>\n"}], "owner": {"reputation": 34, "user_id": 5946272, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0ba8894f427f34ec02d24e5a3299e0ab?s=128&d=identicon&r=PG&f=1", "display_name": "Riles", "link": "https://stackoverflow.com/users/5946272/riles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 334, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1475098596, "creation_date": 1475097704, "last_edit_date": 1475097764, "question_id": 39757880, "link": "https://stackoverflow.com/questions/39757880/infix-to-prefix-works-but-not-for-power-caret-function-expressions", "title": "Infix to prefix works but not for power (caret) function expressions?", "body": "<p>I have a function that's taking infix expressions and converting them to prefix expressions. Here's my code:</p>\n\n<pre><code>string infixToPrefix(string expression)\n{   \n\n  stack&lt;char&gt; S; //holds operators\n  stack&lt;char&gt;output; //display like in class\n  string prefix = \"\";\n  char ch;\n  S.push('#');\n\n  for (int i = expression.length(); i &gt; 0; i--){\n\n    ch = expression[i];\n\n    if (isOperand(ch) == true){\n      output.push(ch);\n\n    }\n    else {\n      if (ch == '('){\n        while (S.top() !=  ')'){\n          output.push(S.top());\n          S.pop();\n        }\n      }\n\n      else {\n        while (isp(S.top()) &gt; icp(ch)){\n\n          output.push(S.top());\n          S.pop();\n\n        }\n        S.push(ch);\n\n      }\n    }\n  }\n\n  while (S.top() != '#'){\n      output.push(S.top());\n      S.pop();\n\n    }\n\n  while (!output.empty()){\n    if (output.top() == ')'){\n      output.pop();\n    }\n    else{\n    prefix.append(1,output.top());\n    output.pop();\n    }\n  }\n  return prefix;\n}\n</code></pre>\n\n<p>This function has worked well with the sample expressions my professor wants me to use; \"3-4-5\" yields \"--345\" and \"5*(4/2)\" yields \"*5/42\". However, this does not work with the expression \"3^4^5\". It keeps giving me \"^^345\" where its supposed to be \"^3^45\". </p>\n\n<p>Is my algorithm incorrect? Or could this have something to do with the ICP and ISP (in the code she gave me, both have \"^\" = 3.)?</p>\n"}, {"tags": ["c++", "ftdi"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1475096521, "post_id": 39757423, "comment_id": 66811159, "body": "So what does <code>lsusb</code> say?"}, {"owner": {"reputation": 1032, "user_id": 1730078, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tvZfZ.png?s=128&g=1", "display_name": "schumacher574", "link": "https://stackoverflow.com/users/1730078/schumacher574"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1475096622, "post_id": 39757423, "comment_id": 66811212, "body": "@Olaf added to main post as an edit"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1475096768, "post_id": 39757423, "comment_id": 66811291, "body": "Any reason you added the C++ tag? A a quick glance, the code looks like pure C. Do you use a C or C++ compiler?"}, {"owner": {"reputation": 1032, "user_id": 1730078, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tvZfZ.png?s=128&g=1", "display_name": "schumacher574", "link": "https://stackoverflow.com/users/1730078/schumacher574"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1475096850, "post_id": 39757423, "comment_id": 66811334, "body": "I&#39;m using a C++ compiler.  I&#39;m originally writing a C++ application, but reduced it down to the test code for now to ensure I wasn&#39;t causing this issue.  I suppose the C++ tag should be removed, sorry."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1475096863, "post_id": 39757423, "comment_id": 66811349, "body": "I&#39;m not familar with that device. Verify the fields yourself. And maybe you try the open source driver, if there is any. Those closed-source drivers may be outdated, or whatever."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1475096925, "post_id": 39757423, "comment_id": 66811386, "body": "If you compile as C++, the C tag is incorrect! C and C++ are different languages. Identical syntax does not imply identical semantics!"}, {"owner": {"reputation": 1032, "user_id": 1730078, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tvZfZ.png?s=128&g=1", "display_name": "schumacher574", "link": "https://stackoverflow.com/users/1730078/schumacher574"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1475097046, "post_id": 39757423, "comment_id": 66811445, "body": "@Olaf I tagged as such because those are the two languages that members of the community might be using with the libft4222 library I&#39;m using and was hoping someone from either would share a common experience."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1475097143, "post_id": 39757423, "comment_id": 66811488, "body": "Questions have to be tagged with the language they use, not what the asker <b>thinks</b> will attract the most attention! Any maybe using the wrong compiler is the reason for the fishy results you get."}, {"owner": {"reputation": 1032, "user_id": 1730078, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tvZfZ.png?s=128&g=1", "display_name": "schumacher574", "link": "https://stackoverflow.com/users/1730078/schumacher574"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1475097261, "post_id": 39757423, "comment_id": 66811549, "body": "@Olaf OK.  If I run with a C compiler as well, same issue.  Why not tag under both???  It affects both."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1550797688, "post_id": 39757423, "comment_id": 96412981, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/q/12286460/608639\">Undefined reference to mempcy@GLIBC_2.14 when compiling on Linux</a>"}, {"owner": {"reputation": 1032, "user_id": 1730078, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tvZfZ.png?s=128&g=1", "display_name": "schumacher574", "link": "https://stackoverflow.com/users/1730078/schumacher574"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1551115703, "post_id": 39757423, "comment_id": 96513619, "body": "@jww not a duplicate of that at all..."}], "answers": [{"tags": [], "owner": {"reputation": 1032, "user_id": 1730078, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tvZfZ.png?s=128&g=1", "display_name": "schumacher574", "link": "https://stackoverflow.com/users/1730078/schumacher574"}, "is_accepted": true, "score": 1, "last_activity_date": 1475254089, "last_edit_date": 1475254089, "creation_date": 1475103270, "answer_id": 39758853, "question_id": 39757423, "link": "https://stackoverflow.com/questions/39757423/ft4222-device-info-correct-under-windows-incorrect-under-linux/39758853#39758853", "title": "FT4222 device info correct under Windows, incorrect under Linux?", "body": "<p>After trying with Kali i386, everything worked fine.  I thought this meant the library didn't work well with amd64 OS flavors, so I tried with Ubuntu i386.  Same problem as before - incorrect device info.</p>\n\n<p>Found that the real issue was with Kali I was logging in under the root account.  With Ubuntu, root account login is unavailable.  After executing my test application with sudo, the information retrieved from the FT4222 chip was correct.</p>\n\n<p>Proper solution is likely to use a udev rule to modify permissions for the FT4222 device.</p>\n"}, {"tags": [], "owner": {"reputation": 9, "user_id": 2432974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a6a4de0546d5a5bc8934a3292a8312b?s=128&d=identicon&r=PG", "display_name": "Oliver Al-Hassani", "link": "https://stackoverflow.com/users/2432974/oliver-al-hassani"}, "is_accepted": false, "score": 0, "last_activity_date": 1526813447, "creation_date": 1526813447, "answer_id": 50434055, "question_id": 39757423, "link": "https://stackoverflow.com/questions/39757423/ft4222-device-info-correct-under-windows-incorrect-under-linux/50434055#50434055", "title": "FT4222 device info correct under Windows, incorrect under Linux?", "body": "<p>under debian this udev rule helped me to avoid sudo rights:</p>\n\n<pre><code> ACTION==\"add\", ATTRS{idVendor}==\"0403\", ATTRS{idProduct}==\"6001\", MODE=\"0666\",  RUN+=\"/bin/sh -c 'rmmod ftdi_sio &amp;&amp; rmmod usbserial'\n</code></pre>\n\n<p>also it might be important that your $USER is part of the group dialout</p>\n"}], "owner": {"reputation": 1032, "user_id": 1730078, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tvZfZ.png?s=128&g=1", "display_name": "schumacher574", "link": "https://stackoverflow.com/users/1730078/schumacher574"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 797, "favorite_count": 1, "accepted_answer_id": 39758853, "answer_count": 2, "score": 1, "last_activity_date": 1526813447, "creation_date": 1475095867, "last_edit_date": 1475096878, "question_id": 39757423, "link": "https://stackoverflow.com/questions/39757423/ft4222-device-info-correct-under-windows-incorrect-under-linux", "title": "FT4222 device info correct under Windows, incorrect under Linux?", "body": "<p>I am trying to communicate with an FT4222 chip using libft4222.  When I run the following example code provided by FTDI, I receive different responses between Windows and Linux platforms.</p>\n\n<p>Sample code:</p>\n\n<pre><code>FT_STATUS ftStatus;\nFT_DEVICE_LIST_INFO_NODE *devInfo;\nDWORD numDevs;\n// create the device information list\nftStatus = FT_CreateDeviceInfoList(&amp;numDevs);\nif (ftStatus == FT_OK) {\n    printf(\"Number of devices is %d\\n\",numDevs);\n}\nif (numDevs &gt; 0) {\n    // allocate storage for list based on numDevs\n    devInfo =\n    (FT_DEVICE_LIST_INFO_NODE*)malloc(sizeof(FT_DEVICE_LIST_INFO_NODE)*numDevs);\n    // get the device information list\n    ftStatus = FT_GetDeviceInfoList(devInfo,&amp;numDevs);\n    if (ftStatus == FT_OK) {\n        for (int i = 0; i &lt; numDevs; i++) {\n            printf(\"Dev %d:\\n\",i);\n            printf(\" Flags=0x%x\\n\",devInfo[i].Flags);\n            printf(\" Type=0x%x\\n\",devInfo[i].Type);\n            printf(\" ID=0x%x\\n\",devInfo[i].ID);\n            printf(\" LocId=0x%x\\n\",devInfo[i].LocId);\n            printf(\" SerialNumber=%s\\n\",devInfo[i].SerialNumber);\n            printf(\" Description=%s\\n\",devInfo[i].Description);\n            printf(\" ftHandle=0x%x\\n\",devInfo[i].ftHandle);\n        }\n    }\n}\n</code></pre>\n\n<p>On Windows I receive the following output, which looks correct:</p>\n\n<pre><code>Dev 0:\nFlags= 0x2, (CLOSE-HS)\nType= 0xa\nID= 0x403601c\nLocId= 0x1131\nSerialNumber= A\nDescription= FT4222 A\nftHandle= 0x0\nDev 1:\nFlags= 0x0, (CLOSE-FS)\nType= 0xa\nID= 0x403601c\nLocId= 0x1132\nSerialNumber= B\nDescription= FT4222 B\nftHandle= 0x0\n</code></pre>\n\n<p>On Linux (x64 Ubuntu, running i386 version of libft4222 and my test application) I receive the following output, which looks incorrect:</p>\n\n<pre><code>Dev 0:\nFlags= 0x1, (OPEN-FS)\nType= 0x3\nID= 0x0\nLocId= 0x0\nSerialNumber=\nDescription=\nftHandle= 0x0\nDev 1:\nFlags= 0x1, (OPEN-FS)\nType= 0x3\nID= 0x0\nLocId= 0x0\nSerialNumber=\nDescription=\nftHandle= 0x0\n</code></pre>\n\n<p>I'm curious why the difference between systems?  Why is one showing as Closed while the other shows as Open?</p>\n\n<p><strong>EDIT:</strong>  lsusb -v displays the following for this device:</p>\n\n<pre><code>Bus 001 Device 015: ID 0403:601c Future Technology Devices International, Ltd \nCouldn't open device, some information will be missing\nDevice Descriptor:\n  bLength                18\n  bDescriptorType         1\n  bcdUSB               2.00\n  bDeviceClass            0 (Defined at Interface level)\n  bDeviceSubClass         0 \n  bDeviceProtocol         0 \n  bMaxPacketSize0        64\n  idVendor           0x0403 Future Technology Devices International, Ltd\n  idProduct          0x601c \n  bcdDevice           18.00\n  iManufacturer           1 \n  iProduct                2 \n  iSerial                 0 \n  bNumConfigurations      1\n  Configuration Descriptor:\n    bLength                 9\n    bDescriptorType         2\n    wTotalLength           55\n    bNumInterfaces          2\n    bConfigurationValue     1\n    iConfiguration          0 \n    bmAttributes         0xa0\n      (Bus Powered)\n    MaxPower              100mA\n    Interface Descriptor:\n      bLength                 9\n      bDescriptorType         4\n      bInterfaceNumber        0\n      bAlternateSetting       0\n      bNumEndpoints           2\n      bInterfaceClass       255 Vendor Specific Class\n      bInterfaceSubClass    255 Vendor Specific Subclass\n      bInterfaceProtocol    255 Vendor Specific Protocol\n      iInterface              2 \n      Endpoint Descriptor:\n        bLength                 7\n        bDescriptorType         5\n        bEndpointAddress     0x81  EP 1 IN\n        bmAttributes            2\n          Transfer Type            Bulk\n          Synch Type               None\n          Usage Type               Data\n        wMaxPacketSize     0x0200  1x 512 bytes\n        bInterval               0\n      Endpoint Descriptor:\n        bLength                 7\n        bDescriptorType         5\n        bEndpointAddress     0x02  EP 2 OUT\n        bmAttributes            2\n          Transfer Type            Bulk\n          Synch Type               None\n          Usage Type               Data\n        wMaxPacketSize     0x0200  1x 512 bytes\n        bInterval               0\n    Interface Descriptor:\n      bLength                 9\n      bDescriptorType         4\n      bInterfaceNumber        1\n      bAlternateSetting       0\n      bNumEndpoints           2\n      bInterfaceClass       255 Vendor Specific Class\n      bInterfaceSubClass    255 Vendor Specific Subclass\n      bInterfaceProtocol    255 Vendor Specific Protocol\n      iInterface              2 \n      Endpoint Descriptor:\n        bLength                 7\n        bDescriptorType         5\n        bEndpointAddress     0x83  EP 3 IN\n        bmAttributes            2\n          Transfer Type            Bulk\n          Synch Type               None\n          Usage Type               Data\n        wMaxPacketSize     0x0008  1x 8 bytes\n        bInterval               0\n      Endpoint Descriptor:\n        bLength                 7\n        bDescriptorType         5\n        bEndpointAddress     0x04  EP 4 OUT\n        bmAttributes            2\n          Transfer Type            Bulk\n          Synch Type               None\n          Usage Type               Data\n        wMaxPacketSize     0x0008  1x 8 bytes\n        bInterval               0\n</code></pre>\n"}, {"tags": ["c++", "stream", "stdin", "cin"], "comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 3, "creation_date": 1475095698, "post_id": 39757354, "comment_id": 66810747, "body": "<code>fread</code> is for unprocessed input.  <code>fgets</code> as you say does text processing.  <b>Don&#39;t ignore the return value which is the number of valid records stored to the buffer.</b>"}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 2, "creation_date": 1475096219, "post_id": 39757354, "comment_id": 66811005, "body": "See  &quot;<a href=\"http://stackoverflow.com/questions/7587595/read-binary-data-from-stdcin\" title=\"read binary data from stdcin\">stackoverflow.com/questions/7587595/&hellip;</a>&quot;  Duplicate?   Answer there is you can&#39;t."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1475096618, "post_id": 39757354, "comment_id": 66811210, "body": "Why are you using C stdio in C++?"}, {"owner": {"reputation": 34061, "user_id": 616460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Yiloe.png?s=128&g=1", "display_name": "Jason C", "link": "https://stackoverflow.com/users/616460/jason-c"}, "reply_to_user": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1475096686, "post_id": 39757354, "comment_id": 66811246, "body": "@DOUGLASO.MOEN Yes you can. First of all, that question is specifically about doing it with <code>cin</code>, so it&#39;s not really related to this question, and secondly, the answer there actually tells you how to do it. <i>This</i> question was just a failure to read documentation for stdio / a failure to search Google for <a href=\"https://www.google.com/search?q=read+binary+data+from+stdin\" rel=\"nofollow noreferrer\">&quot;read binary data from stdin&quot;</a>."}, {"owner": {"reputation": 34061, "user_id": 616460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Yiloe.png?s=128&g=1", "display_name": "Jason C", "link": "https://stackoverflow.com/users/616460/jason-c"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1475096851, "post_id": 39757354, "comment_id": 66811337, "body": "@Barmar Probably because iostreams is a huge pain, and, more importantly, who cares."}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "reply_to_user": {"reputation": 34061, "user_id": 616460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Yiloe.png?s=128&g=1", "display_name": "Jason C", "link": "https://stackoverflow.com/users/616460/jason-c"}, "edited": false, "score": 2, "creation_date": 1475096926, "post_id": 39757354, "comment_id": 66811389, "body": "@JasonC ... thanks, I did not distinguish stdin from std::cin on first read."}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1475097208, "post_id": 39757354, "comment_id": 66811526, "body": "@Jerry  - Do you really intend to restrict to stdin?  You marked this as C++.  Except for cout, your code seems to be a C effort.  And redirection of input to a C++ program goes to std::cin."}, {"owner": {"reputation": 63, "user_id": 3075365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bde26ea41eec9c4c45270d024741bb4f?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry", "link": "https://stackoverflow.com/users/3075365/jerry"}, "reply_to_user": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1475097514, "post_id": 39757354, "comment_id": 66811666, "body": "@DOUGLASO.MOEN - I am not restricted to stdin but our testcase file should be redirected at runtime... so is there a better way.. ?"}, {"owner": {"reputation": 63, "user_id": 3075365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bde26ea41eec9c4c45270d024741bb4f?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry", "link": "https://stackoverflow.com/users/3075365/jerry"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1475099461, "post_id": 39757354, "comment_id": 66812504, "body": "@BenVoigt I need the blank or empty values.. fread still removes those characters. could you tell whats the use of third argument..."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1475100530, "post_id": 39757354, "comment_id": 66812909, "body": "fread isn&#39;t removing them, check your display code"}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 3075365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bde26ea41eec9c4c45270d024741bb4f?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry", "link": "https://stackoverflow.com/users/3075365/jerry"}, "edited": false, "score": 0, "creation_date": 1475099182, "post_id": 39758021, "comment_id": 66812397, "body": "I have recently started programming in C++ could you explain me this method fread(buf.data(), sizeof(buf[0]), buf.size(), stdin)) ... I understand the this function reads unprocessed filestream - stdin, but I am lost at the first three arguments..."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 63, "user_id": 3075365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bde26ea41eec9c4c45270d024741bb4f?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry", "link": "https://stackoverflow.com/users/3075365/jerry"}, "edited": false, "score": 0, "creation_date": 1475099502, "post_id": 39758021, "comment_id": 66812514, "body": "@Jerry Its probably worth reading through the documentation: <a href=\"http://en.cppreference.com/w/cpp/io/c/fread\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/io/c/fread</a> If you only care about reading bytes then just set the second argument to <code>1</code>, then the third argument says how many bytes to read. Sometimes people read chunks of bytes at a time so they set the second argument to the number of bytes in each record (chunk). In all cases the number of bytes to read is the multiplication of the sizes in the second and third arguments."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 63, "user_id": 3075365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bde26ea41eec9c4c45270d024741bb4f?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry", "link": "https://stackoverflow.com/users/3075365/jerry"}, "edited": false, "score": 0, "creation_date": 1475099629, "post_id": 39758021, "comment_id": 66812563, "body": "I used <code>sizeof(buf[0])</code> because, if I change my <code>std::array</code> to contain objects that are larger than <code>char</code> the parameters to <code>std::fread</code> will automatically adjust for that."}, {"owner": {"reputation": 63, "user_id": 3075365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bde26ea41eec9c4c45270d024741bb4f?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry", "link": "https://stackoverflow.com/users/3075365/jerry"}, "edited": false, "score": 0, "creation_date": 1475100575, "post_id": 39758021, "comment_id": 66812922, "body": "oh.. I got it..and fread is supposed to read blanks and newlines too isn&#39;t... but for some reason its skipping them.."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 63, "user_id": 3075365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bde26ea41eec9c4c45270d024741bb4f?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry", "link": "https://stackoverflow.com/users/3075365/jerry"}, "edited": false, "score": 0, "creation_date": 1475100712, "post_id": 39758021, "comment_id": 66812982, "body": "@Jerry It shouldn&#39;t skip them esp if you <code>freopn</code> in binary mode as per my example. If it continues to skip them I suggest you edit your question posting a complete code example that produces the error you are describing."}, {"owner": {"reputation": 63, "user_id": 3075365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bde26ea41eec9c4c45270d024741bb4f?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry", "link": "https://stackoverflow.com/users/3075365/jerry"}, "edited": false, "score": 0, "creation_date": 1475199056, "post_id": 39758021, "comment_id": 66858774, "body": "its working with fwrite. can you tell me how to append the buffer content to arrary or string... If I try to print the buffer then the loop is not terminating and on force termination some current buffer value is printed..."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 63, "user_id": 3075365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bde26ea41eec9c4c45270d024741bb4f?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry", "link": "https://stackoverflow.com/users/3075365/jerry"}, "edited": false, "score": 0, "creation_date": 1475199700, "post_id": 39758021, "comment_id": 66858944, "body": "@Jerry I modified the example to append each received buffer of data to a <code>std::vector</code> called <code>input</code>. Basically each time round the loop the data that was read begins at <code>buf.data()</code> and ends at <code>buf.data() + len</code>."}, {"owner": {"reputation": 63, "user_id": 3075365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bde26ea41eec9c4c45270d024741bb4f?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry", "link": "https://stackoverflow.com/users/3075365/jerry"}, "edited": false, "score": 0, "creation_date": 1475202234, "post_id": 39758021, "comment_id": 66859463, "body": "Thanks a lot it works :) .. I have used char[] as I wasnt&#39;t able to figure out array&lt;char, INIT_BUFFER_SIZE&gt; buf;"}], "tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": true, "score": 11, "last_activity_date": 1475199607, "last_edit_date": 1475199607, "creation_date": 1475098376, "answer_id": 39758021, "question_id": 39757354, "link": "https://stackoverflow.com/questions/39757354/best-way-to-read-binary-file-c-though-input-redirection/39758021#39758021", "title": "Best way to read binary file c++ though input redirection", "body": "<p>If it were me I would probably do something similar to this:</p>\n\n<pre><code>const std::size_t INIT_BUFFER_SIZE = 1024;\n\nint main()\n{\n    try\n    {\n        // on some systems you may need to reopen stdin in binary mode\n        // this is supposed to be reasonably portable\n        std::freopen(nullptr, \"rb\", stdin);\n\n        if(std::ferror(stdin))\n            throw std::runtime_error(std::strerror(errno));\n\n        std::size_t len;\n        std::array&lt;char, INIT_BUFFER_SIZE&gt; buf;\n\n        // somewhere to store the data\n        std::vector&lt;char&gt; input;\n\n        // use std::fread and remember to only use as many bytes as are returned\n        // according to len\n        while((len = std::fread(buf.data(), sizeof(buf[0]), buf.size(), stdin)) &gt; 0)\n        {\n            // whoopsie\n            if(std::ferror(stdin) &amp;&amp; !std::feof(stdin))\n                throw std::runtime_error(std::strerror(errno));\n\n            // use {buf.data(), buf.data() + len} here\n            input.insert(input.end(), buf.data(), buf.data() + len); // append to vector\n        }\n\n        // use input vector here\n    }\n    catch(std::exception const&amp; e)\n    {\n        std::cerr &lt;&lt; e.what() &lt;&lt; '\\n';\n        return EXIT_FAILURE;\n    }\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>Note you may need to re-open <code>stdin</code> in <em>binary mode</em> not sure how portable that is but various documentation suggests is reasonably well supported across systems.</p>\n"}], "owner": {"reputation": 63, "user_id": 3075365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bde26ea41eec9c4c45270d024741bb4f?s=128&d=identicon&r=PG&f=1", "display_name": "Jerry", "link": "https://stackoverflow.com/users/3075365/jerry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3464, "favorite_count": 2, "accepted_answer_id": 39758021, "answer_count": 1, "score": 5, "last_activity_date": 1526840580, "creation_date": 1475095610, "last_edit_date": 1526840580, "question_id": 39757354, "link": "https://stackoverflow.com/questions/39757354/best-way-to-read-binary-file-c-though-input-redirection", "title": "Best way to read binary file c++ though input redirection", "body": "<p>I am trying to read a large binary file thought input redirection (<code>stdin</code>) at runtime, and <code>stdin</code> is mandatory. </p>\n\n<pre><code>./a.out &lt; input.bin\n</code></pre>\n\n<p>So far I have used fgets. But fgets skips blanks and newline. I want to include both. My <code>currentBuffersize</code> could dynamically vary.</p>\n\n<pre><code>FILE * inputFileStream = stdin; \nint currentPos = INIT_BUFFER_SIZE;\nint currentBufferSize = 24; // opt\nunsigned short int count = 0; // As Max number of packets 30,000/65,536\nwhile (!feof(inputFileStream)) {\n    char buf[INIT_BUFFER_SIZE]; // size of byte\n    fgets(buf, sizeof(buf), inputFileStream);\n    cout&lt;&lt;buf;\n    cout&lt;&lt;endl;\n}\n</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c++", "strict-aliasing"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1475095395, "post_id": 39757246, "comment_id": 66810571, "body": "<a href=\"http://en.cppreference.com/w/cpp/language/union\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/union</a>"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 1, "creation_date": 1475095409, "post_id": 39757246, "comment_id": 66810582, "body": "Firstly, union-based type punning is only allowed in C. Secondly, the permission to type-pun is only given when union members are accessed directly as union members. Otherwise, your transitivity would immediately obliterate all aliasing restrictions, since the compiler would generally have to assume that two unrelated pointers might point to members of one union object."}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1475095679, "post_id": 39757246, "comment_id": 66810736, "body": "(I&#39;m now trying to delete this question. I never knew that C++ unions were so different than in C. But I can&#39;t delete it. Sorry for the dumb question folks!)"}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1475096982, "post_id": 39757246, "comment_id": 66811409, "body": "I&#39;ve just asked the C-based version of this question here: <a href=\"http://stackoverflow.com/questions/39757658/violating-of-strict-aliasing-in-c-even-without-any-casting\" title=\"violating of strict aliasing in c even without any casting\">stackoverflow.com/questions/39757658/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1475095612, "post_id": 39757263, "comment_id": 66810692, "body": "I thought I&#39;d read a lot of stuff about strict-aliasing on SO, but I never noticed that before. I think I need to take a break from strict-aliasing question :)"}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1475095806, "post_id": 39757263, "comment_id": 66810802, "body": "I&#39;ve just managed to replicate the same issue in C. I guess I should ask another question. I can&#39;t delete this question, and I guess I shouldn&#39;t change this question to make it about C"}, {"owner": {"reputation": 15610, "user_id": 2456565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xa8D9.png?s=128&g=1", "display_name": "krzaq", "link": "https://stackoverflow.com/users/2456565/krzaq"}, "reply_to_user": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1475095901, "post_id": 39757263, "comment_id": 66810858, "body": "I lack the required knowledge to say whether the compiler is required to consider aliasing of otherwise legal cast variable in C."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 2, "creation_date": 1475096142, "post_id": 39757263, "comment_id": 66810962, "body": "@AaronMcDaid Just ask a new question, this one is not <i>that</i> bad either."}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1475097010, "post_id": 39757263, "comment_id": 66811426, "body": "Thanks @BaummitAugen. I&#39;ve just asked another question in C. <a href=\"http://stackoverflow.com/questions/39757658/violating-of-strict-aliasing-in-c-even-without-any-casting\" title=\"violating of strict aliasing in c even without any casting\">stackoverflow.com/questions/39757658/&hellip;</a>"}], "tags": [], "owner": {"reputation": 15610, "user_id": 2456565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xa8D9.png?s=128&g=1", "display_name": "krzaq", "link": "https://stackoverflow.com/users/2456565/krzaq"}, "is_accepted": true, "score": 5, "last_activity_date": 1475095739, "last_edit_date": 1475095739, "creation_date": 1475095293, "answer_id": 39757263, "question_id": 39757246, "link": "https://stackoverflow.com/questions/39757246/violating-strict-aliasing-even-without-any-casting/39757263#39757263", "title": "Violating strict-aliasing, even without any casting?", "body": "<p>Reading from inactive member of a union is undefined in C++. (It's legit in C99 and C11).</p>\n\n<p>So, all in all, the compiler isn't required to assume/remember anything.</p>\n\n<p>Standardese:</p>\n\n<blockquote>\n  N4140 \u00a79.5[class.union]/1\n  \n  <p>In a union, at most one of the non-static data members can be active at any time, that is, the value of at most one of the non-static data members can be stored in a union at any time.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1475616148, "post_id": 39757539, "comment_id": 67011890, "body": "Applying aliasing non-transitively in cases where that makes sense would be more helpful than blocking useful forms of aliasing for fear of transitivity.  For example, it would make sense to see to say that if T1 and T2 appear together in one union, and T1 and T3 appear together in another, accesses via T1* should be presumed to &quot;dirty&quot; things of types T2 and T3, and accesses via T2* or T3* should &quot;dirty&quot; things of type T1, but accesses via T2* need not dirty things of T3*, nor vice versa."}, {"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1475618901, "post_id": 39757539, "comment_id": 67013081, "body": "@supercat wouldn&#39;t the compiler have to know all unions in all TUs, if this was allowed?"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1475619246, "post_id": 39757539, "comment_id": 67013195, "body": "The rule for use of common-initial-sequences, which the authors of gcc don&#39;t like and blithely ignore, would only require compilers to consider unions whose complete declaration was visible at the point of usage.  That rule only covers access of common initial sequences of structures within a union (rather than use of unions for other kinds of type punning) but the principle could be applied elsewhere (trading off optimization for semantic expressiveness)."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1475685443, "post_id": 39757539, "comment_id": 67045533, "body": "If the rule were interpreted so as to allow an S to be used as a T, if a <i>complete declaration</i> of the union was visible at places where the object was used as an S, <i>or</i> where it was used as a T, that would allow many useful constructs which used to be supported but are supported only in the <code>-fno-strict-aliasing</code> dialect of gcc.  For example, if many structures have a common initial sequence, and accompanying each such structure is a definition for a union which that type and a specific type that just contains that sequence, then a function which accepts a pointer to the latter struct..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1475685627, "post_id": 39757539, "comment_id": 67045650, "body": "...would be able to operate upon any of the structure types that were associated with it.  The authors of gcc seem to think recognizing aliasing in that case would totally trash optimizations, but having code which accepts the &quot;common&quot; type presume that it might alias with the others would hurt optimization far less than would requiring programmers to write it in such a way that the compiler would have to presume it capable of aliasing any object of any type, anywhere, whose address has ever been exposed to the outside world."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1475685840, "post_id": 39757539, "comment_id": 67045768, "body": "I have no problem with the idea that compilers should not be required to presume that aliasing might occur in cases where they would have no reason to expect it.  I have a big problem with the idea that compilers given something like <code>uint32_t get_float_bits(float *f) { return *(uint32*)f; }</code> should use the rules to infer that <code>f</code> cannot possibly point to a <code>float</code>, rather than using the typecast as an indication that a <code>float</code> is likely to be read as a <code>uint32_t</code>."}, {"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1475696796, "post_id": 39757539, "comment_id": 67051912, "body": "What I miss the most in C++ is the ability to use a union to reinterpret a buffer as a struct. C allows it, but C++ doesn&#39;t, which I really don&#39;t understand, because it forces the programmer to use an &#39;unnecessary&#39;, possibly expensive memcpy."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1475697407, "post_id": 39757539, "comment_id": 67052240, "body": "I don&#39;t know that such structures are in practice any less safe in C++ than in C; clang and gcc both push very aggressive &quot;interpretations&quot; of the Standard which severely limit what can be done 100% reliably (it&#39;s unclear sometimes what code-breaking behaviors are a result of bugs or design, but if a pattern isn&#39;t support reliably it&#39;s not reliable).  By contrast, in C++ I think it should be possible to populate storage as one PODS, then manually invoke the destructor and use placement new to place a new object on the old storage."}, {"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1475700438, "post_id": 39757539, "comment_id": 67053811, "body": "Yes, I think in practice some techniques not involving a memcpy work well, the problem is the standard. I have the impression memcpy is the only standard-sanctioned way, but I&#39;m not sure."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1475701983, "post_id": 39757539, "comment_id": 67054484, "body": "In C++, I think explicit the combination of a trivial destructor and placement new will have defined behavior.  In C, even memmove isn&#39;t guaranteed safe.  In C, if memmove is used to copy something with a declared type to a region of allocated storage, the Standard would allow a compiler to presume that the destination cannot alias anything of any other type, and in at least some cases--whether by bug or design--gcc seems to exploit that freedom."}], "tags": [], "owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "is_accepted": false, "score": 1, "last_activity_date": 1475096305, "last_edit_date": 1495541708, "creation_date": 1475096305, "answer_id": 39757539, "question_id": 39757246, "link": "https://stackoverflow.com/questions/39757246/violating-strict-aliasing-even-without-any-casting/39757539#39757539", "title": "Violating strict-aliasing, even without any casting?", "body": "<p>It is only allowed to read from the union member that was last written to in C++.</p>\n\n<p>Aliasing outside unions is only allowed between 'similar' types (for details please see <a href=\"https://stackoverflow.com/questions/98650/what-is-the-strict-aliasing-rule\">this Q/A</a>), and <code>char</code>/<code>unsigned char</code>. It is only allowed to alias another type through <code>char</code>/<code>unsigned char</code>, but it is not allowed to alias <code>char</code>/<code>unsigned char</code> through other types. If the latter was allowed, then all objects would have to be treated as possibly aliasing any other object, because they could be 'transitively aliased' like you describe through <code>char</code>/<code>unsigned char</code>.</p>\n\n<p>But because this is not the case, the compiler can safely assume that only objects of 'similar' types and <code>char</code>/<code>unsigned char</code> alias each other.</p>\n"}], "owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 1, "accepted_answer_id": 39757263, "answer_count": 2, "score": 1, "last_activity_date": 1475096305, "creation_date": 1475095212, "question_id": 39757246, "link": "https://stackoverflow.com/questions/39757246/violating-strict-aliasing-even-without-any-casting", "title": "Violating strict-aliasing, even without any casting?", "body": "<p>I think I'm really asking: is aliasing \"transitive\"? If the compiler knows that A might alias B, and B might alias C, then surely it should remember that A might therefore alias C. Perhaps this \"obvious\" transitive logic isn't required however?</p>\n\n<p>An example, for clarity. The most interesting example, to me, of a strict-aliasing issue:</p>\n\n<pre><code>// g++    -fstrict-aliasing -std=c++11 -O2\n#include &lt;iostream&gt;\n\nunion\n{   \n    int i;\n    short s;\n} u;\nint     * i = &amp;u.i;\n\nint main()\n{   \n\n    u.i = 1; // line 1\n    *i += 1; // line 2\n\n    short   &amp; s =  u.s;\n    s += 100; // line 3\n\n    std::cout\n        &lt;&lt; \" *i\\t\" &lt;&lt;  *i &lt;&lt; std::endl // prints 2\n        &lt;&lt; \"u.i\\t\" &lt;&lt; u.i &lt;&lt; std::endl // prints 101\n        ;\n\n    return 0;\n}\n</code></pre>\n\n<p>g++ 5.3.0, on x86_64 (but not clang 3.5.0) gives the above output, where <code>*i</code> and <code>u.i</code> give different numbers. But they should give exactly the same number, because <code>i</code> is defined at <code>int * i = &amp;u.i;</code> and <code>i</code> doesn't change.</p>\n\n<p>I have a theory: When 'predicting' the value of <code>u.i</code>, the compiler asks which lines might affect the contents of <code>u.i</code>. That includes line 1 obviously. And line 2 because <code>int*</code> can alias an <code>int</code> member of a union. And line 3 also, because anything that can affect one union member (<code>u.s</code>) can affect another member of the same union. But when predicting <code>*i</code> it doesn't realise that line 3 can affect the <code>int</code> lvalue at <code>*i</code>.</p>\n\n<p>Does this theory seem reasonable?</p>\n\n<p>I find this example funny because I don't have any casting in it. I managed to break strict-aliasing with doing any casting.</p>\n"}, {"tags": ["c++", "inheritance"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1475095258, "post_id": 39757090, "comment_id": 66810486, "body": "Regarding the <code>m_offset</code> member, If you look at <a href=\"http://en.cppreference.com/w/cpp/io\" rel=\"nofollow noreferrer\">the standard C++ stream classes</a> they <i>do</i> use different read and write offsets. This makes it easy to read and write step-wise (i.e. you read one value, and then overwrite that value without any seeking)."}, {"owner": {"reputation": 7072, "user_id": 1816262, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IcKpN.png?s=128&g=1", "display_name": "OMGtechy", "link": "https://stackoverflow.com/users/1816262/omgtechy"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1475096482, "post_id": 39757090, "comment_id": 66811142, "body": "@JoachimPileborg that&#39;s a good point, thanks."}], "answers": [{"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 1, "last_activity_date": 1475095613, "last_edit_date": 1475095613, "creation_date": 1475095195, "answer_id": 39757238, "question_id": 39757090, "link": "https://stackoverflow.com/questions/39757090/implementing-a-readerwriter-class-based-upon-separate-stateful-reader-and-writer/39757238#39757238", "title": "Implementing a ReaderWriter class based upon separate stateful Reader and Writer bases", "body": "<p>CRTP.</p>\n\n<pre><code>template&lt;class Storage&gt;\nclass FooReaderImpl {\npublic:\n  FooData readFooDataAndAdvance() {\n    // the point here is that the algorithm is stateful\n    // and relies upon the m_offset member\n    return get_storage()-&gt;m_foo[get_storage()-&gt;m_offset++];\n  }\nprivate:\n  Storage const* get_storage() const { return static_cast&lt;Storage const*&gt;(this); }\n  Storage * get_storage() { return static_cast&lt;Storage*&gt;(this); }\n};\ntemplate&lt;class Storage&gt;\nclass FooWriterImpl {\npublic:\n  void writeFooDataAndAdvance(const FooData&amp; foodata) {\n    // the point here is that the algorithm is stateful\n    // and relies upon the m_offset member\n    get_storage()-&gt;m_foo[get_storage()-&gt;m_offset++] = foodata;\n  }\nprivate:\n  Storage const* get_storage() const { return static_cast&lt;Storage const*&gt;(this); }\n  Storage * get_storage() { return static_cast&lt;Storage*&gt;(this); }\n};\n\ntemplate&lt;class T&gt;\nstruct storage_with_offset {\n  T* m_foo = nullptr;\n  std::size_t m_offset = 0;\n};\nstruct FooReader:\n  FooReaderImpl&lt;FooReader&gt;,\n  storage_with_offset&lt;const Foo&gt;\n{\n  FooReader(Foo const* p):\n    storage_with_offset&lt;const Foo&gt;{p}\n  {}\n};\nstruct FooWriter:\n  FooWriterImpl&lt;FooWriter&gt;,\n  storage_with_offset&lt;Foo&gt;\n{\n  FooWriter(Foo* p):\n    storage_with_offset&lt;Foo&gt;{p}\n  {}\n};\nstruct FooReaderWriter:\n  FooWriterImpl&lt;FooReaderWriter&gt;,\n  FooReaderImpl&lt;FooReaderWriter&gt;,\n  storage_with_offset&lt;Foo&gt;\n{\n  FooReaderWriter(Foo const* p):\n    storage_with_offset&lt;Foo&gt;{p}\n  {}\n};\n</code></pre>\n\n<p>If you need an abstract interface for runtime polymorphism, inherit <code>FooReaderImpl</code> and <code>FooWriterImpl</code> from them.</p>\n\n<p>Now, <code>FooReaderWriter</code> obeys the ducktype contract of <code>FooReader</code> and <code>FooWriter</code>.  So if you use type erasure instead of inheritance, it will qualify for either (at point of use).</p>\n\n<p>I'd be tempted to change them to</p>\n\n<pre><code>using FooReader = std::function&lt;FooData()&gt;;\nusing FooWriter = std::function&lt;void(FooData const&amp;)&gt;;\n</code></pre>\n\n<p>and then implement a multi-signature <code>std::function</code> for <code>FooReaderWriter</code>.  But I'm strange and a bit unhinged that way.</p>\n"}, {"comments": [{"owner": {"reputation": 7072, "user_id": 1816262, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IcKpN.png?s=128&g=1", "display_name": "OMGtechy", "link": "https://stackoverflow.com/users/1816262/omgtechy"}, "edited": false, "score": 0, "creation_date": 1475095852, "post_id": 39757288, "comment_id": 66810830, "body": "Mmm, I&#39;d forgotten about mixins! Seems like exactly what I need. However this does lose the const-ness of the Foo pointer in the reader case, but this could be solved by making <code>members</code> a template and passing <code>const Foo</code> as T in the reader case and <code>Foo</code> in the writer case. Thank you very much."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 7072, "user_id": 1816262, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IcKpN.png?s=128&g=1", "display_name": "OMGtechy", "link": "https://stackoverflow.com/users/1816262/omgtechy"}, "edited": false, "score": 0, "creation_date": 1475095955, "post_id": 39757288, "comment_id": 66810880, "body": "@OMGtechy Do you need that <code>const</code>ness though? It&#39;s private to the class, and is only exposed via the <code>reader</code> which isn&#39;t returning a modifiable reference. It should be transparent to the end user."}, {"owner": {"reputation": 7072, "user_id": 1816262, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IcKpN.png?s=128&g=1", "display_name": "OMGtechy", "link": "https://stackoverflow.com/users/1816262/omgtechy"}, "edited": false, "score": 0, "creation_date": 1475096018, "post_id": 39757288, "comment_id": 66810908, "body": "it&#39;s more a matter of being able to pass a const pointer into the ctor of the reader class"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 7072, "user_id": 1816262, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IcKpN.png?s=128&g=1", "display_name": "OMGtechy", "link": "https://stackoverflow.com/users/1816262/omgtechy"}, "edited": false, "score": 0, "creation_date": 1475096155, "post_id": 39757288, "comment_id": 66810968, "body": "@OMGtechy That makes sense. Edited that into the answer."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 1, "last_activity_date": 1475096143, "last_edit_date": 1475096143, "creation_date": 1475095381, "answer_id": 39757288, "question_id": 39757090, "link": "https://stackoverflow.com/questions/39757090/implementing-a-readerwriter-class-based-upon-separate-stateful-reader-and-writer/39757288#39757288", "title": "Implementing a ReaderWriter class based upon separate stateful Reader and Writer bases", "body": "<p>This seems ready made for the mixin pattern. We have our most base class which just declares the members:</p>\n\n<pre><code>template &lt;class T&gt;\nclass members {\npublic:\n    members(T* f) : m_foo(f) { }\nprotected:\n    T* const m_foo;\n    size_t m_offset = 0;\n};\n</code></pre>\n\n<p>and then we write some wrappers around it to add reading:</p>\n\n<pre><code>template &lt;class T&gt;\nstruct reader : T {\n    using T::T;\n\n    Foo readAndAdvance() {\n        return this-&gt;m_foo[this-&gt;m_offset++];\n    };\n};\n</code></pre>\n\n<p>and writing:</p>\n\n<pre><code>template &lt;class T&gt;\nstruct writer : T {\n    using T::T;\n\n    void writeAndAdvance(Foo const&amp; f) {\n        this-&gt;m_foo[this-&gt;m_offset++] = f;\n    }\n};\n</code></pre>\n\n<p>and then you just use those as appropriate:</p>\n\n<pre><code>using FooReader = reader&lt;members&lt;Foo const&gt;&gt;;\nusing FooWriter = writer&lt;members&lt;Foo&gt;&gt;;\nusing FooReaderWriter = writer&lt;reader&lt;members&lt;Foo&gt;&gt;&gt;;\n</code></pre>\n"}], "owner": {"reputation": 7072, "user_id": 1816262, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IcKpN.png?s=128&g=1", "display_name": "OMGtechy", "link": "https://stackoverflow.com/users/1816262/omgtechy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 39757288, "answer_count": 2, "score": 2, "last_activity_date": 1475096143, "creation_date": 1475094591, "last_edit_date": 1475095577, "question_id": 39757090, "link": "https://stackoverflow.com/questions/39757090/implementing-a-readerwriter-class-based-upon-separate-stateful-reader-and-writer", "title": "Implementing a ReaderWriter class based upon separate stateful Reader and Writer bases", "body": "<p>Suppose I have two classes...</p>\n\n<p>We can call the first <code>FooReader</code> and it looks something like this:</p>\n\n<pre><code>class FooReader {\npublic:\n    FooReader(const Foo* const foo)\n    : m_foo(foo) {\n\n    }\n\n    FooData readFooDataAndAdvance() {\n        // the point here is that the algorithm is stateful\n        // and relies upon the m_offset member\n        return m_foo[m_offset++];\n    }\n\nprivate:\n    const Foo* const m_foo;\n    size_t m_offset = 0; // used in readFooDataAndAdvance\n};\n</code></pre>\n\n<p>We can call the second <code>FooWriter</code> and it looks something like this:</p>\n\n<pre><code>class FooWriter {\npublic:\n    FooWriter(Foo* const foo)\n    : m_foo(foo) {\n\n    }\n\n    void writeFooDataAndAdvance(const FooData&amp; foodata) {\n        // the point here is that the algorithm is stateful\n        // and relies upon the m_offset member\n        m_foo[m_offset++] = foodata;\n    }\n\nprivate:\n    Foo* const m_foo;\n    size_t m_offset = 0;\n};\n</code></pre>\n\n<p>These both work wonderfully and do their job as intended. Now suppose I want to create a <code>FooReaderWriter</code> class. Note that the </p>\n\n<p>I naturally want to say that this new class \"is a\" <code>FooReader</code> and \"is a\" <code>FooWriter</code>; the interface is simply the amalgamation of the two classes and the semantics remain the same. I don't want to reimplement perfectly good member functions.</p>\n\n<p>One could model this relationship using inheritance like so:</p>\n\n<pre><code>class FooReaderWriter : public FooReader, public FooWriter { };\n</code></pre>\n\n<p>This is nice because I get the shared interface, I get the implementation and I nicely model the relationship between the classes. However there are problems:</p>\n\n<ul>\n<li>The <code>Foo*</code> member is duplicated in the base classes. This is a waste of memory.</li>\n<li>The <code>m_offset</code> member is separate for each base type, but they need to share it (i.e. calling either <code>readFooDataAndAdvance</code> and <code>writeFooDataAndAdvance</code> should advance the same <code>m_offset</code> member).</li>\n</ul>\n\n<p>I can't use the PIMPL pattern and store <code>m_foo</code> and <code>m_offset</code> in there, because I'd lose the const-ness of the <code>m_foo</code> pointer in the base <code>FooReader</code> class.</p>\n\n<p>Is there anything else I can do to resolve these issues, without reimplementing the functionality contained within those classes?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "edited": false, "score": 3, "creation_date": 1475094481, "post_id": 39757024, "comment_id": 66810026, "body": "What about <code>static</code>?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1475094646, "post_id": 39757024, "comment_id": 66810121, "body": "&quot;I could also create new classes for every call but I would like to avoid this as there will be a lot of function calls and I don&#39;t want to think 100 different names.&quot; Agree. You don&#39;t want to do this, but if you did, you could handle it with only one name and an array or <code>std::vector</code>"}, {"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1475095015, "post_id": 39757024, "comment_id": 66810351, "body": "Do you specifically want the function to know how many times it&#39;s been called, or just whether or not this is the first call?"}, {"owner": {"reputation": 23, "user_id": 5957243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ca4f5d64fdf98a16c837c0651a9e6db?s=128&d=identicon&r=PG&f=1", "display_name": "Youlean", "link": "https://stackoverflow.com/users/5957243/youlean"}, "reply_to_user": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1475095352, "post_id": 39757024, "comment_id": 66810546, "body": "@JustinTime I want to know if it is the first call, I don&#39;t want to count them."}, {"owner": {"reputation": 23, "user_id": 5957243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ca4f5d64fdf98a16c837c0651a9e6db?s=128&d=identicon&r=PG&f=1", "display_name": "Youlean", "link": "https://stackoverflow.com/users/5957243/youlean"}, "reply_to_user": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "edited": false, "score": 0, "creation_date": 1475095406, "post_id": 39757024, "comment_id": 66810581, "body": "@BiagioFesta This won&#39;t work. See edit."}, {"owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "edited": false, "score": 0, "creation_date": 1475095515, "post_id": 39757024, "comment_id": 66810634, "body": "@Youlean Each instance of plugin should have different memory space, shouldn&#39;t it?"}, {"owner": {"reputation": 23, "user_id": 5957243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ca4f5d64fdf98a16c837c0651a9e6db?s=128&d=identicon&r=PG&f=1", "display_name": "Youlean", "link": "https://stackoverflow.com/users/5957243/youlean"}, "reply_to_user": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "edited": false, "score": 0, "creation_date": 1475095834, "post_id": 39757024, "comment_id": 66810819, "body": "@BiagioFesta It should, but if I create for example &quot;static int value&quot; anywhere and write something in it in one instance of a plugin this &quot;value&quot; will be updated for all instances of a plugin."}, {"owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "edited": false, "score": 0, "creation_date": 1475096032, "post_id": 39757024, "comment_id": 66810917, "body": "@Youlean All right then, what about a global variable which keeps counting the call of a specific function?"}, {"owner": {"reputation": 34061, "user_id": 616460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Yiloe.png?s=128&g=1", "display_name": "Jason C", "link": "https://stackoverflow.com/users/616460/jason-c"}, "edited": false, "score": 0, "creation_date": 1475096354, "post_id": 39757024, "comment_id": 66811074, "body": "Why don&#39;t you just make the counter a non-static member of the class... ? Btw, not sure what you&#39;re talking about with function addresses; your example code calls the same function 3 times; the address of that function will be the same on every call, it doesn&#39;t provide any of the information you&#39;re looking for."}, {"owner": {"reputation": 34061, "user_id": 616460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Yiloe.png?s=128&g=1", "display_name": "Jason C", "link": "https://stackoverflow.com/users/616460/jason-c"}, "edited": false, "score": 0, "creation_date": 1475096494, "post_id": 39757024, "comment_id": 66811149, "body": "Alternatively why not just pass 1, 2, 3 as a parameter, or otherwise have the caller maintain its own count...?"}, {"owner": {"reputation": 23, "user_id": 5957243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ca4f5d64fdf98a16c837c0651a9e6db?s=128&d=identicon&r=PG&f=1", "display_name": "Youlean", "link": "https://stackoverflow.com/users/5957243/youlean"}, "reply_to_user": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "edited": false, "score": 0, "creation_date": 1475096508, "post_id": 39757024, "comment_id": 66811154, "body": "@BiagioFesta The plugin is very complex. There will be at least 50 classes that will call another 50 functions that I need to track. This will be more work to do than to just have vector &lt;MyClass&gt; myClass; and to resize it and call pointers as I need it. Currently I am creating new object for every class and then adding unique string to identify a function call."}, {"owner": {"reputation": 23, "user_id": 5957243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ca4f5d64fdf98a16c837c0651a9e6db?s=128&d=identicon&r=PG&f=1", "display_name": "Youlean", "link": "https://stackoverflow.com/users/5957243/youlean"}, "reply_to_user": {"reputation": 34061, "user_id": 616460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Yiloe.png?s=128&g=1", "display_name": "Jason C", "link": "https://stackoverflow.com/users/616460/jason-c"}, "edited": false, "score": 0, "creation_date": 1475096751, "post_id": 39757024, "comment_id": 66811283, "body": "@JasonC If you inline a function every call will have different memory address, but this will also increase binary size. I could pass a unique identifier myself but I would like to make it as automatic as possible..."}, {"owner": {"reputation": 34061, "user_id": 616460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Yiloe.png?s=128&g=1", "display_name": "Jason C", "link": "https://stackoverflow.com/users/616460/jason-c"}, "edited": false, "score": 0, "creation_date": 1475097188, "post_id": 39757024, "comment_id": 66811516, "body": "@Youlean If you inline a function, <i>some</i> calls <i>might</i> have a different memory address, very often they won&#39;t, and that also <a href=\"http://stackoverflow.com/a/3318346/616460\">depends on how you take the address</a>. You seem to be taking a lot of questionable approaches here. Also again, why don&#39;t you just use a non-static member as a counter or have the caller do it?"}, {"owner": {"reputation": 23, "user_id": 5957243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ca4f5d64fdf98a16c837c0651a9e6db?s=128&d=identicon&r=PG&f=1", "display_name": "Youlean", "link": "https://stackoverflow.com/users/5957243/youlean"}, "reply_to_user": {"reputation": 34061, "user_id": 616460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Yiloe.png?s=128&g=1", "display_name": "Jason C", "link": "https://stackoverflow.com/users/616460/jason-c"}, "edited": false, "score": 0, "creation_date": 1475097652, "post_id": 39757024, "comment_id": 66811737, "body": "@JasonC I can&#39;t because the functions will be placed in a loop, and at first execution it will be OK, but on second it won&#39;t or I am missing something."}, {"owner": {"reputation": 34061, "user_id": 616460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Yiloe.png?s=128&g=1", "display_name": "Jason C", "link": "https://stackoverflow.com/users/616460/jason-c"}, "edited": false, "score": 1, "creation_date": 1475097887, "post_id": 39757024, "comment_id": 66811846, "body": "@Youlean Why does calling the functions in a loop prevent you from using a non-static member for the counter / counting things in the loop? Also I see you&#39;ve buried the fact that you&#39;re only interested in the <i>first</i> call in comments here, if that&#39;s the case then your example doesn&#39;t seem to show what you&#39;re trying to do at all. Go back and edit your question to ask what you&#39;re actually trying to ask. If you&#39;re just trying to get the first call then pass it a boolean that&#39;s true the first time you call it; or separate whatever out into &quot;initialize&quot;, or use a proper raii model."}, {"owner": {"reputation": 23, "user_id": 5957243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ca4f5d64fdf98a16c837c0651a9e6db?s=128&d=identicon&r=PG&f=1", "display_name": "Youlean", "link": "https://stackoverflow.com/users/5957243/youlean"}, "reply_to_user": {"reputation": 34061, "user_id": 616460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Yiloe.png?s=128&g=1", "display_name": "Jason C", "link": "https://stackoverflow.com/users/616460/jason-c"}, "edited": false, "score": 0, "creation_date": 1475098253, "post_id": 39757024, "comment_id": 66811999, "body": "@JasonC I don&#39;t wan&#39;t to count number of calls. For example when main functions executed second time &quot;count&quot; will be 3 (if we count from 0) and there will not be any function at call 3. This could work only if I pass total number of calls to a class so I can divide count number, but then also there is int overflow..."}, {"owner": {"reputation": 34061, "user_id": 616460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Yiloe.png?s=128&g=1", "display_name": "Jason C", "link": "https://stackoverflow.com/users/616460/jason-c"}, "edited": false, "score": 0, "creation_date": 1475098433, "post_id": 39757024, "comment_id": 66812083, "body": "@Youlean What the heck does &quot;there will not be any function at call 3&quot; even mean? You&#39;re rambling, and mixing up terminology and stuff all over the place. Please describe the problem you&#39;re actually trying to solve, <i>in your original post</i>. You&#39;re just confusing everybody, mostly because your overall approach doesn&#39;t seem right at all, and you aren&#39;t able to even accurately describe it. Good luck!"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 5957243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ca4f5d64fdf98a16c837c0651a9e6db?s=128&d=identicon&r=PG&f=1", "display_name": "Youlean", "link": "https://stackoverflow.com/users/5957243/youlean"}, "edited": false, "score": 0, "creation_date": 1475095907, "post_id": 39757131, "comment_id": 66810862, "body": "Thanks for the answer but this will probably not work. See edit."}], "tags": [], "owner": {"reputation": 103812, "user_id": 320726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02041b18199678d1f02e6d5040dbb907?s=128&d=identicon&r=PG", "display_name": "6502", "link": "https://stackoverflow.com/users/320726/6502"}, "is_accepted": false, "score": 0, "last_activity_date": 1475129027, "last_edit_date": 1475129027, "creation_date": 1475094747, "answer_id": 39757131, "question_id": 39757024, "link": "https://stackoverflow.com/questions/39757024/get-call-identifier-or-address-of-a-function/39757131#39757131", "title": "Get call identifier or address of a function", "body": "<p>In C++ you can use the <code>static</code> keyword in a local variable context to create the object only once at the first call:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct MyObject {\n    MyObject() {\n        std::cout &lt;&lt; \"Creating instance \" &lt;&lt; this &lt;&lt; \"\\n\";\n    };\n};\n\nvoid foo() {\n    static MyObject my_instance;\n    std::cout &lt;&lt; \"... inside function foo ...\\n\";\n}\n\nint main(int argc, const char *argv[]) {\n    std::cout &lt;&lt; \"About to call foo...\\n\";\n    foo();\n    std::cout &lt;&lt; \"... second call ...\\n\";\n    foo();\n    std::cout &lt;&lt; \"... third call ...\\n\";\n    foo();\n    return 0;\n}\n</code></pre>\n\n<p>With the above code you will notice that only on object <code>MyObject</code> will be created, on the first call to <code>foo</code>.</p>\n\n<p>Note that if your function is a template then for each instantiation of the template you will get another distinct static variable. For example with:</p>\n\n<pre><code>template&lt;int N&gt;\nvoid foo() {\n    static MyObject my_instance;\n    std::cout &lt;&lt; \"... inside function foo ...\\n\";\n}\n</code></pre>\n\n<p>the all the calls to <code>foo&lt;1&gt;()</code> will use the same variable but calling instead <code>foo&lt;2&gt;()</code> will access another copy of the function (another instantiation of the function template), that will have its own distinct static variable created on the first call to <code>foo&lt;2&gt;()</code>. All static variables that have been initialized will be destroyed after the end of <code>main</code> when the program terminates.</p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 5957243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ca4f5d64fdf98a16c837c0651a9e6db?s=128&d=identicon&r=PG&f=1", "display_name": "Youlean", "link": "https://stackoverflow.com/users/5957243/youlean"}, "edited": false, "score": 0, "creation_date": 1475095917, "post_id": 39757135, "comment_id": 66810866, "body": "Thanks for the answer but this will probably not work. See edit."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 23, "user_id": 5957243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ca4f5d64fdf98a16c837c0651a9e6db?s=128&d=identicon&r=PG&f=1", "display_name": "Youlean", "link": "https://stackoverflow.com/users/5957243/youlean"}, "edited": false, "score": 0, "creation_date": 1475096316, "post_id": 39757135, "comment_id": 66811052, "body": "@Youlean, that surprises me. Every instance of the plugin should get its own copy of the static variable."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1475094758, "creation_date": 1475094758, "answer_id": 39757135, "question_id": 39757024, "link": "https://stackoverflow.com/questions/39757024/get-call-identifier-or-address-of-a-function/39757135#39757135", "title": "Get call identifier or address of a function", "body": "<blockquote>\n<pre><code>void SomeFunction()\n{\n// Find somehow if this is first, second, or third call of a function in a main loop\n// If the function is called first time create new variables that will be used just for this function call\n}\n</code></pre>\n</blockquote>\n\n<p>If the first call is to be tracked per object, then you need a member variable that keeps track of how many times <code>SomeFuntion</code> has been called for that object.</p>\n\n<p>If the first call is to be tracked independent of objects, then you can use a <code>static</code> function variable that keeps track of how many times <code>SomeFuntion</code> has been called for that object.</p>\n"}, {"tags": [], "owner": {"reputation": 34061, "user_id": 616460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Yiloe.png?s=128&g=1", "display_name": "Jason C", "link": "https://stackoverflow.com/users/616460/jason-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1475097821, "last_edit_date": 1475097821, "creation_date": 1475097433, "answer_id": 39757817, "question_id": 39757024, "link": "https://stackoverflow.com/questions/39757024/get-call-identifier-or-address-of-a-function/39757817#39757817", "title": "Get call identifier or address of a function", "body": "<blockquote>\n  <p>I can't use static for variables in a class because software that I am developing is a plugin that could have multiple instances loaded inside host and this will probably mess up the variables. I have tested static variables and if I create for example \"static int value\" anywhere and write something in it in one instance of a plugin this \"value\" will be updated for all instances of a plugin and this is not something that I want.</p>\n</blockquote>\n\n<p>So make a non-static counter?</p>\n\n<pre><code>class MyClass {\n   int count;\npublic:\n   MyClass () : count(0) { }\n   void SomeFunction () {\n       ++ count;\n       // do stuff with 'count'\n   }\n};\n\nMyClass myClassObject;\n\nint main () {\n    myClassObject.SomeFunction(); // First call\n    myClassObject.SomeFunction(); // Second call\n    myClassObject.SomeFunction(); // Third call\n}\n</code></pre>\n\n<p>Or just pass it as a parameter...</p>\n\n<pre><code>class MyClass {\npublic:\n   void SomeFunction (int count) {\n       // do stuff with 'count'\n   }\n};\n\nMyClass myClassObject;\n\nint main () {\n    myClassObject.SomeFunction(1); // First call\n    myClassObject.SomeFunction(2); // Second call\n    myClassObject.SomeFunction(3); // Third call\n}\n</code></pre>\n\n<p>But I'm really wondering what you're actually trying to do, and I highly suggest sitting back and rethinking this whole thing, because there are a number of red flags / confusing points here...</p>\n"}, {"tags": [], "owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1475101472, "last_edit_date": 1475101472, "creation_date": 1475100867, "answer_id": 39758513, "question_id": 39757024, "link": "https://stackoverflow.com/questions/39757024/get-call-identifier-or-address-of-a-function/39758513#39758513", "title": "Get call identifier or address of a function", "body": "<p>If you're only interested in checking whether it's the first call, you can add a <code>bool SomeFunction_first_call;</code> to the <code>MyClass</code>, to act as a flag.  The constructor sets the <code>bool</code> to <code>true</code>.  <code>MyClass::SomeFunction()</code> uses the conditional check <code>if (SomeFunction_first_call) /* ... */</code> to determine whether it's the first call, as follows:</p>\n\n<pre><code>class MyClass\n{\n    bool SomeFunction_first_call;\n\npublic:\n    MyClass() : SomeFunction_first_call(true) {}\n\n    void SomeFunction()\n    {\n        if (SomeFunction_first_call)\n        {\n            // This code only executes on first call.\n            do_something();\n\n            // Successfully handled first call, set flag to false.\n            SomeFunction_first_call = false;\n        }\n\n        // This code always executes.\n        do_something();\n    }\n};\n</code></pre>\n\n<p>Similarly, if you're only concerned about the first <code>HOWEVER_MANY_CALLS</code> calls, where <code>HOWEVER_MANY_CALLS</code> is a number, you can use something like this:</p>\n\n<pre><code>#include &lt;cstdint&gt;\n\nclass MyClass\n{\n     uint8_t SomeFunction_calls;\n\npublic:\n    MyClass() : SomeFunction_calls(0) {}\n\n    void SomeFunction()\n    {\n        // This segment will be executed until (SomeFunction_calls == HOWEVER_MANY_CALLS).\n        // After this, the segment will be skipped, and the counter will no longer increment.\n        if (SomeFunction_calls &lt; HOWEVER_MANY_CALLS)\n        {\n            // This code only executes on first HOWEVER_MANY_CALLS calls.\n            do_something();\n\n            // Increment counter.\n            ++SomeFunction_calls;\n        }\n\n        // This code always executes.\n        do_something();\n    }\n};\n</code></pre>\n\n<p>Make sure to use the appropriately signed variable for the number of calls that need special handling (i.e. <code>uint8_t</code> for 0..255, <code>uint16_t</code> for 256..65,535, etc.).  If different instances of <code>MyClass</code> will need to keep track of a different number of calls, then use a non-type template parameter to indicate this, and optionally, a defaulted <code>typename</code> to indicate what type the counter should be.</p>\n\n<pre><code>#include &lt;cstdint&gt;\n\ntemplate&lt;uint64_t N, typename T = uint64_t&gt;\nclass MyClass {\n    T SomeFunction_calls;\n\n    ...\n\n    void SomeFunction()\n    {\n        if (SomeFunction_calls &lt; N) {\n            ...\n        }\n\n        ...\n    }\n};\n</code></pre>\n\n<p>In this case, a <code>MyClass&lt;4&gt;</code> will have special treatment for the first 4 calls to <code>SomeFunction()</code>, a <code>MyClass&lt;4444444444444444444&gt;</code> will have special treatment for the first 4,444,444,444,444,444,444 calls, and so on.  The counter will default to <code>uint64_t</code>, as that should be large enough to hold the value; when only a smaller number of calls need special treatment, you can specify a smaller type, such as <code>MyClass&lt;4, uint8_t&gt;</code> or <code>MyClass&lt;444444444, uint32_t&gt;</code>.</p>\n"}], "owner": {"reputation": 23, "user_id": 5957243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ca4f5d64fdf98a16c837c0651a9e6db?s=128&d=identicon&r=PG&f=1", "display_name": "Youlean", "link": "https://stackoverflow.com/users/5957243/youlean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 4, "score": -2, "last_activity_date": 1475129027, "creation_date": 1475094337, "last_edit_date": 1475096057, "question_id": 39757024, "link": "https://stackoverflow.com/questions/39757024/get-call-identifier-or-address-of-a-function", "title": "Get call identifier or address of a function", "body": "<p>Suppose that I have this code:</p>\n\n<pre><code>class MyClass\n{\npublic:\n   void SomeFunction()\n   {\n   // Find somehow if this is first, second, or third call of a function in a main loop\n   // If the function is called first time create new variables that will be used just for this function call\n   }\n};\n\nMyClass myClassObject;\n\n int main()\n{\n    myClassObject.SomeFunction(); // First call\n    myClassObject.SomeFunction(); // Second call\n    myClassObject.SomeFunction(); // Third call\n}\n</code></pre>\n\n<p>How can I know inside function what number of call is it?\nNote that I will probably have 100 function calls placed in code. Also this should work in Visual Studio on Windows and Clang on Mac.</p>\n\n<p>I had one workaround:</p>\n\n<pre><code>void SomeFunction(const char* indetifier = \"address\")\n{\n     CheckAddress(indetifier); // This will check if address is stored. If it is not, create variables, if it is, if addresses matches use variables that are tied to that address.\n}\n</code></pre>\n\n<p>I tried not to assign a new string to an \"indetifier\" and to let it to use default string (\"address\"). This of course didn't worked well as compiler will optimize \"indetifier\", so I was thinking that maybe a solution would be to disable optimizations for that variable, but I didn't because there should be some more elegant solution.</p>\n\n<p>Also one thing came on my mind, maybe I could force inline a function and then get it's address, but this also seams like bad workaround. </p>\n\n<p>I could also create new classes for every call but I would like to avoid this as there will be a lot of function calls and I don't want to think 100 different names.</p>\n\n<p>If there is a way to create class object only at first call this would be awesome.</p>\n\n<p>I hope that you understand what I want, sorry if something is not that clear as I am beginner coder.. :D</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>I can't use static for variables in a class because software that I am developing is a plugin that could have multiple instances loaded inside host and this will probably mess up the variables. I have tested static variables and if I create for example \"static int value\" anywhere and write something in it in one instance of a plugin this \"value\" will be updated for all instances of a plugin and this is not something that I want. </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1699, "user_id": 1456253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Wyv1R.jpg?s=128&g=1", "display_name": "code11", "link": "https://stackoverflow.com/users/1456253/code11"}, "edited": false, "score": 0, "creation_date": 1475094004, "post_id": 39756898, "comment_id": 66809717, "body": "what value does <code>letters = row * column;</code> result in?"}, {"owner": {"reputation": 37, "user_id": 6884679, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/0Tttk.jpg?s=128&g=1", "display_name": "Keb_Tse", "link": "https://stackoverflow.com/users/6884679/keb-tse"}, "reply_to_user": {"reputation": 1699, "user_id": 1456253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Wyv1R.jpg?s=128&g=1", "display_name": "code11", "link": "https://stackoverflow.com/users/1456253/code11"}, "edited": false, "score": 0, "creation_date": 1475094179, "post_id": 39756898, "comment_id": 66809819, "body": "it is just to know that how many letters are present(number of letters the vector is going to hold). The user is suppose to input their values like a matrix."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 6884679, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/0Tttk.jpg?s=128&g=1", "display_name": "Keb_Tse", "link": "https://stackoverflow.com/users/6884679/keb-tse"}, "edited": false, "score": 0, "creation_date": 1475094402, "post_id": 39757004, "comment_id": 66809976, "body": "Yup, i do not know why i could not see that. Thanks"}, {"owner": {"reputation": 66, "user_id": 6015808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8c94a8429acb5d2c190b248e2a8f7e8?s=128&d=identicon&r=PG&f=1", "display_name": "orphen", "link": "https://stackoverflow.com/users/6015808/orphen"}, "reply_to_user": {"reputation": 37, "user_id": 6884679, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/0Tttk.jpg?s=128&g=1", "display_name": "Keb_Tse", "link": "https://stackoverflow.com/users/6884679/keb-tse"}, "edited": false, "score": 0, "creation_date": 1475094701, "post_id": 39757004, "comment_id": 66810157, "body": "No problem. Are you compiling with g++ by chance? Use the <code>-Wall</code> switch to enable all warnings. In g++ 5.x and undoubtedly earlier versions, this throws warnings about the right operand of the comma operator having no effect as well as <code>column</code> potentially being uninitialized."}, {"owner": {"reputation": 37, "user_id": 6884679, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/0Tttk.jpg?s=128&g=1", "display_name": "Keb_Tse", "link": "https://stackoverflow.com/users/6884679/keb-tse"}, "edited": false, "score": 0, "creation_date": 1475182135, "post_id": 39757004, "comment_id": 66853681, "body": "Yes I am using g++ on cygwin. I compiled this code with -Wall enabled and it got the problem. so cooooool"}], "tags": [], "owner": {"reputation": 66, "user_id": 6015808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8c94a8429acb5d2c190b248e2a8f7e8?s=128&d=identicon&r=PG&f=1", "display_name": "orphen", "link": "https://stackoverflow.com/users/6015808/orphen"}, "is_accepted": false, "score": 2, "last_activity_date": 1475097309, "last_edit_date": 1475097309, "creation_date": 1475094235, "answer_id": 39757004, "question_id": 39756898, "link": "https://stackoverflow.com/questions/39756898/i-could-not-figure-out-why-my-code-is-not-working-codeforce-brains-photos/39757004#39757004", "title": "I could not figure out why my code is not working - codeforce - Brain&#39;s Photos", "body": "<p>You have two expressions in the line <code>cin&gt;&gt;row, column;</code> The comma separates them, and <code>column</code> is a useless expression in this case.</p>\n\n<p>You probably mean <code>cin &gt;&gt; row &gt;&gt; column;</code></p>\n\n<p><code>column</code> is being used uninitialized. If it happens to take the value <code>0</code>, the body of your first loop never executes. Beware, using uninitialized variables in this way can lead to undefined behavior.</p>\n"}], "owner": {"reputation": 37, "user_id": 6884679, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/0Tttk.jpg?s=128&g=1", "display_name": "Keb_Tse", "link": "https://stackoverflow.com/users/6884679/keb-tse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1475117616, "creation_date": 1475093854, "last_edit_date": 1475117616, "question_id": 39756898, "link": "https://stackoverflow.com/questions/39756898/i-could-not-figure-out-why-my-code-is-not-working-codeforce-brains-photos", "title": "I could not figure out why my code is not working - codeforce - Brain&#39;s Photos", "body": "<p>This is my code programmed to print <code>#Color</code> if the user entered any of <code>C</code>, <code>Y</code>, <code>M</code> characters. But if the user entered <code>W</code> ,<code>B</code>, <code>G</code> then the program is suppose to print out <code>#Black&amp;White</code>. Unfortunately, my code skips my first for loop and goes straight to printing out <code>#Black&amp;White</code>, what am I doing wrong?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nint main()\n{\n  vector&lt;char&gt;colors;\n  int row, column, letters = 0;\n  cin&gt;&gt;row, column;\n  letters = row * column;\n\n  for(int i = 0; i &lt; letters; i++)\n  {\n    char temp;\n    cin&gt;&gt;temp;\n    colors.push_back(temp);\n  }\n\n  for(int j = 0; j &lt; letters; j++)\n   {\n     if(colors[j] == 'C' || colors[j] == 'Y' || colors[j] == 'M')\n     {\n       cout&lt;&lt;\"#color\"&lt;&lt;endl;\n       return 0;\n     }\n   }\n\n  cout&lt;&lt;\"#Black&amp;White\"&lt;&lt;endl;\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "network-programming", "sfml"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1475093718, "post_id": 39756768, "comment_id": 66809560, "body": "As I understand it, if you don&#39;t specify an interface to the <a href=\"http://www.sfml-dev.org/documentation/2.4.0/classsf_1_1TcpListener.php#a9504758ea3570e62cb20b209c11776a1\" rel=\"nofollow noreferrer\"><code>listen</code></a> function, then it will listen for incoming connections on <i>all</i> interfaces (i.e. it binds to <code>INADDR_ANY</code>). Therefore you can&#39;t get the address of any specific interface from the <code>TcpListener</code> class. Instead you have to use your platforms network functions to get a list of interfaces, and either guess which one is the correct, or just list them all."}, {"owner": {"reputation": 475, "user_id": 5256963, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e3b4896ad04a1ce99d5a3e60d34e9993?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/5256963/charlie"}, "edited": false, "score": 0, "creation_date": 1475093950, "post_id": 39756768, "comment_id": 66809685, "body": "with the stl approach, the ip adress would be right there in the recvfrom() function ;)"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 475, "user_id": 5256963, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e3b4896ad04a1ce99d5a3e60d34e9993?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/5256963/charlie"}, "edited": false, "score": 1, "creation_date": 1475094551, "post_id": 39756768, "comment_id": 66810069, "body": "@Charlie One seldom use <code>recvfrom</code> on a TCP socket. Seldom one uses plain C functions too, when the <code>TcpSocket</code> class have a member function to receive data. Lastly, it&#39;s not the remove connections address the OP want, but that of the local server."}, {"owner": {"reputation": 475, "user_id": 5256963, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e3b4896ad04a1ce99d5a3e60d34e9993?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/5256963/charlie"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1475094701, "post_id": 39756768, "comment_id": 66810158, "body": "@JoachimPileborg dont get me wrong, I use SFML myself, I&#39;m just saying that the stl approach can be more transparent sometimes"}], "answers": [{"tags": [], "owner": {"reputation": 3364, "user_id": 520217, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/417a6f6d3cffb86f937638e050d89006?s=128&d=identicon&r=PG", "display_name": "Hiura", "link": "https://stackoverflow.com/users/520217/hiura"}, "is_accepted": false, "score": 2, "last_activity_date": 1475133258, "creation_date": 1475133258, "answer_id": 39763755, "question_id": 39756768, "link": "https://stackoverflow.com/questions/39756768/get-the-host-ip-address-in-sfml/39763755#39763755", "title": "Get the host IP address in SFML", "body": "<p>Unless I've misunderstood your problem, you're looking for those static functions:</p>\n\n<pre><code>sf::IpAddress sf::IpAddress::getLocalAddress();\nsf::IpAddress sf::IpAddress::getPublicAddress(Time timeout);\n</code></pre>\n\n<p>Documentation is <a href=\"http://www.sfml-dev.org/documentation/2.4.0/classsf_1_1IpAddress.php\" rel=\"nofollow\">here</a>.</p>\n"}], "owner": {"reputation": 918, "user_id": 6171792, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ad559913ce347855c4c84e4c6b0a0534?s=128&d=identicon&r=PG&f=1", "display_name": "Kake_Fisk", "link": "https://stackoverflow.com/users/6171792/kake-fisk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 730, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1475133258, "creation_date": 1475093309, "last_edit_date": 1475093441, "question_id": 39756768, "link": "https://stackoverflow.com/questions/39756768/get-the-host-ip-address-in-sfml", "title": "Get the host IP address in SFML", "body": "<p>I'm making a game where a player can host an online session. I'm using SFML network library. But I want to display the IP address of the server host when it is waiting for incoming connections. How can I get this IP address? I'm looking for the internal IP address, but if it's possible to get the external IP address, that would be a bonus.</p>\n\n<pre><code>sf::TcpListener listener;\n\n// bind the listener to a port\nif (listener.listen(53000) != sf::Socket::Done)\n{\n    // error...\n}\n\n// accept a new connection\nsf::TcpSocket client;\nif (listener.accept(client) != sf::Socket::Done)\n{\n    // error...\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "pow", "math.h", "cmath"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1475092985, "post_id": 39756656, "comment_id": 66809179, "body": "pow is for doubles not integers. Remember conversion from a double to integer truncates."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1475092992, "post_id": 39756656, "comment_id": 66809188, "body": "Since you are using <code>pow</code> you should read: <a href=\"http://stackoverflow.com/questions/588004/is-floating-point-math-broken\" title=\"is floating point math broken\">stackoverflow.com/questions/588004/&hellip;</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1475093011, "post_id": 39756656, "comment_id": 66809200, "body": "Not 100% sure if it should be used as a dupe target."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1475093180, "post_id": 39756656, "comment_id": 66809300, "body": "<a href=\"http://stackoverflow.com/questions/25678481/why-does-pown-2-return-24-when-n-5-with-my-compiler-and-os\">See also this about using pow and integer exponents</a>."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1475093989, "post_id": 39756656, "comment_id": 66809705, "body": "Also, there really is no reason to be calling <code>pow</code> if all you want are powers of 10.  A simple lookup table would be much faster than calling the <code>pow</code> function."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1475095110, "post_id": 39756656, "comment_id": 66810404, "body": "<a href=\"http://coliru.stacked-crooked.com/a/17eac6debeec0b73\" rel=\"nofollow noreferrer\">Cannot duplicate</a>.  But again, it depends on how the <code>pow</code> function is implemented, compiler switches, compiler versions, etc.  But if you want consistency, stop using <code>pow</code> and use a simple table, <a href=\"http://coliru.stacked-crooked.com/a/ed3df19aad0edfb1\" rel=\"nofollow noreferrer\">as this shows you</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4458, "user_id": 130453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9510a3b34bd894d94d4a670ea05662e?s=128&d=identicon&r=PG", "display_name": "corn3lius", "link": "https://stackoverflow.com/users/130453/corn3lius"}, "is_accepted": false, "score": 0, "last_activity_date": 1475095466, "last_edit_date": 1475095466, "creation_date": 1475093242, "answer_id": 39756747, "question_id": 39756656, "link": "https://stackoverflow.com/questions/39756656/why-a-bpow10-c-i-1-99-c/39756747#39756747", "title": "Why a+=b*pow(10,c-i-1) == 99 c++?", "body": "<p>from this link <a href=\"http://www.cplusplus.com/reference/cmath/pow/\" rel=\"nofollow\">cplusplus.com</a></p>\n\n<blockquote>\n  <p>Additional overloads are provided in this header ( cmath ) for other combinations of arithmetic types (Type1 and Type2): These overloads effectively cast its arguments to double before calculations, except if at least one of the arguments is of type long double (in which case both are casted to long double instead).</p>\n</blockquote>\n\n<p>I bet if you cast it it would be correct in math.h</p>\n"}, {"tags": [], "owner": {"reputation": 218, "user_id": 4792622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb1b8f1978ba0a0810d670e1308f6085?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob McCarthy", "link": "https://stackoverflow.com/users/4792622/jacob-mccarthy"}, "is_accepted": false, "score": 0, "last_activity_date": 1475093610, "creation_date": 1475093610, "answer_id": 39756829, "question_id": 39756656, "link": "https://stackoverflow.com/questions/39756656/why-a-bpow10-c-i-1-99-c/39756829#39756829", "title": "Why a+=b*pow(10,c-i-1) == 99 c++?", "body": "<p>The math.h and cmath versions of pow are slightly different. Basically there are more supported inputs for the cmath version. You can compare the two at these links.</p>\n\n<p><a href=\"https://www.tutorialspoint.com/c_standard_library/c_function_pow.htm\" rel=\"nofollow\">math.h</a> and <a href=\"http://www.cplusplus.com/reference/cmath/pow/\" rel=\"nofollow\">cmath</a></p>\n"}, {"tags": [], "owner": {"reputation": 582, "user_id": 6896061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bf0230605ac24f5be23ea08c02dbbe5?s=128&d=identicon&r=PG", "display_name": "DavidP", "link": "https://stackoverflow.com/users/6896061/davidp"}, "is_accepted": false, "score": 0, "last_activity_date": 1475094369, "creation_date": 1475094369, "answer_id": 39757027, "question_id": 39756656, "link": "https://stackoverflow.com/questions/39756656/why-a-bpow10-c-i-1-99-c/39757027#39757027", "title": "Why a+=b*pow(10,c-i-1) == 99 c++?", "body": "<p>As people have commented, it's probably related to variable type conversion and floating point errors. Pow operates on doubles, which can have floating point errors. Chances are pow is returning a value like 99.9999999 which is then being converted to an integer. Since the integer conversion truncates instead of rounds, you get 99.</p>\n"}], "owner": {"reputation": 13, "user_id": 6895920, "user_type": "registered", "profile_image": "https://graph.facebook.com/1263218770367403/picture?type=large", "display_name": "Robert Rusiecki", "link": "https://stackoverflow.com/users/6895920/robert-rusiecki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 234, "favorite_count": 2, "closed_date": 1545896716, "answer_count": 3, "score": 1, "last_activity_date": 1475095466, "creation_date": 1475092895, "question_id": 39756656, "link": "https://stackoverflow.com/questions/39756656/why-a-bpow10-c-i-1-99-c", "closed_reason": "Duplicate", "title": "Why a+=b*pow(10,c-i-1) == 99 c++?", "body": "<p>I wrote this code and first time of loop result is 99. Why is result 99, when it should be 100?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include&lt;math.h&gt;\nusing namespace std;\nint main ()\n{\n  int skt = 0;\n  int sk[3];\nint nsk = 3;\nsk[0]=1;\nsk[1]=2;\nsk[2]=8;\nfor (int i=0; i&lt;nsk; i++)\n{\n    skt = skt + (sk[i]*pow(10.0,nsk-i-1));\n    cout &lt;&lt;\" \"&lt;&lt;skt&lt;&lt;endl;\n}\n\n}\n</code></pre>\n\n<p>the result of this code</p>\n\n<pre><code>   99\n   119\n   127\n</code></pre>\n\n<p>,but if I use library cmath it is correct answer</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include&lt;cmath&gt;\nusing namespace std;\nint main ()\n{\n  int skt = 0;\n  int sk[3];\nint nsk = 3;\nsk[0]=1;\nsk[1]=2;\nsk[2]=8;\nfor (int i=0; i&lt;nsk; i++)\n{\n    skt = skt + (sk[i]*pow(10.0,nsk-i-1));\n    cout &lt;&lt;\" \"&lt;&lt;skt&lt;&lt;endl;\n}\n\n}\n</code></pre>\n\n<p>the result of this code</p>\n\n<pre><code>    100\n    120\n    128\n</code></pre>\n\n<p>Could anybody explain why?</p>\n"}, {"tags": ["c++", "visual-studio", "clang"], "comments": [{"owner": {"reputation": 575, "user_id": 291838, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kJVBm.jpg?s=128&g=1", "display_name": "Nick Edwards", "link": "https://stackoverflow.com/users/291838/nick-edwards"}, "edited": false, "score": 0, "creation_date": 1500847133, "post_id": 39756421, "comment_id": 77503364, "body": "Looks like someone did this: <a href=\"https://marketplace.visualstudio.com/items?itemName=FredericHeem.CppFixItAddIn\" rel=\"nofollow noreferrer\">marketplace.visualstudio.com/&hellip;</a> but doesn&#39;t look like it&#39;s maintained anymore"}], "owner": {"reputation": 1937, "user_id": 972014, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/7c636e5bf05e33414753115bb1d655c3?s=128&d=identicon&r=PG", "display_name": "user972014", "link": "https://stackoverflow.com/users/972014/user972014"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 385, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1475092023, "creation_date": 1475092023, "question_id": 39756421, "link": "https://stackoverflow.com/questions/39756421/writing-a-clang-static-checker-for-visual-studio", "title": "Writing a Clang static checker for Visual Studio", "body": "<p>Clang support writing of custom checker for it's static analyzer.</p>\n\n<p>Visual Studio supports compiling using clang.</p>\n\n<p>Is it possible to write a Clang custom checker to be used in Visual Studio?</p>\n"}, {"tags": ["c++", "numbers", "decimal"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1475092071, "post_id": 39756409, "comment_id": 66808661, "body": "Voting to close as trivial typo etc. You need a trailing <code>;</code> after the <code>inputedNumber</code> declaration."}, {"owner": {"reputation": 4713, "user_id": 6799654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbfa65b345b86c22a77eb3f457c99f35?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey Guseynov", "link": "https://stackoverflow.com/users/6799654/alexey-guseynov"}, "edited": false, "score": 0, "creation_date": 1475092073, "post_id": 39756409, "comment_id": 66808664, "body": "You are missing a semicolon after inputedNumber;"}, {"owner": {"reputation": 5956, "user_id": 1249472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7d2ac9163237829d11cbf4ee7d563d?s=128&d=identicon&r=PG", "display_name": "Nikita", "link": "https://stackoverflow.com/users/1249472/nikita"}, "edited": false, "score": 0, "creation_date": 1475092078, "post_id": 39756409, "comment_id": 66808666, "body": "You forgot <code>;</code> after <code>inputedNumber</code>."}, {"owner": {"reputation": 3, "user_id": 6895891, "user_type": "registered", "profile_image": "https://graph.facebook.com/676998402457695/picture?type=large", "display_name": "Maddie Wood", "link": "https://stackoverflow.com/users/6895891/maddie-wood"}, "edited": false, "score": 0, "creation_date": 1475092389, "post_id": 39756409, "comment_id": 66808828, "body": "Even with the trailing ; an error occurs."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6895891, "user_type": "registered", "profile_image": "https://graph.facebook.com/676998402457695/picture?type=large", "display_name": "Maddie Wood", "link": "https://stackoverflow.com/users/6895891/maddie-wood"}, "edited": false, "score": 0, "creation_date": 1475092711, "post_id": 39756453, "comment_id": 66809023, "body": "Thank you for partially solving the issue"}], "tags": [], "owner": {"reputation": 1448, "user_id": 1679647, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Z0sB3.jpg?s=128&g=1", "display_name": "Gerhard Stein", "link": "https://stackoverflow.com/users/1679647/gerhard-stein"}, "is_accepted": false, "score": 0, "last_activity_date": 1475092145, "creation_date": 1475092145, "answer_id": 39756453, "question_id": 39756409, "link": "https://stackoverflow.com/questions/39756409/how-to-get-rid-of-this-error/39756453#39756453", "title": "How to get rid of this error?", "body": "<p>First Line in main function is missing a semicolon.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 6895891, "user_type": "registered", "profile_image": "https://graph.facebook.com/676998402457695/picture?type=large", "display_name": "Maddie Wood", "link": "https://stackoverflow.com/users/6895891/maddie-wood"}, "edited": false, "score": 0, "creation_date": 1475092558, "post_id": 39756459, "comment_id": 66808933, "body": "Thank you for constructive help! The missing semicolon helped one problem but the main problem was the issue behind bin and cout. You are very helpful!"}, {"owner": {"reputation": 5093, "user_id": 6039995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QuCId.png?s=128&g=1", "display_name": "Stack Danny", "link": "https://stackoverflow.com/users/6039995/stack-danny"}, "reply_to_user": {"reputation": 3, "user_id": 6895891, "user_type": "registered", "profile_image": "https://graph.facebook.com/676998402457695/picture?type=large", "display_name": "Maddie Wood", "link": "https://stackoverflow.com/users/6895891/maddie-wood"}, "edited": false, "score": 0, "creation_date": 1475092624, "post_id": 39756459, "comment_id": 66808972, "body": "Thanks. Good luck with your further programming!"}], "tags": [], "owner": {"reputation": 5093, "user_id": 6039995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QuCId.png?s=128&g=1", "display_name": "Stack Danny", "link": "https://stackoverflow.com/users/6039995/stack-danny"}, "is_accepted": true, "score": 0, "last_activity_date": 1475092177, "creation_date": 1475092177, "answer_id": 39756459, "question_id": 39756409, "link": "https://stackoverflow.com/questions/39756409/how-to-get-rid-of-this-error/39756459#39756459", "title": "How to get rid of this error?", "body": "<pre><code>cin &gt;&gt; \"Number Converter!! The given number is\" &gt;&gt; inputedNumber;\n</code></pre>\n\n<p>does not compile, since <code>cin</code> is only for <em>input</em> not <em>output</em>; use <code>cout</code> instead! </p>\n\n<pre><code>cout &lt;&lt; \"Number Converter!! The given number is\" &lt;&lt; inputedNumber;\n</code></pre>\n\n<p>Also, if you really want to convert a number (to an integer for example) use this: </p>\n\n<pre><code>cout &lt;&lt; \"Number Converter!! The given number is\" &lt;&lt; static_cast&lt;int&gt;(inputedNumber);\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 6895891, "user_type": "registered", "profile_image": "https://graph.facebook.com/676998402457695/picture?type=large", "display_name": "Maddie Wood", "link": "https://stackoverflow.com/users/6895891/maddie-wood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "closed_date": 1475092175, "accepted_answer_id": 39756459, "answer_count": 2, "score": -3, "last_activity_date": 1475255218, "creation_date": 1475091970, "last_edit_date": 1475255218, "question_id": 39756409, "link": "https://stackoverflow.com/questions/39756409/how-to-get-rid-of-this-error", "closed_reason": "Not suitable for this site", "title": "How to get rid of this error?", "body": "<p>I was assigned to do a simple number converter, I followed all the instructions and they seemed pretty straight forward. This is for a beginner course into C++ and I seem to be missing the mark on this program. I continue to get an error stating that I need an initializer before double inputedNumber or that the variable is not in the scope. I have even compared my code to classmates and did what they did but this error still happens...\nAny help would be awesome!\nThanks in advance!</p>\n\n<pre><code>    #include &lt;iostream&gt;\n    using namespace std;\n    int main()\n    {\n       double inputedNumber;\n       cout &lt;&lt; \"Please input a decimal to be converted.\";\n       cin &gt;&gt; inputedNumber;\n       cin &gt;&gt; \"Number Converter!! The given number is\" &gt;&gt; inputedNumber;\n    }\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1475092252, "post_id": 39756403, "comment_id": 66808760, "body": "Use <code>setprecision()</code> when printing them."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1475092442, "post_id": 39756403, "comment_id": 66808864, "body": "Please clarify your specific problem or add additional details to highlight exactly what you need. As it&#39;s currently written, it\u2019s hard to tell exactly what you&#39;re asking. See the How to Ask page for help clarifying this question."}, {"owner": {"reputation": 25, "user_id": 6855645, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sCgEI.jpg?s=128&g=1", "display_name": "Ashish Deb", "link": "https://stackoverflow.com/users/6855645/ashish-deb"}, "edited": false, "score": 0, "creation_date": 1475095763, "post_id": 39756403, "comment_id": 66810774, "body": "Let, I found AC=4.564 and BD=4.789; Now, if i want to add AC with BD then the result is 9.351 and if now i print the number fixed with 2 digits after decimal point then it will show 9.35. But if i take AC=4.56 and BD=4.78 then the result is 9.34. And i want 9.34 as result."}], "answers": [{"tags": [], "owner": {"reputation": 768, "user_id": 3398917, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QLQue.jpg?s=128&g=1", "display_name": "Stormwind", "link": "https://stackoverflow.com/users/3398917/stormwind"}, "is_accepted": false, "score": 0, "last_activity_date": 1475093001, "creation_date": 1475093001, "answer_id": 39756686, "question_id": 39756403, "link": "https://stackoverflow.com/questions/39756403/how-can-i-fix-a-double-number-with-2-digits-after-decimal-point-in-cpp/39756686#39756686", "title": "How can I fix a double number with 2 digits after decimal point in cpp?", "body": "<p>Two decimals of <strong>accuracy</strong>:</p>\n\n<ol>\n<li>Multiply by 100</li>\n<li>Add 0.5</li>\n<li>Round down to closest integer</li>\n<li>Divide by 100</li>\n</ol>\n\n<p>But if you happen to end up with an integer value, you won't have \"2 digits after decimal point\"</p>\n"}, {"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1475097553, "post_id": 39756754, "comment_id": 66811688, "body": "Recommend losing the <code>printf</code>. This is C++."}], "tags": [], "owner": {"reputation": 16, "user_id": 3732190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f635a724edec624350862056868a4830?s=128&d=identicon&r=PG&f=1", "display_name": "Jess", "link": "https://stackoverflow.com/users/3732190/jess"}, "is_accepted": true, "score": -1, "last_activity_date": 1475099709, "last_edit_date": 1475099709, "creation_date": 1475093261, "answer_id": 39756754, "question_id": 39756403, "link": "https://stackoverflow.com/questions/39756403/how-can-i-fix-a-double-number-with-2-digits-after-decimal-point-in-cpp/39756754#39756754", "title": "How can I fix a double number with 2 digits after decimal point in cpp?", "body": "<p>If you're trying to output double values with 2 digits after the decimal then use modifiers to a stream like so:</p>\n\n<pre><code>std::cout &lt;&lt; std::setprecision (2) &lt;&lt; std::fixed &lt;&lt; AC;\n</code></pre>\n\n<p>This will output a fixed point representation of the floating point number with 2 digits of precision.  </p>\n\n<p>Also, you should look at the round, ceil and floor functions and use them as follows:</p>\n\n<p>ans = round (AC * 100.0) / 100.0 </p>\n\n<p>to do what you want.  You'll find that you cannot represent all numbers as just two digits after the decimal so any comparisons you make should test for closeness of the answer to the target by +/- a small epsilon to the target value.</p>\n\n<p>If you're trying to use the values computed for financial computation then this is very dangerous to do with the double type because certain values cannot be represented exactly with a limited number of bits of precision.  You will suffer from accumulation of errors when performing financial computation with float/double types.</p>\n"}], "owner": {"reputation": 25, "user_id": 6855645, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sCgEI.jpg?s=128&g=1", "display_name": "Ashish Deb", "link": "https://stackoverflow.com/users/6855645/ashish-deb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1343, "favorite_count": 0, "closed_date": 1475094567, "accepted_answer_id": 39756754, "answer_count": 2, "score": 0, "last_activity_date": 1475099709, "creation_date": 1475091940, "last_edit_date": 1475096660, "question_id": 39756403, "link": "https://stackoverflow.com/questions/39756403/how-can-i-fix-a-double-number-with-2-digits-after-decimal-point-in-cpp", "closed_reason": "Duplicate", "title": "How can I fix a double number with 2 digits after decimal point in cpp?", "body": "<p>As like,  </p>\n\n<pre><code>AC = sqrt((AB*AB)+(BC*BC)); \n\nBD = sqrt((BC*BC)+(CD*CD));\n</code></pre>\n\n<p>(where all variables are double type)</p>\n\n<p>Here, i want the value of AC and BD fixed with 2 digits after decimal point and then I want to add AC and BD. Now, if i take (3 digits after decimal point) AC=4.564 and BD=4.789 the the result after adding them is 9.351. Again if i take (2digits after decimal point) AC=4.56 and BD=78 then the result after adding them is 9.34. Now if i print both result fixed with 2 digits after decimal point then it shows 9.35 and 9.34 respectively. But I want 9.34 as result.</p>\n"}, {"tags": ["c++", "multithreading", "constructor", "race-condition", "vtable"], "comments": [{"owner": {"reputation": 4713, "user_id": 6799654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbfa65b345b86c22a77eb3f457c99f35?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey Guseynov", "link": "https://stackoverflow.com/users/6799654/alexey-guseynov"}, "edited": false, "score": 0, "creation_date": 1475091964, "post_id": 39756311, "comment_id": 66808590, "body": "Please include the code you use to notify the main thread. May be you are experiencing spurious wakeups."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1475091970, "post_id": 39756311, "comment_id": 66808595, "body": "There&#39;s no <code>SomeRunner::start</code> member function. Is <code>SomeRunner</code> supposed to inherit from <code>Runnable</code>?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1475092028, "post_id": 39756311, "comment_id": 66808632, "body": "Runnable has virtual functions but no virtual destructor (and nothing inherits from it in this example)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1475092054, "post_id": 39756311, "comment_id": 66808648, "body": "It would be better to post a MCVE (or at least a MCE, even if you can&#39;t make the minimal example crash, someone might be able to spot something)"}, {"owner": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 1, "creation_date": 1475092723, "post_id": 39756311, "comment_id": 66809029, "body": "Besides all comments, in your <code>BaseClass</code>, <code>someMethod</code> is not declared as <code>virtual</code>"}, {"owner": {"reputation": 7400, "user_id": 272023, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/25dbc4a263833e5a5b36f5394cfc1d01?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/272023/john"}, "edited": false, "score": 0, "creation_date": 1475134631, "post_id": 39756311, "comment_id": 66823248, "body": "Thanks for looking, I&#39;ve updated the code now.  This is the MCE for my build on RPi, but doesn&#39;t crash on Linux.  If I enter this code in a simple project and build on RPi, it works however.  The compiler on RPi does respect other virtual functions, so is it possible for the votable to become corrupted somehow?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4113344"}, "edited": false, "score": 0, "creation_date": 1475136494, "post_id": 39756311, "comment_id": 66824270, "body": "What if the working function that is invoked by <code>runner.start()</code> terminates <i>before</i> the call to <code>runner.getClassPtr()</code>?"}, {"owner": {"reputation": 7400, "user_id": 272023, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/25dbc4a263833e5a5b36f5394cfc1d01?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/272023/john"}, "edited": false, "score": 0, "creation_date": 1475140868, "post_id": 39756311, "comment_id": 66827179, "body": "@Nasha the <code>doWork()</code> implementation is a loop that only terminates when the user asks it to, so it doesn&#39;t end before <code>runner.getClassPtr()</code>.  There is logging when it does terminate, and this is never executed."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4113344"}, "edited": false, "score": 0, "creation_date": 1475147616, "post_id": 39756311, "comment_id": 66831719, "body": "@John, Ok. The next thing is that <code>std::thread(&amp;Runnable::doWork, this)</code>. It clearly is a hack in that you&#39;re assuming the <code>this</code> pointer is always the first argument to a class member function, regardless of the architecture. I&#39;d rather derive the std::thread class to guarantee the arguments make sense together by explicitly calling <code>instance-&gt;*function()</code> using that very form. Or as an argument to the <code>std::thread</code> constructor use a structure that contains both <code>this</code> and the member function pointer, for instance."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4113344"}, "edited": false, "score": 0, "creation_date": 1475149168, "post_id": 39756311, "comment_id": 66832753, "body": "Addendum to my last comment: <code>this</code> indeed is always the first (hidden) argument to a member function but the compiler might very well use and &quot;stack&quot; the pointer in some other way than how we imagine (due to optimizations, aso), hence making an explicit call instead of relying upon <code>std::thread()</code> to &quot;assemble&quot; a proper C++ member function call."}, {"owner": {"reputation": 7400, "user_id": 272023, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/25dbc4a263833e5a5b36f5394cfc1d01?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/272023/john"}, "edited": false, "score": 0, "creation_date": 1475153431, "post_id": 39756311, "comment_id": 66835968, "body": "@Nasha I don&#39;t think it is a result of a race condition - see my edit for where the crash can be caused inside the <code>doWork()</code> method.  The cast to a <code>BaseClass*</code> is effectively what is happening when an <code>ImplClass*</code> is passed to a method that takes a <code>BaseClass*</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4113344"}, "edited": false, "score": 0, "creation_date": 1475155857, "post_id": 39756311, "comment_id": 66837811, "body": "Then the only way to know is to inspect the running code under gdb, I&#39;m afraid."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1477718651, "post_id": 39756311, "comment_id": 67889488, "body": "1) There is no virtual inheritance in your code, only regular (non virtual) inheritance and virtual functions. 2) Your issue is probably related to threads. 3) This is certainly a design issue, not an issue with a particular target architecture."}], "owner": {"reputation": 7400, "user_id": 272023, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/25dbc4a263833e5a5b36f5394cfc1d01?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/272023/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1477717633, "creation_date": 1475091677, "last_edit_date": 1477717633, "question_id": 39756311, "link": "https://stackoverflow.com/questions/39756311/c-inherited-class-vtable-corrupted-for-raspberry-pi-g", "title": "C++ inherited class vtable corrupted for Raspberry Pi g++?", "body": "<p>I have some code that is to run on Linux (x86_64) and Raspberry Pi.  The code runs ok on Linux, but crashes with a SIGSEGV on RPi.  A derived method appears to not have the vtable populated and I wonder whether it is as a result of a race condition?</p>\n\n<p>Here are the classes that implement the threading:</p>\n\n<pre><code>class Runnable {\n      public:\n        Runnable() {}\n        virtual ~Runnable() {}\n\n        // Starts the thread &amp; execute the doWork() method.\n        void start() {\n            thread = std::thread(&amp;Runnable::doWork, this);\n        }\n\n\n        // Stop the thread if running\n        virtual void stop() = 0;\n\n        // Joins the thread, blocks until the thread has finished.\n        void join() {\n            if (thread.joinable()) { thread.join(); }\n        }\n\n      protected:\n        std::thread thread; ///&lt; the thread used by this class\n\n        /**\n         * @brief The method that does work. This will be called when the thread is started.\n         * The implementation should not return until stop() is called (or is finished with work).\n         * This is in protected scope as it should not be called except from the start() method.\n         */\n        virtual void doWork() = 0;    \n    };\n\ntemplate &lt;typename VIRTUAL_CLASS_TYPE&gt;\nclass SomeRunner : public Runnable {\n    public:\n        SomeRunner() {}\n        virtual ~SomeRunner() {\n            // do not delete classPtr, as a framework we are using deletes it for us\n        }\n\n    virtual void doWork() { \n        // do some work\n        classPtr = new VIRTUAL_CLASS_TYPE();\n\n        // notify main thread that we have created classPtr\n        // this is done via a condition variable &amp; mutex\n        notifyIsReady();\n\n        // do some more work\n    }\n\n    virtual void stop() {\n       // tell thread to stop work\n    }\n\n    VIRTUAL_CLASS_TYPE *getClassPtr() {\n        return classPtr;\n    }\n\n    protected:\n        VIRTUAL_CLASS_TYPE *classPtr = nullptr;\n}\n\n\n// Within InterfaceLibrary.a\nclass BaseClass {\n    public:\n        BaseClass() {}\n        virtual ~BaseClass() {}\n\n        virtual void someMethod() = 0;\n}\n\n\n//Within ImplementationLibrary.a:\nclass ImplClass : public BaseClass {\n    public:\n        ImplClass() : BaseClass() {}\n        virtual ~ImplClass() {}\n\n        virtual void someMethod() {\n            // do something here\n        }\n}\n\n\n// within main application project\n\nclass ClassThatCausesDump {\n    // ...\n    void someMethod(BaseClass *bc) {\n        bc-&gt;someMethod();\n    }\n}\n\n\n\nbool                                isReady = false;\nstd::mutex                           mutexIsReady;\nstd::condition_variable              cvIsReady;\n\nvoid notifyGlsIsReady() {\n    std::unique_lock&lt;std::mutex&gt; lock(mutexIsReady);\n    isReady = true;\n    lock();\n    cvIsReady.notify_one();\n}\n\n\nint main(int argc, char **argv) {\n    // ...\n    SomeRunner&lt;ImplClass&gt; runner;\n    runner.start();\n\n    // main blocks until notified that the ImplClass has been created by runner\n    std::unique_lock&lt;std::mutex&gt; isReadyLock(mutexIsReady);\n    cvIsReady.wait(isReadyLock, [] {return isReady;});\n\n\n    ClassThatCausesDump dump;\n    dump.someMethod(runner.getClassPtr()); // this triggers the core dump on RPi\n</code></pre>\n\n<p>The variable <code>classPtr</code>, although passed as a <code>BaseClass</code> should call the derived <code>someMethod()</code>.  However, when I run using gdb, I see that the program crashes at the call to <code>someMethod()</code> within <code>ClassThatCausesDump</code>.  It tries to execute an instruction at 0x000000.</p>\n\n<p>The program works on a Linux VM within a powerful multicore OSX machine, but not on RPi.  I cleaned everything then recompiled, then it worked suddenly on RPi.  Then I cleaned again to make sure it wasn't a fluke, then it went back to crashing (it never crashes on Linux).  That makes me think there's perhaps something funny about the way the class is created in a separate thread perhaps?</p>\n\n<p>Any ideas, please?</p>\n\n<p>EDIT:</p>\n\n<p>I don't think this is an issue to do with threading, because a call to the offending virtual function is ok if done within the <code>doWork()</code> method.</p>\n\n<pre><code>virtual void doWork() { \n    // do some work\n    classPtr = new VIRTUAL_CLASS_TYPE();\n\n    VIRTUAL_CLASS_TYPE *ptr = getClassPtr();\n    ptr-&gt;someMethod(); // this is ok and does not crash\n    // This next line is only here for testing because we know that VIRTUAL_CLASS_TYPE is of type ImplClass!\n    BaseClass *bc = (BaseClass*)ptr; \n    bc-&gt;someMethod(); // this crashes\n\n    // notify main thread that we have created classPtr\n    // this is done via a condition variable &amp; mutex\n    notifyIsReady();\n\n    // do some more work\n}\n</code></pre>\n"}, {"tags": ["c#", "c++", "dll", "pinvoke"], "comments": [{"owner": {"reputation": 35506, "user_id": 424129, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/067763e25885a77061483ece2443c527?s=128&d=identicon&r=PG&f=1", "display_name": "15ee8f99-57ff-4f92-890c-b56153", "link": "https://stackoverflow.com/users/424129/15ee8f99-57ff-4f92-890c-b56153"}, "edited": false, "score": 0, "creation_date": 1475090846, "post_id": 39756017, "comment_id": 66807993, "body": "PLARGE_INTEGER and LPDWORD should be <code>IntPtr</code>, shouldn&#39;t they?"}, {"owner": {"reputation": 1, "user_id": 4018436, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "falcon eagle", "link": "https://stackoverflow.com/users/4018436/falcon-eagle"}, "reply_to_user": {"reputation": 35506, "user_id": 424129, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/067763e25885a77061483ece2443c527?s=128&d=identicon&r=PG&f=1", "display_name": "15ee8f99-57ff-4f92-890c-b56153", "link": "https://stackoverflow.com/users/424129/15ee8f99-57ff-4f92-890c-b56153"}, "edited": false, "score": 0, "creation_date": 1475091461, "post_id": 39756017, "comment_id": 66808319, "body": "i try and retry this approach but it did not work and the same exception has been thrown"}, {"owner": {"reputation": 9937, "user_id": 125601, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5a3cd2f90c4c12b75ed2d0b814a5787a?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Fraser", "link": "https://stackoverflow.com/users/125601/robert-fraser"}, "reply_to_user": {"reputation": 35506, "user_id": 424129, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/067763e25885a77061483ece2443c527?s=128&d=identicon&r=PG&f=1", "display_name": "15ee8f99-57ff-4f92-890c-b56153", "link": "https://stackoverflow.com/users/424129/15ee8f99-57ff-4f92-890c-b56153"}, "edited": false, "score": 1, "creation_date": 1475091491, "post_id": 39756017, "comment_id": 66808338, "body": "@EdPlunkett the &quot;out&quot; will add the pointer already."}, {"owner": {"reputation": 35506, "user_id": 424129, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/067763e25885a77061483ece2443c527?s=128&d=identicon&r=PG&f=1", "display_name": "15ee8f99-57ff-4f92-890c-b56153", "link": "https://stackoverflow.com/users/424129/15ee8f99-57ff-4f92-890c-b56153"}, "reply_to_user": {"reputation": 9937, "user_id": 125601, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5a3cd2f90c4c12b75ed2d0b814a5787a?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Fraser", "link": "https://stackoverflow.com/users/125601/robert-fraser"}, "edited": false, "score": 0, "creation_date": 1475091595, "post_id": 39756017, "comment_id": 66808386, "body": "@RobertFraser Good point, I don&#39;t know where my brain is today"}, {"owner": {"reputation": 1, "user_id": 4018436, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "falcon eagle", "link": "https://stackoverflow.com/users/4018436/falcon-eagle"}, "edited": false, "score": 0, "creation_date": 1475091609, "post_id": 39756017, "comment_id": 66808394, "body": "i do not understand your replay but i write this delaration         [DllImport(&quot;mydll.dll&quot;)]         extern static bool GetFolderSize(string lpszStartFolder,                                    bool bRecurse,                                    bool bQuickSize,                                    IntPtr lpFolderSize,                                     IntPtr  lpFolderCount,                                     IntPtr lpFileCount);"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1475091877, "post_id": 39756017, "comment_id": 66808544, "body": "Careful of the <code>bool</code>, C++ has a &#39;bool&#39; builtin type and a <code>BOOL</code> typedef in windows.h, and <a href=\"http://stackoverflow.com/a/6420546/103167\">the two are not the same size</a>.  See <a href=\"https://blogs.msdn.microsoft.com/jaredpar/2008/10/14/pinvoke-and-bool-or-should-i-say-bool/\" rel=\"nofollow noreferrer\">blogs.msdn.microsoft.com/jaredpar/2008/10/14/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4018436, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "falcon eagle", "link": "https://stackoverflow.com/users/4018436/falcon-eagle"}, "edited": false, "score": 0, "creation_date": 1475092225, "post_id": 39756201, "comment_id": 66808744, "body": "i will write it"}, {"owner": {"reputation": 1, "user_id": 4018436, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "falcon eagle", "link": "https://stackoverflow.com/users/4018436/falcon-eagle"}, "edited": false, "score": 0, "creation_date": 1475172706, "post_id": 39756201, "comment_id": 66848759, "body": "i am sorry if i do not understand      this c++ function how can i declare it in c# via pinvoke                                                                                  __declspec(dllexport) BOOL GetFolderSize(LPCTSTR lpszStartFolder,  \t\t\t\t   BOOL bRecurse,  \t\t\t\t   BOOL bQuickSize, \t\t\t\t   PLARGE_INTEGER lpFolderSize, \t\t\t\t   LPDWORD lpFolderCount /*= NULL*/, \t\t\t\t   LPDWORD lpFileCount /*= NULL*/);"}], "tags": [], "owner": {"reputation": 9937, "user_id": 125601, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5a3cd2f90c4c12b75ed2d0b814a5787a?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Fraser", "link": "https://stackoverflow.com/users/125601/robert-fraser"}, "is_accepted": false, "score": 0, "last_activity_date": 1475091653, "last_edit_date": 1475091653, "creation_date": 1475091326, "answer_id": 39756201, "question_id": 39756017, "link": "https://stackoverflow.com/questions/39756017/i-can-not-import-c-dll-function-to-c-using-pinvke/39756201#39756201", "title": "i can not import c++ dll function to c# using pinvke", "body": "<p>Two problems I see:</p>\n\n<ul>\n<li><p>Calling convention: The default calling convention of P/Invoke is WINAPI. Depending on what MYDLL_API is, you might need to do something like <code>[[DllImport(\"mydll.dll\", CallingConvention = CallingConvention.Stdcall)]]</code></p></li>\n<li><p>String type -- LPCTSTR is not the default string conversion.</p></li>\n</ul>\n\n<p>The full declaration will look something like...</p>\n\n<pre><code>[DllImport(\"mydll.dll\", CallingConvention = CallingConvention.Stdcall)]\nextern static int GetFolderSize(\n    [MarshalAs(UnmanagedType.LPStr)] string lpszStartFolder,\n    int bRecurse,\n    int bQuickSize,\n    out long lpFolderSize,\n    out uint lpFolderCount,\n    out uint lpFileCount);\n</code></pre>\n\n<p>If you post what MYDLL_API is, we'll have a better sense. Also, if you're not averse to adding <code>unsafe</code> to everything, I've found it makes working with pointers/out parameters/etc <em>much</em> easier.</p>\n"}], "owner": {"reputation": 1, "user_id": 4018436, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "falcon eagle", "link": "https://stackoverflow.com/users/4018436/falcon-eagle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "closed_date": 1475095282, "answer_count": 1, "score": -1, "last_activity_date": 1475091653, "creation_date": 1475090649, "question_id": 39756017, "link": "https://stackoverflow.com/questions/39756017/i-can-not-import-c-dll-function-to-c-using-pinvke", "closed_reason": "Duplicate", "title": "i can not import c++ dll function to c# using pinvke", "body": "<p>i want to use c++  function code into .net code </p>\n\n<pre><code>MYDLL_API BOOL GetFolderSize(LPCTSTR lpszStartFolder, \n               BOOL bRecurse, \n               BOOL bQuickSize,\n               PLARGE_INTEGER lpFolderSize,\n               LPDWORD lpFolderCount /*= NULL*/,\n               LPDWORD lpFileCount /*= NULL*/);\n</code></pre>\n\n<p>so i create dll to export the code\nthen use PInvoke in c# code </p>\n\n<pre><code>[StructLayout(LayoutKind.Explicit, Size = 8)]\n    struct LARGE_INTEGER\n    {\n        [FieldOffset(0)]\n        public Int64 QuadPart;\n        [FieldOffset(0)]\n        public UInt32 LowPart;\n        [FieldOffset(4)]\n        public Int32 HighPart;\n    }\n\n  [DllImport(\"mydll.dll\")]\n    extern static bool GetFolderSize(string lpszStartFolder,\n                               bool bRecurse,\n                               bool bQuickSize,\n                               out LARGE_INTEGER lpFolderSize,\n                                out UInt32 lpFolderCount,\n                                out UInt32 lpFileCount);\n</code></pre>\n\n<p>what the wrong in that????</p>\n\n<p>but when i call it it give me run time exception\nA call to PInvoke function 'dublication!dublication.Form1::GetFolderSize' has unbalanced the stack. This is likely because the managed PInvoke signature does not match the unmanaged target signature. Check that the calling convention and parameters of the PInvoke signature match the target unmanaged signature</p>\n"}, {"tags": ["c++", "linked-list", "operator-overloading", "inner-classes", "friend-function"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1475091479, "post_id": 39755990, "comment_id": 66808330, "body": "Sorry that dupe was not right.  Reopened."}, {"owner": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "edited": false, "score": 0, "creation_date": 1475098061, "post_id": 39755990, "comment_id": 66811918, "body": "A friend function isn&#39;t really a member, so you cannot define it out of line this way. Really the only sensible way of defining such functions is inline."}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 5438325, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/10204875732004291/picture?type=large", "display_name": "Daryl Drake", "link": "https://stackoverflow.com/users/5438325/daryl-drake"}, "edited": false, "score": 0, "creation_date": 1475092008, "post_id": 39756314, "comment_id": 66808617, "body": "I meant to put node instead of this but I am still getting the same error, I am confused as to how to define it as a free function/ what that means."}], "tags": [], "owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "is_accepted": false, "score": 1, "last_activity_date": 1475125405, "last_edit_date": 1495540853, "creation_date": 1475091691, "answer_id": 39756314, "question_id": 39755990, "link": "https://stackoverflow.com/questions/39755990/addition-operator-overload-for-pointers-to-nested-classes/39756314#39756314", "title": "Addition operator overload for pointers to nested classes", "body": "<p>Fundamentally, the problem with what you're trying to do is that it's oveloading an operator on pointers. This is <a href=\"https://stackoverflow.com/questions/6171630/why-isnt-operator-overloading-for-pointers-allowed-to-work\">problematic</a>. Simplifying your code as much as possible for the point, the following does not build:</p>\n\n<pre><code>class foo{};\n\nfoo *operator+(foo *, int) {\n    return nullptr;\n}\n\nint main() {}\n</code></pre>\n\n<p>The attempt gives:</p>\n\n<pre><code>$ g++ gl.cpp \ngl.cpp:5:26: error: \u2018foo* operator+(foo*, int)\u2019 must have an argument of class or enumerated type\n foo *operator+(foo *, int) {\n</code></pre>\n\n<hr>\n\n<p>If you really want to use <code>operator+</code>, the simplest way might be to use the member operator form:</p>\n\n<pre><code>template&lt;class T&gt;\nclass List {\n    class ListNode {        ...\n    public:\n        ListNode &amp;operator+(int n) {\n            ListNode *current = this;\n\n            while (n--)\n               if (current-&gt;next != 0)\n                   current = current-&gt;next;\n\n           return *current;\n        }\n    };\n    ...\n};\n</code></pre>\n\n<p>However, this is a bit misleading, as you're not actually adding an integer to the node, but rather getting a next node. A <code>next</code> method is probably clearer:</p>\n\n<pre><code>template&lt;class T&gt;\nclass List {\n    class ListNode {        ...\n    public:\n        ListNode *next(int n) {\n            ListNode *current = this;\n\n            while (n--)\n                if (current-&gt;next != 0)\n                   current = current-&gt;next;\n\n            return current;\n        }\n    };\n    ...\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "edited": false, "score": 0, "creation_date": 1475329115, "post_id": 39796127, "comment_id": 66905878, "body": "Good use of iterators!"}, {"owner": {"reputation": 147, "user_id": 6842458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6cad0cb02fd8728f8128441d1e6ed67?s=128&d=identicon&r=PG&f=1", "display_name": "John Q.", "link": "https://stackoverflow.com/users/6842458/john-q"}, "reply_to_user": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "edited": false, "score": 0, "creation_date": 1475420311, "post_id": 39796127, "comment_id": 66926596, "body": "@AmiTavory Thanks!"}], "tags": [], "owner": {"reputation": 147, "user_id": 6842458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6cad0cb02fd8728f8128441d1e6ed67?s=128&d=identicon&r=PG&f=1", "display_name": "John Q.", "link": "https://stackoverflow.com/users/6842458/john-q"}, "is_accepted": false, "score": 1, "last_activity_date": 1475282981, "last_edit_date": 1475282981, "creation_date": 1475253133, "answer_id": 39796127, "question_id": 39755990, "link": "https://stackoverflow.com/questions/39755990/addition-operator-overload-for-pointers-to-nested-classes/39796127#39796127", "title": "Addition operator overload for pointers to nested classes", "body": "<p>As already stated, overloading operators on pointers is problematic, and again, the easiest thing to do would be make <code>operator+</code> a member function. However, there is a way to get the behavior you want...</p>\n\n<p>The trick is to wrap the pointer in an object that acts like a pointer (commonly known as an <a href=\"https://en.wikipedia.org/wiki/Iterator_pattern\" rel=\"nofollow\">iterator</a>).</p>\n\n<p>A working example to demonstrate:</p>\n\n<pre><code>class List {\n    struct Node {\n        Node* next; int data;\n    };\n    Node* m_head{0};\n\npublic:\n    // the fake pointer type.\n    struct Iter {\n        Iter(Node* initial = 0)\n            : m_base(initial) {}\n        Node* operator-&gt;()\n        { return m_base; }\n        bool operator!=(const Iter&amp; other) const\n        { return m_base != other.m_base; }\n    private:\n        Node* m_base;\n    };\n\n    // get head as fake pointer.\n    Iter head()\n    { return m_head; }\n    void push_front(const int&amp;);\n};\n\nvoid List::push_front(const int&amp; x)\n{\n    Node* n = new Node;\n    n-&gt;data = x;\n    n-&gt;next = m_head; m_head = n;\n}\n\n// non-member operator.\nList::Iter operator+(List::Iter i, int count)\n{\n    for ( ; count &gt; 0 &amp;&amp; i != 0; count-- )\n        i = i-&gt;next;\n    return i;\n}\n\nint main(int argc, char* argv[])\n{\n    List list;\n    for ( int i = 0; i &lt; 10; i++ )\n        list.push_front(i);\n    for ( auto i = list.head(); i != 0; i = i+1 )\n        std::cout &lt;&lt; i-&gt;data &lt;&lt; ' ';\n    std::cout &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>For a more advanced example see <a href=\"https://ideone.com/a9Nsmj\" rel=\"nofollow\">here</a>.</p>\n"}], "owner": {"reputation": 29, "user_id": 5438325, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/10204875732004291/picture?type=large", "display_name": "Daryl Drake", "link": "https://stackoverflow.com/users/5438325/daryl-drake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1475282981, "creation_date": 1475090554, "last_edit_date": 1475125985, "question_id": 39755990, "link": "https://stackoverflow.com/questions/39755990/addition-operator-overload-for-pointers-to-nested-classes", "title": "Addition operator overload for pointers to nested classes", "body": "<p>I am working on a linked list class which contains a private nested node class. I want to advance n nodes forward in my list by using the overloaded addition operator but clang is giving me the error \"overloaded 'operator+' must be a unary or binary operator (has 3 parameters)\". I thought that the implicit this parameter disappeared when you declared it as a friend function.</p>\n\n<p>First is my header file </p>\n\n<pre><code> template &lt;class T&gt;\n class List\n    {\n\n  private:\n\n    class ListNode\n    {\n      public:\n\n        ListNode();\n\n\n        ListNode(const T&amp; ndata);\n\n\n        friend ListNode* operator+(const ListNode* &amp;node, int n);\n\n        ListNode* next;\n\n        ListNode* prev;\n\n    };\n\n  public:\n    friend ListNode* operator+(const ListNode* &amp;node, int n);\n</code></pre>\n\n<p>and my implementation is as follows: </p>\n\n<pre><code>template &lt;class T&gt;\ntypename List&lt;T&gt;::ListNode* List&lt;T&gt;::ListNode::operator+(const ListNode* &amp;node, int n)\n{\n    ListNode* current = node;\n\n    while (n--){\n        if (current-&gt;next != 0)\n            current = current-&gt;next;\n    }\n    return current;\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "voip", "qtgstreamer"], "comments": [{"owner": {"reputation": 472, "user_id": 3851006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f68bf53950797ca3c72546f1158f414?s=128&d=identicon&r=PG&f=1", "display_name": "Sean Kuhlman", "link": "https://stackoverflow.com/users/3851006/sean-kuhlman"}, "edited": false, "score": 1, "creation_date": 1475094776, "post_id": 39755921, "comment_id": 66810204, "body": "Check out the README in the root directory of the download. Section 2.1 has a list of dependencies required to use the package. Once you have all of that installed try the build procedure in 2.3. Once that is working try the examples per 2.7. If you have errors then, post a new question with the specific error messages you&#39;re getting."}, {"owner": {"reputation": 868, "user_id": 6997733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d07112547a85bc1d739c6c612bceda0c?s=128&d=identicon&r=PG", "display_name": "user7179690", "link": "https://stackoverflow.com/users/6997733/user7179690"}, "reply_to_user": {"reputation": 472, "user_id": 3851006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f68bf53950797ca3c72546f1158f414?s=128&d=identicon&r=PG&f=1", "display_name": "Sean Kuhlman", "link": "https://stackoverflow.com/users/3851006/sean-kuhlman"}, "edited": false, "score": 0, "creation_date": 1475095894, "post_id": 39755921, "comment_id": 66810854, "body": "i follow this and download all Dependencies  but The same problem Qt5GStreamer-1.0 development package not found"}, {"owner": {"reputation": 868, "user_id": 6997733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d07112547a85bc1d739c6c612bceda0c?s=128&d=identicon&r=PG", "display_name": "user7179690", "link": "https://stackoverflow.com/users/6997733/user7179690"}, "reply_to_user": {"reputation": 472, "user_id": 3851006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f68bf53950797ca3c72546f1158f414?s=128&d=identicon&r=PG&f=1", "display_name": "Sean Kuhlman", "link": "https://stackoverflow.com/users/3851006/sean-kuhlman"}, "edited": false, "score": 0, "creation_date": 1475096041, "post_id": 39755921, "comment_id": 66810921, "body": "i add this to .pro file INCLUDEPATH += C:/boost_1_61_0 &amp;&amp; LIBS += &quot;-LC:/boost_1_61_0/stage/lib&quot; &amp;&amp; INCLUDEPATH += C:/gstreamer/1.0/x86_64/include"}, {"owner": {"reputation": 472, "user_id": 3851006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f68bf53950797ca3c72546f1158f414?s=128&d=identicon&r=PG&f=1", "display_name": "Sean Kuhlman", "link": "https://stackoverflow.com/users/3851006/sean-kuhlman"}, "edited": false, "score": 0, "creation_date": 1475096213, "post_id": 39755921, "comment_id": 66811001, "body": "I don&#39;t believe that you did the build procedure in 2.3."}, {"owner": {"reputation": 868, "user_id": 6997733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d07112547a85bc1d739c6c612bceda0c?s=128&d=identicon&r=PG", "display_name": "user7179690", "link": "https://stackoverflow.com/users/6997733/user7179690"}, "reply_to_user": {"reputation": 472, "user_id": 3851006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f68bf53950797ca3c72546f1158f414?s=128&d=identicon&r=PG&f=1", "display_name": "Sean Kuhlman", "link": "https://stackoverflow.com/users/3851006/sean-kuhlman"}, "edited": false, "score": 0, "creation_date": 1475096688, "post_id": 39755921, "comment_id": 66811249, "body": "what the path he mean in this line cmake .. -DCMAKE_INSTALL_PREFIX=/path/to/installation/prefix ? the src or the example or what ?"}, {"owner": {"reputation": 868, "user_id": 6997733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d07112547a85bc1d739c6c612bceda0c?s=128&d=identicon&r=PG", "display_name": "user7179690", "link": "https://stackoverflow.com/users/6997733/user7179690"}, "reply_to_user": {"reputation": 472, "user_id": 3851006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f68bf53950797ca3c72546f1158f414?s=128&d=identicon&r=PG&f=1", "display_name": "Sean Kuhlman", "link": "https://stackoverflow.com/users/3851006/sean-kuhlman"}, "edited": false, "score": 0, "creation_date": 1475096862, "post_id": 39755921, "comment_id": 66811348, "body": "i try this in the example folder and i get  <a href=\"https://s14.postimg.org/mume718sx/Capture.png\" rel=\"nofollow noreferrer\">s14.postimg.org/mume718sx/Capture.png</a>"}], "owner": {"reputation": 868, "user_id": 6997733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d07112547a85bc1d739c6c612bceda0c?s=128&d=identicon&r=PG", "display_name": "user7179690", "link": "https://stackoverflow.com/users/6997733/user7179690"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 592, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1475933778, "creation_date": 1475090265, "last_edit_date": 1475933778, "question_id": 39755921, "link": "https://stackoverflow.com/questions/39755921/bind-qt-with-qtgstreamer", "title": "Bind Qt with QtGStreamer", "body": "<p>I am trying to make a simple qt c++ VoIP application, when I searched I found the QtGStreamer Lib and wanted to make it work. I download the latest version 1.2 from <a href=\"https://gstreamer.freedesktop.org/src/qt-gstreamer/\" rel=\"nofollow\">here</a>.<br>When I went to the example folder and tried to compile the VoIP example I got this error: <br>\n<code>Qt5GStreamer-1.0 development package not found</code><br></p>\n\n<p>What I try is comment this line <code>CONFIG += link_pkgconfig</code> in .pro file and add the src folder that came with the folder of QtGstreamer to folder project. I also added this to .pro file <br> <code>INCLUDEPATH += $$PWD/src</code> this the path of the Libs folder<br></p>\n\n<p>Now I get an error that i need to add boost Lib so I add it by adding this to .pro file <br> </p>\n\n<pre><code>INCLUDEPATH += C:/boost_1_61_0\nLIBS += \"-LC:/boost_1_61_0/stage/lib\"\n</code></pre>\n\n<p>Now I get many errors that say (undefined reference to ..) 130 error. Not sure what to try. <br>\nthe file comes with containing Readme file I download the dependency but the same error I think the problem that I don't link it correctly <br>I'm still a beginner in 3rd party and link libs in c++,<br>\nmy os is windows\nThanks in advance</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1475090144, "post_id": 39755872, "comment_id": 66807693, "body": "You need to read the input as a string and parse it to make sure it is valid."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1475090730, "post_id": 39755872, "comment_id": 66807954, "body": "Dat <i>&quot;worstest&quot;</i>  / <i>&quot;bestest&quot;</i> language :/"}, {"owner": {"reputation": 11, "user_id": 6436763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cef7f03338ec5c50fa78214be0d72246?s=128&d=identicon&r=PG&f=1", "display_name": "ProgrammingKid33", "link": "https://stackoverflow.com/users/6436763/programmingkid33"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1475090856, "post_id": 39755872, "comment_id": 66807998, "body": "@NathanOliver Can you show me an example? I&#39;m new to this language."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1475091083, "post_id": 39755872, "comment_id": 66808110, "body": "@ProgrammingKid33 Here are some hints: <a href=\"http://stackoverflow.com/questions/24504582/how-to-test-whether-stringstream-operator-has-parsed-a-bad-type-and-skip-it\" title=\"how to test whether stringstream operator has parsed a bad type and skip it\">stackoverflow.com/questions/24504582/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 491, "user_id": 5447209, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--8IGIth8-YM/AAAAAAAAAAI/AAAAAAAAAIQ/pVr6l_vI1hk/photo.jpg?sz=128", "display_name": "Jvinniec", "link": "https://stackoverflow.com/users/5447209/jvinniec"}, "edited": false, "score": 0, "creation_date": 1475094952, "post_id": 39756981, "comment_id": 66810314, "body": "Note that if this is a homework assignment, there may be parts of this answer which you havent covered in class yet, so if you use them you may get lower marks."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1475096192, "post_id": 39756981, "comment_id": 66810988, "body": "If a teacher penalizes you for reading ahead in the material, grin and bear it and never do it in that class again, but quietly give the teacher the finger behind their back and make sure their craptastic education style is burned to the ground as soon as you&#39;ve managed to get away with a good mark. The sooner we can get idiots like that out of the profession, the better."}], "tags": [], "owner": {"reputation": 491, "user_id": 5447209, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--8IGIth8-YM/AAAAAAAAAAI/AAAAAAAAAIQ/pVr6l_vI1hk/photo.jpg?sz=128", "display_name": "Jvinniec", "link": "https://stackoverflow.com/users/5447209/jvinniec"}, "is_accepted": false, "score": 0, "last_activity_date": 1475094175, "creation_date": 1475094175, "answer_id": 39756981, "question_id": 39755872, "link": "https://stackoverflow.com/questions/39755872/error-handling-doubles-with-strings-in-c/39756981#39756981", "title": "Error handling doubles with strings in C++", "body": "<p><strong>Note:</strong> Based on your tags, I'm going to assume that you are using c++11. If not this answer wont work.</p>\n\n<p>Using what you already have, try the following method to get the user input:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;limits&gt;\n#include &lt;stdexcept&gt;\n\ndouble getValidInput()\n{\n    // Some variables for controlling how this works\n    std::string user_input ;    // Used to store input\n    bool bad_input(true) ;      // Set to true when the input is good\n    double value(0.0) ;         // Value that will be returned\n    size_t pos(0) ;             // Tells us when all of user_input was useable\n\n    cout &lt;&lt; \"Please enter a score: \" &lt;&lt; flush ;\n    cin &gt;&gt; user_input;\n\n    // Now do the thing\n    while (bad_input) {\n\n        try {\n            // Note that this may return an invalid string-&gt;double conversion\n            value = std::stod(user_input, &amp;pos) ;\n        } catch (std::invalid_argument &amp; err) {\n            // The input isnt a number that can be converted\n            // to a double\n            pos = 0 ;\n        }\n\n        // If the entire string was converted then all is good!\n        if (pos == user_input.size()){\n            bad_input = false ;\n        } else {\n            cout&lt;&lt;\"Error, that's not a decimal number. Please reenter: \";\n            std::cin.ignore(numeric_limits&lt;streamsize&gt;::max(), '\\n' );\n            cin &gt;&gt; user_input ;\n        }\n    }\n\n    return value ;\n}\n</code></pre>\n\n<p>Ok, so what does all of this do? Lets start with</p>\n\n<pre><code>    try {\n        // Note that this may return an invalid string-&gt;double conversion\n        value = std::stod(user_input, &amp;pos) ;\n    } catch (std::invalid_argument &amp; err) {\n        // The input isnt a number that can be converted\n        // to a double\n        pos = 0 ;\n    }\n</code></pre>\n\n<p>The user provides you with a string and you want to get a number from it (I'm assuming of type <code>double</code>). The above code is going to <code>try</code> to convert the user's input from a <code>string</code> to a <code>double</code> using <code>std::stod()</code>. Note that we also pass another variable <code>pos</code> which stores the length of the string that was able to be converted to a double. </p>\n\n<p>Lets check your inputs:</p>\n\n<ul>\n<li>In the case of your first input <code>jkl</code> a straight conversion to <code>double</code> cant be done. As a result <code>std::stod</code> throws an exception of type <code>std::invalid_argument</code>. The code catches that and sets pos=0. The following if statement notes that the length of the input string is longer than pos, so not all of the input was able to be converted, and the user has to try again.</li>\n<li>In the case of your second input, <code>4k</code>, <code>std::stod</code> <em>can</em> convert the string to a double <em>up to</em> the k, but at that point it stops. No exception is thrown, but pos is now one character smaller than the string, and again the user has to try again.</li>\n</ul>\n\n<p>Now, you would insert this into your for-loop like so:</p>\n\n<pre><code>for (int i = 0; i &lt; students; i++)\n{\n    array[i] = getValidInput() ;\n}\n</code></pre>\n\n<p>Hope that helps!</p>\n"}], "owner": {"reputation": 11, "user_id": 6436763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cef7f03338ec5c50fa78214be0d72246?s=128&d=identicon&r=PG&f=1", "display_name": "ProgrammingKid33", "link": "https://stackoverflow.com/users/6436763/programmingkid33"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 842, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1475094175, "creation_date": 1475090067, "question_id": 39755872, "link": "https://stackoverflow.com/questions/39755872/error-handling-doubles-with-strings-in-c", "title": "Error handling doubles with strings in C++", "body": "<p>My assignment is to take test grades of students in a class room and return the highest, lowest, and the average. I am currently debugging for error that could be entered by the user. I have successfully fixed issues when the user inputs characters for the decimal test score values. What I'm having trouble with is if the user inputs \"4k\" the program excepts the 4 as a valid input but still gives the error when the program shouldn't approve the score as a valid input but should error and prompt for only numeral values.</p>\n\n<p>I'll provide an output example</p>\n\n<p>heres the code segment:</p>\n\n<pre><code>for (int i = 0; i &lt; students; i++)\n      {\n\n        cout &lt;&lt; \"Please enter a score: \" &lt;&lt; flush;\n        cin &gt;&gt; array[i];\n        do{\n\n          if(cin.fail())\n          {\n            cin.clear();\n            cout&lt;&lt;\"Error, that's not a decimal number. Please reenter: \";\n            std::cin.ignore(numeric_limits&lt;streamsize&gt;::max(), '\\n' );\n            cin &gt;&gt; array[i];\n          }\n        }while(cin.fail());\n\n      }\n</code></pre>\n\n<p>Sample output error::</p>\n\n<pre><code>How many students are in class? 3\nPlease enter 3 scores\n - - - - - - - - - - -\nPlease enter a score: jkl\nError, that's not a decimal number. Please reenter: jkl\nError, that's not a decimal number. Please reenter: 4k\nPlease enter a score: Error, that's not a decimal number. Please reenter: 0\nPlease enter a score: 3\n4\n0\n3\nThe worstest score in the class is: 0\nThe bestest score in the class is: 4\nThe average score is: 2.33333\n</code></pre>\n"}, {"tags": ["c++", "string", "widechar", "widestring"], "comments": [{"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1475089922, "post_id": 39755783, "comment_id": 66807617, "body": "How to convert narrow to wide, depends on the narrow encoding. But since wide in practice is some Unicode encoding, and since Unicode is a superset of Latin-1 which is a superset of ASCII, if the narrow encoding is either ASCII or Latin-1 then you can just widen each code point."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1475089950, "post_id": 39755783, "comment_id": 66807632, "body": "Note that the name <code>STR16</code> is platform-dependent: it&#39;s true in Windows, but mostly not elsewhere."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1475090050, "post_id": 39755783, "comment_id": 66807664, "body": "Looks like you need something like <a href=\"http://stackoverflow.com/questions/30409350/convert-const-char-to-const-wchar-t\">this</a>"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 3, "creation_date": 1475090163, "post_id": 39755783, "comment_id": 66807704, "body": "Have you filed an issue on GitHub for this? If not, you probably should."}, {"owner": {"reputation": 28647, "user_id": 1422096, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/da3871bf5450fa726f20557fa3f18f51?s=128&d=identicon&r=PG", "display_name": "Basj", "link": "https://stackoverflow.com/users/1422096/basj"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1475091253, "post_id": 39755783, "comment_id": 66808207, "body": "@MadPhysicist I just did: <a href=\"https://github.com/olilarkin/wdl-ol/issues/61\" rel=\"nofollow noreferrer\">STR16 issue in IPlugVST3.cpp</a>."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 1, "creation_date": 1475159404, "post_id": 39755783, "comment_id": 66840498, "body": "If you get an answer here first, you can submit a patch to the library. If the library gets fixed first, let us know how by answering your own question. Either way, good work."}], "owner": {"reputation": 28647, "user_id": 1422096, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/da3871bf5450fa726f20557fa3f18f51?s=128&d=identicon&r=PG", "display_name": "Basj", "link": "https://stackoverflow.com/users/1422096/basj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 128, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1475090711, "creation_date": 1475089764, "question_id": 39755783, "link": "https://stackoverflow.com/questions/39755783/adding-l-to-a-string-literal-works-to-make-it-wide-string-but-not-to-a-variab", "title": "Adding &quot;L&quot; to a string literal works to make it wide string, but not to a variable", "body": "<p>The macro <code>#define STR16(x) L ## x</code> works when applied to string literals:</p>\n\n<pre><code>STR16(\"Hello\")     // fine, this is translated to L\"Hello\"\n</code></pre>\n\n<p>but not to variables:</p>\n\n<pre><code>STR16(x)     // fails, this is translated to Lx, and the variable Lx doesn't exist\n</code></pre>\n\n<p>In <a href=\"https://github.com/olilarkin/wdl-ol/blob/0c4ed2b854f71bdbb324feded5176ab2a57d3be6/WDL/IPlug/IPlugVST3.cpp#L200\" rel=\"nofollow\">line 200 of this useful library</a>, there is a bug:</p>\n\n<pre><code>Parameter* param = new RangeParameter( STR16(p-&gt;GetNameForHost()), ...\n</code></pre>\n\n<p>will be translated to </p>\n\n<pre><code>Parameter* param = new RangeParameter( Lp-&gt;GetNameForHost(), ...\n</code></pre>\n\n<p>which fails, because <code>Lp</code> is an undeclared identifier.</p>\n\n<p><strong>How to do the same than adding <code>L</code> to a string literal, to a string variable <code>const char *</code> ?</strong></p>\n"}, {"tags": ["c++", "getline"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1475089595, "post_id": 39755713, "comment_id": 66807497, "body": "Like <code>while(read_string(string_var)) { function(string_var); }</code>?"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1475089668, "post_id": 39755713, "comment_id": 66807530, "body": "Argument to what? Free function taking no other arguments? Method call taking no other arguments? Function or method call taking several other arguments as follows (give precise details of what and when)? Command line utility? Something else?"}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1475089688, "post_id": 39755713, "comment_id": 66807535, "body": "Welcome to Stack Overflow! Can you please post your trials and errors in a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>? We can&#39;t help much without providing further information &#175;\\_(\u30c4)_/&#175;"}, {"owner": {"reputation": 3, "user_id": 6895620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4cc8dbb9470c981928e64f830a2830d?s=128&d=identicon&r=PG&f=1", "display_name": "Chris White", "link": "https://stackoverflow.com/users/6895620/chris-white"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 1, "creation_date": 1475090020, "post_id": 39755713, "comment_id": 66807656, "body": "@FirstStep thank you for the recommendation I updated my original post with the method I&#39;m targeting."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1475091300, "post_id": 39755713, "comment_id": 66808228, "body": "<code>CreateToolhelp32Snapshot</code> is quite expensive, and so is looping over all the processes in a snapshot.  You should read your file into a <code>std::unordered_set&lt;std::string&gt;</code>, and then loop over all the processes <i>once</i> and see if any of their executables matches <i>any</i> of the names in the set.  That will be much more efficient, particularly when the list of programs to kill is long."}], "answers": [{"tags": [], "owner": {"reputation": 93, "user_id": 5655323, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IOwCq.jpg?s=128&g=1", "display_name": "Daniel Biegler", "link": "https://stackoverflow.com/users/5655323/daniel-biegler"}, "is_accepted": true, "score": 0, "last_activity_date": 1475097397, "creation_date": 1475097397, "answer_id": 39757808, "question_id": 39755713, "link": "https://stackoverflow.com/questions/39755713/c-feeding-strings-from-a-text-document-as-arguments/39757808#39757808", "title": "C++ Feeding strings from a text document as arguments", "body": "<pre><code>#include &lt;iostream&gt; // std::cout, std::endl\n#include &lt;fstream&gt;  // std::ifstream\nusing namespace std;\nint main()\n{\n    // open your file\n    ifstream input_file(\"test.txt\");\n\n    // create variables\n    string name;\n\n    // while there are entries\n    while(input_file &gt;&gt; name)\n    {\n        killProcessByName(name.c_str());\n    }\n\n   // close the file\n   input_file.close();\n\n   return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 6895620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4cc8dbb9470c981928e64f830a2830d?s=128&d=identicon&r=PG&f=1", "display_name": "Chris White", "link": "https://stackoverflow.com/users/6895620/chris-white"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 39757808, "answer_count": 1, "score": -1, "last_activity_date": 1475097397, "creation_date": 1475089510, "last_edit_date": 1475089867, "question_id": 39755713, "link": "https://stackoverflow.com/questions/39755713/c-feeding-strings-from-a-text-document-as-arguments", "title": "C++ Feeding strings from a text document as arguments", "body": "<p>Is there a way to feed strings from a text document directly as arguments? Preferably without saving them?</p>\n\n<p>I have a killProcessByName method that is expecting an argument so I was wondering if it is possible to read the first line from my text document, copy it then send it as an argument? Then move on to the next line, preform the same thing and repeat the process until there are no words left in the document?</p>\n\n<p>Example of my list:</p>\n\n<pre><code>Apples.exe\nBlueberries.exe\nWatermelon.exe\nOranges.exe\n...\n</code></pre>\n\n<p>The method I'm targeting</p>\n\n<pre><code>void killProcessByName(const char *filename)\n{\n    HANDLE hSnapShot = CreateToolhelp32Snapshot(TH32CS_SNAPALL, NULL);\n    PROCESSENTRY32 pEntry;\n    pEntry.dwSize = sizeof (pEntry);\n    BOOL hRes = Process32First(hSnapShot, &amp;pEntry);\n    while (hRes)\n    {\n        if (strcasecmp(pEntry.szExeFile, filename) == 0)\n        {\n            HANDLE hProcess = OpenProcess(PROCESS_TERMINATE, 0,\n                                          (DWORD) pEntry.th32ProcessID);\n            if (hProcess != NULL)\n            {\n                TerminateProcess(hProcess, 9);\n                CloseHandle(hProcess);\n            }\n        }\n        hRes = Process32Next(hSnapShot, &amp;pEntry);\n    }\n    CloseHandle(hSnapShot);\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "inheritance"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1475088765, "post_id": 39755492, "comment_id": 66807055, "body": "Most likely there is a typo in <code>Node.h</code> or <code>QueueInterface.h</code>."}, {"owner": {"reputation": 44, "user_id": 5569380, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/38f2f4b49f66c6a75bfc8ed44afd6936?s=128&d=identicon&r=PG&f=1", "display_name": "pyro97", "link": "https://stackoverflow.com/users/5569380/pyro97"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1475088819, "post_id": 39755492, "comment_id": 66807084, "body": "There isn&#39;t. I checked. Also why would a typo in <code>Node.h</code> throw that error"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1475088886, "post_id": 39755492, "comment_id": 66807121, "body": "This is going to be a guess fest without knowing the content of the other files. Can you reduce them all as much as possible while still getting the error? TIA (P.S: my money is on a missing ; at the end of a class declaration)"}, {"owner": {"reputation": 44, "user_id": 5569380, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/38f2f4b49f66c6a75bfc8ed44afd6936?s=128&d=identicon&r=PG&f=1", "display_name": "pyro97", "link": "https://stackoverflow.com/users/5569380/pyro97"}, "edited": false, "score": 0, "creation_date": 1475089183, "post_id": 39755492, "comment_id": 66807292, "body": "Thing is I&#39;ve tried thinning down the interface class as much as possible. Like even with no method declarations in it, the compiler still throws the error. No missing ; at the end of class either..."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1475089185, "post_id": 39755492, "comment_id": 66807293, "body": "@pyro97 Because it is the last include file.  If there is a typo in it then it comes into this file."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1475089201, "post_id": 39755492, "comment_id": 66807304, "body": "Can you show <code>QueueInterface.h</code>?"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 2, "creation_date": 1475089304, "post_id": 39755492, "comment_id": 66807351, "body": "My guess here is circular inclusion. But that&#39;s a guess. If you don&#39;t want us to guess, give us a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> that we could test easily and reproduce your error."}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1475089517, "post_id": 39755492, "comment_id": 66807447, "body": "P.S: IME header guards usually go before the includes, not after."}], "answers": [{"tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": false, "score": 1, "last_activity_date": 1475090319, "creation_date": 1475090319, "answer_id": 39755933, "question_id": 39755492, "link": "https://stackoverflow.com/questions/39755492/error-when-extending-a-template-abstract-class/39755933#39755933", "title": "Error when extending a template abstract class", "body": "<p><code>QueueInterface</code> is not a class. You can inherit from something that is not a struct or a class. This thing is what is called a <em>templated class</em>. You can recognize templates with the <code>template&lt;...&gt;</code> just before the templated class. You must specify a type so the compiler can create a class of that type.</p>\n\n<p>In your case, you are trying to create a struct that is also a template. By looking at the overrides of the methods of your base classes, I guess you are trying to do this:</p>\n\n<pre><code>template&lt;typename T&gt;\nstruct Queue : QueueInterface&lt;T&gt; { \n    //   notice that there ---^--- you are sending the required parameter\n\n    // defaulted members are good.\n    Queue() = default;\n\n    // override too.\n    bool isEmpty() const override;\n    void enqueue(const T value) override;\n    void dequeue() throw(PreconditionViolationException) override;\n    T peekFront() const throw(PreconditionViolationException) override;\n\nprivate:\n    Node&lt;T&gt;* front;\n    Node&lt;T&gt;* back;\n};\n</code></pre>\n"}], "owner": {"reputation": 44, "user_id": 5569380, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/38f2f4b49f66c6a75bfc8ed44afd6936?s=128&d=identicon&r=PG&f=1", "display_name": "pyro97", "link": "https://stackoverflow.com/users/5569380/pyro97"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1475090488, "creation_date": 1475088703, "last_edit_date": 1475090488, "question_id": 39755492, "link": "https://stackoverflow.com/questions/39755492/error-when-extending-a-template-abstract-class", "title": "Error when extending a template abstract class", "body": "<p>I have this code for a Node based Queue implementation and I'm supposed to extends an abstract class called QueueInterface.</p>\n\n<pre><code>template&lt;typename T&gt;\nstruct QueueInterface {\n    public:\n    virtual ~QueueInterface(){};\n    virtual bool isEmpty() const = 0;\n    virtual void enqueue(const T value) = 0;\n    virtual void dequeue() throw(PreconditionViolationException) = 0;\n    virtual T peekFront() const throw(PreconditionViolationException) = 0;\n};    \n\ntemplate&lt;typename T&gt;\nstruct Queue : QueueInterface {\n    Queue();\n    ~Queue();\n    bool isEmpty() const;\n    void enqueue(const T value);\n    void dequeue() throw(PreconditionViolationException);\n    T peekFront() const throw(PreconditionViolationException);\n\nprivate:\n    Node&lt;T&gt;* front;\n    Node&lt;T&gt;* back;\n};\n</code></pre>\n\n<p>I keep getting a <code>expected class name before '{' token</code> error even though I included the QueueInterface header file. Why is this happening?</p>\n"}, {"tags": ["c++", "binary"], "comments": [{"owner": {"reputation": 442, "user_id": 6240151, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/879a60dac8aa295273729f5d806f2a38?s=128&d=identicon&r=PG&f=1", "display_name": "GpG", "link": "https://stackoverflow.com/users/6240151/gpg"}, "edited": false, "score": 0, "creation_date": 1475089109, "post_id": 39755436, "comment_id": 66807247, "body": "why is this needed: if (!file) .... ?"}, {"owner": {"reputation": 442, "user_id": 6240151, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/879a60dac8aa295273729f5d806f2a38?s=128&d=identicon&r=PG&f=1", "display_name": "GpG", "link": "https://stackoverflow.com/users/6240151/gpg"}, "edited": false, "score": 0, "creation_date": 1475089170, "post_id": 39755436, "comment_id": 66807283, "body": "I think you should write a unit test and check if this two functions are really the cause of the problem."}, {"owner": {"reputation": 131, "user_id": 3769000, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/4f076ba68ff515ee3b60fa707636ed54?s=128&d=identicon&r=PG&f=1", "display_name": "user3769000", "link": "https://stackoverflow.com/users/3769000/user3769000"}, "reply_to_user": {"reputation": 442, "user_id": 6240151, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/879a60dac8aa295273729f5d806f2a38?s=128&d=identicon&r=PG&f=1", "display_name": "GpG", "link": "https://stackoverflow.com/users/6240151/gpg"}, "edited": false, "score": 0, "creation_date": 1475091722, "post_id": 39755436, "comment_id": 66808459, "body": "the if(!file) was added as one try to get rid of the problem if it had to do with the opening of the file. I can&#39;t find the reference to the thread were it was recommended, but more or less it should clear any flags in file and then try top open again."}], "answers": [{"tags": [], "owner": {"reputation": 131, "user_id": 3769000, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/4f076ba68ff515ee3b60fa707636ed54?s=128&d=identicon&r=PG&f=1", "display_name": "user3769000", "link": "https://stackoverflow.com/users/3769000/user3769000"}, "is_accepted": true, "score": 0, "last_activity_date": 1475529870, "creation_date": 1475529870, "answer_id": 39840643, "question_id": 39755436, "link": "https://stackoverflow.com/questions/39755436/open-save-to-binary-file-in-c-fails-intermittently/39840643#39840643", "title": "open/save to binary file in c++ fails intermittently", "body": "<p>You were correct. The error was found in another part of the program. When I started logging different things in the code.</p>\n\n<p>More or less different mechanism instantiate the program and it happened to happen at the same time causing the file to be manipulated by to instances at the same time.</p>\n"}], "owner": {"reputation": 131, "user_id": 3769000, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/4f076ba68ff515ee3b60fa707636ed54?s=128&d=identicon&r=PG&f=1", "display_name": "user3769000", "link": "https://stackoverflow.com/users/3769000/user3769000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 39840643, "answer_count": 1, "score": -1, "last_activity_date": 1475529870, "creation_date": 1475088493, "question_id": 39755436, "link": "https://stackoverflow.com/questions/39755436/open-save-to-binary-file-in-c-fails-intermittently", "title": "open/save to binary file in c++ fails intermittently", "body": "<p>I've been staring at this to long...</p>\n\n<p>I have made a program that logs weather data from different sensors. It handles the data in a double linkedlist and saves it to a binary file. To store different \"compressions\" of the data different files are used. e.g no compression, hours, days, etc.</p>\n\n<p>The main program first loads the content of the correct file (defined by the WeatherSeries constructor) and adds all content from the file into the linkedlist. Then adds the new element and then saves it all. It adds to the list from oldest to newest and in the file it is also saved so the newest record is the last to be added to the file.</p>\n\n<p>The error that occurs is that it seems that I lose a couple of hours of recorded data. I have observed that the data have existed. I.e. seen that there were data recorded between e.g. 9PM and 10PM and then in the morning after this data is gone.</p>\n\n<p>The weird thing is the following:</p>\n\n<ul>\n<li><p>Error only occurs intermittent and only for the barometric sensor that delivers values with 6 digits compared to the humidity and temperature sensors which delivers values with four digits. </p></li>\n<li><p>It has only happened to the \"no compression\" and never for any of the other compressions. This means that the program that retrieves the data from the sensors works. Also it means that the function that adds data to the double linkedlist works.</p></li>\n</ul>\n\n<p>Left is the functions that opens and saves the data to the files.</p>\n\n<p>Can you please see if you can find any errors in my code? </p>\n\n<pre><code>    void weatherSeries::saveSeries()\n    {\n    ostringstream s;\n    s &lt;&lt; \"WLData/\" &lt;&lt; mSensorNbr &lt;&lt; \"_\" &lt;&lt; mSensorType &lt;&lt; \"_\" &lt;&lt; mTimeBase &lt;&lt; \".dat\";\n\n    ofstream file(s.str().c_str(), ios::out | ios::trunc | ios::binary);\n\n    if (!file)\n    {\n      file.clear();\n      file.open(s.str().c_str(), ios::out | ios::trunc | ios::binary);\n    }\n\n    if(file.is_open())\n    {\n        for (current = tail; current != NULL; current = current-&gt;prev)\n        {\n           file.write((char*)&amp;current-&gt;time_stamp, sizeof(time_t));\n           file.write((char*)&amp;current-&gt;val_avg, sizeof(double));\n           file.write((char*)&amp;current-&gt;min, sizeof(double));\n           file.write((char*)&amp;current-&gt;max, sizeof(double));\n           file.write((char*)&amp;current-&gt;nbrOfValues, sizeof(unsigned long int));\n        }\n    }\n    else\n    {\n        cerr &lt;&lt; \"Unable to open for saving to \" &lt;&lt; mSensorNbr &lt;&lt; \"_\" &lt;&lt; mSensorType &lt;&lt; \"_\" &lt;&lt; mTimeBase &lt;&lt; \".dat\";\n    }\n\n    file.close();\n}\n\n\nvoid weatherSeries::openSeries()\n{\n    deleteAll();\n\n    ostringstream s;\n    s &lt;&lt; \"WLData/\" &lt;&lt; mSensorNbr &lt;&lt; \"_\" &lt;&lt; mSensorType &lt;&lt; \"_\" &lt;&lt; mTimeBase &lt;&lt; \".dat\";\n\n    ifstream file(s.str().c_str(), ios::in | ios::binary);\n\n    if (!file)\n    {\n        file.clear();\n        file.open(s.str().c_str(), ios::in | ios::binary);\n    }\n\n    if(file.is_open())\n    {\n        time_t tmp_TS = 0;\n        double tmp_val_avg = 0;\n        double tmp_min = 0;\n        double tmp_max = 0;\n        unsigned long int tmp_nbrOfValues = 0;\n        while (file.read((char*)&amp;tmp_TS, sizeof(time_t)))\n        {\n            file.read((char*)&amp;tmp_val_avg, sizeof(double));\n            file.read((char*)&amp;tmp_min, sizeof(double));\n            file.read((char*)&amp;tmp_max, sizeof(double));\n            file.read((char*)&amp;tmp_nbrOfValues, sizeof(unsigned long int));\n            addToSeries(tmp_TS, tmp_val_avg, tmp_min, tmp_max, tmp_nbrOfValues, true);\n        }\n    }\n    else\n    {\n        cerr &lt;&lt; \"Unable to open for opening from \" &lt;&lt; mSensorNbr &lt;&lt; \"_\" &lt;&lt; mSensorType &lt;&lt; \"_\" &lt;&lt; mTimeBase &lt;&lt; \".dat\";\n    }\n\n    file.close();\n}\n</code></pre>\n\n<p>Note: deleteAll() clears the double linkedlist.</p>\n"}, {"tags": ["c++", "qt", "templates", "c++11"], "comments": [{"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1475088105, "post_id": 39755274, "comment_id": 66806679, "body": "I will edit your question. But for future posts, only add the meaningful part of the error."}, {"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1475088550, "post_id": 39755274, "comment_id": 66806936, "body": "Building Qt yourself is not recommended for newbies."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1475088742, "post_id": 39755274, "comment_id": 66807045, "body": "Qt 5.7 requires a modern compiler with <i>good</i> C++11/14 support (which VS2013 is not). Try again with VS2015 update 3 :-)"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1475089112, "post_id": 39755274, "comment_id": 66807249, "body": "@ddriver I don&#39;t see why not. It&#39;s not that complicated and building all of your application and dependent libraries with <i>the same</i> compiler is a <i>good</i> thing (prevents some bugs)."}, {"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 1, "creation_date": 1475089590, "post_id": 39755274, "comment_id": 66807493, "body": "There are prebuilt releases for MSVC2013 and MSVC2015. So it should work. There is little point in building it yourself - it takes hours on a slow machine and can potentially fail. Only build Qt if you really need to, for example, I use a static 64bit MinGW build, which I have no choice but to build myself since Qt doesn&#39;t provide a prebuilt one."}, {"owner": {"reputation": 11, "user_id": 6628771, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154421928658793/picture?type=large", "display_name": "Katherine Maguire", "link": "https://stackoverflow.com/users/6628771/katherine-maguire"}, "edited": false, "score": 0, "creation_date": 1475091419, "post_id": 39755274, "comment_id": 66808291, "body": "I have been building Qt on mac for the past 6 years, and on Windows for qt versions 4.7 to 5.2.  Since Qt 5.3 I have no need to build Qt on Windows, the pre built version was good but as WebEngine does not work with prebuilt version of Qt 5.7, the angle implementation crashes I need to build the source to add the fix given by Qt.  I don&#39;t have a license for VS2015 so i cannot change compiler, so I trying to figure out why Qt is not building with VS2013"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1475094306, "post_id": 39755274, "comment_id": 66809905, "body": "There are free versions of VS2015 available..."}, {"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1475102603, "post_id": 39755274, "comment_id": 66813565, "body": "No need to get visual studio, the compiler is now available standalone and for free, goes by the name of &quot;m$ build tools&quot;: <a href=\"http://landinghub.visualstudio.com/visual-cpp-build-tools\" rel=\"nofollow noreferrer\">landinghub.visualstudio.com/visual-cpp-build-tools</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8524875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc04ead3c1d404a7c7e625c20fe8a115?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhailyuk Yuri", "link": "https://stackoverflow.com/users/8524875/mikhailyuk-yuri"}, "is_accepted": false, "score": 0, "last_activity_date": 1503874059, "last_edit_date": 1503874059, "creation_date": 1503873755, "answer_id": 45909977, "question_id": 39755274, "link": "https://stackoverflow.com/questions/39755274/compile-error-when-building-qt-5-7-on-windows-with-msvc-2013/45909977#45909977", "title": "Compile error when building qt 5.7 on Windows with msvc 2013", "body": "<p>If it somebody help :</p>\n\n<p>Comment line 104 and 105:</p>\n\n<pre><code>// template&lt;typename Caller, typename NodeType&gt;\n// using DestructionFunction = void (Caller::*)(NodeType *);\n</code></pre>\n\n<p>Change line 108 from:</p>\n\n<pre><code>void registerDestructionHelper(NodeType *, DestructionFunction, PropertyType);\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>void registerDestructionHelper(NodeType *, void (Caller::*)(NodeType *), PropertyType);\n</code></pre>\n\n<p>line 111 from:</p>\n\n<pre><code>void registerDestructionHelper(NodeType *node, DestructionFunction&lt;Caller, NodeType&gt; func, NodeType *&amp;)\n</code></pre>\n\n<p>to :</p>\n\n<pre><code>void registerDestructionHelper(NodeType *node, void (Caller::*func)(NodeType *), NodeType *&amp;)\n</code></pre>\n\n<p>line 119 from:</p>\n\n<pre><code>void registerDestructionHelper(NodeType *node, DestructionFunction&lt;Caller, NodeType&gt; func, QVector&lt;NodeType*&gt; &amp;)\n</code></pre>\n\n<p>to :</p>\n\n<pre><code>void registerDestructionHelper(NodeType *node, void (Caller::*func)(NodeType *), QVector&lt;NodeType*&gt; &amp;)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6628771, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154421928658793/picture?type=large", "display_name": "Katherine Maguire", "link": "https://stackoverflow.com/users/6628771/katherine-maguire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 206, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1503874059, "creation_date": 1475087969, "last_edit_date": 1475088222, "question_id": 39755274, "link": "https://stackoverflow.com/questions/39755274/compile-error-when-building-qt-5-7-on-windows-with-msvc-2013", "title": "Compile error when building qt 5.7 on Windows with msvc 2013", "body": "<p>When I try to build the source code of Qt 5.7, I am getting the following compile error</p>\n\n<blockquote>\n  <p>qnode_p.h(108): error C2955:\n  'Qt3DCore::QNodePrivate::DestructionFunction' : use of alias template\n  requires template argument list</p>\n  \n  <p>qnode_p.h(105) : see declaration of\n  'Qt3DCore::QNodePrivate::DestructionFunction' qscene.cpp</p>\n  \n  <p>qnode_p.h(108) : error C2955: 'Qt3DCore::QNodePrivate::DestructionFun\n  ction' : use of alias template requires template argument list</p>\n  \n  <p>qnode_p.h(105) : see declaration of\n  'Qt3DCore::QNodePrivate::DestructionFunction' Generating Code</p>\n</blockquote>\n\n<p>It is error C2955 use of alias template requires template argument list.</p>\n\n<p>The source code that is causing the problem is below</p>\n\n<pre><code>class QT3DCORE_PRIVATE_EXPORT QNodePrivate : public QObjectPrivate, public    QObservableInterface\n{\n    public:\n   QNodePrivate();\n   ~QNodePrivate();\n...\n   template&lt;typename Caller, typename NodeType&gt;\n   using DestructionFunction = void (Caller::*)(NodeType *);\n\n   template&lt;typename Caller, typename NodeType, typename PropertyType&gt;\n   void registerDestructionHelper(NodeType *, DestructionFunction&lt;Caller, NodeType&gt;, PropertyType);\n\n   template&lt;typename Caller, typename NodeType&gt;\n   void registerDestructionHelper(NodeType *node, DestructionFunction&lt;Caller, NodeType&gt; func, NodeType *&amp;)\n   {\n      // If the node is destoyed, we make sure not to keep a dangling pointer to it\n      auto f = std::bind(func, static_cast&lt;Caller *&gt;(q_func()), nullptr);\n      m_destructionConnections.insert(node, QObject::connect(node, &amp;QNode::nodeDestroyed, f));\n   }\n\n   template&lt;typename Caller, typename NodeType&gt;\n   void registerDestructionHelper(NodeType *node, DestructionFunction&lt;Caller, NodeType&gt; func, QVector&lt;NodeType*&gt; &amp;)\n   {\n      // If the node is destoyed, we make sure not to keep a dangling pointer to it\n      auto f = std::bind(func, static_cast&lt;Caller *&gt;(q_func()), node);\n      m_destructionConnections.insert(node, QObject::connect(node, &amp;QNode::nodeDestroyed, f));\n   }\n\n   //....\n}\n</code></pre>\n\n<p>line 105 is using </p>\n\n<pre><code>DestructionFunction = void (Caller::*)(NodeType *);\n</code></pre>\n\n<p>line 108 is </p>\n\n<pre><code>void registerDestructionHelper(NodeType *, DestructionFunction&lt;Caller, NodeType&gt;, PropertyType);\n</code></pre>\n\n<p>From what I read about C++11 this should compile ok but for some reason vs 2013 gives the above error.</p>\n"}, {"tags": ["c++", "c++11", "terminal", "codeblocks"], "comments": [{"owner": {"reputation": 476, "user_id": 4224811, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mokgf.jpg?s=128&g=1", "display_name": "Gabriel Vasconcelos", "link": "https://stackoverflow.com/users/4224811/gabriel-vasconcelos"}, "edited": false, "score": 0, "creation_date": 1475087629, "post_id": 39755010, "comment_id": 66806419, "body": "Just in case you&#39;re wondering, when you include a header somewhere, it has access to what is included by the source file that included it. When you try to compile it though, it behaves as a source code and will expect to have those things explicitly included."}, {"owner": {"reputation": 476, "user_id": 4224811, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mokgf.jpg?s=128&g=1", "display_name": "Gabriel Vasconcelos", "link": "https://stackoverflow.com/users/4224811/gabriel-vasconcelos"}, "edited": false, "score": 0, "creation_date": 1475087662, "post_id": 39755010, "comment_id": 66806434, "body": "Long-story-short: Don&#39;t try to compile headers, as has already been answered."}], "answers": [{"tags": [], "owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "is_accepted": true, "score": 11, "last_activity_date": 1475087228, "creation_date": 1475087228, "answer_id": 39755044, "question_id": 39755010, "link": "https://stackoverflow.com/questions/39755010/c-program-compiles-and-runs-in-codeblocks-but-cant-compile-it-in-terminal/39755044#39755044", "title": "C++ program compiles and runs in codeblocks, but can&#39;t compile it in terminal", "body": "<p>You should to avoid to compile an <em>header</em> file (<code>.h</code>).</p>\n\n<p>Try with:</p>\n\n<pre><code>clang++ -std=c++11 main.cpp file1.cpp\n</code></pre>\n\n<p>The header file is something that the <em>preprocessor</em> will include in the <em>cpp</em> files which need it (those <em>compilation units</em> which use <code>#include</code> pre-processor directive).</p>\n"}, {"tags": [], "owner": {"reputation": 3430, "user_id": 6069012, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/bKlmM.png?s=128&g=1", "display_name": "Gavin", "link": "https://stackoverflow.com/users/6069012/gavin"}, "is_accepted": false, "score": 6, "last_activity_date": 1475087272, "creation_date": 1475087272, "answer_id": 39755057, "question_id": 39755010, "link": "https://stackoverflow.com/questions/39755010/c-program-compiles-and-runs-in-codeblocks-but-cant-compile-it-in-terminal/39755057#39755057", "title": "C++ program compiles and runs in codeblocks, but can&#39;t compile it in terminal", "body": "<p>You shouldn't compile header files, only source files. In the source files that need to reference the header file, put <code>#include \"file1.h\"</code> at the top.</p>\n"}], "owner": {"reputation": 752, "user_id": 5464979, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d72033e54e7746c5390586b6327e2168?s=128&d=identicon&r=PG&f=1", "display_name": "Ladih", "link": "https://stackoverflow.com/users/5464979/ladih"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 39755044, "answer_count": 2, "score": 2, "last_activity_date": 1475087272, "creation_date": 1475087106, "last_edit_date": 1475087178, "question_id": 39755010, "link": "https://stackoverflow.com/questions/39755010/c-program-compiles-and-runs-in-codeblocks-but-cant-compile-it-in-terminal", "title": "C++ program compiles and runs in codeblocks, but can&#39;t compile it in terminal", "body": "<p>I created a C++ project that contains several source files and header files. The program compiles and runs well in codeblocks, but I can't compile it in terminal. </p>\n\n<p>All the files are in the same folder.</p>\n\n<p>Here are the command I enter:</p>\n\n<pre><code>clang++ -std=c++11 main.cpp file1.cpp file1.h \n</code></pre>\n\n<p>It shows: </p>\n\n<pre><code>clang: warning: treating 'c-header' input as 'c++-header' when in C++ mode, this behavior is deprecated\n</code></pre>\n\n<p>And a punch of errors about:</p>\n\n<pre><code>error: use of undeclared identifier 'std' \n</code></pre>\n\n<p>In the head file.</p>\n"}, {"tags": ["c++", "int", "max", "permutation", "long-integer"], "comments": [{"owner": {"reputation": 5957, "user_id": 997196, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/E5hdR.png?s=128&g=1", "display_name": "Rivasa", "link": "https://stackoverflow.com/users/997196/rivasa"}, "edited": false, "score": 1, "creation_date": 1475087097, "post_id": 39754970, "comment_id": 66806127, "body": "Why are you returning a long long as an int? What if it&#39;s larger than the possible value of the int?"}, {"owner": {"reputation": 476, "user_id": 4224811, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mokgf.jpg?s=128&g=1", "display_name": "Gabriel Vasconcelos", "link": "https://stackoverflow.com/users/4224811/gabriel-vasconcelos"}, "edited": false, "score": 0, "creation_date": 1475087305, "post_id": 39754970, "comment_id": 66806245, "body": "Perhaps compiling it 64bit might help"}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1475087333, "post_id": 39754970, "comment_id": 66806259, "body": "Is <code>sum = ((n+1)*(n+2))&#47;2</code> supposed to be equivalent to <code>total = N * (N + 1) &#47; 2</code>?"}, {"owner": {"reputation": 476, "user_id": 4224811, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mokgf.jpg?s=128&g=1", "display_name": "Gabriel Vasconcelos", "link": "https://stackoverflow.com/users/4224811/gabriel-vasconcelos"}, "edited": false, "score": 0, "creation_date": 1475087392, "post_id": 39754970, "comment_id": 66806297, "body": "Also, you can use <code>for (const auto&amp; e : A)</code> as a loop instead"}, {"owner": {"reputation": 21, "user_id": 6393748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7729098dfa5e28434c534ba4174eb321?s=128&d=identicon&r=PG&f=1", "display_name": "fisache", "link": "https://stackoverflow.com/users/6393748/fisache"}, "reply_to_user": {"reputation": 5957, "user_id": 997196, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/E5hdR.png?s=128&g=1", "display_name": "Rivasa", "link": "https://stackoverflow.com/users/997196/rivasa"}, "edited": false, "score": 0, "creation_date": 1475087648, "post_id": 39754970, "comment_id": 66806426, "body": "@Link because size of n could be 100,000, so i think long long can cover the value n*n. I think codility error message means overflow.. but i can&#39;t totally understand that"}, {"owner": {"reputation": 5957, "user_id": 997196, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/E5hdR.png?s=128&g=1", "display_name": "Rivasa", "link": "https://stackoverflow.com/users/997196/rivasa"}, "edited": false, "score": 0, "creation_date": 1475088223, "post_id": 39754970, "comment_id": 66806740, "body": "@fisache It can also be <code>&gt;sizeof(int)</code> and then you have problems."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 6393748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7729098dfa5e28434c534ba4174eb321?s=128&d=identicon&r=PG&f=1", "display_name": "fisache", "link": "https://stackoverflow.com/users/6393748/fisache"}, "edited": false, "score": 0, "creation_date": 1475089937, "post_id": 39755636, "comment_id": 66807624, "body": "Thanks! Oh.. I had not thought about that.. I solved :)"}], "tags": [], "owner": {"reputation": 4713, "user_id": 6799654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbfa65b345b86c22a77eb3f457c99f35?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey Guseynov", "link": "https://stackoverflow.com/users/6799654/alexey-guseynov"}, "is_accepted": false, "score": 1, "last_activity_date": 1475089221, "creation_date": 1475089221, "answer_id": 39755636, "question_id": 39754970, "link": "https://stackoverflow.com/questions/39754970/i-cant-understand-codility-permmissingelem-wrong-using-c-c/39755636#39755636", "title": "I can&#39;t understand codility PermMissingElem wrong using C/C++", "body": "<p>You store n in an int. So when you square it, you still have an int. Then you assign that int to a long long sum, but it's too late because overflow has already occurred.</p>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 10004710, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ByrFtnVHDHA/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq148tal2texAneDPcEJgDBqoNyNGw/mo/photo.jpg?sz=128", "display_name": "RGelman", "link": "https://stackoverflow.com/users/10004710/rgelman"}, "is_accepted": false, "score": 0, "last_activity_date": 1532365695, "creation_date": 1532365695, "answer_id": 51484034, "question_id": 39754970, "link": "https://stackoverflow.com/questions/39754970/i-cant-understand-codility-permmissingelem-wrong-using-c-c/51484034#51484034", "title": "I can&#39;t understand codility PermMissingElem wrong using C/C++", "body": "<p>Here is 100% javascript solution:</p>\n\n<pre><code>function solution(A) {\n    if (!A.length) return 1;\n    let n = A.length + 1;\n    return (n + (n * n - n) / 2) - A.reduce((a, b) =&gt; a + b);\n}\n</code></pre>\n\n<p>We return 1 if the given array is empty, which is the missing element in an empty array.</p>\n\n<p>Next we calculate the 'ordinary' series sum, assuming the first element in the series is always 1. Then we find the difference between the given array and the full series, and return it. This is the missing element.</p>\n\n<p>The mathematical function I used here are series sum, and last element:</p>\n\n<ul>\n<li>S<sub>n</sub> = (n/2)*(a<sub>1</sub> + a<sub>n</sub>)</li>\n<li>a<sub>n</sub> = a<sub>1</sub> + (n - 1)*d</li>\n</ul>\n"}], "owner": {"reputation": 21, "user_id": 6393748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7729098dfa5e28434c534ba4174eb321?s=128&d=identicon&r=PG&f=1", "display_name": "fisache", "link": "https://stackoverflow.com/users/6393748/fisache"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 703, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1532365695, "creation_date": 1475086958, "question_id": 39754970, "link": "https://stackoverflow.com/questions/39754970/i-cant-understand-codility-permmissingelem-wrong-using-c-c", "title": "I can&#39;t understand codility PermMissingElem wrong using C/C++", "body": "<p>I used C++ for solving problem, codility PermMissingElem.\nI didn't use <code>xor</code>, just sum of sequence.</p>\n\n<p>c++</p>\n\n<pre><code> int solution(vector&lt;int&gt; &amp;A) {\n        // write your code in C++11 (g++ 4.8.2)\n        int n = A.size();\n        long long sum = ((n+1)*(n+2))/2;\n        for(int i=0; i&lt;n; i++) {\n            sum -= A[i];\n        }\n        return (int)sum;\n    }\n</code></pre>\n\n<p>It result in 80% of test score for fail to large test = ~100000 <br />\nWrong answer example, </p>\n\n<blockquote>\n  <p>got -2147483647 expected 1</p>\n</blockquote>\n\n<p>However, if using java following, it results in 100%.</p>\n\n<p>java</p>\n\n<pre><code> public int solution(int[] A) {\n\n            long N = A.length + 1;\n            long total = N * (N + 1) / 2;\n\n            for (int i : A) {\n\n                total -= i;\n            }\n\n            return (int)total;\n        }\n</code></pre>\n\n<p>What's difference between c++ and java?\nI used data type of sum, long, long long, long long int ..</p>\n\n<p>Thx.</p>\n"}, {"tags": ["c++", "opencv", "histogram"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 3, "creation_date": 1475087473, "post_id": 39754910, "comment_id": 66806340, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1475087559, "post_id": 39754910, "comment_id": 66806380, "body": "Run your code in <a href=\"https://en.wikipedia.org/wiki/Debugger\" rel=\"nofollow noreferrer\">the debugger</a> that almost certainly came with your development environment (and if your development environment has no debugger, change environments to one that does) and inspect what is in <code>maskHist</code>. If you don&#39;t like what&#39;s in <code>maskHist</code>, use the debugger to find out how it got there."}], "owner": {"reputation": 37, "user_id": 3533910, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8533591ed2582e278b40dba76bfbfcf9?s=128&d=identicon&r=PG&f=1", "display_name": "user3533910", "link": "https://stackoverflow.com/users/3533910/user3533910"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1475086761, "creation_date": 1475086761, "question_id": 39754910, "link": "https://stackoverflow.com/questions/39754910/regarding-the-operator-for-stdfstream", "title": "Regarding the operator &lt;&lt; for std::fstream", "body": "<p>I'm having trouble trying to figure out what's causing this strange behavior.\nI have a method that computes a histogram for each sub-image I have from a given image, for each sub-image I compute it's histogram and store it in a std::vector, after that I have another method that iterates through this vector and put every histogram in a std::fstream to an output file. The thing is, before my code was working perfectly, the output file had one line for each histogram with X elements per histogram. Now, a couple weeks later (without even changing anything on the code) I have the output file jumping a line for each of the X elements per histogram, giving me a gigantic file and I don't even know what is causing this strange behavior. \nDoes the operator &lt;&lt; put a newline after every element? or is it something to do with the histogram from the openCV? here are the code of the two methods.</p>\n\n<p>This is the method that calculates the Histograms and store them on maskHist vector</p>\n\n<pre><code>void lbpd::lbpDescr::generateHistogram() {\nfloat range[]          = {0, 255};\nconst float* histRange = {range};\nint histSize           = 256;\nbool uniform           = true; \nbool accumulate        = false; \ncv::Mat aux;\n\nfor(int i = 0; i &lt; imgCells.size(); i++) {\n    calcHist(&amp;imgCells[i], 1, 0, cv::Mat(), aux,  1, &amp;histSize, &amp;histRange, uniform, accumulate);\n    cv::normalize(aux, aux, 1);\n    maskHist.push_back(aux);\n    /*reset aux image preventing overlaping images*/\n    aux = cv::Mat();\n}\n</code></pre>\n\n<p>The method that is giving me headache:</p>\n\n<pre><code>void lbpd::lbpDescr::toFile() {\nint sliceIndex = 0;\nstd::fstream loadToFile;\n\nloadToFile.open (\"currentImageHistogram.txt\", std::fstream::out);\n\nfor(int i = 0; i &lt; maskHist.size(); i++) {\n    /*Each index of maskHist is a full histogram with X elements and even like that\n      my output file is jumping one line for EACH element on every histogram*/\n    loadToFile &lt;&lt; maskHist[i];\n}\nloadToFile.close();\n</code></pre>\n"}, {"tags": ["c++", "mysql", "cygwin"], "comments": [{"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1475087375, "post_id": 39754654, "comment_id": 66806285, "body": "Possible duplicate <a href=\"http://stackoverflow.com/questions/3328199/how-to-specify-a-path-with-white-space-in-it-with-cmake\">How to specify a path with white space in it with cmake</a>"}, {"owner": {"reputation": 31747, "user_id": 499448, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/957083d526c5fd7c54c5b89aece0b76a?s=128&d=identicon&r=PG", "display_name": "Boardy", "link": "https://stackoverflow.com/users/499448/boardy"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1475088612, "post_id": 39754654, "comment_id": 66806972, "body": "That doesn&#39;t make any difference, I&#39;ve tried it with / instead of \\\\ and adding \\ for the whitespace but it makes no diffrence"}], "owner": {"reputation": 31747, "user_id": 499448, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/957083d526c5fd7c54c5b89aece0b76a?s=128&d=identicon&r=PG", "display_name": "Boardy", "link": "https://stackoverflow.com/users/499448/boardy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1475085847, "creation_date": 1475085847, "question_id": 39754654, "link": "https://stackoverflow.com/questions/39754654/building-mysql-c-connector-from-source", "title": "Building MySQL C++ Connector from source", "body": "<p>I have been struggling for a few days trying to get MySQL C++ Connector to compile on Windows. I have Cygwin installed. </p>\n\n<p>I run the following </p>\n\n<pre><code>set cc=gcc\nset cxx=gcc\n\ncmake -G \"MinGW Makefiles\" -DCMAKE_REQUIRED_FLAGS=-xO4 -DCMAKE_INSTALL_PREFIX=C:\\\\exports\\\\Connector -DMYSQL_CONFIG_EXECUTABLE=\"C:\\\\Program Files\\\\MySQL\\\\MySQL Server 5.7\"\n\nBut I get the following output:\n\n-- Boost version: 1.61.0\n-- BOOST_INCLUDE_DIRS=C:/boost_1_61_0\n-- You will link dynamically to the MySQL client library (set with -DMYSQLCLIENT_STATIC_LINKING=&lt;bool&gt;)\n-- Searching for dynamic libraries with the base name(s) \"libmysql\"\nCMake Error at FindMySQL.cmake:494 (message):\n  Could not find the include dir from running \"C:\\\\Program\n  Files\\\\MySQL\\\\MySQL Server 5.7\"\nCall Stack (most recent call first):\n  CMakeLists.txt:218 (INCLUDE)\n\n\n-- Configuring incomplete, errors occurred!\nSee also \"C:/Users/Chris/MySQLConnector/CMakeFiles/CMakeOutput.log\".\n</code></pre>\n\n<p>I don't get why it says it can't find the include directory because I can see it in the path <code>C:\\Program Files\\MySQL\\MySQL Server 5.7\\include</code></p>\n"}, {"tags": ["c++", "debugging", "compiler-errors", "logic"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1475085822, "post_id": 39754592, "comment_id": 66805307, "body": "You should post the error messages verbatim in your question - as <b>text</b>, <i>not</i> image."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 4, "creation_date": 1475085971, "post_id": 39754592, "comment_id": 66805404, "body": "You cannot define another function inside of the <code>main()</code> functions body, unless its a lambda expression."}, {"owner": {"reputation": 554, "user_id": 2366830, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ifTJM.jpg?s=128&g=1", "display_name": "CTOverton", "link": "https://stackoverflow.com/users/2366830/ctoverton"}, "edited": false, "score": 0, "creation_date": 1475086146, "post_id": 39754592, "comment_id": 66805506, "body": "That solves one problem, however I still cant use the function in line with cout &gt;&gt; to output it"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1475086571, "post_id": 39754592, "comment_id": 66805801, "body": "@Rext <code>&gt;&gt;</code> is for input, you probably mean <code>&lt;&lt;</code> for output ;-)"}, {"owner": {"reputation": 476, "user_id": 4224811, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mokgf.jpg?s=128&g=1", "display_name": "Gabriel Vasconcelos", "link": "https://stackoverflow.com/users/4224811/gabriel-vasconcelos"}, "edited": false, "score": 1, "creation_date": 1475086779, "post_id": 39754592, "comment_id": 66805954, "body": "You ask for 0 based input and computes them as if they were 1 based. Using <code>rand() % 4</code> is wrong as it leaves 4 options to you, not three..."}, {"owner": {"reputation": 554, "user_id": 2366830, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ifTJM.jpg?s=128&g=1", "display_name": "CTOverton", "link": "https://stackoverflow.com/users/2366830/ctoverton"}, "edited": false, "score": 0, "creation_date": 1475086983, "post_id": 39754592, "comment_id": 66806073, "body": "Jesper Juhl, sorry I miss typed, I am using &lt;&lt; but it still throws an error :( Thanks for the heads up Gabriel!"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": true, "score": 1, "last_activity_date": 1475086936, "last_edit_date": 1475086936, "creation_date": 1475085989, "answer_id": 39754693, "question_id": 39754592, "link": "https://stackoverflow.com/questions/39754592/c-functions-and-strange-errors/39754693#39754693", "title": "C++ Functions and strange errors", "body": "<p>The function <code>string numberToWord (int x)</code> is nested inside the <code>main</code> function. That is not valid C++.</p>\n\n<p>The GCC compiler <em>does</em> support nested functions as an extension, but it's not part of the standard and other compilers (that I know of) don't accept it. Just don't do that. Move the function out of <code>main</code> (or, if it makes sense, make it a lambda).</p>\n"}, {"comments": [{"owner": {"reputation": 554, "user_id": 2366830, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ifTJM.jpg?s=128&g=1", "display_name": "CTOverton", "link": "https://stackoverflow.com/users/2366830/ctoverton"}, "edited": false, "score": 0, "creation_date": 1475086191, "post_id": 39754722, "comment_id": 66805536, "body": "Only problem now is I still can&#39;t use:"}, {"owner": {"reputation": 554, "user_id": 2366830, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ifTJM.jpg?s=128&g=1", "display_name": "CTOverton", "link": "https://stackoverflow.com/users/2366830/ctoverton"}, "edited": false, "score": 0, "creation_date": 1475086203, "post_id": 39754722, "comment_id": 66805551, "body": "cout &lt;&lt; &quot;Compuer Choose: &quot; &lt;&lt; numberToWord(computerChoice) &lt;&lt; endl;"}, {"owner": {"reputation": 377, "user_id": 4199141, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_jGxyF86jpQ/AAAAAAAAAAI/AAAAAAAAAX0/r1vbGgE85DM/photo.jpg?sz=128", "display_name": "John Griffin", "link": "https://stackoverflow.com/users/4199141/john-griffin"}, "reply_to_user": {"reputation": 554, "user_id": 2366830, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ifTJM.jpg?s=128&g=1", "display_name": "CTOverton", "link": "https://stackoverflow.com/users/2366830/ctoverton"}, "edited": false, "score": 1, "creation_date": 1475087069, "post_id": 39754722, "comment_id": 66806110, "body": "@rext, what do you mean &quot;still can&#39;t use.&quot;  What does not work for you?"}, {"owner": {"reputation": 554, "user_id": 2366830, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ifTJM.jpg?s=128&g=1", "display_name": "CTOverton", "link": "https://stackoverflow.com/users/2366830/ctoverton"}, "edited": false, "score": 0, "creation_date": 1475088188, "post_id": 39754722, "comment_id": 66806720, "body": "so sorry I&#39;m new to this site so my formatting sucks, I edited my post and its under part 2, hopefully that makes sense"}], "tags": [], "owner": {"reputation": 377, "user_id": 4199141, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_jGxyF86jpQ/AAAAAAAAAAI/AAAAAAAAAX0/r1vbGgE85DM/photo.jpg?sz=128", "display_name": "John Griffin", "link": "https://stackoverflow.com/users/4199141/john-griffin"}, "is_accepted": false, "score": 1, "last_activity_date": 1475086201, "last_edit_date": 1475086201, "creation_date": 1475086094, "answer_id": 39754722, "question_id": 39754592, "link": "https://stackoverflow.com/questions/39754592/c-functions-and-strange-errors/39754722#39754722", "title": "C++ Functions and strange errors", "body": "<p>The problem is simple. numberToWord cannot be an internal function of main.  Move it outside main or change it to a lambda if you are using a newer C++.</p>\n\n<pre><code>auto numberToWord = [](int x) -&gt; string {\n    string outputChoice;\n\n    if (x == 0) { outputChoice = \"Rock\"; }\n    else if (x == 1) { outputChoice = \"Paper\"; }\n    else if (x == 2) { outputChoice = \"Scissors\"; }\n\n    return outputChoice;\n};\n</code></pre>\n"}], "owner": {"reputation": 554, "user_id": 2366830, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ifTJM.jpg?s=128&g=1", "display_name": "CTOverton", "link": "https://stackoverflow.com/users/2366830/ctoverton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 39754693, "answer_count": 2, "score": -2, "last_activity_date": 1523378972, "creation_date": 1475085632, "last_edit_date": 1523378972, "question_id": 39754592, "link": "https://stackoverflow.com/questions/39754592/c-functions-and-strange-errors", "title": "C++ Functions and strange errors", "body": "<p>So I'm writing a small Rock, Paper, Scissors game structure in C++ and I've run into some errors I don't understand.</p>\n\n<h2>Solution</h2>\n\n<p>The function <code>string numberToWord (int x)</code> can't be in the function main. It has to be a separate method due to the way the compiler works. I simply moved it out then it worked fine.</p>\n\n<h2>Previous Question</h2>\n\n<p>So I'm writing a small Rock, Paper, Scissors game structure in C++ and I've run into some errors I don't understand.</p>\n\n<p>The first is the code expects a ';' at the NumberToWord function but it shouldn't since it's a function.</p>\n\n<p>Another error is randomly one of the else statements it doesn't seem to like.</p>\n\n<p>Maybe I'm missing something, I don't know but it should be a simple fix.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;iomanip&gt;\nusing namespace std;\n\nint main()\n{\n    int seed = static_cast &lt;int&gt; (time(0)); //Sets the random seed\n    srand(seed);\n\n    int winCount = 0;\n\n    string numberToWord (int x) {\n        string outputChoice;\n\n        if (x == 0) { outputChoice = \"Rock\"; }\n        else if (x == 1) { outputChoice = \"Paper\"; }\n        else if (x == 2) { outputChoice = \"Scissors\"; }\n\n        return outputChoice;\n    }\n\n    while (winCount &lt; 3) {\n        int computerChoice = rand() % 4;\n        int userChoice;\n\n        cout &lt;&lt; userChoice &lt;&lt; endl;\n\n        cout &lt;&lt; \"Please Enter 0 for Rock, 1 for Paper, or 2 for Scissors: \"; //Asks for user input\n        cin &gt;&gt; userChoice; //Inputs user input to variable\n\n        if (userChoice == computerChoice) {\n            cout &lt;&lt; \"Compuer Choose: \" &lt;&lt; numberToWord(computerChoice) &lt;&lt; endl;\n            cout &lt;&lt; \"You Choose: \" &lt;&lt; numberToWord(userChoice) &lt;&lt; endl;\n            cout &lt;&lt; \"Draw!\" &lt;&lt; endl;\n        }\n        else if ((userChoice == 1) &amp;&amp; (computerChoice == 2)) { //Rock v Paper\n            cout &lt;&lt; \"Compuer Choose: \" &lt;&lt; numberToWord(computerChoice) &lt;&lt; endl;\n            cout &lt;&lt; \"You Choose: \" &lt;&lt; numberToWord(userChoice) &lt;&lt; endl;\n            cout &lt;&lt; \"Compuer wins!\" &lt;&lt; endl;\n        }\n        else if ((userChoice == 1) &amp;&amp; (computerChoice == 3)) { //Rock v Scissors\n            cout &lt;&lt; \"Compuer Choose: \" &lt;&lt; numberToWord(computerChoice) &lt;&lt; endl;\n            cout &lt;&lt; \"You Choose: \" &lt;&lt; numberToWord(userChoice) &lt;&lt; endl;\n            cout &lt;&lt; \"You win!\" &lt;&lt; endl;\n            winCount += 1;\n        }\n        else if ((userChoice == 2) &amp;&amp; (computerChoice == 1)) { //Paper v Rock\n            cout &lt;&lt; \"Compuer Choose: \" &lt;&lt; numberToWord(computerChoice) &lt;&lt; endl;\n            cout &lt;&lt; \"You Choose: \" &lt;&lt; numberToWord(userChoice) &lt;&lt; endl;\n            cout &lt;&lt; \"You win!\" &lt;&lt; endl;\n            winCount += 1;\n        }\n        else if ((userChoice == 2) &amp;&amp; (computerChoice == 3)) { //Paper v Scissors\n            cout &lt;&lt; \"Compuer Choose: \" &lt;&lt; numberToWord(computerChoice) &lt;&lt; endl;\n            cout &lt;&lt; \"You Choose: \" &lt;&lt; numberToWord(userChoice) &lt;&lt; endl;\n            cout &lt;&lt; \"Compuer wins!\" &lt;&lt; endl;\n        }\n        else if ((userChoice == 3) &amp;&amp; (computerChoice == 1)) { //Scissors v Rock\n            cout &lt;&lt; \"Compuer Choose: \" &lt;&lt; numberToWord(computerChoice) &lt;&lt; endl;\n            cout &lt;&lt; \"You Choose: \" &lt;&lt; numberToWord(userChoice) &lt;&lt; endl;\n            cout &lt;&lt; \"Compuer wins!\" &lt;&lt; endl;\n        }\n        else if ((userChoice == 3) &amp;&amp; (computerChoice == 2)) { //Scissors v Paper\n            cout &lt;&lt; \"Compuer Choose: \" &lt;&lt; numberToWord(computerChoice) &lt;&lt; endl;\n            cout &lt;&lt; \"You Choose: \" &lt;&lt; numberToWord(userChoice) &lt;&lt; endl;\n            cout &lt;&lt; \"You win!\" &lt;&lt; endl;\n            winCount += 1;\n        }\n    }\n\n\n    return 0;\n}\n</code></pre>\n\n<p>Thanks for any and all help!</p>\n\n<p><a href=\"https://i.stack.imgur.com/MA53I.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MA53I.png\" alt=\"Errors\"></a></p>\n\n<hr>\n\n<p>Part 2</p>\n\n<p>Simply put the program doesn't like the '&lt;&lt;'. I use this just fine in many other programs for variables but this time when I used a string variable it throws an error. I looked up C++ string variables and it looks like I'm doing it correctly so I don't know the reason for the errors. </p>\n\n<p>References:</p>\n\n<p><a href=\"http://www.cplusplus.com/doc/tutorial/basic_io/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/doc/tutorial/basic_io/</a></p>\n\n<p><a href=\"http://www.cplusplus.com/doc/tutorial/variables/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/doc/tutorial/variables/</a></p>\n\n<pre><code>void displayOutput(int comp, int user, string winner) {\n    string compOutputChoice = \"\";\n    string userOutputChoice = \"\";\n\n    /*\n    if (comp == 0) { compOutputChoice = \"Rock\"; }\n    else if (comp == 1) { compOutputChoice = \"Paper\"; }\n    else if (comp == 2) { compOutputChoice = \"Scissors\"; }\n\n    if (user == 0) { userOutputChoice = \"Rock\"; }\n    else if (user == 1) { userOutputChoice = \"Paper\"; }\n    else if (user == 2) { userOutputChoice = \"Scissors\"; }\n    */\n\n    cout &lt;&lt; \"Compuer Choose: \" &lt;&lt; compOutputChoice &lt;&lt; endl;\n    cout &lt;&lt; \"You Choose: \" &lt;&lt; userOutputChoice &lt;&lt; endl;\n    //cout &lt;&lt; winner &lt;&lt; endl;\n\n    return;\n}\n</code></pre>\n\n<p>Errors:</p>\n\n<p>Error (active)      no operator \"&lt;&lt;\" 32 </p>\n\n<p>Error (active)      no operator \"&lt;&lt;\" 33</p>\n\n<p>Error   C2679   binary '&lt;&lt;': no operator found which takes a right-hand operand of type 'std::string' (or there is no acceptable conversion) 32 </p>\n\n<p>Error   C2679   binary '&lt;&lt;': no operator found which takes a right-hand operand of type 'std::string' (or there is no acceptable conversion) 33</p>\n"}, {"tags": ["c++", "arrays", "histogram", "dice", "undeclared-identifier"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1475085894, "post_id": 39754574, "comment_id": 66805347, "body": "What is the actual error you get?"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 4, "creation_date": 1475085939, "post_id": 39754574, "comment_id": 66805381, "body": "&quot;Pro&quot; code formatting tip: 1) paste the code 2) select the code 3) ctrl+k"}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1475086199, "post_id": 39754574, "comment_id": 66805547, "body": "This code does not compile. Are you sure you are not missing essential libraries? But including other un needed instead?"}, {"owner": {"reputation": 5090, "user_id": 27130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iiR2r.jpg?s=128&g=1", "display_name": "Nathan Monteleone", "link": "https://stackoverflow.com/users/27130/nathan-monteleone"}, "edited": false, "score": 0, "creation_date": 1475086220, "post_id": 39754574, "comment_id": 66805566, "body": "You are #including a .cpp file from another .cpp file -- that in general isn&#39;t right, although you can get it to work.  The intent is for each .cpp file to be compiled to an object file (.obj or .o usually depending on your compiler), and then linked together."}, {"owner": {"reputation": 5090, "user_id": 27130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iiR2r.jpg?s=128&g=1", "display_name": "Nathan Monteleone", "link": "https://stackoverflow.com/users/27130/nathan-monteleone"}, "edited": false, "score": 0, "creation_date": 1475086295, "post_id": 39754574, "comment_id": 66805601, "body": "You&#39;re also including a .cpp from a header, which is even worse :("}, {"owner": {"reputation": 1857, "user_id": 5679064, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-l2ibgQ05wGY/AAAAAAAAAAI/AAAAAAAAAAA/IJpQJnP_zVo/photo.jpg?sz=128", "display_name": "Gasper", "link": "https://stackoverflow.com/users/5679064/gasper"}, "edited": false, "score": 0, "creation_date": 1475086328, "post_id": 39754574, "comment_id": 66805621, "body": "You should not include <code>.cpp</code> files. They are intended to contain actual implementation of classes defined in <code>.h</code> files. So, for each of your classes you should have a two files: one <code>.cpp</code> and one <code>.h</code>."}, {"owner": {"reputation": 5090, "user_id": 27130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iiR2r.jpg?s=128&g=1", "display_name": "Nathan Monteleone", "link": "https://stackoverflow.com/users/27130/nathan-monteleone"}, "edited": false, "score": 0, "creation_date": 1475086371, "post_id": 39754574, "comment_id": 66805658, "body": "You might try reading <a href=\"http://stackoverflow.com/a/6264256/27130\">stackoverflow.com/a/6264256/27130</a> - it&#39;s an explanation of how compilation and linking works overall."}, {"owner": {"reputation": 11, "user_id": 6895315, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10207530554358330/picture?type=large", "display_name": "Bren Bailey", "link": "https://stackoverflow.com/users/6895315/bren-bailey"}, "reply_to_user": {"reputation": 5090, "user_id": 27130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iiR2r.jpg?s=128&g=1", "display_name": "Nathan Monteleone", "link": "https://stackoverflow.com/users/27130/nathan-monteleone"}, "edited": false, "score": 0, "creation_date": 1475087431, "post_id": 39754574, "comment_id": 66806317, "body": "@NathanMonteleone A requirement of the project is this &quot;Arrange your C++ code in three separate files: &quot;histogram.h&quot;, &quot;histogram.cpp&quot;, and &quot;main.cpp&quot;. &quot;"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1475087925, "post_id": 39754574, "comment_id": 66806577, "body": "Off topic: you don&#39;t want <code>#include &quot;stdafx.h&quot;</code> in your header. But you might want <code>#include &quot;yourheader.h&quot;</code> in stdafx.h. stdafx.h is for pre-compiling headers to save you time when building. Headers tend to not change much, but the CPP files including them do. Precompiling and caching the header with stdafx.h may save you time by not forcing them to be built along with the cpp files that include them."}, {"owner": {"reputation": 5090, "user_id": 27130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iiR2r.jpg?s=128&g=1", "display_name": "Nathan Monteleone", "link": "https://stackoverflow.com/users/27130/nathan-monteleone"}, "edited": false, "score": 0, "creation_date": 1475088244, "post_id": 39754574, "comment_id": 66806753, "body": "@BrenBailey Understood -- but this isn&#39;t the way to go about it.  You need to compile the .cpp files separately, then use a linker to combine them into a single executable."}, {"owner": {"reputation": 11, "user_id": 6895315, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10207530554358330/picture?type=large", "display_name": "Bren Bailey", "link": "https://stackoverflow.com/users/6895315/bren-bailey"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1475088711, "post_id": 39754574, "comment_id": 66807031, "body": "@NathanOliver Undeclared Identifier is the error I get for every variable declared in my header file.  Could someone point me towards some actual code examples that show headers and mains communicating so that I can see practically how it works instead of guessing. I just don&#39;t understand how why I&#39;m getting undeclared identifier on every variable when they are all declared in a header that is included on all of my files..."}, {"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1475089437, "post_id": 39754574, "comment_id": 66807407, "body": "@FirstStep He&#39;s not <i>missing</i> anything, per se.  It&#39;s just that due to <code>#include</code>ing <code>histogram.cpp</code> in <code>histogram.h</code>, he ends up trying to use <code>std::cout</code> and <code>std::endl</code> before the <code>#include &lt;iostream&gt;</code> is encountered, and ends up trying to use his global variables before they&#39;re formally declared."}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "reply_to_user": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1475089846, "post_id": 39754574, "comment_id": 66807585, "body": "@JustinTime Yes he is missing <code>#include &lt;iostream&gt;</code> for the cout / cin in <code>main()</code> and all their <code>std::</code>s."}, {"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1475090151, "post_id": 39754574, "comment_id": 66807698, "body": "@FirstStep It&#39;s in <code>histogram.h</code>, so <code>main.cpp</code> indirectly <code>#include</code>s it.  Good point, though, I&#39;ll make a note about that under my answer."}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "reply_to_user": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1475090614, "post_id": 39754574, "comment_id": 66807903, "body": "@JustinTime I think you are right :)"}, {"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1475091155, "post_id": 39754574, "comment_id": 66808155, "body": "@FirstStep It&#39;s problematic, since anyone that <code>#include</code>s <code>histogram.h</code> will get three library headers whether they want to or not, but it does work."}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "reply_to_user": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1475091453, "post_id": 39754574, "comment_id": 66808313, "body": "@JustinTime I just got informed that It will work, and if some libraries are included in a file, and we include that file in main, all those libraries will be copied. Even the <code>using namespace std;</code> as well. It is not a good practice though."}, {"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1475092610, "post_id": 39754574, "comment_id": 66808966, "body": "@FirstStep Exactly."}], "answers": [{"comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 2, "creation_date": 1475086879, "post_id": 39754872, "comment_id": 66806016, "body": "I disagree with 4. Theres nothing wrong with a typedef."}, {"owner": {"reputation": 11, "user_id": 6895315, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10207530554358330/picture?type=large", "display_name": "Bren Bailey", "link": "https://stackoverflow.com/users/6895315/bren-bailey"}, "edited": false, "score": 0, "creation_date": 1475087322, "post_id": 39754872, "comment_id": 66806255, "body": "So this is the error i get for every variable Error\tC2065\t&#39;rolls&#39;: undeclared identifier\thistogram\t Did you mean use stdio.h instead of cstdio? What do you mean by main should return int? What int should it return?"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "reply_to_user": {"reputation": 11, "user_id": 6895315, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10207530554358330/picture?type=large", "display_name": "Bren Bailey", "link": "https://stackoverflow.com/users/6895315/bren-bailey"}, "edited": false, "score": 0, "creation_date": 1475087381, "post_id": 39754872, "comment_id": 66806287, "body": "@BrenBailey The return type of the main function is specifically int, you used uint."}], "tags": [], "owner": {"reputation": 403, "user_id": 2736432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c45320175df94005895999e4585ff28f?s=128&d=identicon&r=PG&f=1", "display_name": "RotatingPieces", "link": "https://stackoverflow.com/users/2736432/rotatingpieces"}, "is_accepted": false, "score": 0, "last_activity_date": 1475086625, "creation_date": 1475086625, "answer_id": 39754872, "question_id": 39754574, "link": "https://stackoverflow.com/questions/39754574/dice-game-c-error-undeclared-identifier-code-review/39754872#39754872", "title": "Dice Game c++ error undeclared identifier/code review", "body": "<p>Here are some problems I see with your code. I don't know if that solves your problem as you didn't post the error message.</p>\n\n<ol>\n<li>The method <code>main()</code> should return <code>int</code>.</li>\n<li>The <code>frequency</code> array is too small. Or you values for <code>die1</code> and <code>die2</code> are too big. Depends how you want to look at it.</li>\n<li>You are mixing C++ and C headers. Inclue <code>cstdio</code> instead of <code>stdio.h</code>. Best not use <code>cstdio</code> and <code>cstdlib</code> at all. You don't need them.</li>\n<li>Just use <code>unsigned</code> as a data type instead of the <code>uint</code> you defined yourself.</li>\n<li>You aren't initializing your random number generator.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1475089769, "post_id": 39755657, "comment_id": 66807565, "body": "Also, <code>main()</code> should return <code>int</code> instead of <code>unsigned int</code>, and I would recommend placing your <code>using namespace std</code> directives inside <code>theHisto::printHisto()</code> and <code>main()</code>, instead of in the global namespace.  You can also remove the global variables <code>i</code>, <code>die1</code>, and <code>die2</code>, and replace them with local variables in <code>Dice::rollDie()</code>.  You didn&#39;t use <code>output</code>, so you can likely remove it."}, {"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1475090690, "post_id": 39755657, "comment_id": 66807937, "body": "You should also move your standard library <code>#include</code>s (<code>&lt;cstdlib&gt;</code>, <code>&lt;stdio.h&gt;</code>, and <code>&lt;iostream&gt;</code>) to <code>main.cpp</code> and <code>histogram.cpp</code>, so that any other file that <code>#include</code>s <code>histogram.h</code> won&#39;t get them as well.  I&#39;m not sure if you actually <i>need</i> <code>&lt;stdio.h&gt;</code>, for that matter; I didn&#39;t see anything that used it.  I would also recommend seeding <code>rand()</code> with <code>srand()</code>; you could either do this at the top of <code>main()</code>, or in <code>Dice</code>&#39;s default constructor.  <code>#include &lt;ctime&gt;</code> with your other library includes, and use <code>srand(time(nullptr));</code>"}, {"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1475090805, "post_id": 39755657, "comment_id": 66807979, "body": "(If your compiler isn&#39;t C++11 compliant, or complains about <code>nullptr</code>, then either use the compiler&#39;s version of the switch <code>-std=c++11</code> (if available; you can also use <code>-std=c++14</code>), or replace <code>nullptr</code> with <code>NULL</code>.)"}, {"owner": {"reputation": 11, "user_id": 6895315, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10207530554358330/picture?type=large", "display_name": "Bren Bailey", "link": "https://stackoverflow.com/users/6895315/bren-bailey"}, "edited": false, "score": 0, "creation_date": 1475106554, "post_id": 39755657, "comment_id": 66814577, "body": "I will update this with newer code soon. You all&#39;s help has been very awesome. I should say that some things such as having histogram.cpp instead of simplifying are part of the assignment in order to teach us how c++ works even though we know it isn&#39;t exactly an ideal set up."}, {"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "reply_to_user": {"reputation": 11, "user_id": 6895315, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10207530554358330/picture?type=large", "display_name": "Bren Bailey", "link": "https://stackoverflow.com/users/6895315/bren-bailey"}, "edited": false, "score": 0, "creation_date": 1475607745, "post_id": 39755657, "comment_id": 67007633, "body": "@BrenBailey Ah, okay.  That makes sense, knowing how to compile multiple source files into a single project is extremely useful, especially once you move onto more complex projects.  Glad I could help."}], "tags": [], "owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1475090028, "last_edit_date": 1475090028, "creation_date": 1475089280, "answer_id": 39755657, "question_id": 39754574, "link": "https://stackoverflow.com/questions/39754574/dice-game-c-error-undeclared-identifier-code-review/39755657#39755657", "title": "Dice Game c++ error undeclared identifier/code review", "body": "<p>First, don't <code>#include \"histogram.cpp\"</code>, that's the root cause of all the problems.  Specifically:</p>\n\n<ol>\n<li>The compiler will start with either <code>main.cpp</code> or <code>histogram.cpp</code>, most likely <code>main.cpp</code>.  It will then proceed to create a single <em>translation unit</em> from each <code>.cpp</code> file, by preprocessing it and including every file specified by an <code>#include</code> directive.</li>\n<li>While preprocessing <code>main.cpp</code>, it will encounter <code>#include \"histogram.h\"</code>.  This tells the preprocessor to paste the file <code>histogram.h</code> at the top of <code>main.cpp</code>, where it encounters that line.  It will then continue preprocessing with the contents of <code>histogram.h</code>, until it reaches the end of the code pasted from the file and moves on to the next line in <code>main.cpp</code>.</li>\n<li>While preprocessing the code pasted in from <code>histogram.h</code>, it will encounter <code>#include \"histogram.cpp\"</code>.  This tells the preprocessor to paste the file <code>histogram.cpp</code> there, just as it did for <code>histogram.h</code>.  It will then continue preprocessing with the contents of <code>histogram.cpp</code>, until it reaches the end of the code pasted from the file and moves on to the next line pasted from <code>histogram.h</code>.</li>\n<li><p><code>#pragma once</code> will prevent <code>stdafx.h</code>, <code>histogram.h</code> and <code>histogram.cpp</code> from being copy-pasted multiple times, and preprocessing will finish normally.  [Note that <code>#pragma once</code> may or may not guard against the <code>#include \"histogram.cpp\"</code> in <code>main.cpp</code>, since it's in <code>histogram.h</code> and not <code>main.cpp</code>.  Similarly, if <code>stdafx.h</code> contains anything, it may run into this same issue; I will assume that it's empty, and was automatically inserted by your IDE, and thus will only mention it once, at the top of the translation unit.]  Compilation will now begin, with the following file:</p>\n\n<pre><code>// Contents of \"stdafx.h\" here.\n\nusing namespace std;\n\n\n\nclass theHisto {\npublic:\n\n    void printHisto()\n    {\n        for (int i = 1; i &lt; 12; i++)\n        {\n            //Output some asterisks for the histogram\n            for (int freq = (frequency[i] * 100 / rolls); freq &gt; 0; freq--)\n                cout &lt;&lt; \"*\";\n            cout &lt;&lt; endl;\n        }\n    }\n};\n// Contents of &lt;cstdlib&gt; here.\n// Contents of &lt;stdio.h&gt; here.\n// Contents of &lt;iostream&gt; here.\n\n\n\ntypedef unsigned int uint;\n\nuint rolls = 0, i = 0, die1 = 0, die2 = 0, output = 0, show = 0;\nuint frequency[12] = { 0 };\n\nclass Dice\n{\n\n\npublic:\n\n\n    void inline rollDie(uint rolls)\n    {\n        for (i = 1; i &lt;= rolls; i++) {\n            die1 = 1 + rand() % 6;\n            die2 = 1 + rand() % 6;\n            ++frequency[die1 + die2];\n        }\n    }\n};\n// Contents of \"histogram.cpp\" may also be here.\nusing namespace std;\n\n\n\nuint main()\n{\n    cout &lt;&lt; \"How many times would you like to roll the dice?\";\n    cin &gt;&gt; rolls;\n    Dice myDice;\n    myDice.rollDie(rolls);\n    theHisto mytheHisto;\n    mytheHisto.printHisto();\n}\n</code></pre></li>\n</ol>\n\n<p>Note, if you will, that the body of <code>histogram.cpp</code> is now placed <em>before</em> the body of <code>histogram.h</code>, meaning:</p>\n\n<ul>\n<li><code>frequency</code> is used before being declared.</li>\n<li><code>rolls</code> is used before being declared.</li>\n<li><code>std::cout</code> is used before <code>#include &lt;iostream&gt;</code> is encountered.</li>\n<li><code>std::endl</code> is used before <code>#include &lt;iostream&gt;</code> is encountered.</li>\n<li>If the compiler doesn't respect <code>#pragma once</code> the way you expect it to, class <code>theHisto</code> will be redefined.</li>\n</ul>\n\n<p>Thus, you get \"undefined variable used\" errors.</p>\n\n<p>Instead, you want your compiler to compile both <code>histogram.cpp</code> and <code>main.cpp</code>, and combine them during the linking phase.  While we're at it, since you already <code>#include \"stdafx.h\"</code> at the start of each <code>.cpp</code> file, there's no need to do the same in <code>histogram.h</code>.</p>\n\n<hr>\n\n<p>Next, <code>theHisto</code> should be defined in <code>histogram.h</code>, not <code>histogram.cpp</code>.</p>\n\n<pre><code>// histogram.h\n\n#pragma once\n// #include \"stdafx.h\"\n// #include \"histogram.cpp\"\n#include &lt;cstdlib&gt;\n#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\n\ntypedef unsigned int uint;\n\nuint rolls = 0, i = 0, die1 = 0, die2 = 0, output = 0, show = 0;\nuint frequency[12] = { 0 };\n\nclass Dice\n{\npublic:\n    void inline rollDie(uint rolls)\n    {\n        for (i = 1; i &lt;= rolls; i++) {\n            die1 = 1 + rand() % 6;\n            die2 = 1 + rand() % 6;\n            ++frequency[die1 + die2];\n        }\n    }\n};\n\nclass theHisto\n{\npublic:\n    void printHisto();\n};\n</code></pre>\n\n<p>And...</p>\n\n<pre><code>// histogram.cpp\n\n#include \"stdafx.h\"\n#include \"histogram.h\"\n\nusing namespace std;\n\nvoid theHisto::printHisto()\n{\n    for (int i = 1; i &lt; 12; i++)\n    {\n        //Output some asterisks for the histogram\n        for (int freq = (frequency[i] * 100 / rolls); freq &gt; 0; freq--)\n            cout &lt;&lt; \"*\";\n        cout &lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<p>This will resolve the errors, but will cause linkage errors, due to your global variables being defined in multiple compilation units.  To solve this, you can declare them as <code>extern</code> in <code>histogram.h</code>, and define them in one of the <code>.cpp</code> files.</p>\n\n<pre><code>// histogram.h\n\n#pragma once\n// #include \"stdafx.h\"\n// #include \"histogram.cpp\"\n#include &lt;cstdlib&gt;\n#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\n\n\n\ntypedef unsigned int uint;\n\nextern uint rolls, i, die1, die2, output, show;\nextern uint frequency[12];\n\nclass Dice\n{\npublic:\n    void inline rollDie(uint rolls)\n    {\n        for (i = 1; i &lt;= rolls; i++) {\n            die1 = 1 + rand() % 6;\n            die2 = 1 + rand() % 6;\n            ++frequency[die1 + die2];\n        }\n    }\n};\n\nclass theHisto\n{\npublic:\n    void printHisto();\n};\n</code></pre>\n\n<p>And...</p>\n\n<pre><code>// histogram.cpp\n\n#include \"stdafx.h\"\n#include \"histogram.h\"\n\nusing namespace std;\n\n\nuint rolls = 0, i = 0, die1 = 0, die2 = 0, output = 0, show = 0;\nuint frequency[12] = { 0 };\n\n\nvoid theHisto::printHisto()\n{\n    for (int i = 1; i &lt; 12; i++)\n    {\n        //Output some asterisks for the histogram\n        for (int freq = (frequency[i] * 100 / rolls); freq &gt; 0; freq--)\n            cout &lt;&lt; \"*\";\n        cout &lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<p>And...</p>\n\n<pre><code>// main.cpp\n\n#include \"stdafx.h\"\n#include \"histogram.h\"\n// #include \"histogram.cpp\"\nusing namespace std;\n\n// You could define your variables here, instead of in \"histogram.cpp\", if you wanted.\n\nuint main()\n{\n    cout &lt;&lt; \"How many times would you like to roll the dice?\";\n    cin &gt;&gt; rolls;\n    Dice myDice;\n    myDice.rollDie(rolls);\n    theHisto mytheHisto;\n    mytheHisto.printHisto();\n}\n</code></pre>\n\n<p>This will solve the linkage errors, and allow your code to compile.  Note that the compiler's command line should specify both <code>main.cpp</code> and <code>histogram.cpp</code>, and will likely look something like this (assuming Visual Studio, because of <code>stdafx.h</code>).</p>\n\n<pre><code>cl /EHsc main.cpp histogram.cpp\n</code></pre>\n\n<hr>\n\n<p>Alternatively, you can eliminate <code>histogram.cpp</code> entirely, by defining <code>theHisto::printHisto()</code> as inline.</p>\n\n<pre><code>// histogram.h\n\n#pragma once\n// #include \"stdafx.h\"\n// #include \"histogram.cpp\"\n#include &lt;cstdlib&gt;\n#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\n\n\n\ntypedef unsigned int uint;\n\nextern uint rolls, i, die1, die2, output, show;\nextern uint frequency[12];\n\nclass Dice\n{\npublic:\n    void inline rollDie(uint rolls)\n    {\n        for (i = 1; i &lt;= rolls; i++) {\n            die1 = 1 + rand() % 6;\n            die2 = 1 + rand() % 6;\n            ++frequency[die1 + die2];\n        }\n    }\n};\n\nusing namespace std;\n\nclass theHisto\n{\npublic:\n    void printHisto()\n    {\n        for (int i = 1; i &lt; 12; i++)\n        {\n            //Output some asterisks for the histogram\n            for (int freq = (frequency[i] * 100 / rolls); freq &gt; 0; freq--)\n                cout &lt;&lt; \"*\";\n            cout &lt;&lt; endl;\n        }\n    }\n};\n</code></pre>\n\n<p>And...</p>\n\n<pre><code>// main.cpp\n\n#include \"stdafx.h\"\n#include \"histogram.h\"\n// #include \"histogram.cpp\"\nusing namespace std;\n\n\n\nuint main()\n{\n    cout &lt;&lt; \"How many times would you like to roll the dice?\";\n    cin &gt;&gt; rolls;\n    Dice myDice;\n    myDice.rollDie(rolls);\n    theHisto mytheHisto;\n    mytheHisto.printHisto();\n}\n</code></pre>\n\n<p>This one will be compiled with the following, again assuming Visual Studio:</p>\n\n<pre><code>cl /EHsc main.cpp\n</code></pre>\n\n<hr>\n\n<p>Either of the previous two should fix your problem.  I would recommend the former, so you can also move <code>Dice::rollDie()</code> to <code>histogram.cpp</code>, as I did with <code>theHisto::printHisto()</code>.  Just remember not to <code>#include</code> any <code>.cpp</code> files, unless 1) they're included <em>after</em> any code they depend on, and 2) you only <code>#include</code> them in a single file, which should have a header guard.  [Note that if you know what you're doing, and how to break the second rule safely, you can pull off a lot of crazy tricks.]  It's generally better to tell the compiler to process each <code>.cpp</code> file as a separate translation unit, instead of just combining them into a single, massive blob.</p>\n\n<hr>\n\n<p>[See also the first comment on this answer, which contains further recommendations; they shouldn't be necessary to get your code to work, but will be useful.  If anything, the one most likely to break is <code>main()</code>'s return type; while <code>unsigned int</code> can be implicitly converted to <code>int</code>, not every compiler will agree with <code>main()</code> returning an <code>unsigned int</code> instead of an <code>int</code>.]</p>\n"}], "owner": {"reputation": 11, "user_id": 6895315, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10207530554358330/picture?type=large", "display_name": "Bren Bailey", "link": "https://stackoverflow.com/users/6895315/bren-bailey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1475090028, "creation_date": 1475085569, "last_edit_date": 1475086372, "question_id": 39754574, "link": "https://stackoverflow.com/questions/39754574/dice-game-c-error-undeclared-identifier-code-review", "title": "Dice Game c++ error undeclared identifier/code review", "body": "<p>I am working on everyone's favorite intro to C++ project. The Dice game. I am having a really hard time understanding how C++ sends info back and forth and how using functions and classes in separate files works. My biggest question is why do I get Undeclared Identifier on every single variable?...</p>\n\n<p>histogram.h</p>\n\n<pre><code>#pragma once\n#include \"stdafx.h\"\n#include \"histogram.cpp\"\n#include &lt;cstdlib&gt;\n#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\n\ntypedef unsigned int uint;\n\nuint rolls = 0, i = 0, die1 = 0, die2 = 0, output = 0, show = 0;\nuint frequency[12] = { 0 };\n\nclass Dice\n{\npublic:\n\n    void inline rollDie(uint rolls)\n    {\n        for (i = 1; i &lt;= rolls; i++) {\n            die1 = 1 + rand() % 6;\n            die2 = 1 + rand() % 6;\n            ++frequency[die1 + die2];\n        }\n    }\n}; \n</code></pre>\n\n<p>histogram.cpp</p>\n\n<pre><code>#include \"stdafx.h\"\n#include \"histogram.h\"\n\nusing namespace std;\n\nclass theHisto \n{\npublic:\n\n    void printHisto()\n    {\n        for (int i = 1; i &lt; 12; i++)\n        {\n            //Output some asterisks for the histogram\n            for (int freq = (frequency[i] * 100 / rolls); freq &gt; 0; freq--)\n                cout &lt;&lt; \"*\";\n            cout &lt;&lt; endl;\n        }\n    }\n};\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include \"stdafx.h\"\n#include \"histogram.h\"\n#include \"histogram.cpp\"\n\nusing namespace std;\n\nuint main()\n{\n    cout &lt;&lt; \"How many times would you like to roll the dice?\";\n    cin &gt;&gt; rolls;\n    Dice myDice;\n    myDice.rollDie(rolls);\n    theHisto mytheHisto;\n    mytheHisto.printHisto();\n}\n</code></pre>\n\n<p>Sorry if this is messy but when I copy code into the \"Enter code here\" box it just shows up as regular text so I had to indent each line by 4 spaces so formatting may be a little off....</p>\n"}, {"tags": ["c++", "c", "vim", "vim-plugin"], "comments": [{"owner": {"reputation": 29614, "user_id": 15934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66027fd61cc5e638b5d3057859e1be51?s=128&d=identicon&r=PG", "display_name": "Luc Hermitte", "link": "https://stackoverflow.com/users/15934/luc-hermitte"}, "edited": false, "score": 0, "creation_date": 1475085474, "post_id": 39753967, "comment_id": 66805087, "body": "Looks like an error in c.vim. The best is to contact the author or open an issue or the project forge."}, {"owner": {"reputation": 352, "user_id": 6623360, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e8607f3d22e18ba53106c651a564dab0?s=128&d=identicon&r=PG&f=1", "display_name": "aks", "link": "https://stackoverflow.com/users/6623360/aks"}, "reply_to_user": {"reputation": 29614, "user_id": 15934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66027fd61cc5e638b5d3057859e1be51?s=128&d=identicon&r=PG", "display_name": "Luc Hermitte", "link": "https://stackoverflow.com/users/15934/luc-hermitte"}, "edited": false, "score": 0, "creation_date": 1475247016, "post_id": 39753967, "comment_id": 66881572, "body": "@LucHermitte I will do that. Thank you for helping."}, {"owner": {"reputation": 29614, "user_id": 15934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66027fd61cc5e638b5d3057859e1be51?s=128&d=identicon&r=PG", "display_name": "Luc Hermitte", "link": "https://stackoverflow.com/users/15934/luc-hermitte"}, "edited": false, "score": 0, "creation_date": 1475247614, "post_id": 39753967, "comment_id": 66881948, "body": "Sorry I cannot do more (I&#39;m maintaining an alternative solution for C++, and thus I not using c.vim -- I wasn&#39;t even aware they introduced a support for CMake)"}], "answers": [{"tags": [], "owner": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "is_accepted": true, "score": 0, "last_activity_date": 1480582540, "creation_date": 1480582540, "answer_id": 40906241, "question_id": 39753967, "link": "https://stackoverflow.com/questions/39753967/commands-given-for-cmake-and-doxygen-in-vimrc-give-error-on-gvim-start-up/40906241#40906241", "title": "Commands given for cmake and doxygen in _vimrc give error on gvim start up?", "body": "<p><em>(Posted on behalf of the OP)</em>.</p>\n\n<p>I <a href=\"https://github.com/WolfgangMehner/vim-plugins/issues/33\" rel=\"nofollow noreferrer\">opened an issue</a> on C-Support's Github page, and the problem was solved.</p>\n"}], "owner": {"reputation": 352, "user_id": 6623360, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e8607f3d22e18ba53106c651a564dab0?s=128&d=identicon&r=PG&f=1", "display_name": "aks", "link": "https://stackoverflow.com/users/6623360/aks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 40906241, "answer_count": 1, "score": 0, "last_activity_date": 1480582584, "creation_date": 1475083361, "last_edit_date": 1480582584, "question_id": 39753967, "link": "https://stackoverflow.com/questions/39753967/commands-given-for-cmake-and-doxygen-in-vimrc-give-error-on-gvim-start-up", "title": "Commands given for cmake and doxygen in _vimrc give error on gvim start up?", "body": "<p>I am a beginner to vim and just downloaded the c-support plugin (for C/C++ programming) from the following link: <a href=\"http://www.vim.org/scripts/script.php?script_id=213\" rel=\"nofollow noreferrer\">http://www.vim.org/scripts/script.php?script_id=213</a> <a href=\"http://www.vim.org/scripts/script.php?script_id=213\" rel=\"nofollow noreferrer\"></a></p>\n\n<p>As advised in the link, to enable cmake and doxygen, i added the following lines to my _vimrc:</p>\n\n<p><code>let  g:C_UseTool_cmake    = 'yes'\n let  g:C_UseTool_doxygen = 'yes'</code></p>\n\n<p>However, now when I start up gvim, I get the following error message dialog:</p>\n\n<pre><code>Could not load the tool \"cmake\" (Vim(let):E117: Unknown function: mmtoolbox#make#Interface)- occurred at C:\\Users\\Satyendra\\Vim\\vimfiles\\autoload\\mmtoolbox\\cmake.vim, line 219\n</code></pre>\n\n<p>My OS is Windows 10. How do I resolve this error?</p>\n"}, {"tags": ["c++", "c", "makefile"], "answers": [{"comments": [{"owner": {"reputation": 48, "user_id": 5135639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YhTG5.png?s=128&g=1", "display_name": "aracyla", "link": "https://stackoverflow.com/users/5135639/aracyla"}, "edited": false, "score": 0, "creation_date": 1475084060, "post_id": 39754027, "comment_id": 66804257, "body": "<code>$(BUILD_DIR)&#47;%.o: %.c $(HEADERS)</code> I did this, but I&#39;m getting the same result. &gt; This was my original rule, but I&#39;ve changed because I saw someone using %.c.o on some site"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 48, "user_id": 5135639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YhTG5.png?s=128&g=1", "display_name": "aracyla", "link": "https://stackoverflow.com/users/5135639/aracyla"}, "edited": false, "score": 0, "creation_date": 1475087224, "post_id": 39754027, "comment_id": 66806203, "body": "@PescadorParrudo, <code>%.c.o</code> looks like a bogus amalgamation of a pattern rule and a suffix rule.  That &quot;someone used it on some other site&quot; is not much relevant.  It looks like a pattern rule is what you really want, and in that case the appropriate target is almost certainly <code>$(BUILD_DIR)&#47;%.o</code>."}, {"owner": {"reputation": 48, "user_id": 5135639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YhTG5.png?s=128&g=1", "display_name": "aracyla", "link": "https://stackoverflow.com/users/5135639/aracyla"}, "edited": false, "score": 0, "creation_date": 1475091182, "post_id": 39754027, "comment_id": 66808161, "body": "<code>%.c.o</code> Creates an .o file from .c one(according to manual). I tried this <code>$(BUILD_DIR)&#47;%.o</code>  and got stuck in the same error."}], "tags": [], "owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "is_accepted": false, "score": 1, "last_activity_date": 1475083584, "creation_date": 1475083584, "answer_id": 39754027, "question_id": 39753899, "link": "https://stackoverflow.com/questions/39753899/makefile-implicit-rule-not-working/39754027#39754027", "title": "Makefile implicit rule not working", "body": "<p>Take a hard look at your pattern rule:</p>\n\n<pre><code>$(BUILD_DIR)/%.c.o: %.c $(HEADERS)\n</code></pre>\n\n<p>It matches filenames with a <code>.c.o</code> extension. The error message indicates that you're trying to build <code>build/serial_test.o</code>, which doesn't match the pattern because the path doesn't end in <code>.c.o</code>.</p>\n\n<p>Fix your pattern in your build rule, or your <code>patsubst</code> to replace <code>.c</code> with <code>.c.o</code>, so that the pattern rule will match.</p>\n"}, {"comments": [{"owner": {"reputation": 48, "user_id": 5135639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YhTG5.png?s=128&g=1", "display_name": "aracyla", "link": "https://stackoverflow.com/users/5135639/aracyla"}, "edited": false, "score": 0, "creation_date": 1475257952, "post_id": 39758582, "comment_id": 66887488, "body": "I&#39;ve used TEST_OBJECTS to get a list of all test objects. Probably this was not the best design for my purpose, but what I were trying to do was a makefile(with two main rules, one for the real project executable and another for the tests). I struggled on the &quot;file tree organization&quot;. If you have any makefile design book(or site) I would appreciate."}, {"owner": {"reputation": 19253, "user_id": 657267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dcf516021abb964aecd6ae2386fd59d?s=128&d=identicon&r=PG", "display_name": "user657267", "link": "https://stackoverflow.com/users/657267/user657267"}, "reply_to_user": {"reputation": 48, "user_id": 5135639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YhTG5.png?s=128&g=1", "display_name": "aracyla", "link": "https://stackoverflow.com/users/5135639/aracyla"}, "edited": false, "score": 0, "creation_date": 1475276328, "post_id": 39758582, "comment_id": 66894787, "body": "@PescadorParrudo read through the <a href=\"https://www.gnu.org/software/make/manual/\" rel=\"nofollow noreferrer\">manual</a> at least once, the <a href=\"http://make.mad-scientist.net/\" rel=\"nofollow noreferrer\">maintainer</a> also has some good info in the papers and musings section. Beware of make info online or in books, a lot of it is outdated because very few people are using plain make nowadays."}], "tags": [], "owner": {"reputation": 19253, "user_id": 657267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dcf516021abb964aecd6ae2386fd59d?s=128&d=identicon&r=PG", "display_name": "user657267", "link": "https://stackoverflow.com/users/657267/user657267"}, "is_accepted": true, "score": 1, "last_activity_date": 1475113799, "last_edit_date": 1475113799, "creation_date": 1475101353, "answer_id": 39758582, "question_id": 39753899, "link": "https://stackoverflow.com/questions/39753899/makefile-implicit-rule-not-working/39758582#39758582", "title": "Makefile implicit rule not working", "body": "<ul>\n<li>You're mixing pattern and suffix rules, stick with the pattern rule</li>\n<li>Not entirely sure what you're trying to do with <code>TEST_OBJECTS</code></li>\n<li>You're making every object depend on every header, use dependency generation instead</li>\n<li>The rule for <code>serial_test</code> is broken, <strong>always</strong> use <code>$@</code> as the output of any given rule</li>\n<li>Make the directories a prerequisite</li>\n<li>Recycle the built-in recipes (<code>COMPILE.c</code>, <code>LINK.o</code>)</li>\n</ul>\n\n<pre class=\"lang-none prettyprint-override\"><code>display_string := -Ddisplay_string\n\nsource_dir := src\nheader_dir := src\nbuild_dir  := build\nbin_dir    := bin\n\u00a0\nsources := $(wildcard $(source_dir)/*.c)\nobjects :=\u00a0$(sources:$(source_dir)/%.c=$(build_dir)/%.o)\n\u00a0\ntest_dir    := src/test\ntest_target := serial_test\n\u00a0\ntest_sources := $(wildcard $(test_dir)/*_test.c)\ntest_objects := $(test_sources:$(test_dir)/%.c=$(build_dir)/%.o) $(objects)\n\u00a0\ndeps := $(test_objects:%.o=%.d)\n\nCPPFLAGS := $(display_string) -I$(header_dir) -MMD -MP\n\u00a0 \u00a0 \n$(bin_dir)/serial_test: $(test_objects) | $(bin_dir)\n    $(LINK.o) $^ $(LDLIBS) -o $@\n\u00a0 \u00a0 \n$(build_dir)/%.o: $(source_dir)/%.c | $(build_dir)\n    $(COMPILE.c) $(OUTPUT_OPTION) $&lt;\n\u00a0\n$(build_dir) $(bin_dir): ; mkdir $@\n\u00a0 \u00a0 \nclean: ; $(RM) serial_test $(objects) $(deps)\n\n-include $(deps)\n</code></pre>\n"}], "owner": {"reputation": 48, "user_id": 5135639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YhTG5.png?s=128&g=1", "display_name": "aracyla", "link": "https://stackoverflow.com/users/5135639/aracyla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1108, "favorite_count": 0, "accepted_answer_id": 39758582, "answer_count": 2, "score": 0, "last_activity_date": 1475113799, "creation_date": 1475083154, "last_edit_date": 1475100903, "question_id": 39753899, "link": "https://stackoverflow.com/questions/39753899/makefile-implicit-rule-not-working", "title": "Makefile implicit rule not working", "body": "<p>I have this makefile and i'm trying to write some test targets</p>\n\n<pre><code>#This a make file of serial communication driver that i'm writing.\n#serial_target would be a target to test this driver isolated.\n\u00a0\nCC = gcc\n\u00a0\nDISPLAY_STRING = -DDISPLAY_STRING\nLFLAGS = \nCFLAGS = $(DISPLAY_STRING) \n\u00a0\n#mains macros\nBUILD_DIR =build\nSOURCE_DIR =src\nHEADER_DIR =src\nBIN_DIR =bin\n\u00a0\nSOURCES = $(wildcard $(SOURCE_DIR)/*.c)\nOBJECTS = \u00a0$(patsubst $(SOURCE_DIR)/%.c, $(BUILD_DIR)/%.o, $(SOURCES))\nHEADERS = \u00a0$(patsubst $(SOURCE_DIR)/%.c, $(HEADER_DIR)/%.h, $(SOURCES))\n\u00a0\n\u00a0\n#serial_tests\nTEST_DIR=src/test\nTEST_TARGET=serial_test\n\u00a0\nTEST_SOURCES = $(wildcard $(TEST_DIR)/*_test.c) \\\n\u00a0 \u00a0 $(SOURCES)\nTEST_OBJECTS = $(filter %.o ,$(patsubst %.c, $(BUILD_DIR)/%.o, $(subst /, , $(TEST_SOURCES))))\nTEST_HEADERS = $(TEST_SOURCES:.c=.h)\n\u00a0\n\u00a0\nall:\n\u00a0 \u00a0 \nserial_test: $(TEST_OBJECTS)\n\u00a0 \u00a0 $(CC) $(CFLAGS) -I$(SOURCE_DIR) -I$(HEADER_DIR) -o $(BIN_DIR)/$@ $^\n\u00a0 \u00a0 \n$(BUILD_DIR)/%.c.o: %.c $(HEADERS)\n\u00a0 \u00a0 $(CC) $(CFLAGS) -I$(HEADER_DIR) -I$(SOURCE_DIR) -c $&lt; -o $@ \u00a0 \u00a0 \n\u00a0\nsetup:\n\u00a0 \u00a0 mkdir $(BUILD_DIR)\n\u00a0 \u00a0 mkdir $(BIN_DIR)\n\u00a0 \u00a0 \nclean:\n\u00a0 \u00a0 rm -rf $(EXEC) $(OBJECTS)\n</code></pre>\n\n<p>When running \"make serial_test\", I'm always getting this:</p>\n\n<pre><code>make: *** No rule to make target `build/serial_test.o', needed by `serial_test'. Stop.\n</code></pre>\n\n<p>Here's the doubt. Why I'm receiving this error if the rule $(BUILD_DIR)/%.c.o exists?</p>\n\n<blockquote>\n  <p>Edit</p>\n</blockquote>\n\n<p>To make sure that everything else was working I've tried this(this works fine)</p>\n\n<pre><code>serial_test: $(TEST_OBJECTS)\n    $(CC) $(CFLAGS) -I$(SOURCE_DIR) -I$(HEADER_DIR) -o $(BIN_DIR)/$@ $^\nbuild/serial_test.o: src/test/serial_test.c\n    $(CC) $(CFLAGS) -I$(HEADER_DIR) -I$(SOURCE_DIR) -c $&lt; -o $@ \nbuild/serialCom_xsens.o: src/serialCom_xsens.c\n    $(CC) $(CFLAGS) -I$(HEADER_DIR) -I$(SOURCE_DIR) -c $&lt; -o $@\n</code></pre>\n\n<p>To make sure that the variable BUILD_DIR was note empty i did this:</p>\n\n<pre><code>$(BUILD_DIR)/serial_test.o: %.c\n    $(CC) $(CFLAGS) -I$(HEADER_DIR) -I$(SOURCE_DIR) -c $&lt; -o $@\n</code></pre>\n\n<p>With this code above, I got another error: </p>\n\n<pre><code>make: *** No rule to make target `%.c', needed by `build/serial_test.o'. Stop.\n</code></pre>\n\n<ul>\n<li><p>Is there any chance of %.c and %.o rules are broken?</p></li>\n<li><p>If you have any design tips just answer. That would be helpful too.</p></li>\n</ul>\n"}, {"tags": ["c++", "iomanip"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1475085539, "post_id": 39753857, "comment_id": 66805134, "body": "You have two streams. <code>setPri</code> operates on the wrapper stream; <code>sync</code> operates on the wrapped stream."}, {"owner": {"reputation": 232, "user_id": 79178, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3b12de015ea506efbd7e9660fbce61f3?s=128&d=identicon&r=PG", "display_name": "HankB", "link": "https://stackoverflow.com/users/79178/hankb"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1475094702, "post_id": 39753857, "comment_id": 66810159, "body": "since MyStream is derived from ostream and does not redefine iword(), shouldn&#39;t MyStream:: iword() forward to ostream:: iword() and isn&#39;t that the ostream for which iword() was assigned the new value? Are there really two distinct streams here or one that &#39;wraps&#39; the other?  Thanks"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1475095627, "post_id": 39753857, "comment_id": 66810702, "body": "<code>setPri</code> sets the <code>iword</code> on <code>MyStream</code>. But <code>MyStreamBuf</code> reads the <code>iword</code> on <code>cout</code>."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1475095790, "post_id": 39753857, "comment_id": 66810793, "body": "Also, <code>ostream(&amp;buffer)</code> is extremely questionable at best because it passes a not-yet-constructed stream buffer to <code>ostream</code>&#39;s constructor. Default construct the stream, and then use <code>rdbuf()</code> in the constructor body instead."}, {"owner": {"reputation": 232, "user_id": 79178, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3b12de015ea506efbd7e9660fbce61f3?s=128&d=identicon&r=PG", "display_name": "HankB", "link": "https://stackoverflow.com/users/79178/hankb"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1475159058, "post_id": 39753857, "comment_id": 66840259, "body": "Thanks - I&#39;ve edited the example code to use rdbuf() instead of the initializer list. Now to figure out how to get the setPri initializer into the correct stream."}], "answers": [{"comments": [{"owner": {"reputation": 232, "user_id": 79178, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3b12de015ea506efbd7e9660fbce61f3?s=128&d=identicon&r=PG", "display_name": "HankB", "link": "https://stackoverflow.com/users/79178/hankb"}, "edited": false, "score": 0, "creation_date": 1475094469, "post_id": 39755272, "comment_id": 66810018, "body": "Thanks, Bo. That&#39;s an embarrassing mistake. Now I understand the code a little better and that&#39;s the way it is supposed to work. The call to priIDX() is meant to return the same value every time so the same value in the array managed by xalloc() will be referenced. (Subsequent calls to xalloc() to return incrementing values.)"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 232, "user_id": 79178, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3b12de015ea506efbd7e9660fbce61f3?s=128&d=identicon&r=PG", "display_name": "HankB", "link": "https://stackoverflow.com/users/79178/hankb"}, "edited": false, "score": 0, "creation_date": 1543252669, "post_id": 39755272, "comment_id": 93841784, "body": "@HankB If this solved your issue, I&#39;d encourage you to accept this answer for the good of any future reader."}], "tags": [], "owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "is_accepted": false, "score": 2, "last_activity_date": 1475087961, "creation_date": 1475087961, "answer_id": 39755272, "question_id": 39753857, "link": "https://stackoverflow.com/questions/39753857/unexpected-results-from-ios-basexalloc-and-ostreamiword-iomanip/39755272#39755272", "title": "Unexpected results from ios_base::xalloc() and ostream::iword() (iomanip)", "body": "<pre><code>static int priIDX() {   // find index for storing priority choice\n    static int rc = ios_base::xalloc();\n    return rc;\n}\n</code></pre>\n\n<p>This will always return the same value, as <em>your</em> value is static. And therefore only initialized on the first call.</p>\n\n<p>The storage for the <code>iword</code> data is dynamic and allocated separately by each stream object whenever something is stored there.</p>\n"}], "owner": {"reputation": 232, "user_id": 79178, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3b12de015ea506efbd7e9660fbce61f3?s=128&d=identicon&r=PG", "display_name": "HankB", "link": "https://stackoverflow.com/users/79178/hankb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1475158910, "creation_date": 1475083028, "last_edit_date": 1475158910, "question_id": 39753857, "link": "https://stackoverflow.com/questions/39753857/unexpected-results-from-ios-basexalloc-and-ostreamiword-iomanip", "title": "Unexpected results from ios_base::xalloc() and ostream::iword() (iomanip)", "body": "<p>My goal is to have an iomanip inserter with parameter that can be used to determine if a message will be printed to the stream (or not.) The idea is that a static mask will include bits set for the categories of messages that should be streamed (and bits cleared for messages to be discarded.) The inserter will be used to specify what category (or categories) a message belongs to and if the mask anded with the presented categories is not zero, the message would be streamed out. I have this working but with file scope mask and categories. It seems to me that (at least the category) could be stored with the stream using xalloc() to provide an index and iword() to store/retrieve values at that index but that seems not to be working for me. I have read various Internet references for these functions and my expectation is that sequential calls to xalloc() should return increasing values. In the code below the value returned is always 4. My second puzzlement is where the storage for the iword() backing store is held. Is this static for ostream? Part of every ostream object?</p>\n\n<p>Code follows</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n// from http://stackoverflow.com/questions/2212776/overload-handling-of-stdendl\n//\n// g++ -o blah blah.cpp\n//\n// Adding an iomanip with argument as in \n// http://stackoverflow.com/questions/20792101/how-to-store-formatting-settings-with-an-iostream\n//\n\nusing namespace std;\n\n// don't really want file scope variables... Can these be stored in stream?\nstatic int pri=0;       // value for a message\nstatic int mask=1;      // mask for enabled output (if pri&amp;mask =&gt; output)\n\nstatic int priIDX() {   // find index for storing priority choice\n    static int rc = ios_base::xalloc();\n    return rc;\n}\n\nclass setPri // Store priority in stream (but how to retrieve when needed?)\n{\n    size_t _n;\npublic:\n    explicit setPri(size_t n): _n(n) {}\n    size_t getn() const {return _n;}\n    friend ostream&amp; operator&lt;&lt;(ostream&amp; os, const setPri&amp; obj)\n    {\n        size_t n = obj.getn();\n        int ix = priIDX();\n        pri = os.iword(ix) = n;     // save in stream (?) and to file scope variable\n        os &lt;&lt; \"setPri(\" &lt;&lt; n &lt;&lt; \") ix:\" &lt;&lt; ix &lt;&lt; \" \";       // indicate update\n        return os;\n    }\n};\n\nclass MyStream: public ostream\n{\n    // Write a stream buffer that discards if mask &amp; pri not zero\n    class MyStreamBuf: public stringbuf\n    {\n        ostream&amp;   output;\n        public:\n            MyStreamBuf(ostream&amp; str)\n                :output(str)\n            {}\n\n        // When we sync the stream with the output. \n        // 1) report priority mask (temporary)\n        // 2) Write output if same bit set in mask and priority\n        // 3) flush the actual output stream we are using.\n        virtual int sync ( )\n        {\n            int ix = priIDX();\n\n            int myPri(output.iword(ix));\n            output &lt;&lt; \"ix:\" &lt;&lt; ix &lt;&lt; \" myPri:\" &lt;&lt; myPri &lt;&lt; '\\n';\n\n            if( mask &amp; pri) // can't use (myPri&amp;mask)\n                output &lt;&lt; ' ' &lt;&lt; str();\n            str(\"\");\n            output.flush();\n            return 0;\n        }\n    };\n\n    // My Stream just uses a version of my special buffer\n    MyStreamBuf buffer;\n    public:\n        MyStream(ostream&amp; str)\n            :buffer(str)\n        {\n            rdbuf(&amp;buffer);\n        }\n};\n\nint main()\n{\n    MyStream myStream(cout);\n    myStream &lt;&lt; setPri(1) &lt;&lt; \" this should output\" &lt;&lt; endl;\n    myStream &lt;&lt; setPri(2) &lt;&lt; \" this should not output\" &lt;&lt; endl;\n    myStream &lt;&lt; setPri(3) &lt;&lt; \" this should also output\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Note that in sync() the code tries to fetch the value from the stream but the returned value is always 0 as if it was not set to begin with.</p>\n\n<p>In my searches to get to this point I have seen comments that it is not a good idea to subclass an ostream. Feel free to suggest a better alternative! (That I can understand. ;) )</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "c", "linux"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1475082787, "post_id": 39753735, "comment_id": 66803582, "body": "In short: No, its not possible."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 2, "creation_date": 1475083105, "post_id": 39753735, "comment_id": 66803744, "body": "In theory it is possible to mangle both libraries together in a single library, but practically there are no tools to do so. But this is completely irrelevant. Determining how a shared library is linked is not a big mystery. It is trivial to determine to which libraries a particular shared libraries is linked with. Either the shared library is linked with another library, or it&#39;s not. There is no vague, indeterminate, intermediate state. It should be possible to answer this question in no more than a few seconds."}, {"owner": {"reputation": 32382, "user_id": 587803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7431a850a166ca3a648141c532aa9d0?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/587803/ben"}, "edited": false, "score": 0, "creation_date": 1475664777, "post_id": 39753735, "comment_id": 67030594, "body": "Run the application in whatever debugger you use, you should get diagnostic messages telling you which libraries are being loaded in what order."}], "owner": {"reputation": 61, "user_id": 3510717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1c677f7080d2eb53c9eb36efdd374d1?s=128&d=identicon&r=PG&f=1", "display_name": "poloDD", "link": "https://stackoverflow.com/users/3510717/polodd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1475082579, "creation_date": 1475082579, "question_id": 39753735, "link": "https://stackoverflow.com/questions/39753735/how-to-link-library-from-dynamic-to-static-without-binary-source-code", "title": "How to link library from dynamic to static without binary source code?", "body": "<p>I want to know if it's possible for a library linked dynamically to another library to make this link static without the library's source code, so without any possibility of library's recompilation.</p>\n\n<p>I suspect a library, linked dynamically to my application, not loading one of its own dynamically linked library properly, or too late, while the application is running, resulting in troubles. </p>\n\n<p>That's why I want to make the link static. </p>\n\n<p>I was thinking also to make the library causing troubles to link (static or dynamic) directly to the application. But the library would be linked twice. Sounds not good for me. </p>\n"}, {"tags": ["c++", "std", "ofstream"], "comments": [{"owner": {"reputation": 46142, "user_id": 773113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FKKLW.jpg?s=128&g=1", "display_name": "Mike Nakis", "link": "https://stackoverflow.com/users/773113/mike-nakis"}, "edited": false, "score": 3, "creation_date": 1475082880, "post_id": 39753721, "comment_id": 66803625, "body": "how large is your vector? and how long is &quot;some time&quot;?"}, {"owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "edited": false, "score": 1, "creation_date": 1475082904, "post_id": 39753721, "comment_id": 66803643, "body": "what does your vector contain?"}, {"owner": {"reputation": 839, "user_id": 2832872, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/709868624/picture?type=large", "display_name": "Diego Fernando Pava", "link": "https://stackoverflow.com/users/2832872/diego-fernando-pava"}, "edited": false, "score": 1, "creation_date": 1475083335, "post_id": 39753721, "comment_id": 66803872, "body": "its like 300k doubles, and is taking almost 3 mins."}, {"owner": {"reputation": 839, "user_id": 2832872, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/709868624/picture?type=large", "display_name": "Diego Fernando Pava", "link": "https://stackoverflow.com/users/2832872/diego-fernando-pava"}, "edited": false, "score": 0, "creation_date": 1475083586, "post_id": 39753721, "comment_id": 66803998, "body": "my vector contain doubles, mostly numbers less between 10 and -10 with a lot of decimals"}, {"owner": {"reputation": 831, "user_id": 910769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eaa2d13828dc4c759c60956c3bbff0f7?s=128&d=identicon&r=PG", "display_name": "rudimeier", "link": "https://stackoverflow.com/users/910769/rudimeier"}, "edited": false, "score": 3, "creation_date": 1475084001, "post_id": 39753721, "comment_id": 66804225, "body": "I guess the most speed-up would be reached by using a faster double to string conversion, with hardcoded format and precision. Once I&#39;ve written my own ftoa function (for certain float ranges) which was factor 20 faster. <a href=\"https://github.com/rudimeier/atem/blob/master/src/ftoa.c\" rel=\"nofollow noreferrer\">github.com/rudimeier/atem/blob/master/src/ftoa.c</a>"}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1475085285, "post_id": 39753721, "comment_id": 66804968, "body": "This should have been on <a href=\"http://codereview.stackexchange.com/\"><b>CodeReview</b></a> instead?"}, {"owner": {"reputation": 101, "user_id": 4882453, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/S6N4n.jpg?s=128&g=1", "display_name": "Trojan404", "link": "https://stackoverflow.com/users/4882453/trojan404"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 5, "creation_date": 1475085456, "post_id": 39753721, "comment_id": 66805076, "body": "@FirstStep: CR is for reviewing code. The OP is asking how to do something more efficiently. That would be off-topic on CR. Also, if something already has answers, a migration is usually not suggested."}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "reply_to_user": {"reputation": 101, "user_id": 4882453, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/S6N4n.jpg?s=128&g=1", "display_name": "Trojan404", "link": "https://stackoverflow.com/users/4882453/trojan404"}, "edited": false, "score": 0, "creation_date": 1475085530, "post_id": 39753721, "comment_id": 66805126, "body": "@Trojan404 Is it? I did not see that on <a href=\"http://codereview.stackexchange.com/help/on-topic\">What topics can I ask about there</a>. Thanks for letting me know."}, {"owner": {"reputation": 6316, "user_id": 3323096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1227f90127f0f7b8678a8c13261f48b4?s=128&d=identicon&r=PG", "display_name": "Vality", "link": "https://stackoverflow.com/users/3323096/vality"}, "edited": false, "score": 0, "creation_date": 1475178835, "post_id": 39753721, "comment_id": 66852088, "body": "I don;t have time to write a proper answer, but I suspect a lot of the overhead is from doing a lot of small (though buffered) writes. I expect you will get better performance if you create the file in advance, truncate (yes, it is counter-intuitive to truncate something larger) it to the size required, mmap the entire thing into your memory space then write the data into the memory buffer. The needed commands will vary per OS but I suspect this will give a major performance boost. You may also get something from unrolling the loop a little if you know your vector is a multiple of n doubles."}], "answers": [{"comments": [{"owner": {"reputation": 11788, "user_id": 2360169, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/x8M06.jpg?s=128&g=1", "display_name": "Michael Gunter", "link": "https://stackoverflow.com/users/2360169/michael-gunter"}, "edited": false, "score": 4, "creation_date": 1475083009, "post_id": 39753823, "comment_id": 66803699, "body": "Also, given that it&#39;s a vector of doubles, using a non-ref iteration variable (<code>for (auto x : vector)</code>) may be faster -- it trades a dereference for a double-copy."}, {"owner": {"reputation": 839, "user_id": 2832872, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/709868624/picture?type=large", "display_name": "Diego Fernando Pava", "link": "https://stackoverflow.com/users/2832872/diego-fernando-pava"}, "edited": false, "score": 0, "creation_date": 1475083428, "post_id": 39753823, "comment_id": 66803922, "body": "thank you so, much, as I told you I am just learning and I am self teaching myself c++ soi errors like this I understand are common."}, {"owner": {"reputation": 839, "user_id": 2832872, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/709868624/picture?type=large", "display_name": "Diego Fernando Pava", "link": "https://stackoverflow.com/users/2832872/diego-fernando-pava"}, "edited": false, "score": 0, "creation_date": 1475083490, "post_id": 39753823, "comment_id": 66803947, "body": "one question, even if I open a second stream to write to another text file I don&#39;t need to close?"}, {"owner": {"reputation": 11788, "user_id": 2360169, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/x8M06.jpg?s=128&g=1", "display_name": "Michael Gunter", "link": "https://stackoverflow.com/users/2360169/michael-gunter"}, "edited": false, "score": 1, "creation_date": 1475083535, "post_id": 39753823, "comment_id": 66803969, "body": "FYI: The item mentioned in my comment does yield better performance on my machine, but it&#39;s on the scale of about 1 tick per 10,000,000 items. If your vector contained more complex data (or data wider than 64-bit), then @LogicStuff&#39;s answer is better."}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 1, "creation_date": 1475083723, "post_id": 39753823, "comment_id": 66804092, "body": "The stream manipulators change persistent state, right?  So you could set the precision to 10 once before the loop instead of every time.  Admittedly, this is probably a much smaller factor than the extra flush hidden in the <code>std::endl</code>."}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 1, "creation_date": 1475083917, "post_id": 39753823, "comment_id": 66804182, "body": "The range for loop also avoids the <code>vector::at</code> calls, which are bounds checked and thus possibly slower than <code>vector::operator[]</code>, which is also avoided with the range for loop."}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "reply_to_user": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1475084132, "post_id": 39753823, "comment_id": 66804296, "body": "@AdrianMcCarthy Yeah, thanks. There&#39;s too much <i>not completely right</i> for me to catch and quickly write down."}, {"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 4, "creation_date": 1475084154, "post_id": 39753823, "comment_id": 66804309, "body": "I thought post-increment wasn&#39;t a problem anymore, since C++11?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1475084255, "post_id": 39753823, "comment_id": 66804365, "body": "Also, assign the result of <code>vector.size()</code> to a constant variable before the loop so that the function isn&#39;t called for each iteration."}, {"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 1, "creation_date": 1475084483, "post_id": 39753823, "comment_id": 66804507, "body": "Again, doesn&#39;t the compiler optimise this away?"}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 1, "creation_date": 1475084964, "post_id": 39753823, "comment_id": 66804802, "body": "<a href=\"http://stackoverflow.com/a/3901666/3552770\">Concerning the <code>vector.size()</code></a>. To the pre/post-increment, it doesn&#39;t hurt to get used to the former, for genericity."}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "reply_to_user": {"reputation": 839, "user_id": 2832872, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/709868624/picture?type=large", "display_name": "Diego Fernando Pava", "link": "https://stackoverflow.com/users/2832872/diego-fernando-pava"}, "edited": false, "score": 0, "creation_date": 1475085326, "post_id": 39753823, "comment_id": 66804995, "body": "@DiegoFernandoPava You&#39;d need to call <code>close</code> and <code>open</code> again. Or use move-assignment. Or use two different <code>std::ofstream</code> objects, one of which gets destructed before the creation of the other."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "reply_to_user": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 1, "creation_date": 1475093527, "post_id": 39753823, "comment_id": 66809465, "body": "The only way to answer questions like &quot;doesn&#39;t the compiler optimise this away&quot; is by <b>actually looking at the output generated by your compiler</b>. Either disassemble the binary, or ask your compiler to generate an assembly listing. There are no hard and fast rules. Yes, <i>usually</i> a sufficiently smart optimizer will perform loop-invariant hoisting, but there are no guarantees, certainly not in cases where the code is complicated enough that you are uncertain. And never <i>guess</i> when trying to optimize. Assembly can be difficult to read, but you can usually grok enough to tell. @robinson"}, {"owner": {"reputation": 5341, "user_id": 1544627, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e3c9a2004cd3ab997fbde2c3959811dd?s=128&d=identicon&r=PG", "display_name": "sudo make install", "link": "https://stackoverflow.com/users/1544627/sudo-make-install"}, "edited": false, "score": 0, "creation_date": 1475653062, "post_id": 39753823, "comment_id": 67023297, "body": "Jason Turner has a great C++ Weekly episode about this topic.  <a href=\"https://www.youtube.com/watch?v=GMqQOEZYVJQ\" rel=\"nofollow noreferrer\">youtube.com/watch?v=GMqQOEZYVJQ</a>"}, {"owner": {"reputation": 293, "user_id": 1054539, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/75a605a624f74230b5f0e6b58d193a0a?s=128&d=identicon&r=PG", "display_name": "GBrookman", "link": "https://stackoverflow.com/users/1054539/gbrookman"}, "reply_to_user": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 0, "creation_date": 1475841424, "post_id": 39753823, "comment_id": 67117274, "body": "@Robinson post increment isn&#39;t wanted or needed here. Just as you can say less variables when you mean fewer variables and people will understand you, you shouldn&#39;t. Even though the compiler will save you why not write code that reads correctly?"}], "tags": [], "owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "is_accepted": false, "score": 72, "last_activity_date": 1475097845, "last_edit_date": 1495541813, "creation_date": 1475082891, "answer_id": 39753823, "question_id": 39753721, "link": "https://stackoverflow.com/questions/39753721/fast-way-to-write-data-from-a-stdvector-to-a-text-file/39753823#39753823", "title": "Fast way to write data from a std::vector to a text file", "body": "<pre><code>std::ofstream fout(\"vector.txt\");\nfout &lt;&lt; std::setprecision(10);\n\nfor(auto const&amp; x : vector)\n    fout &lt;&lt; x &lt;&lt; '\\n';\n</code></pre>\n\n<p>Everything I changed had theoretically worse performance in your version of the code, but the <a href=\"https://stackoverflow.com/questions/213907/c-stdendl-vs-n\"><code>std::endl</code> was the real killer</a>. <a href=\"http://en.cppreference.com/w/cpp/container/vector/at\" rel=\"nofollow noreferrer\"><code>std::vector::at</code></a> (with bounds checking, which you don't need) would be the second, then the fact that you did not use iterators.</p>\n\n<p>Why default-construct a <code>std::ofstream</code> and then call <code>open</code>, when you can do it in one step? Why call <code>close</code> when RAII (the destructor) takes care of it for you? You can also call</p>\n\n<pre><code>fout &lt;&lt; std::setprecision(10)\n</code></pre>\n\n<p>just once, before the loop.</p>\n\n<p>As noted in the comment below, if your vector is of elements of fundamental type, you might get a better performance with <code>for(auto x : vector)</code>. Measure the running time / inspect the assembly output.</p>\n\n<hr>\n\n<p>Just to point out another thing that caught my eyes, this:</p>\n\n<pre><code>for(l = 0; l &lt; vector.size(); l++)\n</code></pre>\n\n<p>What is this <code>l</code>? Why declare it outside the loop? It seems you don't need it in the outer scope, so don't. And also the <a href=\"https://stackoverflow.com/a/484492/3552770\">post-increment</a>.</p>\n\n<p>The result:</p>\n\n<pre><code>for(size_t l = 0; l &lt; vector.size(); ++l)\n</code></pre>\n\n<hr>\n\n<p>I'm sorry for making code review out of this post.</p>\n"}, {"comments": [{"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 3, "creation_date": 1475084961, "post_id": 39754216, "comment_id": 66804801, "body": "The io stream buffers under the hood, so this amount of effort shouldn&#39;t be necessary.  The OP code, unfortunately, used <code>std::endl</code> which flushes the buffer unnecessarily, defeating most of that benefit."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1475086541, "post_id": 39754216, "comment_id": 66805779, "body": "Yes, the IO stream buffers are under the hood.  However, this technique allows for custom buffers that can be larger than the io stream buffers."}, {"owner": {"reputation": 5153, "user_id": 1612743, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/599402c77aed8fa96fc13f7b071d31a8?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/1612743/peter"}, "edited": false, "score": 0, "creation_date": 1475088374, "post_id": 39754216, "comment_id": 66806831, "body": "This. Under certain conditions, std streams can be just as fast as the C printf functions. Yet under the wrong conditions they are orders of magnitude slower, so if performance is desired, use the C printf functions."}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 2, "creation_date": 1475089132, "post_id": 39754216, "comment_id": 66807255, "body": "You&#39;d have to measure and test to ensure the buffer size you choose is better suited than the one chosen by the iostreams implementation.  I&#39;d also be concerned that the parsing of the snprintf format string may cost substantially more than the (likely inlined) stream insertion operator."}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 5, "last_activity_date": 1475084403, "last_edit_date": 1475084403, "creation_date": 1475084193, "answer_id": 39754216, "question_id": 39753721, "link": "https://stackoverflow.com/questions/39753721/fast-way-to-write-data-from-a-stdvector-to-a-text-file/39754216#39754216", "title": "Fast way to write data from a std::vector to a text file", "body": "<p>You have two main bottlenecks in your program:  output and formatting text.  </p>\n\n<p>To increase performance, you will want to increase the amount of data output per call.  For example, 1 output transfer of 500 characters is faster than 500 transfers of 1 character.</p>\n\n<p>My recommendation is you format the data to a big buffer, then block write the buffer.</p>\n\n<p>Here's an example:</p>\n\n<pre><code>char buffer[1024 * 1024];\nunsigned int buffer_index = 0;\nconst unsigned int size = my_vector.size();\nfor (unsigned int i = 0; i &lt; size; ++i)\n{\n  signed int characters_formatted = snprintf(&amp;buffer[buffer_index],\n                                             (1024 * 1024) - buffer_index,\n                                             \"%.10f\", my_vector[i]);\n  if (characters_formatted &gt; 0)\n  {\n      buffer_index += (unsigned int) characters_formatted;\n  }\n}\ncout.write(&amp;buffer[0], buffer_index);\n</code></pre>\n\n<p>You should first try changing optimization settings in your compiler before messing with the code.  </p>\n"}, {"comments": [{"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 4, "creation_date": 1475099777, "post_id": 39754269, "comment_id": 66812617, "body": "You might want to use an ostreambuf_iterator instead. This gets rid of creating the steam sentry object for every item."}, {"owner": {"reputation": 6316, "user_id": 3323096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1227f90127f0f7b8678a8c13261f48b4?s=128&d=identicon&r=PG", "display_name": "Vality", "link": "https://stackoverflow.com/users/3323096/vality"}, "edited": false, "score": 0, "creation_date": 1475211704, "post_id": 39754269, "comment_id": 66861859, "body": "I dont know about the performance but this answer is the most elegant looking one I have seen. And it taught me about about <code>std::ostream_iterator</code>. +1"}, {"owner": {"reputation": 38108, "user_id": 6610, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/635c3ea0c7b8c37ef45744b6e66dd263?s=128&d=identicon&r=PG", "display_name": "xtofl", "link": "https://stackoverflow.com/users/6610/xtofl"}, "edited": false, "score": 1, "creation_date": 1475650073, "post_id": 39754269, "comment_id": 67021635, "body": "Finally someone expressing intent in code :).  For the sake of genericity: use free functions for your begin and end iterators: <code>copy(begin(numbers), end(numbers), ostream_iterator...)</code>."}, {"owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "reply_to_user": {"reputation": 38108, "user_id": 6610, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/635c3ea0c7b8c37ef45744b6e66dd263?s=128&d=identicon&r=PG", "display_name": "xtofl", "link": "https://stackoverflow.com/users/6610/xtofl"}, "edited": false, "score": 0, "creation_date": 1475651584, "post_id": 39754269, "comment_id": 67022465, "body": "@xtofl I just put here a solution which is valid for C++ 98/03. Of course, we can rewrite this with <code>begin&#47;end</code> functions. But my main intention was to show how magnificent STL is even without some C++ 11 stuff :)"}, {"owner": {"reputation": 38108, "user_id": 6610, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/635c3ea0c7b8c37ef45744b6e66dd263?s=128&d=identicon&r=PG", "display_name": "xtofl", "link": "https://stackoverflow.com/users/6610/xtofl"}, "reply_to_user": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 1, "creation_date": 1475652301, "post_id": 39754269, "comment_id": 67022883, "body": "@DanielJour: are you sure?  Can an <code>ostreambuf_iterator</code> stream something else than <code>char</code>?  (<a href=\"http://cpp.sh/7aea\" rel=\"nofollow noreferrer\">cpp.sh/7aea</a>)"}, {"owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "reply_to_user": {"reputation": 38108, "user_id": 6610, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/635c3ea0c7b8c37ef45744b6e66dd263?s=128&d=identicon&r=PG", "display_name": "xtofl", "link": "https://stackoverflow.com/users/6610/xtofl"}, "edited": false, "score": 0, "creation_date": 1475652562, "post_id": 39754269, "comment_id": 67023018, "body": "@xtofl Agree with you."}], "tags": [], "owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "is_accepted": false, "score": 23, "last_activity_date": 1482010070, "last_edit_date": 1482010070, "creation_date": 1475084408, "answer_id": 39754269, "question_id": 39753721, "link": "https://stackoverflow.com/questions/39753721/fast-way-to-write-data-from-a-stdvector-to-a-text-file/39754269#39754269", "title": "Fast way to write data from a std::vector to a text file", "body": "<p>You can also use a rather neat form of outputting contents of any <code>vector</code> into the file, with a help of iterators and <code>copy</code> function.</p>\n\n<pre><code>std::ofstream fout(\"vector.txt\");\nfout.precision(10);\n\nstd::copy(numbers.begin(), numbers.end(),\n    std::ostream_iterator&lt;double&gt;(fout, \"\\n\"));\n</code></pre>\n\n<p>This solutions is practically the same with LogicStuff's solution in terms of execution time. But it also illustrates how to print the contents just with a single <code>copy</code> function which, as I suppose, looks pretty well. </p>\n"}, {"comments": [{"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1475094704, "post_id": 39754805, "comment_id": 66810162, "body": "It&#39;s possible to do this with C++ APIs if you don&#39;t want to limit your solution to Posix."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1475094907, "post_id": 39754805, "comment_id": 66810284, "body": "@AdrianMcCarthy: C++ only provides APIs for character I/O, <code>std::ios::binary</code> only disables newline conversions, it doesn&#39;t disable the character encoding step.  Perhaps the character encoding step is a no-op on some popular C++ libraries... but there&#39;s no portable way to make sure of that."}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1475097785, "post_id": 39754805, "comment_id": 66811805, "body": "@Ben Voigt:  But any character encoding step would presumably be reversible, so simply writing the bytes of the vector&#39;s contents to a binary stream and reading them back should work.  (Where in the standard does one read about such a character encoding step?  I can&#39;t find anything that suggests a <code>basic_ostream::write</code> to a binary stream would do any sort of encoding.)"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 1, "creation_date": 1475187771, "post_id": 39754805, "comment_id": 66855964, "body": "@AdrianMcCarthy: It&#39;s in 27.9.2 [filebuf].  In particular, the description of the <code>overflow</code> virtual override (which is the function that actually writes from the buffer to a file) says &quot;the behavior of consuming characters is performed by \ufb01rst converting as if by <code>a_codecvt.out(state, b, p, end, xbuf, xbuf+XSIZE, xbuf_end)</code>&quot;"}], "tags": [], "owner": {"reputation": 681, "user_id": 1858769, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U6PeN.jpg?s=128&g=1", "display_name": "Jason L.", "link": "https://stackoverflow.com/users/1858769/jason-l"}, "is_accepted": false, "score": 2, "last_activity_date": 1475088414, "last_edit_date": 1475088414, "creation_date": 1475086413, "answer_id": 39754805, "question_id": 39753721, "link": "https://stackoverflow.com/questions/39753721/fast-way-to-write-data-from-a-stdvector-to-a-text-file/39754805#39754805", "title": "Fast way to write data from a std::vector to a text file", "body": "<p>Here is a slightly different solution: save your doubles in binary form.</p>\n\n<pre><code>int fd = ::open(\"/path/to/the/file\", O_WRONLY /* whatever permission */);\n::write(fd, &amp;vector[0], vector.size() * sizeof(vector[0]));\n</code></pre>\n\n<p>Since you mentioned that you have 300k doubles, which equals to 300k * 8 bytes = 2.4M, you can save all of them to local disk file in <strong>less than 0.1 second</strong>. The only drawback of this method is saved file is not as readable as string representation, but a HexEditor can solve that problem.  </p>\n\n<p>If you prefer more robust way, there are plenty of serialization libraries/tools available on line. They provide more benefits, such as language-neutral, machine-independent, flexible compression algorithm, etc. Those are the two I usually use:  </p>\n\n<ul>\n<li><a href=\"https://github.com/google/protobuf\" rel=\"nofollow\">google/protobuf</a>   </li>\n<li><a href=\"https://www.unidata.ucar.edu/software/netcdf/\" rel=\"nofollow\">NetCDF</a>  </li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1475094792, "post_id": 39755083, "comment_id": 66810213, "body": "In version 3 you&#39;ll get significantly better performance if you use a <code>vector&lt;char&gt;</code> to catenate all the individual strings instead of <code>std::stringstream</code>.  Benchmark question: <a href=\"http://stackoverflow.com/q/4340396/103167\">stackoverflow.com/q/4340396/103167</a>"}, {"owner": {"reputation": 1084, "user_id": 4495824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/390a55b878d2d03dc29f1b8a5c9946b2?s=128&d=identicon&r=PG&f=1", "display_name": "hungptit", "link": "https://stackoverflow.com/users/4495824/hungptit"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1475100202, "post_id": 39755083, "comment_id": 66812795, "body": "Thanks a lot for the link. You sample code is no longer exist so I have to guess what you have done. I also added one more solution that use fmt(<a href=\"https://github.com/fmtlib/fmt\" rel=\"nofollow noreferrer\">github.com/fmtlib/fmt</a>). From the my benchmark results std::vector&lt;char&gt; is the fastest solution, however, this solution is not significantly faster than solutions that use stringstream and fmt::MemoryWriter."}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "edited": false, "score": 6, "creation_date": 1475151318, "post_id": 39755083, "comment_id": 66834442, "body": "@hungptit: Caching to a stream is unlikely to have much of an impact in general, because <code>std::ofstream</code> <i>already</i> caches before writing to the file. Unless, of course, you use <code>std::endl</code> after each element, which calls <code>flush</code>, which <i>mandates</i> a syscall."}, {"owner": {"reputation": 1084, "user_id": 4495824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/390a55b878d2d03dc29f1b8a5c9946b2?s=128&d=identicon&r=PG&f=1", "display_name": "hungptit", "link": "https://stackoverflow.com/users/4495824/hungptit"}, "reply_to_user": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "edited": false, "score": 0, "creation_date": 1475185167, "post_id": 39755083, "comment_id": 66855059, "body": "@MatthieuM. I have updated the peformance study and the performance results show that we can improve 10% by caching output to the std::stringstream."}, {"owner": {"reputation": 1084, "user_id": 4495824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/390a55b878d2d03dc29f1b8a5c9946b2?s=128&d=identicon&r=PG&f=1", "display_name": "hungptit", "link": "https://stackoverflow.com/users/4495824/hungptit"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1475185274, "post_id": 39755083, "comment_id": 66855113, "body": "@BenVoigt I have updated my solution and using std::vector&lt;char&gt; is not significantly better than using std::stringstream."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1475186779, "post_id": 39755083, "comment_id": 66855683, "body": "Try <code>vector::insert</code> with an entire string at a time (using the character count returned from <code>sprintf</code>, no need to call <code>strlen()</code>), instead of looped calls to <code>push_back()</code>."}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "edited": false, "score": 0, "creation_date": 1475218566, "post_id": 39755083, "comment_id": 66864549, "body": "@hungptit: Have you tried updating the <code>std::ofstream</code> buffer to a bigger size instead? See <a href=\"http://stackoverflow.com/questions/5166263/how-to-get-iostream-to-perform-better\" title=\"how to get iostream to perform better\">stackoverflow.com/questions/5166263/&hellip;</a> for the how to. Oh, and please do open that <code>ofstream</code> in binary mode, this way you&#39;ll avoid locale conversions of newline characters."}, {"owner": {"reputation": 1084, "user_id": 4495824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/390a55b878d2d03dc29f1b8a5c9946b2?s=128&d=identicon&r=PG&f=1", "display_name": "hungptit", "link": "https://stackoverflow.com/users/4495824/hungptit"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1475256159, "post_id": 39755083, "comment_id": 66886525, "body": "@BenVoigt Thanks a lot for your suggestion. I have updated a solution that uses std::vector&lt;char&gt;. Your trick does improve the performance, however, the std::vector&lt;char&gt; solution is only 3% faster than the stringstream solution. My example code is self contained you can always try it on your machine and please let me know if you have any suggestion."}, {"owner": {"reputation": 1084, "user_id": 4495824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/390a55b878d2d03dc29f1b8a5c9946b2?s=128&d=identicon&r=PG&f=1", "display_name": "hungptit", "link": "https://stackoverflow.com/users/4495824/hungptit"}, "reply_to_user": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "edited": false, "score": 0, "creation_date": 1475256267, "post_id": 39755083, "comment_id": 66886597, "body": "@MatthieuM. I do not see any improvement by changing the size of the output file buffer. Please let me know if you have any suggestion."}], "tags": [], "owner": {"reputation": 1084, "user_id": 4495824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/390a55b878d2d03dc29f1b8a5c9946b2?s=128&d=identicon&r=PG&f=1", "display_name": "hungptit", "link": "https://stackoverflow.com/users/4495824/hungptit"}, "is_accepted": true, "score": 36, "last_activity_date": 1475646419, "last_edit_date": 1495541813, "creation_date": 1475087338, "answer_id": 39755083, "question_id": 39753721, "link": "https://stackoverflow.com/questions/39753721/fast-way-to-write-data-from-a-stdvector-to-a-text-file/39755083#39755083", "title": "Fast way to write data from a std::vector to a text file", "body": "<p>Your algorithm has two parts: </p>\n\n<ol>\n<li><p>Serialize double numbers to a string or character buffer.</p></li>\n<li><p>Write results to a file. </p></li>\n</ol>\n\n<p>The first item can be improved (> 20%) by using sprintf or <a href=\"https://github.com/fmtlib/fmt\" rel=\"noreferrer\">fmt</a>. The second item can be sped up by caching results to a buffer or extending the output file stream buffer size before writing results to the output file. You should not use std::endl because <a href=\"https://stackoverflow.com/questions/213907/c-stdendl-vs-n?noredirect=1&amp;lq=1\">it is much slower than using \"\\n\"</a>. If you still want to make it faster then write your data in binary format. Below is my complete code sample which includes my proposed solutions and one from Edgar Rokyan. I also included Ben Voigt and Matthieu M suggestions in test code. </p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;cstdlib&gt;\n#include &lt;fstream&gt;\n#include &lt;iomanip&gt;\n#include &lt;iostream&gt;\n#include &lt;iterator&gt;\n#include &lt;vector&gt;\n\n// https://github.com/fmtlib/fmt\n#include \"fmt/format.h\"\n\n// http://uscilab.github.io/cereal/\n#include \"cereal/archives/binary.hpp\"\n#include \"cereal/archives/json.hpp\"\n#include \"cereal/archives/portable_binary.hpp\"\n#include \"cereal/archives/xml.hpp\"\n#include \"cereal/types/string.hpp\"\n#include \"cereal/types/vector.hpp\"\n\n// https://github.com/DigitalInBlue/Celero\n#include \"celero/Celero.h\"\n\ntemplate &lt;typename T&gt; const char* getFormattedString();\ntemplate&lt;&gt; const char* getFormattedString&lt;double&gt;(){return \"%g\\n\";}\ntemplate&lt;&gt; const char* getFormattedString&lt;float&gt;(){return \"%g\\n\";}\ntemplate&lt;&gt; const char* getFormattedString&lt;int&gt;(){return \"%d\\n\";}\ntemplate&lt;&gt; const char* getFormattedString&lt;size_t&gt;(){return \"%lu\\n\";}\n\n\nnamespace {\n    constexpr size_t LEN = 32;\n\n    template &lt;typename T&gt; std::vector&lt;T&gt; create_test_data(const size_t N) {\n        std::vector&lt;T&gt; data(N);\n        for (size_t idx = 0; idx &lt; N; ++idx) {\n            data[idx] = idx;\n        }\n        return data;\n    }\n\n    template &lt;typename Iterator&gt; auto toVectorOfChar(Iterator begin, Iterator end) {\n        char aLine[LEN];\n        std::vector&lt;char&gt; buffer;\n        buffer.reserve(std::distance(begin, end) * LEN);\n        const char* fmtStr = getFormattedString&lt;typename std::iterator_traits&lt;Iterator&gt;::value_type&gt;();\n        std::for_each(begin, end, [&amp;buffer, &amp;aLine, &amp;fmtStr](const auto value) {\n            sprintf(aLine, fmtStr, value);\n            for (size_t idx = 0; aLine[idx] != 0; ++idx) {\n                buffer.push_back(aLine[idx]);\n            }\n        });\n        return buffer;\n    }\n\n    template &lt;typename Iterator&gt;\n    auto toStringStream(Iterator begin, Iterator end, std::stringstream &amp;buffer) {\n        char aLine[LEN];\n        const char* fmtStr = getFormattedString&lt;typename std::iterator_traits&lt;Iterator&gt;::value_type&gt;();\n        std::for_each(begin, end, [&amp;buffer, &amp;aLine, &amp;fmtStr](const auto value) {            \n            sprintf(aLine, fmtStr, value);\n            buffer &lt;&lt; aLine;\n        });\n    }\n\n    template &lt;typename Iterator&gt; auto toMemoryWriter(Iterator begin, Iterator end) {\n        fmt::MemoryWriter writer;\n        std::for_each(begin, end, [&amp;writer](const auto value) { writer &lt;&lt; value &lt;&lt; \"\\n\"; });\n        return writer;\n    }\n\n    // A modified version of the original approach.\n    template &lt;typename Container&gt;\n    void original_approach(const Container &amp;data, const std::string &amp;fileName) {\n        std::ofstream fout(fileName);\n        for (size_t l = 0; l &lt; data.size(); l++) {\n            fout &lt;&lt; data[l] &lt;&lt; std::endl;\n        }\n        fout.close();\n    }\n\n    // Replace std::endl by \"\\n\"\n    template &lt;typename Iterator&gt;\n    void improved_original_approach(Iterator begin, Iterator end, const std::string &amp;fileName) {\n        std::ofstream fout(fileName);\n        const size_t len = std::distance(begin, end) * LEN;\n        std::vector&lt;char&gt; buffer(len);\n        fout.rdbuf()-&gt;pubsetbuf(buffer.data(), len);\n        for (Iterator it = begin; it != end; ++it) {\n            fout &lt;&lt; *it &lt;&lt; \"\\n\";\n        }\n        fout.close();\n    }\n\n    //\n    template &lt;typename Iterator&gt;\n    void edgar_rokyan_solution(Iterator begin, Iterator end, const std::string &amp;fileName) {\n        std::ofstream fout(fileName);\n        std::copy(begin, end, std::ostream_iterator&lt;double&gt;(fout, \"\\n\"));\n    }\n\n    // Cache to a string stream before writing to the output file\n    template &lt;typename Iterator&gt;\n    void stringstream_approach(Iterator begin, Iterator end, const std::string &amp;fileName) {\n        std::stringstream buffer;\n        for (Iterator it = begin; it != end; ++it) {\n            buffer &lt;&lt; *it &lt;&lt; \"\\n\";\n        }\n\n        // Now write to the output file.\n        std::ofstream fout(fileName);\n        fout &lt;&lt; buffer.str();\n        fout.close();\n    }\n\n    // Use sprintf\n    template &lt;typename Iterator&gt;\n    void sprintf_approach(Iterator begin, Iterator end, const std::string &amp;fileName) {\n        std::stringstream buffer;\n        toStringStream(begin, end, buffer);\n        std::ofstream fout(fileName);\n        fout &lt;&lt; buffer.str();\n        fout.close();\n    }\n\n    // Use fmt::MemoryWriter (https://github.com/fmtlib/fmt)\n    template &lt;typename Iterator&gt;\n    void fmt_approach(Iterator begin, Iterator end, const std::string &amp;fileName) {\n        auto writer = toMemoryWriter(begin, end);\n        std::ofstream fout(fileName);\n        fout &lt;&lt; writer.str();\n        fout.close();\n    }\n\n    // Use std::vector&lt;char&gt;\n    template &lt;typename Iterator&gt;\n    void vector_of_char_approach(Iterator begin, Iterator end, const std::string &amp;fileName) {\n        std::vector&lt;char&gt; buffer = toVectorOfChar(begin, end);\n        std::ofstream fout(fileName);\n        fout &lt;&lt; buffer.data();\n        fout.close();\n    }\n\n    // Use cereal (http://uscilab.github.io/cereal/).\n    template &lt;typename Container, typename OArchive = cereal::BinaryOutputArchive&gt;\n    void use_cereal(Container &amp;&amp;data, const std::string &amp;fileName) {\n        std::stringstream buffer;\n        {\n            OArchive oar(buffer);\n            oar(data);\n        }\n\n        std::ofstream fout(fileName);\n        fout &lt;&lt; buffer.str();\n        fout.close();\n    }\n}\n\n// Performance test input data.\nconstexpr int NumberOfSamples = 5;\nconstexpr int NumberOfIterations = 2;\nconstexpr int N = 3000000;\nconst auto double_data = create_test_data&lt;double&gt;(N);\nconst auto float_data = create_test_data&lt;float&gt;(N);\nconst auto int_data = create_test_data&lt;int&gt;(N);\nconst auto size_t_data = create_test_data&lt;size_t&gt;(N);\n\nCELERO_MAIN\n\nBASELINE(DoubleVector, original_approach, NumberOfSamples, NumberOfIterations) {\n    const std::string fileName(\"origsol.txt\");\n    original_approach(double_data, fileName);\n}\n\nBENCHMARK(DoubleVector, improved_original_approach, NumberOfSamples, NumberOfIterations) {\n    const std::string fileName(\"improvedsol.txt\");\n    improved_original_approach(double_data.cbegin(), double_data.cend(), fileName);\n}\n\nBENCHMARK(DoubleVector, edgar_rokyan_solution, NumberOfSamples, NumberOfIterations) {\n    const std::string fileName(\"edgar_rokyan_solution.txt\");\n    edgar_rokyan_solution(double_data.cbegin(), double_data.end(), fileName);\n}\n\nBENCHMARK(DoubleVector, stringstream_approach, NumberOfSamples, NumberOfIterations) {\n    const std::string fileName(\"stringstream.txt\");\n    stringstream_approach(double_data.cbegin(), double_data.cend(), fileName);\n}\n\nBENCHMARK(DoubleVector, sprintf_approach, NumberOfSamples, NumberOfIterations) {\n    const std::string fileName(\"sprintf.txt\");\n    sprintf_approach(double_data.cbegin(), double_data.cend(), fileName);\n}\n\nBENCHMARK(DoubleVector, fmt_approach, NumberOfSamples, NumberOfIterations) {\n    const std::string fileName(\"fmt.txt\");\n    fmt_approach(double_data.cbegin(), double_data.cend(), fileName);\n}\n\nBENCHMARK(DoubleVector, vector_of_char_approach, NumberOfSamples, NumberOfIterations) {\n    const std::string fileName(\"vector_of_char.txt\");\n    vector_of_char_approach(double_data.cbegin(), double_data.cend(), fileName);\n}\n\nBENCHMARK(DoubleVector, use_cereal, NumberOfSamples, NumberOfIterations) {\n    const std::string fileName(\"cereal.bin\");\n    use_cereal(double_data, fileName);\n}\n\n// Benchmark double vector\nBASELINE(DoubleVectorConversion, toStringStream, NumberOfSamples, NumberOfIterations) {\n    std::stringstream output;\n    toStringStream(double_data.cbegin(), double_data.cend(), output);\n}\n\nBENCHMARK(DoubleVectorConversion, toMemoryWriter, NumberOfSamples, NumberOfIterations) {\n    celero::DoNotOptimizeAway(toMemoryWriter(double_data.cbegin(), double_data.cend()));\n}\n\nBENCHMARK(DoubleVectorConversion, toVectorOfChar, NumberOfSamples, NumberOfIterations) {\n    celero::DoNotOptimizeAway(toVectorOfChar(double_data.cbegin(), double_data.cend()));\n}\n\n// Benchmark float vector\nBASELINE(FloatVectorConversion, toStringStream, NumberOfSamples, NumberOfIterations) {\n    std::stringstream output;\n    toStringStream(float_data.cbegin(), float_data.cend(), output);\n}\n\nBENCHMARK(FloatVectorConversion, toMemoryWriter, NumberOfSamples, NumberOfIterations) {\n    celero::DoNotOptimizeAway(toMemoryWriter(float_data.cbegin(), float_data.cend()));\n}\n\nBENCHMARK(FloatVectorConversion, toVectorOfChar, NumberOfSamples, NumberOfIterations) {\n    celero::DoNotOptimizeAway(toVectorOfChar(float_data.cbegin(), float_data.cend()));\n}\n\n// Benchmark int vector\nBASELINE(int_conversion, toStringStream, NumberOfSamples, NumberOfIterations) {\n    std::stringstream output;\n    toStringStream(int_data.cbegin(), int_data.cend(), output);\n}\n\nBENCHMARK(int_conversion, toMemoryWriter, NumberOfSamples, NumberOfIterations) {\n    celero::DoNotOptimizeAway(toMemoryWriter(int_data.cbegin(), int_data.cend()));\n}\n\nBENCHMARK(int_conversion, toVectorOfChar, NumberOfSamples, NumberOfIterations) {\n    celero::DoNotOptimizeAway(toVectorOfChar(int_data.cbegin(), int_data.cend()));\n}\n\n// Benchmark size_t vector\nBASELINE(size_t_conversion, toStringStream, NumberOfSamples, NumberOfIterations) {\n    std::stringstream output;\n    toStringStream(size_t_data.cbegin(), size_t_data.cend(), output);\n}\n\nBENCHMARK(size_t_conversion, toMemoryWriter, NumberOfSamples, NumberOfIterations) {\n    celero::DoNotOptimizeAway(toMemoryWriter(size_t_data.cbegin(), size_t_data.cend()));\n}\n\nBENCHMARK(size_t_conversion, toVectorOfChar, NumberOfSamples, NumberOfIterations) {\n    celero::DoNotOptimizeAway(toVectorOfChar(size_t_data.cbegin(), size_t_data.cend()));\n}\n</code></pre>\n\n<p>Below are the performance results obtained in my Linux box using clang-3.9.1 and -O3 flag. I use <a href=\"https://github.com/DigitalInBlue/Celero\" rel=\"noreferrer\">Celero</a> to collect all performance results.</p>\n\n<pre><code>Timer resolution: 0.001000 us\n-----------------------------------------------------------------------------------------------------------------------------------------------\n     Group      |   Experiment    |   Prob. Space   |     Samples     |   Iterations    |    Baseline     |  us/Iteration   | Iterations/sec  | \n-----------------------------------------------------------------------------------------------------------------------------------------------\nDoubleVector    | original_approa | Null            |              10 |               4 |         1.00000 |   3650309.00000 |            0.27 | \nDoubleVector    | improved_origin | Null            |              10 |               4 |         0.47828 |   1745855.00000 |            0.57 | \nDoubleVector    | edgar_rokyan_so | Null            |              10 |               4 |         0.45804 |   1672005.00000 |            0.60 | \nDoubleVector    | stringstream_ap | Null            |              10 |               4 |         0.41514 |   1515377.00000 |            0.66 | \nDoubleVector    | sprintf_approac | Null            |              10 |               4 |         0.35436 |   1293521.50000 |            0.77 | \nDoubleVector    | fmt_approach    | Null            |              10 |               4 |         0.34916 |   1274552.75000 |            0.78 | \nDoubleVector    | vector_of_char_ | Null            |              10 |               4 |         0.34366 |   1254462.00000 |            0.80 | \nDoubleVector    | use_cereal      | Null            |              10 |               4 |         0.04172 |    152291.25000 |            6.57 | \nComplete.\n</code></pre>\n\n<p>I also benchmark for numeric to string conversion algorithms to compare the performance of std::stringstream, fmt::MemoryWriter, and std::vector.</p>\n\n<pre><code>Timer resolution: 0.001000 us\n-----------------------------------------------------------------------------------------------------------------------------------------------\n     Group      |   Experiment    |   Prob. Space   |     Samples     |   Iterations    |    Baseline     |  us/Iteration   | Iterations/sec  | \n-----------------------------------------------------------------------------------------------------------------------------------------------\nDoubleVectorCon | toStringStream  | Null            |              10 |               4 |         1.00000 |   1272667.00000 |            0.79 | \nFloatVectorConv | toStringStream  | Null            |              10 |               4 |         1.00000 |   1272573.75000 |            0.79 | \nint_conversion  | toStringStream  | Null            |              10 |               4 |         1.00000 |    248709.00000 |            4.02 | \nsize_t_conversi | toStringStream  | Null            |              10 |               4 |         1.00000 |    252063.00000 |            3.97 | \nDoubleVectorCon | toMemoryWriter  | Null            |              10 |               4 |         0.98468 |   1253165.50000 |            0.80 | \nDoubleVectorCon | toVectorOfChar  | Null            |              10 |               4 |         0.97146 |   1236340.50000 |            0.81 | \nFloatVectorConv | toMemoryWriter  | Null            |              10 |               4 |         0.98419 |   1252454.25000 |            0.80 | \nFloatVectorConv | toVectorOfChar  | Null            |              10 |               4 |         0.97369 |   1239093.25000 |            0.81 | \nint_conversion  | toMemoryWriter  | Null            |              10 |               4 |         0.11741 |     29200.50000 |           34.25 | \nint_conversion  | toVectorOfChar  | Null            |              10 |               4 |         0.87105 |    216637.00000 |            4.62 | \nsize_t_conversi | toMemoryWriter  | Null            |              10 |               4 |         0.13746 |     34649.50000 |           28.86 | \nsize_t_conversi | toVectorOfChar  | Null            |              10 |               4 |         0.85345 |    215123.00000 |            4.65 | \nComplete.\n</code></pre>\n\n<p>From the above tables we can see that:</p>\n\n<ol>\n<li><p>Edgar Rokyan solution is 10% slower than the stringstream solution. The solution that use <a href=\"https://github.com/fmtlib/fmt\" rel=\"noreferrer\">fmt</a> library is the best for three studied data types which are double, int, and size_t. sprintf + std::vector solution is 1% faster than the <a href=\"https://github.com/fmtlib/fmt\" rel=\"noreferrer\">fmt</a> solution for double data type. However, I do not recommend solutions that use sprintf for production code because they are not elegant (still written in C style) and do not work out of the box for different data types such as int or size_t.</p></li>\n<li><p>The benchmark results also show that <a href=\"https://github.com/fmtlib/fmt\" rel=\"noreferrer\">fmt</a> is the superrior integral data type serialization since it is at least 7x faster than other approaches.</p></li>\n<li><p>We can speed up this algorithm 10x if we use the binary format. This approach is significantly faster than writing to a formatted text file because we only do raw copy from the memory to the output. If you want to have more flexible and portable solutions then try <a href=\"http://uscilab.github.io/cereal/\" rel=\"noreferrer\">cereal</a> or <a href=\"http://www.boost.org/doc/libs/1_62_0/libs/serialization/doc/\" rel=\"noreferrer\">boost::serialization</a> or <a href=\"https://developers.google.com/protocol-buffers/\" rel=\"noreferrer\">protocol-buffer</a>. According to <a href=\"https://github.com/thekvs/cpp-serializers\" rel=\"noreferrer\">this performance study</a> cereal seem to be the fastest. </p></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 1, "creation_date": 1475162110, "post_id": 39761029, "comment_id": 66842450, "body": "Wouldn&#39;t it be simplest to just adjust buffering (fully buffered, reasonable buffer size, maybe a megabyte for PC software)? Not very familiar std:: streams, maybe they don&#39;t support that."}, {"owner": {"reputation": 38108, "user_id": 6610, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/635c3ea0c7b8c37ef45744b6e66dd263?s=128&d=identicon&r=PG", "display_name": "xtofl", "link": "https://stackoverflow.com/users/6610/xtofl"}, "reply_to_user": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1475652525, "post_id": 39761029, "comment_id": 67022999, "body": "@hyde: the buffering is there.  The <code>cout &lt;&lt; endl</code> actually flushes the buffers."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "reply_to_user": {"reputation": 38108, "user_id": 6610, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/635c3ea0c7b8c37ef45744b6e66dd263?s=128&d=identicon&r=PG", "display_name": "xtofl", "link": "https://stackoverflow.com/users/6610/xtofl"}, "edited": false, "score": 0, "creation_date": 1475655238, "post_id": 39761029, "comment_id": 67024529, "body": "@xtofl That&#39;s line buffered, and that&#39;s what is killing the performance, because it flushes every few dozen bytes or whatever. Fully buffered would mean, it flushes when buffer is full, so with just 1 KB buffer it would flush 10 times less often, and with 1 MB buffer 10000 times less often."}, {"owner": {"reputation": 38108, "user_id": 6610, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/635c3ea0c7b8c37ef45744b6e66dd263?s=128&d=identicon&r=PG", "display_name": "xtofl", "link": "https://stackoverflow.com/users/6610/xtofl"}, "edited": false, "score": 0, "creation_date": 1475655684, "post_id": 39761029, "comment_id": 67024752, "body": "<code>cout &lt;&lt; endl</code> actually <i>means</i> &#39;flush, now&#39;!  So in this <code>cout &lt;&lt; value &lt;&lt; endl</code>, there is a flush after every double.  Which is what @Jon Watte is saying.  <a href=\"http://en.cppreference.com/w/cpp/io/manip/endl\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/io/manip/endl</a>.  So yes: &#39;reasonal buffer size&#39; is there, but it&#39;s explicitly turned off by using <code>endl</code>."}], "tags": [], "owner": {"reputation": 5468, "user_id": 89233, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a36afadc530a6936e9e336a729f7ecf3?s=128&d=identicon&r=PG", "display_name": "Jon Watte", "link": "https://stackoverflow.com/users/89233/jon-watte"}, "is_accepted": false, "score": 14, "last_activity_date": 1475120501, "creation_date": 1475120501, "answer_id": 39761029, "question_id": 39753721, "link": "https://stackoverflow.com/questions/39753721/fast-way-to-write-data-from-a-stdvector-to-a-text-file/39761029#39761029", "title": "Fast way to write data from a std::vector to a text file", "body": "<p>OK, I'm sad that there are three solutions that attempt to give you a fish, but no solution that attempts to teach you how to fish.</p>\n\n<p>When you have a performance problem, the solution is to use a profiler, and fix whatever the problem the profiler shows.</p>\n\n<p>Converting double-to-string for 300,000 doubles will not take 3 minutes on any computer that has shipped in the last 10 years.</p>\n\n<p>Writing 3 MB of data to disk (an average size of 300,000 doubles) will not take 3 minutes on any computer that has shipped in the last 10 years.</p>\n\n<p>If you profile this, my guess is that you'll find that fout gets flushed 300,000 times, and that flushing is slow, because it may involve blocking, or semi-blocking, I/O. Thus, you need to avoid the blocking I/O. The typical way of doing that is to prepare all your I/O to a single buffer (create a stringstream, write to that) and then write that buffer to a physical file in one go. This is the solution hungptit describes, except I think that what's missing is explaining WHY that solution is a good solution.</p>\n\n<p>Or, to put it another way: What the profiler will tell you is that calling write() (on Linux) or WriteFile() (on Windows) is much slower than just copying a few bytes into a memory buffer, because it's a user/kernel level transition. If std::endl causes this to happen for each double, you're going to have a bad (slow) time. Replace it with something that just stays in user space and puts data in RAM!</p>\n\n<p>If that's still not fast enough, it may be that the specific-precision version of operator&lt;&lt;() on strings is slow or involves unnecessary overhead. If so, you may be able to further speed up the code by using sprintf() or some other potentially faster function to generate data into the in-memory buffer, before you finally write the entire buffer to a file in one go.</p>\n"}], "owner": {"reputation": 839, "user_id": 2832872, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/709868624/picture?type=large", "display_name": "Diego Fernando Pava", "link": "https://stackoverflow.com/users/2832872/diego-fernando-pava"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11678, "favorite_count": 12, "accepted_answer_id": 39755083, "answer_count": 6, "score": 56, "last_activity_date": 1487874759, "creation_date": 1475082547, "last_edit_date": 1487874759, "question_id": 39753721, "link": "https://stackoverflow.com/questions/39753721/fast-way-to-write-data-from-a-stdvector-to-a-text-file", "title": "Fast way to write data from a std::vector to a text file", "body": "<p>I currently write a set of doubles from a vector to a text file like this:</p>\n\n<pre><code>std::ofstream fout;\nfout.open(\"vector.txt\");\n\nfor (l = 0; l &lt; vector.size(); l++)\n    fout &lt;&lt; std::setprecision(10) &lt;&lt; vector.at(l) &lt;&lt; std::endl;\n\nfout.close();\n</code></pre>\n\n<p>But this is taking a lot of time to finish. Is there a faster or more efficient way to do this? I would love to see and learn it. </p>\n"}, {"tags": ["c++", "visual-studio-2015", "compiler-errors"], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1475083038, "post_id": 39753843, "comment_id": 66803712, "body": "The OP has <code>curl_error(const curl_error &amp;) = default;</code> in their code.  Also move will not be used as <code>cc</code> is an lvalue."}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1475083131, "post_id": 39753843, "comment_id": 66803758, "body": "Just corrected the answer.  I missed the copy c&#39;tor when I first read the code."}, {"owner": {"reputation": 451, "user_id": 365908, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/16c3d0f79b980f370a2b3f3bcf4771bf?s=128&d=identicon&r=PG", "display_name": "Jehjoa", "link": "https://stackoverflow.com/users/365908/jehjoa"}, "edited": false, "score": 0, "creation_date": 1475083173, "post_id": 39753843, "comment_id": 66803782, "body": "Also, <code>cc</code> is a variable of type <code>CURLcode</code> which is a <code>typedef enum</code>, and not a <code>curl_error</code>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 451, "user_id": 365908, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/16c3d0f79b980f370a2b3f3bcf4771bf?s=128&d=identicon&r=PG", "display_name": "Jehjoa", "link": "https://stackoverflow.com/users/365908/jehjoa"}, "edited": false, "score": 1, "creation_date": 1475083349, "post_id": 39753843, "comment_id": 66803880, "body": "@Jehjoa You should include that information in the question."}], "tags": [], "owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "is_accepted": false, "score": 0, "last_activity_date": 1475083381, "last_edit_date": 1475083381, "creation_date": 1475082968, "answer_id": 39753843, "question_id": 39753704, "link": "https://stackoverflow.com/questions/39753704/code-that-compiled-fine-in-msvc2013-seems-to-confuse-msvc2015/39753843#39753843", "title": "Code that compiled fine in MSVC2013 seems to confuse MSVC2015", "body": "<p>This statement:</p>\n\n<pre><code>throw curl_error{ cc };\n</code></pre>\n\n<p>is trying to construct a <code>curl_error</code> from another <code>curl_error</code>.  So we need the copy constructor.  The code you posted has a private  copy constructor.</p>\n\n<p>You just need to make the copy constructor public.</p>\n"}, {"comments": [{"owner": {"reputation": 451, "user_id": 365908, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/16c3d0f79b980f370a2b3f3bcf4771bf?s=128&d=identicon&r=PG", "display_name": "Jehjoa", "link": "https://stackoverflow.com/users/365908/jehjoa"}, "edited": false, "score": 0, "creation_date": 1475083573, "post_id": 39753914, "comment_id": 66803989, "body": "I movied the <code>curl_error(const curl_error &amp;) = default;</code> to the public section of the class definition, but it still gives the same error. The class has 2 member variables. As I understand it, a compiler generated copy constructor automatically calls the copy constructor on those member variables, correct?"}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "reply_to_user": {"reputation": 451, "user_id": 365908, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/16c3d0f79b980f370a2b3f3bcf4771bf?s=128&d=identicon&r=PG", "display_name": "Jehjoa", "link": "https://stackoverflow.com/users/365908/jehjoa"}, "edited": false, "score": 0, "creation_date": 1475083748, "post_id": 39753914, "comment_id": 66804101, "body": "@Jehjoa Since the error is specifically mentioning the line with the move constructor, you should try making that public as well."}, {"owner": {"reputation": 451, "user_id": 365908, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/16c3d0f79b980f370a2b3f3bcf4771bf?s=128&d=identicon&r=PG", "display_name": "Jehjoa", "link": "https://stackoverflow.com/users/365908/jehjoa"}, "edited": false, "score": 0, "creation_date": 1475084498, "post_id": 39753914, "comment_id": 66804519, "body": "Thank you, fixed by making the move constructor public. It&#39;s still <code>default</code> but it works. The copy constructor is still <code>private</code> and <code>delete</code>d."}], "tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": true, "score": 2, "last_activity_date": 1475087195, "last_edit_date": 1475087195, "creation_date": 1475083206, "answer_id": 39753914, "question_id": 39753704, "link": "https://stackoverflow.com/questions/39753704/code-that-compiled-fine-in-msvc2013-seems-to-confuse-msvc2015/39753914#39753914", "title": "Code that compiled fine in MSVC2013 seems to confuse MSVC2015", "body": "<p>In the C++ language spec, when talking about the <code>throw</code> statement, it says: </p>\n\n<blockquote>\n  <p>Throwing an exception copy-initializes a temporary object, called the exception object.</p>\n</blockquote>\n\n<p>So the exception object you're throwing needs to be copyable.</p>\n\n<p>Since your copy constructor is private, it is not accessible. You need to make it public and implement it.</p>\n"}], "owner": {"reputation": 451, "user_id": 365908, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/16c3d0f79b980f370a2b3f3bcf4771bf?s=128&d=identicon&r=PG", "display_name": "Jehjoa", "link": "https://stackoverflow.com/users/365908/jehjoa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 39753914, "answer_count": 2, "score": 1, "last_activity_date": 1475087195, "creation_date": 1475082477, "question_id": 39753704, "link": "https://stackoverflow.com/questions/39753704/code-that-compiled-fine-in-msvc2013-seems-to-confuse-msvc2015", "title": "Code that compiled fine in MSVC2013 seems to confuse MSVC2015", "body": "<p>I'm trying to migrate my development environment from Visual Studio 2013 to 2015, and I'm running into a weird issue with one of my projects. The compiler somehow seems to think I'm trying to reference a deleted move constructor while I'm actually trying to use a regular constructor to throw an instance of a class.</p>\n\n<p>I'm writing a thin wrapper around libcurls HTTP capabilities. Here's one example of a compilation error I'm getting. I'm getting two more of these in similar but different parts of the code.</p>\n\n<pre><code>1&gt;e:\\code\\win32\\contentwatcher\\contentwatcher\\http_client.cpp(18): error C2248: 'http::curl_error::curl_error': cannot access private member declared in class 'http::curl_error'\n1&gt;  e:\\code\\win32\\contentwatcher\\contentwatcher\\http_client.hpp(19): note: see declaration of 'http::curl_error::curl_error'\n1&gt;  e:\\code\\win32\\contentwatcher\\contentwatcher\\http_client.hpp(16): note: see declaration of 'http::curl_error'\n</code></pre>\n\n<p>This is the relevant part of http_client.hpp:</p>\n\n<pre><code>namespace http {\n\nclass curl_error : public std::runtime_error ////////////////// LINE 16\n{\n    curl_error(const curl_error &amp;) = default;\n    curl_error(curl_error &amp;&amp;) = delete; /////////////////////// LINE 19\n    curl_error &amp;operator=(const curl_error &amp;) = delete;\n    curl_error &amp;operator=(curl_error &amp;&amp;) = delete;\npublic:\n    curl_error(const char *message, CURLcode cc);\n    curl_error(CURLcode cc);\n    ~curl_error() = default;\nprotected:\nprivate:\n    CURLcode m_code;\n    std::string m_details;\n};\n\nclass curl_init\n{\n    curl_init(const curl_init &amp;) = delete;\n    curl_init(curl_init &amp;&amp;) = delete;\n    curl_init &amp;operator=(const curl_init &amp;) = delete;\n    curl_init &amp;operator=(curl_init &amp;&amp;) = delete;\npublic:\n    curl_init(long flags = CURL_GLOBAL_DEFAULT);\n    ~curl_init() = default;\nprotected:\nprivate:\n};\n\n} // namespace http\n</code></pre>\n\n<p>And the relevant part of http_client.cpp where the actual compilation error occurs:</p>\n\n<pre><code>http::curl_init::curl_init(long flags)\n{\n    auto cc = curl_global_init(flags);\n    if (cc != CURLE_OK) throw curl_error{ cc }; /////////////// LINE 18\n}\n</code></pre>\n\n<p>As you can see I'm just trying to construct a <code>curl_error</code> object in order to throw it as an exception. Worked fine in MSVC2013 but 2015 seems to think I'm trying to move-construct it?</p>\n\n<p>I have no idea what's wrong here, or which keywords to Google to solve this... Thanks in advance for any pointers.</p>\n"}, {"tags": ["c++", "windows", "macos"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1475082331, "post_id": 39753615, "comment_id": 66803369, "body": "The right tool to solve such problems is your debugger. You should step through your code line-by-line <i>before</i> asking on Stack Overflow. For more help, please read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs (by Eric Lippert)</a>. At a minimum, you should &#91;edit] your question to include a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable</a> example that reproduces your problem, along with the observations you made in the debugger."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1475082365, "post_id": 39753615, "comment_id": 66803391, "body": "Most probably undefined behavior somewhere (unitinialized variables?)."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1475084893, "post_id": 39753615, "comment_id": 66804758, "body": "Why do you have &quot;<code>|| true</code>&quot; in your <code>while</code> expression?"}, {"owner": {"reputation": 483, "user_id": 6382401, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/04af1d0fba0ddb83761466ffcf4e9336?s=128&d=identicon&r=PG&f=1", "display_name": "Robert J", "link": "https://stackoverflow.com/users/6382401/robert-j"}, "edited": false, "score": 0, "creation_date": 1475089753, "post_id": 39753615, "comment_id": 66807559, "body": "I was told that <code>while( Contition1 &amp;&amp; !somefile.eof() )</code> would always be a bug.  I reviewed the logic for behind this at the time and it did seem sound.  <a href=\"http://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\" title=\"why is iostreameof inside a loop condition considered wrong\">stackoverflow.com/questions/5605125/&hellip;</a> hence me trying a <code>while true</code> with a <code>break</code> condition.  I did attempt a debug with codeblocks on Windows 10 but did not seem to be able to run the debug.  This is really my first time using codeblocks (I usually <code>vim</code> a file and rely on my syntax checker and <code>make</code> files in a bash shell)."}], "answers": [{"tags": [], "owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "is_accepted": true, "score": 2, "last_activity_date": 1475084513, "creation_date": 1475084513, "answer_id": 39754297, "question_id": 39753615, "link": "https://stackoverflow.com/questions/39753615/unexpected-overflow-c-windows-specific/39754297#39754297", "title": "Unexpected overflow C++ (windows specific)", "body": "<p>There may be more problems, but the first one I spotted is:</p>\n\n<pre><code>while ( getline(source, line) || true) {\n    ...\n    if ( line[0] != ' ') ...\n</code></pre>\n\n<p>If the call to <code>getline</code> fails, <code>line</code> will be empty, so <code>line[0]</code> is out-of-bounds.</p>\n"}], "owner": {"reputation": 483, "user_id": 6382401, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/04af1d0fba0ddb83761466ffcf4e9336?s=128&d=identicon&r=PG&f=1", "display_name": "Robert J", "link": "https://stackoverflow.com/users/6382401/robert-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 39754297, "answer_count": 1, "score": 0, "last_activity_date": 1475084513, "creation_date": 1475082167, "question_id": 39753615, "link": "https://stackoverflow.com/questions/39753615/unexpected-overflow-c-windows-specific", "title": "Unexpected overflow C++ (windows specific)", "body": "<p>It would appear that I am encountering an unexpected overflow and I do not understand why this is occurring (much to my dismay):</p>\n\n<h2>Windows:</h2>\n\n<p><a href=\"https://i.stack.imgur.com/7LZtj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7LZtj.png\" alt=\"enter image description here\"></a></p>\n\n<h2>Mac:</h2>\n\n<p><a href=\"https://i.stack.imgur.com/n1A80.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/n1A80.png\" alt=\"enter image description here\"></a></p>\n\n<p>These were both compiled using MinGW.  I believe that this may be due to the difference in file types between BSD and Windows as I note that if I copy numbers.txt from a Windows OS I recieve a similar fault.</p>\n\n<h2>Mac error with windows file:</h2>\n\n<pre><code>Mac Shell: Downloads/&gt;$ rm numbers.txt \n# Downloaded new numbers.txt file from windows.\nMac Shell: Downloads/&gt;$ ./Project1 \n\nRaw output:\n-----------\nSegmentation fault: 11\nMac Shell: Downloads/&gt;$\n</code></pre>\n\n<h2>Windows with Mac file:</h2>\n\n<p><a href=\"https://i.stack.imgur.com/6ce3Q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6ce3Q.png\" alt=\"enter image description here\"></a></p>\n\n<h2>Code:</h2>\n\n<pre><code>void do_file_magic(string file){\n    string line, replace = \"\", numeral, dump = \"\", temp;\n    ifstream source (\"numbers.txt\");\n    if (!source.is_open()) {\n        die_a_clean_death(\"Unable to open source file:\", file);\n    };\n\n    // Display output to console:\n    sep(\"Raw output:\");\n\n    // read source file and output vowels to destination file.\n    while ( getline(source, line) || true) {\n        dump = dump + replace;\n        if ( line[0] != ' ') {\n            temp = num2string(roman2num(line));\n            line = remove_whitespace(line);\n            replace = line + string(17-line.size(), ' ') + temp + \"\\n\";\n\n        // If you read this then you noticed that there was some shenagins going on.\n        } else {\n            numeral = num2roman(string2num(line));\n            line = remove_whitespace(line);\n            replace = numeral + string(17 - numeral.size(), ' ') + line + \"\\n\";\n        };\n        if(source.eof()) {\n            break;\n        }\n    };\n    printf(\"file dump: \\n%s\", dump.c_str());\n\n\n    // Close the files\n    source.close();\n\n    // open the file in output mode nuking everything from orbit.\n    // (Its the only way to be sure)\n    ofstream destination(\"numbers.txt\");\n    if (!destination.is_open()) {\n        die_a_clean_death(\"Unable to open destination file:\", file);\n    };\n\n    // Just dump a variable to the file.\n    destination &lt;&lt; dump &lt;&lt; \"\\n\";\n\n    destination.close();\n};\n</code></pre>\n\n<p>Could someone help me to understand where I am going wrong here?</p>\n"}, {"tags": ["c++", "templates", "using"], "comments": [{"owner": {"reputation": 56, "user_id": 6875582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07fc1ea393279c536c3e685aa0736208?s=128&d=identicon&r=PG&f=1", "display_name": "kdelaney", "link": "https://stackoverflow.com/users/6875582/kdelaney"}, "edited": false, "score": 0, "creation_date": 1475082737, "post_id": 39753551, "comment_id": 66803558, "body": "Can you provide an example of the &quot;more complicated aliases&quot; and the exact complaint provided by your compiler?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1475084131, "post_id": 39753551, "comment_id": 66804295, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of the actual problem code."}], "answers": [{"comments": [{"owner": {"reputation": 907, "user_id": 3964037, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/1667882889/picture?type=large", "display_name": "Alexander Bily", "link": "https://stackoverflow.com/users/3964037/alexander-bily"}, "edited": false, "score": 0, "creation_date": 1475083396, "post_id": 39753955, "comment_id": 66803900, "body": "So as long as I use it only in namespace scope, it should be ok?"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 4, "last_activity_date": 1475083970, "last_edit_date": 1475083970, "creation_date": 1475083311, "answer_id": 39753955, "question_id": 39753551, "link": "https://stackoverflow.com/questions/39753551/c-multiple-definitions-of-using-alias/39753955#39753955", "title": "C++ multiple definitions of &#39;using&#39; alias", "body": "<blockquote>\n  <p>Is it legal in C++ to declare same using alias multiple times?</p>\n</blockquote>\n\n<p>Yes, it is legal.</p>\n\n<p>An <em>alias-declaration</em> with the <code>using ... = ...;</code> syntax is a fancier way to declare a <code>typedef</code>. Hence, it can be repeated without any problem as long as they don't declare the alias to be different types.</p>\n"}], "owner": {"reputation": 907, "user_id": 3964037, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/1667882889/picture?type=large", "display_name": "Alexander Bily", "link": "https://stackoverflow.com/users/3964037/alexander-bily"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1189, "favorite_count": 0, "accepted_answer_id": 39753955, "answer_count": 1, "score": 4, "last_activity_date": 1475083970, "creation_date": 1475081991, "question_id": 39753551, "link": "https://stackoverflow.com/questions/39753551/c-multiple-definitions-of-using-alias", "title": "C++ multiple definitions of &#39;using&#39; alias", "body": "<p>Is it legal in C++ to declare same <code>using</code> alias multiple times? I have a template library, where one header file is used as 'public' - it contains all template class declarations and aliases, and then 'implementation' files (not in literal sense, these contains definitions of template classes). Public header file includes all implementation headers at it's end.</p>\n\n<p>It is not possible to include public header from implementation file, because that would cause cyclic dependency. However, I want to use template aliases declared in header file inside of implementation file.</p>\n\n<p>Example:</p>\n\n<p>'public' header:</p>\n\n<pre><code>using true_type = logical_constant&lt;true&gt;;\nusing false_type = logical_constant&lt;false&gt;;\n</code></pre>\n\n<p>'private' implementation files:</p>\n\n<pre><code>using true_type = logical_constant&lt;true&gt;;\nusing false_type = logical_constant&lt;false&gt;;\n</code></pre>\n\n<p>As long as both using aliases alias same thing, is this legal? This simple example worked for me in MSVC 14, but when I tried to use more complicated aliases same way, compiler complained.</p>\n"}, {"tags": ["java", "c++", "sockets", "encryption", "stream"], "comments": [{"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 2, "creation_date": 1475081715, "post_id": 39753342, "comment_id": 66803032, "body": "If you decide to use ssl on both ends then you can use <a href=\"http://www.boost.org/doc/libs/1_61_0/doc/html/boost_asio/overview/ssl.html\" rel=\"nofollow noreferrer\">Boost Asio</a>&#39;s ssl functions."}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1475082166, "post_id": 39753342, "comment_id": 66803272, "body": "If you are committed to using the java library then you could <a href=\"http://stackoverflow.com/a/992876/1460794\">call the java functions</a> from c++."}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1475082555, "post_id": 39753342, "comment_id": 66803476, "body": "Which <a href=\"https://docs.oracle.com/javase/7/docs/api/javax/crypto/Cipher.html\" rel=\"nofollow noreferrer\">Cipher</a> are you using?"}, {"owner": {"reputation": 8788, "user_id": 6866309, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CFXxE.jpg?s=128&g=1", "display_name": "Pavan Chandaka", "link": "https://stackoverflow.com/users/6866309/pavan-chandaka"}, "reply_to_user": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1475082769, "post_id": 39753342, "comment_id": 66803574, "body": "He said stream cipher @flatmouse"}, {"owner": {"reputation": 2537, "user_id": 1720829, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e2DBe.png?s=128&g=1", "display_name": "Nathan F.", "link": "https://stackoverflow.com/users/1720829/nathan-f"}, "reply_to_user": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1475094462, "post_id": 39753342, "comment_id": 66810012, "body": "@flatmouse I think that using SSL is probably going to be better than using Stream Ciphering for my purposes. If you&#39;d like to submit it as an answer, albeit not a real answer, just a better solution, I&#39;d be happy to accept it."}], "owner": {"reputation": 2537, "user_id": 1720829, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e2DBe.png?s=128&g=1", "display_name": "Nathan F.", "link": "https://stackoverflow.com/users/1720829/nathan-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1475082447, "creation_date": 1475081242, "question_id": 39753342, "link": "https://stackoverflow.com/questions/39753342/c-stream-ciphering", "title": "C++ Stream Ciphering", "body": "<p>working in Java lately I've been using Cipher Streams, <code>CipherInputStream</code> and <code>CipherOutputStream</code>. I'm looking for similar methods of stream ciphering in C++ that I could use on the other end of a socket wrapped in a CipherStream in java. </p>\n\n<p>IE: </p>\n\n<p>Have a server socket in CPP with a <code>CipherInputStream</code> wrapping it's <code>InputStream</code>, have a client socket in Java with a <code>CipherOutputStream</code> wrapping it's <code>OutputStream</code>.</p>\n\n<p>This way, I could encrypt the data between the two. </p>\n\n<p>There are reasons that I have to use C++ server side that I can't go into right now, I'm just looking for a way to achieve what I listed above. Any help would be greatly appreciated.</p>\n"}, {"tags": ["c++", "mpi", "distributed-computing", "message-passing"], "comments": [{"owner": {"reputation": 53, "user_id": 3384414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e013963a38709d8bd48b55d2c91b63?s=128&d=identicon&r=PG&f=1", "display_name": "user3384414", "link": "https://stackoverflow.com/users/3384414/user3384414"}, "edited": false, "score": 5, "creation_date": 1475081314, "post_id": 39753113, "comment_id": 66802763, "body": "This question has been answered here: <a href=\"https://stackoverflow.com/questions/6579563/serialize-mpi-threads\" title=\"serialize mpi threads\">stackoverflow.com/questions/6579563/serialize-mpi-threads</a>"}, {"owner": {"reputation": 1084, "user_id": 4443423, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OwXBe.jpg?s=128&g=1", "display_name": "Maikel", "link": "https://stackoverflow.com/users/4443423/maikel"}, "edited": false, "score": 0, "creation_date": 1475081338, "post_id": 39753113, "comment_id": 66802779, "body": "Communicate an int and prinr sth only with the process with that rank id."}, {"owner": {"reputation": 395, "user_id": 2877774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddb93752b0652f724dbc0641b8846f07?s=128&d=identicon&r=PG&f=1", "display_name": "shubhraj", "link": "https://stackoverflow.com/users/2877774/shubhraj"}, "reply_to_user": {"reputation": 1084, "user_id": 4443423, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OwXBe.jpg?s=128&g=1", "display_name": "Maikel", "link": "https://stackoverflow.com/users/4443423/maikel"}, "edited": false, "score": 0, "creation_date": 1475083271, "post_id": 39753113, "comment_id": 66803835, "body": "Thanks...@user3384414, but that uses a for loop,I have done that... can we do it using command line..like I just found out we can use the following: mpirun -np 10 l2 --rank-by....this &quot;--rank-by&quot; does it in round-robin fashion but I need the starting rank to be specific to what I mention in command line, so if I mention 5 then the sequence should be 5,6,7,8,9...so on  @Maikel - I didnt get u &quot;communicate an int and print sth&quot; meaning??new to mpi so ur help is highly appreciated..."}, {"owner": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "edited": false, "score": 1, "creation_date": 1475096689, "post_id": 39753113, "comment_id": 66811250, "body": "There are plenty of solutions. You can use multiple <code>MPI_Barrier()</code> like in <a href=\"https://stackoverflow.com/questions/6579563/serialize-mpi-threads\" title=\"serialize mpi threads\">stackoverflow.com/questions/6579563/serialize-mpi-threads</a> , you can use a token sent by rank <code>r</code> to rank <code>(r+1)%size</code>, you can use <code>MPI_Gatherv()</code> to gather the different arrays of char from the different processors and print it at once... Which one are you trying to implement? My guess is that there is no predefined option to print stuffs in an ordered fashion. And it is hard to write C++/MPI without using <code>for</code> loops!"}, {"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 2, "creation_date": 1475154034, "post_id": 39753113, "comment_id": 66836417, "body": "No matter how well you synchronise the MPI ranks, as long as you are printing to the standard output from different ranks, there is <b>absolutely no guarantee</b> regarding the order of the text in the final output."}], "owner": {"reputation": 395, "user_id": 2877774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddb93752b0652f724dbc0641b8846f07?s=128&d=identicon&r=PG&f=1", "display_name": "shubhraj", "link": "https://stackoverflow.com/users/2877774/shubhraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "closed_date": 1475154129, "answer_count": 0, "score": 0, "last_activity_date": 1475080566, "creation_date": 1475080566, "question_id": 39753113, "link": "https://stackoverflow.com/questions/39753113/mpi-programming-c-specific-sequence-for-process-based-on-rank", "closed_reason": "Duplicate", "title": "MPI Programming C++, Specific Sequence for process based on rank", "body": "<p><br>\nI am new to MPI programming and I wrote the following code to check the ranks so when I run a code, It randomly selects any one of the processor at a time. \nso when I do an MPI run I get the follow outputs(I ran it for two instances) processor number i.e -np 10<br>\nI get the following output:<br>\nInstance 1:<br>\n$ mpirun -np 10 L2<br>\nRank 2<br>\nRank 7<br>\nRank 5<br>\nRank 1<br>\nRank 4<br>\nRank 9<br>\nRank 0<br>\nRank 3<br>\nRank 8<br>\nRank 6<br></p>\n\n<p>Instance 2:<br>\n$ mpirun -np 10 L2<br></p>\n\n<p>Rank 4<br>\nRank 2<br>\nRank 1<br>\nRank 9<br>\nRank 5<br>\nRank 3<br>\nRank 0<br>\nRank 6<br>\nRank 8<br>\nRank 7<br></p>\n\n<p>I would like to know if there is any way I can start with a specific processor and follow in sequence , increment 1 to each for example: if I wish to start with 6 then the output should be as follows:<br></p>\n\n<p>Rank 6<br>\nRank 7<br>\nRank 8<br>\nRank 9<br>\nRank 0<br>\nRank 1<br>\nRank 2<br>\nRank 3<br>\nRank 4<br>\nRank 5<br></p>\n\n<p>Thanks!<br></p>\n\n<p>Shubh<br>\nCoder GeEk :P<br></p>\n\n<p>Below is the code:<br></p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;mpi.h&gt;\n\nusing namespace std;\n\nint main(int argc, char *argv[]){\nint rank, size;\n\nMPI_Init(&amp;argc, &amp;argv);\nMPI_Comm_rank(MPI_COMM_WORLD, &amp;rank);\nMPI_Comm_size(MPI_COMM_WORLD, &amp;size);\ncout&lt;&lt;\"Rank \"&lt;&lt;rank&lt;&lt;endl; mpi_finalize();\n}\n</code></pre>\n\n<p>Tellme if I was able to explain my problem clearly or I will edit it to explain it better way.</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1475081615, "post_id": 39753092, "comment_id": 66802953, "body": "And what type is that?"}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1475085323, "post_id": 39753092, "comment_id": 66804992, "body": "I just changed <code>char *itr</code> to <code>uchar *itr</code>. I assumed that was the intent. (It&#39;s not relevant to the main question, but is important to get this code to compile)"}, {"owner": {"reputation": 3514, "user_id": 4007560, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1162aef118e8e02c61cb16e2ec3778ab?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Hsu", "link": "https://stackoverflow.com/users/4007560/robin-hsu"}, "reply_to_user": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1475420969, "post_id": 39753092, "comment_id": 66926800, "body": "@Aaron: Yes, it&#39;s a typo."}], "answers": [{"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1475084959, "post_id": 39753581, "comment_id": 66804800, "body": "Good answer, but solving the OP&#39;s problem as well as answering questions is encouraged."}], "tags": [], "owner": {"reputation": 209, "user_id": 773212, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8139af4e3e30ec762d5631694132ac01?s=128&d=identicon&r=PG", "display_name": "Renaud", "link": "https://stackoverflow.com/users/773212/renaud"}, "is_accepted": false, "score": 0, "last_activity_date": 1475082066, "creation_date": 1475082066, "answer_id": 39753581, "question_id": 39753092, "link": "https://stackoverflow.com/questions/39753092/c11-conditional-expression-on-stdgreater-and-stdless-got-error-of-differen/39753581#39753581", "title": "C++11 conditional expression on std::greater and std::less got error of different types", "body": "<p>I think it is not, as it is said it is different types. std::less is something like this :</p>\n\n<pre><code>template &lt;class T&gt;\nstruct Less\n{\n      bool operator()(const T &amp; t1, const T &amp; t2) ..\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14411, "user_id": 52724, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c1e5bf4421007b7cfe4dba5ecb24f777?s=128&d=identicon&r=PG", "display_name": "Karl Nicoll", "link": "https://stackoverflow.com/users/52724/karl-nicoll"}, "is_accepted": false, "score": 2, "last_activity_date": 1475082426, "creation_date": 1475082426, "answer_id": 39753690, "question_id": 39753092, "link": "https://stackoverflow.com/questions/39753092/c11-conditional-expression-on-stdgreater-and-stdless-got-error-of-differen/39753690#39753690", "title": "C++11 conditional expression on std::greater and std::less got error of different types", "body": "<p>Functors are just regular types. <code>std::greater&lt;uchar&gt;</code> is a completely different type from <code>std:less&lt;uchar&gt;</code>. Just like how <code>std::vector&lt;uchar&gt;</code> is different from <code>std::set&lt;uchar&gt;</code>, even though their properties are similar!</p>\n\n<p>You can achieve what you want to achieve if you move your ternary operator a bit though:</p>\n\n<pre><code>char *itr = cond ?\n    std::upper_bound(start, end, uchar(20), std::greater&lt;uchar&gt;()) :\n    std::upper_bound(start, end, uchar(20), std::less&lt;uchar&gt;());\n</code></pre>\n\n<p>It's slightly more duplication, but just as readable and will compile.</p>\n"}, {"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1475084790, "post_id": 39753692, "comment_id": 66804701, "body": "I would just use <code>auto&amp;&amp;</code>, because who cares if it is <code>const</code>.  And <code>itr = cond?upper_bound(std::greater&lt;char&gt;{}):upper_bound(std::less&zwnj;&#8203;&lt;char&gt;{});</code> would more closely match the OP&#39;s original code."}], "tags": [], "owner": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "is_accepted": false, "score": 5, "last_activity_date": 1475082429, "creation_date": 1475082429, "answer_id": 39753692, "question_id": 39753092, "link": "https://stackoverflow.com/questions/39753092/c11-conditional-expression-on-stdgreater-and-stdless-got-error-of-differen/39753692#39753692", "title": "C++11 conditional expression on std::greater and std::less got error of different types", "body": "<p><code>std::greater</code> and <code>std::less</code> are different types (just as different as <code>std::string</code> and <code>std::unordered_map</code>). They only provide same interface (<code>operator()</code>).</p>\n\n<p>Conditional operator <code>cond ? expr1 : expr2</code> requires, that <code>expr1</code> and <code>expr2</code> is of the same type (or one is implicitly convertible to another) and that is not your case.</p>\n\n<p>You can use</p>\n\n<pre><code>char *itr;\nif (cond)\n    itr = std::upper_bound(start, end, uchar(20), std::greater&lt;uchar&gt;{});\nelse\n    itr = std::upper_bound(start, end, uchar(20), std::less&lt;uchar&gt;{});\n</code></pre>\n\n<p>Or if you do not want to have two almost same lines, you can help yourself with generic lambda</p>\n\n<pre><code>auto upper_bound = [&amp;](const auto&amp; cmp){\n    return std::upper_bound(start, end, uchar(20), cmp);\n};\nif (cond)\n    itr = upper_bound(std::greater&lt;uchar&gt;{});\nelse\n    itr = upper_bound(std::less&lt;uchar&gt;{});\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 681, "user_id": 1858769, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U6PeN.jpg?s=128&g=1", "display_name": "Jason L.", "link": "https://stackoverflow.com/users/1858769/jason-l"}, "is_accepted": false, "score": 0, "last_activity_date": 1475084675, "last_edit_date": 1475084675, "creation_date": 1475083665, "answer_id": 39754051, "question_id": 39753092, "link": "https://stackoverflow.com/questions/39753092/c11-conditional-expression-on-stdgreater-and-stdless-got-error-of-differen/39754051#39754051", "title": "C++11 conditional expression on std::greater and std::less got error of different types", "body": "<p>First, these two functors don't have the same type, even though they have same type of opetor(), which is, after template instantiation,  </p>\n\n<pre><code>bool operator()(uchar lhs, uchar rhs)  \n</code></pre>\n\n<p>Similarly, just because <code>vector&lt;int&gt;</code> and <code>deque&lt;int&gt;</code> have same type of operator[] obviously doesn't mean they have the same type. </p>\n\n<p>Back to your code, if you are able to use C++11, a simple &amp; elegant solution is using lambda: </p>\n\n<pre><code>char *itr = std::upper_bound(start, end, uchar(20),  \n            [cond](uchar lhs, uchar rhs) { return cond ? lhs &gt; rhs : lhs &lt; rhs); }\n</code></pre>\n\n<p>Otherwise, just writ a straightforward functor  </p>\n\n<pre><code>class F{  \npublic:  \n    explicit F(bool cond): m_cond(cond) {}\n    bool operator(uchar lhs, uchar rhs) { return m_cond ? lhs &gt; rhs : lhs &lt; rhs); }  \nprivate:\n    bool m_cond;\n};\n</code></pre>\n\n<p>Lastly, lambda is a pretty handy tool, I suggest you get to know more about it.<br>\n<a href=\"https://stackoverflow.com/questions/7627098/what-is-a-lambda-expression-in-c11\">What is a lambda expression in C++11?</a><br>\n<a href=\"https://stackoverflow.com/questions/27256062/when-to-use-functors-over-lambdas\">When to use functors over lambdas</a></p>\n"}, {"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1475088245, "post_id": 39754400, "comment_id": 66806754, "body": "This will probably break on MSVC because their lambdas have <i>four</i> implicit conversions to function pointers (one per calling convention), but I haven&#39;t tested it."}], "tags": [], "owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "is_accepted": false, "score": 0, "last_activity_date": 1475086085, "last_edit_date": 1475086085, "creation_date": 1475084862, "answer_id": 39754400, "question_id": 39753092, "link": "https://stackoverflow.com/questions/39753092/c11-conditional-expression-on-stdgreater-and-stdless-got-error-of-differen/39754400#39754400", "title": "C++11 conditional expression on std::greater and std::less got error of different types", "body": "<p>Convert both of them to lambdas (non-capture, non-generic). In that case, their types are still different, but they both convert naturally to a plain old function pointer <code>bool (*) (uchar, uchar)</code> and therefore the <code>?:</code> works</p>\n\n<pre><code>uchar *itr = std::upper_bound(start, end, uchar(20),\n                 cond?\n                 ([](uchar x, uchar y){return std::greater&lt;uchar&gt;{}(x,y);})\n                 :\n                 ([](uchar x, uchar y){return std::less   &lt;uchar&gt;{}(x,y);})\n             );\n</code></pre>\n\n<p>(This works for me on clang 3.5 and g++ 5.3, but I'm not sure how portable this is. Should I use unary <code>+</code> to force the conversion to the function pointer?</p>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 3, "last_activity_date": 1475090030, "creation_date": 1475090030, "answer_id": 39755855, "question_id": 39753092, "link": "https://stackoverflow.com/questions/39753092/c11-conditional-expression-on-stdgreater-and-stdless-got-error-of-differen/39755855#39755855", "title": "C++11 conditional expression on std::greater and std::less got error of different types", "body": "<p>Functors in C++ do not traditionally share a type.  This makes it easy for the compiler to understand <em>exactly</em> which functor is being called, and causes a performance boost.</p>\n\n<p>There is a mechanism in C++ called type erasure.  This is where you forget what makes two types different, and only remembers what makes them the same.</p>\n\n<p>The most common kind of type erasure in C++ is <code>std::function</code>.  This function here type erases a stateless template that takes two <code>T const&amp;</code> and returns a <code>bool</code>:</p>\n\n<pre><code>template&lt;class T, template&lt;class...&gt;class Z&gt;\nstd::function&lt; bool(T const&amp;, T const&amp;) &gt;\ncomp() { return Z&lt;T&gt;{}; }\n</code></pre>\n\n<p>we can then take your code and do this:</p>\n\n<pre><code>uchar *itr = std::upper_bound(start, end, uchar(20), \n            cond? comp&lt;uchar, std::greater&gt;() : comp&lt;uchar, std::less&gt;());\n</code></pre>\n\n<p>or alternatively:</p>\n\n<pre><code>template&lt;class T&gt;\nusing comp_sig = bool(T const&amp;, T const&amp;);\n\ntemplate&lt;class T, template&lt;class...&gt;class Z&gt;\ncomp_sig&lt;T&gt;* comp() {\n  return [](T const&amp; lhs, T const&amp; rhs)-&gt;bool{\n    return Z&lt;T&gt;{}(lhs, rhs);\n  };\n}\n</code></pre>\n\n<p>which gives you function pointers that call <code>less</code> or <code>greater</code> as required.  This version might be slightly easier for compilers to optimize than the <code>std::function</code> one, as compilers are really good at optimizing constant function pointers.</p>\n"}], "owner": {"reputation": 3514, "user_id": 4007560, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1162aef118e8e02c61cb16e2ec3778ab?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Hsu", "link": "https://stackoverflow.com/users/4007560/robin-hsu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 440, "favorite_count": 1, "accepted_answer_id": 39755855, "answer_count": 6, "score": 8, "last_activity_date": 1475090030, "creation_date": 1475080500, "last_edit_date": 1475087099, "question_id": 39753092, "link": "https://stackoverflow.com/questions/39753092/c11-conditional-expression-on-stdgreater-and-stdless-got-error-of-differen", "title": "C++11 conditional expression on std::greater and std::less got error of different types", "body": "<p>The following codes related to conditional expression:</p>\n\n<pre><code>typedef unsigned char uchar;\nuchar data[100];\n// assign something to array[] here\nuchar *start = data;\nuchar *end = data+100;\nbool cond = f();  // f() could return true or false\nuchar *itr = std::upper_bound(start, end, uchar(20), \n                cond? std::greater&lt;uchar&gt;() : std::less&lt;uchar&gt;());\n</code></pre>\n\n<p>got an error like this:</p>\n\n<pre><code>error: operands to ?: have different types \n\u2018std::greater&lt;unsigned char&gt;\u2019 and \u2018std::less&lt;unsigned char&gt;\u2019\n</code></pre>\n\n<p>Is this a compiler bug? In my instinct, the two functor should have the same type.</p>\n"}, {"tags": ["c++", "locking", "multiple-users"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1475079622, "post_id": 39752797, "comment_id": 66801674, "body": "This should be on SU not SO.  We help with programming here, not programs."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1475079647, "post_id": 39752797, "comment_id": 66801698, "body": "unless you want to hack it :) seriously, you could see if the software runs a <code>tasklist</code> command. In which case you could substitute a fake tasklist and feed it to your old program."}, {"owner": {"reputation": 681, "user_id": 1858769, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U6PeN.jpg?s=128&g=1", "display_name": "Jason L.", "link": "https://stackoverflow.com/users/1858769/jason-l"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1475088127, "post_id": 39752797, "comment_id": 66806686, "body": "Totally agree with @NathanOliver"}], "answers": [{"tags": [], "owner": {"reputation": 1472, "user_id": 2132352, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a717680b76af1c02258f45164bce0dc2?s=128&d=identicon&r=PG", "display_name": "sofsntp", "link": "https://stackoverflow.com/users/2132352/sofsntp"}, "is_accepted": true, "score": 0, "last_activity_date": 1475155369, "creation_date": 1475155369, "answer_id": 39771546, "question_id": 39752797, "link": "https://stackoverflow.com/questions/39752797/active-user-count/39771546#39771546", "title": "Active user count", "body": "<p>Transferred to su and resolved with Wireshark</p>\n"}], "owner": {"reputation": 1472, "user_id": 2132352, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a717680b76af1c02258f45164bce0dc2?s=128&d=identicon&r=PG", "display_name": "sofsntp", "link": "https://stackoverflow.com/users/2132352/sofsntp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 39771546, "answer_count": 1, "score": 0, "last_activity_date": 1475155369, "creation_date": 1475079559, "last_edit_date": 1475155344, "question_id": 39752797, "link": "https://stackoverflow.com/questions/39752797/active-user-count", "title": "Active user count", "body": "<p>Trying to understand how a software is counting concurrent users connected.\nTried to analyze the machine on which is installed. (Registry and files modified) but nothing found. Best approach ?</p>\n\n<p>Edit: Transferred to su and resolved.</p>\n"}, {"tags": ["c++", "opengl", "render", "geometry-instancing"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1475079453, "post_id": 39752685, "comment_id": 66801557, "body": "probably insignificant but you could compute <code>(float)sqrt(NUM_INS)</code> once and for all (the CPU will say thanks)."}, {"owner": {"reputation": 475, "user_id": 5256963, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e3b4896ad04a1ce99d5a3e60d34e9993?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/5256963/charlie"}, "edited": false, "score": 0, "creation_date": 1475079905, "post_id": 39752685, "comment_id": 66801876, "body": "this helped med do instanced rendering: <a href=\"http://ogldev.atspace.co.uk/www/tutorial33/tutorial33.html\" rel=\"nofollow noreferrer\">ogldev.atspace.co.uk/www/tutorial33/tutorial33.html</a> Its just a different draw call that tells the gpu to recycle information already sent"}, {"owner": {"reputation": 39713, "user_id": 2423205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EX7y2.png?s=128&g=1", "display_name": "Andon M. Coleman", "link": "https://stackoverflow.com/users/2423205/andon-m-coleman"}, "edited": false, "score": 0, "creation_date": 1475080624, "post_id": 39752685, "comment_id": 66802340, "body": "What class of hardware are you targeting out of curiosity? You could always take the opportunity to learn about compute shaders and indirect draw :) Generate all of those instances completely GPU-side and things will fly."}, {"owner": {"reputation": 1364, "user_id": 1324967, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/96e360b53f3344ad5049cb2e6c54b96a?s=128&d=identicon&r=PG", "display_name": "Paul Terwilliger", "link": "https://stackoverflow.com/users/1324967/paul-terwilliger"}, "reply_to_user": {"reputation": 475, "user_id": 5256963, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e3b4896ad04a1ce99d5a3e60d34e9993?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/5256963/charlie"}, "edited": false, "score": 0, "creation_date": 1475080624, "post_id": 39752685, "comment_id": 66802341, "body": "@Charlie Maybe I didn&#39;t mention in my post, but I am already using instancing in my code.  This is why my results confuse me."}, {"owner": {"reputation": 1364, "user_id": 1324967, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/96e360b53f3344ad5049cb2e6c54b96a?s=128&d=identicon&r=PG", "display_name": "Paul Terwilliger", "link": "https://stackoverflow.com/users/1324967/paul-terwilliger"}, "reply_to_user": {"reputation": 39713, "user_id": 2423205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EX7y2.png?s=128&g=1", "display_name": "Andon M. Coleman", "link": "https://stackoverflow.com/users/2423205/andon-m-coleman"}, "edited": false, "score": 0, "creation_date": 1475080686, "post_id": 39752685, "comment_id": 66802380, "body": "@AndonM.Coleman I am targeting computers with my same hardware, or maybe slightly worse."}, {"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1475082011, "post_id": 39752685, "comment_id": 66803192, "body": "The gpu you are using would be the interesting thing here."}], "answers": [{"comments": [{"owner": {"reputation": 1364, "user_id": 1324967, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/96e360b53f3344ad5049cb2e6c54b96a?s=128&d=identicon&r=PG", "display_name": "Paul Terwilliger", "link": "https://stackoverflow.com/users/1324967/paul-terwilliger"}, "edited": false, "score": 0, "creation_date": 1475081876, "post_id": 39753206, "comment_id": 66803116, "body": "Maybe you&#39;re right that millions of spheres is too ambitious.  However, here is a video where half-a-million spheres are rendered in OpenGL where they move and stuff too: <a href=\"https://www.youtube.com/watch?v=Tnc_IoXwH24\" rel=\"nofollow noreferrer\">youtube.com/watch?v=Tnc_IoXwH24</a>  Maybe I have to modify my project to meet your criteria, or a lower fps as in this video."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 1364, "user_id": 1324967, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/96e360b53f3344ad5049cb2e6c54b96a?s=128&d=identicon&r=PG", "display_name": "Paul Terwilliger", "link": "https://stackoverflow.com/users/1324967/paul-terwilliger"}, "edited": false, "score": 0, "creation_date": 1475082079, "post_id": 39753206, "comment_id": 66803232, "body": "@PaulTerwilliger: Did you read the details on that video? Specifically, the part where it says &quot;The number of triangles used for each sphere depends on it&#39;s distance from the viewer.&quot; That rules instancing out as a tool."}, {"owner": {"reputation": 1364, "user_id": 1324967, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/96e360b53f3344ad5049cb2e6c54b96a?s=128&d=identicon&r=PG", "display_name": "Paul Terwilliger", "link": "https://stackoverflow.com/users/1324967/paul-terwilliger"}, "edited": false, "score": 0, "creation_date": 1475082396, "post_id": 39753206, "comment_id": 66803407, "body": "I see, so is there no way that you know of to use instancing for different details of spheres?  Couldn&#39;t I send spheres of different details to the GPU and then render some or others depending on distance?"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 1364, "user_id": 1324967, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/96e360b53f3344ad5049cb2e6c54b96a?s=128&d=identicon&r=PG", "display_name": "Paul Terwilliger", "link": "https://stackoverflow.com/users/1324967/paul-terwilliger"}, "edited": false, "score": 1, "creation_date": 1475082600, "post_id": 39753206, "comment_id": 66803492, "body": "@PaulTerwilliger: Why are you so hung up on using instancing? Could you have several different sphere resolutions, then sort your instances based on distance to the camera? But the video in question is <i>not</i> doing that; it&#39;s <i>generating</i> vertex data on the GPU."}, {"owner": {"reputation": 1364, "user_id": 1324967, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/96e360b53f3344ad5049cb2e6c54b96a?s=128&d=identicon&r=PG", "display_name": "Paul Terwilliger", "link": "https://stackoverflow.com/users/1324967/paul-terwilliger"}, "edited": false, "score": 0, "creation_date": 1475082991, "post_id": 39753206, "comment_id": 66803686, "body": "I&#39;m not hung up on instancing, I just thought that instancing was THE method of drawing many of the same object.  I&#39;m learning and it&#39;s the only thing I was able to read about.  If there are other methods, like the one you posted about, and they work for my goals, then I would love to use those.  My only goals are to render lots of spheres (hundreds of thousands minimum)"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 1364, "user_id": 1324967, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/96e360b53f3344ad5049cb2e6c54b96a?s=128&d=identicon&r=PG", "display_name": "Paul Terwilliger", "link": "https://stackoverflow.com/users/1324967/paul-terwilliger"}, "edited": false, "score": 2, "creation_date": 1475083157, "post_id": 39753206, "comment_id": 66803774, "body": "@PaulTerwilliger: &quot;<i>I just thought that instancing was THE method of drawing many of the same object</i>&quot; It is. But they&#39;re not &quot;the same object&quot; if they have different triangle counts."}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": true, "score": 5, "last_activity_date": 1475080862, "creation_date": 1475080862, "answer_id": 39753206, "question_id": 39752685, "link": "https://stackoverflow.com/questions/39752685/instancing-millions-of-objects-in-opengl-improving-frames-per-second/39753206#39753206", "title": "Instancing millions of objects in OpenGL: improving frames-per-second", "body": "<blockquote>\n  <p>My ultimate goal is to render 1 million spheres of different sizes and colors at 60 fps.</p>\n</blockquote>\n\n<p>This is an unreasonable expectation.</p>\n\n<p>Let's say that each sphere consists of 50 triangles. Kinda small for a good sphere shape, but lets assume they're that small.</p>\n\n<p>1 million spheres at 50 tris per sphere is 50 million triangles <em>per frame</em>. At 60 FPS, that's 3 <em>billion</em> triangles per second.</p>\n\n<p>No commercially available GPU is good enough to do that. And that's just a 50 triangle sphere; your 4x tessellated icosahedron will be over <em>5,000</em> triangles.</p>\n\n<p>Now yes, drawing 60 such spheres is only ~300,000 triangles per frame. But even that at 60 FPS is ~18 million triangles per second. Hardware does exist that can handle that many triangles, but it's very clearly a <em>lot</em>. And you're <em>definitely</em> not going to get 1 million of them.</p>\n\n<p>This is not a matter of GPU/CPU communication or overhead. You're simply throwing more work at your GPU than it could handle. You might be able to improve a couple of things here and there, but nothing that's going to get you even one tenth of what you want.</p>\n\n<p>At least, not with this overall approach.</p>\n\n<hr>\n\n<p>For your particular case of wanting to draw millions of spheres, I would use raytraced impostors rather than actual geometry of spheres. That is, you draw quads, who's positions are generated by the vertex (or geometry) shader. You generate a quad per sphere, such that the quad circumscribes the sphere. Then the fragment shader does a simple ray-sphere intersection test to see if the fragment in question (from the direction of the camera view) hits the sphere or not. If the ray doesn't hit the sphere, you discard the fragment.</p>\n\n<p>You would also need to modify <code>gl_FragDepth</code> to give the impostor the proper depth value, so that intersecting spheres can work.</p>\n"}], "owner": {"reputation": 1364, "user_id": 1324967, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/96e360b53f3344ad5049cb2e6c54b96a?s=128&d=identicon&r=PG", "display_name": "Paul Terwilliger", "link": "https://stackoverflow.com/users/1324967/paul-terwilliger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1864, "favorite_count": 1, "accepted_answer_id": 39753206, "answer_count": 1, "score": 3, "last_activity_date": 1475080862, "creation_date": 1475079143, "last_edit_date": 1475080718, "question_id": 39752685, "link": "https://stackoverflow.com/questions/39752685/instancing-millions-of-objects-in-opengl-improving-frames-per-second", "title": "Instancing millions of objects in OpenGL: improving frames-per-second", "body": "<p>My ultimate goal is to render 1 million spheres of different sizes and colors at 60 fps.  I want to be able to move the camera around the screen as well.  </p>\n\n<p>I have modified the code on <a href=\"http://learnopengl.com/#!Advanced-OpenGL/Instancing\" rel=\"nofollow\">this page of the tutorial I am studying</a> to try to instance many spheres.  However, I find that at as little as 64 spheres my fps falls below 60, and at 900 spheres my fps is a measly 4.  My understanding of instancing is naive, but I believe that I should be getting more frames-per-second than this.  60 fps should be attainable with only 64 spheres.  I believe that I am, in some way, causing the CPU and GPU to communicate more often than they should have to.  So my question is: How do I instance so many objects (ideally millions) without causing the fps to fall low (ideally 60 fps)?</p>\n\n<p>I am calculating fps by calculating <code>(10 / time_elapsed)</code> every 10 frames, where <code>time_elapsed</code> is the time that has elapsed since the last fps call.  I am printing this out using <code>printf</code> on line 118 of my code.   </p>\n\n<p>I have been learning OpenGL through <a href=\"http://www.learnopengl.com/\" rel=\"nofollow\">this tutorial</a> and so I use <a href=\"http://glew.sourceforge.net/\" rel=\"nofollow\">32-bit GLEW</a> and <a href=\"http://www.glfw.org/\" rel=\"nofollow\">32-bit GLFW</a> in Visual Studio 2013.  I have 8 GB of RAM on a 64-bit operating system (Windows 7) with a <a href=\"http://ark.intel.com/products/85213/Intel-Core-i5-5300U-Processor-3M-Cache-up-to-2_90-GHz\" rel=\"nofollow\">2.30 GHz CPU</a>.</p>\n\n<p>I have tried coding my own example based on the tutorial above.  Source code:</p>\n\n<p>(set line #2 to be the number of spheres to be instanced. Make sure line#2 has a whole-number square root.  Set line 4 to be the detail of the sphere, the lowest it can go is 0.  Higher number = more detailed.)</p>\n\n<pre><code>// Make sure NUM_INS is a square number\n#define NUM_INS 1\n\n// Detail up to 4 is probably good enough\n#define SPHERE_DETAIL 4\n\n#include &lt;vector&gt;\n\n// GLEW\n#define GLEW_STATIC\n#include &lt;GL/glew.h&gt;\n\n// GLFW\n#include &lt;GLFW/glfw3.h&gt;\n\n// GL includes\n#include \"Shader.h\"\n\n// GLM Mathemtics\n#include &lt;glm/glm.hpp&gt;\n#include &lt;glm/gtc/matrix_transform.hpp&gt;\n#include &lt;glm/gtc/type_ptr.hpp&gt;\n\n// Properties\nGLuint screenWidth = 800, screenHeight = 600;\n\n// Function prototypes\nvoid key_callback(GLFWwindow* window, int key, int scancode, int action, int mode);\nstd::vector&lt;GLfloat&gt; create_sphere(int recursion);\n\n// The MAIN function, from here we start our application and run the Game loop\nint main()\n{\n  // Init GLFW\n  glfwInit();\n  glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, 3);\n  glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, 3);\n  glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);\n  glfwWindowHint(GLFW_RESIZABLE, GL_FALSE);\n\n  GLFWwindow* window = glfwCreateWindow(screenWidth, screenHeight, \"LearnOpenGL\", nullptr, nullptr); // Windowed\n  glfwMakeContextCurrent(window);\n\n  // Set the required callback functions\n  glfwSetKeyCallback(window, key_callback);\n\n  // Initialize GLEW to setup the OpenGL Function pointers\n  glewExperimental = GL_TRUE;\n  glewInit();\n\n  // Define the viewport dimensions\n  glViewport(0, 0, screenWidth, screenHeight);\n  glPolygonMode(GL_FRONT_AND_BACK, GL_LINE); // Comment to remove wireframe mode\n\n  // Setup OpenGL options\n  glEnable(GL_DEPTH_TEST);\n\n  // Setup and compile our shader(s)\n  Shader shader(\"core.vs\", \"core.frag\");\n\n  // Generate a list of 100 quad locations/translation-vectors\n  std::vector&lt;glm::vec2&gt; translations(NUM_INS);\n  //glm::vec2 translations[NUM_INS];\n  int index = 0;\n  GLfloat offset = 1.0f / (float)sqrt(NUM_INS);\n  for (GLint y = -(float)sqrt(NUM_INS); y &lt; (float)sqrt(NUM_INS); y += 2)\n  {\n    for (GLint x = -(float)sqrt(NUM_INS); x &lt; (float)sqrt(NUM_INS); x += 2)\n    {\n      glm::vec2 translation;\n      translation.x = (GLfloat)x / (float)sqrt(NUM_INS) + offset;\n      translation.y = (GLfloat)y / (float)sqrt(NUM_INS) + offset;\n      translations[index++] = translation;\n    }\n  }\n\n  // Store instance data in an array buffer\n  GLuint instanceVBO;\n  glGenBuffers(1, &amp;instanceVBO);\n  glBindBuffer(GL_ARRAY_BUFFER, instanceVBO);\n  glBufferData(GL_ARRAY_BUFFER, sizeof(glm::vec2) * NUM_INS, &amp;translations[0], GL_STATIC_DRAW);\n  glBindBuffer(GL_ARRAY_BUFFER, 0);\n\n  // create 12 vertices of a icosahedron\n  std::vector&lt;GLfloat&gt; vv = create_sphere(SPHERE_DETAIL);\n\n  GLuint quadVAO, quadVBO;\n  glGenVertexArrays(1, &amp;quadVAO);\n  glGenBuffers(1, &amp;quadVBO);\n  glBindVertexArray(quadVAO);\n  glBindBuffer(GL_ARRAY_BUFFER, quadVBO);\n  glBufferData(GL_ARRAY_BUFFER, vv.size() * sizeof(GLfloat), &amp;vv[0], GL_STATIC_DRAW);\n  glEnableVertexAttribArray(0);\n  glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 6 * sizeof(GLfloat), (GLvoid*)0);\n  glEnableVertexAttribArray(1);\n  glVertexAttribPointer(1, 3, GL_FLOAT, GL_FALSE, 6 * sizeof(GLfloat), (GLvoid*)(2 * sizeof(GLfloat)));\n  // Also set instance data\n  glEnableVertexAttribArray(2);\n  glBindBuffer(GL_ARRAY_BUFFER, instanceVBO);\n  glVertexAttribPointer(2, 2, GL_FLOAT, GL_FALSE, 2 * sizeof(GLfloat), (GLvoid*)0);\n  glBindBuffer(GL_ARRAY_BUFFER, 0);\n  glVertexAttribDivisor(2, 1); // Tell OpenGL this is an instanced vertex attribute.\n  glBindVertexArray(0);\n\n  // For printing frames-per-second\n  float counter = 0;\n  double get_time = 0;\n  double new_time;\n\n  // Game loop\n  while (!glfwWindowShouldClose(window))\n  {\n    // Print fps by printing (number_of_frames / time_elapsed)\n    counter += 1;\n    if (counter &gt; 10) {\n      counter -= 10;\n      new_time = glfwGetTime();\n      printf(\"fps: %.2f \", (10/(new_time - get_time)));\n      get_time = new_time;\n    }\n\n    // Check and call events\n    glfwPollEvents();\n\n    // Clear buffers\n    //glClearColor(0.2f, 0.3f, 0.3f, 1.0f);\n    glClearColor(0.2f, 0.3f, 0.3f, 1.0f);\n    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n\n    // Draw 100 instanced quads\n    shader.Use();\n\n    glm::mat4 model;\n    model = glm::rotate(model, 0.0f, glm::vec3(1.0f, 0.0f, 0.0f));\n    // Camera/View transformation\n    glm::mat4 view;\n    GLfloat radius = 10.0f;\n    GLfloat camX = sin(glfwGetTime()) * radius;\n    GLfloat camZ = cos(glfwGetTime()) * radius;\n    view = glm::lookAt(glm::vec3(camX, 0.0f, camZ), glm::vec3(0.0f, 0.0f, 0.0f), glm::vec3(0.0f, 1.0f, 0.0f));\n    // Projection \n    glm::mat4 projection;\n    projection = glm::perspective(45.0f, (GLfloat)screenWidth / (GLfloat)screenHeight, 0.1f, 100.0f);\n    // Get the uniform locations\n    GLint modelLoc = glGetUniformLocation(shader.Program, \"model\");\n    GLint viewLoc = glGetUniformLocation(shader.Program, \"view\");\n    GLint projLoc = glGetUniformLocation(shader.Program, \"projection\");\n    // Pass the matrices to the shader\n    glUniformMatrix4fv(modelLoc, 1, GL_FALSE, glm::value_ptr(model));\n    glUniformMatrix4fv(viewLoc, 1, GL_FALSE, glm::value_ptr(view));\n    glUniformMatrix4fv(projLoc, 1, GL_FALSE, glm::value_ptr(projection));\n\n    glBindVertexArray(quadVAO);\n    glDrawArraysInstanced(GL_TRIANGLES, 0, vv.size() / 3, NUM_INS); // 100 triangles of 6 vertices each\n    glBindVertexArray(0);\n\n    // Swap the buffers\n    glfwSwapBuffers(window);\n  }\n\n  glfwTerminate();\n  return 0;\n}\n\n// Is called whenever a key is pressed/released via GLFW\nvoid key_callback(GLFWwindow* window, int key, int scancode, int action, int mode)\n{\n  if (key == GLFW_KEY_ESCAPE &amp;&amp; action == GLFW_PRESS)\n    glfwSetWindowShouldClose(window, GL_TRUE);\n}\n\nstd::vector&lt;GLfloat&gt; add_color(std::vector&lt;GLfloat&gt; sphere) {\n  // Add color\n  std::vector&lt;GLfloat&gt; colored_sphere;\n  for (GLint i = 0; i &lt; sphere.size(); i+=9) {\n    colored_sphere.push_back(sphere[i]);\n    colored_sphere.push_back(sphere[i+1]);\n    colored_sphere.push_back(sphere[i+2]);\n    colored_sphere.push_back(0.0f);\n    colored_sphere.push_back(0.0f);\n    colored_sphere.push_back(0.0f);\n    colored_sphere.push_back(sphere[i+3]);\n    colored_sphere.push_back(sphere[i+4]);\n    colored_sphere.push_back(sphere[i+5]);\n    colored_sphere.push_back(0.0f);\n    colored_sphere.push_back(0.0f);\n    colored_sphere.push_back(0.0f);\n    colored_sphere.push_back(sphere[i+6]);\n    colored_sphere.push_back(sphere[i+7]);\n    colored_sphere.push_back(sphere[i+8]);\n    colored_sphere.push_back(0.0f);\n    colored_sphere.push_back(0.0f);\n    colored_sphere.push_back(0.0f);\n  }\n\n  return colored_sphere;\n}\n\nstd::vector&lt;GLfloat&gt; tesselate(std::vector&lt;GLfloat&gt; shape, int recursion) {\n\n  if (recursion &gt; 0) {\n    std::vector&lt;GLfloat&gt; new_sphere = {};\n    for (GLint i = 0; i &lt; shape.size(); i += 9) {\n\n      // 1.902113 approximately\n      GLfloat radius = sqrt(1.0f + pow((1.0f + sqrt(5.0f)) / 2.0f, 2));\n\n      // Every 9 points is a triangle.  Take 1 triangle and turn it into 4 triangles.  \n      GLfloat p_one[] = {shape[i], shape[i + 1], shape[i + 2]};\n      GLfloat p_two[] = {shape[i + 3], shape[i + 4], shape[i + 5]};\n      GLfloat p_thr[] = {shape[i + 6], shape[i + 7], shape[i + 8]};\n      GLfloat p_one_two[] = { (p_one[0] + p_two[0]) / 2.0f, (p_one[1] + p_two[1]) / 2.0f, (p_one[2] + p_two[2]) / 2.0f };\n      GLfloat p_one_thr[] = { (p_one[0] + p_thr[0]) / 2.0f, (p_one[1] + p_thr[1]) / 2.0f, (p_one[2] + p_thr[2]) / 2.0f };\n      GLfloat p_two_thr[] = { (p_two[0] + p_thr[0]) / 2.0f, (p_two[1] + p_thr[1]) / 2.0f, (p_two[2] + p_thr[2]) / 2.0f };\n\n      GLfloat r_one_two = sqrt((p_one_two[0]*p_one_two[0]) + (p_one_two[1]*p_one_two[1]) + (p_one_two[2]*p_one_two[2]));\n      GLfloat r_one_thr = sqrt((p_one_thr[0]*p_one_thr[0]) + (p_one_thr[1]*p_one_thr[1]) + (p_one_thr[2]*p_one_thr[2]));\n      GLfloat r_two_thr = sqrt((p_two_thr[0]*p_two_thr[0]) + (p_two_thr[1]*p_two_thr[1]) + (p_two_thr[2]*p_two_thr[2]));\n\n      GLfloat t_one_two[] = { radius * p_one_two[0] / r_one_two, radius * p_one_two[1] / r_one_two, radius * p_one_two[2] / r_one_two };\n      GLfloat t_one_thr[] = { radius * p_one_thr[0] / r_one_thr, radius * p_one_thr[1] / r_one_thr, radius * p_one_thr[2] / r_one_thr };\n      GLfloat t_two_thr[] = { radius * p_two_thr[0] / r_two_thr, radius * p_two_thr[1] / r_two_thr, radius * p_two_thr[2] / r_two_thr };\n\n      // Triangle 1:\n        new_sphere.push_back(p_one[0]);\n      new_sphere.push_back(p_one[1]);\n      new_sphere.push_back(p_one[2]);\n\n      new_sphere.push_back(t_one_two[0]);\n      new_sphere.push_back(t_one_two[1]);\n      new_sphere.push_back(t_one_two[2]);\n\n      new_sphere.push_back(t_one_thr[0]);\n      new_sphere.push_back(t_one_thr[1]);\n      new_sphere.push_back(t_one_thr[2]);\n\n      // Triangle 2:\n        new_sphere.push_back(p_two[0]);\n      new_sphere.push_back(p_two[1]);\n      new_sphere.push_back(p_two[2]);\n\n      new_sphere.push_back(t_one_two[0]);\n      new_sphere.push_back(t_one_two[1]);\n      new_sphere.push_back(t_one_two[2]);\n\n      new_sphere.push_back(t_two_thr[0]);\n      new_sphere.push_back(t_two_thr[1]);\n      new_sphere.push_back(t_two_thr[2]);\n\n      // Triangle 3: \n        new_sphere.push_back(p_thr[0]);\n      new_sphere.push_back(p_thr[1]);\n      new_sphere.push_back(p_thr[2]);\n\n      new_sphere.push_back(t_one_thr[0]);\n      new_sphere.push_back(t_one_thr[1]);\n      new_sphere.push_back(t_one_thr[2]);\n\n      new_sphere.push_back(t_two_thr[0]);\n      new_sphere.push_back(t_two_thr[1]);\n      new_sphere.push_back(t_two_thr[2]);\n\n      // Center Triangle:\n\n        new_sphere.push_back(t_one_two[0]);\n      new_sphere.push_back(t_one_two[1]);\n      new_sphere.push_back(t_one_two[2]);\n\n      new_sphere.push_back(t_one_thr[0]);\n      new_sphere.push_back(t_one_thr[1]);\n      new_sphere.push_back(t_one_thr[2]);\n\n      new_sphere.push_back(t_two_thr[0]);\n      new_sphere.push_back(t_two_thr[1]);\n      new_sphere.push_back(t_two_thr[2]);\n    }\n    return tesselate(new_sphere, recursion - 1);\n  }\n\n  printf(\"number of vertices to be rendered: %d || \", shape.size());\n  return shape;\n}\n\nstd::vector&lt;GLfloat&gt; create_sphere(int recursion) {\n\n  // Define the starting icosahedron\n  GLfloat t_ = (1.0f + sqrt(5.0f)) / 2.0f;\n\n  std::vector&lt;GLfloat&gt; icosahedron = {\n    -1.0f,  t_,  0.0f, -t_,  0.0f,  1.0f, 0.0f,  1.0f,  t_,\n    -1.0f,  t_,  0.0f, 0.0f,  1.0f,  t_, 1.0f,  t_,  0.0f,\n    -1.0f,  t_,  0.0f, 1.0f,  t_,  0.0f, 0.0f,  1.0f, -t_,\n    -1.0f,  t_,  0.0f, 0.0f,  1.0f, -t_, -t_,  0.0f, -1.0f,\n    -1.0f,  t_,  0.0f, -t_,  0.0f, -1.0f, -t_,  0.0f,  1.0f,\n\n    1.0f,  t_,  0.0f, 0.0f,  1.0f,  t_,  t_,  0.0f,  1.0f, \n    0.0f,  1.0f,  t_, -t_,  0.0f,  1.0f,  0.0f, -1.0f,  t_, \n    -t_,  0.0f,  1.0f, -t_,  0.0f, -1.0f, -1.0f, -t_,  0.0f, \n    -t_,  0.0f, -1.0f,  0.0f,  1.0f, -t_,  0.0f, -1.0f, -t_, \n    0.0f,  1.0f, -t_,  1.0f,  t_,  0.0f,  t_,  0.0f, -1.0f, \n\n    1.0f, -t_,  0.0f, t_,  0.0f,  1.0f, 0.0f, -1.0f,  t_,\n    1.0f, -t_,  0.0f, 0.0f, -1.0f,  t_,-1.0f, -t_,  0.0f,\n    1.0f, -t_,  0.0f,-1.0f, -t_,  0.0f, 0.0f, -1.0f, -t_,\n    1.0f, -t_,  0.0f, 0.0f, -1.0f, -t_, t_,  0.0f, -1.0f,\n    1.0f, -t_,  0.0f, t_,  0.0f, -1.0f, t_,  0.0f,  1.0f,\n\n    0.0f, -1.0f,  t_, t_,  0.0f,  1.0f, 0.0f,  1.0f,  t_,\n    -1.0f, -t_,  0.0f, 0.0f, -1.0f,  t_,-t_,  0.0f,  1.0f,\n    0.0f, -1.0f, -t_,-1.0f, -t_,  0.0f,-t_,  0.0f, -1.0f,\n    t_,  0.0f, -1.0f, 0.0f, -1.0f, -t_, 0.0f,  1.0f, -t_,\n    t_,  0.0f,  1.0f, t_,  0.0f, -1.0f, 1.0f,  t_,  0.0f,\n  };\n\n  // Tesselate the icososphere the number of times recursion\n  std::vector&lt;GLfloat&gt; colorless_sphere = tesselate(icosahedron, recursion);\n\n  // Add color and return\n  return add_color(colorless_sphere);\n}\n</code></pre>\n\n<p>Vertex Shader: (named core.vs) </p>\n\n<pre><code>#version 330 core\nlayout (location = 0) in vec3 position;\nlayout (location = 1) in vec3 color;\nlayout (location = 2) in vec2 offset;\n\nout vec3 fColor;\n\nuniform mat4 model;\nuniform mat4 view;\nuniform mat4 projection;\n\nvoid main()\n{\n  gl_Position = projection * view * model * vec4(position.x + offset.x, position.y + offset.y, position.z, 1.0f);\n  fColor = color;\n} \n</code></pre>\n\n<p>Fragment Shader: (named core.frag)</p>\n\n<pre><code>#version 330 core\nin vec3 fColor;\nout vec4 color;\n\nvoid main()\n{\n  color = vec4(fColor, 1.0f);\n}\n</code></pre>\n\n<p>Shader class: (named Shader.h)</p>\n\n<pre><code>#ifndef SHADER_H\n#define SHADER_H\n\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include &lt;sstream&gt;\n#include &lt;iostream&gt;\n\n#include &lt;GL/glew.h&gt;\n\nclass Shader\n{\n  public:\n  GLuint Program;\n  // Constructor generates the shader on the fly\n  Shader(const GLchar* vertexPath, const GLchar* fragmentPath)\n  {\n    // 1. Retrieve the vertex/fragment source code from filePath\n    std::string vertexCode;\n    std::string fragmentCode;\n    std::ifstream vShaderFile;\n    std::ifstream fShaderFile;\n    // ensures ifstream objects can throw exceptions:\n      vShaderFile.exceptions(std::ifstream::badbit);\n    fShaderFile.exceptions(std::ifstream::badbit);\n    try\n    {\n      // Open files\n      vShaderFile.open(vertexPath);\n      fShaderFile.open(fragmentPath);\n      std::stringstream vShaderStream, fShaderStream;\n      // Read file's buffer contents into streams\n      vShaderStream &lt;&lt; vShaderFile.rdbuf();\n      fShaderStream &lt;&lt; fShaderFile.rdbuf();\n      // close file handlers\n      vShaderFile.close();\n      fShaderFile.close();\n      // Convert stream into string\n      vertexCode = vShaderStream.str();\n      fragmentCode = fShaderStream.str();\n    }\n      catch (std::ifstream::failure e)\n      {\n      std::cout &lt;&lt; \"ERROR::SHADER::FILE_NOT_SUCCESFULLY_READ\" &lt;&lt; std::endl;\n      }\n      const GLchar* vShaderCode = vertexCode.c_str();\n      const GLchar * fShaderCode = fragmentCode.c_str();\n      // 2. Compile shaders\n      GLuint vertex, fragment;\n      GLint success;\n      GLchar infoLog[512];\n      // Vertex Shader\n      vertex = glCreateShader(GL_VERTEX_SHADER);\n      glShaderSource(vertex, 1, &amp;vShaderCode, NULL);\n      glCompileShader(vertex);\n      // Print compile errors if any\n      glGetShaderiv(vertex, GL_COMPILE_STATUS, &amp;success);\n      if (!success)\n      {\n      glGetShaderInfoLog(vertex, 512, NULL, infoLog);\n      std::cout &lt;&lt; \"ERROR::SHADER::VERTEX::COMPILATION_FAILED\\n\" &lt;&lt; infoLog &lt;&lt; std::endl;\n      }\n      // Fragment Shader\n      fragment = glCreateShader(GL_FRAGMENT_SHADER);\n      glShaderSource(fragment, 1, &amp;fShaderCode, NULL);\n      glCompileShader(fragment);\n      // Print compile errors if any\n      glGetShaderiv(fragment, GL_COMPILE_STATUS, &amp;success);\n      if (!success)\n      {\n      glGetShaderInfoLog(fragment, 512, NULL, infoLog);\n      std::cout &lt;&lt; \"ERROR::SHADER::FRAGMENT::COMPILATION_FAILED\\n\" &lt;&lt; infoLog &lt;&lt; std::endl;\n      }\n      // Shader Program\n      this-&gt;Program = glCreateProgram();\n      glAttachShader(this-&gt;Program, vertex);\n      glAttachShader(this-&gt;Program, fragment);\n      glLinkProgram(this-&gt;Program);\n      // Print linking errors if any\n      glGetProgramiv(this-&gt;Program, GL_LINK_STATUS, &amp;success);\n      if (!success)\n      {\n      glGetProgramInfoLog(this-&gt;Program, 512, NULL, infoLog);\n      std::cout &lt;&lt; \"ERROR::SHADER::PROGRAM::LINKING_FAILED\\n\" &lt;&lt; infoLog &lt;&lt; std::endl;\n      }\n      // Delete the shaders as they're linked into our program now and no longer necessery\n      glDeleteShader(vertex);\n      glDeleteShader(fragment);\n\n  }\n    // Uses the current shader\n    void Use()\n    {\n      glUseProgram(this-&gt;Program);\n    }\n};\n\n#endif\n</code></pre>\n"}, {"tags": ["c++", "node.js", "encryption"], "comments": [{"owner": {"reputation": 4513, "user_id": 1810087, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/T2x51.jpg?s=128&g=1", "display_name": "user1810087", "link": "https://stackoverflow.com/users/1810087/user1810087"}, "edited": false, "score": 0, "creation_date": 1475079587, "post_id": 39752598, "comment_id": 66801646, "body": "what libraries have you tried?"}, {"owner": {"reputation": 710, "user_id": 2165772, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a9abde6d46310cd882aa4bfdfd833f4f?s=128&d=identicon&r=PG", "display_name": "Arne Fischer", "link": "https://stackoverflow.com/users/2165772/arne-fischer"}, "edited": false, "score": 0, "creation_date": 1475079986, "post_id": 39752598, "comment_id": 66801928, "body": "libcrpto should be able to do it. It is for example used in openssl. The decryption method itself depends on the algorithm used. A simple one liner will probably not do. Do you know which algorithm was used in your case?"}, {"owner": {"reputation": 211, "user_id": 1052358, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wQRnr.png?s=128&g=1", "display_name": "Nico", "link": "https://stackoverflow.com/users/1052358/nico"}, "edited": false, "score": 0, "creation_date": 1475102282, "post_id": 39752598, "comment_id": 66813491, "body": "I&#39;ve updated my question with a bit more info."}, {"owner": {"reputation": 322, "user_id": 3330093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0C2vx.jpg?s=128&g=1", "display_name": "KS7X", "link": "https://stackoverflow.com/users/3330093/ks7x"}, "edited": false, "score": 0, "creation_date": 1545415592, "post_id": 39752598, "comment_id": 94624917, "body": "Did you ever figure out the issue Nico? I just posted a similar question except that I am using libgcrypt on c++ and decrypting a text string rather than a file"}], "owner": {"reputation": 211, "user_id": 1052358, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wQRnr.png?s=128&g=1", "display_name": "Nico", "link": "https://stackoverflow.com/users/1052358/nico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 658, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1475102260, "creation_date": 1475078870, "last_edit_date": 1475102260, "question_id": 39752598, "link": "https://stackoverflow.com/questions/39752598/decrypt-a-file-in-c-which-has-been-encrypted-with-node-js-crypto", "title": "Decrypt a file in C++ which has been encrypted with Node.JS Crypto", "body": "<p>I've been looking into a way to decrypt a file in c++ that's been encrypted using Node.js, I've tried a number of libraries and struggling to get the expected output.</p>\n\n<p>Essentially, I'm encrypting the files using something similar to this example provided by <a href=\"http://lollyrock.com/articles/nodejs-encryption/\" rel=\"nofollow\">http://lollyrock.com/articles/nodejs-encryption/</a></p>\n\n<pre><code>// Nodejs encryption of buffers\nvar crypto = require('crypto'),\n    algorithm = 'aes-256-ctr',\n    password = 'supersecretpassword1';\n\nvar fs = require('fs');\n\n// input file\nvar r = fs.createReadStream('file.txt');\n// encrypt content\nvar encrypt = crypto.createCipher(algorithm, password);\n// write file\nvar w = fs.createWriteStream('file.out.txt');\n\n// start pipe\nr.pipe(encrypt).pipe(w);\n</code></pre>\n\n<p>So now it's encrypted, and can easily be decrypted in node using the password:</p>\n\n<pre><code>// decrypt content\nvar decrypt = crypto.createDecipher(algorithm, password)\n</code></pre>\n\n<p>However, the requirement is to decrypt it using C++.</p>\n\n<h2>Edit:</h2>\n\n<p>I've had go previously using <a href=\"https://github.com/ilvn/aes256ctr\" rel=\"nofollow\">https://github.com/ilvn/aes256ctr</a> as it looks extremely lightweight and focuses on AES256-CTR (as used in the example above). However my assumption is it's just encrypting the data again instead of decrypting it:</p>\n\n<pre><code>#define aes256_decrypt_ctr  aes256_encrypt_ctr\n</code></pre>\n\n<p>Either that or potentially an issue with the encoding? As you can probably tell, encryption is fairly new to me.</p>\n"}, {"tags": ["c++", "windows", "visual-c++", "visual-studio-2013", "mfc"], "comments": [{"owner": {"reputation": 1778, "user_id": 2440728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fWyQ.jpg?s=128&g=1", "display_name": "VuVirt", "link": "https://stackoverflow.com/users/2440728/vuvirt"}, "edited": false, "score": 1, "creation_date": 1475080130, "post_id": 39752446, "comment_id": 66802020, "body": "I also think that you need to remove WS_CHILD and provide a valid predefined window class in CreateEx according to the documentation in CWnd::CreateEx:  Use the AfxRegisterWndClass function to register window classes. User defined window classes are available in the module where they are registered.  You also need to set the hwndParent to first modal dialog when you create the second level dialogs. This way the modal dialog will be the &quot;owner&quot; of the dialogs it creates and they should behave the way you need to."}, {"owner": {"reputation": 612, "user_id": 184466, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/urqD5.jpg?s=128&g=1", "display_name": "nagates", "link": "https://stackoverflow.com/users/184466/nagates"}, "reply_to_user": {"reputation": 1778, "user_id": 2440728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fWyQ.jpg?s=128&g=1", "display_name": "VuVirt", "link": "https://stackoverflow.com/users/2440728/vuvirt"}, "edited": false, "score": 0, "creation_date": 1475081287, "post_id": 39752446, "comment_id": 66802748, "body": "Yea, I guess I don&#39;t really understand what these window classes are?"}, {"owner": {"reputation": 1778, "user_id": 2440728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fWyQ.jpg?s=128&g=1", "display_name": "VuVirt", "link": "https://stackoverflow.com/users/2440728/vuvirt"}, "edited": false, "score": 0, "creation_date": 1475081515, "post_id": 39752446, "comment_id": 66802897, "body": "There are predefined windows classes like Static, Edit, etc. In your case you need to register a custom class to use as a second parameter of the CreateEx function. So you need to provide a class name for the CreateEx call for the first dialog and another class name for the CreateEx calls for the second level dialogs. You can achieve this by calling AfxRegisterWndClass(NULL) and use the returned class name in CreateEx."}, {"owner": {"reputation": 1778, "user_id": 2440728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fWyQ.jpg?s=128&g=1", "display_name": "VuVirt", "link": "https://stackoverflow.com/users/2440728/vuvirt"}, "edited": false, "score": 0, "creation_date": 1475081811, "post_id": 39752446, "comment_id": 66803074, "body": "Check The AfxRegisterWndClass Function in: <a href=\"https://msdn.microsoft.com/en-us/library/a77269ff.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/a77269ff.aspx</a>"}, {"owner": {"reputation": 1778, "user_id": 2440728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fWyQ.jpg?s=128&g=1", "display_name": "VuVirt", "link": "https://stackoverflow.com/users/2440728/vuvirt"}, "edited": false, "score": 0, "creation_date": 1475081993, "post_id": 39752446, "comment_id": 66803188, "body": "Also here: <a href=\"http://stackoverflow.com/questions/15807725/how-create-derived-from-cwnd-pop-up-window\" title=\"how create derived from cwnd pop up window\">stackoverflow.com/questions/15807725/&hellip;</a>"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1475084333, "post_id": 39752446, "comment_id": 66804423, "body": "<i>&quot;child dialog&quot;</i> - wrong terminology, and it <b>does</b> matter here. Dialogs are commonly owned, not children (see <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms632599.aspx\" rel=\"nofollow noreferrer\">Window Features</a> for details). Plus, <code>WS_POPUP</code> and <code>WS_CHILD</code> have always been mutually exclusive <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms632600.aspx\" rel=\"nofollow noreferrer\">window styles</a>. Nothing changed there."}, {"owner": {"reputation": 612, "user_id": 184466, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/urqD5.jpg?s=128&g=1", "display_name": "nagates", "link": "https://stackoverflow.com/users/184466/nagates"}, "edited": false, "score": 0, "creation_date": 1475084517, "post_id": 39752446, "comment_id": 66804531, "body": "They may have always been mutually exclusive, but it apparently was not strictly enforced, because I&#39;ve seen the old compiled version work."}, {"owner": {"reputation": 612, "user_id": 184466, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/urqD5.jpg?s=128&g=1", "display_name": "nagates", "link": "https://stackoverflow.com/users/184466/nagates"}, "reply_to_user": {"reputation": 1778, "user_id": 2440728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fWyQ.jpg?s=128&g=1", "display_name": "VuVirt", "link": "https://stackoverflow.com/users/2440728/vuvirt"}, "edited": false, "score": 0, "creation_date": 1475085184, "post_id": 39752446, "comment_id": 66804913, "body": "@VuVirt this gets me really close, some re-draw issues, //auto dwStyle = WS_POPUP | WS_CHILD | WS_BORDER | WS_CAPTION; // original \tauto dwStyle = WS_BORDER | WS_CAPTION | WS_VISIBLE; \tCString sClass = AfxRegisterWndClass(             CS_VREDRAW | CS_HREDRAW,             ::LoadCursor(nullptr, IDC_ARROW),             static_cast&lt;HBRUSH&gt;(::GetStockObject(WHITE_BRUSH)),             ::LoadIcon(nullptr, IDI_APPLICATION));  \tauto result = pWndSrcOrDest-&gt;CreateEx(WS_EX_CONTROLPARENT, sClass, \t\tsWindowTitle, dwStyle, 10, 10, 10, 10, this-&gt;m_hWnd, nullptr, nullptr);"}, {"owner": {"reputation": 1778, "user_id": 2440728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fWyQ.jpg?s=128&g=1", "display_name": "VuVirt", "link": "https://stackoverflow.com/users/2440728/vuvirt"}, "edited": false, "score": 0, "creation_date": 1475085897, "post_id": 39752446, "comment_id": 66805349, "body": "Yes this looks good to me. You can try to add ws_clipsiblings and ws_clipchildren to windows styles to see if the flicker is gone."}, {"owner": {"reputation": 1778, "user_id": 2440728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fWyQ.jpg?s=128&g=1", "display_name": "VuVirt", "link": "https://stackoverflow.com/users/2440728/vuvirt"}, "edited": false, "score": 0, "creation_date": 1475086018, "post_id": 39752446, "comment_id": 66805431, "body": "Oh wait you also need to keep ws_popup style. Only ws_child needs to be removed."}, {"owner": {"reputation": 1778, "user_id": 2440728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fWyQ.jpg?s=128&g=1", "display_name": "VuVirt", "link": "https://stackoverflow.com/users/2440728/vuvirt"}, "edited": false, "score": 0, "creation_date": 1475086120, "post_id": 39752446, "comment_id": 66805494, "body": "Try to remove cs_hredraw and cs_vredraw too. Replace then with 0 or cs_dblclick. This should fix flickering."}, {"owner": {"reputation": 612, "user_id": 184466, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/urqD5.jpg?s=128&g=1", "display_name": "nagates", "link": "https://stackoverflow.com/users/184466/nagates"}, "edited": false, "score": 0, "creation_date": 1475089720, "post_id": 39752446, "comment_id": 66807546, "body": "getting much closer"}, {"owner": {"reputation": 1778, "user_id": 2440728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fWyQ.jpg?s=128&g=1", "display_name": "VuVirt", "link": "https://stackoverflow.com/users/2440728/vuvirt"}, "edited": false, "score": 0, "creation_date": 1475128418, "post_id": 39752446, "comment_id": 66819910, "body": "@nagates - I added an answer to clear the things up and so that you can accept it when you make it work"}, {"owner": {"reputation": 612, "user_id": 184466, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/urqD5.jpg?s=128&g=1", "display_name": "nagates", "link": "https://stackoverflow.com/users/184466/nagates"}, "edited": false, "score": 0, "creation_date": 1475164659, "post_id": 39752446, "comment_id": 66844137, "body": "Thanks for doing that, I was going ask you do that as well, still having some issues with content flickering, probably related to things being down a little different than before, but should be able to figure it out. Will accept answer, when done. Thanks, again!"}], "answers": [{"tags": [], "owner": {"reputation": 1778, "user_id": 2440728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fWyQ.jpg?s=128&g=1", "display_name": "VuVirt", "link": "https://stackoverflow.com/users/2440728/vuvirt"}, "is_accepted": true, "score": 1, "last_activity_date": 1475128460, "creation_date": 1475128460, "answer_id": 39762416, "question_id": 39752446, "link": "https://stackoverflow.com/questions/39752446/mfc-child-dialog-that-behaves-like-a-popup-upgrade-from-vc6-change/39762416#39762416", "title": "MFC Child Dialog that behaves like a popup (upgrade From VC6 change)", "body": "<p>You can do it like this: </p>\n\n<pre><code>LPCTSTR strClassNameDlgOwner = AfxRegisterWndClass(NULL);\n\npWndOwner-&gt;CreateEx(WS_EX_CONTROLPARENT, strClassNameDlgOwner,\n    sWindowTitleOwner, WS_POPUP | WS_BORDER | WS_CAPTION | WS_VISIBLE, 10, 10, 10, 10, this-&gt;m_hWnd, nullptr, nullptr); // this-&gt;m_hWnd is the handle to the Main application window\n\nLPCTSTR strClassNameDlgOwned = AfxRegisterWndClass(NULL);\n\npWndOwned-&gt;CreateEx(WS_EX_CONTROLPARENT, strClassNameDlgOwned,\n    sWindowTitleOwned, WS_POPUP | WS_BORDER | WS_CAPTION | WS_VISIBLE, 10, 10, 10, 10, pWndOwner-&gt;GetSafeHwnd(), nullptr, nullptr);\n</code></pre>\n\n<p>The first dialog is the Owner window, while the second level dialogs that the first one creates are the Owned windows.</p>\n"}], "owner": {"reputation": 612, "user_id": 184466, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/urqD5.jpg?s=128&g=1", "display_name": "nagates", "link": "https://stackoverflow.com/users/184466/nagates"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1268, "favorite_count": 1, "accepted_answer_id": 39762416, "answer_count": 1, "score": 0, "last_activity_date": 1569440806, "creation_date": 1475078441, "last_edit_date": 1569440806, "question_id": 39752446, "link": "https://stackoverflow.com/questions/39752446/mfc-child-dialog-that-behaves-like-a-popup-upgrade-from-vc6-change", "title": "MFC Child Dialog that behaves like a popup (upgrade From VC6 change)", "body": "<p>I have a MFC project I maintain, that recently got upgraded from VC6->2013, and apparently some core Windows code become stricter with regards <code>WS_POPUP</code> and <code>WS_CHILD</code>, can no longer be mixed. I have a program that crates a child dialog to alter some settings (of an image for example), the child dialog would have top level focus, and this child dialog would also spin off 2 new <code>CWnd</code> of it's own a essentially preview and result window, with the following <code>dwStyle</code> flags set <code>WS_POPUP | WS_CAPTION |  WS_CHILD</code> which worked in VC6, but now is a no no. \nThe full window create logic, </p>\n\n<pre><code>m_wndDst = new CWnd;\nm_wndDst-&gt;CreateEx(WS_EX_CONTROLPARENT , NULL,\n                             szTitle, WS_POPUP | WS_CHILD | WS_BORDER | WS_CAPTION, \n                             10, 10, 10, 10, m_hWnd, NULL, NULL);\n</code></pre>\n\n<p>This child dialog will often destroy and re-create these child <code>CWnd</code>s it's perhaps not the best solution, but it's a fairly large legacy project, that I wish to disturbe the least amount as possible.</p>\n\n<p>So I remove the <code>WS_POPUP</code> per another S.O QA, but that isn't quite right either, because now my CWnds are now being renderws within my initial child dialog,clipped and have z-order issues with regards to controls, this is no good, even if it makes sense, If I change the <code>hWndParent</code> param in <code>CrateEx</code> to the top level Parent <code>hWnd</code>, this is closer to what I want, but my initial child dialog still has focus, and the contents of my 2 sub windows does not get rendered (essentially transparent), the title is there, the border is there, but no content, and the <code>CWnd</code>s can not be selected and freely moving around. </p>\n\n<p>I've tried removing the <code>WS_CHILD</code> style, and leaving the <code>WS_POPUP</code>, but that is no good either, as in wincore.cpp the <code>PreCreateWindow</code> does a check to ensure that it is a child window, </p>\n\n<pre><code>    if (cs.lpszClass == NULL)\n    {\n        // make sure the default window class is registered\n        VERIFY(AfxDeferRegisterClass(AFX_WND_REG));\n\n        // no WNDCLASS provided - use child window default\n        ASSERT(cs.style &amp; WS_CHILD);\n        cs.lpszClass = _afxWnd;\n    }\n</code></pre>\n\n<p>So in essence what I am trying to achieve is, I need my initial child dialog to be able to spin up to <code>CWnd</code>s that act more like popup windows, titlebar, and a border, and really nothing else. They has need to be at the same focus level as the child dialog that created them (the main frame is untouchable until the child dialog is closed), if the child dialog closes, it would close the 2 <code>CWnd</code>s as well,  and like before should be able to move out side of the main frame.</p>\n\n<p>Any help, articles, suggestions would be greatly appreciated. </p>\n\n<p><strong>EDIT 1</strong> <em>based on comments ---</em>\nthis gets me close really close, just have re-draw issues. </p>\n\n<pre><code>//auto dwStyle = WS_POPUP | WS_CHILD | WS_BORDER | WS_CAPTION; // original\n    auto dwStyle = WS_BORDER | WS_CAPTION | WS_VISIBLE;\n    //auto dwStyle = WS_CHILD | WS_BORDER | WS_CAPTION | WS_VISIBLE;\n\n    CString sClass = AfxRegisterWndClass(\n            CS_VREDRAW | CS_HREDRAW,\n            ::LoadCursor(nullptr, IDC_ARROW),\n            static_cast&lt;HBRUSH&gt;(::GetStockObject(WHITE_BRUSH)),\n            ::LoadIcon(nullptr, IDI_APPLICATION));\n\n    auto result = pWndSrcOrDest-&gt;CreateEx(WS_EX_CONTROLPARENT, sClass,\n        sWindowTitle, dwStyle, 10, 10, 10, 10, this-&gt;m_hWnd, nullptr, nullptr);\n</code></pre>\n"}, {"tags": ["c++", "templates", "metaprogramming", "template-meta-programming"], "answers": [{"comments": [{"owner": {"reputation": 2251, "user_id": 6872237, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7e22a086877a28b729523119d40f5e9c?s=128&d=identicon&r=PG&f=1", "display_name": "hamster on wheels", "link": "https://stackoverflow.com/users/6872237/hamster-on-wheels"}, "edited": false, "score": 0, "creation_date": 1475078801, "post_id": 39752467, "comment_id": 66801130, "body": "how to call that loop? I mean what should the main function look like?"}, {"owner": {"reputation": 2251, "user_id": 6872237, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7e22a086877a28b729523119d40f5e9c?s=128&d=identicon&r=PG&f=1", "display_name": "hamster on wheels", "link": "https://stackoverflow.com/users/6872237/hamster-on-wheels"}, "edited": false, "score": 0, "creation_date": 1475079222, "post_id": 39752467, "comment_id": 66801411, "body": "I get error if I use <code>int main(void){     int i = 10;      loop(i, std::integral_constant&lt;int, 3&gt;{} ); }</code> and compile with g++ -std=c++14. Error is template instantiation depth exceed 900."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 6, "last_activity_date": 1475083707, "last_edit_date": 1475083707, "creation_date": 1475078538, "answer_id": 39752467, "question_id": 39752396, "link": "https://stackoverflow.com/questions/39752396/template-with-one-explicit-argument/39752467#39752467", "title": "template with one explicit argument", "body": "<p>You cannot partially specialize function templates. Full stop.</p>\n\n<p>In C++17, you will be able to write:</p>\n\n<pre><code>template &lt;typename T, int Depth&gt;\ninline void loop(T i){\n    std::cout &lt;&lt; i;\n    if constexpr (Depth &gt; 0) {\n        loop&lt;T, Depth-1&gt;(i - 1);\n    }\n}\n</code></pre>\n\n<p>until then, I would propose just taking the depth as an <code>integral_constant</code> argument:</p>\n\n<pre><code>template &lt;typename T&gt;\ninline void loop(T i, std::integral_constant&lt;int, 0&gt; ) {\n    std::cout &lt;&lt; i &lt;&lt; std::endl;\n}\n\ntemplate &lt;typename T, int Depth&gt;\ninline void loop(T i, std::integral_constant&lt;int, Depth&gt; ){\n    std::cout &lt;&lt; i;\n    loop(i - 1, std::integral_constant&lt;int, Depth-1&gt;{} );\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 2251, "user_id": 6872237, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7e22a086877a28b729523119d40f5e9c?s=128&d=identicon&r=PG&f=1", "display_name": "hamster on wheels", "link": "https://stackoverflow.com/users/6872237/hamster-on-wheels"}, "edited": false, "score": 0, "creation_date": 1475079797, "post_id": 39752602, "comment_id": 66801804, "body": "@rxu, Yes, it does. I tested it before I posted the answer."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 4, "last_activity_date": 1475085038, "last_edit_date": 1475085038, "creation_date": 1475078880, "answer_id": 39752602, "question_id": 39752396, "link": "https://stackoverflow.com/questions/39752396/template-with-one-explicit-argument/39752602#39752602", "title": "template with one explicit argument", "body": "<p>You can use a helper class and its specialization to do the real work.</p>\n\n<pre><code>template &lt;typename T, int Depth&gt; struct LoopHelper\n{\n   static void doit(T i)\n   {\n      std::cout &lt;&lt; i;\n      LoopHelper&lt;T, Depth-1&gt;::doit(i);\n   }\n};\n\ntemplate &lt;typename T&gt; struct LoopHelper&lt;T,0&gt;\n{\n   static void doit(T i)\n   {\n      std::cout &lt;&lt; i;\n   }\n};\n\n\ntemplate &lt;typename T, int Depth&gt;\ninline void loop(T i){\n   LoopHelper&lt;T, Depth&gt;::doit(i);\n}\n</code></pre>\n\n<p><strong>Additional refinement</strong></p>\n\n<p>I would recommend changing <code>loop</code> to allow deduction of <code>T</code>.</p>\n\n<pre><code>template &lt;int Depth, typename T&gt;\ninline void loop(T i){\n   LoopHelper&lt;T, Depth&gt;::doit(i);\n}\n</code></pre>\n\n<p>Then, you can use:</p>\n\n<pre><code>int i = 10;\nloop&lt;3&gt;(i);\n</code></pre>\n\n<p>and let <code>T</code> be deduced as <code>int</code>.</p>\n"}], "owner": {"reputation": 2251, "user_id": 6872237, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7e22a086877a28b729523119d40f5e9c?s=128&d=identicon&r=PG&f=1", "display_name": "hamster on wheels", "link": "https://stackoverflow.com/users/6872237/hamster-on-wheels"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 506, "favorite_count": 0, "accepted_answer_id": 39752467, "answer_count": 2, "score": 0, "last_activity_date": 1475085038, "creation_date": 1475078283, "question_id": 39752396, "link": "https://stackoverflow.com/questions/39752396/template-with-one-explicit-argument", "title": "template with one explicit argument", "body": "<p>I try to add another template argument to the factorial example of meta programming. But the following doesn't work. What is the correct way?</p>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate &lt;typename T, int Depth&gt;\ninline void loop(T i){\n    std::cout &lt;&lt; i;\n    loop&lt;T, Depth-1&gt;(i - 1);\n}\ntemplate &lt;typename T, int Depth&gt;\ninline void loop&lt;T, 0&gt;(T i){\n    std::cout &lt;&lt; i &lt;&lt; std::endl;\n}\n\nint main(void){\n    int i = 10;\n    loop&lt;int, 3&gt;(i);\n}\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>test4.cpp(9): error: an explicit template argument list is not allowed on this declaration\n  inline void loop&lt;T, 0&gt;(T i){\n</code></pre>\n"}, {"tags": ["c++", "qt", "memory-leaks"], "comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 1, "creation_date": 1475078127, "post_id": 39752301, "comment_id": 66800672, "body": "First confirm that you still see the issue in Qt 5.7.0, then file a bug report."}, {"owner": {"reputation": 731, "user_id": 4622991, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-CBpV4ya269s/AAAAAAAAAAI/AAAAAAAAAEU/aRxQA4ru_J4/photo.jpg?sz=128", "display_name": "Juan Gonzalez Burgos", "link": "https://stackoverflow.com/users/4622991/juan-gonzalez-burgos"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1475078422, "post_id": 39752301, "comment_id": 66800882, "body": "Good idea. Just tested, same case in Qt 5.7. And just found a Qt bug report describing what appears to be the same situation that was closed because &quot;Cannot Reproduce&quot;. Any ideas what to do then? <a href=\"https://bugreports.qt.io/browse/QTBUG-47804\" rel=\"nofollow noreferrer\">bugreports.qt.io/browse/QTBUG-47804</a>"}, {"owner": {"reputation": 731, "user_id": 4622991, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-CBpV4ya269s/AAAAAAAAAAI/AAAAAAAAAEU/aRxQA4ru_J4/photo.jpg?sz=128", "display_name": "Juan Gonzalez Burgos", "link": "https://stackoverflow.com/users/4622991/juan-gonzalez-burgos"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1475082086, "post_id": 39752301, "comment_id": 66803236, "body": "Just filed a new bug report, lets see if they can reproduce. Will come back here if it gets resolved. <a href=\"https://bugreports.qt.io/browse/QTBUG-56245\" rel=\"nofollow noreferrer\">bugreports.qt.io/browse/QTBUG-56245</a>"}], "owner": {"reputation": 731, "user_id": 4622991, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-CBpV4ya269s/AAAAAAAAAAI/AAAAAAAAAEU/aRxQA4ru_J4/photo.jpg?sz=128", "display_name": "Juan Gonzalez Burgos", "link": "https://stackoverflow.com/users/4622991/juan-gonzalez-burgos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 397, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1475078025, "creation_date": 1475078025, "question_id": 39752301, "link": "https://stackoverflow.com/questions/39752301/how-to-fix-memory-leak-in-qt-5-6-qwebengine-markdowneditor-example", "title": "How to Fix memory leak in Qt 5.6 QWebEngine (markdowneditor example)", "body": "<p>I was testing some of Qt's webenginewidgets examples and tried to compile and run the <strong>Qt5.6.1/Examples/Qt5.6/webenginewidgets/markdowneditor</strong> example.</p>\n\n<p>Without changing anything I went on a executed a good:</p>\n\n<pre><code>qmake -tp vc\n</code></pre>\n\n<p>Opened the generated project with Visual Studio 2013 and compiled then ran. The example works fine, but when I look at the RAM memory usage I see that every time I resize the window, the memory increases like crazy. See picture:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ziMwy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ziMwy.png\" alt=\"enter image description here\"></a></p>\n\n<p>So what am I doing wrong? My setup is:</p>\n\n<ul>\n<li>Windows 10, 64 bit</li>\n<li>Visual Studio 2013</li>\n<li>Qt 5.6.1</li>\n</ul>\n\n<p>Thanks in advance for the help.</p>\n"}, {"tags": ["c++", "boost", "graph", "subgraph"], "owner": {"reputation": 31, "user_id": 6886361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4bc63fbe4aa1afa0a58465f86846444?s=128&d=identicon&r=PG&f=1", "display_name": "A.Kris", "link": "https://stackoverflow.com/users/6886361/a-kris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 142, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1475077977, "creation_date": 1475077977, "question_id": 39752283, "link": "https://stackoverflow.com/questions/39752283/mcgregor-common-subgraphs-boost", "title": "mcgregor common subgraphs boost", "body": "<p>I need to use mcgregor_common_subgraphs but don't really understand how to use it in this concrete example, it is not the hole src code, if anyone has \nany ideas, I will edit the rest, just let me know!</p>\n\n<pre><code>#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\n#include &lt;boost/lexical_cast.hpp&gt;\n#include &lt;boost/graph/filtered_graph.hpp&gt;\n#include &lt;boost/graph/iteration_macros.hpp&gt;\n#include &lt;boost/property_map/shared_array_property_map.hpp&gt;\n\n#include &lt;boost/config.hpp&gt;\n#include &lt;boost/graph/mcgregor_common_subgraphs.hpp&gt;\n#include &lt;boost/graph/adjacency_list.hpp&gt;\n#include &lt;boost/graph/graph_utility.hpp&gt;\n#include &lt;boost/graph/lookup_edge.hpp&gt;\n#include &lt;boost/graph/subgraph.hpp&gt;\n#include &lt;vector&gt;\n\nusing namespace boost;\n\ntypedef subgraph&lt;adjacency_list&lt;vecS, vecS, undirectedS,  \nproperty&lt;vertex_color_t, int&gt;,    property&lt;edge_name_t, int,\nproperty&lt;edge_index_t, int&gt;&gt;, property&lt;vertex_name_t, int,  \nproperty&lt;vertex_index_t,  int&gt;&gt;  &gt;&gt; Graph;\n\nint main(int argc, char *argv[]) {\n\nconst int N = 6;\nenum { A, B, C, D, E, F }; // for conveniently refering to vertices in G0\n\nGraph G0(N);\nGraph&amp; G1 = G0.create_subgraph();\nGraph&amp; G2 = G0.create_subgraph();\nGraph&amp; G3 = G0.create_subgraph();\nGraph&amp; G4 = G0.create_subgraph();\nGraph&amp; G5 = G0.create_subgraph();\nGraph&amp; G6 = G0.create_subgraph();\nGraph&amp; G7 = G0.create_subgraph();\n\nenum { A1, B1, C1 }; // for conveniently refering to vertices in G1\nenum { A2, B2 };     // for conveniently refering to vertices in G2\nenum { A3, B3 };\nenum { A4, B4, C4 };\nenum { A5, B5 };\nenum { A6, B6, C6 };\nenum { A7, B7 };\n\nadd_vertex(C, G1); // global vertex C becomes local A1 for G1\nadd_vertex(E, G1); // global vertex E becomes local B1 for G1\nadd_vertex(F, G1); // global vertex F becomes local C1 for G1\n\nadd_vertex(A, G2); // global vertex A becomes local A1 for G2\nadd_vertex(B, G2); // global vertex B becomes local B1 for G2\n\nadd_vertex(B, G3); // ...-||-...\nadd_vertex(C, G3);\n\nadd_vertex(A, G4);\nadd_vertex(B, G4);\nadd_vertex(E, G4);\n\nadd_vertex(F, G5);\nadd_vertex(D, G5);\n\nadd_vertex(B, G6);\nadd_vertex(D, G6);\nadd_vertex(E, G6);\n\nadd_vertex(F, G7);\nadd_vertex(B, G7);\nadd_vertex(D, G7);\n\nadd_edge(A, B, G0);\nadd_edge(B, C, G0);\nadd_edge(B, D, G0);\nadd_edge(E, B, G0);\nadd_edge(E, F, G0);\nadd_edge(F, D, G0);\n</code></pre>\n"}, {"tags": ["c++", "algorithm", "data-structures", "big-o"], "comments": [{"owner": {"reputation": 5521, "user_id": 479230, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fK2jw.jpg?s=128&g=1", "display_name": "Jimmy", "link": "https://stackoverflow.com/users/479230/jimmy"}, "edited": false, "score": 4, "creation_date": 1475077658, "post_id": 39752084, "comment_id": 66800386, "body": "Your first algorithm is O(n^4) - there are 4 nested loops between 0 and n, therefore the number of steps is proportional to n^4. The second example is O(n) and third example is O(n^2) - you have two nested loops from 0 to n"}], "answers": [{"tags": [], "owner": {"reputation": 7763, "user_id": 5924721, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LWjjj.png?s=128&g=1", "display_name": "Frank Puffer", "link": "https://stackoverflow.com/users/5924721/frank-puffer"}, "is_accepted": false, "score": 0, "last_activity_date": 1475085449, "last_edit_date": 1475085449, "creation_date": 1475078377, "answer_id": 39752426, "question_id": 39752084, "link": "https://stackoverflow.com/questions/39752084/calculating-algorithm-complexity-by-counting-steps/39752426#39752426", "title": "Calculating algorithm complexity by counting steps", "body": "<p>In these simple cases you can determine time complexity by finding the instruction that is executed most often and then find out how this number depends on <code>n</code>.</p>\n\n<p>In example 1, <code>count++</code> is executed n^4 times => O(n^4)</p>\n\n<p>In example 2, <code>sum += i;</code> is executed n times => O(n)</p>\n\n<p>In examples 3, <code>sum ++;</code> is executed n^2 times => O(n^2)</p>\n\n<p>Well, actually that is not correct because some of your loops are executed n+1 times, but that doesn't matter at all. In example 1, the instruction is actually executed (n+1)^2*n^2 times which is the same as n^4 + 2 n^3 + n^2. For time complexity only the largest power counts.</p>\n"}, {"tags": [], "owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "is_accepted": false, "score": 0, "last_activity_date": 1475078969, "last_edit_date": 1475078969, "creation_date": 1475078657, "answer_id": 39752513, "question_id": 39752084, "link": "https://stackoverflow.com/questions/39752084/calculating-algorithm-complexity-by-counting-steps/39752513#39752513", "title": "Calculating algorithm complexity by counting steps", "body": "<p>To keep it simple: </p>\n\n<p>O(N) means <strong>less than or equal</strong> to N. Therefore, and within a one code snippet, we ignore all and focus on the code that takes the highest number of steps (Highest power) to solve the problem / finish the execution.</p>\n\n<p>Following your examples:</p>\n\n<pre><code>int function (int n){\n   int count = 0;                              // ignore\n\n   for (int i = 0; i &lt;= n; i++)                // This looks interesting\n      for (int j = 0; j &lt; n; j++)              // This looks interesting\n         for (int k = 0; k &lt; n; k++)           // This looks interesting\n            for (int m = 0; m &lt;= n; m++)       // This looks interesting\n               count++;                        // This is what we are looking for. \n\n  return count;                                // ignore\n}\n</code></pre>\n\n<p>For that statement to finish we will need to \"wait\" or \"cover\" or \"step\" (n + 1) * n * n * (n + 1) => O(~N^4).</p>\n\n<p>Second example:</p>\n\n<pre><code>int func1 (int n){\n       int sum = 0;                                // ignore\n\n       for (int i = 0; i &lt;= n; i++)                // This looks interesting\n          sum += i;                                // This is what we are looking for. \n\n       return sum;                                 // ignore\n} \n</code></pre>\n\n<p>For that to finish it needs n + 1 steps => O(~n).</p>\n\n<p>Third example:</p>\n\n<pre><code>int func2 (int n){\n           int sum = 0;                                // ignore\n\n           for (int i = 0; i &lt;= n; i++)                // This looks interesting\n              for (int j = 0; j &lt;= n; j++)             // This looks interesting\n                  sum ++;                              // This is what we are looking for. \n\n           for (int k = 0; k &lt;= n; k++)                // ignore\n               sum--;                                  // ignore\n\n           return sum;                                 // ignore\n    }      \n</code></pre>\n\n<p>For that to finish we will need (n + 1) * (n + 1) steps => O(~N^2)</p>\n"}, {"comments": [{"owner": {"reputation": 27, "user_id": 6894717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a98f3a7a090b1f8b0d90353658326085?s=128&d=identicon&r=PG&f=1", "display_name": "bdover", "link": "https://stackoverflow.com/users/6894717/bdover"}, "edited": false, "score": 0, "creation_date": 1475260204, "post_id": 39752936, "comment_id": 66888580, "body": "The choices are a) theta(n^2), b) theta ((nlog2n)^2), c) theta(n(log2n)^3), d) theta (n^3log2n), and e) theta(n^4). I know that option e is wrong. Would it be (d) since it is seems like it would be the closest bounds to O(n^4)?"}], "tags": [], "owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "is_accepted": false, "score": 2, "last_activity_date": 1475080002, "creation_date": 1475080002, "answer_id": 39752936, "question_id": 39752084, "link": "https://stackoverflow.com/questions/39752084/calculating-algorithm-complexity-by-counting-steps/39752936#39752936", "title": "Calculating algorithm complexity by counting steps", "body": "<p>What you've just proposed here are quite simple examples.\nIn my opinion you just need to understand how the complexity in a cycle works, in order to understand your examples.</p>\n\n<p><em>In short</em> (<em>very briefly</em>) a cycle has to be considered in <a href=\"https://en.wikipedia.org/wiki/Time_complexity\" rel=\"nofollow\">asymptotic complexity</a> as following:</p>\n\n<pre><code>loop (condition) :\n  // loop body\nend loop\n</code></pre>\n\n<ul>\n<li>The <code>condition</code> of the loop should tell you how many times the loop will be executed <em>compared to the <strong>size of the input</em></strong>.</li>\n<li>The complexity of the body (you can consider the body as an sub-function and compute the complexity as well) has to be multiplied by the complexity of the loop.</li>\n</ul>\n\n<p>The reason is quite intuitive: what you have in the body will be executed repetitively until the condition is verified, that is the number of times the loop (and so the body) will be executed.</p>\n\n<hr>\n\n<p>Just some example:</p>\n\n<pre><code>// Array linear assignment\nstd::vector&lt;int&gt; array(SIZE_ARRAY);\n\nfor (int i = 0; i &lt; SIZE_ARRAY; ++i) {\n  array[i] = i;\n}\n</code></pre>\n\n<p>Let's analyse that simple loop:</p>\n\n<ul>\n<li><p>First of all, we need to select the input <em>relative</em> to our complexity function will be computed. That case is pretty trivial: the variable is the size of the array. That's because we want to know how our program act respect the growing of the size of the input array.</p></li>\n<li><p>The loop will be repeat <code>SIZE_ARRAY</code> times. So number of times the body will be executed is <code>SIZE_ARRAY</code> times (note: that values is variable, is not constant value).</p></li>\n<li><p>Now consider the loop body. The instruction <code>array[i] = i</code> does not depend on how big is the array. It takes an unknown number of CPU cycles, but that number is always the same, that is <em>constant</em>.</p></li>\n</ul>\n\n<p>Summarizing, we repeat <code>SIZE_ARRAY</code> times an instruction which takes a constant number of CPU clocks (let's say <code>k</code> is that value, is constant).</p>\n\n<p>So, mathematically the number of CPU clocks will be executed for that simple program will be <code>SIZE_ARRAY * k</code>.</p>\n\n<p>With the <a href=\"https://en.wikipedia.org/wiki/Big_O_notation\" rel=\"nofollow\">O Big notation</a> we can describe the limiting behaviour. That is the behaviour a function will assume when the independent variable goes to infinity.</p>\n\n<p>We can write:</p>\n\n<pre><code>O(SIZE_ARRAY * k) = O(SIZE_ARRAY)\n</code></pre>\n\n<p>That's because <code>k</code> is a constant value and by definition of <em>Big O Notation</em> the constant does not grown at infinity (is constant ever).</p>\n\n<p>If we call <code>SIZE_ARRAY</code> as <code>N</code> (the size of the input) we can say that our function is a <code>O(N)</code> in time complexity.</p>\n\n<hr>\n\n<p>The last (\"more complicate\") example:</p>\n\n<pre><code>for (int i = 0; i &lt; SIZE_ARRAY; ++i) {\n  for (int j = 0; j &lt; SIZE_ARRAY; ++j) {\n    array[j] += j; \n  }\n}\n</code></pre>\n\n<p>As before our problem size is compared to the <code>SIZE_ARRAY</code>.</p>\n\n<p>Shortly:</p>\n\n<ul>\n<li>The first cycle will be execute <code>SIZE_ARRAY</code> times, that is <code>O(SIZE_ARRAY)</code>.</li>\n<li>The second cycle will be execute <code>SIZE_ARRAY</code> times.</li>\n<li>The body of the second cycle is an instruction which will take a constant number of CPU cycle, let's say that number is <code>k</code>.</li>\n</ul>\n\n<p>We take the number of time the first loop will be executed and we multiply it by its body complexity.</p>\n\n<pre><code>O(SIZE_ARRAY) * [first_loop_body_complexity].\n</code></pre>\n\n<p>But the body of the first loop is:</p>\n\n<pre><code>for (int j = 0; j &lt; SIZE_ARRAY; ++j) {\n    array[j] += j; \n}\n</code></pre>\n\n<p>Which is a single loop as the previous example, and we've just computed is complexity. It is an <code>O(SIZE_ARRAY)</code>. So we can see that:</p>\n\n<pre><code>[first_loop_body_complexity] = O(SIZE_ARRAY)\n</code></pre>\n\n<p>Finally, our entire complexity is:</p>\n\n<pre><code>O(SIZE_ARRAY) * O(SIZE_ARRAY) = O(SIZE_ARRAY * SIZE_ARRAY)\n</code></pre>\n\n<p>That is</p>\n\n<pre><code>O(SIZE_ARRAY^2)\n</code></pre>\n\n<p>Using <code>N</code> instead of <code>SIZE_ARRAY</code>.</p>\n\n<pre><code>O(N^2)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "is_accepted": false, "score": 1, "last_activity_date": 1475081126, "creation_date": 1475081126, "answer_id": 39753288, "question_id": 39752084, "link": "https://stackoverflow.com/questions/39752084/calculating-algorithm-complexity-by-counting-steps/39753288#39753288", "title": "Calculating algorithm complexity by counting steps", "body": "<p>Disclaimer: this is not a mathematical explication. It's a dumb down version which I think can help someone who is introduced to the world of complexities and is as clueless as I was when I first met this concept. Also I don't give you the answers. Just try to help you get there.</p>\n\n<hr>\n\n<p>Moral of the story: don't count steps. Complexity is not about how many  instructions (I will use this instead of \"steps\") are executed. That in itself is (almost) completely irelevant. In layman terms (time) complexity is about how does the execution time grow depending on how the input grows - that's how I finally understood complexity.</p>\n\n<p>Let's take it step by step with some of the most encountered complexity:</p>\n\n<h3>constant complexity: O(1)</h3>\n\n<p>this represents an algorithm whose execution time does not depend on the input. The execution time doesn't grow when the input grows.</p>\n\n<p>For instance:</p>\n\n<pre><code>auto foo_o1(int n) {\n   instr 1;\n   instr 2;\n   instr 3;\n   if (n &gt; 20) {\n      instr 4;\n      instr 5;\n      instr 6;\n   }\n   instr 7;\n   instr 8;\n};\n</code></pre>\n\n<p>The execution time of this function doesn't depend on the value of <code>n</code>. Notice how I can say that even if some instructions get executed or not depending on the value of <code>n</code>. Mathematically this is because <code>O(constant) == O(1)</code>. Intuitively it's because the growth of the number of instructions it's not proportional with <code>n</code>. In the same ideea, it's irrelevant if the function has 10 instr or 1k instructions. It's still <code>O(1)</code> - constant complexity.</p>\n\n<h3>Linear complexity: O(n)</h3>\n\n<p>this represents an algorithm whose execution time is proportional with the input. When given a small input it takes a certain amount. When increasing the input the execution time grows proportionally:</p>\n\n<pre><code>auto foo1_on(int n)\n{\n   for (i = 0; i &lt; n; ++i)\n      instr;\n}\n</code></pre>\n\n<p>This function is <code>O(n)</code>. This means that when the input doubles, the execution time grows by a factor. This is true for any input. E.g when you double the input from 10 to 20 and when you double the input from 1000 to 2000 there is more or less the same factor in the growth of the execution time of the algorithm.</p>\n\n<p>In line with the ideea of ignoring what doesn't contribute much <strong>comparatively</strong> with the \"fastest\" growth, all the next functions still have O(n) complexity. Mathematically <code>O</code> complexities are upper-bounded. This leads to <code>O(c1*n + c0) = O(n)</code></p>\n\n<pre><code>auto foo2_on(int n)\n{\n   for (i = 0; i &lt; n / 2; ++i)\n      instr;\n}\n</code></pre>\n\n<p>here: <code>O(n / 2) = O(n)</code></p>\n\n<pre><code>auto foo3_on(int n)\n{\n   for (i = 0; i &lt; n; ++i)\n     instr 1;\n   for (i = 0; i &lt; n; ++i)\n     instr 2;\n}\n</code></pre>\n\n<p>here <code>O(n) + O(n) = O(2*n) = O(n)</code></p>\n\n<h3>polynomial order 2 complexity: O(n^2)</h3>\n\n<p>This tells you that as you grow the input, the execution time grows by factor bigger and bigger. For instance the next is a valid behavior of an <code>O(n^2)</code> algorithm:</p>\n\n<p>Read: When you double the input from .. to .. you could get an increase of execution time of .. times</p>\n\n<ul>\n<li>from 100 to 200 : 1.5 times</li>\n<li>from 200 to 400 : 1.8 times</li>\n<li>from 400 to 800 : 2.2 times</li>\n<li>from 800 to 1600 : 6 times</li>\n<li>from 1600 to 3200 : 500 times</li>\n</ul>\n\n<p><strong>Try this!</strong>. Write an <code>O(n^2)</code> algorithm. And double the input. At first you will see small increases of computation time. At one time it just <em>blows</em> and you have to wait few minutes when at the previous steps it just took mere seconds.</p>\n\n<p>This can be easily understand once you look over a <code>n^2</code> graph.</p>\n\n<pre><code>auto foo_on2(int n)\n{\n   for (i = 0; i &lt; n; ++i)\n      for (j = 0; j &lt; n; ++j)\n         instr;\n}\n</code></pre>\n\n<p>How is this function <code>O(n)</code>? Simple: first loop executes <code>n</code> times. (I don't care if it's <code>n times plus 3</code> or <code>4*n</code>. Then, for each step of the first loop the second loop executes <code>n</code> times. There are <code>n</code> iterations of the i loop. For each i iteration there are <code>n</code> j iterations. So in total we have <code>n * n = n^2</code> j iterations. Thus <code>O(n^2)</code></p>\n\n<p>There are other interesting complexities like logarithmic, exponential etc etc. Once you understand the concept behind the math, it gets very interesting. For instance a logarithmic complexity <code>O(log(n))</code> has an execution time that grows <em>slower</em> and <em>slower</em> as the input grows. You can clearly see that when you look over a log graph.</p>\n\n<p>There are a lot of resources on the net about complexities. Search. Read. Don't understand! Search again. Read. Take paper and pen. Understand!. Repeat.</p>\n"}], "owner": {"reputation": 27, "user_id": 6894717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a98f3a7a090b1f8b0d90353658326085?s=128&d=identicon&r=PG&f=1", "display_name": "bdover", "link": "https://stackoverflow.com/users/6894717/bdover"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2164, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1475085449, "creation_date": 1475077354, "question_id": 39752084, "link": "https://stackoverflow.com/questions/39752084/calculating-algorithm-complexity-by-counting-steps", "title": "Calculating algorithm complexity by counting steps", "body": "<p>Trying to calculate the big o of the function by counting the steps. I think those are how to count each step by following how they did it in the examples, but not sure how to calculate the total. </p>\n\n<pre><code>int function (int n){\n   int count = 0;                              // 1 step\n   for (int i = 0; i &lt;= n; i++)                // 1 + 1 + n * (2 steps)\n      for (int j = 0; j &lt; n; j++)              // 1 + 1 + n * (2 steps)\n         for (int k = 0; k &lt; n; k++)           // 1 + 1 + n * (2 steps)\n            for (int m = 0; m &lt;= n; m++)       // 1 + 1 + n * (2 steps)\n               count++;                        // 1 step\n  return count;                                // 1 step\n}\n</code></pre>\n\n<p>I want to say this function is O(n^2), but I dont understand how that was calculated. </p>\n\n<p>Examples I've been looking at </p>\n\n<pre><code>int func1 (int n){\n       int sum = 0;                                // 1 step\n       for (int i = 0; i &lt;= n; i++)                // 1 + 1 + n * (2 steps)\n          sum += i;                                // 1 step\n       return sum;                                 // 1 step\n}                                                  //total steps: 4 + 3n\n</code></pre>\n\n<p>and </p>\n\n<pre><code>int func2 (int n){\n           int sum = 0;                                // 1 step\n           for (int i = 0; i &lt;= n; i++)                // 1 + 1 + n * (2 steps)\n              for (int j = 0; j &lt;= n; j++)             // 1 + 1 + n * (2 steps)\n                  sum ++;                              // 1 step\n           for (int k = 0; k &lt;= n; k++)                // 1 + 1 + n * (2 steps)\n               sum--;                                  // 1 step\n           return sum;                                 // 1 step\n    }      \n                                                       //total steps: 3n^2 + 7n + 6\n</code></pre>\n"}, {"tags": ["c++", "linker"], "comments": [{"owner": {"reputation": 65820, "user_id": 1741542, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/QdVqh.jpg?s=128&g=1", "display_name": "Olaf Dietsche", "link": "https://stackoverflow.com/users/1741542/olaf-dietsche"}, "edited": false, "score": 0, "creation_date": 1475077524, "post_id": 39752068, "comment_id": 66800289, "body": "Does g++ call the clang linker?"}, {"owner": {"reputation": 669, "user_id": 1219501, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/c098688b61bf3d3f2d65d903521b0b1d?s=128&d=identicon&r=PG", "display_name": "sger", "link": "https://stackoverflow.com/users/1219501/sger"}, "reply_to_user": {"reputation": 65820, "user_id": 1741542, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/QdVqh.jpg?s=128&g=1", "display_name": "Olaf Dietsche", "link": "https://stackoverflow.com/users/1741542/olaf-dietsche"}, "edited": false, "score": 0, "creation_date": 1475077581, "post_id": 39752068, "comment_id": 66800338, "body": "yes the above is working but i think best way is to create make file"}, {"owner": {"reputation": 65820, "user_id": 1741542, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/QdVqh.jpg?s=128&g=1", "display_name": "Olaf Dietsche", "link": "https://stackoverflow.com/users/1741542/olaf-dietsche"}, "edited": false, "score": 0, "creation_date": 1475077633, "post_id": 39752068, "comment_id": 66800368, "body": "Since you already know, that a Makefile is the way to go, what is your problem?"}, {"owner": {"reputation": 669, "user_id": 1219501, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/c098688b61bf3d3f2d65d903521b0b1d?s=128&d=identicon&r=PG", "display_name": "sger", "link": "https://stackoverflow.com/users/1219501/sger"}, "reply_to_user": {"reputation": 65820, "user_id": 1741542, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/QdVqh.jpg?s=128&g=1", "display_name": "Olaf Dietsche", "link": "https://stackoverflow.com/users/1741542/olaf-dietsche"}, "edited": false, "score": 0, "creation_date": 1475077682, "post_id": 39752068, "comment_id": 66800404, "body": "just asking for a better solution"}, {"owner": {"reputation": 65820, "user_id": 1741542, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/QdVqh.jpg?s=128&g=1", "display_name": "Olaf Dietsche", "link": "https://stackoverflow.com/users/1741542/olaf-dietsche"}, "edited": false, "score": 0, "creation_date": 1475077876, "post_id": 39752068, "comment_id": 66800523, "body": "Write a Makefile or a small shell script, if this is just an experiment."}], "answers": [{"tags": [], "owner": {"reputation": 456, "user_id": 6869585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80b0116b48f2bb809e13c662216b58e4?s=128&d=identicon&r=PG&f=1", "display_name": "pavnik", "link": "https://stackoverflow.com/users/6869585/pavnik"}, "is_accepted": false, "score": 1, "last_activity_date": 1475078152, "creation_date": 1475078152, "answer_id": 39752355, "question_id": 39752068, "link": "https://stackoverflow.com/questions/39752068/multiple-linking-c-files/39752355#39752355", "title": "Multiple linking c++ files", "body": "<blockquote>\n  <p>any ideas how to compile multiple c++ files without passing everything in command line.</p>\n</blockquote>\n\n<p>To build an application you need all object files, so you have to pass all cpp files to compiler.</p>\n\n<p>But for simple cases when all cpp-files stay at single folder, you can\nuse command (simple, but slow method): </p>\n\n<pre><code>g++ *.cpp -o main\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 71, "user_id": 5738482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb694cd6613a583fb7b69a76ca87b55b?s=128&d=identicon&r=PG&f=1", "display_name": "hoelzlw", "link": "https://stackoverflow.com/users/5738482/hoelzlw"}, "edited": false, "score": 0, "creation_date": 1475078769, "post_id": 39752479, "comment_id": 66801104, "body": "Sometimes the order in which libraries are to be listed in the linker command matter. You may also read this post about that: <a href=\"https://stackoverflow.com/questions/45135/why-does-the-order-in-which-libraries-are-linked-sometimes-cause-errors-in-gcc\">https://stackoverflow.com/questions/45135/...</a>"}], "tags": [], "owner": {"reputation": 71, "user_id": 5738482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb694cd6613a583fb7b69a76ca87b55b?s=128&d=identicon&r=PG&f=1", "display_name": "hoelzlw", "link": "https://stackoverflow.com/users/5738482/hoelzlw"}, "is_accepted": false, "score": 1, "last_activity_date": 1475078574, "creation_date": 1475078574, "answer_id": 39752479, "question_id": 39752068, "link": "https://stackoverflow.com/questions/39752068/multiple-linking-c-files/39752479#39752479", "title": "Multiple linking c++ files", "body": "<blockquote>\n  <p>any ideas how to compile multiple c++ files without passing everything in command line.</p>\n</blockquote>\n\n<p>First create object files:</p>\n\n<pre><code>g++ -c main.cpp -o main.o\ng++ -c myfile.cpp -o myfile.o\n</code></pre>\n\n<p>Then pass them to the linker:</p>\n\n<pre><code>g++ main.o myfile.o -o main\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "is_accepted": false, "score": 1, "last_activity_date": 1475083234, "creation_date": 1475083234, "answer_id": 39753927, "question_id": 39752068, "link": "https://stackoverflow.com/questions/39752068/multiple-linking-c-files/39753927#39753927", "title": "Multiple linking c++ files", "body": "<p>Though there is a fairly large learning curve for Make, a make file is the preferred solution.  On SO, I have also noticed significant use of CMake.</p>\n\n<hr>\n\n<p>Additional ideas for your Makefile:  </p>\n\n<p>The following two rules handle 90% of my simpler unit test executables: </p>\n\n<ul>\n<li><p>R01 handles files with both .cc and .hh</p></li>\n<li><p>R02 handles files with only .cc </p></li>\n</ul>\n\n<hr>\n\n<pre><code># pattern rule R01\n# when any  ARCHIVE changes, trigger a rebuild\n% : %.cc %.hh  $(LIB_ARCHIVEs)\n    @echo\n    @echo R01: $&lt;\n    rm -f $@\n    $(CC) $(CC_FLAGS)  $&lt;  -o $@  $(LIB_DIRs) $(LIB_NMs)\n\n# pattern rule R02\n# when any  ARCHIVE changes, trigger a rebuild\n% : %.cc   $(LIB_ARCHIVEs)\n    @echo\n    @echo R02: $&lt;\n    rm -f $@\n    $(CC) $(CC_FLAGS)  $&lt;  -o $@  $(LIB_DIRs) $(LIB_NMs)\n</code></pre>\n\n<p>Occasionally, I will add specific LIB names and directories ... directly to the LIB_DIRs and LIB_NMs definition in the Makefile. For example, here I have added -lrt and -pthread:</p>\n\n<pre><code>LIB_NMs  += -lbag_i686 -lposix_i686 -lrt -pthread\n</code></pre>\n\n<p>bag_i686 and posix_i686 are libraries I built ... simple C++ class wrappers around the linux and posix functions.  Most of my unit tests do not use much of posix stuff, but I get no grief including it.</p>\n\n<p>With C++ std::thread, I seldom use -pthread. However, I occasionally use posix semaphore.</p>\n\n<hr>\n\n<p>My compile command line access (in emacs on Ubuntu) provides a history, so the occasional change or addition to the command line is only a 'bother' one time.  From then on, the newer command is available in history.</p>\n\n<p>The emacs I launch is configured with an 'embedded' pre-defined compile command:</p>\n\n<pre><code> USER_FLAGS='-O0 ' ; export USER_FLAGS ; time make CC='g++ -m64' -j 2 -k \n</code></pre>\n\n<p>This command shows up the 1st time I launch the compiler from within emacs. Emacs presents it as if the command is already in 'compile-command history'.</p>\n\n<p>I manually shorten this if I'm not rebuilding all, usually I only build a single ut:</p>\n\n<pre><code> USER_FLAGS='-O0 ' ; export USER_FLAGS ; time make CC='g++ -m64' \n</code></pre>\n\n<p>So, for example, when I am ready to compile dumy431.cc, I invoke:</p>\n\n<pre><code> USER_FLAGS='-O0 ' ; export USER_FLAGS ; time make CC='g++ -m64' dumy431\n</code></pre>\n\n<p>The next build I launch (from within emacs compile) starts with the previous command, and up/down arrow roll through any other versions of the command.</p>\n\n<hr>\n\n<p>With this form of the command,  I can trivially change from g++ to clang++ by inserting \"clan\" at the appropriate place:</p>\n\n<pre><code> USER_FLAGS='-O0 ' ; export USER_FLAGS ; time make CC='clang++ -m64' \n</code></pre>\n\n<p>clang++ often provides additional diagnostics that g++ does not report.  To roll back to g++, I can up-arrow in the compiler command panel (or edit the command).</p>\n\n<hr>\n\n<p>Here is a small example where my unit test code has multiple src files. Often, the non-main files (such as eng_format.*) are code that I plan to capture to one of my libraries for future use:</p>\n\n<pre><code>FMssb.o : FMssb.cc FMssb.hh\n    @echo\n    @echo R_FMssb.o: $&lt;\n    rm -f $@\n    $(CC) $(CC_FLAGS) -c  $&lt;  -o $@\n\nFMssb_ut : FMssb_ut.cc eng_format.o FMssb.o $(LIB_ARCHIVEs)\n    @echo\n    @echo R_FMssb_ut: $&lt;\n    rm -f $@\n    $(CC) $(CC_FLAGS)  $&lt;  -o $@  eng_format.o  FMssb.o  $(LIB_DIRs) $(LIB_NMs)\n\neng_format.o : eng_format.cpp eng_format.hpp $(LIB_ARCHIVEs)\n    @echo\n    @echo R_EF: $&lt;\n    rm -f $@\n    $(CC) $(CC_FLAGS) -c  $&lt;  -o $@  $(LIB_DIRs) $(LIB_NMs)\n</code></pre>\n"}], "owner": {"reputation": 669, "user_id": 1219501, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/c098688b61bf3d3f2d65d903521b0b1d?s=128&d=identicon&r=PG", "display_name": "sger", "link": "https://stackoverflow.com/users/1219501/sger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 388, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1475083234, "creation_date": 1475077304, "question_id": 39752068, "link": "https://stackoverflow.com/questions/39752068/multiple-linking-c-files", "title": "Multiple linking c++ files", "body": "<p>C++ newbie here my command is <code>g++ main.cpp -o main</code> gives me linking errors like the following </p>\n\n<p><code>ld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)</code></p>\n\n<p>if i pass c++ files <code>g++ main.cpp myfile.cpp -o main</code> everything is correct</p>\n\n<p>any ideas how to compile multiple c++ files without passing everything in command line.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "sorting", "qsort"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1475077434, "post_id": 39751981, "comment_id": 66800235, "body": "Not that there&#39;s anything wrong with <code>qsort</code>, but is there a reason you chose it? Your code feels very <code>C</code>-like in general. There&#39;s a few things in there I&#39;d update to be more C++ like, as this question is tagged as such."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 5411115, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/a813e9a1f66afa347230dc44f4785b42?s=128&d=identicon&r=PG&f=1", "display_name": "user5411115", "link": "https://stackoverflow.com/users/5411115/user5411115"}, "edited": false, "score": 0, "creation_date": 1475077465, "post_id": 39752057, "comment_id": 66800254, "body": "can you please show me what I would write inside the compare function? @weltensturm"}, {"owner": {"reputation": 1979, "user_id": 1634531, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/02fc16c85eab4a8e38f1c5ac1ae92a17?s=128&d=identicon&r=PG", "display_name": "weltensturm", "link": "https://stackoverflow.com/users/1634531/weltensturm"}, "reply_to_user": {"reputation": 61, "user_id": 5411115, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/a813e9a1f66afa347230dc44f4785b42?s=128&d=identicon&r=PG&f=1", "display_name": "user5411115", "link": "https://stackoverflow.com/users/5411115/user5411115"}, "edited": false, "score": 0, "creation_date": 1475077877, "post_id": 39752057, "comment_id": 66800525, "body": "Take a look at utnapistim&#39;s answer."}], "tags": [], "owner": {"reputation": 1979, "user_id": 1634531, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/02fc16c85eab4a8e38f1c5ac1ae92a17?s=128&d=identicon&r=PG", "display_name": "weltensturm", "link": "https://stackoverflow.com/users/1634531/weltensturm"}, "is_accepted": false, "score": 8, "last_activity_date": 1475077279, "creation_date": 1475077279, "answer_id": 39752057, "question_id": 39751981, "link": "https://stackoverflow.com/questions/39751981/getting-wrong-output-while-sorting-in-c/39752057#39752057", "title": "getting wrong output while sorting in C++", "body": "<p>In <code>compare</code>, you are subtracting two sub-1 doubles and casting them to an int, the result will in most cases be 0. Instead of subtracting you should compare them and return -1/1.</p>\n"}, {"tags": [], "owner": {"reputation": 24727, "user_id": 186997, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/836f83976dae9f54ad7a201cca951f73?s=128&d=identicon&r=PG", "display_name": "utnapistim", "link": "https://stackoverflow.com/users/186997/utnapistim"}, "is_accepted": false, "score": 5, "last_activity_date": 1475078005, "last_edit_date": 1475078005, "creation_date": 1475077476, "answer_id": 39752123, "question_id": 39751981, "link": "https://stackoverflow.com/questions/39751981/getting-wrong-output-while-sorting-in-c/39752123#39752123", "title": "getting wrong output while sorting in C++", "body": "<p>Consider using this compare instead:</p>\n\n<pre><code>int compare (const void * a, const void * b)\n{\n    auto x = reinterpret_cast&lt;const player*&gt;(a);\n    auto y = reinterpret_cast&lt;const player*&gt;(b);\n    if(x-&gt;data &lt; y-&gt;data)\n        return -1;\n    if(x-&gt;data &gt; y-&gt;data)\n        return 1;\n    return 0;\n}\n</code></pre>\n\n<p>That said, this style of coding is ancient/deprecated/bad practice.</p>\n\n<p>Consider writing similar to this instead:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include &lt;algorithm&gt;\n\nstruct player {\n  double data;\n  int index;\n\n    bool operator &lt; (const player&amp; p) const\n    {\n        return data &lt; p.data;\n    }\n};\n\nauto A = std::vector&lt;player&gt;{\n    {0.690277,0}, {0.517857,1},\n    {0.780762,2}, {0.0416667,3}, {0.0416667,4}\n};\n\nint main ()\n{\n    std::sort(std::begin(A), std::end(A));\n    for(const auto&amp; x: A)\n        std::cout &lt;&lt; \"data=\" &lt;&lt; x.data &lt;&lt; \", \"\n            &lt;&lt; \"index=\" &lt;&lt; x.index &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>Suggested changes:</p>\n\n<ul>\n<li>don't import std names globally</li>\n<li>don't mix cstdio and iostreams (only include one of them)</li>\n<li>use std::vector or std::array instead of native array</li>\n<li>define the sorting order in the interface of the class (bool operator &lt;). (this should also imply that you define the other arithmetic operators - it is good practice and avoids subtle bugs later, but it is not required for this particular implementation to compile and work)</li>\n<li>use std::sort instead of qsort</li>\n<li>don't use raw pointers (using them like this is a source for bugs)</li>\n</ul>\n"}], "owner": {"reputation": 61, "user_id": 5411115, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/a813e9a1f66afa347230dc44f4785b42?s=128&d=identicon&r=PG&f=1", "display_name": "user5411115", "link": "https://stackoverflow.com/users/5411115/user5411115"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1475078005, "creation_date": 1475077038, "question_id": 39751981, "link": "https://stackoverflow.com/questions/39751981/getting-wrong-output-while-sorting-in-c", "title": "getting wrong output while sorting in C++", "body": "<p>The following C++ code sorts an array in descending order using qsort:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;cstdio&gt;\n#include &lt;stdlib.h&gt;\nusing namespace std;\n\nstruct player {\n  double data;\n  int index;\n};\n\nstruct player A[] = {{0.690277,0}, {0.517857,1}, {0.780762,2}, {0.0416667,3}, {0.0416667,4}};\n\nint compare (const void * a, const void * b)\n{\n   return ( ((struct player*)b)-&gt;data - ((struct player*)a)-&gt;data );\n}\n\nint main ()\n{\n  int n;\n  qsort (A, 5, sizeof(struct player), compare);\n  for (n=0; n&lt;5; n++)\n  printf (\"data=%lf, index=%d\\n\", A[n].data, A[n].index);\n  return 0;\n}\n</code></pre>\n\n<p>But I am getting output like this:</p>\n\n<pre><code>data=0.517857, index=1\ndata=0.780762, index=2\ndata=0.041667, index=3\ndata=0.041667, index=4\ndata=0.690277, index=0\n</code></pre>\n\n<p>Is there anything wrong in the code?</p>\n"}, {"tags": ["c++", "string", "c++11", "vector", "stl"], "comments": [{"owner": {"reputation": 273, "user_id": 5724244, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-bJua7QXi05c/AAAAAAAAAAI/AAAAAAAAAII/YS5zcgD_xQk/photo.jpg?sz=128", "display_name": "frp farhan", "link": "https://stackoverflow.com/users/5724244/frp-farhan"}, "edited": false, "score": 0, "creation_date": 1475076634, "post_id": 39751800, "comment_id": 66799708, "body": "code is getting failed."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1475076769, "post_id": 39751800, "comment_id": 66799790, "body": "I don&#39;t see any sorting in your code."}, {"owner": {"reputation": 476, "user_id": 4224811, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mokgf.jpg?s=128&g=1", "display_name": "Gabriel Vasconcelos", "link": "https://stackoverflow.com/users/4224811/gabriel-vasconcelos"}, "edited": false, "score": 2, "creation_date": 1475076883, "post_id": 39751800, "comment_id": 66799859, "body": "<code>data.end() + M</code>?????"}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 2, "creation_date": 1475076884, "post_id": 39751800, "comment_id": 66799860, "body": "You meant <code>data.begin() + M)</code> instead, but that does not fix the code."}, {"owner": {"reputation": 273, "user_id": 5724244, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-bJua7QXi05c/AAAAAAAAAAI/AAAAAAAAAII/YS5zcgD_xQk/photo.jpg?sz=128", "display_name": "frp farhan", "link": "https://stackoverflow.com/users/5724244/frp-farhan"}, "edited": false, "score": 0, "creation_date": 1475076979, "post_id": 39751800, "comment_id": 66799930, "body": "edited with sort function, sorry for the typing error which was earlier there with reverse."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1475077005, "post_id": 39751800, "comment_id": 66799954, "body": "Think about what you are asking for in <code>data.end()+M</code>."}, {"owner": {"reputation": 993, "user_id": 6858837, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f56ccb5125aaaad6dd7bb752be8f3494?s=128&d=identicon&r=PG&f=1", "display_name": "Trevir", "link": "https://stackoverflow.com/users/6858837/trevir"}, "edited": false, "score": 1, "creation_date": 1475077170, "post_id": 39751800, "comment_id": 66800065, "body": "Remember to check M and N against data.size()! After all it&#39;s an user input."}, {"owner": {"reputation": 5093, "user_id": 6039995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QuCId.png?s=128&g=1", "display_name": "Stack Danny", "link": "https://stackoverflow.com/users/6039995/stack-danny"}, "edited": false, "score": 1, "creation_date": 1475077864, "post_id": 39751800, "comment_id": 66800518, "body": "I tried it, worked for me. I only had to include &lt;functional&gt; to compile it (Visual Studio)."}, {"owner": {"reputation": 273, "user_id": 5724244, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-bJua7QXi05c/AAAAAAAAAAI/AAAAAAAAAII/YS5zcgD_xQk/photo.jpg?sz=128", "display_name": "frp farhan", "link": "https://stackoverflow.com/users/5724244/frp-farhan"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 1, "creation_date": 1475078060, "post_id": 39751800, "comment_id": 66800623, "body": "@FirstStep, did it fix the code."}, {"owner": {"reputation": 273, "user_id": 5724244, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-bJua7QXi05c/AAAAAAAAAAI/AAAAAAAAAII/YS5zcgD_xQk/photo.jpg?sz=128", "display_name": "frp farhan", "link": "https://stackoverflow.com/users/5724244/frp-farhan"}, "edited": false, "score": 0, "creation_date": 1475079902, "post_id": 39751800, "comment_id": 66801872, "body": "<a href=\"http://coliru.stacked-crooked.com/a/9b3a53f0b7344a68\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/9b3a53f0b7344a68</a>  here is the error."}], "answers": [{"comments": [{"owner": {"reputation": 273, "user_id": 5724244, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-bJua7QXi05c/AAAAAAAAAAI/AAAAAAAAAII/YS5zcgD_xQk/photo.jpg?sz=128", "display_name": "frp farhan", "link": "https://stackoverflow.com/users/5724244/frp-farhan"}, "edited": false, "score": 0, "creation_date": 1475078307, "post_id": 39752372, "comment_id": 66800793, "body": "my string is not empty string, still it is not working for me. Indicating runtime error."}, {"owner": {"reputation": 993, "user_id": 6858837, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f56ccb5125aaaad6dd7bb752be8f3494?s=128&d=identicon&r=PG&f=1", "display_name": "Trevir", "link": "https://stackoverflow.com/users/6858837/trevir"}, "reply_to_user": {"reputation": 273, "user_id": 5724244, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-bJua7QXi05c/AAAAAAAAAAI/AAAAAAAAAII/YS5zcgD_xQk/photo.jpg?sz=128", "display_name": "frp farhan", "link": "https://stackoverflow.com/users/5724244/frp-farhan"}, "edited": false, "score": 0, "creation_date": 1475078664, "post_id": 39752372, "comment_id": 66801042, "body": "This MCVE works just fine, look for the errors in the differences to your code and do proper input checking."}, {"owner": {"reputation": 273, "user_id": 5724244, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-bJua7QXi05c/AAAAAAAAAAI/AAAAAAAAAII/YS5zcgD_xQk/photo.jpg?sz=128", "display_name": "frp farhan", "link": "https://stackoverflow.com/users/5724244/frp-farhan"}, "edited": false, "score": 0, "creation_date": 1475079850, "post_id": 39752372, "comment_id": 66801836, "body": "<a href=\"http://coliru.stacked-crooked.com/a/9b3a53f0b7344a68\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/9b3a53f0b7344a68</a>  @Trevir, pls help me out in finding why the segmentation fault."}, {"owner": {"reputation": 273, "user_id": 5724244, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-bJua7QXi05c/AAAAAAAAAAI/AAAAAAAAAII/YS5zcgD_xQk/photo.jpg?sz=128", "display_name": "frp farhan", "link": "https://stackoverflow.com/users/5724244/frp-farhan"}, "edited": false, "score": 0, "creation_date": 1475183215, "post_id": 39752372, "comment_id": 66854229, "body": "Thnx buddy for pointing out the segmentation fault. (@Trevir)"}], "tags": [], "owner": {"reputation": 993, "user_id": 6858837, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f56ccb5125aaaad6dd7bb752be8f3494?s=128&d=identicon&r=PG&f=1", "display_name": "Trevir", "link": "https://stackoverflow.com/users/6858837/trevir"}, "is_accepted": true, "score": 2, "last_activity_date": 1475078390, "last_edit_date": 1475078390, "creation_date": 1475078205, "answer_id": 39752372, "question_id": 39751800, "link": "https://stackoverflow.com/questions/39751800/sort-a-substring-in-descending-order-using-vector-however-getting-segmentation/39752372#39752372", "title": "Sort a Substring in Descending order using Vector, however getting segmentation fault", "body": "<p>This example does work fine for me:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;vector&gt;  \n#include &lt;string&gt;\n\nusing namespace std;\n\nint main()\n{   \n    string s = \"ABCDEFG\";\n    int N = 1;\n    int M = 5;\n\n    vector&lt;char&gt; data(s.begin(), s.end());\n\n    std::sort(data.begin() + N, data.begin() + M, std::greater&lt;char&gt;());\n\n    for (auto&amp; character : data)\n        std::cout &lt;&lt; character &lt;&lt; ' ';\n    return 0;\n}\n</code></pre>\n\n<p><strong><a href=\"http://coliru.stacked-crooked.com/a/ee7c5f05afe85115\" rel=\"nofollow\">http://coliru.stacked-crooked.com/a/ee7c5f05afe85115</a></strong></p>\n\n<p>I suspect you get an empty string with cin, and therefore your data.begin() is invalid. \nBe cautious with user entered data. Always do proper checking for input that may break your code. </p>\n\n<p>Additonally your templated greater is the comparing function for the wrong type. </p>\n"}, {"tags": [], "owner": {"reputation": 273, "user_id": 5724244, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-bJua7QXi05c/AAAAAAAAAAI/AAAAAAAAAII/YS5zcgD_xQk/photo.jpg?sz=128", "display_name": "frp farhan", "link": "https://stackoverflow.com/users/5724244/frp-farhan"}, "is_accepted": false, "score": 1, "last_activity_date": 1475183142, "creation_date": 1475183142, "answer_id": 39780015, "question_id": 39751800, "link": "https://stackoverflow.com/questions/39751800/sort-a-substring-in-descending-order-using-vector-however-getting-segmentation/39780015#39780015", "title": "Sort a Substring in Descending order using Vector, however getting segmentation fault", "body": "<p>The answer to the above question is from the guidance of Trevir.\n  In order to avoid the segmentation fault, check the size of the input \n  string and then apply operations on it.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;vector&gt;  \n#include &lt;string&gt;\n\nusing namespace std;\n\nint main()\n{   \n    string s;\n    int M,N;\n\n    cout&lt;&lt;\"Enter String\"&lt;&lt;endl;\n    getline(cin,s);\n\n    if ( s.size() == 0 )\n    {\n       std::cout &lt;&lt; \"Empty Input\" &lt;&lt; std::endl;   \n       return 0;\n    }\n\n    vector&lt;char&gt; data(s.begin(), s.end());\n\n    cout&lt;&lt;\"Enter start_index and end_index for sorting\";\n    cin&gt;&gt;N&gt;&gt;M;    //Passed externally as N=start_index, M=end_index\n\n    std::sort(data.begin()+N, data.begin()+M, std::greater&lt;char&gt;());\n\n    for (std::vector&lt;char&gt;::const_iterator i = data.begin(); i != data.end(); ++i)\n        std::cout &lt;&lt; *i;\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 273, "user_id": 5724244, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-bJua7QXi05c/AAAAAAAAAAI/AAAAAAAAAII/YS5zcgD_xQk/photo.jpg?sz=128", "display_name": "frp farhan", "link": "https://stackoverflow.com/users/5724244/frp-farhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 39752372, "answer_count": 2, "score": -1, "last_activity_date": 1475183142, "creation_date": 1475076565, "last_edit_date": 1475081038, "question_id": 39751800, "link": "https://stackoverflow.com/questions/39751800/sort-a-substring-in-descending-order-using-vector-however-getting-segmentation", "title": "Sort a Substring in Descending order using Vector, however getting segmentation fault", "body": "<p>I want to sort the string from N to M where N indicates the starting index and M indicates the ending index.</p>\n\n<p>However, my code is getting failed with segmentation fault.\nHere is my code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;vector&gt;  \n#include &lt;string&gt;\n\nusing namespace std;\n\nint main()\n{   \n    string s;\n    int M=0,N=0;\n\n    cout&lt;&lt;\"Enter String\"&lt;&lt;endl;\n    getline(cin,s);\n\n    vector&lt;char&gt; data(s.begin(), s.end());\n\n    cout&lt;&lt;\"Enter start_index and end_index for sorting\";\n    cin&gt;&gt;N&gt;&gt;M;    //Passed externally as N=start_index, M=end_index\n\n    std::sort(data.begin()+N, data.begin()+M, std::greater&lt;char&gt;());\n\n    for (std::vector&lt;char&gt;::const_iterator i = data.begin(); i != data.end(); ++i)\n        std::cout &lt;&lt; *i &lt;&lt; ' ';\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "string", "boost"], "answers": [{"comments": [{"owner": {"reputation": 13563, "user_id": 992490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac727873c5724326c84ed245faa9fe6c?s=128&d=identicon&r=PG", "display_name": "Marshall Clow", "link": "https://stackoverflow.com/users/992490/marshall-clow"}, "edited": false, "score": 2, "creation_date": 1475080627, "post_id": 39751822, "comment_id": 66802344, "body": "If you had written: <code>boost::string_ref ref = &quot;&lt;a&gt;\\n1234567\\n&lt;&#47;a&gt;\\n&lt;a&gt;&quot;;</code>, you would get consistent answers, since the string literal never &quot;gets destroyed&quot;"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 3, "last_activity_date": 1475076633, "creation_date": 1475076633, "answer_id": 39751822, "question_id": 39751776, "link": "https://stackoverflow.com/questions/39751776/booststring-ref-find-algorithms/39751822#39751822", "title": "Boost::string_ref find algorithms", "body": "<p>From the <a href=\"http://www.boost.org/doc/libs/1_61_0/libs/utility/doc/html/string_ref.html\" rel=\"nofollow\">docs</a>:</p>\n\n<blockquote>\n  <p>Boost.StringRef is an implementation of Jeffrey Yaskin's N3442: string_ref: a <strong>non-owning reference</strong> to a string.</p>\n</blockquote>\n\n<p><code>string_ref</code> doesn't own anything, just refers to it. So when you write:</p>\n\n<pre><code>boost::string_ref ref = string(\"&lt;a&gt;\\n1234567\\n&lt;/a&gt;\\n&lt;a&gt;\");\n</code></pre>\n\n<p>that temporary <code>string</code> gets destroyed at the end of the line and now you have a dangling reference. Everything else is UB. </p>\n"}], "owner": {"reputation": 677, "user_id": 4300271, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/nZNJG.jpg?s=128&g=1", "display_name": "Louis Kuang", "link": "https://stackoverflow.com/users/4300271/louis-kuang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 39751822, "answer_count": 1, "score": 0, "last_activity_date": 1475076633, "creation_date": 1475076508, "question_id": 39751776, "link": "https://stackoverflow.com/questions/39751776/booststring-ref-find-algorithms", "title": "Boost::string_ref find algorithms", "body": "<p>I am having some problems figuring out what does the boost library string_ref find function do. I wrote the following program</p>\n\n<pre><code>int main(int argc, char **argv) {\n    boost::string_ref ref = string(\"&lt;a&gt;\\n1234567\\n&lt;/a&gt;\\n&lt;a&gt;\");\n    cout &lt;&lt; ref.find_first_of(\"&lt;a&gt;\") &lt;&lt; endl; // output 12\n    cout &lt;&lt; ref.find(\"&lt;a&gt;\") &lt;&lt; endl; // output 17\n}\n</code></pre>\n\n<p>I do not understand why find gives me the last occurence of my pattern and find_last_of does not even make sense at all! Can someone give me some help?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 3, "creation_date": 1475076365, "post_id": 39751659, "comment_id": 66799529, "body": "No way of knowing what <code>abs</code> function you&#39;re calling. <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> would help."}], "answers": [{"comments": [{"owner": {"reputation": 270444, "user_id": 405017, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2024054e404233ed97b7d9287aff103d?s=128&d=identicon&r=PG", "display_name": "Phrogz", "link": "https://stackoverflow.com/users/405017/phrogz"}, "edited": false, "score": 0, "creation_date": 1475076527, "post_id": 39751707, "comment_id": 66799628, "body": "Thanks, that did it. :) Indeed, I did not already know. Except for the last two weeks, I last programmed in C++ in 1994. :)"}, {"owner": {"reputation": 10342, "user_id": 657930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rVp41.jpg?s=128&g=1", "display_name": "Arvid", "link": "https://stackoverflow.com/users/657930/arvid"}, "edited": false, "score": 0, "creation_date": 1475085300, "post_id": 39751707, "comment_id": 66804971, "body": "I would also suggest building with <code>-Wconversion</code> to avoid similar problems"}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 10, "last_activity_date": 1475076325, "creation_date": 1475076325, "answer_id": 39751707, "question_id": 39751659, "link": "https://stackoverflow.com/questions/39751659/getting-double-result-from-absdouble-instead-of-int/39751707#39751707", "title": "Getting double result from abs(double) instead of int", "body": "<p>To avoid clashes with unintentionally imported C standard library headers, use <code>std::abs</code> instead. That's the C++ version, and is heavily overloaded, as you already know.</p>\n\n<p>Otherwise use <code>fabs</code> from the C standard library.</p>\n"}, {"tags": [], "owner": {"reputation": 15610, "user_id": 2456565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xa8D9.png?s=128&g=1", "display_name": "krzaq", "link": "https://stackoverflow.com/users/2456565/krzaq"}, "is_accepted": false, "score": 2, "last_activity_date": 1475076522, "creation_date": 1475076522, "answer_id": 39751783, "question_id": 39751659, "link": "https://stackoverflow.com/questions/39751659/getting-double-result-from-absdouble-instead-of-int/39751783#39751783", "title": "Getting double result from abs(double) instead of int", "body": "<p>Prior to C++17 <code>abs</code> for <a href=\"http://en.cppreference.com/w/cpp/numeric/math/fabs\" rel=\"nofollow\">floating points</a> and for <a href=\"http://en.cppreference.com/w/cpp/numeric/math/abs\" rel=\"nofollow\">integrals</a> were defined in different headers (<code>cmath</code> and <code>cstdlib</code> respectively).</p>\n"}], "owner": {"reputation": 270444, "user_id": 405017, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2024054e404233ed97b7d9287aff103d?s=128&d=identicon&r=PG", "display_name": "Phrogz", "link": "https://stackoverflow.com/users/405017/phrogz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 860, "favorite_count": 0, "accepted_answer_id": 39751707, "answer_count": 2, "score": 5, "last_activity_date": 1475076522, "creation_date": 1475076225, "question_id": 39751659, "link": "https://stackoverflow.com/questions/39751659/getting-double-result-from-absdouble-instead-of-int", "title": "Getting double result from abs(double) instead of int", "body": "<p>I need to calculate the absolute value of a difference of two <code>double</code> values and have a <code>double</code> result. Instead, I'm getting an <code>int</code>.</p>\n\n<pre><code>#include &lt;typeinfo&gt;\n// ...\nprintf(\n    \"a:%s b:%s delta:%s abs:%s\\n\",\n    typeid(a).name(),\n    typeid(b).name(),\n    typeid(a - b).name(),\n    typeid(abs(a - b)).name()\n);\n// Prints: a:d b:d delta:d abs:i\n</code></pre>\n\n<p>If the result of the subtraction is already a double, why is <code>abs</code> not using the <a href=\"http://www.cplusplus.com/reference/cmath/abs/\" rel=\"noreferrer\"><code>double abs (double x);</code></a> signature? Indeed, how can it be returning an integer at all? Most importantly, how do I force it to return a <code>double</code>?</p>\n\n<p><sub><em>In case it makes a difference, <code>a</code> and <code>b</code> are actually <code>myData.m_lat</code> and <code>otherData.latitude()</code>.</em></sub></p>\n"}, {"tags": ["c++", "boost", "boost-hana"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1475076359, "post_id": 39751590, "comment_id": 66799522, "body": "<code>hana::when</code> is about enabling partial specializations."}, {"owner": {"reputation": 349, "user_id": 5480913, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cf6b4304ec7a85cdb5942b00d76893e6?s=128&d=identicon&r=PG&f=1", "display_name": "Engineerist", "link": "https://stackoverflow.com/users/5480913/engineerist"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1475097596, "post_id": 39751590, "comment_id": 66811710, "body": "@Barry: Right, what I am looking for is a (perhaps) clever way to replace the plain enable_if with some succinct hana incantation."}], "answers": [{"tags": [], "owner": {"reputation": 2976, "user_id": 627587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b7225df5b0728daa170646a5c5a4bfda?s=128&d=identicon&r=PG", "display_name": "Louis Dionne", "link": "https://stackoverflow.com/users/627587/louis-dionne"}, "is_accepted": true, "score": 1, "last_activity_date": 1475181095, "creation_date": 1475181095, "answer_id": 39779467, "question_id": 39751590, "link": "https://stackoverflow.com/questions/39751590/sfinae-template-constructor-with-boosthana/39779467#39779467", "title": "SFINAE template constructor with boost::hana", "body": "<p>As @Barry says in the comments, <code>hana::when</code> is useful for partial specializations, and it can't be used in your case. Hana does not provide an incantation that is more succinct than what you already have (which is fair given it's a one liner). Also note that you may drop the extra <code>typename</code> keyword in from of <code>std::enable_if_t</code>.</p>\n"}], "owner": {"reputation": 349, "user_id": 5480913, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cf6b4304ec7a85cdb5942b00d76893e6?s=128&d=identicon&r=PG&f=1", "display_name": "Engineerist", "link": "https://stackoverflow.com/users/5480913/engineerist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 39779467, "answer_count": 1, "score": 0, "last_activity_date": 1475181095, "creation_date": 1475076067, "question_id": 39751590, "link": "https://stackoverflow.com/questions/39751590/sfinae-template-constructor-with-boosthana", "title": "SFINAE template constructor with boost::hana", "body": "<p>Given the following code, what is an appropriate way to express the same functionality with Boost hana?</p>\n\n<pre><code>#include &lt;type_traits&gt;\n\n#include &lt;boost/hana/type.hpp&gt;\n#include &lt;boost/hana/core/when.hpp&gt;\nnamespace hana = boost::hana;\n\nstruct S {\n    template&lt;\n        typename T,\n        typename = typename std::enable_if_t&lt; (T::value) &gt; &gt; // &lt;-- equivalent?\n    S (const T&amp;) { }\n};\n\nstruct X { static constexpr int value = 0; };\nstruct Y { static constexpr int value = 1; };\n\nint main () {\n    S a (X { }); // &lt;-- must fail\n    S b (Y { });\n    return 0;\n}\n</code></pre>\n\n<p>The doc for <code>when</code> mention it as a replacement for <code>enable_if</code> but I am not sure how to apply it in this context. So, how do I selectively enable a template constructor with Boost hana?</p>\n"}, {"tags": ["c++", "stl", "containers"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1475075923, "post_id": 39751518, "comment_id": 66799190, "body": "Why not try it and see?"}, {"owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "edited": false, "score": 2, "creation_date": 1475076133, "post_id": 39751518, "comment_id": 66799364, "body": "I think it depends on the specific implementation. <code>map</code> usually uses some kind of a tree structure - red-black tree or AVL tree or some such. Inserting a sorted sequence will still trigger re-balance every so often, and that&#39;s about the only thing that affects insertion performance. That said, there might be some magic sequences that do not trigger re-balance or trigger them less often. Not necessarily sorted sequences."}, {"owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "reply_to_user": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 2, "creation_date": 1475076166, "post_id": 39751518, "comment_id": 66799391, "body": "@WhiZTiM: second rule of performance, &quot;never rely on the results measured on just a single machine&quot;."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 2, "creation_date": 1475076561, "post_id": 39751518, "comment_id": 66799652, "body": "There is hint in std:::map::insert (which should be std::map::end() in this case),  making insertions amortized constant."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1593881"}, "edited": false, "score": 0, "creation_date": 1475076819, "post_id": 39751518, "comment_id": 66799826, "body": "@DieterL&#252;cking Good catch."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "is_accepted": false, "score": 3, "last_activity_date": 1475078469, "last_edit_date": 1475078469, "creation_date": 1475078075, "answer_id": 39752326, "question_id": 39751518, "link": "https://stackoverflow.com/questions/39751518/ordered-inserts-to-stlmap-faster/39752326#39752326", "title": "Ordered inserts to stl::map faster?", "body": "<p>Sure, having sorted data.</p>\n\n<pre><code>#include &lt;map&gt;\n#include &lt;vector&gt;\n\nint main() {\n    std::vector&lt;int&gt; data { 0, 1, 2, 3, 4, 5 };\n    std::map&lt;int, int&gt; result;\n    // From: http://en.cppreference.com/w/cpp/container/map/insert\n    // Amortized constant if the insertion happens in the position just before\n    // the hint, logarithmic in the size of the container otherwise.\n    for(auto i : data)\n        result.insert(result.end(), { i, i} );\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 681, "user_id": 1858769, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U6PeN.jpg?s=128&g=1", "display_name": "Jason L.", "link": "https://stackoverflow.com/users/1858769/jason-l"}, "is_accepted": false, "score": 1, "last_activity_date": 1475154194, "creation_date": 1475154194, "answer_id": 39771125, "question_id": 39751518, "link": "https://stackoverflow.com/questions/39751518/ordered-inserts-to-stlmap-faster/39771125#39771125", "title": "Ordered inserts to stl::map faster?", "body": "<p>Yes, that's true. From the perspective of big O, inserting N elements one by one is O(N*logN), in comparison, building a map(usually some kind of balanced binary tree) only requires O(N).  </p>\n\n<p>You can also take GCC's libstdc++ implementation as a reference.<br>\n<a href=\"https://github.com/gcc-mirror/gcc/blob/master/libstdc%2B%2B-v3/include/bits/stl_map.h#L219\" rel=\"nofollow\">gcc/libstdc++-v3/include/bits/stl_map.h</a></p>\n"}], "owner": {"reputation": 985, "user_id": 811625, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/fa85cc81ffea4ab284441d44e4092609?s=128&d=identicon&r=PG&f=1", "display_name": "Sampath", "link": "https://stackoverflow.com/users/811625/sampath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1475154194, "creation_date": 1475075845, "question_id": 39751518, "link": "https://stackoverflow.com/questions/39751518/ordered-inserts-to-stlmap-faster", "title": "Ordered inserts to stl::map faster?", "body": "<p>As the <code>stl::map</code> is an ordered map, will it be quicker to insert a sorted data-set? Specially if we consider a large data-set?</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1475075768, "post_id": 39751455, "comment_id": 66799083, "body": "Did you turn C++11 on in the compiler?"}, {"owner": {"reputation": 4268, "user_id": 5768335, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FVCGA.jpg?s=128&g=1", "display_name": "amanuel2", "link": "https://stackoverflow.com/users/5768335/amanuel2"}, "edited": false, "score": 1, "creation_date": 1475075849, "post_id": 39751455, "comment_id": 66799136, "body": "And your command to run this is? ..."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1475076030, "post_id": 39751455, "comment_id": 66799272, "body": "Also, add <code>#include &lt;functional&gt;</code> to support <code>std::function</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1475076108, "post_id": 39751455, "comment_id": 66799341, "body": "Have a look at <a href=\"http://codereview.stackexchange.com/questions/47347/follow-up-timer-utilizing-stdfuture\" title=\"follow up timer utilizing stdfuture\">codereview.stackexchange.com/questions/47347/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 6660273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3eed1f588dc83cfd3badc61b6b1eecc?s=128&d=identicon&r=PG&f=1", "display_name": "Peretz B", "link": "https://stackoverflow.com/users/6660273/peretz-b"}, "edited": false, "score": 0, "creation_date": 1475798426, "post_id": 39751455, "comment_id": 67100137, "body": "I turned on C++11 in the compiler, am using the Windows API(-mwindows) and updated my version of CodeBlocks(the IDE I am using) but the code is still not working."}], "answers": [{"tags": [], "owner": {"reputation": 81656, "user_id": 8446, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8f9c683775bfbe76ed4855a19b73dc81?s=128&d=identicon&r=PG", "display_name": "Roger Lipscombe", "link": "https://stackoverflow.com/users/8446/roger-lipscombe"}, "is_accepted": false, "score": 0, "last_activity_date": 1475076091, "creation_date": 1475076091, "answer_id": 39751601, "question_id": 39751455, "link": "https://stackoverflow.com/questions/39751455/errors-when-trying-to-work-with-threads/39751601#39751601", "title": "errors when trying to work with threads", "body": "<pre><code>error: 'thread' in namespace 'std' does not name a type\n</code></pre>\n\n<p>Whichever compiler you're using (looks like Visual C++) doesn't support <code>std::thread</code> (which is part of C++11).</p>\n"}], "owner": {"reputation": 1, "user_id": 6660273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3eed1f588dc83cfd3badc61b6b1eecc?s=128&d=identicon&r=PG&f=1", "display_name": "Peretz B", "link": "https://stackoverflow.com/users/6660273/peretz-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 157, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1475080422, "creation_date": 1475075663, "last_edit_date": 1475080422, "question_id": 39751455, "link": "https://stackoverflow.com/questions/39751455/errors-when-trying-to-work-with-threads", "title": "errors when trying to work with threads", "body": "<p>Hello everybody hope all is well.  I am trying to work with threads in c++.  I compiled the code and got the following error messages.  </p>\n\n<pre><code>C:\\Users\\Peretz\\Documents\\keylogger\\KeyConstants.h|183|warning: unknown escape sequence: '\\|' [enabled by default]|\nC:\\Users\\Peretz\\Documents\\keylogger\\Timer.h|10|error: 'thread' in namespace 'std' does not name a type|\nC:\\Users\\Peretz\\Documents\\keylogger\\Timer.h||In member function 'void Timer::SleepAndRun()':|\nC:\\Users\\Peretz\\Documents\\keylogger\\Timer.h|25|error: 'std::this_thread' has not been declared|\nC:\\Users\\Peretz\\Documents\\keylogger\\Timer.h||In member function 'void Timer::Start(bool)':|\nC:\\Users\\Peretz\\Documents\\keylogger\\Timer.h|71|error: 'Thread' was not declared in this scope|\nC:\\Users\\Peretz\\Documents\\keylogger\\Timer.h|71|error: 'thread' is not a member of 'std'|\nC:\\Users\\Peretz\\Documents\\keylogger\\Timer.h||In member function 'void Timer::Stop()':|\nC:\\Users\\Peretz\\Documents\\keylogger\\Timer.h|82|error: 'Thread' was not declared in this scope|\n||=== Build failed: 5 error(s), 1 warning(s) (0 minute(s), 0 second(s)) ===|\n</code></pre>\n\n<p>I looked on Youtube for threads in c++ and threads in c++11 but could not find an answer.  Please explain why there are these errors.</p>\n\n<pre><code>#ifndef TIMER_H\n#define TIMER_H\n\n#include &lt;thread&gt;\n#include &lt;chrono&gt;\n\nclass Timer   \n{    \n    std::thread Thread; \n    bool Alive = false;\n    long CallNumber = -1L;\n\n    long repeat_count = -1L;\n    std::chrono::milliseconds interval = std::chrono::milliseconds(0);\n    std::function&lt;void(void)&gt; funct = nullptr;\n\n    void SleepAndRun ()\n    {\n        std::this_thread::sleep_for(interval);\n        if (Alive)\n        {\n            Function ()();\n        }\n    }\n\n    void ThreadFunc ()\n    {\n        if (CallNumber == Infinite)\n            while (Alive)\n                SleepAndRun ();\n        else\n            while (repeat_count--)\n                SleepAndRun ();\n    }\n\n    public:\n\n    static const long Infinite = -1L;\n\n    Timer () {}\n    Timer(const std::function&lt;void(void)&gt; &amp;f) : funct (f) {}\n    Timer(const std::function&lt;void(void)&gt; &amp;f,\n          const unsigned long &amp;i,\n          const long repeat = Timer::Infinite) : funct (f),\n        interval (std::chrono::milliseconds(i)), CallNumber (repeat) {}\n\n    void Start (bool Async = true)\n    {\n        if (IsAlive ())\n            return;\n        Alive = true;\n        repeat_count = CallNumber;\n        if (Async)\n            Thread = std::thread (ThreadFunc,this);\n        else\n            this-&gt;ThreadFunc ();\n    }\n\n    void Stop ()\n    {\n        Alive = false;\n        Thread.join ();\n    }\n\n    void SetFunction (const std::function&lt;void (void)&gt; &amp;f)\n    {\n        funct = f;\n    }\n\n    bool IsAlive () const\n    {\n        return Alive;\n    }\n\n    void RepeatCount (const long r)\n    {   \n        if (Alive)\n            return;\n        CallNumber = r;\n    }\n\n    long GetLeftCount () const\n    {\n        return repeat_count;\n    }\n\n    long RepeatCount () const\n    {\n        return CallNumber;\n    }\n\n    void SetInterval (const unsigned long &amp;i)\n    {   \n        if (Alive)\n            return;\n        interval = std::chrono::milliseconds(i);\n    }\n\n    unsigned long Interval () const\n    {\n        return interval.count();\n    }\n\n    const std::function&lt;void(void)&gt; &amp;Function () const\n    {\n        return funct;\n    }\n};\n#endif\n</code></pre>\n\n<p>Thank you very much.</p>\n"}, {"tags": ["c++", "cryptography", "crypto++"], "answers": [{"tags": [], "owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "is_accepted": false, "score": 7, "last_activity_date": 1475106823, "last_edit_date": 1495541703, "creation_date": 1475105555, "answer_id": 39759159, "question_id": 39751312, "link": "https://stackoverflow.com/questions/39751312/advantages-of-secbyteblock-class-from-crypto/39759159#39759159", "title": "Advantages of SecByteBlock class from Crypto++", "body": "<blockquote>\n  <p>[title] Advantages of SecByteBlock class from Crypto++</p>\n</blockquote>\n\n<p>The advantage of using <code>SecByteBlock</code> is you get the managed buffer with zeroization. Zeroization is often a compliance item. For example, FIPS 140-2 requires it, even at Level 1 validations.</p>\n\n<p>A second, non obvious benefit is the allocator <strong><em>does not</em></strong> initialize POD memory - it returns a raw block. That makes a lot of sense since you often take a 0-value initialized and then overwrite the contents with data. There's no sense in intializing it, and it saves a lot of time.</p>\n\n<p>You can get <code>SecBlock</code> to provide a 0-value initialized block. Here's how to do both:</p>\n\n<pre><code>SecByteBlock block1(32);\nSecByteBlock block2(NULL, 32);\n</code></pre>\n\n<p><code>block1</code> is 32-bytes in size, uninitialized and its contents will be garbage. </p>\n\n<p><code>block2</code> is also 32-bytes in size, but it uses the <code>(ptr, size)</code> overload. The overload will either copy-in the block pointed to by <code>ptr</code>, or it will write 0's if its <code>NULL</code>.</p>\n\n<hr>\n\n<p>For completeness and reference, a <code>SecByteBlock</code> is just a typedef for <code>SecBlock&lt;byte&gt;</code>. <code>SecBlock&lt;T&gt;</code> is the class of interest, and the library frequently uses <code>SecBlock&lt;byte&gt;</code>, <code>SecBlock&lt;word32&gt;</code>, <code>SecBlock&lt;word64&gt;</code>, etc.</p>\n\n<p>Here's the Doxygen generated manual page for <code>SecBlock</code>: <a href=\"https://www.cryptopp.com/docs/ref/class_sec_block.html\" rel=\"noreferrer\">SecBlock&lt; T, A > Class Template Reference</a>. And here's the header file for <a href=\"https://www.cryptopp.com/docs/ref/secblock_8h_source.html\" rel=\"noreferrer\">secblock.h</a> (its a header only implementation).</p>\n\n<hr>\n\n<blockquote>\n  <p>Can someone please explain me when the contents of <code>SecByteBlock</code> will get cleared ...</p>\n</blockquote>\n\n<p>The contents of <code>SecByteBlock</code> are cleared under the obvious case of object destruction. That is, the memory allocated to the <code>SecBlock</code> are cleared with a pattern of 0's when the destructor runs.</p>\n\n<p>There's a non obvious case, and that's when <code>resize</code> is called to shrink one. In this case, the extra space being returned to the OS is wiped, too.</p>\n\n<p>You can see the wiping in the source code. For example, from <a href=\"https://www.cryptopp.com/docs/ref/secblock_8h_source.html#l00186\" rel=\"noreferrer\">Crypto++ 5.6.4 secblock.h</a>:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>  187     //! \\brief Deallocates a block of memory\n  188     //! \\param ptr the pointer for the allocation\n  189     //! \\param size the size of the allocation, in elements\n  190     //! \\details Internally, SecureWipeArray() is called before deallocating the memory.\n  191     //!   Once the memory block is wiped or zeroized, AlignedDeallocate() or\n  192     //!   UnalignedDeallocate() is called.\n  193     //! \\details AlignedDeallocate() is used if T_Align16 is true.\n  194     //!   UnalignedDeallocate() used if T_Align16 is false.\n  195     void deallocate(void *ptr, size_type size)\n  196     {\n  197         CRYPTOPP_ASSERT((ptr &amp;&amp; size) || !(ptr || size));\n  198         SecureWipeArray((pointer)ptr, size);\n  199 \n  200 #if CRYPTOPP_BOOL_ALIGN16\n  201         if (T_Align16 &amp;&amp; size*sizeof(T) &gt;= 16)\n  202             return AlignedDeallocate(ptr);\n  203 #endif\n  204 \n  205         UnalignedDeallocate(ptr);\n  206     }\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p>what advantages this class offer over char*.</p>\n</blockquote>\n\n<p>Well, the <code>SecBlock&lt;byte&gt;</code> is a class that manages a buffer. <code>char*</code> is just a type and there's not much to it. You have to managed the buffer that the <code>char*</code> is pointing to.</p>\n\n<p>You can use something like a <code>std::string</code>, but you will not get overflow detection (only <code>std::vector</code> is required to check for it) and you will not get zeroization.</p>\n\n<p>With that said, you can do both of these:</p>\n\n<ul>\n<li><code>typdef SecBlock&lt;char&gt; SecCharBlock</code></li>\n<li><code>typedef std::basic_string&lt;char, std::char_traits&lt;char&gt;, AllocatorWithCleanup&lt;char&gt; &gt; secure_string</code></li>\n</ul>\n\n<p>The second one is kind of cool. You can do it because <a href=\"http://www.cryptopp.com/docs/ref/secblock_8h_source.html\" rel=\"noreferrer\">secblock.h</a> provides a secure allocator that's compatible with the standard library. <code>SecBlock&lt;T&gt;</code> uses the secure allocator internally, and its called an <code>AllocatiorWithCleanup&lt;T&gt;</code>.</p>\n\n<p>OpenSSL's wiki page on <a href=\"https://wiki.openssl.org/index.php/EVP_Symmetric_Encryption_and_Decryption#C.2B.2B_Programs\" rel=\"noreferrer\">EVP Symmetric Encryption and Decryption | C++ Progams</a> uses a similar allocator to supply a <code>secure_string</code> class in their example. OpenSS:'s <code>zallocator</code> calls <a href=\"https://stackoverflow.com/q/26433772\"><code>OpenSSL_cleanse</code></a>.</p>\n\n<p>From <a href=\"https://www.cryptopp.com/docs/ref/secblock_8h_source.html#l00186\" rel=\"noreferrer\">Crypto++ 5.6.4 secblock.h</a>:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>  141 //! \\class AllocatorWithCleanup\n  142 //! \\brief Allocates a block of memory with cleanup\n  143 //! \\tparam T class or type\n  144 //! \\tparam T_Align16 boolean that determines whether allocations should be aligned on 16-byte boundaries\n  145 //! \\details If T_Align16 is true, then AllocatorWithCleanup calls AlignedAllocate()\n  146 //!    for memory allocations. If T_Align16 is false, then AllocatorWithCleanup() calls\n  147 //!    UnalignedAllocate() for memory allocations.\n  148 //! \\details Template parameter T_Align16 is effectively controlled by cryptlib.h and mirrors\n  149 //!    CRYPTOPP_BOOL_ALIGN16. CRYPTOPP_BOOL_ALIGN16 is often used as the template parameter.\n  150 template &lt;class T, bool T_Align16 = false&gt;\n  151 class AllocatorWithCleanup : public AllocatorBase&lt;T&gt;\n  152 {\n  153 public:\n  154     CRYPTOPP_INHERIT_ALLOCATOR_TYPES\n  155 \n  156     //! \\brief Allocates a block of memory\n  157     //! \\param ptr the size of the allocation\n  158     //! \\param size the size of the allocation, in elements\n  159     //! \\returns a memory block\n  160     //! \\throws InvalidArgument\n  161     //! \\details allocate() first checks the size of the request. If it is non-0\n  162     //!   and less than max_size(), then an attempt is made to fulfill the request\n  163     //!   using either AlignedAllocate() or UnalignedAllocate().\n  164     //! \\details AlignedAllocate() is used if T_Align16 is true.\n  165     //!   UnalignedAllocate() used if T_Align16 is false.\n  166     //! \\details This is the C++ *Placement New* operator. ptr is not used, and the function\n  167     //!   CRYPTOPP_ASSERTs in Debug builds if ptr is non-NULL.\n  168     //! \\sa CallNewHandler() for the methods used to recover from a failed\n  169     //!   allocation attempt.\n  170     //! \\note size is the count of elements, and not the number of bytes\n  171     pointer allocate(size_type size, const void *ptr = NULL)\n  172     {\n  173         CRYPTOPP_UNUSED(ptr); CRYPTOPP_ASSERT(ptr == NULL);\n  174         this-&gt;CheckSize(size);\n  175         if (size == 0)\n  176             return NULL;\n  177 \n  178 #if CRYPTOPP_BOOL_ALIGN16\n  179         // TODO: should this need the test 'size*sizeof(T) &gt;= 16'?\n  180         if (T_Align16 &amp;&amp; size*sizeof(T) &gt;= 16)\n  181             return (pointer)AlignedAllocate(size*sizeof(T));\n  182 #endif\n  183 \n  184         return (pointer)UnalignedAllocate(size*sizeof(T));\n  185     }\n  186     ...\n  241 };\n</code></pre>\n"}], "owner": {"reputation": 563, "user_id": 3494614, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/6d126b0db2c9c00ed1319d19231a386f?s=128&d=identicon&r=PG&f=1", "display_name": "user3494614", "link": "https://stackoverflow.com/users/3494614/user3494614"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1940, "favorite_count": 2, "answer_count": 1, "score": 5, "last_activity_date": 1475106823, "creation_date": 1475075235, "last_edit_date": 1475103616, "question_id": 39751312, "link": "https://stackoverflow.com/questions/39751312/advantages-of-secbyteblock-class-from-crypto", "title": "Advantages of SecByteBlock class from Crypto++", "body": "<p>I am using Crypto++ library to decrypt files with AES algorithm in CBC mode. I came across <code>SecByteBlock</code> class in <a href=\"https://www.cryptopp.com/wiki/CBC_mode\" rel=\"noreferrer\" title=\"sample code\">sample code</a> of AES which says</p>\n\n<blockquote>\n  <p>The key is declared on the stack using a SecByteBlock to ensure the sensitive material is zeroized.</p>\n</blockquote>\n\n<p>Can someone please explain me when the contents of <code>SecByteBlock</code> will get cleared and what advantages this class offer over <code>char*</code>.</p>\n\n<p>Thanks In Advance</p>\n"}, {"tags": ["c++", "multithreading", "performance", "openmp"], "comments": [{"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 1, "creation_date": 1475075459, "post_id": 39751294, "comment_id": 66798880, "body": "as a first step, always identify the bottleneck, which is... (left as an exercise)"}, {"owner": {"reputation": 2799, "user_id": 1747493, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Ro2p4.jpg?s=128&g=1", "display_name": "Harald", "link": "https://stackoverflow.com/users/1747493/harald"}, "edited": false, "score": 0, "creation_date": 1475076102, "post_id": 39751294, "comment_id": 66799337, "body": "Are you sure that this code is parallelizable? There are dependencies that could not be satisfied if executing the code in parallel."}, {"owner": {"reputation": 59, "user_id": 4090728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJV7p.jpg?s=128&g=1", "display_name": "phirus", "link": "https://stackoverflow.com/users/4090728/phirus"}, "edited": false, "score": 0, "creation_date": 1475076765, "post_id": 39751294, "comment_id": 66799785, "body": "Since I only use datapoints from a previous timestep (<code>data</code>) to calculate datapoint in a new timestep <code>newData</code> I don&#39;t sees any dependencies that break parallelization per se."}, {"owner": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "edited": false, "score": 1, "creation_date": 1475078971, "post_id": 39751294, "comment_id": 66801252, "body": "At first glance, the code looks fine. Just use a <code>schedule(static)</code> and get rid of the <code>critical</code>. And be sure to compile with maximum optimization enabled."}, {"owner": {"reputation": 59, "user_id": 4090728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJV7p.jpg?s=128&g=1", "display_name": "phirus", "link": "https://stackoverflow.com/users/4090728/phirus"}, "edited": false, "score": 0, "creation_date": 1475080283, "post_id": 39751294, "comment_id": 66802129, "body": "So the <code>critical</code> is not necessary? I was not sure about this. Thanks"}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1475146078, "post_id": 39751294, "comment_id": 66830727, "body": "Please note that you can easily fill <a href=\"http://www3.cs.fau.de/Lehre/ArchSup/WS2011/slides.pdf\" rel=\"nofollow noreferrer\">an entire lecture</a> with optimizing this seemingly simple code. In practice most of the time you should just cleanly express the algorithm to the compiler and be done. If you optimize further, the most important thing is to measure!"}], "answers": [{"tags": [], "owner": {"reputation": 63, "user_id": 6474414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Hk8J.jpg?s=128&g=1", "display_name": "HL65536", "link": "https://stackoverflow.com/users/6474414/hl65536"}, "is_accepted": true, "score": 2, "last_activity_date": 1475082203, "last_edit_date": 1495540101, "creation_date": 1475081587, "answer_id": 39753433, "question_id": 39751294, "link": "https://stackoverflow.com/questions/39751294/how-can-i-improve-the-perfomance-of-my-openmp-code/39753433#39753433", "title": "How can I improve the perfomance of my OpenMP code?", "body": "<ol>\n<li>Reading an array by multiple threads usually does no harm.</li>\n<li>You only need a critical section if multiple threads work on the exact same piece of data, here each thread accesses a different part of the array so you dont need it. Critical sections are very bad for performance so only use them if absolutely necessary. Often they can be replaced by atomic actions:\n<a href=\"https://stackoverflow.com/questions/7798010/openmp-atomic-vs-critical\">openMP, atomic vs critical?</a>\nLike a critical section, they dont make sense if each thread accesses different data.</li>\n<li>For the scheduler its best to test them each and measure the performance as predictions about performance are often wrong. Also try different chunk sizes.</li>\n<li>Some other things that might help:\n\n<ul>\n<li>Measuring performance is often interferred by other tasks on your pc so take multiple measurements and take their minimum (except if the input is different each time, then take the average and do more measurements).</li>\n<li>Do you really need double precision? Floats are a lot faster.</li>\n</ul></li>\n<li>edit: nowait is for <strong>multiple</strong> independent for loops: <a href=\"https://msdn.microsoft.com/en-us/library/ek5st0e3.aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/ek5st0e3.aspx</a></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 681, "user_id": 1858769, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U6PeN.jpg?s=128&g=1", "display_name": "Jason L.", "link": "https://stackoverflow.com/users/1858769/jason-l"}, "is_accepted": false, "score": 0, "last_activity_date": 1475087977, "creation_date": 1475087977, "answer_id": 39755278, "question_id": 39751294, "link": "https://stackoverflow.com/questions/39751294/how-can-i-improve-the-perfomance-of-my-openmp-code/39755278#39755278", "title": "How can I improve the perfomance of my OpenMP code?", "body": "<p>I assume you are trying to do some kind of convolution or median blur with 1D array. The short answer is: stick to default schedule strategy, and get rid of critical at all.  </p>\n\n<p>As I can tell, you are a quit newbie to parallelism, it's a little bit confusion to deal with OpenMP directives, like nowait/private/reduction/critical/atomic/single, etc. I think what you need is a well written textbook to clarify various concept. If you had a sound knowledge, a hour of learning OpenMP could be enough to deal with most daily programming. </p>\n"}, {"tags": [], "owner": {"reputation": 5108, "user_id": 1112378, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/19Kp9.png?s=128&g=1", "display_name": "Dominic Hofer", "link": "https://stackoverflow.com/users/1112378/dominic-hofer"}, "is_accepted": false, "score": 4, "last_activity_date": 1475141192, "creation_date": 1475141192, "answer_id": 39766486, "question_id": 39751294, "link": "https://stackoverflow.com/questions/39751294/how-can-i-improve-the-perfomance-of-my-openmp-code/39766486#39766486", "title": "How can I improve the perfomance of my OpenMP code?", "body": "<p>First of all, get rid of all unnecessary dependencies. <code>#pragma omp critical(assignment)</code> is not necessary because each index of <code>(*newData)</code> is only written to once per loop, so there's no race condition.</p>\n\n<p>Your code could now look like this:</p>\n\n<pre><code>#pragma omp parallel for\nfor (int i = 0; i &lt; range; i++)\n   (*newData)[i] = ((*data)[i-1] + (*data)[i] + (*data)[i+1]) / 3.0;\n</code></pre>\n\n<p>Now we're looking for bottlenecks. The list of potential candidates I came up with is this:</p>\n\n<ul>\n<li>Slow division</li>\n<li>Cache thrashing</li>\n<li>ILP (Instruction level parallelism)</li>\n<li>Memory bandwith limitations</li>\n<li>Hidden dependencies</li>\n</ul>\n\n<p>So let's analyze them further.</p>\n\n<p><strong>Slow division:</strong>\nIt takes some CPUs forever to calculate double/double. To know how long and what througput your CPU has, you have to look at its specs. Maybe replacing <code>/3.0</code> with <code>*0.3333..</code> might help, but maybe your compiler does this already. Using extended instruction sets (like SSE/AVX) you might shedule several divisions/multiplications at once.</p>\n\n<p><strong>Cache thrashing:</strong>\nBecause your CPU has to load/store one cache line at a time there could be conflicts. Imagine if thread 1 tries to write to (*newdata)[1] and thread 2 to (*newdata)[2] and they are on the same cache line. Now one of them has to wait for the other. You could resolve this with <code>#pragma omp parallel for schedule(static, 64)</code>.</p>\n\n<p><strong>ILP:</strong>\nCPUs can schedule multiple operations into a pipeline if the operations are independent. For this to happen you have to unroll your loop. This could look like this:</p>\n\n<pre><code>assert(range % 4 == 0);\n#pragma omp parallel for\nfor (int i = 0; i &lt; range/4; i++) {\n   (*newData)[i*4+0] = ((*data)[i*4-1] + (*data)[i*4+0] + (*data)[i*4+1]) / 3.0;\n   (*newData)[i*4+1] = ((*data)[i*4+0] + (*data)[i*4+1] + (*data)[i*4+2]) / 3.0;\n   (*newData)[i*4+2] = ((*data)[i*4+1] + (*data)[i*4+2] + (*data)[i*4+3]) / 3.0;\n   (*newData)[i*4+3] = ((*data)[i*4+2] + (*data)[i*4+3] + (*data)[i*4+4]) / 3.0;\n}\n</code></pre>\n\n<p><strong>Memory bandwith limitations:</strong>\nFor your very simple loop think about this. How much memory do you have to load and how long will your CPU be busy processing it. You're loading about 1 cache line and computing some dereferences, some pointer addition, two additions and one division. Which limit you hit depends on your CPU specs.\nNow consider cache locality. Can you modify your code to make better use of the cache? If one thread gets i=3 in one loop-iteration, and i=7 in the next, you have to reload 3 (*data)'s. But if you would go from i=3 to i=4, you might not have to load anything, because (*data)[i+1] was in the cacheline previously loaded. You save some RAM bandwith. To make use of this, unroll the loop. Also using float instead of double increases this chance.</p>\n\n<p><strong>Hidden dependencies:</strong>\nNow this part I personally find very tricky. Sometimes your compiler isn't shure it can reuse some data, because it doesn't know it hasn't changed. Using <code>const</code> helps the compiler. But sometimes you need a <code>restrict</code> to give the compiler the right hint. But I don't understand this well enough to explain it.</p>\n\n<p>So here is what I would try:</p>\n\n<pre><code>const double ONETHIRD = 1.0 / 3.0;\nassert(range % 4 == 0);\n#pragma omp parallel for schedule(static, 1024)\nfor (int i = 0; i &lt; range/4; i++) {\n   (*newData)[i*4+0] = ((*data)[i*4-1] + (*data)[i*4+0] + (*data)[i*4+1]) * ONETHIRD;\n   (*newData)[i*4+1] = ((*data)[i*4+0] + (*data)[i*4+1] + (*data)[i*4+2]) * ONETHIRD;\n   (*newData)[i*4+2] = ((*data)[i*4+1] + (*data)[i*4+2] + (*data)[i*4+3]) * ONETHIRD;\n   (*newData)[i*4+3] = ((*data)[i*4+2] + (*data)[i*4+3] + (*data)[i*4+4]) * ONETHIRD;\n}\n</code></pre>\n\n<p>And then benchmark. Benchmark some more, and benchmark some more. Only benchmarks will show you which tricks help.</p>\n\n<p>PS: One more thing to consider. If you see your program hitting the memory bandwith hard. You could consider changing the algorithm. Maybe fuse two steps into one. Like going from\n<code>b[i] := (a[i-1] + a[i] + a[i+1]) / 3.0</code>\nto \n<code>d[i] := (n[i-1] + n[i] + n[i+1]) / 3.0 = (a[i-2] + 2.0 * a[i-1] + 3.0 * a[i] + 2.0 * a[i+1] + a[i+1]) / 3.0</code>. I think the reason for this you will find out yourself.</p>\n\n<p>Have fun optimizing ;-)</p>\n"}], "owner": {"reputation": 59, "user_id": 4090728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJV7p.jpg?s=128&g=1", "display_name": "phirus", "link": "https://stackoverflow.com/users/4090728/phirus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 559, "favorite_count": 0, "accepted_answer_id": 39753433, "answer_count": 3, "score": 2, "last_activity_date": 1475141192, "creation_date": 1475075176, "question_id": 39751294, "link": "https://stackoverflow.com/questions/39751294/how-can-i-improve-the-perfomance-of-my-openmp-code", "title": "How can I improve the perfomance of my OpenMP code?", "body": "<p>I am currently trying to improve parallel performance on my Code and I am still new to OpenMP. I have to iterate over a large container, in each iteration reading from multiple entries and writing a result to a single entry. Below is a very minmal Code example of what I am trying to do. </p>\n\n<p><code>data</code> is a pointer to an array, where a lot of datapoints are stored. Before the parallel region I create an Array <code>newData</code>, so can use <code>data</code> as read-only and <code>newData</code> as write-only, afterwards I throw the old <code>data</code> away and use <code>newData</code>for further calculations.\nTo my understanding <code>data</code> and <code>newData</code>are shared between threads and everything declared inside the parallel region is private.\nCan reading from <code>data</code>by multiple threads cause performance issues?</p>\n\n<p>I am using <code>#critical</code> for assigning a new value to an element of <code>newData</code> to avoid race conditions. Is this necessary, since I access every element of <code>newData</code>only once and never by multiple threads?</p>\n\n<p>Also I am not sure about scheduling. Do I have to specify if I want a <code>static</code> or <code>dynamic</code> schedule? Can I use <code>nowait</code> since all threads are idependent of each other?</p>\n\n<pre><code>array *newData = new array;\n\nomp_set_num_threads (threads);\n\n#pragma omp parallel\n{\n    #pragma omp for\n    for (int i = 0;  i &lt; range; i++)\n    {\n        double middle = (*data)[i];\n        double previous = (*data)[i-1];\n        double next = (*data)[i+1];\n\n        double new_value = (previous + middle + next) / 3.0;\n        #pragma omp critical(assignment)\n        (*newData)[i] = new_value;\n    }\n}\n\ndelete data;\ndata = newData;\n</code></pre>\n\n<p>I am aware that in the first and last iteration <code>previous</code> and <code>next</code> can not be read from <code>data</code>, in the real code this is taken care of but for this minimal example you get the idea of reading multiple times from <code>data</code>.</p>\n"}, {"tags": ["c++", "wxwidgets"], "comments": [{"owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 0, "creation_date": 1475075634, "post_id": 39751118, "comment_id": 66798997, "body": "what do you mean by saying &quot;(building with 2008)&quot;? Also, can you reproduce it with the dnd sample?"}, {"owner": {"reputation": 139, "user_id": 3218826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b0de9be316b48a077f1964861cd8fa2?s=128&d=identicon&r=PG&f=1", "display_name": "mindo", "link": "https://stackoverflow.com/users/3218826/mindo"}, "reply_to_user": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 0, "creation_date": 1475076085, "post_id": 39751118, "comment_id": 66799320, "body": "platform toolset is set to &quot;Visual Studio 2008 (v90)&quot;; dnd appears to be working but then again I can not drag files from external window like explorer, I guess I will try to use this method if current one will not work out."}, {"owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 0, "creation_date": 1475080782, "post_id": 39751118, "comment_id": 66802444, "body": "can you try to compile and run the sample and the application with the same run-time/version of MSVC?"}, {"owner": {"reputation": 139, "user_id": 3218826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b0de9be316b48a077f1964861cd8fa2?s=128&d=identicon&r=PG&f=1", "display_name": "mindo", "link": "https://stackoverflow.com/users/3218826/mindo"}, "reply_to_user": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 0, "creation_date": 1475159203, "post_id": 39751118, "comment_id": 66840355, "body": "I don&#39;t see how platform toolset has anything to do with the issue. However I am now using modified dnd version and it works, it shows weird move icon and I have no idea how to change it. Also drag and drop seems to be not working when app is run with debuger or with admin rights, probably some permission issues here."}, {"owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 0, "creation_date": 1475174904, "post_id": 39751118, "comment_id": 66849987, "body": "then all you need to do is find what is different between the sample and your code if the sample started working for you."}, {"owner": {"reputation": 139, "user_id": 3218826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b0de9be316b48a077f1964861cd8fa2?s=128&d=identicon&r=PG&f=1", "display_name": "mindo", "link": "https://stackoverflow.com/users/3218826/mindo"}, "reply_to_user": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 0, "creation_date": 1475219724, "post_id": 39751118, "comment_id": 66865227, "body": "Well sample is using different method - <code>SetDropTarget</code> with <code>wxFileDropTarget</code>. It is working for me as well, but still question is why <code>DragAcceptFiles</code> method does not work."}, {"owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 0, "creation_date": 1475236062, "post_id": 39751118, "comment_id": 66874590, "body": "Can you try DragAcceptFiles() in the sample?"}, {"owner": {"reputation": 139, "user_id": 3218826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b0de9be316b48a077f1964861cd8fa2?s=128&d=identicon&r=PG&f=1", "display_name": "mindo", "link": "https://stackoverflow.com/users/3218826/mindo"}, "reply_to_user": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 0, "creation_date": 1475238803, "post_id": 39751118, "comment_id": 66876197, "body": "Where is the sample located? I don&#39;t see any sample using <code>DragAcceptFiles</code> in 3.0.2 or 3.0.1"}, {"owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 0, "creation_date": 1475261040, "post_id": 39751118, "comment_id": 66888952, "body": "it is a dnd sample that located in the &lt;wx_build&gt;/samples/dnd directory. Can you modify it to use the function in question, re-compile and re-run?"}], "owner": {"reputation": 139, "user_id": 3218826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b0de9be316b48a077f1964861cd8fa2?s=128&d=identicon&r=PG&f=1", "display_name": "mindo", "link": "https://stackoverflow.com/users/3218826/mindo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 211, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1475074704, "creation_date": 1475074704, "question_id": 39751118, "link": "https://stackoverflow.com/questions/39751118/drag-and-drop-wxevt-drop-files-event-not-received", "title": "Drag and drop, wxEVT_DROP_FILES event not received", "body": "<p>Using wxWidgets wxWidgets-3.0.2 and MSVC 2012 (building with 2008)</p>\n\n<p>I try to add file drag n drop event on wxListView control. When I drag file on control I can see icon change, but when it is released nothing happens, my event handler function is never called.</p>\n\n<p>Code:</p>\n\n<pre><code>m_listAllStrings = new wxListView(this, ID_LV_ALLSTRINGS);\nm_listAllStrings-&gt;DragAcceptFiles(true);\nm_listAllStrings-&gt;Bind(wxEVT_DROP_FILES, &amp;MainFrame::OnDropFiles, this);\n// also tried these\n// m_listAllStrings-&gt;Connect(wxEVT_DROP_FILES, wxDropFilesEventHandler(MainFrame::OnDropFiles), NULL, this);\n// Connect(wxEVT_DROP_FILES, wxDropFilesEventHandler(MainFrame::OnDropFiles)); \n\n// even handler function\nvoid MainFrame::OnDropFiles(wxDropFilesEvent&amp; event)\n{\n    // I put breakpoint here, it never enters\n    if(event.GetNumberOfFiles() &gt; 0)\n    {\n         // ...\n    }\n}\n</code></pre>\n\n<p>I also tried doing this on button and it did not work, though click event handling works:</p>\n\n<pre><code> Connect(wxEVT_COMMAND_BUTTON_CLICKED, wxCommandEventHandler(MainFrame::OnBtClick));\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-2010", "mfc"], "comments": [{"owner": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "edited": false, "score": 0, "creation_date": 1475180319, "post_id": 39751116, "comment_id": 66852823, "body": "I&#39;m not sure, but I recall something like this back then. Have you applied the service pack 1?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1492687833, "post_id": 39751116, "comment_id": 74089629, "body": "You should write a short answer and accept it, instead of editing the answer into your question. This makes it easier for future visitors to discover, that a question has been answered."}], "answers": [{"comments": [{"owner": {"reputation": 405, "user_id": 3722288, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9agsZ.png?s=128&g=1", "display_name": "Mike Siomkin", "link": "https://stackoverflow.com/users/3722288/mike-siomkin"}, "edited": false, "score": 0, "creation_date": 1475078343, "post_id": 39752277, "comment_id": 66800823, "body": "No, it is set to v100!"}, {"owner": {"reputation": 444, "user_id": 6362688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/533679b789399d984a2f6c4a6066e254?s=128&d=identicon&r=PG&f=1", "display_name": "GeorgeT", "link": "https://stackoverflow.com/users/6362688/georget"}, "reply_to_user": {"reputation": 405, "user_id": 3722288, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9agsZ.png?s=128&g=1", "display_name": "Mike Siomkin", "link": "https://stackoverflow.com/users/3722288/mike-siomkin"}, "edited": false, "score": 0, "creation_date": 1475079564, "post_id": 39752277, "comment_id": 66801623, "body": "Check you sources if they contain a #pragma directive concerning &quot;manifestdependency&quot;"}, {"owner": {"reputation": 405, "user_id": 3722288, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9agsZ.png?s=128&g=1", "display_name": "Mike Siomkin", "link": "https://stackoverflow.com/users/3722288/mike-siomkin"}, "edited": false, "score": 0, "creation_date": 1475080282, "post_id": 39752277, "comment_id": 66802127, "body": "stdafx.h contains: #pragma comment(linker,&quot;/manifestdependency:\\&quot;type=&#39;win32&#39; name=&#39;Microsoft.Windows.Common-Controls&#39; version=&#39;6.0.0.0&#39; processorArchitecture=&#39;x86&#39; publicKeyToken=&#39;6595b64144ccf1df&#39; language=&#39;*&#39;\\&quot;&quot;) No more entries of &quot;manifestdependency&quot;."}, {"owner": {"reputation": 444, "user_id": 6362688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/533679b789399d984a2f6c4a6066e254?s=128&d=identicon&r=PG&f=1", "display_name": "GeorgeT", "link": "https://stackoverflow.com/users/6362688/georget"}, "reply_to_user": {"reputation": 405, "user_id": 3722288, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9agsZ.png?s=128&g=1", "display_name": "Mike Siomkin", "link": "https://stackoverflow.com/users/3722288/mike-siomkin"}, "edited": false, "score": 0, "creation_date": 1475081120, "post_id": 39752277, "comment_id": 66802656, "body": "Change &quot;/manifestdependency:\\&quot;type= to &quot;\\&quot;/manifestdependency:type= and rebuild."}, {"owner": {"reputation": 405, "user_id": 3722288, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9agsZ.png?s=128&g=1", "display_name": "Mike Siomkin", "link": "https://stackoverflow.com/users/3722288/mike-siomkin"}, "edited": false, "score": 0, "creation_date": 1475082232, "post_id": 39752277, "comment_id": 66803313, "body": "Didn&#39;t help. I still have name=&#39;Microsoft.VC90.CRT&#39; version=&#39;9.0.21022.8&#39; in the manifest :( Very odd thing. I don&#39;t have the slitest idea where MSVS can take the wrong version from. It seems there are no mentionings of crt 9.x in the project. And I didn&#39;t even have MSVS 2008 installed."}, {"owner": {"reputation": 444, "user_id": 6362688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/533679b789399d984a2f6c4a6066e254?s=128&d=identicon&r=PG&f=1", "display_name": "GeorgeT", "link": "https://stackoverflow.com/users/6362688/georget"}, "reply_to_user": {"reputation": 405, "user_id": 3722288, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9agsZ.png?s=128&g=1", "display_name": "Mike Siomkin", "link": "https://stackoverflow.com/users/3722288/mike-siomkin"}, "edited": false, "score": 0, "creation_date": 1475084870, "post_id": 39752277, "comment_id": 66804744, "body": "Check for *.manifest files in your build area. Delete them and rebuild. Are they recreated ? Also check for RT_MANIFEST in your resource files - what manifest files are they referencing ?   If all seem proper and this project was converted from VS2008 to VS2010, the only thing I can suggest right now is to create a new VS2010 project from scratch, add all the existing sources to the newly created and see what happens."}, {"owner": {"reputation": 405, "user_id": 3722288, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9agsZ.png?s=128&g=1", "display_name": "Mike Siomkin", "link": "https://stackoverflow.com/users/3722288/mike-siomkin"}, "edited": false, "score": 0, "creation_date": 1475117854, "post_id": 39752277, "comment_id": 66816928, "body": "Thank you for your suggestions! I figured it out. It was my fault after all :( I had a reference to libcurl.lib which had a reference to openssl libs compiled in MSVS 2008... After rebuilding libcurl with the proper versions of openssl the reference to crt 9.0 disappeared from the manifest file. (I tested deploying of my app on virtual machine which didn&#39;t have internet connection, so I didn&#39;t notice that web requests probably didn&#39;t work without vcredist_x86.exe for MSVS 2008 installed.)"}], "tags": [], "owner": {"reputation": 444, "user_id": 6362688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/533679b789399d984a2f6c4a6066e254?s=128&d=identicon&r=PG&f=1", "display_name": "GeorgeT", "link": "https://stackoverflow.com/users/6362688/georget"}, "is_accepted": false, "score": 0, "last_activity_date": 1475077964, "creation_date": 1475077964, "answer_id": 39752277, "question_id": 39751116, "link": "https://stackoverflow.com/questions/39751116/why-does-msvs-2010-mfc-project-depend-on-vcredist-x86-exe-for-msvs-2008/39752277#39752277", "title": "Why does MSVS 2010 MFC project depend on vcredist_x86.exe for MSVS 2008?", "body": "<p>Probably this happens because of the platform toolset in project properties.</p>\n\n<p>Change it to v100 (I suppose now it is set to v90), re-activate manifest generation and embedding (Manifest Tool\\Input and Output) and rebuild your project.</p>\n"}], "owner": {"reputation": 405, "user_id": 3722288, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9agsZ.png?s=128&g=1", "display_name": "Mike Siomkin", "link": "https://stackoverflow.com/users/3722288/mike-siomkin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1475118436, "creation_date": 1475074696, "last_edit_date": 1475118436, "question_id": 39751116, "link": "https://stackoverflow.com/questions/39751116/why-does-msvs-2010-mfc-project-depend-on-vcredist-x86-exe-for-msvs-2008", "title": "Why does MSVS 2010 MFC project depend on vcredist_x86.exe for MSVS 2008?", "body": "<p>I have an MFC project in MSVS 2010. When I compile it, MSVS generates manifest file that contains the following lines:</p>\n\n<pre><code>&lt;assemblyIdentity publicKeyToken=\"1fc8b3b9a1e18e3b\"\n    processorArchitecture=\"x86\" version=\"9.0.21022.8\"\n    name=\"Microsoft.VC90.CRT\" type=\"win32\"/&gt;\n</code></pre>\n\n<p>As a result, I get a binary that depends on both vcredist_x86.exe for MSVS 2008 and vcredist_x86.exe for MSVS 2010, though it actually uses only vcredist_x86.exe for MSVS 2010!</p>\n\n<p>I tried to switch off manifest generation in project properties. After it my app started to work with only vcredist_x86.exe for MSVS 2010 installed. But some controls (especially comboboxes) broke and began to be displayed incorrectly. I guess this happens because windows doesn't have the following information from manifest any more:</p>\n\n<pre><code>&lt;assemblyIdentity language=\"*\" publicKeyToken=\"6595b64144ccf1df\"\n    processorArchitecture=\"x86\" version=\"6.0.0.0\"\n    name=\"Microsoft.Windows.Common-Controls\" type=\"win32\"/&gt;\n</code></pre>\n\n<ol>\n<li>Why does MSVS write a wrong version of CRT in the manifest file?</li>\n<li>How to fix the problem/make MSVS write the correct version of CRT in the manifest file?</li>\n</ol>\n\n<hr>\n\n<p>I figured it out. I had a reference to libcurl.lib which had a reference to openssl libs compiled in MSVS 2008... After rebuilding libcurl with the proper versions of openssl the reference to crt 9.0 disappeared from the manifest file.</p>\n"}, {"tags": ["c++", "chrono"], "answers": [{"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 1, "last_activity_date": 1475077394, "creation_date": 1475077394, "answer_id": 39752095, "question_id": 39751078, "link": "https://stackoverflow.com/questions/39751078/create-a-time-point-at-secondsmax-results-in-negative-value/39752095#39752095", "title": "Create a time_point at seconds::max results in negative value", "body": "<p>Adding a few more diagnostics shows the issue (on my system):</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;chrono&gt;\nusing namespace std;\nusing namespace std::chrono;\n\nint main() {\n    auto tp1 = system_clock::time_point( seconds::zero() );\n    auto tp2 = system_clock::time_point( seconds::max() );\n\n    using type = decltype(system_clock::time_point(seconds::zero()));\n    cout &lt;&lt; type::duration::max().count() &lt;&lt; endl;\n    cout &lt;&lt; type::duration::period::den &lt;&lt; endl;\n    cout &lt;&lt; type::duration::period::num &lt;&lt; endl;\n\n    cout &lt;&lt; seconds::max().count() &lt;&lt; endl;\n    cout &lt;&lt; milliseconds::max().count() &lt;&lt; endl;\n    cout &lt;&lt; \"tp1: \" &lt;&lt; duration_cast&lt;seconds&gt;(tp1.time_since_epoch()).count() &lt;&lt; endl;\n    cout &lt;&lt; \"tp2: \" &lt;&lt; duration_cast&lt;seconds&gt;(tp2.time_since_epoch()).count() &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>For me, the denominator value is 1,000,000 for the <code>system_clock</code>'s <code>time_point</code>. Thus max seconds is going to overflow it when converted up.</p>\n"}, {"comments": [{"owner": {"reputation": 1085, "user_id": 1029418, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/0846bbdb1fb218be9122185301dcc862?s=128&d=identicon&r=PG", "display_name": "ryan0270", "link": "https://stackoverflow.com/users/1029418/ryan0270"}, "edited": false, "score": 0, "creation_date": 1475079138, "post_id": 39752497, "comment_id": 66801357, "body": "doh, I should have known to look for time_point::max(). Thanks for the test program too; I didn&#39;t bother to think that time_point would internally be using milliseconds (or finer)."}], "tags": [], "owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "is_accepted": true, "score": 3, "last_activity_date": 1475078615, "creation_date": 1475078615, "answer_id": 39752497, "question_id": 39751078, "link": "https://stackoverflow.com/questions/39751078/create-a-time-point-at-secondsmax-results-in-negative-value/39752497#39752497", "title": "Create a time_point at seconds::max results in negative value", "body": "<p>Here's a little quick&amp;dirty program to explore the limits of <code>system_clock</code> <code>time_point</code>s at different precisions:</p>\n\n<pre><code>#include &lt;chrono&gt;\n#include &lt;iostream&gt;\n\nusing days = std::chrono::duration\n    &lt;int, std::ratio_multiply&lt;std::ratio&lt;24&gt;, std::chrono::hours::period&gt;&gt;;\nusing years = std::chrono::duration\n    &lt;double, std::ratio_multiply&lt;std::ratio&lt;146097, 400&gt;, days::period&gt;&gt;;\n\ntemplate &lt;class Rep, class Period&gt;\nvoid\nmax_limit(std::chrono::duration&lt;Rep, Period&gt; d)\n{\n    std::cout &lt;&lt; \"[\" &lt;&lt; Period::num &lt;&lt; '/' &lt;&lt; Period::den &lt;&lt; \"] \";\n    std::cout &lt;&lt; years{d.max()}.count() + 1970 &lt;&lt; '\\n';\n}\n\nint\nmain()\n{\n    using namespace std;\n    using namespace std::chrono;\n    max_limit(nanoseconds{});\n    max_limit(microseconds{});\n    max_limit(milliseconds{});\n    max_limit(seconds{});\n}\n</code></pre>\n\n<p>This will output the year (in floating point) that <code>time_point&lt;system_clock, D&gt;</code> will max out at for any duration <code>D</code>.  This program outputs:</p>\n\n<pre><code>[1/1000000000] 2262.28\n[1/1000000] 294247\n[1/1000] 2.92279e+08\n[1/1] 2.92277e+11\n</code></pre>\n\n<p>Meaning <code>system_clock</code> based on nanoseconds overflows in the year 2262.  If you coarsen that to microseconds, you overflow in the year 294,247.  And so on.</p>\n\n<p>Once you coarsen to seconds, the max goes out to a ridiculous range.  But when you convert that back to <code>system_clock::time_point</code>, which is at least as fine as microseconds, and perhaps as fine as nanoseconds (depending on your platform), you just blow it out of the water.</p>\n\n<p>To solve your problem I recommend:</p>\n\n<pre><code>auto M = system_clock::time_point::max();\n</code></pre>\n"}], "owner": {"reputation": 1085, "user_id": 1029418, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/0846bbdb1fb218be9122185301dcc862?s=128&d=identicon&r=PG", "display_name": "ryan0270", "link": "https://stackoverflow.com/users/1029418/ryan0270"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1828, "favorite_count": 0, "accepted_answer_id": 39752497, "answer_count": 2, "score": 4, "last_activity_date": 1475078615, "creation_date": 1475074598, "question_id": 39751078, "link": "https://stackoverflow.com/questions/39751078/create-a-time-point-at-secondsmax-results-in-negative-value", "title": "Create a time_point at seconds::max results in negative value", "body": "<p>I'm trying to use a time_point to effectively represent forever by setting it to seconds::max which, I believe, should represent that much time since epoch. When doing this, though, I get -1 as the time since epoch in the resulting time_point. What am I not understanding?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;chrono&gt;\nusing namespace std;\nusing namespace std::chrono;\n\nint main() {\n    auto tp1 = system_clock::time_point( seconds::zero() );\n    auto tp2 = system_clock::time_point( seconds::max() );\n    cout &lt;&lt; \"tp1: \" &lt;&lt; duration_cast&lt;seconds&gt;(tp1.time_since_epoch()).count() &lt;&lt; endl;\n    cout &lt;&lt; \"tp2: \" &lt;&lt; duration_cast&lt;seconds&gt;(tp2.time_since_epoch()).count() &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>The output running that is:</p>\n\n<pre><code>tp1: 0\ntp2: -1\n</code></pre>\n"}, {"tags": ["c++", "arrays", "binary", "hex", "octal"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1475074273, "post_id": 39750932, "comment_id": 66798009, "body": "Can you show an example of the input and expected output?"}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1475074728, "post_id": 39750932, "comment_id": 66798351, "body": "Can you tell us what is the problem with your current code?"}, {"owner": {"reputation": 35, "user_id": 6872742, "user_type": "registered", "profile_image": "https://graph.facebook.com/1087026048012120/picture?type=large", "display_name": "GaBoKaS", "link": "https://stackoverflow.com/users/6872742/gabokas"}, "edited": false, "score": 0, "creation_date": 1475075028, "post_id": 39750932, "comment_id": 66798578, "body": "okey for example i want that if you type &quot;3.124566&quot; if would split it into 2 arrays - 3 and 124566 and get theyre length first one - 1 and second one 6"}, {"owner": {"reputation": 35, "user_id": 6872742, "user_type": "registered", "profile_image": "https://graph.facebook.com/1087026048012120/picture?type=large", "display_name": "GaBoKaS", "link": "https://stackoverflow.com/users/6872742/gabokas"}, "edited": false, "score": 0, "creation_date": 1475075116, "post_id": 39750932, "comment_id": 66798631, "body": "problem with current code is that it does not seperate those two arrays, and length of first array is both arrays length compined + &#39;.&#39; counts too"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1475075761, "post_id": 39750932, "comment_id": 66799077, "body": "Reduce the switch statement, maybe replace.  Use <code>reader[i] - &#39;0&#39;</code> or <code>toupper(reader[i]) - &#39;A&#39;;</code>."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1475075818, "post_id": 39750932, "comment_id": 66799118, "body": "If you used <code>std::string</code>, then you could use one of its many search methods."}, {"owner": {"reputation": 35, "user_id": 6872742, "user_type": "registered", "profile_image": "https://graph.facebook.com/1087026048012120/picture?type=large", "display_name": "GaBoKaS", "link": "https://stackoverflow.com/users/6872742/gabokas"}, "edited": false, "score": 0, "creation_date": 1475075954, "post_id": 39750932, "comment_id": 66799215, "body": "no, that switch statement is for converting hex symbols to int"}, {"owner": {"reputation": 35, "user_id": 6872742, "user_type": "registered", "profile_image": "https://graph.facebook.com/1087026048012120/picture?type=large", "display_name": "GaBoKaS", "link": "https://stackoverflow.com/users/6872742/gabokas"}, "edited": false, "score": 0, "creation_date": 1475075981, "post_id": 39750932, "comment_id": 66799236, "body": "thx i will try it"}, {"owner": {"reputation": 1084, "user_id": 4443423, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OwXBe.jpg?s=128&g=1", "display_name": "Maikel", "link": "https://stackoverflow.com/users/4443423/maikel"}, "edited": false, "score": 0, "creation_date": 1475076218, "post_id": 39750932, "comment_id": 66799424, "body": "Is this some homework or just for fun? I mean, what are you allowed to use? Do you have to handle invalid input?"}, {"owner": {"reputation": 35, "user_id": 6872742, "user_type": "registered", "profile_image": "https://graph.facebook.com/1087026048012120/picture?type=large", "display_name": "GaBoKaS", "link": "https://stackoverflow.com/users/6872742/gabokas"}, "edited": false, "score": 0, "creation_date": 1475076352, "post_id": 39750932, "comment_id": 66799514, "body": "its homework, but im alowed to use anything, but i dont know a lot about c++"}], "answers": [{"tags": [], "owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "is_accepted": true, "score": 0, "last_activity_date": 1475076764, "creation_date": 1475076764, "answer_id": 39751879, "question_id": 39750932, "link": "https://stackoverflow.com/questions/39750932/how-to-count-symbols-before-symbol-and-split-entire-char-into-2-arrays-in/39751879#39751879", "title": "How to count symbols before &#39;.&#39; symbol and split entire char[] into 2 arrays in c++?", "body": "<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nint main()\n{\n    std::string str = \"3423432432.32445654576654578978905\";\n    std::string strInt;\n    std::string strDec;\n\n    int i = 0;\n\n    while('.' != str[i])\n        strInt += str[i++];\n\n    for(++i; i &lt; str.length(); i++)\n        strDec += str[i];\n\n\n    std::cout &lt;&lt; strInt &lt;&lt; std::endl &lt;&lt; strDec &lt;&lt; std::endl;\n\n    // now you have the integer part and the decimal part as strings so convert each of them to int\n\n    std::cout &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 6872742, "user_type": "registered", "profile_image": "https://graph.facebook.com/1087026048012120/picture?type=large", "display_name": "GaBoKaS", "link": "https://stackoverflow.com/users/6872742/gabokas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "closed_date": 1475076506, "accepted_answer_id": 39751879, "answer_count": 1, "score": -4, "last_activity_date": 1475076764, "creation_date": 1475074187, "last_edit_date": 1475074629, "question_id": 39750932, "link": "https://stackoverflow.com/questions/39750932/how-to-count-symbols-before-symbol-and-split-entire-char-into-2-arrays-in", "closed_reason": "Not suitable for this site", "title": "How to count symbols before &#39;.&#39; symbol and split entire char[] into 2 arrays in c++?", "body": "<p>I want my function to read one char[] and split it into 2 arrays. Both arrays would be one big number, first array is for that number int value and second one is for double values. I must use 2 arrays because this number can be binary, decimal, octal or hex.</p>\n\n<pre><code>void Read(int place[], int &amp;size, int &amp;type, int placedot[], int &amp;sizedot, int &amp;typedot) \n{\n    char reader[limit];\n\n    cin &gt;&gt; reader;\n\n    size = 1;\n\n    while (reader[size] == '.' || size != strlen(reader)) \n    {\n        size++;\n        cout &lt;&lt; \"LOL\";\n    }\n\n    cin &gt;&gt; type;\n    cout &lt;&lt; size;\n\n    typedot = type;\n\n    for (int i = 0; i&lt;size; i++) \n    {\n        switch (reader[i]) \n        {\n            case '0': place[i] = 0; break;\n            case '1': place[i] = 1; break;\n            case '2': place[i] = 2; break;\n            case '3': place[i] = 3; break;\n            case '4': place[i] = 4; break;\n            case '5': place[i] = 5; break;\n            case '6': place[i] = 6; break;\n            case '7': place[i] = 7; break;\n            case '8': place[i] = 8; break;\n            case '9': place[i] = 9; break;\n            case 'A': place[i] = 10; break;\n            case 'B': place[i] = 11; break;\n            case 'C': place[i] = 12; break;\n            case 'D': place[i] = 13; break;\n            case 'E': place[i] = 14; break;\n            case 'F': place[i] = 15; break;\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "instantiation"], "comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1475073949, "post_id": 39750745, "comment_id": 66797745, "body": "Sanity check: the code (1) is valid. As to why: Imagine writing a copy constructor for <code>std::vector&lt;T&gt;</code> if you had to disable it for non-copyable <code>T</code>s. Dtto for <code>push_back(const T&amp;)</code> etc."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1475074041, "post_id": 39750745, "comment_id": 66797821, "body": "@Angew I imagined that is managed by disabling the methods with SFINAE."}], "answers": [{"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 6, "last_activity_date": 1475107310, "last_edit_date": 1475107310, "creation_date": 1475074058, "answer_id": 39750892, "question_id": 39750745, "link": "https://stackoverflow.com/questions/39750745/instantiation-of-ill-formed-non-templated-method-of-a-templated-class/39750892#39750892", "title": "Instantiation of ill-formed non-templated method of a templated class", "body": "<p>The code is valid.</p>\n\n<p>This feature was designed to permit things like <code>std::vector</code> having an <code>operator&lt;</code> or <code>operator==</code> written simply.</p>\n\n<p>This operator would try to call <code>&lt;</code> or <code>==</code> on its elements, blindly.  If it was invalid, once you called <code>&lt;</code> or <code>==</code> on the wrapping <code>vector</code> it would fail to compile.</p>\n\n<p>But if you never did, the <code>vector</code> would work fine.</p>\n\n<p>Modern C++ would advise using SFINAE conditional method techniques or C++20 Requires clauses, so <code>vector</code> would only <em>have</em> a <code>==</code> or <code>&lt;</code> if it was a valid operation.  None of these techniques where mature when <code>vector</code> was designed, and the ability to have methods of template classes that where not valid was an important feature.</p>\n\n<p>On top of early-failure on invalid code, having <code>==</code> conditionally exist permits wrapping code to detect if <code>==</code> is safe to call: the ancient technique does not permit this introspection.  I have had to write custom traits that specialize on the standard container templates to detect if <code>&lt;</code> is safe to call in at least one case.</p>\n"}], "owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 39750892, "answer_count": 1, "score": 3, "last_activity_date": 1475107310, "creation_date": 1475073745, "last_edit_date": 1495541703, "question_id": 39750745, "link": "https://stackoverflow.com/questions/39750745/instantiation-of-ill-formed-non-templated-method-of-a-templated-class", "title": "Instantiation of ill-formed non-templated method of a templated class", "body": "<p>I was researching on <a href=\"https://stackoverflow.com/questions/7767626/two-phase-lookup-explanation-needed\">two phase name lookup</a>. A very logical explanation shows that <a href=\"https://stackoverflow.com/a/12561834/2805305\">one of the main reasoning</a> for it is that follows the C++ philosophy of <strong>catching errors as early as possible</strong>.</p>\n\n<p>My question is why isn't this philosophy followed with non-templated methods. Instead of checking when and if the method is called, why not check all non-templated methods in phase 2 when the templated class is instantiated?</p>\n\n<p>E.g.:</p>\n\n<pre><code>template &lt;class T&gt;\nstruct X {\n\n  auto foo() // non-templated (important)\n  {\n    T t{};\n    return t.non_existing();\n  }\n};\n\nint main()\n{\n  X&lt;int&gt; x; // (1) this compiles OK.\n\n  // somewhere is a galaxy far far away,\n  // maybe deep inside some unrelated code\n  x.foo();  // (2) the error is here\n}\n</code></pre>\n\n<p>If you never write (2) the program compiles and runs without any problems, although <code>foo</code> is illegal for the instantiated <code>X&lt;int&gt;</code>.</p>\n\n<p>I think that the line (1) should generate error, regardless if you ever call <code>foo</code> or not.</p>\n\n<p>When writing templated classes, this can let slip through the cracks an error until you finally call that problematic method (2), instead of getting the error when you instantiate the templated class (1).</p>\n\n<p>Also sanity check: is the code valid if I instantiate <code>X&lt;int&gt;</code> (1) but never call <code>X&lt;int&gt;::foo</code> (2)? Or is it something like \"ill-formed, no diagnostics required\"? If the latter, then this is an even more reason to catch the error earlier.</p>\n"}, {"tags": ["c++", "c++11", "swap"], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1475074639, "post_id": 39750819, "comment_id": 66798284, "body": "specifically this is NRVO which is a little harder to optimize."}], "tags": [], "owner": {"reputation": 14359, "user_id": 5384363, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/975cbfcd1c4997cb9e85887a5271d48f?s=128&d=identicon&r=PG&f=1", "display_name": "for_stack", "link": "https://stackoverflow.com/users/5384363/for-stack"}, "is_accepted": false, "score": 3, "last_activity_date": 1475073899, "creation_date": 1475073899, "answer_id": 39750819, "question_id": 39750660, "link": "https://stackoverflow.com/questions/39750660/initializing-a-stdstring-with-function-return-value-is-there-a-copy/39750819#39750819", "title": "Initializing a std::string with function return value, is there a copy?", "body": "<p>Since the question is tagged as <code>c++11</code>, I assume you are compiling the code with a <code>c++11</code> compiler.</p>\n\n<p>In this case, the value returned by <code>system_call</code> won't be copied. The compiler might move construct <code>st</code> with the return value, or use Return Value Optimization to erase the copy. Either way, there won't be a copy.</p>\n"}, {"comments": [{"owner": {"reputation": 7967, "user_id": 741692, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1300d6b45404082362f2d0f05de23640?s=128&d=identicon&r=PG&f=1", "display_name": "DarkZeros", "link": "https://stackoverflow.com/users/741692/darkzeros"}, "edited": false, "score": 0, "creation_date": 1475074101, "post_id": 39750839, "comment_id": 66797872, "body": "It is good to know that compiler might already be doing it. But is it there any way I can force it do it? Swap doesn&#39;t seem to work since it needs a non-temporary reference."}, {"owner": {"reputation": 4916, "user_id": 3991400, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5049bb61601c16ae408f5a56b5ed2518?s=128&d=identicon&r=PG&f=1", "display_name": "midor", "link": "https://stackoverflow.com/users/3991400/midor"}, "reply_to_user": {"reputation": 7967, "user_id": 741692, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1300d6b45404082362f2d0f05de23640?s=128&d=identicon&r=PG&f=1", "display_name": "DarkZeros", "link": "https://stackoverflow.com/users/741692/darkzeros"}, "edited": false, "score": 0, "creation_date": 1475074306, "post_id": 39750839, "comment_id": 66798032, "body": "You could call <code>std::move</code> on the return value, but that would prevent copy elision by the rules of the standard, which is still more efficient than moving. If the small string optimization is applied moving from a string may e.g. be not that much more efficient, if at all. I would advise against call move. Also where do you want to call swap? Personal estimate is that returning by value and relying on the RVO is going to yield the most performant solution here."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 7967, "user_id": 741692, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1300d6b45404082362f2d0f05de23640?s=128&d=identicon&r=PG&f=1", "display_name": "DarkZeros", "link": "https://stackoverflow.com/users/741692/darkzeros"}, "edited": false, "score": 0, "creation_date": 1475074499, "post_id": 39750839, "comment_id": 66798188, "body": "@DarkZeros There  is no way to force the compiler not to implement <code>a += b</code> as <code>a = 0; for (int i = 0; i &lt; b;++i) ++a;</code>  At some point you do have to presume a non-malicious compiler.  Elision of return values is a universal C++ compiler feature nowadays.  So long as you <code>return named_variable;</code> directly, or <code>return temporary;</code> directly, and the types match, either elision (if possible) or moving (if not) will occur.  Between <code>system_call</code> and <code>st</code> elision is guaranteed <i>in practice</i> barring pathological compiler flags."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1475074637, "post_id": 39750839, "comment_id": 66798281, "body": "specifically this is NRVO which is a little harder to optimize."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 7967, "user_id": 741692, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1300d6b45404082362f2d0f05de23640?s=128&d=identicon&r=PG&f=1", "display_name": "DarkZeros", "link": "https://stackoverflow.com/users/741692/darkzeros"}, "edited": false, "score": 0, "creation_date": 1475076097, "post_id": 39750839, "comment_id": 66799333, "body": "@DarkZeros when we are worried about the compiler doing something odd or foolish, we&#39;d instruct the compiler to keep the intermediary files and give them a read. If we found unwanted behaviour we&#39;d go back and tweak the code to avoid it. Or sometimes you just live with it because the cost of the fix exceeds the benefit."}], "tags": [], "owner": {"reputation": 4916, "user_id": 3991400, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5049bb61601c16ae408f5a56b5ed2518?s=128&d=identicon&r=PG&f=1", "display_name": "midor", "link": "https://stackoverflow.com/users/3991400/midor"}, "is_accepted": true, "score": 12, "last_activity_date": 1475075433, "last_edit_date": 1475075433, "creation_date": 1475073937, "answer_id": 39750839, "question_id": 39750660, "link": "https://stackoverflow.com/questions/39750660/initializing-a-stdstring-with-function-return-value-is-there-a-copy/39750839#39750839", "title": "Initializing a std::string with function return value, is there a copy?", "body": "<p>In general, if the <code>std::string</code> is constructed in the call and then returned most modern compilers with apply the return value optimization (a special case of <a href=\"http://en.cppreference.com/w/cpp/language/copy_elision\">copy elision</a>). Your case in particular is the Named RVO (thanks @NathanOliver for pointing this out), if you want to look up the precise rules. From C++17 on this optimization is guaranteed through the standard. </p>\n\n<p>Whether or not the optimization is applied is hard to tell, however if it is not, then in C++11 and above it is very likely that the <code>std::string</code> object in the scope of the function will be moved from and that the return value will be moved to. You could theoretically call <code>std::move</code> on the return value, but thereby you would also prevent any RVO from happening. While move may be efficient, RVO typically yields faster code, because nothing is moved or copied at all, but the object is constructed in place, so I would advise against doing it, and in favor of relying on your compiler.</p>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 4, "last_activity_date": 1475075090, "creation_date": 1475075090, "answer_id": 39751256, "question_id": 39750660, "link": "https://stackoverflow.com/questions/39750660/initializing-a-stdstring-with-function-return-value-is-there-a-copy/39751256#39751256", "title": "Initializing a std::string with function return value, is there a copy?", "body": "<p>Elision is the permission the standard gives to compilers to make multiple values share existence, when they seem to be different values in the code.</p>\n\n<pre><code>std::string system_call(const char *cmd){\n  std::string a;\n  ...\n  return a; // all return paths return `a` directly\n}\n\nstd::string st = system_call(\"whatever code\");\n</code></pre>\n\n<p>In the above case, elision means that <code>a</code>, the return value of <code>system_call</code> and <code>st</code> are all <em>the same object</em>.</p>\n\n<p>Modern compilers elide unless you give them a pathological flag to say \"don't elide\", whenever the standard and the code permits it.  \"What if it doesn't elide when possible\" is like asking what if the compiler implements integer addition as a looped increment.</p>\n\n<p>Both are permitted by the standard, neither are reasonable to expect.</p>\n\n<p>When elision fails (because your code makes it impossible), it falls back on move semantics in C++11.  For <code>std::string</code> that means no memory allocation occurs on the move; in the case of a small string optimization some small number of characters may be copied.</p>\n\n<p>Elision can fail if your code could return a given named variable along one path, and a different one or a temporary along another path.  Or if you return a function parameter.</p>\n\n<p>Elision is permitted if your return statement is <code>return named_variable;</code> or <code>return some_temporary_object;</code>, where the returned object matches the type of the function return.  It is also permitted when you do <code>some_type bob = some_temporary;</code>, where <code>some_temporary</code> is a temporary object of type <code>some_type</code>.  Similarly you can elide into a function argument (but not out of it).</p>\n\n<p>There is no way to \"guarantee\" elision.</p>\n\n<p>C++17 makes almost all of the elide-from-temporary cases above mandatory.</p>\n\n<p>For elision to work in C++14 and before, there must be a copy or move constructor.  When elision occurs, it is not called, but it must exist.  In C++17 when temporaries are \"force\" elided, no copy or move constructor need exist: the temporary is not a distinct object, but rather a clause that represents \"how to construct an object\", which is only done later.</p>\n"}], "owner": {"reputation": 7967, "user_id": 741692, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1300d6b45404082362f2d0f05de23640?s=128&d=identicon&r=PG&f=1", "display_name": "DarkZeros", "link": "https://stackoverflow.com/users/741692/darkzeros"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1646, "favorite_count": 0, "accepted_answer_id": 39750839, "answer_count": 3, "score": 4, "last_activity_date": 1475075433, "creation_date": 1475073533, "last_edit_date": 1475074394, "question_id": 39750660, "link": "https://stackoverflow.com/questions/39750660/initializing-a-stdstring-with-function-return-value-is-there-a-copy", "title": "Initializing a std::string with function return value, is there a copy?", "body": "<p>I have the following code, I am using GCC and C++11:</p>\n\n<pre><code>std::string system_call(const char *cmd){\n   std::string a;\n   ...\n   return a;\n}\n\nstd::string st = system_call(\"whatever code\");\n</code></pre>\n\n<p>Is there an implicit copy there?\nI am calling this function many times, and I guess it is doing a copy from the return value of the <code>system_call</code> to the variable <code>st</code>, and later on releasing the temporary r-value.</p>\n\n<p>Is there any way I can avoid the copy? Using <code>st.swap(system_call())</code> throws and error in the compiler:</p>\n\n<blockquote>\n  <p>error: no matching function for call to\n  'std::basic_string::swap(std::string)'</p>\n</blockquote>\n\n<p>My questions are:</p>\n\n<ol>\n<li>If there is a problem or not</li>\n<li>How to avoid it, if there is one</li>\n</ol>\n\n<p>Thanks</p>\n\n<p><strong>EDIT:</strong>\nFound a way to make the explicit swap work. But the answers where right, there is no benefit since the compiler was already replacing st with the return value, without any copy.</p>\n\n<pre><code>system_call(\"whatever\").swap(st);\n</code></pre>\n"}, {"tags": ["c++", "opencv", "image-processing", "runtime-error"], "comments": [{"owner": {"reputation": 658, "user_id": 6718640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db0c78fb3f5a7766deab1fcfbed9a8d6?s=128&d=identicon&r=PG&f=1", "display_name": "PSchn", "link": "https://stackoverflow.com/users/6718640/pschn"}, "edited": false, "score": 0, "creation_date": 1475079191, "post_id": 39750427, "comment_id": 66801388, "body": "so first load your image as grayscale with <code>imread(&quot;skelt.tif&quot;,0)</code> to be sure it has one channel. Then you create grad_x and grad_y as <code>CV_16U</code> but your <code>Sobel</code> output is <code>CV_32F</code>"}, {"owner": {"reputation": 442, "user_id": 6240151, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/879a60dac8aa295273729f5d806f2a38?s=128&d=identicon&r=PG&f=1", "display_name": "GpG", "link": "https://stackoverflow.com/users/6240151/gpg"}, "edited": false, "score": 0, "creation_date": 1475080076, "post_id": 39750427, "comment_id": 66801992, "body": "what is the size of the skelt.tif?  img.rows, img.cols ?"}, {"owner": {"reputation": 33, "user_id": 5556083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5effc7802b189fe80ee25fb7d74011ff?s=128&d=identicon&r=PG&f=1", "display_name": "Vin", "link": "https://stackoverflow.com/users/5556083/vin"}, "reply_to_user": {"reputation": 442, "user_id": 6240151, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/879a60dac8aa295273729f5d806f2a38?s=128&d=identicon&r=PG&f=1", "display_name": "GpG", "link": "https://stackoverflow.com/users/6240151/gpg"}, "edited": false, "score": 0, "creation_date": 1475080319, "post_id": 39750427, "comment_id": 66802153, "body": "@GpG The size of skelt.tif is [665 X 489]"}, {"owner": {"reputation": 33, "user_id": 5556083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5effc7802b189fe80ee25fb7d74011ff?s=128&d=identicon&r=PG&f=1", "display_name": "Vin", "link": "https://stackoverflow.com/users/5556083/vin"}, "reply_to_user": {"reputation": 658, "user_id": 6718640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db0c78fb3f5a7766deab1fcfbed9a8d6?s=128&d=identicon&r=PG&f=1", "display_name": "PSchn", "link": "https://stackoverflow.com/users/6718640/pschn"}, "edited": false, "score": 0, "creation_date": 1475080486, "post_id": 39750427, "comment_id": 66802255, "body": "@PSchn I am now reading the image as imread(&quot;skelt.tif&quot;,0) and I changed grad_x, grad_y to CV_32F. It still gives an error."}, {"owner": {"reputation": 658, "user_id": 6718640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db0c78fb3f5a7766deab1fcfbed9a8d6?s=128&d=identicon&r=PG&f=1", "display_name": "PSchn", "link": "https://stackoverflow.com/users/6718640/pschn"}, "edited": false, "score": 0, "creation_date": 1475081010, "post_id": 39750427, "comment_id": 66802586, "body": "Can you access the other images(grad_x,grad_y)? And what type is angl? Check with <code>angl.type()</code> and lookup <a href=\"http://ninghang.blogspot.de/2012/11/list-of-mat-type-in-opencv.html?m=1\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 442, "user_id": 6240151, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/879a60dac8aa295273729f5d806f2a38?s=128&d=identicon&r=PG&f=1", "display_name": "GpG", "link": "https://stackoverflow.com/users/6240151/gpg"}, "edited": false, "score": 0, "creation_date": 1475081128, "post_id": 39750427, "comment_id": 66802664, "body": "I have tried the above code with custom image (400x400) and it works fine."}, {"owner": {"reputation": 33, "user_id": 5556083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5effc7802b189fe80ee25fb7d74011ff?s=128&d=identicon&r=PG&f=1", "display_name": "Vin", "link": "https://stackoverflow.com/users/5556083/vin"}, "reply_to_user": {"reputation": 658, "user_id": 6718640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db0c78fb3f5a7766deab1fcfbed9a8d6?s=128&d=identicon&r=PG&f=1", "display_name": "PSchn", "link": "https://stackoverflow.com/users/6718640/pschn"}, "edited": false, "score": 0, "creation_date": 1475081538, "post_id": 39750427, "comment_id": 66802913, "body": "@PSchn Yes, I am able to access grad_x, grad_y using the same way. The type of angl is CV_32F (C1)."}, {"owner": {"reputation": 442, "user_id": 6240151, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/879a60dac8aa295273729f5d806f2a38?s=128&d=identicon&r=PG&f=1", "display_name": "GpG", "link": "https://stackoverflow.com/users/6240151/gpg"}, "edited": false, "score": 0, "creation_date": 1475081595, "post_id": 39750427, "comment_id": 66802943, "body": "Does this produce expected result: Mat img = imread(&quot;skelt.tif&quot;); cout &lt;&lt; img.rows &lt;&lt; img.cols &lt;&lt; img.dims?"}, {"owner": {"reputation": 658, "user_id": 6718640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db0c78fb3f5a7766deab1fcfbed9a8d6?s=128&d=identicon&r=PG&f=1", "display_name": "PSchn", "link": "https://stackoverflow.com/users/6718640/pschn"}, "edited": false, "score": 0, "creation_date": 1475081838, "post_id": 39750427, "comment_id": 66803096, "body": "How did you generate your random numbers? Maybe there is the problem?!"}, {"owner": {"reputation": 33, "user_id": 5556083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5effc7802b189fe80ee25fb7d74011ff?s=128&d=identicon&r=PG&f=1", "display_name": "Vin", "link": "https://stackoverflow.com/users/5556083/vin"}, "reply_to_user": {"reputation": 658, "user_id": 6718640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db0c78fb3f5a7766deab1fcfbed9a8d6?s=128&d=identicon&r=PG&f=1", "display_name": "PSchn", "link": "https://stackoverflow.com/users/6718640/pschn"}, "edited": false, "score": 0, "creation_date": 1475082227, "post_id": 39750427, "comment_id": 66803309, "body": "@PSchn Initially, I tried to access all the points in the image. However, this gave an error. Now, I am just plugging in random (x,y) coordinates. I tried various (x,y) values. All of these give an error."}, {"owner": {"reputation": 33, "user_id": 5556083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5effc7802b189fe80ee25fb7d74011ff?s=128&d=identicon&r=PG&f=1", "display_name": "Vin", "link": "https://stackoverflow.com/users/5556083/vin"}, "reply_to_user": {"reputation": 442, "user_id": 6240151, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/879a60dac8aa295273729f5d806f2a38?s=128&d=identicon&r=PG&f=1", "display_name": "GpG", "link": "https://stackoverflow.com/users/6240151/gpg"}, "edited": false, "score": 0, "creation_date": 1475084748, "post_id": 39750427, "comment_id": 66804679, "body": "@GpG the size of img is [665 X 489]. However, img.rows =489, img.cols=665 and img.dims=2 . Is this right?"}, {"owner": {"reputation": 658, "user_id": 6718640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db0c78fb3f5a7766deab1fcfbed9a8d6?s=128&d=identicon&r=PG&f=1", "display_name": "PSchn", "link": "https://stackoverflow.com/users/6718640/pschn"}, "edited": false, "score": 0, "creation_date": 1475086162, "post_id": 39750427, "comment_id": 66805514, "body": "Can you provide your Image?"}, {"owner": {"reputation": 442, "user_id": 6240151, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/879a60dac8aa295273729f5d806f2a38?s=128&d=identicon&r=PG&f=1", "display_name": "GpG", "link": "https://stackoverflow.com/users/6240151/gpg"}, "edited": false, "score": 0, "creation_date": 1475086432, "post_id": 39750427, "comment_id": 66805707, "body": "try substituting Mat img = imread(&quot;skelt.tif&quot;); with Mat img = Mat(489,665,CV_8UC3). Is it working in this case?"}, {"owner": {"reputation": 33, "user_id": 5556083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5effc7802b189fe80ee25fb7d74011ff?s=128&d=identicon&r=PG&f=1", "display_name": "Vin", "link": "https://stackoverflow.com/users/5556083/vin"}, "reply_to_user": {"reputation": 442, "user_id": 6240151, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/879a60dac8aa295273729f5d806f2a38?s=128&d=identicon&r=PG&f=1", "display_name": "GpG", "link": "https://stackoverflow.com/users/6240151/gpg"}, "edited": false, "score": 0, "creation_date": 1475086967, "post_id": 39750427, "comment_id": 66806061, "body": "@GpG I tried it. This does not help"}, {"owner": {"reputation": 442, "user_id": 6240151, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/879a60dac8aa295273729f5d806f2a38?s=128&d=identicon&r=PG&f=1", "display_name": "GpG", "link": "https://stackoverflow.com/users/6240151/gpg"}, "edited": false, "score": 0, "creation_date": 1475088238, "post_id": 39750427, "comment_id": 66806751, "body": "some time ago I was experiencing a strange behavior with opencv. I think I was building my application on debug while linking release opencv libraries (or wise versa). are you linking the debug libraries. Which version of opencv are you using by the way?"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 5556083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5effc7802b189fe80ee25fb7d74011ff?s=128&d=identicon&r=PG&f=1", "display_name": "Vin", "link": "https://stackoverflow.com/users/5556083/vin"}, "edited": false, "score": 0, "creation_date": 1475091396, "post_id": 39755159, "comment_id": 66808278, "body": "The size of img is [665 X 489].  img.rows =489, img.cols=665 and img.dims=2 , img.type= CV_32F."}], "tags": [], "owner": {"reputation": 90163, "user_id": 10897, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/csXHX.png?s=128&g=1", "display_name": "Martin Beckett", "link": "https://stackoverflow.com/users/10897/martin-beckett"}, "is_accepted": false, "score": 0, "last_activity_date": 1475087582, "creation_date": 1475087582, "answer_id": 39755159, "question_id": 39750427, "link": "https://stackoverflow.com/questions/39750427/error-using-the-at-operator-opencv-c/39755159#39755159", "title": "Error using the .at operator openCV (C++)", "body": "<p>Your image <code>angl</code> is not the size or type you think it is, or is empty.</p>\n\n<p>Try checking the type with <code>angl.type()</code> and size with <code>angl.rows angl.cols</code></p>\n\n<p>If there is a problem it is probably in the phase() call which we don't have, are you sure you are modifying the angl image and not a copy ?</p>\n"}, {"tags": [], "owner": {"reputation": 150, "user_id": 1992646, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OTqGq.jpg?s=128&g=1", "display_name": "Krist&#243;f", "link": "https://stackoverflow.com/users/1992646/krist%c3%b3f"}, "is_accepted": false, "score": 0, "last_activity_date": 1475231939, "creation_date": 1475231939, "answer_id": 39789568, "question_id": 39750427, "link": "https://stackoverflow.com/questions/39750427/error-using-the-at-operator-opencv-c/39789568#39789568", "title": "Error using the .at operator openCV (C++)", "body": "<p>In the worst case, you can debug into OpenCV to check the variables at that assert call which throws the error. To do that, you need to download the source of your OpenCV version and tell the debugger where the source files are located.</p>\n\n<p>Once you have set up the debugging of the OpenCV source, you can simply jump into the .at call with your debugger to see which part of the assert condition fails.</p>\n"}], "owner": {"reputation": 33, "user_id": 5556083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5effc7802b189fe80ee25fb7d74011ff?s=128&d=identicon&r=PG&f=1", "display_name": "Vin", "link": "https://stackoverflow.com/users/5556083/vin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1475549412, "creation_date": 1475072893, "last_edit_date": 1475549412, "question_id": 39750427, "link": "https://stackoverflow.com/questions/39750427/error-using-the-at-operator-opencv-c", "title": "Error using the .at operator openCV (C++)", "body": "<p>[![Here is the image- skelt.tif(img)][1]][1]I am trying to find access the Mat element, angl (gradient angle). However when I use the .at statement, it throws an error. </p>\n\n<p>I have already checked for NULL image (angl.data==NULL). This is not a NULL image.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>  Mat img = imread(\"skelt.tif\"); // this is a binary image\n  Mat grad_x(img.rows, img.cols, CV_16U);\n  Mat grad_y(img.rows, img.cols, CV_16U);\n  Mat angl;\n  Sobel(img, grad_x, CV_32F, 1, 0, 3);// Gradient X\n  Sobel(img,grad_y, CV_32F, 0, 1, 3); // Gradient Y\n  phase(grad_x, grad_y, angl,true);\n  cout &lt;&lt; angl.at&lt;float&gt;(51, 5) &lt;&lt; endl; // the dimensions are randomly chosen and are within the image\n  cout&lt;&lt;angl.ptr(5)[4];\n</code></pre>\n\n<p>The error is in the places where the .at operator is used. The error is - </p>\n\n<pre><code>OpenCV Error: Assertion failed (dims &lt;= 2 &amp;&amp; data &amp;&amp; (unsigned)pt.y &lt; (unsigned)\nsize.p[0] &amp;&amp; (unsigned)(pt.x * DataType&lt;_Tp&gt;::channels) &lt; (unsigned)(size.p[1] *\n channels()) &amp;&amp; ((((sizeof(size_t)&lt;&lt;28)|0x8442211) &gt;&gt; ((DataType&lt;_Tp&gt;::depth) &amp;\n((1 &lt;&lt; 3) - 1))*4) &amp; 15) == elemSize1()) in cv::Mat::at, file c:\\opencv\\build\\in\nclude\\opencv2/core/mat.inl.hpp, line 912\n</code></pre>\n\n<p>I am unable to debug this error.  </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1475072993, "post_id": 39750404, "comment_id": 66797023, "body": "You are not using the correct number of arguments.  You should double check the <a href=\"http://en.cppreference.com/w/cpp/algorithm/remove\" rel=\"nofollow noreferrer\">reference</a>."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 2, "creation_date": 1475075739, "post_id": 39750404, "comment_id": 66799059, "body": "When you have fixed the functional problem with your code, you&#39;ll want to head over to <a href=\"https://codereview.stackexchange.com\">Code Review</a> for comments on your style.  Remember to read the introductory materials there in order to present it in the way that will attract the best answers."}], "answers": [{"tags": [], "owner": {"reputation": 4916, "user_id": 3991400, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5049bb61601c16ae408f5a56b5ed2518?s=128&d=identicon&r=PG&f=1", "display_name": "midor", "link": "https://stackoverflow.com/users/3991400/midor"}, "is_accepted": false, "score": 0, "last_activity_date": 1475073195, "creation_date": 1475073195, "answer_id": 39750524, "question_id": 39750404, "link": "https://stackoverflow.com/questions/39750404/c-erase-remove-idiom-not-working-properly/39750524#39750524", "title": "C++ Erase-Remove Idiom not working properly?", "body": "<p>Virtually all STL-functions take one or more <strong>pairs</strong> of iterators. Since you just pass <code>begin</code>, there is no viable overload. You need to call </p>\n\n<pre><code>remove(bookCollection.begin(), bookCollection.end(), vecVal)\n</code></pre>\n\n<p>It is always a good idea to check the <a href=\"http://en.cppreference.com/w/cpp/algorithm/remove\" rel=\"nofollow\">reference</a>, which typically also contains a basic usage example.</p>\n"}], "owner": {"reputation": 11, "user_id": 6889115, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8598dd879d5a4a4e8431acf795e83bf5?s=128&d=identicon&r=PG", "display_name": "Change", "link": "https://stackoverflow.com/users/6889115/change"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 104, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1475081183, "creation_date": 1475072805, "last_edit_date": 1495541891, "question_id": 39750404, "link": "https://stackoverflow.com/questions/39750404/c-erase-remove-idiom-not-working-properly", "title": "C++ Erase-Remove Idiom not working properly?", "body": "<p>This post is a continuation on my post from yesterday: <a href=\"https://stackoverflow.com/questions/39729909/how-to-output-vector?noredirect=1#comment66757390_39729909\">How to output a vector.</a></p>\n\n<p>So I am in the process of writing a short program that will take a list of strings into a vector, export them to a file, view them before outputting them and lastly remove them if possible. I have managed to get all of the functions working properly except for case 3 (remove a book from the list). The errors I am getting in visual studio  as follows: </p>\n\n<p><strong>1.) \"No instance of the overloaded function \"remove\" matches the argument list. [LN 76]</strong></p>\n\n<p><strong>2.) \"'Remove': function does not take 2 arguments\". [LN 76]</strong></p>\n\n<p>As you can probably tell, I am trying to remove by value instead of index. I am still learning here so be gentle, but why exactly am I getting these errors? </p>\n\n<p>Here is my full code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cctype&gt;\n#include &lt;ctype.h&gt;\n#include &lt;algorithm&gt;\n#include &lt;string&gt;\n#include &lt;math.h&gt;\n#include &lt;windows.h&gt;\n#include &lt;iomanip&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;fstream&gt;\n#include &lt;istream&gt;\n\n// common namespace\nusing namespace std;\n\nint main()\n{\n\n    int option;\n    bool iWannaLeave = false;\n\n    vector&lt;string&gt; bookCollection;\n    string entryVal = \" \";\n    int anotherOption;\n    do\n    {\n        cout &lt;&lt; \"Welcome to MyBook! - A text recorder framework application.\" &lt;&lt; endl;\n        cout &lt;&lt; \"-----------------------------------------------------------\" &lt;&lt; endl;\n        cout &lt;&lt; \"Main Menu:\" &lt;&lt; endl;\n        cout &lt;&lt; \"1 - Add a book to the collection.\" &lt;&lt; endl;\n        cout &lt;&lt; \"2 - Display all books currently in the collection.\" &lt;&lt; endl;\n        cout &lt;&lt; \"3 - Remove books from the collection.\" &lt;&lt; endl;\n        cout &lt;&lt; \"4 - Write stored collection to file.\" &lt;&lt; endl;\n        cout &lt;&lt; \"5 - Quit\" &lt;&lt; endl;\n        cout &lt;&lt; \"Make your selection: \";\n        cin &gt;&gt; option;\n        cin.ignore();\n\n        switch (option)\n        {\n        case 1:\n        {\n            bool wannaMoreBooks = false;\n            // the next loop will execute at least one time so you could enter a book\n            do\n            {\n                wannaMoreBooks = false;\n                cout &lt;&lt; \"Add a book title to the collection: \";\n                getline(cin, entryVal);\n                bookCollection.push_back(entryVal);\n\n                cout &lt;&lt; \"Would you like to enter another book?(1 - yes, 0 - no): \";\n\n                cin &gt;&gt; anotherOption;\n                cin.ignore();\n                if (anotherOption == 1) wannaMoreBooks = true;\n            } while (wannaMoreBooks == true);\n        }\n        break;\n\n        case 2:\n        {\n            for (int i = 0; i &lt; bookCollection.size(); i++)\n                cout &lt;&lt; bookCollection[i] &lt;&lt; \" | \";\n            cout &lt;&lt; endl;\n            break;\n        }\n\n        case 3: \n        {\n            string vecVal;\n            cout &lt;&lt; \"Enter the value you would like to remove: \" &lt;&lt; endl;\n            cin &gt;&gt; vecVal;\n            bookCollection.erase(remove(bookCollection.begin(), vecVal), bookCollection.end());\n        }\n            // remove a book from the collection\n            break;\n\n        case 4:\n        {\n            ofstream fileOut(\"Collection.txt\");\n            fileOut &lt;&lt; \"Your MyBook Collection: [Begin] - | \";\n            auto first = true;\n            for (string x : bookCollection)\n            {\n                if (!first) { fileOut &lt;&lt; \" | \"; }\n                first = false;\n                fileOut &lt;&lt; x;\n            }\n            fileOut &lt;&lt; \" | - [End]\" &lt;&lt; endl;\n            cout &lt;&lt; \"Collection.txt has been successfully written.\" &lt;&lt; endl;\n            break;\n        }\n        case 5:\n        {\n            //Nested IF to kill program properly\n            int quitVar;\n            cout &lt;&lt; \"Are you sure you want to exit the program?: \";\n\n            cin &gt;&gt; quitVar;\n            cin.ignore();\n\n            if (quitVar == 1)\n            {\n                cout &lt;&lt; \"The program will now be terminated.\" &lt;&lt; endl;\n                iWannaLeave = true;\n            }\n            else if (quitVar == 0)  cout &lt;&lt; \"Returning to the main menu.\" &lt;&lt; endl;\n        }\n        break;\n        }\n    } while (iWannaLeave == false);\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>I am aware that this is no where near perfect code so in addition to finding out why I am getting these errors I would also like some constructive criticism as to how I can improve.</strong></p>\n\n<p><strong>Additionally:</strong> If I wanted to go about using functions in a header file as opposed to a switch, would I just move the case contents to a header file?</p>\n\n<p>Thanks in advance! :)</p>\n"}, {"tags": ["c++", "vector", "linear-algebra"], "comments": [{"owner": {"reputation": 6951, "user_id": 3475381, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b6a1c5d19f4ae8c6a1dbf097487c96d7?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Sehgal", "link": "https://stackoverflow.com/users/3475381/gaurav-sehgal"}, "edited": false, "score": 0, "creation_date": 1475072941, "post_id": 39750388, "comment_id": 66796975, "body": "What is your expected result?"}, {"owner": {"reputation": 174, "user_id": 4806467, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/1c62fcd0f4c02deb7992f282032a927d?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Richardson", "link": "https://stackoverflow.com/users/4806467/michael-richardson"}, "edited": false, "score": 0, "creation_date": 1475073045, "post_id": 39750388, "comment_id": 66797058, "body": "To have all of the normal vector arrows pointing towards the observation point. In the first picture, I want the red arrow present on the right structure and blue arrow present on the left structure."}, {"owner": {"reputation": 6951, "user_id": 3475381, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b6a1c5d19f4ae8c6a1dbf097487c96d7?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Sehgal", "link": "https://stackoverflow.com/users/3475381/gaurav-sehgal"}, "edited": false, "score": 0, "creation_date": 1475073096, "post_id": 39750388, "comment_id": 66797102, "body": "@MichaelRichardson Update this in the question to help others help you."}], "answers": [{"tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": true, "score": 1, "last_activity_date": 1475073175, "creation_date": 1475073175, "answer_id": 39750518, "question_id": 39750388, "link": "https://stackoverflow.com/questions/39750388/calculate-visibility-of-normal-vectors/39750518#39750518", "title": "Calculate visibility of normal vectors", "body": "<p>Your dot product calculation is wrong.  It should be X * X + Y * Y.</p>\n"}], "owner": {"reputation": 174, "user_id": 4806467, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/1c62fcd0f4c02deb7992f282032a927d?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Richardson", "link": "https://stackoverflow.com/users/4806467/michael-richardson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "accepted_answer_id": 39750518, "answer_count": 1, "score": 0, "last_activity_date": 1475073595, "creation_date": 1475072780, "last_edit_date": 1475073595, "question_id": 39750388, "link": "https://stackoverflow.com/questions/39750388/calculate-visibility-of-normal-vectors", "title": "Calculate visibility of normal vectors", "body": "<p>I have a mesh shown in the picture below. Each segment of the mesh has a positive (<strong>np</strong>) and negative normal (<strong>nn</strong>). Each pair of normals belongs to a segment from the mesh.\n<a href=\"https://i.stack.imgur.com/ZASYc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZASYc.png\" alt=\"enter image description here\"></a></p>\n\n<p>The red dot in the middle is my observation point. I need to find out which normals are visible to this observation point. </p>\n\n<p>The method I have followed so far is to to calculate a normal vector from the observation point to the middle of the each mesh segment (<strong>ob_i</strong>). I then do the dot product on the <strong>ob_i</strong> and <strong>np</strong> or <strong>nn</strong>. The result of this is either greater than zero or less than. If it is less than the vector is facing the other way and can be regarded as hidden from the observation point.</p>\n\n<p>With this method I get the following result:\n<a href=\"https://i.stack.imgur.com/yde9q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yde9q.png\" alt=\"enter image description here\"></a></p>\n\n<p>Heres how I calculate the dot product and check for visibility:</p>\n\n<pre><code>vector&lt;vector&lt;int&gt;&gt; calculateShadowingMatrix(vector&lt;point&gt; observationNormals, vector&lt;vector&lt;point&gt;&gt; normals){\nvector&lt;vector&lt;int&gt;&gt; shadowMatrix;\n\nfor(unsigned ii = 0; ii &lt; normals.size(); ii++){\n    vector&lt;int&gt; visibilty;\n\n    for(unsigned jj = 0; jj &lt; normals[ii].size(); jj++) {\n\n        double dot = dotProduct(observationNormals[ii], normals[ii][jj]);\n\n        if (dot &lt;= 0.0) {\n            visibilty.push_back(1);\n        } else {\n            visibilty.push_back(0);\n        }\n\n    }\n    shadowMatrix.push_back(visibilty);\n}\n\nreturn shadowMatrix;\n}\n\ndouble dotProduct(point _u, point _v){\n    return _u.getX()*_v.getX() - _u.getY()*_v.getY();\n}\n</code></pre>\n\n<p>I am trying to get all of the normal vectors which are facing the observation point to be present and zero out the ones which are facing outwards. I get errors, as can be seen in the second image, some of the vector are facing the wrong direction.</p>\n\n<p>Final result should look as follows:</p>\n\n<p><a href=\"https://i.stack.imgur.com/OtqjC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OtqjC.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "image", "opencv", "file-type", "imread"], "comments": [{"owner": {"reputation": 15243, "user_id": 1231073, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/lSwuI.jpg?s=128&g=1", "display_name": "sgarizvi", "link": "https://stackoverflow.com/users/1231073/sgarizvi"}, "edited": false, "score": 0, "creation_date": 1475073513, "post_id": 39750221, "comment_id": 66797406, "body": "Have you tried removing the parameter <code>CV_IMWRITE_PNG_COMPRESSION</code> and its value when writing a <b>jpg</b> file?"}, {"owner": {"reputation": 1, "user_id": 5994719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef965e940e865082cf7dd06c5e7ad4dd?s=128&d=identicon&r=PG", "display_name": "Juani Tab", "link": "https://stackoverflow.com/users/5994719/juani-tab"}, "reply_to_user": {"reputation": 15243, "user_id": 1231073, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/lSwuI.jpg?s=128&g=1", "display_name": "sgarizvi", "link": "https://stackoverflow.com/users/1231073/sgarizvi"}, "edited": false, "score": 0, "creation_date": 1475073673, "post_id": 39750221, "comment_id": 66797529, "body": "Yes, I just tried that now.  It still produces and saves no file at all."}, {"owner": {"reputation": 1, "user_id": 5994719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef965e940e865082cf7dd06c5e7ad4dd?s=128&d=identicon&r=PG", "display_name": "Juani Tab", "link": "https://stackoverflow.com/users/5994719/juani-tab"}, "reply_to_user": {"reputation": 15243, "user_id": 1231073, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/lSwuI.jpg?s=128&g=1", "display_name": "sgarizvi", "link": "https://stackoverflow.com/users/1231073/sgarizvi"}, "edited": false, "score": 0, "creation_date": 1475074295, "post_id": 39750221, "comment_id": 66798025, "body": "It will however convert a .png to a .jpg when I change the extension in the file name."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1475077989, "post_id": 39750221, "comment_id": 66800587, "body": "Does the folder source exist inside the current folder? Was the file actually read?"}, {"owner": {"reputation": 3225, "user_id": 5294258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c5270296f9c4ec3fae89195328e9bc7?s=128&d=identicon&r=PG&f=1", "display_name": "sturkmen", "link": "https://stackoverflow.com/users/5294258/sturkmen"}, "edited": false, "score": 0, "creation_date": 1475107676, "post_id": 39750221, "comment_id": 66814786, "body": "you can&#39;t use imwrite like <code>imwrite(new_filename,newImg,CV_IMWRITE_PNG_COMPRESSION,9)</code> are you sure the code in the question is correct?"}, {"owner": {"reputation": 15243, "user_id": 1231073, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/lSwuI.jpg?s=128&g=1", "display_name": "sgarizvi", "link": "https://stackoverflow.com/users/1231073/sgarizvi"}, "reply_to_user": {"reputation": 3225, "user_id": 5294258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c5270296f9c4ec3fae89195328e9bc7?s=128&d=identicon&r=PG&f=1", "display_name": "sturkmen", "link": "https://stackoverflow.com/users/5294258/sturkmen"}, "edited": false, "score": 1, "creation_date": 1475215177, "post_id": 39750221, "comment_id": 66863015, "body": "@sturkmen... You are right. Additional arguments are given in the form of an <code>std::vector</code> like this. <code>imwrite(new_filename,newImg,{ CV_IMWRITE_PNG_COMPRESSION,9 } );</code>"}, {"owner": {"reputation": 1, "user_id": 5994719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef965e940e865082cf7dd06c5e7ad4dd?s=128&d=identicon&r=PG", "display_name": "Juani Tab", "link": "https://stackoverflow.com/users/5994719/juani-tab"}, "edited": false, "score": 0, "creation_date": 1475489313, "post_id": 39750221, "comment_id": 66948025, "body": "Thank you for your input.  It seemed it was the image I was trying to convert that was the problem.  When I attempted with alternate images it was successful (not sure why that JPG in particular wouldn&#39;t convert).  The code was correct, I didn&#39;t need to introduce curly brackets, but I did introduce the use of a vector as advised by sgarizvi just to be sure no other issues would arise."}], "owner": {"reputation": 1, "user_id": 5994719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef965e940e865082cf7dd06c5e7ad4dd?s=128&d=identicon&r=PG", "display_name": "Juani Tab", "link": "https://stackoverflow.com/users/5994719/juani-tab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3047, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1475072378, "creation_date": 1475072378, "question_id": 39750221, "link": "https://stackoverflow.com/questions/39750221/c-convert-jpg-to-png-using-opencv", "title": "C++ Convert .jpg to .png using OpenCV", "body": "<p>I am writing in C++ and trying to use OpenCV imread() and imwrite() to convert an image from .jpg to .png filetype and save it in the same location as the original file.</p>\n\n<p>When testing the code with a .png file (just to see if a new file is produced at all), a new file is produced and saved.</p>\n\n<p>When testing the code with a .jpg, no new file is produced.</p>\n\n<p>The code I have so far is:</p>\n\n<pre><code>int main(int argc, char *arvg[])\n{\n    Mat newImg = imread(arvg[1]);\n    string new_filename = \"source/newfile.png\";\n\n    imwrite(new_filename,newImg,CV_IMWRITE_PNG_COMPRESSION,9)\n}\n</code></pre>\n\n<p>The .jpg image I am trying to convert is a 16kb image.  </p>\n\n<p>Am I overlooking a step or is there a better way to carry out this process?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "c++11", "c++14", "template-meta-programming"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 4, "creation_date": 1475072338, "post_id": 39750160, "comment_id": 66796536, "body": "Well, what&#39;re you trying to test? Just if the name <code>xxx</code> exists at all (why?), or if you can invoke <code>xxx</code> with some arguments (which ones?)?"}, {"owner": {"reputation": 6885, "user_id": 5405086, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/PxgGr.png?s=128&g=1", "display_name": "xinaiz", "link": "https://stackoverflow.com/users/5405086/xinaiz"}, "edited": false, "score": 2, "creation_date": 1475072444, "post_id": 39750160, "comment_id": 66796611, "body": "I don&#39;t think if it&#39;s possible if you don&#39;t provide additional parameters if function is overloaded. But I would love to see an answer :)"}, {"owner": {"reputation": 62009, "user_id": 514235, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73c478b60c371abe43bb7ac15ff3666d?s=128&d=identicon&r=PG", "display_name": "iammilind", "link": "https://stackoverflow.com/users/514235/iammilind"}, "edited": false, "score": 0, "creation_date": 1475074274, "post_id": 39750160, "comment_id": 66798012, "body": "Related or Duplicate: <a href=\"http://stackoverflow.com/q/36079170/514235\">How to check if a member name (variable or function) exists in a class, with or without specifying type?</a>"}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "reply_to_user": {"reputation": 62009, "user_id": 514235, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73c478b60c371abe43bb7ac15ff3666d?s=128&d=identicon&r=PG", "display_name": "iammilind", "link": "https://stackoverflow.com/users/514235/iammilind"}, "edited": false, "score": 0, "creation_date": 1475074518, "post_id": 39750160, "comment_id": 66798199, "body": "I think the question here, and the answers, might be more comprehensive that the question that @iammilind linked to. Maybe that should be marked as the dupe, keeping this question instead?"}, {"owner": {"reputation": 6885, "user_id": 5405086, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/PxgGr.png?s=128&g=1", "display_name": "xinaiz", "link": "https://stackoverflow.com/users/5405086/xinaiz"}, "edited": false, "score": 0, "creation_date": 1475074817, "post_id": 39750160, "comment_id": 66798414, "body": "This question isn&#39;t duplicate because in here OP adds possibility of overloading methods, and author of posted one doesn&#39;t."}], "answers": [{"comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1475072878, "post_id": 39750372, "comment_id": 66796936, "body": "That&#39;s really clever, triggering a failure when the member <i>does</i> exist..."}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1475072983, "post_id": 39750372, "comment_id": 66797014, "body": "Since the last test in OP&#39;s code if about attribute <code>xxx</code> which is not a member function, I do not think that this is what OP is looking for."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1475073227, "post_id": 39750372, "comment_id": 66797194, "body": "@Holt Once you know the name exists, it&#39;s not much more effort to ensure that its type is a function type."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1475073712, "post_id": 39750372, "comment_id": 66797559, "body": "@Holt Added that extra bit."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1475075316, "post_id": 39750372, "comment_id": 66798786, "body": "Also need a caveat about unions too. And you hit the &quot;overloaded function&quot; case if <code>T::xxx</code> is inaccessible."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1475075864, "post_id": 39750372, "comment_id": 66799149, "body": "@T.C. Well that sucks."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1475096408, "post_id": 39750372, "comment_id": 66811101, "body": "Also, 1) you need to remove pointer for static member functions, and I don&#39;t see the point of remove_cv there; 2) this treats all members that you can&#39;t take the address of as &quot;overloaded functions&quot;: enumerators, bit-fields, types."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1475096747, "post_id": 39750372, "comment_id": 66811281, "body": "@T.C. Just going to revert to what I had originally, which at least is definitely right for non-class/union types."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 6, "last_activity_date": 1475096662, "last_edit_date": 1475096662, "creation_date": 1475072749, "answer_id": 39750372, "question_id": 39750160, "link": "https://stackoverflow.com/questions/39750160/sfinae-to-determine-if-a-type-has-a-potentially-overloaded-method/39750372#39750372", "title": "SFINAE to determine if a type has a potentially overloaded method", "body": "<p>If all you're doing is checking if the <em>name</em> <code>xxx</code> exists within type <code>T</code>, then we can have the following approach that works for all non-<code>final</code>/<code>union</code> types <code>T</code>. We can create a new type that inherits publicly from both <code>T</code> and a fallback type that has a member <code>xxx</code>. We can access <code>xxx</code> unambiguously on the derived type if and only if <code>T</code> didn't have the member to begin with. </p>\n\n<pre><code>template &lt;class T&gt;\nclass has_xxx_impl\n{\nprivate:\n    struct Fallback {\n        int xxx;\n    };\n\n    struct Derived : T, Fallback { };\n\n    template &lt;class U&gt;\n    static std::false_type test(decltype(&amp;U::xxx)* );\n    template &lt;class U&gt;\n    static std::true_type test(...);\npublic:\n    using type = decltype(test&lt;Derived&gt;(nullptr));\n};\n\ntemplate &lt;class T&gt;\nstruct has_xxx : has_xxx_impl&lt;T&gt;::type\n{ };\n</code></pre>\n\n<p>If you want to check for more specific things - like for a <code>T</code>, you can call <code>T{}.xxx()</code>, I would do it differently. </p>\n"}, {"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1475082871, "post_id": 39752143, "comment_id": 66803620, "body": "Note: <code>can_apply</code> is nearly <a href=\"http://en.cppreference.com/w/cpp/experimental/is_detected\" rel=\"nofollow noreferrer\"><code>std::experimental::is_detected</code></a>."}, {"owner": {"reputation": 463, "user_id": 11770674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4ec1c8b5b1c6e09d9e84ffbd61aedfb?s=128&d=identicon&r=PG&f=1", "display_name": "RL-S", "link": "https://stackoverflow.com/users/11770674/rl-s"}, "edited": false, "score": 0, "creation_date": 1587546524, "post_id": 39752143, "comment_id": 108550758, "body": "How can you account for the member function being private? This would help with CRTP stuff."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 463, "user_id": 11770674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4ec1c8b5b1c6e09d9e84ffbd61aedfb?s=128&d=identicon&r=PG&f=1", "display_name": "RL-S", "link": "https://stackoverflow.com/users/11770674/rl-s"}, "edited": false, "score": 0, "creation_date": 1587723666, "post_id": 39752143, "comment_id": 108627724, "body": "@rl-s I don&#39;t understand the question.  What do you want it to do if <code>.xxx()</code> is private?  What do you think it does?"}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 3, "last_activity_date": 1475077534, "creation_date": 1475077534, "answer_id": 39752143, "question_id": 39750160, "link": "https://stackoverflow.com/questions/39750160/sfinae-to-determine-if-a-type-has-a-potentially-overloaded-method/39752143#39752143", "title": "SFINAE to determine if a type has a potentially overloaded method", "body": "<p>A proper duck type check is \"can your <code>xxx</code> be invoked with a specific signature, and its return value used in a certain context\".  Having an overloaded <code>xxx</code> is not useful, because it matters how it is used.</p>\n\n<p>We start with <code>can_apply</code></p>\n\n<pre><code>namespace details {\n  template&lt;template&lt;class...&gt;class Z, class, class...&gt;\n  struct can_apply:std::false_type{};\n  template&lt;template&lt;class...&gt;class Z, class...Ts&gt;\n  struct can_apply&lt;Z, std::void_t&lt;Z&lt;Ts...&gt;&gt;, Ts...&gt;:\n    std::true_type{};\n}\n\ntemplate&lt;template&lt;class...&gt;class Z, class...Ts&gt;\nusing can_apply=details::can_apply&lt;Z, void, Ts...&gt;;\n</code></pre>\n\n<p>which tells you if given arguments can be legally passed to some template.</p>\n\n<p>We then express the duck type we want:</p>\n\n<pre><code>template&lt;class T&gt;\nusing xxx_result = decltype( std::declval&lt;T&gt;().xxx() );\n\ntemplate&lt;class T&gt;\nusing can_xxx = can_apply&lt; xxx_result, T &gt;;\n</code></pre>\n\n<p>and <code>can_xxx&lt;T&gt;</code> is truthy or falsy depending on if we can do a <code>t.xxx()</code> or not.</p>\n\n<p>If we want a type restriction, we just:</p>\n\n<pre><code>template&lt;class T, class R&gt;\nusing xxx_result_as_R = decltype( R(std::declval&lt;T&gt;().xxx()) );\ntemplate&lt;class T, class R&gt;\nusing can_xxx_as_R = can_apply&lt; xxx_result_as_R, T, R &gt;;\n</code></pre>\n\n<p>so if you want <code>xxx</code> to return something <code>int</code>-able, we get:</p>\n\n<pre><code>template&lt;class T&gt;\nusing valid_xxx = can_xxx_as_R&lt;T, int&gt;;\n</code></pre>\n"}], "owner": {"reputation": 13260, "user_id": 6612932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3mwe.jpg?s=128&g=1", "display_name": "rgmt", "link": "https://stackoverflow.com/users/6612932/rgmt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 366, "favorite_count": 1, "accepted_answer_id": 39752143, "answer_count": 2, "score": 3, "last_activity_date": 1475096662, "creation_date": 1475072216, "question_id": 39750160, "link": "https://stackoverflow.com/questions/39750160/sfinae-to-determine-if-a-type-has-a-potentially-overloaded-method", "title": "SFINAE to determine if a type has a potentially overloaded method", "body": "<p>I was looking for an SFINAE solution to check at compile time if a type has a method. My goal is to check if a type is a valid <a href=\"https://en.wikipedia.org/wiki/Duck_typing\" rel=\"nofollow\">\"duck type\"</a>, but instead of a useless compile error, I want to use <code>static_assert</code> to provide an informative message.</p>\n\n<p>I found [this question], which provides a fairly good answer to my problem, except it fails when the type provides overload to the method:</p>\n\n<pre><code>template&lt;typename...&gt; // parameter pack here\nusing void_t = void;\n\ntemplate&lt;typename T, typename = void&gt;\nstruct has_xxx : std::false_type {};\n\ntemplate&lt;typename T&gt;\nstruct has_xxx&lt;T, void_t&lt;decltype(&amp;T::xxx)&gt;&gt; :\n  std::is_member_function_pointer&lt;decltype(&amp;T::xxx)&gt;{};\n</code></pre>\n\n<p>This works fine with the following example, and differentiate method and member variable:</p>\n\n<pre><code>struct Foo { int xxx() {return 0;}; };\nstruct Foo2 {};\nstruct Foo3{ static double xxx;};\ndouble Foo3::xxx = 42;\n\nint main() {\n   static_assert(has_xxx&lt;Foo&gt;::value, \"\");\n   static_assert(!has_xxx&lt;Foo2&gt;::value, \"\");\n   static_assert(!has_xxx&lt;Foo3&gt;::value, \"\");\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/4ece49409d3bd1e2\" rel=\"nofollow\">Original live demo</a></p>\n\n<p>The code fails if there is an overload:</p>\n\n<pre><code>struct Foo { int xxx() {return 0;}  void xxx(int){} };\n\nint main() {\n   static_assert(has_xxx&lt;Foo&gt;::value, \"\");\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/45adf7ea6609a29c\" rel=\"nofollow\">Failing live demo with overloaded method</a></p>\n\n<p>How can this code be improved to handle overloading?</p>\n"}, {"tags": ["c++", "linux", "pipe", "fork", "dup"], "answers": [{"comments": [{"owner": {"reputation": 76, "user_id": 6480704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AYXAu.png?s=128&g=1", "display_name": "kroketor", "link": "https://stackoverflow.com/users/6480704/kroketor"}, "edited": false, "score": 0, "creation_date": 1475084685, "post_id": 39750680, "comment_id": 66804644, "body": "I&#39;m not sure if i understand you completely. You mean that, if its all well set in the parent, the child process can communicate with the parent simply using <code>printf</code>to send and <code>scanf</code> to receive?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "reply_to_user": {"reputation": 76, "user_id": 6480704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AYXAu.png?s=128&g=1", "display_name": "kroketor", "link": "https://stackoverflow.com/users/6480704/kroketor"}, "edited": false, "score": 1, "creation_date": 1475087760, "post_id": 39750680, "comment_id": 66806487, "body": "@kroketor Yes, that&#39;s pretty much the point of the &quot;using dup&quot; example of the page you linked."}], "tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": true, "score": 1, "last_activity_date": 1475073574, "creation_date": 1475073574, "answer_id": 39750680, "question_id": 39750153, "link": "https://stackoverflow.com/questions/39750153/requirements-in-forked-child-programs-to-have-a-pipe-communication-with-the-laun/39750680#39750680", "title": "Requirements in forked child programs to have a pipe communication with the launcher program", "body": "<p>In the article, the child process uses <code>dup</code> and <code>dup2</code> (<code>dup2</code> is better) to set up one of the file descriptors as standard input.<br>\nThe process is similar for standard output (you'll need a separate <code>pipe</code> and associated file descriptors).</p>\n\n<p>The parent can then communicate with the child's stdio by reading and writing to its end of the pipe(s).</p>\n\n<p>When the child is <code>exec</code>ed, these file descriptors are inherited, so the same pipe endpoints will remain standard input and output in the child process.</p>\n\n<p>In other words, if you set up the file descriptors with <code>dup</code>/<code>dup2</code> like in the article, you don't need to do anything special in the <code>exec</code>ed process, you can just read and write on stdio.</p>\n"}], "owner": {"reputation": 76, "user_id": 6480704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AYXAu.png?s=128&g=1", "display_name": "kroketor", "link": "https://stackoverflow.com/users/6480704/kroketor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 39750680, "answer_count": 1, "score": 0, "last_activity_date": 1556989084, "creation_date": 1475072210, "last_edit_date": 1556989084, "question_id": 39750153, "link": "https://stackoverflow.com/questions/39750153/requirements-in-forked-child-programs-to-have-a-pipe-communication-with-the-laun", "title": "Requirements in forked child programs to have a pipe communication with the launcher program", "body": "<p>Let's say that I have a program called \"parent\" who uses fork() and execl() to launch another program called \"child\" and I want to keep communications between this two programs. It seems that the best way to keep this communications would bee using unnamed pipes. It's easy to found documentation and examples about the requirements in the \"parent\" program side but I haven't found the same in the \"child\" side.</p>\n\n<p>For example, I think this guide is good but don\u00b4t show what I have to do in the program launched whith exec in order to have communications between both programs, I have to use dup() in the \"parent\" to share the descriptors but who I do refer to the pipe correctly in the child side to establish a communication between both?:\n<a href=\"http://tldp.org/LDP/lpg/node11.html\" rel=\"nofollow noreferrer\">http://tldp.org/LDP/lpg/node11.html</a></p>\n"}, {"tags": ["c++", "c", "sockets", "udp", "data-processing"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6894052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0QdEl.jpg?s=128&g=1", "display_name": "nanasable", "link": "https://stackoverflow.com/users/6894052/nanasable"}, "edited": false, "score": 0, "creation_date": 1475137451, "post_id": 39750180, "comment_id": 66824891, "body": "Thank u very much! This helped :)"}], "tags": [], "owner": {"reputation": 2279, "user_id": 2767436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066110b639f57bb021509bfdc37461e0?s=128&d=identicon&r=PG&f=1", "display_name": "Rene", "link": "https://stackoverflow.com/users/2767436/rene"}, "is_accepted": true, "score": 1, "last_activity_date": 1475072255, "creation_date": 1475072255, "answer_id": 39750180, "question_id": 39750059, "link": "https://stackoverflow.com/questions/39750059/c-multiple-udp-socket-data-processing/39750180#39750180", "title": "C++ multiple UDP socket data processing", "body": "<p>Don't call select() for each socket separately. Set up a select with both sockets, and then process the available data (from one or two of the sockets).</p>\n"}, {"tags": [], "owner": {"reputation": 112091, "user_id": 2231815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1597c347e309f696ff1738128444702b?s=128&d=identicon&r=PG", "display_name": "rakib_", "link": "https://stackoverflow.com/users/2231815/rakib"}, "is_accepted": false, "score": 0, "last_activity_date": 1475072886, "creation_date": 1475072886, "answer_id": 39750424, "question_id": 39750059, "link": "https://stackoverflow.com/questions/39750059/c-multiple-udp-socket-data-processing/39750424#39750424", "title": "C++ multiple UDP socket data processing", "body": "<p><code>select</code> can handle multiple sockets, so use such way. Doing multiple <code>recvfrom</code> on a single loop is wrong. Rather use select to find out on which socket you have data and from remoteaddr parameter find out from where these data are coming from.</p>\n"}], "owner": {"reputation": 3, "user_id": 6894052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0QdEl.jpg?s=128&g=1", "display_name": "nanasable", "link": "https://stackoverflow.com/users/6894052/nanasable"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 727, "favorite_count": 0, "accepted_answer_id": 39750180, "answer_count": 2, "score": 0, "last_activity_date": 1475072886, "creation_date": 1475072009, "question_id": 39750059, "link": "https://stackoverflow.com/questions/39750059/c-multiple-udp-socket-data-processing", "title": "C++ multiple UDP socket data processing", "body": "<p>I'm a beginner in c++ socket programming and I have a problem that I'm trying to handle for some time. </p>\n\n<p>My task is to process data received from two different sensors. I receive the data through UDP socket and then process the packet (obviously all of that happens in a while loop). I use the data to real time visualisation so I need the whole process to be quick.</p>\n\n<p>Everything is all right as long as I try to receive data from one sensor. When I want to do it with two sensors (and hence with two recvfrom() functions in one loop), here is when my problems begin. The processing is really slow and consequently I miss some packets. I'm aware of the fact that the recvfrom() function is a blocking call and I handled it with select() function, thus I know it's not the source of the problem. </p>\n\n<p>Here is the part of the code that seems to be responsible for the fuss:</p>\n\n<pre><code> while (1)\n{\n    SingleSocketReceiver(&amp;socket_1, port_1, scene_1, ptrScene_1, model);\n    SingleSocketReceiver(&amp;socket_2, port_2, scene_2, ptrScene_2, model);\n }\n</code></pre>\n\n<p>When I comment the second SingleSocketReceiver() function, everything works fine. </p>\n\n<p>And here is what the SingleSocketReceiver() function comprises:</p>\n\n<pre><code>int SingleSocketReceiver(UDPsocket* socket, uint16_t port,pcl::PointCloud&lt;pcl::PointXYZ&gt; scene, pcl::PointCloud&lt;pcl::PointXYZ&gt;::Ptr ptrScene,  pcl::PointCloud&lt;pcl::PointXYZ&gt;::Ptr model)\n</code></pre>\n\n<p>{</p>\n\n<pre><code>struct timeval tv;\nfd_set rfds;\n\nFD_ZERO(&amp;rfds);\nFD_SET(socket-&gt;pSocket,&amp;rfds);\n\ntv.tv_sec = 1;\ntv.tv_usec = 0;\n\n    if ((socket-&gt;rc = select(FD_SETSIZE,&amp;rfds,NULL,NULL,&amp;tv)) &lt; 0)\n    {\n        printf(\"Port No. %d: ERROR! - no data received!\\n\", port);\n        return RESULT_ERROR;\n    }\n\n   else if (socket-&gt;rc == 0)\n    {\n      printf(\"Port No. %d: Timeout - no data received!\\n\", port);\n      return RESULT_ERROR;\n\n    }\n    socket-&gt;rc=recvfrom(socket-&gt;pSocket,(char*)socket-&gt;udpPacketBuf,UDP_PACKET_BUF_LEN,0,&amp;socket-&gt;remoteAddr,&amp;socket-&gt;remoteAddrLen);\n\n    if(socket-&gt;rc==SOCKET_ERROR)\n    {\n        printf(\"Socket for port No.%d: Error in recvfrom\\n\", port);\n        return RESULT_ERROR;\n    }\n\n    else\n    {\n        // Check the packet counter for missing packets\n        if (socket-&gt;previous_packet_counter_valid)\n        {\n\n            if ((socket-&gt;ph-&gt;PacketCounter - socket-&gt;previous_packet_counter) != 1)\n            {\n                printf(\"Port No.%d: Packet Counter jumped from %u to %u (missing packets; try to redirect output)\\n\", port, socket-&gt;previous_packet_counter, socket-&gt;ph-&gt;PacketCounter);\n\n                socket-&gt;startOfChannelFound = 0;\n            }\n        }\n        socket-&gt;previous_packet_counter = socket-&gt;ph-&gt;PacketCounter;\n        socket-&gt;previous_packet_counter_valid = 1;\n        // is this the channel with our data?\n        if (socket-&gt;ph-&gt;ChannelID == socket-&gt;customerDataChannel)\n        {\n\n\n            if (socket-&gt;ph-&gt;IndexOfPacketInChannel == 0)\n            {\n                socket-&gt;startOfChannelFound = 1;\n\n                if (socket-&gt;channel_buf_size == 0)\n                {\n                    socket-&gt;channel_buf_size = socket-&gt;ph-&gt;TotalLengthOfChannel;\n                    socket-&gt;channelBuf = (int8_t*) malloc(socket-&gt;channel_buf_size);\n                }\n\n                // as we reuse the buffer we clear it at the beginning of a transmission\n                memset(socket-&gt;channelBuf, 0, socket-&gt;channel_buf_size);\n                socket-&gt;pos_in_channel = 0;\n            }\n\n           if (socket-&gt;startOfChannelFound)\n            {\n                processPacket(socket-&gt;udpPacketBuf, socket-&gt;rc, socket-&gt;channelBuf, socket-&gt;channel_buf_size, &amp;socket-&gt;pos_in_channel);\n\n                if (socket-&gt;ph-&gt;IndexOfPacketInChannel == socket-&gt;ph-&gt;NumberOfPacketsInChannel -1)\n                {\n\n\n                    processChannel8(socket-&gt;channelBuf, socket-&gt;pos_in_channel);\n                    displayData();\n                    createPointCloud(scene, ptrScene, model);\n                 }\n            }\n        }\n}\nreturn RESULT_OK;\n</code></pre>\n\n<p>}</p>\n\n<p>I would be extremely grateful if someone suggest what the real problem might be and what are the possible ways of handling it. Unfortunately, I cannot show you my whole source code as I do it for my work and I am not allowed to present it publicly. </p>\n\n<p>Please forgive me my lack of knowledge in this field. I'd willingly answer all of the additional questions.</p>\n"}, {"tags": ["c++", "qt", "icons"], "answers": [{"tags": [], "owner": {"reputation": 26196, "user_id": 1841194, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e65b668131c96399c25c6fae3fff8da5?s=128&d=identicon&r=PG&f=1", "display_name": "frogatto", "link": "https://stackoverflow.com/users/1841194/frogatto"}, "is_accepted": false, "score": 0, "last_activity_date": 1475072710, "last_edit_date": 1475072710, "creation_date": 1475071988, "answer_id": 39750055, "question_id": 39749874, "link": "https://stackoverflow.com/questions/39749874/use-a-system-icon-in-the-seticon-method-of-qwidget/39750055#39750055", "title": "Use a system icon in the setIcon method of QWidget", "body": "<p>I think you're looking for <a href=\"http://doc.qt.io/qt-5/qicon.html#fromTheme\" rel=\"nofollow\"><code>QIcon::fromTheme</code></a> method.</p>\n\n<p>Example:</p>\n\n<pre><code>QIcon undoicon = QIcon::fromTheme(\"edit-undo\");\n</code></pre>\n\n<blockquote>\n  <p><strong>Note:</strong> By default, only X11 will support themed icons. In order to use themed icons on Mac and Windows, you will have to bundle a compliant theme in one of your <code>themeSearchPaths()</code> and set the appropriate <code>themeName()</code>.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 6398, "user_id": 4284627, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2e017633cda5465e6683c74992cdec5e?s=128&d=identicon&r=PG", "display_name": "Donald Duck", "link": "https://stackoverflow.com/users/4284627/donald-duck"}, "edited": false, "score": 0, "creation_date": 1475072658, "post_id": 39750083, "comment_id": 66796779, "body": "You have to create an object of type <code>QFileIconProvider</code> to use the <code>icon</code> method. Like this: <code>QFileIconProvider iconProvider; iconProvider.icon(QFileIconProvider::Folder)</code>."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 6398, "user_id": 4284627, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2e017633cda5465e6683c74992cdec5e?s=128&d=identicon&r=PG", "display_name": "Donald Duck", "link": "https://stackoverflow.com/users/4284627/donald-duck"}, "edited": false, "score": 0, "creation_date": 1475073690, "post_id": 39750083, "comment_id": 66797545, "body": "@DonaldDuck I didn&#39;t say otherwise :) I&#39;m giving fully qualified method names - I don&#39;t imply these are static methods, who told ya that :)"}, {"owner": {"reputation": 6398, "user_id": 4284627, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2e017633cda5465e6683c74992cdec5e?s=128&d=identicon&r=PG", "display_name": "Donald Duck", "link": "https://stackoverflow.com/users/4284627/donald-duck"}, "edited": false, "score": 0, "creation_date": 1475077429, "post_id": 39750083, "comment_id": 66800232, "body": "The way you wrote it, it looks like they&#39;re supposed to be used as static methods. It would be good to post a code with a concrete example of how to use it. When I first saw this, I thought they were static methods, and I didn&#39;t understand they weren&#39;t until the compiler gave me an error."}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1475072076, "last_edit_date": 1592644375, "creation_date": 1475072076, "answer_id": 39750083, "question_id": 39749874, "link": "https://stackoverflow.com/questions/39749874/use-a-system-icon-in-the-seticon-method-of-qwidget/39750083#39750083", "title": "Use a system icon in the setIcon method of QWidget", "body": "<ul>\n<li><p>Use <code>QFileIconProvider::icon(IconType)</code> to get an icon of a particular kind, from a small selection of types.</p>\n<p>In your particular case, you'd want <code>icon(QFileIconProvider::Folder)</code>.</p>\n</li>\n<li><p>Use <code>QFileIconProvider::icon(const QFileInfo &amp;)</code> to get an icon for a particular directory entry.</p>\n</li>\n<li><p>Use <code>QIcon::fromTheme(const QString &amp;, const QIcon &amp; = QIcon())</code> to get a theme icon on Linux/X11.</p>\n</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 15, "user_id": 5785726, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pF-JE9mXPx0/AAAAAAAAAAI/AAAAAAAAABk/TGLdjlGJ9as/photo.jpg?sz=128", "display_name": "Gary Wang", "link": "https://stackoverflow.com/users/5785726/gary-wang"}, "is_accepted": false, "score": 0, "last_activity_date": 1503485422, "creation_date": 1503485422, "answer_id": 45837630, "question_id": 39749874, "link": "https://stackoverflow.com/questions/39749874/use-a-system-icon-in-the-seticon-method-of-qwidget/45837630#45837630", "title": "Use a system icon in the setIcon method of QWidget", "body": "<p>For linux/X11, maybe you are looking for <a href=\"https://doc.qt.io/qt-5/qmimedatabase.html#mimeTypesForFileName\" rel=\"nofollow noreferrer\"><code>QMimeDatabase::mimeTypesForFileName</code></a> and <a href=\"https://doc.qt.io/qt-5/qicon.html#fromTheme\" rel=\"nofollow noreferrer\"><code>QIcon::fromTheme</code></a>.</p>\n\n<p>Refer to <a href=\"https://stackoverflow.com/a/45739529/5785726\">https://stackoverflow.com/a/45739529/5785726</a> for a example</p>\n"}], "owner": {"reputation": 6398, "user_id": 4284627, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2e017633cda5465e6683c74992cdec5e?s=128&d=identicon&r=PG", "display_name": "Donald Duck", "link": "https://stackoverflow.com/users/4284627/donald-duck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 639, "favorite_count": 0, "accepted_answer_id": 39750083, "answer_count": 3, "score": 0, "last_activity_date": 1503485422, "creation_date": 1475071500, "question_id": 39749874, "link": "https://stackoverflow.com/questions/39749874/use-a-system-icon-in-the-seticon-method-of-qwidget", "title": "Use a system icon in the setIcon method of QWidget", "body": "<p>I would like cross-platform a way to get a system icon, for example the folder icon <a href=\"https://i.stack.imgur.com/qBw25.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qBw25.png\" alt=\"folder icon\"></a> in the <code>setIcon</code> method of <code>QWidget</code>. Something like this:</p>\n\n<pre><code>QWidget *myWidget = new QWidget;\nmyWidget-&gt;setIcon(/*something to get a system icon*/);\n</code></pre>\n\n<p>Is this possible? If it is, how to do it?</p>\n"}, {"tags": ["c++", "c++11", "inheritance", "vector"], "comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 1, "creation_date": 1475071789, "post_id": 39749871, "comment_id": 66796081, "body": "This is not the code producing the error you&#39;re showing. <code>FiveStarGeneral</code> is missing a return type (since it&#39;s not a constructor, the class name is different). Please post the real code. And anyway, look up Object Slicing; you will see that what you&#39;re trying to achieve cannot work as-is."}, {"owner": {"reputation": 157, "user_id": 6689304, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b78ef1b74d3631aa0388343d4b26983f?s=128&d=identicon&r=PG&f=1", "display_name": "Redis1001", "link": "https://stackoverflow.com/users/6689304/redis1001"}, "edited": false, "score": 0, "creation_date": 1475071838, "post_id": 39749871, "comment_id": 66796115, "body": "sorry. i already edited the code.. that was a miss. this is now the real code and the real error. sorry guys"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1475071845, "post_id": 39749871, "comment_id": 66796122, "body": "Even if your code compiled, it likely wouldn&#39;t do what you expected. See <a href=\"http://stackoverflow.com/q/274626/2069064\">object slicing</a>."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 1, "creation_date": 1475071971, "post_id": 39749871, "comment_id": 66796232, "body": "Your program compiles just fine <a href=\"http://coliru.stacked-crooked.com/a/9333bd90fac38b37\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 157, "user_id": 6689304, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b78ef1b74d3631aa0388343d4b26983f?s=128&d=identicon&r=PG&f=1", "display_name": "Redis1001", "link": "https://stackoverflow.com/users/6689304/redis1001"}, "edited": false, "score": 0, "creation_date": 1475072078, "post_id": 39749871, "comment_id": 66796324, "body": "I&#39;m using visual studio 2015 and the error is what i posted above."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1475072406, "post_id": 39750008, "comment_id": 66796586, "body": "&quot;You cannot change a derived class to a base class by value&quot; is plain wrong (although it introduces object slicing)"}, {"owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "edited": false, "score": 0, "creation_date": 1475072460, "post_id": 39750008, "comment_id": 66796621, "body": "Yeah I saw it compiles in gcc/clang. but it seems like not in VS. I was surprised this compiles without warnings though. I will edit this."}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1475092402, "post_id": 39750008, "comment_id": 66808837, "body": "If it does not compile with VS, this is a &quot;bug&quot; in VS. And there is no need for warning here, object slicing is not bad, you just have to be aware of it."}], "tags": [], "owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "is_accepted": false, "score": 0, "last_activity_date": 1475072633, "last_edit_date": 1495541704, "creation_date": 1475071846, "answer_id": 39750008, "question_id": 39749871, "link": "https://stackoverflow.com/questions/39749871/pushing-derived-class-to-vector-of-base-class-in-c/39750008#39750008", "title": "Pushing derived class to vector of base class in c++", "body": "<p>It's a c++ restriction. You cannot assign the value of a derived class to it's base class without consequences. This may compiles but will result in some unexpected behaviors. It could copy the object into an instance of the base class (this losing the information it has from the derived class). This is called <a href=\"https://stackoverflow.com/questions/274626/what-is-object-slicing\">object slicing</a></p>\n\n<p>You have to use references or pointers for this. So you can change your vector to </p>\n\n<pre><code>std::vector&lt;std::unique_ptr&lt;Official&gt;&gt; aoOfficialStack;\n</code></pre>\n\n<p>and assign like:</p>\n\n<pre><code>aoOfficialStack.push_back(std::make_unique&lt;General&gt;(1, 2, 3, aiBoardPosition));\n</code></pre>\n\n<p>a <code>shared_ptr</code> would also be an alternative it depends on the usage.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 1, "creation_date": 1475072320, "post_id": 39750100, "comment_id": 66796524, "body": "Correct answer. I think the example is incomplete."}, {"owner": {"reputation": 157, "user_id": 6689304, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b78ef1b74d3631aa0388343d4b26983f?s=128&d=identicon&r=PG&f=1", "display_name": "Redis1001", "link": "https://stackoverflow.com/users/6689304/redis1001"}, "edited": false, "score": 0, "creation_date": 1475073748, "post_id": 39750100, "comment_id": 66797590, "body": "Yes, sorry code is correct but inclusion of header files in other source files cause circular dependencies resulting to redefenitions and thus, the problem in visual studio. I already resolved this when I resolved the circular dependency. Thank you!!"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 157, "user_id": 6689304, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b78ef1b74d3631aa0388343d4b26983f?s=128&d=identicon&r=PG&f=1", "display_name": "Redis1001", "link": "https://stackoverflow.com/users/6689304/redis1001"}, "edited": false, "score": 0, "creation_date": 1475077629, "post_id": 39750100, "comment_id": 66800365, "body": "@Redis1001 always create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. If your exmaple code doesn&#39;t reproduce the problem, then it isn&#39;t very useful."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 1, "last_activity_date": 1475072479, "last_edit_date": 1475072479, "creation_date": 1475072110, "answer_id": 39750100, "question_id": 39749871, "link": "https://stackoverflow.com/questions/39749871/pushing-derived-class-to-vector-of-base-class-in-c/39750100#39750100", "title": "Pushing derived class to vector of base class in c++", "body": "<p>Your example program <a href=\"http://coliru.stacked-crooked.com/a/9333bd90fac38b37\" rel=\"nofollow\">compiles</a>. Either your example is incomplete, or your compiler isn't standard compliant.</p>\n\n<p>The program is well formed and has defined behaviour. The behaviour might not be what you expect however. Object slicing is an obscure language feature that beginners may find counterintuitive. It makes no sense to create an instance of <code>General</code>, if you're only going to use the <code>Official</code> sub object. Ask yourself: why not create an instance of <code>Official</code> in the first place?</p>\n"}], "owner": {"reputation": 157, "user_id": 6689304, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b78ef1b74d3631aa0388343d4b26983f?s=128&d=identicon&r=PG&f=1", "display_name": "Redis1001", "link": "https://stackoverflow.com/users/6689304/redis1001"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1290, "favorite_count": 0, "accepted_answer_id": 39750100, "answer_count": 2, "score": 1, "last_activity_date": 1475072633, "creation_date": 1475071495, "last_edit_date": 1475071802, "question_id": 39749871, "link": "https://stackoverflow.com/questions/39749871/pushing-derived-class-to-vector-of-base-class-in-c", "title": "Pushing derived class to vector of base class in c++", "body": "<p>I have the following code:</p>\n\n<pre><code>class Official {\n    public:\n        explicit Official(int iRow, int iColumn, int iRankHolder, int** aiBoardHolder);\n};\n\nclass General : public Official {\n    public: \n        explicit General(int iRow, int iColumn, int iRankHolder, int** aiBoardHolder) : Official(iRow, iColumn, iRankHolder, aiBoardHolder) {};\n};\n\nclass Map {\n    private:\n        std::vector&lt;Official&gt; aoOfficialStack;\n\n    public:\n        void generateOfficialObject();\n};\n\nvoid Map::generateOfficialObject() {\n    aoOfficialStack.push_back(General(1, 2, 3, aiBoardPosition));\n}\n</code></pre>\n\n<p>Question is why am I getting this error after calling generateOfficalObject()?</p>\n\n<p>Error   C2664   'void std::vector>::push_back(const Official &amp;)': cannot convert argument 1 from 'General' to 'Official &amp;&amp;'    Project c:\\users\\user\\desktop\\project\\project\\board\\board.cpp   12</p>\n\n<p>Thank you very much!</p>\n"}, {"tags": ["c++", "opencv", "kalman-filter"], "answers": [{"tags": [], "owner": {"reputation": 133, "user_id": 2522981, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/c2f151162a8b7bd87d0d6e2175e27f59?s=128&d=identicon&r=PG", "display_name": "user2522981", "link": "https://stackoverflow.com/users/2522981/user2522981"}, "is_accepted": false, "score": 0, "last_activity_date": 1475160193, "creation_date": 1475160193, "answer_id": 39773395, "question_id": 39749669, "link": "https://stackoverflow.com/questions/39749669/kalman-filter-using-opencv-and-c/39773395#39773395", "title": "Kalman Filter using OpenCV and C++", "body": "<p>I was able to solve my problem. I was supposed to set the type of the Kalman Filter to CV_64FC1 as all the values I was providing were of type double. I also changed the Mat initializing the transitionMatrix to type double.\nThis is my final code</p>\n\n<pre><code>p-&gt;kalman_filter = new cv::KalmanFilter(state_dim, measurement_dim, 0, CV_64FC1);\np-&gt;kalman_filter-&gt;transitionMatrix = *(cv::Mat_&lt;double&gt;(state_dim, state_dim)\n                                                  &lt;&lt; 1,0,1,0, 0,1,0,1,\n                                                  0,0,TIME_DIFFERENCE,0,\n                                                  0,0,0,TIME_DIFFERENCE);\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 2522981, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/c2f151162a8b7bd87d0d6e2175e27f59?s=128&d=identicon&r=PG", "display_name": "user2522981", "link": "https://stackoverflow.com/users/2522981/user2522981"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1142, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1475160193, "creation_date": 1475070987, "question_id": 39749669, "link": "https://stackoverflow.com/questions/39749669/kalman-filter-using-opencv-and-c", "title": "Kalman Filter using OpenCV and C++", "body": "<p>Initialization:</p>\n\n<pre><code>    p-&gt;kalman_filter = new cv::KalmanFilter(state_dim, measurement_dim, 0);\n    p-&gt;kalman_filter-&gt;transitionMatrix = *(cv::Mat_&lt;float&gt;(state_dim, state_dim)\n                                                  &lt;&lt; 1,0,1,0, 0,1,0,1,\n                                                  0,0,TIME_DIFFERENCE,0,\n                                                  0,0,0,TIME_DIFFERENCE);\n    setIdentity(p-&gt;kalman_filter-&gt;measurementMatrix);\n    setIdentity(p-&gt;kalman_filter-&gt;processNoiseCov, cv::Scalar::all(1e-4));\n    setIdentity(p-&gt;kalman_filter-&gt;measurementNoiseCov, cv::Scalar::all(1e-1));\n    setIdentity(p-&gt;kalman_filter-&gt;errorCovPost, cv::Scalar::all(.1));\n</code></pre>\n\n<p>TIME_DIFFERENCE is constant.</p>\n\n<pre><code>    cv::Mat new_state;\n    track t = p-&gt;tracks.at(track_id);\n\n    cv::transpose((cv::Mat)t.estimated_state, p-&gt;kalman_filter-&gt;statePost);\n    t.estimated_error_covariance.copyTo(p-&gt;kalman_filter-&gt;errorCovPost);\n\n    new_state = p-&gt;kalman_filter-&gt;predict();\n</code></pre>\n\n<p>The code crashes at predict, the error originating from <code>statePre = transitionMatrix*statePost;</code> in the predict() function. The error is due to the failure of the assertion for type. I am using transpose as the t.estimated_state is the transpose of what the statePost should be set to.I have tried using convertTo() to change the type of the t.estimated_state.Using setTo() for statePost also doesn't work.</p>\n\n<p>Could someone point out where I am going wrong?</p>\n"}, {"tags": ["c++", "windows", "usb"], "comments": [{"owner": {"reputation": 70803, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "edited": false, "score": 0, "creation_date": 1475073753, "post_id": 39749629, "comment_id": 66797597, "body": "Right after the call to <code>CreateFile</code> fails, you should run <code>GetLastError</code> so we can get more information.  Also, for debugging, you should print <code>oDevicePath</code> right before calling <code>CreateFile</code> and give us some examples of paths that work and paths that do not work."}, {"owner": {"reputation": 7207, "user_id": 410847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a354e99dd64adf823aa72c4ee22a1fc?s=128&d=identicon&r=PG", "display_name": "Turbo J", "link": "https://stackoverflow.com/users/410847/turbo-j"}, "edited": false, "score": 0, "creation_date": 1475167730, "post_id": 39749629, "comment_id": 66845888, "body": "Could be a basic USB communication error. Try a different USB port and cable."}, {"owner": {"reputation": 880, "user_id": 1257749, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0d8880dd65749ac4fbdf767d44b363a7?s=128&d=identicon&r=PG", "display_name": "Martze", "link": "https://stackoverflow.com/users/1257749/martze"}, "edited": false, "score": 0, "creation_date": 1476258650, "post_id": 39749629, "comment_id": 67264360, "body": "the third cable did the trick ... thanks"}], "owner": {"reputation": 880, "user_id": 1257749, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0d8880dd65749ac4fbdf767d44b363a7?s=128&d=identicon&r=PG", "display_name": "Martze", "link": "https://stackoverflow.com/users/1257749/martze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 161, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1475132903, "creation_date": 1475070909, "last_edit_date": 1475132903, "question_id": 39749629, "link": "https://stackoverflow.com/questions/39749629/usb-device-cannot-be-opened-sometimes", "title": "USB Device cannot be opened sometimes", "body": "<p>I get a list of paths of all available devices with a specific GUID using \n<code>SetupDiGetClassDevs()</code>, <code>SetupDiEnumDeviceInterfaces()</code> and <code>SetupDiGetDeviceInterfaceDetail()</code>. This works quite well. </p>\n\n<p>Then i try to open the USB device using the device path acquired:</p>\n\n<pre><code>// open this device\nHANDLE hUsbDevice = CreateFile(oDevicePath, \n                               GENERIC_READ|GENERIC_WRITE,  \n                               0/*FILE_SHARE_READ|FILE_SHARE_WRITE*/, \n                               NULL, \n                               OPEN_EXISTING, \n                               FILE_FLAG_OVERLAPPED, \n                               NULL);\n</code></pre>\n\n<p><del>This works always if the device was not plugged in before application start and if the device has been removed and plugged in after a few seconds.</del></p>\n\n<p><del>If the device has already been plugged in at application start and has not been removed and plugged in again, the returned handle is always <code>INVALID_HANDLE_VALUE</code>.</del></p>\n\n<p><del>How can i open the device even if it was connected before?</del></p>\n\n<p>I didn't detect any pattern yet to determine when this succeeds. What can i do (in software) to always be able to open this device?</p>\n\n<p>Thank you for your help!</p>\n\n<hr>\n\n<hr>\n\n<p>More information:</p>\n\n<p>A devicePath that can be opened:\n<code>\\\\?\\usb#vid_cantTell&amp;pid_0200#6&amp;3ab10970&amp;0&amp;2#{that_proprietary_guid}</code></p>\n\n<p>A device Path that can't be opened:\n<code>\\\\?\\usb#vid_cantTell&amp;pid_0200#6&amp;3ab10970&amp;0&amp;2#{that_proprietary_guid}</code></p>\n\n<p>Result of <code>GetLastError()</code>: 31 (0x1F) -> Some Driver Problem i guess</p>\n"}, {"tags": ["c++", "string", "cout", "c-strings", "c-str"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1475070573, "post_id": 39749384, "comment_id": 66795082, "body": "A std::string is not(!) a null terminated C-string It may  or may not contain a &#39;\\0&#39; (even in the middle),"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1475070620, "post_id": 39749384, "comment_id": 66795124, "body": "... your loop is wrong"}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 4, "creation_date": 1475070698, "post_id": 39749384, "comment_id": 66795182, "body": "You mistyped <code>b = a;</code>."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1475070800, "post_id": 39749384, "comment_id": 66795269, "body": "You need to allocate space in <code>b</code> before you start overwriting its characters using <code>b[n]</code>. So <code>b.resize(...)</code> would be needed. Otherwise you need to add each char to the end using <code>b += a[i];</code>. Its probably worth trying to find a string tutorial."}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 1, "last_activity_date": 1475132936, "last_edit_date": 1475132936, "creation_date": 1475070715, "answer_id": 39749546, "question_id": 39749384, "link": "https://stackoverflow.com/questions/39749384/c-string-formed-by-copying-index-wise-characters-from-other-already-initialise/39749546#39749546", "title": "c++ string formed by copying index wise characters from other already initialised string. Not able to print newly formed string using cout", "body": "<p><code>b</code> is empty. Assigning to <code>b[i]</code> has undefined behaviour for any value of <code>i</code>.</p>\n\n<p><code>a[i]!='\\0'</code> condition is only valid if your compiler supports C++11 or later. Prior to C++11 <code>str[str.size()]</code> has undefined behaviour.</p>\n\n<hr>\n\n<p>You can fix first problem by first resizing <code>b</code>. If you have C++11 support, a range-based loop would be much simpler. If you don't have C++11, then following is a valid option:</p>\n\n<pre><code>b.resize(a.size());\nfor(i=0; i &lt; a.size(); i++)\n</code></pre>\n\n<hr>\n\n<p>Writing a loop to copy a string is a bit silly though. You can simply use assignment:</p>\n\n<pre><code>b = a;\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p>a) I dont know when a cpp string is null terminated and when it is not but in this case the a string after initialisation was null terminated because the loop ended and it ended after the last character of the string a because on coming out of the loop and doing <code>cout&lt;&lt;a[i];</code> the last chararcter of a is printed.</p>\n</blockquote>\n\n<p>(Assuming you aren't compiling with C++11 enabled) That happens to be what you observed when you compiled with your compiler on your operating system and ran the program on your cpu at that particular time. There is no guarantee that the behaviour is the same if any factor changes.</p>\n\n<blockquote>\n  <p>b) Within the loop, after the assignment when I include <code>cout&lt;&lt;b[i];</code> it does print out the value that we expect was just assigned to <code>b[i]</code>. So <code>b[i]</code> does exist for some odd reason</p>\n</blockquote>\n\n<p>It doesn't mean that <code>b[1]</code> \"exists\". The behaviour is undefined.</p>\n\n<blockquote>\n  <p>c) Outside the for loop, at the end of the program, when I <code>cout&lt;&lt;b[2];</code> it does print the third char of the string. And if I do <code>cout&lt;&lt;b.c_str();</code> it prints out the entire string. Its only if I do <code>cout&lt;&lt; b;</code> that nothing gets printed. Why is this?</p>\n</blockquote>\n\n<p>This is because the behaviour is undefined.</p>\n"}, {"comments": [{"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 313, "user_id": 6521515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa5fec2ad4121c947b6d33be45011f99?s=128&d=identicon&r=PG&f=1", "display_name": "Zag", "link": "https://stackoverflow.com/users/6521515/zag"}, "edited": false, "score": 0, "creation_date": 1475129099, "post_id": 39749740, "comment_id": 66820186, "body": "@Zag I have edited my answer to answer your additional questions as best I could."}], "tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": false, "score": 2, "last_activity_date": 1475129239, "last_edit_date": 1475129239, "creation_date": 1475071168, "answer_id": 39749740, "question_id": 39749384, "link": "https://stackoverflow.com/questions/39749384/c-string-formed-by-copying-index-wise-characters-from-other-already-initialise/39749740#39749740", "title": "c++ string formed by copying index wise characters from other already initialised string. Not able to print newly formed string using cout", "body": "<p>You need to allocate space in <code>b</code> before you start overwriting its characters using <code>b[n]</code>. So <code>b.resize(...)</code> would be needed. Otherwise you need to add each char to the end using <code>b += a[i];</code>. </p>\n\n<p>Also <code>std::string</code> are not <em>null terminated</em> so please don't check for <code>\\0</code>,use their <code>size()</code>:</p>\n\n<p>Consider this:</p>\n\n<pre><code>int main()\n{\n    int i;\n\n    string a, b; // these are both empty\n\n    std::cout &lt;&lt; \"a.size() = \" &lt;&lt; a.size() &lt;&lt; '\\n';\n    std::cout &lt;&lt; \"b.size() = \" &lt;&lt; b.size() &lt;&lt; '\\n';\n\n    cin &gt;&gt; a; // now a contains something\n\n    std::cout &lt;&lt; \"a.size() = \" &lt;&lt; a.size() &lt;&lt; '\\n';\n    std::cout &lt;&lt; \"b.size() = \" &lt;&lt; b.size() &lt;&lt; '\\n';\n\n    // for(i = 0; a[i] != '\\0'; i++) // no don't test for null\n    // {\n    //  b[i] = a[i]; // no b has no spaces\n    // }\n\n    for(std::size_t i = 0; i &lt; a.size(); ++i)\n        b += a[i]; // increases b's size by one each time\n\n    std::cout &lt;&lt; \"b.size() = \" &lt;&lt; b.size() &lt;&lt; '\\n';\n\n    cout &lt;&lt; b;\n}\n</code></pre>\n\n<p>To answer the additional questions:</p>\n\n<p><strong>a)</strong> It's an internal implementation detail that <code>std::string</code> is null terminated. The fact is that the null terminating character is outside the legal bounds of the <em>public interface</em> and it is technically \"undefined behavior\" to access it. The <strong>correct</strong> way to find the end of the <code>std::string</code> is using its <code>size()</code> function or its <code>end()</code> iterator.</p>\n\n<p><strong>b)</strong> It is pure luck if there is memory allocated beyond the end of the string. Even if there is memory there it is not part of the string and will <strong>not</strong> be copied during a <strong>legal</strong> string operation like <code>a = b;</code>.</p>\n\n<p><strong>c)</strong> It's completely <strong>undefined</strong> behavior. Likely <code>std::cout &lt;&lt; b;</code> looks at the <code>size()</code> of the string which is <code>zero</code> and decides not to print anything because the <code>size()</code> is <code>zero</code> (see my example). However <code>c_str()</code> simply returnes the memory address of the beginning of the string. From the memory address alone <code>std::cout</code> is unable to tell how big the string that it comes from is supposed to be. Therefore it just keeps printing characters until it finds a null. It is pure luck if it prints what you are hoping for.</p>\n"}, {"tags": [], "owner": {"reputation": 476, "user_id": 4224811, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mokgf.jpg?s=128&g=1", "display_name": "Gabriel Vasconcelos", "link": "https://stackoverflow.com/users/4224811/gabriel-vasconcelos"}, "is_accepted": false, "score": 3, "last_activity_date": 1475071468, "creation_date": 1475071468, "answer_id": 39749858, "question_id": 39749384, "link": "https://stackoverflow.com/questions/39749384/c-string-formed-by-copying-index-wise-characters-from-other-already-initialise/39749858#39749858", "title": "c++ string formed by copying index wise characters from other already initialised string. Not able to print newly formed string using cout", "body": "<p>You may have noticed that <code>std::string</code> doesn't behave like a normal C-style string. It's important to notice that.</p>\n\n<p>The first thing is that direct assignment like that doesn't work. The real reason is that this not change the size of the string. You can find it out yourself by outputting <code>b.size()</code>, or checking that both <code>b.start()</code> and <code>b.end()</code> refer to the same char, <code>b[0]</code>.</p>\n\n<p>Your experiment would work if you first resized <code>b</code> to the same size as <code>a</code>.</p>\n\n<pre><code>b.resize(a.size());\n</code></pre>\n\n<p>Secondly, have a look in your loop. Don't compare to <code>\\0</code> as if it was a C-style string. Instead, check if <code>i &lt; a.size()</code>, as there's no guarantee a <code>std::string</code> will be null (<code>\\0</code>) terminated.</p>\n\n<p>What you really should do, although, is simply assign a to b, and b will have a copy of a as you intend.</p>\n\n<pre><code>b = a;\n</code></pre>\n"}], "owner": {"reputation": 313, "user_id": 6521515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa5fec2ad4121c947b6d33be45011f99?s=128&d=identicon&r=PG&f=1", "display_name": "Zag", "link": "https://stackoverflow.com/users/6521515/zag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 251, "favorite_count": 1, "answer_count": 3, "score": 0, "last_activity_date": 1475132936, "creation_date": 1475070339, "last_edit_date": 1475126492, "question_id": 39749384, "link": "https://stackoverflow.com/questions/39749384/c-string-formed-by-copying-index-wise-characters-from-other-already-initialise", "title": "c++ string formed by copying index wise characters from other already initialised string. Not able to print newly formed string using cout", "body": "<p>In C++, I created a new string (string class) by copying characters index wise from another string (string class) which was already initialized. </p>\n\n<p>But I am unable to print this new string to the screen using <code>cout</code>. Using <code>c_str()</code> I am able to print it using <code>cout</code>. But isn't <code>c_str()</code> needed only when using <code>printf()</code> because it needs a c type string? </p>\n\n<pre><code>#include &lt;cstring&gt;\n#include &lt;cmath&gt;\n#include &lt;cstdio&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\nusing namespace std;\n\nint main() {\n    int i;\n    string a,b;\n    cin&gt;&gt;a;\n    for(i=0;a[i]!='\\0';i++){\n        b[i]=a[i];\n    }\n    cout&lt;&lt;b;\n    return 0;\n}\n</code></pre>\n\n<p>EDIT: Thanks for the help! But I might not have been quite clear in my question, so these are the main problems I have. PLease read the following and if you could help me further, that would be great!  (Also, I understand <code>b=a;</code> is the easiest way to assign but I am trying to understand strings and hence the question.)</p>\n\n<p>a) I dont know when a cpp string is null terminated and when it is not but in this case the a string after initialisation was null terminated because the loop ended and it ended after the last character of the string a because on coming out of the loop and doing <code>cout&lt;&lt;a[i];</code> the last chararcter of a is printed. </p>\n\n<p>b) Within the loop, after the assignment when I include <code>cout&lt;&lt;b[i];</code> it does print out the value that we expect was just assigned to b[i]. So b[i] does exist for some odd reason.</p>\n\n<p>c) Outside the for loop, at the end of the program, when I <code>cout&lt;&lt;b[2];</code> it does print the third char of the string. And if I do <code>cout&lt;&lt;b.c_str();</code> it prints out the entire string. Its only if I do <code>cout&lt;&lt; b;</code> that nothing gets printed. Why is this?</p>\n"}, {"tags": ["c++", "escaping", "backspace"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1475069947, "post_id": 39749151, "comment_id": 66794529, "body": "You have 2 wrong assumptions:.1. <i>&quot;This should not happen because backspace only moves cursor one space back ...&quot;</i>. 2. <i>&quot;But,newline character does not flush the buffer ...&quot;</i> The latter is implementation dependend."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1475070338, "post_id": 39749151, "comment_id": 66794872, "body": "When your program exits the console probably prints a prompt that overwrites the &quot;!&quot;. Also <code>cout</code> gets flushed when your program exits regardless. How <code>\\b</code> works is nothing to do with <code>C++</code>. <code>C++</code> sends all characters you tell it to the console (or whatever else it happens to be connected to). How the console behaves depends on the console."}, {"owner": {"reputation": 31, "user_id": 5618417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/705cbda5a31025f68711c2ac6b610a18?s=128&d=identicon&r=PG&f=1", "display_name": "Dishank Agrawal", "link": "https://stackoverflow.com/users/5618417/dishank-agrawal"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1475070624, "post_id": 39749151, "comment_id": 66795128, "body": "So @\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6, can using <code>\\n</code> flush the buffer?"}, {"owner": {"reputation": 1693, "user_id": 6889435, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DKfVf.png?s=128&g=1", "display_name": "Kamila Szewczyk", "link": "https://stackoverflow.com/users/6889435/kamila-szewczyk"}, "edited": false, "score": 0, "creation_date": 1475070776, "post_id": 39749151, "comment_id": 66795252, "body": "You didnt flush the buffer. Better alternative here would be using printf, or consider ::std::cerr, because its flushed when you print something."}], "answers": [{"tags": [], "owner": {"reputation": 431, "user_id": 1268042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfe2e0f94747410f925b086a6010b474?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/1268042/chris"}, "is_accepted": false, "score": -1, "last_activity_date": 1475072742, "last_edit_date": 1475072742, "creation_date": 1475070856, "answer_id": 39749608, "question_id": 39749151, "link": "https://stackoverflow.com/questions/39749151/use-of-backspace-with-endl-and-n-in-c/39749608#39749608", "title": "Use of backspace with endl and \\n in C++", "body": "<p>I assume the output from your first program looks something like this?</p>\n\n<pre><code>$ ./hello\nHello World$ \n</code></pre>\n\n<p>If so, the <code>!</code> is not deleted from the buffer; it is clobbered when the shell prints the prompt.</p>\n\n<p>With regard to the second program, when the buffer is flushed only influences when <code>\\b</code> is sent to the terminal, not how it is processed.  The <code>\\b</code> is a part of the stream and a terminal happens to interpret this to mean \"back up one column\".  If this is not clear, take a look at the actual bytes sent to <em>stdout</em>:</p>\n\n<pre><code>$ ./hello2 | hexdump -C\n00000000  48 65 6c 6c 6f 20 57 6f  72 6c 64 21 08 0a 41 6e  |Hello World!..An|\n00000010  6f 74 68 65 72 20 4c 69  6e 65 0a                 |other Line.|\n0000001b\n</code></pre>\n\n<p>The <code>\\b</code> is followed by the <code>\\n</code> (<code>08</code> and <code>0a</code> respectively), matching what you wrote to <code>cout</code> in your program.</p>\n\n<p>Finally, <code>cout</code> is flushed when the program exits so it does not matter whether you pass <code>\\n</code> or <code>endl</code> in this example.  In fact, <code>\\n</code> will likely flush anyway since <em>stdout</em> is connected to a terminal.</p>\n"}], "owner": {"reputation": 31, "user_id": 5618417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/705cbda5a31025f68711c2ac6b610a18?s=128&d=identicon&r=PG&f=1", "display_name": "Dishank Agrawal", "link": "https://stackoverflow.com/users/5618417/dishank-agrawal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1100, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1475072742, "creation_date": 1475069733, "last_edit_date": 1475071778, "question_id": 39749151, "link": "https://stackoverflow.com/questions/39749151/use-of-backspace-with-endl-and-n-in-c", "title": "Use of backspace with endl and \\n in C++", "body": "<p>I have written a small C++ program to understand the use of <code>\\b</code>. The program is given below - </p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nint main(){\n    cout &lt;&lt; \"Hello World!\" &lt;&lt; \"\\b\";\n    return 0;\n}\n</code></pre>\n\n<p>So, this program gives the desired output <code>Hello World</code>.This should not happen because backspace only moves cursor one space back and not delete it from the buffer.So,why <code>!</code> is not printed?</p>\n\n<p>Now,Consider another program-</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nint main(){\n    cout &lt;&lt; \"Hello World!\" &lt;&lt; \"\\b\";\n    cout &lt;&lt; \"\\nAnother Line\\n\";\n    return 0;\n}\n</code></pre>\n\n<p>So, here the output is -\n<code>\nHello World!\nAnother Line\n</code>\nWhy does the backspace does not work here? Newline should not flush the buffer,so <code>!</code> should be deleted.What is the issue here?</p>\n\n<p>Also,when i add either <code>endl</code> or <code>\\n</code> after <code>\\b</code>,in both the cases,the output is <code>Hello World!</code>.But,newline character does not flush the buffer whereas <code>endl</code> flushes the buffer.So, how the output is same in both the cases?</p>\n"}, {"tags": ["c++", "qt", "doxygen", "static-analysis"], "comments": [{"owner": {"reputation": 1206, "user_id": 5140740, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1Gcmn.jpg?s=128&g=1", "display_name": "V-R", "link": "https://stackoverflow.com/users/5140740/v-r"}, "edited": false, "score": 0, "creation_date": 1475070729, "post_id": 39749142, "comment_id": 66795207, "body": "We use EXCLUDE_PATTERNS. Try this: <code>EXCLUDE_PATTERNS       = *&#47;include&#47;qt&#47;*</code>"}, {"owner": {"reputation": 111, "user_id": 4636660, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/6iRt2.png?s=128&g=1", "display_name": "azrdev", "link": "https://stackoverflow.com/users/4636660/azrdev"}, "reply_to_user": {"reputation": 1206, "user_id": 5140740, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1Gcmn.jpg?s=128&g=1", "display_name": "V-R", "link": "https://stackoverflow.com/users/5140740/v-r"}, "edited": false, "score": 0, "creation_date": 1475137129, "post_id": 39749142, "comment_id": 66824662, "body": "@V-R does not work, the Qt types are still in the include dependency graphs"}, {"owner": {"reputation": 824, "user_id": 4545530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b31967fe4702f501fc7ef3df61d408e?s=128&d=identicon&r=PG&f=1", "display_name": "mkiever", "link": "https://stackoverflow.com/users/4545530/mkiever"}, "edited": false, "score": 0, "creation_date": 1537996295, "post_id": 39749142, "comment_id": 91991983, "body": "Also searched around about a similar problem (glib dependency here). The only clunky work-around I found is <a href=\"https://stackoverflow.com/a/17886130/4545530\">stackoverflow.com/a/17886130/4545530</a>"}], "answers": [{"tags": [], "owner": {"reputation": 660, "user_id": 12118546, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Yr03fafHtWg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfc1mV5hNznH-F703LCwcqHTXsucg/photo.jpg?sz=128", "display_name": "Roman Pavelka", "link": "https://stackoverflow.com/users/12118546/roman-pavelka"}, "is_accepted": false, "score": 0, "last_activity_date": 1597136946, "creation_date": 1597136946, "answer_id": 63355063, "question_id": 39749142, "link": "https://stackoverflow.com/questions/39749142/exclude-qt-from-doxygen-header-dependency-graph/63355063#63355063", "title": "Exclude Qt from doxygen header dependency graph", "body": "<p>Bit outdated but I have found the answer. Set up the <code>INPUT_FILTER</code> (under Expert/Input in <code>doxywizard</code>) to</p>\n<pre><code>sed -e &quot;s:#include &lt;Q.*&gt;:// REMOVED:g&quot;\n</code></pre>\n<p>This will preprocess any file that Doxygen analyses and replace all <code>#include &lt;QAnything&gt;</code> with comment <code>// REMOVED</code>.</p>\n"}], "owner": {"reputation": 111, "user_id": 4636660, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/6iRt2.png?s=128&g=1", "display_name": "azrdev", "link": "https://stackoverflow.com/users/4636660/azrdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 306, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1597136946, "creation_date": 1475069718, "question_id": 39749142, "link": "https://stackoverflow.com/questions/39749142/exclude-qt-from-doxygen-header-dependency-graph", "title": "Exclude Qt from doxygen header dependency graph", "body": "<p>I have a Qt-based C++ project and a Doxyfile to generate a documentation website for it. I like the include dependency graphs enabled by <code>INCLUDE_GRAPH</code> and <code>INCLUDED_BY_GRAPH</code>. Sometimes, however, they get very cluttered by all the Qt headers included. (How) can I only display my own files there?\nI tried adding <code>EXCLUDE = /usr/include/qt</code>, to no avail. <a href=\"https://stackoverflow.com/questions/36987573/exclude-base-library-inclusions-from-doxygen-dependency-graph\">This question</a> has no answer, either.</p>\n"}, {"tags": ["c++", "c++11", "visual-c++", "stl"], "comments": [{"owner": {"reputation": 907, "user_id": 5344725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afe3363c7df76a6ddf2114b5b8793554?s=128&d=identicon&r=PG&f=1", "display_name": "Altainia", "link": "https://stackoverflow.com/users/5344725/altainia"}, "edited": false, "score": 0, "creation_date": 1475069972, "post_id": 39749095, "comment_id": 66794555, "body": "Regardless, I believe you still need a comparison function. Iterating through the map will give you key-value pairs, not just the values. And <code>true</code> is not by default comparable to <code>std::pair&lt;std::pair&lt;int,int&gt;,bool&gt;</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2487382"}, "edited": false, "score": 0, "creation_date": 1475070297, "post_id": 39749095, "comment_id": 66794841, "body": "use <code>map:equal_range</code> <a href=\"http://en.cppreference.com/w/cpp/container/map/equal_range\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/container/map/equal_range</a>"}, {"owner": {"reputation": 841, "user_id": 3450869, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4cd9f192289fd574ad0c67b24b096684?s=128&d=identicon&r=PG&f=1", "display_name": "ampawd", "link": "https://stackoverflow.com/users/3450869/ampawd"}, "reply_to_user": {"reputation": 907, "user_id": 5344725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afe3363c7df76a6ddf2114b5b8793554?s=128&d=identicon&r=PG&f=1", "display_name": "Altainia", "link": "https://stackoverflow.com/users/5344725/altainia"}, "edited": false, "score": 0, "creation_date": 1475070366, "post_id": 39749095, "comment_id": 66794901, "body": "@Altainia I know it gives pairs, I mean get range of map elements whose values are equal"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1475071872, "post_id": 39749095, "comment_id": 66796144, "body": "You need different container for this, boost::multi_index for example, <code>std::map</code> will not give you range based on values."}], "answers": [{"comments": [{"owner": {"reputation": 841, "user_id": 3450869, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4cd9f192289fd574ad0c67b24b096684?s=128&d=identicon&r=PG&f=1", "display_name": "ampawd", "link": "https://stackoverflow.com/users/3450869/ampawd"}, "edited": false, "score": 0, "creation_date": 1475070655, "post_id": 39749347, "comment_id": 66795151, "body": "this is not a solution  because 1st <code>std::map::equal_bound</code> takes a <code>key</code> as an argument but I need to get a range of pairs with same values, and 2nd simple iterating through a map would be inefficient, cause in this case I could just use vector instead of map to perform fast iterating which would be linear complexity but I need fast look up in logarithmic time"}, {"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "reply_to_user": {"reputation": 841, "user_id": 3450869, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4cd9f192289fd574ad0c67b24b096684?s=128&d=identicon&r=PG&f=1", "display_name": "ampawd", "link": "https://stackoverflow.com/users/3450869/ampawd"}, "edited": false, "score": 0, "creation_date": 1475071600, "post_id": 39749347, "comment_id": 66795951, "body": "@ampawd With <code>std::map</code>, quick indexing and iteration is a one way journey (<i>key -&gt; value</i>). Retrieving bounds via <code>keys</code> is a LogN thing. There is no way to retrieve bounds via <code>values</code> in LogN time. ... Making it logN in both directions isn&#39;t what <code>std::map</code> does. However, with a bit of work, you can juxtapose two maps to get that kind of behavior. THat&#39;s why I suggested Boost.Bimap"}], "tags": [], "owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "is_accepted": false, "score": 1, "last_activity_date": 1475072098, "last_edit_date": 1475072098, "creation_date": 1475070242, "answer_id": 39749347, "question_id": 39749095, "link": "https://stackoverflow.com/questions/39749095/get-range-of-map-elements-with-equal-values/39749347#39749347", "title": "get range of map elements with equal values", "body": "<blockquote>\n  <p>I need to get the range of its elements whose <strong>values</strong> are <code>true</code></p>\n</blockquote>\n\n<p>You will have to iterate the the map to get the iterators whose value pair is <code>true</code>... I have a working example <a href=\"http://coliru.stacked-crooked.com/a/d00af354ddf90612\" rel=\"nofollow\">Live On Coliru</a>. Something like this does the lifting.</p>\n\n<pre><code>template&lt;typename Map,\n         typename Value    = typename Map::mapped_type,\n         typename Compare  = std::equal_to&lt;Value&gt;,\n         typename Iterator = typename Map::iterator&gt;\nstd::vector&lt;Iterator&gt; equal_values(const Map&amp; mp, const Value&amp; val, Compare cmp = Compare()){\n    std::vector&lt;Iterator&gt; rtn;\n    for(auto iter = mp.begin(); iter != mp.end(); ++iter)\n        if(cmp(iter-&gt;second, val))\n            rtn.push_back(iter);\n    return rtn;\n}\n</code></pre>\n\n<p>Alternatively, you may want to use <a href=\"http://www.boost.org/doc/libs/1_60_0/libs/bimap/doc/html/index.html\" rel=\"nofollow\">Boost.Bimap</a> or <a href=\"http://www.boost.org/doc/libs/1_61_0/libs/multi_index/doc/index.html\" rel=\"nofollow\">Boost.MultiIndex</a></p>\n"}, {"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1475072030, "post_id": 39750048, "comment_id": 66796275, "body": "For this to work data must be sorted by that criteria."}, {"owner": {"reputation": 907, "user_id": 5344725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afe3363c7df76a6ddf2114b5b8793554?s=128&d=identicon&r=PG&f=1", "display_name": "Altainia", "link": "https://stackoverflow.com/users/5344725/altainia"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1475072228, "post_id": 39750048, "comment_id": 66796446, "body": "@Slava Yeah. This is true. I suppose this answer was meant more to address the misunderstanding that an iterator of a std::map does not dereference to the value alone."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1475072893, "post_id": 39750048, "comment_id": 66796945, "body": "Sorry, but then your answer is misleading. It may compile but you cannot use <code>std::range</code> with your lambda and such map."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1475077976, "post_id": 39750048, "comment_id": 66800580, "body": "Clarify? I do not see a point to provide fundamentally broken code to fix compilation error."}], "tags": [], "owner": {"reputation": 907, "user_id": 5344725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afe3363c7df76a6ddf2114b5b8793554?s=128&d=identicon&r=PG&f=1", "display_name": "Altainia", "link": "https://stackoverflow.com/users/5344725/altainia"}, "is_accepted": false, "score": -1, "last_activity_date": 1475074841, "last_edit_date": 1475074841, "creation_date": 1475071969, "answer_id": 39750048, "question_id": 39749095, "link": "https://stackoverflow.com/questions/39749095/get-range-of-map-elements-with-equal-values/39750048#39750048", "title": "get range of map elements with equal values", "body": "<p>So let's say you have a map as such:</p>\n\n<pre><code>using point = std::pair&lt;int,int&gt;;\nstd::map&lt;point,bool&gt; my_map;\n</code></pre>\n\n<p>And let's say you have some values in it as such:</p>\n\n<pre><code>my_map = { {{0,0},false}, {{0,1},true}, {{1,0},true}, {{1,1},false} };\n</code></pre>\n\n<p>Now let's see what the first iterator, when de-referenced, of this map will be:</p>\n\n<pre><code>{{0,0},false}\n</code></pre>\n\n<p>When you use <code>std::equal_range(my_map.begin(), my_map.end(), true);</code> you're asking that <code>true</code> be checked to the de-referenced iterators. But the de-referenced iterator is not a boolean. It's a pair of a point and a boolean.<br>\nSo what you may want to try is the following:</p>\n\n<pre><code>using map_iter = std::map&lt;point,bool&gt;::iterator; //is {point,bool}\nauto range = std::equal_range(my_map.begin(), my_map.end(), [](map_iter&amp; iter){\n  return iter.second == true;\n};\n</code></pre>\n\n<p><strong>Edit:</strong><br>\nJust to clarify, this will address a compiler error but will not address the logical error of the values of the map not (necessarily) being sorted such that you can get a pair of iterators that define a range encompassing all of a matching value as a map is not sorted by value</p>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 0, "last_activity_date": 1475072839, "last_edit_date": 1475072839, "creation_date": 1475072533, "answer_id": 39750283, "question_id": 39749095, "link": "https://stackoverflow.com/questions/39749095/get-range-of-map-elements-with-equal-values/39750283#39750283", "title": "get range of map elements with equal values", "body": "<blockquote>\n  <p>So how to use std::equal_range for map to get range of pairs with equal values ?</p>\n</blockquote>\n\n<p>Let's say you have a map with following data:</p>\n\n<pre><code>{ {{0,0},false}, {{1,1},true}, {{2,2},false}, {{3,3},true} };\n</code></pre>\n\n<p>what you expect equal range to return for <code>true</code>? for <code>false</code>?</p>\n\n<p>For that to work your container must be partitioned with respect to criteria you are using to get range. <code>std::map</code> is definitely not a such container for get range by value. So you would need to copy data or iterators into different container and sort it accordingly and use that container to get your ranges, or create  such container on the fly by filtering. Or you can use container like <code>boost::bimap</code> or <code>boost::multi_index</code> which can provide multiple indexes. </p>\n"}], "owner": {"reputation": 841, "user_id": 3450869, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4cd9f192289fd574ad0c67b24b096684?s=128&d=identicon&r=PG&f=1", "display_name": "ampawd", "link": "https://stackoverflow.com/users/3450869/ampawd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1445, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1475074841, "creation_date": 1475069622, "last_edit_date": 1475070311, "question_id": 39749095, "link": "https://stackoverflow.com/questions/39749095/get-range-of-map-elements-with-equal-values", "title": "get range of map elements with equal values", "body": "<p>I've got a map declared as:</p>\n\n<pre><code>std::map&lt; std::pair&lt;int, int&gt;, bool &gt; allPositions; // essentially, keys are just 2D points\n</code></pre>\n\n<p>I need to get the range of its elements whose values are <code>true</code></p>\n\n<p>Using <code>std::equal_range</code> </p>\n\n<pre><code>auto range = std::equal_range(allPositions.begin(), allPositions.end(), true);\n</code></pre>\n\n<p>Gives these errors</p>\n\n<blockquote>\n  <p>Error C2672   'operator __surrogate_func': no matching overloaded\n  function found xutility</p>\n  \n  <p>Error C2893   Failed to specialize function template 'unknown-type\n  std::less::operator ()(_Ty1 &amp;&amp;,_Ty2 &amp;&amp;) const' xutility</p>\n  \n  <p>Error C2056   illegal expression xutility</p>\n  \n  <p>Error C2672   'operator __surrogate_func': no matching overloaded\n  function found algorithm</p>\n  \n  <p>Error C2893   Failed to specialize function template 'unknown-type\n  std::less::operator ()(_Ty1 &amp;&amp;,_Ty2 &amp;&amp;) const' algorithm</p>\n</blockquote>\n\n<p>I think I don't need predicate function here because <code>std::pair</code> has got overloaded <code>operator &lt;</code> otherwise map code wouldn't have been compiled</p>\n\n<p>So how to use <code>std::equal_range</code> for map to get range of pairs with equal values ?</p>\n"}, {"tags": ["c++", "vector", "2d"], "comments": [{"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1475069016, "post_id": 39748826, "comment_id": 66793748, "body": "Use <code>this-&gt;inputPatterns</code> and then initialize it / populate it."}, {"owner": {"reputation": 725, "user_id": 3244341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/nHmU2.jpg?s=128&g=1", "display_name": "cagatayodabasi", "link": "https://stackoverflow.com/users/3244341/cagatayodabasi"}, "edited": false, "score": 0, "creation_date": 1475069669, "post_id": 39748826, "comment_id": 66794267, "body": "Is there any specific reason to define it in constructor?"}], "answers": [{"comments": [{"owner": {"reputation": 183, "user_id": 6360948, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d8aec1beecdb3d5e5c191c9ecce3b802?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan1993", "link": "https://stackoverflow.com/users/6360948/stefan1993"}, "edited": false, "score": 0, "creation_date": 1475074801, "post_id": 39748898, "comment_id": 66798402, "body": "Then I get the following error: MLP.cpp:13:1: error: type &#39;std::vector&lt;std::vector&lt;int&gt; &gt;&#39; does not provide a       call operator this-&gt;inputPatterns(nInputPatterns, vector&lt;int&gt;(2));"}, {"owner": {"reputation": 183, "user_id": 6360948, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d8aec1beecdb3d5e5c191c9ecce3b802?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan1993", "link": "https://stackoverflow.com/users/6360948/stefan1993"}, "edited": false, "score": 0, "creation_date": 1475075097, "post_id": 39748898, "comment_id": 66798623, "body": "Using .assign instead of this-&gt; seems to have solved the issue. Do you have any clue why?"}], "tags": [], "owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "is_accepted": false, "score": 1, "last_activity_date": 1475069456, "last_edit_date": 1475069456, "creation_date": 1475069139, "answer_id": 39748898, "question_id": 39748826, "link": "https://stackoverflow.com/questions/39748826/declare-and-access-2d-vector-initiated-in-constructor-c/39748898#39748898", "title": "Declare and access 2D-vector initiated in constructor c++", "body": "<p>You are declaring a new local variable, populating it, and then will die once the control goes out of the constructors scope. Therefore, you did not actually populate the member variable of the object, you populated an other variable that died by the time the constructor finished executing.</p>\n\n<p>What you would need to do is to use the existing member variable of the class instead, and the best way for improving the code and make it more readable / understandable is to use the <a href=\"http://en.cppreference.com/w/cpp/language/this\" rel=\"nofollow\"><strong><code>this</code></strong></a> pointer like here:</p>\n\n<pre><code>nInputPatterns = 4;\n\n// means not any inputPatterns, it is explicitly the member variable inputPatterns of \"this\" current object / instance\nthis-&gt;inputPatterns(nInputPatterns, vector&lt;int&gt;(2)); \n\n// ..\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 183, "user_id": 6360948, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d8aec1beecdb3d5e5c191c9ecce3b802?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan1993", "link": "https://stackoverflow.com/users/6360948/stefan1993"}, "is_accepted": true, "score": 0, "last_activity_date": 1475075058, "creation_date": 1475075058, "answer_id": 39751243, "question_id": 39748826, "link": "https://stackoverflow.com/questions/39748826/declare-and-access-2d-vector-initiated-in-constructor-c/39751243#39751243", "title": "Declare and access 2D-vector initiated in constructor c++", "body": "<p>The answer to my problem seems to be to use inputPatterns.assign(nInputPatterns, vector(2)); So not this->. Can anybody explain me why?</p>\n"}], "owner": {"reputation": 183, "user_id": 6360948, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d8aec1beecdb3d5e5c191c9ecce3b802?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan1993", "link": "https://stackoverflow.com/users/6360948/stefan1993"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 522, "favorite_count": 0, "accepted_answer_id": 39751243, "answer_count": 2, "score": 0, "last_activity_date": 1475075058, "creation_date": 1475068946, "question_id": 39748826, "link": "https://stackoverflow.com/questions/39748826/declare-and-access-2d-vector-initiated-in-constructor-c", "title": "Declare and access 2D-vector initiated in constructor c++", "body": "<p>I have a class declared in a header file, where I have the following 2D vector:</p>\n\n<pre><code>std::vector&lt; std::vector&lt;int&gt; &gt; inputPatterns;\n</code></pre>\n\n<p>Then in the constructor of this class in my .cpp file, I do the following:</p>\n\n<pre><code>nInputPatterns = 4;\nvector&lt; vector&lt;int&gt; &gt; inputPatterns(nInputPatterns, vector&lt;int&gt;(2));\n\ninputPatterns[0][0] = 1;\ninputPatterns[0][1] = 1;\ninputPatterns[1][0] = 0;\ninputPatterns[1][1] = 1;\ninputPatterns[2][0] = 1;\ninputPatterns[2][1] = 0;\ninputPatterns[3][0] = 0;\ninputPatterns[3][1] = 0;\n</code></pre>\n\n<p>However, now member function of this class can't access this 2D vector. I think that it is because I redeclare it in the constructor, but I don't know how to do it otherwise.</p>\n\n<p>So my question is, how to properly declare the 2D vector in the header class and then initialise it in the .cpp file (either in the constructor or a member function) such that I can access it everywhere?</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 2375, "user_id": 2757079, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C6Hsu.jpg?s=128&g=1", "display_name": "Muhammad Ahmad", "link": "https://stackoverflow.com/users/2757079/muhammad-ahmad"}, "edited": false, "score": 0, "creation_date": 1475068502, "post_id": 39748581, "comment_id": 66793339, "body": "Why don&#39;t simply print <code>temp</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2487382"}, "reply_to_user": {"reputation": 2375, "user_id": 2757079, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C6Hsu.jpg?s=128&g=1", "display_name": "Muhammad Ahmad", "link": "https://stackoverflow.com/users/2757079/muhammad-ahmad"}, "edited": false, "score": 0, "creation_date": 1475068620, "post_id": 39748581, "comment_id": 66793430, "body": "@MuhammadAhmad That is also an option is this case. But, well, in general, this options are not equal, so if OP wanted to print the object that was pushed to vector, this is the correct way to do it."}, {"owner": {"reputation": 79, "user_id": 6865856, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e25d0892693e8262f86cef24f3207d8b?s=128&d=identicon&r=PG&f=1", "display_name": "Hmmmmm", "link": "https://stackoverflow.com/users/6865856/hmmmmm"}, "edited": false, "score": 0, "creation_date": 1475068795, "post_id": 39748581, "comment_id": 66793554, "body": "Ohhhh Thanks a lot I missed it @Satus"}, {"owner": {"reputation": 79, "user_id": 6865856, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e25d0892693e8262f86cef24f3207d8b?s=128&d=identicon&r=PG&f=1", "display_name": "Hmmmmm", "link": "https://stackoverflow.com/users/6865856/hmmmmm"}, "reply_to_user": {"reputation": 2375, "user_id": 2757079, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C6Hsu.jpg?s=128&g=1", "display_name": "Muhammad Ahmad", "link": "https://stackoverflow.com/users/2757079/muhammad-ahmad"}, "edited": false, "score": 0, "creation_date": 1475068887, "post_id": 39748581, "comment_id": 66793631, "body": "@MuhammadAhmad sorry for rejecting I didn&#39;t know how to accept it and I accidently hit something else :("}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2487382"}, "is_accepted": true, "score": 0, "last_activity_date": 1475068330, "creation_date": 1475068330, "answer_id": 39748581, "question_id": 39748416, "link": "https://stackoverflow.com/questions/39748416/debug-assertion-failed-vector-subscript-out-of-range/39748581#39748581", "title": "Debug assertion failed vector subscript out of range", "body": "<pre><code>for (int i = 0; i &lt; childNum; i++) {\n    if (!IncrementIfFound(value_counts, info.gram_v[i])) {\n        Number_Counts temp(info.gram_v[i]);\n        value_counts.push_back(temp);\n        cout &lt;&lt; \"Value counts: \" &lt;&lt; value_counts[i].value &lt;&lt; \"\\t\" &lt;&lt; value_counts[i].count &lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<p>Imagine if your <code>if</code> skips first <code>n</code> iterations. Than when you access <code>value_counts[i].value</code>, you will be accessing beyond array bounds, because new values were not added to vector. </p>\n\n<pre><code>        auto&amp;&amp; number_count = value_counts.back();\n        cout &lt;&lt; \"Value counts: \" &lt;&lt; number_count.value &lt;&lt; \"\\t\" &lt;&lt; number_count.count &lt;&lt; endl;\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 6865856, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e25d0892693e8262f86cef24f3207d8b?s=128&d=identicon&r=PG&f=1", "display_name": "Hmmmmm", "link": "https://stackoverflow.com/users/6865856/hmmmmm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 39748581, "answer_count": 1, "score": -1, "last_activity_date": 1475068660, "creation_date": 1475067868, "last_edit_date": 1475068660, "question_id": 39748416, "link": "https://stackoverflow.com/questions/39748416/debug-assertion-failed-vector-subscript-out-of-range", "title": "Debug assertion failed vector subscript out of range", "body": "<p>When this goes through for loop, I keep having error message</p>\n\n<blockquote>\n  <p>\"Debug assertion failed. vector subscript out of range.\"</p>\n</blockquote>\n\n<p>so I tracked the for loop, and when input is </p>\n\n<pre><code>5\n1 100\n2 100\n3 80\n4 60\n5 80\n</code></pre>\n\n<p>The error occurred when i == 2. But I have no idea what's wrong after i==2.\nPlease give me some advice.</p>\n\n<p>the error is at this part:</p>\n\n<pre><code>for (int i = 0; i &lt; childNum; i++) {\n        if (!IncrementIfFound(value_counts, info.gram_v[i])) {\n            Number_Counts temp(info.gram_v[i]);\n            value_counts.push_back(temp);\n            cout &lt;&lt; \"Value counts: \" &lt;&lt; value_counts[i].value &lt;&lt; \"\\t\" &lt;&lt; value_counts[i].count &lt;&lt; endl;\n        }\n    }\n</code></pre>\n\n<p>And this is my code :</p>\n\n<pre><code>struct Number_Counts\n{\n    int value;\n    int count;\n    Number_Counts( int _element) { value = _element; count = 1; }\n};\n\nstruct ChildInfo\n{\n    vector&lt;int&gt; id_v;\n    vector&lt;int&gt; gram_v;\n};\n\nbool IncrementIfFound(vector&lt;Number_Counts&gt; &amp;, int );\n\nbool IncrementIfFound(vector&lt;Number_Counts&gt; &amp;_Container, int _element)\n{\n    for (int i = 0; i &lt; _Container.size(); i++) {\n        if (_Container[i].value == _element) {\n            _Container[i].count++;\n            cout &lt;&lt; \"i : \" &lt;&lt; i &lt;&lt;\" Container value: \" &lt;&lt; _Container[i].value &lt;&lt; \" counter: \" &lt;&lt; _Container[i].count \n                &lt;&lt; \" size: \" &lt;&lt; _Container.size() &lt;&lt; endl;\n            return true;\n        }\n    }\n    return false;\n}\n\nint main() {\n    vector&lt;Number_Counts&gt; value_counts;\n    ChildInfo info;\n    int childNum,id, gram = 0;\n\n    cin &gt;&gt; childNum;\n    for (int i = 0; i &lt; childNum; i++) {\n        cin &gt;&gt; id &gt;&gt; gram;\n        info.id_v.push_back(id);\n        info.gram_v.push_back(gram);\n    }\n\n    for (int i = 0; i &lt; childNum; i++) {\n        if (!IncrementIfFound(value_counts, info.gram_v[i])) {\n            Number_Counts temp(info.gram_v[i]);\n            value_counts.push_back(temp);\n            cout &lt;&lt; \"Value counts: \" &lt;&lt; value_counts[i].value &lt;&lt; \"\\t\" &lt;&lt; value_counts[i].count &lt;&lt; endl;\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "visual-c++", "linker", "webrtc"], "comments": [{"owner": {"reputation": 5747, "user_id": 631599, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5fc6b2cf893347e70c0a965f39a67209?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/631599/matt"}, "edited": false, "score": 0, "creation_date": 1475069158, "post_id": 39748072, "comment_id": 66793858, "body": "what does the link error say?"}, {"owner": {"reputation": 4326, "user_id": 242348, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/cc86e1f443171a35a1c7dcf2c688f24c?s=128&d=identicon&r=PG", "display_name": "monoceres", "link": "https://stackoverflow.com/users/242348/monoceres"}, "reply_to_user": {"reputation": 5747, "user_id": 631599, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5fc6b2cf893347e70c0a965f39a67209?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/631599/matt"}, "edited": false, "score": 0, "creation_date": 1475069654, "post_id": 39748072, "comment_id": 66794259, "body": "See my comment on Martin Bonner&#39;s answer. Linking against <i>all</i> the libraries generated during webrtc build produces the following 27 linker errors: <a href=\"http://pastebin.com/Q9s3X5wA\" rel=\"nofollow noreferrer\">pastebin.com/Q9s3X5wA</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4326, "user_id": 242348, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/cc86e1f443171a35a1c7dcf2c688f24c?s=128&d=identicon&r=PG", "display_name": "monoceres", "link": "https://stackoverflow.com/users/242348/monoceres"}, "edited": false, "score": 0, "creation_date": 1475069404, "post_id": 39748727, "comment_id": 66794058, "body": "Tried it, it fails to resolve CreatePeerConnectionFactory: Severity\tCode\t&quot;LNK2019\tunresolved external symbol &quot;class rtc::scoped_refptr&lt;class webrtc::PeerConnectionFactoryInterface&gt; __cdecl webrtc::CreatePeerConnectionFactory(void)&quot; (?CreatePeerConnectionFactory@webrtc@@YA?AV?$scoped_refptr@V&zwnj;&#8203;PeerConnectionFactor&zwnj;&#8203;yInterface@webrtc@@@&zwnj;&#8203;rtc@@XZ) referenced in function main\tWebRTC-TEst\tC:\\dev\\WebRTC-TEst\\main.obj\t1&quot;"}], "tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1475068682, "creation_date": 1475068682, "answer_id": 39748727, "question_id": 39748072, "link": "https://stackoverflow.com/questions/39748072/linking-native-webrtc-application-with-visual-studio/39748727#39748727", "title": "Linking native WebRTC application with Visual Studio", "body": "<p>The document you linked to, says you need the following libraries:</p>\n\n<ul>\n<li>boringssl.dll.lib</li>\n<li>boringssl_asm.lib</li>\n<li>field_trial_default.lib</li>\n<li>jsoncpp.lib </li>\n<li>rtc_base.lib</li>\n<li>rtc_base_approved.lib</li>\n<li>rtc_p2p.lib</li>\n<li>rtc_xmllite.lib </li>\n<li>rtc_xmpp.lib</li>\n</ul>\n\n<p>I would link against all of them.  It's unlikely to hurt.</p>\n"}, {"comments": [{"owner": {"reputation": 1915, "user_id": 1025222, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FzmRn.jpg?s=128&g=1", "display_name": "Axel Isouard", "link": "https://stackoverflow.com/users/1025222/axel-isouard"}, "edited": false, "score": 2, "creation_date": 1476552985, "post_id": 39772306, "comment_id": 67398277, "body": "Feel free to use the <code>merge_libs.py</code> script located inside the <code>src&#47;webrtc&#47;build</code> directory. It will generate a single webrtc.lib file. I&#39;m also maintaining a collection of build scripts if you are interested: <a href=\"https://github.com/aisouard/libwebrtc\" rel=\"nofollow noreferrer\">github.com/aisouard/libwebrtc</a>"}, {"owner": {"reputation": 2199, "user_id": 311567, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/05bdf9f352a8a7611279c5a662ef8ff5?s=128&d=identicon&r=PG", "display_name": "dashesy", "link": "https://stackoverflow.com/users/311567/dashesy"}, "edited": false, "score": 0, "creation_date": 1489805231, "post_id": 39772306, "comment_id": 72845697, "body": "That is a mess of random dependencies! Which makes things worse because setting <code>is_component_build=true</code> seems to have no effect. So basically this will statically link the world. Why would I want audio_confrence_mixer in just any application!"}, {"owner": {"reputation": 4326, "user_id": 242348, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/cc86e1f443171a35a1c7dcf2c688f24c?s=128&d=identicon&r=PG", "display_name": "monoceres", "link": "https://stackoverflow.com/users/242348/monoceres"}, "reply_to_user": {"reputation": 2199, "user_id": 311567, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/05bdf9f352a8a7611279c5a662ef8ff5?s=128&d=identicon&r=PG", "display_name": "dashesy", "link": "https://stackoverflow.com/users/311567/dashesy"}, "edited": false, "score": 3, "creation_date": 1489876563, "post_id": 39772306, "comment_id": 72864802, "body": "@dashesy the linker will hopefully strip anything not needed, but yeah, this is messy af. However, the latest WebRTC (M58) seems to build a single webrtc.lib by default now, reducing the link list to it and just a few satellites (like boringssl &amp; protobuf_lite)."}, {"owner": {"reputation": 723, "user_id": 1613404, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/e77d732a12deabd4cb7bf247ef8fa1d3?s=128&d=identicon&r=PG", "display_name": "dixkin", "link": "https://stackoverflow.com/users/1613404/dixkin"}, "edited": false, "score": 2, "creation_date": 1555527228, "post_id": 39772306, "comment_id": 98146907, "body": "cannot find merge_libs.py.  Where is it?"}], "tags": [], "owner": {"reputation": 4326, "user_id": 242348, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/cc86e1f443171a35a1c7dcf2c688f24c?s=128&d=identicon&r=PG", "display_name": "monoceres", "link": "https://stackoverflow.com/users/242348/monoceres"}, "is_accepted": true, "score": 2, "last_activity_date": 1475157264, "creation_date": 1475157264, "answer_id": 39772306, "question_id": 39748072, "link": "https://stackoverflow.com/questions/39748072/linking-native-webrtc-application-with-visual-studio/39772306#39772306", "title": "Linking native WebRTC application with Visual Studio", "body": "<p>I solved it!</p>\n\n<p>After digging around in the build files for the examples in WebRTC I found that the following libraries should be linked:</p>\n\n<pre><code>obj\\webrtc\\api\\libjingle_peerconnection.lib\nobj\\webrtc\\system_wrappers\\field_trial_default.lib\nobj\\webrtc\\system_wrappers\\metrics_default.lib\nobj\\third_party\\jsoncpp\\jsoncpp.lib\nobj\\webrtc\\media\\rtc_media.lib\nobj\\webrtc\\base\\rtc_base_approved.lib\nobj\\webrtc\\webrtc_common.lib\nobj\\webrtc\\webrtc.lib\nobj\\webrtc\\system_wrappers\\system_wrappers.lib\nobj\\webrtc\\voice_engine\\voice_engine.lib\nobj\\webrtc\\common_audio\\common_audio.lib\nobj\\third_party\\openmax_dl\\dl\\openmax_dl.lib\nobj\\webrtc\\common_audio\\common_audio_sse2.lib\nobj\\webrtc\\modules\\audio_coding_module.lib\nobj\\webrtc\\modules\\cng.lib\nobj\\webrtc\\modules\\audio_encoder_interface.lib\nobj\\webrtc\\modules\\g711.lib\nobj\\webrtc\\modules\\pcm16b.lib\nobj\\webrtc\\modules\\ilbc.lib\nobj\\webrtc\\modules\\webrtc_opus.lib\nobj\\third_party\\opus\\opus.lib\nobj\\webrtc\\modules\\g722.lib\nobj\\webrtc\\modules\\isac.lib\nobj\\webrtc\\modules\\audio_decoder_interface.lib\nobj\\webrtc\\modules\\isac_common.lib\nobj\\webrtc\\modules\\red.lib\nobj\\webrtc\\rtc_event_log.lib\nobj\\webrtc\\rtc_event_log_proto.lib\nprotobuf_lite.dll.lib\nobj\\webrtc\\modules\\neteq.lib\nobj\\webrtc\\modules\\builtin_audio_decoder_factory.lib\nobj\\webrtc\\modules\\audio_decoder_factory_interface.lib\nobj\\webrtc\\modules\\rent_a_codec.lib\nobj\\webrtc\\modules\\audio_conference_mixer.lib\nobj\\webrtc\\modules\\audio_processing.lib\nobj\\webrtc\\modules\\audioproc_debug_proto.lib\nobj\\webrtc\\modules\\audio_processing_sse2.lib\nobj\\webrtc\\modules\\webrtc_utility.lib\nobj\\webrtc\\modules\\media_file.lib\nobj\\webrtc\\base\\rtc_task_queue.lib\nobj\\webrtc\\modules\\audio_device.lib\nobj\\webrtc\\modules\\bitrate_controller.lib\nobj\\webrtc\\modules\\paced_sender.lib\nobj\\webrtc\\modules\\rtp_rtcp.lib\nobj\\webrtc\\common_video\\common_video.lib\nlibyuv.lib\nobj\\third_party\\libjpeg_turbo\\libjpeg.lib\nobj\\webrtc\\modules\\remote_bitrate_estimator.lib\nobj\\webrtc\\voice_engine\\level_indicator.lib\nobj\\webrtc\\modules\\congestion_controller.lib\nobj\\webrtc\\modules\\video_capture_module.lib\nobj\\webrtc\\modules\\video_processing.lib\nobj\\webrtc\\modules\\video_processing_sse2.lib\nobj\\webrtc\\modules\\webrtc_video_coding.lib\nobj\\webrtc\\modules\\webrtc_h264.lib\nobj\\webrtc\\modules\\webrtc_i420.lib\nobj\\webrtc\\modules\\video_coding\\utility\\video_coding_utility.lib\nobj\\webrtc\\modules\\video_coding\\codecs\\vp8\\webrtc_vp8.lib\nobj\\third_party\\libvpx\\libvpx.lib\nobj\\third_party\\libvpx\\libvpx_intrinsics_mmx.lib\nobj\\third_party\\libvpx\\libvpx_intrinsics_sse2.lib\nobj\\third_party\\libvpx\\libvpx_intrinsics_ssse3.lib\nobj\\third_party\\libvpx\\libvpx_intrinsics_sse4_1.lib\nobj\\third_party\\libvpx\\libvpx_intrinsics_avx.lib\nobj\\third_party\\libvpx\\libvpx_intrinsics_avx2.lib\nobj\\webrtc\\modules\\video_coding\\codecs\\vp9\\webrtc_vp9.lib\nobj\\webrtc\\p2p\\rtc_p2p.lib\nobj\\webrtc\\base\\rtc_base.lib\nboringssl.dll.lib\nobj\\third_party\\usrsctp\\usrsctplib.lib\nobj\\webrtc\\modules\\video_capture_module_internal_impl.lib\nobj\\third_party\\winsdk_samples\\directshow_baseclasses.lib\nobj\\webrtc\\pc\\rtc_pc.lib\nobj\\third_party\\libsrtp\\libsrtp.lib\nwinmm.lib\ndmoguids.lib\nwmcodecdspuuid.lib\namstrmid.lib\nmsdmo.lib\ncrypt32.lib\niphlpapi.lib\nsecur32.lib\nStrmiids.lib\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 723, "user_id": 1613404, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/e77d732a12deabd4cb7bf247ef8fa1d3?s=128&d=identicon&r=PG", "display_name": "dixkin", "link": "https://stackoverflow.com/users/1613404/dixkin"}, "edited": false, "score": 3, "creation_date": 1555527184, "post_id": 53416264, "comment_id": 98146893, "body": "is this still supported?  Looks like no changes since 2017?"}], "tags": [], "owner": {"reputation": 563, "user_id": 2143724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dff359c940a896ba893cecf78eed193?s=128&d=identicon&r=PG", "display_name": "karsten", "link": "https://stackoverflow.com/users/2143724/karsten"}, "is_accepted": false, "score": 0, "last_activity_date": 1542816924, "creation_date": 1542816924, "answer_id": 53416264, "question_id": 39748072, "link": "https://stackoverflow.com/questions/39748072/linking-native-webrtc-application-with-visual-studio/53416264#53416264", "title": "Linking native WebRTC application with Visual Studio", "body": "<p>There is a precompiled (binary) package available for Windows: <a href=\"https://sourcey.com/precompiled-webrtc-libraries/\" rel=\"nofollow noreferrer\">here</a>.\nIt contains a single lib to link, libwebrtc_full.lib</p>\n"}], "owner": {"reputation": 4326, "user_id": 242348, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/cc86e1f443171a35a1c7dcf2c688f24c?s=128&d=identicon&r=PG", "display_name": "monoceres", "link": "https://stackoverflow.com/users/242348/monoceres"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6375, "favorite_count": 2, "accepted_answer_id": 39772306, "answer_count": 3, "score": 3, "last_activity_date": 1560780002, "creation_date": 1475066990, "question_id": 39748072, "link": "https://stackoverflow.com/questions/39748072/linking-native-webrtc-application-with-visual-studio", "title": "Linking native WebRTC application with Visual Studio", "body": "<p>So my goal is to build a native WebRTC application using the WebRTC C++ api.</p>\n\n<p>I compiled webrtc for use with Visual Studio (2015) using the following guide:</p>\n\n<p><a href=\"https://github.com/ipop-project/ipop-project.github.io/wiki/Building-the-WebRTC-lib-for-Windows\" rel=\"nofollow\">https://github.com/ipop-project/ipop-project.github.io/wiki/Building-the-WebRTC-lib-for-Windows</a></p>\n\n<p>After the build completed I tried creating a new Visual Studio console project and added the following code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n#define WEBRTC_WIN\n\n#include &lt;webrtc/api/peerconnection.h&gt;\n#include &lt;webrtc/api/peerconnectionfactory.h&gt;\n#include &lt;webrtc/api/peerconnectioninterface.h&gt;\n\nint main()\n{\n    auto pcf = webrtc::CreatePeerConnectionFactory();\n\n    std::cout &lt;&lt; \"Hallo!\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Adding the build directory to the include search path works fine, however I'm unable to link the application, searching the build directories for lib-files and adding them to the linker only adds more link error as there is a whole bunch and I suspect some of them should not be linked to my application.</p>\n\n<p>What is the correct way to link the application, and how do I know what .lib-files the functionality I use resides in?</p>\n"}, {"tags": ["c#", "c++", "sockets", "tcp"], "answers": [{"tags": [], "owner": {"reputation": 6114, "user_id": 3070060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a936bdd7a67a345d312281305d5adde?s=128&d=identicon&r=PG&f=1", "display_name": "PaulF", "link": "https://stackoverflow.com/users/3070060/paulf"}, "is_accepted": true, "score": 1, "last_activity_date": 1475067554, "creation_date": 1475067554, "answer_id": 39748303, "question_id": 39747851, "link": "https://stackoverflow.com/questions/39747851/send-data-to-a-tcp-port-in-c-visual-studio/39748303#39748303", "title": "Send data to a tcp/port in c++ visual studio", "body": "<p>Your code appears to loop through a sequence of available ports initially set up by the line :</p>\n\n<pre><code>iResult = getaddrinfo(argv[1], DEFAULT_PORT, &amp;hints, &amp;result);\n</code></pre>\n\n<p>&amp; then looped through here </p>\n\n<pre><code>for (ptr = result; ptr != NULL; ptr = ptr-&gt;ai_next)\n</code></pre>\n\n<p>with an attempt to make the connection at this line</p>\n\n<pre><code>iResult = connect(ConnectSocket, ptr-&gt;ai_addr, (int)ptr-&gt;ai_addrlen);\n</code></pre>\n\n<p>The IP &amp; port values are stored in the struct pointed to by the ai_addr field of the addrinfo struct. The struct pointed to by ai_addr is protocol dependant - for TCP it is a sockaddr_in struct which contains sin_port &amp; sin_addr which is another struct of 4 bytes for the IP address. See the following links :</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-gb/library/windows/desktop/ms737530(v=vs.85).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-gb/library/windows/desktop/ms737530(v=vs.85).aspx</a>\n<a href=\"https://msdn.microsoft.com/en-gb/library/windows/desktop/ms740496(v=vs.85).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-gb/library/windows/desktop/ms740496(v=vs.85).aspx</a>\n<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms738571(v=vs.85).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/windows/desktop/ms738571(v=vs.85).aspx</a></p>\n"}], "owner": {"reputation": 5688, "user_id": 3446201, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/LqSia.jpg?s=128&g=1", "display_name": "Ehsan Akbar", "link": "https://stackoverflow.com/users/3446201/ehsan-akbar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1199, "favorite_count": 0, "accepted_answer_id": 39748303, "answer_count": 1, "score": 0, "last_activity_date": 1475067554, "creation_date": 1475066429, "last_edit_date": 1475067231, "question_id": 39747851, "link": "https://stackoverflow.com/questions/39747851/send-data-to-a-tcp-port-in-c-visual-studio", "title": "Send data to a tcp/port in c++ visual studio", "body": "<p>I create two applications server and client in c# and they work.I need to change the client application to c++ .Here is my code in c# :</p>\n\n<pre><code>            m_clientSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);\n            IPAddress ip = IPAddress.Parse(\"127.0.0.1\");\n            int iPortNo = System.Convert.ToInt16(\"5000\");\n            IPEndPoint ipEnd = new IPEndPoint(ip, iPortNo);\n            m_clientSocket.Connect(ipEnd);\n            if (m_clientSocket.Connected)\n            {\n                    byte[] packet = CreateMessage(\"salam\");\n                    if (m_clientSocket != null)\n                    {\n                        m_clientSocket.Send(packet);\n                    } \n\n            }\n</code></pre>\n\n<p>It works great ,so i googled <code>c++ client code tcp</code> and i found this URL</p>\n\n<pre><code>https://msdn.microsoft.com/en-us/library/windows/desktop/ms737591%28v=vs.85%29.aspx\n</code></pre>\n\n<p>Here is the above url code </p>\n\n<pre><code>#define WIN32_LEAN_AND_MEAN\n\n#include &lt;windows.h&gt;\n#include &lt;winsock2.h&gt;\n#include &lt;ws2tcpip.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\n\n// Need to link with Ws2_32.lib, Mswsock.lib, and Advapi32.lib\n#pragma comment (lib, \"Ws2_32.lib\")\n#pragma comment (lib, \"Mswsock.lib\")\n#pragma comment (lib, \"AdvApi32.lib\")\n\n\n#define DEFAULT_BUFLEN 512\n#define DEFAULT_PORT \"27015\"\n\nint __cdecl main(int argc, char **argv)\n{\n    WSADATA wsaData;\n    SOCKET ConnectSocket = INVALID_SOCKET;\n    struct addrinfo *result = NULL,\n        *ptr = NULL,\n        hints;\n    char *sendbuf = \"this is a test\";\n    char recvbuf[DEFAULT_BUFLEN];\n    int iResult;\n    int recvbuflen = DEFAULT_BUFLEN;\n\n    // Validate the parameters\n    if (argc != 2) {\n        printf(\"usage: %s server-name\\n\", argv[0]);\n        return 1;\n    }\n\n    // Initialize Winsock\n    iResult = WSAStartup(MAKEWORD(2, 2), &amp;wsaData);\n    if (iResult != 0) {\n        printf(\"WSAStartup failed with error: %d\\n\", iResult);\n        return 1;\n    }\n\n    ZeroMemory(&amp;hints, sizeof(hints));\n    hints.ai_family = AF_UNSPEC;\n    hints.ai_socktype = SOCK_STREAM;\n    hints.ai_protocol = IPPROTO_TCP;\n\n    // Resolve the server address and port\n    iResult = getaddrinfo(argv[1], DEFAULT_PORT, &amp;hints, &amp;result);\n    if (iResult != 0) {\n        printf(\"getaddrinfo failed with error: %d\\n\", iResult);\n        WSACleanup();\n        return 1;\n    }\n\n    // Attempt to connect to an address until one succeeds\n    for (ptr = result; ptr != NULL; ptr = ptr-&gt;ai_next) {\n\n        // Create a SOCKET for connecting to server\n        ConnectSocket = socket(ptr-&gt;ai_family, ptr-&gt;ai_socktype,\n            ptr-&gt;ai_protocol);\n        if (ConnectSocket == INVALID_SOCKET) {\n            printf(\"socket failed with error: %ld\\n\", WSAGetLastError());\n            WSACleanup();\n            return 1;\n        }\n\n        // Connect to server.\n        iResult = connect(ConnectSocket, ptr-&gt;ai_addr, (int)ptr-&gt;ai_addrlen);\n        if (iResult == SOCKET_ERROR) {\n            closesocket(ConnectSocket);\n            ConnectSocket = INVALID_SOCKET;\n            continue;\n        }\n        break;\n    }\n\n    freeaddrinfo(result);\n\n    if (ConnectSocket == INVALID_SOCKET) {\n        printf(\"Unable to connect to server!\\n\");\n        WSACleanup();\n        return 1;\n    }\n\n    // Send an initial buffer\n    iResult = send(ConnectSocket, sendbuf, (int)strlen(sendbuf), 0);\n    if (iResult == SOCKET_ERROR) {\n        printf(\"send failed with error: %d\\n\", WSAGetLastError());\n        closesocket(ConnectSocket);\n        WSACleanup();\n        return 1;\n    }\n\n    printf(\"Bytes Sent: %ld\\n\", iResult);\n\n    // shutdown the connection since no more data will be sent\n    iResult = shutdown(ConnectSocket, SD_SEND);\n    if (iResult == SOCKET_ERROR) {\n        printf(\"shutdown failed with error: %d\\n\", WSAGetLastError());\n        closesocket(ConnectSocket);\n        WSACleanup();\n        return 1;\n    }\n\n    // Receive until the peer closes the connection\n    do {\n\n        iResult = recv(ConnectSocket, recvbuf, recvbuflen, 0);\n        if (iResult &gt; 0)\n            printf(\"Bytes received: %d\\n\", iResult);\n        else if (iResult == 0)\n            printf(\"Connection closed\\n\");\n        else\n            printf(\"recv failed with error: %d\\n\", WSAGetLastError());\n\n    } while (iResult &gt; 0);\n\n    // cleanup\n    closesocket(ConnectSocket);\n    WSACleanup();\n\n    return 0;\n}\n</code></pre>\n\n<p>But the problem is i don't know which parts of this code are <code>IP</code> and <code>Port</code>?As you can see in my c# application i config the <code>IP</code> and <code>port</code> .But here in c++ code i can't find any variable to initialize the <code>IP</code> and <code>Port</code></p>\n"}, {"tags": ["c++", "windows", "qt", "qt5", "taskbar"], "comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 1, "creation_date": 1475068159, "post_id": 39747804, "comment_id": 66793053, "body": "Are you sure you&#39;ve asked yourself whether this design provides good user experience? As a user, I&#39;d be mighty upset if something tried to obscure the taskbar at all times..."}], "answers": [{"tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1475066971, "creation_date": 1475066971, "answer_id": 39748063, "question_id": 39747804, "link": "https://stackoverflow.com/questions/39747804/how-can-i-put-my-qt-application-mainwindow-always-above-the-taskbar-in-windows/39748063#39748063", "title": "How can I put my Qt Application mainwindow always above the taskbar in Windows?", "body": "<p>You can't.  <code>Qt::WindowsStaysOnTopHint</code> marks a window with the <code>WS_EX_TOPMOST</code> window style, and all such windows can lie on top of each other.  See Raymond Chen's occasional rants on <a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20050607-00/?p=35413\" rel=\"nofollow\">The Old New Thing</a>.</p>\n\n<p>Your best bet is to limit the position of your window so that it can't be moved on top of the task bar.</p>\n"}, {"tags": [], "owner": {"reputation": 327, "user_id": 2153848, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4e1819a51339a47b0a4f84c295895840?s=128&d=identicon&r=PG", "display_name": "jhbh", "link": "https://stackoverflow.com/users/2153848/jhbh"}, "is_accepted": false, "score": 1, "last_activity_date": 1475067975, "creation_date": 1475067975, "answer_id": 39748445, "question_id": 39747804, "link": "https://stackoverflow.com/questions/39747804/how-can-i-put-my-qt-application-mainwindow-always-above-the-taskbar-in-windows/39748445#39748445", "title": "How can I put my Qt Application mainwindow always above the taskbar in Windows?", "body": "<p>if you can access the windows api or Qt has an equivalent function you can use <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms633545(v=vs.85).aspx\" rel=\"nofollow\">SetWindowPos</a></p>\n\n<p>eg</p>\n\n<pre><code>SetWindowPos(hWnd, ((HWND)-1), 0, 0, width, height, 0); \n</code></pre>\n\n<p>where hWnd is a handle to your window and width and height are the width and height of the screen (if you want it full screen). Passing -1 as an HWND will put the window above all other non-topmost windows. It will remain on top even after the window is deactivated.</p>\n"}, {"tags": [], "owner": {"reputation": 476, "user_id": 5851959, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/d571bfc597c5998075f2d85aa701c00a?s=128&d=identicon&r=PG&f=1", "display_name": "sunil_rbc", "link": "https://stackoverflow.com/users/5851959/sunil-rbc"}, "is_accepted": false, "score": 0, "last_activity_date": 1475071692, "creation_date": 1475071692, "answer_id": 39749960, "question_id": 39747804, "link": "https://stackoverflow.com/questions/39747804/how-can-i-put-my-qt-application-mainwindow-always-above-the-taskbar-in-windows/39749960#39749960", "title": "How can I put my Qt Application mainwindow always above the taskbar in Windows?", "body": "<p>Thanks for the answers. Thanks Martin Bonner for providing the reference to the blog <a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20050607-00/?p=35413\" rel=\"nofollow\">The Old New Thing</a>.</p>\n\n<p>I have tried an alternative by using a timer and raising my window over other taskbar. My window is completely transparent, frameless with no title bar and statusbar. It contains only a rectangular border and some buttons at the bottom.</p>\n\n<p>I am raising the window every 500ms above the taskbar. So if the user clicks on any region in the taskbar , the portion of my window behind taskbar comes to the front again.</p>\n\n<pre><code>if (this-&gt;isActiveWindow() == false)\n    this-&gt;raise();\n</code></pre>\n\n<p>Yes this way of raising window may induce race around conditions if any other application is using similar approach to raise itself above taskbar.\nSo I guess to make sure this method works correctly two applications having similar approach to raise itself should not be run together.</p>\n"}], "owner": {"reputation": 476, "user_id": 5851959, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/d571bfc597c5998075f2d85aa701c00a?s=128&d=identicon&r=PG&f=1", "display_name": "sunil_rbc", "link": "https://stackoverflow.com/users/5851959/sunil-rbc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1577, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1475071692, "creation_date": 1475066328, "question_id": 39747804, "link": "https://stackoverflow.com/questions/39747804/how-can-i-put-my-qt-application-mainwindow-always-above-the-taskbar-in-windows", "title": "How can I put my Qt Application mainwindow always above the taskbar in Windows?", "body": "<p>I have a Qt application which remains on top of other windows. The mainwindow is frameless and transparent. To put it above other windows I have followed the following procedure. </p>\n\n<pre><code>SetForegroundWindow((HWND)winId());\nQt::WindowFlags flags = this-&gt;windowFlags();\nflags = flags &amp; ~Qt::WindowMinimizeButtonHint;\nthis-&gt;setWindowFlags(flags|Qt::FramelessWindowHint|Qt::WindowStaysOnTopHint );\nui.setupUi(this);\n</code></pre>\n\n<p>This code snippet brings my Qt mainwindow on top of all windows and also above taskbar.\nThe problem is that whenever any region of taskbar is clicked the region of mainwindow over the taskabr goes behind the taskbar. The taskbar comes to the front. The mainwindow still remains above all other window.It appears that the bottom region of my mainwindow has gone behind the taskbar.</p>\n\n<p>How can I prevent the taskbar from pushing the region of mainwindow behind itself ? I want to keep my window above all windows and also above the taskbar.</p>\n"}, {"tags": ["c++", "winapi", "access-violation", "c++builder-6"], "comments": [{"owner": {"reputation": 2565, "user_id": 4781312, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lDEcJ.jpg?s=128&g=1", "display_name": "Asesh", "link": "https://stackoverflow.com/users/4781312/asesh"}, "edited": false, "score": 0, "creation_date": 1475066237, "post_id": 39747714, "comment_id": 66791595, "body": "Did you initialize COM before invoking ShellExecuteExW?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 2, "creation_date": 1475066834, "post_id": 39747714, "comment_id": 66792050, "body": "The Windows API does not throw C++ exceptions. Are you using any compiler extensions that allow you to catch SEH exceptions standard C++ syntax? Irrespective of that, since you don&#39;t appear to need any shell support here anyway, why don&#39;t you just use <code>CreateProcess</code> instead of a game of Russian Roulette?"}, {"owner": {"reputation": 1074, "user_id": 1140967, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/de34a0c7a49dd6750ce8775b59eb5cb9?s=128&d=identicon&r=PG&f=1", "display_name": "\u0130smail Kocacan", "link": "https://stackoverflow.com/users/1140967/%c4%b0smail-kocacan"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1475066981, "post_id": 39747714, "comment_id": 66792154, "body": "@IInspectable I don&#39;t use any compiler extension."}, {"owner": {"reputation": 1074, "user_id": 1140967, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/de34a0c7a49dd6750ce8775b59eb5cb9?s=128&d=identicon&r=PG&f=1", "display_name": "\u0130smail Kocacan", "link": "https://stackoverflow.com/users/1140967/%c4%b0smail-kocacan"}, "reply_to_user": {"reputation": 2565, "user_id": 4781312, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lDEcJ.jpg?s=128&g=1", "display_name": "Asesh", "link": "https://stackoverflow.com/users/4781312/asesh"}, "edited": false, "score": 0, "creation_date": 1475066986, "post_id": 39747714, "comment_id": 66792158, "body": "@Asesh I&#39;m not used com initialize."}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1475067216, "post_id": 39747714, "comment_id": 66792311, "body": "Semi off topic but feedback on your code: Please learn to use <a href=\"http://en.cppreference.com/w/cpp/language/raii\" rel=\"nofollow noreferrer\">RAII</a>"}, {"owner": {"reputation": 1074, "user_id": 1140967, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/de34a0c7a49dd6750ce8775b59eb5cb9?s=128&d=identicon&r=PG&f=1", "display_name": "\u0130smail Kocacan", "link": "https://stackoverflow.com/users/1140967/%c4%b0smail-kocacan"}, "reply_to_user": {"reputation": 2565, "user_id": 4781312, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lDEcJ.jpg?s=128&g=1", "display_name": "Asesh", "link": "https://stackoverflow.com/users/4781312/asesh"}, "edited": false, "score": 0, "creation_date": 1475067419, "post_id": 39747714, "comment_id": 66792468, "body": "@Asesh I&#39;m trying now com initialize."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1475067805, "post_id": 39747714, "comment_id": 66792796, "body": "Semi off topic: why don&#39;t you use <code>SHELLEXECUTEINFOW ExecInfo; ...; ExecInfo.</code> instead of <code>SHELLEXECUTEINFOW *lpExecInfo = new SHELLEXECUTEINFOW();; ...; lpExecInfo-&gt;</code> ? Allocating a <code>SHELLEXECUTEINFOW</code> on the stack just to delete it at the end of the function is completly pointless."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1475067997, "post_id": 39747714, "comment_id": 66792937, "body": "@MichaelWalz <b>heap</b> you meant. Any perhaps it is for initialization. But that is best done like so: <code>SHELLEXECUTEINFOW execInfo = { sizeof(SHELLEXECUTEINFOW) };</code>"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1475068029, "post_id": 39747714, "comment_id": 66792959, "body": "You need to check the return value before waiting on the handle. And yes, why would you use <code>ShellExecuteEx</code> here at all? You are just asking for trouble."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1475068226, "post_id": 39747714, "comment_id": 66793106, "body": "@DavidHeffernan thanks, of course I meant <b>heap</b> and not <b>stack</b>."}, {"owner": {"reputation": 2689, "user_id": 1687639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5a6dd18900e2bfd6dffec21ee358f31?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Oicles", "link": "https://stackoverflow.com/users/1687639/christopher-oicles"}, "edited": false, "score": 1, "creation_date": 1475068438, "post_id": 39747714, "comment_id": 66793285, "body": "<code>lpExecInfo-&gt;hProcess</code> will always be NULL unless you add the flag <code>SEE_MASK_NOCLOSEPROCESS</code> to your <code>lpExecInfo-&gt;fMask</code>.  You should check <code>bResult</code> and make sure <code>lpExecInfo-&gt;hProcess</code> is valid before pasing it to <code>WaitForSingleObject</code>.  You will also need to close it with <code>CloseHandle</code> when finished."}, {"owner": {"reputation": 1074, "user_id": 1140967, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/de34a0c7a49dd6750ce8775b59eb5cb9?s=128&d=identicon&r=PG&f=1", "display_name": "\u0130smail Kocacan", "link": "https://stackoverflow.com/users/1140967/%c4%b0smail-kocacan"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1475068559, "post_id": 39747714, "comment_id": 66793384, "body": "@DavidHeffernan I want to start process and wait for complete."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 2, "creation_date": 1475068707, "post_id": 39747714, "comment_id": 66793487, "body": "Yes. I know. So many questions. Why are you not checking the return value immediately? Why didn&#39;t you pass <code>SEE_MASK_NOCLOSEPROCESS</code>? Why are you leaking the handle? Why aren&#39;t you using <code>CreateProcess</code>? You don&#39;t understand these functions well enough to use them. Spend more time reading the documentation and learning. Coding when you don&#39;t know what you are coding against never ends well. Stop guessing."}, {"owner": {"reputation": 2565, "user_id": 4781312, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lDEcJ.jpg?s=128&g=1", "display_name": "Asesh", "link": "https://stackoverflow.com/users/4781312/asesh"}, "edited": false, "score": 1, "creation_date": 1475068895, "post_id": 39747714, "comment_id": 66793637, "body": "If you want to start the process and wait for it to terminate then you should use CreateProcess instead. It&#39;s easier to use that API"}, {"owner": {"reputation": 1074, "user_id": 1140967, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/de34a0c7a49dd6750ce8775b59eb5cb9?s=128&d=identicon&r=PG&f=1", "display_name": "\u0130smail Kocacan", "link": "https://stackoverflow.com/users/1140967/%c4%b0smail-kocacan"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1475071454, "post_id": 39747714, "comment_id": 66795848, "body": "@DavidHeffernan you&#39;re right. I will consider your suggestions."}], "answers": [{"comments": [{"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1475098831, "post_id": 39757991, "comment_id": 66812255, "body": "The OP&#39;s convention of representing a boolean with the <code>int</code> values <code>0</code> and <code>-1</code> is not really worth repeating, IMHO. Ditto for the naming convention. I&#39;d write a wrapper for him, but would use a normal <code>bool</code> for the main function."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 1, "creation_date": 1475130686, "post_id": 39757991, "comment_id": 66820966, "body": "Second argument needs to be modifiable and you supply const"}, {"owner": {"reputation": 1074, "user_id": 1140967, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/de34a0c7a49dd6750ce8775b59eb5cb9?s=128&d=identicon&r=PG&f=1", "display_name": "\u0130smail Kocacan", "link": "https://stackoverflow.com/users/1140967/%c4%b0smail-kocacan"}, "edited": false, "score": 1, "creation_date": 1475131470, "post_id": 39757991, "comment_id": 66821398, "body": "I&#39;m fixing it now."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1475138646, "post_id": 39757991, "comment_id": 66825706, "body": "Passing <code>FORMAT_MESSAGE_FROM_SYSTEM</code> to <code>FormatMessageW</code> means, that you are not in control of the message returned. In that case you should really also pass <code>FORMAT_MESSAGE_IGNORE_INSERTS</code> along (see <a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20071128-00/?p=24353\" rel=\"nofollow noreferrer\">The importance of the FORMAT_MESSAGE_IGNORE_INSERTS flag</a>)."}], "tags": [], "owner": {"reputation": 1074, "user_id": 1140967, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/de34a0c7a49dd6750ce8775b59eb5cb9?s=128&d=identicon&r=PG&f=1", "display_name": "\u0130smail Kocacan", "link": "https://stackoverflow.com/users/1140967/%c4%b0smail-kocacan"}, "is_accepted": true, "score": 2, "last_activity_date": 1475144349, "last_edit_date": 1475144349, "creation_date": 1475098205, "answer_id": 39757991, "question_id": 39747714, "link": "https://stackoverflow.com/questions/39747714/shellexecuteex-does-not-work-stable/39757991#39757991", "title": "ShellExecuteEx Does Not Work Stable", "body": "<p>Here is with CreateProcess. </p>\n\n<pre><code>bool WinServiceInstall(WideString ServicePath)\n{\n    STARTUPINFO si = { sizeof(si) };\n    PROCESS_INFORMATION pi = {};\n\n    WideString lpCommandLine=L\"\\\"\"+ServicePath+\"\\\\MyService.exe\"+\"\\\" /install /silent\";\n\n    if(CreateProcessW(NULL,\n        lpCommandLine,\n        NULL,\n        NULL,\n        FALSE,\n        0,\n        NULL,\n        NULL,\n        &amp;si,\n        &amp;pi )\n    )\n    {\n        WaitForSingleObject( pi.hProcess, INFINITE );\n        CloseHandle( pi.hProcess );\n        CloseHandle( pi.hThread );\n        return true;\n    }\n    else\n    {\n        wchar_t buf[256];\n        long errorCode = GetLastError();\n        FormatMessageW(FORMAT_MESSAGE_FROM_SYSTEM, NULL, errorCode,MAKELANGID(LANG_NEUTRAL, SUBLANG_DEFAULT), buf, 256, NULL);\n        MessageBoxW(0,buf,L\"Error\",0);\n        return false;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1074, "user_id": 1140967, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/de34a0c7a49dd6750ce8775b59eb5cb9?s=128&d=identicon&r=PG&f=1", "display_name": "\u0130smail Kocacan", "link": "https://stackoverflow.com/users/1140967/%c4%b0smail-kocacan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 595, "favorite_count": 0, "accepted_answer_id": 39757991, "answer_count": 1, "score": 0, "last_activity_date": 1475144349, "creation_date": 1475066120, "question_id": 39747714, "link": "https://stackoverflow.com/questions/39747714/shellexecuteex-does-not-work-stable", "title": "ShellExecuteEx Does Not Work Stable", "body": "<p>I'm trying to install windows service (Build with CBuilder 6) using <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb762154(v=vs.85).aspx\" rel=\"nofollow\">ShellExecuteEx</a></p>\n\n<p>Here is my install function.</p>\n\n<pre><code>int WinServiceInstall(WideString ServicePath)\n{\n int result = 0;\n LPCWSTR filename = L\"MyService.exe\";\n LPCWSTR params = L\"/install /silent\";\n LPCWSTR dir = ServicePath;\n\n WideString fullPath = ServicePath+\"\\\\\"+filename;\n if (!PathFileExistsW(fullPath.c_bstr())) return -1;\n\n SHELLEXECUTEINFOW *lpExecInfo = new SHELLEXECUTEINFOW();\n try\n {\n     lpExecInfo-&gt;cbSize = sizeof(SHELLEXECUTEINFOW);\n     lpExecInfo-&gt;hwnd = 0;\n     lpExecInfo-&gt;lpVerb = NULL;\n     lpExecInfo-&gt;lpFile = filename;\n     lpExecInfo-&gt;lpDirectory = dir;\n     lpExecInfo-&gt;lpParameters = params;\n     lpExecInfo-&gt;nShow = SW_HIDE;\n     lpExecInfo-&gt;hInstApp = NULL;\n     BOOL bResult = ShellExecuteExW(lpExecInfo);\n     WaitForSingleObject(lpExecInfo-&gt;hProcess,INFINITE);\n     if (!bResult)\n     {\n       int ErrorCode = GetLastError();\n       WideString message = GetLastErrorMessage(ErrorCode);\n       message +=\"\\n\"+IntToStr(ErrorCode);\n       MessageBoxW(0,message,L\"GetLastError\",0);\n       PrintError(ErrorCode);\n       result = -1;\n     }\n }\n catch(Exception &amp;e)\n {\n   printf(\"Hata: %s\",e.Message);\n   result = -1;\n\n   WideString message = e.Message;\n   MessageBoxW(0,message,L\"Exception\",0);\n }\n delete lpExecInfo;\n return result;\n}\n</code></pre>\n\n<p>But ShellExecuteEx function don't work stable.</p>\n\n<p>Sometimes throwing EAccessViolation exception.</p>\n\n<p>How can I do debug problem ? Where's my mistake ?</p>\n\n<p>Thanks.</p>\n"}]