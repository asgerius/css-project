[{"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 31218, "user_id": 211160, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Z2fk7.png?s=128&g=1", "display_name": "HostileFork says dont trust SE", "link": "https://stackoverflow.com/users/211160/hostilefork-says-dont-trust-se"}, "edited": false, "score": 1, "creation_date": 1426118246, "post_id": 28999586, "comment_id": 46247129, "body": "Welcome to StackOverflow, but be prepared for a lot of critique if you tag a question both <b>c++</b> and <b>c</b>.  You really have to establish which language you are using, because they aren&#39;t 100% compatible...but moreover, the way of thinking about problems is quite different, with C++ being much more abstract and high-level.  <i>(For instance, in C++ your mistake here wouldn&#39;t happen because you&#39;d be using a string class that would allow you to use the equality operator a la <code>while (TryAgain == &quot;y&quot;)</code>, just for instance.)</i>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1426118425, "post_id": 28999586, "comment_id": 46247168, "body": "Since you tagged this as C++, you should switch to using <code>std::string</code> for text strings instead of the problematic C-style (null terminated character sequence) string."}], "answers": [{"comments": [{"owner": {"reputation": 31218, "user_id": 211160, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Z2fk7.png?s=128&g=1", "display_name": "HostileFork says dont trust SE", "link": "https://stackoverflow.com/users/211160/hostilefork-says-dont-trust-se"}, "reply_to_user": {"reputation": 57, "user_id": 2836816, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f85b621d89feb8223924655190c2cd64?s=128&d=identicon&r=PG&f=1", "display_name": "user2836816", "link": "https://stackoverflow.com/users/2836816/user2836816"}, "edited": false, "score": 0, "creation_date": 1426118430, "post_id": 28999606, "comment_id": 46247169, "body": "@user2836816 There is an accept button to check a solution when it solves your problem...which is the general way of thanking people."}, {"owner": {"reputation": 55943, "user_id": 3933332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zuzev.png?s=128&g=1", "display_name": "Rizier123", "link": "https://stackoverflow.com/users/3933332/rizier123"}, "reply_to_user": {"reputation": 31218, "user_id": 211160, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Z2fk7.png?s=128&g=1", "display_name": "HostileFork says dont trust SE", "link": "https://stackoverflow.com/users/211160/hostilefork-says-dont-trust-se"}, "edited": false, "score": 0, "creation_date": 1426118648, "post_id": 28999606, "comment_id": 46247236, "body": "@HostileFork I think OP is aware about the accept mark, since he already accepted another answer on another question and there is a 15 min grace period where OP has to wait until he can accept an answer"}, {"owner": {"reputation": 31218, "user_id": 211160, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Z2fk7.png?s=128&g=1", "display_name": "HostileFork says dont trust SE", "link": "https://stackoverflow.com/users/211160/hostilefork-says-dont-trust-se"}, "reply_to_user": {"reputation": 55943, "user_id": 3933332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zuzev.png?s=128&g=1", "display_name": "Rizier123", "link": "https://stackoverflow.com/users/3933332/rizier123"}, "edited": false, "score": 0, "creation_date": 1426118696, "post_id": 28999606, "comment_id": 46247242, "body": "@Rizier123 Ah, the 15 minutes.  Forgot about that.  Thanks."}], "owner": {"reputation": 525, "user_id": 3293993, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/39abf3159edc67accb4f5c64503d52be?s=128&d=identicon&r=PG&f=1", "display_name": "Jed Estep", "link": "https://stackoverflow.com/users/3293993/jed-estep"}, "is_accepted": false, "score": 5, "last_activity_date": 1426118075, "creation_date": 1426118075, "answer_id": 28999606, "question_id": 28999586, "link": "https://stackoverflow.com/questions/28999586/having-trouble-with-while-loops/28999606#28999606", "title": "Having trouble with while loops", "body": "<p><code>strcmp</code> returns 0 if its arguments are the same, so at the first iteration your while loop is checking <code>while(0)</code>. 0 is equivalent to <code>false</code> in boolean checks so the while loop is skipped. Try <code>while(!strcmp(TryAgain, \"y\"))</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 31218, "user_id": 211160, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Z2fk7.png?s=128&g=1", "display_name": "HostileFork says dont trust SE", "link": "https://stackoverflow.com/users/211160/hostilefork-says-dont-trust-se"}, "edited": false, "score": 0, "creation_date": 1426118486, "post_id": 28999654, "comment_id": 46247186, "body": "Except for the fact that it doesn&#39;t work!  You can&#39;t use <code>==</code> for testing equality of C strings, as it just tests if the pointers are equal."}], "owner": {"reputation": 2280, "user_id": 4577493, "user_type": "registered", "accept_rate": 44, "profile_image": "https://lh5.googleusercontent.com/--CF2KIHKIF8/AAAAAAAAAAI/AAAAAAAAADg/C-yjnAN1v7Y/photo.jpg?sz=128", "display_name": "Carlos Carrizales", "link": "https://stackoverflow.com/users/4577493/carlos-carrizales"}, "is_accepted": false, "score": 0, "last_activity_date": 1426120120, "last_edit_date": 1426120120, "creation_date": 1426118368, "answer_id": 28999654, "question_id": 28999586, "link": "https://stackoverflow.com/questions/28999586/having-trouble-with-while-loops/28999654#28999654", "title": "Having trouble with while loops", "body": "<p>I prefer to change it to a do-while</p>\n\n<pre><code>do {\n  printf(\"\\nWould you like to try another word? [y/n]\\n\");\n  scanf(\"%s\", TryAgain);\n} while (TryAgain==\"y\" || TryAgain==\"Y\");\n</code></pre>\n\n<p>the TryAgain must be boolean.\nsee ya</p>\n"}], "owner": {"reputation": 57, "user_id": 2836816, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f85b621d89feb8223924655190c2cd64?s=128&d=identicon&r=PG&f=1", "display_name": "user2836816", "link": "https://stackoverflow.com/users/2836816/user2836816"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1426120230, "creation_date": 1426117961, "last_edit_date": 1426120230, "question_id": 28999586, "link": "https://stackoverflow.com/questions/28999586/having-trouble-with-while-loops", "title": "Having trouble with while loops", "body": "<p>I do not understand why nothing is showing up on the screen when I run this little program? Is the while loop even starting? </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n  char word[20]; \n  char TryAgain[20] = \"y\";\n  int WordLength = 0;\n\n  while (strcmp(TryAgain, \"y\"))\n  {\n    printf(\"\\t\\t\\t Word \\n\\n\");\n    printf(\"What is your word, bird?\\n\");\n    scanf(\"%s\", word);\n    getchar();\n\n    WordLength = strlen(word); \n\n    printf(\"Result: \"); \n    for (int i = 0; i &lt; WordLength; ++i)\n    {\n        printf(\"%c*\", word[i]);\n    }\n    printf(\"\\nWould you like to try another word? [y/n]\\n\");\n    scanf(\"%s\", TryAgain);\n  }\n\n  getchar();\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "file-io", "stdin"], "answers": [{"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "is_accepted": true, "score": 0, "last_activity_date": 1426155752, "last_edit_date": 1495541184, "creation_date": 1426122769, "answer_id": 29000318, "question_id": 28999498, "link": "https://stackoverflow.com/questions/28999498/take-file-as-an-input-from-the-command-line-c/29000318#29000318", "title": "Take file as an input from the command line c++", "body": "<p>Do it like this</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n\nint main()\n{\n    std::string line;\n\n    std::cout &lt;&lt; \"received \" &lt;&lt; std::endl;\n\n    while(std::getline(std::cin, line))\n    {\n        std::cout &lt;&lt; line  &lt;&lt; std::endl;\n    }\n\n    std::cout &lt;&lt; \"on stdin\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>You do not need to open the file yourself as the file content is passed to you on <code>stdin</code> as a result of using <code>&lt;</code> on the command line.</p>\n\n<p>This code has a drawback that if you do not input anything on <code>stdin</code> it freezes. Detecting that <code>stdin</code> is empty can only be achieved in a non portable manner (see <a href=\"https://stackoverflow.com/questions/6839508/test-if-stdin-has-input-for-c-windows-and-or-linux\">here</a>). </p>\n\n<p>It would be better to accept your filename as a normal command line argument and open it inside your program.</p>\n"}], "owner": {"reputation": 11, "user_id": 4151888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d569d919359a94697ef61f1de3ef8756?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/4151888/ryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2227, "favorite_count": 0, "accepted_answer_id": 29000318, "answer_count": 1, "score": -1, "last_activity_date": 1426155752, "creation_date": 1426117427, "last_edit_date": 1426125939, "question_id": 28999498, "link": "https://stackoverflow.com/questions/28999498/take-file-as-an-input-from-the-command-line-c", "title": "Take file as an input from the command line c++", "body": "<p>Currently I have code that uses cin to get the name of the file to be used as input when the program is executed. I would like to have it so that when i run the program i can add the file redirection and the filename and run it as such: <strong>./a.out &lt; file.txt</strong>. How can i feed my file into my code using redirection.</p>\n\n<p>this is an example of how i am currently taking input:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>int main(){\r\n  \r\n    std::string filename;\r\n\tstd::cin &gt;&gt; filename;\r\n\tstd::ifstream f(filename.c_str());\r\n  \r\n }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["c++", "wxwidgets", "gstreamer"], "comments": [{"owner": {"reputation": 8744, "user_id": 4326278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FzH4Z.png?s=128&g=1", "display_name": "bogdan", "link": "https://stackoverflow.com/users/4326278/bogdan"}, "edited": false, "score": 1, "creation_date": 1426266977, "post_id": 28999362, "comment_id": 46316994, "body": "I have no experience with GStreamer, but the first error message up there, <code>assertion &#39;gst_is_initialized ()&#39; failed</code>, seems to indicate that <code>gst_init()</code> (or <code>gst_init_check()</code>) hasn&#39;t been called yet. Where are you calling it?"}], "answers": [{"comments": [{"owner": {"reputation": 4873, "user_id": 709683, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/f11fa.png?s=128&g=1", "display_name": "Stefano Mtangoo", "link": "https://stackoverflow.com/users/709683/stefano-mtangoo"}, "edited": false, "score": 0, "creation_date": 1426179639, "post_id": 29009329, "comment_id": 46276340, "body": "I want to use Gstreamer on both Linux and Windows (MediaCtrl uses something else on windows). I searched for its backend files for ages and didn&#39;t found. This morning I found it in unix folder (thought will be in gtk) I think it will be good to have Gst in windows too!"}], "owner": {"reputation": 18238, "user_id": 15275, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WNTZ3.jpg?s=128&g=1", "display_name": "VZ.", "link": "https://stackoverflow.com/users/15275/vz"}, "is_accepted": false, "score": 1, "last_activity_date": 1426161916, "creation_date": 1426161916, "answer_id": 29009329, "question_id": 28999362, "link": "https://stackoverflow.com/questions/28999362/play-video-with-gstreamer-and-wxpanel/29009329#29009329", "title": "Play Video with GStreamer and wxPanel", "body": "<p>Even if you don't want to just use it (why?), at least have a look at what <code>wxMediaCtrl</code>, which is implemented using GStreamer under Unix, does.</p>\n"}, {"owner": {"reputation": 4873, "user_id": 709683, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/f11fa.png?s=128&g=1", "display_name": "Stefano Mtangoo", "link": "https://stackoverflow.com/users/709683/stefano-mtangoo"}, "is_accepted": true, "score": 0, "last_activity_date": 1429344502, "creation_date": 1429344502, "answer_id": 29714681, "question_id": 28999362, "link": "https://stackoverflow.com/questions/28999362/play-video-with-gstreamer-and-wxpanel/29714681#29714681", "title": "Play Video with GStreamer and wxPanel", "body": "<p>Add sync handler using <a href=\"http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gstreamer/html/GstBus.html#gst-bus-set-sync-handler\" rel=\"nofollow\">gst_bus_set_sync_handler</a> and then inside that function use GstVideoOverlay to channel video to your widget. Here is a working sample function.</p>\n\n<pre><code>static GstBusSyncReply\nbus_sync(GstBus* bus, GstMessage* message, gpointer user_data)\n{\n    CustomData* data = reinterpret_cast&lt;CustomData*&gt;(user_data);        \n\n    if(!gst_is_video_overlay_prepare_window_handle_message(message))\n        return GST_BUS_PASS;            \n    else\n    {\n        if(data-&gt;xid!=NULL)\n        {\n\n            GstVideoOverlay *overlay;\n            overlay = GST_VIDEO_OVERLAY(GST_MESSAGE_SRC(message));\n            gst_video_overlay_set_window_handle(overlay, data-&gt;xid);\n        }\n\n        return GST_BUS_DROP;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 4873, "user_id": 709683, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/f11fa.png?s=128&g=1", "display_name": "Stefano Mtangoo", "link": "https://stackoverflow.com/users/709683/stefano-mtangoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 883, "favorite_count": 0, "accepted_answer_id": 29714681, "answer_count": 2, "score": 0, "last_activity_date": 1429344502, "creation_date": 1426116712, "question_id": 28999362, "link": "https://stackoverflow.com/questions/28999362/play-video-with-gstreamer-and-wxpanel", "title": "Play Video with GStreamer and wxPanel", "body": "<p>I'm learning GStreamer and its fun, but I have hit a wall in using it with wxWidgets. No matter what I try I cannot break through. Examples out there are GTK/Qt which are helpful only to some limits. Here is Current code (which does not work) and below it error messages I get</p>\n\n<pre><code>wxGStreamer::wxGStreamer(wxWindow* parent, wxWindowID winid, const wxURI&amp; location):wxPanel(parent, winid)\n{\n    SetBackgroundColour(*wxBLACK);\n\n    /* Build the pipeline */\n    wxString uri = location.BuildURI();\n    wxPuts(uri);\n\n    // prepare the pipeline\n    GstElement *pipeline = gst_pipeline_new(\"xvoverlay\");\n    GstElement *src = gst_element_factory_make(\"videotestsrc\", NULL);\n    GstElement *sink = gst_element_factory_make(\"xvimagesink\", NULL);\n    gst_bin_add_many(GST_BIN(pipeline), src, sink, NULL);\n    gst_element_link(src, sink);\n\n    /* Set the URI to play */\n    g_object_set (pipeline, \"uri\", \"http://docs.gstreamer.com/media/sintel_trailer-480p.webm\", NULL);\n\n    GtkWidget* widget = GetHandle(); \n    guintptr video_window_handle = GDK_WINDOW_XID (gtk_widget_get_window (widget)); \n    gst_video_overlay_set_window_handle(GST_VIDEO_OVERLAY(sink), video_window_handle); \n\n    // run the pipeline\n    GstStateChangeReturn sret = gst_element_set_state(pipeline,\n                                GST_STATE_PLAYING);\n\n    if(sret == GST_STATE_CHANGE_FAILURE)\n    {\n        gst_element_set_state(pipeline, GST_STATE_NULL);\n        gst_object_unref(pipeline);\n    }\n\n    gst_element_set_state(pipeline, GST_STATE_NULL);\n    gst_object_unref(pipeline);\n}\n</code></pre>\n\n<p>where wxGStreamer is defined as</p>\n\n<pre><code>class  wxGStreamer : public wxPanel {............};\n</code></pre>\n\n<p>Errors\n<img src=\"https://i.stack.imgur.com/qnqTL.png\" alt=\"Error Messages\"></p>\n"}, {"tags": ["c++", "function"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1426118568, "post_id": 28999037, "comment_id": 46247209, "body": "You can reduce your comparisons by converting characters to lower case or uppercase before you compare.  See <code>toupper</code> and <code>tolower</code>."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4056792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09b49aae8be850954d6385d3d54b7856?s=128&d=identicon&r=PG&f=1", "display_name": "thenile123", "link": "https://stackoverflow.com/users/4056792/thenile123"}, "edited": false, "score": 0, "creation_date": 1426180384, "post_id": 28999259, "comment_id": 46276734, "body": "Also, in my code my calculations are not coming up correctly and my string function is not showing up in my display function."}, {"owner": {"reputation": 522, "user_id": 3365930, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/91e5dc2b0d24bb2e2aa590beed029cd5?s=128&d=identicon&r=PG&f=1", "display_name": "T.Malo", "link": "https://stackoverflow.com/users/3365930/t-malo"}, "reply_to_user": {"reputation": 3, "user_id": 4056792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09b49aae8be850954d6385d3d54b7856?s=128&d=identicon&r=PG&f=1", "display_name": "thenile123", "link": "https://stackoverflow.com/users/4056792/thenile123"}, "edited": false, "score": 0, "creation_date": 1426191782, "post_id": 28999259, "comment_id": 46282808, "body": "Ok, by looking at the code again I see what you mean about the string and I see the problem with the computeGallons() function you have. Post another question and link it here and I will answer for you and you can pick my answer. :)"}], "owner": {"reputation": 522, "user_id": 3365930, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/91e5dc2b0d24bb2e2aa590beed029cd5?s=128&d=identicon&r=PG&f=1", "display_name": "T.Malo", "link": "https://stackoverflow.com/users/3365930/t-malo"}, "is_accepted": true, "score": 0, "last_activity_date": 1426116119, "creation_date": 1426116119, "answer_id": 28999259, "question_id": 28999037, "link": "https://stackoverflow.com/questions/28999037/c-need-guidance-with-basic-functions/28999259#28999259", "title": "C++ need guidance with basic functions", "body": "<p>Well yeah because your function get <code>int getdata(char, double, char);</code> does not do what you think it does. You want to do this. Don't forget to pick the best answer.</p>\n\n<pre><code>void getdata(char *, double*, char*);\n\n//In your main getdata(&amp;gasType, &amp;dAmount, &amp;washResponse); it should look like this\n\nvoid getdata(char *gasType, double *dAmount, char *washResponse)\n{\n\n    cout &lt;&lt; \"Enter gas type(R,U,S) \";\n    toupper(*gasType);\n    cin &gt;&gt; *gasType;\n\n\n    while (*gasType != 'R' &amp;&amp; *gasType != 'r' &amp;&amp; *gasType != 'U' &amp;&amp; *gasType != 'u' &amp;&amp; *gasType != 'S' &amp;&amp; *gasType != 's')\n    {\n        cout &lt;&lt; \"Enter a gas type (R,U,S) \";\n        cin &gt;&gt; *gasType;\n    }\n\n    cout &lt;&lt; \"Enter dollar Amount \";\n    cin &gt;&gt; *dAmount;\n\n    while (*dAmount &lt; 4.95)\n    {\n\n        cout &lt;&lt; \"Please enter Amount greater than gasType \" &lt;&lt; endl;\n        cin &gt;&gt; *dAmount;\n    }\n\n    cout &lt;&lt; \"Car Wash (Y or N)\";\n    cin &gt;&gt; *washResponse;\n    while (*washResponse != 'Y' &amp;&amp; *washResponse != 'y' &amp;&amp; *washResponse != 'N' &amp;&amp; *washResponse != 'n')\n    {\n        cout &lt;&lt; \"Please enter Y for (Yes) or N for (No)\";\n        cin &gt;&gt; *washResponse;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 4056792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09b49aae8be850954d6385d3d54b7856?s=128&d=identicon&r=PG&f=1", "display_name": "thenile123", "link": "https://stackoverflow.com/users/4056792/thenile123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 28999259, "answer_count": 1, "score": -4, "last_activity_date": 1427388280, "creation_date": 1426114985, "last_edit_date": 1427388280, "question_id": 28999037, "link": "https://stackoverflow.com/questions/28999037/c-need-guidance-with-basic-functions", "title": "C++ need guidance with basic functions", "body": "<p>I'm having trouble with this program from my school assignment. The purpose of the program is to calculate gallons from the user input. My problem is that I think my functions are wrong and when I compile I keep getting 0 for everything.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\n\nint getdata(char, double, char);\nstring findGasName(char);\nint computeGallons(char, double, char);\nvoid display(string, double, double, double);\n\n\nint main()\n{\nstring gasName;\ndouble washCost = 0;\nchar gasType = 'a';\ndouble dAmountremaining = 0;\ndouble gallons = 0;\nconst double washResponseunder30 = 6.95;\nconst double REG = 2.199;\nconst double UNLEAD = 2.399;\nconst double SUNLEAD = 2.599;\ndouble dAmount = 0;\nchar washResponse = 'a';\n\ngetdata(gasType, dAmount, washResponse);\n\ngasName = findGasName(gasType);\n\ngallons = computeGallons(gasType, dAmount, washResponse);\n\ndisplay (gasName, gallons, washCost, dAmount);\n\n\nsystem(\"pause\");\nreturn 0;\n}\n</code></pre>\n\n<p>This area is where I'm having trouble I think. I previously had the int getdata function as a void but that isn't working either. </p>\n\n<pre><code>   int getdata(char gasType, double dAmount, char washResponse) \n   {\n\n    cout &lt;&lt; \"Enter gas type(R,U,S) \";\n    toupper(gasType);\n    cin &gt;&gt; gasType;\n\n\n    while (gasType != 'R' &amp;&amp; gasType != 'r' &amp;&amp; gasType != 'U' &amp;&amp; gasType != 'u' &amp;&amp; gasType != 'S' &amp;&amp; gasType != 's')\n    {\n        cout &lt;&lt; \"Enter a gas type (R,U,S) \";\n        cin &gt;&gt; gasType;\n    }\n\n    cout &lt;&lt; \"Enter dollar Amount \";\n    cin &gt;&gt; dAmount;\n\n    while (dAmount &lt; 4.95)\n    {\n\n        cout &lt;&lt; \"Please enter Amount greater than gasType \" &lt;&lt; endl;\n        cin &gt;&gt; dAmount;\n    }\n\n    cout &lt;&lt; \"Car Wash (Y or N)\";\n    cin &gt;&gt;  washResponse;\n    while (washResponse != 'Y' &amp;&amp; washResponse != 'y' &amp;&amp; washResponse != 'N' &amp;&amp; washResponse != 'n')\n    {\n        cout &lt;&lt; \"Please enter Y for (Yes) or N for (No)\";\n        cin &gt;&gt; washResponse;\n    }\n    return gasType, dAmount, washResponse;\n}\n\nstring findGasName(char gasType)\n{\n    string gasName;\n\n\n    if (gasType == 'R' &amp;&amp; gasType == 'r')\n        gasName = \"Regular\";\n    else if (gasType == 'U' &amp;&amp; gasType == 'u')\n        gasName = \"Unleaded\";\n    else if (gasType == 'S' &amp;&amp; gasType == 's')\n        gasName = \"Super\";\n\n    return gasName;\n}\n\nint computeGallons(char gasType, double dAmount, char washResponse)\n{\n    double washCost;\n    const double washResponsewith30 = 4.95;\n    double dAmountremaining = 0;\n    double gallons = 0;\n    const double washResponseunder30 = 6.95;\n    const double REG = 2.199;\n    const double UNLEAD = 2.399;\n    const double SUNLEAD = 2.599;\n\n\n\n    if (dAmount &gt;= 30) {\n        washCost = washResponsewith30;\n        dAmountremaining = dAmount - washCost;\n\n        switch (gasType)\n        {\n        case 'R': case 'r':\n            gallons = dAmountremaining / REG;\n\n\n            break;\n\n        case 'U': case 'u':\n            gallons = dAmountremaining / UNLEAD;\n\n\n            break;\n\n        case 'S': case 's':\n            gallons = dAmountremaining / SUNLEAD;\n\n\n            break;\n        }\n    }\n\n    else if (dAmount &lt; 30)\n    {\n        washCost = washResponseunder30;\n        dAmountremaining = dAmount - washCost;\n\n        switch (gasType)\n        {\n        case 'R': case 'r':\n            gallons = dAmountremaining / REG;\n\n\n            break;\n\n        case 'U': case 'u':\n            gallons = dAmountremaining / UNLEAD;\n\n\n            break;\n\n        case 'S': case 's':\n            gallons = dAmountremaining / SUNLEAD;\n\n\n            break;\n        }\n\n    }\n    else\n    {\n        washCost = 0;\n\n        switch (gasType)\n        {\n        case 'R': case 'r':\n            gallons = dAmountremaining / REG;\n\n\n            break;\n\n        case 'U': case 'u':\n            gallons = dAmountremaining / UNLEAD;\n\n\n            break;\n\n        case 'S': case 's':\n            gallons = dAmountremaining / SUNLEAD;\n\n\n            break;\n        }\n    }\n\n\n    return gallons;\n\n}\n\n\nvoid display(string gasName, double gallons, double washCost, double dAmount)\n{\n    cout &lt;&lt; \"Gas type\" &lt;&lt; setw(12) &lt;&lt; setprecision(2) &lt;&lt; \":\" &lt;&lt; gasName &lt;&lt; endl;\n    cout &lt;&lt; \"Gallons\" &lt;&lt; setw(13) &lt;&lt; \":\" &lt;&lt; gallons &lt;&lt; endl;\n    cout &lt;&lt; \"Car Wash\" &lt;&lt; setw(13) &lt;&lt; \":$\" &lt;&lt; washCost &lt;&lt; endl;\n    cout &lt;&lt; endl;\n    cout &lt;&lt; \"Purchase Amount\" &lt;&lt; setw(6) &lt;&lt; \":$\" &lt;&lt; dAmount &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": ["c++", ".net", "visual-studio-2012"], "comments": [{"owner": {"reputation": 1118, "user_id": 2450694, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a101093933ec102d4d27f5018774df48?s=128&d=identicon&r=PG&f=1", "display_name": "Creris", "link": "https://stackoverflow.com/users/2450694/creris"}, "edited": false, "score": 1, "creation_date": 1426114943, "post_id": 28999001, "comment_id": 46245942, "body": "in C++ I think it just loads the comments from above or inside before any code to provide you information. Maybe it works like this for C# too, but for C++ libraries there is not really much going on when it comes to comments"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 2, "creation_date": 1426116009, "post_id": 28999001, "comment_id": 46246339, "body": "No.  It is C++, it is supposed to be difficult.  If it wasn&#39;t then anybody could do it, we can&#39;t have that."}], "answers": [{"owner": {"reputation": 3025, "user_id": 4660602, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iYRGR.jpg?s=128&g=1", "display_name": "Geoherna", "link": "https://stackoverflow.com/users/4660602/geoherna"}, "is_accepted": false, "score": 1, "last_activity_date": 1426115146, "creation_date": 1426115146, "answer_id": 28999068, "question_id": 28999001, "link": "https://stackoverflow.com/questions/28999001/intellisense-in-visual-studio-c/28999068#28999068", "title": "IntelliSense in Visual Studio C++", "body": "<p>Unfortunately, I have never seen any code hinting tool which works with C++ with as much detail as IntelliSense works with C#. There certainly are tools which can provide you with basic code hinting for std:: elements, but nowhere as detailed. Ive used codelite 2.0 in the past and its ok, but thats an entire IDE and provides basic code completion, probably the same as using VS2013</p>\n"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 1, "last_activity_date": 1426118143, "creation_date": 1426118143, "answer_id": 28999616, "question_id": 28999001, "link": "https://stackoverflow.com/questions/28999001/intellisense-in-visual-studio-c/28999616#28999616", "title": "IntelliSense in Visual Studio C++", "body": "<p>You could add extensive comments to the <code>std</code> header files MSVC ships with.</p>\n\n<p>In my experience comments directly beside a method show up.</p>\n\n<p>This would be a big project, and ideally you'd want to fold it back to MSVC sources and then to their sources so it would persist between versions.</p>\n"}], "owner": {"reputation": 1041, "user_id": 1241288, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/88059e59d053af2263f66f2ae459017d?s=128&d=identicon&r=PG", "display_name": "xan", "link": "https://stackoverflow.com/users/1241288/xan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1426118143, "creation_date": 1426114830, "question_id": 28999001, "link": "https://stackoverflow.com/questions/28999001/intellisense-in-visual-studio-c", "title": "IntelliSense in Visual Studio C++", "body": "<p>I've always loved IntelliSense in C# in Visual Studio 2013. I'm not only talking about autocomplete function but also about those methods' descriptions (documentation's excerpts I suppose) viewed in autocomplete box. For example when I write:</p>\n\n<pre><code>List&lt;int&gt; l = new List&lt;int&gt;();\nl.Add\n</code></pre>\n\n<p>Then I get a nice explanation: </p>\n\n<blockquote>\n  <p>Adds an object to the end of the System.Collections.Generic.List.</p>\n</blockquote>\n\n<p>Also hints when calling some method are very useful (how many overloads, types of parameters).</p>\n\n<p>But lately I decided to write some C++ code in Visual Studio 2013 and I see that those methods' descriptions are not visible. For example when I write:</p>\n\n<pre><code>string s;\ns.length\n</code></pre>\n\n<p>all I get is autocomplete + function definition (return type and types of parameters). No information about what does this function do whatsoever. It's not something I can't live with. I know what .length() does :-) but collections in STL have many functions and it would be very very nice to have their descriptions (I know they can't replace whole documentation, but some comment on applications would be very nice) in Visual Studio, not only on <a href=\"http://www.cplusplus.com/reference/\" rel=\"nofollow\">www.cplusplus.com/reference/</a></p>\n\n<p>So my question is this: is it possible in Microsoft Visual Studio to make IntelliSense work with C++ exactly as it works with C#?</p>\n"}, {"tags": ["c++", "segmentation-fault", "libcrafter"], "comments": [{"owner": {"reputation": 2647, "user_id": 832009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/009fa7a90fa08dc24fee138fb8d04fa4?s=128&d=identicon&r=PG", "display_name": "QuentinUK", "link": "https://stackoverflow.com/users/832009/quentinuk"}, "edited": false, "score": 0, "creation_date": 1426118998, "post_id": 28998964, "comment_id": 46247346, "body": "Due to using a null pointer. iterator should be given a value before being used."}, {"owner": {"reputation": 5335, "user_id": 1606657, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9eebb1dbb460af4f3974a7940df3e26d?s=128&d=identicon&r=PG", "display_name": "wasp256", "link": "https://stackoverflow.com/users/1606657/wasp256"}, "reply_to_user": {"reputation": 2647, "user_id": 832009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/009fa7a90fa08dc24fee138fb8d04fa4?s=128&d=identicon&r=PG", "display_name": "QuentinUK", "link": "https://stackoverflow.com/users/832009/quentinuk"}, "edited": false, "score": 0, "creation_date": 1426146343, "post_id": 28998964, "comment_id": 46255066, "body": "The iterator is not null, I have tried it also with hardcoded values. Updated the post, sorry for the confusion, but still get the same result"}, {"owner": {"reputation": 2647, "user_id": 832009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/009fa7a90fa08dc24fee138fb8d04fa4?s=128&d=identicon&r=PG", "display_name": "QuentinUK", "link": "https://stackoverflow.com/users/832009/quentinuk"}, "edited": false, "score": 0, "creation_date": 1426151440, "post_id": 28998964, "comment_id": 46257428, "body": "PacketFromIP just calls Decode, Decode deletes the layers. It could be there, if a layer on the stack is a null ptr?"}], "owner": {"reputation": 5335, "user_id": 1606657, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9eebb1dbb460af4f3974a7940df3e26d?s=128&d=identicon&r=PG", "display_name": "wasp256", "link": "https://stackoverflow.com/users/1606657/wasp256"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 182, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1426146254, "creation_date": 1426114651, "last_edit_date": 1426146254, "question_id": 28998964, "link": "https://stackoverflow.com/questions/28998964/c-segmentation-fault-in-libcrafter", "title": "c++ segmentation fault in libcrafter", "body": "<p>I am using the library Crafter in my c++ program. When calling the function</p>\n\n<pre><code> Crafter::GetMAC(\"192.168.1.10\", \"eth0\");\n</code></pre>\n\n<p>I receive a Segmentation Fault, I looked into this method, which calls some other methods. The call stack is as follows:</p>\n\n<pre><code>  - Crafter::GetMAC(\"192.168.1.10\", \"eth0\");\n  - GetMACIPv4(net_addr, iterator-&gt;iface_name);\n  - Packet::SendRecv(const string&amp; iface, double timeout, int retry, const string&amp; user_filter);\n</code></pre>\n\n<p>In the <code>SendRecv</code> I receive the Segmentation Fault at this line:</p>\n\n<pre><code>    if ((r = pcap_next_ex (handle, &amp;header, &amp;packet)) &lt;= 0)\n</code></pre>\n\n<p>I run the program with valgrind and the stacktrace output of the error I receive is the following:</p>\n\n<pre><code>    ==32555== Process terminating with default action of signal 11 (SIGSEGV)\n    ==32555==  Access not within mapped region at address 0x0\n    ==32555==    at 0x4E68DD0: Crafter::Packet::PacketFromIP(unsigned char const*, unsigned long) (PacketDecoder.cpp:599)\n    ==32555==    by 0x406EA2: captureThreadCallback(unsigned char*, pcap_pkthdr const*, unsigned char const*) (NetworkStructure.cpp:17)\n    ==32555==    by 0x50CE805: pcap_handle_packet_mmap (pcap-linux.c:4546)\n    ==32555==    by 0x50D31D0: pcap_read_linux_mmap_v3 (pcap-linux.c:4825)\n    ==32555==    by 0x50D76AC: pcap_loop (pcap.c:868)\n    ==32555==    by 0x406F65: captureThread(void*) (NetworkStructure.cpp:35)\n    ==32555==    by 0x53120A4: start_thread (pthread_create.c:309)\n    ==32555==    by 0x5B47CFC: clone (clone.S:111)\n</code></pre>\n\n<p>The installed version of <code>libcrafter</code> is 0.2, and from <code>libpcap</code> 1.6.2-1</p>\n\n<p>Does anyone have an idea how to fix this?</p>\n"}, {"tags": ["c++", "c++11", "c++14"], "comments": [{"owner": {"reputation": 24428, "user_id": 421163, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/l4J7H.jpg?s=128&g=1", "display_name": "c-smile", "link": "https://stackoverflow.com/users/421163/c-smile"}, "edited": false, "score": 0, "creation_date": 1426114613, "post_id": 28998933, "comment_id": 46245800, "body": "What <code>constexpr</code> is doing there?"}, {"owner": {"reputation": 52177, "user_id": 2073257, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/91182220a689e37a8939785bbe491000?s=128&d=identicon&r=PG", "display_name": "Daniel Frey", "link": "https://stackoverflow.com/users/2073257/daniel-frey"}, "edited": false, "score": 2, "creation_date": 1426114714, "post_id": 28998933, "comment_id": 46245847, "body": "Your code is not even close to be compilable. &quot;This doesn&#39;t work.&quot; is not helpful, you need to be more specific. If I <a href=\"http://coliru.stacked-crooked.com/a/33d84f6e437732b4\" rel=\"nofollow noreferrer\">fix the obvious errors</a>, it does work."}, {"owner": {"reputation": 48565, "user_id": 168288, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/2twwK.jpg?s=128&g=1", "display_name": "Charles Salvia", "link": "https://stackoverflow.com/users/168288/charles-salvia"}, "reply_to_user": {"reputation": 24428, "user_id": 421163, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/l4J7H.jpg?s=128&g=1", "display_name": "c-smile", "link": "https://stackoverflow.com/users/421163/c-smile"}, "edited": false, "score": 0, "creation_date": 1426114725, "post_id": 28998933, "comment_id": 46245854, "body": "@c-smile, <code>std::less::operator()</code> has the <code>constexpr</code> qualifier in C++14"}, {"owner": {"reputation": 1118, "user_id": 2450694, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a101093933ec102d4d27f5018774df48?s=128&d=identicon&r=PG&f=1", "display_name": "Creris", "link": "https://stackoverflow.com/users/2450694/creris"}, "edited": false, "score": 0, "creation_date": 1426114754, "post_id": 28998933, "comment_id": 46245870, "body": "I looked into the visual studio&#39;s implementation, and it actually has template with 2 and 3 argumnets, and when only 2 are provided, it uses less&lt;&gt;(), otherwise it tries to call the predicate, so in your case U"}, {"owner": {"reputation": 48565, "user_id": 168288, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/2twwK.jpg?s=128&g=1", "display_name": "Charles Salvia", "link": "https://stackoverflow.com/users/168288/charles-salvia"}, "edited": false, "score": 3, "creation_date": 1426114844, "post_id": 28998933, "comment_id": 46245906, "body": "Your first example <code>f(&quot;AB&#47;CD&quot;, &quot;CD&#47;AB&quot;)</code> is comparing <code>const char*</code> pointers"}, {"owner": {"reputation": 69802, "user_id": 493122, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/1f90ae01c2e24801c2df9189179b0ccd?s=128&d=identicon&r=PG", "display_name": "Shoe", "link": "https://stackoverflow.com/users/493122/shoe"}, "edited": false, "score": 3, "creation_date": 1426114881, "post_id": 28998933, "comment_id": 46245918, "body": "Don&#39;t put stuff in the <code>std</code> namespace. It&#39;s UB."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1426115062, "post_id": 28998933, "comment_id": 46245984, "body": "<code>std::less&lt;T&gt;</code> isn&#39;t that great a design for non-<code>void</code> <code>T</code>s. It makes a lot more sense to imitate <code>std::less&lt;void&gt;</code> - i.e., template the <code>operator()</code>, not the class."}], "answers": [{"comments": [{"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1426116430, "post_id": 28998996, "comment_id": 46246514, "body": "I think the idea to use 2 types is OK, and should compile (provided OP corrects the other typos mentioned). Basically OP allows for convertible types. The function <code>f</code> specifically instantiates <code>myless&lt;A&gt;</code> (or <code>myless&lt;B&gt;</code>), which was the part forgotten by OP, so <code>myless</code> is not confused anymore by type deduction."}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "reply_to_user": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1426117457, "post_id": 28998996, "comment_id": 46246883, "body": "@vsoftco Okay, I definitely didn&#39;t get that impression from the question. Since they were &quot;trying to understad (sic) how std::less is implemented&quot; and the calls to <code>f</code> used the same types."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1426117953, "post_id": 28998996, "comment_id": 46247045, "body": "that&#39;s the smart way to do it, with <code>std::common_type</code> :)"}], "owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "is_accepted": false, "score": 2, "last_activity_date": 1426117686, "last_edit_date": 1426117686, "creation_date": 1426114808, "answer_id": 28998996, "question_id": 28998933, "link": "https://stackoverflow.com/questions/28998933/implement-my-own-myless/28998996#28998996", "title": "implement my own myless", "body": "<p>Your <code>myless</code> template takes a single type but your <code>f</code> function takes two types (i.e., they might be different types). It's possible to support this but it's more involved. Did you intend to do the following instead?</p>\n\n<pre><code>template&lt;typename T, typename U = myless&lt;T&gt;&gt;\nbool f(T a, T b, U u = U())\n{\n    return u(a, b);\n}\n</code></pre>\n\n<h2>Edit</h2>\n\n<p>As @vscoftco pointed out supporting different types may have been an intended use case. If different types were to be explicitly supported then I would have implemented it like this.</p>\n\n<pre><code>template&lt;typename A, typename B, typename U = myless&lt;typename std::common_type&lt;A, B&gt;::type&gt;&gt;\nbool f(A a, B b, U u = U())\n{\n    return u(a, b);\n}\n</code></pre>\n\n<p>It also appears this solution is SFINAE compatible (C++17), <a href=\"http://en.cppreference.com/w/cpp/types/common_type\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/types/common_type</a>.</p>\n\n<blockquote>\n  <p>If sizeof...(T) is zero or if there is no common type, the member type is not defined (std::common_type is SFINAE-friendly)</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1426116217, "post_id": 28999018, "comment_id": 46246432, "body": "The provided <code>f</code> function can be called like this: <code>f(&quot;test&quot;, 3.3)</code>, which produces a compilation error. I think what you have is fine but shouldn&#39;t the 2 arguments of the <code>f</code> function enforce that <code>a</code> and <code>b</code> are of the same type?"}], "owner": {"reputation": 7526, "user_id": 4108376, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/163807162a115b27e50f5f5f2b90de26?s=128&d=identicon&r=PG&f=1", "display_name": "tmlen", "link": "https://stackoverflow.com/users/4108376/tmlen"}, "is_accepted": true, "score": 3, "last_activity_date": 1426115958, "last_edit_date": 1426115958, "creation_date": 1426114902, "answer_id": 28999018, "question_id": 28998933, "link": "https://stackoverflow.com/questions/28998933/implement-my-own-myless/28999018#28999018", "title": "implement my own myless", "body": "<p>There is a typo in <code>f(\"AB/CD\", \"CD/AB\",)</code> (comma).\nIt should be <code>typename U = myless&lt;A&gt;</code> because <code>myless</code> is not in the <code>std</code> namespace.\nAlso the parameters should probably be passed by reference: <code>bool f(const A&amp; a, const B&amp; b, const U&amp; u = U())</code>.</p>\n\n<p><code>std::less</code> needs both operands to be of the same type (logically), and <code>myless</code> is also defined like that. So using <code>myless&lt;A&gt;</code> for <code>U</code> would make it convert the <code>B</code> object to <code>A</code> for the comparing (by creating a temporary using its copy-constructor).</p>\n\n<p>Since C++14, there is also the specialization <code>std::less&lt;void&gt;</code> where the operand can have different types, and a return type that is not bool. It maps one-to-one to what the <code>operator&lt;</code> does. See <a href=\"http://en.cppreference.com/w/cpp/utility/functional/less_void\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/utility/functional/less_void</a> .</p>\n\n<p>Corrected version of the code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate &lt;typename T&gt;\nstruct myless\n{\n    constexpr bool operator()(const T &amp;lhs, const T &amp;rhs) const\n    {\n        return lhs &lt; rhs;\n    }\n};\n\ntemplate &lt;typename A, typename B, typename U = myless&lt;A&gt;&gt;\nbool f(const A&amp; a, const B&amp; b, const U&amp; u = U())\n{\n    return u(a, b);\n}\n\nint main() \n{\n    std::cout &lt;&lt; std::boolalpha;\n\n    std::cout &lt;&lt; f(\"AB/CD\", \"CD/AB\") &lt;&lt; '\\n';\n    std::cout &lt;&lt; f(100, 10) &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>For a version that can have different types, and non-bool return type:</p>\n\n<pre><code>struct myless2 {\n    template&lt;class T, class U&gt;\n    constexpr auto operator()(const T&amp; t, const U&amp; u) const -&gt; decltype(t &lt; u) {\n        return t &lt; u;\n    }\n};\n</code></pre>\n\n<p><code>std::less&lt;void&gt;</code> seems to also support r-value references, for when the <code>operator&lt;</code> is defined like that (probably doing something else than comparation then.)</p>\n"}], "owner": {"reputation": 5898, "user_id": 817659, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dc6960319324ecebe786580dfca13f07?s=128&d=identicon&r=PG", "display_name": "Ivan", "link": "https://stackoverflow.com/users/817659/ivan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 28999018, "answer_count": 2, "score": 0, "last_activity_date": 1426117686, "creation_date": 1426114483, "last_edit_date": 1426116571, "question_id": 28998933, "link": "https://stackoverflow.com/questions/28998933/implement-my-own-myless", "title": "implement my own myless", "body": "<p>I am trying to understad how std::less is implemented so I can say</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct myless\n{\n    constexpr bool operator()(const T &amp;lhs, const T &amp;rhs) const\n    {\n        return lhs &lt; rhs;\n    }\n};\n\ntemplate &lt;typename A, typename B, typename U = myless&gt; // std::less works\nbool f(A a, B b, U u = U())\n{\n    return u(a, b);\n}\n\nint main() \n{\n    std::cout &lt;&lt; std::boolalpha;\n\n    std::cout &lt;&lt; f(\"AB/CD\", \"CD/AB\") &lt;&lt; '\\n';\n    std::cout &lt;&lt; f(100, 10) &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>This doesn't work. Any suggestions?</p>\n"}, {"tags": ["c++", "regex"], "comments": [{"owner": {"reputation": 52749, "user_id": 1400768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tM0N8.png?s=128&g=1", "display_name": "nhahtdh", "link": "https://stackoverflow.com/users/1400768/nhahtdh"}, "edited": false, "score": 0, "creation_date": 1426169141, "post_id": 28998914, "comment_id": 46268813, "body": "With the question updated, I&#39;d say there is no way to shorten the regex more than what you have. Assuming you are using C++11 <code>&lt;regex&gt;</code>."}, {"owner": {"reputation": 4118, "user_id": 1944352, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5e03c03b2088e2a4a378c85fb7e04db4?s=128&d=identicon&r=PG", "display_name": "Georgi Angelov", "link": "https://stackoverflow.com/users/1944352/georgi-angelov"}, "reply_to_user": {"reputation": 52749, "user_id": 1400768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tM0N8.png?s=128&g=1", "display_name": "nhahtdh", "link": "https://stackoverflow.com/users/1400768/nhahtdh"}, "edited": false, "score": 0, "creation_date": 1426169572, "post_id": 28998914, "comment_id": 46269136, "body": "I see. Yeah I am indeed using C++11. Thanks for your input!"}], "answers": [{"comments": [{"owner": {"reputation": 1850, "user_id": 4490187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd7db68345be18ba3a94994b451217df?s=128&d=identicon&r=PG&f=1", "display_name": "DeDee", "link": "https://stackoverflow.com/users/4490187/dedee"}, "edited": false, "score": 1, "creation_date": 1426114749, "post_id": 28998957, "comment_id": 46245867, "body": "Indeed, I was just working on it as you posted it, <a href=\"http://puu.sh/gwqSu/2640c15506.png\" rel=\"nofollow noreferrer\">puu.sh/gwqSu/2640c15506.png</a>"}, {"owner": {"reputation": 4118, "user_id": 1944352, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5e03c03b2088e2a4a378c85fb7e04db4?s=128&d=identicon&r=PG", "display_name": "Georgi Angelov", "link": "https://stackoverflow.com/users/1944352/georgi-angelov"}, "edited": false, "score": 0, "creation_date": 1426114751, "post_id": 28998957, "comment_id": 46245869, "body": "Sorry I should have clarified it a bit more. I am dealing with a lot more strings that just hello so this will become just as long as separating the position matches into their own regex rules. My bad. I updated the question."}, {"owner": {"reputation": 4118, "user_id": 1944352, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5e03c03b2088e2a4a378c85fb7e04db4?s=128&d=identicon&r=PG", "display_name": "Georgi Angelov", "link": "https://stackoverflow.com/users/1944352/georgi-angelov"}, "reply_to_user": {"reputation": 1850, "user_id": 4490187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd7db68345be18ba3a94994b451217df?s=128&d=identicon&r=PG&f=1", "display_name": "DeDee", "link": "https://stackoverflow.com/users/4490187/dedee"}, "edited": false, "score": 0, "creation_date": 1426165238, "post_id": 28998957, "comment_id": 46265943, "body": "@DeDee I didn&#39;t clarify enough. Please take a look at the updated description."}, {"owner": {"reputation": 52749, "user_id": 1400768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tM0N8.png?s=128&g=1", "display_name": "nhahtdh", "link": "https://stackoverflow.com/users/1400768/nhahtdh"}, "reply_to_user": {"reputation": 4118, "user_id": 1944352, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5e03c03b2088e2a4a378c85fb7e04db4?s=128&d=identicon&r=PG", "display_name": "Georgi Angelov", "link": "https://stackoverflow.com/users/1944352/georgi-angelov"}, "edited": false, "score": 0, "creation_date": 1426167768, "post_id": 28998957, "comment_id": 46267760, "body": "@GeorgiAngelov: Please tag your question with the language. Different language has different level of support for regex."}, {"owner": {"reputation": 4118, "user_id": 1944352, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5e03c03b2088e2a4a378c85fb7e04db4?s=128&d=identicon&r=PG", "display_name": "Georgi Angelov", "link": "https://stackoverflow.com/users/1944352/georgi-angelov"}, "reply_to_user": {"reputation": 52749, "user_id": 1400768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tM0N8.png?s=128&g=1", "display_name": "nhahtdh", "link": "https://stackoverflow.com/users/1400768/nhahtdh"}, "edited": false, "score": 0, "creation_date": 1426169002, "post_id": 28998957, "comment_id": 46268707, "body": "@nhahtdh, good call. I updated the question with the language tag."}], "owner": {"reputation": 32215, "user_id": 3789550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8mGqv.gif?s=128&g=1", "display_name": "heemayl", "link": "https://stackoverflow.com/users/3789550/heemayl"}, "is_accepted": false, "score": 2, "last_activity_date": 1426166689, "last_edit_date": 1495542133, "creation_date": 1426114623, "answer_id": 28998957, "question_id": 28998914, "link": "https://stackoverflow.com/questions/28998914/regex-to-match-word-on-its-own-at-beginning-or-appended-to-something-but-at-the/28998957#28998957", "title": "Regex to match word on its own at beginning, or appended to something but at the end of input by not repeating the string", "body": "<p>Try this regex:</p>\n\n<pre><code>\"^hello|hello$\"\n</code></pre>\n\n<p><strong>EDIT:</strong> Answer to the edited question:</p>\n\n<p>If you are using Perl style regex (PCRE) then you can use the following (i have tested with <code>grep -P</code>):</p>\n\n<pre><code>$ grep -P \"^(hello)\\b|(?1)$\" file.txt\nhello world\nI am somehello\nhello\nsomehello\n</code></pre>\n\n<p>Here we have captured <code>hello</code> as a group and then used routine call to referred it later. (Thanks to <a href=\"https://stackoverflow.com/users/1400768/nhahtdh\">nhahtdh</a> for this)</p>\n"}], "owner": {"reputation": 4118, "user_id": 1944352, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5e03c03b2088e2a4a378c85fb7e04db4?s=128&d=identicon&r=PG", "display_name": "Georgi Angelov", "link": "https://stackoverflow.com/users/1944352/georgi-angelov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1426168980, "creation_date": 1426114340, "last_edit_date": 1426168980, "question_id": 28998914, "link": "https://stackoverflow.com/questions/28998914/regex-to-match-word-on-its-own-at-beginning-or-appended-to-something-but-at-the", "title": "Regex to match word on its own at beginning, or appended to something but at the end of input by not repeating the string", "body": "<p><strong>Background</strong></p>\n\n<p>So I am working on getting a regex that would match <strong>hello</strong> in the following \ncases:</p>\n\n<p><strong>To match</strong></p>\n\n<pre><code>hello world\nI am somehello\nhello\nsomehello\n</code></pre>\n\n<p><strong>to NOT match</strong></p>\n\n<pre><code>I am hello world\nI am somehello word\nsomehellow word\n</code></pre>\n\n<p><strong>Original regexs</strong></p>\n\n<p>Basically, I am trying to condense these two regex rules:</p>\n\n<pre><code>^hello\\b\nhello$\n</code></pre>\n\n<p><strong>What I tried</strong></p>\n\n<p>I was considering doing lookahead(positive or negative) or lookbehind(positive or negative) and match, for example, a ^ followed by \\b but that would also match \"helloworld something\" which I do not want to match.</p>\n\n<p><strong>Question:</strong></p>\n\n<p>What would be the best way to combine both regular expressions into one without having to write the word out twice like this <strong>^hello\\b|hello$</strong> ?</p>\n\n<p>I am dealing with a lot of strings, not just hello, that should be matched by the regular expression, so I am trying to consume space (if functionality permits it of course).</p>\n"}, {"tags": ["python", "c++", "c", "python-2.7", "python-3.x"], "answers": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": true, "score": 5, "last_activity_date": 1426116071, "creation_date": 1426116071, "answer_id": 28999245, "question_id": 28998817, "link": "https://stackoverflow.com/questions/28998817/calling-function-with-optional-arguments-with-pyobject-callmethod/28999245#28999245", "title": "Calling function with optional arguments with PyObject_CallMethod", "body": "<p>Calling with keyword arguments is not that straightforward from C, and you need to do <code>PyObject_Call</code>, which requires 3 arguments:</p>\n\n<ol>\n<li>The first argument of <code>PyObject_Call</code> is the method object</li>\n<li>The second argument of <code>PyObject_Call</code> is the empty tuple for *args</li>\n<li>The third argument is the keyword dictionary</li>\n</ol>\n\n<p>Thus we get</p>\n\n<pre><code>PyObject *function = PyObject_GetAttrString(add_module, \"add\");\nPyObject *args = PyTuple_New(0);\nPyObject *kwargs = Py_BuildValue(\"{s:i}\", \"b\", 5)\nresult = PyObject_Call(function, args, kwargs);\n\nPy_DECREF(kwargs);\nPy_DECREF(args);\nPy_DECREF(function);\n</code></pre>\n\n<p><strong>except</strong> you <strong>must</strong> NULL-check the return values from the 4 first functions (omitted for brevity).</p>\n"}], "owner": {"reputation": 2369, "user_id": 3155503, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/9aDKc.png?s=128&g=1", "display_name": "lwxted", "link": "https://stackoverflow.com/users/3155503/lwxted"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1619, "favorite_count": 3, "accepted_answer_id": 28999245, "answer_count": 1, "score": 3, "last_activity_date": 1426116071, "creation_date": 1426113908, "question_id": 28998817, "link": "https://stackoverflow.com/questions/28998817/calling-function-with-optional-arguments-with-pyobject-callmethod", "title": "Calling function with optional arguments with PyObject_CallMethod", "body": "<p>Using Python C API, how can I call a function with optional arguments?</p>\n\n<p>For example, assuming there is a Python module <code>add_module.py</code> with a function <code>add</code> that goes like:</p>\n\n<pre><code>def add(a=0, b=0):\n  return a + b\n</code></pre>\n\n<p><code>add(1, 2)</code> would correspond to </p>\n\n<pre><code>PyObject *add_module = PyImport_ImportModule(\"add_module\");\nPyObject *result = PyObject_CallMethod(add_module, \"add\", \"ii\", 1, 2);\n</code></pre>\n\n<p>How would I call something like <code>add(b=5)</code> using the Python API?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "xcode", "boost"], "comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1426114683, "post_id": 28998744, "comment_id": 46245828, "body": "I&#39;m sure you&#39;ve also spent a huge amount of time reposting the exact same question you posted <i><a href=\"http://stackoverflow.com/posts/28980359/revisions\">15 hours (or 10 hours with the screenshots) ago</a></i>. I&#39;m not sure what you&#39;re trying to do there, but it doesn&#39;t look good."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1426114723, "post_id": 28998744, "comment_id": 46245852, "body": "I voted to undelete that. Consider setting a bounty or getting someone to help you on-site."}, {"owner": {"reputation": 241, "user_id": 1828284, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/8e805d39d2e92d182cae65e97eac02fc?s=128&d=identicon&r=PG", "display_name": "jewfro", "link": "https://stackoverflow.com/users/1828284/jewfro"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1426115152, "post_id": 28998744, "comment_id": 46246019, "body": "But is anyone going to answer my question now that it has been voted down. Instead I took the advice and reformatted as it was not my intention to offend and upset people, I need some help. The constructive criticism to my question was helpful and I&#39;m grateful. But at the same time, if that prevents from getting an answer. Am i not allowed to write a well constructed new question. It doesn&#39;t seem very fair"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1426115369, "post_id": 28998744, "comment_id": 46246093, "body": "Huh. Why do you think voting exists? Surely it isn&#39;t so that people can just recreate the question. For the record, I didn&#39;t downvote the question. I just edited the useless ranty bits out, as you remember. It was a still a poor question (if you can&#39;t figure out your include paths, how can we?). I voted-to-close for that reason. This question is no better, and I <i>did</i> downvote this for the reason I mentioned: it looks pretty bad you try to artificially generate interest for your question. Again, <b><a href=\"http://stackoverflow.com/help/bounty\">bounties</a></b> are for that"}, {"owner": {"reputation": 241, "user_id": 1828284, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/8e805d39d2e92d182cae65e97eac02fc?s=128&d=identicon&r=PG", "display_name": "jewfro", "link": "https://stackoverflow.com/users/1828284/jewfro"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1426115418, "post_id": 28998744, "comment_id": 46246110, "body": "sorry I hadn&#39;t heard of bounties"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1426115495, "post_id": 28998744, "comment_id": 46246134, "body": "Now you do. Not that you needed more than common sense to tell that reposting is iffy practice. You may undelete the old one. Perhaps I can favour you with an upvote just for your learning efforts :) (regardless, there are already 2 community undelete votes by now)"}, {"owner": {"reputation": 241, "user_id": 1828284, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/8e805d39d2e92d182cae65e97eac02fc?s=128&d=identicon&r=PG", "display_name": "jewfro", "link": "https://stackoverflow.com/users/1828284/jewfro"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1426117871, "post_id": 28998744, "comment_id": 46247011, "body": "I will do. I have answered my own question above, as I seem to have solved it and there wasn&#39;t enough space in a comment to write, so hopefully that is not something else I&#39;m doing wrong! I will defo use bounties and be more careful about composing questions in the future. Thanks :)"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1426117903, "post_id": 28998744, "comment_id": 46247028, "body": "Answering your own question is ok. I had already upvoted it :)"}, {"owner": {"reputation": 241, "user_id": 1828284, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/8e805d39d2e92d182cae65e97eac02fc?s=128&d=identicon&r=PG", "display_name": "jewfro", "link": "https://stackoverflow.com/users/1828284/jewfro"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1426118090, "post_id": 28998744, "comment_id": 46247081, "body": "he he. I need one more vote to undelete. All good, it&#39;s just a couple of votes right. Don&#39;t worry"}], "answers": [{"owner": {"reputation": 241, "user_id": 1828284, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/8e805d39d2e92d182cae65e97eac02fc?s=128&d=identicon&r=PG", "display_name": "jewfro", "link": "https://stackoverflow.com/users/1828284/jewfro"}, "is_accepted": false, "score": 1, "last_activity_date": 1426117817, "creation_date": 1426117817, "answer_id": 28999563, "question_id": 28998744, "link": "https://stackoverflow.com/questions/28998744/issues-linking-boost-libraries-with-xcode-6-1-1-on-yosemite-mac/28999563#28999563", "title": "Issues linking boost libraries with Xcode 6.1.1 on Yosemite mac", "body": "<p>I seem to have fixed it. After trying installs with homebrew, macports and manually (and then deleted all the files everywhere in usr/local between these installs), but it was hard to find everything that needed changing in the backend of Xcode, which I admit to still finding a little confusing at times. </p>\n\n<p>So Header search paths still contained the homebrew cellar as part of the long pathname, so I changed this bit /usr/include User Header Path.\nUser Search Paths I had as /usr/local/lib according to some instructions I'd found searching for a solution. I've now changed it to /usr/local/lib</p>\n\n<p>After these changes, my errors have finally disappeared! Fingers crossed I've got it right now</p>\n"}], "owner": {"reputation": 241, "user_id": 1828284, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/8e805d39d2e92d182cae65e97eac02fc?s=128&d=identicon&r=PG", "display_name": "jewfro", "link": "https://stackoverflow.com/users/1828284/jewfro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 686, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1426117817, "creation_date": 1426113591, "question_id": 28998744, "link": "https://stackoverflow.com/questions/28998744/issues-linking-boost-libraries-with-xcode-6-1-1-on-yosemite-mac", "title": "Issues linking boost libraries with Xcode 6.1.1 on Yosemite mac", "body": "<p>I'm using Yosemite and latest version of Xcode.</p>\n\n<p>I've followed the instructions on the Boost website (for UNIX variants), I've tried brew install. I've tried a gist from github.</p>\n\n<p>I've spent a huge amount of time trying to find information about the installation and the XCode set up, yet have not been able to get the libraries to link. </p>\n\n<p>I've tried absolute paths, moving the boost folders around. &lt;> and \"\" around my include statements. I have made sure command line tools are installed.</p>\n\n<p>I ran the bootstrap.sh script, then invoked b2. Boost is saved in usr/local</p>\n\n<p>I want to use sockets to pass data between to programmes on the same system, implementing something along these line: <a href=\"http://www.boost.org/doc/libs/1_57_0/doc/html/boost_asio/example/cpp03/local/stream_server.cpp\" rel=\"nofollow noreferrer\">http://www.boost.org/doc/libs/1_57_0/doc/html/boost_asio/example/cpp03/local/stream_server.cpp</a></p>\n\n<p>Using the code as is, I'm getting errors that Xcode can't find the hpp files and I've tried replacing the &lt;> with \"\", as per one of the error messages, the other being that it can't locate the files.</p>\n\n<p>Below are screenshots showing what I have done to try and configure Xcode. Perhaps I have not linked in the correct places in Xcode, or perhaps I have linked to the wrong places?  </p>\n\n<p><img src=\"https://i.stack.imgur.com/MGZRR.png\" alt=\"link with libraries\"></p>\n\n<p><img src=\"https://i.stack.imgur.com/2psVx.png\" alt=\"library search paths\"></p>\n\n<p><img src=\"https://i.stack.imgur.com/R5CRH.png\" alt=\"location of boost\"></p>\n"}, {"tags": ["c++", "templates", "warnings"], "answers": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 6, "last_activity_date": 1426115162, "last_edit_date": 1426115162, "creation_date": 1426114747, "answer_id": 28998983, "question_id": 28998697, "link": "https://stackoverflow.com/questions/28998697/how-to-properly-declare-a-friend-of-a-nested-class-of-a-template-class/28998983#28998983", "title": "How to properly declare a friend of a nested class of a template class?", "body": "<p>It's warning about the fact that it is going to be virtually impossible to define that <code>operator==</code> out-of-class.</p>\n\n<p>That is to say, that <code>friend</code> declaration befriends a non-template <code>operator==</code> function - for example, <code>Container&lt;Int&gt;::Iterator</code> has as a friend the function</p>\n\n<pre><code>bool operator==(const Container&lt;Int&gt;::Iterator&amp;, const Container&lt;Int&gt;::Iterator&amp;);\n</code></pre>\n\n<p>This function is <em>not</em> a template, so there's pretty much no way to define <code>operator==</code> for all possible <code>Container</code>s outside the class template definition.</p>\n\n<p>If you try to do</p>\n\n<pre><code>template&lt;class T&gt;\nbool operator==(const Container&lt;T&gt;::Iterator&amp;, const Container&lt;T&gt;::Iterator&amp;);\n</code></pre>\n\n<p>That's a function template, and doesn't match the friend declaration. (In this case it's even worse, as you can't actually use this operator because <code>T</code> is in a non-deduced context.)</p>\n\n<p>The warning message suggests one possible fix - first declaring a function template and then befriending a specialization of it. (You'll need to pull <code>Iterator</code> out of the class into its own separate class template so that <code>T</code> can be deduced.) The other possible fix is to just define the function inside the class template definition.</p>\n"}, {"comments": [{"owner": {"reputation": 123, "user_id": 5617836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a2eede1dd9bbc0a087b14d807ba1421?s=128&d=identicon&r=PG", "display_name": "Mario", "link": "https://stackoverflow.com/users/5617836/mario"}, "edited": false, "score": 0, "creation_date": 1448833344, "post_id": 28999055, "comment_id": 55732599, "body": "I just asked the very similar question:  <a href=\"http://stackoverflow.com/questions/33986937/c-friends-in-template-classes-separation-of-interface-and-implementation?noredirect=1#comment55730416_33986937\" title=\"c friends in template classes separation of interface and implementation\">stackoverflow.com/questions/33986937/&hellip;</a>  so you might be able to help me as well. You say &quot;So the only way to define this operator== you have declared is to define it separately for each type for which Container is instantiated.&quot; which is exactly what I want to do. Do you know how this would work in my case?"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 123, "user_id": 5617836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a2eede1dd9bbc0a087b14d807ba1421?s=128&d=identicon&r=PG", "display_name": "Mario", "link": "https://stackoverflow.com/users/5617836/mario"}, "edited": false, "score": 0, "creation_date": 1448834795, "post_id": 28999055, "comment_id": 55733088, "body": "@Mario You just define a non-template function with the correct signature for the types you want. But as I say, you need to do this separately for every type. I really think you don&#39;t want to do this."}], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": false, "score": 4, "last_activity_date": 1426115088, "creation_date": 1426115088, "answer_id": 28999055, "question_id": 28998697, "link": "https://stackoverflow.com/questions/28998697/how-to-properly-declare-a-friend-of-a-nested-class-of-a-template-class/28999055#28999055", "title": "How to properly declare a friend of a nested class of a template class?", "body": "<p>The declaration</p>\n\n<pre><code>friend bool operator==(const Iterator&amp; x, const Iterator&amp; y);\n</code></pre>\n\n<p>declares a <em>non-template</em> function at the nearest enclosing namespace scope which takes two arguments of type <code>const typename Container&lt;T&gt;::Iterator&amp;</code>. Thus, every time the class <code>Container</code> is instantiated, with some template parameter <code>T</code>, a new <em>overload</em> of <code>operator==</code> is declared.</p>\n\n<p>Since this <code>operator==</code> is not instantiated from a template, you cannot define it out-of-line as a template. So the only way to define this <code>operator==</code> you have declared is to define it separately for each type for which <code>Container</code> is instantiated. This is almost certainly not desirable.</p>\n\n<p>The warning warns you that the friend you declared is not a template, which has the undesirable consequences I just explained.</p>\n\n<p>I believe the correct way to do what you are trying to do is the following:</p>\n\n<pre><code>template &lt;typename T&gt;\nclass Container_Iterator;\n\ntemplate &lt;typename T&gt; bool operator==(const Container_Iterator&lt;T&gt;&amp; x,\n                                      const Container_Iterator&lt;T&gt;&amp; y);\n\ntemplate &lt;typename T&gt;\nclass Container\n{\npublic:\n    typedef Container_Iterator&lt;T&gt; Iterator;\n};\n\ntemplate &lt;typename T&gt;\nclass Container_Iterator {\n  friend bool operator==&lt;T&gt;(const Container_Iterator&lt;T&gt;&amp; x,\n                            const Container_Iterator&lt;T&gt;&amp; y);\n};\n\n// btw, don't forget to define operator==\n</code></pre>\n\n<p>Now we explicitly declare <code>operator==</code> as a template, and each specialization of the iterator declares the corresponding specialization of <code>operator==</code> as its friend.</p>\n"}], "owner": {"reputation": 11622, "user_id": 1097451, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1516b785b675ba751aacdc05ae31764b?s=128&d=identicon&r=PG", "display_name": "Martin Drozdik", "link": "https://stackoverflow.com/users/1097451/martin-drozdik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 801, "favorite_count": 1, "accepted_answer_id": 28998983, "answer_count": 2, "score": 5, "last_activity_date": 1426115162, "creation_date": 1426113389, "question_id": 28998697, "link": "https://stackoverflow.com/questions/28998697/how-to-properly-declare-a-friend-of-a-nested-class-of-a-template-class", "title": "How to properly declare a friend of a nested class of a template class?", "body": "<p>When I do the following:</p>\n\n<pre><code>template &lt;typename T&gt;\nclass Container\n{\npublic:\n    class Iterator\n    {\n        friend bool operator==(const Iterator&amp; x, const Iterator&amp; y);\n    };\n};\n</code></pre>\n\n<p>gcc gives me the following warning and suggestion:</p>\n\n<pre><code>warning: friend declaration \n'bool operator==(const Container&lt;T&gt;::Iterator&amp;, \n                 const Container&lt;T&gt;::Iterator&amp;)' \ndeclares a non-template function [-Wnon-template-friend]\n\nfriend bool operator==(const Iterator&amp; x, const Iterator&amp; y);\n                                                           ^\n\n(if this is not what you intended, \n make sure the function template has already been declared \n and add &lt;&gt; after the function name here)\n</code></pre>\n\n<p>I am fairly sure that this is a new warning, since I have always done it like this and never had any problems.</p>\n\n<p>Can someone please explain why is this a warning, and what it warns about?</p>\n"}, {"tags": ["c++", "optimization"], "comments": [{"owner": {"reputation": 727, "user_id": 1111028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72653e810f819ceaa4692386415d77e7?s=128&d=identicon&r=PG", "display_name": "scaryrawr", "link": "https://stackoverflow.com/users/1111028/scaryrawr"}, "edited": false, "score": 0, "creation_date": 1426114072, "post_id": 28998690, "comment_id": 46245566, "body": "Some typical cases would be assignments that appear independent from each other, or most anything where it doesn&#39;t appear that the ordering matters. Ways to avoid this are to use memory barriers/fences, or atomics. Usually the reorder is ok, but at times you might be writing to a pointer to some hardware component (or something like that...), which is where reordering usually pops up as an issue."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1426115044, "post_id": 28998791, "comment_id": 46245980, "body": "I&#39;m guessing he means when things are reorded over sequence points (e.g. as raised by scaryrawr,  <code>a = b; printf(&quot;5&quot;);</code> could generate assembly which calls <code>printf</code> and then does the assignment)"}], "owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "is_accepted": false, "score": 2, "last_activity_date": 1426113780, "creation_date": 1426113780, "answer_id": 28998791, "question_id": 28998690, "link": "https://stackoverflow.com/questions/28998690/code-reordering-due-to-optimization/28998791#28998791", "title": "Code reordering due to optimization", "body": "<p>Most of the time, reordering is only allowed in situations where the observable effects of the program are the same - this means you shouldn't be able to tell.</p>\n\n<p>Counterexamples do exist, for example the order of operands is unspecified and an optimizer is free to rearrange things. You can't predict the order of these two function calls for example:</p>\n\n<pre><code>int a = foo() + bar();\n</code></pre>\n\n<p>Read up on <a href=\"http://en.wikipedia.org/wiki/Sequence_point\" rel=\"nofollow\">sequence points</a> to see what guarantees are made.</p>\n"}, {"comments": [{"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1426115402, "post_id": 28998849, "comment_id": 46246105, "body": "@MattMcNabb: True. I was thinking of something where, for example, it fills an array - but the values are the same each time."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1426119082, "post_id": 28998849, "comment_id": 46247369, "body": "How can it move the <code>do_stuff()</code> method?  Very irritating.  If I want to perform an action <i>N</i> times, you are saying the compiler will move the action out of the loop and do nothing for <i>N</i> times?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1426119190, "post_id": 28998849, "comment_id": 46247403, "body": "Another code <i>movement</i>:  multiple returns of same value.  For example, if a function has many &quot;return successful;&quot;, the compiler will pick one and the rest will cause a jump to the location of the return that the compiler picked."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1426119288, "post_id": 28998849, "comment_id": 46247436, "body": "Also, code duplication within a function.  The compiler may create a subroutine for duplicate code and replace duplications with a call to the subroutine."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1426119669, "post_id": 28998849, "comment_id": 46247551, "body": "I&#39;ve never seen the compiler (any compiler) create subroutines out of a larger function - it may well happen, but I&#39;ve not seen it. And yes, if performing <code>do_stuff</code> N times has the same effect as performing it once (aside from the time it takes), then it is allowed to do that. If it has an externally observable effect (such as printing something to the console), then it obviously can&#39;t do that."}], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": true, "score": 5, "last_activity_date": 1426115572, "last_edit_date": 1426115572, "creation_date": 1426114044, "answer_id": 28998849, "question_id": 28998690, "link": "https://stackoverflow.com/questions/28998690/code-reordering-due-to-optimization/28998849#28998849", "title": "Code reordering due to optimization", "body": "<p>There are LOTS of different kinds of \"code-motion\" (moving code around), and it's caused by lots of different parts of the optimisation process:</p>\n\n<ul>\n<li>move these instructions around, because it's a waste of time to wait for the memory read to complete without putting at least one or two instructions between the memory read and the operation using the content we got from memory</li>\n<li>Move things out of loops, because it only needs to happen once (if you call <code>x = sin(y)</code> once or 1000 times without changing y, <code>x</code> will have the same value, so no point in doing that inside a loop. So compiler moves it out. </li>\n<li>Move code around based on \"compiler expects this code to hit more often than the other bit, so better cache-hit ratio if we do it this way\" - for example error handling being moved away from the source of the error, because it's unlikely that you get an error [compilers often understand commonly used functions and that they typically result in success]. </li>\n<li>Inlining - code is moved from the actual function into the calling function. This often leads to OTHER effects such as reduction in pushing/poping registers from the stack and arguments can be kept where they are, rather than having to move them to the \"right place for arguments\".</li>\n</ul>\n\n<p>I'm sure I've missed some cases in the above list, but this is certainly some of the most common.</p>\n\n<p>The compiler is perfectly within its rights to do this, as long as it doesn't have any \"observable difference\" (other than the time it takes to run and the number of instructions used - those \"don't count\" in observable differences when it comes to compilers)</p>\n\n<p>There is very little you can do to avoid compiler from reordering your code - you can write code that ensures the order to some degree. So for example, we can have code like this:</p>\n\n<pre><code>{\nint sum = 0;\nfor(i = 0; i &lt; large_number; i++)\n  sum += i;\n}\n</code></pre>\n\n<p>Now, since <code>sum</code> isn't being used, the compiler can remove it. Adding some code that checks prints the sum would ensure that it's \"used\" according to the compiler. </p>\n\n<p>Likewise:</p>\n\n<pre><code> for(i = 0; i &lt; large_number; i++)\n {\n     do_stuff();\n }\n</code></pre>\n\n<p>if the compiler can figure out that <code>do_stuff</code> doesn't actually change any global value, or similar, it will move code around to form this:</p>\n\n<pre><code> do_stuff();\n for(i = 0; i &lt; large_number; i++)\n {\n }\n</code></pre>\n\n<p>The compiler may also remove - in fact almost certainly will - the, now, empty loop so that it doesn't exist at all. [As mentioned in the comments: If <code>do_stuff</code> doesn't actually change anything outside itself, it may also be removed, but the example I had in mind is where <code>do_stuff</code> produces a result, but the result is the same each time]</p>\n\n<p>(The above happens if you remove the printout of results in the Dhrystone benchmark for example, since some of the loops calculate values that are never used other than in the printout - this can lead to benchmark results that exceed the highest theoretical throughput of the processor by a factor of 10 or so - because the benchmark assumes the instructions necessary for the loop were actually there, and says it took X nominal operations to execute each iteration)</p>\n\n<p>There is no easy way to ensure this doesn't happen, aside from ensuring that <code>do_stuff</code> either updates some variable outside the function, or returns a value that is \"used\" (e.g. summing up, or something). </p>\n\n<p>Another example of removing/omitting code is where you store values repeatedly to the same variable multiple times:</p>\n\n<pre><code>int x;\n\nfor(i = 0; i &lt; large_number; i++)\n    x = i * i;\n</code></pre>\n\n<p>can be replaced with:</p>\n\n<pre><code>x = (large_number-1) * (large_number-1);\n</code></pre>\n\n<p>Sometimes, you can use <code>volatile</code> to ensure that something REALLY happens, but in a benchmark, that CAN be detrimental, since the compiler also can't optimise code that it SHOULD optimise (if you are not careful with the how you use <code>volatile</code>). </p>\n\n<p>If you have some SPECIFIC code that you care particularly about, it would be best to post it (and compile it with several state of the art compilers, and see what they actually do with it). </p>\n\n<p>[Note that moving code around is definitely not a BAD thing in general - I do want my compiler (whether it is the one I'm writing myself, or one that I'm using that was written by someone else) to make optimisation by moving code, because, as long as it does so correctly, it will produce faster/better code by doing so!]</p>\n"}], "owner": {"reputation": 3684, "user_id": 4224575, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Nvq43.gif?s=128&g=1", "display_name": "Lorah Attkins", "link": "https://stackoverflow.com/users/4224575/lorah-attkins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 845, "favorite_count": 1, "accepted_answer_id": 28998849, "answer_count": 2, "score": 1, "last_activity_date": 1426115572, "creation_date": 1426113358, "question_id": 28998690, "link": "https://stackoverflow.com/questions/28998690/code-reordering-due-to-optimization", "title": "Code reordering due to optimization", "body": "<p>I've heard so many times that an optimizer may reorder your code that I'm starting to believe it.\nAre there any examples or typical cases where this might happen and how can I Avoid such a thing (eg I want a benchmark to be impervious to this)? </p>\n"}, {"tags": ["c++", "winapi", "usb"], "comments": [{"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1426113466, "post_id": 28998625, "comment_id": 46245330, "body": "Did you see <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa363215(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a> ? It says you don&#39;t actually need to register to get media arrival notifications. I wonder if the fact that you <b>are</b> registering might be interfering in some way."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1426113854, "post_id": 28998625, "comment_id": 46245472, "body": "Hmm, my crystal ball says that you are doing this the programmer&#39;s way, just jerking out the device without going through the &quot;Safely Remove Hardware&quot; spiel.  And then hope that Windows can second-guess what might have happened.  Well, it did, it told you about it."}, {"owner": {"reputation": 955, "user_id": 869705, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/31151b228161022ba5b3a2531edbdd1a?s=128&d=identicon&r=PG", "display_name": "bmahf", "link": "https://stackoverflow.com/users/869705/bmahf"}, "edited": false, "score": 0, "creation_date": 1426164849, "post_id": 28998625, "comment_id": 46265679, "body": "Actually, I definitely did the &quot;Safely Remove Hardware&quot; process.  The notification that I do get there has a value of 7, which is DBT_DEVNODES_CHANGED.  I get a number of messages coming from that one action (not yet having pulled the device from its slot), all of which have a value of 7.  Of course, when I pull the device, I get the same value.  Inserting the device has the same exact results.  I get a number of messages, and all of them have the value 7 for DBT_DEVNODES_CHANGED."}], "answers": [{"comments": [{"owner": {"reputation": 955, "user_id": 869705, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/31151b228161022ba5b3a2531edbdd1a?s=128&d=identicon&r=PG", "display_name": "bmahf", "link": "https://stackoverflow.com/users/869705/bmahf"}, "edited": false, "score": 0, "creation_date": 1426178869, "post_id": 29000823, "comment_id": 46275881, "body": "Yes I&#39;m sorry, I seem to have left out the definitions for the GUID I used, and for the call to DoRegisterDeviceInterfaceToHwnd().  I just added them back in there."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 955, "user_id": 869705, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/31151b228161022ba5b3a2531edbdd1a?s=128&d=identicon&r=PG", "display_name": "bmahf", "link": "https://stackoverflow.com/users/869705/bmahf"}, "edited": false, "score": 0, "creation_date": 1426181267, "post_id": 29000823, "comment_id": 46277251, "body": "Did you try the other class guids I gave you?"}, {"owner": {"reputation": 955, "user_id": 869705, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/31151b228161022ba5b3a2531edbdd1a?s=128&d=identicon&r=PG", "display_name": "bmahf", "link": "https://stackoverflow.com/users/869705/bmahf"}, "edited": false, "score": 1, "creation_date": 1426254976, "post_id": 29000823, "comment_id": 46309008, "body": "Done and tested. By your suggestions, I ended up changing the call to RegisterDeviceNotification() so that I pass DEVICE_NOTIFY_ALL_INTERFACE_CLASSES as the flag, instead of DEVICE_NOTIFY_WINDOW_HANDLE. After that, I was able to get a non-NULL value for lParam.  That gave me paramGuid and paramName, both of which were very useful in telling me what I am actually looking at, so I can make sure this is a USB drive, rather than some other pluggable device such as a security dongle.  Thanks for the pointers."}, {"owner": {"reputation": 955, "user_id": 869705, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/31151b228161022ba5b3a2531edbdd1a?s=128&d=identicon&r=PG", "display_name": "bmahf", "link": "https://stackoverflow.com/users/869705/bmahf"}, "edited": false, "score": 0, "creation_date": 1426255041, "post_id": 29000823, "comment_id": 46309048, "body": "Sorry I didn&#39;t respond earlier, but I spent the morning yesterday working on your suggestions until I tried this one, and then I spent the rest of the day getting this working for my needs.  Thanks again."}, {"owner": {"reputation": 955, "user_id": 869705, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/31151b228161022ba5b3a2531edbdd1a?s=128&d=identicon&r=PG", "display_name": "bmahf", "link": "https://stackoverflow.com/users/869705/bmahf"}, "edited": false, "score": 0, "creation_date": 1426255797, "post_id": 29000823, "comment_id": 46309589, "body": "Oh, and, per the reason I asked this question, I am getting DBT_DEVICEARRIVAL and DBT_DEVICEREMOVECOMPLETE messages now, so now I can tell when a USB was added/removed, and I can tell whether it&#39;s a drive or some other device."}], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 12, "last_activity_date": 1426127075, "last_edit_date": 1426127075, "creation_date": 1426126704, "answer_id": 29000823, "question_id": 28998625, "link": "https://stackoverflow.com/questions/28998625/c-win32-not-receiving-dbt-devicearrival-or-dbt-deviceremovecomplete-on-wm-devi/29000823#29000823", "title": "C++ Win32 Not receiving DBT_DEVICEARRIVAL or DBT_DEVICEREMOVECOMPLETE on WM_DEVICECHANGE", "body": "<p>If you read MSDN's documentation, it says:</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/aa363215.aspx\" rel=\"noreferrer\">Detecting Media Insertion or Removal</a></p>\n\n<blockquote>\n  <p>Windows sends all top-level windows a set of <strong>default</strong> WM_DEVICECHANGE messages when new devices or media (such as a CD or DVD) are added and become available, and when existing devices or media are removed. You do not need to register to receive these <strong>default</strong> messages. <strong>See the Remarks section in RegisterDeviceNotification for details on which messages are sent by default</strong>.</p>\n</blockquote>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/aa363431.aspx\" rel=\"noreferrer\">RegisterDeviceNotification function</a></p>\n\n<blockquote>\n  <p>Any application with a top-level window can receive <strong>basic notifications</strong> by processing the WM_DEVICECHANGE message. Applications can use the RegisterDeviceNotification function to register to receive <strong>device notifications</strong>.<br>\n  ...<br>\n  The DBT_DEVICEARRIVAL and DBT_DEVICEREMOVECOMPLETE events are <strong>automatically broadcast to all top-level windows for port devices</strong>. Therefore, it is not necessary to call RegisterDeviceNotification for <strong>ports</strong>, and the function fails if the dbch_devicetype member is <strong>DBT_DEVTYP_PORT</strong>. </p>\n</blockquote>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/aa363246.aspx\" rel=\"noreferrer\">DEV_BROADCAST_HDR structure</a></p>\n\n<blockquote>\n  <p>DBT_DEVTYP_PORT<br>\n  0x00000003 </p>\n  \n  <p><strong>Port device (serial or parallel)</strong>. This structure is a DEV_BROADCAST_PORT structure.</p>\n</blockquote>\n\n<p>A USB device is not a serial/parallel port.  It is a Device Interface (<code>DBT_DEVTYP_DEVICEINTERFACE</code>) instead.  And <code>DBT_DEVICEARRIVAL</code>/<code>DBT_DEVICEREMOVECOMPLETE</code> are not sent for <code>DBT_DEVTYP_DEVICEINTERFACE</code> devices <strong>by default</strong>.  If you want them, you have to use <code>RegisterDeviceNotification()</code> to request them.</p>\n\n<p>It looks like your code is based on this MSDN example:</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/aa363432.aspx\" rel=\"noreferrer\">Registering for Device Notification</a></p>\n\n<p>In that code, <code>WceusbshGUID</code> is defined as <code>{25dbce51-6c8f-4a72-8a6d-b54c2b4fc835}</code>, which is commented as being the class guid for <strong>USB serial host PnP drivers</strong>.  According to this MSDN page:</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/hardware/ff553426.aspx\" rel=\"noreferrer\">System-Defined Device Setup Classes Available to Vendors</a></p>\n\n<p>That guid is the class guid for <strong>Windows CE USB ActiveSync Devices</strong> (which is more consistent with the <code>Wceusb...</code> prefix used in the code).  Also on that same page is <code>{88BAE032-5A81-49f0-BC3D-A4FF138216D6}</code> for <strong>USB Device</strong> (<em>all USB devices that <strong>do not belong to another class</em></strong>).</p>\n\n<p>The following CodeProject article:</p>\n\n<p><a href=\"http://www.codeproject.com/Articles/14500/Detecting-Hardware-Insertion-and-or-Removal\" rel=\"noreferrer\">Detecting Hardware Insertion and/or Removal</a></p>\n\n<p>Mentions <code>{a5dcbf10-6530-11d2-901f-00c04fb951ed}</code> for <strong>USB Raw Device</strong>.  That same guid is documented on MSDN as <a href=\"https://msdn.microsoft.com/en-us/library/windows/hardware/ff545972.aspx\" rel=\"noreferrer\"><code>GUID_DEVINTERFACE_USB_DEVICE</code></a> (the naming of which probably stems back to pre-XP days when the naming of class guids and interface guids <a href=\"http://blogs.msdn.com/b/doronh/archive/2006/02/15/532679.aspx\" rel=\"noreferrer\">was not well separated</a>).</p>\n\n<p>So when you call <code>RegisterDeviceNotification()</code> with a <em>specific</em> class guid, make sure it is the <em>correct</em> class guid, as you are going to get device events for only that <em>specific</em> type of device.  It is likely that your USB device is using a different class guid than the one you are registering, and that is why you are not getting the device events you are expecting.</p>\n\n<p>If you want to detect <strong>any</strong> USB device regardless of its class guid (and there are several USB class guids defined), you can use the <code>DEVICE_NOTIFY_ALL_INTERFACE_CLASSES</code> flag when calling <code>RegisterDeviceNotification()</code>, then the class guid will be ignored. In the <code>DBT_DEVICEARRIVAL</code> and <code>DBT_DEVICEREMOVECOMPLETE</code> messages (assuming you are able to get them now), the reported <code>dbcc_classguid</code> will tell you the actual class guid, and the reported <code>dbcc_name</code> will begin with the <code>\\\\?\\USB:</code> prefix.</p>\n\n<p>One last thing - you are only going to get <code>DBT_DEVICE...</code> messages if a USB device is inserted/removed while your app is already running.  To detect if a USB device is already plugged in when your app starts, you have to use <a href=\"https://msdn.microsoft.com/en-us/library/windows/hardware/ff550897(v=vs.85).aspx\" rel=\"noreferrer\">SetupAPI</a> functions (<code>SetupDiGetClassDevs()</code>, <code>SetupDiEnumDeviceInterfaces()</code>, <code>SetupDiGetDeviceInterfaceDetail()</code>, etc) to enumerate the available devices.</p>\n"}], "owner": {"reputation": 955, "user_id": 869705, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/31151b228161022ba5b3a2531edbdd1a?s=128&d=identicon&r=PG", "display_name": "bmahf", "link": "https://stackoverflow.com/users/869705/bmahf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9242, "favorite_count": 5, "accepted_answer_id": 29000823, "answer_count": 1, "score": 10, "last_activity_date": 1426178813, "creation_date": 1426113044, "last_edit_date": 1426178813, "question_id": 28998625, "link": "https://stackoverflow.com/questions/28998625/c-win32-not-receiving-dbt-devicearrival-or-dbt-deviceremovecomplete-on-wm-devi", "title": "C++ Win32 Not receiving DBT_DEVICEARRIVAL or DBT_DEVICEREMOVECOMPLETE on WM_DEVICECHANGE", "body": "<p>I have been working on detecting USB insertion/removal.  I have implemented code using CreateWindowEx(), passing a WNCLASSEX that with my window process callback.  On inserting and removing my usb, I successfully receive the WM_DEVICECHANGE message, but the wParam is always set to DBT_DEVNODES_CHANGED.  </p>\n\n<p>I never get either DBT_DEVICEARRIVAL or DBT_DEVICEREMOVECOMPLETE.  I have been using what I am getting, but I really need to be able to tell the difference between device arrival and removal, so that I can take different actions depending on which I receive.</p>\n\n<p>Right now, I'm having to put a timer after receiving DBT_DEVNODES_CHANGED, and then test to see if there are any new removables on the system, or if any in my list are no longer there.  I'm sure this isn't right, so I thought I'd ask.  I would much rather to get rid of the timer and just receive these two messages.  That would help a lot in what I have to do.  Any suggestions?</p>\n\n<p>Here is the code that I have for registering the callback, as well as the callback itself:</p>\n\n<p>NOTE: 3/12/2015:  Code updated to show actual GUID and the definition of the DoRegisterDeviceInterfaceToHwnd() function.):</p>\n\n<pre><code>GUID WceusbshGUID = { 0x25dbce51, 0x6c8f, 0x4a72, 0x8a,0x6d,0xb5,0x4c,0x2b,0x4f,0xc8,0x35 };\n//GUID WusbrawGUID = {0xa5dcbf10, 0x6530, 0x11d2, 0x90, 0x1f, 0x00, 0xc0, 0x4f, 0xb9, 0x51, 0xed };\n//GUID WusbGUID = {0x88BAE032, 0x5A81, 0x49f0, 0xBC, 0x3D, 0xA4, 0xFF, 0x13, 0x82, 0x16, 0xD6 };\n\nINT_PTR WINAPI WinProcCallback(HWND __hWnd, UINT message, WPARAM wParam, LPARAM lParam);\nBOOL DoRegisterDeviceInterfaceToHwnd(GUID InterfaceClassGuid, HWND __hWnd, HDEVNOTIFY *hDeviceNotify);\n\nbool UsbController::startNotifyUsbAddedRemoved(QString &amp;errmsg)\n{\n    WNDCLASSEX wndClass;\n\n    wndClass.cbSize = sizeof(wndClass);\n    wndClass.style = 0;\n    wndClass.hInstance = reinterpret_cast&lt;HINSTANCE&gt;(GetModuleHandle(0));\n    wndClass.lpfnWndProc = reinterpret_cast&lt;WNDPROC&gt;(WinProcCallback);\n    wndClass.cbClsExtra = 0;\n    wndClass.cbWndExtra = 0;\n    wndClass.hIcon = LoadIcon(0, IDI_APPLICATION);\n    wndClass.hbrBackground = (HBRUSH)(COLOR_WINDOW+1);\n    wndClass.hCursor = LoadCursor(0, IDC_ARROW);\n    wndClass.lpszClassName = WND_CLASS_NAME;\n    wndClass.lpszMenuName = NULL;\n    wndClass.hIconSm = LoadIcon(0, IDI_APPLICATION);\n\n    if (!RegisterClassEx(&amp;wndClass))\n    {\n        FormatErrorMsg(\"RegisterClassEx: \", errmsg);\n        return false;\n    }\n\n    HINSTANCE hInstance = (HINSTANCE)::GetModuleHandle(NULL);\n    __hWnd = CreateWindowEx(\n                    WS_EX_CLIENTEDGE | WS_EX_APPWINDOW,\n                    WND_CLASS_NAME,\n                    WND_APP_NAME,\n                    WS_OVERLAPPEDWINDOW, // style\n                    CW_USEDEFAULT, 0,\n                    0, 0,\n                    NULL, NULL,\n                    hInstance,\n                    NULL);\n\n    if ( __hWnd == NULL )\n    {\n        FormatErrorMsg(\"CreateWindowEx: \", errmsg);\n        return false;\n    }\n\n    return true;\n}\n\nINT_PTR WINAPI WinProcCallback(HWND __hWnd, UINT message, WPARAM wParam, LPARAM lParam)\n{\n    LRESULT lRet = 1;\n    static HDEVNOTIFY hDeviceNotify;\n    static HWND hEditWnd;\n    static ULONGLONG msgCount = 0;\n\n    switch (message)\n    {\n    case WM_CREATE:\n        //\n        // This is the actual registration., In this example, registration\n        // should happen only once, at application startup when the window\n        // is created.\n        //\n        // If you were using a service, you would put this in your main code\n        // path as part of your service initialization.\n        //\n        if ( ! DoRegisterDeviceInterfaceToHwnd( WceusbshGUID, __hWnd, &amp;hDeviceNotify) )\n        {\n            // Terminate on failure.\n            //ErrorHandler(TEXT(\"DoRegisterDeviceInterfaceToHwnd\"));\n            ExitProcess(1);\n        }\n\n        //\n        // Make the child window for output.\n        //\n        hEditWnd = CreateWindow(TEXT(\"EDIT\"),// predefined class\n                                NULL,        // no window title\n                                WS_CHILD | WS_VISIBLE | WS_VSCROLL |\n                                ES_LEFT | ES_MULTILINE | ES_AUTOVSCROLL,\n                                0, 0, 0, 0,  // set size in WM_SIZE message\n                                __hWnd,        // parent window\n                                (HMENU)1,    // edit control ID\n                                (HINSTANCE) GetWindowLong(__hWnd, GWL_HINSTANCE),\n                                NULL);       // pointer not needed\n\n        if ( hEditWnd == NULL )\n        {\n            // Terminate on failure.\n            ExitProcess(1);\n        }\n        // Add text to the window.\n        SendMessage(hEditWnd, WM_SETTEXT, 0,\n            (LPARAM)TEXT(\"Registered for USB device notification...\\n\"));\n\n        break;\n\n    case WM_SETFOCUS:\n        SetFocus(hEditWnd);\n\n        break;\n\n    case WM_SIZE:\n        // Make the edit control the size of the window's client area.\n        MoveWindow(hEditWnd,\n                   0, 0,                  // starting x- and y-coordinates\n                   LOWORD(lParam),        // width of client area\n                   HIWORD(lParam),        // height of client area\n                   TRUE);                 // repaint window\n\n        break;\n\n    case WM_DEVICECHANGE:\n        {\n            //\n            // This is the actual message from the interface via Windows messaging.\n            // This code includes some additional decoding for this particular device type\n            // and some common validation checks.\n            //\n            // Note that not all devices utilize these optional parameters in the same\n            // way. Refer to the extended information for your particular device type\n            // specified by your GUID.\n            //\n\n            // Output some messages to the window.\n            UsbController *pusbctl;\n            switch (wParam)\n            {\n            case DBT_DEVICEARRIVAL:\n                msgCount++;\n                pusbctl = UsbController::instance();\n                pusbctl-&gt;signalDeviceArrival();\n                break;\n            case DBT_DEVICEREMOVECOMPLETE:\n                msgCount++;\n                pusbctl = UsbController::instance();\n                pusbctl-&gt;signalDeviceRemoval();\n                break;\n            case DBT_DEVNODES_CHANGED:\n                msgCount++;\n                pusbctl = UsbController::instance();\n                pusbctl-&gt;signalDeviceAddedRemoved();\n                break;\n            default:\n                msgCount++;\n                break;\n            }\n        }\n        break;\n\n    default:\n        // Send all other messages on to the default windows handler.\n        lRet = DefWindowProc(__hWnd, message, wParam, lParam);\n        break;\n    }\n\n    return lRet;\n}\n\nBOOL DoRegisterDeviceInterfaceToHwnd(GUID InterfaceClassGuid, HWND __hWnd, HDEVNOTIFY *hDeviceNotify)\n{\n    DEV_BROADCAST_DEVICEINTERFACE NotificationFilter;\n\n    ZeroMemory( &amp;NotificationFilter, sizeof(NotificationFilter) );\n    NotificationFilter.dbcc_size = sizeof(DEV_BROADCAST_DEVICEINTERFACE);\n    NotificationFilter.dbcc_devicetype = DBT_DEVTYP_DEVICEINTERFACE;\n    //NotificationFilter.dbcc_devicetype = DEVICE_NOTIFY_ALL_INTERFACE_CLASSES;\n    NotificationFilter.dbcc_classguid = InterfaceClassGuid;\n\n    *hDeviceNotify = RegisterDeviceNotification(\n        __hWnd,                       // events recipient\n        &amp;NotificationFilter,        // type of device\n        DEVICE_NOTIFY_WINDOW_HANDLE // type of recipient handle\n        );\n\n    if ( NULL == *hDeviceNotify )\n    {\n        return FALSE;\n    }\n\n    return TRUE;\n}\n</code></pre>\n"}, {"tags": ["c++", "type-conversion"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1426113294, "post_id": 28998613, "comment_id": 46245272, "body": "Any value other than zero is assumed to be <code>true</code>. <i>&quot; can this behavior be compiler dependent?&quot;</i> Not really."}], "answers": [{"comments": [{"owner": {"reputation": 603, "user_id": 512838, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ac3229d6106c440bb3d527af6967dc20?s=128&d=identicon&r=PG", "display_name": "Solti", "link": "https://stackoverflow.com/users/512838/solti"}, "edited": false, "score": 0, "creation_date": 1426202882, "post_id": 28998685, "comment_id": 46287506, "body": "so (mySwitchVariable == 3) is true, no matter what numeric data was assigned? would (mySwitchVariable == 2) also be true? wondering if the &quot;2&quot; be converted to &quot;true&quot; before doing &quot;==&quot;"}, {"owner": {"reputation": 2277, "user_id": 3037915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4957d2ff2e049c7163f2aa0e97c3a434?s=128&d=identicon&r=PG&f=1", "display_name": "Tasos Vogiatzoglou", "link": "https://stackoverflow.com/users/3037915/tasos-vogiatzoglou"}, "reply_to_user": {"reputation": 603, "user_id": 512838, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ac3229d6106c440bb3d527af6967dc20?s=128&d=identicon&r=PG", "display_name": "Solti", "link": "https://stackoverflow.com/users/512838/solti"}, "edited": false, "score": 0, "creation_date": 1426234682, "post_id": 28998685, "comment_id": 46296839, "body": "@Solti (mySwitchVariable = 3)... The (mySwitchVariable == 3) will be false (equality). Any non zero value will be converted to true when assigned to a bool variable. Regarding the equality, in general both operands have to have the same type, so the mySwitchVariable == &lt;numeric&gt; will always be false. There are some conversions when dealing with pointers, but this is not the case."}], "owner": {"reputation": 2277, "user_id": 3037915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4957d2ff2e049c7163f2aa0e97c3a434?s=128&d=identicon&r=PG&f=1", "display_name": "Tasos Vogiatzoglou", "link": "https://stackoverflow.com/users/3037915/tasos-vogiatzoglou"}, "is_accepted": true, "score": 4, "last_activity_date": 1426113330, "creation_date": 1426113330, "answer_id": 28998685, "question_id": 28998613, "link": "https://stackoverflow.com/questions/28998613/actual-value-stored-in-a-bool-variable-if-a-large-value-is-assigned/28998685#28998685", "title": "actual value stored in a bool variable if a large value is assigned", "body": "<p>Bool is a standard defined build-in type. It supports assignment from numeric types for C compatibility.</p>\n\n<p>When assigning a numeric value different than zero the bool variable becomes true. When assigning zero, it becomes false.</p>\n\n<blockquote>\n  <p>4.12 Boolean conversions [conv.bool] 1 A prvalue of arithmetic, unscoped enumeration, pointer, or pointer to member type can be\n  converted to a prvalue of type bool. A zero value, null pointer value,\n  or null member pointer value is converted to false; any other value is\n  converted to true. For direct-initialization (8.5), a prvalue of type\n  std::nullptr_t can be converted to a prvalue of type bool; the\n  resulting value is false.</p>\n</blockquote>\n"}], "owner": {"reputation": 603, "user_id": 512838, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ac3229d6106c440bb3d527af6967dc20?s=128&d=identicon&r=PG", "display_name": "Solti", "link": "https://stackoverflow.com/users/512838/solti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 28998685, "answer_count": 1, "score": 0, "last_activity_date": 1426113330, "creation_date": 1426112991, "question_id": 28998613, "link": "https://stackoverflow.com/questions/28998613/actual-value-stored-in-a-bool-variable-if-a-large-value-is-assigned", "title": "actual value stored in a bool variable if a large value is assigned", "body": "<p>what would be the value stored in a bool variable if I assign a value greater than 1 to it?</p>\n\n<pre><code>bool mySwitchVariable = false;\nmySwitchVariable = 3;\nif(mySwitchVariable == 3){\n    cout &lt;&lt; \"3 is stored in the bool\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>is this defined in spec?\ncan this behavior be compiler dependent?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "c", "format", "scanf"], "answers": [{"comments": [{"owner": {"reputation": 170, "user_id": 3485748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dadb80eb423b77e44114470a6163baf7?s=128&d=identicon&r=PG&f=1", "display_name": "Nibikibaba", "link": "https://stackoverflow.com/users/3485748/nibikibaba"}, "edited": false, "score": 0, "creation_date": 1426119103, "post_id": 28998621, "comment_id": 46247377, "body": "But this is not a general answer -- it might work in this particular case but in the non-negated case how do you specify that character in the scan set?"}, {"owner": {"reputation": 170, "user_id": 3485748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dadb80eb423b77e44114470a6163baf7?s=128&d=identicon&r=PG&f=1", "display_name": "Nibikibaba", "link": "https://stackoverflow.com/users/3485748/nibikibaba"}, "edited": false, "score": 0, "creation_date": 1426120886, "post_id": 28998621, "comment_id": 46247832, "body": "Oh I just found the spec for that and you are right that the first character in the scan-set is handled specially and it will accept the ] character even in a non-negated set. It certainly feels a bit &#39;hacky&#39; to define a feature like that!!"}], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 4, "last_activity_date": 1426113030, "creation_date": 1426113030, "answer_id": 28998621, "question_id": 28998595, "link": "https://stackoverflow.com/questions/28998595/specifying-the-character-in-a-c-c-scanf-scanset/28998621#28998621", "title": "Specifying the &#39;]&#39; character in a C/C++ scanf() scanset", "body": "<p>The trick is to put ']' as the first character in the pattern:</p>\n\n<pre><code>scanf(\" %80[^]]\", &amp;buf);\n</code></pre>\n"}], "owner": {"reputation": 170, "user_id": 3485748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dadb80eb423b77e44114470a6163baf7?s=128&d=identicon&r=PG&f=1", "display_name": "Nibikibaba", "link": "https://stackoverflow.com/users/3485748/nibikibaba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 0, "accepted_answer_id": 28998621, "answer_count": 1, "score": 0, "last_activity_date": 1426119635, "creation_date": 1426112941, "last_edit_date": 1426119635, "question_id": 28998595, "link": "https://stackoverflow.com/questions/28998595/specifying-the-character-in-a-c-c-scanf-scanset", "title": "Specifying the &#39;]&#39; character in a C/C++ scanf() scanset", "body": "<p>I would like to use a scanf family function to extract a string delimited by ']'. \nFor a delimiter of ')' one can do this:  </p>\n\n<pre><code>scanf(\" %80[^)]\", &amp;buf); \n</code></pre>\n\n<p>But how do you include the ']' in the scanset in general (not just the negated set case example above)? Is there some kind of escape seq for that? </p>\n\n<pre><code>\"[^\\\\]]\"\n</code></pre>\n\n<p>?</p>\n"}, {"tags": ["c++", "c++11", "visual-c++", "enums"], "comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1426113365, "post_id": 28998530, "comment_id": 46245293, "body": "Confirmed: <a href=\"http://rextester.com/live/GWMY82375\" rel=\"nofollow noreferrer\">rextester.com/live/GWMY82375</a>"}, {"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 0, "creation_date": 1426113983, "post_id": 28998530, "comment_id": 46245527, "body": "Well, GCC thinks code is buggy because in binary search there is no match for op&lt; (const e, const int)"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1426114002, "post_id": 28998530, "comment_id": 46245534, "body": "This code is broken anyway because<code>binary_search</code> requires either a custom comparator or something that supports <code>&lt;</code>, and scoped enums can&#39;t be compared with <code>int</code>s. (The <code>find</code> call has similar issues, this time for <code>==</code>.)"}], "owner": {"reputation": 1274, "user_id": 3742925, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d85fd96f8f44758ba76f7a793c8e70c7?s=128&d=identicon&r=PG&f=1", "display_name": "Aurora", "link": "https://stackoverflow.com/users/3742925/aurora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 200, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1426113679, "creation_date": 1426112659, "last_edit_date": 1495539802, "question_id": 28998530, "link": "https://stackoverflow.com/questions/28998530/visual-c-2013-v12-c11-enum-class-c1001-compiler-error", "title": "Visual C++ 2013 / v12 C++11 enum class C1001 compiler error", "body": "<p>While looking for a generic way to perform an enum cast, I stumbled across an interesting solution posted <a href=\"https://stackoverflow.com/a/4165734\">here</a>. In order to strengthen the underlying enum data types, I tried to replace the conventional enum with a C++11 enum class as follows:</p>\n\n<pre><code>// generic code\n#include &lt;algorithm&gt;\n\ntemplate &lt;typename T&gt;\nstruct enum_traits {};\n\ntemplate&lt;typename T, size_t N&gt;\nT *endof(T(&amp;ra)[N]) {\n    return ra + N;\n}\n\ntemplate&lt;typename T, typename ValType&gt;\nT check(ValType v) {\n    typedef enum_traits&lt;T&gt; traits;\n    const T *first = traits::enumerators;\n    const T *last = endof(traits::enumerators);\n    if (traits::sorted) { // probably premature optimization\n        if (std::binary_search(first, last, v)) return T(v);\n    }\n    else if (std::find(first, last, v) != last) {\n        return T(v);\n    }\n    throw \"exception\";\n}\n\n/*\n// \"enhanced\" definition of enum\nenum e {\n    x = 1,\n    y = 4,\n    z = 10,\n};\n*/\n\n// new C++11 enum class\nenum class e : int {\n    x = 1,\n    y = 4,\n    z = 10,\n};\n\ntemplate&lt;&gt;\nstruct enum_traits&lt;e&gt; {\n    static const e enumerators[];\n    static const bool sorted = true;\n};\n// must appear in only one TU,\n// so if the above is in a header then it will need the array size\nconst e enum_traits&lt;e&gt;::enumerators[] = { e::x, e::y, e::z };\n\n// usage\nint main() {\n    e good = check&lt;e&gt;(1);\n    e bad = check&lt;e&gt;(2);\n}\n</code></pre>\n\n<p>However, this leads to a crash during the compilation process (<code>error C1001: An internal error has occurred in the compiler.</code>). I can't seem to figure out what's causing this, but my guess is that the <code>std::find()</code> and/or <code>std::binary_search()</code> functions are having problems dealing with the enum class. Has someone experienced a similar issue yet?</p>\n"}, {"tags": ["c++", "c", "memory", "bit-manipulation", "information-theory"], "comments": [{"owner": {"reputation": 2466, "user_id": 944201, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b02b3f6033b4a1e16d92c9e02dc7e381?s=128&d=identicon&r=PG", "display_name": "xmoex", "link": "https://stackoverflow.com/users/944201/xmoex"}, "edited": false, "score": 0, "creation_date": 1426113423, "post_id": 28998481, "comment_id": 46245311, "body": "what comes into my mind first is doing a base conversion from base 3 (original values) to base 2, for a number which has 20 digits in base 3"}, {"owner": {"reputation": 2466, "user_id": 944201, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b02b3f6033b4a1e16d92c9e02dc7e381?s=128&d=identicon&r=PG", "display_name": "xmoex", "link": "https://stackoverflow.com/users/944201/xmoex"}, "edited": false, "score": 0, "creation_date": 1426114384, "post_id": 28998481, "comment_id": 46245702, "body": "there&#39;s also things like matlab / octave that have a c/c++ api with functions like base2dec / dec2base <a href=\"http://octave.sourceforge.net/octave/function/base2dec.html\" rel=\"nofollow noreferrer\">octave.sourceforge.net/octave/function/base2dec.html</a> which could do the job for you..."}, {"owner": {"reputation": 2466, "user_id": 944201, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b02b3f6033b4a1e16d92c9e02dc7e381?s=128&d=identicon&r=PG", "display_name": "xmoex", "link": "https://stackoverflow.com/users/944201/xmoex"}, "edited": false, "score": 0, "creation_date": 1426116075, "post_id": 28998481, "comment_id": 46246369, "body": "on the other hand, the 2nd method only makes sense if you have serious memory restraints... the first one is more easy to calculate/read/write/handle. If space is low you could also think about using a compressing algorithm like lzma if you want to let&#39;s say send things over network etc..."}, {"owner": {"reputation": 3971, "user_id": 2840714, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/s9vli.jpg?s=128&g=1", "display_name": "ChuckCottrill", "link": "https://stackoverflow.com/users/2840714/chuckcottrill"}, "edited": false, "score": 0, "creation_date": 1426126211, "post_id": 28998481, "comment_id": 46249253, "body": "How many bits are you willing to waste to make addressing individual elements easier? As you have noted, using 2 bits allows for 4 values, but you only need 3 values, so you waste 1/2 bit out of 2 bits (1/4). You can place 5 of these values into a 4 bit nibble, wasting 1/2 bit out of 4 bits (1/16), but then extracting and setting the individual value is harder. Make your life easier, and waste the 1/2 bit out of 2 bits."}], "answers": [{"comments": [{"owner": {"reputation": 6675, "user_id": 875295, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/1rKE0.jpg?s=128&g=1", "display_name": "lezebulon", "link": "https://stackoverflow.com/users/875295/lezebulon"}, "edited": false, "score": 0, "creation_date": 1426114430, "post_id": 28998773, "comment_id": 46245719, "body": "thanks a lot ! But do you have any idea about the code to specifically set a single element into the 32 bits int , without changing the rest ?"}, {"owner": {"reputation": 2466, "user_id": 944201, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b02b3f6033b4a1e16d92c9e02dc7e381?s=128&d=identicon&r=PG", "display_name": "xmoex", "link": "https://stackoverflow.com/users/944201/xmoex"}, "edited": false, "score": 0, "creation_date": 1426114707, "post_id": 28998773, "comment_id": 46245841, "body": "would it hurt if you read the value to elements, perform the change and then write it back? I think you can&#39;t prevent the system to perform a write operation on the whole int anyways..."}], "owner": {"reputation": 4685, "user_id": 4192931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26d448bf8935cf10be612180b85ffc7?s=128&d=identicon&r=PG", "display_name": "JS1", "link": "https://stackoverflow.com/users/4192931/js1"}, "is_accepted": true, "score": 5, "last_activity_date": 1426113718, "creation_date": 1426113718, "answer_id": 28998773, "question_id": 28998481, "link": "https://stackoverflow.com/questions/28998481/packing-an-array-of-3-values-in-buffer/28998773#28998773", "title": "packing an array of 3 values in buffer", "body": "<p>You should be able to do what you said using 4 bytes.  Assume that you store the 20 values into a single <code>int32_t</code> called <code>value</code>, here is how you would extract any particular element:</p>\n\n<pre><code>element[0] = value % 3;\nelement[1] = (value / 3) % 3;\nelement[2] = (value / 9) % 3;\n...\nelement[19] = (value / 1162261467) % 3; // 1162261467 = 3 ^ 19\n</code></pre>\n\n<p>Or as a loop:</p>\n\n<pre><code>for (i=0;i&lt;20;i++) {\n    element[i] = value % 3;\n    value /= 3;\n}\n</code></pre>\n\n<p>To build <code>value</code> from <code>element</code>, you would just do the reverse, something like this:</p>\n\n<pre><code>value = 0;\nfor (i=19;i&gt;=0;i--)\n    value = value * 3 + element[i];\n</code></pre>\n"}, {"owner": {"reputation": 4119, "user_id": 4447998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be2b81fe09ceb2ec13da299127f242f3?s=128&d=identicon&r=PG", "display_name": "roeland", "link": "https://stackoverflow.com/users/4447998/roeland"}, "is_accepted": false, "score": 0, "last_activity_date": 1426117159, "creation_date": 1426117159, "answer_id": 28999450, "question_id": 28998481, "link": "https://stackoverflow.com/questions/28998481/packing-an-array-of-3-values-in-buffer/28999450#28999450", "title": "packing an array of 3 values in buffer", "body": "<p>There is a generic way to figure out how much bits you need:</p>\n\n<p>If your data type has <em>N</em> different values, then you need <em>log(N) / log(2)</em> bits to store this value. For instance in your example, <em>log(3) / log(2)</em> equals 1.585 bits.</p>\n\n<p>Of course in reality you will to pack a fixed amount of values in an integer number of bits, so you have to multiply this 1.585 with that amount and round up. For instance if you pack 5 of them:</p>\n\n<p><em>1.585 \u00d7 5 = 7.925</em>, meaning that 5 of your values just fit in one 8-bit <code>char</code>.</p>\n\n<p>The way to unpack the values has been shown in JS1's answer. The generic formula for unpacking is <em>element[i] = (value / (N ^ i) ) mod N</em></p>\n\n<p>Final note, this is only meaningful if you really need to optimize memory usage. For comparison, here are some popular ways people pack these value types. Most of the time the extra space taken up is not a problem.</p>\n\n<ul>\n<li>an array of <code>bool</code>: uses 8 bits to store one <code>bool</code>. And a lot of people really dislike the behavior of <code>std::vector&lt;bool&gt;</code>.</li>\n<li><code>enum Bla { BLA_A, BLA_B, BLA_C};</code> an array or vector of <code>Bla</code> probably uses 32 bits per element (<code>sizeof(Bla) == sizeof(int)</code>).</li>\n</ul>\n"}], "owner": {"reputation": 6675, "user_id": 875295, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/1rKE0.jpg?s=128&g=1", "display_name": "lezebulon", "link": "https://stackoverflow.com/users/875295/lezebulon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 28998773, "answer_count": 2, "score": 2, "last_activity_date": 1426117159, "creation_date": 1426112412, "last_edit_date": 1426112767, "question_id": 28998481, "link": "https://stackoverflow.com/questions/28998481/packing-an-array-of-3-values-in-buffer", "title": "packing an array of 3 values in buffer", "body": "<p>I have the following problem I am unable to solve gracefully.</p>\n\n<p>I have a data type that can take 3 possible values (0,1,2).\nI have an array of 20 element of this data type.</p>\n\n<p>As I want to encode the information on the least amount of memory, I did the following :</p>\n\n<ul>\n<li>consider that each element can take up to 4 values (2 bits)</li>\n<li>each <code>char</code> holds 8 bits, so I can put 4 times an element</li>\n<li>5 <code>char</code> holds 40 bits, so I can store 20 elements.</li>\n</ul>\n\n<p>I have done this and it works time.</p>\n\n<p>However I'm interested evaluating the space gained by using the fact that my element can only take 3 values and not 4.\nEvery possible combination gives us 3 to the 20th power, which is 3,486,784,401. However 256 to the 4th power gives us 4,294,967,296 , which is greater. This means I could encode my data on 4 <code>char</code> .</p>\n\n<p>Is there an generic method to do the 2nd idea here ? The 1st idea is simple to implement with bit mask / bit shifts. However since 3 values doesn't fit in an integer number of bits, I have no idea how to encode / decode any of these values into an array of 4 char.</p>\n\n<p>Do you have any idea or reference on how it's done ? I think there must be a general method. If anything I'm interested about the feasability of this</p>\n\n<p>edit : this could be simplified to : how to store 5 values from 0 to 2 into 1 byte only (as 256 >= 3^5 = 243)</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 4817, "user_id": 3817025, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/02fd68a33285e876c0b9652ccb9fbc3a?s=128&d=identicon&r=PG", "display_name": "Jeff Sloyer", "link": "https://stackoverflow.com/users/3817025/jeff-sloyer"}, "edited": false, "score": 1, "creation_date": 1426111788, "post_id": 28998303, "comment_id": 46244717, "body": "Can you please explain more what you are trying to do?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1426111855, "post_id": 28998303, "comment_id": 46244742, "body": "You left out the recursive call. Also, the <code>0 * y == y</code> is questionable."}, {"owner": {"reputation": 2553, "user_id": 2899162, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e232dd2eb7990524453d85d7a89d7388?s=128&d=identicon&r=PG&f=1", "display_name": "druckermanly", "link": "https://stackoverflow.com/users/2899162/druckermanly"}, "reply_to_user": {"reputation": 4817, "user_id": 3817025, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/02fd68a33285e876c0b9652ccb9fbc3a?s=128&d=identicon&r=PG", "display_name": "Jeff Sloyer", "link": "https://stackoverflow.com/users/3817025/jeff-sloyer"}, "edited": false, "score": 0, "creation_date": 1426111862, "post_id": 28998303, "comment_id": 46244746, "body": "@JeffSloyer his homework ^^. Also, Danial, you aren&#39;t recursively calling your function. And you shouldn&#39;t have any <code>cout</code> in your <code>times(...)</code> function."}, {"owner": {"reputation": 27, "user_id": 4660559, "user_type": "registered", "profile_image": "https://graph.facebook.com/788590931211511/picture?type=large", "display_name": "Danial Kayani", "link": "https://stackoverflow.com/users/4660559/danial-kayani"}, "edited": false, "score": 0, "creation_date": 1426112088, "post_id": 28998303, "comment_id": 46244839, "body": "yesss,, it should be like  els{  return y+  (x-1,y);   }"}, {"owner": {"reputation": 27, "user_id": 4660559, "user_type": "registered", "profile_image": "https://graph.facebook.com/788590931211511/picture?type=large", "display_name": "Danial Kayani", "link": "https://stackoverflow.com/users/4660559/danial-kayani"}, "edited": false, "score": 0, "creation_date": 1426112177, "post_id": 28998303, "comment_id": 46244878, "body": "it always return 8 ,,"}, {"owner": {"reputation": 27, "user_id": 4660559, "user_type": "registered", "profile_image": "https://graph.facebook.com/788590931211511/picture?type=large", "display_name": "Danial Kayani", "link": "https://stackoverflow.com/users/4660559/danial-kayani"}, "reply_to_user": {"reputation": 4817, "user_id": 3817025, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/02fd68a33285e876c0b9652ccb9fbc3a?s=128&d=identicon&r=PG", "display_name": "Jeff Sloyer", "link": "https://stackoverflow.com/users/3817025/jeff-sloyer"}, "edited": false, "score": 0, "creation_date": 1426112368, "post_id": 28998303, "comment_id": 46244946, "body": "@JeffSloyer                                                                                                    sorry im figuring out how to use this site ..the problem was that it is returning me 8 when i enter  3 and 4 respectively"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1426113714, "post_id": 28998303, "comment_id": 46245429, "body": "@DanialKayani ` (x-1,y)` is not a function call. <code>4 + (3, 4)</code> is 8."}], "answers": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 3, "last_activity_date": 1426112519, "last_edit_date": 1426112519, "creation_date": 1426112181, "answer_id": 28998434, "question_id": 28998303, "link": "https://stackoverflow.com/questions/28998303/a-recursive-function-that-accepts-two-perimeters-x-and-y-the-function-should-re/28998434#28998434", "title": "a recursive function that accepts two perimeters x and y. The function should return the value of x times y.i.e 2*4=4+4=", "body": "<pre><code>int times(int x ,int y)\n{\n   if(x==0){\n      return 0;\n   }\n\n   return (y + times(x-1,y)); // This is your recursive call.\n}\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 4660559, "user_type": "registered", "profile_image": "https://graph.facebook.com/788590931211511/picture?type=large", "display_name": "Danial Kayani", "link": "https://stackoverflow.com/users/4660559/danial-kayani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1426112519, "creation_date": 1426111592, "last_edit_date": 1426111845, "question_id": 28998303, "link": "https://stackoverflow.com/questions/28998303/a-recursive-function-that-accepts-two-perimeters-x-and-y-the-function-should-re", "title": "a recursive function that accepts two perimeters x and y. The function should return the value of x times y.i.e 2*4=4+4=", "body": "<pre><code>#include&lt;iostream&gt;\nusing namespace std;\n\nint times(int x ,int y)\n{\n   if(x==0){\n      return y;\n   }\n   else{\n      cout&lt;&lt; y+(x-1,y);\n   }\n}\n\nint main()\n{\n   int x,y;\n   cout&lt;&lt;\"enter x :\";\n   cin&gt;&gt;x;\n   cout&lt;&lt;\"enter y: \";\n   cin&gt;&gt;y;\n   cout&lt;&lt; times(x,y);\n   cout&lt;&lt;endl;`enter code here`\n   return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "eclipse", "permissions", "compiler-errors"], "comments": [{"owner": {"reputation": 1376, "user_id": 11409, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2095818e4949d637dfe6024a0319e0a6?s=128&d=identicon&r=PG", "display_name": "mcveat", "link": "https://stackoverflow.com/users/11409/mcveat"}, "edited": false, "score": 0, "creation_date": 1426112343, "post_id": 28998275, "comment_id": 46244936, "body": "Consider adding the code that you think is causing the error to the question. Also, you may check <a href=\"http://stackoverflow.com/questions/27593029/c-compile-collect2-error-ld-returned-1-exit-status\" title=\"c compile collect2 error ld returned 1 exit status\">stackoverflow.com/questions/27593029/&hellip;</a> if this can lead you to solution"}, {"owner": {"reputation": 195, "user_id": 4425633, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JcYVQ.jpg?s=128&g=1", "display_name": "Elhaw", "link": "https://stackoverflow.com/users/4425633/elhaw"}, "edited": false, "score": 0, "creation_date": 1426113778, "post_id": 28998275, "comment_id": 46245445, "body": "does the code works before ? or you could not run any program on eclipse ? @Gizem &#199;etin"}], "answers": [{"owner": {"reputation": 3531, "user_id": 1762193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a75e9.jpg?s=128&g=1", "display_name": "Mike Housky", "link": "https://stackoverflow.com/users/1762193/mike-housky"}, "is_accepted": false, "score": 0, "last_activity_date": 1426111950, "creation_date": 1426111950, "answer_id": 28998384, "question_id": 28998275, "link": "https://stackoverflow.com/questions/28998275/eclipse-c-c-permission-denied-error/28998384#28998384", "title": "Eclipse C/C++ &quot;Permission Denied&quot; error", "body": "<p>That will happen if the program is still running in another window.  The .exe file stays open until the program finishes execution, and you can't delete a file while any processes have it open.</p>\n\n<p>I don't use Eclipse for C/C++ development, and the problem almost can't happen with Code::Blocks, but this happens very often with Visual C++.  Just close the other window and rebuild.</p>\n"}, {"owner": {"reputation": 195, "user_id": 4425633, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JcYVQ.jpg?s=128&g=1", "display_name": "Elhaw", "link": "https://stackoverflow.com/users/4425633/elhaw"}, "is_accepted": false, "score": 1, "last_activity_date": 1426112377, "creation_date": 1426112377, "answer_id": 28998468, "question_id": 28998275, "link": "https://stackoverflow.com/questions/28998275/eclipse-c-c-permission-denied-error/28998468#28998468", "title": "Eclipse C/C++ &quot;Permission Denied&quot; error", "body": "<p>The same problem with me while editing my code.the easy way i used is ::::::::</p>\n\n<p>press the red button(Terminate) before editing your code then run your code\nit is tested and works</p>\n"}, {"owner": {"reputation": 31, "user_id": 5725070, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/83ad5447c7a8b30cac8f59fafc05ac55?s=128&d=identicon&r=PG", "display_name": "anon679", "link": "https://stackoverflow.com/users/5725070/anon679"}, "is_accepted": false, "score": 3, "last_activity_date": 1451349434, "creation_date": 1451349434, "answer_id": 34502839, "question_id": 28998275, "link": "https://stackoverflow.com/questions/28998275/eclipse-c-c-permission-denied-error/34502839#34502839", "title": "Eclipse C/C++ &quot;Permission Denied&quot; error", "body": "<p>All you have to do is go to project on the menu bar and then click clean project. Clean all of your projects and then it should work.</p>\n"}, {"owner": {"reputation": 1116, "user_id": 6457989, "user_type": "registered", "accept_rate": 54, "profile_image": "https://lh4.googleusercontent.com/-WqYZtN2xbQA/AAAAAAAAAAI/AAAAAAAAAJA/Q0Nr_eTCBsA/photo.jpg?sz=128", "display_name": "newbie", "link": "https://stackoverflow.com/users/6457989/newbie"}, "is_accepted": false, "score": 1, "last_activity_date": 1487322706, "last_edit_date": 1487322706, "creation_date": 1487319484, "answer_id": 42292751, "question_id": 28998275, "link": "https://stackoverflow.com/questions/28998275/eclipse-c-c-permission-denied-error/42292751#42292751", "title": "Eclipse C/C++ &quot;Permission Denied&quot; error", "body": "<p>I know this is an old question, but it probably does that because you are interrupting the flow of your program, for instance using <code>scanf()</code>, and not actually giving the input it requires, so when you use the command <code>Build</code> the project, then eclipse is waiting a stream from your keyboard (for instance, maybe it's a different type of program, but follow me here). </p>\n\n<p>Once you know than that is the problem, then you might wanna keep an eye in what is that you are not giving to the project and that it is expecting you to; and the way to stop this annoying error the next time you get it, is that in your console view you press the red button.</p>\n"}, {"owner": {"reputation": 111, "user_id": 7587115, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uwHmscQCYHk/AAAAAAAAAAI/AAAAAAAACDk/F9lJP1LxMbg/photo.jpg?sz=128", "display_name": "Sonic Splasher", "link": "https://stackoverflow.com/users/7587115/sonic-splasher"}, "is_accepted": false, "score": 0, "last_activity_date": 1524341902, "last_edit_date": 1524341902, "creation_date": 1524331174, "answer_id": 49958326, "question_id": 28998275, "link": "https://stackoverflow.com/questions/28998275/eclipse-c-c-permission-denied-error/49958326#49958326", "title": "Eclipse C/C++ &quot;Permission Denied&quot; error", "body": "<p>Check your quarantine folder of your antivirus. If you see the executable file, then add it to the <code>Trust list</code> or <code>White list</code>. Your problem should be solved.</p>\n"}], "owner": {"reputation": 1, "user_id": 4660562, "user_type": "registered", "profile_image": "https://graph.facebook.com/924806757540860/picture?type=large", "display_name": "Gizem &#199;etin", "link": "https://stackoverflow.com/users/4660562/gizem-%c3%87etin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13000, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1524341902, "creation_date": 1426111480, "question_id": 28998275, "link": "https://stackoverflow.com/questions/28998275/eclipse-c-c-permission-denied-error", "title": "Eclipse C/C++ &quot;Permission Denied&quot; error", "body": "<p>I'm using Eclipse Helios in Windows7 for C/C++ programming. I wrote a basic C++ code and tried to compile. The output is:</p>\n\n<blockquote>\n  <p>**** Incremental Build of configuration Release for project Programming Project **** Info: Internal Builder is used for build g++\n  -o \"Programming Project.exe\" \"src\\ch_3_excercises.o\"  c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../../mingw32/bin/ld.exe:\n  cannot open output file Programming Project.exe: Permission denied\n  collect2: ld returned 1 exit status</p>\n</blockquote>\n\n<p>How can I fix this error?</p>\n"}, {"tags": ["c++", "linux", "bash", "shell", "cron"], "comments": [{"owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 0, "creation_date": 1426113223, "post_id": 28998238, "comment_id": 46245237, "body": "The <code>sudo</code> might the problem. Do you really need to run the program as root? See e.g. <a href=\"http://askubuntu.com/questions/173924/how-to-run-a-cron-job-using-the-sudo-command\" title=\"how to run a cron job using the sudo command\">askubuntu.com/questions/173924/&hellip;</a> and <a href=\"http://unix.stackexchange.com/questions/49077/why-does-cron-silently-fail-to-run-sudo-stuff-in-my-script\" title=\"why does cron silently fail to run sudo stuff in my script\">unix.stackexchange.com/questions/49077/&hellip;</a>."}, {"owner": {"reputation": 1, "user_id": 4660458, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-55R9-sxoMao/AAAAAAAAAAI/AAAAAAAAABM/HEziGgbttiE/photo.jpg?sz=128", "display_name": "GabrielSM", "link": "https://stackoverflow.com/users/4660458/gabrielsm"}, "reply_to_user": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 0, "creation_date": 1426114474, "post_id": 28998238, "comment_id": 46245736, "body": "No, i put the sudo trying a solution to my problem, but not worked, a user delete him answer, he ask me to put the full path of <code>wc </code> <code>pidof</code> etc."}, {"owner": {"reputation": 1, "user_id": 4660458, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-55R9-sxoMao/AAAAAAAAAAI/AAAAAAAAABM/HEziGgbttiE/photo.jpg?sz=128", "display_name": "GabrielSM", "link": "https://stackoverflow.com/users/4660458/gabrielsm"}, "reply_to_user": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 0, "creation_date": 1426114557, "post_id": 28998238, "comment_id": 46245777, "body": "tje program run as root, because the cronjob is on  root scheduler"}, {"owner": {"reputation": 4244, "user_id": 4577158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MFS4a.jpg?s=128&g=1", "display_name": "Ulfalizer", "link": "https://stackoverflow.com/users/4577158/ulfalizer"}, "edited": false, "score": 0, "creation_date": 1426117250, "post_id": 28998238, "comment_id": 46246805, "body": "Try saving the <code>stderr</code> output from <code>sudo</code> with e.g. <code>2&gt;$LOG_FILE</code> and see if says anything."}, {"owner": {"reputation": 137098, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1426144604, "post_id": 28998238, "comment_id": 46254354, "body": "Do you get any error messages in your email?  Does it update the log file?"}, {"owner": {"reputation": 1, "user_id": 4660458, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-55R9-sxoMao/AAAAAAAAAAI/AAAAAAAAABM/HEziGgbttiE/photo.jpg?sz=128", "display_name": "GabrielSM", "link": "https://stackoverflow.com/users/4660458/gabrielsm"}, "edited": false, "score": 0, "creation_date": 1426162789, "post_id": 28998238, "comment_id": 46264347, "body": "I don&#39;t get error messages because the script execute, but this line no <code>0)  &#47;usr&#47;bin&#47;screen -md -S sisCAT &#47;home&#47;pi&#47;siscat&#47;sisCAT </code>"}, {"owner": {"reputation": 1, "user_id": 4660458, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-55R9-sxoMao/AAAAAAAAAAI/AAAAAAAAABM/HEziGgbttiE/photo.jpg?sz=128", "display_name": "GabrielSM", "link": "https://stackoverflow.com/users/4660458/gabrielsm"}, "edited": false, "score": 0, "creation_date": 1426164409, "post_id": 28998238, "comment_id": 46265357, "body": "The output of <code>stderr</code> don&#39;t says anything"}], "owner": {"reputation": 1, "user_id": 4660458, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-55R9-sxoMao/AAAAAAAAAAI/AAAAAAAAABM/HEziGgbttiE/photo.jpg?sz=128", "display_name": "GabrielSM", "link": "https://stackoverflow.com/users/4660458/gabrielsm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 19, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1426112291, "creation_date": 1426111290, "last_edit_date": 1426112291, "question_id": 28998238, "link": "https://stackoverflow.com/questions/28998238/script-doenst-call-a-program-with-cron-or-rc-local-but-works-fine-standalone", "title": "Script doens&#39;t call a program with cron or rc.local, but works fine standalone?", "body": "<p>I have a script that check is my c++ program is already running, and if not, call it again.    </p>\n\n<pre><code>#! /bin/bash\nLOG_FILE=/home/pi/siscat/LogFile\ncase \"$(/bin/pidof sisCAT | /usr/bin/wc -w)\" in\n0) /usr/bin/sudo  /usr/bin/screen -md -S sisCAT /home/pi/siscat/sisCAT \n    echo $(/bin/date)\"      sisCAT reinitialize\"&gt;&gt; $LOG_FILE\n    ;;\n1)  echo $(/bin/date)\"      sisCAT is already running\"&gt;&gt; $LOG_FILE\n    # all ok\n    ;;\nesac\n</code></pre>\n\n<p>sisCAT is my c++ system and run on raspberry pi.\nWhen I run it from terminal with <code>./isRunning.sh</code>  works fine, but when i create a crontab entry for this script like</p>\n\n<p><code>* * * * * /home/pi/siscat/isRunning.sh</code></p>\n\n<p>every minute cron call the script but the script do not call sisCAT, I've tried to put my <code>env</code> output in the script, but my problem persist.</p>\n"}, {"tags": ["c++", "binary-search-tree", "avl-tree"], "comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1426109404, "post_id": 28997700, "comment_id": 46243639, "body": "When you compare, are you looking for identical sequence or permutations?"}, {"owner": {"reputation": 5, "user_id": 2671337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da3828786161edb2d8cf04de654e197a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/2671337/mark"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1426110077, "post_id": 28997700, "comment_id": 46243926, "body": "this is like RNA and enzymes     so identical sequence"}, {"owner": {"reputation": 2741, "user_id": 2036161, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ba65c6994b3945d68ea848b7d8a27253?s=128&d=identicon&r=PG", "display_name": "ventsyv", "link": "https://stackoverflow.com/users/2036161/ventsyv"}, "edited": false, "score": 0, "creation_date": 1426110081, "post_id": 28997700, "comment_id": 46243927, "body": "Efficient in memory usage, CPU usage, or computational time?"}, {"owner": {"reputation": 5, "user_id": 2671337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da3828786161edb2d8cf04de654e197a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/2671337/mark"}, "edited": false, "score": 0, "creation_date": 1426110138, "post_id": 28997700, "comment_id": 46243952, "body": "memory and computational time"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1426111853, "post_id": 28997700, "comment_id": 46244741, "body": "If you are going to compare sequences, then certainly a <code>std::vector</code> would be best, followed by <code>std::deque</code> as second choice.  I&#39;m not sure how your search trees are relevant, since sequence comparison requires only a front-to-back pass through both containers.  Are you doing a substring search, or maximum common substring, or?"}], "owner": {"reputation": 5, "user_id": 2671337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da3828786161edb2d8cf04de654e197a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/2671337/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1426110104, "creation_date": 1426109249, "last_edit_date": 1426110104, "question_id": 28997700, "link": "https://stackoverflow.com/questions/28997700/more-efficient-reading-files-vector-or-set-or-other-method", "title": "More efficient reading files vector or set or other method", "body": "<p>I made my own Binary search tree and a AVL tree. My assignment is to do this: </p>\n\n<blockquote>\n  <p>First, create a data structure named SequenceMap that has as data members a string and a set of strings. This will be the data that we store in our trees and passed in to the template tree classes. This class should be comparable using the string member as the comparison key by overloading the operator&lt; function.</p>\n</blockquote>\n\n<p>It's just a suggestion I asked if i can use vectors, but i was wondering what is faster to store my text files and compare them against each other? Both text files are less than 2MB. Part of my assignment is to be efficient as possible in my code.</p>\n"}, {"tags": ["c++", "vector"], "answers": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "is_accepted": false, "score": 0, "last_activity_date": 1426110115, "creation_date": 1426110115, "answer_id": 28997949, "question_id": 28997610, "link": "https://stackoverflow.com/questions/28997610/debug-assertion-failed-error-during-vector-earse-call/28997949#28997949", "title": "Debug Assertion Failed! Error during vector.earse() call", "body": "<p><code>questions.erase(questions.begin() + number);</code>  is off the end of the array.</p>\n\n<p><code>questions.begin()</code> is equivalent to position 0 and\n<code>number</code> is equal to <code>questions.size()</code></p>\n\n<p>So <code>0 + size = size</code> which is 1 past the end of the vector.</p>\n"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1426110572, "last_edit_date": 1426110572, "creation_date": 1426110189, "answer_id": 28997969, "question_id": 28997610, "link": "https://stackoverflow.com/questions/28997610/debug-assertion-failed-error-during-vector-earse-call/28997969#28997969", "title": "Debug Assertion Failed! Error during vector.earse() call", "body": "<p>This expression</p>\n\n<pre><code>number = (rand () % questions.size()) + 1;\n</code></pre>\n\n<p>yields either 1 (when rand() returns any value except 0) or 2 (when rand() returns 0).</p>\n\n<p>Your vectors have sizes equal to 1. </p>\n\n<p>Thus in this statement</p>\n\n<pre><code>questions.erase(questions.begin() + number);\n</code></pre>\n\n<p>iterator <code>questions.begin() + number</code> is invalid if number is equal to 2. If number is equal to 1 then <code>questions.begin() + number</code> is equivalent \nto <code>questions.end()</code></p>\n\n<p>Also in the loop</p>\n\n<pre><code>for (int i = 0; i &lt; questions.size(); ++i)\n{\n    cout &lt;&lt; questions[number] &lt;&lt; endl;\n    questions.erase(questions.begin() + number);\n}\n</code></pre>\n\n<p>you are trying to erase the same element that can be already erased in the preceeding iteration.</p>\n"}], "owner": {"reputation": 13, "user_id": 4186802, "user_type": "registered", "profile_image": "https://graph.facebook.com/529698020/picture?type=large", "display_name": "Andy Ricard", "link": "https://stackoverflow.com/users/4186802/andy-ricard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1426110572, "creation_date": 1426108921, "question_id": 28997610, "link": "https://stackoverflow.com/questions/28997610/debug-assertion-failed-error-during-vector-earse-call", "title": "Debug Assertion Failed! Error during vector.earse() call", "body": "<p>The code below keeps getting me a \"Debug Assertion Failed!\" error. I think I've isolated it to:<code>questions.erase(questions.begin() + number);</code></p>\n\n<p>The goal of the code is to randomly ask one of the questions from the test bank vector \"questions\". I haven't entered all the questions yet because I was trying to figure out the mechanics before hand. </p>\n\n<p>Thanks in advance for your help!</p>\n\n<pre><code>int nomen()\n{\n    int number;\n    string ans = \"No Answer\";\n\n    cout &lt;&lt; \"\\nIn the Nomenclature Game you will be asked to name chemical compounds or give their UPAC symbols.\" &lt;&lt; endl;\n\n    vector&lt;string&gt; questions;\n    vector&lt;string&gt; answers;\n\n    questions.push_back(\"MgO\");\n    answers.push_back(\"magnesium oxide\");\n\n    srand((unsigned)time(0));\n\n    number = (rand () % questions.size()) + 1;\n\n    for (int i = 0; i &lt; questions.size(); ++i)\n    {\n        cout &lt;&lt; questions[number] &lt;&lt; endl;\n        questions.erase(questions.begin() + number);\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "gcc", "g++"], "comments": [{"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1426109119, "post_id": 28997579, "comment_id": 46243466, "body": "forward declaring templates <i>can</i> cause a lot of trouble... be careful."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1426109375, "post_id": 28997579, "comment_id": 46243622, "body": "<code>Vector::Scalar</code> is a dependent name. Use <code>typename Vector::Scalar</code>."}], "owner": {"reputation": 3600, "user_id": 1444073, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wt1VD.jpg?s=128&g=1", "display_name": "theV0ID", "link": "https://stackoverflow.com/users/1444073/thev0id"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 11, "favorite_count": 0, "closed_date": 1426109355, "answer_count": 0, "score": 0, "last_activity_date": 1426108816, "creation_date": 1426108816, "question_id": 28997579, "link": "https://stackoverflow.com/questions/28997579/c-specify-default-value-of-class-template-argument-based-on-previous-argument", "closed_reason": "Duplicate", "title": "C++: Specify default value of class template argument based on previous argument?", "body": "<p>I have the following forward declaration:</p>\n\n<pre><code>template\n    &lt; typename Vector\n    , typename Scalar = Vector::Scalar &gt;\nclass RayPlaneHitTest;\n</code></pre>\n\n<p>This works fine with MSVC++ 2010, but G++ rejects it. I think the purpose is self-explanatory. How do I need to modify it s.t. it works with G++?</p>\n\n<p>I've been trying it with G++ 4.6.3.</p>\n"}, {"tags": ["c++", "opencv", "mfc"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 4598914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f565655a8e6eb1ccea1c84f4456aa92d?s=128&d=identicon&r=PG&f=1", "display_name": "jssoe", "link": "https://stackoverflow.com/users/4598914/jssoe"}, "edited": false, "score": 0, "creation_date": 1426269960, "post_id": 29006218, "comment_id": 46318668, "body": "Thank you for the thorough answer, the step-by-step explanations were just what I needed! Will also upvote when I get more reputation points"}], "owner": {"reputation": 4898, "user_id": 1348388, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y17NZ.png?s=128&g=1", "display_name": "Kornel", "link": "https://stackoverflow.com/users/1348388/kornel"}, "is_accepted": true, "score": 4, "last_activity_date": 1426153146, "creation_date": 1426153146, "answer_id": 29006218, "question_id": 28997560, "link": "https://stackoverflow.com/questions/28997560/opencv-2-4-displaying-a-cvmat-in-mfc/29006218#29006218", "title": "OpenCV 2.4 : Displaying a cv::Mat in MFC", "body": "<p>Suppose we have an OpenCV image <code>cv::Mat cvImg</code> which one should be converted to <code>CImage* mfcImg</code>.<br />\nOf course the MFC image should be displayed on an MFC window i.e. in <code>CStatic winImg</code></p>\n\n<p>So the following transformations should be performed in order to display an OpenCV image in an MFC window:</p>\n\n<pre><code>cv::Mat -&gt; CImage -&gt; CStatic\n</code></pre>\n\n<p>Define MFC window size:</p>\n\n<pre><code>RECT r;\nwinImg.GetClientRect(&amp;r);\ncv::Size winSize(r.right, r.bottom);\n</code></pre>\n\n<p>The size of <code>cvImg</code> is not always the same as an MFC window\u2019s:</p>\n\n<pre><code>cv::Mat cvImgTmp(winSize, CV_8UC3);\nif (cvImg.size() != winSize)\n{\n    cv::resize(cvImg, cvImgTmp, winSize);\n}\nelse \n{\n    cvImgTmp = cvImg.clone();\n}\n</code></pre>\n\n<p>Rotate the image:</p>\n\n<pre><code>cv::flip(cvImgTmp, cvImgTmp, 0);\n</code></pre>\n\n<p>Create an MFC image:</p>\n\n<pre><code>if (mfcImg)\n{\n    mfcImg-&gt;ReleaseDC();\n    delete mfcImg; mfcImg = nullptr;\n}\n\nmfcImg = new CImage();\nmfcImg-&gt;Create(winSize.width, winSize.height, 24);\n</code></pre>\n\n<p>For <code>mfcImg</code> you need a header. Create it by using <code>BITMAPINFO</code> structure</p>\n\n<pre><code>BITMAPINFO bitInfo;\nbitInfo.bmiHeader.biBitCount = 24;\nbitInfo.bmiHeader.biWidth = winSize.width;\nbitInfo.bmiHeader.biHeight = winSize.height;\nbitInfo.bmiHeader.biPlanes = 1;\nbitInfo.bmiHeader.biSize = sizeof(BITMAPINFOHEADER);\nbitInfo.bmiHeader.biCompression = BI_RGB;\nbitInfo.bmiHeader.biClrImportant = 0;\nbitInfo.bmiHeader.biClrUsed = 0;\nbitInfo.bmiHeader.biSizeImage = 0;\nbitInfo.bmiHeader.biXPelsPerMeter = 0;\nbitInfo.bmiHeader.biYPelsPerMeter = 0;\n</code></pre>\n\n<p>Add header and OpenCV image\u2019s data to <code>mfcImg</code></p>\n\n<pre><code>StretchDIBits(mfcImg-&gt;GetDC(), 0, 0,\n    winSize.width, winSize.height, 0, 0,\n    winSize.width, winSize.height,\n    cvImgTmp.data, &amp;bitInfo, DIB_RGB_COLORS, SRCCOPY\n);\n</code></pre>\n\n<p>Display <code>mfcImg</code> in MFC window</p>\n\n<pre><code>mfcImg-&gt;BitBlt(::GetDC(winImg.m_hWnd), 0, 0);\n</code></pre>\n\n<p>Release <code>mfcImg</code>, if you will not use it:</p>\n\n<pre><code>if (mfcImg)\n{\n    mfcImg-&gt;ReleaseDC();\n    delete mfcImg; mfcImg = nullptr;\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 4598914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f565655a8e6eb1ccea1c84f4456aa92d?s=128&d=identicon&r=PG&f=1", "display_name": "jssoe", "link": "https://stackoverflow.com/users/4598914/jssoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8250, "favorite_count": 5, "accepted_answer_id": 29006218, "answer_count": 1, "score": 2, "last_activity_date": 1426270138, "creation_date": 1426108739, "last_edit_date": 1495540727, "question_id": 28997560, "link": "https://stackoverflow.com/questions/28997560/opencv-2-4-displaying-a-cvmat-in-mfc", "title": "OpenCV 2.4 : Displaying a cv::Mat in MFC", "body": "<p>I am updating an existing code base from IplImage* to the newer cv::Mat. I was wondering how to display my cv::Mat object to MFC. The current solution we are using is based on the old CvvImage class:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void DrawPicToHDC(IplImage *img, UINT ID, bool bOnPaint)\n{\n    CDC *pDC = GetDlgItem(ID)-&gt;GetDC();\n    HDC hDC= pDC-&gt;GetSafeHdc();\n    CRect rect;\n    GetDlgItem(ID)-&gt;GetClientRect(&amp;rect);\n    CvvImage cimg;\n    cimg.CopyOf( img );\n    cimg.DrawToHDC( hDC, &amp;rect );\n    ReleaseDC( pDC );\n}\n</code></pre>\n\n<p>I came across <a href=\"https://stackoverflow.com/questions/12891307/using-opencv-2-4-loading-an-image-in-mfc-sdi-view-or-control\">this</a> thread but unfortunately the answer provided doesn't meet my needs because the answers still require you to convert the Mat to an IplImage* before displaying.</p>\n\n<p>Is there any way to do this using cv::Mat only? Any help is much appreciated.</p>\n\n<p><strong>UPDATE:</strong>\nI adapted the above function to using cv::Mat with the help from Kornel's answer. I now do not need to include the CvvImage class:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void DrawPicToHDC(cv::Mat cvImg, UINT ID, bool bOnPaint)\n{\n    // Get the HDC handle information from the ID passed\n    CDC *pDC = GetDlgItem(ID)-&gt;GetDC();\n    HDC hDCDst = pDC-&gt;GetSafeHdc();\n    CRect rect;\n    GetDlgItem(ID)-&gt;GetClientRect(&amp;rect);\n    cv::Size winSize(rect.right, rect.bottom);\n\n    // Resize the source to the size of the destination image if necessary\n    cv::Mat cvImgTmp(winSize, CV_8UC3);\n    if (cvImg.size() != winSize)\n    {\n        cv::resize(cvImg, cvImgTmp, winSize);\n    }\n    else\n    {\n        cvImgTmp = cvImg;\n    }\n\n    // Rotate the image\n    cv::flip(cvImgTmp,cvImgTmp,0);\n\n    // Initialize the BITMAPINFO structure\n    BITMAPINFO bitInfo;\n    bitInfo.bmiHeader.biBitCount = 24;\n    bitInfo.bmiHeader.biWidth = winSize.width;\n    bitInfo.bmiHeader.biHeight = winSize.height;\n    bitInfo.bmiHeader.biPlanes = 1;\n    bitInfo.bmiHeader.biSize = sizeof(BITMAPINFOHEADER);\n    bitInfo.bmiHeader.biCompression = BI_RGB;\n    bitInfo.bmiHeader.biClrImportant = 0;\n    bitInfo.bmiHeader.biClrUsed = 0;\n    bitInfo.bmiHeader.biSizeImage = 0;\n    bitInfo.bmiHeader.biXPelsPerMeter = 0;\n    bitInfo.bmiHeader.biYPelsPerMeter = 0;\n\n    // Add header and OPENCV image's data to the HDC\n    StretchDIBits(hDCDst, 0, 0,\n        winSize.width, winSize.height, 0, 0,\n        winSize.width, winSize.height,\n        cvImgTmp.data, &amp;bitInfo, DIB_RGB_COLORS, SRCCOPY);\n\n    ReleaseDC( pDC );\n}\n</code></pre>\n"}, {"tags": ["c++", "opengl", "deprecated", "fseek"], "comments": [{"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 5, "creation_date": 1426109132, "post_id": 28997551, "comment_id": 46243474, "body": "<code>fseek</code> returns 0 on success <code>0 == NULL</code>, so I don&#39;t see what you are asking on that count. Not sure what is deprecated, can you provide some details?"}, {"owner": {"reputation": 51, "user_id": 4659807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08f9b3049446d003b5bdccf0f3e5adf2?s=128&d=identicon&r=PG&f=1", "display_name": "Vector Croc", "link": "https://stackoverflow.com/users/4659807/vector-croc"}, "reply_to_user": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1426117138, "post_id": 28997551, "comment_id": 46246768, "body": "it gives a bad access error"}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 1, "creation_date": 1426117210, "post_id": 28997551, "comment_id": 46246792, "body": "Where, on what line, what function?"}, {"owner": {"reputation": 44714, "user_id": 731620, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6e2168c4647a4f096a14c254bd3d3f68?s=128&d=identicon&r=PG", "display_name": "ratchet freak", "link": "https://stackoverflow.com/users/731620/ratchet-freak"}, "edited": false, "score": 0, "creation_date": 1426118309, "post_id": 28997551, "comment_id": 46247143, "body": "the fseek and ftell are there to get the size of the file, you can instead use a realloc in a read loop to expand the buffer or use <code>fstat</code> to get the file length (though that breaks down with files over 4 gig)"}, {"owner": {"reputation": 49036, "user_id": 3530129, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IYkz8.jpg?s=128&g=1", "display_name": "Reto Koradi", "link": "https://stackoverflow.com/users/3530129/reto-koradi"}, "edited": false, "score": 0, "creation_date": 1426132626, "post_id": 28997551, "comment_id": 46250829, "body": "GLUT is marked as deprecated in Mac OS. You can still use it, though. See my answer here for details: <a href=\"http://stackoverflow.com/questions/24095931/glut-deprecation-in-mac-osx-10-9-ide-qt-creator/24098402#24098402\" title=\"glut deprecation in mac osx 10 9 ide qt creator\">stackoverflow.com/questions/24095931/&hellip;</a>."}, {"owner": {"reputation": 51, "user_id": 4659807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08f9b3049446d003b5bdccf0f3e5adf2?s=128&d=identicon&r=PG&f=1", "display_name": "Vector Croc", "link": "https://stackoverflow.com/users/4659807/vector-croc"}, "edited": false, "score": 0, "creation_date": 1426189569, "post_id": 28997551, "comment_id": 46281680, "body": "thanks, I know I can still use them, I&#39;m just looking for alternatives"}, {"owner": {"reputation": 51, "user_id": 4659807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08f9b3049446d003b5bdccf0f3e5adf2?s=128&d=identicon&r=PG&f=1", "display_name": "Vector Croc", "link": "https://stackoverflow.com/users/4659807/vector-croc"}, "reply_to_user": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1426189651, "post_id": 28997551, "comment_id": 46281730, "body": "@MatsPetersson error at every instance/line of fseek. also all these:                                       //glutInit(&amp;argc, argv);     //glutInitDisplayMode(GLUT_RGBA);     //glutInitWindowSize(800, 600);     //glutCreateWindow(&quot;Shaders&quot;);"}], "answers": [{"comments": [{"owner": {"reputation": 39713, "user_id": 2423205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EX7y2.png?s=128&g=1", "display_name": "Andon M. Coleman", "link": "https://stackoverflow.com/users/2423205/andon-m-coleman"}, "edited": false, "score": 0, "creation_date": 1426203951, "post_id": 29022392, "comment_id": 46287868, "body": "<code>calloc (...)</code> can allocate and zero your array in a single line of code, by the way. You don&#39;t seem to have anything against using the C standard library in the rest of your code - you might consider doing that instead of writing a separate loop if this sort of thing pops up in the future."}, {"owner": {"reputation": 51, "user_id": 4659807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08f9b3049446d003b5bdccf0f3e5adf2?s=128&d=identicon&r=PG&f=1", "display_name": "Vector Croc", "link": "https://stackoverflow.com/users/4659807/vector-croc"}, "edited": false, "score": 0, "creation_date": 1426205786, "post_id": 29022392, "comment_id": 46288435, "body": "thanks for the tip for being efficient. I&#39;m actually following the tutorial, so that was the code given. The most important part I&#39;m trying to learn is making the triangle appear. I have replaced his function with a function using fstream, so that is no longer a problem. The functions were deprecated in OSX 10.9, if you&#39;re on a Mac:"}], "owner": {"reputation": 39713, "user_id": 2423205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EX7y2.png?s=128&g=1", "display_name": "Andon M. Coleman", "link": "https://stackoverflow.com/users/2423205/andon-m-coleman"}, "is_accepted": false, "score": 1, "last_activity_date": 1426204825, "last_edit_date": 1592644375, "creation_date": 1426203721, "answer_id": 29022392, "question_id": 28997551, "link": "https://stackoverflow.com/questions/28997551/deprecated-functions-and-fseek/29022392#29022392", "title": "Deprecated functions and fseek()", "body": "<p><code>fseek (...)</code> is supposed to return <strong>0</strong> (NULL) on success, so that is perfectly understandable. If <code>ftell (...)</code> is returning a non-zero value, then everything is good.</p>\n<blockquote>\n<p><em>&quot;it gives a bad access error&quot;</em></p>\n</blockquote>\n<p>First of all, do not bother zeroing out the memory. The only zero that matters is the one you added above <code>fclose (...)</code>. Not only is that process highly inefficient, but the line where you add your NULL terminator is also the source of your problems.</p>\n<h3>You have a simple off-by-one indexing situation.</h3>\n<p>You have allocated an array with <code>file_length+1</code> bytes and then you try to add a NULL terminator using the array subscript <code>[file_length+1]</code>.</p>\n<p>That is equivalent to the following expression: <code>*(contents + file_length + 1) = '\\0'</code>, which writes the value <code>'\\0'</code> 1 byte beyond the end of your allocated memory.</p>\n<p><em>I blame the <code>new [...]</code> operator, you probably read the line <code>new char[file_length+1]</code> and forgot that array indices begin at <strong>0</strong>.</em></p>\n<h3>To fix your problem, simply re-write your code this way:</h3>\n<pre><code>// This is how you denote the end of a string in C\ncontents[file_length] = '\\0';\n</code></pre>\n<p>Incidentally, if you choose to keep the loop that writes all zeros to your allocated memory, you do not even need the line mentioned above. I would strongly suggest you nix the loop and fix your array subscript though.</p>\n<hr>\n<p>As for deprecated functions, nothing you have shown is deprecated. You have not shown enough code to make those shaders work, however. At the very least you need a single vertex attribute pointer. Wherever that is done is probably the source of your deprecated function errors.</p>\n"}], "owner": {"reputation": 51, "user_id": 4659807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08f9b3049446d003b5bdccf0f3e5adf2?s=128&d=identicon&r=PG&f=1", "display_name": "Vector Croc", "link": "https://stackoverflow.com/users/4659807/vector-croc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 525, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1426205193, "creation_date": 1426108721, "last_edit_date": 1426205193, "question_id": 28997551, "link": "https://stackoverflow.com/questions/28997551/deprecated-functions-and-fseek", "title": "Deprecated functions and fseek()", "body": "<p>I'm following this tutorial: <a href=\"https://www.youtube.com/watch?v=0CQP8huwLCg\" rel=\"nofollow\">https://www.youtube.com/watch?v=0CQP8huwLCg</a></p>\n\n<p>I'm using XCode on Mac instead of Windows VS. I've linked everything together. However, I have deprecated function calls. Also, my fseek(fp, 0, SEEK_END); is returning NULL for some reason. Can anyone tell me how I can fix the deprecation calls and where I can find the updated API? Second, why is fseek returning null? I have the vsh and fsh files in the same folder...</p>\n\n<p>Here's the main.cpp code to use this on a Mac:</p>\n\n<pre><code>#ifdef __APPLE_CC__\n#include &lt;GLUT/glut.h&gt;\n#else\n#include &lt;GL/glut.h&gt;\n#include &lt;GL/glew.h&gt;\n#include &lt;GL/freeglut.h&gt;\n#endif\n#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\nstatic char* readFile(const char* filename) {\n    // Open the file\n    FILE* fp = fopen (filename, \"r\");\n    // Move the file pointer to the end of the file and determing the length\n    fseek(fp, 0, SEEK_END);\n    long file_length = ftell(fp);\n    fseek(fp, 0, SEEK_SET);\n    char* contents = new char[file_length+1];\n    // zero out memory\n    for (int i = 0; i &lt; file_length+1; i++) {\n        contents[i] = 0;\n    }\n    // Here's the actual read\n    fread (contents, 1, file_length, fp);\n    // This is how you denote the end of a string in C\n    contents[file_length+1] = '\\0';\n    fclose(fp);\n    return contents;\n}\n\nGLuint makeVertexShader(const char* shaderSource) {\n    GLuint vertexShaderID = glCreateShader(GL_VERTEX_SHADER);\n    glShaderSource (vertexShaderID, 1, (const GLchar**)&amp;shaderSource, NULL);\n    glCompileShader(vertexShaderID);\n    return vertexShaderID;\n}\n\nGLuint makeFragmentShader(const char* shaderSource) {\n    GLuint fragmentShaderID = glCreateShader(GL_FRAGMENT_SHADER);\n    glShaderSource(fragmentShaderID, 1, (const GLchar**)&amp;shaderSource, NULL);\n    glCompileShader(fragmentShaderID);\n    return fragmentShaderID;\n}\n\nGLuint makeShaderProgram (GLuint vertexShaderID, GLuint fragmentShaderID) {\n    GLuint shaderID = glCreateProgram();\n    glAttachShader(shaderID, vertexShaderID);\n    glAttachShader(shaderID, fragmentShaderID);\n    glLinkProgram(shaderID);\n    return shaderID;\n}\n\nint main (int argc, char** argv) {\n    // Standard stuff...\n    glutInit(&amp;argc, argv);\n    glutInitDisplayMode(GLUT_RGBA);\n    glutInitWindowSize(800, 600);\n    glutCreateWindow(\"Shaders\");\n    //glewInit(); //only use for Windows platform\n\n    char* vertexShaderSourceCode = readFile(\"vertexShader.vsh\");\n    char* fragmentShaderSourceCode = readFile(\"fragmentShader.fsh\");\n    GLuint vertShaderID = makeVertexShader(vertexShaderSourceCode);\n    GLuint fragShaderID = makeFragmentShader(fragmentShaderSourceCode);\n    GLuint shaderProgramID = makeShaderProgram(vertShaderID, fragShaderID);\n    glUseProgram(shaderProgramID);\n    printf (\"vertShaderID is %d\\n\", vertShaderID);\n    printf (\"fragShaderID is %d\\n\", fragShaderID);\n    printf (\"shaderProgramID is %d\\n\", shaderProgramID);\n    glDeleteProgram(shaderProgramID);\n    int temp;\n    scanf (\"%d\", &amp;temp);\n    return 0;\n}\n</code></pre>\n\n<p>Then, here is the vertexShader.vsh file:</p>\n\n<pre><code>in vec4 s_vPosition;\n\nvoid main () {\n    // Look, Ma!  I avoided any matrix multiplication!\n    // The value of s_vPosition should be between -1.0 and +1.0 (to be visible on the screen)\n    gl_Position = s_vPosition;\n}\n</code></pre>\n\n<p>Then, the fragmentShader.fsh:</p>\n\n<pre><code>out vec4 s_vColor;\n\nvoid main () {\n    // No matter what, color the pixel red!\n    fColor = vec4 (1.0, 0.0, 0.0, 1.0);\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1426116353, "post_id": 28997547, "comment_id": 46246487, "body": "Not necessarily a pointer, just any resource that needs cleaning up but which is not correctly copied by the default-generated copy constructor."}], "answers": [{"comments": [{"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 97, "user_id": 4616336, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2af7c76ab726b2914b1f0b9da6f40e59?s=128&d=identicon&r=PG&f=1", "display_name": "Trent Boult", "link": "https://stackoverflow.com/users/4616336/trent-boult"}, "edited": false, "score": 1, "creation_date": 1426109158, "post_id": 28997622, "comment_id": 46243494, "body": "@TrentBoult this indeed is extremely unfortunate, as new generations of programmers write C++ code in C style..."}, {"owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "edited": false, "score": 1, "creation_date": 1426109188, "post_id": 28997622, "comment_id": 46243509, "body": "I&#39;m frankly not sure whether to upvote or flag your comment. I ultimately had to settle for both. Well played good sir."}], "owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "is_accepted": false, "score": 2, "last_activity_date": 1426115594, "last_edit_date": 1495540250, "creation_date": 1426108947, "answer_id": 28997622, "question_id": 28997547, "link": "https://stackoverflow.com/questions/28997547/is-this-the-correct-logic-behind-the-rule-of-three/28997622#28997622", "title": "Is this the correct logic behind the rule of three?", "body": "<p>Pretty much. In C++11 this becomes the rule of <a href=\"https://stackoverflow.com/questions/4782757/rule-of-three-becomes-rule-of-five-with-c11\">five</a>, as move semantics is disabled by declaring a destructor or copy constructor/assignment operator. But it is better to follow the rule of <a href=\"http://flamingdangerzone.com/cxx11/2012/08/15/rule-of-zero.html\" rel=\"nofollow noreferrer\">zero</a>, i.e. use <a href=\"http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization\" rel=\"nofollow noreferrer\">RAII</a> to perform automatic release of resources via smart pointers etc.</p>\n\n<p>Note that you may not need to deal with a pointer directly to need a custom destructor, but with a resource that is not managed via RAII, e.g. a file open via <code>fopen</code> for which you have to call <code>fclose</code>, or some connection to a database etc. So the rule is to use RAII so that destructors take care of the resources that are acquired. </p>\n"}], "owner": {"reputation": 97, "user_id": 4616336, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2af7c76ab726b2914b1f0b9da6f40e59?s=128&d=identicon&r=PG&f=1", "display_name": "Trent Boult", "link": "https://stackoverflow.com/users/4616336/trent-boult"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1426115594, "creation_date": 1426108704, "question_id": 28997547, "link": "https://stackoverflow.com/questions/28997547/is-this-the-correct-logic-behind-the-rule-of-three", "title": "Is this the correct logic behind the rule of three?", "body": "<p>If we define our very own destructor, it means that there is some dynamically allocated variable. And therefore, we need to define the copy constructor and copy assignment operator as well because we <strong>definitely</strong> are dealing with a pointer somewhere.</p>\n\n<p>Is this the main logic behind the rule?</p>\n"}, {"tags": ["c++", "vector"], "answers": [{"comments": [{"owner": {"reputation": 780, "user_id": 4647583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed29ba29164901d431c9755a8fc9a14?s=128&d=identicon&r=PG", "display_name": "Otomo", "link": "https://stackoverflow.com/users/4647583/otomo"}, "edited": false, "score": 0, "creation_date": 1426110210, "post_id": 28997847, "comment_id": 46243986, "body": "To make sure that the vector is not &quot;reallocated&quot; before it has more than 15 elements, initialize the vector empty and then call <code>std::vector::reserve(size_type)</code> on it (<code>salespeople.reserve(15)</code>)."}, {"owner": {"reputation": 13, "user_id": 4552790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f99f0be69f26e1d9a5efe69be3fc5625?s=128&d=identicon&r=PG&f=1", "display_name": "GreatWhiteSlark", "link": "https://stackoverflow.com/users/4552790/greatwhiteslark"}, "edited": false, "score": 0, "creation_date": 1426111175, "post_id": 28997847, "comment_id": 46244434, "body": "I knew it was something simple!  Thanks as always"}], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1426109752, "creation_date": 1426109752, "answer_id": 28997847, "question_id": 28997538, "link": "https://stackoverflow.com/questions/28997538/unable-to-access-member-function-in-a-vector-of-objects/28997847#28997847", "title": "Unable to access member function in a vector of objects", "body": "<pre><code>vector&lt;Employee&gt; salespeople(15);      // This creates a vector of 15 elements\nEmployee e1(\"John\", \"Smith\", 5000);\nsalespeople.push_back(e1);             // Now you have added the 16-th element\ncout &lt;&lt; salespeople[0].getNetIncome(); // The first element is still the default\n                                       // constructed element.\ncout &lt;&lt; salespeople[0].getgrossSales();\ncout &lt;&lt; salespeople[0].getfName();\n</code></pre>\n\n<p>You can fix the problem by using</p>\n\n<pre><code>vector&lt;Employee&gt; salespeople;  // Create an empty vector and then\n                               // add items to it.\n</code></pre>\n\n<p>or by changing</p>\n\n<pre><code>salespeople.push_back(e1);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>salespeople[0] = e1;\n</code></pre>\n\n<p><strong>Suggestion for improvement</strong></p>\n\n<p>Change the default constructor to initialize the <code>double</code> variables to sane values.</p>\n\n<pre><code>Employee() : weeklyIncome(0.0), grossSales(0.0) bonus(0.0) {};\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 4552790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f99f0be69f26e1d9a5efe69be3fc5625?s=128&d=identicon&r=PG&f=1", "display_name": "GreatWhiteSlark", "link": "https://stackoverflow.com/users/4552790/greatwhiteslark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1426109752, "creation_date": 1426108674, "question_id": 28997538, "link": "https://stackoverflow.com/questions/28997538/unable-to-access-member-function-in-a-vector-of-objects", "title": "Unable to access member function in a vector of objects", "body": "<p>I am trying to simply create a vector of objects, add an object to it, and then display some variables in that object in the vector by accessing the function \"getter's\".  Code compiles but it shows nothing for functions that return string and a garbage number for the ones that return double.  I am sure it is something simple....can you help (assignment due in a couple of hours :S)?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nclass Employee\n{\n    string fName, lName;\n    double weeklyIncome, grossSales, bonus;\npublic:\n    Employee(){};\n    Employee(string fn, string ln, double sales)\n    {\n        fName = fn;\n        lName = ln;\n        grossSales = sales;\n        bonus = sales * 0.09;\n        weeklyIncome = 200;\n    }\n    double getNetIncome() {return bonus + weeklyIncome;}\n    string getfName() {return fName;}\n    double getgrossSales() {return grossSales;}\n    ~Employee(){};\n};\n\nint main()\n{\n    vector&lt;Employee&gt; salespeople(15);\n    Employee e1(\"John\", \"Smith\", 5000);\n    salespeople.push_back(e1);\n    cout &lt;&lt; salespeople[0].getNetIncome();\n    cout &lt;&lt; salespeople[0].getgrossSales();\n    cout &lt;&lt; salespeople[0].getfName();\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "encryption", "cryptography", "passwords"], "comments": [{"owner": {"reputation": 4666, "user_id": 981367, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ca05a550269a76bcdc899350338f5501?s=128&d=identicon&r=PG", "display_name": "VoidStar", "link": "https://stackoverflow.com/users/981367/voidstar"}, "edited": false, "score": 1, "creation_date": 1426108319, "post_id": 28997295, "comment_id": 46243007, "body": "Are you storing to disk? If so, please plan to put some effort into hashing+salting. If it&#39;s in memory only, it&#39;s less of a big deal on most platforms since you need admin/debugger permissions to access another processes&#39; memory. If this is windows, you could use bcrypt.h to access secure hashes."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 1, "creation_date": 1426108473, "post_id": 28997295, "comment_id": 46243091, "body": "If you are not going to store your password securely (in other words, use a hash of some sort), then you may just as well store them in clear-text. Just make sure you inform any users of your system that this is the case, so they have a choice to not use the product."}, {"owner": {"reputation": 3431, "user_id": 1033323, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4117cecb7abcac2b6fb24a8dff99115a?s=128&d=identicon&r=PG", "display_name": "Francisco Aguilera", "link": "https://stackoverflow.com/users/1033323/francisco-aguilera"}, "reply_to_user": {"reputation": 4666, "user_id": 981367, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ca05a550269a76bcdc899350338f5501?s=128&d=identicon&r=PG", "display_name": "VoidStar", "link": "https://stackoverflow.com/users/981367/voidstar"}, "edited": false, "score": 0, "creation_date": 1426110791, "post_id": 28997295, "comment_id": 46244241, "body": "@VoidStar see my edits; no I would not be storing this information to disk, only memory. Also, the class is platform-independent and uses boost."}, {"owner": {"reputation": 3431, "user_id": 1033323, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4117cecb7abcac2b6fb24a8dff99115a?s=128&d=identicon&r=PG", "display_name": "Francisco Aguilera", "link": "https://stackoverflow.com/users/1033323/francisco-aguilera"}, "reply_to_user": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1426110794, "post_id": 28997295, "comment_id": 46244244, "body": "@MatsPetersson Right now the function that retrieves this user and password just takes them as const string &amp;, wouldn&#39;t that already expose the information? What would be the alternative? Hashing wouldn&#39;t take place until after these variables are initialized with the username and pass?"}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 1, "creation_date": 1426110897, "post_id": 28997295, "comment_id": 46244297, "body": "Then, I&#39;d assume that the password is as safe as the general system - in other words, if someone &quot;outside&quot; has access to it, then the password is not safe. If it&#39;s a &quot;secure&quot; machine, then password is safe. If someone KNOWS how your software works, they can break in the &quot;handle password&quot; function, and look at the password."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1426111138, "post_id": 28997295, "comment_id": 46244416, "body": "What do you authenticate against?"}, {"owner": {"reputation": 3431, "user_id": 1033323, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4117cecb7abcac2b6fb24a8dff99115a?s=128&d=identicon&r=PG", "display_name": "Francisco Aguilera", "link": "https://stackoverflow.com/users/1033323/francisco-aguilera"}, "reply_to_user": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1426111288, "post_id": 28997295, "comment_id": 46244503, "body": "@MatsPetersson it&#39;s an https post request to open a tcp connection with the provided user and pass."}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 0, "creation_date": 1426113340, "post_id": 28997295, "comment_id": 46245285, "body": "and you send the password over the net in clear or via ssl/tls  ?"}, {"owner": {"reputation": 3431, "user_id": 1033323, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4117cecb7abcac2b6fb24a8dff99115a?s=128&d=identicon&r=PG", "display_name": "Francisco Aguilera", "link": "https://stackoverflow.com/users/1033323/francisco-aguilera"}, "reply_to_user": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 0, "creation_date": 1426113954, "post_id": 28997295, "comment_id": 46245511, "body": "@Christophe yes, the password is in clear, however since it&#39;s https, the connection is encrypted."}], "answers": [{"comments": [{"owner": {"reputation": 4666, "user_id": 981367, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ca05a550269a76bcdc899350338f5501?s=128&d=identicon&r=PG", "display_name": "VoidStar", "link": "https://stackoverflow.com/users/981367/voidstar"}, "edited": false, "score": 2, "creation_date": 1426108741, "post_id": 28997484, "comment_id": 46243241, "body": "Note that if the password is in a <code>std::string</code>, you need to overwrite the values using <code>password[0]=0</code>,  <code>password[1]=0</code>, etc. until the length of the string. Setting <code>password=&quot;&quot;</code> simply frees the old string on most platforms, but the password could exist for a while in the unused heap. However I don&#39;t see any value in overwriting with random values."}, {"owner": {"reputation": 3431, "user_id": 1033323, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4117cecb7abcac2b6fb24a8dff99115a?s=128&d=identicon&r=PG", "display_name": "Francisco Aguilera", "link": "https://stackoverflow.com/users/1033323/francisco-aguilera"}, "edited": false, "score": 0, "creation_date": 1426110840, "post_id": 28997484, "comment_id": 46244267, "body": "Right now the function that retrieves this user and password just takes them as const string &amp;, wouldn&#39;t that already expose the information? What would be the alternative? Hashing wouldn&#39;t take place until after these variables are initialized with the username and pass within the function?"}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 0, "creation_date": 1426113113, "post_id": 28997484, "comment_id": 46245193, "body": "That&#39;s the whole problem:  as soon as you have a password in clear you are vulnerable.  Calling your function with a const, means that you have no opportunity to clear the password in your authenticate function."}, {"owner": {"reputation": 516, "user_id": 2532113, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qAwZQ.jpg?s=128&g=1", "display_name": "Maciej S", "link": "https://stackoverflow.com/users/2532113/maciej-s"}, "edited": false, "score": 2, "creation_date": 1426262732, "post_id": 28997484, "comment_id": 46314441, "body": "There is a problem with clearing keys or passwords in memory when you don&#39;t need it: compiler will likely optimize it out.  <a href=\"https://security.stackexchange.com/questions/74280/would-it-be-good-secure-programming-practice-to-overwrite-a-sensitive-variable\">1</a> <a href=\"http://www.dwheeler.com/secure-class/Secure-Programs-HOWTO/protect-secrets.html\" rel=\"nofollow noreferrer\">2</a> <a href=\"https://www.securecoding.cert.org/confluence/display/cplusplus/MSC06-CPP.+Be+aware+of+compiler+optimization+when+dealing+with+sensitive+data\" rel=\"nofollow noreferrer\">3</a>"}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "reply_to_user": {"reputation": 516, "user_id": 2532113, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qAwZQ.jpg?s=128&g=1", "display_name": "Maciej S", "link": "https://stackoverflow.com/users/2532113/maciej-s"}, "edited": false, "score": 1, "creation_date": 1426269023, "post_id": 28997484, "comment_id": 46318205, "body": "@MaciejS Excellent remark (and very good links about this topic).  So yes, make the password variable <code>volatile</code>.  The C++ stantard then consider access to these variables as side effet, which makes sure it&#39;s not optimized away."}], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": true, "score": 1, "last_activity_date": 1426116510, "last_edit_date": 1426116510, "creation_date": 1426108470, "answer_id": 28997484, "question_id": 28997295, "link": "https://stackoverflow.com/questions/28997295/c-password-handling-security-practices/28997484#28997484", "title": "c++ password handling security practices?", "body": "<p>No rudimentary technique will protect a password from someone who has a debuger and can access the memory ! </p>\n\n<p>The safest way is therefore not to store the password, but only a hash of it. There are many implementations available as for example <a href=\"https://tools.ietf.org/html/rfc6234\" rel=\"nofollow\">this</a> open source one from a trusted source. </p>\n\n<p>And yes, erase your variable when you no longer need it.  I.E:  OVERWRITE the value, not just destroy the variable (and if you want to be really on the safe side, you'd write random values on it, but that's overkill here): </p>\n\n<p>If it's a string, it's worth mentionning VoidStars advice: </p>\n\n<pre><code> string pwd; \n ....\n std::fill_n(&amp;pwd[0], pwd.capacity()-1, 0xff);  // really overwrite\n</code></pre>\n"}], "owner": {"reputation": 3431, "user_id": 1033323, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4117cecb7abcac2b6fb24a8dff99115a?s=128&d=identicon&r=PG", "display_name": "Francisco Aguilera", "link": "https://stackoverflow.com/users/1033323/francisco-aguilera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1980, "favorite_count": 0, "accepted_answer_id": 28997484, "answer_count": 1, "score": 3, "last_activity_date": 1426116510, "creation_date": 1426107717, "last_edit_date": 1426110979, "question_id": 28997295, "link": "https://stackoverflow.com/questions/28997295/c-password-handling-security-practices", "title": "c++ password handling security practices?", "body": "<p>I am creating a c++ class that handles a username and password.</p>\n\n<p>I was trying to do some research on some rudimentary, but effective practices for me to handle this information, in c++, so it can't be easily found by someone, for example, scanning memory and variables to determine the information.</p>\n\n<p>By rudimentary, I mean something that would not take a lot of work; I don't want to program an entire cryptography library, random addressing system, or even a hashing function.</p>\n\n<p>Also, i'm assuming it would be better to not even maintain this information in a variable, and get rid of it as soon as I do not need it?</p>\n\n<p>Edit:</p>\n\n<p>No, I would not be saving this information to disk, only keeping it in variables in memory.</p>\n\n<p>Edit2:</p>\n\n<p>The class is platform independent and uses boost.</p>\n\n<p>Edit3:</p>\n\n<p>here is the declaration for the function:</p>\n\n<pre><code>void authenticate(const std::string &amp; user, const std::string &amp; pass);\n</code></pre>\n"}, {"tags": ["c++", "c++11", "tuples"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1426107774, "post_id": 28997271, "comment_id": 46242692, "body": "Yes, use a vector. The title of your question is misleading. You don&#39;t know the value of <code>var</code> at compile time."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 15, "creation_date": 1426108188, "post_id": 28997271, "comment_id": 46242936, "body": "You seem to be asking how to index a tuple at <b>runtime</b>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 9, "creation_date": 1426108210, "post_id": 28997271, "comment_id": 46242954, "body": "Have you made any measurements suggesting this change in your code would be worthwhile? I&#39;d think an array lookup is almost certainly faster than 256 separate branches where the CPU cannot accurately predict which branch will be taken."}, {"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 0, "creation_date": 1426108301, "post_id": 28997271, "comment_id": 46242999, "body": "This is what I&#39;ve done before: <a href=\"http://stackoverflow.com/questions/2873802/specify-template-parameters-at-runtime/2873883#2873883\" title=\"specify template parameters at runtime\">stackoverflow.com/questions/2873802/&hellip;</a>"}, {"owner": {"reputation": 4864, "user_id": 411524, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9a54dc8f31cfce52855d77c52832469f?s=128&d=identicon&r=PG", "display_name": "w00d", "link": "https://stackoverflow.com/users/411524/w00d"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1426108361, "post_id": 28997271, "comment_id": 46243029, "body": "@DrewDormann yes, indeed, changed my title to make it clearer"}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 2, "creation_date": 1426108461, "post_id": 28997271, "comment_id": 46243083, "body": "Does your tuple contain different types?  Is <code>doSomething</code> overloaded for all the types, or are implicit conversions expected?"}, {"owner": {"reputation": 4864, "user_id": 411524, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9a54dc8f31cfce52855d77c52832469f?s=128&d=identicon&r=PG", "display_name": "w00d", "link": "https://stackoverflow.com/users/411524/w00d"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1426108592, "post_id": 28997271, "comment_id": 46243155, "body": "@DrewDormann It can have different type, by just having them templated right ? So let&#39;s assume some implicit conversion."}, {"owner": {"reputation": 780, "user_id": 4647583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed29ba29164901d431c9755a8fc9a14?s=128&d=identicon&r=PG", "display_name": "Otomo", "link": "https://stackoverflow.com/users/4647583/otomo"}, "edited": false, "score": 0, "creation_date": 1426109230, "post_id": 28997271, "comment_id": 46243530, "body": "@w00d I hardly doubt that this will improve your performance in any way. It takes the CPU the same amount of time to fetch the data from the touple and the array."}, {"owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "edited": false, "score": 5, "creation_date": 1426109455, "post_id": 28997271, "comment_id": 46243657, "body": "Oh noes, an array lookup! It&#39;s only literally one of the fastest operations it&#39;s possible to perform."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1426113468, "post_id": 28997271, "comment_id": 46245332, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/27790038/c-feed-template-function-element-from-tuple-at-runtime\">(C++) Feed template function element from tuple at runtime?</a>"}, {"owner": {"reputation": 10317, "user_id": 666785, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/NIzSh.jpg?s=128&g=1", "display_name": "sbabbi", "link": "https://stackoverflow.com/users/666785/sbabbi"}, "edited": false, "score": 3, "creation_date": 1426117091, "post_id": 28997271, "comment_id": 46246748, "body": "Use an array. The link you added refers to array of <i>pointers to functions</i> vs <i>call a function depending on a switch</i>. Here you want to call the <i>same</i> function with different values, there is no reason to not use an array."}, {"owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 0, "creation_date": 1547658095, "post_id": 28997271, "comment_id": 95269632, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/8194227/how-to-get-the-i-th-element-from-an-stdtuple-when-i-isnt-know-at-compile-time\">How to get the i-th element from an std::tuple when i isn&#39;t know at compile-time?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4864, "user_id": 411524, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9a54dc8f31cfce52855d77c52832469f?s=128&d=identicon&r=PG", "display_name": "w00d", "link": "https://stackoverflow.com/users/411524/w00d"}, "edited": false, "score": 0, "creation_date": 1426108749, "post_id": 28997458, "comment_id": 46243243, "body": "yeah.. pretty ugly, is there away to remove the need for specifying the number in the Switch ? since I know my value is within a range."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1426109937, "post_id": 28997458, "comment_id": 46243863, "body": "Heh, is the crash a sign of the solution not being practical or of QoI issues with libstdc++&#39;s <code>make_index_sequence</code>? ;) IIRC there&#39;s a <code>log N</code> implementation..."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1426110315, "post_id": 28997458, "comment_id": 46244030, "body": "@T.C. heh, partly my na&#239;ve implementation in libstdc++ and partly limitations of G++ ... but it&#39;s a pretty bonkers template instantiation anyway. I think I&#39;d probably just use a code generator to spam out the case statements if it was me. I&#39;m still holding out for a compiler intrinsic that will make the log N implementation unnecessary."}], "owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "is_accepted": false, "score": 9, "last_activity_date": 1426109323, "last_edit_date": 1426109323, "creation_date": 1426108375, "answer_id": 28997458, "question_id": 28997271, "link": "https://stackoverflow.com/questions/28997271/c11-way-to-index-tuple-at-runtime-without-using-switch/28997458#28997458", "title": "C++11 way to index tuple at runtime without using switch", "body": "<p>It's possible but it's pretty ugly:</p>\n\n<pre><code>#include &lt;tuple&gt;\n#include &lt;iostream&gt;\n\ntemplate&lt;typename T&gt;\nvoid doSomething(T t) { std::cout &lt;&lt; t &lt;&lt; '\\n';}\n\ntemplate&lt;int... N&gt;\nstruct Switch;\n\ntemplate&lt;int N, int... Ns&gt;\nstruct Switch&lt;N, Ns...&gt;\n{\n  template&lt;typename... T&gt;\n    void operator()(int n, std::tuple&lt;T...&gt;&amp; t)\n    {\n      if (n == N)\n        doSomething(std::get&lt;N&gt;(t));\n      else\n        Switch&lt;Ns...&gt;()(n, t);\n    }\n};\n\n// default\ntemplate&lt;&gt;\nstruct Switch&lt;&gt;\n{\n  template&lt;typename... T&gt;\n    void operator()(int n, std::tuple&lt;T...&gt;&amp; t) { }\n};\n\nint main()\n{\n  std::tuple&lt;int, char, double, int, int, const char*&gt; t;\n  Switch&lt;1, 2, 4, 5&gt;()(4, t);\n}\n</code></pre>\n\n<p>Just list each constant that would have been a <code>case</code> label in the original <code>switch</code> in the template argument list for the <code>Switch</code> specialization.</p>\n\n<p>For this to compile,  <code>doSomething(std::get&lt;N&gt;(t))</code> must be a valid expression for every <code>N</code> in the argument list of the <code>Switch</code> specialization ... but that's true of the <code>switch</code> statement too.</p>\n\n<p>For a small number of cases it compiles to the same code as a <code>switch</code>, I didn't check if it scales to large numbers of cases.</p>\n\n<p>If you don't want to type out every number in <code>Switch&lt;1, 2, 3, 4, ... 255&gt;</code> then you could create a <code>std::integer_sequence</code> and then use that to instantiate the <code>Switch</code>:</p>\n\n<pre><code>template&lt;size_t... N&gt;\nSwitch&lt;N...&gt;\nmake_switch(std::index_sequence&lt;N...&gt;)\n{\n  return {};\n}\n\nstd::tuple&lt;int, char, double, int, int, const char*&gt; t;\nmake_switch(std::make_index_sequence&lt;4&gt;{})(3, t);\n</code></pre>\n\n<p>This creates a <code>Switch&lt;0,1,2,3&gt;</code> so if you don't want the <code>0</code> case you'd need to manipulate the <code>index_sequence</code>, e.g. this chops the zero off the front of the list:</p>\n\n<pre><code>template&lt;size_t... N&gt;\nSwitch&lt;N...&gt;\nmake_switch(std::index_sequence&lt;0, N...&gt;)\n{\n  return {};\n}\n</code></pre>\n\n<p>Unfortunately GCC crashes when trying to compile <code>make_index_sequence&lt;255&gt;</code> as it involves too much recursion and uses too much memory, and Clang rejects it by default too (because it has a very low default for <code>-ftemplate-instantiation-depth</code>) so this isn't a very practical solution!</p>\n"}, {"comments": [{"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 1, "creation_date": 1426110505, "post_id": 28998020, "comment_id": 46244100, "body": "Nice, it didn&#39;t occur to me to use the tuple size as the range of indices ... doh."}, {"owner": {"reputation": 4864, "user_id": 411524, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9a54dc8f31cfce52855d77c52832469f?s=128&d=identicon&r=PG", "display_name": "w00d", "link": "https://stackoverflow.com/users/411524/w00d"}, "edited": false, "score": 0, "creation_date": 1426121627, "post_id": 28998020, "comment_id": 46248019, "body": "Nice but I think the demo is only working for c++14, something is wrong with c++11 ?"}, {"owner": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "reply_to_user": {"reputation": 4864, "user_id": 411524, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9a54dc8f31cfce52855d77c52832469f?s=128&d=identicon&r=PG", "display_name": "w00d", "link": "https://stackoverflow.com/users/411524/w00d"}, "edited": false, "score": 1, "creation_date": 1426122770, "post_id": 28998020, "comment_id": 46248336, "body": "@w00d The generic lambda <code>[](auto v) {...}</code> is a C++14 feature. You could write a generic functor instead: <code>struct F { template &lt;class T&gt; operator()(T v) const {...} }; F doSomething;</code>"}, {"owner": {"reputation": 706, "user_id": 1023544, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/121030ce7971b929af26c872a8de82fb?s=128&d=identicon&r=PG", "display_name": "ASten", "link": "https://stackoverflow.com/users/1023544/asten"}, "edited": false, "score": 1, "creation_date": 1474819617, "post_id": 28998020, "comment_id": 66677090, "body": "BTW, the DEMO provided with this answer can also work with an arbitrary integer got from stdin, for example (and therefore is not known at compile time). <a href=\"http://ideone.com/ExUbjK\" rel=\"nofollow noreferrer\">ideone.com/ExUbjK</a>"}, {"owner": {"reputation": 5646, "user_id": 4992422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e408ee3d89df9b7865442e5387ef856c?s=128&d=identicon&r=PG&f=1", "display_name": "PYA", "link": "https://stackoverflow.com/users/4992422/pya"}, "edited": false, "score": 0, "creation_date": 1508376217, "post_id": 28998020, "comment_id": 80590508, "body": "how does this work? how does the compiler know when to stop generating the <code>struct</code> at compile time? how does it know when <code>idx == I-1</code> at compile time?"}, {"owner": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "reply_to_user": {"reputation": 5646, "user_id": 4992422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e408ee3d89df9b7865442e5387ef856c?s=128&d=identicon&r=PG&f=1", "display_name": "PYA", "link": "https://stackoverflow.com/users/4992422/pya"}, "edited": false, "score": 0, "creation_date": 1508377127, "post_id": 28998020, "comment_id": 80590703, "body": "@Prith It stops generating when the recursive template instantiation reaches the <code>visit_impl&lt;0&gt;</code> specialization. And it doesn&#39;t know when <code>idx == I-1</code> at compile time; that&#39;s the point. The question is about indexing a tuple <b>at runtime</b>. If <code>I</code> were known at compile time, we could just use <code>std::get&lt;I&gt;</code>."}, {"owner": {"reputation": 5646, "user_id": 4992422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e408ee3d89df9b7865442e5387ef856c?s=128&d=identicon&r=PG&f=1", "display_name": "PYA", "link": "https://stackoverflow.com/users/4992422/pya"}, "edited": false, "score": 0, "creation_date": 1508379216, "post_id": 28998020, "comment_id": 80591160, "body": "@Oktalist oh I see, so it keeps generating till it gets to <code>visit_impl&lt;0&gt;</code>. I wasnt sure about that, thank you for clearing up the confusion."}, {"owner": {"reputation": 2216, "user_id": 1136311, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6e78c5dc795d256f958c458d151c581e?s=128&d=identicon&r=PG", "display_name": "monkey0506", "link": "https://stackoverflow.com/users/1136311/monkey0506"}, "edited": false, "score": 0, "creation_date": 1511155963, "post_id": 28998020, "comment_id": 81724124, "body": "Thanks for this answer. I&#39;m using a <a href=\"https://stackoverflow.com/a/47385405/1136311\">modified version</a> of your answer to access a parameter pack using a runtime index, and it&#39;s incredibly fast."}], "owner": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "is_accepted": true, "score": 32, "last_activity_date": 1426110373, "creation_date": 1426110373, "answer_id": 28998020, "question_id": 28997271, "link": "https://stackoverflow.com/questions/28997271/c11-way-to-index-tuple-at-runtime-without-using-switch/28998020#28998020", "title": "C++11 way to index tuple at runtime without using switch", "body": "<p>Here's a version that doesn't use an index sequence:</p>\n\n<pre><code>template &lt;size_t I&gt;\nstruct visit_impl\n{\n    template &lt;typename T, typename F&gt;\n    static void visit(T&amp; tup, size_t idx, F fun)\n    {\n        if (idx == I - 1) fun(std::get&lt;I - 1&gt;(tup));\n        else visit_impl&lt;I - 1&gt;::visit(tup, idx, fun);\n    }\n};\n\ntemplate &lt;&gt;\nstruct visit_impl&lt;0&gt;\n{\n    template &lt;typename T, typename F&gt;\n    static void visit(T&amp; tup, size_t idx, F fun) { assert(false); }\n};\n\ntemplate &lt;typename F, typename... Ts&gt;\nvoid visit_at(std::tuple&lt;Ts...&gt; const&amp; tup, size_t idx, F fun)\n{\n    visit_impl&lt;sizeof...(Ts)&gt;::visit(tup, idx, fun);\n}\n\ntemplate &lt;typename F, typename... Ts&gt;\nvoid visit_at(std::tuple&lt;Ts...&gt;&amp; tup, size_t idx, F fun)\n{\n    visit_impl&lt;sizeof...(Ts)&gt;::visit(tup, idx, fun);\n}\n</code></pre>\n\n<p><a href=\"http://ideone.com/xuizI8\" rel=\"noreferrer\"><strong>DEMO</strong></a></p>\n"}, {"comments": [{"owner": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "edited": false, "score": 2, "creation_date": 1426115973, "post_id": 28998598, "comment_id": 46246325, "body": "Nice use of the\u2026 let&#39;s call it the empty variadic lambda pack expansion idiom. Not so hard to read I think; perfect forwarding exacts the greatest cost on readability."}, {"owner": {"reputation": 59687, "user_id": 951890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01c3ef0adae5153378a3f602ca068a03?s=128&d=identicon&r=PG", "display_name": "Vaughn Cato", "link": "https://stackoverflow.com/users/951890/vaughn-cato"}, "edited": false, "score": 0, "creation_date": 1426116997, "post_id": 28998598, "comment_id": 46246706, "body": "Very nice!  But don&#39;t you want a cast-to-void for the comma operator issue?"}, {"owner": {"reputation": 38390, "user_id": 923854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OecRr.png?s=128&g=1", "display_name": "Casey", "link": "https://stackoverflow.com/users/923854/casey"}, "reply_to_user": {"reputation": 4864, "user_id": 411524, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9a54dc8f31cfce52855d77c52832469f?s=128&d=identicon&r=PG", "display_name": "w00d", "link": "https://stackoverflow.com/users/411524/w00d"}, "edited": false, "score": 0, "creation_date": 1426123168, "post_id": 28998598, "comment_id": 46248451, "body": "@w00d Sorry, I was lazy. I used C++14&#39;s <code>integer_sequence</code> and <code>remove_reference_t</code> in the implementation, and a generic lambda in the demo code. There it is in <i>just</i> C++11."}], "owner": {"reputation": 38390, "user_id": 923854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OecRr.png?s=128&g=1", "display_name": "Casey", "link": "https://stackoverflow.com/users/923854/casey"}, "is_accepted": false, "score": 16, "last_activity_date": 1426123085, "last_edit_date": 1426123085, "creation_date": 1426112951, "answer_id": 28998598, "question_id": 28997271, "link": "https://stackoverflow.com/questions/28997271/c11-way-to-index-tuple-at-runtime-without-using-switch/28998598#28998598", "title": "C++11 way to index tuple at runtime without using switch", "body": "<p>Here's an unreadably over-generic implementation without recursion. I don't think I'd use this in production - it's a good example of write-only code - but it's interesting that it can be done. (<a href=\"http://coliru.stacked-crooked.com/a/20b442b83711c9ba\"><strong>DEMO</strong></a>):</p>\n\n<pre><code>#include &lt;array&gt;\n#include &lt;cstddef&gt;\n#include &lt;initializer_list&gt;\n#include &lt;tuple&gt;\n#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n#include &lt;utility&gt;\n\ntemplate &lt;std::size_t...Is&gt; struct index_sequence {};\n\ntemplate &lt;std::size_t N, std::size_t...Is&gt;\nstruct build : public build&lt;N - 1, N - 1, Is...&gt; {};\n\ntemplate &lt;std::size_t...Is&gt;\nstruct build&lt;0, Is...&gt; {\n    using type = index_sequence&lt;Is...&gt;;\n};\n\ntemplate &lt;std::size_t N&gt;\nusing make_index_sequence = typename build&lt;N&gt;::type;\n\ntemplate &lt;typename T&gt;\nusing remove_reference_t = typename std::remove_reference&lt;T&gt;::type;\n\nnamespace detail {\ntemplate &lt;class Tuple, class F, std::size_t...Is&gt;\nvoid tuple_switch(const std::size_t i, Tuple&amp;&amp; t, F&amp;&amp; f, index_sequence&lt;Is...&gt;) {\n  [](...){}(\n    (i == Is &amp;&amp; (\n       (void)std::forward&lt;F&gt;(f)(std::get&lt;Is&gt;(std::forward&lt;Tuple&gt;(t))), false))...\n  );\n}\n} // namespace detail\n\ntemplate &lt;class Tuple, class F&gt;\nvoid tuple_switch(const std::size_t i, Tuple&amp;&amp; t, F&amp;&amp; f) {\n  static constexpr auto N =\n    std::tuple_size&lt;remove_reference_t&lt;Tuple&gt;&gt;::value;\n\n  detail::tuple_switch(i, std::forward&lt;Tuple&gt;(t), std::forward&lt;F&gt;(f),\n                       make_index_sequence&lt;N&gt;{});\n}\n\nconstexpr struct {\n  template &lt;typename T&gt;\n  void operator()(const T&amp; t) const {\n      std::cout &lt;&lt; t &lt;&lt; '\\n';\n  }\n} print{};\n\nint main() {\n\n  {\n    auto const t = std::make_tuple(42, 'z', 3.14, 13, 0, \"Hello, World!\");\n\n    for (std::size_t i = 0; i &lt; std::tuple_size&lt;decltype(t)&gt;::value; ++i) {\n      tuple_switch(i, t, print);\n    }\n  }\n\n  std::cout &lt;&lt; '\\n';\n\n  {\n    auto const t = std::array&lt;int, 4&gt;{{0,1,2,3}};\n    for (std::size_t i = 0; i &lt; t.size(); ++i) {\n      tuple_switch(i, t, print);\n    }\n  }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "edited": false, "score": 0, "creation_date": 1511189371, "post_id": 47385405, "comment_id": 81742442, "body": "Should that be <code>&amp;&amp;</code> instead of <code>||</code> in the <code>noexcept</code> specifiers?"}, {"owner": {"reputation": 2216, "user_id": 1136311, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6e78c5dc795d256f958c458d151c581e?s=128&d=identicon&r=PG", "display_name": "monkey0506", "link": "https://stackoverflow.com/users/1136311/monkey0506"}, "reply_to_user": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "edited": false, "score": 0, "creation_date": 1515245521, "post_id": 47385405, "comment_id": 83232275, "body": "I realized that I had misunderstood how overloaded comma operators work, so I corrected the first implementation to not break in the presence of said overloaded comma operator."}], "owner": {"reputation": 2216, "user_id": 1136311, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6e78c5dc795d256f958c458d151c581e?s=128&d=identicon&r=PG", "display_name": "monkey0506", "link": "https://stackoverflow.com/users/1136311/monkey0506"}, "is_accepted": false, "score": 2, "last_activity_date": 1515245399, "last_edit_date": 1515245399, "creation_date": 1511154651, "answer_id": 47385405, "question_id": 28997271, "link": "https://stackoverflow.com/questions/28997271/c11-way-to-index-tuple-at-runtime-without-using-switch/47385405#47385405", "title": "C++11 way to index tuple at runtime without using switch", "body": "<p>I modified Oktalist's answer to make it slightly more robust:</p>\n\n<ul>\n<li>make <code>visit_at</code> method <code>constexpr</code></li>\n<li>allow visitor to pass any number of arguments (visited tuple element is still required first parameter)</li>\n<li>allow visitor to return a value</li>\n<li>make <code>visit_at</code> method compatible with any <code>std::get</code>-compatible type (e.g., <code>std::array</code>)</li>\n</ul>\n\n<p>For completeness sake, I made it <code>noexcept</code> as well, though that is a mess (where is <a href=\"https://stackoverflow.com/questions/30456801/is-there-an-automatic-noexcept-specifier\">noexcept(auto)</a> already?).</p>\n\n<pre><code>namespace detail\n{\n    template&lt;std::size_t I&gt;\n    struct visit_impl\n    {\n        template&lt;typename Tuple, typename F, typename ...Args&gt;\n        inline static constexpr int visit(Tuple const &amp;tuple, std::size_t idx, F fun, Args &amp;&amp;...args) noexcept(noexcept(fun(std::get&lt;I - 1U&gt;(tuple), std::forward&lt;Args&gt;(args)...)) &amp;&amp; noexcept(visit_impl&lt;I - 1U&gt;::visit(tuple, idx, fun, std::forward&lt;Args&gt;(args)...)))\n        {\n            return (idx == (I - 1U) ? (fun(std::get&lt;I - 1U&gt;(tuple), std::forward&lt;Args&gt;(args)...), void(), 0) : visit_impl&lt;I - 1U&gt;::visit(tuple, idx, fun, std::forward&lt;Args&gt;(args)...));\n        }\n\n        template&lt;typename R, typename Tuple, typename F, typename ...Args&gt;\n        inline static constexpr R visit(Tuple const &amp;tuple, std::size_t idx, F fun, Args &amp;&amp;...args) noexcept(noexcept(fun(std::get&lt;I - 1U&gt;(tuple), std::forward&lt;Args&gt;(args)...)) &amp;&amp; noexcept(visit_impl&lt;I - 1U&gt;::template visit&lt;R&gt;(tuple, idx, fun, std::forward&lt;Args&gt;(args)...)))\n        {\n            return (idx == (I - 1U) ? fun(std::get&lt;I - 1U&gt;(tuple), std::forward&lt;Args&gt;(args)...) : visit_impl&lt;I - 1U&gt;::template visit&lt;R&gt;(tuple, idx, fun, std::forward&lt;Args&gt;(args)...));\n        }\n    };\n\n    template&lt;&gt;\n    struct visit_impl&lt;0U&gt;\n    {\n        template&lt;typename Tuple, typename F, typename ...Args&gt;\n        inline static constexpr int visit(Tuple const&amp;, std::size_t, F, Args&amp;&amp;...) noexcept\n        {\n            return 0;\n        }\n\n        template&lt;typename R, typename Tuple, typename F, typename ...Args&gt;\n        inline static constexpr R visit(Tuple const&amp;, std::size_t, F, Args&amp;&amp;...) noexcept(noexcept(R{}))\n        {\n            static_assert(std::is_default_constructible&lt;R&gt;::value, \"Explicit return type of visit_at method must be default-constructible\");\n            return R{};\n        }\n    };\n}\n\ntemplate&lt;typename Tuple, typename F, typename ...Args&gt;\ninline constexpr void visit_at(Tuple const &amp;tuple, std::size_t idx, F fun, Args &amp;&amp;...args) noexcept(noexcept(detail::visit_impl&lt;std::tuple_size&lt;Tuple&gt;::value&gt;::visit(tuple, idx, fun, std::forward&lt;Args&gt;(args)...)))\n{\n    detail::visit_impl&lt;std::tuple_size&lt;Tuple&gt;::value&gt;::visit(tuple, idx, fun, std::forward&lt;Args&gt;(args)...);\n}\n\ntemplate&lt;typename R, typename Tuple, typename F, typename ...Args&gt;\ninline constexpr R visit_at(Tuple const &amp;tuple, std::size_t idx, F fun, Args &amp;&amp;...args) noexcept(noexcept(detail::visit_impl&lt;std::tuple_size&lt;Tuple&gt;::value&gt;::template visit&lt;R&gt;(tuple, idx, fun, std::forward&lt;Args&gt;(args)...)))\n{\n    return detail::visit_impl&lt;std::tuple_size&lt;Tuple&gt;::value&gt;::template visit&lt;R&gt;(tuple, idx, fun, std::forward&lt;Args&gt;(args)...);\n}\n</code></pre>\n\n<p><strong><a href=\"https://ideone.com/H1sJIO\" rel=\"nofollow noreferrer\">DEMO</a></strong> (demo is not C++11 (due to laziness), but the implementation above should be)</p>\n"}, {"owner": {"reputation": 73, "user_id": 4328804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9692367f0b8fde9a7c216a9dfe60f75?s=128&d=identicon&r=PG&f=1", "display_name": "MechaTheo", "link": "https://stackoverflow.com/users/4328804/mechatheo"}, "is_accepted": false, "score": 2, "last_activity_date": 1555930121, "creation_date": 1555930121, "answer_id": 55793143, "question_id": 28997271, "link": "https://stackoverflow.com/questions/28997271/c11-way-to-index-tuple-at-runtime-without-using-switch/55793143#55793143", "title": "C++11 way to index tuple at runtime without using switch", "body": "<p>I know this thread is quite old, but i stumbled across it in my attempt to replace a virtual dispatch through a static one in my code base.</p>\n\n<p>In contrast to all solutions presented so far this one uses a binary search instead of a linear search, so in my understanding it should be <code>O(log(n))</code> instead of <code>O(n)</code>. Other than that it is just a modified version of the <a href=\"https://stackoverflow.com/a/28998020/4328804\">solution presented by Oktalist</a></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;tuple&gt;\n#include &lt;cassert&gt;\n\ntemplate &lt;std::size_t L, std::size_t U&gt;\nstruct visit_impl\n{\n    template &lt;typename T, typename F&gt;\n    static void visit(T&amp; tup, std::size_t idx, F fun)\n    {\n        static constexpr std::size_t MEDIAN = (U - L) / 2 + L;\n        if (idx &gt; MEDIAN)\n            visit_impl&lt;MEDIAN, U&gt;::visit(tup, idx, fun);\n        else if (idx &lt; MEDIAN)\n            visit_impl&lt;L, MEDIAN&gt;::visit(tup, idx, fun);\n        else\n            fun(std::get&lt;MEDIAN&gt;(tup));\n    }\n};\n\ntemplate &lt;typename F, typename... Ts&gt;\nvoid visit_at(const std::tuple&lt;Ts...&gt;&amp; tup, std::size_t idx, F fun)\n{\n    assert(idx &lt;= sizeof...(Ts));\n    visit_impl&lt;0, sizeof...(Ts)&gt;::visit(tup, idx, fun);\n}\n\ntemplate &lt;typename F, typename... Ts&gt;\nvoid visit_at(std::tuple&lt;Ts...&gt;&amp; tup, std::size_t idx, F fun)\n{\n    assert(idx &lt;= sizeof...(Ts));\n    visit_impl&lt;0, sizeof...(Ts)&gt;::visit(tup, idx, fun);\n}\n\n/* example code */\n\n/* dummy template to generate different callbacks */\ntemplate &lt;int N&gt;\nstruct Callback\n{\n    int Call() const\n    {\n        return N;\n    }\n};\n\ntemplate &lt;typename T&gt;\nstruct CallbackTupleImpl;\n\ntemplate &lt;std::size_t... Indx&gt;\nstruct CallbackTupleImpl&lt;std::index_sequence&lt;Indx...&gt;&gt;\n{\n    using type = std::tuple&lt;Callback&lt;Indx&gt;...&gt;;\n};\n\ntemplate &lt;std::size_t N&gt;\nusing CallbackTuple = typename CallbackTupleImpl&lt;std::make_index_sequence&lt;N&gt;&gt;::type;\n\nint main()\n{\n    CallbackTuple&lt;100&gt; myTuple;\n    int value{};\n    visit_at(myTuple, 42, [&amp;value](auto&amp; pc) { value = pc.Call(); });\n    assert(value == 42);\n}\n</code></pre>\n\n<p>With this solution the number of calls to <code>visit_impl</code> is <code>7</code>. With the linear search approach it would be <code>58</code> instead.</p>\n\n<p>Another interesting solution presented <a href=\"https://www.justsoftwaresolutions.co.uk/cplusplus/getting-tuple-elements-with-runtime-index.html\" rel=\"nofollow noreferrer\">here</a> even manages to provide <code>O(1)</code> access. However at the cost of more storage, since a function map with the size <code>O(n)</code> is generated. </p>\n"}, {"comments": [{"owner": {"reputation": 2853, "user_id": 129550, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/816090617fd1d1123eca2d47e880a2ee?s=128&d=identicon&r=PG", "display_name": "fuzzyTew", "link": "https://stackoverflow.com/users/129550/fuzzytew"}, "edited": false, "score": 1, "creation_date": 1593524794, "post_id": 58674921, "comment_id": 110807657, "body": "slick.  i didn&#39;t know about these features yet.  btw if you put the constexpr condition at the start of the function you can throw an error for out of range indices."}], "owner": {"reputation": 1962, "user_id": 2789815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XkN7a.png?s=128&g=1", "display_name": "scx", "link": "https://stackoverflow.com/users/2789815/scx"}, "is_accepted": false, "score": 6, "last_activity_date": 1607279640, "last_edit_date": 1607279640, "creation_date": 1572725721, "answer_id": 58674921, "question_id": 28997271, "link": "https://stackoverflow.com/questions/28997271/c11-way-to-index-tuple-at-runtime-without-using-switch/58674921#58674921", "title": "C++11 way to index tuple at runtime without using switch", "body": "<p>No need to get all cray cray in c++17.</p>\n<pre><code>// Calls your func with tuple element.\ntemplate &lt;class Func, class Tuple, size_t N = 0&gt;\nvoid runtime_get(Func func, Tuple&amp; tup, size_t idx) {\n    if (N == idx) {\n        std::invoke(func, std::get&lt;N&gt;(tup));\n        return;\n    }\n\n    if constexpr (N + 1 &lt; std::tuple_size_v&lt;Tuple&gt;) {\n        return runtime_get&lt;Func, Tuple, N + 1&gt;(func, tup, idx);\n    }\n}\n</code></pre>\n<p>And runtime <code>tuple_element</code> for fun.</p>\n<pre><code>// Calls your func with a pointer to the type.\n// Uses a pointer so the element is not initialized.\ntemplate &lt;class Tuple, class Func, size_t N = 0&gt;\nvoid runtime_tuple_element(Func func, size_t idx) {\n    if (N == idx) {\n        std::tuple_element_t&lt;N, Tuple&gt;* ptr = nullptr;\n        std::invoke(func, ptr);\n        return;\n    }\n\n    if constexpr (N + 1 &lt; std::tuple_size_v&lt;Tuple&gt;) {\n        return runtime_tuple_element&lt;Tuple, Func, N + 1&gt;(func, idx);\n    }\n}\n</code></pre>\n"}, {"owner": {"reputation": 2853, "user_id": 129550, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/816090617fd1d1123eca2d47e880a2ee?s=128&d=identicon&r=PG", "display_name": "fuzzyTew", "link": "https://stackoverflow.com/users/129550/fuzzytew"}, "is_accepted": false, "score": 0, "last_activity_date": 1593524045, "creation_date": 1593524045, "answer_id": 62658702, "question_id": 28997271, "link": "https://stackoverflow.com/questions/28997271/c11-way-to-index-tuple-at-runtime-without-using-switch/62658702#62658702", "title": "C++11 way to index tuple at runtime without using switch", "body": "<p>For c++11 here is a concise approach that returns a pointer:</p>\n<pre><code>template &lt;typename Tuple, long template_index = std::tuple_size&lt;Tuple&gt;::value&gt;\nstruct tuple_address {\n  static void * of(Tuple &amp; tuple, long function_index) {\n    if (template_index - 1 == function_index) {\n      return &amp;std::get&lt;template_index - 1&gt;(tuple);\n    } else {\n      return tuple_address&lt;Tuple, template_index - 1&gt;::of(tuple, function_index);\n    }\n  }\n};\ntemplate &lt;typename Tuple&gt;\nstruct tuple_address&lt;Tuple, 0&gt; {\n  static void * of(Tuple &amp; tuple, long function_index) {\n    return 0;\n  }\n};\ntemplate &lt;typename Tuple&gt;\nvoid * tuple_address_of(Tuple &amp; tuple, long index) {\n  return tuple_address&lt;Tuple&gt;::of(tuple, index);\n}\n</code></pre>\n"}, {"owner": {"reputation": 1, "user_id": 3340184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e64abda9b3b17984642fb9293522d146?s=128&d=identicon&r=PG&f=1", "display_name": "X-Ray", "link": "https://stackoverflow.com/users/3340184/x-ray"}, "is_accepted": false, "score": 0, "last_activity_date": 1611772029, "last_edit_date": 1611772029, "creation_date": 1611771461, "answer_id": 65925007, "question_id": 28997271, "link": "https://stackoverflow.com/questions/28997271/c11-way-to-index-tuple-at-runtime-without-using-switch/65925007#65925007", "title": "C++11 way to index tuple at runtime without using switch", "body": "<p>C++17 non-recursive</p>\n<pre><code>template &lt;typename T&gt;\ninline constexpr size_t tuple_size_v = std::tuple_size&lt;T&gt;::value;\n\ntemplate &lt;typename T, typename F, std::size_t... I&gt;\nconstexpr void visit_impl(T&amp; tup, const size_t idx, F fun, std::index_sequence&lt;I...&gt;)\n{\n    assert(idx &lt; tuple_size_v&lt;T&gt;);\n    ((I == idx ? fun(std::get&lt;I&gt;(tup)) : void()), ...);\n}\n\ntemplate &lt;typename F, typename... Ts, typename Indices = std::make_index_sequence&lt;sizeof...(Ts)&gt;&gt;\nconstexpr void visit_at(std::tuple&lt;Ts...&gt;&amp; tup, const size_t idx, F fun)\n{\n    visit_impl(tup, idx, fun, Indices {});\n}\n\ntemplate &lt;typename F, typename... Ts, typename Indices = std::make_index_sequence&lt;sizeof...(Ts)&gt;&gt;\nconstexpr void visit_at(const std::tuple&lt;Ts...&gt;&amp; tup, const size_t idx, F fun)\n{\n    visit_impl(tup, idx, fun, Indices {});\n}\n</code></pre>\n<p>Using:</p>\n<pre><code>auto tuple = std::tuple { 1, 2.5, 3, 'Z' };\n// print it to cout\nfor (size_t i = 0; i &lt; tuple_size_v&lt;decltype(tuple)&gt;; ++i) {\n    visit_at(tuple, i, [](auto&amp;&amp; arg) {\n        using T = std::decay_t&lt;decltype(arg)&gt;;\n        std::cout &lt;&lt; *typeid(T).name() &lt;&lt; arg &lt;&lt; ' ';\n    });\n}\n</code></pre>\n<p>Output:\ni1 d2.5 i3 cZ</p>\n"}], "owner": {"reputation": 4864, "user_id": 411524, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9a54dc8f31cfce52855d77c52832469f?s=128&d=identicon&r=PG", "display_name": "w00d", "link": "https://stackoverflow.com/users/411524/w00d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11756, "favorite_count": 19, "accepted_answer_id": 28998020, "answer_count": 8, "score": 31, "last_activity_date": 1611772029, "creation_date": 1426107635, "last_edit_date": 1495540468, "question_id": 28997271, "link": "https://stackoverflow.com/questions/28997271/c11-way-to-index-tuple-at-runtime-without-using-switch", "title": "C++11 way to index tuple at runtime without using switch", "body": "<p>I have a piece of c++11 code similar like below:</p>\n\n<pre><code>switch(var) {\n   case 1: dosomething(std::get&lt;1&gt;(tuple));\n   case 2: dosomething(std::get&lt;2&gt;(tuple));\n   ...\n}\n</code></pre>\n\n<p>Is there any way to remove this large switch ? Note that <code>get&lt;var&gt;</code> does not work because var is not constant, but I know var is in small range i.e. (0-20).</p>\n\n<p>Note that the point here is to avoid using an array that causes an array lookup... </p>\n\n<p>EDIT:</p>\n\n<p>well on the issue of performance, there is a discussion\n<a href=\"https://stackoverflow.com/questions/5582261/performance-of-array-of-functions-over-if-and-switch-statements\">Performance of array of functions over if and switch statements</a></p>\n\n<p>For my own purpose, I do not argue which one is better.</p>\n"}, {"tags": ["c++", "language-lawyer"], "comments": [{"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1426107931, "post_id": 28997226, "comment_id": 46242782, "body": "Related to <a href=\"http://stackoverflow.com/q/26761385/1708801\">Is rule 3 in section 3.3.7/1 from N3936 redundant?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3019, "user_id": 411165, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YYrH2.jpg?s=128&g=1", "display_name": "Ayrosa", "link": "https://stackoverflow.com/users/411165/ayrosa"}, "edited": false, "score": 0, "creation_date": 1426107836, "post_id": 28997296, "comment_id": 46242724, "body": "I understand this. But I don&#39;t see a reason for an error."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 3019, "user_id": 411165, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YYrH2.jpg?s=128&g=1", "display_name": "Ayrosa", "link": "https://stackoverflow.com/users/411165/ayrosa"}, "edited": false, "score": 0, "creation_date": 1426108809, "post_id": 28997296, "comment_id": 46243284, "body": "@Ayrosa what should <code>sizeof X{}.v</code> yield?"}, {"owner": {"reputation": 3019, "user_id": 411165, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YYrH2.jpg?s=128&g=1", "display_name": "Ayrosa", "link": "https://stackoverflow.com/users/411165/ayrosa"}, "edited": false, "score": 0, "creation_date": 1426109266, "post_id": 28997296, "comment_id": 46243554, "body": "Your number (2) justifies it. Thanks."}], "owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "is_accepted": true, "score": 3, "last_activity_date": 1426107722, "creation_date": 1426107722, "answer_id": 28997296, "question_id": 28997226, "link": "https://stackoverflow.com/questions/28997226/is-there-any-reason-for-3-3-7-1-2-to-be-considered-an-error/28997296#28997296", "title": "Is there any reason for &#167;3.3.7/1.2 to be considered an error?", "body": "<p>The problem is that in member function scope (and other class scopes) the class version of the enum shadows the global value.</p>\n\n<p>If it wasn't an error, the compiler would have to pick one of two surprising behaviors:</p>\n\n<p>1) Use the class enum's value always, which means it would have to fully parse the class to determine if a valid size is available.</p>\n\n<p>2) Have the value of <code>i</code> within class members <em>be completely different</em> from the <em>actual</em> length of the class member array declared, notionally, to be the same length.</p>\n"}], "owner": {"reputation": 3019, "user_id": 411165, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YYrH2.jpg?s=128&g=1", "display_name": "Ayrosa", "link": "https://stackoverflow.com/users/411165/ayrosa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 1, "accepted_answer_id": 28997296, "answer_count": 1, "score": 1, "last_activity_date": 1426107722, "creation_date": 1426107495, "question_id": 28997226, "link": "https://stackoverflow.com/questions/28997226/is-there-any-reason-for-3-3-7-1-2-to-be-considered-an-error", "title": "Is there any reason for &#167;3.3.7/1.2 to be considered an error?", "body": "<p>This code was obtained from the example in \u00a73.3.7/1.5:</p>\n\n<pre><code>enum { i = 1 };\nclass X {\n    char v[i]; // error: i refers to ::i\n    // but when reevaluated is X::i\n    enum { i = 2 };\n};\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/c6c21f3287e78b22\" rel=\"nofollow\">GCC</a> emits an error because of \u00a73.3.7/1.2</p>\n\n<p>However, if we apply \u00a73.4.1/7, the lookup for the name <code>i</code> in the declaration <code>char v[i];</code> will find <code>enum{ i = 1 };</code> in global scope. What's the problem with the redeclaration <code>enum{ i = 2 };</code>? </p>\n"}, {"tags": ["c++", "c++11", "cygwin"], "comments": [{"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1427250583, "post_id": 28997206, "comment_id": 46698209, "body": "Looks related to <a href=\"https://cygwin.com/ml/cygwin/2015-03/msg00247.html\" rel=\"nofollow noreferrer\">this</a>"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1427292818, "post_id": 28997206, "comment_id": 46718614, "body": "@ShafikYaghmour oh thanks! I was actually the person who filled the bug, didn&#39;t know they fixed it :)"}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1427293075, "post_id": 28997206, "comment_id": 46718822, "body": "It looked like you had filed the bug report, so I was a little confused. Otherwise I would have just provided an answer since it was indeed fixed. Alternatively you could provide a self-answer explaining you filed a bug report and it was fixed. Others will probably have this issue as well."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1427321418, "post_id": 28997206, "comment_id": 46736521, "body": "provided the answer. was actually quite surprised no one reported it before, I guess very few people use numerical simulations under cygwin."}, {"owner": {"reputation": 36494, "user_id": 25450, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/fbf950615302e00a14bceec914af32ca?s=128&d=identicon&r=PG", "display_name": "sastanin", "link": "https://stackoverflow.com/users/25450/sastanin"}, "edited": false, "score": 0, "creation_date": 1432640321, "post_id": 28997206, "comment_id": 48995511, "body": "It seems to apply to GCC 4.9.2 from MSYS2 too. On GCC 4.8.1 from vanilla MinGW/MSYS <code>std::round</code> and the like work fine."}], "answers": [{"comments": [{"owner": {"reputation": 2121, "user_id": 3605029, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/038df21ba7adf09f9bdd4d429d5286f6?s=128&d=identicon&r=PG&f=1", "display_name": "sujithvm", "link": "https://stackoverflow.com/users/3605029/sujithvm"}, "edited": false, "score": 0, "creation_date": 1436471354, "post_id": 29263266, "comment_id": 50640013, "body": "is this bug fixed in g++4.9.3 ? Thanks"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 2121, "user_id": 3605029, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/038df21ba7adf09f9bdd4d429d5286f6?s=128&d=identicon&r=PG&f=1", "display_name": "sujithvm", "link": "https://stackoverflow.com/users/3605029/sujithvm"}, "edited": false, "score": 0, "creation_date": 1436472950, "post_id": 29263266, "comment_id": 50640860, "body": "@sujithvm not sure, better to check the cygwin bug report system"}, {"owner": {"reputation": 931, "user_id": 2102771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af5ffa6c36e15f74e9eaa3da860e592f?s=128&d=identicon&r=PG", "display_name": "jtbr", "link": "https://stackoverflow.com/users/2102771/jtbr"}, "reply_to_user": {"reputation": 2121, "user_id": 3605029, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/038df21ba7adf09f9bdd4d429d5286f6?s=128&d=identicon&r=PG&f=1", "display_name": "sujithvm", "link": "https://stackoverflow.com/users/3605029/sujithvm"}, "edited": false, "score": 0, "creation_date": 1464400838, "post_id": 29263266, "comment_id": 62485087, "body": "@sujithvm std::round is not defined in 4.9.3 in my testing. It is defined in 5.1.0. Not sure when exactly it got fixed."}], "owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "is_accepted": true, "score": 3, "last_activity_date": 1427306921, "creation_date": 1427306921, "answer_id": 29263266, "question_id": 28997206, "link": "https://stackoverflow.com/questions/28997206/cygwin-support-for-c11-in-g4-9-2/29263266#29263266", "title": "cygwin support for C++11 in g++4.9.2", "body": "<p>The issue seems to be a <a href=\"https://cygwin.com/ml/cygwin/2015-03/msg00247.html\" rel=\"nofollow\">bug</a> related to cygwin implementation, thanks to Shafik Yaghmour for pointing it out.</p>\n\n<p>The issue is now fixed via a patch for <code>&lt;cmath&gt;</code>, also at the link provided above.</p>\n"}], "owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5765, "favorite_count": 0, "accepted_answer_id": 29263266, "answer_count": 1, "score": 5, "last_activity_date": 1427306921, "creation_date": 1426107420, "question_id": 28997206, "link": "https://stackoverflow.com/questions/28997206/cygwin-support-for-c11-in-g4-9-2", "title": "cygwin support for C++11 in g++4.9.2", "body": "<p>I am trying to test some C++11 code on Windows 7 under cygwin, and am getting compiling errors for functions that are defined starting with C++11, such as <code>std::log2</code> and <code>std::round</code>. I am compiling with <code>g++ -std=c++11 test.cpp</code>, using gcc 4.9.2. Here is some minimal example that fails to compile:</p>\n\n<pre><code>#include &lt;cmath&gt;\n#include &lt;iostream&gt;\n\nint main()\n{\n        auto x = std::log2(10);\n        std::cout &lt;&lt; x &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>error:</p>\n\n<pre><code>g++ -std=c++11 test.cpp\ntest.cpp: In function \u2018int main()\u2019:\ntest.cpp:5:11: error: \u2018log2\u2019 is not a member of \u2018std\u2019\n  auto x = std::log2(10);\n           ^\ntest.cpp:5:11: note: suggested alternative:\nIn file included from /usr/lib/gcc/i686-pc-cygwin/4.9.2/include/c++/cmath:44:0,\n                 from test.cpp:1:\n/usr/include/math.h:305:15: note:   \u2018log2\u2019\n extern double log2 _PARAMS((double));\n</code></pre>\n\n<p>Is this a known bug in cygwin's g++ porting? The code above works fine on any Linux/UNIX flavour supporting C++11.</p>\n"}, {"tags": ["c++", "linux", "qt", "steam"], "comments": [{"owner": {"reputation": 1828, "user_id": 134793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/851fc6f3a5bf348ee6067d57ac8a6824?s=128&d=identicon&r=PG", "display_name": "Fox", "link": "https://stackoverflow.com/users/134793/fox"}, "edited": false, "score": 0, "creation_date": 1426855432, "post_id": 28997187, "comment_id": 46552077, "body": "in launch_launcher.sh can you output the whole LD_LIBRARY_PATH value, and try explicitly setting that in future launches? i.e. <code>echo $LD_LIBRARY_PATH # sample-output: .:A:B:C:D:E</code> modified launcher script: <code>LD_LIBRARY_PATH=.:A:B:C .&#47;launcher</code>"}, {"owner": {"reputation": 1828, "user_id": 134793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/851fc6f3a5bf348ee6067d57ac8a6824?s=128&d=identicon&r=PG", "display_name": "Fox", "link": "https://stackoverflow.com/users/134793/fox"}, "edited": false, "score": 0, "creation_date": 1426855592, "post_id": 28997187, "comment_id": 46552174, "body": "as for solving the problem after isolation, I&#39;ll need to look deeper into that"}, {"owner": {"reputation": 14766, "user_id": 483486, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/fcf225aa724d9bb05f6693dc8cf8c459?s=128&d=identicon&r=PG", "display_name": "OmnipotentEntity", "link": "https://stackoverflow.com/users/483486/omnipotententity"}, "reply_to_user": {"reputation": 1828, "user_id": 134793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/851fc6f3a5bf348ee6067d57ac8a6824?s=128&d=identicon&r=PG", "display_name": "Fox", "link": "https://stackoverflow.com/users/134793/fox"}, "edited": false, "score": 0, "creation_date": 1426881078, "post_id": 28997187, "comment_id": 46567288, "body": "@Fox, <code>LD_LIBRARY_PATH</code> is whatever Steam sets it to.  This is usually actually quite long and it&#39;s different from system to system and user to user (because Steam installs itself under <code>~&#47;.steam&#47;</code>)  Simply changing <code>LD_LIBRARY_PATH</code> won&#39;t help, because I need the full Steam provided <code>LD_LIBRARY_PATH</code> for the game, but the Steam provided <code>LD_LIBRARY_PATH</code> also seems to be interfering with <code>QDesktopServices</code>.  So it&#39;s not a matter of finding the right <code>LD_LIBRARY_PATH</code> because it doesn&#39;t seem to exist."}, {"owner": {"reputation": 1828, "user_id": 134793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/851fc6f3a5bf348ee6067d57ac8a6824?s=128&d=identicon&r=PG", "display_name": "Fox", "link": "https://stackoverflow.com/users/134793/fox"}, "edited": false, "score": 0, "creation_date": 1427004745, "post_id": 28997187, "comment_id": 46597012, "body": "I&#39;ll add an &quot;answer&quot; to explain it better."}], "answers": [{"owner": {"reputation": 1507, "user_id": 1917249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca1bdb885023aa31a35be9306ba1fa5c?s=128&d=identicon&r=PG", "display_name": "fbucek", "link": "https://stackoverflow.com/users/1917249/fbucek"}, "is_accepted": false, "score": 0, "last_activity_date": 1426493904, "last_edit_date": 1426493904, "creation_date": 1426493479, "answer_id": 29072168, "question_id": 28997187, "link": "https://stackoverflow.com/questions/28997187/steam-for-linux-platform-libraries-causing-qt-application-misbehavior/29072168#29072168", "title": "Steam for Linux platform libraries causing Qt application misbehavior", "body": "<p>I guess you problem is more complex. Just thought what you can try.</p>\n\n<p><strong>1) You app maybe does not need to use LD_LIBRARY_PATH</strong> </p>\n\n<p>Not to mess with LD_LIBRARY_PATH in your app, you can put library search path into you program. ( linux solution )</p>\n\n<pre><code>App structue\n/app/bin\n/app/lib    // where all my libraries are including Qt libraries\n</code></pre>\n\n<p>.pro file</p>\n\n<pre><code>QMAKE_RPATHDIR = \\$\\$ORIGIN/../lib\nQMAKE_LFLAGS_RELEASE += \\'-Wl,-rpath,$${QMAKE_RPATHDIR}\\'\nQMAKE_RPATHDIR =\n</code></pre>\n\n<p>( do not remember why it looks this stupid in my old app - but it works and at this moment I am not on linux to simplify it )</p>\n\n<p><strong>2) Set LD_LIBRARY_PATH only for processes within your app</strong> ( not to make LD_LIBARY_PATH too complex. path to your app, steam etc. )</p>\n\n<p>I do not know in what context is new browser executed but if it is your app you can use this aproach.\nThis ensures only processes within your app will have this LD_LIBRARY_PATH</p>\n\n<p>You can set LD_LIBRARY_PATH within your app using </p>\n\n<pre><code>setenv(\"LD_LIBRARY_PATH\", yourPath.toLatin1().data(), 1)\n// You can test it using\nQProcessEnvironment::systemEnvironment().value(\"LD_LIBRARY_PATH\");\n</code></pre>\n\n<p>I guess you don use QProcess so, setting environment for process itself is out of question.</p>\n"}, {"comments": [{"owner": {"reputation": 14766, "user_id": 483486, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/fcf225aa724d9bb05f6693dc8cf8c459?s=128&d=identicon&r=PG", "display_name": "OmnipotentEntity", "link": "https://stackoverflow.com/users/483486/omnipotententity"}, "edited": false, "score": 0, "creation_date": 1427050864, "post_id": 29191646, "comment_id": 46609533, "body": "Sorry, I misunderstood the intent of your post.  You are completely correct that this is a valid way of troubleshooting this issue.  I apologize for being standoffish.  I&#39;ll give this a shot the next time I work on this issue and I&#39;ll keep you posted."}, {"owner": {"reputation": 1828, "user_id": 134793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/851fc6f3a5bf348ee6067d57ac8a6824?s=128&d=identicon&r=PG", "display_name": "Fox", "link": "https://stackoverflow.com/users/134793/fox"}, "reply_to_user": {"reputation": 14766, "user_id": 483486, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/fcf225aa724d9bb05f6693dc8cf8c459?s=128&d=identicon&r=PG", "display_name": "OmnipotentEntity", "link": "https://stackoverflow.com/users/483486/omnipotententity"}, "edited": false, "score": 0, "creation_date": 1427105203, "post_id": 29191646, "comment_id": 46625349, "body": "no worries :) - the original comment was a bit terse. Hope you do get a solution."}], "owner": {"reputation": 1828, "user_id": 134793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/851fc6f3a5bf348ee6067d57ac8a6824?s=128&d=identicon&r=PG", "display_name": "Fox", "link": "https://stackoverflow.com/users/134793/fox"}, "is_accepted": false, "score": 1, "last_activity_date": 1427005622, "creation_date": 1427005622, "answer_id": 29191646, "question_id": 28997187, "link": "https://stackoverflow.com/questions/28997187/steam-for-linux-platform-libraries-causing-qt-application-misbehavior/29191646#29191646", "title": "Steam for Linux platform libraries causing Qt application misbehavior", "body": "<p>So, I'm addressing this part (as explained in an earlier question comment)</p>\n\n<blockquote>\n  <p>What's the best way to troubleshoot this issue? How can I find the responsible library </p>\n</blockquote>\n\n<p>and not this</p>\n\n<blockquote>\n  <p>and exclude it or otherwise workaround this problem?</p>\n</blockquote>\n\n<p>the reasoning being that if you're using a steam-supported Linux config, LD_LIBRARY_PATHs are supposed to be a last-resort setting for any app (especially commercial ones). If it messes with other libraries/apps, it's their bug. </p>\n\n<p>Your approach in isolating a repro is fundamentally valid that way. The logical extension is to (like in the comment) continue with:</p>\n\n<pre><code>LD_LIBRARY_PATH={myentry}:A:B:C\n./launcher\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>LD_LIBRARY_PATH={myentry}:${LD_LIBRARY_PATH}\n./launcher\n</code></pre>\n\n<p>this allows you to cherry pick among \"A:B:C\" (which is the current LD_LIBRARY_PATH including Steam library entries) and determine leaving which entries out makes your app start working again.</p>\n\n<p>As for addressing it, it depends on several variables on your system (your distro, other installed libs under LD_LIBRARY_PATH, your Qt version vs KDE's Qt version). You could try:</p>\n\n<ol>\n<li>googling for workarounds - it may be as simple as a replacement library file, or Qt patch, or a single function you call from your main function (similar to @fbucek's answer). </li>\n<li>logging bug-reports with Steam and Qt - so this workaround isn't specific to your system, and isn't broken again with the next Steam update.</li>\n</ol>\n\n<p><strong>edit:</strong> you observe that it is QDesktopServices which is affected - my most likely guess would be differing Qt versions between two of KDE, yours and Steam.</p>\n"}], "owner": {"reputation": 14766, "user_id": 483486, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/fcf225aa724d9bb05f6693dc8cf8c459?s=128&d=identicon&r=PG", "display_name": "OmnipotentEntity", "link": "https://stackoverflow.com/users/483486/omnipotententity"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 732, "favorite_count": 1, "answer_count": 2, "score": 11, "last_activity_date": 1427005622, "creation_date": 1426107354, "last_edit_date": 1426119721, "question_id": 28997187, "link": "https://stackoverflow.com/questions/28997187/steam-for-linux-platform-libraries-causing-qt-application-misbehavior", "title": "Steam for Linux platform libraries causing Qt application misbehavior", "body": "<p>I'm currently having difficulties with a very simple launcher application that's intended to display a webpage and have some buttons to launch a game.  When you click a link inside of the launcher it is intended to simply launch your default webbrowser with the link, rather than accepting and handling navigation requests.</p>\n\n<p>However, when launched via Steam, links fail to open in a new webbrowser.  Exact behavior depends on the environment, I've had reports of copies of <code>gvfs-open</code> and <code>xdg-open</code> hanging, though on my environment it simply gives mouse indication that firefox is opening for a split second and does nothing (including no processes launched at all according to strace, possibly has something to do with KDE's message passing system, I don't know).  Vexingly enough, there are also reports that it just works fine.  And so I'm having quite a problem hammering down the exact issue as a result.</p>\n\n<p>I've managed to narrow down the issues to Steam modifying the LD_LIBARRY_PATH of the executable to use Steam's Linux platforms.  I've bundled all of the libraries needed by the launcher with the launcher.</p>\n\n<p>Here is a minimal reproducible guide:</p>\n\n<p>main.cpp</p>\n\n<pre><code>#include &lt;QApplication&gt;\n#include &lt;QWebFrame&gt;\n#include &lt;QDesktopServices&gt;\n#include &lt;QNetworkRequest&gt;\n#include &lt;QMessageBox&gt;\n#include &lt;QWebView&gt;\n\nclass WebPage : public QWebPage {\npublic:\n  bool acceptNavigationRequest(QWebFrame*, const QNetworkRequest &amp;request, NavigationType) {\n    QDesktopServices::openUrl(request.url());\n    return false;\n  }\n};\n\nclass WebView : public QWebView {\npublic:\n  QWebView* createWindow(QWebPage::WebWindowType) {\n    WebView* res = new WebView;\n    WebPage* page = new WebPage;\n    res-&gt;setPage(page);\n    return res;\n  }\n};\n\nint main(int argc, char *argv[]) {\n  QApplication a(argc, argv);\n\n  WebView v;\n  v.load(QUrl(\"http://example.com/\"));\n  v.show();\n\n  return a.exec();\n}\n</code></pre>\n\n<p>launcher.pro</p>\n\n<pre><code>QT += core gui network webkitwidgets widgets\n\nTARGET = launcher\nTEMPLATE = app\n\nSOURCES = main.cpp\n</code></pre>\n\n<p>You will also need to copy and bundle the following libraries (standard Qt deployment):</p>\n\n<p>libQt5Widgets.so libQt5Gui.so libQt5Core.so libQt5Network.so libQt5WebKitWidgets.so libQt5WebKit.so libQt5MultimediaWidgets.so libQt5OpenGL.so libQt5PrintSupport.so libQt5Multimedia.so libQt5Sensors.so libQt5Quick.so libQt5Qml.so libQt5Sql.so libQt5Positioning.so libQt5DBus.so libicui18n.so libicuuc.so libicudata.so libssl.so libcrypto.so libstdc++.so libgcc_s.so</p>\n\n<p>And in a subdirectory called platforms:</p>\n\n<p>libqxcb.so</p>\n\n<p>And then finally a script to tie it together:</p>\n\n<p>launch_launcher.sh</p>\n\n<pre><code>#!/bin/sh -e\n\ncd \"$(dirname \"$0\")\"\n\nLD_LIBRARY_PATH=.:$LD_LIBRARY_PATH ./launcher\n</code></pre>\n\n<p>Finally, have steam installed and set it's LD_LIBRARY_PATH as your own and export it and run launch_launcher.sh (these exact paths depends on your steam installation.)</p>\n\n<p>Essentially, if you remove <code>$LD_LIBRARY_PATH</code> from the launch_launcher script so that the line reads only <code>LD_LIBRARY_PATH=. ./launcher</code> then the links work.  However with <code>$LD_LIBRARY_PATH</code> enabled links do not work.  We need <code>$LD_LIBRARY_PATH</code> working in order to use the Steam Linux platform libraries (which makes the game work.)</p>\n\n<p>What's the best way to troubleshoot this issue?  How can I find the responsible library and exclude it or otherwise workaround this problem?</p>\n"}, {"tags": ["c++", "templates", "sfinae"], "answers": [{"comments": [{"owner": {"reputation": 907, "user_id": 3964037, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/1667882889/picture?type=large", "display_name": "Alexander Bily", "link": "https://stackoverflow.com/users/3964037/alexander-bily"}, "edited": false, "score": 0, "creation_date": 1426107638, "post_id": 28997243, "comment_id": 46242610, "body": "Ah thank you so appending &#39;*&#39; to Type in template parameter should solve the problem?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 907, "user_id": 3964037, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/1667882889/picture?type=large", "display_name": "Alexander Bily", "link": "https://stackoverflow.com/users/3964037/alexander-bily"}, "edited": false, "score": 0, "creation_date": 1426107685, "post_id": 28997243, "comment_id": 46242636, "body": "@AlexanderBily Try it.  Probably will work.  However, there are some quirks in the standard when working with non-type template parameters, I usually find it best to avoid being fancy with them.  The last time it burned me involved something about specialization?  I cannot recall."}], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 3, "last_activity_date": 1426107566, "creation_date": 1426107566, "answer_id": 28997243, "question_id": 28997183, "link": "https://stackoverflow.com/questions/28997183/sfinae-function-overload/28997243#28997243", "title": "SFINAE function overload", "body": "<p>Well, you can't have a constant of type <code>float</code> as a template parameter.</p>\n\n<p>Try <code>class=typename If&lt;IsRead&lt;T&gt;::value,T&gt;::Type</code> and similar in the other case as a first pass.</p>\n\n<p>If you have C++11, try <code>using</code> aliases to get rid of <code>typename</code> spam.  In addition, prefer <code>std::enable_if&lt;?&gt;</code> to <code>If&lt;?&gt;</code> when posting questions asking for help, because I had to <strong>guess</strong> what <code>If</code> does (and for all I know, your real problem is in your implementation of <code>If</code> and <code>IsReal</code> etc).</p>\n"}], "owner": {"reputation": 907, "user_id": 3964037, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/1667882889/picture?type=large", "display_name": "Alexander Bily", "link": "https://stackoverflow.com/users/3964037/alexander-bily"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 915, "favorite_count": 0, "accepted_answer_id": 28997243, "answer_count": 1, "score": 0, "last_activity_date": 1426107566, "creation_date": 1426107350, "question_id": 28997183, "link": "https://stackoverflow.com/questions/28997183/sfinae-function-overload", "title": "SFINAE function overload", "body": "<p>I would like to ask about function overloading using SFINAE. I have defined 2 functions, one of which should be used when integral type is passed as parameter, other one should be used when floating point is passed as parameter. Here is code: </p>\n\n<pre><code>template &lt;typename T, typename If&lt;IsIntegral&lt;T&gt;::value,T&gt;::Type = 0&gt;\nvoid function(T t) {\n    std::cout &lt;&lt; \"T is integral type\" &lt;&lt; std::endl;\n}\ntemplate &lt;typename T, typename If&lt;IsReal&lt;T&gt;::value,T&gt;::Type = 0&gt;\nvoid function(T t) {\n    std::cout &lt;&lt; \"T is real type\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>This compiles fine. When I instantiate integral version of function, like this:</p>\n\n<pre><code>function(4);\nfunction(28l);\n</code></pre>\n\n<p>it still works as it should (I get the message \"T is integral type\"). However, when I add another instance for floating point types:</p>\n\n<pre><code>function(4);\nfunction(28l);\nfunction(4.5f);\n</code></pre>\n\n<p>I get error saying, that there is no matching function to call to \"function(float)\". What is wrong with this snippet of code? By the way, the If template class is only an alias for enable_if.</p>\n"}, {"tags": ["c++", "c", "ruby", "macos", "rvm"], "answers": [{"owner": {"reputation": 3012, "user_id": 300478, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/981e73278c1b9524c1ff07f3089cea48?s=128&d=identicon&r=PG", "display_name": "Khue Vu", "link": "https://stackoverflow.com/users/300478/khue-vu"}, "is_accepted": false, "score": 0, "last_activity_date": 1426111378, "creation_date": 1426111378, "answer_id": 28998249, "question_id": 28997175, "link": "https://stackoverflow.com/questions/28997175/error-when-installing-ruby-with-rvm/28998249#28998249", "title": "Error when installing ruby with rvm", "body": "<p>I fixed it by following this link: <a href=\"https://gist.github.com/zenkay/3237860\" rel=\"nofollow\">https://gist.github.com/zenkay/3237860</a></p>\n\n<blockquote>\n  <p>Mountain Lion supports only XCode 4.4 or greater. Basic 4.4 installer\n  doesn't install Unix's standard command line tools by default. You\n  have to install it using separate package (from Apple Developer's) or\n  directly from XCode 4.4 preference panel (Preferences : Downloads :\n  Components : Install).</p>\n  \n  <p>When installation is complete, tools are finally available but is not\n  enough. Unfortunately llvm_gcc-4.2 compiler ship with XCode is not\n  suitable to compile Ruby (it works but some features are buggy).</p>\n  \n  <p>You have to install the stand-alone gcc package. </p>\n</blockquote>\n\n<p>Basically, i have to install another version of gcc instead of using the one with Xcode. </p>\n"}], "owner": {"reputation": 3012, "user_id": 300478, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/981e73278c1b9524c1ff07f3089cea48?s=128&d=identicon&r=PG", "display_name": "Khue Vu", "link": "https://stackoverflow.com/users/300478/khue-vu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1426111378, "creation_date": 1426107321, "last_edit_date": 1592644375, "question_id": 28997175, "link": "https://stackoverflow.com/questions/28997175/error-when-installing-ruby-with-rvm", "title": "Error when installing ruby with rvm", "body": "<p>I am trying to install ruby in MacOS</p>\n<blockquote>\n<p>In file included from :0:0:</p>\n<p>.ext/include/x86_64-darwin14.0.0/ruby/config.h:77:16: error: duplicate</p>\n<p>'unsigned'  #define size_t unsigned int</p>\n<pre><code>            ^ .ext/include/x86_64-darwin14.0.0/ruby/config.h:77:25: error: two or\n</code></pre>\n<p>more data types in declaration specifiers  #define size_t unsigned int</p>\n<pre><code>                     ^ In file included from &lt;command-line&gt;:0:0: ./include/ruby/missing.h:169:19: warning: conflicting types for\n</code></pre>\n<p>built-in function 'memmove' [enabled by default]  RUBY_EXTERN void</p>\n<p>*memmove(void *, const void *, size_t);</p>\n<pre><code>               ^ In file included from ./include/ruby.h:32:0,\n\n             from main.c:13: ./include/ruby/ruby.h:50:22: fatal error: strings.h: No such file or directory  # include &lt;strings.h&gt;\n\n                  ^ compilation terminated.\n</code></pre>\n</blockquote>\n<p>I set env CPP=/usr/bin/cpp</p>\n<p>Thanks for your help.</p>\n"}, {"tags": ["c++", "linux", "libstdc++", "rpath", "ln"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1426107675, "post_id": 28997127, "comment_id": 46242632, "body": "Try setting LD_LIBRARY_PATH."}, {"owner": {"reputation": 4259, "user_id": 2516916, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/90d670e62ae35e180ad6e939443cab62?s=128&d=identicon&r=PG", "display_name": "Gillespie", "link": "https://stackoverflow.com/users/2516916/gillespie"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1426108071, "post_id": 28997127, "comment_id": 46242859, "body": "@n.m. I tried that as well - instead of using rpath, I set LD_LIBRARY_PATH instead. Same results - it finds libstdc++.so just fine, but keeps trying to use the system libc.so..."}, {"owner": {"reputation": 1552, "user_id": 2362671, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0585760afe78ec9aafe1836b826ed495?s=128&d=identicon&r=PG", "display_name": "Come Raczy", "link": "https://stackoverflow.com/users/2362671/come-raczy"}, "edited": false, "score": 0, "creation_date": 1426112347, "post_id": 28997127, "comment_id": 46244939, "body": "did you actually specify the &#39;-Wl,--dynamic-linker=...&#39; option? what does &#39;readelf -a test | grep ld&#39; say?"}, {"owner": {"reputation": 4259, "user_id": 2516916, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/90d670e62ae35e180ad6e939443cab62?s=128&d=identicon&r=PG", "display_name": "Gillespie", "link": "https://stackoverflow.com/users/2516916/gillespie"}, "reply_to_user": {"reputation": 1552, "user_id": 2362671, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0585760afe78ec9aafe1836b826ed495?s=128&d=identicon&r=PG", "display_name": "Come Raczy", "link": "https://stackoverflow.com/users/2362671/come-raczy"}, "edited": false, "score": 0, "creation_date": 1426169287, "post_id": 28997127, "comment_id": 46268944, "body": "@ComeRaczy No, I didn&#39;t. I was trying to get the linker error like the guy in the other question before adding in that option. readelf says <code>[Requesting program interpreter: &#47;lib&#47;ld-linux.so.3]</code> which is the old system linker, so I guess I have to include the new linker at <code>&#47;tmp&#47;newlibs&#47;ld-linux.so.3</code>? I&#39;ll try that, and comment again if the same problem persists."}, {"owner": {"reputation": 4259, "user_id": 2516916, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/90d670e62ae35e180ad6e939443cab62?s=128&d=identicon&r=PG", "display_name": "Gillespie", "link": "https://stackoverflow.com/users/2516916/gillespie"}, "reply_to_user": {"reputation": 1552, "user_id": 2362671, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0585760afe78ec9aafe1836b826ed495?s=128&d=identicon&r=PG", "display_name": "Come Raczy", "link": "https://stackoverflow.com/users/2362671/come-raczy"}, "edited": false, "score": 0, "creation_date": 1426174901, "post_id": 28997127, "comment_id": 46273093, "body": "@ComeRaczy So when I explicitly specify the new linker, I get <code>FATAL: kernel too old</code> when trying to execute <code>test</code>. Does this mean I have to rebuild <code>glibc</code> targeting the older kernel I want to use it on?"}, {"owner": {"reputation": 1552, "user_id": 2362671, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0585760afe78ec9aafe1836b826ed495?s=128&d=identicon&r=PG", "display_name": "Come Raczy", "link": "https://stackoverflow.com/users/2362671/come-raczy"}, "edited": false, "score": 1, "creation_date": 1426189826, "post_id": 28997127, "comment_id": 46281822, "body": "@RPGillespie looks like you&#39;ll need to. &#39;file test&#39; should give you the minimum version currently supported. if your ARM linux kernel is older than thet you&#39;ll need to rebuild glibc specifying the configure option &#39;--enable-kernel=ARM-kernel-version&#39;"}, {"owner": {"reputation": 4259, "user_id": 2516916, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/90d670e62ae35e180ad6e939443cab62?s=128&d=identicon&r=PG", "display_name": "Gillespie", "link": "https://stackoverflow.com/users/2516916/gillespie"}, "reply_to_user": {"reputation": 1552, "user_id": 2362671, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0585760afe78ec9aafe1836b826ed495?s=128&d=identicon&r=PG", "display_name": "Come Raczy", "link": "https://stackoverflow.com/users/2362671/come-raczy"}, "edited": false, "score": 0, "creation_date": 1426889036, "post_id": 28997127, "comment_id": 46570712, "body": "@ComeRaczy Thanks, that worked! I was using Yocto Project (Poky) to build stuff, and since <code>--enable-kernel</code> is automatically set to <code>${OLDEST_KERNEL}</code> in Poky&#39;s glibc recipe, I just set <code>OLDEST_KERNEL</code> to the kernel I wanted them to run on and ran <code>bitbake</code> and it worked like a charm!"}], "owner": {"reputation": 4259, "user_id": 2516916, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/90d670e62ae35e180ad6e939443cab62?s=128&d=identicon&r=PG", "display_name": "Gillespie", "link": "https://stackoverflow.com/users/2516916/gillespie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 175, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1426110691, "creation_date": 1426107151, "last_edit_date": 1495540250, "question_id": 28997127, "link": "https://stackoverflow.com/questions/28997127/two-sets-of-libstd-so-and-libc-so-on-the-same-system", "title": "Two sets of libstd++.so and libc.so on the same system", "body": "<p>I have an ARM device with an non-upgradable linux kernel running on it. I want to run some C++11 programs on it, however, the system <code>libstdc++.so.6</code> and <code>libc.so.6</code> are too old to support C++11 at runtime. I have copies of the newer libraries, but I'm not sure how I can tell my program to use the new ones and not the old ones. I created a new directory called <code>/tmp/newlibs</code>, and I put copies of the new shared objects in there. Then, I compiled with the following flags:</p>\n\n<p><code>g++ -std=c++11 -Wl,-rpath,/tmp/newlibs test.cpp -o test</code></p>\n\n<p>But when I attempt to execute the file, I get the following error:</p>\n\n<pre><code>/test: /lib/libc.so.6: version `GLIBC_2.17' not found (required by /tmp/newlibs/libstdc++.so.6)\n</code></pre>\n\n<p>So clearly, the <code>rpath</code> flag worked for <code>libstdc++</code>, but it looks like it didn't work for the newer version of <code>libc.so.6</code>. Is there something I'm missing here? Does <code>libstdc++.so.6</code> have a hard-coded path in it that I can't change?</p>\n\n<p>I feel like this is a very similar problem to this question, except in my case it isn't fully utilizing my new glibc directory:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/847179/multiple-glibc-libraries-on-a-single-host\">Multiple glibc libraries on a single host</a></p>\n\n<p>Edit: it seems like the dynamic linker might be skipping over my new libc for some reason. Because when I try to preload <code>libc.so.6</code> using <code>LD_PRELOAD</code>, I get:</p>\n\n<p><code>ERROR: ld.so: object '/tmp/newlibs/libc.so.6' from LD_PRELOAD cannot be preloaded: ignored.</code></p>\n"}, {"tags": ["c++", "codeblocks", "long-integer", "division"], "comments": [{"owner": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "edited": false, "score": 1, "creation_date": 1426107196, "post_id": 28997108, "comment_id": 46242360, "body": "Is Population_A greater than 16?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 3, "creation_date": 1426107208, "post_id": 28997108, "comment_id": 46242367, "body": "You&#39;ve posted code that won&#39;t compile, that even if it did compile wouldn&#39;t actually show any problem, and even if it could show any problem, you haven&#39;t provided the input your program needs to show that problem."}, {"owner": {"reputation": 27, "user_id": 4651583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233c87c8ea3621d93d86b151afcca32d?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron Iggy Sutter", "link": "https://stackoverflow.com/users/4651583/aaron-iggy-sutter"}, "edited": false, "score": 1, "creation_date": 1426107607, "post_id": 28997108, "comment_id": 46242587, "body": "integer division has already been addressed here:  <a href=\"http://stackoverflow.com/questions/3602827/what-is-the-behavior-of-integer-division-in-c\" title=\"what is the behavior of integer division in c\">stackoverflow.com/questions/3602827/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 4512689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WVdEw.jpg?s=128&g=1", "display_name": "JoseMCabrera", "link": "https://stackoverflow.com/users/4512689/josemcabrera"}, "reply_to_user": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "edited": false, "score": 0, "creation_date": 1426107976, "post_id": 28997108, "comment_id": 46242809, "body": "@CarlNorum I figured out the problem. But why if Population_A is less than 16 will failed?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4512689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WVdEw.jpg?s=128&g=1", "display_name": "JoseMCabrera", "link": "https://stackoverflow.com/users/4512689/josemcabrera"}, "edited": false, "score": 0, "creation_date": 1426108019, "post_id": 28997152, "comment_id": 46242833, "body": "I figured out the problem. But why if Population_A is less than 16 will failed?"}], "owner": {"reputation": 8277, "user_id": 1682419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19B6c.png?s=128&g=1", "display_name": "Jerry101", "link": "https://stackoverflow.com/users/1682419/jerry101"}, "is_accepted": true, "score": 0, "last_activity_date": 1426107251, "creation_date": 1426107251, "answer_id": 28997152, "question_id": 28997108, "link": "https://stackoverflow.com/questions/28997108/whats-wrong-with-the-following-arithmetic-operation-c/28997152#28997152", "title": "What&#39;s wrong with the following arithmetic operation? C++", "body": "<p>If <code>Population_A</code> is in the range -16 .. 16, the integer multiply and divide will result in 0.</p>\n\n<p>If you want floating point division results rather than converting integer values to floats, change <code>6</code> to <code>6.0F</code> and <code>3</code> to <code>3.0F</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 4512689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WVdEw.jpg?s=128&g=1", "display_name": "JoseMCabrera", "link": "https://stackoverflow.com/users/4512689/josemcabrera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "closed_date": 1426107849, "accepted_answer_id": 28997152, "answer_count": 1, "score": -4, "last_activity_date": 1426107251, "creation_date": 1426107091, "question_id": 28997108, "link": "https://stackoverflow.com/questions/28997108/whats-wrong-with-the-following-arithmetic-operation-c", "closed_reason": "Duplicate", "title": "What&#39;s wrong with the following arithmetic operation? C++", "body": "<p>I'm just trying to do a simple arithmetic operation but it returns me the 0 value. Here's the code:</p>\n\n<pre><code> main(){\n\n long Population_A, Population_B; \n\n cin&gt;&gt;Population_A;\n cin&gt;&gt;Population_B;\n\n float Increase_A, Increase_B;\n\n Increase_A = (6*Population_A)/100; //Here is the problem because I receive 0.\n Increase_B = (3*Population_B)/100;\n\n }//main\n</code></pre>\n"}, {"tags": ["c++", "for-loop", "break"], "answers": [{"owner": {"reputation": 1038, "user_id": 2839862, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d874f8fa5e6480461f368400b9089a2f?s=128&d=identicon&r=PG", "display_name": "Teyras", "link": "https://stackoverflow.com/users/2839862/teyras"}, "is_accepted": false, "score": 0, "last_activity_date": 1426107589, "creation_date": 1426107589, "answer_id": 28997250, "question_id": 28996992, "link": "https://stackoverflow.com/questions/28996992/finding-prime-numbers-using-for-loops-in-c/28997250#28997250", "title": "Finding Prime Numbers using For Loops in C++", "body": "<p>You're breaking too soon :) when iDivisor is 1, iUserInput%iDivisor must equal zero, and the second condition never gets evaluated. Just swap the two if statements and you should be good.</p>\n"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "is_accepted": false, "score": 2, "last_activity_date": 1426108175, "last_edit_date": 1426108175, "creation_date": 1426107689, "answer_id": 28997288, "question_id": 28996992, "link": "https://stackoverflow.com/questions/28996992/finding-prime-numbers-using-for-loops-in-c/28997288#28997288", "title": "Finding Prime Numbers using For Loops in C++", "body": "<p>The following part:</p>\n\n<blockquote>\n<pre><code>if (iDivisor == 1)\n    cout &lt;&lt; iUserInput &lt;&lt; endl;\n</code></pre>\n</blockquote>\n\n<p>is at the wrong position. You need to put it <em>outside</em> of the inner loop:</p>\n\n<pre><code>for(;iUserInput &gt; 0; iUserInput--)\n{\n    int iDivisor = iUserInput - 1;\n    for (; iDivisor &gt; 0; iDivisor--)\n    {\n        if (iUserInput%iDivisor == 0)\n            break;\n    }\n    if (iDivisor == 1)\n        cout &lt;&lt; iUserInput &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Other observations:</p>\n\n<ul>\n<li><code>#include \"stdafx.h\"</code> is completely unnecessary here. Remove it.</li>\n<li><code>int _tmain()</code> is not standard. Make it <code>int main()</code> and make sure it compiles like this.</li>\n<li><code>iUserInput</code> is Hungarian Notation. Consider it a failed Microsoft experiment from the 90s which is completely useless in modern C++. Call the variable <code>userInput</code>.</li>\n<li>Changing the value of the <code>userInput</code> variable may hurt readability of the code. After all, the user input does not change after it has been entered. Consider counting down a copy of <code>userInput</code>, e.g. <code>for(int count = userInput; count &gt; 0; count--)</code>.</li>\n<li>Make your other <code>for</code> loop more compact, too: <code>for (int divisor = userInput - 1; divisor &gt; 0; divisor--)</code>.</li>\n<li>Perhaps too advanced for someone who really just started learning C++, but you should try to handle illegal user input, e.g. someone entering \"X\" instead of a number. You can check the state of <code>std::cin</code> after each input operation to see if the last operation succeeded or not. Otherwise your program may exhibit undefined behaviour.</li>\n</ul>\n"}, {"owner": {"reputation": 76, "user_id": 1147136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06f2ff37dde86295ae26db1a28894bc1?s=128&d=identicon&r=PG", "display_name": "sankalpn", "link": "https://stackoverflow.com/users/1147136/sankalpn"}, "is_accepted": false, "score": 0, "last_activity_date": 1426108875, "creation_date": 1426108875, "answer_id": 28997593, "question_id": 28996992, "link": "https://stackoverflow.com/questions/28996992/finding-prime-numbers-using-for-loops-in-c/28997593#28997593", "title": "Finding Prime Numbers using For Loops in C++", "body": "<p>Look at what order your if conditions are getting executed. When iDivisor reaches 1 you break instead of printing. Either \n1) swap your if conditions or \n2) modify inner loop to terminate when iDivisor reaches 1 and move second if condition outside inner for loop.</p>\n"}], "owner": {"reputation": 77, "user_id": 4660277, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/865320123524842/picture?type=large", "display_name": "Joey C.", "link": "https://stackoverflow.com/users/4660277/joey-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1031, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1426108875, "creation_date": 1426106717, "question_id": 28996992, "link": "https://stackoverflow.com/questions/28996992/finding-prime-numbers-using-for-loops-in-c", "title": "Finding Prime Numbers using For Loops in C++", "body": "<p>This is my first post here, so I hope I am doing everything correctly.  </p>\n\n<p>I have a bit of a problem with my most recent programming challenge.  The goal is to have the user input a number and have the program output all of the prime numbers between 0 and the number entered.  My strategy was to have a for loop run a simple check on every number from 1 to the number entered by dividing it by every preceding number until the loop reached 1.  If at any point in the check, the program encountered a number that divided into the number that the loop is currently on, that section of the loop was to \"break\" and continue on to the next number.  If the divisor reached 1 then the program would have successfully determined that nothing could divide into the original number evenly and output that number as being prime.  </p>\n\n<p>I am very new to programming, but I think it's a problem with how I'm using break.  When the program is compiled, it only prints the original number that was entered and nothing else.  However, I have checked to make sure that all of my integers and loops are working.  Any help regarding my aforementioned problem or if I can make my code more efficient or \"correct\" would be appreciated.  </p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n\nint _tmain()\n{\n    using namespace std;\n    int iUserInput;\n    cin &gt;&gt; iUserInput;\n\n    for(;iUserInput &gt; 0; iUserInput--)\n    {\n        int iDivisor = iUserInput - 1;\n        for (; iDivisor &gt; 0; iDivisor--)\n        {\n            if (iUserInput%iDivisor == 0)\n                break;\n            if (iDivisor == 1)\n                cout &lt;&lt; iUserInput &lt;&lt; endl;\n        }\n    }\n\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "namespaces"], "comments": [{"owner": {"reputation": 7880, "user_id": 3006544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e73a1c6d75a879f829ec8aacd1859e61?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan J", "link": "https://stackoverflow.com/users/3006544/ryan-j"}, "edited": false, "score": 0, "creation_date": 1426106768, "post_id": 28996944, "comment_id": 46242115, "body": "Did you try to use it in a C program? If so, what happened?"}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "reply_to_user": {"reputation": 7880, "user_id": 3006544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e73a1c6d75a879f829ec8aacd1859e61?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan J", "link": "https://stackoverflow.com/users/3006544/ryan-j"}, "edited": false, "score": 0, "creation_date": 1426107248, "post_id": 28996944, "comment_id": 46242393, "body": "@RyanJ Yes, I tried, it compiles and links well in both C++ and C. I haven&#39;t run it yet."}], "answers": [{"comments": [{"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1426108187, "post_id": 28997010, "comment_id": 46242935, "body": "An entity with C language linkage shall not be declared with the same name as a variable in global scope, unless both declarations denote the same entity;    ---- Is this a &quot;entity vs variable&quot; statement? I experimented with g++ 4.3.3 and it seems true. Conflict occurs only when I re-declare an global variable like &quot;extern int doSomething=1;&quot; but it&#39;s OK if I define another &quot;extern void doSomething(){}&quot; as long as it&#39;s not another extern C linkage."}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 3, "creation_date": 1426119513, "post_id": 28997010, "comment_id": 46247510, "body": "Your final statement in the first paragraph is wrong -- you CAN have another <code>doSomething</code> defined in some other namespace, as long as it is not <code>extern &quot;C&quot;</code>."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1426149719, "post_id": 28997010, "comment_id": 46256529, "body": "@ChrisDodd: Ah yes, that&#39;s what I meant. Edited. Thanks!"}], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": true, "score": 28, "last_activity_date": 1426149706, "last_edit_date": 1426149706, "creation_date": 1426106772, "answer_id": 28997010, "question_id": 28996944, "link": "https://stackoverflow.com/questions/28996944/extern-c-linkage-inside-c-namespace/28997010#28997010", "title": "extern &quot;C&quot; linkage inside C++ namespace?", "body": "<p>Your code works, but you should beware that all functions that have <code>extern \"C\"</code> linkage share the same space of names, but that is not to be confused with the C++ notion of \"namespace\": Your function is really <code>someNameSpace::doSomething</code>, but you cannot have any other <code>extern \"C\"</code> function with unqualified name <code>doSomething</code> in any other namespace.</p>\n\n<p>See 7.5/6:</p>\n\n<blockquote>\n  <p>At most one function with a particular name can have C language linkage. Two declarations for a function\n  with C language linkage with the same function name (ignoring the namespace names that qualify it) that\n  appear in different namespace scopes refer to the same function. Two declarations for a variable with C\n  language linkage with the same name (ignoring the namespace names that qualify it) that appear in different\n  namespace scopes refer to the same variable. An entity with C language linkage shall not be declared with\n  the same name as a variable in global scope, unless both declarations denote the same entity; no diagnostic is\n  required if the declarations appear in different translation units. A variable with C language linkage shall not\n  be declared with the same name as a function with C language linkage (ignoring the namespace names that\n  qualify the respective names); no diagnostic is required if the declarations appear in different translation\n  units. [<em>Note</em>: Only one definition for an entity with a given name with C language linkage may appear in\n  the program (see 3.2); this implies that such an entity must not be defined in more than one namespace\n  scope. \u2014 <em>end note</em>]</p>\n</blockquote>\n\n<p>Your company's or project's global style arbiters should be able to advise you on a suitable naming policy for your code base.</p>\n"}, {"owner": {"reputation": 411, "user_id": 6908891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ye7xV.png?s=128&g=1", "display_name": "Chajnik-U", "link": "https://stackoverflow.com/users/6908891/chajnik-u"}, "is_accepted": false, "score": 12, "last_activity_date": 1510110742, "last_edit_date": 1510110742, "creation_date": 1490419352, "answer_id": 43012858, "question_id": 28996944, "link": "https://stackoverflow.com/questions/28996944/extern-c-linkage-inside-c-namespace/43012858#43012858", "title": "extern &quot;C&quot; linkage inside C++ namespace?", "body": "<p>Just piece of code to illustrate behavior stated in Kerrek SB answer</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nnamespace C{\n    void Hello(){\n        std::cout&lt;&lt;\"Hello\"&lt;&lt;std::endl;\n    }\n    extern \"C\" void HelloThere(){\n        std::cout&lt;&lt;\"Hello There from extern \\\"C\\\"\"&lt;&lt;std::endl;\n    }\n}\n\nextern \"C\" void HelloThere();\n\nint main() {\n    C::Hello();\n    C::HelloThere(); //Compiles\n    //Hello(); &lt;--- does not compile\n    HelloThere(); //Also compiles and prints the same as C::HelloThere() !!!\n\n    return 0;\n}\n</code></pre>\n\n<p>Live at <a href=\"http://ideone.com/X26wfR\" rel=\"noreferrer\">http://ideone.com/X26wfR</a></p>\n"}, {"comments": [{"owner": {"reputation": 3029, "user_id": 1239685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57e2117ca06179184f05d9c385b1823b?s=128&d=identicon&r=PG", "display_name": "Dominick Pastore", "link": "https://stackoverflow.com/users/1239685/dominick-pastore"}, "edited": false, "score": 0, "creation_date": 1597077058, "post_id": 61094459, "comment_id": 112009379, "body": "Not sure if it was different at the time this answer was posted, but gcc seems to be emitting an error during compilation when I clicked the link (interestingly, at the assembly stage, which is I think the first time I&#39;ve ever seen an error in that stage of compilation)"}, {"owner": {"reputation": 3107, "user_id": 4131673, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/100000565112046/picture?type=large", "display_name": "jaskmar", "link": "https://stackoverflow.com/users/4131673/jaskmar"}, "reply_to_user": {"reputation": 3029, "user_id": 1239685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57e2117ca06179184f05d9c385b1823b?s=128&d=identicon&r=PG", "display_name": "Dominick Pastore", "link": "https://stackoverflow.com/users/1239685/dominick-pastore"}, "edited": false, "score": 0, "creation_date": 1597140536, "post_id": 61094459, "comment_id": 112030195, "body": "@DominickPastore you are right - edited the error message is very strange though. I&#39;ve edited the answer."}], "owner": {"reputation": 3107, "user_id": 4131673, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/100000565112046/picture?type=large", "display_name": "jaskmar", "link": "https://stackoverflow.com/users/4131673/jaskmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1597140461, "last_edit_date": 1597140461, "creation_date": 1586326968, "answer_id": 61094459, "question_id": 28996944, "link": "https://stackoverflow.com/questions/28996944/extern-c-linkage-inside-c-namespace/61094459#61094459", "title": "extern &quot;C&quot; linkage inside C++ namespace?", "body": "<p>In C++ ABI, namespaces have to be mangled. So this:</p>\n<pre><code>namespace foo\n{\n    void bar(int){}\n}\n</code></pre>\n<p>is translated more or less to such symbol:</p>\n<pre><code>foo::bar(int)\n</code></pre>\n<p>When you force the compiler to use C ABI, the similar symbol</p>\n<pre><code>namespace foo\n{\n    extern &quot;C&quot; void bazz(int){}\n}\n</code></pre>\n<p>after compilation looks like following:</p>\n<pre><code>bazz\n</code></pre>\n<p>You can see the difference in the godbolt:\n<a href=\"https://godbolt.org/z/BmVpSQ\" rel=\"nofollow noreferrer\">https://godbolt.org/z/BmVpSQ</a></p>\n<p>In C ABI there are no namespaces or argument list mangled with the function, so you can only have 1 such symbol in the whole code. Defining it twice:</p>\n<pre><code>namespace foo\n{\n    extern &quot;C&quot; void bazz(int){}\n}\n\nnamespace foo2\n{\n    extern &quot;C&quot; void bazz(int){}\n}\n\nint main()\n{\n    foo2::bazz(5);\n    return 0;\n}\n</code></pre>\n<p>...is illegal. <s>Surprisingly to me, gcc doesn't emmit compilation/linking error but runtime error</s> For some reason, gcc compiler emits very strange error:</p>\n<p><a href=\"https://wandbox.org/permlink/BiN0auna9klBg5GE\" rel=\"nofollow noreferrer\">https://wandbox.org/permlink/BiN0auna9klBg5GE</a></p>\n<p>The clang compiler emits just emits simple compilation error in such case:</p>\n<p><a href=\"https://wandbox.org/permlink/r5CUXm7OKePtG35L\" rel=\"nofollow noreferrer\">https://wandbox.org/permlink/r5CUXm7OKePtG35L</a></p>\n"}], "owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14463, "favorite_count": 6, "accepted_answer_id": 28997010, "answer_count": 3, "score": 28, "last_activity_date": 1597140461, "creation_date": 1426106539, "last_edit_date": 1426252290, "question_id": 28996944, "link": "https://stackoverflow.com/questions/28996944/extern-c-linkage-inside-c-namespace", "title": "extern &quot;C&quot; linkage inside C++ namespace?", "body": "<pre><code>namespace someNameSpace {\n    extern \"C\" void doSomething()\n        {\n             someOperations();\n        }\n}\n</code></pre>\n\n<p>I want to run <code>doSomething()</code> in both C++ and C environment.</p>\n\n<p>Is <code>someNameSpace</code> still encapsulating <code>doSomething()</code> if I expose it to <code>extern \"C\"</code> linkage?</p>\n\n<p>Is there a good way to share functions between C++ and C while avoiding polluting global namespace on C++ side?</p>\n\n<p><strong>Edit</strong>: Because this code is primarily used in C++ mode, while the C linkage is for test use only, I guess this is a better way to do it.</p>\n\n<pre><code>namespace someNameSpace {\n    #ifdef COMPILE_FOR_C_LINKAGE\n    extern \"C\"\n    #else\n    extern \"C++\"\n    #endif\n    { \n        void doSomething()\n            {\n                 someOperations();\n            }\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "memory", "struct"], "comments": [{"owner": {"reputation": 6675, "user_id": 875295, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/1rKE0.jpg?s=128&g=1", "display_name": "lezebulon", "link": "https://stackoverflow.com/users/875295/lezebulon"}, "reply_to_user": {"reputation": 15898, "user_id": 1155000, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8213d9cd920e864ce8ff1fdeefe4db5?s=128&d=identicon&r=PG", "display_name": "Daniel Kamil Kozar", "link": "https://stackoverflow.com/users/1155000/daniel-kamil-kozar"}, "edited": false, "score": 0, "creation_date": 1426106958, "post_id": 28996867, "comment_id": 46242229, "body": "@DanielKamilKozar Kamil Kozar : how so ? The answer below says it actually is"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1426107028, "post_id": 28996867, "comment_id": 46242266, "body": "You can do what you propose if and only if <code>p</code> contains a value obtained from converting a valid pointer to an object of type <code>A</code> to void pointer."}, {"owner": {"reputation": 10317, "user_id": 666785, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/NIzSh.jpg?s=128&g=1", "display_name": "sbabbi", "link": "https://stackoverflow.com/users/666785/sbabbi"}, "edited": false, "score": 0, "creation_date": 1426107740, "post_id": 28996867, "comment_id": 46242672, "body": "It will work on x86, but PowerPC and RISCs architectures in general will simply crash/&quot;alignfault&quot;. Dunno about other architectures. From the language point, I believe accessing a variable without the proper alignment is simply forbidden in c++."}, {"owner": {"reputation": 6675, "user_id": 875295, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/1rKE0.jpg?s=128&g=1", "display_name": "lezebulon", "link": "https://stackoverflow.com/users/875295/lezebulon"}, "reply_to_user": {"reputation": 10317, "user_id": 666785, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/NIzSh.jpg?s=128&g=1", "display_name": "sbabbi", "link": "https://stackoverflow.com/users/666785/sbabbi"}, "edited": false, "score": 0, "creation_date": 1426108162, "post_id": 28996867, "comment_id": 46242920, "body": "@sbabbi : thanks ! is there any way to know for sure if for a given architecture it will work ? I&#39;m specifically wondering about 64 bits windows / linux"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1426108461, "post_id": 28996867, "comment_id": 46243084, "body": "@lezebulon Have you considered testing it?"}, {"owner": {"reputation": 6675, "user_id": 875295, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/1rKE0.jpg?s=128&g=1", "display_name": "lezebulon", "link": "https://stackoverflow.com/users/875295/lezebulon"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1426108701, "post_id": 28996867, "comment_id": 46243213, "body": "@EJP : I have tested it with success on windows x86 / 64 bits, except I have no proof that it&#39;s supposed to be working. Also I&#39;m concerned about linux 64 bits"}, {"owner": {"reputation": 10317, "user_id": 666785, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/NIzSh.jpg?s=128&g=1", "display_name": "sbabbi", "link": "https://stackoverflow.com/users/666785/sbabbi"}, "edited": false, "score": 0, "creation_date": 1426111065, "post_id": 28996867, "comment_id": 46244381, "body": "@lezebulon Google/wikipedia for it."}, {"owner": {"reputation": 6675, "user_id": 875295, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/1rKE0.jpg?s=128&g=1", "display_name": "lezebulon", "link": "https://stackoverflow.com/users/875295/lezebulon"}, "reply_to_user": {"reputation": 10317, "user_id": 666785, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/NIzSh.jpg?s=128&g=1", "display_name": "sbabbi", "link": "https://stackoverflow.com/users/666785/sbabbi"}, "edited": false, "score": 0, "creation_date": 1426113119, "post_id": 28996867, "comment_id": 46245197, "body": "@sbabbi  : the purpose of my question is exactly to find this info. googling for it basically tells me &quot;its works&quot; without giving a reference"}, {"owner": {"reputation": 10317, "user_id": 666785, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/NIzSh.jpg?s=128&g=1", "display_name": "sbabbi", "link": "https://stackoverflow.com/users/666785/sbabbi"}, "edited": false, "score": 0, "creation_date": 1426115925, "post_id": 28996867, "comment_id": 46246300, "body": "@lezebulon Yeah sorry, I would have written an answer if I knew how to get the complete information :p"}, {"owner": {"reputation": 10317, "user_id": 666785, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/NIzSh.jpg?s=128&g=1", "display_name": "sbabbi", "link": "https://stackoverflow.com/users/666785/sbabbi"}, "edited": false, "score": 0, "creation_date": 1426116627, "post_id": 28996867, "comment_id": 46246586, "body": "@lezebulon It also depends on the actual required alignment size. For instance with arm you can load/store to an unaligned 4 byte address, but you can not load/store to unaligned 8 byte address."}], "answers": [{"comments": [{"owner": {"reputation": 6675, "user_id": 875295, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/1rKE0.jpg?s=128&g=1", "display_name": "lezebulon", "link": "https://stackoverflow.com/users/875295/lezebulon"}, "edited": false, "score": 0, "creation_date": 1426106935, "post_id": 28997002, "comment_id": 46242218, "body": "Indeed in my case I have a buffer of uint8_t. By safe, I mean is it guaranteed that I can store my structure at an unaligned adress and then read it back from this adress later on, while keeping the data integrity?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 6675, "user_id": 875295, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/1rKE0.jpg?s=128&g=1", "display_name": "lezebulon", "link": "https://stackoverflow.com/users/875295/lezebulon"}, "edited": false, "score": 0, "creation_date": 1426107505, "post_id": 28997002, "comment_id": 46242534, "body": "As long as the contents are not changed, you can read it many times.  You want to refrain from multiple accesses like this.  I recommend copying the bytes from the <code>uint8_t</code> into a properly aligned structure, then refer to the structured variable.  This will be more efficient than referring to the <code>uint8_t</code> buffer each time.  Also, beware of padding in a structure.  <i>The size of a structure may not be the sum of the size of the members.</i>  This is due to alignment padding."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1426173015, "post_id": 28997002, "comment_id": 46271676, "body": "The ARM Cortex M3 (common in microcontrollers) can handle 32-bit reads and writes of unaligned data, <i>but</i> its instructions that read/write multiple 32-bit words at once cannot.  If code receives <code>struct POINT {Int32 x,y;} *pt;</code> and performs <code>pt-&gt;x=23; pt-&gt;y=47;</code>, a smart compiler might load 32 and 47 into registers and then perform a two-register store.  One may thus end up with code that will seems to work regardless of pointer alignment, until one day the compiler decides to optimize things differently and things break."}], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": true, "score": 3, "last_activity_date": 1426107265, "last_edit_date": 1426107265, "creation_date": 1426106760, "answer_id": 28997002, "question_id": 28996867, "link": "https://stackoverflow.com/questions/28996867/how-portable-are-unaligned-read-write/28997002#28997002", "title": "how portable are unaligned read / write?", "body": "<p>Yes, you can cast a pointer to class A to a class B.  </p>\n\n<p>Essentially, you are telling the compiler to use stencil <code>class B</code> when referring to the memory location of the <code>class A</code> variable.  </p>\n\n<p>Generally, this is not safe because the values at the locations will have different meanings and positions.  </p>\n\n<p>Usually, this type of casting is used for interpreting a buffer of <code>uint8_t</code> as a structured object.  Another usage is when there is a <code>union</code>.  </p>\n\n<p>So the term <em>safe</em> depends on the context that the operation is used in.  </p>\n\n<p><strong>Edit 1:  Alignment</strong><br>\nMost modern processors can handle alignment issues.  The processor may require more operations to fetch the data, which will slow down the performance.  </p>\n\n<p>For example with a 16-bit processor, a 16-bit value aligned on an odd address will require two fetches (since it only fetches at event addresses):  </p>\n\n<pre><code>+----------+----------------------------+  \n|  address | value                      |  \n+----------+----------------------------+  \n|  16      |  N/A                       |  \n+----------+----------------------------+  \n|  17      | 1st 8 bits of 16-bit value |  \n+----------+----------------------------+  \n|  18      | 2nd 8 bits of 16-bit value |  \n+----------+----------------------------+  \n|  19      |  N/A                       |  \n+----------+----------------------------+  \n</code></pre>\n\n<p>Since the processor only fetches values at even addresses, fetching the value will require 2 fetches.  The first fetch at address 16 obtains the first 8 bits of the 16-bit variable.  The second fetch obtains the second 8 bits of the variable.  </p>\n\n<p>The processor also has to perform some operations to get the bits in the preferred order in one \"word\". These operations will also negatively affect the performance.  </p>\n"}], "owner": {"reputation": 6675, "user_id": 875295, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/1rKE0.jpg?s=128&g=1", "display_name": "lezebulon", "link": "https://stackoverflow.com/users/875295/lezebulon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 333, "favorite_count": 1, "accepted_answer_id": 28997002, "answer_count": 1, "score": 1, "last_activity_date": 1426107265, "creation_date": 1426106292, "last_edit_date": 1426107191, "question_id": 28996867, "link": "https://stackoverflow.com/questions/28996867/how-portable-are-unaligned-read-write", "title": "how portable are unaligned read / write?", "body": "<p>let's say I have a struct of type <code>A</code> that is POD, and a <code>void</code> pointer <code>p</code>.</p>\n\n<p>Can I safely cast <code>p</code> to a pointer to <code>A</code>, then read/write to the <code>A</code> structure pointed by <code>p</code> ?\nIs it guaranteed to work everytime, even if the alignment of <code>A</code> is 8 and p points to an odd memory adress? (worst case)</p>\n\n<p>I am not concerned about performance issues, I just want to know if it's supposed to work according to the standard and / or if it's portable enough on mainstream platforms.</p>\n\n<p>edit : I'm also interested to know if there's any difference depending on x86 / 64 bits architecture</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "c", "sockets", "network-programming", "packet"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1426107218, "post_id": 28996783, "comment_id": 46242371, "body": "I find no documentation for an address family <code>AF_LINK</code>.  The Linux docs for <code>getifaddrs()</code> do, however, say to expect one address for each interface having family <code>AF_PACKET</code> and carrying low-level details about the interface and its physical layer.  That may not apply if you&#39;re on a different platform."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1426107899, "post_id": 28996783, "comment_id": 46242756, "body": "Looking more deeply, it appears that OS X has an address family <code>AF_LINK</code>, perhaps inherited from BSD.  If that&#39;s where you&#39;re working then I don&#39;t know what to tell you, but do not confuse &quot;Mac[intosh]&quot; with the Media Access Control &quot;MAC&quot;."}, {"owner": {"reputation": 31, "user_id": 3002912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a457b2544207ee2164d0ac4e5e41219?s=128&d=identicon&r=PG&f=1", "display_name": "ankushkool", "link": "https://stackoverflow.com/users/3002912/ankushkool"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1426183728, "post_id": 28996783, "comment_id": 46278535, "body": "I got confused as there was not other option mentioning Ethernet or Link layer address. But I used AF_PACKET and it seems to work. Thanks!"}], "owner": {"reputation": 31, "user_id": 3002912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a457b2544207ee2164d0ac4e5e41219?s=128&d=identicon&r=PG&f=1", "display_name": "ankushkool", "link": "https://stackoverflow.com/users/3002912/ankushkool"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2600, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1426106033, "creation_date": 1426106033, "question_id": 28996783, "link": "https://stackoverflow.com/questions/28996783/af-link-not-defined-in-bits-socket-h-and-sys-socket-h", "title": "AF_LINK not defined in bits/socket.h and sys/socket.h", "body": "<p>I am writing a code to read the MAC address from the interface for listing the interface and it MAC address as I am not able to find the AF_LINK definition in either of the socket.h files.</p>\n\n<p>As per internet resources i should see below:</p>\n\n<pre><code>#define AF_LINK     18      /* Link layer interface */\n</code></pre>\n\n<p>But my bits/socket.h contains:</p>\n\n<pre><code>#define PF_ASH      18  /* Ash.  */\n.\n.\n#define AF_ASH      PF_ASH\n</code></pre>\n\n<p>Should I be using PF_ASH in place of AF_LINK?</p>\n\n<p>Here is the part of my code that uses AF_LINK:</p>\n\n<pre><code>    if ((family == AF_LINK) &amp;&amp; (ifa-&gt;ifa_name[0] == 'e')) {\n\n            //This is for extracting interface number from interface name// \n            char newi[3];\n            int i, j;\n            for (i=0, j=0; i &lt; strlen(ifa-&gt;ifa_name); i++) {\n                if (ifa-&gt;ifa_name[i] &gt;= '0' &amp;&amp; ifa-&gt;ifa_name[i] &lt;= '9') {\n                    newi[j++] = ifa-&gt;ifa_name[i];\n                }\n             }\n             newi[j] = '\\0';\n\n            if_num = atoi(newi);\n\n            printf(\"Interface %d : %d\\n\", k++, if_num);\n    }\n</code></pre>\n\n<p>Full code:</p>\n\n<pre><code>/*\n * ethernetsocket.c\n *\n *  Created on: Feb 25, 2015\n *      Author: tsp3859\n */\n\n#include &lt;arpa/inet.h&gt;\n#include &lt;linux/if_packet.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/ioctl.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;bits/socket.h&gt;\n#include &lt;net/if.h&gt;\n#include &lt;netinet/ether.h&gt;\n\n#include &lt;ifaddrs.h&gt;\n\n\n#define MY_DEST_MAC0    0xff\n#define MY_DEST_MAC1    0xff\n#define MY_DEST_MAC2    0xff\n#define MY_DEST_MAC3    0xff\n#define MY_DEST_MAC4    0xff\n#define MY_DEST_MAC5    0xff\n\n// Source Ethernet interface\n#define DEFAULT_InterFace   \"eth0\"\n#define DEFAULT_PayLoad     \"1.1.10\"\n\n// Allocating size to different containers\n#define MAX_FRAME_SIZE      1024\n#define MAX_PAYLD_SIZE      1000\n#define HEADER_SIZE         14\n\nint payLoad_Size = -1;\nint frame_Size = -1;\n\nint main(int argc, char *argv[]) {\n    int sockfd;\n    struct ifreq if_idx; // destination ethernet (optional)\n    struct ifreq if_mac; // destination mac address\n\n    int tx_len = 0;      // header counter\n    char ifName[IFNAMSIZ]; // interface name\n\n    uint8_t header[HEADER_SIZE]; // ethernet header\n    char dummy_Payload[MAX_PAYLD_SIZE];\n\n    int if_num; // interface number, used for genarating VID\n\n    /*\n     * Run as one of the following command\n     * 1.   ./a.out\n     * 2    ./a.out eth3\n     * 3.   ./a.out eth4 PayLoad\n     */\n\n    // Get Ethernet interface name from command line (optional)\n    if (argc &gt; 1) {\n\n        if (argc == 2) {\n\n            strcpy(ifName, argv[1]);\n            strcpy(dummy_Payload, DEFAULT_PayLoad);\n        }\n\n        if (argc == 3) {\n\n            strcpy(ifName, argv[1]);\n\n            if (strlen(argv[2]) &gt; 1000) {\n\n                memcpy(dummy_Payload, argv[2], MAX_PAYLD_SIZE);\n            } else\n                strcpy(dummy_Payload, argv[2]);\n        }\n    } else {\n\n        // Default case: All fields are optional\n        if (argc &lt; 2) {\n            strcpy(ifName, DEFAULT_InterFace);\n            strcpy(dummy_Payload, DEFAULT_PayLoad);\n        }\n    }\n\n    //Getting interface number\n    struct ifaddrs *ifaddr, *ifa;\n    int family, s, n;\n           if (getifaddrs(&amp;ifaddr) == -1) {\n               perror(\"getifaddrs\");\n               exit(EXIT_FAILURE);\n           }\n    int k = 1; // Interface SNo.\n    for (ifa = ifaddr, n = 0; ifa != NULL; ifa = ifa-&gt;ifa_next, n++) {\n               if (ifa-&gt;ifa_addr == NULL)\n                   continue;\n\n               family = ifa-&gt;ifa_addr-&gt;sa_family;\n\n\n        if ((family == AF_INET || family == AF_INET6) &amp;&amp; (ifa-&gt;ifa_name[0] == 'e')) {\n\n                char newi[3];\n\n                int i, j;\n                 for (i=0, j=0; i &lt; strlen(ifa-&gt;ifa_name); i++) {\n                    if (ifa-&gt;ifa_name[i] &gt;= '0' &amp;&amp; ifa-&gt;ifa_name[i] &lt;= '9') {\n                        newi[j++] = ifa-&gt;ifa_name[i];\n\n                        }\n                 }\n                 newi[j] = '\\0';\n\n                if_num = atoi(newi);\n                 printf(\"Interface %d : %d\\n\", k++, if_num);\n        }\n    }\n\n\n    // Setting frame size\n    payLoad_Size = strlen(dummy_Payload);\n\n\n    // Setting payload, contains VID\n    char payLoad[payLoad_Size];\n    //memcpy(payLoad,dummy_Payload,payLoad_Size);\n\n    int len=0;\n    payLoad[len++]=1;\n    payLoad[len++]=1;\n    payLoad[len]=10;\n\n    frame_Size = HEADER_SIZE + strlen(payLoad);\n    //printf(\"Payload size is %d\\n \", payLoad_Size);\n    printf(\"Frame size is %d\\n \", frame_Size);\n\n    printf(\"Payload size is %d\\n\\n \", strlen(payLoad));\n    payLoad_Size=strlen(payLoad);\n    // creating frame\n    uint8_t frame[frame_Size];\n\n    struct ether_header *eh = (struct ether_header *) header;\n    struct sockaddr_ll socket_address;\n\n    // Open RAW socket to send on\n    if ((sockfd = socket(AF_PACKET, SOCK_RAW, IPPROTO_RAW)) == -1) {\n        perror(\"Socket Error\");\n    }\n\n    memset(&amp;if_idx, 0, sizeof(struct ifreq));\n    strncpy(if_idx.ifr_name, ifName, IFNAMSIZ - 1);\n    if (ioctl(sockfd, SIOCGIFINDEX, &amp;if_idx) &lt; 0)\n        perror(\"SIOCGIFINDEX - Misprint Compatibility\");\n\n    memset(&amp;if_mac, 0, sizeof(struct ifreq));\n    strncpy(if_mac.ifr_name, ifName, IFNAMSIZ - 1);\n    if (ioctl(sockfd, SIOCGIFHWADDR, &amp;if_mac) &lt; 0)\n        perror(\n                \"SIOCGIFHWADDR - Either interface is not correct or disconnected\");\n\n    // Initializing the Ethernet Header\n    memset(header, 0, HEADER_SIZE);\n\n    // Print-test initial header\n    printf(\"Zeros: %02x:%02x:%02x:%02x:%02x:%02x   %02x:%02x:%02x:%02x:%02x:%02x    %02x:%02x\\n\",\n            header[0], header[1], header[2], header[3], header[4], header[5],\n            header[6], header[7], header[8], header[9], header[10], header[11],\n            header[12], header[13]);\n\n    /*\n     *  Ethernet Header - 14 bytes\n     *\n     *  6 bytes - Source MAC Address\n     *  6 bytes - Destination MAC Address\n     *  2 bytes - EtherType\n     *\n     */\n\n    eh-&gt;ether_shost[0] = ((uint8_t *) &amp;if_mac.ifr_hwaddr.sa_data)[0];\n    eh-&gt;ether_shost[1] = ((uint8_t *) &amp;if_mac.ifr_hwaddr.sa_data)[1];\n    eh-&gt;ether_shost[2] = ((uint8_t *) &amp;if_mac.ifr_hwaddr.sa_data)[2];\n    eh-&gt;ether_shost[3] = ((uint8_t *) &amp;if_mac.ifr_hwaddr.sa_data)[3];\n    eh-&gt;ether_shost[4] = ((uint8_t *) &amp;if_mac.ifr_hwaddr.sa_data)[4];\n    eh-&gt;ether_shost[5] = ((uint8_t *) &amp;if_mac.ifr_hwaddr.sa_data)[5];\n\n    eh-&gt;ether_dhost[0] = MY_DEST_MAC0;\n    eh-&gt;ether_dhost[1] = MY_DEST_MAC1;\n    eh-&gt;ether_dhost[2] = MY_DEST_MAC2;\n    eh-&gt;ether_dhost[3] = MY_DEST_MAC3;\n    eh-&gt;ether_dhost[4] = MY_DEST_MAC4;\n    eh-&gt;ether_dhost[5] = MY_DEST_MAC5;\n\n    eh-&gt;ether_type = htons(0x8010);\n\n    tx_len += sizeof(struct ether_header);\n\n    // Copying header to frame\n    memcpy(frame, header, 14);\n\n    // Copying payLoad to frame\n    //printf(\"Payload: %d\\n\", payLoad[1]);\n    memcpy(frame + 14, payLoad, strlen(payLoad));\n\n    // Printing initial frame\n    printf(\" Frame: %02x:%02x:%02x:%02x:%02x:%02x   %02x:%02x:%02x:%02x:%02x:%02x    %02x:%02x\\n\",\n            frame[0], frame[1], frame[2], frame[3], frame[4], frame[5],\n            frame[6], frame[7], frame[8], frame[9], frame[10], frame[11],\n            frame[12], frame[13]);\n\n    // Printing payLoad\n    printf(\"Payload: %d.%d.%d\\n\", frame[14],frame[15],frame[16]);\n\n    // Index of the network device\n    socket_address.sll_ifindex = if_idx.ifr_ifindex;\n\n    // Address length - 6 bytes\n    socket_address.sll_halen = ETH_ALEN;\n\n    // Destination MAC Address\n    socket_address.sll_addr[0] = MY_DEST_MAC0;\n    socket_address.sll_addr[1] = MY_DEST_MAC1;\n    socket_address.sll_addr[2] = MY_DEST_MAC2;\n    socket_address.sll_addr[3] = MY_DEST_MAC3;\n    socket_address.sll_addr[4] = MY_DEST_MAC4;\n    socket_address.sll_addr[5] = MY_DEST_MAC5;\n\n    // Send packet\n    if (sendto(sockfd, frame, tx_len + strlen(payLoad), 0,\n            (struct sockaddr*) &amp;socket_address, sizeof(struct sockaddr_ll)) &lt; 0)\n        printf(\"Send failed\\n\");\n\nfreeifaddrs(ifaddr);\nexit(EXIT_SUCCESS);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "pointers", "winapi", "function-pointers"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1426106396, "post_id": 28996696, "comment_id": 46241912, "body": "Calling convention could eventually give you grief. The actual function expectations how you&#39;re calling it are an obvious assumption. And &quot;... with passed arguments.&quot;, noting the <i>plurality</i> of that statement, is interesting. You&#39;re passing <i>one</i>. If you need more than that (i.e. you&#39;re expecting this to magically send <code>argv[3]...argv[argc-1]</code> as function arguments), this won&#39;t do it, and doing it right gets complicated quickly."}, {"owner": {"reputation": 11030, "user_id": 656346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WCIys.png?s=128&g=1", "display_name": "seva titov", "link": "https://stackoverflow.com/users/656346/seva-titov"}, "edited": false, "score": 0, "creation_date": 1426106487, "post_id": 28996696, "comment_id": 46241959, "body": "It is not clear what you mean by <code>if I could pass a void-pointer-list to the function-pointer</code>. If the function you are calling is defined as <b>... MyFunction(void *)</b>, then yes, you can call it like this, otherwise you would not be able to. Also, make sure it is labeled as <code>declspec(stdcall)</code>."}, {"owner": {"reputation": 153, "user_id": 3888200, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r7Ttb.jpg?s=128&g=1", "display_name": "h4x0r", "link": "https://stackoverflow.com/users/3888200/h4x0r"}, "edited": false, "score": 0, "creation_date": 1426106770, "post_id": 28996696, "comment_id": 46242118, "body": "I just looked for a way to get a command-line tool to call e.g. kernel32.dll and any of its function and pass arguments to it. I was hoping - as WhozCraig said - for a magic way to find the argument list from an imported function"}, {"owner": {"reputation": 153, "user_id": 3888200, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r7Ttb.jpg?s=128&g=1", "display_name": "h4x0r", "link": "https://stackoverflow.com/users/3888200/h4x0r"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1426107255, "post_id": 28996696, "comment_id": 46242398, "body": "@WhozCraig thanks for your comment. &quot;you&#39;re expecting this to magically send argv[3]...argv[argc-1] as function arguments), this won&#39;t do it&quot; is exactly what I was looking for (or at least a workaround for this)."}], "answers": [{"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": true, "score": 4, "last_activity_date": 1498584420, "last_edit_date": 1498584420, "creation_date": 1426120557, "answer_id": 28999985, "question_id": 28996696, "link": "https://stackoverflow.com/questions/28996696/c-pass-arguments-as-void-pointer-list-to-imported-function-from-loadlibrary/28999985#28999985", "title": "C Pass arguments as void-pointer-list to imported function from LoadLibrary()", "body": "<p>You need to cast the function pointer returned by <code>LoadLibrary</code> to one with the right argument types before calling it.  One way to manage it is to have a number call-adaptor functions that do the right thing for every possible function type you might want to call:</p>\n\n<pre><code>void Call_II(void (*fn_)(), char **args) {\n    void (*fn)(int, int) = (void (*)(int, int))fn_;\n    fn(atoi(args[0]), atoi(args[1]));\n}\nvoid Call_IS(void (*fn_)(), char **args) {\n    void (*fn)(int, char *) = (void (*)(int, char *))fn_;\n    fn(atoi(args[0]), args[1]);\n}\n...various more functions\n</code></pre>\n\n<p>Then you take the pointer you got from <code>GetProcAddress</code> and the additional arguments and pass them to the correct <code>Call_X</code> function:</p>\n\n<pre><code>void* (*generic_function)();\n\ndll = LoadLibraryA(argv[1]);\n\n//argv[2] = \"DoStuff\"\ngeneric_function = GetProcAddress(dll, argv[2]);\n\n//argv[3] = 4, argv[4] = 7, argv[5] = NULL\n\nCall_II(generic_function, &amp;argv[3]);\n</code></pre>\n\n<p>The problem is that you need to know what the type of the function you're getting the pointer for is and call the appropriate adaptor function.  Which generally means making a table of function name/adaptors and doing a lookup in it.</p>\n\n<p>The related problem is that there's no function analogous to <code>GetProcAddress</code> that will tell you the argument types for a function in the library -- that information simply isn't stored anywhere accessable in the dll.</p>\n"}, {"comments": [{"owner": {"reputation": 153, "user_id": 3888200, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r7Ttb.jpg?s=128&g=1", "display_name": "h4x0r", "link": "https://stackoverflow.com/users/3888200/h4x0r"}, "edited": false, "score": 0, "creation_date": 1501012379, "post_id": 44781829, "comment_id": 77587138, "body": "Very interesting approach! I didn&#39;t think of interfacing the calling/argument-list-passing procedure. I will definitiely look further into this. Thanks for your sophisticated and well detailed explanation/answer. Good job!"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1521094554, "post_id": 44781829, "comment_id": 85587811, "body": "This assumes a calling convention where a large object like <code>struct { ... } sarglistlist;</code> is passed by value by copying the whole thing to the stack, right?  (So it&#39;s in the same place the function is expecting regular integer / pointer / FP args in a stack-args calling convention that doesn&#39;t use any register args). As well as using register args, the Windows x86-64 calling convention passes large object by reference, so this doesn&#39;t work even for args 5...infinity in that convention. (See <a href=\"https://stackoverflow.com/questions/49283616/how-to-set-function-arguments\" title=\"how to set function arguments\">stackoverflow.com/questions/49283616/&hellip;</a> for this question in 64-bit)"}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1521117888, "post_id": 44781829, "comment_id": 85601283, "body": "@PeterCordes I don&#39;t understand your comment, too much in too little space. Reading linked to post and <a href=\"https://msdn.microsoft.com/en-us/library/ms235286.aspx\" rel=\"nofollow noreferrer\">Overview of x64 Calling Conventions</a> it appears that the 64 bit ABI using the <code>__fastcall</code> specifier by default <a href=\"https://msdn.microsoft.com/en-us/library/984x0h58.aspx\" rel=\"nofollow noreferrer\">Argument Passing and Naming Conventions</a> and <a href=\"https://software.intel.com/en-us/node/682402\" rel=\"nofollow noreferrer\">software.intel.com/en-us/node/682402</a> so the x64 argument passing uses registers and not the stack. Wondering about <code>va_arg</code> implementation I found this <a href=\"https://groups.google.com/forum/#!topic/gnu.gcc/PC6xIUSZlr4\" rel=\"nofollow noreferrer\">groups.google.com/forum/#!topic/gnu.gcc/PC6xIUSZlr4</a>"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1521118036, "post_id": 44781829, "comment_id": 85601372, "body": "My point was that some stack-args calling conventions could decide to pass <code>xx2.arglist</code> by hidden reference, so this answer depends not only on a pure stack-args calling convention, but on pass-by-value of large aggregates working by copying the whole thing onto the stack.  And that&#39;s why / how it <i>does</i> work for 32-bit Windows, in case anyone was wondering."}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1521118510, "post_id": 44781829, "comment_id": 85601689, "body": "@PeterCordes I have added a note to the post about x64 ABI. thank you for bringing this to my attention."}], "owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "is_accepted": false, "score": 2, "last_activity_date": 1521120161, "last_edit_date": 1521120161, "creation_date": 1498570825, "answer_id": 44781829, "question_id": 28996696, "link": "https://stackoverflow.com/questions/28996696/c-pass-arguments-as-void-pointer-list-to-imported-function-from-loadlibrary/44781829#44781829", "title": "C Pass arguments as void-pointer-list to imported function from LoadLibrary()", "body": "<p>A library DLL contains the object code for the functions that are part of the library along with some additional information to allow the DLL to be usable.</p>\n\n<p>However a library DLL does not contain the actual type information needed to determine the specific argument list and types for the functions contained in the library DLL. The main information in a library DLL is: (1) a list of the functions that the DLL exports along with the address information that will connect a call of a function to the actual function binary code and (2) a list of any required DLLs that the functions in the library DLL use.</p>\n\n<p>You can actually open a library DLL in a text editor, I suggest a small one, and scan through the arcane symbols of the binary code until you reach the section that contains the list of functions in the library DLL as well as other required DLLs.</p>\n\n<p>So a library DLL contains the bare minimum information needed to (1) find a particular function in the library DLL so that it can be invoked and (2) a list of other needed DLLs that the functions in the library DLL depend on.</p>\n\n<p>This is different from a COM object which normally does have type information in order to support the ability to do what is basically reflection and explore the COM object's services and how those services are accessed. You can do this with Visual Studio and other IDEs which generate a list of COM objects installed and allow you to load a COM object and explore it. Visual Studio also has a tool that will generate the source code files that provide the stubs and include file for accessing the services and methods of a COM object.</p>\n\n<p>However a library DLL is different from a COM object and all the additional information provided with a COM object is not available from a library DLL. Instead a library DLL package is normally made up of (1) the library DLL itself, (2) a .lib file that contains the linkage information for the library DLL along with the stubs and functionality to satisfy the linker when building your application which uses the library DLL, and (3) an include file with the function prototypes of the functions in the library DLL.</p>\n\n<p>So you create your application by calling the functions which reside in the library DLL but using the type information from the include file and linking with the stubs of the associated .lib file. This procedure allows Visual Studio to automate much of the work required to use a library DLL.</p>\n\n<p>Or you can hand code the <code>LoadLibrary()</code> and the building of a table of the functions in the library DLL using <code>GetProcAddress()</code>. By doing hand coding all you really need are the function prototypes of the functions in the library DLL which you then can type in yourself and the library DLL itself. You are in effect doing the work by hand that the Visual Studio compiler does for you if you are using the .lib library stubs and include file.</p>\n\n<p>If you know the actual function name and the function prototype of a function in a library DLL then what you could do is to have your command line utility require the following information:</p>\n\n<ul>\n<li>the name of the function to be called as a text string on the command\nline</li>\n<li>the list of the arguments to be used as a series of text strings on the command line</li>\n<li>an additional parameter that describes the function prototype</li>\n</ul>\n\n<p>This is similar to how functions in the C and C++ runtime which accept variable argument lists with unknown parameter types work. For instance the <code>printf()</code> function which prints a list of argument values has a format string followed by the arguments to be printed. The <code>printf()</code> function uses the format string to determine the types of the various arguments, how many arguments to expect, and what kinds of value transformations to do.</p>\n\n<p>So if your utility had a command line something like the following:</p>\n\n<pre><code>dofunc \"%s,%d,%s\" func1 \"name of \" 3 \" things\"\n</code></pre>\n\n<p>And the library DLL had a function whose prototype looked like:</p>\n\n<pre><code>void func1 (char *s1, int i, int j);\n</code></pre>\n\n<p>then the utility would dynamically generate the function call by transforming the character strings of the command line into the actual types needed for the function to be called.</p>\n\n<p>This would work for simple functions that take Plain Old Data types however more complicated types such as <code>struct</code> type argument would require more work as you would need some kind of a description of the <code>struct</code> along with some kind of argument description perhaps similar to JSON.</p>\n\n<p><strong>Appendix I: A simple example</strong></p>\n\n<p>The following is the source code for a Visual Studio Windows console application that I ran in the debugger. The command arguments in the Properties was <code>pif.dll PifLogAbort</code> which caused a library DLL from another project, pif.dll, to be loaded and then the function <code>PifLogAbort()</code> in that library to be invoked.</p>\n\n<p><strong>NOTE:</strong> <em>The following example depends on a stack based argument passing convention as is used with most x86 32 bit compilers. Most compilers also allow for a calling convention to be specified other than stack based argument passing such as the <code>__fastcall</code> modifier of Visual Studio. Also as pointed out in the comments, the default for x64 and 64 bit Visual Studio is to use the <code>__fastcall</code> convention by default so that function arguments are passed in registers and not on the stack. See <a href=\"https://msdn.microsoft.com/en-us/library/ms235286.aspx\" rel=\"nofollow noreferrer\">Overview of x64 Calling Conventions</a> in the Microsoft MSDN. See as well the comments and discussion in <a href=\"https://stackoverflow.com/questions/12371450/how-are-variable-arguments-implemented-in-gcc\">How are variable arguments implemented in gcc?\n</a>.</em></p>\n\n<p>Notice how the argument list to the function <code>PifLogAbort()</code> is built as a structure that contains an array. The argument values are put into the array of a variable of the <code>struct</code> and then the function is called passing the entire <code>struct</code> by value. What this does is to push a copy of the array of parameters onto the stack and then calls the function. The <code>PifLogAbort()</code> function sees the stack based on its argument list and processes the array elements as individual arguments or parameters.</p>\n\n<pre><code>// dllfunctest.cpp : Defines the entry point for the console application.\n//\n\n#include \"stdafx.h\"\n\ntypedef struct {\n    UCHAR *myList[4];\n} sarglist;\n\ntypedef void ((*libfunc) (sarglist q));\n/*\n *  do a load library to a DLL and then execute a function in it.\n *\n * dll name.dll \"funcname\"\n*/\nint _tmain(int argc, _TCHAR* argv[])\n{\n    HMODULE  dll = LoadLibrary(argv[1]);\n    if (dll == NULL) return 1;\n\n    // convert the command line argument for the function name, argv[2] from\n    // a TCHAR to a standard CHAR string which is what GetProcAddress() requires.\n    char  funcname[256] = {0};\n    for (int i = 0; i &lt; 255 &amp;&amp; argv[2][i]; i++) {\n        funcname[i] = argv[2][i];\n    }\n\n    libfunc  generic_function = (libfunc) GetProcAddress(dll, funcname);\n    if (generic_function == NULL) return 2;\n\n    // build the argument list for the function and then call the function.\n    // function prototype for PifLogAbort() function exported from the library DLL\n    // is as follows:\n    // VOID PIFENTRY PifLogAbort(UCHAR *lpCondition, UCHAR *lpFilename, UCHAR *lpFunctionname, ULONG ulLineNo);\n    sarglist xx = {{(UCHAR *)\"xx1\", (UCHAR *)\"xx2\", (UCHAR *)\"xx3\", (UCHAR *)1245}};\n\n    generic_function(xx);\n\n    return 0;\n}\n</code></pre>\n\n<p>This simple example illustrates some of the technical hurdles that must be overcome. You will need to know how to translate the various parameter types into the proper alignment in a memory area which is then pushed onto the stack.</p>\n\n<p>The interface to this example function is remarkably homogeneous in that most of the arguments are <code>unsigned char</code> pointers with the exception of the last which is an <code>int</code>. With a 32 bit executable all four of these variable types have the same length in bytes. With a more varied list of types in the argument list you will need to have an understanding as to how your compiler aligns parameters when it is pushing the arguments onto the stack before doing the call.</p>\n\n<p><strong>Appendix II: Extending the simple example</strong></p>\n\n<p>Another possibility is to have a set of helper functions along with a different version of the <code>struct</code>. The <code>struct</code> provides a memory area to create a copy of the necessary stack and the help functions are used to build the copy.</p>\n\n<p>So the <code>struct</code> and its helper functions may look like the following.</p>\n\n<pre><code>typedef struct {\n    UCHAR myList[128];\n} sarglist2;\n\ntypedef struct {\n    int   i;\n    sarglist2 arglist;\n} sarglistlist;\n\ntypedef void ((*libfunc2) (sarglist2 q));\n\nvoid pushInt (sarglistlist *p, int iVal)\n{\n    *(int *)(p-&gt;arglist.myList + p-&gt;i) = iVal;\n    p-&gt;i += sizeof(int);\n}\n\nvoid pushChar (sarglistlist *p, unsigned char cVal)\n{\n    *(unsigned char *)(p-&gt;arglist.myList + p-&gt;i) = cVal;\n    p-&gt;i += sizeof(unsigned char);\n}\n\nvoid pushVoidPtr (sarglistlist *p, void * pVal)\n{\n    *(void * *)(p-&gt;arglist.myList + p-&gt;i) = pVal;\n    p-&gt;i += sizeof(void *);\n}\n</code></pre>\n\n<p>And then the <code>struct</code> and helper functions would be used to build the argument list like the following after which the function from the library DLL is invoked with the copy of the stack provided:</p>\n\n<pre><code>sarglistlist xx2 = {0};\npushVoidPtr (&amp;xx2, \"xx1\");\npushVoidPtr (&amp;xx2, \"xx2\");\npushVoidPtr (&amp;xx2, \"xx3\");\npushInt (&amp;xx2, 12345);\n\nlibfunc2  generic_function2 = (libfunc2) GetProcAddress(dll, funcname);\ngeneric_function2(xx2.arglist);\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 3888200, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r7Ttb.jpg?s=128&g=1", "display_name": "h4x0r", "link": "https://stackoverflow.com/users/3888200/h4x0r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2062, "favorite_count": 0, "accepted_answer_id": 28999985, "answer_count": 2, "score": 6, "last_activity_date": 1521120161, "creation_date": 1426105738, "last_edit_date": 1498568271, "question_id": 28996696, "link": "https://stackoverflow.com/questions/28996696/c-pass-arguments-as-void-pointer-list-to-imported-function-from-loadlibrary", "title": "C Pass arguments as void-pointer-list to imported function from LoadLibrary()", "body": "<p>The problem I have is that I want to create a generic command line application that can be used to load a library DLL and then call a function in the library DLL. The function name is specified on the command line with the arguments also provided on the utility command line.</p>\n\n<p>I can access the external function from a DLL dynamically loaded using the <code>LoadLibrary()</code> function. Once the library is loaded I can obtain a pointer to the function using <code>GetProcAddress()</code> I want to call the function with the arguments specified on the command line.</p>\n\n<p>Can I pass a void-pointer-list to the function-pointer which I got returned by the <code>LoadLibrary()</code> function similar to the example below?</p>\n\n<p>To keep the example code simple, I deleted the error-checking. Is there a way to get something like this working:</p>\n\n<pre>\n    //Somewhere in another dll\n    int DoStuff(int a, int b)\n    {\n        return a + b;\n    }\n</pre>\n\n<pre>\n    int main(int argc, char **argv)\n    {\n        void *retval;\n        void *list = argv[3];\n        HMODULE dll;\n        void* (*generic_function)(void*);\n\n        dll = LoadLibraryA(argv[1]);\n\n        //argv[2] = \"DoStuff\"\n        generic_function = GetProcAddress(dll, argv[2]);\n\n        //argv[3] = 4, argv[4] = 7, argv[5] = NULL\n        retval = generic_function(list);\n    }\n</pre>\n\n<p>If I forgot to mention necessary information, please let me know.\nThanks in advance</p>\n"}, {"tags": ["c++", "c++11", "boost"], "comments": [{"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 0, "creation_date": 1426105824, "post_id": 28996651, "comment_id": 46241562, "body": "What is the first warning / error?"}, {"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 0, "creation_date": 1426105865, "post_id": 28996651, "comment_id": 46241597, "body": "Also, perhaps a duplicate of <a href=\"http://stackoverflow.com/questions/27126177/boost-spirit-kwd-parser-in-visual-studio-2013\" title=\"boost spirit kwd parser in visual studio 2013\">stackoverflow.com/questions/27126177/&hellip;</a>"}, {"owner": {"reputation": 2284, "user_id": 2549876, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4012ce359fbdc0baf6863bcb94bce6f5?s=128&d=identicon&r=PG", "display_name": "Hector", "link": "https://stackoverflow.com/users/2549876/hector"}, "reply_to_user": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 0, "creation_date": 1426107440, "post_id": 28996651, "comment_id": 46242496, "body": "@BillLynch: warning C4180: qualifier applied to function type has no meaning"}, {"owner": {"reputation": 2284, "user_id": 2549876, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4012ce359fbdc0baf6863bcb94bce6f5?s=128&d=identicon&r=PG", "display_name": "Hector", "link": "https://stackoverflow.com/users/2549876/hector"}, "reply_to_user": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 0, "creation_date": 1426107666, "post_id": 28996651, "comment_id": 46242626, "body": "I tried adding <code>#define BOOST_RESULT_OF_USE_TR1</code> and <code>#define _SCL_SECURE_NO_WARNINGS</code> at the beginning but no luck."}], "answers": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 0, "last_activity_date": 1426112712, "creation_date": 1426112712, "answer_id": 28998543, "question_id": 28996651, "link": "https://stackoverflow.com/questions/28996651/compiling-boostspirit-with-visual-studio/28998543#28998543", "title": "Compiling boost::spirit with Visual Studio", "body": "<p>Try using</p>\n\n<pre><code>#define BOOST_SPIRIT_USE_PHOENIX_V3\n</code></pre>\n\n<p>and one of</p>\n\n<pre><code>#define BOOST_RESULT_OF_USE_DECLTYPE // or\n#define BOOST_RESULT_OF_USE_TR1 // or\n#define BOOST_RESULT_OF_USE_TR1_WITH_DECLTYPE_FALLBACK\n</code></pre>\n\n<blockquote>\n  <p><strong>Note</strong> It's crucial to define these before first inclusion of <em>any</em> boost header. This includes any <code>stdafx.h</code> if you have one</p>\n</blockquote>\n\n<p>If any of the combinations result in success, report the bug at the <a href=\"http://boost.2283326.n4.nabble.com/spirit-general-f2672582.html\" rel=\"nofollow\">spirit-general</a> mailing list or <a href=\"http://www.boost.org/doc/libs/1_57_0/doc/html/circular_buffer/tickets.html\" rel=\"nofollow\">Boost Trac</a>. It could well be a missing/inappropriate compiler feature detection thing (I'm wondering about <code>constexpr</code>, or other features where MSVC might be starting support for things)</p>\n"}], "owner": {"reputation": 2284, "user_id": 2549876, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4012ce359fbdc0baf6863bcb94bce6f5?s=128&d=identicon&r=PG", "display_name": "Hector", "link": "https://stackoverflow.com/users/2549876/hector"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 831, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1426112712, "creation_date": 1426105603, "question_id": 28996651, "link": "https://stackoverflow.com/questions/28996651/compiling-boostspirit-with-visual-studio", "title": "Compiling boost::spirit with Visual Studio", "body": "<p>I am trying to compile version 1.57 of boost's spirit using Visual Studio 2013 update 4. The following simple program yields many errors and warnings.</p>\n\n<pre><code>#include &lt;boost/config/warning_disable.hpp&gt;\n#include &lt;boost/spirit/include/qi.hpp&gt;\nint main()\n{return 0;}\n</code></pre>\n\n<p><strong>What is going on?</strong></p>\n\n<p>The compiler command line has the following options:</p>\n\n<blockquote>\n  <p>/GS /W3 /Zc:wchar_t /Zi /Gm /Od /sdl /Fd\"x64\\Debug\\vc120.pdb\" /fp:precise /D \"WIN32\" /D \"_DEBUG\" /D \"_CONSOLE\" /D \"_LIB\" /D \"_UNICODE\" /D \"UNICODE\" /errorReport:prompt /WX- /Zc:forScope /RTC1 /Gd /MTd /Fa\"x64\\Debug\\\" /EHsc /nologo /Za /Fo\"x64\\Debug\\\" /Fp\"x64\\Debug\\Grammar.pch\" </p>\n</blockquote>\n\n<p>The most common warnings are</p>\n\n<blockquote>\n  <p>Warning   1   warning C4180: qualifier applied to function type has no meaning; ignored   X:.libraries\\boost\\boost\\proto\\transform\\detail\\preprocessed\\pass_through_impl.hpp 40  1   Grammar</p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p>Warning   79  warning C4224: nonstandard extension used : formal parameter 'expr' was previously defined as a type    X:.libraries\\boost\\boost\\proto\\debug.hpp   126 1   Grammar</p>\n</blockquote>\n\n<p>Some of the errors are:</p>\n\n<blockquote>\n  <p>Error 195 error C2146: syntax error : missing ',' before identifier 'expr_param'  X:.libraries\\boost\\boost\\proto\\transform\\arg.hpp   179 1   Grammar\n  Error   196 error C2065: 'expr_param' : undeclared identifier   X:.libraries\\boost\\boost\\proto\\transform\\arg.hpp   179 1   Grammar\n  Error   197 error C2977: 'boost::proto::result_of::value' : too many template arguments X:.libraries\\boost\\boost\\proto\\transform\\arg.hpp   179 1   Grammar\n  Error   198 error C2955: 'boost::proto::result_of::value' : use of class template requires template argument list   X:.libraries\\boost\\boost\\proto\\transform\\arg.hpp   179 1   Grammar\n  Error   199 error C2061: syntax error : identifier 'expr_param' X:.libraries\\boost\\boost\\proto\\transform\\arg.hpp   182 1   Grammar\n  Error   200 error C2061: syntax error : identifier 'expr_param' X:.libraries\\boost\\boost\\proto\\transform\\detail\\preprocessed\\make.hpp  69  1   Grammar\n  Error   201 error C2061: syntax error : identifier 'expr_param' X:.libraries\\boost\\boost\\proto\\transform\\when.hpp  73  1   Grammar\n  Error   202 error C2146: syntax error : missing ';' before identifier 'type'    X:.libraries\\boost\\boost\\proto\\detail\\preprocessed\\poly_function_funop.hpp 14  1   Grammar\n  Error   203 error C4430: missing type specifier - int assumed. Note: C++ does not support default-int   X:.libraries\\boost\\boost\\proto\\detail\\preprocessed\\poly_function_funop.hpp 14  1   Grammar\n  Error   204 error C2039: 'type' : is not a member of 'boost::tr1_result_of (Env)>'   X:.libraries\\boost\\boost\\proto\\transform\\env.hpp   367 1   Grammar\n  Error   205 error C2504: 'type' : base class undefined  X:.libraries\\boost\\boost\\proto\\transform\\env.hpp   368 1   Grammar\n  Error   206 error C2039: 'value' : is not a member of 'boost::proto::result_of::has_env_var'    X:.libraries\\boost\\boost\\proto\\transform\\when.hpp  189 1   Grammar\n  Error   207 error C2975: 'C' : invalid template argument for 'boost::mpl::eval_if_c', expected compile-time constant expression X:.libraries\\boost\\boost\\proto\\transform\\when.hpp  192 1   Grammar\n  Error   208 error C2039: 'type' : is not a member of 'boost::mpl::eval_if_c,boost::proto::result_of::env_var>' X:.libraries\\boost\\boost\\proto\\transform\\when.hpp  192 1   Grammar\n  Error   209 error C2146: syntax error : missing ',' before identifier 'type'    X:.libraries\\boost\\boost\\proto\\transform\\when.hpp  193 1   Grammar\n  Error   210 error C2065: 'type' : undeclared identifier X:.libraries\\boost\\boost\\proto\\transform\\when.hpp  193 1   Grammar\n  Error   211 error C2977: 'boost::remove_reference' : too many template arguments    X:.libraries\\boost\\boost\\proto\\transform\\when.hpp  193 1   Grammar\n  Error   212 error C2955: 'boost::remove_reference' : use of class template requires template argument list  X:.libraries\\boost\\boost\\proto\\transform\\when.hpp  193 1   Grammar\n  Error   213 error C1903: unable to recover from previous error(s); stopping compilation X:.libraries\\boost\\boost\\proto\\transform\\when.hpp  194 1   Grammar</p>\n</blockquote>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 1, "creation_date": 1426105810, "post_id": 28996649, "comment_id": 46241550, "body": "It crashes saying what? Returning which code? Try running it from command prompt to see the error msg."}, {"owner": {"reputation": 93, "user_id": 4618348, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/96d85998d6b90f705702d896d55b52eb?s=128&d=identicon&r=PG&f=1", "display_name": "Boyyett", "link": "https://stackoverflow.com/users/4618348/boyyett"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1426107100, "post_id": 28996649, "comment_id": 46242301, "body": "No error. It just crashed on visual studio. Also, R.Sahu fixed it now."}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 4618348, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/96d85998d6b90f705702d896d55b52eb?s=128&d=identicon&r=PG&f=1", "display_name": "Boyyett", "link": "https://stackoverflow.com/users/4618348/boyyett"}, "edited": false, "score": 0, "creation_date": 1426106842, "post_id": 28996859, "comment_id": 46242172, "body": "My bad. Is my way of passing the head pointer to the function correct though?"}, {"owner": {"reputation": 93, "user_id": 4618348, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/96d85998d6b90f705702d896d55b52eb?s=128&d=identicon&r=PG&f=1", "display_name": "Boyyett", "link": "https://stackoverflow.com/users/4618348/boyyett"}, "edited": false, "score": 0, "creation_date": 1426106927, "post_id": 28996859, "comment_id": 46242212, "body": "Actually, that was the whole problem. The program works fine now."}, {"owner": {"reputation": 93, "user_id": 4618348, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/96d85998d6b90f705702d896d55b52eb?s=128&d=identicon&r=PG&f=1", "display_name": "Boyyett", "link": "https://stackoverflow.com/users/4618348/boyyett"}, "edited": false, "score": 0, "creation_date": 1426107284, "post_id": 28996859, "comment_id": 46242420, "body": "Why do you think <code>sNode* temp = node-&gt;next;</code> will make temp point to NULL? It doesn&#39;t."}], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1426111230, "last_edit_date": 1426111230, "creation_date": 1426106271, "answer_id": 28996859, "question_id": 28996649, "link": "https://stackoverflow.com/questions/28996649/logic-correct-but-program-crashes/28996859#28996859", "title": "Logic Correct but Program Crashes", "body": "<p>This is a problem.</p>\n\n<pre><code>if (node == 0) {\n    head = node;\n    return;\n}\n</code></pre>\n\n<p>You just made the list an empty list. That should be (prefer to use <code>nullptr</code> or <code>NULL</code> instead of <code>0</code> for pointers):</p>\n\n<pre><code>if (node == nullptr || node-&gt;next == nullptr ) {\n    head = node;\n    return;\n}\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 4618348, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/96d85998d6b90f705702d896d55b52eb?s=128&d=identicon&r=PG&f=1", "display_name": "Boyyett", "link": "https://stackoverflow.com/users/4618348/boyyett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1426111230, "creation_date": 1426105597, "question_id": 28996649, "link": "https://stackoverflow.com/questions/28996649/logic-correct-but-program-crashes", "title": "Logic Correct but Program Crashes", "body": "<p>NOTE: This question is not about reversing a linked list using recursion but about why it crashes. It's more about dynamic memory really.</p>\n\n<p>I'm implementing a linked list and want to have a function in it that recursively reverses it.</p>\n\n<pre><code>struct sNode {\n    int data;\n    sNode* next;\n    sNode(int x) {\n        data = x;\n        next = 0;\n    }\n    sNode(int x, sNode* n) {\n        data = x;\n        next = n;\n    }\n};\n\nclass SLL {\n    public:\n        SLL() : head(0) {}\n        sNode* getHead() { return head;}\n        void reverseRec(sNode*); // Reverse the list using recursion;\n    private:\n        sNode* head;\n};\n\nvoid SLL::reverseRec(sNode* node) {\n    // Reverse the list using recursion\n\n    if (node == 0) {\n        head = node;\n        return;\n    }\n    reverseRec(node-&gt;next);\n    sNode* temp = node-&gt;next;\n    temp-&gt;next = node;\n    node-&gt;next = 0;\n}\n\nint main() {\n    SLL l1;\n    l1.addAtEnd(1);\n    l1.addAtBeg(2);\n    l1.addAtPos(3, 2);\n    l1.reverseRec(l1.getHead());\n    return 0;\n}\n</code></pre>\n\n<p>The program just crashes. Please help me figure out the reason. I think it's got to do with the arguments of the function. </p>\n"}, {"tags": ["c++", "optimization", "while-loop"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1426105108, "post_id": 28996457, "comment_id": 46241150, "body": "No code, psychic debugging skills needed."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1426105399, "post_id": 28996457, "comment_id": 46241328, "body": "<code>pipeReady</code> should probably something like a semaphore or condition variable. <code>volatile</code> doesn&#39;t save you, if you should get that idea BTW."}, {"owner": {"reputation": 308, "user_id": 4656131, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3ae9b3ba517cf26b9e1bb63f7e55c8e9?s=128&d=identicon&r=PG&f=1", "display_name": "Andr&#233; T.", "link": "https://stackoverflow.com/users/4656131/andr%c3%a9-t"}, "edited": false, "score": 0, "creation_date": 1426105411, "post_id": 28996457, "comment_id": 46241337, "body": "I can add a lot of code, but according to the debugger everything&#39;s working fine prior to getting stuck in those loop, so I don&#39;t really know what code to add since this program consists of thousands of lines.  I know having it as a bool isn&#39;t the best solution, but is it the cause to this?"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1426105490, "post_id": 28996457, "comment_id": 46241385, "body": "Make <code>pipeReady</code> an <code>std::atomic&lt;bool&gt;</code> ."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1426105554, "post_id": 28996457, "comment_id": 46241425, "body": "@Andr&#233;T. Obviously you can&#39;t access that flag concurrently from various threads. You either need a <code>std::atomic&lt;bool&gt; pipeReady;</code> or any other appropriate synchronization mechanism for safe access to this flag."}], "answers": [{"comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1426105913, "post_id": 28996676, "comment_id": 46241619, "body": "<code>volatile</code> does not (by the standard, VC has an extension) do what you think it does."}, {"owner": {"reputation": 308, "user_id": 4656131, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3ae9b3ba517cf26b9e1bb63f7e55c8e9?s=128&d=identicon&r=PG&f=1", "display_name": "Andr&#233; T.", "link": "https://stackoverflow.com/users/4656131/andr%c3%a9-t"}, "edited": false, "score": 0, "creation_date": 1426106024, "post_id": 28996676, "comment_id": 46241676, "body": "Both this and using std::atomic&lt;bool&gt; solved it. It seems like using an atomic is the standard way, so I&#39;ll do that. Thanks for the answers; this is something I&#39;ve been trying to solve for many hours, but haven&#39;t been able to!"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1426106066, "post_id": 28996676, "comment_id": 46241702, "body": "In the example above, the <code>volatile</code> keyword would indicate that the value of <code>pipe_ready</code> is determined outside of the function that the variable is declared in."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 308, "user_id": 4656131, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3ae9b3ba517cf26b9e1bb63f7e55c8e9?s=128&d=identicon&r=PG&f=1", "display_name": "Andr&#233; T.", "link": "https://stackoverflow.com/users/4656131/andr%c3%a9-t"}, "edited": false, "score": 0, "creation_date": 1426106099, "post_id": 28996676, "comment_id": 46241725, "body": "@Andr&#233;T.: If the answer was useful, please click on the checkmark."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1426106814, "post_id": 28996676, "comment_id": 46242151, "body": "@ThomasMatthews &quot;This makes volatile objects suitable for communication with a signal handler, but not with another thread of execution&quot;. Source: <a href=\"http://en.cppreference.com/w/cpp/language/cv\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/cv</a>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1426107716, "post_id": 28996676, "comment_id": 46242655, "body": "@RichardCritten: The volatile value could point to a hardware register, such as the status register in a UART.    The UART will change the value of the status register when it receives a character or transmits one.  Thus the variable is volatile since the hardware is changing the value unbeknownst to the program."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1426108379, "post_id": 28996676, "comment_id": 46243038, "body": "@ThomasMatthews Completly true. But the OP wrote: &quot;and I have another thread which handles pipe connections and after opening a connection it&#39;ll follow a callback to a function which sets pipeReady to true.&quot;, which is thread not hardware.  So your answer is not correct for the question (except for MSVC which extends the meaning of volatile)."}], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": true, "score": 0, "last_activity_date": 1426105685, "creation_date": 1426105685, "answer_id": 28996676, "question_id": 28996457, "link": "https://stackoverflow.com/questions/28996457/c-optimization-causing-weird-behavior-stuck-in-a-while-loop-which-doesnt-ha/28996676#28996676", "title": "C++: Optimization causing weird behavior (stuck in a while-loop which doesn&#39;t have it&#39;s condition met)", "body": "<h2>Weird Debugger Behavior</h2>\n\n<p>The weird behavior of the debugger skipping lines is due to the optimizations by the compiler.  </p>\n\n<p>When the compiler generates new code or eliminates code, the source line numbers will not align.  This confuses the IDE and shows the Debugger jumping around.  For example, if there are multiple returns from a function, the compiler may issue a branch to the first one for the other returns.  This causes a step to the one return statement, which is not according to the source code.  </p>\n\n<h2>Elimination of empty loops.</h2>\n\n<p>The compiler may eliminate empty loops like this one:  </p>\n\n<pre><code> while (!pipe_ready)  \n {\n }\n</code></pre>\n\n<p>Because the variable is not changed inside the loop.  </p>\n\n<p><strong>To fix this, declare the variable <code>pipe_ready</code> as <code>volatile</code>.</strong>  </p>\n"}], "owner": {"reputation": 308, "user_id": 4656131, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3ae9b3ba517cf26b9e1bb63f7e55c8e9?s=128&d=identicon&r=PG&f=1", "display_name": "Andr&#233; T.", "link": "https://stackoverflow.com/users/4656131/andr%c3%a9-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 28996676, "answer_count": 1, "score": -3, "last_activity_date": 1426105685, "creation_date": 1426104932, "last_edit_date": 1426105248, "question_id": 28996457, "link": "https://stackoverflow.com/questions/28996457/c-optimization-causing-weird-behavior-stuck-in-a-while-loop-which-doesnt-ha", "title": "C++: Optimization causing weird behavior (stuck in a while-loop which doesn&#39;t have it&#39;s condition met)", "body": "<p>I've had this problem for a few days now, and haven't found the cause of it. Whenever I build and run my program in debug mode, everything runs fine, however, release mode (with optimization, it works fine without) is a whole other story.</p>\n\n<p>How the program works is that I have one thread waiting for a member variable called (bool) pipeReady to be set to true before continuing, and I have another thread which handles pipe connections and after opening a connection it'll follow a callback to a function which sets pipeReady to true.</p>\n\n<p>When following this by stepping through the program, it acts extremely weird (skips lines, jumps over lines, goes back a few lines), but in the end everything seems to work like it should, except for <em>one</em> thing: <a href=\"http://puu.sh/gwbQU/cfaf6cf940.png\" rel=\"nofollow\">this</a>. It stays in that loop even though it's conditions aren't met. I know that this might not be the best way to handle this, but it <em>should</em> work, shouldn't it? How can this happen? What could lead to something like this? And why does it only happen when optimization is on?</p>\n\n<p>Thanks, Andr\u00e9</p>\n\n<p>If the link is broken in the future, it shows the debugger being stuck on this line:</p>\n\n<pre><code>while(!pipeReady){};\n</code></pre>\n\n<p>While pipeReady's value is true according to the debugger.</p>\n"}, {"tags": ["c++", "class", "point"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1426105154, "post_id": 28996410, "comment_id": 46241181, "body": "Please post the exact copy of the code you have tried. The posted code won&#39;t compile. <code>Cube(double height, double volume) : Square(sideLength, Xint, Yint)</code> is not right."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1426105985, "post_id": 28996410, "comment_id": 46241649, "body": "&#39;Polyhedron&#39; is too much to type in for a class name:)"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1426106081, "post_id": 28996410, "comment_id": 46241710, "body": "class regularPolyhedrons ?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1426106118, "post_id": 28996410, "comment_id": 46241737, "body": "<i>&quot;Can anyone point out whatever logical errors I might have ...&quot;</i> <i><code>class Cube : public Square ...</code></i> A <code>Cube</code> isn&#39;t a <code>Square</code>, that&#39;s fundamentally wrong!"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1426106496, "post_id": 28996410, "comment_id": 46241964, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 - It&#39;s a question from an alternate dimension."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1426106683, "post_id": 28996410, "comment_id": 46242073, "body": "@MartinJames inb4 <i>from outer space</i>? ;-) ..."}], "answers": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 0, "last_activity_date": 1426107311, "creation_date": 1426107311, "answer_id": 28997172, "question_id": 28996410, "link": "https://stackoverflow.com/questions/28996410/point-square-and-cube-program-help-on-c/28997172#28997172", "title": "Point, square, and cube program help on C++", "body": "<blockquote>\n  <p><em>\"Can anyone point out whatever logical errors I might have or if I have the access specification and relationship between the classes wrong?\"</em></p>\n</blockquote>\n\n<p>Well, from our well known 3-dimensional geometry a <em>cube</em> is made up from exactly 6 <em>squares</em>.</p>\n\n<p>So how do you think inheriting a <code>Cube</code> class from a <code>Square</code> actually should work well?</p>\n\n<p>You can easily define a <code>Cube</code> class by means of a fixed <code>Point</code> (e.g. the upper, left, front corner) and a fixed size of the edge length.</p>\n\n<p>If you really want and need to, you can add a convenience function for your <code>Cube</code> class, that returns all of the 6 <code>Squares</code> it consist of in 3 dimensional space:</p>\n\n<pre><code> class Cube {\n public:\n     Cube(const Point&amp; upperLeftFrontCorner, double edgeLength);\n     std::array&lt;Square,6&gt; getSides() const;\n };\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 4552717, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-q75vmQcgbjw/AAAAAAAAAAI/AAAAAAAAEaI/DBEUc32fLlg/photo.jpg?sz=128", "display_name": "DexFenik", "link": "https://stackoverflow.com/users/4552717/dexfenik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1237, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1539326194, "creation_date": 1426104761, "last_edit_date": 1539326194, "question_id": 28996410, "link": "https://stackoverflow.com/questions/28996410/point-square-and-cube-program-help-on-c", "title": "Point, square, and cube program help on C++", "body": "<p>I've been writing a program for CS class that's supposed to get the X and Y coordinates from the user, as well as the length of a square and the height of the cube, and it should then calculate the area of the square and the surface area and volume of the cube (plus some coordinates stuff but that's not a pressing issue right now)</p>\n\n<p>I've written the test file and it compiled successfully, but I've been getting very long answers for the square and cube properties that are obviously wrong. Can anyone point out whatever logical errors I might have or if I have the access specification and relationship between the classes wrong?</p>\n\n<p>Point.h</p>\n\n<pre><code>class Point\n{\nprotected:\n    double Xint, Yint;\npublic:\n    Point();\n    void setX(double);\n    void setY(double);\n    double getX() const;\n    double getY() const;\n};\n</code></pre>\n\n<p>Point.ccp</p>\n\n<pre><code>Point::Point()\n{\n    Xint = 0;\n    Yint = 0;\n}\n\nvoid Point::setX(double x)\n{ Xint = x; }\n\nvoid Point::setY(double y)\n{ Yint = y; }\n\ndouble Point::getX() const\n{ return Xint; }\n\ndouble Point::getY() const\n{ return Yint; }\n</code></pre>\n\n<p>Square.h</p>\n\n<pre><code>#include \"Point.h\"\nclass Square : public Point\n{\nprotected:\n    Point lowerLeft;\n    double sideLength;\npublic:\n    Square(double sideLength, double x, double y) : Point()\n    {\n        sideLength = 0.0;\n        x = 0.0;\n        y = 0.0;\n    }\n    void setLowerLeft(double, double);\n    void setSideLength(double);\n    double getSideLength() const;\n    double getSquareArea() const;\n};\n</code></pre>\n\n<p>Square.ccp</p>\n\n<pre><code>#include \"Square.h\"\nvoid Square::setLowerLeft(double x, double y)\n{\n    lowerLeft.setX(x);\n    lowerLeft.setY(y);\n}\n\nvoid Square::setSideLength(double SL)\n{ sideLength = SL; }\n\ndouble Square::getSideLength() const\n{ return sideLength; }\n\n// Calculate the area of square\ndouble Square::getSquareArea() const\n{ return sideLength * sideLength; }\n</code></pre>\n\n<p>Cube.h</p>\n\n<pre><code>#include \"Square.h\"\nclass Cube : public Square\n{\nprotected:\n    double height;\n    double volume;\npublic:\n    Cube(double height, double volume) : Square(sideLength, Xint, Yint)\n    {\n        height = 0.0;\n        volume = 0.0;\n    }\n    double getSurfaceArea() const;\n    double getVolume() const;\n};\n</code></pre>\n\n<p>Cube.ccp</p>\n\n<pre><code>#include \"Cube.h\"\n\n// Redefine GetSquareArea to calculate the cube's surface area\ndouble Cube::getSurfaceArea() const\n{ return Square::getSquareArea() * 6; }\n\n// Calculate the volume\ndouble Cube::getVolume() const\n{ return getSquareArea() * height; }\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1426104065, "post_id": 28996182, "comment_id": 46240580, "body": "Please, post a <b>minimal</b> example of your problem, not the entire program."}, {"owner": {"reputation": 2181, "user_id": 4027338, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/gzGPW.png?s=128&g=1", "display_name": "marsh", "link": "https://stackoverflow.com/users/4027338/marsh"}, "edited": false, "score": 0, "creation_date": 1426104229, "post_id": 28996182, "comment_id": 46240681, "body": "It looks like the method is indeed missing. Are you sure you got all the code?"}], "answers": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 0, "last_activity_date": 1426104337, "creation_date": 1426104337, "answer_id": 28996293, "question_id": 28996182, "link": "https://stackoverflow.com/questions/28996182/checkers-game-check-move-function/28996293#28996293", "title": "Checkers Game ... check_move function?", "body": "<pre><code>bool check_move();\n</code></pre>\n\n<p>is a <a href=\"http://en.wikipedia.org/wiki/Forward_declaration\" rel=\"nofollow\">forward declaration</a> the function must be defined in some other file. \nYou should know where the code is from and ask for the complete source.</p>\n"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1426104414, "creation_date": 1426104414, "answer_id": 28996321, "question_id": 28996182, "link": "https://stackoverflow.com/questions/28996182/checkers-game-check-move-function/28996321#28996321", "title": "Checkers Game ... check_move function?", "body": "<p>In the middle of the <code>do_leap</code> function we see:</p>\n\n<pre><code> cout &lt;&lt; \"Column: \";\n cin &gt;&gt; bool check_move()\n {\n        //it checks if a non-king piece is moving backwards.\n        if (board[row1][column1] != 'B' &amp;&amp; board[row1][column1] != 'R')\n        {\n</code></pre>\n\n<p>The second line of this quote is a syntax error; it looks like someone has copy-pasted the <code>check_move</code> function into the middle of the <code>do_leap</code> function (perhaps a misclick in an editor with mouse copy-paste functionality).</p>\n\n<p>There's nothing apparent after the misplaced <code>check_move</code> function that would fit after <code>cin &gt;&gt;</code> , so it looks like this paste operation has actually \"cut\" out some of the original code.  You will need to find the original code from another source (or if you're feeling brave, extricate <code>check_move</code> and try to rewrite the missing parts of <code>do_leap</code>).</p>\n"}, {"owner": {"reputation": 103812, "user_id": 320726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02041b18199678d1f02e6d5040dbb907?s=128&d=identicon&r=PG", "display_name": "6502", "link": "https://stackoverflow.com/users/320726/6502"}, "is_accepted": false, "score": 0, "last_activity_date": 1426104427, "creation_date": 1426104427, "answer_id": 28996325, "question_id": 28996182, "link": "https://stackoverflow.com/questions/28996182/checkers-game-check-move-function/28996325#28996325", "title": "Checkers Game ... check_move function?", "body": "<p>This source code is apparently corrupted.</p>\n\n<p>The <code>check_move</code> function is declared in the middle of another function...</p>\n\n<pre><code>        cout &lt;&lt; \"Column: \";\n        cin &gt;&gt; bool check_move()\n        {\n           ...\n</code></pre>\n\n<p>this is not valid C++.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 4648287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ffebc3cd5ad78a4045581dd0d5b5886?s=128&d=identicon&r=PG&f=1", "display_name": "jritzeku", "link": "https://stackoverflow.com/users/4648287/jritzeku"}, "edited": false, "score": 0, "creation_date": 1426182794, "post_id": 28996338, "comment_id": 46278038, "body": "I selected and moved piece based on row/column but keeps reading &quot;ILLEGAL MOVE&quot;..."}], "owner": {"reputation": 5812, "user_id": 735425, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/x7BUU.png?s=128&g=1", "display_name": "ssell", "link": "https://stackoverflow.com/users/735425/ssell"}, "is_accepted": false, "score": 0, "last_activity_date": 1426104468, "creation_date": 1426104468, "answer_id": 28996338, "question_id": 28996182, "link": "https://stackoverflow.com/questions/28996182/checkers-game-check-move-function/28996338#28996338", "title": "Checkers Game ... check_move function?", "body": "<p>Not sure where you got your source, but the full source of the program can be found here with the missing method: </p>\n\n<p><a href=\"http://runnable.com/U-_XgNndbURbbgx-/c%2B%2B-checkers-game\" rel=\"nofollow\">http://runnable.com/U-_XgNndbURbbgx-/c%2B%2B-checkers-game</a></p>\n\n<pre><code>bool check_move()\n{\n    //it checks if a non-king piece is moving backwards.\n    if (board[row1][column1] != 'B' &amp;&amp; board[row1][column1] != 'R')\n    {\n        if ((turn == 'B' &amp;&amp; row2 &lt; row1) || (turn == 'R' &amp;&amp; row2 &gt; row1))\n        {\n            leap = false;\n            return false;\n        }\n    }\n\n    //It checks if the location the piece is moving to is already taken.\n    if (board[row2][column2] != ' ')\n    {\n        leap = false;\n        return false;\n    }\n\n    //It checks if location entered by the user contains a piece to be moved.\n    if (board[row1][column1] == ' ')\n    {\n        leap = false;\n        return false;\n    }\n\n    //It checks if the piece isn't moving diagonally.\n    if (column1 == column2 || row1 == row2)\n    {\n        leap = false;\n        return false;\n    }\n\n    //It checks if the piece is moving by more than 1 column and only 1 row\n    if ((column2 &gt; column1 + 1 || column2 &lt; column1 - 1) &amp;&amp; (row2 == row1 +1 || row2 == row1 - 1))\n    {\n        leap = false;\n        return false;\n    }\n\n    //It checks if the piece is leaping.\n    if (row2 &gt; row1 + 1 || row2 &lt; row1 - 1)\n    {\n        //It checks if the piece is leaping too far.\n        if (row2 &gt; row1 + 2 || row2 &lt; row1 - 2)\n        {\n            leap = false;\n            return false;\n        }\n\n        //It checks if the piece isn't moving by exactly 2 columns\n        if (column2 != column1 + 2 &amp;&amp; column2 != column1 - 2)\n        {\n            leap = false;\n            return false;\n        }\n\n        //It checks if the piece is leaping over another piece.\n        if (row2 &gt; row1 &amp;&amp; column2 &gt; column1)\n        {\n            if (board[row2 - 1][column2 - 1] == ' ')\n            {\n                leap = false;\n                return false;\n            }\n        }\n        else if (row2 &gt; row1 &amp;&amp; column2 &lt; column1)\n        {\n            if (board[row2 - 1][column2 + 1] == ' ')\n            {\n                leap = false;\n                return false;\n            }\n        }\n        else if (row2 &lt; row1 &amp;&amp; column2 &gt; column1)\n        {\n            if (board[row2 + 1][column2 - 1] == ' ')\n            {\n                leap = false;\n                return false;\n            }\n        }\n        else if (row2 &lt; row1 &amp;&amp; column2 &lt; column1)\n        {\n            if (board[row2 + 1][column2 + 1] == ' ')\n            {\n                leap = false;\n                return false;\n            }\n        }\n\n        leap = true;\n        return true;\n    }\n\n    leap = false;\n    return true;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4648287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ffebc3cd5ad78a4045581dd0d5b5886?s=128&d=identicon&r=PG&f=1", "display_name": "jritzeku", "link": "https://stackoverflow.com/users/4648287/jritzeku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 5647, "favorite_count": 0, "answer_count": 4, "score": -2, "last_activity_date": 1426104468, "creation_date": 1426103897, "question_id": 28996182, "link": "https://stackoverflow.com/questions/28996182/checkers-game-check-move-function", "title": "Checkers Game ... check_move function?", "body": "<p>Trying to run this program but having understanding the check_move function. I believe it was made to make sure there isn't a board piece there already...making move illegal. \nIt was declared as a function but however I cannot find the definition/implementation. Program tries to call the function using \n    \"while (check_move() == false)\" in the void input(). A bit lost....can someone help?</p>\n\n<pre><code>//This is a 2 player checker game\n//\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nchar board[8][8] =\n{\n    {' ', 'b', ' ', 'b', ' ', 'b', ' ', 'b'},\n    {'b', ' ', 'b', ' ', 'b', ' ', 'b', ' '},\n    {' ', 'b', ' ', 'b', ' ', 'b', ' ', 'b'},\n    {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},\n    {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},\n    {'r', ' ', 'r', ' ', 'r', ' ', 'r', ' '},\n    {' ', 'r', ' ', 'r', ' ', 'r', ' ', 'r'},\n    {'r', ' ', 'r', ' ', 'r', ' ', 'r', ' '},\n};\n\nchar turn = 'B';\nbool leap;\nbool game_running = true;\nint row1, row2, column1, column2;\n\nvoid display_board();// \nvoid input();//\nbool check_move();//where is the \nvoid move();\nvoid do_leap();\nvoid king();\nvoid game_over();\n\nint main()\n{\n    cout &lt;&lt; \"***CHECKER GAME***\\n\";\n    cout &lt;&lt; \"Player 1 [b]\\n\";\n    cout &lt;&lt; \"Player 2 [r]\\n\\n\";\n    cout &lt;&lt; \"Multiple leaps are supported.\\n\";\n    cout &lt;&lt; \"A capital letter represents a king piece.\\n\";\n    cout &lt;&lt; \"NOTE: Rows and columns are counted starting from 0, not 1.\\n\";\n    cout &lt;&lt; \"&lt;------COLUMNS------&gt;\\n\";\n    cout &lt;&lt; \"^\\n\";\n    cout &lt;&lt; \"|\\n\";\n    cout &lt;&lt; \"|\\n\";\n    cout &lt;&lt; \"|\\n\";\n    cout &lt;&lt; \"ROWS\\n\";\n    cout &lt;&lt; \"|\\n\";\n    cout &lt;&lt; \"|\\n\";\n    cout &lt;&lt; \"|\\n\";\n    cout &lt;&lt; \"v\\n\\n\";\n    cout &lt;&lt; \"NOTE: Resize your console screen so that this line fits on the screen:\\n\";\n    cout &lt;&lt; \"_____________________________________________________________________________________\\n\\n\";\n    cout &lt;&lt; \"Press enter to begin...\";\n    cin.get();//This waits for the user to press enter before continuing\n\n    while (game_running)//game_running was initialzed to true so will run\n    {\n        display_board();//function is called to display board\n\n        if (turn == 'B')//was initialzed to 'B'line 19\n        {\n            cout &lt;&lt; \"--Player 1 [B]--\\n\";//says player 1 turn\n        }\n        else if (turn == 'R')\n        {\n            cout &lt;&lt; \"--Player 2 [R]--\\n\";\n        }\n        //funcitons called\n        input();\n        move();\n        king();\n        game_over();\n    }\n\n    if (turn == 'B')\n    {\n        cout &lt;&lt; endl &lt;&lt; endl &lt;&lt; \"Player 2 [Red] wins!!!\\n\";\n    }\n    else if (turn == 'R')\n    {\n        cout &lt;&lt; endl &lt;&lt; endl &lt;&lt; \"Player 1 [Black] wins!!!\\n\";\n    }\n\n    cout &lt;&lt; \"GAME OVER!\\n\";\n}\n\nvoid display_board()//board displayed is similar to tic tac toe except its bigger, has empty spaces\n{\n    cout &lt;&lt; \"==================================================================================\\n\\n\\n\\n\";\n    cout &lt;&lt; \"       0         1         2         3         4         5         6         7     \\n\";\n    cout &lt;&lt; \"  _________________________________________________________________________________\\n\";\n    cout &lt;&lt; \"  |         |         |         |         |         |         |         |         |\\n\";\n    cout &lt;&lt; \"  |         |         |         |         |         |         |         |         |\\n\";\n    cout &lt;&lt; \"0 |    \" &lt;&lt; board[0][0] &lt;&lt; \"    |    \" &lt;&lt; board[0][1] &lt;&lt; \"    |    \" &lt;&lt; board[0][2] &lt;&lt; \"    |    \"  &lt;&lt; board[0][3] &lt;&lt; \"    |    \" &lt;&lt; board[0][4] &lt;&lt; \"    |    \" &lt;&lt; board[0][5] &lt;&lt; \"    |    \" &lt;&lt; board[0][6] &lt;&lt; \"    |    \" &lt;&lt; board[0][7] &lt;&lt; \"    |\\n\";\n    cout &lt;&lt; \"  |         |         |         |         |         |         |         |         |\\n\";\n    cout &lt;&lt; \"  |_________|_________|_________|_________|_________|_________|_________|_________|\\n\";\n    cout &lt;&lt; \"  |         |         |         |         |         |         |         |         |\\n\";\n    cout &lt;&lt; \"  |         |         |         |         |         |         |         |         |\\n\";\n    cout &lt;&lt; \"1 |    \" &lt;&lt; board[1][0] &lt;&lt; \"    |    \" &lt;&lt; board[1][1] &lt;&lt; \"    |    \" &lt;&lt; board[1][2] &lt;&lt; \"    |    \"  &lt;&lt; board[1][3] &lt;&lt; \"    |    \" &lt;&lt; board[1][4] &lt;&lt; \"    |    \" &lt;&lt; board[1][5] &lt;&lt; \"    |    \" &lt;&lt; board[1][6] &lt;&lt; \"    |    \" &lt;&lt; board[1][7] &lt;&lt; \"    |\\n\";\n    cout &lt;&lt; \"  |         |         |         |         |         |         |         |         |\\n\";\n    cout &lt;&lt; \"  |_________|_________|_________|_________|_________|_________|_________|_________|\\n\";\n    cout &lt;&lt; \"  |         |         |         |         |         |         |         |         |\\n\";\n    cout &lt;&lt; \"  |         |         |         |         |         |         |         |         |\\n\";\n    cout &lt;&lt; \"2 |    \" &lt;&lt; board[2][0] &lt;&lt; \"    |    \" &lt;&lt; board[2][1] &lt;&lt; \"    |    \" &lt;&lt; board[2][2] &lt;&lt; \"    |    \"  &lt;&lt; board[2][3] &lt;&lt; \"    |    \" &lt;&lt; board[2][4] &lt;&lt; \"    |    \" &lt;&lt; board[2][5] &lt;&lt; \"    |    \" &lt;&lt; board[2][6] &lt;&lt; \"    |    \" &lt;&lt; board[2][7] &lt;&lt; \"    |\\n\";\n    cout &lt;&lt; \"  |         |         |         |         |         |         |         |         |\\n\";\n    cout &lt;&lt; \"  |_________|_________|_________|_________|_________|_________|_________|_________|\\n\";\n    cout &lt;&lt; \"  |         |         |         |         |         |         |         |         |\\n\";\n    cout &lt;&lt; \"  |         |         |         |         |         |         |         |         |\\n\";\n    cout &lt;&lt; \"3 |    \" &lt;&lt; board[3][0] &lt;&lt; \"    |    \" &lt;&lt; board[3][1] &lt;&lt; \"    |    \" &lt;&lt; board[3][2] &lt;&lt; \"    |    \"  &lt;&lt; board[3][3] &lt;&lt; \"    |    \" &lt;&lt; board[3][4] &lt;&lt; \"    |    \" &lt;&lt; board[3][5] &lt;&lt; \"    |    \" &lt;&lt; board[3][6] &lt;&lt; \"    |    \" &lt;&lt; board[3][7] &lt;&lt; \"    |\\n\";\n    cout &lt;&lt; \"  |         |         |         |         |         |         |         |         |\\n\";\n    cout &lt;&lt; \"  |_________|_________|_________|_________|_________|_________|_________|_________|\\n\";\n    cout &lt;&lt; \"  |         |         |         |         |         |         |         |         |\\n\";\n    cout &lt;&lt; \"  |         |         |         |         |         |         |         |         |\\n\";\n    cout &lt;&lt; \"4 |    \" &lt;&lt; board[4][0] &lt;&lt; \"    |    \" &lt;&lt; board[4][1] &lt;&lt; \"    |    \" &lt;&lt; board[4][2] &lt;&lt; \"    |    \"  &lt;&lt; board[4][3] &lt;&lt; \"    |    \" &lt;&lt; board[4][4] &lt;&lt; \"    |    \" &lt;&lt; board[4][5] &lt;&lt; \"    |    \" &lt;&lt; board[4][6] &lt;&lt; \"    |    \" &lt;&lt; board[4][7] &lt;&lt; \"    |\\n\";\n    cout &lt;&lt; \"  |         |         |         |         |         |         |         |         |\\n\";\n    cout &lt;&lt; \"  |_________|_________|_________|_________|_________|_________|_________|_________|\\n\";\n    cout &lt;&lt; \"  |         |         |         |         |         |         |         |         |\\n\";\n    cout &lt;&lt; \"  |         |         |         |         |         |         |         |         |\\n\";\n    cout &lt;&lt; \"5 |    \" &lt;&lt; board[5][0] &lt;&lt; \"    |    \" &lt;&lt; board[5][1] &lt;&lt; \"    |    \" &lt;&lt; board[5][2] &lt;&lt; \"    |    \"  &lt;&lt; board[5][3] &lt;&lt; \"    |    \" &lt;&lt; board[5][4] &lt;&lt; \"    |    \" &lt;&lt; board[5][5] &lt;&lt; \"    |    \" &lt;&lt; board[5][6] &lt;&lt; \"    |    \" &lt;&lt; board[5][7] &lt;&lt; \"    |\\n\";\n    cout &lt;&lt; \"  |         |         |         |         |         |         |         |         |\\n\";\n    cout &lt;&lt; \"  |_________|_________|_________|_________|_________|_________|_________|_________|\\n\";\n    cout &lt;&lt; \"  |         |         |         |         |         |         |         |         |\\n\";\n    cout &lt;&lt; \"  |         |         |         |         |         |         |         |         |\\n\";\n    cout &lt;&lt; \"6 |    \" &lt;&lt; board[6][0] &lt;&lt; \"    |    \" &lt;&lt; board[6][1] &lt;&lt; \"    |    \" &lt;&lt; board[6][2] &lt;&lt; \"    |    \"  &lt;&lt; board[6][3] &lt;&lt; \"    |    \" &lt;&lt; board[6][4] &lt;&lt; \"    |    \" &lt;&lt; board[6][5] &lt;&lt; \"    |    \" &lt;&lt; board[6][6] &lt;&lt; \"    |    \" &lt;&lt; board[6][7] &lt;&lt; \"    |\\n\";\n    cout &lt;&lt; \"  |         |         |         |         |         |         |         |         |\\n\";\n    cout &lt;&lt; \"  |_________|_________|_________|_________|_________|_________|_________|_________|\\n\";\n    cout &lt;&lt; \"  |         |         |         |         |         |         |         |         |\\n\";\n    cout &lt;&lt; \"  |         |         |         |         |         |         |         |         |\\n\";\n    cout &lt;&lt; \"7 |    \" &lt;&lt; board[7][0] &lt;&lt; \"    |    \" &lt;&lt; board[7][1] &lt;&lt; \"    |    \" &lt;&lt; board[7][2] &lt;&lt; \"    |    \"  &lt;&lt; board[7][3] &lt;&lt; \"    |    \" &lt;&lt; board[7][4] &lt;&lt; \"    |    \" &lt;&lt; board[7][5] &lt;&lt; \"    |    \" &lt;&lt; board[7][6] &lt;&lt; \"    |    \" &lt;&lt; board[7][7] &lt;&lt; \"    |\\n\";\n    cout &lt;&lt; \"  |         |         |         |         |         |         |         |         |\\n\";\n    cout &lt;&lt; \"  |_________|_________|_________|_________|_________|_________|_________|_________|\\n\";\n}\n\nvoid input()//asks player first to CHOOSE their piece using row and column # for exact location, then to MOVE using same concept\n{\n    cout &lt;&lt; \"Move piece\\n\";\n    cout &lt;&lt; \"Row: \";\n    cin &gt;&gt; row1;//\n    cout &lt;&lt; \"Column: \";\n    cin &gt;&gt; column1;\n\n    while (row1 &lt; 0 || row1 &gt; 7 || column1 &lt; 0 || column1 &gt; 7)//CHOOSE PIECE ...makes sure the input(Chosen piece) is within range\n    {\n        cout &lt;&lt; \"Incorrect input. Enter numbers between 0 and 7.\\n\";//runs if input out of range\n        cout &lt;&lt; \"Move piece\\n\";\n        cout &lt;&lt; \"Row: \";\n        cin &gt;&gt; row1;//allows another chance to enter input \n        cout &lt;&lt; \"Column: \";\n        cin &gt;&gt; column1;\n    }\n\n    cout &lt;&lt; \"To box\\n\";//allows to MOVE to another location based on row and column\n    cout &lt;&lt; \"Row: \";\n    cin &gt;&gt; row2;\n    cout &lt;&lt; \"Column: \";\n    cin &gt;&gt; column2;\n\n    while (row2 &lt; 0 || row2 &gt; 7 || column2 &lt; 0 || column2 &gt; 7)//MOVE PIECE...makes sure the move is legal\n    {\n        cout &lt;&lt; \"Incorrect input. Enter numbers between 0 and 7.\\n\";\n        cout &lt;&lt; \"To box\\n\";\n        cout &lt;&lt; \"Row: \";\n        cin &gt;&gt; row2;\n        cout &lt;&lt; \"Column: \";\n        cin &gt;&gt; column2;\n    }\n\n    while (check_move() == false)//check_move is called....and checks if it is false\n    {\n        cout &lt;&lt; \"ILLEGAL MOVE!!\\n\";\n        input();//input function starts again at line 133\n    }\n}\n\n\n\nvoid move()\n{\n    bool king_piece = false;\n\n    if (board[row1][column1] == 'B' || board[row1][column1] == 'R')\n    {\n        king_piece = true;\n    }\n\n    board[row1][column1] = ' ';\n\n    if (turn == 'B')\n    {\n        if (king_piece == false)\n        {\n            board[row2][column2] = 'b';\n        }\n        else if (king_piece == true)\n        {\n            board[row2][column2] = 'B';\n        }\n\n        turn = 'R';\n    }\n    else if (turn == 'R')\n    {\n        if (king_piece == false)\n        {\n            board[row2][column2] = 'r';\n        }\n        else if (king_piece == true)\n        {\n            board[row2][column2] = 'R';\n        }\n\n        turn = 'B';\n    }\n\n    if (leap == true)\n    {\n        do_leap();\n    }\n}\n\nvoid do_leap()\n{\n    char answer;\n\n    //It removes the checker piece after leap.\n    if (row2 &gt; row1 &amp;&amp; column2 &gt; column1)\n    {\n        board[row2 - 1][column2 - 1] = ' ';\n    }\n    else if (row2 &gt; row1 &amp;&amp; column2 &lt; column1)\n    {\n        board[row2 - 1][column2 + 1] = ' ';\n    }\n    else if (row2 &lt; row1 &amp;&amp; column2 &gt; column1)\n    {\n        board[row2 + 1][column2 - 1] = ' ';\n    }\n    else if (row2 &lt; row1 &amp;&amp; column2 &lt; column1)\n    {\n        board[row2 + 1][column2 + 1] = ' ';\n    }\n\n    display_board();//It displays the board after the changes\n\n    //It asks if the user wants to leap again.\n    do\n    {\n        cout &lt;&lt; \"You just leaped once. Do you want to do a second leap IF YOU CAN? (y/n): \";\n        cin &gt;&gt; answer;\n    }\n    while (answer != 'Y' &amp;&amp; answer != 'y' &amp;&amp; answer != 'N' &amp;&amp; answer != 'n');\n\n    if (answer == 'y' || answer == 'Y')\n    {\n        row1 = row2;\n        column1 = column2;\n        cout &lt;&lt; \"Leap piece: row: \" &lt;&lt; row1 &lt;&lt; \", column: \" &lt;&lt; column1 &lt;&lt; endl;\n        cout &lt;&lt; \"To box\\n\";\n        cout &lt;&lt; \"row: \";\n        cin &gt;&gt; row2;\n        cout &lt;&lt; \"column: \";\n        cin &gt;&gt; column2;\n\n        while (row2 &lt; 0 || row2 &gt; 7 || column2 &lt; 0 || column2 &gt; 7)\n        {\n            cout &lt;&lt; \"Incorrect input. Enter numbers between 0 and 7.\\n\";\n            cout &lt;&lt; \"To box\\n\";\n            cout &lt;&lt; \"Row: \";\n            cin &gt;&gt; row2;\n            cout &lt;&lt; \"Column: \";\n            cin &gt;&gt; bool check_move()\n\n            {\n                //it checks if a non-king piece is moving backwards.\n                if (board[row1][column1] != 'B' &amp;&amp; board[row1][column1] != 'R')\n                {\n                    if ((turn == 'B' &amp;&amp; row2 &lt; row1) || (turn == 'R' &amp;&amp; row2 &gt; row1))\n                    {\n                        leap = false;\n                        return false;\n                    }\n                }\n\n                //It checks if the location the piece is moving to is already taken.\n                if (board[row2][column2] != ' ')\n                {\n                    leap = false;\n                    return false;\n                }\n\n                //It checks if location entered by the user contains a piece to be moved.\n                if (board[row1][column1] == ' ')\n                {\n                    leap = false;\n                    return false;\n                }\n\n                //It checks if the piece isn't moving diagonally.\n                if (column1 == column2 || row1 == row2)\n                {\n                    leap = false;\n                    return false;\n                }\n\n                //It checks if the piece is moving by more than 1 column and only 1 row\n                if ((column2 &gt; column1 + 1 || column2 &lt; column1 - 1) &amp;&amp; (row2 == row1 +1 || row2 == row1 - 1))\n                {\n                    leap = false;\n                    return false;\n                }\n\n                //It checks if the piece is leaping.\n                if (row2 &gt; row1 + 1 || row2 &lt; row1 - 1)\n                {\n                    //It checks if the piece is leaping too far.\n                    if (row2 &gt; row1 + 2 || row2 &lt; row1 - 2)\n                    {\n                        leap = false;\n                        return false;\n                    }\n\n                    //It checks if the piece isn't moving by exactly 2 columns\n                    if (column2 != column1 + 2 &amp;&amp; column2 != column1 - 2)\n                    {\n                        leap = false;\n                        return false;\n                    }\n\n                    //It checks if the piece is leaping over another piece.\n                    if (row2 &gt; row1 &amp;&amp; column2 &gt; column1)\n                    {\n                        if (board[row2 - 1][column2 - 1] == ' ')\n                        {\n                            leap = false;\n                            return false;\n                        }\n                    }\n                    else if (row2 &gt; row1 &amp;&amp; column2 &lt; column1)\n                    {\n                        if (board[row2 - 1][column2 + 1] == ' ')\n                        {\n                            leap = false;\n                            return false;\n                        }\n                    }\n                    else if (row2 &lt; row1 &amp;&amp; column2 &gt; column1)\n                    {\n                        if (board[row2 + 1][column2 - 1] == ' ')\n                        {\n                            leap = false;\n                            return false;\n                        }\n                    }\n                    else if (row2 &lt; row1 &amp;&amp; column2 &lt; column1)\n                    {\n                        if (board[row2 + 1][column2 + 1] == ' ')\n                        {\n                            leap = false;\n                            return false;\n                        }\n                    }\n\n                    leap = true;\n                    return true;\n                }\n\n                leap = false;\n                return true;\n            } column2;\n        }\n    }\n\n        if (turn == 'B')\n        {\n            turn = 'R';\n        }\n        else if (turn == 'R')\n        {\n            turn = 'B';\n        }\n\n        check_move();\n\n        if (leap == false)\n        {\n            cout &lt;&lt; \"INVALID LEAP!!\\n\";\n\n            if (turn == 'B')\n            {\n                turn = 'R';\n            }\n            else if (turn == 'R')\n            {\n                turn = 'B';\n            }\n        }\n        else if (leap == true)\n        {\n            move();\n        }\n    }\n}\n\nvoid king()\n{\n    for (int i = 0; i &lt; 8; i++)\n    {\n        if (board[0][i] == 'r')\n        {\n            board[0][i] = 'R';\n        }\n\n        if (board[7][i] == 'b')\n        {\n            board[7][i] = 'B';\n        }\n    }\n}\n\nvoid game_over()\n{\n    int counter = 0;\n\n    for (int i = 0; i &lt; 8; i++)\n    {\n        for (int j = 0; j &lt; 8; j++)\n        {\n            if (board[i][j] != ' ')\n            {\n                counter++;\n            }\n        }\n    }\n\n    if (counter &gt; 1)\n    {\n        game_running = true;\n    }\n    else if (counter == 1)\n    {\n        game_running = false;\n    }\n}\n}   \n\n\n\n/*\n\n ISSUE:\n\n -check_move is declared as s function but has no def/implementation\n -Could it be intended to be declared as a variable??\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1426104037, "post_id": 28996161, "comment_id": 46240564, "body": "Could you demonstrate how this would work, and how it would be better than just doing it normally?"}, {"owner": {"reputation": 6824, "user_id": 3202093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004496564514/picture?type=large", "display_name": "sp2danny", "link": "https://stackoverflow.com/users/3202093/sp2danny"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1426104112, "post_id": 28996161, "comment_id": 46240608, "body": "it would work like <a href=\"http://coliru.stacked-crooked.com/a/cbfe9282c01a575e\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/cbfe9282c01a575e</a>"}, {"owner": {"reputation": 6824, "user_id": 3202093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004496564514/picture?type=large", "display_name": "sp2danny", "link": "https://stackoverflow.com/users/3202093/sp2danny"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1426104130, "post_id": 28996161, "comment_id": 46240625, "body": "and the point is to never type <code>new</code>"}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1426104137, "post_id": 28996161, "comment_id": 46240629, "body": "@tadman <code>auto = make_unique&lt;Foo, Bar&gt;()</code> creates an instance of <code>Foo</code> and returns <code>unique_ptr&lt;Bar&gt;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 6824, "user_id": 3202093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004496564514/picture?type=large", "display_name": "sp2danny", "link": "https://stackoverflow.com/users/3202093/sp2danny"}, "edited": false, "score": 0, "creation_date": 1426104309, "post_id": 28996243, "comment_id": 46240720, "body": "did not know they converted silently. should have tried that."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "reply_to_user": {"reputation": 6824, "user_id": 3202093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004496564514/picture?type=large", "display_name": "sp2danny", "link": "https://stackoverflow.com/users/3202093/sp2danny"}, "edited": false, "score": 0, "creation_date": 1426104700, "post_id": 28996243, "comment_id": 46240922, "body": "There&#39;s an implicit conversion from <code>unique_ptr&lt;U, E&gt;</code> to <code>unique_ptr&lt;T, D&gt;</code> if <code>U*</code> is implicitly convertible to <code>T*</code> and <code>E</code> is implicitly convertible to <code>D</code>"}], "owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "is_accepted": true, "score": 7, "last_activity_date": 1426104754, "last_edit_date": 1426104754, "creation_date": 1426104133, "answer_id": 28996243, "question_id": 28996161, "link": "https://stackoverflow.com/questions/28996161/unique-ptr-make-unique-and-polymorphism/28996243#28996243", "title": "unique_ptr, make_unique and polymorphism", "body": "<p>Because  there's no point, you can just do the conversion after calling it anyway.</p>\n\n<pre><code>std::unique_ptr&lt;T&gt; p = std::make_unique&lt;U&gt;(args);\n</code></pre>\n\n<p>So if there's a function that takes <code>std::unique_ptr&lt;T&gt;</code> you can still do</p>\n\n<pre><code>func(std::make_unique&lt;U&gt;(args));\n</code></pre>\n\n<p>For your live example, you can just do:</p>\n\n<pre><code>the_list.push_back( make_unique&lt;Child&gt;(1) );\n</code></pre>\n\n<p>What's the benefit of your suggestion?  It just seems like more typing for no reason.</p>\n\n<p>(Also, in general this isn't safe as it assumes the base class has a virtual destructor, you need to be careful about converting <code>unique_ptr</code> objects, so having a <code>make_unique</code> that encourages it might be risky.)</p>\n"}, {"owner": {"reputation": 393, "user_id": 3758879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VGKCZ.jpg?s=128&g=1", "display_name": "where23", "link": "https://stackoverflow.com/users/3758879/where23"}, "is_accepted": false, "score": 0, "last_activity_date": 1567993106, "creation_date": 1567993106, "answer_id": 57846961, "question_id": 28996161, "link": "https://stackoverflow.com/questions/28996161/unique-ptr-make-unique-and-polymorphism/57846961#57846961", "title": "unique_ptr, make_unique and polymorphism", "body": "<p>You will find that std::unique_ptr can move from derived's to base's, if you look into its definition. Refer to <a href=\"https://stackoverflow.com/a/57797286/3758879\">https://stackoverflow.com/a/57797286/3758879</a></p>\n"}], "owner": {"reputation": 6824, "user_id": 3202093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004496564514/picture?type=large", "display_name": "sp2danny", "link": "https://stackoverflow.com/users/3202093/sp2danny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4037, "favorite_count": 0, "accepted_answer_id": 28996243, "answer_count": 2, "score": 2, "last_activity_date": 1567993106, "creation_date": 1426103836, "question_id": 28996161, "link": "https://stackoverflow.com/questions/28996161/unique-ptr-make-unique-and-polymorphism", "title": "unique_ptr, make_unique and polymorphism", "body": "<p>Would not <code>make_unique</code> be more useful if it was designed like:</p>\n\n<pre><code>template&lt; typename T, typename U=T, typename ...ArgT&gt;\nunique_ptr&lt;T&gt; make_unique( ArgT ...args )\n{\n    return unique_ptr&lt;T&gt;( new U(args...) );\n    // maybe parameters should be forwarded, not really important for this question\n}\n</code></pre>\n\n<p>So that you could use it to create derived objects? <br>\nAnyone know the rational behind not doing this?<br></p>\n"}, {"tags": ["c++", "visual-c++", "mfc", "screenshot"], "comments": [{"owner": {"reputation": 3887, "user_id": 937421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Lunw3.jpg?s=128&g=1", "display_name": "rrirower", "link": "https://stackoverflow.com/users/937421/rrirower"}, "edited": false, "score": 0, "creation_date": 1426103594, "post_id": 28996021, "comment_id": 46240288, "body": "Yes. But, what have you tried?"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1426103680, "post_id": 28996021, "comment_id": 46240340, "body": "Use the built-in one [alt]+[print-screen] ?"}, {"owner": {"reputation": 148, "user_id": 4555457, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HmXoM8ETIQc/AAAAAAAAAAI/AAAAAAAAAE0/Z96TfGi6l94/photo.jpg?sz=128", "display_name": "Dar&#243;s", "link": "https://stackoverflow.com/users/4555457/dar%c3%b3s"}, "edited": false, "score": 0, "creation_date": 1426103710, "post_id": 28996021, "comment_id": 46240357, "body": "This: <a href=\"http://planetsourcecode.com/vb/scripts/ShowCode.asp?txtCodeId=10754&amp;lngWId=3\" rel=\"nofollow noreferrer\">planetsourcecode.com/vb/scripts/&hellip;</a>"}, {"owner": {"reputation": 1132, "user_id": 4057688, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/3sHT1.jpg?s=128&g=1", "display_name": "Mirjalal", "link": "https://stackoverflow.com/users/4057688/mirjalal"}, "edited": false, "score": 0, "creation_date": 1426105983, "post_id": 28996021, "comment_id": 46241647, "body": "check this link.   <a href=\"http://www.codeproject.com/Articles/20367/Screen-Capture-Simple-Win-Dialog-Based\" rel=\"nofollow noreferrer\">codeproject.com/Articles/20367/&hellip;</a>"}], "owner": {"reputation": 148, "user_id": 4555457, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HmXoM8ETIQc/AAAAAAAAAAI/AAAAAAAAAE0/Z96TfGi6l94/photo.jpg?sz=128", "display_name": "Dar&#243;s", "link": "https://stackoverflow.com/users/4555457/dar%c3%b3s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 288, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1426103345, "creation_date": 1426103345, "question_id": 28996021, "link": "https://stackoverflow.com/questions/28996021/screen-shot-using-c-and-mfc", "title": "Screen shot using C++ and MFC", "body": "<p>I have a MFC Application and a I need to build a function that captures a screen shot, but only the open dialog box, not the whole window. I'm new VS and C++ and I'm using VS 2013 in my project. Any Ideas?</p>\n"}, {"tags": ["c++", "c++11", "lambda", "stl", "functor"], "answers": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 1, "last_activity_date": 1426103515, "creation_date": 1426103515, "answer_id": 28996071, "question_id": 28995878, "link": "https://stackoverflow.com/questions/28995878/getting-error-while-using-functors-without-creating-a-functor-class/28996071#28996071", "title": "Getting error while using Functors without creating a Functor class?", "body": "<p>You are modifying <code>foundVector</code> of the object created by:</p>\n\n<pre><code> Demo object(string);\n</code></pre>\n\n<p>when you call</p>\n\n<pre><code> object(elem);\n</code></pre>\n\n<p>Change the line</p>\n\n<pre><code>for (auto elem : foundvector)\n</code></pre>\n\n<p>to</p>\n\n<pre><code>for (auto elem : object.foundvector)\n</code></pre>\n\n<p>to get correct answers.</p>\n"}], "owner": {"reputation": 1840, "user_id": 4619179, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-16inNBUDudM/AAAAAAAAAAI/AAAAAAAAAFY/QCrPyUVp4_Q/photo.jpg?sz=128", "display_name": "ojas", "link": "https://stackoverflow.com/users/4619179/ojas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 28996071, "answer_count": 1, "score": 0, "last_activity_date": 1426103515, "creation_date": 1426102837, "last_edit_date": 1426103323, "question_id": 28995878, "link": "https://stackoverflow.com/questions/28995878/getting-error-while-using-functors-without-creating-a-functor-class", "title": "Getting error while using Functors without creating a Functor class?", "body": "<p><strong>I want to use functors without creating a functor class but My foundVector is showing empty even if i store a matched string in foundVector.</strong></p>\n\n<p>Also tell me is there any better way to use fucntors</p>\n\n<p>I am using Visual Studio 2013. Here is my demo code:</p>\n\n<p>Input:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;vector&gt;\n#include &lt;string&gt;\n\nclass Demo\n{\n   public:\n      Demo(const std::string&amp; string) :string_(string){};\n      void findFunctor(const std::string&amp; string);\n      void operator()(const std::string &amp;string);\n      void input();\n   private:\n      const std::string string_;\n      std::vector&lt;std::string&gt; storeVector;\n      std::vector&lt;std::string&gt; foundvector;\n};\n\nvoid Demo::input()\n{\n   storeVector.push_back(\"test\");\n   storeVector.push_back(\"hello\");\n   storeVector.push_back(\"world\");\n   storeVector.push_back(\"foo\");\n   storeVector.push_back(\"hello\");\n}\n\nvoid Demo::findFunctor(const std::string&amp; string)\n{\n   Demo object(string);\n   for (auto &amp;elem : storeVector)\n   {\n      object(elem);\n   }\n   for (auto elem : foundvector)\n   {\n      std::cout &lt;&lt; elem&lt;&lt;\"\\n\";//Surprisingly Vector is empty and i want to know why??\n   }\n\n}\n\nvoid Demo::operator()(const std::string &amp;string)\n{\n   if (string == string_)\n   {\n      foundvector.push_back(string_);//Vector consists of two strings if  matching string is found\n   }\n}\n\nint main()\n{\n   Demo dObject(\"hello\");\n   dObject.input();\n   dObject.findFunctor(\"hello\");\n   return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "gcc", "g++"], "comments": [{"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1426105161, "post_id": 28995731, "comment_id": 46241185, "body": "<code>-lstdc++</code> links to the C++ standard library but <code>&lt;vector&gt;</code> is not a &quot;library&quot; it&#39;s a header. The reason you couldn&#39;t include it definitely is because you didn&#39;t use <code>g++</code>, so if using g++ gives millions of errors  then it means you need to fix your C code to be valid C++ code. Otherwise you aren&#39;t going to be able to use the C++ <code>&lt;vector&gt;</code> header."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1426105782, "post_id": 28995731, "comment_id": 46241533, "body": "You should compile with <code>g++ -Wall std=c++11</code>"}], "answers": [{"comments": [{"owner": {"reputation": 2967, "user_id": 2324576, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/993e0f8ecc3e4d85f2990b6a6fe5b0a1?s=128&d=identicon&r=PG", "display_name": "James Joshua Street", "link": "https://stackoverflow.com/users/2324576/james-joshua-street"}, "edited": false, "score": 0, "creation_date": 1426102656, "post_id": 28995754, "comment_id": 46239735, "body": "hmm that makes it sound like I shouldn&#39;t use g++ since the entire code base was designed to use gcc before and assumes that this conversion is valid. Thanks for letting me know though. Do you know why the same code would give a previous declaration error in C++ but not in C? Unfortunately I will probably have to avoid using g++ then unless I can&#39;t find any other way because the amount of code that would need to change is way too much."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 2967, "user_id": 2324576, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/993e0f8ecc3e4d85f2990b6a6fe5b0a1?s=128&d=identicon&r=PG", "display_name": "James Joshua Street", "link": "https://stackoverflow.com/users/2324576/james-joshua-street"}, "edited": false, "score": 0, "creation_date": 1426102714, "post_id": 28995754, "comment_id": 46239759, "body": "@JamesJoshuaStreet that probably requires taking a look at the <code>getopt.h</code> header file. And if you want to work with c and c++ in the same project you can, just separate the c source from the c++ source, create a Makefile to compile it correctly, although <b>gcc</b> does use the file extension to guess what compiler to use. And whenever you need a c function in a c++ program just use <code>extern &quot;C&quot; FunctionPrototypeHere;</code> and it will work."}, {"owner": {"reputation": 2967, "user_id": 2324576, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/993e0f8ecc3e4d85f2990b6a6fe5b0a1?s=128&d=identicon&r=PG", "display_name": "James Joshua Street", "link": "https://stackoverflow.com/users/2324576/james-joshua-street"}, "edited": false, "score": 0, "creation_date": 1426103754, "post_id": 28995754, "comment_id": 46240392, "body": "hmm it seems that I need to look into exposing a full C++ class in C or something."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 2967, "user_id": 2324576, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/993e0f8ecc3e4d85f2990b6a6fe5b0a1?s=128&d=identicon&r=PG", "display_name": "James Joshua Street", "link": "https://stackoverflow.com/users/2324576/james-joshua-street"}, "edited": false, "score": 0, "creation_date": 1426104082, "post_id": 28995754, "comment_id": 46240597, "body": "@JamesJoshuaStreet Using c++ in c can&#39;t be done, using c in c++ is possible.3"}], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 2, "last_activity_date": 1426103054, "last_edit_date": 1426103054, "creation_date": 1426102501, "answer_id": 28995754, "question_id": 28995731, "link": "https://stackoverflow.com/questions/28995731/how-to-build-object-using-c-vector-library-in-gcc/28995754#28995754", "title": "How to build object using C++ vector library in gcc?", "body": "<p>The first error is because there is no automatic conversion from <code>void *</code> to other pointer types in c++. Which is not the case in c, so the code would compile correctly with a c compilier, to solve that you just need to cast the return value like this</p>\n\n<pre><code>Global *g = reinterpret_cast&lt;Global *&gt;(calloc(1,sizeof(Global)));\n</code></pre>\n\n<p>also notice that you don't need <code>struct</code> for declarations in c++.</p>\n\n<p>I'd recommend the <code>new</code> operator, because if you add a constructor to <code>struct Global</code> it will automatically invoke the cosntructor, also</p>\n\n<pre><code>Global *g = new Global;\n</code></pre>\n\n<p>notice however that unlike <code>calloc()</code> the struct members here are not initialized to <code>0</code>.</p>\n\n<p>The important thing to know is that <strong>c</strong> and <strong>c++</strong> are different languages, you can easily write code that would compile with a c compiler but not with a c++ compiler, like the code above, the other way it's even easier.</p>\n"}, {"comments": [{"owner": {"reputation": 2967, "user_id": 2324576, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/993e0f8ecc3e4d85f2990b6a6fe5b0a1?s=128&d=identicon&r=PG", "display_name": "James Joshua Street", "link": "https://stackoverflow.com/users/2324576/james-joshua-street"}, "edited": false, "score": 0, "creation_date": 1426119978, "post_id": 28996401, "comment_id": 46247632, "body": "i followed your suggestion, but there remains one thing I am curious about.  Originally the makefile that was building GTKWave used g++ instead of gcc in the final step. Is there a reason to do this in an app that uses almost all C code? Is it necessary to use g++ when you wish to use a c++ code in your code? I am wondering why this was necessary. gtk uses c code, so the only thing i can think is that perhaps an external library used c++ code."}, {"owner": {"reputation": 71, "user_id": 2628804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07daa35b9470ce40dc9fff197323f537?s=128&d=identicon&r=PG", "display_name": "jhand", "link": "https://stackoverflow.com/users/2628804/jhand"}, "reply_to_user": {"reputation": 2967, "user_id": 2324576, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/993e0f8ecc3e4d85f2990b6a6fe5b0a1?s=128&d=identicon&r=PG", "display_name": "James Joshua Street", "link": "https://stackoverflow.com/users/2324576/james-joshua-street"}, "edited": false, "score": 0, "creation_date": 1426179908, "post_id": 28996401, "comment_id": 46276481, "body": "The main difference between using g++ and gcc for linking is that g++ links to some of the standard libraries that are required for C++, while gcc only links to what is needed to compile a C program. For example, on Linux, g++ adds &quot;-lstdc++ -lm&quot; to the link line. There are some other differences too, such as g++ adding --eh-frame-hdr to the linker command-line. It sounds like g++ was used to link because some C++ libraries are being used. I would probably keep linking with g++. As a test, you could try linking with gcc, but I think you may get some unresolved symbols."}], "owner": {"reputation": 71, "user_id": 2628804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07daa35b9470ce40dc9fff197323f537?s=128&d=identicon&r=PG", "display_name": "jhand", "link": "https://stackoverflow.com/users/2628804/jhand"}, "is_accepted": false, "score": 3, "last_activity_date": 1426105593, "last_edit_date": 1426105593, "creation_date": 1426104726, "answer_id": 28996401, "question_id": 28995731, "link": "https://stackoverflow.com/questions/28995731/how-to-build-object-using-c-vector-library-in-gcc/28996401#28996401", "title": "How to build object using C++ vector library in gcc?", "body": "<p>There are quite a few issues here. First, the \"gcc\" executable will compile both C and C++ code, but it typically determines whether it should compile as C or C++ based on the file suffix. In your case, it appears to have tried to compile \"globals.c\" as a C source file instead of a C++ source file. The C compiler does not include the proper directory in the list of internal include paths so it will not even try to open the &lt;vector&gt; include. To compile as C++, you can force it with g++ or by changing the name of your source file to have a .cpp or .C suffix.</p>\n\n<p>If you have more than one source file, then you are going to have more work to do. You will probably either need to compile everything with the C++ compiler, or will need to learn about \"extern 'C'\" and fix the interfaces between C++ and C. This may be more trouble than it is worth.</p>\n\n<p>Next, you will need to address all of the errors in your compilation. It looks like the main problem you show has to do with typecasts. Those were more permissive under C than C++.</p>\n\n<p>I would suggest that you take out the vector code, and keep using a pure C solution in your case. You have to perform the memory management yourself, but it isn't too hard. I have used realloc() in the past to resize memory. You'll need to keep track of a pointer to the allocated memory, the number of allocated objects and potentially the total size of the buffer.</p>\n"}], "owner": {"reputation": 2967, "user_id": 2324576, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/993e0f8ecc3e4d85f2990b6a6fe5b0a1?s=128&d=identicon&r=PG", "display_name": "James Joshua Street", "link": "https://stackoverflow.com/users/2324576/james-joshua-street"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3071, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1426105593, "creation_date": 1426102437, "last_edit_date": 1426102454, "question_id": 28995731, "link": "https://stackoverflow.com/questions/28995731/how-to-build-object-using-c-vector-library-in-gcc", "title": "How to build object using C++ vector library in gcc?", "body": "<p>so I have some working code that calls gcc in a makefile. I then add my own class that uses the c++ vector stl, and I want to compile the same object.</p>\n\n<p>If I just run the same command, I get an error:</p>\n\n<pre><code>fatal error: vector: No such file or directory\n#include &lt;vector&gt;\n</code></pre>\n\n<p>If i try to use g++ instead to compile, I instead get a million errors, so I'm guessing that I shouldn't do that. </p>\n\n<p>I googled how to add a c++ library to a gcc call, and I was told to use </p>\n\n<pre><code>gcc -lstdc++\n</code></pre>\n\n<p>However, that doesn't seem to have any effect. How can i go about building this object?</p>\n\n<p>Would using g++ be the standard way? If I use g++ instead of gcc it seems like there are many conversion errors of this type:</p>\n\n<pre><code>globals.c:1381:50: error: invalid conversion from 'void*' to 'Global*' [-fpermissive]\n struct Global *g = calloc(1,sizeof(struct Global)); /* allocate viewer context */\n</code></pre>\n\n<p>as well as an error of previous declaration:</p>\n\n<pre><code>d:\\mingw\\include\\getopt.h:46:12: error: previous declaration 'int getopt(int, char* const*, const char*)' here\n extern int getopt( int, char * const [], const char * );\n</code></pre>\n"}, {"tags": ["c++", "boost", "boost-graph"], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 2679769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0392196b1ad70818744743a47caad444?s=128&d=identicon&r=PG&f=1", "display_name": "Vutz", "link": "https://stackoverflow.com/users/2679769/vutz"}, "edited": false, "score": 0, "creation_date": 1426104560, "post_id": 28995938, "comment_id": 46240846, "body": "Effectively the use of an unordered_set to store edges can bring me fast lookup, but i didn&#39;t understand what you mean by  <code>adapt it to model the EdgeListGraph concept</code>, i&#39;m very novice in generic programing."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 89, "user_id": 2679769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0392196b1ad70818744743a47caad444?s=128&d=identicon&r=PG&f=1", "display_name": "Vutz", "link": "https://stackoverflow.com/users/2679769/vutz"}, "edited": false, "score": 0, "creation_date": 1426105476, "post_id": 28995938, "comment_id": 46241373, "body": "Yeah. well. The documentation has examples, you may be able to find some on SO. I find it a bit unwarranted to start fantasizing about a graph model before you show me what your starting position even is :)"}, {"owner": {"reputation": 89, "user_id": 2679769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0392196b1ad70818744743a47caad444?s=128&d=identicon&r=PG&f=1", "display_name": "Vutz", "link": "https://stackoverflow.com/users/2679769/vutz"}, "edited": false, "score": 0, "creation_date": 1426107466, "post_id": 28995938, "comment_id": 46242515, "body": "i found that <a href=\"http://www.boost.org/doc/libs/1_57_0/libs/graph/doc/using_adjacency_list.html#sec:choosing-graph-type\" rel=\"nofollow noreferrer\">here</a> we can choose <code>hash_setS</code> which is an unordered_map as  underlying containerfor edge list, and found the function <code>edge(u, v, g)</code> retruns <code>pair&lt;edge_descriptor, bool&gt;</code> where the bool is whether the edge exists, but i dont know how the choice of <code>hash_setS</code> can affect this operation"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 89, "user_id": 2679769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0392196b1ad70818744743a47caad444?s=128&d=identicon&r=PG&f=1", "display_name": "Vutz", "link": "https://stackoverflow.com/users/2679769/vutz"}, "edited": false, "score": 0, "creation_date": 1426107589, "post_id": 28995938, "comment_id": 46242582, "body": "That&#39;s detailed in my answer. Recap: not useful unless all your edges originate from very few vertices (still O(num_source_vertices))"}, {"owner": {"reputation": 89, "user_id": 2679769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0392196b1ad70818744743a47caad444?s=128&d=identicon&r=PG&f=1", "display_name": "Vutz", "link": "https://stackoverflow.com/users/2679769/vutz"}, "edited": false, "score": 0, "creation_date": 1426109212, "post_id": 28995938, "comment_id": 46243519, "body": "okey, so hash_setS selector didn&#39;t help much, i presume that i need a custom data structure to bring the fast look up and instant neighboring, but adapt this with BGL requires to me more deeper understanding of the library concepts that I do not yet grasped as a beginner."}, {"owner": {"reputation": 89, "user_id": 2679769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0392196b1ad70818744743a47caad444?s=128&d=identicon&r=PG&f=1", "display_name": "Vutz", "link": "https://stackoverflow.com/users/2679769/vutz"}, "edited": false, "score": 0, "creation_date": 1426109913, "post_id": 28995938, "comment_id": 46243847, "body": "the doc is very intimidating to me, i juste know the two basics djacency_list and adjacency_matrix."}, {"owner": {"reputation": 1229, "user_id": 2912901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9d7bd80db091aca9f627a7f102963ec?s=128&d=identicon&r=PG&f=1", "display_name": "pbible", "link": "https://stackoverflow.com/users/2912901/pbible"}, "edited": false, "score": 0, "creation_date": 1426179033, "post_id": 28995938, "comment_id": 46275985, "body": "A traditional adjacency matrix should give you constant time adjacency testing, but I&#39;m not sure how to get at that functionality through boost&#39;s adjacency_matrix."}], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 2, "last_activity_date": 1426103064, "creation_date": 1426103064, "answer_id": 28995938, "question_id": 28995708, "link": "https://stackoverflow.com/questions/28995708/boost-graph-test-if-two-vertices-are-adjacent/28995938#28995938", "title": "Boost Graph : Test if two vertices are adjacent", "body": "<p>BGL is a highly generic library. You can adapt most any datastructure for use with its algorithms.</p>\n\n<p>You can vary the edge container. You don't mention it, but I'm assuming you've been looking at the interface/complexity guarantees for <code>boost::adjacency_list</code>.</p>\n\n<p>Indeed the edge membership test will be O(n) even if you use <code>setS</code> for the edge container selector. This is mostly because adjacency lists store outgoing edges are per vertex. So in worst case, each vertex contains at most one outgoing edge and the search is practically O(n) [1]</p>\n\n<p>In this case you simply want to select another graph implementation. </p>\n\n<p>The documentation page on <em><a href=\"http://www.boost.org/doc/libs/1_57_0/libs/graph/doc/graph_concepts.html\" rel=\"nofollow\">Graph Concepts</a></em> is a good starting point to find out about which concepts are expected. As well as, which models supply those concepts.</p>\n\n<p>In the worst case you can adapt your data structure for use with Boost Graph algorithms. E.g. you could store all edges in a simple <code>std::[unordered_]set&lt;std::pair&lt;VID, VID&gt; &gt;</code> and adapt it to model the <strong><a href=\"http://www.boost.org/doc/libs/1_57_0/libs/graph/doc/EdgeListGraph.html\" rel=\"nofollow\"><code>EdgeListGraph</code></a></strong> concept.</p>\n\n<p>That way you will have performant lookups.</p>\n\n<hr>\n\n<p>[1] of course this also means, in best case the search is whatever your set implementation affords: O(log n) because all edges could originate from the same vertex...</p>\n"}, {"comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1461915280, "post_id": 33481911, "comment_id": 61424211, "body": "Loving the graph. Thanks for sharing the code. What did you use to make the graph from the raw data?"}, {"owner": {"reputation": 7051, "user_id": 1916449, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d5611f16fc8a1b73a03e44297682824f?s=128&d=identicon&r=PG", "display_name": "arekolek", "link": "https://stackoverflow.com/users/1916449/arekolek"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1461928588, "post_id": 33481911, "comment_id": 61432938, "body": "@sehe I used <a href=\"https://www.r-project.org/\" rel=\"nofollow noreferrer\"><code>R</code></a> to compute mean and standard deviation of data points, using <code>ddply</code> from the <code>plyr</code> package. The graph was made with <a href=\"http://www.gnuplot.info/\" rel=\"nofollow noreferrer\"><code>gnuplot</code></a> and the <a href=\"https://github.com/aschn/gnuplot-colorbrewer\" rel=\"nofollow noreferrer\">ColorBrewer</a> color scheme."}, {"owner": {"reputation": 7051, "user_id": 1916449, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d5611f16fc8a1b73a03e44297682824f?s=128&d=identicon&r=PG", "display_name": "arekolek", "link": "https://stackoverflow.com/users/1916449/arekolek"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1461929745, "post_id": 33481911, "comment_id": 61433700, "body": "@sehe Here are the <a href=\"https://gist.github.com/arekolek/e855cc8740a8782f48d5/fe7d86e8dcc5775c686518f816b050212a146b13\" rel=\"nofollow noreferrer\">files</a>. This version compares other operations in addition to <code>edge()</code>, the old version got overwritten. Bear in mind, I wasn&#39;t going for readability in the <code>gnuplot</code> and <code>R</code> files."}], "owner": {"reputation": 7051, "user_id": 1916449, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d5611f16fc8a1b73a03e44297682824f?s=128&d=identicon&r=PG", "display_name": "arekolek", "link": "https://stackoverflow.com/users/1916449/arekolek"}, "is_accepted": true, "score": 7, "last_activity_date": 1461929546, "last_edit_date": 1461929546, "creation_date": 1446480456, "answer_id": 33481911, "question_id": 28995708, "link": "https://stackoverflow.com/questions/28995708/boost-graph-test-if-two-vertices-are-adjacent/33481911#33481911", "title": "Boost Graph : Test if two vertices are adjacent", "body": "<p>The <a href=\"http://www.boost.org/doc/libs/1_59_0/libs/graph/doc/AdjacencyMatrix.html\" rel=\"nofollow noreferrer\">AdjacencyMatrix</a> concept gives a complexity guarantee that the <code>edge()</code> function must return in constant time.</p>\n\n<p>To check if two vertices <code>v</code> and <code>w</code> are adjacent in <code>G</code>, you write <code>edge(v, w, G).second</code>, since the function returns a pair where the second value indicates if the edge exists.</p>\n\n<p>The <code>edge()</code> function is implemented for other graph representations as well. Here is a graph that shows how different representations compare with regard to performance of checking vertex adjacency:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ljrSg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ljrSg.png\" alt=\"Adjacency check efficiency\"></a></p>\n\n<p>Here is the <a href=\"https://gist.github.com/arekolek/e855cc8740a8782f48d5/1ca80a3259660c531a9e6f68e306e50706cd2ba0\" rel=\"nofollow noreferrer\">code used to generate the data</a> for this plot. Each data point is 100 random graphs of medium density, with 100 random edge checks per each graph. Note the logarithmic <em>y</em> axis.</p>\n\n<p>What is the best choice will eventually depend on your particular application, because for other operations the ordering of structures by speed is different. In other words, avoid premature optimization.</p>\n"}], "owner": {"reputation": 89, "user_id": 2679769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0392196b1ad70818744743a47caad444?s=128&d=identicon&r=PG&f=1", "display_name": "Vutz", "link": "https://stackoverflow.com/users/2679769/vutz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2958, "favorite_count": 0, "accepted_answer_id": 33481911, "answer_count": 2, "score": 3, "last_activity_date": 1461929546, "creation_date": 1426102335, "question_id": 28995708, "link": "https://stackoverflow.com/questions/28995708/boost-graph-test-if-two-vertices-are-adjacent", "title": "Boost Graph : Test if two vertices are adjacent", "body": "<p>I'm new in using C++ boost library in particularly the boost graph library which a needed to try coding some algorithms where i commonly check the adjacency of two vertices and dealing with other graph concepts like computing graph invariants.\nWhat i know is that we can iterate through adjacent vertices with the function : <code>adjacent_vertices(u, g)</code> but i'm searching for an efficient way to test if two vertices u, v are adjacent or not without doing linear search </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1426102401, "post_id": 28995673, "comment_id": 46239583, "body": "&quot;current instantiation&quot; and complicated rules related thereto, make the declaration work."}, {"owner": {"reputation": 619, "user_id": 3910671, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/KtjIl.png?s=128&g=1", "display_name": "sperber", "link": "https://stackoverflow.com/users/3910671/sperber"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1426102510, "post_id": 28995673, "comment_id": 46239656, "body": "@Ben Voigt: But I hope it is not compiler dependent... In other words: is it correct to leave out the typename in the declaration? What about the function arguments???"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1426103204, "post_id": 28995673, "comment_id": 46240058, "body": "Inside the class body, the <code>typename</code> keyword is not required.  Outside the class body, it is necessary."}], "answers": [{"comments": [{"owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "edited": false, "score": 0, "creation_date": 1426102860, "post_id": 28995825, "comment_id": 46239845, "body": "Basically, in those cases you can even remove the explicit template parameter <code>&lt;T&gt;</code>.  It made sense to me when I realized that and starts to look more like a non-dependent name."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "edited": false, "score": 0, "creation_date": 1426103002, "post_id": 28995825, "comment_id": 46239920, "body": "@GuyGreer: You could even say <code>Sub</code> without further qualification, since it is the injected class name."}], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": true, "score": 2, "last_activity_date": 1426103036, "last_edit_date": 1426103036, "creation_date": 1426102697, "answer_id": 28995825, "question_id": 28995673, "link": "https://stackoverflow.com/questions/28995673/why-does-the-c-compiler-require-a-typename-keyword-in-this-particular-case/28995825#28995825", "title": "Why does the C++ compiler require a &quot;typename&quot; keyword in this particular case?", "body": "<p>These two rules together (both in 14.6.2.1) yield the observed behavior:</p>\n\n<p>First, that</p>\n\n<blockquote>\n  <p>A name refers to the current instantiation if it is</p>\n  \n  <ul>\n  <li><p>in the de\ufb01nition of a class template, a nested class of a class template, a member of a class template, or a member of a nested class of a class template, the <em>injected-class-name</em> (Clause 9) of the class template or nested class,</p></li>\n  <li><p>in  the  de\ufb01nition  of  a  primary  class  template  or  a  member  of  a  primary  class  template,  the  name  of  the class template followed by the template argument list of the primary template (as described below)\n  enclosed in <code>&lt;&gt;</code> (or an equivalent template alias specialization),</p></li>\n  <li><p>in  the  de\ufb01nition  of  a  nested  class  of  a  class  template,  the  name  of  the  nested  class  referenced  as  a\n  member of the current instantiation, or</p></li>\n  </ul>\n</blockquote>\n\n<p>and one more unrelated bullet point.</p>\n\n<p>Then,</p>\n\n<blockquote>\n  <p>A name is a member of the current instantiation if it is</p>\n  \n  <ul>\n  <li>An  unqualified  name  that,  when  looked  up,  refers  to  at  least  one  member  of  a  class  that  is  the  current instantiation or a non-dependent base class thereof.  [ Note:  <strong>This can only occur when looking up a name in a scope enclosed by the definition of a class template.</strong>  \u2014 end note ]</li>\n  </ul>\n</blockquote>\n\n<p>and two unrelated bullet points.</p>\n\n<p>Therefore, in both cases, <code>ClassWithSubType&lt;T&gt;</code> refers to the current instantiation.  But as the note explains, <code>Sub</code> refers to a member of the current instantiation only when used inside the class template body.  In the out-of-class definition, it becomes a \"member of an unknown specialization\".</p>\n\n<p>As a member of the current instantiation, the compiler determines that <code>Sub</code> is a class type.</p>\n\n<p>Outside the class body, the compiler doesn't know this and the <code>typename</code> keyword is needed.</p>\n"}], "owner": {"reputation": 619, "user_id": 3910671, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/KtjIl.png?s=128&g=1", "display_name": "sperber", "link": "https://stackoverflow.com/users/3910671/sperber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 28995825, "answer_count": 1, "score": 0, "last_activity_date": 1426103036, "creation_date": 1426102238, "question_id": 28995673, "link": "https://stackoverflow.com/questions/28995673/why-does-the-c-compiler-require-a-typename-keyword-in-this-particular-case", "title": "Why does the C++ compiler require a &quot;typename&quot; keyword in this particular case?", "body": "<p>I just figured out that C++ requires a typename in the following code (see the member function definition at the end of the code fragment):</p>\n\n<pre><code>template &lt;typename T&gt; struct ClassWithSubtype\n{\n    struct Sub\n    {\n        //static void check( const ClassWithSubtype&lt;T&gt;::Sub&amp; sub );\n        ClassWithSubtype&lt;T&gt;::Sub&amp; operator=( const ClassWithSubtype&lt;T&gt;::Sub&amp; other );\n    };\n};\n\n/*\n//Here C++ does not require a typename for the argument type\ntemplate &lt;typename T&gt; void ClassWithSubtype&lt;T&gt;::Sub::check( const ClassWithSubtype&lt;T&gt;::Sub&amp; sub )\n{\n    //do sth.\n}\n*/\n\n//Here C++ requires a typename for the return type\ntemplate &lt;typename T&gt; typename ClassWithSubtype&lt;T&gt;::Sub&amp; ClassWithSubtype&lt;T&gt;::Sub::operator=( const ClassWithSubtype&lt;T&gt;::Sub&amp; other )\n{\n    //do sth.\n}\n</code></pre>\n\n<p>I can completely understand that C++ requires the keyword <code>typename</code> for the return type. What I do not understand is why NO <code>typename</code> is needed for the argument type of the example function <code>check</code> (which is commented out). Furthermore, why is a <code>typename</code> required in the definition of the assignment operator, but not in its declaration?</p>\n"}, {"tags": ["c++", "wxwidgets"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 3191893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d77672660d915dd3776c7369e8f29cb?s=128&d=identicon&r=PG&f=1", "display_name": "Alessandro", "link": "https://stackoverflow.com/users/3191893/alessandro"}, "edited": false, "score": 0, "creation_date": 1426215836, "post_id": 28996685, "comment_id": 46291041, "body": "Hi VZ. Thanks for your answer. I created the class to support some custom protocols. So, when I call, in my App <code>wxXmlResource::Get()-&gt;Load(&quot;rsrc:my_icon&quot;)</code>, my class should be called to handle the protocol. Indeed, the <code>CanOpen()</code> member function is called. But the <code>OpenFile()</code> don&#39;t. I actually created the class with <code>wxDECLARE_ABSTRACT_CLASS()</code> and <code>wxIMPLEMENT_ABSTRACT_CLASS()</code> but didn&#39;t work. I also tried <code>wxDECLARE_DYNAMIC_CLASS()</code> and its companion <code>wxIMPLEMENT_DYNAMIC_CLASS()</code>. Also didn&#39;t work. It should. I think I must investigate more."}], "owner": {"reputation": 18238, "user_id": 15275, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WNTZ3.jpg?s=128&g=1", "display_name": "VZ.", "link": "https://stackoverflow.com/users/15275/vz"}, "is_accepted": false, "score": 0, "last_activity_date": 1426105706, "creation_date": 1426105706, "answer_id": 28996685, "question_id": 28995578, "link": "https://stackoverflow.com/questions/28995578/wxwidgets-wxfilesystemhandleropenfile-never-gets-called/28996685#28996685", "title": "wxWidgets wxFileSystemHandler::OpenFile() never gets called", "body": "<p>Not sure what exactly are you doing, i.e. when do you expect your handler to be called, but in any case <code>MakeLocal()</code> is supposed to create a new instance of the same class if you mark the object as being dynamically creatable using wxRTTI macros and use the object as given otherwise. So if you really need the same <em>object</em> to be reused, you probably need to use <code>wxDECLARE_ABSTRACT_CLASS()</code> in its class. But OTOH why is it a problem to make a new instance?</p>\n"}], "owner": {"reputation": 25, "user_id": 3191893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d77672660d915dd3776c7369e8f29cb?s=128&d=identicon&r=PG&f=1", "display_name": "Alessandro", "link": "https://stackoverflow.com/users/3191893/alessandro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1426105706, "creation_date": 1426101920, "question_id": 28995578, "link": "https://stackoverflow.com/questions/28995578/wxwidgets-wxfilesystemhandleropenfile-never-gets-called", "title": "wxWidgets wxFileSystemHandler::OpenFile() never gets called", "body": "<p>I extended the class <code>wxFileSystemHandler</code> to handle special protocols I use in my application. My implementation of <code>wxFileSystemHandler::CanOpen()</code> is called, recognizes the protocol and returns <strong>TRUE</strong>. But my implementation of <code>wxFileSystemHandler::OpenFile()</code> never gets called. I inspected the wxWidgets code and saw that the <code>CanOpen()</code> member function is called by the pointer that I registered. But when a call to <code>OpenFile()</code> is made they pass the pointer to a <code>wxFileSystem::MakeLocal()</code> member function that tries to get another pointer inside a hash map that, obviously, is not my instance.</p>\n\n<p>Someone got a problem like this before?</p>\n"}, {"tags": ["c++", "ffmpeg", "yuv"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4660051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/184cd55197337d0fb84d43784c08f37b?s=128&d=identicon&r=PG&f=1", "display_name": "Vaigard", "link": "https://stackoverflow.com/users/4660051/vaigard"}, "edited": false, "score": 0, "creation_date": 1426268743, "post_id": 28999079, "comment_id": 46318072, "body": "O, thank you! And could you tell me the meaning of the <code>linesize</code>?"}, {"owner": {"reputation": 11, "user_id": 4660051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/184cd55197337d0fb84d43784c08f37b?s=128&d=identicon&r=PG&f=1", "display_name": "Vaigard", "link": "https://stackoverflow.com/users/4660051/vaigard"}, "edited": false, "score": 0, "creation_date": 1426268803, "post_id": 28999079, "comment_id": 46318104, "body": "That is, all samples brightness stored in the array data [0] sequentially from line to line? And treatment <code>pFrame-&gt; data [0] [y + pFrame-&gt; width]</code> give me the first sample of the second row?"}, {"owner": {"reputation": 27067, "user_id": 210785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a561cd4d29738e18d9e565a6265d86ac?s=128&d=identicon&r=PG", "display_name": "szatmary", "link": "https://stackoverflow.com/users/210785/szatmary"}, "reply_to_user": {"reputation": 11, "user_id": 4660051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/184cd55197337d0fb84d43784c08f37b?s=128&d=identicon&r=PG&f=1", "display_name": "Vaigard", "link": "https://stackoverflow.com/users/4660051/vaigard"}, "edited": false, "score": 0, "creation_date": 1426290154, "post_id": 28999079, "comment_id": 46327215, "body": "Yes, they are stored sequentially. No <code>y + pFrame-&gt; width</code> will not give you the second row. <code>y + pFrame-&gt;linesize[0]</code> will. Line size (also called stride) is the number of bytes per line. This can be larger (but not smaller) that width, if there is padding. see here <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa473780%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}, {"owner": {"reputation": 11, "user_id": 4660051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/184cd55197337d0fb84d43784c08f37b?s=128&d=identicon&r=PG&f=1", "display_name": "Vaigard", "link": "https://stackoverflow.com/users/4660051/vaigard"}, "edited": false, "score": 0, "creation_date": 1426360167, "post_id": 28999079, "comment_id": 46343713, "body": "Thank you all understand. Could you help with this issue: [<a href=\"http://stackoverflow.com/questions/29039083/dwt-of-frames-by-ffmpeg-api]\" title=\"dwt of frames by ffmpeg api%5d\">stackoverflow.com/questions/29039083/&hellip;</a>?"}], "owner": {"reputation": 27067, "user_id": 210785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a561cd4d29738e18d9e565a6265d86ac?s=128&d=identicon&r=PG", "display_name": "szatmary", "link": "https://stackoverflow.com/users/210785/szatmary"}, "is_accepted": false, "score": 1, "last_activity_date": 1426115754, "last_edit_date": 1426115754, "creation_date": 1426115229, "answer_id": 28999079, "question_id": 28995569, "link": "https://stackoverflow.com/questions/28995569/ffmpeg-api-decode-mpeg-to-yuv-frames-and-change-these-frames/28999079#28999079", "title": "FFMPEG API: decode MPEG to YUV frames and change these frames", "body": "<p>If you use libav* to decode, you will receive the frames in their native colorspace (usually YUV 420) But it is what ever was chosen at encode time. Assuming you are in YUV420 or convert to YUV420 <code>y: AVFrame-&gt;data[0]</code>, <code>u: AVFrame-&gt;data[1]</code>, <code>v: AVFrame-&gt;data[2]</code></p>\n\n<p>For Y, 1 byte per pixel <code>AVFrame-&gt;data[0][(x*AVFrame-&gt;linesize[0]) + y]</code>\nFor U and V its 4 pixles per byte (quarter resolution of Y plane). So\n<code>AVFrame-&gt;data[1][(x/2*AVFrame-&gt;linesize[1]) + y/2]</code>, <code>AVFrame-&gt;data[2][(x/2*AVFrame-&gt;linesize[2]) + y/2]</code> </p>\n"}], "owner": {"reputation": 11, "user_id": 4660051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/184cd55197337d0fb84d43784c08f37b?s=128&d=identicon&r=PG&f=1", "display_name": "Vaigard", "link": "https://stackoverflow.com/users/4660051/vaigard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1194, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1426115754, "creation_date": 1426101895, "last_edit_date": 1426104459, "question_id": 28995569, "link": "https://stackoverflow.com/questions/28995569/ffmpeg-api-decode-mpeg-to-yuv-frames-and-change-these-frames", "title": "FFMPEG API: decode MPEG to YUV frames and change these frames", "body": "<p>I need save all frames from MPEG4 or H.264 video to YUV-frames using C++ library. For example, in .yuv, .y4m or .y format. Then I need read these frames like a digital files and change some samples (Y-value). How can I do it without convert to RGB?</p>\n\n<p>And how store values of AVFrame->data? Where store Y-, U- and V-values?</p>\n\n<p>Thanks and sorry for my English=)</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 9968, "user_id": 312725, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9GV9q.jpg?s=128&g=1", "display_name": "Max Yankov", "link": "https://stackoverflow.com/users/312725/max-yankov"}, "edited": false, "score": 0, "creation_date": 1426102037, "post_id": 28995596, "comment_id": 46239364, "body": "What abut all the <code>new</code> and <code>delete</code>?"}, {"owner": {"reputation": 120111, "user_id": 469935, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/14lYV.jpg?s=128&g=1", "display_name": "Armen Tsirunyan", "link": "https://stackoverflow.com/users/469935/armen-tsirunyan"}, "reply_to_user": {"reputation": 9968, "user_id": 312725, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9GV9q.jpg?s=128&g=1", "display_name": "Max Yankov", "link": "https://stackoverflow.com/users/312725/max-yankov"}, "edited": false, "score": 0, "creation_date": 1426102264, "post_id": 28995596, "comment_id": 46239498, "body": "@golergka:  That can be taken care of my smart pointers. See edit."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1426103204, "post_id": 28995596, "comment_id": 46240059, "body": "I would go further and change the return type of <code>CreateStuff()</code> to a smart pointer."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 9968, "user_id": 312725, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9GV9q.jpg?s=128&g=1", "display_name": "Max Yankov", "link": "https://stackoverflow.com/users/312725/max-yankov"}, "edited": false, "score": 0, "creation_date": 1426105293, "post_id": 28995596, "comment_id": 46241256, "body": "@golergka: you still have to use <code>new</code> (unless you use <code>make_shared()</code> instead), but the whole purpose of smart pointers is to call <code>delete</code> automatically for you.  You should really strive to <i>avoid</i> calling <code>new</code> and <code>delete</code> directly as much as possible, let the framework handle it for you."}], "owner": {"reputation": 120111, "user_id": 469935, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/14lYV.jpg?s=128&g=1", "display_name": "Armen Tsirunyan", "link": "https://stackoverflow.com/users/469935/armen-tsirunyan"}, "is_accepted": false, "score": 5, "last_activity_date": 1426105138, "last_edit_date": 1426105138, "creation_date": 1426101989, "answer_id": 28995596, "question_id": 28995502, "link": "https://stackoverflow.com/questions/28995502/how-to-properly-implement-creation-and-allocation-of-a-list-of-objects-known-o/28995596#28995596", "title": "How to properly implement creation (and allocation) of a list of objects known only by abstract base in C++?", "body": "<p>If you want polymorphism, you have to use pointers. </p>\n\n<pre><code>BaseStuff* CreateStuff()\n{\n   ...\n}\n\nList&lt;BaseStuff*&gt; allTheStuff = CreateListOfStuff();\n</code></pre>\n\n<p>Indeed, you should <em>prefer</em> stack allocation to heap allocation, <em>when possible</em>. But it's not always possible.</p>\n\n<p>Of course, instead of raw pointers, which are inherently unsafe, you may consider using <em>smart</em> pointers - <a href=\"http://en.cppreference.com/w/cpp/memory/unique_ptr\" rel=\"nofollow\">unique_ptr</a>, <a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr\" rel=\"nofollow\">shared_ptr</a>, etc, but smart pointers nonetheless</p>\n\n<pre><code>List&lt;shared_ptr&lt;BaseStuff&gt;&gt; = CreateListOfStuff\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9968, "user_id": 312725, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9GV9q.jpg?s=128&g=1", "display_name": "Max Yankov", "link": "https://stackoverflow.com/users/312725/max-yankov"}, "edited": false, "score": 0, "creation_date": 1426107653, "post_id": 28995755, "comment_id": 46242618, "body": "Thanks for your help. But what I wanted to implement still doesn&#39;t work: <a href=\"http://coliru.stacked-crooked.com/a/e95d88ccb2e285e6\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/e95d88ccb2e285e6</a>"}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "reply_to_user": {"reputation": 9968, "user_id": 312725, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9GV9q.jpg?s=128&g=1", "display_name": "Max Yankov", "link": "https://stackoverflow.com/users/312725/max-yankov"}, "edited": false, "score": 0, "creation_date": 1426155731, "post_id": 28995755, "comment_id": 46259815, "body": "@golergka you can&#39;t make a <code>std::vector</code> of <code>const std::unique_ptr</code>. Also, <code>const</code> on return value is silly (if not completely useless). Just make the variables themselves <code>const</code>. See <a href=\"http://coliru.stacked-crooked.com/a/ef9a3a7916221d92\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 9968, "user_id": 312725, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9GV9q.jpg?s=128&g=1", "display_name": "Max Yankov", "link": "https://stackoverflow.com/users/312725/max-yankov"}, "edited": false, "score": 0, "creation_date": 1426156241, "post_id": 28995755, "comment_id": 46260104, "body": "thanks! But shouldn&#39;t I make everything immutable by default?"}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "reply_to_user": {"reputation": 9968, "user_id": 312725, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9GV9q.jpg?s=128&g=1", "display_name": "Max Yankov", "link": "https://stackoverflow.com/users/312725/max-yankov"}, "edited": false, "score": 0, "creation_date": 1426156328, "post_id": 28995755, "comment_id": 46260153, "body": "@golergka it won&#39;t have any effect; anyone can copy the <code>const</code> return value of a function into a non-<code>const</code> variable. That&#39;s why it&#39;s up to you to make the variable itself <code>const</code>, and leave the function without."}, {"owner": {"reputation": 9968, "user_id": 312725, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9GV9q.jpg?s=128&g=1", "display_name": "Max Yankov", "link": "https://stackoverflow.com/users/312725/max-yankov"}, "edited": false, "score": 0, "creation_date": 1426156623, "post_id": 28995755, "comment_id": 46260344, "body": "why it is even in the language then?"}, {"owner": {"reputation": 9968, "user_id": 312725, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9GV9q.jpg?s=128&g=1", "display_name": "Max Yankov", "link": "https://stackoverflow.com/users/312725/max-yankov"}, "edited": false, "score": 0, "creation_date": 1426156723, "post_id": 28995755, "comment_id": 46260404, "body": "Ah, it&#39;s for returning references and pointers \u2014 but for returning values const doesn&#39;t make any sense. Got it."}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "reply_to_user": {"reputation": 9968, "user_id": 312725, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9GV9q.jpg?s=128&g=1", "display_name": "Max Yankov", "link": "https://stackoverflow.com/users/312725/max-yankov"}, "edited": false, "score": 1, "creation_date": 1426156813, "post_id": 28995755, "comment_id": 46260468, "body": "@golergka well, there&#39;s a lot in the language, and it has its &quot;use&quot;. You&#39;re right about references, but pointers have the same &quot;problem&quot; as, say, <code>int</code>, because you can just take a copy into a non-<code>const</code> variable. For a bit more background, follow the string of duplicates to <a href=\"http://stackoverflow.com/questions/25360617/does-returning-by-const-value-affect-return-value-optimization\">Does returning by const value affect return value optimization?</a>"}], "owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "is_accepted": true, "score": 3, "last_activity_date": 1426156432, "last_edit_date": 1426156432, "creation_date": 1426102504, "answer_id": 28995755, "question_id": 28995502, "link": "https://stackoverflow.com/questions/28995502/how-to-properly-implement-creation-and-allocation-of-a-list-of-objects-known-o/28995755#28995755", "title": "How to properly implement creation (and allocation) of a list of objects known only by abstract base in C++?", "body": "<p>You're going to store polymorphic pointers to a base class that actually point to a derived type (note I used <code>std::unique_ptr</code>s here):</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;vector&gt;\n\nclass Base\n{\npublic:\n  virtual void shout() = 0;\n};\nclass Child : public Base\n{\npublic:\n  void shout() { std::cout &lt;&lt; \"Child!\\n\"; }\n};\nclass Orphan : public Base\n{\npublic:\n  void shout() { std::cout &lt;&lt; \"Orphan!\\n\"; }\n};\n\nint main()\n{\n  std::vector&lt;std::unique_ptr&lt;Base&gt;&gt; the_list;\n  the_list.reserve(3);\n  the_list.emplace_back(std::make_unique&lt;Child&gt;());\n  the_list.emplace_back(std::make_unique&lt;Orphan&gt;());\n  the_list.emplace_back(std::make_unique&lt;Child&gt;());\n\n  for(const auto&amp; item : the_list)\n  {\n    item-&gt;shout(); // remember, items are (smart) pointers!\n  }\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/146024f65d692933\" rel=\"nofollow\">Live example</a>.\nYou can only store one type in a Standard C++ container, so you must store a (smart) pointer to Base here.</p>\n"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 0, "last_activity_date": 1426104185, "creation_date": 1426104185, "answer_id": 28996258, "question_id": 28995502, "link": "https://stackoverflow.com/questions/28995502/how-to-properly-implement-creation-and-allocation-of-a-list-of-objects-known-o/28996258#28996258", "title": "How to properly implement creation (and allocation) of a list of objects known only by abstract base in C++?", "body": "<p>One thing you frequently (usually?) do in situations like this is define a member function (traditionally named <code>clone</code>) in the base class to create a copy of an object:</p>\n\n<pre><code>class BaseStuff { \npublic:\n    virtual BaseStuff *clone() const = 0;\n};\n\nclass SomeStuff : public BaseStuff {     \n    virtual void SomeStuff *clone() const { \n        return new SomeStuff(*this); // needs a correctly functioning copy ctor\n    }\n};\n\nclass OtherStuff : public BaseStuff {\npublic: \n    virtual OtherStuff *clone() const { \n        return new OtherStuff(*this);\n    }\n};\n</code></pre>\n\n<p>This lets us copy an item via a pointer to the base, without slicing. This way if you want (for example) your <code>ListOfStuff</code> to store copies of the items you put into it (rather than just pointers to the original items, which may cease to exist, leaving dangling pointers) you can add an item something like this:</p>\n\n<pre><code>class ListOfStuff { \n    class Node {\n        // Note: this is extremely incomplete. Almost certainly needs a dtor,\n        // and you want to either implement or delete the copy ctor to either\n        // do copying correctly, or assure it can't happen at all.\n        Node *next;\n        BaseStuff *data;\n    public:\n        Node(BaseStuff *data, Node *next = nullptr) : data(data), next(next) {}\n    };\n\n    Node *begin, *end;\n\npublic:\n    Add(BaseStuff *item) { \n        BaseStuff *new_item = item-&gt;clone();\n        end-&gt;next = new node(new_item);\n        end = end-&gt;next;\n    }    \n};\n</code></pre>\n\n<p>With one minor modification, I'd agree with Armen Tsirunyan's basic point: when you're dealing with a polymorphic hierarchy, you normally have to do so via a pointer, or (the modification) a reference.</p>\n\n<p>You <em>can</em> use smart pointers instead of pointers in many cases--but not in all cases, and choosing the correct smart pointer for a specific situation can be non-trivial in itself. You do usually want <em>some</em> sort of wrapper around your pointers though--the code above avoids them primarily because I don't know enough about what you're doing to pick the correct one.</p>\n"}], "owner": {"reputation": 9968, "user_id": 312725, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9GV9q.jpg?s=128&g=1", "display_name": "Max Yankov", "link": "https://stackoverflow.com/users/312725/max-yankov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 28995755, "answer_count": 3, "score": 3, "last_activity_date": 1426156432, "creation_date": 1426101628, "last_edit_date": 1495541574, "question_id": 28995502, "link": "https://stackoverflow.com/questions/28995502/how-to-properly-implement-creation-and-allocation-of-a-list-of-objects-known-o", "title": "How to properly implement creation (and allocation) of a list of objects known only by abstract base in C++?", "body": "<p><a href=\"https://stackoverflow.com/questions/6500313/why-should-c-programmers-minimize-use-of-new\">I should prefer stack allocation to heap allocation</a>. <a href=\"http://web.archive.org/web/20140113221447/http://cpp-next.com/archive/2009/08/want-speed-pass-by-value/\" rel=\"nofollow noreferrer\">It's better to pass by value</a> (<a href=\"https://stackoverflow.com/questions/19394426/c-returning-reference-to-new-object\">especially if you're creating new objects</a> \u2014 but at the same time, <a href=\"https://stackoverflow.com/questions/274626/what-is-object-slicing\">if you return by base class, your object will be sliced</a>), or <a href=\"https://stackoverflow.com/questions/7058339/c-when-to-use-references-vs-pointers\">at least by reference than passing pointers</a> (although <a href=\"https://stackoverflow.com/questions/922360/why-cant-i-make-a-vector-of-references\">you can't create a vector of references</a>).</p>\n\n<p>I read all of this carefully, and now I feel that I know less that I knew before. I don't have a slightest idea about how to write a code that, IMO, should be trivial, while respecting the best practices mentioned in all of these well-written and thought-through answers.</p>\n\n<p>Here's what I want to implement. (I don't pretend that it's correct C++, but I just want to convey the idea).</p>\n\n<pre><code>// This thing is purely virtual!\nclass BaseStuff { }\n\n// Has important behaviour and data members that shouldn't be sliced\nclass SomeStuff : public BaseStuff { }\n\n// Don't slice me plz\nclass OtherStuff : public BaseStuff { }\n\nBaseStuff CreateStuff()\n{\n    // falls a set of rules to create SomeStuff or OtherStuff instance based on phase of the moon\n}\n\nstd::vector&lt;BaseStuff&gt; CreateListOfStuff()\n{\n    // calls CreateStuff a lot\n}\n\npublic static void main()\n{\n    List&lt;BaseStuff&gt; allTheStuff = CreateListOfStuff();\n    // to things with stuff\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11"], "answers": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "is_accepted": true, "score": 2, "last_activity_date": 1426102707, "creation_date": 1426102707, "answer_id": 28995832, "question_id": 28995481, "link": "https://stackoverflow.com/questions/28995481/how-to-move-a-variable-into-a-lambda-expression/28995832#28995832", "title": "How to move a variable into a lambda expression?", "body": "<blockquote>\n  <p>Is using the closure equivalent to the code that calls the bar function directly?</p>\n</blockquote>\n\n<p>Yes, they're equivalent in this code.  Captured references aren't special in any way that I can think of: you have fully defined behavior, as long as <code>f</code> is in scope and can be moved from.</p>\n"}], "owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "accepted_answer_id": 28995832, "answer_count": 1, "score": 4, "last_activity_date": 1426102707, "creation_date": 1426101550, "last_edit_date": 1495540611, "question_id": 28995481, "link": "https://stackoverflow.com/questions/28995481/how-to-move-a-variable-into-a-lambda-expression", "title": "How to move a variable into a lambda expression?", "body": "<p>I see the C++11 documentation (<a href=\"http://en.cppreference.com/w/cpp/language/lambda\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/language/lambda</a>) for lambda expressions states capture by value and reference are supported but not rvalue reference. The closest SO question I could find related to this is: <a href=\"https://stackoverflow.com/questions/8236521/how-to-capture-a-unique-ptr-into-a-lambda-expression\">How to capture a unique_ptr into a lambda expression?</a>, but it seems like my use case doesn't require the use of <code>std::bind</code>.</p>\n\n<h2>Code</h2>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n\nclass Foo\n{\npublic:\n    explicit Foo(int value = 0) : mValue(value) {}\n\n    // The following items are provided just to be explicit\n    Foo(Foo &amp;&amp;other) = default;\n    Foo &amp;operator=(Foo &amp;&amp;other) = default;\n    Foo(const Foo &amp;other) = delete;\n    Foo &amp;operator=(const Foo &amp;other) = delete;\n    ~Foo() {}\n\n    int mValue;\n};\n\nvoid bar(std::unique_ptr&lt;Foo&gt; f)\n{\n    std::cout &lt;&lt; \"bar:  \" &lt;&lt; std::dec &lt;&lt; f-&gt;mValue &lt;&lt; \"\\n\";\n}\n\nint main()\n{\n    {\n        std::unique_ptr&lt;Foo&gt; f(new Foo(22));\n        std::cout &lt;&lt; \"main: \" &lt;&lt; std::hex &lt;&lt; f.get() &lt;&lt; \"\\n\";\n\n        // Call the bar function directly (requires using std::move)\n        bar(std::move(f));\n        std::cout &lt;&lt; \"main: \" &lt;&lt; std::hex &lt;&lt; f.get() &lt;&lt; \"\\n\";\n    }\n\n    {\n        std::unique_ptr&lt;Foo&gt; f(new Foo(99));\n        std::cout &lt;&lt; \"main: \" &lt;&lt; std::hex &lt;&lt; f.get() &lt;&lt; \"\\n\";\n\n        // Lamda expression captures 'f' by reference and then calls the bar function (again, requires using std::move)\n        auto fn = [&amp;f](){ bar(std::move(f)); };\n        fn(); // Execute the closure\n        std::cout &lt;&lt; \"main: \" &lt;&lt; std::hex &lt;&lt; f.get() &lt;&lt; \"\\n\";\n    }\n\n    return 0;\n}\n</code></pre>\n\n<h2>Example Output</h2>\n\n<pre><code>main: 0x92e010\nbar:  22\nmain: 0\nmain: 0x92e010\nbar:  99\nmain: 0\n</code></pre>\n\n<p>By examining the output it <em>appears</em> this program is <em>running correctly</em> (i.e., the observed results are what I expected. However, I have the following questions.</p>\n\n<h2>Questions</h2>\n\n<ol>\n<li>Is using the closure equivalent to the code that calls the <code>bar</code> function directly?\n\n<ul>\n<li>I'm asking explicitly since the documentation (see beginning of the question) about lambda expressions didn't state anything about using <code>std::move</code> on captured references (i.e., I want to make sure this doesn't run afoul of <code>undefined behavior</code> or similar bad outcomes).</li>\n</ul></li>\n<li>If the answer to the first question is \"you can't use <code>std::move</code> on the captured reference\", then what is the right way to do this (e.g., the <code>std::bind</code> solution, etc)?</li>\n</ol>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1426101605, "post_id": 28995475, "comment_id": 46239109, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/q/21529194/1708801\">C++ warning: deprecated conversion from string constant to \u2018char*\u2019</a>"}, {"owner": {"reputation": 53, "user_id": 4248344, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_rTfqKZFdXc/AAAAAAAAAAI/AAAAAAAAABc/_MvCEZr4WXI/photo.jpg?sz=128", "display_name": "Lazy Shetty", "link": "https://stackoverflow.com/users/4248344/lazy-shetty"}, "reply_to_user": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1426102356, "post_id": 28995475, "comment_id": 46239550, "body": "@dasblinkenlight , only the title is identical,.. doubt and code are totally different, can you help me understand whats happening here and how to correct it..??"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1426102664, "post_id": 28995475, "comment_id": 46239740, "body": "@LazyShetty The code is always different, but the problem is the same. You are missing <code>const</code> in front of <code>char *n</code> in <code>setdata</code>."}, {"owner": {"reputation": 53, "user_id": 4248344, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_rTfqKZFdXc/AAAAAAAAAAI/AAAAAAAAABc/_MvCEZr4WXI/photo.jpg?sz=128", "display_name": "Lazy Shetty", "link": "https://stackoverflow.com/users/4248344/lazy-shetty"}, "edited": false, "score": 0, "creation_date": 1426103004, "post_id": 28995475, "comment_id": 46239923, "body": "yes it solved the warning."}, {"owner": {"reputation": 53, "user_id": 4248344, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_rTfqKZFdXc/AAAAAAAAAAI/AAAAAAAAABc/_MvCEZr4WXI/photo.jpg?sz=128", "display_name": "Lazy Shetty", "link": "https://stackoverflow.com/users/4248344/lazy-shetty"}, "edited": false, "score": 0, "creation_date": 1426103239, "post_id": 28995475, "comment_id": 46240079, "body": "but does this means &quot;if i&#39;m assigning value received as an argument to a constant pointer (in this case &quot;name&quot;) then i must mention the const with the argument (like const char *n)&quot;..??"}], "owner": {"reputation": 53, "user_id": 4248344, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_rTfqKZFdXc/AAAAAAAAAAI/AAAAAAAAABc/_MvCEZr4WXI/photo.jpg?sz=128", "display_name": "Lazy Shetty", "link": "https://stackoverflow.com/users/4248344/lazy-shetty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "closed_date": 1426101670, "answer_count": 0, "score": 0, "last_activity_date": 1426102915, "creation_date": 1426101524, "last_edit_date": 1426102915, "question_id": 28995475, "link": "https://stackoverflow.com/questions/28995475/deprecated-string-constant-to-char-conversion-warning-in-cpp", "closed_reason": "Duplicate", "title": "deprecated string constant to char conversion warning in CPP", "body": "<p>i'm trying the below basic program, where i'm getting a warning on compailing.</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;cstring&gt;\n\nusing namespace std;\n\nclass employee\n{\nprivate:\n    char name[20];\n    int age;\n    float sal;\npublic:\n    void setdata (char *n, int a, float s)\n    {\n        strcpy (name, n);\n        age = a;\n        sal = s;\n    }\n    void showdata()\n    {\n        cout &lt;&lt; endl &lt;&lt; name &lt;&lt; '\\t' &lt;&lt; age &lt;&lt; '\\t' &lt;&lt; sal &lt;&lt; endl;\n    }\n};\n\n\nint main ()\n{\n\n    employee e1;\n\n    e1.setdata(\"ajay\", 23, 4500.50);\n    e1.showdata();\n    return 0;\n}\n</code></pre>\n\n<p>But, as soon as i compile this i get the below error;</p>\n\n<p><code>deprecated conversion from string constant to 'char*' [-Wwrite-strings]</code></p>\n\n<p>Please explain why am i getting this error, and also the resolution to eliminate. and how dose the resolution works..</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c++", "multithreading", "pthreads", "cocos2d-x"], "answers": [{"owner": {"reputation": 575, "user_id": 2314016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hUm8h.jpg?s=128&g=1", "display_name": "Rajeev", "link": "https://stackoverflow.com/users/2314016/rajeev"}, "is_accepted": false, "score": 6, "last_activity_date": 1426102957, "creation_date": 1426102957, "answer_id": 28995915, "question_id": 28995470, "link": "https://stackoverflow.com/questions/28995470/how-to-support-multi-threading-in-cocos2d-x/28995915#28995915", "title": "How to support Multi threading in cocos2d-x", "body": "<p>UI related stuff must be performed on cocos thread otherwise it may lead to undefined behaviour as per my experience. \nYou can try following steps:</p>\n\n<ol>\n<li>Create a function that will perform required UI related stuff on a particular event</li>\n<li><p>Call the method from your pthread to be performed on cocos thread as follows:</p>\n\n<p>auto scheduler = Director::getInstance()->getScheduler();</p>\n\n<p>scheduler-> performFunctionInCocosThread(CC_CALLBACK_0(YourClass::updateUI, this)); </p></li>\n</ol>\n\n<p>Here <strong>updateUI</strong> function which is defined in <strong>YourClass</strong> will be responsible to perform UI related operations. </p>\n"}], "owner": {"reputation": 402, "user_id": 779863, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d23e935b0f3d94b6b1029b05faf8c64d?s=128&d=identicon&r=PG", "display_name": "Aymen", "link": "https://stackoverflow.com/users/779863/aymen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3700, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1426102957, "creation_date": 1426101507, "question_id": 28995470, "link": "https://stackoverflow.com/questions/28995470/how-to-support-multi-threading-in-cocos2d-x", "title": "How to support Multi threading in cocos2d-x", "body": "<p>i m using cocos2d-x V3.4 and i still cannot find a good example on how to use multi threading. i m using pthread as worker thread to do some background processing. from within the pthread,i trigger some custom events (Director::getInstance()->getEventDispatcher()->dispatchEvent(&amp;evt);) to update the UI.things are working fine as long as the triggered events do not add any graphic to the UI (addChild). moving sprites around doesnt look to have any issue. but once the pthread fires an event (EventCustom) that needs to add a ui node (DrawNode in my case), i get a black screen. from what i could find on the web, the pthread is not supposed to fire those events. he just need to fill up a queue of events and schedule pulling those events from the UIThread to render. What i did was having an std::vector as member of a singleton class GameManager. my pthread pushes to that list. and i scheduled a pulling from that list. but my app keep crashing. So i m pretty sure that what i m doing is not the right way. </p>\n"}, {"tags": ["c++", "multithreading", "c++11", "packaged-task"], "comments": [{"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 1, "creation_date": 1426103869, "post_id": 28995421, "comment_id": 46240471, "body": "The problem is not your use of <code>packaged_task</code>, it&#39;s your use of <code>bind</code>. Remove the <code>packaged_task</code> and try calling <code>bnd(1)</code> and see what happens."}], "answers": [{"owner": {"reputation": 136, "user_id": 2286810, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/437ac0685e9b7acafa736193c1b3943b?s=128&d=identicon&r=PG", "display_name": "user2286810", "link": "https://stackoverflow.com/users/2286810/user2286810"}, "is_accepted": false, "score": 3, "last_activity_date": 1426103595, "creation_date": 1426103595, "answer_id": 28996090, "question_id": 28995421, "link": "https://stackoverflow.com/questions/28995421/how-do-i-create-a-packaged-task-with-a-member-function/28996090#28996090", "title": "How do I create a packaged_task with a member function?", "body": "<p>by adding up a placeholder like:</p>\n\n<pre><code>auto bnd = std::bind(&amp;S::calc, s, std::placeholders::_1)\n</code></pre>\n"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 1, "last_activity_date": 1426106522, "last_edit_date": 1426106522, "creation_date": 1426105387, "answer_id": 28996590, "question_id": 28995421, "link": "https://stackoverflow.com/questions/28995421/how-do-i-create-a-packaged-task-with-a-member-function/28996590#28996590", "title": "How do I create a packaged_task with a member function?", "body": "<p><code>std::bind</code> is quirky.</p>\n\n<p>Replace your use of <code>std::bind</code> with:</p>\n\n<pre><code>template&lt;class T, class Sig&gt;\nstruct bound_member;\n\ntemplate&lt;class T, class R, class...Args&gt;\nstruct bound_member&lt;T, R(Args...)&gt; {\n  T* t;\n  R(T::*m)(Args...);\n  R operator()(Args...args)const {\n    return (t-&gt;*m)(std::forward&lt;Args&gt;(args)...);\n};\n\ntemplate&lt;class T, class R, class...Args&gt;\nbound_member&lt;T,R(Args...)&gt; bind_member( T* t, R(T::*m)(Args...) ) {\n  return {t,m};\n}\ntemplate&lt;class T, class R, class...Args&gt;\nbound_member&lt;T,R(Args...)&gt; bind_member( T&amp; t, R(T::*m)(Args...) ) {\n  return {&amp;t,m};\n}\ntemplate&lt;class T, class R, class...Args&gt;\nbound_member&lt;T,R(Args...)&gt; bind_member( T&amp;&amp; t, R(T::*m)(Args...) )\n=delete; // avoid lifetime issues?\n</code></pre>\n\n<p>and now <code>auto bnd = bind_member(s, S::calc);</code> should make your code work.</p>\n\n<p>There are few situations where a lambda isn't a better idea than <code>std::bind</code>, especially by C++14.  In C++11, there are some corner cases, but even then I usually prefer to write my own binders without the quirks of <code>std::bind</code>.</p>\n"}], "owner": {"reputation": 136, "user_id": 2286810, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/437ac0685e9b7acafa736193c1b3943b?s=128&d=identicon&r=PG", "display_name": "user2286810", "link": "https://stackoverflow.com/users/2286810/user2286810"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 436, "favorite_count": 1, "accepted_answer_id": 28996590, "answer_count": 2, "score": 2, "last_activity_date": 1426106522, "creation_date": 1426101337, "last_edit_date": 1426105107, "question_id": 28995421, "link": "https://stackoverflow.com/questions/28995421/how-do-i-create-a-packaged-task-with-a-member-function", "title": "How do I create a packaged_task with a member function?", "body": "<p>On the program below, I'm trying to create a packaged_task with a member function:</p>\n\n<pre><code>#include &lt;future&gt;\nusing namespace std;\n\nstruct S\n{\n    int calc(int&amp; a)\n    {\n        return a*a;\n    }\n};\n\nint main()\n{\n    S s;\n    auto bnd = std::bind(&amp;S::calc, s);\n    std::packaged_task&lt;int(int&amp;)&gt; task( bnd);\n    return 0;\n}\n</code></pre>\n\n<p>Unfortunately the attempt results in an error.</p>\n\n<p>How can this be done?</p>\n"}, {"tags": ["c++", "gcc", "netbeans", "netbeans-8"], "comments": [{"owner": {"reputation": 3285, "user_id": 2961540, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/sECMV.jpg?s=128&g=1", "display_name": "HEKTO", "link": "https://stackoverflow.com/users/2961540/hekto"}, "edited": false, "score": 0, "creation_date": 1426109368, "post_id": 28995335, "comment_id": 46243618, "body": "Do you have makefile in your project directory?"}, {"owner": {"reputation": 16373, "user_id": 1175327, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1199adfcd4dd666a006dfedffbaf24a8?s=128&d=identicon&r=PG", "display_name": "Vivendi", "link": "https://stackoverflow.com/users/1175327/vivendi"}, "reply_to_user": {"reputation": 3285, "user_id": 2961540, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/sECMV.jpg?s=128&g=1", "display_name": "HEKTO", "link": "https://stackoverflow.com/users/2961540/hekto"}, "edited": false, "score": 0, "creation_date": 1426130475, "post_id": 28995335, "comment_id": 46250337, "body": "@HEKTO Yes the project has a (auto generated) make file"}, {"owner": {"reputation": 3285, "user_id": 2961540, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/sECMV.jpg?s=128&g=1", "display_name": "HEKTO", "link": "https://stackoverflow.com/users/2961540/hekto"}, "edited": false, "score": 0, "creation_date": 1426176198, "post_id": 28995335, "comment_id": 46274001, "body": "I don&#39;t understand - you said this is &quot;Project with Existing Sources&quot;. This type of project can&#39;t have auto-generated makefile"}, {"owner": {"reputation": 16373, "user_id": 1175327, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1199adfcd4dd666a006dfedffbaf24a8?s=128&d=identicon&r=PG", "display_name": "Vivendi", "link": "https://stackoverflow.com/users/1175327/vivendi"}, "reply_to_user": {"reputation": 3285, "user_id": 2961540, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/sECMV.jpg?s=128&g=1", "display_name": "HEKTO", "link": "https://stackoverflow.com/users/2961540/hekto"}, "edited": false, "score": 0, "creation_date": 1426178923, "post_id": 28995335, "comment_id": 46275910, "body": "@HEKTO Netbeans does seem to do something with it. I can tell by the last <i>Access date</i>. The <code>MakeFile</code> isn&#39;t there when I download the Sources."}], "answers": [{"owner": {"reputation": 3285, "user_id": 2961540, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/sECMV.jpg?s=128&g=1", "display_name": "HEKTO", "link": "https://stackoverflow.com/users/2961540/hekto"}, "is_accepted": false, "score": 1, "last_activity_date": 1426209379, "creation_date": 1426209379, "answer_id": 29023229, "question_id": 28995335, "link": "https://stackoverflow.com/questions/28995335/gcc-options-in-netbeans-8-0/29023229#29023229", "title": "gcc options in netbeans 8.0", "body": "<p>If it's a normal <code>C++ Application</code> project, then your NetBeans pulldown menu (to the left of the <code>Build Project</code> button - an icon with hammer) should have at least three lines - <code>Debug</code>, <code>Release</code> and <code>Customize</code>. Choose the <code>Debug</code> configuration to build the project, then the -g option will be added automatically.</p>\n"}], "owner": {"reputation": 16373, "user_id": 1175327, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1199adfcd4dd666a006dfedffbaf24a8?s=128&d=identicon&r=PG", "display_name": "Vivendi", "link": "https://stackoverflow.com/users/1175327/vivendi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 879, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1426209379, "creation_date": 1426101090, "question_id": 28995335, "link": "https://stackoverflow.com/questions/28995335/gcc-options-in-netbeans-8-0", "title": "gcc options in netbeans 8.0", "body": "<p>I'm trying to debug a c++ project (existing code) in Netbeans.</p>\n\n<p>I can run the code fine by hitting the <code>Run</code> button, but debugging isn't working for some reason. I've seen a lot of suggestions telling that the <code>-g</code> flag needs  to be added to the <code>gcc</code> compiler options in Netbeans.</p>\n\n<p>From what I understand this used to be done through the *Aditional options\" field in the project properties. But this field doesn't exist anymore in Netbeans 8.</p>\n\n<p>Where can I add the <code>-g</code> flag to the <code>gcc</code> compiler options in Netbeans 8?</p>\n"}, {"tags": ["c++", "while-loop"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1426190594, "post_id": 28994821, "comment_id": 46282179, "body": "<code>cout &lt;&lt; &quot;|\\n&quot; ; </code> is creating a newline.  If you don&#39;t want any newlines then get rid of it."}], "answers": [{"comments": [{"owner": {"reputation": 434, "user_id": 3703709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7935f2798b555f61085fd5827c9095?s=128&d=identicon&r=PG&f=1", "display_name": "mstbaum", "link": "https://stackoverflow.com/users/3703709/mstbaum"}, "edited": false, "score": 0, "creation_date": 1426100316, "post_id": 28995039, "comment_id": 46238341, "body": "That will do exactly what OP is doing."}, {"owner": {"reputation": 939, "user_id": 2318775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ef1cebc37b45dbaa4617e0169061939?s=128&d=identicon&r=PG&f=1", "display_name": "avim", "link": "https://stackoverflow.com/users/2318775/avim"}, "reply_to_user": {"reputation": 434, "user_id": 3703709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7935f2798b555f61085fd5827c9095?s=128&d=identicon&r=PG&f=1", "display_name": "mstbaum", "link": "https://stackoverflow.com/users/3703709/mstbaum"}, "edited": false, "score": 0, "creation_date": 1426100816, "post_id": 28995039, "comment_id": 46238658, "body": "Not exactly, but I have fixed it"}], "owner": {"reputation": 939, "user_id": 2318775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ef1cebc37b45dbaa4617e0169061939?s=128&d=identicon&r=PG&f=1", "display_name": "avim", "link": "https://stackoverflow.com/users/2318775/avim"}, "is_accepted": false, "score": 0, "last_activity_date": 1426100640, "last_edit_date": 1426100640, "creation_date": 1426100031, "answer_id": 28995039, "question_id": 28994821, "link": "https://stackoverflow.com/questions/28994821/while-loop-looping-on-separate-lines-need-to-be-on-the-same-line/28995039#28995039", "title": "While loop looping on Separate Lines; Need to be on the Same Line", "body": "<p>Replace the inner loop with:</p>\n\n<pre><code>while (--posts)\n    cout &lt;&lt; \"|---\";\ncout &lt;&lt; \"|\\n\";\n</code></pre>\n"}, {"owner": {"reputation": 434, "user_id": 3703709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7935f2798b555f61085fd5827c9095?s=128&d=identicon&r=PG&f=1", "display_name": "mstbaum", "link": "https://stackoverflow.com/users/3703709/mstbaum"}, "is_accepted": false, "score": 0, "last_activity_date": 1426100270, "creation_date": 1426100270, "answer_id": 28995108, "question_id": 28994821, "link": "https://stackoverflow.com/questions/28994821/while-loop-looping-on-separate-lines-need-to-be-on-the-same-line/28995108#28995108", "title": "While loop looping on Separate Lines; Need to be on the Same Line", "body": "<p>Move the cout &lt;&lt; \"|\\n\" outside your while loop.</p>\n\n<pre><code>while ((posts &gt; 1) &amp;&amp; (posts &lt; 19)) \n\n{\n    cout &lt;&lt; \"|---\" ; \n    (posts = posts - 1) ;\n}\n\ncout &lt;&lt; \"|\\n\" ; \n\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 4651446, "user_type": "registered", "profile_image": "https://graph.facebook.com/934444939901977/picture?type=large", "display_name": "Kevin Trujillo", "link": "https://stackoverflow.com/users/4651446/kevin-trujillo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1426101211, "creation_date": 1426099343, "last_edit_date": 1426101211, "question_id": 28994821, "link": "https://stackoverflow.com/questions/28994821/while-loop-looping-on-separate-lines-need-to-be-on-the-same-line", "title": "While loop looping on Separate Lines; Need to be on the Same Line", "body": "<p>I need to my code to output the \"fence posts\" one after each other on the same line, but they are going on different lines. This is my code so far: </p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main(void) {  \n    int posts;\n\n    cout &lt;&lt; \"\\nI can make a fence with from 2 to 18 posts.\\n\";\n    cout &lt;&lt; \"How many posts would you like to have in your fence? \";\n\n    cin &gt;&gt; posts ; \n    if ((posts &gt; 1) &amp;&amp; (posts &lt; 19)) {\n        while ((posts &gt; 1) &amp;&amp; (posts &lt; 19)) {\n            cout &lt;&lt; \"|---\" ; \n            posts = posts - 1;\n            cout &lt;&lt; \"|\\n\" ; \n        }\n    }\n    else {\n        cout &lt;&lt; \"\\n\\nSorry, no can do.\\n\";\n    }\n }\n</code></pre>\n\n<p>And this is what it is outputting: </p>\n\n<pre><code>I can make a fence with from 2 to 18 posts.\nHow many posts would you like to have in your fence? 4   \n|---|  \n|---|  \n|---|   \n</code></pre>\n"}, {"tags": ["c++", "gcc", "linker"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1426101199, "post_id": 28994820, "comment_id": 46238891, "body": "Why don&#39;t you use <code>-Wl,--start-group</code>, <code>-Wl,--end-group</code> to enclose all of the libraries you link to?"}, {"owner": {"reputation": 3558, "user_id": 4589819, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d29fd6d2f29e22c18d200b5108b2ed99?s=128&d=identicon&r=PG&f=1", "display_name": "James Franco", "link": "https://stackoverflow.com/users/4589819/james-franco"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1426101371, "post_id": 28994820, "comment_id": 46238983, "body": "I tried this <code>-o sndlib.dll -Wl,--start-group, -lksguid -lSharedFunctions -lole32 -lwinmm -ldsound  -Wl,--end-group  </code>  but still same result"}, {"owner": {"reputation": 8289, "user_id": 391806, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/88a2ea78dadbdaf73e1033fe7cbdeb73?s=128&d=identicon&r=PG", "display_name": "Dale Wilson", "link": "https://stackoverflow.com/users/391806/dale-wilson"}, "edited": false, "score": 0, "creation_date": 1426102272, "post_id": 28994820, "comment_id": 46239505, "body": "You might try: -Wl,--start-group,-lksguid,-lSharedFunctions,-lole32,-lwinmm&zwnj;&#8203;,-ldsound ,--end-group to be sure the linker sees the options in order.   [yes, I&#39;m guessing]"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 8289, "user_id": 391806, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/88a2ea78dadbdaf73e1033fe7cbdeb73?s=128&d=identicon&r=PG", "display_name": "Dale Wilson", "link": "https://stackoverflow.com/users/391806/dale-wilson"}, "edited": false, "score": 0, "creation_date": 1426102376, "post_id": 28994820, "comment_id": 46239566, "body": "@DaleWilson <i>&quot;yes, I&#39;m guessing&quot;</i> Absolutely! This option is meant to make the order of appearance irrelevant :P ..."}, {"owner": {"reputation": 8289, "user_id": 391806, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/88a2ea78dadbdaf73e1033fe7cbdeb73?s=128&d=identicon&r=PG", "display_name": "Dale Wilson", "link": "https://stackoverflow.com/users/391806/dale-wilson"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1426103019, "post_id": 28994820, "comment_id": 46239932, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Strangely enough sometimes when you run out of ideas, trying things that absolutely won&#39;t work reveals what the problem is.   My  next suggestion would be to try the ld command directly without getting gcc involved."}], "answers": [{"comments": [{"owner": {"reputation": 8289, "user_id": 391806, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/88a2ea78dadbdaf73e1033fe7cbdeb73?s=128&d=identicon&r=PG", "display_name": "Dale Wilson", "link": "https://stackoverflow.com/users/391806/dale-wilson"}, "edited": false, "score": 0, "creation_date": 1426101173, "post_id": 28994998, "comment_id": 46238876, "body": "Or, as a not-so-pretty hack, it is acceptable to list the library twice on the command line.  However if you need to do this you should consider the overall structure of your libraries because it indicates a circular dependency between libraries."}, {"owner": {"reputation": 3558, "user_id": 4589819, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d29fd6d2f29e22c18d200b5108b2ed99?s=128&d=identicon&r=PG&f=1", "display_name": "James Franco", "link": "https://stackoverflow.com/users/4589819/james-franco"}, "edited": false, "score": 0, "creation_date": 1426101248, "post_id": 28994998, "comment_id": 46238916, "body": "I tried specifying the library twice but that unfortunately did not help either"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 3558, "user_id": 4589819, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d29fd6d2f29e22c18d200b5108b2ed99?s=128&d=identicon&r=PG&f=1", "display_name": "James Franco", "link": "https://stackoverflow.com/users/4589819/james-franco"}, "edited": false, "score": 0, "creation_date": 1426101277, "post_id": 28994998, "comment_id": 46238933, "body": "@JamesFranco See my comment on your OP."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 3558, "user_id": 4589819, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d29fd6d2f29e22c18d200b5108b2ed99?s=128&d=identicon&r=PG&f=1", "display_name": "James Franco", "link": "https://stackoverflow.com/users/4589819/james-franco"}, "edited": false, "score": 0, "creation_date": 1426102159, "post_id": 28994998, "comment_id": 46239437, "body": "@JamesFranco I&#39;ve given an update. If this doesn&#39;t work, I&#39;m actually out of clues, sorry."}], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 0, "last_activity_date": 1426102059, "last_edit_date": 1592644375, "creation_date": 1426099848, "answer_id": 28994998, "question_id": 28994820, "link": "https://stackoverflow.com/questions/28994820/issue-with-linking-order-of-the-libraries/28994998#28994998", "title": "Issue with Linking order of the libraries", "body": "<blockquote>\n<p><em>&quot;This makes me think that there is a linker error. &quot;</em></p>\n<pre><code>C:/MyProj/sndlib/CWavData.cpp:156: undefined reference to `_GUID const&amp; __mingw_uuidof&lt;KSDATAFORMAT_SUBTYPE_PCM_STRUCT&gt;()'\ncollect2.exe: error: ld returned 1 exit status\n</code></pre>\n</blockquote>\n<p>Of course that's a <a href=\"https://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix\">linker error</a>, the <code>ld</code> appearing proves this. Order of object files and libraries matters, as they need to appear before used from another object file or library.</p>\n<p>The way to overcome a specific order is needed to let the linker see the symbols, is to use the <a href=\"https://stackoverflow.com/questions/5651869/gcc-start-group-and-end-group-command-line-options\"><code>-Wl,--start-group</code></a> and <a href=\"https://stackoverflow.com/questions/5651869/gcc-start-group-and-end-group-command-line-options\"><code>-Wl,--end-group</code></a> options for GCC, you can use to create groups of libraries appearing within, without need for a particular order.</p>\n<hr />\n<p>As for your comments and updates, you should try the following linker command line:</p>\n<pre><code>g++.exe -shared -Wl,--output-def=libsndlib.def -Wl,--out-implib=libsndlib.a \n    -Wl,--dll -LC:\\mingw64\\x86_64-w64-mingw32\\lib  \n    -Lc:\\MyProj\\SharedFunctions\\SharedFunctions\\ -L&quot;Win32\\Debug x64&quot;  \n    &quot;Win32\\Debug x64\\ADPCM\\CWavImaData.o&quot; &quot;Win32\\Debug x64\\CCategoryLst.o&quot;  \n    &quot;Win32\\Debug x64\\CSampleList.o&quot; &quot;Win32\\Debug x64\\CSeqScptList.o&quot;  \n    &quot;Win32\\Debug x64\\CSndDrv.o&quot; &quot;Win32\\Debug x64\\CSndLib.o&quot;  \n    &quot;Win32\\Debug x64\\CSndRam.o&quot; &quot;Win32\\Debug x64\\CSndScptList.o&quot;  \n    &quot;Win32\\Debug x64\\CSndSeq.o&quot;  \n    &quot;Win32\\Debug x64\\CSndStrHdl.o&quot; &quot;Win32\\Debug x64\\CWavData.o&quot; \n    &quot;Win32\\Debug x64\\CWavDataList.o&quot; &quot;Win32\\Debug x64\\CWavDataStr.o&quot;  \n    &quot;Win32\\Debug x64\\dllmain.o&quot; &quot;Win32\\Debug x64\\misc\\assert\\myassert.o&quot;  \n    &quot;Win32\\Debug x64\\misc\\CFindFile.o&quot; &quot;Win32\\Debug x64\\misc\\CStrings.o&quot;  \n    &quot;Win32\\Debug x64\\misc\\mydxerr.o&quot; &quot;Win32\\Debug x64\\SndInt.o&quot;      \n    -Wl,--start-group \n    -lksguid  -lSharedFunctions -lole32 -lwinmm -ldsound  \n    -ldxerr8 -ldxerr9 \n    -Wl,--end-group \n    -o sndlib.dll\n</code></pre>\n"}], "owner": {"reputation": 3558, "user_id": 4589819, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d29fd6d2f29e22c18d200b5108b2ed99?s=128&d=identicon&r=PG&f=1", "display_name": "James Franco", "link": "https://stackoverflow.com/users/4589819/james-franco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 717, "favorite_count": 0, "accepted_answer_id": 28994998, "answer_count": 1, "score": 1, "last_activity_date": 1426102059, "creation_date": 1426099340, "last_edit_date": 1426101239, "question_id": 28994820, "link": "https://stackoverflow.com/questions/28994820/issue-with-linking-order-of-the-libraries", "title": "Issue with Linking order of the libraries", "body": "<p>I am in the middle of porting data from a Visual Studio project to Mingw GCC.\nI believe I have run into a library linking order issue and am not really sure on how to circumvent this issue. I currently have two files <code>CWavImaData.cpp</code> and <code>CWavData.cpp</code>. Now both these files contain the following statement</p>\n\n<pre><code>{    \nWAVEFORMATEXTENSIBLE *pex = reinterpret_cast&lt;WAVEFORMATEXTENSIBLE*&gt;(new char[sizeof(WAVEFORMATEXTENSIBLE)]);\n    ....\n    ....\n    pex-&gt;SubFormat = KSDATAFORMAT_SUBTYPE_PCM; &lt;-- Conflicting Statement\n}\n</code></pre>\n\n<p>Now <code>KSDATAFORMAT_SUBTYPE_PCM</code> depeds on the library <code>libksguid.a</code>. Now if I comment out the conflicting statement in <code>CWavData.cpp</code> the project builds fine.\nHowever if I un-comment this conflicting statement I get the linker error.</p>\n\n<pre><code>CWavData.cpp:156: undefined reference to `_GUID const&amp; __mingw_uuidof&lt;KSDATAFORMAT_SUBTYPE_PCM_STRUCT&gt;()'\n</code></pre>\n\n<p>This makes me think that there is a linker error. Here is my build output</p>\n\n<pre><code>g++.exe -shared -Wl,--output-def=libsndlib.def -Wl,--out-implib=libsndlib.a -Wl,--dll -LC:\\mingw64\\x86_64-w64-mingw32\\lib -Lc:\\MyProj\\SharedFunctions\\ -L\"Win32\\Debug x64\" \"Win32\\Debug x64\\ADPCM\\CWavImaData.o\" \"Win32\\Debug x64\\CCategoryLst.o\" \"Win32\\Debug x64\\CSampleList.o\" \"Win32\\Debug x64\\CSeqScptList.o\" \"Win32\\Debug x64\\CSndDrv.o\" \"Win32\\Debug x64\\CSndLib.o\" \"Win32\\Debug x64\\CSndRam.o\" \"Win32\\Debug x64\\CSndScptList.o\" \"Win32\\Debug x64\\CSndSeq.o\" \"Win32\\Debug x64\\CSndStrHdl.o\" \"Win32\\Debug x64\\CWavData.o\" \"Win32\\Debug x64\\CWavDataList.o\" \"Win32\\Debug x64\\CWavDataStr.o\" \"Win32\\Debug x64\\dllmain.o\" \"Win32\\Debug x64\\misc\\assert\\myassert.o\" \"Win32\\Debug x64\\misc\\CFindFile.o\" \"Win32\\Debug x64\\misc\\CStrings.o\" \"Win32\\Debug x64\\misc\\mydxerr.o\" \"Win32\\Debug x64\\SndInt.o\"  -o sndlib.dll  -lksguid -lSharedFunctions -lole32 -lwinmm -ldsound -lksguid -lksguid\nWin32\\Debug x64\\CWavData.o: In function `CWavData::AnalyzeFormatChunk(_iobuf*, long)':\nC:/MyProj/sndlib/CWavData.cpp:156: undefined reference to `_GUID const&amp; __mingw_uuidof&lt;KSDATAFORMAT_SUBTYPE_PCM_STRUCT&gt;()'\ncollect2.exe: error: ld returned 1 exit status\n</code></pre>\n\n<p>I even tried adding <code>ksguid</code> twice however I am still getting a linker error. The file  <code>CWavImaData.cpp</code> builds fine alone with this statement however when this statement is included with the file <code>CWavData.cpp</code> I get a linker error. Any suggestions on how I can resolve this issue ?</p>\n\n<p>Update:\nI have been suggested to use --start-group. After trying it this is what my output looks like</p>\n\n<pre><code>g++.exe -shared -Wl,--output-def=libsndlib.def -Wl,--out-implib=libsndlib.a -Wl,--dll -LC:\\mingw64\\x86_64-w64-mingw32\\lib -Lc:\\MyProj\\SharedFunctions\\SharedFunctions\\ -L\"Win32\\Debug x64\" \"Win32\\Debug x64\\ADPCM\\CWavImaData.o\" \"Win32\\Debug x64\\CCategoryLst.o\" \"Win32\\Debug x64\\CSampleList.o\" \"Win32\\Debug x64\\CSeqScptList.o\" \"Win32\\Debug x64\\CSndDrv.o\" \"Win32\\Debug x64\\CSndLib.o\" \"Win32\\Debug x64\\CSndRam.o\" \"Win32\\Debug x64\\CSndScptList.o\" \"Win32\\Debug x64\\CSndSeq.o\" \"Win32\\Debug x64\\CSndStrHdl.o\" \"Win32\\Debug x64\\CWavData.o\" \"Win32\\Debug x64\\CWavDataList.o\" \"Win32\\Debug x64\\CWavDataStr.o\" \"Win32\\Debug x64\\dllmain.o\" \"Win32\\Debug x64\\misc\\assert\\myassert.o\" \"Win32\\Debug x64\\misc\\CFindFile.o\" \"Win32\\Debug x64\\misc\\CStrings.o\" \"Win32\\Debug x64\\misc\\mydxerr.o\" \"Win32\\Debug x64\\SndInt.o\"  -o sndlib.dll -Wl,--start-group -lksguid -Wl,--end-group  -lksguid -lSharedFunctions -lole32 -lwinmm -ldsound -lksguid -ldxerr8 -ldxerr9\nWin32\\Debug x64\\CWavData.o: In function `CWavData::AnalyzeFormatChunk(_iobuf*, long)':\nc:/MyProj/sndlib/CWavData.cpp:156: undefined reference to `_GUID const&amp; __mingw_uuidof&lt;KSDATAFORMAT_SUBTYPE_PCM_STRUCT&gt;()'\n</code></pre>\n\n<p>I then tried this too</p>\n\n<pre><code>.. -o sndlib.dll -Wl,--start-group -lksguid -lSharedFunctions -lole32 -lwinmm -ldsound  -Wl,--end-group \n</code></pre>\n\n<p>I also tried this</p>\n\n<pre><code>.. -Wl,--start-group -lksguid -Wl,--end-group -lSharedFunctions -lole32 -lwinmm -ldsound \n</code></pre>\n\n<p>I am still getting the linker error. Any suggestions ?</p>\n"}, {"tags": ["c++", "qt", "printing", "qprinter"], "comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1426099362, "post_id": 28994675, "comment_id": 46237746, "body": "You&#39;re trying to call a method that doesn&#39;t exist. You must pass the <i>address</i> of the paint device to <code>render()</code>. The correct statement should read: <code>PrintTable.render(&amp;Print)</code>. I&#39;m voting to close this as a typo. I&#39;m not sure if that <code>render</code> call will do much on a hidden widget, though."}, {"owner": {"reputation": 399, "user_id": 4628805, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1deef7f04e12d9c009a8f4fdd5200864?s=128&d=identicon&r=PG", "display_name": "Root0x", "link": "https://stackoverflow.com/users/4628805/root0x"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1426099577, "post_id": 28994675, "comment_id": 46237888, "body": "Thank you, that was the issue."}, {"owner": {"reputation": 399, "user_id": 4628805, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1deef7f04e12d9c009a8f4fdd5200864?s=128&d=identicon&r=PG", "display_name": "Root0x", "link": "https://stackoverflow.com/users/4628805/root0x"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1426101741, "post_id": 28994675, "comment_id": 46239187, "body": "how would i make it unhidden so it can be shown for print?"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1426101793, "post_id": 28994675, "comment_id": 46239220, "body": "Have you tried to make sure that it doesn&#39;t work? If it doesn&#39;t work, then you have to <code>show()</code> the widget before you attempt to <code>render()</code> it."}], "owner": {"reputation": 399, "user_id": 4628805, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1deef7f04e12d9c009a8f4fdd5200864?s=128&d=identicon&r=PG", "display_name": "Root0x", "link": "https://stackoverflow.com/users/4628805/root0x"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 489, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1426098849, "creation_date": 1426098849, "question_id": 28994675, "link": "https://stackoverflow.com/questions/28994675/qt-render-qtablelview-for-print-using-qprinter", "title": "Qt Render QTablelView For Print Using QPrinter", "body": "<p>I am trying to Print an invoice using Qt. One of the features necessary to for an invoice is a table for this I have decided to use a QTabelWidget because I understand how to use them but I am receiving an error stating \"no matching member function for call to 'render'\". How can I remedy this issue and is it even possible to print a QTableView. My code is below </p>\n\n<pre><code>QPrinter Print;\nPrint.setPaperSize(QPrinter::A4);\nPrint.setOrientation(QPrinter::Landscape);\nPrint.setDuplex(QPrinter::DuplexAuto);\nQTableWidget PrintTable;\nPrintTable.setRowCount(ui-&gt;tableWidget_Invoice-&gt;rowCount());\nPrintTable.setVerticalScrollBarPolicy(Qt::ScrollBarAlwaysOff);\nPrintTable.setHorizontalScrollBarPolicy(Qt::ScrollBarAlwaysOff);\nQTableWidgetItem *Product_CODE = new QTableWidgetItem;\nQTableWidgetItem *Description = new QTableWidgetItem;\nQTableWidgetItem *Unit_Price = new QTableWidgetItem;\nQTableWidgetItem *Qty = new QTableWidgetItem;\nQTableWidgetItem *Total_Price = new QTableWidgetItem;\nfor(int x =0; x&lt;ui-&gt;tableWidget_Invoice-&gt;rowCount(); x++)\n{\n    Product_CODE-&gt;setText(ui-&gt;tableWidget_Invoice-&gt;item(x, 2)-&gt;text());\n    Description-&gt;setText(ui-&gt;tableWidget_Invoice-&gt;item(x, 1)-&gt;text());\n    Unit_Price-&gt;setText(ui-&gt;tableWidget_Invoice-&gt;item(x, 3)-&gt;text());\n    Qty-&gt;setText(ui-&gt;tableWidget_Invoice-&gt;item(x, 0)-&gt;text());\n    Total_Price-&gt;setText(ui-&gt;tableWidget_Invoice-&gt;item(x, 4)-&gt;text());\n    PrintTable.setItem(x, 0, Product_CODE);\n    PrintTable.setItem(x, 1, Description);\n    PrintTable.setItem(x, 2, Unit_Price);\n    PrintTable.setItem(x, 3, Qty);\n    PrintTable.setItem(x, 4, Total_Price);\n}\nQHeaderView* header = PrintTable.horizontalHeader();\nheader-&gt;setSectionResizeMode(QHeaderView::Stretch);\nPrintTable.render(Print);\n</code></pre>\n"}, {"tags": ["c++", "function", "pointers", "bind"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1426099016, "post_id": 28994646, "comment_id": 46237517, "body": "You can use smart pointers for this (instead of raw pointers), in particular: <code>std::shared_ptr&lt;A&gt;</code> and <code>std::weak_ptr&lt;A&gt;</code>."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 1, "creation_date": 1426099069, "post_id": 28994646, "comment_id": 46237543, "body": "There&#39;s no way to detect when a pointer has been deleted. You should avoid creating situations where an object doesn&#39;t know whether some other object it wants to access is still alive. Smart pointers are the way to go here."}, {"owner": {"reputation": 921, "user_id": 1681678, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/bac6c6e945c5b56caaf670a75b228f04?s=128&d=identicon&r=PG", "display_name": "MichaelMitchell", "link": "https://stackoverflow.com/users/1681678/michaelmitchell"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1426099119, "post_id": 28994646, "comment_id": 46237573, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 so as long as the <code>std::function</code> exists the object will exist?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1426099414, "post_id": 28994646, "comment_id": 46237779, "body": "@MichaelMitchell I was thinking in the direction that the <code>std::weak_ptr&lt;A&gt;</code> is used for <code>std::bind()</code>, and you can check it before calling <code>f()</code>. But of course you can bind the <code>shared_ptr&lt;A&gt;</code> as well, and it will guarantee that lifetime of <code>A</code> ends no earlier than <code>f</code> is in scope."}], "answers": [{"comments": [{"owner": {"reputation": 921, "user_id": 1681678, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/bac6c6e945c5b56caaf670a75b228f04?s=128&d=identicon&r=PG", "display_name": "MichaelMitchell", "link": "https://stackoverflow.com/users/1681678/michaelmitchell"}, "edited": false, "score": 0, "creation_date": 1426099199, "post_id": 28994757, "comment_id": 46237637, "body": "So if <code>std::bind</code> is passed a <code>shared_ptr</code> the object in the <code>shared_ptr</code> will not be deleted as long as the function exists? Your edit answers this."}, {"owner": {"reputation": 921, "user_id": 1681678, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/bac6c6e945c5b56caaf670a75b228f04?s=128&d=identicon&r=PG", "display_name": "MichaelMitchell", "link": "https://stackoverflow.com/users/1681678/michaelmitchell"}, "edited": false, "score": 0, "creation_date": 1426099357, "post_id": 28994757, "comment_id": 46237742, "body": "With my wrapper class idea, if I wanted to have a class that made a bind of one of its functions, would I have to <code>enable_shared_from</code> in order to pass a proper <code>weak_ptr</code> to the wrapper?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 921, "user_id": 1681678, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/bac6c6e945c5b56caaf670a75b228f04?s=128&d=identicon&r=PG", "display_name": "MichaelMitchell", "link": "https://stackoverflow.com/users/1681678/michaelmitchell"}, "edited": false, "score": 0, "creation_date": 1426099518, "post_id": 28994757, "comment_id": 46237844, "body": "@MichaelMitchell Yes. That&#39;s the classic use case for <code>shared_from_this</code>."}, {"owner": {"reputation": 13520, "user_id": 2315602, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/8rKPi.jpg?s=128&g=1", "display_name": "lisyarus", "link": "https://stackoverflow.com/users/2315602/lisyarus"}, "reply_to_user": {"reputation": 921, "user_id": 1681678, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/bac6c6e945c5b56caaf670a75b228f04?s=128&d=identicon&r=PG", "display_name": "MichaelMitchell", "link": "https://stackoverflow.com/users/1681678/michaelmitchell"}, "edited": false, "score": 0, "creation_date": 1426099559, "post_id": 28994757, "comment_id": 46237878, "body": "@MichaelMitchell if you have no way to get a smart pointer to this in some class method, then you have to use <code>enable_shared_from_this</code>. Note that it is not necessary if the binding happens outside class."}], "owner": {"reputation": 13520, "user_id": 2315602, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/8rKPi.jpg?s=128&g=1", "display_name": "lisyarus", "link": "https://stackoverflow.com/users/2315602/lisyarus"}, "is_accepted": true, "score": 5, "last_activity_date": 1426099107, "creation_date": 1426099107, "answer_id": 28994757, "question_id": 28994646, "link": "https://stackoverflow.com/questions/28994646/is-it-possible-to-detect-if-the-object-that-a-bound-member-function-refers-to-is/28994757#28994757", "title": "Is it possible to detect if the object that a bound member function refers to is deleted or destroyed", "body": "<p><code>std::bind</code> can accept smart pointers, so you can simply pass <code>std::shared_ptr&lt;A&gt;</code> to it.</p>\n\n<pre><code>std::shared_ptr&lt;A&gt; p_a(new A);\nstd::function&lt;int()&gt; f = std::bind(&amp;A::add, p_a, 1, 1);\n</code></pre>\n\n<p>Note, that the functor will own the object: the object will live as long as the functor lives. If you don't want such behavior, then your solution with a <code>weak_ptr</code> wrapper is nice.</p>\n"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 2, "last_activity_date": 1426101307, "last_edit_date": 1426101307, "creation_date": 1426099387, "answer_id": 28994832, "question_id": 28994646, "link": "https://stackoverflow.com/questions/28994646/is-it-possible-to-detect-if-the-object-that-a-bound-member-function-refers-to-is/28994832#28994832", "title": "Is it possible to detect if the object that a bound member function refers to is deleted or destroyed", "body": "<pre><code>struct A{\n  int c_ = 10;\n  int add(int a, int b){\n    return a + b + c_;\n  }\n};\ntemplate&lt;class T&gt;\nstd::weak_ptr&lt;T&gt; weak( std::shared_ptr&lt;T&gt; const&amp; sp ) { return {sp}; }\n\nint main(){\n  auto p_a = std::make_shared&lt;A&gt;();\n  std::function&lt;int()&gt; f = [w_a = weak(p_a)]() {\n    if (auto p_a = w_a.lock())\n      return p_a-&gt;add(1,1);\n    throw w_a;\n  }\n  printf(\"%i\\n\", f()); // yields \"12\" (1 + 1 + 10)\n  p_a.reset();\n  try {\n    printf(\"%i\\n\", f()); // yields derpy numbers, no errors thrown.\n  } catch( std::weak_ptr&lt;A&gt; wp ) {\n    printf(\"object deleted\\n\");\n  }\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/55bb7ca6ec7412fc\" rel=\"nofollow\">live example</a>.</p>\n\n<p>in general, in C++ you don't pay for what you don't use.</p>\n\n<p>Tracking the lifetime of objects has a cost.  If you want to track the lifetime of objects, you can use a <code>shared_ptr</code> or <code>weak_ptr</code> to the (free-store) allocated object, or use a <code>weak_ptr</code> to a <code>shared_ptr</code> (uniquely) owned by the object to indicate its lifetime is over.</p>\n\n<p>The above is an implementation using C++14 lambdas to capture the object's shared pointer as a weak ptr, and give defined behavior (a throw of a copy of said weak pointer) if it has been deleted.</p>\n\n<p>A lifetime token looks like:</p>\n\n<pre><code>using lifetime_token = std::weak_ptr&lt;void&gt;;\nstruct has_lifetime {\n  has_lifetime():token(std::make_shared&lt;char&gt;()) {}\n  has_lifetime(has_lifetime const&amp;o):has_lifetime() {} // not default\n  lifetime_token get_lifetime() const {\n    return token;\n  }\nprivate:\n  std::shared_ptr&lt;void&gt; token;\n};\n</code></pre>\n\n<p>inheriting from <code>has_lifetime</code> gives you a <code>get_lifetime()</code> member that exists for as long as you do (it is destroyed by your destructor, and can no longer be <code>.lock()</code>d).</p>\n\n<p>This is an easier pattern to follow if you cannot modify the ownership semantics of the original class.  Simply <code>.lock()</code> the <code>lifetime_token</code> of the object to determine if it is still alive.</p>\n"}], "owner": {"reputation": 921, "user_id": 1681678, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/bac6c6e945c5b56caaf670a75b228f04?s=128&d=identicon&r=PG", "display_name": "MichaelMitchell", "link": "https://stackoverflow.com/users/1681678/michaelmitchell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 674, "favorite_count": 1, "accepted_answer_id": 28994757, "answer_count": 2, "score": 2, "last_activity_date": 1426111358, "creation_date": 1426098750, "last_edit_date": 1426111358, "question_id": 28994646, "link": "https://stackoverflow.com/questions/28994646/is-it-possible-to-detect-if-the-object-that-a-bound-member-function-refers-to-is", "title": "Is it possible to detect if the object that a bound member function refers to is deleted or destroyed", "body": "<p>I am exploring the use of <code>std::function</code> and <code>std::bind</code>. I see that you can bind a member function, for example:</p>\n\n<pre><code>class A{\n    int c_ = 10;\npublic:\n    int add(int a, int b){\n        return a + b + c_;\n    }\n};\nint main(){\n    A* p_a = new A;\n    std::function&lt;int()&gt; f = std::bind(&amp;A::add, p_a, 1, 1);\n    printf(\"%i\\n\", f()); // yields \"12\" (1 + 1 + 10)\n    delete p_a;\n    printf(\"%i\\n\", f()); // yields derpy numbers, no errors thrown.\n}\n</code></pre>\n\n<p>Is there a way to detect if p_a has been deleted?</p>\n\n<p>My solution to do this is having a wrapper class that holds the function and a <code>weak_ptr</code> to the object. I am just wondering if there is a more elegant way to do this.</p>\n"}, {"tags": ["c++", "pipe", "stdout", "io-redirection", "createprocess"], "comments": [{"owner": {"reputation": 682, "user_id": 2459080, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/315LC.jpg?s=128&g=1", "display_name": "Sameer Sawla", "link": "https://stackoverflow.com/users/2459080/sameer-sawla"}, "edited": false, "score": 0, "creation_date": 1426099287, "post_id": 28994519, "comment_id": 46237704, "body": "tried flushing the output from the output stream ?"}, {"owner": {"reputation": 682, "user_id": 2459080, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/315LC.jpg?s=128&g=1", "display_name": "Sameer Sawla", "link": "https://stackoverflow.com/users/2459080/sameer-sawla"}, "edited": false, "score": 0, "creation_date": 1426099311, "post_id": 28994519, "comment_id": 46237719, "body": "did u tried using printf ?"}, {"owner": {"reputation": 682, "user_id": 2459080, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/315LC.jpg?s=128&g=1", "display_name": "Sameer Sawla", "link": "https://stackoverflow.com/users/2459080/sameer-sawla"}, "edited": false, "score": 0, "creation_date": 1426099372, "post_id": 28994519, "comment_id": 46237754, "body": "also put up some of ur code. What did u do for working through windows."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 2, "creation_date": 1426099401, "post_id": 28994519, "comment_id": 46237774, "body": "<a href=\"http://stackoverflow.com/a/5488264/179910\">Sample code</a>."}, {"owner": {"reputation": 682, "user_id": 2459080, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/315LC.jpg?s=128&g=1", "display_name": "Sameer Sawla", "link": "https://stackoverflow.com/users/2459080/sameer-sawla"}, "edited": false, "score": 0, "creation_date": 1426099482, "post_id": 28994519, "comment_id": 46237819, "body": "Try using some stuff mentioned in here. stringstream is your choice.   <a href=\"http://stackoverflow.com/questions/5419356/redirect-stdout-stderr-to-a-string\" title=\"redirect stdout stderr to a string\">stackoverflow.com/questions/5419356/&hellip;</a>"}], "answers": [{"owner": {"reputation": 25, "user_id": 3191893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d77672660d915dd3776c7369e8f29cb?s=128&d=identicon&r=PG&f=1", "display_name": "Alessandro", "link": "https://stackoverflow.com/users/3191893/alessandro"}, "is_accepted": false, "score": 1, "last_activity_date": 1426104691, "creation_date": 1426104691, "answer_id": 28996389, "question_id": 28994519, "link": "https://stackoverflow.com/questions/28994519/redirecting-stdout-of-createprocess-to-a-pipe-and-reading-it-in-another-proces/28996389#28996389", "title": "Redirecting stdout of CreateProcess() to a pipe and reading it in another process c++ windows", "body": "<p>Take a look at <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682499%28v=vs.85%29.aspx\" rel=\"nofollow\">Creating a Child Process with redirected input and output</a>.</p>\n"}], "owner": {"reputation": 333, "user_id": 3967641, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/1ab67f080596e4f26a169fe003ac2bbf?s=128&d=identicon&r=PG&f=1", "display_name": "sbunny", "link": "https://stackoverflow.com/users/3967641/sbunny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2655, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1426104691, "creation_date": 1426098316, "question_id": 28994519, "link": "https://stackoverflow.com/questions/28994519/redirecting-stdout-of-createprocess-to-a-pipe-and-reading-it-in-another-proces", "title": "Redirecting stdout of CreateProcess() to a pipe and reading it in another process c++ windows", "body": "<p>I have a main c++ program. This program at its startup launches another process executable using CreateProcess() function. Now I want to redirect the standard output (stdout) of this new process to the main c++ program. For this purpose I would like to use a pipe in windows. I am able to achieve this in linux using fork() and pipe (), but I am unable to get CreatePipe() working on windows. The pipe is created but I am unable to get any data.</p>\n\n<p>Can someone please provide me some example or sample code for this purpose ? I have successfully redirected the stdout of CreateProcess to a file but the pipe does not work.</p>\n\n<p>Thanks in advance. </p>\n"}, {"tags": ["c++", "numbers", "binary-tree"], "comments": [{"owner": {"reputation": 55, "user_id": 3995356, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1e2006a8cf34048407cf5dca127c59b4?s=128&d=identicon&r=PG&f=1", "display_name": "Vistanza", "link": "https://stackoverflow.com/users/3995356/vistanza"}, "reply_to_user": {"reputation": 13340, "user_id": 2092587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63187c7f93648cd0c57e71e33ee2859a?s=128&d=identicon&r=PG", "display_name": "Trinimon", "link": "https://stackoverflow.com/users/2092587/trinimon"}, "edited": false, "score": 0, "creation_date": 1426098214, "post_id": 28994314, "comment_id": 46237013, "body": "I have a solution but I am finding it difficult to implement. I just want to know is there is any other approach to solve it."}], "answers": [{"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 1, "last_activity_date": 1426098139, "creation_date": 1426098139, "answer_id": 28994464, "question_id": 28994314, "link": "https://stackoverflow.com/questions/28994314/what-are-the-algorithms-to-find-all-numbers-consisting-3-and-5-only-in-the-given/28994464#28994464", "title": "What are the algorithms to find all numbers consisting 3 and 5 only in the given range L and R (both inclusive)", "body": "<p>The obvious approach would be to synthesize numbers systematically until you produced one larger than the specified maximum.</p>\n\n<p>In this case, you'd produce something like: <code>3</code>, <code>5</code>, <code>33</code>, <code>35</code>, <code>53</code>, <code>55</code>, <code>333</code>, <code>335</code>, <code>353</code>, <code>355</code>, etc. until you get to one larger than 10<sup>9</sup>.</p>\n\n<p>Hint: since you only have two possible digits, you could think of this as counting in binary, but convert each number using <code>3</code> in place of <code>0</code> and <code>5</code> in place of <code>1</code> (then compare the result to 10<sup>9</sup> to see if you're done yet).</p>\n"}], "owner": {"reputation": 55, "user_id": 3995356, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1e2006a8cf34048407cf5dca127c59b4?s=128&d=identicon&r=PG&f=1", "display_name": "Vistanza", "link": "https://stackoverflow.com/users/3995356/vistanza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1426098985, "creation_date": 1426097653, "last_edit_date": 1426098985, "question_id": 28994314, "link": "https://stackoverflow.com/questions/28994314/what-are-the-algorithms-to-find-all-numbers-consisting-3-and-5-only-in-the-given", "title": "What are the algorithms to find all numbers consisting 3 and 5 only in the given range L and R (both inclusive)", "body": "<p>We have to find out all the numbers consisting of 3 and 5 only in a given range L and R(inclusive).</p>\n\n<p>What are the possible approaches to do this task?</p>\n\n<p>Given that,</p>\n\n<p>1 &lt;= L &lt;= R &lt;= 10^9.</p>\n"}, {"tags": ["c++", "string", "recursion", "substring"], "comments": [{"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 1, "creation_date": 1426097703, "post_id": 28994232, "comment_id": 46236719, "body": "There is no reason why you would possibly want to reimplement a <code>std::string</code> function from scratch."}, {"owner": {"reputation": 51, "user_id": 4659807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08f9b3049446d003b5bdccf0f3e5adf2?s=128&d=identicon&r=PG&f=1", "display_name": "Vector Croc", "link": "https://stackoverflow.com/users/4659807/vector-croc"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 3, "creation_date": 1426097792, "post_id": 28994232, "comment_id": 46236769, "body": "Sure there is, learning and practice."}, {"owner": {"reputation": 1056, "user_id": 2970916, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1456170059/picture?type=large", "display_name": "user2970916", "link": "https://stackoverflow.com/users/2970916/user2970916"}, "edited": false, "score": 0, "creation_date": 1426097861, "post_id": 28994232, "comment_id": 46236813, "body": "If you can find the substring, you should be able to find the location it starts."}, {"owner": {"reputation": 682, "user_id": 2459080, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/315LC.jpg?s=128&g=1", "display_name": "Sameer Sawla", "link": "https://stackoverflow.com/users/2459080/sameer-sawla"}, "edited": false, "score": 0, "creation_date": 1426098758, "post_id": 28994232, "comment_id": 46237345, "body": "YOu are still using find"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 1, "creation_date": 1426098830, "post_id": 28994232, "comment_id": 46237392, "body": "@VectorCroc: The world of C++ programming is full of people who have irrational reasons for not using the standard library. If it&#39;s just for learning, fair enough, then, but you should always make sure to specify that in your question. Otherwise, I&#39;ll automatically be in code-review mood :)"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 4659807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08f9b3049446d003b5bdccf0f3e5adf2?s=128&d=identicon&r=PG&f=1", "display_name": "Vector Croc", "link": "https://stackoverflow.com/users/4659807/vector-croc"}, "edited": false, "score": 0, "creation_date": 1426098357, "post_id": 28994404, "comment_id": 46237095, "body": "if someone could post some code that would be helpful. I am avoiding comparing chars because it&#39;s messy and not necessary."}, {"owner": {"reputation": 51, "user_id": 4659807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08f9b3049446d003b5bdccf0f3e5adf2?s=128&d=identicon&r=PG&f=1", "display_name": "Vector Croc", "link": "https://stackoverflow.com/users/4659807/vector-croc"}, "edited": false, "score": 0, "creation_date": 1426098515, "post_id": 28994404, "comment_id": 46237190, "body": "If I could use a string as a delimiter, I think that would help, but I think delimeters are reserved for chars."}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "reply_to_user": {"reputation": 51, "user_id": 4659807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08f9b3049446d003b5bdccf0f3e5adf2?s=128&d=identicon&r=PG&f=1", "display_name": "Vector Croc", "link": "https://stackoverflow.com/users/4659807/vector-croc"}, "edited": false, "score": 0, "creation_date": 1426098557, "post_id": 28994404, "comment_id": 46237216, "body": "you can&#39;t compare strings without eventually compare characters."}], "owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "is_accepted": false, "score": 0, "last_activity_date": 1426097953, "creation_date": 1426097953, "answer_id": 28994404, "question_id": 28994232, "link": "https://stackoverflow.com/questions/28994232/recursively-get-index-of-substring-start-in-string-in-c/28994404#28994404", "title": "Recursively get index of substring start in string in C++", "body": "<p>how about iterating the string ,stop each time the character matches the first character of the sub string, then look if the counter is small enough for the substring to fit , and if so , iterate in a sub loop character by character to find a match?</p>\n"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 0, "last_activity_date": 1426098643, "creation_date": 1426098643, "answer_id": 28994616, "question_id": 28994232, "link": "https://stackoverflow.com/questions/28994232/recursively-get-index-of-substring-start-in-string-in-c/28994616#28994616", "title": "Recursively get index of substring start in string in C++", "body": "<p>Create an overloaded function that does the real work and make it recursive. Call the second function from the first with a starting index.</p>\n\n<pre><code>int getIndex(char const* mystring, size_t len1,\n             char const* substring, size_t len2, int index)\n{\n   if ( len1 &lt; len2 )\n   {\n      return -1;\n   }\n\n   if ( strncmp(mystring, substring, len2) == 0)\n   {\n     return index;\n   }\n\n   return getIndex(mystring+1, len1-1, substring, len2, index+1);   \n}\n\nint getIndex(string mystring, string substring)\n{\n   return getIndex(mystring.c_str(), mystring.size(),\n                   substring.c_str(), substring.size(),\n                   0);\n}\n</code></pre>\n"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1426098754, "creation_date": 1426098754, "answer_id": 28994649, "question_id": 28994232, "link": "https://stackoverflow.com/questions/28994232/recursively-get-index-of-substring-start-in-string-in-c/28994649#28994649", "title": "Recursively get index of substring start in string in C++", "body": "<p>The function can be written the following way</p>\n\n<pre><code>std::string::size_type GetIndex( const std::string &amp;myString, \n                                 const std::string &amp;subString )\n{\n    if ( myString.size() &lt; subString.size() ) return std::string::npos;\n    if ( myString.substr( 0, subString.size() ) == subString ) return 0;\n\n    std::string::size_type n = GetIndex( myString.substr( 1 ), subString );\n\n    return ( n == std::string::npos ) ? std::string::npos : n + 1;\n}                                 \n</code></pre>\n\n<p>Here is a demonstartive program</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nstd::string::size_type GetIndex( const std::string &amp;myString, \n                                 const std::string &amp;subString )\n{\n    if ( myString.size() &lt; subString.size() ) return std::string::npos;\n    if ( myString.substr( 0, subString.size() ) == subString ) return 0;\n\n    std::string::size_type n = GetIndex( myString.substr( 1 ), subString );\n\n    return ( n == std::string::npos ) ? std::string::npos : n + 1;\n}                                 \n\nint main()\n{\n    std::string::size_type n = GetIndex( \"Hello World\", \"World\" );\n\n    if ( n != std::string::npos )\n    {\n        std::cout &lt;&lt; \"The substring is found at position \" &lt;&lt; n  &lt;&lt; std::endl;\n    }\n    else\n    {\n        std::cout &lt;&lt; \"The substring is not found\" &lt;&lt; std::endl;\n    }\n\n    n = GetIndex( \"Hello C\", \"C++\" );\n\n    if ( n != std::string::npos )\n    {\n        std::cout &lt;&lt; \"The substring is found at position \" &lt;&lt; n  &lt;&lt; std::endl;\n    }\n    else\n    {\n        std::cout &lt;&lt; \"The substring is not found\" &lt;&lt; std::endl;\n    }\n}    \n</code></pre>\n\n<p>Its output is</p>\n\n<pre><code>The substring is found at position 6\nThe substring is not found\n</code></pre>\n\n<p>If you want you may substitute type <code>std::string::size_type</code> for <code>int</code> and <code>std::string::npos</code> for <code>-1</code>.:)</p>\n"}], "owner": {"reputation": 51, "user_id": 4659807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08f9b3049446d003b5bdccf0f3e5adf2?s=128&d=identicon&r=PG&f=1", "display_name": "Vector Croc", "link": "https://stackoverflow.com/users/4659807/vector-croc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1134, "favorite_count": 0, "accepted_answer_id": 28994616, "answer_count": 3, "score": 0, "last_activity_date": 1426098754, "creation_date": 1426097378, "last_edit_date": 1426097741, "question_id": 28994232, "link": "https://stackoverflow.com/questions/28994232/recursively-get-index-of-substring-start-in-string-in-c", "title": "Recursively get index of substring start in string in C++", "body": "<p>Given the function:</p>\n\n<pre><code>int getIndex(string mystring, string substring);\n</code></pre>\n\n<p>How do I find the index of <code>mystring</code> where <code>substring</code> begins, if there is one? I don't want to use the default <code>find</code> function, I want to make my own (in C++). My find method return true if an occurrence of that substring exists.</p>\n\n<p>I have the following thoughts so far:</p>\n\n<pre><code>int getIndex(string mystring, string substring)\n{\n    if(find(mystring, substring))\n        return counter();\nreturn -1;\n}\nint counter()\n{\n        int count; //I'm not sure how to use this value without a global\n                     //variable or variable declared in main()\n        ++count;\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-c++", "graph-algorithm", "autocad", "autocad-plugin"], "comments": [{"owner": {"reputation": 1718, "user_id": 2065237, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/tG7xt.png?s=128&g=1", "display_name": "Sildoreth", "link": "https://stackoverflow.com/users/2065237/sildoreth"}, "edited": false, "score": 1, "creation_date": 1426097836, "post_id": 28994170, "comment_id": 46236803, "body": "Could you please clarify?  It looks like &quot;exponential map&quot; has multiple meanings. <a href=\"https://en.wikipedia.org/wiki/Exponential_map\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Exponential_map</a>"}, {"owner": {"reputation": 5516, "user_id": 2128327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdb32ecba89326d1528dbf8673e68b20?s=128&d=identicon&r=PG", "display_name": "Khaled.K", "link": "https://stackoverflow.com/users/2128327/khaled-k"}, "edited": false, "score": 0, "creation_date": 1426143519, "post_id": 28994170, "comment_id": 46253902, "body": "Can you please put a reference, or write down the algorithm you&#39;re using, or show us your code so far?"}], "owner": {"reputation": 11, "user_id": 4659783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0eeed6f23d0f4dee5c0b9c489b72d18?s=128&d=identicon&r=PG&f=1", "display_name": "Yogesh", "link": "https://stackoverflow.com/users/4659783/yogesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 164, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1426685650, "creation_date": 1426097162, "last_edit_date": 1426685650, "question_id": 28994170, "link": "https://stackoverflow.com/questions/28994170/exponential-map-algorithm-gives-bug-in-case-of-sphere-need-solution-to-fix-issu", "title": "Exponential map algorithm gives bug in case of sphere, need solution to fix issue", "body": "<p>I am trying to decal sketch on mesh using exponential map.\nWhile generating exponential map, I am calculating plane by initial point on mesh and normal calculated on mesh by that point.\nthen algorithm calculates nearest vertices from that point and traverse to them by edges.</p>\n\n<p>Then Edges are projected on plan with their original lengths.\nIt works in most cases, But there is problems in case of sphere. the map is getting twisted.</p>\n\n<p>Do I need to do anything different for the spheres? Any ideas on how this issue can be resolved?\nOr has anybody done something similar using a different algorithm for exponential map?</p>\n\n<p>I have created below code</p>\n\n<pre><code>while (i &lt; lstVerts.size())\n{\n    CVertex *pVertex = mesh.getVertexAt(lstVerts[i]);\n    pVertex-&gt;m_iExpPos = i;\n\n    if (pVertex-&gt;m_iNeighbour &gt; -1)\n    {\n        CVector vecPoint = pVertex-&gt;toVector() - pVertex-&gt;Neighbour()-&gt;toVector();\n        double len = vecPoint.norm();\n        CVector tmp = (pVertex-&gt;Neighbour()-&gt;normal() * -1) * vecPoint;\n        vec = tmp * sketch.m_meshNorm; \n        vec.unitize();\n        vec = vec * len;\n\n        double u = vec.dot(sketch.m_meshX);\n        pVertex-&gt;m_u = u + pVertex-&gt;Neighbour()-&gt;m_u; \n        double v = vec.dot(yDir);\n        pVertex-&gt;m_v = v + pVertex-&gt;Neighbour()-&gt;m_v;\n    }\n    else\n    {\n        vec = pVertex-&gt;toVector() - pnt;\n        pVertex-&gt;m_u = vec.dot(sketch.m_meshX);\n        pVertex-&gt;m_v = vec.dot(yDir);\n        pVertex-&gt;m_Propogation = vec;\n    }\n\n    AddAdjacentUnvisitedVertices(pVertex, lstVerts);\n}\n</code></pre>\n\n<p>pnt is one point where exponential map will start. Initially, lstVerts will contain vertices near to pnt. Gradually it will add adjacent vertices.</p>\n\n<p>I think problem is algo uses edge length as it is in exponential map. I think it need to be adjusted. I don't know how?</p>\n\n<p>To know about Exponential Map and Algorithm that i have used, please refer below links</p>\n\n<p><a href=\"http://www.diva-portal.org/smash/get/diva2:331960/FULLTEXT01.pdf\" rel=\"nofollow\">http://www.diva-portal.org/smash/get/diva2:331960/FULLTEXT01.pdf</a></p>\n\n<p><a href=\"http://www1.cse.wustl.edu/~cmg/content/papers/sig2006tm/sig2006tm.pdf\" rel=\"nofollow\">http://www1.cse.wustl.edu/~cmg/content/papers/sig2006tm/sig2006tm.pdf</a></p>\n"}, {"tags": ["c++", "visual-c++", "gcc", "iterator", "deque"], "answers": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": false, "score": 5, "last_activity_date": 1426097473, "creation_date": 1426097473, "answer_id": 28994257, "question_id": 28994162, "link": "https://stackoverflow.com/questions/28994162/deque-random-access-iterator-comparison-produces-unexpected-results/28994257#28994257", "title": "Deque random access iterator comparison produces unexpected results", "body": "<blockquote>\n  <p>Who is right, GCC or Visual Studio?</p>\n</blockquote>\n\n<p>Both.</p>\n\n<blockquote>\n  <p>Why?</p>\n</blockquote>\n\n<p>Decrementing <code>begin()</code> is undefined behavior.</p>\n"}, {"comments": [{"owner": {"reputation": 23368, "user_id": 1065190, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1b5b64fdadd0d82da3cd3b9dafe7b6bb?s=128&d=identicon&r=PG", "display_name": "Sergey K.", "link": "https://stackoverflow.com/users/1065190/sergey-k"}, "edited": false, "score": 0, "creation_date": 1426099767, "post_id": 28994266, "comment_id": 46238002, "body": "Ok. What would be the correct way to calculate the clamped <code>i</code> iterator?"}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "reply_to_user": {"reputation": 23368, "user_id": 1065190, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1b5b64fdadd0d82da3cd3b9dafe7b6bb?s=128&d=identicon&r=PG", "display_name": "Sergey K.", "link": "https://stackoverflow.com/users/1065190/sergey-k"}, "edited": false, "score": 2, "creation_date": 1426099948, "post_id": 28994266, "comment_id": 46238127, "body": "Correctly, obviously ;-)  <code>itr - std::min(k, std::distance(values.begin(), itr))</code>"}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "reply_to_user": {"reputation": 23368, "user_id": 1065190, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1b5b64fdadd0d82da3cd3b9dafe7b6bb?s=128&d=identicon&r=PG", "display_name": "Sergey K.", "link": "https://stackoverflow.com/users/1065190/sergey-k"}, "edited": false, "score": 0, "creation_date": 1426100057, "post_id": 28994266, "comment_id": 46238201, "body": "Basically, don&#39;t decrement more than the distance from <code>begin()</code> to <code>itr</code>. It&#39;s not complicated, you just need to be careful."}, {"owner": {"reputation": 23368, "user_id": 1065190, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1b5b64fdadd0d82da3cd3b9dafe7b6bb?s=128&d=identicon&r=PG", "display_name": "Sergey K.", "link": "https://stackoverflow.com/users/1065190/sergey-k"}, "edited": false, "score": 0, "creation_date": 1426100275, "post_id": 28994266, "comment_id": 46238319, "body": "Thanks! Not my code btw, just experienced this while debugging."}], "owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "is_accepted": true, "score": 10, "last_activity_date": 1426097508, "creation_date": 1426097508, "answer_id": 28994266, "question_id": 28994162, "link": "https://stackoverflow.com/questions/28994162/deque-random-access-iterator-comparison-produces-unexpected-results/28994266#28994266", "title": "Deque random access iterator comparison produces unexpected results", "body": "<p><code>itr - K</code> is undefined behaviour because it decrements the pointer before the beginning, i.e. it is equivalent to:</p>\n\n<pre><code>auto it = values.begin();\n--it;\n</code></pre>\n\n<p>And that is undefined.</p>\n\n<p>GCC will catch this with <code>_GLIBCXX_DEBUG</code> defined:</p>\n\n<pre><code>/home/jwakely/gcc/5/include/c++/5.0.0/debug/safe_iterator.h:428:error: \n    attempt to retreat a dereferenceable iterator 5 steps, which falls \n    outside its valid range.\n\nObjects involved in the operation:\niterator @ 0x0x7fff6fdb3450 {\ntype = N11__gnu_debug14_Safe_iteratorINSt9__cxx199815_Deque_iteratorIiRiPiEENSt7__debug5dequeIiSaIiEEEEE (mutable iterator);\n  state = dereferenceable;\n  references sequence with type `NSt7__debug5dequeIiSaIiEEE' @ 0x0x606360\n}\nAborted (core dumped)\n</code></pre>\n"}], "owner": {"reputation": 23368, "user_id": 1065190, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1b5b64fdadd0d82da3cd3b9dafe7b6bb?s=128&d=identicon&r=PG", "display_name": "Sergey K.", "link": "https://stackoverflow.com/users/1065190/sergey-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 0, "accepted_answer_id": 28994266, "answer_count": 2, "score": 2, "last_activity_date": 1426097508, "creation_date": 1426097135, "question_id": 28994162, "link": "https://stackoverflow.com/questions/28994162/deque-random-access-iterator-comparison-produces-unexpected-results", "title": "Deque random access iterator comparison produces unexpected results", "body": "<p>I have this little snippet which behaves perfectly fine (as expected) on GCC.</p>\n\n<pre><code>#include &lt;deque&gt;\n#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n\nstd::deque&lt;int&gt; values = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };\n\nint main()\n{\n    typedef std::deque&lt;int&gt;::iterator buf_iterator;\n\n    buf_iterator itr = values.begin() + 1;\n\n    const int K = 5;\n\n    buf_iterator i = std::max(itr - K, values.begin());\n\n    int pos = i - values.begin();\n\n    std::cout &lt;&lt; *i &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>However, running on MSVC 2013 and 2015 produces a debug assertion: \"deque iterator is not dereferencable\". The value of <code>pos</code> in this case is <code>-4</code> while zero is expected.</p>\n\n<ol>\n<li>Who is right, GCC or Visual Studio?</li>\n<li>Why?</li>\n</ol>\n"}, {"tags": ["c++", "xcode", "macos"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 4, "creation_date": 1426097195, "post_id": 28994148, "comment_id": 46236385, "body": "You aren&#39;t supposed to include this header directly. Why do you think you need it?"}, {"owner": {"reputation": 608, "user_id": 3790881, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/SZ7nA.png?s=128&g=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3790881/omar"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1426097394, "post_id": 28994148, "comment_id": 46236519, "body": "I used to include it instead of including many other libraries and save myself a time"}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1426097609, "post_id": 28994148, "comment_id": 46236658, "body": "@Omar Except you&#180;ll probably get notably increased compile time. Use the standard headers necessary for your used functions/classes, and not some internal G++ file"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1426097622, "post_id": 28994148, "comment_id": 46236666, "body": "@Omar <i>&quot;I used to include it instead of ...&quot;</i> That&#39;s wrong. The headers appearing in the <code>bits</code> directory are meant to bind the c++ compiler implementation with your actual machine and OS environment. These are usually included by the higher level implementations of the c++ standard library headers, sometimes only under certain conditions (<code>#ifdef</code>&#39;s)"}, {"owner": {"reputation": 608, "user_id": 3790881, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/SZ7nA.png?s=128&g=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3790881/omar"}, "edited": false, "score": 0, "creation_date": 1426101078, "post_id": 28994148, "comment_id": 46238821, "body": "this library suits my work environment because i need speed in writing, and the high level implementation won&#39;t cause any harm"}, {"owner": {"reputation": 608, "user_id": 3790881, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/SZ7nA.png?s=128&g=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3790881/omar"}, "edited": false, "score": 0, "creation_date": 1426101134, "post_id": 28994148, "comment_id": 46238848, "body": "the thing is, i used to include it on windows, i need a way to make it work on mac"}, {"owner": {"reputation": 1568, "user_id": 3786285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3c5e3c10b8d632106d2865c5aeda0a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Martian2049", "link": "https://stackoverflow.com/users/3786285/martian2049"}, "edited": false, "score": 0, "creation_date": 1537416168, "post_id": 28994148, "comment_id": 91777912, "body": "just copy the file to your working directory and include it..."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1560605737, "post_id": 28994148, "comment_id": 99796565, "body": "<b>Recommended reading:</b> <a href=\"https://stackoverflow.com/q/31816095/560648\">Why should I not #include &lt;bits/stdc++.h&gt;?</a>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1560605768, "post_id": 28994148, "comment_id": 99796576, "body": "tl;dr your requirement/need is wrong and this is why. No."}], "answers": [{"comments": [{"owner": {"reputation": 631, "user_id": 8650263, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-K_AsuQybNoM/AAAAAAAAAAI/AAAAAAAAAAs/OB3yLmaPV7k/photo.jpg?sz=128", "display_name": "Shahriar Nasim Nafi", "link": "https://stackoverflow.com/users/8650263/shahriar-nasim-nafi"}, "edited": false, "score": 0, "creation_date": 1560080871, "post_id": 28997694, "comment_id": 99614604, "body": "But by creating a folder in &quot;/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX&zwnj;&#8203;.platform/Developer/&zwnj;&#8203;SDKs/MacOSX10.14.sdk&zwnj;&#8203;/usr/include/&quot; named bits, i can add the stdc++.h and it worked"}], "owner": {"reputation": 2165, "user_id": 221543, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/eb1fd995fd5e032f19319c9ce4aa45b3?s=128&d=identicon&r=PG", "display_name": "Brendan Lesniak", "link": "https://stackoverflow.com/users/221543/brendan-lesniak"}, "is_accepted": false, "score": 8, "last_activity_date": 1426109663, "last_edit_date": 1426109663, "creation_date": 1426109231, "answer_id": 28997694, "question_id": 28994148, "link": "https://stackoverflow.com/questions/28994148/how-can-i-include-bits-stdc-in-xcode/28997694#28997694", "title": "How can I include &lt;bits/stdc++&gt; in Xcode", "body": "<p>You can't. X-Code uses LLVM Toolchain with Clang for the compiler, while <code>&lt;bits/stdc++&gt;</code> is specific to the GNU Compiler Toolchain.</p>\n\n<p>Second, you shouldn't be using that header  in the first place, as stated by everyone else.</p>\n"}, {"owner": {"reputation": 2374, "user_id": 3146509, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/HgDsp.jpg?s=128&g=1", "display_name": "Reza", "link": "https://stackoverflow.com/users/3146509/reza"}, "is_accepted": true, "score": 36, "last_activity_date": 1462271019, "last_edit_date": 1462271019, "creation_date": 1462270603, "answer_id": 37001458, "question_id": 28994148, "link": "https://stackoverflow.com/questions/28994148/how-can-i-include-bits-stdc-in-xcode/37001458#37001458", "title": "How can I include &lt;bits/stdc++&gt; in Xcode", "body": "<p>You can do it by copying stdc++.h file from here:\n<a href=\"https://gist.github.com/reza-ryte-club/97c39f35dab0c45a5d924dd9e50c445f\" rel=\"noreferrer\">https://gist.github.com/reza-ryte-club/97c39f35dab0c45a5d924dd9e50c445f</a></p>\n\n<p>Then you can include the file in your c++ file like this:</p>\n\n<pre><code> //suppose the file is in your home folder, here my username is reza\n #include \"/Users/reza/stdc++.h\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2282, "user_id": 3271600, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/Jp5D8.png?s=128&g=1", "display_name": "GvSharma", "link": "https://stackoverflow.com/users/3271600/gvsharma"}, "edited": false, "score": 1, "creation_date": 1563799597, "post_id": 40935471, "comment_id": 100807835, "body": "with the above path , not working for me. But with this path it is working &quot;/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX&zwnj;&#8203;.platform/Developer/&zwnj;&#8203;SDKs/MacOSX10.14.sdk&zwnj;&#8203;/usr/include/&quot;"}], "owner": {"reputation": 199, "user_id": 6416364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52d51a721113f49fca289a54b264619d?s=128&d=identicon&r=PG&f=1", "display_name": "Sachin Kumar", "link": "https://stackoverflow.com/users/6416364/sachin-kumar"}, "is_accepted": false, "score": 17, "last_activity_date": 1480691886, "creation_date": 1480691886, "answer_id": 40935471, "question_id": 28994148, "link": "https://stackoverflow.com/questions/28994148/how-can-i-include-bits-stdc-in-xcode/40935471#40935471", "title": "How can I include &lt;bits/stdc++&gt; in Xcode", "body": "<p>Since, bits/stdc++ is a GNU GCC extension, whereas OSX uses the clang compiler.</p>\n\n<p>You have to create <strong>bits</strong> directory inside /usr/local/include and then make a header file <strong>stdc++.h</strong> inside bits and paste the contents of <a href=\"https://gist.github.com/sachin-kmr/ee03a0d07be6fcfd439b49307a12f7ed\" rel=\"noreferrer\">this gist</a> inside it.\nThen, it should compile as expected.</p>\n\n<hr>\n\n<p>Since, /usr directory is hidden by default on Mac OSX.</p>\n\n<ol>\n<li>Open Finder.  </li>\n<li>Click <strong>Go</strong> on menu bar then click <strong>Go to folder</strong> or Press Command+Shift+G directly.</li>\n<li>Enter the path /usr/local/include</li>\n<li>Now proceed as mentioned above.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1560605922, "post_id": 43028792, "comment_id": 99796619, "body": "At the <i>very</i> least, don&#39;t call it &quot;bits/stdc++.h&quot;. That&#39;s the name of an implementation header in libstdc++. Call it &quot;myHeaderWithAllOfTheStdlib&quot; or something"}], "owner": {"reputation": 517, "user_id": 5985526, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vfhaW.jpg?s=128&g=1", "display_name": "\u6c5f\u5357\u6d88\u590f", "link": "https://stackoverflow.com/users/5985526/%e6%b1%9f%e5%8d%97%e6%b6%88%e5%a4%8f"}, "is_accepted": false, "score": 23, "last_activity_date": 1490531826, "creation_date": 1490531826, "answer_id": 43028792, "question_id": 28994148, "link": "https://stackoverflow.com/questions/28994148/how-can-i-include-bits-stdc-in-xcode/43028792#43028792", "title": "How can I include &lt;bits/stdc++&gt; in Xcode", "body": "<p>Mac OS X 10.9+ no longer uses GCC/libstdc++ but uses libc++ and Clang.</p>\n\n<p>After the XCode 6.0.1 update the headers are now located here:</p>\n\n<p><code>/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1</code></p>\n\n<p>so, get the stdc++.h file from <a href=\"https://gist.github.com/frankchen0130/9ac562b55fa7e03689bca30d0e52b0e5\" rel=\"noreferrer\">here</a>,then creat <strong>bits</strong> directory in the above long address, and copy the file <strong>stdc++.h</strong> to the <strong>bits</strong> directory.</p>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1560605832, "post_id": 47290551, "comment_id": 99796597, "body": "No, this is monumentally silly. That&#39;s a header from Linux GCC 4.8, not Mac Clang &lt;whatever your version is&gt;. <b>Do not do this</b> I cannot stress it enough."}], "owner": {"reputation": 113, "user_id": 7644513, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O5NCQ.jpg?s=128&g=1", "display_name": "Sahil Rajput", "link": "https://stackoverflow.com/users/7644513/sahil-rajput"}, "is_accepted": false, "score": 0, "last_activity_date": 1510676440, "creation_date": 1510676440, "answer_id": 47290551, "question_id": 28994148, "link": "https://stackoverflow.com/questions/28994148/how-can-i-include-bits-stdc-in-xcode/47290551#47290551", "title": "How can I include &lt;bits/stdc++&gt; in Xcode", "body": "<ol>\n<li>Open Finder.</li>\n<li>Click Go on menu bar then click Go to folder or Press Command+Shift+G directly.</li>\n<li>Enter the path /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1</li>\n</ol>\n\n<p>Now, get the stdc++.h file from <a href=\"https://gist.github.com/eduarc/6022859\" rel=\"nofollow noreferrer\">here</a>, then create bits directory in the above long address, and copy the file stdc++.h to the bits directory.</p>\n"}, {"owner": {"reputation": 631, "user_id": 8650263, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-K_AsuQybNoM/AAAAAAAAAAI/AAAAAAAAAAs/OB3yLmaPV7k/photo.jpg?sz=128", "display_name": "Shahriar Nasim Nafi", "link": "https://stackoverflow.com/users/8650263/shahriar-nasim-nafi"}, "is_accepted": false, "score": 0, "last_activity_date": 1560081260, "creation_date": 1560081260, "answer_id": 56514361, "question_id": 28994148, "link": "https://stackoverflow.com/questions/28994148/how-can-i-include-bits-stdc-in-xcode/56514361#56514361", "title": "How can I include &lt;bits/stdc++&gt; in Xcode", "body": "<p>1.Download the stdc++.h file from <a href=\"https://gist.github.com/eduarc/6\" rel=\"nofollow noreferrer\">https://gist.github.com/eduarc/6</a>....</p>\n\n<p>2.In Finder CTRL + SHIFT +G  and open /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.14.sdk/usr/include/</p>\n\n<p>3.Create the folder bits and copy the downloaded file here.</p>\n"}, {"owner": {"reputation": 89, "user_id": 9396459, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QZJkJiCe_mk/AAAAAAAAAAI/AAAAAAAAEWY/NeiLasw63hQ/photo.jpg?sz=128", "display_name": "Akash Srinivasan", "link": "https://stackoverflow.com/users/9396459/akash-srinivasan"}, "is_accepted": false, "score": 1, "last_activity_date": 1574315672, "creation_date": 1574315672, "answer_id": 58968150, "question_id": 28994148, "link": "https://stackoverflow.com/questions/28994148/how-can-i-include-bits-stdc-in-xcode/58968150#58968150", "title": "How can I include &lt;bits/stdc++&gt; in Xcode", "body": "<ol>\n<li>Open Finder.</li>\n<li>Click Go on menu bar then click Go to folder or Press Command+Shift+G directly.</li>\n<li>Enter the path or c/p this path directly </li>\n</ol>\n\n<blockquote>\n  <p><em>/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1</em></p>\n</blockquote>\n\n<ol start=\"4\">\n<li>Then create bits directory in the above long address.</li>\n<li>Now, get the stdc++.h file from [here][1].</li>\n<li>and copy the file stdc++.h to the bits directory.</li>\n</ol>\n"}, {"owner": {"reputation": 301, "user_id": 5394210, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N7MWY.jpg?s=128&g=1", "display_name": "Ravibhushan Kumar", "link": "https://stackoverflow.com/users/5394210/ravibhushan-kumar"}, "is_accepted": false, "score": 3, "last_activity_date": 1581143867, "creation_date": 1581143867, "answer_id": 60124529, "question_id": 28994148, "link": "https://stackoverflow.com/questions/28994148/how-can-i-include-bits-stdc-in-xcode/60124529#60124529", "title": "How can I include &lt;bits/stdc++&gt; in Xcode", "body": "<p>Before Adding the bits/stdc++.h to your mac os platform, the First things are to figure out where your include files are present. To figure out which include file is getting utilized within you mac environment.</p>\n\n<ul>\n<li><p>Run this command in terminal:</p>\n\n<p>echo \"\" | gcc -xc - -v -E</p></li>\n</ul>\n\n<p>This will provide the details of gcc environment in your platform</p>\n\n<pre><code>Apple LLVM version 10.0.1 (clang-1001.0.46.4)\nTarget: x86_64-apple-darwin18.7.0\nThread model: posix\nInstalledDir: /Library/Developer/CommandLineTools/usr/bin\n\"/Library/Developer/.......\"\nignoring nonexistent directory \n\"/Library/Developer/CommandLineTools/SDKs/MacOSX10.14.sdk/usr/local/include\"\nignoring nonexistent directory \n\"/Library/Developer/CommandLineTools/SDKs/MacOSX10.14.sdk/Library/Frameworks\"\n#include \"...\" search starts here:\n#include &lt;...&gt; search starts here:\n /usr/local/include\n /Library/Developer/CommandLineTools/usr/lib/clang/10.0.1/include\n /Library/Developer/CommandLineTools/usr/include\n /Library/Developer/CommandLineTools/SDKs/MacOSX10.14.sdk/usr/include\n\n\n/Library/Developer/CommandLineTools/SDKs/MacOSX10.14.sdk/System/Library/Frameworks (framework directory)\nEnd of search list.\n# 1 \"&lt;stdin&gt;\"\n# 1 \"&lt;built-in&gt;\" 1\n# 1 \"&lt;built-in&gt;\" 3\n# 361 \"&lt;built-in&gt;\" 3\n# 1 \"&lt;command line&gt;\" 1\n# 1 \"&lt;built-in&gt;\" 2\n# 1 \"&lt;stdin&gt;\" 2\n</code></pre>\n\n<ul>\n<li>Go to the include path. ex:  /usr/local/include\nCreate a bits folder and add <a href=\"https://gist.github.com/sachin-kmr/ee03a0d07be6fcfd439b49307a12f7ed\" rel=\"nofollow noreferrer\">stdc++.h</a> file.</li>\n</ul>\n"}, {"owner": {"reputation": 46, "user_id": 3353763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acbc666b07d1f23fae3ead84d280cf23?s=128&d=identicon&r=PG&f=1", "display_name": "moon87", "link": "https://stackoverflow.com/users/3353763/moon87"}, "is_accepted": false, "score": 1, "last_activity_date": 1587504134, "creation_date": 1587504134, "answer_id": 61353482, "question_id": 28994148, "link": "https://stackoverflow.com/questions/28994148/how-can-i-include-bits-stdc-in-xcode/61353482#61353482", "title": "How can I include &lt;bits/stdc++&gt; in Xcode", "body": "<ol>\n<li><p>Copy the content of this header file to clipboard from Link: <a href=\"https://gist.github.com/reza-ryte-club/97c39f35dab0c45a5d924dd9e50c445f\" rel=\"nofollow noreferrer\">https://gist.github.com/reza-ryte-club/97c39f35dab0c45a5d924dd9e50c445f</a></p></li>\n<li><p>Run following in terminal :</p>\n\n<ul>\n<li>mkdir /usr/local/include/bits</li>\n<li>vim /usr/local/include/bits/stdc++.h </li>\n<li>Switch to insert mode (press i) and Paste clipboard content</li>\n<li>Save/Exit (Esc + : + w + q + Enter)</li>\n</ul></li>\n<li><p>Try compliation of your source code</p></li>\n</ol>\n"}, {"owner": {"reputation": 51, "user_id": 8024859, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddPUT.jpg?s=128&g=1", "display_name": "smriti", "link": "https://stackoverflow.com/users/8024859/smriti"}, "is_accepted": false, "score": 1, "last_activity_date": 1595934782, "creation_date": 1595934782, "answer_id": 63132803, "question_id": 28994148, "link": "https://stackoverflow.com/questions/28994148/how-can-i-include-bits-stdc-in-xcode/63132803#63132803", "title": "How can I include &lt;bits/stdc++&gt; in Xcode", "body": "<p>The standard GNU compiler, G++ Does not directly support this header so we include it in the required location using the following steps :</p>\n<ol>\n<li><p>cd /usr/local/include</p>\n</li>\n<li><p>mkdir bits</p>\n</li>\n<li><p>nano stdc++.h</p>\n</li>\n</ol>\n<p>then copy the code of the header file from <a href=\"https://github.com/seepls/Javaaa/blob/master/stdc%2B%2B.h\" rel=\"nofollow noreferrer\">here</a> .</p>\n<p>Hope that helps ! :D</p>\n"}], "owner": {"reputation": 608, "user_id": 3790881, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/SZ7nA.png?s=128&g=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/3790881/omar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54300, "favorite_count": 14, "accepted_answer_id": 37001458, "answer_count": 10, "score": 31, "last_activity_date": 1595934782, "creation_date": 1426097095, "last_edit_date": 1573139784, "question_id": 28994148, "link": "https://stackoverflow.com/questions/28994148/how-can-i-include-bits-stdc-in-xcode", "title": "How can I include &lt;bits/stdc++&gt; in Xcode", "body": "<p>I have tried to include the header file bits/stdc++ in my C++ code, but it seems the compiler doesn't support it. Is there any way to make it work?</p>\n\n<p>I use OS X Yosemite 10.10.2 and Xcode 6.1.1.</p>\n"}, {"tags": ["c++", "visual-c++"], "answers": [{"comments": [{"owner": {"reputation": 5207, "user_id": 880874, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DsNOB.jpg?s=128&g=1", "display_name": "SkyeBoniwell", "link": "https://stackoverflow.com/users/880874/skyeboniwell"}, "edited": false, "score": 0, "creation_date": 1426097310, "post_id": 28994171, "comment_id": 46236462, "body": "Thanks, that got rid of the error.  But when I use cout to write out the inventory, it&#39;s just the memory pointer.  How do I output the actual contents of the array?  thanks"}], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 1, "last_activity_date": 1426097746, "last_edit_date": 1426097746, "creation_date": 1426097165, "answer_id": 28994171, "question_id": 28994051, "link": "https://stackoverflow.com/questions/28994051/trouble-with-creating-class-instance-variables/28994171#28994171", "title": "Trouble with creating class instance variables", "body": "<p>Problem in the following function:</p>\n\n<pre><code>string* Character::getInv()\n// ^^^^ The return type is std::string*\n{\n   string inv = { \"shield\", \"chainmail\", \"helmet\" };\n   return inv;\n   // And you are returning a std::string\n}\n</code></pre>\n\n<p>Instead of:</p>\n\n<pre><code>string inv = { \"shield\", \"chainmail\", \"helmet\" };\nreturn inv;\n</code></pre>\n\n<p>You probably meant:</p>\n\n<pre><code>static string inv[] = { \"shield\", \"chainmail\", \"helmet\" };\nreturn inv;\n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<p>It will be better for you return a <code>std::vector</code>. Then you can access the contents of a <code>std::vector</code> more easily. You don't have to make assumptions about the size of the array.</p>\n\n<pre><code>std::vector&lt;std::string&gt; const&amp; Character::getInv()\n{\n   static std::vector&lt;std::string&gt; inv = { \"shield\", \"chainmail\", \"helmet\" };\n   return inv;\n}\n</code></pre>\n\n<p>Change the usage:</p>\n\n<pre><code>std::vector&lt;std::string&gt; const&amp; inv = Gandalf-&gt;getInv();\ncout &lt;&lt; \"Inventory: \\n\";\nfor (auto const&amp; item : inv )\n{\n   cout &lt;&lt; item &lt;&lt; \"\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 5207, "user_id": 880874, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DsNOB.jpg?s=128&g=1", "display_name": "SkyeBoniwell", "link": "https://stackoverflow.com/users/880874/skyeboniwell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 28994171, "answer_count": 1, "score": 0, "last_activity_date": 1426097746, "creation_date": 1426096801, "question_id": 28994051, "link": "https://stackoverflow.com/questions/28994051/trouble-with-creating-class-instance-variables", "title": "Trouble with creating class instance variables", "body": "<p>I'm writing a little program to generate a character for a beginning c++ course.</p>\n\n<p>I'm having trouble with the inventory part.</p>\n\n<p>I'm using Visual Studio and when I try to set the inventory array, I get this error:</p>\n\n<blockquote>\n  <p>'return' : cannot convert from 'std::string' to 'std::string *'</p>\n</blockquote>\n\n<p>Googling didn't really turn up anything that worked.</p>\n\n<p>Could someone take a look at the code and clue me in as to why it's failing?</p>\n\n<p>Thanks</p>\n\n<pre><code>using namespace std;\n\nint generateXp(int);\n\n\nclass Character {\nprivate:\n\nint xp = 0;\nstatic const string inv[4];\n\npublic:\n\nvoid setXp(int xp){\n    this-&gt;xp = xp;\n}\n\nint getXp() {\n    return this-&gt;xp;\n}\n\nstring *getInv();\n\nstring* Character::getInv() {\nstring inv = { \"shield\", \"chainmail\", \"helmet\" };\nreturn inv;\n}\n\nint main()\n{\nsrand(time(NULL));\n\nCharacter * Gandalf = new Character;\ncout &lt;&lt; \"Gandalf has \" &lt;&lt; Gandalf-&gt;getXp() &lt;&lt; \" experience points.\\n\";\nGandalf-&gt;setXp(generateXp(100));\ncout &lt;&lt; \"Gandalf now has \" &lt;&lt; Gandalf-&gt;getXp() &lt;&lt; \" experience points.\\n\";\ncout &lt;&lt; \"Inventory \" &lt;&lt; Gandalf-&gt;getInv() &lt;&lt; \"\\n\";\n}\n\nint generateXp(int base)\n{\nint randomNumber = 0;\n\nrandomNumber = (rand() % 5000) + 1;\n\nreturn randomNumber;\n}\n</code></pre>\n"}, {"tags": ["c++", "tabs", "mfc", "ctabctrl"], "comments": [{"owner": {"reputation": 3887, "user_id": 937421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Lunw3.jpg?s=128&g=1", "display_name": "rrirower", "link": "https://stackoverflow.com/users/937421/rrirower"}, "edited": false, "score": 1, "creation_date": 1426097522, "post_id": 28994039, "comment_id": 46236596, "body": "Have you clicked Retry to step through the code?"}, {"owner": {"reputation": 1793, "user_id": 900626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YeenP.jpg?s=128&g=1", "display_name": "Mark Taylor", "link": "https://stackoverflow.com/users/900626/mark-taylor"}, "edited": false, "score": 1, "creation_date": 1426097551, "post_id": 28994039, "comment_id": 46236617, "body": "Clicking Retry on that dialog will lead you more useful debugging info."}, {"owner": {"reputation": 1793, "user_id": 900626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YeenP.jpg?s=128&g=1", "display_name": "Mark Taylor", "link": "https://stackoverflow.com/users/900626/mark-taylor"}, "edited": false, "score": 1, "creation_date": 1426097640, "post_id": 28994039, "comment_id": 46236678, "body": "Where in your code is the call to InsertItem?  It can&#39;t be in DoDataExchange, and it needs to be in a function that is called after the dialog is initialized and control windows are created."}, {"owner": {"reputation": 1754, "user_id": 4449640, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-me4y5aVPCrY/AAAAAAAAAAI/AAAAAAAAABI/0dkBJMaB1IE/photo.jpg?sz=128", "display_name": "Kyle Williamson", "link": "https://stackoverflow.com/users/4449640/kyle-williamson"}, "edited": false, "score": 0, "creation_date": 1426097804, "post_id": 28994039, "comment_id": 46236774, "body": "I have updated  my question with debugging info.  I make the call to InsertItem  after <code>OnInitDialog() {</code> of my main Dialog&#39;s class."}, {"owner": {"reputation": 1754, "user_id": 4449640, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-me4y5aVPCrY/AAAAAAAAAAI/AAAAAAAAABI/0dkBJMaB1IE/photo.jpg?sz=128", "display_name": "Kyle Williamson", "link": "https://stackoverflow.com/users/4449640/kyle-williamson"}, "edited": false, "score": 0, "creation_date": 1426097903, "post_id": 28994039, "comment_id": 46236831, "body": "At the moment, my m_TabCtrl is not trying to link to any dialogs.  I am just trying to get the text of each tab to show."}, {"owner": {"reputation": 3887, "user_id": 937421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Lunw3.jpg?s=128&g=1", "display_name": "rrirower", "link": "https://stackoverflow.com/users/937421/rrirower"}, "edited": false, "score": 0, "creation_date": 1426098628, "post_id": 28994039, "comment_id": 46237272, "body": "If what you want is a tabbed looking dialog structure, take a look at CPropertySheet and CPropertyPage.  It might be a little easier for you."}, {"owner": {"reputation": 3887, "user_id": 937421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Lunw3.jpg?s=128&g=1", "display_name": "rrirower", "link": "https://stackoverflow.com/users/937421/rrirower"}, "edited": false, "score": 1, "creation_date": 1426098756, "post_id": 28994039, "comment_id": 46237343, "body": "More than likely, you have an invalid handle (m_hwnd) when executing the InsertItem command.  That would imply your tab control was not created correctly before you tried to execute the insert command."}], "answers": [{"owner": {"reputation": 5085, "user_id": 1181353, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zqKlZ.jpg?s=128&g=1", "display_name": "Joseph Willcoxson", "link": "https://stackoverflow.com/users/1181353/joseph-willcoxson"}, "is_accepted": true, "score": 2, "last_activity_date": 1426108609, "creation_date": 1426108609, "answer_id": 28997517, "question_id": 28994039, "link": "https://stackoverflow.com/questions/28994039/adding-tabs-to-ctabctrl-in-mfc/28997517#28997517", "title": "Adding tabs to CTabCtrl in MFC", "body": "<p>From your information provided, it's clear that it is ASSERTing on IsWindow(m_hWnd).  So that means the window for your tab control has not been created yet when you call InsertItem().</p>\n\n<p>Are you putting the CTabCtrl in a CDialog derived class or in some other CWnd derived class?  Have you set a breakpoint on your DDX_Control() line of code to be sure 1) it is actually being called, and 2) that it is successful?  I have a feeling that it is not even being called, because if it was, then you would have a valid m_hWnd, or you would get an ASSERT() at the point of your DDX_Control() call to say that it failed.</p>\n"}], "owner": {"reputation": 1754, "user_id": 4449640, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-me4y5aVPCrY/AAAAAAAAAAI/AAAAAAAAABI/0dkBJMaB1IE/photo.jpg?sz=128", "display_name": "Kyle Williamson", "link": "https://stackoverflow.com/users/4449640/kyle-williamson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1503, "favorite_count": 0, "accepted_answer_id": 28997517, "answer_count": 1, "score": 0, "last_activity_date": 1426108609, "creation_date": 1426096764, "last_edit_date": 1592644375, "question_id": 28994039, "link": "https://stackoverflow.com/questions/28994039/adding-tabs-to-ctabctrl-in-mfc", "title": "Adding tabs to CTabCtrl in MFC", "body": "<p>I am trying to add a CTabCtrl into my MFC application.  I am trying to follow the MSDN directly.</p>\n<p><img src=\"https://i.stack.imgur.com/hb1rB.png\" alt=\"MSDN Adding Tab\" /></p>\n<p>*<a href=\"https://msdn.microsoft.com/en-us/library/dcz8wdb3.aspx\" rel=\"nofollow noreferrer\">MSDN: Adding Tabs to Tab Control</a></p>\n<p>Here is what I have tried:</p>\n<p><code>DDX_Control(pDX, TAB1, m_TabCtrl);</code></p>\n<pre><code>TC_ITEM ti;\nti.mask = TCIF_TEXT;\nti.pszText = _T(&quot;First Tab&quot;);\n\nm_TabCtrl.InsertItem(0,&amp;ti);\n</code></pre>\n<p>I am receiving the following error message:\n<img src=\"https://i.stack.imgur.com/g2yS5.png\" alt=\"Assertion Fail\" /></p>\n<p>If I hit ignore, my CTabCtrl is shown, but without any tabs (just a gray square).  If I hit retry, I get the breakpoint at:</p>\n<pre><code>_AFXCMN_INLINE BOOL CTabCtrl::SetItem(int nItem, TCITEM* pTabCtrlItem)\n{ ASSERT(::IsWindow(m_hWnd)); return (BOOL)::SendMessage(m_hWnd, TCM_SETITEM, nItem, (LPARAM)pTabCtrlItem); }\n</code></pre>\n<p>I have tried adding the header <code>#include &quot;afxcmn.h&quot;</code> but it does not change anything.</p>\n<p>I am simply trying to get named tabs to show on my application as a first step.  Eventually I wish for the tabs to show modeless dialogs.  Can someone tell me what I am doing wrong?  Is there a better way to use tabs in MFC?</p>\n"}, {"tags": ["c++", "datasnap", "tstream"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1426097017, "post_id": 28993949, "comment_id": 46236268, "body": "Just some notes.  <code>Q</code> leaks.  Can you change <code>TQuery* Q = new TQuery(NULL);</code> to TQuery Q(NULL);` ?  <code>MemoryStream</code> also leaks;"}, {"owner": {"reputation": 1, "user_id": 4659641, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-bKpHNnFKa4k/AAAAAAAAAAI/AAAAAAAAAQ4/IcdZibiJZ7A/photo.jpg?sz=128", "display_name": "Mauricio Nestor", "link": "https://stackoverflow.com/users/4659641/mauricio-nestor"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1426097491, "post_id": 28993949, "comment_id": 46236575, "body": "@RichardCritten C++Builder Gives me an error and doesn&#39;t compile if I do      TQuery Q(NULL);   And what do you mean by leaks?"}, {"owner": {"reputation": 1, "user_id": 4659641, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-bKpHNnFKa4k/AAAAAAAAAAI/AAAAAAAAAQ4/IcdZibiJZ7A/photo.jpg?sz=128", "display_name": "Mauricio Nestor", "link": "https://stackoverflow.com/users/4659641/mauricio-nestor"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1426099524, "post_id": 28993949, "comment_id": 46237852, "body": "I guess I figured the memory leak you spoke about, @RichardCritten, and I think I made a not so right workaround. I put a free statement for the memorystream inside the while, this seems to work, but it doesn&#39;t feel right creating and freeing the memory stream every iteration."}], "owner": {"reputation": 1, "user_id": 4659641, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-bKpHNnFKa4k/AAAAAAAAAAI/AAAAAAAAAQ4/IcdZibiJZ7A/photo.jpg?sz=128", "display_name": "Mauricio Nestor", "link": "https://stackoverflow.com/users/4659641/mauricio-nestor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 159, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1426096514, "creation_date": 1426096514, "question_id": 28993949, "link": "https://stackoverflow.com/questions/28993949/access-violation-when-loading-memorystream", "title": "Access Violation when loading memorystream", "body": "<p>Please help, I don't know what I am doing wrong.</p>\n\n<p>I am developing an application that retrieves files from a server machine, for autoupdate the client machines. this is what I came up with:</p>\n\n<pre><code>void TAutoUpdate::CarregarDados()\n{\n   try{\n      TQuery* Q = new TQuery(NULL);\n      Q-&gt;DatabaseName = \"Base\";\n      Q-&gt;SQL-&gt;Add(\"SELECT * FROM UPDATE_MODULES WHERE DT_UPDATE &gt; \" + QuotedStr(ReadIni(\"ICDNetXP\", \"AutoUpdate\", \"DataUpdate\", \"12/30/1899\")));\n      Q-&gt;Prepare();\n      Q-&gt;Active = true;\n      Q-&gt;First();\n\n      MemoryStream = new TMemoryStream;\n      MemoryStream-&gt;Seek(0, soFromBeginning);\n\n      SQLConnectionServer-&gt;Connected = true;\n      TSMClient* Servidor = new TSMClient(SQLConnectionServer-&gt;DBXConnection);\n      TDateTime maiorDataUpdate;\n      String caminho;\n      while(!Q-&gt;Eof){\n         MemoryStream-&gt;Clear();\n\n         if(maiorDataUpdate &lt; Q-&gt;FieldByName(\"DT_UPDATE\")-&gt;AsDateTime)\n            maiorDataUpdate = Q-&gt;FieldByName(\"DT_UPDATE\")-&gt;AsDateTime;\n\n         caminho = \"\";\n         caminho += Q-&gt;FieldByName(\"PATH\")-&gt;AsString + Q-&gt;FieldByName(\"NOME\")-&gt;AsString;\n         MemoryStream-&gt;LoadFromStream(CopyStream(Servidor-&gt;GetAtualizacaoSistema(Q-&gt;FieldByName(\"ID\")-&gt;AsString))); //here the error occours on 2nd execution of the while block\n         MemoryStream-&gt;Seek(0, soFromBeginning);\n         MemoryStream-&gt;SaveToFile(caminho);\n         Q-&gt;Next();\n      }\n   }catch(Exception &amp; e){\n      MessageDlg(e.Message, mtError, TMsgDlgButtons() &lt;&lt; mbOK, 0);\n   }\n}\n\nTStream* TAutoUpdate::CopyStream(TStream* StreamIn)\n{\n      int BytesRead;\n      System::PByte Buffer;\n      const MaxBufSize = 1;\n      TMemoryStream* StreamOut = new TMemoryStream;\n\n      StreamIn-&gt;Seek(0, soFromBeginning);\n      StreamOut-&gt;Seek(0, soFromBeginning);\n\n      do{\n         BytesRead = StreamIn-&gt;Read(Buffer, MaxBufSize);\n         if(BytesRead &gt; 0)\n            StreamOut-&gt;Write(Buffer, MaxBufSize);\n\n      }while(BytesRead &gt; 0);\n\n      StreamOut-&gt;Seek(0, soFromBeginning);\n      StreamOut-&gt;SaveToFile(\"teste\");\n      return StreamOut;\n}\n</code></pre>\n\n<p>So I want to know why this code works, but only on first iteration with the while. The results of the query are right, and the code loads and saves alright, but only for the first result of que query. And a workaround for this to work would be nice. </p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1426097767, "post_id": 28993790, "comment_id": 46236756, "body": "<b><i><a href=\"http://stackoverflow.com/q/19626615/645128\">Writing to identical output to console and buffer simultaneously</a></i></b>"}, {"owner": {"reputation": 339, "user_id": 1905276, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/37b5342d290c17f586742504a53a1899?s=128&d=identicon&r=PG", "display_name": "Santhosh Kumar", "link": "https://stackoverflow.com/users/1905276/santhosh-kumar"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 1, "creation_date": 1426098218, "post_id": 28993790, "comment_id": 46237016, "body": "Wow! Thanks Ryyker you have answered my question. Basically I open the stdout and read it in. I will do it and post the final working code later. This case can be closed."}], "answers": [{"comments": [{"owner": {"reputation": 339, "user_id": 1905276, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/37b5342d290c17f586742504a53a1899?s=128&d=identicon&r=PG", "display_name": "Santhosh Kumar", "link": "https://stackoverflow.com/users/1905276/santhosh-kumar"}, "edited": false, "score": 0, "creation_date": 1426097031, "post_id": 28993989, "comment_id": 46236274, "body": "I dont want to do &gt; and save it to a file and then read it to the buffer. I want to prevent redirecting stdout to a file. I cannot write to the hard disk, I have claim the print out from GetData.exe directly to my local buffer DataBuffer[]. Wait a min I just read your comment on hStdOutPut, can I then read in the stdout to my buffer?"}], "owner": {"reputation": 8889, "user_id": 3493731, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0ccfa8c5c786e748c8cf4f1d3bae9694?s=128&d=identicon&r=PG&f=1", "display_name": "MuertoExcobito", "link": "https://stackoverflow.com/users/3493731/muertoexcobito"}, "is_accepted": false, "score": 1, "last_activity_date": 1426102746, "last_edit_date": 1426102746, "creation_date": 1426096611, "answer_id": 28993989, "question_id": 28993790, "link": "https://stackoverflow.com/questions/28993790/how-can-i-save-the-data-written-to-stdout-to-local-buffer/28993989#28993989", "title": "How can I save the data written to stdout to local buffer", "body": "<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms686331(v=vs.85).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/windows/desktop/ms686331(v=vs.85).aspx</a>\nUse with your <code>STARTUPINFO</code> parameter 'si', use <code>STARTF_USESTDHANDLES</code> in the <code>dwFlags</code>, and provide a <code>HANDLE</code> for <code>hStdOutput</code>.</p>\n\n<p>Or, even easier, you could just redirect the output the file on the command line. Eg:\n<code>GetData.exe &gt; File.txt</code></p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682499(v=vs.85).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/windows/desktop/ms682499(v=vs.85).aspx</a></p>\n\n<p>\"Creating a Child Process with Redirected Input and Output\" sample, adapted to only read the stdout of the process, and fits your setup. </p>\n\n<pre><code>#include &lt;comdef.h&gt;\n\nint main() {\nSTARTUPINFO si;\nPROCESS_INFORMATION pi;\nchar DataBuffer[100][100];\n\nZeroMemory(&amp;si, sizeof(si));\nsi.cb = sizeof(si);\nZeroMemory(&amp;pi, sizeof(pi));\n\nSECURITY_ATTRIBUTES saAttr;\n\n// Set the bInheritHandle flag so pipe handles are inherited. \n\nsaAttr.nLength = sizeof(SECURITY_ATTRIBUTES);\nsaAttr.bInheritHandle = TRUE;\nsaAttr.lpSecurityDescriptor = NULL;\n\nHANDLE g_hChildStd_IN_Rd = NULL;\nHANDLE g_hChildStd_OUT_Rd = NULL;\nHANDLE g_hChildStd_OUT_Wr = NULL;\n\n// Create a pipe for the child process's STDOUT. \n\nif (!CreatePipe(&amp;g_hChildStd_OUT_Rd, &amp;g_hChildStd_OUT_Wr, &amp;saAttr, 0))\n{\n    printf(\"StdoutRd CreatePipe\");\n    return 0;\n}\n\n// Ensure the read handle to the pipe for STDOUT is not inherited.\nif (!SetHandleInformation(g_hChildStd_OUT_Rd, HANDLE_FLAG_INHERIT, 0))\n{\n    printf(\"StdoutRd CreatePipe\");\n    return 0;\n}\n\nsi.cb = sizeof(STARTUPINFO);\nsi.hStdError = g_hChildStd_OUT_Wr;\nsi.hStdOutput = g_hChildStd_OUT_Wr;\nsi.hStdInput = g_hChildStd_IN_Rd;\nsi.dwFlags |= STARTF_USESTDHANDLES;\n\nif (!CreateProcess(NULL,  // No module name (use command line)\n    \"c:\\\\windows\\\\system32\\\\whoami.exe\",  // Command line\n    NULL,           // Process handle not inheritable\n    NULL,           // Thread handle not inheritable\n    TRUE,           // Set handle inheritance to TRUE\n    0,              // No creation flags\n    NULL,           // Use parent's environment block\n    NULL,           // Use parent's starting directory \n    &amp;si,            // Pointer to STARTUPINFO structure\n    &amp;pi)           // Pointer to PROCESS_INFORMATION structure\n    )\n{\n    _com_error e(GetLastError());\n    printf(\"CreateProcess failed (%d - %s).\\n\", GetLastError(), e.ErrorMessage());\n    return 0;\n}\n\nDWORD bytesRead;\nif (!ReadFile(g_hChildStd_OUT_Rd, DataBuffer, 100 * 100, &amp;bytesRead, NULL))\n{\n    _com_error e(GetLastError());\n    printf(\"ReadFile failed (%d - %s).\\n\", GetLastError(), e.ErrorMessage());\n}\nreturn 0;\n}\n</code></pre>\n\n<p>Now, the output of whoami.exe is in DataBuffer. Note that this sample disregards a lot of safety issues, which you may want to address, especially if you are not providing GetData.exe yourself.</p>\n"}], "owner": {"reputation": 339, "user_id": 1905276, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/37b5342d290c17f586742504a53a1899?s=128&d=identicon&r=PG", "display_name": "Santhosh Kumar", "link": "https://stackoverflow.com/users/1905276/santhosh-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1426190104, "creation_date": 1426096050, "question_id": 28993790, "link": "https://stackoverflow.com/questions/28993790/how-can-i-save-the-data-written-to-stdout-to-local-buffer", "title": "How can I save the data written to stdout to local buffer", "body": "<p>In MyProgram.c I am doing  CreateProcess(\"GetData.exe\" ....);. GetData when run on a command line prints about 100 lines of data to stdout.  When I run my MyPragrame.exe I want that data not going to stdout instead I want it to be saved in the buffer DataBuffer[100][100] assuming there are 100 lines whose strlen is 100. Please help out. Thanks</p>\n\n<p>MyProgram.c:</p>\n\n<pre><code>#include &lt;Windows.h&gt;\n#include &lt;stdio.h&gt;\n\nvoid\nmain()\n{\n    STARTUPINFO si;\n    PROCESS_INFORMATION pi;\n    char DataBuffer[100][100];\n\n    ZeroMemory( &amp;si, sizeof(si) );\n    si.cb = sizeof(si);\n    ZeroMemory( &amp;pi, sizeof(pi) );\n\n    if( !CreateProcess( NULL,  // No module name (use command line)\n        \"Getdata.exe\",  // Command line\n        NULL,           // Process handle not inheritable\n        NULL,           // Thread handle not inheritable\n        FALSE,          // Set handle inheritance to FALSE\n        0,              // No creation flags\n        NULL,           // Use parent's environment block\n        NULL,           // Use parent's starting directory \n        &amp;si,            // Pointer to STARTUPINFO structure\n        &amp;pi )           // Pointer to PROCESS_INFORMATION structure\n    ) \n    {\n        printf( \"CreateProcess failed (%d).\\n\", GetLastError() );\n        return;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "matrix", "openmp", "stxxl"], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 2407438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c9e990c0ebfe966cdebb9451011aa8e?s=128&d=identicon&r=PG", "display_name": "mculp", "link": "https://stackoverflow.com/users/2407438/mculp"}, "edited": false, "score": 0, "creation_date": 1426182414, "post_id": 29003598, "comment_id": 46277847, "body": "Alright, how exactly is the paging system not thread-safe. I&#39;m assuming my interpretation of the thread-safety of the block managers is incorrect from &lt;<a href=\"http://stxxl.sourceforge.net/tags/master/faq.html\" rel=\"nofollow noreferrer\">stxxl.sourceforge.net/tags/master/faq.html</a>&gt;. This answers my question, but it still doesn&#39;t really help me in understanding."}], "owner": {"reputation": 294, "user_id": 2950810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KMLwW.jpg?s=128&g=1", "display_name": "Timo Bingmann", "link": "https://stackoverflow.com/users/2950810/timo-bingmann"}, "is_accepted": false, "score": 1, "last_activity_date": 1426143424, "creation_date": 1426143424, "answer_id": 29003598, "question_id": 28993771, "link": "https://stackoverflow.com/questions/28993771/parallelizing-stxxl-container/29003598#29003598", "title": "Parallelizing STXXL Container", "body": "<p>Access to the same vector is not thread-safe. Think about what the vector does: it's an elaborate paging system, and that is not thread-safe.</p>\n"}], "owner": {"reputation": 39, "user_id": 2407438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c9e990c0ebfe966cdebb9451011aa8e?s=128&d=identicon&r=PG", "display_name": "mculp", "link": "https://stackoverflow.com/users/2407438/mculp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1426143424, "creation_date": 1426095988, "question_id": 28993771, "link": "https://stackoverflow.com/questions/28993771/parallelizing-stxxl-container", "title": "Parallelizing STXXL Container", "body": "<p>I am trying to use STXXL to build a large matrix and be able to perform several different operations on the matrix. Currently, I'm using <code>stxxl::vector</code> as a way of storing submatrices of my large matrix. What I'm attempting to do is to normalize each column of the matrix. So my only data dependency should be in the columns. When I try to use openmp to parallelize the access to the submatrices I get the error message</p>\n\n<blockquote>\n  <p>[STXXL-ERRMSG] WRITE request submitted for a BID with a pending READ\n  request</p>\n</blockquote>\n\n<p>over and over again. Am I misunderstanding something on the thread-safety of STXXL? Because what I'm doing shouldn't ever be accessing the same submatrix. Here's the example code I'm trying to debug and run:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stxxl/vector&gt;\n\n#define FEATURE_LENGTH 128\n#define PARTITION_SIZE 16\n\ntypedef stxxl::VECTOR_GENERATOR&lt;int&gt;::result vec;\n\nusing namespace std;\n\nstruct MyMatrix\n{\n    float A[FEATURE_LENGTH*PARTITION_SIZE];\n};\n\nint main()\n{\n    const int N = (1 &lt;&lt; 20);\n    stxxl::vector&lt;MyMatrix&gt; C;\n    for (int n = 0; n &lt; N; ++n) {\n        MyMatrix A;\n        for (size_t j = 0; j &lt; PARTITION_SIZE; ++j) {\n            for (size_t i = 0; i &lt; FEATURE_LENGTH; ++i) {\n                A.A[j*FEATURE_LENGTH + i] = n;\n            }\n        }\n        if (n == 0) {\n            std::cout &lt;&lt; \"sizeof(A) = \" &lt;&lt; sizeof(A) &lt;&lt; std::endl;\n        }\n        C.push_back(A);\n    }\n\n    #pragma omp parallel for shared(C)\n    for (unsigned long long m = 0; m &lt; C.size(); ++m) {\n        for (int j = 0; j &lt; PARTITION_SIZE; ++j) {\n            MyMatrix&amp; C_m = C[m];\n            float sum = 0;\n            for (int i = 0; i &lt; FEATURE_LENGTH; ++i) {\n                sum += C_m.A[j*FEATURE_LENGTH + i];\n            }\n            if (sum != 0) {\n                for (int i = 0; i &lt; FEATURE_LENGTH; ++i) {\n                    C_m.A[j*FEATURE_LENGTH + i] /= sum;\n                }\n            }\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>The CXX flags I'm running are </p>\n\n<blockquote>\n  <p>-fopenmp -W -Wall -std=c++11 -O3</p>\n</blockquote>\n"}, {"tags": ["c++", "numerical", "approximation"], "comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1426115505, "post_id": 28993752, "comment_id": 46246139, "body": "One improvement is to take the multiplication outside the <code>floor</code> call."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1426116073, "post_id": 28993752, "comment_id": 46246368, "body": "Do you need a numeric upper bound on <code>y</code>, or just a stopping condition for a loop?  For example, if x is positive, that condition is equivalent to: <code>((x+y) &lt; 0) || ((x+y)*(x+y) &lt; n*x*x)</code> and when x is negative, it simplifies to <code>(x+y)*(x+y) &gt; n*x*x</code>"}, {"owner": {"reputation": 1530, "user_id": 4562911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ebc7b3d9f657ab929c232596182c861?s=128&d=identicon&r=PG&f=1", "display_name": "halfflat", "link": "https://stackoverflow.com/users/4562911/halfflat"}, "edited": false, "score": 0, "creation_date": 1426117273, "post_id": 28993752, "comment_id": 46246813, "body": "I think you need the multiplication inside the <code>floor</code> rather than outside: e.g. with x=10, n=15: <code>floor(x*sqrt((float)n)-x)</code> gives 28 while <code>x*floor(sqrt((float)n)-1)</code> gives 20."}], "answers": [{"comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1426116182, "post_id": 28999063, "comment_id": 46246410, "body": "I&#39;ve a feeling that &quot;enumeration of solutions&quot; rules out such large ranges."}, {"owner": {"reputation": 43, "user_id": 4659604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38978e23b1648a9f8d713134a98481fa?s=128&d=identicon&r=PG&f=1", "display_name": "rgugliel", "link": "https://stackoverflow.com/users/4659604/rgugliel"}, "edited": false, "score": 0, "creation_date": 1426255235, "post_id": 28999063, "comment_id": 46309179, "body": "Thanks a lot! I will use the isqrt function but the information about the representations of decimal numbers is really imteresting."}], "owner": {"reputation": 1530, "user_id": 4562911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ebc7b3d9f657ab929c232596182c861?s=128&d=identicon&r=PG&f=1", "display_name": "halfflat", "link": "https://stackoverflow.com/users/4562911/halfflat"}, "is_accepted": true, "score": 2, "last_activity_date": 1426116793, "last_edit_date": 1426116793, "creation_date": 1426115127, "answer_id": 28999063, "question_id": 28993752, "link": "https://stackoverflow.com/questions/28993752/approximation-error-when-using-sqrt-and-floor/28999063#28999063", "title": "Approximation error when using sqrt and floor", "body": "<p>You should definitely be worried about approximation error, but how worried depends upon the ranges of values for <em>x</em> and <em>n</em> you are concerned about.</p>\n\n<p>Calculations in IEEE 4-byte floating point representations are going to have errors roughly on the order of one part in 2^23 to 2^24; for an 8-byte representation (i.e, a <code>double</code>), it will be roughly one part in 2^52 to 2^53. You could expect then that you would need to use <code>double</code>s rather than <code>float</code>s to get an accurate result for 32-bit integers <em>x</em> and <em>n</em>, and that even a <code>double</code> would be insufficient for 64-bit integers.</p>\n\n<p>As an example, consider the code:</p>\n\n<pre><code>template &lt;typename F,typename V&gt;\nF approxub(V x,V n) {\n    return std::floor(x*std::sqrt(F(n))-x);\n}\n\nuint64_t n=1000000002000000000ull; // (10^9 + 1)^2 - 1\nuint64_t x=3;\nuint64_t y=approxub&lt;double&gt;(x,n);\n</code></pre>\n\n<p>This gives a value of <em>y</em>=3000000000, but the correct value is 2999999999.</p>\n\n<p>It's even worse when <em>x</em> is large and <em>n</em> is small: large 64-bit integers are not exactly representable in IEEE <code>double</code>s:</p>\n\n<pre><code>uint64_t n=9;\nuint64_t x=5000000000000001111; // 5e18 + 1111\nuint64_t y=approxlb&lt;double&gt;(x,n);\n</code></pre>\n\n<p>The correct value for y (putting to one side the issue of when <em>n</em> is a perfect square \u2014 the true upper bound will be one less in this case) is 2 <em>x</em> = 10000000000000002222, i.e. 1e19 + 2222. The computed <em>y</em> is, however, 10000000000000004096.</p>\n\n<h2>Avoiding floating point approximations</h2>\n\n<p>Suppose you had a function <code>isqrt</code> which exactly computed the integer part of the square-root of an integer. Then you could say</p>\n\n<pre><code>y = isqrt(x*x*n) - x\n</code></pre>\n\n<p>and provided that the product <code>x*x*n</code> fit inside your integer type, you would have an exact upper bound (or one more than the upper bound if <em>n</em> is a perfect square.) There's more than one way to write an <code>isqrt</code> function; this is an example implementation based on the <a href=\"http://www.codecodex.com/wiki/Calculate_an_integer_square_root\" rel=\"nofollow\">material at code codex</a>:</p>\n\n<pre><code>template &lt;typename V&gt;\nV isqrt(V v) {\n    if (v&lt;0) return 0;\n\n    typedef typename std::make_unsigned&lt;V&gt;::type U;\n    U u=v,r=0;\n\n    constexpr int ubits=std::numeric_limits&lt;U&gt;::digits;\n    U place=U(1)&lt;&lt;(2*((ubits-1)/2));\n\n    while (place&gt;u) place/=4;\n    while (place) {\n        if (u&gt;=r+place) {\n            u-=r+place;\n            r+=2*place;\n        }\n        r/=2;\n        place/=4;\n    }\n    return (V)r;\n}\n</code></pre>\n\n<p>What if <em>x</em> is too large for this? For example, if our largest integral type has 64 bits, and <em>x</em> is larger than 2^32. The most straightforward solution would be to do a binary search, taking as bounds <em>x r - x</em> and <em>x r</em>, where <em>r</em> = [\u221a<em>n</em>] is the integer square root.</p>\n"}], "owner": {"reputation": 43, "user_id": 4659604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38978e23b1648a9f8d713134a98481fa?s=128&d=identicon&r=PG&f=1", "display_name": "rgugliel", "link": "https://stackoverflow.com/users/4659604/rgugliel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "accepted_answer_id": 28999063, "answer_count": 1, "score": 3, "last_activity_date": 1512229874, "creation_date": 1426095926, "last_edit_date": 1512229874, "question_id": 28993752, "link": "https://stackoverflow.com/questions/28993752/approximation-error-when-using-sqrt-and-floor", "title": "Approximation error when using sqrt and floor", "body": "<p>I have to do an enumeration of solutions of an equation and I know that  <code>y &lt; x *( sqrt(n) - 1 )</code>, where <em>x</em>, <em>y</em> and <em>n</em> are integers.</p>\n\n<p>My naive approach would be to look for <em>y</em> less or equal than <code>floor( x * ( sqrt( (float)n ) - 1 ) )</code>.</p>\n\n<hr>\n\n<ul>\n<li><p>Should I be worried about approximation error?</p></li>\n<li><p>For example, if my expression is a little be greater than an integer <em>m</em>, should I be worried to get <em>m-1</em> at the end?</p></li>\n<li><p>How could I detect such errors?</p></li>\n</ul>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4659630, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rhdyn_twC80/AAAAAAAAAAI/AAAAAAAAABM/wQIiqszFtG0/photo.jpg?sz=128", "display_name": "TheGamingYeti", "link": "https://stackoverflow.com/users/4659630/thegamingyeti"}, "edited": false, "score": 0, "creation_date": 1426119927, "post_id": 28994029, "comment_id": 46247617, "body": "nvm I fixed the access violation reading location error. I didn&#39;t have npc defined as anything in my MainCharacter class. Derp"}], "owner": {"reputation": 63, "user_id": 865515, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vsV7z.png?s=128&g=1", "display_name": "Gregory", "link": "https://stackoverflow.com/users/865515/gregory"}, "is_accepted": true, "score": 0, "last_activity_date": 1426096731, "creation_date": 1426096731, "answer_id": 28994029, "question_id": 28993664, "link": "https://stackoverflow.com/questions/28993664/access-violation-writing-location-c-while-using-sdl2-0/28994029#28994029", "title": "Access violation writing location C++ while using SDL2.0", "body": "<p>Isn't that just a typo in <strong>if</strong> statements? Change = to ==</p>\n\n<pre><code>if (npc-&gt;StoryLineMission == npc-&gt;NoMission)\n{\n    if (npc-&gt;StoryLineMission == npc-&gt;LearningTheTruth) {\n        cout &lt;&lt; \"hello\" &lt;&lt; endl;\n\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 4659630, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rhdyn_twC80/AAAAAAAAAAI/AAAAAAAAABM/wQIiqszFtG0/photo.jpg?sz=128", "display_name": "TheGamingYeti", "link": "https://stackoverflow.com/users/4659630/thegamingyeti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 28994029, "answer_count": 1, "score": 0, "last_activity_date": 1426096731, "creation_date": 1426095709, "question_id": 28993664, "link": "https://stackoverflow.com/questions/28993664/access-violation-writing-location-c-while-using-sdl2-0", "title": "Access violation writing location C++ while using SDL2.0", "body": "<p>Here is some of my code for the MainCharacter and NPC's (I know that the code is sloppy)</p>\n\n<p>When i try to check if a quest is active\nvoid CMainCharacter::MissionSets() {</p>\n\n<pre><code>using namespace std;\n\nif (npc-&gt;StoryLineMission = npc-&gt;NoMission)\n{\n    if (npc-&gt;StoryLineMission = npc-&gt;LearningTheTruth) {\n        cout &lt;&lt; \"hello\" &lt;&lt; endl;\n\n    }\n}\n</code></pre>\n\n<p>}</p>\n\n<p>i have storylinemission defined\nStoryLineMission = NoMission;</p>\n\n<p>here is all of the quests\noid CNPC::UpdateQuest() {</p>\n\n<pre><code>if (QuestMission == NoQuest) {\n\n    if (csdl_setup-&gt;GetMainEvent()-&gt;type == SDL_KEYDOWN)\n    {\n        if (csdl_setup-&gt;GetMainEvent()-&gt;key.keysym.sym == SDLK_SPACE)\n        {\n            std::cout &lt;&lt; \"Quests have been activated\" &lt;&lt; std::endl;\n            QuestMission = Quest;\n        }\n    }\n}\nif (QuestMission == Quest) {\n\n    if (csdl_setup-&gt;GetMainEvent()-&gt;type == SDL_KEYDOWN)\n    {\n        if (csdl_setup-&gt;GetMainEvent()-&gt;key.keysym.sym == SDLK_q) {\n            QuestMission = QuestActive;\n            std::cout &lt;&lt; \"Quest/Mission has been delivered to you\" &lt;&lt; std::endl;\n        }\n    }\n}\n\nif (QuestMission == QuestActive)\n{\n    if (StoryLineMission == NoMission) {\n        StoryLineMission = LearningTheTruth;\n    }\n    else if (StoryLineMission == LearningTheTruthCompleted) {\n        StoryLineMission = MeetingOldFriends;\n    }\n    else if (StoryLineMission == MeetingOldFriendsCompleted) {\n        StoryLineMission = HelpingFriends;\n    }\n    else if (StoryLineMission == HelpingFriendsCompleted) {\n        StoryLineMission = TheChasing;\n    }\n    else if (StoryLineMission == TheChasingCompleted) {\n        StoryLineMission = TheReturn;\n    }\n}\nif (StoryLineMission == LearningTheTruth)\n{\n    LearningTheTruthArrowDown1-&gt;Draw();\n    LearningTheTruthArrowRight1-&gt;Draw();\n    if (csdl_setup-&gt;GetMainEvent()-&gt;type == SDL_MOUSEBUTTONDOWN) {\n        if (csdl_setup-&gt;GetMainEvent()-&gt;button.button == SDL_BUTTON_LEFT) {\n            LearningTheTruthPart1-&gt;Draw();\n            LearningTheTruthPart2-&gt;Draw();\n            LearningTheTruthPart3-&gt;Draw();\n            LearningTheTruthPart4-&gt;Draw();\n        }\n    }\n\n    if (csdl_setup-&gt;GetMainEvent()-&gt;type == SDL_KEYDOWN) {\n        if (csdl_setup-&gt;GetMainEvent()-&gt;key.keysym.sym == SDLK_c) {\n            QuestMission = LearningTheTruthQuestCompleted;\n            StoryLineMission = LearningTheTruthCompleted;\n            QuestType = LearningTheTruthQuestCompleted;\n        }\n    }\n\n}\n\nif (StoryLineMission == MeetingOldFriends) {\n\n    if (csdl_setup-&gt;GetMainEvent()-&gt;type == SDL_MOUSEBUTTONDOWN) {\n        if (csdl_setup-&gt;GetMainEvent()-&gt;button.button == SDL_BUTTON_LEFT) {\n            MeetingOldFriendsPart1-&gt;Draw();\n            MeetingOldFriendsPart2-&gt;Draw();\n        }\n    }\n\n    if (csdl_setup-&gt;GetMainEvent()-&gt;type == SDL_KEYDOWN) {\n        if (csdl_setup-&gt;GetMainEvent()-&gt;key.keysym.sym == SDLK_c) {\n            QuestMission = MeetingOldFriendsQuestCompleted;\n            StoryLineMission = MeetingOldFriendsCompleted;\n            QuestType = MeetingOldFriendsQuestCompleted;\n        }\n    }\n}\n\nif (StoryLineMission == HelpingFriends) {\n\n    if (csdl_setup-&gt;GetMainEvent()-&gt;type == SDL_MOUSEBUTTONDOWN) {\n        if (csdl_setup-&gt;GetMainEvent()-&gt;button.button == SDL_BUTTON_LEFT) {\n\n        }\n    }\n\n    if (csdl_setup-&gt;GetMainEvent()-&gt;type == SDL_KEYDOWN) {\n        if (csdl_setup-&gt;GetMainEvent()-&gt;key.keysym.sym == SDLK_c) {\n            QuestMission = HelpingFriendsQuestCompleted;\n            StoryLineMission = HelpingFriendsCompleted;\n            QuestType = HelpingFriendsQuestCompleted;\n        }\n    }\n}\n\nif (StoryLineMission == TheChasing) {\n    std::cout &lt;&lt; \"The Chasing\" &lt;&lt; std::endl;\n\n    if (csdl_setup-&gt;GetMainEvent()-&gt;type == SDL_MOUSEBUTTONDOWN) {\n        if (csdl_setup-&gt;GetMainEvent()-&gt;button.button == SDL_BUTTON_LEFT) {\n\n        }\n    }\n\n    if (csdl_setup-&gt;GetMainEvent()-&gt;type == SDL_KEYDOWN) {\n        if (csdl_setup-&gt;GetMainEvent()-&gt;key.keysym.sym == SDLK_c) {\n            QuestMission = TheChasingQuestCompleted;\n            StoryLineMission = TheChasingCompleted;\n            QuestType = TheChasingQuestCompleted;\n        }\n    }\n}\n\nif (StoryLineMission == TheReturn) {\n    std::cout &lt;&lt; \"Welcome Home\" &lt;&lt; std::endl;\n\n    if (csdl_setup-&gt;GetMainEvent()-&gt;type == SDL_MOUSEBUTTONDOWN) {\n        if (csdl_setup-&gt;GetMainEvent()-&gt;button.button == SDL_BUTTON_LEFT) {\n\n        }\n    }\n\n    if (csdl_setup-&gt;GetMainEvent()-&gt;type == SDL_KEYDOWN) {\n        if (csdl_setup-&gt;GetMainEvent()-&gt;key.keysym.sym == SDLK_c) {\n            QuestMission = TheReturnQuestCompleted;\n            StoryLineMission = TheReturnCompleted;\n            QuestType = TheReturnQuestCompleted;\n        }\n    }\n}\n\nif (QuestMission == LearningTheTruthQuestCompleted) {\n    std::cout &lt;&lt; \"LearningTheTruth has been succesfully completed\" &lt;&lt; std::endl;\n    StoryLineMission = LearningTheTruthCompleted;\n    QuestMission = Quest;\n}\n\nif (QuestMission == MeetingOldFriendsQuestCompleted) {\n    std::cout &lt;&lt; \"Meeting Old Friends has been succesfully completed\" &lt;&lt; std::endl;\n    StoryLineMission = MeetingOldFriendsCompleted;\n    QuestMission = Quest;\n}\n\nif (QuestMission == HelpingFriendsQuestCompleted) {\n    std::cout &lt;&lt; \"HelpingFriends quest has been succesfully completed\" &lt;&lt; std::endl;\n\n    StoryLineMission = HelpingFriendsCompleted;\n    QuestMission = Quest;\n}\nif (QuestMission == TheChasingQuestCompleted) {\n    std::cout &lt;&lt; \"The Chasing has been completed\" &lt;&lt; std::endl;\n\n    StoryLineMission = TheChasingCompleted;\n    QuestMission = Quest;\n}\n\nif (QuestMission == TheReturnQuestCompleted) {\n    std::cout &lt;&lt; \"The Return has been completed\" &lt;&lt; std::endl;\n\n    StoryLineMission = TheReturnCompleted;\n    QuestMission = QuestsDone;\n}\n\nif (QuestMission == QuestsDone) {\n//  AllQuestsDone-&gt;Draw();\n}\n\nif (QuestType == LearningTheTruthQuestCompleted) {\n    if (StoryLineMission == LearningTheTruthCompleted) {\n        SLearningTheTruthCompleted-&gt;Draw();\n    }\n}\n\nif (QuestType == MeetingOldFriendsQuestCompleted) {\n    if (StoryLineMission == MeetingOldFriendsCompleted) {\n        SMeetingOldFriendsCompleted-&gt;Draw();\n    }\n}\n\nif (QuestType == HelpingFriendsQuestCompleted) {\n    if (StoryLineMission == HelpingFriendsCompleted) {\n        SHelpingFriendsCompleted-&gt;Draw();\n    }\n}\n\nif (QuestType == TheChasingQuestCompleted) {\n    if (StoryLineMission == TheChasingCompleted) {\n        STheChasingCompleted-&gt;Draw();\n    }\n}\n\nif (QuestType == TheReturnQuestCompleted) {\n    if (StoryLineMission == TheReturnCompleted) {\n        STheReturnCompleted-&gt;Draw();\n        //AllQuestsDone-&gt;Draw();\n    }\n}\n</code></pre>\n\n<p>}</p>\n\n<p>and everytime i try to run it i get an access violation writing location and i cant seem to get this to work.</p>\n\n<p>I'm calling the mission sets function in a different class</p>\n\n<p>void CMain::GameLoop(void)\n{</p>\n\n<pre><code>while (!quit &amp;&amp; csdl_setup-&gt;GetMainEvent()-&gt;type != SDL_QUIT)\n{\n    csdl_setup-&gt;Begin();\n\n    //Tiles\n    Forest-&gt;DrawBack();\n\n    //NPC\n    OrcNPC-&gt;Draw();\n    OrcNPC-&gt;UpdateComputerNPC();\n\n    //Players\n    Josh-&gt;Draw();\n    Josh-&gt;Update();\n\n    Forest-&gt;DrawFront();\n    Forest-&gt;Update();\n\n    //Quests\n    OrcNPC-&gt;UpdateQuest();\n    OrcNPC-&gt;DeleteQuest();\n    OrcNPC-&gt;UpdateAnimation();\n\n    Josh-&gt;MissionSets();\n\n    csdl_setup-&gt;End();\n\n}\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["java", "c++", "objective-c", "string-literals"], "comments": [{"owner": {"reputation": 8289, "user_id": 391806, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/88a2ea78dadbdaf73e1033fe7cbdeb73?s=128&d=identicon&r=PG", "display_name": "Dale Wilson", "link": "https://stackoverflow.com/users/391806/dale-wilson"}, "edited": false, "score": 1, "creation_date": 1426095689, "post_id": 28993610, "comment_id": 46235368, "body": "Please don&#39;t use two leading underscores in your own code.  Those symbols are reserved for the compiler."}, {"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 0, "creation_date": 1426095825, "post_id": 28993610, "comment_id": 46235459, "body": "Write code to generate the definitions for each language? That lets you keep exactly one definitive source of the literals."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1426096120, "post_id": 28993610, "comment_id": 46235659, "body": "Even if such a mechanism existed (and it does not exist for C++ and Java), its use would be limited. Sooner or later your software may have to be translated into different languages, and then you&#39;ll need a more complex solution anyway."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1426097983, "post_id": 28993610, "comment_id": 46236867, "body": "Does Java support conditional compilation directives?"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1426099205, "post_id": 28993610, "comment_id": 46237644, "body": "@ThomasMatthews: No."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1426099234, "post_id": 28993610, "comment_id": 46237664, "body": "See also <a href=\"http://stackoverflow.com/questions/4526113/java-conditional-compilation-how-to-prevent-code-chunks-to-be-compiled\" title=\"java conditional compilation how to prevent code chunks to be compiled\">stackoverflow.com/questions/4526113/&hellip;</a>"}, {"owner": {"reputation": 2856, "user_id": 230851, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/85bfabc247b68f8f12f2449386f7e92d?s=128&d=identicon&r=PG", "display_name": "orion elenzil", "link": "https://stackoverflow.com/users/230851/orion-elenzil"}, "reply_to_user": {"reputation": 8289, "user_id": 391806, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/88a2ea78dadbdaf73e1033fe7cbdeb73?s=128&d=identicon&r=PG", "display_name": "Dale Wilson", "link": "https://stackoverflow.com/users/391806/dale-wilson"}, "edited": false, "score": 0, "creation_date": 1426108410, "post_id": 28993610, "comment_id": 46243057, "body": "@dalewilson - did not know; thanks for the tip!"}, {"owner": {"reputation": 2856, "user_id": 230851, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/85bfabc247b68f8f12f2449386f7e92d?s=128&d=identicon&r=PG", "display_name": "orion elenzil", "link": "https://stackoverflow.com/users/230851/orion-elenzil"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1426108424, "post_id": 28993610, "comment_id": 46243066, "body": "@ChristianHackl - good point re more languages."}, {"owner": {"reputation": 2856, "user_id": 230851, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/85bfabc247b68f8f12f2449386f7e92d?s=128&d=identicon&r=PG", "display_name": "orion elenzil", "link": "https://stackoverflow.com/users/230851/orion-elenzil"}, "edited": false, "score": 0, "creation_date": 1426186787, "post_id": 28993610, "comment_id": 46280283, "body": "I guess a funky way of doing it would be to have the definitions in C++ and assign them to variables in Java via the JNI."}], "owner": {"reputation": 2856, "user_id": 230851, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/85bfabc247b68f8f12f2449386f7e92d?s=128&d=identicon&r=PG", "display_name": "orion elenzil", "link": "https://stackoverflow.com/users/230851/orion-elenzil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1426108310, "creation_date": 1426095540, "last_edit_date": 1426108310, "question_id": 28993610, "link": "https://stackoverflow.com/questions/28993610/string-literals-shared-source-file-for-c-java-objective-c", "title": "string literals - shared source file for C++, Java, Objective-C?", "body": "<p>Is there a way to have a single source file define compile-time string literals in both Java and C++ (and ideally also Objective-C) ?</p>\n\n<p>For C++ and Objective-C it's relatively easy using <code>#if __OBJC__</code>:</p>\n\n<pre><code>#if __OBJC__\n#define _str_literal_ @\n#else\n#define _str_literal_\n#endif\n\n#define MY_TOKEN _str_literal_\"hello world\"\n\n#undef _str_literal_\n</code></pre>\n\n<p>But for C++ / Java I suspect some sort of code-generating tool would be required.</p>\n\n<p><em>Edited to reflect Dale's advice.</em></p>\n"}, {"tags": ["c++", "class", "design-patterns"], "comments": [{"owner": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "edited": false, "score": 0, "creation_date": 1426096800, "post_id": 28993605, "comment_id": 46236127, "body": "What kind of &quot;duplication&quot; are you concerned about? Is <code>EarthMagneticField</code> expensive to create? Does it use much memory? Does it have state that is expensive to calculate?"}, {"owner": {"reputation": 743, "user_id": 236650, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/aJlI1.jpg?s=128&g=1", "display_name": "mgfernan", "link": "https://stackoverflow.com/users/236650/mgfernan"}, "reply_to_user": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "edited": false, "score": 0, "creation_date": 1426099095, "post_id": 28993605, "comment_id": 46237565, "body": "Yes, it might be a potentially &quot;expensive&quot; object in terms of calculations and it might also retain a set of coefficients locally to do the calculations. That is why in principle I would like to avoid duplication (plus I want to ensure that I am using the same <code>EarthMagneticField</code> in other parts of the code)"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 1, "creation_date": 1426099556, "post_id": 28993605, "comment_id": 46237875, "body": "I think this problem description is too abstract. I could imagine <code>EarthIonossphere</code> taking <code>EarthMagneticField &amp;</code> or <code>EarthMagneticField const&amp;</code> in member functions which need it. The instance of <code>EarthMagneticField</code> would be created somewhere else, without any dynamic allocation to begin with. But this depends on the rest of the software architecture."}], "answers": [{"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "is_accepted": false, "score": 0, "last_activity_date": 1426096222, "creation_date": 1426096222, "answer_id": 28993852, "question_id": 28993605, "link": "https://stackoverflow.com/questions/28993605/guidelines-to-deal-with-class-dependencies/28993852#28993852", "title": "Guidelines to deal with class dependencies", "body": "<p>A <code>shared_ptr</code> solution is certainly an idea, but I'd also think about storing a weak reference.</p>\n\n<p>If there's only going to be <code>EarthMagneticField</code> around, you can instantiate it and then construct all other objects with a refence to it.</p>\n"}, {"comments": [{"owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 0, "creation_date": 1426099061, "post_id": 28994532, "comment_id": 46237538, "body": "Why make the <code>magnetic_field</code> member a pointer, not a reference?"}, {"owner": {"reputation": 743, "user_id": 236650, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/aJlI1.jpg?s=128&g=1", "display_name": "mgfernan", "link": "https://stackoverflow.com/users/236650/mgfernan"}, "edited": false, "score": 0, "creation_date": 1426099466, "post_id": 28994532, "comment_id": 46237808, "body": "Isn&#39;t this solution similar to option (2), using <code>std::shared_ptr</code>?"}, {"owner": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "reply_to_user": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 0, "creation_date": 1426099472, "post_id": 28994532, "comment_id": 46237812, "body": "@RobK It could be a reference but reference member variables restrict what you can do with the class."}, {"owner": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "reply_to_user": {"reputation": 743, "user_id": 236650, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/aJlI1.jpg?s=128&g=1", "display_name": "mgfernan", "link": "https://stackoverflow.com/users/236650/mgfernan"}, "edited": false, "score": 1, "creation_date": 1426099880, "post_id": 28994532, "comment_id": 46238090, "body": "@Tryskele Similar, yes. There might be a (small) cost to using <code>new</code> but more importantly this way I think it is clearer that <code>EarthIonosphere</code> does not own <code>EarthMagneticField</code>."}], "owner": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "is_accepted": false, "score": 0, "last_activity_date": 1426098349, "creation_date": 1426098349, "answer_id": 28994532, "question_id": 28993605, "link": "https://stackoverflow.com/questions/28993605/guidelines-to-deal-with-class-dependencies/28994532#28994532", "title": "Guidelines to deal with class dependencies", "body": "<p>If <code>EarthMagneticField</code> is cheap to create and there is no reason to share its state with other parts of the code I might be tempted to go with option 1 and just have it has a private member of class <code>EarthIonosphere</code>. You could always start with this option and refactor when you find you need to.</p>\n\n<p>If you do need to share <code>EarthIonosphere</code>, I don't see any reason to use <code>new</code> and allocate dynamically. I would just create one outside of <code>EarthIonosphere</code> and pass a reference to the constructor of <code>EarthIonosphere</code>:</p>\n\n<pre><code>class EarthMagneticField {\n};\n\nclass EarthIonosphere {\n  EarthMagneticField* magnetic_field;\n public:\n  EarthIonosphere(){EarthMagneticField&amp; magnetic_field) \n  : magnetic_field(&amp;magnetic_field) {}\n};\n\nint main() {\n  EarthMageneticField magnetic_field;\n  EarthIonosphere ionosphere(magnetic_field);\n}\n</code></pre>\n"}], "owner": {"reputation": 743, "user_id": 236650, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/aJlI1.jpg?s=128&g=1", "display_name": "mgfernan", "link": "https://stackoverflow.com/users/236650/mgfernan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1426098349, "creation_date": 1426095531, "question_id": 28993605, "link": "https://stackoverflow.com/questions/28993605/guidelines-to-deal-with-class-dependencies", "title": "Guidelines to deal with class dependencies", "body": "<p>I have a doubt on the best approach to handle a class dependency and I was hoping to have some feedback on the issue.</p>\n\n<p>Let's assume I have a class to model the Earth's ionosphere</p>\n\n<pre><code>class EarthIonosphere {\n    // Methods that implement physical models of the Earth's ionosphere\n}\n</code></pre>\n\n<p>To do some computations within <code>EarthIonosphere</code>, I might have the need to know the value of the Earth's magnetic model. Therefore I have an independent class for this:</p>\n\n<pre><code>class EarthMagneticField {\n    // Methods that implement physical models of the Earth's magnetosphere\n}\n</code></pre>\n\n<p><code>EarthIonosphere</code> might depend on <code>EarthMagneticField</code> (but not the other way round). By the way, <code>EarthMagneticField</code> might also be needed in other parts of the code. With this in mind I was wondering which is the best solution (in terms of re-usability and maintainability) to approach this dependency. The two options I was considering were:</p>\n\n<ul>\n<li><code>EarthIonosphere</code> contains a private/public member of class <code>EarthMagneticField</code>, but I am concerned on duplication in case the same <code>EarthMagneticField</code> has to be used in other parts of the code.</li>\n<li><code>EarthIonosphere</code> contains a <code>std::shared_ptr</code> that points to an object of class <code>EarthMagneticField</code> that has been instantiated using the <code>new</code> operator. This would allow me to use exactly the same object to compute the magnetic field in other parts of the code.</li>\n</ul>\n\n<p>Do you think any of these is a viable solution in terms of \"clean code\"? otherwise, do you have any suggestion like some \"interface\" class or similar?</p>\n\n<p>Many thanks!</p>\n"}, {"tags": ["c++", "algorithm", "sorting", "variadic-templates"], "comments": [{"owner": {"reputation": 3420, "user_id": 424632, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ec99692fd9664c4f4558a6d0d020a058?s=128&d=identicon&r=PG", "display_name": "musiphil", "link": "https://stackoverflow.com/users/424632/musiphil"}, "edited": false, "score": 0, "creation_date": 1426096199, "post_id": 28993556, "comment_id": 46235722, "body": "Shouldn&#39;t <code>ArrangeTopBottomThingFunc</code> return <code>std::vector&lt;TopBottomThing&gt;</code>?"}, {"owner": {"reputation": 5898, "user_id": 817659, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dc6960319324ecebe786580dfca13f07?s=128&d=identicon&r=PG", "display_name": "Ivan", "link": "https://stackoverflow.com/users/817659/ivan"}, "reply_to_user": {"reputation": 3420, "user_id": 424632, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ec99692fd9664c4f4558a6d0d020a058?s=128&d=identicon&r=PG", "display_name": "musiphil", "link": "https://stackoverflow.com/users/424632/musiphil"}, "edited": false, "score": 0, "creation_date": 1426096634, "post_id": 28993556, "comment_id": 46236012, "body": "sorry that was a typo. Corrected above. It takes and std::vector&lt;std::tuple&lt;TopBottomThing&gt;&gt; and returns that same thing sorted by the criterion."}, {"owner": {"reputation": 3420, "user_id": 424632, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ec99692fd9664c4f4558a6d0d020a058?s=128&d=identicon&r=PG", "display_name": "musiphil", "link": "https://stackoverflow.com/users/424632/musiphil"}, "edited": false, "score": 0, "creation_date": 1426096647, "post_id": 28993556, "comment_id": 46236026, "body": "In addition, shouldn&#39;t <code>ArrangeTopBottomThingFunc</code> take <code>std::tuple&lt;TopBottomThing, TopBottomThing, TopBottomThing&gt;</code> (a;; assuming <code>TopBottomThing</code> is not a template but a type)?"}, {"owner": {"reputation": 5898, "user_id": 817659, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dc6960319324ecebe786580dfca13f07?s=128&d=identicon&r=PG", "display_name": "Ivan", "link": "https://stackoverflow.com/users/817659/ivan"}, "reply_to_user": {"reputation": 3420, "user_id": 424632, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ec99692fd9664c4f4558a6d0d020a058?s=128&d=identicon&r=PG", "display_name": "musiphil", "link": "https://stackoverflow.com/users/424632/musiphil"}, "edited": false, "score": 0, "creation_date": 1426096853, "post_id": 28993556, "comment_id": 46236159, "body": "yes exactly. However in this case it would work for only three items. That is actually quite good for now."}, {"owner": {"reputation": 5898, "user_id": 817659, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dc6960319324ecebe786580dfca13f07?s=128&d=identicon&r=PG", "display_name": "Ivan", "link": "https://stackoverflow.com/users/817659/ivan"}, "reply_to_user": {"reputation": 3420, "user_id": 424632, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ec99692fd9664c4f4558a6d0d020a058?s=128&d=identicon&r=PG", "display_name": "musiphil", "link": "https://stackoverflow.com/users/424632/musiphil"}, "edited": false, "score": 0, "creation_date": 1426097351, "post_id": 28993556, "comment_id": 46236484, "body": "Can get rid of std::vector altogether if using std::tuple&lt;...&gt; with parameter packs but that might be overly complicated. Either case is fine."}], "answers": [{"comments": [{"owner": {"reputation": 5898, "user_id": 817659, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dc6960319324ecebe786580dfca13f07?s=128&d=identicon&r=PG", "display_name": "Ivan", "link": "https://stackoverflow.com/users/817659/ivan"}, "edited": false, "score": 0, "creation_date": 1426261085, "post_id": 28994754, "comment_id": 46313309, "body": "Thank you. I realized that since the vectors guarantee either n - 1 common &quot;paths&quot; or no common paths, that sorting magically works. Hence there is a simpler solution than your suggestion."}, {"owner": {"reputation": 3828, "user_id": 960115, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/oZ1UM.gif?s=128&g=1", "display_name": "Jeff G", "link": "https://stackoverflow.com/users/960115/jeff-g"}, "reply_to_user": {"reputation": 5898, "user_id": 817659, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dc6960319324ecebe786580dfca13f07?s=128&d=identicon&r=PG", "display_name": "Ivan", "link": "https://stackoverflow.com/users/817659/ivan"}, "edited": false, "score": 0, "creation_date": 1426266906, "post_id": 28994754, "comment_id": 46316945, "body": "Actually, you can&#39;t just use std::sort by itself to solve your problem.  You indicated that you want to find all things in a list that match at least one other thing in the list.  This is NOT possible using sort, as you are splitting the set of input based on set membership.  If you post the code you think is working using only std::sort, I would be happy to provide you example input that breaks the solution."}], "owner": {"reputation": 3828, "user_id": 960115, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/oZ1UM.gif?s=128&g=1", "display_name": "Jeff G", "link": "https://stackoverflow.com/users/960115/jeff-g"}, "is_accepted": false, "score": 1, "last_activity_date": 1426273487, "last_edit_date": 1426273487, "creation_date": 1426099105, "answer_id": 28994754, "question_id": 28993556, "link": "https://stackoverflow.com/questions/28993556/sort-a-pair-by-common-top-and-bottom/28994754#28994754", "title": "sort a pair by common top and bottom", "body": "<p>If I am understanding your question correctly, I think you are saying that you want to determine all TopBottomThing's that have either a top that matches some other entry, or a bottom that matches some other entry.  Then you want to sort those TopBottomThing's by the min(top, bottom).</p>\n\n<p>This is the algorithm that I would use to do such a thing.  Create a std::map that stores a mapping from type T (from the definition of TopBottomThing) to size_t.  Iterate through your input, and for each TopBottomThing, add the top, as well as the bottom (but only if distinct from the top) items to the map.  When adding a new entry, initialize the value to zero.  Otherwise, increment the existing value.</p>\n\n<p>The next step is to create two vectors: one to hold those TopBottomThing's that match something, and one for those that don't.  Iterate through the list of TopBottomThing's a second time, and select max(map[top], map[bottom]) from the map.  If that max value is at least 1, then the result matches at least one of the other entries, so add it to the match vector.  Otherwise, add it to the non-match vector.  After that, sort the match vector, then append the non-match vector, and return that result.  The code is as follows:</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n#include &lt;map&gt;\n#include &lt;random&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\ntemplate&lt;class T&gt;\nclass TopBottom {\npublic:\n    T top;\n    T bottom;\n\n    TopBottom(T _top, T _bottom) : top(_top), bottom(_bottom) {\n    }\n};\n\nvoid print(vector&lt;TopBottom&lt;int&gt;&gt; myThings) {\n    for (auto topBottom = myThings.begin(); topBottom != myThings.end(); ++topBottom) {\n        cout &lt;&lt; (topBottom == myThings.begin() ? \"(\" : \"  \");\n        cout &lt;&lt; topBottom-&gt;top &lt;&lt; '/' &lt;&lt; topBottom-&gt;bottom;\n    }\n    cout &lt;&lt; ')';\n}\n\ntemplate&lt;class T&gt;\nvoid Arrange(vector&lt;TopBottom&lt;T&gt;&gt; &amp;topBottoms) {\n    // Determine the number of TopBottom's with each value for either top or bottom\n    map&lt;T, size_t&gt; countOfObjects;\n    for (auto topBottom = topBottoms.cbegin(); topBottom != topBottoms.cend(); ++topBottom) {\n        ++countOfObjects[topBottom-&gt;top];\n        if (topBottom-&gt;top != topBottom-&gt;bottom) {\n            ++countOfObjects[topBottom-&gt;bottom];\n        }\n    }\n\n    // Split the input into two lists; one with things that match, and the remainder\n    vector&lt;TopBottom&lt;T&gt;&gt; matches;\n    vector&lt;TopBottom&lt;T&gt;&gt; nonMatches;\n    for (auto topBottom = topBottoms.cbegin(); topBottom != topBottoms.cend(); ++topBottom) {\n        auto matchingObjectCount = max(countOfObjects[topBottom-&gt;top],\n            countOfObjects[topBottom-&gt;bottom]) - 1;\n        (0 &lt; matchingObjectCount ? matches : nonMatches).push_back(*topBottom);\n    }\n\n    // Here you can sort the matches however you want\n\n    // Populate the result\n    topBottoms.clear();\n    topBottoms.insert(topBottoms.end(), matches.cbegin(), matches.cend());\n    topBottoms.insert(topBottoms.end(), nonMatches.cbegin(), nonMatches.cend());\n}\n\nint main(int argc, char *argv[]) {\n    vector&lt;TopBottom&lt;int&gt;&gt; myThings;\n    mt19937 rng;\n\n    for (auto i = 0; i &lt; 20; ++i) {\n        myThings.clear();\n        myThings.push_back(TopBottom&lt;int&gt;(rng() % 10, rng() % 10));\n        myThings.push_back(TopBottom&lt;int&gt;(rng() % 10, rng() % 10));\n        myThings.push_back(TopBottom&lt;int&gt;(rng() % 10, rng() % 10));\n        myThings.push_back(TopBottom&lt;int&gt;(rng() % 10, rng() % 10));\n\n        print(myThings);\n        cout &lt;&lt; \"  =&gt;  \";\n\n        Arrange(myThings);\n        print(myThings);\n        cout &lt;&lt; endl;\n    }\n\n    cin.get();\n    return 0;\n}\n</code></pre>\n\n<p>Running this code generates the following output:</p>\n\n<pre><code>(2/2  5/4  1/4  5/9)  =&gt;  (5/4  1/4  5/9  2/2)\n(3/8  5/5  6/0  0/9)  =&gt;  (6/0  0/9  3/8  5/5)\n(4/9  6/7  9/9  9/3)  =&gt;  (4/9  9/9  9/3  6/7)\n(6/6  3/6  1/0  9/2)  =&gt;  (6/6  3/6  1/0  9/2)\n(8/9  5/6  3/3  8/7)  =&gt;  (8/9  8/7  5/6  3/3)\n(6/4  0/5  6/7  4/5)  =&gt;  (6/4  0/5  6/7  4/5)\n(2/7  3/8  6/0  6/2)  =&gt;  (2/7  6/0  6/2  3/8)\n(7/6  6/4  1/9  8/6)  =&gt;  (7/6  6/4  8/6  1/9)\n(0/2  2/2  3/1  2/5)  =&gt;  (0/2  2/2  2/5  3/1)\n(9/9  6/1  0/9  8/8)  =&gt;  (9/9  0/9  6/1  8/8)\n(3/8  0/9  3/6  3/2)  =&gt;  (3/8  3/6  3/2  0/9)\n(9/0  4/9  5/4  6/7)  =&gt;  (9/0  4/9  5/4  6/7)\n(1/2  4/0  9/1  5/8)  =&gt;  (1/2  9/1  4/0  5/8)\n(0/2  8/1  7/1  8/6)  =&gt;  (8/1  7/1  8/6  0/2)\n(8/7  4/6  9/2  0/8)  =&gt;  (8/7  0/8  4/6  9/2)\n(5/4  3/7  9/3  5/5)  =&gt;  (5/4  3/7  9/3  5/5)\n(5/2  0/1  6/0  1/8)  =&gt;  (0/1  6/0  1/8  5/2)\n(0/4  5/8  6/4  0/2)  =&gt;  (0/4  6/4  0/2  5/8)\n(0/3  6/9  5/5  8/5)  =&gt;  (5/5  8/5  0/3  6/9)\n(8/5  5/8  1/7  3/3)  =&gt;  (8/5  5/8  1/7  3/3)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5898, "user_id": 817659, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dc6960319324ecebe786580dfca13f07?s=128&d=identicon&r=PG", "display_name": "Ivan", "link": "https://stackoverflow.com/users/817659/ivan"}, "edited": false, "score": 0, "creation_date": 1426261110, "post_id": 28998834, "comment_id": 46313331, "body": "Yep, I realized this too after thinking about it for a bit."}, {"owner": {"reputation": 3828, "user_id": 960115, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/oZ1UM.gif?s=128&g=1", "display_name": "Jeff G", "link": "https://stackoverflow.com/users/960115/jeff-g"}, "edited": false, "score": 1, "creation_date": 1426266664, "post_id": 28998834, "comment_id": 46316788, "body": "Just to be clear, this doesn&#39;t do what you asked in your question.  Concrete example: 7/8 2/4 2/5.  You indicated in your question that you want these output in the order 2/4, 2/5, 7/8, but it would not be reordered by this solution at all."}, {"owner": {"reputation": 3828, "user_id": 960115, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/oZ1UM.gif?s=128&g=1", "display_name": "Jeff G", "link": "https://stackoverflow.com/users/960115/jeff-g"}, "edited": false, "score": 2, "creation_date": 1426270257, "post_id": 28998834, "comment_id": 46318813, "body": "Just so you are aware, I just copied this answer into a test app, and ran it, since I was surprised that this example worked on ANY input.  I get a debug assertion error when running, because the ordering is not well defined.  When you pass a comparison method to sort, the following must hold: \u2200a, b \u2208 data | a \u2260 b, MIXED_TOP_BOTTOM(a, b) = &#172;MIXED_TOP_BOTTOM(b, a).  Otherwise, the result of sort is nondeterministic, which is why VS2013 is throwing the exception."}, {"owner": {"reputation": 2558, "user_id": 655436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98da4e7757d5f0e8596fd832bebee3d0?s=128&d=identicon&r=PG", "display_name": "fukanchik", "link": "https://stackoverflow.com/users/655436/fukanchik"}, "reply_to_user": {"reputation": 3828, "user_id": 960115, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/oZ1UM.gif?s=128&g=1", "display_name": "Jeff G", "link": "https://stackoverflow.com/users/960115/jeff-g"}, "edited": false, "score": 0, "creation_date": 1426285461, "post_id": 28998834, "comment_id": 46325876, "body": "@Jeff, You are absolutely right, my answer is incorrect as MIXED_TOP_BOTTOM violates requirements for comparison function and i am not sure if such a function is possible. In [<a href=\"http://stackoverflow.com/questions/24286209/topological-sorting-using-stdsort](this)\" title=\"topological sorting using stdsort%5d(this)\">stackoverflow.com/questions/24286209/&hellip;</a> question ecatmur was able to find it for another ordering though."}, {"owner": {"reputation": 3828, "user_id": 960115, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/oZ1UM.gif?s=128&g=1", "display_name": "Jeff G", "link": "https://stackoverflow.com/users/960115/jeff-g"}, "edited": false, "score": 0, "creation_date": 1426544992, "post_id": 28998834, "comment_id": 46409035, "body": "Yes, it appears that a weak ordering requires both {\u2200a, b \u2208 data | cond(a, b), &#172;cond(b, a)} AND {\u2200a, b, c \u2208 data | cond(a, b) \u2227 cond(b, c), cond(a, c)} to hold.  I only caught the first of the two requirements, which I think is the one that is failing when in debug mode."}], "owner": {"reputation": 2558, "user_id": 655436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98da4e7757d5f0e8596fd832bebee3d0?s=128&d=identicon&r=PG", "display_name": "fukanchik", "link": "https://stackoverflow.com/users/655436/fukanchik"}, "is_accepted": true, "score": 0, "last_activity_date": 1426113976, "creation_date": 1426113976, "answer_id": 28998834, "question_id": 28993556, "link": "https://stackoverflow.com/questions/28993556/sort-a-pair-by-common-top-and-bottom/28998834#28998834", "title": "sort a pair by common top and bottom", "body": "<p>Just use std::sort:</p>\n\n<pre><code>template&lt;typename T&gt;\nbool MIXED_TOP_BOTTOM(const TopBottom&lt;T&gt;&amp; v1,  const TopBottom&lt;T&gt;&amp;v2)\n{\n    if( v1.bottom == v2.top )\n            return true;\n    return false;\n}\n</code></pre>\n\n<p>...</p>\n\n<pre><code>std::vector&lt;TopBottom&lt;int&gt; &gt; data;\n\ndata.push_back(TopBottom&lt;int&gt;(2, 3));\ndata.push_back(TopBottom&lt;int&gt;(4, 5));\ndata.push_back(TopBottom&lt;int&gt;(3, 2));\n\nstd::sort(data.begin(), data.end(), MIXED_TOP_BOTTOM&lt;int&gt;);\n</code></pre>\n\n<p>produces</p>\n\n<pre><code>3/2 2/3 4/5\n</code></pre>\n"}], "owner": {"reputation": 5898, "user_id": 817659, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dc6960319324ecebe786580dfca13f07?s=128&d=identicon&r=PG", "display_name": "Ivan", "link": "https://stackoverflow.com/users/817659/ivan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 28998834, "answer_count": 2, "score": 1, "last_activity_date": 1426273487, "creation_date": 1426095429, "last_edit_date": 1426097578, "question_id": 28993556, "link": "https://stackoverflow.com/questions/28993556/sort-a-pair-by-common-top-and-bottom", "title": "sort a pair by common top and bottom", "body": "<p>Imagine that you have n sets of elements in a tuple. For example the tuple could be</p>\n\n<pre><code>std::tuple&lt;topBottomStr, topBottomStr, topBottomStr&gt; or\nstd::tuple&lt;fraction, fraction, fraction&gt;\n</code></pre>\n\n<p>So maybe there is some template that represents \"topbottomthings\"</p>\n\n<pre><code>template&lt;typename T&gt;\nclass TopBottomThing\n{\nprivate:\n    T top;\n    T bottom;\n};\n</code></pre>\n\n<p>The point is that what is in the tuple has a notion of a top and a bottom. My question is, I need a function that returns an </p>\n\n<pre><code>std::vector&lt;std::tuple&lt;TopBottomThing&gt;&gt; ArrangeTopBottomThingFunc(std::vector&lt;std::tuple&lt;TopBottomThing&gt;&gt; tup)\n</code></pre>\n\n<p>where the items in the return value </p>\n\n<pre><code>std::vector&lt;std::tuple&lt;TopBottomThing&gt;&gt; retVal;\n</code></pre>\n\n<p>are arranged so that each consecutive entry's TopBottomThing, the bottom of <code>std::vector&lt;n&gt;</code> matches the top of <code>std::vector&lt;n + 1&gt;</code>, matches the bottom of <code>std::vector&lt;n + 2&gt;</code> etc, <strong>or</strong> the top of <code>std::vector&lt;n&gt;</code> matches the top of <code>std::vector&lt;n + 1&gt;</code>, <strong>or</strong> the bottom of <code>std::vector&lt;n&gt;</code> matches the bottom of <code>std::vector&lt;n + 1&gt;</code>. Only one case is guaranteed to happen as a constraint to the function. If the length of the input vector is n, either 0 matches or n - 1 matches are guaranteed.</p>\n\n<p>For example, if <code>std::vector&lt;std::tuple&lt;TopBottomThing&gt;&gt;</code> tup represents standard fractions:</p>\n\n<p>2/3 4/5 3/2,</p>\n\n<p>ArrangeTopBottomThingFunc with that <code>std::vector&lt;tup&gt;</code> as input would return a <strong>sorted by this criterion</strong> an std::vector like this:</p>\n\n<p>[0] = 3/2 [1] = 2/3 [2] = 4/5 (two matches top/bottom)</p>\n\n<p>of if std::tuple tup had these fractions:</p>\n\n<p>4/7 3/2 1/2</p>\n\n<p>[0] = 3/2 [1] = 1/2 [2] = 4/7 (two matches bottom/bottom)</p>\n\n<p>or </p>\n\n<p>4/5 7/8 4/6</p>\n\n<p>[0] 4/5 [1] = 4/6 [2] = 7/8 (two matches top/top)</p>\n\n<p>or the degenerate case</p>\n\n<p>4/5 6/3 2/7 (no matches)</p>\n\n<p>would return in the order given.</p>\n\n<p>or say std::tuple tup represents strings like this</p>\n\n<p>\"Straberry/Banana\" \"Blueberry/Kiwi\" \"Kiwi/Banana\"</p>\n\n<p>[0] = \"Kiwi/Banana\" [1] = \"Straberry/Banana\" [2] = \"Blueberry/Kiwi\"</p>\n\n<p>At least two of the three (n) top or bottom are guaranteed to match. It would be great if the algorithm worked for any length of</p>\n\n<pre><code>std::vector&lt;std::tuple&lt;TopBottomThing&gt;&gt; input. \n</code></pre>\n\n<p>It simply sorts and returns an std::vector those things whose top/top or bottom/bottom or top/bottom match in ascending order. The rest that don't match in this way are simply added in any order.</p>\n\n<p>Finally, it would be nice if the calling function understood how the thing was sorted by returning an enum like this:</p>\n\n<pre><code>enum class WHICHSORT { NO_MATCHES, BOTH_TOP, BOTH_BOTTOM, MIXED_TOP_BOTTOM };\n</code></pre>\n"}, {"tags": ["c++", "arrays", "matrix"], "owner": {"reputation": 11, "user_id": 4659653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bab2522951f883720bf678e95a7a3841?s=128&d=identicon&r=PG&f=1", "display_name": "Jae", "link": "https://stackoverflow.com/users/4659653/jae"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1426095345, "creation_date": 1426095345, "question_id": 28993519, "link": "https://stackoverflow.com/questions/28993519/printing-non-0s-and-position-from-matrix-in-c", "title": "Printing non 0s and position from matrix in C++?", "body": "<p>Hi I have this code written to read in a matrix with the dimension given. However I want to modify it to read in a matrix from a file from the command line using cin. I then want it to print row by row the position of a non zero element followed by that value. Can someone help me modify this. Thanks.</p>\n\n<pre><code>#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include &lt;stdlib.h&gt;\n//using std:#include &lt;fstream&gt;\n//#include &lt;iostream&gt;\nusing std::cin;\nusing std::cout;\nusing std::cerr;\nusing std::endl;\nusing std::ofstream;\n\n\nvoid readArray(int, int, double **);\nint nz=0;\n\n\n\nmain(int argc, char *argv[])\n{\n  int rowCT = atoi(argv[1]);\n  int colCT = atoi(argv[2]);\n\n// here you reserve the space for the array\n  double **A = new double*[rowCT];  \n  for (int i = 0; i &lt; rowCT; i++)\n    A[i] = new double[colCT];   \n\n\n\n\n  readArray(rowCT, colCT, A);\n\n}\n//int count = new int[rowCT];\n\n\nvoid readArray(int r, int c, double **arr)\n{\n//here r rows of c elements are read in\nint count[r];\nint total=0;\n\n  for(int i=0;i&lt;r;i++)\n    {\n      for(int j=0;j&lt;c;j++)\n    {\n     cin&gt;&gt; arr[i][j];\n     if(arr[i][j]&gt;0)\n       {        \n         nz++;\n       }\n    }\n      count[i]=nz;\n      nz = 0;\n    }\n\n  cout&lt;&lt; r &lt;&lt; endl;\n   for(int i=0; i&lt;r; i++)\n   {\n     cout&lt;&lt;count[i]&lt;&lt; \" \";\n    for(int j=0; j&lt;c; j++)\n    {\n      if(arr[i][j]&gt;0)\n    {\n        cout&lt;&lt; j+1  &lt;&lt; \" \" &lt;&lt; arr[i][j] &lt;&lt; \" \";}\n    }\n    cout&lt;&lt; endl;\n   }\n   for(int i =0; i&lt;r; i++)\n     {\n       total+=  count[i];\n     }\n\n   cout &lt;&lt; total&lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "allocator"], "answers": [{"comments": [{"owner": {"reputation": 16085, "user_id": 58805, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9e65438df95dc28b6024e20e11562dc3?s=128&d=identicon&r=PG", "display_name": "Calmarius", "link": "https://stackoverflow.com/users/58805/calmarius"}, "edited": false, "score": 0, "creation_date": 1426096180, "post_id": 28993720, "comment_id": 46235706, "body": "This constructor of std::map causes me the trouble: <code>map(): Mybase(key_compare(), allocator_type())</code> hence the question. (In VS2008). But that can be well because there are instances constructed by the default constructor. Are compilers smart enough to not complain if I don&#39;t use the default constructor at all when declaring variables?"}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "reply_to_user": {"reputation": 16085, "user_id": 58805, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9e65438df95dc28b6024e20e11562dc3?s=128&d=identicon&r=PG", "display_name": "Calmarius", "link": "https://stackoverflow.com/users/58805/calmarius"}, "edited": false, "score": 1, "creation_date": 1426096274, "post_id": 28993720, "comment_id": 46235775, "body": "Yes. If you don&#39;t use the default constructor (and don&#39;t explicitly instantiate the whole <code>map</code> type) then the allocator default constructor isn&#39;t needed."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "reply_to_user": {"reputation": 16085, "user_id": 58805, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9e65438df95dc28b6024e20e11562dc3?s=128&d=identicon&r=PG", "display_name": "Calmarius", "link": "https://stackoverflow.com/users/58805/calmarius"}, "edited": false, "score": 0, "creation_date": 1426096772, "post_id": 28993720, "comment_id": 46236108, "body": "I don&#39;t know how much of the C++11 allocator requirements VS2008 implements, you might need to provide a number of other member functions such as <code>construct</code> and <code>destroy</code> and define several typedefs such as <code>rebind&lt;U&gt;::other</code>, <code>pointer</code>, <code>const_pointer</code>, <code>reference</code> etc. but if you do all that it should work OK."}, {"owner": {"reputation": 16085, "user_id": 58805, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9e65438df95dc28b6024e20e11562dc3?s=128&d=identicon&r=PG", "display_name": "Calmarius", "link": "https://stackoverflow.com/users/58805/calmarius"}, "edited": false, "score": 0, "creation_date": 1426099369, "post_id": 28993720, "comment_id": 46237751, "body": "Indeed after refactoring all instances to take an allocator instance then it compiles fine. That&#39;s interesting I never knew C++ compilers are such smart."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "reply_to_user": {"reputation": 16085, "user_id": 58805, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9e65438df95dc28b6024e20e11562dc3?s=128&d=identicon&r=PG", "display_name": "Calmarius", "link": "https://stackoverflow.com/users/58805/calmarius"}, "edited": false, "score": 0, "creation_date": 1426099694, "post_id": 28993720, "comment_id": 46237964, "body": "It&#39;s because <code>std::map</code> is a template. Unused member functions of class templates are not instantiated."}], "owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "is_accepted": true, "score": 5, "last_activity_date": 1426096667, "last_edit_date": 1426096667, "creation_date": 1426095853, "answer_id": 28993720, "question_id": 28993458, "link": "https://stackoverflow.com/questions/28993458/is-it-possible-to-write-a-custom-stl-allocator-that-uses-pointers-to-allocation/28993720#28993720", "title": "Is it possible to write a custom STL allocator that uses pointers to allocation functions provided by the user?", "body": "<blockquote>\n  <p>I looked at allocator classes but it seems STL containers must be able to use the default constructors to create the allocator</p>\n</blockquote>\n\n<p>That's not true, all containers can be constructed with an allocator explicitly, so you can create your allocator object and then pass it to the container.</p>\n\n<pre><code>extern \"C\"\n{\n  typedef void* (*allocation_function)(size_t);\n  typedef void (*deallocation_function)(void*);\n}\n\ntemplate&lt;typename T&gt;\nclass Allocator\n{\npublic:\n  typedef T value_type;\n\n  Allocator(allocation_function alloc, deallocation_function dealloc)\n  : m_allocate(alloc), m_deallocate(dealloc)\n  { }\n\n  template&lt;typename U&gt;\n    Allocator(const Allocator&lt;U&gt;&amp; a)\n    : m_allocate(a.m_allocate), m_deallocate(a.m_deallocate)\n    { }\n\n  T* allocate(size_t n)\n  { return static_cast&lt;T*&gt;(m_allocate(n * sizeof(T))); }\n\n  void deallocate(T* p, size_t)\n  { m_deallocate(p); }\n\nprivate:\n  template&lt;typename U&gt;\n    friend class Allocator&lt;U&gt;;\n\n  template&lt;typename U&gt;\n    friend bool operator==(const Allocator&lt;U&gt;&amp;, const Allocator&lt;U&gt;&amp;);\n\n  allocation_function   m_allocate;\n  deallocation_function m_deallocate;\n};\n\ntemplate&lt;typename T&gt;\nbool operator==(const Allocator&lt;T&gt;&amp; l, const Allocator&lt;T&gt;&amp; r)\n{ return l.m_allocate == r.m_allocate; }\n\ntemplate&lt;typename T&gt;\nbool operator!=(const Allocator&lt;T&gt;&amp; l, const Allocator&lt;T&gt;&amp; r)\n{ return !(l == r); }\n\n\nAllocator&lt;int&gt; a(custom_malloc, custom_free);\nstd::vector&lt;int, Allocator&lt;int&gt;&gt; v(a);\n</code></pre>\n\n<p>If you're using not using C++11 yet then you need to provide a lot more members for your allocator to meet the old requirements, but the one above is OK for C++11.  Using custom allocators in C++03 is difficult and not portable anyway, so you should aim to use a C++11 compiler if you need to do this.</p>\n"}, {"comments": [{"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 1, "creation_date": 1426096101, "post_id": 28993729, "comment_id": 46235646, "body": "<i>&quot;Since allocators cannot be state-full but must be default constructible&quot;</i> neither of those things is true these days."}, {"owner": {"reputation": 7189, "user_id": 2898458, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/bc37a9f235a6fa726c8047459ecf0a3f?s=128&d=identicon&r=PG", "display_name": "randomusername", "link": "https://stackoverflow.com/users/2898458/randomusername"}, "reply_to_user": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1426096131, "post_id": 28993729, "comment_id": 46235672, "body": "@JonathanWakely I&#39;m talking about C++-03"}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 2, "creation_date": 1426096504, "post_id": 28993729, "comment_id": 46235928, "body": "They aren&#39;t required to be default constructible even in C++03. And it isn&#39;t true that they <i>cannot</i> be stateful, it&#39;s just not guaranteed your implementation will support it ... but in practice all do support stateful allocators. Anyway, using templates doesn&#39;t solve the problem of using user-provided allocation functions (unless they just refer to globals, which the OP ruled out)"}, {"owner": {"reputation": 20235, "user_id": 1462718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7d451483b64aa999fecf316e7132afc6?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1462718/brandon"}, "edited": false, "score": 0, "creation_date": 1426097589, "post_id": 28993729, "comment_id": 46236640, "body": "The problem I remember when doing a stateful allocator was &quot;moving&quot; resources. As far as I can remember, GCC always copied my allocator. <a href=\"http://stackoverflow.com/a/24279177/1462718\">stackoverflow.com/a/24279177/1462718</a> Seems to say stateful allocators are &quot;nearly&quot; impossible."}], "owner": {"reputation": 7189, "user_id": 2898458, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/bc37a9f235a6fa726c8047459ecf0a3f?s=128&d=identicon&r=PG", "display_name": "randomusername", "link": "https://stackoverflow.com/users/2898458/randomusername"}, "is_accepted": false, "score": -2, "last_activity_date": 1426095868, "creation_date": 1426095868, "answer_id": 28993729, "question_id": 28993458, "link": "https://stackoverflow.com/questions/28993458/is-it-possible-to-write-a-custom-stl-allocator-that-uses-pointers-to-allocation/28993729#28993729", "title": "Is it possible to write a custom STL allocator that uses pointers to allocation functions provided by the user?", "body": "<p>Since allocators cannot be state-full but must be default constructible, I would suggest using templates to instantiate the allocators at compile time.</p>\n"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 0, "last_activity_date": 1426096415, "last_edit_date": 1495542500, "creation_date": 1426096415, "answer_id": 28993919, "question_id": 28993458, "link": "https://stackoverflow.com/questions/28993458/is-it-possible-to-write-a-custom-stl-allocator-that-uses-pointers-to-allocation/28993919#28993919", "title": "Is it possible to write a custom STL allocator that uses pointers to allocation functions provided by the user?", "body": "<p>Yes. As an example, look into <a href=\"https://github.com/ivmai/bdwgc/blob/master/include/gc_allocator.h\" rel=\"nofollow noreferrer\">header <code>gc/gc_allocator.h</code></a> from <a href=\"http://www.hboehm.info/gc/\" rel=\"nofollow noreferrer\">Boehm garbage collector</a> (you could easily replace the lower calls to <code>GC_MALLOC</code> etc by some function pointers).  See <a href=\"https://stackoverflow.com/a/8019003/841108\">this answer</a>.</p>\n"}], "owner": {"reputation": 16085, "user_id": 58805, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9e65438df95dc28b6024e20e11562dc3?s=128&d=identicon&r=PG", "display_name": "Calmarius", "link": "https://stackoverflow.com/users/58805/calmarius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 359, "favorite_count": 0, "accepted_answer_id": 28993720, "answer_count": 3, "score": 2, "last_activity_date": 1426096667, "creation_date": 1426095165, "question_id": 28993458, "link": "https://stackoverflow.com/questions/28993458/is-it-possible-to-write-a-custom-stl-allocator-that-uses-pointers-to-allocation", "title": "Is it possible to write a custom STL allocator that uses pointers to allocation functions provided by the user?", "body": "<p>We have a library that provides a C interface via <code>extern \"C\"</code>, and is used from C code, but inside it uses STL containers and some C++ features like RAII for convenience.</p>\n\n<p>Now there is a new requirement that the library should be able to take pointers to a custom <code>malloc</code> and <code>free</code> function coming from the client code, and use that for allocations inside. I can place them into the context structure of the library, and use them where needed, but using them with STL is puzzling...</p>\n\n<p>I looked at allocator classes but it seems STL containers must be able to use the default constructors to create the allocator and it seems there is no way to place these pointers into them to let them call through them to do the allocations. </p>\n\n<p>Is it possible to work this around preferably in a thread safe manner (without using globals)? </p>\n"}, {"tags": ["c++", "qt", "debugging", "qt-creator"], "comments": [{"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1497003969, "post_id": 28993418, "comment_id": 75907021, "body": "Check my comment from <a href=\"https://bugreports.qt.io/browse/QTCREATORBUG-13807\" rel=\"nofollow noreferrer\">&#91;Qt&#93;: #13807: Build directory creates additional debug and release folders in windows only</a> for more details."}], "answers": [{"comments": [{"owner": {"reputation": 1701, "user_id": 726156, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/758ee7433f2bac63d396f6d545ae96d0?s=128&d=identicon&r=PG", "display_name": "gleerman", "link": "https://stackoverflow.com/users/726156/gleerman"}, "edited": false, "score": 0, "creation_date": 1470917055, "post_id": 28995027, "comment_id": 65150631, "body": "I&#39;m having the same issue as biologist. The problem is that inside that build directory of your solution, there have been created subdirs for debug and release. I don&#39;t have that problem on Mac."}], "owner": {"reputation": 1070, "user_id": 2797506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4448da481ba2f82e865c7ccba064a34e?s=128&d=identicon&r=PG", "display_name": "Smasho", "link": "https://stackoverflow.com/users/2797506/smasho"}, "is_accepted": false, "score": 1, "last_activity_date": 1426099974, "creation_date": 1426099974, "answer_id": 28995027, "question_id": 28993418, "link": "https://stackoverflow.com/questions/28993418/qt-creator-creates-both-a-debug-and-a-release-folder-inside-the-designated-debug/28995027#28995027", "title": "Qt Creator creates both a debug and a release folder inside the designated debug folder", "body": "<p>You can choose folder for debug and release builds on the <em>projects mode (Ctrl + 5)</em></p>\n\n<p>There you have a combo box which says \"Edit build configuration\", and lets you choose <em>Release</em> or <em>Debug</em>, and then you can edit the build directory of each one</p>\n"}, {"owner": {"reputation": 1701, "user_id": 726156, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/758ee7433f2bac63d396f6d545ae96d0?s=128&d=identicon&r=PG", "display_name": "gleerman", "link": "https://stackoverflow.com/users/726156/gleerman"}, "is_accepted": false, "score": 8, "last_activity_date": 1470917471, "last_edit_date": 1495535476, "creation_date": 1470917471, "answer_id": 38896036, "question_id": 28993418, "link": "https://stackoverflow.com/questions/28993418/qt-creator-creates-both-a-debug-and-a-release-folder-inside-the-designated-debug/38896036#38896036", "title": "Qt Creator creates both a debug and a release folder inside the designated debug folder", "body": "<p>I deduced the solution from <a href=\"https://stackoverflow.com/a/4563512/726156\">this answer to the reverse question</a>.\nIn your .pro file, add the following line to prevent the subdirectories being created:</p>\n\n<pre><code>CONFIG -= debug_and_release debug_and_release_target\n</code></pre>\n\n<p>This issue only occurs on Windows, not on Unix-based OS's. Windows sets these flags by default, whereas Unix implementations of QT don't. To me it was mainly a problem due to compatibility of my project between both environments.</p>\n"}], "owner": {"reputation": 177, "user_id": 3277566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MZ1qu.png?s=128&g=1", "display_name": "Leptoceratops", "link": "https://stackoverflow.com/users/3277566/leptoceratops"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3592, "favorite_count": 4, "answer_count": 2, "score": 10, "last_activity_date": 1470917471, "creation_date": 1426095012, "question_id": 28993418, "link": "https://stackoverflow.com/questions/28993418/qt-creator-creates-both-a-debug-and-a-release-folder-inside-the-designated-debug", "title": "Qt Creator creates both a debug and a release folder inside the designated debug folder", "body": "<p>I am using the default build directory in Qt Creator which is something like <strong>build-project-blah-blah-Debug</strong>. However, when I build my app in debug mode both a <strong>debug</strong> and and a <strong>release</strong> folder are created inside. If I set the build directory as <strong>build-project-blah-blah</strong> for both the debug and release builds Qt Creator does not behave properly, i.e. it complaints and it does not clean the built files.</p>\n"}, {"tags": ["c++", "variables", "c++11", "dynamic", "multidimensional-array"], "comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1426095081, "post_id": 28993265, "comment_id": 46234998, "body": "<code>int *ary = new int[size]();</code> is not a compiler extension, that&#39;s a 1D variable length array via dynamic allocation.  I&#39;m pretty sure it&#39;s the most common reason to have dynamic allocation."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 4, "creation_date": 1426095202, "post_id": 28993265, "comment_id": 46235058, "body": "You can provide <code>[][]</code> access for the last version if you wrap the pointer in a class and use overloaded operators and a proxy class. Or you just overload <code>operator()</code> to get a <code>ary3(x, y)</code> syntax. And get rid of the <code>new[]</code> and use <code>std::vector</code>."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 1, "creation_date": 1426096464, "post_id": 28993265, "comment_id": 46235901, "body": "Why do you believe the vector solution is slower? It should not do anything which makes it slower than a raw dynamically allocated array; if anything, it should be slightly faster for certain operations, and it&#39;s more flexible because it uses placement new, not <code>new[]</code>. You can make it contiguous exactly the same way as a dynamically allocated array (i.e. your third solution here)."}, {"owner": {"reputation": 397, "user_id": 3185533, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d603aca4b377a5d1ad41e164e4042950?s=128&d=identicon&r=PG&f=1", "display_name": "JamesLens", "link": "https://stackoverflow.com/users/3185533/jameslens"}, "edited": false, "score": 0, "creation_date": 1426097967, "post_id": 28993265, "comment_id": 46236855, "body": "I&#39;m copying what I said below but basically I created an array and vector of size 100,000,000 and then did a for loop with container[i] = i; The time for the vector was 0.269s and for the array was 0.004s."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 1, "creation_date": 1426098093, "post_id": 28993265, "comment_id": 46236943, "body": "@JamesLens: This should certainly not happen. Perhaps you left bounds checking in? But even then the difference should not be so big IMO. You could post your exact test case as a separate question."}, {"owner": {"reputation": 397, "user_id": 3185533, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d603aca4b377a5d1ad41e164e4042950?s=128&d=identicon&r=PG&f=1", "display_name": "JamesLens", "link": "https://stackoverflow.com/users/3185533/jameslens"}, "edited": false, "score": 0, "creation_date": 1426098365, "post_id": 28993265, "comment_id": 46237099, "body": "Did not leave bounds checking in. Interestingly, I just tried this with gcc and the times for both vector and array were of the order 0.26s, while for clang as before vec time is about 0.26s and array time is 0.004s. You think this is worth asking seperately?"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1426098622, "post_id": 28993265, "comment_id": 46237268, "body": "@JamesLens: As I said, it would probably make a good separate question if you can reproduce the problem. <code>std::vector</code> is designed to be a complete replacement for <code>new[]</code>, and it does not do any magic inside, it&#39;s just placement new and constructors (I suspect that in both cases the allocation takes longer than the iteration, by the way)."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1426098703, "post_id": 28993265, "comment_id": 46237318, "body": "@JamesLens: Oh, and similar questions about vector performance may have been asked before, you better check that first! :)"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1426098893, "post_id": 28993265, "comment_id": 46237426, "body": "@JamesLens: The following may give some insights: <a href=\"http://stackoverflow.com/questions/1461276/stdvector-reserve-and-push-back-is-faster-than-resize-and-array-index-w\" title=\"stdvector reserve and push back is faster than resize and array index w\">stackoverflow.com/questions/1461276/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1426095563, "post_id": 28993578, "comment_id": 46235304, "body": "Does not meet the contiguous-memory requirement (although that requirement may be overrated anyway with regards to execution speed)."}, {"owner": {"reputation": 30739, "user_id": 1804599, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/v91P3.jpg?s=128&g=1", "display_name": "rightfold", "link": "https://stackoverflow.com/users/1804599/rightfold"}, "edited": false, "score": 0, "creation_date": 1426096174, "post_id": 28993578, "comment_id": 46235702, "body": "This is an array of arrays, not a 2D array."}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "reply_to_user": {"reputation": 397, "user_id": 3185533, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d603aca4b377a5d1ad41e164e4042950?s=128&d=identicon&r=PG&f=1", "display_name": "JamesLens", "link": "https://stackoverflow.com/users/3185533/jameslens"}, "edited": false, "score": 0, "creation_date": 1426097080, "post_id": 28993578, "comment_id": 46236300, "body": "@JamesLens You say a <code>vector</code> is non-contiguous but that&#39;s not true. Also the <code>operator[]</code> will be inlined by the compiler, so in the end there will be little to no difference in performance compared to a raw array. Also, remember the quote about premature optimization. Btw made an edit, check it out."}, {"owner": {"reputation": 98839, "user_id": 3848, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/W10YY.jpg?s=128&g=1", "display_name": "Motti", "link": "https://stackoverflow.com/users/3848/motti"}, "edited": false, "score": 0, "creation_date": 1426101078, "post_id": 28993578, "comment_id": 46238822, "body": "You know that you can overload <code>operator[] </code>"}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "reply_to_user": {"reputation": 98839, "user_id": 3848, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/W10YY.jpg?s=128&g=1", "display_name": "Motti", "link": "https://stackoverflow.com/users/3848/motti"}, "edited": false, "score": 0, "creation_date": 1426101447, "post_id": 28993578, "comment_id": 46239028, "body": "@Motti Yes, but since <code>ary5[x][y]</code> is not possible and <code>ary5[x, y]</code> looks weird for element access imo, I prefer <code>operator()</code>."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 30739, "user_id": 1804599, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/v91P3.jpg?s=128&g=1", "display_name": "rightfold", "link": "https://stackoverflow.com/users/1804599/rightfold"}, "edited": false, "score": 0, "creation_date": 1426104125, "post_id": 28993578, "comment_id": 46240623, "body": "@\u0440\u0430\u0439\u0442\u0444\u043e\u043b\u0434 in C and C++, all &quot;2-D&quot; arrays are actually arrays of arrays"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1426104192, "post_id": 28993578, "comment_id": 46240661, "body": "@zenith <code>ary5[x][y]</code> is possible if you write a helper class for <code>Contiguous2DArray::operator[]</code> to return which has its own overloaded <code>operator[]</code> .  <code>ary5[x, y]</code> would be using the built-in comma operator which isn&#39;t appropriate here."}], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": false, "score": 1, "last_activity_date": 1426096555, "last_edit_date": 1426096555, "creation_date": 1426095473, "answer_id": 28993578, "question_id": 28993265, "link": "https://stackoverflow.com/questions/28993265/c11-dynamically-allocated-variable-length-multidimensional-array/28993578#28993578", "title": "C++11 dynamically allocated variable length multidimensional array", "body": "<p>This will create a dynamically allocated 2D variable-length array, with dimensions <code>w</code> and <code>h</code>:</p>\n\n<pre><code>std::vector&lt;std::vector&lt;int&gt;&gt; ary4(w, std::vector&lt;int&gt;(h));\n</code></pre>\n\n<p>It can be accessed with <code>[][]</code>:</p>\n\n<pre><code>ary4[x][y] = 0;\n</code></pre>\n\n<p>However, it's not contiguously allocated. To get a contiguous array, here's one solution:</p>\n\n<pre><code>template&lt;typename E&gt;\nclass Contiguous2DArray\n{\npublic:\n    Contiguous2DArray(std::size_t width, std::size_t height)\n    : array(width * height), width(width) {}\n\n    E&amp; operator()(std::size_t x, std::size_t y)\n    { return array[x + width * y]; }\n\nprivate:\n    std::vector&lt;E&gt; array;\n    std::size_t width;\n}\n</code></pre>\n\n<p>It can be used like this:</p>\n\n<pre><code>Contiguous2DArray&lt;int&gt; ary5(w, h);\nary5(x, y) = 0;\n</code></pre>\n"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 1, "last_activity_date": 1426104703, "last_edit_date": 1426104703, "creation_date": 1426102542, "answer_id": 28995767, "question_id": 28993265, "link": "https://stackoverflow.com/questions/28993265/c11-dynamically-allocated-variable-length-multidimensional-array/28995767#28995767", "title": "C++11 dynamically allocated variable length multidimensional array", "body": "<p>The number of dimensions is fixed, because the type of what <code>[]</code> returns changes based on the number of dimensions.  Access is through both repeated <code>[]</code> and <code>(...)</code>.  The first mimics C-style array lookup.  The <code>(...)</code> syntax must be complete (it must pass <code>N</code> args to an <code>N</code> dimensional array).  There is a modest efficiency cost to support both.</p>\n\n<p>Uses C++14 features to save on verbosity.  None are essential.</p>\n\n<p>Using an an <code>n_dim_array</code> with <code>0</code> dimensions will give bad results.</p>\n\n<pre><code>template&lt;class T, size_t N&gt;\nstruct array_index {\n  size_t const* dimensions;\n  size_t offset;\n  T* buffer;\n  array_index&lt;T,N-1&gt; operator[](size_t i)&amp;&amp;{\n    return {dimensions+1, (offset+i)* *dimensions, buffer};\n  }\n  template&lt;class...Is, std::enable_if_t&lt;sizeof...(Is) == N&gt;&gt;\n  T&amp; operator()(size_t i, Is...is)&amp;&amp;{\n    return std::move(*this)[i](is...);\n  }\n};\ntemplate&lt;class T&gt;\nstruct array_index&lt;T,0&gt; {\n  size_t const* dimension;\n  size_t offset;\n  T* buffer;\n  T&amp; operator[](size_t i)&amp;&amp;{\n    return buffer[i+offset];\n  }\n  T&amp; operator()(size_t i)&amp;&amp;{\n    return std::move(*this)[i];\n  }\n};\n\ntemplate&lt;class T, size_t N&gt;\nstruct n_dim_array {\n  template&lt;class...Szs, class=std::enable_if_t&lt;sizeof...(Szs)==N&gt;&gt;\n  explicit n_dim_array( Szs... sizes ):\n    szs{ { static_cast&lt;size_t&gt;(sizes)... } }\n  {\n    size_t sz = 1;\n    for( size_t s : szs )\n      sz *= s;\n    buffer.resize(sz);\n  }\n  n_dim_array( n_dim_array const&amp; o ) = default;\n  n_dim_array&amp; operator=( n_dim_array const&amp; o ) = default;\n\n\n  using top_level_index = array_index&lt;T,N-1&gt;;\n  top_level_index index(){return {szs.data(),0,buffer.data()};}\n  auto operator[]( size_t i ) {\n    return index()[i];\n  }\n  using const_top_level_index = array_index&lt;const T,N-1&gt;;\n  const_top_level_index index()const{return {szs.data(),0,buffer.data()};}\n  auto operator[]( size_t i ) const {\n    return index()[i];\n  }\n  template&lt;class...Is,class=std::enable_if_t&lt;sizeof...(Is)==N&gt;&gt;\n  T&amp; operator()(Is...is){\n    return index()(is...);\n  }\n  template&lt;class...Is,class=std::enable_if_t&lt;sizeof...(Is)==N&gt;&gt;\n  T const&amp; operator()(Is...is) const {\n    return index()(is...);\n  }\nprivate:\n  n_dim_array() = delete;\n  std::array&lt;size_t,N&gt; szs;\n  std::vector&lt;T&gt; buffer;\n};\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/f3f417769cd6a219\" rel=\"nofollow\">live example</a></p>\n\n<p>Does not support <code>for(:)</code> loop iteration.  Writing an iterator isn't that hard: I'd do it in <code>array_index</code>.</p>\n"}], "owner": {"reputation": 397, "user_id": 3185533, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d603aca4b377a5d1ad41e164e4042950?s=128&d=identicon&r=PG&f=1", "display_name": "JamesLens", "link": "https://stackoverflow.com/users/3185533/jameslens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2042, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1426104703, "creation_date": 1426094510, "last_edit_date": 1426100692, "question_id": 28993265, "link": "https://stackoverflow.com/questions/28993265/c11-dynamically-allocated-variable-length-multidimensional-array", "title": "C++11 dynamically allocated variable length multidimensional array", "body": "<p>I've been trying to create a variable length multidimensional array. As I understand, you can't create variable length arrays on the stack, but you can create 1D variable length arrays in C++ using dynamic allocation. Correct me if this is a compiler extension, but it seems to work fine on clang and gcc with --pedantic set.</p>\n\n<pre><code>int size = 10;\nint *ary = new int[size]();\n</code></pre>\n\n<p>I tried to extend the concept to multidimensional arrays. Here are my results. The problem with possiblity 1 and 2 is that they require a constexpr and do not work with variable sizes. Is it possible to make either of them accept a variable as its size? I put possibility 3 as I am aware of it, but it lacks [][] access, which is what I'm looking for.</p>\n\n<pre><code>constexpr int constSize = 10;\n\n//Possibility 1: Only works in C++11\n//Creates CONTIGUOUS 2D array equivalent to array[n*n], but with [][] access\n\nint (*ary1)[constSize] = new int[constSize][constSize]();\ndelete [] ary1;\n\n//Possibility 2:\n//Really horrible as it does NOT create a contiguous 2D array\n//Instead creates n seperate arrays that are each themselves contiguous\n//Also requires a lot of deletes, quite messy\n\nint **ary2 = new int*[constSize];\nfor (int i = 0; i &lt; n; ++i)\n    ary2[i] = new int[constSize];\nfor (int i = 0; i &lt; n; ++i)\n    delete [] ary2;\ndelete [] ary2;\n\n//Possibility 3:\n//This DOES work with non-constexpr variable\n//However it does not offer [][] access, need to access element using ary[i*n+j]\n\nint *ary3 = new int[size*size];\ndelete [] ary3;\n</code></pre>\n"}, {"tags": ["c++", "macos"], "comments": [{"owner": {"reputation": 83109, "user_id": 1312143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d64f50f989e564c337a8a8bd653b8e6?s=128&d=identicon&r=PG", "display_name": "Ken Thomases", "link": "https://stackoverflow.com/users/1312143/ken-thomases"}, "edited": false, "score": 1, "creation_date": 1426114201, "post_id": 28993215, "comment_id": 46245620, "body": "What is the actual type of the file (not its file extension, which is not determinative)? What does <code>file lib.so</code> output? By the way, there are various ELF-related packages supported by MacPorts. For example, it looks like the <code>elftoolchain</code> package includes a <code>readelf</code> tool. <code>i386-elf-binutils</code> or <code>x86_64-elf-binutils</code> may also have something useful. I&#39;m sure the other package systems have similar packages."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1426116622, "post_id": 28993215, "comment_id": 46246585, "body": "That&#39;s an ARM binary. Will x86/x64 tools be able to make any sense of it?"}, {"owner": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "edited": false, "score": 0, "creation_date": 1480668172, "post_id": 28993215, "comment_id": 69066952, "body": "Because OSX uses the Mach-O binary format, not ELF. As such, utilities like <code>nm</code>, etc., don&#39;t deal with ELF formats. Nor will they use the same command line syntax. I describe how to build and install the <a href=\"http://stackoverflow.com/questions/8712352/linux-mach-o-disassembler/8714142#8714142\"><code>binutils</code></a> on Linux for Mach-O files. You might want to compile the <code>binutils</code> to run (hosted) on OSX/Darwin, but <code>--target</code> will need to be <code>arm-elf</code> or some variant. I can&#39;t remember specific ARM architectures, but there might be build option which handle everything from older ARM versions, to AArch64."}, {"owner": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "edited": false, "score": 0, "creation_date": 1480668446, "post_id": 28993215, "comment_id": 69067097, "body": "Sure enough, if you have something like MacPorts installed, there are already packages built for this: <code>port list | grep -i binutils</code> lists several packages like: <code>arm-elf-binutils</code>"}], "answers": [{"comments": [{"owner": {"reputation": 21411, "user_id": 301816, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/d347a63873879ac0b72df4e7b9470433?s=128&d=identicon&r=PG", "display_name": "stevebot", "link": "https://stackoverflow.com/users/301816/stevebot"}, "edited": false, "score": 2, "creation_date": 1426116508, "post_id": 28997743, "comment_id": 46246541, "body": "Thanks, unfortunately nm does not output anything for me."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1426116561, "post_id": 28997743, "comment_id": 46246567, "body": "If this is a non-OS X library, the OS X tools may not know how to read it. Could you spin up a Linux VM to handle these? <a href=\"https://www.vagrantup.com/\" rel=\"nofollow noreferrer\">Vagrant</a> makes that super easy. If you&#39;re dealing with an ARM binary, you may need compiler tools dealing with that architecture."}, {"owner": {"reputation": 22959, "user_id": 6998684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqR2Z.jpg?s=128&g=1", "display_name": "IgorGanapolsky", "link": "https://stackoverflow.com/users/6998684/igorganapolsky"}, "edited": false, "score": 0, "creation_date": 1462888974, "post_id": 28997743, "comment_id": 61820274, "body": "Your first command with <code>c++filt</code> gave me no output.  Your second command with <code>symbols</code> just prints: <b>file, do</b>"}], "owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "is_accepted": false, "score": 0, "last_activity_date": 1426118576, "last_edit_date": 1426118576, "creation_date": 1426109392, "answer_id": 28997743, "question_id": 28993215, "link": "https://stackoverflow.com/questions/28993215/how-to-print-symbol-list-for-so-file-in-osx/28997743#28997743", "title": "How to print symbol list for .so file in OSX?", "body": "<p>Try using <code>c++filt</code> piped from <code>nm</code>:</p>\n\n<pre><code>nm lib.so | c++filt -p -i\n</code></pre>\n\n<blockquote>\n  <p>c++filt - Demangle C++ and Java symbols.</p>\n  \n  <p>-p\n         --no-params\n             When demangling the name of a function, do not display the types of\n             the function's parameters.</p>\n  \n  <p>-i\n         --no-verbose\n             Do  not  include  implementation  details (if any) in the demangled\n             output.</p>\n</blockquote>\n\n<p><strong>EDIT</strong>: Based upon the new (<em>ARM</em>) info provided in the question, try using <code>symbols</code> instead:</p>\n\n<pre><code>symbols lib.so -arch arm | awk '{print $4}'\n</code></pre>\n\n<p>I've used <code>awk</code> to simplify output; remove to output everything.</p>\n\n<p><a href=\"https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/symbols.1.html\" rel=\"nofollow\">Manual page : Symbols</a></p>\n"}, {"owner": {"reputation": 11, "user_id": 6388931, "user_type": "registered", "profile_image": "https://graph.facebook.com/402747333482381/picture?type=large", "display_name": "Samantha Black", "link": "https://stackoverflow.com/users/6388931/samantha-black"}, "is_accepted": false, "score": 0, "last_activity_date": 1480650976, "creation_date": 1480650976, "answer_id": 40924526, "question_id": 28993215, "link": "https://stackoverflow.com/questions/28993215/how-to-print-symbol-list-for-so-file-in-osx/40924526#40924526", "title": "How to print symbol list for .so file in OSX?", "body": "<p><a href=\"https://developer.apple.com/legacy/library/documentation/Darwin/Reference/ManPages/man1/nm.1.html\" rel=\"nofollow noreferrer\">https://developer.apple.com/legacy/library/documentation/Darwin/Reference/ManPages/man1/nm.1.html</a>\n Nm displays the name list (symbol table) of each object file in the argument list.  If an argument is\n       an  archive, a listing for each object file in the archive will be produced.  File can be of the form\n       libx.a(x.o), in which case only symbols from that member of the object file are listed.  (The  paren-\n       theses have to be quoted to get by the shell.)  If no file is given, the symbols in a.out are listed.</p>\n"}], "owner": {"reputation": 21411, "user_id": 301816, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/d347a63873879ac0b72df4e7b9470433?s=128&d=identicon&r=PG", "display_name": "stevebot", "link": "https://stackoverflow.com/users/301816/stevebot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 4891, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1480650976, "creation_date": 1426094391, "last_edit_date": 1426116439, "question_id": 28993215, "link": "https://stackoverflow.com/questions/28993215/how-to-print-symbol-list-for-so-file-in-osx", "title": "How to print symbol list for .so file in OSX?", "body": "<p>I have an .SO file (note, not .a, not .dylib and not .o) and I need to get symbol information from it on OSX.</p>\n\n<p>I have tried </p>\n\n<pre><code>nm -gU lib.so\n</code></pre>\n\n<p>However, nothing is printed out.</p>\n\n<p>I can't use otool because it's not an object file, and readelf does not exists on OSX. How do I get the symbol information? </p>\n\n<p>Please note, that I am using this .so file in another project, and there is symbol information. I am able to load the library, and reference functions from it. However, I have yet to find a tool on OSX to let me print the symbol information from it.</p>\n\n<p>As asked,</p>\n\n<pre><code>file lib.so\n\nELF 32-bit LSB shared object, ARM, version 1 (SYSV), dynamically linked, stripped\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 897, "user_id": 1850223, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0c20432372e203f2dd5e655a1af1ad4e?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/1850223/tom"}, "edited": false, "score": 0, "creation_date": 1426094472, "post_id": 28993188, "comment_id": 46234538, "body": "should not be <code>else if ( largeNum == randNum)</code> instead?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4659585, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kRIZ04rlfFE/AAAAAAAAAAI/AAAAAAAAADY/iabs3bwRgT8/photo.jpg?sz=128", "display_name": "darkredninja", "link": "https://stackoverflow.com/users/4659585/darkredninja"}, "edited": false, "score": 0, "creation_date": 1426095409, "post_id": 28993496, "comment_id": 46235208, "body": "Awesome! Thanks for the help! :D That makes a lot of sense now."}, {"owner": {"reputation": 897, "user_id": 1850223, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0c20432372e203f2dd5e655a1af1ad4e?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/1850223/tom"}, "reply_to_user": {"reputation": 1, "user_id": 4659585, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kRIZ04rlfFE/AAAAAAAAAAI/AAAAAAAAADY/iabs3bwRgT8/photo.jpg?sz=128", "display_name": "darkredninja", "link": "https://stackoverflow.com/users/4659585/darkredninja"}, "edited": false, "score": 0, "creation_date": 1426095483, "post_id": 28993496, "comment_id": 46235253, "body": "and change <code>int largeNum = 1;</code> to <code>int largeNum = 0;</code> or less than 0"}, {"owner": {"reputation": 682, "user_id": 2459080, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/315LC.jpg?s=128&g=1", "display_name": "Sameer Sawla", "link": "https://stackoverflow.com/users/2459080/sameer-sawla"}, "reply_to_user": {"reputation": 1, "user_id": 4659585, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kRIZ04rlfFE/AAAAAAAAAAI/AAAAAAAAADY/iabs3bwRgT8/photo.jpg?sz=128", "display_name": "darkredninja", "link": "https://stackoverflow.com/users/4659585/darkredninja"}, "edited": false, "score": 0, "creation_date": 1426099123, "post_id": 28993496, "comment_id": 46237575, "body": "@darkredninja : answer surely helped you but did you understand where actually you thought it to be wrong ?"}], "owner": {"reputation": 897, "user_id": 1850223, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0c20432372e203f2dd5e655a1af1ad4e?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/1850223/tom"}, "is_accepted": false, "score": 1, "last_activity_date": 1426095284, "creation_date": 1426095284, "answer_id": 28993496, "question_id": 28993188, "link": "https://stackoverflow.com/questions/28993188/for-loops-and-counting/28993496#28993496", "title": "For loops and counting", "body": "<p>Try this:</p>\n\n<pre><code>if ( randNum &gt; largeNum )\n{\n    largeNum = randNum;\n    largeNumCount = 1;\n}\nelse if ( randNum == largeNum )\n{\n    ++largeNumCount;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4659585, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kRIZ04rlfFE/AAAAAAAAAAI/AAAAAAAAADY/iabs3bwRgT8/photo.jpg?sz=128", "display_name": "darkredninja", "link": "https://stackoverflow.com/users/4659585/darkredninja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1426095284, "creation_date": 1426094334, "question_id": 28993188, "link": "https://stackoverflow.com/questions/28993188/for-loops-and-counting", "title": "For loops and counting", "body": "<p>Sorry I am a very novice programmer and just learning. I've just been having one problem. I have been trying to get this to count the number of times the largest number has been displayed. But sometimes it has one more then it should. I changed some of the variables and moved it around. I've been stuck for about an hour.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;ctime&gt;\nusing namespace std;\n\nint main()\n{\n    int largeNumCount = 0;\n    int largeNum = 1;\n    srand(unsigned(time(0)));\n    for (int x = 1; x &lt;= 20; x++)\n    {\n        int randNum = (rand() % 10) + 1;\n        cout &lt;&lt;  randNum &lt;&lt; \"  \";\n        if (largeNum &lt;= randNum)\n        {\n            largeNum = randNum;\n            largeNumCount = 1;\n        }\n        if (largeNum == randNum)\n        {\n            largeNumCount++;\n        }\n    }\n\n    cout &lt;&lt; \"\\n\\nThe largest number: \" &lt;&lt; largeNum &lt;&lt; \" was found \" &lt;&lt; largeNumCount &lt;&lt; \" time(s)\\n\\n\";\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 2181, "user_id": 4027338, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/gzGPW.png?s=128&g=1", "display_name": "marsh", "link": "https://stackoverflow.com/users/4027338/marsh"}, "edited": false, "score": 0, "creation_date": 1426094480, "post_id": 28993230, "comment_id": 46234543, "body": "Ah makes sense, that was my second guess. Thanks."}, {"owner": {"reputation": 18466, "user_id": 477563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/07a89fb7b2fd8ece1e9e39e95e004a36?s=128&d=identicon&r=PG", "display_name": "Mr. Llama", "link": "https://stackoverflow.com/users/477563/mr-llama"}, "edited": false, "score": 0, "creation_date": 1426094541, "post_id": 28993230, "comment_id": 46234585, "body": "Out of curiosity, how are function pointers different from callbacks?"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "reply_to_user": {"reputation": 18466, "user_id": 477563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/07a89fb7b2fd8ece1e9e39e95e004a36?s=128&d=identicon&r=PG", "display_name": "Mr. Llama", "link": "https://stackoverflow.com/users/477563/mr-llama"}, "edited": false, "score": 1, "creation_date": 1426094591, "post_id": 28993230, "comment_id": 46234618, "body": "@Mr.Llama, Function pointers are just one way to accept or store a callback. Others include <code>std::function</code> or a generic parameter that should be any callable object."}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "reply_to_user": {"reputation": 18466, "user_id": 477563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/07a89fb7b2fd8ece1e9e39e95e004a36?s=128&d=identicon&r=PG", "display_name": "Mr. Llama", "link": "https://stackoverflow.com/users/477563/mr-llama"}, "edited": false, "score": 2, "creation_date": 1426094599, "post_id": 28993230, "comment_id": 46234627, "body": "@Mr.Llama A callback is typically implemented as a function pointer, but a function pointer doesn&#39;t have to be a callback, it can serve any purpose you want it to. It&#39;s like the &quot;a square is a rectangle, but a rectangle is not necessarily a square&quot; argument."}], "owner": {"reputation": 1440, "user_id": 645314, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/630f28a2a7b95586f9de4f828e827052?s=128&d=identicon&r=PG", "display_name": "OpenUserX03", "link": "https://stackoverflow.com/users/645314/openuserx03"}, "is_accepted": true, "score": 2, "last_activity_date": 1426094434, "creation_date": 1426094434, "answer_id": 28993230, "question_id": 28993165, "link": "https://stackoverflow.com/questions/28993165/unknown-method-syntax/28993230#28993230", "title": "Unknown method syntax", "body": "<p>The parameters are <a href=\"http://en.wikipedia.org/wiki/Function_pointer\" rel=\"nofollow\">function pointers</a>.</p>\n"}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": false, "score": 2, "last_activity_date": 1426094494, "creation_date": 1426094494, "answer_id": 28993258, "question_id": 28993165, "link": "https://stackoverflow.com/questions/28993165/unknown-method-syntax/28993258#28993258", "title": "Unknown method syntax", "body": "<p>You can read the two arguments to the <code>Initialize</code> function as the following.</p>\n\n<p>The first argument is a \"function pointer to a function that takes a <code>size_t</code> argument and returns a <code>void*</code>\"</p>\n\n<p>The second argument is a \"function pointer to a function that takes a <code>void*</code> argument and has no return (return is <code>void</code>)\"</p>\n"}], "owner": {"reputation": 2181, "user_id": 4027338, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/gzGPW.png?s=128&g=1", "display_name": "marsh", "link": "https://stackoverflow.com/users/4027338/marsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 28993230, "answer_count": 2, "score": 0, "last_activity_date": 1426094494, "creation_date": 1426094262, "question_id": 28993165, "link": "https://stackoverflow.com/questions/28993165/unknown-method-syntax", "title": "Unknown method syntax", "body": "<pre><code>static void Initialize(void* (*allocPtr)(size_t), void (*freePtr)(void*))\n</code></pre>\n\n<p>I have never seen a method taking this type of syntax before. Is it casting? Can anyone shed some light on this? I would search other answers but I am not sure how to phrase it.</p>\n"}, {"tags": ["c++", "virtual"], "comments": [{"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 2, "creation_date": 1426094270, "post_id": 28993109, "comment_id": 46234402, "body": "Yes, it is possible, provided one of the classes actually provides an implementation. Without seeing what you&#39;ve tried it&#39;s hard to know why it isn&#39;t working."}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 2, "creation_date": 1426094274, "post_id": 28993109, "comment_id": 46234406, "body": "Can you post the actual code instead of trying to describe it?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1426094324, "post_id": 28993109, "comment_id": 46234443, "body": "Please create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a> and show us. Code says more than a thousand words."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4580486, "user_type": "registered", "profile_image": "https://graph.facebook.com/793611810719553/picture?type=large", "display_name": "Reinier Hasper", "link": "https://stackoverflow.com/users/4580486/reinier-hasper"}, "edited": false, "score": 0, "creation_date": 1426100028, "post_id": 28993349, "comment_id": 46238178, "body": "Thanks! this was what i was looking for;) Why isnt it a proper way to declare a virtual function protected or public btw?"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 1, "user_id": 4580486, "user_type": "registered", "profile_image": "https://graph.facebook.com/793611810719553/picture?type=large", "display_name": "Reinier Hasper", "link": "https://stackoverflow.com/users/4580486/reinier-hasper"}, "edited": false, "score": 0, "creation_date": 1426101735, "post_id": 28993349, "comment_id": 46239184, "body": "@ReinierHasper: This old article by Herb Sutter is still a good resource for this question: <a href=\"http://www.gotw.ca/publications/mill18.htm\" rel=\"nofollow noreferrer\">gotw.ca/publications/mill18.htm</a>. Basically, the problem with public virtual functions is that they mix client concerns with implementation concerns."}], "owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "is_accepted": false, "score": 0, "last_activity_date": 1426094781, "creation_date": 1426094781, "answer_id": 28993349, "question_id": 28993109, "link": "https://stackoverflow.com/questions/28993109/use-virtual-method-of-base-class-c-in-child-of-child-class/28993349#28993349", "title": "use virtual method of base class C++ in child of child class", "body": "<p>Only if the virtual function is not private. If it is, then you cannot call it and are not supposed to, either:</p>\n\n<pre><code>class ThreadClass\n{\npublic:\n    virtual ~ThreadClass() {}\nprivate:\n    virtual void run() = 0;\n};\n\nclass Device : public ThreadClass\n{\n};\n\nclass RFDevice : public Device\n{\npublic:\n    void f()\n    {\n        run(); // compiler error\n    }\n};\n</code></pre>\n\n<p>If it is protected or public, then it will work, provided there is an implementation of the function somewhere down the class hierarchy. But with the exception of the destructor, virtual functions should rarely be public or protected in C++:</p>\n\n<pre><code>class ThreadClass\n{\npublic:\n    virtual ~ThreadClass() {}\nprotected:\n    virtual void run() = 0; // non-private virtual, strange\n};\n\nclass Device : public ThreadClass\n{\n};\n\nclass RFDevice : public Device\n{\nprotected:\n    virtual void run()\n    {\n    }\n\npublic:\n\n    void f()\n    {\n        run(); // works\n    }\n};\n</code></pre>\n\n<p>Of course, this does not technically call the base function. And that's a good thing; you'd end up with a pure virtual function call otherwise, and your program would crash.</p>\n\n<p>Perhaps what you need to do is to just implement the private virtual function. That would be the preferred class design:</p>\n\n<pre><code>class ThreadClass\n{\npublic:\n    virtual ~ThreadClass() {}\n    void execute()\n    {\n        run();\n    }\nprivate:\n    virtual void run() = 0;\n};\n\nclass Device : public ThreadClass\n{\n};\n\nclass RFDevice : public Device\n{\nprivate:\n    virtual void run()\n    {\n    }\n};\n\nint main()\n{\n    RFDevice d;\n    d.execute();\n}\n</code></pre>\n\n<p>If you are not just maintaining a legacy code base, you should probably get rid of your thread class and use <a href=\"http://en.cppreference.com/w/cpp/thread\" rel=\"nofollow\">C++11 multi-threading</a>.</p>\n"}], "owner": {"reputation": 1, "user_id": 4580486, "user_type": "registered", "profile_image": "https://graph.facebook.com/793611810719553/picture?type=large", "display_name": "Reinier Hasper", "link": "https://stackoverflow.com/users/4580486/reinier-hasper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1008, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1426094781, "creation_date": 1426094080, "question_id": 28993109, "link": "https://stackoverflow.com/questions/28993109/use-virtual-method-of-base-class-c-in-child-of-child-class", "title": "use virtual method of base class C++ in child of child class", "body": "<p>I've created a class named 'Device' which get inherited by multiple devices (for example, RFDevice, AccelleroDevice) </p>\n\n<p>The Device class inherited a Thread class. This Threadclass includes a Pure virtual function named run. Is it possible to accesss this pure virtual function in RFDevice or AcelleroDevice.</p>\n\n<p>So,</p>\n\n<p>ThreadClass->DeviceClass->RFDeviceClass.</p>\n\n<p>I've tried to add </p>\n\n<p>' virtual void run(void) = 0' also in the device class but this wont work.</p>\n\n<p>Greets,</p>\n"}, {"tags": ["c++", "c", "struct", "pragma"], "comments": [{"owner": {"reputation": 9112, "user_id": 2721883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5c8448407184c2a90cc46db06c159ca?s=128&d=identicon&r=PG&f=1", "display_name": "clcto", "link": "https://stackoverflow.com/users/2721883/clcto"}, "edited": false, "score": 2, "creation_date": 1426093866, "post_id": 28992979, "comment_id": 46234096, "body": "The compiler is adding padding to align with memory better. See the wikipedia page on <a href=\"https://en.wikipedia.org/wiki/Data_structure_alignment\" rel=\"nofollow noreferrer\">Data Structure Alignment</a> for more information."}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 2, "creation_date": 1426093872, "post_id": 28992979, "comment_id": 46234102, "body": "\\0 is only inserted at the end of c-string literals, if you declare an array of size 15, it will be 15 long. If the size is bigger than expected it&#39;s due to padding/alignment, not \\0 (which again only makes sense with string literals, not arrays in general)"}, {"owner": {"reputation": 483, "user_id": 1642856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7b915591a9ab7639ae425ea7756d308?s=128&d=identicon&r=PG", "display_name": "Alfred Bratterud", "link": "https://stackoverflow.com/users/1642856/alfred-bratterud"}, "edited": false, "score": 1, "creation_date": 1426094425, "post_id": 28992979, "comment_id": 46234506, "body": "Most compilers allow you to prevent padding. In GCC you can use <code>__attribute__((packed))</code>. Note that this also prevents the compiler from the optimizations it could achieve with alignment/padding (like SSE). Packed structs can be useful, for instance when you&#39;re looking at a network buffer through as struct."}], "owner": {"reputation": 853, "user_id": 1046955, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/52e98b49c0d469a89b3d004c3a76a58a?s=128&d=identicon&r=PG", "display_name": "Dharmesh", "link": "https://stackoverflow.com/users/1046955/dharmesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "closed_date": 1426093913, "answer_count": 0, "score": 0, "last_activity_date": 1426096625, "creation_date": 1426093730, "last_edit_date": 1426096625, "question_id": 28992979, "link": "https://stackoverflow.com/questions/28992979/how-to-control-padding-between-struct-elements-in-gnu-compiler", "closed_reason": "Duplicate", "title": "how to control padding between struct elements in GNU compiler?", "body": "<p>In below code. When I print individual char array size it prints correct value.\nBut when I print whole struct size at a time it adds one byte more for each char array.</p>\n\n<p>How can I control padding between elements in struct using #pragma in GNU C++ compiler? Can I set it to 0?</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\ntypedef struct s1{\n    char test[15];\n    char t2[15];\n}s1;\n\ntypedef struct s2{\n    int message_id;\n    int message_size;\n}s2;\n\ntypedef struct s3{\n    char test[15];\n    char t2[15];\n    int a;\n}s3;\n\ntypedef struct s4{\n    char test[15];\n    int a;\n}s4;\n\n\nint main() {\n    s4 st;\n    cout&lt;&lt;sizeof(s1)&lt;&lt;endl;\n    cout&lt;&lt;sizeof(s2)&lt;&lt;endl;\n    cout&lt;&lt;sizeof(s3)&lt;&lt;endl;\n    cout&lt;&lt;sizeof(s4)&lt;&lt;endl;\n    cout&lt;&lt;sizeof(st.test)&lt;&lt;endl;\n    return 0;\n}\n</code></pre>\n\n<p>-----------------------OUTPUT--------------------</p>\n\n<pre><code>30\n8\n36\n20\n15\n</code></pre>\n\n<p>How can I control padding between struct elements?</p>\n"}, {"tags": ["c++", "c++11", "copy-constructor", "move-semantics", "generic-programming"], "comments": [{"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 0, "creation_date": 1426094101, "post_id": 28992960, "comment_id": 46234281, "body": "You could implement your own <code>copy</code> without much effort."}, {"owner": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "edited": false, "score": 0, "creation_date": 1426094322, "post_id": 28992960, "comment_id": 46234441, "body": "I know you wanted not to be told to add an overload, but I have a hard time seeing why you would want this particular implementation."}, {"owner": {"reputation": 4972, "user_id": 1964342, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ce48e3381ac19802f017e34b80e0536c?s=128&d=identicon&r=PG", "display_name": "tohava", "link": "https://stackoverflow.com/users/1964342/tohava"}, "reply_to_user": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "edited": false, "score": 0, "creation_date": 1426094432, "post_id": 28992960, "comment_id": 46234509, "body": "@rlbond - This implementation allows a person reading the function call to understand whether a copy is created or not, the overload does not."}, {"owner": {"reputation": 235985, "user_id": 252000, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/082b8ee2b0aebb430b8d4d98e6a5c32f?s=128&d=identicon&r=PG", "display_name": "fredoverflow", "link": "https://stackoverflow.com/users/252000/fredoverflow"}, "edited": false, "score": 4, "creation_date": 1426094550, "post_id": 28992960, "comment_id": 46234593, "body": "I don&#39;t get it... why don&#39;t you simply change <code>void f(A &amp;&amp;a)</code> to <code>void f(A a)</code>?"}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 1, "creation_date": 1426094557, "post_id": 28992960, "comment_id": 46234597, "body": "Is is necessary that a copy happens? Or would something like <code>template&lt;class T&gt; T const&amp; as_const(T const&amp; x) { return x; }</code> be sufficient?"}, {"owner": {"reputation": 4972, "user_id": 1964342, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ce48e3381ac19802f017e34b80e0536c?s=128&d=identicon&r=PG", "display_name": "tohava", "link": "https://stackoverflow.com/users/1964342/tohava"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1426094667, "post_id": 28992960, "comment_id": 46234681, "body": "@dyp - The function modifies its arguments, so yes, a copy is needed (I want to avoid losing the original)"}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1426428963, "post_id": 28992960, "comment_id": 46359445, "body": "<code>f(A{x})</code> makes it explicit to the caller that a copy is happening. <code>f(copy(x))</code> doesn&#39;t make it explicit, I have to go an look for the function <code>copy</code>, and then I get confused and wonder why you didn&#39;t just write <code>f(A{x})</code>."}, {"owner": {"reputation": 4972, "user_id": 1964342, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ce48e3381ac19802f017e34b80e0536c?s=128&d=identicon&r=PG", "display_name": "tohava", "link": "https://stackoverflow.com/users/1964342/tohava"}, "reply_to_user": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1426429580, "post_id": 28992960, "comment_id": 46359661, "body": "@JonathanWakely - What if <code>A</code> is <code>std::vector&lt;std::vector&lt;std::vector&lt;std::tuple&lt;int,int,int&gt; &gt; &gt; &gt;</code>"}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1426430161, "post_id": 28992960, "comment_id": 46359872, "body": "There&#39;s this neat thing called <code>typedef</code>. If you&#39;re using that type without giving it a better name you already have problems with your code."}, {"owner": {"reputation": 4972, "user_id": 1964342, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ce48e3381ac19802f017e34b80e0536c?s=128&d=identicon&r=PG", "display_name": "tohava", "link": "https://stackoverflow.com/users/1964342/tohava"}, "reply_to_user": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1426430425, "post_id": 28992960, "comment_id": 46359954, "body": "@JonathanWakely - I do not agree. In <code>java</code>, if I write <code>x.clone()</code>, there is no need to write the type of <code>x</code> all over again. There is no need to clutter things with an extra <code>typedef</code>."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1426436557, "post_id": 28992960, "comment_id": 46362076, "body": "Isn&#39;t <code>clone()</code> widely regarded as broken? Anyway, as I already said, good practice would be to have such a typedef already, so it wouldn&#39;t be an <i>extra</i> typedef. Are you telling me you would really have an API defined in terms of a type like <code>vector&lt;vector&lt;vector&lt;tuple&lt;int,int,int&gt;&gt;&gt;</code> rather than a more descriptive typedef? You might want to reconsider that."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "reply_to_user": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 1, "creation_date": 1426438633, "post_id": 28992960, "comment_id": 46362810, "body": "@Jonathan: Given that <code>copy(x)</code> is a function named <i>copy</i>, you should probably explain why you think it&#39;s unclear whether it would copy something."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1426441238, "post_id": 28992960, "comment_id": 46363817, "body": "@Hurkyl, because without checking the definitions (or documentation) I don&#39;t know if it does something <i>else</i> as well (like register the object somewhere, or log the copy, or increment a counter of copies). Or maybe by analogy with <code>std::move</code> it doesn&#39;t copy at all, it just casts something to an lvalue! If the <code>copy</code> function is used throughout the codebase and is a local convention, that would be OK, it&#39;s just a local idiom to be learnt. If it&#39;s a one-off function used in one place just to create a copy to pass to a function, I would wonder why it wasn&#39;t simply <code>f(A{x})</code>."}], "answers": [{"comments": [{"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 2, "creation_date": 1426094322, "post_id": 28993120, "comment_id": 46234440, "body": "And a bonus copy on the return :-) (Which admittedly is almost certainly elided by the compiler.)"}, {"owner": {"reputation": 4972, "user_id": 1964342, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ce48e3381ac19802f017e34b80e0536c?s=128&d=identicon&r=PG", "display_name": "tohava", "link": "https://stackoverflow.com/users/1964342/tohava"}, "edited": false, "score": 0, "creation_date": 1426094380, "post_id": 28993120, "comment_id": 46234475, "body": "There&#39;s nothing in the standard library to do this?"}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "reply_to_user": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 7, "creation_date": 1426094431, "post_id": 28993120, "comment_id": 46234508, "body": "@AlanStokes It cannot be elided, since the source is a function parameter. It will be a move, though."}, {"owner": {"reputation": 4970, "user_id": 2140449, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/97251fac343628ee1aad92cc3da39d99?s=128&d=identicon&r=PG", "display_name": "DarioP", "link": "https://stackoverflow.com/users/2140449/dariop"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1426094887, "post_id": 28993120, "comment_id": 46234850, "body": "Here we go: <a href=\"http://coliru.stacked-crooked.com/a/f39b62487f4930d8\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/f39b62487f4930d8</a> this is a +1 for @dyp"}, {"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "reply_to_user": {"reputation": 2199, "user_id": 168802, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/09943daec8ac8cc7a4801b12d709cad0?s=128&d=identicon&r=PG", "display_name": "Freddy", "link": "https://stackoverflow.com/users/168802/freddy"}, "edited": false, "score": 0, "creation_date": 1426095033, "post_id": 28993120, "comment_id": 46234959, "body": "@Freddy There are no atomic variables here. But you are correct, as is dyp. (Assuming T has a move constructor, which we are told the original A does.)"}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 2, "creation_date": 1426096156, "post_id": 28993120, "comment_id": 46235686, "body": "A variant like <code>template&lt;typename T, std::enable_if_t&lt;std::is_lvalue_reference&lt;T&gt;{}&gt;* = nullptr&gt; T copy(T&amp;&amp; t) { return t; }</code> would eliminate the additional move. I&#39;ve chosen to restrict this to lvalues since I think it typically does not make sense for rvalues, and if it does, it might benefit from a more explicit <code>copy_rvalue_yes_really</code> function."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1426097983, "post_id": 28993120, "comment_id": 46236868, "body": "@dyp Why not <code>template&lt;class T&gt; std::remove_cv_t&lt;T&gt; copy(T&amp;t){return t;}</code>?"}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1426101592, "post_id": 28993120, "comment_id": 46239102, "body": "@Yakk Hmm that can still bind to rvalues, although only to const rvalues."}], "owner": {"reputation": 4970, "user_id": 2140449, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/97251fac343628ee1aad92cc3da39d99?s=128&d=identicon&r=PG", "display_name": "DarioP", "link": "https://stackoverflow.com/users/2140449/dariop"}, "is_accepted": false, "score": 8, "last_activity_date": 1426095264, "last_edit_date": 1426095264, "creation_date": 1426094118, "answer_id": 28993120, "question_id": 28992960, "link": "https://stackoverflow.com/questions/28992960/c11-shortest-way-to-explicitly-copy-a-value-to-use-as-an-rvalue-reference/28993120#28993120", "title": "C++11: shortest way to explicitly copy a value to use as an rvalue reference", "body": "<p>What about this?</p>\n\n<pre><code>template &lt;typename T&gt;\nT copy(T t) {return t;}\n</code></pre>\n\n<p>The copy is done when you pass <code>t</code> by value and a following move take place.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/cbc1a161f65a022b\" rel=\"noreferrer\">http://coliru.stacked-crooked.com/a/cbc1a161f65a022b</a></p>\n\n<hr>\n\n<p>If you can modify your function to:</p>\n\n<pre><code>void func(A) {}\n</code></pre>\n\n<p>then you can do</p>\n\n<pre><code>int main() {\n   A a;\n   func(a);            //copies\n   func(std::move(a)); //moves\n   return 0;\n}\n</code></pre>\n\n<p>Without any extra constructor call.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/1bc80bcce64f242f\" rel=\"noreferrer\">http://coliru.stacked-crooked.com/a/1bc80bcce64f242f</a></p>\n"}, {"comments": [{"owner": {"reputation": 4972, "user_id": 1964342, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ce48e3381ac19802f017e34b80e0536c?s=128&d=identicon&r=PG", "display_name": "tohava", "link": "https://stackoverflow.com/users/1964342/tohava"}, "edited": false, "score": 0, "creation_date": 1426094499, "post_id": 28993179, "comment_id": 46234558, "body": "-1 - I said I want to avoid having to write the type again, and I also want something generic enough to avoid adding a member function to each class."}, {"owner": {"reputation": 106, "user_id": 4647661, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/390a00af3624372efbef6ea47a288200?s=128&d=identicon&r=PG&f=1", "display_name": "jetstream", "link": "https://stackoverflow.com/users/4647661/jetstream"}, "reply_to_user": {"reputation": 4972, "user_id": 1964342, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ce48e3381ac19802f017e34b80e0536c?s=128&d=identicon&r=PG", "display_name": "tohava", "link": "https://stackoverflow.com/users/1964342/tohava"}, "edited": false, "score": 0, "creation_date": 1426095464, "post_id": 28993179, "comment_id": 46235243, "body": "&quot;Note: please don&#39;t tell me to add an overload f that does the copying.&quot;  Overloading=same name, different args. Read manual please. No overload in my answer and no request to not to add a member function. You can as well add my solution via an external header."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1426435566, "post_id": 28993179, "comment_id": 46361710, "body": "I agree this doesn&#39;t add an overload of <code>f</code> ... but it doesn&#39;t work either. You might want to actually return something from the <code>copy</code> member function. And why not just <code>A A::copy() const { return *this; }</code> ?"}, {"owner": {"reputation": 106, "user_id": 4647661, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/390a00af3624372efbef6ea47a288200?s=128&d=identicon&r=PG&f=1", "display_name": "jetstream", "link": "https://stackoverflow.com/users/4647661/jetstream"}, "edited": false, "score": 0, "creation_date": 1426524887, "post_id": 28993179, "comment_id": 46398055, "body": "You&#39;re right. my real answer (correct one) is:  <code>A A::copy(const A &amp;obj){return A::A(obj);}</code>  If you simply return a pointer to the this automatic pointer, the old values will not be cloned, but, instead, the pointer would be cloned. You&#39;ll have two pointers pointing at the same memory location, without actually copying the object pointed. Invoking the copy constructor you create a clone of the original object."}], "owner": {"reputation": 106, "user_id": 4647661, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/390a00af3624372efbef6ea47a288200?s=128&d=identicon&r=PG&f=1", "display_name": "jetstream", "link": "https://stackoverflow.com/users/4647661/jetstream"}, "is_accepted": false, "score": -3, "last_activity_date": 1426586494, "last_edit_date": 1426586494, "creation_date": 1426094296, "answer_id": 28993179, "question_id": 28992960, "link": "https://stackoverflow.com/questions/28992960/c11-shortest-way-to-explicitly-copy-a-value-to-use-as-an-rvalue-reference/28993179#28993179", "title": "C++11: shortest way to explicitly copy a value to use as an rvalue reference", "body": "<p>what about using copy constructor?\nYou can do something like:</p>\n\n<pre><code>A::A(const A &amp;obj){\n    //copy constructor here\n}\n\n// in external header\nvoid copy(const A &amp;obj){\n    return A::A(obj);\n}\n</code></pre>\n\n<p>Have fun</p>\n\n<p>gf</p>\n\n<p>EDIT after suggestions</p>\n"}, {"comments": [{"owner": {"reputation": 4972, "user_id": 1964342, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ce48e3381ac19802f017e34b80e0536c?s=128&d=identicon&r=PG", "display_name": "tohava", "link": "https://stackoverflow.com/users/1964342/tohava"}, "edited": false, "score": 0, "creation_date": 1426428617, "post_id": 28994539, "comment_id": 46359316, "body": "Ok, this doesn&#39;t work, I get an ambiguity between the <code>T &amp;</code> and the <code>T &amp;&amp;</code> version."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 4972, "user_id": 1964342, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ce48e3381ac19802f017e34b80e0536c?s=128&d=identicon&r=PG", "display_name": "tohava", "link": "https://stackoverflow.com/users/1964342/tohava"}, "edited": false, "score": 0, "creation_date": 1426439452, "post_id": 28994539, "comment_id": 46363154, "body": "@tohava compiler and version?  Argument?  There shoukd be a pref for <code>T&amp;</code> over <code>T&amp;&amp;</code>, but maybe I missed something.  Or are you talking about the <code>const</code> edit version you did?"}, {"owner": {"reputation": 4972, "user_id": 1964342, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ce48e3381ac19802f017e34b80e0536c?s=128&d=identicon&r=PG", "display_name": "tohava", "link": "https://stackoverflow.com/users/1964342/tohava"}, "edited": false, "score": 0, "creation_date": 1426441559, "post_id": 28994539, "comment_id": 46363919, "body": "I tried both with and without const. I am using gcc 4.8.2, and i am sending a variable that appears in a mutable lambda closure."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 4972, "user_id": 1964342, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ce48e3381ac19802f017e34b80e0536c?s=128&d=identicon&r=PG", "display_name": "tohava", "link": "https://stackoverflow.com/users/1964342/tohava"}, "edited": false, "score": 0, "creation_date": 1426466172, "post_id": 28994539, "comment_id": 46371389, "body": "@tohava Both <a href=\"http://coliru.stacked-crooked.com/a/c8ef3dc1bdf3b7b1\" rel=\"nofollow noreferrer\">clang</a> and <a href=\"http://ideone.com/kYss22\" rel=\"nofollow noreferrer\">gcc</a> seem to compile simple test versions fine.  An actual link to simplified code that isn&#39;t working would help me work out if I did a mistake, or if your compiler is non conforming, and/or if there is an easy fix."}], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 5, "last_activity_date": 1426427489, "last_edit_date": 1426427489, "creation_date": 1426098361, "answer_id": 28994539, "question_id": 28992960, "link": "https://stackoverflow.com/questions/28992960/c11-shortest-way-to-explicitly-copy-a-value-to-use-as-an-rvalue-reference/28994539#28994539", "title": "C++11: shortest way to explicitly copy a value to use as an rvalue reference", "body": "<pre><code>template&lt;class T&gt;\nstd::remove_cv_t&lt;T&gt; copy(T&amp; t) {\n  return t;\n}\ntemplate&lt;class T&gt;\nvoid copy(T&amp;&amp;)=delete; // block rvalue copy\ntemplate&lt;class T, size_t N&gt;\nvoid copy(T(&amp;)[N]) = delete; // we can implement this if we want: see below\n</code></pre>\n\n<p>will copy any lvalue.  On rvalues and non-copyable types (like arrays) it will fail to match or compile.</p>\n\n<pre><code>template&lt;class T&gt;\nstd::decay_t&lt;T&gt; copy_even_if_rvalue(T&amp;&amp; t) {\n  return std::forward&lt;T&gt;(t);\n}\nnamespace details {\n  template&lt;class T, size_t N, size_t...Is&gt;\n  std::array&lt;T, N&gt; copy_even_if_rvalue(T(&amp;arr)[N], std::index_sequence&lt;Is...&gt;)\n  {\n    return {{arr[Is]...}};\n  }\n}\ntemplate&lt;class T, size_t N&gt;\nstd::array&lt;T, N&gt; copy_even_if_rvalue(T(&amp;arr)[N]) {\n  return details::copy_even_if_rvalue(arr, std::make_index_sequence&lt;N&gt;{} );\n}\ntemplate&lt;class T, size_t N&gt;\nstd::array&lt;T, N&gt; copy_even_if_rvalue(T(&amp;&amp;arr)[N]) {\n  return copy_even_if_rvalue(arr); // forward to lvalue version\n}\n</code></pre>\n\n<p>will copy both rvalues and lvalues.  Usually <code>copy</code> is a smarter operation than <code>copy_even_if_rvalue</code> in my opinion.</p>\n\n<p><code>copy_even_if_rvalue</code> will convert raw C arrays into <code>std::array</code>s, because that is about the only sensible way to copy them.  An <code>=delete</code> overload would be the other reasonable option.</p>\n"}, {"comments": [{"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1426441020, "post_id": 29063185, "comment_id": 46363738, "body": "@Hurkyl, <code>f(A{x})</code> doesn&#39;t, and IMHO that&#39;s the optimal choice."}], "owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "is_accepted": false, "score": 0, "last_activity_date": 1426437310, "creation_date": 1426437310, "answer_id": 29063185, "question_id": 28992960, "link": "https://stackoverflow.com/questions/28992960/c11-shortest-way-to-explicitly-copy-a-value-to-use-as-an-rvalue-reference/29063185#29063185", "title": "C++11: shortest way to explicitly copy a value to use as an rvalue reference", "body": "<p>The <em>shortest</em> way is simply <code>f(A{x})</code></p>\n\n<p>If for some reason the type <code>A</code> is too long or ugly to type out, then this is still shorter than defining a new function at global scope:</p>\n\n<pre><code>f(std::decay_t&lt;decltype(x)&gt;(x));\n</code></pre>\n\n<p>Or without the C++14 alias template:</p>\n\n<pre><code>f(typename std::decay&lt;decltype(x)&gt;::type(x));\n</code></pre>\n"}], "owner": {"reputation": 4972, "user_id": 1964342, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ce48e3381ac19802f017e34b80e0536c?s=128&d=identicon&r=PG", "display_name": "tohava", "link": "https://stackoverflow.com/users/1964342/tohava"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "accepted_answer_id": 28994539, "answer_count": 4, "score": 4, "last_activity_date": 1426586494, "creation_date": 1426093683, "question_id": 28992960, "link": "https://stackoverflow.com/questions/28992960/c11-shortest-way-to-explicitly-copy-a-value-to-use-as-an-rvalue-reference", "title": "C++11: shortest way to explicitly copy a value to use as an rvalue reference", "body": "<p>I have a function</p>\n\n<pre><code>class A { &lt;has copy and move constructors &gt; };\n\nvoid f(A &amp;&amp;a) { ... }\n</code></pre>\n\n<p>I want to call the function f with a variable <code>x</code>, but I want to run <code>f</code> on a copy of <code>x</code>, not <code>x</code> itself. Why can't I do something like this?</p>\n\n<pre><code>f(copy(x));\n</code></pre>\n\n<p>But instead must do</p>\n\n<pre><code>f(A(x));\n</code></pre>\n\n<p>Is there anything similar to the <code>copy</code> function I describe above?</p>\n\n<p>Note: please don't tell me to add an overload <code>f</code> that does the copying, I want something that doesn't require an overload and is explicit (i.e. <code>copy</code> makes it clear to the reader that copying is done here)</p>\n"}, {"tags": ["c++", "cocos2d-iphone", "cocos2d-x", "word-wrap"], "answers": [{"comments": [{"owner": {"reputation": 11096, "user_id": 541208, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2dfc2e563d2150994a6e06ef37f9e7be?s=128&d=identicon&r=PG", "display_name": "TankorSmash", "link": "https://stackoverflow.com/users/541208/tankorsmash"}, "edited": false, "score": 0, "creation_date": 1498237945, "post_id": 28995538, "comment_id": 76435937, "body": "Note that the way to do this with BMFonts work the same way <code>static_cast&lt;Label*&gt;(my_ui_TextBMFont_widget-&gt;getVirtualRende&zwnj;&#8203;rer())-&gt;setDimension&zwnj;&#8203;s(375, 0);</code>"}, {"owner": {"reputation": 1362, "user_id": 1576467, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/712d832cab0856d26ac5132c1560ccdb?s=128&d=identicon&r=PG", "display_name": "GameSalutes", "link": "https://stackoverflow.com/users/1576467/gamesalutes"}, "edited": false, "score": 0, "creation_date": 1525649840, "post_id": 28995538, "comment_id": 87427924, "body": "If using cocos2d::Text instead of label use the same strategy as above but use <code>setTextAreaSize</code> instead of <code>setContentSize</code>"}], "owner": {"reputation": 575, "user_id": 2314016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hUm8h.jpg?s=128&g=1", "display_name": "Rajeev", "link": "https://stackoverflow.com/users/2314016/rajeev"}, "is_accepted": true, "score": 7, "last_activity_date": 1426101763, "creation_date": 1426101763, "answer_id": 28995538, "question_id": 28992823, "link": "https://stackoverflow.com/questions/28992823/text-wrapping-in-cocos2d-x/28995538#28995538", "title": "Text Wrapping in Cocos2d-x", "body": "<p>I believe, you can only make one dimension of the label auto-resizable i.e. either width or height can be auto-resizable. By default when you create label as follows, width of the labels are set to resize automatically with fixed height:</p>\n\n<pre><code>auto label = Label::createWithTTF(\"Hello World gsdhsgdh gshdghsg yutywe gdgshdgy bnbjh hshhashgy hjnbdnsdhh ghhsgdhg ghghghsd ghhghsd ghghghgsd jkjkhsdjkj ououisdusydsi kkjkxncmxcjh kcxhjxhcjx jkuiushjxchxjch hjhjchxuyuychjc \", \"fonts/Marker Felt.ttf\", 24);\n// position the label on the center of the screen\nlabel-&gt;setPosition(Vec2(origin.x + visibleSize.width/2,\n                            origin.y + visibleSize.height - label-&gt;getContentSize().height));\n\n// add the label as a child to this layer\nthis-&gt;addChild(label, 1);\n</code></pre>\n\n<p>But if you want multi-line support i.e. fixed width and resizable height you just need to set dimension of the label with fixed width and zero height as:</p>\n\n<pre><code>label-&gt;setDimensions(300, 0);\n</code></pre>\n\n<p>I hope it will help.</p>\n"}], "owner": {"reputation": 127, "user_id": 3583285, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5b281c5c068f6a317e1910c4aec7334d?s=128&d=identicon&r=PG&f=1", "display_name": "OhlPatrol", "link": "https://stackoverflow.com/users/3583285/ohlpatrol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3928, "favorite_count": 2, "accepted_answer_id": 28995538, "answer_count": 1, "score": 5, "last_activity_date": 1426101763, "creation_date": 1426093284, "question_id": 28992823, "link": "https://stackoverflow.com/questions/28992823/text-wrapping-in-cocos2d-x", "title": "Text Wrapping in Cocos2d-x", "body": "<p>I am trying to get my text labels to automatically resize if the text is longer than the box they are in. I also want it to support multi-line functionality. I have done some searching online and saw that it used to work something like this:</p>\n\n<pre><code>CCLabelTTF::labelWithString(\u201cThis is a sentence longer than a line width.2d-x\u201d, CGSizeMake(**0, 0**), UITextAlignmentCenter, \u201cThonburi\u201d, 20);\n</code></pre>\n\n<p>but that seems to no longer be available in cocos so I am not sure what to do.. Right now I have my label set up as follows:</p>\n\n<pre><code>myQuestion = Label::createWithTTF(\"Testing to see if text wrap will work\" ,c_strFontNameBase, 50);\nmyQuestion-&gt;setPosition(boxLabel-&gt;getContentSize().width/2, boxLabel-&gt;getContentSize().height/2);\nboxLabel-&gt;addChild(myQuestion, 50);\n</code></pre>\n\n<p>Is there some way I can use a similar way to the top example to make mine work? This doesn't seem like it should be  very hard thing to do but I am finding a lack of documentation on it online...</p>\n"}, {"tags": ["c++", "visual-studio", "audio", "mingw"], "answers": [{"owner": {"reputation": 154, "user_id": 2194232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af8f3afa8a5b0ae572bb6d08fb93223f?s=128&d=identicon&r=PG", "display_name": "Griffan", "link": "https://stackoverflow.com/users/2194232/griffan"}, "is_accepted": true, "score": 2, "last_activity_date": 1426094850, "creation_date": 1426094850, "answer_id": 28993361, "question_id": 28992647, "link": "https://stackoverflow.com/questions/28992647/undefined-reference-to-ksdataformat-subtype-pcm/28993361#28993361", "title": "undefined reference to `KSDATAFORMAT_SUBTYPE_PCM&#39;", "body": "<p>It looks like KSDATAFORMAT_SUBTYPE_PCM is a function pointer.\nIf you are pretty sure you have included all the libraries needed, I suggest you to rearrange the linking order of the libraries. Because g++(not sure if mingw also does) would look through you linking files and get what it wants, and ignores the rest. sometimes, if the order is wrong, the libraries in the behind depending on the previous libraries, this could cause what you saw.</p>\n"}, {"comments": [{"owner": {"reputation": 49960, "user_id": 32453, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/bec38d63650c8912b6ba9b557fb953b9?s=128&d=identicon&r=PG", "display_name": "rogerdpack", "link": "https://stackoverflow.com/users/32453/rogerdpack"}, "edited": false, "score": 0, "creation_date": 1452044289, "post_id": 33215153, "comment_id": 56994266, "body": "NB if you are cross compiling you&#39;ll need to use the &quot;right&quot; nm like <code>i686-w64-mingw32-gcc-nm</code> however for me a grep was enough, you found me the right lib for KSDATAFORMAT_SUBTYPE_BDA_MPEG2_TRANSPORT thank you!"}], "owner": {"reputation": 31, "user_id": 5462911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/932b06cdbd4f3542ffc58cb1d013fdcf?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Freeman", "link": "https://stackoverflow.com/users/5462911/mike-freeman"}, "is_accepted": false, "score": 3, "last_activity_date": 1452044324, "last_edit_date": 1452044324, "creation_date": 1445259728, "answer_id": 33215153, "question_id": 28992647, "link": "https://stackoverflow.com/questions/28992647/undefined-reference-to-ksdataformat-subtype-pcm/33215153#33215153", "title": "undefined reference to `KSDATAFORMAT_SUBTYPE_PCM&#39;", "body": "<p>you should link libksuser.a (ex: <code>-lksuser</code>) to get KSDATAFORMAT_SUBTYPE_PCM .\nthere is very few document about symbol belongs which library so I wrote a little script to help search the lib you should link</p>\n\n<pre><code>#!/bin/sh\n\n for lib in `ls /mingw64/x86_64-w64-mingw32/lib/*.a`\n do\n    echo \"search in $lib\"\n    nm $lib | grep KSDATAFORMAT_SUBTYPE_PCM\n done\n</code></pre>\n\n<p>feel free to change the library location and the symbol you want to search</p>\n"}], "owner": {"reputation": 3558, "user_id": 4589819, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d29fd6d2f29e22c18d200b5108b2ed99?s=128&d=identicon&r=PG&f=1", "display_name": "James Franco", "link": "https://stackoverflow.com/users/4589819/james-franco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 736, "favorite_count": 0, "accepted_answer_id": 28993361, "answer_count": 2, "score": 1, "last_activity_date": 1452044324, "creation_date": 1426092725, "last_edit_date": 1426094412, "question_id": 28992647, "link": "https://stackoverflow.com/questions/28992647/undefined-reference-to-ksdataformat-subtype-pcm", "title": "undefined reference to `KSDATAFORMAT_SUBTYPE_PCM&#39;", "body": "<p>I am porting some code from Visual Studio to Mingw . When attempting to build the code I got the following linker error</p>\n\n<pre><code> undefined reference to `KSDATAFORMAT_SUBTYPE_PCM'\n</code></pre>\n\n<p>This is the piece of code that is causing the problem</p>\n\n<pre><code>                WAVEFORMATEXTENSIBLE *pex = reinterpret_cast&lt;WAVEFORMATEXTENSIBLE*&gt;(new char[sizeof(WAVEFORMATEXTENSIBLE)]);\n\n                ZeroMemory( pex, sizeof(*pex));\n\n                pex-&gt;Format.nChannels = channels;\n                pex-&gt;Format.nSamplesPerSec = samplesPerSec;\n                pex-&gt;Format.nAvgBytesPerSec = samplesPerSec * blockAlign;\n                pex-&gt;Format.wBitsPerSample = bitsPerSample;\n                pex-&gt;Format.nBlockAlign =blockAlign;\n\n                pex-&gt;Format.wFormatTag = WAVE_FORMAT_EXTENSIBLE;\n                pex-&gt;Format.cbSize = sizeof(*pex)-sizeof(pex-&gt;Format);\n\n                pex-&gt;Samples.wValidBitsPerSample = bitsPerSample;\n\n                pex-&gt;SubFormat = KSDATAFORMAT_SUBTYPE_PCM; // &lt;--- ERROR\n</code></pre>\n\n<p>It seems like I need to put in the name of library file to get rid of this linker error. Any suggestions on how I could resolve this ? I have already added dsound , winmm , ks , ksuser,ksguid and ole32 to the linker options but I am still getting that error.</p>\n"}, {"tags": ["c++", "opengl"], "answers": [{"owner": {"reputation": 49036, "user_id": 3530129, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IYkz8.jpg?s=128&g=1", "display_name": "Reto Koradi", "link": "https://stackoverflow.com/users/3530129/reto-koradi"}, "is_accepted": true, "score": 0, "last_activity_date": 1426093534, "creation_date": 1426093534, "answer_id": 28992915, "question_id": 28992528, "link": "https://stackoverflow.com/questions/28992528/c-opengl-glutsphere-location-issue/28992915#28992915", "title": "C++ OpenGL Glutsphere location issue", "body": "<p>Most of OpenGL acts as a state machine, which means that settings \"stick\" until you change them again. This includes the transformation state. So when you call:</p>\n\n<pre><code>glTranslatef(0.20,0.27,0.0);\n</code></pre>\n\n<p><strong>everything</strong> that you draw after this point will be translated. And if you call <code>glTranslatef()</code> multiple times, the transformations are accumulated, meaning that you will translate more and more.</p>\n\n<p>If this is not the behavior you want, you have to restore the transformation to the previous state after you draw your sphere. The easiest way to do this is with <code>glPushMatrix()</code>/<code>glPopMatrix()</code>. Transformation matrices in legacy OpenGL are managed as a stack, and pushing/popping the matrix will restore the previous state.</p>\n\n<p>The code around drawing the sphere will then look like this:</p>\n\n<pre><code>glPushMatrix();\nglTranslatef(0.2f, 0.27f , 0.0f);\nglutSolidSphere(0.06, 20, 20);\nglPopMatrix();\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 4296758, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-kWpdB2WwXxU/AAAAAAAAAAI/AAAAAAAAAEw/R1iGQxMoh00/photo.jpg?sz=128", "display_name": "farid rozman", "link": "https://stackoverflow.com/users/4296758/farid-rozman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 28992915, "answer_count": 1, "score": 0, "last_activity_date": 1426093534, "creation_date": 1426092379, "question_id": 28992528, "link": "https://stackoverflow.com/questions/28992528/c-opengl-glutsphere-location-issue", "title": "C++ OpenGL Glutsphere location issue", "body": "<p>i have a problem regarding my OpenGL code, i try to use</p>\n\n<blockquote>\n  <p>glTranslatef </p>\n</blockquote>\n\n<p>just to renew my glutsolidsphere location but whatever i try to change.. it make all other unnecessary object move to and it to to the edge of the windows screen setting but it turn out like this..\"<a href=\"http://imgur.com/ONiqOzD\" rel=\"nofollow\">the image</a>\" .it move all my other object.. what wrong with my code?  </p>\n\n<pre><code>/* * hello.c * This is a simple, \nintroductory OpenGL program. */ \n#include &lt;GL/glut.h&gt; \n\nvoid display(void) \n{\n/* clear all pixels */ \nglClear (GL_COLOR_BUFFER_BIT); \n/* draw white polygon (rectangle) with corners at \n*(0.25, 0.25, 0.0) and (0.75, 0.75, 0.0) */ \nglColor3f (1.0, 0.0, 0.0); \nglBegin(GL_TRIANGLES); \nglVertex3f (0.50, 0.70, 0.0); \nglVertex3f (0.40, 0.60, 0.0); \nglVertex3f (0.60, 0.60, 0.0);  \nglEnd();\nglFlush ();\n\nglColor3f (0.0, 1.0, 0.0); \nglBegin(GL_POLYGON); \nglVertex3f (0.40, 0.20, 0.0); \nglVertex3f (0.60, 0.20, 0.0); \nglVertex3f (0.60, 0.40, 0.0);\nglVertex3f (0.40, 0.40, 0.0);  \nglEnd();\nglFlush ();\n\nglColor3f (0.0, 1.0, 1.0); \nglBegin(GL_POLYGON); \nglVertex3f (0.30, 0.30, 0.0); \nglVertex3f (0.32, 0.30, 0.0); \nglVertex3f (0.40, 0.38, 0.0);\nglVertex3f (0.40, 0.40, 0.0);\nglVertex3f (0.30, 0.40, 0.0);\nglEnd();\nglFlush ();\n\nglColor3f (0.0, 1.0, 1.0); \nglBegin(GL_POLYGON); \nglVertex3f (0.60, 0.38, 0.0); \nglVertex3f (0.68, 0.30, 0.0); \nglVertex3f (0.70, 0.30, 0.0);\nglVertex3f (0.70, 0.40, 0.0);\nglVertex3f (0.60, 0.40, 0.0);\nglEnd();\nglFlush ();\n\nglColor3f (0.0, 0.0, 1.0); \nglBegin(GL_LINE_STRIP); \nglVertex3f (0.25, 0.24, 0.0);\nglVertex3f (0.30, 0.29, 0.0);\nglVertex3f (0.35, 0.24, 0.0); \nglVertex3f (0.40, 0.29, 0.0); \nglVertex3f (0.45, 0.24, 0.0);\nglVertex3f (0.50, 0.29, 0.0);\nglVertex3f (0.55, 0.24, 0.0);\nglVertex3f (0.60, 0.29, 0.0); \nglVertex3f (0.65, 0.24, 0.0);\nglVertex3f (0.70, 0.29, 0.0);\nglVertex3f (0.75, 0.24, 0.0);\nglEnd();\nglFlush ();\n\nglColor3f (0.0, 1.0, 1.0); \nglBegin(GL_LINE_STRIP); \nglVertex3f (0.25, 0.19, 0.0);\nglVertex3f (0.30, 0.24, 0.0);\nglVertex3f (0.35, 0.19, 0.0); \nglVertex3f (0.40, 0.24, 0.0); \nglVertex3f (0.45, 0.19, 0.0);\nglVertex3f (0.50, 0.24, 0.0);\nglVertex3f (0.55, 0.19, 0.0);\nglVertex3f (0.60, 0.24, 0.0); \nglVertex3f (0.65, 0.19, 0.0);\nglVertex3f (0.70, 0.24, 0.0);\nglVertex3f (0.75, 0.19, 0.0);\nglEnd();\nglFlush ();\n\nglColor3f (0.0, 0.0, 1.0); \nglBegin(GL_LINE_STRIP); \nglVertex3f (0.25, 0.14, 0.0);\nglVertex3f (0.30, 0.19, 0.0);\nglVertex3f (0.35, 0.14, 0.0); \nglVertex3f (0.40, 0.19, 0.0); \nglVertex3f (0.45, 0.14, 0.0);\nglVertex3f (0.50, 0.19, 0.0);\nglVertex3f (0.55, 0.14, 0.0);\nglVertex3f (0.60, 0.19, 0.0); \nglVertex3f (0.65, 0.14, 0.0);\nglVertex3f (0.70, 0.19, 0.0);\nglVertex3f (0.75, 0.14, 0.0);\nglEnd();\nglFlush ();\n\nglColor3f (1.0, 1.0, 0.0); \nglTranslatef(0.20,0.27,0.0);\nglutSolidSphere(0.06, 20, 20); \nglFlush ();\n/* don't wait! \n* start processing buffered OpenGL routines */ \n} \nvoid init (void) \n{ \n/* select clearing color */ \nglClearColor (1.0, 1.0, 1.0, 1.0);\n/* initialize viewing values */ \nglMatrixMode(GL_PROJECTION); \nglLoadIdentity(); \nglOrtho(0.0, 1.0, 0.0, 1.0, -1.0, 1.0); \n}\n/* \n* Declare initial window size, position, and display mode \n* (single buffer and RGBA). Open window with \"hello\" \n* in its title bar. Call initialization routines. \n* Register callback function to display graphics. \n* Enter main loop and process events. */ \nint main(int argc, char** argv) \n{ \nglutInit(&amp;argc, argv); \nglutInitDisplayMode (GLUT_SINGLE | GLUT_RGB); \nglutInitWindowSize (900, 600); \nglutInitWindowPosition (50, 100); \nglutCreateWindow (\"hello\"); \ninit (); \nglutDisplayFunc(display); \nglutMainLoop(); \nreturn 0; \n/* ANSI C requires main to return int. */ \n}\n</code></pre>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 1, "creation_date": 1426092100, "post_id": 28992276, "comment_id": 46232883, "body": "Just curious: what is the reason for such hierarchy?"}, {"owner": {"reputation": 57058, "user_id": 476681, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/v9mVv.jpg?s=128&g=1", "display_name": "B\u0408\u043e\u0432\u0438\u045b", "link": "https://stackoverflow.com/users/476681/b%d0%88%d0%be%d0%b2%d0%b8%d1%9b"}, "edited": false, "score": 3, "creation_date": 1426092894, "post_id": 28992276, "comment_id": 46233430, "body": "What?!? QWidget inherits publicly from QObject"}, {"owner": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "edited": false, "score": 2, "creation_date": 1426098318, "post_id": 28992276, "comment_id": 46237074, "body": "<code>QWidget::setParent(QWidget*)</code> hides <code>QObject::setParent(QObject*)</code>."}, {"owner": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "edited": false, "score": 2, "creation_date": 1426098437, "post_id": 28992276, "comment_id": 46237140, "body": "<code>static_cast</code> would be more appropriate. Or <code>w-&gt;QObject::setParent(o);</code>."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1426099808, "post_id": 28992276, "comment_id": 46238033, "body": "For those voting to close this as &quot;unclear&quot; - please, don&#39;t. It&#39;s a perfectly clear question! A <i>related</i> one is <a href=\"http://stackoverflow.com/q/1585998/1329652\">stackoverflow.com/q/1585998/1329652</a> - but they are <i>not</i> duplicates, I don&#39;t think."}], "answers": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": true, "score": 12, "last_activity_date": 1532972275, "last_edit_date": 1532972275, "creation_date": 1426100089, "answer_id": 28995049, "question_id": 28992276, "link": "https://stackoverflow.com/questions/28992276/what-are-consequences-of-forcing-qobject-as-a-parent-of-qwidget/28995049#28995049", "title": "What are consequences of forcing QObject as a parent of QWidget?", "body": "<blockquote>\n  <p>What are consequences of forcing QObject as a parent of QWidget?</p>\n</blockquote>\n\n<p>Irrevocable undefined behavior.</p>\n\n<p>Qt is not designed to support a non-widget parent to a <code>QWidget</code>. I consider it an API bug in Qt, since a <code>QWidget</code> isn't fully a <code>QObject</code> in the Liskov Substitution Principle sense because of that limitation.</p>\n\n<p>Qt 4.x will crash when attempting to activate the widget. So it'll work until you focus your application and then will crash.</p>\n\n<p>Qt 5.x asserts in <code>QObject::setParent()</code>.</p>\n\n<p>The assertion can be bypassed, though:</p>\n\n<pre><code>// https://github.com/KubaO/stackoverflown/tree/master/questions/widget-parent-28992276\n#include &lt;QApplication&gt;\n#include &lt;QLabel&gt;\n\nclass ParentHacker : private QWidget {\npublic:\n   static void setParent(QWidget * child_, QObject * parent) {\n      // The following line invokes undefined behavior\n      auto child = static_cast&lt;ParentHacker*&gt;(child_);\n      Q_ASSERT(child-&gt;d_ptr-&gt;isWidget);\n      child-&gt;d_ptr-&gt;isWidget = 0;\n      child-&gt;QObject::setParent(parent);\n      child-&gt;d_ptr-&gt;isWidget = 1;\n   }\n};\n\nint main(int argc, char ** argv) {\n   QApplication app{argc, argv};\n   QLabel w{\"Hello!\"};\n   w.setMinimumSize(200, 100);\n   w.show();\n   ParentHacker::setParent(&amp;w, &amp;app);\n   return app.exec();\n}\n</code></pre>\n\n<p>It will crash somewhere else then.</p>\n\n<p>You'd be fighting an uphill battle trying to patch Qt to get it to work. It's not a worthwhile fight, I think - not unless a decision is made to make a <code>QWidget</code> truly-a <code>QObject</code> and change its constructor signature. That can be done at the earliest in Qt 6 since it's a binary-incompatible change AFAIK.</p>\n\n<p>Moreover, what you're trying to do is mostly unnecessary. You can certainly have a hidden <code>QWidget</code> parent to multiple stand-alone top-level widgets.</p>\n\n<pre><code>#include &lt;QApplication&gt;\n#include &lt;QLabel&gt;\n\nint main(int argc, char ** argv) {\n   QApplication app{argc, argv};\n   QWidget parent;\n   QLabel l1{\"Close me to quit!\"}, l2{\"Hello!\"};\n   for (auto label : {&amp;l1, &amp;l2}) {\n      label-&gt;setMinimumSize(200, 100);\n      label-&gt;setParent(&amp;parent);\n      label-&gt;setWindowFlags(Qt::Window);\n      label-&gt;setText(QString(\"%1 Parent: %2.\").\n                     arg(label-&gt;text()).arg((quintptr)label-&gt;parent(), 0, 16));\n      label-&gt;show();\n   }\n   l2.setAttribute(Qt::WA_QuitOnClose, false);\n   return app.exec();\n}\n</code></pre>\n\n<p>The overhead of having the widget hidden is minimal, you're not wasting any resources by using a <code>QWidget</code> instead of a <code>QObject</code> for the parent.</p>\n"}], "owner": {"reputation": 3775, "user_id": 605106, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/876891efe23b98815165995e80a74e1c?s=128&d=identicon&r=PG", "display_name": "rmflow", "link": "https://stackoverflow.com/users/605106/rmflow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1844, "favorite_count": 2, "accepted_answer_id": 28995049, "answer_count": 1, "score": 8, "last_activity_date": 1532972275, "creation_date": 1426091683, "question_id": 28992276, "link": "https://stackoverflow.com/questions/28992276/what-are-consequences-of-forcing-qobject-as-a-parent-of-qwidget", "title": "What are consequences of forcing QObject as a parent of QWidget?", "body": "<p>The following code compiles perfectly:</p>\n\n<pre><code>QObject* o = new QObject(0);\nQWidget* w = new QWidget(0);\nqobject_cast&lt;QObject*&gt;(w)-&gt;setParent(o);\n</code></pre>\n\n<p>I cannot legally set <code>QObject</code> as a parent of <code>QWidget</code>. But using <code>qobject_cast</code> it is possible. Are there negative consequences?</p>\n"}, {"tags": ["c++", "templates", "template-templates"], "comments": [{"owner": {"reputation": 8029, "user_id": 3137499, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7acff2bbbdb9c51ea478377a0f6dcb03?s=128&d=identicon&r=PG&f=1", "display_name": "aruisdante", "link": "https://stackoverflow.com/users/3137499/aruisdante"}, "edited": false, "score": 0, "creation_date": 1426092510, "post_id": 28992265, "comment_id": 46233156, "body": "I think reading through this QA: <a href=\"http://stackoverflow.com/questions/213761/what-are-some-uses-of-template-template-parameters-in-c\" title=\"what are some uses of template template parameters in c\">stackoverflow.com/questions/213761/&hellip;</a> will help guide why there wouldn&#39;t be any use in naming the template-template parameter. TTP&#39;s are essentially declaring the signature of a templated argument, not providing the templated method with additional template arguments. Similar to when you declare a functor, it&#39;s <code>(*foo)(type, type type)</code>, not <code>(*foo)(type name, type name, type name)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1426093078, "post_id": 28992608, "comment_id": 46233562, "body": "That&#39;s very similar to function declarations, by the way. The following illustrates the analogy by producing a compiler error: <code>void f(int x, decltype(x)); int main() { f(1, nullptr); }</code>. The following compiles and links fine: <code>void f(int x, decltype(x)); int main() { f(1, 1); } void f(int, int) {} </code>. That&#39;s because the scope of <code>x</code> is just enough to encompass the <code>decltype</code> that comes after it."}, {"owner": {"reputation": 11552, "user_id": 499359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Xrx9K.gif?s=128&g=1", "display_name": "PaperBirdMaster", "link": "https://stackoverflow.com/users/499359/paperbirdmaster"}, "edited": false, "score": 0, "creation_date": 1426146963, "post_id": 28992608, "comment_id": 46255341, "body": "Ok, so I was mistaken: the named parameter of template-template parameter isn&#39;t ignored, it simply doesn&#39;t exists outside its template-template class... the only use I can think of named template-template parameters is the following:  <code>template &lt;template &lt;typename T, typename = std::allocator&lt;T&gt;&gt; class V&gt; class f {};</code>"}], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 10, "last_activity_date": 1426092627, "creation_date": 1426092627, "answer_id": 28992608, "question_id": 28992265, "link": "https://stackoverflow.com/questions/28992265/is-there-any-use-for-named-parameters-into-template-template-parameters/28992608#28992608", "title": "Is there any use for named parameters into template template parameters", "body": "<p>[basic.scope.temp]/p1:</p>\n\n<blockquote>\n  <p>The declarative region of the name of a template parameter of a\n  template <em>template-parameter</em> is the smallest <em>template-parameter-list</em>\n  in which the name was introduced.</p>\n</blockquote>\n\n<p><sub>(Now try saying that 10 times.)</sub></p>\n\n<p>It can be used inside that list. For instance,</p>\n\n<pre><code>template &lt; template&lt;class T, T t&gt; class TP &gt; class foo {};\n//                           ^  ^-----T's scope ends here\n//                           |\n//                           T can be used here\n\nfoo&lt;std::integral_constant&gt; bar;\n</code></pre>\n"}], "owner": {"reputation": 11552, "user_id": 499359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Xrx9K.gif?s=128&g=1", "display_name": "PaperBirdMaster", "link": "https://stackoverflow.com/users/499359/paperbirdmaster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1019, "favorite_count": 2, "accepted_answer_id": 28992608, "answer_count": 1, "score": 11, "last_activity_date": 1427331291, "creation_date": 1426091657, "last_edit_date": 1427331291, "question_id": 28992265, "link": "https://stackoverflow.com/questions/28992265/is-there-any-use-for-named-parameters-into-template-template-parameters", "title": "Is there any use for named parameters into template template parameters", "body": "<p>If I need to define a template <code>foo</code> function with a template-template parameter, I usually do the following:</p>\n\n<pre><code>// Notice that the template parameter of class T is unnamed.\ntemplate &lt;template &lt;typename&gt; class T&gt; void f() { std::cout &lt;&lt; \"Yay!\\n\"; }\n</code></pre>\n\n<p>Notice that the template parameter of the template-template parameter is unnamed, but we can assign a name to this parameter:</p>\n\n<pre><code>// Now the template parameter of class T is named INNER.\ntemplate &lt;template &lt;typename INNER&gt; class T&gt; void f(const INNER &amp;inner)\n{ std::cout &lt;&lt; inner &lt;&lt; \" Yay!\\n\"; }\n</code></pre>\n\n<p>This doesn't seems to be usefull at all, because I cannot reffer the <code>INNER</code> parameter in the function, the code above produces the following error:</p>\n\n<blockquote>\n  <p>error: 'INNER' does not name a type</p>\n</blockquote>\n\n<p>It surprises me that the <code>typename INNER</code> doesn't name a type, after all the <code>typename</code> keyword is there in order to naming a type. Anyway, this is easy to fix though:</p>\n\n<pre><code>// Now INNER is the name of the template parameter of class T and also\n// the name of the second template parameter of foo.\ntemplate &lt;template &lt;typename INNER&gt; class T, typename INNER&gt; void f(const INNER &amp;inner)\n{ std::cout &lt;&lt; inner &lt;&lt; \" Yay!\\n\"; }\n// ...\nf&lt;std::valarray, int&gt;(666); // Prints \"666 Yay!\"\n</code></pre>\n\n<p>But in the end, the <code>INNER</code> parameter doesn't need a name after all:</p>\n\n<pre><code>// Now the template parameter of class T is unnamed one more time,\n// INNER is the name of the second template parameter of foo.\ntemplate &lt;template &lt;typename&gt; class T, typename INNER&gt; void f(const INNER &amp;inner)\n{ std::cout &lt;&lt; inner &lt;&lt; \" Yay!\\n\"; }\n// ...\nf&lt;std::valarray, int&gt;(666); // Prints \"666 Yay!\"\n</code></pre>\n\n<p>And (sure you already noticed before me) the name in the parameter of the template-template parameter is ignored! It sure have been ignored because if not it should have a name-clash with the second template parameter of <code>foo</code>, doesn't it?</p>\n\n<p>Another demonstration of the name of the parameter of the template-template parameter being ignored:</p>\n\n<pre><code>// Now T is the name of the template parameter of class T and also\n// the name of the template parameter of foo!\ntemplate &lt;template &lt;typename T&gt; class T&gt; void f()\n{ std::cout &lt;&lt; \"Yay!\\n\"; }\n// ...\nf&lt;std::valarray&gt;(); // prints \"Yay!\"\n</code></pre>\n\n<p>The type named <code>T</code> is being used by the template-template parameter and by the template-template itself at the same time? I don't think so, the name into the template-template parameter is ignored AFAIK.</p>\n\n<p>So, what's the question?</p>\n\n<ol>\n<li>Are my guess correct? The names of named template parameters of template-template parameters are ignored?</li>\n<li>If I'm mistaken and I've misunderstood the whole thing, there's a use for the named parameters into the template-template parameters? Can you provide some useful examples?</li>\n</ol>\n\n<p>As for <em>useful examples</em> on #2 i'm referring to something that only could be achieved using the named template parameters of template-template parameters.</p>\n"}, {"tags": ["c++", "winapi", "window", "cursor"], "comments": [{"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 0, "creation_date": 1426092000, "post_id": 28992184, "comment_id": 46232814, "body": "Just <code>return false</code> to say you haven&#39;t processed the message, to let <code>DefWindowProc</code> get on with what it normally does."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1426109981, "post_id": 28992184, "comment_id": 46243883, "body": "This is even stated in comments on the <code>WM_SETCURSOR</code> <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms648382.aspx\" rel=\"nofollow noreferrer\">documentation</a>: <i>&quot;In most cases you should only set the cursor if LOWORD(lParam) is HTCLIENT, meaning the client area of the window. For the nonclient area, let Windows set the cursor.&quot;</i>"}], "owner": {"reputation": 491, "user_id": 3012194, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0fa3858dbb269cc422e5e5ff251686e4?s=128&d=identicon&r=PG&f=1", "display_name": "Scam", "link": "https://stackoverflow.com/users/3012194/scam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 778, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1426091446, "creation_date": 1426091446, "last_edit_date": 1495534197, "question_id": 28992184, "link": "https://stackoverflow.com/questions/28992184/win32-show-custom-cursor-only-in-client-area", "title": "WIn32: Show custom cursor only in client area", "body": "<p>Is there a way to show custom cursor only in client area? I'd like to show standard Windows resize cursors when user wants to resize the window and and normal arrow when mouse is on the title bar.</p>\n\n<p>Basically the cursor should behave on non-client area like it behaves in an application which does not have a custom cursor.</p>\n\n<p>My idea of <code>WM_SETCURSOR</code> handling is below.</p>\n\n<pre><code>    case WM_SETCURSOR:\n    {\n        if (m_showMouseCursor)\n        {\n            if(LOWORD(lParam) == HTCLIENT)\n            {\n                SetCursor(m_cursor); //Use custom cursor\n            }\n            else\n            {\n                //Not in client area -\n                //what I have to call here?\n            }\n            ShowCursor(true);\n            return true;\n         }\n    }\n    break;\n</code></pre>\n\n<p>In an <a href=\"https://stackoverflow.com/questions/3560201/c-cursor-changes-to-hour-glass-using-wm-setcursor\">older question</a> the changing of cursors is made by handling all the used cursors explicitly. I was wondering if there is a cleaner way to implement this?</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 0, "creation_date": 1426091593, "post_id": 28992045, "comment_id": 46232549, "body": "Windows doesn&#39;t have an exact equivalent of the Unix <code>exec</code> functionality. On Windows one process ends and another starts; on Unix there is only ever one process."}], "owner": {"reputation": 11, "user_id": 4659313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1c0c94039f5f5f74fcae1f908adc936?s=128&d=identicon&r=PG&f=1", "display_name": "Anta Fuli", "link": "https://stackoverflow.com/users/4659313/anta-fuli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1426091030, "creation_date": 1426091030, "question_id": 28992045, "link": "https://stackoverflow.com/questions/28992045/calling-execv-inside-a-qprocess-triggers-finished-signal-under-windows-only", "title": "Calling execv inside a QProcess triggers finished() signal under Windows only", "body": "<p>I wrote this example to illustrate a difference between linux and windows on process handling.</p>\n\n<p>My main application starts a sub-app by calling QProcess::start(). If this sub-process restarts itself by calling execv (_execv under Windows), the finished() signal is triggered on the top application only under Windows. In my case, this is unexpected.</p>\n\n<p>Is there a way to avoid this signal, or this is a QProcess bug?</p>\n\n<p>Mathieu</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include \"mainwindow.h\"\n#include \"ui_mainwindow.h\"\n#include &lt;QDebug&gt;\n\nMainWindow::MainWindow(QWidget *parent) :\n   QMainWindow(parent),\n   ui(new Ui::MainWindow)\n{\n   ui-&gt;setupUi(this);\n\n   connect( ui-&gt;pushButtonStart, SIGNAL( clicked() ), this, SLOT( start() ) ) ;\n   connect( ui-&gt;pushButtonRestart, SIGNAL( clicked() ), this, SLOT( restart() ) ) ;\n   connect( &amp;m_process, SIGNAL( finished(int, QProcess::ExitStatus) ),\n            this, SLOT( finished(int, QProcess::ExitStatus) ) ) ;\n\n   m_process.setProcessChannelMode( QProcess::MergedChannels );\n}\n\nMainWindow::~MainWindow()\n{\n   delete ui;\n}\n\nvoid\nMainWindow::start()\n{\n   m_process.start( qPrintable( QApplication::applicationFilePath() ) ) ;\n}\n\nvoid\nMainWindow::restart()\n{\n   char *argv[2] ;\n   argv[0] = strdup( QApplication::applicationFilePath().toStdString().c_str() ) ;\n   argv[1] = NULL ;\n   execv( qPrintable( QApplication::applicationFilePath() ), argv ) ;\n}\n\nvoid\nMainWindow::finished\n(\n   int                  exitCode,\n   QProcess::ExitStatus exitStatus\n)\n{\n   qDebug() &lt;&lt; \"Finished!\" ;\n}\n</code></pre>\n"}, {"tags": ["c++", "string", "recursion", "substring"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1426090853, "post_id": 28991903, "comment_id": 46232011, "body": "Although it&#39;s fun to do it this way, you are taking a lot of value copies of the strings. You can do this without a single string copy, and in O(N), even if you want to search for multiple occurrences."}, {"owner": {"reputation": 151, "user_id": 4233869, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/GmXnd.jpg?s=128&g=1", "display_name": "JCoder", "link": "https://stackoverflow.com/users/4233869/jcoder"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1426091019, "post_id": 28991903, "comment_id": 46232130, "body": "What I meant was, why doesn&#39;t the function work?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1426091098, "post_id": 28991903, "comment_id": 46232181, "body": "I know. I&#39;m too old to step through this code, but (i) <code>substr</code> is zero based, and (ii) you&#39;re missing a <code>return</code>."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1426091169, "post_id": 28991903, "comment_id": 46232238, "body": "When you recursively check the substring 1 less character than the string you only check the substring removing the left most character but not the other possible substring removing the right most character."}, {"owner": {"reputation": 151, "user_id": 4233869, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/GmXnd.jpg?s=128&g=1", "display_name": "JCoder", "link": "https://stackoverflow.com/users/4233869/jcoder"}, "edited": false, "score": 0, "creation_date": 1426091368, "post_id": 28991903, "comment_id": 46232392, "body": "How would I fix it? I don&#39;t think you can do double recursion..."}, {"owner": {"reputation": 7476, "user_id": 3415258, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/100007912508550/picture?type=large", "display_name": "P45 Imminent", "link": "https://stackoverflow.com/users/3415258/p45-imminent"}, "edited": false, "score": 0, "creation_date": 1426091481, "post_id": 28991903, "comment_id": 46232467, "body": "Why are you using recursion?"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1426092041, "post_id": 28991903, "comment_id": 46232836, "body": "As the OP already uses <code>substr</code> in the code, I&#39;m sure this is just a way to learn more about recursion in general."}, {"owner": {"reputation": 151, "user_id": 4233869, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/GmXnd.jpg?s=128&g=1", "display_name": "JCoder", "link": "https://stackoverflow.com/users/4233869/jcoder"}, "edited": false, "score": 0, "creation_date": 1426092622, "post_id": 28991903, "comment_id": 46233232, "body": "I fixed the code so it goes one character at a time. Somehow, it still does not work..."}], "answers": [{"comments": [{"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "reply_to_user": {"reputation": 151, "user_id": 4233869, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/GmXnd.jpg?s=128&g=1", "display_name": "JCoder", "link": "https://stackoverflow.com/users/4233869/jcoder"}, "edited": false, "score": 0, "creation_date": 1426091323, "post_id": 28992082, "comment_id": 46232354, "body": "There&#39;s more than one problem with the code! Edited."}], "owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "is_accepted": false, "score": 1, "last_activity_date": 1426091131, "creation_date": 1426091131, "answer_id": 28992082, "question_id": 28991903, "link": "https://stackoverflow.com/questions/28991903/recursively-find-a-string-within-a-string-in-c/28992082#28992082", "title": "Recursively find a string within a string in C++", "body": "<p>You're missing a <code>return</code> before the recursive call to <code>find</code>. As it stands it falls through to the <code>return false</code> at the end.</p>\n\n<p>Also, <code>if (mystring == substring)</code> should be checking if <code>mystring</code> starts with <code>substring</code>, not exact equality.</p>\n"}, {"owner": {"reputation": 286, "user_id": 4567387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6039a9683ac0c816d4f5928cf46d4396?s=128&d=identicon&r=PG&f=1", "display_name": "Atul Sikaria", "link": "https://stackoverflow.com/users/4567387/atul-sikaria"}, "is_accepted": false, "score": 0, "last_activity_date": 1426091337, "creation_date": 1426091337, "answer_id": 28992146, "question_id": 28991903, "link": "https://stackoverflow.com/questions/28991903/recursively-find-a-string-within-a-string-in-c/28992146#28992146", "title": "Recursively find a string within a string in C++", "body": "<p>First, this is expensive because of the memory copies in substr.</p>\n\n<p>Second, you havent checked for substring length > 0. </p>\n\n<p>Third, the \"else if\" check for mystring.length > 0 is redundant if you have done the other checks (including substring length > 0).</p>\n\n<p>Now to your core logic. In the recursion your start is never moving, so you are tied to the beginning. What you need to do is start with position 1, and increment start at every recursion, and also extract using substr the substring from \"start\" to \"start + substring.length\". That way you start from the beginning, keep moving forward, and check the correct length. You could also start from the end (as you have) and move back, what you would have to do there is: find sart position (end position minus length of substring), and check that the start position is not less than zero before calling the function recursively.</p>\n"}, {"owner": {"reputation": 956, "user_id": 4656786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23a5be255ebdd3021405ce1db4032256?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Kakuev", "link": "https://stackoverflow.com/users/4656786/nikita-kakuev"}, "is_accepted": false, "score": 0, "last_activity_date": 1426091795, "last_edit_date": 1426091795, "creation_date": 1426091448, "answer_id": 28992185, "question_id": 28991903, "link": "https://stackoverflow.com/questions/28991903/recursively-find-a-string-within-a-string-in-c/28992185#28992185", "title": "Recursively find a string within a string in C++", "body": "<p>You're just removing the leftmost characters of <code>myString</code> and then comparing the rest to your <code>substring</code>. Obviously, this is not going to work in a general case, when your <code>substring</code> is somewhere in the middle of <code>myString</code>.</p>\n\n<p>On each iteration try comparing not the whole <code>myString</code>, but rather the first <code>substring.size()</code> characters of it. This should fix your issue.</p>\n"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "is_accepted": false, "score": 0, "last_activity_date": 1426091869, "creation_date": 1426091869, "answer_id": 28992335, "question_id": 28991903, "link": "https://stackoverflow.com/questions/28991903/recursively-find-a-string-within-a-string-in-c/28992335#28992335", "title": "Recursively find a string within a string in C++", "body": "<blockquote>\n  <p>Here's what I have so far, but it only returns true if the string\n  begins with the substring.</p>\n</blockquote>\n\n<p>It also fails for <code>find(\"foo\", \"f\")</code>.</p>\n\n<p>To see why, add some test output to the function:</p>\n\n<pre><code>bool find(string myString, string substring)\n{\n    std::cout &lt;&lt; myString &lt;&lt; \", \" &lt;&lt; substring &lt;&lt; \"\\n\";\n    // ...\n}\n</code></pre>\n\n<p>It will print:</p>\n\n<pre><code>foo, f\noo, f\no, f\n</code></pre>\n\n<p>You see why this cannot work? You just keep removing the first character, until only the last character is compared with the substring to be found.</p>\n\n<p>But it fails even for <code>find(\"foo\", \"o\")</code>:</p>\n\n<pre><code>foo, o\noo, o\no, o\n</code></pre>\n\n<p>That's because of this line:</p>\n\n<blockquote>\n<pre><code>   find(string2, substring); \n</code></pre>\n</blockquote>\n\n<p>You don't return the result of the recursive call.</p>\n\n<p>All things considered, I think you just have the wrong algorithm here. It simply cannot work the way you have written the code.</p>\n\n<p>A few other observations:</p>\n\n<blockquote>\n<pre><code>    int start = 1;\n    int end = (int) myString.length() - 1;\n</code></pre>\n</blockquote>\n\n<p>That's not good style. For historical reasons, a <code>std::string</code>'s size is unsigned, and you are using a C-style cast where <code>static_cast</code> should be preferred. You should just use <code>std::string::size_type</code> here, because it's just an internal piece of implementation code and you gain nothing from casting to <code>int</code>.</p>\n\n<blockquote>\n<pre><code>   string string2 = myString.substr(start, end);\n</code></pre>\n</blockquote>\n\n<p>The second argument of <code>substr</code> defines the length of the substring, not the index of the last character. <code>end</code> sounds like you use the value as the index of the last character. Have a look at <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/substr\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/string/basic_string/substr</a>.</p>\n"}, {"owner": {"reputation": 7089, "user_id": 2852165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JwDJG.jpg?s=128&g=1", "display_name": "SHR", "link": "https://stackoverflow.com/users/2852165/shr"}, "is_accepted": false, "score": 1, "last_activity_date": 1426092210, "last_edit_date": 1426092210, "creation_date": 1426091884, "answer_id": 28992345, "question_id": 28991903, "link": "https://stackoverflow.com/questions/28991903/recursively-find-a-string-within-a-string-in-c/28992345#28992345", "title": "Recursively find a string within a string in C++", "body": "<p>Check this function, it based on your code, with removal of extra code and fix of the errors.</p>\n\n<p>I also changed the signature to get const reference to improve the efficiency.</p>\n\n<pre><code>bool find(const string&amp; myString, const string&amp; substring)\n{\n    if(myString.length() &lt; substring.length()){ \n        return false;\n    }\n    else if(myString.substr(0,substring.size()) == substring){\n        return true;\n    }\n    else if (myString.length() &gt; substring.length()){\n        return find(myString.substr(1), substring); \n    }\n    else{\n        return false; \n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 151, "user_id": 4233869, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/GmXnd.jpg?s=128&g=1", "display_name": "JCoder", "link": "https://stackoverflow.com/users/4233869/jcoder"}, "edited": false, "score": 0, "creation_date": 1426094088, "post_id": 28992749, "comment_id": 46234272, "body": "just a question, I just voted your answer as &quot;answered&quot;, but why do you use size() instead of length()?  and why does my updated function that iterates one char at a time not work? you have been very helpful, I just still have some confusion."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 151, "user_id": 4233869, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/GmXnd.jpg?s=128&g=1", "display_name": "JCoder", "link": "https://stackoverflow.com/users/4233869/jcoder"}, "edited": false, "score": 0, "creation_date": 1426094436, "post_id": 28992749, "comment_id": 46234511, "body": "@JCoder  length is an alias for member function size of class std::string. So they may be used interchangeably.:) I used size because it is shorter.:)"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 151, "user_id": 4233869, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/GmXnd.jpg?s=128&g=1", "display_name": "JCoder", "link": "https://stackoverflow.com/users/4233869/jcoder"}, "edited": false, "score": 0, "creation_date": 1426094602, "post_id": 28992749, "comment_id": 46234630, "body": "@JCoder  As for your second loop then the condition of the loop shall be  i &lt; substring.length()  instead of  i &lt; substring.length()  and return true shall be placed outside the loop. Also in this case you shall remove the preceding comparison of strings.:)"}], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 1, "last_activity_date": 1426093474, "last_edit_date": 1426093474, "creation_date": 1426093039, "answer_id": 28992749, "question_id": 28991903, "link": "https://stackoverflow.com/questions/28991903/recursively-find-a-string-within-a-string-in-c/28992749#28992749", "title": "Recursively find a string within a string in C++", "body": "<p>First of all the function can be written simpler. For example</p>\n\n<pre><code>bool find( const std::string &amp;myString, const std::string &amp;subString )\n{\n    return \n    ( myString.substr( 0, subString.size() ) == subString ) ||\n    ( subString.size() &lt; myString.size() &amp;&amp; find( myString.substr( 1 ), subString ) );\n}\n</code></pre>\n\n<p>Here is a demonstrative program</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;string&gt;\n\nbool find( const std::string &amp;myString, const std::string &amp;subString )\n{\n    return \n    ( myString.substr( 0, subString.size() ) == subString ) ||\n    ( subString.size() &lt; myString.size() &amp;&amp; find( myString.substr( 1 ), subString ) );\n}\n\nint main()\n{\n    std::cout &lt;&lt; std::boolalpha &lt;&lt; find( \"Hello World\", \"World\" ) &lt;&lt; std::endl;\n    std::cout &lt;&lt; std::boolalpha &lt;&lt; find( \"Hello C\", \"C++\" ) &lt;&lt; std::endl;\n}   \n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>true\nfalse\n</code></pre>\n\n<p>As for your function then it will return true only in the case when the both string have the same length and are equal each other</p>\n\n<pre><code>if(myString == substring){\n        return true;\n    }\n</code></pre>\n\n<p>And in case when myString.length() > substring.length() the function returns nothing</p>\n\n<pre><code>else if (myString.length() &gt; substring.length()){\n    int start = 1;\n    int end = (int) myString.length() - 1;\n    string string2 = myString.substr(start, end);\n    find(string2, substring); \n}\n</code></pre>\n\n<p>I think you mean</p>\n\n<pre><code>    return find(string2, substring); \n</code></pre>\n\n<p>in this code snippet.</p>\n\n<p><strong>EDIT:</strong> I see that you changed the code of the function in your post. But in any case this code snippet</p>\n\n<pre><code>for(int i = 0; i &lt; substring.length() - 1 ; ++i)\n{\n    if(mystring.at(i) == substring.at(i))\n       {\n           continue;\n       }\n    else\n    {\n        string string2 = mystring.substr(1, mystring.length() - 1);\n        return find(string2, substring); \n    }\n    return true;\n}\n</code></pre>\n\n<p>makes no sense.</p>\n"}], "owner": {"reputation": 151, "user_id": 4233869, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/GmXnd.jpg?s=128&g=1", "display_name": "JCoder", "link": "https://stackoverflow.com/users/4233869/jcoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3022, "favorite_count": 0, "accepted_answer_id": 28992749, "answer_count": 6, "score": -2, "last_activity_date": 1426093474, "creation_date": 1426090639, "last_edit_date": 1426092559, "question_id": 28991903, "link": "https://stackoverflow.com/questions/28991903/recursively-find-a-string-within-a-string-in-c", "title": "Recursively find a string within a string in C++", "body": "<p>(C++)\nGiven myString, I want to check if myString contains substring. Here's what I have so far, but it only returns true if the string begins with the substring.</p>\n\n<pre><code> bool find(string myString, string substring)\n{\n    if(mystring.length() &lt; substring.length())\n    { \n        return false;\n    }\n    if(mystring == substring)\n    {\n        return true;\n    }\n    for(int i = 0; i &lt; substring.length() - 1 ; ++i)\n    {\n        if(mystring.at(i) == substring.at(i))\n           {\n               continue;\n           }\n        else\n        {\n            string string2 = mystring.substr(1, mystring.length() - 1);\n            return find(string2, substring); \n        }\n        return true;\n    }\n    return false;\n}\n</code></pre>\n\n<p>What is wrong with this function?</p>\n"}, {"tags": ["c++", "qt", "opengl"], "comments": [{"owner": {"reputation": 1556, "user_id": 1684354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5601bae4a82262e2d26ebb9da9b17f0b?s=128&d=identicon&r=PG", "display_name": "iced", "link": "https://stackoverflow.com/users/1684354/iced"}, "edited": false, "score": 0, "creation_date": 1426090305, "post_id": 28991719, "comment_id": 46231626, "body": "problem is exactly as it specified by compiler - it can&#39;t find GL/gl.h (which should come w/ some opengl sdk)"}, {"owner": {"reputation": 1418, "user_id": 988027, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d770a1c5adbda95e295cd0e4ef37ccc9?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/988027/dan"}, "edited": false, "score": 0, "creation_date": 1426090519, "post_id": 28991719, "comment_id": 46231759, "body": "Check what include directories you are feeding in to the compiler. Are you usint QtCreator to run the compiler? In that case just add a line to the .pro file <code>INCLUDEPATH += &lt;your path&gt;</code> where &lt;your path&gt; is the path to GL/gl.h"}, {"owner": {"reputation": 2884, "user_id": 2558027, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/srmnC.jpg?s=128&g=1", "display_name": "sjdowling", "link": "https://stackoverflow.com/users/2558027/sjdowling"}, "edited": false, "score": 0, "creation_date": 1426091449, "post_id": 28991719, "comment_id": 46232448, "body": "Have you added <code>QT += opengl</code> to your .pro file?"}], "answers": [{"owner": {"reputation": 133, "user_id": 4174291, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Qcu8.jpg?s=128&g=1", "display_name": "Rui Pires", "link": "https://stackoverflow.com/users/4174291/rui-pires"}, "is_accepted": true, "score": 4, "last_activity_date": 1426264307, "last_edit_date": 1426264307, "creation_date": 1426095224, "answer_id": 28993475, "question_id": 28991719, "link": "https://stackoverflow.com/questions/28991719/c1083-cannot-open-include-file-gl-gl-h-no-such-file-or-directory/28993475#28993475", "title": "C1083: Cannot open include file: &#39;GL/gl.h&#39;: No such file or directory", "body": "<p>This happened to me today...</p>\n\n<p>For some reason the QT installer defaults to the MSVC <strong>2012 32Bit</strong> OpenGL kit instead of the correct (in my case) MSVC <strong>2013 64bBit</strong> OpenGL kit.</p>\n\n<p>So I would check if there is a mismatch between the installed kits and your OS and/or MSVC version.</p>\n\n<p>In my case opening the <em>MaintenanceTool.exe</em> (in the Qt dir) selecting <em>Package Manager</em> then uninstalling the \"bad\" kit and selecting the \"good\" one solved the issue.</p>\n\n<p>Edit: in the package manager it refers to Prebuilt components, but they show up in Qt Creator as kits...</p>\n"}], "owner": {"reputation": 23, "user_id": 4153637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cd18a37f3ca3716e9a2e0eaabea84ef?s=128&d=identicon&r=PG&f=1", "display_name": "Mateusz Kowal", "link": "https://stackoverflow.com/users/4153637/mateusz-kowal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4775, "favorite_count": 0, "accepted_answer_id": 28993475, "answer_count": 1, "score": 2, "last_activity_date": 1426264307, "creation_date": 1426090144, "last_edit_date": 1426091150, "question_id": 28991719, "link": "https://stackoverflow.com/questions/28991719/c1083-cannot-open-include-file-gl-gl-h-no-such-file-or-directory", "title": "C1083: Cannot open include file: &#39;GL/gl.h&#39;: No such file or directory", "body": "<p>I was using QtCreator for some time to play with OpenGL, and everything was ok. But finally i needed to attach a debugger to QtCreator, so i have installed windows 7 SDK. From this time i get error:</p>\n\n<pre><code>C:\\Qt\\5.4\\msvc2012_opengl\\include\\QtGui\\qopengl.h:122: error: C1083: Cannot open include file: 'GL/gl.h': No such file or directory\n</code></pre>\n\n<p>It is a problem only on my office computer, when I work at home everything compiles. So the problem is maybe with compiler?</p>\n"}, {"tags": ["c++", "asynchronous", "promise"], "comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 1, "creation_date": 1426090462, "post_id": 28991694, "comment_id": 46231719, "body": "Have you tried giving <code>Xxx</code> a default ctor?"}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1426091893, "post_id": 28991694, "comment_id": 46232750, "body": "Why don&#39;t you just pass <code>xxx</code> to the async function? Do you really need the two-way <code>future</code> communication? That just means both threads are waiting for each other."}, {"owner": {"reputation": 410, "user_id": 2608530, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/4ctKm.png?s=128&g=1", "display_name": "rtischer8277", "link": "https://stackoverflow.com/users/2608530/rtischer8277"}, "edited": false, "score": 0, "creation_date": 1426098997, "post_id": 28991694, "comment_id": 46237507, "body": "I see. Since I already have the payload data, there is no need to make a promise/future out of it. Just use the asnyc&#39;s _Fty&amp;&amp; _Fnarg, _ArgTypes&amp;&amp;... _Args constructor with my complex arguments."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1426102220, "post_id": 28991694, "comment_id": 46239472, "body": "Right. You use a <code>future </code> to get the result back <i>out</i> of <code>async</code> but you don&#39;t need to use one to pass anything in."}], "answers": [{"comments": [{"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1426091480, "post_id": 28992133, "comment_id": 46232465, "body": "Yup, definitely a bug in the implementation. <code>promise&lt;Xxx&gt;</code> should create an uninitialized buffer and only construct an <code>Xxx</code> object when <code>set_value</code> is called. Another workaround would be to use <code>boost::promise</code> instead of the <code>std</code> one"}, {"owner": {"reputation": 410, "user_id": 2608530, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/4ctKm.png?s=128&g=1", "display_name": "rtischer8277", "link": "https://stackoverflow.com/users/2608530/rtischer8277"}, "edited": false, "score": 0, "creation_date": 1426101283, "post_id": 28992133, "comment_id": 46238938, "body": "I&#39;m a C++ MFC-hugger from way back. I skipped the Java and C# technical digressions and am happy to use these new ISO paralellization capabilities along with all my other C++ libraries (GUI, encryption, etc.). Actually, according to Herb Sutter at 2014 Build, it was MS that submitted their async implementation to the standards community for inclusion. I assume [utility.arg.requirements] states that you should be able to pass any kind of arg in a promise?"}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 1, "creation_date": 1426102171, "post_id": 28992133, "comment_id": 46239443, "body": "[utility.arg.requirements] is not specific to <code>promise</code> it just says &quot;In general, a default constructor is not required.&quot;"}], "owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "is_accepted": false, "score": 3, "last_activity_date": 1426091279, "creation_date": 1426091279, "answer_id": 28992133, "question_id": 28991694, "link": "https://stackoverflow.com/questions/28991694/can-an-stdpromise-be-made-from-a-non-pod-object/28992133#28992133", "title": "can an std::promise be made from a non-POD object?", "body": "<p>It sounds like your implementation is defective. There should be no need for a default constructor (per the general library requirements of [utility.arg.requirements]), and GCC accepts your code (after changing the weird Microsoftish <code>_tmain</code> to a standard <code>main</code>).</p>\n\n<p>I'd switch to a different compiler and operating system. That might not be an option for you, so maybe you could give the class a default constructor to keep it happy.</p>\n"}, {"comments": [{"owner": {"reputation": 410, "user_id": 2608530, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/4ctKm.png?s=128&g=1", "display_name": "rtischer8277", "link": "https://stackoverflow.com/users/2608530/rtischer8277"}, "edited": false, "score": 0, "creation_date": 1426101434, "post_id": 28992548, "comment_id": 46239017, "body": "Is auto xxx = f.get(); still necessary since I would no longer be  passing in a future?"}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "reply_to_user": {"reputation": 410, "user_id": 2608530, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/4ctKm.png?s=128&g=1", "display_name": "rtischer8277", "link": "https://stackoverflow.com/users/2608530/rtischer8277"}, "edited": false, "score": 0, "creation_date": 1426102022, "post_id": 28992548, "comment_id": 46239349, "body": "Oops, well spotted. I forgot to change that bit, it&#39;s fixed now."}, {"owner": {"reputation": 1185, "user_id": 554283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c94c7e7e8cfc0cf077581636b2192b98?s=128&d=identicon&r=PG", "display_name": "Frederik Aalund", "link": "https://stackoverflow.com/users/554283/frederik-aalund"}, "edited": false, "score": 0, "creation_date": 1452514938, "post_id": 28992548, "comment_id": 57188526, "body": "This is indeed a bug. I&#39;ve submitted a <a href=\"https://connect.microsoft.com/VisualStudio/feedback/details/2229765/bug-std-promise-t-requires-that-t-is-defaultconstructible\" rel=\"nofollow noreferrer\">bug report</a>. This bug is even listed as a todo item in the &lt;future&gt; file (&quot;// TODO: _Associated_state ctor assumes _Ty is default constructible&quot;) so the developers are well aware of it already."}], "owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "is_accepted": true, "score": 5, "last_activity_date": 1426102006, "last_edit_date": 1426102006, "creation_date": 1426092455, "answer_id": 28992548, "question_id": 28991694, "link": "https://stackoverflow.com/questions/28991694/can-an-stdpromise-be-made-from-a-non-pod-object/28992548#28992548", "title": "can an std::promise be made from a non-POD object?", "body": "<p>As Mike already answered, it's definitely a bug in the Visual C++ implementation of <code>std::promise</code>, what you're doing should work.</p>\n\n<p>But I'm curious why you need to do it anyway. Maybe there's some other requirement that you've not shown to keep the example simple, but this would be the obvious way to write that code:</p>\n\n<pre><code>#include &lt;future&gt;\n\nclass Xxx //non-POD object\n{\n  int i;\npublic:\n  Xxx( int i ) : i( i ) {}\n  int GetSquare() { return i * i; }\n};\n\nint factorial( Xxx xxx )\n{\n  int res = 1;\n  for( int i = xxx.GetSquare(); i &gt; 1; i-- )\n  {\n    res *= i;\n  }\n  return res;\n}\n\nint main()\n{\n  Xxx xxx( 2 ); // 2 represents one payload from the socket\n  std::future&lt; int &gt; fu = std::async( factorial, std::move( xxx ) );\n  int fact = fu.get();\n}\n</code></pre>\n"}], "owner": {"reputation": 410, "user_id": 2608530, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/4ctKm.png?s=128&g=1", "display_name": "rtischer8277", "link": "https://stackoverflow.com/users/2608530/rtischer8277"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 678, "favorite_count": 0, "accepted_answer_id": 28992548, "answer_count": 2, "score": 5, "last_activity_date": 1426102006, "creation_date": 1426090076, "question_id": 28991694, "link": "https://stackoverflow.com/questions/28991694/can-an-stdpromise-be-made-from-a-non-pod-object", "title": "can an std::promise be made from a non-POD object?", "body": "<p>One of the things my app does is listen for and receive payloads from a socket. I never want to block. On each payload received, I want to create an object and pass it to a worker thread and forget about it until later which is how the prototype code works. But for the production code I want to reduce complexity (my app is large) by using the convenient async method. async takes a future made from a promise. For that to work I need to create a promise on my non-POD object represented below by the Xxx class. I don't see any way to do that (see error in my sample code below). Is it appropriate to use async here? If so, how can I construct a promise/future object that is more complex than int (all code examples I've see either use int or void):</p>\n\n<pre><code>#include &lt;future&gt;\nclass Xxx //non-POD object\n{\n  int i;\npublic:\n  Xxx( int i ) : i( i ) {}\n  int GetSquare() { return i * i; }\n};\n\nint factorial( std::future&lt; Xxx &gt; f )\n{\n  int res = 1;\n  auto xxx = f.get();\n  for( int i = xxx.GetSquare(); i &gt; 1; i-- )\n  {\n    res *= i;\n  }\n  return res;\n}\n\nint _tmain( int argc, _TCHAR* argv[] )\n{\n  Xxx xxx( 2 ); // 2 represents one payload from the socket\n  std::promise&lt; Xxx &gt; p; // error: no appropriate default constructor available\n  std::future&lt; Xxx &gt; f = p.get_future();\n  std::future&lt; int &gt; fu = std::async( factorial, std::move( f ) );\n  p.set_value( xxx );\n  fu.wait();\n  return 0;\n}\n</code></pre>\n"}]