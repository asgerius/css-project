[{"tags": ["c++", "boost", "boost-log", "visual-c++-2017"], "comments": [{"owner": {"reputation": 3808, "user_id": 2922611, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f26420ac1fcb58b3d0c0f63273eaf3f5?s=128&d=identicon&r=PG&f=1", "display_name": "kenba", "link": "https://stackoverflow.com/users/2922611/kenba"}, "edited": false, "score": 0, "creation_date": 1501133581, "post_id": 45339214, "comment_id": 77645639, "body": "Andrey&#39;s answer to <a href=\"https://stackoverflow.com/questions/34394896/problems-linking-boost-log-1-60-with-mingw-on-windows-7\">this question</a> may help you."}, {"owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "reply_to_user": {"reputation": 3808, "user_id": 2922611, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f26420ac1fcb58b3d0c0f63273eaf3f5?s=128&d=identicon&r=PG&f=1", "display_name": "kenba", "link": "https://stackoverflow.com/users/2922611/kenba"}, "edited": false, "score": 0, "creation_date": 1501189503, "post_id": 45339214, "comment_id": 77683299, "body": "@kenba unfortunately it did not work"}, {"owner": {"reputation": 8115, "user_id": 4636534, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GoTz67GRao8/AAAAAAAAAAI/AAAAAAAAADI/PyDv-i56924/photo.jpg?sz=128", "display_name": "Andrey Semashev", "link": "https://stackoverflow.com/users/4636534/andrey-semashev"}, "reply_to_user": {"reputation": 3808, "user_id": 2922611, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f26420ac1fcb58b3d0c0f63273eaf3f5?s=128&d=identicon&r=PG&f=1", "display_name": "kenba", "link": "https://stackoverflow.com/users/2922611/kenba"}, "edited": false, "score": 2, "creation_date": 1501195933, "post_id": 45339214, "comment_id": 77685688, "body": "This is definitely caused by the target Windows version mismatch between the built Boost.Log binary and your code (or maybe some other code that uses Boost.Log). The answer referenced by @kenba is the way forward, you only need to figure out where the inconsistency is coming from."}], "owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 791, "favorite_count": 1, "answer_count": 0, "score": 5, "last_activity_date": 1501189545, "creation_date": 1501113335, "last_edit_date": 1501189545, "question_id": 45339214, "link": "https://stackoverflow.com/questions/45339214/boost-log-abi-value-v2s-mt-nt6-doesnt-match-value-v2s-mt-nt5", "title": "&#39;boost_log_abi&#39;: value &#39;v2s_mt_nt6&#39; doesn&#39;t match value &#39;v2s_mt_nt5&#39;", "body": "<p>I am linking a C++ console application with Boost. Everything was fine till I start using Boost logging library. I am facing this issue:</p>\n\n<blockquote>\n  <p><code>boost_log_abi': value 'v2s_mt_nt6' doesn't match value 'v2s_mt_nt5</code></p>\n</blockquote>\n\n<p>I tried everything in this <a href=\"https://stackoverflow.com/questions/35910432/lnk2038-mismatch-detected-for-boost-log-abi-value-v2s-mt-nt5-doesnt-match\">question</a>. However, nothing worked.</p>\n\n<p>I could not even understand what is the problem exactly. Which one is using an older version, my program or the boost?</p>\n\n<p>I am on Windows 10, MSVC 2017 (141 toolset) and Boost 1.63. </p>\n"}, {"tags": ["c#", "android", "c++", "sqlite", "mono"], "comments": [{"owner": {"reputation": 67998, "user_id": 4984832, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/be4bc3e019d1082f7945b8db7ab313c9?s=128&d=identicon&r=PG", "display_name": "SushiHangover", "link": "https://stackoverflow.com/users/4984832/sushihangover"}, "edited": false, "score": 0, "creation_date": 1501116893, "post_id": 45339128, "comment_id": 77641185, "body": "I would look to SQLitePCL.raw : <a href=\"https://github.com/ericsink/SQLitePCL.raw\" rel=\"nofollow noreferrer\">github.com/ericsink/SQLitePCL.raw</a>"}, {"owner": {"reputation": 4651, "user_id": 1878141, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/XYDte.jpg?s=128&g=1", "display_name": "Christian Findlay", "link": "https://stackoverflow.com/users/1878141/christian-findlay"}, "reply_to_user": {"reputation": 67998, "user_id": 4984832, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/be4bc3e019d1082f7945b8db7ab313c9?s=128&d=identicon&r=PG", "display_name": "SushiHangover", "link": "https://stackoverflow.com/users/4984832/sushihangover"}, "edited": false, "score": 0, "creation_date": 1501118896, "post_id": 45339128, "comment_id": 77641700, "body": "That library is written by Eric Sink. He is the guy whose article I mentioned above. He seems to have a better understanding of this than anyone, but I can&#39;t really follow what he has done in his code. If you look at this class: <a href=\"https://github.com/ericsink/SQLitePCL.raw/blob/master/src/cs/sqlite3_pinvoke.cs\" rel=\"nofollow noreferrer\">github.com/ericsink/SQLitePCL.raw/blob/master/src/cs/&hellip;</a>. You will see that the DLL name is stored in a variable called SQLITE_DLL. But that text is a const set to &quot;REPLACE_WITH_ACTUAL_DLL_NAME&quot;. Which is my fundamental question. What should go here? I can&#39;t follow how the code in this class fills this in..."}], "owner": {"reputation": 4651, "user_id": 1878141, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/XYDte.jpg?s=128&g=1", "display_name": "Christian Findlay", "link": "https://stackoverflow.com/users/1878141/christian-findlay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1505183617, "creation_date": 1501112685, "last_edit_date": 1505183617, "question_id": 45339128, "link": "https://stackoverflow.com/questions/45339128/xamarin-android-sqlite-which-c-library", "title": "Xamarin - Android - SQLite - Which C++ Library?", "body": "<p>A bit of background...</p>\n\n<p>SQLite is an open source C++ library compiled for multiple platforms. There are several commonly used C# wrappers for this library on several different platforms. Some of the common ones are:</p>\n\n<p><a href=\"https://github.com/praeclarum/sqlite-net.git\" rel=\"nofollow noreferrer\">https://github.com/praeclarum/sqlite-net.git</a></p>\n\n<p><a href=\"https://github.com/mattleibow/Mono.Data.Sqlite.git\" rel=\"nofollow noreferrer\">https://github.com/mattleibow/Mono.Data.Sqlite.git</a></p>\n\n<p><a href=\"https://github.com/oysteinkrog/SQLite.Net-PCL.git\" rel=\"nofollow noreferrer\">https://github.com/oysteinkrog/SQLite.Net-PCL.git</a></p>\n\n<p>Here is my one which is a stripped back fork from SQLite.Net-PCL.</p>\n\n<p><a href=\"https://github.com/MelbourneDeveloper/SQLite.Net.Standard.git\" rel=\"nofollow noreferrer\">https://github.com/MelbourneDeveloper/SQLite.Net.Standard.git</a></p>\n\n<p>There are multiple versioning issues around SQLite on the different platforms, but recently, a big version issue came in to play on the Android platform. You can read about it here:\n<a href=\"http://ericsink.com/entries/sqlite_android_n.html\" rel=\"nofollow noreferrer\">http://ericsink.com/entries/sqlite_android_n.html</a></p>\n\n<p>According to Xamarin:\n<em>Note: Due to a change by Google, Android N will now only permit linking to NDK-provided native libraries. libsqlite.so is not an NDK-provided native library. Consequently, existing apps using e.g. Mono.Data.Sqlite.dll will crash when running on Android N. This may include other SQLite-using assemblies, not distributed with Xamarin.Android.\nXamarin.Android 7.0, which is part of Cycle 8, updates Mono.Data.Sqlite.dll to include a custom built version of libsqlite.so, named libsqlite3_xamarin.so.</em></p>\n\n<p><a href=\"https://developer.xamarin.com/releases/android/xamarin.android_7/xamarin.android_7.0/\" rel=\"nofollow noreferrer\">https://developer.xamarin.com/releases/android/xamarin.android_7/xamarin.android_7.0/</a></p>\n\n<p>So, my questions are: <strong>which Android C++ library should we be using for Android</strong>? <strong>Does the version depend on the version of the Android OS installed</strong>? <strong>Where do we get the C++ library from</strong>? </p>\n\n<p>It sounds as though Google will only allow a customized version of the library. I guess this means that they will only accept signed libraries and the one compiled from Xamarin will be accepted. If this is the case, <strong>how do we get this library and package it up in a .NET Standard DLL, or include it in an Android app package</strong>?</p>\n\n<p>I ask this question because this issue has been pointed out in my library here:\n<a href=\"https://github.com/MelbourneDeveloper/SQLite.Net.Standard/issues/5\" rel=\"nofollow noreferrer\">https://github.com/MelbourneDeveloper/SQLite.Net.Standard/issues/5</a></p>\n\n<p>I feel like this is connected to the versioning issue. Anything that can shed some light on this would help. In my repo mentioned above, I have created a branches called Issues/5 which uses a different C++ library called libsqlite3_xamarin which seems to be bundled with Mono.Data.Sqlite but I still get the above issue when my phone goes to sleep.</p>\n"}, {"tags": ["java", "c++", "java-native-interface"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 8372906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76732e37477ac4d2d4a292ab0315824c?s=128&d=identicon&r=PG&f=1", "display_name": "SynthDan", "link": "https://stackoverflow.com/users/8372906/synthdan"}, "edited": false, "score": 0, "creation_date": 1501114632, "post_id": 45338998, "comment_id": 77640675, "body": "Oh, that&#39;s excellent!  Am I correct then that I would use the Java Platform Debugger Architecture (<a href=\"http://docs.oracle.com/javase/6/docs/technotes/guides/jpda/\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/6/docs/technotes/guides/jpda</a>) to communicate with the JVM?"}, {"owner": {"reputation": 1875, "user_id": 1736596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2hXRA.jpg?s=128&g=1", "display_name": "Minor Threat", "link": "https://stackoverflow.com/users/1736596/minor-threat"}, "reply_to_user": {"reputation": 41, "user_id": 8372906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76732e37477ac4d2d4a292ab0315824c?s=128&d=identicon&r=PG&f=1", "display_name": "SynthDan", "link": "https://stackoverflow.com/users/8372906/synthdan"}, "edited": false, "score": 0, "creation_date": 1501121594, "post_id": 45338998, "comment_id": 77642258, "body": "Have you tried already to connect to your JVM with an external debugger or not?"}], "tags": [], "owner": {"reputation": 1875, "user_id": 1736596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2hXRA.jpg?s=128&g=1", "display_name": "Minor Threat", "link": "https://stackoverflow.com/users/1736596/minor-threat"}, "is_accepted": false, "score": 2, "last_activity_date": 1501111698, "creation_date": 1501111698, "answer_id": 45338998, "question_id": 45338943, "link": "https://stackoverflow.com/questions/45338943/can-i-debug-a-jvm-created-in-native-code-via-jni/45338998#45338998", "title": "Can I debug a JVM created in native code via JNI?", "body": "<p>If you can specify startup parameters of your JVM, you can open port for debug connections.</p>\n\n<pre><code> -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=9009\n</code></pre>\n\n<p>Every Java IDE can utilize this protocol, see Run->Attach to local process in Intellij IDEA, for example. </p>\n"}], "owner": {"reputation": 41, "user_id": 8372906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76732e37477ac4d2d4a292ab0315824c?s=128&d=identicon&r=PG&f=1", "display_name": "SynthDan", "link": "https://stackoverflow.com/users/8372906/synthdan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 408, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1501111698, "creation_date": 1501111271, "question_id": 45338943, "link": "https://stackoverflow.com/questions/45338943/can-i-debug-a-jvm-created-in-native-code-via-jni", "title": "Can I debug a JVM created in native code via JNI?", "body": "<p>I have a C++ program that is creating a JVM using the JNI_CreateJavaVM() function.  The program is working great, but I'd like to be able to debug events in the Java code, e.g. add a breakpoint.  It seems the JDB debugging application has -attach and -connect parameters that might possibly be able to connect to the JVM I've created in native code.  Has anyone ever done this?  Can it be made to work?  Or, is there an alternative way to debug a JVM created in native code?</p>\n\n<p>Thanks!\nDan</p>\n"}, {"tags": ["c++", "linux", "dependencies", "g++"], "answers": [{"comments": [{"owner": {"reputation": 535, "user_id": 3677630, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f6a149f0329f664852f1c3ffa3b6b324?s=128&d=identicon&r=PG&f=1", "display_name": "user3677630", "link": "https://stackoverflow.com/users/3677630/user3677630"}, "edited": false, "score": 0, "creation_date": 1501113628, "post_id": 45339060, "comment_id": 77640456, "body": "I agree most of what you said. -I../ does not work though. Also, adding -I absolute path to &#39;src&#39; fold does not work as well."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 535, "user_id": 3677630, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f6a149f0329f664852f1c3ffa3b6b324?s=128&d=identicon&r=PG&f=1", "display_name": "user3677630", "link": "https://stackoverflow.com/users/3677630/user3677630"}, "edited": false, "score": 0, "creation_date": 1501117479, "post_id": 45339060, "comment_id": 77641354, "body": "@user3677630 - If it does not work, then why did you accept the answer? Perhaps you should leave the question open for more time and see if someone else knows an answer for the problem."}, {"owner": {"reputation": 530, "user_id": 6055567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IPD5P.jpg?s=128&g=1", "display_name": "RichS", "link": "https://stackoverflow.com/users/6055567/richs"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1501117751, "post_id": 45339060, "comment_id": 77641432, "body": "@jww The part of &quot;-I../&quot; was only one small part of the answer. The rest of it is still valid. As long as part of this answer solves the problem, it is correct."}], "tags": [], "owner": {"reputation": 530, "user_id": 6055567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IPD5P.jpg?s=128&g=1", "display_name": "RichS", "link": "https://stackoverflow.com/users/6055567/richs"}, "is_accepted": false, "score": 3, "last_activity_date": 1501112683, "last_edit_date": 1501112683, "creation_date": 1501112239, "answer_id": 45339060, "question_id": 45338934, "link": "https://stackoverflow.com/questions/45338934/g-generate-dependency-file-miss-user-defined-headers/45339060#45339060", "title": "g++ generate dependency file miss user defined headers", "body": "<p>According to <a href=\"https://gcc.gnu.org/onlinedocs/cpp/Search-Path.html\" rel=\"nofollow noreferrer\">this GCC webpage</a>, the</p>\n\n<blockquote>\n  <p>\"preprocessor looks for header files included by the quote form of the directive <code>#include \"file\"</code> <strong>first relative to the directory of the current file</strong>, and then in a preconfigured list of standard system directories.\"</p>\n</blockquote>\n\n<p>That means when it sees <code>#include \"c/c.h\"</code>, it checks for files in a hypothetical subdirectory named \"c\" from the current file's location.</p>\n\n<p>When you replaced that with <code>#include \"c.h\"</code>, the preprocessor then checks the directory of the current file.</p>\n\n<p>Another option is to add <code>-I../</code> to the command line parameters for g++.</p>\n\n<p><a href=\"https://gcc.gnu.org/onlinedocs/gcc/Directory-Options.html\" rel=\"nofollow noreferrer\">This GCC webpage</a> provides the complete order in which the preprocessor searches directories for include files. The lookup order is as follows:</p>\n\n<ol>\n<li>For the quote form of the include directive, the directory of the current file is searched first.</li>\n<li>For the quote form of the include directive, the directories specified by -iquote options are searched in left-to-right order, as they appear on the command line.</li>\n<li>Directories specified with -I options are scanned in left-to-right order.</li>\n<li>Directories specified with -isystem options are scanned in left-to-right order.</li>\n<li>Standard system directories are scanned.</li>\n<li>Directories specified with -idirafter options are scanned in left-to-right order.</li>\n</ol>\n\n<p>Note that the directory from which you ran g++ does not appear on the above list. This means, the preprocessor does <strong>not</strong> check the directory from which you ran g++ on the command line. The reason is so that you can run g++ from any directory and still get the same build results.</p>\n"}, {"tags": [], "owner": {"reputation": 535, "user_id": 3677630, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f6a149f0329f664852f1c3ffa3b6b324?s=128&d=identicon&r=PG&f=1", "display_name": "user3677630", "link": "https://stackoverflow.com/users/3677630/user3677630"}, "is_accepted": true, "score": 0, "last_activity_date": 1503353492, "creation_date": 1503353492, "answer_id": 45806237, "question_id": 45338934, "link": "https://stackoverflow.com/questions/45338934/g-generate-dependency-file-miss-user-defined-headers/45806237#45806237", "title": "g++ generate dependency file miss user defined headers", "body": "<p>This weird output is caused by the variable CPLUS_INCLUDE_PATH. I have set it to some value in the following:</p>\n\n<pre><code>CPLUS_INCLUDE_PATH=some_path:\n</code></pre>\n\n<p>This tail ':' of the variable CPLUS_INCLUDE_PATH is the cause of my problem. With ':', the compiler considers './' as the system folder, so it automatically removes the headers related to './', such as 'c/c.h', from the dependency list. Accordingly, if I set CPLUS_INCLUDE_PATH to</p>\n\n<pre><code>CPLUS_INCLUDE_PATH=some_path\n</code></pre>\n\n<p>then the problem is solved.</p>\n"}], "owner": {"reputation": 535, "user_id": 3677630, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f6a149f0329f664852f1c3ffa3b6b324?s=128&d=identicon&r=PG&f=1", "display_name": "user3677630", "link": "https://stackoverflow.com/users/3677630/user3677630"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 45806237, "answer_count": 2, "score": 2, "last_activity_date": 1503353492, "creation_date": 1501111158, "question_id": 45338934, "link": "https://stackoverflow.com/questions/45338934/g-generate-dependency-file-miss-user-defined-headers", "title": "g++ generate dependency file miss user defined headers", "body": "<p>The structure of the folder of my source code is defined as follows:</p>\n\n<pre><code>src\n |--c\n    |--c.h\n    |--c.cpp\n</code></pre>\n\n<p>'c.h' declares a class called 'B' and 'c.cpp' defined the class 'B'.</p>\n\n<p>Suppose we are in folder 'src' now. I run</p>\n\n<pre><code>   g++ -I./ -MM -MT c/c.o -MF c/c.d c/c.cpp\n</code></pre>\n\n<p>to generate the dependency file 'c/c.d' for 'c/c.cpp'. The content of the file 'c/c.d', however, does not contain 'c/c.h' even if I have included 'c/c.h' in 'c/c.cpp' by </p>\n\n<pre><code>   #include \"c/c.h\".\n</code></pre>\n\n<p>However, the result is different if we are in folder 'c' and run the above command. By replacing 'c/c.h' with 'c.h' in the above process, I can get a correct dependency file (meaning that 'c.h' is in the dependency file). </p>\n\n<p>Anyone knows the reason of why the first process misses the header dependency?</p>\n"}, {"tags": ["c++", "templates", "pointers"], "answers": [{"comments": [{"owner": {"reputation": 372, "user_id": 4633281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a09ad2d2590573c3b37453a45d1b4121?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/4633281/alexander"}, "edited": false, "score": 0, "creation_date": 1501114398, "post_id": 45339235, "comment_id": 77640620, "body": "Thank you for your comments, it&#39;s very helpful. The missing ; was a typo when I copied the code, and the &#39;Object&#39; in the vector should have been &#39;Target&#39; - I simply forgot to change it as I was writing simplified code for this post."}], "tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": true, "score": 0, "last_activity_date": 1501113509, "creation_date": 1501113509, "answer_id": 45339235, "question_id": 45338905, "link": "https://stackoverflow.com/questions/45338905/template-object-manager-incorrect-argument/45339235#45339235", "title": "Template object manager, incorrect argument", "body": "<p>There are many errors in your code. I'll start somewhere.</p>\n\n<ul>\n<li>There is a missing <code>Object</code> class. Either you didn't included it in this example or you are using a undefined identifier.</li>\n<li><code>ObjectManager</code> class definition is missing a <code>;</code></li>\n<li>It seems <code>Target</code> is not extending from <code>Object</code>. Are you sure a <code>std::shared_ptr&lt;Target&gt;</code> is convertible to a <code>std::shared_ptr&lt;Object&gt;</code>? I think not.</li>\n<li>You misunderstood how to use <code>std::make_shared</code>. It doesn't take a pointer as parameter, but your class's constructor parameter. The correct usage is <code>std::make_shared&lt;T&gt;(std::forward&lt;Args&gt;(args)...)</code>. Just as the error says, your class is not constructible from a <code>Target*</code>, but from a <code>int</code>.</li>\n</ul>\n\n<p>There maybe other problems I didn't spotted.</p>\n\n<hr>\n\n<p>Now, to the second part of the question.</p>\n\n<p>You seem to have a confusion between function parameters and template parameters. Both are distinct things.</p>\n\n<p>Template parameters are like arguments to the implementation of the function. There are compile time entities. This is why you can send types there, because types are compile time entities. To have a function callable like this:</p>\n\n<pre><code>foo&lt;Bar, 5&gt;();\n</code></pre>\n\n<p>You must have a definition like that:</p>\n\n<pre><code>template&lt;typename T, int n&gt;\nvoid foo() {}\n</code></pre>\n\n<p>As the function definition says, the template parameters are a type, and a integer. You can see from the way the function is called that you must send template parameter as template parameter. Function parameters are the arguments listed in <code>(...)</code>. If we add some parameter to our function, it would look like this:</p>\n\n<pre><code>template&lt;typename T, int n&gt;\nvoid foo(const char*, int) {}\n\nfoo&lt;Bar, 4&gt;(\"baz\", 7);\n</code></pre>\n\n<p>As you can see, both  function parameters and template function parameters are different, separated things.</p>\n\n<h3>What about deduction?</h3>\n\n<p>Template arguments deduction is the process of letting the compiler deduce by itself what the template parameters are. I won't go into the whole process, but it look like this:</p>\n\n<pre><code>template&lt;typename T&gt;\nvoid foo(T t) {}\n\nfoo(4); // deduce T as int\n</code></pre>\n\n<p>As such, you won't need to tell that the <code>T</code> parameter is <code>int</code>.</p>\n\n<blockquote>\n  <p>am I calling the function correctly?</p>\n</blockquote>\n\n<p>This is the correct way indeed:</p>\n\n<pre><code>manager.createObject&lt;Target&gt;(5)\n</code></pre>\n\n<p>It will call the create object with the template parameter <code>T</code> as <code>Target</code>, and <code>... Args</code> deduced as <code>int</code>. There is no <code>int</code> template parameters, only type template parameters.</p>\n"}], "owner": {"reputation": 372, "user_id": 4633281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a09ad2d2590573c3b37453a45d1b4121?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/4633281/alexander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 45339235, "answer_count": 1, "score": 0, "last_activity_date": 1501114159, "creation_date": 1501110963, "last_edit_date": 1501114159, "question_id": 45338905, "link": "https://stackoverflow.com/questions/45338905/template-object-manager-incorrect-argument", "title": "Template object manager, incorrect argument", "body": "<p>I'm attempting to create a simple object manager that holds a list of objects, in main.cpp I'm attempting to put \"Target\" into the list, however I receive an error: cannot convert argument 1 from 'Target *' to 'int'. I don't understand why the error occurs? </p>\n\n<p>Also, what's the difference between </p>\n\n<pre><code>manager.createObject&lt;Target, 5&gt;()\n</code></pre>\n\n<p>and</p>\n\n<pre><code>manager.createObject&lt;Target&gt;(5)\n</code></pre>\n\n<p>are they the same, i.e. am I calling the function correctly?</p>\n\n<pre><code>// ObjectManager.h\nclass ObjectManager\n{\n    std::vector&lt;std::shared_ptr&lt;Object&gt;&gt; objects; // list of all objects\npublic:\n    template&lt;class T, typename... Args&gt;\n    std::shared_ptr&lt;T&gt; createObject(Args&amp;&amp;... args) {\n        std::shared_ptr&lt;T&gt; new_ptr = std::make_shared&lt;T&gt;(new T(std::forward&lt;Args&gt;(args)...));\n        objects.emplace_back(new_ptr);\n        return new_ptr;\n    }\n}\n\n\n// Target.h\nclass Target\n{\npublic:\n    int value;\n    Target(int _value) : value(_value) {}\n};\n\n// main.cpp\nint main()\n{\n    ObjectManager manager;\n    std::shared_ptr&lt;Target&gt; t = manager.createObject&lt;Target&gt;(5);\n    std::cout &lt;&lt; t-&gt;value;\n}\n</code></pre>\n\n<p>EDIT: the 'Object' object in ObjectManager was part of my implementation code and should not have been part of this example here - it should have simply been Target</p>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1501155329, "post_id": 45338837, "comment_id": 77660117, "body": "The callback is called whenever trackbar position changes (with the first parameter being the current position), and <code>setTrackbarPos</code> changes the trackbar position (just like moving it with a mouse would). | <code>setTrackbarPos</code> is a library function, there&#39;s no way it could be &quot;aware&quot; that something like <code>g_cap</code> exists. Even if it could access it, it wouldn&#39;t be very useful, as not everyone wants to use a trackbar to seek in a video. That&#39;s why the callback support is there - it allows the user to customize the behaviour, without the need to modify and rebuild the library."}, {"owner": {"reputation": 404, "user_id": 7619293, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/feaff5e9cc3e1373ac832a1a1f9d1696?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper", "link": "https://stackoverflow.com/users/7619293/jesper"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1501156882, "post_id": 45338837, "comment_id": 77661249, "body": "When you say the current position what do you mean exactly? It has a pointer to <code>g_slider_position</code> so I&#39;m assuming that&#39;s how it knows the current position? Will the <code>current_pos</code> be taken in as the argument after calling <code>setTrackbarPos</code>?"}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1501158215, "post_id": 45338837, "comment_id": 77662268, "body": "<code>g_slider_position</code> is not really necessary for that. The UI control from whatever backend is used (Windows,Qt, GTK, etc.) tracks the position internally and there are several ways to access it -- you can call <code>getTrackbarPos</code>, you can provide a pointer to variable in <code>createTrackbar</code> which will be automatically updated as the position is changed, or you can set a callback function, which will be called with the current position as the first parameter whenever the position changes."}, {"owner": {"reputation": 404, "user_id": 7619293, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/feaff5e9cc3e1373ac832a1a1f9d1696?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper", "link": "https://stackoverflow.com/users/7619293/jesper"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1501161912, "post_id": 45338837, "comment_id": 77665470, "body": "It seems a lot of things are going on behind the scenes then and it&#39;s hard to get a good understanding without peeking behind those scenes. Do you know of any resource where I can look more into this on a general <i>c++</i> level or as it relates to <i>OpenCV</i>?"}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1501164118, "post_id": 45338837, "comment_id": 77667406, "body": "Yep, GUI&#39;s are a non-trivial topic :) I can&#39;t think of any specific resource, but read up on event-driven programming, pick some GUI framework and start learning that. The language doesn&#39;t really matter, the principles are generally the same. At some point, it would be good idea to read through the sources of the revelant part of OpenCV highgui module. Expect that it will probably take a decent amount of work and time to learn and understand this topic."}, {"owner": {"reputation": 404, "user_id": 7619293, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/feaff5e9cc3e1373ac832a1a1f9d1696?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper", "link": "https://stackoverflow.com/users/7619293/jesper"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1501166349, "post_id": 45338837, "comment_id": 77669285, "body": "The event-driven programming I&#39;ve seen in a language like <i>Javascript</i> has not really caused me that many problems so I think it might be something more specific to <i>c++</i>. I&#39;ll probably look into the <i>OpenCV</i> sources if I still struggle with it. Thanks!"}, {"owner": {"reputation": 345, "user_id": 3875388, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/55ed443f429fad4949ce495f5d0f5bd8?s=128&d=identicon&r=PG&f=1", "display_name": "user3875388", "link": "https://stackoverflow.com/users/3875388/user3875388"}, "edited": false, "score": 0, "creation_date": 1550141174, "post_id": 45338837, "comment_id": 96164979, "body": "On my mac with opencv 3.4, the callback is not called. I doesn&#39;t know why"}], "owner": {"reputation": 404, "user_id": 7619293, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/feaff5e9cc3e1373ac832a1a1f9d1696?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper", "link": "https://stackoverflow.com/users/7619293/jesper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 382, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1501110446, "creation_date": 1501110446, "question_id": 45338837, "link": "https://stackoverflow.com/questions/45338837/how-is-the-callback-function-called-in-this-opencv-example", "title": "How is the callback function called in this OpenCV example?", "body": "<p>I started reading <em>Learning OpenCV 3</em> but since I haven't programmed much in c++ I am confused by the way of using a callback function in the following code snippet:</p>\n\n<pre><code>int g_slider_position = 0;\nint g_run = 1, g_dontset = 0;\ncv::VideoCapture g_cap;\n\nvoid onTrackBarSlide(int pos, void *)\n{\n    g_cap.set(CV_CAP_PROP_POS_FRAMES, pos);\n    if (!g_dontset) g_run = 1;\n    g_dontset = 0;\n}\n\nint main(int argc, char** argv)\n{\n    g_cap.open(std::string(argv[1]));\n\n    int frames = (int)g_cap.get(CV_CAP_PROP_FRAME_COUNT);\n\n    cv::createTrackbar(\n        \"Position\",\n        \"Example 2-4\",\n        &amp;g_slider_position,\n        frames,\n        onTrackBarSlide\n    );\n    cv::Mat frame;\n    for (;;)\n    {\n        if (g_run != 0)\n        {\n            g_cap &gt;&gt; frame;\n            if (frame.empty())\n            {\n                break;\n            }\n            int current_pos = (int)g_cap.get(CV_CAP_PROP_POS_FRAMES);\n            g_dontset = 1;\n            cv::setTrackbarPos(\"Position\", \"Example 2-4\", current_pos);\n            cv::imshow(\"Example 2-4\", frame);\n            g_run -= 1;\n        }\n\n        char c = (char)cv::waitKey(10);\n\n        if (c == 's')\n        {\n            g_run = 1;\n        }\n\n        if (c == 'r')\n        {\n            g_run = -1;\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>What I gather from this is that pressing somewhere on the <em>Trackbar</em> raises an event that calls <code>onTrackBarSlide</code>. </p>\n\n<p>What I'm wondering there is where do the <code>int pos</code> argument come from? I couldn't find it on the function documentation.</p>\n\n<p>When I step through this program <code>onTrackBarSlide</code> is called after <code>setTrackbarPos</code>. This confuses me and makes me think that <code>setTrackbarPos</code> is just raising an event with <code>current_pos</code> as the argument that <code>onTrackBarSlide</code> listens for. </p>\n\n<p>But why couldn't it be done more directly by having <code>setTrackbarPos</code> call <code>g_cap.set</code> directly?</p>\n"}, {"tags": ["c++", "qt", "qt5", "qvboxlayout"], "answers": [{"tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": false, "score": 1, "last_activity_date": 1501139388, "last_edit_date": 1501139388, "creation_date": 1501125480, "answer_id": 45340756, "question_id": 45338820, "link": "https://stackoverflow.com/questions/45338820/why-qtaligntop-doesnt-work-in-qvboxlayout-that-i-use-like-main-layout/45340756#45340756", "title": "Why Qt::AlignTop doesn&#39;t work in QVBoxLayout that I use like main layout?", "body": "<p>I understand that you want to place it and that the top is shown, so you could use QSpacerItem to push it.</p>\n\n<pre><code>class CustomDialog : public QDialog {\n    Q_OBJECT\n    QVBoxLayout *mainLayout;\n\npublic:\n    CustomDialog(QWidget *parent=0): QDialog(parent)\n    {\n        mainLayout = new QVBoxLayout(this);\n\n        QSpacerItem *verticalSpacer = new QSpacerItem(20, 217, QSizePolicy::Minimum, QSizePolicy::Expanding);\n        mainLayout-&gt;addItem(verticalSpacer);\n\n        addWidgets(\"1\");\n        addWidgets(\"2\");\n    }\nprivate:\n    void addWidgets(const QString &amp;text)\n    {\n        QLabel* label = new QLabel(text);\n\n        QVBoxLayout *verLayout = new QVBoxLayout;\n        verLayout-&gt;addStretch();\n        verLayout-&gt;setAlignment(Qt::AlignTop);\n\n        verLayout-&gt;addWidget(label, Qt::AlignTop);\n        mainLayout-&gt;setAlignment(Qt::AlignTop);\n        mainLayout-&gt;insertLayout(mainLayout-&gt;count()-1, verLayout);\n    }\n};\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/wgWAe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wgWAe.png\" alt=\"enter image description here\"></a></p>\n\n<p>Or if you want it to have a reverse order you must insert it in the first position with:</p>\n\n<pre><code>mainLayout-&gt;insertLayout(0, verLayout);\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/xPiDo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xPiDo.png\" alt=\"enter image description here\"></a></p>\n\n<p>Note: The use of <a href=\"http://doc.qt.io/qt-5/qboxlayout.html#addLayout\" rel=\"nofollow noreferrer\">addLayout</a> is incorrect since the second parameter is <code>stretch</code>.</p>\n"}], "owner": {"reputation": 81, "user_id": 8353203, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/ba29c4496ffe15d48ea2ffd0e3a2c5ac?s=128&d=identicon&r=PG&f=1", "display_name": "Dasd", "link": "https://stackoverflow.com/users/8353203/dasd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 508, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1501534630, "creation_date": 1501110313, "last_edit_date": 1501534630, "question_id": 45338820, "link": "https://stackoverflow.com/questions/45338820/why-qtaligntop-doesnt-work-in-qvboxlayout-that-i-use-like-main-layout", "title": "Why Qt::AlignTop doesn&#39;t work in QVBoxLayout that I use like main layout?", "body": "<p>I have simple class that inherits QDialog, I add dynamically elements\nand my elements are located in the center, but I want to add them at the top.</p>\n\n<pre><code>class CustomDialog : public QDialog {\n    Q_OBJECT\nprivate:\n    QVBoxLayout *mainLayout;\nCustomDialog() \n{\n     mainLayout = new QVBoxLayout();\n    setLayout(mainLayout);\n}\npublic:\n    void update() \n   {\n    QLabel* label = new QLabel(\"some text\");\n\n    QVBoxLayout *verLayout = new QVBoxLayout;\n    verLayout-&gt;addStretch();\n    verLayout-&gt;setAlignment(Qt::AlignTop);\n\n    verLayout-&gt;addWidget(label, Qt::AlignTop); \n    mainLayout-&gt;setAlignment(Qt::AlignTop);\n    mainLayout-&gt;addLayout(verLayout, Qt::AlignTop);\n    }\n};\n</code></pre>\n\n<p>What am I doing wrong? and why my dynamically added elements always in center?</p>\n"}, {"tags": ["c++", "recursion", "binary-search-tree"], "comments": [{"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 3, "creation_date": 1501110511, "post_id": 45338794, "comment_id": 77639686, "body": "&quot;Do recursive int functions add 1 to their return value every time they return to their preceding stack frame?&quot; In general? No. But your <code>findHeight()</code> function does -- see the <code>+ 1</code> at the end of the return line."}], "answers": [{"comments": [{"owner": {"reputation": 269, "user_id": 4147767, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/e20d2cd614df0b820c4b0389ed011783?s=128&d=identicon&r=PG&f=1", "display_name": "BabaSvoloch", "link": "https://stackoverflow.com/users/4147767/babasvoloch"}, "edited": false, "score": 0, "creation_date": 1501111196, "post_id": 45338887, "comment_id": 77639863, "body": "Oh I see! OK. I guess what I still don&#39;t understand is that, it looks to me like the return function is taking the int value of findHeight(root-&gt;left) and of findHeight(root-&gt;right) and passing those to the max function, and then adding 1 to the final result. I don&#39;t quite get how that &quot;+1&quot; is maneuvering its way into the recursive calls, because it&#39;s outside of the parameters of the &#39;max&#39; function"}, {"owner": {"reputation": 269, "user_id": 4147767, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/e20d2cd614df0b820c4b0389ed011783?s=128&d=identicon&r=PG&f=1", "display_name": "BabaSvoloch", "link": "https://stackoverflow.com/users/4147767/babasvoloch"}, "edited": false, "score": 0, "creation_date": 1501111287, "post_id": 45338887, "comment_id": 77639891, "body": "I&#39;m so sorry, I made a mistake with copying the code for that line of the findHeight(Node* root) function (I fixed it now). It was supposed to be &quot;return max(findHeight(root-&gt;left),findHeight(root-&gt;right))+1;&quot; rather than &quot;findHeight(max(findHeight(root-&gt;left),findHeight(root-&gt;righ&zwnj;&#8203;t))+1);"}, {"owner": {"reputation": 51, "user_id": 6791349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a014ea82cd2d15eeb867d7cc0b11cd1?s=128&d=identicon&r=PG&f=1", "display_name": "camstu", "link": "https://stackoverflow.com/users/6791349/camstu"}, "reply_to_user": {"reputation": 269, "user_id": 4147767, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/e20d2cd614df0b820c4b0389ed011783?s=128&d=identicon&r=PG&f=1", "display_name": "BabaSvoloch", "link": "https://stackoverflow.com/users/4147767/babasvoloch"}, "edited": false, "score": 0, "creation_date": 1501111917, "post_id": 45338887, "comment_id": 77640038, "body": "So consider a simple example of a three node balanced tree. The first call will have return( max(findHeight(left),findHeight(right)) +1). Since both calls will essentially return the same thing lets trace what happens on the left. The next call will be return( max(fh(NULL),fh(NULL)) + 1) which will resolve to return( -1 + 1). Then going up another level the return will look like return(0 + 1), hence a depth of one as we would expect. The +1 part of the base case and is instead an offset to have the height index start at 1 rather than 0."}], "tags": [], "owner": {"reputation": 51, "user_id": 6791349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a014ea82cd2d15eeb867d7cc0b11cd1?s=128&d=identicon&r=PG&f=1", "display_name": "camstu", "link": "https://stackoverflow.com/users/6791349/camstu"}, "is_accepted": false, "score": 1, "last_activity_date": 1501110848, "creation_date": 1501110848, "answer_id": 45338887, "question_id": 45338794, "link": "https://stackoverflow.com/questions/45338794/interpreting-the-return-value-of-a-recursive-function-of-type-int-in-c/45338887#45338887", "title": "Interpreting the return value of a recursive function of type &#39;int&#39; in c++", "body": "<p>My understanding of your question is how is the height incremented for each recursive call of findHeight, let me know if that's not quite right.</p>\n\n<p>In general in C++ there isn't specific syntax to define a function as recursive and is instead left to the programmer to use their function recursively through the arguments and return values of their function.</p>\n\n<p>With this specific function it looks like the increment is happening at the end of this line: </p>\n\n<pre><code>    return findHeight(max(findHeight(root-&gt;left),findHeight(root-&gt;right)) + 1;\n</code></pre>\n\n<p>The +1 at the end of the return function increments the recursive call explicitly, there isn't any implicit increment being done by the int function other than the fact that it returns an int.</p>\n"}, {"comments": [{"owner": {"reputation": 269, "user_id": 4147767, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/e20d2cd614df0b820c4b0389ed011783?s=128&d=identicon&r=PG&f=1", "display_name": "BabaSvoloch", "link": "https://stackoverflow.com/users/4147767/babasvoloch"}, "edited": false, "score": 0, "creation_date": 1501112369, "post_id": 45338965, "comment_id": 77640163, "body": "I understand this now! Thank you :)"}], "tags": [], "owner": {"reputation": 1334, "user_id": 1328780, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c0241ebc4503b57de65aa5d289f1d588?s=128&d=identicon&r=PG", "display_name": "bjhend", "link": "https://stackoverflow.com/users/1328780/bjhend"}, "is_accepted": false, "score": 1, "last_activity_date": 1501111434, "creation_date": 1501111434, "answer_id": 45338965, "question_id": 45338794, "link": "https://stackoverflow.com/questions/45338794/interpreting-the-return-value-of-a-recursive-function-of-type-int-in-c/45338965#45338965", "title": "Interpreting the return value of a recursive function of type &#39;int&#39; in c++", "body": "<p>Your pseudo-code misses what happens after the <code>PAUSE</code>. What's missing is </p>\n\n<ul>\n<li>the call <code>fH(root-&gt;right)</code> (even if <code>root-&gt;right</code> is a <code>nullptr</code>)</li>\n<li>computing <code>max</code> of the two recursive calls and</li>\n<li>adding 1 to the result.</li>\n</ul>\n\n<p>Particularly, the last point is essential to count the height levels of the tree.</p>\n\n<p>If you add these points to your pseudo-code you may see that it resembles the structure of your specific tree.</p>\n"}, {"comments": [{"owner": {"reputation": 269, "user_id": 4147767, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/e20d2cd614df0b820c4b0389ed011783?s=128&d=identicon&r=PG&f=1", "display_name": "BabaSvoloch", "link": "https://stackoverflow.com/users/4147767/babasvoloch"}, "edited": false, "score": 0, "creation_date": 1501112097, "post_id": 45339015, "comment_id": 77640093, "body": "Thank you! This makes sense"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1501117713, "post_id": 45339015, "comment_id": 77641424, "body": "These freehand circles need to be red.  Still +1 for trying."}, {"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1503532343, "post_id": 45339015, "comment_id": 78659982, "body": "@Yakk I was all out of red paint; You reddist!"}], "tags": [], "owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "is_accepted": false, "score": 2, "last_activity_date": 1501113377, "last_edit_date": 1501113377, "creation_date": 1501111846, "answer_id": 45339015, "question_id": 45338794, "link": "https://stackoverflow.com/questions/45338794/interpreting-the-return-value-of-a-recursive-function-of-type-int-in-c/45339015#45339015", "title": "Interpreting the return value of a recursive function of type &#39;int&#39; in c++", "body": "<p>The function findHeight returns the currently found max height.</p>\n\n<p>So The max call is reasonable with that in mind.</p>\n\n<p><a href=\"https://i.stack.imgur.com/7uBwU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7uBwU.png\" alt=\"enter image description here\"></a></p>\n\n<p>In this action reenactment we get the following function calls.</p>\n\n<ol>\n<li>Call to node 1. We expect to find 2 more depth on the left hand side. One more on the right hand side. So max, will hopefully decide on the left hand side. max calls Node2 and node3</li>\n<li>The call to 2 is discussed in point 4.</li>\n<li>The call to 3 returns 0. max of -1 and -1,  +1.  Max is -1, add one to that.</li>\n<li>The findHeight to node 2, will have the max of(left node (-1)), and the right node 4) Item 5 + 1. </li>\n<li>max of -1, -1  +1 = 0. So this makes max of Point 4 evaluate to one.</li>\n</ol>\n\n<p>So in the end the function findHeight says, this is the end of my current inspection (0 height). The previous function calls can add what ever they like to my one.</p>\n\n<p>In my opinion this function can be written in a more intuitive way. </p>\n\n<p>Maybe </p>\n\n<pre><code>int treeHeight(Node* node){\n    if (!node) // We are not a node.\n        return 0;\n    int weAreANode = 1;  // Height 1.\n    int heightLeft = treeHeight(node-&gt;left);\n    int heightRight = treeHeight(node-&gt;right);\n    int theHighestSubtreeHeight = std::max(heightLeft, heightRight);\n\n    return weAreANode + theHighestSubtreeHeight;\n}\n</code></pre>\n\n<p>I really just wanted to paint stuff again. </p>\n"}, {"comments": [{"owner": {"reputation": 269, "user_id": 4147767, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/e20d2cd614df0b820c4b0389ed011783?s=128&d=identicon&r=PG&f=1", "display_name": "BabaSvoloch", "link": "https://stackoverflow.com/users/4147767/babasvoloch"}, "edited": false, "score": 0, "creation_date": 1501112071, "post_id": 45339020, "comment_id": 77640080, "body": "Yes!! Ok I get it! Thank you so much!! This pulled it together for me:)"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user3902496"}, "is_accepted": true, "score": 1, "last_activity_date": 1501111875, "creation_date": 1501111875, "answer_id": 45339020, "question_id": 45338794, "link": "https://stackoverflow.com/questions/45338794/interpreting-the-return-value-of-a-recursive-function-of-type-int-in-c/45339020#45339020", "title": "Interpreting the return value of a recursive function of type &#39;int&#39; in c++", "body": "<p>Consider this tree,</p>\n\n<pre><code>     5\n   /   \\\n  3     10\n / \\   /  \n2   4 8\n</code></pre>\n\n<p>The function will be called with root which is <code>5</code>.</p>\n\n<p>Then it will be called with <code>3</code> , <code>2</code> (left child <code>3</code>) and then <code>4</code> (right child <code>3</code>). </p>\n\n<p><code>2</code>'s height evaluates to <code>max(-1, -1) + 1 = 0</code> and returned as the result of <code>3</code>'s call to <code>findHeight(root-&gt;left)</code>. The same happens with <code>4</code>.</p>\n\n<p>The call to <code>3</code> (<code>5</code>'s <code>findHeight(root-&gt;left)</code>) now evaluates to <code>max(0, 0) + 1 = 1</code>. </p>\n\n<p>So <code>5</code>'s left child has a height of <code>1</code>.</p>\n\n<p>The other child (right child) follows the same process where the call to <code>10</code>'s left child returns a height of <code>0</code> and it's right child returns a height of <code>-1</code>. <code>max(0, -1) + 1 = 1</code> which will be returned to <code>5</code>'s call to <code>findHeight(root-&gt;right)</code>.</p>\n\n<p>Now back at the top, <code>5</code>'s height is evaluated as <code>max(1,1) + 1 = 2</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 690, "user_id": 1915786, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5c83fee4d39bf5f07880c045d6998cb1?s=128&d=identicon&r=PG&f=1", "display_name": "Praful Surve", "link": "https://stackoverflow.com/users/1915786/praful-surve"}, "is_accepted": false, "score": 1, "last_activity_date": 1501113331, "creation_date": 1501113331, "answer_id": 45339210, "question_id": 45338794, "link": "https://stackoverflow.com/questions/45338794/interpreting-the-return-value-of-a-recursive-function-of-type-int-in-c/45339210#45339210", "title": "Interpreting the return value of a recursive function of type &#39;int&#39; in c++", "body": "<p>So considering your example, let's say you have root node as 'A' and left node as 'B' and right node as 'C'. The program should return '1'-</p>\n\n<p>Here is the stack trace-</p>\n\n<pre><code>findHeight(A)       \nfindHeight(B)       \nPOP findHeight(NULL)    returns -1\n</code></pre>\n\n<p>The <code>findHeight(NULL)</code> is for the B's left node, which is NULL and returns -1</p>\n\n<p>Now the stack has-</p>\n\n<pre><code>findHeight(A)       \nfindHeight(B)       max(-1, /*code yet to execute*/) + 1\nPOP findHeight(NULL)    returns -1 \n</code></pre>\n\n<p>The <code>findHeight(NULL)</code> is for the B's right node, which is NULL and returns -1.</p>\n\n<p>Now the stack would be like-</p>\n\n<pre><code>findHeight(A)       \nPOP findHeight(B)       max(-1, -1) + 1 -&gt; returns 0 \n</code></pre>\n\n<p>At this point the control is back to your BST's root node i.e. the node 'A' and after executing right node's (Node C's) left node, the stack would be like-</p>\n\n<pre><code>findHeight(A)       max(0, /*code yet to execute*/) + 1\nfindHeight(C)\nfindHeight(NULL)    returns -1\n</code></pre>\n\n<p>The findHeight(NULL) is for the C's left node, which is NULL and returns -1</p>\n\n<p>Now the stack has-</p>\n\n<pre><code>findHeight(A)       max(0, /*code yet to execute*/) + 1       \nfindHeight(C)       max(-1, /*code yet to execute*/) + 1\nPOP findHeight(NULL)    returns -1\n</code></pre>\n\n<p>The findHeight(NULL) is for the B's right node, which is NULL and returns -1.</p>\n\n<p>Now the stack would be like-</p>\n\n<pre><code>findHeight(A)       max(0, /*code yet to execute*/) + 1      \nPOP findHeight(C)       max(-1, -1) + 1 -&gt; returns 0 \n</code></pre>\n\n<p>After completion of findHeight(C), the control goes back to findHeight(A) and now the stack has-</p>\n\n<pre><code>findHeight(A)       max(0, 0) + 1 -&gt; returns 1\n</code></pre>\n\n<p>You have to add + 1 where you are explictly calling the function from your main. </p>\n"}, {"comments": [{"owner": {"reputation": 269, "user_id": 4147767, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/e20d2cd614df0b820c4b0389ed011783?s=128&d=identicon&r=PG&f=1", "display_name": "BabaSvoloch", "link": "https://stackoverflow.com/users/4147767/babasvoloch"}, "edited": false, "score": 1, "creation_date": 1501127268, "post_id": 45339215, "comment_id": 77643642, "body": "that really helped me a lot, the way you broke down the return line. Usually the guy who makes these videos breaks everything down really well, but I think it was assumed that I had a better understanding of recursion than I do. it&#39;s a lot easier to see what&#39;s happening this way, thank you!"}], "tags": [], "owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "is_accepted": false, "score": 1, "last_activity_date": 1501113344, "creation_date": 1501113344, "answer_id": 45339215, "question_id": 45338794, "link": "https://stackoverflow.com/questions/45338794/interpreting-the-return-value-of-a-recursive-function-of-type-int-in-c/45339215#45339215", "title": "Interpreting the return value of a recursive function of type &#39;int&#39; in c++", "body": "<p>There are too many things happening on that return line.  Lets rewrite the code like this:</p>\n\n<pre><code>int findHeight(Node* root){\n    if(root == NULL){\n        return -1;\n    }\n    int left = findHeight(root-&gt;left);\n    int right = findHeight(root-&gt;right);\n    int maxval = max(left,right);\n    return maxval + 1;\n}\n\nint max(int a, int b){\n    if (a &gt; b)\n        return a;\n    else\n        return b;\n}\n</code></pre>\n\n<p>Now if we expand the calls you can see that at a leaf on the very bottom the left is -1 and the right is -1 and then maxval is -1 and it will return 0 (because there is nothing below the leaf).  Then after that bottom call has returned 0 the maxval of the next level up will be 0 and the value returned will be 1 (because the leaf is below).</p>\n\n<p>Let's look at one that only has left children a couple levels deep:</p>\n\n<pre><code>int findHeight(Node* root){\n    if(root == NULL) return -1; // not taken\n\n    int left = findHeight(Node* root-&gt;left){\n        if(root == NULL) return -1; // not taken\n\n        int left = findHeight(Node* root-&gt;left){\n            if(root == NULL) return -1; // not taken\n\n            int left = findHeight(Node* root-&gt;left){\n                if(root == NULL) return -1; // return here, rest of code doesn't happen\n            } // left = -1 at this point (no left children below here)\n\n            int right = findHeight(Node* root-&gt;right){\n                if(root == NULL) return -1; // return here, rest of code doesn't happen\n            } // right = -1 at this point (no right children)\n\n            int maxval = max(left,right); // left = -1, right  = -1\n            return maxval + 1; // -1 + 1 = 0\n        } // left = 0 at this point (1 left child below here)\n\n        int right = findHeight(Node* root-&gt;right){\n            if(root == NULL) return -1; // return here, rest of code doesn't happen\n        } // right = -1 at this point (no right children)\n\n        int maxval = max(left,right); // left = 0, right = -1;\n        return maxval + 1; // 0 + 1 = 1\n    } // left = 1 at this point (2 left child below here)\n\n    int right = findHeight(Node* root-&gt;right){\n        if(root == NULL) return -1; // return here, rest of code doesn't happen\n    } // right = -1 at this point (no right children)\n\n    int maxval = max(left,right); // left = 1, right = -1\n    return maxval + 1; // 1 + 1 = 2\n}\n</code></pre>\n"}], "owner": {"reputation": 269, "user_id": 4147767, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/e20d2cd614df0b820c4b0389ed011783?s=128&d=identicon&r=PG&f=1", "display_name": "BabaSvoloch", "link": "https://stackoverflow.com/users/4147767/babasvoloch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1044, "favorite_count": 0, "accepted_answer_id": 45339020, "answer_count": 6, "score": 1, "last_activity_date": 1501113377, "creation_date": 1501110149, "last_edit_date": 1501111128, "question_id": 45338794, "link": "https://stackoverflow.com/questions/45338794/interpreting-the-return-value-of-a-recursive-function-of-type-int-in-c", "title": "Interpreting the return value of a recursive function of type &#39;int&#39; in c++", "body": "<p>Having trouble understanding an explanation of how to find the height of a binary search tree using a recursive function of type int. </p>\n\n<p>For any binary search tree, given a pointer to the root node of the tree, where Node is defined conventionally as follows...</p>\n\n<pre><code>struct Node {\n    int data;\n    Node* left;\n    Node* right;\n}\nNode* root;\n</code></pre>\n\n<p>we can use the following recursive function of type int to give us the height of the binary search tree... (the function 'max' just takes two ints and returns the greater of the two)</p>\n\n<pre><code>int findHeight(Node* root){\n    if(root == NULL){\n        return -1;\n    }\n    return max(findHeight(root-&gt;left),findHeight(root-&gt;right)) + 1;\n}\n\nint max(int a, int b){\n    if (a &gt; b)\n        return a;\n    else\n        return b;\n}\n</code></pre>\n\n<p>My understanding is that findHeight(root->left) finds the height of the left subtree of root, findHeight(root->right) finds the height of the right subtree of root, and then max returns whichever is greater, since that will be the overall height of the tree, plus one to include the edge that connects root to that subtree.</p>\n\n<p>I'm pretty new to recursion, so I decided to just unpack one of the recursive function calls and try to understand it. I wrote out findHeight(root->left) in a sort of pseudo-code way, with the word \"PAUSE\" in it every time the function called itself, to represent what was happening on the stack and indented the next function call to show a new stack frame... (in my sample BST the height of the left subtree was 2)</p>\n\n<pre><code>int fH(Node* root){\n    if(root == NULL)\n        return -1;\n\n    fH(root-&gt;left);\n    PAUSE\n\n    int fH(Node* root){\n        if root == NULL)\n            return -1;\n\n        fH(root-&gt;left);\n        PAUSE\n\n        int fHR(Node*root){\n            if (root == NULL)\n                return -1;\n\n            fH(root-&gt;left);\n            PAUSE\n\n            int fHR(Node* root){\n                if (root == NULL)\n                    return -1;\n\n                fH(root-&gt;left);\n                PAUSE\n\n                int fHR(Node* root){\n                if(root==NULL)\n                    return -1;\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>The function works correctly, but I don't understand how the return value of the function is growing from -1, which is what the final execution of the function returns, to 2. Do recursive int functions add 1 to their return value every time they return to their preceding stack frame?</p>\n\n<p>I don't see anything in that short function that increments the return value of the function. The only thing I see is that it's -1 for the final call.</p>\n\n<p>If anyone could try to explain this to me I would really appreciate the help. Thank you very much.</p>\n"}, {"tags": ["c++", "wstring", "codepoint"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1501107486, "post_id": 45338319, "comment_id": 77638729, "body": "Does <a href=\"http://en.cppreference.com/w/cpp/string/basic_string\" rel=\"nofollow noreferrer\"><code>std::u32string</code></a> work for you?"}, {"owner": {"reputation": 1, "user_id": 7204583, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ce2ed98a422f77125dfdb67612acd071?s=128&d=identicon&r=PG&f=1", "display_name": "jim kaip", "link": "https://stackoverflow.com/users/7204583/jim-kaip"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1501107594, "post_id": 45338319, "comment_id": 77638775, "body": "No, must be wstring from a codepoint &gt; 65535, 0xffff"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1501107619, "post_id": 45338319, "comment_id": 77638784, "body": "ASCII and &gt; 65535? Impossible! You are talking about Unicode?"}, {"owner": {"reputation": 1, "user_id": 7204583, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ce2ed98a422f77125dfdb67612acd071?s=128&d=identicon&r=PG&f=1", "display_name": "jim kaip", "link": "https://stackoverflow.com/users/7204583/jim-kaip"}, "edited": false, "score": 0, "creation_date": 1501107740, "post_id": 45338319, "comment_id": 77638836, "body": "No ASCII, only wstring. Function wrong maybe name..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1501107793, "post_id": 45338319, "comment_id": 77638863, "body": "ASCII is one Byte! The greatest value is 255."}, {"owner": {"reputation": 1, "user_id": 7204583, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ce2ed98a422f77125dfdb67612acd071?s=128&d=identicon&r=PG&f=1", "display_name": "jim kaip", "link": "https://stackoverflow.com/users/7204583/jim-kaip"}, "edited": false, "score": 0, "creation_date": 1501107951, "post_id": 45338319, "comment_id": 77638928, "body": "Ok, let say function  wstring giveWStringFrom_a_number(size_t i) where i &gt;65535  wstring giveWStringFrom_a_number(size_t i) {     wchar_t character[]= {i,0};     return wstring(character); }"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1501108223, "post_id": 45338319, "comment_id": 77639023, "body": "Ok, let&#39;s say you don&#39;t know what you are doing. If in your Implementation wchar_t is a short, than you can not fit values greater than 65535 into it. If you have a UTF-32 encoded char you have to convert it to UTF-16 to fit into wstring."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1501108477, "post_id": 45338319, "comment_id": 77639111, "body": "How must do &quot;<i>what</i>&quot;? You wish to &quot;<i>take wrong wstring</i>&quot;? What does taking wrong wstring mean? Does the shown code not do that? How does the behaviour of shown code differ from what you intended?"}, {"owner": {"reputation": 1, "user_id": 7204583, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ce2ed98a422f77125dfdb67612acd071?s=128&d=identicon&r=PG&f=1", "display_name": "jim kaip", "link": "https://stackoverflow.com/users/7204583/jim-kaip"}, "edited": false, "score": 0, "creation_date": 1501108573, "post_id": 45338319, "comment_id": 77639138, "body": "How  i can have wstring from i&gt;65535 in UTF8 encoded?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1501108594, "post_id": 45338319, "comment_id": 77639147, "body": "@manni66 -- the greatest value for ASCII is 127; there are a bunch of &quot;extended ASCII&quot; encodings that use values from 128 to 255."}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 2, "creation_date": 1501108928, "post_id": 45338319, "comment_id": 77639252, "body": "Please speak in more complete sentences. I have no idea what you&#39;re asking."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1501108930, "post_id": 45338319, "comment_id": 77639253, "body": "@PeteBecker you mean US-ASCII ;)"}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1501108964, "post_id": 45338319, "comment_id": 77639266, "body": "If your <code>wchar_t</code> is 16 bit and thus your <code>wstring</code>s are UTF-16, if you want to fit a code point &gt; 65535 you have to explode it into the so-called surrogate pairs. You should definitely <a href=\"https://en.wikipedia.org/wiki/UTF-16#Description\" rel=\"nofollow noreferrer\">read about them</a>."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1501109161, "post_id": 45338319, "comment_id": 77639330, "body": "@manni66 US- prefix is redundant ;) The A stands for American."}], "answers": [{"comments": [{"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 1, "creation_date": 1501109460, "post_id": 45338676, "comment_id": 77639423, "body": "Instead of checking for Windows (which actually would be <code>#ifdef _WIN32</code>), I would check for the size of <code>wchar_t</code> - it&#39;s easier, clearer and more correct."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1501109823, "post_id": 45338676, "comment_id": 77639521, "body": "You can check the value of <code>WCHAR_MAX</code>. <code>#if WCHAR_MAX == 65535</code>... <code>#elif WCHAR_MAX ==  4294967295</code>... <code>#else</code> <code>#error unsupported wchar_t size</code> <code>#endif</code>."}, {"owner": {"reputation": 1, "user_id": 7204583, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ce2ed98a422f77125dfdb67612acd071?s=128&d=identicon&r=PG&f=1", "display_name": "jim kaip", "link": "https://stackoverflow.com/users/7204583/jim-kaip"}, "edited": false, "score": 0, "creation_date": 1503666549, "post_id": 45338676, "comment_id": 78722715, "body": "Thank&#39;s for all. So depends from OS."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1501110188, "last_edit_date": 1501110188, "creation_date": 1501109366, "answer_id": 45338676, "question_id": 45338319, "link": "https://stackoverflow.com/questions/45338319/from-ascii-codepoint-of-character-to-wstring/45338676#45338676", "title": "from ascii codepoint of character to wstring", "body": "<p><code>std::wstring</code> uses <code>wchar_t</code> elements.  <code>wchar_t</code> is not portable, as it uses 2 bytes (UTF-16 encoded) on Windows, but uses 4 bytes (UTF-32 encoded) on other platforms.</p>\n\n<p>A Unicode codepoint stored in a <code>size_t</code> can be assigned as-is to a <code>wchar_t</code> only on non-Windows platforms.  On Windows, a single <code>wchar_t</code> can only handle Unicode characters in the BMP (UCS-2) range (U+0000 - U+FFFF).  Higher codepoints must be encoded as 2 <code>wchar_t</code> elements, known as a \"surrogate pair\" in UTF-16.</p>\n\n<p>What you have shown will only work as-is on non-Windows platforms.  If you need to support multiple platforms, you will have to <code>#ifdef</code> the code accordingly, eg:</p>\n\n<pre><code>std::wstring giveWStringFromCodepoint(size_t cp)\n{\n    #ifdef _WIN32\n\n    wchar_t ch[2];\n    if (cp &lt; 0x10000)\n    {\n        ch[0] = (wchar_t) cp;\n        return std::wstring(ch, 1);\n    }\n    else\n    {\n        cp -= 0x10000;\n        ch[0] = (wchar_t) ((cp &gt;&gt; 10) + 0xD800);\n        ch[1] = (wchar_t) ((cp &amp; 0x3FF) + 0xDC00);\n        return std::wstring(ch, 2);\n    }\n\n    #else\n\n    wchar_t ch = (wchar_t) i;\n    return std::wstring(&amp;ch, 1);\n\n    #endif\n}\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>std::wstring giveWStringFromCodepoint(size_t cp)\n{\n    #if (WCHAR_MAX &gt; 0xFFFF)\n\n    wchar_t ch = (wchar_t) i;\n    return std::wstring(&amp;ch, 1);\n\n    #else\n\n    wchar_t ch[2];\n    if (cp &lt; 0x10000)\n    {\n        ch[0] = (wchar_t) cp;\n        return std::wstring(ch, 1);\n    }\n    else\n    {\n        cp -= 0x10000;\n        ch[0] = (wchar_t) ((cp &gt;&gt; 10) + 0xD800);\n        ch[1] = (wchar_t) ((cp &amp; 0x3FF) + 0xDC00);\n        return std::wstring(ch, 2);\n    }\n\n    #endif\n}\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>std::wstring giveWStringFromCodepoint(size_t cp)\n{\n    if (sizeof(wchar_t) &gt; 2)\n    {\n        wchar_t ch = (wchar_t) i;\n        return std::wstring(&amp;ch, 1);\n    }\n    else\n    {\n        wchar_t ch[2];\n        if (cp &lt; 0x10000)\n        {\n            ch[0] = (wchar_t) cp;\n            return std::wstring(ch, 1);\n        }\n        else\n        {\n            cp -= 0x10000;\n            ch[0] = (wchar_t) ((cp &gt;&gt; 10) + 0xD800);\n            ch[1] = (wchar_t) ((cp &amp; 0x3FF) + 0xDC00);\n            return std::wstring(ch, 2);\n        }\n    }\n}\n</code></pre>\n\n<p>That being said, you are better off using a 3rd party Unicode library, like ICONV or ICU, to handle this type of conversion for you.</p>\n\n<p>If you are using C++11 or later, it has <code>std::u16string</code> and <code>std::u32string</code> available to avoid the portability issues of <code>std::wstring</code>.  Consider using them when possible.  Or, at least, consider using <code>std::wstring_convert</code> when dealing with UTF conversions, if not using a 3rd party library.</p>\n"}], "owner": {"reputation": 1, "user_id": 7204583, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ce2ed98a422f77125dfdb67612acd071?s=128&d=identicon&r=PG&f=1", "display_name": "jim kaip", "link": "https://stackoverflow.com/users/7204583/jim-kaip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 391, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1501110188, "creation_date": 1501107335, "last_edit_date": 1501107503, "question_id": 45338319, "link": "https://stackoverflow.com/questions/45338319/from-ascii-codepoint-of-character-to-wstring", "title": "from ascii codepoint of character to wstring", "body": "<p>With code bellow i can take wstring of a codepoint character.\nIf codepoint>65535 take wrong wstring. How must do it?</p>\n\n<pre><code>wstring giveWStringFromASCII(size_t i)\n{\n    wchar_t character[]= {i,0};\n    return wstring(character);\n}\n</code></pre>\n"}, {"tags": ["c++", "class"], "comments": [{"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 1, "creation_date": 1501107478, "post_id": 45338257, "comment_id": 77638725, "body": "<i>&quot;make it return this-&gt;elements, when I just call myArray&quot;</i> -- Is that what you really want? Or do you want the for loop to iterate over your array properly? Because those two goals are not the same thing."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1501107790, "post_id": 45338257, "comment_id": 77638862, "body": "Implement a <code>begin()</code> and <code>end()</code> that returns a pointer to the beginning and past-the-end respectively. Also, you have a rule of 5 violation. You should also least implement a move constructor correctly."}, {"owner": {"reputation": 8178, "user_id": 2920343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dbfe32738597d61775971cab5efebb67?s=128&d=identicon&r=PG&f=1", "display_name": "CompuChip", "link": "https://stackoverflow.com/users/2920343/compuchip"}, "edited": false, "score": 0, "creation_date": 1501107799, "post_id": 45338257, "comment_id": 77638866, "body": "The keyword here is <i>iterators</i>. In particular, see this answer <a href=\"https://stackoverflow.com/a/32621416/2920343\">stackoverflow.com/a/32621416/2920343</a>"}], "answers": [{"tags": [], "owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "is_accepted": true, "score": 4, "last_activity_date": 1501107849, "creation_date": 1501107849, "answer_id": 45338420, "question_id": 45338257, "link": "https://stackoverflow.com/questions/45338257/getting-object-data-by-just-calling-a-object/45338420#45338420", "title": "Getting object data by just calling a object", "body": "<p>You need to implement <code>begin</code> and <code>end</code> member functions for your class (or as global functions in the same namespace as your class), which return iterators pointing to the first element, and one past the last element of your array. Since your class is backed by a contiguous array, you don't need to implement an iterator class, and can just use pointers.</p>\n\n<pre><code>// these are member functions, as they would be defined inside your class\nT* begin() {\n    return elements;\n}\n\nT* end() {\n    return elements + length;\n}\n</code></pre>\n\n<p>You should also implement const versions.</p>\n\n<pre><code>T const* begin() const {\n    return elements;\n}\n\nT const* end() const {\n    return elements + length;\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6827707"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 45338420, "answer_count": 1, "score": 0, "last_activity_date": 1501107849, "creation_date": 1501106943, "question_id": 45338257, "link": "https://stackoverflow.com/questions/45338257/getting-object-data-by-just-calling-a-object", "title": "Getting object data by just calling a object", "body": "<p>So I do have an array class made by myself:</p>\n\n<pre><code>#include &lt;algorithm&gt;\n\ntemplate &lt;class T&gt;\nclass myArray\n{\nprivate:\n    int length;\n    T *elements;\npublic:\n    myArray()\n    {\n        this-&gt;length = 0;\n        this-&gt;elements = nullptr;\n    }\n\n    myArray(int len)\n    {\n        this-&gt;length = len;\n        this-&gt;elements = new T[len];\n    }\n\n    myArray(int* data, int len)\n    {\n        this-&gt;length = len;\n        this-&gt;elements = new T[len];\n        std::copy(data, data+len, this-&gt;elements);\n    }\n\n    ~myArray()\n    {\n        delete[] this-&gt;elements;\n    }\n};\n</code></pre>\n\n<p>I think that for now it works. I wanted to check if the elements I pass in the 3rd constructor are getting properly copied, so I wrote this:</p>\n\n<pre><code>int data[] = {1,2,3,4,5};\nmyArray&lt;int&gt; a (data, 5);\nfor (auto x: myArray)\n{\n    std::cout &lt;&lt; x &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>The question is what I have to write in the class, to make it return this->elements, when I just call <code>myArray</code>. I know that it is possibly trivial, but I don't know how to find it, actually how to call it, to make Google find the answer for me.</p>\n"}, {"tags": ["c++", "templates", "string-literals"], "comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 1, "creation_date": 1501106879, "post_id": 45338220, "comment_id": 77638478, "body": "What do you expect <code>A&lt;&quot;A&quot;&gt; a1;</code> to mean? Why would it be allowed?"}, {"owner": {"reputation": 914, "user_id": 7010551, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/269c0cd9b8eec066c176f9b2c91b5c6e?s=128&d=identicon&r=PG&f=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/7010551/viktor"}, "edited": false, "score": 0, "creation_date": 1501106888, "post_id": 45338220, "comment_id": 77638482, "body": "what about variable <code>a</code>?"}, {"owner": {"reputation": 914, "user_id": 7010551, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/269c0cd9b8eec066c176f9b2c91b5c6e?s=128&d=identicon&r=PG&f=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/7010551/viktor"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1501106981, "post_id": 45338220, "comment_id": 77638523, "body": "@drescherjm what about <code>p</code> it is instance of <code>const char*</code>?"}, {"owner": {"reputation": 914, "user_id": 7010551, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/269c0cd9b8eec066c176f9b2c91b5c6e?s=128&d=identicon&r=PG&f=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/7010551/viktor"}, "reply_to_user": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1501107025, "post_id": 45338220, "comment_id": 77638546, "body": "@Carcigenicate why not is my question."}, {"owner": {"reputation": 914, "user_id": 7010551, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/269c0cd9b8eec066c176f9b2c91b5c6e?s=128&d=identicon&r=PG&f=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/7010551/viktor"}, "reply_to_user": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1501107094, "post_id": 45338220, "comment_id": 77638581, "body": "constexpr char* is not allowed as well"}, {"owner": {"reputation": 914, "user_id": 7010551, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/269c0cd9b8eec066c176f9b2c91b5c6e?s=128&d=identicon&r=PG&f=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/7010551/viktor"}, "reply_to_user": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1501107477, "post_id": 45338220, "comment_id": 77638723, "body": "Thanks for comments. Fair answer is  &quot;the location of string literals can&#39;t be calculated at the time of compilation, when it&#39;s needed for templates&quot;."}], "owner": {"reputation": 914, "user_id": 7010551, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/269c0cd9b8eec066c176f9b2c91b5c6e?s=128&d=identicon&r=PG&f=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/7010551/viktor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 706, "favorite_count": 0, "closed_date": 1501106926, "answer_count": 0, "score": 1, "last_activity_date": 1501106759, "creation_date": 1501106759, "question_id": 45338220, "link": "https://stackoverflow.com/questions/45338220/why-template-class-in-c-cannot-be-instantiated-with-string-literal", "closed_reason": "Duplicate", "title": "Why template class in C++ cannot be instantiated with string literal?", "body": "<p>I know that C++ forbids instantiate template neither with string literal not with <code>const char*</code> but I don't understand why. Only global variable array of <code>char</code>s or <code>const</code> array. What is the reason or breaking use case to forbid most convenient usage like <code>A&lt;\"A\"&gt;</code>? <a href=\"http://coliru.stacked-crooked.com/a/c4d6ee90a7829a07\" rel=\"nofollow noreferrer\">Live example</a>.</p>\n\n<pre><code>template&lt;const char* S&gt;\nclass A\n{};\n\nchar a[] = \"A\";\nconst char* p = \"A\";\n\nint main()\n{\n    A&lt;\"A\"&gt; a1; //  error: '\"A\"' is not a valid template argument for type 'const char*' because string literals can never be used in this context \n    A&lt;p&gt; a2;   // error: 'p' is not a valid template argument because 'p' is a variable, not the address of a variable\n    A&lt;a&gt; a3;   // ok\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "templates"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1501106754, "post_id": 45338159, "comment_id": 77638427, "body": "Because you provided absolutely nothing to the compiler to let it know what the constructor and the destructor do. Do they add two numbers? Subtract two numbers? Count the number of words in &quot;War And Peace&quot;? Count the number of angels on the tip of a pin? You have to write the constructor, somewhere, you know, in order for the compiler to instantiate it."}], "answers": [{"comments": [{"owner": {"reputation": 1688, "user_id": 7042011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7adfcdad8d36cc14d0c75dada3b301e2?s=128&d=identicon&r=PG&f=1", "display_name": "OutOfBound", "link": "https://stackoverflow.com/users/7042011/outofbound"}, "edited": false, "score": 0, "creation_date": 1501106958, "post_id": 45338178, "comment_id": 77638512, "body": "Got it. I overlook it because i was focused on the extern templates. Thank you."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 1688, "user_id": 7042011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7adfcdad8d36cc14d0c75dada3b301e2?s=128&d=identicon&r=PG&f=1", "display_name": "OutOfBound", "link": "https://stackoverflow.com/users/7042011/outofbound"}, "edited": false, "score": 0, "creation_date": 1501107005, "post_id": 45338178, "comment_id": 77638535, "body": "@OutOfBound See also <a href=\"https://stackoverflow.com/q/8130602/3093378\">stackoverflow.com/q/8130602/3093378</a> for more details about real-world usage of <code>extern template</code>s."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1501107061, "post_id": 45338178, "comment_id": 77638565, "body": "I can&#39;t tell whether the intention of the code in this example is to demonstrate template function definitions for <code>Foo&lt;T&gt;</code> or for <code>Foo&lt;int&gt;</code>. For the former, add <code>&lt;T&gt;</code> before the two <code>::</code> s; for the latter you need <code>template &lt;&gt; Foo&lt;int&gt;::Foo() {...}</code> and similarly for the destructor."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1501107199, "post_id": 45338178, "comment_id": 77638618, "body": "@PeteBecker Forgot the <code>&lt;T&gt;</code>, edited. I think both approaches you mentioned can be used here, provided OP is using only the <code>Foo&lt;int&gt;</code> instantiation."}], "tags": [], "owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "is_accepted": true, "score": 3, "last_activity_date": 1501107132, "last_edit_date": 1501107132, "creation_date": 1501106599, "answer_id": 45338178, "question_id": 45338159, "link": "https://stackoverflow.com/questions/45338159/understanding-extern-templates-in-c/45338178#45338178", "title": "Understanding extern templates in c++", "body": "<p>Because the constructor and destructor are not <em>defined</em> anywhere, you only declare them. You correctly explicitly instantiate the template in the <code>Foo.cpp</code> file, but the functions are still not defined.</p>\n\n<p>If you are only going to use <code>Foo&lt;int&gt;</code>, then you can define the constructor and destructor in <code>Foo.cpp</code>,</p>\n\n<pre><code>template&lt;typename T&gt;\nFoo&lt;T&gt;::Foo(){...} // or = default\n</code></pre>\n\n<p>and</p>\n\n<pre><code>template&lt;typename T&gt;\nFoo&lt;T&gt;::~Foo(){...}\n</code></pre>\n\n<p>and due to the fact that you explicitly instantiate the template in the <code>Foo.cpp</code> the linker will find the definition. Otherwise, you need to provide the definition in the header file.</p>\n"}], "owner": {"reputation": 1688, "user_id": 7042011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7adfcdad8d36cc14d0c75dada3b301e2?s=128&d=identicon&r=PG&f=1", "display_name": "OutOfBound", "link": "https://stackoverflow.com/users/7042011/outofbound"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1763, "favorite_count": 0, "accepted_answer_id": 45338178, "answer_count": 1, "score": 1, "last_activity_date": 1501107132, "creation_date": 1501106486, "last_edit_date": 1501106936, "question_id": 45338159, "link": "https://stackoverflow.com/questions/45338159/understanding-extern-templates-in-c", "title": "Understanding extern templates in c++", "body": "<p>I am trying to understand extern templates, but i can't get it to work. My goal is to compile some instanciations if <code>Foo&lt;&gt;</code> in a seperate compilation unit in order to save compilation time. In my code base, the template argument is a <code>enum class</code>, so in theory I am able to compile all instanciations in a compilation unit and link them with the rest of the project.</p>\n\n<p>Here is a little example I come up with:</p>\n\n<pre><code>//Foo.hpp\n#pragma once\n\ntemplate &lt;class T&gt;\nstruct Foo {\n    Foo();\n    ~Foo();\n};\n\nextern template struct Foo&lt;int&gt;;\n</code></pre>\n\n<hr>\n\n<pre><code>//Foo.cpp\n#include \"Foo.hpp\"\n\ntemplate struct Foo&lt;int&gt;;\n</code></pre>\n\n<hr>\n\n<pre><code>//main.cpp\n#include &lt;iostream&gt;\n\n#include \"Foo.hpp\"\n\nint main(int argc, char **argv) {\n   Foo&lt;int&gt; foo;\n\n    return 0;\n}\n</code></pre>\n\n<p>To for compilation i used a makefile, that boils down to this:</p>\n\n<pre><code>g++ -c ../Foo.cpp ../main.cpp\ng++ Foo.o main.o \n</code></pre>\n\n<p>The output I get with gcc 7.1.1 and basically the same with clang 4.0.1 is:</p>\n\n<pre><code>main.o: In function `main':\nmain.cpp:(.text+0x27): undefined reference to `Foo&lt;int&gt;::Foo()'\nmain.cpp:(.text+0x38): undefined reference to `Foo&lt;int&gt;::~Foo()'\n</code></pre>\n\n<p>My main question is, why is <code>Foo&lt;int&gt;::Foo()</code> and <code>Foo&lt;int&gt;::~Foo()</code>not compiled into <code>Foo.o</code>?</p>\n"}, {"tags": ["python", "c++", "eclipse", "eclipse-plugin"], "answers": [{"tags": [], "owner": {"reputation": 1291, "user_id": 6813490, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/suHzE.jpg?s=128&g=1", "display_name": "Zach Valenta", "link": "https://stackoverflow.com/users/6813490/zach-valenta"}, "is_accepted": false, "score": 0, "last_activity_date": 1501113845, "creation_date": 1501113845, "answer_id": 45339276, "question_id": 45338139, "link": "https://stackoverflow.com/questions/45338139/how-do-you-add-the-python-h-libraries-to-eclipse-for-use-in-a-c-program/45339276#45339276", "title": "How do you add the Python.h libraries to eclipse for use in a C++ program?", "body": "<p>You'll need to</p>\n\n<ul>\n<li>install the PyDev plug-in</li>\n<li>edit the project properties<a href=\"https://cloud.google.com/appengine/docs/standard/python/tools/setting-up-eclipse\" rel=\"nofollow noreferrer\"> [link]</a></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 111, "user_id": 8241105, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-6cmIKDhDj84/AAAAAAAAAAI/AAAAAAAAACE/Qlw91LEm5Ck/photo.jpg?sz=128", "display_name": "Fairly Factual", "link": "https://stackoverflow.com/users/8241105/fairly-factual"}, "edited": false, "score": 1, "creation_date": 1501129656, "post_id": 45339451, "comment_id": 77644303, "body": "I followed your steps, and PyDev now appears installed in <code>Windows-&gt;Preferences</code>, but the error messages still persist. Am I missing anything? PyDev appears in the list on the left side. Thanks"}, {"owner": {"reputation": 105, "user_id": 7147480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d81be2f1daeba701598cd948c774e83?s=128&d=identicon&r=PG&f=1", "display_name": "TEK", "link": "https://stackoverflow.com/users/7147480/tek"}, "reply_to_user": {"reputation": 111, "user_id": 8241105, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-6cmIKDhDj84/AAAAAAAAAAI/AAAAAAAAACE/Qlw91LEm5Ck/photo.jpg?sz=128", "display_name": "Fairly Factual", "link": "https://stackoverflow.com/users/8241105/fairly-factual"}, "edited": false, "score": 0, "creation_date": 1501129881, "post_id": 45339451, "comment_id": 77644386, "body": "@FairlyFactual could you post the error message here."}, {"owner": {"reputation": 111, "user_id": 8241105, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-6cmIKDhDj84/AAAAAAAAAAI/AAAAAAAAACE/Qlw91LEm5Ck/photo.jpg?sz=128", "display_name": "Fairly Factual", "link": "https://stackoverflow.com/users/8241105/fairly-factual"}, "edited": false, "score": 0, "creation_date": 1501196734, "post_id": 45339451, "comment_id": 77685930, "body": "eclipse gives the error message on <code>#include &lt;Python.h&gt;</code> as <code>Unresolved inclusion: &lt;Python.h&gt;</code>"}, {"owner": {"reputation": 111, "user_id": 8241105, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-6cmIKDhDj84/AAAAAAAAAAI/AAAAAAAAACE/Qlw91LEm5Ck/photo.jpg?sz=128", "display_name": "Fairly Factual", "link": "https://stackoverflow.com/users/8241105/fairly-factual"}, "edited": false, "score": 0, "creation_date": 1501202871, "post_id": 45339451, "comment_id": 77687407, "body": "Okay. I was messing around with my program a little in an attempt to fix the problem and eventually just decided to replace <code>&lt;Python.h&gt;</code> with <code>&quot;C:\\...Python.h&quot;</code>, and the program started to work. I guess the problem was to do with eclipse not being able to find the include even though I installed it through the <code>Help&gt;Install New Software</code> method."}, {"owner": {"reputation": 105, "user_id": 7147480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d81be2f1daeba701598cd948c774e83?s=128&d=identicon&r=PG&f=1", "display_name": "TEK", "link": "https://stackoverflow.com/users/7147480/tek"}, "reply_to_user": {"reputation": 111, "user_id": 8241105, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-6cmIKDhDj84/AAAAAAAAAAI/AAAAAAAAACE/Qlw91LEm5Ck/photo.jpg?sz=128", "display_name": "Fairly Factual", "link": "https://stackoverflow.com/users/8241105/fairly-factual"}, "edited": false, "score": 0, "creation_date": 1501219143, "post_id": 45339451, "comment_id": 77691357, "body": "@FairlyFactual always ensure your header files can be accessed during compiling.  So include the header file path like you did and it saves you from some nasty linker errors"}, {"owner": {"reputation": 105, "user_id": 7147480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d81be2f1daeba701598cd948c774e83?s=128&d=identicon&r=PG&f=1", "display_name": "TEK", "link": "https://stackoverflow.com/users/7147480/tek"}, "reply_to_user": {"reputation": 111, "user_id": 8241105, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-6cmIKDhDj84/AAAAAAAAAAI/AAAAAAAAACE/Qlw91LEm5Ck/photo.jpg?sz=128", "display_name": "Fairly Factual", "link": "https://stackoverflow.com/users/8241105/fairly-factual"}, "edited": false, "score": 0, "creation_date": 1501219805, "post_id": 45339451, "comment_id": 77691624, "body": "@FairlyFactual Just curious was your error message something like: <code>error: header.h: No file or directory found.</code>?"}, {"owner": {"reputation": 111, "user_id": 8241105, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-6cmIKDhDj84/AAAAAAAAAAI/AAAAAAAAACE/Qlw91LEm5Ck/photo.jpg?sz=128", "display_name": "Fairly Factual", "link": "https://stackoverflow.com/users/8241105/fairly-factual"}, "edited": false, "score": 0, "creation_date": 1501257654, "post_id": 45339451, "comment_id": 77717168, "body": "the error was just <code>Unresolved inclusion: &lt;Python.h&gt;</code> and nothing else. I thought it was rather strange that it didn&#39;t tell me anything about the source file not being located."}], "tags": [], "owner": {"reputation": 105, "user_id": 7147480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d81be2f1daeba701598cd948c774e83?s=128&d=identicon&r=PG&f=1", "display_name": "TEK", "link": "https://stackoverflow.com/users/7147480/tek"}, "is_accepted": true, "score": 2, "last_activity_date": 1501116079, "last_edit_date": 1501116079, "creation_date": 1501115235, "answer_id": 45339451, "question_id": 45338139, "link": "https://stackoverflow.com/questions/45338139/how-do-you-add-the-python-h-libraries-to-eclipse-for-use-in-a-c-program/45339451#45339451", "title": "How do you add the Python.h libraries to eclipse for use in a C++ program?", "body": "<p>Ensure PyDev is installed as a plug-in. \nYou can do this by selecting <code>Help&gt;Install New Software</code>\nyou will then select add and choose a name (eg. PyDev), \nthen enter <code>http://pydev.org/updates</code> as a location.\nYou will then select <code>PyDev</code> from the list of available software and accept the license, and trust the certificate. \nYou may need to restart Eclipse afterwards. </p>\n\n<p>You can refer to this <a href=\"https://docs.python.org/3/extending/embedding.html\" rel=\"nofollow noreferrer\">Official Python Documentation</a> for additional information on embedding and extending your code. </p>\n"}, {"tags": [], "owner": {"reputation": 694, "user_id": 1180868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9a0d4e6e67fd26c52ccea52e662eacd?s=128&d=identicon&r=PG", "display_name": "Xavier Lamorlette", "link": "https://stackoverflow.com/users/1180868/xavier-lamorlette"}, "is_accepted": false, "score": 0, "last_activity_date": 1564739861, "creation_date": 1564739861, "answer_id": 57324135, "question_id": 45338139, "link": "https://stackoverflow.com/questions/45338139/how-do-you-add-the-python-h-libraries-to-eclipse-for-use-in-a-c-program/57324135#57324135", "title": "How do you add the Python.h libraries to eclipse for use in a C++ program?", "body": "<p>Here is another quite simple solution:</p>\n\n<ul>\n<li>Install Python for Windows (download it from <a href=\"https://www.python.org/downloads/\" rel=\"nofollow noreferrer\">python.org</a>).</li>\n<li>Reference its <code>include</code> directory (in my case <code>C:\\Programs\\Python36\\include</code>) in your project (Project Properties - C/C++ General - Paths and Symbols - Includes - GNU C++ - Add\u2026).</li>\n</ul>\n"}], "owner": {"reputation": 111, "user_id": 8241105, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-6cmIKDhDj84/AAAAAAAAAAI/AAAAAAAAACE/Qlw91LEm5Ck/photo.jpg?sz=128", "display_name": "Fairly Factual", "link": "https://stackoverflow.com/users/8241105/fairly-factual"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 755, "favorite_count": 0, "accepted_answer_id": 45339451, "answer_count": 3, "score": 1, "last_activity_date": 1564739861, "creation_date": 1501106378, "question_id": 45338139, "link": "https://stackoverflow.com/questions/45338139/how-do-you-add-the-python-h-libraries-to-eclipse-for-use-in-a-c-program", "title": "How do you add the Python.h libraries to eclipse for use in a C++ program?", "body": "<p>I'm relatively new to using eclipse, and I'm trying to figure out how to use the Python.h includes that are described <a href=\"https://docs.python.org/2/extending/embedding.html#\" rel=\"nofollow noreferrer\">here</a>. What steps do I need to take to get eclipse to properly compile that include? Thanks!</p>\n\n<p>Edit:\nI am using Windows if that helps.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 2, "creation_date": 1501106464, "post_id": 45338116, "comment_id": 77638289, "body": "Easiest (and fastest, i.e. optimized) way of doing it is to use a flat <code>vector&lt;int&gt;</code> and map from 2D to 1D and vice-versa."}, {"owner": {"reputation": 4933, "user_id": 8217180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9621a549160f738b81303a4a008ddd50?s=128&d=identicon&r=PG&f=1", "display_name": "Tobias Ribizel", "link": "https://stackoverflow.com/users/8217180/tobias-ribizel"}, "edited": false, "score": 1, "creation_date": 1501106529, "post_id": 45338116, "comment_id": 77638324, "body": "If you want to slice in both dimensions, you could simply pass the first and last index for every dimension and use this to edit the vector that you pass <i>by reference</i>."}, {"owner": {"reputation": 1516, "user_id": 2442877, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/YiIWC.jpg?s=128&g=1", "display_name": "MASh", "link": "https://stackoverflow.com/users/2442877/mash"}, "edited": false, "score": 0, "creation_date": 1501108948, "post_id": 45338116, "comment_id": 77639258, "body": "passing the limiting dimensions as parameter with the vector should get the job done."}, {"owner": {"reputation": 607, "user_id": 6784509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UjPEk.jpg?s=128&g=1", "display_name": "HatsuPointerKun", "link": "https://stackoverflow.com/users/6784509/hatsupointerkun"}, "edited": false, "score": 0, "creation_date": 1501109557, "post_id": 45338116, "comment_id": 77639450, "body": "I have a function that can create a sub vector and copy the data you want in it, but <b>it require to create a new vector</b> ( in fact, several new vectors ), and make copy of the data. Do you want it ?"}], "answers": [{"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1501122950, "post_id": 45339193, "comment_id": 77642579, "body": "In my exoerience, better matrix view has a pointer, a width, height, and stride.  Don&#39;t bind it to only wrapping a matrix."}], "tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 0, "last_activity_date": 1501113202, "creation_date": 1501113202, "answer_id": 45339193, "question_id": 45338116, "link": "https://stackoverflow.com/questions/45338116/how-to-pass-a-subvector-of-a-2d-vector-in-a-function-in-c/45339193#45339193", "title": "how to pass a subvector of a 2d vector in a function in c++", "body": "<p>If you just want to look at the submatrix or edit a bounded region in place, make a viewer. The viewer doesn't do anything but restrict the the area of the matrix you are allowed to look at. There is no copying and little extra memory used. This is great if you have, for example, a huge picture and you want to view and manipulate 8x8 element areas.</p>\n\n<p>If you need a new matrix of the given view, teach the viewer to create a new matrix based on the view. There is copying involved in this case, but when you want a copy, copying's hard to avoid.</p>\n\n<p>To demonstrate, first I'm going to wander off the beaten path a bit. If you want this to be fast (and who doesn't want fast?) don't use <code>vector&lt;vector&gt;</code>. A <code>vector</code> is guaranteed to be contiguous in memory, but when you have vectors of vectors that guarantee goes out the window and this leads to poor spatial locality and typically to poor cache usage. </p>\n\n<p>Here is a simple example of a Matrix class that is a bit easier to work with and is all one memory chunk so it tends to be more cache friendly.</p>\n\n<pre><code>// wrapping class for 2D matrixes\nclass Matrix\n{\nprivate:\n    size_t rows, columns; // large, unsigned datatype. Don't want negative\n                          // indices, so why allow them?\n    std::vector&lt;int&gt; matrix; // 1D vector. Simple and easy to handle.\n                             // also often much faster than vector of vectors\n                             // due to improved spatial locality helping\n                             // predictability of data access\npublic:\n    // build zero-filled Matrix\n    Matrix(size_t numrows, size_t numcols) :\n            rows(numrows), columns(numcols), matrix(rows * columns)\n    {\n    }\n\n    // 2D to 1D mapping accessor\n    int &amp; operator()(size_t row, size_t column)\n    {\n        // check bounds here\n        return matrix[row * columns + column];\n    }\n\n    // 2D to 1D mapping accessor for constant Matrix\n    int operator()(size_t row, size_t column) const\n    {\n        // check bounds here\n        return matrix[row * columns + column];\n    }\n\n    // dimension accessors\n    size_t getRows() const\n    {\n        return rows;\n    }\n    size_t getColumns() const\n    {\n        return columns;\n    }\n};\n</code></pre>\n\n<p>Now that we have a faster, nicely contained Matrix class we can make a really simple <code>MatrixView</code> class.</p>\n\n<pre><code>class MatrixView\n{\n    size_t mStartRow;       // view offset in row\n    size_t mStartColumn;    // view offset in column\n    size_t mRows;           // number of viewed rows\n    size_t mColumns;        // number of viewed columns\n    Matrix &amp; mMat;          // viewed Matrix\n\npublic:\n    // using start and endpoints in this constructor. A more ideologically correct \n    // constructor would behave the same as the standard library and take offset \n    // and length as parameters.\n    MatrixView(size_t startrow,\n               size_t startcolumn,\n               size_t endrow, \n               size_t endcolumn,\n               Matrix &amp; mat):\n                   mStartRow(startrow),\n                   mStartColumn(startcolumn),\n                   mRows(endrow - startrow),\n                   mColumns(endcolumn - startcolumn),\n                   mMat(mat)\n    {\n        //ensure dimensions make sense\n        if (startrow &gt; endrow ||\n            startcolumn &gt; endcolumn ||\n            mRows &gt; mat.getRows() ||\n            mColumns &gt; mat.getColumns())\n        {\n            throw std::runtime_error(\"Bad MatrixView dimensions\");\n        }\n    }\n    int &amp; operator()(size_t row, size_t column)\n    {\n        // check bounds here if you want to\n        // look at the source matrix plus offsets\n        return mMat(row+mStartRow, column+mStartColumn);\n    }\n\n    // 2D to 1D mapping accessor for constant Matrix\n    int operator()(size_t row, size_t column) const\n    {\n        // check bounds here if you want to\n        return mMat(row+mStartRow, column+mStartColumn);\n    }\n\n    // dimension accessors\n    size_t getRows() const\n    {\n        return mRows;\n    }\n    size_t getColumns() const\n    {\n        return mColumns;\n    }\n\n    // build a new Matrix based on this view\n    Matrix clone()\n    {\n        Matrix result(mRows, mColumns);\n        for (size_t row = 0; row &lt; mRows; ++row)\n        {\n            for (size_t col = 0; col &lt; mColumns; ++col)\n            {\n                result(row, col) = mMat(row+mStartRow, col+mStartColumn);\n            }\n        }\n        return result;\n    }\n};\n</code></pre>\n\n<p>And an example of using this sucker: </p>\n\n<pre><code>// stream formatters\nstd::ostream &amp; operator&lt;&lt;(std::ostream &amp; out, const Matrix &amp; mat)\n{\n    for (size_t row = 0; row &lt; mat.getRows(); ++row)\n    {\n        for (size_t col = 0; col &lt; mat.getColumns(); ++col)\n        {\n            std::cout &lt;&lt; std::setw(5) &lt;&lt; mat(row, col);\n        }\n        std::cout &lt;&lt; '\\n';\n    }\n    return out;\n}\nstd::ostream &amp; operator&lt;&lt;(std::ostream &amp; out, const MatrixView &amp; mat)\n{\n    for (size_t row = 0; row &lt; mat.getRows(); ++row)\n    {\n        for (size_t col = 0; col &lt; mat.getColumns(); ++col)\n        {\n            std::cout &lt;&lt; std::setw(5) &lt;&lt; mat(row, col);\n        }\n        std::cout &lt;&lt; '\\n';\n    }\n    return out;\n}\n\n\nint main()\n{\n    Matrix one(6, 6); // make 6x6 matrix\n    int count = 0;\n\n    // set inputs to make errors really stand out\n    for (size_t row = 0; row &lt; one.getRows(); ++row)\n    {\n        for (size_t col = 0; col &lt; one.getColumns(); ++col)\n        {\n            one(row, col) = count++;\n        }\n    }\n\n    // print initial matrix\n    std::cout &lt;&lt; one &lt;&lt; '\\n';\n\n    // make a view of matrix that leaves off the outside.\n    MatrixView view(1,1,5,5, one);\n\n    // print the view\n    std::cout &lt;&lt; view &lt;&lt; '\\n';\n\n    // get a clone of the view we can pass into a function \n    Matrix clone = view.clone();\n\n    // and print the clone\n    std::cout &lt;&lt; clone &lt;&lt; '\\n';\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7717369, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lB-DohdVJUA/AAAAAAAAAAI/AAAAAAAABqo/hx8nsc4V3fw/photo.jpg?sz=128", "display_name": "Sahil Gakhar", "link": "https://stackoverflow.com/users/7717369/sahil-gakhar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 554, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1501113202, "creation_date": 1501106286, "question_id": 45338116, "link": "https://stackoverflow.com/questions/45338116/how-to-pass-a-subvector-of-a-2d-vector-in-a-function-in-c", "title": "how to pass a subvector of a 2d vector in a function in c++", "body": "<pre><code>void Solution::rotate(vector&lt;vector&lt;int&gt; &gt; &amp;A) {\n   int n= A.size();\nint temp[n];\nfor(int j=0;j&lt;n;j++)\n{\n    temp[j]=A[n-1][j];\n}\n   for(int i=0;i&lt;n-1;i++)\n   {\n       A[n-1][i]=A[n-i-1][n-1];\n       A[n-i-1][n-1] = A[0][n-i-1];\n       A[0][n-i-1]=A[i][0];\n       A[i][0]=temp[i];\n       //A[i+1][0]=A[n-1][i+1];\n  }\n}\n</code></pre>\n\n<p>I want to call the function again and pass the subarray of original array with starting point as (1,1) of the array and the end point as (n-2,n-2) of the array.\nIs it possible to get it done without creating a new vector, i mean just by passing some pointer to the function? </p>\n"}, {"tags": ["c++", "pointers", "stl", "std", "stdmap"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 1, "creation_date": 1501105691, "post_id": 45337978, "comment_id": 77637964, "body": "You did new the member functions?"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 2, "creation_date": 1501105709, "post_id": 45337978, "comment_id": 77637971, "body": "Why do you want to call delete on the pointers?"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1501105741, "post_id": 45337978, "comment_id": 77637982, "body": "It appears that the correct way to delete that map is to exit the function."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1501106236, "post_id": 45337978, "comment_id": 77638186, "body": "Even if there was no compilation error, the shown code is buggy, and is guaranteed to result in a crash due to undefined behavior after incrementing a deleted iterator."}, {"owner": {"reputation": 4933, "user_id": 8217180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9621a549160f738b81303a4a008ddd50?s=128&d=identicon&r=PG&f=1", "display_name": "Tobias Ribizel", "link": "https://stackoverflow.com/users/8217180/tobias-ribizel"}, "edited": false, "score": 2, "creation_date": 1501106247, "post_id": 45337978, "comment_id": 77638191, "body": "You are trying to <b>delete</b> the memory that represents a <b>member function</b> of <code>myClass</code>. Just take a short moment to think about the implications of this! <code>delete</code> only works for memory that has been dynamically allocated on the heap, (member) functions are all in the static read-only part of memory. Simply never try to delete a function pointer. Emptying the map using <code>erase</code> or <code>clear</code> should be enough"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1501106247, "post_id": 45337978, "comment_id": 77638192, "body": "Just because we <i>can</i> store a map of member function pointers doesn&#39;t mean there is a good reason to."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1501106443, "post_id": 45337978, "comment_id": 77638275, "body": "You pass <code>delete</code> a pointer to the thing you want to delete. What is the thing you want to delete?"}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1501106335, "creation_date": 1501106335, "answer_id": 45338129, "question_id": 45337978, "link": "https://stackoverflow.com/questions/45337978/deleting-stdmap-of-functions/45338129#45338129", "title": "Deleting std::map of functions", "body": "<blockquote>\n  <p>In my attempt to delete this map I am trying to delete the pointer to the member function, </p>\n</blockquote>\n\n<p>That is not allowed by the language. You can call <code>delete</code> on an object pointer only.</p>\n\n<p>Think of this.</p>\n\n<pre><code>int (*fptr)(const char *lhs, const char *rhs ) = &amp;std::strcmp;\n\n // Does it make any sense at all?\n // What would you expect the run time to do with this?\ndelete fptr;\n</code></pre>\n\n<p>Your function can be very simple. You can just clear the map.</p>\n\n<pre><code>void deleteMap()\n{\n   map.clear();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1334, "user_id": 1328780, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c0241ebc4503b57de65aa5d289f1d588?s=128&d=identicon&r=PG", "display_name": "bjhend", "link": "https://stackoverflow.com/users/1328780/bjhend"}, "is_accepted": false, "score": 2, "last_activity_date": 1501106349, "creation_date": 1501106349, "answer_id": 45338130, "question_id": 45337978, "link": "https://stackoverflow.com/questions/45337978/deleting-stdmap-of-functions/45338130#45338130", "title": "Deleting std::map of functions", "body": "<p>You cannot <code>delete</code> a member pointer, because it is part of a class instance.</p>\n\n<p>You haven't posted code where you add an element to <code>myMap</code>, but such code cannot create the member pointer with a <code>new</code> on something of type <code>func</code> which indicates that the <code>delete</code> is wrong, because every <code>delete</code> must be matched by a <code>new</code>.</p>\n\n<p>You can simply call <code>myMap.clear()</code> to delete <code>myMap</code>'s content.</p>\n"}, {"tags": [], "owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "is_accepted": true, "score": 4, "last_activity_date": 1501106578, "last_edit_date": 1501106578, "creation_date": 1501106371, "answer_id": 45338137, "question_id": 45337978, "link": "https://stackoverflow.com/questions/45337978/deleting-stdmap-of-functions/45338137#45338137", "title": "Deleting std::map of functions", "body": "<p>You misunderstand some concepts here. You use <code>delete</code>/<code>delete[]</code> to release memory which has been allocated by <code>new</code>/<code>new[]</code>, respectively.</p>\n\n<p>Here, you have a <code>std::map</code> that stores pointer-to-member-function values. There is no memory allocated on the heap with <code>new</code>, so you do not have to free the memory using <code>delete</code> at all.</p>\n\n<p>In addition to that, you do not need to use <a href=\"http://en.cppreference.com/w/cpp/container/map/erase\" rel=\"nofollow noreferrer\"><code>std::map::erase()</code></a> for every element. Instead, you might use either <a href=\"http://en.cppreference.com/w/cpp/container/map/clear\" rel=\"nofollow noreferrer\"><code>std::map::clear()</code></a>\nto clear the <code>std::map</code>, or just let the destructor of <code>std::map</code> release the contents automatically.</p>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 1, "last_activity_date": 1501108163, "last_edit_date": 1501108163, "creation_date": 1501106577, "answer_id": 45338175, "question_id": 45337978, "link": "https://stackoverflow.com/questions/45337978/deleting-stdmap-of-functions/45338175#45338175", "title": "Deleting std::map of functions", "body": "<p>Sometimes <em>pointer</em> might refer to different kinds of pointers as a whole but often, such as in this case in particular, it means specifically a <em>data pointer</em>. Your pointer is a <em>member function pointer</em> and as such it is not such <em>pointer</em> type that your compiler is referring to.</p>\n\n<p>Only data pointers may be passed to the <code>delete</code> operator, otherwise the program is ill-formed. More specifically, you may only pass a pointer value that was returned by the <code>new</code> operator. In other words, <code>delete</code> is used to deallocate dynamic memory that you have allocated with <code>new</code>.</p>\n\n<p><code>new</code> operator can never return a (member) function pointer, so your function pointers could not possibly have been returned by <code>new</code>.</p>\n\n<blockquote>\n  <p>Is this the appropriate way to delete a map of functions?</p>\n</blockquote>\n\n<p>No. You cannot \"delete\" the functions that the map points to.</p>\n\n<p><code>map::erase</code> removes the function pointer from the map, but incrementing that iterator after having it erased has undefined behaviour. So, erasing in a loop can not be achieved as simply as you've attempted.</p>\n\n<p>If you want to remove all pointers, it is simpler to just call <code>map::clear</code>. On the third hand, all of the contents are automatically destroyed when the map itself is destroyed.</p>\n\n<p>Objects with static storage duration, such as your map, are destroyed automatically at the end of the program, and you cannot delete them yourself.</p>\n"}], "owner": {"reputation": 3, "user_id": 8372622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/869e1fd7933460df0ce763ae6ac6d3ee?s=128&d=identicon&r=PG&f=1", "display_name": "jkat24", "link": "https://stackoverflow.com/users/8372622/jkat24"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 938, "favorite_count": 0, "accepted_answer_id": 45338137, "answer_count": 4, "score": 0, "last_activity_date": 1501108163, "creation_date": 1501105528, "question_id": 45337978, "link": "https://stackoverflow.com/questions/45337978/deleting-stdmap-of-functions", "title": "Deleting std::map of functions", "body": "<p>I am trying to delete the following map:</p>\n\n<pre><code>typedef bool (myClass::*func)(std::vector&lt;std::string&gt; &amp;args);\ntypedef std::map&lt;std::string, func&gt; myMap;\nmyMap map; //map of functions in the class 'myClass'\n\nvoid deleteMap()\n{\n    for(myMap::iterator it = map.begin(); it != map.end(); ++it)\n    {\n        delete it-&gt;second; //compiler says it-&gt;second is non-pointer type\n        map.erase(it);\n    }\n}\n</code></pre>\n\n<p>'map' is mapping a string to a function in the class 'myClass', and this function takes a vector of strings in its parameter. </p>\n\n<p>In my attempt to delete this map I am trying to delete the pointer to the member function, then erase the iterator itself. The compiler says that it->second must be a pointer type. In the typdef 'func' is a pointer to myClass:: so why am I getting this error?</p>\n\n<p>Is this the appropriate way to delete a map of functions?</p>\n"}, {"tags": ["c++", "c++14"], "comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1501105671, "post_id": 45337957, "comment_id": 77637952, "body": "Why does there have to be? Iterating over a container of known type is far more common than iterating over a sequence of literals."}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 1, "creation_date": 1501105813, "post_id": 45337957, "comment_id": 77638018, "body": "This is already a lot more elegant than what we&#39;d have to write to do the same thing a couple of years ago."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 2, "creation_date": 1501105924, "post_id": 45337957, "comment_id": 77638064, "body": "In C++ 17 it should be possible: <code>for ( auto[num,value] : ...</code>"}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1501105974, "post_id": 45337957, "comment_id": 77638080, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/31394507/how-can-i-emulate-destructuring-in-c\">How can I emulate destructuring in C++?</a> Doesn&#39;t help much though."}, {"owner": {"reputation": 3271, "user_id": 3917, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/91cbf94fa69798898a7fec53457fbe49?s=128&d=identicon&r=PG", "display_name": "Martin C. Martin", "link": "https://stackoverflow.com/users/3917/martin-c-martin"}, "edited": false, "score": 0, "creation_date": 1501106366, "post_id": 45337957, "comment_id": 77638240, "body": "I can change the <code>std::vector&lt;std::pair&lt;int, char&gt;&gt;</code> to <code>std::map&lt;int, char&gt;</code> which shortens things a little.  Would be nice if there was a way avoid the first / second thing and give meaningful names to them without using two lines, but I&#39;m on C++14 at the moment."}], "answers": [{"tags": [], "owner": {"reputation": 2916, "user_id": 3646096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KUofm.jpg?s=128&g=1", "display_name": "M&#225;rio Feroldi", "link": "https://stackoverflow.com/users/3646096/m%c3%a1rio-feroldi"}, "is_accepted": false, "score": 2, "last_activity_date": 1501107320, "creation_date": 1501107320, "answer_id": 45338316, "question_id": 45337957, "link": "https://stackoverflow.com/questions/45337957/best-way-to-iterate-over-pairs-of-literals/45338316#45338316", "title": "Best way to iterate over pairs of literals", "body": "<p>In C++11 and later, you can make use of <a href=\"http://en.cppreference.com/w/cpp/utility/initializer_list\" rel=\"nofollow noreferrer\">initializer lists</a> to construct a list of pairs:</p>\n\n<pre><code>using std::make_pair;\n\nfor (auto x : {make_pair(1, 'a'), make_pair(2, 'b'), make_pair(3, 'c')})\n{\n    std::printf(\"%d %c\", x.first, x.second);\n}\n</code></pre>\n\n<p>In C++17, it's possible to use <a href=\"http://en.cppreference.com/w/cpp/language/structured_binding\" rel=\"nofollow noreferrer\">structured bindings</a> and <a href=\"http://en.cppreference.com/w/cpp/language/class_template_argument_deduction\" rel=\"nofollow noreferrer\">class template argument deduction</a> to make it more elegant:</p>\n\n<pre><code>using std::pair;\n\nfor (auto [a, b] : {pair(1, 'a'), pair(2, 'b'), pair(3, 'c')})\n{\n    std::printf(\"%d %c\", a, b);\n}\n</code></pre>\n"}], "owner": {"reputation": 3271, "user_id": 3917, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/91cbf94fa69798898a7fec53457fbe49?s=128&d=identicon&r=PG", "display_name": "Martin C. Martin", "link": "https://stackoverflow.com/users/3917/martin-c-martin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1501107320, "creation_date": 1501105430, "question_id": 45337957, "link": "https://stackoverflow.com/questions/45337957/best-way-to-iterate-over-pairs-of-literals", "title": "Best way to iterate over pairs of literals", "body": "<p>This works, but is pretty verbose:</p>\n\n<pre><code>for (auto entry : std::vector&lt;std::pair&lt;int, char&gt;&gt;  { {1, 'a'}, {2, 'b'}, {3, 'c'} } ) {\n    int num = entry.first;\n    char value = entry.second;\n    ...\n}\n</code></pre>\n\n<p>There's got to be a more elegant way...</p>\n"}, {"tags": ["c++", "char", "timezone", "icalendar", "malformed"], "answers": [{"comments": [{"owner": {"reputation": 1459, "user_id": 5268667, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/huOjp.png?s=128&g=1", "display_name": "Jean-Milost Reymond", "link": "https://stackoverflow.com/users/5268667/jean-milost-reymond"}, "edited": false, "score": 0, "creation_date": 1501158628, "post_id": 45341791, "comment_id": 77662601, "body": "Thank you for the answer, it is indeed what I suspected"}], "tags": [], "owner": {"reputation": 4290, "user_id": 1167333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d891a93985bae7576f011cbf434197d0?s=128&d=identicon&r=PG", "display_name": "Auberon Vacher", "link": "https://stackoverflow.com/users/1167333/auberon-vacher"}, "is_accepted": true, "score": 1, "last_activity_date": 1501131763, "creation_date": 1501131763, "answer_id": 45341791, "question_id": 45337694, "link": "https://stackoverflow.com/questions/45337694/ical-can-a-timezone-tzid-parameter-contain-a-char/45341791#45341791", "title": "iCal - can a TimeZone TZID parameter contain a &quot;:&quot; char?", "body": "<p>The authority on this is RFC5545 and the relevant subsections:\n<a href=\"https://tools.ietf.org/html/rfc5545#section-3.2.19\" rel=\"nofollow noreferrer\">RFC5545 3.2.19.  Time Zone Identifier</a></p>\n\n<blockquote>\n  <p>tzidparam  = \"TZID\" \"=\" [tzidprefix] paramtext</p>\n</blockquote>\n\n<p>which is complemented by \n<a href=\"https://tools.ietf.org/html/rfc5545#section-3.1\" rel=\"nofollow noreferrer\">RFC5545 3.1.  Content Lines</a></p>\n\n<blockquote>\n  <p>param         = param-name \"=\" param-value *(\",\" param-value)<br>\n  param-value   = paramtext / quoted-string<br>\n  paramtext     = *SAFE-CHAR<br>\n  [..]<br>\n  SAFE-CHAR     = WSP / %x21 / %x23-2B / %x2D-39 / %x3C-7E<br>\n  / NON-US-ASCII<br>\n  ; Any character except CONTROL, DQUOTE, \";\", \":\", \",\"</p>\n</blockquote>\n\n<p>From which we can conclude that a Time Zone ID parameter <strong>cannot</strong> contain a \":\" char.</p>\n"}], "owner": {"reputation": 1459, "user_id": 5268667, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/huOjp.png?s=128&g=1", "display_name": "Jean-Milost Reymond", "link": "https://stackoverflow.com/users/5268667/jean-milost-reymond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 45341791, "answer_count": 1, "score": 1, "last_activity_date": 1501131763, "creation_date": 1501104281, "question_id": 45337694, "link": "https://stackoverflow.com/questions/45337694/ical-can-a-timezone-tzid-parameter-contain-a-char", "title": "iCal - can a TimeZone TZID parameter contain a &quot;:&quot; char?", "body": "<p>In a c++ project, I'm writing a parser to read from and write to .ics files. To do that, I test my parser against several files with a maximum of possible cases, from several sources (gmail, yahoo, ...). Recently I found in a test file a situation that leaves me a little confused, and for which I could not find a satisfactory answer.</p>\n\n<p>One of my test file failed to be imported by my parser. The VEVENT that cause the issue contains the following start date:</p>\n\n<pre><code>DTSTART;TZID=GMT+04:00:20120103T120000\n</code></pre>\n\n<p>This event match with a VTIMEZONE, that declares his TZID parameter as follow:</p>\n\n<pre><code>TZID:GMT+04:00\n</code></pre>\n\n<p>AFAIK the \":\" char should be instead used as separator, and I suspect that the VTIMEZONE itself is malformed in the sample described above, but I  didn't find any document that explicitly specifies that this situation can never happen. I also noticed that several apps like Thunderbird also fail to import this file, apparently for the same reason.</p>\n\n<p>So my question is: can a TZID parameter in a VTIMEZONE contain a \":\" char?</p>\n\n<p>Also, I don't know if I should use the TZID content as a key to extract the ISO date from the DTSTART parameter, or if I do simply reject a such event, tagging it as corrupted, and showing an error message after the importation?</p>\n"}, {"tags": ["c++", "struct"], "comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 1, "creation_date": 1501104282, "post_id": 45337656, "comment_id": 77637400, "body": "<code>__a_h</code> is an identifier that is reserved to the implementation. By defining it, you condemn your program to have undefined behaviour."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1501104336, "post_id": 45337656, "comment_id": 77637415, "body": "This question appears to have nothing to do with the C language."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1501105013, "post_id": 45337656, "comment_id": 77637685, "body": "Does your <code>a.h</code> have prototype for by-value overload of <code>addData</code>?"}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1501105131, "post_id": 45337656, "comment_id": 77637741, "body": "The error message indicates that the compiler is looking for a constructor for the <code>myStruct</code> struct which takes a reference to a <code>myStruct</code> type object. This code is a bit garbled in the use of <code>typedef</code>. It looks like you are trying to write C source code but using .cpp files so the compiler is treating it like C++ and not C."}, {"owner": {"reputation": 15, "user_id": 8071951, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/727b2d14a48697be9517e9e3dff0a0c9?s=128&d=identicon&r=PG&f=1", "display_name": "Hazza_ob", "link": "https://stackoverflow.com/users/8071951/hazza-ob"}, "reply_to_user": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1501105724, "post_id": 45337656, "comment_id": 77637975, "body": "@RichardChambers I\u2019ve changed the file to .c instead of .cpp. However i\u2019m still not sure how i can make the use of typedef to be less \u2018garbled\u2019 as you say?"}, {"owner": {"reputation": 15, "user_id": 8071951, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/727b2d14a48697be9517e9e3dff0a0c9?s=128&d=identicon&r=PG&f=1", "display_name": "Hazza_ob", "link": "https://stackoverflow.com/users/8071951/hazza-ob"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1501105766, "post_id": 45337656, "comment_id": 77637993, "body": "@SergeyA  - I\u2019m not sure, the new prototype is simply: &#39;int addData(struct myStruct structureC);&#39;"}, {"owner": {"reputation": 15, "user_id": 8071951, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/727b2d14a48697be9517e9e3dff0a0c9?s=128&d=identicon&r=PG&f=1", "display_name": "Hazza_ob", "link": "https://stackoverflow.com/users/8071951/hazza-ob"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1501105841, "post_id": 45337656, "comment_id": 77638034, "body": "@user2079303 - What is the typical way to write #ifndef ... etc. for more defined behaviour?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1501105994, "post_id": 45337656, "comment_id": 77638090, "body": "@Hazza_ob you can pick any name for the include guard except those that are reserved for the implementation (or used by you for something else). Same rules apply as for all other identifiers. Do not use any underscores, except at most one in between words is an easy to remember rule of thumb."}, {"owner": {"reputation": 15, "user_id": 8071951, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/727b2d14a48697be9517e9e3dff0a0c9?s=128&d=identicon&r=PG&f=1", "display_name": "Hazza_ob", "link": "https://stackoverflow.com/users/8071951/hazza-ob"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1501106194, "post_id": 45337656, "comment_id": 77638157, "body": "@user2079303 thanks! but back to the original question, do you know why the compiler is rejecting the code?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1501106196, "post_id": 45337656, "comment_id": 77638159, "body": "Why do you use volatile?"}, {"owner": {"reputation": 15, "user_id": 8071951, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/727b2d14a48697be9517e9e3dff0a0c9?s=128&d=identicon&r=PG&f=1", "display_name": "Hazza_ob", "link": "https://stackoverflow.com/users/8071951/hazza-ob"}, "edited": false, "score": 0, "creation_date": 1501106509, "post_id": 45337656, "comment_id": 77638313, "body": "@manni66 - thought it was required for using structs across files?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1501107235, "post_id": 45337656, "comment_id": 77638635, "body": "No, it is not required."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 8071951, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/727b2d14a48697be9517e9e3dff0a0c9?s=128&d=identicon&r=PG&f=1", "display_name": "Hazza_ob", "link": "https://stackoverflow.com/users/8071951/hazza-ob"}, "edited": false, "score": 0, "creation_date": 1501107701, "post_id": 45338318, "comment_id": 77638822, "body": "This is really useful! However could you provide an example of how i would then pass the struct to a function in the \u2018pass by value\u2019 and \u2018pass by address\u2019 format please?"}], "tags": [], "owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "is_accepted": true, "score": 1, "last_activity_date": 1501108833, "last_edit_date": 1501108833, "creation_date": 1501107331, "answer_id": 45338318, "question_id": 45337656, "link": "https://stackoverflow.com/questions/45337656/how-can-i-pass-structs-across-files-by-value/45338318#45338318", "title": "How can i pass structs across files by value", "body": "<p>C++ will generate default constructors and a copy operator for structs and classes.</p>\n\n<p>For your myStruct these implicit functions would be:</p>\n\n<pre><code>struct myStruct {\n\n  myStruct() {}                                // &lt;-- implicit default constructor.\n\n  myStruct(const myStruct&amp; other)              // &lt;-- implicit copy contructor\n  {\n     foo = other.foo;\n     bar = other.bar;\n  }\n\n  myStruct&amp; operator = (const myStruct&amp; other) // &lt;-- implicit copy operator\n  {\n     foo = other.foo;\n     bar = other.bar;\n     return *this;\n  }\n\n  int foo;\n  int bar;\n};\n</code></pre>\n\n<p>Note that the copy constructor and operator expect a <code>const myStruct&amp;</code> parameter.  The <code>volatile</code> keyword in your definition of <code>myStruct volatile structure1;</code> prevents parameter matching.</p>\n\n<p>You'd have to explicitly declare a copy operator and/or constructor that accept a <code>const volatile myStruct&amp;</code> to make your code compile.</p>\n\n<p><code>volatile</code> data needs special handling by the compiler's optimizer.  That's why the <code>volatile</code> keyword is important here.  You should really consider whether your data really needs this qualifier.  On the Arduino, there is only one case where this keyword is needed, that is when the data is <em>modified</em> by an interrupt routine.</p>\n\n<p>Alternatively, you can define functions that accept a volatile reference or pointer to data:</p>\n\n<pre><code>struct MyStruct   // I suggest you use this syntax for declarting structures\n{                 // So you don't ghave to repeat the struct keyword everywhere.\n    myStruct(const myStruct&amp; other)\n    {\n       foo = other.foo;\n       bar = other.bar;\n    }\n    myStruct(const volatile myStruct&amp; other)\n    {\n       foo = other.foo;\n       bar = other.bar;\n    }\n    int foo, bar;\n};\n\nint addData(volatile const myStruct* structureC) \n{\n  return structureC-&gt;foo + structureC-&gt;bar;\n}\n\nint addData(volatile const myStruct&amp; structureC) \n{\n  return structureC.foo + structureC.bar;\n}\n\nint addDataByCopy(myStruct structureC) \n{\n  return structureC.foo + structureC.bar;\n}\n\n// ...\nvolatile myStruct my;\nvoid loop()\n{\n   my.foo = 1;\n   my.bar = 1;\n   int x = addData(my);  // by const reference.\n   // or\n   int y = addData(&amp;my); // by pointer.\n   // or\n   int z = addDataByCopy(my); // by copy\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 8071951, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/727b2d14a48697be9517e9e3dff0a0c9?s=128&d=identicon&r=PG&f=1", "display_name": "Hazza_ob", "link": "https://stackoverflow.com/users/8071951/hazza-ob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 45338318, "answer_count": 1, "score": 0, "last_activity_date": 1501108833, "creation_date": 1501104096, "last_edit_date": 1501104346, "question_id": 45337656, "link": "https://stackoverflow.com/questions/45337656/how-can-i-pass-structs-across-files-by-value", "title": "How can i pass structs across files by value", "body": "<p>I\u2019m able to produce a compilable piece of code that will pass structs to functions, however my code just falls apart when i\u2019m trying to use \u2018pass by value\u2019.</p>\n\n<p>I\u2019ve looked at how to use the same formatted struct across multiple files, but i\u2019m not sure if it\u2019s any different when passing functions by value?</p>\n\n<p><em>Note: this is written in the arduino IDE in C++</em></p>\n\n<p>my code for passing by address follows:</p>\n\n<p><strong>passingStructs.ino</strong></p>\n\n<pre><code>#include \"a.h\"\n#include \"b.h\"\n\nmyStruct volatile structure1;\n\nvoid setup() {\n\n}\n\nvoid loop() {\n\n\n  structure1.foo = 7;\n  structure1.bar = 11;\n\n  int lower = minusData(&amp;structure1);\n  int higher = addData(&amp;structure1);\n}\n</code></pre>\n\n<p><strong>a.h</strong>:</p>\n\n<pre><code>#include \"b.h\"\n\n#ifndef __a_h\n#define __a_h\n\n//prototype functions\nint addData(struct myStruct *structureC);\n\n#endif //__a_h\n</code></pre>\n\n<p><strong>a.cpp:</strong></p>\n\n<pre><code>#include \"a.h\"\n#include \"b.h\"\n\nint addData(struct myStruct *structureC) {\n\n  int x = structureC-&gt;foo;\n  int y = structureC-&gt;bar;\n\n  return (x + y);\n}\n</code></pre>\n\n<p><strong>b.h:</strong></p>\n\n<pre><code>#ifndef __b_h\n#define __b_h\n\n//Define structure\ntypedef struct myStruct {\n  int foo;\n  int bar;\n};\n\n//Prototype functions\nint minusData(struct myStruct *structureC);\n\n#endif //__b_h\n</code></pre>\n\n<p><strong>b.cpp:</strong></p>\n\n<pre><code>#include \"b.h\"\n\nmyStruct structureC;\n\n    int minusData(struct myStruct *structureC) {\n      int x = structureC-&gt;foo;\n      int y = structureC-&gt;bar;\n\n      return (x - y);\n    }\n</code></pre>\n\n<p>however if i use \n    int higher = addData(structure1);\nin the .ino file and</p>\n\n<pre><code>int addData(struct myStruct structureC) {\n\n  int x = structureC.foo;\n  int y = structureC.bar;\n\n  return (x + y);\n}\n</code></pre>\n\n<p>in the a.cpp file with the same prototype in the header file, the compiler rejects the code saying </p>\n\n<pre><code>no matching function for call to \u2018myStruct::myStruct(volatile myStruct&amp;)\u2019\n</code></pre>\n\n<p>any ideas?</p>\n"}, {"tags": ["c++", "static-methods"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 2, "creation_date": 1501103173, "post_id": 45337425, "comment_id": 77636849, "body": "&quot;This is fine&quot; - no, it isn&#39;t."}, {"owner": {"reputation": 29, "user_id": 6944291, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DzizusZXXd4/AAAAAAAAAAI/AAAAAAAAAXw/wzL29HiorwU/photo.jpg?sz=128", "display_name": "karsh tharyani", "link": "https://stackoverflow.com/users/6944291/karsh-tharyani"}, "edited": false, "score": 0, "creation_date": 1501103329, "post_id": 45337425, "comment_id": 77636937, "body": "Hey! I am new to this. @NeilButterworth Could you explain?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1501103410, "post_id": 45337425, "comment_id": 77636978, "body": "If a function is declared as returning a value, then in C++ it must return a value. If your compiler is not warning you about this, you need to up the warning levels."}, {"owner": {"reputation": 29, "user_id": 6944291, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DzizusZXXd4/AAAAAAAAAAI/AAAAAAAAAXw/wzL29HiorwU/photo.jpg?sz=128", "display_name": "karsh tharyani", "link": "https://stackoverflow.com/users/6944291/karsh-tharyani"}, "edited": false, "score": 0, "creation_date": 1501103604, "post_id": 45337425, "comment_id": 77637080, "body": "Okay. So, you feel that this behaviour should generate a warning. However, not an error? I mean, it is working perfectly."}, {"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 0, "creation_date": 1501103634, "post_id": 45337425, "comment_id": 77637091, "body": "It <i>appears</i> to be working correctly... for now"}, {"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 0, "creation_date": 1501103668, "post_id": 45337425, "comment_id": 77637112, "body": "I&#39;m sure there&#39;s a duplicate question somewhere (on this site) but I&#39;ve no luck finding anything"}, {"owner": {"reputation": 607, "user_id": 6784509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UjPEk.jpg?s=128&g=1", "display_name": "HatsuPointerKun", "link": "https://stackoverflow.com/users/6784509/hatsupointerkun"}, "edited": false, "score": 0, "creation_date": 1501103857, "post_id": 45337425, "comment_id": 77637200, "body": "@karshtharyani &quot;I mean, it is working perfectly&quot; Ever heard of undefined behavior ?"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1501103958, "post_id": 45337425, "comment_id": 77637260, "body": "@karshtharyani Try writing a function, with return type of <code>std::string</code>, without <code>return</code> statement. It <i>may</i> start to show signs of <i>not working</i> (due to the nature of undefined behavior - it is, still, not guaranteed)."}, {"owner": {"reputation": 29, "user_id": 6944291, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DzizusZXXd4/AAAAAAAAAAI/AAAAAAAAAXw/wzL29HiorwU/photo.jpg?sz=128", "display_name": "karsh tharyani", "link": "https://stackoverflow.com/users/6944291/karsh-tharyani"}, "edited": false, "score": 0, "creation_date": 1501103999, "post_id": 45337425, "comment_id": 77637281, "body": "Yeah. I get it now. Thanks @NeilButterworth."}, {"owner": {"reputation": 29, "user_id": 6944291, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DzizusZXXd4/AAAAAAAAAAI/AAAAAAAAAXw/wzL29HiorwU/photo.jpg?sz=128", "display_name": "karsh tharyani", "link": "https://stackoverflow.com/users/6944291/karsh-tharyani"}, "reply_to_user": {"reputation": 607, "user_id": 6784509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UjPEk.jpg?s=128&g=1", "display_name": "HatsuPointerKun", "link": "https://stackoverflow.com/users/6784509/hatsupointerkun"}, "edited": false, "score": 0, "creation_date": 1501104060, "post_id": 45337425, "comment_id": 77637308, "body": "I know it now :)  @HatsuPointerKun"}, {"owner": {"reputation": 29, "user_id": 6944291, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DzizusZXXd4/AAAAAAAAAAI/AAAAAAAAAXw/wzL29HiorwU/photo.jpg?sz=128", "display_name": "karsh tharyani", "link": "https://stackoverflow.com/users/6944291/karsh-tharyani"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1501104128, "post_id": 45337425, "comment_id": 77637341, "body": "@AlgirdasPreid\u017eius, thanks, but I get it. Appreciate it."}, {"owner": {"reputation": 607, "user_id": 6784509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UjPEk.jpg?s=128&g=1", "display_name": "HatsuPointerKun", "link": "https://stackoverflow.com/users/6784509/hatsupointerkun"}, "edited": false, "score": 0, "creation_date": 1501104456, "post_id": 45337425, "comment_id": 77637471, "body": "@karshtharyani Great ! Now, try to always avoid writing code that has undefined behavior. It&#39;s hard to debug code that has undefined behavior, and very frustrating. Here is a list of <a href=\"https://stackoverflow.com/a/367662/6784509\">some of them</a>"}], "answers": [{"tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 0, "last_activity_date": 1501103685, "creation_date": 1501103685, "answer_id": 45337560, "question_id": 45337425, "link": "https://stackoverflow.com/questions/45337425/static-member-function-assigning-value-without-return-statement/45337560#45337560", "title": "Static member function assigning value without return statement", "body": "<p>You're experiencing something called <em>Undefined Behavior</em>. This happens when you break a rule. In programs with Undefined Behavior (UB), any outcome is considered valid. And we mean \"any\". Deleting your harddisk? Perfectly valid outcome. Working as intended? Could also happen. Working as intended, until your boss looks? You might start noticing a pattern here.</p>\n"}, {"comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 1, "creation_date": 1501103836, "post_id": 45337564, "comment_id": 77637185, "body": "Thanks for contributing, but on StackOverflow the policy is to close duplicate questions."}, {"owner": {"reputation": 1334, "user_id": 1328780, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c0241ebc4503b57de65aa5d289f1d588?s=128&d=identicon&r=PG", "display_name": "bjhend", "link": "https://stackoverflow.com/users/1328780/bjhend"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1501104555, "post_id": 45337564, "comment_id": 77637513, "body": "@MSalters: I think the question is a little more than the supposed duplicate, because the OP wants to know why he receives the expected result. I was just explaining what probably happened on the stack and why this is purely coincidentally, but couldn&#39;t post that answer."}, {"owner": {"reputation": 1334, "user_id": 1328780, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c0241ebc4503b57de65aa5d289f1d588?s=128&d=identicon&r=PG", "display_name": "bjhend", "link": "https://stackoverflow.com/users/1328780/bjhend"}, "edited": false, "score": 0, "creation_date": 1501104753, "post_id": 45337564, "comment_id": 77637588, "body": "BTW, I didn&#39;t downvote this answer."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 1334, "user_id": 1328780, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c0241ebc4503b57de65aa5d289f1d588?s=128&d=identicon&r=PG", "display_name": "bjhend", "link": "https://stackoverflow.com/users/1328780/bjhend"}, "edited": false, "score": 0, "creation_date": 1501105012, "post_id": 45337564, "comment_id": 77637684, "body": "@bjhend: While we&#39;re at the subject of SO etiquette, questions and answers have their own comments, and I don&#39;t think you intended to comment on the answer here. But note that the accepted answer on the linked question also mentions <i>why</i> this can happen. (last paragraph)"}, {"owner": {"reputation": 1334, "user_id": 1328780, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c0241ebc4503b57de65aa5d289f1d588?s=128&d=identicon&r=PG", "display_name": "bjhend", "link": "https://stackoverflow.com/users/1328780/bjhend"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1501105485, "post_id": 45337564, "comment_id": 77637884, "body": "@MSalters: Sorry, that I didn&#39;t find the right place to comment on the duplication mark. At least it was a bit frustrating to put a little work into an answer and then find a disabled post button, although I understand and appreciate in general the prevention of duplicates on SO."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 1334, "user_id": 1328780, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c0241ebc4503b57de65aa5d289f1d588?s=128&d=identicon&r=PG", "display_name": "bjhend", "link": "https://stackoverflow.com/users/1328780/bjhend"}, "edited": false, "score": 0, "creation_date": 1501105842, "post_id": 45337564, "comment_id": 77638035, "body": "@bjhend: I can relate - I posted an answer myself, then saw Ian&#39;s contribution, and realized it was a duplicate."}], "tags": [], "owner": {"reputation": 113, "user_id": 7869944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1244aac4cdc6dce09963b9bd82aef182?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Neal", "link": "https://stackoverflow.com/users/7869944/ian-neal"}, "is_accepted": false, "score": 0, "last_activity_date": 1501103697, "creation_date": 1501103697, "answer_id": 45337564, "question_id": 45337425, "link": "https://stackoverflow.com/questions/45337425/static-member-function-assigning-value-without-return-statement/45337564#45337564", "title": "Static member function assigning value without return statement", "body": "<p>I think that this question's answer will help you understand what's going on:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/1610030/why-does-flowing-off-the-end-of-a-non-void-function-without-returning-a-value-no\">\"Why does flowing off the end of a non-void function without returning a value not produce a compiler error?\"</a></p>\n\n<p>In a nutshell, your compiler does not check for the lack of return statement because it's hard, and the reason <code>b</code> gets set to 5 is probably due to the residual stack state of the method call.</p>\n"}], "owner": {"reputation": 29, "user_id": 6944291, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DzizusZXXd4/AAAAAAAAAAI/AAAAAAAAAXw/wzL29HiorwU/photo.jpg?sz=128", "display_name": "karsh tharyani", "link": "https://stackoverflow.com/users/6944291/karsh-tharyani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "closed_date": 1501103747, "answer_count": 2, "score": 0, "last_activity_date": 1501103697, "creation_date": 1501103103, "question_id": 45337425, "link": "https://stackoverflow.com/questions/45337425/static-member-function-assigning-value-without-return-statement", "closed_reason": "Duplicate", "title": "Static member function assigning value without return statement", "body": "<p>In the class, we have a static member function called set_value. This function, since static allows it, can be accessed by the main() given the scope resolution by class Something. Its return type is int, but the function does not return anything. This is fine. However, how does the compiler know to assign this value to b in the call statement made in main()?</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass Something{\nprivate:\n    static int value;\npublic:\n    static int set_value (int x)\n    {\n        value = x;\n        // return statement missing? But still works!\n    }\n\n};\n\nint Something::value = 1;\n// since no object of something is created we call\n// the constructor of the data type in the object\n\nint main()\n{\n    int b;\n    cout &lt;&lt; \"Success!\" &lt;&lt; endl;\n    b = Something::set_value(5);\n    cout &lt;&lt; \"The Value of b is \" &lt;&lt; b &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>I get the following output </p>\n\n<pre><code>/*\nSuccess!\nThe Value of b is 5\n*/\n</code></pre>\n"}, {"tags": ["c++", "while-loop"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1501105634, "post_id": 45337331, "comment_id": 77637942, "body": "Wow, so many parentheses! You don&#39;t need the ones around the individual <code>==</code> tests, and you can get rid of the pair around the three tests by applying De Morgan&#39;s theorem: <code>while (a != 1 &amp;&amp; a != 2 &amp;&amp; a != 3)</code> is so much easier to read..."}], "answers": [{"comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1501105909, "post_id": 45337459, "comment_id": 77638058, "body": "You are, of course, free to dislike the design of C++ streams, but you should not claim to speak for &quot;most people&quot;, especially when your objections take the form of statements that clearly show that you don&#39;t know what the design goals were and that you don&#39;t know how to use them correctly."}], "tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": false, "score": 4, "last_activity_date": 1501103816, "last_edit_date": 1501103816, "creation_date": 1501103244, "answer_id": 45337459, "question_id": 45337331, "link": "https://stackoverflow.com/questions/45337331/while-loop-responds-strangely-to-non-integer/45337459#45337459", "title": "While loop responds strangely to non integer", "body": "<pre><code>cin &gt;&gt; a;\n</code></pre>\n\n<p>If this code fails (and it does if you provide non-integer data), the stream will enter an invalid state, and all subsequent calls to <code>cin &gt;&gt; a</code> will return immediately with no side-effects, still in its error state.</p>\n\n<p>This is a C++ design decision I don't particularly like (and probably why most people don't like the Streams design in C++), because you'd expect this to throw an error or return to normal afterwards, like in most other languages. Instead, it fails silently, which is the biggest source of many program bugs.</p>\n\n<p>At any rate, there's two possible fixes for this.</p>\n\n<p>The first is to properly check that the stream is still valid. Like so:</p>\n\n<pre><code>while (!((a == 1) || (a == 2) || (a == 3)))\n{\n    cout &lt;&lt; \"That is not a valid gametype. Pick from the following menu:\\n(1):PVP\\n(2):PvE\\n(3):EVE\\n\";\n    a = 0;\n    if(!(cin &gt;&gt; a)) break; //Input was invalid; breaking out of the loop.\n}\n</code></pre>\n\n<p>This will break the loop if the input is invalid, but leaves the stream in an invalid state.</p>\n\n<p>The other fix is to reset the stream to a valid state.</p>\n\n<pre><code>while (!((a == 1) || (a == 2) || (a == 3)))\n{\n    cout &lt;&lt; \"That is not a valid gametype. Pick from the following menu:\\n(1):PVP\\n(2):PvE\\n(3):EVE\\n\";\n    a = 0;\n    while(!(cin &gt;&gt; a)) {\n        std::cin.clear();\n        std::cin.ignore(numeric_limits&lt;streamsize&gt;::max(), '\\n');\n        std::cout &lt;&lt; \"Please only enter Integers.\" &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p>The second is usually the approach people need, but there might be situations where the first makes more sense.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 8372464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80ee8578b5585f5b1d81d84e3fd56a7b?s=128&d=identicon&r=PG&f=1", "display_name": "Aberration", "link": "https://stackoverflow.com/users/8372464/aberration"}, "is_accepted": true, "score": 0, "last_activity_date": 1501385173, "creation_date": 1501385173, "answer_id": 45396060, "question_id": 45337331, "link": "https://stackoverflow.com/questions/45337331/while-loop-responds-strangely-to-non-integer/45396060#45396060", "title": "While loop responds strangely to non integer", "body": "<p>I got it to work:</p>\n\n<pre><code>    int a;\ncout &lt;&lt; \"What type of game do you wish to  play?\\n(Enter the number of the menu option for)\\n(1):Player V Player\\n(2):Player vComp\\n(3):Comp V Comp\\n\";\ncin &gt;&gt; a;\nwhile (a != 1 &amp;&amp; a != 2 &amp;&amp; a != 3 || cin.fail())\n{\n    cout &lt;&lt; \"That is not a valid gametype. Pick from the following menu:\\n(1):Player V Player\\n(2):Player vComp\\n(3):Comp V Comp\\n\";\n    cin.clear();\n    cin.ignore(256, '\\n');\n    cin &gt;&gt; a;\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 8372464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80ee8578b5585f5b1d81d84e3fd56a7b?s=128&d=identicon&r=PG&f=1", "display_name": "Aberration", "link": "https://stackoverflow.com/users/8372464/aberration"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 45396060, "answer_count": 2, "score": 1, "last_activity_date": 1501385173, "creation_date": 1501102789, "question_id": 45337331, "link": "https://stackoverflow.com/questions/45337331/while-loop-responds-strangely-to-non-integer", "title": "While loop responds strangely to non integer", "body": "<p>So I have a problem when running this where I was testing to make sure the while loop works. If a non-integer value is inputted for cin &lt;&lt; a; the loop will execute endlessly without asking for further values of a, if what is inputted is an integer but not one of those listed it works fine but I want it to account for any input users try. Is there a simple way to fix this? I assume it has something to do with a being an int but I need an int for the switch statement later on.</p>\n\n<pre><code>int a;\ncout &lt;&lt; \"What type of game do you wish to  play?\\n(Enter the number of the menu option for)\\n(1):PVP\\n(2):PvE\\n(3):EVE\\n\";\ncin &gt;&gt; a;\nwhile (!((a == 1) || (a == 2) || (a == 3)))\n{\n    cout &lt;&lt; \"That is not a valid gametype. Pick from the following menu:\\n(1):PVP\\n(2):PvE\\n(3):EVE\\n\";\n    a = 0;\n    cin &gt;&gt; a;\n}\n</code></pre>\n"}, {"tags": ["c++", "xml", "tinyxml"], "comments": [{"owner": {"reputation": 30596, "user_id": 134702, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7c1594304f3515b88e31bc8888f0f593?s=128&d=identicon&r=PG", "display_name": "Matt Hook", "link": "https://stackoverflow.com/users/134702/matt-hook"}, "edited": false, "score": 0, "creation_date": 1501104546, "post_id": 45337133, "comment_id": 77637507, "body": "Works for me on Linux.  What compiler are you using and are you on Windows?  You need to delve into tinyxml.cpp and diagnose what&#39;s happening with TiXmlFOpen.  It&#39;ll either simply call fopen or fopen_s (on windows with _MSC_VER &gt; 1400.  According to the online docs fopen_s may not be available under some circumstances."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1501105211, "post_id": 45337133, "comment_id": 77637765, "body": "Did you check for errors? <a href=\"http://www.grinninglizard.com/tinyxmldocs/classTiXmlDocument.html#348e68faad4a3498f413c51ee9bc321a\" rel=\"nofollow noreferrer\">grinninglizard.com/tinyxmldocs/&hellip;</a>"}, {"owner": {"reputation": 115, "user_id": 6525130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8852f33764a179133ae0768cde55d8d7?s=128&d=identicon&r=PG&f=1", "display_name": "shreeya", "link": "https://stackoverflow.com/users/6525130/shreeya"}, "reply_to_user": {"reputation": 30596, "user_id": 134702, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7c1594304f3515b88e31bc8888f0f593?s=128&d=identicon&r=PG", "display_name": "Matt Hook", "link": "https://stackoverflow.com/users/134702/matt-hook"}, "edited": false, "score": 0, "creation_date": 1501105543, "post_id": 45337133, "comment_id": 77637903, "body": "@Matt I am compiling this in VS 2013 on windows. It calls fopen_s(). When you say that it is not available under some circumstances, what alternate method should I consider?"}, {"owner": {"reputation": 115, "user_id": 6525130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8852f33764a179133ae0768cde55d8d7?s=128&d=identicon&r=PG&f=1", "display_name": "shreeya", "link": "https://stackoverflow.com/users/6525130/shreeya"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1501105603, "post_id": 45337133, "comment_id": 77637930, "body": "@Galik yes there are no errors"}, {"owner": {"reputation": 30596, "user_id": 134702, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7c1594304f3515b88e31bc8888f0f593?s=128&d=identicon&r=PG", "display_name": "Matt Hook", "link": "https://stackoverflow.com/users/134702/matt-hook"}, "edited": false, "score": 0, "creation_date": 1501107380, "post_id": 45337133, "comment_id": 77638685, "body": "@sreeya - I think it&#39;s a bug.  In LoadFile change the &quot;rb&quot; on the TiXmlFOpen to simply &quot;w&quot;."}], "owner": {"reputation": 115, "user_id": 6525130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8852f33764a179133ae0768cde55d8d7?s=128&d=identicon&r=PG&f=1", "display_name": "shreeya", "link": "https://stackoverflow.com/users/6525130/shreeya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 512, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1501103532, "creation_date": 1501102095, "last_edit_date": 1501103532, "question_id": 45337133, "link": "https://stackoverflow.com/questions/45337133/save-the-xml-file-using-tinyxml", "title": "Save the .xml file using TinyXml", "body": "<p>I want to make an xml file and I am using tinyxml to create it. I am using this code that was already online but it does not save the file.</p>\n\n<pre><code>#include \"tinyxml.h\"\n\nint main()\n{\n    build_simple_doc();\n    return 0;\n}\nvoid build_simple_doc( )\n{\n    // Make xml: &lt;?xml ..&gt;&lt;Hello&gt;World&lt;/Hello&gt;\n    TiXmlDocument doc;\n    TiXmlDeclaration * decl = new TiXmlDeclaration( \"1.0\", \"\", \"\" );\n    TiXmlElement * element = new TiXmlElement( \"Hello\" );\n    TiXmlText * text = new TiXmlText( \"World\" );\n    element-&gt;LinkEndChild( text );\n    doc.LinkEndChild( decl );\n    doc.LinkEndChild( element );\n    doc.SaveFile( \"madeByHand.xml\" );\n}\n</code></pre>\n\n<p>When it executes the last line, the file is not created. I stepped into SaveFile() and there is TiXmlFOpen() method that cannot open the file. I am not sure what I am doing wrong.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1334, "user_id": 1328780, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c0241ebc4503b57de65aa5d289f1d588?s=128&d=identicon&r=PG", "display_name": "bjhend", "link": "https://stackoverflow.com/users/1328780/bjhend"}, "edited": false, "score": 3, "creation_date": 1501102226, "post_id": 45337126, "comment_id": 77636317, "body": "What do you mean by &quot;the execution stops&quot;? Is there a segfault?"}, {"owner": {"reputation": 15044, "user_id": 416574, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/80e6a3e7975350dea41b2cf3fa46c407?s=128&d=identicon&r=PG", "display_name": "pstrjds", "link": "https://stackoverflow.com/users/416574/pstrjds"}, "edited": false, "score": 0, "creation_date": 1501102562, "post_id": 45337126, "comment_id": 77636513, "body": "Have you stepped through it with a debugger? Try stepping through the <code>createBST</code> method one line at a time and you should find the source of the problem."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1501102704, "post_id": 45337126, "comment_id": 77636591, "body": "Why did you not look at the error that you got?"}, {"owner": {"reputation": 3, "user_id": 8372443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ec1486fc5afd6997bc5fbac8ceff280?s=128&d=identicon&r=PG&f=1", "display_name": "James Bell", "link": "https://stackoverflow.com/users/8372443/james-bell"}, "reply_to_user": {"reputation": 1334, "user_id": 1328780, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c0241ebc4503b57de65aa5d289f1d588?s=128&d=identicon&r=PG", "display_name": "bjhend", "link": "https://stackoverflow.com/users/1328780/bjhend"}, "edited": false, "score": 0, "creation_date": 1501128276, "post_id": 45337126, "comment_id": 77643906, "body": "No error message mate..as @bjhend rightly mentioned, it was a runtime crush because of an invalid pointer. My compiler just showed &quot;Program terminated with exit 0&quot; :(."}], "answers": [{"tags": [], "owner": {"reputation": 1334, "user_id": 1328780, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c0241ebc4503b57de65aa5d289f1d588?s=128&d=identicon&r=PG", "display_name": "bjhend", "link": "https://stackoverflow.com/users/1328780/bjhend"}, "is_accepted": true, "score": 0, "last_activity_date": 1501102641, "creation_date": 1501102641, "answer_id": 45337283, "question_id": 45337126, "link": "https://stackoverflow.com/questions/45337126/dont-understand-the-output-of-the-given-code/45337283#45337283", "title": "Don&#39;t understand the output of the given code", "body": "<p>You do not set a value to <code>BST::root</code> after creating <code>obj_bst</code>. Thus <code>obj_bst.getBSTRoot()</code> returns an invalid pointer on which you call <code>setVal</code> which causes a crash.</p>\n"}], "owner": {"reputation": 3, "user_id": 8372443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ec1486fc5afd6997bc5fbac8ceff280?s=128&d=identicon&r=PG&f=1", "display_name": "James Bell", "link": "https://stackoverflow.com/users/8372443/james-bell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "closed_date": 1501102718, "accepted_answer_id": 45337283, "answer_count": 1, "score": -4, "last_activity_date": 1501102641, "creation_date": 1501102044, "question_id": 45337126, "link": "https://stackoverflow.com/questions/45337126/dont-understand-the-output-of-the-given-code", "closed_reason": "Not suitable for this site", "title": "Don&#39;t understand the output of the given code", "body": "<p>Just jumped into C++ and tried to run the following code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\n\nclass BST_Node{\n    private:\n        int val;\n        BST_Node* left;\n        BST_Node* right;\n    public:\n        void setVal(int);\n        int getVal();\n        void setLeft(BST_Node*);\n        BST_Node* getLeft();\n        void setRight(BST_Node*);\n        BST_Node* getRight();\n        BST_Node(int val){this-&gt;val=val;this-&gt;left=nullptr;this-&gt;right=nullptr;}\n};\n\nclass BST{\n    private:\n        BST_Node* root;\n    public:\n        void setBSTRoot(BST_Node* node){root=node;}\n        BST_Node* getBSTRoot(){return this-&gt;root;}\n};\n\nBST createBST(int*, int);\n\nvoid placeNode(BST_Node*, int);\nvoid BST_Node::setVal(int val){\n    this-&gt;val = val;\n    cout&lt;&lt;\"11: \"&lt;&lt; val &lt;&lt; endl;\n}\n\nint BST_Node::getVal(){\n    return this-&gt;val;\n}\n\nvoid BST_Node::setLeft(BST_Node* left){\n    this-&gt;left = left;\n}\n\nvoid BST_Node::setRight(BST_Node* right){\n    this-&gt;right = right;\n}\n\nBST_Node* BST_Node::getLeft(){\n    return this-&gt;left;\n}\n\nBST_Node* BST_Node::getRight(){\n    return this-&gt;right;\n\n}\n\nvoid print_inorder(BST_Node root){\n    cout&lt;&lt;\"working\"&lt;&lt;endl;\n    if(root.getLeft()!=nullptr){\n        print_inorder(*(root.getLeft()));\n    }\n    cout&lt;&lt;\"*\"&lt;&lt;root.getLeft()-&gt;getVal() &lt;&lt;\"*\" &lt;&lt; endl;\n    cout&lt;&lt;\"*\"&lt;&lt;root.getVal() &lt;&lt;\"*\" &lt;&lt; endl;\n    cout&lt;&lt;\"*\"&lt;&lt;root.getRight()-&gt;getVal() &lt;&lt;\"*\" &lt;&lt; endl;\n}\n\n\nBST createBST(int* arr, int arr_size){\n    BST obj_bst;\n    BST_Node* root;\n    cout&lt;&lt;\"0 \"&lt;&lt;endl;\n    root = obj_bst.getBSTRoot();\n    cout&lt;&lt;\"1: \"&lt;&lt; (*arr) &lt;&lt; endl;\n    //cout&lt;&lt;\"create BST \" &lt;&lt; root-&gt;getVal() &lt;&lt;endl;\n    root-&gt;setVal(*arr);\n    cout&lt;&lt;\"2 \"&lt;&lt;endl;\n    cout&lt;&lt;\"create BST \" &lt;&lt; root-&gt;getVal() &lt;&lt;endl;\n    for(int i=1;i&lt;arr_size;i++){\n        cout&lt;&lt;\"create BST \" &lt;&lt; root-&gt;getVal() &lt;&lt;endl;\n        int curr_val = *(arr+i);\n        placeNode(root,curr_val);\n    }\n    cout&lt;&lt;\"create BST \" &lt;&lt; root-&gt;getVal() &lt;&lt;endl;\n    return obj_bst;\n}\n\nvoid placeNode(BST_Node* root, int curr_val){\n    int root_val = root-&gt;getVal();\n    if((curr_val&gt;root_val) &amp;&amp; (root-&gt;getRight()!=nullptr) ){\n        placeNode(root-&gt;getRight(), curr_val);\n    }else if((curr_val&lt;=root_val) &amp;&amp; (root-&gt;getLeft()!=nullptr)){\n        placeNode(root-&gt;getLeft(), curr_val);\n    }else if((curr_val&gt;root_val) &amp;&amp; (root-&gt;getRight()==nullptr)){\n\n\n        BST_Node node(curr_val);\n        root-&gt;setRight(&amp;node);\n    }else if((curr_val&lt;=root_val) &amp;&amp; (root-&gt;getLeft()==nullptr)){\n        BST_Node node(curr_val);\n        root-&gt;setLeft(&amp;node);\n    }else{\n        cout&lt;&lt; \"Placement denied\" &lt;&lt; endl;\n    }\n\n}\n\n//void createBST(int* arr, int arr_size);\nint main(){\n    int arr[10] = {23,23,34,1,2,343,343,23,4343};\n    cout&lt;&lt;\"working\"&lt;&lt;endl;\n    BST obj_bst = createBST(arr, 10);//sizeof(arr)/sizeof(int)\n    cout&lt;&lt;\"working\"&lt;&lt;endl;\n    BST_Node root = *(obj_bst.getBSTRoot());\n    cout&lt;&lt;\"working\"&lt;&lt;endl;\n    print_inorder(root);\n    cout&lt;&lt;\"working\"&lt;&lt;endl;\n    return 0;\n}\n</code></pre>\n\n<p>The output I got is:\n\"\nworking\n0 \n1: 23\n\"\nThe execution stops after \"root->setVal(*arr);\" line in the \"createBST\" method. Any explanation would be highly appreciated. Thanks!</p>\n\n<p>Sorry about too much code. I did not know what else could have been done here to post the question.</p>\n"}, {"tags": ["c++", "d"], "comments": [{"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 1, "creation_date": 1501159824, "post_id": 45337048, "comment_id": 77663539, "body": "C++ doesn&#39;t currently have a built in threadpool, currently this is something you&#39;d have to find a 3rd party library for. The stdlib did recently get <a href=\"http://en.cppreference.com/w/cpp/experimental/parallelism\" rel=\"nofollow noreferrer\">some parallelism extensions</a> but I don&#39;t think these are what you&#39;re looking for"}, {"owner": {"reputation": 2441, "user_id": 5308983, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/CNTo0.jpg?s=128&g=1", "display_name": "thinwybk", "link": "https://stackoverflow.com/users/5308983/thinwybk"}, "reply_to_user": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1501183209, "post_id": 45337048, "comment_id": 77680074, "body": "I considered C++11 without external libraries only. Without diving deeper into the C++17 extensions they at least seem similar to D&#39;s parallel()."}], "answers": [{"tags": [], "owner": {"reputation": 15566, "user_id": 876497, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2713233cc2e49a4db53ff08d6c114255?s=128&d=identicon&r=PG", "display_name": "DejanLekic", "link": "https://stackoverflow.com/users/876497/dejanlekic"}, "is_accepted": true, "score": 2, "last_activity_date": 1501151920, "creation_date": 1501151920, "answer_id": 45348392, "question_id": 45337048, "link": "https://stackoverflow.com/questions/45337048/what-is-the-equivalent-to-ds-taskpool-parallel-in-c/45348392#45348392", "title": "What is the equivalent to D&#39;s taskPool.parallel() in C++", "body": "<p>As far as I know, there is no equivalent in the standard C++ library. </p>\n\n<p>There probably is something similar in some 3rd party C++ library. Unfortunately I am not aware of any such library as I do not do C++ programming for over 15 years...</p>\n"}], "owner": {"reputation": 2441, "user_id": 5308983, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/CNTo0.jpg?s=128&g=1", "display_name": "thinwybk", "link": "https://stackoverflow.com/users/5308983/thinwybk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "accepted_answer_id": 45348392, "answer_count": 1, "score": 5, "last_activity_date": 1501151920, "creation_date": 1501101790, "question_id": 45337048, "link": "https://stackoverflow.com/questions/45337048/what-is-the-equivalent-to-ds-taskpool-parallel-in-c", "title": "What is the equivalent to D&#39;s taskPool.parallel() in C++", "body": "<p>Is there an equivalent feature to D's <em>parallel()</em> from the <em>std.parallelism</em> module in C++?</p>\n"}, {"tags": ["c++", "open-source"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 13031321, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C5ZCO.jpg?s=128&g=1", "display_name": "Keelia", "link": "https://stackoverflow.com/users/13031321/keelia"}, "is_accepted": false, "score": 0, "last_activity_date": 1584005252, "creation_date": 1584005252, "answer_id": 60651031, "question_id": 45336783, "link": "https://stackoverflow.com/questions/45336783/c-eos-error-loading-the-morphable-model-error-opening-given-file-share/60651031#60651031", "title": "C++ eos - Error loading the Morphable Model: Error opening given file: ../share/sfm_shape_3448.bin", "body": "<p>It might because you run it directly without generating it as a project. Check eos documentation:</p>\n\n<pre><code>git clone --recursive https://github.com/patrikhuber/eos.git\nmkdir build &amp;&amp; cd build # creates a build directory next to the 'eos' folder\ncmake -G \"&lt;your favourite generator&gt;\" ../eos -DCMAKE_INSTALL_PREFIX=../install/\nmake &amp;&amp; make install # or open the project file and build in an IDE like Visual Studio\n</code></pre>\n\n<p>Or it might due to files haven't loaded successfully after your git clone</p>\n\n<p>Hope it helps!</p>\n"}], "owner": {"reputation": 11, "user_id": 8372406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68cf85468b844713ecae1f0fad59afa3?s=128&d=identicon&r=PG&f=1", "display_name": "jewid", "link": "https://stackoverflow.com/users/8372406/jewid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 263, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1584005252, "creation_date": 1501100854, "last_edit_date": 1501143246, "question_id": 45336783, "link": "https://stackoverflow.com/questions/45336783/c-eos-error-loading-the-morphable-model-error-opening-given-file-share", "title": "C++ eos - Error loading the Morphable Model: Error opening given file: ../share/sfm_shape_3448.bin", "body": "<p>I am trying to run <a href=\"https://github.com/patrikhuber/eos/blob/master/examples/fit-model-simple.cpp\" rel=\"nofollow noreferrer\">some software I found on github</a>. I managed to compile and install everything on my ubuntu machine. However when trying to run one of the provided examples (fit-model-simple.cpp) I get the following error:</p>\n\n<pre><code>Error loading the Morphable Model: Error opening given file: ../share/sfm_shape_3448.bin\n</code></pre>\n\n<p>I tried to hard code the path to the file as well but the result stays the same.</p>\n\n<p>Does anybody know what I might be doing wrong?</p>\n\n<p>This is the code:</p>\n\n<pre><code>/*\n * eos - A 3D Morphable Model fitting library written in modern C++11/14.\n *\n * File: examples/fit-model-simple.cpp\n *\n * Copyright 2015 Patrik Huber\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n#include \"eos/core/Landmark.hpp\"\n#include \"eos/core/LandmarkMapper.hpp\"\n#include \"eos/fitting/orthographic_camera_estimation_linear.hpp\"\n#include \"eos/fitting/RenderingParameters.hpp\"\n#include \"eos/fitting/linear_shape_fitting.hpp\"\n#include \"eos/render/utils.hpp\"\n#include \"eos/render/texture_extraction.hpp\"\n\n#include \"opencv2/core/core.hpp\"\n#include \"opencv2/highgui/highgui.hpp\"\n\n#include \"boost/program_options.hpp\"\n#include \"boost/filesystem.hpp\"\n\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\nusing namespace eos;\nnamespace po = boost::program_options;\nnamespace fs = boost::filesystem;\nusing eos::core::Landmark;\nusing eos::core::LandmarkCollection;\nusing cv::Mat;\nusing cv::Vec2f;\nusing cv::Vec3f;\nusing cv::Vec4f;\nusing std::cout;\nusing std::endl;\nusing std::vector;\nusing std::string;\n\n/**\n * Reads an ibug .pts landmark file and returns an ordered vector with\n * the 68 2D landmark coordinates.\n *\n * @param[in] filename Path to a .pts file.\n * @return An ordered vector with the 68 ibug landmarks.\n */\nLandmarkCollection&lt;cv::Vec2f&gt; read_pts_landmarks(std::string filename)\n{\n    using std::getline;\n    using cv::Vec2f;\n    using std::string;\n    LandmarkCollection&lt;Vec2f&gt; landmarks;\n    landmarks.reserve(68);\n\n    std::ifstream file(filename);\n    if (!file.is_open()) {\n        throw std::runtime_error(string(\"Could not open landmark file: \" + filename));\n    }\n\n    string line;\n    // Skip the first 3 lines, they're header lines:\n    getline(file, line); // 'version: 1'\n    getline(file, line); // 'n_points : 68'\n    getline(file, line); // '{'\n\n    int ibugId = 1;\n    while (getline(file, line))\n    {\n        if (line == \"}\") { // end of the file\n            break;\n        }\n        std::stringstream lineStream(line);\n\n        Landmark&lt;Vec2f&gt; landmark;\n        landmark.name = std::to_string(ibugId);\n        if (!(lineStream &gt;&gt; landmark.coordinates[0] &gt;&gt; landmark.coordinates[1])) {\n            throw std::runtime_error(string(\"Landmark format error while parsing the line: \" + line));\n        }\n        // From the iBug website:\n        // \"Please note that the re-annotated data for this challenge are saved in the Matlab convention of 1 being\n        // the first index, i.e. the coordinates of the top left pixel in an image are x=1, y=1.\"\n        // ==&gt; So we shift every point by 1:\n        landmark.coordinates[0] -= 1.0f;\n        landmark.coordinates[1] -= 1.0f;\n        landmarks.emplace_back(landmark);\n        ++ibugId;\n    }\n    return landmarks;\n};\n\n/**\n * This app demonstrates estimation of the camera and fitting of the shape\n * model of a 3D Morphable Model from an ibug LFPW image with its landmarks.\n *\n * First, the 68 ibug landmarks are loaded from the .pts file and converted\n * to vertex indices using the LandmarkMapper. Then, an orthographic camera\n * is estimated, and then, using this camera matrix, the shape is fitted\n * to the landmarks.\n */\nint main(int argc, char *argv[])\n{\nstd::cerr&lt;&lt;\"modif 1\"&lt;&lt;endl;\n    fs::path modelfile, isomapfile, imagefile, landmarksfile, mappingsfile, outputfile;\n    try {\n        po::options_description desc(\"Allowed options\");\n        desc.add_options()\n            (\"help,h\",\n                \"display the help message\")\n            (\"model,m\", po::value&lt;fs::path&gt;(&amp;modelfile)-&gt;required()-&gt;default_value(\"/home/yalishanda/Downloads/eos-master/share/sfm_shape_3448.bin\"),\n                \"a Morphable Model stored as cereal BinaryArchive\")\n            (\"image,i\", po::value&lt;fs::path&gt;(&amp;imagefile)-&gt;required()-&gt;default_value(\"/home/yalishanda/Downloads/eos-master/examples/data/image_0010.png\"),\n                \"an input image\")\n            (\"landmarks,l\", po::value&lt;fs::path&gt;(&amp;landmarksfile)-&gt;required()-&gt;default_value(\"/home/yalishanda/Downloads/eos-master/examples/data/image_0010.pts\"),\n                \"2D landmarks for the image, in ibug .pts format\")\n            (\"mapping,p\", po::value&lt;fs::path&gt;(&amp;mappingsfile)-&gt;required()-&gt;default_value(\"/home/yalishanda/Downloads/eos-master/share/ibug_to_sfm.txt\"),\n                \"landmark identifier to model vertex number mapping\")\n            (\"output,o\", po::value&lt;fs::path&gt;(&amp;outputfile)-&gt;required()-&gt;default_value(\"out\"),\n                \"basename for the output rendering and obj files\")\n            ;\n        po::variables_map vm;\n        po::store(po::command_line_parser(argc, argv).options(desc).run(), vm);\n        if (vm.count(\"help\")) {\n            cout &lt;&lt; \"Usage: fit-model-simple [options]\" &lt;&lt; endl;\n            cout &lt;&lt; desc;\n            return EXIT_SUCCESS;\n        }\n        po::notify(vm);\n    }\n    catch (const po::error&amp; e) {\n        cout &lt;&lt; \"Error while parsing command-line arguments: \" &lt;&lt; e.what() &lt;&lt; endl;\n        cout &lt;&lt; \"Use --help to display a list of options.\" &lt;&lt; endl;\n        return EXIT_FAILURE;\n    }\n\n    // Load the image, landmarks, LandmarkMapper and the Morphable Model:\n    Mat image = cv::imread(imagefile.string());\n    LandmarkCollection&lt;cv::Vec2f&gt; landmarks;\n    try {\n        landmarks = read_pts_landmarks(landmarksfile.string());\n    }\n    catch (const std::runtime_error&amp; e) {\n        cout &lt;&lt; \"Error reading the landmarks: \" &lt;&lt; e.what() &lt;&lt; endl;\n        return EXIT_FAILURE;\n    }\n    morphablemodel::MorphableModel morphable_model;\n    try {\n        morphable_model = morphablemodel::load_model(modelfile.string());\n    }\n    catch (const std::runtime_error&amp; e) {\n        cout &lt;&lt; \"Error loading the Morphable Model: \" &lt;&lt; e.what() &lt;&lt; endl;\n        return EXIT_FAILURE;\n    }\n    core::LandmarkMapper landmark_mapper = mappingsfile.empty() ? core::LandmarkMapper() : core::LandmarkMapper(mappingsfile);\n\n    // Draw the loaded landmarks:\n    Mat outimg = image.clone();\n    for (auto&amp;&amp; lm : landmarks) {\n        cv::rectangle(outimg, cv::Point2f(lm.coordinates[0] - 2.0f, lm.coordinates[1] - 2.0f), cv::Point2f(lm.coordinates[0] + 2.0f, lm.coordinates[1] + 2.0f), { 255, 0, 0 });\n    }\n\n    // These will be the final 2D and 3D points used for the fitting:\n    vector&lt;Vec4f&gt; model_points; // the points in the 3D shape model\n    vector&lt;int&gt; vertex_indices; // their vertex indices\n    vector&lt;Vec2f&gt; image_points; // the corresponding 2D landmark points\n\n    // Sub-select all the landmarks which we have a mapping for (i.e. that are defined in the 3DMM):\n    for (int i = 0; i &lt; landmarks.size(); ++i) {\n        auto converted_name = landmark_mapper.convert(landmarks[i].name);\n        if (!converted_name) { // no mapping defined for the current landmark\n            continue;\n        }\n        int vertex_idx = std::stoi(converted_name.get());\n        auto vertex = morphable_model.get_shape_model().get_mean_at_point(vertex_idx);\n        model_points.emplace_back(Vec4f(vertex.x(), vertex.y(), vertex.z(), 1.0f));\n        vertex_indices.emplace_back(vertex_idx);\n        image_points.emplace_back(landmarks[i].coordinates);\n    }\n\n    // Estimate the camera (pose) from the 2D - 3D point correspondences\n    fitting::ScaledOrthoProjectionParameters pose = fitting::estimate_orthographic_projection_linear(image_points, model_points, true, image.rows);\n    fitting::RenderingParameters rendering_params(pose, image.cols, image.rows);\n\n    // The 3D head pose can be recovered as follows:\n    float yaw_angle = glm::degrees(glm::yaw(rendering_params.get_rotation()));\n    // and similarly for pitch and roll.\n\n    // Estimate the shape coefficients by fitting the shape to the landmarks:\n    Mat affine_from_ortho = fitting::get_3x4_affine_camera_matrix(rendering_params, image.cols, image.rows);\n    vector&lt;float&gt; fitted_coeffs = fitting::fit_shape_to_landmarks_linear(morphable_model, affine_from_ortho, image_points, vertex_indices);\n\n    // Obtain the full mesh with the estimated coefficients:\n    core::Mesh mesh = morphable_model.draw_sample(fitted_coeffs, vector&lt;float&gt;());\n\n    // Extract the texture from the image using given mesh and camera parameters:\n    Mat isomap = render::extract_texture(mesh, affine_from_ortho, image);\n\n    // Save the mesh as textured obj:\n    outputfile += fs::path(\".obj\");\n    core::write_textured_obj(mesh, outputfile.string());\n\n    // And save the isomap:\n    outputfile.replace_extension(\".isomap.png\");\n    cv::imwrite(outputfile.string(), isomap);\n\n    cout &lt;&lt; \"Finished fitting and wrote result mesh and isomap to files with basename \" &lt;&lt; outputfile.stem().stem() &lt;&lt; \".\" &lt;&lt; endl;\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n"}, {"tags": ["c++", "tensorflow", "compilation"], "comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 1, "creation_date": 1501105330, "post_id": 45336683, "comment_id": 77637813, "body": "Have you seen <a href=\"https://github.com/tensorflow/tensorflow/issues/2412\" rel=\"nofollow noreferrer\">github.com/tensorflow/tensorflow/issues/2412</a> ?"}, {"owner": {"reputation": 49, "user_id": 4946745, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6b0ca3f0ec40cdc4ae37cac28a301793?s=128&d=identicon&r=PG&f=1", "display_name": "user147813", "link": "https://stackoverflow.com/users/4946745/user147813"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1501164140, "post_id": 45336683, "comment_id": 77667428, "body": "Please see edits. Following the link, i am not sure how to incorporate libtensorflow.so into what I am trying to do."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1501193549, "post_id": 45336683, "comment_id": 77684945, "body": "32 bits ? That&#39;s not helping."}], "answers": [{"comments": [{"owner": {"reputation": 440, "user_id": 11160943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1165d73361bd3ff2b3e04a2c486f5d8?s=128&d=identicon&r=PG&f=1", "display_name": "Fisa", "link": "https://stackoverflow.com/users/11160943/fisa"}, "edited": false, "score": 0, "creation_date": 1598119976, "post_id": 47527869, "comment_id": 112356695, "body": "Why  tensorflow/tensorflow/tools/benchmark/ path? Why not any custom path?"}, {"owner": {"reputation": 530, "user_id": 2493867, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JzyXB.jpg?s=128&g=1", "display_name": "Ajay Maity", "link": "https://stackoverflow.com/users/2493867/ajay-maity"}, "edited": false, "score": 0, "creation_date": 1610370588, "post_id": 47527869, "comment_id": 116103068, "body": "Did this work for anyone?"}], "tags": [], "owner": {"reputation": 843, "user_id": 6825288, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TjgqO.jpg?s=128&g=1", "display_name": "Ganesh M S", "link": "https://stackoverflow.com/users/6825288/ganesh-m-s"}, "is_accepted": false, "score": 2, "last_activity_date": 1511860753, "creation_date": 1511860753, "answer_id": 47527869, "question_id": 45336683, "link": "https://stackoverflow.com/questions/45336683/compiling-c-code-with-tensorflow-without-bazel/47527869#47527869", "title": "Compiling C++ code with TensorFlow without Bazel", "body": "<p>Steps to follow to build a c++ code built on tensorflow framework without using any building tool like Bazel etc.</p>\n\n<ol>\n<li><p>Clone/download tensorflow from github from the below link.</p>\n\n<p>Since <code>pip install tensorflow</code> will only install tensorflow for python.</p>\n\n<p><a href=\"https://github.com/tensorflow/tensorflow/tree/master/tensorflow/contrib/makefile\" rel=\"nofollow noreferrer\">https://github.com/tensorflow/tensorflow/tree/master/tensorflow/contrib/makefile</a></p></li>\n<li><p>To run <code>your_code.cc</code> (The c++ file which you want to build, use <code>.cc</code> for c and c++, <code>.cpp</code> will not work for some reason)</p>\n\n<p>Place the .cc file and .pb file in tensorflow/tensorflow/tools/benchmark/</p>\n\n<p>Edit the following lines in Makefile in vim editor \n(tensorflow/tensorflow/contrib/makefile/Makefile)</p>\n\n<pre><code>BENCHMARK_NAME := $(BINDIR)benchmark\n</code></pre>\n\n<p>Instead of benchmark, give the name of your executable</p>\n\n<pre><code>BENCHMARK_SRCS := \\\ntensorflow/core/util/reporter.cc \\\ntensorflow/tools/benchmark/benchmark_model.cc \\\ntensorflow/tools/benchmark/benchmark_model_main.cc\n</code></pre>\n\n<p>Remove these files and add you source codes (<code>.cc</code>) here.</p></li>\n<li><p>Next Comment this line in the Makefile:</p>\n\n<pre><code>all: $(LIB_PATH) $(BENCHMARK_NAME)\n</code></pre>\n\n<p>and add the follwing line:</p>\n\n<pre><code>all: $(BENCHMARK_NAME) \n</code></pre></li>\n<li><p>Next to run the make file go to the root directory (tesnroflow/) and type the following command.</p>\n\n<pre><code>make -f tensorflow/contrib/makefile/Makefile\n</code></pre></li>\n<li><p>If you face any errors just type the following commands,</p>\n\n<pre><code>export HOST_NSYNC_LIB=`/home/nivedita_s/Downloads/tensorflow-master/tensorflow/contrib/makefile/compile_nsync.sh`\nexport TARGET_NSYNC_LIB=\"$HOST_NSYNC_LIB\"\n</code></pre></li>\n<li><p>If you have followed all the process properly then the executable will be created in this folder mentioned below,</p>\n\n<pre><code>tensorflow/tensorflow/contrib/makefile/gen/bin/\n</code></pre></li>\n<li><p>The output will be created in the name you specify for the executable.\nIf <code>./executable_file</code> gave any library issue then follow the further steps (a and b).</p>\n\n<ul>\n<li><p><code>vim ~/.profile</code> to add this line at the end,</p>\n\n<pre><code>export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/path_to_the_tensorflow/tensorflow/contrib/makefile/downloads/protobuf/src/.libs\n</code></pre></li>\n<li><p>Run this command</p>\n\n<pre><code>source ~/.profile\n</code></pre></li>\n</ul></li>\n</ol>\n\n<p>Now you should be able run your program in that terminal.</p>\n"}, {"tags": [], "owner": {"reputation": 3947, "user_id": 7443104, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/599eeedbaf5a966b46ef5b5784741b8c?s=128&d=identicon&r=PG", "display_name": "Patwie", "link": "https://stackoverflow.com/users/7443104/patwie"}, "is_accepted": false, "score": 0, "last_activity_date": 1518734244, "creation_date": 1518734244, "answer_id": 48817449, "question_id": 45336683, "link": "https://stackoverflow.com/questions/45336683/compiling-c-code-with-tensorflow-without-bazel/48817449#48817449", "title": "Compiling C++ code with TensorFlow without Bazel", "body": "<p>The most easiest way is to simply copy all necessary files to the local project:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>cd /git/github.com/tensorflow\ngit clone git@github.com:tensorflow/tensorflow.git\n# build TensorFlow once (tensorflow:libtensorflow_cc.so, tensorflow:libtensorflow.so)\ncd project\nmkdir tensorflow\ncp /git/github.com/tensorflow/tensorflow/bazel-tensorflow/tensorflow/cc tensorflow/cc\ncp /git/github.com/tensorflow/tensorflow/bazel-genfiles/tensorflow/cc tensorflow\n</code></pre>\n\n<p>Having these files in place, a very basic CMakeLists.txt does the job:</p>\n\n<pre><code>cmake_minimum_required( VERSION 2.8 )\n\nset(CMAKE_CXX_STANDARD 11)\nset(CMAKE_CXX_STANDARD_REQUIRED ON)\n\nset(TensorFlow_ABI 0)\nset(TensorFlow_INCLUDE_DIRS \"${HOME}/.local/lib/python2.7/site-packages/tensorflow/include\")\nset(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -D_GLIBCXX_USE_CXX11_ABI=${TensorFlow_ABI}\")\nset(CMAKE_EXE_LINKER_FLAGS  \"${CMAKE_EXE_LINKER_FLAGS} -D_GLIBCXX_USE_CXX11_ABI=${TensorFlow_ABI}\" )\n\n\nproject( TFMyProject )\n\ninclude_directories(SYSTEM \"${TensorFlow_INCLUDE_DIRS}/external/nsync/public\")\ninclude_directories(SYSTEM ${TensorFlow_INCLUDE_DIRS})\ninclude_directories(SYSTEM \".\")\n\nadd_executable (example example.cc)\nTARGET_LINK_LIBRARIES(example -Wl,--allow-multiple-definition -Wl,--whole-archive \"/git/github.com/tensorflow/bazel-bin/tensorflow/libtensorflow_cc.so\" -Wl,--no-whole-archive)\nTARGET_LINK_LIBRARIES(example -Wl,--allow-multiple-definition -Wl,--whole-archive \"/git/github.com/tensorflow/bazel-bin/tensorflow/libtensorflow_framework.so\" -Wl,--no-whole-archive)\n</code></pre>\n\n<p>Even these settings can be set using <a href=\"https://github.com/PatWie/tensorflow_inference\" rel=\"nofollow noreferrer\">a python script</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 357, "user_id": 602173, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pHR3U.jpg?s=128&g=1", "display_name": "kecsap", "link": "https://stackoverflow.com/users/602173/kecsap"}, "is_accepted": false, "score": 1, "last_activity_date": 1533735633, "creation_date": 1533735633, "answer_id": 51748220, "question_id": 45336683, "link": "https://stackoverflow.com/questions/45336683/compiling-c-code-with-tensorflow-without-bazel/51748220#51748220", "title": "Compiling C++ code with TensorFlow without Bazel", "body": "<p>If you don't want to tinker with your environment too much there are two possibilities. One is to compile the C++ API with Floop's <a href=\"https://github.com/FloopCZ/tensorflow_cc\" rel=\"nofollow noreferrer\">tensorflow_cc</a> project and install on your system. The other possibility is my packaging project <a href=\"https://github.com/kecsap/tensorflow_cpp_packaging\" rel=\"nofollow noreferrer\">tensorflow_cpp_packaging</a> to provide Debian packages for the C and C++ API of Tensorflow. Both projects use CMake (instead of Bazel) to support C++ compilation of your source files. Time to time, I compile the latest Tensorflow version, they are available in the <a href=\"https://github.com/kecsap/tensorflow_cpp_packaging/releases\" rel=\"nofollow noreferrer\">release</a> section for 64 bit CPU and Raspberry Pi.</p>\n\n<p>From Tensorflow point of view, the advantage of tensorflow_cc that you can build GPU support if you want while my project can only use CPU for inference.</p>\n\n<p>If you go with either project, I can still recommend <a href=\"https://github.com/kecsap/tensorflow_cpp_packaging#save-a-checkpoint-in-python-tflearn\" rel=\"nofollow noreferrer\">my short tutorial</a> what I wrote how to freeze a Tensorflow model in Python and load with either C or C++ API and use for inference.</p>\n"}], "owner": {"reputation": 49, "user_id": 4946745, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6b0ca3f0ec40cdc4ae37cac28a301793?s=128&d=identicon&r=PG&f=1", "display_name": "user147813", "link": "https://stackoverflow.com/users/4946745/user147813"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4978, "favorite_count": 1, "answer_count": 3, "score": 3, "last_activity_date": 1533735633, "creation_date": 1501100452, "last_edit_date": 1501164066, "question_id": 45336683, "link": "https://stackoverflow.com/questions/45336683/compiling-c-code-with-tensorflow-without-bazel", "title": "Compiling C++ code with TensorFlow without Bazel", "body": "<p>I am looking to adapt TensorFlow and its ANN capabilities for my computational mechanics purposes where majority of my codes are in c++. Is it possible to compile in c++ without using Bazel while including TensorFlow .h files? If so, I would really appreciate an example (haven't be able to find any online so far). \nThanks</p>\n\n<p>Edit: I did but i am not able to follow. Let me provide an example and maybe we can go from there. I am using ubuntu 16.10, gcc (Ubuntu 6.2.0-5ubuntu12) 6.2.0 20161005, and Python 2.7.12+. I have installed bazel from source and also have cloned TF repository (~/Desktop/tensorflow). Taking a slightly modified example from (<a href=\"https://www.tensorflow.org/api_guides/cc/guide\" rel=\"nofollow noreferrer\">https://www.tensorflow.org/api_guides/cc/guide</a>), i have in example.cc:</p>\n\n<pre><code>#include \"tensorflow/cc/client/client_session.h\"\n#include \"tensorflow/cc/ops/standard_ops.h\"\n#include \"tensorflow/core/framework/tensor.h\"\n#include &lt;iostream&gt;\n\nint main() {\n  using namespace tensorflow;\n  using namespace tensorflow::ops;\n  using namespace std;\n  Scope root = Scope::NewRootScope();\n  // Matrix A = [3 2; -1 0]\n  auto A = Const(root, { {3.f, 2.f}, {-1.f, 0.f}});\n  // Vector b = [3 5]\n  auto b = Const(root, { {3.f, 5.f}});\n  // v = Ab^T\n  auto v = MatMul(root.WithOpName(\"v\"), A, b, MatMul::TransposeB(true));\n  std::vector&lt;Tensor&gt; outputs;\n  ClientSession session(root);\n  // Run and fetch v\n  TF_CHECK_OK(session.Run({v}, &amp;outputs));\n  // Expect outputs[0] == [19; -3]\n  LOG(INFO) &lt;&lt; outputs[0].matrix&lt;float&gt;();\n  return 0;\n  cout&lt;&lt;\"compiled correctly!\"&lt;&lt;endl;\n}\n</code></pre>\n\n<p>It is located in ~/Desktop/tensorflow/tensorflow/cc/example. My BUILD file - also in ~/Desktop/tensorflow/tensorflow/cc/example - reads: </p>\n\n<pre><code>cc_binary(\n    name = \"example\",\n    srcs = [\"example.cc\"],\n    deps = [\n        \"//tensorflow/cc:cc_ops\",\n        \"//tensorflow/cc:client_session\",\n        \"//tensorflow/core:tensorflow\",\n    ],\n)\n</code></pre>\n\n<p>I try to compile from ~/Desktop/tensorflow using: </p>\n\n<pre><code>bazel build tensorflow/cc/example/...\n</code></pre>\n\n<p>This is what i get: </p>\n\n<pre><code>INFO: Found 1 target...\nTarget //tensorflow/cc/example:example up-to-date:\n  bazel-bin/tensorflow/cc/example/example\nINFO: Elapsed time: 0.381s, Critical Path: 0.00s\n</code></pre>\n\n<p>Then when i go to ~/Desktop/tensorflow/bazel-bin/tensorflow/cc/example and run: </p>\n\n<pre><code>./example \n</code></pre>\n\n<p>I get: </p>\n\n<pre><code>2017-07-27 09:58:39.906578: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.\n2017-07-27 09:58:39.906628: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.\n2017-07-27 09:58:39.906636: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.\n2017-07-27 09:58:39.906641: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.\n2017-07-27 09:58:39.906646: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.\n2017-07-27 09:58:39.907751: I tensorflow/cc/example/example.cc:22] 19\n-3\n</code></pre>\n\n<p>Any help would be much appreciate it as i'm trying to wrap my hands around this. Thanks for you patience. </p>\n"}, {"tags": ["c++", "c++11", "templates"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1501100124, "post_id": 45336527, "comment_id": 77635169, "body": "This is how virtual inheritance works.  Did you mean to actually use <code>virtual</code> in <code>class DerivedOne : public virtual Base&lt;std::string&gt;</code> and <code>class DerivedTwo : public virtual DerivedOne</code>?   Do note that it is not needed to use virtual functions."}, {"owner": {"reputation": 1280, "user_id": 793519, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/3RBS2.jpg?s=128&g=1", "display_name": "vincent", "link": "https://stackoverflow.com/users/793519/vincent"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1501100256, "post_id": 45336527, "comment_id": 77635242, "body": "In the real word application, there is a need for virtual functions. I still don&#39;t see why it is necessary, maybe I need to brush up on virtual inheritance."}, {"owner": {"reputation": 2976, "user_id": 489566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49bbc0142f1b631b3b9bd96f50c0ffcd?s=128&d=identicon&r=PG", "display_name": "cababunga", "link": "https://stackoverflow.com/users/489566/cababunga"}, "edited": false, "score": 0, "creation_date": 1501100461, "post_id": 45336527, "comment_id": 77635349, "body": "Virtual inheritance is only needed when you inherit common ancestor more than once through multiple inheritance."}, {"owner": {"reputation": 1280, "user_id": 793519, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/3RBS2.jpg?s=128&g=1", "display_name": "vincent", "link": "https://stackoverflow.com/users/793519/vincent"}, "edited": false, "score": 0, "creation_date": 1501100506, "post_id": 45336527, "comment_id": 77635380, "body": "I can understand that DerivedTwo calls the Base class&#39;s constructor directly, but why isn&#39;t the constructor argument deduced?"}], "answers": [{"comments": [{"owner": {"reputation": 1280, "user_id": 793519, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/3RBS2.jpg?s=128&g=1", "display_name": "vincent", "link": "https://stackoverflow.com/users/793519/vincent"}, "edited": false, "score": 0, "creation_date": 1501100902, "post_id": 45336697, "comment_id": 77635613, "body": "Thanks for this, I was starting to get pretty frustrated. This clears up an glaring misunderstanding my use of virtual inheritance!"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 1280, "user_id": 793519, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/3RBS2.jpg?s=128&g=1", "display_name": "vincent", "link": "https://stackoverflow.com/users/793519/vincent"}, "edited": false, "score": 1, "creation_date": 1501101898, "post_id": 45336697, "comment_id": 77636162, "body": "@vincent, yes, the use of the same keyword here is rather unfortunate."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 3, "last_activity_date": 1501100509, "last_edit_date": 1592644375, "creation_date": 1501100509, "answer_id": 45336697, "question_id": 45336527, "link": "https://stackoverflow.com/questions/45336527/template-hierarchy-constructor-arguments/45336697#45336697", "title": "Template hierarchy constructor arguments", "body": "<h1>What is going on</h1>\n<p>When you inherit virtually, you are asking that the type you inherit from is a &quot;singleton&quot; within the object heiarchy (not a program-wide singleton, but a instance-wide singleton, strange as that may seem).</p>\n<p>As a side effect, the <em>actual most derived class</em> is responsible for constructing the virtual base class, regardless of what intermediate classes exist.</p>\n<p>Virtual inheritance is intended when you need to inherit from some class more than once, yet ensure that only one instance exists.  Rather than work out some complex set of rules to determine whose constructor call would be the one to be called, the designers of C++ mandated that the most-derived class (the actual one being created) dictates exactly what constructor is called.</p>\n<p>Everyone else can chime in, but only if an actual instance of <em>that</em> specific class (and not a more-derived one) is created does their opinion matter.</p>\n<h1>You probably don't want <code>virtual</code> there</h1>\n<p><code>virtual</code> inheritance has almost nothing to do with <code>virtual</code> methods/member functions.  Don't use it unless you need to for binary layout or diamond inheritance reasons.</p>\n<p>Simply eliminate it from your code, and if you never inherit from a class along 2 different paths to the same most-derived class, you won't miss it.</p>\n<pre><code>class DerivedOne : public Base&lt;std::string&gt;\n</code></pre>\n<p>and</p>\n<pre><code>class DerivedTwo : public DerivedOne\n</code></pre>\n<p>and your code compiles and does what you seem to want.</p>\n"}, {"tags": [], "owner": {"reputation": 3923, "user_id": 8309701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S44bo.png?s=128&g=1", "display_name": "Chris Uzdavinis", "link": "https://stackoverflow.com/users/8309701/chris-uzdavinis"}, "is_accepted": false, "score": 1, "last_activity_date": 1501100555, "creation_date": 1501100555, "answer_id": 45336708, "question_id": 45336527, "link": "https://stackoverflow.com/questions/45336527/template-hierarchy-constructor-arguments/45336708#45336708", "title": "Template hierarchy constructor arguments", "body": "<p>When you use <em>virtual inheritance</em> it is always the MOST DERIVED class that initializes the virtual base.  Even though your intermediate class passes a value up, it won't do that in further derived classes, which must directly initialize Base.  </p>\n\n<p>Since your most derived class (DerivedTwo) doesn't directly initialize Base, then Base is initialized without any parameters passed to it, and so requires a default constructor.</p>\n\n<pre><code>class DerivedTwo : public virtual DerivedOne\n{\npublic:\n    DerivedTwo(const std::string&amp; path) : Base(path), DerivedOne(path) {}\n}\n</code></pre>\n\n<p>Alternately, stop using virtual inheritance, and just use \"normal\" inheritance. That is, change this:</p>\n\n<pre><code>class DerivedOne : public virtual Base&lt;std::string&gt;\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>class DerivedOne : public Base&lt;std::string&gt;\n</code></pre>\n\n<p>Unless, of course, you really need virtual inheritance.  :)</p>\n"}], "owner": {"reputation": 1280, "user_id": 793519, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/3RBS2.jpg?s=128&g=1", "display_name": "vincent", "link": "https://stackoverflow.com/users/793519/vincent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 0, "accepted_answer_id": 45336697, "answer_count": 2, "score": 0, "last_activity_date": 1501100555, "creation_date": 1501099937, "question_id": 45336527, "link": "https://stackoverflow.com/questions/45336527/template-hierarchy-constructor-arguments", "title": "Template hierarchy constructor arguments", "body": "<p>I'm having trouble understanding why my template hierarchy won't pass constructor arguments deeper than one layer. </p>\n\n<p>So far I've read that it may have something to do with namespacing or template constructors being unnamed. My various attempts at getting the constructor arguments through to the base class with scoping directives have failed.</p>\n\n<pre><code>// test.cc\n#include &lt;string&gt;\n\n// Base class, obviously.\ntemplate &lt;typename T&gt;\nclass Base {\npublic:\n    Base(const T&amp; t) : _t(t) {}\n    virtual ~Base() { }\n\n    virtual T getVal() const { return _t; }\n\nprivate:\n    T _t;\n};\n\n// First derivation. This works, although it is explicit.\nclass DerivedOne : public virtual Base&lt;std::string&gt;\n{\npublic:\n    DerivedOne(const std::string&amp; path) : Base&lt;std::string&gt;(path) {}\n    virtual ~DerivedOne() {}\n};\n\n// Second derivation. Constructor fails to compile unless I explicitly\n// pass the 'path' argument to Base in the initializer list or create a\n// default constructor for Base (which, of course, leaves Base::_t\n// uninitialized).\nclass DerivedTwo : public virtual DerivedOne\n{\npublic:\n    DerivedTwo(const std::string&amp; path) : DerivedOne(path) {}\n    // This works\n    // DerivedTwo(const std::string&amp; path) : DerivedOne(path), Base(path) {} \n    virtual ~DerivedTwo() {}\n};\n\nint main()\n{\n    return 0;\n}\n</code></pre>\n\n<p>The compiler complains:</p>\n\n<pre><code>test.cc: In constructor \u2018DerivedTwo::DerivedTwo(const string&amp;)\u2019:\ntest.cc:31:58: error: no matching function for call to \u2018Base&lt;std::__cxx11::basic_string&lt;char&gt; &gt;::Base()\u2019\n     DerivedTwo(const std::string&amp; path) : DerivedOne(path) {}\n                                                          ^\ntest.cc:7:5: note: candidate: Base&lt;T&gt;::Base(const T&amp;) [with T = std::__cxx11::basic_string&lt;char&gt;]\n     Base(const T&amp; t) : _t(t) {}\n     ^\ntest.cc:7:5: note:   candidate expects 1 argument, 0 provided\ntest.cc:5:7: note: candidate: Base&lt;std::__cxx11::basic_string&lt;char&gt; &gt;::Base(const Base&lt;std::__cxx11::basic_string&lt;char&gt; &gt;&amp;)\n class Base {\n       ^\ntest.cc:5:7: note:   candidate expects 1 argument, 0 provided\n</code></pre>\n\n<p>Why do I need to declare a default constructor when it seems that the parameterized constructor should be called? Why must I explicitly pass DerivedTwo's parameter to Base, since I've passed it to DerivedOne (who should pass it to Base)?</p>\n\n<p>Is there some way to avoid this duplication? Does this mean I can't use initializer lists when a base template constructor parameter is allocated on the heap in a derived class initializer list?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 6, "creation_date": 1501099565, "post_id": 45336417, "comment_id": 77634875, "body": "Show the code that the compiler is complaining about along with the exact message it gives you about it."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "edited": false, "score": 0, "creation_date": 1501099715, "post_id": 45336417, "comment_id": 77634948, "body": "<code>Object</code> is indeed undeclared. All you have is <code>object</code>."}, {"owner": {"reputation": 1334, "user_id": 1328780, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c0241ebc4503b57de65aa5d289f1d588?s=128&d=identicon&r=PG", "display_name": "bjhend", "link": "https://stackoverflow.com/users/1328780/bjhend"}, "edited": false, "score": 1, "creation_date": 1501099917, "post_id": 45336417, "comment_id": 77635054, "body": "You have declared two of your classes as <code>Class</code> with a capital C. C++ is case sensitive, so this is different from <code>class</code> in <code>1.h</code>. You may also have noted that it is colored differently in the examples above."}, {"owner": {"reputation": 11, "user_id": 8326082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e4797146bbf0b11d4ccc67f68048d94?s=128&d=identicon&r=PG&f=1", "display_name": "ReddestHorse", "link": "https://stackoverflow.com/users/8326082/reddesthorse"}, "edited": false, "score": 0, "creation_date": 1501100122, "post_id": 45336417, "comment_id": 77635168, "body": "@Arkadiy Sorry, that was a typo on my question, not the code itself. I edited it as NathanOliver requested and fixed that issue."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "edited": false, "score": 2, "creation_date": 1501100329, "post_id": 45336417, "comment_id": 77635276, "body": "Did you mean to make <code>Two</code> the base class of <code>Three</code>? As it stands, <code>Three</code> has no member named <code>object</code>, only <code>Two</code> has such member."}, {"owner": {"reputation": 11, "user_id": 8326082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e4797146bbf0b11d4ccc67f68048d94?s=128&d=identicon&r=PG&f=1", "display_name": "ReddestHorse", "link": "https://stackoverflow.com/users/8326082/reddesthorse"}, "edited": false, "score": 0, "creation_date": 1501100601, "post_id": 45336417, "comment_id": 77635451, "body": "Is <code>object</code> not usable by <code>Three</code> then? I don&#39;t want it to be the base class, but I absolutely want access to it."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1501101205, "post_id": 45336417, "comment_id": 77635771, "body": "<b><i>Is object not usable by Three then?</i></b> If there is no relationship between Two and Three how would Three know which instance of Two to access object?"}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1501100338, "creation_date": 1501100338, "answer_id": 45336648, "question_id": 45336417, "link": "https://stackoverflow.com/questions/45336417/accessing-class-object/45336648#45336648", "title": "Accessing class object", "body": "<p><code>OnPressed()</code> is a member of <code>Three</code>, but <code>Three</code> does not derive from <code>Two</code>, so <code>Three</code> does not have any <code>object</code> member that <code>OnPressed()</code> can access.  That is what the compiler is complaining about.</p>\n\n<p>You would need to either:</p>\n\n<ol>\n<li><p>make <code>Three</code> derive from <code>Two</code></p>\n\n<pre><code>class Three : public Two\n</code></pre></li>\n<li><p>give <code>Three</code> a member that is an instance of <code>One</code> (just like you did with <code>Two</code>):</p>\n\n<pre><code>class Three\n{\npublic:\n    One object;\n    void OnPressed();\n    ...\n};\n\nvoid Three::OnPressed()\n{\n    object.pressed = true;\n}\n</code></pre>\n\n<p>Or give it an instance of <code>Two</code>:</p>\n\n<pre><code>class Three\n{\npublic:\n    Two object2;\n    void OnPressed();\n    ...\n};\n\nvoid Three::OnPressed()\n{\n    object2.object.pressed = true;\n}\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 11, "user_id": 8326082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e4797146bbf0b11d4ccc67f68048d94?s=128&d=identicon&r=PG&f=1", "display_name": "ReddestHorse", "link": "https://stackoverflow.com/users/8326082/reddesthorse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1501100338, "creation_date": 1501099511, "last_edit_date": 1501099898, "question_id": 45336417, "link": "https://stackoverflow.com/questions/45336417/accessing-class-object", "title": "Accessing class object", "body": "<p>I have three .h and three .cpp files along with them.</p>\n\n<p>I have made an object of a class in the first .h (say 1.h) in a class that is in 2.h. I want to use that class object in my 3.cpp.</p>\n\n<p>1.h</p>\n\n<pre><code>class One\n{ \n   bool pressed;\n   ...\n}\n</code></pre>\n\n<p>2.h</p>\n\n<pre><code>#include \"1.h\"\nClass Two\n{\npublic:\n    One object;\n    ...\n}\n</code></pre>\n\n<p>3.h</p>\n\n<pre><code>#include \"2.h\"\nClass Three\n{ ...\n}\n</code></pre>\n\n<p>3.cpp</p>\n\n<pre><code>#include \"3.h\"\n\nvoid Three::OnPressed()\n{\n   object.pressed = true;\n}\n</code></pre>\n\n<p>It allows me to make the object without complaints, however, my program gives this error when run:</p>\n\n<p>error C2065 'object': undeclared identifier</p>\n\n<p>I don't think this is a hard question, but I had trouble trying to explain my problem through a search bar. If you could help me out I'd appreciate it.</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 576, "user_id": 5337612, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-52U8ppyS8iA/AAAAAAAAAAI/AAAAAAAAAhQ/L87ieoMPSTQ/photo.jpg?sz=128", "display_name": "Vahagn Avagyan", "link": "https://stackoverflow.com/users/5337612/vahagn-avagyan"}, "edited": false, "score": 0, "creation_date": 1501101727, "post_id": 45336371, "comment_id": 77636061, "body": "<a href=\"http://techqa.info/programming/question/15050462/qprocess-call-write-function-failure\" rel=\"nofollow noreferrer\">QProcess call write function failure</a>"}], "answers": [{"comments": [{"owner": {"reputation": 76, "user_id": 6589305, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/IVVEs.jpg?s=128&g=1", "display_name": "granitdev", "link": "https://stackoverflow.com/users/6589305/granitdev"}, "edited": false, "score": 0, "creation_date": 1501869271, "post_id": 45339223, "comment_id": 77986849, "body": "Ok, but if I&#39;m closing the write channel, then how do I open it again. I&#39;m not trying to send just one set of commands, I&#39;m trying to essentially make a terminal with commands and responses going back and forth, but all Qt appears to be geared for is one and done read or writes."}, {"owner": {"reputation": 8788, "user_id": 6866309, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CFXxE.jpg?s=128&g=1", "display_name": "Pavan Chandaka", "link": "https://stackoverflow.com/users/6866309/pavan-chandaka"}, "reply_to_user": {"reputation": 76, "user_id": 6589305, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/IVVEs.jpg?s=128&g=1", "display_name": "granitdev", "link": "https://stackoverflow.com/users/6589305/granitdev"}, "edited": false, "score": 0, "creation_date": 1501870136, "post_id": 45339223, "comment_id": 77987278, "body": "Call &quot;start&quot; again. The &quot;start&quot; call implicitly opens the write channel."}], "tags": [], "owner": {"reputation": 8788, "user_id": 6866309, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CFXxE.jpg?s=128&g=1", "display_name": "Pavan Chandaka", "link": "https://stackoverflow.com/users/6866309/pavan-chandaka"}, "is_accepted": false, "score": 1, "last_activity_date": 1501113404, "creation_date": 1501113404, "answer_id": 45339223, "question_id": 45336371, "link": "https://stackoverflow.com/questions/45336371/qt-qprocess-how-to-write-to-standard-in/45339223#45339223", "title": "Qt QProcess how to write to standard in?", "body": "<p>You have to use <code>write</code> function only to write in to the standard in.</p>\n\n<p>But the important thing is you have to close the write channel using <code>void QProcess::closeWriteChannel()</code>. </p>\n\n<p>Look into below documentation.</p>\n\n<p><a href=\"http://doc.qt.io/qt-5/qprocess.html#closeWriteChannel\" rel=\"nofollow noreferrer\">http://doc.qt.io/qt-5/qprocess.html#closeWriteChannel</a></p>\n"}, {"tags": [], "owner": {"reputation": 55, "user_id": 2187441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bc09791cbf96dca8dd7c8d82de8384f?s=128&d=identicon&r=PG", "display_name": "konakid", "link": "https://stackoverflow.com/users/2187441/konakid"}, "is_accepted": false, "score": 0, "last_activity_date": 1501818284, "creation_date": 1501818284, "answer_id": 45497928, "question_id": 45336371, "link": "https://stackoverflow.com/questions/45336371/qt-qprocess-how-to-write-to-standard-in/45497928#45497928", "title": "Qt QProcess how to write to standard in?", "body": "<p>You should wait for operations to finish before moving on to the next action.</p>\n\n<pre><code>QProcess mProcess = new QProcess(this);\nmProcess-&gt;setReadChannelMode(QProcess::SeparateChannels);\n\n//Start the process\nmProcess-&gt;start(\"cmd\");\nQApplication::processEvents();\nmProcess-&gt;waitForStarted();\n\n// Read the output\nmProcess-&gt;waitForReadyRead();\nQString output(mProcess-&gt;readAllStandardOutput());\nmProcess-&gt;closeReadChannel();\n\n// Write the data\nmProcess-&gt;write(output);\nmProcess-&gt;waitForBytesWritten();\nmProcess-&gt;closeWriteChannel();\n\n// Wait for finished\nmProcess-&gt;waitForFinished();\n</code></pre>\n\n<p>It seems strange to send the output directly back into the program being executed. Alternatively you could connect the <code>void QIODevice::readyRead()</code> signal to a slot where the output can be handled elsewhere.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 13705623, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/0cb50ae386845f41cf1e8512c27396eb?s=128&d=identicon&r=PG", "display_name": "Lee", "link": "https://stackoverflow.com/users/13705623/lee"}, "is_accepted": false, "score": 0, "last_activity_date": 1591611875, "creation_date": 1591611875, "answer_id": 62259932, "question_id": 45336371, "link": "https://stackoverflow.com/questions/45336371/qt-qprocess-how-to-write-to-standard-in/62259932#62259932", "title": "Qt QProcess how to write to standard in?", "body": "<p>The mistake I was making here was not putting \\n on the end of the multiple commands.</p>\n\n<pre><code>''''\n        // 1st command\n        mProcess-&gt;write(output1 + \"\\n\");\n        mProcess-&gt;waitForBytesWritten();\n\n\n        // 2nd command\n        mProcess-&gt;write(output1 + \"\\n\");\n        mProcess-&gt;waitForBytesWritten();\n\n       // Wait for finished\n       mProcess-&gt;waitForFinished();\n\n\n       mProcess-&gt;closeWriteChannel();\n''''\n</code></pre>\n"}], "owner": {"reputation": 76, "user_id": 6589305, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/IVVEs.jpg?s=128&g=1", "display_name": "granitdev", "link": "https://stackoverflow.com/users/6589305/granitdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3350, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1591611875, "creation_date": 1501099320, "question_id": 45336371, "link": "https://stackoverflow.com/questions/45336371/qt-qprocess-how-to-write-to-standard-in", "title": "Qt QProcess how to write to standard in?", "body": "<p>I am starting a QProcess to open cmd.exe.</p>\n\n<p>I want to write to std in to send commands to cmd.exe, and I want to recieve it's output.</p>\n\n<pre><code>QProcess mProcess = new QProcess(this);\nmProcess-&gt;setReadChannelMode(QProcess::SeparateChannels);\nmProcess-&gt;start(\"cmd\");\n\nQApplication::processEvents();\nQString s(mProcess-&gt;readAllStandardOutput());\nwriteToConsole(s);\n</code></pre>\n\n<p>This all works just fine. The process starts, I get output. However, I can't now write to the process anymore. I have looked over QProcess documentation and I don't see any way to write to standard in. I've tried mProcess->write(data); but that didn't do anything.</p>\n\n<p>How do I write to standard in to the running process?</p>\n"}, {"tags": ["c++", "arrays", "class"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1501099006, "post_id": 45336246, "comment_id": 77634559, "body": "Debugger.  Use a Debugger.  A Debugger will allow you to execute each statement separately and <i>watch</i> values in variables.  Please edit your post with the outcome of your debugging session."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1501099178, "post_id": 45336246, "comment_id": 77634643, "body": "Why the <code>pass-by-reference</code> tag?  You are not passing by reference.  You are calling your function with a pointer to the <code>questNum</code> slot in the array."}, {"owner": {"reputation": 43, "user_id": 6542739, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10154254230535883/picture?type=large", "display_name": "Megan McCracken", "link": "https://stackoverflow.com/users/6542739/megan-mccracken"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1501099765, "post_id": 45336246, "comment_id": 77634975, "body": "I honestly just don&#39;t know what my issue is, so I was thinking maybe it was a pass by reference problem. I have added the debugger text if it helps. Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 5879, "user_id": 8150685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WV7OV.jpg?s=128&g=1", "display_name": "Error - Syntactical Remorse", "link": "https://stackoverflow.com/users/8150685/error-syntactical-remorse"}, "edited": false, "score": 0, "creation_date": 1501100362, "post_id": 45336566, "comment_id": 77635295, "body": "If you want more clarification on good practices for reading in files I can add the examples to this answer but I would more or less just be rewording the answers from <a href=\"http://www.cplusplus.com/doc/tutorial/files/\" rel=\"nofollow noreferrer\">cplusplus.com/doc/tutorial/files</a> with more clarification."}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1501101164, "post_id": 45336566, "comment_id": 77635754, "body": "Rather than using a naked array an appropriate container like <code>std::vector</code> or <code>std::array</code> should be preferred."}, {"owner": {"reputation": 5879, "user_id": 8150685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WV7OV.jpg?s=128&g=1", "display_name": "Error - Syntactical Remorse", "link": "https://stackoverflow.com/users/8150685/error-syntactical-remorse"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1501102199, "post_id": 45336566, "comment_id": 77636300, "body": "@CaptainObvlious &quot;assignments for my class&quot; though I agree an std container is better, (memory, efficiency, etc) most classes try to teach students how to use an array.  A lot of fundamentals are based on the array and if a student just uses a std library they won&#39;t understand any underlying principles.  As a beginner you should not always take the easy route, you should take the route where you learn the most.  People should really stop suggesting std containers to students."}], "tags": [], "owner": {"reputation": 5879, "user_id": 8150685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WV7OV.jpg?s=128&g=1", "display_name": "Error - Syntactical Remorse", "link": "https://stackoverflow.com/users/8150685/error-syntactical-remorse"}, "is_accepted": false, "score": 0, "last_activity_date": 1501100062, "creation_date": 1501100062, "answer_id": 45336566, "question_id": 45336246, "link": "https://stackoverflow.com/questions/45336246/how-do-i-initialize-and-pass-an-text-from-a-file-to-a-class-array-for-output-in/45336566#45336566", "title": "How do I initialize and pass an text from a file to a class array for output in c++?", "body": "<p>There are some issues with how you call the function from your main.</p>\n\n<p>First off when you pass an array you have to just pass the array and its size, secondly an array is passed by reference in c++ so you don't want the <code>&amp;</code> so:</p>\n\n<p>Main:</p>\n\n<pre><code>initQuestions(quiz , questNum);\n</code></pre>\n\n<p>You method declaration would also have to change:</p>\n\n<pre><code>void initQuestions(Question q[], int size)\n</code></pre>\n\n<p>For help with passing an array see:\n<a href=\"https://www.tutorialspoint.com/cplusplus/cpp_passing_arrays_to_functions.htm\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/cplusplus/cpp_passing_arrays_to_functions.htm</a></p>\n\n<p>Also when reading in a file your should read line by line and check if the line is still good in the while loop.  You are checking if the file itself is good.</p>\n\n<p>There are a lot of questionable things you are doing to read in the file so I highly recommend checking out this resource for examples:\n<a href=\"http://www.cplusplus.com/doc/tutorial/files/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/doc/tutorial/files/</a></p>\n"}], "owner": {"reputation": 43, "user_id": 6542739, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10154254230535883/picture?type=large", "display_name": "Megan McCracken", "link": "https://stackoverflow.com/users/6542739/megan-mccracken"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1501100062, "creation_date": 1501098802, "last_edit_date": 1501099682, "question_id": 45336246, "link": "https://stackoverflow.com/questions/45336246/how-do-i-initialize-and-pass-an-text-from-a-file-to-a-class-array-for-output-in", "title": "How do I initialize and pass an text from a file to a class array for output in c++?", "body": "<p>One of the assignments for my class is to read in a text file with questions, answers and the correct number. I am not sure while my file is not reading correctly, but for some reason I am not getting the information to pass to my class file from the initializing function.</p>\n\n<pre><code>void initQuestions(Question q[])\n{\n    ifstream infile; // Input file to read questions into array     \n    infile.open(\"questions.txt\");\n\n    int pos; // loop counter\n    string quest; // variable holding question text\n    string posAns[numAns]; // variable array holding the possible answers\n    int corrAns; // variable holding the correct answer\n\n    // Error message if file unable to open\n    if (!infile.good())\n    {\n        cout &lt;&lt; \"Error: Unable to open file!\" &lt;&lt; endl;\n    }\n\n    while (infile)\n    {\n        // Load variables and array from the file using while loop\n        getline(infile, quest);\n        for (int i = 0; i &lt; numAns; i++)\n            getline(infile, posAns[i]);\n        infile &gt;&gt; corrAns;\n\n        for (pos = 0; pos &lt; questNum ; pos++)\n        {\n            q[pos].setQuestionText(quest);\n            q[pos].setPossAnswer1(&amp;posAns[0]);\n            q[pos].setPossAnswer2(&amp;posAns[1]);\n            q[pos].setPossAnswer3(&amp;posAns[2]);\n            q[pos].setPossAnswer4(&amp;posAns[3]);\n            q[pos].setPossAnswer5(&amp;posAns[4]);\n            q[pos].setCorrect(corrAns);\n\n            getline(infile, quest);\n            for (int i = 0; i &lt; numAns; i++)\n                getline(infile, posAns[i]);\n            infile &gt;&gt; corrAns;\n        }\n    }\n}\n</code></pre>\n\n<p>This is my function. The call I am using in main is: </p>\n\n<pre><code>initQuestions(&amp;quiz[questNum]);\n</code></pre>\n\n<p>Any help would be much appreciated. Thanks.</p>\n\n<p>Debugger Output:</p>\n\n<pre><code>0x00007ffff7b8d44b in std::basic_string&lt;char, std::char_traits&lt;char&gt;,   \nstd::allocator&lt;char&gt; &gt;::basic_string(std::strin\ng const&amp;) ()                                                                                                         \nfrom /usr/lib/x86_64-linux-gnu/libstdc++.so.6                                                                     \n\n(gdb) continue                                                                                                       \n\nContinuing.                                                                                                          \n\n\nProgram terminated with signal SIGSEGV, Segmentation fault.                                                          \n\nThe program no longer exists.                                                                                        \n\n(gdb)     \n</code></pre>\n"}, {"tags": ["c++", "syntax", "symengine"], "answers": [{"comments": [{"owner": {"reputation": 1094, "user_id": 8079870, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7dc056e960b9041ced90747c00e76088?s=128&d=identicon&r=PG&f=1", "display_name": "Grayscale", "link": "https://stackoverflow.com/users/8079870/grayscale"}, "edited": false, "score": 1, "creation_date": 1501099335, "post_id": 45336248, "comment_id": 77634735, "body": "Thanks for the quick answer to my somewhat non-minimal question. How come the inner curly braces are outside of <code>symbol</code> though? The usage I am familiar with for your second bullet is something like <code>symbol s{&quot;x&quot;};</code>."}, {"owner": {"reputation": 4933, "user_id": 8217180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9621a549160f738b81303a4a008ddd50?s=128&d=identicon&r=PG&f=1", "display_name": "Tobias Ribizel", "link": "https://stackoverflow.com/users/8217180/tobias-ribizel"}, "reply_to_user": {"reputation": 1094, "user_id": 8079870, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7dc056e960b9041ced90747c00e76088?s=128&d=identicon&r=PG&f=1", "display_name": "Grayscale", "link": "https://stackoverflow.com/users/8079870/grayscale"}, "edited": false, "score": 0, "creation_date": 1501099420, "post_id": 45336248, "comment_id": 77634788, "body": "Ah, I skimmed over your code too quickly. The answer is actually more complex, I&#39;ll edit it right away."}, {"owner": {"reputation": 1094, "user_id": 8079870, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7dc056e960b9041ced90747c00e76088?s=128&d=identicon&r=PG&f=1", "display_name": "Grayscale", "link": "https://stackoverflow.com/users/8079870/grayscale"}, "edited": false, "score": 0, "creation_date": 1501100422, "post_id": 45336248, "comment_id": 77635333, "body": "Sorry, I&#39;m not sure I understand the third bullet in the second half of your answer. Is the syntax that accomplishes that third bullet <code>{symbol_object}</code>? And, given a symbol was just constructed, why construct the same symbol again?"}, {"owner": {"reputation": 1094, "user_id": 8079870, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7dc056e960b9041ced90747c00e76088?s=128&d=identicon&r=PG&f=1", "display_name": "Grayscale", "link": "https://stackoverflow.com/users/8079870/grayscale"}, "edited": false, "score": 0, "creation_date": 1501100541, "post_id": 45336248, "comment_id": 77635406, "body": "Ah your edit to the earlier bullet clarifies the first question."}, {"owner": {"reputation": 4933, "user_id": 8217180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9621a549160f738b81303a4a008ddd50?s=128&d=identicon&r=PG&f=1", "display_name": "Tobias Ribizel", "link": "https://stackoverflow.com/users/8217180/tobias-ribizel"}, "reply_to_user": {"reputation": 1094, "user_id": 8079870, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7dc056e960b9041ced90747c00e76088?s=128&d=identicon&r=PG&f=1", "display_name": "Grayscale", "link": "https://stackoverflow.com/users/8079870/grayscale"}, "edited": false, "score": 0, "creation_date": 1501100559, "post_id": 45336248, "comment_id": 77635426, "body": "This seems to be redundant, but I haven&#39;t tried if it works without the inner braces (OR without piranha::symbol(...))"}], "tags": [], "owner": {"reputation": 4933, "user_id": 8217180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9621a549160f738b81303a4a008ddd50?s=128&d=identicon&r=PG&f=1", "display_name": "Tobias Ribizel", "link": "https://stackoverflow.com/users/8217180/tobias-ribizel"}, "is_accepted": true, "score": 5, "last_activity_date": 1501100499, "last_edit_date": 1501100499, "creation_date": 1501098826, "answer_id": 45336248, "question_id": 45336126, "link": "https://stackoverflow.com/questions/45336126/double-curly-braces-in-c-constructor/45336248#45336248", "title": "Double curly braces in C++ constructor", "body": "<p>Curly braces can be used to describe</p>\n\n<ul>\n<li>an initializer list, which explains the outer braces (creating an <code>std::initializer_list</code> of symbols, see <a href=\"https://github.com/bluescarni/piranha/blob/843bfc1147b6c47258bdd5b9ffb966a597a960f3/include/piranha/symbol_set.hpp#L266\" rel=\"noreferrer\">the corresponding constructor</a>) </li>\n<li>a shorthand notation to a constructor call, which explains the inner\nbraces (creating an instance of <code>symbol</code> using the move constructor, see <a href=\"https://github.com/bluescarni/piranha/blob/843bfc1147b6c47258bdd5b9ffb966a597a960f3/include/piranha/symbol.hpp#L97\" rel=\"noreferrer\">the corresponding constructor</a>)<br>\nIf the type of a parameter is known beforehand, instead of <code>symbol{parameters}</code> you can just write <code>{parameters}</code>. This also works for return values and variable initialization.</li>\n</ul>\n\n<p>So what actually happens in this line is:</p>\n\n<ul>\n<li>a <code>std::string</code> is returned from <code>detail::poly_print(var)</code></li>\n<li>This string is used to construct a <code>piranha::symbol</code></li>\n<li>This temporary value is then passed to the move constructor (I'm guessing here) of <code>symbol</code>, constructing another <code>symbol</code><br>\n<em>This seems a bit redundant, but I haven't tried if the code works with only one pair of braces</em></li>\n<li>This <code>piranha::symbol</code> is then stored in a <code>std::initializer_list</code></li>\n<li>which is then passed to the constructor of <code>piranha::symbol_set</code></li>\n</ul>\n"}], "owner": {"reputation": 1094, "user_id": 8079870, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7dc056e960b9041ced90747c00e76088?s=128&d=identicon&r=PG&f=1", "display_name": "Grayscale", "link": "https://stackoverflow.com/users/8079870/grayscale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1323, "favorite_count": 0, "accepted_answer_id": 45336248, "answer_count": 1, "score": 6, "last_activity_date": 1501100499, "creation_date": 1501098305, "last_edit_date": 1501099554, "question_id": 45336126, "link": "https://stackoverflow.com/questions/45336126/double-curly-braces-in-c-constructor", "title": "Double curly braces in C++ constructor", "body": "<p>What do the double curly braces in the following line of C++ code mean?</p>\n\n<pre><code>piranha::symbol_set ss({{piranha::symbol(detail::poly_print(var))}});\n</code></pre>\n\n<p>For context, this is from a file in the SymEngine code (<code>\"symengine/polys/uintpoly_piranha.h\"</code>), which can be found at the link below, as can the Piranha library which is used in the above line.</p>\n\n<ul>\n<li>SymEngine source code: <a href=\"https://github.com/symengine/symengine\" rel=\"noreferrer\">https://github.com/symengine/symengine</a></li>\n<li>Piranha source code: <a href=\"https://github.com/bluescarni/piranha\" rel=\"noreferrer\">https://github.com/bluescarni/piranha</a></li>\n</ul>\n\n<p>I know single curly braces are used as  initializer lists, but the meaning of the double curly braces within the set of parentheses makes little sense to me.</p>\n\n<p>The main thing I found on double curly braces was <a href=\"https://stackoverflow.com/questions/6251160/what-is-the-meaning-of-double-curly-braces-initializing-a-c-struct\">this post</a>, but it does not seem applicable here.</p>\n\n<p>Also, I apologize for linking source code like this but I am unsure of how to make a smaller example given my lack of understanding.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "string", "user-input"], "comments": [{"owner": {"reputation": 11476, "user_id": 2790047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c5a7631a67903295da25dabb94e1f51b?s=128&d=identicon&r=PG", "display_name": "jodag", "link": "https://stackoverflow.com/users/2790047/jodag"}, "edited": false, "score": 0, "creation_date": 1501098836, "post_id": 45336062, "comment_id": 77634463, "body": "One solution would be to add the line <code>while (cin.peek() == &#39;\\n&#39;) cin.get();</code> before the call to <code>getline()</code>. This clears the newline character out of the input stream."}], "answers": [{"comments": [{"owner": {"reputation": 175, "user_id": 5486232, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e2aa106404cb189fcc4589b373a00474?s=128&d=identicon&r=PG&f=1", "display_name": "daddyodevil", "link": "https://stackoverflow.com/users/5486232/daddyodevil"}, "edited": false, "score": 0, "creation_date": 1501098866, "post_id": 45336223, "comment_id": 77634480, "body": "Not very clear on what u meant, so what should I do ??"}], "tags": [], "owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "is_accepted": true, "score": 2, "last_activity_date": 1501098738, "creation_date": 1501098738, "answer_id": 45336223, "question_id": 45336062, "link": "https://stackoverflow.com/questions/45336062/why-instead-of-taking-an-input-my-program-is-printing-a-new-line-when-number-of/45336223#45336223", "title": "Why instead of taking an input my program is printing a new line when number of test cases is 1?", "body": "<p>You type <code>1&lt;enter&gt;</code>.  <code>cin &gt;&gt; t</code> just consumes the <code>1</code>.  The <code>&lt;enter&gt;</code> is then consumed by <code>getline(cin,s)</code>.</p>\n"}], "owner": {"reputation": 175, "user_id": 5486232, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e2aa106404cb189fcc4589b373a00474?s=128&d=identicon&r=PG&f=1", "display_name": "daddyodevil", "link": "https://stackoverflow.com/users/5486232/daddyodevil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "closed_date": 1501098797, "accepted_answer_id": 45336223, "answer_count": 1, "score": 0, "last_activity_date": 1501098738, "creation_date": 1501098051, "question_id": 45336062, "link": "https://stackoverflow.com/questions/45336062/why-instead-of-taking-an-input-my-program-is-printing-a-new-line-when-number-of", "closed_reason": "Duplicate", "title": "Why instead of taking an input my program is printing a new line when number of test cases is 1?", "body": "<p>Here <code>t</code> is the variable I'm taking the number of test cases as input. When entering 1, it is just printing a new line and terminating. When giving a number more than 1, it is printing a new line then asking for new input. Can someone tell me why ??</p>\n\n<pre><code>#include \"iostream\"\n#include \"string\"\n\nusing namespace std;\n\nint main()\n{\n    int t,i,k,l,j=0;\n    char c;\n    string s, s2;\n    cin &gt;&gt; t;\n    while(t&gt;0)\n    {\n        cout &lt;&lt; \"Enter Name - \" &lt;&lt; endl;\n        getline (cin,s);\n        l = s.size();\n        s2 = toupper(s[0]);\n        for(i=1; i&lt;l; i++)\n        {\n            if(s[i] == ' ')\n            {\n                c = toupper(s[i+1]);\n                s2 = s2 + \". \" + c;\n                j = i;\n            }\n            if(i == l-1)\n            {\n                if(j!=0)\n                {\n                    for(k=j+2; k&lt;l; k++)\n                    {\n                        c = tolower(s[k]);\n                        s2 = s2 + c;\n                    }\n                }\n                else\n                {\n                    for(k=1; k&lt;l; k++)\n                    {\n                        c = tolower(s[k]);\n                        s2 = s2 + c;\n                    }\n                }\n            }\n        }\n        cout &lt;&lt; s2 &lt;&lt; endl;\n        s2 = \"\"; j=0; t--;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Output - </p>\n\n<pre><code>puku@puku-mint /media/puku/Data/Work/Programs/C++ Mine/CodeChef/Easy $ ./a.out\n1\nEnter Name - \n\npuku@puku-mint /media/puku/Data/Work/Programs/C++ Mine/CodeChef/Easy $ ./a.out\n3\nEnter Name - \n\nEnter Name - \nmy name\nM. Name\nEnter Name - \nthis is name\nT. I. Name\n</code></pre>\n"}, {"tags": ["c++", "templates", "enums", "stdmap", "non-type"], "comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1501098219, "post_id": 45336004, "comment_id": 77634113, "body": "what on earth are you trying to achieve?"}, {"owner": {"reputation": 410, "user_id": 2608530, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/4ctKm.png?s=128&g=1", "display_name": "rtischer8277", "link": "https://stackoverflow.com/users/2608530/rtischer8277"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1501099321, "post_id": 45336004, "comment_id": 77634721, "body": "<code>be more strongly typed</code> in a large program translates into greater program clarity, better error checking and in general easier code maintenance."}], "answers": [{"tags": [], "owner": {"reputation": 3923, "user_id": 8309701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S44bo.png?s=128&g=1", "display_name": "Chris Uzdavinis", "link": "https://stackoverflow.com/users/8309701/chris-uzdavinis"}, "is_accepted": true, "score": 1, "last_activity_date": 1501098992, "creation_date": 1501098992, "answer_id": 45336287, "question_id": 45336004, "link": "https://stackoverflow.com/questions/45336004/stdmap-with-key-as-templated-structs-with-enum-member/45336287#45336287", "title": "std::map with key as templated structs with enum member", "body": "<pre><code>template&lt; enum EnumT &gt;\nstruct EnummedMap // a struct containing a map whose key is non-type templateable\n{\n  typedef std::map&lt; EnumT, EnummedMap &gt; EnumableMap; \n</code></pre>\n\n<p>A non-type template parameter (in this case an old-style enum), is a single value, and by definition is not a type, but std::map expects the Key to be a type, not a value.  To make this work, change \"enum\" to \"typename\":</p>\n\n<pre><code>template&lt;typename EnumT &gt; // &lt;&lt; *** HERE ***\nstruct EnummedMap // a struct containing a map whose key is non-type templateable\n{\n    typedef std::map&lt; EnumT, EnummedMap &gt; EnumableMap; \n    EnummedMap() {}\n\n    EnumableMap enumableMap;\n};\n</code></pre>\n\n<p>However, this allows for non-enum types.  If you want to prevent all uses EXCEPT for enum types, you can use a static_assert:</p>\n\n<pre><code>#include &lt;type_traits&gt;\n//...\ntemplate&lt;typename EnumT&gt;\nstruct EnummedMap \n{\n    static_assert(std::is_enum_v&lt;EnumT&gt;); // c++17\n    //static_assert(std::is_enum&lt;EnumT&gt;::value, \"\"); // c++11\n\n    typedef std::map&lt; EnumT, EnummedMap &gt; EnumableMap;\n    EnummedMap() {}\n\n    EnumableMap enumableMap;\n};\n</code></pre>\n\n<p>Then it won't compile if a non-enum is passed as the template parameter.</p>\n"}], "owner": {"reputation": 410, "user_id": 2608530, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/4ctKm.png?s=128&g=1", "display_name": "rtischer8277", "link": "https://stackoverflow.com/users/2608530/rtischer8277"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 381, "favorite_count": 0, "accepted_answer_id": 45336287, "answer_count": 1, "score": 0, "last_activity_date": 1501098992, "creation_date": 1501097820, "question_id": 45336004, "link": "https://stackoverflow.com/questions/45336004/stdmap-with-key-as-templated-structs-with-enum-member", "title": "std::map with key as templated structs with enum member", "body": "<p>I would like to make my app\u2019s <code>std::map</code>s\u2019 keys not be <code>int</code>s, but rather be more strongly typed as templated non-type <code>enum</code>s defined as a member of a <code>struct</code>. The first program below shows the concept of how my app currently uses <code>map</code>s. It compiles and runs ok.</p>\n\n<pre><code>#include &lt;map&gt;\n\ntemplate&lt; int &gt;\nstruct NummedMap\n{\n  typedef std::map&lt; int, NummedMap &gt; NumableMap;\n\n  NummedMap() {}\n\n  NumableMap numableMap;\n};\n\nint main()\n{\n  NummedMap&lt; 3 &gt; numableMap3;\n  NummedMap&lt; 4 &gt; numableMap4;\n  numableMap3.numableMap[ 3 ] = numableMap3;\n  numableMap4.numableMap[ 4 ] = numableMap4;\n\n  return 0;\n}\n</code></pre>\n\n<p>The second program shows how I would like to program my app\u2019s <code>map</code>s, but I am missing some concepts regarding non-type templates and why an <code>&lt; enum EnumT &gt;</code> is different from a POD <code>int</code>.</p>\n\n<pre><code>#include &lt;map&gt;\n\nstruct Enums1 // a struct containing one kind scoped enums\n{ \n  enum class Action\n  {\n    AAAA,\n    BBBB\n  };\n};\n\nstruct Enums2 // a struct containing another kind scoped enums\n{\n  enum class Action\n  {\n    CCCC,\n    DDDD\n  };\n};\n\ntemplate&lt; enum EnumT &gt;\nstruct EnummedMap // a struct containing a map whose key is non-type templateable\n{\n  typedef std::map&lt; EnumT, EnummedMap &gt; EnumableMap; // error C2065: 'EnumT': undeclared identifier\n\n  EnummedMap() {}\n\n  EnumableMap enumableMap;\n};\n\nint main()\n{\n  EnummedMap&lt; Enums1::Action &gt; enummedMap1; // error C2993: illegal type for non-type template parameter \n  EnummedMap&lt; Enums2::Action &gt; enummedMap2; // error C2993: illegal type for non-type template parameter \n  enummedMap1.enumableMap[ Enums1::Action::AAAA ] = enummedMap1; // error C2678: binary '[': no operator found which takes a left-hand operand of type\n  enummedMap2.enumableMap[ Enums2::Action::CCCC ] = enummedMap2; // error C2678: binary '[': no operator found which takes a left-hand operand of type\n\n  return 0;\n}\n</code></pre>\n\n<p>I don\u2019t understand why <code>EnumableMap</code>\u2018s key is undeclared, or why for example <code>Enums1::Action</code> does not function roughly like an <code>int</code> key.</p>\n"}, {"tags": ["c++", "templates", "overloading"], "answers": [{"comments": [{"owner": {"reputation": 7107, "user_id": 459780, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/55b2cca3b7a11df3a961d57a68705503?s=128&d=identicon&r=PG", "display_name": "Daniel Standage", "link": "https://stackoverflow.com/users/459780/daniel-standage"}, "edited": false, "score": 0, "creation_date": 1501101278, "post_id": 45336581, "comment_id": 77635805, "body": "Yes and no. See the update. The function was defined, but I accidentally omitted the namespace. Filling that in solved the problem."}], "tags": [], "owner": {"reputation": 3923, "user_id": 8309701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S44bo.png?s=128&g=1", "display_name": "Chris Uzdavinis", "link": "https://stackoverflow.com/users/8309701/chris-uzdavinis"}, "is_accepted": true, "score": 0, "last_activity_date": 1501100100, "creation_date": 1501100100, "answer_id": 45336581, "question_id": 45335985, "link": "https://stackoverflow.com/questions/45335985/cannot-instantiate-overloaded-templated-function/45336581#45336581", "title": "Cannot instantiate overloaded templated function", "body": "<p>You declare these functions and explicitly instantiate it later, but do you actually have a definition for the function?</p>\n"}], "owner": {"reputation": 7107, "user_id": 459780, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/55b2cca3b7a11df3a961d57a68705503?s=128&d=identicon&r=PG", "display_name": "Daniel Standage", "link": "https://stackoverflow.com/users/459780/daniel-standage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 260, "favorite_count": 0, "accepted_answer_id": 45336581, "answer_count": 1, "score": 1, "last_activity_date": 1501101215, "creation_date": 1501097762, "last_edit_date": 1501101215, "question_id": 45335985, "link": "https://stackoverflow.com/questions/45335985/cannot-instantiate-overloaded-templated-function", "title": "Cannot instantiate overloaded templated function", "body": "<p>I have a class named <code>Hashtable</code> with several methods for bulk-loading input data. Each of these methods supports different file formats via templates, and is also overloaded so that it can be called with either a string (filename) or a parser object as its first argument.</p>\n\n<p>Here is an example. The <code>consume_seqfile</code> method is defined in the class header like so.</p>\n\n<pre><code>template&lt;typename SeqIO&gt;\nvoid consume_seqfile(\n    std::string const &amp;filename,\n    unsigned int &amp;total_reads,\n    unsigned long long &amp;n_consumed\n);\n\ntemplate&lt;typename SeqIO&gt;\nvoid consume_seqfile(\n    read_parsers::ReadParserPtr&lt;SeqIO&gt; &amp;parser,\n    unsigned int &amp;total_reads,\n    unsigned long long &amp;n_consumed\n);\n</code></pre>\n\n<p>And then instantiated at the bottom of the class definition file like so.</p>\n\n<pre><code>template void Hashtable::consume_seqfile&lt;FastxReader&gt;(\n    std::string const &amp;filename,\n    unsigned int &amp;total_reads,\n    unsigned long long &amp;n_consumed\n);\n\n\ntemplate void Hashtable::consume_seqfile&lt;FastxReader&gt;(\n    ReadParserPtr&lt;FastxReader&gt;&amp; parser,\n    unsigned int &amp;total_reads,\n    unsigned long long &amp;n_consumed\n);\n</code></pre>\n\n<p>This all works fine, and has for months. I'm now trying to add a new variant of this method that has an additional argument. It is defined in the header like so.</p>\n\n<pre><code>template&lt;typename SeqIO&gt;\nvoid consume_seqfile_with_mask(\n    std::string const &amp;filename,\n    Hashtable* mask,\n    unsigned int &amp;total_reads,\n    unsigned long long &amp;n_consumed\n);\n\ntemplate&lt;typename SeqIO&gt;\nvoid consume_seqfile_with_mask(\n    read_parsers::ReadParserPtr&lt;SeqIO&gt;&amp; parser,\n    Hashtable* mask,\n    unsigned int &amp;total_reads,\n    unsigned long long &amp;n_consumed\n);\n</code></pre>\n\n<p>And instantiated in the source file like so.</p>\n\n<pre><code>template void Hashtable::consume_seqfile_with_mask&lt;FastxReader&gt;(\n    std::string const &amp;filename,\n    Hashtable* mask,\n    unsigned int &amp;total_reads,\n    unsigned long long &amp;n_consumed\n);\n\n\ntemplate void Hashtable::consume_seqfile_with_mask&lt;FastxReader&gt;(\n    ReadParserPtr&lt;FastxReader&gt;&amp; parser,\n    Hashtable* mask,\n    unsigned int &amp;total_reads,\n    unsigned long long &amp;n_consumed\n);\n</code></pre>\n\n<p>However, when I try to compile I get the following error message.</p>\n\n<pre><code>src/oxli/hashtable.cc:635:26: error: explicit instantiation of undefined function template 'consume_seqfile_with_mask'\ntemplate void Hashtable::consume_seqfile_with_mask&lt;FastxReader&gt;(\n                         ^\ninclude/oxli/hashtable.hh:281:10: note: explicit instantiation refers here\n    void consume_seqfile_with_mask(\n</code></pre>\n\n<p>My Google/StackOverflow skills are failing me. Any idea what might be causing this issue?</p>\n\n<p><strong>UPDATE</strong>: The problem was with code not shown. I <em>did</em> have a function definition, but it lacked the proper <code>Hashtable::</code> prefix for namespacing. So...the function was indeed undefined. Problem resolved by properly including the namespacing.</p>\n"}, {"tags": ["c++", "crash", "qt5"], "comments": [{"owner": {"reputation": 2639, "user_id": 3072566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jaZNV.png?s=128&g=1", "display_name": "litelite", "link": "https://stackoverflow.com/users/3072566/litelite"}, "edited": false, "score": 0, "creation_date": 1501097831, "post_id": 45335974, "comment_id": 77633910, "body": "Do you have any message? Try to launch your program from the command line. You might see some. Also, if you are on a unix platform (linux,OSX) you can try to run it in <a href=\"http://valgrind.org/\" rel=\"nofollow noreferrer\">valgrind</a>."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1501098242, "post_id": 45335974, "comment_id": 77634125, "body": "Are you missing a <code>setupUi(this)</code> call??"}, {"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1501099011, "post_id": 45335974, "comment_id": 77634561, "body": "Where&#39;s the stack trace?"}, {"owner": {"reputation": 51, "user_id": 7953702, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1cd13082e55c6e116b48ea301f426eb7?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Miros\u0142aw", "link": "https://stackoverflow.com/users/7953702/filip-miros%c5%82aw"}, "edited": false, "score": 0, "creation_date": 1501099703, "post_id": 45335974, "comment_id": 77634940, "body": "I deleted it on purpose."}, {"owner": {"reputation": 51, "user_id": 7953702, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1cd13082e55c6e116b48ea301f426eb7?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Miros\u0142aw", "link": "https://stackoverflow.com/users/7953702/filip-miros%c5%82aw"}, "edited": false, "score": 0, "creation_date": 1501099717, "post_id": 45335974, "comment_id": 77634951, "body": "Whats stack trace?"}, {"owner": {"reputation": 51, "user_id": 7953702, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1cd13082e55c6e116b48ea301f426eb7?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Miros\u0142aw", "link": "https://stackoverflow.com/users/7953702/filip-miros%c5%82aw"}, "edited": false, "score": 0, "creation_date": 1501099764, "post_id": 45335974, "comment_id": 77634974, "body": "litelite - i dont have an executable file so i cant lauch it from cmd as far as i know"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1501100106, "post_id": 45335974, "comment_id": 77635162, "body": "If you can run it you have an executable."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1501100187, "post_id": 45335974, "comment_id": 77635197, "body": "@FilipMiros\u0142aw 1) What do you mean you don&#39;t have executable file? How, then, are you running your application in the first place? 2) Did you try to run your application with a debugger attached, so you could, at least see where your application is crashing, and obtain said stack trace (call stack at the point of crash)."}, {"owner": {"reputation": 51, "user_id": 7953702, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1cd13082e55c6e116b48ea301f426eb7?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Miros\u0142aw", "link": "https://stackoverflow.com/users/7953702/filip-miros%c5%82aw"}, "edited": false, "score": 0, "creation_date": 1501100426, "post_id": 45335974, "comment_id": 77635336, "body": "1) you are right! silly me! xD i just could not find it because i was looking in the wrong directory!"}, {"owner": {"reputation": 51, "user_id": 7953702, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1cd13082e55c6e116b48ea301f426eb7?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Miros\u0142aw", "link": "https://stackoverflow.com/users/7953702/filip-miros%c5%82aw"}, "edited": false, "score": 0, "creation_date": 1501100609, "post_id": 45335974, "comment_id": 77635455, "body": "2) when i run it wih debugger application doesnt crash but window is transparent(?!)."}, {"owner": {"reputation": 51, "user_id": 7953702, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1cd13082e55c6e116b48ea301f426eb7?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Miros\u0142aw", "link": "https://stackoverflow.com/users/7953702/filip-miros%c5%82aw"}, "edited": false, "score": 0, "creation_date": 1501100654, "post_id": 45335974, "comment_id": 77635474, "body": "2) therefore i am not getting any messages from debugger"}, {"owner": {"reputation": 2557, "user_id": 5764553, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dd0033e9f395f84f4357d0fafd54df1?s=128&d=identicon&r=PG", "display_name": "Andrew Myers", "link": "https://stackoverflow.com/users/5764553/andrew-myers"}, "edited": false, "score": 2, "creation_date": 1501106998, "post_id": 45335974, "comment_id": 77638531, "body": "Could you please reduce your code to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>? It will help people figure out where your problem is."}, {"owner": {"reputation": 473, "user_id": 1715586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc2aa29013b4d0aed59b956b06320b0?s=128&d=identicon&r=PG", "display_name": "M4rc", "link": "https://stackoverflow.com/users/1715586/m4rc"}, "edited": false, "score": 0, "creation_date": 1501111905, "post_id": 45335974, "comment_id": 77640033, "body": "Is <code>void MainWindow::paintEvent(QPaintEvent*)</code> even legal for a function definition? What about putting console output lines as &quot;checkpoints&quot; to narrow down the section where it&#39;s crashing?"}], "answers": [{"comments": [{"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1501128269, "post_id": 45341156, "comment_id": 77643900, "body": "@Filip Miros\u0142aw, as an additional piece of advice, you don&#39;t need to compare the value of a boolean variable in a conditional statement, i.e. it&#39;s better to use <code>if (!timer-&gt;isActive())</code> instead of <code>if (timer-&gt;isActive() == false)</code>."}, {"owner": {"reputation": 51, "user_id": 7953702, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1cd13082e55c6e116b48ea301f426eb7?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Miros\u0142aw", "link": "https://stackoverflow.com/users/7953702/filip-miros%c5%82aw"}, "edited": false, "score": 0, "creation_date": 1501151463, "post_id": 45341156, "comment_id": 77657367, "body": "You are right about this one! I seriously need some professional example. Also, can you recommend some Qt5 books?"}, {"owner": {"reputation": 51, "user_id": 7953702, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1cd13082e55c6e116b48ea301f426eb7?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Miros\u0142aw", "link": "https://stackoverflow.com/users/7953702/filip-miros%c5%82aw"}, "edited": false, "score": 0, "creation_date": 1501151578, "post_id": 45341156, "comment_id": 77657447, "body": "It is still a mystery to me why widgets does not show. w.show() which calls paintevent is called before an infinite loop. Also why is it infinite loop? As far as I know checkCollision() will return true at some point."}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "reply_to_user": {"reputation": 51, "user_id": 7953702, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1cd13082e55c6e116b48ea301f426eb7?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Miros\u0142aw", "link": "https://stackoverflow.com/users/7953702/filip-miros%c5%82aw"}, "edited": false, "score": 0, "creation_date": 1501152647, "post_id": 45341156, "comment_id": 77658213, "body": "@Filip Miros\u0142aw, I must admit that I haven&#39;t read a single (printed) book about Qt (shame on me). However, there are tons of freely accessible information on the topic out there. My source of knowledge are the documentation <a href=\"http://doc.qt.io/qt-5/classes.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/classes.html</a>, the examples and tutorials (available also from Qt Creator) <a href=\"http://doc.qt.io/qt-5/qtexamplesandtutorials.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qtexamplesandtutorials.html</a>, as well as some pretty good Youtube series in English <a href=\"https://www.youtube.com/watch?v=6KtOzh0StTc&amp;list=PL2D1942A4688E9D63\" rel=\"nofollow noreferrer\">youtube.com/watch?v=6KtOzh0StTc&amp;list=PL2D1942A4688E9D63</a> and in Spanish <a href=\"https://www.youtube.com/user/duartecorporation/videos\" rel=\"nofollow noreferrer\">youtube.com/user/duartecorporation/videos</a>. And of course - Stack overflow. :)"}, {"owner": {"reputation": 51, "user_id": 7953702, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1cd13082e55c6e116b48ea301f426eb7?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Miros\u0142aw", "link": "https://stackoverflow.com/users/7953702/filip-miros%c5%82aw"}, "edited": false, "score": 0, "creation_date": 1501153561, "post_id": 45341156, "comment_id": 77658897, "body": "Although I personally prefer classic books I will surely check out this YT channel!! Thank you!"}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "reply_to_user": {"reputation": 51, "user_id": 7953702, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1cd13082e55c6e116b48ea301f426eb7?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Miros\u0142aw", "link": "https://stackoverflow.com/users/7953702/filip-miros%c5%82aw"}, "edited": false, "score": 0, "creation_date": 1501153756, "post_id": 45341156, "comment_id": 77659042, "body": "@Filip Miros\u0142aw, You&#39;re welcome! As for the issue: <code>int main()</code> is not a method of a class which inherits from QObject. So, don&#39;t expect it to work the same way as MainWindow does for example. Regarding the loop, I&#39;ve called it infinite, because it will exit on collision and for a collision to occur there should be a movement with the keys and for a key to be processed the events should be processed and it will not happen, because the events are not processed automatically in the main, so in fact the loop will go on endlessly."}, {"owner": {"reputation": 51, "user_id": 7953702, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1cd13082e55c6e116b48ea301f426eb7?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Miros\u0142aw", "link": "https://stackoverflow.com/users/7953702/filip-miros%c5%82aw"}, "edited": false, "score": 0, "creation_date": 1501154270, "post_id": 45341156, "comment_id": 77659421, "body": "&quot;Events are not processed automatically in the main&quot; does it mean that keyEvent is not called? If so what can I do about it to be called every time user uses the keyboard?"}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "reply_to_user": {"reputation": 51, "user_id": 7953702, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1cd13082e55c6e116b48ea301f426eb7?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Miros\u0142aw", "link": "https://stackoverflow.com/users/7953702/filip-miros%c5%82aw"}, "edited": false, "score": 0, "creation_date": 1501193807, "post_id": 45341156, "comment_id": 77685012, "body": "@Filip Miros\u0142aw, yes, that&#39;s exactly what I mean. Actually, you can put a <code>qDebug() &lt;&lt; &quot;paint&quot;;</code> in the <code>MainWindow::paintEvent</code> and see the difference with or without <code>QApplication::processEvents();</code> in the <code>while(!w.checkCollision())</code> loop."}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "reply_to_user": {"reputation": 51, "user_id": 7953702, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1cd13082e55c6e116b48ea301f426eb7?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Miros\u0142aw", "link": "https://stackoverflow.com/users/7953702/filip-miros%c5%82aw"}, "edited": false, "score": 0, "creation_date": 1501201612, "post_id": 45341156, "comment_id": 77687101, "body": "@Filip Miros\u0142aw, I have played a little bit with your code and changed it to some extent. It is available at: <a href=\"https://github.com/scopchanov/SnakeGame\" rel=\"nofollow noreferrer\">github.com/scopchanov/SnakeGame</a> Take a look at it and tell me what you think."}, {"owner": {"reputation": 51, "user_id": 7953702, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1cd13082e55c6e116b48ea301f426eb7?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Miros\u0142aw", "link": "https://stackoverflow.com/users/7953702/filip-miros%c5%82aw"}, "edited": false, "score": 0, "creation_date": 1501774319, "post_id": 45341156, "comment_id": 77938386, "body": "I am horribly sorry for not answering for so long!!! Had a look and I think it&#39;s great!"}, {"owner": {"reputation": 51, "user_id": 7953702, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1cd13082e55c6e116b48ea301f426eb7?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Miros\u0142aw", "link": "https://stackoverflow.com/users/7953702/filip-miros%c5%82aw"}, "edited": false, "score": 0, "creation_date": 1501774373, "post_id": 45341156, "comment_id": 77938425, "body": "About the problem: I have put QApplication::processEvents() inside the loop. Application is being displayed but still no movement whatsoever."}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "reply_to_user": {"reputation": 51, "user_id": 7953702, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1cd13082e55c6e116b48ea301f426eb7?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Miros\u0142aw", "link": "https://stackoverflow.com/users/7953702/filip-miros%c5%82aw"}, "edited": false, "score": 0, "creation_date": 1501774679, "post_id": 45341156, "comment_id": 77938648, "body": "@FilipMiros\u0142aw, did you check how it is done in my example? Btw, you may use it."}, {"owner": {"reputation": 51, "user_id": 7953702, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1cd13082e55c6e116b48ea301f426eb7?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Miros\u0142aw", "link": "https://stackoverflow.com/users/7953702/filip-miros%c5%82aw"}, "edited": false, "score": 1, "creation_date": 1503147222, "post_id": 45341156, "comment_id": 78501686, "body": "Thank you all solved with scopchanov&#39;s help. Scopchanov thank you again."}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "reply_to_user": {"reputation": 51, "user_id": 7953702, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1cd13082e55c6e116b48ea301f426eb7?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Miros\u0142aw", "link": "https://stackoverflow.com/users/7953702/filip-miros%c5%82aw"}, "edited": false, "score": 0, "creation_date": 1503148123, "post_id": 45341156, "comment_id": 78501936, "body": "@FilipMiros\u0142aw, anytime"}], "tags": [], "owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "is_accepted": true, "score": 1, "last_activity_date": 1501127942, "creation_date": 1501127942, "answer_id": 45341156, "question_id": 45335974, "link": "https://stackoverflow.com/questions/45335974/qt5-c-application-crashes-for-unknown-reasons/45341156#45341156", "title": "Qt5 C++ Application Crashes for unknown reasons", "body": "<blockquote>\n  <p>My application crashes even before widgets are shown (but window itself is shown).</p>\n</blockquote>\n\n<p>It doesn't crash. In <code>main.cpp</code> there is an infinite loop in which some results are expected, namely <code>!w.checkCollision()</code>, but since there is no event loop running in <code>main.cpp</code> nothing happens and the programs hangs there waiting in vain.</p>\n\n<p>As an answer to your question, in order to see the widgets add <code>QApplication::processEvents();</code> in the following way:</p>\n\n<pre><code>while(!w.checkCollision())\n{\n    QApplication::processEvents();\n\n    if(timer -&gt; isActive() == false)\n    {\n        w.play();\n        timer -&gt; start(1);\n    }\n}\n</code></pre>\n\n<p>However, with this approach you will face further problems. So I would strongly advise you to take a look at the examples in the Qt Creator in order to see which is the correct way of using the library as thought by the Qt developers.</p>\n"}], "owner": {"reputation": 51, "user_id": 7953702, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1cd13082e55c6e116b48ea301f426eb7?s=128&d=identicon&r=PG&f=1", "display_name": "Filip Miros\u0142aw", "link": "https://stackoverflow.com/users/7953702/filip-miros%c5%82aw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 492, "favorite_count": 0, "closed_date": 1501132066, "accepted_answer_id": 45341156, "answer_count": 1, "score": 0, "last_activity_date": 1501127942, "creation_date": 1501097726, "question_id": 45335974, "link": "https://stackoverflow.com/questions/45335974/qt5-c-application-crashes-for-unknown-reasons", "closed_reason": "Not suitable for this site", "title": "Qt5 C++ Application Crashes for unknown reasons", "body": "<p>I am really struggling with that strange bug for some time. My application crashes even before widgets are shown (but window itself is shown). Here is my code:</p>\n\n<p>main.cpp</p>\n\n<pre><code>#include \"mainwindow.h\"\n#include &lt;QApplication&gt;\n#include &lt;QTimer&gt;\n\nint main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n    MainWindow w;\n    w.setWindowTitle(\"Snake\");\n    w.resize(500, 500);\n    w.show();\n    QTimer* timer = new QTimer();\n    while(!w.checkCollision())\n    {\n        if(timer -&gt; isActive() == false)\n        {\n            w.play();\n            timer -&gt; start(1);\n        }\n    }\n    return a.exec();\n}\n</code></pre>\n\n<p>mainwindow.h</p>\n\n<pre><code>#ifndef MAINWINDOW_H\n#define MAINWINDOW_H\n\n#include &lt;QMainWindow&gt;\n#include &lt;QPainter&gt;\n#include &lt;QKeyEvent&gt;\n#include &lt;QDebug&gt;\n#include &lt;snakeclass.h&gt;\n\nnamespace Ui {\nclass MainWindow;\n}\n\nclass MainWindow : public QMainWindow\n{\n    Q_OBJECT\n\npublic:\n    explicit MainWindow(QWidget *parent = 0);\n    Snake snake;\n    void paintEvent(QPaintEvent*);\n    void keyEvent(QKeyEvent* keyevent);\n    void move();\n    bool checkCollision();\n    void play();\n    ~MainWindow();\n\nprivate:\n    Ui::MainWindow *ui;\n};\n\n#endif // MAINWINDOW_H\n</code></pre>\n\n<p>mainwindow.cpp</p>\n\n<pre><code>#include \"mainwindow.h\"\n#include \"ui_mainwindow.h\"\n#include &lt;QPainter&gt;\n#include &lt;QPainterPath&gt;\n#include &lt;QKeyEvent&gt;\n\nMainWindow::MainWindow(QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::MainWindow)\n{\n\n}\n\nvoid MainWindow::paintEvent(QPaintEvent*)\n{\n    QPainter painter(this);\n    // Draw black background.\n    painter.drawRect(0, 0, 500, 500);\n    painter.fillRect(0, 0, 500, 500, Qt::black);\n    for(unsigned int i = 0; i &lt; snake.getLength(); i++)\n    {\n        // Draw green snake's body.\n        painter.setPen(Qt::green);\n        painter.setBrush(Qt::green);\n        // If i = 0, so if we are drawing snake's head.\n        if(i == 0)\n        {\n            // Draw red head.\n            painter.setPen(Qt::red);\n            painter.setBrush(Qt::red);\n        }\n        painter.drawEllipse((snake.getDot(i)).x, (snake.getDot(i)).y, 10, 10);\n    }\n}\n\nvoid MainWindow::keyEvent(QKeyEvent* keyevent)\n{\n    if(keyevent -&gt; key() == Qt::Key_Left)\n    {\n        if(snake.getDirection() != Snake::Direction::RIGHT)\n        {\n            snake.setDirection(Snake::Direction::LEFT);\n        }\n    }\n    else if(keyevent -&gt; key() == Qt::Key_Right)\n    {\n        if(snake.getDirection() != Snake::Direction::LEFT)\n        {\n            snake.setDirection(Snake::Direction::RIGHT);\n        }\n    }\n    else if(keyevent -&gt; key() == Qt::Key_Up)\n    {\n        if(snake.getDirection() != Snake::Direction::DOWN)\n        {\n            snake.setDirection(Snake::Direction::UP);\n        }\n    }\n    else if(keyevent -&gt; key() == Qt::Key_Down)\n    {\n        if(snake.getDirection() != Snake::Direction::UP)\n        {\n            snake.setDirection(Snake::Direction::DOWN);\n        }\n    }\n}\n\nvoid MainWindow::move()\n{\n    for(unsigned int i = snake.getLength(); i &gt; 0; i--)\n    {\n        snake.editDot((snake.getDot(i - 1)).x, (snake.getDot(i - 1)).y, i, (snake.getDot(i - 1)).direction);\n    }\n    if(snake.getDirection() == Snake::Direction::UP)\n    {\n        if(int(snake.getDot(0).y - 10) &lt; 0)\n        {\n            snake.editDot((snake.getDot(0)).x, 500, 0, snake.getDirection());\n        }\n        else\n        {\n            snake.editDot((snake.getDot(0)).x, (snake.getDot(0)).y - 10, 0, snake.getDirection());\n        }\n    }\n    else if(snake.getDirection() == Snake::Direction::DOWN)\n    {\n        if(((snake.getDot(0)).y + 10) &gt; 490)\n        {\n            snake.editDot((snake.getDot(0)).x, 0, 0, snake.getDirection());\n        }\n        else\n        {\n            snake.editDot((snake.getDot(0)).x, (snake.getDot(0)).y + 10, 0, snake.getDirection());\n        }\n    }\n    else if(snake.getDirection() == Snake::Direction::RIGHT)\n    {\n        if(((snake.getDot(0)).x + 10) &gt; 490)\n        {\n            snake.editDot(0, (snake.getDot(0)).y, 0, snake.getDirection());\n        }\n        else\n        {\n            snake.editDot((snake.getDot(0)).x + 10, (snake.getDot(0)).y, 0, snake.getDirection());\n        }\n    }\n    else if(snake.getDirection() == Snake::Direction::LEFT)\n    {\n        if((int((snake.getDot(0)).x) - 10) &lt; 0)\n        {\n            snake.editDot(500, (snake.getDot(0)).y, 0, snake.getDirection());\n        }\n        else\n        {\n            snake.editDot((snake.getDot(0)).x - 10, (snake.getDot(0)).y, 0, snake.getDirection());\n        }\n    }\n}\n\nbool MainWindow::checkCollision()\n{\n    for(unsigned int i = 0; i &lt; snake.getLength(); i++)\n    {\n        for(unsigned int j = 0; j &lt; snake.getLength(); j++)\n        {\n            if((i != j) &amp;&amp; ((snake.getDot(i)).x == (snake.getDot(j)).x) &amp;&amp; ((snake.getDot(i)).y == (snake.getDot(j)).y))\n            {\n                return true;\n            }\n        }\n    }\n    return false;\n}\n\nvoid MainWindow::play()\n{\n    //move();\n    update();\n}\n\nMainWindow::~MainWindow()\n{\n    delete ui;\n}\n</code></pre>\n\n<p>snakeclass.h</p>\n\n<pre><code>    #ifndef SNAKECLASS\n    #define SNAKECLASS\n\n    #include &lt;vector&gt;\n\n    class Snake\n    {\n        public:\n\n            enum class Direction\n            {\n                LEFT,\n                RIGHT,\n                UP,\n                DOWN\n            };\n\n            // Dot is a part of the snake.\n            struct dot\n            {\n                unsigned int x;\n                unsigned int y;\n                // Number of the dot (head is 0).\n                unsigned int dotNumber;\n                // Direction of the particular dot.\n                Direction direction;\n            };\n\n            unsigned int getLength();\n            unsigned int getScore();\n            unsigned int getSpeed();\n            Direction getDirection();\n            dot getDot(unsigned int dotNumber);\n\n            void setLength(unsigned int length);\n            void setScore(unsigned int score);\n            void setSpeed(unsigned int speed);\n            void setDirection(Direction direction);\n            // Returns new dot's dotNumber.\n            unsigned int newDot();\n            void editDot(unsigned int x, unsigned int y, unsigned int dotNumber, Direction direction);\n\n        private:\n\n            unsigned int length = 3;\n            unsigned int score = 0;\n            unsigned int speed = 1;\n            Direction direction = Direction::RIGHT;\n            std::vector &lt;dot&gt; dots = {dot {250, 250, 0, Direction::RIGHT},\n                                      dot {240, 250, 1, Direction::RIGHT},\n                                      dot {230, 250, 2, Direction::RIGHT}};\n    };\n\n    #endif // SNAKECLASS\n</code></pre>\n\n<p>snakeclass.cpp</p>\n\n<pre><code>#include \"snakeclass.h\"\n\nunsigned int Snake::getLength()\n{\n    return length;\n}\n\nunsigned int Snake::getScore()\n{\n    return score;\n}\n\nunsigned int Snake::getSpeed()\n{\n    return speed;\n}\n\nSnake::Direction Snake::getDirection()\n{\n    return direction;\n}\n\nSnake::dot Snake::getDot(unsigned int dotNumber)\n{\n    return dots.at(dotNumber);\n}\n\nvoid Snake::setLength(unsigned int length)\n{\n    this -&gt; length = length;\n}\n\nvoid Snake::setScore(unsigned int score)\n{\n    this -&gt; score = score;\n}\n\nvoid Snake::setSpeed(unsigned int speed)\n{\n    this -&gt; speed = speed;\n}\n\nvoid Snake::setDirection(Snake::Direction direction)\n{\n    this -&gt; direction = direction;\n}\n\nunsigned int Snake::newDot()\n{\n    dot newDot;\n    newDot.dotNumber = dots.size();\n    dots.push_back(newDot);\n    length ++;\n    return newDot.dotNumber;\n}\n\nvoid Snake::editDot(unsigned int x, unsigned int y, unsigned int dotNumber, Snake::Direction direction)\n{\n    for(unsigned int i = 0; i &lt; dots.size(); i++)\n    {\n        if((dots.at(i)).dotNumber == dotNumber)\n        {\n            dots.at(i).x = x;\n            dots.at(i).y = y;\n            dots.at(i).direction = direction;\n        }\n    }\n}\n</code></pre>\n\n<p>I am new to Qt5 and this is my first project involving painter and keyboard events. Could you help me to figure out what the problem in the code above is? Thank you for all the answers!</p>\n"}, {"tags": ["c++", "qt", "qml"], "comments": [{"owner": {"reputation": 8313, "user_id": 7621674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/323bed98b2e655d5fa9ac6d23a72b995?s=128&d=identicon&r=PG", "display_name": "m7913d", "link": "https://stackoverflow.com/users/7621674/m7913d"}, "edited": false, "score": 0, "creation_date": 1501097698, "post_id": 45335888, "comment_id": 77633830, "body": "Does <code>onValueChanged: value = 0</code> work?"}, {"owner": {"reputation": 31, "user_id": 8196678, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/bf96d06c900fed1335b747f4a47d5a76?s=128&d=identicon&r=PG&f=1", "display_name": "orsonl", "link": "https://stackoverflow.com/users/8196678/orsonl"}, "reply_to_user": {"reputation": 8313, "user_id": 7621674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/323bed98b2e655d5fa9ac6d23a72b995?s=128&d=identicon&r=PG", "display_name": "m7913d", "link": "https://stackoverflow.com/users/7621674/m7913d"}, "edited": false, "score": 0, "creation_date": 1501097906, "post_id": 45335888, "comment_id": 77633952, "body": "I tired that but it didn&#39;t work. Maybe I put it in a wrong place? Which line should I put it?  Appreciated."}, {"owner": {"reputation": 8313, "user_id": 7621674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/323bed98b2e655d5fa9ac6d23a72b995?s=128&d=identicon&r=PG", "display_name": "m7913d", "link": "https://stackoverflow.com/users/7621674/m7913d"}, "edited": false, "score": 0, "creation_date": 1501098068, "post_id": 45335888, "comment_id": 77634021, "body": "Just somewhere in <code>CircularGauge</code>, for example above <code>scale: 0.7</code>. Note that the order of lines doesn&#39;t matter in QML."}, {"owner": {"reputation": 31, "user_id": 8196678, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/bf96d06c900fed1335b747f4a47d5a76?s=128&d=identicon&r=PG&f=1", "display_name": "orsonl", "link": "https://stackoverflow.com/users/8196678/orsonl"}, "reply_to_user": {"reputation": 8313, "user_id": 7621674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/323bed98b2e655d5fa9ac6d23a72b995?s=128&d=identicon&r=PG", "display_name": "m7913d", "link": "https://stackoverflow.com/users/7621674/m7913d"}, "edited": false, "score": 0, "creation_date": 1501098637, "post_id": 45335888, "comment_id": 77634351, "body": "@m7913d now the value is reset to zero after I release a key, but I still need to press a key for the value to be constantly update :( I have change the word &quot;reset&quot; to &quot;update&quot; in the post. Sorry for the misunderstanding"}, {"owner": {"reputation": 11264, "user_id": 2056452, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/51f9d3e603983dd1aee8aadd80f17e2f?s=128&d=identicon&r=PG", "display_name": "derM", "link": "https://stackoverflow.com/users/2056452/derm"}, "edited": false, "score": 0, "creation_date": 1501139092, "post_id": 45335888, "comment_id": 77648460, "body": "As what you posted in the section <i>solved</i> is exactly what proposed in <i>dtech</i>s answer, it is good practice on this site to mark the correct (and best) answer as accepted. See <a href=\"https://stackoverflow.com/help/someone-answers\"><b>here</b></a> the helppage describing what to do when someone provides an answer."}, {"owner": {"reputation": 31, "user_id": 8196678, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/bf96d06c900fed1335b747f4a47d5a76?s=128&d=identicon&r=PG&f=1", "display_name": "orsonl", "link": "https://stackoverflow.com/users/8196678/orsonl"}, "edited": false, "score": 0, "creation_date": 1501180271, "post_id": 45335888, "comment_id": 77678406, "body": "Thanks for the reminder. I just started to used this forum. Please let me know if there is more things I have to do"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 8196678, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/bf96d06c900fed1335b747f4a47d5a76?s=128&d=identicon&r=PG&f=1", "display_name": "orsonl", "link": "https://stackoverflow.com/users/8196678/orsonl"}, "edited": false, "score": 0, "creation_date": 1501098872, "post_id": 45336239, "comment_id": 77634483, "body": "Thank you for the reply. I have tried that but the behavior did not changed. Maybe I put these lines in a wrong place? Which line should I put it?"}, {"owner": {"reputation": 31, "user_id": 8196678, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/bf96d06c900fed1335b747f4a47d5a76?s=128&d=identicon&r=PG&f=1", "display_name": "orsonl", "link": "https://stackoverflow.com/users/8196678/orsonl"}, "edited": false, "score": 0, "creation_date": 1501102321, "post_id": 45336239, "comment_id": 77636367, "body": "Thank you for the explanation. Things make more sense now. However, the current code is still not working (updated in the porst) :( . I will try the Q_PROPTY next."}, {"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "reply_to_user": {"reputation": 31, "user_id": 8196678, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/bf96d06c900fed1335b747f4a47d5a76?s=128&d=identicon&r=PG&f=1", "display_name": "orsonl", "link": "https://stackoverflow.com/users/8196678/orsonl"}, "edited": false, "score": 0, "creation_date": 1501102915, "post_id": 45336239, "comment_id": 77636720, "body": "The code should work, it is simple and straightforward, if it doesn&#39;t work the blame lies with your <code>Dashboard</code> class."}, {"owner": {"reputation": 31, "user_id": 8196678, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/bf96d06c900fed1335b747f4a47d5a76?s=128&d=identicon&r=PG&f=1", "display_name": "orsonl", "link": "https://stackoverflow.com/users/8196678/orsonl"}, "edited": false, "score": 0, "creation_date": 1501103178, "post_id": 45336239, "comment_id": 77636852, "body": "understood. I will look it up"}, {"owner": {"reputation": 31, "user_id": 8196678, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/bf96d06c900fed1335b747f4a47d5a76?s=128&d=identicon&r=PG&f=1", "display_name": "orsonl", "link": "https://stackoverflow.com/users/8196678/orsonl"}, "edited": false, "score": 0, "creation_date": 1501103759, "post_id": 45336239, "comment_id": 77637151, "body": "I think its because in the Dashboard class I used QTimer to update a OpenGL scene"}, {"owner": {"reputation": 11264, "user_id": 2056452, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/51f9d3e603983dd1aee8aadd80f17e2f?s=128&d=identicon&r=PG", "display_name": "derM", "link": "https://stackoverflow.com/users/2056452/derm"}, "edited": false, "score": 1, "creation_date": 1501106275, "post_id": 45336239, "comment_id": 77638205, "body": "I think you should familiarize yourself with the core concepts of QML (especially what it means to work with a <i>declarative language</i>) and with model-view-something-architectures. Further keep in mind that you should not write your own render loop if unless your motto is &quot;<i>no risk no fun&quot;</i> or you are very very experienced with Qt/QML and have some definitve reasons for it. (The documentation strongly discourages it, I just can&#39;t find the page OTG). And then go with <i>dtech</i>s latter solution with the <code>Q_PROPERTY</code>."}], "tags": [], "owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "is_accepted": true, "score": 1, "last_activity_date": 1501099635, "last_edit_date": 1501099635, "creation_date": 1501098786, "answer_id": 45336239, "question_id": 45335888, "link": "https://stackoverflow.com/questions/45335888/qt-qml-run-a-line-without-any-conditions-whiletrue/45336239#45336239", "title": "Qt qml - run a line without any conditions (while(true))", "body": "<p>Have you considered using a <a href=\"http://doc.qt.io/qt-5/qml-qtqml-timer.html\" rel=\"nofollow noreferrer\"><code>Timer</code></a> element to continuously execute code at a specific interval?</p>\n\n<pre><code>Timer {\n    interval: 100\n    running: true\n    repeat: true\n    onTriggered: doYourStuff()\n}\n</code></pre>\n\n<p>You definitely don't want anything like <code>while(true)</code> (unless you have a manual exit point) as that will block the thread and as a result your application will effectively hang.</p>\n\n<p>Also consider that the moment you <code>value = something</code>, you will break the existing binding for <code>value</code> that you have.</p>\n\n<p>Try something like this:</p>\n\n<pre><code>CircularGauge {\n  scale : 0.7\n  anchors.centerIn: parent\n  Timer {\n    interval: 100\n    running: true\n    repeat: true\n    onTriggered: value = value ? 0 : Dashboard.getSpeed()\n  }\n}\n</code></pre>\n\n<p>What it will do is every 100 milliseconds it will set value to either 0 if current value is not 0, or to <code>Dashboard.getSpeed()</code>.</p>\n\n<p>OK, you made another change, if all you want to do is update the value continuously, then all you need for the timer trigger handler is:</p>\n\n<pre><code>onTriggered: value = Dashboard.getSpeed()\n</code></pre>\n\n<p>But an even more correct design would be to have a <code>speed</code> <code>Q_PROPERTY</code> in your <code>Dashboard</code> class, with implemented notifications on value change, then all you need to do in QML is this:</p>\n\n<pre><code>CircularGauge {\n  value: Dashboard.speed\n}\n</code></pre>\n\n<p>And ideally, the update frequency of the dashboard can be set, and it will still use a timer, but using the <code>QTimer</code> C++ class.</p>\n"}], "owner": {"reputation": 31, "user_id": 8196678, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/bf96d06c900fed1335b747f4a47d5a76?s=128&d=identicon&r=PG&f=1", "display_name": "orsonl", "link": "https://stackoverflow.com/users/8196678/orsonl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 454, "favorite_count": 0, "accepted_answer_id": 45336239, "answer_count": 1, "score": -1, "last_activity_date": 1501108297, "creation_date": 1501097411, "last_edit_date": 1501108297, "question_id": 45335888, "link": "https://stackoverflow.com/questions/45335888/qt-qml-run-a-line-without-any-conditions-whiletrue", "title": "Qt qml - run a line without any conditions (while(true))", "body": "<p>I am a noob in qml. I am using the CircularGauge class and I want to constantly update the value. The currently code I found online only changes the value if a key is pressed (line 7). However, I want the value to be updated no matter what( similar to while(true) in c++. In line 7, dashboard is a class defined in C++ and the class member function will grab a value from hardwares.</p>\n\n<pre><code>CircularGauge {\n    scale : 0.7\n    value: accelerating ? maximumValue : 0\n    anchors.centerIn: parent\n    property bool accelerating: false\n    Keys.onPressed: {\n         value = Dashboard.getSpeed();\n    }\n}\n</code></pre>\n\n<p>Still no luck. The updated code is:</p>\n\n<pre><code>Window {    \n   x: 100 \n   y: 100\n   width: 190 \n   height: 190\n   visible: true\n   MouseArea {\n      anchors.fill: parent\n      onClicked: {\n            Qt.quit();\n      }\n   }\n\nCircularGauge {\n    scale : 0.7\n    anchors.centerIn: parent\n    Timer {\n        interval: 50\n        running: true\n        repeat: true\n        onTriggered: value = Dashboard.getSpeed()\n    }\n    Component.onCompleted: forceActiveFocus()\n    Behavior on value {\n        NumberAnimation {\n            duration: 100\n        }\n    }\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Solved:</p>\n\n<pre><code>Window {    \nx: 100 \ny: 100\nwidth: 190 \nheight: 190\nvisible: true\nCircularGauge {\nscale : 0.7\nanchors.centerIn: parent\nid: dashboard\nTimer {\n    interval: 40\n    running: true\n    repeat: true\n    onTriggered: dashboard.value = Dashboard.getSpeed()\n}\n}\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1501097410, "post_id": 45335870, "comment_id": 77633646, "body": "What is <code>tErrorCode</code>? It&#39;s entirely possible that <code>std::is_same&lt;bool, tErrorCode&gt;::value == true</code>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1501097491, "post_id": 45335870, "comment_id": 77633705, "body": "<code>Bar::CheckThis</code> does not override <code>Foo::CheckThis</code>. The parameter list is not the same. They are simply two different methods that share a name."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1501097496, "post_id": 45335870, "comment_id": 77633708, "body": "Those are two different functions - the second one is not related to the first one."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 1, "creation_date": 1501097614, "post_id": 45335870, "comment_id": 77633770, "body": "Overloading and overriding are not the same thing."}], "answers": [{"comments": [{"owner": {"reputation": 249, "user_id": 8321082, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f8c9aaffcc9327cdaff6d451f56e2200?s=128&d=identicon&r=PG&f=1", "display_name": "J Doe.", "link": "https://stackoverflow.com/users/8321082/j-doe"}, "edited": false, "score": 0, "creation_date": 1501162789, "post_id": 45335911, "comment_id": 77666253, "body": "So.. <code>Bar</code> hides the method (if that c# terminology works here). What happens when <code>Bar</code> calls an inherited method from <code>Foo</code> that calls <code>CheckThis</code>, which was expecting a bool?"}, {"owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "reply_to_user": {"reputation": 249, "user_id": 8321082, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f8c9aaffcc9327cdaff6d451f56e2200?s=128&d=identicon&r=PG&f=1", "display_name": "J Doe.", "link": "https://stackoverflow.com/users/8321082/j-doe"}, "edited": false, "score": 0, "creation_date": 1501164391, "post_id": 45335911, "comment_id": 77667640, "body": "@JDoe. From inside <code>Bar</code> you might either call <code>CheckThis(int, char)</code> directly or call <code>Foo::CheckThis(int)</code> because <code>CheckThis</code> in <code>Bar</code> hides <code>CheckThis</code> in <code>Foo</code>. In both cases appropriate method is called."}], "tags": [], "owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "is_accepted": true, "score": 5, "last_activity_date": 1501101016, "last_edit_date": 1501101016, "creation_date": 1501097513, "answer_id": 45335911, "question_id": 45335870, "link": "https://stackoverflow.com/questions/45335870/c-overriding-virtual-function-with-different-return-type/45335911#45335911", "title": "C++ Overriding virtual function with different return type", "body": "<p>In fact, this method:</p>\n\n<pre><code>virtual tErrorCode CheckThis(int id, char something);\n</code></pre>\n\n<p>Does not override anything, because it has a different signature from this method:</p>\n\n<pre><code>virtual bool CheckThis(int id);\n</code></pre>\n\n<hr>\n\n<p>Note, that you might use the <a href=\"http://en.cppreference.com/w/cpp/language/override\" rel=\"nofollow noreferrer\"><code>override</code></a> specifier to ensure that the method in the derived class actually overrides the method of the base class.</p>\n\n<p>So, this piece of code:</p>\n\n<pre><code>class Foo {\n  protected:\n     virtual bool CheckThis(int id);\n};\n\nclass Bar : public Foo\n{\n  protected:\n     virtual tErrorCode CheckThis(int id, char something) override;\n};\n</code></pre>\n\n<p>Will not compile, but this one will:</p>\n\n<pre><code>class Foo {\n  protected:\n     virtual bool CheckThis(int id);\n};\n\nclass Bar : public Foo\n{\n  protected:\n     virtual bool CheckThis(int id) override;\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1501101297, "last_edit_date": 1501101297, "creation_date": 1501097670, "answer_id": 45335962, "question_id": 45335870, "link": "https://stackoverflow.com/questions/45335870/c-overriding-virtual-function-with-different-return-type/45335962#45335962", "title": "C++ Overriding virtual function with different return type", "body": "<blockquote>\n  <p>I thought it was not possible to override a function with a different return type?</p>\n</blockquote>\n\n<p>Yes, it is possible, but with some constraints.</p>\n\n<p>In particular, you can't use any type you want, only a <a href=\"https://en.wikipedia.org/wiki/Covariant_return_type\" rel=\"nofollow noreferrer\">covariant type</a> can be used.</p>\n\n<p>In addition, the argument types must be the same, otherwise it is not an override.</p>\n\n<p>Example:</p>\n\n<pre><code>class type1 {};\nclass type2 : public type1 {};\n\nclass Foo {\n   protected:\n      virtual type1&amp; CheckThis(int id);\n}\n\nclass Bar : public Foo\n{\n   protected:\n\n      // This is not an override, it is an overload.\n      virtual type2&amp; CheckThis(int id, char);\n\n      // This is an override.\n      virtual type2&amp; CheckThis(int id);\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 914, "user_id": 7010551, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/269c0cd9b8eec066c176f9b2c91b5c6e?s=128&d=identicon&r=PG&f=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/7010551/viktor"}, "is_accepted": false, "score": 0, "last_activity_date": 1501101115, "last_edit_date": 1501101115, "creation_date": 1501098031, "answer_id": 45336052, "question_id": 45335870, "link": "https://stackoverflow.com/questions/45335870/c-overriding-virtual-function-with-different-return-type/45336052#45336052", "title": "C++ Overriding virtual function with different return type", "body": "<p>Since C++11, you should use the special <code>override</code> keyword. It allows the compiler to check if the base class has a method for the derived class to override.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/0663233cc6969d5d\" rel=\"nofollow noreferrer\">Live example</a></p>\n\n<pre><code>class Foo \n{\n  protected:\n     virtual bool CheckThis(int id);\n}\n\nclass Bar : public Foo\n{\n  protected:\n     tErrorCode CheckThis(int id, char something) override; // error:  marked 'override', but does not override\n};\n</code></pre>\n\n<p>Moreover, since you override a base class method, the <code>virtual</code> keyword is not required in the derived class.  The base method is <code>virtual</code>, so the overriding method is implicitly <code>virtual</code>.</p>\n"}], "owner": {"reputation": 249, "user_id": 8321082, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f8c9aaffcc9327cdaff6d451f56e2200?s=128&d=identicon&r=PG&f=1", "display_name": "J Doe.", "link": "https://stackoverflow.com/users/8321082/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2047, "favorite_count": 0, "accepted_answer_id": 45335911, "answer_count": 3, "score": 1, "last_activity_date": 1520794829, "creation_date": 1501097356, "last_edit_date": 1520794829, "question_id": 45335870, "link": "https://stackoverflow.com/questions/45335870/c-overriding-virtual-function-with-different-return-type", "title": "C++ Overriding virtual function with different return type", "body": "<p>I was very surprised just now to see that this code (paraphrased) built.</p>\n\n<pre><code>class Foo\n{\n  protected:\n     virtual bool CheckThis(int id);\n}\n\nclass Bar : public Foo\n{\n  protected:\n     virtual tErrorCode CheckThis(int id, char something);\n};\n</code></pre>\n\n<p>I thought it was not possible to override a function with a different return type? Somehow this built. OS is vxworks.</p>\n"}, {"tags": ["c++", "sorting", "optimization", "big-o", "partitioning"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1501097309, "post_id": 45335797, "comment_id": 77633567, "body": "Have you tried <a href=\"http://en.cppreference.com/w/cpp/algorithm/partition\" rel=\"nofollow noreferrer\"><code>std::partition</code></a>?"}], "answers": [{"comments": [{"owner": {"reputation": 195, "user_id": 1378055, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9c346a5915b002d4bcd7f00db1795e39?s=128&d=identicon&r=PG", "display_name": "Bruce", "link": "https://stackoverflow.com/users/1378055/bruce"}, "edited": false, "score": 0, "creation_date": 1501098227, "post_id": 45335953, "comment_id": 77634114, "body": "So you mean I make a map like map&lt;MyClass, int&gt; and loop through all items and insert myclass object and label to map. Then each map represents one single item, right? It doesn&#39;t give me a collection of similar labels."}, {"owner": {"reputation": 10708, "user_id": 30997, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a6c0c77272b9aa8341becc7240179e9e?s=128&d=identicon&r=PG", "display_name": "Sniggerfardimungus", "link": "https://stackoverflow.com/users/30997/sniggerfardimungus"}, "reply_to_user": {"reputation": 195, "user_id": 1378055, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9c346a5915b002d4bcd7f00db1795e39?s=128&d=identicon&r=PG", "display_name": "Bruce", "link": "https://stackoverflow.com/users/1378055/bruce"}, "edited": false, "score": 0, "creation_date": 1501115784, "post_id": 45335953, "comment_id": 77640927, "body": "map&lt;int, vector&lt;MyClass&gt;&gt; - As you iterate through the objects, you just push each one to the back of the vector at map_of_my_class[instance.label]. If returning the map doesn&#39;t work for you, and you still want to return a vector of vectors, you could iterate through the keys in the map to generate that structure, but that&#39;s still far faster than what you&#39;re doing now, though it risks an f(n+n) runtime."}], "tags": [], "owner": {"reputation": 10708, "user_id": 30997, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a6c0c77272b9aa8341becc7240179e9e?s=128&d=identicon&r=PG", "display_name": "Sniggerfardimungus", "link": "https://stackoverflow.com/users/30997/sniggerfardimungus"}, "is_accepted": false, "score": 1, "last_activity_date": 1501106605, "last_edit_date": 1501106605, "creation_date": 1501097623, "answer_id": 45335953, "question_id": 45335797, "link": "https://stackoverflow.com/questions/45335797/optimized-way-to-partition-a-class-of-objects-based-on-an-attribute-in-c/45335953#45335953", "title": "Optimized way to partition a class of objects based on an attribute in C++", "body": "<p>Why not create a map from ints to vectors, iterate through the original vector once, adding each <code>MyClass</code> object to <code>TheMap[myclass[i].label]</code>? It takes your average runtime from <code>f(n + n*log(n))</code> to <code>f(n)</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 195, "user_id": 1378055, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9c346a5915b002d4bcd7f00db1795e39?s=128&d=identicon&r=PG", "display_name": "Bruce", "link": "https://stackoverflow.com/users/1378055/bruce"}, "edited": false, "score": 0, "creation_date": 1501100943, "post_id": 45336356, "comment_id": 77635634, "body": "Thanks for the reply. What does <code>std::make_move_iterator</code> do? Why do we need it?"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 195, "user_id": 1378055, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9c346a5915b002d4bcd7f00db1795e39?s=128&d=identicon&r=PG", "display_name": "Bruce", "link": "https://stackoverflow.com/users/1378055/bruce"}, "edited": false, "score": 0, "creation_date": 1501101077, "post_id": 45336356, "comment_id": 77635706, "body": "@Bruce it creates an iterator that calls <code>std::move</code> on the object it de-references. It means that provided you have obeyed the rules of zero, 3 or 5, then moving objects between the containers becomes extremely quick. However, you can ignore that part as its just an optimisation. The real point is that we have reduced the collation algorithm into a single pass."}, {"owner": {"reputation": 195, "user_id": 1378055, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9c346a5915b002d4bcd7f00db1795e39?s=128&d=identicon&r=PG", "display_name": "Bruce", "link": "https://stackoverflow.com/users/1378055/bruce"}, "edited": false, "score": 0, "creation_date": 1501102372, "post_id": 45336356, "comment_id": 77636392, "body": "Okay, thanks. Then you mean with the second algorithm, i don&#39;t need to sort the data beforehand? And another question is, do I need to replace <code>auto</code> with type of <code>myclass::iterator</code>? Why do you use <code>auto</code>, does it make any difference?"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 195, "user_id": 1378055, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9c346a5915b002d4bcd7f00db1795e39?s=128&d=identicon&r=PG", "display_name": "Bruce", "link": "https://stackoverflow.com/users/1378055/bruce"}, "edited": false, "score": 0, "creation_date": 1501102553, "post_id": 45336356, "comment_id": 77636507, "body": "@Bruce both algorithms are in two parts. The first is like yours, except that for the second part we are able to convert it into linear time, which is dwarfed by the cost of the sort. The second uses the fact that unordered_map lookups are constant-time and insertions are on average O(1), which is a massive win."}, {"owner": {"reputation": 195, "user_id": 1378055, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9c346a5915b002d4bcd7f00db1795e39?s=128&d=identicon&r=PG", "display_name": "Bruce", "link": "https://stackoverflow.com/users/1378055/bruce"}, "edited": false, "score": 0, "creation_date": 1501102930, "post_id": 45336356, "comment_id": 77636733, "body": "And how about <code>auto</code> should I change them to MyClass::iterator? I mean does it make any difference in the code using <code>auto</code> instead of the real type?"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 195, "user_id": 1378055, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9c346a5915b002d4bcd7f00db1795e39?s=128&d=identicon&r=PG", "display_name": "Bruce", "link": "https://stackoverflow.com/users/1378055/bruce"}, "edited": false, "score": 0, "creation_date": 1501103589, "post_id": 45336356, "comment_id": 77637069, "body": "@Bruce <code>auto</code> allows the compiler to deduce the type. This makes it much easier to code and you don&#39;t have to work it out for yourself. It&#39;s particularly helpful with template programming."}, {"owner": {"reputation": 195, "user_id": 1378055, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9c346a5915b002d4bcd7f00db1795e39?s=128&d=identicon&r=PG", "display_name": "Bruce", "link": "https://stackoverflow.com/users/1378055/bruce"}, "edited": false, "score": 0, "creation_date": 1501110155, "post_id": 45336356, "comment_id": 77639611, "body": "I tried the first algorithm, it works fine and fast, the only problem is I loose my class attributes. So in the output there is no label or other attributes of myclass objectype. For the <b>second algorithm</b>, it seems that my compiler &lt;I use mingw and gcc 4.7&gt; doesn&#39;t support <code>std::unordered_multimap</code>, so I used <code>std::multimap</code> instead. But I am getting a lot of compiling errors, for example this line <code>tmp.push_back(object_type{i-&gt;first, std::move(i-&gt;second)})</code> I am not sure to replace <code>object_type</code> with what in my template? I appreciate your input."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 195, "user_id": 1378055, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9c346a5915b002d4bcd7f00db1795e39?s=128&d=identicon&r=PG", "display_name": "Bruce", "link": "https://stackoverflow.com/users/1378055/bruce"}, "edited": false, "score": 0, "creation_date": 1501132725, "post_id": 45336356, "comment_id": 77645342, "body": "It sound like you&#39;re using an old compiler. I have assumed, since it&#39;s 2017 that you at least had c++14. The version of c++ was not marked in the question. Re the first version, I don&#39;t know all the nuances of your actual objects so you&#39;ll have to fill in the blanks yourself. The point of the answer is that you can reduce the second part of the process to linear time since the objects are all sorted."}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": true, "score": 1, "last_activity_date": 1501100392, "last_edit_date": 1501100392, "creation_date": 1501099274, "answer_id": 45336356, "question_id": 45335797, "link": "https://stackoverflow.com/questions/45335797/optimized-way-to-partition-a-class-of-objects-based-on-an-attribute-in-c/45336356#45336356", "title": "Optimized way to partition a class of objects based on an attribute in C++", "body": "<p>This algorithm should do it. I removed the templates to make it easier to check on godbolt.</p>\n\n<p>Should be easy enough to put back in.</p>\n\n<p>The O score for this method is that of std::sort - O(N.log(N))</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;string&gt;\n#include &lt;iterator&gt;\n\nstruct thing\n{\n    std::string label;\n    std::string value;\n};\n\nusing MyClass = std::vector&lt;thing&gt;;\nusing Partitions = std::vector&lt;MyClass&gt;;\n\nauto compare_labels = [](thing const&amp; l, thing const&amp; r) {\n    return l.label &lt; r.label;\n};\n\n// pass by value - we need a copy anyway and we might get copy elision\nPartitions PartitionByLabels(MyClass myclass){\n\n    /// sort MyClass items based on label number\n    std::sort(myclass.begin(), myclass.end(), compare_labels);\n\n    Partitions result;\n\n    auto first = myclass.begin();\n    auto last = myclass.end();\n\n    // because the range is sorted, we can partition it in linear time.\n    // choosing the correct algorithm is always the best optimisation\n    while (first != last) \n    {\n        auto next = std::find_if(first, last, [&amp;first](auto const&amp; x) { return x.label != first-&gt;label; });\n\n        // let's move the items - that should speed things up a little\n        // this is safe because we took a copy\n        result.push_back(MyClass(std::make_move_iterator(first), \n                                 std::make_move_iterator(next)));\n        first = next;\n    }\n\n    return result;\n}\n</code></pre>\n\n<p>We can of course do better with unordered maps, <strong>if</strong>:</p>\n\n<ul>\n<li><p>the label is hashable and equality-comparable</p></li>\n<li><p>we don't need to order the output (if we did, we'd use a multimap instead) </p></li>\n</ul>\n\n<p>&nbsp;</p>\n\n<p>The O-score for this method is linear time O(N)</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;string&gt;\n#include &lt;iterator&gt;\n#include &lt;unordered_map&gt;\n\nstruct thing\n{\n    std::string label;\n    std::string value;\n};\n\nusing MyClass = std::vector&lt;thing&gt;;\nusing Partitions = std::vector&lt;MyClass&gt;;\n\n// pass by value - we need a copy anyway and we might get copy elision\nPartitions PartitionByLabels(MyClass const&amp; myclass){\n\n    using object_type = MyClass::value_type;\n    using label_type = decltype(std::declval&lt;object_type&gt;().label);\n    using value_type = decltype(std::declval&lt;object_type&gt;().value);\n\n    std::unordered_multimap&lt;label_type, value_type&gt; inter;\n    for(auto&amp;&amp; x : myclass) {\n        inter.emplace(x.label, x.value);\n    }\n\n    Partitions result;\n\n    auto first = inter.begin();\n    auto last = inter.end();\n\n    while (first != last) \n    {\n        auto range = inter.equal_range(first-&gt;first);\n        MyClass tmp;\n        tmp.reserve(std::distance(range.first, range.second));\n        for (auto i = range.first ; i != range.second ; ++i) {\n            tmp.push_back(object_type{i-&gt;first, std::move(i-&gt;second)});\n        }\n        result.push_back(std::move(tmp));\n        first = range.second;\n    }\n\n    return result;\n}\n</code></pre>\n"}], "owner": {"reputation": 195, "user_id": 1378055, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9c346a5915b002d4bcd7f00db1795e39?s=128&d=identicon&r=PG", "display_name": "Bruce", "link": "https://stackoverflow.com/users/1378055/bruce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 45336356, "answer_count": 2, "score": 0, "last_activity_date": 1501106605, "creation_date": 1501097114, "question_id": 45335797, "link": "https://stackoverflow.com/questions/45335797/optimized-way-to-partition-a-class-of-objects-based-on-an-attribute-in-c", "title": "Optimized way to partition a class of objects based on an attribute in C++", "body": "<p>I have a class that has million of items and each item has a <strong>label</strong> of type <strong>int</strong>. I need to partition items based on their similar labels, so at the end I return a <code>vector&lt;MyClass&gt;</code>. First, I sort all items based on their label. Then, in a for loop I compare each label value with previous one and if its the same I store it in a <code>myclass_temp</code> until <code>label != previous_label</code>. If <code>label != previous_label</code> I add this <code>myclass_temp</code> to the <code>vector&lt;MyClass&gt;</code>, and I erase <code>myclass_temp</code>. I think the code is self-explained. \nThe program works fine, but it is slow, is there a better way to speed it up? I believe because I sort the items in the beginning, there should be a faster way to simply partition items with similar labels.</p>\n\n<p>Second question is how to calculate O score for this algorithm and any suggested faster solution?\nplease feel free to correct my code.</p>\n\n<pre><code> vector &lt;MyClass&gt; PartitionByLabels(MyClass &amp;myclass){\n\n    /// sort MyClass items based on label number\n    printf (\"Sorting items by label number... \\n\");\n    std::sort(myclass.begin(), myclass.end(), compare_labels);\n\n    vector &lt;MyClass&gt; myClasses_vec;\n    MyClass myclass_temp;\n\n    int previous_label=0, label=0;\n    int total_items;\n\n    /// partition myclass items based on similar labels\n    for (int i=0; i &lt; myclass.size(); i++){\n\n        label = myclass[i].label;\n        if (label == previous_label){\n            myclass_temp.push_back(myclass[i]);\n            previous_label = label;\n\n            /// add the last similar items\n            if (i == myclass.size()-1){\n                myClasses_vec.push_back(myclass_temp);\n                total_items +=myclass_temp.size();\n            }\n        } else{\n            myClasses_vec.push_back(myclass_temp);\n            total_items +=myclass_temp.size();\n\n            myclass_temp.EraseItems();\n            myclass_temp.push_back(myclass[i]);\n            previous_label = label;\n        }\n    }\n\n    printf(\"Total number of items: %d \\n\", total_items);\n    return myClasses_vec;\n}\n</code></pre>\n"}, {"tags": ["c++", "image", "opencv", "image-processing"], "comments": [{"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1501099043, "post_id": 45335691, "comment_id": 77634577, "body": "Use <code>lowThresh</code> and <code>highThresh</code> as a mask with <a href=\"http://docs.opencv.org/2.4/modules/core/doc/basic_structures.html#mat-setto\" rel=\"nofollow noreferrer\"><code>cv::Mat::setTo</code></a>"}], "answers": [{"tags": [], "owner": {"reputation": 399, "user_id": 1195803, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/32670f69f6e90a59c1828eec8ece8150?s=128&d=identicon&r=PG", "display_name": "justynnuff", "link": "https://stackoverflow.com/users/1195803/justynnuff"}, "is_accepted": true, "score": 0, "last_activity_date": 1501109496, "creation_date": 1501109496, "answer_id": 45338692, "question_id": 45335691, "link": "https://stackoverflow.com/questions/45335691/change-rgb-value-of-pixel-based-on-threshold-opencv-c/45338692#45338692", "title": "Change RGB value of pixel based on threshold OpenCV C++", "body": "<p>This worked.</p>\n\n<pre><code>cvtColor(displayImage, displayImage, COLOR_GRAY2BGR);\norigImage = displayImage.clone();\n\nthreshold(origImage, highThresh, highThreshVal, 255, 0); // Binary thresholding\ncvtColor(highThresh, highThresh, CV_BGR2GRAY);\ndisplayImage.setTo(Scalar(0, 0, 255), highThresh);\n\nthreshold(origImage, lowThresh, lowThreshVal, 255, 1); // Binary thresholding\ncvtColor(lowThresh, lowThresh, CV_BGR2GRAY);\ndisplayImage.setTo(Scalar(255, 0, 0), lowThresh);\n</code></pre>\n"}], "owner": {"reputation": 399, "user_id": 1195803, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/32670f69f6e90a59c1828eec8ece8150?s=128&d=identicon&r=PG", "display_name": "justynnuff", "link": "https://stackoverflow.com/users/1195803/justynnuff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 349, "favorite_count": 0, "accepted_answer_id": 45338692, "answer_count": 1, "score": 0, "last_activity_date": 1501109496, "creation_date": 1501096739, "question_id": 45335691, "link": "https://stackoverflow.com/questions/45335691/change-rgb-value-of-pixel-based-on-threshold-opencv-c", "title": "Change RGB value of pixel based on threshold OpenCV C++", "body": "<p>I have an image in which pixels above a certain value I'd like to turn red, and pixels below a certain value I'd like to turn blue.</p>\n\n<p>So far, I can get a matrix of red pixels, and a matrix of blue pixels by using thresholding, and bitwise operators to set the pixel value:</p>\n\n<pre><code>cvtColor(displayImage, displayImage, COLOR_GRAY2BGR);\n\nthreshold(displayImage, highThresh, highThreshVal, 255, 0);\nhighThresh = highThresh &amp; Scalar(0, 0, 255); // Turn it red\n\nthreshold(displayImage, lowThresh, lowThreshVal, 255, 1);\nlowThresh = lowThresh &amp; Scalar(255, 0, 0); // Turn it blue\n\ndisplayImage = lowThresh + highThresh;\n</code></pre>\n\n<p>When I display the <code>displayImage</code>, I see almost exactly what I want.  It's an image where all the pixels below <code>lowThreshVal</code> are blue, and all pixels above <code>highThreshVal</code> are red.  However, the pixels that are in between these values are all set to 0.  Whereas, I would like to show the original image overlayed with the blue and red images.  I'm not sure how to do this, or if I'm taking the best approach.</p>\n\n<p>I know I can't add the images because I want to make sure every pixel above the threshold is pure red, not a mix of red and the original image, this yields pink-ish pixels instead of bright red pixels, which defeats the purpose of what I'm trying to build.  But as of right now, I'm kind of stuck on what to do.</p>\n"}, {"tags": ["c++", "bitmap", "wxwidgets"], "comments": [{"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1501098893, "post_id": 45335663, "comment_id": 77634491, "body": "Weird. Which wxWidgets version? In order to find out wether the culprit is the bitmap, copy a working bitmap (e.g. &quot;new.bmp&quot;) and rename it (&quot;close.bmp&quot;)."}, {"owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 0, "creation_date": 1501099395, "post_id": 45335663, "comment_id": 77634774, "body": "@MaazAzeem, did you call InitAllImageHandlers()?"}], "answers": [{"tags": [], "owner": {"reputation": 49, "user_id": 7300599, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f59230043e14296594183b687c47b3a?s=128&d=identicon&r=PG&f=1", "display_name": "Maaz Azeem", "link": "https://stackoverflow.com/users/7300599/maaz-azeem"}, "is_accepted": true, "score": 0, "last_activity_date": 1501100392, "creation_date": 1501100392, "answer_id": 45336664, "question_id": 45335663, "link": "https://stackoverflow.com/questions/45335663/using-bitmaps-from-resource-file/45336664#45336664", "title": "Using bitmaps from resource file", "body": "<p>So I was able to resolve the issue. The code does not seem to be an issue. It is the bitmap file format. Im not exactly sure why it makes a difference but I was editing photo sizes from GIMP, and I would get issues. The same images if I resize using FastStone image viewer it seems to work right.</p>\n"}], "owner": {"reputation": 49, "user_id": 7300599, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f59230043e14296594183b687c47b3a?s=128&d=identicon&r=PG&f=1", "display_name": "Maaz Azeem", "link": "https://stackoverflow.com/users/7300599/maaz-azeem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 338, "favorite_count": 0, "accepted_answer_id": 45336664, "answer_count": 1, "score": 0, "last_activity_date": 1501100392, "creation_date": 1501096643, "question_id": 45335663, "link": "https://stackoverflow.com/questions/45335663/using-bitmaps-from-resource-file", "title": "Using bitmaps from resource file", "body": "<p>I have a toolbar that uses bitmap images. Im using the generic bitmaps from the sample file, and they work perfectly fine.</p>\n\n<p>However when I try to add a new bitmap icon for this instance its close.bmp (it is also correctly sized 16x15 px just like all the other icons) my program gives me errors.</p>\n\n<p>I just need to know how to use bitmaps from a resource file </p>\n\n<p>errors</p>\n\n<pre><code>../../src/msw/toolbar.cpp(799): assert \"Assert Failure\" failed in \nRealize():invalid tool button bitmap\n\nCant load bitmap 'close' from resources! Check.rc file.\n</code></pre>\n\n<p>resource .rc</p>\n\n<pre><code>new BITMAP \"bitmaps/new.bmp\"\nopen BITMAP \"bitmaps/open.bmp\"\nsave BITMAP \"bitmaps/save.bmp\"\nhelp BITMAP \"bitmaps/help.bmp\"\nclose BITMAP \"bitmaps/close.bmp\"\n</code></pre>\n\n<p>.cpp</p>\n\n<pre><code>{\n    // Set up toolbar\n    enum\n    {\n        Tool_new,\n        Tool_open,\n        Tool_save,\n        Tool_help,\n        Tool_close,\n        Tool_Max\n    };\n\n    wxBitmap toolBarBitmaps[Tool_Max];\n\n#if USE_XPM_BITMAPS\n    #define INIT_TOOL_BMP(bmp) \\\n        toolBarBitmaps[Tool_##bmp] = wxBitmap(bmp##_xpm)\n#else // !USE_XPM_BITMAPS\n    #define INIT_TOOL_BMP(bmp) \\\n        toolBarBitmaps[Tool_##bmp] = wxBITMAP(bmp)\n#endif // USE_XPM_BITMAPS/!USE_XPM_BITMAPS\n\n\n\n    INIT_TOOL_BMP(new);\n    INIT_TOOL_BMP(open);\n    INIT_TOOL_BMP(save);\n    INIT_TOOL_BMP(help);\n    INIT_TOOL_BMP(close);\n\n    toolBar-&gt;AddTool(wxID_ANY, wxT(\"New\"), toolBarBitmaps[Tool_new], wxNullBitmap, wxITEM_NORMAL, wxT(\"New IWEX Project\"));\n    toolBar-&gt;AddTool(wxID_ANY, wxT(\"Open\"), toolBarBitmaps[Tool_open], wxNullBitmap,wxITEM_NORMAL , wxT(\"Open IWEX Project\"));\n    toolBar-&gt;AddTool(idFileClose, wxT(\"Close\"), toolBarBitmaps[Tool_close], wxT(\"Close button\"), wxITEM_NORMAL);\n\n    toolBar-&gt;Realize();\n\n}\n</code></pre>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 8313, "user_id": 7621674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/323bed98b2e655d5fa9ac6d23a72b995?s=128&d=identicon&r=PG", "display_name": "m7913d", "link": "https://stackoverflow.com/users/7621674/m7913d"}, "edited": false, "score": 0, "creation_date": 1501096620, "post_id": 45335612, "comment_id": 77633195, "body": "It is better to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> than linking to your complete source code."}, {"owner": {"reputation": 6940, "user_id": 1559401, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/t9DjW.jpg?s=128&g=1", "display_name": "rbaleksandar", "link": "https://stackoverflow.com/users/1559401/rbaleksandar"}, "edited": false, "score": 0, "creation_date": 1501096985, "post_id": 45335612, "comment_id": 77633387, "body": "The link you&#39;ve provided doesn&#39;t tell us anything about the <code>pro</code> file. Such error typically occurs when you just don&#39;t link against the respective lib. Just because you have the includes doesn&#39;t mean that the building process will succeed."}, {"owner": {"reputation": 812, "user_id": 5101446, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/0qRHT.jpg?s=128&g=1", "display_name": "Nicholas Johnson", "link": "https://stackoverflow.com/users/5101446/nicholas-johnson"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1501097047, "post_id": 45335612, "comment_id": 77633419, "body": "@eyllanesc .pro file added."}, {"owner": {"reputation": 812, "user_id": 5101446, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/0qRHT.jpg?s=128&g=1", "display_name": "Nicholas Johnson", "link": "https://stackoverflow.com/users/5101446/nicholas-johnson"}, "reply_to_user": {"reputation": 6940, "user_id": 1559401, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/t9DjW.jpg?s=128&g=1", "display_name": "rbaleksandar", "link": "https://stackoverflow.com/users/1559401/rbaleksandar"}, "edited": false, "score": 0, "creation_date": 1501097063, "post_id": 45335612, "comment_id": 77633432, "body": "@rbaleksandar .pro file added."}, {"owner": {"reputation": 812, "user_id": 5101446, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/0qRHT.jpg?s=128&g=1", "display_name": "Nicholas Johnson", "link": "https://stackoverflow.com/users/5101446/nicholas-johnson"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1501097643, "post_id": 45335612, "comment_id": 77633790, "body": "@eyllanesc i added all of the separate projects"}, {"owner": {"reputation": 812, "user_id": 5101446, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/0qRHT.jpg?s=128&g=1", "display_name": "Nicholas Johnson", "link": "https://stackoverflow.com/users/5101446/nicholas-johnson"}, "edited": false, "score": 0, "creation_date": 1501098215, "post_id": 45335612, "comment_id": 77634111, "body": "Windows 10 - 32bit"}, {"owner": {"reputation": 812, "user_id": 5101446, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/0qRHT.jpg?s=128&g=1", "display_name": "Nicholas Johnson", "link": "https://stackoverflow.com/users/5101446/nicholas-johnson"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1501098341, "post_id": 45335612, "comment_id": 77634188, "body": "@eyllanesc MSVC 2015 - 32bit"}, {"owner": {"reputation": 812, "user_id": 5101446, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/0qRHT.jpg?s=128&g=1", "display_name": "Nicholas Johnson", "link": "https://stackoverflow.com/users/5101446/nicholas-johnson"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1501098359, "post_id": 45335612, "comment_id": 77634202, "body": "@eyllanesc and I apologize. I meant to say Windows 10 - 64bit"}, {"owner": {"reputation": 812, "user_id": 5101446, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/0qRHT.jpg?s=128&g=1", "display_name": "Nicholas Johnson", "link": "https://stackoverflow.com/users/5101446/nicholas-johnson"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1501098683, "post_id": 45335612, "comment_id": 77634374, "body": "@eyllanesc I added my widget libraries to my pro file. What are you referencing?"}, {"owner": {"reputation": 812, "user_id": 5101446, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/0qRHT.jpg?s=128&g=1", "display_name": "Nicholas Johnson", "link": "https://stackoverflow.com/users/5101446/nicholas-johnson"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1501099115, "post_id": 45335612, "comment_id": 77634615, "body": "@eyllanesc Correct! I can place it and everything in the designer. Just doesnt run the due to the stated error even after a clean all + qmake."}, {"owner": {"reputation": 812, "user_id": 5101446, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/0qRHT.jpg?s=128&g=1", "display_name": "Nicholas Johnson", "link": "https://stackoverflow.com/users/5101446/nicholas-johnson"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1501104543, "post_id": 45335612, "comment_id": 77637505, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/150232/discussion-between-nicholas-johnson-and-eyllanesc\">continue this discussion in chat</a>."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1501399766, "post_id": 45335612, "comment_id": 77755484, "body": "@NicholasJohnson How did it go?"}, {"owner": {"reputation": 812, "user_id": 5101446, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/0qRHT.jpg?s=128&g=1", "display_name": "Nicholas Johnson", "link": "https://stackoverflow.com/users/5101446/nicholas-johnson"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1501448219, "post_id": 45335612, "comment_id": 77769423, "body": "@eyllanesc I would like to talk a bit more to finish off the project."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1501448425, "post_id": 45335612, "comment_id": 77769483, "body": "What is missing from your project?"}, {"owner": {"reputation": 812, "user_id": 5101446, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/0qRHT.jpg?s=128&g=1", "display_name": "Nicholas Johnson", "link": "https://stackoverflow.com/users/5101446/nicholas-johnson"}, "edited": false, "score": 0, "creation_date": 1501448442, "post_id": 45335612, "comment_id": 77769488, "body": "I didn&#39;t get to have you follow up after the restart of my machine."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1501448550, "post_id": 45335612, "comment_id": 77769522, "body": "Pass me your teamviewer credentials via chat"}], "owner": {"reputation": 812, "user_id": 5101446, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/0qRHT.jpg?s=128&g=1", "display_name": "Nicholas Johnson", "link": "https://stackoverflow.com/users/5101446/nicholas-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1501097627, "creation_date": 1501096493, "last_edit_date": 1501097627, "question_id": 45335612, "link": "https://stackoverflow.com/questions/45335612/qt-widget-in-designer-but-still-getting-errors", "title": "Qt Widget In Designer but still getting errors", "body": "<p>I have made a custom widget + plugin and implemented it into my Qt Designer. From there I then linked the <code>*.lib</code> file into my test application. Error: </p>\n\n<blockquote>\n  <p>mainwindow.obj:-1: error: LNK2019: unresolved external symbol \"public: __thiscall GLineEdit::GLineEdit(class QWidget *)\" (??0GLineEdit@@QAE@PAVQWidget@@@Z) referenced in function \"public: void __thiscall Ui_MainWindow::setupUi(class QMainWindow *)\" (?setupUi@Ui_MainWindow@@QAEXPAVQMainWindow@@@Z)</p>\n</blockquote>\n\n<p>which doesnt make much sense as I have the correct includes in my the <code>setupUi()</code> function. Here is the relevant source code of the projects:</p>\n\n<p><a href=\"https://gist.github.com/NickJohn547745/f3425f0801837ea3b43b607cb50e9e8a\" rel=\"nofollow noreferrer\">Widget Project</a></p>\n\n<p><a href=\"https://gist.github.com/NickJohn547745/70e9b8127d60503ed0edca1dc7c9de8c\" rel=\"nofollow noreferrer\">Plugin Project</a></p>\n\n<p><a href=\"https://gist.github.com/NickJohn547745/b9bed32f668013edfddbc898bb8b3783\" rel=\"nofollow noreferrer\">Temporary Project</a></p>\n"}, {"tags": ["c++", "qt", "exe"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1501096357, "post_id": 45335551, "comment_id": 77633053, "body": "read this: <a href=\"http://doc.qt.io/qt-5/windows-deployment.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/windows-deployment.html</a>"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1501096451, "post_id": 45335551, "comment_id": 77633101, "body": "The problem is caused by the dlls of the Qt library, I recommend you to look for the windeployqt utility, then open a cmd in the folder of your executable, and execute: <code>path&#47;of&#47;windeployqt.exe .</code>"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1501096496, "post_id": 45335551, "comment_id": 77633122, "body": "Look at that point after windeployqt.exe is important."}], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 8357772, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212975601407430/picture?type=large", "display_name": "Giorgio Di Rocco", "link": "https://stackoverflow.com/users/8357772/giorgio-di-rocco"}, "edited": false, "score": 0, "creation_date": 1501098737, "post_id": 45336024, "comment_id": 77634417, "body": "unfortunally when i run the .exe the error message says: &quot;...searching for reason&quot; and after some minutes it asks to me to open visual studio debbugger"}], "tags": [], "owner": {"reputation": 522, "user_id": 8304478, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/6ed0a9fc607629b57235f0556f000fe7?s=128&d=identicon&r=PG&f=1", "display_name": "CrippledTable", "link": "https://stackoverflow.com/users/8304478/crippledtable"}, "is_accepted": false, "score": 0, "last_activity_date": 1501097938, "creation_date": 1501097938, "answer_id": 45336024, "question_id": 45335551, "link": "https://stackoverflow.com/questions/45335551/from-visual-studio-project-to-file-exe-qt/45336024#45336024", "title": "From Visual Studio project to file .exe (Qt)", "body": "<p>But if eyllanesc's answer isn't working for you, you can usually find the missing .dll's from trial and error i.e. when you try to launch the .exe file it probable tells you some library is missing. If you keep copying and pasting each library into the same folder as the .exe file, your app will eventually run (after you've added the correct library that your .exe is asking for it will ask for another one, upon trying to execute the file, until you have added all of them). I'm not familiar with the visual studios version of qt, so I'm not sure which directory your .dll's will be under. For me it is /Qt/version/Mingw<em>version</em>/bin/ . But that is while using the mingw default kit. For vs's I believe it will be C:\\Qt\\Qt5.9.1\\5.9.1\\winrt_x64_msvc2017\\bin with the relevant version numbers.</p>\n"}], "owner": {"reputation": 109, "user_id": 8357772, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212975601407430/picture?type=large", "display_name": "Giorgio Di Rocco", "link": "https://stackoverflow.com/users/8357772/giorgio-di-rocco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2527, "favorite_count": 0, "closed_date": 1501102484, "answer_count": 1, "score": 1, "last_activity_date": 1501097938, "creation_date": 1501096281, "last_edit_date": 1501097537, "question_id": 45335551, "link": "https://stackoverflow.com/questions/45335551/from-visual-studio-project-to-file-exe-qt", "closed_reason": "Duplicate", "title": "From Visual Studio project to file .exe (Qt)", "body": "<p>I have already finished a Qt Application (cheekers game). I would that my work could run on others PC and out of Visual Studio like a commercial app. I already found the file .exe that is in the directory \"Realese\" but it doesn't work. What I have to do?</p>\n\n<p>using cmd I have this, but it still doesn't run</p>\n\n<p>C:\\Users\\Giorgio>c:/Qt/5.5/msvc2012/bin/windeployqt.exe Desktop/Progetto_Dama/progetto/Release/dama.exe\nC:\\Users\\Giorgio\\Desktop\\Progetto_Dama\\progetto\\Release\\dama.exe 32 bit, release executable</p>\n\n<p>Adding Qt5Svg for qsvgicon.dll</p>\n\n<p>Direct dependencies: Qt5Core Qt5Gui Qt5Widgets</p>\n\n<p>All dependencies   : Qt5Core Qt5Gui Qt5Widgets</p>\n\n<p>To be deployed     : Qt5Core Qt5Gui Qt5Svg Qt5Widgets</p>\n\n<p>Warning: Cannot find Visual Studio installation directory, VCINSTALLDIR is not set.</p>\n\n<p>Updating Qt5Core.dll.</p>\n\n<p>Updating Qt5Gui.dll.</p>\n\n<p>Updating Qt5Svg.dll.</p>\n\n<p>Updating Qt5Widgets.dll.</p>\n\n<p>Updating libGLESV2.dll.</p>\n\n<p>Updating libEGL.dll.</p>\n\n<p>Updating D3Dcompiler_46.dll.</p>\n\n<p>Updating opengl32sw.dll.Patching Qt5Core.dll...Creating directory iconengines.</p>\n\n<p>Updating qsvgicon.dll.</p>\n\n<p>Creating directory imageformats.</p>\n\n<p>Updating qdds.dll.</p>\n\n<p>Updating qgif.dll.</p>\n\n<p>Updating qicns.dll.</p>\n\n<p>Updating qico.dll.</p>\n\n<p>Updating qjp2.dll.</p>\n\n<p>Updating qjpeg.dll.</p>\n\n<p>Updating qmng.dll.</p>\n\n<p>Updating qsvg.dll.</p>\n\n<p>Updating qtga.dll.</p>\n\n<p>Updating qtiff.dll.</p>\n\n<p>Updating qwbmp.dll.</p>\n\n<p>Updating qwebp.dll.</p>\n\n<p>Creating directory platforms.</p>\n\n<p>Updating qwindows.dll.</p>\n\n<p>Creating C:\\Users\\Giorgio\\Desktop\\Progetto_Dama\\progetto\\Release\\translations...</p>\n\n<p>Creating qt_ca.qm...</p>\n\n<p>Creating qt_cs.qm...</p>\n\n<p>Creating qt_de.qm...</p>\n\n<p>Creating qt_en.qm...</p>\n\n<p>Creating qt_fi.qm...</p>\n\n<p>Creating qt_fr.qm...</p>\n\n<p>Creating qt_he.qm...</p>\n\n<p>Creating qt_hu.qm...</p>\n\n<p>Creating qt_it.qm...</p>\n\n<p>Creating qt_ja.qm...</p>\n\n<p>Creating qt_ko.qm...</p>\n\n<p>Creating qt_lv.qm...</p>\n\n<p>Creating qt_ru.qm...</p>\n\n<p>Creating qt_sk.qm...</p>\n\n<p>Creating qt_uk.qm...</p>\n"}, {"tags": ["c++", "linker"], "comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1501106268, "post_id": 45335499, "comment_id": 77638202, "body": "Easiest way to discover what your toolchain does is by creating ctors which print <code>(void*)this</code> to <code>std::cout</code>."}], "answers": [{"comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1501105441, "post_id": 45335577, "comment_id": 77637861, "body": "While there&#39;s not a single untrue statement here, it seems rather irrelevant. The linker is run twice here."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1501105687, "post_id": 45335577, "comment_id": 77637960, "body": "@MSalters That was not my understanding."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1501105748, "post_id": 45335577, "comment_id": 77637983, "body": "once for the executable and once for libShared.so?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1501105899, "post_id": 45335577, "comment_id": 77638054, "body": "@MSalters But isn&#39;t he asking about initialisations in the static library: &quot;Naturally the right approach is to have libFoo.a not do anything like create visible side-effects in its static initializers&quot;. My answer is obviously about static libraries, not DLLs."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1501106076, "post_id": 45335577, "comment_id": 77638115, "body": "<i>but let&#39;s assume that ship has sailed...</i> - he indeed is. That&#39;s why my answer describes the typical implementation of those initializers, and how they&#39;re called twice."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1501106458, "post_id": 45335577, "comment_id": 77638283, "body": "@MSalters If the static object was constructed in a DLL or executable, I would agree with you, but I don&#39;t see from the question that this is the case. The OP is explicitly asking &quot;I have a library foo [from the rest of the question this is a static library] that has some static initialization code in it&quot;."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1501106589, "post_id": 45335577, "comment_id": 77638344, "body": "True, and this library is passed to the linker. Twice, for two outputs. And all linkers I know can pick up initializers from static libraries."}, {"owner": {"reputation": 7171, "user_id": 2827, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/25bc77390deb15bc33773d523c33e2cf?s=128&d=identicon&r=PG", "display_name": "HenryR", "link": "https://stackoverflow.com/users/2827/henryr"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1501265527, "post_id": 45335577, "comment_id": 77721317, "body": "@MSalters - you&#39;re right. The problem is a library statically linked into both a shared library, and the root executable. Thanks for both your answers."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "is_accepted": false, "score": 0, "last_activity_date": 1501096368, "creation_date": 1501096368, "answer_id": 45335577, "question_id": 45335499, "link": "https://stackoverflow.com/questions/45335499/c-link-library-twice-are-global-constructors-run-twice/45335577#45335577", "title": "C++: link library twice, are global constructors run twice?", "body": "<p>Static libraries are simply concatenations of object files - there is no code in them to run the constructors of static objects, unless you explicitly provide such code. So static objects in a static library will not have constructors be run twice, or possibly even once. Also, because of the way that static libraries are searched by most linkers, it is a very common practice to link to them multiple times.</p>\n"}, {"tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": true, "score": 3, "last_activity_date": 1501106176, "last_edit_date": 1501106176, "creation_date": 1501105705, "answer_id": 45338019, "question_id": 45335499, "link": "https://stackoverflow.com/questions/45335499/c-link-library-twice-are-global-constructors-run-twice/45338019#45338019", "title": "C++: link library twice, are global constructors run twice?", "body": "<p>Yes, the constructors will be run twice. When you build an executable or shared library, a helper method is created which enumerates all globals to be constructed and calls their initializers (other methods are allowed by ISO C++, but not used for systems with shared libraries). These helpers are called when the executable and shared library are loaded.</p>\n\n<p>Now you happen to have two such methods initializing two distinct parts of memory. That creates two objects, and their addresses will differ.</p>\n\n<p>This would have been different if the executable only had an <code>extern</code> declaration of the global, but obviously it can't - it uses the same static library.</p>\n\n<p>PS. Destructors for global object have their own helper method, working roughly the same.</p>\n"}], "owner": {"reputation": 7171, "user_id": 2827, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/25bc77390deb15bc33773d523c33e2cf?s=128&d=identicon&r=PG", "display_name": "HenryR", "link": "https://stackoverflow.com/users/2827/henryr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 227, "favorite_count": 0, "accepted_answer_id": 45338019, "answer_count": 2, "score": 3, "last_activity_date": 1501106176, "creation_date": 1501096096, "question_id": 45335499, "link": "https://stackoverflow.com/questions/45335499/c-link-library-twice-are-global-constructors-run-twice", "title": "C++: link library twice, are global constructors run twice?", "body": "<p>If I have a library foo that has some static initialization code in it, and a linking situation as follows: </p>\n\n<pre><code> executable -&gt; libShared.so (dynamic linking)\n executable -&gt; libFoo.a (static linking)\n libShared.so -&gt; libFoo.a (static linking)\n</code></pre>\n\n<p>Does this result in the static initialization code being run twice - and if it has side-effects, possibly doing two different visible things? </p>\n\n<p>libShared.so has done the right thing by only exporting its own symbols, and not exporting any of libFoo.a. But there are two copies of libFoo.a in the process, effectively namespaced away from one another. Is my understanding right - there'll be a duplicate initialization step?</p>\n\n<p>(Naturally the right approach is to have libFoo.a not do anything like create visible side-effects in its static initializers, but let's assume that ship has sailed...).</p>\n"}, {"tags": ["c++", "visual-studio-2015", "c++17"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1501096284, "post_id": 45335497, "comment_id": 77633008, "body": "What happened when you tried it?"}, {"owner": {"reputation": 1714, "user_id": 7404323, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/jYEFn.png?s=128&g=1", "display_name": "sailfish009", "link": "https://stackoverflow.com/users/7404323/sailfish009"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1501119776, "post_id": 45335497, "comment_id": 77641894, "body": "@PeteBecker : fatal error C1083: Cannot open include file: &#39;any&#39;: No such file or directory"}], "answers": [{"comments": [{"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1501109880, "post_id": 45335583, "comment_id": 77639534, "body": "Correct. <code>&lt;any&gt;</code> is part of the C++17 draft, not C++11 or C++14."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 7, "last_activity_date": 1501096379, "creation_date": 1501096379, "answer_id": 45335583, "question_id": 45335497, "link": "https://stackoverflow.com/questions/45335497/access-to-stdany-in-vs2015/45335583#45335583", "title": "Access to std::any in VS2015", "body": "<p>No, you cannot use <code>&lt;any&gt;</code> in MSVS 2015.  According to the matrix on <a href=\"https://blogs.msdn.microsoft.com/vcblog/2017/05/10/c17-features-in-vs-2017-3/\" rel=\"noreferrer\">this blog post</a> <code>&lt;any&gt;</code> is not available until MSVS 2017</p>\n"}, {"tags": [], "owner": {"reputation": 1219, "user_id": 1570382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5df4ccca14f01074d08aad327208b5b?s=128&d=identicon&r=PG", "display_name": "SergV", "link": "https://stackoverflow.com/users/1570382/sergv"}, "is_accepted": false, "score": 0, "last_activity_date": 1501410842, "creation_date": 1501410842, "answer_id": 45398880, "question_id": 45335497, "link": "https://stackoverflow.com/questions/45335497/access-to-stdany-in-vs2015/45398880#45398880", "title": "Access to std::any in VS2015", "body": "<p>You can use <a href=\"http://www.boost.org/doc/libs/1_64_0/doc/html/any.html\" rel=\"nofollow noreferrer\">boost::any</a> with a lot of compilers. MSVC 2015 is in the compatibility list. boost::any is header only library and quite stable.</p>\n"}], "owner": {"reputation": 516, "user_id": 2118290, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/bFB3H.gif?s=128&g=1", "display_name": "Steven Venham", "link": "https://stackoverflow.com/users/2118290/steven-venham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 633, "favorite_count": 0, "accepted_answer_id": 45335583, "answer_count": 2, "score": 1, "last_activity_date": 1501410842, "creation_date": 1501096085, "question_id": 45335497, "link": "https://stackoverflow.com/questions/45335497/access-to-stdany-in-vs2015", "title": "Access to std::any in VS2015", "body": "<p>Is there any way to gain access to the:</p>\n\n<pre><code>#include &lt;any&gt;\n</code></pre>\n\n<p>library in visual studios 2015? </p>\n\n<p>Or am I going to have to upgrade to VS2017 for C++17 support.</p>\n"}, {"tags": ["c++", "windows", "winapi", "portable-executable"], "comments": [{"owner": {"reputation": 1075, "user_id": 5377688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NpeXm.png?s=128&g=1", "display_name": "byteptr", "link": "https://stackoverflow.com/users/5377688/byteptr"}, "edited": false, "score": 1, "creation_date": 1501124446, "post_id": 45335427, "comment_id": 77642973, "body": "Its important to keep in mind ASLR will also be disabled regardless of the contents of DllCharacteristics <i>IF</i> the module is missing a .reloc section.  See Raymond Chen&#39;s blog for more info: <a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20170607-00/?p=96295\" rel=\"nofollow noreferrer\">blogs.msdn.microsoft.com/oldnewthing/20170607-00/?p=96295</a>"}, {"owner": {"reputation": 61, "user_id": 7361605, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gOhCi.jpg?s=128&g=1", "display_name": "CPunkh", "link": "https://stackoverflow.com/users/7361605/cpunkh"}, "reply_to_user": {"reputation": 1075, "user_id": 5377688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NpeXm.png?s=128&g=1", "display_name": "byteptr", "link": "https://stackoverflow.com/users/5377688/byteptr"}, "edited": false, "score": 0, "creation_date": 1501184502, "post_id": 45335427, "comment_id": 77680736, "body": "Thanks @byteptr, I didn&#39;t know that!"}], "answers": [{"comments": [{"owner": {"reputation": 30603, "user_id": 27491, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/48cc12ad73f816bc5b115a9ca6965328?s=128&d=identicon&r=PG", "display_name": "Chris Becke", "link": "https://stackoverflow.com/users/27491/chris-becke"}, "edited": false, "score": 0, "creation_date": 1501146899, "post_id": 45335458, "comment_id": 77653836, "body": "Noting that with a lot of bitflags that are themselves a composition of simpler flags (or an bitmasked enum) you actually need to &amp; (with a mask) and then ALSO test for equality."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 30603, "user_id": 27491, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/48cc12ad73f816bc5b115a9ca6965328?s=128&d=identicon&r=PG", "display_name": "Chris Becke", "link": "https://stackoverflow.com/users/27491/chris-becke"}, "edited": false, "score": 0, "creation_date": 1501147375, "post_id": 45335458, "comment_id": 77654200, "body": "@ChrisBecke - yes, but in case simply flag (exactly one bit) enough just <code>&amp;</code>"}], "tags": [], "owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "is_accepted": true, "score": 5, "last_activity_date": 1501096937, "last_edit_date": 1501096937, "creation_date": 1501095963, "answer_id": 45335458, "question_id": 45335427, "link": "https://stackoverflow.com/questions/45335427/comparing-word-characteristics/45335458#45335458", "title": "Comparing WORD characteristics", "body": "<p><code>DllCharacteristics</code> is a bitmask, it can contain multiple flags enabled. Your check must use the bitwise <code>&amp;</code> operator instead of the <code>==</code> operator:</p>\n\n<pre><code>if (PE.FileHeader-&gt;OptionalHeader.DllCharacteristics &amp; IMAGE_DLLCHARACTERISTICS_DYNAMIC_BASE)\n    std::cout &lt;&lt; \"ASLR is enabled :)\" &lt;&lt; std::endl;\nelse\n    std::cout &lt;&lt; \"ASLR is disabled &gt;:(\" &lt;&lt; std::endl;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 121, "user_id": 9105976, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pYLeB.jpg?s=128&g=1", "display_name": "Nishikant Mokashi", "link": "https://stackoverflow.com/users/9105976/nishikant-mokashi"}, "is_accepted": false, "score": 1, "last_activity_date": 1513401325, "creation_date": 1513401325, "answer_id": 47842729, "question_id": 45335427, "link": "https://stackoverflow.com/questions/45335427/comparing-word-characteristics/47842729#47842729", "title": "Comparing WORD characteristics", "body": "<p>Found it working by below way in case of multibit flags IMAGE_DLLCHARACTERISTICS_TERMINAL_SERVER_AWARE is highest bit in DllCharacteristics :</p>\n\n<pre><code>if (PE.FileHeader-&gt;OptionalHeader.DllCharacteristics &amp; \n    (IMAGE_DLLCHARACTERISTICS_DYNAMIC_BASE|\n     IMAGE_DLLCHARACTERISTICS_TERMINAL_SERVER_AWARE) == \n    IMAGE_DLLCHARACTERISTICS_DYNAMIC_BASE)\n    std::cout &lt;&lt; \"ASLR is enabled :)\" &lt;&lt; std::endl;\nelse\n    std::cout &lt;&lt; \"ASLR is disabled &gt;:(\" &lt;&lt; std::endl;\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 7361605, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gOhCi.jpg?s=128&g=1", "display_name": "CPunkh", "link": "https://stackoverflow.com/users/7361605/cpunkh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 45335458, "answer_count": 2, "score": -1, "last_activity_date": 1513401325, "creation_date": 1501095853, "last_edit_date": 1501103835, "question_id": 45335427, "link": "https://stackoverflow.com/questions/45335427/comparing-word-characteristics", "title": "Comparing WORD characteristics", "body": "<p>I am trying to read PE headers, and want to see if an exe has ASLR enabled.</p>\n\n<p>I am currently doing :</p>\n\n<pre><code>if (PE.FileHeader-&gt;OptionalHeader.DllCharacteristics == IMAGE_DLLCHARACTERISTICS_DYNAMIC_BASE)\n        std::cout &lt;&lt; \"ASLR is enabled :)\" &lt;&lt; std::endl;\n    else\n        std::cout &lt;&lt; \"ASLR is disabled &gt;:(\" &lt;&lt; std::endl;\n</code></pre>\n\n<p>However, I always get \"ASLR is disabled >:(\", even if I know for a fact ASLR is enabled.</p>\n\n<p>I know this has to do with my operator, but how do I test and see if a PE header has a certain WORD character?</p>\n"}, {"tags": ["c++", "c++11", "linked-list", "c++14", "delete-operator"], "comments": [{"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 5, "creation_date": 1501095605, "post_id": 45335324, "comment_id": 77632656, "body": "Why would you want to delete the node you just added? This will leave you with some garbage memory at the front of your list."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1501095695, "post_id": 45335324, "comment_id": 77632701, "body": "Does the line <code>ContactList *cl1 = new ContactList();</code> compile?"}, {"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 2, "creation_date": 1501095728, "post_id": 45335324, "comment_id": 77632728, "body": "Obligatory mention of <a href=\"http://en.cppreference.com/w/cpp/memory/unique_ptr\" rel=\"nofollow noreferrer\">std::unique_ptr</a> to do the memory management for you."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1501095747, "post_id": 45335324, "comment_id": 77632737, "body": "If you delete that node, you are deleting the head in your list. In <code>main</code>, after <code>addToHead</code>, you call <code>print</code>. This function attempts to loop over your lists, starting with your deleted head. Using a deleted object is undefined behavior, so anything can happen. This includes looping forever."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 1, "creation_date": 1501095796, "post_id": 45335324, "comment_id": 77632768, "body": "@0x5453, not necessarily for linked lists, though."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1501095931, "post_id": 45335324, "comment_id": 77632827, "body": "@SergeyA Even with linked lists, then you could run into stack overflow issues but it would work for small lists. For larger lists you\u2019d still need to write a destructor to avoid that, but it would be easier to make sure you don\u2019t accidentally do something wrong."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1501096140, "post_id": 45335324, "comment_id": 77632926, "body": "@SergeyA I&#39;m curious as to why you wouldn&#39;t recommend <code>std::unique_ptr</code> for linked lists?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1501098489, "post_id": 45335324, "comment_id": 77634266, "body": "@Fran&#231;oisAndrieux, because you&#39;d have to do complex dance to remove the node anyways, and at this time, you might as well delete the thing manually."}, {"owner": {"reputation": 118, "user_id": 8177129, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1354289754625520/picture?type=large", "display_name": "Shubham Anand", "link": "https://stackoverflow.com/users/8177129/shubham-anand"}, "edited": false, "score": 0, "creation_date": 1501136351, "post_id": 45335324, "comment_id": 77646850, "body": "Thank you guys :&#39;D ! Just one query ! Since I created a newPtr dynamically, would it automatically be deallocated after the function addToHead() ends ?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1501160498, "post_id": 45335324, "comment_id": 77664112, "body": "@SergeyA By complex dance, do you mean reassigning the <code>next</code> pointers? You have to do that either way. I don&#39;t understand the reasoning behind &quot;might as well delete the thing manually&quot;. Is it that you see no value in using <code>std::unique_ptr</code> and consider it more complex than <code>delete</code>?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1501165827, "post_id": 45335324, "comment_id": 77668851, "body": "@Fran&#231;oisAndrieux, the beauty of unique_ptr comes from the fact that you need not do anything. If you need to do something, not so much. Also, consider double-linked lists."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1501166625, "post_id": 45335324, "comment_id": 77669502, "body": "@SergeyA It&#39;s still free to use <code>unique_ptr</code> in this case. I haven&#39;t heard any reason why it should be avoided here. It saves you from deleting it yourself, avoids mistakes, improving exception safety and simplifying some operations. For example, consider clearing the list."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1501167014, "post_id": 45335324, "comment_id": 77669818, "body": "@Fran&#231;oisAndrieux, doesn&#39;t really prevent you at all. Imagine what an automatic destructor of double-linked list where the pointers are ` <code>std::unique_ptr&lt;&gt;</code>  would do. How about move construtor for the same? Like it?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1501167331, "post_id": 45335324, "comment_id": 77670091, "body": "@SergeyA For a double linked list, you can just have <code>unique_ptr</code> next and raw pointer prev. In that case each node is owned by the previous. You are changing the subject. The subject here is your original comment which opposes recommending <code>unique_ptr</code>, which was made in the context of a question about a single linked list."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1501167877, "post_id": 45335324, "comment_id": 77670531, "body": "@Fran&#231;oisAndrieux, if you know any implementation of standard library which uses <code>unique_ptr</code> for nodes in <code>std::list</code>, give me a shout and we will continue this discussion."}], "answers": [{"comments": [{"owner": {"reputation": 118, "user_id": 8177129, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1354289754625520/picture?type=large", "display_name": "Shubham Anand", "link": "https://stackoverflow.com/users/8177129/shubham-anand"}, "edited": false, "score": 0, "creation_date": 1501136270, "post_id": 45335518, "comment_id": 77646807, "body": "Dude Thank you so much !  I just realised the problem :D"}], "tags": [], "owner": {"reputation": 607, "user_id": 6784509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UjPEk.jpg?s=128&g=1", "display_name": "HatsuPointerKun", "link": "https://stackoverflow.com/users/6784509/hatsupointerkun"}, "is_accepted": true, "score": 4, "last_activity_date": 1501097120, "last_edit_date": 1501097120, "creation_date": 1501096153, "answer_id": 45335518, "question_id": 45335324, "link": "https://stackoverflow.com/questions/45335324/confusion-with-delete-functionality-in-c/45335518#45335518", "title": "Confusion with delete functionality in c++", "body": "<p>Here, in your addToHead :</p>\n\n\n\n<pre class=\"lang-cpp prettyprint-override\"><code>Contact *newOne = new Contact(name);\n\nif(head==NULL){\n    head = newOne;\n}\nelse{\n    newOne-&gt;next = head;\n    head = newOne;\n}\n++size;\n</code></pre>\n\n<p>Can be wrote like this :</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>Contact *newOne = new Contact(name);\n\nnewOne-&gt;next = head; // if (head==NULL) newOne-&gt;next=NULL else newOne-&gt;next=head;\nhead = newOne;\n++size;\n</code></pre>\n\n<p>You will assign the value of newOne to head.</p>\n\n<p>But if you add delete, like you said, after ++size, head will point to something that is deleted.</p>\n\n<p>What happen in your print method is that you dereference something deleted.\nWhat happen when you dereference something deleted is undefined behavior, which can cause strange output, or crashes.</p>\n\n<p>You may want to use <a href=\"https://stackoverflow.com/questions/106508/what-is-a-smart-pointer-and-when-should-i-use-one\">smart pointers</a> to avoid accessing deleted memory and memory leaks.</p>\n"}], "owner": {"reputation": 118, "user_id": 8177129, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1354289754625520/picture?type=large", "display_name": "Shubham Anand", "link": "https://stackoverflow.com/users/8177129/shubham-anand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 45335518, "answer_count": 1, "score": 1, "last_activity_date": 1501097120, "creation_date": 1501095469, "question_id": 45335324, "link": "https://stackoverflow.com/questions/45335324/confusion-with-delete-functionality-in-c", "title": "Confusion with delete functionality in c++", "body": "<p>So I wrote this code in c++</p>\n\n<pre><code>#include \"ContactBook.hpp\"\n\nint main(){\n\n    std::string name;\n    ContactList *cl1 = new ContactList();\n\n    while(true){\n\n        std::cout &lt;&lt; \"Enter a name or press Q to quit\" &lt;&lt; std::endl;\n        std::cin &gt;&gt; name;\n\n        if(name==\"Q\"||name==\"q\")\n            break;\n        else{\n            cl1-&gt;addToHead(name);\n        }\n    }\n\n    cl1-&gt;print();\n    delete cl1;\n\n    return 0;\n}\n</code></pre>\n\n<p>My header file definition -></p>\n\n<pre><code>#ifndef ContactBook_hpp\n#define ContactBook_hpp\n\n#include &lt;iostream&gt;\n\nclass Contact{\n    friend std::ostream &amp;operator&lt;&lt;(std::ostream &amp;os, const Contact &amp;c);\n    friend class ContactList;\npublic:\n    Contact(std::string name);\nprivate:\n    std::string name;\n    Contact* next;\n};\n\nclass ContactList{\npublic:\n    ContactList();\n    void addToHead(const std::string &amp;name);\n    void print();\nprivate:\n    Contact *head;\n    static int size;\n};\n\n#endif\n</code></pre>\n\n<p>Now here's my header files function definition.\nContactList and Contact are two classes. Contact list is a friend class of Contact.</p>\n\n<pre><code>#include \"ContactBook.hpp\"\n\nContact::Contact(std::string name){\n    this-&gt;name = name;\n    next = NULL;\n}\nstd::ostream &amp;operator&lt;&lt;(std::ostream &amp;os, const Contact &amp;c){\n    os &lt;&lt; \"Name: \" &lt;&lt; c.name &lt;&lt; std::endl;\n    return os;\n}\n\nContactList::ContactList():head(NULL){};\nint ContactList::size = 0;\n\nvoid ContactList::addToHead(const std::string &amp;name){\n\n    Contact *newOne = new Contact(name);\n\n    if(head==NULL){\n        head = newOne;\n    }\n    else{\n        newOne-&gt;next = head;\n        head = newOne;\n    }\n    ++size;\n\n}\n\nvoid ContactList::print(){\n\n    Contact *temp;\n    temp = head;\n\n    while(temp!=NULL){\n        std::cout &lt;&lt; *temp;\n        temp = temp-&gt;next;\n    }\n}\n</code></pre>\n\n<p>The issue is whenever I add </p>\n\n<pre><code>delete newOne;\n</code></pre>\n\n<p>after ++size in the 3rd code snippet in addToHead definition. </p>\n\n<p>I end up with an infinite loop on odd inputs of names (except 1)! I just cant understand why this is happening ! Some knowledge on this would be really appreciated :D !</p>\n"}, {"tags": ["c++", "templates", "armadillo"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1501095282, "post_id": 45335128, "comment_id": 77632482, "body": "You need to use <code>typename SpMat&lt;T&gt;::const_iterator start = A.begin();</code>. Similarly for the next line."}, {"owner": {"reputation": 1334, "user_id": 1328780, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c0241ebc4503b57de65aa5d289f1d588?s=128&d=identicon&r=PG", "display_name": "bjhend", "link": "https://stackoverflow.com/users/1328780/bjhend"}, "edited": false, "score": 0, "creation_date": 1501095359, "post_id": 45335128, "comment_id": 77632521, "body": "Did you put the template code into a <code>cpp</code> file or a header? As template it should sit in a header."}, {"owner": {"reputation": 81, "user_id": 6268759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a023d674c2e506d166494d2f5a71028?s=128&d=identicon&r=PG&f=1", "display_name": "Ren&#233; Hiemstra", "link": "https://stackoverflow.com/users/6268759/ren%c3%a9-hiemstra"}, "edited": false, "score": 0, "creation_date": 1501128237, "post_id": 45335128, "comment_id": 77643891, "body": "Indeed, it works after putting typename before those expressions and in the for loop. Thanks."}], "owner": {"reputation": 81, "user_id": 6268759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a023d674c2e506d166494d2f5a71028?s=128&d=identicon&r=PG&f=1", "display_name": "Ren&#233; Hiemstra", "link": "https://stackoverflow.com/users/6268759/ren%c3%a9-hiemstra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 20, "favorite_count": 0, "closed_date": 1501095290, "answer_count": 0, "score": 0, "last_activity_date": 1501094790, "creation_date": 1501094790, "question_id": 45335128, "link": "https://stackoverflow.com/questions/45335128/templated-function-for-a-templated-armadillo-class", "closed_reason": "Duplicate", "title": "Templated function for a templated (Armadillo) class", "body": "<p>The following function should extract the row indices,\ncolumn indices and non-zeros of a sparse matrix of type\nT.</p>\n\n<pre><code>template&lt;typename T&gt;\ntuple&lt;uvec,uvec,Col&lt;T&gt;&gt; find(SpMat&lt;T&gt; A)\n{\n    SpMat&lt;T&gt;::const_iterator start = A.begin();\n    SpMat&lt;T&gt;::const_iterator end   = A.end();\n\n    auto n = std::distance(start,end);\n    uvec row_ind(n);\n    uvec col_ind(n);\n    Col&lt;T&gt; nz_vals(n);\n\n    int i = 0;\n    for(SpMat&lt;T&gt;::const_iterator it = start; it != end; ++it)\n    {\n        row_ind[i] = it.row();\n        col_ind[i] = it.col();\n        nz_vals[i] = (*it);\n       i++;\n    }\n    return make_tuple(row_ind, col_ind, nz_vals);\n}\n</code></pre>\n\n<p>Unfortunately it doesn't work. On the other hand if I replace the typeparameter by double instead, it works</p>\n\n<pre><code>typedef double T;\ntuple&lt;uvec,uvec,Col&lt;T&gt;&gt; find(SpMat&lt;T&gt; A)\n{\n    SpMat&lt;T&gt;::const_iterator start = A.begin();\n    SpMat&lt;T&gt;::const_iterator end   = A.end();\n\n    auto n = std::distance(start,end);\n    uvec row_ind(n);\n    uvec col_ind(n);\n    Col&lt;T&gt; nz_vals(n);\n\n    int i = 0;\n    for(SpMat&lt;T&gt;::const_iterator it = start; it != end; ++it)\n    {\n        row_ind[i] = it.row();\n        col_ind[i] = it.col();\n        nz_vals[i] = (*it);\n       i++;\n    }\n    return make_tuple(row_ind, col_ind, nz_vals);\n}\n</code></pre>\n\n<p>Can anyone explain this behavior?</p>\n"}, {"tags": ["c++", "pointers", "struct"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 3, "creation_date": 1501094952, "post_id": 45335102, "comment_id": 77632289, "body": "C and C++ are different languages and the code should be written differently in each. Please remove the unrelated tag. Also what is <code>_aligned_malloc</code>? it is not a standard function. It might be an internal symbol you are not allowed to use from application code. Provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. &quot;My code doesn&#39;t work&quot; is not a valid problem description. Read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 89, "user_id": 4377807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e019179a87899afa9e583b2a14b31477?s=128&d=identicon&r=PG&f=1", "display_name": "Maged Elghareib", "link": "https://stackoverflow.com/users/4377807/maged-elghareib"}, "edited": false, "score": 0, "creation_date": 1501147317, "post_id": 45335102, "comment_id": 77654164, "body": "I encourage you to write it as <code>memcpy(&amp;dev_probConfig[i], h_probConfig, sizeof(ProbConfig));</code>. That&#39;s clearer and guaranteed to handle pointer arithmetic correctly. I assume that  you already declared <code>h_probConfig</code> as a pointer."}], "answers": [{"comments": [{"owner": {"reputation": 3107, "user_id": 3423234, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49Nfn.gif?s=128&g=1", "display_name": "mfro", "link": "https://stackoverflow.com/users/3423234/mfro"}, "edited": false, "score": 0, "creation_date": 1501095698, "post_id": 45335131, "comment_id": 77632703, "body": "what&#39;s wrong with <code>for (i = 0; i &lt; n; i++) dev_prob_config[i] = h_probConfig;</code>? It&#39;s the same thing and it&#39;s a lot more clear what you want."}, {"owner": {"reputation": 3107, "user_id": 3423234, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49Nfn.gif?s=128&g=1", "display_name": "mfro", "link": "https://stackoverflow.com/users/3423234/mfro"}, "edited": false, "score": 0, "creation_date": 1501095972, "post_id": 45335131, "comment_id": 77632850, "body": "no, I mean what&#39;s wrong with directly assigning structures instead of doing the compiler&#39;s job trying to optimizie structure assignments with <code>memcpy()</code>"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 3107, "user_id": 3423234, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49Nfn.gif?s=128&g=1", "display_name": "mfro", "link": "https://stackoverflow.com/users/3423234/mfro"}, "edited": false, "score": 0, "creation_date": 1501096007, "post_id": 45335131, "comment_id": 77632871, "body": "@mfro I wanted to change only the things that really <i>needed</i> changing.  It&#39;s true that your version is much simpler, but OP had <code>memcpy</code> and there&#39;s nothing <i>wrong</i> with doing it that way."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1501099055, "post_id": 45335131, "comment_id": 77634584, "body": "&quot;Also, do not cast the result of a malloc-like function in C. This can actually hide critical-severity bugs.&quot; Why is that?"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1501099546, "post_id": 45335131, "comment_id": 77634864, "body": "@geza Short version: if you forget to include <code>&lt;stdlib.h&gt;</code>, in C you are still allowed to call <code>malloc</code> but the compiler will treat it as having return type <code>int</code> (&quot;implicit declaration&quot;) rather than <code>void *</code>, and (depending on the ABI) this may cause it to corrupt the returned pointer. With most modern compilers, you will get a warning when this happens, but only if you <i>don&#39;t</i> cast the return value."}, {"owner": {"reputation": 31, "user_id": 8372000, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-R87C2K91-3c/AAAAAAAAAAI/AAAAAAAABgU/0gMf2bSVUKE/photo.jpg?sz=128", "display_name": "Lorenzo Cucurachi", "link": "https://stackoverflow.com/users/8372000/lorenzo-cucurachi"}, "edited": false, "score": 0, "creation_date": 1501184836, "post_id": 45335131, "comment_id": 77680931, "body": "@zwol I have tried your solution and it looks like working but then when I allocate more than one time and I run the code without using the second portion of the array I get errors. I want to point out that I am trying to allocate more structs on an array in order to pass them to a OpenCL kernel. And it is not working.."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 31, "user_id": 8372000, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-R87C2K91-3c/AAAAAAAAAAI/AAAAAAAABgU/0gMf2bSVUKE/photo.jpg?sz=128", "display_name": "Lorenzo Cucurachi", "link": "https://stackoverflow.com/users/8372000/lorenzo-cucurachi"}, "edited": false, "score": 0, "creation_date": 1501186087, "post_id": 45335131, "comment_id": 77681575, "body": "@LorenzoCucurachi Please ask a new question. In the new question, provide a <i>complete program</i> that we can compile and run for ourselves and watch fail. But make sure it is the <i>smallest possible complete program</i> that demonstrates the problem you are having, and make sure it has no other problems. Also, we need you to tell us <i>exactly</i> what errors you are getting."}, {"owner": {"reputation": 31, "user_id": 8372000, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-R87C2K91-3c/AAAAAAAAAAI/AAAAAAAABgU/0gMf2bSVUKE/photo.jpg?sz=128", "display_name": "Lorenzo Cucurachi", "link": "https://stackoverflow.com/users/8372000/lorenzo-cucurachi"}, "edited": false, "score": 0, "creation_date": 1501246029, "post_id": 45335131, "comment_id": 77708787, "body": "@zwol I cannot share my code as it is part of my job. I can only explain my problem the best I can and provide some code. Would that be ok?"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 31, "user_id": 8372000, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-R87C2K91-3c/AAAAAAAAAAI/AAAAAAAABgU/0gMf2bSVUKE/photo.jpg?sz=128", "display_name": "Lorenzo Cucurachi", "link": "https://stackoverflow.com/users/8372000/lorenzo-cucurachi"}, "edited": false, "score": 0, "creation_date": 1501250146, "post_id": 45335131, "comment_id": 77711922, "body": "@LorenzoCucurachi Write a program from scratch that exhibits the same problem, keeping it as small as possible. This might sound like busywork but it&#39;s not; you may well discover the problem for yourself in the process. I also recommend you read &quot;<a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to Debug Small Programs</a>.&quot;"}], "tags": [], "owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "is_accepted": false, "score": 2, "last_activity_date": 1501166318, "last_edit_date": 1501166318, "creation_date": 1501094796, "answer_id": 45335131, "question_id": 45335102, "link": "https://stackoverflow.com/questions/45335102/copy-struct-to-a-pointer-multiple-times-using-aligned-malloc-and-memcpy/45335131#45335131", "title": "Copy struct to a pointer multiple times using aligned_malloc and memcpy", "body": "<p>This is a tricky aspect of pointer arithmetic in C.  Adding 1 to a pointer-to-<em>T</em> increments it by <code>sizeof(T)</code>, not by 1.  So you should remove the <code>* sizeof(ProbConfig)</code> to make this do what you want.</p>\n\n<p>Assuming this is actually C, it would be better style to write this as either:</p>\n\n<pre><code>dev_probConfig = _aligned_malloc(N * sizeof(ProbConfig), 64);\nfor (size_t i = 0; i &lt; N; i++)\n    memcpy(&amp;dev_probConfig[i], h_probConfig, sizeof(ProbConfig));\n</code></pre>\n\n<p>or, using structure assignment instead of <code>memcpy</code>,</p>\n\n<pre><code>dev_probConfig = _aligned_malloc(N * sizeof(ProbConfig), 64);\nfor (size_t i = 0; i &lt; N; i++)\n    dev_probConfig[i] = h_probConfig;\n</code></pre>\n\n<p><code>&amp;dev_probConfig[i]</code> is the same as <code>dev_probConfig + i</code>, but it is clearer, precisely because of this trickiness of pointer arithmetic. </p>\n\n<p>Also, <em>do not</em> cast the result of a <code>malloc</code>-like function in C.  It is not necessary, and it can hide bugs: for instance, if you forget to include <code>stdlib.h</code> in a program that uses <code>malloc</code>, the legacy \"implicit declaration\" rule kicks in and <code>malloc</code> is treated as returning an <code>int</code> rather than a <code>void *</code>.\u00a0If <code>int</code> and <code>void *</code> are not the same size (e.g. because <code>int</code> is 32 bits wide but pointers are 64 bits wide) this will corrupt the pointer in a way that might not be noticed until your program has to crunch more data than usual.  You will get a warning from the compiler \u2014 but only if you don't cast the return value.</p>\n\n<p>(In C++ you have to cast the result of <code>malloc</code>-like functions, but in C++ you should be using <code>std::vector</code> anyway.  You can use a <a href=\"https://www.codeproject.com/Articles/4795/C-Standard-Allocator-An-Introduction-and-Implement\" rel=\"nofollow noreferrer\">custom allocator</a> to get a <code>std::vector</code> with extra alignment for the array; this <em>looks</em> awful complicated but it's really just a lot of boilerplate.)</p>\n"}], "owner": {"reputation": 31, "user_id": 8372000, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-R87C2K91-3c/AAAAAAAAAAI/AAAAAAAABgU/0gMf2bSVUKE/photo.jpg?sz=128", "display_name": "Lorenzo Cucurachi", "link": "https://stackoverflow.com/users/8372000/lorenzo-cucurachi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 318, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1501184900, "creation_date": 1501094664, "last_edit_date": 1501184900, "question_id": 45335102, "link": "https://stackoverflow.com/questions/45335102/copy-struct-to-a-pointer-multiple-times-using-aligned-malloc-and-memcpy", "title": "Copy struct to a pointer multiple times using aligned_malloc and memcpy", "body": "<p>I am trying to copy a struct object to a pointer variable where I have allocated memory using _aligned_malloc and all I want is to copy the struct more than 1 time. If I copy it 1 time it works otherwise it doesn't. This is the snippet of the code:</p>\n\n<pre><code>dev_probConfig = (ProbConfig*)_aligned_malloc(N* sizeof(ProbConfig),64);\nfor (int i = 0; i &lt; N; ++i) \n{\n    memcpy(dev_probConfig + i * sizeof(ProbConfig), h_probConfig, sizeof(ProbConfig));\n}\n</code></pre>\n\n<p>What am I doing wrong?! \nMy struct doesn't contain padding and its size is 512 bytes.\nThanks.</p>\n"}, {"tags": ["c++", "namespaces", "global", "operator-keyword"], "comments": [{"owner": {"reputation": 607, "user_id": 6784509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UjPEk.jpg?s=128&g=1", "display_name": "HatsuPointerKun", "link": "https://stackoverflow.com/users/6784509/hatsupointerkun"}, "edited": false, "score": 0, "creation_date": 1501094744, "post_id": 45335075, "comment_id": 77632169, "body": "Can you add error messages you get when you try to compile with the failed attempts ?"}, {"owner": {"reputation": 317, "user_id": 3653470, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4b054a58a9689fc0e5f7552ff50d9fbc?s=128&d=identicon&r=PG&f=1", "display_name": "fundagain", "link": "https://stackoverflow.com/users/3653470/fundagain"}, "reply_to_user": {"reputation": 607, "user_id": 6784509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UjPEk.jpg?s=128&g=1", "display_name": "HatsuPointerKun", "link": "https://stackoverflow.com/users/6784509/hatsupointerkun"}, "edited": false, "score": 0, "creation_date": 1501095175, "post_id": 45335075, "comment_id": 77632429, "body": "I added the error message when the first commented line is uncommented."}, {"owner": {"reputation": 317, "user_id": 3653470, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4b054a58a9689fc0e5f7552ff50d9fbc?s=128&d=identicon&r=PG&f=1", "display_name": "fundagain", "link": "https://stackoverflow.com/users/3653470/fundagain"}, "edited": false, "score": 0, "creation_date": 1501095727, "post_id": 45335075, "comment_id": 77632725, "body": "You are correct, this is a duplicate. It seems it is impossible in C++."}, {"owner": {"reputation": 1574, "user_id": 6172310, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-T2-U1BpQmAw/AAAAAAAAAAI/AAAAAAAABXE/ZiY6MpBP3ek/photo.jpg?sz=128", "display_name": "Andreas H.", "link": "https://stackoverflow.com/users/6172310/andreas-h"}, "edited": false, "score": 0, "creation_date": 1501096526, "post_id": 45335075, "comment_id": 77633143, "body": "<i>This is not a duplicate - not forward declaration needed</i>  There is a simple solution which I cannot add because of the duplicate mark:  namespace myspace { \tclass Outer \t{ \t\tfriend QDataStream&amp; operator&lt;&lt;(QDataStream&amp;, const Outer&amp;);  \tpublic: \t\tclass Inner \t\t{ \t\t\tfriend QDataStream&amp; operator&lt;&lt;(QDataStream&amp;, const Inner&amp;); \t\t\tint i; \t\t};  \tprivate: \t\tint o; \t};  \tQDataStream&amp; operator&lt;&lt;(QDataStream&amp; s, const myspace::Outer&amp; o) \t{ \t\ts &lt;&lt; o.o; \t\treturn s; \t}  \tQDataStream&amp; operator&lt;&lt;(QDataStream&amp; s, const myspace::Outer::Inner&amp; i) \t{ \t\ts &lt;&lt; i.i; \t\treturn s; \t} }"}, {"owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "reply_to_user": {"reputation": 1574, "user_id": 6172310, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-T2-U1BpQmAw/AAAAAAAAAAI/AAAAAAAABXE/ZiY6MpBP3ek/photo.jpg?sz=128", "display_name": "Andreas H.", "link": "https://stackoverflow.com/users/6172310/andreas-h"}, "edited": false, "score": 0, "creation_date": 1501097122, "post_id": 45335075, "comment_id": 77633461, "body": "@AndreasH you need to make the Inner class <code>public</code>. It is <code>private</code> in the original contents. There is no solution in this case. But I agree, it is not an exact duplicate."}, {"owner": {"reputation": 1574, "user_id": 6172310, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-T2-U1BpQmAw/AAAAAAAAAAI/AAAAAAAABXE/ZiY6MpBP3ek/photo.jpg?sz=128", "display_name": "Andreas H.", "link": "https://stackoverflow.com/users/6172310/andreas-h"}, "edited": false, "score": 0, "creation_date": 1501097367, "post_id": 45335075, "comment_id": 77633611, "body": "You do not have to make the inner class public. You can also make operator&lt;&lt;(QDataStream&amp; s, const myspace::Outer::Inner&amp; i) a friend for the Outer and the Inner class. This way the operator definition works without making Inner a public type."}, {"owner": {"reputation": 1574, "user_id": 6172310, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-T2-U1BpQmAw/AAAAAAAAAAI/AAAAAAAABXE/ZiY6MpBP3ek/photo.jpg?sz=128", "display_name": "Andreas H.", "link": "https://stackoverflow.com/users/6172310/andreas-h"}, "edited": false, "score": 0, "creation_date": 1501097406, "post_id": 45335075, "comment_id": 77633643, "body": "try this (no public keyword and perfectly working): <code>namespace myspace { \tclass Outer \t{ \t\tclass Inner \t\t{ \t\t\tfriend QDataStream&amp; operator&lt;&lt;(QDataStream&amp;, const Inner&amp;); \t\t\tint i; \t\t};  \t\tfriend QDataStream&amp; operator&lt;&lt;(QDataStream&amp;, const Outer&amp;); \t\tfriend QDataStream&amp; operator&lt;&lt;(QDataStream&amp;, const Inner&amp;);  \t\tint o; \t};  \tQDataStream&amp; operator&lt;&lt;(QDataStream&amp; s, const myspace::Outer&amp; o) \t{ \t\ts &lt;&lt; o.o; \t\treturn s; \t}  \tQDataStream&amp; operator&lt;&lt;(QDataStream&amp; s, const myspace::Outer::Inner&amp; i) \t{ \t\ts &lt;&lt; i.i; \t\treturn s; \t} }</code>"}, {"owner": {"reputation": 317, "user_id": 3653470, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4b054a58a9689fc0e5f7552ff50d9fbc?s=128&d=identicon&r=PG&f=1", "display_name": "fundagain", "link": "https://stackoverflow.com/users/3653470/fundagain"}, "edited": false, "score": 0, "creation_date": 1501262380, "post_id": 45335075, "comment_id": 77719708, "body": "Thank you Andreas H. Your solution works perfectly. I panicked when the Duplicate was thrown at me, since I could not see a non forward reference approach. I will re-ask the question, since the problem is real and you solved it."}, {"owner": {"reputation": 317, "user_id": 3653470, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4b054a58a9689fc0e5f7552ff50d9fbc?s=128&d=identicon&r=PG&f=1", "display_name": "fundagain", "link": "https://stackoverflow.com/users/3653470/fundagain"}, "edited": false, "score": 0, "creation_date": 1501264353, "post_id": 45335075, "comment_id": 77720737, "body": "Yes AndreasH. Your solution works! Thank you. I was on the verge of de-encapsulating!"}, {"owner": {"reputation": 177474, "user_id": 13531, "user_type": "moderator", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/49f3a2065659f5b4efa05ae29bd0856a?s=128&d=identicon&r=PG", "display_name": "Michael Myers", "link": "https://stackoverflow.com/users/13531/michael-myers"}, "reply_to_user": {"reputation": 1574, "user_id": 6172310, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-T2-U1BpQmAw/AAAAAAAAAAI/AAAAAAAABXE/ZiY6MpBP3ek/photo.jpg?sz=128", "display_name": "Andreas H.", "link": "https://stackoverflow.com/users/6172310/andreas-h"}, "edited": false, "score": 0, "creation_date": 1501275259, "post_id": 45335075, "comment_id": 77725893, "body": "Reopened @AndreasH."}], "answers": [{"tags": [], "owner": {"reputation": 317, "user_id": 3653470, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4b054a58a9689fc0e5f7552ff50d9fbc?s=128&d=identicon&r=PG&f=1", "display_name": "fundagain", "link": "https://stackoverflow.com/users/3653470/fundagain"}, "is_accepted": false, "score": 0, "last_activity_date": 1504364819, "creation_date": 1504364819, "answer_id": 46015143, "question_id": 45335075, "link": "https://stackoverflow.com/questions/45335075/c-namespaces-inner-classes-and-operator-resolution/46015143#46015143", "title": "C++ namespaces, inner classes and operator resolution", "body": "<p>Given the time lapse, I am posting the correct answer given by Andreas H. </p>\n\n<pre><code>namespace myspace {\nclass Outer {\n    class Inner {\n        friend QDataStream&amp; operator&lt;&lt;(QDataStream&amp;, const Inner&amp;);\n        int i;\n    };\n    friend QDataStream&amp; operator&lt;&lt;(QDataStream&amp;, const Outer&amp;);\n    friend QDataStream&amp; operator&lt;&lt;(QDataStream&amp;, const Inner&amp;);\n    int o;\n};\nQDataStream&amp; operator&lt;&lt;(QDataStream&amp; s, const myspace::Outer&amp; o) {\n    s &lt;&lt; o.o;\n    return s;\n}\nQDataStream&amp; operator&lt;&lt;(QDataStream&amp; s, const myspace::Outer::Inner&amp; i) {\n    s &lt;&lt; i.i;\n    return s;\n}\n}\n</code></pre>\n"}], "owner": {"reputation": 317, "user_id": 3653470, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4b054a58a9689fc0e5f7552ff50d9fbc?s=128&d=identicon&r=PG&f=1", "display_name": "fundagain", "link": "https://stackoverflow.com/users/3653470/fundagain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 448, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1504364819, "creation_date": 1501094543, "last_edit_date": 1501275491, "question_id": 45335075, "link": "https://stackoverflow.com/questions/45335075/c-namespaces-inner-classes-and-operator-resolution", "title": "C++ namespaces, inner classes and operator resolution", "body": "<p>In the C++ namespace <code>myspace</code> I have a class <code>Outer</code> which in turn has an inner class <code>Inner</code>. While I can declare and define a global friend operator <code>QDataStream&amp; operator&lt;&lt;(QDataStream&amp; s, const myspace::Outer&amp; o)</code>, I cannot see how to declare a global friend operator <code>QDataStream&amp; operator&lt;&lt;(QDataStream&amp; s, const myspace::Outer::Inner&amp; o)</code>. The commented out lines represent a failed attempt. I do not see how to declare the inner class without defining the outer.</p>\n\n<pre><code>namespace myspace {\n    class Outer;\n    //class Outer::Inner;\n}\n\nQDataStream&amp; operator&lt;&lt;(QDataStream&amp; s, const myspace::Outer&amp; o);\n//QDataStream&amp; operator&lt;&lt;(QDataStream&amp; s, const myspace::Outer::Inner&amp; o);\n\n\nnamespace myspace {\n\n    class Outer {\n\n        friend QDataStream&amp; (::operator &lt;&lt;)(QDataStream&amp;, const Outer&amp;);\n\n        class Inner {\n            //friend QDataStream&amp; (::operator &lt;&lt;)(QDataStream&amp;, const Inner&amp;);\n            int i;\n        };\n\n        int o;\n    };\n\n}\n</code></pre>\n\n<p>I have read\n<a href=\"https://stackoverflow.com/questions/5195512/namespaces-and-operator-resolution\">Namespaces and operator resolution</a>, <a href=\"https://stackoverflow.com/questions/21109170/c-defining-the-operator-of-an-inner-class\">C++ Defining the &lt;&lt; operator of an inner class</a>, <a href=\"https://stackoverflow.com/questions/1310922/accessing-private-class-in-operator-in-namespace\">Accessing private class in operator&lt;&lt; in namespace</a>\nand <a href=\"https://stackoverflow.com/questions/38329694/operator-overloading-name-resolution-and-namespaces\">Operator overloading, name resolution and namespaces</a>, but none seem to work.</p>\n\n<p>If I uncomment these lines, the first gives the error message \"outer.h:7: error: 'Inner' in 'class myspace::Outer' does not name a type\n     class Outer::Inner;\n                  ^\"\nThis seems to be the key. I cannot declare the inner class.</p>\n\n<p>I am using C++ 11.</p>\n\n<p>This question is not a duplicate of <a href=\"https://stackoverflow.com/questions/951234/forward-declaration-of-nested-types-classes-in-c\">Forward declaration of nested types/classes in C++</a> if it can can be solved without forward reference.</p>\n"}, {"tags": ["c++", "eigen", "eigen3"], "comments": [{"owner": {"reputation": 4933, "user_id": 8217180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9621a549160f738b81303a4a008ddd50?s=128&d=identicon&r=PG&f=1", "display_name": "Tobias Ribizel", "link": "https://stackoverflow.com/users/8217180/tobias-ribizel"}, "edited": false, "score": 1, "creation_date": 1501094361, "post_id": 45334938, "comment_id": 77631975, "body": "Can you add your compile error? Also, try to make your code more self-contained such that others can reproduce your error. See <a href=\"https://stackoverflow.com/help/mcve\">Minimal, complete, verifiable example</a>"}, {"owner": {"reputation": 1334, "user_id": 1328780, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c0241ebc4503b57de65aa5d289f1d588?s=128&d=identicon&r=PG", "display_name": "bjhend", "link": "https://stackoverflow.com/users/1328780/bjhend"}, "edited": false, "score": 0, "creation_date": 1501094362, "post_id": 45334938, "comment_id": 77631976, "body": "What&#39;s the error message and to which line does it refer?"}, {"owner": {"reputation": 15, "user_id": 8370308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e2c2cd3c622db3b8ca373ce2a3e12d7?s=128&d=identicon&r=PG&f=1", "display_name": "ReA", "link": "https://stackoverflow.com/users/8370308/rea"}, "reply_to_user": {"reputation": 1334, "user_id": 1328780, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c0241ebc4503b57de65aa5d289f1d588?s=128&d=identicon&r=PG", "display_name": "bjhend", "link": "https://stackoverflow.com/users/1328780/bjhend"}, "edited": false, "score": 0, "creation_date": 1501095706, "post_id": 45334938, "comment_id": 77632712, "body": "@bjhend I tried to edit the code and make it more readable, I also added the compiling error"}, {"owner": {"reputation": 406, "user_id": 2102925, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/582cb201d06c59f1521cbe4e2a5667c3?s=128&d=identicon&r=PG", "display_name": "AdityaG", "link": "https://stackoverflow.com/users/2102925/adityag"}, "edited": false, "score": 0, "creation_date": 1501096524, "post_id": 45334938, "comment_id": 77633142, "body": "When declaring A_eigen , Try to explicitly cast TotalDist to int. The compilation error shows you are passing floating point number where an into is expected."}, {"owner": {"reputation": 15, "user_id": 8370308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e2c2cd3c622db3b8ca373ce2a3e12d7?s=128&d=identicon&r=PG&f=1", "display_name": "ReA", "link": "https://stackoverflow.com/users/8370308/rea"}, "reply_to_user": {"reputation": 406, "user_id": 2102925, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/582cb201d06c59f1521cbe4e2a5667c3?s=128&d=identicon&r=PG", "display_name": "AdityaG", "link": "https://stackoverflow.com/users/2102925/adityag"}, "edited": false, "score": 0, "creation_date": 1501097168, "post_id": 45334938, "comment_id": 77633486, "body": "@AdityaG it worked!! :) thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 406, "user_id": 2102925, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/582cb201d06c59f1521cbe4e2a5667c3?s=128&d=identicon&r=PG", "display_name": "AdityaG", "link": "https://stackoverflow.com/users/2102925/adityag"}, "is_accepted": true, "score": 1, "last_activity_date": 1501097329, "creation_date": 1501097329, "answer_id": 45335860, "question_id": 45334938, "link": "https://stackoverflow.com/questions/45334938/fail-in-working-with-a-eigen-function/45335860#45335860", "title": "Fail in working with a Eigen function", "body": "<p>When declaring A_eigen , Try to explicitly cast TotalDist to int. The compilation error shows you are passing floating point number where an into is expected.</p>\n\n<p>Also check the value of the TotalDist and the dimension of A_eigen . </p>\n"}], "owner": {"reputation": 15, "user_id": 8370308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e2c2cd3c622db3b8ca373ce2a3e12d7?s=128&d=identicon&r=PG&f=1", "display_name": "ReA", "link": "https://stackoverflow.com/users/8370308/rea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "accepted_answer_id": 45335860, "answer_count": 1, "score": 0, "last_activity_date": 1501097329, "creation_date": 1501094050, "last_edit_date": 1501095588, "question_id": 45334938, "link": "https://stackoverflow.com/questions/45334938/fail-in-working-with-a-eigen-function", "title": "Fail in working with a Eigen function", "body": "<p>The purpose of the mentioned part of my code is solving a linear equation Ax=b for \"A\" as a  square matrix and \"b\" as a vector with the same size:</p>\n\n<p>The problem is, I get fail in compiling when I try to use the function of the Eigen in my function:</p>\n\n<pre><code>#include \"Eigen/Dense\"\nusing namespace Eigen;\n\nvoid StreamTemperature::avgTemperature() {\n\nTotalDist = pm-&gt;get_total_dist();\nvector&lt;vector&lt;double&gt;&gt; A(TotalDist, std::vector&lt;double&gt;(TotalDist));\nvector&lt;double&gt; b_copy;\nVectorXd x_eigen;                               //Eigen format! \nMatrixXd A_eigen(TotalDist, TotalDist);\nVectorXd b_eigen(TotalDist);\n\nfor (int i = 0; i &lt; (TotalDist - 1); i++) {\n    A[i + 1][i] = 1.0;\n    A[i][i] = 5.0;\n    A[i][i + 1] = -1.0;\n}\nA[TotalDist - 1][TotalDist - 1] = b[TotalDist - 1][j] + c[TotalDist - 1][j];\nb_copy.resize(TotalDist);\n    for (int i = 0; i &lt; TotalDist; i++) { b_copy[i] = 10.0; }\n\n    for (int i = 0; i &lt; TotalDist; i++)\n    A_eigen.row(i) = Map&lt;VectorXd&gt;(A[i].data(), TotalTime);\n    for (int i = 0; i &lt; TotalDist; i++)\n    b_eigen(i) = b_copy[i];\n    x_eigen = A_eigen.colPivHouseholderQr().solve(b_eigen);\n\n    for (int i = 0; i &lt; TotalDist; i++) {\n        x[i] = x_eigen(i);\n    }\n\n}\n</code></pre>\n\n<p>The Eigen related part work well in anohter project but I have problem here! \nHere is the compiling error:</p>\n\n<pre><code>1&gt;e:\\suny-files\\spring2017\\summer2017\\runforsyracusemin\\itreecoolnewsw\\eigen\\src/Core/PlainObjectBase.h(659): error C2338: FLOATING_POINT_ARGUMENT_PASSED__INTEGER_WAS_EXPECTED\n1&gt;e:\\suny-files\\spring2017\\summer2017\\runforsyracusemin\\itreecoolnewsw\\eigen\\src/Core/Matrix.h(250): note: see reference to function template instantiation 'void Eigen::PlainObjectBase&lt;Eigen::Matrix&lt;double,-1,-1,0,-1,-1&gt;&gt;::_init2&lt;T0,T1&gt;(int,int,double *)' being compiled\n1&gt;        with\n1&gt;        [\n1&gt;            T0=double,\n1&gt;            T1=double\n1&gt;        ]\n</code></pre>\n\n<p>Any thoughts?! :|</p>\n"}, {"tags": ["c++", "gcc", "linker", "qtserialport"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1501094233, "post_id": 45334793, "comment_id": 77631911, "body": "<b><i>/usr/bin/ld: cannot find -ludev</i></b> Do you need  <code>-ludev</code>? If so maybe install delvelopment libraries for udev."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 1206425, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/fa4dc5ad777e1e7922502b8c57e8c266?s=128&d=identicon&r=PG", "display_name": "Kati Avramova", "link": "https://stackoverflow.com/users/1206425/kati-avramova"}, "edited": false, "score": 0, "creation_date": 1501137616, "post_id": 45335151, "comment_id": 77647538, "body": "Thank you!! Really, that was the problem, the development library was not installed... Thank you!"}], "tags": [], "owner": {"reputation": 1334, "user_id": 1328780, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c0241ebc4503b57de65aa5d289f1d588?s=128&d=identicon&r=PG", "display_name": "bjhend", "link": "https://stackoverflow.com/users/1328780/bjhend"}, "is_accepted": false, "score": 0, "last_activity_date": 1501094866, "creation_date": 1501094866, "answer_id": 45335151, "question_id": 45334793, "link": "https://stackoverflow.com/questions/45334793/linker-error-while-compiling-project-containing-qtserialport-g-kubuntu/45335151#45335151", "title": "Linker error while compiling project containing QtSerialPort (g++, kubuntu)", "body": "<p>Try to install package <code>libudev-dev</code>. For compiling you normally need a package ending on <code>-dev</code> which contains special compilation files. The packages without <code>-dev</code> are usually only for running programs which  dynamically link to a library.</p>\n"}], "owner": {"reputation": 51, "user_id": 1206425, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/fa4dc5ad777e1e7922502b8c57e8c266?s=128&d=identicon&r=PG", "display_name": "Kati Avramova", "link": "https://stackoverflow.com/users/1206425/kati-avramova"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 136, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1501094866, "creation_date": 1501093604, "question_id": 45334793, "link": "https://stackoverflow.com/questions/45334793/linker-error-while-compiling-project-containing-qtserialport-g-kubuntu", "title": "Linker error while compiling project containing QtSerialPort (g++, kubuntu)", "body": "<p>I am trying to compile a project that uses QtSerialPort and I get a link error</p>\n\n<p>g++ -m64 -Wl,-O1 -o eTerm main.o eterm.o tcpclient.o tcpserver.o udpserver.o serialserver.o qrc_eterm.o moc_eterm.o moc_tcpclient.o moc_tcpserver.o moc_udpserver.o moc_serialserver.o   -L/usr/X11R6/lib64 -lQt5Widgets -L/usr/lib/x86_64-linux-gnu -lQt5SerialPort -ludev -lQt5Network -lQt5Gui -lQt5Core -lGL -lpthread \n/usr/bin/ld: cannot find -ludev\ncollect2: error: ld returned 1 exit status\nmake: *** [eTerm] Error 1</p>\n\n<p>I am using QtCreator 5.2.1 under Kubuntu 14.04 </p>\n\n<p>udev is installed and is the last version.\nI only get this error when QtSerialPort is included / used, everything is fine for other projects.</p>\n\n<pre><code>#if QT_VERSION &gt;= QT_VERSION_CHECK(5, 1, 0)\n    #include &lt;QtSerialPort/QtSerialPort&gt;\n#else\n    #include &lt;QSerialPort&gt;\n    #include &lt;QSerialPortInfo&gt;\n#endif\n</code></pre>\n\n<p>The serial port is installed from libqt5serialport5-dev and libqt5serialport5  packages (I had some unsuccessful trials to install it from source at first).</p>\n\n<p>Does anyone has an idea what could be causing this problem?\nThanks!</p>\n"}, {"tags": ["c++", "windows", "newline", "codeblocks"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1501092429, "post_id": 45334429, "comment_id": 77630942, "body": "I don&#39;t understand why you don&#39;t just <code>getline()</code> every line?"}, {"owner": {"reputation": 1, "user_id": 8092749, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154809690367637/picture?type=large", "display_name": "Edward", "link": "https://stackoverflow.com/users/8092749/edward"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1501092566, "post_id": 45334429, "comment_id": 77631016, "body": "I want to read the line into the double vector"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 3, "creation_date": 1501093449, "post_id": 45334429, "comment_id": 77631499, "body": "Your C variant has this line: <code>while(c != &#39;\\n&#39;);</code> There is a semicolon at the end which is interpreted as empty statement. Effectively, this says: Do nothing while <code>c</code> isn&#39;t a newline, which will be true forever. Remove that semicolon."}], "answers": [{"tags": [], "owner": {"reputation": 4313, "user_id": 2706707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BoAxS.gif?s=128&g=1", "display_name": "D&#250;thomhas", "link": "https://stackoverflow.com/users/2706707/d%c3%bathomhas"}, "is_accepted": false, "score": 1, "last_activity_date": 1501093639, "creation_date": 1501093639, "answer_id": 45334802, "question_id": 45334429, "link": "https://stackoverflow.com/questions/45334429/character-by-character-inconsistent-response-to-n/45334802#45334802", "title": "character by character inconsistent response to \\n", "body": "<p>You are using <em>formatted</em> input to get a character when you should be using <em>unformatted</em> input:</p>\n\n<pre><code>char c;\nif (cin.get( c )) ...\n</code></pre>\n\n<p>or</p>\n\n<pre><code>int c;\nc = cin.get();\nif (c != cin.eof()) ...\n</code></pre>\n\n<p>The <code>>></code> operator removes whitespace, including newlines.</p>\n"}, {"tags": [], "owner": {"reputation": 413, "user_id": 2506883, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MzdHq.jpg?s=128&g=1", "display_name": "Fenixrw", "link": "https://stackoverflow.com/users/2506883/fenixrw"}, "is_accepted": false, "score": 0, "last_activity_date": 1501095651, "last_edit_date": 1501095651, "creation_date": 1501093954, "answer_id": 45334906, "question_id": 45334429, "link": "https://stackoverflow.com/questions/45334429/character-by-character-inconsistent-response-to-n/45334906#45334906", "title": "character by character inconsistent response to \\n", "body": "<p>As pointed in the comments, the first one won't work because it have a ; right after the while().\nThe problem with the other two is that the >> operator don't read '\\n' and spaces, they are treated as separators. That's why the last two won't work. </p>\n\n<p>To fix the 1st just remove the ; after the while statement</p>\n\n<pre><code>//while(c != '\\n');\nwhile(c != '\\n')\n{\n    c = fgetc(infile);\n    if(c == ',')\n        i++;\n    if(c == EOF)\n        return(EXIT_FAILURE);\n}\n</code></pre>\n\n<p>And here are my suggestions for  the others:</p>\n\n<p>2nd - forget the while, if you want to skip a line, get a line and do nothing with it.</p>\n\n<pre><code>ifstream infile;\nchar c;\nstring mystr;\n\ninfile.open(\"ostring.dat\");\n\n// Skip a line\ngetline(infile, mystr);\n/*while (c!= '\\n')\n    infile &gt;&gt; c;*/\n\ngetline(infile, mystr);\n</code></pre>\n\n<p>3rd - get the line and use stringstream to get the inputs you need</p>\n\n<pre><code>ifstream emdata;\n\nstring firstline;\nchar c = 0;\nint i = 0;\n\nvector&lt;double&gt; vdata;\n\n// redundancy \nvdata.reserve(10000);\n\n// There are ~ 300 doubles per line\nemdata.open(\"Getty_Megatem.csv\");\n\n// Skip first line\ngetline(emdata, firstline);\n//get second line\ngetline(emdata, firstline);\n// replace commas with spaces\nstd::replace(firstline.begin(),firstline.end(),',',' ');\nstringstream ss(firstline);//\nwhile(ss.rdbuf()-&gt;in_avail()!=0)//loop until buffer is empty\n{\n    ss &gt;&gt; vdata[i];\n    cout &lt;&lt; vdata[i] &lt;&lt; \",\";\n    i++;\n\n    if(i == 999)\n    {\n        cout &lt;&lt; \"\\n\\ni&gt;9999\";\n        break;\n    }\n}\n\n\nemdata.close();\nreturn 0;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8092749, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154809690367637/picture?type=large", "display_name": "Edward", "link": "https://stackoverflow.com/users/8092749/edward"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1501095651, "creation_date": 1501092319, "last_edit_date": 1501092457, "question_id": 45334429, "link": "https://stackoverflow.com/questions/45334429/character-by-character-inconsistent-response-to-n", "title": "character by character inconsistent response to \\n", "body": "<p>I've been struggling with this bug for a while. I'm using windows 10 and code::blocks 16.01 MinGW.</p>\n\n<p>I want to compare c to an end line character. </p>\n\n<p>One program on my system runs successfully, just to skip the header line of a file: </p>\n\n<pre><code>while(c!='\\n')\n{\n    c = fgetc(traverse);\n    if(c == EOF)\n        return(1);\n}\n</code></pre>\n\n<p>where traverse was opened using </p>\n\n<pre><code>fopen(\"traverse.dat\", \"r\");\n</code></pre>\n\n<p>however, my other programs:</p>\n\n<pre><code>FILE * infile;\n\n/* Open a large CSV */\ninfile = fopen(\"Getty_Megatem.csv\", \"r\");\nif(infile == NULL)\n{\n    printf(\"no file\");\n    return(EXIT_FAILURE);\n}\nchar c = 0;\nint i = 0;\n\n/* Opens file successfully */\nprintf(\"File opened\\n\");\n\n/* Count commas in first line */\nwhile(c != '\\n');\n{\n    c = fgetc(infile);\n    if(c == ',')\n        i++;\n    if(c == EOF)\n        return(EXIT_FAILURE);\n}\n\nprintf(\"Number of commas: %i\\n\", i);\n\nfclose(infile);\n\nreturn(EXIT_SUCCESS);\n</code></pre>\n\n<p>and</p>\n\n<pre><code>ifstream infile;\nchar c;\nstring mystr;\n\ninfile.open(\"ostring.dat\");\n\n// Skip a line\nwhile (c!= '\\n')\n    infile &gt;&gt; c;\n\ngetline(infile, mystr);\n</code></pre>\n\n<p>and (the one I REALLY want to work)</p>\n\n<pre><code>ifstream emdata;\n\nstring firstline;\nchar c = 0;\nint i = 0;\n\nvector&lt;double&gt; vdata;\n\n// redundancy \nvdata.reserve(10000);\n\n// There are ~ 300 doubles per line\nemdata.open(\"Getty_Megatem.csv\");\n\n// Skip first line\ngetline(emdata, firstline);\n\nwhile(c != '\\n' &amp;&amp; c != EOF)\n{\n    emdata &gt;&gt; vdata[i] &gt;&gt; c;\n    cout &lt;&lt; vdata[i] &lt;&lt; \",\";\n    i++;\n\n    if(i == 999)\n    {\n        cout &lt;&lt; \"\\n\\ni&gt;9999\";\n        break;\n    }\n}\n\n\nemdata.close();\nreturn 0;\n</code></pre>\n\n<p>are unsuccessful, they compile and execute then read the stream forever - or until my maximum iterations 9999 is reached. All these files contain new lines.</p>\n"}, {"tags": ["c++", "interface", "heap", "shared-ptr", "unique-ptr"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 2, "creation_date": 1501092519, "post_id": 45334412, "comment_id": 77630990, "body": "&quot;Lots of these public methods require heap allocated object as parameters.&quot; Huh? What does that mean?"}, {"owner": {"reputation": 947, "user_id": 7086463, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4855da83c7f8e52c058154993de942d2?s=128&d=identicon&r=PG", "display_name": "Stefano Azzalini", "link": "https://stackoverflow.com/users/7086463/stefano-azzalini"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1501092722, "post_id": 45334412, "comment_id": 77631094, "body": "@FredLarson as in the example above user is heap allocated, it does not live on the stack. (User is not copiable by design hence the need to heap allocate it)"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 2, "creation_date": 1501093375, "post_id": 45334412, "comment_id": 77631465, "body": "I don&#39;t see what heap vs. stack allocation has to do with anything. Do you mean you need to pass by pointer (or reference) instead of passing by value?"}, {"owner": {"reputation": 947, "user_id": 7086463, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4855da83c7f8e52c058154993de942d2?s=128&d=identicon&r=PG", "display_name": "Stefano Azzalini", "link": "https://stackoverflow.com/users/7086463/stefano-azzalini"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1501093528, "post_id": 45334412, "comment_id": 77631536, "body": "@FredLarson exactly"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 2, "creation_date": 1501094268, "post_id": 45334412, "comment_id": 77631932, "body": "@steazzalini being non-copiable has nothing to do with requiring heap allocation. Most of my class are stack allocated, but yet moveable only. You may require heap allocation if move is not an option or either you need polymorphism with ownership of the pointed-to value."}], "answers": [{"comments": [{"owner": {"reputation": 355, "user_id": 8104123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14f31e52ea389847f317d9f6f00bf4f8?s=128&d=identicon&r=PG&f=1", "display_name": "wphicks", "link": "https://stackoverflow.com/users/8104123/wphicks"}, "edited": false, "score": 0, "creation_date": 1501093301, "post_id": 45334650, "comment_id": 77631430, "body": "You might also mention weak_ptr, since this is a semantic indication that the function uses but does not maintain ownership of the data."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1501093302, "post_id": 45334650, "comment_id": 77631431, "body": "&gt; I usually prefer references since they ensure it cannot be null and work well with object in automatic storage, but it&#39;s mostly a matter of taste. Uh, not really. There is some kind of bad, misguided argument to be made (half kidding) in the rare cases where you are mutating the object. But passing something that can&#39;t be null by pointer to const instead of const ref is just horrible and not a matter of taste at all."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 355, "user_id": 8104123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14f31e52ea389847f317d9f6f00bf4f8?s=128&d=identicon&r=PG&f=1", "display_name": "wphicks", "link": "https://stackoverflow.com/users/8104123/wphicks"}, "edited": false, "score": 2, "creation_date": 1501093508, "post_id": 45334650, "comment_id": 77631526, "body": "@wphicks <code>std::weak_ptr</code> is still shared ownership, but yet a non-owning handle."}, {"owner": {"reputation": 355, "user_id": 8104123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14f31e52ea389847f317d9f6f00bf4f8?s=128&d=identicon&r=PG&f=1", "display_name": "wphicks", "link": "https://stackoverflow.com/users/8104123/wphicks"}, "edited": false, "score": 0, "creation_date": 1501093671, "post_id": 45334650, "comment_id": 77631612, "body": "You&#39;re absolutely right. Reference in second paragraph <a href=\"http://en.cppreference.com/w/cpp/memory/weak_ptr\" rel=\"nofollow noreferrer\">here</a> in case anyone had the same misunderstanding I did."}, {"owner": {"reputation": 947, "user_id": 7086463, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4855da83c7f8e52c058154993de942d2?s=128&d=identicon&r=PG", "display_name": "Stefano Azzalini", "link": "https://stackoverflow.com/users/7086463/stefano-azzalini"}, "edited": false, "score": 0, "creation_date": 1501093721, "post_id": 45334650, "comment_id": 77631630, "body": "I totally agree with you @GuillaumeRacicot but the problem remains open for 3rd party implementations which I do not control. I cannot make assumptions about or set limits to the possible implementations. If some implementation decides to, for example, cache the passed users and I choose to use references, the thing is not gonna work."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1501093783, "post_id": 45334650, "comment_id": 77631665, "body": "@NirFriedman I updated that paragraph. Tell me if that explanation is better"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 947, "user_id": 7086463, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4855da83c7f8e52c058154993de942d2?s=128&d=identicon&r=PG", "display_name": "Stefano Azzalini", "link": "https://stackoverflow.com/users/7086463/stefano-azzalini"}, "edited": false, "score": 0, "creation_date": 1501093960, "post_id": 45334650, "comment_id": 77631755, "body": "@steazzalini I added a paragraph about this. Tell me if anything else is needed."}], "tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": true, "score": 6, "last_activity_date": 1501093920, "last_edit_date": 1501093920, "creation_date": 1501093107, "answer_id": 45334650, "question_id": 45334412, "link": "https://stackoverflow.com/questions/45334412/stdunique-ptr-and-stdshared-ptr-as-parameters-for-virtual-functions/45334650#45334650", "title": "std::unique_ptr and std::shared_ptr as parameters for virtual functions", "body": "<p>If <code>doSomethingWithUser</code> don't need ownership, you shouldn't transfer it to this method.</p>\n\n<p>Indeed, copying a shared pointer or moving a unique pointer effectively transfers the ownership of the resource.</p>\n\n<p>Your functions parameters should reflect your intentions about the assumed ownership of the passed resources.</p>\n\n<p>If you only need to observe the value, and maybe mutating it, you should pass a non-owning handle to your function.</p>\n\n<p>If you need to keep the resource alive and maybe deleting it, then you should pass a owning handle, whether it's a shared it unique ownership.</p>\n\n<p>In your case, the name of the function tells me that you need to \"do something with the user\", without containing it passed the caller's lifetime. So you should pass a non owning handle. That handle can be a <code>User*</code> or <code>User&amp;</code>, and even a <code>std::reference_wrapper&lt;User&gt;</code> or a <code>boost::optional&lt;User&amp;&gt;</code>, depending on your needs.</p>\n\n<p>Your interface should indeed express what an object should be able to do, and indeed enforce what parameters should each function take, but your interface should also express what ownership it has over it's parameters.</p>\n\n<p>I usually prefer references since they ensure it cannot be null and work well with object in automatic storage. Some may argue that they prefer raw  pointers as a non-null non-owning handle, but I strongly disagree with that, because they force the <code>&amp;object</code> syntax and allows null.</p>\n\n<p>There is nothing wrong with non-owning raw pointers. However, raw owning pointers should not be used in modern C++.</p>\n"}], "owner": {"reputation": 947, "user_id": 7086463, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4855da83c7f8e52c058154993de942d2?s=128&d=identicon&r=PG", "display_name": "Stefano Azzalini", "link": "https://stackoverflow.com/users/7086463/stefano-azzalini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 420, "favorite_count": 1, "accepted_answer_id": 45334650, "answer_count": 1, "score": 3, "last_activity_date": 1501093920, "creation_date": 1501092281, "question_id": 45334412, "link": "https://stackoverflow.com/questions/45334412/stdunique-ptr-and-stdshared-ptr-as-parameters-for-virtual-functions", "title": "std::unique_ptr and std::shared_ptr as parameters for virtual functions", "body": "<p>I'm designing a C++ class interface based on <code>virtual</code> methods to be able to provide extensibility points.</p>\n\n<p>Lots of these public methods require <code>heap</code> allocated object as parameters.</p>\n\n<p>Since I'm making use of modern C++ patterns I'm planning to use <code>std::unique_ptr</code> or <code>std::shared_ptr</code> for that but I have doubts on both of them.</p>\n\n<p>Using  std::unique_ptr it looks like something like this:</p>\n\n<pre><code>class IFoo {\n  virtual void doSomethingWithUser(std::unique_ptr&lt;User&gt; user) = 0;\n}\n</code></pre>\n\n<p>Forcing the caller to provide <code>std::unique_ptr</code> has downsides:</p>\n\n<ul>\n<li>the caller cannot do any operation on the provided user since it has to be moved</li>\n<li>in case any of <code>doSomethingWithUser</code> implementation needs to store the user in some container, it is not constructible from <code>std::shared_ptr</code></li>\n</ul>\n\n<p>Using <code>std::shared_ptr</code> for all the public methods could solve the problem but we have to pay for extra memory space plus the atomic increment and decrement of the references count.</p>\n\n<p>Is there any rule of thumb I can follow?</p>\n"}, {"tags": ["c++", "function", "class", "c++11", "atomic"], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 1, "last_activity_date": 1501092687, "creation_date": 1501092687, "answer_id": 45334529, "question_id": 45334378, "link": "https://stackoverflow.com/questions/45334378/c11-whats-the-difference-between-atomictstore-and-atomic-storet/45334529#45334529", "title": "C++11: what&#39;s the difference between atomic&lt;T&gt;::store and atomic_store&lt;T&gt;", "body": "<p>Just like you said - one is a class, another is a function. Class have the interface - <code>atomic&lt;T&gt;</code> would provide for stores, loads, proper constructors, etc. </p>\n\n<p>On the other hand, <code>atomic_store</code> could be specialized for your types.</p>\n"}, {"tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 8, "last_activity_date": 1501101596, "creation_date": 1501101596, "answer_id": 45336996, "question_id": 45334378, "link": "https://stackoverflow.com/questions/45334378/c11-whats-the-difference-between-atomictstore-and-atomic-storet/45336996#45336996", "title": "C++11: what&#39;s the difference between atomic&lt;T&gt;::store and atomic_store&lt;T&gt;", "body": "<p>There's no difference in semantics. The free functions were an attempt to achieve source compatibility with C11:</p>\n\n<pre><code>#ifdef __cplusplus\n#include &lt;atomic&gt;\n#define _Atomic(X) std::atomic&lt;X&gt;\n#else\n#include &lt;stdatomic.h&gt;\n#endif\n\n_Atomic(int) c;\n\nint get_c(void) { \n    return atomic_load(&amp;c); \n}\n</code></pre>\n"}], "owner": {"reputation": 5623, "user_id": 6164172, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cfe3f1dd56fc9c05a01393d3c618d727?s=128&d=identicon&r=PG&f=1", "display_name": "Troskyvs", "link": "https://stackoverflow.com/users/6164172/troskyvs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 45336996, "answer_count": 2, "score": 5, "last_activity_date": 1501101748, "creation_date": 1501092163, "last_edit_date": 1501101748, "question_id": 45334378, "link": "https://stackoverflow.com/questions/45334378/c11-whats-the-difference-between-atomictstore-and-atomic-storet", "title": "C++11: what&#39;s the difference between atomic&lt;T&gt;::store and atomic_store&lt;T&gt;", "body": "<p>One is a member function of template class <code>std::atomic</code>, one is template function, seems they do the same thing. As <code>std</code> is a class library, why it provides both class and none-class version of, I think the same operation?</p>\n\n<p>Is there any real differences between them?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1501092176, "post_id": 45334325, "comment_id": 77630794, "body": "You could use the syntax <code>result_map[iter] = a;</code>."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 2, "creation_date": 1501092215, "post_id": 45334325, "comment_id": 77630815, "body": "<i>&quot;...but that gave me an error&quot;</i>: always useful to include the error in your post."}, {"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1501092219, "post_id": 45334325, "comment_id": 77630818, "body": "1. Yes, 2. &quot;but that gave me an error.&quot; - what error? I get no errors when trying to do <code>result_map[key].function()</code>"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1501092320, "post_id": 45334325, "comment_id": 77630874, "body": "<b><i>error: no matching function for call to \u2018A::A()\u2019</i></b> Class <code>A</code> has no default constructor but has one that requires 2 parameters."}, {"owner": {"reputation": 1457, "user_id": 1710373, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ebb12cdade30bee0da8d78ceba86a8f3?s=128&d=identicon&r=PG", "display_name": "BillyJean", "link": "https://stackoverflow.com/users/1710373/billyjean"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1501092384, "post_id": 45334325, "comment_id": 77630914, "body": "@drescherjm Why is a default constructor necessary when trying to invoke a member function? The objects are already initialized"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1501093306, "post_id": 45334325, "comment_id": 77631434, "body": "@ThomasMatthews no he could not, that would not compile"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 2, "creation_date": 1501093399, "post_id": 45334325, "comment_id": 77631480, "body": "@BillyJean default constructor is necessary for <code>std::map::operator[]</code>, not to invoke member function."}], "answers": [{"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 5, "last_activity_date": 1501092480, "creation_date": 1501092480, "answer_id": 45334473, "question_id": 45334325, "link": "https://stackoverflow.com/questions/45334325/storing-objects-in-an-stdmap/45334473#45334473", "title": "Storing objects in an std::map", "body": "<blockquote>\n  <p>Is this the professional C++-way to store objects in an std::map in the above case?</p>\n</blockquote>\n\n<p>It is fine, simpler code could be:</p>\n\n<pre><code>result_map.emplace(iter, A(iter, \"bb\") );\n</code></pre>\n\n<p>you should use whatever you find more readable. By the way calling integer counter <code>iter</code> is not a way to write a readable code.</p>\n\n<blockquote>\n  <p>How would I go about calling a member function of, say, result_map[0]?</p>\n</blockquote>\n\n<p>You better use <code>std::map::find</code>:</p>\n\n<pre><code>auto f = result_map.find( 0 );\nif( f != result_map.end() ) f-&gt;output_a();\n</code></pre>\n\n<p>problem with <code>operator[]</code> in your case - it has to create and instance if object does not exist with that index but you do not have default ctor for <code>A</code>.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5880324"}, "is_accepted": false, "score": 0, "last_activity_date": 1501095150, "last_edit_date": 1501095150, "creation_date": 1501092702, "answer_id": 45334535, "question_id": 45334325, "link": "https://stackoverflow.com/questions/45334325/storing-objects-in-an-stdmap/45334535#45334535", "title": "Storing objects in an std::map", "body": "<p>1- <strong>It depends:</strong> If your class can be copied and you're not worried about performance issues with copying objects into the map, then that's a good way to do it. However, if say your class held <strong>any</strong> immutable data (<code>std::mutex</code> for example) you'd have to use a pointer, as the copy constructor c++ automatically generates would be ill formed, so it merely wouldn't be able to copy the class</p>\n\n<p>2- <code>result_map.at(0).output_a()</code> or <code>result_map.at(0)-&gt;output_a()</code> if you're using a map of pointers</p>\n"}], "owner": {"reputation": 1457, "user_id": 1710373, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ebb12cdade30bee0da8d78ceba86a8f3?s=128&d=identicon&r=PG", "display_name": "BillyJean", "link": "https://stackoverflow.com/users/1710373/billyjean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2507, "favorite_count": 0, "accepted_answer_id": 45334473, "answer_count": 2, "score": 0, "last_activity_date": 1501095150, "creation_date": 1501091993, "last_edit_date": 1501092257, "question_id": 45334325, "link": "https://stackoverflow.com/questions/45334325/storing-objects-in-an-stdmap", "title": "Storing objects in an std::map", "body": "<p>I'd like to store objects of a class in an <code>std::map</code>. Here is a working example showing how I am doing it currenty</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;map&gt;\n\nclass A\n{\nprivate:\n  int a;\n  std::string b;\n\npublic:\n  A(int init_a, std::string init_b) : a(init_a), b(init_b){};  \n  void output_a() {std::cout &lt;&lt; a &lt;&lt; \"\\n\";}\n};\n\nint main()\n{\n  std::map&lt;size_t, A&gt; result_map;\n  for (size_t iter = 0; iter &lt; 10; ++iter)\n  {\n    A a(iter, \"bb\");\n    result_map.insert(std::make_pair(iter, a));\n  }\n\n  return 0;\n}\n</code></pre>\n\n<p>I have two question to this example:</p>\n\n<ol>\n<li><p>Is this the professional C++-way to store objects in an <code>std::map</code> in the above case? Or should I create a pointer to an object of <code>A</code> and store that instead? I like the first (current) option as I don't have to worry about memory management myself by using <code>new</code> and <code>delete</code> - but most importantly I'd like to do things properly.</p></li>\n<li><p>How would I go about calling a member function of, say, <code>result_map[0]</code>? I naively tried <code>result_map[0].output_a()</code>, but that gave me the error: <code>error: no matching function for call to \u2018A::A()\u2019</code> </p></li>\n</ol>\n"}, {"tags": ["c++", "algorithm", "fenwick-tree", "binary-indexed-tree"], "comments": [{"owner": {"reputation": 65718, "user_id": 844416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e39c2364935265593d76247ddc6d07c?s=128&d=identicon&r=PG", "display_name": "MBo", "link": "https://stackoverflow.com/users/844416/mbo"}, "edited": false, "score": 1, "creation_date": 1501094005, "post_id": 45334297, "comment_id": 77631781, "body": "Using expression (v1-v2-v4+v3) is known trick to calculate sum of elements inside rectangle fast: <a href=\"https://en.wikipedia.org/wiki/Summed-area_table\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Summed-area_table</a>"}], "answers": [{"comments": [{"owner": {"reputation": 136, "user_id": 7732666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91e570b84552f353745648f59d6d55f5?s=128&d=identicon&r=PG&f=1", "display_name": "goku", "link": "https://stackoverflow.com/users/7732666/goku"}, "edited": false, "score": 0, "creation_date": 1501095995, "post_id": 45335161, "comment_id": 77632864, "body": "Why are we subtracting? In case of 1d binary indexed tree we never subtract the values previously added before a particular value in the BIT array, but here why are we subtracting the previously added values to the BIT array if they lies within the block of the newely added value indexes? Can&#39;t we just add the aux[i][j] in the BIT array at the desired positions?"}, {"owner": {"reputation": 30866, "user_id": 1139393, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4f7f66aa636f33c3e5784d3581213ba8?s=128&d=identicon&r=PG", "display_name": "Peter de Rivaz", "link": "https://stackoverflow.com/users/1139393/peter-de-rivaz"}, "reply_to_user": {"reputation": 136, "user_id": 7732666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91e570b84552f353745648f59d6d55f5?s=128&d=identicon&r=PG&f=1", "display_name": "goku", "link": "https://stackoverflow.com/users/7732666/goku"}, "edited": false, "score": 0, "creation_date": 1501097058, "post_id": 45335161, "comment_id": 77633427, "body": "Yes, I believe you can just add aux[i][j] at the desired positions.  I think the subtraction is just old code that has been copied in.  The point is you will need the subtraction if you want to later change the value to a different value.  If you don&#39;t need to change the value then you should probably be just using a summed area table instead."}], "tags": [], "owner": {"reputation": 30866, "user_id": 1139393, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4f7f66aa636f33c3e5784d3581213ba8?s=128&d=identicon&r=PG", "display_name": "Peter de Rivaz", "link": "https://stackoverflow.com/users/1139393/peter-de-rivaz"}, "is_accepted": false, "score": 0, "last_activity_date": 1501094909, "creation_date": 1501094909, "answer_id": 45335161, "question_id": 45334297, "link": "https://stackoverflow.com/questions/45334297/can-someone-provide-me-the-algorithm-of-2-d-binary-indexed-tree/45335161#45335161", "title": "can someone provide me the algorithm of 2-d binary indexed tree?", "body": "<p>There is a good explanation of 2d binary indexed trees on <a href=\"https://www.topcoder.com/community/data-science/data-science-tutorials/binary-indexed-trees/#2d\" rel=\"nofollow noreferrer\">topcoder</a>.</p>\n\n<p>To understand the <code>aux[i][j]-(v1-v2-v4+v3)</code> note that:</p>\n\n<ol>\n<li><code>getSum(BIT,i,j)</code> returns the sum of all elements in a rectangle with top-left at the origin, and bottom-right at coordinates i,j.</li>\n<li>therefore <code>getSum(BIT, i, j)-getSum(BIT, i, j-1)</code> is the sum of all elements in row j across to column i</li>\n<li>therefore <code>getSum(BIT, i-1, j)-getSum(BIT, i-1, j-1)</code> is the sum of all elements in row j across to column i-1</li>\n<li>therefore <code>v1-v2-v4+v3</code> is value of entry at position i,j</li>\n</ol>\n\n<p>The update code works by adding a value at a position.  In this code they want to set the value to a particular choice in <code>aux[i][j]</code> so the way to do that is to add the difference between the target value and the current value.</p>\n\n<p>(Having said that, this code updates each value in turn, so you should find that v1-v2-v4+v3 is always equal to zero because every value starts cleared)</p>\n"}], "owner": {"reputation": 136, "user_id": 7732666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91e570b84552f353745648f59d6d55f5?s=128&d=identicon&r=PG&f=1", "display_name": "goku", "link": "https://stackoverflow.com/users/7732666/goku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 521, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1501094909, "creation_date": 1501091914, "question_id": 45334297, "link": "https://stackoverflow.com/questions/45334297/can-someone-provide-me-the-algorithm-of-2-d-binary-indexed-tree", "title": "can someone provide me the algorithm of 2-d binary indexed tree?", "body": "<p>I searched on internet but couldn't find a good one.\nI got some help from geeksforgeeks.org but can't understand the construction part where we are subtracting v1-v2-v2-v4+v3 from aux[i][j] while updating the BIT array. Just let me know why we are subtracting here.</p>\n\n<pre><code>void constructAux(int mat[][N], int aux[][N+1])\n{\n    // Initialise Auxiliary array to 0\n    for (int i=0; i&lt;=N; i++)\n        for (int j=0; j&lt;=N; j++)\n            aux[i][j] = 0;\n\n    // Construct the Auxiliary Matrix\n    for (int j=1; j&lt;=N; j++)\n        for (int i=1; i&lt;=N; i++)\n            aux[i][j] = mat[N-j][i-1];\n\n    return;\n}\n\n// A function to construct a 2D BIT\nvoid construct2DBIT(int mat[][N], int BIT[][N+1])\n{\n    // Create an auxiliary matrix\n    int aux[N+1][N+1];\n    constructAux(mat, aux);\n\n    // Initialise the BIT to 0\n    for (int i=1; i&lt;=N; i++)\n        for (int j=1; j&lt;=N; j++)\n            BIT[i][j] = 0;\n\n    for (int j=1; j&lt;=N; j++)\n    {\n        for (int i=1; i&lt;=N; i++)\n        {\n            // Creating a 2D-BIT using update function\n            // everytime we/ encounter a value in the\n            // input 2D-array\n            int v1 = getSum(BIT, i, j);\n            int v2 = getSum(BIT, i, j-1);\n            int v3 = getSum(BIT, i-1, j-1);\n            int v4 = getSum(BIT, i-1, j);\n\n            // Assigning a value to a particular element\n            // of 2D BIT\n            updateBIT(BIT, i, j, aux[i][j]-(v1-v2-v4+v3));\n        }\n    }\n    return;\n}\n</code></pre>\n"}, {"tags": ["python", "c++", "image-processing", "cython", "3d-reconstruction"], "comments": [{"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1501092799, "post_id": 45334174, "comment_id": 77631144, "body": "Given that the c++ code doesn&#39;t support complex values, how do you imagine the algorithm should be applied to complex numbers. You could just call abs on the input array? Or work with the real and imaginary parts separately?"}, {"owner": {"reputation": 1, "user_id": 5637815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bpH55.jpg?s=128&g=1", "display_name": "paggers", "link": "https://stackoverflow.com/users/5637815/paggers"}, "reply_to_user": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1501092933, "post_id": 45334174, "comment_id": 77631236, "body": "I&#39;m currently testing several different ways of approach, like you suggested abs() and imaginary and real separate, as well as separating to phase and magnitude. I wasn&#39;t actually aware that there is no support of complex values in c++, so I guess this answers my question. Thank you David."}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1501093792, "post_id": 45334174, "comment_id": 77631672, "body": "No, there is support for complex values in c++, but the library you want to use doesn&#39;t look to accept them, so you&#39;d have to modify that too. It isn&#39;t clear from your question exactly what bits of code you&#39;re wanting to change (the Cython, the C++, both?) and what mathematical outcome you&#39;re expecting."}, {"owner": {"reputation": 1, "user_id": 5637815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bpH55.jpg?s=128&g=1", "display_name": "paggers", "link": "https://stackoverflow.com/users/5637815/paggers"}, "reply_to_user": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1501182070, "post_id": 45334174, "comment_id": 77679432, "body": "I am working with images in the Fourier Domain (MRI). <a href=\"http://www.cs.tut.fi/~foi/GCF-BM3D/\" rel=\"nofollow noreferrer\">BM3D</a> is a state of the art denoiser which I&#39;m trying to experiment with, but as you might tell, I haven&#39;t worked much with Cython before this week. My questions boils down to what&#39;ll be the simplest work around to give a natural solution to working with complex values within BM3D. I tried separating the signal to Phase and Magnitude, as well as Imaginary and Real, which have given me somewhat decent results, but it also requires manipulation of values of noise given within my algorithms."}], "owner": {"reputation": 1, "user_id": 5637815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bpH55.jpg?s=128&g=1", "display_name": "paggers", "link": "https://stackoverflow.com/users/5637815/paggers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 325, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1501091480, "creation_date": 1501091480, "question_id": 45334174, "link": "https://stackoverflow.com/questions/45334174/cython-complex-values-and-bm3d-algorithm", "title": "Cython, Complex values, and BM3D algorithm", "body": "<p>I am working on a image reconstruction algorithm and I found <a href=\"https://github.com/ericmjonas/pybm3d\" rel=\"nofollow noreferrer\">this repo</a> online that would work great with my code, but unfortunately it doesnt seem to support complex valued calculations. I've read up on cython the past couple of days, but I'm pressed for time and I wanted to ask for advice before bull-dozering all over the code.</p>\n\n<p>To be more exact, this is the Cython file:</p>\n\n<pre><code>from libcpp.vector cimport vector\nfrom libcpp cimport bool\ncimport numpy as np\nimport numpy as np\n\ncdef extern from \"../bm3d_src/mt19937ar.h\":\ndouble mt_genrand_res53()\n\ncdef extern from \"../bm3d_src/bm3d.h\":\nint run_bm3d( const float sigma, vector[float] &amp;img_noisy, \n              vector[float] &amp;img_basic,\n              vector[float] &amp;img_denoised, \n              const unsigned width, \n              const unsigned height, \n              const unsigned chnls, \n              const bool useSD_h, \n              const bool useSD_w, \n              const unsigned tau_2D_hard, \n              const unsigned tau_2D_wien, \n              const unsigned color_space)\n\ncdef extern from \"../bm3d_src/utilities.h\":\nint save_image(char * name, vector[float] &amp; img, \n               const unsigned width, \n               const unsigned height, \n               const unsigned chnls)\n\n\ndef hello():\nreturn \"Hello World\"\n\ndef random():\nreturn mt_genrand_res53()\n\ncpdef float[:, :, :] bm3d(float[:, :, :] input_array, \n                      float sigma, \n                      bool useSD_h = True, \n                      bool useSD_w = True, \n                      str tau_2D_hard = \"DCT\", \n                      str tau_2D_wien = \"DCT\"\n                      ):\n\"\"\"\nsigma: value of assumed noise of the noisy image;\ninput_array : input image, H x W x channum\nuseSD_h (resp. useSD_w): if true, use weight based\non the standard variation of the 3D group for the\nfirst (resp. second) step, otherwise use the number\nof non-zero coefficients after Hard Thresholding\n(resp. the norm of Wiener coefficients);\n\ntau_2D_hard (resp. tau_2D_wien): 2D transform to apply\non every 3D group for the first (resp. second) part.\nAllowed values are 'DCT' and 'BIOR';\n# FIXME : add color space support; right now just RGB\n\"\"\"\n\ncdef vector[float] input_image\ncdef vector[float] basic_image\ncdef vector[float] output_image\ncdef vector[float] denoised_image\n\nheight = input_array.shape[0]\nwidth = input_array.shape[1]\nchnls = input_array.shape[2]\n\n\n# convert the input image\ninput_image.resize(input_array.size)\npos = 0\nfor i in range(input_array.shape[0]):\n    for j in range(input_array.shape[1]):\n        for k in range(input_array.shape[2]):\n            input_image[pos] = input_array[i, j, k]\n            pos +=1 \n\n\nif tau_2D_hard == \"DCT\":\n    tau_2D_hard_i = 4\nelif tau_2D_hard == \"BIOR\" :\n    tau_2D_hard_i = 5\nelse:\n    raise ValueError(\"Unknown tau_2d_hard, must be DCT or BIOR\")\n\nif tau_2D_wien == \"DCT\":\n    tau_2D_wien_i = 4\nelif tau_2D_wien == \"BIOR\" :\n    tau_2D_wien_i = 5\nelse:\n    raise ValueError(\"Unknown tau_2d_wien, must be DCT or BIOR\")\n\n# FIXME someday we'll have color support\ncolor_space = 0\n\nret = run_bm3d(sigma, input_image, basic_image, output_image, \n               width, height, chnls, \n               useSD_h, useSD_w, \n               tau_2D_hard_i, tau_2D_wien_i, \n               color_space)\nif ret != 0:\n    raise Exception(\"run_bmd3d returned an error, retval=%d\" % ret)\n\ncdef np.ndarray output_array = np.zeros([height, width, chnls], \n                                        dtype = np.float32)\n\n\npos = 0\nfor i in range(input_array.shape[0]):\n    for j in range(input_array.shape[1]):\n        for k in range(input_array.shape[2]):\n            output_array[i, j, k] = output_image[pos]\n            pos +=1 \n\nreturn output_array\n</code></pre>\n\n<p>How would I go about making the most minimal changes such that it'll work with numpy array with dtype='complex'?</p>\n\n<p>Cheers!</p>\n"}, {"tags": ["c++", "offset", "pointer-to-member", "class-members"], "comments": [{"owner": {"reputation": 1073, "user_id": 3763139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gkUYr.jpg?s=128&g=1", "display_name": "Sopel", "link": "https://stackoverflow.com/users/3763139/sopel"}, "edited": false, "score": 6, "creation_date": 1501090744, "post_id": 45333940, "comment_id": 77629901, "body": "because it does not make sense otherwise"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1501090849, "post_id": 45333940, "comment_id": 77629968, "body": "Can you give a more specific example, especially in terms of code you don&#39;t understand? Are you asking about <a href=\"https://stackoverflow.com/questions/670734/c-pointer-to-class-data-member\">this situation</a>?"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 2, "creation_date": 1501090916, "post_id": 45333940, "comment_id": 77630010, "body": "What else would it contain?"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1501090924, "post_id": 45333940, "comment_id": 77630016, "body": "A pointer-to-data-member is a transform from an object address to a member subobject address.  How do you think that transform works?  What is the relationship between these two addresses?"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1501090962, "post_id": 45333940, "comment_id": 77630032, "body": "@KerrekSB: Lots of stuff if it has to work with virtual inheritance..."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 1, "creation_date": 1501091073, "post_id": 45333940, "comment_id": 77630109, "body": "@anatolyg: That&#39;s about functions, while I&#39;m pretty sure this question concerns data members."}, {"owner": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "edited": false, "score": 0, "creation_date": 1501091145, "post_id": 45333940, "comment_id": 77630151, "body": "You need to go back and understand the C++ object model. Otherwise you won&#39;t finish your homework."}, {"owner": {"reputation": 3339, "user_id": 2279059, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/IRm4P.jpg?s=128&g=1", "display_name": "Florian Winter", "link": "https://stackoverflow.com/users/2279059/florian-winter"}, "edited": false, "score": 1, "creation_date": 1501091426, "post_id": 45333940, "comment_id": 77630322, "body": "You may want to look at this question as well: <a href=\"https://stackoverflow.com/questions/13875786/pointers-to-members-representations\" title=\"pointers to members representations\">stackoverflow.com/questions/13875786/&hellip;</a>"}, {"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1501091493, "post_id": 45333940, "comment_id": 77630358, "body": "I clarified the question; I hope I didn&#39;t hijack it to an unrelated topic."}], "answers": [{"comments": [{"owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "edited": false, "score": 0, "creation_date": 1501091601, "post_id": 45334083, "comment_id": 77630420, "body": "Can you name a modern architecture where pointer != address, <i>except</i> for pointer-to-members?"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "edited": false, "score": 2, "creation_date": 1501091819, "post_id": 45334083, "comment_id": 77630555, "body": "@zneak: All of them that have a memory management unit.  A pointer contains a page identifier and an offset.  The page identifier gets mapped by the MMU to an actual physical address, and the mapping often depends on other CPU registers so that different &quot;processes&quot; can each have unique mappings.  For convenience, we refer to this (packed page identifier plus offset) as a &quot;virtual address&quot;."}, {"owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1501091940, "post_id": 45334083, "comment_id": 77630625, "body": "@BenVoigt, I&#39;m talking about the C++ definition of a pointer vs. the assembly definition of an address."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "edited": false, "score": 0, "creation_date": 1501092012, "post_id": 45334083, "comment_id": 77630680, "body": "@zneak: And then there are also &quot;based&quot; pointers, and cross-device pointers (for example used with CUDA), where the stored value has no meaning if passed to an instruction that expects an address."}, {"owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1501092095, "post_id": 45334083, "comment_id": 77630734, "body": "@BenVoigt, I don&#39;t think that any of these can work with unadulterated C++."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "edited": false, "score": 0, "creation_date": 1501092142, "post_id": 45334083, "comment_id": 77630776, "body": "@zneak, I just said - any C++ script."}, {"owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "edited": false, "score": 0, "creation_date": 1501094399, "post_id": 45334083, "comment_id": 77631996, "body": "@SergeyA, I&#39;ve never heard of C++ scripts. I can find a handful of implementations, but they all compile to machine code. I don&#39;t think that you could reasonably implement C++, especially with regards to memory aliasing, in a way that a data pointer is not some form of address."}, {"owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "edited": false, "score": 1, "creation_date": 1501094767, "post_id": 45334083, "comment_id": 77632182, "body": "What I wanted to get to is that saying &quot;you should be mindful that a C++ pointer is not necessarily a machine address&quot; is throwing shade on an association that is largely correct. I find it much more useful and easy to teach that pointers-to-members co-opt the &quot;pointer&quot; name without having much to do with them, than to teach that pointers were never what you thought they were."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 3, "last_activity_date": 1501091127, "creation_date": 1501091127, "answer_id": 45334083, "question_id": 45333940, "link": "https://stackoverflow.com/questions/45333940/in-c-why-do-pointers-to-members-of-a-class-contains-offsets-rather-than-addre/45334083#45334083", "title": "In C++, why do pointers to members of a class contains offsets rather than addresses?", "body": "<p>Pointers do not have to contain addresses. Pointers are tools to access a certain object indirectly - i.e. write code which would access an object which is unknown at compile time. Example:</p>\n\n<pre><code>a = 10; // It is known at compile time, 10 is written to object a\n*pi = 10; // It is not known at compile time where 10 is written to\n</code></pre>\n\n<p>For normal objects, having address in the pointer is a cheapest way to achieve this goal (however, it won't be the case for C++ script!).</p>\n\n<p>For members, though, normal address wouldn't work - there is no such thing as an address of a member of the class! You can only know the physical address of the member when you have a class object.</p>\n\n<p>So, you have to use some sort of offset, which you than can translate to physical address once the actual object is known.</p>\n"}, {"tags": [], "owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "is_accepted": false, "score": 9, "last_activity_date": 1501091566, "creation_date": 1501091566, "answer_id": 45334204, "question_id": 45333940, "link": "https://stackoverflow.com/questions/45333940/in-c-why-do-pointers-to-members-of-a-class-contains-offsets-rather-than-addre/45334204#45334204", "title": "In C++, why do pointers to members of a class contains offsets rather than addresses?", "body": "<p>A pointer to a class member differs from a regular pointer in that it by itself doesn't actually point at a single location in memory. For example, if you have this setup:</p>\n\n<pre><code>struct MyStruct {\n    int x;\n    int y;\n};\n\nint MyStruct::* ptr = &amp;MyStruct::y;\n</code></pre>\n\n<p>Then the pointer <code>ptr</code> isn't actually pointing to a memory address because there is no one object <code>MyStruct::y</code>. Rather, each instance of <code>MyStruct</code> has its own copy of the data member <code>y</code>.</p>\n\n<p>The C++ standard doesn't mandate how pointers-to-member are actually implemented, but a common strategy is to have the pointer-to-member store an offset in bytes from the base of the object to the field in question. That way, when you write something like</p>\n\n<pre><code>MyStruct ms;\nms.*ptr = 137;\n</code></pre>\n\n<p>The compiler can generate code that says \"go to the base address of <code>ms</code>, skip forward a number of bytes specified by the value stored in <code>ptr</code>, then write 137.\"</p>\n"}, {"comments": [{"owner": {"reputation": 2234, "user_id": 3052438, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/X9OWu.png?s=128&g=1", "display_name": "NO_NAME", "link": "https://stackoverflow.com/users/3052438/no-name"}, "edited": false, "score": 0, "creation_date": 1588180480, "post_id": 45334639, "comment_id": 108803560, "body": "&quot;meaning they are not regular functions/variables with an extra object parameter&quot; Yes, they are! <a href=\"https://godbolt.org/z/QPYJZE\" rel=\"nofollow noreferrer\">godbolt.org/z/QPYJZE</a> I don&#39;t know if it is enforced by the standard but this is how most implementations does it. Pointers to members are special not because how methods work but to account for inheritance, especially multiple inheritance."}, {"owner": {"reputation": 1334, "user_id": 1328780, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c0241ebc4503b57de65aa5d289f1d588?s=128&d=identicon&r=PG", "display_name": "bjhend", "link": "https://stackoverflow.com/users/1328780/bjhend"}, "reply_to_user": {"reputation": 2234, "user_id": 3052438, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/X9OWu.png?s=128&g=1", "display_name": "NO_NAME", "link": "https://stackoverflow.com/users/3052438/no-name"}, "edited": false, "score": 0, "creation_date": 1588859369, "post_id": 45334639, "comment_id": 109066727, "body": "Of course, the compiler finally resolves any pointer-to-member to a memory address, because that&#39;s the purpose of any pointers.  However, on C++ level pointers-to-members are different from regular pointers in the sense that you cannot use them like normal pointers.  I assume this gives the compiler makers more freedom in implementing pointer-to-members, although not every compiler may use that freedom. C++ is intended to support any type of memory organization, not only the linear addressing of today&#39;s x86."}, {"owner": {"reputation": 2234, "user_id": 3052438, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/X9OWu.png?s=128&g=1", "display_name": "NO_NAME", "link": "https://stackoverflow.com/users/3052438/no-name"}, "edited": false, "score": 0, "creation_date": 1588864627, "post_id": 45334639, "comment_id": 109070129, "body": "Hmm, I know where my confusion came from. I actually think what you&#39;ve written here is correct when it comes to member variables. However, member functions are different. They are basically normal functions with an additional parameter. (I know that OP asked about member variables.) You put functions and variables into a single basket but they are not that similar. I don&#39;t think pointers to these things are created in the same way. I&#39;m gonna do some research."}, {"owner": {"reputation": 2234, "user_id": 3052438, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/X9OWu.png?s=128&g=1", "display_name": "NO_NAME", "link": "https://stackoverflow.com/users/3052438/no-name"}, "edited": false, "score": 0, "creation_date": 1588866030, "post_id": 45334639, "comment_id": 109070998, "body": "It turns out that pointer to non-static member functions are a department of quantum physics. I think they can be optimized to be like normal pointer to functions in simpler cases but when virtuality comes into view, they go absolutely crazy; total implementation defined mess. So, I think you answer is correct, except the first paragraph. Objections from my first comment are still valid. Pointers to members are a madhouse but implementation of members themselves is pretty simple."}, {"owner": {"reputation": 1334, "user_id": 1328780, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c0241ebc4503b57de65aa5d289f1d588?s=128&d=identicon&r=PG", "display_name": "bjhend", "link": "https://stackoverflow.com/users/1328780/bjhend"}, "reply_to_user": {"reputation": 2234, "user_id": 3052438, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/X9OWu.png?s=128&g=1", "display_name": "NO_NAME", "link": "https://stackoverflow.com/users/3052438/no-name"}, "edited": false, "score": 0, "creation_date": 1589653000, "post_id": 45334639, "comment_id": 109381237, "body": "@NO_NAME I&#39;ve removed the maybe too generalized first paragraph and added an example of a weird addressing scheme to exemplify it better."}], "tags": [], "owner": {"reputation": 1334, "user_id": 1328780, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c0241ebc4503b57de65aa5d289f1d588?s=128&d=identicon&r=PG", "display_name": "bjhend", "link": "https://stackoverflow.com/users/1328780/bjhend"}, "is_accepted": false, "score": 1, "last_activity_date": 1589652899, "last_edit_date": 1589652899, "creation_date": 1501093052, "answer_id": 45334639, "question_id": 45333940, "link": "https://stackoverflow.com/questions/45333940/in-c-why-do-pointers-to-members-of-a-class-contains-offsets-rather-than-addre/45334639#45334639", "title": "In C++, why do pointers to members of a class contains offsets rather than addresses?", "body": "<p>In C++ class members are closely related to their respective class. Thus, a declaration of a pointer to member always contains the class it belongs to. If this results in an offset into the class instance stored in the pointer or something else is not specified.</p>\n\n<p>That way the C++ standard supports nearly any memory addressing scheme like, for example, the non-linear page::offset addresses of early x86, where you had to distinguish between near and far pointers for better performance.</p>\n\n<p>A different case are <code>static</code> class members. They are like global functions/variables in the namespace of the class, eventually with <code>protected</code> or <code>private</code> access restrictions. You may retrieve pointers to <code>static</code> elements and use them like regular pointers.</p>\n"}, {"tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": false, "score": 3, "last_activity_date": 1501095340, "creation_date": 1501095340, "answer_id": 45335283, "question_id": 45333940, "link": "https://stackoverflow.com/questions/45333940/in-c-why-do-pointers-to-members-of-a-class-contains-offsets-rather-than-addre/45335283#45335283", "title": "In C++, why do pointers to members of a class contains offsets rather than addresses?", "body": "<p>Pointers-to-members are not pointers.</p>\n\n<p>The C++ type system contains several kinds of <em>compound types</em>, and there are two separate, sibling kinds of compound types that are not related to one another, despite having similar sounding names: Pointers, and \"pointers to non-static class members\". I'll call the latter \"pointer-to-members\", with hyphen, to stress that those are not a special kind of pointer, but really something entirely separate.</p>\n\n<p>By the way, the type trait library separates the two concepts via <a href=\"http://en.cppreference.com/w/cpp/types/is_pointer\" rel=\"nofollow noreferrer\"><code>std::is_pointer</code></a> and <a href=\"http://en.cppreference.com/w/cpp/types/is_member_pointer\" rel=\"nofollow noreferrer\"><code>std::is_member_pointer</code></a>.</p>\n\n<p>The two kinds of types serve entirely distinct purposes:</p>\n\n<ul>\n<li><p>A pointer can represent the <em>address of an object (or function)</em> (or be null). That is, given a dereferenceable pointer, there is an actual concrete thing there that it's pointing at.</p></li>\n<li><p>A pointer-to-member represents an abstract reference from a <em>class</em> to a non-static class member. Note that there are no objects involved. Such a pointer value does not point at anything concrete, and it has no concept of \"dereferencing\".</p></li>\n</ul>\n\n<p>To repeat the final sentence: A pointer-to-member cannot be dereferenced, and it is not in any sense the address of an object. Rather, a pointer-to-member (specifically, to data member) can be <em>applied to</em> an object instance of its class, and <em>together with the object</em> it selects the subobject of that object corresponding to the class member that it represents. (Pointers-to-member-function have a slightly different notion of being applied to an instance; the result of the application is a function call.)</p>\n\n<p>Returning to your question at last: A pointer holds an address of an object or function because it points at an object or function. A pointer-to-member does not hold an address, because it doesn't point at anything; it represents a relationship.</p>\n"}], "owner": {"reputation": 187, "user_id": 4015215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d757c59a90b2d4f542e9d40ec30fce?s=128&d=identicon&r=PG&f=1", "display_name": "Nitesh", "link": "https://stackoverflow.com/users/4015215/nitesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 628, "favorite_count": 2, "answer_count": 4, "score": 6, "last_activity_date": 1589652899, "creation_date": 1501090673, "last_edit_date": 1501092826, "question_id": 45333940, "link": "https://stackoverflow.com/questions/45333940/in-c-why-do-pointers-to-members-of-a-class-contains-offsets-rather-than-addre", "title": "In C++, why do pointers to members of a class contains offsets rather than addresses?", "body": "<p>Normally pointers contain addresses. Why do pointers to member of a class contain offsets?</p>\n\n<p>Talking about pointers to class <em>data</em> members, not pointers to member functions.</p>\n"}, {"tags": ["c++", "multithreading", "c++11", "pthreads", "boost-thread"], "comments": [{"owner": {"reputation": 952, "user_id": 5449818, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eYyPG.jpg?s=128&g=1", "display_name": "ikleschenkov", "link": "https://stackoverflow.com/users/5449818/ikleschenkov"}, "edited": false, "score": 0, "creation_date": 1501092244, "post_id": 45333898, "comment_id": 77630835, "body": "Check the value returned by the <code>std::signal(SIGUSR1, callback);</code>. Setting a signal handler can be disabled on some implementations. In that case you will get <code>SIG_ERR</code> (-1)"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1501095753, "post_id": 45333898, "comment_id": 77632741, "body": "You can&#39;t just stop a thread (main or otherwise) dead in its tracks, have it execute some code, and then resume it like nothing happened. The thread must be written in a way where it checks for work to do, and then does that work. For example, it could be a consumer in a <a href=\"https://www.cs.cornell.edu/courses/cs3110/2010fa/lectures/lec18.html\" rel=\"nofollow noreferrer\">producer-consumer</a> arrangement."}], "answers": [{"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 12, "last_activity_date": 1501096401, "creation_date": 1501096401, "answer_id": 45335593, "question_id": 45333898, "link": "https://stackoverflow.com/questions/45333898/execute-callback-function-on-main-thread-from-stdthread/45335593#45335593", "title": "Execute callback function on main thread from std::thread", "body": "<p>There are a few ways to do this.</p>\n\n<p>First, your main thread could be running a <em>message loop</em>.  In which case, you queue up a message with a payload that tells the main thread to run some code (either carry the code to run via a pointer part of the message to the main thread, or put it in some known spot that the main thread checks).</p>\n\n<p>A second approach is to return something like a <code>std::future&lt;std::function&lt;void()&gt;&gt;</code> object, and the main thread checks if the future is ready.  When it is ready, it runs the code.</p>\n\n<p>A third approach is to create a concurrent queue that the main thread waits on, and stuff your message (containing code to run) onto that queue.</p>\n\n<p>All of these things require the active cooperation of the main thread.  The main thread cannot be preemted and told to run different code without its cooperation.</p>\n\n<p>Which is best depends on features of your program you did not choose to mention in your question.  If you are a graphical GUI with a message loop, use the message loop.  If you are a streaming processor that paralellizes some work, and you don't need prompt execution, yet eventually will want to block on the parallel work, a future might be best.  If you are a message passing channel-type app, a set of queues might be best.</p>\n"}], "owner": {"reputation": 63, "user_id": 2574214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1bfff5c3f4bf1cfa91d8527a6ee1594?s=128&d=identicon&r=PG", "display_name": "Tushar", "link": "https://stackoverflow.com/users/2574214/tushar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9205, "favorite_count": 1, "accepted_answer_id": 45335593, "answer_count": 1, "score": 6, "last_activity_date": 1501096401, "creation_date": 1501090570, "question_id": 45333898, "link": "https://stackoverflow.com/questions/45333898/execute-callback-function-on-main-thread-from-stdthread", "title": "Execute callback function on main thread from std::thread", "body": "<p>I have a requirement of executing a callback function on exit of a std::thread and the callback function should be executed on the main thread.</p>\n\n<p>On thread creation I need to detach the thread and cannot block the main loop execution for thread completion.</p>\n\n<p>i tried using std::signal but that does not seem to execute callback function on the main thread</p>\n\n<pre><code>#include &lt;thread&gt;\n#include &lt;csignal&gt;\n#include &lt;iostream&gt;\n\n\nstd::thread::id main_thread_id;\n\nvoid func2()\n{\n    for(int i = 0; i &lt; 10000000; i++)\n    {\n        // do something\n    }\n}\n\nvoid func()\n{\n    for(int i = 0; i &lt; 10; i++)\n    {\n        func2();\n    }\n    std::raise(SIGUSR1);\n}\n\nvoid callback(int signal)\n{\n    std::cout &lt;&lt; \"SIGNAL: \" &lt;&lt; signal &lt;&lt; \"      THREAD ID:\" &lt;&lt; \n    std::this_thread::get_id() &lt;&lt; std::endl;\n    bool b = std::this_thread::get_id() == main_thread_id;\n    std::cout &lt;&lt; \"IS EXECUTED ON MAIN THREAD: \" &lt;&lt; b &lt;&lt; std::endl;\n}\n\nint main()\n{\n    main_thread_id = std::this_thread::get_id();\n    std::cout &lt;&lt; \"MAIN THREAD ID: \" &lt;&lt; std::this_thread::get_id() &lt;&lt; std::endl;\n    std::signal(SIGUSR1, callback);\n    std::thread t1(func);\n    t1.detach();\n\n    for(int i = 0; i &lt; 20; i++)\n    {\n        func2();\n    }\n\n    if(t1.joinable())\n        t1.join();\n}\n</code></pre>\n\n<p>The result I get is that the callback function is not executed on main thread. Please suggest a way in which I can create a worker thread and call a callback function on main thread upon exit of the thread.</p>\n\n<p>Thanks for the help</p>\n"}, {"tags": ["c++", "ios", "xcode"], "comments": [{"owner": {"reputation": 8137, "user_id": 7014451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c88303e9efdb9b80cfe1bbb61f9a69ae?s=128&d=identicon&r=PG&f=1", "display_name": "dfd", "link": "https://stackoverflow.com/users/7014451/dfd"}, "edited": false, "score": 0, "creation_date": 1501092376, "post_id": 45333860, "comment_id": 77630911, "body": "It&#39;s hard to say without understanding <i>what</i> is happening when the button is pressed. (I&#39;d ask for code but unless it&#39;s Swift you may need to remove that tag.) Many variables come to mind. How are you working UI - main thread or background? What other things are happening when a button is pressed? What is being done in C++? Is this SpriteKit? SceneKit? How are you calling the C++ code? The bottom line is that <b>many</b> things may be happening, and using <i>pure</i> Swift should never mean &quot;stuttering&quot;. It&#39;s up to <i>you</i> to give more details for us to be of help."}, {"owner": {"reputation": 186, "user_id": 6066861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8381494922eeb8667b48a0602526201?s=128&d=identicon&r=PG&f=1", "display_name": "jamesrogers93", "link": "https://stackoverflow.com/users/6066861/jamesrogers93"}, "reply_to_user": {"reputation": 8137, "user_id": 7014451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c88303e9efdb9b80cfe1bbb61f9a69ae?s=128&d=identicon&r=PG&f=1", "display_name": "dfd", "link": "https://stackoverflow.com/users/7014451/dfd"}, "edited": false, "score": 0, "creation_date": 1501094588, "post_id": 45333860, "comment_id": 77632089, "body": "Sorry for the lack of detail. I did not give many details about the C++ library because the app stutters even when I remove the code that calls the C++ func in the UIButton func (Swift). To  answer your questions. 1) UI is worked on the main thread. 2) Nothing happens when the button is pressed, it is an empty function. 3) I am using C++ to simulate the game, which involves drawing to screen using OpenGL, animating 3D models, AI etc. All of this runs fine, until a button is pressed that does nothing."}, {"owner": {"reputation": 8137, "user_id": 7014451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c88303e9efdb9b80cfe1bbb61f9a69ae?s=128&d=identicon&r=PG&f=1", "display_name": "dfd", "link": "https://stackoverflow.com/users/7014451/dfd"}, "edited": false, "score": 0, "creation_date": 1501099046, "post_id": 45333860, "comment_id": 77634580, "body": "Wow. Never heard of anything like that. So if you basically removed everything but Swift code, maybe you have a MVCE? Code that we can reproduce this?"}, {"owner": {"reputation": 186, "user_id": 6066861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8381494922eeb8667b48a0602526201?s=128&d=identicon&r=PG&f=1", "display_name": "jamesrogers93", "link": "https://stackoverflow.com/users/6066861/jamesrogers93"}, "reply_to_user": {"reputation": 8137, "user_id": 7014451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c88303e9efdb9b80cfe1bbb61f9a69ae?s=128&d=identicon&r=PG&f=1", "display_name": "dfd", "link": "https://stackoverflow.com/users/7014451/dfd"}, "edited": false, "score": 0, "creation_date": 1501101480, "post_id": 45333860, "comment_id": 77635935, "body": "Okay thanks, I&#39;ll try to make one now."}, {"owner": {"reputation": 186, "user_id": 6066861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8381494922eeb8667b48a0602526201?s=128&d=identicon&r=PG&f=1", "display_name": "jamesrogers93", "link": "https://stackoverflow.com/users/6066861/jamesrogers93"}, "reply_to_user": {"reputation": 8137, "user_id": 7014451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c88303e9efdb9b80cfe1bbb61f9a69ae?s=128&d=identicon&r=PG&f=1", "display_name": "dfd", "link": "https://stackoverflow.com/users/7014451/dfd"}, "edited": false, "score": 0, "creation_date": 1501106227, "post_id": 45333860, "comment_id": 77638179, "body": "I have just found that the reason for the app stuttering is because the button press somehow affects the current time in milliseconds, which is done using time.h in C++. Using delta time provided by GLKit fixes the stuttering problem. I am not sure why this would be affected. I calculate the current time in milliseconds in c++ using  (double)(clock() - start ) / (double) CLOCKS_PER_SEC. I&#39;ll adjust my question."}, {"owner": {"reputation": 8137, "user_id": 7014451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c88303e9efdb9b80cfe1bbb61f9a69ae?s=128&d=identicon&r=PG&f=1", "display_name": "dfd", "link": "https://stackoverflow.com/users/7014451/dfd"}, "edited": false, "score": 0, "creation_date": 1501111976, "post_id": 45333860, "comment_id": 77640059, "body": "I&#39;m not a C++ programmer, so this is just a guess. GLKit uses the GPU, and it&#39;s possible that other pieces (you mentioned draw functions) may also. Maybe things are bridging from the CPU to the GPU... and using C++, back?"}, {"owner": {"reputation": 186, "user_id": 6066861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8381494922eeb8667b48a0602526201?s=128&d=identicon&r=PG&f=1", "display_name": "jamesrogers93", "link": "https://stackoverflow.com/users/6066861/jamesrogers93"}, "reply_to_user": {"reputation": 8137, "user_id": 7014451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c88303e9efdb9b80cfe1bbb61f9a69ae?s=128&d=identicon&r=PG&f=1", "display_name": "dfd", "link": "https://stackoverflow.com/users/7014451/dfd"}, "edited": false, "score": 0, "creation_date": 1501161871, "post_id": 45333860, "comment_id": 77665423, "body": "I use the GPU in C++ by drawing to screen with OpenGL ES. I do not communicate from the GPU to the CPU (Not that I&#39;m aware)."}], "owner": {"reputation": 186, "user_id": 6066861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8381494922eeb8667b48a0602526201?s=128&d=identicon&r=PG&f=1", "display_name": "jamesrogers93", "link": "https://stackoverflow.com/users/6066861/jamesrogers93"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1501106701, "creation_date": 1501090440, "last_edit_date": 1501106701, "question_id": 45333860, "link": "https://stackoverflow.com/questions/45333860/ios-app-cpu-usage-decreases-when-press-uibutton", "title": "iOS app cpu usage decreases when press UIButton", "body": "<p>I am creating a game for iOS. The game is written as a C++ library so that it can be ported to another platform. I am also using Swift and Objective C to call the game update, draw functions and process user input etc. in the view controller. </p>\n\n<p>I am having and issue where the game begins to stutter when I press a UIButton to perform some action in the game. I have noticed even when the UIButton callback function is empty, the game still stutters.</p>\n\n<p>The game idles at ~30% CPU usage. When I press the button, the cpu usage drops to ~15% for a few seconds, then gradually makes its way back up 30%. It's during this time that the game stutters.</p>\n\n<p>It seems to me that when the button is pressed, the operating system is allocating fewer resources to the app, causing it to slow down.</p>\n\n<p>To try and resolve this problem, I have put the game update function on a new thread to take some weight off the main thread. This did not work.</p>\n\n<p>Any idea what could be causing this?</p>\n"}, {"tags": ["c++", "ocr", "tesseract"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 3, "creation_date": 1501090961, "post_id": 45333813, "comment_id": 77630030, "body": "The not accurate of the OCR does not depend on Qt, that depends on the class that makes the calculation, so I see the Qt tag irrelevant."}, {"owner": {"reputation": 1518, "user_id": 2434628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f694c7757c0085ac1f0ed88d960ff657?s=128&d=identicon&r=PG", "display_name": "AresCaelum", "link": "https://stackoverflow.com/users/2434628/arescaelum"}, "edited": false, "score": 0, "creation_date": 1501091603, "post_id": 45333813, "comment_id": 77630422, "body": "Are you attempting any preprocessing before processing your pages?  If you look at their forums several of the users mentions that you should try it with black and white images(black font on white background) your text has a lot of well fuzz around it, you should attempt to preprocess that out,  The online OCR most likely has some stuff in place to automatically edit the images and remove those."}, {"owner": {"reputation": 868, "user_id": 6997733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d07112547a85bc1d739c6c612bceda0c?s=128&d=identicon&r=PG", "display_name": "user7179690", "link": "https://stackoverflow.com/users/6997733/user7179690"}, "edited": false, "score": 0, "creation_date": 1501091972, "post_id": 45333813, "comment_id": 77630655, "body": "yes I use the Ghostscript to get the image from the pdf file with this properties -dFirstPage=1 -dLastPage=1 -dBATCH -dNOPAUSE -sDEVICE=pnggray -r300 -dUseCropBox"}], "answers": [{"comments": [{"owner": {"reputation": 868, "user_id": 6997733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d07112547a85bc1d739c6c612bceda0c?s=128&d=identicon&r=PG", "display_name": "user7179690", "link": "https://stackoverflow.com/users/6997733/user7179690"}, "edited": false, "score": 0, "creation_date": 1501250948, "post_id": 45373252, "comment_id": 77712546, "body": "I changed the null to the tessdata folder but the same problem"}, {"owner": {"reputation": 67, "user_id": 4638823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb13408b824371798ac30615b71c2a5f?s=128&d=identicon&r=PG&f=1", "display_name": "nes", "link": "https://stackoverflow.com/users/4638823/nes"}, "reply_to_user": {"reputation": 868, "user_id": 6997733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d07112547a85bc1d739c6c612bceda0c?s=128&d=identicon&r=PG", "display_name": "user7179690", "link": "https://stackoverflow.com/users/6997733/user7179690"}, "edited": false, "score": 0, "creation_date": 1501499640, "post_id": 45373252, "comment_id": 77789154, "body": "Maybe it is {const char* lang = &quot;eng&quot;;} line. Can you change it as {string} ? Or you can change the line as: {tess.Init(&quot;c:/tessdata/&quot;, &quot;eng&quot;, 3);}"}], "tags": [], "owner": {"reputation": 67, "user_id": 4638823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb13408b824371798ac30615b71c2a5f?s=128&d=identicon&r=PG&f=1", "display_name": "nes", "link": "https://stackoverflow.com/users/4638823/nes"}, "is_accepted": false, "score": 0, "last_activity_date": 1501244053, "creation_date": 1501244053, "answer_id": 45373252, "question_id": 45333813, "link": "https://stackoverflow.com/questions/45333813/not-accurate-tesseract-ocr-data-from-a-png-image-in-qt-c/45373252#45373252", "title": "not accurate tesseract OCR data from a png image in QT c++", "body": "<p>I am not experienced with cpp, but I think your problem relates to the below line with a great probability:</p>\n\n<pre><code>tess.Init(NULL, lang, tesseract::OEM_DEFAULT);\n</code></pre>\n\n<p>It must show the <code>tessdata</code> folder. instead of <code>NULL</code> you may write the folder name, for example <code>\"C:/tessdata/\"</code>. Again, I am not experienced with cpp, that's why you may decide slash \"/\" or backslash \"\\\". This folder should contain the language file(s).</p>\n"}, {"tags": [], "owner": {"reputation": 538, "user_id": 2799497, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/o9RbW.jpg?s=128&g=1", "display_name": "Arsen", "link": "https://stackoverflow.com/users/2799497/arsen"}, "is_accepted": false, "score": 0, "last_activity_date": 1501315834, "last_edit_date": 1501315834, "creation_date": 1501315287, "answer_id": 45386911, "question_id": 45333813, "link": "https://stackoverflow.com/questions/45333813/not-accurate-tesseract-ocr-data-from-a-png-image-in-qt-c/45386911#45386911", "title": "not accurate tesseract OCR data from a png image in QT c++", "body": "<p>As Eddge mentioned in his comment you should apply some image preprocessing stuff there are bunch of <a href=\"http://www.fmwconcepts.com/imagemagick/\" rel=\"nofollow noreferrer\">scripts</a> for <a href=\"http://www.imagemagick.org/script/index.php\" rel=\"nofollow noreferrer\">imagemagick</a>.\nAns of course OpenCV will vastly help in this stuff as well.</p>\n\n<p>The next point could be PSM mode which by default should satisfy your needs to extract whole page information.</p>\n\n<p>Also the result of the online OCR is not 100% as you mentioned.</p>\n\n<pre><code>There is \"1 S Days\" instead of \"15 Days\"\nThere is \"Mail: finance(a)\" instead of \"E Mail: finance@\"\nThere is \"TiA THE GREEN HOL1 5\" instead of \"T/A THE GREEN HOU 5\"\n</code></pre>\n\n<p>etc.</p>\n\n<p>Which Tesseract version are you using? I highly recommend to use 3.05. (4.0 shows much better results but it is not officially released yet).</p>\n\n<p>Also the following link could help you with your results: <a href=\"https://github.com/tesseract-ocr/tesseract/wiki/ImproveQuality\" rel=\"nofollow noreferrer\">https://github.com/tesseract-ocr/tesseract/wiki/ImproveQuality</a></p>\n\n<p>P.S. I hope you are eligible to share publicly such financial documentations;)</p>\n"}], "owner": {"reputation": 868, "user_id": 6997733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d07112547a85bc1d739c6c612bceda0c?s=128&d=identicon&r=PG", "display_name": "user7179690", "link": "https://stackoverflow.com/users/6997733/user7179690"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 496, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1501315834, "creation_date": 1501090250, "last_edit_date": 1501117402, "question_id": 45333813, "link": "https://stackoverflow.com/questions/45333813/not-accurate-tesseract-ocr-data-from-a-png-image-in-qt-c", "title": "not accurate tesseract OCR data from a png image in QT c++", "body": "<p>I am using Tesseract OCR c++ library in QT to get a text from a png image \nusing this code</p>\n\n<pre><code>const char* lang = \"eng\";\nQString filename = \"D:/image.png\";\n\ntesseract::TessBaseAPI tess;\ntess.Init(NULL, lang, tesseract::OEM_DEFAULT);\ntess.SetPageSegMode(tesseract::PSM_AUTO);\n\nFILE* fin = fopen(filename.toStdString().c_str(), \"rb\");\nif (fin == NULL)\n{\n    std::cout &lt;&lt; \"Cannot open \" &lt;&lt; filename.toStdString().c_str() &lt;&lt; std::endl;\n    return;\n}\nfclose(fin);\n\nSTRING text;\nif (tess.ProcessPages(filename.toStdString().c_str(), NULL, 0, &amp;text))\n{\n    ui-&gt;plainTextEdit-&gt;setPlainText(QString::fromUtf8(text.string()));\n //show result in plainttext qt gui\n\n}\n</code></pre>\n\n<p>put the data not accurate enough for the data in the table and it gives me strange characters and when I use an online OCR website to convert my image to text (the same image) it does it with 100% accurate so what makes it gives me this wrong text is this a problem with the library? or my code? or if there is a better free library I can use to be more accurate?</p>\n\n<p>I got the image from pdf I use ghost script to get the image with a good quality so the OCR library should get me the correct data</p>\n\n<ul>\n<li><a href=\"https://drive.google.com/file/d/0B5rlQZmglfhEcjhfWXdLYUFQVXM/view?usp=sharing\" rel=\"nofollow noreferrer\">link to download the image</a></li>\n<li><a href=\"https://www.onlineocr.net/\" rel=\"nofollow noreferrer\">website I use to get the accurate ocr</a></li>\n</ul>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 2, "last_activity_date": 1501090124, "creation_date": 1501090124, "answer_id": 45333772, "question_id": 45333657, "link": "https://stackoverflow.com/questions/45333657/can-a-function-passed-as-an-argument-call-a-method-of-another-class/45333772#45333772", "title": "Can a function passed as an argument call a method of another class?", "body": "<blockquote>\n  <p>Is it possible to call <code>fun2</code> from outside (<code>fun2</code> is public) in a way that <code>fun3</code> passed as an argument calls <code>fun1</code> (also public)?</p>\n</blockquote>\n\n<p>Sure, as long as <code>fun3</code> can accept a pointer/reference to an object of type <code>class1</code>.</p>\n\n<pre><code>class class1\n{\n   public:\n      void fun1() {}\n\n      // Change the function type that can be\n      // passed to fun2\n      void fun2( void(*f)(class1&amp; obj) )\n      {\n         f(*this);\n      }\n\n};\n\n// Change fun3 to accept a reference to an object of type class1\nvoid fun3(class1&amp; obj)\n{\n   obj.fun1();\n}\n\nint main()\n{\n   class1 a;\n   a.fun2( &amp;fun3 );\n}\n</code></pre>\n"}], "owner": {"reputation": 172, "user_id": 3975218, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100000527064736/picture?type=large", "display_name": "Karol Borkowski", "link": "https://stackoverflow.com/users/3975218/karol-borkowski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 45333772, "answer_count": 1, "score": -2, "last_activity_date": 1501090124, "creation_date": 1501089749, "question_id": 45333657, "link": "https://stackoverflow.com/questions/45333657/can-a-function-passed-as-an-argument-call-a-method-of-another-class", "title": "Can a function passed as an argument call a method of another class?", "body": "<p>I have some class - class1. It has a member function fun1 and fun2, which gets a pointer to some function fun3 as an argument.\nIs it possible to call fun2 from outside (fun2 is public) in a way that fun3 passed as an argument calls fun1 (also public)?</p>\n\n<p>I mean something like this:</p>\n\n<pre><code>    class class1\n{\npublic:\n    void fun1();\n    void fun2( void(*fun3)() );\n\n};\n\nvoid fun3()\n{\n    fun1();\n}\n\nclass1 a;\na.fun2( &amp;fun1 );\n</code></pre>\n\n<p>I know that the code above won't work, but maybe it is possible to do it in a different way. </p>\n"}, {"tags": ["c++", "opengl", "glsl", "vulkan", "spir-v"], "comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1501100353, "post_id": 45333654, "comment_id": 77635288, "body": "FYI: An &quot;internal error&quot; typically means that the compiler itself broke. So you should investigate why. Also, don&#39;t use extensions that are already part of the GLSL version you&#39;re using (namely 4.50)."}], "answers": [{"tags": [], "owner": {"reputation": 63, "user_id": 3880773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9771bd50ac33b85c02559627f2b462a?s=128&d=identicon&r=PG&f=1", "display_name": "bachelor", "link": "https://stackoverflow.com/users/3880773/bachelor"}, "is_accepted": false, "score": 2, "last_activity_date": 1501167145, "creation_date": 1501167145, "answer_id": 45354295, "question_id": 45333654, "link": "https://stackoverflow.com/questions/45333654/glslang-is-unable-to-parse-built-ins/45354295#45354295", "title": "glslang is unable to parse built-ins", "body": "<p>I found the answer is in the Vulkan official project.<br/>\nI should define following symbol</p>\n\n<pre><code>AMD_EXTENSIONS\nNV_EXTENSIONS\n</code></pre>\n\n<p>to make those built-ins able to work.</p>\n"}], "owner": {"reputation": 63, "user_id": 3880773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9771bd50ac33b85c02559627f2b462a?s=128&d=identicon&r=PG&f=1", "display_name": "bachelor", "link": "https://stackoverflow.com/users/3880773/bachelor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 465, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1501167145, "creation_date": 1501089736, "question_id": 45333654, "link": "https://stackoverflow.com/questions/45333654/glslang-is-unable-to-parse-built-ins", "title": "glslang is unable to parse built-ins", "body": "<p>Here is my code:</p>\n\n<pre><code>bool ParseShader(glslang::TShader* p_shader) {\n    EShMessages messages = (EShMessages)(EShMsgSpvRules | EShMsgVulkanRules);\n    TBuiltInResource resources;\n    InitializeResources(resources);\n\n    if (!p_shader-&gt;parse(&amp;resources, 100, false, messages)) {\n        std::cout &lt;&lt; p_shader-&gt;getInfoLog() &lt;&lt; std::endl;\n        std::cout &lt;&lt; p_shader-&gt;getInfoDebugLog() &lt;&lt; std::endl;\n        return false;\n    }\n    return true;\n}\n</code></pre>\n\n<p>You can get full source codes and project on my <a href=\"https://github.com/bachelorwhc/ShaderRetriever/blob/master/main.cpp\" rel=\"nofollow noreferrer\">Github repos</a>.<br/>\nI build this code with linking glslang related libraries which is from Vulkan 1.0.54.0. And I don't know why I got following error messages:</p>\n\n<pre><code>Unable to parse built-ins\nERROR: 0:100: 'int64_t' : overloaded functions must have the same return type\nINTERNAL ERROR: Unable to parse built-ins\n</code></pre>\n\n<p>The source of build-ins post on <a href=\"https://gist.github.com/bachelorwhc/605e754d00da4e503d808c33b2fb27e5\" rel=\"nofollow noreferrer\">gist</a>.</p>\n\n<p>I tried both two test cases. All can be parsed and compiled into SPIRV by official tools(glslangValidator) successfully. But in case 2, my tool failed in parsing phase.</p>\n\n<h3>Case 1</h3>\n\n<pre><code>#version 450\n#extension GL_ARB_separate_shader_objects : enable\n#extension GL_ARB_shading_language_420pack : enable\nlayout(location=0) in vec3 inPos;\nlayout(location=1) in vec3 inNormal;\nlayout(location=2) in vec2 inUV;\n\nlayout(std140, push_constant) uniform MVP {\n    mat4 m;\n} mvp;\n\nlayout (location = 0) out vec2 outUV;\n\nout gl_PerVertex \n{\n    vec4 gl_Position;   \n};\n\nvoid main() \n{\n    outUV = inUV;\n    gl_Position = mvp.m * vec4(inPos.xyz, 1.0);\n}\n</code></pre>\n\n<h3>Case 2</h3>\n\n<pre><code>#version 450\n\n#extension GL_ARB_separate_shader_objects : enable\n#extension GL_ARB_shading_language_420pack : enable\n\nlayout(set=0, binding=1) uniform sampler2D samplerColor;\n\nlayout(location=0) in vec2 inUV;\nlayout(location=0) out vec4 outFragColor;\n\nvoid main() \n{\n    vec4 texs = texture(samplerColor, inUV, 0.0f);\n    outFragColor = texs;\n}\n</code></pre>\n\n<p>Dose anyone know what I did wrong? </p>\n\n<p>I have had this problem once, then solved it by reseting project(delete, clone, build again) but did't know why. Now, I got this problem again. however, this time reseting project doesn't help.</p>\n"}, {"tags": ["c++", "typedef", "wchar-t"], "comments": [{"owner": {"reputation": 272630, "user_id": 105929, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/414213a8181616151fe73334532746ab?s=128&d=identicon&r=PG", "display_name": "Remus Rusanu", "link": "https://stackoverflow.com/users/105929/remus-rusanu"}, "edited": false, "score": 0, "creation_date": 1501090390, "post_id": 45333588, "comment_id": 77629681, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/4786292/converting-unicode-strings-and-vice-versa\">Converting unicode strings and vice-versa</a>"}, {"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1501091880, "post_id": 45333588, "comment_id": 77630593, "body": "No point in discussing &quot;converting&quot; between string types without specifying what encoding you&#39;re using on either side of the conversion."}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 3, "last_activity_date": 1501090466, "last_edit_date": 1501090466, "creation_date": 1501090089, "answer_id": 45333757, "question_id": 45333588, "link": "https://stackoverflow.com/questions/45333588/converting-stdstring-to-a-typedef-of-wchar-t/45333757#45333757", "title": "Converting std::string to a typedef of wchar_t*", "body": "<p>Using <code>std::wstring(stringPath.begin(), stringPath.end())</code> is the wrong way to deal with string conversions, unless you can guarantee that you are only dealing with 7bit ASCII data (which is not the case with the filesystem). This type of conversion doesn't account for character encodings at all.  The correct way to convert a <code>std::string</code> to <code>std::wstring</code> is to use <code>std::wstring_convert</code>, <code>MultiByteToWideChar()</code>, or other equivalent.  There are plenty of examples of this if you look around.</p>\n\n<p>Better would be to just use <code>std::wstring</code> to begin with instead of <code>std::string</code>, eg:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nint main(){\n    std::wstring stringPath;\n    std::getline(std::wcin, stringPath);\n    const wchar_t* wcharPath = stringPath.c_str();\n    return 0;\n}\n</code></pre>\n\n<blockquote>\n  <p>Where is the value concatenated to the front of\u00a0<code>wcharPath</code>\u00a0coming from?</p>\n</blockquote>\n\n<p>The debugger. It is simply showing you the memory address that the pointer is pointing at, followed by the actual character data at that address.</p>\n\n<blockquote>\n  <p>I get a message saying that \"const wchar_t*\" cannot be used to initialize an entity of type \"pxcCHAR*\".</p>\n</blockquote>\n\n<p>That means <code>pxcCHAR</code> is not a typedef of <code>const wchar_t</code>, but is more likely a typedef of just <code>wchar_t</code> by itself. You cannot assign a <code>const</code> pointer to a non-<code>const</code> pointer, regardless of the type used.  If you need to make this kind of assignment, you have to type-cast the <code>const</code> away, such as with <code>const_cast</code>:</p>\n\n<pre><code>pxcCHAR* mFilePath = const_cast&lt;wchar_t*&gt;(wcharPath);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 272630, "user_id": 105929, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/414213a8181616151fe73334532746ab?s=128&d=identicon&r=PG", "display_name": "Remus Rusanu", "link": "https://stackoverflow.com/users/105929/remus-rusanu"}, "is_accepted": false, "score": 0, "last_activity_date": 1501090317, "creation_date": 1501090317, "answer_id": 45333831, "question_id": 45333588, "link": "https://stackoverflow.com/questions/45333588/converting-stdstring-to-a-typedef-of-wchar-t/45333831#45333831", "title": "Converting std::string to a typedef of wchar_t*", "body": "<p>Read <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd318026%28v=vs.85%29.aspx?f=255&amp;MSPPError=-2147217396\" rel=\"nofollow noreferrer\">Converting Unicode and ANSI Strings</a>. You should use <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd319072(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>MultiByteToWideChar</code></a>. </p>\n\n<p>That being said, is very unlikely you ever need to do this (and is very likely the result is incorrect for any code page <em>not</em> <a href=\"https://en.wikipedia.org/wiki/Windows-1252\" rel=\"nofollow noreferrer\">CP1252</a>). What you probably have to is use wide strings <em>everywhere</em>.</p>\n\n<p>Oh, and read <a href=\"https://www.joelonsoftware.com/2003/10/08/the-absolute-minimum-every-software-developer-absolutely-positively-must-know-about-unicode-and-character-sets-no-excuses/\" rel=\"nofollow noreferrer\">The Absolute Minimum Every Software Developer Absolutely, Positively Must Know About Unicode and Character Sets (No Excuses!)</a>.</p>\n"}], "owner": {"reputation": 205, "user_id": 5301461, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1b863d6004bdeff8aa7b4cbd781a72a5?s=128&d=identicon&r=PG&f=1", "display_name": "Skipher", "link": "https://stackoverflow.com/users/5301461/skipher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1180, "favorite_count": 0, "accepted_answer_id": 45333757, "answer_count": 2, "score": 0, "last_activity_date": 1501090466, "creation_date": 1501089569, "question_id": 45333588, "link": "https://stackoverflow.com/questions/45333588/converting-stdstring-to-a-typedef-of-wchar-t", "title": "Converting std::string to a typedef of wchar_t*", "body": "<p>I am reading in a file directory from the user through the console, and I must store the value in a <code>pxcCHAR*</code> variable, which is the SDK's <code>typedef</code> for <code>wchar_t*</code>.</p>\n\n<p>I found that I can do the conversion from <code>std::string</code> to <code>std::wstring</code> by doing the following.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main(){\n    std::string stringPath;\n    std::getline(std::cin, stringPath);\n    std::wstring wstrPath = std::wstring(stringPath.begin(), stringPath.end());\n    const wchar_t* wcharPath = wstrPath.c_str();\n    return 0;\n}\n</code></pre>\n\n<p>When I run this code, I see these values through debugging.</p>\n\n<pre><code>stringPath= \"C:/Users/\"\nwstrPath= L\"C:/Users/\"\nwcharPath= 0x00b20038 L\"C:/Users/\"\n</code></pre>\n\n<p>Where is the value concatenated to the front of <code>wcharPath</code> coming from?</p>\n\n<p>Furthermore, </p>\n\n<p>Because <code>pxcCHAR*</code> is a <code>typedef</code> for <code>wchar_t*</code>, I thought it would be okay to simply do this:</p>\n\n<pre><code>pxcCHAR* mFilePath = wcharPath;\n</code></pre>\n\n<p>However, I get a message saying that \"const wchar_t*\" cannot be used to initialize an entity of type \"pxcCHAR*\".</p>\n\n<p>I expected implicit conversion to work, but it doesn't. How can I overcome this error?</p>\n"}, {"tags": ["c++", "opencv", "g++", "libpng"], "comments": [{"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1501093417, "post_id": 45333574, "comment_id": 77631487, "body": "When I look at the 3rdparty directory in the repo, even in 2010 there was a version of LibPNG newer than 1.2.53, so it would seem that&#39;s not where that came from. Do you happen to have some other copy of OpenCV installed on your system, that it accidentally uses? Does the output of <code>pkg-config opencv --cflags --libs</code> make sense?"}], "answers": [{"comments": [{"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1501092993, "post_id": 45334144, "comment_id": 77631277, "body": "Wouldn&#39;t that completely disable PNG support in OpenCV? That doesn&#39;t seem very desirable, considering the user wants to &quot;read a png file using opencv2&quot;..."}, {"owner": {"reputation": 29966, "user_id": 637669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0227e5d5eaceb8ae2f751df38d421764?s=128&d=identicon&r=PG", "display_name": "arrowd", "link": "https://stackoverflow.com/users/637669/arrowd"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1501093130, "post_id": 45334144, "comment_id": 77631356, "body": "I&#39;ve got impression it is exactly what asker wants. You can&#39;t, of course, have support for PNG without linking to a library, but I think asker uses libpng in his app directly, not through OpenCV."}], "tags": [], "owner": {"reputation": 29966, "user_id": 637669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0227e5d5eaceb8ae2f751df38d421764?s=128&d=identicon&r=PG", "display_name": "arrowd", "link": "https://stackoverflow.com/users/637669/arrowd"}, "is_accepted": true, "score": 1, "last_activity_date": 1501091373, "creation_date": 1501091373, "answer_id": 45334144, "question_id": 45333574, "link": "https://stackoverflow.com/questions/45333574/c-libpng-conflict-on-opencv/45334144#45334144", "title": "C++: libpng conflict on opencv", "body": "<p>Judging from OpenCV's <code>CMakeLists.txt</code>, you had to set <code>WITH_PNG=OFF</code>, not <code>BUILD_PNG</code>.</p>\n"}], "owner": {"reputation": 942, "user_id": 3620605, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/de7654c478778116210561da3c9f1c19?s=128&d=identicon&r=PG&f=1", "display_name": "Effective_cellist", "link": "https://stackoverflow.com/users/3620605/effective-cellist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1005, "favorite_count": 0, "accepted_answer_id": 45334144, "answer_count": 1, "score": 1, "last_activity_date": 1501091373, "creation_date": 1501089531, "question_id": 45333574, "link": "https://stackoverflow.com/questions/45333574/c-libpng-conflict-on-opencv", "title": "C++: libpng conflict on opencv", "body": "<p>I'm trying to read a png file using opencv2, I get the following error.</p>\n\n<pre><code>libpng warning: Application built with libpng-1.2.53 but running with 1.6.27\nOpenCV Error: Assertion failed (dsize.area() &gt; 0 || (inv_scale_x &gt; 0 &amp;&amp; inv_scale_y &gt; 0)) in resize, file /home/dpk/Desktop/opencv/opencv/modules/imgproc/src/imgwarp.cpp, line 3484\n</code></pre>\n\n<p>I have <code>libpng 1.6.27</code> on my system. \nOpencv was built using the command <code>cmake -D BUILD_PNG=OFF /home/dpk/Desktop/opencv</code>, to avoid conflict between the library from opencv and the one in my system.</p>\n\n<p>I compile the program which needs to read png as below</p>\n\n<pre><code>g++ preProcess.cpp -I/usr/local/include/libpng16 `pkg-config opencv --cflags --libs` -o preProcess\n</code></pre>\n\n<p>The output of <code>ldd</code> on the binary gives the following for libpng</p>\n\n<pre><code>libpng16.so.16 =&gt; /usr/local/lib/libpng16.so.16 \n</code></pre>\n\n<p>How can I fix this error?</p>\n"}, {"tags": ["c++", "bash", "unix", "service", "shutdown"], "comments": [{"owner": {"reputation": 2639, "user_id": 3072566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jaZNV.png?s=128&g=1", "display_name": "litelite", "link": "https://stackoverflow.com/users/3072566/litelite"}, "edited": false, "score": 4, "creation_date": 1501089477, "post_id": 45333519, "comment_id": 77629115, "body": "the script run with your privileges. while the service run as an unprivileged user. You will need to give some permissions to the service"}, {"owner": {"reputation": 103, "user_id": 4929618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcdc4e561d63502d2df463c2ec6b17af?s=128&d=identicon&r=PG&f=1", "display_name": "Stefano", "link": "https://stackoverflow.com/users/4929618/stefano"}, "reply_to_user": {"reputation": 2639, "user_id": 3072566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jaZNV.png?s=128&g=1", "display_name": "litelite", "link": "https://stackoverflow.com/users/3072566/litelite"}, "edited": false, "score": 0, "creation_date": 1501161679, "post_id": 45333519, "comment_id": 77665249, "body": "Hi @litelite. The problem is that if the script is something like:  #!/bin/sh sudo shutdown +1  It works both ways. The problem shows when it&#39;s not the script who call shutdown, but the application runned by the script"}], "owner": {"reputation": 103, "user_id": 4929618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcdc4e561d63502d2df463c2ec6b17af?s=128&d=identicon&r=PG&f=1", "display_name": "Stefano", "link": "https://stackoverflow.com/users/4929618/stefano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1501089376, "creation_date": 1501089376, "question_id": 45333519, "link": "https://stackoverflow.com/questions/45333519/c-application-runned-as-a-service-cant-shutdown-the-pc", "title": "C++ application runned as a service, can&#39;t shutdown the PC", "body": "<p>I have a simple application written in C++ under Linux. The main.cpp file is like the following:</p>\n\n<pre><code>int main()\n{\n   system(\"sudo shutdown +1\")\n   return 0;\n}\n</code></pre>\n\n<p>Compiling this file will produce an application called <strong>myShutdown</strong>.</p>\n\n<p>I created a bash script (named <strong>myBash</strong>) with just two lines:</p>\n\n<pre><code>#!/bin/sh\n./myShutdown\n</code></pre>\n\n<p>The script works perfectly and, if I run it, my PC shutdown in a minute.</p>\n\n<p>Now, I created a service called <strong>myService.service</strong> that just run my script.\nRunning the service (the service has been put in the right folder and so on)  does not produce anything. The PC do not shutdown. Why do I have this behaviour?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["c++", "stringstream", "c++03"], "comments": [{"owner": {"reputation": 791, "user_id": 5181488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca776a7ac771f49f6efd97dd0e6b0b3c?s=128&d=identicon&r=PG&f=1", "display_name": "\u026f\u0250\u0279\u029e", "link": "https://stackoverflow.com/users/5181488/%c9%af%c9%90%c9%b9%ca%9e"}, "edited": false, "score": 0, "creation_date": 1501088606, "post_id": 45333236, "comment_id": 77628521, "body": "did you try using atoi?"}, {"owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "edited": false, "score": 1, "creation_date": 1501088685, "post_id": 45333236, "comment_id": 77628580, "body": "Are you talking about C++03 or C++11? &quot;C++0x&quot; was the development name of C++11, which was originally slated to come out before 2010."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8305079"}, "reply_to_user": {"reputation": 791, "user_id": 5181488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca776a7ac771f49f6efd97dd0e6b0b3c?s=128&d=identicon&r=PG&f=1", "display_name": "\u026f\u0250\u0279\u029e", "link": "https://stackoverflow.com/users/5181488/%c9%af%c9%90%c9%b9%ca%9e"}, "edited": false, "score": 0, "creation_date": 1501088703, "post_id": 45333236, "comment_id": 77628595, "body": "@\u026f\u0250\u0279\u029e, I might be wrong here, but isn&#39;t <code>atoi</code> a C++11 feature?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1501088732, "post_id": 45333236, "comment_id": 77628618, "body": "There is no justification for using atoi in either C or C++."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8305079"}, "reply_to_user": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "edited": false, "score": 0, "creation_date": 1501088747, "post_id": 45333236, "comment_id": 77628625, "body": "@zneak, I am sorry.  I meant C++03.  I mistakenly assumed that C++0x meant C++03."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1501088754, "post_id": 45333236, "comment_id": 77628630, "body": "@UmedhSinghBundela Did you look at the <a href=\"http://en.cppreference.com/w/cpp/string/byte/atoi\" rel=\"nofollow noreferrer\">documentation</a>? Short answer: No, it isn&#39;t."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 2, "creation_date": 1501088779, "post_id": 45333236, "comment_id": 77628648, "body": "1e1 is floating point, read <code>double</code> or <code>float</code> from stream and convert it to <code>int</code> with proper rounding."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8305079"}, "reply_to_user": {"reputation": 791, "user_id": 5181488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca776a7ac771f49f6efd97dd0e6b0b3c?s=128&d=identicon&r=PG&f=1", "display_name": "\u026f\u0250\u0279\u029e", "link": "https://stackoverflow.com/users/5181488/%c9%af%c9%90%c9%b9%ca%9e"}, "edited": false, "score": 0, "creation_date": 1501088925, "post_id": 45333236, "comment_id": 77628730, "body": "@\u026f\u0250\u0279\u029e, using <code>atoi</code> gives this: <code>cannot convert &#39;std::__cxx11::string {aka std::__cxx11::basic_string&lt;char&gt;}&#39; to &#39;const char*&#39; for argument &#39;1&#39; to &#39;int atoi(const char*)&#39;</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8305079"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1501088990, "post_id": 45333236, "comment_id": 77628775, "body": "@Slava, I am coding to validate IP address tokens (each set of strings separated by a <code>.</code>).  So, I am assured that if it is floating point, then I need to return false.  Anyway in which I could do this without using a double?  Also, due to memory limits, a <code>double</code> won&#39;t be feasible."}, {"owner": {"reputation": 791, "user_id": 5181488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca776a7ac771f49f6efd97dd0e6b0b3c?s=128&d=identicon&r=PG&f=1", "display_name": "\u026f\u0250\u0279\u029e", "link": "https://stackoverflow.com/users/5181488/%c9%af%c9%90%c9%b9%ca%9e"}, "edited": false, "score": 0, "creation_date": 1501089058, "post_id": 45333236, "comment_id": 77628819, "body": "<code>token.c_str()</code> will give you the <code>const char*</code>, so you can wrap it in the <code>atio()</code>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1501089074, "post_id": 45333236, "comment_id": 77628833, "body": "Then why do you care about 1e1?  That won&#39;t be in an IPV4 IP address."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1501089102, "post_id": 45333236, "comment_id": 77628854, "body": "@UmedhSinghBundela Once again, did you read the documentation of <code>atoi</code>? It accepts <code>char*</code>, hence to use it, with <code>std::string</code>, you would need to pass in the C-like string, you get from calling  <code>std::string::c_str ()</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8305079"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1501089167, "post_id": 45333236, "comment_id": 77628897, "body": "@NathanOliver, totally agree.  But that can be in the input (and I need to return false).  Also, IPv6 address are in scope, so cannot just check for an <code>e</code> in the string."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8305079"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1501089223, "post_id": 45333236, "comment_id": 77628935, "body": "@AlgirdasPreid\u017eius, yes, but I wasn&#39;t aware about <code>c_str()</code>.  Sorry, I am still learning :)"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1501089237, "post_id": 45333236, "comment_id": 77628945, "body": "Describe your problem properly, do you need to process 1e1? Which way?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1501089261, "post_id": 45333236, "comment_id": 77628964, "body": "@UmedhSinghBundela If that is the case what you do is see if the stream hit the EOF.  If it did you have a valid conversion.  If not you know you got bad input."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8305079"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1501089453, "post_id": 45333236, "comment_id": 77629097, "body": "@Slava, updated the question.  Sorry for the earlier confusion."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1501089517, "post_id": 45333236, "comment_id": 77629144, "body": "Use regex that would be simplest and cleanest solution"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8305079"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1501089672, "post_id": 45333236, "comment_id": 77629236, "body": "@Slava, yeah, I will learn that as well.  But for now, I wish to understand this to get a good understanding of <code>stringstreams</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8305079"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1501089699, "post_id": 45333236, "comment_id": 77629250, "body": "@NathanOliver, could you please elaborate, sir?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1501089746, "post_id": 45333236, "comment_id": 77629282, "body": "check the result of <code>sss.eof()</code>.  If it is not true then you have a bad conversion."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8305079"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1501089933, "post_id": 45333236, "comment_id": 77629398, "body": "@NathanOliver, awesome, that did the trick.  Please convert it into an answer and I will accept it.  Thank you very much."}], "answers": [{"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1501090282, "post_id": 45333786, "comment_id": 77629627, "body": "<code>strtol</code> can be used as well and most probably would work significantly faster"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 1, "last_activity_date": 1501090152, "creation_date": 1501090152, "answer_id": 45333786, "question_id": 45333236, "link": "https://stackoverflow.com/questions/45333236/converting-a-stdstring-to-int-in-c03/45333786#45333786", "title": "Converting a std::string to int in C++03", "body": "<p>You're almost there.  After you do the conversion you need to check if there is any data left in the stream.  If there is then you know you had invalid input.  So if</p>\n\n<pre><code>the_stream.eof()\n</code></pre>\n\n<p>is <code>true</code> then you consumed on the input and you have a valid result.  If not then you have invalid input.</p>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 1, "last_activity_date": 1501090640, "creation_date": 1501090640, "answer_id": 45333933, "question_id": 45333236, "link": "https://stackoverflow.com/questions/45333236/converting-a-stdstring-to-int-in-c03/45333933#45333933", "title": "Converting a std::string to int in C++03", "body": "<p>You can use C function  <code>strtol</code> as well:</p>\n\n<pre><code>std::string token = \"1234\";\nchar *endp = 0;\nint value = strtol( token.c_str(), &amp;endp, 10 );\nif( **endp ) { // invalid symbol detected\n    ...\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8305079"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 427, "favorite_count": 1, "accepted_answer_id": 45333786, "answer_count": 2, "score": 0, "last_activity_date": 1501090640, "creation_date": 1501088513, "last_edit_date": 1501089417, "question_id": 45333236, "link": "https://stackoverflow.com/questions/45333236/converting-a-stdstring-to-int-in-c03", "title": "Converting a std::string to int in C++03", "body": "<p>I am looking for a method to convert a string represent of an integer (say, \"123\") to an integer in C++03.</p>\n\n<p>I am aware about the usual method of using <code>stringstreams</code>:</p>\n\n<pre><code>string token=\"1234\";\nstringstream sss(token);\nint tokenInt;\nsss&gt;&gt;tokenInt;\ncout&lt;&lt;\"Int token is: \"&lt;&lt;tokenInt&lt;&lt;\"\\n\";\n</code></pre>\n\n<p>However, the problem with this is that it doesn't appear to work on values like <code>1e1</code>.  It just prints out <code>1</code>.  Working demo <a href=\"http://ideone.com/lRf7Bq\" rel=\"nofollow noreferrer\">here</a>.  <code>stoi</code> is unfortunately ruled out since I am using C++0x.  Any other way?  </p>\n\n<p>Thanks!</p>\n\n<p>Edit:  I am basically working on IPv4 and IPv6 addresses.  The function <code>ipValidator()</code> returns valid if it is a valid IPv4 or IPv6 address.  I split the input, say, <code>1e1.4.5.6</code> into tokens <code>1e1</code>, <code>4</code>, <code>5</code> and <code>6</code>.  Since, <code>1e1</code> is incorrect, I need to return false.  Unfortunately, the above method returns <code>true</code> since it process <code>1e1</code> as just a <code>1</code>.</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 7730313, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/989358781200336/picture?type=large", "display_name": "Max Goddard", "link": "https://stackoverflow.com/users/7730313/max-goddard"}, "edited": false, "score": 0, "creation_date": 1501088443, "post_id": 45333154, "comment_id": 77628414, "body": "Thanks! I was working in the GML language on the side and thought it was another way to comment other than // and /* */."}], "tags": [], "owner": {"reputation": 45749, "user_id": 21974, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/61d62f97373c96dea8ad1e774b127cdd?s=128&d=identicon&r=PG", "display_name": "ypnos", "link": "https://stackoverflow.com/users/21974/ypnos"}, "is_accepted": true, "score": 3, "last_activity_date": 1501088211, "creation_date": 1501088211, "answer_id": 45333154, "question_id": 45333130, "link": "https://stackoverflow.com/questions/45333130/value-of-type-const-char2-is-not-implicitly-convertible-to-int-error-c/45333154#45333154", "title": "Value of type &#39;const char[2]&#39; is not implicitly convertible to &#39;int&#39; ERROR C++", "body": "<p>You are using a <code>char*</code> (string) literal instead of a <code>char</code> literal. Use <code>case 'A':</code> instead.</p>\n"}], "owner": {"reputation": 47, "user_id": 7730313, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/989358781200336/picture?type=large", "display_name": "Max Goddard", "link": "https://stackoverflow.com/users/7730313/max-goddard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1131, "favorite_count": 0, "accepted_answer_id": 45333154, "answer_count": 1, "score": 1, "last_activity_date": 1501088211, "creation_date": 1501088129, "question_id": 45333130, "link": "https://stackoverflow.com/questions/45333130/value-of-type-const-char2-is-not-implicitly-convertible-to-int-error-c", "title": "Value of type &#39;const char[2]&#39; is not implicitly convertible to &#39;int&#39; ERROR C++", "body": "<p>I'm writing a quick program to re-familiarise myself with C++ but I get the title error on my switch(choice){case \"A\": break;} line.</p>\n\n<p>[Value of type 'const char[2]' is not implicitly convertible to 'int']</p>\n\n<p>If anyone could help me understand why I get this error and how to rectify it, would be greatly appreciated. Thank you!</p>\n\n<p>Image of Error: <a href=\"https://imgur.com/a/d2A0P\" rel=\"nofollow noreferrer\">http://imgur.com/a/d2A0P</a></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include &lt;cstdlib&gt;\n\nusing namespace std;\n\nchar printMenuChoice(char choice);\n\nvoid printSpace(){\n    cout &lt;&lt; endl;\n}\n\nint main(){\n    //Print Menu Choice\n    char choice;\n    choice = printMenuChoice(choice);\n    cout &lt;&lt; \"Choice is \" &lt;&lt; choice &lt;&lt; endl;\n    switch(choice){\n        case \"A\":\n\n            break;\n    }\n    //Attack\n    //Chop\n    //Shop\n    //Stats\n    //Exit\n}\n\nchar printMenuChoice(char choice){\n    cout &lt;&lt; \"[]--- Welcome to Quick Quests ---[]\" &lt;&lt; endl;\n    printSpace();\n    cout &lt;&lt; \"Attack &lt;A&gt;\" &lt;&lt; endl;\n    cout &lt;&lt; \"Chop   &lt;B&gt;\" &lt;&lt; endl;\n    cout &lt;&lt; \"Shop   &lt;C&gt;\" &lt;&lt; endl;\n    cout &lt;&lt; \"Exit   &lt;E&gt;\" &lt;&lt; endl;\n    printSpace();\n    cout &lt;&lt; \"Input Your Choice: \";\n\n    printSpace();\n    cin &gt;&gt; choice;\n    choice = toupper(choice);\n    return choice;\n}\n</code></pre>\n"}, {"tags": ["c++", "pointers", "stl", "constants", "stdmap"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1501087617, "post_id": 45332961, "comment_id": 77627853, "body": "You&#39;re making a copy of the element; you can do whatever you want with that personal copy..."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 2, "creation_date": 1501087638, "post_id": 45332961, "comment_id": 77627861, "body": "Don&#39;t confuse a pointer to const with an immutable pointer!"}, {"owner": {"reputation": 1604, "user_id": 5722863, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1070999896265014/picture?type=large", "display_name": "Vasiliy Galkin", "link": "https://stackoverflow.com/users/5722863/vasiliy-galkin"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1501087888, "post_id": 45332961, "comment_id": 77628021, "body": "@KerrekSB ah, indeed! My brain confuses me at the end of my working day :) Thanks!"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1501088024, "post_id": 45332961, "comment_id": 77628129, "body": "Happens to the best :-)"}], "answers": [{"comments": [{"owner": {"reputation": 1604, "user_id": 5722863, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1070999896265014/picture?type=large", "display_name": "Vasiliy Galkin", "link": "https://stackoverflow.com/users/5722863/vasiliy-galkin"}, "edited": false, "score": 0, "creation_date": 1501087968, "post_id": 45333020, "comment_id": 77628089, "body": "Ah, indeed! I didn&#39;t pay enough attention to the fact that the key type is <code>T* const</code> rather than <code>const T*</code>. Thanks!"}, {"owner": {"reputation": 325758, "user_id": 415784, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2WX9Z.jpg?s=128&g=1", "display_name": "Nawaz", "link": "https://stackoverflow.com/users/415784/nawaz"}, "edited": false, "score": 0, "creation_date": 1501089407, "post_id": 45333020, "comment_id": 77629057, "body": "<code>auto n</code> makes a copy and then <code>f(int)</code> takes a copy. So I didn&#39;t understand what this answer is trying to explain by using copies!"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 325758, "user_id": 415784, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2WX9Z.jpg?s=128&g=1", "display_name": "Nawaz", "link": "https://stackoverflow.com/users/415784/nawaz"}, "edited": false, "score": 0, "creation_date": 1501089844, "post_id": 45333020, "comment_id": 77629347, "body": "@Nawaz: this is basically the same situation as the OP faces: A function taking a non-const value can be called with a (copy of a) const set element. Note that the code wouldn&#39;t work if you had <code>f(int&amp;)</code> and <code>for (auto&amp; n : s)</code>. I understand there&#39;s a second level of confusion, but I think if you can wrap your head around the simple example, you have enough differential information to ask the right question about the original situation."}, {"owner": {"reputation": 325758, "user_id": 415784, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2WX9Z.jpg?s=128&g=1", "display_name": "Nawaz", "link": "https://stackoverflow.com/users/415784/nawaz"}, "edited": false, "score": 0, "creation_date": 1501091792, "post_id": 45333020, "comment_id": 77630539, "body": "@KerrekSB: <i>&quot;Note that the code wouldn&#39;t work if you had <code>f(int&amp;)</code> and <code>for (auto&amp; n : s)</code>&quot;</i>. Both of them need not to make copy. Having either <code>f(int)</code> or <code>auto n</code>  would work!"}], "tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": false, "score": 3, "last_activity_date": 1501088003, "last_edit_date": 1501088003, "creation_date": 1501087699, "answer_id": 45333020, "question_id": 45332961, "link": "https://stackoverflow.com/questions/45332961/why-can-i-pass-the-key-of-stdmap-to-a-function-that-expects-non-const/45333020#45333020", "title": "Why can I pass the key of std::map to a function that expects non-const?", "body": "<p>Here is a simpler example, see if you can work it out:</p>\n\n<pre><code>void f(int);          // takes a non-const int\n\nint main() {\n    std::set&lt;int&gt; s;  // elements are const ints\n    for (auto n : s) {\n        f(n);         // OK!?\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1604, "user_id": 5722863, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1070999896265014/picture?type=large", "display_name": "Vasiliy Galkin", "link": "https://stackoverflow.com/users/5722863/vasiliy-galkin"}, "edited": false, "score": 0, "creation_date": 1501088040, "post_id": 45333050, "comment_id": 77628141, "body": "You are right, I mixed <code>const T*</code> with <code>T* const</code>. Such things sometimes happen at the end of the work day :-) Thanks!"}, {"owner": {"reputation": 325758, "user_id": 415784, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2WX9Z.jpg?s=128&g=1", "display_name": "Nawaz", "link": "https://stackoverflow.com/users/415784/nawaz"}, "reply_to_user": {"reputation": 1604, "user_id": 5722863, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1070999896265014/picture?type=large", "display_name": "Vasiliy Galkin", "link": "https://stackoverflow.com/users/5722863/vasiliy-galkin"}, "edited": false, "score": 0, "creation_date": 1501088647, "post_id": 45333050, "comment_id": 77628552, "body": "@VasiliyGalkin: One note: though <code>const X*</code> and <code>X const*</code> are the same thing, making a habit of writing <code>X const*</code> is helpful especially when working with template and typedefs if you think  <i>visually</i> ."}, {"owner": {"reputation": 1604, "user_id": 5722863, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1070999896265014/picture?type=large", "display_name": "Vasiliy Galkin", "link": "https://stackoverflow.com/users/5722863/vasiliy-galkin"}, "reply_to_user": {"reputation": 325758, "user_id": 415784, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2WX9Z.jpg?s=128&g=1", "display_name": "Nawaz", "link": "https://stackoverflow.com/users/415784/nawaz"}, "edited": false, "score": 0, "creation_date": 1501089480, "post_id": 45333050, "comment_id": 77629120, "body": "@Nawaz nah, I wouldn&amp;#39;t agree to that. But I wouldn&amp;#39;t want to start yet another <code>const T*</code> vs <code>T const*</code> holywar either ;)"}, {"owner": {"reputation": 325758, "user_id": 415784, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2WX9Z.jpg?s=128&g=1", "display_name": "Nawaz", "link": "https://stackoverflow.com/users/415784/nawaz"}, "reply_to_user": {"reputation": 1604, "user_id": 5722863, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1070999896265014/picture?type=large", "display_name": "Vasiliy Galkin", "link": "https://stackoverflow.com/users/5722863/vasiliy-galkin"}, "edited": false, "score": 0, "creation_date": 1501091935, "post_id": 45333050, "comment_id": 77630621, "body": "@VasiliyGalkin: Think <i>visually</i>:  <code>using pint = int*;</code> then what does <code>const pint</code> mean? <code>const int*</code>? or ... ? :-/"}, {"owner": {"reputation": 1604, "user_id": 5722863, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1070999896265014/picture?type=large", "display_name": "Vasiliy Galkin", "link": "https://stackoverflow.com/users/5722863/vasiliy-galkin"}, "reply_to_user": {"reputation": 325758, "user_id": 415784, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2WX9Z.jpg?s=128&g=1", "display_name": "Nawaz", "link": "https://stackoverflow.com/users/415784/nawaz"}, "edited": false, "score": 0, "creation_date": 1501092236, "post_id": 45333050, "comment_id": 77630831, "body": "@Nawaz I strongly believe that typedefs for raw pointers to some type is in general very bad practice. So let&#39;s just agree that we disagree on this matter ;)"}, {"owner": {"reputation": 325758, "user_id": 415784, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2WX9Z.jpg?s=128&g=1", "display_name": "Nawaz", "link": "https://stackoverflow.com/users/415784/nawaz"}, "reply_to_user": {"reputation": 1604, "user_id": 5722863, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1070999896265014/picture?type=large", "display_name": "Vasiliy Galkin", "link": "https://stackoverflow.com/users/5722863/vasiliy-galkin"}, "edited": false, "score": 0, "creation_date": 1501092385, "post_id": 45333050, "comment_id": 77630915, "body": "@VasiliyGalkin: If that is your &quot;belief&quot;, then that cannot be argued against! If <code>T</code> is a template parameter whose value is <code>int*</code>: then what does <code>const T</code> mean? Is it <code>const int*</code>? or ... ? ;-)"}, {"owner": {"reputation": 1604, "user_id": 5722863, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1070999896265014/picture?type=large", "display_name": "Vasiliy Galkin", "link": "https://stackoverflow.com/users/5722863/vasiliy-galkin"}, "reply_to_user": {"reputation": 325758, "user_id": 415784, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2WX9Z.jpg?s=128&g=1", "display_name": "Nawaz", "link": "https://stackoverflow.com/users/415784/nawaz"}, "edited": false, "score": 0, "creation_date": 1501097363, "post_id": 45333050, "comment_id": 77633609, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/150226/discussion-between-vasiliy-galkin-and-nawaz\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": true, "score": 5, "last_activity_date": 1501088183, "last_edit_date": 1501088183, "creation_date": 1501087806, "answer_id": 45333050, "question_id": 45332961, "link": "https://stackoverflow.com/questions/45332961/why-can-i-pass-the-key-of-stdmap-to-a-function-that-expects-non-const/45333050#45333050", "title": "Why can I pass the key of std::map to a function that expects non-const?", "body": "<blockquote>\n  <p>so I assume that the type of <code>elem.first</code> is <code>const S*</code></p>\n</blockquote>\n\n<p>No. The key stored in <code>map</code> is <code>const</code>, that means for <code>std::map&lt;S*, Data&gt;</code>, the key will be <code>S* const</code> (i.e. <code>const</code> pointer), not <code>const S*</code> (i.e. pointer to <code>const</code>). So it's fine to pass it to <code>foo(S* ptr)</code>, the <code>const</code> pointer itself will be copied to the parameter.</p>\n"}, {"tags": [], "owner": {"reputation": 2928, "user_id": 1603365, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/K4qJN.png?s=128&g=1", "display_name": "md5i", "link": "https://stackoverflow.com/users/1603365/md5i"}, "is_accepted": false, "score": 1, "last_activity_date": 1501088051, "creation_date": 1501088051, "answer_id": 45333114, "question_id": 45332961, "link": "https://stackoverflow.com/questions/45332961/why-can-i-pass-the-key-of-stdmap-to-a-function-that-expects-non-const/45333114#45333114", "title": "Why can I pass the key of std::map to a function that expects non-const?", "body": "<p><code>std::map&lt;K, V&gt;::value_type</code> is <code>std::pair&lt;const K, V&gt;</code>, as you mentioned.  So what is <code>const K</code> when <code>S*</code> is substituted for <code>K</code>?  The answer, which might surprise you, is not <code>const S*</code>. but rather <code>S* const</code>.</p>\n"}], "owner": {"reputation": 1604, "user_id": 5722863, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1070999896265014/picture?type=large", "display_name": "Vasiliy Galkin", "link": "https://stackoverflow.com/users/5722863/vasiliy-galkin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "accepted_answer_id": 45333050, "answer_count": 3, "score": 3, "last_activity_date": 1501088267, "creation_date": 1501087528, "last_edit_date": 1501088267, "question_id": 45332961, "link": "https://stackoverflow.com/questions/45332961/why-can-i-pass-the-key-of-stdmap-to-a-function-that-expects-non-const", "title": "Why can I pass the key of std::map to a function that expects non-const?", "body": "<p>According to <code>std::map</code> <a href=\"http://en.cppreference.com/w/cpp/container/map\" rel=\"nofollow noreferrer\">documentation</a>, it stores the key-value pairs in <code>std::pair&lt;const Key, Value&gt;</code>, so the keys in the map are const.</p>\n\n<p>Now imagine that I have an <code>std::map</code> where the keys are the pointers to some objects.</p>\n\n<pre><code>struct S {};\nstruct Data {};\nusing MyMap = std::map&lt;S*, Data&gt;;\n</code></pre>\n\n<p>Let's also assume there is a function <code>foo</code> that accepts <code>S*</code> parameter.</p>\n\n<pre><code>void foo(S* ptr) { /* modify the object (*ptr) */ }\n</code></pre>\n\n<p>Now, the question is: when I iterate over <code>MyMap</code> with range-based for-loop, I am able to pass the map element key to <code>foo</code>:</p>\n\n<pre><code>MyMap m = getMyMapSomehow();\nfor (auto elem : m)\n{\n    static_assert(std::is_const&lt;decltype(elem.first)&gt;::value, \"Supposed to be `const S*`\");\n    foo(elem.first); // why does it compile?\n}\n</code></pre>\n\n<p>So, even though my <code>static_assert</code> succeeds (so I assume that the type of <code>elem.first</code> is <code>const S*</code>), the call to <code>foo</code> compiles fine, and therefore it look as if I'm able to modify the object behind pointer-to-const.</p>\n\n<p>Why am I able to do that?</p>\n\n<p><strong>P.S.</strong> Here's a <a href=\"http://coliru.stacked-crooked.com/a/62254cd9bd872a7d\" rel=\"nofollow noreferrer\">live example at Coliru</a> that illustrates my point. For brevity, I use <code>int</code> instead of <code>S</code> and <code>Data</code>.</p>\n"}, {"tags": ["c++", "stl", "set"], "answers": [{"tags": [], "owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "is_accepted": true, "score": 0, "last_activity_date": 1501088079, "creation_date": 1501088079, "answer_id": 45333121, "question_id": 45332945, "link": "https://stackoverflow.com/questions/45332945/using-custom-comparator-for-stl-set-inside-class-through-function-pointer/45333121#45333121", "title": "using custom comparator for STL SET inside class through function pointer", "body": "<p>You can't write executable code not in functions, and since</p>\n\n<pre><code>set&lt;node*,bool (*)(const node*,const node*)&gt; mset(&amp;cmpFunc) ;\n</code></pre>\n\n<p>is a constructor invocation (i.e. executable code), and it isn't in a function (in a <code>class</code> declaration) - it isn't allowed.</p>\n\n<p>Use constructor initializer list, to initialize members:</p>\n\n<pre><code>class huffmanEncoder\n{\n    set&lt;node*,bool (*)(const node*,const node*)&gt; mset;\n    huffmanEncoder () : mset(&amp;cmpFunc) {}\n....\n};\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8370512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b84a44ca73606e4fced1a643a9a90f9?s=128&d=identicon&r=PG&f=1", "display_name": "Akshay", "link": "https://stackoverflow.com/users/8370512/akshay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 45333121, "answer_count": 1, "score": 0, "last_activity_date": 1501088079, "creation_date": 1501087483, "question_id": 45332945, "link": "https://stackoverflow.com/questions/45332945/using-custom-comparator-for-stl-set-inside-class-through-function-pointer", "title": "using custom comparator for STL SET inside class through function pointer", "body": "<p>I am trying to create a set with this custom comparator function inside a class </p>\n\n<pre><code>bool cmpFunc(const node*  a,const node*  b)\n{\n    return (a-&gt;freqOfAlphabet) &lt;= (b-&gt;freqOfAlphabet) ;\n}\n\nclass huffmanEncoder\n{\n    set&lt;node*,bool (*)(const node*,const node*)&gt; mset(&amp;cmpFunc) ;// throws error\n....\n}\n</code></pre>\n\n<p>but I am getting an error as 'expected identifier before \u2018&amp;\u2019 token'</p>\n\n<p>the same thing works fine inside main</p>\n\n<pre><code>int main()\n{\nset&lt;node*,bool (*)(const node*,const node*)&gt; mmset(&amp;cmpFunc) ; // works fine\n}\n</code></pre>\n\n<p>please let me know the reason behind this error, thanks a lot</p>\n"}, {"tags": ["c++", "pointers", "vector", "actor", "incomplete-type"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1501087493, "post_id": 45332880, "comment_id": 77627780, "body": "<i>Actor it gives me &quot;Cannot Delete Incomplete Type&quot; Error!</i> Please <b>copy-paste</b> all of the error text, without paraphrasing it, and trying to shorten it."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1501087868, "post_id": 45332880, "comment_id": 77628006, "body": "You can&#39;t erase from a container that you are still iterating. Your killActor function is undefined behavior. Try erase remove like <a href=\"http://en.cppreference.com/w/cpp/algorithm/remove\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 3, "user_id": 7415641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tJ0U0.jpg?s=128&g=1", "display_name": "Hello", "link": "https://stackoverflow.com/users/7415641/hello"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1501088080, "post_id": 45332880, "comment_id": 77628159, "body": "@AlgirdasPreid\u017eius Okay I did so."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1501088108, "post_id": 45332880, "comment_id": 77628181, "body": "You have virtual functions but no virtual destructor- that&#39;s a code smell."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1501088275, "post_id": 45332880, "comment_id": 77628292, "body": "@Hello Since it triggered a breakpoint, which means, that it apparently is a runtime issue, as opposed to compile time one, did you use the debugger to investigate the call-stack, the values of related variables, etc.?"}, {"owner": {"reputation": 3, "user_id": 7415641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tJ0U0.jpg?s=128&g=1", "display_name": "Hello", "link": "https://stackoverflow.com/users/7415641/hello"}, "edited": false, "score": 0, "creation_date": 1501088328, "post_id": 45332880, "comment_id": 77628338, "body": "@manni66 Nope, I tried looping backwards to avoid that, and the same error persists!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1501088427, "post_id": 45332880, "comment_id": 77628406, "body": "You can&#39;t iterate if you are erasing!"}, {"owner": {"reputation": 3, "user_id": 7415641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tJ0U0.jpg?s=128&g=1", "display_name": "Hello", "link": "https://stackoverflow.com/users/7415641/hello"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1501088560, "post_id": 45332880, "comment_id": 77628493, "body": "@AlgirdasPreid\u017eius Okay it seems that it&#39;s calling the default Actor destructor."}, {"owner": {"reputation": 3, "user_id": 7415641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tJ0U0.jpg?s=128&g=1", "display_name": "Hello", "link": "https://stackoverflow.com/users/7415641/hello"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1501089188, "post_id": 45332880, "comment_id": 77628908, "body": "@AlgirdasPreid\u017eius That means it doesn&#39;t recognize the definition of the Actor class(it sees it as an incomplete type), but I don&#39;t know why?"}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 1, "creation_date": 1501089478, "post_id": 45332880, "comment_id": 77629117, "body": "The \u201ccan&#39;t delete an incomplete type\u201d part is a red herring. It\u2019s in a static assert; if that fails, your program refuses to <i>compile</i>. You\u2019re compiling just fine, but running into runtime errors. At runtime, there are no incomplete types."}, {"owner": {"reputation": 3, "user_id": 7415641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tJ0U0.jpg?s=128&g=1", "display_name": "Hello", "link": "https://stackoverflow.com/users/7415641/hello"}, "reply_to_user": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1501089742, "post_id": 45332880, "comment_id": 77629279, "body": "@DanielH I understand, in the new example my program compiles without any errors, but at runtime gives an error, that&#39;s because I insert the actor to the allActors container of the planet at runtime, so at compile time the allActors container is empty, I think that is why it is happening at runtime?"}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1501091053, "post_id": 45332880, "comment_id": 77630101, "body": "@Hello My point was that this has nothing to do with incomplete types, because that only happens at compile time. The issue is probably that the pointer is being corrupted somehow, or the virtual destructor issue others mentioned, but it isn\u2019t the order of your include files or anything else related to types being incomplete."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1501091283, "post_id": 45332880, "comment_id": 77630236, "body": "The issue probably has to do with the iterating while erasing, inheritance, or both. Please provide a <a href=\"https://stackoverflow.com/help/mcve\"><i>Minimal</i> and <i>Complete</i> example</a>."}, {"owner": {"reputation": 3, "user_id": 7415641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tJ0U0.jpg?s=128&g=1", "display_name": "Hello", "link": "https://stackoverflow.com/users/7415641/hello"}, "reply_to_user": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 1, "creation_date": 1501100325, "post_id": 45332880, "comment_id": 77635272, "body": "@DanielH I understand, thanks for the information, also did you see my last edit? That makes me think its not something about iterating! I&#39;ll try virtual destructors and see what goes on!"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7415641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tJ0U0.jpg?s=128&g=1", "display_name": "Hello", "link": "https://stackoverflow.com/users/7415641/hello"}, "edited": false, "score": 0, "creation_date": 1501088694, "post_id": 45333189, "comment_id": 77628587, "body": "That does not seem to be the problem, the problem is that the class Planet sees Actor as just class Actor; But I don&#39;t know why since I have included everything correctly and the implementation is going on the Planet.cpp!"}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1501088800, "post_id": 45333189, "comment_id": 77628657, "body": "You can erase if you do it on the last element. If not, the internal code (something like &quot;erase at begin + pos&quot;) will try with a wrong iterator."}, {"owner": {"reputation": 3, "user_id": 7415641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tJ0U0.jpg?s=128&g=1", "display_name": "Hello", "link": "https://stackoverflow.com/users/7415641/hello"}, "edited": false, "score": 0, "creation_date": 1501088913, "post_id": 45333189, "comment_id": 77628721, "body": "@manni66 I also tried disabling the Tick function and calling KillActor, before any looping, still the same!"}, {"owner": {"reputation": 3, "user_id": 7415641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tJ0U0.jpg?s=128&g=1", "display_name": "Hello", "link": "https://stackoverflow.com/users/7415641/hello"}, "reply_to_user": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1501089143, "post_id": 45333189, "comment_id": 77628887, "body": "@Ripi2 I updated with a new example, please check it out."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "is_accepted": false, "score": 0, "last_activity_date": 1501088327, "creation_date": 1501088327, "answer_id": 45333189, "question_id": 45332880, "link": "https://stackoverflow.com/questions/45332880/vector-erase-error-cannot-delete-incomplete-type/45333189#45333189", "title": "vector.erase error, cannot delete incomplete type", "body": "<p>You can't erase from a container that you are still iterating. Your killActor function is undefined behavior. Try erase remove like <a href=\"http://en.cppreference.com/w/cpp/algorithm/remove\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>You have virtual functions but no virtual destructor. Fix it.</p>\n"}], "owner": {"reputation": 3, "user_id": 7415641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tJ0U0.jpg?s=128&g=1", "display_name": "Hello", "link": "https://stackoverflow.com/users/7415641/hello"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 339, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1501089088, "creation_date": 1501087278, "last_edit_date": 1501089088, "question_id": 45332880, "link": "https://stackoverflow.com/questions/45332880/vector-erase-error-cannot-delete-incomplete-type", "title": "vector.erase error, cannot delete incomplete type", "body": "<p>Okay so I'm trying to create an Actor-Behaviour system, and I'm having some trouble with incomplete types, basically, when I try to kill an Actor, it tells me that class Actor is an incomplete type.</p>\n\n<p>So my structure goes as follows:</p>\n\n<pre><code>Planet-&gt; Vector of all Actors\nActor-&gt; Vector of all Behaviors\nBehaviour-&gt; Game Logic\n</code></pre>\n\n<p>First, we have the Behaviour class, that has a reference to its actor(the actor that added it to its collection), a string holding its type, and functions used for game logic: init(called on start), and tick(called every frame):</p>\n\n<pre><code>class Actor;\n\nclass Behaviour\n{\n  protected:\n    Actor* actor;\n  public:\n    string type;\n    Behaviour();\n    ~Behaviour();\n    virtual void Init(); // virtual because every component needs to override them\n    virtual void Tick();\n}\n</code></pre>\n\n<p>then we have the Actor class, which contains a vector of unique pointers to all of its behaviors, a pointer to its Planet, a unique id, a name, and game logic functions, used to loop through all the behaviors and do game logic!</p>\n\n<pre><code>// Actor.h\nclass Planet;\n\nclass Actor\n{\n  private:\n    unsigned id;\n    string name;\n    vector&lt; unique_ptr&lt; Behaviour &gt; &gt; allBehaviours;\n  protected:\n    Planet* planet;\n  public:\n    Actor();\n    ~Actor();\n    void Init(); // Go through all the behaviors and call their Inits and Ticks\n    void Tick();\n\n    template &lt;typename T, typename ...Args&gt;\n    void AddBehaviour(Args &amp;&amp; ...args); // Creates and adds a new Behaviour of type T to the allBehaviours vector\n\n    template &lt;typename T&gt;\n    T&amp; GetBehaviour(std::string type); // Loops through all the Behaviours, and returns the Behaviour whose type is the same as type\n\n// Actor.cpp\n\n#include \"Planet.h\"\n#include \"Behaviour.h\"\n#include \"Actor.h\"\n\n// Implement Functions\n</code></pre>\n\n<p>That was Actor.h, Actor.cpp implements those functions and includes Planet.h then Behaviour.h then Actor.h!</p>\n\n<p>Now the Planet class contains a vector of unique pointers to all of its Actors, a name, and a unique id generator for its Actors:</p>\n\n<pre><code>// Planet.h\n\nclass Actor;\n\nclass Planet\n{\n    private:\n      unsigned idCounter = 0;\n      string name;\n      vector&lt; unique_ptr&lt; Actor &gt; &gt; allActors;\n    public:\n      unsigned GetNewID();\n      void Init();\n      void Tick(); // Used to loop through all the Actors\n\n      void AddActor(Actor* newActor); // adds a new Actor to the list of all Actors\n      void KillActor(int id); // loops through all the Actors and when it finds an Actor whose unique id is matching the id variable it erases it from the allActors vector\n\n}\n\n// Planet.cpp\n\n#include \"Public.h\"\n#include \"Actor.h\"\n#include \"Planet.h\"\n\n    Planet::KillActor(int id){\n        unsigned i = 0;\n        for (auto&amp; a : allActors) {\n            if (a-&gt;GetID() == id)\n                allActors.erase(allActors.begin() + i);\n            i++;\n        }\n    }\n\n    // Other Functions\n</code></pre>\n\n<p>I also have a Public.h file that includes stuff like iostream, memory, vector, etc! But does not include files I have created!</p>\n\n<p>And there is a class called Win that has a collection of unique_ptr &lt; Planet >\nand there is a public variable called win that is in Public.h ( included everywhere ), each time a Planet is constructed it is pushed to that collection and the Win class has a pointer to the last constructed Planet, so each time an Actor is constructed, this line gets called: </p>\n\n<pre><code>{\n // other stuff\n win.GetCurrentPlanet()-&gt;AddActor(this); \n}\n</code></pre>\n\n<p>I have tested this structure and it works successfully, I can have multiple Planets and jump from one to another, pointers to Actors work without problems, pointers to Behaviours also work without problems!</p>\n\n<p>Now the problem lies when I call the KillActor function, it loops through all the Actors correctly, it finds the Actor I want to kill then when I call erase upon that Actor it sends me to the file memory, and tells me my program has triggered a breakpoint:</p>\n\n<pre><code>void operator()(_Ty *_Ptr) const _NOEXCEPT\n    {   // delete a pointer\n    static_assert(0 &lt; sizeof (_Ty),\n        \"can't delete an incomplete type\");\n    delete _Ptr; // Here is the breakpoint, it is trying to delete the Actor I inputed \n    }\n};\n</code></pre>\n\n<p>I don't understand why it's giving me that error, I'm pretty sure I have a pretty solid including and forward declaration structure.</p>\n\n<p>EDIT 1:</p>\n\n<p>Okay so I did a test, I disabled the Tick function(it doesn't do anything right now), and I'm calling KillActor like so:</p>\n\n<pre><code>int main() {\n\n    Planet b = Planet(\"B\");\n\n    Actor bactor = Actor();\n\n    bactor.AddBehaviour&lt;TestA&gt;();\n\n    b.KillActor(0); // This still results in the same incomplete type error!\n\n    do\n    {\n        win.changed = false;\n        win.GetCurrentPlanet()-&gt;Init();\n        while (win.gameRunning)\n        {\n            win.Tick();\n            //win.GetCurrentPlanet()-&gt;Tick(1);\n            if (win.changed)\n                break;\n        }\n    } while (win.changed);\n\n    win.Quit();\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "macos", "makefile", "include", "googletest"], "comments": [{"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1501087645, "post_id": 45332621, "comment_id": 77627869, "body": "Please create a <b>minimal</b>, reproducible example by removing all unnecessary stuff from your C++ code and Makefile."}, {"owner": {"reputation": 864, "user_id": 5554515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abb985d5c3dbe86d3794ed811249773c?s=128&d=identicon&r=PG&f=1", "display_name": "Moyote", "link": "https://stackoverflow.com/users/5554515/moyote"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1501091740, "post_id": 45332621, "comment_id": 77630504, "body": "Thank you for your answer. I am not too familiar with Makefiles, so it is hard to remove stuff, and be sure that I don&#39;t accidentally remove the root cause of my problem."}], "owner": {"reputation": 864, "user_id": 5554515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abb985d5c3dbe86d3794ed811249773c?s=128&d=identicon&r=PG&f=1", "display_name": "Moyote", "link": "https://stackoverflow.com/users/5554515/moyote"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1501092742, "creation_date": 1501086376, "last_edit_date": 1501092742, "question_id": 45332621, "link": "https://stackoverflow.com/questions/45332621/including-header-from-another-folder-fails-on-osx", "title": "Including header from another folder fails on OSX", "body": "<p>I have the following code:</p>\n\n<pre><code>#include \"gtest/gtest.h\"\n#include \"Student_Info.hpp\"\n#include \"../Chapter3/MedianCalculator.hpp\"\n#include \"../Chapter3/FinalGradeCalculator.hpp\"\n#include &lt;string&gt;\n#include &lt;vector&gt;\nusing std::vector;\nusing std::string;\n\n\nfloat calculateFinalGradeFromStruct(const Student_info&amp; s)\n{\n    // My code is here...\n}\n\nTEST(studentRecord, calculateGrades)\n{\n    // My tests are here...\n}\n</code></pre>\n\n<p>And the following Makefile:</p>\n\n<pre><code>GTEST_DIR=../googletest/googletest\n\nCPPFLAGS += -isystem $(GTEST_DIR)/include\nCXXFLAGS += -std=c++11 -g -Wall -Wextra -pthread\nTESTS = app_unittest \nGTEST_HEADERS = $(GTEST_DIR)/include/gtest/*.h \\\n                $(GTEST_DIR)/include/gtest/internal/*.h\n\nall : app_unittest $(TESTS)\n\nGTEST_SRCS_ = $(GTEST_DIR)/src/*.cc $(GTEST_DIR)/src/*.h $(GTEST_HEADERS)\n\ngtest-all.o : $(GTEST_SRCS_)\n    $(CXX) $(CPPFLAGS) -I$(GTEST_DIR) $(CXXFLAGS) -c \\\n            $(GTEST_DIR)/src/gtest-all.cc\n\ngtest_main.o : $(GTEST_SRCS_)\n    $(CXX) $(CPPFLAGS) -I$(GTEST_DIR) $(CXXFLAGS) -c \\\n            $(GTEST_DIR)/src/gtest_main.cc\n\ngtest.a : gtest-all.o\n    $(AR) $(ARFLAGS) $@ $^\n\ngtest_main.a : gtest-all.o gtest_main.o\n    $(AR) $(ARFLAGS) $@ $^\n\n*.o : *.cpp $(GTEST_HEADERS)\n    $(CXX) $(CPPFLAGS) $(CXXFLAGS) -c *.cpp\n\napp_unittest : *.o gtest_main.a\n    $(CXX) $(CPPFLAGS) $(CXXFLAGS) -lpthread $^ -o $@\n\ngut: app_unittest\n    ./app_unittest\n</code></pre>\n\n<p>If I move MedianCalculator.hpp and FinalGradeCalculator.hpp to same folder where I have this code above (and fix the includes properly), everything works just fine. I am using MacOSX and XCode 8.3.3. </p>\n\n<p>However, when I try to include MedianCalculator.hpp and FinalGradeCalculator.hpp like in example (from the other folder), I get the following error. </p>\n\n<pre><code>Risto-Mattis-MacBook-Air:Chapter4 ristomatti$ make gut\nc++ -isystem ../googletest/googletest/include -std=c++11 -g -Wall -Wextra -pthread -c *.cpp\nc++ -isystem ../googletest/googletest/include -I../googletest/googletest -std=c++11 -g -Wall -Wextra -pthread -c \\\n            ../googletest/googletest/src/gtest-all.cc\nc++ -isystem ../googletest/googletest/include -I../googletest/googletest -std=c++11 -g -Wall -Wextra -pthread -c \\\n            ../googletest/googletest/src/gtest_main.cc\nar rv gtest_main.a gtest-all.o gtest_main.o\nar: creating archive gtest_main.a\na - gtest-all.o\na - gtest_main.o\nc++ -isystem ../googletest/googletest/include -std=c++11 -g -Wall -Wextra -pthread -lpthread *.o gtest_main.a -o app_unittest\nclang: warning: argument unused during compilation: '-pthread' [-Wunused-command-line-argument]\nUndefined symbols for architecture x86_64:\n  \"MedianCalculator::calculateMedian(std::__1::vector&lt;int, std::__1::allocator&lt;int&gt; &gt;)\", referenced from:\n      calculateFinalGradeFromStruct(Student_info const&amp;) in 4-0.o\n  \"MedianCalculator::MedianCalculator()\", referenced from:\n      calculateFinalGradeFromStruct(Student_info const&amp;) in 4-0.o\n  \"FinalGradeCalculator::calculateFinalGrades(std::__1::vector&lt;float, std::__1::allocator&lt;float&gt; &gt; const&amp;)\", referenced from:\n      calculateFinalGradeFromStruct(Student_info const&amp;) in 4-0.o\n  \"FinalGradeCalculator::FinalGradeCalculator()\", referenced from:\n      calculateFinalGradeFromStruct(Student_info const&amp;) in 4-0.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nmake: *** [app_unittest] Error 1\n</code></pre>\n\n<p>Can someone please tell me what I do wrong?</p>\n"}, {"tags": ["c++", "templates", "visual-c++", "metaprogramming", "sfinae"], "comments": [{"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1501088262, "post_id": 45332612, "comment_id": 77628283, "body": "What are the purpose of the two first overloads? One is for method returning <code>spString</code> and the other for method returning <code>std::string</code>?"}, {"owner": {"reputation": 640, "user_id": 2294936, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uPAUU.gif?s=128&g=1", "display_name": "Nyashes", "link": "https://stackoverflow.com/users/2294936/nyashes"}, "reply_to_user": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1501088325, "post_id": 45332612, "comment_id": 77628333, "body": "It is to handle the case where the type has a method getDebugString and use it instead of the default fallback method"}, {"owner": {"reputation": 640, "user_id": 2294936, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uPAUU.gif?s=128&g=1", "display_name": "Nyashes", "link": "https://stackoverflow.com/users/2294936/nyashes"}, "reply_to_user": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1501088563, "post_id": 45332612, "comment_id": 77628497, "body": "Concerning edit: std::string is never mentioned, we don&#39;t use std::string for some old reasons. Also one of the methods apply on pointer or pointer like objects to an object, the other to direct instances"}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1501088701, "post_id": 45332612, "comment_id": 77628593, "body": "Did not notice that you had <code>.</code> in one case and <code>-&gt;</code> in the other - Would be better to use <code>T *v</code> in the second case for readibility."}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1501088915, "post_id": 45332612, "comment_id": 77628724, "body": "Which version of clang are you using? I can get this code to compile with clang, which seems pretty normal since there is no way to select one of the first two overload instead of the third here."}, {"owner": {"reputation": 640, "user_id": 2294936, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uPAUU.gif?s=128&g=1", "display_name": "Nyashes", "link": "https://stackoverflow.com/users/2294936/nyashes"}, "reply_to_user": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1501088974, "post_id": 45332612, "comment_id": 77628767, "body": "Oh well this one is on me, let me just add a structure with a dummy getDebugString. I&#39;ll do this as soon  as I&#39;m on a computer again"}], "answers": [{"comments": [{"owner": {"reputation": 640, "user_id": 2294936, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uPAUU.gif?s=128&g=1", "display_name": "Nyashes", "link": "https://stackoverflow.com/users/2294936/nyashes"}, "edited": false, "score": 0, "creation_date": 1501091049, "post_id": 45334033, "comment_id": 77630098, "body": "thanks, sorry, I only managed to find a computer now, which is a bit late."}], "tags": [], "owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "is_accepted": true, "score": 1, "last_activity_date": 1501091141, "last_edit_date": 1501091141, "creation_date": 1501090954, "answer_id": 45334033, "question_id": 45332612, "link": "https://stackoverflow.com/questions/45332612/sfinae-with-vc-compiler/45334033#45334033", "title": "SFINAE with VC++ compiler", "body": "<p>Here is the way to do what you want - tested with VC 19.00.24215.1.</p>\n\n<p><strong>Helper template to detected <code>getDebugString()</code>:</strong></p>\n\n<pre><code>template &lt;typename T&gt;\nauto has_getDebugString_impl(int) -&gt;\n    decltype(void(std::declval&lt;T&gt;().getDebugString()), std::true_type{});\n\ntemplate &lt;typename T&gt;\nauto has_getDebugString_impl(...) -&gt; std::false_type;\n\ntemplate &lt;typename T&gt;\nstruct has_getDebugString: decltype(has_getDebugString_impl&lt;T&gt;(0)) { };\n</code></pre>\n\n<p><strong>Combined with <code>std::enable_if</code>:</strong></p>\n\n<pre><code>template &lt;class T&gt;\ninline std::enable_if_t &lt; has_getDebugString&lt;T&gt;::value, spString &gt; from(T v) {\n    return v.getDebugString();\n}\n\ntemplate &lt;class T&gt; \ninline std::enable_if_t &lt; has_getDebugString&lt;T&gt;::value, spString &gt; from(T *v) {\n    spString r;\n    r.format(\"%u (%s)\", (size_t)v, v-&gt;getDebugString().c_str());\n    return  r;\n}\ntemplate &lt;class T&gt;\ninline std::enable_if_t &lt; ! has_getDebugString&lt;T&gt;::value, spString &gt; from(T v) {\n    return spString(\"(\") + typeid(T).name() + \" instance)\"; \n}\n</code></pre>\n\n<p><strong>And overload (not specialized template) for specific types:</strong></p>\n\n<pre><code>inline spString from(float _v) { spString _d;  fromFloat(_d, _v); return _d; }\ninline spString from(int _v) { spString _d;  fromInt(_d, _v); return _d; }\n</code></pre>\n\n<p>This is not the prettiest code, and there may be more straightforward way, but I had to deal with some issue in VC... </p>\n\n<p><strong>Note:</strong> You can use <code>enable_if</code> inside a default template parameter instead of as a return type if you want:</p>\n\n<pre><code>template &lt;class T, class = std::enable_if_t&lt;has_getDebugString&lt;T&gt;::value&gt;&gt;\ninline spString from(T v) {\n    return v.getDebugString();\n}\n</code></pre>\n"}], "owner": {"reputation": 640, "user_id": 2294936, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uPAUU.gif?s=128&g=1", "display_name": "Nyashes", "link": "https://stackoverflow.com/users/2294936/nyashes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 45334033, "answer_count": 1, "score": 0, "last_activity_date": 1501091141, "creation_date": 1501086351, "last_edit_date": 1501091014, "question_id": 45332612, "link": "https://stackoverflow.com/questions/45332612/sfinae-with-vc-compiler", "title": "SFINAE with VC++ compiler", "body": "<p>I'm currently trying to compile a simple SFINAE structure with VC++ compiler. My version (according to the cl command) is</p>\n\n<pre><code>Microsoft (R) C/C++ Optimizing Compiler Version 19.00.24215.1 for x86\n</code></pre>\n\n<p>this code compiles fine on clang</p>\n\n<pre><code>// Example program\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;typeinfo&gt;\n\nstruct spString\n{\n    template &lt;class... T&gt;\n    spString format(T...) { return spString(); }\n    const char* c_str() { return nullptr; }\n\n    spString operator+(spString) { return spString(); }\n    spString operator+(const char*) { return spString(); }\n};\n\nstruct debuggable\n{\n    spString getDebugString() { return spString(); }\n};\n\nvoid fromFloat(spString, float&amp;) {}\nvoid fromInt(spString, int&amp;) {}\n\n\ntemplate &lt;class T&gt; inline auto from( T v )\n    -&gt; decltype( v.getDebugString(), spString() )\n{\n    return v.getDebugString();\n}\ntemplate &lt;class T&gt; inline auto from( T v )\n    -&gt; decltype( v-&gt;getDebugString(), spString() )\n{\n    spString r;\n    r.format( \"%u (%s)\", (size_t) v, v-&gt;getDebugString().c_str() );\n    return  r;\n}\ntemplate &lt;class T&gt; inline spString from( T v )\n{\n    return spString(\"(\") + typeid(T).name() + \" instance)\"; \n}\ntemplate &lt;&gt; inline spString from( float _v          ) { spString _d;  fromFloat         ( _d, _v ); return _d; }\ntemplate &lt;&gt; inline spString from( int _v            ) { spString _d;  fromInt           ( _d, _v ); return _d; }\n//other base types\n\nint main()\n{\n    debuggable x{};\n\n    from(0);\n    from(0.f);\n    from(x);\n}\n</code></pre>\n\n<p>but will fail on Microsoft's compiler. Noe that I can't use another version and I'm stuck with the one I'm using right now. I always had mitigated success with SFINAE on this compiler but I don't see how to easily \"fix\" this code.</p>\n\n<p>the expected result is to get a debug string representation of something, if it has a getDebugString, use this method, if it's a base type, use a custom method, otherwise, just print the type's name.</p>\n\n<p>Do you see any way to achieve that with my version of visual studio?</p>\n"}, {"tags": ["c++", "sfml"], "comments": [{"owner": {"reputation": 9219, "user_id": 979325, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b513c9edd4da1688c05ba041820011c7?s=128&d=identicon&r=PG", "display_name": "Jepessen", "link": "https://stackoverflow.com/users/979325/jepessen"}, "edited": false, "score": 0, "creation_date": 1501088713, "post_id": 45332407, "comment_id": 77628604, "body": "<code>fenetre</code> has different signatures when defined and when declared. I suggest you to put function definitions before you use it, is less error-prone, if you don&#39;t want to put them in different files (that&#39;s instead correct if you want to post here)."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8371205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e88df5a0282109e5879c5962bf5e7ff?s=128&d=identicon&r=PG&f=1", "display_name": "Alexis BENOIT", "link": "https://stackoverflow.com/users/8371205/alexis-benoit"}, "edited": false, "score": 0, "creation_date": 1501160334, "post_id": 45347127, "comment_id": 77663971, "body": "Thanks for your help I&#39;m a beginner and i&#39;m lost with Pointer haha :)"}, {"owner": {"reputation": 61, "user_id": 6767952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0SROR.jpg?s=128&g=1", "display_name": "kooldart", "link": "https://stackoverflow.com/users/6767952/kooldart"}, "reply_to_user": {"reputation": 13, "user_id": 8371205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e88df5a0282109e5879c5962bf5e7ff?s=128&d=identicon&r=PG&f=1", "display_name": "Alexis BENOIT", "link": "https://stackoverflow.com/users/8371205/alexis-benoit"}, "edited": false, "score": 0, "creation_date": 1501160659, "post_id": 45347127, "comment_id": 77664257, "body": "@AlexisBENOIT no problem man, if that helped you, please make sure to mark it as the correct answer, thanks!"}], "tags": [], "owner": {"reputation": 61, "user_id": 6767952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0SROR.jpg?s=128&g=1", "display_name": "kooldart", "link": "https://stackoverflow.com/users/6767952/kooldart"}, "is_accepted": true, "score": 0, "last_activity_date": 1501148878, "creation_date": 1501148878, "answer_id": 45347127, "question_id": 45332407, "link": "https://stackoverflow.com/questions/45332407/c-sfml-error-c2248-noncopyableoperator/45347127#45347127", "title": "C++ / SFML error C2248 NonCopyableOperator", "body": "<p>The problem is as @Jepessen mentioned you basically have a return type of sf::RenderWindow on your declaration, and your parameter is of type Pointer sf::RenderWindow:</p>\n\n<pre><code>sf::RenderWindow fenetre(sf::RenderWindow*);\n</code></pre>\n\n<p>And then when you define the function, you are returning void, and your parameter is a Reference sf::RenderWindow:</p>\n\n<pre><code>void fenetre(sf::RenderWindow &amp;window)\n{\n   // Code\n}\n</code></pre>\n\n<p>To Fix this, make the return type of the declaration of fenetre void, since you are not actually returning a value at all, and make your parameter Reference to sf::RenderWindow:</p>\n\n<pre><code>// Declaration, on top of your program\n    void fenetre(sf::RenderWindow&amp;);\n// Definition, at the bottom\n    void fenetre(sf::RenderWindow &amp;window)\n    {\n       // Code\n    }\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8371205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e88df5a0282109e5879c5962bf5e7ff?s=128&d=identicon&r=PG&f=1", "display_name": "Alexis BENOIT", "link": "https://stackoverflow.com/users/8371205/alexis-benoit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 45347127, "answer_count": 1, "score": 1, "last_activity_date": 1501148878, "creation_date": 1501085763, "last_edit_date": 1501087384, "question_id": 45332407, "link": "https://stackoverflow.com/questions/45332407/c-sfml-error-c2248-noncopyableoperator", "title": "C++ / SFML error C2248 NonCopyableOperator", "body": "<p>I'm a beginner and I try to use the SFML library but I have a problem with my code</p>\n\n<pre><code>#pragma region include\n#include &lt;SFML/Graphics.hpp&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;cstdlib&gt;\n#pragma endregion include\n\n\nsf::RenderWindow fenetre(sf::RenderWindow*);\nsf::RectangleShape rectDraw(sf::RectangleShape*);\nsf::CircleShape cercleDraw(sf::CircleShape*);\nvoid CentreCercle(sf::CircleShape *cercle, int*, int*);\nvoid fermetureFenetre();\n\nvoid main()\n{\n#pragma region variables\nsf::RenderWindow window; \nfenetre(&amp;window);\n\nsf::RectangleShape rect; \nrectDraw(&amp;rect);;\n\nsf::CircleShape cercle; \ncercleDraw(&amp;cercle);\n\nint xCentreCercle;\nint yCentreCercle;\nCentreCercle(&amp;cercle, &amp;xCentreCercle, &amp;yCentreCercle);\n\nfloat speed = 1;\n\nsf::Vector2i positionSouris;\n#pragma endregion variables\n\nwhile(window.isOpen())\n{\n#pragma region fenOpen\n    sf::Event event;        \n    while(window.pollEvent(event))\n    {\n        if(event.type == sf::Event::Closed)\n            window.close();\n    }\n#pragma endregion fenOpen\n\n#pragma region KeyboardRectangle\nif (sf::Keyboard::isKeyPressed(sf::Keyboard::Up))\n    rect.move(0, -speed);\nelse if (sf::Keyboard::isKeyPressed(sf::Keyboard::Down))\n    rect.move(0, speed);\nelse if (sf::Keyboard::isKeyPressed(sf::Keyboard::Left))\n    rect.move(-speed, 0);\nelse if (sf::Keyboard::isKeyPressed(sf::Keyboard::Right))   \n    rect.move(speed, 0);\n#pragma endregion KeyboardRectangle\n\n#pragma region KeyboardCercle\nif (sf::Keyboard::isKeyPressed(sf::Keyboard::Z))\n    cercle.move(0, -speed);\nelse if (sf::Keyboard::isKeyPressed(sf::Keyboard::S))\n    cercle.move(0, speed);\nelse if (sf::Keyboard::isKeyPressed(sf::Keyboard::Q))\n    cercle.move(-speed, 0);\nelse if (sf::Keyboard::isKeyPressed(sf::Keyboard::D))\n    cercle.move(speed, 0);\n#pragma endregion KeyboardCercle\n\n#pragma region MouseCercle\n    if(sf::Mouse::isButtonPressed(sf::Mouse::Left))\n    {\n        bool boucle = true;\n        sf::Vector2f position = cercle.getPosition();\n        xCentreCercle = cercle.getPosition().x + cercle.getRadius();\n        yCentreCercle = cercle.getPosition().y+ cercle.getRadius();\n\n        float rayon = cercle.getRadius();\n\n        positionSouris = sf::Mouse::getPosition(window);\n        int xSouris = positionSouris.x;\n        int ySouris = positionSouris.y;\n\n        float resultat = (xCentreCercle-xSouris)*(xCentreCercle-xSouris)+(yCentreCercle-ySouris)*(yCentreCercle-ySouris);\n\n\n\n        if(sqrt(resultat)&lt;= rayon)\n        {\n            int diffX;\n            int diffY;      \n\n            diffX = xSouris-cercle.getPosition().x;\n            diffY = ySouris-cercle.getPosition().y;\n\n            while(boucle == true)\n            {\n                positionSouris = sf::Mouse::getPosition(window);\n                xSouris = positionSouris.x;\n                ySouris = positionSouris.y;\n\n\n                cercle.setPosition(xSouris - diffX, ySouris - diffY);\n\n                window.draw(rect);\n                window.draw(cercle);\n                window.display();\n                window.clear();\n\n                if (sf::Mouse::isButtonPressed(sf::Mouse::Left) == false)\n                    boucle = false;\n            }\n        }\n    }\n    if(sf::Mouse::isButtonPressed(sf::Mouse::Right) &amp;&amp; sf::Keyboard::isKeyPressed(sf::Keyboard::C))\n    {\n        positionSouris = sf::Mouse::getPosition(window);\n        int xSouris = positionSouris.x;\n        int ySouris = positionSouris.y;\n        cercle.setPosition(xSouris, ySouris);\n    }\n    #pragma endregion MouseCercle\n\n#pragma region Mouserectangle\nif(sf::Mouse::isButtonPressed(sf::Mouse::Left))\n{\n    bool boucle = true;\n    sf::Vector2f position = rect.getPosition();\n    sf::Vector2f taille = rect.getSize();\n\n    int xMax = position.x + taille.x;\n    int xMin = position.x;\n    int yMax = position.y + taille.y;\n    int yMin = position.y;\n\n    positionSouris = sf::Mouse::getPosition(window);\n    int xSouris = positionSouris.x;\n    int ySouris = positionSouris.y;\n\n    if(xSouris &gt; xMin &amp;&amp; xSouris &lt; xMax &amp;&amp; ySouris &gt; yMin &amp;&amp; ySouris &lt; yMax)\n    {\n        int diffX;\n        int diffY;\n\n        diffX = xSouris-xMin;\n        diffY = ySouris-yMin;\n\n        while(boucle == true)\n        {\n            positionSouris = sf::Mouse::getPosition(window);\n            xSouris = positionSouris.x;\n            ySouris = positionSouris.y;\n\n            rect.setPosition(xSouris - diffX, ySouris - diffY);\n            window.draw(rect);\n            window.draw(cercle);\n            window.display();\n            window.clear();\n\n            if (sf::Mouse::isButtonPressed(sf::Mouse::Left) == false)\n                boucle = false;\n        }\n    }\n}\nif(sf::Mouse::isButtonPressed(sf::Mouse::Right)&amp;&amp; sf::Keyboard::isKeyPressed(sf::Keyboard::R))\n{\n    positionSouris = sf::Mouse::getPosition(window);\n    int xSouris = positionSouris.x;\n    int ySouris = positionSouris.y;\n    rect.setPosition(xSouris, ySouris);\n}\n#pragma endregion MouseRectangle\n\n    window.draw(rect);\n    window.draw(cercle);\n    window.display();\n    window.clear();\n}\n}\n\nvoid fenetre(sf::RenderWindow &amp;window)\n{\nwindow.create(sf::VideoMode(800,600),\"Tuto SFML\");\nwindow.setPosition(sf::Vector2i(50,50));\nwindow.setFramerateLimit(60);\n}\n\nvoid fermetureFenetre(sf::RenderWindow &amp;window)\n{\n    sf::Event event;        \n    while(window.pollEvent(event))\n    {\n        if(event.type == sf::Event::Closed)\n            window.close();\n    }\n}\n\nvoid rectDraw(sf::RectangleShape &amp;rect)\n{\nrect.setSize(sf::Vector2f(200, 100));\nrect.setPosition(10, 10);\nrect.setFillColor(sf::Color(250, 100, 150));\n\n}\n\nvoid cercleDraw(sf::CircleShape &amp;cercle)\n{\ncercle.setFillColor(sf::Color(100,250,50));\ncercle.setRadius(50);\ncercle.setPosition(0, 0);\n}\n\nvoid CentreCercle(sf::CircleShape &amp;cercle, int &amp;xCentreCercle, int \n&amp;yCentreCercle)\n{\nxCentreCercle = cercle.getPosition().x + cercle.getRadius();\nyCentreCercle = cercle.getPosition().y+ cercle.getRadius();\n}\n</code></pre>\n\n<p>This program just serve to move rectangle or circle with keyboard or mouse.\nWhen all the program is in the main function I don't have any probleme but I want use subroutine and class in the future when I will be training but I have the following error ! <a href=\"https://i.stack.imgur.com/0qWjU.jpg\" rel=\"nofollow noreferrer\">error C2248</a></p>\n\n<p>After search I think the probleme come from function 'sf::RenderWindow' but again beginner I don't understand how get arround the problem.</p>\n\n<p>Thanks to help! :)</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1501085756, "post_id": 45332385, "comment_id": 77626605, "body": "Does <code>tottax();</code> match <code>void tottax(ACCOUNTS &amp;sfo)</code>?"}, {"owner": {"reputation": 1, "user_id": 8371316, "user_type": "registered", "profile_image": "https://graph.facebook.com/1455770237795134/picture?type=large", "display_name": "Meet Gujrathi", "link": "https://stackoverflow.com/users/8371316/meet-gujrathi"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1501085910, "post_id": 45332385, "comment_id": 77626726, "body": "Yes! It does. I mean I am calling the function tottax in the main right?"}, {"owner": {"reputation": 1754, "user_id": 6087092, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jjhgT.jpg?s=128&g=1", "display_name": "Isac", "link": "https://stackoverflow.com/users/6087092/isac"}, "edited": false, "score": 0, "creation_date": 1501085933, "post_id": 45332385, "comment_id": 77626737, "body": "<code>read();</code> also with the same problem"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1501085950, "post_id": 45332385, "comment_id": 77626751, "body": "Where is the parameter that <code>tottax</code> wants?"}, {"owner": {"reputation": 1, "user_id": 8371316, "user_type": "registered", "profile_image": "https://graph.facebook.com/1455770237795134/picture?type=large", "display_name": "Meet Gujrathi", "link": "https://stackoverflow.com/users/8371316/meet-gujrathi"}, "edited": false, "score": 0, "creation_date": 1501086121, "post_id": 45332385, "comment_id": 77626899, "body": "I don&#39;t get it... Why does does tottax need a parameter. (I&#39;m a beginner to Cpp and OOP concepts... Forgot to mention. My first program after attending calsses)"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1501086269, "post_id": 45332385, "comment_id": 77627014, "body": "@MeetGujrathi <code>void tottax(ACCOUNTS &amp;sfo)</code> says <code>tottax</code> wants a <code>ACCOUNTS &amp;</code>.  if you don&#39;t give it one you get an error. Sounds like you could use a <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good C++ book</a>"}], "answers": [{"tags": [], "owner": {"reputation": 6751, "user_id": 1417063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mwy5e.jpg?s=128&g=1", "display_name": "Davide Spataro", "link": "https://stackoverflow.com/users/1417063/davide-spataro"}, "is_accepted": false, "score": 1, "last_activity_date": 1501086394, "creation_date": 1501086394, "answer_id": 45332627, "question_id": 45332385, "link": "https://stackoverflow.com/questions/45332385/error-too-few-arguments-to-function-while-using-a-friend-function/45332627#45332627", "title": "Error too few arguments to function while using a friend function", "body": "<p><code>void tottax(ACCOUNTS &amp;sfo)</code> says; hey, I am a function which does not return a single bit (<code>void</code> as return type), but I need an object of type <code>ACCOUNTS</code> to be called. So you either give me one, or I am not gonna execute.</p>\n\n<p>In your <code>main</code> you are calling <code>tottax</code> in the following way: <code>tottax()</code>\nwhich translates to:\nDear compiler could you please call the function tottax, the one which does not take any parameter? The compiler look at you r source code and try to find something like: <code>void totax(){...}</code> which clearly does not exists cause the only version of <code>tottax</code> <strong>you wrote takes one and only one parameter</strong>.</p>\n\n<p>So again, the problem is that, <code>tottax</code> wants <strong>one and only one parameter</strong>. That is why the compiler is complaining.</p>\n\n<p>Plus think about it a bit more: <code>tottax</code> computes something that is related to an <code>ACCOUNTS</code>. If you don't provide one, what is it gonna compute?</p>\n\n<p>The same holds for the function <code>read</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 8371316, "user_type": "registered", "profile_image": "https://graph.facebook.com/1455770237795134/picture?type=large", "display_name": "Meet Gujrathi", "link": "https://stackoverflow.com/users/8371316/meet-gujrathi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1501086394, "creation_date": 1501085699, "question_id": 45332385, "link": "https://stackoverflow.com/questions/45332385/error-too-few-arguments-to-function-while-using-a-friend-function", "title": "Error too few arguments to function while using a friend function", "body": "<p>The question was to create a class named ACCOUNTS with a read function to accept the sales and purchases and then to create a friend function to print total tax to pay. I have tried doing this, but I keep getting the error that the funtion read and tottax have too few arguments. What can I correct?        </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n    #include&lt;iostream&gt;\n    using namespace std;\n    class ACCOUNTS\n    {   \n        public:\n        ACCOUNTS(){sales=0,purchase=0;}\n        private:\n            int sales,purchase;\n\n\n        friend void tottax(ACCOUNTS &amp;sfo);\n        friend void read(ACCOUNTS &amp;sfo);\n    };\n        void read(ACCOUNTS &amp;sfo)\n        {\n            cout&lt;&lt;\"Enter saleamt : \\n\";\n            cin&gt;&gt;sfo.sales;\n            cout&lt;&lt;\"Enter purchaseamt : \\n\";\n            cin&gt;&gt;sfo.purchase;\n        }\n        void tottax(ACCOUNTS &amp;sfo)\n        {\n            int tax=(sfo.sales-sfo.purchase)*(4/100);\n            cout&lt;&lt;\"\\nTax : \"&lt;&lt;tax;\n        }\n        int main()\n        {\n            read();\n            tottax();\n            return 0;\n        }\n</code></pre>\n"}, {"tags": ["c++", "language-lawyer"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1501085611, "post_id": 45332326, "comment_id": 77626506, "body": "They may each contain 3 floats but the first one has 3 members and the second one only has one.  That said <code>std::complex</code> is allowed to do this so I&#39;m not sure"}, {"owner": {"reputation": 13521, "user_id": 654953, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f6453f58b70e93dbfa8998b71a95bb09?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/654953/ryan"}, "edited": false, "score": 0, "creation_date": 1501085625, "post_id": 45332326, "comment_id": 77626513, "body": "the size would be the same"}, {"owner": {"reputation": 59891, "user_id": 1207195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3P4g.jpg?s=128&g=1", "display_name": "Adriano Repetti", "link": "https://stackoverflow.com/users/1207195/adriano-repetti"}, "edited": false, "score": 0, "creation_date": 1501085796, "post_id": 45332326, "comment_id": 77626635, "body": "Thinking about <b>alignment</b>. ..if it&#39;s greater than 4 bytes <b>then no</b>. But you can force it (in a not portable way). As-is compiler is free to do what&#39;s best (according to its optimization target and architecture restrictions)"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1501085899, "post_id": 45332326, "comment_id": 77626713, "body": "@NathanOliver -- <code>std::complex</code> is part of the standard library, and standard library implementors have to make it work. That can involve non-portable and non-standard techniques that ordinary programmers should not have to deal with."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1501086788, "post_id": 45332326, "comment_id": 77627360, "body": "@PeteBecker Good point."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1501087018, "post_id": 45332326, "comment_id": 77627504, "body": "Here is the case I&#39;m envisioning breaking this (it would probably never happen but AFAIK the standard allows it).  You could have a compiler that decides it wants to make <code>One</code> 16 bytes wide.  To do that it adds 4 bytes of padding between <code>x</code> and <code>y</code> (or <code>y</code> and <code>z</code>) instead of at the end.  This would mean <code>y</code> and <code>z</code> no longer line up with <code>c[1]</code> and <code>c[2]</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1501087644, "post_id": 45332326, "comment_id": 77627867, "body": "@NathanOliver A slightly less unrealistic scenario: the compiler (perhaps based on the presence of an array member) increases one type&#39;s alignment. This pretty much automatically means they must not be layout-compatible: if they were layout-compatible, <code>struct S1 { char c; One d; }</code> and <code>struct S2 { char c; Two d; }</code> would also be layout-compatible, but they wouldn&#39;t be very likely to have <code>d</code> at the same offset."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1501089259, "post_id": 45332326, "comment_id": 77628963, "body": "@hvd: Why? I think most implementations put <code>d</code> at the same offset."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 0, "creation_date": 1501089368, "post_id": 45332326, "comment_id": 77629036, "body": "@geza Implementations tend to put it at an offset equal to the alignment requirement (how else would you ensure it&#39;s properly aligned?), so if that is different for the two structs, so are the offsets."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1501089467, "post_id": 45332326, "comment_id": 77629107, "body": "@hvd: why would alignment be different for the two structs? They both contain 3 floats."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 0, "creation_date": 1501089650, "post_id": 45332326, "comment_id": 77629224, "body": "@geza Please re-read my first comment here then. I posed that as a less unrealistic alternative to NathanOliver&#39;s hypothetical implementation. Less unrealistic is still unrealistic. But it&#39;s less unrealistic because there are real implementations where specific types have a different alignment depending on whether they&#39;re a member of a struct, and it&#39;s just possible on such an implementation that being an indirect member of a struct doesn&#39;t qualify."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1501089981, "post_id": 45332326, "comment_id": 77629422, "body": "@hvd: Sorry, I understand now. What you say is not unrealistic at all. It is quite realistic."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1546217745, "post_id": 45332326, "comment_id": 94802785, "body": "<i>To do that it adds 4 bytes of padding between x and y (or y and z) instead of at the end.</i> if different <i>c++</i> compilers will be use different layout for standard-layout structs, will be impossible use such structs in binary communications between different modules and os. huge count of os api use pointers to standard-layout structs(and unions). this can work only if our compiler use the same layout for struct (used in api call) that os compiler use. i absolute sure that answer to question is wrong - these 2 structs layout-compatible. and <code>sizeof(One)==sizeof(Two)</code>."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1546217749, "post_id": 45332326, "comment_id": 94802787, "body": "if this does not formally follow from the documentation, then the question is about the quality of the documentation. why not. and the question can (and should be expanded). if <code>T</code> standard-layout struct or fundamental type (like <code>int</code>) - are <code>T</code> and <code>struct T2 { T t; }</code> layout-compatible ? <code>struct T3 : T {}</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1501088432, "post_id": 45332881, "comment_id": 77628408, "body": "But the new wording use the word &quot;entity&quot;, not member. I can correlate &quot;entities&quot; here. x is c[0], y is c[1], z is c[2]. Am I on a wrong track?"}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1501089118, "post_id": 45332881, "comment_id": 77628869, "body": "I could treat <code>c[0]</code> as a value entity. Why did they use the word entity here? They could have used member, but for some reason, they choose entity. I&#39;m not saying that you&#39;re wrong, it is just not convincing enough. Maybe the text can be made more precise."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1501089750, "post_id": 45332881, "comment_id": 77629284, "body": "@geza No, you couldn&#39;t. <code>c[0]</code> isn&#39;t a value. The word &quot;entity&quot; is necessary to include both members and bitfields."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1501090236, "post_id": 45332881, "comment_id": 77629592, "body": "Thank you, I understand now."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 12, "last_activity_date": 1501088180, "last_edit_date": 1501088180, "creation_date": 1501087280, "answer_id": 45332881, "question_id": 45332326, "link": "https://stackoverflow.com/questions/45332326/are-structs-of-variables-of-the-same-type-layout-compatible-with-a-struct-contai/45332881#45332881", "title": "Are structs of variables of the same type layout compatible with a struct containing an array of that type?", "body": "<p>Well, no:</p>\n\n<blockquote>\n  <p>[...] if they have the same number of non-static data members [...]</p>\n</blockquote>\n\n<p><code>One</code> has three members: <code>x</code>, <code>y</code>, and <code>z</code>. <code>Two</code> has one member: <code>c</code>. They don't have the same number of non-static data members, therefore they aren't layout compatible. </p>\n\n<hr />\n\n<p>The new wording is different but you end up at the same place. <a href=\"http://eel.is/c++draft/basic.types#11.sentence-1\" rel=\"noreferrer\">[basic.types]</a> defines layout-compatible as:</p>\n\n<blockquote>\n  <p>Two types cv1 T1 and cv2 T2 are layout-compatible types if T1 and T2 are the same type, layout-compatible enumerations, or layout-compatible standard-layout class types.</p>\n</blockquote>\n\n<p><a href=\"http://eel.is/c++draft/class.mem#22.sentence-1\" rel=\"noreferrer\">[class.mem]</a>  defines layout-compatible classes are:</p>\n\n<blockquote>\n  <p>Two standard-layout struct types are layout-compatible classes if their common initial sequence comprises all members and bit-fields of both classes ([basic.types]).</p>\n</blockquote>\n\n<p>Where the common initial sequence is:</p>\n\n<blockquote>\n  <p>The common initial sequence of two standard-layout struct types is the longest sequence of non-static data members and bit-fields in declaration order, starting with the first such entity in each of the structs, such that corresponding entities have layout-compatible types and either neither entity is a bit-field or both are bit-fields with the same width.</p>\n</blockquote>\n\n<p>Here, the first member of <code>One</code> (<code>float x</code>) is not layout-compatible with the first member of <code>Two</code> (<code>float c[3]</code>), so the common initial sequence is empty. </p>\n"}, {"comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1546092560, "post_id": 45333171, "comment_id": 94778008, "body": "<a href=\"http://eel.is/c++draft/class.prop#6\" rel=\"nofollow noreferrer\"><i>Standard-layout classes are useful for communicating with code written in other programming languages.</i></a> if assume that different <i>c++</i> compilers can use different layout for Standard-layout (<code>struct One</code>) structs - will be impossible any binary communication between modules compiled with this 2 different compiler. impossible use function like <code>void fn(One*)</code> implemented in module compiled with one compiler and called from another - if they will be use different binary layout of <i>One</i>"}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 3, "last_activity_date": 1501088260, "creation_date": 1501088260, "answer_id": 45333171, "question_id": 45332326, "link": "https://stackoverflow.com/questions/45332326/are-structs-of-variables-of-the-same-type-layout-compatible-with-a-struct-contai/45333171#45333171", "title": "Are structs of variables of the same type layout compatible with a struct containing an array of that type?", "body": "<p>The compiler is allowed to add padding between members in a <code>class</code> or <code>struct</code>.  </p>\n\n<p>Array elements are in contiguous locations.</p>\n\n<p>They <em>may</em> not be layout compatible depending on how the compiler organizes the members in the <code>struct</code>.</p>\n"}], "owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 524, "favorite_count": 2, "accepted_answer_id": 45332881, "answer_count": 2, "score": 21, "last_activity_date": 1501088897, "creation_date": 1501085542, "last_edit_date": 1501088897, "question_id": 45332326, "link": "https://stackoverflow.com/questions/45332326/are-structs-of-variables-of-the-same-type-layout-compatible-with-a-struct-contai", "title": "Are structs of variables of the same type layout compatible with a struct containing an array of that type?", "body": "<p>Are these 2 structs layout-compatible?</p>\n\n<pre><code>struct One {\n    float x, y, z;\n};\n\nstruct Two {\n    float c[3];\n};\n</code></pre>\n\n<p>Both contains 3 floats, so in a way, this description can be considered true (from N3797):</p>\n\n<blockquote>\n  <p>16 Two standard-layout struct (Clause 9) types are layout-compatible\n  if they have the same number of non-static data members and\n  corresponding non-static data members (in declaration order) have\n  layout-compatible types (3.9).</p>\n</blockquote>\n\n<p>N4659 has a different text:</p>\n\n<blockquote>\n  <p>The common initial sequence of two standard-layout struct (Clause 12)\n  types is the longest sequence of non-static data members and bit-\ufb01elds\n  in declaration order, starting with the \ufb01rst such entity in each of\n  the structs, such that corresponding entities have layout-compatible\n  types and either neither entity is a bit-\ufb01eld or both are bit-\ufb01elds\n  with the same width.</p>\n  \n  <p>Two standard-layout struct (Clause 12) types are layout-compatible\n  classes if their common initial sequence comprises all members and\n  bit-\ufb01elds of both classes (6.9).</p>\n</blockquote>\n\n<p>If the answer is <em>no</em>, they are not layout-compatible, then: was it the intention of the committee? Maybe they do want <code>One</code> and <code>Two</code> to be layout-compatible (maybe a committee member reads this, and can clarify).</p>\n\n<hr>\n\n<p>Bonus question: is it guaranteed, that <code>sizeof(One)==sizeof(Two)</code>?</p>\n"}, {"tags": ["c++", "c++11", "vector"], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1501085785, "creation_date": 1501085785, "answer_id": 45332422, "question_id": 45332266, "link": "https://stackoverflow.com/questions/45332266/assigning-multi-dimensional-vectors-with-different-types/45332422#45332422", "title": "Assigning multi-dimensional vectors with different types", "body": "<blockquote>\n  <p>Is there a better way, or an accepted idiom, to do this?</p>\n</blockquote>\n\n<p>There is no getting away from assigning one element of the array at a time. The best you can do is create a function to help with it.</p>\n\n<p>For example, you could use:</p>\n\n<pre><code>template &lt;typename T1, typename T2&gt;\nvoid vector_copy(std::vector&lt;std::vector&lt;T1&gt;&gt;&amp; dest,\n                 std::vector&lt;std::vector&lt;T2&gt;&gt; const&amp; src)\n{\n   // Add the code to do the copy\n}\n</code></pre>\n\n<p>and then, use</p>\n\n<pre><code>vector_copy(d, i);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": true, "score": 1, "last_activity_date": 1501089147, "creation_date": 1501089147, "answer_id": 45333435, "question_id": 45332266, "link": "https://stackoverflow.com/questions/45332266/assigning-multi-dimensional-vectors-with-different-types/45333435#45333435", "title": "Assigning multi-dimensional vectors with different types", "body": "<p>It seems to me that your solution for the 2D vector is a good one.\nThe problem arises when you have to copy a N-dimension vectors of vectors of vectors...</p>\n\n<p>Suppose you want a function <code>copy_multi_vec()</code> that works in a case as follows</p>\n\n<pre><code>   std::vector&lt;std::vector&lt;std::vector&lt;double&gt;&gt;&gt; vvvd\n    { { {1.0, 2.0, 3.0}, { 4.0,  5.0,  6.0} },\n      { {7.0, 8.0, 9.0}, {10.0, 11.0, 12.0} } };\n\n   std::vector&lt;std::vector&lt;std::vector&lt;int&gt;&gt;&gt; vvvi;\n\n   copy_multi_vec(vvvi, vvvd);\n</code></pre>\n\n<p>In this case you can use partial template specialization in an helper class; by example</p>\n\n<pre><code>template &lt;typename T1, typename T2&gt;\nstruct cmvH\n { static void func (T1 &amp; v1, T2 const &amp; v2) { v1 = v2; } };\n\ntemplate &lt;typename T1, typename T2&gt;\nstruct cmvH&lt;std::vector&lt;T1&gt;, std::vector&lt;T2&gt;&gt;\n {\n   static void func (std::vector&lt;T1&gt; &amp; v1, std::vector&lt;T2&gt; const &amp; v2)\n    {\n      v1.resize( v2.size() );\n\n      std::size_t i { 0U };\n\n      for ( auto const &amp; e2 : v2 )\n         cmvH&lt;T1, T2&gt;::func(v1[i++], e2);\n    }\n };\n\ntemplate &lt;typename T1, typename T2&gt;\nvoid copy_multi_vec (T1 &amp; v1, T2 const &amp; v2)\n { cmvH&lt;T1, T2&gt;::func(v1, v2); }\n</code></pre>\n\n<p>or, if you want use the <code>assign()</code> method for the last level, you can define the helper struct as follows</p>\n\n<pre><code>template &lt;typename, typename&gt;\nstruct cmvH;\n\ntemplate &lt;typename T1, typename T2&gt;\nstruct cmvH&lt;std::vector&lt;T1&gt;, std::vector&lt;T2&gt;&gt;\n {\n   static void func (std::vector&lt;T1&gt; &amp; v1, std::vector&lt;T2&gt; const &amp; v2)\n    {\n      v1.resize( v2.size() );\n      v1.assign( v2.cbegin(), v2.cend() );\n    }\n };\n\ntemplate &lt;typename T1, typename T2&gt;\nstruct cmvH&lt;std::vector&lt;std::vector&lt;T1&gt;&gt;, std::vector&lt;std::vector&lt;T2&gt;&gt;&gt;\n {\n   static void func (std::vector&lt;std::vector&lt;T1&gt;&gt;       &amp; v1,\n                     std::vector&lt;std::vector&lt;T2&gt;&gt; const &amp; v2)\n    {\n      v1.resize( v2.size() );\n\n      std::size_t i { 0U };\n\n      for ( auto const &amp; e2 : v2 )\n         cmvH0&lt;std::vector&lt;T1&gt;, std::vector&lt;T2&gt;&gt;::func(v1[i++], e2);\n    }\n };\n</code></pre>\n"}], "owner": {"reputation": 5551, "user_id": 1683161, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d54009af893277619337f3bfc8a589cf?s=128&d=identicon&r=PG", "display_name": "rainer", "link": "https://stackoverflow.com/users/1683161/rainer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 45333435, "answer_count": 2, "score": 0, "last_activity_date": 1501095710, "creation_date": 1501085390, "last_edit_date": 1501095710, "question_id": 45332266, "link": "https://stackoverflow.com/questions/45332266/assigning-multi-dimensional-vectors-with-different-types", "title": "Assigning multi-dimensional vectors with different types", "body": "<p>Suppose I have a <code>std::vector&lt;std::vector&lt;double&gt;&gt; d</code> and want to assign it to a <code>std::vector&lt;std::vector&lt;int&gt;&gt; i</code>; the best I could come up with was:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n\nusing namespace std;\n\nint main() {\n    vector&lt;vector&lt;double&gt;&gt; d = { {1.0, 2.0}, {3.0, 4.0} };\n    vector&lt;vector&lt;int&gt;&gt;    i;\n\n    for_each(begin(d), end(d), [&amp;i](vector&lt;double&gt; &amp;x) {\n            i.emplace_back(begin(x), end(x));\n        }\n    );\n\n    return 0;\n}\n</code></pre>\n\n<p>If both vectors were using the same type internally, I could just use the assignment operator (see <a href=\"https://stackoverflow.com/questions/13571565/c-copying-multidimensional-vector\">C++ copying multidimensional vector</a>):</p>\n\n<pre><code>i = d;\n</code></pre>\n\n<p>If the vectors were storing different types internally, but one-dimensional, I could do:</p>\n\n<pre><code>i.assign(begin(d), end(d));\n</code></pre>\n\n<p>Both of those are really obvious in their intention, which I don't feel is the case with my solution for the multi-dimensional approach. Is there a better way, or an accepted idiom, to do this?</p>\n"}, {"tags": ["c++", "string", "split"], "comments": [{"owner": {"reputation": 952, "user_id": 5449818, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eYyPG.jpg?s=128&g=1", "display_name": "ikleschenkov", "link": "https://stackoverflow.com/users/5449818/ikleschenkov"}, "edited": false, "score": 2, "creation_date": 1501085203, "post_id": 45332156, "comment_id": 77626213, "body": "Split string using first delimiter, then split result using second delimiter."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1501085305, "post_id": 45332156, "comment_id": 77626296, "body": "Do a find and replace of all the other delimiters into the first one and the split using the first delimiter?"}, {"owner": {"reputation": 9286, "user_id": 70365, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/6781116bac7523060a15a8f51aae7855?s=128&d=identicon&r=PG", "display_name": "CiscoIPPhone", "link": "https://stackoverflow.com/users/70365/ciscoipphone"}, "edited": false, "score": 0, "creation_date": 1501085899, "post_id": 45332156, "comment_id": 77626716, "body": "That would work, but it could fail if the first delimiter was not a single character - because as the words are replaced it could inadvertently create another delimiter in the string."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1501086192, "post_id": 45332156, "comment_id": 77626949, "body": "The more I think about the more I think  ikleschenkov is correct.  Split the string using the first delimiter, then split each sub string by the next one and repeat that for each next one."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1501086960, "post_id": 45332156, "comment_id": 77627460, "body": "What to do if a delimiter contains other delimiters? largest wins?"}], "answers": [{"tags": [], "owner": {"reputation": 607, "user_id": 6784509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UjPEk.jpg?s=128&g=1", "display_name": "HatsuPointerKun", "link": "https://stackoverflow.com/users/6784509/hatsupointerkun"}, "is_accepted": false, "score": 0, "last_activity_date": 1501090142, "last_edit_date": 1501090142, "creation_date": 1501087367, "answer_id": 45332907, "question_id": 45332156, "link": "https://stackoverflow.com/questions/45332156/split-a-string-into-a-vectorstring-by-multiple-string-delimiters/45332907#45332907", "title": "Split a string into a vector&lt;string&gt; by multiple string delimiters", "body": "<p>This function do what you want to do. It basically iterate on the vector of delimiters, applying your function for each one :</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>vector&lt;string&gt; SplitStringMultipleStrParameters(string s,const vector&lt;string&gt;&amp; separators) {\n\n    //The result to be returned\n    vector&lt;string&gt; result = { s };\n\n    //Iterate on the list of separators, so for each separators\n    for (const auto&amp; sep : separators) {\n        //toReplaceBy will be the next vector of strings where it will iterate\n        vector&lt;string&gt; toReplaceBy, tempRes;\n\n        //For each strings, we will split on \"sep\", the separator\n        for (auto&amp;a : result) {\n            //Because of the result vector being cleared every time your function get called\n            //It get in a temp vector that we will concatenate after\n            ParseStringByStringSeparator(a, sep, tempRes);\n            //Concatenation of theses vectors\n            toReplaceBy.insert(toReplaceBy.end(), tempRes.begin(), tempRes.end());\n        }\n\n        //Erasing all strings that are empty. C++11 code here required because of the lambda\n        toReplaceBy.erase(std::remove_if(toReplaceBy.begin(), toReplaceBy.end(),\n            [](const std::string&amp; i) {\n            return i == \"\";\n        }), toReplaceBy.end());\n\n        //The vector containing strings to be splited is replaced by the split result on this iteration\n        result = toReplaceBy;\n        //And we will split those results using the next separator, if there's more separator to iterate on\n    }\n    return result;\n}\n</code></pre>\n\n<p>Code to test :</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>string test = \"Hello I am a string\";\n\nauto r = SplitStringMultipleStrParameters(test, { \" \", \"am\" });\n\nfor (auto&amp; a : r) {\n    std::cout &lt;&lt; a &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>It needs to be compiled with a C++11 compiler, and need to include the <code>&lt;algorithm&gt;</code> header.</p>\n\n<p>If your compiler does not compile C++11 code, here is the function :</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>vector&lt;string&gt; SplitStringMultipleStrParameters(string s,const vector&lt;string&gt;&amp; separators) {\n    vector&lt;string&gt; result = { s };\n    for (const auto&amp; sep : separators) {\n        vector&lt;string&gt; toReplaceBy, tempRes;\n        for (auto&amp;a : result) {\n            ParseStringByStringSeparator(a, sep, tempRes);\n            toReplaceBy.insert(toReplaceBy.end(), tempRes.begin(), tempRes.end());\n        }\n        auto it = toReplaceBy.begin();\n        while (it != toReplaceBy.end()) {\n            if ((*it) == \"\")\n                it = toReplaceBy.erase(it);\n            else\n                ++it;\n        }\n        result = toReplaceBy;\n    }\n    return result;\n}\n</code></pre>\n"}], "owner": {"reputation": 283, "user_id": 4252023, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4sCv3.png?s=128&g=1", "display_name": "baru", "link": "https://stackoverflow.com/users/4252023/baru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 243, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1501090142, "creation_date": 1501085068, "last_edit_date": 1501087534, "question_id": 45332156, "link": "https://stackoverflow.com/questions/45332156/split-a-string-into-a-vectorstring-by-multiple-string-delimiters", "title": "Split a string into a vector&lt;string&gt; by multiple string delimiters", "body": "<p>In C++, without using any <code>boost</code> routines, we know how to:</p>\n\n<ul>\n<li><p><a href=\"https://stackoverflow.com/questions/7621727/split-a-string-into-words-by-multiple-delimiters\">split a string by a single char value or multiple char values</a></p></li>\n<li><p>split a string by a single string value:</p>\n\n<pre><code>void ParseStringByStringSeparator(string s, const string separator, vector&lt;string&gt;&amp; result)\n{\n    result.clear();\n    size_t pos = 0;\n    string token;\n\n    while ((pos = s.find(separator)) != string::npos) {\n        token = s.substr(0, pos);\n        result.push_back(token);\n        s.erase(0, pos + separator.length());\n    }\n    result.push_back(s);\n}\n</code></pre></li>\n</ul>\n\n<p>But how to split a string by multiple string values?</p>\n\n<p>For example, If I have the following string value <code>\"Hello I am a String\"</code> and my separators are <code>\" \"</code> and <code>\"am\"</code> then I would like to obtain the following <code>vector&lt;string&gt;</code> value:</p>\n\n<pre><code>{\"Hello\",\"I\",\"a\",\"String\"}\n</code></pre>\n\n<p>Any hint?</p>\n"}, {"tags": ["c++", "opencv", "crop", "opencv3.0", "roi"], "comments": [{"owner": {"reputation": 2028, "user_id": 3636909, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/da875264051dc76606a99aff3b8448a8?s=128&d=identicon&r=PG&f=1", "display_name": "Ja_cpp", "link": "https://stackoverflow.com/users/3636909/ja-cpp"}, "edited": false, "score": 0, "creation_date": 1501141052, "post_id": 45332153, "comment_id": 77649810, "body": "Are you sure your mask has the same size as your input image (src)?"}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 8371119, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/qTXk4.jpg?s=128&g=1", "display_name": "Unnamed", "link": "https://stackoverflow.com/users/8371119/unnamed"}, "edited": false, "score": 0, "creation_date": 1501166871, "post_id": 45332737, "comment_id": 77669710, "body": "Still get an exception, because I want the cropped image to be in the size of <code>contourRegion</code>."}, {"owner": {"reputation": 1640, "user_id": 3871961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15d1352dc24db7622120ce9b523a2b96?s=128&d=identicon&r=PG&f=1", "display_name": "xiawi", "link": "https://stackoverflow.com/users/3871961/xiawi"}, "reply_to_user": {"reputation": 93, "user_id": 8371119, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/qTXk4.jpg?s=128&g=1", "display_name": "Unnamed", "link": "https://stackoverflow.com/users/8371119/unnamed"}, "edited": false, "score": 0, "creation_date": 1501222447, "post_id": 45332737, "comment_id": 77692853, "body": "I&#39;ve edited the post to do so: let use <code>result(roi)</code> instead of <code>result</code>"}, {"owner": {"reputation": 93, "user_id": 8371119, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/qTXk4.jpg?s=128&g=1", "display_name": "Unnamed", "link": "https://stackoverflow.com/users/8371119/unnamed"}, "edited": false, "score": 0, "creation_date": 1501587922, "post_id": 45332737, "comment_id": 77834560, "body": "unfortunally, no. I just get a black image."}, {"owner": {"reputation": 1640, "user_id": 3871961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15d1352dc24db7622120ce9b523a2b96?s=128&d=identicon&r=PG&f=1", "display_name": "xiawi", "link": "https://stackoverflow.com/users/3871961/xiawi"}, "reply_to_user": {"reputation": 93, "user_id": 8371119, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/qTXk4.jpg?s=128&g=1", "display_name": "Unnamed", "link": "https://stackoverflow.com/users/8371119/unnamed"}, "edited": false, "score": 0, "creation_date": 1501590279, "post_id": 45332737, "comment_id": 77836263, "body": "Can you at least reproduce my example with the <code>lena.png</code> image ? Else, add a link to one of your images and the exact points you want and I&#39;ll try on my side."}, {"owner": {"reputation": 93, "user_id": 8371119, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/qTXk4.jpg?s=128&g=1", "display_name": "Unnamed", "link": "https://stackoverflow.com/users/8371119/unnamed"}, "edited": false, "score": 0, "creation_date": 1501590820, "post_id": 45332737, "comment_id": 77836672, "body": "I already tried with your example, but it also doesn&#39;t work.. :(  Okay, I edited my question with all needed information for you. Thank you for your effort!"}], "tags": [], "owner": {"reputation": 1640, "user_id": 3871961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15d1352dc24db7622120ce9b523a2b96?s=128&d=identicon&r=PG&f=1", "display_name": "xiawi", "link": "https://stackoverflow.com/users/3871961/xiawi"}, "is_accepted": false, "score": -1, "last_activity_date": 1501222393, "last_edit_date": 1501222393, "creation_date": 1501086769, "answer_id": 45332737, "question_id": 45332153, "link": "https://stackoverflow.com/questions/45332153/why-are-the-sizes-of-the-mats-different/45332737#45332737", "title": "Why are the sizes of the Mat&#39;s different?", "body": "<p><strong>Initial answer was wrong. Here is the fix</strong></p>\n\n<p>In <code>copyTo</code> the mask is a convenience to indicate which matrix elements need to be copied, thus is has to have the same size as source <code>src</code>. See the documentation <a href=\"http://docs.opencv.org/3.1.0/d3/d63/classcv_1_1Mat.html#a4331fa88593a9a9c14c0998574695ebb\" rel=\"nofollow noreferrer\">here</a>. Moreover your mask has to activate all three channels. Hence, the following code should work:</p>\n\n<pre><code>int main(int argc, char **argv)\n{\nvector&lt;Point&gt; pt;\npt.push_back(cv::Point(10, 10));\npt.push_back(cv::Point(100, 20));\npt.push_back(cv::Point(200, 300));\npt.push_back(cv::Point(10, 120));\ncv::Mat src = cv::imread(argv[1]);\n\nRect roi = boundingRect(pt);\ncv::Mat contourRegion = src(roi);\n\nMat mask = Mat::zeros(contourRegion.size(), CV_8UC3);\nvector&lt;Point&gt; ROI_Poly;\napproxPolyDP(pt, ROI_Poly, 1.0, true);\nfillConvexPoly(mask, &amp;ROI_Poly[0], ROI_Poly.size(), 255, 8, 0);\ncv::Mat f_mask = cv::Mat(src.size(), CV_8UC3);\nf_mask.setTo(0);\n\n// duplicate the mask on three channels\ncv::Mat bgr_mask[3];\nsplit(mask,bgr_mask);\ncv::Mat in[] = {bgr_mask[0],bgr_mask[0],bgr_mask[0]};\ncv::merge(in, 3, mask);\n\n// copy the mask to a \"full mask\" of the same size as the image\nmask.copyTo(f_mask(roi));\n\nMat result = Mat(src.size(), CV_8UC3);\ntry {\n    src.copyTo(result, f_mask);\n    imshow(\"result\", result);\n    imshow(\"src\", src);\n    cv::imshow(\"contReg\", contourRegion);\n    cv::waitKey(0);\n\n} catch (Exception e) {}\n\nreturn 0;\n}\n</code></pre>\n\n<p>On the well known <a href=\"https://upload.wikimedia.org/wikipedia/en/2/24/Lenna.png\" rel=\"nofollow noreferrer\">lena picture</a>, it gives:\n<a href=\"https://i.stack.imgur.com/bvFF3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bvFF3.png\" alt=\"enter image description here\"></a></p>\n\n<p>To get a result with the same size as <code>contourRegion</code>, let use:</p>\n\n<pre><code>imshow(\"result\", result(roi));\n</code></pre>\n\n<p>You have:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ea187.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ea187.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 93, "user_id": 8371119, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/qTXk4.jpg?s=128&g=1", "display_name": "Unnamed", "link": "https://stackoverflow.com/users/8371119/unnamed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 384, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1501590746, "creation_date": 1501085067, "last_edit_date": 1501590746, "question_id": 45332153, "link": "https://stackoverflow.com/questions/45332153/why-are-the-sizes-of-the-mats-different", "title": "Why are the sizes of the Mat&#39;s different?", "body": "<p>I try to crop out a non-rectangular Mat from an image. Followed a lot of tutorials and now I implement this method for my purpose: </p>\n\n<pre><code>void crop(Mat src) {\nScalar mu, sigma;\nmeanStdDev(src, mu, sigma);\n\nCanny(src, dst, mu.val[0] - sigma.val[0], mu.val[0] + sigma.val[0], 3, false);\ncvtColor(dst, cdst, CV_GRAY2BGR);\n\nHoughLinesP(dst, lines, 1, CV_PI / 2, 100, 50, 100);\n\nVec4i current, previous;\nPoint pt1, pt2, ppt1, ppt2;\n\nfor (size_t i = 1; i &lt; lines.size(); i++) {\n    current = lines[i];\n    pt1 = Point(current[0], current[1]);\n    pt2 = Point(current[2], current[3]);\n\n    previous = lines[i - 1];\n    ppt1 = Point(previous[0], previous[1]);\n    ppt2 = Point(previous[2], previous[3]);\n\n    vector&lt;Point&gt; pt;\n    pt.push_back(Point(previous[2], previous[3]));                              \n    pt.push_back(Point(previous[0], previous[1]));\n    pt.push_back(Point(current[0], current[1]));\n    pt.push_back(Point(current[2], current[3]));\n\n    Rect roi = boundingRect(pt);    \n    contourRegion = src(roi);\n\n    Mat mask = Mat::zeros(contourRegion.size(), CV_8UC3);\n    vector&lt;Point&gt; ROI_Poly;\n    approxPolyDP(pt, ROI_Poly, 1.0, true);\n    fillConvexPoly(mask, &amp;ROI_Poly[0], ROI_Poly.size(), 255, 8, 0);\n\n    Mat result = Mat(contourRegion.size(), CV_8UC3);\n    try {\n        src.copyTo(result, mask);\n        imshow(\"result\", result);\n        imshow(\"contReg\", contourRegion);\n    } catch (Exception e) {}\n}\n</code></pre>\n\n<p>After compiling I get the exception: <code>OpenCV Error: Assertion failed (size() == mask.size()) in cv::Mat::copyTo</code> But why? Actually I set both <code>Mat</code>'s to <code>contourRegion.size</code> so it should be the same one? </p>\n\n<p>As a reference, here's the original image: <a href=\"https://i.stack.imgur.com/JYiUk.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JYiUk.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "linux", "qt", "qprocess"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1501085412, "post_id": 45332123, "comment_id": 77626375, "body": "<i>&quot;Any ideas what could happend?&quot;</i> - Based on your description it sounds like your kajigger is out of alignment."}, {"owner": {"reputation": 3760, "user_id": 6594576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448660dad9fcb2bf8b5f7a3ab8813037?s=128&d=identicon&r=PG", "display_name": "Paul Floyd", "link": "https://stackoverflow.com/users/6594576/paul-floyd"}, "edited": false, "score": 0, "creation_date": 1501085734, "post_id": 45332123, "comment_id": 77626588, "body": "Do you see any error messages? Can you check the status of process? [see the error enum <a href=\"http://doc.qt.io/qt-5/qprocess.html]\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qprocess.html]</a>"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1501089347, "post_id": 45332123, "comment_id": 77629016, "body": "Do you have permission to execute some file in the <code>&#47;home</code> folder ?, usually with the default user you can only access <code>&#47;home&#47;$USER</code>"}, {"owner": {"reputation": 8313, "user_id": 7621674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/323bed98b2e655d5fa9ac6d23a72b995?s=128&d=identicon&r=PG", "display_name": "m7913d", "link": "https://stackoverflow.com/users/7621674/m7913d"}, "edited": false, "score": 0, "creation_date": 1501096903, "post_id": 45332123, "comment_id": 77633343, "body": "Please try to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Is it a problem related to a bad signal/slot connection, i.e. <code>on_pushButton_clicked</code> or a <code>QProcess</code> problem?"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1501136337, "post_id": 45332123, "comment_id": 77646836, "body": "I posted an <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a> for <code>QProcess</code> some days ago: <a href=\"https://stackoverflow.com/a/45209503/7478597\">SO: Creating QT Application as GUI for existing console-based application on windows</a>"}], "answers": [{"tags": [], "owner": {"reputation": 55, "user_id": 2187441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bc09791cbf96dca8dd7c8d82de8384f?s=128&d=identicon&r=PG", "display_name": "konakid", "link": "https://stackoverflow.com/users/2187441/konakid"}, "is_accepted": false, "score": 0, "last_activity_date": 1501819797, "creation_date": 1501819797, "answer_id": 45498141, "question_id": 45332123, "link": "https://stackoverflow.com/questions/45332123/run-an-external-program-from-a-qt-pushbutton/45498141#45498141", "title": "Run an external program from a QT Pushbutton", "body": "<p>You are starting your process and then promptly returning. If you are not planning on connecting any signals from the <code>QProcess</code> you could just statically allocate it to save yourself from using <code>deleteLater</code>.</p>\n\n<p>Try something like this.</p>\n\n<pre><code>void MainWindow::on_pushButton_clicked()\n{\n    QProcess process;;\n\n    process.start(\"~/helloworld.out\");\n    process.waitForStarted();\n    process.waitForFinished();\n    process.close();\n}\n</code></pre>\n\n<p>I'll step out on a limb and suggest maybe you did not mean  <code>/home/helloworld.out</code> but <code>~/helloworld.out</code>. In any case check the path exists as well.</p>\n"}], "owner": {"reputation": 1, "user_id": 8371199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfc5bfbb58bd1a0033babb0698f3d40f?s=128&d=identicon&r=PG&f=1", "display_name": "J.Blanco", "link": "https://stackoverflow.com/users/8371199/j-blanco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1152, "favorite_count": 1, "answer_count": 1, "score": -4, "last_activity_date": 1501819797, "creation_date": 1501084997, "last_edit_date": 1501096785, "question_id": 45332123, "link": "https://stackoverflow.com/questions/45332123/run-an-external-program-from-a-qt-pushbutton", "title": "Run an external program from a QT Pushbutton", "body": "<p>I have created a main Window with one Pushbutton in QT and when I try to run an additional small program when the Pushbutton is clicked, it doesn't work. I have the following code: </p>\n\n<pre><code>void MainWindow::on_pushButton_clicked()\n{\n    QProcess *process = new QProcess(this);\n    process-&gt;start(\"/home/helloworld.out\");\n}\n</code></pre>\n\n<p>I am working with Linux. Any ideas what could happend? Thank you in advance. </p>\n"}, {"tags": ["c++", "entity", "game-engine"], "answers": [{"tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": true, "score": 2, "last_activity_date": 1501089975, "last_edit_date": 1501089975, "creation_date": 1501088964, "answer_id": 45333378, "question_id": 45332006, "link": "https://stackoverflow.com/questions/45332006/game-engine-design-issue/45333378#45333378", "title": "Game engine design issue", "body": "<p>As long as players' scripts are copy constructible and you can clone them by means of the copy constructor, you can use CRTP and an intermediate class like this (minimal, working example):</p>\n\n<pre><code>struct BaseScriptable {\n    virtual ~BaseScriptable() = default;\n    virtual BaseScriptable * clone() = 0;\n    virtual void update() = 0;\n};\n\ntemplate&lt;typename D&gt;\nstruct Scriptable: BaseScriptable {\n    BaseScriptable * clone() override final {\n        return new D{*static_cast&lt;D *&gt;(this)};\n    }\n};\n\nstruct PlayerScript: Scriptable&lt;PlayerScript&gt; {\n    void update() override {}\n};\n\nint main() {\n    BaseScriptable *script = new  PlayerScript;\n    BaseScriptable *clone = script-&gt;clone();\n}\n</code></pre>\n\n<p>If the copy constructor isn't enough to clone a player script, well, that means that you don't have enough information to clone it actually. Because of that it's mandatory that the developer that defines the script also defines a clone routine to give you a proper copy.</p>\n"}], "owner": {"reputation": 79, "user_id": 8078451, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/12a7dcb0bab52f56b798a351c8817ab0?s=128&d=identicon&r=PG&f=1", "display_name": "ojoj kolol", "link": "https://stackoverflow.com/users/8078451/ojoj-kolol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 45333378, "answer_count": 1, "score": 2, "last_activity_date": 1501089975, "creation_date": 1501084691, "question_id": 45332006, "link": "https://stackoverflow.com/questions/45332006/game-engine-design-issue", "title": "Game engine design issue", "body": "<p>I am working on a game engine using ECS. My issue is how i spawn an entity. My idea is that i have a method that takes in an entity as an argument, creates a clone of this entity, retrives all the pointer components from the clone and put them in their respective systems for updating:</p>\n\n<pre><code>Entity &amp; Scene::spawnEntity(Entity entity) {\n\n    Entity clone = Entity(entity);\n\n    Transform* transform = clone.getComponent&lt;Transform&gt;();\n    Drawable* drawable = clone.getComponent&lt;Drawable&gt;();\n    Collidable* collidable = clone.getComponent&lt;Collidable&gt;();\n    Scriptable* scriptable = clone.getComponent&lt;Scriptable&gt;();\n\n    if (transform != nullptr) {\n        _transformSystem.add(*transform, _currentId);\n    }\n    if (drawable != nullptr) {\n        _drawableSystem.add(*drawable, _currentId);\n    }\n    if (collidable != nullptr) {\n        _collidableSystem.add(*collidable, _currentId);\n    }\n    if (scriptable != nullptr) {\n        scriptable-&gt;assignCallbacks([&amp;](Entity entity)                              -&gt; Entity&amp;              { spawnEntity(entity); },\n                                    [&amp;](Entity entity)                                                      { destroyEntity(entity); },\n                                    [&amp;](std::vector&lt;std::string&gt; tags)              -&gt; Entity&amp;              { findEntity(tags); },\n                                    [&amp;](std::vector&lt;std::vector&lt;std::string&gt;&gt; tags) -&gt; std::vector&lt;Entity&gt;&amp; { findEntities(tags); });\n        _scriptableSystem.add(scriptable, _currentId);\n    }\n\n    _entities.push_back(clone);\n\n    _currentId++;\n}\n</code></pre>\n\n<p>The issue here is that one of the components, namely a scriptable is a pure abstract class (it has an initiate method and update method that the developer uses to create behaviour in derived classes). This makes it so that the engine cant automatically clone the scriptable class, the cloning has to be done in the derived class, for example like this:</p>\n\n<pre><code>class PlayerScript : public Scriptable\n{\npublic:\n    void init() override;\n    void update() override;\n    PlayerScript* clone() override;\n};\n\n\nPlayerScript * PlayerScript::clone()\n{\n    return new PlayerScript(*this);\n}\n</code></pre>\n\n<p>I dont want the user to have to create a clone method for each script he or she creates, i think it should be handled by the engine automatically. But i cant figure out how to do it differently. </p>\n"}, {"tags": ["c++", "function-pointers", "non-static"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1501084780, "post_id": 45331989, "comment_id": 77625909, "body": "So what exactly can you change?  Something is going to have to as a member function is not the same as a regular function."}, {"owner": {"reputation": 133, "user_id": 8371092, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/40d61d323c5020efeb54c72e383df433?s=128&d=identicon&r=PG&f=1", "display_name": "Mattia", "link": "https://stackoverflow.com/users/8371092/mattia"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1501085023, "post_id": 45331989, "comment_id": 77626091, "body": "@NathanOliver , for what I have seen in other posts, i should change how I pass the first parameter to the function &quot;aaa(Fun1, X0);&quot;, that is the same the compilator ask, but everything I have tried does not work..."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1501085137, "post_id": 45331989, "comment_id": 77626164, "body": "You can&#39;t convert a member function pointer into a regular function pointer.  You either have to change what <code>aaa</code> accepts or make <code>Fun1</code> static to use <code>aaa</code> as is."}], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 8371092, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/40d61d323c5020efeb54c72e383df433?s=128&d=identicon&r=PG&f=1", "display_name": "Mattia", "link": "https://stackoverflow.com/users/8371092/mattia"}, "edited": false, "score": 0, "creation_date": 1501101035, "post_id": 45332310, "comment_id": 77635681, "body": "Thanks Vasily, your code works well! The only &quot;problem&quot; is that doing like that, I should implement a member function <code>aaa</code> for every class needs  to use it, because that in my final code will be a general mathematic function that can be used for a lot of things. I can do it, but it is a bit a waste of time... Do you have an idea for avoiding this?"}, {"owner": {"reputation": 1604, "user_id": 5722863, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1070999896265014/picture?type=large", "display_name": "Vasiliy Galkin", "link": "https://stackoverflow.com/users/5722863/vasiliy-galkin"}, "reply_to_user": {"reputation": 133, "user_id": 8371092, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/40d61d323c5020efeb54c72e383df433?s=128&d=identicon&r=PG&f=1", "display_name": "Mattia", "link": "https://stackoverflow.com/users/8371092/mattia"}, "edited": false, "score": 0, "creation_date": 1501101772, "post_id": 45332310, "comment_id": 77636095, "body": "I&#39;m not entirely sure I fully understood your requirements. Let me clarify: you need your function <code>aaa</code> to accept the member functions of several classes, e.g. <code>Foo::func1</code>, &#39;Bar::func`. Is it correct understanding?"}, {"owner": {"reputation": 1604, "user_id": 5722863, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1070999896265014/picture?type=large", "display_name": "Vasiliy Galkin", "link": "https://stackoverflow.com/users/5722863/vasiliy-galkin"}, "reply_to_user": {"reputation": 133, "user_id": 8371092, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/40d61d323c5020efeb54c72e383df433?s=128&d=identicon&r=PG&f=1", "display_name": "Mattia", "link": "https://stackoverflow.com/users/8371092/mattia"}, "edited": false, "score": 1, "creation_date": 1501102683, "post_id": 45332310, "comment_id": 77636577, "body": "In case it&#39;s like that, then you have several options, each of them presumes that you move <code>aaa</code> out of your class. 1) You may use <code>std::function</code> as suggested in the answer - see <a href=\"http://coliru.stacked-crooked.com/a/50fe768464a604b0\" rel=\"nofollow noreferrer\">example 1</a>; 2) you may use perfect forwarding - see <a href=\"http://coliru.stacked-crooked.com/a/8c020793517cad43\" rel=\"nofollow noreferrer\">example 2</a>; 3) if you want to limit the argument only by the methods of the classes, you may still use the similar signature as proposed by the answer + template, see <a href=\"http://coliru.stacked-crooked.com/a/347525dc86609e68\" rel=\"nofollow noreferrer\">example 3</a>."}, {"owner": {"reputation": 1604, "user_id": 5722863, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1070999896265014/picture?type=large", "display_name": "Vasiliy Galkin", "link": "https://stackoverflow.com/users/5722863/vasiliy-galkin"}, "reply_to_user": {"reputation": 133, "user_id": 8371092, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/40d61d323c5020efeb54c72e383df433?s=128&d=identicon&r=PG&f=1", "display_name": "Mattia", "link": "https://stackoverflow.com/users/8371092/mattia"}, "edited": false, "score": 0, "creation_date": 1501102724, "post_id": 45332310, "comment_id": 77636607, "body": "Each alternative has its pros and cons, the choice is yours ;)"}, {"owner": {"reputation": 133, "user_id": 8371092, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/40d61d323c5020efeb54c72e383df433?s=128&d=identicon&r=PG&f=1", "display_name": "Mattia", "link": "https://stackoverflow.com/users/8371092/mattia"}, "edited": false, "score": 0, "creation_date": 1501107379, "post_id": 45332310, "comment_id": 77638683, "body": "Thanks, you have completely understood my needs. I would prefer the first option, but just because looks a bit easier. Now I have added a new function &#39;bbb&#39; with a call from the previous &#39;aaa&#39;, but it creates a problem because the argument is again the pointer to the same function, but now it is not passed from the class. Can you have a look at <a href=\"http://coliru.stacked-crooked.com/a/239e991b95a964b7\" rel=\"nofollow noreferrer\">this code</a>?"}], "tags": [], "owner": {"reputation": 1604, "user_id": 5722863, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1070999896265014/picture?type=large", "display_name": "Vasiliy Galkin", "link": "https://stackoverflow.com/users/5722863/vasiliy-galkin"}, "is_accepted": true, "score": 6, "last_activity_date": 1501103712, "last_edit_date": 1501103712, "creation_date": 1501085491, "answer_id": 45332310, "question_id": 45331989, "link": "https://stackoverflow.com/questions/45331989/c-pointer-to-non-static-member-functions/45332310#45332310", "title": "c++ pointer to non-static member functions", "body": "<p>The problem is that you're trying to pass a pointer to a member function while a pointer to either a non-member function or a static member function is expected. And those are different types.</p>\n\n<p>Here \"fun\" is a pointer to function: <code>double(*fun)(double)</code>.</p>\n\n<p>And here it's a pointer to a member function of class Funcs: <code>double(Funcs::*fun)(double)</code></p>\n\n<p>So here's how you can modify your code to make it work.</p>\n\n<pre><code>class Funcs\n{\n  // all the rest is the same\n  double aaa(double(Funcs::*fun)(double), double x0);\n};\n\ndouble Funcs::solver(double X0)\n{\n  // ...\n  result = aaa(&amp;Funcs::Fun1, X0);\n  // ...\n}\n\ndouble Funcs::aaa(double(Funcs::*fun)(double), double x0)\n{\n  return (this-&gt;*fun)(x0);\n}\n</code></pre>\n\n<p>See live example <a href=\"http://coliru.stacked-crooked.com/a/4fb8b487f046ce49\" rel=\"nofollow noreferrer\">at Coliru</a>.</p>\n\n<p>This may be a fine way to go if you want to deliberately limit your method <code>aaa</code> to accept only <code>Funcs</code> member functions as <code>fun</code>. If you'd also like to pass the non-member functions or e.g. lambdas to <code>aaa</code>, consider using <code>std::function</code> instead.</p>\n"}, {"tags": [], "owner": {"reputation": 2602, "user_id": 4341534, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/001c92ef74cb305ff8318eebeaa04ab3?s=128&d=identicon&r=PG&f=1", "display_name": "patatahooligan", "link": "https://stackoverflow.com/users/4341534/patatahooligan"}, "is_accepted": false, "score": 4, "last_activity_date": 1501085500, "creation_date": 1501085500, "answer_id": 45332315, "question_id": 45331989, "link": "https://stackoverflow.com/questions/45331989/c-pointer-to-non-static-member-functions/45332315#45332315", "title": "c++ pointer to non-static member functions", "body": "<p>Your problem is that pointer-to-function is not the same as pointer-to-member-function. Read <a href=\"https://isocpp.org/wiki/faq/pointers-to-members#fnptr-vs-memfnptr-types\" rel=\"nofollow noreferrer\">this</a> for more info and <a href=\"https://isocpp.org/wiki/faq/pointers-to-members#typedef-for-ptr-to-memfn\" rel=\"nofollow noreferrer\">this</a> for clean way to write pointer-to-member-functions. If you need to keep this structure, make aaa a static or non-member function that takes everything it needs as arguments, or change the first argument of aaa to take a <code>double(Funcs::*)(double)</code> rather than a <code>double(*fun)(double)</code>. You can even overload aaa to support both uses.</p>\n"}, {"comments": [{"owner": {"reputation": 653, "user_id": 5280911, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/fef3fba49d237a75e5e36f953bc9ba0c?s=128&d=identicon&r=PG&f=1", "display_name": "user5280911", "link": "https://stackoverflow.com/users/5280911/user5280911"}, "edited": false, "score": 0, "creation_date": 1547928045, "post_id": 45332657, "comment_id": 95364604, "body": "You missed the parentheses around *this.*fun, i.e., (*this.*fun)(x0). I&#39;m curious how u were satisfied with submitting an answer without even testing it in a real compiler."}], "tags": [], "owner": {"reputation": 141, "user_id": 8363624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aebe2e71e511257ea80a7cc2f1f581b3?s=128&d=identicon&r=PG&f=1", "display_name": "Yet Another John Smith", "link": "https://stackoverflow.com/users/8363624/yet-another-john-smith"}, "is_accepted": false, "score": 2, "last_activity_date": 1501086503, "creation_date": 1501086503, "answer_id": 45332657, "question_id": 45331989, "link": "https://stackoverflow.com/questions/45331989/c-pointer-to-non-static-member-functions/45332657#45332657", "title": "c++ pointer to non-static member functions", "body": "<p>Actually <code>Funcs::Fun1</code> is not <code>double(*)(double)</code>.</p>\n\n<p>Any non-static method has this signature: <code>return_type(*)(class_type* this, arguments...)</code> </p>\n\n<p>Lets look at exact types:</p>\n\n<pre><code>//first argument of `aaa` has type double(*)(double)\ndouble aaa(double(*fun)(double), double x0);\n\ndouble Funcs::Fun1(double X) {\n  double f1 = a*X;\n\n  return f1;\n}\n\n// Fun1 has type double(Funs::*)(double)\n// i.e it's a method of Funs and it takes (implicitly) first argument\n// which is `this` pointer\n\n// so that how `aaa` must  look like\ndouble aaa(double(Funs::*fun)(double), double x0)\n{\n    // special sytax\n    *this.*fun(x0);\n}\n\n// and that how `solver` looks like\ndouble Funcs::solver(double X0)\n{\n  double result;\n\n  // get pointer to method\n  result = aaa(&amp;Funs::Fun1, X0);\n  return result;\n}\n</code></pre>\n\n<p>If you are not familar with pointers to methods - check <a href=\"http://www.newty.de/fpt/fpt.html#chapter2\" rel=\"nofollow noreferrer\">this</a></p>\n"}, {"tags": [], "owner": {"reputation": 583, "user_id": 8135257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c32514b6e4788cbdee58240a728f4d24?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Stafeyev", "link": "https://stackoverflow.com/users/8135257/anton-stafeyev"}, "is_accepted": false, "score": 0, "last_activity_date": 1576074541, "creation_date": 1576074541, "answer_id": 59288007, "question_id": 45331989, "link": "https://stackoverflow.com/questions/45331989/c-pointer-to-non-static-member-functions/59288007#59288007", "title": "c++ pointer to non-static member functions", "body": "<p>I am still new to c++, but the solution I know is to have a static function acting as a delegate. <a href=\"https://docs.microsoft.com/ru-ru/windows/win32/learnwin32/managing-application-state-\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/ru-ru/windows/win32/learnwin32/managing-application-state-</a>  </p>\n\n<p>///FOLLOW THE LINK FOR FULL CODE to understand what i am talking about :)</p>\n\n<p>Take a look at how win32 API provides a static callback function acting as a delegate. in short, function takes number of inputs, and the last parameter is the class the caller passed as a void pointer.</p>\n\n<pre><code>static LRESULT CALLBACK WindowProc(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam)\n    {\n        DERIVED_TYPE *pThis = NULL;\n\n        if (uMsg == WM_NCCREATE)\n        {\n            // routine to recast back pointer to your class type so you have access to your local members with \"This\"\n            CREATESTRUCT* pCreate = (CREATESTRUCT*)lParam;  \n            pThis = (DERIVED_TYPE*)pCreate-&gt;lpCreateParams;\n            SetWindowLongPtr(hwnd, GWLP_USERDATA, (LONG_PTR)pThis);\n\n            pThis-&gt;m_hwnd = hwnd;\n        }\n</code></pre>\n\n<p>Take a look at how lParam is being cast back to DERIVED_TYPE which is a type of your class and pThis acts as normal this and gives you the access to class members.</p>\n"}], "owner": {"reputation": 133, "user_id": 8371092, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/40d61d323c5020efeb54c72e383df433?s=128&d=identicon&r=PG&f=1", "display_name": "Mattia", "link": "https://stackoverflow.com/users/8371092/mattia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4971, "favorite_count": 3, "accepted_answer_id": 45332310, "answer_count": 4, "score": 7, "last_activity_date": 1576074541, "creation_date": 1501084637, "question_id": 45331989, "link": "https://stackoverflow.com/questions/45331989/c-pointer-to-non-static-member-functions", "title": "c++ pointer to non-static member functions", "body": "<p>I have read many posts and answers about pointers to non-static member functions, but none looks able to solve my problem.<br>\nSo I have created a short example to replicate my issue here: even if this example could be \"solved\" in different ways, for the final software it is important to keep the structure like in the example, thanks.  </p>\n\n<p>This is the header of the class \"Funcs.h\":  </p>\n\n<pre><code>class Funcs\n{\nprivate:\n  double a = 1, b = 2;\n\npublic:\n  Funcs();\n  ~Funcs();\n  double Fun1(double X);\n  double solver(double X0);\n  double aaa(double(*fun)(double), double x0);\n};\n</code></pre>\n\n<p>This is the cpp of the class \"Funcs.cpp\":</p>\n\n<pre><code>#include \"Funcs.h\"\n\nusing namespace std;\n\nFuncs::Funcs()\n{\n}\n\nFuncs::~Funcs()\n{\n}\n\ndouble Funcs::Fun1(double X) {\n  double f1 = a*X;\n\n  return f1;\n}\n\ndouble Funcs::solver(double X0)\n{\n  double result;\n\n  result = aaa(Fun1, X0);\n  return result;\n}\n\ndouble Funcs::aaa(double(*fun)(double), double x0)\n{\n  return fun(x0);\n}\n</code></pre>\n\n<p>And Finally this is the main \"main.cpp\":</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"Funcs.h\"\n\nusing namespace std;\n\nint main() {\n  double x0=1;\n  double result;\n  Funcs funcs;\n\n  result = funcs.solver(x0);\n  cout &lt;&lt; result &lt;&lt; endl;\n\n  return 0;\n}\n</code></pre>\n\n<p>The error is in the method Funcs::solver when I call \"result = aaa(Fun1, X0);\" because I can't use a pointer to Fun1 because it is a non-static member. At the same time I can't make it static, otherwise the variable \"a\" could not be seen inside the static method.</p>\n\n<p>Thanks in advance for your help.</p>\n"}, {"tags": ["c++", "operating-system", "cpu-architecture", "intel-pin"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 2, "creation_date": 1501084578, "post_id": 45331926, "comment_id": 77625761, "body": "A function can have only one entry point (the target of a call) but can have multiple exit points (the ret instructions)."}, {"owner": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "edited": false, "score": 1, "creation_date": 1501084782, "post_id": 45331926, "comment_id": 77625913, "body": "Q: Have you tried generating assembly outout (e.g. <code>gcc -S</code>) and examining the assembly source?  Q: Would your tool &quot;detect&quot; multiple &quot;RET&quot; calls if the function happened to have multiple &quot;return&quot; exits?  We really need more info before we can speculate..."}, {"owner": {"reputation": 13, "user_id": 2416145, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3kby1.jpg?s=128&g=1", "display_name": "Prof", "link": "https://stackoverflow.com/users/2416145/prof"}, "reply_to_user": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "edited": false, "score": 0, "creation_date": 1501085453, "post_id": 45331926, "comment_id": 77626409, "body": "@paulsm4  i haven&#39;t t generated the assembly output, and what you mean by detecting multiple exits? isn&#39;t during execution only one of the return exit is taken?"}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 2, "creation_date": 1501085885, "post_id": 45331926, "comment_id": 77626704, "body": "Technically, a compiler can make do without <code>call</code>s by combining <code>push</code>s and <code>jmp</code>s. That might be good for performance in some cases. I don&#39;t know if your compiler is up for such hackery, though. Regarding your comment, I think the others were assuming you are talking about analyzing the assembly output, not the actual execution path."}, {"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 2, "creation_date": 1501087559, "post_id": 45331926, "comment_id": 77627818, "body": "Technically, a compiler can also use a <code>ret</code> instruction to generate a jump, e.g. as in <code>push &lt;some address&gt;, ret</code>. This can be handy if there&#39;s a need for a dynamic jump target but no free register available for a register-based jump. It&#39;s very rare, though."}, {"owner": {"reputation": 17597, "user_id": 2016408, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TVba8.jpg?s=128&g=1", "display_name": "Leeor", "link": "https://stackoverflow.com/users/2016408/leeor"}, "edited": false, "score": 1, "creation_date": 1501092961, "post_id": 45331926, "comment_id": 77631261, "body": "@NeilButterworth, if you&#39;re talking about static code - true, but then again a function may be called from multiple places. If you&#39;re talking about dynamic code (and that&#39;s what the question seems to be about) - no, you can hit only one ret per function invocation."}, {"owner": {"reputation": 17597, "user_id": 2016408, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TVba8.jpg?s=128&g=1", "display_name": "Leeor", "link": "https://stackoverflow.com/users/2016408/leeor"}, "edited": false, "score": 2, "creation_date": 1501093130, "post_id": 45331926, "comment_id": 77631355, "body": "@Prof, you&#39;re going to have to post some code: a short version of the pintool, and the program you ran it with."}, {"owner": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "edited": false, "score": 0, "creation_date": 1501369137, "post_id": 45331926, "comment_id": 77750360, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/45181624/pintool-number-of-call-and-ret-mismatch\">Pintool: Number of call and ret mismatch?</a>"}, {"owner": {"reputation": 13, "user_id": 2416145, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3kby1.jpg?s=128&g=1", "display_name": "Prof", "link": "https://stackoverflow.com/users/2416145/prof"}, "reply_to_user": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "edited": false, "score": 0, "creation_date": 1503237849, "post_id": 45331926, "comment_id": 78523273, "body": "@paulsm4 that thread is closed"}, {"owner": {"reputation": 17597, "user_id": 2016408, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TVba8.jpg?s=128&g=1", "display_name": "Leeor", "link": "https://stackoverflow.com/users/2016408/leeor"}, "edited": false, "score": 0, "creation_date": 1503245806, "post_id": 45331926, "comment_id": 78525920, "body": "@Prof, please add the code in the question (you can edit it). By the way, in some cases you can have ret insts without a call when someone&#39;s doing tricks with far jumps, or trying to invoke ROP attacks, but i&#39;m not sure how frequent that would be."}, {"owner": {"reputation": 13, "user_id": 2416145, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3kby1.jpg?s=128&g=1", "display_name": "Prof", "link": "https://stackoverflow.com/users/2416145/prof"}, "reply_to_user": {"reputation": 17597, "user_id": 2016408, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TVba8.jpg?s=128&g=1", "display_name": "Leeor", "link": "https://stackoverflow.com/users/2016408/leeor"}, "edited": false, "score": 0, "creation_date": 1504108114, "post_id": 45331926, "comment_id": 78888321, "body": "@Leeor done, have a look"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1504140557, "post_id": 45331926, "comment_id": 78902229, "body": "Are you sure you&#39;re not counting <code>jmp</code> instructions as <code>call</code>?  I haven&#39;t used Pintool, but are you sure that asking for <code>IARG_RETURN_IP</code> as a 2nd argument restricts it to only giving you jumps that <i>have</i> a return-IP?  Or maybe it&#39;s counting tail-call <code>jmp</code> instructions, like when you <code>jmp func</code> instead of <code>call func</code> / <code>ret</code>?   Like in this example: <a href=\"https://godbolt.org/g/fv5y77\" rel=\"nofollow noreferrer\">godbolt.org/g/fv5y77</a>"}, {"owner": {"reputation": 17597, "user_id": 2016408, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TVba8.jpg?s=128&g=1", "display_name": "Leeor", "link": "https://stackoverflow.com/users/2016408/leeor"}, "edited": false, "score": 1, "creation_date": 1504159244, "post_id": 45331926, "comment_id": 78907141, "body": "Do you see any &quot;exploit&quot; printed? after one case your reference stack may be corrupted and stop reporting matches, no?"}, {"owner": {"reputation": 13, "user_id": 2416145, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3kby1.jpg?s=128&g=1", "display_name": "Prof", "link": "https://stackoverflow.com/users/2416145/prof"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1504236319, "post_id": 45331926, "comment_id": 78945583, "body": "@PeterCordes in that case don&#39;t you think the call count will be greater than the ret count ? and in the present scenario the program is reporting a larger number of returns."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1504236576, "post_id": 45331926, "comment_id": 78945649, "body": "Oops, I forgot which way you said your imbalance was!  Yes, my guess would explain the other way.  Does your program use a lot of exception handlers?  (Although again I think that would result in more calls than rets from unwinding the stack instead of returning up through the call chain.)"}, {"owner": {"reputation": 13, "user_id": 2416145, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3kby1.jpg?s=128&g=1", "display_name": "Prof", "link": "https://stackoverflow.com/users/2416145/prof"}, "reply_to_user": {"reputation": 17597, "user_id": 2016408, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TVba8.jpg?s=128&g=1", "display_name": "Leeor", "link": "https://stackoverflow.com/users/2016408/leeor"}, "edited": false, "score": 0, "creation_date": 1504236661, "post_id": 45331926, "comment_id": 78945666, "body": "@Leeor yes Exploit is printed on every mismatch but the stack is not corrupted as we move forward like this  c1, r1 ok c2, c3, r3 ok r2 ok c4, rExtra Exploit (and rExtra rejected)  r4 ok"}, {"owner": {"reputation": 13, "user_id": 2416145, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3kby1.jpg?s=128&g=1", "display_name": "Prof", "link": "https://stackoverflow.com/users/2416145/prof"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1504236930, "post_id": 45331926, "comment_id": 78945711, "body": "@PeterCordes actually no i haven&#39;t implemented any exception handling"}], "answers": [{"comments": [{"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1507796853, "post_id": 46704183, "comment_id": 80356430, "body": "A <code>jmp</code> tailcall skips a <code>call</code> as well as a <code>ret</code>.  Also, the <i>dynamic</i> count of <code>call</code> / <code>ret</code> should normally match, shouldn&#39;t it?  (Or is this PIN tool doing a static instruction count?)   Multiple call-sites to one function vs. multiple return paths out of one function only affect the static instruction balance, not dynamic."}, {"owner": {"reputation": 1051, "user_id": 2093195, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5d3c2c0866e1e1d5935b70f59fcf7fbc?s=128&d=identicon&r=PG", "display_name": "Heyji", "link": "https://stackoverflow.com/users/2093195/heyji"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1507798669, "post_id": 46704183, "comment_id": 80357508, "body": "My experience is that the dynamic count of call/ret never matches and processing needs to be done to reconciliate these figures. PIN newsgroup (yahoogroup) is full of discussions on this issue. I don&#39;t know what you mean with a &quot;jmp&quot; tailcall skips a call as well as a ret. I update my example as the second part of your comment is true."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 2, "creation_date": 1507799116, "post_id": 46704183, "comment_id": 80357810, "body": "I thought your last paragraph was talking about a case like <code>int foo() { return bar(); }</code> where <code>foo</code> compiles to <code>jmp bar</code> instead of <code>call bar; ret</code>.  i.e. an optimized tail-call.  In that case, there&#39;s one fewer call and one fewer ret, so the balance isn&#39;t affected.  The <code>ret</code> in the function you tail-call still executes, and it doesn&#39;t un-balance the hardware return-address predictor stack.  (I guess if you&#39;re only instrumenting some functions, e.g. not libraries, then this could PIN count differences even if it&#39;s not a performance problem.)"}, {"owner": {"reputation": 1051, "user_id": 2093195, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5d3c2c0866e1e1d5935b70f59fcf7fbc?s=128&d=identicon&r=PG", "display_name": "Heyji", "link": "https://stackoverflow.com/users/2093195/heyji"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1507799359, "post_id": 46704183, "comment_id": 80357945, "body": "It was not a good example. I removed it and added further references."}], "tags": [], "owner": {"reputation": 1051, "user_id": 2093195, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5d3c2c0866e1e1d5935b70f59fcf7fbc?s=128&d=identicon&r=PG", "display_name": "Heyji", "link": "https://stackoverflow.com/users/2093195/heyji"}, "is_accepted": true, "score": 1, "last_activity_date": 1507799289, "last_edit_date": 1507799289, "creation_date": 1507794536, "answer_id": 46704183, "question_id": 45331926, "link": "https://stackoverflow.com/questions/45331926/why-the-number-of-ret-instructions-is-greater-than-number-of-call-instructions/46704183#46704183", "title": "why the Number of ret instructions is greater than number of call instructions?", "body": "<p>You can have longjmp, C++ exceptions or exit calls in a function call, which makes you miss the return instructions of that function call.  </p>\n\n<p>This has been discussed many times <a href=\"https://groups.yahoo.com/neo/groups/pinheads/conversations/topics/7383\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 13, "user_id": 2416145, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3kby1.jpg?s=128&g=1", "display_name": "Prof", "link": "https://stackoverflow.com/users/2416145/prof"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 356, "favorite_count": 0, "accepted_answer_id": 46704183, "answer_count": 1, "score": 1, "last_activity_date": 1507799289, "creation_date": 1501084460, "last_edit_date": 1504107726, "question_id": 45331926, "link": "https://stackoverflow.com/questions/45331926/why-the-number-of-ret-instructions-is-greater-than-number-of-call-instructions", "title": "why the Number of ret instructions is greater than number of call instructions?", "body": "<p>i have written a pintool. it implements a stack for a program while instructions are executed. In case a call instruction is encountered it pushes the address of next instruction in sequence to stack. when the called procedure is completed and the return instruction is encountered it verifies the target address in ret instruction is equal to the top of stack and pop out the top.</p>\n\n<p>normally the number of call instructions should be equal to return instructions. but this tool monitors a larger number of return instructions. how is this possible? what is the problem? how can i solve it?</p>\n\n<p>edit 1:</p>\n\n<p>code for pintool </p>\n\n<pre><code>VOID f_jump(int a, int b) \n{ \ns.push(b); \ncout&lt;&lt;s.top()&lt;&lt;\"\\t\"; \nicount1++; \n}\nVOID f_ret(int a, int b) \n{ \nif (b==s.top())\n { \n   cout&lt;&lt;s.top(); \n   s.pop(); \n   cout&lt;&lt;\"\\tOK\"&lt;&lt;endl; \n }\nelse \ncout&lt;&lt;\"Exploit\\t\"&lt;&lt;endl&lt;&lt;s.top()&lt;&lt;\"\\t\"&lt;&lt;b&lt;&lt;endl; \nicount2++; \n} \n\nVOID Instruction(INS ins, VOID *v) \n{ \nif( INS_IsCall(ins) ) \n  { \n  INS_InsertCall(ins,IPOINT_TAKEN_BRANCH,AFUNPTR(f_jump),\n  IARG_BRANCH_TARGET_ADDR,IARG_RETURN_IP, IARG_END); \n  } \nif( INS_IsRet(ins) )\n  { \n INS_InsertCall(ins,IPOINT_BEFORE,AFUNPTR(f_ret),\n IARG_INST_PTR,IARG_BRANCH_TARGET_ADDR, IARG_END);\n  } \n}\n</code></pre>\n\n<p>i run it on various binaries and processes but the problem remained the same. please help.</p>\n"}, {"tags": ["c#", "c++", "windows"], "comments": [{"owner": {"reputation": 2639, "user_id": 3072566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jaZNV.png?s=128&g=1", "display_name": "litelite", "link": "https://stackoverflow.com/users/3072566/litelite"}, "edited": false, "score": 0, "creation_date": 1501084101, "post_id": 45331775, "comment_id": 77625370, "body": "Please post a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>"}, {"owner": {"reputation": 3061, "user_id": 881712, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/852956f1a8a603a7d09d10e856f821be?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/881712/mark"}, "reply_to_user": {"reputation": 2639, "user_id": 3072566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jaZNV.png?s=128&g=1", "display_name": "litelite", "link": "https://stackoverflow.com/users/3072566/litelite"}, "edited": false, "score": 0, "creation_date": 1501084741, "post_id": 45331775, "comment_id": 77625883, "body": "I apologize, but my question is how to launch a C# application from another folder, i.e. using command prompt. What code should I post?"}, {"owner": {"reputation": 5713, "user_id": 639771, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/yLDsC.jpg?s=128&g=1", "display_name": "Clint", "link": "https://stackoverflow.com/users/639771/clint"}, "edited": false, "score": 0, "creation_date": 1501085094, "post_id": 45331775, "comment_id": 77626130, "body": "Dumb question, but do you actually have the right version of .NET installed?"}, {"owner": {"reputation": 5713, "user_id": 639771, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/yLDsC.jpg?s=128&g=1", "display_name": "Clint", "link": "https://stackoverflow.com/users/639771/clint"}, "edited": false, "score": 1, "creation_date": 1501085120, "post_id": 45331775, "comment_id": 77626152, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/18214983/this-application-could-not-be-started-only-when-the-file-is-in-system32-direc\">&quot;This application could not be started.&quot; Only when the file is in system32 directory</a>"}, {"owner": {"reputation": 5713, "user_id": 639771, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/yLDsC.jpg?s=128&g=1", "display_name": "Clint", "link": "https://stackoverflow.com/users/639771/clint"}, "edited": false, "score": 1, "creation_date": 1501085143, "post_id": 45331775, "comment_id": 77626171, "body": "Not strictly a duplicate, but could be something that&#39;s impacting you."}, {"owner": {"reputation": 3061, "user_id": 881712, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/852956f1a8a603a7d09d10e856f821be?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/881712/mark"}, "edited": false, "score": 0, "creation_date": 1501085259, "post_id": 45331775, "comment_id": 77626259, "body": "Exactly, you cannot start the application from a windows/* directory (at least with Windows 10)."}], "owner": {"reputation": 3061, "user_id": 881712, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/852956f1a8a603a7d09d10e856f821be?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/881712/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1501084008, "creation_date": 1501084008, "question_id": 45331775, "link": "https://stackoverflow.com/questions/45331775/launch-net-application-from-another-folder", "title": "Launch .NET application from another folder", "body": "<p>Here: <a href=\"https://stackoverflow.com/questions/2843248/launch-c-sharp-net-application-from-c\">Launch C# .Net Application from C++</a> they say it's possible to launch a .NET application using <code>CreateProcess</code>.\nI can't.</p>\n\n<p>Even from the command prompt (Windows 10) I can run my C# application only if I <code>cd</code> to the exe folder.</p>\n\n<p>I've added that folder to the <code>PATH</code> env var, so my C++ application can run it without know where it actually is. But as said it doesn't run.</p>\n\n<p>Trying with the command prompt it just says \"This application cannot be started\".</p>\n\n<p>Is there something more I have to do?</p>\n"}, {"tags": ["c++", "performance", "c++11"], "comments": [{"owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "edited": false, "score": 9, "creation_date": 1501084075, "post_id": 45331719, "comment_id": 77625353, "body": "If you don&#39;t know the actual number of elements there, you usually simply don&#39;t use <code>.reserve</code> at all, and rely on exponential growth of capacity which is a good default."}, {"owner": {"reputation": 29251, "user_id": 72178, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/M3OuM.png?s=128&g=1", "display_name": "ks1322", "link": "https://stackoverflow.com/users/72178/ks1322"}, "edited": false, "score": 0, "creation_date": 1501084239, "post_id": 45331719, "comment_id": 77625470, "body": "On linux rss memory will not wasted, only virtual will be reserved due to overcommit."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 2, "creation_date": 1501084467, "post_id": 45331719, "comment_id": 77625652, "body": "It&#39;s not <b>standard</b> practice, although it&#39;s sometimes appropriate."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1501148266, "post_id": 45331719, "comment_id": 77654906, "body": "The only disadvantage is the extra allocation, as you surmise.  How that affects your program is well explained in the answers."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1501233656, "post_id": 45331719, "comment_id": 77699773, "body": "If the maximum size is a rare event, using a <code>reserve(typical_size)</code> might be a compromise that gives you better performance <i>on average</i>. Assuming that this is what you need to improve."}], "answers": [{"comments": [{"owner": {"reputation": 2369, "user_id": 3564091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2d634bf21a64d8d510ddf6e14b2c9ec?s=128&d=identicon&r=PG&f=1", "display_name": "KjMag", "link": "https://stackoverflow.com/users/3564091/kjmag"}, "edited": false, "score": 3, "creation_date": 1501085139, "post_id": 45331858, "comment_id": 77626166, "body": "Some answers that have been posted to SO quite recently suggest that e.g. <code>reserve()</code> + <code>emplace_back()</code> is significantly faster than <code>push_back()</code> or <code>emplace_back()</code> without preallocation. Examples: <a href=\"https://stackoverflow.com/a/44088863/3564091\">stackoverflow.com/a/44088863/3564091</a> <a href=\"https://stackoverflow.com/a/32200517/3564091\">stackoverflow.com/a/32200517/3564091</a>"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 2369, "user_id": 3564091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2d634bf21a64d8d510ddf6e14b2c9ec?s=128&d=identicon&r=PG&f=1", "display_name": "KjMag", "link": "https://stackoverflow.com/users/3564091/kjmag"}, "edited": false, "score": 0, "creation_date": 1501085196, "post_id": 45331858, "comment_id": 77626209, "body": "Indeed, <code>emplace_back()</code> can obviate value copies."}, {"owner": {"reputation": 392, "user_id": 7416115, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/50814f30b77a1c57417db6f2209f0e27?s=128&d=identicon&r=PG&f=1", "display_name": "mrclng", "link": "https://stackoverflow.com/users/7416115/mrclng"}, "reply_to_user": {"reputation": 2369, "user_id": 3564091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2d634bf21a64d8d510ddf6e14b2c9ec?s=128&d=identicon&r=PG&f=1", "display_name": "KjMag", "link": "https://stackoverflow.com/users/3564091/kjmag"}, "edited": false, "score": 0, "creation_date": 1501085483, "post_id": 45331858, "comment_id": 77626427, "body": "As I said it is best practice <i>to my knowledge</i>... I am referring to things I read such as @Andrews anwer in <a href=\"https://stackoverflow.com/a/32200517/7416115\">this</a> question (already posted by @KjMag). If this is incorrect or inaccurate it would be great if you could elaborate why!"}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 1, "last_activity_date": 1501084257, "creation_date": 1501084257, "answer_id": 45331858, "question_id": 45331719, "link": "https://stackoverflow.com/questions/45331719/is-there-a-downside-to-a-significant-overestimation-in-a-reserve/45331858#45331858", "title": "Is there a downside to a significant overestimation in a reserve()?", "body": "<p>What you cite as standard C++11 practice is hardly standard, and probably not even good practice.</p>\n\n<p>These days I'd be inclined to discourage the use of <code>reserve</code>, and let your platform (i.e. the C++ standard library optimised to your platform) deal with the reallocation as it sees fit.</p>\n\n<p>That said, calling <code>reserve</code> with an excessive amount may well also effectively be benign due to modern operating systems only giving you the memory if you actually <em>use</em> it (Linux is particularly good at that). But relying on this could cause you trouble if you port to a different operating system, whereas simply omitting <code>reserve</code> is less likely to.</p>\n"}, {"tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": false, "score": 0, "last_activity_date": 1501085189, "last_edit_date": 1501085189, "creation_date": 1501084397, "answer_id": 45331902, "question_id": 45331719, "link": "https://stackoverflow.com/questions/45331719/is-there-a-downside-to-a-significant-overestimation-in-a-reserve/45331902#45331902", "title": "Is there a downside to a significant overestimation in a reserve()?", "body": "<p>You have 2 options:</p>\n\n<p>You don't call <code>reserve</code> and let the default implementation of the vector figure out the size, which uses exponential growth.</p>\n\n<p><em>Or</em></p>\n\n<p>You call <code>reserve(maxElems)</code> and <code>shrink_to_fit()</code> afterwards.</p>\n\n<hr>\n\n<p>The first option is less likely to give you a <code>std::bad_alloc</code> (even though modern OS's probably will never throw this if you don't touch the last block of the reserved memory)</p>\n\n<p>The second option is less likely to invoke multiple calls to <code>reserve</code>, the first option will most likely have 2 calls : the <code>reserve</code> and the <code>shrink_to_fit()</code> (which might be a no-op depending on the implementation since it's non-binding) while option 2 might have significant more. Less calls = better performance.</p>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 0, "last_activity_date": 1501085572, "last_edit_date": 1501085572, "creation_date": 1501084860, "answer_id": 45332066, "question_id": 45331719, "link": "https://stackoverflow.com/questions/45331719/is-there-a-downside-to-a-significant-overestimation-in-a-reserve/45332066#45332066", "title": "Is there a downside to a significant overestimation in a reserve()?", "body": "<blockquote>\n  <p>But what happens if we have a scenario where the number of elements is going to be significantly less in the majority of calls to our method?</p>\n</blockquote>\n\n<p>The allocated memory simply remains unused.</p>\n\n<blockquote>\n  <p>Is there a downside to a significant overestimation in a reserve()?</p>\n</blockquote>\n\n<p>Yes, at least a potential downside: The memory that was allocated for the vector can not be used for other objects.</p>\n\n<p>This is especially problematic in embedded systems that do not usually have virtual memory, and little physical memory to spare.</p>\n\n<p>Concerning programs running inside an operating system, if the operating system does not \"over commit\" the memory, then this can still easily cause the virtual memory allocation of the program to reach the limit given to the process.</p>\n\n<p>Even in over committing system, particularly gratuitous overestimation can in theory result in exhaustion of virtual address space. But you need pretty big numbers to achieve that on 64 bit architectures.</p>\n\n<hr>\n\n<blockquote>\n  <p>Is there any disadvantage to the conservative reserve call other than the excess allocated memory (which supposably can be be freed with shrink_to_fit() if necessary)?</p>\n</blockquote>\n\n<p>Well, this is slower than initially allocating exactly correct amount of memory, but the difference might be marginal.</p>\n"}, {"tags": [], "owner": {"reputation": 29251, "user_id": 72178, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/M3OuM.png?s=128&g=1", "display_name": "ks1322", "link": "https://stackoverflow.com/users/72178/ks1322"}, "is_accepted": false, "score": 0, "last_activity_date": 1501085540, "last_edit_date": 1501085540, "creation_date": 1501084999, "answer_id": 45332125, "question_id": 45331719, "link": "https://stackoverflow.com/questions/45331719/is-there-a-downside-to-a-significant-overestimation-in-a-reserve/45332125#45332125", "title": "Is there a downside to a significant overestimation in a reserve()?", "body": "<p>If you are on linux <code>reserve</code> will call <code>malloc</code> which only allocates virtual memory, but not physical. Physical memory will be used when you actually insert elements to a <code>vector</code>. That's why you can considerably overestimate <code>reserve</code> size.</p>\n\n<p>If you can estimate maximum <code>vector</code> size you can <code>reserve</code> it just once on start to avoid reallocations and no physical memory will be wasted.</p>\n"}, {"tags": [], "owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "is_accepted": true, "score": 12, "last_activity_date": 1502651057, "last_edit_date": 1502651057, "creation_date": 1501086806, "answer_id": 45332749, "question_id": 45331719, "link": "https://stackoverflow.com/questions/45331719/is-there-a-downside-to-a-significant-overestimation-in-a-reserve/45332749#45332749", "title": "Is there a downside to a significant overestimation in a reserve()?", "body": "<h2>Summary</h2>\n\n<p>There is likely to be <em>some</em> downside to using a too-large reserve, but how much is depends both on the size and context of your <code>reserve()</code> as well as your specific allocator, operating system and their configuration. </p>\n\n<p>As you are probably aware, on platforms like Windows and Linux, large allocations are generally not allocating any physical memory or page table entries until it is first accessed, so you might imagine large, unused allocations to be \"free\". Sometimes this is called \"reserving\" memory without \"committing\" it, and I'll use those terms here.</p>\n\n<p>Here are some reasons this might not be as free as you'd imagine:</p>\n\n<h2>Page Granularity</h2>\n\n<p>The lazy commit described above only happens at a page granularity. If you are using (typical) 4096 byte pages, it means that if you usually reserve 4,000 bytes for a vector that will usually contains elements taking up 100 bytes, the lazy commit buys you nothing! At least the whole page of 4096 bytes has to be committed and you don't save physical memory. So it isn't just the ratio between the expected and reserved size that matters, but the absolute size of the reserved size that determines how much waste you'll see.</p>\n\n<p>Keep in mind that many systems are now using \"huge pages\" transparently, so in some cases the granularity will be on the order of 2 MB or more. In that case you need allocations on the order of 10s or 100s of MB to really take advantage of the lazy allocation strategy.</p>\n\n<h2>Worse Allocation Performance</h2>\n\n<p>Memory allocators for C++ generally try to allocate large chunks of memory (e.g., via <code>sbrk</code> or <code>mmap</code> on Unix-like platforms) and then efficiently carve that up into the small chunks the application is requesting. Getting these large chunks of memory via say a system call like <code>mmap</code> may be several orders of magnitude slower than the fast path allocation within the allocator which is often only a dozen instructions or so. When you ask for large chunks that you mostly won't use, you defeat that optimization and you'll often be going down the slow path.</p>\n\n<p>As a concrete example, let's say your allocator asks <code>mmap</code> for chunks of 128 KB which it carves up to satisfy allocations. You are allocating about 2K of stuff in a typical <code>vector</code>, but <code>reserve</code> 64K. You'll now pay a <code>mmap</code> call for every other <code>reserve</code> call, but if you just asked for the 2K you ultimately needed, you'd have about 32 <em>times</em> fewer <code>mmap</code> calls.</p>\n\n<h2>Dependence on Overcommit Handling</h2>\n\n<p>When you ask for a lot of memory and don't use it, you can get into the situation where you've asked for more memory than your system supports (e.g., more than your RAM + swap). Whether this is even <em>allowed</em> depends on your OS and how it is configured, and no matter what you are up for some interesting behavior if you subsequently commit more memory simply by writing it. I means that arbitrary processes may be killed, or you might get unexpected errors on any memory write. What works on one system may fail on another due to different <a href=\"https://www.kernel.org/doc/Documentation/vm/overcommit-accounting\" rel=\"nofollow noreferrer\">overcommit tunables</a>.</p>\n\n<p>Finally, it makes managing your process a bit harder since the \"VM size\" metric as reported by monitoring tools won't have much relationship to what your process may ultimately commit.</p>\n\n<h2>Worse Locality</h2>\n\n<p>Allocating more memory than you need makes it likely that your working set will be more sparsely spread out in the virtual address space. The overall effect is a reduction in locality of reference. For very small allocations (e.g., a few dozen bytes) this may reduce the within-same-cache-line locality, but for larger sizes the main effect is likely to be to spread your data onto more physical pages, increasing TLB pressure. The exact thresholds will depend a lot on details like whether hugepages are enabled.</p>\n"}], "owner": {"reputation": 392, "user_id": 7416115, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/50814f30b77a1c57417db6f2209f0e27?s=128&d=identicon&r=PG&f=1", "display_name": "mrclng", "link": "https://stackoverflow.com/users/7416115/mrclng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 589, "favorite_count": 1, "accepted_answer_id": 45332749, "answer_count": 5, "score": 9, "last_activity_date": 1502651057, "creation_date": 1501083866, "question_id": 45331719, "link": "https://stackoverflow.com/questions/45331719/is-there-a-downside-to-a-significant-overestimation-in-a-reserve", "title": "Is there a downside to a significant overestimation in a reserve()?", "body": "<p>Let's suppose we have a method that creates and uses possibly very big <code>vector&lt;foo&gt;</code>s.\nThe maximum number of elements is known to be <code>maxElems</code>.</p>\n\n<p>Standard practice as of C++11 is to my best knowledge:</p>\n\n<pre><code>vector&lt;foo&gt; fooVec;\nfooVec.reserve(maxElems);\n//... fill fooVec using emplace_back() / push_back()\n</code></pre>\n\n<p>But what happens if we have a scenario where the number of elements is going to be significantly less in the majority of calls to our method?</p>\n\n<p>Is there any disadvantage to the conservative <code>reserve</code> call other than the excess allocated memory (which supposably can be be freed with <code>shrink_to_fit()</code> if necessary)?</p>\n"}, {"tags": ["c++", "arrays", "enums", "lvalue"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1501083356, "post_id": 45331478, "comment_id": 77624823, "body": "Instead of a clunky <code>switch</code> why not a simple lookup table using <code>std::map</code>?"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 1, "creation_date": 1501083491, "post_id": 45331478, "comment_id": 77624936, "body": "@&#193;lvaro S&#225;nchez  It seems you mean sokoban.board[j][i]"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 5, "creation_date": 1501083529, "post_id": 45331478, "comment_id": 77624967, "body": "<code>sokoban.board[j, i]</code> is not how you access a 2d array.  If you define it with <code>some_name[][]</code> you access it with <code>some_name[][]</code>."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1501083642, "post_id": 45331478, "comment_id": 77625051, "body": "please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Where is the enum declared?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1501084642, "post_id": 45331478, "comment_id": 77625808, "body": "This isn&#39;t the problem, but in C++ you don&#39;t need that C-style <code>typedef struct { ... } name;</code> stuff. Just use <code>struct name { ... };</code>"}], "answers": [{"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1501084145, "last_edit_date": 1501084145, "creation_date": 1501083839, "answer_id": 45331707, "question_id": 45331478, "link": "https://stackoverflow.com/questions/45331478/expression-must-be-a-modifiable-lvalue-with-enums/45331707#45331707", "title": "Expression must be a modifiable lvalue with enums", "body": "<p>The data member </p>\n\n<pre><code>tBoard board;\n</code></pre>\n\n<p>has the array type <code>tTile[MAX][MAX]</code> due to the typedef</p>\n\n<pre><code>typedef tTile tBoard[MAX][MAX];\n</code></pre>\n\n<p>So to access an element of the two-dimensional array you should use the postfix expression like</p>\n\n<pre><code>sokoban.board[j][i] = Wall;\n</code></pre>\n\n<p>where the expression <code>sokoban.board[j][i]</code> yields an lvalue of type <code>tTile</code>.</p>\n\n<p>As for this expression</p>\n\n<pre><code>sokoban.board[j, i] = Wall;\n</code></pre>\n\n<p>then there is used the comma operator in the square braces. In fact it is equivalent to</p>\n\n<pre><code>sokoban.board[i] = Wall;\n</code></pre>\n\n<p>The expression <code>sokoban.board[i]</code> has the one-dimensional array type <code>tTile[MAX]</code> (see the typedef above) and is not a modifiable lvalue.</p>\n"}], "owner": {"reputation": 1, "user_id": 7547173, "user_type": "registered", "profile_image": "https://graph.facebook.com/719986454830904/picture?type=large", "display_name": "&#193;lvaro S&#225;nchez", "link": "https://stackoverflow.com/users/7547173/%c3%81lvaro-s%c3%a1nchez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 667, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1501086744, "creation_date": 1501083232, "last_edit_date": 1501086744, "question_id": 45331478, "link": "https://stackoverflow.com/questions/45331478/expression-must-be-a-modifiable-lvalue-with-enums", "title": "Expression must be a modifiable lvalue with enums", "body": "<p>I have a terrible program in C++ when I try to assign a enum value.\nThe error exists when I try to assign <code>Wall</code> or <code>Free</code> etc to <code>sokoban.board[j,i]</code>.</p>\n\n<pre><code>bool loadLevel(ifstream &amp;stream, tSokoban &amp;sokoban, int level) {\n    bool ok = false; \n    string levelStr, levelFile = \" \", prove;\n    int j = 0;\n    levelStr = \"Level \" + to_string(level);\n    while (levelFile != levelStr &amp;&amp; EOF) {\n        getline(stream, levelFile);\n    }\n    if (levelFile == levelStr) {\n        ok = true;\n        getline(stream, prove);\n        sokoban.ncol = prove.size();\n        while (prove != \"Level \" + to_string(level + 1)) {\n            for (int i = 0; i &lt; prove.size(); i++) {\n                switch (prove[i]) {\n                case '#':\n                    sokoban.board[j, i] = Wall;\n                    break;\n                case ' ':\n                    sokoban.board[j, i] = Free;\n                    break;\n                case '$':\n                    sokoban.board[j, i] = Box;\n                    break;\n                case '.':\n                    sokoban.board[j, i] = GoalFree;\n                    break;\n                case '@':\n                    sokoban.board[j, i] = Player;\n                    break;\n                }\n            }\n            getline(stream, prove);\n            j++;\n        }\n        sokoban.nrows = j - 1;\n    }\n    return ok;\n}\n</code></pre>\n\n<p>It's hard to know where is the problem because these are the declarations:</p>\n\n<pre><code>   typedef tTile tBoard[MAX][MAX];\ntypedef struct {\n    tBoard board;\n    int nrows;\n    int ncol;\n    int rowPlayer;\n    int colPlayer;\n    int numBoxes;\n    int goalBoxes;\n}tSokoban;\ntypedef struct {\n    tSokoban sokoban;\n    int numMoves;\n    string nFileName;\n    int level;\n}tGame;\n</code></pre>\n\n<p>And if I write in the code: <code>sokoban.board[j,i]</code> this error dissapeared, could anyone tell me why this error happen?</p>\n\n<p>Sorry about this mess but I don't know how to use properly this task.</p>\n"}, {"tags": ["c++", "destructor", "object-destruction"], "comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1501082848, "post_id": 45331271, "comment_id": 77624404, "body": "I don&#39;t think there&#39;s a better way as the <code>Small</code> destructor will only be called when <code>Big</code> is getting destroyed, thus, after the <code>Big</code> destructor."}, {"owner": {"reputation": 1050, "user_id": 4534275, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/671721deaa074d660cc7a13bfbd6b397?s=128&d=identicon&r=PG", "display_name": "nefas", "link": "https://stackoverflow.com/users/4534275/nefas"}, "edited": false, "score": 6, "creation_date": 1501082863, "post_id": 45331271, "comment_id": 77624414, "body": "What kind of clean-up require for small&#39;s destructor to be called before big&#39;s destructor ?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 12, "creation_date": 1501082950, "post_id": 45331271, "comment_id": 77624486, "body": "&quot;I need the small destructor to be called before the big destructor since it does some cleanup necessary for the big destructor.&quot; Your design is broken. Ask how to fix it, don&#39;t ask how to live with a broken design."}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 4, "creation_date": 1501082953, "post_id": 45331271, "comment_id": 77624488, "body": "&quot;I need the small destructor to be called before the big destructor&quot; - this sounds like an <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">XY problem</a> - why do you need to do this?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1501083282, "post_id": 45331271, "comment_id": 77624753, "body": "Is there any better way to do what? Objects are destroyed in the reverse order as they are created. Anything else is just wrong in most cases"}, {"owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1501083672, "post_id": 45331271, "comment_id": 77625075, "body": "@n.m Yeah, that&#39;s broken, but sometimes require.Whole frameworks have such broken design e.g. QtQuick 5.3 hyrbrid app (C++ and jscript) would require something like that on linux, or app leaves hanging process behind itself."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1501083823, "post_id": 45331271, "comment_id": 77625161, "body": "I would suggest reworking the design instead of trying to circumvent the standard order of construction/destruction."}, {"owner": {"reputation": 312, "user_id": 4723238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a435fb2116a7bd95cbf3d2aa6fa41d7?s=128&d=identicon&r=PG&f=1", "display_name": "CK.", "link": "https://stackoverflow.com/users/4723238/ck"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1501085699, "post_id": 45331271, "comment_id": 77626563, "body": "@n.m. Yes, that entered my mind. I guess I don&#39;t &quot;need&quot; to do it, I was just unsure if it &quot;could&quot; be done."}, {"owner": {"reputation": 312, "user_id": 4723238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a435fb2116a7bd95cbf3d2aa6fa41d7?s=128&d=identicon&r=PG&f=1", "display_name": "CK.", "link": "https://stackoverflow.com/users/4723238/ck"}, "reply_to_user": {"reputation": 1050, "user_id": 4534275, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/671721deaa074d660cc7a13bfbd6b397?s=128&d=identicon&r=PG", "display_name": "nefas", "link": "https://stackoverflow.com/users/4534275/nefas"}, "edited": false, "score": 1, "creation_date": 1501085783, "post_id": 45331271, "comment_id": 77626621, "body": "@nefas It&#39;s for destroying the zmq context, and the small destructor closes some sockets. The big destructor destroys the zmq context and needs all the sockets to be closed before it can be destroyed."}, {"owner": {"reputation": 312, "user_id": 4723238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a435fb2116a7bd95cbf3d2aa6fa41d7?s=128&d=identicon&r=PG&f=1", "display_name": "CK.", "link": "https://stackoverflow.com/users/4723238/ck"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1501086392, "post_id": 45331271, "comment_id": 77627110, "body": "@OliverCharlesworth Thank you for that. Reversing the destruction order exactly seems to be Y. I&#39;ll see if I can redesign my code. That would be another question, though"}], "answers": [{"tags": [], "owner": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "is_accepted": false, "score": 2, "last_activity_date": 1501084133, "creation_date": 1501084133, "answer_id": 45331821, "question_id": 45331271, "link": "https://stackoverflow.com/questions/45331271/c-destruction-order-calling-a-field-destructor-before-the-class-destructor/45331821#45331821", "title": "C++ destruction order: Calling a field destructor before the class destructor", "body": "<p>Without knowing <em>why</em> you want to do this, my only suggestion is to break up <code>Big</code> into the parts that need to be destroyed after <code>Small</code> from the rest and then use composition to include that inside <code>Big</code>. Then you have control over the order of destruction:</p>\n\n<pre><code>class Small\n{\npublic:\n    ~Small() {std::cout &lt;&lt; \"Small destructor\" &lt;&lt; std::endl;}\n};\n\nclass BigImpl\n{\npublic:\n     ~BigImpl() { std::cout &lt;&lt; \"Big destructor\" &lt;&lt; std::endl; }\n};\n\nclass Big\n{\nprivate:\n    BigImpl bigimpl;\n    Small small;\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 312, "user_id": 4723238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a435fb2116a7bd95cbf3d2aa6fa41d7?s=128&d=identicon&r=PG&f=1", "display_name": "CK.", "link": "https://stackoverflow.com/users/4723238/ck"}, "edited": false, "score": 0, "creation_date": 1501088782, "post_id": 45332974, "comment_id": 77628649, "body": "Yes, I agree with the dynamic storage. That&#39;s what I mentioned in &#39;2&#39;. I&#39;m using this approach for now."}, {"owner": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "edited": false, "score": 1, "creation_date": 1501090461, "post_id": 45332974, "comment_id": 77629739, "body": "I wonder if a <code>std::optional</code> would be preferable to <code>unique_ptr</code>."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "edited": false, "score": 0, "creation_date": 1501091257, "post_id": 45332974, "comment_id": 77630222, "body": "@ChrisDrew <code>Small</code> isn&#39;t optional as far as I understood. The semantics of an optional doesn&#39;t fit well here. My two cents."}, {"owner": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "edited": false, "score": 0, "creation_date": 1501151513, "post_id": 45332974, "comment_id": 77657398, "body": "Personally, I think the semantics of <code>std::optional</code> fits as well as a nullable smart pointer and has the benefit of not using dynamic memory."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1520798292, "post_id": 45332974, "comment_id": 85452444, "body": "In general, <code>storage</code> might not be correctly aligned for <code>Small</code>. You should use <code>std::aligned_storage</code>"}], "tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": true, "score": 2, "last_activity_date": 1501097399, "last_edit_date": 1501097399, "creation_date": 1501087568, "answer_id": 45332974, "question_id": 45331271, "link": "https://stackoverflow.com/questions/45331271/c-destruction-order-calling-a-field-destructor-before-the-class-destructor/45332974#45332974", "title": "C++ destruction order: Calling a field destructor before the class destructor", "body": "<blockquote>\n  <p>call the\u00a0small.~Small()\u00a0destructor explicitly. -> This, however, calls the small destructor twice: once explicitly, and once after the big destructor has been executed.</p>\n</blockquote>\n\n<p>Well, I don't know why you want to keep on with this flawing design, but you can solve the <em>problem</em> described in your first bullet using placement new.<br>\nIt follows a minimal, working example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct Small {\n    ~Small() {std::cout &lt;&lt; \"Small destructor\" &lt;&lt; std::endl;}\n};\n\nstruct Big {\n    Big() { ::new (storage) Small; }\n\n    ~Big() {\n        reinterpret_cast&lt;Small *&gt;(storage)-&gt;~Small();\n        std::cout &lt;&lt; \"Big destructor\" &lt;&lt; std::endl;\n    }\n\n    Small &amp; small() {\n        return *reinterpret_cast&lt;Small *&gt;(storage);\n    }\n\nprivate:\n    unsigned char storage[sizeof(Small)];\n};\n\nint main() {\n    Big big;\n}\n</code></pre>\n\n<p>You don't have anymore a variable of type <code>Small</code>, but with something like the <code>small</code> member function in the example you can easily work around it.</p>\n\n<p>The idea is that you reserve enough space to construct in-place a <code>Small</code> and then you can invoke its destructor explicitly as you did. It won't be called twice, for all what the <code>Big</code> class has to release is an array of <code>unsigned char</code>s.<br>\nMoreover, you won't store your <code>Small</code> into the dynamic storage directly, for actually you are using a data member of your <code>Big</code> to create it in.</p>\n\n<hr>\n\n<p>That being said, I'd suggest you to allocate it on the dynamic storage unless you have a good reason to do otherwise. Use a <code>std::unique_ptr</code> and reset it at the beginning of the destructor of <code>Big</code>. Your <code>Small</code> will go away before the body of the destructor is actually executed as expected and also in this case the destructor won't be called twice.</p>\n\n<hr>\n\n<p><strong>EDIT</strong></p>\n\n<p>As suggested in the comments, <code>std::optional</code> can be another viable solution instead of <code>std::unique_ptr</code>. Keep in mind that <code>std::optional</code> is part of the C++17, so if you can use it mostly depends on what's the revision of the standard to which you must adhere.</p>\n"}, {"tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1520809329, "creation_date": 1520809329, "answer_id": 49226044, "question_id": 45331271, "link": "https://stackoverflow.com/questions/45331271/c-destruction-order-calling-a-field-destructor-before-the-class-destructor/49226044#49226044", "title": "C++ destruction order: Calling a field destructor before the class destructor", "body": "<p>The order of destructor calls cannot be changed. The proper way to design this is that <code>Small</code> performs its own cleanup.</p>\n\n<p>If you cannot change <code>Small</code> then you could make a class <code>SmallWrapper</code> that contains a <code>Small</code> and also can perform the required cleanup.</p>\n\n<p>The standard containers <code>std::optional</code> or <code>std::unique_ptr</code> or <code>std::shared_ptr</code> might suffice for this purpose.</p>\n"}], "owner": {"reputation": 312, "user_id": 4723238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a435fb2116a7bd95cbf3d2aa6fa41d7?s=128&d=identicon&r=PG&f=1", "display_name": "CK.", "link": "https://stackoverflow.com/users/4723238/ck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1292, "favorite_count": 0, "accepted_answer_id": 45332974, "answer_count": 3, "score": 6, "last_activity_date": 1520809329, "creation_date": 1501082655, "last_edit_date": 1520798036, "question_id": 45331271, "link": "https://stackoverflow.com/questions/45331271/c-destruction-order-calling-a-field-destructor-before-the-class-destructor", "title": "C++ destruction order: Calling a field destructor before the class destructor", "body": "<p>Is there any way to call a field destructor before the class destructor?</p>\n\n<p>Suppose I have 2 classes <code>Small</code> and <code>Big</code>, and <code>Big</code> contains an instance of <code>Small</code> as its field as such:</p>\n\n<pre><code>class Small\n{\npublic:\n    ~Small() {std::cout &lt;&lt; \"Small destructor\" &lt;&lt; std::endl;}\n};\n\nclass Big\n{\npublic:\n    ~Big() {std::cout &lt;&lt; \"Big destructor\" &lt;&lt; std::endl;}\n\nprivate:\n    Small small;\n};\n\nint main()\n{\n    Big big;\n}\n</code></pre>\n\n<p>This, of course, calls the big destructor before the small destructor:</p>\n\n<pre><code>Big destructor\nSmall destructor\n</code></pre>\n\n<p>I need the <code>Small</code> destructor to be called before the <code>Big</code> destructor since it does some cleanup necessary for the <code>Big</code> destructor. </p>\n\n<p>I could: </p>\n\n<ol>\n<li>call the <code>small.~Small()</code> destructor explicitly. -> This, however, calls the <code>Small</code> destructor twice: once explicitly, and once after the <code>Big</code> destructor has been executed.</li>\n<li>have a <code>Small*</code> as the field and call <code>delete small;</code> in the <code>Big</code> destructor </li>\n</ol>\n\n<p>I am aware that I can have a function in the <code>Small</code> class that does the cleanup and call it in the <code>Big</code> destructor, but I was wondering if there was a way to inverse the destructor order.</p>\n\n<p>Is there any better way to do this?</p>\n"}, {"tags": ["c#", "c++", "algorithm", "geometry", "mesh"], "answers": [{"tags": [], "owner": {"reputation": 183, "user_id": 1388579, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/96980535ff99a0704e219e5dbe83354d?s=128&d=identicon&r=PG", "display_name": "zman", "link": "https://stackoverflow.com/users/1388579/zman"}, "is_accepted": true, "score": 0, "last_activity_date": 1501513690, "creation_date": 1501513690, "answer_id": 45419433, "question_id": 45331255, "link": "https://stackoverflow.com/questions/45331255/how-to-remove-list-of-faces-and-its-vertices-from-a-mesh/45419433#45419433", "title": "How to remove list of faces and it&#39;s vertices from a mesh", "body": "<p>The solution I came up with in the end: </p>\n\n<pre><code>    public IMesh DeleteVertices(IMesh mesh, IImmutableList&lt;int&gt; indices_to_remove)\n    {\n        var indices_to_remove_set = new HashSet&lt;int&gt;(indices_to_remove);\n        var new_vertices = new List&lt;Vector&gt;();\n        var map = new int[mesh.Vertices.Count];\n\n        for (var i = 0; i &lt; mesh.Vertices.Count; i++)\n        {\n            if (indices_to_remove_set.Contains(i))\n            {\n                map[i] = -1;\n            }\n            else\n            {\n                new_vertices.Add(mesh.Vertices[i]);\n                map[i] = new_vertices.Count - 1;\n            }\n        }\n\n        var new_triangle_list = from triangle in mesh.Triangles\n                                where map[triangle.A] != -1 &amp;&amp;\n                                      map[triangle.B] != -1 &amp;&amp;\n                                      map[triangle.C] != -1\n                                select new IndexTriangle(\n                                    map[triangle.A],\n                                    map[triangle.B],\n                                    map[triangle.C]);\n\n        //build new mesh...\n    }\n</code></pre>\n"}], "owner": {"reputation": 183, "user_id": 1388579, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/96980535ff99a0704e219e5dbe83354d?s=128&d=identicon&r=PG", "display_name": "zman", "link": "https://stackoverflow.com/users/1388579/zman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 521, "favorite_count": 0, "accepted_answer_id": 45419433, "answer_count": 1, "score": -4, "last_activity_date": 1501513690, "creation_date": 1501082622, "last_edit_date": 1501084477, "question_id": 45331255, "link": "https://stackoverflow.com/questions/45331255/how-to-remove-list-of-faces-and-its-vertices-from-a-mesh", "title": "How to remove list of faces and it&#39;s vertices from a mesh", "body": "<p>I am trying to remove a list of faces as well as their respective vertices (if they are no longer referenced) from a mesh, but so far I have only been able to successfully remove the list of faces. The idea is that for each index that is removed all indices which are larger than the one removed should be decremented by 1. </p>\n\n<p>The mesh is represented simply by a list of vertices and a list of indices (and optionally a list of triangles).</p>\n\n<p>Currently the code to remove just triangles does this: </p>\n\n<pre><code>    private IMesh DeleteTriangles(IMesh input, IEnumerable&lt;int&gt; indices_to_delete)\n    {\n        var triangles_to_delete = new HashSet&lt;int&gt;(indices_to_delete);\n\n        _triangles_to_keep = _mesh.Triangles.Where((t, count) =&gt;\n            !triangles_to_delete.Contains(t.A) &amp;&amp;\n            !triangles_to_delete.Contains(t.B) &amp;&amp;\n            !triangles_to_delete.Contains(t.C)).ToList();\n\n       // return new mesh\n    }\n</code></pre>\n"}, {"tags": ["c++", "c++11", "bind", "functor", "mem-fun"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1501083121, "post_id": 45331143, "comment_id": 77624631, "body": "You are the first person I see using <code>bind</code>&#39;s special handling for nested bind expressions without knowing it."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1501083163, "post_id": 45331143, "comment_id": 77624673, "body": "mem_fn is deprecated, don&#39;t use it."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1501083442, "post_id": 45331143, "comment_id": 77624898, "body": "@n.m. It is?  I know the typedefs inside it will be in C++17 but I don&#39;t see anything about the <code>mem_fn</code> itself being deprecated."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1501084290, "post_id": 45331143, "comment_id": 77625510, "body": "@NathanOliver sorry got it confused with mem_fun."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1501084349, "post_id": 45331143, "comment_id": 77625561, "body": "@n.m. Ah.  Yeah, they didn&#39;t make that the easiest to keep straight."}], "answers": [{"tags": [], "owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "is_accepted": false, "score": 2, "last_activity_date": 1501082979, "creation_date": 1501082979, "answer_id": 45331395, "question_id": 45331143, "link": "https://stackoverflow.com/questions/45331143/why-cant-i-use-a-mem-fn-functor-in-bind/45331395#45331395", "title": "Why Can&#39;t I use a mem_fn Functor in bind?", "body": "<p>Well, clearly, the second example doesn't mention <code>placeholders::_2</code>. When <code>accumulate</code> calls the functor with two arguments, the second argument is ignored, and your code is trying to add up an <code>int</code> and an instance of the internal class that <code>mem_fn</code> returns.</p>\n\n<p>I suggest you drop all these <code>bind</code> games, and use a lambda:</p>\n\n<pre><code>accumulate(cbegin(foos), cend(foos), 0, \n    [](int val, foo* f) { return val + f-&gt;r(); });\n</code></pre>\n\n<p>Much clearer what's going on here.</p>\n"}, {"tags": [], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": true, "score": 0, "last_activity_date": 1501169800, "creation_date": 1501169800, "answer_id": 45355245, "question_id": 45331143, "link": "https://stackoverflow.com/questions/45331143/why-cant-i-use-a-mem-fn-functor-in-bind/45355245#45355245", "title": "Why Can&#39;t I use a mem_fn Functor in bind?", "body": "<p>To understand this, think about what it would mean if you just passed a literal to <code>bind</code>'s 3<sup>rd</sup> argument. For Example if you had done:</p>\n\n<pre><code>accumulate(cbegin(foos), cend(foos), 0, bind(plus&lt;int&gt;(), placeholders::_1, 13))\n</code></pre>\n\n<p>The result would have been <code>size(foos) * 13</code>, because <code>plus</code> would have used <code>13</code> as it's addend on each iteration.<strike></p>\n\n<pre><code>accumulate(cbegin(foos), cend(foos), 0, bind(plus&lt;int&gt;(), placeholders::_1, mem_fn(&amp;foo::r)))\n</code></pre>\n\n<p></strike> Won't compile because it's attempting to pass the result of <code>mem_fn(&amp;foo::r)</code> as the addend to <code>plus</code>. Since that can't be converted to an <code>int</code> <code>plus</code> can't accept that. But even if it could be converted to an <code>int</code>, that's not what you're looking for, you want to take the 2<sup>nd</sup> argument and call <code>foo::r</code> on it, passing the result to <code>plus</code>. Thus we know we need to see, <code>placeholders::_2</code> used somewhere in the statement, conveying the 2<sup>nd</sup> argument for the calling of it's <code>r</code> method.</p>\n\n<hr>\n\n<p>We need to bind <code>placeholders::_2</code> to be bound to a functor which will call the <code>r</code> method on it's parameter. The binding will of course require <code>bind</code>, but actually <a href=\"http://en.cppreference.com/w/cpp/utility/functional/bind#Parameters\" rel=\"nofollow noreferrer\"><code>bind</code> can take a method as it's 1<sup>st</sup> argument</a>.</p>\n\n<p>That said, the <code>bind(&amp;foo::r, placeholders::_2)</code> statement from your working code doesn't make any sense in non-nested form; that functor doesn't even take 2 parameters! <a href=\"/questions/tagged/c%2b%2b\" class=\"post-tag\" title=\"show questions tagged &#39;c++&#39;\" rel=\"tag\">c++</a> actually has <a href=\"http://en.cppreference.com/w/cpp/utility/functional/bind#Member_function_operator.28.29\" rel=\"nofollow noreferrer\">special rules for handling a <code>bind</code> nested within another <code>bind</code></a>, so that they can share the outer <code>bind</code>'s placeholders, lest there be no way to convey a bound argument to a nested expression:</p>\n\n<blockquote>\n  <p>If the stored argument arg is of type <code>T</code> for which <code>std::is_bind_expression&lt;T&gt;::value == true</code> (for example, another <code>bind</code> expression was passed directly into the initial call to <code>bind</code>), then <code>bind</code> performs function composition: instead of passing the function object that the bind subexpression would return, the subexpression is invoked eagerly, and its return value is passed to the outer invokable object. If the <code>bind</code> subexpression has any placeholder arguments, they are shared with the outer <code>bind</code>.</p>\n</blockquote>\n\n<hr>\n\n<p>The only way to use <code>mem_fn</code> in this expression would be to pass it it's result to <code>bind</code> for the conveying of <code>placeholders::_2</code>: <code>bind(mem_fn(&amp;foo::r), placeholders::_2)</code> This works, but is an unnecessary step when the simple <code>bind(&amp;foo::r, placeholders::_2)</code> will suffice. Thus the best way to generate this functor is either with your proffered statement:</p>\n\n<pre><code>accumulate(cbegin(foos), cend(foos), 0, bind(plus&lt;int&gt;(), placeholders::_1, bind(&amp;foo::r, placeholders::_2)))\n</code></pre>\n\n<p>Or by using a lambda:</p>\n\n<pre><code>accumulate(cbegin(foos), cend(foos), 0, [](const int augend, const auto&amp; addend) { return augend + addend.r(); } )\n</code></pre>\n"}], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 45355245, "answer_count": 2, "score": 0, "last_activity_date": 1501169800, "creation_date": 1501082327, "question_id": 45331143, "link": "https://stackoverflow.com/questions/45331143/why-cant-i-use-a-mem-fn-functor-in-bind", "title": "Why Can&#39;t I use a mem_fn Functor in bind?", "body": "<p>I wanted to pass a <code>mem_fn</code> argument to <code>bind</code> but the compiler doesn't seem to allow it.</p>\n\n<p>For example this works fine:</p>\n\n<pre><code>accumulate(cbegin(foos), cend(foos), 0, bind(plus&lt;int&gt;(), placeholders::_1, bind(&amp;foo::r, placeholders::_2)));\n</code></pre>\n\n<p>But when I try to use the <code>mem_fn</code> functor I get about a page of errors:</p>\n\n<pre><code>accumulate(cbegin(foos), cend(foos), 0, bind(plus&lt;int&gt;(), placeholders::_1, mem_fn(&amp;foo::r)));\n</code></pre>\n\n<blockquote>\n  <p>/usr/include/c++/6/bits/stl_numeric.h: In instantiation of \u2018_Tp std::accumulate(_InputIterator, _InputIterator, _Tp, _BinaryOperation) [with _InputIterator = __gnu_cxx::__normal_iterator >; _Tp = int; _BinaryOperation = std::_Bind(std::_Placeholder&lt;1>, std::_Mem_fn)>]\u2019:<br>\n  prog.cpp:20:102:   required from here<br>\n  /usr/include/c++/6/bits/stl_numeric.h:154:22: error: no match for call to \u2018(std::_Bind(std::_Placeholder&lt;1>, std::_Mem_fn)>) (int&amp;, foo* const&amp;)\u2019</p>\n</blockquote>\n"}, {"tags": ["c++", "qt5"], "comments": [{"owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "edited": false, "score": 0, "creation_date": 1501132438, "post_id": 45331115, "comment_id": 77645252, "body": "You can change the way the UI class is handled. The setting is in C++ -&gt; Qt Class Generation, in Creator&#39;s settings. You have three choices, which are documented here: <a href=\"http://doc.qt.io/qt-5/designer-using-a-ui-file.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/designer-using-a-ui-file.html</a>"}, {"owner": {"reputation": 1680, "user_id": 654005, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0b769c1f2822f113fd4c4f26029a94bf?s=128&d=identicon&r=PG", "display_name": "Soccertrash", "link": "https://stackoverflow.com/users/654005/soccertrash"}, "reply_to_user": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "edited": false, "score": 0, "creation_date": 1501145777, "post_id": 45331115, "comment_id": 77652960, "body": "Ok, I think I have a solution. I just have to implement an own hierarchy with custom classes and pass the pointer to the generated UI class to this hierarchy. Nevertheless I think it is not the best practice that the deep hierarchy in the UI XML is flattened in the generated header file."}], "answers": [{"comments": [{"owner": {"reputation": 1680, "user_id": 654005, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0b769c1f2822f113fd4c4f26029a94bf?s=128&d=identicon&r=PG", "display_name": "Soccertrash", "link": "https://stackoverflow.com/users/654005/soccertrash"}, "edited": false, "score": 0, "creation_date": 1501094065, "post_id": 45331568, "comment_id": 77631820, "body": "Do you have a concrete example? Thanks"}, {"owner": {"reputation": 971, "user_id": 4124855, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zkqyU.jpg?s=128&g=1", "display_name": "IlBeldus", "link": "https://stackoverflow.com/users/4124855/ilbeldus"}, "reply_to_user": {"reputation": 1680, "user_id": 654005, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0b769c1f2822f113fd4c4f26029a94bf?s=128&d=identicon&r=PG", "display_name": "Soccertrash", "link": "https://stackoverflow.com/users/654005/soccertrash"}, "edited": false, "score": 0, "creation_date": 1501138610, "post_id": 45331568, "comment_id": 77648153, "body": "It&#39;s difficult to give examples here where no code is involved. You can have a look at <a href=\"http://doc.qt.io/qt-5/designer-using-custom-widgets.html#promoting-widgets\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/&hellip;</a> for a guided explanation"}], "tags": [], "owner": {"reputation": 971, "user_id": 4124855, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zkqyU.jpg?s=128&g=1", "display_name": "IlBeldus", "link": "https://stackoverflow.com/users/4124855/ilbeldus"}, "is_accepted": true, "score": 1, "last_activity_date": 1501083486, "creation_date": 1501083486, "answer_id": 45331568, "question_id": 45331115, "link": "https://stackoverflow.com/questions/45331115/qt5-designer-and-encapsulation/45331568#45331568", "title": "Qt5 Designer and Encapsulation", "body": "<p>Even though you can already \"intercept A\" in the current form. You can certainly separate A in a different section then add a QWidget in your main window, right click on it and promote it to being A</p>\n"}], "owner": {"reputation": 1680, "user_id": 654005, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0b769c1f2822f113fd4c4f26029a94bf?s=128&d=identicon&r=PG", "display_name": "Soccertrash", "link": "https://stackoverflow.com/users/654005/soccertrash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 45331568, "answer_count": 1, "score": -1, "last_activity_date": 1501083486, "creation_date": 1501082259, "question_id": 45331115, "link": "https://stackoverflow.com/questions/45331115/qt5-designer-and-encapsulation", "title": "Qt5 Designer and Encapsulation", "body": "<p>I've created a main window in Qt Desginer which has the following structure</p>\n\n<ul>\n<li>Ui_MainWindow\n\n<ul>\n<li>VerticalLayout\n\n<ul>\n<li>QTabWidget\n\n<ul>\n<li>Widget (*A)\n\n<ul>\n<li>QChart</li>\n<li>QChart</li>\n</ul></li>\n</ul></li>\n</ul></li>\n</ul></li>\n</ul>\n\n<p>The uic generates a header file \"ui_mainwindow.h\". This header files contains references on all the sub (subsub, subsubsub, ...) widgets. In my point of view this isn't good encapsulation. </p>\n\n<p>I found a way to set custom classes for the different widgets in the Qt Designer. \nSince I have to write these classes manually I have no access/references to the child widgets. I only can control the widget itself. Still all widgets are referenced in the MainWindow UI. </p>\n\n<p>Is there a way to generate separate classes for each (or some selected) widget? I'd like to intercept *A and access the child QCharts. </p>\n\n<p>Thank you,</p>\n"}, {"tags": ["c++", "armadillo"], "answers": [{"tags": [], "owner": {"reputation": 811, "user_id": 7674962, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/976a934a14c12c0b230ae2c25888d8b2?s=128&d=identicon&r=PG&f=1", "display_name": "kedarps", "link": "https://stackoverflow.com/users/7674962/kedarps"}, "is_accepted": true, "score": 1, "last_activity_date": 1501171083, "creation_date": 1501171083, "answer_id": 45355714, "question_id": 45331049, "link": "https://stackoverflow.com/questions/45331049/efficient-way-to-add-a-column-of-1s-in-armadillo-cube/45355714#45355714", "title": "Efficient way to add a column of 1s in armadillo Cube", "body": "<p>Unfortunately, <a href=\"http://arma.sourceforge.net/docs.html#join\" rel=\"nofollow noreferrer\"><code>join_slices</code></a>, only supports joining cubes with same number of rows and columns. Hence you need to loop through each slice and append a row-vector using <a href=\"http://arma.sourceforge.net/docs.html#insert\" rel=\"nofollow noreferrer\"><code>insert_rows</code></a>, like so:</p>\n\n<pre><code>#include&lt;armadillo&gt;\n\nusing namespace arma;\n\nuword nRows = 5;\nuword nCols = 3;\nuword nSlices = 3;\n\n/*original cube*/\ncube A(nRows  , nCols, nSlices, fill::randu);\n/*new cube*/\ncube B(nRows+1, nCols, nSlices, fill::zeros);\n/*row vector to append*/\nrowvec Z(nCols, fill::zeros);\n\n/*go through each slice and change mat*/\nfor (uword i = 0; i &lt; A.n_slices; i++)\n{\n    mat thisMat = A.slice(i);\n    thisMat.insert_rows(0, Z);\n    B.slice(i) = thisMat;\n}\n</code></pre>\n\n<p>This should give:</p>\n\n<pre><code>A: \n[cube slice 0]\n   0.0013   0.1741   0.9885\n   0.1933   0.7105   0.1191\n   0.5850   0.3040   0.0089\n   0.3503   0.0914   0.5317\n   0.8228   0.1473   0.6018\n\n[cube slice 1]\n   0.1662   0.8760   0.7797\n   0.4508   0.9559   0.9968\n   0.0571   0.5393   0.6115\n   0.7833   0.4621   0.2662\n   0.5199   0.8622   0.8401\n\n[cube slice 2]\n   0.3759   0.8376   0.5990\n   0.6772   0.4849   0.7350\n   0.0088   0.7437   0.5724\n   0.2759   0.4580   0.1516\n   0.5879   0.7444   0.4252\n\n\nB: \n[cube slice 0]\n        0        0        0\n   0.0013   0.1741   0.9885\n   0.1933   0.7105   0.1191\n   0.5850   0.3040   0.0089\n   0.3503   0.0914   0.5317\n   0.8228   0.1473   0.6018\n\n[cube slice 1]\n        0        0        0\n   0.1662   0.8760   0.7797\n   0.4508   0.9559   0.9968\n   0.0571   0.5393   0.6115\n   0.7833   0.4621   0.2662\n   0.5199   0.8622   0.8401\n\n[cube slice 2]\n        0        0        0\n   0.3759   0.8376   0.5990\n   0.6772   0.4849   0.7350\n   0.0088   0.7437   0.5724\n   0.2759   0.4580   0.1516\n   0.5879   0.7444   0.4252\n</code></pre>\n"}], "owner": {"reputation": 281, "user_id": 8253860, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/fHeI7.jpg?s=128&g=1", "display_name": "Ayush Chaurasia", "link": "https://stackoverflow.com/users/8253860/ayush-chaurasia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1220, "favorite_count": 0, "accepted_answer_id": 45355714, "answer_count": 1, "score": 2, "last_activity_date": 1501171083, "creation_date": 1501082104, "question_id": 45331049, "link": "https://stackoverflow.com/questions/45331049/efficient-way-to-add-a-column-of-1s-in-armadillo-cube", "title": "Efficient way to add a column of 1s in armadillo Cube", "body": "<p>I am trying to implement neural network in c++ using <code>armadillo</code> linear algebra library . I am using <code>Cube</code> for storing <code>inputs</code> and <code>weights</code> of the network and I want to be able to add <code>bias</code> unit in the 3d matrix. I came across many ways to do that which involve conversation from cube to matrix which seemed inefficient. So what is the most efficient way to add a column of zeros in the beginning of each matrix in the cube? </p>\n"}, {"tags": ["c++", "multithreading"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 8, "creation_date": 1501081901, "post_id": 45330946, "comment_id": 77623637, "body": "You don&#39;t use threads, <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/fork.html\" rel=\"nofollow noreferrer\"><code>fork</code></a> creates <i>a new process!</i>"}, {"owner": {"reputation": 11, "user_id": 6477967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RjYCo.jpg?s=128&g=1", "display_name": "Mario Lau", "link": "https://stackoverflow.com/users/6477967/mario-lau"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1501082732, "post_id": 45330946, "comment_id": 77624311, "body": "but when accessing the object at same address ,the result could be different?"}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1501083315, "post_id": 45330946, "comment_id": 77624785, "body": "&quot;fork() creates a new process by duplicating the calling process.&quot;  and &quot;The child process and the parent process run in separate memory spaces.  At the time of fork() both memory spaces have the same content.  memory writes, file mappings (mmap(2)), and unmappings  (munmap(2)) performed by one of the processes do not affect the       other."}], "owner": {"reputation": 11, "user_id": 6477967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RjYCo.jpg?s=128&g=1", "display_name": "Mario Lau", "link": "https://stackoverflow.com/users/6477967/mario-lau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1501081813, "creation_date": 1501081813, "question_id": 45330946, "link": "https://stackoverflow.com/questions/45330946/accessing-object-in-different-threads", "title": "accessing object in different threads", "body": "<p>two class here:</p>\n\n<pre><code>class TestClass\n{\n    public:\n        TestClass();\n        map&lt;int,int&gt; int_map;\n};\n\n\nTestClass::TestClass()\n{\n\n    printf(\"TestClass1 addr(%p) \\n\",this);\n}\nTestClass2::TestClass2(TestClass* tc){\n    tc1 = tc;\n    printf(\"TestClass2 get TestClass1 ,addr(%p) !\\n\",tc1);\n}\n\n\n\n\n\nclass TestClass2\n{\n    public:\n        TestClass2(TestClass* tc);\n        void Run();\n        TestClass* tc1;\n};\n\n\nvoid TestClass2::Run(){\n        int i = 0;\n        while(true){\n        tc1-&gt;int_map.insert(make_pair(i,1));\n        printf(\"TestClass2:size of TestClass1(%p) int_map is %d!\\n\",tc1,tc1-&gt;int_map.size());\n        sleep(2);\n        i++;\n    }\n}\n</code></pre>\n\n<p>and the main fun</p>\n\n<pre><code>int main()\n{\n    TestClass* tc1 = new TestClass();\n    printf(\"tc1 addr is %p!\\n\",tc1);\n    TestClass2* tc2 = new TestClass2(tc1);\n    pid_t pid = fork();\n    if(pid == 0){\n        while(1){\n            sleep(1);\n            printf(\"TestClass1 :%p int_map size %d!\\n\",tc1,tc1-&gt;int_map.size());\n        }\n    }else{\n        tc2-&gt;Run();\n    }\n\n}\n</code></pre>\n\n<p>the size of int_map in TestClass should be the same when it was printed in different thread.</p>\n\n<p>tc2->Run() print out the right value,\nbut i got 0 in child thread though tc1 points to the same address in two thread.</p>\n"}, {"tags": ["c++", "cuda", "reduce"], "answers": [{"comments": [{"owner": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 3, "creation_date": 1501096989, "post_id": 45334357, "comment_id": 77633389, "body": "Unless <code>sdata</code> has the <code>volatile</code> attribute, this code is unlikely to work as desired. There is an <i>implicit</i> data dependency between the statements in the <code>if</code>-block that the compiler cannot detect, and it will likely happily pull all the <code>sdata</code> reads to the start of the block to increase latency tolerance of the code. I would suggest using up-to-date documentation for CUDA, rather than outdated one."}, {"owner": {"reputation": 245, "user_id": 2229241, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/244f6f523a25d694c488dc68cfcc5e6b?s=128&d=identicon&r=PG", "display_name": "Moohasha", "link": "https://stackoverflow.com/users/2229241/moohasha"}, "edited": false, "score": 0, "creation_date": 1501097278, "post_id": 45334357, "comment_id": 77633549, "body": "@Johnathan Olson I implemented reduce6 as well and had the same problem unless I called __syncthreads() after each write to sdata."}, {"owner": {"reputation": 245, "user_id": 2229241, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/244f6f523a25d694c488dc68cfcc5e6b?s=128&d=identicon&r=PG", "display_name": "Moohasha", "link": "https://stackoverflow.com/users/2229241/moohasha"}, "reply_to_user": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 0, "creation_date": 1501097325, "post_id": 45334357, "comment_id": 77633581, "body": "@njuffa Adding <code>volatile</code> to sdata appears to have fixed it!  I don&#39;t know how old that documentation is, I just ran across it when looking for ways to optimize a reduce algorithm."}, {"owner": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "reply_to_user": {"reputation": 245, "user_id": 2229241, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/244f6f523a25d694c488dc68cfcc5e6b?s=128&d=identicon&r=PG", "display_name": "Moohasha", "link": "https://stackoverflow.com/users/2229241/moohasha"}, "edited": false, "score": 1, "creation_date": 1501097651, "post_id": 45334357, "comment_id": 77633796, "body": "@Moohasha This document seems to be from CUDA 1.1 beta, so likely dates to around late 2007."}, {"owner": {"reputation": 1066, "user_id": 6804401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21097b2dd60f0774b18668330994b52d?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Olson", "link": "https://stackoverflow.com/users/6804401/jonathan-olson"}, "edited": false, "score": 0, "creation_date": 1501102817, "post_id": 45334357, "comment_id": 77636664, "body": "thanks njuffa, edited the above"}, {"owner": {"reputation": 245, "user_id": 2229241, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/244f6f523a25d694c488dc68cfcc5e6b?s=128&d=identicon&r=PG", "display_name": "Moohasha", "link": "https://stackoverflow.com/users/2229241/moohasha"}, "edited": false, "score": 0, "creation_date": 1501180223, "post_id": 45334357, "comment_id": 77678374, "body": "Thanks for the link to the updated version.  I didn&#39;t see a date or version number in the PDF that I found and had no idea it was so old!"}], "tags": [], "owner": {"reputation": 1066, "user_id": 6804401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21097b2dd60f0774b18668330994b52d?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Olson", "link": "https://stackoverflow.com/users/6804401/jonathan-olson"}, "is_accepted": true, "score": 3, "last_activity_date": 1501102783, "last_edit_date": 1501102783, "creation_date": 1501092098, "answer_id": 45334357, "question_id": 45330814, "link": "https://stackoverflow.com/questions/45330814/cuda-optimization-not-working/45334357#45334357", "title": "CUDA Optimization Not Working", "body": "<p>You need to use the volatile keyword, as njuffa commented below.</p>\n\n<p>There's a much more recent version of the same document here.\n<a href=\"https://developer.download.nvidia.com/assets/cuda/files/reduction.pdf\" rel=\"nofollow noreferrer\">https://developer.download.nvidia.com/assets/cuda/files/reduction.pdf</a></p>\n\n<p>Here's the equivalent example #6 for reference.</p>\n\n<pre><code>template &lt;unsigned int blockSize&gt;\n__device__ void warpReduce(volatile int *sdata, unsigned int tid) {\n    if (blockSize &gt;= 64) sdata[tid] += sdata[tid + 32];\n    if (blockSize &gt;= 32) sdata[tid] += sdata[tid + 16];\n    if (blockSize &gt;= 16) sdata[tid] += sdata[tid + 8];\n    if (blockSize &gt;= 8) sdata[tid] += sdata[tid + 4];\n    if (blockSize &gt;= 4) sdata[tid] += sdata[tid + 2];\n    if (blockSize &gt;= 2) sdata[tid] += sdata[tid + 1];\n}\n\ntemplate &lt;unsigned int blockSize&gt;\n__global__ void reduce6(int *g_idata, int *g_odata, unsigned int n) {\n    extern __shared__ int sdata[];\n    unsigned int tid = threadIdx.x;\n    unsigned int i = blockIdx.x*(blockSize*2) + tid;\n    unsigned int gridSize = blockSize*2*gridDim.x;\n    sdata[tid] = 0;\n\n    while (i &lt; n) { sdata[tid] += g_idata[i] + g_idata[i+blockSize]; i += gridSize; }\n\n    __syncthreads();\n\n    if (blockSize &gt;= 512) { if (tid &lt; 256) { sdata[tid] += sdata[tid + 256]; } __syncthreads(); }\n    if (blockSize &gt;= 256) { if (tid &lt; 128) { sdata[tid] += sdata[tid + 128]; } __syncthreads(); }\n    if (blockSize &gt;= 128) { if (tid &lt; 64) { sdata[tid] += sdata[tid + 64]; } __syncthreads(); }\n\n    if (tid &lt; 32) warpReduce(sdata, tid);\n    if (tid == 0) g_odata[blockIdx.x] = sdata[0];\n}\n</code></pre>\n"}], "owner": {"reputation": 245, "user_id": 2229241, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/244f6f523a25d694c488dc68cfcc5e6b?s=128&d=identicon&r=PG", "display_name": "Moohasha", "link": "https://stackoverflow.com/users/2229241/moohasha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "closed_date": 1501140245, "accepted_answer_id": 45334357, "answer_count": 1, "score": 1, "last_activity_date": 1501102783, "creation_date": 1501081479, "last_edit_date": 1501088773, "question_id": 45330814, "link": "https://stackoverflow.com/questions/45330814/cuda-optimization-not-working", "closed_reason": "Duplicate", "title": "CUDA Optimization Not Working", "body": "<p>I found this PDF (<a href=\"http://developer.download.nvidia.com/compute/cuda/1.1-Beta/x86_website/projects/reduction/doc/reduction.pdf\" rel=\"nofollow noreferrer\">http://developer.download.nvidia.com/compute/cuda/1.1-Beta/x86_website/projects/reduction/doc/reduction.pdf</a>) that walks you through several ways to optimize a reduce operation in CUDA and I'm trying to follow along.  For reduction #5 it suggests unrolling the last 6 iterations of the loop with the following code:</p>\n\n<pre><code>if (tid &lt; 32)\n{\n  sdata[tid] += sdata[tid + 32];\n  sdata[tid] += sdata[tid + 16];\n  sdata[tid] += sdata[tid + 8];\n  sdata[tid] += sdata[tid + 4];\n  sdata[tid] += sdata[tid + 2];\n  sdata[tid] += sdata[tid + 1];\n}\n</code></pre>\n\n<p>The previous slide even says:</p>\n\n<blockquote>\n  <ul>\n  <li>As reduction proceeds, # \u201cactive\u201d threads decreases\n  \n  <ul>\n  <li>When s &lt;= 32, we have only one warp left</li>\n  </ul></li>\n  <li>Instructions are SIMD synchronous within a warp</li>\n  <li>That means when s &lt;= 32:\n  \n  <ul>\n  <li>We don\u2019t need to __syncthreads()</li>\n  <li>We don\u2019t need \u201cif (tid &lt; s)\u201d because it doesn\u2019t save any work</li>\n  </ul></li>\n  </ul>\n</blockquote>\n\n<p>However when I tried this approach I got a MUCH smaller sum from the reduction than from the previous approach.  If I add <strong>__syncthreads()</strong> after each write to shared memory then I get the correct result.</p>\n\n<p>Are the comments about <em>\"Instructions are SIMD synchronous within a warp\"</em> and <em>\"We don't need to __syncthreads()\"</em> not true?  Or is this an old document and the technology has changed?</p>\n"}, {"tags": ["c++", "visual-c++"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1501081941, "post_id": 45330733, "comment_id": 77623669, "body": "<a href=\"https://softwareengineering.stackexchange.com/\">softwareengineering.stackexchange.com</a> is probably a better fit for this question."}, {"owner": {"reputation": 3745, "user_id": 2092609, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gy7NA.jpg?s=128&g=1", "display_name": "mojo", "link": "https://stackoverflow.com/users/2092609/mojo"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1501082421, "post_id": 45330733, "comment_id": 77624070, "body": "Forcing the inclusion of symbols is the answer I really want, whether or not it&#39;s a great software engineering solution. I&#39;m open to other ideas, but that&#39;s only an expression of humility, not my primary focus."}, {"owner": {"reputation": 6198, "user_id": 839601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6db99aa846a8217f7e2aba6fa198e7c?s=128&d=identicon&r=PG", "display_name": "gnat", "link": "https://stackoverflow.com/users/839601/gnat"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1501082762, "post_id": 45330733, "comment_id": 77624336, "body": "@RSahu when referring other sites, it is often helpful to point that <a href=\"https://meta.stackexchange.com/tags/cross-posting/info\">cross-posting is frowned upon</a>"}, {"owner": {"reputation": 8555, "user_id": 638028, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/xj2Hg.png?s=128&g=1", "display_name": "Klitos Kyriacou", "link": "https://stackoverflow.com/users/638028/klitos-kyriacou"}, "edited": false, "score": 1, "creation_date": 1501083216, "post_id": 45330733, "comment_id": 77624717, "body": "Why <code>static</code>? That has internal linkage."}, {"owner": {"reputation": 3745, "user_id": 2092609, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gy7NA.jpg?s=128&g=1", "display_name": "mojo", "link": "https://stackoverflow.com/users/2092609/mojo"}, "reply_to_user": {"reputation": 8555, "user_id": 638028, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/xj2Hg.png?s=128&g=1", "display_name": "Klitos Kyriacou", "link": "https://stackoverflow.com/users/638028/klitos-kyriacou"}, "edited": false, "score": 0, "creation_date": 1501083321, "post_id": 45330733, "comment_id": 77624790, "body": "@KlitosKyriacou I didn&#39;t want the symbol name to have to be globally unique, so I thought making it static would allow multiple translation units to have the same symbol with different values."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 6198, "user_id": 839601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6db99aa846a8217f7e2aba6fa198e7c?s=128&d=identicon&r=PG", "display_name": "gnat", "link": "https://stackoverflow.com/users/839601/gnat"}, "edited": false, "score": 0, "creation_date": 1501085082, "post_id": 45330733, "comment_id": 77626122, "body": "@gnat, true. The intent of my suggestion was to delete from here and post it at other site. Too late now."}], "answers": [{"comments": [{"owner": {"reputation": 3745, "user_id": 2092609, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gy7NA.jpg?s=128&g=1", "display_name": "mojo", "link": "https://stackoverflow.com/users/2092609/mojo"}, "edited": false, "score": 0, "creation_date": 1501082394, "post_id": 45331140, "comment_id": 77624041, "body": "Our builds are not all &quot;official&quot; builds. Anyone can invoke the build script multiple times a day, and my goal is to include enough info in &quot;unofficial&quot; builds to go back to a set of close-enough source files."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 1, "creation_date": 1501083826, "post_id": 45331140, "comment_id": 77625167, "body": "<code>__attribute__((used))</code> doesn\u2019t say that the <i>attribute</i> it is used (it is the attribute); it says the <i>variable</i> is used. But GCC provides almost enough information by itself anyway."}, {"owner": {"reputation": 3745, "user_id": 2092609, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gy7NA.jpg?s=128&g=1", "display_name": "mojo", "link": "https://stackoverflow.com/users/2092609/mojo"}, "edited": false, "score": 0, "creation_date": 1501084467, "post_id": 45331140, "comment_id": 77625653, "body": "Does MSVC use <code>__attribute__</code> like gcc? I&#39;m stuck with MSVC in this case."}, {"owner": {"reputation": 75, "user_id": 6102204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8ea238071564e6a9ebfa5ffa90607c9?s=128&d=identicon&r=PG&f=1", "display_name": "Macxx", "link": "https://stackoverflow.com/users/6102204/macxx"}, "edited": false, "score": 0, "creation_date": 1501086123, "post_id": 45331140, "comment_id": 77626902, "body": "I haven&#39;t found anything like it for MSVC in the last 20 minutes.. :("}], "tags": [], "owner": {"reputation": 75, "user_id": 6102204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8ea238071564e6a9ebfa5ffa90607c9?s=128&d=identicon&r=PG&f=1", "display_name": "Macxx", "link": "https://stackoverflow.com/users/6102204/macxx"}, "is_accepted": false, "score": 1, "last_activity_date": 1501083886, "last_edit_date": 1501083886, "creation_date": 1501082304, "answer_id": 45331140, "question_id": 45330733, "link": "https://stackoverflow.com/questions/45330733/embed-file-info-char-array-into-compiled-binary/45331140#45331140", "title": "Embed File Info (char array) Into Compiled Binary", "body": "<p>What about SVN tags? You could tag each build..</p>\n\n<hr>\n\n<p><em>UPDATE</em>:\nMaybe do something like that:</p>\n\n<pre><code>#ifndef SRC_ID\n  #ifdef __GNUC__\n    #define SRC_ID(X, Y) static const char* const __attribute__((used)) X = Y\n  #else\n    #define SRC_ID(X, Y) static const char* const X = Y\n  #endif\n#endif\n\nSRC_ID(build_id, \"SOMETHING TO IDENTIFY YOUR BUILD\");\n</code></pre>\n\n<p>The <code>__attribute__((used))</code> <em>variable attribute</em> is used to signal the linker that this variable is used even if it appears to be unused:</p>\n\n<blockquote>\n  <p>This attribute, attached to a variable with static storage, means that\n  the variable must be emitted even if it appears that the variable is\n  not referenced.</p>\n  \n  <p>Source: <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Common-Variable-Attributes.html#Common-Variable-Attributes\" rel=\"nofollow noreferrer\">gnu.org</a></p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 3745, "user_id": 2092609, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gy7NA.jpg?s=128&g=1", "display_name": "mojo", "link": "https://stackoverflow.com/users/2092609/mojo"}, "edited": false, "score": 0, "creation_date": 1501087032, "post_id": 45331585, "comment_id": 77627514, "body": "When I don&#39;t declare it <code>static</code>, I still get linker errors attempting to export/include the name. I don&#39;t understand why internal linkage would would suggest that the compiler should leave it out of the object file, though. That would be like declaring something as &quot;completely useless and unneccessary.&quot;"}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "reply_to_user": {"reputation": 3745, "user_id": 2092609, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gy7NA.jpg?s=128&g=1", "display_name": "mojo", "link": "https://stackoverflow.com/users/2092609/mojo"}, "edited": false, "score": 0, "creation_date": 1501088434, "post_id": 45331585, "comment_id": 77628410, "body": "Internal linkage means that nobody <i>else</i> will use it. Then you don\u2019t use it. If you don\u2019t use something, and nobody else uses it, it is unused and is just adding bloat to the object file. In this case, that\u2019s what you want, but usually it can just be optimized out. I can\u2019t reproduce the linker error you mention; can you give more details about it?"}], "tags": [], "owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "is_accepted": true, "score": 3, "last_activity_date": 1501083999, "last_edit_date": 1501083999, "creation_date": 1501083527, "answer_id": 45331585, "question_id": 45330733, "link": "https://stackoverflow.com/questions/45330733/embed-file-info-char-array-into-compiled-binary/45331585#45331585", "title": "Embed File Info (char array) Into Compiled Binary", "body": "<p>The problem is the keyword <code>static</code>. That gives the variable <a href=\"http://en.cppreference.com/w/cpp/language/storage_duration#Linkage\" rel=\"nofollow noreferrer\"><em>internal linkage</em></a>, which means \u201cThis will only be used in this file; feel free to not include it in the compiled object file or otherwise do optimizations to it\u201d. If you remove that keyword, the compiler will include it in the object file, and you can use Force Symbol Reference to keep it.</p>\n\n<p>EDIT: Incorrect reference to <code>extern</code>, which is for declarations, not definitions.</p>\n\n<p>EDIT 2: Another way to force the symbol reference, which works for other compilers and might be more useful, is to actually reference it. Add a command line flag <code>--build-info</code> which prints the string and exits, or print it on startup if you have the verbose flag set, or something like that. Then you don\u2019t need to inspect the binary and you <em>know</em> the string won\u2019t be optimized away.</p>\n"}], "owner": {"reputation": 3745, "user_id": 2092609, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gy7NA.jpg?s=128&g=1", "display_name": "mojo", "link": "https://stackoverflow.com/users/2092609/mojo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 45331585, "answer_count": 2, "score": 2, "last_activity_date": 1501083999, "creation_date": 1501081294, "last_edit_date": 1501082716, "question_id": 45330733, "link": "https://stackoverflow.com/questions/45330733/embed-file-info-char-array-into-compiled-binary", "title": "Embed File Info (char array) Into Compiled Binary", "body": "<h1>Is there a way to embed a (per translation unit) string into an optimized binary?</h1>\n\n<p>In our development environment, it is fairly simple to produce a build. It happens that customers sometimes end up with a custom build, and when they experience a problem with that build, it's difficult to figure out what code base that binary came from.</p>\n\n<p><em>I'm attempting to find a reasonable strategy to be able to reconstruct the build environment when only a forensic analysis of the binaries is possible.</em> </p>\n\n<h3>Embed version info into each translation unit</h3>\n\n<p>One idea I had was to embed version info into each cpp file. Something like</p>\n\n<pre><code>static const char *__FILEVERSIONINFO = __FILE__ \"___$Revision$___Build:\" PRODUCT_VER_STR;\n</code></pre>\n\n<p>and then add <code>svn:keywords</code> property to the file so that when the build was made, I could at least know what SVN revision the file was at. This wouldn't tell me if it had been modified from that revision, but it would at least enable me to get close.</p>\n\n<p>The down side of this is that I cannot get these symbols into a Release build. Because they're not referenced, they get optimized away (and I want to keep that optimization as a global setting). I attempted to <a href=\"https://docs.microsoft.com/en-us/cpp/build/reference/include-force-symbol-references\" rel=\"nofollow noreferrer\" title=\"Force Symbol References\">Force Symbol References</a> (<code>__FILEVERSIONINFO</code> as the value for \"Force Symbol References\" in the linker settings), but the linker complained that it couldn't find the symbol.</p>\n\n<pre><code>error LNK2001: unresolved external symbol __FILEVERSIONINFO\n</code></pre>\n\n<p><code>dumpbin</code> listed the symbol in the object file as</p>\n\n<pre><code>09E 00000004 SECT5  notype       Static       | ___FILEVERSIONINFO\n</code></pre>\n\n<p>but using this name in \"Force Symbol References\" didn't work either.</p>\n\n<p>Microsoft's documentation doesn't actually give any examples of its use, and my google-fu didn't turn up anything pertinent.</p>\n\n<p>I tried using a #pragma to force its export,</p>\n\n<pre><code>__pragma(comment (linker, \"/export:__FILEVERSIONINFO\"))\n</code></pre>\n\n<p>but got the same error from the linker. <strong>How do I specify the name of this symbol?</strong></p>\n\n<p>It would be convenient if I didn't have to randomize/uniquify the name of the symbol for each translation unit, but I don't know of the <code>/INCLUDE</code> argument to the linker is able to include <em>all</em> symbols with the same name.</p>\n\n<p>I don't actually care if the symbol itself is accessible, I was just wanting to be able to suck the strings out of a binary and grep for \"Revision\" to see what revision the binary files were at/near at the time of the build.</p>\n\n<h3>Embed a report into the binary</h3>\n\n<p>It seems possible to construct a report (e.g. <code>svn diff</code>) and embed some form of that into the binary. This would have the advantage of encapsulating any uncommitted, source-level changes made to the files/project).</p>\n\n<p>This seems a little tedious, but it could be done.</p>\n\n<h3>Other solutions?</h3>\n\n<p>Changing how the developers/support people do builds is not a feasible option for us. I'm looking for something I can do that will not depend on them reading more documentation and following procedural rules. I realize this is not ideal, but adding more human-driven policies just isn't worth the cost.</p>\n\n<p>For all practical purposes that I forsee, I'm probably only going to use this information to look for problems in a specific revision of a source file, not actually attempt to patch a custom build.</p>\n\n<p><strong>Are there better ways to tag/mark binaries that will enable me to locate a close revision of the source file(s) in question for examination?</strong></p>\n"}, {"tags": ["c++", "multithreading", "qt", "callback", "qtwebengine"], "answers": [{"comments": [{"owner": {"reputation": 608, "user_id": 3144058, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c414c912876ebb8054a493a1660d0fd1?s=128&d=identicon&r=PG&f=1", "display_name": "zupazt3", "link": "https://stackoverflow.com/users/3144058/zupazt3"}, "edited": false, "score": 0, "creation_date": 1501097174, "post_id": 45331583, "comment_id": 77633489, "body": "Thanks, it looks good, but doesn&#39;t seem to work. It&#39;s getting stack in loop.exec(); - this doesn&#39;t finish. I changed view to be a pointer (and not reference) but that shouldn&#39;t matter."}, {"owner": {"reputation": 2789, "user_id": 1217285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1t2xu.jpg?s=128&g=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/1217285/dmitry"}, "reply_to_user": {"reputation": 608, "user_id": 3144058, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c414c912876ebb8054a493a1660d0fd1?s=128&d=identicon&r=PG&f=1", "display_name": "zupazt3", "link": "https://stackoverflow.com/users/3144058/zupazt3"}, "edited": false, "score": 0, "creation_date": 1501127867, "post_id": 45331583, "comment_id": 77643812, "body": "Replaced the example with the one which I have tested."}, {"owner": {"reputation": 608, "user_id": 3144058, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c414c912876ebb8054a493a1660d0fd1?s=128&d=identicon&r=PG&f=1", "display_name": "zupazt3", "link": "https://stackoverflow.com/users/3144058/zupazt3"}, "edited": false, "score": 0, "creation_date": 1501144082, "post_id": 45331583, "comment_id": 77651837, "body": "It works perfectly fine! Thank you very much. I have also done this using std mutex and cond. var and blocking queue. But I had to spawn new thread because, in fact, thread calling runJavaScript and thread executing callback are the same threads... I checked this using std::this_thread::id - and those are not different processes (as you&#39;ve written) but exactly the same thread. Anyway your solution is truly synchronous so exactly what I needed. Cheers!"}, {"owner": {"reputation": 2789, "user_id": 1217285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1t2xu.jpg?s=128&g=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/1217285/dmitry"}, "reply_to_user": {"reputation": 608, "user_id": 3144058, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c414c912876ebb8054a493a1660d0fd1?s=128&d=identicon&r=PG&f=1", "display_name": "zupazt3", "link": "https://stackoverflow.com/users/3144058/zupazt3"}, "edited": false, "score": 2, "creation_date": 1501144596, "post_id": 45331583, "comment_id": 77652162, "body": "I did not say the callback is executed in a different process. I said that <b>JavaScript</b> code (that being the argument of <code>runJavaScript</code>) is executed (really JIT-compiled and executed) in a different process called <code>QWebEngineProcess</code>."}], "tags": [], "owner": {"reputation": 2789, "user_id": 1217285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1t2xu.jpg?s=128&g=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/1217285/dmitry"}, "is_accepted": true, "score": 6, "last_activity_date": 1501127824, "last_edit_date": 1501127824, "creation_date": 1501083524, "answer_id": 45331583, "question_id": 45330481, "link": "https://stackoverflow.com/questions/45330481/qtwebengine-synchronously-execute-javascript-to-read-function-result/45331583#45331583", "title": "QtWebEngine - synchronously execute JavaScript to read function result", "body": "<p>The callback is asynchronous because the JavaScript execution occurs not only in another thread but in another <em>process</em>. So there is no way to make it fully synchronous.</p>\n\n<p>The best possible solution would be to migrate your C++ code to work asynchronously. If you can't do that, the only feasible solution is to use <code>QEventLoop</code>, somewhat like this:</p>\n\n<pre><code>void ranJavaScript()\n{\n    emit notifyRanJavaScript();\n}\n\nQString get()\n{\n    QString result;\n    QEventLoop loop;\n    QObject::connect(this, SIGNAL(notifyRanJavaScript()), &amp;loop, SLOT(quit()));\n    view-&gt;page()-&gt;runJavaScript(\"test();\", [this](const QVariant &amp;v)\n        {\n            result = v.toString();\n            this.ranJavaScript();\n        });\n\n    loop.exec();\n    return result;\n}\n</code></pre>\n\n<p>However, note that this example is oversimplified for a real-world usage: you need to ensure the JavaScript was not ran before the event loop is started. The most proper way to do that would involve implementing a proper slot instead of a lambda + factoring out the call to <code>view-&gt;page()-&gt;runJavaScript()</code> into another slot which would be called asynchronously <em>after</em> starting the event loop. It is a lot of glue code for such a seemingly simple task but that's what it takes. Here's an example:</p>\n\n<p><strong>MainWindow.h</strong></p>\n\n<pre><code>#ifndef TMP_MAIN_WINDOW_H\n#define TMP_MAIN_WINDOW_H\n\n#include &lt;QMainWindow&gt;\n#include &lt;QVariant&gt;\n\nclass QWebEngineView;\nclass QPushButton;\n\nclass MainWindow : public QMainWindow\n{\n    Q_OBJECT\npublic:\n    MainWindow(QWidget * parent = 0);\n\n    QString get();\n\n    void onScriptEnded(const QVariant &amp; data);\n\nQ_SIGNALS:\n    void notifyRanJavaScript();\n\nprivate Q_SLOTS:\n    void onButtonPressed();\n\n    void startScript();\n\nprivate:\n    QWebEngineView *    m_view;\n    QPushButton *       m_button;\n    QString             m_scriptResult;\n};\n\n#endif // TMP_MAIN_WINDOW_H\n</code></pre>\n\n<p><strong>MainWindow.cpp</strong></p>\n\n<pre><code>#include \"MainWindow.h\"\n#include &lt;QWebEngineView&gt;\n#include &lt;QPushButton&gt;\n#include &lt;QHBoxLayout&gt;\n#include &lt;QVBoxLayout&gt;\n#include &lt;QMessageBox&gt;\n#include &lt;QEventLoop&gt;\n#include &lt;QDebug&gt;\n#include &lt;QTimer&gt;\n\nMainWindow::MainWindow(QWidget * parent) :\n    QMainWindow(parent)\n{\n    m_view = new QWebEngineView;\n    QWebEnginePage * page = new QWebEnginePage(m_view);\n    m_view-&gt;setPage(page);\n\n    QString html = QStringLiteral(\"&lt;!DOCTYPE HTML PUBLIC \\\"-//W3C//DTD HTML 4.01//EN\\\"\"\n                                  \"\\\"http://www.w3.org/TR/html4/strict.dtd\\\"&gt;&lt;html&gt;\"\n                                  \"&lt;head&gt;&lt;h3&gt;head&lt;/h3&gt;\\n&lt;/head&gt;\"\n                                  \"&lt;script type=\\\"text/javascript\\\"&gt;function test() { return \\\"A!\\\"; }&lt;/script&gt;\"\n                                  \"&lt;body&gt;text\\n&lt;/body&gt;&lt;/html&gt;\");\n    m_view-&gt;page()-&gt;setHtml(html);\n\n    m_button = new QPushButton;\n    m_button-&gt;setMinimumWidth(35);\n    m_button-&gt;setText(QStringLiteral(\"Test\"));\n    QObject::connect(m_button, SIGNAL(pressed()), this, SLOT(onButtonPressed()));\n\n    QHBoxLayout * buttonLayout = new QHBoxLayout;\n    buttonLayout-&gt;addWidget(m_button);\n    buttonLayout-&gt;addStretch();\n\n    QVBoxLayout * viewLayout = new QVBoxLayout;\n    viewLayout-&gt;addLayout(buttonLayout);\n    viewLayout-&gt;addWidget(m_view);\n\n    QWidget * widget = new QWidget(this);\n    widget-&gt;setLayout(viewLayout);\n\n    setCentralWidget(widget);\n}\n\nQString MainWindow::get()\n{\n    QEventLoop loop;\n    QObject::connect(this, SIGNAL(notifyRanJavaScript()), &amp;loop, SLOT(quit()));\n\n    // Schedule the slot to run in 0 seconds but not right now\n    QTimer::singleShot(0, this, SLOT(startScript()));\n\n    // The event loop would block until onScriptEnded slot is executed\n    loop.exec();\n\n    // If we got here, the script has been executed and the result was saved in m_scriptResult\n    return m_scriptResult;\n}\n\nvoid MainWindow::onScriptEnded(const QVariant &amp; data)\n{\n    qDebug() &lt;&lt; QStringLiteral(\"Script ended: \") &lt;&lt; data;\n    m_scriptResult = data.toString();\n    emit notifyRanJavaScript();\n}\n\nvoid MainWindow::onButtonPressed()\n{\n    QString str = get();\n    QMessageBox::information(this, QStringLiteral(\"Script result\"), str,\n                             QMessageBox::StandardButton::Ok);\n}\n\nstruct Functor\n{\n    Functor(MainWindow &amp; window) : m_window(window) {}\n    void operator()(const QVariant &amp; data)\n    {\n        m_window.onScriptEnded(data);\n    }\n    MainWindow &amp; m_window;\n};\n\nvoid MainWindow::startScript()\n{\n    qDebug() &lt;&lt; QStringLiteral(\"Start script\");\n    m_view-&gt;page()-&gt;runJavaScript(QStringLiteral(\"test();\"), Functor(*this));\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 8941450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bdedf2d8489c4bc0cf9c0c2390a7a41?s=128&d=identicon&r=PG&f=1", "display_name": "Dimitar Dobrev", "link": "https://stackoverflow.com/users/8941450/dimitar-dobrev"}, "is_accepted": false, "score": 1, "last_activity_date": 1510692409, "creation_date": 1510692409, "answer_id": 47294888, "question_id": 45330481, "link": "https://stackoverflow.com/questions/45330481/qtwebengine-synchronously-execute-javascript-to-read-function-result/47294888#47294888", "title": "QtWebEngine - synchronously execute JavaScript to read function result", "body": "<p>Dmitry's solution only works partially, unfortunately. In his example the code is invoked upon pressing a button. However, if the same code is moved to execute while the window is loading, the slot for the finished script (onScriptEnded) is never called. To fix this, I had to wrap the call to the evaluation of JS itself (called evaluateJavaScript in my project) in another QTimer::singleShot:</p>\n\n<pre><code>QTimer::singleShot(0, this, [&amp;] { evaluateJavaScript(); });\n</code></pre>\n\n<p>Unfortunately, in my real project I have many calls, often one evaluation waiting for another before it to finish. It's practically impossible to use this every single time so I still look for a solution.</p>\n"}, {"tags": [], "owner": {"reputation": 347, "user_id": 4988914, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0a579873a7c793af8c95a6cbf93a00a9?s=128&d=identicon&r=PG&f=1", "display_name": "peter", "link": "https://stackoverflow.com/users/4988914/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1520833092, "creation_date": 1520833092, "answer_id": 49228745, "question_id": 45330481, "link": "https://stackoverflow.com/questions/45330481/qtwebengine-synchronously-execute-javascript-to-read-function-result/49228745#49228745", "title": "QtWebEngine - synchronously execute JavaScript to read function result", "body": "<p><a href=\"http://myprogrammingnotes.com/communication-c-javascript-qt-webengine.html\" rel=\"nofollow noreferrer\">C++ invokes javascript function</a></p>\n\n<p>This is much straightforward compared with invoking C++ function from js. Just use runJavaScript passing the function as the parameter as follows:</p>\n\n<pre><code>view-&gt;page()-&gt;runJavaScript(\"jsfun();\",[this](const QVariant &amp;v) { qDebug()&lt;&lt;v.toString();});\n</code></pre>\n\n<p>It assumes the jsfun is already defined on your web page, otherwise, you have to define it in the string parameter. The return value is asynchronously passed to the lambda expression as the parameter v.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8699689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68827e4643778662f481c0b353b0fdd1?s=128&d=identicon&r=PG&f=1", "display_name": "u-235", "link": "https://stackoverflow.com/users/8699689/u-235"}, "is_accepted": false, "score": 0, "last_activity_date": 1618768899, "creation_date": 1618768899, "answer_id": 67151809, "question_id": 45330481, "link": "https://stackoverflow.com/questions/45330481/qtwebengine-synchronously-execute-javascript-to-read-function-result/67151809#67151809", "title": "QtWebEngine - synchronously execute JavaScript to read function result", "body": "<p>In the <a href=\"https://github.com/gyunaev/kchmviewer/\" rel=\"nofollow noreferrer\">kchmviewer</a> project, I found a very easy way to wait for the result of the runJavaScript function. The <a href=\"https://github.com/gyunaev/kchmviewer/blob/3876af816c58c6402612c5ecd4b5d18e0e1d9751/src/viewwindow_webengine.cpp#L198\" rel=\"nofollow noreferrer\">following code</a> is part of the <a href=\"https://github.com/gyunaev/kchmviewer/blob/3876af816c58c6402612c5ecd4b5d18e0e1d9751/src/viewwindow_webengine.h\" rel=\"nofollow noreferrer\">ViewWindow class</a> which inherits from QWebEngineView.</p>\n<pre><code>int ViewWindow::getScrollbarPosition()\n{\n    QAtomicInt value = -1;\n\n    page()-&gt;runJavaScript(&quot;document.body.scrollTop&quot;, [&amp;value](const QVariant &amp;v)\n        {\n            qDebug( &quot;value retrieved: %d\\n&quot;, v.toInt());\n            value = v.toInt();\n        });\n\n    while (value == -1)\n    {\n        QApplication::processEvents();\n    }\n\n    qDebug( &quot;scroll value %d&quot;, value.load() );\n    return value;\n}\n</code></pre>\n"}], "owner": {"reputation": 608, "user_id": 3144058, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c414c912876ebb8054a493a1660d0fd1?s=128&d=identicon&r=PG&f=1", "display_name": "zupazt3", "link": "https://stackoverflow.com/users/3144058/zupazt3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6082, "favorite_count": 2, "accepted_answer_id": 45331583, "answer_count": 4, "score": 10, "last_activity_date": 1618768899, "creation_date": 1501080667, "question_id": 45330481, "link": "https://stackoverflow.com/questions/45330481/qtwebengine-synchronously-execute-javascript-to-read-function-result", "title": "QtWebEngine - synchronously execute JavaScript to read function result", "body": "<p>I have the following method in one of my C++ classes (using QtWebEngine):</p>\n\n<pre><code>    QString get()\n    {\n        QString result;\n\n        view-&gt;page()-&gt;runJavaScript(\"test();\", [this](const QVariant &amp;v)\n            {\n                result = v.toString();\n            });\n\n        return result;\n    }\n</code></pre>\n\n<p>It is to execute <code>test()</code> JS function and return the result of this invocation.</p>\n\n<p>Unfortunately, the callback is asynchronous and the program crashes. How can I make it work?</p>\n"}, {"tags": ["c++", "crash", "libraries", "new-operator", "delete-operator"], "comments": [{"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1501081872, "post_id": 45330453, "comment_id": 77623613, "body": "If you check the call stack of the crash, you can check out the runtime delete operator&#39;s signature. Maybe you haven&#39;t overridden all possible new/delete functions."}, {"owner": {"reputation": 854, "user_id": 973357, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c45d60e9b84bf85cafa58586f47114bd?s=128&d=identicon&r=PG&f=1", "display_name": "Antoine", "link": "https://stackoverflow.com/users/973357/antoine"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1501082838, "post_id": 45330453, "comment_id": 77624394, "body": "Yes I added the callstacks. And I added the files of new and delete calls. I don&#39;t understand why the custom new is called, and the custom delete not.  I guess the runtime new op is compiled in my application (in my Application64_d.dll), but why the runtime delete op not?"}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1501082996, "post_id": 45330453, "comment_id": 77624529, "body": "Have you overridden <code>delete[]</code>?"}, {"owner": {"reputation": 854, "user_id": 973357, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c45d60e9b84bf85cafa58586f47114bd?s=128&d=identicon&r=PG&f=1", "display_name": "Antoine", "link": "https://stackoverflow.com/users/973357/antoine"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1501083343, "post_id": 45330453, "comment_id": 77624810, "body": "Yes i updated the post"}, {"owner": {"reputation": 854, "user_id": 973357, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c45d60e9b84bf85cafa58586f47114bd?s=128&d=identicon&r=PG&f=1", "display_name": "Antoine", "link": "https://stackoverflow.com/users/973357/antoine"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1501083626, "post_id": 45330453, "comment_id": 77625032, "body": "Should I be surprised the custom new op is called? Or the custom delete op is not called?"}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 1, "creation_date": 1501083699, "post_id": 45330453, "comment_id": 77625089, "body": "Maybe it is because they&#39;re inline? What happens if you remove inline?"}, {"owner": {"reputation": 2602, "user_id": 4341534, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/001c92ef74cb305ff8318eebeaa04ab3?s=128&d=identicon&r=PG&f=1", "display_name": "patatahooligan", "link": "https://stackoverflow.com/users/4341534/patatahooligan"}, "edited": false, "score": 0, "creation_date": 1501083884, "post_id": 45330453, "comment_id": 77625216, "body": "Maybe the library you are using is inconsistently using <code>new</code>, <code>::new</code>, <code>delete</code> and <code>::delete</code>. See <a href=\"https://stackoverflow.com/questions/14147029/what-does-new-mean\">stackoverflow.com/questions/14147029/what-does-new-mean</a>"}, {"owner": {"reputation": 854, "user_id": 973357, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c45d60e9b84bf85cafa58586f47114bd?s=128&d=identicon&r=PG&f=1", "display_name": "Antoine", "link": "https://stackoverflow.com/users/973357/antoine"}, "edited": false, "score": 0, "creation_date": 1501084622, "post_id": 45330453, "comment_id": 77625795, "body": "I don&#39;t think so. Here is the accused class : <a href=\"https://github.com/Microsoft/cpprestsdk/blob/master/Release/include/cpprest/producerconsumerstream.h#L419\" rel=\"nofollow noreferrer\">github.com/Microsoft/cpprestsdk/blob/master/Release/include/&zwnj;&#8203;&hellip;</a> and particuliary the <code>m_data</code> member"}, {"owner": {"reputation": 854, "user_id": 973357, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c45d60e9b84bf85cafa58586f47114bd?s=128&d=identicon&r=PG&f=1", "display_name": "Antoine", "link": "https://stackoverflow.com/users/973357/antoine"}, "edited": false, "score": 0, "creation_date": 1501084765, "post_id": 45330453, "comment_id": 77625895, "body": "As you can see, this library (cpprestsdk) is massively templated. But my source code when I use this library doesn&#39;t include my custom new/delete operators."}, {"owner": {"reputation": 854, "user_id": 973357, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c45d60e9b84bf85cafa58586f47114bd?s=128&d=identicon&r=PG&f=1", "display_name": "Antoine", "link": "https://stackoverflow.com/users/973357/antoine"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1501691461, "post_id": 45330453, "comment_id": 77893390, "body": "@geza The use of inline keyword changes the behavior for <code>new[]</code> and <code>delete[]</code> (No changes for <code>new</code> and <code>delete</code>). And there is a bug in Visual Studio 2013 <i>(and older)</i> on default new/delete operators compilation behaviors. Thank you for your help."}], "answers": [{"tags": [], "owner": {"reputation": 854, "user_id": 973357, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c45d60e9b84bf85cafa58586f47114bd?s=128&d=identicon&r=PG&f=1", "display_name": "Antoine", "link": "https://stackoverflow.com/users/973357/antoine"}, "is_accepted": true, "score": 0, "last_activity_date": 1514909290, "last_edit_date": 1514909290, "creation_date": 1501691350, "answer_id": 45466272, "question_id": 45330453, "link": "https://stackoverflow.com/questions/45330453/new-delete-mismatch/45466272#45466272", "title": "new / delete mismatch", "body": "<p>In Visual Studio 2013 <em>(and older)</em>, the default <code>delete[]</code> operator is not built in the binary of the application <em>(as opposed to the default <code>new</code>, <code>new[]</code> and <code>delete</code> operators)</em>. It is called directly from msvcr110d.dll.</p>\n\n<p>When the <strong>inline</strong> keyword is used, the replaced <code>new[]</code> and <code>delete[]</code> operators are not used as default in the whole application <em>(as opposed to the <code>new</code> and <code>delete</code> operators)</em> unless we explicitly include the header.<br>\nSo the default <code>new[]</code> operator <em>(built in the binary of the application)</em> calls the replaced <code>new</code> operator.<br>\nBut the default <code>delete[]</code> operator <em>(called directly from msvcr110d.dll)</em> doesn't find the replaced <code>delete</code> operator and use the default <code>delete</code> operator <em>(from msvcr110d.dll)</em>.</p>\n\n<p>For my solution, I removed the <strong>inline</strong> keyword and put the operators in a source file.<br>\nThis bug has been fixed and should not appear in Visual Studio 2015 <em>(and newer)</em>.</p>\n"}], "owner": {"reputation": 854, "user_id": 973357, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c45d60e9b84bf85cafa58586f47114bd?s=128&d=identicon&r=PG&f=1", "display_name": "Antoine", "link": "https://stackoverflow.com/users/973357/antoine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 611, "favorite_count": 0, "accepted_answer_id": 45466272, "answer_count": 1, "score": 0, "last_activity_date": 1514909290, "creation_date": 1501080592, "last_edit_date": 1501754664, "question_id": 45330453, "link": "https://stackoverflow.com/questions/45330453/new-delete-mismatch", "title": "new / delete mismatch", "body": "<p>In my library (which replace global <code>new</code>/<code>delete</code> operators), I use another external library <em>(casablanca pplx)</em>.\nThis external library doesn't include the replaced <code>new</code>/<code>delete</code> operators (I checked by using the show includes option of Visual studio).</p>\n\n<p>Some objects of this external library <em>(like streams or exceptions)</em> are created by using the default <code>new[]</code> operator <em>(which calls my replaced <code>new</code> operator)</em>, and are destroyed by using the default <code>delete[]</code> operator <em>(which doesn't call my replaced <code>delete</code> operator)</em>. This results in a <strong>general protection fault</strong>.</p>\n\n<p>What can explain that behavior?</p>\n\n<p><em>I use Visual Studio 2012.</em></p>\n\n<p>Example source code (get google.fr by using the casablanca http client):</p>\n\n<pre><code>web::http::client::http_client_config config;\nconfig.set_timeout(std::chrono::seconds(10));\nutility::string_t uri = L\"http://www.google.fr\";\nweb::http::client::http_client client(uri, config);\nweb::http::http_request request(web::http::methods::GET);\n\nclient.request(request).then([uri](web::http::http_response response ) {\n    unsigned short statusCode = response.status_code();\n    if (statusCode == 200)\n    {\n        concurrency::streams::stringstreambuf stream;\n        return response.body().read_to_end(stream).then([stream](size_t) {\n            std::string responseText = stream.collection();\n        }); // crash here (stream destructor)\n    }\n});\n</code></pre>\n\n<p>New callstack :</p>\n\n<pre><code>Application64_d.dll!operator new(unsigned __int64 iSize) Line 262   C++ // My replaced new operator\nApplication64_d.dll!operator new[](unsigned __int64 count) Line 7   C++ // C:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\VC\\crt\\src\\newaop.cpp\nApplication64_d.dll!Concurrency::streams::details::basic_producer_consumer_buffer&lt;unsigned char&gt;::_block::_block(unsigned __int64 size) Line 437    C++\nApplication64_d.dll!std::_Ref_count_obj&lt;Concurrency::streams::details::basic_producer_consumer_buffer&lt;unsigned char&gt;::_block&gt;::_Ref_count_obj&lt;Concurrency::streams::details::basic_producer_consumer_buffer&lt;unsigned char&gt;::_block&gt;&lt;unsigned __int64 &amp; __ptr64&gt;(unsigned __int64 &amp; _V0) Line 873    C++\nApplication64_d.dll!std::make_shared&lt;Concurrency::streams::details::basic_producer_consumer_buffer&lt;unsigned char&gt;::_block,unsigned __int64 &amp; __ptr64&gt;(unsigned __int64 &amp; _V0) Line 972  C++\nApplication64_d.dll!Concurrency::streams::details::basic_producer_consumer_buffer&lt;unsigned char&gt;::_alloc(unsigned __int64 count) Line 165   C++\nApplication64_d.dll!Concurrency::streams::details::streambuf_state_manager&lt;unsigned char&gt;::alloc(unsigned __int64 count) Line 651   C++\nApplication64_d.dll!Concurrency::streams::streambuf&lt;unsigned char&gt;::alloc(unsigned __int64 count) Line 993  C++\nApplication64_d.dll!web::http::client::details::winhttp_client::completion_callback(void * hRequestHandle, unsigned __int64 context, unsigned long statusCode, void * statusInfo, unsigned long statusInfoLength) Line 1167 C++\nwinhttp.dll!00007ff83259db67()  Unknown\nwinhttp.dll!00007ff83259d87a()  Unknown\nwinhttp.dll!00007ff832599fe5()  Unknown\nApplication64_d.dll!web::http::client::details::winhttp_client::read_next_response_chunk(web::http::client::details::winhttp_request_context * pContext, unsigned long bytesRead, bool firstRead) Line 693  C++\nApplication64_d.dll!web::http::client::details::winhttp_client::completion_callback(void * hRequestHandle, unsigned __int64 context, unsigned long statusCode, void * statusInfo, unsigned long statusInfoLength) Line 1156 C++\nwinhttp.dll!00007ff83259db67()  Unknown\nwinhttp.dll!00007ff8325c653d()  Unknown\nApplication64_d.dll!web::http::client::details::winhttp_client::completion_callback(void * hRequestHandle, unsigned __int64 context, unsigned long statusCode, void * statusInfo, unsigned long statusInfoLength) Line 1051 C++\nwinhttp.dll!00007ff83259db67()  Unknown\nwinhttp.dll!00007ff8325a20b7()  Unknown\nwinhttp.dll!00007ff8325958a0()  Unknown\nwinhttp.dll!00007ff832594699()  Unknown\nntdll.dll!00007ff839723021()    Unknown\nntdll.dll!00007ff839721989()    Unknown\nkernel32.dll!00007ff8392c2774() Unknown\nntdll.dll!00007ff839750d51()    Unknown\n</code></pre>\n\n<p>Delete callstack :</p>\n\n<pre><code>msvcr110d.dll!operator delete(void * pUserData) Line 52 C++ // C:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\VC\\crt\\src\\dbgdel.cpp\nmsvcr110d.dll!operator delete[](void * p) Line 22   C++ // C:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\VC\\crt\\src\\delete2.cpp\nApplication64_d.dll!Concurrency::streams::details::basic_producer_consumer_buffer&lt;unsigned char&gt;::_block::~_block() Line 443    C++\nApplication64_d.dll!Concurrency::streams::details::basic_producer_consumer_buffer&lt;unsigned char&gt;::_block::`scalar deleting destructor'(unsigned int)    C++\nApplication64_d.dll!std::_Ref_count_obj&lt;Concurrency::streams::details::basic_producer_consumer_buffer&lt;unsigned char&gt;::_block&gt;::_Destroy() Line 885  C++\nApplication64_d.dll!std::_Ref_count_base::_Decref() Line 121    C++\nApplication64_d.dll!std::_Ptr_base&lt;Concurrency::streams::details::basic_producer_consumer_buffer&lt;unsigned char&gt;::_block&gt;::_Decref() Line 347    C++\nApplication64_d.dll!std::shared_ptr&lt;Concurrency::streams::details::basic_producer_consumer_buffer&lt;unsigned char&gt;::_block&gt;::~shared_ptr&lt;Concurrency::streams::details::basic_producer_consumer_buffer&lt;unsigned char&gt;::_block&gt;() Line 624 C++\nApplication64_d.dll!std::shared_ptr&lt;Concurrency::streams::details::basic_producer_consumer_buffer&lt;unsigned char&gt;::_block&gt;::`scalar deleting destructor'(unsigned int)   C++\nApplication64_d.dll!std::allocator&lt;std::shared_ptr&lt;Concurrency::streams::details::basic_producer_consumer_buffer&lt;unsigned char&gt;::_block&gt; &gt;::destroy&lt;std::shared_ptr&lt;Concurrency::streams::details::basic_producer_consumer_buffer&lt;unsigned char&gt;::_block&gt; &gt;(std::shared_ptr&lt;Concurrency::streams::details::basic_producer_consumer_buffer&lt;unsigned char&gt;::_block&gt; * _Ptr) Line 624  C++\nApplication64_d.dll!std::allocator_traits&lt;std::allocator&lt;std::shared_ptr&lt;Concurrency::streams::details::basic_producer_consumer_buffer&lt;unsigned char&gt;::_block&gt; &gt; &gt;::destroy&lt;std::shared_ptr&lt;Concurrency::streams::details::basic_producer_consumer_buffer&lt;unsigned char&gt;::_block&gt; &gt;(std::allocator&lt;std::shared_ptr&lt;Concurrency::streams::details::basic_producer_consumer_buffer&lt;unsigned char&gt;::_block&gt; &gt; &amp; _Al, std::shared_ptr&lt;Concurrency::streams::details::basic_producer_consumer_buffer&lt;unsigned char&gt;::_block&gt; * _Ptr) Line 758    C++\nApplication64_d.dll!std::_Wrap_alloc&lt;std::allocator&lt;std::shared_ptr&lt;Concurrency::streams::details::basic_producer_consumer_buffer&lt;unsigned char&gt;::_block&gt; &gt; &gt;::destroy&lt;std::shared_ptr&lt;Concurrency::streams::details::basic_producer_consumer_buffer&lt;unsigned char&gt;::_block&gt; &gt;(std::shared_ptr&lt;Concurrency::streams::details::basic_producer_consumer_buffer&lt;unsigned char&gt;::_block&gt; * _Ptr) Line 910   C++\nApplication64_d.dll!std::deque&lt;std::shared_ptr&lt;Concurrency::streams::details::basic_producer_consumer_buffer&lt;unsigned char&gt;::_block&gt;,std::allocator&lt;std::shared_ptr&lt;Concurrency::streams::details::basic_producer_consumer_buffer&lt;unsigned char&gt;::_block&gt; &gt; &gt;::pop_front() Line 1476    C++\nApplication64_d.dll!Concurrency::streams::details::basic_producer_consumer_buffer&lt;unsigned char&gt;::update_read_head(unsigned __int64 count) Line 644 C++\nApplication64_d.dll!Concurrency::streams::details::basic_producer_consumer_buffer&lt;unsigned char&gt;::read(unsigned char * ptr, unsigned __int64 count, bool advance) Line 620  C++\nApplication64_d.dll!&lt;lambda_1f1656160f66eb3ff369c30cc6352caf&gt;::operator()() Line 279    C++\nApplication64_d.dll!std::_Callable_obj&lt;&lt;lambda_1f1656160f66eb3ff369c30cc6352caf&gt;,0&gt;::_ApplyX&lt;void&gt;() Line 431   C++\nApplication64_d.dll!std::_Func_impl&lt;std::_Callable_obj&lt;&lt;lambda_1f1656160f66eb3ff369c30cc6352caf&gt;,0&gt;,std::allocator&lt;std::_Func_class&lt;void,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil&gt; &gt;,void,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil&gt;::_Do_call() Line 239  C++\nApplication64_d.dll!std::_Func_class&lt;void,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil,std::_Nil&gt;::operator()() Line 514 C++\nApplication64_d.dll!Concurrency::streams::details::basic_producer_consumer_buffer&lt;unsigned char&gt;::_request::complete() Line 543 C++\nApplication64_d.dll!Concurrency::streams::details::basic_producer_consumer_buffer&lt;unsigned char&gt;::fulfill_outstanding() Line 424    C++\nApplication64_d.dll!Concurrency::streams::details::basic_producer_consumer_buffer&lt;unsigned char&gt;::_close_write() Line 360   C++\nApplication64_d.dll!Concurrency::streams::details::streambuf_state_manager&lt;unsigned char&gt;::close(int mode) Line 413 C++\nApplication64_d.dll!Concurrency::streams::streambuf&lt;unsigned char&gt;::close(int mode) Line 960    C++\nApplication64_d.dll!Concurrency::streams::basic_ostream&lt;unsigned char&gt;::close() Line 151    C++\nApplication64_d.dll!web::http::details::http_msg_base::_complete(unsigned __int64 body_size, const std::exception_ptr &amp; exceptionPtr) Line 181  C++\nApplication64_d.dll!web::http::client::details::request_context::complete_request(unsigned __int64 body_size) Line 119  C++\nApplication64_d.dll!web::http::client::details::winhttp_client::completion_callback(void * hRequestHandle, unsigned __int64 context, unsigned long statusCode, void * statusInfo, unsigned long statusInfoLength) Line 1194 C++\nwinhttp.dll!00007ff83259db67()  Unknown\nwinhttp.dll!00007ff83259d87a()  Unknown\nwinhttp.dll!00007ff832599fe5()  Unknown\nApplication64_d.dll!web::http::client::details::winhttp_client::read_next_response_chunk(web::http::client::details::winhttp_request_context * pContext, unsigned long bytesRead, bool firstRead) Line 693  C++\nApplication64_d.dll!web::http::client::details::winhttp_client::completion_callback(void * hRequestHandle, unsigned __int64 context, unsigned long statusCode, void * statusInfo, unsigned long statusInfoLength) Line 1231 C++\nwinhttp.dll!00007ff83259b6aa()  Unknown\nApplication64_d.dll!web::http::client::details::winhttp_client::completion_callback(void * hRequestHandle, unsigned __int64 context, unsigned long statusCode, void * statusInfo, unsigned long statusInfoLength) Line 1174 C++\nwinhttp.dll!00007ff83259db67()  Unknown\nwinhttp.dll!00007ff8325955e7()  Unknown\nwinhttp.dll!00007ff832594699()  Unknown\nntdll.dll!00007ff839723021()    Unknown\nntdll.dll!00007ff839721989()    Unknown\nkernel32.dll!00007ff8392c2774() Unknown\nntdll.dll!00007ff839750d51()    Unknown\n</code></pre>\n\n<p>new and delete operators :</p>\n\n<pre><code>inline void* operator new (::size_t size);\ninline void operator delete (void* ptr);\ninline void* operator new[] (::size_t size);\ninline void operator delete[] (void* ptr);\n</code></pre>\n"}, {"tags": ["c++", "string", "fortran", "fortran-iso-c-binding"], "comments": [{"owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 0, "creation_date": 1501080788, "post_id": 45330436, "comment_id": 77622659, "body": "<i>But this way I got some weird symbols.</i> What did you get?"}, {"owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 2, "creation_date": 1501080851, "post_id": 45330436, "comment_id": 77622711, "body": "Note there is no language C/C++ and some people here who do C and C++ are VERY allergic to that. Fortranners usually don&#39;t care. I understand it is calling in C++ through the C interoperability so I am not opposed to both tags, but many other people are."}, {"owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 0, "creation_date": 1501081631, "post_id": 45330436, "comment_id": 77623400, "body": "Both versions can never work. The local allocatable string will be deallocated when the subroutine exits.  The local variable is only valid on the stack during the execution."}, {"owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 0, "creation_date": 1501085911, "post_id": 45330436, "comment_id": 77626728, "body": "The code you link is likely correct, but it does something else. As I said, there is a lot you useful you can  find on StackOverflow, but you should probably not bring each of it here."}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 7644888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d23cc3ad5a066996d2ad5923906be34?s=128&d=identicon&r=PG&f=1", "display_name": "Bang-Shiuh Chen", "link": "https://stackoverflow.com/users/7644888/bang-shiuh-chen"}, "edited": false, "score": 0, "creation_date": 1501083586, "post_id": 45330768, "comment_id": 77625014, "body": "Thank you for the answer. I want to do things correctly so I don&#39;t need to worry later. Memory leak is not what I want. So I think I will try the alternative way you suggested. I think I would like to know is how can I know if I need to deallocate a pointer. Here is another code I found on stackoverflow:"}, {"owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "reply_to_user": {"reputation": 59, "user_id": 7644888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d23cc3ad5a066996d2ad5923906be34?s=128&d=identicon&r=PG&f=1", "display_name": "Bang-Shiuh Chen", "link": "https://stackoverflow.com/users/7644888/bang-shiuh-chen"}, "edited": false, "score": 0, "creation_date": 1501084694, "post_id": 45330768, "comment_id": 77625848, "body": "You do not need to paste here the code from other SO question, a link is enough. But what do you want to do with that code? It does something different."}], "tags": [], "owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "is_accepted": false, "score": 5, "last_activity_date": 1501085993, "last_edit_date": 1501085993, "creation_date": 1501081365, "answer_id": 45330768, "question_id": 45330436, "link": "https://stackoverflow.com/questions/45330436/the-correct-way-to-pass-a-string-from-fortran-to-c-c/45330768#45330768", "title": "The correct way to pass a string from Fortran to C/C++", "body": "<p>Variants of this were treated in many other questions. Searching for an exact duplicate for closure is probably hopeless, but I <strong>strongly</strong> suggest you to search and read those questions and answers.</p>\n\n<p>C strings are null-terminated. If you want to trim it, you just put the null character to the right place. Actually, you are not null terminating the string in your first version at all so it is prone to buffer overflow.</p>\n\n<p>But even worse, the variable <code>fstring</code> is only local to the function. NEVER pass pointers to local variables.</p>\n\n<p>So, the first version should really be</p>\n\n<pre><code>subroutine zdplaskinGetSpeciesName(cstring, index) bind(C, name='zdplaskinGetSpeciesName')\n  use iso_c_binding\n  use ZDPlasKin\n  implicit none\n  integer, intent(in) :: index\n  CHARACTER(11), POINTER :: fstring\n  TYPE(C_PTR) :: cstring\n  allocate(fstring)\n  fstring = species_name(index+1)\n  fstring(11:11) = c_null_char\n  cstring = c_loc(fstring)\nend subroutine zdplaskinGetSpeciesName\n</code></pre>\n\n<p>To trim the string you just place the null char to the right place</p>\n\n<pre><code>   integer :: len\n   ...\n   len = len_trim(fstring)\n   fstring(len+1:len+1) = c_null_char\n</code></pre>\n\n<p>You can also use a pointer to a character array of length that will match the length of the string + 1 or a deferred length (<code>character(:)</code>) character pointer similar to your second approach. Just remember to always leave 1 character for the null termination.</p>\n\n<p>Now the code will have a memory leak. To get away of the memory leak, the string MUST be deallocated from Fortran! So you must create a special subroutine to deallocate these pointers.</p>\n\n<hr>\n\n<p>An alternative is to pass a pointer to a buffer from C++ and just fill the string in Fortran. I would actually prefer that way. You can make it null-terminated already in C++, just be sure to not let Fortran to overwrite the terminating character.</p>\n\n<p>You can try:</p>\n\n<pre><code>subroutine zdplaskinGetSpeciesName(cstring, index) bind(C, name='zdplaskinGetSpeciesName')\n  use iso_c_binding\n  use ZDPlasKin\n  implicit none\n  integer, intent(in) :: index\n  TYPE(C_PTR), intent(in) :: cstring\n  CHARACTER(kind=C_CHAR), POINTER :: fstring(:)\n  integer :: i, c_len, name_len\n\n  c_len = c_strlen(cstring)\n  c_f_pointer(cstring, fstring, [c_len])\n\n  associate(name =&gt; species_name(index+1))\n    name_len = trim_len(name)\n    do i = 1, name_len\n      fstring(i) = name(i:i)\n    end do\n    fstring(name_len+1:name_len+1)\n  end do\nend subroutine zdplaskinGetSpeciesName\n</code></pre>\n\n<p>Untested. You are responsible to provide large enough null-terminated buffer from C++. <code>c_strlen</code> can be found at <a href=\"http://fortranwiki.org/fortran/show/c_interface_module\" rel=\"nofollow noreferrer\">http://fortranwiki.org/fortran/show/c_interface_module</a></p>\n\n<hr>\n\n<p>To be 100% standard conforming you should use arrays of characters <code>character(kind=c_char)</code> of length one, but strings are very likely to work in practice.</p>\n"}, {"comments": [{"owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 0, "creation_date": 1501096767, "post_id": 45335568, "comment_id": 77633270, "body": "The allocation to fstring is completely unnecessary. You can remove the <code>fstring</code> variable altogether. <code>call F_C_string_ptr(trim(species_name(index+1)), cstring)</code> Also, your <code>cstring[10]</code> is likely too short and expect buffer overflows."}, {"owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 0, "creation_date": 1501096923, "post_id": 45335568, "comment_id": 77633353, "body": "<i>&quot;If the length is not passed, the C string must be at least: <code>len(F_string)+1</code>&quot;.</i>"}], "tags": [], "owner": {"reputation": 59, "user_id": 7644888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d23cc3ad5a066996d2ad5923906be34?s=128&d=identicon&r=PG&f=1", "display_name": "Bang-Shiuh Chen", "link": "https://stackoverflow.com/users/7644888/bang-shiuh-chen"}, "is_accepted": false, "score": 0, "last_activity_date": 1501096336, "creation_date": 1501096336, "answer_id": 45335568, "question_id": 45330436, "link": "https://stackoverflow.com/questions/45330436/the-correct-way-to-pass-a-string-from-fortran-to-c-c/45335568#45335568", "title": "The correct way to pass a string from Fortran to C/C++", "body": "<p>I finally got a good way. First, download <a href=\"http://fortranwiki.org/fortran/show/c_interface_module\" rel=\"nofollow noreferrer\">http://fortranwiki.org/fortran/show/c_interface_module</a>. And use F_C_string_ptr.</p>\n\n<pre><code>subroutine zdplaskinGetSpeciesName(cstring, index) bind(C, name='zdplaskinGetSpeciesName')\n  use ZDPlasKin\n  use C_interface_module\n  implicit none\n  integer, intent(in) :: index\n  TYPE(C_PTR), intent(in) :: cstring\n  character(:), allocatable :: fstring\n  fstring = trim(species_name(index+1))\n  call F_C_string_ptr(fstring, cstring)\nend subroutine zdplaskinGetSpeciesName\n</code></pre>\n\n<p>And c and c++ code are:</p>\n\n<pre><code>extern \"C\" void zdplaskinGetSpeciesName(char* cstring[], size_t* index);\nfor (size_t i = 0; i &lt; zdplaskinNSpecies(); i++) {\n    char* cstring[10];\n    zdplaskinGetSpeciesName(cstring, &amp;i);\n    printf(\"%s\\n\",*cstring);\n    string speciesName(*cstring);\n    cout &lt;&lt; speciesName &lt;&lt; endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 7644888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d23cc3ad5a066996d2ad5923906be34?s=128&d=identicon&r=PG&f=1", "display_name": "Bang-Shiuh Chen", "link": "https://stackoverflow.com/users/7644888/bang-shiuh-chen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1970, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1501096336, "creation_date": 1501080560, "last_edit_date": 1501085840, "question_id": 45330436, "link": "https://stackoverflow.com/questions/45330436/the-correct-way-to-pass-a-string-from-fortran-to-c-c", "title": "The correct way to pass a string from Fortran to C/C++", "body": "<p>I want to pass a string from Fortran to C/C++. Here is my Fortran code:</p>\n\n<pre><code>subroutine zdplaskinGetSpeciesName(cstring, index) bind(C, name='zdplaskinGetSpeciesName')\n  use iso_c_binding\n  use ZDPlasKin\n  implicit none\n  integer, intent(in) :: index\n  CHARACTER(10), TARGET :: fstring = ''\n  TYPE(C_PTR) :: cstring\n  fstring = species_name(index+1)\n  cstring = c_loc(fstring)\nend subroutine zdplaskinGetSpeciesName\n</code></pre>\n\n<p><code>ZDPlasKin</code> is a module which has <code>species_name(i)</code>.</p>\n\n<pre><code>extern \"C\" void zdplaskinGetSpeciesName(char* cstring[], size_t* index);\nchar* cstring[1];\nsize_t index = 1;\nzdplaskinGetSpeciesName(cstring, &amp;index);\nstring speciesName = string(cstring[0]);\ncout &lt;&lt; speciesName &lt;&lt; endl;\n</code></pre>\n\n<p>The output seems to be fine for this method. However, I want to trim the trailing space (<code>character(10</code>) gives extra space), so my C++ code can read the string correctly. I tried another way.</p>\n\n<pre><code>subroutine zdplaskinGetSpeciesName(cstring, index) bind(C, name='zdplaskinGetSpeciesName')\n  use iso_c_binding\n  use ZDPlasKin\n  implicit none\n  integer, intent(in) :: index\n  CHARACTER(:), allocatable, TARGET :: fstring\n  TYPE(C_PTR) :: cstring\n  fstring = trim(species_name(index+1))\n  cstring = c_loc(fstring)\nend subroutine zdplaskinGetSpeciesName\n</code></pre>\n\n<p>But this way I got some weird symbols. </p>\n\n<hr>\n\n<p>I want to do things correctly so I don't need to worry later. Memory leak is not what I want. So I think I will try the alternative way you suggested. I think I would like to know is how can I know if I need to deallocate a pointer. Here is another code I found on StackOverflow (Although this one passes C++ string to Fortran. <a href=\"https://stackoverflow.com/a/30430656/721644\">https://stackoverflow.com/a/30430656/721644</a>)</p>\n\n<p>Do you think this is okay to use? Or there might be memory leak. Also can you give me some hint about the alternative way you suggested? </p>\n"}, {"tags": ["c++", "c++11", "stl", "std", "priority-queue"], "comments": [{"owner": {"reputation": 5775, "user_id": 83839, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d927b767c21dd35ad22bfefcb091266a?s=128&d=identicon&r=PG", "display_name": "Kevin Anderson", "link": "https://stackoverflow.com/users/83839/kevin-anderson"}, "edited": false, "score": 0, "creation_date": 1501080781, "post_id": 45330322, "comment_id": 77622645, "body": "Is there documentation that the sort is &quot;stable&quot; for equal elements?  If not, the behavior seems possible, but not necessarily what you expected."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1501080863, "post_id": 45330322, "comment_id": 77622719, "body": "There are stable sorting algorithms, like <a href=\"http://en.cppreference.com/w/cpp/algorithm/stable_sort\" rel=\"nofollow noreferrer\"><code>std::stable_sort</code></a>, but <a href=\"https://stackoverflow.com/questions/19336881/why-isnt-heapsort-stable\">heapsort is not one of them</a>."}], "answers": [{"comments": [{"owner": {"reputation": 5775, "user_id": 83839, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d927b767c21dd35ad22bfefcb091266a?s=128&d=identicon&r=PG", "display_name": "Kevin Anderson", "link": "https://stackoverflow.com/users/83839/kevin-anderson"}, "edited": false, "score": 0, "creation_date": 1501080815, "post_id": 45330510, "comment_id": 77622683, "body": "I wish I could give you more than one &quot;up&quot; vote for using <code>std::tie</code>"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 1, "creation_date": 1501086315, "post_id": 45330510, "comment_id": 77627051, "body": "&quot;descending in p, but ascending in str&quot; -&gt; <code>return std::tie(b.p,a.str) &lt; std::tie(a.p,b.str)</code>"}], "tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": true, "score": 8, "last_activity_date": 1501083421, "last_edit_date": 1501083421, "creation_date": 1501080742, "answer_id": 45330510, "question_id": 45330322, "link": "https://stackoverflow.com/questions/45330322/ordering-issue-while-popping-from-priority-queue-is-this-a-bug-with-stdpriori/45330510#45330510", "title": "Ordering issue while popping from priority_queue, Is this a bug with std::priority_queue", "body": "<p>No.  There is no reason for the behaviour to be consistent.  <code>Temp{9, \"str1\"}</code> and <code>Temp{9,\"str2\"}</code> are equal according to your comparison function, so they get returned in an arbitrary order.  Adding different elements to the queue is quite likely to change that order.</p>\n\n<p>If you want them returned in a consistent order, you need to extend the comparison function.  The simplest way is</p>\n\n<pre><code>     bool operator()(Temp const &amp; a, Temp const &amp; b)\n     {\n         return std::tie(a.p,a.str) &gt; std::tie(b.p,b.str);\n     }\n</code></pre>\n\n<p>If you want \"descending in <code>p</code>, but ascending in <code>str</code>\", you'll have to do it yourself.</p>\n"}], "owner": {"reputation": 9953, "user_id": 138832, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/07a4845259334c54305c9442c89bca0a?s=128&d=identicon&r=PG", "display_name": "rkb", "link": "https://stackoverflow.com/users/138832/rkb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 0, "accepted_answer_id": 45330510, "answer_count": 1, "score": 4, "last_activity_date": 1501083421, "creation_date": 1501080293, "last_edit_date": 1501080366, "question_id": 45330322, "link": "https://stackoverflow.com/questions/45330322/ordering-issue-while-popping-from-priority-queue-is-this-a-bug-with-stdpriori", "title": "Ordering issue while popping from priority_queue, Is this a bug with std::priority_queue", "body": "<pre><code>#include &lt;functional&gt;\n#include &lt;queue&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n\n struct Temp\n {\n   int p;\n   std::string str;\n };\n\n struct TempCompare\n {\n     bool operator()(Temp const &amp; a, Temp const &amp; b)\n     {\n         return a.p &gt; b.p;\n     }\n };\n\nint main() {\n\n    std::priority_queue&lt;Temp, std::vector&lt;Temp&gt;, TempCompare&gt; pq;\n    //Enable and Disable the following line to see the different output\n    //{Temp t; t.p=8;t.str=\"str1\";pq.push(t);} \n    {Temp t; t.p=8;t.str=\"str2\";pq.push(t);}\n    {Temp t; t.p=9; t.str=\"str1\";pq.push(t);}\n    {Temp t; t.p=9; t.str=\"str2\";pq.push(t);}\n\n    while(!pq.empty())\n    {\n        std::cout &lt;&lt; pq.top().p &lt;&lt; \" \" &lt;&lt; pq.top().str &lt;&lt; std::endl;\n        pq.pop();\n    }\n}\n</code></pre>\n\n<p>Run the above program with enabling and disabling the fourth line in main; The output you get when its disabled is</p>\n\n<pre><code>8 str2\n9 str1\n9 str2\n</code></pre>\n\n<p>whereas when its enabled you get</p>\n\n<pre><code>8 str1\n8 str2\n9 str2\n9 str1\n</code></pre>\n\n<p>Shouldnt the behavior be consistent?</p>\n"}, {"tags": ["c++", "qt", "c++11", "qmake"], "comments": [{"owner": {"reputation": 1324, "user_id": 8147455, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/c0f9204eec46dea673aa01464b496362?s=128&d=identicon&r=PG&f=1", "display_name": "Xatyrian", "link": "https://stackoverflow.com/users/8147455/xatyrian"}, "edited": false, "score": 0, "creation_date": 1501080430, "post_id": 45330284, "comment_id": 77622354, "body": "Doesn&#39;t it have something to do with your GCC version ? Maybe your ubuntu is too old to use C++11"}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1501080826, "post_id": 45330284, "comment_id": 77622693, "body": "Can you try <code>qmake-qt5</code> rather than <code>qmake</code>?"}, {"owner": {"reputation": 441, "user_id": 747043, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ab0efd4af09db1aff2838ae7a274b66a?s=128&d=identicon&r=PG", "display_name": "il_mix", "link": "https://stackoverflow.com/users/747043/il-mix"}, "reply_to_user": {"reputation": 1324, "user_id": 8147455, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/c0f9204eec46dea673aa01464b496362?s=128&d=identicon&r=PG&f=1", "display_name": "Xatyrian", "link": "https://stackoverflow.com/users/8147455/xatyrian"}, "edited": false, "score": 0, "creation_date": 1501081557, "post_id": 45330284, "comment_id": 77623333, "body": "@Xatyrian the g++ version is ok, since declaring <code>QMAKE_CXXFLAGS += -std=c++11</code> works"}, {"owner": {"reputation": 441, "user_id": 747043, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ab0efd4af09db1aff2838ae7a274b66a?s=128&d=identicon&r=PG", "display_name": "il_mix", "link": "https://stackoverflow.com/users/747043/il-mix"}, "reply_to_user": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1501082326, "post_id": 45330284, "comment_id": 77623983, "body": "@G.M. qmake is actually linked to qt5 folder. Even using the one in the Qt 5.9.1 folder (qmake version 3.1) will give the same result. I have qmae-qt4 installed, but I don&#39;t know how to install/use qmake-qt5..."}], "answers": [{"comments": [{"owner": {"reputation": 441, "user_id": 747043, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ab0efd4af09db1aff2838ae7a274b66a?s=128&d=identicon&r=PG", "display_name": "il_mix", "link": "https://stackoverflow.com/users/747043/il-mix"}, "edited": false, "score": 0, "creation_date": 1501081835, "post_id": 45330683, "comment_id": 77623573, "body": "For what I&#39;ve understood, such CONFIG will be translated in a flag. As you said, &quot;if needed&quot;. With MSVC2015, <code>CONFIG += c++11</code> does nothing, while <code>QMAKE_CXXFLAGS += -std=c++11</code> adds an useless flag (actually, a wrong flag, since I get a warning &quot;ignoring unknown option &#39;-std=c++11&#39;&quot;). Anyway, as said, adding <code>CONFIG += c++11</code> directive doesn&#39;t actually add support for c++11 on linux-g++"}, {"owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "reply_to_user": {"reputation": 441, "user_id": 747043, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ab0efd4af09db1aff2838ae7a274b66a?s=128&d=identicon&r=PG", "display_name": "il_mix", "link": "https://stackoverflow.com/users/747043/il-mix"}, "edited": false, "score": 0, "creation_date": 1501081999, "post_id": 45330683, "comment_id": 77623716, "body": "@il_max QMAKE_CXXFLAGS is what literally is added to compiler&#39;s command line verbatim, CONFIG affects only internal preprocessor directives used in Qt code and what modules are linked, if i recall right. vc2015 still does not support c++11 fully!!!"}, {"owner": {"reputation": 441, "user_id": 747043, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ab0efd4af09db1aff2838ae7a274b66a?s=128&d=identicon&r=PG", "display_name": "il_mix", "link": "https://stackoverflow.com/users/747043/il-mix"}, "edited": false, "score": 0, "creation_date": 1501082471, "post_id": 45330683, "comment_id": 77624109, "body": "Well, MSVC2015 partial support still supports what I need of c++11, so I&#39;m ok with it. The problem is that qmake under Linux is giving me an headache to enable the c++11 support of g++"}, {"owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "reply_to_user": {"reputation": 441, "user_id": 747043, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ab0efd4af09db1aff2838ae7a274b66a?s=128&d=identicon&r=PG", "display_name": "il_mix", "link": "https://stackoverflow.com/users/747043/il-mix"}, "edited": false, "score": 0, "creation_date": 1501082787, "post_id": 45330683, "comment_id": 77624353, "body": "just putline <code>unix:QMAKE_CXXFLAGS+=-std=c++11</code> into .pro file and do not bother about that"}, {"owner": {"reputation": 441, "user_id": 747043, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ab0efd4af09db1aff2838ae7a274b66a?s=128&d=identicon&r=PG", "display_name": "il_mix", "link": "https://stackoverflow.com/users/747043/il-mix"}, "edited": false, "score": 0, "creation_date": 1501083050, "post_id": 45330683, "comment_id": 77624575, "body": "Well, yes, it&#39;s what I&#39;m doing right now. Was hoping to actually have the &quot;magic&quot; done automatically by qmake, as stated in various threads."}, {"owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "reply_to_user": {"reputation": 441, "user_id": 747043, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ab0efd4af09db1aff2838ae7a274b66a?s=128&d=identicon&r=PG", "display_name": "il_mix", "link": "https://stackoverflow.com/users/747043/il-mix"}, "edited": false, "score": 0, "creation_date": 1501083283, "post_id": 45330683, "comment_id": 77624755, "body": "@il_max some distros had qt-dev distrbuted with corrected makespec.  i thnk, gcc 6.0 would take your code without that flag. Prior version required it"}], "tags": [], "owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "is_accepted": false, "score": 0, "last_activity_date": 1501081181, "creation_date": 1501081181, "answer_id": 45330683, "question_id": 45330284, "link": "https://stackoverflow.com/questions/45330284/config-c11-still-doesnt-work-on-linux/45330683#45330683", "title": "CONFIG += c++11 (still) doesn&#39;t work on Linux", "body": "<p>CONFIG variable is meant to configure Qt code ( headers, may be metacode), so c++11 in it should be added to support c++11.  Compiler flag is a separate item, and may be required  or may not be requred depending on compiler and its version, newer  gcc defaults to gnu version of standard ( with extensions), e.g gcc 6.0 - to gnu++14. </p>\n"}, {"tags": [], "owner": {"reputation": 7319, "user_id": 2667360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kKqx3.png?s=128&g=1", "display_name": "Benjamin T", "link": "https://stackoverflow.com/users/2667360/benjamin-t"}, "is_accepted": false, "score": 2, "last_activity_date": 1501086698, "creation_date": 1501086698, "answer_id": 45332716, "question_id": 45330284, "link": "https://stackoverflow.com/questions/45330284/config-c11-still-doesnt-work-on-linux/45332716#45332716", "title": "CONFIG += c++11 (still) doesn&#39;t work on Linux", "body": "<p><code>CONFIG += c++11</code> should be enough so that your compiler is called with the proper flags to enable C++11 support.</p>\n\n<p>However, since 5.7, Qt requires C++11 support so even without <code>CONFIG += c++11</code> you should get your compiler called with C++11 support.</p>\n\n<p>What I think is that for your compiler, qmake \"thinks\" c++11 support is the default behavior and qmake doesn't add the <code>-std=c++11</code> flag.</p>\n\n<p>If you are curious you can check the mkspecs files. As @Swift mentioned you have to check yours as they might have been corrected. In the ones i have in my Qt install, it seems that all is ok as in <code>mkspecs/common/g++-base.conf</code>I have <code>QMAKE_CXXFLAGS_CXX11 = -std=c++11</code> and <code>\nQMAKE_CXXFLAGS_GNUCXX11 = -std=gnu++11</code>.</p>\n\n<p>If I am right that means that you could bypass qmake behavior by trying to use <code>CONFIG += c++14</code> (or <code>CONFIG += c++1z</code>). You could also try <code>CONFIG += strict_c++</code> (or <code>CONFIG -= strict_c++</code>), this option will disable (or enable) GNU extensions and thus force qmake to add <code>-std=c++11</code> (so that g++ will not use the implicit <code>-std=gnu++11</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 441, "user_id": 747043, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ab0efd4af09db1aff2838ae7a274b66a?s=128&d=identicon&r=PG", "display_name": "il_mix", "link": "https://stackoverflow.com/users/747043/il-mix"}, "is_accepted": false, "score": 0, "last_activity_date": 1501142160, "creation_date": 1501142160, "answer_id": 45344639, "question_id": 45330284, "link": "https://stackoverflow.com/questions/45330284/config-c11-still-doesnt-work-on-linux/45344639#45344639", "title": "CONFIG += c++11 (still) doesn&#39;t work on Linux", "body": "<p>I figured it out. It was my fault (obviously...)</p>\n\n<p>As said, I've installed last version of Qt (5.9.1) via unified installer script. Still, my QtCreator was using as default an old kit with Qt4 (!!), installed via package manager who-remembers-when, so it was actually using an old version of qmake that doesn't deal with CONFIG directive. Forcing qtchooser to use qt5 doesn't modify the tools set in the used kit (learned something!). Using the last kit everything works as expected. Using qmake via command line, after setting qtchooser to use qt5, works as expected, too; I just wasn't looking for the correct Makefile (....).</p>\n\n<p>So, I can confirm that the problem was the qmake version, as said in others threads.</p>\n"}], "owner": {"reputation": 441, "user_id": 747043, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ab0efd4af09db1aff2838ae7a274b66a?s=128&d=identicon&r=PG", "display_name": "il_mix", "link": "https://stackoverflow.com/users/747043/il-mix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1116, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1501142160, "creation_date": 1501080216, "last_edit_date": 1501095791, "question_id": 45330284, "link": "https://stackoverflow.com/questions/45330284/config-c11-still-doesnt-work-on-linux", "title": "CONFIG += c++11 (still) doesn&#39;t work on Linux", "body": "<p>I've read several discussion on the topic, some saying that qmake &lt; 3.0 doesn't support the directive correctly. I've just reinstalled Qt 5.9.1 for g++-64, but the problem is still there. Also, I've tried playing with various mkspecs/xxx/xxx.conf files with no luck.</p>\n\n<p>Adding <code>CONFIG += c++11</code> to a .pro doesn't really add the CXX flag -std=c++11 in the Makefile, so one get the error</p>\n\n<pre><code>error: #error This file requires compiler and library support for the ISO C++ 2011 standard. This support is currently experimental, and must be enabled with the -std=c++11 or -std=gnu++11 compiler options.\n</code></pre>\n\n<p>when compiling.</p>\n\n<p>I'm working on Linux x64 (an Ubuntu distro), with the last version of Qt libraries (5.9.1). Same project compiles with no errors on Windows with MSVC2015 and MinGw.</p>\n\n<p>It works if I declare <code>QMAKE_CXXFLAGS += -std=c++11</code> instead of <code>CONFIG += c++11</code>, but it is suggested to use the former declaration, since qmake will automatically deal with CXX flags via CONFIG directive. Awfully, looks like it's not doing so...</p>\n"}, {"tags": ["c++", "oop"], "comments": [{"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1501080149, "post_id": 45330174, "comment_id": 77622131, "body": "It is not mandatory to override a virtual defined inherited method, it depends on your needs."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1501080179, "post_id": 45330174, "comment_id": 77622153, "body": "can you show some code? What makes you think there is a risk involved when a derived does not implement a virtual method ?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1501080274, "post_id": 45330174, "comment_id": 77622234, "body": "if the derived class is fine with the method provided by the base there is no reason to override it, I am afraid there is no deeper insight to this than that"}, {"owner": {"reputation": 433, "user_id": 4958456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f57a7388ee6a853860e40a850c88edcc?s=128&d=identicon&r=PG&f=1", "display_name": "Viktor Chv&#225;tal", "link": "https://stackoverflow.com/users/4958456/viktor-chv%c3%a1tal"}, "edited": false, "score": 4, "creation_date": 1501080441, "post_id": 45330174, "comment_id": 77622364, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/8931612/do-all-virtual-functions-need-to-be-implemented-in-derived-classes\">Do ALL virtual functions need to be implemented in derived classes?</a>"}, {"owner": {"reputation": 103, "user_id": 8119702, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-IkPma8OcMUc/AAAAAAAAAAI/AAAAAAAAAb0/mdvKlkE7sUY/photo.jpg?sz=128", "display_name": "eindemwort", "link": "https://stackoverflow.com/users/8119702/eindemwort"}, "edited": false, "score": 0, "creation_date": 1501161535, "post_id": 45330174, "comment_id": 77665114, "body": "Hi. Thanks everyone for your answers. My initial question -at least in my head- was not related to &quot;Possible duplicate&quot; suggested by Viktor Chv&#225;tal - but his question he pointed at ALONG WITH all the other answers to my questions clarified and dissipated my doubt. At the beginning, I though that if child do not implement the virtual method form parent, there would be some sort of &quot;hole&quot; there, where a method (or pointer to method, or whatever) should be. But then what would happen is that the child would be using the parent&#39;s implementation."}], "answers": [{"comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 1, "creation_date": 1501080821, "post_id": 45330483, "comment_id": 77622687, "body": "Using C# terminology and concepts for C++, that can be confusing. Consider changing them :)"}, {"owner": {"reputation": 4480, "user_id": 1440057, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/TBIqJ.jpg?s=128&g=1", "display_name": "Nikhil Vartak", "link": "https://stackoverflow.com/users/1440057/nikhil-vartak"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1501081152, "post_id": 45330483, "comment_id": 77622964, "body": "I don&#39;t think question is language dependent although it&#39;s marked with <code>c++</code>. That&#39;s pure OOP question. I think your comment is pointing at <code>Interface</code> terminology I used in answer?!"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1501081195, "post_id": 45330483, "comment_id": 77623013, "body": "Yes, and <code>abstract</code> functions, which are called pure virtual and do not use any extra keyword. But I see what you mean :P"}], "tags": [], "owner": {"reputation": 4480, "user_id": 1440057, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/TBIqJ.jpg?s=128&g=1", "display_name": "Nikhil Vartak", "link": "https://stackoverflow.com/users/1440057/nikhil-vartak"}, "is_accepted": false, "score": 1, "last_activity_date": 1501080671, "creation_date": 1501080671, "answer_id": 45330483, "question_id": 45330174, "link": "https://stackoverflow.com/questions/45330174/what-are-the-risks-of-not-implementing-a-virtual-method-of-my-parent-class/45330483#45330483", "title": "What are the risks of not implementing a virtual method of my parent class?", "body": "<blockquote>\n  <p>Some children implements both virtual functions of their parent, but\n  some others implement only one</p>\n</blockquote>\n\n<p>That is perfectly fine, and that's one of the reasons <code>virtual</code> methods differ from <code>abstract</code> ones, former being optional to be overridden in more specific types (child classes).</p>\n\n<blockquote>\n  <p>I know I can implement the methods, and when they are not needed they\n  could simply return an exception, or simply do nothing</p>\n</blockquote>\n\n<p>Throwing exception, say not implemeted or supported, is bad idea. If you knew the specific type would not support specific behavior, that behavior should not be part of base class itself. You should implement such behaviors (which are specific to some derived classes) using interfaces instead.</p>\n"}, {"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1501080970, "post_id": 45330501, "comment_id": 77622796, "body": "such shape-square examples are questionable. For example a <code>shape</code> can have a method to stretch in one dimension only, while if you do the same for a <code>square</code> it isnt a <code>square</code> anymore"}, {"owner": {"reputation": 682, "user_id": 7253878, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/52963dc20521e67ea382effca33592b6?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/7253878/matthew"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1501081099, "post_id": 45330501, "comment_id": 77622901, "body": "I have adjusted it to a rectangle as this should fix the question-ability"}], "tags": [], "owner": {"reputation": 682, "user_id": 7253878, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/52963dc20521e67ea382effca33592b6?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/7253878/matthew"}, "is_accepted": false, "score": 3, "last_activity_date": 1501081068, "last_edit_date": 1501081068, "creation_date": 1501080721, "answer_id": 45330501, "question_id": 45330174, "link": "https://stackoverflow.com/questions/45330174/what-are-the-risks-of-not-implementing-a-virtual-method-of-my-parent-class/45330501#45330501", "title": "What are the risks of not implementing a virtual method of my parent class?", "body": "<p>That is not the correct question to be asking. The correct question is if the child class only overrides one or two of the functions it is allowed to override then the question is \"Should my child class be deriving from the parent class\". For example of a bad inheritance is:</p>\n\n<pre><code>class shape\n{\npublic:\n   virtual void draw();\n   virtual void print();\n};\n\nclass log : public shape\n{\npublic:\n   void print() override;\n};\n</code></pre>\n\n<p>This is a bad inheritance as the two both need a print method but a log class has nothing to do with drawing nor is it related to a shape. Is it dangerous not in the context of security but in the sense that anyone using your code will be extremely confused it is.</p>\n\n<p>An example of a better inheritance would be:</p>\n\n<pre><code>class shape\n{\npublic:\n   virtual void draw() = 0;\n};\n\nclass rectangle : public shape\n{\n   virtual void draw();\n};\n</code></pre>\n\n<p>Here square inherits from shape as a rectangle is a shape and the inheritance enforces rectangle to define a draw method. With this inheritance it is very clear as to what is going on and there is no risk involved.</p>\n"}, {"comments": [{"owner": {"reputation": 682, "user_id": 7253878, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/52963dc20521e67ea382effca33592b6?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/7253878/matthew"}, "edited": false, "score": 0, "creation_date": 1501081349, "post_id": 45330646, "comment_id": 77623147, "body": "I do not know if that question goes deep enough. As you can define any class with pure virtual functions and the child class define them but this does not mean they should be defining them. For instance a parent shape class and child log class can both define a print method but they should not be in inheritance with each other."}, {"owner": {"reputation": 58, "user_id": 2120161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16a62c09f19246d29c0cff9da3b45331?s=128&d=identicon&r=PG", "display_name": "AliaumeM", "link": "https://stackoverflow.com/users/2120161/aliaumem"}, "reply_to_user": {"reputation": 682, "user_id": 7253878, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/52963dc20521e67ea382effca33592b6?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/7253878/matthew"}, "edited": false, "score": 0, "creation_date": 1501088569, "post_id": 45330646, "comment_id": 77628501, "body": "True, although I find it a bit difficult to confuse the meaning of an interface with another one. Sure &quot;print()&quot; could mean two very different things depending on whether it comes from a shape object or a log object, but this is precisely the point: one belongs to a shape interface whereas the other to a logger. However, the OP being new to C++ seems to confuse regular virtual methods and pure virtual methods. This is how I understand his question anyway. Your point is perfectly valid, I simply think it&#39;s unlikely this is what the OP is asking about. But then again, maybe I&#39;m wrong"}], "tags": [], "owner": {"reputation": 58, "user_id": 2120161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16a62c09f19246d29c0cff9da3b45331?s=128&d=identicon&r=PG", "display_name": "AliaumeM", "link": "https://stackoverflow.com/users/2120161/aliaumem"}, "is_accepted": false, "score": 0, "last_activity_date": 1501081076, "creation_date": 1501081076, "answer_id": 45330646, "question_id": 45330174, "link": "https://stackoverflow.com/questions/45330174/what-are-the-risks-of-not-implementing-a-virtual-method-of-my-parent-class/45330646#45330646", "title": "What are the risks of not implementing a virtual method of my parent class?", "body": "<p>You might be confusing virtual methods with <strong>pure</strong> virtual methods.</p>\n\n<p>A virtual method is just a regular method that children classes can override, which means \"swap the default behavior for a custom one\".\nYou declare them like this:</p>\n\n<pre><code>virtual ReturnType myVirtualMethod();\n</code></pre>\n\n<p>Pure virtual methods, on the other hand <strong>require</strong> you to implement them in the child class. They are used when no sensible default behavior can be written within the parent class. In case you don't implement them, the child class will fail to compile, which is good, because it prevents undefined behavior - in this case: what should run when NO method was provided? It is impossible for the compiler to decide.\nThey can be declared with this syntax:</p>\n\n<pre><code>virtual ReturnType myVirtualMethod() = 0; // notice the \"= 0\" at the end\n</code></pre>\n\n<p>So I think the question you should ask yourself is this one: \"can I provide any default behavior that works in most cases for this method?\" If not, you should consider making the method pure virtual, otherwise implement the default behavior in the parent class, and don't bother overriding that method in child classes that don't need it.</p>\n\n<p>Hope this helped!</p>\n"}], "owner": {"reputation": 103, "user_id": 8119702, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-IkPma8OcMUc/AAAAAAAAAAI/AAAAAAAAAb0/mdvKlkE7sUY/photo.jpg?sz=128", "display_name": "eindemwort", "link": "https://stackoverflow.com/users/8119702/eindemwort"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1208, "favorite_count": 0, "closed_date": 1501099218, "answer_count": 3, "score": -1, "last_activity_date": 1501161837, "creation_date": 1501079977, "last_edit_date": 1501161837, "question_id": 45330174, "link": "https://stackoverflow.com/questions/45330174/what-are-the-risks-of-not-implementing-a-virtual-method-of-my-parent-class", "closed_reason": "Needs details or clarity", "title": "What are the risks of not implementing a virtual method of my parent class?", "body": "<p>I am pretty new to both the OOP and the C++ language.\nRecently I have been given the task of come up with an object oriented design -which I guess I have done quite ok so far considering my lack of knowledge on the subject. And since I want to keep performing either like I have done so far or better, I want to get my doubt cleared.</p>\n\n<p>I made a design in which the base class offers two virtual functions. Some children implements both virtual functions of their parent, but some others implement only one.\nNow, I know that it is not the best / clean design somebody can come up with, and that if I do not implement (in some children) one of these virtual methods I might get warnings from the compiler. I know I can implement the methods, and when they are not needed they could simply return an exception, or simply do nothing.</p>\n\n<p>With all  that said, my doubt/question is: What is the actual risk of not implementing one of these virtual methods in the children? What happens on the object which does not have a virtual method's implementation of its parent? I am looking for a rather deep insight - I mean, I am looking for an understanding on a object's guts level so to say.</p>\n\n<p>If an explanation is not possible to be given, any reference where to possible look at will be equally Welcomed and appreciated.</p>\n\n<p>Cheers!</p>\n\n<p><strong>EDIT</strong>\nHi. Thanks everyone for your answers. My initial question -at least in my head- was not related to \"Possible duplicate\" suggested by Viktor Chv\u00e1tal - but this question he pointed at, ALONG WITH all the other answers to my question clarified and dissipated my doubt. At the beginning, I though that if child does not implement the virtual method from parent, there would be some sort of \"<strong>hole</strong>\" there, where a method (or pointer to method, or whatever) should be. But then what would happen is that the child would be using the parent's implementation.\nThanks everyone and sorry for the fuss of asking something which is apparently already answered somewhere else. The thing is I should read more about how stuff works, before giving somebody else's comments as granted - wich is what took me to ask this question in the first place.\nI'll try no to repeat this mistake in the future.</p>\n"}, {"tags": ["c++", "class"], "comments": [{"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1501080166, "post_id": 45330148, "comment_id": 77622142, "body": "What would be your best guess?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5880324"}, "reply_to_user": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1501080490, "post_id": 45330148, "comment_id": 77622394, "body": "Based on seeing usages and what information I could find about it it seems like it gives a default value? But then how is that, in a sense, different from giving it a default value in an initialization list?"}], "answers": [{"tags": [], "owner": {"reputation": 971, "user_id": 4124855, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zkqyU.jpg?s=128&g=1", "display_name": "IlBeldus", "link": "https://stackoverflow.com/users/4124855/ilbeldus"}, "is_accepted": true, "score": 3, "last_activity_date": 1501080262, "creation_date": 1501080262, "answer_id": 45330308, "question_id": 45330148, "link": "https://stackoverflow.com/questions/45330148/c-initialize-member-variables-with/45330308#45330308", "title": "C++ initialize member variables with { }", "body": "<p>It's useful when you have a lot of constructors. <code>bool bar{false};</code> means set bar to false unless the constructor initialises it to something else. it's just for convenience</p>\n\n<p>See <a href=\"http://en.cppreference.com/w/cpp/language/data_members#Member_initialization\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/language/data_members#Member_initialization</a> for a more detailed explanation</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5880324"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 1, "accepted_answer_id": 45330308, "answer_count": 1, "score": 2, "last_activity_date": 1501080262, "creation_date": 1501079889, "question_id": 45330148, "link": "https://stackoverflow.com/questions/45330148/c-initialize-member-variables-with", "title": "C++ initialize member variables with { }", "body": "<p>Recently I have seen member variable initialization in c++ as such:</p>\n\n<pre><code>class foo\n{\npublic:\n    foo();\nprivate:\n    bool bar{false};\n};\n</code></pre>\n\n<p>What is the point of variable initialization like this/how does member variable declaration/definition like this differ or not differ from using an initialization list as such:</p>\n\n<pre><code>foo::foo() : bar(false) {}\n</code></pre>\n"}]