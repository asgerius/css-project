[{"tags": ["c++", "inheritance", "static", "constants"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1472688354, "post_id": 39260755, "comment_id": 65857493, "body": "The only thing your code modifies is <code>static_child</code> which is a non-const object"}], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 2454025, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cdf738ba6122adf3df31306e076a2a55?s=128&d=identicon&r=PG", "display_name": "Bob", "link": "https://stackoverflow.com/users/2454025/bob"}, "edited": false, "score": 0, "creation_date": 1472688719, "post_id": 39260808, "comment_id": 65857591, "body": "Concerning this change - sorry, typo in main code. Fixed."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 137, "user_id": 2454025, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cdf738ba6122adf3df31306e076a2a55?s=128&d=identicon&r=PG", "display_name": "Bob", "link": "https://stackoverflow.com/users/2454025/bob"}, "edited": false, "score": 0, "creation_date": 1472689002, "post_id": 39260808, "comment_id": 65857651, "body": "@Bob So... what&#39;s your question? Can you fool the compiler into doing questionable things?"}, {"owner": {"reputation": 137, "user_id": 2454025, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cdf738ba6122adf3df31306e076a2a55?s=128&d=identicon&r=PG", "display_name": "Bob", "link": "https://stackoverflow.com/users/2454025/bob"}, "edited": false, "score": 0, "creation_date": 1472689305, "post_id": 39260808, "comment_id": 65857715, "body": "Concerning this change - sorry, typo in main code. Fixed. Now <code>fun</code> modifies <b>this</b>. I didn&#39;t get explanation about const qualification still... <code>static_child</code> is object of the class Child? Yes. An object of class Child has non-static member <code>content</code> ? Yes. How <code>content</code> of static class object is different from <code>content</code> in non-static class object?"}, {"owner": {"reputation": 137, "user_id": 2454025, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cdf738ba6122adf3df31306e076a2a55?s=128&d=identicon&r=PG", "display_name": "Bob", "link": "https://stackoverflow.com/users/2454025/bob"}, "edited": false, "score": 0, "creation_date": 1472689511, "post_id": 39260808, "comment_id": 65857763, "body": "In another words, I understand that class instance is static. But non-static member<code>content</code> of a static class instance <code>static_child</code> still regular non-static member?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 137, "user_id": 2454025, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cdf738ba6122adf3df31306e076a2a55?s=128&d=identicon&r=PG", "display_name": "Bob", "link": "https://stackoverflow.com/users/2454025/bob"}, "edited": false, "score": 0, "creation_date": 1472689606, "post_id": 39260808, "comment_id": 65857786, "body": "@Bob Yes, but you&#39;re not accessing it through <code>this</code>. You&#39;re accessing it through a non-<code>const</code> interface."}, {"owner": {"reputation": 137, "user_id": 2454025, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cdf738ba6122adf3df31306e076a2a55?s=128&d=identicon&r=PG", "display_name": "Bob", "link": "https://stackoverflow.com/users/2454025/bob"}, "edited": false, "score": 0, "creation_date": 1472690344, "post_id": 39260808, "comment_id": 65857946, "body": "<code>b-&gt; fun(*b).fun(*b);</code>  First <code>fun</code> call returns reference to <code>static_child</code>. Second fun call runs for <code>this</code> equal to <code>&amp;static_chilld</code>. All objects of class Child have a regular, non-static member <code>content</code>. Second call modifies <code>static_child.content</code>, which is actually is <code>this-&gt;content</code>. In the end, we have const function <code>fun</code> modifying a regular non-const member of class Child. Which looks like a contradiction to me. I thought <code>fun</code> guaranteed not to change <code>content</code>. Moreover, I thought <code>fun</code> guaranteed not to change <code>content</code> neigther in <code>this</code> nor in any other Child object."}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 0, "creation_date": 1472690750, "post_id": 39260808, "comment_id": 65858045, "body": "<code>this</code> is not the same as <code>&amp;static_child</code> on the second call.  <code>this</code> has the type <code>const Child*</code>, but <code>&amp;statc_child</code> has the type <code>Child*</code>.  It is not <code>const</code>, and is therefore fine to change.  It doesn&#39;t matter that it actually points to the same object as <code>this</code>."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 137, "user_id": 2454025, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cdf738ba6122adf3df31306e076a2a55?s=128&d=identicon&r=PG", "display_name": "Bob", "link": "https://stackoverflow.com/users/2454025/bob"}, "edited": false, "score": 0, "creation_date": 1472690890, "post_id": 39260808, "comment_id": 65858068, "body": "@Bob Yes, but you&#39;re not explicitly modifying anything in <code>this</code>. You&#39;re modifying via <code>static_child</code>, which is non-<code>const</code>. The language doesn&#39;t prevent you from doing questionable things if you try really hard to do them."}, {"owner": {"reputation": 137, "user_id": 2454025, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cdf738ba6122adf3df31306e076a2a55?s=128&d=identicon&r=PG", "display_name": "Bob", "link": "https://stackoverflow.com/users/2454025/bob"}, "edited": false, "score": 0, "creation_date": 1472691122, "post_id": 39260808, "comment_id": 65858115, "body": "Thanks. I think I understand now. Const function monitors access - and will fail to compile if change is attempted - via <b>this</b>. It doesn&#39;t care if some other pointer or reference actually refers to the same object as <b>this</b>."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 3, "last_activity_date": 1472688223, "creation_date": 1472688223, "answer_id": 39260808, "question_id": 39260755, "link": "https://stackoverflow.com/questions/39260755/const-member-function-modifies-static-object-of-own-class/39260808#39260808", "title": "const member function modifies static object of own class", "body": "<blockquote>\n  <p>So <code>const</code> function successfully changed Child object. Moreover, on the second call it successfully changed <strong>this</strong> object. </p>\n</blockquote>\n\n<p>Neither call changed <code>this</code>. <code>c.content</code> remains <code>10</code> at the end of the program. The <code>const</code> qualification on the member function simply prevents you from modifying non-<code>mutable</code>, non-<code>static</code> members of the class instance itself. But you're not doing that - you're modifying a member of a local <code>static</code>. That's not something that's promised by <code>const</code> qualification and is, as you observe in your program, perfectly legal. </p>\n"}], "owner": {"reputation": 137, "user_id": 2454025, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cdf738ba6122adf3df31306e076a2a55?s=128&d=identicon&r=PG", "display_name": "Bob", "link": "https://stackoverflow.com/users/2454025/bob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1472688644, "creation_date": 1472687796, "last_edit_date": 1472688644, "question_id": 39260755, "link": "https://stackoverflow.com/questions/39260755/const-member-function-modifies-static-object-of-own-class", "title": "const member function modifies static object of own class", "body": "<p>I saw multiple answered questions here about const member function allowed to modify static members. But not sure if my question falls into same category. In my example static member function modifies static object of the class, not static member of the class. Why my example works?</p>\n\n<pre><code>class Base\n{\npublic:\n    virtual const Base&amp; fun (const Base&amp; n) const = 0;\n};\n\nclass Child : public Base\n{\n    int content;\npublic:\n    Child(int i = 0) : content(i) {}\n    const Base&amp; fun (const Base&amp; n) const;\n};\n\nconst Base&amp; Child::fun (const Base&amp; n) const\n{    \n    static Child static_child;\n    static_child.content = content + static_cast&lt;const Child&amp;&gt;(n).content;\n    cout &lt;&lt; \"static child content is \" &lt;&lt; static_child.content &lt;&lt; endl;\n    return static_child;\n}\n\nint main() {\n    Child c(10);\n    Base* b = &amp;c;\n    b-&gt;fun(*b).fun(*b);\n}\n</code></pre>\n\n<p>The output will be</p>\n\n<pre><code>static child content is 20\nstatic child content is 30\n</code></pre>\n\n<p>So const function successfully changed Child object. Moreover, on the second call it successfully changed <strong>this</strong> object. Thanks.</p>\n"}, {"tags": ["c++", "memory-management", "process", "cpu-usage"], "comments": [{"owner": {"reputation": 3501, "user_id": 3124409, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/5922e9a9b3b7aef6002860ed4515b57d?s=128&d=identicon&r=PG&f=1", "display_name": "Goodies", "link": "https://stackoverflow.com/users/3124409/goodies"}, "edited": false, "score": 0, "creation_date": 1472686234, "post_id": 39260507, "comment_id": 65856973, "body": "Why the immediate downvote with no explanation? I&#39;ve googled various formulations of this question and I run into &quot;process explorer&quot; after &quot;task manager&quot; after &quot;top&quot; etc..."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1472686422, "post_id": 39260507, "comment_id": 65857018, "body": "I can only guess, but probably because you haven&#39;t done much to define exactly what about the process you want to monitor, whether you want to display it real-time, or just collect a summary when it exits, etc. You probably also need to specify the operating system you want to target."}], "answers": [{"tags": [], "owner": {"reputation": 446, "user_id": 888624, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/392039c3c5ee1f883b68b52edf8413bf?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/888624/chris"}, "is_accepted": false, "score": 0, "last_activity_date": 1472686470, "creation_date": 1472686470, "answer_id": 39260581, "question_id": 39260507, "link": "https://stackoverflow.com/questions/39260507/monitor-memory-usage-from-process-beginning-to-end/39260581#39260581", "title": "Monitor memory usage from process beginning to end", "body": "<p><a href=\"http://valgrind.org/docs/manual/ms-manual.html\" rel=\"nofollow\">Valgrind</a> has a tool for this, it is called Massif. </p>\n"}], "owner": {"reputation": 3501, "user_id": 3124409, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/5922e9a9b3b7aef6002860ed4515b57d?s=128&d=identicon&r=PG&f=1", "display_name": "Goodies", "link": "https://stackoverflow.com/users/3124409/goodies"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1472686470, "creation_date": 1472685921, "question_id": 39260507, "link": "https://stackoverflow.com/questions/39260507/monitor-memory-usage-from-process-beginning-to-end", "title": "Monitor memory usage from process beginning to end", "body": "<p>I would like to monitor a processes' CPU and Memory usage (usage, heap allocations, locations, etc...) from the time the process begins until it exits.</p>\n\n<p>For example:</p>\n\n<blockquote>\n  <p>monitorProcess.exe myProcess.exe --myProcessParameter 123</p>\n</blockquote>\n\n<p>Are there any tools (preferably open source) that perform this? </p>\n\n<p>Alternatively, what key API functions should I research to do this myself?</p>\n\n<p>I'm not looking for Process Explorer or something like that. I want to attach it to a specific process and monitor only that one.</p>\n"}, {"tags": ["c++", "winapi", "stack"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1472685601, "post_id": 39260431, "comment_id": 65856807, "body": "Well, the operating system will need to suddenly find a gig of RAM to map, on the first page fault. It&#39;ll probably need to evict some processes from memory, and dump them to a swap file, before resuming execution of this very, very, rude process."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 3, "creation_date": 1472685654, "post_id": 39260431, "comment_id": 65856817, "body": "(1) The DLL is loaded when the application starts, not when you first call a method it in. (2) A DLL doesn&#39;t &#39;inherit the stack from the executable&#39;. A DLL doesn&#39;t have a stack, and neither does an executable. <i>Threads</i> have stacks. (3) You don&#39;t need a stack that big."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1472685699, "post_id": 39260431, "comment_id": 65856833, "body": "1073741824 bytes is not 512 MB. It&#39;s 1 GB. And the fact, that your application <i>&quot;hangs&quot;</i> at a <code>GetMessage</code> call is normal behavior, for a high-traffic, blocking call. If you randomly break into any given Windows application, it&#39;ll usually be waiting for messages to arrive."}, {"owner": {"reputation": 5930, "user_id": 815787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54d63bc7f3fac2cef3d9761e8afbaca6?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/815787/serge"}, "edited": false, "score": 0, "creation_date": 1472685911, "post_id": 39260431, "comment_id": 65856885, "body": "by the way, why do you need such a big stack in a message-driven windows app?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1472686231, "post_id": 39260431, "comment_id": 65856972, "body": "And since EJP pointed it out: The stack is owned by a thread. And every thread gets the default stack size. So if you have more than one thread (and pretty much every application creates threads), the system needs to find 1 GB of memory for each one. How many threads do you have?"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 1, "creation_date": 1472691101, "post_id": 39260431, "comment_id": 65858111, "body": "Not sure, but have you tried turning off the randomization of base addresses? I think it&#39;s on by default with Visual C++. Anyway, big stack requirement implies something fishy about the code."}, {"owner": {"reputation": 269, "user_id": 5323835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddc0c309c0aaf5ed53cf53baabc49206?s=128&d=identicon&r=PG&f=1", "display_name": "PaulHK", "link": "https://stackoverflow.com/users/5323835/paulhk"}, "edited": false, "score": 2, "creation_date": 1472699422, "post_id": 39260431, "comment_id": 65859963, "body": "Are you using debug mode ? Visual studio usually clears the stack with &#39;sentinel&#39; values to detect accessing unassigned variables. Maybe this is done all at once in microsoft&#39;s debug crt."}, {"owner": {"reputation": 5015, "user_id": 26221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/FGBGm.jpg?s=128&g=1", "display_name": "Ryan O&#39;Neill", "link": "https://stackoverflow.com/users/26221/ryan-oneill"}, "edited": false, "score": 0, "creation_date": 1472722018, "post_id": 39260431, "comment_id": 65870011, "body": "1) 1gb, yes, big, but it&#39;s particle physics, the s/w is older than me (late 60&#39;s) and the original maintainer has retired. It could be fixed but I want to find out what is going on. 2) I got DLL load wrong, updated question."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 2, "creation_date": 1472723347, "post_id": 39260431, "comment_id": 65871000, "body": "You&#39;ll need to fix the Fortran code to make more sane use of stack. You can&#39;t expect a process to function with 1GB default stack size. That doesn&#39;t end well. If you can&#39;t fix the Fortran code at least execute it in a thread that you create with a stack size that you define when you create it. And stick to the default 1MB stack size for your process. Then at least only one thread in your process is clobbered. Make sure you create that thread on startup though when address space is easy to come by. You&#39;ll want 64 bit code too."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1472730732, "post_id": 39260431, "comment_id": 65875910, "body": "I just wonder how the program was getting 1GB of stack when it ran in the late 60s."}, {"owner": {"reputation": 5015, "user_id": 26221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/FGBGm.jpg?s=128&g=1", "display_name": "Ryan O&#39;Neill", "link": "https://stackoverflow.com/users/26221/ryan-oneill"}, "edited": false, "score": 0, "creation_date": 1472731872, "post_id": 39260431, "comment_id": 65876750, "body": "Obviously, it&#39;s grown and that was tacked on to solve a problem."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1472767508, "post_id": 39260431, "comment_id": 65897548, "body": "<i>What I am after specifically, is what is happening [...] might provide a clue and a workaround</i> - it might be something to do with the various anti-hacking measures incorporated into modern versions of Windows.  The only way to tell for sure would be to step into the API to see what it&#39;s actually doing.  (Perhaps try running the FORTRAN app in a VM running as old a version of Windows as you can get your hands on?  Or on Linux, for that matter?)"}], "owner": {"reputation": 5015, "user_id": 26221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/FGBGm.jpg?s=128&g=1", "display_name": "Ryan O&#39;Neill", "link": "https://stackoverflow.com/users/26221/ryan-oneill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1472723859, "creation_date": 1472685343, "last_edit_date": 1472723859, "question_id": 39260431, "link": "https://stackoverflow.com/questions/39260431/why-might-a-large-stack-size-cause-a-delay-on-first-win-api-call", "title": "Why might a large stack size cause a delay on first Win API call?", "body": "<p>I have used the File New C++ app Wizard in Visual Studio 2015 to create a simple 'Hello World' Window app. When linked with the default stack size, it launches instantly.</p>\n\n<p>When linked with a stack reserve size of 1073741824, the app hangs for tens of minutes before becoming responsive again.</p>\n\n<p>Increasing the stack size gradually from the default will also increase the delay gradually.</p>\n\n<p>In another executable I have used EditBin.exe to change the stack from the 1mb default to the 1gb value above and it also hangs in the same way and becomes responsive later on. Changing it back causes everything to run smoothly again.</p>\n\n<p>I think I have tracked it down to the first WIN32 API call. It does not seem to be the particular call itself but the fact that a new DLL is being loaded and inheriting the stack from the executable. CPU and memory stay idle during this operation. I think it is compounded by the exe being 32 bit and running on 64 bit.</p>\n\n<p>This is a repro for a large application which uses a very big stack so I'd like to figure out what could be happening in general when that first API call is executed. Is memory being zeroed out?</p>\n\n<p>When debugging in Visual Studio, the hang happens here but I think this is misleading.</p>\n\n<pre><code>// Main message loop:\nwhile (GetMessage(&amp;msg, nullptr, 0, 0))\n{\n</code></pre>\n\n<p><strong>Update:</strong>\n Stack size: Not my code, but the original is a Fortran app which does a lot of calcs for particle physics and that size was set originally. I can't change it without understanding what is going on first.</p>\n\n<p>Release mode: All compiled for release mode, 32 bit.</p>\n\n<p>Memory usage: I don't actually see any memory assigned or CPU activity though. From what I understand, the stack reserve is just a reserve to call upon it's not actively assigned at app start. The app uses the same memory at both stack levels on startup.</p>\n\n<p>Single threaded: Just the example app out of File New.</p>\n\n<p>Loading DLL: In debugging the original Fortran code (of which this is a repro) the issue happened when the DLL was called. Checked with a WinHelp call and a Window Create call. I assumed the DLL was being loaded in process at this point.</p>\n\n<p><strong>Update2:</strong>\n I understand I need to fix the code, this is part of investigating it. It also happens with this C++ code. What I am after specifically, is what is happening when the WIN API is called and the UI becomes unresponsive? That might provide a clue and a workaround until the 40-50 year old Fortran code is re-worked and upgraded to 64 bit.</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 2, "creation_date": 1472685773, "post_id": 39260405, "comment_id": 65856853, "body": "Quickest solution for real world code: Use a single, non templated overload <code>std::string tQuoted(const std::string &amp;convert)</code> instead. <a href=\"http://melpon.org/wandbox/permlink/1t8kxQicD4VgzgT6\" rel=\"nofollow noreferrer\">Live</a>. Function template specializations are weird anyways; see <a href=\"http://www.gotw.ca/publications/mill17.htm\" rel=\"nofollow noreferrer\">this GOTW</a> for example."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1472685894, "post_id": 39260405, "comment_id": 65856880, "body": "There&#39;s nothing in your templated overloads that depends on the template parameter, so the compiler can&#39;t deduce the parameter, so it doesn&#39;t instantiate them.."}, {"owner": {"reputation": 6911, "user_id": 2970186, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Vo0Wc.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2970186/daniel"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1472688577, "post_id": 39260405, "comment_id": 65857547, "body": "@BaummitAugen As this question is tagged C++11, I think it would be better to take the argument by value rather than const reference. <a href=\"http://coliru.stacked-crooked.com/a/774334714449c1c9\" rel=\"nofollow noreferrer\">Example</a>."}], "answers": [{"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 3, "creation_date": 1472695763, "post_id": 39260440, "comment_id": 65859145, "body": "There is zero zip nada reason to use function template specialization here.  It is like someone posting <code>int*i=new int(7); std::cout &lt;&lt; i &lt;&lt; &#39;\\n&#39;;</code> and asking why it does not print 7, and answering they need to dereference <code>i</code>.  Really, the problem was the <code>new</code>.  The OP&#39;s problem was the <code>template&lt;class T&gt;</code>, not the improper specialization."}], "tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": true, "score": 6, "last_activity_date": 1472685375, "creation_date": 1472685375, "answer_id": 39260440, "question_id": 39260405, "link": "https://stackoverflow.com/questions/39260405/why-does-a-stdstring-object-passed-to-a-template-function-not-prefer-stdstri/39260440#39260440", "title": "Why does a std::string object passed to a template function not prefer std::string overload?", "body": "<p>You are not specializing the template function correctly. This is how to correctly specialize it:</p>\n\n<pre><code>template&lt;&gt;\nstd::string tQuoted(const std::string &amp;convert)\n{\n    std::cout &lt;&lt; \"Called std::string overload\" &lt;&lt; std::endl;\n    return (\"\\\"\" + convert + \"\\\"\");\n}\n</code></pre>\n\n<p>Resulting output becomes:</p>\n\n<pre><code>Called std::string overload\n\"Hello\"\nCalled std::string overload\n\"30 Days Of Coding\"\nCalled std::string overload\n\"All Work And No Play\"\nCalled std::string overload\n\"Hello, World!\"\nCalled std::string overload\n\"Hello, World!\"\nCalled template overload\n\"0x1c27d10\"\nCalled std::string overload\n\"Another string\"\n</code></pre>\n\n<p>Note that for</p>\n\n<pre><code>tQuoted(mySuperPtr) \n</code></pre>\n\n<p><code>mySuperPtr</code> is a pointer to a string, and not a string, hence this doesn't use the specialized template function.</p>\n"}, {"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 3, "last_activity_date": 1472688421, "creation_date": 1472688421, "answer_id": 39260834, "question_id": 39260405, "link": "https://stackoverflow.com/questions/39260405/why-does-a-stdstring-object-passed-to-a-template-function-not-prefer-stdstri/39260834#39260834", "title": "Why does a std::string object passed to a template function not prefer std::string overload?", "body": "<p>Take a careful look at this function template that you wrote:</p>\n\n<pre><code>template&lt;typename T&gt;\nstd::string tQuoted(const std::string &amp;convert)\n{\n    std::cout &lt;&lt; \"Called std::string overload\" &lt;&lt; std::endl;\n    return (\"\\\"\" + convert + \"\\\"\");\n}\n</code></pre>\n\n<p>It's a function template, with template parameter <code>T</code>, but where does <code>T</code> come from? It's nowhere. Specifically, it's a non-deduced context. There's no way for the compiler to tell what <code>T</code> is from <code>tQuoted(myString)</code>, you'd have to explicitly call <code>tQuoted&lt;X&gt;(myString)</code>. </p>\n\n<p>But in this case, you don't actually want <code>T</code> anyway. You're not trying to write a new function template. You're trying to write an <strong>overload</strong> specifically for <code>std::string</code> (as the body of your function suggests). So just write an overload:</p>\n\n<pre><code>std::string tQuoted(const std::string &amp;convert)\n{\n    std::cout &lt;&lt; \"Called std::string overload\" &lt;&lt; std::endl;\n    return (\"\\\"\" + convert + \"\\\"\");\n}\n</code></pre>\n\n<p>No <code>template</code> necessary. The same is true of all your other overloads - they are all accidentally function templates with template parameters that are non-deduced contexts.  </p>\n\n<p>Avoid function template specializations unless you really, really need them. Which, in this case, you don't. See <a href=\"http://www.gotw.ca/publications/mill17.htm\" rel=\"nofollow\">Why Not Specialize Function Templates?</a></p>\n"}], "owner": {"reputation": 821, "user_id": 4791654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-f6OIWNb562I/AAAAAAAAAAI/AAAAAAAAACY/Kuh1tIUZLbk/photo.jpg?sz=128", "display_name": "Tyler Lewis", "link": "https://stackoverflow.com/users/4791654/tyler-lewis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 39260440, "answer_count": 2, "score": 2, "last_activity_date": 1472688421, "creation_date": 1472685157, "question_id": 39260405, "link": "https://stackoverflow.com/questions/39260405/why-does-a-stdstring-object-passed-to-a-template-function-not-prefer-stdstri", "title": "Why does a std::string object passed to a template function not prefer std::string overload?", "body": "<p>I'm writing a program and I want to be able to cleanly wrap a string in quotes without having to do something like </p>\n\n<pre><code>std::string firstString = \"This is a string\";\nstd::string myString = \"\\\"\" + firstString + \"\\\"\";    \n</code></pre>\n\n<p>So I wrote a couple of template functions to take their arguments and wrap them in quotes. I've also included my first (naive) attempt at writing a general toString() function (I know about to_string, but I'm doing this for learning too).</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;sstream&gt;\n#include &lt;typeinfo&gt;\n\ntemplate &lt;typename T&gt;\nstd::string toString(const T &amp;convert)\n{\n    std::string returnString{\"\"};\n    std::stringstream transfer;\n    transfer &lt;&lt; convert;\n    transfer &gt;&gt; returnString;\n    return returnString;\n}\n\ntemplate&lt;typename T&gt;\nstd::string tQuoted(const T &amp;convert)\n{\n    std::cout &lt;&lt; \"Called template overload\" &lt;&lt; std::endl;\n    return (\"\\\"\" + toString(convert) + \"\\\"\");\n}\n\ntemplate&lt;typename T&gt;\nstd::string tQuoted(const std::string &amp;convert)\n{\n    std::cout &lt;&lt; \"Called std::string overload\" &lt;&lt; std::endl;\n    return (\"\\\"\" + convert + \"\\\"\");\n}\n\ntemplate&lt;typename T&gt;\nstd::string tQuoted(const char *convert)\n{\n    std::cout &lt;&lt; \"Called const char overload\" &lt;&lt; std::endl;\n    return (\"\\\"\" + static_cast&lt;std::string&gt;(convert) + \"\\\"\");\n}\n\ntemplate&lt;typename T&gt;\nstd::string tQuoted(std::string convert)\n{\n    std::cout &lt;&lt; \"Called normal std::string overload\" &lt;&lt; std::endl;\n    return (\"\\\"\" + convert + \"\\\"\");\n}\n\ntemplate&lt;typename T&gt;\nstd::string tQuoted(std::string&amp;&amp; convert)\n{\n    std::cout &lt;&lt; \"Called rvalue std::string overload\" &lt;&lt; std::endl;\n    return (\"\\\"\" + convert + \"\\\"\");\n}\n\nint main()\n{\n    std::vector&lt;std::string&gt; my{\"Hello\", \"30 Days Of Coding\", \"All Work And No Play\"};\n\n    std::string myString = \"Hello, World!\";\n    std::string *strPtr = &amp;myString;\n    std::string *mySuperPtr = new std::string{\"He's a cockaroach\"};\n\n    for (std::vector&lt;std::string&gt;::const_iterator iter = my.begin(); iter != my.end(); iter++) {\n        std::cout &lt;&lt; tQuoted(*iter) &lt;&lt; std::endl;\n    }\n\n    std::cout &lt;&lt; tQuoted(myString) &lt;&lt; std::endl;\n    std::cout &lt;&lt; tQuoted(*strPtr) &lt;&lt; std::endl;\n    std::cout &lt;&lt; tQuoted(mySuperPtr) &lt;&lt; std::endl;\n    std::cout &lt;&lt; tQuoted(std::string{\"Another string\"}) &lt;&lt; std::endl;\n\n    delete mySuperPtr;\n    mySuperPtr = nullptr;\n\n    return 0;\n\n}\n</code></pre>\n\n<p>Every one of those calls the template constructor:</p>\n\n<pre><code>Called template overload\n\"Hello\"\nCalled template overload\n\"30\"\nCalled template overload\n\"All\"\nCalled template overload\n\"Hello,\"\nCalled template overload\n\"Hello,\"\nCalled template overload\n\"0x13cad10\"\nCalled template overload\n\"Another\"\n</code></pre>\n\n<p>Of course, a much less naive toString() method would do basic checking to see if the parameter was a std::string, and just return that if it was. It seems that a std::stringstream will stop when it encounters the first space in a string (hence the truncated output). However, this isn't the main focus of my confusion.</p>\n\n<p>Sorry for the very basic question, but this one really has me stumped. Thanks for any help you can provide.</p>\n"}, {"tags": ["c++", "cmake", "android-gradle-plugin", "swig", "android-studio-2.2"], "answers": [{"tags": [], "owner": {"reputation": 958, "user_id": 4496512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/beb8bd9953c0539aab9ff5bfb8bff75f?s=128&d=identicon&r=PG&f=1", "display_name": "Gerry", "link": "https://stackoverflow.com/users/4496512/gerry"}, "is_accepted": true, "score": 2, "last_activity_date": 1476341159, "creation_date": 1476341159, "answer_id": 40014071, "question_id": 39260293, "link": "https://stackoverflow.com/questions/39260293/gradle-task-ordering-issue-in-android-studio/40014071#40014071", "title": "Gradle task ordering issue in Android Studio", "body": "<p>Yeah, this is because Android Studio IDE need get the files to display in IDE before compile: expose different behavior between command line and IDE build.  In <a href=\"https://github.com/googlesamples/android-ndk/blob/master/webp/view/build.gradle\" rel=\"nofollow\">here</a> I hack to download the needed repo earlier than anything else, so Android Studio will not complain. But it is not pretty... and long android studio start up time...</p>\n"}, {"tags": [], "owner": {"reputation": 1559, "user_id": 992509, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/tJ13t.png?s=128&g=1", "display_name": "SJoshi", "link": "https://stackoverflow.com/users/992509/sjoshi"}, "is_accepted": false, "score": 3, "last_activity_date": 1510736629, "creation_date": 1510736629, "answer_id": 47303202, "question_id": 39260293, "link": "https://stackoverflow.com/questions/39260293/gradle-task-ordering-issue-in-android-studio/47303202#47303202", "title": "Gradle task ordering issue in Android Studio", "body": "<p>I've run into this same problem with the order of the build in Android Studio 3 (and 2.3 I guess).</p>\n\n<p>I don't know if this is a traditionally valid solution, but it -seems- to work in my Android/SWIG/NDK example (here: <a href=\"https://github.com/sureshjoshi/android-ndk-swig-example\" rel=\"nofollow noreferrer\">https://github.com/sureshjoshi/android-ndk-swig-example</a>)</p>\n\n<p>I added this into my Gradle file, so that CMake is called before the build fails out on missing files. CMake calls SWIG to auto-generate my Java files and place them appropriately.</p>\n\n<pre><code>project.afterEvaluate {\n    javaPreCompileDebug.dependsOn externalNativeBuildDebug\n}\n</code></pre>\n\n<p>I probably also need a</p>\n\n<pre><code>javaPreCompileRelease.dependsOn externalNativeBuildRelease\n</code></pre>\n\n<p>or something similar... Just haven't tested it yet.</p>\n\n<p>Stemmed from this issue: <a href=\"https://github.com/sureshjoshi/android-ndk-swig-example/issues/8\" rel=\"nofollow noreferrer\">https://github.com/sureshjoshi/android-ndk-swig-example/issues/8</a></p>\n"}], "owner": {"reputation": 1982, "user_id": 414752, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d164192fdddc3e799f54f2e8b6726da8?s=128&d=identicon&r=PG", "display_name": "Harkish", "link": "https://stackoverflow.com/users/414752/harkish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2028, "favorite_count": 2, "accepted_answer_id": 40014071, "answer_count": 2, "score": 8, "last_activity_date": 1510736629, "creation_date": 1472684332, "question_id": 39260293, "link": "https://stackoverflow.com/questions/39260293/gradle-task-ordering-issue-in-android-studio", "title": "Gradle task ordering issue in Android Studio", "body": "<p>I am using Android Studio 2.2 Beta 3 and my test project uses CMake to build a hybrid C++ and Java app. The JNI interface is generated by SWIG. This means that I would want to generate the SWIG wrappers before the externalNativeBuild and JavaCompile gradle tasks; ie my CMakeLists.txt specifies the cpp wrapper file generated by SWIG and my java code imports the java wrapper files generated by SWIG.</p>\n\n<p>To ensure SWIG is run and generates the necessary wrapper files before any tasks, I specifies the following in my app/build.gradle file</p>\n\n<pre><code>project.afterEvaluate {\n    preBuild.dependsOn(\"runSwig\")\n}\n</code></pre>\n\n<p>When I run from the commandline using the command </p>\n\n<pre><code>./gradlew assembleDebug\n</code></pre>\n\n<p>I do not face any issues and as expected my task \"runSwig\" runs before any of the other tasks</p>\n\n<pre><code>:app:runSwig\n:app:preBuild\n:app:preDebugBuild\n&lt;blah blah more tasks&gt;\n:app:externalNativeBuildDebug\n</code></pre>\n\n<p>But issue is when the project is first opened in Android Studio, it looks like the external native build gets invoked before runSwig and I get the error</p>\n\n<pre><code>CMake Error at CMakeLists.txt:79 (add_library):\n  Cannot find source file:\n\n    ../../../wrap.cxx\n\n  Tried extensions .c .C .c++ .cc .cpp .cxx .m .M .mm .h .hh .h++ .hm .hpp\n  .hxx .in .txx\n\nFAILURE: Build failed with an exception.\n</code></pre>\n\n<p>The error does not go away till I either assemble using command line OR, remove the wrap.cxx file from my CMakeLists.txt and re-add it after swig gets run successfully at-least once. </p>\n"}, {"tags": ["c++", "c", "c++11"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 3, "creation_date": 1472683357, "post_id": 39260062, "comment_id": 65856183, "body": "The Standard says that <code>offsetof</code> does what it says it does. That&#39;s all you need to know."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1472683431, "post_id": 39260062, "comment_id": 65856203, "body": "The implementation can do whatever it wants as long as it works (that is, does what the standard says it should). UB applies to user code only."}, {"owner": {"reputation": 3120, "user_id": 2012007, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/3cf2a036d360f8e177696b7f811dab05?s=128&d=identicon&r=PG", "display_name": "Graznarak", "link": "https://stackoverflow.com/users/2012007/graznarak"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1472683453, "post_id": 39260062, "comment_id": 65856211, "body": "@KerrekSB I understand that <code>offsetof</code> is specified in the standard, so it will just work if the implementation is supported by the compiler.  What I want to know is if it is valid for me to write similar code and expect it to work."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 3, "creation_date": 1472683466, "post_id": 39260062, "comment_id": 65856215, "body": "It&#39;s not dereferencing a null pointer. It&#39;s casting 0 to a pointer t s and taking then dereferencing the m memer of s, then casting it to <code>char const volatile&amp;</code> and then taking the address of that (&amp;) and casting it to size_t. In simpler terms, it asks &quot;If an object of type s, was at address 0, what would the address of member m be (because that would be the offset of m in s)&quot;. Due to some nuances, it&#39;s implementation defined if this&#39;ll work. Obviously it will for VS2015 since they&#39;re using it."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 2, "creation_date": 1472683528, "post_id": 39260062, "comment_id": 65856240, "body": "@Graznarak No, you can&#39;t."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1472683961, "post_id": 39260062, "comment_id": 65856356, "body": "A simpler example: <code>char *cptr; printf(&quot;%zu\\n&quot;, sizeof(*cptr));</code> is not derefencing an undefined variable. It&#39;s not dereferencing anything."}, {"owner": {"reputation": 3120, "user_id": 2012007, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/3cf2a036d360f8e177696b7f811dab05?s=128&d=identicon&r=PG", "display_name": "Graznarak", "link": "https://stackoverflow.com/users/2012007/graznarak"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1472684185, "post_id": 39260062, "comment_id": 65856428, "body": "@WeatherVane <code>sizeof</code> is an unevaluated context.  The content is never evaluated so there is no undefined behavior as far as dereferencing the null pointer."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1472684275, "post_id": 39260062, "comment_id": 65856450, "body": "@Graznarak <code>offsetof</code> is similar. It&#39;s a compiler evaluation, not at runtime."}, {"owner": {"reputation": 3120, "user_id": 2012007, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/3cf2a036d360f8e177696b7f811dab05?s=128&d=identicon&r=PG", "display_name": "Graznarak", "link": "https://stackoverflow.com/users/2012007/graznarak"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1472684346, "post_id": 39260062, "comment_id": 65856473, "body": "@WeatherVane <code>offsetof</code> is not an unevaluated context.  It is a standard defined macro that returns a <code>size_t</code> that is the offset of the member relative to the beginning of the type."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1472684395, "post_id": 39260062, "comment_id": 65856489, "body": "A macro is not a function. It is evaluated at compile time."}, {"owner": {"reputation": 3120, "user_id": 2012007, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/3cf2a036d360f8e177696b7f811dab05?s=128&d=identicon&r=PG", "display_name": "Graznarak", "link": "https://stackoverflow.com/users/2012007/graznarak"}, "edited": false, "score": 0, "creation_date": 1472684478, "post_id": 39260062, "comment_id": 65856509, "body": "A macro essentially does a text substitution.  So, I guess that you could say that a macro is not evaluated at runtime, but it just does a text substitution, so the substituted text is still evaluated."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1472684529, "post_id": 39260062, "comment_id": 65856531, "body": "@Graznarak the offset is known at compile time. There is nothing to dereference."}, {"owner": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1472684983, "post_id": 39260062, "comment_id": 65856631, "body": "@WeatherVane: You&#39;re missing the point. <code>sizeof(*static_cast&lt;int*&gt;(nullptr))</code>  does not dereference a null pointer because the expression is not evaluated.  This is called an unevaluated context. Obviously, just <code>*static_cast&lt;int*&gt;(nullptr)</code> would be evaluated, and it would be undefined behavior for dereferencing a null pointer. The <code>offsetof</code> macro provided is <i>not</i> an unevaluated context; after macro text substitution, the compiler <i>will</i> evaluate the result; the fact that its result is always the same has nothing to do with whether or not it&#39;s evaluated."}, {"owner": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 0, "creation_date": 1472685196, "post_id": 39260062, "comment_id": 65856699, "body": "The question is fair: no, we are not allowed to dereference null because the behavior is undefined, full stop. The compiler writers, of course, can peek into what undefined <i>really</i> means and do whatever they want. As far as we are concerned, dereferencing a null pointer reformats the entire disk, unless it occurs in this exact expression. Obviously this is a strange implementation of undefined behavior, and in reality there <i>are</i> guarantees about dereferencing null as is done here, but we aren&#39;t privy to what these are. (1/2)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 0, "creation_date": 1472685196, "post_id": 39260062, "comment_id": 65856700, "body": "@GManNickG why the C tag?"}, {"owner": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 0, "creation_date": 1472685223, "post_id": 39260062, "comment_id": 65856707, "body": "It&#39;s free to fail on other compilers, for example, where <code>offsetof</code> is implemented differently because they don&#39;t give the same &#39;undefined behavior&#39; behavior. (2/2)"}, {"owner": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1472685263, "post_id": 39260062, "comment_id": 65856717, "body": "@WeatherVane: I didn&#39;t add the tag."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1472685370, "post_id": 39260062, "comment_id": 65856750, "body": "Before I first commented I tried to give a type cast of <code>*NULL</code> to <code>sizeof</code> in a C program: MSVC would not have it, which why I skewed my first comment."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1472685528, "post_id": 39260062, "comment_id": 65856786, "body": "Is <code>*NULL</code> dereferencing a null <i><code>void *</code></i>? You can&#39;t dereference any <code>void *</code> (unless, perhaps, you&#39;re using GCC or a compiler compatible with it).  If you converted it to <code>*(int *)NULL</code>, say, it might have worked.  Or it might still object."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1472685599, "post_id": 39260062, "comment_id": 65856806, "body": "I was trying it with a <code>struct</code> pointer before. I just tried again with this <code>printf(&quot;%zu\\n&quot;, sizeof(*(char*)NULL));</code> which works. But I still can&#39;t understand the differnce with finding the offset of a <code>struct</code> member which is known at compile time. However it was not my question!"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1472686085, "post_id": 39260062, "comment_id": 65856926, "body": "Yes, the code in that particular definition of <code>offsetof</code> has undefined behavior if it&#39;s evaluated. That just means the behavior is not defined by the standard. The implementation is free to use it, as long as <i>the implementation</i> can guarantee that the actual behavior matches what the standard requires for <code>offsetof</code>. (If that particular definition of <code>offsetof</code> didn&#39;t work, the implementation would have to define it differently.)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1472688575, "post_id": 39260062, "comment_id": 65857546, "body": "@PSkocik casting <code>0</code> to a pointer is defined as producing a null pointer. The <code>-&gt;</code> operator is defined as dereferencing its left-hand operand  . (You claim it dereferences the right-hand operand, which makes no sense)"}, {"owner": {"reputation": 3120, "user_id": 2012007, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/3cf2a036d360f8e177696b7f811dab05?s=128&d=identicon&r=PG", "display_name": "Graznarak", "link": "https://stackoverflow.com/users/2012007/graznarak"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1472737867, "post_id": 39260062, "comment_id": 65881314, "body": "@WeatherVane The C tag is because offsetof is a macro defined in the C language.  It turns out that this implementation uses a C++ cast instead of a C cast."}], "owner": {"reputation": 3120, "user_id": 2012007, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/3cf2a036d360f8e177696b7f811dab05?s=128&d=identicon&r=PG", "display_name": "Graznarak", "link": "https://stackoverflow.com/users/2012007/graznarak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 159, "favorite_count": 0, "closed_date": 1472683325, "answer_count": 0, "score": 2, "last_activity_date": 1472683347, "creation_date": 1472682968, "last_edit_date": 1472683347, "question_id": 39260062, "link": "https://stackoverflow.com/questions/39260062/is-offsetof-dereferencing-a-null-pointer", "closed_reason": "Duplicate", "title": "Is offsetof dereferencing a null pointer", "body": "<p>In looking at how my compiler (VS2015) implements the <code>offsetof</code> macro, I see the following implementation:</p>\n\n<pre><code>#define offsetof(s,m) ((size_t)&amp;reinterpret_cast&lt;char const volatile&amp;&gt;((((s*)0)-&gt;m)))\n</code></pre>\n\n<p>It appears to me that this is dereferencing a null pointer at <code>((s*)0)-&gt;m</code>.  I understand this to be undefined behavior.  Is this undefined behavior that the compiler specifies more strongly than the language, or is there some nuance to the \"never dereference a null pointer\" rule that I don't understand?</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1472684736, "post_id": 39260058, "comment_id": 65856579, "body": "the C++ compiler &#39;mangles&#39; function names.  The library, created in C, does not have mangled function names.  What header files are you including in your C++ source code?  Do those headers from the C language have the needed `extern &quot;c&quot; { ... wrappers?  so they can be used in C++?"}, {"owner": {"reputation": 43, "user_id": 6358985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f1ea82841abb0f6aeb8bcc7d60a88e8?s=128&d=identicon&r=PG&f=1", "display_name": "EJane", "link": "https://stackoverflow.com/users/6358985/ejane"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1472685521, "post_id": 39260058, "comment_id": 65856784, "body": "Yes. All headers are wrapped with extern &quot;C&quot;"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1472691066, "post_id": 39260058, "comment_id": 65858108, "body": "It&#39;d help if you could make a minimal code example, and give the exact build commands for the library and  the c++ program"}, {"owner": {"reputation": 43, "user_id": 6358985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f1ea82841abb0f6aeb8bcc7d60a88e8?s=128&d=identicon&r=PG&f=1", "display_name": "EJane", "link": "https://stackoverflow.com/users/6358985/ejane"}, "edited": false, "score": 0, "creation_date": 1472754688, "post_id": 39260058, "comment_id": 65891809, "body": "Good point. While trying to construct a minimal example, I was able to work out what was going on. (C++ code was linking to a nonstandard version of stdio.h that didn&#39;t support scanf). Thanks!"}, {"owner": {"reputation": 25756, "user_id": 39648, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0d9ffb2252f073517660f2d0bf71d0db?s=128&d=identicon&r=PG", "display_name": "Autodidact", "link": "https://stackoverflow.com/users/39648/autodidact"}, "edited": false, "score": 0, "creation_date": 1487580345, "post_id": 39260058, "comment_id": 71832025, "body": "Also see question: <a href=\"http://stackoverflow.com/q/3660826/39648\">stackoverflow.com/q/3660826/39648</a>"}], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 6358985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f1ea82841abb0f6aeb8bcc7d60a88e8?s=128&d=identicon&r=PG&f=1", "display_name": "EJane", "link": "https://stackoverflow.com/users/6358985/ejane"}, "is_accepted": false, "score": 0, "last_activity_date": 1472755086, "creation_date": 1472755086, "answer_id": 39278691, "question_id": 39260058, "link": "https://stackoverflow.com/questions/39260058/undefined-reference-to-isoc99-sscanf/39278691#39278691", "title": "undefined reference to __isoc99_sscanf", "body": "<p>In case anyone else runs into this problem: </p>\n\n<p>The Makefile for the C++ code disabled the standard libraries and start files using flags <code>-nostdlib -nodefaultlibs -nostartfiles</code>. It instead linked to the version of <code>stdio.h</code> included in the Intel SGX SDK for running inside enclaves. That version deprecates <code>sscanf</code>.</p>\n"}], "owner": {"reputation": 43, "user_id": 6358985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f1ea82841abb0f6aeb8bcc7d60a88e8?s=128&d=identicon&r=PG&f=1", "display_name": "EJane", "link": "https://stackoverflow.com/users/6358985/ejane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3246, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1472755086, "creation_date": 1472682958, "last_edit_date": 1472690239, "question_id": 39260058, "link": "https://stackoverflow.com/questions/39260058/undefined-reference-to-isoc99-sscanf", "title": "undefined reference to __isoc99_sscanf", "body": "<p>I have a static C library <code>libex.a</code> that uses <code>sscanf</code>. Library was compiled using <code>-std=c99</code></p>\n\n<p>I want to use the library function in some C++ code that I am compiling using <code>-std=c++11</code>, but I get the following error:</p>\n\n<pre><code>lib/libex.a(srcfile.o): In function `my_function':\n/srcpath/srcfile.c:215: undefined reference to `__isoc99_sscanf'\n</code></pre>\n\n<p>After poking around a bit, I have discovered that <code>sscanf</code> has issues with versions due to a backwards compatibility hack, hence the redirect to <code>__isoc99_sscanf</code>, so I suspect that is somehow the source of the problem. However, I checked my version of <code>glibc</code> and it looks recent enough that the solution suggested elsewhere (update your copy of <code>glibc</code> to at least 2.7) isn't helpful.</p>\n\n<pre><code>$ ldd --version\nldd (Ubuntu EGLIBC 2.19-0ubuntu6.6) 2.19\n</code></pre>\n\n<p>Any suggestions?</p>\n\n<p>Of course, let me know if there's any additional information that would be relevant.</p>\n\n<p>Thanks!</p>\n\n<p>UPDATE: If I compile <code>libex.a</code> with <code>-D_GNU_SOURCE</code> the error message is changed to <code>undefined reference to sscanf</code>. Not sure if that will help figure out what's going wrong.</p>\n"}, {"tags": ["c++", "package", "nuget"], "answers": [{"tags": [], "owner": {"reputation": 5956, "user_id": 1249472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7d2ac9163237829d11cbf4ee7d563d?s=128&d=identicon&r=PG", "display_name": "Nikita", "link": "https://stackoverflow.com/users/1249472/nikita"}, "is_accepted": true, "score": 2, "last_activity_date": 1472683306, "creation_date": 1472683306, "answer_id": 39260119, "question_id": 39260029, "link": "https://stackoverflow.com/questions/39260029/is-protobuf-for-c-available-on-nuget/39260119#39260119", "title": "Is protobuf for C++ available on Nuget?", "body": "<p>No, latest version is not available as compiled NuGet package. There is an <a href=\"https://github.com/google/protobuf/issues/1154\" rel=\"nofollow\">Issue #1154</a> in the official google/protobuf project about it. Comment there to follow-up the problem. </p>\n"}], "owner": {"reputation": 2425, "user_id": 693943, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/bef0b29b7ebaec03aeff8accf444aefe?s=128&d=identicon&r=PG", "display_name": "Matthew Goulart", "link": "https://stackoverflow.com/users/693943/matthew-goulart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 721, "favorite_count": 0, "accepted_answer_id": 39260119, "answer_count": 1, "score": 2, "last_activity_date": 1472683306, "creation_date": 1472682790, "question_id": 39260029, "link": "https://stackoverflow.com/questions/39260029/is-protobuf-for-c-available-on-nuget", "title": "Is protobuf for C++ available on Nuget?", "body": "<p>this might seem like a question easily answered with a google search but I assure you, for me, it is not.</p>\n\n<p>I am trying to determine if an up-to-date protocol buffer package from google exists on Nuget. I tried downloaded what <em>seemed</em> like the protobuf package (<a href=\"https://www.nuget.org/packages/protobuf/\" rel=\"nofollow\">here</a>) but it is version 2.5.0. I am a stickler for currency and for that reason would <em>really really</em> like to use the most up-to-date version. Not to mention the ease of keeping libraries up to date with nuget... </p>\n\n<p>I have downloaded the master branch from github, and generated some messages with protoc.exe. The problem is that when I include these messages, VS2015 complains about missing header files. I have concluded that the version of protobuf available on nuget is too far behind the current version and does not support proto3... Again, I am a stickler for currency.</p>\n\n<p>Now the real complexity arises from the fact that there are in fact <em>many</em> packages on Nuget that seem to be \"the real\" protobuf.</p>\n\n<p>So to put it bluntly, is there a <em>current</em> protobuf package available on nuget for c++?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "regex", "boost-regex"], "comments": [{"owner": {"reputation": 5930, "user_id": 815787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54d63bc7f3fac2cef3d9761e8afbaca6?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/815787/serge"}, "edited": false, "score": 0, "creation_date": 1472682493, "post_id": 39259925, "comment_id": 65855914, "body": "Any chance to read the docs? <a href=\"http://www.boost.org/doc/libs/1_53_0/libs/regex/doc/html/index.html\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_53_0/libs/regex/doc/html/index.html</a>"}, {"owner": {"reputation": 73, "user_id": 5800039, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/844e21264d1ff2254ec6334add410509?s=128&d=identicon&r=PG&f=1", "display_name": "Kurieita", "link": "https://stackoverflow.com/users/5800039/kurieita"}, "reply_to_user": {"reputation": 5930, "user_id": 815787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54d63bc7f3fac2cef3d9761e8afbaca6?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/815787/serge"}, "edited": false, "score": 1, "creation_date": 1472682549, "post_id": 39259925, "comment_id": 65855931, "body": "I tried reading the docs, not very well documented in my opinion."}], "answers": [{"tags": [], "owner": {"reputation": 5930, "user_id": 815787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54d63bc7f3fac2cef3d9761e8afbaca6?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/815787/serge"}, "is_accepted": true, "score": 2, "last_activity_date": 1472684061, "creation_date": 1472684061, "answer_id": 39260256, "question_id": 39259925, "link": "https://stackoverflow.com/questions/39259925/how-does-regex-work-in-boost-regex-c/39260256#39260256", "title": "How does Regex work in Boost Regex C++", "body": "<p>Your mistake not in a <code>regex</code> syntax though the <code>?</code> is redundant after <code>*</code>, but in <code>C++</code> string constant literal: the backslash char should be escaped with backslash: </p>\n\n<pre><code>#include &lt;boost/regex.hpp&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nstd::string response(\"XsrfToken.setToken('ABC')\");\nboost::regex expression(\"XsrfToken.setToken\\\\('(.*?)'\\\\)\");\n\nint main() {\n\n    boost::smatch results;\n\n    if (boost::regex_search(response, results, expression)) {\n        std::cout &lt;&lt; results[0] &lt;&lt; \" TOKEN\" &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 5800039, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/844e21264d1ff2254ec6334add410509?s=128&d=identicon&r=PG&f=1", "display_name": "Kurieita", "link": "https://stackoverflow.com/users/5800039/kurieita"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 39260256, "answer_count": 1, "score": -1, "last_activity_date": 1472684061, "creation_date": 1472682262, "question_id": 39259925, "link": "https://stackoverflow.com/questions/39259925/how-does-regex-work-in-boost-regex-c", "title": "How does Regex work in Boost Regex C++", "body": "<p>I am currently using Boost Regex library and am trying to get a function called arguments in C++. For instance, I have a page with HTML and there a JavaScript function called, we will call it something like</p>\n\n<pre><code>XsrfToken.setToken('54sffds');\n</code></pre>\n\n<p>What I currently have, which isn't working.</p>\n\n<pre><code>std::string response = request-&gt;getResponse();\n\nboost::regex expression;\n\nif (type == \"CSRF\") {\n    expression = {\"XsrfToken.setToken\\('(.*?)'\\)\"};\n}\n\nboost::smatch results;\n\nif (boost::regex_search(response, results, expression)) {\n    std::cout &lt;&lt; results[0] &lt;&lt; \" TOKEN\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Where response is the HTML web page, and expression is the regex. The conditional statement is running, therefore I think something is wrong with my regex, but I do not know.</p>\n\n<p>[EDITED]</p>\n\n<p>Forgot to mention that that regex was extracted from PHP and works in a PHP regex checker/debugger</p>\n"}, {"tags": ["c++", "templates", "constructor", "copy"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4900791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d218a3a69f2b8d692df2270fd281a039?s=128&d=identicon&r=PG&f=1", "display_name": "Gunter Don", "link": "https://stackoverflow.com/users/4900791/gunter-don"}, "edited": false, "score": 0, "creation_date": 1472682592, "post_id": 39259957, "comment_id": 65855942, "body": "Umm, the code DOES in fact compile.  The code even works on the line RIGHT ABOVE the error line.  the intent, is that the operator + returns a expression structure on the stack as a return value (it&#39;s just 64 bits).  the typical operator+ returns a reference to itself... i cannot do that.  this code even works in the line above it.   sorry, not the right answer."}, {"owner": {"reputation": 13, "user_id": 4900791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d218a3a69f2b8d692df2270fd281a039?s=128&d=identicon&r=PG&f=1", "display_name": "Gunter Don", "link": "https://stackoverflow.com/users/4900791/gunter-don"}, "edited": false, "score": 0, "creation_date": 1472683002, "post_id": 39259957, "comment_id": 65856080, "body": "please note:  it does one operator + call, returns correctly to the copy constructor... where teh value is correct and that it is the second copy of the assignment statement... where the ref copy created on the stack.. is returned.   what you are saying , is i&#39;m seeing stack overwritting my copy before I can copy it?  frap... you may be right."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 13, "user_id": 4900791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d218a3a69f2b8d692df2270fd281a039?s=128&d=identicon&r=PG&f=1", "display_name": "Gunter Don", "link": "https://stackoverflow.com/users/4900791/gunter-don"}, "edited": false, "score": 0, "creation_date": 1472689001, "post_id": 39259957, "comment_id": 65857649, "body": "@GunterDon typical <code>operator+=</code> returns reference to itself. <code>operator+</code> returns by value.  Use <code>&#47;Za</code> compiler switch in MSVC to make it give errors for these invalid bindings."}, {"owner": {"reputation": 13, "user_id": 4900791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d218a3a69f2b8d692df2270fd281a039?s=128&d=identicon&r=PG&f=1", "display_name": "Gunter Don", "link": "https://stackoverflow.com/users/4900791/gunter-don"}, "edited": false, "score": 0, "creation_date": 1472737021, "post_id": 39259957, "comment_id": 65880664, "body": "thanks, you guys are awsome.  son of a gun.  passed reference when should be value."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 2, "last_activity_date": 1472682410, "creation_date": 1472682410, "answer_id": 39259957, "question_id": 39259887, "link": "https://stackoverflow.com/questions/39259887/template-constructor-for-expression-node-returns-wrong-value/39259957#39259957", "title": "template constructor for expression node returns wrong value", "body": "<p>Here's your problem:</p>\n\n<pre><code>expression&lt;T&gt;&amp; operator+(term&amp; ref) \n</code></pre>\n\n<p><code>operator+</code> should return a new object. You're returning a reference to a temporary. That should've even compile, but I'm guessing you're using MSVC which has an extension to allow this for reasons that I don't understand. </p>\n\n<p>There's other problems in your code that should prevent it from compiling to, but that's likely the one that's causing your error. As a first approximation, every use of reference in your code is incorrect - they should all either be references to <code>const</code>  or values. </p>\n"}], "owner": {"reputation": 13, "user_id": 4900791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d218a3a69f2b8d692df2270fd281a039?s=128&d=identicon&r=PG&f=1", "display_name": "Gunter Don", "link": "https://stackoverflow.com/users/4900791/gunter-don"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 39259957, "answer_count": 1, "score": -2, "last_activity_date": 1472737663, "creation_date": 1472682109, "last_edit_date": 1472737663, "question_id": 39259887, "link": "https://stackoverflow.com/questions/39259887/template-constructor-for-expression-node-returns-wrong-value", "title": "template constructor for expression node returns wrong value", "body": "<p>I have a template class that just seems to fail this on one test.</p>\n\n<ul>\n<li>There is a template structure \"term\" representing the node values of an expression graph.</li>\n<li>There is a template structure \"expression\" representing the graph.</li>\n<li>There is a test procedure \"void Test()\"</li>\n</ul>\n\n<p>I have beat my head for a few hours now. I would really like some assistance.</p>\n\n<pre><code>void Test()\n{\n    cout &lt;&lt; \"****  Integer Tests\" &lt;&lt; endl;\n    // Default Constructor\n    integer a;\n    cout &lt;&lt; \"integer a = \"&lt;&lt; a.Value &lt;&lt; endl;\n    // Copy Constructor\n    integer b(a);\n    cout &lt;&lt; \"integer b(a) = \"&lt;&lt; b.Value &lt;&lt; endl;\n    integer c = b;\n    cout &lt;&lt; \"integer c = b = \"&lt;&lt; c.Value &lt;&lt; endl;\n    // Type Constructor\n    integer d(5);\n    cout &lt;&lt; \"integer d(5) = \"&lt;&lt; d.Value &lt;&lt; endl;\n    integer e = 5;\n    cout &lt;&lt; \"integer e = 5 = \"&lt;&lt; e.Value &lt;&lt; endl;\n    // Type Conversions\n    int n = e.Value;\n    cout &lt;&lt; \"n = e = \"&lt;&lt; n &lt;&lt; endl;/\n    n = (int)d.Value + (int)e.Value;\n    cout &lt;&lt; \"n = d + e = \"&lt;&lt; n &lt;&lt; endl;// allowed because a convers to int\n\n    cout &lt;&lt; \"****  Expression Tests\" &lt;&lt; endl;\n    expression&lt;int&gt; e1;\n    expression&lt;int&gt; e2(e1);\n\n    expression&lt;int&gt; e3(d);// This line using the copy constructor works\n    expression&lt;int&gt; e4 = d + e;// this line, using the copy constructor AFTER the operator+ call results in BUM values.\n\n}\n</code></pre>\n\n<p>The test function \"void Test()\" fails to give the correct value for the statement : </p>\n\n<p>expression e4 = d + e;</p>\n\n<p>stepping through the call stack...at T+1</p>\n\n<p>1.) calls term::expression&amp; operator+(term&amp; ref)</p>\n\n<p>2.) on return, the left and right values of the expression node are CORRECT!!!</p>\n\n<p>3.) now, the assignment that fails...  it calls copy constructor expression(expression&amp; ref)</p>\n\n<p>4.)  WTF??? inside this i get bum left and right values.</p>\n\n<p>why, when the copy constructor test succeeds at the line above?</p>\n\n<p>here are the test case templates</p>\n\n<pre><code>template&lt;typename T&gt; struct expression; // Forward Declare expressions, so i can use it in operator+\n\ntemplate&lt;typename T&gt;\nstruct term\n{\n    T Value;\n    term() : Value(0) \n    { \n        cout &lt;&lt; \"****  term()\" &lt;&lt; endl;\n    } // Default Constructor\n    term(term&amp; ref) : Value(ref.Value) \n    { \n        cout &lt;&lt; \"****  term(term&amp; ref)\" &lt;&lt; endl;\n    } // Copy Constructor\n    // Type Conversion\n    term(T value) : Value(value) \n    { \n        cout &lt;&lt; \"****  term(T value)\" &lt;&lt; endl;\n    } // Type Constructor\n    //operator T() const { return Value; } // Type Converter\n    **expression&lt;T&gt;&amp; operator+(term&amp; ref) \n    {\n        return expression&lt;T&gt;(*this, ref);\n    };**\n};\n\ntemplate&lt;typename T&gt;\nstruct expression\n{\n    term&lt;T&gt; Left;\n    term&lt;T&gt; Right;\n    expression() \n        : Left()\n        , Right() \n    { \n        cout &lt;&lt; \"****  expression()\" &lt;&lt; endl;\n        cout &lt;&lt; \"left\" &lt;&lt; Left.Value &lt;&lt; endl;\n        cout &lt;&lt; \"right\" &lt;&lt; Right.Value &lt;&lt; endl;\n    }\n    expression(expression&amp; ref) \n        : Left(ref.Left)\n        , Right(ref.Right) \n    { \n        cout &lt;&lt; \"****  expression(expression&amp; ref)\" &lt;&lt; endl;\n        cout &lt;&lt; \"left\" &lt;&lt; Left.Value &lt;&lt; endl;\n        cout &lt;&lt; \"right\" &lt;&lt; Right.Value &lt;&lt; endl;\n    }\n    expression(term&lt;T&gt;&amp; left) \n        : Left(left)\n        , Right() \n    { \n        cout &lt;&lt; \"****  expression(term&lt;T&gt;&amp; left)\" &lt;&lt; endl;\n        cout &lt;&lt; \"left\" &lt;&lt; Left.Value &lt;&lt; endl;\n        cout &lt;&lt; \"right\" &lt;&lt; Right.Value &lt;&lt; endl;\n    }\n    expression(term&lt;T&gt;&amp; left, term&lt;T&gt;&amp; right) \n        : Left(left)\n        , Right(right) \n    { \n        cout &lt;&lt; \"****  expression(term&lt;T&gt;&amp; left, term&lt;T&gt;&amp; right)\" &lt;&lt; endl;\n        cout &lt;&lt; \"left\" &lt;&lt; Left.Value &lt;&lt; endl;\n        cout &lt;&lt; \"right\" &lt;&lt; Right.Value &lt;&lt; endl;\n    }\n};\nstruct integer : public term&lt;int&gt; \n{ \n\n    integer() : term() { }// allows default constructor (not inheritablle)\n    // tactic to get base class constructors(1 parameter) to compile...\n    template&lt;class T&gt; integer(T t) : term(t) { }\n    //template&lt;class T&gt; integer(T&amp; t) : term(t) { }\n};\nvoid Test()\n{\n    cout &lt;&lt; \"****  Integer Tests\" &lt;&lt; endl;\n    // Default Constructor\n    integer a;\n    cout &lt;&lt; \"integer a = \"&lt;&lt; a.Value &lt;&lt; endl;// allowed because integer converts to int\n    // Copy Constructor\n    integer b(a);\n    cout &lt;&lt; \"integer b(a) = \"&lt;&lt; b.Value &lt;&lt; endl;\n    integer c = b;\n    cout &lt;&lt; \"integer c = b = \"&lt;&lt; c.Value &lt;&lt; endl;\n    // Type Constructor\n    integer d(5);\n    cout &lt;&lt; \"integer d(5) = \"&lt;&lt; d.Value &lt;&lt; endl;\n    integer e = 5;\n    cout &lt;&lt; \"integer e = 5 = \"&lt;&lt; e.Value &lt;&lt; endl;\n    // Type Conversions\n    int n = e.Value;\n    cout &lt;&lt; \"n = e = \"&lt;&lt; n &lt;&lt; endl;// allowed because a convers to int\n    // Arithmetic using base type operators... whatever they allow, is allowed.\n    n = (int)d.Value + (int)e.Value;\n    cout &lt;&lt; \"n = d + e = \"&lt;&lt; n &lt;&lt; endl;// allowed because a convers to int\n\n    cout &lt;&lt; \"****  Expression Tests\" &lt;&lt; endl;\n    expression&lt;int&gt; e1;\n    expression&lt;int&gt; e2(e1);\n\n    expression&lt;int&gt; e3(d);// This line using the copy constructor works\n    expression&lt;int&gt; e4 = d + e;// this line, using the copy constructor AFTER the operator+ call results in BUM values.\n\n}\n</code></pre>\n\n<p>Output of the above code looks like:</p>\n\n<pre><code>****  Integer Tests\n****  term()\ninteger a = 0\n****  term(term&amp; ref)\ninteger b(a) = 0\n****  term(term&amp; ref)\ninteger c = b = 0\n****  term(T value)\ninteger d(5) = 5\n****  term(T value)\ninteger e = 5 = 5\nn = e = 5\nn = d + e = 10\n****  Expression Tests\n****  term()\n****  term()\n****  expression()\nleft0\nright0\n****  term(term&amp; ref)\n****  term(term&amp; ref)\n****  expression(expression&amp; ref)\nleft0\nright0\n****  term(term&amp; ref)\n****  term()\n****  expression(term&lt;T&gt;&amp; left)\nleft5\nright0\n****  term(term&amp; ref)\n****  term(term&amp; ref)\n****  expression(term&lt;T&gt;&amp; left, term&lt;T&gt;&amp; right)\nleft5\nright5\n****  term(term&amp; ref)\n****  term(term&amp; ref)\n****  expression(expression&amp; ref)\nleft4061292\nright4061296\n</code></pre>\n\n<p><strong>Edit:</strong>  as pointed out (very quickly, I might add) the operator+ was returning the reference to a temp on the stack, and not the value as I assumed.  </p>\n\n<p>The function was fixed such that the ampersand after expression was removed:</p>\n\n<pre><code>expression&lt;T&gt; operator+(term&amp; ref) \n    {\n        return expression&lt;T&gt;(*this, ref);\n    };\n</code></pre>\n\n<p>This was an ID10T error.  the ampersand was right there in front of me.</p>\n\n<p>Again, Thanks for helping me resolve this.</p>\n"}, {"tags": ["c++", "qt", "qmenu"], "answers": [{"comments": [{"owner": {"reputation": 41430, "user_id": 607407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a061a72feb5b6580dadd5dcbc92d3b5?s=128&d=identicon&r=PG", "display_name": "Tom&#225;\u0161 Zato - Reinstate Monica", "link": "https://stackoverflow.com/users/607407/tom%c3%a1%c5%a1-zato-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1472773725, "post_id": 39260237, "comment_id": 65899261, "body": "I found out your suggestion does not solve the problem. This is because user does not have to click on any particular item in the menu..."}, {"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "reply_to_user": {"reputation": 41430, "user_id": 607407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a061a72feb5b6580dadd5dcbc92d3b5?s=128&d=identicon&r=PG", "display_name": "Tom&#225;\u0161 Zato - Reinstate Monica", "link": "https://stackoverflow.com/users/607407/tom%c3%a1%c5%a1-zato-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1472773849, "post_id": 39260237, "comment_id": 65899294, "body": "@Tom&#225;\u0161Zato, so, you are saying <code>&amp;QMenu::triggered</code> isn&#39;t always raised? .... In that case, what about the second and third options?"}, {"owner": {"reputation": 41430, "user_id": 607407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a061a72feb5b6580dadd5dcbc92d3b5?s=128&d=identicon&r=PG", "display_name": "Tom&#225;\u0161 Zato - Reinstate Monica", "link": "https://stackoverflow.com/users/607407/tom%c3%a1%c5%a1-zato-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1472774250, "post_id": 39260237, "comment_id": 65899389, "body": "I considered keeping the menu in some variable only as a last resort option. And only that menu, in particular, is always displayed just once. But it would be nicer if it just deleted itself when it disapears, like QMessageBox does."}, {"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "reply_to_user": {"reputation": 41430, "user_id": 607407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a061a72feb5b6580dadd5dcbc92d3b5?s=128&d=identicon&r=PG", "display_name": "Tom&#225;\u0161 Zato - Reinstate Monica", "link": "https://stackoverflow.com/users/607407/tom%c3%a1%c5%a1-zato-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1472776122, "post_id": 39260237, "comment_id": 65899778, "body": "QMessageBox does that because its a modal QDialog, and has its event system wired to delete itself when its outta sight. To have a QMenu delete itself, without triggering any event that could be connected to its deleteLater member function.... and without storing the variable somewhere? its going to be more work than you want. Becuase, You will have to subclass it and override its event system to delete itself whenever its hidden"}, {"owner": {"reputation": 41430, "user_id": 607407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a061a72feb5b6580dadd5dcbc92d3b5?s=128&d=identicon&r=PG", "display_name": "Tom&#225;\u0161 Zato - Reinstate Monica", "link": "https://stackoverflow.com/users/607407/tom%c3%a1%c5%a1-zato-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1472805059, "post_id": 39260237, "comment_id": 65909469, "body": "Thanks for explaining. It seems to me, though, that this is kinda a newbie trap. If I didn&#39;t inspect the qApplication, I wouldn&#39;t even have found out about this problem, which is apparently un-trivial to solve."}, {"owner": {"reputation": 379, "user_id": 1731354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f206498a601c8c9a0bc055371832ae66?s=128&d=identicon&r=PG", "display_name": "jarzec", "link": "https://stackoverflow.com/users/1731354/jarzec"}, "edited": false, "score": 0, "creation_date": 1511263670, "post_id": 39260237, "comment_id": 81777174, "body": "I think solution one would work with <code>&amp;QMenu::aboutToHide</code>  instead of <code>&amp;QMenu::triggered</code> connected to <code>&amp;QMenu::deleteLater</code>. Tested this in my own code where I needed exactly the same thing."}], "tags": [], "owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "is_accepted": true, "score": 3, "last_activity_date": 1472685261, "last_edit_date": 1495541778, "creation_date": 1472683955, "answer_id": 39260237, "question_id": 39259862, "link": "https://stackoverflow.com/questions/39259862/when-and-how-to-properly-destroy-qmenu-context-menu/39260237#39260237", "title": "When and how to properly destroy QMenu context menu?", "body": "<p>From your code, it seems like <code>menu</code> should be deleted after this event has taken place?</p>\n\n<pre><code>// Notify window about clicking\nQObject::connect(menu, &amp;QMenu::triggered, this, &amp;MainWindow::menuClicked);\n</code></pre>\n\n<blockquote>\n  <p>Can I set the menu to delete itself?</p>\n</blockquote>\n\n<p>Yes, you can have the object <a href=\"http://doc.qt.io/qt-5/qobject.html#deleteLater\" rel=\"nofollow noreferrer\">delete itself</a> like this:</p>\n\n<pre><code>// Notify window about clicking\nQObject::connect(menu, &amp;QMenu::triggered, this, &amp;MainWindow::menuClicked);\nQObject::connect(menu, &amp;QMenu::triggered, menu, &amp;QMenu::deleteLater);\n</code></pre>\n\n<p>If you are worried about the order of those slots being called, see <a href=\"https://stackoverflow.com/questions/1246933/order-of-slots-called-on-qobject\">this</a></p>\n\n<hr>\n\n<blockquote>\n  <p>Or should I reuse the same instance of menu or maybe save it into same\n  pointer?</p>\n</blockquote>\n\n<p>Well, you can do something like</p>\n\n<pre><code>//Your constructor\nMainWindow::MainWindow(....)\n{\n    menu = nullptr;\n    ....\n}\n\n//Make context Menu\nvoid MainWindow::makeContextMenu(const QPoint&amp; pos, QWidget* target)\n{\n    if(menu)\n        delete menu; \n    menu = new QMenu(this);\n    ....\n}\n</code></pre>\n\n<p>As for the <code>MainWindow::~MainWindow()</code> destructor, it will take care of the <code>menu</code>'s clean up. Since <code>MainWindow</code> (which is a <code>QObject</code> derived class) <a href=\"http://doc.qt.io/qt-5/qobject.html#dtor.QObject\" rel=\"nofollow noreferrer\">automatically deletes</a> all children</p>\n\n<hr>\n\n<p>Lastly, you can simply have the <code>menu</code> as a member of <code>MainWindow</code>, and whenever you need to have fresh actions for <code>menu</code>, you can use <a href=\"http://doc.qt.io/qt-5/qmenu.html#clear\" rel=\"nofollow noreferrer\"><code>QMenu::clear</code></a> to delete all existing actions.</p>\n\n<pre><code>//Your constructor\nMainWindow::MainWindow(....)\n{\n    menu = new QMenu(this);\n    ....\n}\n\nvoid MainWindow::makeContextMenu(const QPoint&amp; pos, QWidget* target)\n{\n    menu-&gt;clear();\n    //QMenu *menu = new QMenu(this);\n    menu-&gt;addAction(new QAction(\"Action 1\", menu));\n    menu-&gt;addAction(new QAction(\"Action 2\", menu));\n    menu-&gt;addAction(new QAction(\"Action 3\", menu));\n    // Notify window about clicking\n    QObject::connect(menu, &amp;QMenu::triggered, this, &amp;MainWindow::menuClicked);\n    // If this is a scroll area, map coordinates to real app coordinates\n    if(QAbstractScrollArea* area = dynamic_cast&lt;QAbstractScrollArea*&gt;(target))\n        menu-&gt;popup(area-&gt;viewport()-&gt;mapToGlobal(pos));\n    else\n        menu-&gt;popup(pos);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41430, "user_id": 607407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a061a72feb5b6580dadd5dcbc92d3b5?s=128&d=identicon&r=PG", "display_name": "Tom&#225;\u0161 Zato - Reinstate Monica", "link": "https://stackoverflow.com/users/607407/tom%c3%a1%c5%a1-zato-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1473098323, "creation_date": 1473098323, "answer_id": 39335639, "question_id": 39259862, "link": "https://stackoverflow.com/questions/39259862/when-and-how-to-properly-destroy-qmenu-context-menu/39335639#39335639", "title": "When and how to properly destroy QMenu context menu?", "body": "<p>It is possible to delete <code>QMenu</code> when it's hidden. I designed event filter class for that purpose:</p>\n\n<pre><code>#ifndef DELETEONHIDEFILTER_H\n#define DELETEONHIDEFILTER_H\n\n#include &lt;QObject&gt;\n#include &lt;QEvent&gt;\n\nclass DeleteOnHideFilter : public QObject\n{\n        Q_OBJECT\n    public:\n        explicit DeleteOnHideFilter(QObject *parent = 0) : QObject(parent) {}\n\n    protected slots:\n        bool eventFilter(QObject *obj, QEvent *event) override {\n            if(event-&gt;type() == QEvent::Hide) {\n                obj-&gt;deleteLater();\n            }\n            return false;\n        }\n};\n\n#endif // DELETEONHIDEFILTER_H\n</code></pre>\n\n<p>It can be used for other objects as well.</p>\n"}, {"tags": [], "owner": {"reputation": 375, "user_id": 3292513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c107fcb30f24b50fccb68013d3ea95aa?s=128&d=identicon&r=PG&f=1", "display_name": "m.w.", "link": "https://stackoverflow.com/users/3292513/m-w"}, "is_accepted": false, "score": 5, "last_activity_date": 1563449556, "creation_date": 1563449556, "answer_id": 57093474, "question_id": 39259862, "link": "https://stackoverflow.com/questions/39259862/when-and-how-to-properly-destroy-qmenu-context-menu/57093474#57093474", "title": "When and how to properly destroy QMenu context menu?", "body": "<p>It doesn't have to be so complicated. That's it already:</p>\n\n<pre><code>menu-&gt;setAttribute(Qt::WA_DeleteOnClose);\n</code></pre>\n\n<p>That way when the QMenu is closed, the class is deleted as soon as the event loop is entered again. And it doesn't matter if an action was triggered or the popup was just closed.</p>\n\n<p>To prove my answer, you can test it yourself by checking when the menu is created and if the 'deleted' message is triggered with the same address:</p>\n\n<pre><code>qDebug() &lt;&lt; \"created\" &lt;&lt; (qintptr)menu;\nconnect(menu, &amp;QMenu::destroyed, \n        this, [menu]() { qDebug() &lt;&lt; \"deleted\" &lt;&lt; (qintptr)menu; });\n</code></pre>\n"}], "owner": {"reputation": 41430, "user_id": 607407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a061a72feb5b6580dadd5dcbc92d3b5?s=128&d=identicon&r=PG", "display_name": "Tom&#225;\u0161 Zato - Reinstate Monica", "link": "https://stackoverflow.com/users/607407/tom%c3%a1%c5%a1-zato-reinstate-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3289, "favorite_count": 1, "accepted_answer_id": 39260237, "answer_count": 3, "score": 3, "last_activity_date": 1563449556, "creation_date": 1472681948, "question_id": 39259862, "link": "https://stackoverflow.com/questions/39259862/when-and-how-to-properly-destroy-qmenu-context-menu", "title": "When and how to properly destroy QMenu context menu?", "body": "<p>I allow custom context menu to appear over a table. This is how the menu is generated, using a generic function that accepts target widget and coordinates:</p>\n\n<pre><code>#include &lt;QMenu&gt;\nvoid MainWindow::makeContextMenu(const QPoint&amp; pos, QWidget* target)\n{\n    QMenu *menu = new QMenu(this);\n    menu-&gt;addAction(new QAction(\"Action 1\", menu));\n    menu-&gt;addAction(new QAction(\"Action 2\", menu));\n    menu-&gt;addAction(new QAction(\"Action 3\", menu));\n    // Notify window about clicking\n    QObject::connect(menu, &amp;QMenu::triggered, this, &amp;MainWindow::menuClicked);\n    // If this is a scroll area, map coordinates to real app coordinates\n    if(QAbstractScrollArea* area = dynamic_cast&lt;QAbstractScrollArea*&gt;(target))\n        menu-&gt;popup(area-&gt;viewport()-&gt;mapToGlobal(pos));\n    else\n        menu-&gt;popup(pos);\n}\n</code></pre>\n\n<p>The problem is that the <code>QMenu* menu</code> never gets destroyed and removed from memory. It persists as <code>MainWindow</code>'s child even after it's hidden.</p>\n\n<p>What should I do? Can I set the menu to delete itself? Or should I reuse the same instance of menu or maybe save it into same pointer?</p>\n"}, {"tags": ["c++", "hdf5", "imaging"], "answers": [{"tags": [], "owner": {"reputation": 4677, "user_id": 2043465, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/649021e96b1032f4de635a8fdb4654b2?s=128&d=identicon&r=PG", "display_name": "Yossarian", "link": "https://stackoverflow.com/users/2043465/yossarian"}, "is_accepted": false, "score": 0, "last_activity_date": 1515669735, "creation_date": 1515669735, "answer_id": 48205914, "question_id": 39259664, "link": "https://stackoverflow.com/questions/39259664/storing-images-in-a-hdf5-file-using-the-c-api/48205914#48205914", "title": "Storing images in a HDF5 file using the C++ API?", "body": "<p>The image-specific functions live in the \"high-level\" HDF5 interfaces, which only exist for the C and Fortran APIs (aside from the packet table interface for some reason).</p>\n\n<p>You can use the C interface in C++, you'll just need to get the HDF5 ID of the object you want to pass e.g.:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>H5File file;\nauto file_id = file.getId();\nH5IMmake_image_8bit(file_id, \"Image1\", width, height, data);\n</code></pre>\n"}], "owner": {"reputation": 4535, "user_id": 268006, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dbd9d461a54696a1e51d697e38b3b96e?s=128&d=identicon&r=PG", "display_name": "Fake Name", "link": "https://stackoverflow.com/users/268006/fake-name"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 498, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1515669735, "creation_date": 1472680800, "question_id": 39259664, "link": "https://stackoverflow.com/questions/39259664/storing-images-in-a-hdf5-file-using-the-c-api", "title": "Storing images in a HDF5 file using the C++ API?", "body": "<p>I'm working on a project that needs to be able to store images (among a number of other data sets) in a HDF5 file.</p>\n\n<p>The <a href=\"https://www.hdfgroup.org/HDF5/Tutor/h5image.html\" rel=\"nofollow\">C HDF API provides a number of image-specific functions</a> for storing data in a HDF5 file. In particular, images stored using these functions is viewable using the HDFView tool from the HDF group.</p>\n\n<p>However, searching the <a href=\"https://www.hdfgroup.org/HDF5/doc/cpplus_RM/index.html\" rel=\"nofollow\">C++ API documentation</a>, it seems there is no interface that corresponds to the C version.</p>\n\n<p>Is there any convenient way of writing images to a HDF5 file via C++? </p>\n"}, {"tags": ["c++", "visual-studio", "c++11", "visual-c++", "libjpeg"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1472680658, "post_id": 39259417, "comment_id": 65855255, "body": "The jpeg.lib you use was built with /MD, mixing is not possible.  You&#39;ll have to rebuild it."}, {"owner": {"reputation": 93, "user_id": 5655323, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IOwCq.jpg?s=128&g=1", "display_name": "Daniel Biegler", "link": "https://stackoverflow.com/users/5655323/daniel-biegler"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1472681584, "post_id": 39259417, "comment_id": 65855599, "body": "@HansPassant The errors went away, I&#39;ll have to test it. If this works, you made me a very happy person. Thank you!"}], "owner": {"reputation": 93, "user_id": 5655323, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IOwCq.jpg?s=128&g=1", "display_name": "Daniel Biegler", "link": "https://stackoverflow.com/users/5655323/daniel-biegler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "closed_date": 1472679822, "answer_count": 0, "score": 0, "last_activity_date": 1472679499, "creation_date": 1472679499, "question_id": 39259417, "link": "https://stackoverflow.com/questions/39259417/how-to-resolve-symbols-after-statically-linking-to-visual-c-runtime", "closed_reason": "Duplicate", "title": "How to resolve symbols after statically linking to Visual C++ Runtime?", "body": "<p>I have a little command line project which makes use of the jpeglib from the <a href=\"http://www.ijg.org/\" rel=\"nofollow\">jpeg group</a> and I want to statically link to the VC++ Runtime so I can distribute my executable more easily.</p>\n\n<p>I found numerous posts explaining that you have to set:</p>\n\n<p><strong>Project Properties -> Configuration Properties -> C/C++ -> Code Generation -> Runtime Library</strong></p>\n\n<p>to <code>/MT</code></p>\n\n<p>But this gives me several unresolved symbols.</p>\n\n<p>47 Errors in Debug mode<br>\n5 Errors in Release mode</p>\n\n<pre><code>1&gt;jpeg.lib(jdatasrc.obj) : error LNK2001: Unresolved External Symbol \"__imp__fread\".\n1&gt;jpeg.lib(jdatadst.obj) : error LNK2001: Unresolved External Symbol \"__imp__ferror\".\n1&gt;jpeg.lib(jmemmgr.obj) : error LNK2001: Unresolved External Symbol \"__imp____stdio_common_vsscanf\".\n1&gt;jpeg.lib(jdmarker.obj) : error LNK2001: Unresolved External Symbol \"__imp__strncpy\".\n1&gt;MSVCRT.lib(_chandler4gs_.obj) : error LNK2001: Unresolved External Symbol \"__except_handler4_common\".\n</code></pre>\n\n<p>I dont know what to do. Help is much appreciated!</p>\n"}, {"tags": ["c++", "constructor"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 2, "creation_date": 1472678808, "post_id": 39259232, "comment_id": 65854556, "body": "Read about pass by value, pointer or reference."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1472679350, "post_id": 39259232, "comment_id": 65854752, "body": "@SamVarshavchik: right! it&#39;s better to learn C++ first then Java. But in schools they teach only Java because C++ is &quot;too hard&quot;. Ok but C++ is useful!"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1472682801, "post_id": 39259232, "comment_id": 65856013, "body": "Why does this have upvotes..."}], "answers": [{"comments": [{"owner": {"reputation": 1136, "user_id": 2999921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0564f700a2fe14bc0aa8152a5b97925?s=128&d=identicon&r=PG", "display_name": "cwschmidt", "link": "https://stackoverflow.com/users/2999921/cwschmidt"}, "edited": false, "score": 3, "creation_date": 1472679676, "post_id": 39259276, "comment_id": 65854910, "body": "Please stick to the answer of the question only and remove that part after <i>General advice</i>, because there is no general advice. Whether some data should be allocated on the heap (via new) depends highly on the context and use-case."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 1136, "user_id": 2999921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0564f700a2fe14bc0aa8152a5b97925?s=128&d=identicon&r=PG", "display_name": "cwschmidt", "link": "https://stackoverflow.com/users/2999921/cwschmidt"}, "edited": false, "score": 0, "creation_date": 1472682189, "post_id": 39259276, "comment_id": 65855813, "body": "Ok, I have added some more relevant info instead about how to forbid  copy/assignment. I hope it&#39;s OK."}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 7, "last_activity_date": 1472682118, "last_edit_date": 1472682118, "creation_date": 1472678833, "answer_id": 39259276, "question_id": 39259232, "link": "https://stackoverflow.com/questions/39259232/why-was-copy-constructor-called-in-this-example/39259276#39259276", "title": "Why was copy constructor called in this example?", "body": "<p>because you are passing <code>Line</code> as value</p>\n\n<pre><code>void display(Line obj)\n{\n   cout &lt;&lt; \"Length of line : \" &lt;&lt; obj.getLength() &lt;&lt;endl;\n}\n</code></pre>\n\n<p>You should pass it as constant reference, which is faster (and <code>display</code> shoud be a constant method so constant objects can call it).</p>\n\n<pre><code>void display(const Line &amp;obj) const\n{\n   cout &lt;&lt; \"Length of line : \" &lt;&lt; obj.getLength() &lt;&lt;endl;\n}\n</code></pre>\n\n<p>(provided that you change to <code>int getLength( void ) const;</code>)</p>\n\n<p>And in your case, think of redefining assignment operator</p>\n\n<pre><code>Line &amp;operator=(const Line &amp;other);\n</code></pre>\n\n<p>or affecting a line in another will copy pointer data and will crash on your second object deletion since memory will be freed twice.</p>\n\n<p>If you want to make sure that default copy constructor / assignment operator cannot be called, just declare them in your private part:</p>\n\n<pre><code>private:\n  Line &amp;operator=(const Line &amp;other);\n  Line(const Line &amp;other);\n</code></pre>\n\n<p>code trying to use them won't compile.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 1, "last_activity_date": 1472679007, "creation_date": 1472679007, "answer_id": 39259308, "question_id": 39259232, "link": "https://stackoverflow.com/questions/39259232/why-was-copy-constructor-called-in-this-example/39259308#39259308", "title": "Why was copy constructor called in this example?", "body": "<p>Your <code>display</code> function takes a <code>Line</code> by value - meaning the function gets its own <strong>copy</strong>. If you don't want that, pass by (const) reference or pointer instead.</p>\n"}, {"tags": [], "owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "is_accepted": false, "score": 1, "last_activity_date": 1472679442, "creation_date": 1472679442, "answer_id": 39259408, "question_id": 39259232, "link": "https://stackoverflow.com/questions/39259232/why-was-copy-constructor-called-in-this-example/39259408#39259408", "title": "Why was copy constructor called in this example?", "body": "<p>The answer is here:</p>\n\n<pre><code>void display(Line obj) { ...\n</code></pre>\n\n<p>The argument of the function <code>obj</code> is <a href=\"http://www.tutorialspoint.com/cplusplus/cpp_function_call_by_value.htm\" rel=\"nofollow\">passed by value</a>. </p>\n\n<p>So when the function is called a <em>copy</em> of the argument passed <em>by the caller function</em> is done.</p>\n\n<p>In order to give you a trivial explanation, imagine:</p>\n\n<pre><code>function:main (caller) -&gt; \nmake a copy of line -&gt;\ncall the function display (callee) which is going to use the copy made by caller.\n</code></pre>\n\n<p>That policy is used in various case, <em>for example</em>:</p>\n\n<ul>\n<li>To be sure that the callee function will does any effect (<em>side-effect</em>) on the variables of the caller.</li>\n<li>When the callee function will perform a copy of the object, so you can avoid to make a copy inside the body function.</li>\n</ul>\n\n<p>Because passing an argument by value will perform a <em>copy</em> of the argument itself, it is preferable using argument passed <em>by reference</em>.</p>\n\n<p>This is an example:</p>\n\n<pre><code>void display(Line&amp; obj) { ...\n</code></pre>\n\n<p>In that case it will not performed a copy of the object but the argument obj will be a <em>reference</em> (like a pointer) to the argument passed by the caller function.</p>\n\n<p>In conclusion, passing by reference allows to callee function <em>side effect</em>, in other words the callee function can modify variables \"<em>owned</em>\" by caller function.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 2, "creation_date": 1472679650, "post_id": 39259410, "comment_id": 65854900, "body": "Besides copy elision applies."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1472679800, "post_id": 39259410, "comment_id": 65854961, "body": "<i>When compiler generates a temporary object</i> does not mean the copy c&#39;tor was called.  It is only called if the temporary is initialized with a class object."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1472679850, "post_id": 39259410, "comment_id": 65854978, "body": "<i>Copy constructors are called in following cases:</i> -- Realize that none of those items guarantees a call of the copy constructor."}, {"owner": {"reputation": 792, "user_id": 6758739, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/722933704512388/picture?type=large", "display_name": "LearningCpp", "link": "https://stackoverflow.com/users/6758739/learningcpp"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1472680109, "post_id": 39259410, "comment_id": 65855060, "body": "@PaulMcKenzie but can we rule out that copy con is nt called, even in the above case , the object is passed by value as an argument, Correct me if aim wrong Thanks"}, {"owner": {"reputation": 792, "user_id": 6758739, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/722933704512388/picture?type=large", "display_name": "LearningCpp", "link": "https://stackoverflow.com/users/6758739/learningcpp"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1472680251, "post_id": 39259410, "comment_id": 65855112, "body": "@NathanOliver Modified the  the answer"}, {"owner": {"reputation": 792, "user_id": 6758739, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/722933704512388/picture?type=large", "display_name": "LearningCpp", "link": "https://stackoverflow.com/users/6758739/learningcpp"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1472680701, "post_id": 39259410, "comment_id": 65855267, "body": "@PaulMcKenzie : Can you please explain, when would the above  fail.   One reason is copy elision, can you explain other reasons ? Would be really helpful for me."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1472686844, "post_id": 39259410, "comment_id": 65857117, "body": "@LearningCpp The compiler&#39;s optimizer (they are getting better and better these days) could realize that your copy constructor does nothing, and you have no non-static member variables declared.  Even though you wrote a copy constructor, the compiler could just remove it and replace it with the compiler&#39;s optimized version."}], "tags": [], "owner": {"reputation": 792, "user_id": 6758739, "user_type": "registered", "accept_rate": 39, "profile_image": "https://graph.facebook.com/722933704512388/picture?type=large", "display_name": "LearningCpp", "link": "https://stackoverflow.com/users/6758739/learningcpp"}, "is_accepted": false, "score": 1, "last_activity_date": 1472680225, "last_edit_date": 1472680225, "creation_date": 1472679463, "answer_id": 39259410, "question_id": 39259232, "link": "https://stackoverflow.com/questions/39259232/why-was-copy-constructor-called-in-this-example/39259410#39259410", "title": "Why was copy constructor called in this example?", "body": "<p>Copy constructors are called in following cases:</p>\n\n<blockquote>\n  <blockquote>\n    <p>(a) when a function returns an object of that\n    class by value</p>\n    \n    <p>(b) when the object of that class is passed by\n    value as an argument to a function</p>\n    \n    <p>(c) when you construct an object based on another\n    object of the same class</p>\n    \n    <p>(d) When compiler generates a temporary object and is initialized with a class object.</p>\n  </blockquote>\n</blockquote>\n\n<p>And in your code you are passing the object of that clas by value  as an argument to a function\nHope this Helps</p>\n"}], "owner": {"reputation": 123, "user_id": 6035385, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d792f81833d525e387d58cd2893a6415?s=128&d=identicon&r=PG", "display_name": "FelB", "link": "https://stackoverflow.com/users/6035385/felb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "accepted_answer_id": 39259276, "answer_count": 4, "score": 2, "last_activity_date": 1472682118, "creation_date": 1472678660, "question_id": 39259232, "link": "https://stackoverflow.com/questions/39259232/why-was-copy-constructor-called-in-this-example", "title": "Why was copy constructor called in this example?", "body": "<p>I am very new to C++ and I don't understand why the copy constructor was called in the following code:</p>\n\n<pre><code> #include &lt;iostream&gt;\n\n    using namespace std;\n\n    class Line\n\n{\n   public:\n      int getLength( void );\n      Line( int len );             // simple constructor\n      Line( const Line &amp;obj);  // copy constructor\n      ~Line();                     // destructor\n\n   private:\n      int *ptr;\n};\n\n// Member functions definitions including constructor\nLine::Line(int len)\n{\n    cout &lt;&lt; \"Normal constructor allocating ptr\" &lt;&lt; endl;\n    // allocate memory for the pointer;\n    ptr = new int;\n    *ptr = len;\n}\n\nLine::Line(const Line &amp;obj)\n{\n    cout &lt;&lt; \"Copy constructor allocating ptr.\" &lt;&lt; endl;\n    ptr = new int;\n   *ptr = *obj.ptr; // copy the value\n}\n\nLine::~Line(void)\n{\n    cout &lt;&lt; \"Freeing memory!\" &lt;&lt; endl;\n    delete ptr;\n}\nint Line::getLength( void )\n{\n    return *ptr;\n}\n\nvoid display(Line obj)\n{\n   cout &lt;&lt; \"Length of line : \" &lt;&lt; obj.getLength() &lt;&lt;endl;\n}\n\n// Main function for the program\nint main( )\n{\n   Line line(10);\n\n   display(line);\n\n   return 0;\n}\n</code></pre>\n\n<p>And when it runs:</p>\n\n<pre><code>Normal constructor allocating ptr\nCopy constructor allocating ptr.\nLength of line : 10\nFreeing memory!\nFreeing memory!\n</code></pre>\n\n<p>Why does it construct an other Line object after the first one with the simple constructor?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "eclipse", "cimg"], "comments": [{"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 0, "creation_date": 1472677923, "post_id": 39259035, "comment_id": 65854159, "body": "Take a look at this: <a href=\"https://codeyarns.com/2013/09/22/how-to-add-library-in-eclipse-cdt/\" rel=\"nofollow noreferrer\">codeyarns.com/2013/09/22/how-to-add-library-in-eclipse-cdt</a>"}, {"owner": {"reputation": 1561, "user_id": 856932, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/473b8863916a9c4737368084462aca88?s=128&d=identicon&r=PG", "display_name": "Aaron Kreider", "link": "https://stackoverflow.com/users/856932/aaron-kreider"}, "reply_to_user": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 0, "creation_date": 1472678701, "post_id": 39259035, "comment_id": 65854511, "body": "I&#39;m trying to figure out how the libraries are included. My understanding is that CImg.h works as a stand alone library.  Am I wrong?  I&#39;m using Windows 8.1."}, {"owner": {"reputation": 1561, "user_id": 856932, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/473b8863916a9c4737368084462aca88?s=128&d=identicon&r=PG", "display_name": "Aaron Kreider", "link": "https://stackoverflow.com/users/856932/aaron-kreider"}, "reply_to_user": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 0, "creation_date": 1472679433, "post_id": 39259035, "comment_id": 65854794, "body": "I&#39;m using the solution in the duplicate question (I have added the link to C:\\CImg\\CImg-1.7.5\\ in the MinGW C++ Linker settings) and it does not work.  Do I need to link to any files besides CImg.h?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1472679558, "post_id": 39259035, "comment_id": 65854857, "body": "<b><i>fatal error: CImg.h: No such file or directory</i></b> Is not a linker error. You need to setup your include path."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1472679583, "post_id": 39259035, "comment_id": 65854870, "body": "<b><i>Do I need to link to any files besides CImg.h</i></b> Header files are not linked. However there should be a library to link."}, {"owner": {"reputation": 1561, "user_id": 856932, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/473b8863916a9c4737368084462aca88?s=128&d=identicon&r=PG", "display_name": "Aaron Kreider", "link": "https://stackoverflow.com/users/856932/aaron-kreider"}, "edited": false, "score": 0, "creation_date": 1472679879, "post_id": 39259035, "comment_id": 65854984, "body": "Ok I needed it in the include path. I&#39;m very new to C++.  So I don&#39;t understand the difference between header files and libraries (and I thought I read that CImg.h was both a header file and a library)."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1472679980, "post_id": 39259035, "comment_id": 65855021, "body": "<b><i>I thought I read that CImg.h was both a header file and a library</i></b> It is not. A good c++ book should explain a lot of this in the early chapters."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1472680136, "post_id": 39259035, "comment_id": 65855069, "body": "It looks like CImg does not require a library so there is noting to add to your linker settings for CImg."}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1473675108, "post_id": 39259035, "comment_id": 66217453, "body": "<code>CImg</code> is a <i>header-only</i> library, that means you only need to either put <code>Cimg.h</code> in the directory with all your own files or set the <code>Include directories</code> or <code>Header directories</code> to have the path to wherever you have saved <code>CImg.h</code>. There is nothing to link, unless you use <code>X11</code> (on Linux/OSX), <code>pthreads</code>, <code>libpng</code>, <code>libjpeg</code> or <code>gdi32</code> (on Windows)."}], "owner": {"reputation": 1561, "user_id": 856932, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/473b8863916a9c4737368084462aca88?s=128&d=identicon&r=PG", "display_name": "Aaron Kreider", "link": "https://stackoverflow.com/users/856932/aaron-kreider"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 165, "favorite_count": 0, "closed_date": 1472678772, "answer_count": 0, "score": 0, "last_activity_date": 1472680268, "creation_date": 1472677717, "last_edit_date": 1472680268, "question_id": 39259035, "link": "https://stackoverflow.com/questions/39259035/how-to-link-a-library-for-eclipse", "closed_reason": "Duplicate", "title": "How to link a library for Eclipse", "body": "<p>I am trying to use the CImg.h library in Eclipse.</p>\n\n<p>I have tried to use MinGW C++ Linker -- Library Search Path -- and set it to \"C:\\CImg\\CImg-1.7.5\".</p>\n\n<p>However, my line <code>#include &lt;CImg.h&gt;</code> gives me a fatal error \"CImg.h no such file or directory\".</p>\n\n<p>I get this error message in the Console:</p>\n\n<blockquote>\n  <p>Info: Internal Builder is used for build g++ -O0 -g3 -Wall -c\n  -fmessage-length=0 -o \"src\\TileMap.o\" \"..\\src\\TileMap.cpp\"  ..\\src\\TileMap.cpp:74:18: fatal error: CImg.h: No such file or\n  directory  #include \n                    ^ compilation terminated.</p>\n</blockquote>\n"}, {"tags": ["c++", "qt", "user-interface"], "comments": [{"owner": {"reputation": 5492, "user_id": 6083675, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/D2CgS.png?s=128&g=1", "display_name": "Laurel", "link": "https://stackoverflow.com/users/6083675/laurel"}, "edited": false, "score": 1, "creation_date": 1472677290, "post_id": 39258770, "comment_id": 65853871, "body": "You should see about doing some more research to make this question less broad. Try <a href=\"http://stackoverflow.com/documentation/qt/902/introduction-to-qt/12519/hello-world#t=2016083121000629169\">Documentation</a>."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1472677383, "post_id": 39258770, "comment_id": 65853913, "body": "Probably you want QtWidgets, not QtQuick."}], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 6410634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/351cf24529a4a9b6e37275046e0ce010?s=128&d=identicon&r=PG&f=1", "display_name": "Evan", "link": "https://stackoverflow.com/users/6410634/evan"}, "edited": false, "score": 0, "creation_date": 1472677700, "post_id": 39258895, "comment_id": 65854058, "body": "you may&#39;ve just answered my question, but before i spend a half an hour reading the examples in that link--will it: 1: be enough for someone who barely knows anything about writing qt to learn? 2: (to make this as clear as possible) enable me to write an entire application in 1 file?  and as a bonus: 3: will i be able to create apps that work correctly no matter the pixels per inch/screen size? This was a problem with qml.  Edit: oops, you edited your post while i was writing this comment. you may have already answered this. sry"}, {"owner": {"reputation": 41, "user_id": 965207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a145258f5597ba0584d85504025794e?s=128&d=identicon&r=PG", "display_name": "Dvstin", "link": "https://stackoverflow.com/users/965207/dvstin"}, "reply_to_user": {"reputation": 111, "user_id": 6410634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/351cf24529a4a9b6e37275046e0ce010?s=128&d=identicon&r=PG&f=1", "display_name": "Evan", "link": "https://stackoverflow.com/users/6410634/evan"}, "edited": false, "score": 0, "creation_date": 1472677737, "post_id": 39258895, "comment_id": 65854066, "body": "1.  Qt is pretty simple from principles.  If you know c++ you should be able to get Qt.  If you are new to c++, I would suggest something else for writing GUIs. 1b.  If you don&#39;t know the code why not use Qt WYSIWIG editor (designer) it is very useful 2.  It depends on how large the application.  You can always write in one file.  It may not be the best practices but there is no file limit for c++"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1472677887, "post_id": 39258895, "comment_id": 65854141, "body": "That would require you to actually know what you are doing, so I&#39;m guessing the answer is no. But then again, since Qt <i>does</i> allow you to solve all of those issues, the answer <i>may</i> become &quot;yes&quot; with a bit of studying and effort. Besides, &quot;half an hour studying&quot; is <i>nothing</i> - when trying to solve real problems, a week or month (or more) of studying can often be needed - get used to it."}, {"owner": {"reputation": 41, "user_id": 965207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a145258f5597ba0584d85504025794e?s=128&d=identicon&r=PG", "display_name": "Dvstin", "link": "https://stackoverflow.com/users/965207/dvstin"}, "edited": false, "score": 1, "creation_date": 1472677935, "post_id": 39258895, "comment_id": 65854165, "body": "Sorry orginal too long, 3.  There will always be a minimum.  Are you going to resize the text for all the buttons so you can keep scaling down? 3b.  QT offers method for resizing and whatnot but you may have to play out with layouts to make it work properly.  Overall I agree with Jesper, from your question it seems like you don&#39;t want to get down and dirty.  No matter what you make you are going to have to get into the code to understand it."}, {"owner": {"reputation": 111, "user_id": 6410634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/351cf24529a4a9b6e37275046e0ce010?s=128&d=identicon&r=PG&f=1", "display_name": "Evan", "link": "https://stackoverflow.com/users/6410634/evan"}, "edited": false, "score": 0, "creation_date": 1472682779, "post_id": 39258895, "comment_id": 65856007, "body": "the main reason i commented about the size, was because i work on a surface pro, which has a pretty small screen, but an insane amount of pixels per inch. the qml code that i messed with had screwed up text size, and after i fixed it, still looked funny on a normal screen."}], "tags": [], "owner": {"reputation": 41, "user_id": 965207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a145258f5597ba0584d85504025794e?s=128&d=identicon&r=PG", "display_name": "Dvstin", "link": "https://stackoverflow.com/users/965207/dvstin"}, "is_accepted": false, "score": 4, "last_activity_date": 1472677473, "last_edit_date": 1472677473, "creation_date": 1472677095, "answer_id": 39258895, "question_id": 39258770, "link": "https://stackoverflow.com/questions/39258770/writing-a-qt-application-in-raw-c-no-qml/39258895#39258895", "title": "writing a qt application in raw c++ (no qml)", "body": "<p>You should look at the widgets examples.  <a href=\"http://doc.qt.io/qt-4.8/examples-widgets.html\" rel=\"nofollow\">http://doc.qt.io/qt-4.8/examples-widgets.html</a></p>\n\n<p>In the few that I selected all the widgets are created natively in C++.  For instance, in the windowflags example (<a href=\"http://doc.qt.io/qt-4.8/qt-widgets-windowflags-example.html\" rel=\"nofollow\">http://doc.qt.io/qt-4.8/qt-widgets-windowflags-example.html</a>).  It shows how to make a button.</p>\n\n<pre><code>quitButton = new QPushButton(\"Button Name\");\n// Signal and slots are how QT handles it's callbacks\nconnect(quitButton, SIGNAL(clicked()), qApp, SLOT(quit()));\n</code></pre>\n\n<p>For layouts you need to look into the QT Layout options.  I prefer to use designer to get a feel how the objects will look when placed, then usually write my own layout.  Again from the example, to add the button to the GUI</p>\n\n<pre><code>QHBoxLayout *bottomLayout = new QHBoxLayout;\nbottomLayout-&gt;addStretch(); // Fill entire area\nbottomLayout-&gt;addWidget(quitButton);  // Place our button in that area\nsetLayout(bottomLayout);  // Push layout to main GUI object.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 5039524, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a1EdxhKdBfM/AAAAAAAAAAI/AAAAAAAAA1w/puKvOGZXq3s/photo.jpg?sz=128", "display_name": "eli segal", "link": "https://stackoverflow.com/users/5039524/eli-segal"}, "is_accepted": false, "score": 1, "last_activity_date": 1472677991, "creation_date": 1472677991, "answer_id": 39259096, "question_id": 39258770, "link": "https://stackoverflow.com/questions/39258770/writing-a-qt-application-in-raw-c-no-qml/39259096#39259096", "title": "writing a qt application in raw c++ (no qml)", "body": "<p>To specify an exact location for a widget you can do something like this</p>\n\n<pre><code>QPushButton *button = new QPushButton(this);\nbutton-&gt;setText(\"Try me\");\nbutton-&gt;move(30, 10);\nbutton-&gt;show();\n</code></pre>\n\n<p>But it's better to use layouts so your layout will be immuned to window resizing, you can read about it here <a href=\"http://doc.qt.io/qt-5/examples-layouts.html\" rel=\"nofollow\">http://doc.qt.io/qt-5/examples-layouts.html</a></p>\n"}], "owner": {"reputation": 111, "user_id": 6410634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/351cf24529a4a9b6e37275046e0ce010?s=128&d=identicon&r=PG&f=1", "display_name": "Evan", "link": "https://stackoverflow.com/users/6410634/evan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "closed_date": 1472678515, "answer_count": 2, "score": -1, "last_activity_date": 1472692590, "creation_date": 1472676645, "last_edit_date": 1472692590, "question_id": 39258770, "link": "https://stackoverflow.com/questions/39258770/writing-a-qt-application-in-raw-c-no-qml", "closed_reason": "Needs more focus", "title": "writing a qt application in raw c++ (no qml)", "body": "<p>I'm a c++ newbie(idk what counts as a newbie to be honest, but know about 95% of how c++ works, but am still new at writing programs), and have recently started messing around with GUIs. </p>\n\n<p>I've made a windows application that works fine, but in addition to being a bit inconvenient at times, it frustrates me that it will only work on windows.</p>\n\n<p>I'm trying qt, and after an hour of googling, and searching around their tutorials, I cant seem to find a way to write a program using raw c++ code (no qml or any stuff like that).</p>\n\n<p>What I would want would be something like functions for displaying qt objects like:</p>\n\n<pre><code>displaybutton(xcoordinates,ycoordinates,button_object_by_reference);\n</code></pre>\n\n<p>If I'm being too general, it would be nice to know what I can specify before having this thread closed.</p>\n\n<p>edit:\nOkay, so <a href=\"http://doc.qt.io/qt-4.8/examples-widgets.html\" rel=\"nofollow\">http://doc.qt.io/qt-4.8/examples-widgets.html</a> is great, but is bad for me, because i still dont know the fundamentals of qt. Things like simply how the main window works for example, how classes are displayed(do i need to have a layout, or is that a bad question in the first place). the examples are good for better understanding what is implicit with how qt works, but it is still not too easy to learn the basics from(which i partially have, but its tedious looking back at the examples and trying to figure out how something that should be natural is done). So, where would i find an overview of how the environment works?</p>\n\n<p>so basically, \"how does qt work, but don't use qml to explain; only use c++ to explain.\"</p>\n"}, {"tags": ["c++", "c++builder", "vcl"], "answers": [{"comments": [{"owner": {"reputation": 127, "user_id": 1373097, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/595a5a4a260ecb53eaade4e160f400a6?s=128&d=identicon&r=PG", "display_name": "martinarcher", "link": "https://stackoverflow.com/users/1373097/martinarcher"}, "edited": false, "score": 0, "creation_date": 1472733679, "post_id": 39259248, "comment_id": 65878078, "body": "Thanks Remy!  I have transfer timeout set to 5 seconds and the Get method still never returns.  It hung all night last night on my dev system and never executed the line of code after the Get call.  It simply never returns which is why I am having to put the FTP software into a thread so my main thread is not stopped permanently."}, {"owner": {"reputation": 127, "user_id": 1373097, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/595a5a4a260ecb53eaade4e160f400a6?s=128&d=identicon&r=PG", "display_name": "martinarcher", "link": "https://stackoverflow.com/users/1373097/martinarcher"}, "edited": false, "score": 0, "creation_date": 1472733694, "post_id": 39259248, "comment_id": 65878087, "body": "I had the TIdFTP object on my main form and figured the object inspector was hooking up the event handler for me but didn&#39;t quite know how.  Thanks for the sample code....I&#39;ll add that into my thread execute method where the FTPClnt is being created."}, {"owner": {"reputation": 127, "user_id": 1373097, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/595a5a4a260ecb53eaade4e160f400a6?s=128&d=identicon&r=PG", "display_name": "martinarcher", "link": "https://stackoverflow.com/users/1373097/martinarcher"}, "edited": false, "score": 0, "creation_date": 1472739220, "post_id": 39259248, "comment_id": 65882434, "body": "When you say all the accesses need synced, do you just mean anything that touches a form needs to be moved to the Syncronize method? Thanks again!"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 127, "user_id": 1373097, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/595a5a4a260ecb53eaade4e160f400a6?s=128&d=identicon&r=PG", "display_name": "martinarcher", "link": "https://stackoverflow.com/users/1373097/martinarcher"}, "edited": false, "score": 0, "creation_date": 1472745352, "post_id": 39259248, "comment_id": 65886789, "body": "@martinarcher yes, that is what I mean. As for the timeouts, it definitely should not be waiting all night, unless the data is transferring very slowly but not slow enough to elapse the timeouts. Have you verified with a packet sniffer that all of the data is being transferred and a final response is being received?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 127, "user_id": 1373097, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/595a5a4a260ecb53eaade4e160f400a6?s=128&d=identicon&r=PG", "display_name": "martinarcher", "link": "https://stackoverflow.com/users/1373097/martinarcher"}, "edited": false, "score": 0, "creation_date": 1472750226, "post_id": 39259248, "comment_id": 65889404, "body": "&quot;<i>I know it&#39;s not being received</i>&quot; - then the <code>ReadTimeout</code> should be kicking in (make sure it is not set to infinite), unless the socket is frozen at the OS layer (I have seen cases where the socket API <code>select()</code> function can deadlock on old systems). &quot;<i>I am disconnecting the link to the embedded controller</i>&quot; - then you are disconnecting the sockets abnormally. The OS cannot react to abnormal disconnects in a timely manner, so it may take a long time for it to even see the disconnect."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 127, "user_id": 1373097, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/595a5a4a260ecb53eaade4e160f400a6?s=128&d=identicon&r=PG", "display_name": "martinarcher", "link": "https://stackoverflow.com/users/1373097/martinarcher"}, "edited": false, "score": 0, "creation_date": 1472750277, "post_id": 39259248, "comment_id": 65889440, "body": "&quot;<i>The TIdFTP client Get then hangs</i>&quot; - at what stage, though? While the data socket is still actively transferring data, or after the data socket has been closed and <code>Get()</code> is waiting for the final response on the command socket? Have you stepped into <code>Get()</code> with the debugger?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 127, "user_id": 1373097, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/595a5a4a260ecb53eaade4e160f400a6?s=128&d=identicon&r=PG", "display_name": "martinarcher", "link": "https://stackoverflow.com/users/1373097/martinarcher"}, "edited": false, "score": 0, "creation_date": 1472750495, "post_id": 39259248, "comment_id": 65889563, "body": "One thing you can try - set <code>TIdFTP.NATKeepAlive.UseKeepAlive</code> to false (not true), and then after connecting to the server, call <code>TIdFTP.Socket.Binding.SetKeepAliveValues()</code> to manually enable keepalives on the command socket for the lifetime of the connection, and use the <code>TIdFTP.OnDataChannelCreate</code> event to call <code>ADataChannel.Socket.Binding.SetKeepAliveValues()</code> to enable keepalives on the data socket during transfers. That might help the OS handle this situation better."}, {"owner": {"reputation": 127, "user_id": 1373097, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/595a5a4a260ecb53eaade4e160f400a6?s=128&d=identicon&r=PG", "display_name": "martinarcher", "link": "https://stackoverflow.com/users/1373097/martinarcher"}, "edited": false, "score": 0, "creation_date": 1472750527, "post_id": 39259248, "comment_id": 65889579, "body": "I have not debugged the Get method.  I&#39;m not sure what you mean by terminating the socket abnormally.  I can simulate an FTP failure in two ways....unplug the network cable between the two boxes or reboot the embedded controller that is running the server.  The same result happens....get never returns.  It could be the OS not reporting the connection loss.  I am explicitly setting the TransferTimeout to 5 seconds...."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 127, "user_id": 1373097, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/595a5a4a260ecb53eaade4e160f400a6?s=128&d=identicon&r=PG", "display_name": "martinarcher", "link": "https://stackoverflow.com/users/1373097/martinarcher"}, "edited": false, "score": 0, "creation_date": 1472750784, "post_id": 39259248, "comment_id": 65889711, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/122447/discussion-between-remy-lebeau-and-martinarcher\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 1, "last_activity_date": 1472678741, "creation_date": 1472678741, "answer_id": 39259248, "question_id": 39258694, "link": "https://stackoverflow.com/questions/39258694/tidftp-in-a-thread-not-firing-work-method/39259248#39259248", "title": "TIdFTP in a thread not firing Work method", "body": "<blockquote>\n  <p>the Get method indefinitely hangs if the connection is lost during the transfer.</p>\n</blockquote>\n\n<p>It should fail eventually.  It just might take awhile for the OS to actually detect the lost connection and invalidate the open sockets so I/O operations start reporting errors.  If you don't want to wait that long, make sure to set the <code>ReadTimeout</code> property to a reasonable timeout (<code>TIdFTP</code> set it to 1 minute by default), as well as the <code>TransferTimeout</code> property (infinite by default).</p>\n\n<blockquote>\n  <p>The idea is to detect if the connection has hung, orphan the thread, and spawn a \"retry\".</p>\n</blockquote>\n\n<p><strong>NEVER</strong> \"orphan\" a thread.  You could simply have the main thread call <code>TIdFTP</code>'s <code>Abort()</code> and <code>Disconnect()</code> methods instead, to terminate a transfer in progress and close the command socket, respectively.</p>\n\n<blockquote>\n  <p>My problem is I've declared the object in the thread's h file as well as the methods that should fire (WorkBegin, WorkEnd, Work, etc) like follows....</p>\n</blockquote>\n\n<p><em>DO NOT</em> call <code>Application-&gt;ProcessMessages()</code> inside of a synched method.  The method is already running inside of a main thread message handler, just exit the synched method so control returns to the main message loop.</p>\n\n<p>Also, your <code>OnWork...</code> handlers are directly accessing <code>FrmFTP-&gt;FTPProg-&gt;Max</code> from outside of the main thread.  Those accesses need to be synched as well.  <em>ANYTHING</em> that touches the main UI needs to be synched.</p>\n\n<blockquote>\n  <p>None of these methods are ever fired as the Get begins, transfers, and completes. Any idea why they wouldn't fire?</p>\n</blockquote>\n\n<p>Did you hook them up to begin with?  Presumably <code>FTPClnt</code> is being created in <code>FTPThread::Execute()</code>, but is it assigning your handlers to the <code>FTPClnt-&gt;OnWork...</code> events after creating <code>FTPClnt</code>?  They are not going to hook themselves up for you, you have to do it yourself, eg:</p>\n\n<pre><code>FTPClnt = new TIdFTP;\nFTPClnt-&gt;OnWorkBegin = &amp;FTPClntWorkBegin;\nFTPClnt-&gt;OnWorkEnd = &amp;FTPClntWorkEnd;\nFTPClnt-&gt;OnWork = &amp;FTPClntWork;\n</code></pre>\n\n<blockquote>\n  <p>The same functionality on my main thread worked fine.</p>\n</blockquote>\n\n<p>If you drop a <code>TIdFTP</code> object on a Form at design-time, and assign its <code>OnWork...</code> events within the Object Inspector, then the DFM streaming system hooks up the event handlers for you when the Form is created at runtime.</p>\n\n<p>Simply <em>declaring</em> event handlers is not enough.  Somebody (you or the DFM) has to actually <em>hook them up</em> at runtime.</p>\n"}], "owner": {"reputation": 127, "user_id": 1373097, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/595a5a4a260ecb53eaade4e160f400a6?s=128&d=identicon&r=PG", "display_name": "martinarcher", "link": "https://stackoverflow.com/users/1373097/martinarcher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "accepted_answer_id": 39259248, "answer_count": 1, "score": 0, "last_activity_date": 1472678741, "creation_date": 1472676303, "question_id": 39258694, "link": "https://stackoverflow.com/questions/39258694/tidftp-in-a-thread-not-firing-work-method", "title": "TIdFTP in a thread not firing Work method", "body": "<p>I've got a VCL application written in Embarcadero's C++ 10 Seattle.  The main thread spawns a thread to run the TIdFTP functionality since the Get method indefinitely hangs if the connection is lost during the transfer.  The idea is to detect if the connection has hung, orphan the thread, and spawn a \"retry\".  My problem is I've declared the object in the thread's h file as well as the methods that should fire (WorkBegin, WorkEnd, Work, etc) like follows....</p>\n\n<pre><code>class FTPThread : public TThread\n{\nprotected:\n    void __fastcall Execute();\n    void __fastcall UpdateUI();\npublic:\n    __fastcall FTPThread(bool CreateSuspended);\n    String FTPhostname;\n    String FTPusername;\n    String FTPpassword;\n    String remoteDir;\n    String localDir;\n    String localTempDir;\n    String fileName;\n    TIdFTP *FTPClnt;\n    void __fastcall FTPClntWorkBegin(TObject *ASender, TWorkMode AWorkMode, __int64 AWorkCountMax);\n    void __fastcall FTPClntWorkEnd(TObject *ASender, TWorkMode AWorkMode);\n    void __fastcall FTPClntWork(TObject *ASender, TWorkMode AWorkMode, __int64 AWorkCount);\n    void __fastcall FTPClntAfterGet(TObject *ASender, TStream *AStream);\n\n};\n</code></pre>\n\n<p>I then implemented the Work functions in the thread's cpp file like this.....</p>\n\n<pre><code>void __fastcall FTPThread::UpdateUI()\n{\n    if (FrmFTP) {\n        //FrmFTP-&gt;FTPProg-&gt;Max = fileSizeBytes;\n        FrmFTP-&gt;FTPProg-&gt;Position = ftpProgress;\n        FrmFTP-&gt;BringToFront();\n        Application-&gt;ProcessMessages();\n    }\n}\n\nvoid __fastcall FTPThread::FTPClntWorkBegin(TObject *ASender,\n    TWorkMode AWorkMode, __int64 AWorkCountMax) {\n    ftpProgress = 0;\n    if (FrmFTP) {\n        FrmFTP-&gt;FTPProg-&gt;Max = fileSizeBytes;\n    }\n    Synchronize(&amp;UpdateUI);\n}\n// ---------------------------------------------------------------------------\n\nvoid __fastcall FTPThread::FTPClntWorkEnd(TObject *ASender,\n    TWorkMode AWorkMode)\n\n{\n    if (FrmFTP) {\n        ftpProgress = FrmFTP-&gt;FTPProg-&gt;Max;\n    }\n    Synchronize(&amp;UpdateUI);\n}\n// ---------------------------------------------------------------------------\n\nvoid __fastcall FTPThread::FTPClntWork(TObject *ASender, TWorkMode AWorkMode,\n    __int64 AWorkCount)\n\n{\n   ftpProgress = AWorkCount;\n   Synchronize(&amp;UpdateUI);\n}\n// ---------------------------------------------------------------------------\n\nvoid __fastcall FTPThread::FTPClntAfterGet(TObject *ASender,\n    TStream *AStream) {\n    ftpCompletionStatus = 1;\n}\n// ---------------------------------------------------------------------------\n</code></pre>\n\n<p>None of these methods are ever fired as the Get begins, transfers, and completes.  Any idea why they wouldn't fire?  The same functionality on my main thread worked fine.  I feel like I'm somehow not trying these methods I've implemented to the TIdFTP Object but I'm not sure how to go about doing that.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "makefile", "cmake", "imagemagick", "magickwand"], "comments": [{"owner": {"reputation": 4792, "user_id": 588243, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7134a1b3bb60919edcbf78eab4e0992d?s=128&d=identicon&r=PG", "display_name": "Torbj&#246;rn", "link": "https://stackoverflow.com/users/588243/torbj%c3%b6rn"}, "edited": false, "score": 0, "creation_date": 1472713841, "post_id": 39258673, "comment_id": 65864789, "body": "Either the environments on the two machines <i>do</i> differ or it&#39;s a bug/insufficiency of the FindImageMagick module. <i>Edit</i>: Did you try to debug FindImageMagick by printing the contents of the variables set my the find module?"}, {"owner": {"reputation": 2434, "user_id": 964843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eLOw9.png?s=128&g=1", "display_name": "gw0", "link": "https://stackoverflow.com/users/964843/gw0"}, "reply_to_user": {"reputation": 4792, "user_id": 588243, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7134a1b3bb60919edcbf78eab4e0992d?s=128&d=identicon&r=PG", "display_name": "Torbj&#246;rn", "link": "https://stackoverflow.com/users/588243/torbj%c3%b6rn"}, "edited": false, "score": 0, "creation_date": 1472728305, "post_id": 39258673, "comment_id": 65874326, "body": "Yeah, I printed all the variables (see my own answer) and got identical output on both machines."}], "answers": [{"comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1472730127, "post_id": 39266472, "comment_id": 65875524, "body": "<code>But IMAGEMAGICK_FOUND is not set anywhere in the package</code> - Variable <i>IMAGEMAGICK_FOUND</i> is set by previous call to <code>FIND_PACKAGE_HANDLE_STANDARD_ARGS</code>. Actually, this call sets both <i>ImageMagick_FOUND</i> and <i>IMAGEMAGICK_FOUND</i> variables, so the call to <code>set()</code> you refer to is redudant (but it can be meaningfull for backward compatibility)."}], "tags": [], "owner": {"reputation": 13260, "user_id": 6612932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3mwe.jpg?s=128&g=1", "display_name": "rgmt", "link": "https://stackoverflow.com/users/6612932/rgmt"}, "is_accepted": true, "score": 2, "last_activity_date": 1472719590, "last_edit_date": 1472719590, "creation_date": 1472718617, "answer_id": 39266472, "question_id": 39258673, "link": "https://stackoverflow.com/questions/39258673/how-to-get-cmake-to-add-magickwand-library-linking-automatically-everywhere/39266472#39266472", "title": "how to get CMake to add MagickWand library linking automatically everywhere", "body": "<p>Short answer: the package <code>ImageMagick</code> is buggy.</p>\n\n<p>Looking in <a href=\"https://github.com/Kitware/CMake/blob/master/Source/cmFindPackageCommand.cxx#L638\" rel=\"nofollow\">CMake's sources</a>, the <code>REQUIRED</code> mechanism is handled exclusively through the variable package-<code>_FOUND</code>, independently of the required components.</p>\n\n<p>Looking in the package <code>ImageMagick</code> <a href=\"https://github.com/Kitware/CMake/blob/master/Modules/FindImageMagick.cmake#L273\" rel=\"nofollow\">here</a>, <code>ImageMagick_FOUND</code> is set as follows:</p>\n\n<pre><code>set(ImageMagick_FOUND ${IMAGEMAGICK_FOUND})\n</code></pre>\n\n<p>But <code>IMAGEMAGICK_FOUND</code> is not set anywhere in the package, so the call will always unset <code>ImageMagick_FOUND</code>, and it will always be evaluated to <strong>true</strong> (not actively set to <strong>false</strong>), wether or not the components are effectively found.</p>\n\n<p>You can either debug the package (and propose a pull request) or check the component variable:</p>\n\n<pre><code>if(NOT ImageMagick_MagickWand_FOUND)\n    message(FATAL_ERROR \"MagickWand not found\")\nendif()\n</code></pre>\n\n<p>I guess the test will fail on your second machine.</p>\n\n<hr>\n\n<p>By the way, you should only use <code>ImageMagick_INCLUDE_DIRS</code> and <code>ImageMagick_LIBRARIES</code> to link to the library (the <code>ImageMagick_MagickWand*</code> variables are here redundant). If you choose to debug the package, you may also declare imported targets.</p>\n"}, {"tags": [], "owner": {"reputation": 2434, "user_id": 964843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eLOw9.png?s=128&g=1", "display_name": "gw0", "link": "https://stackoverflow.com/users/964843/gw0"}, "is_accepted": false, "score": 1, "last_activity_date": 1472728233, "creation_date": 1472728233, "answer_id": 39269973, "question_id": 39258673, "link": "https://stackoverflow.com/questions/39258673/how-to-get-cmake-to-add-magickwand-library-linking-automatically-everywhere/39269973#39269973", "title": "how to get CMake to add MagickWand library linking automatically everywhere", "body": "<p>Figured it out, despite the output of</p>\n\n<pre><code>MESSAGE(${ImageMagick_FOUND})\nMESSAGE(${ImageMagick_INCLUDE_DIRS})\nMESSAGE(${ImageMagick_LIBRARIES})\nMESSAGE(${ImageMagick_MagickWand_FOUND})\nMESSAGE(${ImageMagick_MagickWand_INCLUDE_DIRS})\nMESSAGE(${ImageMagick_MagickWand_LIBRARY})\n</code></pre>\n\n<p>being identical, the installed packages differed. I installed the magick-dev packages via virtual packages in aptitude, which for some reason used the <code>graphicsmagick</code> suite for some packages (a imagemagick fork) instead of the original imagemagick suite.</p>\n\n<p>For reference, the used aptitude search one-liner was <code>aptitude search 'magick ?installed' | sort</code> which listed three graphicsmagick packages on the second machine where imagemagick packages were on the first machine.</p>\n"}], "owner": {"reputation": 2434, "user_id": 964843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eLOw9.png?s=128&g=1", "display_name": "gw0", "link": "https://stackoverflow.com/users/964843/gw0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 620, "favorite_count": 0, "accepted_answer_id": 39266472, "answer_count": 2, "score": 1, "last_activity_date": 1476785475, "creation_date": 1472676207, "last_edit_date": 1476785475, "question_id": 39258673, "link": "https://stackoverflow.com/questions/39258673/how-to-get-cmake-to-add-magickwand-library-linking-automatically-everywhere", "title": "how to get CMake to add MagickWand library linking automatically everywhere", "body": "<p>I want to use CMake in my software that uses MagickWand.</p>\n\n<p>CMake works on my machine and generates a useful Makefile.\nOn another machine, I have to manually add</p>\n\n<pre><code>set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -lMagickWand-6.Q16 -lMagickCore-6.Q16\")\n</code></pre>\n\n<p>otherwise the linker can't find MagickWandGenesis() and other functions.</p>\n\n<p>I found that -l flags via <code>pkg-config --cflags --libs MagickWand</code>.</p>\n\n<p>Shouldn't CMake already generate linker flags for me with <code>TARGET_LINK_LIBRARIES</code>?</p>\n\n<p>Did I miss something obvious, or why is this not working everywhere?</p>\n\n<hr>\n\n<p>I have this code in CMakeLists.txt:</p>\n\n<pre><code>FIND_PACKAGE(ImageMagick\n  REQUIRED\n  COMPONENTS MagickWand\n)\n</code></pre>\n\n<p>[...]</p>\n\n<pre><code>set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -DMAGICKCORE_HDRI_ENABLE=0 -DMAGICKCORE_QUANTUM_DEPTH=16\")\n</code></pre>\n\n<p>[...]</p>\n\n<pre><code>INCLUDE_DIRECTORIES(\n  ${Boost_INCLUDE_DIR}\n  ${ImageMagick_INCLUDE_DIRS}\n  ${ImageMagick_MagickWand_INCLUDE_DIRS}\n)\n</code></pre>\n\n<p>[...]</p>\n\n<pre><code>TARGET_LINK_LIBRARIES(application_name\n  [...]\n  ${Boost_LIBRARIES}\n  ${CURL_LIBRARIES}\n  ${ImageMagick_LIBRARIES}\n  ${ImageMagick_MagickWand_LIBRARY}\n)\n</code></pre>\n\n<p>That last <code>${ImageMagick_MagickWand_LIBRARY}</code> shouldn't even be necessary.</p>\n\n<p>Using Magick 6.8.9.9, CMake 3.0.2 on both machines (Debian Jessie).</p>\n"}, {"tags": ["c++", "c", "arduino", "spi", "raspberry-pi3"], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 4847529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abd1d868cc725c099ad63c2c1e5a6e6a?s=128&d=identicon&r=PG&f=1", "display_name": "giri", "link": "https://stackoverflow.com/users/4847529/giri"}, "edited": false, "score": 0, "creation_date": 1473353872, "post_id": 39258956, "comment_id": 66118937, "body": "thanks for your reply js441. I switched to using python with spiDev because it is much more straight forward. Let me ask you, do you think python over C is equally acceptable regarding industry standard?"}, {"owner": {"reputation": 1144, "user_id": 6726446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/602d84fcaa2dbe153f57461755aae30d?s=128&d=identicon&r=PG&f=1", "display_name": "js441", "link": "https://stackoverflow.com/users/6726446/js441"}, "reply_to_user": {"reputation": 7, "user_id": 4847529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abd1d868cc725c099ad63c2c1e5a6e6a?s=128&d=identicon&r=PG&f=1", "display_name": "giri", "link": "https://stackoverflow.com/users/4847529/giri"}, "edited": false, "score": 0, "creation_date": 1473354538, "post_id": 39258956, "comment_id": 66119266, "body": "@giri That&#39;s a difficult question to answer. Both are used in industry, it&#39;s more a case of what works for you. If you can make a valid working solution in one language easier than the other, then that&#39;s the language for you."}], "tags": [], "owner": {"reputation": 1144, "user_id": 6726446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/602d84fcaa2dbe153f57461755aae30d?s=128&d=identicon&r=PG&f=1", "display_name": "js441", "link": "https://stackoverflow.com/users/6726446/js441"}, "is_accepted": true, "score": 0, "last_activity_date": 1472677368, "creation_date": 1472677368, "answer_id": 39258956, "question_id": 39258593, "link": "https://stackoverflow.com/questions/39258593/unreliable-spi-byte-array-transfer-from-arduino-to-raspberry-pi/39258956#39258956", "title": "Unreliable SPI byte array transfer from Arduino to Raspberry Pi", "body": "<p>At a guess I would say that this is a timing issue between the sender and receiver. Try looking at the bits of the data that you are receiving and see if they are shifted forward or backward. This will possibly indicate that the pi is waiting too long to begin receiving, or not waiting long enough for all of the data. I think the issues are probably around the delays:</p>\n\n<pre><code>delay(500); //for errors\n</code></pre>\n\n<p>on the Arduino, and </p>\n\n<pre><code>delay(1000); \n</code></pre>\n\n<p>on the receiver. Why are you using these? 500ms is a long time to keep the pi waiting for a response to the SPI data.</p>\n\n<p>Just a note, there is also now an SPI kernel driver (spidev) for the pi - this is a much more industry standard approach, and is potentially a more robust method.</p>\n\n<p>There's a good example of this on the raspberry pi github site: <a href=\"https://github.com/raspberrypi/linux/blob/rpi-4.4.y/Documentation/spi/spidev_test.c\" rel=\"nofollow\">https://github.com/raspberrypi/linux/blob/rpi-4.4.y/Documentation/spi/spidev_test.c</a></p>\n"}], "owner": {"reputation": 7, "user_id": 4847529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abd1d868cc725c099ad63c2c1e5a6e6a?s=128&d=identicon&r=PG&f=1", "display_name": "giri", "link": "https://stackoverflow.com/users/4847529/giri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 843, "favorite_count": 0, "accepted_answer_id": 39258956, "answer_count": 1, "score": 0, "last_activity_date": 1472677368, "creation_date": 1472675861, "question_id": 39258593, "link": "https://stackoverflow.com/questions/39258593/unreliable-spi-byte-array-transfer-from-arduino-to-raspberry-pi", "title": "Unreliable SPI byte array transfer from Arduino to Raspberry Pi", "body": "<p>I'm working on a project that collects data from an Arduino Pro Mini and sends it using SPI to a raspberry Pi for storage.</p>\n\n<p>The Pro Mini will be reading analog input and calculating voltage (once I finish), and passing values to the Pi when prompted using an ISR.</p>\n\n<p>I'm using C/C++ for both platforms to keep it uniform. The slave code is snipped together using Arduino IDE and the master code is based off a BCM2835 SPI library example for the Pi. </p>\n\n<p>Arduino code is meant to calculate a <strong>float</strong> value and pre-process the float value into an array of 4 bytes/chars (I'm shooting for binary because I think it is the best way to go).\nOnce prompted by the Pi, each byte is sent and will be recompiled into a float.</p>\n\n<p>Here is what I have now:</p>\n\n<p>Slave</p>\n\n<pre><code>/*************************************************************\nARDUINO BREAKER READ/SPI PRE-PROC/TRANSMIT CASES\n****************************************************************/\n\n/***************************************************************\n Global Variables\n***************************************************************/\n\nbyte command = 0; //command from PI\nbyte bytes[4];    //\n\nint sensorVoltage, sensorCurrent; //eventual live reading vars\nfloat Voltage, Current, RealCurrent, RealVoltage, Power;\n\n/***************************************************************\n Set Up\n  -designate arudino as slave\n  -turn on interrupts\n***************************************************************/\n\nvoid setup (void)\n{\n  //debugging with serial monitor\n  Serial.begin(9600);\n\n  // Set up arduino as slave\n  pinMode(MOSI, INPUT);\n  pinMode(SCK, INPUT);\n  pinMode(SS, INPUT);   \n  pinMode(MISO, OUTPUT);\n\n  // turn on SPI in slave mode\n  SPCR |= _BV(SPE);\n\n  // turn on interrupts\n  SPCR |= _BV(SPIE);\n\n}  // end of setup\n\n/*************************************************************\n Interrupt Service Routine \n ************************************************************/\n\n// SPI interrupt routine\nISR (SPI_STC_vect)\n{\n  delay(500); //for errors\n\n  // Create union of shared memory space\n  union \n  {\n    float f_var;\n    unsigned char bytes[4];\n  } u;\n\n  // Overwrite bytes of union with float variable\n  u.f_var = RealVoltage;\n\n  // Assign bytes to input array\n  memcpy(bytes, u.bytes, 4);\n\n  byte c = SPDR;\n  command = c; \n\n  switch (command)\n  {\n  // null command zeroes register\n  case 0:\n\n    SPDR = 0;\n    break;\n\n  // case a - d reserved for voltage\n  case 'a':\n    SPDR = bytes[3];  \n    break;\n\n  // incoming byte, return byte result\n  case 'b':\n\n    SPDR = bytes[2];  \n    break;\n\n  // incoming byte, return byte result    \n  case 'c':\n\n    SPDR =  bytes[1];  \n    break;\n\n\n  // incoming byte, return byte result    \n  case 'd':\n\n    SPDR = bytes[0];  \n    break;\n\n /**  // case e -h reserved for current\n  case 'e':\n\n    SPDR = amps.b[0];  \n    break;\n\n  // incoming byte, return byte result\n  case 'f':\n\n    SPDR = amps.b[1];  \n    break;\n\n  // incoming byte, return byte result    \n  case 'g':\n\n    SPDR = amps.b[2];  \n    break;\n\n  // incoming byte, return byte result    \n  case 'h':\n\n    SPDR = amps.b[3];  \n    break;\n\n   // case i - l reserved for wattage\n  case 'i':\n\n    SPDR = watts.b[0];  \n    break;\n\n  // incoming byte, return byte result\n  case 'j':\n\n    SPDR = watts.b[1];  \n    break;\n\n  // incoming byte, return byte result    \n  case 'k':\n\n    SPDR = watts.b[2];  \n    break;\n\n  // incoming byte, return byte result    \n  case 'l':\n\n    SPDR = watts.b[3];  \n    break;**/\n\n  } // end of switch\n\n}  // end of interrupt service routine (ISR) SPI_STC_vect\n\n/***************************************************************  \n Loop until slave is enabled by Pi.\n****************************************************************/\nvoid loop (void)\n{\n/*************************************************************\nRead and Calculate\n****************************************************************/\n\n  /**\n  sensorVoltage = analogRead(A2);\n  sensorCurrent = analogRead(A3);\n  Voltage = sensorVoltage*(5.0/1023.0);\n  Current = sensorCurrent*(5.0/1023.0);\n  RealCurrent = Current/0.204545;\n  RealVoltage = (Voltage/0.022005);\n  Power = RealVoltage*RealCurrent;\n**/\n  RealVoltage = 1.234;\n/*************************************************************\nLoop Check for SS activation\n****************************************************************/\n\n  // if SPI not active, clear current command, else preproc floats and pass to SPI\n  if (digitalRead (SS) == HIGH){\n    command = 0;\n  }\n/*************************************************************\nDebug with serial monitor\n****************************************************************/\n/*\n  Serial.print(\"Byte 3: \");\n  Serial.println(bytes[3],BIN);\n  delay(500);\n  Serial.print(\"Byte 2: \");\n  Serial.println(bytes[2],BIN);\n  delay(500);\n  Serial.print(\"Byte 1: \");\n  Serial.println(bytes[1],BIN);\n  delay(500);\n  Serial.print(\"Byte 0: \");\n  Serial.println(bytes[0],BIN);\n  delay(1000);\n  Serial.println();*/\n}\n</code></pre>\n\n<p>Master</p>\n\n<pre><code>#include &lt;bcm2835.h&gt;\n#include &lt;stdio.h&gt;\n\n\nvoid setup()\n{\n    bcm2835_spi_begin();\n    bcm2835_spi_setBitOrder(BCM2835_SPI_BIT_ORDER_LSBFIRST);      // The default\n    bcm2835_spi_setDataMode(BCM2835_SPI_MODE0);                   // The default\n    bcm2835_spi_setClockDivider(BCM2835_SPI_CLOCK_DIVIDER_65536); // The default\n    bcm2835_spi_setChipSelectPolarity(BCM2835_SPI_CS0, LOW);      // the default\n}\n\nchar getByte(const char command){\n\n    char read_data = bcm2835_spi_transfer(command);\n    delay(100);\n    return read_data;\n}\n\nint main(int argc, char **argv)\n{\n//If you call this, it will not actually access the GPIO\n//Use for testing\n//bcm2835_set_debug(1);\n\n    if (!bcm2835_init())\n        return 1;\n    setup();\n\n//Start communication       \n    bcm2835_spi_chipSelect(BCM2835_SPI_CS0);// Enable 0\n\n    //voltage 1-4  \n    char read_data = getByte('a');\n    printf(\"byte is %02d\\n\", read_data);\n\n    read_data = getByte('b');\n    printf(\"byte is %02d\\n\", read_data);\n\n    read_data = getByte('c');\n    printf(\"byte is %02d\\n\", read_data);\n\n    read_data = getByte('d');\n    printf(\"byte is %02d\\n\", read_data);    \n\n   /** voltage = volts.f;   \n    printf(\"%.6f\", voltage);\n    printf(\"\\n\");\n    **/\n    delay(1000);   \n\n    bcm2835_spi_setChipSelectPolarity(BCM2835_SPI_CS0, HIGH);\n    bcm2835_spi_chipSelect(BCM2835_SPI_CS0);// Disable 0\n    bcm2835_spi_end();\n    bcm2835_close();\n\n    return 0;\n}\n</code></pre>\n\n<p>I'm using a fixed value to debug the code. Sometimes the output from SPI on the Pi is accurate, but otherwise it changes and outputs partially accurate and/or random bytes.</p>\n\n<p>The issue I have been unable to work out is stability on the side of the Pi, so I am looking for help evaluating whether my code is causing inaccuracies or if it's my hardware. </p>\n"}, {"tags": ["c++", "asynchronous", "callback", "wrl"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1472676230, "post_id": 39258504, "comment_id": 65853373, "body": "No, its scope is the body of the function here, just like any smart pointer type works in C++.  It is dead by the time the callback runs.  Neither WRL nor ComPtr&lt;&gt; are exactly very convenient when you have to deal with callbacks, the C++/CX extension makes it easier.  <a href=\"https://msdn.microsoft.com/en-us/windows/uwp/threading-async/asynchronous-programming-in-cpp-universal-windows-platform-apps\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/windows/uwp/threading-async/&hellip;</a>"}, {"owner": {"reputation": 11, "user_id": 6780246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/333fa6b6cf578ec44d765f6e3c09ef2f?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/6780246/mark"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1472680273, "post_id": 39258504, "comment_id": 65855123, "body": "Thanks for the reply. pOperation is dead by the time the callback runs, but the callback will still execute?"}], "owner": {"reputation": 11, "user_id": 6780246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/333fa6b6cf578ec44d765f6e3c09ef2f?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/6780246/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 152, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1472675461, "creation_date": 1472675461, "question_id": 39258504, "link": "https://stackoverflow.com/questions/39258504/scope-of-c-comptr-callback", "title": "Scope of C++ ComPtr Callback", "body": "<p>I have been reading up on WRL, specifically using Callback and ComPtr to effect an asynchronous operation. However I cannot seem to get a clear answer on the lifetime of ComPtr when used in this way. The Callback utilizes information that the async function returns, but does not rely on any other information from the application, so I would like to not wait for its completion. For example:  </p>\n\n<pre><code>void SomeFunction()\n{\n  ComPtr&lt;IAsyncOperation&lt;...*&gt;&gt; pOperation;\n\n  //Activate instance and call async function\n\n  pOperation-&gt;put_Completed(Callback&lt;IAsyncOperationCompletedHander&lt;...*&gt;[...](...)\n  {\n    //Logic to be completed when Async call finishes\n  }).Get());\n\n  //Function exits here, process keeps running. Is pOperation going to get cleaned up?\n}\n</code></pre>\n\n<p>I am under the impression that since ComPtr is a smart pointer, it won't get garbage collected until the callback completes and the refcount == 0, is this correct?</p>\n"}, {"tags": ["c++", "char", "fstream"], "comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 3, "creation_date": 1472673176, "post_id": 39257890, "comment_id": 65851803, "body": "Start with this: <a href=\"http://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\" title=\"why is iostreameof inside a loop condition considered wrong\">stackoverflow.com/questions/5605125/&hellip;</a>."}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 4, "creation_date": 1472673215, "post_id": 39257890, "comment_id": 65851822, "body": "Why not extract only the numbers using <a href=\"http://www.cplusplus.com/reference/cctype/isdigit/\" rel=\"nofollow noreferrer\">isdigit()</a> and ignore everything else, instead?"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 1, "creation_date": 1472673217, "post_id": 39257890, "comment_id": 65851826, "body": "Then, once you have read into a string just get all the numeric characters and write them back into a separate file."}, {"owner": {"reputation": 593, "user_id": 6534541, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/561c59a13a698b9777eb0b88d2e29158?s=128&d=identicon&r=PG&f=1", "display_name": "I&#39;m here for Winter Hats", "link": "https://stackoverflow.com/users/6534541/im-here-for-winter-hats"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1472673351, "post_id": 39257890, "comment_id": 65851886, "body": "@FirstStep would me only extracting the numbers mess up the format? That is why I decided t do it this way. Because one line could be 272 and the next one 345 I don&#39;t want it to mush into 272345"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1472673382, "post_id": 39257890, "comment_id": 65851904, "body": "@user5468794 But you said you wanted to remove all whitespace ???"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1472673395, "post_id": 39257890, "comment_id": 65851906, "body": "You will have trouble with 1.0e2"}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1472673429, "post_id": 39257890, "comment_id": 65851932, "body": "@user5468794 it depends on the problem. I don&#39;t know because you did now provide sample inputs and the desired outputs. And how would you like to populate the numbers: each line is a whole number.. etc."}], "answers": [{"comments": [{"owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1472674466, "post_id": 39258210, "comment_id": 65852500, "body": "@FirstStep I cannot get it. The answer says <i>&quot;Because iostream::eof will only return true after reading the end of the stream. It does not indicate, that the next read will be the end of the stream.&quot;</i> But that does not affect my code, so what do you mean?"}, {"owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1472674661, "post_id": 39258210, "comment_id": 65852592, "body": "@FirstStep please enlighten me."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1472675078, "post_id": 39258210, "comment_id": 65852799, "body": "Worst case of testing for EOF (which is usually wrong): <code>while ((infile &gt;&gt; c).eof() == false)</code>"}, {"owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "edited": false, "score": 0, "creation_date": 1472675195, "post_id": 39258210, "comment_id": 65852869, "body": "@DieterL&#252;cking I didn&#39;t get it. What do you mean?"}], "tags": [], "owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "is_accepted": false, "score": -2, "last_activity_date": 1472674208, "creation_date": 1472674208, "answer_id": 39258210, "question_id": 39257890, "link": "https://stackoverflow.com/questions/39257890/c-how-to-remove-all-chars-and-special-characters-from-a-file/39258210#39258210", "title": "C++ how to remove all chars and special characters from a file", "body": "<p>This is just an example in order to extract all chars you want from a file with a dedicated filter:</p>\n\n<pre><code>std::string get_purged_file(const std::string&amp; filename) {\n  std::string strbuffer;\n  std::ifstream infile;\n\n  infile.open(filename, std::ios_base::in);\n  if (infile.fail()) {\n    // throw an error\n  }\n\n  char c;\n  while ((infile &gt;&gt; c).eof() == false) {\n    if (std::isdigit(c) || c == '.') {\n      strbuffer.push_back(c);\n    }\n  }\n\n  infile.close();\n  return strbuffer;\n}\n</code></pre>\n\n<p><em>Note:</em> this is just an example and it has to be subject to optimizations. Just to give you an idea: </p>\n\n<ul>\n<li>Read more than one char at time, (with a proper buffer).</li>\n<li>Reserve memory in string.</li>\n</ul>\n\n<hr>\n\n<p>Once you have the buffer \"purged\" you can overwrite your file on save the content into another file. </p>\n"}, {"tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": false, "score": 0, "last_activity_date": 1472676013, "last_edit_date": 1472676013, "creation_date": 1472675444, "answer_id": 39258498, "question_id": 39257890, "link": "https://stackoverflow.com/questions/39257890/c-how-to-remove-all-chars-and-special-characters-from-a-file/39258498#39258498", "title": "C++ how to remove all chars and special characters from a file", "body": "<p><strong>Preliminary remarks</strong></p>\n\n<p>If I understand well, you want to keep only the numbers.  Maybe it's easier to retain chars that are ascii numbers and eliminate the others rather than eliminate a lot of other chars classes and hope that the remainder is only numbers. </p>\n\n<p>Also never loop on <code>eof</code> to read a file.  Loop on the stream instead. </p>\n\n<p>finally, you should read from an <code>ifstream</code> and write to an <code>ofstream</code></p>\n\n<p><strong>First approach: reading strings</strong></p>\n\n<p>You can read/write the file line by line.  You need enough memory to store the largest line, but you benefit from buffering effect.   </p>\n\n<pre><code>if (myfile.is_open()) { //if file is open then\n    string line;\n    while(getline(myfile, line)){ //while succesful read\n        line.erase(remove_if(line.begin(), line.end(), [](const char&amp; c) { return !isdigit(c); } ), line.end()); \n        ... // then write the line in the output file \n    }\n}\nelse ...\n</code></pre>\n\n<p><a href=\"https://ideone.com/ffKOSF\" rel=\"nofollow\">Online demo</a></p>\n\n<p><strong>Second approach: reading chars</strong></p>\n\n<p>You can read/write char by char, which gives very flexible option for handling individual characters (toggle string flags, etc...).  You also benefit from buffering, but you have function call overhaead for every single char.  </p>\n\n<pre><code>if (myfile) { //if file is open then\n    int c; \n    while((c = myfile.get())!=EOF){ //while succesful read\n                        //remove all chars, special and whitespace\n        if (isdigit(c) || c=='\\n') \n            ... .put(c); // then write the line in the output file \n    }\n}\nelse ...\n</code></pre>\n\n<p><a href=\"https://ideone.com/ExjOZt\" rel=\"nofollow\">Online demo</a></p>\n\n<p><strong>Other approaches</strong></p>\n\n<p>You could also read a large fixed size buffer, and operate similarly as with the strings (but don't eliminate LF then).  The advantage is that the memory need is not impacted by some very large lines in the file. </p>\n\n<p>You could also determine the file size, and try to read the full file at once (or in very large chunks).  You'd then maximize performance at the cost of memory consumption.  </p>\n"}], "owner": {"reputation": 593, "user_id": 6534541, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/561c59a13a698b9777eb0b88d2e29158?s=128&d=identicon&r=PG&f=1", "display_name": "I&#39;m here for Winter Hats", "link": "https://stackoverflow.com/users/6534541/im-here-for-winter-hats"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1906, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1472676013, "creation_date": 1472673015, "question_id": 39257890, "link": "https://stackoverflow.com/questions/39257890/c-how-to-remove-all-chars-and-special-characters-from-a-file", "title": "C++ how to remove all chars and special characters from a file", "body": "<p>I have seen how to remove specific chars from a string but I am not sure how to do it with a file open or if you can even do that. Basically a file will be open with anything in it, my goal is to remove all the letters a-z, special characters, and whitespace that may appear so that all that is left is my numbers. Can you easily remove all chars rather than specifying a,b,c etc when the file is open or would I have to convert it to a string? Also would it be better to do this in memory?</p>\n\n<p>My code this far as is follows:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint main() {\n\n    string filename;\n    cout &lt;&lt; \"Enter the name of the data file to open\" &lt;&lt; endl;\n    cin &gt;&gt; filename &gt;&gt; endl;\n\n    ofstream myfile;\n    myfile.open(filename);\n\n    if (myfile.is_open()) { //if file is open then\n\n        while(!myfile.eof()){ //while not end of file\n                                //remove all chars, special and whitespace\n        }\n    }\n    else{\n        cout &lt;&lt; \"Error in opening file\" &lt;&lt; endl;\n    }\n        return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "opencv"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1472673007, "post_id": 39257858, "comment_id": 65851709, "body": "can you post a working and non-working xml file (if not too big)"}, {"owner": {"reputation": 1096, "user_id": 4260559, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Dsphv.jpg?s=128&g=1", "display_name": "M. Erfan Mowlaei", "link": "https://stackoverflow.com/users/4260559/m-erfan-mowlaei"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1472673436, "post_id": 39257858, "comment_id": 65851938, "body": "@Jean-Fran&#231;oisFabre working: <a href=\"https://my.pcloud.com/publink/show?code=XZteI2ZJz4vN0T4PF401ehWRjx9R4IaiaUV\" rel=\"nofollow noreferrer\">my.pcloud.com/publink/&hellip;</a>    and not working: <a href=\"https://my.pcloud.com/publink/show?code=XZieI2ZBHat0C8AcyuSwuKqsTyKKuzyQTu7\" rel=\"nofollow noreferrer\">my.pcloud.com/publink/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1096, "user_id": 4260559, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Dsphv.jpg?s=128&g=1", "display_name": "M. Erfan Mowlaei", "link": "https://stackoverflow.com/users/4260559/m-erfan-mowlaei"}, "edited": false, "score": 0, "creation_date": 1472891518, "post_id": 39304360, "comment_id": 65943090, "body": "Okay it works, however I need it in cpp, not python, and I&#39;m not using both at the same time, I just load one each time to use."}, {"owner": {"reputation": 1096, "user_id": 4260559, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Dsphv.jpg?s=128&g=1", "display_name": "M. Erfan Mowlaei", "link": "https://stackoverflow.com/users/4260559/m-erfan-mowlaei"}, "edited": false, "score": 0, "creation_date": 1472892680, "post_id": 39304360, "comment_id": 65943342, "body": "Also the code you provided has problem, to be specific in <code>car</code> function"}, {"owner": {"reputation": 2231, "user_id": 6410520, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f641ad7e7d5b962dc3814f5565d3ea03?s=128&d=identicon&r=PG&f=1", "display_name": "Kathiravan Natarajan", "link": "https://stackoverflow.com/users/6410520/kathiravan-natarajan"}, "edited": false, "score": 0, "creation_date": 1489771851, "post_id": 39304360, "comment_id": 72833617, "body": "@Abhishek . I am not able to load my xml file even. What to do for that ? xml is trained by myself."}], "tags": [], "owner": {"reputation": 59, "user_id": 6501131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12ab2669173b009588d7e693e67878f3?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/6501131/abhishek"}, "is_accepted": false, "score": -1, "last_activity_date": 1472887281, "creation_date": 1472887281, "answer_id": 39304360, "question_id": 39257858, "link": "https://stackoverflow.com/questions/39257858/opencv-unspecified-error-the-node-does-not-represent-a-user-object-unknown-typ/39304360#39304360", "title": "OpenCv Unspecified error (The node does not represent a user object (unknown type?))", "body": "<p>You must use different variables of type <b>CvHaarClassifierCascade</b> type for loading different xml files and also perform detection differently with them.</p>\n\n<p>As far as your xml files are concerned both are working fine and you can check that by python code below.</p>\n\n<pre><code>import cv2\na=cv2.CascadeClassifier('cascade1.xml')\nb=cv2.CascadeClassifier('cars.xml')\nimg=cv2.imread('car.jpg')\ngray=cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)\ncars_carcode=a.detectMultiScale(gray,1.3,5)\ncars_car=b.detectMultiScale(gray,1.3,5)\n\ndef car(cars):\n    cars=a.detectMultiScale(gray,1.3,5)\n    for (x,y,w,h) in cars:\n        cv2.rectangle(img,(x,y),(x+w,y+h),(255,0,0),2)\n        roi_gray=gray[y:y+h,x:x+w]\n        roi_color=img[y:y+h,x:x+w]\n\n    return (gray,img)\n\ncv2.imshow('Cars Detected by carcode1.xml',car(cars_carcode)[1] )\ncv2.imshow('Cars Detected by cars.xml',car(cars_car)[1] )   \ncv2.waitKey(0)\ncv2.destroyAllWindows()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5956, "user_id": 1249472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7d2ac9163237829d11cbf4ee7d563d?s=128&d=identicon&r=PG", "display_name": "Nikita", "link": "https://stackoverflow.com/users/1249472/nikita"}, "is_accepted": true, "score": 1, "last_activity_date": 1472924990, "creation_date": 1472924990, "answer_id": 39309757, "question_id": 39257858, "link": "https://stackoverflow.com/questions/39257858/opencv-unspecified-error-the-node-does-not-represent-a-user-object-unknown-typ/39309757#39309757", "title": "OpenCv Unspecified error (The node does not represent a user object (unknown type?))", "body": "<p><a href=\"http://docs.opencv.org/2.4/doc/tutorials/objdetect/cascade_classifier/cascade_classifier.html\" rel=\"nofollow\">OpenCV 2.4</a> documentation suggests usage of <a href=\"http://docs.opencv.org/2.4/modules/objdetect/doc/cascade_classification.html?highlight=cascadeclassifier#cascadeclassifier\" rel=\"nofollow\"><code>CascadeClassifier</code></a> class. It successfully loads your <code>cascade1.xml</code> file. Here is how you can use <code>CascadeClassifier</code> in C++:</p>\n\n<pre><code>#include \"opencv2/core/core.hpp\"\n#include \"opencv2/highgui/highgui.hpp\"\n#include \"opencv2/imgproc/imgproc.hpp\"\n#include \"opencv2/objdetect/objdetect.hpp\"\n#include &lt;iostream&gt;\n\nusing namespace cv;\n\nint main()\n{\n  CascadeClassifier cascade;\n  if( !cascade.load( \"d:\\\\OpenCV\\\\cascade1.xml\" ) )\n  { \n    std::cout &lt;&lt; \"Error during loading\";\n    return -1; \n  }\n\n  Mat pic = imread(\"d:\\\\Samples\\\\Cars\\\\test.jpg\");\n\n  Mat picGray;\n  cvtColor( pic, picGray, CV_BGR2GRAY );\n\n  std::vector&lt;Rect&gt; objs;\n  cascade.detectMultiScale( picGray, objs, 1.1, 2, 0, Size(0, 0) );\n\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1096, "user_id": 4260559, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Dsphv.jpg?s=128&g=1", "display_name": "M. Erfan Mowlaei", "link": "https://stackoverflow.com/users/4260559/m-erfan-mowlaei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3547, "favorite_count": 0, "accepted_answer_id": 39309757, "answer_count": 2, "score": 1, "last_activity_date": 1499883680, "creation_date": 1472672914, "question_id": 39257858, "link": "https://stackoverflow.com/questions/39257858/opencv-unspecified-error-the-node-does-not-represent-a-user-object-unknown-typ", "title": "OpenCv Unspecified error (The node does not represent a user object (unknown type?))", "body": "<p>I'm using openCV 2.4.10 and  trying to implement something like what is here:</p>\n\n<p><a href=\"https://github.com/andrewssobral/vehicle_detection_haarcascades\" rel=\"nofollow\">https://github.com/andrewssobral/vehicle_detection_haarcascades</a></p>\n\n<p>and I have generated files like above project's cars.xml, but when I try to load one of them, I get the following error:</p>\n\n<pre><code>OpenCV Error: Unspecified error (The node does not represent a user object (unknown type?)) in cvRead, file C:\\builds\\2_4_PackSlave-win64-vc12-shared\\opencv\\modules\\core\\src\\persistence.cpp, line 4991\n</code></pre>\n\n<p>and here's my loading code:</p>\n\n<pre><code>CvHaarClassifierCascade *cascade;\ncascade = (CvHaarClassifierCascade*)cvLoad(\"cascade-1.xml\", 0, 0, 0);\n</code></pre>\n\n<p>As I said it loads one of my xml files without problem, but it gives that error on another file. I'd really appreciate your help.</p>\n"}, {"tags": ["c++", "operators", "variable-assignment"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472672910, "post_id": 39257808, "comment_id": 65851661, "body": "I don&#39;t get what you&#39;re asking for? All of that is just provided by default already, if you refrain to provide your own implementation."}, {"owner": {"reputation": 1861, "user_id": 722695, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/02e5730386e784c40ab552297e5c3f95?s=128&d=identicon&r=PG", "display_name": "Roby", "link": "https://stackoverflow.com/users/722695/roby"}, "edited": false, "score": 1, "creation_date": 1472673071, "post_id": 39257808, "comment_id": 65851741, "body": "i think you could use <a href=\"http://en.cppreference.com/w/cpp/language/using_declaration\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/using_declaration</a> i.e.: using Base::operator=;"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 673652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/492c85595675ab394ad284936c894384?s=128&d=identicon&r=PG", "display_name": "Ravi Garg", "link": "https://stackoverflow.com/users/673652/ravi-garg"}, "edited": false, "score": 0, "creation_date": 1472674264, "post_id": 39257976, "comment_id": 65852389, "body": "My point is, providing implementation for derived mandates developer to specify implementation for base. Isn&#39;t developer forgetting to call base&#39;s implementation poses a greater risk then few creative scenarios. Compiler can check if some base implementation is being called then don&#39;t inject default call (similar in a way base&#39;s constructor calling behaves)"}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 0, "last_activity_date": 1472673367, "creation_date": 1472673367, "answer_id": 39257976, "question_id": 39257808, "link": "https://stackoverflow.com/questions/39257808/compiler-aid-in-bases-assignment-operator-from-derived/39257976#39257976", "title": "Compiler aid in base&#39;s assignment operator from derived", "body": "<blockquote>\n  <p>I am curious to know why can't compiler offer calling base's assignment operator during derived assignment by default</p>\n</blockquote>\n\n<p>As soon you're going to provide your own implementation, the compiler is out of guessing what you actually want to achieve.</p>\n\n<p>While calling <code>A::operator = (other)</code> looks like a reasonable default operation, you still might implement something different. The compiler cannot know, and won't restrict you, or going into your way doing so.</p>\n\n<blockquote>\n  <p>why we need to explicitly call it. Am I overlooking some case where this (calling A::operator = (other) ) would not be required.</p>\n</blockquote>\n\n<p>Just be creative, I could imagine cases where you actually want to override this behavior.</p>\n"}], "owner": {"reputation": 3, "user_id": 673652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/492c85595675ab394ad284936c894384?s=128&d=identicon&r=PG", "display_name": "Ravi Garg", "link": "https://stackoverflow.com/users/673652/ravi-garg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1472673367, "creation_date": 1472672747, "question_id": 39257808, "link": "https://stackoverflow.com/questions/39257808/compiler-aid-in-bases-assignment-operator-from-derived", "title": "Compiler aid in base&#39;s assignment operator from derived", "body": "<p>Let say I have following classes</p>\n\n<pre><code>class Base\n{\n    // default CTOR\n    // default Copy Assignment\n};\n\nclass Derived : public Base\n{\npublic:\n    Derived() \n        // Calls base constructor \n    {\n        // implementation\n    }\n\n    Dervied&amp; operator=(const Dervied&amp; other)\n    {\n        A::operator = (other); // Why can't compiler offer this by default\n\n        // implementation\n    } \n};\n</code></pre>\n\n<p>I am curious to know why can't compiler offer calling base's assignment operator during derived assignment by default, why we need to explicitly call it.\nAm I overlooking some case where this (calling A::operator = (other) ) would not be required.</p>\n\n<p>For constructors compiler have this consideration (i.e. calling base's constructor during derived construction).</p>\n"}, {"tags": ["c++", "arrays", "digit"], "comments": [{"owner": {"reputation": 1940, "user_id": 2325653, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTIWa.jpg?s=128&g=1", "display_name": "PolyMesh", "link": "https://stackoverflow.com/users/2325653/polymesh"}, "edited": false, "score": 0, "creation_date": 1472673392, "post_id": 39257807, "comment_id": 65851905, "body": "What are you wanting to figure out with the outputs? Please make your question more clear so someone can know what problem you are running into before reading a huge block of code."}, {"owner": {"reputation": 13, "user_id": 6780355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87b5fb2bc22afd955053b6856e7dccf1?s=128&d=identicon&r=PG&f=1", "display_name": "Joeybreh", "link": "https://stackoverflow.com/users/6780355/joeybreh"}, "reply_to_user": {"reputation": 1940, "user_id": 2325653, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTIWa.jpg?s=128&g=1", "display_name": "PolyMesh", "link": "https://stackoverflow.com/users/2325653/polymesh"}, "edited": false, "score": 0, "creation_date": 1472673463, "post_id": 39257807, "comment_id": 65851949, "body": "The outputs at the bottom. there are two attempts at running the program but there are 4 lines that  have an odd number combo that looks like this.  03-48-486532                they are supposed to be standard numbers with the tens carried over."}, {"owner": {"reputation": 1940, "user_id": 2325653, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTIWa.jpg?s=128&g=1", "display_name": "PolyMesh", "link": "https://stackoverflow.com/users/2325653/polymesh"}, "edited": false, "score": 0, "creation_date": 1472674344, "post_id": 39257807, "comment_id": 65852437, "body": "Just looking at this code I am seeing a lot of formatting that needs help. Once you format your code properly, it will be easier on the eyes, the solution may present itself. I also suggest that when using if statements, you add the curly braces <code>{}</code> even if it is a one liner. It looks to me like you may have intended an else statement in that last function but you instead put a semicolon and kept everything on one line which is rather confusing. There&#39;s also tons of areas where spacing is inconsistent."}, {"owner": {"reputation": 13, "user_id": 6780355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87b5fb2bc22afd955053b6856e7dccf1?s=128&d=identicon&r=PG&f=1", "display_name": "Joeybreh", "link": "https://stackoverflow.com/users/6780355/joeybreh"}, "reply_to_user": {"reputation": 1940, "user_id": 2325653, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTIWa.jpg?s=128&g=1", "display_name": "PolyMesh", "link": "https://stackoverflow.com/users/2325653/polymesh"}, "edited": false, "score": 0, "creation_date": 1472674463, "post_id": 39257807, "comment_id": 65852497, "body": "sorry about that. thanks for the pointers. I&#39;ll work on it now"}, {"owner": {"reputation": 13, "user_id": 6780355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87b5fb2bc22afd955053b6856e7dccf1?s=128&d=identicon&r=PG&f=1", "display_name": "Joeybreh", "link": "https://stackoverflow.com/users/6780355/joeybreh"}, "reply_to_user": {"reputation": 1940, "user_id": 2325653, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTIWa.jpg?s=128&g=1", "display_name": "PolyMesh", "link": "https://stackoverflow.com/users/2325653/polymesh"}, "edited": false, "score": 0, "creation_date": 1472674921, "post_id": 39257807, "comment_id": 65852717, "body": "is that good enough?  can I move everything all at once? I was just using the space bar.  Not bad with this amount, but i might have a larger amount within a month or two. EDIT: I also noticed there was an unused variable. It&#39;s gone now."}, {"owner": {"reputation": 13, "user_id": 6780355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87b5fb2bc22afd955053b6856e7dccf1?s=128&d=identicon&r=PG&f=1", "display_name": "Joeybreh", "link": "https://stackoverflow.com/users/6780355/joeybreh"}, "reply_to_user": {"reputation": 1940, "user_id": 2325653, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTIWa.jpg?s=128&g=1", "display_name": "PolyMesh", "link": "https://stackoverflow.com/users/2325653/polymesh"}, "edited": false, "score": 0, "creation_date": 1472675999, "post_id": 39257807, "comment_id": 65853247, "body": "I changed the printBig around. it looks better now"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6780355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87b5fb2bc22afd955053b6856e7dccf1?s=128&d=identicon&r=PG&f=1", "display_name": "Joeybreh", "link": "https://stackoverflow.com/users/6780355/joeybreh"}, "edited": false, "score": 0, "creation_date": 1472698900, "post_id": 39259786, "comment_id": 65859834, "body": "awesome! TYVM!. how do i make yours the answer? i click the up arrow, but i&#39;m still too new to this site."}, {"owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "reply_to_user": {"reputation": 13, "user_id": 6780355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87b5fb2bc22afd955053b6856e7dccf1?s=128&d=identicon&r=PG&f=1", "display_name": "Joeybreh", "link": "https://stackoverflow.com/users/6780355/joeybreh"}, "edited": false, "score": 0, "creation_date": 1472703325, "post_id": 39259786, "comment_id": 65860814, "body": "@Joeybreh, look for a gray check mark below the arrows &amp; number -- when you click it, it should go green for acceptance.  But do keep an eye out for new answers that come in later that youmight  like better -- you can always change your choice."}], "tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": true, "score": 1, "last_activity_date": 1472681949, "last_edit_date": 1472681949, "creation_date": 1472681510, "answer_id": 39259786, "question_id": 39257807, "link": "https://stackoverflow.com/questions/39257807/number-addition-program-of-up-to-100-digits-odd-console-output/39259786#39259786", "title": "Number addition program of up to 100 digits. Odd console output", "body": "<p>Some specific problems:</p>\n\n<p>1) This code:</p>\n\n<pre><code>else  cout &lt;&lt; number[i]; digit++;\n</code></pre>\n\n<p>What you meant was:</p>\n\n<pre><code>else\n{\n    cout &lt;&lt; number[i];\n    digit++;\n}\n</code></pre>\n\n<p>What you wrote was:</p>\n\n<pre><code>else\n{\n    cout &lt;&lt; number[i];\n}\ndigit++;\n</code></pre>\n\n<p>If you're new to C/C++, <strong>always</strong> use the curly braces, mostly to avoid this sort of problem but also to make your code clearer to others.</p>\n\n<p>2) Your representation is backwards.  By putting the high order digits first in the number array, you leave no room for carry on the highest digits.  However, if you reverse it and put the lowest order digits first, you can carry into the unused digits in the array.</p>\n\n<p>3) This declaration:</p>\n\n<pre><code>int number1[MAX_DIGITS]={}, number2[MAX_DIGITS]={}, sum[MAX_DIGITS]={};\n</code></pre>\n\n<p>Needs to initialize all the digits to zero for your algorithm (that doesn't track number length) to work.  So it needs to be in the loop so the second addition doesn't inherit digits from the first.</p>\n\n<p>I've reworked your code with the above changes and many style changes:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nvoid readBig(int[]);\nvoid printBig(int[]);\nvoid addBig(int[], int[], int[]);\n\nconst int MAX_DIGITS = 100;\n\nint main()\n{\n    bool finished = false;     \n\n    while (! finished)\n    {\n        int number1[MAX_DIGITS]={0}, number2[MAX_DIGITS]={0}, sum[MAX_DIGITS]={0};\n        char response;\n\n        cout &lt;&lt; \"Please enter a number up to \" &lt;&lt; MAX_DIGITS &lt;&lt; \" digits: \";\n        readBig(number1);\n        cout &lt;&lt; \"Please enter a number up to \" &lt;&lt; MAX_DIGITS &lt;&lt; \" digits: \";\n        readBig(number2);\n        addBig(number1, number2, sum);\n        printBig(number1);\n        cout &lt;&lt; \"\\n+\\n\";\n        printBig(number2);\n        cout &lt;&lt; \"\\n=\\n\";\n        printBig(sum);\n        cout &lt;&lt; \"\\n\";\n        cout &lt;&lt; \"test again? \";\n        cin &gt;&gt; response;\n        cin.ignore(900, '\\n');\n        finished = toupper(response) != 'Y';\n    }\n\n    return 0;\n}\n\nvoid readBig(int number[MAX_DIGITS])\n{\n    // This function below will read an input number as a string then input that into an array.\n\n    string read;\n    cin &gt;&gt; read; \n\n    int length = read.length(); \n\n    for (int i = length - 1, j = 0; i &gt;= 0 &amp;&amp; j &lt; MAX_DIGITS - 1; i--)\n    {\n        number[i] = read[i] - '0';\n    }\n}\n\nvoid printBig(int number[MAX_DIGITS])\n{\n    // This function below will display the number.\n\n    bool first_digit = false; // first value flag\n\n    for (int i = MAX_DIGITS - 1; i &gt;= 0; i--)\n    {\n        if (number[i] != 0 || first_digit)\n        {\n            // clears leading zeros and checks for placeholder zeros\n            cout &lt;&lt; number[i];\n            first_digit = true; // else print val and check for beginning of number.\n        }\n    }\n}\n\nvoid addBig(int number1[MAX_DIGITS], int number2[MAX_DIGITS], int sum[MAX_DIGITS])\n{\n    // The code below sums the arrays.\n\n    for (int i = MAX_DIGITS - 1; i &gt;= 0; i--)\n    {\n        sum[i] = number1[i] + number2[i];\n\n        if (sum[i] &gt; 9 &amp;&amp; i &lt; MAX_DIGITS - 1)\n        { \n            sum[i + 1] += 1;\n            sum[i] -= 10;\n        }\n    }\n}\n</code></pre>\n\n<p><strong>OUTPUT</strong></p>\n\n<pre><code>% ./a.out\nPlease enter a number up to 100 digits: 444444444\nPlease enter a number up to 100 digits: 444666644\n444444444\n+\n446666444\n=\n891110888\ntest again? y\nPlease enter a number up to 100 digits: 9999\nPlease enter a number up to 100 digits: 9999\n9999\n+\n9999\n=\n19998\ntest again? n\n%\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6780355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87b5fb2bc22afd955053b6856e7dccf1?s=128&d=identicon&r=PG&f=1", "display_name": "Joeybreh", "link": "https://stackoverflow.com/users/6780355/joeybreh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 393, "favorite_count": 0, "accepted_answer_id": 39259786, "answer_count": 1, "score": -2, "last_activity_date": 1472682818, "creation_date": 1472672746, "last_edit_date": 1472682818, "question_id": 39257807, "link": "https://stackoverflow.com/questions/39257807/number-addition-program-of-up-to-100-digits-odd-console-output", "title": "Number addition program of up to 100 digits. Odd console output", "body": "<p>The console outputs are my major concern. This is the entire program. I will post the console output at the very bottom. The outputs show what i input into the program. You can immediately see that the numbers are turned odd. They get negative numbers or maybe hyphens. The odd numbers are above and below the \"+\" signs near the bottom. I would like to add the two inputs and have them display correctly. Please provide whatever assistance you can. Even if it's to criticize my posting method as i am new. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nvoid readBig(int[]);\nvoid printBig(int[]);\nvoid addBig(int[], int[], int[]);\n\nconst int MAX_DIGITS = 100;\n\nint main()\n{\n    int number1[MAX_DIGITS]={}, number2[MAX_DIGITS]={}, sum[MAX_DIGITS]={};\n    bool finished = false;\n    char response;\n    while (! finished)\n    {\n        cout &lt;&lt; \"Please enter a number up to \" &lt;&lt; MAX_DIGITS &lt;&lt; \" digits: \";\n        readBig(number1);\n        cout &lt;&lt; \"Please enter a number up to \" &lt;&lt; MAX_DIGITS &lt;&lt; \" digits: \";\n        readBig(number2);\n        addBig(number1, number2, sum);\n        printBig(number1);\n        cout &lt;&lt; \"\\n+\\n\";\n        printBig(number2);\n        cout &lt;&lt; \"\\n=\\n\";\n        printBig(sum);\n        cout &lt;&lt; \"\\n\";\n        cout &lt;&lt; \"test again?\";\n        cin &gt;&gt; response;\n        cin.ignore(900,'\\n');\n        finished = toupper(response) != 'Y';\n    }\n    return 0;\n}\n\nvoid readBig(int number[MAX_DIGITS]) // This function below will read an input number //as a string then input that into an array.\n{\n    string read;\n    cin &gt;&gt; read;\n\n    for (int i = 0; i &lt; MAX_DIGITS &amp;&amp; i &lt;= read.length() + 1; i++) {\n\n        number[i] = int (read[i] - '0');\n    }\n}\n\n// This function below will display the number.\nvoid printBig(int number[MAX_DIGITS])\n{\n    int digit = 0; // first val counter\n\n    for (int i=0; i&lt;=MAX_DIGITS; i++) \n\n    if (number[i] == 0 &amp;&amp; digit &gt;= 1) cout &lt;&lt; \"\"; // clears leading zeros \n    // and checks for placeholder zeros\n\n    else cout &lt;&lt; number[i]; digit++; // else print val and check \n    // for beginning of number.\n}\n\nvoid addBig(int number1[MAX_DIGITS], int number2[MAX_DIGITS], int sum[MAX_DIGITS])\n    // The code below sums the arrays.\n{\n    for (int i = 0; i &lt; MAX_DIGITS; i++) {\n        sum[i] = number1[i] + number2[i];\n    }\n    for (int j = 0; j &lt; MAX_DIGITS; j++){\n        if (sum[j] / 10 &gt; 0) { sum[j + 1] += 1; }\n        if (sum[j] / 10 &gt; 0) { sum[j] = sum[j] / 10; } // EDIT:I would like both to happen\n    }\n}\n</code></pre>\n\n<p><strong>CONSOLE OUTPUT</strong></p>\n\n<pre><code>    Please enter a number up to 100 digits: 987654321\n    Please enter a number up to 100 digits: 987654321\n    987654321-48-483\n+\n    987654321-48-489\n=\n    11111-9-99\n    test again?\n\n    Please enter a number up to 100 digits: 444444444\n    Please enter a number up to 100 digits: 444666644\n    444444444-48-483\n+\n    444666644-48-484\n= \n    01111-9-94\n    test again?\n</code></pre>\n\n<p>I would really like some help with figuring out the outputs, but any suggestions would be great :)!</p>\n"}, {"tags": ["c++", "string", "memory", "stack", "heap"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1472672600, "post_id": 39257744, "comment_id": 65851509, "body": "related: <a href=\"http://stackoverflow.com/questions/4643713/c-returning-reference-to-local-variable\" title=\"c returning reference to local variable\">stackoverflow.com/questions/4643713/&hellip;</a>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 3, "creation_date": 1472672666, "post_id": 39257744, "comment_id": 65851542, "body": "The contents of a <code>std::string</code> are not stored on the stack, so the length of the string doesn&#39;t matter. Only the metadata used by the <code>string</code> class is on the stack."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1472672670, "post_id": 39257744, "comment_id": 65851544, "body": "<b><i>s2 must be manually deleted</i></b> If you need to create an object on the heap you can use a smart pointer and never use new / delete. However this is not a case where I would do this. Remember the buffer for <code>std::string</code> will be dynamically allocated."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1472672757, "post_id": 39257744, "comment_id": 65851580, "body": "<b>Couldn&#39;t just just create on the stack and then pass by reference to use that object outside of your current function?</b> When the function returns, all objects in its stack frame are destroyed, and references to them are invalid."}], "owner": {"reputation": 911, "user_id": 6735965, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fb853394a7a4ce598d49eded1d3dbf71?s=128&d=identicon&r=PG&f=1", "display_name": "Eric S", "link": "https://stackoverflow.com/users/6735965/eric-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "closed_date": 1472672726, "answer_count": 0, "score": 0, "last_activity_date": 1472672473, "creation_date": 1472672473, "question_id": 39257744, "link": "https://stackoverflow.com/questions/39257744/c-when-to-create-an-object-on-the-heap", "closed_reason": "Duplicate", "title": "C++ when to create an object on the heap", "body": "<p>I know this question has been asked before but I could use some clarification.  Here is a simple example I was trying to understand:</p>\n\n<pre><code>string s1;\nstring *s2 = new string();\n</code></pre>\n\n<p>What I know:</p>\n\n<ol>\n<li>s1 will be created on the stack </li>\n<li>s2 will be created on the heap</li>\n<li>The stack is faster </li>\n<li>s2 must be manually deleted </li>\n<li>In general - create on\nstack unless you have to create on the heap.</li>\n</ol>\n\n<p>What I am confused about:</p>\n\n<ol>\n<li>When would you ever have to use the heap? - A common advantage I've read is the object will still be available after you exit the scope of the function it is created in.  Why would this ever be desirable?  Couldn't just just create on the stack and then pass by reference to use that object outside of your current function?  An example would be very helpful.</li>\n<li>I am aware that the stack has a limited amount of memory so in the example above if I were to store a huge string into both s1 and s2, is there a point where s1 would overflow (would this cause a stack overflow?) while s2 would retain all the input?  If such a point does exist is this dependent on the machine and is there a way to find out the max s1 could store before such a problem occurs?</li>\n</ol>\n"}, {"tags": ["c++", "c++11", "lambda"], "comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1472673053, "post_id": 39257625, "comment_id": 65851734, "body": "&quot;here we have a solution when your compiler does not support passing variadic arguments to lambda expression.&quot;  I am not sure what it is that isn&#39;t supported in this description.  Something about passing and variardic arguments and a lambda expression, but what <i>exactly</i> you are saying your compiler does not support is not clear.  Also, <code>X</code> seems like a pointless wrapper around <code>std::tuple</code>.  Third, you are creating uninitizlied instances of some <code>Ts...</code> for ... no good reason I can see?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1472681951, "post_id": 39257625, "comment_id": 65855736, "body": "@Yakk: OP states clearly IMO the gcc versions supported, and you can see from <a href=\"https://godbolt.org/g/HREbsA\" rel=\"nofollow noreferrer\">Demo</a> that gcc 4.8.1 doesn&#39;t support version1 (which is valid C++11)."}, {"owner": {"reputation": 1860, "user_id": 3671410, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/7dAyV.jpg?s=128&g=1", "display_name": "Artur Pyszczuk", "link": "https://stackoverflow.com/users/3671410/artur-pyszczuk"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1472741024, "post_id": 39257625, "comment_id": 65883788, "body": "@Yakk &quot;Third, you are creating uninitizlied instances of some Ts... for ... no good reason I can see?&quot; Because in <code>X&lt;Ts...&gt; types {};</code> I care only about types not values.  &quot;Something about passing and variardic arguments and a lambda expression, but what exactly you are saying your compiler does not support is not clear.&quot; I should probably say that variadic arguments can not be captured by reference in lambda expression."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1472741361, "post_id": 39257625, "comment_id": 65884047, "body": "@ArturPyszczuk You might not care about it, but <code>X&lt;Ts...&gt; types{};</code> actually creates a tuple containing <code>Ts...</code> and constructs them.  If that construction is illegal, or has side effects, this seems like a really, really, bad idea.  All you use the <code>types</code> for is the type.  Replace <code>X&lt;Ts...&gt; arguments</code> with <code>std::tuple&lt;Xs...&gt; arguments</code>.  Define <code>template&lt;class T&gt; struct tag_t {using type=T;};</code> then <code>template&lt;class...Ts&gt; struct pack { using tuple=std::tuple&lt;tag_t&lt;Ts...&gt;&gt;;};</code> with no storage, use that for <code>types</code>.  Extract the element type instead of creating those dummy variables."}, {"owner": {"reputation": 1860, "user_id": 3671410, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/7dAyV.jpg?s=128&g=1", "display_name": "Artur Pyszczuk", "link": "https://stackoverflow.com/users/3671410/artur-pyszczuk"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1472745050, "post_id": 39257625, "comment_id": 65886611, "body": "@Yakk Thank you for your suggestion, I will try to use it :)"}], "answers": [{"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 1, "last_activity_date": 1472681629, "creation_date": 1472681629, "answer_id": 39259803, "question_id": 39257625, "link": "https://stackoverflow.com/questions/39257625/workaround-for-passing-variadic-arguments-to-lambda-expression-if-compiler-does/39259803#39259803", "title": "Workaround for passing variadic arguments to lambda expression if compiler does not support it", "body": "<p>You need to use some tagging to keep the given type, as they might not be default constructible.</p>\n\n<p>I would implement that way:</p>\n\n<pre><code>#if 1 // Not in C++11 // make_index_sequence\n#include &lt;cstdint&gt;\n\ntemplate &lt;std::size_t...&gt; struct index_sequence {};\n\ntemplate &lt;std::size_t N, std::size_t... Is&gt;\nstruct make_index_sequence : make_index_sequence&lt;N - 1, N - 1, Is...&gt; {};\n\ntemplate &lt;std::size_t... Is&gt;\nstruct make_index_sequence&lt;0u, Is...&gt; : index_sequence&lt;Is...&gt; {};\n\n#endif // make_index_sequence\n\n#if 1 // Not in C++11 // tuple_element_t\ntemplate &lt;std::size_t I, typename T&gt;\nusing tuple_element_t = typename std::tuple_element&lt;I, T&gt;::type;\n#endif\n\nnamespace Solution3 {\n\n    template &lt;typename T&gt;\n    struct bool_impl {\n        using type = bool;\n    };\n\n    template &lt;typename T&gt;\n    using bool_t = typename bool_impl&lt;T&gt;::type; // or simply using bool_t = bool\n\n    template &lt;typename T&gt;\n    void set_single (bool c) {\n        // use type T to set c value - details are not the case here.\n\n        std::cout &lt;&lt; \"value = \" &lt;&lt; c &lt;&lt; std::endl;\n        std::cout &lt;&lt; \"P1 = \" &lt;&lt; std::is_same&lt;T, P1&gt;::value &lt;&lt; std::endl;\n        std::cout &lt;&lt; \"P2 = \" &lt;&lt; std::is_same&lt;T, P2&gt;::value &lt;&lt; std::endl;\n        std::cout &lt;&lt; \"P3 = \" &lt;&lt; std::is_same&lt;T, P3&gt;::value &lt;&lt; std::endl;\n    }\n\n    template &lt;typename T&gt; struct Tag {};\n\n    template &lt;typename T1, typename T2, std::size_t ... Is&gt;\n    void set_singles (Tag&lt;T1&gt;, T2 t, index_sequence&lt;Is...&gt;) {\n        int dummy[] = {0, (set_single&lt;tuple_element_t&lt;Is, T1&gt;&gt;(std::get&lt;Is&gt;(t)), 0)...};\n        static_cast&lt;void&gt;(dummy); // Avoid warning for unused variable\n    }\n\n    template &lt;typename... Ts&gt;\n    void set (bool_t&lt;Ts&gt;... args) {\n        Tag&lt;std::tuple&lt;Ts...&gt;&gt; tag;\n        auto bools = std::make_tuple(args...);\n        auto seq = make_index_sequence&lt;sizeof...(Ts)&gt;();\n\n        logic ([&amp;]() {\n            set_singles(tag, bools, seq);\n        });\n    }\n\n}\n</code></pre>\n\n<p><a href=\"https://godbolt.org/g/F7zZHH\" rel=\"nofollow\">Demo</a></p>\n\n<p>And a version simplified for up to date compiler</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/e3c907f655d3d704\" rel=\"nofollow\">Demo</a></p>\n"}], "owner": {"reputation": 1860, "user_id": 3671410, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/7dAyV.jpg?s=128&g=1", "display_name": "Artur Pyszczuk", "link": "https://stackoverflow.com/users/3671410/artur-pyszczuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1472681629, "creation_date": 1472671917, "question_id": 39257625, "link": "https://stackoverflow.com/questions/39257625/workaround-for-passing-variadic-arguments-to-lambda-expression-if-compiler-does", "title": "Workaround for passing variadic arguments to lambda expression if compiler does not support it", "body": "<p>I have two solutions, both work as I expect but the first one\nworks only with newer version of GCC (5.2.1 for sure) and the second one works in GCC >= 4.8.3. The problem is that at my work I unfortunately do not have access to newer version of GCC. </p>\n\n<p>The first solution is basically what I wanted by the behavior and by the level of complexity. The second one also works but this is the ugliest thing I have ever written and to be honest I do not know if this is the correct code (but it works). </p>\n\n<p>Ok, firstly I will describe the problem that I am facing:\nI have a function called <code>logic()</code> here, which takes callable object to invoke some additional logic among other instructions. These instructions of course are not here, because they are not necessary, they are marked as <code>(X)</code>.</p>\n\n<pre><code>template &lt;typename C&gt;\nvoid logic (C c) {\n    // before callable actions (X)\n    c ();\n    // after callable actions (X)\n}\n</code></pre>\n\n<p>What I want to do as the callable object is to set some <code>bool</code> value(s) using appropriate type(s) - <code>set_single()</code> function. For the example I will use some additional types:</p>\n\n<pre><code>struct P1 {};\nstruct P2 {};\nstruct P3 {};\n</code></pre>\n\n<p>Consider first solution:</p>\n\n<pre><code>namespace Solution1 {\n\ntemplate &lt;typename T&gt;\nvoid set_single (bool c) {\n    // use type T to set c value - details are not the case here.\n\n    std::cout &lt;&lt; \"value = \" &lt;&lt; c &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"P1 = \" &lt;&lt; std::is_same&lt;T, P1&gt;::value &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"P2 = \" &lt;&lt; std::is_same&lt;T, P2&gt;::value &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"P3 = \" &lt;&lt; std::is_same&lt;T, P3&gt;::value &lt;&lt; std::endl;\n}\n\ntemplate &lt;typename T, typename K, typename... Ts, typename... Vs&gt;\nvoid set_single (bool t, bool k, Vs&amp;&amp;... args) {\n    set_single&lt;T&gt; (t);\n    set_single&lt;K, Ts...&gt; (k, std::forward&lt;Vs&gt; (args)...);\n}\n\ntemplate &lt;typename... Ts, typename... Args&gt;\nvoid set (Args&amp;&amp;... args) {\n    static_assert (sizeof... (Ts) == sizeof... (Args), \"\");\n\n    logic ([&amp;] () {\n        set_single&lt;Ts...&gt; (std::forward&lt;Args&gt; (args)...);\n    });\n}\n\n}\n</code></pre>\n\n<p><code>set()</code> function is a wrapper and it is public for the user, <code>set_single()</code> are implementation details so they are hidden (for simplicity they are not written in a class).</p>\n\n<p>So, passing callable object to <code>logic()</code> function inside <code>set()</code> function I invoke <code>set_single()</code> function arbitrary number of times passing all the values with corresponding types that I need. So, for example, usage could be like this:</p>\n\n<pre><code>Solution1::set&lt;P1, P2, P3&gt; (true, false, true);\n</code></pre>\n\n<p>and this will use type <code>P1</code> to set true, type <code>P2</code> to set false and type <code>P3</code> to set true.</p>\n\n<p>So, here we have a solution when your compiler does not support passing variadic arguments to lambda expression.</p>\n\n<pre><code>namespace Solution2 {\n\ntemplate &lt;typename... Ts&gt;\nstruct X {\n    X () = default;\n    X (Ts... t) : tup {std::make_tuple (t...)} {}\n    std::tuple&lt;Ts...&gt; tup;\n};\n\ntemplate &lt;int...&gt;\nstruct Ints {};\n\ntemplate &lt;int N, int... Is&gt;\nstruct Int_seq : Int_seq&lt;N-1, N, Is...&gt; {};\n\ntemplate &lt;int... Is&gt;\nstruct Int_seq&lt;0, Is...&gt; {\n    using type = Ints&lt;0, Is...&gt;;\n};\n\ntemplate &lt;int... Is&gt;\nusing Iseq = typename Int_seq&lt;Is...&gt;::type;\n\ntemplate &lt;int I, typename... Args, typename... Types&gt;\nvoid set_single (Ints&lt;I&gt;, const std::tuple&lt;Args...&gt;&amp; a, const std::tuple&lt;Types...&gt;&amp; t) {\n    std::cout &lt;&lt; \"value = \" &lt;&lt; std::get&lt;I&gt; (a) &lt;&lt; std::endl;\n    auto p1 = std::get&lt;I&gt; (t);\n    auto p2 = std::get&lt;I&gt; (t);\n    auto p3 = std::get&lt;I&gt; (t);\n    std::cout &lt;&lt; \"P1 = \" &lt;&lt; std::is_same&lt;P1, decltype (p1)&gt;::value &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"P2 = \" &lt;&lt; std::is_same&lt;P2, decltype (p2)&gt;::value &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"P3 = \" &lt;&lt; std::is_same&lt;P3, decltype (p3)&gt;::value &lt;&lt; std::endl;\n}\n\ntemplate &lt;int I, int K, int... Is, typename... Args, typename... Types&gt;\nvoid set_single (Ints&lt;I, K, Is...&gt;, const std::tuple&lt;Args...&gt;&amp; a, const std::tuple&lt;Types...&gt;&amp; t) {\n    set_single (Ints&lt;I&gt; {}, a, t);\n    set_single (Ints&lt;K, Is...&gt; {}, a, t);\n}\n\ntemplate &lt;typename... Ts, typename... Args&gt;\nvoid set (Args... args) {\n    static_assert (sizeof... (Ts) == sizeof... (Args), \"\");\n\n    X&lt;Ts...&gt; types {};\n    X&lt;Args...&gt; arguments {args...};\n\n    logic ([&amp;types, &amp;arguments] () {\n        set_single (Iseq&lt;std::tuple_size&lt;decltype (arguments.tup)&gt;::value-1&gt; {}, arguments.tup, types.tup);\n    });\n\n}\n\n}\n</code></pre>\n\n<p>I used type <code>Solution2::X</code> to store values and types. I tried to do some <code>std::bind()</code> stuff, but it was painful, so I used \nsome integer sequence (which probably implementation is rather poor). Like I said, both solutions work but the second one is not so cool like the first one.</p>\n\n<p><strong>Could any of you tell me if <code>Solution2</code> can be replaced by some kind of easier solution? I am pretty sure that some exists.</strong></p>\n\n<p>And usage with output looks like:</p>\n\n<pre><code>Solution1::set&lt;P1, P2, P3&gt; (true, false, true);\n\nvalue = 1\nP1 = 1\nP2 = 0\nP3 = 0\nvalue = 0\nP1 = 0\nP2 = 1\nP3 = 0\nvalue = 1\nP1 = 0\nP2 = 0\nP3 = 1\n\n\nSolution2::set&lt;P1, P2, P3&gt; (true, false, true);\n\nvalue = 1\nP1 = 1\nP2 = 0\nP3 = 0\nvalue = 0\nP1 = 0\nP2 = 1\nP3 = 0\nvalue = 1\nP1 = 0\nP2 = 0\nP3 = 1\n</code></pre>\n"}, {"tags": ["c++", "c++14", "api-design", "c++17"], "comments": [{"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 1, "creation_date": 1472671056, "post_id": 39257307, "comment_id": 65850743, "body": "<code>std::vector&lt;unique_ptr&lt;const A&gt;&gt; aObjs_;</code>?"}, {"owner": {"reputation": 4792, "user_id": 588243, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7134a1b3bb60919edcbf78eab4e0992d?s=128&d=identicon&r=PG", "display_name": "Torbj&#246;rn", "link": "https://stackoverflow.com/users/588243/torbj%c3%b6rn"}, "reply_to_user": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 0, "creation_date": 1472671308, "post_id": 39257307, "comment_id": 65850873, "body": "@TemplateRex If this is too broad, would you be that kind and give me some hints for further research? @HowardHinnant <code>BImpl</code> should be able to modify the <code>A</code>s it is owning."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1472686224, "post_id": 39257307, "comment_id": 65856969, "body": "Why can&#39;t you just return a const reference to aObjs? I&#39;m very confused."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1472686437, "post_id": 39257307, "comment_id": 65857020, "body": "Also, a general note: you should never be messing around with shared pointers, if you don&#39;t actually need shared ownership. Your other comments make me think that you misunderstand when shared_ptr is appropriate: &quot;function arguments are shared_ptr&lt;const T&gt; or T const&amp; iff the function is only reading it&quot;. This is incorrect. You pass by shared_ptr <i>only</i> if the function needs to take on shared ownership, if you just need to access T and are not changing its ownership then pass by reference exclusively. Edit: ignore my first comment, I see it now."}], "answers": [{"comments": [{"owner": {"reputation": 4792, "user_id": 588243, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7134a1b3bb60919edcbf78eab4e0992d?s=128&d=identicon&r=PG", "display_name": "Torbj&#246;rn", "link": "https://stackoverflow.com/users/588243/torbj%c3%b6rn"}, "edited": false, "score": 0, "creation_date": 1472673308, "post_id": 39257881, "comment_id": 65851869, "body": "Ok, that&#39;s a point I didn&#39;t mention in the question: <code>B</code> will hold more than just some <code>A</code>s. It will also hold some <code>C</code>s and a <code>D</code>. I might need to completely rethink my model."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 4792, "user_id": 588243, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7134a1b3bb60919edcbf78eab4e0992d?s=128&d=identicon&r=PG", "display_name": "Torbj&#246;rn", "link": "https://stackoverflow.com/users/588243/torbj%c3%b6rn"}, "edited": false, "score": 0, "creation_date": 1472673406, "post_id": 39257881, "comment_id": 65851917, "body": "Ok, that different! I&#39;ll change this answer to make it work with multiple lists."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 4792, "user_id": 588243, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7134a1b3bb60919edcbf78eab4e0992d?s=128&d=identicon&r=PG", "display_name": "Torbj&#246;rn", "link": "https://stackoverflow.com/users/588243/torbj%c3%b6rn"}, "edited": false, "score": 0, "creation_date": 1472673884, "post_id": 39257881, "comment_id": 65852190, "body": "I changed the answer, but I don&#39;t tested it with a compiler. If you run into problems with it, just tell me in the comments."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1472685231, "post_id": 39257881, "comment_id": 65856709, "body": "Why expose the fact that <code>ConstPtrVector </code> wraps a vector?"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1472685901, "post_id": 39257881, "comment_id": 65856882, "body": "I didn&#39;t try to find the best name ever. I&#39;m sure OP can figure out what&#39;s the best name for his API. This name is in fact quite good for explanation purpose."}], "tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": false, "score": 4, "last_activity_date": 1472674329, "last_edit_date": 1472674329, "creation_date": 1472672992, "answer_id": 39257881, "question_id": 39257307, "link": "https://stackoverflow.com/questions/39257307/const-correct-accessor-to-vector-of-pointers-without-transfer-of-ownership-in-ab/39257881#39257881", "title": "Const-correct accessor to vector of pointers without transfer of ownership in abstract interface", "body": "<p>Instead of trying to return the vector directly, you can return a wrapper of a vector that allows you to access the content only with const pointers. It might sound complicated, but it's not. Just make a thin wrapper and add a <code>begin()</code> and <code>end()</code> function to allow iteration:</p>\n\n<pre><code>struct BImpl : B {\n    virtual ~BImpl() = default;\n    void addA(std::unique_ptr&lt;A&gt; aObj) override;\n\n    ConstPtrVector&lt;A&gt; aObjs() const override {\n        return aObjs_;\n    }\n\nprivate:\n    std::vector&lt;unique_ptr&lt;A&gt;&gt; aObjs_;\n};\n</code></pre>\n\n<p><code>ConstPtrVector</code> will look like this:</p>\n\n<pre><code>template&lt;typename T&gt;\nConstPtrVector {\n    ConstPtrVector(const std::vector&lt;T&gt;&amp; vec_) : vec{vec_} {}\n\n    MyConstIterator&lt;T&gt; begin() const {\n        return vec.begin();\n    }\n\n    MyConstIterator&lt;T&gt; end() const {\n        return vec.end();\n    }\n\nprivate:\n    const std::vector&lt;T&gt;&amp; vec;\n};\n</code></pre>\n\n<p>And You can Implement <code>MyConstIterator</code> in a way that will return pointers as const:</p>\n\n<pre><code>template&lt;typename T&gt;\nstruct MyConstIterator {\n    MyConstIterator(std::vector&lt;unique_ptr&lt;T&gt;&gt;::const_iterator it_) : it{std::move(it_)} {}\n\n    bool operator==(const MyConstIterator&amp; other) const {\n        return other.it == it;\n    }\n\n    bool operator!=(const MyConstIterator&amp; other) const {\n        return other.it != it;\n    } \n\n    const T* operator*() const {\n        return it-&gt;get();\n    }\n\n    const T* operator-&gt;() const {\n        return it-&gt;get();\n    }\n\n    MyConstIterator&amp; operator++() {\n        ++it;\n        return *this;\n    }\n\n    MyConstIterator&amp; operator--() {\n        --it;\n        return *this;\n    }\n\nprivate:\n    std::vector&lt;unique_ptr&lt;T&gt;&gt;::const_iterator it;\n};\n</code></pre>\n\n<p>Of course, you can generalize this iterator and wrapper by implementing a vector like interface.</p>\n\n<p>Then, to use it, you can use range based for loop or a classic iterator based loop.</p>\n\n<p>BTW: There is nothing wrong with non owning raw pointers. As long as they are still non owning. If you want to avoid error due to raw pointers, look at <code>observer_ptr&lt;T&gt;</code>, it might be useful.</p>\n"}, {"comments": [{"owner": {"reputation": 4792, "user_id": 588243, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7134a1b3bb60919edcbf78eab4e0992d?s=128&d=identicon&r=PG", "display_name": "Torbj&#246;rn", "link": "https://stackoverflow.com/users/588243/torbj%c3%b6rn"}, "edited": false, "score": 0, "creation_date": 1472706591, "post_id": 39258549, "comment_id": 65861606, "body": "That looks smart and would finally give me a reason to finally use range-v3. I&#39;ll definitely try that out. At least for the fun of it."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 3, "last_activity_date": 1472715492, "last_edit_date": 1472715492, "creation_date": 1472675655, "answer_id": 39258549, "question_id": 39257307, "link": "https://stackoverflow.com/questions/39257307/const-correct-accessor-to-vector-of-pointers-without-transfer-of-ownership-in-ab/39258549#39258549", "title": "Const-correct accessor to vector of pointers without transfer of ownership in abstract interface", "body": "<p>With <a href=\"https://github.com/ericniebler/range-v3\" rel=\"nofollow\">range-v3</a>, you may do</p>\n\n<pre><code>template &lt;typename T&gt;\nusing const_view_t = decltype(std::declval&lt;const std::vector&lt;std::unique_ptr&lt;T&gt;&gt;&amp;&gt;() \n                        | ranges::view::transform(&amp;std::unique_ptr&lt;T&gt;::get)\n                        | ranges::view::indirect);\n\nclass B\n{\npublic:\n    virtual ~B() = default;\n    virtual void addA(std::unique_ptr&lt;A&gt; a) = 0;    \n    virtual const_view_t&lt;A&gt; getAs() const = 0;\n};\n\nclass D : public B\n{\npublic:\n    void addA(std::unique_ptr&lt;A&gt; a) override { v.emplace_back(std::move(a)); }\n    const_view_t&lt;A&gt; getAs() const override {\n        return v | ranges::view::transform(&amp;std::unique_ptr&lt;A&gt;::get)\n                 | ranges::view::indirect;\n    }\n\nprivate:\n    std::vector&lt;std::unique_ptr&lt;A&gt;&gt; v;\n};\n</code></pre>\n\n<p>And then</p>\n\n<pre><code>for (const A&amp; a : d.getAs()) {\n    std::cout &lt;&lt; a.n &lt;&lt; std::endl;   \n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/bfdd5d22dcae6c97\" rel=\"nofollow\">Demo</a></p>\n"}, {"comments": [{"owner": {"reputation": 4792, "user_id": 588243, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7134a1b3bb60919edcbf78eab4e0992d?s=128&d=identicon&r=PG", "display_name": "Torbj&#246;rn", "link": "https://stackoverflow.com/users/588243/torbj%c3%b6rn"}, "edited": false, "score": 0, "creation_date": 1472708207, "post_id": 39260495, "comment_id": 65862178, "body": "1) <code>It end() const</code> should return <code>e</code>, doesn&#39;t it? 2) Are you referring to a specific implementations of <code>any_random_access_iterator</code> or just to the concept? 3) Is <code>data_type</code> a custom helper template abstracting away e.g. <code>vector&lt;T&gt;::value_type</code> and <code>unique_ptr&lt;T&gt;::elment_type</code>?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 4792, "user_id": 588243, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7134a1b3bb60919edcbf78eab4e0992d?s=128&d=identicon&r=PG", "display_name": "Torbj&#246;rn", "link": "https://stackoverflow.com/users/588243/torbj%c3%b6rn"}, "edited": false, "score": 0, "creation_date": 1472726049, "post_id": 39260495, "comment_id": 65872762, "body": "@torb <code>template&lt;class T&gt;using data_type=decltype(std::declval&lt;T&gt;().data());</code>, concept, yes (in reverse order)"}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 3, "last_activity_date": 1472830631, "last_edit_date": 1472830631, "creation_date": 1472685827, "answer_id": 39260495, "question_id": 39257307, "link": "https://stackoverflow.com/questions/39257307/const-correct-accessor-to-vector-of-pointers-without-transfer-of-ownership-in-ab/39260495#39260495", "title": "Const-correct accessor to vector of pointers without transfer of ownership in abstract interface", "body": "<pre><code>template&lt;class It&gt;\nstruct range_view_t {\n  It b{};\n  It e{};\n  range_view_t(It s, It f):b(std::move(s)), e(std::move(f)) {}\n  range_view_t()=default;\n  range_view_t(range_view_t&amp;&amp;)=default;\n  range_view_t(range_view_t const&amp;)=default;\n  range_view_t&amp; operator=(range_view_t&amp;&amp;)=default;\n  range_view_t&amp; operator=(range_view_t const&amp;)=default;\n\n  It begin() const { return b; }\n  It end() const { return e; }\n};\n</code></pre>\n\n<p>here we start with a range of iterators.</p>\n\n<p>We can make it richer with <code>range_view_t remove_front(std::size_t n = 1)const</code>, <code>bool empty() const</code>, <code>front()</code> etc.</p>\n\n<p>We can augment it using the usual techniques, conditionally adding <code>operator[]</code> and <code>size</code> if <code>It</code> has a <code>random_access_iterator_tag</code> category, and making <code>remove_front</code> silently bound <code>n</code>.</p>\n\n<p>Then going one step further, we write <code>array_view_t</code>:</p>\n\n<pre><code>template&lt;class T&gt;\nstruct array_view_t:range_view&lt;T*&gt; {\n  using range_view&lt;T*&gt;::range_view;\n  array_view_t()=default; // etc\n  array_view_t( T* start, std::size_t length ):array_view_t(start, start+length) {}\n  template&lt;class C,\n    std::enable_if_t\n      std::is_same&lt; std::remove_pointer_t&lt;data_type&lt;C&gt;&gt;, T&gt;{}\n      || std::is_same&lt; const std::remove_pointer_t&lt;data_type&lt;C&gt;&gt;, T&gt;{},\n      , int\n    &gt; =0\n  &gt;\n  array_view_t( C&amp; c ):array_view_t(c.data(), c.size()) {}\n  template&lt;std::size_t N&gt;\n  array_view_t( T(&amp;arr)[N] ):array_view_t( arr, N ) {}\n};\n</code></pre>\n\n<p>which abstracts looking at the contents of a contiguous container.</p>\n\n<p>Now your <code>BImpl</code> returns an <code>array_view_t&lt; const std::unique_ptr&lt;A&gt; &gt;</code>.</p>\n\n<p>This level of abstraction is basically free.</p>\n\n<hr>\n\n<p>If that isn't enough, you type erase random access iteration of <code>T</code>, then return a <code>range_view_t&lt; any_random_access_iterator&lt;T&gt; &gt;</code>, where in this case <code>T</code> is <code>const std::unique_ptr&lt;A&gt;</code>.</p>\n\n<p>We could also erase the ownership semantics, and just be a <code>range_view_t&lt; any_random_access_iterator&lt;A*&gt; &gt;</code> after throwing in a range adapter.</p>\n\n<p>This level of type erasure is not free.</p>\n\n<hr>\n\n<p>For utter insanity, you can stop using smart pointers or interfaces.</p>\n\n<p>Describe your interfaces using type erasure.  Pass out any's wrapped with the type erasure.  Nearly everything uses value semantics.  If you consume a copy, take by value, then move out of that value.  Avoid persistent references to objects.  Short term references are references, or pointers if they are optional.  These are not stored.</p>\n\n<p>Use names instead of addresses, and use a registry somewhere to get at the items, when you cannot afford to use values.</p>\n"}], "owner": {"reputation": 4792, "user_id": 588243, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7134a1b3bb60919edcbf78eab4e0992d?s=128&d=identicon&r=PG", "display_name": "Torbj&#246;rn", "link": "https://stackoverflow.com/users/588243/torbj%c3%b6rn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 380, "favorite_count": 1, "accepted_answer_id": 39258549, "answer_count": 3, "score": 10, "last_activity_date": 1472830631, "creation_date": 1472670673, "last_edit_date": 1472673491, "question_id": 39257307, "link": "https://stackoverflow.com/questions/39257307/const-correct-accessor-to-vector-of-pointers-without-transfer-of-ownership-in-ab", "title": "Const-correct accessor to vector of pointers without transfer of ownership in abstract interface", "body": "<p>I'm designing a library from scratch and want to get the public API as <em>good</em> as possible. I want the compiler to yell at me for misuse. Therefore, I've imposed the following rules on myself:</p>\n\n<ol>\n<li><p><strong>true (i.e. deep and complete) const correctness throughout the whole library</strong></p>\n\n<p>All <em>things</em> (local variables, member variables, member functions), which are not expected to change are declared <code>const</code>. That constness should propagate to all nested members and types.</p></li>\n<li><p><strong>explicit and expressive ownership</strong></p>\n\n<p>In line with the C++ Core Guidelines I define that as (<em>iff</em> in the mathematical sense of <em>if and only if</em>):</p>\n\n<ol>\n<li>function arguments are <code>unique_ptr&lt;T&gt;</code> or <code>T&amp;&amp;</code> <em>iff</em> the function is consuming it (i.e. taking ownership)</li>\n<li>function arguments are <code>shared_ptr&lt;const T&gt;</code> or <code>T const&amp;</code> <em>iff</em> the function is only reading it</li>\n<li>function arguments are <code>shared_ptr&lt;T&gt;</code> or <code>T&amp;</code> <em>iff</em> the function is modifying it without taking ownership</li>\n<li>return values are <code>unique_ptr&lt;T&gt;</code> or <code>T</code> <em>iff</em> the function transfers ownership to the caller</li>\n<li>return values are <code>shared_ptr&lt;const T&gt;</code> or <code>T const&amp;</code> <em>iff</em> the caller should only read it (though the caller can construct a copy of it - given <code>T</code> is copyable)</li>\n<li>no functions should return <code>shared_ptr&lt;T&gt;</code>, <code>T&amp;</code> or <code>T*</code> (as it would allow for uncontrollable side effects, which I try to avoid by design)</li>\n</ol></li>\n<li><p><strong>hidden implementation details</strong></p>\n\n<p>For now I'm going with abstract interfaces with factories returning the implementation as a <code>unique_ptr&lt;Interface&gt;</code>. Though, I'm open for alternative patterns which solve my problem described below.</p></li>\n</ol>\n\n<p>I don't care about virtual table lookups and want to avoid dynamic casts by all means (I see them as a code smell).</p>\n\n<hr>\n\n<p>Now, given two classes <code>A</code> and <code>B</code>, where <code>B</code> owns a variable number of <code>A</code>s. As well we've the <code>B</code>-implementation <code>BImpl</code> (implementation of <code>A</code> is probably not of use here):</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class A\n{};\n\nclass B {\n public:\n  virtual ~B() = default;\n  virtual void addA(std::unique_ptr&lt;A&gt; aObj) = 0;\n  virtual ??? aObjs() const = 0;\n};\n\nclass BImpl : public B {\n public:\n  virtual ~BImpl() = default;\n  void addA(std::unique_ptr&lt;A&gt; aObj) override;\n  ??? aObjs() const override;\n\n private:\n  std::vector&lt;unique_ptr&lt;A&gt;&gt; aObjs_;\n};\n</code></pre>\n\n<p>I'm stuck with the return value of <code>B</code>s getter to the vector of <code>A</code>s: <code>aObjs()</code>.<br>\nIt should provide the list of <code>A</code>s as read-only values without transfer of ownership (rule 2.5. above with const correctness) and still provide the caller easy access to all <code>A</code>s, e.g. for use in range-based <code>for</code> or standard algorithms such as <code>std::find</code>.</p>\n\n<p>I came up with the following options for those <code>???</code>:</p>\n\n<ol>\n<li><p><code>std::vector&lt;std::shared_ptr&lt;const A&gt;&gt; const&amp;</code></p>\n\n<p>I would have to construct a new vector each time I call <code>aObjs()</code> (I could cache it in <code>BImpl</code>). That feels not only inefficient and needlessly complex, but seems also very suboptimal.</p></li>\n<li><p>Replace <code>aObjs()</code> by a pair of functions (<code>aObjsBegin()</code> and <code>aObjsEnd()</code>) forwarding the constant iterator of <code>BImpl::aObjs_</code>.</p>\n\n<p>Wait. I would need to make that <code>unique_ptr&lt;A&gt;::const_iterator</code> a <code>unique_ptr&lt;const A&gt;::const_iterator</code> to get my beloved const correctness. Again nasty casts or intermediate objects. And the user couldn't use it easily in range-based <code>for</code>.</p></li>\n</ol>\n\n<p>What obvious solution am I missing?</p>\n\n<hr>\n\n<p><em>Edit</em>:</p>\n\n<ul>\n<li><p><code>B</code> should always be able to modify the <code>A</code>s it is holding, thus declaring <code>aObjs_</code> as <code>vector&lt;std::unique_ptr&lt;const A&gt;&gt;</code> is not an option.</p></li>\n<li><p>Let <code>B</code> adhere to the iterator concept to iterate over the <code>A</code>s, is neither an option as <code>B</code> will hold a list of <code>C</code>s and a specific <code>D</code> (or none).</p></li>\n</ul>\n"}, {"tags": ["c++", "templates", "stl", "containers", "std"], "comments": [{"owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 1, "creation_date": 1472670592, "post_id": 39257255, "comment_id": 65850480, "body": "did you try to run it? also <code>void main</code> does not exist"}, {"owner": {"reputation": 7, "user_id": 6780264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df65427892b8087629d74c84c0f2a898?s=128&d=identicon&r=PG&f=1", "display_name": "JOkle", "link": "https://stackoverflow.com/users/6780264/jokle"}, "reply_to_user": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 0, "creation_date": 1472670909, "post_id": 39257255, "comment_id": 65850655, "body": "Sure I tried, it works in visual studio."}, {"owner": {"reputation": 1068, "user_id": 2800918, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/77b59723cbffd9e9b6e1e1c8802f579b?s=128&d=identicon&r=PG&f=1", "display_name": "CAB", "link": "https://stackoverflow.com/users/2800918/cab"}, "edited": false, "score": 0, "creation_date": 1472671307, "post_id": 39257255, "comment_id": 65850872, "body": "You&#39;re asking for an opinion.  If you ran it, the compiler accepted it.  Is that good enough?"}, {"owner": {"reputation": 690, "user_id": 3972710, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1ae8581ca6140db037bea59ada58d1ec?s=128&d=identicon&r=PG&f=1", "display_name": "NGI", "link": "https://stackoverflow.com/users/3972710/ngi"}, "edited": false, "score": 0, "creation_date": 1472676691, "post_id": 39257255, "comment_id": 65853570, "body": "See this question also <a href=\"http://stackoverflow.com/questions/3251549\">creating-an-interface-for-an-abstract-class-template-in-c++</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1068, "user_id": 2800918, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/77b59723cbffd9e9b6e1e1c8802f579b?s=128&d=identicon&r=PG&f=1", "display_name": "CAB", "link": "https://stackoverflow.com/users/2800918/cab"}, "is_accepted": false, "score": 1, "last_activity_date": 1472671653, "creation_date": 1472671653, "answer_id": 39257561, "question_id": 39257255, "link": "https://stackoverflow.com/questions/39257255/storing-multiple-types-in-map/39257561#39257561", "title": "Storing multiple types in map", "body": "<p>Use <a href=\"http://www.boost.org/doc/libs/1_61_0/doc/html/any/s02.html\" rel=\"nofollow\">boost::any</a> and <a href=\"http://www.boost.org/doc/libs/1_61_0/doc/html/boost/any_cast_idp6057536.html\" rel=\"nofollow\">boost::any_cast</a>.</p>\n\n<p>A check to see if the any is an int;</p>\n\n<pre><code>bool is_int(const boost::any &amp; operand)\n{\n    return operand.type() == typeid(int);\n}\n</code></pre>\n\n<p>A check to see if the any is a <code>const char *</code></p>\n\n<pre><code>bool is_char_ptr(const boost::any &amp; operand)\n{\n    try\n    {\n        any_cast&lt;const char *&gt;(operand);\n        return true;\n    }\n    catch(const boost::bad_any_cast &amp;)\n    {\n        return false;\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": false, "score": 0, "last_activity_date": 1472679298, "creation_date": 1472679298, "answer_id": 39259376, "question_id": 39257255, "link": "https://stackoverflow.com/questions/39257255/storing-multiple-types-in-map/39259376#39259376", "title": "Storing multiple types in map", "body": "<p>If you don't want to pollute your classes with functions like <code>getType</code>, a basic and easy to use solution is using a tagged union like the one in the following example:</p>\n\n<pre><code>#include &lt;map&gt;\n\nstruct StructA { };\nstruct StructB { };\n\nstruct TaggedUnion {\n    enum { A, B } tag;\n    union {\n        StructA a;\n        StructB b;\n    };\n};\n\nint main() {\n    std::map&lt;std::size_t, TaggedUnion&gt; map;\n    map[0] = TaggedUnion{ TaggedUnion::A, StructA{} };\n\n    switch(map[0].tag) {\n    case TaggedUnion::A:\n        // do whatever you want with map[0].a;\n        // ...\n        break;\n    case TaggedUnion::B:\n        // do whatever you want with map[0].b\n        // ...\n        break;\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 690, "user_id": 3972710, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1ae8581ca6140db037bea59ada58d1ec?s=128&d=identicon&r=PG&f=1", "display_name": "NGI", "link": "https://stackoverflow.com/users/3972710/ngi"}, "is_accepted": false, "score": 0, "last_activity_date": 1473109216, "last_edit_date": 1495535352, "creation_date": 1472681087, "answer_id": 39259708, "question_id": 39257255, "link": "https://stackoverflow.com/questions/39257255/storing-multiple-types-in-map/39259708#39259708", "title": "Storing multiple types in map", "body": "<p>Your question is interesting and I do not understand why so downvoted. Unfortunately what you are trying to do is impossible in C++ ( I wonder if it is feasible in Java or C# )</p>\n\n<p>I put again the link of what I think is the core of your question.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/3251549/\">creating-an-interface-for-an-abstract-class-template-in-c++</a></p>\n\n<p>Out of this your implementation is interesting. I just put some rework here as I think you can spare some lines without nasty switch case:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;List&gt;\n\nusing namespace std;\n\nstruct CType\n{\n    int GetType() { return m_Type; }\n    string GetStringVal() { return m_string_val; }\n    enum eType {     TYPE_STRING,\n                     TYPE_NUMBER };\nprotected:\n    int m_Type;\n    string m_string_val;\n};\n\ntemplate &lt;typename T&gt;\nclass CData : public CType\n{\npublic:\n    CData(const T &amp; rData):m_Data(rData)\n    {\n        stringstream strs;\n        m_Type  = GetType();\n        //Mingw bug\n        //m_string_val = std::to_string(m_Data); //c++11\n        strs &lt;&lt; m_Data;\n        m_string_val = strs.str();\n    }\n\n    T &amp; GetData() { return m_Data; }\n\nprivate:\n    T m_Data;\n    CType::eType GetType();\n};\n\ntemplate&lt;&gt; CType::eType CData&lt;int&gt;::GetType() { return TYPE_NUMBER; };\ntemplate&lt;&gt; CType::eType CData&lt;string&gt;::GetType() { return TYPE_STRING; };\n//More specialization here\n\nint main()\n{\n    cout &lt;&lt; \"Hello world!\" &lt;&lt; endl;\n\n    CData&lt;int&gt; cd_int(5);\n    CData&lt;string&gt; cd_str(\"SO contribution\");\n\n    list&lt;CType&gt; my_list = { cd_int, cd_str };\n\n    for ( auto &amp; elem : my_list)\n        cout &lt;&lt; elem.GetStringVal() &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>The results are naturally:</p>\n\n<p>Hello world!</p>\n\n<p>5</p>\n\n<p>SO contribution</p>\n\n<p>-----<strong>ADD-ON</strong> 2016-Sept-05-----</p>\n\n<p>Another possibility is to store a function ( lambda with \"this\" capture ) returning the result instead of the result itself. It avoids to perform updates when the m_Data field changes</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;List&gt;\n#include &lt;functional&gt;\n\nusing namespace std;\n\nstruct CType\n{\n    int GetType() { return m_Type; }\n    string GetStringVal() { return m_string_func(); }\n    enum eType {     TYPE_STRING,\n                     TYPE_NUMBER };\nprotected:\n    int m_Type;\n    function&lt;string()&gt; m_string_func ;\n};\n\ntemplate &lt;typename T&gt;\nclass CData : public CType\n{\n    public:\n    CData(const T &amp; rData):m_Data(rData)\n    {\n        m_Type  = GetType();\n        m_string_func = [this](){   //MinGW bug,otherwise to_string()\n                                    stringstream strs;\n                                    strs &lt;&lt; m_Data;\n                                    return strs.str();};\n    }\n\nprivate:\n    T m_Data;\n    CType::eType GetType();\n};\n\ntemplate&lt;&gt; CType::eType CData&lt;int&gt;::GetType() { return TYPE_NUMBER; };\ntemplate&lt;&gt; CType::eType CData&lt;string&gt;::GetType() { return TYPE_STRING; };\n\nint main()\n{\n    cout &lt;&lt; \"Hello world!\" &lt;&lt; endl;\n\n    CData&lt;int&gt; cd_int(5);\n    CData&lt;string&gt; cd_str(\"SO contribution\");\n\n    list&lt;CType&gt; my_list = { cd_int, cd_str };\n\n    for ( auto &amp; elem : my_list)\n        cout &lt;&lt; elem.GetStringVal() &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 6780264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df65427892b8087629d74c84c0f2a898?s=128&d=identicon&r=PG&f=1", "display_name": "JOkle", "link": "https://stackoverflow.com/users/6780264/jokle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "answer_count": 3, "score": -4, "last_activity_date": 1473109216, "creation_date": 1472670470, "question_id": 39257255, "link": "https://stackoverflow.com/questions/39257255/storing-multiple-types-in-map", "title": "Storing multiple types in map", "body": "<p>I want to store multiple type of objects in a map, and I came up with this solution. I must know the type of each object, so I can't use <strong>boost::any</strong>. Is there a better way to do this, or this is an acceptable solution?</p>\n\n<pre><code>enum eType\n{\n    TYPE_STRING,\n    TYPE_NUMBER,\n};\n\nclass CType\n{ \npublic:\n    int GetType() { return m_Type; }\n\nprotected:\n    int m_Type;\n};\n\ntemplate &lt;typename T&gt;\nclass CData : public CType\n{\npublic:\n    CData(const T &amp; rData, int iType)\n    {\n        m_Type  = iType;\n        m_Data  = rData;\n    }\n\n    T &amp; GetData() { return m_Data; }\n\nprivate:\n    T m_Data;\n};\n\nstd::map&lt;unsigned long, CType *&gt; map_Data;\n\nvoid main()\n{\n    // Create a new data with TYPE_NUMBER\n    CData&lt;short&gt; data(32767, TYPE_NUMBER);\n\n    // Add it to the map\n    map_Data[0] = &amp;data;\n\n    // Get the type\n    switch (map_Data[0]-&gt;GetType())\n    {\n        case TYPE_NUMBER:\n        {\n            // Cast the first element to CData\n            CData&lt;short&gt; * pField = (CData&lt;short&gt; *)map_Data[0];\n\n            // Print the data\n            printf(\"Data: %d\\n\", pField-&gt;GetData());\n        }\n        break;\n\n        case TYPE_STRING:\n        {\n            // Cast the first element to CData\n            CData&lt;std::string&gt; * pField = (CData&lt;std::string&gt; *)map_Data[0];\n\n            // Print the data\n            printf(\"Data: %s\\n\", pField-&gt;GetData().c_str());\n        }\n        break;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "node-gyp"], "answers": [{"comments": [{"owner": {"reputation": 514, "user_id": 2847079, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/cb214e9e25b8c54e66a1082b3fced5fc?s=128&d=identicon&r=PG", "display_name": "Bruno P&#233;rel", "link": "https://stackoverflow.com/users/2847079/bruno-p%c3%a9rel"}, "edited": false, "score": 0, "creation_date": 1476259429, "post_id": 39410605, "comment_id": 67264838, "body": "Thank you, that was a dumb question ^^"}], "tags": [], "owner": {"reputation": 1456, "user_id": 1355844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ab4f9a5500ee4f1dc4381420ce270c6?s=128&d=identicon&r=PG", "display_name": "pmed", "link": "https://stackoverflow.com/users/1355844/pmed"}, "is_accepted": true, "score": 1, "last_activity_date": 1473420664, "creation_date": 1473420664, "answer_id": 39410605, "question_id": 39257139, "link": "https://stackoverflow.com/questions/39257139/incremental-build-of-a-node-gyp-project/39410605#39410605", "title": "Incremental build of a node-gyp project", "body": "<p>According to documentation, <code>node-gyp rebuild</code> runs <code>clean</code>, <code>configure</code> and <code>build</code> commands all in a row. Just run <code>node-gyp build</code> to invoke make.</p>\n"}], "owner": {"reputation": 514, "user_id": 2847079, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/cb214e9e25b8c54e66a1082b3fced5fc?s=128&d=identicon&r=PG", "display_name": "Bruno P&#233;rel", "link": "https://stackoverflow.com/users/2847079/bruno-p%c3%a9rel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 39410605, "answer_count": 1, "score": 0, "last_activity_date": 1473420664, "creation_date": 1472670102, "question_id": 39257139, "link": "https://stackoverflow.com/questions/39257139/incremental-build-of-a-node-gyp-project", "title": "Incremental build of a node-gyp project", "body": "<p>I'm fiddling around the <a href=\"https://github.com/mscdex/node-mariasql\" rel=\"nofollow\">node-mariasql</a> source code, and would like to change some stuff and rebuild the project as I go. My intuitive approach was to just run <code>node-gyp rebuild</code> from the root of the project. Unfortunately, it looks like it always builds the whole project all over again, even if I just make a change on one of the source files :</p>\n\n<pre><code>~/Documents/workspace/node-mariasql$ node-gyp rebuild\ngyp info it worked if it ends with ok\ngyp info using node-gyp@3.4.0\ngyp info using node@4.4.7 | linux | x64\n...\nmake: Entering directory '/home/vagrant/Documents/workspace/node-mariasql/build'\n  CXX(target) Debug/obj.target/taocrypt/deps/libmariadbclient/extra/yassl/taocrypt/src/aes.o\n  CXX(target) Debug/obj.target/taocrypt/deps/libmariadbclient/extra/yassl/taocrypt/src/aestables.o\n  ... (and so on...)\n\n  CC(target) Debug/obj.target/zlib/deps/libmariadbclient/zlib/zutil.o\n  AR(target) Debug/obj.target/deps/libmariadbclient/zlib/zlib.a\n  COPY Debug/zlib.a\n  CXX(target) Debug/obj.target/sqlclient/src/binding.o\n../src/binding.cc:71:0: warning: \"DEBUG\" redefined [enabled by default]\n  SOLINK_MODULE(target) Debug/obj.target/sqlclient.node\n  COPY Debug/sqlclient.node\nmake: Leaving directory '/home/vagrant/Documents/workspace/node-\nmariasql/build'\ngyp info ok \n</code></pre>\n\n<p>The build process takes a little while, how can I make the project be built incrementally ?</p>\n"}, {"tags": ["java", "c++", "java-native-interface", "openjdk"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1472669935, "post_id": 39257020, "comment_id": 65850108, "body": "Why is this tagged <code>C++</code>?"}, {"owner": {"reputation": 1495, "user_id": 842808, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/86bc1885f9caab6706e51fab0601e307?s=128&d=identicon&r=PG", "display_name": "Abhinav", "link": "https://stackoverflow.com/users/842808/abhinav"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1472670025, "post_id": 39257020, "comment_id": 65850161, "body": "Now that I think about it, I think its unnecessary. But I did it because I am trying to call a C++ shared lib from a Java program. I thought that it might be a relevant information."}, {"owner": {"reputation": 20471, "user_id": 1552587, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ed783ecfe6b4babe78d4ae5b206ef431?s=128&d=identicon&r=PG", "display_name": "Titus", "link": "https://stackoverflow.com/users/1552587/titus"}, "edited": false, "score": 0, "creation_date": 1472670288, "post_id": 39257020, "comment_id": 65850309, "body": "I think <code>.</code> is the current working directory of the <code>ld</code> program (the linker program) not your program."}, {"owner": {"reputation": 20471, "user_id": 1552587, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ed783ecfe6b4babe78d4ae5b206ef431?s=128&d=identicon&r=PG", "display_name": "Titus", "link": "https://stackoverflow.com/users/1552587/titus"}, "edited": false, "score": 1, "creation_date": 1472670386, "post_id": 39257020, "comment_id": 65850361, "body": "Why don&#39;t you try to find the current working directory of your program at runtime and construct an absolute path to the library if loading it using an absolute path works ?"}, {"owner": {"reputation": 1495, "user_id": 842808, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/86bc1885f9caab6706e51fab0601e307?s=128&d=identicon&r=PG", "display_name": "Abhinav", "link": "https://stackoverflow.com/users/842808/abhinav"}, "reply_to_user": {"reputation": 20471, "user_id": 1552587, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ed783ecfe6b4babe78d4ae5b206ef431?s=128&d=identicon&r=PG", "display_name": "Titus", "link": "https://stackoverflow.com/users/1552587/titus"}, "edited": false, "score": 0, "creation_date": 1472670669, "post_id": 39257020, "comment_id": 65850527, "body": "@Titus  comment1) I checked the <code>user.dir</code> property in java -XshowSettings:properties and it shows me the current directory.  comment2) I can try to do that, but I still dont understand the reason for failure of this seemingly simple error."}, {"owner": {"reputation": 1495, "user_id": 842808, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/86bc1885f9caab6706e51fab0601e307?s=128&d=identicon&r=PG", "display_name": "Abhinav", "link": "https://stackoverflow.com/users/842808/abhinav"}, "reply_to_user": {"reputation": 20471, "user_id": 1552587, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ed783ecfe6b4babe78d4ae5b206ef431?s=128&d=identicon&r=PG", "display_name": "Titus", "link": "https://stackoverflow.com/users/1552587/titus"}, "edited": false, "score": 0, "creation_date": 1472674705, "post_id": 39257020, "comment_id": 65852613, "body": "@Titus Thanks for the temporary fix of building absolute path to file at run time. I gave up on doing it right and chose to use this hack instead."}, {"owner": {"reputation": 20471, "user_id": 1552587, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ed783ecfe6b4babe78d4ae5b206ef431?s=128&d=identicon&r=PG", "display_name": "Titus", "link": "https://stackoverflow.com/users/1552587/titus"}, "edited": false, "score": 0, "creation_date": 1472675397, "post_id": 39257020, "comment_id": 65852971, "body": "I&#39;m glad I could help. I&#39;m not sure what the problem is, it could be any of this things. 1) The program&#39;s working directory is something other then the directory that contains the library (that depends on how you&#39;re starting the program). 2) The <code>String</code> that you pass to the  <code>System.loadLibrary(...)</code> is incorrect (I think <code>ld</code> doesn&#39;t require the <code>lib</code> prefix, you can try <code>System.loadLibrary(&quot;Sample1&quot;);</code>)."}, {"owner": {"reputation": 1908, "user_id": 2543253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a87e0065d4c5036eb7adabe2edfd187?s=128&d=identicon&r=PG", "display_name": "user2543253", "link": "https://stackoverflow.com/users/2543253/user2543253"}, "reply_to_user": {"reputation": 20471, "user_id": 1552587, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ed783ecfe6b4babe78d4ae5b206ef431?s=128&d=identicon&r=PG", "display_name": "Titus", "link": "https://stackoverflow.com/users/1552587/titus"}, "edited": false, "score": 0, "creation_date": 1473088425, "post_id": 39257020, "comment_id": 65998268, "body": "@Titus I&#39;d also say <code>System.loadLibrary(&quot;Sample1&quot;)</code> is correct but not because of <code>ld</code> but because Java will put the parameter to <code>loadLibrary</code> through <code>System.mapLibraryName()</code>"}, {"owner": {"reputation": 1592, "user_id": 1369532, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/I5IKK.jpg?s=128&g=1", "display_name": "neohope", "link": "https://stackoverflow.com/users/1369532/neohope"}, "edited": false, "score": 0, "creation_date": 1473152351, "post_id": 39257020, "comment_id": 66019494, "body": "@Abhinav Make sure so and JVM are both x86 or x64. Try this java -cp PATH_OF_JAR -Djava.library.path=PATH_TO_SO_FOLDER MAIN_CLASS"}], "owner": {"reputation": 1495, "user_id": 842808, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/86bc1885f9caab6706e51fab0601e307?s=128&d=identicon&r=PG", "display_name": "Abhinav", "link": "https://stackoverflow.com/users/842808/abhinav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 424, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1472669689, "creation_date": 1472669689, "last_edit_date": 1495535627, "question_id": 39257020, "link": "https://stackoverflow.com/questions/39257020/exception-in-thread-main-java-lang-unsatisfiedlinkerror-library-not-found-des", "title": "Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError (Library not found despite being in java.lang.path)", "body": "<p>I am working on a 64bit Linux machine. I am trying to emulate a simple JNI tutorial given <a href=\"http://www.ibm.com/developerworks/java/tutorials/j-jni/j-jni.html\" rel=\"nofollow noreferrer\">here</a>. After I have prepared all the files, i.e. <code>Sample1.java, Sample1.class, Sample1.h, Sample1.cpp</code> and <code>libSample1.so</code>, and when I try to run the command</p>\n\n<pre><code>java Sample1\n</code></pre>\n\n<p>I get the following error.</p>\n\n<pre><code>Exception in thread \"main\" java.lang.UnsatisfiedLinkError: no libSample1 in java.library.path\n        at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1889)\n        at java.lang.Runtime.loadLibrary0(Runtime.java:849)\n        at java.lang.System.loadLibrary(System.java:1088)\n        at Sample1.main(Sample1.java:10)\n</code></pre>\n\n<p>The problem line of <code>Sample1.java</code> is given as;</p>\n\n<pre><code>System.loadLibrary(\"libSample1\");\n</code></pre>\n\n<p>I have read a question similar to mine <a href=\"https://stackoverflow.com/q/9905420/842808\">here</a> and tried to take advice from one of its <a href=\"https://stackoverflow.com/a/9905495/842808\">answers</a>, i.e. added current directory to environment variable <code>$LD_LIBRARY_PATH</code> (current directory contains <code>libSample1.so</code> file) using;</p>\n\n<pre><code>export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:.\n</code></pre>\n\n<p>But this still doesn't help me. Even a call to <code>java -XshowSettings:properties</code> shows that <code>java.library.path</code> contains <code>.</code> as one of the search paths.</p>\n\n<p>When I replace relative file path with absolute file path by replacing <code>System.loadLibrary(\"libSample1\")</code> with <code>System.load(\"&lt;absolute-file-path&gt;/libSample1.so\");</code>, this problem goes away. Can someone tell me how to make sure that <code>java.library.path</code> can find my shared library file?</p>\n"}, {"tags": ["c++", "multithreading", "opencv", "openmp"], "comments": [{"owner": {"reputation": 2799, "user_id": 1747493, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Ro2p4.jpg?s=128&g=1", "display_name": "Harald", "link": "https://stackoverflow.com/users/1747493/harald"}, "edited": false, "score": 0, "creation_date": 1472675994, "post_id": 39257005, "comment_id": 65853244, "body": "The documentation is a bit lacky with that respect, isn&#39;t it? Since that information is crucial in your case, have you considered asking OpenCV developers?"}], "answers": [{"comments": [{"owner": {"reputation": 21995, "user_id": 263061, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/7c724c96f7ec19f73245499b6169e329?s=128&d=identicon&r=PG", "display_name": "nh2", "link": "https://stackoverflow.com/users/263061/nh2"}, "edited": false, "score": 0, "creation_date": 1616180962, "post_id": 39339909, "comment_id": 117931931, "body": "Hey, unfortunately your source code link is just to the general file, and does not link a stable revision. Do you happen to know why searching isn&#39;t threadsafe? Shouldn&#39;t it be a readonly operation, thus automatically being threadsafe?"}], "tags": [], "owner": {"reputation": 1304, "user_id": 1369444, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9ef8dae26d18d224c96372d3961f3652?s=128&d=identicon&r=PG", "display_name": "undefined", "link": "https://stackoverflow.com/users/1369444/undefined"}, "is_accepted": true, "score": 4, "last_activity_date": 1473130034, "creation_date": 1473130034, "answer_id": 39339909, "question_id": 39257005, "link": "https://stackoverflow.com/questions/39257005/is-opencvflannindex-knnsearch-thread-safe/39339909#39339909", "title": "Is opencv::flann:Index knnsearch thread safe?", "body": "<p>After a day of debugging and catching a data race and reading through source code (<a href=\"https://github.com/opencv/opencv/blob/master/modules/flann/src/miniflann.cpp\" rel=\"nofollow\">here</a> ) I can conclude that <code>index.knnSearch</code> is NOT thread safe.</p>\n\n<p>Internally, <code>indexTree</code> is being updated on <code>knnSearch</code> call. I solved this issue by creating a copy of <code>index</code> for each thread (yes, it is expensive, but still faster than sequential code).</p>\n"}], "owner": {"reputation": 1304, "user_id": 1369444, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9ef8dae26d18d224c96372d3961f3652?s=128&d=identicon&r=PG", "display_name": "undefined", "link": "https://stackoverflow.com/users/1369444/undefined"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 684, "favorite_count": 0, "accepted_answer_id": 39339909, "answer_count": 1, "score": 0, "last_activity_date": 1473130034, "creation_date": 1472669637, "question_id": 39257005, "link": "https://stackoverflow.com/questions/39257005/is-opencvflannindex-knnsearch-thread-safe", "title": "Is opencv::flann:Index knnsearch thread safe?", "body": "<p>I am trying to parallelize my ML problem with flann Index. My code in nutshell looks like this:</p>\n\n<pre><code>Index index(dict, KDTreeIndexParams(TREE_NUM)); // HUGE dict, very expensive to construct -- prefer to create it once.\n#pragma omp parallel for\nfor (int i = 0; i &lt; featuresize; i++) {\n    // creating thread-local params\n    auto denseTF = index.knnSearch(&lt;thread-local params&gt;);\n    // not relevant code\n}\n</code></pre>\n\n<p>I looked up documentation <a href=\"http://docs.opencv.org/3.1.0/db/d49/classcv_1_1flann_1_1Index__.html#a737e306afc5003a01ef486d49303f682\" rel=\"nofollow\">here</a> but there is nothing about thread safety there.\nMy concern is whether this snippet is thread safe? </p>\n"}, {"tags": ["c++", "fstream"], "comments": [{"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 4, "creation_date": 1472669367, "post_id": 39256916, "comment_id": 65849739, "body": "I have a feeling this question is based on wrong choice of the reference. <a href=\"http://en.cppreference.com/w/cpp/io/basic_filebuf/open\" rel=\"nofollow noreferrer\">This</a> should be better."}, {"owner": {"reputation": 1068, "user_id": 2800918, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/77b59723cbffd9e9b6e1e1c8802f579b?s=128&d=identicon&r=PG&f=1", "display_name": "CAB", "link": "https://stackoverflow.com/users/2800918/cab"}, "edited": false, "score": 0, "creation_date": 1472670116, "post_id": 39256916, "comment_id": 65850208, "body": "<code>ios_base::out</code> is the same as <code>ios_base::out |  ios_base::trunc</code>.   I can&#39;t find a good reference link, but a google search hit on a couple of <a href=\"https://books.google.com/books?id=eC-iLe_iET8C&amp;pg=PA1124&amp;dq=Same+as+ios_base::out+%7C+ios_base::trunc.&amp;hl=en&amp;sa=X&amp;ved=0ahUKEwip8ZfRquzOAhVCGB4KHSJuD84Q6AEIHDAA#v=onepage&amp;q=Same%20as%20ios_base%3A%3Aout%20%7C%20ios_base%3A%3Atrunc.&amp;f=false\" rel=\"nofollow noreferrer\">text books</a>,"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1472670172, "post_id": 39256916, "comment_id": 65850231, "body": "As per LogicStuff&#39;s link, the ofstream ctor default is <code>out</code> which behaves the same in <code>basic_filebuf::open</code> as <code>out|trunc</code>, and therefore truncates."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1472670239, "post_id": 39256916, "comment_id": 65850278, "body": "I&#39;m voting to close this question as off-topic because the answer can be easily found from the right reference material available. (Just testing out yourself will proof)"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 1, "creation_date": 1472670308, "post_id": 39256916, "comment_id": 65850319, "body": "Sounds like this might be another case of <a href=\"http://stackoverflow.com/questions/6520052/whats-wrong-with-cplusplus-com\">what&#39;s wrong with cplusplus.com</a>, though this time it&#39;s just an omission..."}], "answers": [{"tags": [], "owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "is_accepted": true, "score": 38, "last_activity_date": 1525269591, "last_edit_date": 1525269591, "creation_date": 1472672301, "answer_id": 39257706, "question_id": 39256916, "link": "https://stackoverflow.com/questions/39256916/does-stdofstream-truncate-or-append-by-default/39257706#39257706", "title": "Does std::ofstream truncate or append by default?", "body": "<h2>The short version</h2>\n\n<p>It truncates by default.</p>\n\n<hr>\n\n<h2>The medium version</h2>\n\n<p>The standard is basically spaghetti on this, but it eventually boils down to saying that it's the equivalent of saying <code>fopen(const char*, \"w\")</code> (27.9.1.4 [filebuf.members]), which then points us towards the ISO C 7.9 standard. </p>\n\n<p>Checking that out provides us with \u00a77.19.5.3, \"The fopen function\", which specifies the behavior when \"w\" is passed:</p>\n\n<blockquote>\n  <p>w truncate to zero length or create text file for writing</p>\n</blockquote>\n\n<hr>\n\n<p><h2>The long version</h2> If you'd like to follow the spaghetti trail yourself, start with 27.9.1.11 [ofstream.cons], which describes the constructor's behavior as</p>\n\n<blockquote>\n  <p>Effects: Constructs an object of <code>class basic_ofstream&lt;charT,traits&gt;</code>, initializing the base class with\n  <code>basic_ostream(&amp;sb</code>) and initializing <code>sb</code> with <code>basic_filebuf&lt;charT,traits&gt;())</code> (27.7.3.2, 27.9.1.2),\n  then calls <code>rdbuf()-&gt;open(s, mode|ios_base::out)</code>. If that function returns a null pointer, calls\n  <code>setstate(failbit)</code>.</p>\n</blockquote>\n\n<p>Where <code>rdbuf()</code> returns <code>basic_filebuf&lt;charT,traits&gt;*</code> (27.9.1.13 [ofstream])</p>\n\n<p>Which leads us to 27.9.1.1 [filebuf], or more specifically, 27.9.1.4 [filebuf.members] , which describes the <code>open</code> function:</p>\n\n<pre><code>basic_filebuf&lt;charT,traits&gt;* open(const char* s, ios_base::openmode mode);\n</code></pre>\n\n<p>as</p>\n\n<blockquote>\n  <p>Effects: If <code>is_open() != false</code>, returns a null pointer. Otherwise, initializes the filebuf as required.\n  It then opens a file, if possible, whose name is the NTBS <code>s</code> (as if by calling <code>std::fopen(s,modstr)</code>).\n  The NTBS <code>modstr</code> is determined from <code>mode &amp; ~ios_base::ate</code> as indicated in Table 132. If mode is\n  not some combination of flags shown in the table then the open fails.</p>\n</blockquote>\n\n<p>NTBS: Null-terminated byte-string</p>\n\n<p>Table 132 describes equivalence rules between C++ <code>ios_base::openmode</code> and C-style stdio strings:</p>\n\n<blockquote>\n<pre><code><b>Table 132</b> \u2014 File open modes\n|\n|   'ios_base' flag combination   | 'stdio' equivalent |\n| binary | in | out | trunc | app |                    |\n|        |    |  +  |       |     |        \"w\"         |\n|                     etc...                           |\n</code></pre>\n</blockquote>\n\n<p>Which leads us to a footnote on the same page that states:</p>\n\n<blockquote>\n  <p>...the function signatures <code>fopen(const char*, const char*)</code> and <code>fseek(FILE*, long,\n  int)</code> are declared, in <code>&lt;cstdio&gt;</code> (27.9.2).</p>\n</blockquote>\n\n<p>Which sends us, predictably, to 27.9.2 [c.files], which provides the nearly useless Table 134, but then references the C standard:</p>\n\n<blockquote>\n  <p>See also: ISO C 7.9, Amendment 1 4.6.2.</p>\n</blockquote>\n\n<p>Which I talk about in the main portion of this answer.</p>\n"}], "owner": {"reputation": 9741, "user_id": 358475, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9bb570ac8b5da1eb35541e252f0eca99?s=128&d=identicon&r=PG", "display_name": "OldPeculier", "link": "https://stackoverflow.com/users/358475/oldpeculier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7748, "favorite_count": 3, "accepted_answer_id": 39257706, "answer_count": 1, "score": 16, "last_activity_date": 1525269591, "creation_date": 1472669295, "last_edit_date": 1472669687, "question_id": 39256916, "link": "https://stackoverflow.com/questions/39256916/does-stdofstream-truncate-or-append-by-default", "title": "Does std::ofstream truncate or append by default?", "body": "<p>If you call the <code>std::ofstream</code> constructor without <code>openmode</code> flags, the <a href=\"http://www.cplusplus.com/reference/fstream/ofstream/ofstream/\" rel=\"noreferrer\">default flag is <code>ios_base::out</code></a>. But does this imply <code>ios_base::trunc</code> or <code>ios_base::app</code>? </p>\n\n<p>In other words, if you already have a non-empty file \"past.txt\" in your file system and you call</p>\n\n<pre><code>std::ofstream stream( \"past.txt\" );\nstream &lt;&lt; \"new content\";\n</code></pre>\n\n<p>will \"new content\" be appended to the prior contents of \"past.txt\" or will it replace the prior contents?</p>\n"}, {"tags": ["c++", "matlab", "opencv", "matrix", "computer-vision"], "comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 1, "creation_date": 1472677870, "post_id": 39256684, "comment_id": 65854134, "body": "WarpPerspective with the inverse of &#39;transfo&#39; should do the trick"}, {"owner": {"reputation": 179, "user_id": 5938428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41d43213cbee37e42a437e3e7efa7862?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidGorilllla", "link": "https://stackoverflow.com/users/5938428/androidgorilllla"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1472707420, "post_id": 39256684, "comment_id": 65861882, "body": "@Miki Will I get the same quality, any tips for how can I extract only the vector lines ?"}], "owner": {"reputation": 179, "user_id": 5938428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41d43213cbee37e42a437e3e7efa7862?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidGorilllla", "link": "https://stackoverflow.com/users/5938428/androidgorilllla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1472668443, "creation_date": 1472668443, "question_id": 39256684, "link": "https://stackoverflow.com/questions/39256684/get-normal-mat-from-transformed-mat", "title": "Get normal Mat from transformed Mat", "body": "<p>I am a programmer working for a personal project, but I don't have that much experience with math. I took a Mat(matrix of pixels), and changed it's perspective so it looks better for me when I am processing the image. Now the problem is that I want to extract some lines (points from matrix) but my matrix is transformed and I have no clue how to reverse it. Maybe you can help me.\nHere are the functions that I used :</p>\n\n<pre><code>void FrameAnalyser::applyPerspective(Mat input, Mat output) {\nint alpha_ = 9.0, beta_ = 90., gamma_ = 90.;\nint f_ = 500, dist_ = 255;\n\ndouble f, dist;\ndouble alpha, beta, gamma;\nalpha = ((double)alpha_ - 90.)*PI / 180;\nbeta = ((double)beta_ - 90.)*PI / 180;\ngamma = ((double)gamma_ - 90.)*PI / 180;\nf = (double)f_;\ndist = (double)dist_;\n\nSize taille = input.size();\ndouble w = (double)taille.width, h = (double)taille.height;\n\n// Projection 2D -&gt; 3D matrix\nMat A1 = (Mat_&lt;double&gt;(4, 3) &lt;&lt;\n    1, 0, -w / 2,\n    0, 1, -h / 2,\n    0, 0, 0,\n    0, 0, 1);\n\n// Rotation matrices around the X,Y,Z axis\nMat RX = (Mat_&lt;double&gt;(4, 4) &lt;&lt;\n    1, 0, 0, 0,\n    0, cos(alpha), -sin(alpha), 0,\n    0, sin(alpha), cos(alpha), 0,\n    0, 0, 0, 1);\n\nMat RY = (Mat_&lt;double&gt;(4, 4) &lt;&lt;\n    cos(beta), 0, -sin(beta), 0,\n    0, 1, 0, 0,\n    sin(beta), 0, cos(beta), 0,\n    0, 0, 0, 1);\n\nMat RZ = (Mat_&lt;double&gt;(4, 4) &lt;&lt;\n    cos(gamma), -sin(gamma), 0, 0,\n    sin(gamma), cos(gamma), 0, 0,\n    0, 0, 1, 0,\n    0, 0, 0, 1);\n\n// Composed rotation matrix with (RX,RY,RZ)\nMat R = RX * RY * RZ;\n\n// Translation matrix on the Z axis change dist will change the height\nMat T = (Mat_&lt;double&gt;(4, 4) &lt;&lt;\n    1, 0, 0, 0,\n    0, 1, 0, 0,\n    0, 0, 1, dist,\n    0, 0, 0, 1);\n\n// Camera Intrisecs matrix 3D -&gt; 2D\nMat A2 = (Mat_&lt;double&gt;(3, 4) &lt;&lt;\n    f, 0, w / 2, 0,\n    0, f, h / 2, 0,\n    0, 0, 1, 0);\n\n// Final and overall transformation matrix\nMat transfo = A2 * (T * (R * A1));\n\n// Apply matrix transformation\nwarpPerspective(input, output, transfo, taille, INTER_CUBIC | WARP_INVERSE_MAP);\n}\n</code></pre>\n"}, {"tags": ["c++", "linked-list"], "answers": [{"tags": [], "owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "is_accepted": false, "score": 1, "last_activity_date": 1472670747, "last_edit_date": 1472670747, "creation_date": 1472669306, "answer_id": 39256921, "question_id": 39256660, "link": "https://stackoverflow.com/questions/39256660/swapping-adjacent-nodes-in-a-linked-list-iterative-approach/39256921#39256921", "title": "Swapping adjacent nodes in a Linked List (Iterative Approach)", "body": "<p>There are several problems, you don't check if <code>head</code> or <code>head-&gt;next</code> are NULL. Then you don't check if <code>curr = prev -&gt; next;</code> is NULL, which is a problem if the number of nodes is not even.</p>\n\n<p>Even so, the algorithm is flawed, the first exchange is correct, but every subsequent will fail because the node that is pointing to the first node, of the two that will be exchanged, is not updated.</p>\n\n<p>I suggest you swap the values of the nodes, which is much simpler, as the members <code>next</code> won't have to be modified.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 6780039, "user_type": "registered", "profile_image": "https://graph.facebook.com/1164945220233808/picture?type=large", "display_name": "Tushar Lamba", "link": "https://stackoverflow.com/users/6780039/tushar-lamba"}, "edited": false, "score": 0, "creation_date": 1472748486, "post_id": 39257405, "comment_id": 65888483, "body": "Thanks for the suggestion"}], "tags": [], "owner": {"reputation": 108, "user_id": 5309733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b9a1bfc1d3dae8a7c3c625a47a9a851?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit Vachhani", "link": "https://stackoverflow.com/users/5309733/mohit-vachhani"}, "is_accepted": false, "score": 0, "last_activity_date": 1472671039, "creation_date": 1472671039, "answer_id": 39257405, "question_id": 39256660, "link": "https://stackoverflow.com/questions/39256660/swapping-adjacent-nodes-in-a-linked-list-iterative-approach/39257405#39257405", "title": "Swapping adjacent nodes in a Linked List (Iterative Approach)", "body": "<p>First off all there is not need to change the link just swap the value of that node with the next node.Because as per your question you just need to swap the value not the node so I don't think changing the link would be a great idea so I would recommend you to just swap the value of the node and then you are good to go.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 6780039, "user_type": "registered", "profile_image": "https://graph.facebook.com/1164945220233808/picture?type=large", "display_name": "Tushar Lamba", "link": "https://stackoverflow.com/users/6780039/tushar-lamba"}, "edited": false, "score": 0, "creation_date": 1472980494, "post_id": 39303321, "comment_id": 65962885, "body": "Thanx for the solution..it works for the odd no. of elements but not when no. of nodes is even. I&#39;ll figure that part by myself..thnx"}, {"owner": {"reputation": 9645, "user_id": 1465553, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5b559f395549789c041652429444dc0a?s=128&d=identicon&r=PG", "display_name": "Saurav Sahu", "link": "https://stackoverflow.com/users/1465553/saurav-sahu"}, "reply_to_user": {"reputation": 11, "user_id": 6780039, "user_type": "registered", "profile_image": "https://graph.facebook.com/1164945220233808/picture?type=large", "display_name": "Tushar Lamba", "link": "https://stackoverflow.com/users/6780039/tushar-lamba"}, "edited": false, "score": 0, "creation_date": 1472996837, "post_id": 39303321, "comment_id": 65967125, "body": "It works for both Odd and Even number of nodes. Tested for number of nodes: N = 0, 1, 2, 3, 4, 5..I guess that is enough for testing.Check it out : <a href=\"http://ideone.com/2zqWOA\" rel=\"nofollow noreferrer\">ideone.com/2zqWOA</a>"}], "tags": [], "owner": {"reputation": 9645, "user_id": 1465553, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5b559f395549789c041652429444dc0a?s=128&d=identicon&r=PG", "display_name": "Saurav Sahu", "link": "https://stackoverflow.com/users/1465553/saurav-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1473151402, "last_edit_date": 1473151402, "creation_date": 1472877967, "answer_id": 39303321, "question_id": 39256660, "link": "https://stackoverflow.com/questions/39256660/swapping-adjacent-nodes-in-a-linked-list-iterative-approach/39303321#39303321", "title": "Swapping adjacent nodes in a Linked List (Iterative Approach)", "body": "<p>If the requirement <em>prohibits</em> to just swap the adjacent <em>values</em>(which is much easier to do because it does not require any breakage or new linkage formation between nodes), and instead wants the actual adjacent <em>nodes</em> to be swapped, you need to <strong>keep note of the <em>tail</em></strong> of the lastly swapped adjacent nodes <em>all the time</em>. </p>\n\n<pre><code>listnode* swapPairs(listnode* head) {\n    listnode *prev = head;    \n    listnode *curr;\n    listnode *next = null, *tail = null;      \n    while(prev != null &amp;&amp; prev-&gt;next != null) {\n        curr = prev-&gt;next;\n        next = curr-&gt;next;      \n        curr-&gt;next = prev;\n        if(tail != null) tail-&gt;next = curr;\n        else head = curr; //First two nodes are swapped. First node (previously second node) will be new head\n        tail = prev;      //Tail of lastly swapped nodes i.e. previously first one of them \n        prev = next;      //Swapping done between curr and pre, now move to next node \n    }\n    if(tail != null) {\n       tail-&gt;next = next; \n    }\n    return head;  \n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6780039, "user_type": "registered", "profile_image": "https://graph.facebook.com/1164945220233808/picture?type=large", "display_name": "Tushar Lamba", "link": "https://stackoverflow.com/users/6780039/tushar-lamba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1473151402, "creation_date": 1472668341, "question_id": 39256660, "link": "https://stackoverflow.com/questions/39256660/swapping-adjacent-nodes-in-a-linked-list-iterative-approach", "title": "Swapping adjacent nodes in a Linked List (Iterative Approach)", "body": "<p>Question explanation:\nI have to swap adjacent pairs like this:<br/>\n<strong>Input</strong>: 1 -> 2 -> 3 -> 4 -> 5 -> NULL<br/>\n<strong>Output</strong>: 2 -> 1 -> 4 -> 3 -> 5 -> NULL<br/>\nThis code is giving segmentation fault. Also, I wanna know whether this logic is correct or not?</p>\n\n<pre><code>listnode* swapPairs(listnode* head) {\n    /* corner cases not included, don't bother */\n    listnode *prev = head;    //points to first node\n    listnode *curr = prev -&gt; next;      //points to second\n    head = curr;    //displacing head to the second element of list\n    listnode *next;      //points to next of second\n    while(curr != NULL || prev != NULL) {\n        next = curr -&gt; next;      \n        curr -&gt; next = prev;\n        prev -&gt; next = next;\n        prev = next;\n        curr = prev -&gt; next;\n    }\n    return head;   \n</code></pre>\n"}, {"tags": ["c++", "c", "gcc", "attributes", "extern-c"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1472668197, "post_id": 39256563, "comment_id": 65849058, "body": "@iharob: It could call into external Fortran code, which could throw."}, {"owner": {"reputation": 31438, "user_id": 908939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/etRsI.jpg?s=128&g=1", "display_name": "Trevor Hickey", "link": "https://stackoverflow.com/users/908939/trevor-hickey"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1472668198, "post_id": 39256563, "comment_id": 65849061, "body": "@iharob Exactly.  So the compiler should optimize just the same with or without the attribute?  I wasn&#39;t sure if there were some subtleties with libraries, or if C code could call back into C++, etc."}, {"owner": {"reputation": 31438, "user_id": 908939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/etRsI.jpg?s=128&g=1", "display_name": "Trevor Hickey", "link": "https://stackoverflow.com/users/908939/trevor-hickey"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1472668302, "post_id": 39256563, "comment_id": 65849114, "body": "@KerrekSB So &quot;extern C&quot; does not guarantee &quot;no throw&quot;.  A function can still throw if it is wrapped in &quot;extern C&quot;.  That makes sense."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1472669038, "post_id": 39256563, "comment_id": 65849538, "body": "<code>extern &quot;C&quot;</code> can call straight into C++ code marked as <code>extern &quot;C&quot;</code>.  So the questions becomes can exceptions propagate out of a C++ function marked as <code>extern &quot;C&quot;</code>?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1472671063, "post_id": 39256563, "comment_id": 65850744, "body": "I feel very stupid. I myself wrote a c++ plugin system which of course used c to construct classes. Contructors can throw and I used <code>new</code> of course, so it&#39;s not redundant at ll. In fact you can externalize any c++ function and use <i>stl</i>, the <code>new</code> operator (<i>which does throw exceptions</i>). The only thing <code>extern &quot;C&quot;</code> does is prevent name mangling."}], "answers": [{"tags": [], "owner": {"reputation": 4569, "user_id": 1282773, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/GFxGD.jpg?s=128&g=1", "display_name": "ivaigult", "link": "https://stackoverflow.com/users/1282773/ivaigult"}, "is_accepted": true, "score": 0, "last_activity_date": 1472669176, "creation_date": 1472669176, "answer_id": 39256888, "question_id": 39256563, "link": "https://stackoverflow.com/questions/39256563/does-it-make-sense-to-use-attribute-nothrow-inside-extern-c/39256888#39256888", "title": "Does it make sense to use _attribute__ ((nothrow)) inside extern C?", "body": "<p>Yes, it does. From gcc documentation:</p>\n\n<blockquote>\n  <p>For example, most functions in the standard C library can be\n  guaranteed not to throw an exception with the notable exceptions of\n  qsort and bsearch that take function pointer arguments.</p>\n</blockquote>\n"}], "owner": {"reputation": 31438, "user_id": 908939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/etRsI.jpg?s=128&g=1", "display_name": "Trevor Hickey", "link": "https://stackoverflow.com/users/908939/trevor-hickey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 39256888, "answer_count": 1, "score": 4, "last_activity_date": 1472669176, "creation_date": 1472668013, "question_id": 39256563, "link": "https://stackoverflow.com/questions/39256563/does-it-make-sense-to-use-attribute-nothrow-inside-extern-c", "title": "Does it make sense to use _attribute__ ((nothrow)) inside extern C?", "body": "<p>I have some C code being called from C++.<br>\nThe header resembles the following:  </p>\n\n<pre><code>#ifndef CLibH\n#define CLibH\n\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n\n//C API\nvoid foo(void);\n// ...\n\n#ifdef __cplusplus\n}\n#endif\n\n#endif\n</code></pre>\n\n<p>Since I'm already using <code>extern C</code>,<br>\nis there any benefit to adding the <code>nothrow</code> compiler attribute?</p>\n\n<pre><code>#ifndef CLibH\n#define CLibH\n\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n\n//C API\nvoid foo(void) __attribute__((nothrow));\n// ...\n\n#ifdef __cplusplus\n}\n#endif\n\n#endif\n</code></pre>\n\n<p>Does <code>extern C</code> make this redundant?<br>\nAre there still advantages to applying it under these circumstances?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1472667507, "post_id": 39256416, "comment_id": 65848699, "body": "So what is the problem?  The dummy code or your actual code?  If the actual code has a problem where and what is it?"}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1472667544, "post_id": 39256416, "comment_id": 65848720, "body": "<code>ar = &quot;hello&quot;</code> is a syntax error.  Try <code>strcpy</code>"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 3, "creation_date": 1472667917, "post_id": 39256416, "comment_id": 65848895, "body": "&quot;The type of ar has to be char[100]&quot; Only if your professor or TA says so, otherwise there&#39;s no reason to use a bare char array."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1472668011, "post_id": 39256416, "comment_id": 65848939, "body": "Totally agree about the professor TA saying this to you as a &quot;reason&quot; (in quotes as you see).  Or the other reason is that you just believe that you can only do whatever you want to do with a char array?"}], "answers": [{"tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 6, "last_activity_date": 1472667533, "creation_date": 1472667533, "answer_id": 39256460, "question_id": 39256416, "link": "https://stackoverflow.com/questions/39256416/c-char100-hello-doesnt-work/39256460#39256460", "title": "C++ char[100] = &quot;hello&quot; doesn&#39;t work", "body": "<p>Use the <code>strcpy</code> function to copy a C-style string.</p>\n\n<pre><code>strcpy(ar, \"hello\");\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 2, "creation_date": 1472668219, "post_id": 39256498, "comment_id": 65849067, "body": "This is bad advice. See <a href=\"http://blog.liw.fi/posts/strncpy/\" rel=\"nofollow noreferrer\">here</a>, among other places. The <code>strncpy</code> function was meant for fixed-length structures inside other structures, not for C-style strings."}, {"owner": {"reputation": 3184, "user_id": 447599, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/16869820699afa8b6b6d358e9234f1d7?s=128&d=identicon&r=PG", "display_name": "Jules G.M.", "link": "https://stackoverflow.com/users/447599/jules-g-m"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1472668776, "post_id": 39256498, "comment_id": 65849370, "body": "i agree that c strings are crappy as the article implies, but strncpy is still better than just strcpy. that&#39;s like saying you should not use a seatbelt because only airbags are safe. seat belts are still better than no seat belt."}, {"owner": {"reputation": 358, "user_id": 6779860, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ff36a0f95a85d0007359761b99e9ce12?s=128&d=identicon&r=PG&f=1", "display_name": "Volker Wei&#223;mann", "link": "https://stackoverflow.com/users/6779860/volker-wei%c3%9fmann"}, "edited": false, "score": 1, "creation_date": 1472671181, "post_id": 39256498, "comment_id": 65850802, "body": "Thank you, but shouldn&#39;t it be strncpy(str2, str1, str2bufsize) instead of len(str1)? In my example:  strncpy(toStringBuf, &quot;buffer too small&quot;, TO_STRING_BUF_SIZE) ;"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1472679056, "post_id": 39256498, "comment_id": 65854638, "body": "@Julius Your answer is being read by someone who doesn&#39;t know how to use <code>strcpy</code>. They&#39;re not going to get that nuance unless you tell them."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1472692998, "post_id": 39256498, "comment_id": 65858510, "body": "So when copying that error message with <code>strncpy</code>, if the buffer is too small you get an unterminated string. How, exactly, is that &quot;safe&quot;?"}, {"owner": {"reputation": 3184, "user_id": 447599, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/16869820699afa8b6b6d358e9234f1d7?s=128&d=identicon&r=PG", "display_name": "Jules G.M.", "link": "https://stackoverflow.com/users/447599/jules-g-m"}, "edited": false, "score": 0, "creation_date": 1472693505, "post_id": 39256498, "comment_id": 65858617, "body": "it&#39;s better than allowing a user to overwrite the memory outside of the bounds of the buffer. it just crashes, instead of allowing the user to place arbitrary bits into your (server&#39;s?) memory"}, {"owner": {"reputation": 3184, "user_id": 447599, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/16869820699afa8b6b6d358e9234f1d7?s=128&d=identicon&r=PG", "display_name": "Jules G.M.", "link": "https://stackoverflow.com/users/447599/jules-g-m"}, "edited": false, "score": 0, "creation_date": 1472693829, "post_id": 39256498, "comment_id": 65858682, "body": "also Pete Becker, the constant string was edited in by a mod"}, {"owner": {"reputation": 3184, "user_id": 447599, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/16869820699afa8b6b6d358e9234f1d7?s=128&d=identicon&r=PG", "display_name": "Jules G.M.", "link": "https://stackoverflow.com/users/447599/jules-g-m"}, "edited": false, "score": 0, "creation_date": 1472693878, "post_id": 39256498, "comment_id": 65858692, "body": "&amp; I added a null character at the end"}], "tags": [], "owner": {"reputation": 3184, "user_id": 447599, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/16869820699afa8b6b6d358e9234f1d7?s=128&d=identicon&r=PG", "display_name": "Jules G.M.", "link": "https://stackoverflow.com/users/447599/jules-g-m"}, "is_accepted": true, "score": -1, "last_activity_date": 1472693767, "last_edit_date": 1472693767, "creation_date": 1472667722, "answer_id": 39256498, "question_id": 39256416, "link": "https://stackoverflow.com/questions/39256416/c-char100-hello-doesnt-work/39256498#39256498", "title": "C++ char[100] = &quot;hello&quot; doesn&#39;t work", "body": "<p>Use <code>strncpy()</code>, eg:</p>\n\n<pre><code>strncpy(toStringBuf, str_buf, TO_STRING_BUF_SIZE);\ntoStringBuf[TO_STRING_BUF_SIZE-1] = 0;\n</code></pre>\n\n<p>Don't use <code>strcpy()</code>, as it is one of the most classically well-known unsafe functions in C/C++.  It can write past the end of the buffer, causing buffer overflow errors.  Not a problem in your particular example, but it should still be avoided in general.</p>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 0, "last_activity_date": 1472680647, "last_edit_date": 1472680647, "creation_date": 1472680307, "answer_id": 39259564, "question_id": 39256416, "link": "https://stackoverflow.com/questions/39256416/c-char100-hello-doesnt-work/39259564#39259564", "title": "C++ char[100] = &quot;hello&quot; doesn&#39;t work", "body": "<p>As others have stated, you can use <code>strcpy()</code>/<code>strncpy()</code> to copy a string into a <code>char[]</code> buffer.</p>\n\n<p>However, that is not actually necessary in this example.  Your function returns a <code>std::string</code>, so you don't actually need a <code>char[]</code> at all.  It is a waste of memory for short messages, a limitation for long messages, and a thread-unsafe condition (unless you use a local buffer instead of a global buffer).  Try this instead:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;cstdarg&gt;\n\nstd::string toCptr_(const char * format, ...)\n{\n    std::string str;\n\n    va_list argzeiger;\n    va_start(argzeiger, format);\n\n    int ret = vsnprintf(NULL, 0, format, argzeiger);\n    if (ret &lt; 0) {\n        str = \"encoding error\";\n    }\n    else {\n        str.resize(ret+1);\n        vsnprintf(&amp;str[0], str.size(), format, argzeiger);\n        str.resize(ret);\n    }\n\n    va_end(argzeiger);\n\n    return str;\n}\n</code></pre>\n\n<p>Or, at the very least:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;cstdarg&gt;\n\n#define TO_STRING_BUF_SIZE 100\n\nstd::string toCptr_(const char * format, ...)\n{\n    char toStringBuf[TO_STRING_BUF_SIZE];\n    std::string str;\n\n    va_list argzeiger;\n    va_start(argzeiger, format);\n\n    int ret = vsnprintf(toStringBuf, TO_STRING_BUF_SIZE, format, argzeiger);\n    if (ret &lt; 0) {\n        str = \"encoding error\";\n    }\n    else if (ret &lt; TO_STRING_BUF_SIZE) {\n        str.assign(toStringBuf, ret);\n    }\n    else {\n        str.resize(ret+1);\n        vsnprintf(&amp;str[0], str.size(), format, argzeiger);\n        str.resize(ret);\n    }\n\n    va_end(argzeiger);\n\n    return str;\n}\n</code></pre>\n"}], "owner": {"reputation": 358, "user_id": 6779860, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ff36a0f95a85d0007359761b99e9ce12?s=128&d=identicon&r=PG&f=1", "display_name": "Volker Wei&#223;mann", "link": "https://stackoverflow.com/users/6779860/volker-wei%c3%9fmann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 273, "favorite_count": 0, "accepted_answer_id": 39256498, "answer_count": 3, "score": 0, "last_activity_date": 1472693767, "creation_date": 1472667351, "last_edit_date": 1472679678, "question_id": 39256416, "link": "https://stackoverflow.com/questions/39256416/c-char100-hello-doesnt-work", "title": "C++ char[100] = &quot;hello&quot; doesn&#39;t work", "body": "<p>Is there a better, shorter, easier to read version of the following code:</p>\n\n<pre><code>char ar[100];\n\nint main() {\n    //ar = \"hello\"; doesn't compile\n    ar[0] = 'h';\n    ar[1] = 'e';\n    ar[2] = 'l';\n    ar[3] = 'l';\n    ar[4] = 'o';\n    ar[5] = '\\x00';\n    return 0;\n}\n</code></pre>\n\n<p>Note: The type of <code>ar</code> has to be <code>char[100]</code>.\nThe \"real\" program is:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;cstdarg&gt;\n\n#define TO_STRING_BUF_SIZE 100\n\nchar toStringBuf[TO_STRING_BUF_SIZE];\n\nstd::string toCptr_(const char * format, ...) {\n  va_list argzeiger;\n  va_start(argzeiger, format);\n  int16_t ret = vsnprintf(toStringBuf, TO_STRING_BUF_SIZE, format, argzeiger);\n  if(ret &gt;= TO_STRING_BUF_SIZE - 1) {\n    //toStringBuf = \"buffer too small\";\n  } else if(ret &lt; 0) {\n    //toStringBuf = \"encoding error\";\n  }\n  va_end(argzeiger);\n  std::string returning(toStringBuf);\n  return returning;\n}\n</code></pre>\n"}, {"tags": ["c++", "sdl-2", "sdl-ttf"], "comments": [{"owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 0, "creation_date": 1472725151, "post_id": 39256371, "comment_id": 65872155, "body": "Closing font and using it to render text immediately after is surely wrong. RenderPresent is in <code>placeText</code>? Then if you don&#39;t call it, how is you see anything drawn at all? Calling <code>TTF_Init</code> multiple times (and worse, <code>atexit</code>) is not a good idea either."}, {"owner": {"reputation": 9, "user_id": 6614566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13e5148fc26424f2e01ebe03d7c04012?s=128&d=identicon&r=PG&f=1", "display_name": "Far", "link": "https://stackoverflow.com/users/6614566/far"}, "reply_to_user": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 0, "creation_date": 1472756327, "post_id": 39256371, "comment_id": 65892638, "body": "Thanks, removing TTF_CloseFont(Arial) fixed the problem."}], "owner": {"reputation": 9, "user_id": 6614566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13e5148fc26424f2e01ebe03d7c04012?s=128&d=identicon&r=PG&f=1", "display_name": "Far", "link": "https://stackoverflow.com/users/6614566/far"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 208, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1472667779, "creation_date": 1472667198, "last_edit_date": 1472667779, "question_id": 39256371, "link": "https://stackoverflow.com/questions/39256371/ttf-text-does-not-appear-when-implemented-using-sdl-renderer", "title": "TTF text does not appear when implemented using SDL_Renderer", "body": "<p>The following code compiles and generates <code>BACKGROUND_TEXTURE</code>, however fails to display text <code>Message</code>. When I call <code>placeText</code> function before <code>BACKGROUND_TEXTURE</code>, the graphics window appears to flicker with a white backdrop. I don't know what I have to do for the <code>Message</code> text to appear. By the way, <code>Image.png</code> appears as it is supposed to.</p>\n\n<pre><code>internal const int SCREEN_WIDTH = 1481; //1024;\ninternal const int SCREEN_HEIGHT = 865; //768;\ninternal char *imageNames[] = {(char *)\"Image.png\",\n                               (char *)\"GSAEV.bmp\",\n                               (char *)\"RSAEV.bmp\",\n                               (char *)\"SPerson.bmp\",\n                               (char *)\"NPerson.bmp\"};\ninternal Dimensions imageDims[] = {{0, 0}, {30, 40}, {30, 40}, {30, 40},\n                                   {22, 30}};\ninternal bool\nsdl2Init(SDL_Renderer **renderer)\n        gWindow = SDL_CreateWindow(\"Ridesharing Visualization: (2016)\",\n                                   SDL_WINDOWPOS_UNDEFINED,\n                                   SDL_WINDOWPOS_UNDEFINED,\n                                   SCREEN_WIDTH, SCREEN_HEIGHT,\n                                   SDL_WINDOW_SHOWN);\nint imgFlags = IMG_INIT_PNG;\n               *renderer = SDL_CreateRenderer(gWindow, -1,\n                                               SDL_RENDERER_ACCELERATED |\n                                               SDL_RENDERER_PRESENTVSYNC);\nSDL_SetRenderDrawColor(vehicleState-&gt;renderer, 0xFF, 0xFF, 0xFF, 0xFF);\n    SDL_RenderClear(vehicleState-&gt;renderer);\n    SDL_RenderCopy(vehicleState-&gt;renderer,\n                   vehicleState-&gt;images[BACKGROUND_TEXTURE].texture, 0, 0);\n\nplaceText(vehicleState-&gt;renderer);\n\n// NOTE: places text\ninline void\nplaceText(SDL_Renderer *renderer)\n{\n   // Initialize SDL_ttf library\n   if ( TTF_Init() == -1 )\n   {\n   printf( \"SDL_ttf could not initialize! SDL_TTF Error: %s\\n\", TTF_GetError() );\n   } else {\n    // Load font\n    TTF_Font* Arial = TTF_OpenFont(\"arial.TTF\", 24); //this opens a font style and sets a size\n\n    TTF_CloseFont(Arial);\n\n    SDL_Color Black = { 0, 0, 0, 0xFF };  \n    // Write text to surface\n    SDL_Surface* surfaceMessage = TTF_RenderText_Solid(Arial, \"put your text here\", Black); \n    // Convert surface to texture\n    SDL_Texture* Message = SDL_CreateTextureFromSurface(renderer, surfaceMessage); \n    // Free Surface\n    SDL_FreeSurface(surfaceMessage); // we got the texture now -&gt; free surface\n\n    SDL_Rect Message_rect; //create a rect\n    Message_rect.x = 10;  //controls the rect's x coordinate\n    Message_rect.y = 10; // controls the rect's y coordinte\n    Message_rect.w = 100; // controls the width of the rect\n    Message_rect.h = 100; // controls the height of the rect\n\n    SDL_RenderCopy(renderer, Message, NULL, &amp;Message_rect);\n\n    SDL_RenderPresent(renderer);\n//    SDL_Delay(500);\n\n    SDL_DestroyTexture(Message);\n   }\n    atexit(TTF_Quit); // Ensure TTF_Quit() is called when we exit\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "unit-testing", "cpputest"], "comments": [{"owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 0, "creation_date": 1472667273, "post_id": 39255726, "comment_id": 65848599, "body": "you need to show (at least excerpts of) the part where you define method1 and how you #include the various headers into the sources"}, {"owner": {"reputation": 63, "user_id": 6776433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d81754afd7fd1c9b34a171a92693a6a7?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/6776433/jeffrey"}, "reply_to_user": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 0, "creation_date": 1472667562, "post_id": 39255726, "comment_id": 65848726, "body": "@TemplateRex added includes. method1 is just any old method in the driver1.c file with a declaration in the driver1.h file."}, {"owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 0, "creation_date": 1472668190, "post_id": 39255726, "comment_id": 65849051, "body": "you can&#39;t add another <code>method1()</code> in driver2.cpp and link it together with driver2.cpp into the test driver. If you want to mock, you should tell CMake not to compile driver1.cpp as a dependency for test_driver2.cpp"}, {"owner": {"reputation": 63, "user_id": 6776433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d81754afd7fd1c9b34a171a92693a6a7?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/6776433/jeffrey"}, "reply_to_user": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 0, "creation_date": 1472668339, "post_id": 39255726, "comment_id": 65849135, "body": "And how would one go about doing that?"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 1, "creation_date": 1472668433, "post_id": 39255726, "comment_id": 65849187, "body": "Why can&#39;t you have two different builds, one that includes the problematic header and one that doesn&#39;t? Inclusion of the header can be controlled by make."}, {"owner": {"reputation": 63, "user_id": 6776433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d81754afd7fd1c9b34a171a92693a6a7?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/6776433/jeffrey"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1472668648, "post_id": 39255726, "comment_id": 65849301, "body": "@2501, the problem is that this is a much bigger network of drivers and tests that I&#39;m working with and it would be nice to have a general solution that can work for this example above because this is what I am having problems with. Also, including the header is not the problem, it&#39;s the double definition, although it seems as if we&#39;re on the right track so far."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 6776433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d81754afd7fd1c9b34a171a92693a6a7?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/6776433/jeffrey"}, "edited": false, "score": 0, "creation_date": 1472668895, "post_id": 39256697, "comment_id": 65849431, "body": "Thanks! I&#39;ll add the ability for my python build script to just run all executables in the directory instead of just tests.exe, so that I can have multiple builds, like 2501 mentioned. Will come back with +1&#39;s and accepted answers if I can get this change in."}, {"owner": {"reputation": 63, "user_id": 6776433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d81754afd7fd1c9b34a171a92693a6a7?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/6776433/jeffrey"}, "edited": false, "score": 0, "creation_date": 1472671119, "post_id": 39256697, "comment_id": 65850770, "body": "+1 Works great! The thing that I was missing was just having multiple compilation units for each test, which is much easier than trying to get them all into one."}, {"owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "reply_to_user": {"reputation": 63, "user_id": 6776433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d81754afd7fd1c9b34a171a92693a6a7?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/6776433/jeffrey"}, "edited": false, "score": 0, "creation_date": 1472671446, "post_id": 39256697, "comment_id": 65850941, "body": "@Jeffrey great to have been of help"}], "tags": [], "owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "is_accepted": true, "score": 3, "last_activity_date": 1472668818, "last_edit_date": 1472668818, "creation_date": 1472668476, "answer_id": 39256697, "question_id": 39255726, "link": "https://stackoverflow.com/questions/39255726/cpputest-unit-testing-framework-multiple-definition-exception/39256697#39256697", "title": "CppUTest Unit Testing Framework Multiple Definition Exception", "body": "<p>If you want to mock <code>method1</code> from <code>driver1.h</code>, just add the mocked definition in a separate mock_driver1.cpp and then in your CMakeLists.txt:</p>\n\n<pre><code>add_executable(target1 test_driver1.cpp driver1.cpp)\nadd_executable(target2 test_driver2.cpp driver2.cpp mock_driver1.cpp)\n</code></pre>\n\n<p>Once you are done mocking, replace the <code>mock_driver1.cpp</code> dependency with <code>driver1.cpp</code>.</p>\n\n<p>This all assumes you have a separate executable for each test driver. </p>\n\n<p>However, if you want to have one big main program where all drivers are linked together, then you cannot have both the real <code>method1</code> and the mocked <code>method1</code> co-exist together. For that, I'd recommend wrapping the mocked <code>method1</code> in a namespace <code>mock</code> or something like that, and only call <code>mock::test1</code> in test_driver2.cpp.</p>\n"}], "owner": {"reputation": 63, "user_id": 6776433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d81754afd7fd1c9b34a171a92693a6a7?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/6776433/jeffrey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1247, "favorite_count": 0, "accepted_answer_id": 39256697, "answer_count": 1, "score": 6, "last_activity_date": 1472668818, "creation_date": 1472664806, "last_edit_date": 1472667519, "question_id": 39255726, "link": "https://stackoverflow.com/questions/39255726/cpputest-unit-testing-framework-multiple-definition-exception", "title": "CppUTest Unit Testing Framework Multiple Definition Exception", "body": "<p>I will try to make this a purely minimal example to be as applicable to as many people as possible as well as protect any sort of code sharing that might violate an NDA. Hope this is okay!</p>\n\n<p>I am using CppUTest and CppUMock (compiling with gcc/g++ and makefiles created with CMake) in conjunction with Gitlab Continuous Integration software to create a unit testing environment for future commits and release of software. However, I have run into a bit of a problem. Let's say I have the following folder setup (that I have minimal ability to change, other than the contents of the /tests folder):</p>\n\n<pre><code>+-- src\n    +-- driver1.c\n    +-- driver2.c\n+-- inc\n    +-- driver1.h\n    +-- driver2.h\n+-- tests\n    +-- test_driver1.cpp\n    +-- test_driver2.cpp\n    +-- main.cpp\n    +-- cmakelists.txt\n</code></pre>\n\n<p>The CMakeLists file will contain including of the inc folder, compilation of the src folder, and compilation of the tests folder. However, let's say that driver2.c relies on methods defined by driver1.c. This is fine if there is no mocking setup because you can just test the results of calls to driver2's methods normally. However, say that I want to mock driver1's method1 function so that I can check that driver2 calls method1 correctly (using CppUMock). This would usually be fine, if driver1 wasn't being compiled, but adding something like so to the test_driver2.cpp file:</p>\n\n<pre><code>void method1(int n) {\n    mock().actualCall(\"method1\").withParameter(\"n\", n);\n}\n</code></pre>\n\n<p>Will cause a collision with the actual method1 in driver1.c with a linker error like so:</p>\n\n<pre><code>CMakeFiles/Tests.dir/.../src/driver1.c:(.text+0x11d): multiple definition of 'method1'\nCMakeFiles/Tests.dir/.../src/test_driver2.cpp:(.text+0x0): first defined here\n</code></pre>\n\n<p>As per request of the commenter, here is what the include structure is like:</p>\n\n<pre><code>driver1.c includes driver1.h (obviously)\ndriver2.c includes driver2.h (obviously)\ndriver2.h includes driver1.h (for calling method1)\ntest cpp files include their respective .h files\n(test_driver1.cpp -&gt; driver1.h and test_driver2.cpp -&gt; driver2.h)\n</code></pre>\n\n<p>method1 is declared in driver1.h and defined in driver1.c. I am not able to edit these files.</p>\n\n<p>I'm happy to add details as requested.</p>\n\n<p>What is the best way to get around this mocking issue?</p>\n"}, {"tags": ["c++", "gdb", "mex"], "comments": [{"owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "edited": false, "score": 0, "creation_date": 1472666765, "post_id": 39255612, "comment_id": 65848311, "body": "Can we see your code? A minimal example is needed to reproduce your problem."}], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 6779882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc288336cec4adf5797df8790bc1efdb?s=128&d=identicon&r=PG&f=1", "display_name": "delhi_loafer", "link": "https://stackoverflow.com/users/6779882/delhi-loafer"}, "edited": false, "score": 1, "creation_date": 1472670923, "post_id": 39256342, "comment_id": 65850668, "body": "Thank you! The problem is not just with round(). I could reproduce with other functions such as pow()"}, {"owner": {"reputation": 2173, "user_id": 6577680, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BNh_9G6Q-1M/AAAAAAAAAAI/AAAAAAAAAA8/uTxVAAioLfw/photo.jpg?sz=128", "display_name": "Matthew Fisher", "link": "https://stackoverflow.com/users/6577680/matthew-fisher"}, "reply_to_user": {"reputation": 99, "user_id": 6779882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc288336cec4adf5797df8790bc1efdb?s=128&d=identicon&r=PG&f=1", "display_name": "delhi_loafer", "link": "https://stackoverflow.com/users/6779882/delhi-loafer"}, "edited": false, "score": 0, "creation_date": 1472671519, "post_id": 39256342, "comment_id": 65850983, "body": "(gdb) p pow $2 = {&lt;text variable, no debug info&gt;} 0x7ffff77f6990 &lt;__pow&gt; (gdb) p __pow $3 = {double (double, double)} 0x7ffff77f6990 &lt;__pow&gt; Yes, I see the same issue there"}, {"owner": {"reputation": 99, "user_id": 6779882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc288336cec4adf5797df8790bc1efdb?s=128&d=identicon&r=PG&f=1", "display_name": "delhi_loafer", "link": "https://stackoverflow.com/users/6779882/delhi-loafer"}, "edited": false, "score": 0, "creation_date": 1472671878, "post_id": 39256342, "comment_id": 65851178, "body": "Of course. Thanks again!"}], "tags": [], "owner": {"reputation": 2173, "user_id": 6577680, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BNh_9G6Q-1M/AAAAAAAAAAI/AAAAAAAAAA8/uTxVAAioLfw/photo.jpg?sz=128", "display_name": "Matthew Fisher", "link": "https://stackoverflow.com/users/6577680/matthew-fisher"}, "is_accepted": true, "score": 4, "last_activity_date": 1472667075, "creation_date": 1472667075, "answer_id": 39256342, "question_id": 39255612, "link": "https://stackoverflow.com/questions/39255612/gdb-prints-arbitrary-values-when-round-function-called-during-debugging-a-c/39256342#39256342", "title": "GDB prints arbitrary values when round() function called during debugging a C++ program", "body": "<p>I was able to reproduce this oddity on Ubuntu.  gdb is having trouble with the double input and double return value.</p>\n\n<p>There appears to be an easy workaround however by calling __round.</p>\n\n<pre><code>(gdb) p round\n$6 = {&lt;text variable, no debug info&gt;} 0x7ffff77f7460 &lt;__round&gt;\n(gdb) p round(1.3)\n$7 = -858993460\n(gdb) p __round(1.3)\n$8 = 1\n(gdb) p __round\n$9 = {double (double)} 0x7ffff77f7460 \n</code></pre>\n\n<p>Note that gdb prototype for __round appears correct while the parameter type information is missing for round. As a result, it is appears that the input/output are considered as ints to round.</p>\n\n<p>The man page for round says that if x is integral then it will be directly returned.  If we assume that gdb is converting the double to an int then it explains the output.</p>\n\n<pre><code>11    double y = 1.3;\n(gdb) n\n13    int k = round(y);\n(gdb) p /x round(y)\n$28 = 0xcccccccd\n(gdb) p /lx *(long*)&amp;y\n$29 = 0x3ff4cccccccccccd\n(gdb) \n</code></pre>\n\n<p>So gdb is truncating the input value to 32-bit int and sending an int to round which sends it right back. Thus the lower word of the double is the output.  Or perhaps it is truncating the return value to 32-bit with the same result.</p>\n\n<p>As to why gdb doesn't have a proper prototype for round, I'm not sure. </p>\n\n<p>Good question.</p>\n"}], "owner": {"reputation": 99, "user_id": 6779882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc288336cec4adf5797df8790bc1efdb?s=128&d=identicon&r=PG&f=1", "display_name": "delhi_loafer", "link": "https://stackoverflow.com/users/6779882/delhi-loafer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "closed_date": 1472733773, "accepted_answer_id": 39256342, "answer_count": 1, "score": 3, "last_activity_date": 1472667075, "creation_date": 1472664459, "question_id": 39255612, "link": "https://stackoverflow.com/questions/39255612/gdb-prints-arbitrary-values-when-round-function-called-during-debugging-a-c", "closed_reason": "Duplicate", "title": "GDB prints arbitrary values when round() function called during debugging a C++ program", "body": "<p>I am debugging a c++ (mex) program using gdb. In the code threre is a statement where a variable is assigned a rounded value of another variable. For instance:</p>\n\n<pre><code>x = round(y);\n</code></pre>\n\n<p>The assignment works correctly and when I call at the gdb prompt <code>(gdb) print x</code>, the correct value is printed. However, when I call <code>(gdb) print round(y)</code>, a strange arbitrary number is printed.</p>\n\n<p>Any idea what could be a source of this strange behaviour?</p>\n"}, {"tags": ["c++", "c++14", "stdtuple", "stdhash"], "comments": [{"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1472664752, "post_id": 39255604, "comment_id": 65847133, "body": "Maybe use <code>Tuple</code> instead of <code>decltype(t)</code> ?"}, {"owner": {"reputation": 2954, "user_id": 5508296, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/l6uTa.jpg?s=128&g=1", "display_name": "sjrowlinson", "link": "https://stackoverflow.com/users/5508296/sjrowlinson"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1472664891, "post_id": 39255604, "comment_id": 65847215, "body": "@PiotrSkotnicki I&#39;m afraid I tried that already and received the same error."}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 1, "creation_date": 1472664908, "post_id": 39255604, "comment_id": 65847228, "body": "<a href=\"http://coliru.stacked-crooked.com/a/655758eda525a016\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/655758eda525a016</a>"}, {"owner": {"reputation": 2954, "user_id": 5508296, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/l6uTa.jpg?s=128&g=1", "display_name": "sjrowlinson", "link": "https://stackoverflow.com/users/5508296/sjrowlinson"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1472665407, "post_id": 39255604, "comment_id": 65847503, "body": "@PiotrSkotnicki Hmmm, interesting, ok I got it working in <code>GCC</code> now (maybe I was missing a relevant <code>#include</code> somehow) but it still doesn&#39;t like it in <code>MSVC2015</code> - I get <code>use of undefined type std::tuple_element&lt;2, Tuple&gt;</code> as an error in this case."}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1472665576, "post_id": 39255604, "comment_id": 65847588, "body": "you probably forgot to replace <code>decltype(t)</code> by <code>std::tuple&lt;Args...&gt;</code> (ditto <code>std::pair</code>), I don&#39;t know why it fails with msvc"}, {"owner": {"reputation": 2954, "user_id": 5508296, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/l6uTa.jpg?s=128&g=1", "display_name": "sjrowlinson", "link": "https://stackoverflow.com/users/5508296/sjrowlinson"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 1, "creation_date": 1472665735, "post_id": 39255604, "comment_id": 65847694, "body": "@PiotrSkotnicki Ah, nevermind, I didn&#39;t realise you had replaced that line too - it works in both GCC and MSVC now, thanks :) Write it as an answer and I&#39;ll accept it (once I&#39;m back from eating), though I&#39;m curious as to why this change works."}], "answers": [{"comments": [{"owner": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "edited": false, "score": 2, "creation_date": 1472666785, "post_id": 39256216, "comment_id": 65848318, "body": "And if you have a case where you need to use <code>decltype</code> you can use <code>std::decay_t&lt;decltype(t)&gt;</code>."}], "tags": [], "owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "is_accepted": true, "score": 5, "last_activity_date": 1472666542, "creation_date": 1472666542, "answer_id": 39256216, "question_id": 39255604, "link": "https://stackoverflow.com/questions/39255604/issue-with-invalid-use-of-incomplete-type-when-using-stdtuple-element/39256216#39256216", "title": "Issue with invalid use of incomplete type when using std::tuple_element", "body": "<p>For a parameter declared as below:</p>\n\n<pre><code>const Tuple&amp; t\n</code></pre>\n\n<p><code>decltype(t)</code> yields:</p>\n\n<pre><code>const Tuple&amp;\n</code></pre>\n\n<p>Similarly, for a parameter declared as:</p>\n\n<pre><code>const std::pair&lt;Ty1, Ty2&gt;&amp; t\n</code></pre>\n\n<p><code>decltype(t)</code> yields:</p>\n\n<pre><code>const std::pair&lt;Ty1, Ty2&gt;&amp;\n</code></pre>\n\n<p>In both cases, the produced type is a reference to a tuple-like type. However, <a href=\"http://en.cppreference.com/w/cpp/utility/tuple/tuple_element\" rel=\"noreferrer\"><code>std::tuple_element</code></a> is not specialized for references, which means, the compiler falls back to the primary, undefined class template:</p>\n\n<pre><code>template &lt;size_t I, typename T&gt; class tuple_element;\n</code></pre>\n\n<p>What you want, is a plain <code>Tuple</code> in the former case, and <code>std::pair&lt;Ty1, Ty2&gt;</code> in the latter case.</p>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 6470423, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1P5HR.jpg?s=128&g=1", "display_name": "igel", "link": "https://stackoverflow.com/users/6470423/igel"}, "is_accepted": false, "score": 0, "last_activity_date": 1586881013, "creation_date": 1586881013, "answer_id": 61212382, "question_id": 39255604, "link": "https://stackoverflow.com/questions/39255604/issue-with-invalid-use-of-incomplete-type-when-using-stdtuple-element/61212382#61212382", "title": "Issue with invalid use of incomplete type when using std::tuple_element", "body": "<p>If you have this problem with a type <code>Tuple</code> that may or may not be a reference, you can use <code>std::remove_reference</code> like so:</p>\n\n<pre class=\"lang-c++ prettyprint-override\"><code>typename std::tuple_element&lt;num, typename std::remove_reference&lt;Tuple&gt;::type&gt;::type\n</code></pre>\n\n<p>or, for C++17,</p>\n\n<pre class=\"lang-c++ prettyprint-override\"><code>std::tuple_element_t&lt;num, std::remove_reference_t&lt;Tuple&gt;&gt;\n</code></pre>\n\n<p>PS: I don't think it works with <code>std::reference_wrapper</code> though...</p>\n"}], "owner": {"reputation": 2954, "user_id": 5508296, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/l6uTa.jpg?s=128&g=1", "display_name": "sjrowlinson", "link": "https://stackoverflow.com/users/5508296/sjrowlinson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2166, "favorite_count": 1, "accepted_answer_id": 39256216, "answer_count": 2, "score": 3, "last_activity_date": 1586881013, "creation_date": 1472664412, "question_id": 39255604, "link": "https://stackoverflow.com/questions/39255604/issue-with-invalid-use-of-incomplete-type-when-using-stdtuple-element", "title": "Issue with invalid use of incomplete type when using std::tuple_element", "body": "<p>The following code implements a hash function for a <code>std::tuple</code> which is then used in a different segment of my code-base in a <code>std::unordered_map</code> of <code>std::tuple</code>s.</p>\n\n<pre><code>// compute hash function recursively through each std::tuple element\ntemplate&lt;class Tuple, std::size_t N&gt;\nstruct tuple_hash_compute {\n    static std::size_t hash_compute(const Tuple&amp; t) {\n        using type = typename std::tuple_element&lt;N-1, decltype(t)&gt;::type; // OFFENDING LINE\n        return tuple_hash_compute&lt;Tuple, N-1&gt;::hash_compute(t)\n            + std::hash&lt;type&gt;()(std::get&lt;N-1&gt;(t));\n    }\n};\n// base helper\ntemplate&lt;class Tuple&gt;\nstruct tuple_hash_compute&lt;Tuple, 1&gt; {\n    static std::size_t hash_compute(const Tuple&amp; t) {\n        using type = typename std::tuple_element&lt;0, decltype(t)&gt;::type; // OFFENDING LINE\n        return 51U + std::hash&lt;type&gt;()(std::get&lt;0&gt;(t))*51U;\n    }\n};\n// tuple_hash function object\nstruct tuple_hash {\n    template&lt;class... Args&gt;\n    std::size_t operator()(const std::tuple&lt;Args...&gt;&amp; t) const {\n        return tuple_hash_compute&lt;decltype(t), sizeof...(Args)&gt;::hash_compute(t);\n    } \n    // will use std::unordered_map of std::pair too, so overload reqd\n    template&lt;class Ty1, class Ty2&gt;\n    std::size_t operator()(const std::pair&lt;Ty1, Ty2&gt;&amp; p) const {\n        return tuple_hash_compute&lt;decltype(t), 2&gt;::hash_compute(p);\n    }\n};\n</code></pre>\n\n<p>Then, just as an example, I would use this hash function-object like so,</p>\n\n<pre><code>std::unordered_map&lt;std::tuple&lt;int,int,int&gt;, std::size_t, tuple_hash&gt; agg_map;\nagg_map.insert(std::make_pair(std::make_tuple(1,2,3), 0U));\nagg_map.insert(std::make_pair(std::make_tuple(4,5,6), 1U));\n</code></pre>\n\n<p>However, in both <code>GCC 6.1.0</code> and <code>MSVC2015</code>, I receive the following errors (both the same for each offending line above):</p>\n\n<blockquote>\n  <p>error: invalid use of incomplete type '<code>class std::tuple_element&lt;2ul, const std::tuple&lt;int,int,int&gt;&amp;&gt;</code>'</p>\n</blockquote>\n\n<p>I'm not entirely sure what's causing this error (though it may be due to \"abstraction\" of passing the <code>std::tuple</code> via the template parameter <code>Tuple</code>) or how it can be solved so any help is appreciated.</p>\n"}, {"tags": ["c++", "macos"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1472664473, "post_id": 39255590, "comment_id": 65846962, "body": "Have you tried <a href=\"http://stackoverflow.com/questions/12170488/how-to-get-current-locale-of-my-environment\">this</a>?"}, {"owner": {"reputation": 1885, "user_id": 318102, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b5fdf624fa91e5a6778e4ed04779e1f3?s=128&d=identicon&r=PG", "display_name": "Fernando", "link": "https://stackoverflow.com/users/318102/fernando"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1472664554, "post_id": 39255590, "comment_id": 65847016, "body": "I just tried, but it does not work with OSX. My code:  setlocale(LC_ALL, &quot;&quot;); setlocale(LC_CTYPE, NULL); and the result is UTF-8"}], "answers": [{"tags": [], "owner": {"reputation": 1885, "user_id": 318102, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b5fdf624fa91e5a6778e4ed04779e1f3?s=128&d=identicon&r=PG", "display_name": "Fernando", "link": "https://stackoverflow.com/users/318102/fernando"}, "is_accepted": true, "score": 3, "last_activity_date": 1615359135, "last_edit_date": 1615359135, "creation_date": 1472669220, "answer_id": 39256898, "question_id": 39255590, "link": "https://stackoverflow.com/questions/39255590/how-to-get-the-locale-of-the-current-user-in-osx-using-c/39256898#39256898", "title": "How to get the locale of the current user in OSX using C++", "body": "<p>After some try and error and lot of help from internet and other questions I did it.</p>\n<p>If I want to get only the language.</p>\n<pre><code>CFLocaleRef cflocale = CFLocaleCopyCurrent();\nCFStringRef value = (CFStringRef)CFLocaleGetValue(cflocale, kCFLocaleLanguageCode); \nstd::string str(CFStringGetCStringPtr(value, kCFStringEncodingUTF8));\nCFRelease(cflocale);\n</code></pre>\n<p>This way, at str I'll get a std::string with the language. If I need something else, I can replace <code>kCFLocaleLanguageCode</code> with any other constant from <code>CFLocale</code></p>\n<p>Also I needed the header <code>#include &lt;CoreFoundation/CoreFoundation.h&gt;</code></p>\n"}], "owner": {"reputation": 1885, "user_id": 318102, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b5fdf624fa91e5a6778e4ed04779e1f3?s=128&d=identicon&r=PG", "display_name": "Fernando", "link": "https://stackoverflow.com/users/318102/fernando"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 905, "favorite_count": 0, "accepted_answer_id": 39256898, "answer_count": 1, "score": 2, "last_activity_date": 1615359135, "creation_date": 1472664363, "last_edit_date": 1472664580, "question_id": 39255590, "link": "https://stackoverflow.com/questions/39255590/how-to-get-the-locale-of-the-current-user-in-osx-using-c", "title": "How to get the locale of the current user in OSX using C++", "body": "<p>I have a C++ application where I need to retrieve the locale of the current user. How can I do it with OSX Yosemite and newer?</p>\n\n<p>I've tried something like <code>setlocale(LC_CTYPE, NULL);</code> but it just returns <code>UTF-8</code> where my system is clearly in Spanish (es_AR)</p>\n"}, {"tags": ["c++", "c++11", "lambda"], "answers": [{"comments": [{"owner": {"reputation": 18643, "user_id": 1737909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/058573b71875bc70b5a4e30140c94040?s=128&d=identicon&r=PG", "display_name": "Ven", "link": "https://stackoverflow.com/users/1737909/ven"}, "edited": false, "score": 1, "creation_date": 1472668714, "post_id": 39255959, "comment_id": 65849332, "body": "a bit more explanations maybe..? &quot;you prefer&quot;?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 18643, "user_id": 1737909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/058573b71875bc70b5a4e30140c94040?s=128&d=identicon&r=PG", "display_name": "Ven", "link": "https://stackoverflow.com/users/1737909/ven"}, "edited": false, "score": 0, "creation_date": 1472668830, "post_id": 39255959, "comment_id": 65849403, "body": "@Ven Yes, in C++17, I personally would prefer to return an <code>optional&lt;iterator&gt;</code> instead of a <code>T*</code> in such a function?  I could go on about why I&#39;d prefer it, but that is tangental to the solution."}, {"owner": {"reputation": 18643, "user_id": 1737909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/058573b71875bc70b5a4e30140c94040?s=128&d=identicon&r=PG", "display_name": "Ven", "link": "https://stackoverflow.com/users/1737909/ven"}, "edited": false, "score": 2, "creation_date": 1472671136, "post_id": 39255959, "comment_id": 65850779, "body": "if it is, why include it here?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 18643, "user_id": 1737909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/058573b71875bc70b5a4e30140c94040?s=128&d=identicon&r=PG", "display_name": "Ven", "link": "https://stackoverflow.com/users/1737909/ven"}, "edited": false, "score": 1, "creation_date": 1472671469, "post_id": 39255959, "comment_id": 65850959, "body": "@Ven When I write code for others to learn from, I try to make it worth emulating?  And in C++17, the solution with optional is a better one.  C++17 is basically here, I don&#39;t want to encourage people to use <code>T*</code> when <code>optional&lt;iterator&gt;</code> would be better.  By mentioning it as a better option, if they have a C++17 compiler, they might emulate that and produce <i>better</i> code than if I didn&#39;t mention it."}, {"owner": {"reputation": 18643, "user_id": 1737909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/058573b71875bc70b5a4e30140c94040?s=128&d=identicon&r=PG", "display_name": "Ven", "link": "https://stackoverflow.com/users/1737909/ven"}, "edited": false, "score": 2, "creation_date": 1472672174, "post_id": 39255959, "comment_id": 65851324, "body": "If you&#39;re just gonna say &quot;this solution is the Best Solution\u2122&quot; but not explain why, then yeah I&#39;m going to say &quot;don&#39;t&quot;"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 18643, "user_id": 1737909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/058573b71875bc70b5a4e30140c94040?s=128&d=identicon&r=PG", "display_name": "Ven", "link": "https://stackoverflow.com/users/1737909/ven"}, "edited": false, "score": 0, "creation_date": 1472672684, "post_id": 39255959, "comment_id": 65851551, "body": "@Ven And that is ok.  You don&#39;t have to do it.  I won&#39;t make you.  I didn&#39;t say it was the Best Solution.  I said I personally would prefer it.  Others, when exposed to it, have also liked it, but that is just anecdotal.  It is up to you to determine if you agree.  If I took each line of code and explained everything about why I wrote it, I&#39;d be writing chapters of books and not SO answers.  Want to learn about <code>using std::begin</code> line?  The <code>iterator traits</code> line?  The use of <code>find_if</code>?  Why <code>addressof</code>?  All of these <i>have reasons</i>, and I am not going to go into them <i>every time</i> I use them."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 3, "last_activity_date": 1472672643, "last_edit_date": 1472672643, "creation_date": 1472665602, "answer_id": 39255959, "question_id": 39255571, "link": "https://stackoverflow.com/questions/39255571/using-the-value-that-any-of-finds-to-use-in-a-return-outside-lambda/39255959#39255959", "title": "Using the value that any_of finds to use in a return outside lambda", "body": "<p>I'd write a range-based searcher that returns an object which can be <code>*</code> dereferenced (maybe more than once) to get the found thing, or evaluated in a <code>bool</code> context to determine if it was found.</p>\n\n<p>In my experience this makes code cleaner, and makes the common case of \"I want to know if it is there\" simpler, yet permits you to get at the item tersely:</p>\n\n<pre><code>template&lt;class Range, class F&gt;\nauto linear_search_if( Range&amp;&amp; r, F&amp;&amp; f )\n// remove next line in C++14, it removes ADL `begin` capability:\n-&gt; typename std::iterator_traits&lt;decltype( std::begin(r) )&gt;::value_type*\n// reproducing ADL begin in C++11 is a pain, so just use the above line\n{\n  using std::begin;  using std::end;\n  using iterator = decltype(begin(r));\n  using T = typename std::iterator_traits&lt;iterator&gt;::value_type;\n  using R = T*; // in C++17 I prefer std::optional&lt;iterator&gt;;\n  iterator it = std::find_if( begin(r), end(r), std::forward&lt;F&gt;(f) );\n  if (it != end(r))\n    return R(std::addressof(*it)); // return R(it); in C++17\n  else\n    return R(nullptr); // return R{}; in C++17\n}\n\nif (auto pi = linear_search_if( intersections, [&amp;](auto i){return i&gt;=0;})\n  return rayOrigin + *pi * rayDirection; // **pi in C++17\n</code></pre>\n\n<p>Yes, you do a <code>*pi</code> instead of just an <code>i</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "is_accepted": false, "score": 2, "last_activity_date": 1472674620, "last_edit_date": 1472674620, "creation_date": 1472673442, "answer_id": 39258004, "question_id": 39255571, "link": "https://stackoverflow.com/questions/39255571/using-the-value-that-any-of-finds-to-use-in-a-return-outside-lambda/39258004#39258004", "title": "Using the value that any_of finds to use in a return outside lambda", "body": "<p>Yes the current ways of <code>find_if</code> and <code>any_of</code> are slightly annoying. @Yakk's solution works by writing a wrapper around <code>std::find_if</code> that returns a <code>std::optional&lt;int&gt;</code> to both test for success and conditionally extract the result. This is certainly a way forward for a next version of the STL. </p>\n\n<p>However, in C++17, you can <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2016/p0305r1.html\" rel=\"nofollow\"><strong>move initializers into selection statements</strong></a> which eliminates most of the pain already:</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nint main()\n{\n    auto const v = std::vector&lt;int&gt; { -2, -1, 0, 1, 2 };\n    auto const pred = [&amp;](const int i) { return i &gt;= 0; };\n\n    if (auto const it = std::find_if(v.begin(), v.end(), pred); it != v.end())\n        std::cout &lt;&lt; *it &lt;&lt; '\\n';      \n}\n</code></pre>\n\n<p><a href=\"http://melpon.org/wandbox/permlink/5YW0iBX4XHONn7jN\" rel=\"nofollow\"><strong>Live Example</strong></a> using a recent Clang in c++1z mode.</p>\n"}], "owner": {"reputation": 345, "user_id": 2154942, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/c4353d7d6b4926b52d24fd73da7f7dcc?s=128&d=identicon&r=PG", "display_name": "Lorac", "link": "https://stackoverflow.com/users/2154942/lorac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 1, "accepted_answer_id": 39255959, "answer_count": 2, "score": 2, "last_activity_date": 1472674620, "creation_date": 1472664291, "question_id": 39255571, "link": "https://stackoverflow.com/questions/39255571/using-the-value-that-any-of-finds-to-use-in-a-return-outside-lambda", "title": "Using the value that any_of finds to use in a return outside lambda", "body": "<p>A working piece of code:</p>\n\n<pre><code>std::vector&lt;double&gt;::iterator it = std::find_if(intersections.begin(), intersections.end(), [&amp;](const double i) {return i &gt;= 0;});\nif (it != intersections.end())\n    return rayOrigin + *(it) * rayDirection);\n</code></pre>\n\n<p>But I would like to use something like this</p>\n\n<p>Is there a way to capture the <em>i</em> in a clean way (not using a temp variable), that the any_of finds here to use it in the return statement</p>\n\n<pre><code>if (std::any_of(intersections.begin(), intersections.end(), [&amp;](const double i) {return i &gt;= 0;}))\n    return rayOrigin + i * rayDirection);\n</code></pre>\n"}, {"tags": ["c++", "filepath"], "comments": [{"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 3, "creation_date": 1472664019, "post_id": 39255466, "comment_id": 65846699, "body": "So what is stopping you from doing it: <code>dossier.open(&quot;C:&#47;Users&#47;titib&#47;Contacts&#47;Desktop&#47;Projet informatique&#47;groupe&#47;&quot; + gr + &quot;&#47;&quot; + utilisateur + &quot;.txt&quot;);</code>?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1472664109, "post_id": 39255466, "comment_id": 65846749, "body": "Read about <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/to_string\" rel=\"nofollow noreferrer\"><code>std::to_string</code></a>"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 2, "creation_date": 1472664396, "post_id": 39255466, "comment_id": 65846922, "body": "@FirstStep What&#39;s stopping OP? The fact that string literal + int no sense (in most situations) perhaps?"}], "answers": [{"comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1472664133, "post_id": 39255514, "comment_id": 65846762, "body": "Except that <code>gr</code> is an <i>integer</i> variable, not a string."}, {"owner": {"reputation": 449, "user_id": 6778233, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/8TuRN.jpg?s=128&g=1", "display_name": "Boat", "link": "https://stackoverflow.com/users/6778233/boat"}, "edited": false, "score": 0, "creation_date": 1472664396, "post_id": 39255514, "comment_id": 65846923, "body": "If i do that &quot;gr&quot; must be a class."}, {"owner": {"reputation": 449, "user_id": 6778233, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/8TuRN.jpg?s=128&g=1", "display_name": "Boat", "link": "https://stackoverflow.com/users/6778233/boat"}, "edited": false, "score": 0, "creation_date": 1472664946, "post_id": 39255514, "comment_id": 65847251, "body": "hmm nothing happen... 0 files created. Should i declare pathfile before or something ?"}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1472665650, "post_id": 39255514, "comment_id": 65847643, "body": "I think you need to debug it. See what is <code>FilePath</code> before you open it, then see if it was opened correctly."}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1472666138, "post_id": 39255514, "comment_id": 65847968, "body": "Step through the code! If you are on Visual Studio use F-10 to &quot;jump on each statement&quot; one by one, then hoover your mouse on the variables to see what do they contain."}, {"owner": {"reputation": 449, "user_id": 6778233, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/8TuRN.jpg?s=128&g=1", "display_name": "Boat", "link": "https://stackoverflow.com/users/6778233/boat"}, "edited": false, "score": 0, "creation_date": 1472666653, "post_id": 39255514, "comment_id": 65848248, "body": "I&#39;ts strange because &quot;Filepath&quot; Contain the right name but no file is created."}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1472667354, "post_id": 39255514, "comment_id": 65848634, "body": "What is dossier?? And are you sure that <code>.open()</code> creates the file if the file does not exist?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1472680937, "post_id": 39255514, "comment_id": 65855338, "body": "Note that <code>std::to_string()</code> is only available in C++11 and later.  For earlier C++ versions, you can use <code>std::ostringstream</code> instead."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 449, "user_id": 6778233, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/8TuRN.jpg?s=128&g=1", "display_name": "Boat", "link": "https://stackoverflow.com/users/6778233/boat"}, "edited": false, "score": 2, "creation_date": 1472682680, "post_id": 39255514, "comment_id": 65855966, "body": "@BaptBnnt: &quot;not working&quot; is useless information.  You need to explain <b>what</b> is not working exactly. What are you expecting? What is happening instead? What errors are being reported?"}], "tags": [], "owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "is_accepted": false, "score": 2, "last_activity_date": 1472664576, "last_edit_date": 1472664576, "creation_date": 1472664085, "answer_id": 39255514, "question_id": 39255466, "link": "https://stackoverflow.com/questions/39255466/filepath-with-variable-inside-c/39255514#39255514", "title": "Filepath with variable inside c++", "body": "<p>This should work just fine:</p>\n\n<pre><code>std::string FilePath = \"C:/Users/titib/Contacts/Desktop/Projet informatique/groupe/\" + std::to_string(gr)  + \"/\" + utilisateur + \".txt\";\ndossier.open(FilePath);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 449, "user_id": 6778233, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/8TuRN.jpg?s=128&g=1", "display_name": "Boat", "link": "https://stackoverflow.com/users/6778233/boat"}, "edited": false, "score": 0, "creation_date": 1472681983, "post_id": 39259752, "comment_id": 65855747, "body": "thanks for that it is very helpfull. But still not creating any file"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 449, "user_id": 6778233, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/8TuRN.jpg?s=128&g=1", "display_name": "Boat", "link": "https://stackoverflow.com/users/6778233/boat"}, "edited": false, "score": 0, "creation_date": 1472682605, "post_id": 39259752, "comment_id": 65855946, "body": "Then you are doing something else wrong. Did you verify the user&#39;s input is being read correctly? That the file path being passed to <code>open()</code> is accurate? That the target folder already exists? That your user account has permission to create files in that folder? <code>std::ofstream</code> will not create missing folders for you, use <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa363855.aspx\" rel=\"nofollow noreferrer\"><code>CreateDirectory()</code></a> or equivalent for that. And try passing the path to <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa363858.aspx\" rel=\"nofollow noreferrer\"><code>CreateFile()</code></a> directly to see what errors it reports."}, {"owner": {"reputation": 449, "user_id": 6778233, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/8TuRN.jpg?s=128&g=1", "display_name": "Boat", "link": "https://stackoverflow.com/users/6778233/boat"}, "edited": false, "score": 0, "creation_date": 1472682917, "post_id": 39259752, "comment_id": 65856051, "body": "user&#39;s input are corectly readed. What do you mean by accurate ? The target exists i&#39;am sure of that .it work to create a file but not a folder and a file . i already try to create the file on the desktop without success... going crazy"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 449, "user_id": 6778233, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/8TuRN.jpg?s=128&g=1", "display_name": "Boat", "link": "https://stackoverflow.com/users/6778233/boat"}, "edited": false, "score": 0, "creation_date": 1472683642, "post_id": 39259752, "comment_id": 65856269, "body": "As I said in my last comment, &quot;<b><i><code>std::ofstream</code> will not create missing folders for you</b>, use <code>CreateDirectory()</code> or equivalent for that.</i>&quot; You claim &quot;the target exists&quot;, are you absolutely sure of that?  What is the <i>complete</i> file path that you are <i>trying</i> to create?  Again, if you call <code>CreateFile()</code> directly, you can see what specific error code it actually reports. <code>std::ofstream</code> can tell you <b>if</b> an error happens, but not <b>what</b> error it is. <code>GetLastError()</code> can give you more information when <code>CreateFile()</code> fails."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1472681286, "creation_date": 1472681286, "answer_id": 39259752, "question_id": 39255466, "link": "https://stackoverflow.com/questions/39255466/filepath-with-variable-inside-c/39259752#39259752", "title": "Filepath with variable inside c++", "body": "<p>You need to convert <code>gr</code> to a <code>std::string</code> before you can append it to another string.  Prior to C++11, you can use <a href=\"http://en.cppreference.com/w/cpp/io/basic_ostringstream\" rel=\"nofollow\"><code>std::ostringstream</code></a> for that, eg:</p>\n\n<pre><code>#include &lt;sstream&gt;\n\nstd::ostringstream oss_gr;\noss_gr &lt;&lt; gr;\n\ndossier.open(\"C:/Users/titib/Contacts/Desktop/Projet informatique/groupe/\" + oss_gr.str() + \"/\" + utilisateur + \".txt\");\n</code></pre>\n\n<p>Or, if you are using C++11 or later, you can use <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/to_string\" rel=\"nofollow\"><code>std::to_string()</code></a> instead:</p>\n\n<pre><code>dossier.open(\"C:/Users/titib/Contacts/Desktop/Projet informatique/groupe/\" + std::to_string(gr) + \"/\" + utilisateur + \".txt\");\n</code></pre>\n\n<p>Alternatively, in any C++ version, you could use <code>std::ostringstring</code> to format the entire path instead:</p>\n\n<pre><code>std::ostringstream oss_path;\noss_path &lt;&lt; \"C:/Users/titib/Contacts/Desktop/Projet informatique/groupe/\" &lt;&lt; gr &lt;&lt; \"/\" &lt;&lt; utilisateur &lt;&lt; \".txt\";\ndossier.open(oss_path.str());\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1472730198, "post_id": 39269160, "comment_id": 65875568, "body": "Maybe you can avoid an error prone repetition: after <code>gr &lt;&lt; ...;</code> add <code>std::string str_path(gr.str()); CreateDirectory(str_path.c_str(),NULL); dossier.open(str_path + &quot;&#47;&quot; + utilisateur + ...</code>"}], "tags": [], "owner": {"reputation": 449, "user_id": 6778233, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/8TuRN.jpg?s=128&g=1", "display_name": "Boat", "link": "https://stackoverflow.com/users/6778233/boat"}, "is_accepted": false, "score": 0, "last_activity_date": 1472725912, "creation_date": 1472725912, "answer_id": 39269160, "question_id": 39255466, "link": "https://stackoverflow.com/questions/39255466/filepath-with-variable-inside-c/39269160#39269160", "title": "Filepath with variable inside c++", "body": "<p>Okay i finnaly succeed to create a file.\nThanks to Remy Lebeau.</p>\n\n<p>Actually i changed few things :</p>\n\n<ul>\n<li>gr is name groupe now \n-groupe is a string to avoid conversion</li>\n</ul>\n\n<p>i used filedirectory .\nHere the code </p>\n\n<pre><code>std::ostringstream gr;\n\n        gr &lt;&lt; \"C:/Users/titib/Contacts/Desktop/Projet informatique/\" &lt;&lt; groupe;\n\n        CreateDirectory(gr.str().c_str(), NULL);\n\n        dossier.open(\"C:/Users/titib/Contacts/Desktop/Projet informatique/\" + groupe + \"/\" + utilisateur + \".txt\");\n        dossier &lt;&lt; utilisateur &lt;&lt; endl &lt;&lt; mot_de_passe &lt;&lt; endl &lt;&lt; groupe &lt;&lt; endl;\n</code></pre>\n\n<p>Thanks again. </p>\n"}], "owner": {"reputation": 449, "user_id": 6778233, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/8TuRN.jpg?s=128&g=1", "display_name": "Boat", "link": "https://stackoverflow.com/users/6778233/boat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1890, "favorite_count": 0, "answer_count": 3, "score": 4, "last_activity_date": 1472725912, "creation_date": 1472663926, "last_edit_date": 1472680883, "question_id": 39255466, "link": "https://stackoverflow.com/questions/39255466/filepath-with-variable-inside-c", "title": "Filepath with variable inside c++", "body": "<p>I am trying to use a variable in my file path.</p>\n\n<p>I have succeeded in adding one for the name of the files, but not for the folder name.</p>\n\n<pre><code>string utilisateur, mot_de_passe;\nint gr;\n\ncout &lt;&lt; \" Entrer un nom utilisateur:\"; cin &gt;&gt; utilisateur;\ncout &lt;&lt; \" Entrer un mot de passe :\"; cin &gt;&gt; mot_de_passe;\ncout &lt;&lt; \"Choisir un groupe:\"; cin &gt;&gt; gr;\n\nofstream dossier;\nif (gr == 1)\n{\n    dossier.open(\"C:/Users/titib/Contacts/Desktop/Projet informatique/groupe/\" + utilisateur + \".txt\");\n    dossier &lt;&lt; utilisateur &lt;&lt; endl &lt;&lt; mot_de_passe &lt;&lt; endl &lt;&lt; gr &lt;&lt; endl;\n</code></pre>\n\n<p>I would like to use the variable <code>gr</code> as the name of the folder.</p>\n\n<pre><code>dossier.open(\"C:/Users/titib/Contacts/Desktop/Projet informatique/groupe/**gr**\" + utilisateur + \".txt\");\n</code></pre>\n"}, {"tags": ["c++", "winapi", "gdi"], "comments": [{"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 1, "creation_date": 1472663632, "post_id": 39255256, "comment_id": 65846494, "body": "Is <code>hbitmap</code> actually a valid handle? Likely not. First, check to see if it&#39;s non-NULL. If so, check <code>GetLastError</code> after the call to <code>LoadImage</code>. (It is sort of strange that the variable is usually spelled <code>hbmap</code> except in the call to <code>GetObject</code>, where you spell it <code>hbitmap</code>. I assume that&#39;s just a typo, but typos should be impossible when copying and pasting <i>real code</i> into your Stack Overflow question...)"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1472667108, "post_id": 39255256, "comment_id": 65848506, "body": "Did you mean &quot;hbmap&quot;?"}, {"owner": {"reputation": 1, "user_id": 6779858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86ba76661849bf64950bb1def3d824a6?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous123432", "link": "https://stackoverflow.com/users/6779858/anonymous123432"}, "edited": false, "score": 0, "creation_date": 1472668514, "post_id": 39255256, "comment_id": 65849234, "body": "Yes I did mean hbmap, it was a typo when I was getting rid of some unrelated stuff. Edited thanks. Thats the weird part is that the handle is created sucessfully and non null, and blts onto the screen properly and everything."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1472800385, "post_id": 39255256, "comment_id": 65906769, "body": "You don&#39;t do any error checking and %f is the wrong format string. And this isn&#39;t the actual code since you didn&#39;t paste it. So who knows what&#39;s going on. An mcve would remove doubt."}], "answers": [{"tags": [], "owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "is_accepted": false, "score": 2, "last_activity_date": 1472669150, "creation_date": 1472669150, "answer_id": 39256878, "question_id": 39255256, "link": "https://stackoverflow.com/questions/39255256/why-does-getobject-fail-here-when-lbvobject-is-null/39256878#39256878", "title": "Why does GetObject fail here when lbvobject is NULL", "body": "<p>You're using <code>\"%f\"</code> format but passing an integer. That's undefined behavior. If you look at the return value in the debugger you'll probably find that it's <em>not</em> zero.</p>\n"}], "owner": {"reputation": 1, "user_id": 6779858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86ba76661849bf64950bb1def3d824a6?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous123432", "link": "https://stackoverflow.com/users/6779858/anonymous123432"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1472676058, "creation_date": 1472663083, "last_edit_date": 1472676058, "question_id": 39255256, "link": "https://stackoverflow.com/questions/39255256/why-does-getobject-fail-here-when-lbvobject-is-null", "title": "Why does GetObject fail here when lbvobject is NULL", "body": "<p>The <code>GetObject()</code> documentation says that when <code>lpvObject</code> is NULL, the function returns the number of bytes required.  But, I am getting 0, which is the return value when it fails.</p>\n\n<p>I've been searching and trying to figure out what I'm doing wrong.</p>\n\n<p>I've just got a basic window setup using the <code>WM_PAINT</code> message:</p>\n\n<pre><code>case WM_PAINT:\n{\n    PAINTSTRUCT ps;\n    HDC hdc;\n    hdc = BeginPaint(hwnd, &amp;ps);\n    HBITMAP hbmap;\n    hbmap = (HBITMAP) LoadImage(NULL, str_path, IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE | LR_CREATEDIBSECTION);\n    BITMAP bm;\n    HDC bmapmemory = CreateCompatibleDC(hdc);\n    SelectBitmap(bmapmemory, hbmap);\n    int a = GetObject(hbmap, sizeof(BITMAP), NULL);\n\n    BitBlt(hdc, 0, 0, 750, 750, bmapmemory, 0, 0, SRCCOPY);\n    char c[64];\n    sprintf_s(c, sizeof(c), \"%f\\n\", a);\n    OutputDebugStringA(c);\n\n    DeleteDC(bmapmemory);\n    DeleteObject(bmap);\n\n    EndPaint(hwnd,&amp; ps);\n\n    return 0;\n}\n</code></pre>\n\n<p>As I said, <code>a</code> is always 0, or failure, for the <code>GetObject()</code> function call.</p>\n"}, {"tags": ["c++", "class", "oop", "c++11", "static"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1472663182, "post_id": 39255238, "comment_id": 65846278, "body": "The order of initialization is guaranteed, but only within the same <a href=\"https://en.wikipedia.org/wiki/Translation_unit_(programming)\" rel=\"nofollow noreferrer\">translation unit</a>."}, {"owner": {"reputation": 2214, "user_id": 4785903, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d61c4afb483e6a17ea80aa4a91dc65ad?s=128&d=identicon&r=PG&f=1", "display_name": "hg_git", "link": "https://stackoverflow.com/users/4785903/hg-git"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1472665626, "post_id": 39255238, "comment_id": 65847632, "body": "@JoachimPileborg, constant static variables are only initialized within a single source file. However what I&#39;m asking is would they always be initialized before I use their class&#39;s freshly created object in main.cpp?"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 1, "creation_date": 1472667649, "post_id": 39255238, "comment_id": 65848765, "body": "<code>VAL1</code> and <code>VAL2</code> will be initialized before <code>main</code> is entered, even if you never create an instance of <code>A</code> (and in fact, in your example you don&#39;t, so I&#39;m not sure what &quot;freshly created object&quot; you are talking about). Your program is good as written."}], "answers": [{"comments": [{"owner": {"reputation": 2214, "user_id": 4785903, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d61c4afb483e6a17ea80aa4a91dc65ad?s=128&d=identicon&r=PG&f=1", "display_name": "hg_git", "link": "https://stackoverflow.com/users/4785903/hg-git"}, "edited": false, "score": 0, "creation_date": 1472665739, "post_id": 39255909, "comment_id": 65847704, "body": "if I&#39;m using <code>a.h</code> where I declare the class with its members, <code>a.cpp</code> where I initialize this const static var, and <code>main.cpp</code> where I include and use class&#39;s freshly created <code>obj1</code>, is it guaranteed that obj1 will already have properly initialized static vars?"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "reply_to_user": {"reputation": 2214, "user_id": 4785903, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d61c4afb483e6a17ea80aa4a91dc65ad?s=128&d=identicon&r=PG&f=1", "display_name": "hg_git", "link": "https://stackoverflow.com/users/4785903/hg-git"}, "edited": false, "score": 2, "creation_date": 1472668053, "post_id": 39255909, "comment_id": 65848968, "body": "@hg_git The order of initialization of global and class static variables is complicated (which is an issue if the initializer of one of them may refer to others) - but in any case, all this initialization happens before <code>main()</code> starts executing. By the time you are in <code>main()</code>, all that dust has settled."}], "tags": [], "owner": {"reputation": 10521, "user_id": 1316462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2de3149d5f602449f41083ca17a5ceab?s=128&d=identicon&r=PG&f=1", "display_name": "Jans", "link": "https://stackoverflow.com/users/1316462/jans"}, "is_accepted": true, "score": 1, "last_activity_date": 1472667149, "last_edit_date": 1472667149, "creation_date": 1472665435, "answer_id": 39255909, "question_id": 39255238, "link": "https://stackoverflow.com/questions/39255238/initialization-order-of-static-const-initialized-with-functions/39255909#39255909", "title": "initialization order of static const initialized with functions", "body": "<p>static data member exists even when no instances of the class exist, that guarantee the presence of an initialized static member when an instance with automatic storage is created.</p>\n\n<p>An exception of this is when there's an instance of the class with static storage that is declared before the initialization of the static member in the same translation unit, the static variables are initialized in the same order they appear.</p>\n"}], "owner": {"reputation": 2214, "user_id": 4785903, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d61c4afb483e6a17ea80aa4a91dc65ad?s=128&d=identicon&r=PG&f=1", "display_name": "hg_git", "link": "https://stackoverflow.com/users/4785903/hg-git"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 455, "favorite_count": 0, "accepted_answer_id": 39255909, "answer_count": 1, "score": 1, "last_activity_date": 1472667149, "creation_date": 1472662984, "question_id": 39255238, "link": "https://stackoverflow.com/questions/39255238/initialization-order-of-static-const-initialized-with-functions", "title": "initialization order of static const initialized with functions", "body": "<p>In short, I need to initialize a const static member with some value obtained from a file and keep it thereby same for every object derived from it. </p>\n\n<p>So let's say I've a program -</p>\n\n<pre><code>#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nclass A\n{\npublic:\nstatic const int VAL1;\nstatic const int VAL2;\n};\n\nint F(const std::string);\n\nconst int A::VAL1 = F(\"1.txt\");\nconst int A::VAL2 = F(\"2.txt\");\n\nint F(const std::string filename)\n{\n  std::ifstream file(filename);\n  int result = 0;\n  file &gt;&gt; result;\n  return result;\n}\n\nint main () {\n  std::cout &lt;&lt; A::VAL1 &lt;&lt; \" \" &lt;&lt; A::VAL2 &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>Is it guaranteed that static members will be always initialized before creation of objects, because that's what I want :/</p>\n"}, {"tags": ["c++", "sorting", "quicksort"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1472662729, "post_id": 39255148, "comment_id": 65846044, "body": "<a href=\"http://en.cppreference.com/w/cpp/algorithm/sort\" rel=\"nofollow noreferrer\"><code>std::sort</code></a>"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1472662743, "post_id": 39255148, "comment_id": 65846049, "body": "are all the numbers the same number of digits? Is so then they will sort fine using a string sort"}, {"owner": {"reputation": 419, "user_id": 6736776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C03wr.jpg?s=128&g=1", "display_name": "macco", "link": "https://stackoverflow.com/users/6736776/macco"}, "edited": false, "score": 0, "creation_date": 1472662767, "post_id": 39255148, "comment_id": 65846061, "body": "Possible duplicate? <a href=\"http://stackoverflow.com/questions/5897319/how-to-use-stdsort-to-sort-an-array-in-c\" title=\"how to use stdsort to sort an array in c\">stackoverflow.com/questions/5897319/&hellip;</a>"}, {"owner": {"reputation": 153, "user_id": 5610655, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VBn8i.jpg?s=128&g=1", "display_name": "Jahirul Islam Monir", "link": "https://stackoverflow.com/users/5610655/jahirul-islam-monir"}, "edited": false, "score": 0, "creation_date": 1472662786, "post_id": 39255148, "comment_id": 65846072, "body": "I dont know how to sort a string.. would you please explain elaborately"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1472662845, "post_id": 39255148, "comment_id": 65846108, "body": "There is <b>tons</b> of information about this online.  do some reasearch, come up with ssomething, and come back if you have problems"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1472663048, "post_id": 39255148, "comment_id": 65846220, "body": "Surely this is too broad?"}, {"owner": {"reputation": 2954, "user_id": 5508296, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/l6uTa.jpg?s=128&g=1", "display_name": "sjrowlinson", "link": "https://stackoverflow.com/users/5508296/sjrowlinson"}, "edited": false, "score": 0, "creation_date": 1472663066, "post_id": 39255148, "comment_id": 65846230, "body": "Do you mean you want to sort a single <code>std::string</code> in order of each digit contained within it? Question isn&#39;t entirely clear imo."}, {"owner": {"reputation": 153, "user_id": 5610655, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VBn8i.jpg?s=128&g=1", "display_name": "Jahirul Islam Monir", "link": "https://stackoverflow.com/users/5610655/jahirul-islam-monir"}, "edited": false, "score": 0, "creation_date": 1472663281, "post_id": 39255148, "comment_id": 65846322, "body": "Not a single string.. arrays of string.."}], "answers": [{"comments": [{"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 4, "creation_date": 1472662917, "post_id": 39255191, "comment_id": 65846157, "body": "That&#39;s only the case if they all have the same number of digits. A normal string sort would put <code>&quot;10&quot;</code> before <code>&quot;2&quot;</code>."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1472663263, "post_id": 39255191, "comment_id": 65846315, "body": "Would it be faster to convert the strings into numbers and store them in a vector, sort and convert them back, or pad?"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1472663369, "post_id": 39255191, "comment_id": 65846362, "body": "It would probably be faster just to compare the lengths first, and then do the lexicographical comparison only if they are the same length."}, {"owner": {"reputation": 153, "user_id": 5610655, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VBn8i.jpg?s=128&g=1", "display_name": "Jahirul Islam Monir", "link": "https://stackoverflow.com/users/5610655/jahirul-islam-monir"}, "edited": false, "score": 0, "creation_date": 1472663387, "post_id": 39255191, "comment_id": 65846374, "body": "It will be very costly considering my problem time limit."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1472663616, "post_id": 39255191, "comment_id": 65846482, "body": "Instead of padding you can use the size first and then the value in a comparison function."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 153, "user_id": 5610655, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VBn8i.jpg?s=128&g=1", "display_name": "Jahirul Islam Monir", "link": "https://stackoverflow.com/users/5610655/jahirul-islam-monir"}, "edited": false, "score": 1, "creation_date": 1472663621, "post_id": 39255191, "comment_id": 65846487, "body": "@JahirulIslamMonir There is no native type for 45-digit numbers."}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1472663010, "last_edit_date": 1472663010, "creation_date": 1472662816, "answer_id": 39255191, "question_id": 39255148, "link": "https://stackoverflow.com/questions/39255148/how-can-i-sort-a-string-with-integers-in-c/39255191#39255191", "title": "How can i sort a string with integers in c++?", "body": "<p>It just so happens to be that a string containing only digits is <em>alphabetically</em> sortable, so you just put each <a href=\"http://en.cppreference.com/w/cpp/string/basic_string\" rel=\"nofollow\">string</a> into a <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow\">vector</a>, and simply <a href=\"http://en.cppreference.com/w/cpp/algorithm/sort\" rel=\"nofollow\">sort</a> the vector.</p>\n\n<p>As noted, this only works if the \"numbers\" all have the same number of digits. Else you need pad the strings with leading zeroes so they are all of the same length. The leading zeroes can then be removed once you have sorted the vector.</p>\n"}, {"comments": [{"owner": {"reputation": 153, "user_id": 5610655, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VBn8i.jpg?s=128&g=1", "display_name": "Jahirul Islam Monir", "link": "https://stackoverflow.com/users/5610655/jahirul-islam-monir"}, "edited": false, "score": 0, "creation_date": 1472663581, "post_id": 39255334, "comment_id": 65846462, "body": "Can u please do it for std::qsort where i will give an input for total number of string"}, {"owner": {"reputation": 5093, "user_id": 6039995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QuCId.png?s=128&g=1", "display_name": "Stack Danny", "link": "https://stackoverflow.com/users/6039995/stack-danny"}, "reply_to_user": {"reputation": 153, "user_id": 5610655, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VBn8i.jpg?s=128&g=1", "display_name": "Jahirul Islam Monir", "link": "https://stackoverflow.com/users/5610655/jahirul-islam-monir"}, "edited": false, "score": 2, "creation_date": 1472663670, "post_id": 39255334, "comment_id": 65846519, "body": "why do you want to use std::qsort? std::sort is so simple"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 153, "user_id": 5610655, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VBn8i.jpg?s=128&g=1", "display_name": "Jahirul Islam Monir", "link": "https://stackoverflow.com/users/5610655/jahirul-islam-monir"}, "edited": false, "score": 1, "creation_date": 1472663678, "post_id": 39255334, "comment_id": 65846522, "body": "@JahirulIslamMonir Why do you need to use <code>qsort</code>? If you&#39;re programming in C++ then use C++ algorithms instead of old C functions."}, {"owner": {"reputation": 5093, "user_id": 6039995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QuCId.png?s=128&g=1", "display_name": "Stack Danny", "link": "https://stackoverflow.com/users/6039995/stack-danny"}, "edited": false, "score": 1, "creation_date": 1472663789, "post_id": 39255334, "comment_id": 65846577, "body": "Oh, yeah and it&#39;s old c style, Like Joachim Pileborg said."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1472663849, "post_id": 39255334, "comment_id": 65846603, "body": "@StackDanny Then you might as well tag your question as C.  If you are using C++ you should use C++ and not <i>C with Classes</i>"}, {"owner": {"reputation": 153, "user_id": 5610655, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VBn8i.jpg?s=128&g=1", "display_name": "Jahirul Islam Monir", "link": "https://stackoverflow.com/users/5610655/jahirul-islam-monir"}, "edited": false, "score": 1, "creation_date": 1472664154, "post_id": 39255334, "comment_id": 65846778, "body": "I am marking it as a Accepted answer.. Those who gave negative vote i have nothing to say them.. I just only word to say that i am a beginner in programming and also in Stackoverflow"}, {"owner": {"reputation": 5093, "user_id": 6039995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QuCId.png?s=128&g=1", "display_name": "Stack Danny", "link": "https://stackoverflow.com/users/6039995/stack-danny"}, "reply_to_user": {"reputation": 153, "user_id": 5610655, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VBn8i.jpg?s=128&g=1", "display_name": "Jahirul Islam Monir", "link": "https://stackoverflow.com/users/5610655/jahirul-islam-monir"}, "edited": false, "score": 1, "creation_date": 1472664792, "post_id": 39255334, "comment_id": 65847157, "body": "@JahirulIslamMonir thank you. Also, if you&#39;d like to avoid negative votes, show us what you have tried so far. And if you have no clue but you really need to do this, try to look for examples sorting strings (there are tons of). Or at least, ask what&#39;s up with std::qsort (like what do I need to pass over). Just tell a little bit more about your problem. :) good luck on next question!"}], "tags": [], "owner": {"reputation": 5093, "user_id": 6039995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QuCId.png?s=128&g=1", "display_name": "Stack Danny", "link": "https://stackoverflow.com/users/6039995/stack-danny"}, "is_accepted": true, "score": 2, "last_activity_date": 1472663413, "creation_date": 1472663413, "answer_id": 39255334, "question_id": 39255148, "link": "https://stackoverflow.com/questions/39255148/how-can-i-sort-a-string-with-integers-in-c/39255334#39255334", "title": "How can i sort a string with integers in c++?", "body": "<p>Here it's done with std::sort from the header algorithm</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;algorithm&gt;\n#include &lt;vector&gt;\n\nint main(){\n\n    std::vector&lt;std::string&gt; nums{\n        \"922003001020293839297830207344987344973074734\",\n        \"766352786207892397340783784078348747606208602\",\n        \"182823068326283756515117829362376823572395775\"\n    };\n\n\n    std::cout &lt;&lt; \"unsorted: \" &lt;&lt; std::endl;\n    for (auto i : nums){\n        std::cout &lt;&lt; i &lt;&lt; std::endl;\n    }\n\n    std::sort(nums.begin(), nums.end()); //sort it\n\n\n    std::cout &lt;&lt; \"\\nsorted: \" &lt;&lt; std::endl;\n    for (auto i : nums){\n        std::cout &lt;&lt; i &lt;&lt; std::endl;\n    }\n\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>unsorted: \n922003001020293839297830207344987344973074734\n766352786207892397340783784078348747606208602\n182823068326283756515117829362376823572395775\n\nsorted: \n182823068326283756515117829362376823572395775\n766352786207892397340783784078348747606208602\n922003001020293839297830207344987344973074734\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 5610655, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VBn8i.jpg?s=128&g=1", "display_name": "Jahirul Islam Monir", "link": "https://stackoverflow.com/users/5610655/jahirul-islam-monir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1098, "favorite_count": 0, "accepted_answer_id": 39255334, "answer_count": 2, "score": -9, "last_activity_date": 1610560844, "creation_date": 1472662623, "last_edit_date": 1610560844, "question_id": 39255148, "link": "https://stackoverflow.com/questions/39255148/how-can-i-sort-a-string-with-integers-in-c", "title": "How can i sort a string with integers in c++?", "body": "<p>I want to sort some strings of the same size. The size of the string can be very large(10^18). How can I sort all the stings in less possible time? The size of all the inputted string will be equal. How can I sort these strings in less amount of time possible?</p>\n<pre><code>922003001020293839297830207344987344973074734\n766352786207892397340783784078348747606208602\n182823068326283756515117829362376823572395775\n//the size of all the strings are equal\n</code></pre>\n<p>Can anyone please explain a better way of sorting?\nThanks Your any help will be highly appreciated.</p>\n"}, {"tags": ["c++", "arduino"], "comments": [{"owner": {"reputation": 794, "user_id": 1128487, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/pcJ0L.jpg?s=128&g=1", "display_name": "Mustafa Ozturk", "link": "https://stackoverflow.com/users/1128487/mustafa-ozturk"}, "edited": false, "score": 0, "creation_date": 1472663143, "post_id": 39255127, "comment_id": 65846256, "body": "Can you try using <code>istringstream is(buffer); is &gt;&gt; lat &gt;&gt; lng &gt;&gt; alt &gt;&gt; ap_groundspeed &gt;&gt; ap_heading;</code>?"}, {"owner": {"reputation": 3994, "user_id": 622097, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/7VG7S.png?s=128&g=1", "display_name": "Arnold", "link": "https://stackoverflow.com/users/622097/arnold"}, "reply_to_user": {"reputation": 794, "user_id": 1128487, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/pcJ0L.jpg?s=128&g=1", "display_name": "Mustafa Ozturk", "link": "https://stackoverflow.com/users/1128487/mustafa-ozturk"}, "edited": false, "score": 0, "creation_date": 1472664786, "post_id": 39255127, "comment_id": 65847154, "body": "Library sstream does not exist."}], "answers": [{"tags": [], "owner": {"reputation": 3994, "user_id": 622097, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/7VG7S.png?s=128&g=1", "display_name": "Arnold", "link": "https://stackoverflow.com/users/622097/arnold"}, "is_accepted": true, "score": 0, "last_activity_date": 1472671358, "creation_date": 1472671358, "answer_id": 39257488, "question_id": 39255127, "link": "https://stackoverflow.com/questions/39255127/arduino-error-unable-to-find-a-register-to-spill-in-class-no-regs/39257488#39257488", "title": "Arduino error &quot;unable to find a register to spill in class &#39;NO_REGS&#39;&quot;", "body": "<p>Searches on the web seem to point to a bug in <a href=\"https://github.com/arduino/Arduino/issues/3972\" rel=\"nofollow\">the cpp compiler</a> used in version 1.6.9 (and other 1.6.x versions. By \"upgrading\" the arduino IDE from 1.6.9 to 1.0.6 the problem disappears. It is not the neatest way but it works. As I had not used any features of the 1.6 versions upgrading was no problem.</p>\n"}], "owner": {"reputation": 3994, "user_id": 622097, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/7VG7S.png?s=128&g=1", "display_name": "Arnold", "link": "https://stackoverflow.com/users/622097/arnold"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2353, "favorite_count": 1, "accepted_answer_id": 39257488, "answer_count": 1, "score": 2, "last_activity_date": 1472671358, "creation_date": 1472662550, "last_edit_date": 1472671043, "question_id": 39255127, "link": "https://stackoverflow.com/questions/39255127/arduino-error-unable-to-find-a-register-to-spill-in-class-no-regs", "title": "Arduino error &quot;unable to find a register to spill in class &#39;NO_REGS&#39;&quot;", "body": "<p>I get an error when compiling a sketch. This sketch compiled well in previous versions (1.0.6) of the arduino IDE, I know use 1.6.9. I don't understand the message. The message is this:</p>\n\n<pre><code>Arduino: 1.6.9 (Windows 7), TD: 1.29, Board: \"Arduino/Genuino Micro\"\n\nC:\\Users\\arnold\\AppData\\Local\\Arduino15\\packages\\arduino\\hardware\n    \\avr\\1.6.13\\cores\\arduino\\main.cpp: In function 'main':\n\nC:\\Users\\arnold\\AppData\\Local\\Arduino15\\packages\\arduino\\hardware\n    \\avr\\1.6.13\\cores\\arduino\\main.cpp:51:1: error: unable to find a \n     register to spill in class 'NO_REGS'\n\n }\n\n ^\n\nC:\\Users\\arnold\\AppData\\Local\\Arduino15\\packages\\arduino\\hardware\n    \\avr\\1.6.13\\cores\\arduino\\main.cpp:51:1: error: this is the insn:\n\n(insn 601 598 604 45 (set (mem:QI (post_dec:HI (reg/f:HI 32 __SP_L__)) [0  S1 A8])\n\n        (subreg:QI (reg/f:HI 658) 1)) sketch\\coordinates.cpp:23 1 {pushqi1}\n\n     (expr_list:REG_ARGS_SIZE (const_int 1 [0x1])\n\n        (nil)))\n\nC:\\Users\\arnold\\AppData\\Local\\Arduino15\\packages\\arduino\\hardware\\avr\\1.6.13\\cores\\arduino\\main.cpp:51: confused by earlier errors, bailing out\n\nlto-wrapper: C:\\Users\\arnold\\AppData\\Local\\Arduino15\\packages\\arduino\\tools\\avr-gcc\\4.9.2-atmel3.5.3-arduino2/bin/avr-gcc returned 1 exit status\n\nc:/users/arnold/appdata/local/arduino15/packages/arduino/tools/avr-gcc/4.9.2-atmel3.5.3-arduino2/bin/../lib/gcc/avr/4.9.2/../../../../avr/bin/ld.exe: lto-wrapper failed\n\ncollect2.exe: error: ld returned 1 exit status\nexit status 1\nError compiling for board Arduino/Genuino Micro.\n</code></pre>\n\n<p>It seems to refer to class coordinates, line 23. I use a sscanf function in that line.</p>\n\n<p>coordinates.cpp</p>\n\n<pre><code>#include \"coordinates.h\"\n\n// Include common data (shared bps and such)\n#include \"D:\\home\\arnold\\development\\arduino\\drone\\serial_comm\\data.h\"\n// TX_FORMAT_1 found in data.h: #define TX_FORMAT_1 \"%ld %ld %ld %d %d\"\nCoordinates::Coordinates ()\n{\n   ap_latitude = 0; \n   ap_longitude = 0;\n   ap_bar_altitude = 0;\n   ap_groundspeed = 0;\n   ap_heading = 0;\n   noGPSLock = 1;\n   setHome (52.026919, 6.373969); // Defaults to Varsel airport\n} /*** Coordinates ***/\n\n// Decodes a data string\nvoid Coordinates::readSettings (char *buffer)\n{\n   int32_t lat, lng;\n   int32_t alt;\n\n   sscanf (buffer, TX_FORMAT_1, &amp;lat, &amp;lng, &amp;alt, &amp;ap_groundspeed, &amp;ap_heading);\n   ap_latitude  = double (lat) / 10000000.0;\n   ap_longitude = double (lng) / 10000000.0;\n   ap_bar_altitude = double (alt) / 100.0;\n   noGPSLock = (lat == 0) &amp;&amp; (lng == 0);\n} /*** readSettings ***/   \n\nint8_t Coordinates::setHome (double lat, double lng)\n{\n   if ((ap_latitude &gt;= -90000000) &amp;&amp; (ap_latitude &lt;= +90000000) &amp;&amp;\n       (ap_longitude &gt;= -180000000) &amp;&amp; (ap_longitude &lt;= 180000000))\n   {\n      home_latitude  = lat;  \n      home_longitude = lng;\n      Serial.print (F (\"New home set at: (\"));\n      Serial.print (home_latitude, 7);\n      Serial.print (F (\", \"));\n      Serial.print (home_longitude, 7);\n      Serial.println (\")\");\n      return 1; // ok\n   } else\n   {\n      Serial.print (F (\"Couldn't set home. Lat = \"));\n      Serial.print (ap_latitude, 7);\n      Serial.print (F (\"long = \"));\n      Serial.print (ap_longitude, 7);\n      Serial.println (\"\");\n      return 0; // abnormal values encountered, no home set, return error\n   } // if\n} /*** setHome ***/\n\n// Returns the distance of two coordinates (in decimal degrees) in meters\ndouble Coordinates::haverSine (double lat1, double lon1, double lat2, double lon2)\n{\n   double R, phi_1, phi_2, phi_delta;\n   double lambda_delta;\n   double a, c;\n\n   phi_1 = radians (lat1);\n   phi_2 = radians (lat2);\n   phi_delta = radians (lat2-lat1);\n   lambda_delta = (radians (lon2) - radians (lon1));\n\n   a = sin(phi_delta/2) * sin(phi_delta/2) +\n       cos(phi_1) * cos(phi_2) *\n        sin(lambda_delta/2) * sin(lambda_delta/2);\n\n   if (a &lt; 0.0) a = 0.0;\n   c = 2.0 * atan2 (sqrt (a), sqrt (1-a));\n   return Radius * c;\n} /*** haverSine ***/\n\n// Returns the distance between ap_lat/long and home_lat/long in meters\ndouble Coordinates::distanceToHome ()\n{\n   return haverSine (ap_latitude, ap_longitude, home_latitude, home_longitude);\n} /*** distanceToHome ***/\n\n// returns the time (s) an object takes to fall to earth (in NL) given a height (in m)\ndouble Coordinates::fallTime (double h)\n{\n   double val = 2.0 * h / g;\n\n   if (val &gt; 0.0) // Value should be &gt; 0\n      return sqrt (val);\n   else // else return 0, no check on negative results (which is erroneous)\n      return 0.0;   \n} /*** fallTime ***/\n\n// return the number of meters travelled given time t (s) and speed v (m/s)\ndouble Coordinates::travelled (double t, double v)\n{\n   return v * t;      \n} /*** travelled ***/\n\n// return the number of meters travelled given time t (s) and \n// current ground speed (m/s)\ndouble Coordinates::distanceToTravel (double t)\n{\n   return travelled (t, ap_groundspeed);      \n} /*** distanceToTravel ***/\n\ndouble Coordinates::computeAngle (double x1, double y1, double x2, double y2)\n{\n   double deltaY = y2 - y1;\n   double deltaX = x2 - x1;\n   double angleInDegrees = atan2(deltaY, deltaX) * 180 / PI;\n\n   return angleInDegrees;\n} /*** computeAngle ***/\n\nvoid Coordinates::printStatus (Stream* stream)\n{\n   double t;\n   double d;\n\n   Serial.print (F(\"&gt;&gt;&gt; Lat: \"));\n   Serial.print (ap_latitude, 7);\n   Serial.print (F(\", Long: \"));\n   Serial.print (ap_longitude, 7);\n   Serial.print (F(\", Alt: \"));\n   Serial.print (ap_bar_altitude);\n   Serial.print (F(\", Speed: \"));\n   Serial.print (ap_groundspeed);\n   Serial.print (F(\", Heading: \"));\n   Serial.print (ap_heading);\n   Serial.print (F(\", distance: \"));\n   Serial.print (distanceToHome ());\n   Serial.print (F(\", Angle: \"));\n   Serial.print (computeAngle (ap_latitude, ap_longitude, home_latitude, home_longitude), 7);\n   Serial.println (\"\");\n\n   t = fallTime (double (ap_groundspeed));\n   d = abs (distanceToHome () - distanceToTravel (t));\n   Serial.print (F (\"Given Alt - drop time: \"));\n   Serial.print (t);\n   Serial.print (F(\", d(travel): \"));\n   Serial.print (travelled (t, ap_bar_altitude), 4);\n   Serial.print (F(\", d (ground speed): \"));\n   Serial.print (distanceToTravel (t));\n   Serial.print (F(\", abs (d (home)-d (travel)): \"));\n   Serial.print (d, 4);\n   Serial.println (\"\");\n} /*** printStatus ***/\n</code></pre>\n\n<p>coordinates.h</p>\n\n<pre><code>#ifndef coordinates__h\n#define coordinates__h\n\n#include &lt;arduino.h&gt;\n#include &lt;HardwareSerial.h&gt;\n\nconst double Radius = 6367444.5; // radius of earth in meters\nconst double g = 9.8124; // m/s2 for Varsel airport\n\nclass Coordinates\n{\nprivate:\n\npublic:\n   double   ap_latitude;              // decimal degrees\n   double   ap_longitude;             // decimal degrees\n   double   ap_bar_altitude;          // 100 = 1m\n   uint32_t ap_groundspeed;           // in m/s\n   uint32_t ap_heading;               // degrees\n\n   double home_latitude;\n   double home_longitude;\n\n   int8_t noGPSLock;\n\n   Coordinates ();\n   void   readSettings (char *buffer);\n   int8_t setHome (double lat, double lng);\n   double haverSine (double lat1, double lon1, double lat2, double lon2);\n   double distanceToHome ();\n   double fallTime (double h);\n   double travelled (double t, double v);\n   double distanceToTravel (double t);\n   double computeAngle (double x1, double y1, double x2, double y2);\n   void   printStatus (Stream* stream);\n}; /*** class: Pwn ***/\n\n#endif\n</code></pre>\n\n<p>Does anyone how I can avoid this error?</p>\n\n<p><strong>Edit 1</strong></p>\n\n<p>When experimenting I noticed that reading one variable like:</p>\n\n<pre><code>sscanf (buffer, TX_FORMAT_1, &amp;lat);\n</code></pre>\n\n<p>compiles correctly. Adding a second variable however, generates the error again.</p>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-2015"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1472662359, "post_id": 39255052, "comment_id": 65845839, "body": "Are you using a <code>std::string</code> or <code>std::wstring</code>.  <code>L&quot;&quot;</code> is for wide characters."}, {"owner": {"reputation": 792, "user_id": 4783560, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7AGPX.jpg?s=128&g=1", "display_name": "DogeAmazed", "link": "https://stackoverflow.com/users/4783560/dogeamazed"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1472662458, "post_id": 39255052, "comment_id": 65845888, "body": "@NathanOliver I&#39;m using std::wstring but this problem also happens with std::string. For clarification, I edit it to std::wstring"}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1472662925, "post_id": 39255052, "comment_id": 65846161, "body": "And it worked in Update 2?"}, {"owner": {"reputation": 792, "user_id": 4783560, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7AGPX.jpg?s=128&g=1", "display_name": "DogeAmazed", "link": "https://stackoverflow.com/users/4783560/dogeamazed"}, "reply_to_user": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1472663696, "post_id": 39255052, "comment_id": 65846532, "body": "@RustyX Yes, worked on Update 2"}], "answers": [{"tags": [], "owner": {"reputation": 792, "user_id": 4783560, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7AGPX.jpg?s=128&g=1", "display_name": "DogeAmazed", "link": "https://stackoverflow.com/users/4783560/dogeamazed"}, "is_accepted": true, "score": 2, "last_activity_date": 1473604665, "creation_date": 1473604665, "answer_id": 39437170, "question_id": 39255052, "link": "https://stackoverflow.com/questions/39255052/inspecting-stl-container-not-working-right/39437170#39437170", "title": "Inspecting STL container not working right", "body": "<p>Somehow Visual Studio destroyed itself with the Update 3. I had to reinstall the English Language Pack and set it in Visual Studio (before it was German and there was no option for English). Now it works.</p>\n\n<p>Related: <a href=\"https://connect.microsoft.com/VisualStudio/feedback/details/1676171/change-in-c-stl-container-implementation-causes-debug-visualizer-error\" rel=\"nofollow\">https://connect.microsoft.com/VisualStudio/feedback/details/1676171/change-in-c-stl-container-implementation-causes-debug-visualizer-error</a></p>\n"}], "owner": {"reputation": 792, "user_id": 4783560, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7AGPX.jpg?s=128&g=1", "display_name": "DogeAmazed", "link": "https://stackoverflow.com/users/4783560/dogeamazed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 39437170, "answer_count": 1, "score": 3, "last_activity_date": 1473604665, "creation_date": 1472662223, "last_edit_date": 1495541344, "question_id": 39255052, "link": "https://stackoverflow.com/questions/39255052/inspecting-stl-container-not-working-right", "title": "Inspecting STL container not working right", "body": "<p>Since Update 3 of Visual Studio 2015, I have the problem that the Inspector won't show me the informations like the string content of an <code>std::wstring</code> in the first place. I had to open the Inspector first to see the string.\nI tried to fixed the problem with <a href=\"https://stackoverflow.com/questions/32656222/inspecting-stl-containers-in-visual-studio-2015\">this question</a> but it don't work.\nAlso <code>std::string</code>, <code>std::vector&lt;T&gt;</code>, etc. don't work and only show <code>{...}</code>.</p>\n\n<p>Screenshot (Instead of <code>{...}</code> there should be something like <code>L\"Hello\"</code>):\n<a href=\"https://i.stack.imgur.com/FFEx2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FFEx2.png\" alt=\"Inspector\"></a></p>\n"}, {"tags": ["c++", "date", "time", "interface", "com"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 2, "creation_date": 1472662408, "post_id": 39255018, "comment_id": 65845863, "body": "<code>VarBstrFromDate</code>, <code>VariantTimeToSystemTime</code>"}, {"owner": {"reputation": 121, "user_id": 3682911, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tbMUk.gif?s=128&g=1", "display_name": "Space Rabbit", "link": "https://stackoverflow.com/users/3682911/space-rabbit"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1472675081, "post_id": 39255018, "comment_id": 65852804, "body": "Works. Thanks a lot."}], "owner": {"reputation": 121, "user_id": 3682911, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tbMUk.gif?s=128&g=1", "display_name": "Space Rabbit", "link": "https://stackoverflow.com/users/3682911/space-rabbit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1472662098, "creation_date": 1472662098, "question_id": 39255018, "link": "https://stackoverflow.com/questions/39255018/how-to-convert-the-value-of-date-property-of-iupdatehistoryentry-to-readable-for", "title": "How to convert the value of DATE property of IUpdateHistoryEntry to readable format", "body": "<p>Can not understand how to convert <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa386422(v=vs.85).aspx\" rel=\"nofollow\">DATE</a> type to redable format.\nAs I understood type DATE is <code>typedef double DATE;</code>. In my case i get value 42463.4. How to conver this type to redable format like day/month/year/hours/minutes/seconds? Thanks.</p>\n"}, {"tags": ["c++", "linux", "macos", "usb", "libusb"], "answers": [{"tags": [], "owner": {"reputation": 39, "user_id": 8114964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e03d9981cf9a32b24ea6d0db63bfb0b3?s=128&d=identicon&r=PG&f=1", "display_name": "Andre Eggert", "link": "https://stackoverflow.com/users/8114964/andre-eggert"}, "is_accepted": false, "score": 0, "last_activity_date": 1496765988, "creation_date": 1496765988, "answer_id": 44395144, "question_id": 39254961, "link": "https://stackoverflow.com/questions/39254961/how-to-map-a-usb-device-with-a-known-bus-address-to-the-mounted-path/44395144#44395144", "title": "How to map a usb device with a known bus address to the mounted path?", "body": "<p>The not so straight forward but feasible way is to use sysfs like this:\nFind the USB device you are looking for by browsing <code>/sys/class/tty/ttyUSBx</code></p>\n\n<p><code>cd</code> into the directory of the device of your choice.</p>\n\n<p>Execute <code>realpath .</code></p>\n\n<p>This will show you something like this: <code>/sys/devices/pci0000:00/0000:00:1d.0/usb2/2-1/2-1.2/2-1.2:1.0/ttyUSB0/tty/ttyUSB0</code></p>\n\n<p><code>cd</code> to <code>/sys/devices/pci0000:00/0000:00:1d.0/usb2/2-1/2-1.2/2-1.2:1.0</code> and <code>cat uevent</code>.\nThis will contain the USB VID/PID under PRODUCT=xxxxxxxx</p>\n\n<p>There is obviously some work required to automate it with C++ but it is doable.</p>\n"}], "owner": {"reputation": 856, "user_id": 3768365, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/g6ITx.jpg?s=128&g=1", "display_name": "p0fi", "link": "https://stackoverflow.com/users/3768365/p0fi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 638, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1496765988, "creation_date": 1472661901, "question_id": 39254961, "link": "https://stackoverflow.com/questions/39254961/how-to-map-a-usb-device-with-a-known-bus-address-to-the-mounted-path", "title": "How to map a usb device with a known bus address to the mounted path?", "body": "<p>I have an application which is using <code>libusb</code> for detecting connected usb devices. This library gives me the VID/PID and bus as well as port number of the connected devices. I however need (after recognizing the device by PID/VID) to talk to the device via <code>boost::asio::io_service</code>, for this i need the device path in the <code>/dev</code> directory. The device usually gets mounted as something like <code>/dev/ttyUSBx</code>. How do I match the bus and port number to the path? A cross platform solution which works on linux and macOS would be preferable. If there is no cross platform solution, are there ways for both OS?</p>\n\n<p>Thanks a lot!</p>\n"}, {"tags": ["c++", "qt", "qtreewidget"], "comments": [{"owner": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "edited": false, "score": 0, "creation_date": 1472664554, "post_id": 39254878, "comment_id": 65847017, "body": "Do you mean expand while you drag?"}, {"owner": {"reputation": 319, "user_id": 1799200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/07e99a64508e8f22339a9d7e13a3200c?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/1799200/james"}, "reply_to_user": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "edited": false, "score": 0, "creation_date": 1472665054, "post_id": 39254878, "comment_id": 65847314, "body": "No i mean, if i drag  A into B, i want B to expand so that i can see A was placed inside it."}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1472666728, "post_id": 39254878, "comment_id": 65848294, "body": "I&#39;m not sure I understand your comments about <code>dropEvent</code>.  <code>QDropEvent::pos</code> gives you the position of the drop.  That can be mapped and used as the argument to <code>QTreeView::indexAt</code>.  Once you have that <code>QModelIndex</code> you can expand/collapse or do whatever you want with it."}, {"owner": {"reputation": 319, "user_id": 1799200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/07e99a64508e8f22339a9d7e13a3200c?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/1799200/james"}, "edited": false, "score": 0, "creation_date": 1472732968, "post_id": 39254878, "comment_id": 65877535, "body": "Thanks for pointing me the right direction, I missed QDropEvent::pos though dropEvent still has some persistent problems.  I&#39;ve updated my questions to reflect the new information."}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1472755386, "post_id": 39254878, "comment_id": 65892170, "body": "You&#39;re using <code>this-&gt;itemAt(modelIndex.row(), modelIndex.column())</code>.  I think what you actually want is <a href=\"http://doc.qt.io/qt-5/qtreewidget.html#itemFromIndex\" rel=\"nofollow noreferrer\"><code>this-&gt;itemFromIndex(modelIndex)</code></a> <i>or</i> <a href=\"http://doc.qt.io/qt-5/qtreewidget.html#itemAt\" rel=\"nofollow noreferrer\"><code>this-&gt;itemAt(event-&gt;pos())</code></a>."}], "answers": [{"tags": [], "owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "is_accepted": true, "score": 1, "last_activity_date": 1472756479, "creation_date": 1472756479, "answer_id": 39279032, "question_id": 39254878, "link": "https://stackoverflow.com/questions/39254878/make-qtreewidget-items-expand-on-drag-and-drop/39279032#39279032", "title": "make QTreeWidget items expand on drag and drop", "body": "<p>You're passing the <code>QModelIndex</code> row and column to <code>QTreeWidget::itemAt</code>, but what it <em>actually</em> wants are the widget relative x and y coords.</p>\n\n<p>Based on the info you've provided, I think what you need is something like...</p>\n\n<pre><code>void ScenarioTreeWidget::MyTreeWidget::dropEvent (QDropEvent *event)\n{\n  QModelIndex modelIndex = this-&gt;indexAt(event-&gt;pos());\n  QTreeWidgetItem* item = this-&gt;itemAt(modelIndex);\n  this-&gt;expandItem(item);\n  QWidget::dropEvent(event);\n}\n</code></pre>\n\n<p>or (a little bit more concisely)...</p>\n\n<pre><code>void ScenarioTreeWidget::MyTreeWidget::dropEvent (QDropEvent *event)\n{\n  QTreeWidgetItem* item = this-&gt;itemAt(event-&gt;pos());\n  this-&gt;expandItem(item);\n  QWidget::dropEvent(event);\n}\n</code></pre>\n"}], "owner": {"reputation": 319, "user_id": 1799200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/07e99a64508e8f22339a9d7e13a3200c?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/1799200/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 718, "favorite_count": 0, "accepted_answer_id": 39279032, "answer_count": 1, "score": 1, "last_activity_date": 1472850631, "creation_date": 1472661630, "last_edit_date": 1472850631, "question_id": 39254878, "link": "https://stackoverflow.com/questions/39254878/make-qtreewidget-items-expand-on-drag-and-drop", "title": "make QTreeWidget items expand on drag and drop", "body": "<p>I'm trying to find a way, without re-implementing drag and drop, to have tree items expand when an item is dropped into them.  I've looked into expand all on the top level addItem as well as over writing the dropEvent.  The addItem approach doesn't work (assuming this is because addItem is not used by the native drag and drop implementation) and dropEvent presents a host of problems, specifically that mimeData is poorly suited and gives me a hook back into the tree.  I'm new to Qt, so I may be missing something simple.</p>\n\n<p>Any other approaches would be welcome.</p>\n\n<p>Edit:\nworking off of the information provided by @G.M. I've gone back to trying to overwrite dropEvent. </p>\n\n<pre><code>void ScenarioTreeWidget::MyTreeWidget::dropEvent(QDropEvent *event)\n{\n    QModelIndex modelIndex = this-&gt;indexAt(event-&gt;pos());\n    QTreeWidgetItem* item = this-&gt;itemAt(modelIndex.row(), modelIndex.column());\n    this-&gt;expandItem(item);\n    QWidget::dropEvent(event);\n}\n</code></pre>\n\n<p>Two issues, the item that is expanding is the one being dragged, not the item it is dropped onto (don't know if this is because the index is the index for the dragged item or if I have a bug in my code).  Additionally I am still losing the default dropEvent behavior (when I drag on drop with this code all items stay where they were before the drag and drop).</p>\n"}, {"tags": ["c++", "gcc", "clang", "mingw", "msys2"], "answers": [{"comments": [{"owner": {"reputation": 32156, "user_id": 783510, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/fgbAM.png?s=128&g=1", "display_name": "Philipp Cla&#223;en", "link": "https://stackoverflow.com/users/783510/philipp-cla%c3%9fen"}, "edited": false, "score": 0, "creation_date": 1472669288, "post_id": 39256699, "comment_id": 65849701, "body": "Agreed that the absolute paths are a bad idea. My current workaround is actually to run &quot;sed&quot; and remove the prefix, so they become relative paths. I think I should try to get a patch in the cxxtest project to stop generating the absolute paths (at least with an opt-in switch). Working around seems not worth it from what I understand."}], "tags": [], "owner": {"reputation": 70803, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "is_accepted": true, "score": 3, "last_activity_date": 1472668482, "creation_date": 1472668482, "answer_id": 39256699, "question_id": 39254848, "link": "https://stackoverflow.com/questions/39254848/gcc-and-clang-under-msys2-cannot-resolve-includes-with-absolute-paths/39256699#39256699", "title": "gcc and clang under msys2 cannot resolve includes with absolute paths", "body": "<p>Since you are running compilers that use MinGW-w64 as their runtime environment, they don't recognize POSIX-style paths like that.  I think they actually interpret the root directory \"/\" to be \"C:\\\".  Other than that, they would only recognize native Windows-style paths.</p>\n\n<p>I recommend that you pass the argument <code>-I/home/phil/example</code> to your compiler from some program running in the msys-2.0.dll POSIX emulation runtime environment (e.g. /usr/bin/bash or /usr/bin/make).  The msys-2.0.dll runtime will then convert that argument to use a native Windows path so the compiler can understand it, and statements like <code>#include &lt;file1.h&gt;</code> will work.  Alternatively, you might try putting a Windows-style path in your source code, e.g. the path should start with <code>C:\\</code>.</p>\n\n<p>Note however that having absolute paths in source code or build scripts is a bad idea since it makes it harder to build the code on a different computer.  You could consider using environment variables or relative paths.</p>\n"}, {"comments": [{"owner": {"reputation": 32156, "user_id": 783510, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/fgbAM.png?s=128&g=1", "display_name": "Philipp Cla&#223;en", "link": "https://stackoverflow.com/users/783510/philipp-cla%c3%9fen"}, "edited": false, "score": 0, "creation_date": 1472672574, "post_id": 39257518, "comment_id": 65851496, "body": "Oh, actually msys2 proved very useful, especially as it was the only way how I got TBB (Intel Threading Building Blocks) working. The testing part is a relative small issue. Under Cygwin, I run into more problems. By the way, as you write msys, it could be a misunderstanding, as I&#39;m using msys2, which is a recent rewrite of msys."}, {"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "reply_to_user": {"reputation": 32156, "user_id": 783510, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/fgbAM.png?s=128&g=1", "display_name": "Philipp Cla&#223;en", "link": "https://stackoverflow.com/users/783510/philipp-cla%c3%9fen"}, "edited": false, "score": 0, "creation_date": 1472674831, "post_id": 39257518, "comment_id": 65852677, "body": "MSYS2 is again a Cygwin fork; and Cygwin has the MinGW-w64 compilers as a package.  It would be great of MSYS2 had a home page where it describes the concrete list of issues that it solves over using Cygwin."}], "tags": [], "owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "is_accepted": false, "score": 0, "last_activity_date": 1472671485, "creation_date": 1472671485, "answer_id": 39257518, "question_id": 39254848, "link": "https://stackoverflow.com/questions/39254848/gcc-and-clang-under-msys2-cannot-resolve-includes-with-absolute-paths/39257518#39257518", "title": "gcc and clang under msys2 cannot resolve includes with absolute paths", "body": "<p>Try using the MinGW compiler that Cygwin provides as a package. (In other words, forget the MSYS environment; work under Cygwin, but build the code as before, in the MinGW style.)</p>\n\n<p>Then you should be able to have include references <code>/home/phil</code>; it will just resolve to <code>C:\\Cygwin\\home\\phil</code> or wherever your Cygwin root is.</p>\n\n<p>Actually, it might be possible under MSYS also (which, after all, is just the descendant of an old for of Cygwin). You just have to figure out what <code>/home/phil</code> is referring to, create that tree and work under there.</p>\n"}], "owner": {"reputation": 32156, "user_id": 783510, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/fgbAM.png?s=128&g=1", "display_name": "Philipp Cla&#223;en", "link": "https://stackoverflow.com/users/783510/philipp-cla%c3%9fen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 927, "favorite_count": 0, "accepted_answer_id": 39256699, "answer_count": 2, "score": 1, "last_activity_date": 1472671485, "creation_date": 1472661523, "last_edit_date": 1472670412, "question_id": 39254848, "link": "https://stackoverflow.com/questions/39254848/gcc-and-clang-under-msys2-cannot-resolve-includes-with-absolute-paths", "title": "gcc and clang under msys2 cannot resolve includes with absolute paths", "body": "<p>I try to get tests generated by the cxxtest framework working under a MinGW environment managed by mysys2. The tool generates C++ files with absolute paths. However, gcc seems to be unable to resolve this absolute paths.</p>\n\n<p>Here is a minimal example to demonstrate the problem:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// file1.h\n#include &lt;iostream&gt;\ninline void hallo() { std::cout &lt;&lt; \"Hallo\\n\"; }\n</code></pre>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// main.cpp\n#include \"/home/phil/example/file1.h\"\n\nint main()\n{\n  hallo();\n  return 0;\n}\n</code></pre>\n\n<p>The file exists (at least the msys2 shell resolves the path):</p>\n\n<pre><code>$ ls /home/phil/example/file1.h\n/home/phil/example/file1.h\n</code></pre>\n\n<p>... but calling g++ results in this error:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ g++ main.cpp\nmain.cpp:1:38: fatal error: /home/phil/example/file1.h: No such file or directory\n #include \"/home/phil/example/file1.h\"\n                                      ^\ncompilation terminated.\n</code></pre>\n\n<p>Same error with clang.</p>\n\n<p>Under a full Linux environment, the example works. It also works if I replace the absolute path by a relative one (<code>#include \"file1.h\"</code>).</p>\n\n<p>So, I assume the problem lies in the layer over Windows that is responsible to resolve paths. Not sure whether I should report it as a bug to the msys2 project, or whether it is a known problem. If it is a known problem, are there any workarounds (like setting <code>-I</code> options)?</p>\n\n<p>(If possible, I would like to avoid replace the absolute paths, as they are in generated code by the cxxtest framework. Technically, running a postprocessing step on the generated files would be possible but seems like a hack in the long run.)</p>\n"}, {"tags": ["python", "c++", "protocol-buffers"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1472661247, "post_id": 39254706, "comment_id": 65845272, "body": "Uhm, it shouldn&#39;t matter in which language the protobuf binary data was created. To make that transparent is protobuf&#39;s mere purpose. Also <code>message_cpp.SerializeToString(&amp;serialized_data);</code> doesn&#39;t produce protobuf binary data, but a string as the name says."}, {"owner": {"reputation": 4182, "user_id": 2992101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7363e9ce46406af3326492e2f6cf40ca?s=128&d=identicon&r=PG", "display_name": "michalsrb", "link": "https://stackoverflow.com/users/2992101/michalsrb"}, "edited": false, "score": 0, "creation_date": 1472661380, "post_id": 39254706, "comment_id": 65845355, "body": "You do not say by what means you transfer the serialized_data from C++ to Python. (E.g. saving them to file in C++ and loading in Python.) Did you verify that you get the same data across?"}, {"owner": {"reputation": 4666, "user_id": 2345870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a054847b5d1b9b5134bf7a7ff0d97cf?s=128&d=identicon&r=PG", "display_name": "rfkortekaas", "link": "https://stackoverflow.com/users/2345870/rfkortekaas"}, "edited": false, "score": 0, "creation_date": 1472663937, "post_id": 39254706, "comment_id": 65846657, "body": "The message data is contained in &#39;foo&#39;, you can print foo to get the actual human readable message data after ParseFromString."}, {"owner": {"reputation": 420, "user_id": 6776821, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ssQcb.png?s=128&g=1", "display_name": "Dong Li", "link": "https://stackoverflow.com/users/6776821/dong-li"}, "edited": false, "score": 0, "creation_date": 1472694340, "post_id": 39254706, "comment_id": 65858807, "body": "I update my question to make it clear :)"}, {"owner": {"reputation": 420, "user_id": 6776821, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ssQcb.png?s=128&g=1", "display_name": "Dong Li", "link": "https://stackoverflow.com/users/6776821/dong-li"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472694895, "post_id": 39254706, "comment_id": 65858936, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 I update my question. I serialize data into string because value type of data fed to zmq_send() is <code>string</code>. But the result of client seems <code>serialized_data</code> is not a regular string."}, {"owner": {"reputation": 420, "user_id": 6776821, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ssQcb.png?s=128&g=1", "display_name": "Dong Li", "link": "https://stackoverflow.com/users/6776821/dong-li"}, "reply_to_user": {"reputation": 4182, "user_id": 2992101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7363e9ce46406af3326492e2f6cf40ca?s=128&d=identicon&r=PG", "display_name": "michalsrb", "link": "https://stackoverflow.com/users/2992101/michalsrb"}, "edited": false, "score": 0, "creation_date": 1472695056, "post_id": 39254706, "comment_id": 65858982, "body": "@michalsrb I want to realize the inter-process communication, so I do not save the data in C++ and load them in python."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472695107, "post_id": 39254706, "comment_id": 65858992, "body": "@DongLi You woke me now at the left foot getting up from my coffin. BAD CALL. Introducing zmq opens a completely new realm."}, {"owner": {"reputation": 420, "user_id": 6776821, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ssQcb.png?s=128&g=1", "display_name": "Dong Li", "link": "https://stackoverflow.com/users/6776821/dong-li"}, "reply_to_user": {"reputation": 4666, "user_id": 2345870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a054847b5d1b9b5134bf7a7ff0d97cf?s=128&d=identicon&r=PG", "display_name": "rfkortekaas", "link": "https://stackoverflow.com/users/2345870/rfkortekaas"}, "edited": false, "score": 0, "creation_date": 1472695137, "post_id": 39254706, "comment_id": 65859000, "body": "@rfkortekaas I update my question and print some results."}, {"owner": {"reputation": 420, "user_id": 6776821, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ssQcb.png?s=128&g=1", "display_name": "Dong Li", "link": "https://stackoverflow.com/users/6776821/dong-li"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472695246, "post_id": 39254706, "comment_id": 65859033, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Sorry... I&#39;m in China, so it&#39;s morning now... Sorry again."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472695451, "post_id": 39254706, "comment_id": 65859079, "body": "@DongLi It wasn&#39;t that much abiout the daylight zone, but introducing ZMQ. That opens a quite broad field."}, {"owner": {"reputation": 420, "user_id": 6776821, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ssQcb.png?s=128&g=1", "display_name": "Dong Li", "link": "https://stackoverflow.com/users/6776821/dong-li"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472695886, "post_id": 39254706, "comment_id": 65859169, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 I used ZMQ before and it\u2018s really a sharp sword in IPC field."}], "answers": [{"comments": [{"owner": {"reputation": 420, "user_id": 6776821, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ssQcb.png?s=128&g=1", "display_name": "Dong Li", "link": "https://stackoverflow.com/users/6776821/dong-li"}, "edited": false, "score": 0, "creation_date": 1472694536, "post_id": 39261223, "comment_id": 65858852, "body": "I updated my question just now. If I want to recover my image info from <code>data</code> in your answer, what should I do?"}, {"owner": {"reputation": 30998, "user_id": 2686899, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/StqEe.jpg?s=128&g=1", "display_name": "Kenton Varda", "link": "https://stackoverflow.com/users/2686899/kenton-varda"}, "reply_to_user": {"reputation": 420, "user_id": 6776821, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ssQcb.png?s=128&g=1", "display_name": "Dong Li", "link": "https://stackoverflow.com/users/6776821/dong-li"}, "edited": false, "score": 1, "creation_date": 1472697475, "post_id": 39261223, "comment_id": 65859502, "body": "@DongLi After you call <code>foo.ParseFromString()</code>, your data is now inside <code>foo</code>. You can access <code>foo.width</code>, <code>foo.height</code>, <code>foo.image</code>. <code>foo.ParseFromString()</code> does NOT return anything; it fills in <code>foo</code> with the message content."}], "tags": [], "owner": {"reputation": 30998, "user_id": 2686899, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/StqEe.jpg?s=128&g=1", "display_name": "Kenton Varda", "link": "https://stackoverflow.com/users/2686899/kenton-varda"}, "is_accepted": true, "score": 5, "last_activity_date": 1472691839, "creation_date": 1472691839, "answer_id": 39261223, "question_id": 39254706, "link": "https://stackoverflow.com/questions/39254706/how-to-parse-c-protobuf-binary-data-by-python-protobuf/39261223#39261223", "title": "How to parse C++ protobuf binary data by python protobuf?", "body": "<p><code>ParseFromString</code> parses <em>into</em> the object it is called on. It doesn't return anything. Use it like:</p>\n\n<pre><code>message = MyMessage()\nmessage.ParseFromString(data)\nprint message\n</code></pre>\n"}], "owner": {"reputation": 420, "user_id": 6776821, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ssQcb.png?s=128&g=1", "display_name": "Dong Li", "link": "https://stackoverflow.com/users/6776821/dong-li"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3089, "favorite_count": 1, "accepted_answer_id": 39261223, "answer_count": 1, "score": 4, "last_activity_date": 1472694305, "creation_date": 1472660976, "last_edit_date": 1472694305, "question_id": 39254706, "link": "https://stackoverflow.com/questions/39254706/how-to-parse-c-protobuf-binary-data-by-python-protobuf", "title": "How to parse C++ protobuf binary data by python protobuf?", "body": "<p>I use C++ protobuf to serialize data to string.</p>\n\n<pre><code>/***** cpp code *****/\nstring serialized_data;\nmessage_cpp.SerializeToString(&amp;serialized_data);\n</code></pre>\n\n<p><strong>Question:</strong> can I parse <code>serialized_data</code> in python? and how?</p>\n\n<p>I've tried the following code, but it did not work.</p>\n\n<pre><code>##### python code\nmessage_python = foo.ParseFromString(serialized_data)\nprint message_python\n</code></pre>\n\n<p>But I get <code>None</code> as the output of <code>print message_python</code>. I've also tried </p>\n\n<pre><code>##### python code\nmessage_python = foo.MergeFromString(serialized_data)\nprint message_python\n</code></pre>\n\n<p>But I get the length of string <code>serialized_data</code> as the output of <code>print message_python</code>, i.e. <code>message_python == len(serialized_data)</code>. This result agrees with <a href=\"https://developers.google.com/protocol-buffers/docs/reference/python/google.protobuf.message.Message-class#MergeFromString\" rel=\"nofollow noreferrer\">python protobuf API</a>.</p>\n\n<p>Does this means that I cannot parse the binary data in python, which are serialized in C++?</p>\n\n<p><strong>Update:</strong></p>\n\n<p>My <em>goal</em>\uff1a C++ server always generates image stream and image is sent to a python server.</p>\n\n<p>Here are my whole codes:</p>\n\n<p>.proto file:</p>\n\n<pre><code>message MyImage{\n    repeated int32 width = 1;\n    repeated int32 height = 2;\n    repeated bytes image = 3;\n}\n</code></pre>\n\n<p>C++ server:</p>\n\n<pre><code>zmq::context_t context(1);\nzmq::socket_t socket(context, ZMQ_REP);\nsocket.bind(\"tcp://localhost:5555\");\n\nMyImage message_cpp;\n// message_cpp.add_image(), add_width() and add_height() here.\n\nstring serialized_data;\nmessage_cpp.SerializeToString(&amp;serialized_data);\nint counter = 3;\nwhile (counter &gt; 0) {\n    zmq::message_t request;\n    socket.recv(&amp;request);\n    std::string replyMessage = std::string(static_cast&lt;char *&gt;(request.data()),\n                                           request.size());\n    std::cout &lt;&lt; \"Recived from client: \" + replyMessage &lt;&lt; std::endl;\n    sleep(1);\n    zmq::message_t reply(serialized_data.size());\n    memcpy((void*) reply.data(), serialized_data.data(), serialized_data.size());\n    std::cout &lt;&lt; \"---length of message to client: \" &lt;&lt; \n                  reply.size() &lt;&lt; std::endl;\n    socket.send(reply);\n\n    counter --;\n}\n</code></pre>\n\n<p>python client:</p>\n\n<pre><code>context = zmq.Context()\nsocket = context.socket(zmq.REQ)\nport = \"5555\"\nsocket.connect(\"tcp://localhost:%s\" %port)\nprint \"Connecting to server...\"\nfoo = my_image_pb2.MyImage()\n\nfor i in range(3):\n    socket.send(\"hello from python\")\n    serialized_data = socket.recv()\n    message_python = foo.ParseFromString(serialized_data)\n    print \"length of message from server:\", len(serialized_data),\"; type:\", type(message)\n    print \"-----\", message_python\n</code></pre>\n\n<p>This is the result:</p>\n\n<p>server:</p>\n\n<p><a href=\"https://i.stack.imgur.com/dqmpz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dqmpz.png\" alt=\"server\"></a></p>\n\n<p>client:</p>\n\n<p><a href=\"https://i.stack.imgur.com/RjPG5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RjPG5.png\" alt=\"client\"></a></p>\n\n<p>Why the <code>foo</code> is <code>None</code>, not a class? Any idea about how to fix it?</p>\n"}, {"tags": ["c++", "performance", "numbers"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1472660418, "post_id": 39254516, "comment_id": 65844830, "body": "Add a description of what is harmonic, or at least a reference."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1472660480, "post_id": 39254516, "comment_id": 65844866, "body": "<a href=\"https://en.wikipedia.org/wiki/Harmonic_number\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Harmonic_number</a>"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1472660547, "post_id": 39254516, "comment_id": 65844910, "body": "That <code>system(&quot;pause&quot;)</code> will make your program <i>infinitely</i> slow. It stops the program form doing anything more until a key is pressed. If a keypress is not coming it will wait forever."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1472660627, "post_id": 39254516, "comment_id": 65844951, "body": "One thing I would do is get rid of the branch in the loop."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 3, "creation_date": 1472660648, "post_id": 39254516, "comment_id": 65844966, "body": "There&#39;s no need to calculate both harmonic numbers. The first n terms of both series will cancel each other out when you subtract them, so you only need to calculate the terms for the residue of the higher series."}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 4, "last_activity_date": 1472661133, "creation_date": 1472661133, "answer_id": 39254745, "question_id": 39254516, "link": "https://stackoverflow.com/questions/39254516/faster-harmonic-number/39254745#39254745", "title": "Faster Harmonic Number?", "body": "<p>You don't need to calculate the full harmonic numbers. Assuming <code>n1 &lt; n2</code>, the two series will be:</p>\n\n<pre><code>H(n1) = 1 + 1/2 + 1/3 + ... + 1/n1\nH(n2) = 1 + 1/2 + 1/3 + ... + 1/n1 + 1/(n1+1) + 1(n1+2) + ... + 1/n2\n</code></pre>\n\n<p>So when you subtract <code>H(n2) - H(n1)</code>, the first <code>n1</code> terms in the two series cancel each other out, so</p>\n\n<pre><code>H(n2) - H(n1) = 1/(n1+1) + 1(n1+2) + ... + 1/n2\n</code></pre>\n\n<p>If <code>n1 &gt; n2</code> the result is the negative of this.</p>\n\n<pre><code>double result = 0, mult = 1;\nif (n1 &gt; n2) {\n    double temp = n1;\n    n1 = n2;\n    n2 = temp;\n    mult = -1;\n}\nfor (double denom = n1+1; denom &lt;= n2; denom++) {\n    result += 1/denom;\n}\nresult *= mult; // Flip the sign if we swapped n1 and n2\ncout &lt;&lt; fixed &lt;&lt; setprecision(10) &lt;&lt; result &lt;&lt; endl;\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 6779366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/627cb04fc23f098c5d8afd8593c4e7d9?s=128&d=identicon&r=PG&f=1", "display_name": "glow", "link": "https://stackoverflow.com/users/6779366/glow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 445, "favorite_count": 1, "accepted_answer_id": 39254745, "answer_count": 1, "score": 1, "last_activity_date": 1472661133, "creation_date": 1472660321, "question_id": 39254516, "link": "https://stackoverflow.com/questions/39254516/faster-harmonic-number", "title": "Faster Harmonic Number?", "body": "<p>I'm a beginner in programming. I am trying to make a program that given two numbers it substracts one harmonic from the other. (Input: n, m / Output: Hn-Hm)</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;math.h&gt;\nusing namespace std;\n\nint main() {\ndouble n1, n2, h1 = 0, h2 = 0, i;       // n = number, h = harmonic\ncin &gt;&gt; n1 &gt;&gt; n2;\n\n    if (n1 == 0) {\n        h1 = 0;\n    }\n    else {\n        for (i = 1; i &lt;= n1; i++) { \n            h1 += 1 / i;\n            if (i &lt;= n2) {\n                h2 += 1 / i;\n            }\n        }\n    }\n    cout &lt;&lt; fixed &lt;&lt; setprecision(10) &lt;&lt; h1 - h2 &lt;&lt; endl;\n\nsystem(\"pause\");\nreturn 0;\n}\n</code></pre>\n\n<p>The program gives correct results but I'm using a website of my university and it says that the program is slow. I've tried to make it faster but I can't figure out how. \nThanks.</p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1472660143, "post_id": 39254449, "comment_id": 65844692, "body": "The <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\">reference material</a> would answer this"}, {"owner": {"reputation": 1, "user_id": 5330679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7699c74a00208a53e6297594027cb45?s=128&d=identicon&r=PG&f=1", "display_name": "Appy", "link": "https://stackoverflow.com/users/5330679/appy"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1472660894, "post_id": 39254449, "comment_id": 65845094, "body": "Nathan, I looked into the material cited, couldn&#39;t find the answer.."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472661574, "post_id": 39254449, "comment_id": 65845460, "body": "@Appy There&#39;s not much difference between these statements. The first defines the initial size in the constructor, whereas the second does it with a separate call of <code>resize()</code>. It&#39;s actually hard to believe that you couldn&#39;t figure this out from the linked reference documentation."}, {"owner": {"reputation": 1, "user_id": 5330679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7699c74a00208a53e6297594027cb45?s=128&d=identicon&r=PG&f=1", "display_name": "Appy", "link": "https://stackoverflow.com/users/5330679/appy"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472664480, "post_id": 39254449, "comment_id": 65846969, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5 \u1fd6I was trying to point out the same that i couldn&#39;t find any difference in the two scenarios.  I thought them to be the same, the issue is i am getting a compilation error when am trying case 2, whereas in case 1 am not getting any build failure. Can that be related to the type of object for which the vector is created?"}, {"owner": {"reputation": 907, "user_id": 5344725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afe3363c7df76a6ddf2114b5b8793554?s=128&d=identicon&r=PG&f=1", "display_name": "Altainia", "link": "https://stackoverflow.com/users/5344725/altainia"}, "edited": false, "score": 0, "creation_date": 1472665552, "post_id": 39254449, "comment_id": 65847571, "body": "@Appy Best way to determine that is to replace <code>Ticker</code> with something trivial, like <code>int</code> and see if it still compiles (ignoring other later uses of your vector that expect <code>Ticker</code>). Also, it would help to include what your error is in the question"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472665598, "post_id": 39254449, "comment_id": 65847607, "body": "@Appy To ask about compiler errors provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that actually reproduces the problem and add the error messages verbatim in your post. As you see such kind of <i>shots in the dark</i> don&#39;t work well here."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1472670756, "post_id": 39254449, "comment_id": 65850569, "body": "I find it really strange that you didn&#39;t find it relevant to post the <i>exact</i> text of the compiler error in your question, since that is likely to be <i>the</i> best clue to getting a relevant answer."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5330679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7699c74a00208a53e6297594027cb45?s=128&d=identicon&r=PG&f=1", "display_name": "Appy", "link": "https://stackoverflow.com/users/5330679/appy"}, "edited": false, "score": 0, "creation_date": 1472665268, "post_id": 39255190, "comment_id": 65847427, "body": "I am getting a compilation error when am trying case 2, whereas in case 1 am not getting any build failure. Can that be related to the type of object for which the vector is created?"}, {"owner": {"reputation": 5093, "user_id": 6039995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QuCId.png?s=128&g=1", "display_name": "Stack Danny", "link": "https://stackoverflow.com/users/6039995/stack-danny"}, "reply_to_user": {"reputation": 1, "user_id": 5330679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7699c74a00208a53e6297594027cb45?s=128&d=identicon&r=PG&f=1", "display_name": "Appy", "link": "https://stackoverflow.com/users/5330679/appy"}, "edited": false, "score": 0, "creation_date": 1472665548, "post_id": 39255190, "comment_id": 65847569, "body": "mh. I have no clue why you&#39;d get an error. That&#39;s relly wierd. Must come from the class Ticker. If that&#39;s your class, look if the = operator is overloaded. It should be! If not it may cause some troubles when using alogorithms."}, {"owner": {"reputation": 1, "user_id": 5330679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7699c74a00208a53e6297594027cb45?s=128&d=identicon&r=PG&f=1", "display_name": "Appy", "link": "https://stackoverflow.com/users/5330679/appy"}, "edited": false, "score": 0, "creation_date": 1472666300, "post_id": 39255190, "comment_id": 65848068, "body": "Yes i have overloaded &#39;=&#39; operator with delete operation as mentioned in this answer to prohibit copying:   <a href=\"http://stackoverflow.com/a/5513928/5330679\">stackoverflow.com/a/5513928/5330679</a>"}, {"owner": {"reputation": 5093, "user_id": 6039995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QuCId.png?s=128&g=1", "display_name": "Stack Danny", "link": "https://stackoverflow.com/users/6039995/stack-danny"}, "reply_to_user": {"reputation": 1, "user_id": 5330679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7699c74a00208a53e6297594027cb45?s=128&d=identicon&r=PG&f=1", "display_name": "Appy", "link": "https://stackoverflow.com/users/5330679/appy"}, "edited": false, "score": 0, "creation_date": 1472666605, "post_id": 39255190, "comment_id": 65848221, "body": "Ok I tried to make a class, and make a vector of it, then resize it. I had to remove the dekonstruktor and it worked. Maybe try that."}, {"owner": {"reputation": 5093, "user_id": 6039995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QuCId.png?s=128&g=1", "display_name": "Stack Danny", "link": "https://stackoverflow.com/users/6039995/stack-danny"}, "reply_to_user": {"reputation": 1, "user_id": 5330679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7699c74a00208a53e6297594027cb45?s=128&d=identicon&r=PG&f=1", "display_name": "Appy", "link": "https://stackoverflow.com/users/5330679/appy"}, "edited": false, "score": 0, "creation_date": 1472666772, "post_id": 39255190, "comment_id": 65848315, "body": "it also worked when I removed the = operator, and the A(const A &amp;other)"}, {"owner": {"reputation": 4592, "user_id": 3179492, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/ZHPUJ.jpg?s=128&g=1", "display_name": "Peter VARGA", "link": "https://stackoverflow.com/users/3179492/peter-varga"}, "edited": false, "score": 0, "creation_date": 1472677767, "post_id": 39255190, "comment_id": 65854089, "body": "How does this answer the question?"}], "tags": [], "owner": {"reputation": 5093, "user_id": 6039995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QuCId.png?s=128&g=1", "display_name": "Stack Danny", "link": "https://stackoverflow.com/users/6039995/stack-danny"}, "is_accepted": false, "score": 1, "last_activity_date": 1472662815, "creation_date": 1472662815, "answer_id": 39255190, "question_id": 39254449, "link": "https://stackoverflow.com/questions/39254449/what-is-the-difference-in-the-following-two-cases-of-vector-usage-in-c/39255190#39255190", "title": "What is the difference in the following two cases of vector usage in c++?", "body": "<p>There is no real difference.\ncase 1:</p>\n\n<pre><code>std::vector&lt;int&gt; vec(5);\n</code></pre>\n\n<p>allocates 5 int-elements.</p>\n\n<p>case2:</p>\n\n<pre><code>std::vector&lt;int&gt; vec;\nvec.resize(5);\n</code></pre>\n\n<p>here, we begin with an empty vector of ints.\nWhen you then call resize, the function checks if the size you passed over is smaller than the actual size (wich is 0, in that case). If yes, allocate _Newsize - size() new elements. If no, pop_back (delete) size() - _Newsize elements. </p>\n\n<p>So in the end, resize is slower, because there are more machine cycles (if statements, subtracting sizes...) to do.</p>\n\n<p>if you want to now more, here's the resize function from vector:</p>\n\n<pre><code>void resize(size_type _Newsize)\n        {   // determine new length, padding as needed\n        if (_Newsize &lt; size())\n            _Pop_back_n(size() - _Newsize);\n        else if (size() &lt; _Newsize)\n            {   // pad as needed\n            _Alty _Alval(this-&gt;_Getal());\n            _Reserve(_Newsize - size());\n            _TRY_BEGIN\n            _Uninitialized_default_fill_n(this-&gt;_Mylast, _Newsize - size(),\n                _Alval);\n            _CATCH_ALL\n            _Tidy();\n            _RERAISE;\n            _CATCH_END\n            this-&gt;_Mylast += _Newsize - size();\n            }\n        }\n</code></pre>\n\n<p>as you can see, it does quite a lot.\nBut in the end, it's just a question about (in most cases not important) micro-seconds...\nSo no real difference.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 5330679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7699c74a00208a53e6297594027cb45?s=128&d=identicon&r=PG&f=1", "display_name": "Appy", "link": "https://stackoverflow.com/users/5330679/appy"}, "edited": false, "score": 0, "creation_date": 1472665275, "post_id": 39255546, "comment_id": 65847431, "body": "I am getting a compilation error when am trying case 2, whereas in case 1 am not getting any build failure. Can that be related to the type of object for which the vector is created?"}, {"owner": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "reply_to_user": {"reputation": 1, "user_id": 5330679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7699c74a00208a53e6297594027cb45?s=128&d=identicon&r=PG&f=1", "display_name": "Appy", "link": "https://stackoverflow.com/users/5330679/appy"}, "edited": false, "score": 0, "creation_date": 1472672381, "post_id": 39255546, "comment_id": 65851418, "body": "@Appy Possibly. <code>vector&lt;T&gt;::resize</code> will default construct objects of type <code>T</code> when extending the vector. If there is no default constructor, you will most likely get a compilation error."}], "tags": [], "owner": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "is_accepted": false, "score": 0, "last_activity_date": 1472664202, "creation_date": 1472664202, "answer_id": 39255546, "question_id": 39254449, "link": "https://stackoverflow.com/questions/39254449/what-is-the-difference-in-the-following-two-cases-of-vector-usage-in-c/39255546#39255546", "title": "What is the difference in the following two cases of vector usage in c++?", "body": "<p>According to the C++ standard (since C++03), <code>std::vector</code> is required to store all elements contiguously,</p>\n\n<blockquote>\n  <p>[...] which means that elements can be accessed not only through iterators, but also using offsets on regular pointers to elements. This means that a pointer to an element of a vector may be passed to any function that expects a pointer to an element of an array.</p>\n</blockquote>\n\n<p>Because of this restriction, resizing can <em>potentially</em> slow down performance because of the necessity of copying elements over to a new preallocated block. In practice, this overhead is usually only seen when resizing existing vectors with a lot of items requiring the vector to copy (or move) all of the objects to a new memory location.</p>\n\n<p>In the example you gave, there is no real difference because the original vector had no items in it (and many compilers pre-allocate a chunk of memory to begin). I wouldn't be surprised if the compiler did an optimization to render equivalent code. </p>\n"}], "owner": {"reputation": 1, "user_id": 5330679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7699c74a00208a53e6297594027cb45?s=128&d=identicon&r=PG&f=1", "display_name": "Appy", "link": "https://stackoverflow.com/users/5330679/appy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 2, "answer_count": 2, "score": -8, "last_activity_date": 1472722055, "creation_date": 1472660100, "last_edit_date": 1472722055, "question_id": 39254449, "link": "https://stackoverflow.com/questions/39254449/what-is-the-difference-in-the-following-two-cases-of-vector-usage-in-c", "title": "What is the difference in the following two cases of vector usage in c++?", "body": "<p>case 1:</p>\n\n<pre><code>std::vector&lt; Ticker &gt; snap_tickers_ (n_instruments);\n</code></pre>\n\n<p>and\ncase 2:</p>\n\n<pre><code>std::vector&lt; Ticker &gt;snap_tickers_;\nsnap_tickers_.resize(n_instruments);\n</code></pre>\n\n<p>I am getting a compilation error when am trying case 2, whereas in case 1 am not getting any build failure. Can that be related to the type of object for which the vector is created?</p>\n\n<p>ANSWER:\nresize in case 2 makes use of copy constructor, which was deleted for Ticker class, hence the failure. </p>\n"}, {"tags": ["c++", "qt", "qtableview"], "comments": [{"owner": {"reputation": 4182, "user_id": 2992101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7363e9ce46406af3326492e2f6cf40ca?s=128&d=identicon&r=PG", "display_name": "michalsrb", "link": "https://stackoverflow.com/users/2992101/michalsrb"}, "edited": false, "score": 3, "creation_date": 1472660207, "post_id": 39254076, "comment_id": 65844717, "body": "That highlight shows where the keyboard focus is. Pressing spacebar (de)selects that highlighted item. It is useful for users using keyboard to navigate your app. Would you share what is your motivation for hiding it?"}, {"owner": {"reputation": 12853, "user_id": 356726, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PhH4C.gif?s=128&g=1", "display_name": "Horst Walter", "link": "https://stackoverflow.com/users/356726/horst-walter"}, "reply_to_user": {"reputation": 4182, "user_id": 2992101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7363e9ce46406af3326492e2f6cf40ca?s=128&d=identicon&r=PG", "display_name": "michalsrb", "link": "https://stackoverflow.com/users/2992101/michalsrb"}, "edited": false, "score": 0, "creation_date": 1472674343, "post_id": 39254076, "comment_id": 65852436, "body": "Because I cannot edit or select a single cell, it is useless like it is. It should highlight the entire row (selection is set to entire rows only), that would make sense to me."}, {"owner": {"reputation": 4182, "user_id": 2992101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7363e9ce46406af3326492e2f6cf40ca?s=128&d=identicon&r=PG", "display_name": "michalsrb", "link": "https://stackoverflow.com/users/2992101/michalsrb"}, "edited": false, "score": 1, "creation_date": 1472675822, "post_id": 39254076, "comment_id": 65853162, "body": "Check the <code>selectionBehavior</code> property (on <code>QAbstractItemView</code>). Default value is <code>SelectItems</code>. If you change it to <code>SelectRows</code>, it may do what you want."}, {"owner": {"reputation": 12853, "user_id": 356726, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PhH4C.gif?s=128&g=1", "display_name": "Horst Walter", "link": "https://stackoverflow.com/users/356726/horst-walter"}, "reply_to_user": {"reputation": 4182, "user_id": 2992101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7363e9ce46406af3326492e2f6cf40ca?s=128&d=identicon&r=PG", "display_name": "michalsrb", "link": "https://stackoverflow.com/users/2992101/michalsrb"}, "edited": false, "score": 0, "creation_date": 1472677555, "post_id": 39254076, "comment_id": 65853986, "body": "<code>selectionBehavior</code> is set to <code>SelectRows</code> - that`s why the entire row is selected in 69 (by mouse). This is my point, highlighting single cells is confusing."}], "owner": {"reputation": 12853, "user_id": 356726, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PhH4C.gif?s=128&g=1", "display_name": "Horst Walter", "link": "https://stackoverflow.com/users/356726/horst-walter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 178, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1472658867, "creation_date": 1472658867, "question_id": 39254076, "link": "https://stackoverflow.com/questions/39254076/how-to-avoid-unintended-cell-highlighting-in-qtableview", "title": "How to avoid unintended cell highlighting in QTableView", "body": "<p>I have a <code>QTableView</code> set to multi selection mode, selection of entire rows. Works fine, only I get some kind of cell cursor I want to get rid off (row 71).</p>\n\n<p>The following screenshot illustrates what I mean:\n<img src=\"https://i.stack.imgur.com/JTYZf.png\" alt=\"Cell Cursor\"></p>\n\n<p>The rows I select with the mouse are highlighted in blue (see 69). But when I move around with the cursor keys the cells are somehow highlighted (see 71, 1st column - bit hard to see but visible). Any idea what is causing that?</p>\n\n<p>Qt 5.6.1, widgets style is FUSION, Win10</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 627, "user_id": 5438128, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5d0e061b267311381d8226c3bb60a20c?s=128&d=identicon&r=PG", "display_name": "ebyrob", "link": "https://stackoverflow.com/users/5438128/ebyrob"}, "edited": false, "score": 0, "creation_date": 1472658913, "post_id": 39253957, "comment_id": 65844005, "body": "<code>map2.push_back(_save[var]);</code> will access one past the last element in <code>_save</code> (<code>_save[var]</code>) which generates an error."}, {"owner": {"reputation": 19, "user_id": 6748264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b3c7af1ecd751cb1e60d85fc95e1ada?s=128&d=identicon&r=PG&f=1", "display_name": "mind overflow", "link": "https://stackoverflow.com/users/6748264/mind-overflow"}, "reply_to_user": {"reputation": 627, "user_id": 5438128, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5d0e061b267311381d8226c3bb60a20c?s=128&d=identicon&r=PG", "display_name": "ebyrob", "link": "https://stackoverflow.com/users/5438128/ebyrob"}, "edited": false, "score": 0, "creation_date": 1472659047, "post_id": 39253957, "comment_id": 65844097, "body": "I made a mistake, it&#39;s int var = save.size() -1, but its still not working. but thank you anyway"}, {"owner": {"reputation": 627, "user_id": 5438128, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5d0e061b267311381d8226c3bb60a20c?s=128&d=identicon&r=PG", "display_name": "ebyrob", "link": "https://stackoverflow.com/users/5438128/ebyrob"}, "edited": false, "score": 0, "creation_date": 1472659666, "post_id": 39253957, "comment_id": 65844482, "body": "Please update your question with what you&#39;re actually doing then.  Also include where you put data into <code>_save</code>."}, {"owner": {"reputation": 627, "user_id": 5438128, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5d0e061b267311381d8226c3bb60a20c?s=128&d=identicon&r=PG", "display_name": "ebyrob", "link": "https://stackoverflow.com/users/5438128/ebyrob"}, "edited": false, "score": 0, "creation_date": 1472660403, "post_id": 39253957, "comment_id": 65844819, "body": "<code>map2.push_back(_save[var]);</code> should be <code>map2 = _save[var];</code>  (not going to perform well though)"}, {"owner": {"reputation": 17641, "user_id": 16800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea1de76c4c343fc844135e18da8a80f1?s=128&d=identicon&r=PG", "display_name": "Guvante", "link": "https://stackoverflow.com/users/16800/guvante"}, "edited": false, "score": 0, "creation_date": 1472660460, "post_id": 39253957, "comment_id": 65844855, "body": "It looks like <code>_save[var]</code> is a <code>std::vector&lt;std::vector&lt;std::string&gt;&gt;</code> and you are calling <code>push_back</code> on a <code>std::vector&lt;std::vector&lt;std::string&gt;&gt;</code>. <code>map2</code> would need to be a <code>std::vector&lt;std::vector&lt;std::vector&lt;std::string&gt;&gt;&gt;</code> for that to work since you need to provide a single value for <code>push_back</code>."}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1472662796, "post_id": 39253957, "comment_id": 65846077, "body": "That is typically what happens when you write such monster structures. Use custom classes or at least typedefs to make this readable to yourself and your team members."}], "owner": {"reputation": 19, "user_id": 6748264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b3c7af1ecd751cb1e60d85fc95e1ada?s=128&d=identicon&r=PG&f=1", "display_name": "mind overflow", "link": "https://stackoverflow.com/users/6748264/mind-overflow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1506212909, "creation_date": 1472658451, "last_edit_date": 1506212909, "question_id": 39253957, "link": "https://stackoverflow.com/questions/39253957/taking-2d-vector-out-of-3d-vector-and-replace-with-other-2d-vector", "title": "Taking 2D vector out of 3D Vector and replace with other 2D-Vector", "body": "<p>I want to save for an game my 2D-Vector <code>std::vector&lt;std::vector&lt;std::string&gt;&gt; _map</code> in an 3D-Vector <code>std::vector&lt;std::vector&lt;std::vector&lt;std::string&gt;&gt;&gt; _save</code> with: </p>\n\n<pre><code>_save.push_back(_map);\n</code></pre>\n\n<p>Later I want (if condition) replace my 2D-Vector by the last-saved 2D-Vector in my 3D-Vector and then delete the last-saved 2D-Vector. My code is: </p>\n\n<pre><code>std::vector&lt;std::vector&lt;std::string&gt;&gt; map2;\nint var = _save.size() -1; // tried with _save.back() too\nmap2.push_back(_save[var]);\n_save.pop_back();\n_map.swap(map2);\n</code></pre>\n\n<p>What am I doing wrong? What should it look like? Thank you for your help.</p>\n\n<p>Following error:</p>\n\n<pre><code>Structure.cpp: In member function \u2018void Structure::undo(bool)\u2019:\nStructure.cpp:69:30: error: no matching function for call to \u2018std::vector&lt;std::vector&lt;std::basic_string&lt;char&gt; &gt; &gt;::push_back(__gnu_cxx::__alloc_traits&lt;std::allocator&lt;std::vector&lt;std::vector&lt;std::basic_string&lt;char&gt; &gt; &gt; &gt; &gt;::value_type&amp;)\u2019\n     map2.push_back(_save[var]);\n                              ^\nStructure.cpp:69:30: note: candidates are:\nIn file included from /usr/include/c++/4.9/vector:64:0,\n                 from Structure.cpp:6:\n/usr/include/c++/4.9/bits/stl_vector.h:913:7: note: void std::vector&lt;_Tp, _Alloc&gt;::push_back(const value_type&amp;) [with _Tp = std::vector&lt;std::basic_string&lt;char&gt; &gt;; _Alloc = std::allocator&lt;std::vector&lt;std::basic_string&lt;char&gt; &gt; &gt;; std::vector&lt;_Tp, _Alloc&gt;::value_type = std::vector&lt;std::basic_string&lt;char&gt; &gt;]\n       push_back(const value_type&amp; __x)\n       ^\n/usr/include/c++/4.9/bits/stl_vector.h:913:7: note:   no known conversion for argument 1 from \u2018__gnu_cxx::__alloc_traits&lt;std::allocator&lt;std::vector&lt;std::vector&lt;std::basic_string&lt;char&gt; &gt; &gt; &gt; &gt;::value_type {aka std::vector&lt;std::vector&lt;std::basic_string&lt;char&gt; &gt; &gt;}\u2019 to \u2018const value_type&amp; {aka const std::vector&lt;std::basic_string&lt;char&gt; &gt;&amp;}\u2019\n/usr/include/c++/4.9/bits/stl_vector.h:931:7: note: void std::vector&lt;_Tp, _Alloc&gt;::push_back(std::vector&lt;_Tp, _Alloc&gt;::value_type&amp;&amp;) [with _Tp = std::vector&lt;std::basic_string&lt;char&gt; &gt;; _Alloc = std::allocator&lt;std::vector&lt;std::basic_string&lt;char&gt; &gt; &gt;; std::vector&lt;_Tp, _Alloc&gt;::value_type = std::vector&lt;std::basic_string&lt;char&gt; &gt;]\n       push_back(value_type&amp;&amp; __x)\n       ^\n/usr/include/c++/4.9/bits/stl_vector.h:931:7: note:   no known conversion for argument 1 from \u2018__gnu_cxx::__alloc_traits&lt;std::allocator&lt;std::vector&lt;std::vector&lt;std::basic_string&lt;char&gt; &gt; &gt; &gt; &gt;::value_type {aka std::vector&lt;std::vector&lt;std::basic_string&lt;char&gt; &gt; &gt;}\u2019 to \u2018std::vector&lt;std::vector&lt;std::basic_string&lt;char&gt; &gt; &gt;::value_type&amp;&amp; {aka    std::vector&lt;std::basic_string&lt;char&gt; &gt;&amp;&amp;}\u2019\nMakefile:28: recipe for target 'Structure.o' failed\nmake: *** [Structure.o] Error 1\n</code></pre>\n"}, {"tags": ["c++", "constructor", "arduino"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1472658550, "post_id": 39253901, "comment_id": 65843785, "body": "<code>ClassName* o;</code> does not call any constructor nor does it create an object. It merely declares a pointer that you may assign to point to an object, but unless you do so it points to some undefined memory location"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472658590, "post_id": 39253901, "comment_id": 65843816, "body": "<code>ClassName* o;</code> should be <code>std::unique_ptr&lt;ClassName&gt; o;</code> or <code>std::shared_ptr&lt;ClassName&gt; o;</code>. Don&#39;t use raw pointers please."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1472659281, "post_id": 39253901, "comment_id": 65844251, "body": "I wouldn&#39;t really call them different styles. They are different types with distinct purposes, usages and lifetime implications. Also, substituting a raw pointer for a variable of automatic storage duration is asking for pain."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1472659286, "post_id": 39253901, "comment_id": 65844256, "body": "&quot;it appears like the object is being created on the spot, looking for a default constructor that has no parameters. I don&#39;t have such a default constructor, hence the error&quot; -- Yes, that&#39;s exactly what&#39;s going on."}, {"owner": {"reputation": 4592, "user_id": 3179492, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/ZHPUJ.jpg?s=128&g=1", "display_name": "Peter VARGA", "link": "https://stackoverflow.com/users/3179492/peter-varga"}, "edited": false, "score": 0, "creation_date": 1472677986, "post_id": 39253901, "comment_id": 65854185, "body": "Asking this question with such a high reputation?"}, {"owner": {"reputation": 29076, "user_id": 332578, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/3Z3w2.jpg?s=128&g=1", "display_name": "Jacksonkr", "link": "https://stackoverflow.com/users/332578/jacksonkr"}, "reply_to_user": {"reputation": 4592, "user_id": 3179492, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/ZHPUJ.jpg?s=128&g=1", "display_name": "Peter VARGA", "link": "https://stackoverflow.com/users/3179492/peter-varga"}, "edited": false, "score": 0, "creation_date": 1472678907, "post_id": 39253901, "comment_id": 65854589, "body": "@AlBundy I will always be curious about all things technology. That means I have to &quot;start over&quot; with basics of new languages, I&#39;ve done this a handful of times over the years). Typically I can find solutions in research but every now and again the scenario is complex enough against my limited terminology that it makes more sense to ask SOF."}], "answers": [{"comments": [{"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 1, "creation_date": 1472658463, "post_id": 39253954, "comment_id": 65843746, "body": "Just like the question said"}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1472658507, "last_edit_date": 1472658507, "creation_date": 1472658442, "answer_id": 39253954, "question_id": 39253901, "link": "https://stackoverflow.com/questions/39253901/no-matching-function-for-call-to-classnameclassname/39253954#39253954", "title": "no matching function for call to &quot;ClassName::ClassName()&quot;", "body": "<p>It seems that the class does not declare the default constructor. Perhaps it has only constructors with parameters.</p>\n\n<p>You have to declare the default constructor if you are going to declare objects of the class like</p>\n\n<pre><code>ClassName o;\n</code></pre>\n\n<p>As for the pointer declaration then it declares just a pointer, neither object of the class is created.</p>\n"}, {"comments": [{"owner": {"reputation": 29076, "user_id": 332578, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/3Z3w2.jpg?s=128&g=1", "display_name": "Jacksonkr", "link": "https://stackoverflow.com/users/332578/jacksonkr"}, "edited": false, "score": 0, "creation_date": 1472671135, "post_id": 39254222, "comment_id": 65850778, "body": "What decides that <code>o</code> will be &quot;deterministically&quot; destroyed after falling out of scope?"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 29076, "user_id": 332578, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/3Z3w2.jpg?s=128&g=1", "display_name": "Jacksonkr", "link": "https://stackoverflow.com/users/332578/jacksonkr"}, "edited": false, "score": 1, "creation_date": 1472671334, "post_id": 39254222, "comment_id": 65850887, "body": "The language specification.  The compiler arranges that the destructor will be called if you: fall out of the block the variable is defined in, if you return from the function, or if you call an exception.  The specification says you can rely on the destructor being called, and exactly when it will be called (relative to other destructors).  This is unlike garbage collectors when you don&#39;t know when (if ever) an object will be finalized."}], "tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": true, "score": 4, "last_activity_date": 1472659280, "creation_date": 1472659280, "answer_id": 39254222, "question_id": 39253901, "link": "https://stackoverflow.com/questions/39253901/no-matching-function-for-call-to-classnameclassname/39254222#39254222", "title": "no matching function for call to &quot;ClassName::ClassName()&quot;", "body": "<blockquote>\n  <p>I'm not sure exactly what is going on here but it appears like the object is being created on the spot, looking for a default constructor that has no parameters. I don't have such a default constructor, hence the error.</p>\n</blockquote>\n\n<p>That is <em>exactly</em> what is going on here.  If you declare a variable like that, it is created immediately.  If the constructor needs arguments - just supply them in the declaration:</p>\n\n<pre><code>   Class o(arg);\n</code></pre>\n\n<p>If you haven't got the value of <code>arg</code> yet - just put off declaring the variable until you have.  If you really must put off the creating the object until much later, use:</p>\n\n<pre><code>    std::unique_ptr&lt;Class&gt; o;     // This declare a unique ptr and\n                                  // initializes it to empty.\n\n    ....\n    o = make_unique&lt;Class&gt;(arg);  // Create the object on the heap,\n                                  // and store the pointer in 'o'.\n</code></pre>\n\n<p>When <code>o</code> goes out of scope the object will be destroyed (deterministically).</p>\n\n<p>For a beginner, just don't use raw pointers.  They are too easy to get wrong.</p>\n"}], "owner": {"reputation": 29076, "user_id": 332578, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/3Z3w2.jpg?s=128&g=1", "display_name": "Jacksonkr", "link": "https://stackoverflow.com/users/332578/jacksonkr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 39254222, "answer_count": 2, "score": -4, "last_activity_date": 1472659280, "creation_date": 1472658289, "question_id": 39253901, "link": "https://stackoverflow.com/questions/39253901/no-matching-function-for-call-to-classnameclassname", "title": "no matching function for call to &quot;ClassName::ClassName()&quot;", "body": "<p>I'm using cpp on Arduino. Let's say I have my variable defined as</p>\n\n<pre><code>ClassName o;\n</code></pre>\n\n<p>I'm not sure exactly what is going on here but it appears like the object is being created on the spot, looking for a default constructor that has no parameters. I don't have such a default constructor, hence the error:</p>\n\n<pre><code>no matching function for call to \"ClassName::ClassName()\"\n</code></pre>\n\n<p>However if I add a pointer to the variable then all is well:</p>\n\n<pre><code>ClassName* o;\n</code></pre>\n\n<p>What is going on here? What is the recommended way to take advantage of each of these styles?</p>\n"}, {"tags": ["c++", "mfc", "mfc-feature-pack"], "comments": [{"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1472658403, "post_id": 39253843, "comment_id": 65843709, "body": "What gave you the impression that docking to child frames is a supported configuration?"}, {"owner": {"reputation": 1150, "user_id": 987850, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/UQFy3.jpg?s=128&g=1", "display_name": "23W", "link": "https://stackoverflow.com/users/987850/23w"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 1, "creation_date": 1472664476, "post_id": 39253843, "comment_id": 65846965, "body": "Becouse it is documented by MS"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1472669426, "post_id": 39253843, "comment_id": 65849783, "body": "<i>&quot;May be somebody knows how to fix this bug in current MFC release ?&quot;</i> - That&#39;s an odd question, given that you started that very same paragraph with <i>&quot;Single right solution is ...&quot;</i>. If you found a bug, and you want it fixed, you need to talk to the vendor of the product (<a href=\"https://connect.microsoft.com/VisualStudio\" rel=\"nofollow noreferrer\">Microsoft Connect</a>)."}, {"owner": {"reputation": 1150, "user_id": 987850, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/UQFy3.jpg?s=128&g=1", "display_name": "23W", "link": "https://stackoverflow.com/users/987850/23w"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1472717608, "post_id": 39253843, "comment_id": 65867029, "body": "@IInspectable, yes, you are right. But MS will solve this bug for a long time and probably will not fix it because MFC have minimal priority for MS. So, may be somebody knows how to workaround the bug."}, {"owner": {"reputation": 1150, "user_id": 987850, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/UQFy3.jpg?s=128&g=1", "display_name": "23W", "link": "https://stackoverflow.com/users/987850/23w"}, "edited": false, "score": 0, "creation_date": 1472718533, "post_id": 39253843, "comment_id": 65867567, "body": "I sent the <a href=\"https://connect.microsoft.com/VisualStudio/feedback/details/3100846\" rel=\"nofollow noreferrer\">bug request to MS</a>."}], "answers": [{"tags": [], "owner": {"reputation": 1150, "user_id": 987850, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/UQFy3.jpg?s=128&g=1", "display_name": "23W", "link": "https://stackoverflow.com/users/987850/23w"}, "is_accepted": true, "score": 1, "last_activity_date": 1473683035, "last_edit_date": 1473683035, "creation_date": 1473679913, "answer_id": 39449341, "question_id": 39253843, "link": "https://stackoverflow.com/questions/39253843/bug-in-cpaneframewnd-mfc-feature-pack-vs-2015/39449341#39449341", "title": "BUG in CPaneFrameWnd (MFC Feature Pack VS 2015)", "body": "<p>I found the workaround for bug fixing. As mentioned in question, main problem that the mini-frame class <code>CPaneFrameWnd</code> have the <code>m_pDockManager</code> property which is not initialized (it have <code>nullptr</code> value). So, in some situations class <code>CPaneFrameWnd</code> can't find the right dockmanager from parent. Workaround for the bug is force initialize all mini-frames <code>m_pDockManager</code> property. Good place for this is the restoring docking state from registry (step 3 in question).</p>\n\n<p>The sample for right save and load child frame docking state:</p>\n\n<pre><code>// Save docking state for CChildFrame class (inherited from CMDIChildWndEx)\nvoid CChildFrame::SaveBarState(LPCTSTR lpszProfileName) const\n{\n    const_cast&lt;CChildFrame*&gt;(this)-&gt;GetDockingManager()-&gt;SaveState(lpszProfileName);\n\n    CObList list;\n    const_cast&lt;CChildFrame*&gt;(this)-&gt;GetDockingManager()-&gt;GetPaneList(list, FALSE, NULL, FALSE);\n    if (list.GetCount() &gt; 0) {\n        POSITION pos = list.GetTailPosition();\n        while (pos != NULL) {\n            CMFCToolBar* pToolBar = DYNAMIC_DOWNCAST(CMFCToolBar, list.GetPrev(pos));\n            if (pToolBar != nullptr) {\n                pToolBar-&gt;SaveState(lpszProfileName);\n            }\n        }\n    }\n}\n\n// Restore docking state for CChildFrame class (inherited from CMDIChildWndEx)\nvoid CChildFrame::LoadBarState(LPCTSTR lpszProfileName)\n{\n    CObList list;\n    GetDockingManager()-&gt;GetPaneList(list, FALSE, NULL, FALSE);\n    if (list.GetCount() &gt; 0) {\n        POSITION pos = list.GetTailPosition();\n        while (pos != NULL) {\n            CMFCToolBar* pToolBar = DYNAMIC_DOWNCAST(CMFCToolBar, list.GetPrev(pos));\n            if (pToolBar != nullptr) {\n                pToolBar-&gt;LoadState(lpszProfileName);\n            }\n        }\n    }\n\n    GetDockingManager()-&gt;LoadState(lpszProfileName);\n    GetDockingManager()-&gt;SetDockState();\n    GetDockingManager()-&gt;ShowDelayShowMiniFrames(TRUE);\n\n    // MFC BUGFIX: force assigning the child frame docking manager to all miniframes.\n    for (POSITION pos = GetDockingManager()-&gt;GetMiniFrames().GetHeadPosition(); pos != NULL;)\n    {\n        CWnd* pWndNext = (CWnd*)GetDockingManager()-&gt;GetMiniFrames().GetNext(pos);\n        if (pWndNext != nullptr &amp;&amp; pWndNext-&gt;IsKindOf(RUNTIME_CLASS(CPaneFrameWnd))) {\n            STATIC_DOWNCAST(CPaneFrameWnd, pWndNext)-&gt;SetDockingManager(GetDockingManager());\n        }\n    }\n}\n</code></pre>\n\n<p>How-to use this code:</p>\n\n<pre><code>// creating child frame and its panes, loading the saved panes docking state.\nint CChildFrame::OnCreate(LPCREATESTRUCT lpCreateStruct)\n{\n    bool bRes = TBase::OnCreate(lpCreateStruct) == 0;\n    if (bRes)\n    {\n        // enable docking\n        EnableDocking(CBRS_ALIGN_ANY);\n\n        // enable Visual Studio 2005 style docking window behavior\n        CDockingManager::SetDockingMode(DT_SMART);\n\n        // Creating toolbar, statusbar and panes. Dock them to default places.\n        {\n            // ....\n        }\n    }\n\n    if (bRes) {\n       LoadBarState(theApp.GetRegSectionPath(_T(\"ChildFrame\")));\n    }\n    return bRes ? 0 : 1;\n}\n\n\n// destroy child frame and save panes docking state.\nvoid CChildFrame::OnDestroy()\n{\n    SaveBarState(theApp.GetRegSectionPath(_T(\"ChildFrame\")));\n    TBase::OnDestroy();\n}\n</code></pre>\n\n<p><a href=\"https://drive.google.com/open?id=0B_QRqqAAp6LvdkU1dVRwM2JBYUE\" rel=\"nofollow\">Full sample source code</a>. </p>\n"}], "owner": {"reputation": 1150, "user_id": 987850, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/UQFy3.jpg?s=128&g=1", "display_name": "23W", "link": "https://stackoverflow.com/users/987850/23w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 709, "favorite_count": 1, "accepted_answer_id": 39449341, "answer_count": 1, "score": 1, "last_activity_date": 1473683035, "creation_date": 1472658145, "last_edit_date": 1592644375, "question_id": 39253843, "link": "https://stackoverflow.com/questions/39253843/bug-in-cpaneframewnd-mfc-feature-pack-vs-2015", "title": "BUG in CPaneFrameWnd (MFC Feature Pack VS 2015)", "body": "<p>The miniframe class <a href=\"https://msdn.microsoft.com/en-us/library/bb984503.aspx\" rel=\"nofollow noreferrer\">CPaneFrameWnd</a> contains bug in smart docking algorithm!\nThis class used in MFC as miniframe for floating panes and can dock its to parent frame dock sites or to tabbed panes. It works fine when all panes can be docked to main frame only, but when panes docked to the child frame in MDI applications this class have a bug. Steps to reproduce the bug:</p>\n<ol>\n<li>Undock some pane to float state.</li>\n<li>Save docking state in MDI child frame: <code>GetDockingManager()-&gt;SaveState(...)</code></li>\n<li>Restore docking state for this MDI child frame:  <code>GetDockingManager()-&gt;LoadState(...); GetDockingManager()-&gt;SetDockState();</code></li>\n<li>And try to dock this pane to same frame side by the mouse.</li>\n<li>You can't this. The pane are moved by mouse to frame side but NOT DOCKED.</li>\n</ol>\n<p>Bug in CPaneFrameWnd class source. In many places class uses code <code>m_pDockManager != NULL ? m_pDockManager : afxGlobalUtils.GetDockingManager(GetParent());</code> for access its dockmanager.\nBut in some places of class this code looks like <code>m_pDockManager != NULL ? m_pDockManager : afxGlobalUtils.GetDockingManager(this);</code>. And this is reason of the bug - global function afxGlobalUtils.GetDockingManager() can't get dock manager from <code>this</code> pointer and try to get it from parent window of <code>this</code> pointer. It looks like <code>pManager != NULL ? pManager : GetDockingManager(pWnd-&gt;GetParent());</code>. But class CPaneFrameWnd have INLINE NONVIRTUAL GetParent() method that can't be accessed by afxGlobalUtils.GetDockingManager(). So, after some recursions afxGlobalUtils.GetDockingManager() returns dockmanager for MAIN app frame! And of course this dockmanager is not same as docmanager for MDI child frame.</p>\n<p>Single right solution is to change all <code>m_pDockManager != NULL ? m_pDockManager : afxGlobalUtils.GetDockingManager(this);</code> to <code>m_pDockManager != NULL ? m_pDockManager : afxGlobalUtils.GetDockingManager(GetParent());</code> in CPaneFrameWnd source (afxpaneframewnd.cpp file).\nBut this is requires patch to MFC code. And all of us knows how Microsoft lazy.\nMay be somebody knows how to fix this bug in current MFC release ?</p>\n"}, {"tags": ["c++", "operators", "variable-assignment"], "comments": [{"owner": {"reputation": 3796, "user_id": 4859885, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HcTm.jpg?s=128&g=1", "display_name": "Brian Rodriguez", "link": "https://stackoverflow.com/users/4859885/brian-rodriguez"}, "edited": false, "score": 4, "creation_date": 1472658203, "post_id": 39253810, "comment_id": 65843579, "body": "You&#39;re assuming <code>x</code> resets back to 200 after every command, but it doesn&#39;t."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1472658207, "post_id": 39253810, "comment_id": 65843584, "body": "Stop asking it to accumulate the results. <code>-=</code>, <code>+=</code>, <code>&#47;=</code> and <code>%=</code> are all accumulation operators that assign the result of the operation before the <code>=</code> to the variable on the left."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1472658211, "post_id": 39253810, "comment_id": 65843586, "body": "your first assignment is <code>x += y</code> so that the next one <code>x -= y</code> results in <code>x == 200</code>. There is no &quot;adding up&quot; of results, you just keep assigning to <code>x</code>, if this is not what you want, then just dont do it..."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1472658298, "post_id": 39253810, "comment_id": 65843649, "body": "Just define xstart as 200 and reset x to xstart before every operation"}], "answers": [{"tags": [], "owner": {"reputation": 2258, "user_id": 3399105, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh6.googleusercontent.com/-twhyJ9NJTFw/AAAAAAAAAAI/AAAAAAAAADA/Nwa0s-0HXvA/photo.jpg?sz=128", "display_name": "Shahid", "link": "https://stackoverflow.com/users/3399105/shahid"}, "is_accepted": false, "score": 2, "last_activity_date": 1472658900, "last_edit_date": 1472658900, "creation_date": 1472658204, "answer_id": 39253874, "question_id": 39253810, "link": "https://stackoverflow.com/questions/39253810/c-beginner-assignment-operators/39253874#39253874", "title": "C++ Beginner Assignment Operators", "body": "<p>Every time you are doing assignment like <code>x += y;</code>, it changing the value of x. </p>\n\n<pre><code>x += y;\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>x = x + y;\n</code></pre>\n\n<p>Which means assignment. Value of x is changing. It's now 300. Same thing happening for latter assignments too.</p>\n\n<p><em>Note:</em> if you don't want to change the value of x and y, better do the assignments in other variable.</p>\n\n<pre><code>int x = 200, y = 100, t;\nt = x + y; cout &lt;&lt; t &lt;&lt; endl;\nt = x - y; cout &lt;&lt; t &lt;&lt; endl;\nt = x * y; cout &lt;&lt; t &lt;&lt; endl;\nt = (int) x / y; cout &lt;&lt; t &lt;&lt; endl;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9660, "user_id": 3256506, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IbkJm.gif?s=128&g=1", "display_name": "Tamir Vered", "link": "https://stackoverflow.com/users/3256506/tamir-vered"}, "is_accepted": false, "score": 3, "last_activity_date": 1472658657, "last_edit_date": 1472658657, "creation_date": 1472658327, "answer_id": 39253916, "question_id": 39253810, "link": "https://stackoverflow.com/questions/39253810/c-beginner-assignment-operators/39253916#39253916", "title": "C++ Beginner Assignment Operators", "body": "<p>When <code>x</code> and <code>y</code> are variables and <code>U</code> is an operation <code>x U= y</code> is equivalent to:</p>\n\n<pre><code>x = x U y;\n</code></pre>\n\n<p>which means the original variable is being modified and assigned with the result.</p>\n\n<p>You code is equivalent to:</p>\n\n<pre><code>x = x + y;\ncout &lt;&lt; x &lt;&lt; endl; // x is now 300\nx = x - y;\ncout &lt;&lt; x &lt;&lt; endl; // x is now 200\nx = x / y;\ncout &lt;&lt; x &lt;&lt; endl; // x is now 2\nx = x % y;\ncout &lt;&lt; x &lt;&lt; endl; // x is now 2\n</code></pre>\n\n<p>If you want not to change <code>x</code> you want can save <code>x</code> in a temporary variable or just print the result:</p>\n\n<pre><code>int x = 200;\nint y = 100;\ncout &lt;&lt; x - y &lt;&lt; endl; // x unchanged\ncout &lt;&lt; x + y &lt;&lt; endl; // x unchanged\ncout &lt;&lt; x / y &lt;&lt; endl; // x unchanged\ncout &lt;&lt; x * y &lt;&lt; endl; // x unchanged\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>int x = 200;\nint x = 100;\nint result = x + y;\ncout &lt;&lt; result &lt;&lt; endl;\nresult = x - y;\ncout &lt;&lt; x &lt;&lt; endl;\nresult = x / y;\ncout &lt;&lt; result &lt;&lt; endl;\nresult = x % y;\ncout &lt;&lt; result &lt;&lt; endl;\n</code></pre>\n\n<p><em>Note: since the <code>=</code> operator returns the value after the assignment <code>cout &lt;&lt; x += y &lt;&lt; end</code> can compile and print the assigned value.</em></p>\n"}, {"tags": [], "owner": {"reputation": 907, "user_id": 5344725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afe3363c7df76a6ddf2114b5b8793554?s=128&d=identicon&r=PG&f=1", "display_name": "Altainia", "link": "https://stackoverflow.com/users/5344725/altainia"}, "is_accepted": false, "score": 3, "last_activity_date": 1472658465, "creation_date": 1472658465, "answer_id": 39253960, "question_id": 39253810, "link": "https://stackoverflow.com/questions/39253810/c-beginner-assignment-operators/39253960#39253960", "title": "C++ Beginner Assignment Operators", "body": "<p>As you mentioned in your comments in your code, the result of <code>x += y</code> is equivalent to <code>x = x + y</code>, which means the value of <code>x</code> will change. So it is no surprise that the new value of <code>x</code>, 300, is used in the next mathematical assignment.</p>\n\n<p>If you want to avoid that, consider saving the result of <code>x + y</code> to another variable.</p>\n\n<pre><code>int x = 200;\nint y = 100;\nint x_addition = x + y;\nstd::cout &lt;&lt; x_addition &lt;&lt; std::endl;\n</code></pre>\n\n<p>Or, if its only usage is in displaying the result of the addition, do it all in one line.</p>\n\n<pre><code>int x = 200;\nint y = 100;\nstd::cout &lt;&lt; x + y &lt;&lt; std::endl;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 225, "user_id": 4781688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d6fe3392376aca408aca577b42fd80a?s=128&d=identicon&r=PG&f=1", "display_name": "jagdish", "link": "https://stackoverflow.com/users/4781688/jagdish"}, "is_accepted": false, "score": 0, "last_activity_date": 1472658545, "creation_date": 1472658545, "answer_id": 39253987, "question_id": 39253810, "link": "https://stackoverflow.com/questions/39253810/c-beginner-assignment-operators/39253987#39253987", "title": "C++ Beginner Assignment Operators", "body": "<p>You are not counting on Addition operations value     </p>\n\n<pre><code>x=200,y=100;    \nx+=y;//x=200+100=300,x=300,y=100   \nx-=y;//x=300-100=200,x=200,y=100    \n</code></pre>\n\n<p>Here you are forgetting that there is <strong>ADDITION</strong> OPERATION before subtraction</p>\n"}, {"tags": [], "owner": {"reputation": 1520, "user_id": 706147, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/761a372bbc701a03b3eccb949199cbfc?s=128&d=identicon&r=PG", "display_name": "Michael Vincent", "link": "https://stackoverflow.com/users/706147/michael-vincent"}, "is_accepted": false, "score": 1, "last_activity_date": 1472658590, "creation_date": 1472658590, "answer_id": 39253996, "question_id": 39253810, "link": "https://stackoverflow.com/questions/39253810/c-beginner-assignment-operators/39253996#39253996", "title": "C++ Beginner Assignment Operators", "body": "<p>Try resetting x back to 200 after each assignment.  Like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\nint main()\n{\n    int x = 200; int y = 100;\n    x += y; cout &lt;&lt; x &lt;&lt; endl; \n    x = 200;\n    x /= y; cout &lt;&lt; x &lt;&lt; endl; \n    x = 200;\n    x %= y; cout &lt;&lt; x &lt;&lt; endl; \n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1472658918, "last_edit_date": 1472658918, "creation_date": 1472658616, "answer_id": 39254004, "question_id": 39253810, "link": "https://stackoverflow.com/questions/39253810/c-beginner-assignment-operators/39254004#39254004", "title": "C++ Beginner Assignment Operators", "body": "<p>You are expecting the original value of <code>x</code> and <code>y</code> to be kept forever, but it isn't. Assignments like <code>x += y;</code> or <code>x = x + y;</code> change the value of the variables (in this case <code>x</code>, that is, the one on the left side of the equal sign). The previous value is overwritten and therefore lost.</p>\n\n<p>If you don't want to change the original values, you have to either assign the result to other variables (for example, one called <code>temp</code>, that you can overwrite every time), or you don't assign it at all, and you simply send to <code>cout</code> the result of the calculation.</p>\n\n<p>As an example with a temp variable:</p>\n\n<pre><code>int x = 200; int y = 100; int temp;\ntemp = x + y; cout &lt;&lt; temp &lt;&lt; endl; //temp = x + y, temp = 200 + 100, output 300.\ntemp = x - y; cout &lt;&lt; temp &lt;&lt; endl; //temp = x - y, temp = 200 - 100, output 100.\n</code></pre>\n\n<p>Or, doing away with variables entirely:</p>\n\n<pre><code>cout &lt;&lt; x + y &lt;&lt; endl; // 200 + 100, output 300\ncout &lt;&lt; x - y &lt;&lt; endl; // 200 - 100, output 100\n</code></pre>\n\n<p>Another way to see that the variables are overwritten (well, in this case it's only <code>x</code>) is to declare them as <code>const</code>:</p>\n\n<pre><code>const int x = 200; const int y = 100;\n</code></pre>\n\n<p>The program won't compile, because it tries to change constant variables.</p>\n"}, {"tags": [], "owner": {"reputation": 1557, "user_id": 1326370, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/065cb96920b0351ed9cfbd4ede700be7?s=128&d=identicon&r=PG", "display_name": "sclarke81", "link": "https://stackoverflow.com/users/1326370/sclarke81"}, "is_accepted": false, "score": 1, "last_activity_date": 1472658831, "creation_date": 1472658831, "answer_id": 39254068, "question_id": 39253810, "link": "https://stackoverflow.com/questions/39253810/c-beginner-assignment-operators/39254068#39254068", "title": "C++ Beginner Assignment Operators", "body": "<p>You are using the accumulation operators so you're changing the value of 'x'.</p>\n\n<pre><code>x += y; // x = 200 + 100 = 300\nx -= y; // x = 300 - 100 = 200\nx /= y; // x = 200 / 100 = 2\nx %= y; // x = 2 % 100 = 2\n</code></pre>\n\n<p>Instead you could do:</p>\n\n<pre><code>    int x = 200;\n    int y = 100;\n    cout &lt;&lt; x + y &lt;&lt; endl;\n    cout &lt;&lt; x - y &lt;&lt; endl;\n    cout &lt;&lt; x / y &lt;&lt; endl;\n    cout &lt;&lt; x % y &lt;&lt; endl;\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>    int x = 200;\n    int y = 100;\n    int result;\n\n    result = x + y;\n    cout &lt;&lt; result &lt;&lt; endl;\n\n    result = x - y;\n    cout &lt;&lt; result &lt;&lt; endl;\n\n    result = x / y;\n    cout &lt;&lt; result &lt;&lt; endl;\n\n    result = x % y;\n    cout &lt;&lt; result &lt;&lt; endl;\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 6778203, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c78c3.png?s=128&g=1", "display_name": "Creeper", "link": "https://stackoverflow.com/users/6778203/creeper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "accepted_answer_id": 39254004, "answer_count": 7, "score": -2, "last_activity_date": 1472658918, "creation_date": 1472658041, "last_edit_date": 1472658585, "question_id": 39253810, "link": "https://stackoverflow.com/questions/39253810/c-beginner-assignment-operators", "title": "C++ Beginner Assignment Operators", "body": "<p>i'm a beginner in C++ and i'm doing this example code of assignment operators. I don't know what i'm doing wrong here.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\nint main()\n{\n    int x = 200; int y = 100;\n    x += y; cout &lt;&lt; x &lt;&lt; endl; //x += y; // x = x + y, x = 200 + 100, output 300.\n    x -= y; cout &lt;&lt; x &lt;&lt; endl; //x -= y; // x = x - y, x = 200 - 100, output 100.\n    x /= y; cout &lt;&lt; x &lt;&lt; endl; //x /= y; // x = x / y, x = 200 / 100, output 2.\n    x %= y; cout &lt;&lt; x &lt;&lt; endl; //x % y; // x = % y, x = 200 % 100, output 0.\n    return 0;\n}\n</code></pre>\n\n<p>i'm getting the results for</p>\n\n<pre><code>x -= y = 200\nx /= y = 2\nx %= y = 2\n</code></pre>\n\n<p>when its suppose to be</p>\n\n<pre><code>x -= y = 100\nx /= y = 2\nx %= y = 0\n</code></pre>\n\n<p>its actually adding up the previous results. How do i stop the code from adding the result to the next line? Thanks!</p>\n"}, {"tags": ["c++", "class", "inheritance", "reference", "pass-by-reference"], "answers": [{"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 2, "last_activity_date": 1472729432, "last_edit_date": 1472729432, "creation_date": 1472657605, "answer_id": 39253677, "question_id": 39253624, "link": "https://stackoverflow.com/questions/39253624/a-function-that-accepts-both-a-class-and-a-derived-class-as-the-argument/39253677#39253677", "title": "a Function that accepts both a class and a derived class as the argument", "body": "<p>Declare the argument like reference or const reference to an object of class A.</p>\n\n<pre><code>class A\n{\n    //...\n};\n\nclass B : public A\n{\n    //...\n};\n\nvoid f( const A &amp;a );\n</code></pre>\n\n<p>or</p>\n\n<pre><code>void f( const A *a );\n</code></pre>\n\n<p>Or like an rvalue reference.</p>\n\n<p>Here is a demonstrative program</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nstruct A\n{\n    virtual ~A() = default;\n    A( const std::string &amp;first ) : first( first ) {}\n    virtual void who() { std::cout &lt;&lt; first &lt;&lt; std::endl; }\n    std::string first;\n};\n\nstruct B : A\n{\n    B( const std::string &amp;first, const std::string &amp;second ) : A( first ), second( second ) {}\n    void who() { A::who(); std::cout &lt;&lt; second &lt;&lt; std::endl; }\n    std::string second;\n};\n\nvoid f( A &amp;&amp;a )\n{\n    a.who();\n}\n\nint main() \n{\n    f( A( \"A\" ) );\n    f( B( \"A\", \"B\" ) );\n\n    return 0;\n}\n</code></pre>\n\n<p>Its output is</p>\n\n<pre><code>A\nA\nB\n</code></pre>\n\n<p>Or you can overload the function for objects of the both types.</p>\n"}], "owner": {"reputation": 1091, "user_id": 5302241, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2b58e25a907ac8e47c48204ba7e7a45f?s=128&d=identicon&r=PG&f=1", "display_name": "rxu", "link": "https://stackoverflow.com/users/5302241/rxu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 39253677, "answer_count": 1, "score": -2, "last_activity_date": 1472729432, "creation_date": 1472657407, "last_edit_date": 1472658305, "question_id": 39253624, "link": "https://stackoverflow.com/questions/39253624/a-function-that-accepts-both-a-class-and-a-derived-class-as-the-argument", "title": "a Function that accepts both a class and a derived class as the argument", "body": "<p>How to make a function F that accepts both a class A, and a class B derived from A, for its only argument?</p>\n\n<p>The constructors and destructors for class A and class B are different.</p>\n"}, {"tags": ["c++", "windows", "winapi", "opengl"], "comments": [{"owner": {"reputation": 895, "user_id": 1433299, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Cs0WU.jpg?s=128&g=1", "display_name": "markt", "link": "https://stackoverflow.com/users/1433299/markt"}, "edited": false, "score": 0, "creation_date": 1472659170, "post_id": 39253583, "comment_id": 65844176, "body": "You should post some of your code. It&#39;s probably something to do with your viewport setup or camera position."}, {"owner": {"reputation": 583, "user_id": 1435899, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/62d4beafa99dc707da2a400597901681?s=128&d=identicon&r=PG", "display_name": "Walter", "link": "https://stackoverflow.com/users/1435899/walter"}, "reply_to_user": {"reputation": 895, "user_id": 1433299, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Cs0WU.jpg?s=128&g=1", "display_name": "markt", "link": "https://stackoverflow.com/users/1433299/markt"}, "edited": false, "score": 0, "creation_date": 1472665387, "post_id": 39253583, "comment_id": 65847493, "body": "I&#39;ve provided the OpenGL context creation code, the funny part is, if I put 30 as a value in the Y parameter for glViewport, all the content moves up instead of down, I think I may not understand how these viewports are working"}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1472675135, "post_id": 39253583, "comment_id": 65852841, "body": "@user1435899 Are you aware that in OpenGL, x+ points to the right, y+ points upwards, and z+ points away from the screen, towards the user?"}, {"owner": {"reputation": 583, "user_id": 1435899, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/62d4beafa99dc707da2a400597901681?s=128&d=identicon&r=PG", "display_name": "Walter", "link": "https://stackoverflow.com/users/1435899/walter"}, "edited": false, "score": 0, "creation_date": 1472677843, "post_id": 39253583, "comment_id": 65854125, "body": "Yeah I did, but I didn&#39;t expect its viewports to work like that, I thought 0, 0 was top left, I now know its actually bottom left. That explains a lot, but not the size discrepancies, I&#39;m not sure if the problem here is windows or OpenGL"}], "answers": [{"tags": [], "owner": {"reputation": 583, "user_id": 1435899, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/62d4beafa99dc707da2a400597901681?s=128&d=identicon&r=PG", "display_name": "Walter", "link": "https://stackoverflow.com/users/1435899/walter"}, "is_accepted": true, "score": 0, "last_activity_date": 1472680144, "creation_date": 1472680144, "answer_id": 39259532, "question_id": 39253583, "link": "https://stackoverflow.com/questions/39253583/window-title-over-lapping-opengl-rendering/39259532#39259532", "title": "Window title over lapping Opengl rendering", "body": "<p>Okay so it turns out this had more to do with my ignorance of windows than with OpenGL itself (but it also had very much to do with my ignorance of OpenGL too).\nThe size of a window in windows includes its title bar, and setting the size of the viewport to the size of the window is what caused the issue of shapes being rendered beneath the title bar, what solved it was retrieving the client rectangle of the window, and using that to set the viewport instead.</p>\n"}], "owner": {"reputation": 583, "user_id": 1435899, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/62d4beafa99dc707da2a400597901681?s=128&d=identicon&r=PG", "display_name": "Walter", "link": "https://stackoverflow.com/users/1435899/walter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 564, "favorite_count": 0, "accepted_answer_id": 39259532, "answer_count": 1, "score": 0, "last_activity_date": 1472680144, "creation_date": 1472657296, "last_edit_date": 1472665282, "question_id": 39253583, "link": "https://stackoverflow.com/questions/39253583/window-title-over-lapping-opengl-rendering", "title": "Window title over lapping Opengl rendering", "body": "<p>I'm trying to learn opengl programming on windows and while I initially started with SDL, I've decided to ditch it in order to learn how to start an OpenGL context myself using WGL. </p>\n\n<p>I'm using nanovg as a quick shape drawing library and with SDL everything rendered fine, however, now that I've removed SDL and created my own window and OpenGL  context I'm finding that the title bar for the window is overlapping the rendering area. As if the origin (0, 0) for the rendering area is at the top left of the whole window instead of just below the title bar, if that makes sense?</p>\n\n<p>The shapes are rendering fine, but if I render a rectangle at the position 0, 0 with the height of 20, initially I wont see, however, if I increase the height of the window it will eventually appear.</p>\n\n<p>What do I have to do to get the origin of the rendering area to just below the title bar?</p>\n\n<p>I've set the glViewport to 0, 0 and the width and height of the window at start up, if that helps anything.</p>\n\n<p>Edit: This is the OpenGL context creation code, the WindowSize.Width and WindowSize.Height properties you see are the same height and width given to the WinAPI CreateWindow function.</p>\n\n<pre><code>const int PixelFormatAttributeList[] =\n                {\n                    WGL_DRAW_TO_WINDOW_ARB, GL_TRUE,\n                    WGL_SUPPORT_OPENGL_ARB, GL_TRUE,\n                    WGL_DOUBLE_BUFFER_ARB, GL_TRUE,\n                    WGL_PIXEL_TYPE_ARB, WGL_TYPE_RGBA_ARB,\n                    WGL_COLOR_BITS_ARB, 32,\n                    WGL_DEPTH_BITS_ARB, 32,\n                    WGL_STENCIL_BITS_ARB, 32,\n                    0 \n                };\n\nint ContextAttributes[] =\n                {\n                    WGL_CONTEXT_MAJOR_VERSION_ARB, 3,\n                    WGL_CONTEXT_MINOR_VERSION_ARB, 3,\n                    WGL_CONTEXT_FLAGS_ARB, WGL_CONTEXT_FORWARD_COMPATIBLE_BIT_ARB,\n                    0 \n                };\n\nwglChoosePixelFormatARB(WindowDeviceContext, PixelFormatAttributeList, NULL, 1, &amp;PixelFormat, &amp;FormatCount);\n\nSetPixelFormat(WindowDeviceContext, PixelFormat, &amp;PFD);\n\nOpenGLContext = wglCreateContextAttribsARB(WindowDeviceContext, 0, ContextAttributes);                  \nwglMakeCurrent(WindowDeviceContext, OpenGLContext);\n\nglViewport(0, 0, WindowSize.Width, WindowSize.Height);\n\nnvgCreateGL3(NVG_ANTIALIAS | NVG_STENCIL_STROKES);\n</code></pre>\n\n<p>Thanks, </p>\n"}, {"tags": ["c++", "templates", "c++14", "non-type"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 2, "creation_date": 1472657237, "post_id": 39253501, "comment_id": 65842922, "body": "You can not use a runtime value as template parameter (clang is buggy here)"}, {"owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 0, "creation_date": 1472657396, "post_id": 39253501, "comment_id": 65843029, "body": "@DieterL&#252;cking I am not using runtime value only the reference to variable - according to language specification you can use reference to a static variable as a template parameter just like in case of reference to a function... Or am I missing something here?"}], "answers": [{"comments": [{"owner": {"reputation": 137021, "user_id": 567292, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b55da07dea89fa675c7e2894c77f8024?s=128&d=identicon&r=PG", "display_name": "ecatmur", "link": "https://stackoverflow.com/users/567292/ecatmur"}, "reply_to_user": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 2, "creation_date": 1472677185, "post_id": 39255160, "comment_id": 65853817, "body": "@W.F. couldn&#39;t find anything; filed <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=77435\" rel=\"nofollow noreferrer\">gcc.gnu.org/bugzilla/show_bug.cgi?id=77435</a>"}], "tags": [], "owner": {"reputation": 137021, "user_id": 567292, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b55da07dea89fa675c7e2894c77f8024?s=128&d=identicon&r=PG", "display_name": "ecatmur", "link": "https://stackoverflow.com/users/567292/ecatmur"}, "is_accepted": true, "score": 5, "last_activity_date": 1472662690, "creation_date": 1472662690, "answer_id": 39255160, "question_id": 39253501, "link": "https://stackoverflow.com/questions/39253501/can-i-pass-a-reference-type-to-a-template-to-specify-following-non-type-template/39255160#39255160", "title": "Can I pass a reference type to a template to specify following non-type template parameters&#39; types?", "body": "<p>First off, it's definitely a bug in gcc. You're nearly correct in your diagnosis of the nature of the bug, but it's not that gcc doesn't accept reference-type non-type template parameters, it's rather that gcc fails to <em>recognise</em> reference-type non-type template parameters as a class template partial specialization where the reference type is a previous template parameter:</p>\n\n<pre><code>template&lt;int, class T, T&gt; struct S;  // #1\ntemplate&lt;class T, T A&gt; struct S&lt;0, T, A&gt; {};  // #2\nint i;\nS&lt;0, int&amp;, i&gt; s;  // #3 error: aggregate 'S&lt;0, int&amp;, i&gt; s' has incomplete type\n</code></pre>\n\n<p><code>#2</code> is a perfectly legitimate partial specialization of <code>#1</code> and should be matched by the instantiation <code>#3</code>, per [temp.class.spec.match] and [temp.deduct].</p>\n\n<p>Fortunately, there's a simple workaround, which is to provide a further partial specialization for reference types:</p>\n\n<pre><code>template&lt;class R, R&amp; A&gt; struct S&lt;0, R&amp;, A&gt; {};\n</code></pre>\n\n<p>A <em>correct</em> compiler like clang will also be fine with this.</p>\n\n<p>In your case the further partial specializations would be:</p>\n\n<pre><code>template &lt;class R, R&amp; First, R&amp;... Others&gt;\nstruct has_duplicates&lt;R&amp;, First, Others...&gt; // ...\ntemplate &lt;class R, R&amp; Last&gt;\nstruct has_duplicates&lt;R&amp;, Last&gt; // ...\n</code></pre>\n"}], "owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 854, "favorite_count": 1, "accepted_answer_id": 39255160, "answer_count": 1, "score": 6, "last_activity_date": 1472662690, "creation_date": 1472657056, "last_edit_date": 1472660529, "question_id": 39253501, "link": "https://stackoverflow.com/questions/39253501/can-i-pass-a-reference-type-to-a-template-to-specify-following-non-type-template", "title": "Can I pass a reference type to a template to specify following non-type template parameters&#39; types?", "body": "<p>Consider an example:</p>\n\n<pre><code>#include &lt;type_traits&gt;\n\ntemplate &lt;class T, T&gt;\nstruct has_duplicates_info { };\n\ntemplate &lt;class T, T...&gt;\nstruct has_duplicates;\n\ntemplate &lt;class T, T First, T... Others&gt;\nstruct has_duplicates&lt;T, First, Others...&gt;:\n          has_duplicates&lt;T, Others...&gt;,\n          has_duplicates_info&lt;T, First&gt; {\n   static constexpr bool value =\n      std::is_base_of&lt;has_duplicates_info&lt;T, First&gt;, has_duplicates&lt;T, Others...&gt;&gt;::value\n        || has_duplicates&lt;T, Others...&gt;::value;\n};\n\ntemplate &lt;class T, T Last&gt;\nstruct has_duplicates&lt;T, Last&gt;: has_duplicates_info&lt;T, Last&gt;, std::false_type { };\n\nint a, b;\n\nint main() {\n   static_assert(!has_duplicates&lt;int, 0, 1, 2&gt;::value, \"has_duplicates&lt;int, 0, 1, 2&gt;::value\");\n   static_assert(has_duplicates&lt;int, 1, 2, 2, 3&gt;::value, \"!has_duplicates&lt;int, 1, 2, 2, 3&gt;::value\");\n   static_assert(has_duplicates&lt;int&amp;, a, a, b&gt;::value, \"!has_duplicates&lt;int&amp;, a, a, b&gt;::value\");\n}\n</code></pre>\n\n<p>This compiles fine with clang but not with gcc. The problem is in a line:</p>\n\n<pre><code>static_assert(has_duplicates&lt;int&amp;, a, a, b&gt;::value, \"has_duplicates&lt;int&amp;, a, a, b&gt;::value\");\n</code></pre>\n\n<p>where compiler suggests that <code>has_duplicates&lt;int&amp;, a, a, b&gt;</code> is an incomplete type:</p>\n\n<blockquote>\n<pre><code>has_duplicates.cc:26:18: error: incomplete type \u2018has_duplicates&lt;int&amp;, a, a, b&gt;\u2019 used in nested name specifier\n    static_assert(has_duplicates&lt;int&amp;, a, a, b&gt;::value, \"has_duplicates&lt;int&amp;, a, a, b&gt;::value\");\n                  ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n</code></pre>\n</blockquote>\n\n<p>So... which compiler is right?</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>To clarify I am <strong>not</strong> trying to check if the runtime values behind variables passed to <code>has_duplicates</code> contains duplicates only if there are duplicated references passed to this trait... E.g. the code below compiles successfully in both gcc and clang:</p>\n\n<pre><code>template &lt;int &amp;X&gt;\nstruct a { };\n\nint b;\n\nint main() {\n   a&lt;b&gt; c;\n}\n</code></pre>\n"}, {"tags": ["c++", "inheritance", "polymorphism", "overriding"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1472657033, "post_id": 39253454, "comment_id": 65842806, "body": "A) you cannot have a virtual template functions. B) the types in the signature of a virtual function must be the same or covariants and there must be the same number of them."}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1472657356, "post_id": 39253454, "comment_id": 65843004, "body": "I suppose you could make an input base class then group the inputs to B and the inputs to C into 2 different classes that derive from that base input class. That way class A&#39;s virtual function could declare that it takes a pointer to the base input type. Then you&#39;d have to do a dynamic cast inside B and C to obtain the appropriate input class which would probably have different getter functions that aren&#39;t declared in the base input class (given that it isn&#39;t common between the two input types)... not saying it&#39;s clean, but if you have to have it..."}], "answers": [{"comments": [{"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 1, "creation_date": 1472658780, "post_id": 39253803, "comment_id": 65843921, "body": "I really like the concept of the solution. Seems like there is a decent amount of boiler-plate, is there a way to do the same thing just by passing argument-less lamda&#39;s with the values embedded in them?"}, {"owner": {"reputation": 2725, "user_id": 2296177, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/854fa6632f9806fae99a1b49b4e07e08?s=128&d=identicon&r=PG", "display_name": "user2296177", "link": "https://stackoverflow.com/users/2296177/user2296177"}, "reply_to_user": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1472659387, "post_id": 39253803, "comment_id": 65844316, "body": "@RyanP Could you show me (with code) what you would like to be able to write?"}, {"owner": {"reputation": 301, "user_id": 5253595, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-HdZeyuIfFPo/AAAAAAAAAAI/AAAAAAAAABQ/oQkFNinEsFc/photo.jpg?sz=128", "display_name": "Garmekain", "link": "https://stackoverflow.com/users/5253595/garmekain"}, "edited": false, "score": 0, "creation_date": 1472660201, "post_id": 39253803, "comment_id": 65844715, "body": "Isn&#39;t <code>return [=] { return f( args... ); };</code> same as <code>return f( args... );</code> in that context? What am I missing there?"}, {"owner": {"reputation": 2725, "user_id": 2296177, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/854fa6632f9806fae99a1b49b4e07e08?s=128&d=identicon&r=PG", "display_name": "user2296177", "link": "https://stackoverflow.com/users/2296177/user2296177"}, "reply_to_user": {"reputation": 301, "user_id": 5253595, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-HdZeyuIfFPo/AAAAAAAAAAI/AAAAAAAAABQ/oQkFNinEsFc/photo.jpg?sz=128", "display_name": "Garmekain", "link": "https://stackoverflow.com/users/5253595/garmekain"}, "edited": false, "score": 1, "creation_date": 1472660290, "post_id": 39253803, "comment_id": 65844765, "body": "@Garmekain No, because the <code>[=] { ... };</code> part is what creates the lambda closure. Otherwise, you are simply returning the result of invoking <code>f( args... )</code>. Currently, the return is a callable with no parameters."}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 1, "creation_date": 1472660418, "post_id": 39253803, "comment_id": 65844829, "body": "@user2296177 My question is, what is the added benefit of using all of the template functions over something like accepting a std::function as a parameter with less boiler-plate? something like <a href=\"https://ideone.com/YCiBkk\" rel=\"nofollow noreferrer\">ideone.com/YCiBkk</a>"}, {"owner": {"reputation": 301, "user_id": 5253595, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-HdZeyuIfFPo/AAAAAAAAAAI/AAAAAAAAABQ/oQkFNinEsFc/photo.jpg?sz=128", "display_name": "Garmekain", "link": "https://stackoverflow.com/users/5253595/garmekain"}, "edited": false, "score": 0, "creation_date": 1472660512, "post_id": 39253803, "comment_id": 65844883, "body": "Oh, that&#39;s right, little mistake there. I thought that the lambda function gets executed, but for that the lambda needs the arguments passed to it inside <code>()</code> after the function body."}, {"owner": {"reputation": 2725, "user_id": 2296177, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/854fa6632f9806fae99a1b49b4e07e08?s=128&d=identicon&r=PG", "display_name": "user2296177", "link": "https://stackoverflow.com/users/2296177/user2296177"}, "reply_to_user": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1472661434, "post_id": 39253803, "comment_id": 65845379, "body": "@RyanP You could definitely use <code>std::function&lt;&gt;</code> to achieve something similar. However, there are some considerations to take: <code>std::function&lt;&gt;</code> will use dynamic allocation if the closure&#39;s size is larger than the statically allocated block (this is similar to the small string optimization). Using a lambda avoids this, at the cost of boilerplate and a possible code size increase."}, {"owner": {"reputation": 2725, "user_id": 2296177, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/854fa6632f9806fae99a1b49b4e07e08?s=128&d=identicon&r=PG", "display_name": "user2296177", "link": "https://stackoverflow.com/users/2296177/user2296177"}, "reply_to_user": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1472661787, "post_id": 39253803, "comment_id": 65845554, "body": "@RyanP TL;DR: <code>std::function&lt;&gt;</code> will use dynamic allocation which is definitely a performance loss over my approach: <a href=\"http://coliru.stacked-crooked.com/a/af143d1f31c8e6e5\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/af143d1f31c8e6e5</a>."}], "tags": [], "owner": {"reputation": 2725, "user_id": 2296177, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/854fa6632f9806fae99a1b49b4e07e08?s=128&d=identicon&r=PG", "display_name": "user2296177", "link": "https://stackoverflow.com/users/2296177/user2296177"}, "is_accepted": true, "score": 2, "last_activity_date": 1473032939, "last_edit_date": 1492087236, "creation_date": 1472657997, "answer_id": 39253803, "question_id": 39253454, "link": "https://stackoverflow.com/questions/39253454/create-a-overriden-method-in-base-class-when-you-dont-know-the-arguments-passed/39253803#39253803", "title": "Create a overriden method in base class when you don&#39;t know the arguments passed to the overriding functions?", "body": "<p>I've provided a vastly superior implementation with an explanation here: </p>\n\n<p><a href=\"https://codereview.stackexchange.com/q/140510/88422\">https://codereview.stackexchange.com/q/140510/88422</a></p>\n\n<hr>\n\n<p>To circumvent what NathanOliver is saying, you can use closures. They will store their arguments, and you can call them polymorphically.</p>\n\n<p>Disclaimer: This is a very barebones implementation to show the technique.</p>\n\n<pre><code>template&lt;class F, class... Args&gt;\nauto make_closure( F&amp;&amp; f, Args&amp;&amp;... args ) noexcept\n{\n    return [=] { return f( args... ); };\n}\n\nstruct fn_base\n{\n    virtual ~fn_base() = default;\n    virtual void invoke() = 0;\n};\n\ntemplate&lt;class T, class... Args&gt;\nstruct fn : public fn_base\n{\n    using closure_t = decltype( make_closure( std::declval&lt;T&gt;(), std::declval&lt;Args&gt;()... ) );\n    closure_t closure_;\n\n    fn( closure_t&amp;&amp; closure ) : closure_{ std::move( closure ) } {}\n\n    void invoke() override\n    {\n        closure_();\n    }\n};\n\ntemplate&lt;class F, class... Args&gt;\nauto make_fn( F&amp;&amp; f, Args&amp;&amp;... args )\n{\n    return fn&lt;F, Args...&gt;{ make_closure( std::forward&lt;F&gt;( f ), std::forward&lt;Args&gt;( args )... ) };\n}\n</code></pre>\n\n<p>Sample usage:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nvoid f( int, char )\n{\n    std::cout &lt;&lt; \"f( int, char )\\n\";\n}\n\nvoid g( double )\n{\n    std::cout &lt;&lt; \"g( double )\\n\";\n}\n\nint main( int, char*[] )\n{\n    auto df0 = make_fn( &amp;f, 1, 'c' );\n    auto df1 = make_fn( &amp;g, 0.5 );\n    fn_base* f0 = &amp;df0;\n    fn_base* f1 = &amp;df1;\n    f0-&gt;invoke();\n    f1-&gt;invoke();\n}\n</code></pre>\n"}], "owner": {"reputation": 301, "user_id": 5253595, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-HdZeyuIfFPo/AAAAAAAAAAI/AAAAAAAAABQ/oQkFNinEsFc/photo.jpg?sz=128", "display_name": "Garmekain", "link": "https://stackoverflow.com/users/5253595/garmekain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 2, "accepted_answer_id": 39253803, "answer_count": 1, "score": 3, "last_activity_date": 1473032939, "creation_date": 1472656897, "question_id": 39253454, "link": "https://stackoverflow.com/questions/39253454/create-a-overriden-method-in-base-class-when-you-dont-know-the-arguments-passed", "title": "Create a overriden method in base class when you don&#39;t know the arguments passed to the overriding functions?", "body": "<p>I have an abstract class <strong>A</strong> which is base for the other classes, let's say <strong>B</strong> and <strong>C</strong>.</p>\n\n<p>Classes <strong>B</strong> and <strong>C</strong> should have a <code>void</code> type <code>handle_input</code> method, but argument number and types may vary from <strong>B</strong> to <strong>C</strong>.</p>\n\n<p>I also have a function that takes a <em>pointer</em> to an <strong>A</strong> as an argument - polymorphically speaking, that could be either <strong>A</strong>, <strong>B</strong> or <strong>C</strong> - and calls the method <code>handle_input</code>.</p>\n\n<hr>\n\n<p>The problem comes when defining <code>A::handle_input</code> because the arguments passed to <code>B::handle_input</code> may be different to the ones passed to <code>C::handle_input</code>.</p>\n\n<p>That leds me to create in class <strong>A</strong> something like:</p>\n\n<pre><code>/* base class */\nclass A {\n    template &lt;class... FUNCTION_ARGS&gt;\n    virtual void handle_input(FUNCTION_ARGS&amp;&amp;...) = 0;\n};\n</code></pre>\n\n<p>But errors occur because the <em>template</em> is calculated at compile time, while <em>virtual</em> is used at run time.</p>\n\n<p>I also did</p>\n\n<pre><code>class A {\n    template &lt;class... FUNCTION_ARGS&gt;\n    using input_handler = function&lt;void(FUNCTION_ARGS&amp;&amp;...)&gt;;\n\n    template &lt;class... FUNCTION_ARGS&gt;\n    input_handler&lt;FUNCTION_ARGS...&gt; handle_input;\n};\n</code></pre>\n\n<p>But the outcome is more or less the same, as expected.</p>\n\n<hr>\n\n<p>I guess my question would be <em>\"How can you create a overriden method in base class when you don't know the arguments passed to the potentially multiple overriding functions?\"</em></p>\n\n<p>Notes(correct me if I'm wrong):</p>\n\n<ul>\n<li><code>handle_input</code> is dynamically polymorphic, so it has to be virtual.</li>\n<li><code>handle_input</code>'s  argument number in unknown, so parameter packs must be used.</li>\n</ul>\n"}, {"tags": ["android", "c++", "bitmap", "native", "stack-trace"], "answers": [{"comments": [{"owner": {"reputation": 498, "user_id": 1971209, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7de5b3c4547f04034b676a391e5d8af0?s=128&d=identicon&r=PG", "display_name": "uncle_tex", "link": "https://stackoverflow.com/users/1971209/uncle-tex"}, "edited": false, "score": 0, "creation_date": 1472736003, "post_id": 39266843, "comment_id": 65879842, "body": "Huh? This crash is occurring before the app even opens so I don&#39;t think it has to do with my actual application code."}, {"owner": {"reputation": 498, "user_id": 1971209, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7de5b3c4547f04034b676a391e5d8af0?s=128&d=identicon&r=PG", "display_name": "uncle_tex", "link": "https://stackoverflow.com/users/1971209/uncle-tex"}, "edited": false, "score": 0, "creation_date": 1473694436, "post_id": 39266843, "comment_id": 66229118, "body": "Turns out you were right! Once I was able to obtain a device where I could reproduce the issue, I tracked down the <code>Bitmap.recycle()</code> call that was causing the crash."}, {"owner": {"reputation": 388, "user_id": 2576623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcc940c323bf87658258550c1293500c?s=128&d=identicon&r=PG", "display_name": "Mr.Ghamkhar", "link": "https://stackoverflow.com/users/2576623/mr-ghamkhar"}, "reply_to_user": {"reputation": 498, "user_id": 1971209, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7de5b3c4547f04034b676a391e5d8af0?s=128&d=identicon&r=PG", "display_name": "uncle_tex", "link": "https://stackoverflow.com/users/1971209/uncle-tex"}, "edited": false, "score": 0, "creation_date": 1530682866, "post_id": 39266843, "comment_id": 89315997, "body": "@uncle_tex how could you fix it? the problem of Bitmap.recycle"}], "tags": [], "owner": {"reputation": 202, "user_id": 4247236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9766dfd90c6f4ff5361768868c5f55e0?s=128&d=identicon&r=PG&f=1", "display_name": "Cutler", "link": "https://stackoverflow.com/users/4247236/cutler"}, "is_accepted": true, "score": 16, "last_activity_date": 1573828056, "last_edit_date": 1573828056, "creation_date": 1472719738, "answer_id": 39266843, "question_id": 39253368, "link": "https://stackoverflow.com/questions/39253368/native-android-crash-invalid-bitmap/39266843#39266843", "title": "Native Android Crash - Invalid Bitmap", "body": "<p>It might crash if your bitmap calls recycle() method. \ntry without using yourbitmap.recycle() method. </p>\n"}], "owner": {"reputation": 498, "user_id": 1971209, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7de5b3c4547f04034b676a391e5d8af0?s=128&d=identicon&r=PG", "display_name": "uncle_tex", "link": "https://stackoverflow.com/users/1971209/uncle-tex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7252, "favorite_count": 1, "accepted_answer_id": 39266843, "answer_count": 1, "score": 13, "last_activity_date": 1573828056, "creation_date": 1472656625, "last_edit_date": 1472742910, "question_id": 39253368, "link": "https://stackoverflow.com/questions/39253368/native-android-crash-invalid-bitmap", "title": "Native Android Crash - Invalid Bitmap", "body": "<p>I am getting crash reports in the Google Developer Console with the abort message: \"Error, cannot access an invalid/free'd bitmap here!\".  The below stack-trace is all I've been able to get a hold of so far.  The issue is only occurring on Android 6.0 devices (marshmallow).  I'm not able to reproduce the issue on any of my devices.  The users' that are seeing this are unable to even open the application; it crashes before they are even presented with any visual representation of the app.  Since the error involves Bitmaps, I went through my entire project looking for corrupt image files but I did not find any. Any suggestions? Thanks!</p>\n\n<pre><code>*** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***\nBuild fingerprint:'google/ryu/dragon:6.0.1/MXC89L/3084571:user/release-keys'\nRevision: '0'\nABI: 'arm64'\npid: 15550, tid: 15550, name: appname  &gt;&gt;&gt; com.domain.appname &lt;&lt;&lt;\nsignal 6 (SIGABRT), code -6 (SI_TKILL), fault addr --------\nAbort message: 'Error, cannot access an invalid/free'd bitmap here!'\n    x0   0000000000000000  x1   0000000000003cbe  x2   0000000000000006  x3   0000000000000000\n    x4   0000000000000000  x5   0000000000000001  x6   0000000000000000  x7   0000000000000000\n    x8   0000000000000083  x9   000000000000003c  x10  0000007fcd9a8e2c  x11  0000007fcd9a8e68\n   x12  0000007fcd9a8d40  x13  0000000000000034  x14  0000007fcd9a8f18  x15  0000000000000000\n   x16  0000007b0b1996a8  x17  0000007b0b15caac  x18  0000007b0b51c418  x19  0000007b0b59c0a8\n   x20  0000007b0b59bfe8  x21  000000000000000b  x22  0000000000000006  x23  0000007b0c3f9900\n   x24  0000000000000000  x25  000000007081e970  x26  0000007fcd9a9928  x27  0000007fcd9a9950\n   x28  0000007af426d340  x29  0000007fcd9a8dd0  x30  0000007b0b15a248\n   sp   0000007fcd9a8dd0  pc   0000007b0b15cab4  pstate 0000000020000000\n\nbacktrace:\n    #00 pc 000000000006aab4  /system/lib64/libc.so (tgkill+8)\n    #01 pc 0000000000068244  /system/lib64/libc.so (pthread_kill+68)\n    #02 pc 0000000000021238  /system/lib64/libc.so (raise+28)\n    #03 pc 000000000001b9d8  /system/lib64/libc.so (abort+60)\n    #04 pc 000000000000ceec  /system/lib64/libcutils.so (__android_log_assert+236)\n    #05 pc 00000000000e8720  /system/lib64/libandroid_runtime.so (_ZNK7android6Bitmap11assertValidEv+40)\n    #06 pc 00000000000e8804  /system/lib64/libandroid_runtime.so (_ZN7android6Bitmap11getSkBitmapEP8SkBitmap+20)\n    #07 pc 00000000000fa2b8  /system/lib64/libandroid_runtime.so\n    #08 pc 00000000730a6f84  /data/dalvik-cache/arm64/system@framework@boot.oat (offset 0x1eda000)\n</code></pre>\n\n<p>I am also seeing this stack-trace, which I would gusss is related:</p>\n\n<pre><code>*** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***\nBuild fingerprint: 'samsung/j3xlteuc/j3xlteatt:6.0.1/MMB29K/J320AUCU1APC9:user/release-keys'\nRevision: '0'\nABI: 'arm'\npid: 29403, tid: 29403, name: appname  &gt;&gt;&gt; com.domain.appname &lt;&lt;&lt;\nsignal 6 (SIGABRT), code -6 (SI_TKILL), fault addr --------\nAbort message: 'Error, cannot access an invalid/free'd bitmap here!'\n    r0 00000000  r1 000072db  r2 00000006  r3 b6fb2d9c\n    r4 b6fb2da4  r5 b6fb2d54  r6 0000000b  r7 0000010c\n    r8 00000000  r9 b4924500  sl 12e7a280  fp 70c321e8\n    ip 00000006  sp bebb7540  lr b6d11501  pc b6d138f0  cpsr 400b0010\n\nbacktrace:\n    #00 pc 000428f0  /system/lib/libc.so (tgkill+12)\n    #01 pc 000404fd  /system/lib/libc.so (pthread_kill+32)\n    #02 pc 0001cc4b  /system/lib/libc.so (raise+10)\n    #03 pc 00019ec9  /system/lib/libc.so (__libc_android_abort+34)\n    #04 pc 00017550  /system/lib/libc.so (abort+4)\n    #05 pc 00008723  /system/lib/libcutils.so (__android_log_assert+86)\n    #06 pc 00090523  /system/lib/libandroid_runtime.so (android::Bitmap::assertValid() const+18)\n    #07 pc 0009059f  /system/lib/libandroid_runtime.so (android::Bitmap::getSkBitmap(SkBitmap*)+6)\n    #08 pc 00099c35  /system/lib/libandroid_runtime.so\n    #09 pc 033768df  /system/framework/arm/boot.oat (offset 0x2f4c000)\n</code></pre>\n"}, {"tags": ["c++", "qt", "layout", "resize", "mainwindow"], "comments": [{"owner": {"reputation": 7180, "user_id": 2666212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/874561e399041a45c82c2ca6652400b6?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2666212/mike"}, "edited": false, "score": 4, "creation_date": 1472658575, "post_id": 39253357, "comment_id": 65843806, "body": "you can override <a href=\"https://doc.qt.io/qt-5/qwidget.html#resizeEvent\" rel=\"nofollow noreferrer\"><code>resizeEvent</code></a> in your main window, and resize your widgets however you like there. But layout managers are the right tool to do this. layouts are not limited to vertical and horizontal layouts, there are forms and grid layouts, you can also have all of these nested in some way. . ."}, {"owner": {"reputation": 8160, "user_id": 1035613, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b4d6ce44848765d7b02e4309c9efe9bb?s=128&d=identicon&r=PG", "display_name": "Dmitry Sazonov", "link": "https://stackoverflow.com/users/1035613/dmitry-sazonov"}, "edited": false, "score": 1, "creation_date": 1472659348, "post_id": 39253357, "comment_id": 65844295, "body": "Btw, if you want to use layouts, you should learn what <code>QSizePolicy</code> is and how it works with layouts."}], "owner": {"reputation": 11, "user_id": 6779441, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-a0vuEhDRSQg/AAAAAAAAAAI/AAAAAAAAAC4/n6S8SX6Hbqs/photo.jpg?sz=128", "display_name": "Kikidr", "link": "https://stackoverflow.com/users/6779441/kikidr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1472694232, "creation_date": 1472656591, "last_edit_date": 1472694232, "question_id": 39253357, "link": "https://stackoverflow.com/questions/39253357/can-i-resize-qtwidgets-when-qtmainwindow-grows-without-layout-management", "title": "Can I resize QTWidgets when QTMainWindow grows without layout management?", "body": "<p>I have searched on the internet for a long time but I couldn't find an answer to my question.</p>\n\n<p>When resizing the main window of my application I want some of my widgets to grow.</p>\n\n<p>A lot of answers I found were about using layout managers.</p>\n\n<p>My application was almost done so if I use a horizontal or vertical layout my application looks completely different from what it looks now and I am not able to change it to the way it was.</p>\n\n<p>Does anybody know if you can resize widgets while resizing the mainwindow without using layout managers?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1472656594, "post_id": 39253332, "comment_id": 65842502, "body": "What are you trying to do with <code>a%2==0</code>?"}, {"owner": {"reputation": 30796, "user_id": 1145666, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/rXvMA.jpg?s=128&g=1", "display_name": "Bart Friederichs", "link": "https://stackoverflow.com/users/1145666/bart-friederichs"}, "edited": false, "score": 5, "creation_date": 1472656624, "post_id": 39253332, "comment_id": 65842516, "body": "Did you actually read the error message? It is quite clear."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 5, "creation_date": 1472656643, "post_id": 39253332, "comment_id": 65842531, "body": "What is the purpose of a try/catch block here? Why can&#39;t you just do the <code>cout</code> business in the body of the <code>if</code> statement? Exceptions should never be used for control flow."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 1, "creation_date": 1472656903, "post_id": 39253332, "comment_id": 65842720, "body": "@CodyGray, and TurboC++ should never by used as a compiler anymore. And yet some institutions don&#39;t care."}, {"owner": {"reputation": 30796, "user_id": 1145666, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/rXvMA.jpg?s=128&g=1", "display_name": "Bart Friederichs", "link": "https://stackoverflow.com/users/1145666/bart-friederichs"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1472656931, "post_id": 39253332, "comment_id": 65842738, "body": "@CodyGray it is quite useless, but I can see the educational / fiddling value of exceptions somewhere."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1472656934, "post_id": 39253332, "comment_id": 65842742, "body": "While that&#39;s true, @Story, I don&#39;t see anything about Turbo C++ here, and I don&#39;t think there is any institution that is forcing Hariharan to misuse exceptions... It is just a common mistake among beginning developers."}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1472657018, "post_id": 39253332, "comment_id": 65842796, "body": "Don&#39;t use exceptions for simple logic like this. They are usually <i>way</i> slower than a simple <code>if</code> or <code>break</code>. Exceptions are for exceptional situations (i.e. something that does not normally occur)."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1472657161, "post_id": 39253332, "comment_id": 65842870, "body": "@CodyGray, Sadly misuse of exceptions is taught more commonly than one would care to believe"}], "answers": [{"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1472656735, "post_id": 39253375, "comment_id": 65842601, "body": "FYI there is a close flag for such questions called &quot;This question was caused by a problem that can no longer be reproduced or a simple typographical error.&quot;"}], "tags": [], "owner": {"reputation": 2258, "user_id": 3399105, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh6.googleusercontent.com/-twhyJ9NJTFw/AAAAAAAAAAI/AAAAAAAAADA/Nwa0s-0HXvA/photo.jpg?sz=128", "display_name": "Shahid", "link": "https://stackoverflow.com/users/3399105/shahid"}, "is_accepted": false, "score": 0, "last_activity_date": 1472656914, "last_edit_date": 1472656914, "creation_date": 1472656646, "answer_id": 39253375, "question_id": 39253332, "link": "https://stackoverflow.com/questions/39253332/try-catch-inside-a-for-loop-in-c/39253375#39253375", "title": "Try-Catch inside a &quot;for&quot; loop in c++", "body": "<p>Typo here. You can not do modulo operation on an array. <code>a%2==0</code> should be <code>a[i]%2==0</code>. Also change <code>&amp;&amp;</code> to <code>||</code> as you are trying to find \"either a negative number <code>or</code> a even number\".</p>\n"}, {"tags": [], "owner": {"reputation": 30796, "user_id": 1145666, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/rXvMA.jpg?s=128&g=1", "display_name": "Bart Friederichs", "link": "https://stackoverflow.com/users/1145666/bart-friederichs"}, "is_accepted": true, "score": 0, "last_activity_date": 1472656823, "creation_date": 1472656823, "answer_id": 39253423, "question_id": 39253332, "link": "https://stackoverflow.com/questions/39253332/try-catch-inside-a-for-loop-in-c/39253423#39253423", "title": "Try-Catch inside a &quot;for&quot; loop in c++", "body": "<p>Two things:</p>\n\n<ol>\n<li>You are modulo-ing an array <code>a</code> with an integer <code>2</code>. You should dereference it to get the value: <code>a[i] % 2 == 0</code>.</li>\n<li>You do a boolean AND, where you want a boolean OR (according to your question): <code>||</code> instead of <code>&amp;&amp;</code>.</li>\n</ol>\n"}], "owner": {"reputation": 25, "user_id": 5588807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7389b5739e7c93bebc8ffad9d2de8c1?s=128&d=identicon&r=PG&f=1", "display_name": "Hariharan", "link": "https://stackoverflow.com/users/5588807/hariharan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 735, "favorite_count": 0, "closed_date": 1472656895, "accepted_answer_id": 39253423, "answer_count": 2, "score": 0, "last_activity_date": 1472656914, "creation_date": 1472656522, "question_id": 39253332, "link": "https://stackoverflow.com/questions/39253332/try-catch-inside-a-for-loop-in-c", "closed_reason": "Not suitable for this site", "title": "Try-Catch inside a &quot;for&quot; loop in c++", "body": "<p>I've  10 numbers to be read. My task is to generate exceptions with the numbers are either a negative number or a even number. Below is the code I wrote, but it isn't working.</p>\n\n<pre><code> #include &lt;iostream&gt;     \n using namespace std;\n\n int main()\n   { \n     int a[10];\n     for(int i=0;i&lt;10;i++)\n        { \n         cin&gt;&gt;a[i];\n        }\n     for(int i=0;i&lt;10;i++)\n        {\n          try{\n              if(a[i]&lt;0 &amp;&amp; a%2==0)\n                   throw a[i]; \n             }\n          catch(int a)\n             {\n             cout&lt;&lt;\"You ve entered a -ve number or a even number\";\n             }\n   }\n    return 0;\n    } \n</code></pre>\n\n<p>This was the error shown:</p>\n\n<pre><code>In function 'int main()': 16:24: error: invalid operands of types     'int [10]' and 'int' to binary 'operator%' \n</code></pre>\n\n<p>Thanks for the help!</p>\n"}, {"tags": ["c++", "linux", "cmake", "clion"], "comments": [{"owner": {"reputation": 2173, "user_id": 6577680, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BNh_9G6Q-1M/AAAAAAAAAAI/AAAAAAAAAA8/uTxVAAioLfw/photo.jpg?sz=128", "display_name": "Matthew Fisher", "link": "https://stackoverflow.com/users/6577680/matthew-fisher"}, "edited": false, "score": 1, "creation_date": 1472658797, "post_id": 39253289, "comment_id": 65843934, "body": "Do you have collision between an executable named &#39;unit_test&#39; and a subdirectory in the test area named &#39;unit_test&#39;?  The output error seems to indicate that the executable cannot be create because there is already a directory of that name"}, {"owner": {"reputation": 85, "user_id": 6779384, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-g5v5-cTiYw4/AAAAAAAAAAI/AAAAAAAAABw/N2q7t68xcaI/photo.jpg?sz=128", "display_name": "Federico M&#224;lato", "link": "https://stackoverflow.com/users/6779384/federico-m%c3%a0lato"}, "reply_to_user": {"reputation": 2173, "user_id": 6577680, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BNh_9G6Q-1M/AAAAAAAAAAI/AAAAAAAAAA8/uTxVAAioLfw/photo.jpg?sz=128", "display_name": "Matthew Fisher", "link": "https://stackoverflow.com/users/6577680/matthew-fisher"}, "edited": false, "score": 0, "creation_date": 1472668188, "post_id": 39253289, "comment_id": 65849048, "body": "@Matthew Fisher Before creating the &quot;test&quot; folder, I created the &quot;unit_test&quot; folder. Then, I used the Refractor to erase it completely. Do this matter?"}, {"owner": {"reputation": 1006, "user_id": 4106184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3gPMf.jpg?s=128&g=1", "display_name": "Dartmouth", "link": "https://stackoverflow.com/users/4106184/dartmouth"}, "edited": false, "score": 0, "creation_date": 1472668278, "post_id": 39253289, "comment_id": 65849101, "body": "@FedericoM&#224;lato did you clear the CMake cache afterwards? Can be done by deleting CMakeCache.txt"}, {"owner": {"reputation": 2173, "user_id": 6577680, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BNh_9G6Q-1M/AAAAAAAAAAI/AAAAAAAAAA8/uTxVAAioLfw/photo.jpg?sz=128", "display_name": "Matthew Fisher", "link": "https://stackoverflow.com/users/6577680/matthew-fisher"}, "edited": false, "score": 0, "creation_date": 1472669687, "post_id": 39253289, "comment_id": 65849946, "body": "If the directory is erases then no it will not matters.  @FedericoM&#224;lato may be correct with his idea about the cmake cache."}, {"owner": {"reputation": 85, "user_id": 6779384, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-g5v5-cTiYw4/AAAAAAAAAAI/AAAAAAAAABw/N2q7t68xcaI/photo.jpg?sz=128", "display_name": "Federico M&#224;lato", "link": "https://stackoverflow.com/users/6779384/federico-m%c3%a0lato"}, "edited": false, "score": 0, "creation_date": 1472723898, "post_id": 39253289, "comment_id": 65871340, "body": "I have just tried to do what you both suggested: it seems to work, but now I have another problem: I built another library before GoogleTest (in particular it was SFML 2.3.2) and now the compiler end with a lot of &quot;undefined reference to... &lt;all SFML functions&gt; &quot;. What can I do now?"}], "owner": {"reputation": 85, "user_id": 6779384, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-g5v5-cTiYw4/AAAAAAAAAAI/AAAAAAAAABw/N2q7t68xcaI/photo.jpg?sz=128", "display_name": "Federico M&#224;lato", "link": "https://stackoverflow.com/users/6779384/federico-m%c3%a0lato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2550, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1472657087, "creation_date": 1472656373, "last_edit_date": 1472657087, "question_id": 39253289, "link": "https://stackoverflow.com/questions/39253289/usr-lib-ld-cannot-open-output-file-unit-test-is-a-directory", "title": "/usr/lib/ld cannot open output file unit_test: is a directory", "body": "<p>I have a problem while programming an Asteroid-like videogame in C++ for an exam I will have in a few days. I'm using a JetBrains CLion 1.3 IDE. When I try to implement a unit test with GoogleTest framework (version 1.7.0), I get this error by the compiler:</p>\n\n<pre><code>[ 40%] Built target core\n[ 80%] Built target asteroids\n[ 85%] Built target gtest\n[ 87%] Linking CXX executable unit_test\n/usr/bin/ld: impossibile aprire il file di output unit_test: \u00c8 una directory\ncollect2: error: ld returned 1 exit status\nCMakeFiles/unit_test.dir/build.make:95: set di istruzioni per l'obiettivo \"unit_test\" non riuscito\nmake[2]: *** [unit_test] Errore 1\nCMakeFiles/Makefile2:104: set di istruzioni per l'obiettivo \"CMakeFiles/unit_test.dir/all\" non riuscito\nmake[1]: *** [CMakeFiles/unit_test.dir/all] Errore 2\nmake[1]: *** Attesa per i processi non terminati....\n[ 91%] Built target gtest_main\nMakefile:127: set di istruzioni per l'obiettivo \"all\" non riuscito\nmake: *** [all] Errore 2\n</code></pre>\n\n<p>What I want to ask is about the line:</p>\n\n<p><code>/usr/bin/ld: impossibile aprire il file di output unit_test: \u00c8 una directory</code></p>\n\n<p>translated from italian, it means (literally):</p>\n\n<p><code>/usr/bin/ld: cannot open output file unit_test: Is a directory</code></p>\n\n<p>What's wrong with my code? I suppose it's a CMakeLists.txt problem, so here are my CMakeLists.txt files (one from the main directory, the other from the \"test subdirectory\"):</p>\n\n<p><strong>Main Directory CMakeLists.txt</strong> (part regarding the googletest build):</p>\n\n<pre><code>add_subdirectory(test)\n\nadd_executable(unit_test main.cpp)\nadd_library(core ${SOURCE_FILES})\ntarget_link_libraries(unit_test core)\n</code></pre>\n\n<p><strong>Test Directory CMakeLists.txt</strong> (full):</p>\n\n<pre><code>add_subdirectory(googletest)\nset(gtest_SOURCE_DIR, googletest)\ninclude_directories(${gtest_SOURCE_DIR}/include\n        ${gtest_SOURCE_DIR})\n\nset(SOURCE_FILE runAllTests runAllTests.cpp AsteroidFixture.cpp)\nadd_executable(runAllTests ${SOURCE_FILE})\ntarget_link_libraries(runAllTests gtest gtest_main core)\n</code></pre>\n\n<p>I created the AsteroidFixture.cpp file as a first try for the main gtest functions, but it's essentially an empty file.</p>\n"}, {"tags": ["c++", "c", "multithreading", "pthreads"], "comments": [{"owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "edited": false, "score": 2, "creation_date": 1472654577, "post_id": 39252605, "comment_id": 65841055, "body": "Yes if you read about <code>pthread_cond_broadcast</code> it is implied that multiple threads can wait on one condition. The mutex will be unlocked while the threads are in <code>pthread_cond_wait</code> so while they wait there there is no issue. Afterwards and before that they will have to wait for each other to release the mutex"}], "answers": [{"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1472656590, "last_edit_date": 1472656590, "creation_date": 1472656133, "answer_id": 39253218, "question_id": 39252605, "link": "https://stackoverflow.com/questions/39252605/about-the-pthread-cond-wait/39253218#39253218", "title": "about the pthread_cond_wait?", "body": "<blockquote>\n  <p>The question is: Is it valid that several threads call the q265_frame_cond_wait synchronously</p>\n</blockquote>\n\n<p>Multiple threads can call <code>q265_frame_cond_wait</code>, there is no race condition.</p>\n\n<blockquote>\n  <p><code>q265_frame_cond_broadcast</code>, will all the waiting thread get the mutex synchronously? </p>\n</blockquote>\n\n<p><code>pthread_cond_broadcast</code> wakes up all threads currently waiting on the condition variable. Only one thread can lock a mutex at a time, so that these woken up threads queue up on locking the mutex.</p>\n\n<blockquote>\n  <p>Or they must compete to get the mutex?</p>\n</blockquote>\n\n<p>Conceptually yes, <code>pthread_cond_wait</code> has to lock the mutex on return. And this is known as <a href=\"https://en.wikipedia.org/wiki/Thundering_herd_problem\" rel=\"nofollow\">thundering herd problem</a>. </p>\n\n<p>Linux solves this problem by moving the queue of waiters on the condition variable to the queue of waiters on the mutex to avoid waking up threads that would then immediately be blocked on the mutex. This is known as <em>wait morphing</em>.</p>\n"}], "owner": {"reputation": 41, "user_id": 6779227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60b9036de34e66fde44a69034c944741?s=128&d=identicon&r=PG&f=1", "display_name": "zhuhb", "link": "https://stackoverflow.com/users/6779227/zhuhb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1472778918, "creation_date": 1472654383, "last_edit_date": 1472778918, "question_id": 39252605, "link": "https://stackoverflow.com/questions/39252605/about-the-pthread-cond-wait", "title": "about the pthread_cond_wait?", "body": "<p>I have the following code:</p>\n\n<pre><code>typedef struct {\n...\n    volatile int i_lines_completed;\n    pthread_mutex_t mutex;\n    q265_pthread_cond_t cv;\n...\n}q265_picture_t;\nvoid q265_frame_cond_broadcast( q265_picture_t *frame, int i_lines_completed )\n{\n    pthread_mutex_lock( &amp;frame-&gt;mutex );\n    frame-&gt;i_lines_completed = i_lines_completed;\n    pthread_cond_broadcast( &amp;frame-&gt;cv );\n    pthread_mutex_unlock( &amp;frame-&gt;mutex );\n}\nvoid q265_frame_cond_wait( q265_picture_t *frame, int i_lines_completed )\n{\n    pthread_mutex_lock( &amp;frame-&gt;mutex );\n    while( frame-&gt;i_lines_completed &lt; i_lines_completed )\n        pthread_cond_wait( &amp;frame-&gt;cv, &amp;frame-&gt;mutex );\n    pthread_mutex_unlock( &amp;frame-&gt;mutex );\n}\n</code></pre>\n\n<p>The use case is:</p>\n\n<p>More than one thread could call <code>q265_frame_cond_wait</code>  to request that the frame have the required <code>i_lines_completed</code> while there is only one thread call the <code>q265_frame_cond_broadcast</code> to broadcast the <code>i_lines_completed</code>.</p>\n\n<p>The question is:</p>\n\n<p>Is it valid that several threads call the <code>q265_frame_cond_wait</code> synchronously\uff1f</p>\n\n<p>When the certain thread call the <code>q265_frame_cond_broadcast</code>, </p>\n\n<ul>\n<li>Will all the waiting threads get the mutex synchronously? </li>\n<li>Or they must compete to get the mutex?</li>\n</ul>\n\n<p>Another problem:\nBut is it right that two pthread_cond_t share only one mutex? For example, the following code, the two pthread_cond_t is_fill and is_empty share the only one mutex, and threads will possibly call q265_framelist_cond_wait0 and q265_framelist_cond_wait1 synchronously.</p>\n\n<pre><code>typedef struct {\n...\n    volatile int i_size;\n    pthread_mutex_t mutex;\n    q265_pthread_cond_t is_fill, is_empty;\n...\n}q265_picture_list_t;\nvoid q265_framelist_cond_wait0( q265_picture_list_t *framelist)\n{\n    pthread_mutex_lock( &amp;framelist-&gt;mutex );\n    while( framelist-&gt;i_size &lt;= 0)\n        pthread_cond_wait( &amp;framelist-&gt;is_fill, &amp;framelist-&gt;mutex );\n    pthread_mutex_unlock( &amp;framelist-&gt;mutex );\n}\nvoid q265_framelist_cond_wait1( q265_picture_list_t *framelist)\n{\n    pthread_mutex_lock( &amp;framelist-&gt;mutex );\n    while( framelist-&gt;i_size == max_size)\n        pthread_cond_wait( &amp;framelist-&gt;is_empty, &amp;framelist-&gt;mutex );\n    pthread_mutex_unlock( &amp;framelist-&gt;mutex );\n}\n</code></pre>\n"}, {"tags": ["c++", "qt-creator", "accelerometer", "raspberry-pi2", "gyroscope"], "comments": [{"owner": {"reputation": 3864, "user_id": 620908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2abd643ecb33f1a18a7a4f976cef0dbe?s=128&d=identicon&r=PG", "display_name": "Adrian Colomitchi", "link": "https://stackoverflow.com/users/620908/adrian-colomitchi"}, "edited": false, "score": 1, "creation_date": 1472654619, "post_id": 39252600, "comment_id": 65841086, "body": "Have you tried shaking your board while running the tests? Because, you know, the Earth&#39;s revolution/rotation accelerations are too small to register values high enough on an accelerometer at rest."}, {"owner": {"reputation": 306, "user_id": 6721865, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-L7t_B450W2E/AAAAAAAAAAI/AAAAAAAAAgU/Qgu4DLSYxKI/photo.jpg?sz=128", "display_name": "Jerwin Prabu", "link": "https://stackoverflow.com/users/6721865/jerwin-prabu"}, "reply_to_user": {"reputation": 3864, "user_id": 620908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2abd643ecb33f1a18a7a4f976cef0dbe?s=128&d=identicon&r=PG", "display_name": "Adrian Colomitchi", "link": "https://stackoverflow.com/users/620908/adrian-colomitchi"}, "edited": false, "score": 0, "creation_date": 1472654869, "post_id": 39252600, "comment_id": 65841272, "body": "Thanks adrian, Actually I have added that in my testing vehicle, So when I start the vehicle It will get shake, depends upon that the reading will display, I got gyro reading using same Ic. Problem in calculation."}, {"owner": {"reputation": 3864, "user_id": 620908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2abd643ecb33f1a18a7a4f976cef0dbe?s=128&d=identicon&r=PG", "display_name": "Adrian Colomitchi", "link": "https://stackoverflow.com/users/620908/adrian-colomitchi"}, "edited": false, "score": 0, "creation_date": 1472655434, "post_id": 39252600, "comment_id": 65841689, "body": "I can&#39;t see any fault in the code. Do you have another board to test? b/c it&#39;s not uncommon some components to go busted - see <a href=\"https://en.wikipedia.org/wiki/Electrostatic-sensitive_device\" rel=\"nofollow noreferrer\">esd</a>"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1472656311, "post_id": 39252600, "comment_id": 65842309, "body": "Note that the first two readings are taken without a delay between them.  You need to move the call to <code>delay</code> to the front of the loop."}, {"owner": {"reputation": 306, "user_id": 6721865, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-L7t_B450W2E/AAAAAAAAAAI/AAAAAAAAAgU/Qgu4DLSYxKI/photo.jpg?sz=128", "display_name": "Jerwin Prabu", "link": "https://stackoverflow.com/users/6721865/jerwin-prabu"}, "edited": false, "score": 0, "creation_date": 1472705319, "post_id": 39252600, "comment_id": 65861216, "body": "front of the for loop ? K i il try"}, {"owner": {"reputation": 306, "user_id": 6721865, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-L7t_B450W2E/AAAAAAAAAAI/AAAAAAAAAgU/Qgu4DLSYxKI/photo.jpg?sz=128", "display_name": "Jerwin Prabu", "link": "https://stackoverflow.com/users/6721865/jerwin-prabu"}, "edited": false, "score": 0, "creation_date": 1472705920, "post_id": 39252600, "comment_id": 65861363, "body": "Hi Martin, I have tried but I got similar ouput Accelx :7.10318e-42  Accely :5.32353e-42  Accelz :5.32353e-42 Accelx :7.14382e-42  Accely :7.14942e-42  Accelz :5.36697e-42"}, {"owner": {"reputation": 306, "user_id": 6721865, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-L7t_B450W2E/AAAAAAAAAAI/AAAAAAAAAgU/Qgu4DLSYxKI/photo.jpg?sz=128", "display_name": "Jerwin Prabu", "link": "https://stackoverflow.com/users/6721865/jerwin-prabu"}, "edited": false, "score": 0, "creation_date": 1472706272, "post_id": 39252600, "comment_id": 65861473, "body": "Hi Adrian, Ya I have tried but I got similar output. If any component busted means I can&#39;t get gyro output also, but I got gyro, sensor reading -28.628  pitch :-28.628  roll :-28.628 yaw :-57.9645  pitch :-57.9645  roll :-44.1806 yaw :-122.508  pitch :-122.508  roll :-65.4697 yaw :-134.465  pitch :-103.711  roll :-103.711"}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 3864, "user_id": 620908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2abd643ecb33f1a18a7a4f976cef0dbe?s=128&d=identicon&r=PG", "display_name": "Adrian Colomitchi", "link": "https://stackoverflow.com/users/620908/adrian-colomitchi"}, "edited": false, "score": 0, "creation_date": 1472719649, "post_id": 39252600, "comment_id": 65868291, "body": "@AdrianColomitchi, there&#39;s no need to shake it to sense the gravitational acceleration <code>g</code> in the Z axis.  And the three values are exactly the same magnitude.  Something wrong in the reading code I&#39;m afraid. I&#39;m just sit on my chair and sense it."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1472719892, "post_id": 39252600, "comment_id": 65868441, "body": "@JerwinPrabuA, getting the mean for three values is not a good estimate for a smoothed value.  It should be better to print all three values to se at least if there&#39;s some variation."}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1472727792, "post_id": 39252600, "comment_id": 65874026, "body": "The only value returned by <code>float DmpMPU6050_Demo::Loop_Accelx()</code> is a <code>1</code> (as an error value it seems)..."}, {"owner": {"reputation": 3864, "user_id": 620908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2abd643ecb33f1a18a7a4f976cef0dbe?s=128&d=identicon&r=PG", "display_name": "Adrian Colomitchi", "link": "https://stackoverflow.com/users/620908/adrian-colomitchi"}, "reply_to_user": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1472729912, "post_id": 39252600, "comment_id": 65875390, "body": "@Bob__   indeed <code>Loop_Accelx()</code> is missing any <code>return</code> except the very first <code>if (!dmpReady)</code>,"}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "reply_to_user": {"reputation": 3864, "user_id": 620908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2abd643ecb33f1a18a7a4f976cef0dbe?s=128&d=identicon&r=PG", "display_name": "Adrian Colomitchi", "link": "https://stackoverflow.com/users/620908/adrian-colomitchi"}, "edited": false, "score": 0, "creation_date": 1472730849, "post_id": 39252600, "comment_id": 65875990, "body": "@AdrianColomitchi that should result in UB and a possible reason for the values obtained (something e-42 are denormal values for 32bit <code>float</code>s, probably random bits)."}, {"owner": {"reputation": 306, "user_id": 6721865, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-L7t_B450W2E/AAAAAAAAAAI/AAAAAAAAAgU/Qgu4DLSYxKI/photo.jpg?sz=128", "display_name": "Jerwin Prabu", "link": "https://stackoverflow.com/users/6721865/jerwin-prabu"}, "edited": false, "score": 0, "creation_date": 1472736223, "post_id": 39252600, "comment_id": 65880033, "body": "<code>accelX = accelX&#47; 0.16384;         accelY = accelY&#47; 0.16384;         accelZ = accelZ&#47; 0.16384;</code> If I changed calculation like this I got out put, but ouput value                                                                                                           Accelx :12.207  Accely :6.10352  Accelz :6.10352                          Accelx :4.94433e-05  Accely :4.94433e-05  Accelz :3.29622e-05                                               Accelx :12.207  Accely :1.30953e-40  Accelz :1.31013e-40 Accelx :18.3105  Accely :6.10352  Accelz :6.10352"}, {"owner": {"reputation": 3864, "user_id": 620908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2abd643ecb33f1a18a7a4f976cef0dbe?s=128&d=identicon&r=PG", "display_name": "Adrian Colomitchi", "link": "https://stackoverflow.com/users/620908/adrian-colomitchi"}, "edited": false, "score": 0, "creation_date": 1472736506, "post_id": 39252600, "comment_id": 65880263, "body": "@JerwinPrabuA do you realize thst you don&#39;t have a proper <code>return</code> with a float value from the <code>float DmpMPU6050_Demo::Loop_Accelx()</code>? Count how many <code>return</code> statements you see there."}, {"owner": {"reputation": 3864, "user_id": 620908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2abd643ecb33f1a18a7a4f976cef0dbe?s=128&d=identicon&r=PG", "display_name": "Adrian Colomitchi", "link": "https://stackoverflow.com/users/620908/adrian-colomitchi"}, "edited": false, "score": 0, "creation_date": 1472737743, "post_id": 39252600, "comment_id": 65881221, "body": "@JerwinPrabuA Suggestion: change your DmpMPU6050 library. E.g. have a look on [this one][MPU6050-Pi-Demo]."}, {"owner": {"reputation": 306, "user_id": 6721865, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-L7t_B450W2E/AAAAAAAAAAI/AAAAAAAAAgU/Qgu4DLSYxKI/photo.jpg?sz=128", "display_name": "Jerwin Prabu", "link": "https://stackoverflow.com/users/6721865/jerwin-prabu"}, "edited": false, "score": 0, "creation_date": 1472743658, "post_id": 39252600, "comment_id": 65885619, "body": "@ Adrian I already saw that, depends upon that demo file, I have created this code, I think it is similar."}, {"owner": {"reputation": 3864, "user_id": 620908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2abd643ecb33f1a18a7a4f976cef0dbe?s=128&d=identicon&r=PG", "display_name": "Adrian Colomitchi", "link": "https://stackoverflow.com/users/620908/adrian-colomitchi"}, "edited": false, "score": 0, "creation_date": 1472769914, "post_id": 39252600, "comment_id": 65898287, "body": "@JerwinPrabuA &quot;I think it is similar.&quot; No matter what you think, the current code is buggy. Would you mind to post the functions for the gyro reading? Or upload the entire DmpMPU6050_Demo h/cpp files somewhere. BTW, sorry for the broken link, <a href=\"https://github.com/richardghirst/PiBits/tree/master/MPU6050-Pi-Demo\" rel=\"nofollow noreferrer\">here it is again</a>"}, {"owner": {"reputation": 306, "user_id": 6721865, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-L7t_B450W2E/AAAAAAAAAAI/AAAAAAAAAgU/Qgu4DLSYxKI/photo.jpg?sz=128", "display_name": "Jerwin Prabu", "link": "https://stackoverflow.com/users/6721865/jerwin-prabu"}, "reply_to_user": {"reputation": 3864, "user_id": 620908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2abd643ecb33f1a18a7a4f976cef0dbe?s=128&d=identicon&r=PG", "display_name": "Adrian Colomitchi", "link": "https://stackoverflow.com/users/620908/adrian-colomitchi"}, "edited": false, "score": 0, "creation_date": 1472794557, "post_id": 39252600, "comment_id": 65904075, "body": "@AdrianColomitchi As per your suggestion in dmpmpu_demo file I have added <code>return 1;</code> above <code>#endif</code> I go the ouput like <code>yaw :-6.17357  pitch :-6.17357  roll :-6.17357 Accelx :18.3106  Accely :12.2071  Accelz :18.3105 yaw :-9.05116  pitch :-14.7817  roll :-14.7817 Accelx :6.10371  Accely :12.2072  Accelz :12.2072</code> but I got confused whether the reading is correct or not ?"}], "answers": [{"comments": [{"owner": {"reputation": 306, "user_id": 6721865, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-L7t_B450W2E/AAAAAAAAAAI/AAAAAAAAAgU/Qgu4DLSYxKI/photo.jpg?sz=128", "display_name": "Jerwin Prabu", "link": "https://stackoverflow.com/users/6721865/jerwin-prabu"}, "edited": false, "score": 0, "creation_date": 1472722628, "post_id": 39267147, "comment_id": 65870450, "body": "Thanks a lot for your explanation. I have posted my source code only, I will take the signals from header and connected to source slot. In public variable <code>DmpMPU6050_Demo *accelerometer;</code> in header. I will include the dmp, you can check. If possible give example calculation using this code."}, {"owner": {"reputation": 306, "user_id": 6721865, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-L7t_B450W2E/AAAAAAAAAAI/AAAAAAAAAgU/Qgu4DLSYxKI/photo.jpg?sz=128", "display_name": "Jerwin Prabu", "link": "https://stackoverflow.com/users/6721865/jerwin-prabu"}, "edited": false, "score": 0, "creation_date": 1472723518, "post_id": 39267147, "comment_id": 65871107, "body": "For my calculation purpose I have added <code>accelx1</code>"}, {"owner": {"reputation": 306, "user_id": 6721865, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-L7t_B450W2E/AAAAAAAAAAI/AAAAAAAAAgU/Qgu4DLSYxKI/photo.jpg?sz=128", "display_name": "Jerwin Prabu", "link": "https://stackoverflow.com/users/6721865/jerwin-prabu"}, "edited": false, "score": 0, "creation_date": 1472736296, "post_id": 39267147, "comment_id": 65880093, "body": "<code>accelX = accelX&#47; 0.16384; accelY = accelY&#47; 0.16384; accelZ = accelZ&#47; 0.16384;</code> If I changed calculation like this I got out put, but ouput value <code>Accelx :12.207 Accely :6.10352 Accelz :6.10352 Accelx :4.94433e-05 Accely :4.94433e-05 Accelz :3.29622e-05 Accelx :12.207 Accely :1.30953e-40 Accelz :1.31013e-40 Accelx :18.3105 Accely :6.10352 Accelz :6.10352</code>"}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1472764505, "post_id": 39267147, "comment_id": 65896308, "body": "@Bob__, Oooops! that&#39;s true!  My apologies for that!  you&#39;re right."}], "tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": true, "score": 0, "last_activity_date": 1472764730, "last_edit_date": 1472764730, "creation_date": 1472720530, "answer_id": 39267147, "question_id": 39252600, "link": "https://stackoverflow.com/questions/39252600/accelerometer-calculation/39267147#39267147", "title": "Accelerometer calculation", "body": "<p>You <strong>must sense the gravitational acceleration of the earth</strong>.  This means that the vertical component of the vector you get must be clearly defined, and you get a vector that is clearly the zero vector.  This is wrong and indicates you are not getting correct values from the accelerometer.  Check that.</p>\n\n<p>Next time, it will be better to post complete code, as the global <code>accelX</code>, <code>accelY</code> and <code>accelZ</code> declarations are not seen anywhere in your code, what can be the actual source of problems... We don't have also the definitions of <code>accelerometer-&gt;LoopAccel...()</code> prototypes.</p>\n\n<p>And finally, <em>don't shake it to sense data</em> as has been told in the comments.  Accelerometers sense the gravitational attraction of the earth, and you can just change its orientation to see a change in the acceleration vector.</p>\n"}, {"tags": [], "owner": {"reputation": 306, "user_id": 6721865, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-L7t_B450W2E/AAAAAAAAAAI/AAAAAAAAAgU/Qgu4DLSYxKI/photo.jpg?sz=128", "display_name": "Jerwin Prabu", "link": "https://stackoverflow.com/users/6721865/jerwin-prabu"}, "is_accepted": false, "score": 0, "last_activity_date": 1472797138, "creation_date": 1472797138, "answer_id": 39285526, "question_id": 39252600, "link": "https://stackoverflow.com/questions/39252600/accelerometer-calculation/39285526#39285526", "title": "Accelerometer calculation", "body": "<p>In dmpmpu.cpp file I have added return </p>\n\n<pre><code>    #ifdef OUTPUT_READABLE_REALACCEL\n\n    mpu.dmpGetQuaternion(&amp;q, fifoBuffer);\n    mpu.dmpGetAccel(&amp;aa, fifoBuffer);\n    mpu.dmpGetGravity(&amp;gravity, &amp;q);\n    mpu.dmpGetLinearAccel(&amp;aaReal, &amp;aa, &amp;gravity);\n\n    return 3;\n    #endif\n\n    printf(\"\\n\");\n</code></pre>\n\n<p>For calculating the Accelero value without number count </p>\n\n<pre><code>        accelX = accelerometer-&gt;Loop_Accelx();\n    accelY = accelerometer-&gt;Loop_Accely();\n    accelZ = accelerometer-&gt;Loop_Accelz();\n\n    for(int i = 0; i&lt;2; i++) //averaging of accelerometer data upto 3 readings\n    {\n        float accelX1 = accelerometer-&gt;Loop_Accelx(); //storing the Accelx value from DmpMPU6050_Demo class\n        float accelY1 = accelerometer-&gt;Loop_Accely(); //storing the Accely value from DmpMPU6050_Demo class\n        float accelZ1 = accelerometer-&gt;Loop_Accelz(); //storing the Accelz value from DmpMPU6050_Demo class\n\n        accelX = accelX + accelX1;\n        accelY = accelY + accelY1;\n        accelZ = accelZ + accelZ1;\n\n        delay(1);\n    }\n\n    accelX = accelX/ 0.16384;\n    accelY = accelY/ 0.16384;\n    accelZ = accelZ/ 0.16384;\n</code></pre>\n\n<p>Finally I got the output like </p>\n\n<pre><code>yaw :8.3854  pitch :8.3854  roll :8.3854\nAccelx :54.9316  Accely :54.9316  Accelz :54.9316\nyaw :-5.5964  pitch :-5.5964  roll :-5.5964\nAccelx :42.7246  Accely :36.6211  Accelz :30.5176\nyaw :-129.255  pitch :-129.255  roll :-91.2928\nAccelx :36.6214  Accely :48.8281  Accelz :30.5176\n</code></pre>\n"}], "owner": {"reputation": 306, "user_id": 6721865, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-L7t_B450W2E/AAAAAAAAAAI/AAAAAAAAAgU/Qgu4DLSYxKI/photo.jpg?sz=128", "display_name": "Jerwin Prabu", "link": "https://stackoverflow.com/users/6721865/jerwin-prabu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 514, "favorite_count": 1, "accepted_answer_id": 39267147, "answer_count": 2, "score": 1, "last_activity_date": 1472797138, "creation_date": 1472654377, "last_edit_date": 1472722730, "question_id": 39252600, "link": "https://stackoverflow.com/questions/39252600/accelerometer-calculation", "title": "Accelerometer calculation", "body": "<p>I cant find what is wrong here in this code. I am trying to get accelerometer data, but when i try to run it on device, that is working but not a proper reading I think problem in calculation, same logic I have used for gyro and taken proper reading but accelerometer output displayed  <code>Accelx :3.56023e-09  Accely :1.76423e-42  Accelz :1.77404e-42</code></p>\n\n<pre><code>    accelX = accelerometer-&gt;Loop_Accelx();\n    accelY = accelerometer-&gt;Loop_Accely();\n    accelZ = accelerometer-&gt;Loop_Accelz();\n\n    for(int i = 0; i&lt;2; i++) //averaging of accelerometer data upto 3 readings\n    {\n        float accelX1 = accelerometer-&gt;Loop_Accelx(); //storing the Accelx value from DmpMPU6050_Demo class\n        float accelY1 = accelerometer-&gt;Loop_Accely(); //storing the Accely value from DmpMPU6050_Demo class\n        float accelZ1 = accelerometer-&gt;Loop_Accelz(); //storing the Accelz value from DmpMPU6050_Demo class\n\n        accelX = accelX + accelX1;\n        accelY = accelY + accelY1;\n        accelZ = accelZ + accelZ1;\n\n        delay(1);\n    }\n\n    accelX = accelX/3;\n    accelY = accelY/3;\n    accelZ = accelZ/3;\n\n    if(numbercount == number){\n\n    emit Accelx_Data(accelX);\n    emit Accely_Data(accelY);\n    emit Accelz_Data(accelZ);\n\n    cout&lt;&lt;\"Accelx :\"&lt;&lt;accelX&lt;&lt;\"  Accely :\"&lt;&lt;accelY&lt;&lt;\"  Accelz :\"&lt;&lt;accelZ&lt;&lt;endl;\n</code></pre>\n\n<p>dmpmpu_demo file for accel x : </p>\n\n<pre><code>float DmpMPU6050_Demo::Loop_Accelx()\n{\n    if (!dmpReady)\n    {\n        return 1;\n    }\n\n    fifoCount = mpu.getFIFOCount();\n\n    if (fifoCount == 1024)\n    {\n        mpu.resetFIFO();\n        printf(\"FIFO overflow!\\n\");\n    }\n\n    else if (fifoCount &gt;= 42 )\n    {\n        mpu.getFIFOBytes(fifoBuffer, packetSize);\n\n        #ifdef OUTPUT_READABLE_REALACCEL\n\n        mpu.dmpGetQuaternion(&amp;q, fifoBuffer);\n        mpu.dmpGetAccel(&amp;aa, fifoBuffer);\n        mpu.dmpGetGravity(&amp;gravity, &amp;q);\n        mpu.dmpGetLinearAccel(&amp;aaReal, &amp;aa, &amp;gravity);\n\n        #endif\n\n        printf(\"\\n\");\n\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "pointers", "struct"], "comments": [{"owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "edited": false, "score": 2, "creation_date": 1472654300, "post_id": 39252543, "comment_id": 65840832, "body": "your problem is you only have a pointer to <code>out</code>. You need to allocate the memory first."}, {"owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "edited": false, "score": 0, "creation_date": 1472654336, "post_id": 39252543, "comment_id": 65840864, "body": "this would still fail because <code>in</code> has no memory"}, {"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 0, "creation_date": 1472654349, "post_id": 39252543, "comment_id": 65840882, "body": "Sorry, why do you have those typedefs again?"}, {"owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "edited": false, "score": 0, "creation_date": 1472654406, "post_id": 39252543, "comment_id": 65840922, "body": "You should familiarize yourself with c++ and pointers first. Maybe look here for a bit <a href=\"http://www.cplusplus.com/doc/tutorial/dynamic/\" rel=\"nofollow noreferrer\">cplusplus.com/doc/tutorial/dynamic</a> To explain everything in this Stackoverflow question would be a bit too much"}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1472654338, "creation_date": 1472654338, "answer_id": 39252587, "question_id": 39252543, "link": "https://stackoverflow.com/questions/39252543/accessing-elements-within-a-pointer-of-a-struct-inside-another-pointer-to-a-stru/39252587#39252587", "title": "Accessing elements within a pointer of a struct inside another pointer to a struct", "body": "<p>In your <code>test()</code> function, <code>out</code> does not point to any <em>valid</em> memory location. Attempt to dereference that pointer will invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behavior</a>.</p>\n\n<p>So, you need to allocate memory to <code>out</code> in <code>main()</code> and pass that to <code>test()</code>.</p>\n\n<p><strong>After that</strong>, <code>out-&gt;in</code> also being a pointer, you need to allocate memory to that pointer also so that it points to a valid memory location. After you have ensured that <strong>all</strong> pointers point to valid memory location, you can go ahead dereferencing them.</p>\n"}, {"comments": [{"owner": {"reputation": 113, "user_id": 6115473, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/2cb1d890932bd8357a131847cb5210a2?s=128&d=identicon&r=PG&f=1", "display_name": "daemoner119", "link": "https://stackoverflow.com/users/6115473/daemoner119"}, "edited": false, "score": 0, "creation_date": 1472655201, "post_id": 39252641, "comment_id": 65841521, "body": "My main has that outer out and can pass out into the function. Accessing any elements outer struct works. But now how do I allocate memory for in?  I tried  inner in; inner* q = &amp;in;"}, {"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "reply_to_user": {"reputation": 113, "user_id": 6115473, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/2cb1d890932bd8357a131847cb5210a2?s=128&d=identicon&r=PG&f=1", "display_name": "daemoner119", "link": "https://stackoverflow.com/users/6115473/daemoner119"}, "edited": false, "score": 0, "creation_date": 1472655285, "post_id": 39252641, "comment_id": 65841571, "body": "<code>out-&gt;in = new inner()</code> in your <code>test()</code> function. Do this before other code"}], "tags": [], "owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "is_accepted": false, "score": 0, "last_activity_date": 1472654478, "creation_date": 1472654478, "answer_id": 39252641, "question_id": 39252543, "link": "https://stackoverflow.com/questions/39252543/accessing-elements-within-a-pointer-of-a-struct-inside-another-pointer-to-a-stru/39252641#39252641", "title": "Accessing elements within a pointer of a struct inside another pointer to a struct", "body": "<p>Well, for starters, you only have a pointer to out, which currently has no allocated memory: As @IgorTandetnik said, do this:</p>\n\n<blockquote>\n  <p><code>outer out; outer* p = &amp;out; test(p);</code> You have an uninitialized pointer that isn't pointing to anything valid.</p>\n</blockquote>\n\n<p>When test uses <code>out</code>, by dereferencing it, you basically Undefined behavior, as expected with dereferencing pointers not pointing to anything.</p>\n\n<p>Next, you have the same problem for <code>in</code>, which also has no allocated memory. Fix that by allocating memory for <code>in</code>, which currently also causes Undefined Behavior, like before.</p>\n\n<p>Also, I am confused why you have those <code>typedefs</code>, and yet tagged your question <a href=\"/questions/tagged/c%2b%2b\" class=\"post-tag\" title=\"show questions tagged &#39;c++&#39;\" rel=\"tag\">c++</a>. If you are compiling with a c compiler, it makes sense, but otherwise, you don't need to prefix with <code>struct</code> in A c++ compiler, which already does it for you.</p>\n"}, {"comments": [{"owner": {"reputation": 113, "user_id": 6115473, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/2cb1d890932bd8357a131847cb5210a2?s=128&d=identicon&r=PG&f=1", "display_name": "daemoner119", "link": "https://stackoverflow.com/users/6115473/daemoner119"}, "edited": false, "score": 0, "creation_date": 1472656130, "post_id": 39252770, "comment_id": 65842182, "body": "This works just like mine, however I get the following warning: warning: non-static data member initializers only available with -std=c++11 or -std=gnu++11         inner * in = new inner();"}], "tags": [], "owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "is_accepted": false, "score": 0, "last_activity_date": 1472654826, "creation_date": 1472654826, "answer_id": 39252770, "question_id": 39252543, "link": "https://stackoverflow.com/questions/39252543/accessing-elements-within-a-pointer-of-a-struct-inside-another-pointer-to-a-stru/39252770#39252770", "title": "Accessing elements within a pointer of a struct inside another pointer to a struct", "body": "<p>derefencing pointers should come <strong>after</strong> some form of allocation.</p>\n\n<p>inside your function <code>out-&gt;in-&gt;a = 5;</code> gets a declared_but_not_initilized pointer. you should have done before that something like <code>out = new outer();</code> but then only the <code>out</code> pointer could be defreferenced [actually it could be defreferenced  before but that would cause UB - bad], so now you shuold also allocate for the <code>in</code> pointer like so <code>out-&gt;in = new inner();</code> and that's it:</p>\n\n<pre><code>/* Function to use struct */\nvoid test(outer * out)\n{\n  //Update the value of out-&gt;in-&gt;a.\n  out-&gt;in = new inner();       // addition\n  out-&gt;in-&gt;a = 5;\n}\n\nint main() {\n  outer * out;\n  out = new outer();   // addition\n\n  test(out);\n\n  std::cout &lt;&lt; \"My updated value: \" &lt;&lt; out-&gt;in-&gt;a &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p><em>Note: I used <code>new</code> because you used <code>#include &lt;iostream&gt;</code> meaning c++. If using C, please use <code>malloc</code> instead</em></p>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 2, "last_activity_date": 1472655614, "last_edit_date": 1472655614, "creation_date": 1472654900, "answer_id": 39252788, "question_id": 39252543, "link": "https://stackoverflow.com/questions/39252543/accessing-elements-within-a-pointer-of-a-struct-inside-another-pointer-to-a-stru/39252788#39252788", "title": "Accessing elements within a pointer of a struct inside another pointer to a struct", "body": "<p>For starters C and C++ are different languages.</p>\n\n<p>In any case you have to allocate the structures before accessing their elements throw pointers. Otherwise using uninitialized pointers or pointers that do not point to valid structures' objects results in undefined behavior of the program.</p>\n\n<p>Here is a demonstrative C program that shows how to access elements of a structure using pointers</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\ntypedef struct\n{\n  unsigned int            a;\n  unsigned int            b;\n  unsigned int            c;\n} inner;\n\ntypedef struct\n{\n  unsigned int            d;\n  unsigned int            e;\n  inner * in;\n} outer;\n\n\nint main( void ) \n{\n    outer *out = malloc( sizeof( outer ) );\n\n    if ( ( out != NULL ) &amp;&amp; ( out-&gt;in = malloc( sizeof( inner ) ) ) )\n    {\n        out-&gt;in-&gt;a = 1;\n        out-&gt;in-&gt;b = 2;\n        out-&gt;in-&gt;c = 3;\n\n        printf( \"out-&gt;in = { a = %d, b = %d, c = %d }\\n\", out-&gt;in-&gt;a, out-&gt;in-&gt;b, out-&gt;in-&gt;c );\n\n        free( out-&gt;in );\n        free( out );\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Its output is</p>\n\n<pre><code>out-&gt;in = { a = 1, b = 2, c = 3 }\n</code></pre>\n\n<p>In C++ the program can look like</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntypedef struct\n{\n  unsigned int            a;\n  unsigned int            b;\n  unsigned int            c;\n} inner;\n\ntypedef struct\n{\n  unsigned int            d;\n  unsigned int            e;\n  inner * in;\n} outer;\n\nint main() \n{\n    outer *out = new outer;\n\n    out-&gt;in = new inner;\n\n    out-&gt;in-&gt;a = 1;\n    out-&gt;in-&gt;b = 2;\n    out-&gt;in-&gt;c = 3;\n\n    std::cout &lt;&lt; \"out-&gt;in = { a = \" &lt;&lt; out-&gt;in-&gt;a\n              &lt;&lt; \", b = \" &lt;&lt; out-&gt;in-&gt;b\n              &lt;&lt; \", c = \" &lt;&lt; out-&gt;in-&gt;c\n              &lt;&lt; \" }\" &lt;&lt; std::endl;\n\n    delete out-&gt;in;\n    delete out;\n\n    return 0;\n}\n</code></pre>\n\n<p>Its output will be the same as shown above.</p>\n\n<p>As for this function</p>\n\n<pre><code>void test(outer *out)\n{\n  //Update the value of out-&gt;in-&gt;a.\n  out-&gt;in-&gt;a = 5;\n}\n</code></pre>\n\n<p>then the both pointers <code>out</code> and <code>in</code> must point to valid objects of types <code>outer</code> and <code>inner</code>.</p>\n"}], "owner": {"reputation": 113, "user_id": 6115473, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/2cb1d890932bd8357a131847cb5210a2?s=128&d=identicon&r=PG&f=1", "display_name": "daemoner119", "link": "https://stackoverflow.com/users/6115473/daemoner119"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1082, "favorite_count": 1, "accepted_answer_id": 39252788, "answer_count": 4, "score": 4, "last_activity_date": 1472655836, "creation_date": 1472654239, "last_edit_date": 1472655836, "question_id": 39252543, "link": "https://stackoverflow.com/questions/39252543/accessing-elements-within-a-pointer-of-a-struct-inside-another-pointer-to-a-stru", "title": "Accessing elements within a pointer of a struct inside another pointer to a struct", "body": "<p>Just trying to learn how nested pointers to structs work. How would I access an element within a pointer of a struct within another pointer to a struct? Thanks.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntypedef struct\n{\n  unsigned int            a;\n  unsigned int            b;\n  unsigned int            c;\n} inner;\n\ntypedef struct\n{\n  unsigned int            d;\n  unsigned int            e;\n  inner * in;\n} outer;\n\n/* Function to use struct */\nvoid test(outer * out)\n{\n  //Update the value of out-&gt;in-&gt;a.\n  out-&gt;in-&gt;a = 5;\n}\n\nint main() {\n  outer * out;\n  test(out);\n\n  std::cout &lt;&lt; \"My updated value: \" &lt;&lt; out-&gt;in-&gt;a &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>I get a \"Segmentation fault (core dumped)\".</p>\n\n<p>Edit: Made changes based on suggestions.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntypedef struct\n{\n    unsigned int            a;\n    unsigned int            b;\n    unsigned int            c;\n} inner;\n\ntypedef struct\n{\n    unsigned int            d;\n    unsigned int            e;\n    inner * in = new inner();\n} outer;\n\n/* Function to use struct */\nvoid test(outer * out)\n{\n    //Update the value of out-&gt;d.\n    out-&gt;d = 3; \n    //Update the value of out-&gt;in-&gt;a.\n    out-&gt;in-&gt;a = 5;\n}\n\nint main() {\n\n    outer out; \n    outer* p = &amp;out; \n\n    test(p);\n\n    std::cout &lt;&lt; \"My updated value for d: \" &lt;&lt; p-&gt;d &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"My updated value for a: \" &lt;&lt; p-&gt;in-&gt;a &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>I now get the correct values updated. However I have a warning now </p>\n\n<p>\"warning: non-static data member initializers only available with -std=c++11 or -std=gnu++11\"</p>\n\n<pre><code>inner * in = new inner();\n</code></pre>\n\n<p>How do I fix this warning?</p>\n"}, {"tags": ["c++", "floating-point", "precision"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1472654282, "post_id": 39252513, "comment_id": 65840817, "body": "You never should compare <code>float</code> or <code>double</code> values directly using the <code>==</code> operator. Internal representations might be different and aren&#39;t precise as you assume."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1472721562, "post_id": 39252513, "comment_id": 65869660, "body": "which hardware supports 80-bit precision? Even extended precision on Intel has only 64 bits of precision"}, {"owner": {"reputation": 1995, "user_id": 2718002, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/a1ed8371bd619c1d0297cea4efbf984b?s=128&d=identicon&r=PG&f=1", "display_name": "powerpete", "link": "https://stackoverflow.com/users/2718002/powerpete"}, "edited": false, "score": 0, "creation_date": 1472734250, "post_id": 39252513, "comment_id": 65878509, "body": "Compiling with -mfpmath=387 will use 387 Floating Point. Register size are 80 bit. <a href=\"http://stackoverflow.com/a/3219838/2718002\">See this Entry</a>. Without this option SSE Unit is used. (64Bit)"}], "owner": {"reputation": 1995, "user_id": 2718002, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/a1ed8371bd619c1d0297cea4efbf984b?s=128&d=identicon&r=PG&f=1", "display_name": "powerpete", "link": "https://stackoverflow.com/users/2718002/powerpete"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "closed_date": 1472654857, "answer_count": 0, "score": 0, "last_activity_date": 1472721111, "creation_date": 1472654122, "last_edit_date": 1472721111, "question_id": 39252513, "link": "https://stackoverflow.com/questions/39252513/casting-operands-in-floating-point-comparison-works-not-as-expected", "closed_reason": "Duplicate", "title": "Casting operands in floating point comparison works not as expected", "body": "<p>When I want to compare two floating points values. I get strange results.</p>\n\n<p>My example compiled with x86_64-w64-mingw32-g++ test.c -mfpmath=387:</p>\n\n<pre><code>#include \"math.h\"\n#include \"stdio.h\"\nint main(int argc, char **args) {\n\n    double t1 = atof(\"999990\") * 1e-9;\n    double t2 = atof(\"999990\") * 1e-9;\n    printf(\"1) Compare of two variables \\\"t1 != t2\\\": \");\n    if (t1 != t2) {\n        printf(\"Not Equal\\n\");\n    }\n    else {\n        printf(\"Equal\\n\");  //This is taken\n    }\n    printf(\"2) Compare of Variable with calculated value \\\"t1 != atof(\\\"999990\\\") * 1e-9\\\": \");\n    if (t1 != atof(\"999990\") * 1e-9) {\n        printf(\"Not Equal\\n\");  //This is taken\n    }\n    else {\n        printf(\"Equal\\n\");\n    }\n    printf(\"3) Compare of Variable with casted calculated value \\\"t1 != (double)(atof(\\\"999990\\\") * 1e-9)\\\": \");\n    if (t1 != (double)(atof(\"999990\") * 1e-9)) {\n        printf(\"Not Equal\\n\");  //This is taken??\n    }\n    else {\n        printf(\"Equal\\n\");\n    }\n    return 0;\n}\n</code></pre>\n\n<p>First comparison: OK</p>\n\n<p>Second comparison: OK (assuming right term is a 80Bit precision)</p>\n\n<p>Why evaluates the third comparison to unequal?\n<strong>Why is the cast to double not recognised?</strong> Why is the result of the comparison different than the first case?</p>\n"}, {"tags": ["c++", "visual-studio-2015", "build-agent"], "comments": [{"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 0, "creation_date": 1472654121, "post_id": 39252473, "comment_id": 65840693, "body": "This may be of interest to you: <a href=\"https://connect.microsoft.com/VisualStudio/feedback/details/800753/tracker-error-trk0002-failed-to-execute-command-for-building-x64-driver-resources\" rel=\"nofollow noreferrer\">connect.microsoft.com/VisualStudio/feedback/details/800753/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 60, "user_id": 5429853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2gXJf.jpg?s=128&g=1", "display_name": "aleph0", "link": "https://stackoverflow.com/users/5429853/aleph0"}, "is_accepted": false, "score": 0, "last_activity_date": 1504900872, "creation_date": 1504900872, "answer_id": 46123784, "question_id": 39252473, "link": "https://stackoverflow.com/questions/39252473/tracker-error-trk0002-failed-to-execute-command/46123784#46123784", "title": "TRACKER : error TRK0002: Failed to execute command", "body": "<p><code>Windows Logs\\Application</code> in Windows Event Viewer may have clues about that.</p>\n\n<p>In my case, it produce an event like </p>\n\n<blockquote>\n  <p>Activation context generation failed for \"C:\\Program Files (x86)\\Microsoft Visual Studio 12.0\\VC\\bin\\CL.exe\".Error in manifest or policy file \"C:\\Program Files (x86)\\Microsoft Visual Studio 12.0\\VC\\bin\\CL.exe.Config\" on line 0. Invalid Xml syntax.</p>\n</blockquote>\n\n<p>I simply remove that <code>.config</code> file and it works.</p>\n"}, {"tags": [], "owner": {"reputation": 328, "user_id": 2046648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6bd69c6deae1beed831f0358c46ba57?s=128&d=identicon&r=PG", "display_name": "wrossmck", "link": "https://stackoverflow.com/users/2046648/wrossmck"}, "is_accepted": false, "score": 0, "last_activity_date": 1539699029, "creation_date": 1539699029, "answer_id": 52837484, "question_id": 39252473, "link": "https://stackoverflow.com/questions/39252473/tracker-error-trk0002-failed-to-execute-command/52837484#52837484", "title": "TRACKER : error TRK0002: Failed to execute command", "body": "<p>This happens me when the aggressive virus scanner in my org secretly detects these files as malicious and removes them in the background.</p>\n\n<p>In my case, changing the rules of the virus scanner resolves this problem.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8243440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3199505127a28cb9226529a6ad5e4b3b?s=128&d=identicon&r=PG&f=1", "display_name": "Haglund", "link": "https://stackoverflow.com/users/8243440/haglund"}, "is_accepted": false, "score": -1, "last_activity_date": 1557175319, "last_edit_date": 1557175319, "creation_date": 1541905187, "answer_id": 53245473, "question_id": 39252473, "link": "https://stackoverflow.com/questions/39252473/tracker-error-trk0002-failed-to-execute-command/53245473#53245473", "title": "TRACKER : error TRK0002: Failed to execute command", "body": "<p>I had this troublesome error. \nI deleted my local TEMP folder completely and rebooted.</p>\n\n<p>C:\\Users\\ [USER]\\AppData\\Local\\Temp</p>\n"}, {"tags": [], "owner": {"reputation": 4405, "user_id": 444469, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6473d6a6a5f3de7230d51f5cd3b57b52?s=128&d=identicon&r=PG", "display_name": "Matthieu", "link": "https://stackoverflow.com/users/444469/matthieu"}, "is_accepted": false, "score": 0, "last_activity_date": 1608039297, "creation_date": 1608039297, "answer_id": 65306958, "question_id": 39252473, "link": "https://stackoverflow.com/questions/39252473/tracker-error-trk0002-failed-to-execute-command/65306958#65306958", "title": "TRACKER : error TRK0002: Failed to execute command", "body": "<p>This error will happen with multiple tools when launching MSBuild from the command line:</p>\n<ul>\n<li>CL.exe</li>\n<li>cvtres.exe</li>\n<li>Lib.exe</li>\n<li>link.exe</li>\n</ul>\n<p>adding them to the exclusion list of the active antivirus can fix some of the issues, but will not be enough with a modern antivirus.</p>\n<p>An alternative is to deactivate Tracker.exe which is a tool that enable incremental builds. As it's not something you generally want on a build server, I found it safe to deactivate.</p>\n<p>You can deactivate it by passing this parameter to msbuild: <code>/p:TrackFileAccess=false</code></p>\n"}], "owner": {"reputation": 154, "user_id": 6571414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e605c988288a6226e5102458f4475416?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/6571414/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 5490, "favorite_count": 1, "answer_count": 4, "score": 7, "last_activity_date": 1608039297, "creation_date": 1472654003, "question_id": 39252473, "link": "https://stackoverflow.com/questions/39252473/tracker-error-trk0002-failed-to-execute-command", "title": "TRACKER : error TRK0002: Failed to execute command", "body": "<p>I got this error while trying to build my project on a buildAgent running as a service, does anyone have a solution for it?</p>\n\n<pre><code> TRACKER : error TRK0002: Failed to execute command: \"\"C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\bin\\amd64\\CL.exe\" @C:\\BuildAgent\\temp\\buildTmp\\tmpfde187c5fd8a42299ab4d18e25e0c9fe.rsp\". The operation identifier is not valid.\n</code></pre>\n\n<p>i tried a solution to a similar issue when building the project in command line (using  \"_IsNativeEnvironment\" variable ) but it didn't work for me, also i need the solution to work on my local computer permanently.</p>\n"}, {"tags": ["c++", "matrix", "diagonal"], "comments": [{"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 0, "creation_date": 1472653996, "post_id": 39252420, "comment_id": 65840583, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/19599284/how-do-i-diagonalize-a-matrix-quickly-in-c\">How do I diagonalize a matrix quickly in C++?</a>"}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1472653998, "post_id": 39252420, "comment_id": 65840585, "body": "What is wrong with the code you have now?"}, {"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1472654148, "post_id": 39252420, "comment_id": 65840709, "body": "@ScottHunter What code?"}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "reply_to_user": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 1, "creation_date": 1472654230, "post_id": 39252420, "comment_id": 65840773, "body": "@ArnavBorborah: Exactly my point."}, {"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1472654273, "post_id": 39252420, "comment_id": 65840803, "body": "@ScottHunter Ah, point taken"}, {"owner": {"reputation": 3864, "user_id": 620908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2abd643ecb33f1a18a7a4f976cef0dbe?s=128&d=identicon&r=PG", "display_name": "Adrian Colomitchi", "link": "https://stackoverflow.com/users/620908/adrian-colomitchi"}, "reply_to_user": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 0, "creation_date": 1472655128, "post_id": 39252420, "comment_id": 65841467, "body": "@ArnavBorborah now that you&#39;ve taken it, there&#39;s no point to answer to."}, {"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "reply_to_user": {"reputation": 3864, "user_id": 620908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2abd643ecb33f1a18a7a4f976cef0dbe?s=128&d=identicon&r=PG", "display_name": "Adrian Colomitchi", "link": "https://stackoverflow.com/users/620908/adrian-colomitchi"}, "edited": false, "score": 0, "creation_date": 1472655235, "post_id": 39252420, "comment_id": 65841543, "body": "@AdrianColomitchi What are you implying, (irrelevantly)"}, {"owner": {"reputation": 3864, "user_id": 620908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2abd643ecb33f1a18a7a4f976cef0dbe?s=128&d=identicon&r=PG", "display_name": "Adrian Colomitchi", "link": "https://stackoverflow.com/users/620908/adrian-colomitchi"}, "reply_to_user": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 0, "creation_date": 1472655595, "post_id": 39252420, "comment_id": 65841801, "body": "@ArnavBorborah sorry, I might have forgotten a &quot;large grin&quot; emoticon - never mind."}], "answers": [{"tags": [], "owner": {"reputation": 982, "user_id": 5314692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/772574311ed4da5b181c0134a99dda29?s=128&d=identicon&r=PG&f=1", "display_name": "Semyon Burov", "link": "https://stackoverflow.com/users/5314692/semyon-burov"}, "is_accepted": false, "score": 0, "last_activity_date": 1472657343, "last_edit_date": 1472657343, "creation_date": 1472656948, "answer_id": 39253473, "question_id": 39252420, "link": "https://stackoverflow.com/questions/39252420/how-to-make-a-given-matrix-diagonally-dominant-in-c/39253473#39253473", "title": "How to make a given matrix diagonally dominant in c++?", "body": "<p>There is really nothing you can do. If matrix don't satisfy conditions of some method, use other methods that can be applied to this matrix.</p>\n\n<p>Remember, in such bad cases you can use Gauss Elimination to solve SLAE.</p>\n"}], "owner": {"reputation": 1, "user_id": 6390925, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ki7yvGXAHww/AAAAAAAAAAI/AAAAAAAAEAk/pa80LHWQQxw/photo.jpg?sz=128", "display_name": "graceful_wraith", "link": "https://stackoverflow.com/users/6390925/graceful-wraith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 916, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1472657343, "creation_date": 1472653865, "last_edit_date": 1472654699, "question_id": 39252420, "link": "https://stackoverflow.com/questions/39252420/how-to-make-a-given-matrix-diagonally-dominant-in-c", "title": "How to make a given matrix diagonally dominant in c++?", "body": "<p>Now for the Jacobi and Gauss-Seidel methods to work the matrix needs to be diagonally dominant. Any help would be appreciated.\nIts different than making a matrix diagonal. //Because of the downvotes </p>\n"}, {"tags": ["c++", "sdl", "linker-errors"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1472653979, "post_id": 39252385, "comment_id": 65840568, "body": "This means you are using more than 1 runtime. It seems here you are mixing Debug and Release in the same application. <code>LIBCMTD.lib</code> is part of the debug CRT. <code>LIBCMT.lib</code> is part of the release CRT. If you are building a Debug application make sure not to use Release libs and viseversa."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1472654310, "post_id": 39252385, "comment_id": 65840840, "body": "<i>&quot;However after checking they are both set to Multi-Threaded Debug.&quot;</i> That cannot possibly be correct. And if it is, you&#39;re linking to another library that you didn&#39;t mention in the question. The linker errors very clearly indicate that the conflicting library is <code>LIBCMT</code>, which is the release version."}, {"owner": {"reputation": 581, "user_id": 4279194, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/28191fdb7cdee2b74f953703b6d34e6c?s=128&d=identicon&r=PG&f=1", "display_name": "codetemplar", "link": "https://stackoverflow.com/users/4279194/codetemplar"}, "edited": false, "score": 0, "creation_date": 1472654320, "post_id": 39252385, "comment_id": 65840846, "body": "Thanks, unfortunately my quote was wrong. Ive edited the question and replaced LIBCMT.lib with LIBCMTD.lib. The linker output doesn&#39;t mention LIBCMT.lib, just somehow went missing during my copy and paste. My apologies, question edited"}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1472654347, "post_id": 39252385, "comment_id": 65840877, "body": "The edit only fixed it in one place. The output also says: <code>defaultlib &#39;LIBCMT&#39; conflicts with use of other libs</code>..."}, {"owner": {"reputation": 581, "user_id": 4279194, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/28191fdb7cdee2b74f953703b6d34e6c?s=128&d=identicon&r=PG&f=1", "display_name": "codetemplar", "link": "https://stackoverflow.com/users/4279194/codetemplar"}, "edited": false, "score": 0, "creation_date": 1472657853, "post_id": 39252385, "comment_id": 65843346, "body": "Ive fixed the LIBCMT issue and you were correct. The linker now doesnt report the different versions. However it still doesnt correct the original question. Post edited to remove the LIBCMT issue in linker output"}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 1, "creation_date": 1472659475, "post_id": 39252385, "comment_id": 65844370, "body": "You are still clearly trying to link object files targeting two different versions of the CRT. One or more of your project settings have to be incorrect, or there have to be additional libraries involved that you aren&#39;t telling us about (and haven&#39;t rebuilt). There isn&#39;t enough information here to provide any further help. This isn&#39;t a bug in Visual Studio; I&#39;ve successfully compiled and linked many projects in VS 2005."}], "answers": [{"comments": [{"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1472726232, "post_id": 39255686, "comment_id": 65872926, "body": "It is defined by default in the SDL headers. This should not be necessary unless you previously edited them to remove the definition."}, {"owner": {"reputation": 2336, "user_id": 1618406, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9fba98cb45aca3fe5f263540f6079214?s=128&d=identicon&r=PG", "display_name": "Tom Seddon", "link": "https://stackoverflow.com/users/1618406/tom-seddon"}, "edited": false, "score": 0, "creation_date": 1493606539, "post_id": 39255686, "comment_id": 74470975, "body": "<code>SDL_config_winrt.h</code> does define <code>HAVE_LIBC</code>... but I wonder how many people use that? ;) SDL 2.04 and SDL 2.05 don&#39;t otherwise seem to set it, for whatever reason. But when using cmake, you can specify <code>-DLIBC=ON</code> on the cmake command line to create a SDL_config.h that has <code>#define HAVE_LIBC 1</code> in it. This was only an issue with the x86 build for me."}], "tags": [], "owner": {"reputation": 581, "user_id": 4279194, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/28191fdb7cdee2b74f953703b6d34e6c?s=128&d=identicon&r=PG&f=1", "display_name": "codetemplar", "link": "https://stackoverflow.com/users/4279194/codetemplar"}, "is_accepted": true, "score": 7, "last_activity_date": 1472665899, "last_edit_date": 1472665899, "creation_date": 1472664688, "answer_id": 39255686, "question_id": 39252385, "link": "https://stackoverflow.com/questions/39252385/c-linker-error-lnk2005-already-defined-in-sdl/39255686#39255686", "title": "c++ linker error LNK2005 already defined in SDL", "body": "<p>Needed to define HAVE_LIBC in the SDL project. This stopped the multiple redefinition of both _ftlused and _ftol2_sse</p>\n"}], "owner": {"reputation": 581, "user_id": 4279194, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/28191fdb7cdee2b74f953703b6d34e6c?s=128&d=identicon&r=PG&f=1", "display_name": "codetemplar", "link": "https://stackoverflow.com/users/4279194/codetemplar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1683, "favorite_count": 1, "accepted_answer_id": 39255686, "answer_count": 1, "score": 6, "last_activity_date": 1472665899, "creation_date": 1472653774, "last_edit_date": 1472657777, "question_id": 39252385, "link": "https://stackoverflow.com/questions/39252385/c-linker-error-lnk2005-already-defined-in-sdl", "title": "c++ linker error LNK2005 already defined in SDL", "body": "<p>I am compiling my program using VS2005. I am linking to SDL static libraries and am getting the following linker errors;</p>\n\n<pre><code>1&gt;LIBCMTD.lib(fpinit.obj) : error LNK2005: __fltused already defined in SDL2d.lib(SDL_stdlib.obj)\n1&gt;LIBCMTD.lib(ftol2.obj) : error LNK2005: __ftol2_sse already defined in SDL2d.lib(SDL_stdlib.obj)\n1&gt;   Creating library ..\\..\\..\\product\\VS2005\\libs\\\\Standalone.lib and object ..\\..\\..\\product\\VS2005\\libs\\\\Standalone.exp\n1&gt;..\\..\\..\\product\\VS2005\\libs\\\\Standalone.exe : fatal error LNK1169: one or more multiply defined symbols found\n</code></pre>\n\n<p>I compiled SDL2d.lib using the same VS2005 compiler. My original thought was that I had mismatched runtime library settings for these projects. However after checking they are both set to Multi-Threaded Debug.</p>\n\n<p>I have just noticed that the linker output above seems to be creating a Standalone.lib and Standalone.exp before making the Standalone.exe. I have no idea why it's making a .lib and .exp</p>\n\n<p>Any other reasons why this error would occur?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "linear-programming", "cplex"], "comments": [{"owner": {"reputation": 4187, "user_id": 1718477, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iisrz.jpg?s=128&g=1", "display_name": "rkersh", "link": "https://stackoverflow.com/users/1718477/rkersh"}, "edited": false, "score": 0, "creation_date": 1472664961, "post_id": 39252319, "comment_id": 65847259, "body": "I&#39;m still confused by your choice of words.  <a href=\"http://www.ibm.com/support/knowledgecenter/SSSA5P_12.6.3/ilog.odms.cplex.help/CPLEX/UsrMan/topics/discr_optim/sos/02_SOS_defn.html\" rel=\"nofollow noreferrer\">SOS constraints</a> don&#39;t take a sum of variables, they take an ordered set (an array).  I think you want to create a bunch of SOS2 constraints (one for each column and one for each row of <code>lamda</code>).  Is that correct?  In your example you are only creating two SOS2 constraints...."}, {"owner": {"reputation": 145, "user_id": 2703893, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a5a7b5b400713b0340f2b54ff77a6d7a?s=128&d=identicon&r=PG&f=1", "display_name": "M.frank", "link": "https://stackoverflow.com/users/2703893/m-frank"}, "reply_to_user": {"reputation": 4187, "user_id": 1718477, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iisrz.jpg?s=128&g=1", "display_name": "rkersh", "link": "https://stackoverflow.com/users/1718477/rkersh"}, "edited": false, "score": 0, "creation_date": 1472667103, "post_id": 39252319, "comment_id": 65848502, "body": "I am pretty sure I only need two SOS2, but it may be me misunderstanding something. I have written down the model in Latex and uploaded it to this <a href=\"https://www.docdroid.net/IN38vY6/example9.pdf.html\" rel=\"nofollow noreferrer\">link</a>. I really appreciate your help, thanks!"}, {"owner": {"reputation": 10888, "user_id": 5625534, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/d4mCF.jpg?s=128&g=1", "display_name": "Erwin Kalvelagen", "link": "https://stackoverflow.com/users/5625534/erwin-kalvelagen"}, "edited": false, "score": 0, "creation_date": 1472676146, "post_id": 39252319, "comment_id": 65853325, "body": "This is not how to specify a model with SOS sets. What I would do is (1) formulate the model without sos sets (ie use normal variables and constraints). Once this works (export LP file to check) do: (2) add a SOS2 structure, Indeed this approach needs just 2 SOS2 sets. This step would not change anything from step (1): all equations and variables stay the same. We just add two SOS2 sets."}, {"owner": {"reputation": 145, "user_id": 2703893, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a5a7b5b400713b0340f2b54ff77a6d7a?s=128&d=identicon&r=PG&f=1", "display_name": "M.frank", "link": "https://stackoverflow.com/users/2703893/m-frank"}, "edited": false, "score": 0, "creation_date": 1472719259, "post_id": 39252319, "comment_id": 65868016, "body": "I posted the solution below."}], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 2703893, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a5a7b5b400713b0340f2b54ff77a6d7a?s=128&d=identicon&r=PG&f=1", "display_name": "M.frank", "link": "https://stackoverflow.com/users/2703893/m-frank"}, "edited": false, "score": 0, "creation_date": 1472673148, "post_id": 39257299, "comment_id": 65851788, "body": "That was the solution I went with in the first place. However, by forcing lamda[0][0] &gt;= 0.1 (as a constraint) and maximizing z (the non-linear function). I get a behaviour, where lamda[0][0] is (of course) chosen and then lamda[S][K] is also chosen. Which means I get the convex combination of (0,0) and (S,K) (which is the top right point) and they are not neighbouring. Thinking about it, this makes perfectly sense, as if I have a SOS2 per row and column, then I can chose row 0 and column K and still not violate any constraints. That is why I think only two SOS2 is needed."}, {"owner": {"reputation": 145, "user_id": 2703893, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a5a7b5b400713b0340f2b54ff77a6d7a?s=128&d=identicon&r=PG&f=1", "display_name": "M.frank", "link": "https://stackoverflow.com/users/2703893/m-frank"}, "edited": false, "score": 0, "creation_date": 1472673444, "post_id": 39257299, "comment_id": 65851940, "body": "So what I think I need to do is the following:  Looking at the output you generated, then s1 - s4 needs to be one SOS2 of size 4, where position 0 consists of the sum of x_0_0, x_0_1, x_0_2 and x_0_3, position 1 consists of x_1_0, x_1_1, x_1_2 and x_1_3, etc. The same goes for s5-s8, they also need to be one SOS2. That is how I understand the example I linked. Again, Thank you so much for taking you the time to help me."}, {"owner": {"reputation": 4187, "user_id": 1718477, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iisrz.jpg?s=128&g=1", "display_name": "rkersh", "link": "https://stackoverflow.com/users/1718477/rkersh"}, "reply_to_user": {"reputation": 145, "user_id": 2703893, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a5a7b5b400713b0340f2b54ff77a6d7a?s=128&d=identicon&r=PG&f=1", "display_name": "M.frank", "link": "https://stackoverflow.com/users/2703893/m-frank"}, "edited": false, "score": 0, "creation_date": 1472675509, "post_id": 39257299, "comment_id": 65853024, "body": "I see what you&#39;re saying now.  You can only use sets of variables for the SOS constraints (not sums or constraints), so you&#39;d need to create some new variables to represent/model the sums.  It may be possible to use indicator constraints (<code>IloIfThen</code>&#39;s in concert), like <code>i0 = 1 -&gt; x_0_0 + x_0_1 + x_0_2 + x_0_3 = 1</code>,  <code>i0 = 0 -&gt; x_0_0 + x_0_1 + x_0_2 + x_0_3 = 0</code>  for each &quot;sum&quot;.  Then using the indicator variables in the corresponding SOS2 constraint would look like: <code>S2 :: i0:1 i1:2 i2:3 i3:4</code>.  Does that sound right?"}, {"owner": {"reputation": 145, "user_id": 2703893, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a5a7b5b400713b0340f2b54ff77a6d7a?s=128&d=identicon&r=PG&f=1", "display_name": "M.frank", "link": "https://stackoverflow.com/users/2703893/m-frank"}, "edited": false, "score": 0, "creation_date": 1472676331, "post_id": 39257299, "comment_id": 65853414, "body": "Yes that may be it. I will have a look tomorrow as it is getting really late here and let you know. Really, you have been a great help so far! Thanks"}, {"owner": {"reputation": 10888, "user_id": 5625534, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/d4mCF.jpg?s=128&g=1", "display_name": "Erwin Kalvelagen", "link": "https://stackoverflow.com/users/5625534/erwin-kalvelagen"}, "edited": false, "score": 0, "creation_date": 1472695646, "post_id": 39257299, "comment_id": 65859121, "body": "@rkersh I don&#39;t see the need for indicators in this case (actually I believe they would destroy the interpolation scheme). The description in Williams is actually quite good."}], "tags": [], "owner": {"reputation": 4187, "user_id": 1718477, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iisrz.jpg?s=128&g=1", "display_name": "rkersh", "link": "https://stackoverflow.com/users/1718477/rkersh"}, "is_accepted": false, "score": 1, "last_activity_date": 1472670654, "creation_date": 1472670654, "answer_id": 39257299, "question_id": 39252319, "link": "https://stackoverflow.com/questions/39252319/cplex-c-sum-ilonumvararray-and-create-sos2/39257299#39257299", "title": "Cplex C++, Sum IloNumVarArray and create SOS2", "body": "<p>I think you'll need an SOS2 constraint for every row and column of <code>lamda</code>, like so:</p>\n\n<pre><code>  for (int s = 0; s &lt; S; s++) {\n     model.add(IloSOS2(env, lamda[s]));\n  }\n\n  IloNumVarArray B[K];\n  for (int k = 0; k &lt; K; k++) {\n     B[k] = IloNumVarArray(env, S);\n     for (int s = 0; s &lt; S; s++) {\n        B[k][s] = lamda[s][k];\n     }\n     model.add(IloSOS2(env, B[k]));\n  }\n</code></pre>\n\n<p>That would produce, for example with a 4x4 matrix, the following SOS2 constraints in LP format:</p>\n\n<pre><code>SOS\n s1: S2 ::  x_0_0 : 1  x_0_1 : 2  x_0_2 : 3  x_0_3 : 4\n s2: S2 ::  x_1_0 : 1  x_1_1 : 2  x_1_2 : 3  x_1_3 : 4\n s3: S2 ::  x_2_0 : 1  x_2_1 : 2  x_2_2 : 3  x_2_3 : 4\n s4: S2 ::  x_3_0 : 1  x_3_1 : 2  x_3_2 : 3  x_3_3 : 4\n s5: S2 ::  x_0_0 : 1  x_1_0 : 2  x_2_0 : 3  x_3_0 : 4\n s6: S2 ::  x_0_1 : 1  x_1_1 : 2  x_2_1 : 3  x_3_1 : 4\n s7: S2 ::  x_0_2 : 1  x_1_2 : 2  x_2_2 : 3  x_3_2 : 4\n s8: S2 ::  x_0_3 : 1  x_1_3 : 2  x_2_3 : 3  x_3_3 : 4\n</code></pre>\n\n<p>So, if \"x_0_0\" is nonzero, then at most, \"x_0_1\", \"x_1_0\" and \"x_1_1\" would also be nonzero.  You can see that the weights are auto-generated.</p>\n"}, {"tags": [], "owner": {"reputation": 145, "user_id": 2703893, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a5a7b5b400713b0340f2b54ff77a6d7a?s=128&d=identicon&r=PG&f=1", "display_name": "M.frank", "link": "https://stackoverflow.com/users/2703893/m-frank"}, "is_accepted": true, "score": 1, "last_activity_date": 1472719220, "creation_date": 1472719220, "answer_id": 39266663, "question_id": 39252319, "link": "https://stackoverflow.com/questions/39252319/cplex-c-sum-ilonumvararray-and-create-sos2/39266663#39266663", "title": "Cplex C++, Sum IloNumVarArray and create SOS2", "body": "<p>I figured out a solution, thanks to @rkersh, who got me thinking in the right direction. For the interested reader, here is how I solved it:</p>\n\n<pre><code>    IloNumVarArray B(env, S);\n    IloNumArray Bval(env, S);\n    for (int s = 0; s &lt; S; s++)\n    {\n        B[s] = IloNumVar(env, 0, 1);\n        Bval[s] = s;\n        IloExpr l(env);\n        for (int k = 0; k &lt; K; k++)\n        {\n            l += lamda[s][k];\n        }\n        model.add(B[s] == l);\n    }\n    model.add(IloSOS2(env, B, Bval));\n\n    IloNumVarArray C(env, K);\n    IloNumArray Cval(env, K);                   \n    for (int k = 0; k &lt; K; k++)\n    {\n        Cval[k] = k;\n        C[k] = IloNumVar(env, 0, 1);\n        IloExpr l(env);\n        for (int s = 0; s &lt; S; s++)\n        {\n            l += lamda[s][k];\n        }\n        model.add(C[k] == l);       \n    }\n    model.add(IloSOS2(env, C, Cval));\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 2703893, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a5a7b5b400713b0340f2b54ff77a6d7a?s=128&d=identicon&r=PG&f=1", "display_name": "M.frank", "link": "https://stackoverflow.com/users/2703893/m-frank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 740, "favorite_count": 0, "accepted_answer_id": 39266663, "answer_count": 2, "score": 1, "last_activity_date": 1472719220, "creation_date": 1472653567, "last_edit_date": 1472663274, "question_id": 39252319, "link": "https://stackoverflow.com/questions/39252319/cplex-c-sum-ilonumvararray-and-create-sos2", "title": "Cplex C++, Sum IloNumVarArray and create SOS2", "body": "<p>I am trying to implement the example 9.8 on page 179 of this book: <a href=\"https://books.google.dk/books?id=YJRh0tOes7UC&amp;pg=PA153&amp;lpg=PA153&amp;dq=non-linear+functions+of+two+or+more+variables+H.+Paul+Williams&amp;source=bl&amp;ots=wqZ6L61yq_&amp;sig=fFYA93B9pqKaI6QQDoAFOclZQ98&amp;hl=da&amp;sa=X&amp;ved=0ahUKEwj8nJOkoOnOAhVKJJoKHRmYBLYQ6AEIGjAA#v=onepage&amp;q=non-linear%20functions%20of%20two%20or%20more%20variables%20H.%20Paul%20Williams&amp;f=false\" rel=\"nofollow\">link</a></p>\n\n<p>I am using Cplex with the C++ interface.</p>\n\n<p>I have troubles with initializing the SOS2 correctly. Here is the piece of my code for initializing the SOS2:</p>\n\n<pre><code>    IloNumArray Cval(env, S);\n    IloNumVarArray C(env,S);\n    for (int s = 0; s &lt; S; s++)\n    {\n        for (int k = 0; k &lt; K; k++)\n        {\n            C[s] = IloNumVar(env, 0, 1);                \n            C[s] += lamda[s][k];\n        }\n        Cval[s] = s;\n    }\n    model.add(IloSOS2(env, C, Cvals));\n\n    IloNumArray Bval(env, K);\n    IloNumVarArray B(env,K);                    \n    for (int k = 0; k &lt; K; k++)\n    {\n        for (int s = 0; s &lt; S; s++)\n        {\n            B[s] = IloNumVar(env, 0, 1);\n            B[k] += lamda[s][k];\n        }\n            Bval[k] = k; \n    }\n    model.add(IloSOS2(env, B, Bval));enter code here\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>SOS2Test.cpp: In function \u2018int main()\u2019:\nSOS2Test.cpp:74:16: error: no match for \u2018operator+=\u2019 (operand types \nare \u2018IloNumVar\u2019 and \u2018IloNumVar\u2019)\nsosvars[s] += lamda[s][k];\n            ^\nSOS2Test.cpp:87:16: error: no match for \u2018operator+=\u2019 (operand types \nare \u2018IloNumVar\u2019 and \u2018IloNumVar\u2019)\nsosvark[k] += lamda[s][k];\n            ^\n</code></pre>\n\n<p>which of course if very clear. The operator '+=' is not implemented for that type. However, I cannot think of any other way of doing it and I am pretty sure that is indeed what I want to do.</p>\n\n<p>Can anybody help me out or point me in the right direction?</p>\n\n<p>Thanks in advance!</p>\n\n<p>EDIT:</p>\n\n<p>Here is what I am trying to do:</p>\n\n<p>I am trying to approximate a non-linear function of two variables z = f(x,y). I have defined a grid of values (x,y) and associated non-negative weight to each point (i.e. the lamda[s][k]). Then if the values of (x,y) at the grid points are denoted (X[s], Y[s]), then the function can be approximated by the following relations:</p>\n\n<pre><code>x = Sum_s Sum_k X[s] * lamda[s][k] \ny = Sum_s Sum_k Y[k] * lamda[s][k] \nz = Sum_s Sum_k Z[s][k] * lamda[s][k]\n1 = Sum_s Sum_k Z[s][k] lamda[s][k]\n</code></pre>\n\n<p>where</p>\n\n<pre><code>s = rows\nk = columns\n</code></pre>\n\n<p>Then in order to use points that are closely related, we need to impose that at most four neighbouring lamda[s][k] can be non-zero. That can be imposed by the following constraints:</p>\n\n<pre><code>C[s] = sum_k lamda[s][k] for all s\nB[k] = sum_k lamda[s][k] for all k\n</code></pre>\n\n<p>where C {C_1, C_2, .. C_s} and B {B_1, B_2, .. B_k} are taken as SOS2. Which imposes that at most two neighboring rows and two neighboring columns can be non-zero.</p>\n\n<p>The code I have provided is for the last two constraints and what I am trying to do is for instance setting the C[s] (the s'th instance of C) equal to the sum of the lamda over s and k (row and column). Or in other words, for each row of the grid, the sum of the variables in row 1, should go into C[1], the sum of the variables in row 2 should go into C[2] etc. And for each column, the sum of the variables in column 1, should go into B[1] etc.</p>\n\n<p>So in CPLEX term. I want to sum up a set of IloNumVars and set that equal to a position in a IloNumVarArray and then use that IloNumVarArray as a SOS2</p>\n\n<p>I hope this clarifies it a bit.</p>\n"}, {"tags": ["c++", "type-conversion", "unsigned"], "comments": [{"owner": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "edited": false, "score": 0, "creation_date": 1472653903, "post_id": 39252306, "comment_id": 65840501, "body": "I am &quot;almost&quot; sure C++ inherits this type conversion from C - consider to add C tag and search C area.. E.g. read this <a href=\"http://stackoverflow.com/questions/50605/signed-to-unsigned-conversion-in-c-is-it-always-safe\" title=\"signed to unsigned conversion in c is it always safe\">stackoverflow.com/questions/50605/&hellip;</a>."}, {"owner": {"reputation": 925, "user_id": 6478256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BNq9q.jpg?s=128&g=1", "display_name": "ilotXXI", "link": "https://stackoverflow.com/users/6478256/ilotxxi"}, "edited": false, "score": 0, "creation_date": 1472653985, "post_id": 39252306, "comment_id": 65840572, "body": "It is just a binary magic. The same binary representation is interpreted as a signed or unsigned value differently."}, {"owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "edited": false, "score": 0, "creation_date": 1472654042, "post_id": 39252306, "comment_id": 65840620, "body": "see also here <a href=\"http://stackoverflow.com/questions/7221409/is-unsigned-integer-subtraction-defined-behavior\" title=\"is unsigned integer subtraction defined behavior\">stackoverflow.com/questions/7221409/&hellip;</a>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1472654279, "post_id": 39252306, "comment_id": 65840812, "body": "@JonnyHenly with &quot;always OK&quot; I meant that I wasnt sure if I just hit a lucky example, because actually I didnt expect this to work. The second example is because the only way I could explain the behaviour is that the rhs is somehow promoted to signed (ie. the type on the lhs) before the assignment"}], "answers": [{"tags": [], "owner": {"reputation": 4581, "user_id": 2791577, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rFnoU.png?s=128&g=1", "display_name": "keith", "link": "https://stackoverflow.com/users/2791577/keith"}, "is_accepted": false, "score": 0, "last_activity_date": 1472653962, "creation_date": 1472653962, "answer_id": 39252459, "question_id": 39252306, "link": "https://stackoverflow.com/questions/39252306/assign-negative-of-unsigned-to-a-signed-is-it-ok/39252459#39252459", "title": "Assign negative of unsigned to a signed, is it OK?", "body": "<p>It is OK just as long as your target architecture is using two's compliment arithmetic and is treating <code>int</code> as 32 bits. Otherwise you'll get different results for your first program.</p>\n"}, {"comments": [{"owner": {"reputation": 2725, "user_id": 2296177, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/854fa6632f9806fae99a1b49b4e07e08?s=128&d=identicon&r=PG", "display_name": "user2296177", "link": "https://stackoverflow.com/users/2296177/user2296177"}, "reply_to_user": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1472655459, "post_id": 39252481, "comment_id": 65841708, "body": "@cmaster If you assign a value that is larger than what can be represented by the <code>int</code>, you trigger UB. Even if the original operation on the <code>unsigned</code> is well defined."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1472655919, "post_id": 39252481, "comment_id": 65842033, "body": "@cmaster I have not seen that.  C++14 still has [expr]/4 <i>If during the evaluation of an expression, the result is not mathematically defined or not in the range of representable values for its type, the behavior is undefined.</i>"}, {"owner": {"reputation": 2725, "user_id": 2296177, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/854fa6632f9806fae99a1b49b4e07e08?s=128&d=identicon&r=PG", "display_name": "user2296177", "link": "https://stackoverflow.com/users/2296177/user2296177"}, "reply_to_user": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1472656134, "post_id": 39252481, "comment_id": 65842183, "body": "@cmaster I&#39;ve added a quote from a recent C++ standard that contradicts what you say. Remember that this question is C++, and you might be correct in C."}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1472656497, "post_id": 39252481, "comment_id": 65842441, "body": "Ok, probably you are right for C++. Deleted my stuff."}], "tags": [], "owner": {"reputation": 2725, "user_id": 2296177, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/854fa6632f9806fae99a1b49b4e07e08?s=128&d=identicon&r=PG", "display_name": "user2296177", "link": "https://stackoverflow.com/users/2296177/user2296177"}, "is_accepted": true, "score": 4, "last_activity_date": 1472656042, "last_edit_date": 1495542769, "creation_date": 1472654020, "answer_id": 39252481, "question_id": 39252306, "link": "https://stackoverflow.com/questions/39252306/assign-negative-of-unsigned-to-a-signed-is-it-ok/39252481#39252481", "title": "Assign negative of unsigned to a signed, is it OK?", "body": "<p><strong>No</strong>. You have <em>undefined behaviour</em> possibilities.</p>\n\n<p>Here is a counter-example that produces UB when assigning a negated <code>unsigned int</code> to an <code>int</code>:</p>\n\n<pre><code>unsigned u = (unsigned)std::numeric_limits&lt;int&gt;::max() - 1;\nstd::cout &lt;&lt; \"max int\" &lt;&lt; std::numeric_limits&lt;int&gt;::max() &lt;&lt; '\\n';\nstd::cout &lt;&lt; \"as unsigned - 1\" &lt;&lt; u &lt;&lt; '\\n';\nstd::cout &lt;&lt; \"negated:\" &lt;&lt; -u &lt;&lt; '\\n';\nstd::cout &lt;&lt; std::boolalpha &lt;&lt; ( std::numeric_limits&lt;int&gt;::max() &lt; -u ) &lt;&lt; '\\n';\nint s = -u;\nstd::cout &lt;&lt; s &lt;&lt; '\\n';\n</code></pre>\n\n<p>On my machine:\n<code>int</code>'s max value is 2'147'483'647, but the negated <code>unsigned int</code> has a value of 2'147'483'650; that value is greater than the max value that can be represented by an <code>int</code>. Know that signed overflow is undefined behaviour. Thus, the algorithm is not safe for all of its possible values.</p>\n\n<p>The Standard's (2016-07-12: N4604) word:</p>\n\n<blockquote>\n  <p>If during the evaluation of an expression, the result is not\n  mathematically de\ufb01ned or not in the range of representable values for\n  its type, the behavior is unde\ufb01ned. [ Note: Treatment of division by\n  zero, forming a remainder using a zero divisor, and all \ufb02oating point\n  exceptions vary among machines, and is sometimes adjustable by a\n  library function. \u2014 end note ]</p>\n</blockquote>\n\n<hr>\n\n<p>In the future, you can use the <code>{}</code>-style initialization to prevent such issues:</p>\n\n<pre><code>unsigned a = 5;\nstd::cout &lt;&lt; -a &lt;&lt; '\\n';\nint b{ -a }; // compiler detects narrowing conversions, warning/error\nstd::cout &lt;&lt; b &lt;&lt; '\\n';\nreturn 0;\n</code></pre>\n\n<p>Note that even though you know that <code>-a</code> will be a value that can be represented by an <code>int</code>, your compiler still warns you.</p>\n\n<p>On signed overflow:</p>\n\n<p><a href=\"https://stackoverflow.com/q/16188263/2296177\">Is signed integer overflow still undefined behavior in C++?</a></p>\n\n<p>On well defined unsigned overflow in both C and C++: </p>\n\n<p><a href=\"https://stackoverflow.com/q/18195715/2296177\">Why is unsigned integer overflow defined behavior but signed integer overflow isn&#39;t?</a></p>\n\n<p>On implicit conversions: </p>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/language/implicit_conversion\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/language/implicit_conversion</a></p>\n"}], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 218, "favorite_count": 0, "accepted_answer_id": 39252481, "answer_count": 2, "score": 4, "last_activity_date": 1472656042, "creation_date": 1472653520, "last_edit_date": 1495540850, "question_id": 39252306, "link": "https://stackoverflow.com/questions/39252306/assign-negative-of-unsigned-to-a-signed-is-it-ok", "title": "Assign negative of unsigned to a signed, is it OK?", "body": "<p>When I run this:</p>\n\n<pre><code>int main() {\n    unsigned a = 5;\n    std::cout &lt;&lt; -a &lt;&lt; std::endl;\n    int b = -a; \n    std::cout &lt;&lt; b &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>I get this:</p>\n\n<pre><code>4294967291\n-5\n</code></pre>\n\n<p><strong>It seems like it works, and I can take the negative of an <code>unsigned</code> and assign it to an <code>int</code>, but is this really always OK? Why?</strong></p>\n\n<p>When I try something that to me looks like a similar situation:</p>\n\n<pre><code>int c = 1;\nint d = 3;\ndouble x = c/d;\nstd::cout &lt;&lt; x &lt;&lt; std::endl;\n</code></pre>\n\n<p>I get <code>0</code> (as expected).</p>\n\n<p>PS: Maybe there is a dupe and I didnt find it, closest I could find is <a href=\"https://stackoverflow.com/questions/37253097/what-happens-with-the-negative-of-an-unsigned-integer\">this</a></p>\n"}, {"tags": ["c++", "file", "output"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1472653557, "post_id": 39252273, "comment_id": 65840234, "body": "Welcome to Stack Overflow! It sounds like you may need to learn how to use a debugger to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming.  Further reading: <b><a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a></b>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1472653580, "post_id": 39252273, "comment_id": 65840254, "body": "Also see: <a href=\"http://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\" title=\"why is iostreameof inside a loop condition considered wrong\">stackoverflow.com/questions/5605125/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 6779158, "user_type": "registered", "profile_image": "https://graph.facebook.com/1138971049483241/picture?type=large", "display_name": "Andrea D.", "link": "https://stackoverflow.com/users/6779158/andrea-d"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1472654210, "post_id": 39252273, "comment_id": 65840757, "body": "Hello Nathan, I also forgot to say I have some strange warning messages, like &quot;[Warning] Unknown escape sequence: &#39;\\D&#39; &quot; and \\S. This works for every void, i presume it&#39;s about the file name, but is it a problem?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1472654554, "post_id": 39252273, "comment_id": 65841034, "body": "That is because in string literals like <code>&quot;C:\\Documenti\\studenti.txt&quot;</code> the <code>\\ </code> is a special character and need to be escaped with another <code>\\ </code> like <code>&quot;C:\\\\Documenti\\\\studenti.txt&quot;</code>"}, {"owner": {"reputation": 1, "user_id": 6779158, "user_type": "registered", "profile_image": "https://graph.facebook.com/1138971049483241/picture?type=large", "display_name": "Andrea D.", "link": "https://stackoverflow.com/users/6779158/andrea-d"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1472654961, "post_id": 39252273, "comment_id": 65841348, "body": "I tried to use \\\\ but it seems it doesn&#39;t create the file at this point. Before It used to create it."}], "answers": [{"tags": [], "owner": {"reputation": 86, "user_id": 5105769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0672a09d65c2466523110727c26b52d?s=128&d=identicon&r=PG&f=1", "display_name": "rishabh", "link": "https://stackoverflow.com/users/5105769/rishabh"}, "is_accepted": false, "score": 0, "last_activity_date": 1472655403, "last_edit_date": 1472655403, "creation_date": 1472654652, "answer_id": 39252712, "question_id": 39252273, "link": "https://stackoverflow.com/questions/39252273/c-file-managing-output-one-word-per-line/39252712#39252712", "title": "C++- File managing - Output one word per line", "body": "<p>According to my interpretation your file is storing information in this format:_</p>\n\n<p>nome1 classe1</p>\n\n<p>nome2 classe2</p>\n\n<p>...</p>\n\n<p>...</p>\n\n<p>...</p>\n\n<p>since file reads data from the stream , it will extract the next string available in the stream.\nIn your code the classe is not read from the file and text corresponding to classe is entered into nome which explains absurd output.Moreover while updating nome you should do that outside the if part because file must be read in any case irrespective of the fact whether the classe matches cla or not.\nHave a look at this code:-</p>\n\n<pre><code>void cl(){ \ncout&lt;&lt;\"--------------------------\"&lt;&lt;endl;\nstring cla;\nfin.open(\"C:\\Documenti\\Studenti.txt\",ios::in);\nif(!fin)\n   cout&lt;&lt;\"File inesistente, impossibile procedere. \"&lt;&lt;endl;\nelse{\n    cout&lt;&lt;\"Inseire classe per sapere i nomi degli studenti: \"&lt;&lt;endl;\n    cin&gt;&gt;cla;\n    cout&lt;&lt;\"**********************************\"&lt;&lt;endl;\n    while(!fin.eof()){\n       fin&gt;&gt;nome&gt;&gt;classe;//change here\n       if(cla==classe){\n          cout&lt;&lt;nome&lt;&lt;endl;\n       }\n    }------------------\"&lt;&lt;endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6779158, "user_type": "registered", "profile_image": "https://graph.facebook.com/1138971049483241/picture?type=large", "display_name": "Andrea D.", "link": "https://stackoverflow.com/users/6779158/andrea-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1472655403, "creation_date": 1472653463, "last_edit_date": 1472654245, "question_id": 39252273, "link": "https://stackoverflow.com/questions/39252273/c-file-managing-output-one-word-per-line", "title": "C++- File managing - Output one word per line", "body": "<p>i'm new to the forum so forgive me if i've done something wrong. I'm a bit in a hurry and I couldn't even traslate what I've written in this code. I create the file and it works, I add new records and it works, I also print all the file and it works. So, the problem is void cl(). I give a classroom as an input and it should give me the students in that classroom as an output, the problem is that this doesnt work, actually sometimes it prints a student and the same classroom for many times. What should I do? Keep in mind that I haven't done much about files, so if there's a simple way to solve this I would like it more, but well I accept all the possible help. Thanks!\nEDIT: I also forgot to say I have some strange warning messages, like \"[Warning] Unknown escape sequence: '\\D' \" and \\S. This works for every void, i presume it's about the file name, but is it a problem?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;cstdlib&gt;\n#include&lt;fstream&gt;\nusing namespace std;\nstring nome, classe;\nofstream fout;\nifstream fin;\n\nvoid crea(){ /*this is the file creation*/\n    cout&lt;&lt;\"-----------------------\"&lt;&lt;endl;\n    char risp;\n    fout.open(\"C:\\Documenti\\studenti.txt\",ios::out);\n    do{\n       cout&lt;&lt;\"Inserisci nome: \"&lt;&lt;endl;\n       cin&gt;&gt;nome;\n       cout&lt;&lt;\"Inserisci classe: \"&lt;&lt;endl;\n       cin&gt;&gt;classe;\n       fout&lt;&lt;nome&lt;&lt;\" \"&lt;&lt;classe&lt;&lt;endl;\n       cout&lt;&lt;\"un altro record (s/n): \"&lt;&lt;endl;\n       cin&gt;&gt;risp;\n   }while(risp=='s');\n   fout.close();\n   cout&lt;&lt;\"--------------------------------\"&lt;&lt;endl;\n}\n\nvoid aggiungi(){ /*this adds new records to the file*/\n    cout&lt;&lt;\"----------------------\"&lt;&lt;endl;\n    char risp;\n    fout.open(\"C:\\Documenti\\studenti.txt\", ios::out | ios::app);\n    do{\n        cout&lt;&lt;\"Inserisci nome: \"&lt;&lt;endl;\n        cin&gt;&gt;nome;\n        cout&lt;&lt;\"Inserisci classe: \"&lt;&lt;endl;\n        cin&gt;&gt;classe;\n        fout&lt;&lt;nome&lt;&lt;\" \"&lt;&lt;classe&lt;&lt;endl;\n        cout&lt;&lt;\"Un altro record (s/n)?\"&lt;&lt;endl;\n        cin&gt;&gt;risp;\n   }while(risp=='s');\n   fout.close();\n   cout&lt;&lt;\"-------------------------\"&lt;&lt;endl;\n }\n\n\n void visualizza(){ /*this prints all the file on the video*/\n    cout&lt;&lt;\"--------------------------\"&lt;&lt;endl;\n    fin.open(\"C:\\Documenti\\studenti.txt\",ios::in);\n    if(!fin)\n        cout&lt;&lt;\"File inesistente, impossibile procedere. \"&lt;&lt;endl;\n    else{\n        fin&gt;&gt;nome&gt;&gt;classe;\n         while(!fin.eof()){\n              cout&lt;&lt;nome&lt;&lt;\" \"&lt;&lt;classe&lt;&lt;endl;\n              fin&gt;&gt;nome&gt;&gt;classe;\n         }\n         cout&lt;&lt;\"----------------------------\"&lt;&lt;endl;\n         fin.close();\n   } \n}\n\n\n void cl(){ /*this SHOULD work like i say in the description*/\n    cout&lt;&lt;\"--------------------------\"&lt;&lt;endl;\n    string cla;\n    fin.open(\"C:\\Documenti\\Studenti.txt\",ios::in);\n    if(!fin)\n       cout&lt;&lt;\"File inesistente, impossibile procedere. \"&lt;&lt;endl;\n    else{\n        cout&lt;&lt;\"Inseire classe per sapere i nomi degli studenti: \"&lt;&lt;endl;\n        cin&gt;&gt;cla;\n        cout&lt;&lt;\"**********************************\"&lt;&lt;endl;\n        fin&gt;&gt;nome;\n        while(!fin.eof()){\n           if(cla==classe){\n              cout&lt;&lt;nome&lt;&lt;endl;\n              fin&gt;&gt;nome;\n           }\n        }------------------\"&lt;&lt;endl;\n  }\n}\n\nint esci(){ /*this is the exit status*/\n    char risp;\n    cout&lt;&lt;\"Hai selezionato l'opzione 'esci', sei sicuro? s/n \"&lt;&lt;endl;\n    cin&gt;&gt;risp;\n}\n\nint main(){ /*main with menu*/\n    int n;\n do{\n    cout&lt;&lt;\"Scegliere cosa fare: \"&lt;&lt;endl;\n    cout&lt;&lt;\"1) Creare il file con classi e nomi degli studenti. \"&lt;&lt;endl;\n    cout&lt;&lt;\"2) Aggiungere ulteriori studenti.\"&lt;&lt;endl;\n    cout&lt;&lt;\"3) Visualizzare classe e nome di ogni studente. \"&lt;&lt;endl;\n    cout&lt;&lt;\"4) Visualizzare tutti gli studenti di una data classe. \"&lt;&lt;endl;\n    cout&lt;&lt;\"5) Esci. \"&lt;&lt;endl;\n    cin&gt;&gt;n;\n    switch(n){\n       case 1:\n          crea();\n          break;\n       case 2:\n          aggiungi();\n          break;\n       case 3:\n          visualizza();\n          break;\n       case 4:\n          cl();\n          break;\n       case 5:\n          esci();\n          break;\n       default:\n          system(\"pause\");\n          return 0;     \n   }\n }while(n!=5);\n\n}\n</code></pre>\n"}, {"tags": ["c++", "opengl", "glsl", "opengl-4"], "comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1472654586, "post_id": 39252215, "comment_id": 65841063, "body": "Define &quot;nothing happens.&quot; Show the code where you detect whether something has or has not happened."}, {"owner": {"reputation": 441, "user_id": 5538913, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/zCTFD.jpg?s=128&g=1", "display_name": "Corbie", "link": "https://stackoverflow.com/users/5538913/corbie"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1472655288, "post_id": 39252215, "comment_id": 65841574, "body": "It&#39;s obvious as I&#39;m using the array for transformations. I&#39;ve added my debug output code."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1472655871, "post_id": 39252215, "comment_id": 65841995, "body": "Please post an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "answers": [{"tags": [], "owner": {"reputation": 441, "user_id": 5538913, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/zCTFD.jpg?s=128&g=1", "display_name": "Corbie", "link": "https://stackoverflow.com/users/5538913/corbie"}, "is_accepted": true, "score": 2, "last_activity_date": 1472656792, "creation_date": 1472656792, "answer_id": 39253417, "question_id": 39252215, "link": "https://stackoverflow.com/questions/39252215/modifying-a-shader-storage-buffer-object-from-within-a-vertex-shader/39253417#39253417", "title": "Modifying a Shader Storage Buffer Object from within a Vertex Shader", "body": "<p>Okay, I have found the problem using the red book. I have not bound the buffer correctly and binding the buffer base has to happen <em>after</em> buffering the data:</p>\n\n<pre><code>float* buffer = (float*) glMapBuffer(GL_ARRAY_BUFFER, GL_READ_ONLY);\nglBindBuffer(GL_SHADER_STORAGE_BUFFER, &amp;ssbo); // bind buffer\n\n// switched these two:\nglBufferData(GL_SHADER_STORAGE_BUFFER, sizeof(GLfloat)*size,buffer, GL_DYNAMIC_DRAW);\nglBindBufferBase(GL_SHADER_STORAGE_BUFFER, 3, &amp;ssbo);\n\nglBindBuffer(GL_SHADER_STORAGE_BUFFER, 0); // unbind buffer\nglUnmapBuffer(GL_ARRAY_BUFFER);\n</code></pre>\n"}], "owner": {"reputation": 441, "user_id": 5538913, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/zCTFD.jpg?s=128&g=1", "display_name": "Corbie", "link": "https://stackoverflow.com/users/5538913/corbie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1181, "favorite_count": 0, "accepted_answer_id": 39253417, "answer_count": 1, "score": 1, "last_activity_date": 1472656792, "creation_date": 1472653312, "last_edit_date": 1472655173, "question_id": 39252215, "link": "https://stackoverflow.com/questions/39252215/modifying-a-shader-storage-buffer-object-from-within-a-vertex-shader", "title": "Modifying a Shader Storage Buffer Object from within a Vertex Shader", "body": "<p>In my base program (C++/OpenGL 4.5) I have copied the content of the <em>Vertex Buffer</em> to an <em>Shader Storage Buffer</em> (SSBO):</p>\n\n<pre><code>float* buffer = (float*) glMapBuffer(GL_ARRAY_BUFFER, GL_READ_ONLY);\nglBindBufferBase(GL_SHADER_STORAGE_BUFFER, 3, ssbo[2]);\n\nglBufferData(GL_SHADER_STORAGE_BUFFER, sizeof(GLfloat)*size,buffer, GL_DYNAMIC_DRAW);\n\nglBindBufferBase(GL_SHADER_STORAGE_BUFFER, 3, 0);\nglUnmapBuffer(GL_ARRAY_BUFFER);\n</code></pre>\n\n<p>In the <em>Vertex Shader</em> this data is bound to an array:</p>\n\n<pre><code>#version 430\n#extension GL_ARB_shader_storage_buffer_object : require\n\nlayout(shared, binding = 3) buffer storage\n{\n    float array[];\n}\n</code></pre>\n\n<p>But when I'm trying to overwrite an array entry in the <code>main</code> function like this:</p>\n\n<pre><code>array[index_in_bounds] = 4.2;\n</code></pre>\n\n<p>nothing happens.</p>\n\n<p>What am I doing wrong? Can I change the buffer from within the Vertex Shader? Is this only possible in a Geometry Shader? Do I have to do this with Transform Feedback (that I have never used before)?</p>\n\n<p><strong>edit:</strong>\nI'm mapping the buffers for test purposes in my main program, just to see if the data changes:</p>\n\n<pre><code>float* buffer = (float*) glMapBuffer(GL_ARRAY_BUFFER, GL_READ_ONLY);\nfloat* ssbo = (float*) glMapNamedBuffer(3, GL_READ_ONLY);\n\nfor(int i = 0; i &lt; SIZE_OF_BUFFERS; i++)\n    printf(\"% 5f | % 5f\\n\", ssbo[i], buffer[i]);\n\nglUnmapNamedBuffer(3);\nglUnmapBuffer(GL_ARRAY_BUFFER);\n</code></pre>\n"}, {"tags": ["c++", "pointers", "dictionary", "iterator", "operators"], "comments": [{"owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "edited": false, "score": 1, "creation_date": 1472653389, "post_id": 39252189, "comment_id": 65840110, "body": "this also seems to be incomplete so hard to give you any pointer in what direction to go"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1472653463, "post_id": 39252189, "comment_id": 65840165, "body": "What does it do? Is it supposed to iterate through every element of every list in the map?"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 2, "creation_date": 1472654069, "post_id": 39252189, "comment_id": 65840647, "body": "Your explanation doesn&#39;t make sense to me. Your example pairs look like they are of type <code>&lt;int, string&gt;</code> but your map pairs are of type <code>&lt;int, list&lt;string&gt;&gt;</code>."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1472656043, "post_id": 39252189, "comment_id": 65842116, "body": "And the example shows the iterator pointing to either <code>{2, anything}</code> or <code>{6, an}</code> yet <code>operator*</code> returns an <code>int</code>. This question seems to have a poor definition of <code>Iterator::value_type</code>. An iterator range represents a range of typed values, each value has the same type, and this is the return type of <code>operator*()</code> (modulo const and/or reference qualifications)"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6779137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83f7fad1ca140e676b66fbbed4d3a02f?s=128&d=identicon&r=PG&f=1", "display_name": "Francisco Ruiz ", "link": "https://stackoverflow.com/users/6779137/francisco-ruiz"}, "edited": false, "score": 1, "creation_date": 1472655304, "post_id": 39252361, "comment_id": 65841592, "body": "i just want to jump the positions in the map which key value are odds"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 3, "user_id": 6779137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83f7fad1ca140e676b66fbbed4d3a02f?s=128&d=identicon&r=PG&f=1", "display_name": "Francisco Ruiz ", "link": "https://stackoverflow.com/users/6779137/francisco-ruiz"}, "edited": false, "score": 1, "creation_date": 1472655809, "post_id": 39252361, "comment_id": 65841952, "body": "@FranciscoRuiz: That means your <code>operator++</code> has to repeatedly call <code>operator++</code> on the underlying <code>std::map&lt;&gt;::iterator</code> until the key is odd. However, this is subject to one slight challenge: what exactly is the <code>end</code> iterator for your sequence? In particular, if you have an iterator to the last odd key, you must be able to increment that and return <code>Dictionary::end</code>. But how does your iterator know that it points to the last odd value? The simplest solution might be to include <code>std::map&lt;&gt;::end</code> in your iterator, so your <code>operator++</code> knows where to stop."}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 2, "last_activity_date": 1472653704, "creation_date": 1472653704, "answer_id": 39252361, "question_id": 39252189, "link": "https://stackoverflow.com/questions/39252189/how-to-implement-a-mapint-liststring-iterator-c/39252361#39252361", "title": "How to implement a map&lt;int, list&lt;string&gt; &gt; iterator C++?", "body": "<p>Your iterator class shouldn't contain a pointer, it should contain a <code>map&lt;int,list&lt;string&gt; &gt;::iterator</code>. Your <code>operator*</code> is trivial - just forward -  but since you apparently want to hide some keys, your <code>Dictionary::iterator::operator++</code> can't simply forward to <code>map&lt;int,list&lt;string&gt; &gt;::iterator</code>. I don't exactly understand what you want to do with the keys, so I'll leave those details to you.</p>\n"}, {"tags": [], "owner": {"reputation": 3, "user_id": 6779137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83f7fad1ca140e676b66fbbed4d3a02f?s=128&d=identicon&r=PG&f=1", "display_name": "Francisco Ruiz ", "link": "https://stackoverflow.com/users/6779137/francisco-ruiz"}, "is_accepted": false, "score": 0, "last_activity_date": 1473265322, "creation_date": 1473265322, "answer_id": 39375018, "question_id": 39252189, "link": "https://stackoverflow.com/questions/39252189/how-to-implement-a-mapint-liststring-iterator-c/39375018#39375018", "title": "How to implement a map&lt;int, list&lt;string&gt; &gt; iterator C++?", "body": "<p>After trying to solve the problem i wrote the code and i asked to my professor if it was right, he told me it was Ok, so here is the code of what i was trying to do:</p>\n\n<pre><code>class Dictionary{\nprivate:\n  map&lt;int,list&lt;string&gt; &gt; datos;\npublic:\n  class iterator{\n     private:\n        map&lt;int,list&lt;string&gt; &gt;::iterator p;\n     public:\n        int &amp; operator *()const{\n            return *p;\n        };\n        iterator &amp; operator++(){\n            while(*p-&gt;first %2 != 0 || p != datos.end()){\n            p++;\n          }\n          return p;\n        };\n        iterator begin(){\n            p= datos.begin();\n          while(*p-&gt;first %2 != 0){\n                p++;\n            }\n            return p;\n        };\n        iterator end(){\n          p= datos.end();\n          return p;\n        };\n  };\n}\n</code></pre>\n\n<p>thanks, the answer u gave me helped me to make something more or less well.\nIf u see any mistake or something i could have done better tell me ty.</p>\n"}], "owner": {"reputation": 3, "user_id": 6779137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83f7fad1ca140e676b66fbbed4d3a02f?s=128&d=identicon&r=PG&f=1", "display_name": "Francisco Ruiz ", "link": "https://stackoverflow.com/users/6779137/francisco-ruiz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1473265322, "creation_date": 1472653215, "last_edit_date": 1472654528, "question_id": 39252189, "link": "https://stackoverflow.com/questions/39252189/how-to-implement-a-mapint-liststring-iterator-c", "title": "How to implement a map&lt;int, list&lt;string&gt; &gt; iterator C++?", "body": "<p>It is an exercise from an old exam and i don't know how to solve it.</p>\n\n<p>I have class called dictionary and i want to implement an iterator through the keys that are pair numbers(the_map_key %2 == 0) and i don't know how to implement operator++, and functions begin an end.\nHere is the code.</p>\n\n<pre><code>class Dictionary{\n  private:\n     map&lt;int,list&lt;string&gt; &gt; information;\n</code></pre>\n\n<p>that is what the exercise gives me, and the next is what i have done but i don't know how to continue, of course i should do a constructor and a destructor,but this is simple, i have difficulties in the operator++, and functions begin an end.</p>\n\n<pre><code>  public:\n     class iterator{\n       private:\n          *d;\n       public:\n          int &amp; operator *()const;{return *d};\n          iterator &amp; operator++(){};\n          iterator begin(){};\n          iterator end(){};\n</code></pre>\n\n<p>As an example if information contains {1,something},{2,anything},{5,other}{6,an}, iterator information.begin() should point to {2,anything} and iterator++  should point to {6,an}.</p>\n"}, {"tags": ["c++", "multithreading", "qt", "user-interface"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1472653201, "post_id": 39252150, "comment_id": 65839957, "body": "Use threads and run the task in a separate thread?"}, {"owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "edited": false, "score": 1, "creation_date": 1472653262, "post_id": 39252150, "comment_id": 65840001, "body": "You could start another thread in the slot and then not wait for the task. Another &quot;simple&quot; solution is display a wait cursor so people see there is activity. <a href=\"http://stackoverflow.com/questions/13495283/change-cursor-to-hourglass-wait-busy-cursor-and-back-in-qt\" title=\"change cursor to hourglass wait busy cursor and back in qt\">stackoverflow.com/questions/13495283/&hellip;</a> but this may be not what you are trying to do"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1472653267, "post_id": 39252150, "comment_id": 65840006, "body": "Never run time consuming tasks on the main UI thread, whether in response to a signal or otherwise. That freezes your whole UI."}, {"owner": {"reputation": 1717, "user_id": 4564882, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d39ad747c8eba409dcb02c386570fc6a?s=128&d=identicon&r=PG&f=1", "display_name": "ProEns08", "link": "https://stackoverflow.com/users/4564882/proens08"}, "edited": false, "score": 0, "creation_date": 1472653358, "post_id": 39252150, "comment_id": 65840082, "body": "Is using threads the only solution?"}, {"owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "edited": false, "score": 0, "creation_date": 1472653635, "post_id": 39252150, "comment_id": 65840300, "body": "Or indicating the User that the GUI is blocked. But if you want the GUI to be responsive. Yes"}, {"owner": {"reputation": 1717, "user_id": 4564882, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d39ad747c8eba409dcb02c386570fc6a?s=128&d=identicon&r=PG&f=1", "display_name": "ProEns08", "link": "https://stackoverflow.com/users/4564882/proens08"}, "edited": false, "score": 0, "creation_date": 1472653703, "post_id": 39252150, "comment_id": 65840360, "body": "OK, Thanks. Could anyone write an answer so that I can tick and upvote it."}], "answers": [{"comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 6, "creation_date": 1472654105, "post_id": 39252441, "comment_id": 65840681, "body": "Another problem with <code>QApplication::processEvents()</code> is that you may now have to deal with reentrancy. E.g. if you call it from a slot and the button is clicked again, your slot will be called again, recursively, from within itself. Chances are, it doesn&#39;t expect that and would not work right."}], "tags": [], "owner": {"reputation": 1077, "user_id": 1296734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a73bfb57e420ceb78bfcd6e705c508b?s=128&d=identicon&r=PG&f=1", "display_name": "eclarkso", "link": "https://stackoverflow.com/users/1296734/eclarkso"}, "is_accepted": false, "score": 4, "last_activity_date": 1472653911, "creation_date": 1472653911, "answer_id": 39252441, "question_id": 39252150, "link": "https://stackoverflow.com/questions/39252150/qt-how-to-make-a-button-responsive-when-the-slot-connected-to-its-clicked-sign/39252441#39252441", "title": "Qt how to make a button responsive when the slot connected to its clicked() signal is running?", "body": "<p>You have two high-level choices:</p>\n\n<ul>\n<li>spawn the time-consuming choices into a thread: the simplest way is to use <code>QtConcurrent::run()</code>, and on the GUI side you'll need to worry about handling all the GUI events appropriately while your operation executes.</li>\n<li>within your time-consuming code, call <code>QApplication::processEvents()</code> often enough that the GUI remains responsive (e.g., on the inside of a loop):  this won't work if the time-consuming operation is 3rd party code you can't break out of, and you'll still need to work out how to handle GUI operations while you've got your long-running task executing.</li>\n</ul>\n\n<p>You'll find that the first choice is by far the consensus better choice over the second, FWIW.</p>\n"}, {"comments": [{"owner": {"reputation": 1717, "user_id": 4564882, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d39ad747c8eba409dcb02c386570fc6a?s=128&d=identicon&r=PG&f=1", "display_name": "ProEns08", "link": "https://stackoverflow.com/users/4564882/proens08"}, "edited": false, "score": 0, "creation_date": 1472660159, "post_id": 39254290, "comment_id": 65844701, "body": "Very complete answer, +1. I should put this as the answer to be fair."}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": true, "score": 4, "last_activity_date": 1484055985, "last_edit_date": 1484055985, "creation_date": 1472659503, "answer_id": 39254290, "question_id": 39252150, "link": "https://stackoverflow.com/questions/39252150/qt-how-to-make-a-button-responsive-when-the-slot-connected-to-its-clicked-sign/39254290#39254290", "title": "Qt how to make a button responsive when the slot connected to its clicked() signal is running?", "body": "<p>Anything running in the GUI must not block nor take much time to finish. Don't do long-running things in the GUI thread. That will fix your problem.</p>\n\n<p>Now you may ask: so how do I do long-running things, then? You do them in other threads, but that doesn't imply having to ever see an instance of a <code>QThread</code>, though.</p>\n\n<p>You have to isolate the data and the operations on it. Suppose we have a following class:</p>\n\n<pre><code>class MyData {\npublic:\n    MyData() {}\n    /// Loads and pre-processes the data\n    bool load(const QString &amp; file) { QThread::sleep(5); return true; }\n    /// Transforms the data\n    void transform() { QThread::sleep(2); }\n};\n\nusing MyDataPtr = std::shared_ptr&lt;MyData&gt;;\nQ_DECLARE_METATYPE(MyDataPtr)\n\nint main(...) { qRegisterMetaType&lt;MyDataPtr&gt;(); ... }\n</code></pre>\n\n<p>To make it most general, we assume that <code>MyData</code> is expensive to copy and move.</p>\n\n<p>If the operation is of a \"generate new data\" kind, say like reading a file, processing the data and building up a data structure, you can instantiate the data in a worker thread and pass it to the GUI thread:</p>\n\n<pre><code>class GuiClass : public QWidget {\n    Q_OBJECT\n    MyDataPtr data;\n    Q_SIGNAL void hasData(const MyDataPtr &amp;);\npublic:\n    GuiClass() {\n        connect(this, &amp;GuiClass::hasData,\n                this, [this](const MyDataPtr &amp; newData){ data = newData; });\n    }\n    Q_SLOT void makeData(const QString &amp; file) {\n        QtConcurrent::run([=]{\n            auto data = std::make_shared&lt;MyData&gt;();\n            if (data-&gt;load(file))\n                emit hasData(data);\n        });\n    }\n</code></pre>\n\n<p>If you need to transform the data already in place, some common approaches are:</p>\n\n<ol>\n<li><p>Copy the data, transform it in a worker thread, then swap it out after the transformation.</p>\n\n<pre><code>    Q_SLOT void transformData1() {\n        MyDataPtr copy = std::make_shared&lt;MyData&gt;(*data);\n        QtConcurrent::run([=]{\n            copy-&gt;transform();\n            emit hasData(copy);\n        });\n    }\n</code></pre></li>\n<li><p>Temporarily remove the data, transform it, then put it back. The UI will have to cope with missing data, e.g. by showing a \"busy\" indicator when <code>data</code> is null.</p>\n\n<pre><code>   Q_SLOT void transformData2() {\n        MyDataPtr data = this-&gt;data;\n        this-&gt;data.reset();\n        QtConcurrent::run([=]{\n            data-&gt;transform();\n            emit hasData(data);\n        });\n    }\n</code></pre></li>\n</ol>\n\n<p>If <code>MyData</code> were easily movable, and the default value had a meaning of \"null\"/\"empty\", you could hold on to it by value instead:</p>\n\n<pre><code>class GuiClassVal : public QWidget {\n    Q_OBJECT\n    MyData data;\n    struct DataEvent : public QEvent {\n        static const QEvent::Type type;\n        MyData data;\n        DataEvent(const MyData &amp; data) : QEvent{type}, data{data} {}\n        DataEvent(MyData &amp;&amp; data) : QEvent{type}, data{std::move(data)} {}\n    };\n    /// This method is thread-safe.\n    void setData(MyData &amp;&amp; data) {\n        QCoreApplication::postEvent(this, new DataEvent{std::move(data)});\n    }\n    /// This method is thread-safe.\n    void setData(const MyData &amp; data) {\n        QCoreApplication::postEvent(this, new DataEvent{data});\n    }\n    bool event(QEvent *event) override {\n        if (event-&gt;type() == DataEvent::type) {\n            data.~MyData();\n            new (&amp;data) MyData{std::move(static_cast&lt;DataEvent*&gt;(event)-&gt;data)};\n            return true;\n        }\n        return QWidget::event(event);\n    }\n    void transformInEvent(DataEvent * ev){\n        ev-&gt;data.transform();\n        QCoreApplication::postEvent(this, ev);\n    };\npublic:\n    Q_SLOT void makeData(const QString &amp; file) {\n        QtConcurrent::run([=]{\n            MyData data;\n            if (data.load(file)) setData(std::move(data));\n        });\n    }\n    Q_SLOT void transformData1() {\n        QtConcurrent::run(this, &amp;GuiClassVal::transformInEvent, new DataEvent{data});\n    }\n    Q_SLOT void transformData2() {\n        QtConcurrent::run(this, &amp;GuiClassVal::transformInEvent, new DataEvent{std::move(data)});\n    }\n};\nconst QEvent::Type GuiClassVal::DataEvent::type = (QEvent::Type)QEvent::registerEventType();\n</code></pre>\n\n<p>The event-based magic sauce can of course be factored out.</p>\n"}], "owner": {"reputation": 1717, "user_id": 4564882, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d39ad747c8eba409dcb02c386570fc6a?s=128&d=identicon&r=PG&f=1", "display_name": "ProEns08", "link": "https://stackoverflow.com/users/4564882/proens08"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "accepted_answer_id": 39254290, "answer_count": 2, "score": 0, "last_activity_date": 1484055985, "creation_date": 1472653125, "question_id": 39252150, "link": "https://stackoverflow.com/questions/39252150/qt-how-to-make-a-button-responsive-when-the-slot-connected-to-its-clicked-sign", "title": "Qt how to make a button responsive when the slot connected to its clicked() signal is running?", "body": "<p>I have a button with a slot connected to its clicked() signal.</p>\n\n<p>The slot is a time consuming task and take many seconds.</p>\n\n<p>When trying to re-click the button before the slot ends, I can't. </p>\n\n<p>How to make the button responsive when running the slot connected to its clicked() signal?</p>\n"}, {"tags": ["c++", "cryptography", "release", "undefined-behavior", "crypto++"], "comments": [{"owner": {"reputation": 4427, "user_id": 193887, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/54a2fc2a8cb81440a442aa45fc0f41a9?s=128&d=identicon&r=PG&f=1", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/193887/jeremy"}, "edited": false, "score": 0, "creation_date": 1472656399, "post_id": 39251961, "comment_id": 65842363, "body": "Are you sure that AdvancedProcessBlocks() allows in-place transformation?  The documentation says that ProcessBlock() does permit it, but it doesn&#39;t explicitly say that AdvancedProcessBlocks() does."}, {"owner": {"reputation": 4427, "user_id": 193887, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/54a2fc2a8cb81440a442aa45fc0f41a9?s=128&d=identicon&r=PG&f=1", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/193887/jeremy"}, "edited": false, "score": 0, "creation_date": 1472656456, "post_id": 39251961, "comment_id": 65842405, "body": "Does ProcessBlock() exhibit similar Debug/Release behaviour?  The answer to that might yield a clue."}, {"owner": {"reputation": 3687, "user_id": 2509078, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZV5ER.jpg?s=128&g=1", "display_name": "Blacktempel", "link": "https://stackoverflow.com/users/2509078/blacktempel"}, "reply_to_user": {"reputation": 4427, "user_id": 193887, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/54a2fc2a8cb81440a442aa45fc0f41a9?s=128&d=identicon&r=PG&f=1", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/193887/jeremy"}, "edited": false, "score": 0, "creation_date": 1472703217, "post_id": 39251961, "comment_id": 65860790, "body": "@Jeremy It does allow it. I&#39;ve used and debugged it for the previous months without problems. The problems started only recently. So far no-one had any issues with previous versions. I&#39;ll look into it later again and check what the possible cause could be (/ update the question). If I remember correctly it only occured on one specific call of the library."}, {"owner": {"reputation": 4427, "user_id": 193887, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/54a2fc2a8cb81440a442aa45fc0f41a9?s=128&d=identicon&r=PG&f=1", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/193887/jeremy"}, "edited": false, "score": 0, "creation_date": 1472711666, "post_id": 39251961, "comment_id": 65863638, "body": "Look carefully at how you&#39;re populating the input vector."}, {"owner": {"reputation": 3687, "user_id": 2509078, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZV5ER.jpg?s=128&g=1", "display_name": "Blacktempel", "link": "https://stackoverflow.com/users/2509078/blacktempel"}, "reply_to_user": {"reputation": 4427, "user_id": 193887, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/54a2fc2a8cb81440a442aa45fc0f41a9?s=128&d=identicon&r=PG&f=1", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/193887/jeremy"}, "edited": false, "score": 0, "creation_date": 1472715343, "post_id": 39251961, "comment_id": 65865705, "body": "@Jeremy <code>fileIFstream.read(vector.data(), vector.size());</code> where size and (current) file-position match exactly the position and size when they&#39;ve been encrypted and written to the file. There&#39;s a <code>reinterpret_cast</code> for <code>unsigned char*</code> &lt;---&gt; <code>char*</code> when using <code>vector.data()</code>."}, {"owner": {"reputation": 4427, "user_id": 193887, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/54a2fc2a8cb81440a442aa45fc0f41a9?s=128&d=identicon&r=PG&f=1", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/193887/jeremy"}, "edited": false, "score": 0, "creation_date": 1472715943, "post_id": 39251961, "comment_id": 65866051, "body": "Can you post the functions with the removed code included?"}, {"owner": {"reputation": 3687, "user_id": 2509078, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZV5ER.jpg?s=128&g=1", "display_name": "Blacktempel", "link": "https://stackoverflow.com/users/2509078/blacktempel"}, "reply_to_user": {"reputation": 4427, "user_id": 193887, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/54a2fc2a8cb81440a442aa45fc0f41a9?s=128&d=identicon&r=PG&f=1", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/193887/jeremy"}, "edited": false, "score": 0, "creation_date": 1472720519, "post_id": 39251961, "comment_id": 65868867, "body": "@Jeremy I doubt this is going to help, I&#39;ve updated the question. The problem appears to be something else. Still debugging it, for the moment it appears to be a key-problem, which STILL is quite odd. The key is set and padded with <code>&#39;\\0&#39;</code>s in order to have a <code>GetValidKeyLength(curLength)</code> (too large = throw...). Then the key is then set to the underlying Cypto++ object. Nothing seems wrong here, but the encrypted &amp; decrypted string is now equal in both Debug &amp; Release. It is only wrongly decrypted in Release mode when one program (of a few) is trying to decrypt it. Calls to libs are the same."}, {"owner": {"reputation": 4427, "user_id": 193887, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/54a2fc2a8cb81440a442aa45fc0f41a9?s=128&d=identicon&r=PG&f=1", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/193887/jeremy"}, "edited": false, "score": 0, "creation_date": 1472723027, "post_id": 39251961, "comment_id": 65870756, "body": "The reinterpret_cast&lt;MyClassBase*&gt;(m_P) is a big smelly loud flashing red light."}, {"owner": {"reputation": 3687, "user_id": 2509078, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZV5ER.jpg?s=128&g=1", "display_name": "Blacktempel", "link": "https://stackoverflow.com/users/2509078/blacktempel"}, "reply_to_user": {"reputation": 4427, "user_id": 193887, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/54a2fc2a8cb81440a442aa45fc0f41a9?s=128&d=identicon&r=PG&f=1", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/193887/jeremy"}, "edited": false, "score": 0, "creation_date": 1472728466, "post_id": 39251961, "comment_id": 65874451, "body": "@Jeremy That might be true if you can&#39;t see the code. I&#39;m unable to post all of it. This is 100% of all cases working. I can now confirm that the problem is something with the key in one of the programs. The key is set correctly and apparently inside of Crypto++ something happens -&gt; the key is incorrectly processed/bitshifted. Strange enough this only appears in one of the compiled programs. Not even 32 to 64-bit issues show up. I&#39;ll keep investigating this... got no choice."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1472778500, "post_id": 39251961, "comment_id": 65900282, "body": "<i>&quot;Trying to run the same code in release mode results in a totally different encrypted string, plus it does not decrypt correctly - &quot;trash data&quot; is decrypted&quot;</i> - It sounds like a classic memory error. Run a different set of tools on it to get a different view of the error. Or, move to Linux, and try a Sanitizer or Valgrind. For me, there&#39;s not enough code available to make an educated guess. You should probably reduce things to a minimal case. If you can reproduce using the minimal case, then post the code."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1472779927, "post_id": 39251961, "comment_id": 65900570, "body": "<i>&quot;The data being encrypted / decrypted is rather small but has a dynamic size, which is being padded if (datasize % BLOCKSIZE) has a remainder.&quot;</i> - you should probably use PKCS padding. It handles boundary cases properly, like <code>SIZEOF(plain text) == 16</code>."}, {"owner": {"reputation": 3687, "user_id": 2509078, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZV5ER.jpg?s=128&g=1", "display_name": "Blacktempel", "link": "https://stackoverflow.com/users/2509078/blacktempel"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1472926854, "post_id": 39251961, "comment_id": 65952781, "body": "@jww I cannot reproduce this behaviour. Having a small test-class using either directly <code>CryptoPP</code> or my library results in the same. No error, all fine. Just this specific program apparently does something wrong with the key. The values of the array in the class <code>Rijndael::Base</code> -&gt; <code>m_key</code> -&gt; <code>m_alloc</code> -&gt; <code>m_array</code> show for the faulty program <code>84, 0, ...</code> where the working test case shows <code>0, 0, 84, 0, ...</code>. Basically there is the problem. I&#39;ll keep investigating. I&#39;m afraid but the padding has to be handled this way..., thank you for your suggestion though."}, {"owner": {"reputation": 3687, "user_id": 2509078, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZV5ER.jpg?s=128&g=1", "display_name": "Blacktempel", "link": "https://stackoverflow.com/users/2509078/blacktempel"}, "reply_to_user": {"reputation": 4427, "user_id": 193887, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/54a2fc2a8cb81440a442aa45fc0f41a9?s=128&d=identicon&r=PG&f=1", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/193887/jeremy"}, "edited": false, "score": 0, "creation_date": 1472927144, "post_id": 39251961, "comment_id": 65952873, "body": "@Jeremy Is it normal that the Crypto++ algorithm dereferences an out-of-bounds array ? Inside of <code>UncheckedSetKey</code> it apparently dereferences beyond the maximum of the in-place array <code>rcLE</code>. There&#39;s also a comment next it. <code>for 128-bit blocks, Rijndael never uses more than 10 rcon values</code>. This looks like a bug to me, or am I wrong ? This is the point where it apparently fails."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1472953206, "post_id": 39251961, "comment_id": 65958476, "body": "@Blacktempel - Back up to the library test suite and test vectors. Build the library as usual. Find <code>cryptest.exe</code> and copy it to the root of the Crypto++ source files (this is needed because the various data files are expected to be in a certain place; see <a href=\"http://www.cryptopp.com/wiki/Datadir\" rel=\"nofollow noreferrer\">Crypto++ DataDir</a> on the wiki. Moving <code>cryptest.exe</code> sidesteps the problem). Open a command prompt, and then run both (1) <code>cryptest.exe v</code> and (2) <code>cryptest.exe tv all</code>."}], "answers": [{"comments": [{"owner": {"reputation": 4427, "user_id": 193887, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/54a2fc2a8cb81440a442aa45fc0f41a9?s=128&d=identicon&r=PG&f=1", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/193887/jeremy"}, "edited": false, "score": 0, "creation_date": 1473083379, "post_id": 39316407, "comment_id": 65995532, "body": "Oof, that implementation looks a little careless for a crypto library... (Easy for me to say from here in my armchair.) Well done tracking down the problem."}], "tags": [], "owner": {"reputation": 3687, "user_id": 2509078, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZV5ER.jpg?s=128&g=1", "display_name": "Blacktempel", "link": "https://stackoverflow.com/users/2509078/blacktempel"}, "is_accepted": true, "score": 0, "last_activity_date": 1472988383, "creation_date": 1472988383, "answer_id": 39316407, "question_id": 39251961, "link": "https://stackoverflow.com/questions/39251961/cryptography-bizzare-behaviour-in-release-mode/39316407#39316407", "title": "Cryptography - Bizzare behaviour in Release mode", "body": "<p>Apparently this is a bug in CryptoPP. The minimum keylength of Rijndael / AES is set to 8 instead of 16. Using a invalid keylength of 8 bytes will cause a out-of-bounds access to the in-place array of Rcon values. This keylength of 8 byte is currently reported as valid and has to be fixed in CryptoPP.</p>\n\n<p>See <a href=\"https://github.com/weidai11/cryptopp/issues/252\" rel=\"nofollow\">this issue on github</a> for more information. (On-going conversation)</p>\n"}], "owner": {"reputation": 3687, "user_id": 2509078, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZV5ER.jpg?s=128&g=1", "display_name": "Blacktempel", "link": "https://stackoverflow.com/users/2509078/blacktempel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 39316407, "answer_count": 1, "score": 0, "last_activity_date": 1472988383, "creation_date": 1472652595, "last_edit_date": 1495535628, "question_id": 39251961, "link": "https://stackoverflow.com/questions/39251961/cryptography-bizzare-behaviour-in-release-mode", "title": "Cryptography - Bizzare behaviour in Release mode", "body": "<p>I've got a project using <a href=\"https://www.cryptopp.com/\" rel=\"nofollow noreferrer\">Crypto++</a>.</p>\n\n<p>Crypto++ is a own project which builds in a static lib.<br/>\nAside from that I have another large project using some of the Crypto++ classes and processing various algorithms, which also builds in a static lib.</p>\n\n<p>Two of the functions are these:</p>\n\n<pre><code>long long MyClass::EncryptMemory(std::vector&lt;byte&gt; &amp;inOut, char *cPadding, int rounds)\n{\n    typedef std::numeric_limits&lt;char&gt; CharNumLimit;\n    char sPadding = 0;\n    //Calculates padding and returns value as provided type\n    sPadding = CalcPad&lt;decltype(sPadding)&gt;(reinterpret_cast&lt;MyClassBase*&gt;(m_P)-&gt;BLOCKSIZE, static_cast&lt;int&gt;(inOut.size()));\n    //Push random chars as padding, we never care about padding's content so it doesn't matter what the padding is\n    for (auto i = 0; i &lt; sPadding; ++i)\n        inOut.push_back(sRandom(CharNumLimit::min(), CharNumLimit::max()));\n    std::size_t nSize = inOut.size();\n    EncryptAdvanced(inOut.data(), nSize, rounds);\n    if (cPadding)\n        *cPadding = sPadding;\n    return nSize;\n}\n\n//Removing the padding is the responsibility of the caller.\n//Nevertheless the string is encrypted with padding\n//and should here be the right string with a little padding\nlong long MyClass::DecryptMemory(std::vector&lt;byte&gt; &amp;inOut, int rounds)\n{\n    DecryptAdvanced(inOut.data(), inOut.size(), rounds);\n    return inOut.size();\n}\n</code></pre>\n\n<p>Where <code>EncryptAdvanced</code> and <code>DecryptAdvanced</code> pass the arguments to the Crypto++ object.</p>\n\n<pre><code>//...\nAdvancedProcessBlocks(bytePtr, nullptr, bytePtr, length, 0);\n//...\n</code></pre>\n\n<p>These functions have so far worked flawless, no modifications have been applied to them since months.\nThe logic around them has evolved, though the calls and data passed to them did not change.</p>\n\n<p>The data being encrypted / decrypted is rather small but has a dynamic size, which is being padded <code>if (datasize % BLOCKSIZE)</code> has a remainder.<br/>\nExample: AES Blocksize is 16. Data is 31. Padding is 1. Data is now 32.</p>\n\n<p>After encrypting and before decrypting, the string is the same - as in the picture.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Sxo3C.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Sxo3C.png\" alt=\"Encrypt/Decrypt data\"></a></p>\n\n<p>Running all this in <strong>debug mode</strong> apparently works as intended. Even when running this program on another computer (with VS installed for DLLs) it shows no difference. The data is correctly encrypted and decrypted.</p>\n\n<p>Trying to run the same code in <strong>release mode</strong> results in a totally different encrypted string, plus it does not decrypt correctly - \"trash data\" is decrypted. The wrongly encrypted or decrypted data is consistent - always the same trash is decrypted. The key/password and the rounds/iterations are the same <em>all the time.</em></p>\n\n<p>Additional info: The data is saved in a file (<code>ios_base::binary</code>) and correctly processed in debug mode, from two different programs in the same solution using the same static librar(y/ies).</p>\n\n<p>What could be the cause of this Debug / Release problem ?</p>\n\n<p><sub><em>I re-checked the git history a couple of times, debugged for days through the code, yet I cannot find any possible cause for this problem.</em> If any information - aside from a (here rather impossible) <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> is needed, please leave a comment.</sub></p>\n"}, {"tags": ["c++", "c", "segmentation-fault", "printf", "fopen"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472652634, "post_id": 39251944, "comment_id": 65839547, "body": "TL;DR; Mismatching format specifiers and variable types somewhere perhaps?"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 1, "creation_date": 1472652651, "post_id": 39251944, "comment_id": 65839564, "body": "My guess would be, <code>fopen</code> failed and <code>fp</code> is <code>NULL</code>."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1472652653, "post_id": 39251944, "comment_id": 65839567, "body": "Check the return value of <code>fopen()</code>."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 1, "creation_date": 1472652727, "post_id": 39251944, "comment_id": 65839622, "body": "@IgorTandetnik <i>&quot;The directories are working and the txt file gets created.&quot;</i>"}, {"owner": {"reputation": 1206, "user_id": 5140740, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1Gcmn.jpg?s=128&g=1", "display_name": "V-R", "link": "https://stackoverflow.com/users/5140740/v-r"}, "edited": false, "score": 0, "creation_date": 1472652857, "post_id": 39251944, "comment_id": 65839708, "body": "maybe change the first fprintf to printf without fp and tell us which line is going to crash then?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1472652932, "post_id": 39251944, "comment_id": 65839762, "body": "Which language - C or C++?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1472652982, "post_id": 39251944, "comment_id": 65839800, "body": "<i>@Gerard</i> In general you should inspect your progam with the debugger line by line first to identify the exact source of the exception."}, {"owner": {"reputation": 5930, "user_id": 815787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54d63bc7f3fac2cef3d9761e8afbaca6?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/815787/serge"}, "edited": false, "score": 0, "creation_date": 1472653122, "post_id": 39251944, "comment_id": 65839898, "body": "any chance to rise ulimit on core file creation and inspecting core file with gdb?"}, {"owner": {"reputation": 3864, "user_id": 620908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2abd643ecb33f1a18a7a4f976cef0dbe?s=128&d=identicon&r=PG", "display_name": "Adrian Colomitchi", "link": "https://stackoverflow.com/users/620908/adrian-colomitchi"}, "edited": false, "score": 1, "creation_date": 1472653329, "post_id": 39251944, "comment_id": 65840048, "body": "Are you sure you aren&#39;t receiving a <code>dateiname3</code> longer than <code>dateiname2</code> (=100 chars) can handle? (... <code>strcpy&#47;strcat</code> ... shudders )"}, {"owner": {"reputation": 45, "user_id": 6779143, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208216829232232/picture?type=large", "display_name": "Gerard J&#250;lio", "link": "https://stackoverflow.com/users/6779143/gerard-j%c3%balio"}, "edited": false, "score": 0, "creation_date": 1472654297, "post_id": 39251944, "comment_id": 65840827, "body": "hey, thx for your comments! the file gets created empty, the segfault must be thrown after my printf. the language is c++ (for some random generators), but as you can see I&#39;m programing mostly in c"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1472654444, "post_id": 39251944, "comment_id": 65840955, "body": "@GerardJ&#250;lio As mentioned step through with the debugger to identify the exact source of the segfault."}, {"owner": {"reputation": 45, "user_id": 6779143, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208216829232232/picture?type=large", "display_name": "Gerard J&#250;lio", "link": "https://stackoverflow.com/users/6779143/gerard-j%c3%balio"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472654775, "post_id": 39251944, "comment_id": 65841199, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 oh dear, I&#39;m compiling my code with gcc, I&#39;m not into into the deep stuff of debugging, but I know, that the first fopen throws the fault and that the pointer isn&#39;t null"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472654975, "post_id": 39251944, "comment_id": 65841363, "body": "@GerardJ&#250;lio <i>&quot;that the first fopen throws the fault and that the pointer isn&#39;t null&quot;</i>  That is contradictorily.. Learn how to use the debugger, this is an essential skill for every serious programmer."}, {"owner": {"reputation": 45, "user_id": 6779143, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208216829232232/picture?type=large", "display_name": "Gerard J&#250;lio", "link": "https://stackoverflow.com/users/6779143/gerard-j%c3%balio"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472655124, "post_id": 39251944, "comment_id": 65841466, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 sorry, I meant the first fprintf(), fopen() doesn&#39;t makes any sense here"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472655320, "post_id": 39251944, "comment_id": 65841603, "body": "@GerardJ&#250;lio Though that doesn&#39;t mean the segfault occurs at your 1st <code>fprintf()</code>, that the file is empty isn&#39;t a proof. Files are written buffered, unless you apply a <code>flush()</code> after each <code>fprintf()</code>. Again: Use the debugger, with any modern IDE it&#39;s fairly easy to use it."}, {"owner": {"reputation": 45, "user_id": 6779143, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208216829232232/picture?type=large", "display_name": "Gerard J&#250;lio", "link": "https://stackoverflow.com/users/6779143/gerard-j%c3%balio"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472655716, "post_id": 39251944, "comment_id": 65841887, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 you&#39;re right, I tried to change the first fprintf in printf though, printf is working, the next fprintf throws the fault. The pointer has to be broken!"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472656206, "post_id": 39251944, "comment_id": 65842232, "body": "@GerardJ&#250;lio What&#39;s the value of the pointer? Is it <code>NULL</code>?"}, {"owner": {"reputation": 45, "user_id": 6779143, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208216829232232/picture?type=large", "display_name": "Gerard J&#250;lio", "link": "https://stackoverflow.com/users/6779143/gerard-j%c3%balio"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472656513, "post_id": 39251944, "comment_id": 65842451, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 nope, 938e008 for example"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472657843, "post_id": 39251944, "comment_id": 65843337, "body": "@GerardJ&#250;lio Sounds much like you have some undefined behavior/stack corruption then."}, {"owner": {"reputation": 1206, "user_id": 5140740, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1Gcmn.jpg?s=128&g=1", "display_name": "V-R", "link": "https://stackoverflow.com/users/5140740/v-r"}, "edited": false, "score": 0, "creation_date": 1472658769, "post_id": 39251944, "comment_id": 65843914, "body": "Consider pasting your code into an online c++ compiler such as ideone.com or cpp.sh and getting it to compile without errors while still reproducing the crash. If you really think it is this particular function, it should be easy to make it compile online (although for online I would replace all fprintf by printf)."}, {"owner": {"reputation": 45, "user_id": 6779143, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208216829232232/picture?type=large", "display_name": "Gerard J&#250;lio", "link": "https://stackoverflow.com/users/6779143/gerard-j%c3%balio"}, "reply_to_user": {"reputation": 1206, "user_id": 5140740, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1Gcmn.jpg?s=128&g=1", "display_name": "V-R", "link": "https://stackoverflow.com/users/5140740/v-r"}, "edited": false, "score": 0, "creation_date": 1472667055, "post_id": 39251944, "comment_id": 65848476, "body": "@V-R printf is no problem, it is this function indeed"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1472690234, "post_id": 39251944, "comment_id": 65857924, "body": "for ease of readability and understanding: 1) indent after every opening brace &#39;{&#39;.  un-indent before every closing brace &#39;}&#39;. (suggest using 4 spaces for each indent level, NEVER use tabs for indenting as every word processor/editor has the tab stops/tab width set to individual preferences.  2) follow the axiom: *only one statement per line and (at most) one variable declaration per statement.  3) separate code blocks (for, if, else, while, do...while, switch, default, case) via a blank line."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1472690378, "post_id": 39251944, "comment_id": 65857955, "body": "When asking a question about a run time problem, post code that cleanly compiles, is reasonably short, and still shows the problem.  the posted code is not even a complete function, so it does not compile.  Please repost a complete program, short, that exhibits the problem."}], "owner": {"reputation": 45, "user_id": 6779143, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208216829232232/picture?type=large", "display_name": "Gerard J&#250;lio", "link": "https://stackoverflow.com/users/6779143/gerard-j%c3%balio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 230, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1472652554, "creation_date": 1472652554, "question_id": 39251944, "link": "https://stackoverflow.com/questions/39251944/segfault-on-fprintf", "title": "SegFault on fprintf", "body": "<p>I do not know why the program runs into a segfault after my printf on the first fprintf. Do anybody has an idea? The directories are working and the txt file gets created.</p>\n\n<pre><code>    void visualisierung(int M,int L, float p,float q,float r,int n,\nint step,int stepm, char dateiname3[]){\n            FILE *fp,*fp2;\n            zelle **liste,*listehilf;\n            int i,j,anz,teilchenmax,teilchenneu,nt,me;\n            time_t zeit;\n            double multiplier,dichte;\n            double fluss[101];\n            char dateiname[100],dateiname2[100];\n            zeit=time(NULL);\n            //erstellen eines neuen Ordners\n            mkdir(\"currentvids\",0755);\n            chdir(\"currentvids\");\n            strcpy(dateiname,dateiname3);\n            strcpy(dateiname2,dateiname3);\n            strcat(dateiname2,\".txt\");\n            mkdir(dateiname,0755);\n            chdir(dateiname);\n            fp=fopen(dateiname2,\"w\");\n                printf(\"No SegFault yet\\n\");\n\n                fprintf(fp, \"#Matrix %ix%i\\n\", M,L);\n                fprintf(fp, \"#Particle Size: %ix%i\\n\", n,n);\n                fprintf(fp, \"#p: %f\\n\", p);\n                fprintf(fp, \"#q: %f\\n\", q);\n                fprintf(fp, \"#v: %f\\n\", 1-(p+q+r));\n                fprintf(fp, \"#steps before measurement: %i\\n\", step);\n                fprintf(fp, \"#number of measured steps: %i\\n\", stepm);\n</code></pre>\n"}, {"tags": ["c++", "performance", "optimization", "c++14"], "comments": [{"owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "edited": false, "score": 1, "creation_date": 1472652185, "post_id": 39251752, "comment_id": 65839239, "body": "a vector of pairs seems to be the way here. You only loop once over the structure and you can define in the sorting by what you want to sort."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "edited": false, "score": 0, "creation_date": 1472652239, "post_id": 39251752, "comment_id": 65839273, "body": "@Hayt but to extract the name and IDs out of the pairs requires another loop"}, {"owner": {"reputation": 778, "user_id": 6618289, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1149829745350f27012281268c37c618?s=128&d=identicon&r=PG&f=1", "display_name": "meetaig", "link": "https://stackoverflow.com/users/6618289/meetaig"}, "edited": false, "score": 2, "creation_date": 1472652292, "post_id": 39251752, "comment_id": 65839312, "body": "have you tried using <code>std::map&lt;std::string, int&gt;</code> ? I think that would do the trick for your case. You can provide a custom compare function to <code>std::sort</code> btw ;)"}, {"owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "edited": false, "score": 0, "creation_date": 1472652445, "post_id": 39251752, "comment_id": 65839423, "body": "a map would work if you only sort by string. But I assume you want to toggle between ID and name sorting?"}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "reply_to_user": {"reputation": 778, "user_id": 6618289, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1149829745350f27012281268c37c618?s=128&d=identicon&r=PG&f=1", "display_name": "meetaig", "link": "https://stackoverflow.com/users/6618289/meetaig"}, "edited": false, "score": 0, "creation_date": 1472652450, "post_id": 39251752, "comment_id": 65839427, "body": "@meetaig Maybe <code>std::map&lt;ID as int, then std::string&gt;</code> would be much better. As ID is unique same as the key of the map"}, {"owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1472652469, "post_id": 39251752, "comment_id": 65839433, "body": "@FirstStep this would not sort by name though"}, {"owner": {"reputation": 778, "user_id": 6618289, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1149829745350f27012281268c37c618?s=128&d=identicon&r=PG&f=1", "display_name": "meetaig", "link": "https://stackoverflow.com/users/6618289/meetaig"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1472652556, "post_id": 39251752, "comment_id": 65839498, "body": "@FirstStep @Hayt that&#39;s why I mentioned that you can provide a custom compare function. Maybe <code>std::pair</code> would also be a nice solution"}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "reply_to_user": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "edited": false, "score": 0, "creation_date": 1472652652, "post_id": 39251752, "comment_id": 65839566, "body": "@Hayt No need to sort the map. Could take all the values and sort them somewhere else (for display or whatever). Once an ID is needed, search map for the string (value) and retrieve its ID (key). Not the best solution though, I believe"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1472653772, "post_id": 39251752, "comment_id": 65840410, "body": "Why not take a page from the linked duplicate&#39;s accepted answer and make a vector of indices, which you then sort based off the values in your vectors at those indices?"}], "answers": [{"comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1472674760, "post_id": 39252659, "comment_id": 65852641, "body": "This would duplicate the data, which isn&#39;t ideal given the amount"}, {"owner": {"reputation": 337, "user_id": 1746266, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/18gFU.jpg?s=128&g=1", "display_name": "Fabio C.", "link": "https://stackoverflow.com/users/1746266/fabio-c"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1472720130, "post_id": 39252659, "comment_id": 65868586, "body": "True, but other ways I can think to is a vector of struct containing both name and is (discarded by you) or a sort procedure that sort both the arrays the same way (which means reordering every time you pass from names ordering to ids ordering and losing the initial order)"}], "tags": [], "owner": {"reputation": 337, "user_id": 1746266, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/18gFU.jpg?s=128&g=1", "display_name": "Fabio C.", "link": "https://stackoverflow.com/users/1746266/fabio-c"}, "is_accepted": false, "score": 1, "last_activity_date": 1472654517, "creation_date": 1472654517, "answer_id": 39252659, "question_id": 39251752, "link": "https://stackoverflow.com/questions/39251752/better-way-to-sort-2-linked-arrays/39252659#39252659", "title": "Better way to sort 2 &quot;linked&quot; arrays?", "body": "<p>you could use a std::map string to int that maps names to their index (which is the same index of ids), and if you want to order to ids too another std::map int to int that maps ids to their index (which is the same index of names).</p>\n\n<p>this way you can keep your arrays as is and have two ordered structure which can give you the needed index fast to access your arrays.</p>\n"}], "owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "closed_date": 1472652230, "answer_count": 1, "score": 0, "last_activity_date": 1472654517, "creation_date": 1472652036, "question_id": 39251752, "link": "https://stackoverflow.com/questions/39251752/better-way-to-sort-2-linked-arrays", "closed_reason": "Duplicate", "title": "Better way to sort 2 &quot;linked&quot; arrays?", "body": "<p>I have 2 vectors which store properties that are \"linked\". This is what I mean:</p>\n\n<pre><code>std::vector&lt;std::string&gt; names;\nstd::vector&lt;int&gt; ids;\n\n// Name of object with an ID of 5\nauto name = names[std::find(ids.begin(), ids.end(), 5) - ids.begin()];\n</code></pre>\n\n<p>Each object has a name and an ID, and so the object at index <em>n</em> has a name of <code>name[n]</code> and an ID of <code>ids[n]</code>.</p>\n\n<p>Now I want to sort the names in alphabetical order. I can use <code>std::sort</code>:</p>\n\n<pre><code>std::sort(names.begin(), names.end());\n</code></pre>\n\n<p>But now the IDs don't match! I thought of doing a vector of pairs, putting every name/id in it, sorting it, and then extracting out the data.</p>\n\n<p>This isn't really efficient, as I have to loop 2 times over every element of both vectors, and the vectors have a lot of elements.</p>\n\n<p>How can I make it more efficient, seeing that I can't use the vector of pairs instead of the 2 vectors from the beginning?</p>\n"}, {"tags": ["c++", "overloading"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 6, "creation_date": 1472651765, "post_id": 39251626, "comment_id": 65838935, "body": "Conversion from <code>char*</code> to <code>bool</code> is a standard conversion; conversion to <code>std::string</code> is a user-defined conversion. The former is preferred in overload resolution. <code>myObj.saveAsMat(&quot;myName&quot;);</code> should be calling <code>myObj.saveAsMat(true);</code>"}], "owner": {"reputation": 2826, "user_id": 1280289, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4OMLW.jpg?s=128&g=1", "display_name": "Kevin Katzke", "link": "https://stackoverflow.com/users/1280289/kevin-katzke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "closed_date": 1472651832, "answer_count": 0, "score": 2, "last_activity_date": 1472651841, "creation_date": 1472651695, "question_id": 39251626, "link": "https://stackoverflow.com/questions/39251626/c-overloaded-function-not-being-called-with-string-parameter", "closed_reason": "Duplicate", "title": "C++ Overloaded function not being called with string parameter", "body": "<p>I overloaded a function like the following:</p>\n\n<pre><code>void myClass::saveAsMat (bool complete){\n  ...\n}\n\nvoid myClass::saveAsMat (std::string filename){\n  ...\n}\n</code></pre>\n\n<p>In my main.cpp when I call the function like this:</p>\n\n<pre><code>myObj.saveAsMat(true);\n</code></pre>\n\n<p>everthing works fine. But when I instead call the function like this:</p>\n\n<pre><code>myObj.saveAsMat(\"myName\");\n</code></pre>\n\n<p>the function is not being executed at all. I expected a compile or runtime error but there is nothing like that. The program gets compiled and runs only that the function is ignored. (I checked this by placing some <code>std::cout</code> inside the function).</p>\n\n<p>Then I found out that I can solve this by changing the argument passed to:</p>\n\n<pre><code>myObj.saveAsMat(string(\"myName\"));\n</code></pre>\n\n<p>Why do I have to set the extra <code>string()</code> for the argument? Other functions that are not overloaded are working fine by simply passing <code>\"myName\"</code> for a <code>\"std::string\"</code> paramenter.</p>\n"}, {"tags": ["c++", "class", "object"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 11, "creation_date": 1472651406, "post_id": 39251512, "comment_id": 65838639, "body": "You can&#39;t embed a class in itself. Think twice: That causes infinite recursion. Use a pointer or better a smart pointer instead."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1472651551, "post_id": 39251512, "comment_id": 65838765, "body": "Aside from the infinite recursion problem, you cannot use an incomplete type to define a member of a class because the compiler cannot know how much space to reserve in class instances for that member. Because the type is incomplete, it cannot yet know how big the class is."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1472651591, "post_id": 39251512, "comment_id": 65838794, "body": "rethink your design, there is no real problem that needs this as solution"}, {"owner": {"reputation": 7335, "user_id": 2430597, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f0kyJ.jpg?s=128&g=1", "display_name": "plasmacel", "link": "https://stackoverflow.com/users/2430597/plasmacel"}, "edited": false, "score": 0, "creation_date": 1472651675, "post_id": 39251512, "comment_id": 65838863, "body": "I think the OP wants to do something similar to the pimpl idiom, though a bad way."}, {"owner": {"reputation": 2955, "user_id": 4718288, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ee409c8a881d44d6fa6d728445962103?s=128&d=identicon&r=PG&f=1", "display_name": "Hatefiend", "link": "https://stackoverflow.com/users/4718288/hatefiend"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472651697, "post_id": 39251512, "comment_id": 65838875, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 \u1fe5\u03b5 If I use a pointer, will I then have to use <code>malloc</code> or <code>calloc</code> like in C to tell the compiler: &quot;Hey, I want this pointer to point to an actual object now&quot; ?"}, {"owner": {"reputation": 7335, "user_id": 2430597, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f0kyJ.jpg?s=128&g=1", "display_name": "plasmacel", "link": "https://stackoverflow.com/users/2430597/plasmacel"}, "edited": false, "score": 0, "creation_date": 1472651725, "post_id": 39251512, "comment_id": 65838901, "body": "@Hatefiend Look at: <a href=\"https://en.wikipedia.org/wiki/Opaque_pointer#C.2B.2B\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Opaque_pointer#C.2B.2B</a>"}, {"owner": {"reputation": 2955, "user_id": 4718288, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ee409c8a881d44d6fa6d728445962103?s=128&d=identicon&r=PG&f=1", "display_name": "Hatefiend", "link": "https://stackoverflow.com/users/4718288/hatefiend"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1472651817, "post_id": 39251512, "comment_id": 65838971, "body": "@tobi303 There is though. What I&#39;m trying to do is have an object type that represents a mathematical expression, such as <code>2x + 4</code>. The issue is mathematical expressions can be raised to powers such as <code>(2x + 4)^8</code> Mathematical expressions can be raised to expressions as well, such as <code>(2x + 4)^(x^2 - 3x + 1)</code>. This is why I have an <code>Expression</code> variable to represent a possible <code>power</code> or <code>exponent</code>."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1472651932, "post_id": 39251512, "comment_id": 65839046, "body": "@Hatefiend <i>&quot; will I then have to use <code>malloc</code> or <code>calloc</code>&quot;</i> For heavens sake no! For classes you need <code>new</code> and <code>delete</code>, but as mentioned use e.g. a <code>std::unique_ptr&lt;Expression&gt;</code> that will release you from doing that consistenly your own."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1472652097, "post_id": 39251512, "comment_id": 65839168, "body": "@Hatefiend If you say &quot;There is though&quot;, then you didnt understand, what this construct means. The difference is &quot;expressions <b>can</b> be raised to..&quot; but in your design every <code>Expression</code> is composed of another <code>Expression</code> which is not the appropriate model for &quot; I have an Expression variable to represent <b>a possible</b> power or..&quot;. In your current design the power isnt optional or just &quot;possible&quot;, but it has to be there and further itself has to have a power and so on ad infinitum"}, {"owner": {"reputation": 2955, "user_id": 4718288, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ee409c8a881d44d6fa6d728445962103?s=128&d=identicon&r=PG&f=1", "display_name": "Hatefiend", "link": "https://stackoverflow.com/users/4718288/hatefiend"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1472652471, "post_id": 39251512, "comment_id": 65839436, "body": "@tobi303 I see what you mean, but I thought since in my header declaration, <code>Expression power</code> is null until I create it, and thus there is no recursion. Meaning like, I tell the compiler &quot;Hey, it&#39;s possible for this class to have an <code>Expression</code> variable, but I&#39;ll let you know when I&#39;m ready to initialize it."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1472652688, "post_id": 39251512, "comment_id": 65839596, "body": "it gets initialized when you call the constructor, it cannot be null (unless you make it a pointer)"}, {"owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "edited": false, "score": 0, "creation_date": 1472653135, "post_id": 39251512, "comment_id": 65839911, "body": "@Hatefiend I&#39;d recommend picking up an <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">introductory book</a> on C++."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472654574, "post_id": 39251512, "comment_id": 65841052, "body": "@Hatefiend <i>&quot;<code>Expression power</code> is null &quot;</i> Nope! C++ isn&#39;t Java. This member cannot ever be <code>null</code>."}, {"owner": {"reputation": 2955, "user_id": 4718288, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ee409c8a881d44d6fa6d728445962103?s=128&d=identicon&r=PG&f=1", "display_name": "Hatefiend", "link": "https://stackoverflow.com/users/4718288/hatefiend"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472654661, "post_id": 39251512, "comment_id": 65841125, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6  If I want that functionality, I must make the variable a pointer?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472654806, "post_id": 39251512, "comment_id": 65841228, "body": "@Hatefiend Yes. Use the <code>std::unique_ptr&lt;Expression&gt;</code> (or <code>std::shared_ptr&lt;Expression&gt;</code>) as mentioned."}, {"owner": {"reputation": 2955, "user_id": 4718288, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ee409c8a881d44d6fa6d728445962103?s=128&d=identicon&r=PG&f=1", "display_name": "Hatefiend", "link": "https://stackoverflow.com/users/4718288/hatefiend"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472655501, "post_id": 39251512, "comment_id": 65841737, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6\tI&#39;ve never seen that before. How does that work vs. using <code>Expression *myPtr</code> ?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472656321, "post_id": 39251512, "comment_id": 65842315, "body": "@Hatefiend You can read the details and see examples in the <a href=\"http://en.cppreference.com/w/cpp/memory\" rel=\"nofollow noreferrer\">reference documentation</a>."}], "answers": [{"comments": [{"owner": {"reputation": 2955, "user_id": 4718288, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ee409c8a881d44d6fa6d728445962103?s=128&d=identicon&r=PG&f=1", "display_name": "Hatefiend", "link": "https://stackoverflow.com/users/4718288/hatefiend"}, "edited": false, "score": 0, "creation_date": 1472652090, "post_id": 39251590, "comment_id": 65839165, "body": "I see. I wonder then, why would a line like this work totally okay in Java but in C++ it causes so many problems?"}, {"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "reply_to_user": {"reputation": 2955, "user_id": 4718288, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ee409c8a881d44d6fa6d728445962103?s=128&d=identicon&r=PG&f=1", "display_name": "Hatefiend", "link": "https://stackoverflow.com/users/4718288/hatefiend"}, "edited": false, "score": 3, "creation_date": 1472652624, "post_id": 39251590, "comment_id": 65839544, "body": "The same thing would happen in Java, as you can see here: <a href=\"http://stackoverflow.com/questions/8023319/declaring-an-instance-of-a-class-inside-that-class\" title=\"declaring an instance of a class inside that class\">stackoverflow.com/questions/8023319/&hellip;</a> The only difference is that the compiler would never know"}, {"owner": {"reputation": 2955, "user_id": 4718288, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ee409c8a881d44d6fa6d728445962103?s=128&d=identicon&r=PG&f=1", "display_name": "Hatefiend", "link": "https://stackoverflow.com/users/4718288/hatefiend"}, "edited": false, "score": 0, "creation_date": 1472652869, "post_id": 39251590, "comment_id": 65839719, "body": "Yes but that user is doing <code>Animal object1 = new Animal();</code> in the declaration for the <code>Animal</code> class which here I am essentially typing <code>Animal object1;</code> without initializing it. That&#39;s kind of what I&#39;m not getting."}, {"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "reply_to_user": {"reputation": 2955, "user_id": 4718288, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ee409c8a881d44d6fa6d728445962103?s=128&d=identicon&r=PG&f=1", "display_name": "Hatefiend", "link": "https://stackoverflow.com/users/4718288/hatefiend"}, "edited": false, "score": 0, "creation_date": 1472653828, "post_id": 39251590, "comment_id": 65840447, "body": "The point of that link was differentiation. The code in the link would cause recursion, but in your case, the code is fine, since the ctor is not called for the class, almost like a pointer"}], "tags": [], "owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "is_accepted": true, "score": 3, "last_activity_date": 1472651581, "creation_date": 1472651581, "answer_id": 39251590, "question_id": 39251512, "link": "https://stackoverflow.com/questions/39251512/c-incomplete-class-type/39251590#39251590", "title": "C++ - Incomplete class type?", "body": "<p>If you put an instance of a class inside itself, if you notice, you are creating recursion, since every instance has its own <code>Expression power</code>, and this goes on forever. If you have a pointer though, you can control this infinite recursion, since at any time you can set <code>power</code> to <code>nullptr</code>, (or <code>NULL/0</code>, pre C++11), to end the recursion. </p>\n"}], "owner": {"reputation": 2955, "user_id": 4718288, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ee409c8a881d44d6fa6d728445962103?s=128&d=identicon&r=PG&f=1", "display_name": "Hatefiend", "link": "https://stackoverflow.com/users/4718288/hatefiend"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1222, "favorite_count": 0, "closed_date": 1472651558, "accepted_answer_id": 39251590, "answer_count": 1, "score": 2, "last_activity_date": 1472651581, "creation_date": 1472651352, "question_id": 39251512, "link": "https://stackoverflow.com/questions/39251512/c-incomplete-class-type", "closed_reason": "Duplicate", "title": "C++ - Incomplete class type?", "body": "<p>I've been working with a lot of C and Java lately so I'm a bit confused coming back to C++ on why this is not allowed. </p>\n\n<p><code>incomplete type is not allowed</code></p>\n\n<pre><code>#pragma once\n\nclass Expression\n{\nprivate:\n    Expression power; // &lt;--- incomplete type is not allowed\n};\n</code></pre>\n\n<p>I believe the answer here is to change the line <code>Expression power</code> to <code>Expression *power</code> but I don't understand why that is. I can declare objects like <code>vector&lt;int&gt; var</code> without having to make them a pointer, but the second I have an object of the same type as the file it's being declared in, I need one? I've looked around but cannot find any tutorials/videos on a class making an object of itself.</p>\n"}, {"tags": ["c++", "makefile", "tensorflow"], "answers": [{"tags": [], "owner": {"reputation": 118, "user_id": 87359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36c8130a92994139d4b6c26b23a1c2c2?s=128&d=identicon&r=PG", "display_name": "emredog", "link": "https://stackoverflow.com/users/87359/emredog"}, "is_accepted": true, "score": 1, "last_activity_date": 1472652605, "creation_date": 1472652605, "answer_id": 39251967, "question_id": 39251485, "link": "https://stackoverflow.com/questions/39251485/error-with-protobuf-while-compiling-tensorflow/39251967#39251967", "title": "Error with Protobuf while compiling Tensorflow", "body": "<p>I think the problem is resolved as described here: <a href=\"https://groups.google.com/a/tensorflow.org/forum/#!msg/discuss/CtrurAAnglI/Mu9JHr6kAQAJ\" rel=\"nofollow\">Google Groups discussion</a></p>\n\n<p>Just add a new CFLAG:</p>\n\n<pre><code>-DPROTOBUF_DEPRECATED_ATTR=\"\"\n</code></pre>\n"}], "owner": {"reputation": 457, "user_id": 5556342, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/05169b6a5ec547ed54a67f1a0ad7947f?s=128&d=identicon&r=PG&f=1", "display_name": "Alperen AYDIN", "link": "https://stackoverflow.com/users/5556342/alperen-aydin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 451, "favorite_count": 0, "accepted_answer_id": 39251967, "answer_count": 1, "score": 0, "last_activity_date": 1472652605, "creation_date": 1472651294, "question_id": 39251485, "link": "https://stackoverflow.com/questions/39251485/error-with-protobuf-while-compiling-tensorflow", "title": "Error with Protobuf while compiling Tensorflow", "body": "<p>I am currently trying use Tensorflow's shared libraries in a non-bazel project. </p>\n\n<p>So I built the .so file using: </p>\n\n<blockquote>\n  <p>bazel build //tensorflow:libtensorflow.so</p>\n</blockquote>\n\n<p>Then I loaded the dependencies as described <a href=\"https://github.com/tensorflow/tensorflow/tree/master/tensorflow/contrib/makefile\" rel=\"nofollow\">here.</a></p>\n\n<p>I added the following flags to my Makefile: </p>\n\n<blockquote>\n  <p>CFLAGS += -I/home/alpy/tensorflow/bazel-genfiles\n      CFLAGS += -I/home/alpy/tensorflow/\n      CFLAGS += -I/home/alpy/tensorflow/tensorflow/contrib/makefile/downloads/eigen-latest/</p>\n  \n  <p>LDFLAGS += -L../resources/</p>\n  \n  <p>LDFLAGS += -ltensorflow.so</p>\n</blockquote>\n\n<p>When I do this, I get this rather strange error: </p>\n\n<pre><code>In file included from /home/alpy/tensorflow/tensorflow/core/public/session.h:22:0,\n                 from ../src/conversion.h:14,\n                 from ../src/conversion.cpp:1:\n/home/alpy/tensorflow/bazel-genfiles/tensorflow/core/framework/graph.pb.h:143:3: error: \u2018PROTOBUF_DEPRECATED_ATTR\u2019 does not name a type\n   PROTOBUF_DEPRECATED_ATTR void clear_version();\n   ^\n/home/alpy/tensorflow/bazel-genfiles/tensorflow/core/framework/graph.pb.h:144:3: error: \u2018PROTOBUF_DEPRECATED_ATTR\u2019 does not name a type\n   PROTOBUF_DEPRECATED_ATTR static const int kVersionFieldNumber = 3;\n   ^\n/home/alpy/tensorflow/bazel-genfiles/tensorflow/core/framework/graph.pb.h:145:3: error: \u2018PROTOBUF_DEPRECATED_ATTR\u2019 does not name a type\n   PROTOBUF_DEPRECATED_ATTR ::google::protobuf::int32 version() const;\n   ^\n/home/alpy/tensorflow/bazel-genfiles/tensorflow/core/framework/graph.pb.h:146:3: error: \u2018PROTOBUF_DEPRECATED_ATTR\u2019 does not name a type\n   PROTOBUF_DEPRECATED_ATTR void set_version(::google::protobuf::int32 value);\n   ^\n/home/alpy/tensorflow/bazel-genfiles/tensorflow/core/framework/graph.pb.h:273:37: error: no \u2018void tensorflow::GraphDef::clear_version()\u2019 member function declared in class \u2018tensorflow::GraphDef\u2019\n inline void GraphDef::clear_version() {\n                                     ^\n/home/alpy/tensorflow/bazel-genfiles/tensorflow/core/framework/graph.pb.h:276:54: error: no \u2018google::protobuf::int32 tensorflow::GraphDef::version() const\u2019 member function declared in class \u2018tensorflow::GraphDef\u2019\n inline ::google::protobuf::int32 GraphDef::version() const {\n                                                      ^\n/home/alpy/tensorflow/bazel-genfiles/tensorflow/core/framework/graph.pb.h:280:66: error: no \u2018void tensorflow::GraphDef::set_version(google::protobuf::int32)\u2019 member function declared in class \u2018tensorflow::GraphDef\u2019\n inline void GraphDef::set_version(::google::protobuf::int32 value) {\n</code></pre>\n\n<p>BTW, I loaded protobuf as it was described on the page I linked above.</p>\n"}, {"tags": ["c++", "matrix", "rotation", "angle", "glm-math"], "answers": [{"tags": [], "owner": {"reputation": 4182, "user_id": 2992101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7363e9ce46406af3326492e2f6cf40ca?s=128&d=identicon&r=PG", "display_name": "michalsrb", "link": "https://stackoverflow.com/users/2992101/michalsrb"}, "is_accepted": true, "score": 2, "last_activity_date": 1472652705, "last_edit_date": 1472652705, "creation_date": 1472651575, "answer_id": 39251587, "question_id": 39251412, "link": "https://stackoverflow.com/questions/39251412/get-the-angle-from-a-rotated-matrix-using-glm/39251587#39251587", "title": "Get the angle from a rotated matrix using glm?", "body": "<p>This looks like an identity matrix that was rotated around Z axis. If that's always the case, you can get the angle back by applying <a href=\"https://glm.g-truc.net/0.9.4/api/a00136.html#ga5db83034488156692939acb4f4e46fa6\" rel=\"nofollow\">glm::atan</a> function on the first two elements of the first column:</p>\n\n<pre><code>float get_angle_in_rad(const glm::mat4 &amp;matrix) {\n    return glm::atan(matrix[0][1], matrix[0][0]);\n}\n</code></pre>\n\n<p>See <a href=\"https://en.wikipedia.org/wiki/Rotation_matrix\" rel=\"nofollow\">Rotation matrix</a> for explanation.</p>\n\n<p>Note that if the matrix represents more complicated tranformation than just rotation around Z axis, the value returned by this function will be bogus. Depending on your usecase you may want to keep the euler rotation angles separately, in addition to the transformation matrix.</p>\n"}], "owner": {"reputation": 13, "user_id": 2190126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26f169ba943c1f7169ded7b89e4bae6e?s=128&d=identicon&r=PG", "display_name": "Lastvision", "link": "https://stackoverflow.com/users/2190126/lastvision"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1048, "favorite_count": 0, "accepted_answer_id": 39251587, "answer_count": 1, "score": 1, "last_activity_date": 1497201213, "creation_date": 1472651104, "last_edit_date": 1497201213, "question_id": 39251412, "link": "https://stackoverflow.com/questions/39251412/get-the-angle-from-a-rotated-matrix-using-glm", "title": "Get the angle from a rotated matrix using glm?", "body": "<p>I want to know how to get the angle from a rotated matrix, how do I calculate that? I am using glm c++.</p>\n\n<p>For example\nhow do I get the angle from this matrix using c++?</p>\n\n<pre><code>[-0.01458][-2.26652][0][0]\n[-1.27492][-0.02596][0][0]\n[    0   ][    0   ][1][0]\n[    x   ][    y   ][z][1]\n</code></pre>\n"}, {"tags": ["c++", "autocomplete", "visual-studio-code"], "answers": [{"tags": [], "owner": {"reputation": 4582, "user_id": 109347, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eae52e321196a71d321a3db303ee5fe2?s=128&d=identicon&r=PG&f=1", "display_name": "John Nicholas", "link": "https://stackoverflow.com/users/109347/john-nicholas"}, "is_accepted": true, "score": 1, "last_activity_date": 1472656546, "last_edit_date": 1472656546, "creation_date": 1472655374, "answer_id": 39252970, "question_id": 39251274, "link": "https://stackoverflow.com/questions/39251274/visual-studio-code-is-not-autocompleting-std-in-c-on-ubuntu/39252970#39252970", "title": "visual studio code is not autocompleting std:: in c++ on ubuntu", "body": "<p>Edit: actually this does not fix <code>std::&lt;blah&gt;</code> autocomplete</p>\n\n<p>Appears not to be working atm.</p>\n\n<p>The fix:\nFile=>preferences->Workspace settings</p>\n\n<p>then in user overrides this:</p>\n\n<pre><code>{\n    \"C_Cpp.autocomplete\": \"Disabled\"\n}\n</code></pre>\n\n<p>if you scroll to bottom of the default settings you will see</p>\n\n<pre><code>    // Controls auto completion for C/C++ code.\n'Default' uses an experimental recursive directory tag parser (as of right now).\n'Disabled' uses the word based completion provided by Visual Studio Code.\n    \"C_Cpp.autocomplete\": \"Default\"\n</code></pre>\n\n<p>Found this out when i saw this issue on github:</p>\n\n<p><a href=\"https://github.com/Microsoft/vscode-cpptools/issues/189\" rel=\"nofollow\">https://github.com/Microsoft/vscode-cpptools/issues/189</a></p>\n"}], "owner": {"reputation": 4582, "user_id": 109347, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eae52e321196a71d321a3db303ee5fe2?s=128&d=identicon&r=PG&f=1", "display_name": "John Nicholas", "link": "https://stackoverflow.com/users/109347/john-nicholas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4528, "favorite_count": 0, "accepted_answer_id": 39252970, "answer_count": 1, "score": 2, "last_activity_date": 1472656546, "creation_date": 1472650813, "last_edit_date": 1472655423, "question_id": 39251274, "link": "https://stackoverflow.com/questions/39251274/visual-studio-code-is-not-autocompleting-std-in-c-on-ubuntu", "title": "visual studio code is not autocompleting std:: in c++ on ubuntu", "body": "<p>The behaviour i am looking for is when i type</p>\n\n<p><code>using std::co</code>   then i expect it to autocomplete to cout (or at least suggest)</p>\n\n<p><code>using std::vect</code> then i expect it to autocomplete to vector</p>\n\n<p>I have it set up on my laptop and it works perfectly fine ... it is just on my main vm that it does not. Sadly after a few hours of tinkering and googling not figured it out.</p>\n\n<p>installed c++, build essentials, clang-format-3.8\nvscode, c++ extention and c++ autocomplete.\nnoticed the one that worked had this added to the c_cpp_properties (not that i expected clang to help but was out of other options.)</p>\n\n<pre><code>,\n    \"clang_format\" : {\n        \"style\" : \"file\",\n        \"fallback-style\" : \"LLVM\",\n        \"sort-includes\" : false\n    }\n</code></pre>\n\n<p>I think it is probably a package difference but cannot see where that difference is. I also cannot find the difference in vscode config if there is one.</p>\n\n<p>It also doesn't autocomplete for any included headers.</p>\n\n<p>Infact i do not get autocompletion for <code>using</code> or <code>include</code> either.\nIn the one that doesnt work any autocompletion options i have shows the path into <code>/usr/include/c++/5</code> wheras on the system where it does work i do not get any path info, only an abc icon and the command i want.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1472650918, "post_id": 39251266, "comment_id": 65838241, "body": "What is a <i>dynamic pointer</i>? Undefined reference is a linker error message, did you stich all your object files and libraries together properly?"}, {"owner": {"reputation": 2023, "user_id": 2309279, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b6f77ad82a31d963002374d9287f1397?s=128&d=identicon&r=PG", "display_name": "KostasRim", "link": "https://stackoverflow.com/users/2309279/kostasrim"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1472650940, "post_id": 39251266, "comment_id": 65838253, "body": "@Slava its called B++ and is the predecessor of C++"}, {"owner": {"reputation": 2023, "user_id": 2309279, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b6f77ad82a31d963002374d9287f1397?s=128&d=identicon&r=PG", "display_name": "KostasRim", "link": "https://stackoverflow.com/users/2309279/kostasrim"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1472651012, "post_id": 39251266, "comment_id": 65838296, "body": "@Slava Dude I am kidding!!"}, {"owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "edited": false, "score": 0, "creation_date": 1472651071, "post_id": 39251266, "comment_id": 65838338, "body": "ah... you ate not OP ... overseen that. Got me there"}, {"owner": {"reputation": 59, "user_id": 6739386, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/e1f505f8de6f0b68d253b59ae4bf74f9?s=128&d=identicon&r=PG&f=1", "display_name": "Anmol", "link": "https://stackoverflow.com/users/6739386/anmol"}, "edited": false, "score": 0, "creation_date": 1472651092, "post_id": 39251266, "comment_id": 65838359, "body": "yes I have included  all header files but getting problem with pointer attributes"}, {"owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "edited": false, "score": 0, "creation_date": 1472651117, "post_id": 39251266, "comment_id": 65838383, "body": "Can you add the error message too?"}, {"owner": {"reputation": 2023, "user_id": 2309279, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b6f77ad82a31d963002374d9287f1397?s=128&d=identicon&r=PG", "display_name": "KostasRim", "link": "https://stackoverflow.com/users/2309279/kostasrim"}, "edited": false, "score": 0, "creation_date": 1472651186, "post_id": 39251266, "comment_id": 65838441, "body": "@Anny could you please provide us the header file  ?"}, {"owner": {"reputation": 1101, "user_id": 2367906, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d55426325cd9ba964101cc36d28dedef?s=128&d=identicon&r=PG&f=1", "display_name": "adnan_e", "link": "https://stackoverflow.com/users/2367906/adnan-e"}, "edited": false, "score": 0, "creation_date": 1472651219, "post_id": 39251266, "comment_id": 65838476, "body": "@Anny post your header file for Fall (I assume it&#39;s Fall.h), maybe the function declaration and definition don&#39;t match?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472651233, "post_id": 39251266, "comment_id": 65838491, "body": "@Anny <i>&quot;I have included all header files&quot;</i> common misconception, including the header files isn&#39;t actually enough. You also need to provide all the build artifacts and library dependencies to the linker command line."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 1101, "user_id": 2367906, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d55426325cd9ba964101cc36d28dedef?s=128&d=identicon&r=PG&f=1", "display_name": "adnan_e", "link": "https://stackoverflow.com/users/2367906/adnan-e"}, "edited": false, "score": 0, "creation_date": 1472651274, "post_id": 39251266, "comment_id": 65838530, "body": "@adnan_e if it is does match then it would not compile."}, {"owner": {"reputation": 1101, "user_id": 2367906, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d55426325cd9ba964101cc36d28dedef?s=128&d=identicon&r=PG&f=1", "display_name": "adnan_e", "link": "https://stackoverflow.com/users/2367906/adnan-e"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1472651351, "post_id": 39251266, "comment_id": 65838597, "body": "@Slava If i&#39;m not mistaken, the issue here is that it doesn&#39;t compile (undefined reference might be just one of the errors)"}, {"owner": {"reputation": 59, "user_id": 6739386, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/e1f505f8de6f0b68d253b59ae4bf74f9?s=128&d=identicon&r=PG&f=1", "display_name": "Anmol", "link": "https://stackoverflow.com/users/6739386/anmol"}, "edited": false, "score": 0, "creation_date": 1472651380, "post_id": 39251266, "comment_id": 65838621, "body": "following are my header file already defined  #include &quot;flyingUnit.h&quot; #include &quot;fall.h&quot; #include &quot;dragon.h&quot; #include &quot;rider.h&quot;"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 1101, "user_id": 2367906, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d55426325cd9ba964101cc36d28dedef?s=128&d=identicon&r=PG&f=1", "display_name": "adnan_e", "link": "https://stackoverflow.com/users/2367906/adnan-e"}, "edited": false, "score": 0, "creation_date": 1472651551, "post_id": 39251266, "comment_id": 65838764, "body": "@adnan_e undefined refernce is a linker error so you cannot see it if it fails to compile."}], "owner": {"reputation": 59, "user_id": 6739386, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/e1f505f8de6f0b68d253b59ae4bf74f9?s=128&d=identicon&r=PG&f=1", "display_name": "Anmol", "link": "https://stackoverflow.com/users/6739386/anmol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "closed_date": 1472651892, "answer_count": 0, "score": 0, "last_activity_date": 1472651061, "creation_date": 1472650781, "last_edit_date": 1472650980, "question_id": 39251266, "link": "https://stackoverflow.com/questions/39251266/dynamic-pointers-passed-as-parameter-cpp", "closed_reason": "Duplicate", "title": "Dynamic pointers passed as parameter cpp", "body": "<p>Hi  I am facing trouble with dynamic pointer's as I am getting undefined refrence error.\nHere is my segmentof code :</p>\n\n<pre><code>void FlyingUnit::addFall( const char* location, int day, int month, int year )\n{\n    if(fallCount &gt;= MAX_FALLS)\n    {\n        cout&lt;&lt;\"Cannot add MAX_FALLS raggiunti \";\n    }\n    else\n    {\n\n        falls[fallCount].setLocation(location); //Dynamic pointer problem\n        falls[fallCount].setDay(day);\n        falls[fallCount].setMonth(month);\n        falls[fallCount].setYear(year);\n        fallCount++;\n    }\n\n}\n\nvoid Fall::setLocation(const char* location)\n{\n    if( this-&gt;location != nullptr )\n    {\n        delete [ ] this-&gt;location;\n    }\n\n    this-&gt;location = new char[ strlen(location)+1 ];\n    strcpy( this-&gt;location, location);  \n}\n</code></pre>\n"}, {"tags": ["c++", "linux", "sockets", "server", "client"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1472651105, "post_id": 39251225, "comment_id": 65838374, "body": "You seem to forget that TCP is a streaming protocol, without message boundaries and where you are not guaranteed to receive all data in a single receive call. You must receive in a loop until you get all data."}], "answers": [{"comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1472712798, "post_id": 39251398, "comment_id": 65864203, "body": "While TCP streams travel over network in packets, it is still a <i>stream</i>, and <code>recv</code> receives a <i>part</i> of that stream. It doesn&#39;t matter if one use <code>read</code> or <code>recv</code>, the data one read in an application is still a stream. This might be seem as nitpicking, but the terminology and its implied semantics is important."}], "tags": [], "owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "is_accepted": false, "score": 1, "last_activity_date": 1472717860, "last_edit_date": 1495541780, "creation_date": 1472651086, "answer_id": 39251398, "question_id": 39251225, "link": "https://stackoverflow.com/questions/39251225/cclient-server-communication-not-all-elements-send-and-received-with-socket/39251398#39251398", "title": "C++:Client Server Communication: not all elements send and received with socket", "body": "<p>TCP streams are transmitted in packets. <code>recv</code> (and <code>read</code>) receive a part of the stream, i.e. the data from one or more packets.</p>\n\n<p>You stop after the first successful <code>recv</code>, but you should instead call it again until there is no more data (or until certain bytes are received - this depends on your <em>protocol</em>* really).</p>\n\n<p>The same applies to <code>send</code>. It returns the number of bytes sent, which can <a href=\"https://stackoverflow.com/questions/12657063/does-send-allways-send-whole-buffer/12657077\">theoretically</a> be less than the amount you wanted to send. You should check how many bytes were sent, and call <code>send</code> again as needed to send the remaining bytes.</p>\n\n<hr>\n\n<p>* By <em>protocol</em> I mean there must be some kind of <strong><em>agreement</em></strong> on how the server and the client communicate.</p>\n\n<p>For example, you could say <em>\"The data shall be transmitted in lines. A line is defined as a sequence of 0 or more characters followed by a '\\n' character.\"</em> In that case your server needs to call <code>recv</code> repeatedly and collect data until it encounters a '\\n' character.</p>\n\n<p>Or you could say <em>\"The data shall be transmitted in logical packets. A packet is defined as 2 bytes in network order, specifying the length of the message, followed by the message (not null-terminated)</em>\". Then you call <code>recv</code>, fetch the message length from the first 2 bytes, and call <code>recv</code> repeatedly if needed to gather that many bytes.</p>\n\n<p>You also need to specify this separately for client->server (request), and server->client (response).</p>\n\n<p>Finally, you specify <em>who</em> (client or server) and <em>when</em> closes the connection.</p>\n"}, {"comments": [{"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1472652123, "post_id": 39251611, "comment_id": 65839188, "body": "That does not change anything. <code>read</code> and <code>recv</code> work the same (if fd is a socket)."}], "tags": [], "owner": {"reputation": 69, "user_id": 6752024, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/03500d72f5e1acf17d941aade8739d37?s=128&d=identicon&r=PG&f=1", "display_name": "AndreStony", "link": "https://stackoverflow.com/users/6752024/andrestony"}, "is_accepted": false, "score": 0, "last_activity_date": 1472651634, "creation_date": 1472651634, "answer_id": 39251611, "question_id": 39251225, "link": "https://stackoverflow.com/questions/39251225/cclient-server-communication-not-all-elements-send-and-received-with-socket/39251611#39251611", "title": "C++:Client Server Communication: not all elements send and received with socket", "body": "<p>sorry it was the wrong codebase:\nthis is the right one:</p>\n\n<pre><code>#include \"ServerSocket.h\"\n#include \"SocketException.h\"\n\nServerSocket::ServerSocket(int port)\n{\n    if (!Socket::create())\n    {\n        throw SocketException(\"Could not create server socket.\");\n    }\n\n    if (!Socket::bind(port))\n    {\n        throw SocketException(\"Could not bind to port.\");\n    }\n\n    if (!Socket::listen())\n    {\n        throw SocketException(\"Could not listen to socket.\");\n    }\n\n}\n\nServerSocket::~ServerSocket()\n{\n}\n\nconst ServerSocket&amp; ServerSocket::operator &lt;&lt;(const std::string&amp; s) const\n{\n    if (!Socket::send(s))\n    {\n        throw SocketException(\"Could not write to socket.\");\n    }\n\n    return *this;\n\n}\n\nconst ServerSocket&amp; ServerSocket::operator &gt;&gt;(std::string&amp; s) const\n{\n    if (!Socket::recv(s))\n    {\n        throw SocketException(\"Could not read from socket.\");\n    }\n\n    return *this;\n}\n\nvoid ServerSocket::accept(ServerSocket&amp; sock)\n{\n    if (!Socket::accept(sock))\n    {\n        throw SocketException(\"Could not accept socket.\");\n    }\n}\n\nconst ServerSocket&amp; ServerSocket::operator &lt;&lt; ( const std::stringstream&amp; ss ) const\n{\n\n    if ( ! Socket::write ( ss ) )\n    {\n      throw SocketException ( \"Could not write stream to socket.\" );\n    }\n\n  return *this;\n\n}\n\n\nconst ServerSocket&amp; ServerSocket::operator &gt;&gt; ( std::stringstream&amp; ss ) const\n{\n\n    if ( ! Socket::read ( ss ) )\n    {\n      throw SocketException ( \"Could not read stream from socket.\" );\n    }\n\n  return *this;\n}\n\n\n\n\n#include \"Socket.h\"\n//#include \"string.h\"\n#include &lt;string.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n\nSocket::Socket() :\n        m_sock(-1)\n{\n\n    memset(&amp;m_addr, 0, sizeof(m_addr));\n\n}\n\nSocket::~Socket()\n{\n    if (is_valid())\n        ::close(m_sock);\n}\n\nbool Socket::create()\n{\n    m_sock = socket( AF_INET,\n    SOCK_STREAM, 0);\n\n    if (!is_valid())\n        return false;\n\n    // TIME_WAIT - argh\n    int on = 1;\n    if (setsockopt(m_sock, SOL_SOCKET, SO_REUSEADDR, (const char*) &amp;on,\n            sizeof(on)) == -1)\n        return false;\n\n    return true;\n\n}\n\nbool Socket::bind(const int port)\n{\n\n    if (!is_valid())\n    {\n        return false;\n    }\n\n    m_addr.sin_family = AF_INET;\n    m_addr.sin_addr.s_addr = INADDR_ANY;\n    m_addr.sin_port = htons(port);\n\n    int bind_return = ::bind(m_sock, (struct sockaddr *) &amp;m_addr,\n            sizeof(m_addr));\n\n    if (bind_return == -1)\n    {\n        return false;\n    }\n\n    return true;\n}\n\nbool Socket::listen() const\n{\n    if (!is_valid())\n    {\n        return false;\n    }\n\n    int listen_return = ::listen(m_sock, MAXCONNECTIONS);\n\n    if (listen_return == -1)\n    {\n        return false;\n    }\n\n    return true;\n}\n\nbool Socket::accept(Socket&amp; new_socket) const\n{\n    int addr_length = sizeof(m_addr);\n    new_socket.m_sock = ::accept(m_sock, (sockaddr *) &amp;m_addr,\n            ( socklen_t *) &amp;addr_length);\n\n    if (new_socket.m_sock &lt;= 0)\n        return false;\n    else\n        return true;\n}\n\nvoid Socket::close()\n{\n    if (is_valid())\n        ::close(m_sock);\n}\n\nbool Socket::send(const std::string s) const\n{\n    std::cout &lt;&lt; \"Socket :: send :: s.size()\\t\" &lt;&lt; s.size() &lt;&lt; std::endl;\n\n    int status = ::send(m_sock, s.c_str(), s.size(), MSG_NOSIGNAL);\n    if (status == -1)\n    {\n        std::cout &lt;&lt; \"Error :: Socket::send\" &lt;&lt; std::endl;\n        return false;\n    }\n    else\n    {\n        return true;\n    }\n}\n\nint Socket::recv(std::string&amp; s) const\n{\n    char buf[MAXRECV + 1];\n\n    s = \"\";\n\n    std::memset(buf, 0, MAXRECV + 1);\n\n    int status = ::recv(m_sock, buf, MAXRECV, 0);\n\n    if (status == -1)\n    {\n        std::cout &lt;&lt; \"status == -1   errno == \" &lt;&lt; errno\n                &lt;&lt; \"  in Socket::recv\\n\";\n        return 0;\n    }\n    else if (status == 0)\n    {\n        return 0;\n    }\n    else\n    {\n        s = buf;\n        return status;\n    }\n}\n\nbool Socket::write(const std::stringstream&amp; ss) const\n{\n    int status = ::write(m_sock, ss.str().c_str(), sizeof(ss));\n    if (status == -1)\n    {\n        return false;\n    }\n    else\n    {\n        return true;\n    }\n}\n\nint Socket::read(std::stringstream&amp; ss) const\n{\n    char buf[MAXRECV + 1];\n    std::string temp;\n\n    std::memset(buf, 0, MAXRECV + 1);\n\n    int status = ::read(m_sock, buf, MAXRECV);\n\n    if (status == -1)\n    {\n        std::cout &lt;&lt; \"status == -1   errno == \" &lt;&lt; errno\n                &lt;&lt; \"  in Socket::read stream\\n\";\n        return 0;\n    }\n    else if (status == 0)\n    {\n        return 0;\n    }\n    else\n    {\n        temp.assign(buf);\n        ss &lt;&lt; temp;\n\n        return status;\n    }\n}\n\nbool Socket::connect(const std::string host, const int port)\n{\n    if (!is_valid())\n        return false;\n\n    m_addr.sin_family = AF_INET;\n    m_addr.sin_port = htons(port);\n\n    int status = inet_pton( AF_INET, host.c_str(), &amp;m_addr.sin_addr);\n\n    if ( errno == EAFNOSUPPORT)\n        return false;\n\n    status = ::connect(m_sock, (sockaddr *) &amp;m_addr, sizeof(m_addr));\n\n    if (status == 0)\n        return true;\n    else\n        return false;\n}\n\nvoid Socket::set_non_blocking(const bool b)\n{\n\n    int opts;\n\n    opts = fcntl(m_sock,\n    F_GETFL);\n\n    if (opts &lt; 0)\n    {\n        return;\n    }\n\n    if (b)\n        opts = (opts | O_NONBLOCK);\n    else\n        opts = (opts &amp; ~O_NONBLOCK);\n\n    fcntl(m_sock,\n    F_SETFL, opts);\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 69, "user_id": 6752024, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/03500d72f5e1acf17d941aade8739d37?s=128&d=identicon&r=PG&f=1", "display_name": "AndreStony", "link": "https://stackoverflow.com/users/6752024/andrestony"}, "is_accepted": false, "score": 0, "last_activity_date": 1472663731, "creation_date": 1472663731, "answer_id": 39255406, "question_id": 39251225, "link": "https://stackoverflow.com/questions/39251225/cclient-server-communication-not-all-elements-send-and-received-with-socket/39255406#39255406", "title": "C++:Client Server Communication: not all elements send and received with socket", "body": "<p>i have modify the write an read method. The write method seems to work. The read method doesnt.</p>\n\n<pre><code>bool Socket::write(const std::stringstream&amp; ss) const\n{\n    int total_bytes_written = 0;\n\n    while (total_bytes_written != 1024)\n    {\n                //  int status = ::write(m_sock, ss.str().c_str(), sizeof(ss));\n        int bytes_written = ::write(m_sock, ss.str().c_str() + total_bytes_written, 500 - total_bytes_written);\n\n        if (bytes_written == -1)\n        {\n            return false;\n        }\n        if(bytes_written == 0)\n        {\n            std::cout &lt;&lt; \"Socket :: write :: 2 :: DONE\" &lt;&lt; std::endl;\n            return true;\n        }\n        std::cout &lt;&lt; \"Socket :: write :: 1 :: ss.str():\\t\" &lt;&lt;ss.str() &lt;&lt; \"\\tsizeof(ss)\\t\"&lt;&lt; sizeof(ss) &lt;&lt; \"\\tss.str().size()\\t\" &lt;&lt; ss.str().size() &lt;&lt;std::endl;\n        total_bytes_written += bytes_written;\n    }\n        return false;\n\n}\n\n\nint Socket::read(std::stringstream&amp; ss) const\n{\n    int MAXRECV = 500;\n    char buf[MAXRECV + 1];\n    std::string temp;\n\n    std::memset(buf, 0, MAXRECV + 1);\n\n    int bytesRead = 0;\n    int result;\n\n    std::cout &lt;&lt; \"Socket :: read :: 1\" &lt;&lt; std::endl;\n    while (bytesRead &lt; MAXRECV)\n    {\n        std::cout &lt;&lt; \"Socket :: read :: 2\" &lt;&lt; std::endl;\n\n        result = ::read(m_sock, buf , MAXRECV );\n        if (result &lt; 1)\n        {\n            std::cout &lt;&lt; \"status == -1   errno == \" &lt;&lt; errno\n                    &lt;&lt; \"  in Socket::read stream\\n\";\n            return 0;\n        }\n        if (result == 0)\n        {\n            std::cout &lt;&lt; \"Socket :: read :: 3 :: DONE\" &lt;&lt; std::endl;\n            return 0;\n        }\n\n\n        bytesRead += result;\n        temp.assign(buf);\n        std::cout &lt;&lt; \"Socket :: read :: 4 :: bytesRead\\t\" &lt;&lt; bytesRead &lt;&lt;\"\\ttemp::\\t\" &lt;&lt; temp &lt;&lt; std::endl;\n        ss &lt;&lt; temp;\n    }\n\n    return result;\n\n}\n</code></pre>\n\n<p>This is the output:</p>\n\n<pre><code>ssInput.str()0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 E|N|D\n\n\nSocket :: write :: 1 :: ss.str():   0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 E|N|D sizeof(ss)  188 ss.str().size() 895\nSocket :: write :: 2 :: DONE\nSocket :: read :: 1\nSocket :: read :: 2\nSocket :: read :: 4 :: bytesRead    500 temp::  0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 15\n\nstreamIn.str()0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 15\n\nstreamOut.str()0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 \nSocket :: write :: 1 :: ss.str():   0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249   sizeof(ss)  188 ss.str().size() 890\nSocket :: write :: 2 :: DONE\nSocket :: read :: 1\nSocket :: read :: 2\nSocket :: read :: 4 :: bytesRead    500 temp::  0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 15\n\nssOut.str()0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 15\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 69, "user_id": 6752024, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/03500d72f5e1acf17d941aade8739d37?s=128&d=identicon&r=PG&f=1", "display_name": "AndreStony", "link": "https://stackoverflow.com/users/6752024/andrestony"}, "is_accepted": false, "score": 0, "last_activity_date": 1472806063, "creation_date": 1472806063, "answer_id": 39288104, "question_id": 39251225, "link": "https://stackoverflow.com/questions/39251225/cclient-server-communication-not-all-elements-send-and-received-with-socket/39288104#39288104", "title": "C++:Client Server Communication: not all elements send and received with socket", "body": "<p>I think now its running:\nAs a separator between every element i used a '|' char and to finish the transmission I check every element, if its contain a \"E-N-D\" string.</p>\n\n<pre><code>bool Socket::write(const std::stringstream&amp; ss) const\n{\n\n    std::string stemp;\n    std::stringstream tempSS;\n    tempSS &lt;&lt; ss.rdbuf();\n\n    do\n    {\n        tempSS &gt;&gt; stemp;\n        stemp+= \"|\";                        // seperator\n\n        int bytes_written = ::write(m_sock, stemp.c_str() , stemp.length() );\n\n        if (bytes_written == -1)\n        {\n            return false;\n        }\n\n    }while(stemp.find(\"E-N-D\") ==  std::string::npos);\n\n    return true;\n\n}\n\n\nint Socket::read(std::stringstream&amp; ss) const\n{\n    std::string stemp;\n\n    int result;\n\n    do\n    {\n        char buf[MAXRECV + 1];\n        std::memset(buf, 0, MAXRECV + 1);\n\n        result = ::read(m_sock, buf , MAXRECV );\n        if (result &lt; 1)\n        {\n            std::cout &lt;&lt; \"status == -1   errno == \" &lt;&lt; errno\n                    &lt;&lt; \"  in Socket::read stream\\n\";\n            return 0;\n        }\n        stemp.assign(buf);\n    }while(stemp.find(\"E-N-D\") ==  std::string::npos);\n\n    return result;\n</code></pre>\n\n<p>Thx for help</p>\n"}], "owner": {"reputation": 69, "user_id": 6752024, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/03500d72f5e1acf17d941aade8739d37?s=128&d=identicon&r=PG&f=1", "display_name": "AndreStony", "link": "https://stackoverflow.com/users/6752024/andrestony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1472806063, "creation_date": 1472650683, "question_id": 39251225, "link": "https://stackoverflow.com/questions/39251225/cclient-server-communication-not-all-elements-send-and-received-with-socket", "title": "C++:Client Server Communication: not all elements send and received with socket", "body": "<p>im playing with some client server examples on a linux system. \nOne of this is form this site: <a href=\"http://tldp.org/LDP/LG/issue74/tougher.html\" rel=\"nofollow\">http://tldp.org/LDP/LG/issue74/tougher.html</a></p>\n\n<p>With this example I send a stringstream to the socket. \nThe problem is, that i dont get all elements of the stringstream on both sides (Server of Cliend). Has someone an idee why not ? </p>\n\n<pre><code>// Definition of the Socket class\n\n#ifndef Socket_class\n#define Socket_class\n\n\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string&gt;\n#include &lt;arpa/inet.h&gt;\n\n\nconst int MAXHOSTNAME = 200;\nconst int MAXCONNECTIONS = 5;\nconst int MAXRECV = 500;\n\nclass Socket\n{\n public:\n  Socket();\n  virtual ~Socket();\n\n  // Server initialization\n  bool create();\n  bool bind ( const int port );\n  bool listen() const;\n  bool accept ( Socket&amp; ) const;\n\n  // Client initialization\n  bool connect ( const std::string host, const int port );\n\n  // Data Transimission\n  bool send ( const std::string ) const;\n  int recv ( std::string&amp; ) const;\n\n\n  void set_non_blocking ( const bool );\n\n  bool is_valid() const { return m_sock != -1; }\n\n private:\n\n  int m_sock;\n  sockaddr_in m_addr;\n\n\n};\n\n\n#endif\n\n\n\n\n// Implementation of the Socket class.\n\n\n#include \"Socket.h\"\n#include \"string.h\"\n#include &lt;string.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;fcntl.h&gt;\n\n\n\nSocket::Socket() :\n  m_sock ( -1 )\n{\n\n  memset ( &amp;m_addr,\n       0,\n       sizeof ( m_addr ) );\n\n}\n\nSocket::~Socket()\n{\n  if ( is_valid() )\n    ::close ( m_sock );\n}\n\nbool Socket::create()\n{\n  m_sock = socket ( AF_INET,\n            SOCK_STREAM,\n            0 );\n\n  if ( ! is_valid() )\n    return false;\n\n\n  // TIME_WAIT - argh\n  int on = 1;\n  if ( setsockopt ( m_sock, SOL_SOCKET, SO_REUSEADDR, ( const char* ) &amp;on, sizeof ( on ) ) == -1 )\n    return false;\n\n\n  return true;\n\n}\n\n\n\nbool Socket::bind ( const int port )\n{\n\n  if ( ! is_valid() )\n    {\n      return false;\n    }\n\n\n\n  m_addr.sin_family = AF_INET;\n  m_addr.sin_addr.s_addr = INADDR_ANY;\n  m_addr.sin_port = htons ( port );\n\n  int bind_return = ::bind ( m_sock,\n                 ( struct sockaddr * ) &amp;m_addr,\n                 sizeof ( m_addr ) );\n\n\n  if ( bind_return == -1 )\n    {\n      return false;\n    }\n\n  return true;\n}\n\n\nbool Socket::listen() const\n{\n  if ( ! is_valid() )\n    {\n      return false;\n    }\n\n  int listen_return = ::listen ( m_sock, MAXCONNECTIONS );\n\n\n  if ( listen_return == -1 )\n    {\n      return false;\n    }\n\n  return true;\n}\n\n\nbool Socket::accept ( Socket&amp; new_socket ) const\n{\n  int addr_length = sizeof ( m_addr );\n  new_socket.m_sock = ::accept ( m_sock, ( sockaddr * ) &amp;m_addr, ( socklen_t * ) &amp;addr_length );\n\n  if ( new_socket.m_sock &lt;= 0 )\n    return false;\n  else\n    return true;\n}\n\n\nbool Socket::send ( const std::string s ) const\n{\n  int status = ::send ( m_sock, s.c_str(), s.size(), MSG_NOSIGNAL );\n  if ( status == -1 )\n    {\n      return false;\n    }\n  else\n    {\n      return true;\n    }\n}\n\n\nint Socket::recv ( std::string&amp; s ) const\n{\n  char buf [ MAXRECV + 1 ];\n\n  s = \"\";\n\n  memset ( buf, 0, MAXRECV + 1 );\n\n  int status = ::recv ( m_sock, buf, MAXRECV, 0 );\n\n  if ( status == -1 )\n    {\n      std::cout &lt;&lt; \"status == -1   errno == \" &lt;&lt; errno &lt;&lt; \"  in Socket::recv\\n\";\n      return 0;\n    }\n  else if ( status == 0 )\n    {\n      return 0;\n    }\n  else\n    {\n      s = buf;\n      return status;\n    }\n}\n\n\n\nbool Socket::connect ( const std::string host, const int port )\n{\n  if ( ! is_valid() ) return false;\n\n  m_addr.sin_family = AF_INET;\n  m_addr.sin_port = htons ( port );\n\n  int status = inet_pton ( AF_INET, host.c_str(), &amp;m_addr.sin_addr );\n\n  if ( errno == EAFNOSUPPORT ) return false;\n\n  status = ::connect ( m_sock, ( sockaddr * ) &amp;m_addr, sizeof ( m_addr ) );\n\n  if ( status == 0 )\n    return true;\n  else\n    return false;\n}\n\nvoid Socket::set_non_blocking ( const bool b )\n{\n\n  int opts;\n\n  opts = fcntl ( m_sock,\n         F_GETFL );\n\n  if ( opts &lt; 0 )\n    {\n      return;\n    }\n\n  if ( b )\n    opts = ( opts | O_NONBLOCK );\n  else\n    opts = ( opts &amp; ~O_NONBLOCK );\n\n  fcntl ( m_sock,\n      F_SETFL,opts );\n\n}\n\n\n\n\n// Definition of the ServerSocket class\n\n#ifndef ServerSocket_class\n#define ServerSocket_class\n\n#include \"Socket.h\"\n\n\nclass ServerSocket : private Socket\n{\n public:\n\n  ServerSocket ( int port );\n  ServerSocket (){};\n  virtual ~ServerSocket();\n\n  const ServerSocket&amp; operator &lt;&lt; ( const std::string&amp; ) const;\n  const ServerSocket&amp; operator &gt;&gt; ( std::string&amp; ) const;\n\n  void accept ( ServerSocket&amp; );\n\n};\n\n\n// Implementation of the ServerSocket class\n\n#include \"ServerSocket.h\"\n#include \"SocketException.h\"\n\n\nServerSocket::ServerSocket ( int port )\n{\n  if ( ! Socket::create() )\n    {\n      throw SocketException ( \"Could not create server socket.\" );\n    }\n\n  if ( ! Socket::bind ( port ) )\n    {\n      throw SocketException ( \"Could not bind to port.\" );\n    }\n\n  if ( ! Socket::listen() )\n    {\n      throw SocketException ( \"Could not listen to socket.\" );\n    }\n\n}\n\nServerSocket::~ServerSocket()\n{\n}\n\n\nconst ServerSocket&amp; ServerSocket::operator &lt;&lt; ( const std::string&amp; s ) const\n{\n  if ( ! Socket::send ( s ) )\n    {\n      throw SocketException ( \"Could not write to socket.\" );\n    }\n\n  return *this;\n\n}\n\n\nconst ServerSocket&amp; ServerSocket::operator &gt;&gt; ( std::string&amp; s ) const\n{\n  if ( ! Socket::recv ( s ) )\n    {\n      throw SocketException ( \"Could not read from socket.\" );\n    }\n\n  return *this;\n}\n\nvoid ServerSocket::accept ( ServerSocket&amp; sock )\n{\n  if ( ! Socket::accept ( sock ) )\n    {\n      throw SocketException ( \"Could not accept socket.\" );\n    }\n}\n\n\n\n    #endif\n\n\n// Definition of the ClientSocket class\n\n#ifndef ClientSocket_class\n#define ClientSocket_class\n\n#include \"Socket.h\"\n\n\nclass ClientSocket : private Socket\n{\n public:\n\n  ClientSocket ( std::string host, int port );\n  virtual ~ClientSocket(){};\n\n  const ClientSocket&amp; operator &lt;&lt; ( const std::string&amp; ) const;\n  const ClientSocket&amp; operator &gt;&gt; ( std::string&amp; ) const;\n\n};\n\n\n#endif\n\n\n// Implementation of the ClientSocket class\n\n#include \"ClientSocket.h\"\n#include \"SocketException.h\"\n\n\nClientSocket::ClientSocket ( std::string host, int port )\n{\n  if ( ! Socket::create() )\n    {\n      throw SocketException ( \"Could not create client socket.\" );\n    }\n\n  if ( ! Socket::connect ( host, port ) )\n    {\n      throw SocketException ( \"Could not bind to port.\" );\n    }\n\n}\n\n\nconst ClientSocket&amp; ClientSocket::operator &lt;&lt; ( const std::string&amp; s ) const\n{\n  if ( ! Socket::send ( s ) )\n    {\n      throw SocketException ( \"Could not write to socket.\" );\n    }\n\n  return *this;\n\n}\n\n\nconst ClientSocket&amp; ClientSocket::operator &gt;&gt; ( std::string&amp; s ) const\n{\n  if ( ! Socket::recv ( s ) )\n    {\n      throw SocketException ( \"Could not read from socket.\" );\n    }\n\n  return *this;\n}\n\n\nint main()\n{\nstd::stringstream streamIn, streamOut;  // stream for server\n    std::stringstream ssInput, ssOut;       // stream for client\n\n    int size = 250;\n\n\n    for(int i=0; i &lt; size; i++)\n    {\n        ssInput &lt;&lt; i &lt;&lt; \" \";\n    }\n\n    std::cout &lt;&lt; \"\\nssInput.str()\" &lt;&lt; ssInput.str() &lt;&lt; std::endl;\n\n    // Create the socket\n    ServerSocket server ( 30000 );\n\n    ClientSocket client_socket ( \"localhost\", 30000 );\n\n    ServerSocket new_sock;\n    server.accept ( new_sock );\n\n    client_socket &lt;&lt; ssInput;\n\n    new_sock &gt;&gt; streamIn;\n\n    std::cout &lt;&lt; \"\\nstreamIn.str()\" &lt;&lt; streamIn.str() &lt;&lt; std::endl;\n\n\n    for(int i=0; i &lt; size; i++)\n    {\n        streamOut &lt;&lt; i &lt;&lt; \" \";\n    }\n\n    std::cout &lt;&lt; \"\\nstreamOut.str()\" &lt;&lt; streamOut.str() &lt;&lt; std::endl;\n\n    new_sock &lt;&lt; streamOut;\n\n\n    client_socket &gt;&gt; ssOut;\n\n\n    std::cout &lt;&lt; \"\\nssOut.str()\" &lt;&lt; ssOut.str() &lt;&lt; std::endl;\n\n}\n</code></pre>\n\n<p>This is the output:</p>\n\n<hr>\n\n<p>ssInput.str()0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 </p>\n\n<p>streamIn.str()0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 </p>\n\n<p>streamOut.str()0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 </p>\n\n<p>ssOut.str()0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 </p>\n\n<hr>\n\n<p>Thx...</p>\n"}, {"tags": ["c++", "macos", "compilation", "static-linking"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1472650825, "post_id": 39251195, "comment_id": 65838164, "body": "<i>&quot;How can this be done?&quot;</i> Use the linker flags."}, {"owner": {"reputation": 787, "user_id": 3419885, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100001500229007/picture?type=large", "display_name": "mbaros", "link": "https://stackoverflow.com/users/3419885/mbaros"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472650942, "post_id": 39251195, "comment_id": 65838256, "body": "can you provide some source to learn about them?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472651078, "post_id": 39251195, "comment_id": 65838347, "body": "Nope! We don&#39;t give recommendations for 3rd party resources here. Please read about <a href=\"http://stackoverflow.com/help/on-topic\">what and how you can ask</a>. But the 1st resource should be the linker manual."}, {"owner": {"reputation": 787, "user_id": 3419885, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100001500229007/picture?type=large", "display_name": "mbaros", "link": "https://stackoverflow.com/users/3419885/mbaros"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472651120, "post_id": 39251195, "comment_id": 65838385, "body": "ok. thanks. I will try to figure out"}], "answers": [{"tags": [], "owner": {"reputation": 787, "user_id": 3419885, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100001500229007/picture?type=large", "display_name": "mbaros", "link": "https://stackoverflow.com/users/3419885/mbaros"}, "is_accepted": true, "score": 1, "last_activity_date": 1472651453, "creation_date": 1472651453, "answer_id": 39251546, "question_id": 39251195, "link": "https://stackoverflow.com/questions/39251195/c-include-frameworks-using-code-or-command-line-options/39251546#39251546", "title": "c++ include frameworks using code or command line options", "body": "<p>For command line option we have to use: <code>-framework frameworkname</code></p>\n"}], "owner": {"reputation": 787, "user_id": 3419885, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100001500229007/picture?type=large", "display_name": "mbaros", "link": "https://stackoverflow.com/users/3419885/mbaros"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 39251546, "answer_count": 1, "score": 1, "last_activity_date": 1472651453, "creation_date": 1472650601, "question_id": 39251195, "link": "https://stackoverflow.com/questions/39251195/c-include-frameworks-using-code-or-command-line-options", "title": "c++ include frameworks using code or command line options", "body": "<p>I want to compile and build a C++ program with clang compiler. (<strong>not</strong> <strong>with</strong> <strong>XCode</strong>).</p>\n\n<p>I want to add built-in OSX frameworks into my code either using some code snippet (like #pragma comment(lib, xxx) for windows built-in libraries) or command line options.</p>\n\n<p>How can this be done?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c++", "opengl", "encryption", "dds-format"], "comments": [{"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 0, "creation_date": 1472652035, "post_id": 39251108, "comment_id": 65839123, "body": "This doesn&#39;t seem like a good idea. First, you need to be sure that the file is encrypted in a block chaining mode that supports decryption in parallel (doing things in parallel is the entire point of a GPU). Then the texture has to be large enough for the overhead of setting up everything on the GPU to be worth the time savings. Additionally, CPUs have dedicated hardware for AES; GPUs don&#39;t."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 1, "creation_date": 1472652338, "post_id": 39251108, "comment_id": 65839345, "body": "@ColonelThirtyTwo: None of those are what he&#39;s asking about. The AES decrpytion and so forth are irrelevant noise. The question is, given a GPU operation that generates compressed texture data (the AES stuff being how it gets generated, which again is not the point), can you store that in an OpenGL texture without copying it back to the CPU? The question is well-focused; just noisy."}, {"owner": {"reputation": 279, "user_id": 4692954, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b6d0a9ac015f25cecdbeeb14c2f1a771?s=128&d=identicon&r=PG&f=1", "display_name": "James Takarashy", "link": "https://stackoverflow.com/users/4692954/james-takarashy"}, "edited": false, "score": 0, "creation_date": 1472652663, "post_id": 39251108, "comment_id": 65839577, "body": "AES encrypts in blocks of 128bit already and solutions like gKrypt (<a href=\"http://gkrypt.com/\" rel=\"nofollow noreferrer\">gkrypt.com</a>) have a huge decompression boost already! The textures I&#39;m using will be of size between  2k to 4k (or even 8k end of this year). But thx for your concerns :)!"}, {"owner": {"reputation": 279, "user_id": 4692954, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b6d0a9ac015f25cecdbeeb14c2f1a771?s=128&d=identicon&r=PG&f=1", "display_name": "James Takarashy", "link": "https://stackoverflow.com/users/4692954/james-takarashy"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1472652883, "post_id": 39251108, "comment_id": 65839733, "body": "@Nicol Bolas Thx you are right I over-noised it a bit ;)"}, {"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1472652960, "post_id": 39251108, "comment_id": 65839779, "body": "@NicolBolas I noticed after I posted my comment. I&#39;ve retracted my close vote, though my concerns about the approach still stand (though I don&#39;t mind being proven wrong)."}, {"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1472655664, "post_id": 39251108, "comment_id": 65841851, "body": "You can&#39;t &quot;load into shared memory&quot; on NVIDIA GPUs, so none of this is going to work."}, {"owner": {"reputation": 279, "user_id": 4692954, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b6d0a9ac015f25cecdbeeb14c2f1a771?s=128&d=identicon&r=PG&f=1", "display_name": "James Takarashy", "link": "https://stackoverflow.com/users/4692954/james-takarashy"}, "reply_to_user": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1472676641, "post_id": 39251108, "comment_id": 65853550, "body": "@talonmies <a href=\"http://www.nvidia.com/content/gtc/documents/1055_gtc09.pdf\" rel=\"nofollow noreferrer\">What Every CUDA Programmer Should Know About OpenGL</a>"}, {"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1472676867, "post_id": 39251108, "comment_id": 65853664, "body": "@JamesTakarashy: Your point being? Shared memory is a high speed local scope scratch space which can&#39;t be accessed from any host side API, be that GL, CUDA, OpenCL or Direct3D. Nowhere is it mentioned in that slide deck you linked to"}], "answers": [{"comments": [{"owner": {"reputation": 279, "user_id": 4692954, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b6d0a9ac015f25cecdbeeb14c2f1a771?s=128&d=identicon&r=PG&f=1", "display_name": "James Takarashy", "link": "https://stackoverflow.com/users/4692954/james-takarashy"}, "edited": false, "score": 0, "creation_date": 1472653070, "post_id": 39251659, "comment_id": 65839865, "body": "Thx a lot! I&#39;m relatively new to CG and after I read about PBOs tonight I will mark your answer according to the outcome of my research ;)"}], "tags": [], "owner": {"reputation": 703, "user_id": 5778900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jh1qL.png?s=128&g=1", "display_name": "pleluron", "link": "https://stackoverflow.com/users/5778900/pleluron"}, "is_accepted": false, "score": 1, "last_activity_date": 1472651791, "creation_date": 1472651791, "answer_id": 39251659, "question_id": 39251108, "link": "https://stackoverflow.com/questions/39251108/how-to-upload-dxt5-compressed-pixel-data-generated-from-a-gpu-operation-without/39251659#39251659", "title": "How to upload DXT5 compressed pixel data generated from a GPU operation without a CPU copy?", "body": "<p>Bind your buffer to <code>GL_PIXEL_UNPACK_BUFFER</code> and call <code>glCompressedTexSubImage2D</code> with <code>data</code> being an offset into the buffer.</p>\n\n<p>Read more about PBO <a href=\"https://www.opengl.org/wiki/Pixel_Buffer_Object\" rel=\"nofollow\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": true, "score": 3, "last_activity_date": 1472652819, "creation_date": 1472652819, "answer_id": 39252039, "question_id": 39251108, "link": "https://stackoverflow.com/questions/39251108/how-to-upload-dxt5-compressed-pixel-data-generated-from-a-gpu-operation-without/39252039#39252039", "title": "How to upload DXT5 compressed pixel data generated from a GPU operation without a CPU copy?", "body": "<p>You need to do two things.</p>\n\n<p>First, you must ensure synchronization and visibility for the operation that generates this data. If you're using a <a href=\"https://www.opengl.org/wiki/Compute_Shader\" rel=\"nofollow\">compute shader</a> to generate the data into an SSBO, buffer texture, or whatever, then you'll need to use <code>glMemoryBarrier</code>, with the <code>GL_PIXEL_BUFFER_BARRIER_BIT</code> set. If you're generating this data via a rendering operation to a buffer texture, then you won't need an explicit barrier. But if the FS is writing to an SSBO or via image load/store, you'll still need the explicit barrier as described above.</p>\n\n<p>If you're using OpenCL, then you'll have to employ OpenCL's OpenGL interop functionality to make the result of the CL operation visible to GL.</p>\n\n<p>Once that's done, you just use the buffer as a pixel unpack buffer, just as you would for any <a href=\"https://www.opengl.org/wiki/Pixel_Buffer_Object\" rel=\"nofollow\">asynchronous pixel transfer operation</a>. Compressed textures work with <code>GL_PIXEL_UNPACK_BUFFER</code> just like uncompressed ones.</p>\n\n<p>Remember: in OpenGL, all buffer objects are <em>the same</em>. OpenGL doesn't care if you use a buffer as an SSBO one minute, then use it for pixel transfers the next. As long as you synchronize it, everything is fine.</p>\n"}], "owner": {"reputation": 279, "user_id": 4692954, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b6d0a9ac015f25cecdbeeb14c2f1a771?s=128&d=identicon&r=PG&f=1", "display_name": "James Takarashy", "link": "https://stackoverflow.com/users/4692954/james-takarashy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 532, "favorite_count": 0, "accepted_answer_id": 39252039, "answer_count": 2, "score": 5, "last_activity_date": 1472712717, "creation_date": 1472650380, "last_edit_date": 1472712717, "question_id": 39251108, "link": "https://stackoverflow.com/questions/39251108/how-to-upload-dxt5-compressed-pixel-data-generated-from-a-gpu-operation-without", "title": "How to upload DXT5 compressed pixel data generated from a GPU operation without a CPU copy?", "body": "<p>So what I want to do is:</p>\n\n<ol>\n<li><p>Load a file encrypted with any algorithm (in my case AES-256) into GPU memory (with CUDA).</p></li>\n<li><p>Decrypt the file with all the GPU parallel awesomeness we have right now and let it stay in GPU memory.</p></li>\n<li><p>Now tell OpenGL (4.3) that there is a texture in memory that needs to be read and decompressed from DDS DXT5.</p></li>\n</ol>\n\n<p>Point 3 is where I have my doubts. Since to load a compressed DDS DXT5 in OpenGL one has to call openGL::glCompressedTexImage[+ 2D|3D|2DARB...] with the compression type (GL_COMPRESSED_RGBA_S3TC_DXT5_EXT) and a pointer to the image data buffer.</p>\n\n<p>So, to make it short -> is there a way to pass a texture buffer address already in GPU memory to OpenGL (in DDS format)? Without this option, I would need to transfer the AES decrypted file back to the CPU and tell OpenGL to load it again into the GPU....</p>\n\n<p>Many thanks for any help or short examples ;)</p>\n"}, {"tags": ["c++", "macos", "gdb", "lldb"], "answers": [{"tags": [], "owner": {"reputation": 832, "user_id": 6604750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d6cf5dd410b365b6c422526940d7018?s=128&d=identicon&r=PG&f=1", "display_name": "VortixDev", "link": "https://stackoverflow.com/users/6604750/vortixdev"}, "is_accepted": true, "score": 1, "last_activity_date": 1472650595, "creation_date": 1472650595, "answer_id": 39251189, "question_id": 39251084, "link": "https://stackoverflow.com/questions/39251084/what-is-the-equivalent-of-gdbs-define-in-lldb/39251189#39251189", "title": "What is the equivalent of GDB&#39;s \u201cdefine\u201d in LLDB?", "body": "<p>From <a href=\"http://lldb.llvm.org/tutorial.html\" rel=\"nofollow\">http://lldb.llvm.org/tutorial.html</a>:</p>\n\n<blockquote>\n  <p>lldb also has a built-in Python interpreter, which is accessible by the \"script\" command. All the functionality of the debugger is available as classes in the Python interpreter, so the more complex commands that in gdb you would introduce with the \"define\" command can be done by writing Python functions using the lldb-Python library, then loading the scripts into your running session and accessing them with the \"script\" command.</p>\n</blockquote>\n"}], "owner": {"reputation": 373, "user_id": 2380652, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/vtlov.jpg?s=128&g=1", "display_name": "Anthony", "link": "https://stackoverflow.com/users/2380652/anthony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 500, "favorite_count": 0, "accepted_answer_id": 39251189, "answer_count": 1, "score": 1, "last_activity_date": 1472650595, "creation_date": 1472650332, "question_id": 39251084, "link": "https://stackoverflow.com/questions/39251084/what-is-the-equivalent-of-gdbs-define-in-lldb", "title": "What is the equivalent of GDB&#39;s \u201cdefine\u201d in LLDB?", "body": "<p>I would like to define a LLDB function that runs 2 commands at the same time (for instance, print variable value and go to next line). Debugging C code using GDB I would do this:</p>\n\n<pre><code>(gdb) def f\nType commands for definition of \"f\".\nEnd with a line saying just \"end\".\n&gt;p i\n&gt;n\n&gt;end\n(gdb) f\n</code></pre>\n\n<p>But trying the same with LLDB doesn't work:</p>\n\n<pre><code>(lldb) def f\nerror: 'def' is not a valid command.\nerror: Unrecognized command 'def'.\n</code></pre>\n\n<p>Is there a way to do it?</p>\n"}, {"tags": ["c++", "multithreading", "visual-studio", "qt", "visual-c++"], "comments": [{"owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "edited": false, "score": 1, "creation_date": 1472650409, "post_id": 39250966, "comment_id": 65837884, "body": "If you don&#39;t use &quot;packed classes&quot; you should be OK to use them. Packed classes is where you manipulate the struct alignment. If you don&#39;t change anything here you are probably just fine."}, {"owner": {"reputation": 1717, "user_id": 4564882, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d39ad747c8eba409dcb02c386570fc6a?s=128&d=identicon&r=PG&f=1", "display_name": "ProEns08", "link": "https://stackoverflow.com/users/4564882/proens08"}, "reply_to_user": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "edited": false, "score": 0, "creation_date": 1472650496, "post_id": 39250966, "comment_id": 65837954, "body": "@Hayt: thanks, +1. You can write a complete answer. I will upvote it."}], "answers": [{"comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1472656461, "post_id": 39251249, "comment_id": 65842411, "body": "Actually, packed classes are just one of the examples that could cause a failure. Therefore, avoiding packed classes is necessary but not sufficient."}], "tags": [], "owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "is_accepted": false, "score": 2, "last_activity_date": 1472650743, "last_edit_date": 1495535351, "creation_date": 1472650743, "answer_id": 39251249, "question_id": 39250966, "link": "https://stackoverflow.com/questions/39250966/could-qt-synchronisation-classes-be-used-with-msvc-compiler/39251249#39251249", "title": "Could Qt Synchronisation classes be used with MSVC compiler", "body": "<p>It should not be an issue if you don't use packed classes (if you don't know what that is you are likely not to be using them).</p>\n\n<p>See here for some information about what they are: <a href=\"https://stackoverflow.com/questions/4177346/class-contiguous-data\">Class contiguous data</a></p>\n"}, {"comments": [{"owner": {"reputation": 1717, "user_id": 4564882, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d39ad747c8eba409dcb02c386570fc6a?s=128&d=identicon&r=PG&f=1", "display_name": "ProEns08", "link": "https://stackoverflow.com/users/4564882/proens08"}, "edited": false, "score": 0, "creation_date": 1472658298, "post_id": 39253516, "comment_id": 65843650, "body": "More complete answer, +1.I should tick this as the answer."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 1717, "user_id": 4564882, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d39ad747c8eba409dcb02c386570fc6a?s=128&d=identicon&r=PG&f=1", "display_name": "ProEns08", "link": "https://stackoverflow.com/users/4564882/proens08"}, "edited": false, "score": 0, "creation_date": 1472661641, "post_id": 39253516, "comment_id": 65845485, "body": "@ProEns08 You don&#39;t really need to comment on your upvotes etc."}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": true, "score": 2, "last_activity_date": 1472657102, "creation_date": 1472657102, "answer_id": 39253516, "question_id": 39250966, "link": "https://stackoverflow.com/questions/39250966/could-qt-synchronisation-classes-be-used-with-msvc-compiler/39253516#39253516", "title": "Could Qt Synchronisation classes be used with MSVC compiler", "body": "<p><em>Alignment</em> refers to a restriction on the addresses of objects of certain types. For the compilers supported by Qt, there's just one sort of alignment restriction: some addresses <em>should</em> be a multiple of 2,4 or 8.</p>\n\n<p>There are a few ways in which this restriction can be violated. In a packed class, when you have a <code>float</code> followed by a <code>char</code> followed by another <code>float</code> there will be no gaps between the three members (that's why they're called packed). As a result, the second <code>float</code> has an address that's 5 higher than the first. It's fairly obvious that one of the two addresses is not a multiple of 4 (the alignment of <code>float</code>). </p>\n\n<p>Another way in which this can occur is casting a random <code>char*</code> to <code>float*</code>. The last two bits of the <code>char*</code> <em>should</em> be zero in this case.</p>\n\n<p>MSVC++ can deal with such <em>unaligned</em> data (it's just slightly slower), but it does so by having the CPU load the data in two operations. This breaks Qt's synchronization which assumes that data is loaded in one operation, such that you get either an old or a new value. If the load is split in two operations, the first may see an old value and the second a new value. The result is that the register contains a mix of old and new bits (!)</p>\n"}, {"comments": [{"owner": {"reputation": 1717, "user_id": 4564882, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d39ad747c8eba409dcb02c386570fc6a?s=128&d=identicon&r=PG&f=1", "display_name": "ProEns08", "link": "https://stackoverflow.com/users/4564882/proens08"}, "edited": false, "score": 0, "creation_date": 1472661131, "post_id": 39254697, "comment_id": 65845226, "body": "could you explain more the cause for this. Why did you affirm that. Especially that the documentation is edited and revised by Qt developers themselves."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 1717, "user_id": 4564882, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d39ad747c8eba409dcb02c386570fc6a?s=128&d=identicon&r=PG&f=1", "display_name": "ProEns08", "link": "https://stackoverflow.com/users/4564882/proens08"}, "edited": false, "score": 0, "creation_date": 1472661261, "post_id": 39254697, "comment_id": 65845289, "body": "The cause is very, very simple: nobody bothered to submit a fix to the documentation. Qt developers aren&#39;t some divine entity with unlimited time and resources. No documentation is perfect."}, {"owner": {"reputation": 1717, "user_id": 4564882, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d39ad747c8eba409dcb02c386570fc6a?s=128&d=identicon&r=PG&f=1", "display_name": "ProEns08", "link": "https://stackoverflow.com/users/4564882/proens08"}, "edited": false, "score": 0, "creation_date": 1472661380, "post_id": 39254697, "comment_id": 65845357, "body": "I upvoted your answer. To tick it as the answer, Your answer should be affirmed by Qt itself."}, {"owner": {"reputation": 1717, "user_id": 4564882, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d39ad747c8eba409dcb02c386570fc6a?s=128&d=identicon&r=PG&f=1", "display_name": "ProEns08", "link": "https://stackoverflow.com/users/4564882/proens08"}, "edited": false, "score": 0, "creation_date": 1472661423, "post_id": 39254697, "comment_id": 65845375, "body": "Why did you say that MSVC is a red herring. I did not understand this expression."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 1717, "user_id": 4564882, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d39ad747c8eba409dcb02c386570fc6a?s=128&d=identicon&r=PG&f=1", "display_name": "ProEns08", "link": "https://stackoverflow.com/users/4564882/proens08"}, "edited": false, "score": 0, "creation_date": 1472661593, "post_id": 39254697, "comment_id": 65845468, "body": "red herring means &quot;something, especially a clue, that is or is intended to be misleading or distracting&quot;"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 1717, "user_id": 4564882, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d39ad747c8eba409dcb02c386570fc6a?s=128&d=identicon&r=PG&f=1", "display_name": "ProEns08", "link": "https://stackoverflow.com/users/4564882/proens08"}, "edited": false, "score": 1, "creation_date": 1472661695, "post_id": 39254697, "comment_id": 65845515, "body": "&quot;Your answer should be affirmed by Qt itself.&quot; Haha. You can test it yourself. It&#39;s not hard. You don&#39;t have to trust me, or Qt developers either!"}, {"owner": {"reputation": 1717, "user_id": 4564882, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d39ad747c8eba409dcb02c386570fc6a?s=128&d=identicon&r=PG&f=1", "display_name": "ProEns08", "link": "https://stackoverflow.com/users/4564882/proens08"}, "edited": false, "score": 0, "creation_date": 1472662416, "post_id": 39254697, "comment_id": 65845869, "body": "Did you mean that Qt documentation editor put this false information premeditated?"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 1717, "user_id": 4564882, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d39ad747c8eba409dcb02c386570fc6a?s=128&d=identicon&r=PG&f=1", "display_name": "ProEns08", "link": "https://stackoverflow.com/users/4564882/proens08"}, "edited": false, "score": 1, "creation_date": 1472672367, "post_id": 39254697, "comment_id": 65851411, "body": "Not at all. I mean that appeal to authority is unnecessary. If you&#39;re seeking truth, you don&#39;t need to trust neither documentation nor me. Trust experimental results and machine code."}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1472660947, "creation_date": 1472660947, "answer_id": 39254697, "question_id": 39250966, "link": "https://stackoverflow.com/questions/39250966/could-qt-synchronisation-classes-be-used-with-msvc-compiler/39254697#39254697", "title": "Could Qt Synchronisation classes be used with MSVC compiler", "body": "<p>You're facing a documentation bug, with following fix:</p>\n\n<blockquote>\n  <p>Note: Qt's synchronization classes rely on the use of properly aligned pointers. For instance, you cannot use t&#x332;h&#x332;e&#x332;m&#x332; i&#x332;n&#x332; packed classes <strike>with MSVC</strike>.</p>\n</blockquote>\n\n<p>MSVC is a red herring. Qt's synchronization classes don't work with packed structures period, on all platforms Qt is supported on - since all these platforms support packed structures, and know how to access unaligned members of such structures.</p>\n"}], "owner": {"reputation": 1717, "user_id": 4564882, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d39ad747c8eba409dcb02c386570fc6a?s=128&d=identicon&r=PG&f=1", "display_name": "ProEns08", "link": "https://stackoverflow.com/users/4564882/proens08"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 1, "accepted_answer_id": 39253516, "answer_count": 3, "score": 1, "last_activity_date": 1472660947, "creation_date": 1472650043, "last_edit_date": 1472650368, "question_id": 39250966, "link": "https://stackoverflow.com/questions/39250966/could-qt-synchronisation-classes-be-used-with-msvc-compiler", "title": "Could Qt Synchronisation classes be used with MSVC compiler", "body": "<p>In the Qt Synchronizing threads documentation listed here:</p>\n\n<p><a href=\"http://doc.qt.io/qt-5/threads-synchronizing.html\" rel=\"nofollow\">http://doc.qt.io/qt-5/threads-synchronizing.html</a></p>\n\n<p>They wrote:</p>\n\n<blockquote>\n  <p>Note: Qt's synchronization classes rely on the use of properly aligned pointers. For instance, you cannot use packed classes with MSVC.</p>\n</blockquote>\n\n<p>The sentence is not clear. </p>\n\n<p>Which are the limitations of using Qt Synchronization classes with MSVC  compiler?</p>\n"}, {"tags": ["c++", "unix", "fork"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1472650113, "post_id": 39250951, "comment_id": 65837645, "body": "With a <code>fork()</code> call the whole process environment will be duplicated, so you can&#39;t share any information between the processes using a global variable. You need IPC as with any other situations where processes communicate with each other."}, {"owner": {"reputation": 33092, "user_id": 5801661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D8ENZ.jpg?s=128&g=1", "display_name": "Margaret Bloom", "link": "https://stackoverflow.com/users/5801661/margaret-bloom"}, "edited": false, "score": 0, "creation_date": 1472650154, "post_id": 39250951, "comment_id": 65837671, "body": "Also <code>glob_var</code> is a pointer."}, {"owner": {"reputation": 32382, "user_id": 587803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7431a850a166ca3a648141c532aa9d0?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/587803/ben"}, "edited": false, "score": 0, "creation_date": 1472650416, "post_id": 39250951, "comment_id": 65837887, "body": "Use the STDIN and STDOUT"}, {"owner": {"reputation": 733, "user_id": 2660835, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/50fe2a61123a66aaf71cc269d11a4005?s=128&d=identicon&r=PG", "display_name": "Damian", "link": "https://stackoverflow.com/users/2660835/damian"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472650429, "post_id": 39250951, "comment_id": 65837897, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 what is an IPC, also i know that <code>fork()</code> creates a copy, i just need a solution, like passing the address of the ip array, or something, i don&#39;t know"}, {"owner": {"reputation": 733, "user_id": 2660835, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/50fe2a61123a66aaf71cc269d11a4005?s=128&d=identicon&r=PG", "display_name": "Damian", "link": "https://stackoverflow.com/users/2660835/damian"}, "reply_to_user": {"reputation": 32382, "user_id": 587803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7431a850a166ca3a648141c532aa9d0?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/587803/ben"}, "edited": false, "score": 0, "creation_date": 1472650465, "post_id": 39250951, "comment_id": 65837924, "body": "@Ben what are STDIN and STDOUT and how can i use them?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1472650658, "post_id": 39250951, "comment_id": 65838055, "body": "@Damian IPC is short for interprocess communication, like e.g. instantiating a ` pipe()`  between parent and child process. <i>&quot;... like passing the address of the ip array ...&quot;</i> Passing addresses between processes won&#39;t work, because as mentioned they don&#39;t share the same address space actually."}, {"owner": {"reputation": 32382, "user_id": 587803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7431a850a166ca3a648141c532aa9d0?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/587803/ben"}, "edited": false, "score": 0, "creation_date": 1472659646, "post_id": 39250951, "comment_id": 65844459, "body": "Try <code>popen</code> to solve your problem: <a href=\"http://stackoverflow.com/questions/19087772/getting-the-output-of-external-program-to-c-code/19087847#19087847\" title=\"getting the output of external program to c code\">stackoverflow.com/questions/19087772/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 733, "user_id": 2660835, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/50fe2a61123a66aaf71cc269d11a4005?s=128&d=identicon&r=PG", "display_name": "Damian", "link": "https://stackoverflow.com/users/2660835/damian"}, "edited": false, "score": 0, "creation_date": 1472650367, "post_id": 39251048, "comment_id": 65837846, "body": "i can&#39;t use threads, sorry, only fork(), and know that forks make a copy of the program ... i just need a solution, like passing the address of the ip array, or something, i don&#39;t know"}, {"owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "reply_to_user": {"reputation": 733, "user_id": 2660835, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/50fe2a61123a66aaf71cc269d11a4005?s=128&d=identicon&r=PG", "display_name": "Damian", "link": "https://stackoverflow.com/users/2660835/damian"}, "edited": false, "score": 0, "creation_date": 1472650532, "post_id": 39251048, "comment_id": 65837980, "body": "shared memory is what you want. You cannot pass the address of memory in one program to the other. Shared memory is a block of memory explicitly meant to be shared by processes."}, {"owner": {"reputation": 733, "user_id": 2660835, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/50fe2a61123a66aaf71cc269d11a4005?s=128&d=identicon&r=PG", "display_name": "Damian", "link": "https://stackoverflow.com/users/2660835/damian"}, "edited": false, "score": 0, "creation_date": 1472650642, "post_id": 39251048, "comment_id": 65838045, "body": "can i store like 10 MB there? i mean a list of 100.000 ips may take like 2MB of memory, what do you think?"}, {"owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "reply_to_user": {"reputation": 733, "user_id": 2660835, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/50fe2a61123a66aaf71cc269d11a4005?s=128&d=identicon&r=PG", "display_name": "Damian", "link": "https://stackoverflow.com/users/2660835/damian"}, "edited": false, "score": 0, "creation_date": 1472650802, "post_id": 39251048, "comment_id": 65838135, "body": "The maximum shared memory size can be query&#39;d and also changed if it is too low. see <a href=\"http://stackoverflow.com/questions/10991111/max-possible-shared-memory-size-in-64-bit-linux-machine\" title=\"max possible shared memory size in 64 bit linux machine\">stackoverflow.com/questions/10991111/&hellip;</a>"}, {"owner": {"reputation": 5988, "user_id": 1989995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c6513dc6e38a1f5e1da198fda245b055?s=128&d=identicon&r=PG", "display_name": "alexeykuzmin0", "link": "https://stackoverflow.com/users/1989995/alexeykuzmin0"}, "reply_to_user": {"reputation": 733, "user_id": 2660835, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/50fe2a61123a66aaf71cc269d11a4005?s=128&d=identicon&r=PG", "display_name": "Damian", "link": "https://stackoverflow.com/users/2660835/damian"}, "edited": false, "score": 0, "creation_date": 1472651040, "post_id": 39251048, "comment_id": 65838315, "body": "@Damian If you need just to pass data one way, probably it&#39;s easier to use pipes instead of shared memory"}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 733, "user_id": 2660835, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/50fe2a61123a66aaf71cc269d11a4005?s=128&d=identicon&r=PG", "display_name": "Damian", "link": "https://stackoverflow.com/users/2660835/damian"}, "edited": false, "score": 0, "creation_date": 1472719218, "post_id": 39251048, "comment_id": 65867984, "body": "@Damian, the only way to share memory is with shared memory.  Even if you pass a pointer, the pointer you pass means a different thing (your array copy) than in the other process (the other process&#39; copy of the array)  (2Mb is perfectly valid to be shared, even 1Gb or more)"}], "tags": [], "owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "is_accepted": false, "score": 0, "last_activity_date": 1472650242, "last_edit_date": 1495541779, "creation_date": 1472650242, "answer_id": 39251048, "question_id": 39250951, "link": "https://stackoverflow.com/questions/39250951/global-variable-in-fork-child-process/39251048#39251048", "title": "Global variable in fork() child process", "body": "<p>A fork duplicates the memory. So when you store the variable it is different memory from the parent process.</p>\n\n<p>If you can use threads you can have the behavior where you share a global variable (because threads share memory).</p>\n\n<p>Or if you have to fork you can look at </p>\n\n<p><a href=\"https://stackoverflow.com/questions/5656530/how-to-use-shared-memory-with-linux-in-c\">How to use shared memory with Linux in C</a> </p>\n\n<p>for shared memory usage or have a look at the boost version:</p>\n\n<p><a href=\"http://www.boost.org/doc/libs/1_60_0/doc/html/interprocess/sharedmemorybetweenprocesses.html#interprocess.sharedmemorybetweenprocesses.sharedmemory\" rel=\"nofollow noreferrer\">http://www.boost.org/doc/libs/1_60_0/doc/html/interprocess/sharedmemorybetweenprocesses.html#interprocess.sharedmemorybetweenprocesses.sharedmemory</a></p>\n"}], "owner": {"reputation": 733, "user_id": 2660835, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/50fe2a61123a66aaf71cc269d11a4005?s=128&d=identicon&r=PG", "display_name": "Damian", "link": "https://stackoverflow.com/users/2660835/damian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1600, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1472650342, "creation_date": 1472649997, "last_edit_date": 1472650342, "question_id": 39250951, "link": "https://stackoverflow.com/questions/39250951/global-variable-in-fork-child-process", "title": "Global variable in fork() child process", "body": "<p>I have encountered an issue when trying to make a duplicate check function. </p>\n\n<p><strong>The main objective is to store data from child process (based on the check() function result that returns true or false) to parent process.</strong> I already tried global variables but didn't work.</p>\n\n<p>This is my code :</p>\n\n<pre><code>...\n\nfor(j=0; j&lt;indIP; j++)\n{\n    fflush(stdout);\n    if (!(fork()))\n    {\n        char* this_ip = strdup(ip[j]);\n        if(is_duplicate_check(this_ip,\"file1\"))\n        {\n            if(debugLevel &gt;= 2) printf(\"Duplicate IP %s\\n\", this_ip);\n        }\n        else if( is_duplicate_check(this_ip,\"file2\"))\n        {\n            if(debugLevel &gt;= 2) printf(\"Duplicate IP %s\\n\",this_ip);\n        }\n        else\n        {\n            if(debugLevel &gt;= 2) printf(\"Checking IP [%d of %d] -&gt; [%s]\\n\",current_combo,possible_combinations,ip[j]);                       \n            checkauth(this_ip);\n        }\n\n        exit(0);\n    }\n    else\n    {\n        numforks++;\n        current_combo += trys;                  \n        if (current_combo &gt; possible_combinations)\n        {\n            break;\n        }\n\n        if (numforks &gt;= maxf)\n        {\n            wait(NULL);\n            numforks--;\n        }\n    }\n\n    indInterface++;\n    if(indInterface&gt;=countInterface) indInterface=0;\n}\n\nputs(\"Finalizing...\");\nwhile(numforks&gt;0)\n{\n    printf(\"Waiting for the child processes [%d] are finished ....\\n\", numforks);\n    wait(NULL);\n    numforks--;\n}\nputs(\"Script completed!\");\nreturn 0;\n\n...\n</code></pre>\n\n<p>In short the program reads ips from a text file and checks them if they are a certain GEO CODE location. The <code>is_duplicate_check</code> checks if the ip was not already checked, but it is working by storing ips to <code>file1</code> and <code>file2</code>, and when it arrives on 100.000 records it is making a lot of load.</p>\n\n<p>Now all i want is to store ips from child process in an array and check before calling <code>check()</code> function or not.</p>\n\n<p>I already tried with</p>\n\n<pre><code>static int *glob_var;\nglob_var = (int *) mmap(NULL, sizeof *glob_var, PROT_READ | PROT_WRITE, MAP_SHARED | MAP_ANONYMOUS, -1, 0);\n\n\nglob_var++;\nprintf(\"glob_var = [%d]\\n\",glob_var);\n</code></pre>\n\n<p>allways gives me something like (-1232557773525 ...), no use.</p>\n\n<p>How can i solve this?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 52450, "user_id": 1498580, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7d5410ef5f5fe837842a8b35aab9831?s=128&d=identicon&r=PG", "display_name": "ForEveR", "link": "https://stackoverflow.com/users/1498580/forever"}, "edited": false, "score": 1, "creation_date": 1472649969, "post_id": 39250909, "comment_id": 65837551, "body": "Just use std::string instead of char*."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1472649971, "post_id": 39250909, "comment_id": 65837553, "body": "Stop using <code>char*</code> for strings and start using <code>std::string</code>."}, {"owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 0, "creation_date": 1472650072, "post_id": 39250909, "comment_id": 65837617, "body": "Also, you forget to put null terminating character, which can result of undefined behavior"}, {"owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 0, "creation_date": 1472650215, "post_id": 39250909, "comment_id": 65837713, "body": "And why a map, instead of vector or list ?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1472650431, "post_id": 39250909, "comment_id": 65837899, "body": "This should <a href=\"http://coliru.stacked-crooked.com/a/210bdb6f7b84771c\" rel=\"nofollow noreferrer\">not even compile</a>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1472651208, "post_id": 39250909, "comment_id": 65838463, "body": "Almost an excellent MCVE :P"}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1472651332, "post_id": 39250909, "comment_id": 65838577, "body": "Is this an io buffer being parsed after the fact to find different components? If you don&#39;t have a null or newline to tell you were the message ends, then you must store the pointer AND length. (or just use the extra memory to store a copy of the message in std::string) As for the pointers being wrong, that&#39;s more like this: x=2; x=5; print x; Why is x 5?"}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1472650260, "post_id": 39251025, "comment_id": 65837746, "body": "<i>What&#39;s happening there is that you change the memory your variable buffer points to</i> That is not correct.  You cannot change where an array &quot;points to&quot;."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1472651256, "post_id": 39251025, "comment_id": 65838519, "body": "@NathanOliver: But you can change the memory, which is being pointed to; that&#39;s how I read it :)"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1472651444, "post_id": 39251025, "comment_id": 65838669, "body": "@LightnessRacesinOrbit I read it that way now.  The first reading to me was was that they where changing the location the array is at.  I guess I was confusing memory with location instead of value."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1472652436, "post_id": 39251025, "comment_id": 65839415, "body": "@NathanOliver: I think the statement could be fairly read both ways, so it was arguably ambiguous."}], "tags": [], "owner": {"reputation": 778, "user_id": 6618289, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1149829745350f27012281268c37c618?s=128&d=identicon&r=PG&f=1", "display_name": "meetaig", "link": "https://stackoverflow.com/users/6618289/meetaig"}, "is_accepted": false, "score": 0, "last_activity_date": 1472650397, "last_edit_date": 1472650397, "creation_date": 1472650210, "answer_id": 39251025, "question_id": 39250909, "link": "https://stackoverflow.com/questions/39250909/how-to-store-the-value-of-a-buffer-in-a-map-and-not-its-reference/39251025#39251025", "title": "How to store the value of a buffer in a map and not its reference?", "body": "<p>What's happening there is that you change the value of the  memory your variable <code>buffer</code> points to. If you want to use <code>char*</code> then you have to allocate new memory for every message. But as some people in the comment mentioned, you can just use the <code>std</code> type <code>std::string</code> to do what you want to do. Then the memory management is done behind the scenes  </p>\n\n<p>edit: changed the phrase at the beginning, because it was ambiguous!</p>\n"}, {"tags": [], "owner": {"reputation": 1733, "user_id": 1013504, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/afa2d53388f97248d1120c657c6bb719?s=128&d=identicon&r=PG", "display_name": "dkg", "link": "https://stackoverflow.com/users/1013504/dkg"}, "is_accepted": false, "score": 9, "last_activity_date": 1472651027, "last_edit_date": 1472651027, "creation_date": 1472650350, "answer_id": 39251092, "question_id": 39250909, "link": "https://stackoverflow.com/questions/39250909/how-to-store-the-value-of-a-buffer-in-a-map-and-not-its-reference/39251092#39251092", "title": "How to store the value of a buffer in a map and not its reference?", "body": "<p>If you declare your map with <code>std::map&lt;int, char *&gt;</code> the second member is just a pointer to a <code>char</code>.</p>\n\n<p>In your code, this pointer points to the first <code>char</code> of your <code>buffer</code> and you add it several times in your <code>map</code> hence you get the same result at the end.</p>\n\n<p>If you want to keep your map with the <code>char*</code> you have to allocate some memory to each entry you will add, and at the end free it.</p>\n\n<p>I advise you to replace your <code>char *</code> by <code>std::string</code> and the manipulations will be way much simpler, as an example :</p>\n\n<pre><code>#include &lt;map&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n\nstd::map&lt;int, std::string&gt; messages;\nmessages[0] = \"hello\";\nmessages[1] = \"how\";\nmessages[2] = \"are\";\nmessages[3] = \"you\";\n\nstd::cout &lt;&lt; messages[0] &lt;&lt; std::endl;\nstd::cout &lt;&lt; messages[1] &lt;&lt; std::endl;\nstd::cout &lt;&lt; messages[2] &lt;&lt; std::endl;\nstd::cout &lt;&lt; messages[3] &lt;&lt; std::endl;\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/a8af4fe9df2f951e\" rel=\"noreferrer\">See on Coliru</a></p>\n"}], "owner": {"reputation": 47, "user_id": 3828657, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2c76dc6bc6d7a637e7ab371e6b0eff62?s=128&d=identicon&r=PG&f=1", "display_name": "user3828657", "link": "https://stackoverflow.com/users/3828657/user3828657"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 646, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1472651193, "creation_date": 1472649901, "last_edit_date": 1472651193, "question_id": 39250909, "link": "https://stackoverflow.com/questions/39250909/how-to-store-the-value-of-a-buffer-in-a-map-and-not-its-reference", "title": "How to store the value of a buffer in a map and not its reference?", "body": "<p>I have a UDP server which gets messages in a buffer, that I would like to store like a mailbox. For this, I would like to create either a vector or a map that could hold these incoming messages, but the value of my map or vector keeps pointing to the current value of the buffer.</p>\n\n<p>How do I get the values properly stored in a map or vector?</p>\n\n<p>To demonstrate my issue, I've written a simple static example which represents what happens in my script:</p>\n\n<pre><code>#include &lt;map&gt;\n#include &lt;iostream&gt;\n\nint main(int argc, char const *argv[])\n{\n    char buffer[65535];\n    std::map&lt;int, char *&gt; messages;\n\n    buffer = {'h','e','l','l','o'};\n    messages[0] = buffer;\n\n    buffer = {'h','o','w'};\n    messages[1] = buffer;\n\n    buffer = {'a','r','e'};\n    messages[2] = buffer;\n\n    buffer = {'y','o','u'};\n    messages[3] = buffer;\n\n    std::cout &lt;&lt; messages[0] &lt;&lt; std::endl;\n    std::cout &lt;&lt; messages[1] &lt;&lt; std::endl;\n    std::cout &lt;&lt; messages[2] &lt;&lt; std::endl;\n    std::cout &lt;&lt; messages[3] &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>The outcome of this is:</p>\n\n<pre><code>you\nyou\nyou\nyou\n</code></pre>\n\n<p>But I would like to get:</p>\n\n<pre><code>hello\nhow\nare\nyou\n</code></pre>\n\n<p>How do I achieve this?</p>\n"}, {"tags": ["c++", "multithreading", "visual-studio", "qt"], "comments": [{"owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "edited": false, "score": 0, "creation_date": 1472649461, "post_id": 39250712, "comment_id": 65837184, "body": "nope. Parallel = multithreading. If you have no multithreading then you cannot do things in parallel."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1472649612, "post_id": 39250712, "comment_id": 65837287, "body": "Voted to close as unclear. Run them in parallel without running them in parallel? Besides, even <i>with</i> threads you can&#39;t guarantee they actually run in parallel. What if you&#39;re on a single-threaded CPU, or if the OS assigns only a single core to your program?"}, {"owner": {"reputation": 1717, "user_id": 4564882, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d39ad747c8eba409dcb02c386570fc6a?s=128&d=identicon&r=PG&f=1", "display_name": "ProEns08", "link": "https://stackoverflow.com/users/4564882/proens08"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1472649822, "post_id": 39250712, "comment_id": 65837441, "body": "@MSalters: You can write a complete answer, I will tick it and upvote it. The problem may be confronted by many Qt users."}, {"owner": {"reputation": 566, "user_id": 5998466, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/LJotP.jpg?s=128&g=1", "display_name": "Bearded Beaver", "link": "https://stackoverflow.com/users/5998466/bearded-beaver"}, "edited": false, "score": 1, "creation_date": 1472650608, "post_id": 39250712, "comment_id": 65838027, "body": "As was mentioned above you can&#39;t run anything in parallel without multithreading. If by &quot;without using multi-threading&quot; you mean &quot;each slot in separate threads but without using and subclassing QThread&quot; there is a very simple solution"}, {"owner": {"reputation": 1717, "user_id": 4564882, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d39ad747c8eba409dcb02c386570fc6a?s=128&d=identicon&r=PG&f=1", "display_name": "ProEns08", "link": "https://stackoverflow.com/users/4564882/proens08"}, "reply_to_user": {"reputation": 566, "user_id": 5998466, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/LJotP.jpg?s=128&g=1", "display_name": "Bearded Beaver", "link": "https://stackoverflow.com/users/5998466/bearded-beaver"}, "edited": false, "score": 0, "creation_date": 1472650675, "post_id": 39250712, "comment_id": 65838065, "body": "@BeardedBeaver: yes this is what I want. I reedeited the question"}, {"owner": {"reputation": 5378, "user_id": 2110683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33179a1918a5d90f47cde062fab10ff4?s=128&d=identicon&r=PG", "display_name": "Dimitry Ernot", "link": "https://stackoverflow.com/users/2110683/dimitry-ernot"}, "edited": false, "score": 0, "creation_date": 1472650840, "post_id": 39250712, "comment_id": 65838178, "body": "Qt Concurrent namespace provides high level API to make multi-threaded programs without using explicitly QThread."}], "answers": [{"comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 1, "creation_date": 1472657511, "post_id": 39251331, "comment_id": 65843112, "body": "Variation: Just have two slots, and one <code>QtConcurrent::run</code> call of <code>slot2</code> at the start of  <code>slot1</code>. Then do the normal work of <code>slot1</code>, and at the end of <code>slot1</code> you call <code>waitForFinished</code> on the future of <code>slot2</code>."}], "tags": [], "owner": {"reputation": 566, "user_id": 5998466, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/LJotP.jpg?s=128&g=1", "display_name": "Bearded Beaver", "link": "https://stackoverflow.com/users/5998466/bearded-beaver"}, "is_accepted": true, "score": 4, "last_activity_date": 1472653272, "last_edit_date": 1472653272, "creation_date": 1472650937, "answer_id": 39251331, "question_id": 39250712, "link": "https://stackoverflow.com/questions/39250712/qt-how-to-run-two-slots-simultaneously-without-explicitly-implementing-threads/39251331#39251331", "title": "Qt- how to run two slots simultaneously without explicitly implementing threads", "body": "<p>You need to connect your signal to <code>slot()</code> and use <code>QtConurrent</code> to do all work</p>\n\n<pre><code>#include &lt;QtConcurrent&gt;\n#include &lt;QFuture&gt;\n...\nvoid MyClass::slot()\n{\n    QFuture &lt;void&gt; future1, future2;\n    future1 = QtConcurrent::run(this,&amp;MyClass::slot1);\n    future2 = QtConcurrent::run(this,&amp;MyClass::slot2);\n    future1.waitForFinished();\n    future2.waitForFinished();\n}\n</code></pre>\n\n<p>You need to use the concurrent module. In the <code>.pro</code> file, add:</p>\n\n<pre><code>QT += concurrent\n</code></pre>\n"}], "owner": {"reputation": 1717, "user_id": 4564882, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d39ad747c8eba409dcb02c386570fc6a?s=128&d=identicon&r=PG&f=1", "display_name": "ProEns08", "link": "https://stackoverflow.com/users/4564882/proens08"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 469, "favorite_count": 0, "accepted_answer_id": 39251331, "answer_count": 1, "score": 0, "last_activity_date": 1472653272, "creation_date": 1472649395, "last_edit_date": 1472650744, "question_id": 39250712, "link": "https://stackoverflow.com/questions/39250712/qt-how-to-run-two-slots-simultaneously-without-explicitly-implementing-threads", "title": "Qt- how to run two slots simultaneously without explicitly implementing threads", "body": "<p>I have two Qt slots that are connected to the same signal.</p>\n\n<p>I must run them in parallel without explicitly using Qt multi-threading.</p>\n\n<p>I searched if Qt has provided a solution to do that impliciltly, But I did not find.</p>\n\n<p>is there any solution to do that in Qt?</p>\n"}, {"tags": ["c++", "template-meta-programming", "sfinae"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1472648996, "post_id": 39250545, "comment_id": 65836863, "body": "Why use a template at all?  You can add overloads and if they call an overload that does not exist it is a compiler error."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1472649098, "post_id": 39250545, "comment_id": 65836931, "body": "@NathanOliver, You can&#39;t overload on the return type of a function. It will result in ambiguity more often than not."}], "answers": [{"tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": false, "score": 3, "last_activity_date": 1472649457, "creation_date": 1472649457, "answer_id": 39250732, "question_id": 39250545, "link": "https://stackoverflow.com/questions/39250545/sfinae-to-make-base-template-always-result-in-error/39250732#39250732", "title": "SFINAE to make base template always result in error", "body": "<p>You can use traits to get a compile time error:</p>\n\n<pre><code>template&lt;typename, typename&gt; struct RetTraits;\n// Enable it for int -&gt; float\ntemplate&lt;&gt; struct RetTraits&lt;int, float&gt; { using type = float; };\n\ntemplate&lt;typename To, typename From&gt;\nusing RetType = typename RetTraits&lt;To, From&gt;::type;\n\ntemplate&lt;typename To, typename From&gt;\nconstexpr RetType&lt;To, From&gt; my_numeric_cast(From f) {\n    return To(f);\n}\n\nint main() {\n    my_numeric_cast&lt;int, float&gt;(42);\n    // This won't compile\n    // my_numeric_cast&lt;int, int&gt;(42);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1472650880, "post_id": 39251165, "comment_id": 65838212, "body": "That was illuminating. I did specialization since it was the textbook example when I learned. Thank you!"}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1472651222, "post_id": 39251165, "comment_id": 65838478, "body": "+1 for I like the use of <code>= delete</code>. Just for I&#39;m curious, is my answer <i>wrong</i> as you mentioned? I was quite sure that it was robust, maybe a bit convoluted and far worse than your, but it is not based on UB. Am I wrong?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 1, "creation_date": 1472651434, "post_id": 39251165, "comment_id": 65838662, "body": "@skypjack nope.  Your template specialization is valid for at least one type.  The rule exists, as far as I can tell, to permit (future iterations of the) C++ language (without breaking changes) or a compiler by itself to do additional checks to validate template code prior to template argument substitution and error out early.  Anything that would make the code invalid for <i>all</i> arguments is fair game this way."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1472651549, "post_id": 39251165, "comment_id": 65838762, "body": "@Yakk Interesting indeed. Thank you for giving more details each time, really appreciated."}, {"owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 0, "creation_date": 1472655599, "post_id": 39251165, "comment_id": 65841803, "body": "Could thou quote the  Holy Standard on this?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 1, "creation_date": 1472655956, "post_id": 39251165, "comment_id": 65842059, "body": "@template [temp.res/8] and then into a twisted set of standardese passages.  Be careful with the term specialization and template, they don&#39;t mean exactly what they mean outside the standard iirc.  I have tried to search for a SO Q&amp;A on it, did not find it in 5 minutes (but did find that temp res reference)"}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 9, "last_activity_date": 1472651497, "last_edit_date": 1472651497, "creation_date": 1472650530, "answer_id": 39251165, "question_id": 39250545, "link": "https://stackoverflow.com/questions/39250545/sfinae-to-make-base-template-always-result-in-error/39251165#39251165", "title": "SFINAE to make base template always result in error", "body": "<p>You cannot write a template function specialization for which no template argument makes the body valid in C++.  The result if you do so is an ill formed program with no diagnostic required.  This includes the primary specialization.</p>\n\n<p>So  most of the answers here are simply undefined behaviour.  They may work, but they are not valid C++.  They may work today, but after a library upgrade a compiler upgrade or a different build target they could fail in completely different and surprising ways.  Relying on UB with no strong reason is a bad idea.</p>\n\n<p>On the plus side, we can do away with template specialization and fix your problem in one fell swoop:</p>\n\n<pre><code>template&lt;class T&gt;struct tag_t{}; // may need `constexpr tag_t(){}` on some compilers\ntemplate&lt;class T&gt;constexpr tag_t&lt;T&gt; tag{};\n\ntemplate&lt;class T, class F&gt;\nconstexpr T my_numeric_cast(F, tag_t&lt;F&gt;)=delete; // generates compile time error\n\nconstexpr float my_numeric_cast(int i, tag_t&lt;float&gt;) { return i; } // not a template!  Could be if you want it to be.\n\ntemplate&lt;typename To, typename From&gt;\nconstexpr To my_numeric_cast(From f){\n  return my_numeric_cast(f, tag&lt;To&gt;);\n}\n</code></pre>\n\n<p>and done.</p>\n\n<p><code>=delete</code> generates friendly messages.  Program is well formed.  Implementing casts is no longer a specialization.  You can even implement it in the namespace of a type being cast to or from as ADL is enabled.</p>\n\n<p>If you solve a problem with template function specialization, reconsider.  They are fragile, do not work like class template specialization or function overloading (while looking like both of them!), and usually are not the best solution to anything.  There are exceptions when it may be a good idea, but they are quite rare, and given how rare they are avoiding the quirky feature may still be worth it.</p>\n"}, {"tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1476105848, "creation_date": 1476105848, "answer_id": 39959364, "question_id": 39250545, "link": "https://stackoverflow.com/questions/39250545/sfinae-to-make-base-template-always-result-in-error/39959364#39959364", "title": "SFINAE to make base template always result in error", "body": "<p>This an updated answer which will work in in pre c++11 code. I still find <strong>Yakk</strong>s answer to be superb, as well as his suggestions regarding function template specializations, but I felt I should post this for completeness.  </p>\n\n<p>If understand correctly this solution doesn't result in an ill-formed program, and will even give a fairly clear error message.\nIt leverages the notion of using a class template to mark the primary template as incomplete, but still uses function template specialization.</p>\n\n<pre><code>namespace detail {\n    template&lt;typename T1, typename T2&gt; struct InvalidInstantiation;\n}\n\ntemplate&lt;typename To, typename From&gt;\nTo my_cast (From f) {\n    detail::InvalidInstantiation&lt;To, From&gt; No_Function_Exists;\n}\n\ntemplate&lt;&gt;\nfloat my_cast(int i) { return i; }\n\nint main() {\n    my_cast&lt;float&gt;(7);\n    //my_cast&lt;int&gt;(7.0); // This will result in an error\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 299, "favorite_count": 1, "accepted_answer_id": 39251165, "answer_count": 3, "score": 5, "last_activity_date": 1476105848, "creation_date": 1472648902, "question_id": 39250545, "link": "https://stackoverflow.com/questions/39250545/sfinae-to-make-base-template-always-result-in-error", "title": "SFINAE to make base template always result in error", "body": "<p>So I'm designing a sort of <code>my_numeric_cast</code> function to limit the types of conversions available when using a framework I'm writing.</p>\n\n<p>It was pretty straight forward to do something like</p>\n\n<pre><code>template&lt;typename To, typename From&gt;\nconstexpr To my_numeric_cast(From);\n\ntemplate&lt;&gt;\nconstexpr float my_numeric_cast&lt;float, int&gt;(int i) { return i; }\n</code></pre>\n\n<p>Which works, allowing only casting from ints to floats whenever the cast is used. And producing a linkage error whenever a cast not in the white list is attempted.</p>\n\n<p>However, I'd really want to make this a compilation error, to catch the misuse much faster.<br>\nHow do I make the base template body valid, expect when instantiating it?</p>\n"}, {"tags": ["python", "c++", "python-3.x"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user365268"}, "edited": false, "score": 1, "creation_date": 1517176362, "post_id": 39250524, "comment_id": 83976577, "body": "Did you ever find a solution?"}, {"owner": {"reputation": 169, "user_id": 4042960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/df634df7e48f2137f929aeab32b84c17?s=128&d=identicon&r=PG&f=1", "display_name": "merovingien", "link": "https://stackoverflow.com/users/4042960/merovingien"}, "edited": false, "score": 0, "creation_date": 1520410566, "post_id": 39250524, "comment_id": 85298658, "body": "@Ha11owed Finally I did not used packages but accepted response works."}], "answers": [{"comments": [{"owner": {"reputation": 1972, "user_id": 300131, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/roDEC.jpg?s=128&g=1", "display_name": "Alex Staravoitau", "link": "https://stackoverflow.com/users/300131/alex-staravoitau"}, "edited": false, "score": 0, "creation_date": 1536668920, "post_id": 40551949, "comment_id": 91499390, "body": "You, sir, have saved my bacon! Thanks."}], "tags": [], "owner": {"reputation": 56, "user_id": 7146896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23dabae34b8045dc48fe8dd9cd8fb6f0?s=128&d=identicon&r=PG&f=1", "display_name": "dgym", "link": "https://stackoverflow.com/users/7146896/dgym"}, "is_accepted": true, "score": 4, "last_activity_date": 1478880732, "creation_date": 1478880732, "answer_id": 40551949, "question_id": 39250524, "link": "https://stackoverflow.com/questions/39250524/programmatically-define-a-package-structure-in-embedded-python-3/40551949#40551949", "title": "Programmatically define a package structure in embedded python 3", "body": "<p>As far as I can tell the default builtin module handling fails to match against package+module names. This can be worked around by adding a custom import hook that does, just run this after Py_Initialize():</p>\n\n<pre><code>PyRun_SimpleString(\n    \"import importlib.abc\\n\" \\\n    \"import importlib.machinery\\n\" \\\n    \"import sys\\n\" \\\n    \"\\n\" \\\n    \"\\n\" \\\n    \"class Finder(importlib.abc.MetaPathFinder):\\n\" \\\n    \"    def find_spec(self, fullname, path, target=None):\\n\" \\\n    \"        if fullname in sys.builtin_module_names:\\n\" \\\n    \"            return importlib.machinery.ModuleSpec(\\n\" \\\n    \"                fullname,\\n\" \\\n    \"                importlib.machinery.BuiltinImporter,\\n\" \\\n    \"            )\\n\" \\\n    \"\\n\" \\\n    \"\\n\" \\\n    \"sys.meta_path.append(Finder())\\n\" \\\n);\n</code></pre>\n\n<p>I tried this with your complete code with success:</p>\n\n<pre><code>#include &lt;Python.h&gt;\n\n//// Definition of 'emb' module\nstatic PyModuleDef EmbModule = {\n    PyModuleDef_HEAD_INIT, \"emb\", NULL, -1, NULL,\n    NULL, NULL, NULL, NULL\n};\nstatic PyObject* PyInit_emb(void)\n{\n    PyObject *mod = PyModule_Create(&amp;EmbModule);\n    PyModule_AddObject(mod, \"__path__\", Py_BuildValue(\"()\"));\n\n    return mod;\n}\n\n//// Definition of 'emb.sub' module\nstatic PyObject* emb_sub_foo(PyObject *self, PyObject *args)\n{\n    char const* n = \"I am sub foo\";\n    return Py_BuildValue(\"s\", n);\n}\nstatic PyMethodDef EmbSubMethods[] = {\n    {\"foo\", emb_sub_foo, METH_VARARGS, \"Returns sub foo\"},\n    {NULL, NULL, 0, NULL}\n};\nstatic PyModuleDef EmbSubModule = {\n    PyModuleDef_HEAD_INIT, \"emb.sub\", NULL, -1, EmbSubMethods,\n    NULL, NULL, NULL, NULL\n};\nstatic PyObject* PyInit_emb_sub(void)\n{\n    return PyModule_Create(&amp;EmbSubModule);\n}\n\n//// Embedded Python\nint main()\n{\n    PyImport_AppendInittab(\"emb\", &amp;PyInit_emb);\n    PyImport_AppendInittab(\"emb.sub\", &amp;PyInit_emb_sub);\n    Py_Initialize();\n\n    PyRun_SimpleString(\n        \"import importlib.abc\\n\" \\\n        \"import importlib.machinery\\n\" \\\n        \"import sys\\n\" \\\n        \"\\n\" \\\n        \"\\n\" \\\n        \"class Finder(importlib.abc.MetaPathFinder):\\n\" \\\n        \"    def find_spec(self, fullname, path, target=None):\\n\" \\\n        \"        if fullname in sys.builtin_module_names:\\n\" \\\n        \"            return importlib.machinery.ModuleSpec(\\n\" \\\n        \"                fullname,\\n\" \\\n        \"                importlib.machinery.BuiltinImporter,\\n\" \\\n        \"            )\\n\" \\\n        \"\\n\" \\\n        \"\\n\" \\\n        \"sys.meta_path.append(Finder())\\n\" \\\n    );\n\n    PyRun_SimpleString(\"import emb.sub\\n\");\n    PyRun_SimpleString(\"print(emb.sub.foo())\\n\");\n\n    Py_Finalize();\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 4042960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/df634df7e48f2137f929aeab32b84c17?s=128&d=identicon&r=PG&f=1", "display_name": "merovingien", "link": "https://stackoverflow.com/users/4042960/merovingien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 687, "favorite_count": 0, "accepted_answer_id": 40551949, "answer_count": 1, "score": 3, "last_activity_date": 1478880732, "creation_date": 1472648828, "question_id": 39250524, "link": "https://stackoverflow.com/questions/39250524/programmatically-define-a-package-structure-in-embedded-python-3", "title": "Programmatically define a package structure in embedded python 3", "body": "<p>I would like to create an embedded python 3 interpreter and let python scripts import modules created via the C Python API.</p>\n\n<p>No problem to create a \"top-level\" module, but now I would like to organized my modules in packages ... But I failed.</p>\n\n<p>Here is my current (simple) code :</p>\n\n<pre><code>#include &lt;Python.h&gt;\n\n//// Definition of 'emb.sub' module\nstatic PyObject* emb_sub_foo(PyObject *self, PyObject *args)\n{\n    char const* n = \"I am sub foo\";\n    return Py_BuildValue(\"s\", n);\n}\nstatic PyMethodDef EmbSubMethods[] = {\n    {\"foo\", emb_sub_foo, METH_VARARGS, \"Returns sub foo\"},\n    {NULL, NULL, 0, NULL}\n};\nstatic PyModuleDef EmbSubModule = {\n    PyModuleDef_HEAD_INIT, \"emb.sub\", NULL, -1, EmbSubMethods,\n    NULL, NULL, NULL, NULL\n};\nstatic PyObject* PyInit_emb_sub(void)\n{\n    return PyModule_Create(&amp;EmbSubModule);\n}\n\n//// Embedded Python\nint main()\n{\n    PyImport_AppendInittab(\"emb.emb\", &amp;PyInit_emb_sub);\n    Py_Initialize();\n\n    PyRun_SimpleString(\"import emb.sub\\n\");\n\n    Py_Finalize();\n    return 0;\n}\n</code></pre>\n\n<p>When I executes the program, I get :</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;string&gt;\", line 1, in &lt;module&gt;\nImportError: No module named 'emb'\n</code></pre>\n\n<p>So I create an empty emb module, and I set its <code>__path__</code> like this :</p>\n\n<pre><code>#include &lt;Python.h&gt;\n\n//// Definition of 'emb' module\nstatic PyModuleDef EmbModule = {\n    PyModuleDef_HEAD_INIT, \"emb\", NULL, -1, NULL,\n    NULL, NULL, NULL, NULL\n};\nstatic PyObject* PyInit_emb(void)\n{\n    PyObject *mod = PyModule_Create(&amp;EmbModule);\n    PyModule_AddObject(mod, \"__path__\", Py_BuildValue(\"()\"));\n\n    return mod;\n}\n\n//// Definition of 'emb.sub' module\nstatic PyObject* emb_sub_foo(PyObject *self, PyObject *args)\n{\n    char const* n = \"I am sub foo\";\n    return Py_BuildValue(\"s\", n);\n}\nstatic PyMethodDef EmbSubMethods[] = {\n    {\"foo\", emb_sub_foo, METH_VARARGS, \"Returns sub foo\"},\n    {NULL, NULL, 0, NULL}\n};\nstatic PyModuleDef EmbSubModule = {\n    PyModuleDef_HEAD_INIT, \"emb.sub\", NULL, -1, EmbSubMethods,\n    NULL, NULL, NULL, NULL\n};\nstatic PyObject* PyInit_emb_sub(void)\n{\n    return PyModule_Create(&amp;EmbSubModule);\n}\n\n//// Embedded Python\nint main()\n{\n    PyImport_AppendInittab(\"emb\", &amp;PyInit_emb);\n    PyImport_AppendInittab(\"emb.sub\", &amp;PyInit_emb_sub);\n    Py_Initialize();\n\n    PyRun_SimpleString(\"import emb.sub\\n\");\n\n    Py_Finalize();\n    return 0;\n}\n</code></pre>\n\n<p>And now I get this error :</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;string&gt;\", line 1, in &lt;module&gt;\nImportError: No module named 'emb.sub'\n</code></pre>\n\n<p>I would like to know if it is possible to create a hierarchy of packages and modules in embedded python ?</p>\n\n<p>Thanks !</p>\n"}]