[{"tags": ["c++", "c", "windows", "winapi"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1556152768, "post_id": 55839993, "comment_id": 98343998, "body": "Which language, C or C++?  They are distinct languages.  For example, C++ has <code>std::string</code> and <code>std::transform</code>.  In C, you can have a variable or function called <code>class</code>."}], "answers": [{"tags": [], "owner": {"reputation": 8787, "user_id": 6601582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0a2f69702729da5aaa628bc58811a7?s=128&d=identicon&r=PG&f=1", "display_name": "Rita Han", "link": "https://stackoverflow.com/users/6601582/rita-han"}, "is_accepted": true, "score": 1, "last_activity_date": 1556164675, "creation_date": 1556164675, "answer_id": 55841600, "question_id": 55839993, "link": "https://stackoverflow.com/questions/55839993/copy-security-information/55841600#55841600", "title": "Copy Security information", "body": "<p>You can use <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/aclapi/nf-aclapi-getnamedsecurityinfoa\" rel=\"nofollow noreferrer\">GetNamedSecurityInfo</a>() to get all information you need like owner/group and access control(DACL/SACL) from the old file then Creating a Security Descriptor using information you've got and set the security descriptor when you create a new file (<a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/fileapi/nf-fileapi-createfilea\" rel=\"nofollow noreferrer\">CreateFile</a>()).</p>\n\n<p>There are \"<a href=\"https://docs.microsoft.com/en-us/windows/desktop/SecAuthZ/modifying-the-acls-of-an-object-in-c--\" rel=\"nofollow noreferrer\">Modifying the ACLs of an Object in C++</a>\" and \"<a href=\"https://docs.microsoft.com/en-us/windows/desktop/SecAuthZ/creating-a-security-descriptor-for-a-new-object-in-c--\" rel=\"nofollow noreferrer\">Creating a Security Descriptor for a New Object in C++</a>\" you can refer to.</p>\n"}], "owner": {"reputation": 13, "user_id": 11401954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcc9cdc697ad5c5c1921e406eb8d9ad?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/11401954/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 55841600, "answer_count": 1, "score": 0, "last_activity_date": 1556164675, "creation_date": 1556149849, "last_edit_date": 1556152290, "question_id": 55839993, "link": "https://stackoverflow.com/questions/55839993/copy-security-information", "title": "Copy Security information", "body": "<p>Using C/C++ on Win32, I'm creating a new file <code>A</code> but I want to copy the exact security information from an old file <code>B</code>.  By security information, I mean groups/names and corresponding permissions. For example:</p>\n\n<p><a href=\"https://i.stack.imgur.com/b5XZU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/b5XZU.png\" alt=\"Security Information (screenshot)\"></a></p>\n\n<p>What kind of <a href=\"https://docs.microsoft.com/en-us/windows/desktop/SecAuthZ/security-information\" rel=\"nofollow noreferrer\"><code>SECURITY_INFORMATION</code></a> do I need to copy?</p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2956272"}, "edited": false, "score": 2, "creation_date": 1556148875, "post_id": 55839876, "comment_id": 98343394, "body": "How is <code>myPointer</code> defined?"}, {"owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "edited": false, "score": 1, "creation_date": 1556148895, "post_id": 55839876, "comment_id": 98343400, "body": "@dyukha It doesn&#39;t matter how it&#39;s defined. What matters is that after sorting, previously obtained addresses will not point to the same element anymore."}, {"owner": {"reputation": 69, "user_id": 8150295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cof77.jpg?s=128&g=1", "display_name": "vuoriov4", "link": "https://stackoverflow.com/users/8150295/vuoriov4"}, "edited": false, "score": 0, "creation_date": 1556149006, "post_id": 55839876, "comment_id": 98343420, "body": "@duykha It&#39;s a pointer to instance of MyClass. My &quot;solution&quot; was taken from here <a href=\"https://stackoverflow.com/questions/5179570/find-index-of-an-element-in-a-vector-given-a-pointer-to-that-element\" title=\"find index of an element in a vector given a pointer to that element\">stackoverflow.com/questions/5179570/&hellip;</a>"}, {"owner": {"reputation": 528, "user_id": 4890944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6584bf69ef530c04cc2f2abc2bba08e3?s=128&d=identicon&r=PG&f=1", "display_name": "\u6c38\u52ab\u56de\u5e30", "link": "https://stackoverflow.com/users/4890944/%e6%b0%b8%e5%8a%ab%e5%9b%9e%e5%b8%b0"}, "edited": false, "score": 2, "creation_date": 1556149146, "post_id": 55839876, "comment_id": 98343446, "body": "From what I understand, you define <code>myPointer = ...</code> before sorting. After sorting the pointer still points to the same cell (hence the same index), however the content of that cell is different."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1556149467, "post_id": 55839876, "comment_id": 98343495, "body": "sorting a vector invalidates any pre-existing pointers to its elements (the pointers themselves don&#39;t change where they are pointing to, but the objects inside the vector may have moved around to new indexes). You need to update the pointer after sorting, such as using <code>std::find_if()</code> to find the wanted element again, and then dereference the returned iterator to access the element so you then can get its address.  But, given an iterator to an element, you can get its index using <code>std::distance()</code> instead."}, {"owner": {"reputation": 2663, "user_id": 6301420, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9f4693f2fcba86b5f59737b94120acc2?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Schepler", "link": "https://stackoverflow.com/users/6301420/daniel-schepler"}, "edited": false, "score": 0, "creation_date": 1556149940, "post_id": 55839876, "comment_id": 98343569, "body": "Would it be sufficient to get the same information without sorting, by counting how many elements of the array are less than <code>*myPointer</code>?  (Of course, if there&#39;s a chance that multiple elements are equal to <code>*myPointer</code> then it would be difficult to predict where <code>std::sort</code> will put that exact element, though predicting where <code>std::stable_sort</code> would put it would be doable.)"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1556150748, "post_id": 55839876, "comment_id": 98343684, "body": "After sorting, it would be necessary to reinitialise <code>myPointer</code>.   All <code>sort()</code> does is change the values of elements of the array.  It doesn&#39;t change the address of individual elements."}], "answers": [{"tags": [], "owner": {"reputation": 185, "user_id": 4922642, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nlaab.png?s=128&g=1", "display_name": "dedowsdi", "link": "https://stackoverflow.com/users/4922642/dedowsdi"}, "is_accepted": false, "score": 0, "last_activity_date": 1556151424, "creation_date": 1556151424, "answer_id": 55840164, "question_id": 55839876, "link": "https://stackoverflow.com/questions/55839876/how-to-find-the-index-of-an-element-in-a-sorted-vector-given-a-pointer-to-that-e/55840164#55840164", "title": "How to find the index of an element in a sorted vector given a pointer to that element", "body": "<p>Standard requires that <code>RandomIt</code> of sort meet the requirement of <a href=\"https://en.cppreference.com/w/cpp/named_req/ValueSwappable\" rel=\"nofollow noreferrer\">ValueSwappable</a>, which means it use <code>std::iter_swap</code> to swap elements during sorting. Your pointer address won't be changed, if it points to the 2nd element before sort, it will still point to the 2nd element after sort, but the 2nd element got changed after sort most of the time. You need to use <code>equal_range</code> to get a new pointer address after sorting.</p>\n"}], "owner": {"reputation": 69, "user_id": 8150295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cof77.jpg?s=128&g=1", "display_name": "vuoriov4", "link": "https://stackoverflow.com/users/8150295/vuoriov4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556155515, "creation_date": 1556148645, "last_edit_date": 1556155515, "question_id": 55839876, "link": "https://stackoverflow.com/questions/55839876/how-to-find-the-index-of-an-element-in-a-sorted-vector-given-a-pointer-to-that-e", "title": "How to find the index of an element in a sorted vector given a pointer to that element", "body": "<p>I have a vector <code>std::vector&lt;MyClass&gt; vec</code>. I'm trying to sort the vector and then find the index of an element given a pointer to it </p>\n\n<pre><code>sort(vec.begin(), vec.end(), ...);\nauto index = myPointer - &amp;vec[0];\n</code></pre>\n\n<p>I noticed that the value of <code>index</code> doesn't change when the vector is sorted and therefore is incorrect. Is there a way to directly get the correct index?</p>\n"}, {"tags": ["c++", "visual-c++", "lcid"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1556148579, "post_id": 55839822, "comment_id": 98343355, "body": "Codepages and Locales are two very different things. AFAIK, there is no Win32 API to map one to the other, which is why the code is doing it manually.  Though, the numbers shown in this code are not valid codepage identifiers, so what are they supposed to be representing exactly? What input does <code>GetLocale()</code> get called with exactly? In any case, a single <code>switch</code> statement would be faster than a bunch of <code>if</code> statements: <code>switch (cp) { case 1078: return &quot;Afrikaans(af,af)&quot;; case 1052: return &quot;Albanian(sq,sq)&quot;; case 1118: return &quot;Amharic(am,am)&quot;; ... }</code>"}, {"owner": {"reputation": 11, "user_id": 11405844, "user_type": "registered", "profile_image": "https://graph.facebook.com/422682671630055/picture?type=large", "display_name": "Dima Vegas", "link": "https://stackoverflow.com/users/11405844/dima-vegas"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1556151629, "post_id": 55839822, "comment_id": 98343811, "body": "Numbers is LCID Decimals and it&#39;s valid."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1556152009, "post_id": 55839822, "comment_id": 98343873, "body": "Then the name of the <code>cp</code> parameter is misleading since the input is not a codepage identifier. It should be renamed to something more meaningful, such as <code>localeID</code>. In any case, now knowing the input is supposed to be locale IDs, have a look at the <code>GetLocaleInfo()</code> function, which can return a locale Name given a locale ID."}], "owner": {"reputation": 11, "user_id": 11405844, "user_type": "registered", "profile_image": "https://graph.facebook.com/422682671630055/picture?type=large", "display_name": "Dima Vegas", "link": "https://stackoverflow.com/users/11405844/dima-vegas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1556151933, "creation_date": 1556148163, "last_edit_date": 1556151933, "question_id": 55839822, "link": "https://stackoverflow.com/questions/55839822/windows-locale-to-string-from-decimal", "title": "Windows locale to string from decimal", "body": "<p>Today I review some code and saw this!\nAny thoughts about this way? \nMaybe you know best way?\nI think it's veeery slow method :)</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>string GetLocale(int cp) {\n        if (cp == 1078) { return \"Afrikaans(af,af)\"; }\n        if (cp == 1052) { return \"Albanian(sq,sq)\"; }\n        if (cp == 1118) { return \"Amharic(am,am)\"; }\n        if (cp == 5121) { return \"Arabic - Algeria(ar,ar-dz)\"; }\n        if (cp == 15361) { return \"Arabic - Bahrain(ar,ar-bh)\"; }\n        if (cp == 3073) { return \"Arabic - Egypt(ar,ar-eg)\"; }\n        if (cp == 2049) { return \"Arabic - Iraq(ar,ar-iq)\"; }\n        etc...\n</code></pre>\n"}, {"tags": ["c++", "linker"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1556148289, "post_id": 55839783, "comment_id": 98343308, "body": "The code you have shown has nothing to do with the linker errors you have shown. Something else is going on. The linker is complaining that duplicate symbols are being defined by both <code>Main.cpp</code> and <code>Game.cpp</code>, which would imply that a common header (like <code>olcConsoleGameEngine.h</code>, or something it <code>#include</code>s) is not declaring those symbols correctly."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1556148369, "post_id": 55839783, "comment_id": 98343320, "body": "Putting <code>std::atomic&lt;bool&gt; olcConsoleGameEngine::m_bAtomActive(false);</code> in a header is blatantly stupid. The writer of this library may have a reason for why they did this in the documentation, but it&#39;s going to be very hard to make it a good one."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1556148406, "post_id": 55839783, "comment_id": 98343332, "body": "That header is not made for being included in more than one translation unit. You need to put everything that depends on it in a single file."}, {"owner": {"reputation": 177, "user_id": 8864013, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7FwvRQkpvg8/AAAAAAAAAAI/AAAAAAAAANM/mhTJH_iAhck/photo.jpg?sz=128", "display_name": "James Mclaughlin", "link": "https://stackoverflow.com/users/8864013/james-mclaughlin"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1556148594, "post_id": 55839783, "comment_id": 98343359, "body": "Thanks for the responses. @RemyLebeau I&#39;m aware of this, theyre found within the source in the github link, however if I just declare the functions as shown in the commented section the program will compile fine, so I dont believe the individual linker errors are that helpful"}, {"owner": {"reputation": 177, "user_id": 8864013, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7FwvRQkpvg8/AAAAAAAAAAI/AAAAAAAAANM/mhTJH_iAhck/photo.jpg?sz=128", "display_name": "James Mclaughlin", "link": "https://stackoverflow.com/users/8864013/james-mclaughlin"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1556148688, "post_id": 55839783, "comment_id": 98343374, "body": "@molbdnilo Ok, so basically what you&#39;re saying is that I would have to declare every function in the header, and including the .h anywhere else would just break it and I wouldn&#39;t be able to fix that?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1556148971, "post_id": 55839783, "comment_id": 98343415, "body": "@JamesMclaughlin I think what molbdnilo is saying is don&#39;t use <code>#inlcude &quot;olcConsoleGameEngine.h&quot;</code> where it may end up being used by multiple <code>.cpp</code> files in your project. Create a separate <code>.cpp</code> just for including <code>olcConsoleGameEngine.h</code>. If you need to use the engine&#39;s functionality in multiple <code>.cpp</code> files in your project, you will have to use the functionality only inside that one <code>.cpp</code> file, and then create your own wrappers to access it privately without exposing it to your own <code>.cpp</code> files."}, {"owner": {"reputation": 177, "user_id": 8864013, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7FwvRQkpvg8/AAAAAAAAAAI/AAAAAAAAANM/mhTJH_iAhck/photo.jpg?sz=128", "display_name": "James Mclaughlin", "link": "https://stackoverflow.com/users/8864013/james-mclaughlin"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1556148989, "post_id": 55839783, "comment_id": 98343417, "body": "@user4581301 you&#39;re probably right, but the writer is genuinely a really good teacher. He has a really informative channel on YouTube that showcases a lot of really interesting things he makes in this engine as well as a few others he&#39;s designed. You should have a look, there&#39;s a link in his GitHub I believe."}, {"owner": {"reputation": 177, "user_id": 8864013, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7FwvRQkpvg8/AAAAAAAAAAI/AAAAAAAAANM/mhTJH_iAhck/photo.jpg?sz=128", "display_name": "James Mclaughlin", "link": "https://stackoverflow.com/users/8864013/james-mclaughlin"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1556149361, "post_id": 55839783, "comment_id": 98343473, "body": "@Remy Lebeau Ok thank you, this seems like the right solution. I might end up just using the OOP version of the engine though, and hopefully avoid the extra hassle that using this version seems to create. Thanks alot for the help anyway."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1556149367, "post_id": 55839783, "comment_id": 98343475, "body": "@JamesMclaughlin seems the author made a mistake of declaring several <code>static</code> variables at the bottom of the <code>olcConsoleGameEngine.h</code> file, which means every <code>.cpp</code> file that includes that <code>.h</code> file will get its own copy of the variables, causing linker errors. They should instead be <i>declared</i> as <code>extern</code> in the <code>.h</code> file, and then <i>defined</i> in one of the library&#39;s own <code>.cpp</code> files."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1556149870, "post_id": 55839783, "comment_id": 98343561, "body": "Could be a great teacher, and this could be an attempt at simplifying things for educational purposes much like Stroustrup&#39;s std_lib_facilities header which gets people off the ground quickly, but then becomes a bit of a boat anchor. You can probably strategically split stuff out of olcConsoleGameEngine.h, those static variables for example, and move them into a cpp file or different header that you include once and only once and keep on rolling. Aaaand while I was typing this that&#39;s pretty much what Remy suggested. Teach me to go to the bathroom."}], "owner": {"reputation": 177, "user_id": 8864013, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7FwvRQkpvg8/AAAAAAAAAAI/AAAAAAAAANM/mhTJH_iAhck/photo.jpg?sz=128", "display_name": "James Mclaughlin", "link": "https://stackoverflow.com/users/8864013/james-mclaughlin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 145, "favorite_count": 0, "closed_date": 1556155768, "answer_count": 0, "score": 0, "last_activity_date": 1556147859, "creation_date": 1556147859, "question_id": 55839783, "link": "https://stackoverflow.com/questions/55839783/lnk1169-error-when-overriding-inherited-functions", "closed_reason": "Duplicate", "title": "LNK1169 error when overriding inherited functions", "body": "<p>So I'm using the olcConsoleGameEngine (source here as its too large to copy paste <a href=\"https://github.com/OneLoneCoder/videos/blob/master/olcConsoleGameEngine.h\" rel=\"nofollow noreferrer\">https://github.com/OneLoneCoder/videos/blob/master/olcConsoleGameEngine.h</a>) and I'm using a class that inherits from it as the basis for the game, this is the header file:</p>\n\n<p>Game.h</p>\n\n<pre><code>#ifndef GAME_H\n#define GAME_H\n\n#include \"olcConsoleGameEngine.h\"\n\nclass Game : public olcConsoleGameEngine\n{\npublic:\n    Game();\n\nprotected:\n    /*\n    virtual bool OnUserCreate()\n    {\n        return true;\n    }\n\n    virtual bool OnUserUpdate(float fElapsedTime)\n    {\n        Fill(0, 0, ScreenWidth(), ScreenHeight(), PIXEL_SOLID, FG_BLUE);\n        return true;\n    }\n    */\n    virtual bool OnUserCreate();\n    virtual bool OnUserUpdate(float fElapsedTime);\n};\n\n#endif\n</code></pre>\n\n<p>Notice the comments, declaring and defining this way is the only I have got it to compile so far (making sure to remove declaration in the cpp aswell)</p>\n\n<p>Game.cpp</p>\n\n<pre><code>#include \"Game.h\"\n\nGame::Game()\n{\n}\n\nbool Game::OnUserCreate()\n{\n    return true;\n}\n\nbool Game::OnUserUpdate(float fElapsedTime)\n{\n    return true;\n}\n\n</code></pre>\n\n<p>And in main I just have the standard code for setting up the window, which I know works since declaring the Update and Create functions in the .h works with no errors and gives correct output. It seems that as soon as I include Game.h in Game.cpp I get the linker error, which is:</p>\n\n<pre><code>1&gt;main.obj : error LNK2005: \"void __cdecl GetFontCoords(int,int *,int *)\" (?GetFontCoords@@YAXHPAH0@Z) already defined in Game.obj\n1&gt;main.obj : error LNK2005: \"void __cdecl font_decode_custom_base64(void)\" (?font_decode_custom_base64@@YAXXZ) already defined in Game.obj\n1&gt;main.obj : error LNK2005: \"protected: static struct std::atomic&lt;bool&gt; olcConsoleGameEngine::m_bAtomActive\" (?m_bAtomActive@olcConsoleGameEngine@@1U?$atomic@_N@std@@A) already defined in Game.obj\n1&gt;main.obj : error LNK2005: \"int (__stdcall* wglSwapInterval)(int)\" (?wglSwapInterval@@3P6GHH@ZA) already defined in Game.obj\n1&gt;main.obj : error LNK2005: \"unsigned char * pxplus_ibm_cga\" (?pxplus_ibm_cga@@3PAEA) already defined in Game.obj\n1&gt;main.obj : error LNK2005: \"char * pxplus_ibm_cga_enc\" (?pxplus_ibm_cga_enc@@3PADA) already defined in Game.obj\n1&gt;main.obj : error LNK2005: \"protected: static class std::condition_variable olcConsoleGameEngine::m_cvGameFinished\" (?m_cvGameFinished@olcConsoleGameEngine@@1Vcondition_variable@std@@A) already defined in Game.obj\n1&gt;main.obj : error LNK2005: \"protected: static class std::mutex olcConsoleGameEngine::m_muxGame\" (?m_muxGame@olcConsoleGameEngine@@1Vmutex@std@@A) already defined in Game.obj\n1&gt;C:\\Dev\\C++Projects\\WarAutomata\\Debug\\WarAutomata.exe : fatal error LNK1169: one or more multiply defined symbols found\n</code></pre>\n\n<p>Main.cpp</p>\n\n<pre><code>#include \"Game.h\"\n\nint main() {\n    Game game;\n    game.ConstructConsole(640, 480, 1, 1);\n    game.Start();\n    return 0;\n}\n</code></pre>\n\n<p>So in the program's current state I'd have the declare every function in the header, which is obviously not ideal. Any help with this problem would be really appreciated.</p>\n"}, {"tags": ["c++", "string", "header-files", "cout"], "comments": [{"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 6, "creation_date": 1556147735, "post_id": 55839749, "comment_id": 98343198, "body": "Typo: change <code>void checkInputs...</code> to <code>void utils::checkInputs...</code> in utils.cpp."}, {"owner": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "edited": false, "score": 2, "creation_date": 1556148002, "post_id": 55839749, "comment_id": 98343247, "body": "And <code>please</code> ditch the <code>using namespace std;</code> line."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "reply_to_user": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "edited": false, "score": 0, "creation_date": 1556149805, "post_id": 55839749, "comment_id": 98343554, "body": "@Chimera: The one in the <code>.h</code>, right?  (While we\u2019re at it, please name C++ header files <code>.hpp</code>, <code>.hxx</code>, or <code>.hh</code>.)"}, {"owner": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "reply_to_user": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1556169369, "post_id": 55839749, "comment_id": 98347201, "body": "@DavisHerring Now you have the hang of it! :-)"}, {"owner": {"reputation": 9, "user_id": 10166709, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Trp-XtQwaFM/AAAAAAAAAAI/AAAAAAAAAB4/ghZLnbC9iv4/photo.jpg?sz=128", "display_name": "Petereo", "link": "https://stackoverflow.com/users/10166709/petereo"}, "edited": false, "score": 0, "creation_date": 1556245301, "post_id": 55839749, "comment_id": 98380778, "body": "Sanders thank you I will try that"}, {"owner": {"reputation": 9, "user_id": 10166709, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Trp-XtQwaFM/AAAAAAAAAAI/AAAAAAAAAB4/ghZLnbC9iv4/photo.jpg?sz=128", "display_name": "Petereo", "link": "https://stackoverflow.com/users/10166709/petereo"}, "reply_to_user": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "edited": false, "score": 0, "creation_date": 1556245396, "post_id": 55839749, "comment_id": 98380792, "body": "@chimera ok..why so does it affect the code in some way"}, {"owner": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "edited": false, "score": 0, "creation_date": 1556253915, "post_id": 55839749, "comment_id": 98382336, "body": "@Petereo No, it doesn&#39;t. It&#39;s just considered by some to be lazy. It&#39;s just a style or &quot;best practice&quot; consideration that not everybody will agree with. See <a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\" title=\"why is using namespace std considered bad practice\">stackoverflow.com/questions/1452721/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 9, "user_id": 10166709, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Trp-XtQwaFM/AAAAAAAAAAI/AAAAAAAAAB4/ghZLnbC9iv4/photo.jpg?sz=128", "display_name": "Petereo", "link": "https://stackoverflow.com/users/10166709/petereo"}, "is_accepted": true, "score": 0, "last_activity_date": 1556371130, "creation_date": 1556371130, "answer_id": 55880972, "question_id": 55839749, "link": "https://stackoverflow.com/questions/55839749/c-undefined-reference-to-utilscheckinputs/55880972#55880972", "title": "C++ undefined reference to `utils::checkInputs", "body": "<p>Thank you everyone as said by PaulSanders \"Typo: change void checkInputs... to void utils::checkInputs... in utils.cpp.\" It fixed my problem just fine =)</p>\n"}], "owner": {"reputation": 9, "user_id": 10166709, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Trp-XtQwaFM/AAAAAAAAAAI/AAAAAAAAAB4/ghZLnbC9iv4/photo.jpg?sz=128", "display_name": "Petereo", "link": "https://stackoverflow.com/users/10166709/petereo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 420, "favorite_count": 0, "accepted_answer_id": 55880972, "answer_count": 1, "score": 0, "last_activity_date": 1556371130, "creation_date": 1556147572, "question_id": 55839749, "link": "https://stackoverflow.com/questions/55839749/c-undefined-reference-to-utilscheckinputs", "title": "C++ undefined reference to `utils::checkInputs", "body": "<p>I decided to try and code a basic program but i keep getting this eror:</p>\n\n<p>/tmp/cczXwiYT.o: In function <code>main':\nmain.cpp:(.text+0xd8): undefined reference to</code>utils::checkInputs(std::__cxx11::basic_string, std::allocator >, std::__cxx11::basic_string, std::allocator >)'\ncollect2: error: ld returned 1 exit status</p>\n\n<p>Im new to c++ (just saying)</p>\n\n<p>I tried to change the type from void to int to boolean etc.</p>\n\n<p>main.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include \"utils.h\"\n\nint main(){\n\n    utils u;\n\n    std::string a = \"a\";\n    std::string b = \"a\";\n    u.checkInputs(a,b);\n\n    return 0;\n}\n</code></pre>\n\n<p>utils.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n\n#include \"utils.h\"\n\nusing namespace std;\n\nutils::utils(){};\n\nvoid checkInputs(string userInput, string target){\n    cout &lt;&lt; \"hey i work\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>utils.h</p>\n\n<pre><code>#ifndef UTILS_H\n#define UTILS_H\n\n    #include &lt;iostream&gt;\n    #include &lt;string&gt;\n    #include &lt;fstream&gt;\n\n    using namespace std;\n\nclass utils\n{\n    public:\n        utils();\n        void checkInputs(string userInput, string target);\n};\n\n#endif \n</code></pre>\n\n<p>Thanks for the help =)</p>\n"}, {"tags": ["c++", "qt", "qabstractitemmodel", "qabstractitemview"], "answers": [{"comments": [{"owner": {"reputation": 577, "user_id": 4577467, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-QeCEV_3eDeM/AAAAAAAAAAI/AAAAAAAAAE0/KhDbuC4MGs4/photo.jpg?sz=128", "display_name": "Mike Finch", "link": "https://stackoverflow.com/users/4577467/mike-finch"}, "edited": false, "score": 1, "creation_date": 1556204932, "post_id": 55842330, "comment_id": 98366699, "body": "Thank you, @Cendolt.  That is an excellent idea.  I did not know about the <code>QAbstractItemModel::match()</code> method.  Your example will likely work as-is for flat data model.  For a hierarchical tree-like data model, I needed a few tweaks, which I will post in a separate answer."}], "tags": [], "owner": {"reputation": 226, "user_id": 10788905, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TxRqz.png?s=128&g=1", "display_name": "Cendolt", "link": "https://stackoverflow.com/users/10788905/cendolt"}, "is_accepted": true, "score": 2, "last_activity_date": 1556230151, "last_edit_date": 1556230151, "creation_date": 1556169894, "answer_id": 55842330, "question_id": 55839656, "link": "https://stackoverflow.com/questions/55839656/how-to-hyperlink-to-an-item-in-a-qabstractitemmodel/55842330#55842330", "title": "How to hyperlink to an item in a QAbstractItemModel?", "body": "<p>You could declare a custom <a href=\"https://doc.qt.io/qt-5/qt.html#ItemDataRole\" rel=\"nofollow noreferrer\">data role</a> in your model, and for each of your items set a unique value for this role.</p>\n\n<pre><code>//MyModel.h\nclass MyModel : public QAbstractItemModel\n{\n    enum MyRoles {\n         UrlRole = Qt::UserRole\n    };\n    // (...)\n}\n\n//MyModel.cpp\nQVariant MyModel::data(const QModelIndex &amp;index, int role) const\n{\n    if (role == UrlRole)\n    {\n        return \"uniqueUrl\"; //Up to you to decide what you return here\n    }\n    // (...)\n}\n</code></pre>\n\n<p>Then when performing your search, simply use your model's <a href=\"https://doc.qt.io/qt-5/qabstractitemmodel.html#match\" rel=\"nofollow noreferrer\">match function</a> to match your unique string and take the first index from the list.</p>\n\n<pre><code>QModelIndex MyDialog::getIndexForUrl(QString myUrl)\n{\n    QModelIndex index = QModelIndex();\n    QModelIndexList resultList = ui-&gt;treeView-&gt;model()-&gt;match(QModelIndex(),\n        MyModel::UrlRole, \"uniqueUrl\", 1, Qt::MatchFixedString | Qt::MatchCaseSensitive);\n\n    if (!resultList.empty())\n    {\n        index = resultList.first();\n    }\n    return index;\n}\n</code></pre>\n\n<p>You may need to adjust the flags and the start index depending on how you defined your model.</p>\n"}, {"tags": [], "owner": {"reputation": 577, "user_id": 4577467, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-QeCEV_3eDeM/AAAAAAAAAAI/AAAAAAAAAE0/KhDbuC4MGs4/photo.jpg?sz=128", "display_name": "Mike Finch", "link": "https://stackoverflow.com/users/4577467/mike-finch"}, "is_accepted": false, "score": 1, "last_activity_date": 1556207851, "creation_date": 1556207851, "answer_id": 55853335, "question_id": 55839656, "link": "https://stackoverflow.com/questions/55839656/how-to-hyperlink-to-an-item-in-a-qabstractitemmodel/55853335#55853335", "title": "How to hyperlink to an item in a QAbstractItemModel?", "body": "<p>Using <code>QAbstractItemModel::match()</code> to search for items in the data model via a custom data role, as suggested by @Cendolt, is an excellent idea.  I was able to use that idea without having to override <code>match()</code> in my custom data model.</p>\n\n<p>The parameters I provide to <code>QAbstractItemModel::match()</code> are a little different, though.  In combination with the rest of @Cendolt's example, the following works for my situation.</p>\n\n<pre><code>QAbstractItemModel * pModel = ...;\n\n// Start searching from the root of the tree.\nQModelIndex startIndex = pModel-&gt;index( 0, 0 );\n\nQModelIndexList results = p-&gt;match(\n  startIndex,\n  MyModel::UrlRole,\n  \"uniqueUrl\",\n  1,\n  Qt::MatchRecursive );\n</code></pre>\n\n<h2>Valid start index</h2>\n\n<p>Specifying a starting <code>QModelIndex</code> with zeros for the row and column is essential to make the search proceed at all.  When I used a default constructed <code>QModelIndex</code>, the search never called my model's <code>data()</code> method.  I believe that is because the default constructed <code>QModelIndex</code> has -1 for the row and column, which makes it an invalid index.  In the code for <code>QAbstractItemModel::match()</code> ({Qt dir}\\src\\corelib\\kernel\\qabstractitemmodel.cpp), notice that it skips calling <code>data()</code> if the index is invalid.</p>\n\n<h2>Match flags</h2>\n\n<p>Specifically for hierarchical data, using the <code>Qt::MatchRecursive</code> flag is essential.  Otherwise, the search does not crawl into child nodes.</p>\n"}], "owner": {"reputation": 577, "user_id": 4577467, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-QeCEV_3eDeM/AAAAAAAAAAI/AAAAAAAAAE0/KhDbuC4MGs4/photo.jpg?sz=128", "display_name": "Mike Finch", "link": "https://stackoverflow.com/users/4577467/mike-finch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 1, "accepted_answer_id": 55842330, "answer_count": 2, "score": 0, "last_activity_date": 1556230151, "creation_date": 1556146737, "last_edit_date": 1556204661, "question_id": 55839656, "link": "https://stackoverflow.com/questions/55839656/how-to-hyperlink-to-an-item-in-a-qabstractitemmodel", "title": "How to hyperlink to an item in a QAbstractItemModel?", "body": "<p>Qt versions used:  4.7.1 and 4.8</p>\n\n<p>I store hierarchical data as nodes in a model that is derived from QAbstractItemModel.  I have a <code>QTreeView</code> in my application GUI to display the hierarchical data.  (The data being hierarchical may not be essential for this question;  the general problem I have applies to any kind of data in any model and view.)</p>\n\n<p>I have a textbox (a <code>QPlainTextEdit</code> widget, but that is not essential) in my application GUI that displays a hyperlink.  When the user clicks on the hyperlink, I can intercept that and obtain the URL of the hyperlink.  So far, so good.</p>\n\n<p>When I intercept that hyperlink, I am going to make the <code>QTreeView</code> navigate to a particular node, expanding its parents as needed so that the user can see it.</p>\n\n<p>The URL of the hyperlink will be in format that lets me know a node is being asked for, and will contain identifying information about that particular node.  For example:</p>\n\n<pre><code>&lt;a href=\"node://something\"&gt;Click me to see node A&lt;/a&gt;\n</code></pre>\n\n<p>So, the question is:  What is the something that can identify that particular node, and that can be encoded as a text string?</p>\n\n<p>I have been reading about <code>QPersistentModelIndex</code>.  It sounds like a reasonable thing to start with.  At the time I format the hyperlink, I would definitely know the <code>QModelIndex</code> of the particular node, and can construct a <code>QPersistentModelIndex</code> from it.  But I am getting lost on how to convert that to a string, and then later convert the string back to a <code>QModelIndex</code> from which I can deduce the particular node.</p>\n\n<p>Any suggestions are appreciated.</p>\n"}, {"tags": ["c++", "c++11", "inheritance", "overriding"], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1556147265, "post_id": 55839675, "comment_id": 98343113, "body": "The OP&#39;s code suffers from &quot;object slicing&quot; when populating the array, so this is only part of the fix that is needed.  The array needs to be fixed, too."}], "tags": [], "owner": {"reputation": 1196, "user_id": 5468596, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oYsoZ.png?s=128&g=1", "display_name": "Stephen", "link": "https://stackoverflow.com/users/5468596/stephen"}, "is_accepted": false, "score": 1, "last_activity_date": 1556146861, "creation_date": 1556146861, "answer_id": 55839675, "question_id": 55839632, "link": "https://stackoverflow.com/questions/55839632/when-i-call-a-function-in-child-class-it-is-instead-calling-the-parent-class-fun/55839675#55839675", "title": "When I call a function in child class it is instead calling the parent class function", "body": "<p>You'll need to specify the parent function as <code>virtual</code>, and the child functions should utilize the <code>override</code> keyword. </p>\n\n<pre><code>class Parent {\npublic:\n    Parent(){}\n    virtual void print() {\n        std::cout &lt;&lt; \"I'm the parent!\" &lt;&lt; std::endl;\n    }\n};\n\nclass ChildOne : public Parent {\npublic:\n    ChildOne(){}\n    void print() override {\n        std::cout &lt;&lt; \"I'm childOne!\" &lt;&lt; std::endl;\n    }\n};\n\nclass ChildTwo : public Parent {\npublic:\n    ChildTwo() {}\n    void print() override {\n        std::cout &lt;&lt; \"I'm childTwo!\" &lt;&lt; std::endl;\n    }\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 3, "creation_date": 1556146964, "post_id": 55839680, "comment_id": 98343062, "body": "Search term for more information <a href=\"https://stackoverflow.com/questions/274626/what-is-object-slicing\">object slicing</a>."}], "tags": [], "owner": {"reputation": 3985, "user_id": 298171, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/fp85I.jpg?s=128&g=1", "display_name": "fish2000", "link": "https://stackoverflow.com/users/298171/fish2000"}, "is_accepted": false, "score": 3, "last_activity_date": 1556146903, "creation_date": 1556146903, "answer_id": 55839680, "question_id": 55839632, "link": "https://stackoverflow.com/questions/55839632/when-i-call-a-function-in-child-class-it-is-instead-calling-the-parent-class-fun/55839680#55839680", "title": "When I call a function in child class it is instead calling the parent class function", "body": "<p>You're implicitly casting all your instances to type <code>Parent</code> when you store them in that typed array. Since you are using static dispatch, you're always going to call the method on the base type you've (implicitly) downcasted to.</p>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 2, "last_activity_date": 1556147597, "creation_date": 1556147597, "answer_id": 55839753, "question_id": 55839632, "link": "https://stackoverflow.com/questions/55839632/when-i-call-a-function-in-child-class-it-is-instead-calling-the-parent-class-fun/55839753#55839753", "title": "When I call a function in child class it is instead calling the parent class function", "body": "<p>Your code suffers from two problems:</p>\n\n<ol>\n<li><p>you are not actually overriding <code>print()</code> at all, because it is not <code>virtual</code>.  So you are merely <em>overloading</em> it in each child class, <em>hiding</em> the parent's method.</p></li>\n<li><p>you are <a href=\"https://stackoverflow.com/questions/274626/what-is-object-slicing\">slicing your objects</a> when storing them into your array.  So, it doesn't matter if <code>print()</code> is virtual, since there are no child objects in the array, only parent objects.  Polymorphism works correctly only when using pointers/references to base classes.</p></li>\n</ol>\n\n<p>Try this instead:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass Parent {\npublic:\n    Parent(){}\n    virtual void print() {\n        std::cout &lt;&lt; \"I'm the parent!\" &lt;&lt; std::endl;\n    }\n};\n\nclass ChildOne : public Parent {\npublic:\n    ChildOne(){}\n    void print() override {\n        std::cout &lt;&lt; \"I'm childOne!\" &lt;&lt; std::endl;\n    }\n};\n\nclass ChildTwo : public Parent {\npublic:\n    ChildTwo() {}\n    void print() override {\n        std::cout &lt;&lt; \"I'm childTwo!\" &lt;&lt; std::endl;\n    }\n};\n\nint main() {\n    ChildOne c1;\n    ChildTwo c2;\n    Parent* arr[] = {&amp;c1, &amp;c2};\n\n    int n = 2;\n    for(int i = 0; i &lt; n; i++) {\n        arr[i]-&gt;print();\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "is_accepted": true, "score": 2, "last_activity_date": 1556148197, "creation_date": 1556148197, "answer_id": 55839826, "question_id": 55839632, "link": "https://stackoverflow.com/questions/55839632/when-i-call-a-function-in-child-class-it-is-instead-calling-the-parent-class-fun/55839826#55839826", "title": "When I call a function in child class it is instead calling the parent class function", "body": "<p>Firstly, the member function of <code>Parent</code> needs to be <code>virtual</code>.</p>\n\n<pre><code>class Parent\n{\n   public:\n       Parent(){}\n       virtual void print() {std::cout &lt;&lt; \"I'm the parent!\" &lt;&lt; std::endl;};\n};\n</code></pre>\n\n<p>Then the children need to override it.   In C++11 and later, it is advisable to use <code>override</code></p>\n\n<pre><code>class ChildOne : public Parent\n{\n   public:\n      ChildOne(){}\n      void print() override {std::cout &lt;&lt; \"I'm childOne!\" &lt;&lt; std::endl;};\n};\n</code></pre>\n\n<p>The second thing to address is that your code in <code>main()</code></p>\n\n<blockquote>\n<pre><code>Parent arr[] = {ChildOne(), ChildTwo()};\n</code></pre>\n</blockquote>\n\n<p>initialises two <code>Parent</code> objects by slicing i.e.  <code>arr[0]</code> and <code>arr[1]</code> are both of type <code>Parent</code>, not of <code>ChildOne</code> or <code>ChildTwo</code> respectively.</p>\n\n<p>To address that is it necessary that <code>arr</code> be an array of pointers, and initialised accordingly.</p>\n\n<pre><code> Parent *arr[] = {new ChildOne(), new ChildTwo()};\n</code></pre>\n\n<p>which can be followed up with </p>\n\n<pre><code>for(int i = 0; i &lt; 2; i++)\n{\n    arr[i]-&gt;print();\n}\n\nfor(int i = 0; i &lt; 2; i++)    // to avoid a memory leak\n{\n    delete arr[i];\n}\n//  don't use elements of `arr` here\n</code></pre>\n\n<p>A better way (C++11 and later) is to write <code>main()</code> is to use <code>std::unique_ptr</code> from the standard header <code>&lt;memory&gt;</code>)</p>\n\n<pre><code>std::unique_ptr&lt;Parent&gt; arr[] = {new ChildOne(), new ChildTwo()};\n</code></pre>\n\n<p>which allows doing away with the loop to release the elements of <code>arr</code>.   In C++14 and later, the objects in <code>arr</code> can be created using <code>std::make_unique()</code>.</p>\n"}], "owner": {"reputation": 23, "user_id": 8146555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7233289b7f6f520e50349aef1899ca6a?s=128&d=identicon&r=PG&f=1", "display_name": "Logarithm", "link": "https://stackoverflow.com/users/8146555/logarithm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 1, "accepted_answer_id": 55839826, "answer_count": 4, "score": 2, "last_activity_date": 1556155942, "creation_date": 1556146545, "last_edit_date": 1556155942, "question_id": 55839632, "link": "https://stackoverflow.com/questions/55839632/when-i-call-a-function-in-child-class-it-is-instead-calling-the-parent-class-fun", "title": "When I call a function in child class it is instead calling the parent class function", "body": "<p>I am working on a project where I have an array of children classes.\nI want to call an overridden child function from the array, but instead it calls the parent function. </p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass Parent {\npublic:\n    Parent(){}\n    void print() {\n        std::cout &lt;&lt; \"I'm the parent!\" &lt;&lt; std::endl;\n    }\n};\n\nclass ChildOne : public Parent {\npublic:\n    ChildOne(){}\n    void print() {\n        std::cout &lt;&lt; \"I'm childOne!\" &lt;&lt; std::endl;\n    }\n};\n\nclass ChildTwo : public Parent {\npublic:\n    ChildTwo() {}\n    void print() {\n        std::cout &lt;&lt; \"I'm childTwo!\" &lt;&lt; std::endl;\n    }\n};\n\n\nint main(int argc, char const *argv[]) {\n    Parent arr[] = {ChildOne(), ChildTwo()};\n    int n = 2;\n\n    for(int i = 0; i &lt; n; i++) {\n        arr[i].print();\n    }\n\n    return 0;\n}\n\n</code></pre>\n\n<p>The output I get is </p>\n\n<pre><code>I'm the parent!\nI'm the parent!\n</code></pre>\n\n<p>Where the output I want is </p>\n\n<pre><code>I'm childOne!\nI'm childTwo!\n</code></pre>\n"}, {"tags": ["c++", "windows", "filenames"], "comments": [{"owner": {"reputation": 5848, "user_id": 1075282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70efe94a6c2237ec96f429402a03a27d?s=128&d=identicon&r=PG", "display_name": "Renat", "link": "https://stackoverflow.com/users/1075282/renat"}, "edited": false, "score": 0, "creation_date": 1556145894, "post_id": 55839427, "comment_id": 98342804, "body": "Can this help? <a href=\"https://stackoverflow.com/questions/684684/normalize-file-path-with-winapi\" title=\"normalize file path with winapi\">stackoverflow.com/questions/684684/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 11330375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48f11dd8287dc72c04ad6b0640086c57?s=128&d=identicon&r=PG&f=1", "display_name": "GGa", "link": "https://stackoverflow.com/users/11330375/gga"}, "edited": false, "score": 0, "creation_date": 1556185953, "post_id": 55839530, "comment_id": 98355040, "body": "&quot;and finally do a case-insensitive comparison on the results&quot;  is exactly my problem. How do I perform it? I tried with <code>CompareString(LOCALE_INVARIANT,NORM_IGNORECASE ....</code> but it confuses <code>wei&#223;</code> and <code>weiss</code> that are two different directories."}], "tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 1, "last_activity_date": 1556145813, "creation_date": 1556145813, "answer_id": 55839530, "question_id": 55839427, "link": "https://stackoverflow.com/questions/55839427/how-to-compare-possibly-alternative-filenames-in-windows/55839530#55839530", "title": "How to compare possibly alternative filenames in Windows?", "body": "<p>Start by calling <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/fileapi/nf-fileapi-getfullpathnamea\" rel=\"nofollow noreferrer\">GetFullPathName</a> on each path, then do <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/fileapi/nf-fileapi-getlongpathnamea\" rel=\"nofollow noreferrer\">GetLongPathName</a> and finally do a case-insensitive comparison on the results.</p>\n\n<p><code>GetFullPathName</code> will give a fully qualified path to each file. <code>GetLongPathName</code> then gets the real name of each component of that path, so if somebody used a Windows 95/98 style short name for a file/directory, that wont confuse things.</p>\n"}, {"comments": [{"owner": {"reputation": 97, "user_id": 11330375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48f11dd8287dc72c04ad6b0640086c57?s=128&d=identicon&r=PG&f=1", "display_name": "GGa", "link": "https://stackoverflow.com/users/11330375/gga"}, "edited": false, "score": 0, "creation_date": 1556187905, "post_id": 55839634, "comment_id": 98356208, "body": "I&#39;m afraid I misled you with the question (please see the &quot;EDIT&quot;). However, <code>CreateFile()</code> does&#39;n work on some directories (like <code>C:\\System Volume Information</code> - but I cannot create e.g. a <code>C:\\System VOLUME Information</code> because it would be the same directory...). I&#39;ll try method 2. or somehing simpler. Thank you so much for your answer."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 2, "last_activity_date": 1556146914, "last_edit_date": 1556146914, "creation_date": 1556146576, "answer_id": 55839634, "question_id": 55839427, "link": "https://stackoverflow.com/questions/55839427/how-to-compare-possibly-alternative-filenames-in-windows/55839634#55839634", "title": "How to compare possibly alternative filenames in Windows?", "body": "<p>The best way (that I know of) to check if two filesystem paths refer to the same item, <em>without</em> resorting to string comparisons, is to either:</p>\n\n<ol>\n<li><p>open <code>HANDLE</code>s to the two paths using <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/fileapi/nf-fileapi-createfilew\" rel=\"nofollow noreferrer\"><code>CreateFile()</code></a>, then get the unique filesystem IDs from the <code>HANDLE</code>s and compare them for equality.  On FAT and NTFS, use the combination of <code>dwVolumeSerialNumber</code> and <code>nFileIndex(Low|High)</code> from <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/fileapi/nf-fileapi-getfileinformationbyhandle\" rel=\"nofollow noreferrer\"><code>GetFileInformationByHandle()</code></a>.  On ReFS, use the combination of <code>VolumeSerialNumber</code> and <code>FileId</code> from <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/winbase/nf-winbase-getfileinformationbyhandleex\" rel=\"nofollow noreferrer\"><code>GetFileInformationByHandleEx(FileIdInfo)</code></a> instead.  You can use <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/FileAPI/nf-fileapi-getvolumeinformationa\" rel=\"nofollow noreferrer\"><code>GetVolumeInformation()</code></a> to detect which filesystem is being used by each path.</p>\n\n<p>This approach is described in the <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/fileapi/ns-fileapi-_by_handle_file_information\" rel=\"nofollow noreferrer\"><code>BY_HANDLE_FILE_INFORMATION</code></a> and <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/winbase/ns-winbase-_file_id_info\" rel=\"nofollow noreferrer\"><code>FILE_ID_INFO</code></a> documentations, respectively:</p>\n\n<blockquote>\n  <p>The identifier (low and high parts) and the volume serial number uniquely identify a file on a single computer. To determine whether two open handles represent the same file, combine the identifier and the volume serial number for each file and compare them.</p>\n</blockquote>\n\n<p></p>\n\n<blockquote>\n  <p>The 128-bit file identifier for the file. The file identifier and the volume serial number uniquely identify a file on a single computer. To determine whether two open handles represent the same file, combine the identifier and the volume serial number for each file and compare them.</p>\n</blockquote></li>\n<li><p>a filesystem-agnostic approach is to use <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetdesktopfolder\" rel=\"nofollow noreferrer\"><code>SHGetDesktopFolder()</code></a> to get the <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/shobjidl_core/nn-shobjidl_core-ishellfolder\" rel=\"nofollow noreferrer\"><code>IShellFolder</code></a> interface for the root desktop of the Shell namespace, then resolve both paths to absolute PIDLs using the desktop's <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/shobjidl_core/nf-shobjidl_core-ishellfolder-parsedisplayname\" rel=\"nofollow noreferrer\"><code>IShellFolder::ParseDisplayName()</code></a> method (or use the standalone <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/shlobj_core/nf-shlobj_core-shparsedisplayname\" rel=\"nofollow noreferrer\"><code>SHParseDisplayName()</code></a> function), and then compare the PIDLs using the desktop's <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/shobjidl_core/nf-shobjidl_core-ishellfolder-compareids\" rel=\"nofollow noreferrer\"><code>IShellFolder::CompareIDs()</code></a> method.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 97, "user_id": 11330375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48f11dd8287dc72c04ad6b0640086c57?s=128&d=identicon&r=PG&f=1", "display_name": "GGa", "link": "https://stackoverflow.com/users/11330375/gga"}, "is_accepted": false, "score": 0, "last_activity_date": 1556203162, "creation_date": 1556203162, "answer_id": 55851915, "question_id": 55839427, "link": "https://stackoverflow.com/questions/55839427/how-to-compare-possibly-alternative-filenames-in-windows/55851915#55851915", "title": "How to compare possibly alternative filenames in Windows?", "body": "<p>That's the way it appears to work:</p>\n\n<p>1) At the start of the program, call a <code>setlocale(LC_CTYPE, \"\");</code></p>\n\n<p>2) Then compare the strings with <code>if(!data_from_CfileFind-&gt;txt.CompareNoCase(q))</code> (that calls <code>_wcsicmp</code> that calls <code>_wcsicmp_l</code>)</p>\n"}], "owner": {"reputation": 97, "user_id": 11330375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48f11dd8287dc72c04ad6b0640086c57?s=128&d=identicon&r=PG&f=1", "display_name": "GGa", "link": "https://stackoverflow.com/users/11330375/gga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1556203162, "creation_date": 1556145068, "last_edit_date": 1556194137, "question_id": 55839427, "link": "https://stackoverflow.com/questions/55839427/how-to-compare-possibly-alternative-filenames-in-windows", "title": "How to compare possibly alternative filenames in Windows?", "body": "<p>Unfortunately, directory/file names in Windows are case-insensitive.</p>\n\n<p>When I compare a text (input from user) with a directory name (coming from <code>CFileFind</code>), how can I check whether they mean the same directory or not?\nFor example <code>C:\\PIPPO\\</code> and <code>C:\\Pippo\\</code> are the same directory, while <code>C:\\Pipp\u00f2\\</code> is not the same (the last one has an accent).</p>\n\n<p>I'm trying with:</p>\n\n<pre><code>if(CompareString(LOCALE_INVARIANT,NORM_IGNORECASE,q,-1,data_from_CfileFind-&gt;txt.GetBuffer(),-1)==CSTR_EQUAL)\n</code></pre>\n\n<p>(<code>q</code> is [part of] the user input)</p>\n\n<p>It \"kind of works\", as it recognizes as same directory the case variations of Roman, Greek and Cyrillic alphabets, but it confuses <code>\"wei\u00df\"</code> and <code>\"weiss\"</code> (and they are two different directories on my disc), so it's not reliable.</p>\n\n<p>[the failing test is inspired by <a href=\"https://stackoverflow.com/questions/2279789/comparing-and-sorting-unicode-filenames\">Comparing and sorting Unicode filenames</a> : I have read it, but found no suitable solution - the links appear not to work)</p>\n\n<p>(I also read <a href=\"https://stackoverflow.com/questions/1061224/windows-invariant-culture-puzzle/1061324#1061324\">Windows Invariant Culture Puzzle</a> but I'm afraid I didn't fully understand about the \"cultures\").</p>\n\n<p>Any suggestion?</p>\n\n<p>Maybe I should call <code>CompareString()</code> with different parameters?  Or is there a better, easier approach?</p>\n\n<p>Please note that I don't need to sort names: I'd just like to check whether they mean the same directory (or file) to Windows or not.</p>\n\n<p>By \"Windows\", I mean from 2000 (or at least XP) and later.</p>\n\n<p><strong>EDIT</strong> (sorry, the question was not well-asked the first time)</p>\n\n<p>1) The path input by the user is not guaranteed to refer to an actually existing directory (in this case, of course, they are <em>not</em> the same directory).</p>\n\n<p>2) I know that files and directories can be referred to by very different names, because of links (hard or soft), <code>subst</code>s, network access with different name or IP to the same computer, etc... but I'm not asking to detect all of those cases.\nAll I'd like to check is whether a name written by the user is a case-variation of another existing one (and thus, for example, Windows would tell me that the file already exists if I try to create one with the same name but different case).</p>\n\n<p><strong>2nd EDIT</strong></p>\n\n<p>This does the job (at least, in the cases that I tried):</p>\n\n<pre><code>if(CompareStringOrdinal(q,-1,data_from_CfileFind-&gt;txt.GetBuffer(),-1,1)==CSTR_EQUAL)\n</code></pre>\n\n<p>But <code>CompareStringOrdinal()</code> is not available in older Windows versions.\nIs there any equivalent? </p>\n"}, {"tags": ["c++", "vectorization", "simd", "intrinsics", "avx2"], "comments": [{"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 2, "creation_date": 1556145282, "post_id": 55839379, "comment_id": 98342670, "body": "Does your compiler effectively vectorize for you if you ask it nicely?  If so, I would start here as it will teach you all sorts of tricks and may even do the job good enough that you won&#39;t need to do it yourself."}, {"owner": {"reputation": 23, "user_id": 4938574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16cdfe11c90d167d52e39f7a7938d543?s=128&d=identicon&r=PG", "display_name": "Elton", "link": "https://stackoverflow.com/users/4938574/elton"}, "reply_to_user": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 1, "creation_date": 1556188405, "post_id": 55839379, "comment_id": 98356517, "body": "Thanks for your comment @michael-dorgan, I&#39;m not sure how to proceed with this, though. Can you maybe share some reference/tutorial? I&#39;m using gcc 5.4.0."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 4938574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16cdfe11c90d167d52e39f7a7938d543?s=128&d=identicon&r=PG", "display_name": "Elton", "link": "https://stackoverflow.com/users/4938574/elton"}, "edited": false, "score": 1, "creation_date": 1556181193, "post_id": 55842399, "comment_id": 98352315, "body": "Thank you, Peter. I&#39;ll need some digestion since I just discovered this new world of intrinsic instructions."}], "tags": [], "owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": true, "score": 3, "last_activity_date": 1558102964, "last_edit_date": 1558102964, "creation_date": 1556170300, "answer_id": 55842399, "question_id": 55839379, "link": "https://stackoverflow.com/questions/55839379/how-do-i-efficiently-reorder-bytes-of-a-m256i-vector-convert-int32-t-to-uint8/55842399#55842399", "title": "How do I efficiently reorder bytes of a __m256i vector (convert int32_t to uint8_t)?", "body": "<p><strong>Probably your best bet for vectorization of this might be with <code>vpackssdw</code> / <code>vpackuswb</code>, and <code>vpermd</code> as a lane-crossing fixup after in-lane pack.</strong></p>\n\n<ul>\n<li><strong><code>_mm256_srli_epi32</code></strong> to shift the exponent (and sign bit) to the bottom in each 32-bit element.  A logical shift leaves a non-negative result regardless of the sign bit.</li>\n<li>Then pack pairs of vectors down to 16-bit with <strong><code>_mm256_packs_epi32</code></strong> (signed input, signed saturation of output).</li>\n<li>Then <strong>mask off the sign bit</strong>, leaving an 8-bit exponent.  We wait until now so we can do 16x <code>uint16_t</code> elements per instruction instead of 8x <code>uint32_t</code>.  Now you have 16-bit elements holding values that fit in <code>uint8_t</code> without overflowing.</li>\n<li>Then pack pairs of vectors down to 8-bit with <strong><code>_mm256_packus_epi16</code></strong> (signed input, <em>unsigned</em> saturation of output).  This actually matters, <code>packs</code> would clip some valid values because your data uses the full range of <code>uint8_t</code>.</li>\n<li><strong>VPERMD</strong> to shuffle the eight 32-bit chunks of that vector that came from each lane of 4x 256-bit input vectors.  Exactly the same <code>__m256i lanefix = _mm256_permutevar8x32_epi32(abcd, _mm256_setr_epi32(0,4, 1,5, 2,6, 3,7));</code> shuffle as in <a href=\"https://stackoverflow.com/questions/51778721/how-to-convert-32-bit-float-to-8-bit-signed-char/51779212#51779212\">How to convert 32-bit float to 8-bit signed char?</a>, which does the same pack after using FP->int conversion instead of right-shift to grab the exponent field.</li>\n</ul>\n\n<hr>\n\n<p>Per result vector, you have 4x load+shift (<code>vpsrld ymm,[mem]</code> hopefully), 2x <code>vpackssdw</code> shuffles, 2x <code>vpand</code> mask, 1x <code>vpackuswb</code>, and 1x <code>vpermd</code>.  That's 4 shuffles, so the best we can hope for on Intel HSW/SKL is 1 result vector per 4 clocks.  (Ryzen has better shuffle throughput, except for <code>vpermd</code> which is expensive.)</p>\n\n<p>But that should be achievable, so 32 bytes of input / 8 bytes of output per clock on average.</p>\n\n<p>The 10 total vector ALU uops (including the micro-fused load+ALU), and the 1 store should be able to execute in that time.  We have room for 16 total uops including loop overhead before the front-end becomes a worse bottleneck than shuffles.</p>\n\n<p>update: oops, <strong>I forgot to count unbiasing the exponent; that will take an extra <code>add</code>.  But you can do that after packing down to 8-bit.</strong>  (And optimize it to an XOR).  I don't think we can optimize it away or into something else, like into masking away the sign bit.</p>\n\n<p>With AVX512BW, you could do a byte-granularity <code>vpaddb</code> to unbias, with zero-masking to zero the high byte of each pair.  That would fold the unbiasing into the 16-bit masking.</p>\n\n<hr>\n\n<p><strong>AVX512F also has <a href=\"https://www.felixcloutier.com/x86/vpmovdb:vpmovsdb:vpmovusdb\" rel=\"nofollow noreferrer\"><code>vpmovdb</code></a> 32->8 bit truncation</strong> (without saturation), but only for single inputs.  So you'd get one 64-bit or 128-bit result from one input 256 or 512-bit vector, with 1 shuffle + 1 add per input instead of 2+1 shuffles + 2 zero-masked <code>vpaddb</code> per input vector.  (Both need the right shift per input vector to align the 8-bit exponent field with a byte boundary at the bottom of a dword)</p>\n\n<p>With <strong>AVX512VBMI, <a href=\"https://www.felixcloutier.com/x86/vpermt2b\" rel=\"nofollow noreferrer\"><code>vpermt2b</code></a></strong> would let us grab bytes from 2 input vectors.  But it costs 2 uops on CannonLake, so only useful on hypothetical future CPUs if it gets cheaper.  They can be the top byte of a dword, so we could start with <code>vpaddd</code> a vector to itself to left-shift by 1.  But we're probably best with a left-shift because the EVEX encoding of <a href=\"https://www.felixcloutier.com/x86/psllw:pslld:psllq\" rel=\"nofollow noreferrer\"><code>vpslld</code></a> or <code>vpsrld</code> <em>can</em> take the data from memory with an immediate shift count, unlike the VEX encoding.  So hopefully we get a single micro-fused load+shift uop to save front-end bandwidth.</p>\n\n<hr>\n\n<p><strong>The other option is to shift + blend, resulting in byte-interleaved results that are more expensive to fix up, unless you don't mind that order.</strong></p>\n\n<p>And byte-granularity blending (without AVX512BW) requires <code>vpblendvb</code> which is 2 uops.  (And on Haswell only runs on port 5, so potentially a huge bottleneck.  On SKL it's 2 uops for any vector ALU port.)</p>\n"}], "owner": {"reputation": 23, "user_id": 4938574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16cdfe11c90d167d52e39f7a7938d543?s=128&d=identicon&r=PG", "display_name": "Elton", "link": "https://stackoverflow.com/users/4938574/elton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 1, "accepted_answer_id": 55842399, "answer_count": 1, "score": 2, "last_activity_date": 1558102964, "creation_date": 1556144765, "question_id": 55839379, "link": "https://stackoverflow.com/questions/55839379/how-do-i-efficiently-reorder-bytes-of-a-m256i-vector-convert-int32-t-to-uint8", "title": "How do I efficiently reorder bytes of a __m256i vector (convert int32_t to uint8_t)?", "body": "<p>I need to optimize the following compression operation (on a server with AVX2 instructions available):</p>\n\n<p>take the exponents of an array of floats, shift and store to a uint8_t array</p>\n\n<p>I have little experience and was suggested to start with <a href=\"https://github.com/feltor-dev/vcl\" rel=\"nofollow noreferrer\">https://github.com/feltor-dev/vcl</a> library</p>\n\n<p>now that I have</p>\n\n<pre><code>uint8_t* uin8_t_ptr = ...;\nfloat* float_ptr = ...;\nfloat* final_ptr = float_ptr + offset;\n\nfor (; float_ptr &lt; final_ptr; float_ptr+=8) {\n    Vec8f vec_f = Vec8f().load(float_ptr);\n    Vec8i vec_i = fraction(vec_f) + 128; // range: 0~255\n    ...\n}\n</code></pre>\n\n<p>My question is how to efficiently store the vec_i results to the uint8_t array?</p>\n\n<p>I couldn't find relevant functions in the vcl library and was trying to explore the intrinsic instructions since I could access the __m256i data.</p>\n\n<p>My current understanding is to use something like _mm256_shuffle_epi8, but don't know the best way to do it efficiently.</p>\n\n<p>I wonder if trying to fully utilize the bits and store 32 elements every time (using a loop with float_ptr+=32) would be the way to go.</p>\n\n<p>Any suggestions are welcome. Thanks.</p>\n"}, {"tags": ["c++", "pointers", "reference"], "comments": [{"owner": {"reputation": 731, "user_id": 8184859, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9G1p6.jpg?s=128&g=1", "display_name": "Mode77", "link": "https://stackoverflow.com/users/8184859/mode77"}, "edited": false, "score": 0, "creation_date": 1556144788, "post_id": 55839359, "comment_id": 98342545, "body": "Who says it can&#39;t work that way?"}, {"owner": {"reputation": 11117, "user_id": 1554020, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/49118fbd7e64a00bc99b19d41e5e28e0?s=128&d=identicon&r=PG", "display_name": "yuri kilochek", "link": "https://stackoverflow.com/users/1554020/yuri-kilochek"}, "edited": false, "score": 3, "creation_date": 1556144851, "post_id": 55839359, "comment_id": 98342559, "body": "Because C++ is not Java. Drop superfluous dynamic allocation."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1556144902, "post_id": 55839359, "comment_id": 98342567, "body": "It works this way because that is simply the way the function author coded it. Both approaches work in general, it is just a matter of picking the desired one, and the author chose to use pointers. Though, in the first case, this would be safer: <code>Date d1(18, 06, 2019, 10, 15); Date d2(21, 06, 2019, 10, 10); vector&lt;Subject&gt; studentSuccess = student(&amp;d1, &amp;d2);</code> unless <code>student::operator()</code> is expected to take ownership of the <code>Date*</code> pointers."}, {"owner": {"reputation": 105, "user_id": 11355705, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TgQwvwJdI10/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reIP4dz94058lqDgIcDKDh5VZwaIw/mo/photo.jpg?sz=128", "display_name": "private7", "link": "https://stackoverflow.com/users/11355705/private7"}, "edited": false, "score": 0, "creation_date": 1556144943, "post_id": 55839359, "comment_id": 98342579, "body": "I tried to use references and it won&#39;t work"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1556145129, "post_id": 55839359, "comment_id": 98342624, "body": "If <code>operator()</code> is declared to take <code>Date*</code> pointers, you can&#39;t pass it <code>Date&amp;</code> references instead. You have to match what the declaration says to use."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1556146184, "post_id": 55839359, "comment_id": 98342872, "body": "More detail on the operator and how it function and we may be able to give you a nice, satisfying concrete answer. Without it you&#39;re not getting much better than what Yuri and Remy have pitched."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1556149482, "post_id": 55839359, "comment_id": 98343499, "body": "Because operator <code>new</code> returns a pointer, not a reference.    If you pass a pointer to a function, it is necessary for that function to accept a pointer somehow.   Get rid of the keyword <code>new</code> in your example, supply a version of your function that accept <code>const</code> reference, and your code will work."}], "owner": {"reputation": 105, "user_id": 11355705, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TgQwvwJdI10/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reIP4dz94058lqDgIcDKDh5VZwaIw/mo/photo.jpg?sz=128", "display_name": "private7", "link": "https://stackoverflow.com/users/11355705/private7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556144668, "creation_date": 1556144583, "last_edit_date": 1556144668, "question_id": 55839359, "link": "https://stackoverflow.com/questions/55839359/why-cant-overloaded-operator-accept-those-parameters-using-reference", "title": "Why can&#39;t overloaded operator accept those parameters using reference?", "body": "<p>I was doing programming exercise and I'm left in doubt why parameters of this overloaded operator need to be pointers and not references.</p>\n\n<pre><code>vector&lt;Subject&gt; studentSuccess= student(new Date(18, 06, 2019, 10, 15), new Date(21, 06, 2019, 10, 10));\n</code></pre>\n\n<p>overloaded operator in class needs to be like this to work:</p>\n\n<pre><code>vector&lt;Subject&gt; operator()(Date* start, Date* end) {..}\n</code></pre>\n\n<p>Question is why it can't work this way:</p>\n\n<pre><code>vector&lt;Subject&gt; operator()(Date&amp; start, Date&amp; end) {..}\n</code></pre>\n"}, {"tags": ["c++", "mapping", "raytracing", "euclidean-distance", "rasterizing"], "answers": [{"tags": [], "owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "is_accepted": true, "score": 1, "last_activity_date": 1556178527, "last_edit_date": 1556178527, "creation_date": 1556144938, "answer_id": 55839394, "question_id": 55839136, "link": "https://stackoverflow.com/questions/55839136/raytracing-normalizing-screenspace/55839394#55839394", "title": "Raytracing Normalizing Screenspace", "body": "<p>You have to take into account the aspect ratio of your image which, in general, will not be 1. What you're effectively doing at the moment is you're defining your image plane to be 2 units in width and 2 units in height. You then subdivide this image plane into a grid of <code>rterm::w</code> pixels along the x and <code>rterm::h</code> pixels along the y dimension. Note that the region through which you're casting rays into the world is still rectangular, you just subdivide it at different intervals along the x and y axis. When you then display the image through some standard mechanism that assumes the pixels are sampled at the same, regular interval along both dimensions, the image will appear distorted.</p>\n\n<p>What you typically want to do is work with the same spatial sampling rate along both x and y axis. The typical way to get there is to adjust the x or y dimension of the area through which you're casting your rays to match the aspect ratio of the resolution of the image you want to produce. The aspect ratio is commonly defined as the ratio between the x resolution and the y resolution:</p>\n\n<pre><code>float a = rterm::w * 1.0f / rterm::h;\n</code></pre>\n\n<p>If, for example, the image is more wide than it is tall, the aspect ratio will be larger than 1. If the image is taller than it is wide, the aspect ratio will be less than one. For a non-square image, to make the distance between pixel locations along x and y the same, we can either scale the x coordinate by <code>a</code> or scale the y coordinate by <code>1.0f / a</code>. For example</p>\n\n<pre><code>float x = a * (i / (rterm::w / 2.0f) - 1.0f);\nfloat y = j / (rterm::h / 2.0f) - 1.0f;\n</code></pre>\n\n<p>Note: The <code>* 1.0f</code> in the computation of the aspect ratio above is not redundant. It's there to force the computation to be carried out in <code>float</code>; otherwise you'd end up with an integer division (assuming you resolution is given by values of integral type)&hellip;</p>\n"}], "owner": {"reputation": 177, "user_id": 6722680, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/WMnO2.jpg?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/6722680/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 55839394, "answer_count": 1, "score": 0, "last_activity_date": 1556178527, "creation_date": 1556143012, "question_id": 55839136, "link": "https://stackoverflow.com/questions/55839136/raytracing-normalizing-screenspace", "title": "Raytracing Normalizing Screenspace", "body": "<p>I normalized my screen coords in the range from -1 to +1. Then I trace some rays starting from those normalized coords and calc the signed distance field (sdf) with the origin and direction vectors.</p>\n\n<pre><code>for (int i = 0; i &lt; rterm::w; i++)\n  for (int j = 0; j &lt; rterm::h; j++) {\n    float x = i / (rterm::w / 2.0f) - 1.0f;\n    float y = j / (rterm::h / 2.0f) - 1.0f;\n\n    glm::vec3 o = glm::vec3(x, y, -10.0f);\n    glm::vec3 d = glm::vec3(0.0f, 0.0f, 1.0f);\n\n    if (trace(o, d))\n      rterm::ctx-&gt;buffer[i + j * rterm::w] = '#';\n}\n</code></pre>\n\n<p>The sdf is working correctly but I must have a bug in my code. The sphere rasterized is no sphere, it's more like that.</p>\n\n<pre><code>+---------------------------------+\n|                                 |\n|                                 |\n|#########                        |\n|#################                |\n|#####################            |\n|#######################          |\n|#########################        |\n|#########################        |\n|#########################        |\n|#########################        |\n|#########################        |\n|#######################          |\n|#####################            |\n|#################                |\n|#########                        |\n|                                 |\n|                                 |\n+---------------------------------+\n</code></pre>\n\n<p>The sdf is just a simple sphere.</p>\n\n<pre><code>float sphere(glm::vec3 p, float r) {\n  return glm::length(p) - r;\n}\n\nfloat get(glm::vec3 p) {\n  float ds = sphere(p, 0.8f);\n\n  return ds;\n}\n</code></pre>\n\n<p>And here is my trace implementation.</p>\n\n<pre><code>bool trace(glm::vec3 o, glm::vec3 d) {\n  float depth = 1.0f;\n\n  for (int i = 0; i &lt; MARCH_STEPS; i++) {\n    float dist = sdf::get(o + d * depth);\n\n    if (dist &lt; EPSILON) return true;\n    depth += dist;\n    if (depth &gt;= CLIP_FAR) return false;\n  }\n\n  return false;\n}\n</code></pre>\n"}, {"tags": ["c++", "language-lawyer"], "comments": [{"owner": {"reputation": 2216, "user_id": 9585016, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Language Lawyer", "link": "https://stackoverflow.com/users/9585016/language-lawyer"}, "edited": false, "score": 0, "creation_date": 1556146741, "post_id": 55839117, "comment_id": 98343008, "body": "<a href=\"https://github.com/cplusplus/draft/pull/2442\" rel=\"nofollow noreferrer\">github.com/cplusplus/draft/pull/2442</a>"}, {"owner": {"reputation": 6126, "user_id": 1042389, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LgLxA.jpg?s=128&g=1", "display_name": "Belloc", "link": "https://stackoverflow.com/users/1042389/belloc"}, "reply_to_user": {"reputation": 2216, "user_id": 9585016, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Language Lawyer", "link": "https://stackoverflow.com/users/9585016/language-lawyer"}, "edited": false, "score": 0, "creation_date": 1556148790, "post_id": 55839117, "comment_id": 98343384, "body": "@LanguageLawyer Thanks a lot. I was looking for an issue or pull-request containing the string &quot;[basic.start.static]&quot; with no results."}, {"owner": {"reputation": 2216, "user_id": 9585016, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Language Lawyer", "link": "https://stackoverflow.com/users/9585016/language-lawyer"}, "edited": false, "score": 0, "creation_date": 1556149302, "post_id": 55839117, "comment_id": 98343465, "body": "You could look to the history of <code>basic.tex</code> for commits between the dates."}, {"owner": {"reputation": 6126, "user_id": 1042389, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LgLxA.jpg?s=128&g=1", "display_name": "Belloc", "link": "https://stackoverflow.com/users/1042389/belloc"}, "reply_to_user": {"reputation": 2216, "user_id": 9585016, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Language Lawyer", "link": "https://stackoverflow.com/users/9585016/language-lawyer"}, "edited": false, "score": 0, "creation_date": 1556194344, "post_id": 55839117, "comment_id": 98359785, "body": "@LanguageLawyer Great tip. This was the first time I looked at <code>source</code> and it was so much more simple to find what I wanted. I&#39;m delighted that you brought this to my attention.Thank you."}, {"owner": {"reputation": 2216, "user_id": 9585016, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Language Lawyer", "link": "https://stackoverflow.com/users/9585016/language-lawyer"}, "edited": false, "score": 0, "creation_date": 1556633858, "post_id": 55839117, "comment_id": 98499540, "body": "Or, even better, look at Blame for <code>basic.tex</code>."}, {"owner": {"reputation": 6126, "user_id": 1042389, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LgLxA.jpg?s=128&g=1", "display_name": "Belloc", "link": "https://stackoverflow.com/users/1042389/belloc"}, "reply_to_user": {"reputation": 2216, "user_id": 9585016, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Language Lawyer", "link": "https://stackoverflow.com/users/9585016/language-lawyer"}, "edited": false, "score": 0, "creation_date": 1556716556, "post_id": 55839117, "comment_id": 98526344, "body": "@LanguageLawyer Yeah! That&#39;s even better. Thanks again."}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "reply_to_user": {"reputation": 2216, "user_id": 9585016, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Language Lawyer", "link": "https://stackoverflow.com/users/9585016/language-lawyer"}, "edited": false, "score": 1, "creation_date": 1561713878, "post_id": 55839117, "comment_id": 100162731, "body": "@LanguageLawyer Would you mind making that an answer, so that this question disappears from the language lawyer unanswered question list?"}], "answers": [{"tags": [], "owner": {"reputation": 2216, "user_id": 9585016, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Language Lawyer", "link": "https://stackoverflow.com/users/9585016/language-lawyer"}, "is_accepted": true, "score": 2, "last_activity_date": 1561741872, "creation_date": 1561741872, "answer_id": 56810871, "question_id": 55839117, "link": "https://stackoverflow.com/questions/55839117/i-cant-find-the-issue-or-pull-request-in-the-c-draft-github-supporting-the-c/56810871#56810871", "title": "I can&#39;t find the issue or pull request in the C++ draft GitHub, supporting the change below in [basic.start.static]/2", "body": "<p>Moving the answer from a comment so that this question disappears from the unanswered question list: the relevant pull request is <a href=\"http://github.com/cplusplus/draft/pull/2442\" rel=\"nofollow noreferrer\">http://github.com/cplusplus/draft/pull/2442</a></p>\n"}], "owner": {"reputation": 6126, "user_id": 1042389, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LgLxA.jpg?s=128&g=1", "display_name": "Belloc", "link": "https://stackoverflow.com/users/1042389/belloc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 56810871, "answer_count": 1, "score": 0, "last_activity_date": 1561741872, "creation_date": 1556142905, "question_id": 55839117, "link": "https://stackoverflow.com/questions/55839117/i-cant-find-the-issue-or-pull-request-in-the-c-draft-github-supporting-the-c", "title": "I can&#39;t find the issue or pull request in the C++ draft GitHub, supporting the change below in [basic.start.static]/2", "body": "<p>N4791 - 2018-12-07 (This coincides with the wording in the <a href=\"http://eel.is/c++draft/basic.start#static-2\" rel=\"nofollow noreferrer\">current draft</a> for [basic.start.static]/2)</p>\n\n<blockquote>\n  <p>Constant initialization is performed if a variable or temporary object\n  with static or thread storage duration is initialized by a constant\n  initializer (7.7) for the entity. If constant initialization is not\n  performed, a variable with static storage duration (6.6.4.1) or thread\n  storage duration (6.6.4.2) is zero-initialized (9.3). Together,\n  zero-initialization and constant initialization are called static\n  initialization; all other initialization is dynamic initialization.\n  All static initialization strongly happens before (6.8.2.1) any\n  dynamic initialization. [Note: The dynamic initialization of non-local\n  variables is described in 6.8.3.3; that of local static variables is\n  described in 8.7. \u2014 end note]</p>\n</blockquote>\n\n<p>N4778 - 2018-10-08 (This is the draft preceding N4791)</p>\n\n<blockquote>\n  <p>A constant initializer for a variable or temporary object o is an\n  initializer whose full-expression is a constant expression, except\n  that if o is an object, such an initializer may also invoke constexpr\n  constructors for o and its subobjects even if those objects are of\n  non-literal class types. [Note: Such a class may have a non-trivial\n  destructor. \u2014 end note] Constant initialization is performed if a\n  variable or temporary object with static or thread storage duration is\n  initialized by a constant initializer for the entity. If constant\n  initialization is not performed, a variable with static storage\n  duration (6.6.4.1) or thread storage duration (6.6.4.2) is\n  zero-initialized (9.3). Together, zero-initialization and constant\n  initialization are called static initialization; all other\n  initialization is dynamic initialization. All static initialization\n  strongly happens before (6.8.2.1) any dynamic initialization. [Note:\n  The dynamic initialization of non-local variables is described in\n  6.8.3.3; that of local static variables is described in 8.7. \u2014 end note]</p>\n</blockquote>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1556142455, "post_id": 55838986, "comment_id": 98341898, "body": "What do you mean by &quot;doesn&#39;t work&quot;?  Doesn&#39;t compile?  Doesn&#39;t link?  Doesn&#39;t run?  Doesn&#39;t run correctly?  Are you given messages describing the problem?"}, {"owner": {"reputation": 189, "user_id": 11407682, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A8a1D1h7wi0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcizbpXUsr7_8nRaXb5F4Ba2msgpw/mo/photo.jpg?sz=128", "display_name": "Laura Pinguicha", "link": "https://stackoverflow.com/users/11407682/laura-pinguicha"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1556142558, "post_id": 55838986, "comment_id": 98341925, "body": "Sorry i didn&#39;t explain. It doesn&#39;t run. I have this error: &quot;internal compiler error: in make_decl_rtl, at varasm.c:1322&quot;"}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "edited": false, "score": 0, "creation_date": 1556142658, "post_id": 55838986, "comment_id": 98341951, "body": "You can&#39;t define array dimensions dynamically. It&#39;s not legal C++ though some compilers will let you. Still, it&#39;s not portable. You are likely using one that doesn&#39;t provide that extension."}, {"owner": {"reputation": 731, "user_id": 8184859, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9G1p6.jpg?s=128&g=1", "display_name": "Mode77", "link": "https://stackoverflow.com/users/8184859/mode77"}, "edited": false, "score": 0, "creation_date": 1556142662, "post_id": 55838986, "comment_id": 98341953, "body": "You should edit your post to include the compiler output."}, {"owner": {"reputation": 189, "user_id": 11407682, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A8a1D1h7wi0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcizbpXUsr7_8nRaXb5F4Ba2msgpw/mo/photo.jpg?sz=128", "display_name": "Laura Pinguicha", "link": "https://stackoverflow.com/users/11407682/laura-pinguicha"}, "edited": false, "score": 0, "creation_date": 1556142818, "post_id": 55838986, "comment_id": 98342010, "body": "ok. thanks. But there&#39;s no way of reading a double array from a file without knowing before what is the dimension of that array?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1556144051, "post_id": 55838986, "comment_id": 98342376, "body": "@LauraPinguicha think of the fun you could have debugging your program if you could allocate a dynamically sized object in the relatively small Automatic storage space. Some user could be a wiseguy and request millions of elements. Really easy way to cause a stack overflow."}, {"owner": {"reputation": 1205, "user_id": 2846068, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kHfXv.jpg?s=128&g=1", "display_name": "MasterAler", "link": "https://stackoverflow.com/users/2846068/masteraler"}, "edited": false, "score": 1, "creation_date": 1556144065, "post_id": 55838986, "comment_id": 98342378, "body": "@LauraPinguicha It is possible and easy. 1) Read about dynamic arrays 2) Use dynamic arrays"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1556144342, "post_id": 55838986, "comment_id": 98342438, "body": "You should probably report this to your compiler&#39;s developers. If Variable Length Arrays are allowed by the compiler this should work. If not, you should get a meaningful error message. You should not be able to crash the compiler."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9400869"}, "edited": false, "score": 0, "creation_date": 1562764211, "post_id": 55838986, "comment_id": 100479362, "body": "If an answer solved your question, please accept it."}], "answers": [{"comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1556143549, "post_id": 55839183, "comment_id": 98342223, "body": "Use of STL to qualify containers from the standard library is an anachronism."}], "tags": [], "owner": {"reputation": 731, "user_id": 8184859, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9G1p6.jpg?s=128&g=1", "display_name": "Mode77", "link": "https://stackoverflow.com/users/8184859/mode77"}, "is_accepted": false, "score": 3, "last_activity_date": 1556143889, "last_edit_date": 1556143889, "creation_date": 1556143293, "answer_id": 55839183, "question_id": 55838986, "link": "https://stackoverflow.com/questions/55838986/create-a-double-array-with-dimention-taken-from-file/55839183#55839183", "title": "create a double array with dimention taken from file", "body": "<p>As doug has stated, in C++, you cannot create arrays dynamically; the dimensions of a plain array must be predetermined and known at compile-time.</p>\n\n<p>In order to achieve an array with dimensions that are variable at run-time, you need to use a type that uses dynamic allocation, <a href=\"http://www.cplusplus.com/reference/vector/\" rel=\"nofollow noreferrer\">std::vector</a>.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user9400869"}, "is_accepted": false, "score": 0, "last_activity_date": 1556174648, "creation_date": 1556174648, "answer_id": 55843303, "question_id": 55838986, "link": "https://stackoverflow.com/questions/55838986/create-a-double-array-with-dimention-taken-from-file/55843303#55843303", "title": "create a double array with dimention taken from file", "body": "<p>The most basic version would be:</p>\n\n<pre><code>ifstream inputfile;\ninputfile.open (\"input.txt\");\n\nint n;\n\ninputfile &gt;&gt; n;\n\nint* dist = new int[n*n];\n\nfor (int i = 0; i &lt; n; i++){\n        for (int j = 0; j &lt; n; j++){\n            inputfile &gt;&gt; dist[i*n+j];\n        }\n}\ndelete[] dist;\n</code></pre>\n\n<p>But it as soon as you want to do more with the array: it is better to switch to <code>std::vector</code>, which handels all the allocation and reallocation for you.</p>\n"}], "owner": {"reputation": 189, "user_id": 11407682, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A8a1D1h7wi0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcizbpXUsr7_8nRaXb5F4Ba2msgpw/mo/photo.jpg?sz=128", "display_name": "Laura Pinguicha", "link": "https://stackoverflow.com/users/11407682/laura-pinguicha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1556174648, "creation_date": 1556142200, "last_edit_date": 1556143711, "question_id": 55838986, "link": "https://stackoverflow.com/questions/55838986/create-a-double-array-with-dimention-taken-from-file", "title": "create a double array with dimention taken from file", "body": "<p>Hey I'm having trouble with this part of code:</p>\n\n<pre><code>ifstream inputfile;\ninputfile.open (\"input.txt\");\n\nint n;\n\ninputfile &gt;&gt; n;\n\nint dist[n][n]{};\n\nfor (int i = 0; i &lt; n; i++){\n        for (int j = 0; j &lt; n; j++){\n            inputfile &gt;&gt; dist[i][j];\n        }\n}\n</code></pre>\n\n<p>this doesn't run, but this:</p>\n\n<pre><code>ifstream inputfile;\ninputfile.open (\"input.txt\");\n\nint n;\n\ninputfile &gt;&gt; n;\n\nint dist[6][6]{};\n\nfor (int i = 0; i &lt; n; i++){\n        for (int j = 0; j &lt; n; j++){\n            inputfile &gt;&gt; dist[i][j];\n        }\n}\n</code></pre>\n\n<p>does...</p>\n\n<p>I want to take the dimension of the double array from the input file, however I get this compilation error code:</p>\n\n<blockquote>\n  <p>internal compiler error: in make_decl_rtl, at varasm.c:1322\"</p>\n</blockquote>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "boost"], "comments": [{"owner": {"reputation": 370, "user_id": 9165544, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GORFUJH3-oM/AAAAAAAAAAI/AAAAAAAAAmw/4TnRbNsusW0/photo.jpg?sz=128", "display_name": "Iago Carvalho", "link": "https://stackoverflow.com/users/9165544/iago-carvalho"}, "edited": false, "score": 3, "creation_date": 1556142351, "post_id": 55838983, "comment_id": 98341865, "body": "I read your title 3 times and still don&#39;t understand it... The question is much better :)"}, {"owner": {"reputation": 1921, "user_id": 4807043, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/962dbe37a32959e5ead7734f28f46771?s=128&d=identicon&r=PG&f=1", "display_name": "Henry", "link": "https://stackoverflow.com/users/4807043/henry"}, "reply_to_user": {"reputation": 370, "user_id": 9165544, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GORFUJH3-oM/AAAAAAAAAAI/AAAAAAAAAmw/4TnRbNsusW0/photo.jpg?sz=128", "display_name": "Iago Carvalho", "link": "https://stackoverflow.com/users/9165544/iago-carvalho"}, "edited": false, "score": 0, "creation_date": 1556142439, "post_id": 55838983, "comment_id": 98341895, "body": "@lago I know, i really don&#39;t know how to describe this question in a short sentence.."}, {"owner": {"reputation": 370, "user_id": 9165544, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GORFUJH3-oM/AAAAAAAAAAI/AAAAAAAAAmw/4TnRbNsusW0/photo.jpg?sz=128", "display_name": "Iago Carvalho", "link": "https://stackoverflow.com/users/9165544/iago-carvalho"}, "edited": false, "score": 2, "creation_date": 1556142532, "post_id": 55838983, "comment_id": 98341919, "body": "By the way, this can be answered by how the compiler works. It initially reads your code and replaces all typedefs with their original types and thus continues compiling the code. Thus, if <code>Derived</code> originally was a subtype of <code>Base</code>, then <code>SM_Derived</code> will be a subtype of <code>SM_Base</code>"}, {"owner": {"reputation": 1921, "user_id": 4807043, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/962dbe37a32959e5ead7734f28f46771?s=128&d=identicon&r=PG&f=1", "display_name": "Henry", "link": "https://stackoverflow.com/users/4807043/henry"}, "reply_to_user": {"reputation": 370, "user_id": 9165544, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GORFUJH3-oM/AAAAAAAAAAI/AAAAAAAAAmw/4TnRbNsusW0/photo.jpg?sz=128", "display_name": "Iago Carvalho", "link": "https://stackoverflow.com/users/9165544/iago-carvalho"}, "edited": false, "score": 0, "creation_date": 1556143420, "post_id": 55838983, "comment_id": 98342189, "body": "@lago but when i do <code>std::weak_ptr&lt;SM_Base&gt; m_sm = sm &#47;&#47;(sm is a std::shared_ptr&lt;SM_Derived&gt; )</code>, the compiler throw error <code>no match operator =</code>. why is that?"}, {"owner": {"reputation": 370, "user_id": 9165544, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GORFUJH3-oM/AAAAAAAAAAI/AAAAAAAAAmw/4TnRbNsusW0/photo.jpg?sz=128", "display_name": "Iago Carvalho", "link": "https://stackoverflow.com/users/9165544/iago-carvalho"}, "edited": false, "score": 0, "creation_date": 1556144021, "post_id": 55838983, "comment_id": 98342368, "body": "Ohh, templates are invariant in C++. I was not remembering that... Sorry :(  However, there is a trick to overpass this error: <a href=\"http://cpptruths.blogspot.com/2015/11/covariance-and-contravariance-in-c.html\" rel=\"nofollow noreferrer\">cpptruths.blogspot.com/2015/11/&hellip;</a>"}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1556147398, "post_id": 55838983, "comment_id": 98343134, "body": "Your question remains unclear, in particular the title and also as it has nothing to do with <code>typedef</code> but instead with <code>template</code>. You should mention <code>template</code> somewhere in the title."}, {"owner": {"reputation": 1921, "user_id": 4807043, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/962dbe37a32959e5ead7734f28f46771?s=128&d=identicon&r=PG&f=1", "display_name": "Henry", "link": "https://stackoverflow.com/users/4807043/henry"}, "reply_to_user": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1556198589, "post_id": 55838983, "comment_id": 98362530, "body": "@Walter If I know it is about <code>template</code>, I would say it. How do you expect the patient knows what causes the illness? The patient only describes the symptom"}], "answers": [{"tags": [], "owner": {"reputation": 11117, "user_id": 1554020, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/49118fbd7e64a00bc99b19d41e5e28e0?s=128&d=identicon&r=PG", "display_name": "yuri kilochek", "link": "https://stackoverflow.com/users/1554020/yuri-kilochek"}, "is_accepted": false, "score": -1, "last_activity_date": 1556143495, "creation_date": 1556143495, "answer_id": 55839213, "question_id": 55838983, "link": "https://stackoverflow.com/questions/55838983/is-typedef-type-of-derived-type-considered-as-derived-type-of-a-typedef-type-of/55839213#55839213", "title": "is typedef type of derived type considered as derived type of a typedef type of corresponding base type", "body": "<p>No. This property is called <a href=\"https://docs.microsoft.com/en-us/dotnet/standard/generics/covariance-and-contravariance\" rel=\"nofollow noreferrer\">covariance</a> and C++ template parameters don't have it (i.e. they are invariant).</p>\n"}, {"tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": false, "score": 2, "last_activity_date": 1556147117, "last_edit_date": 1556147117, "creation_date": 1556146800, "answer_id": 55839668, "question_id": 55838983, "link": "https://stackoverflow.com/questions/55838983/is-typedef-type-of-derived-type-considered-as-derived-type-of-a-typedef-type-of/55839668#55839668", "title": "is typedef type of derived type considered as derived type of a typedef type of corresponding base type", "body": "<p>Introducing new names through <code>typedef</code> (or <code>using</code>) does not influence the relationship between the types.</p>\n\n<p>Thus, the question is whether <code>msm::back::state_machine&lt;Derived&gt;</code> is a subtype of <code>msm::back::state_machine&lt;Base&gt;</code>.</p>\n\n<p>Which it isn't.</p>\n\n<p>You can also easily check such things with a tiny bit of code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\nint main() {\n    std::cout &lt;&lt; std::is_base_of&lt;SM_Base, SM_Derived&gt;::value;\n}\n</code></pre>\n"}], "owner": {"reputation": 1921, "user_id": 4807043, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/962dbe37a32959e5ead7734f28f46771?s=128&d=identicon&r=PG&f=1", "display_name": "Henry", "link": "https://stackoverflow.com/users/4807043/henry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1556147117, "creation_date": 1556142189, "last_edit_date": 1556142605, "question_id": 55838983, "link": "https://stackoverflow.com/questions/55838983/is-typedef-type-of-derived-type-considered-as-derived-type-of-a-typedef-type-of", "title": "is typedef type of derived type considered as derived type of a typedef type of corresponding base type", "body": "<p>I have the following code: </p>\n\n<pre><code>// Assumption: Base is the base class of Derived\n\ntypedef msm::back::state_machine&lt;Base&gt;  SM_Base;\ntypedef msm::back::state_machine&lt;Derived&gt;  SM_Derived;\n</code></pre>\n\n<p>So is <code>SM_Derived</code> a subtype of <code>SM_Base</code> and I can do all the regular polymorphic operations?</p>\n"}, {"tags": ["c++", "visual-studio", "static-libraries"], "answers": [{"comments": [{"owner": {"reputation": 14272, "user_id": 131871, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/de1084aaf71ae0beb2345a70d4d8a778?s=128&d=identicon&r=PG", "display_name": "CodeFusionMobile", "link": "https://stackoverflow.com/users/131871/codefusionmobile"}, "edited": false, "score": 0, "creation_date": 1556147645, "post_id": 55839169, "comment_id": 98343178, "body": "Yup, I can add those additional configurations, but I need both configurations to build in order to satisfy the dependencies for all of my projects. This gets me to being able to build the two dependency trees separately I guess and I could do a batch build. Is that what you&#39;re suggesting?"}], "tags": [], "owner": {"reputation": 1273, "user_id": 2287427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b12dacf80e8ab397c3fdcd4f0d49c32d?s=128&d=identicon&r=PG", "display_name": "Dave S", "link": "https://stackoverflow.com/users/2287427/dave-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1556143181, "creation_date": 1556143181, "answer_id": 55839169, "question_id": 55838979, "link": "https://stackoverflow.com/questions/55838979/build-multiple-versions-of-static-library-from-one-visual-studio-project/55839169#55839169", "title": "Build multiple versions of static library from one Visual Studio project", "body": "<p>Visual Studio lets you have multiple build configurations for a solution.  By default for C++ you'll get Debug and Release configurations, but you can add additional configurations by going to</p>\n\n<pre><code>Build &gt; Configuration Manager &gt; Active Solution Configuration (pull down list) &gt; New\n</code></pre>\n\n<p>When choosing New you can copy settings from an existing configuration (Debug, Release). So you can create configurations \"Release - Options A\", \"Release - Options B\" then edit the project settings for each to set different preprocessor directives.</p>\n\n<p>In the project settings you can also set different DLL names and/or output folders.</p>\n"}], "owner": {"reputation": 14272, "user_id": 131871, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/de1084aaf71ae0beb2345a70d4d8a778?s=128&d=identicon&r=PG", "display_name": "CodeFusionMobile", "link": "https://stackoverflow.com/users/131871/codefusionmobile"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 352, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1556143181, "creation_date": 1556142171, "question_id": 55838979, "link": "https://stackoverflow.com/questions/55838979/build-multiple-versions-of-static-library-from-one-visual-studio-project", "title": "Build multiple versions of static library from one Visual Studio project", "body": "<p>I have several projects A through F that each depend on static library L. Each is a project in my visual studio solution.</p>\n\n<p>Unfortunately, project F needs a slightly different flavor of the static library to be built (currently implemented by defining a preprocessor directive in the build options to select a different code segment using if/endif directives, since the special case code adds additional dependencies that projects A-E don't care about).</p>\n\n<p>I currently solve this problem by making a second library project \"L_withflag\" that includes all of the same source files, and that works just fine. I'm wondering if there is an easier way that doesn't require maintaining two separate projects with the same underlying codebase.</p>\n\n<p>Is there a way that I can get static library project L to build two outputs, one with the flag set and one without (e.g. L.lib and L_withflag.lib) and allow each project to specify which library it wants as input?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 441, "user_id": 10101256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUiTR.png?s=128&g=1", "display_name": "PStarczewski", "link": "https://stackoverflow.com/users/10101256/pstarczewski"}, "edited": false, "score": 0, "creation_date": 1556142266, "post_id": 55838961, "comment_id": 98341846, "body": "Yes, you can use regex to cherrypick numbers which are separated by something other than other number."}], "answers": [{"tags": [], "owner": {"reputation": 441, "user_id": 10101256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUiTR.png?s=128&g=1", "display_name": "PStarczewski", "link": "https://stackoverflow.com/users/10101256/pstarczewski"}, "is_accepted": false, "score": 0, "last_activity_date": 1556142792, "creation_date": 1556142792, "answer_id": 55839088, "question_id": 55838961, "link": "https://stackoverflow.com/questions/55838961/extract-only-integers-from-string/55839088#55839088", "title": "Extract only integers from string", "body": "<p>There are many various methods for doing that. For example you can use <code>&lt;regex&gt;</code> and pick them, but I think extracting from string stream will be easier.</p>\n\n<pre><code>void extractIntegerWords(string str)\n{\n  stringstream ss;\n\n  /* Storing the whole string into string stream */\n  ss &lt;&lt; str;\n\n  /* Running loop till the end of the stream */\n  string temp;\n  int found;\n\n  while (!ss.eof()) {\n\n    /* extracting word by word from stream */\n    ss &gt;&gt; temp;\n\n    /* Checking the given word is integer or not */\n    if (stringstream(temp) &gt;&gt; found)\n        cout &lt;&lt; found &lt;&lt; \" \";\n\n    /* To save from space at the end of string */\n    temp = \"\";\n  }\n}\n\n// Driver code \nint main()\n{\n  string str = \"25 1 3; 5 9 2; 1 3 6\";\n  extractIntegerWords(str);\n  return 0;\n}\n</code></pre>\n\n<p>Code taken from here: <a href=\"https://www.geeksforgeeks.org/extract-integers-string-c/\" rel=\"nofollow noreferrer\">Extract integers from string</a></p>\n"}, {"tags": [], "owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "is_accepted": false, "score": 0, "last_activity_date": 1556143672, "last_edit_date": 1556143672, "creation_date": 1556142820, "answer_id": 55839094, "question_id": 55838961, "link": "https://stackoverflow.com/questions/55838961/extract-only-integers-from-string/55839094#55839094", "title": "Extract only integers from string", "body": "<p>if you want to extract them from a string having any content (you do not know what are the other characters) you can use a <em>stringstream</em></p>\n\n<p>For instance supposing the number are <em>int</em> and wanted the extracted <em>int</em> in a <em>list</em> :</p>\n\n<pre><code>#include &lt;sstream&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;list&gt;\n\nint main(int argc, char ** argv)\n{\n  if (argc == 2) {\n    std::stringstream iss(argv[1]);\n    std::list&lt;int&gt; l;\n\n    for (;;) {\n      int v;\n\n      if (iss &gt;&gt; v)\n        // ok read an int\n        l.push_back(v);\n      else {\n        // was not an int, clear error\n        iss.clear();\n\n        // try to read a string to remove non digit\n        std::string s;\n\n        if (!(iss &gt;&gt; s))\n          // EOF, end of the initial string\n          break;\n      }\n    }\n\n    for (auto v : l)\n      std::cout &lt;&lt; v &lt;&lt; ' ';\n    std::cout &lt;&lt; std::endl;\n  }\n\n  return 0;\n}\n</code></pre>\n\n<p>Compilation and execution :</p>\n\n<pre><code>pi@raspberrypi:~ $ g++ -pedantic -Wall -Wextra c.cc\npi@raspberrypi:~ $ ./a.out \"25 1 3; 5 9 2; 1 3 6\"\n25 1 3 5 9 2 1 3 6 \npi@raspberrypi:~ $\n</code></pre>\n\n<p>Note in that solution \"123 a12 13\" will produce 123 and 13, not 123 12 13.</p>\n\n<p>To produce 123 12 13 from \"123 a12 13\" just read a character rather than a string in case of an error :</p>\n\n<pre><code>#include &lt;sstream&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;list&gt;\n\nint main(int argc, char ** argv)\n{\n  if (argc == 2) {\n    std::stringstream iss(argv[1]);\n    std::list&lt;int&gt; l;\n\n    for (;;) {\n      int v;\n\n      if (iss &gt;&gt; v)\n        l.push_back(v);\n      else {\n        iss.clear();\n\n        char c;\n\n        if (!(iss &gt;&gt; c))\n          break;\n      }\n    }\n\n    for (auto v : l)\n      std::cout &lt;&lt; v &lt;&lt; ' ';\n    std::cout &lt;&lt; std::endl;\n  }\n\n  return 0;\n}\n</code></pre>\n\n<p>Compilation and execution :</p>\n\n<pre><code>pi@raspberrypi:~ $ g++ -pedantic -Wall -Wextra c.cc\npi@raspberrypi:~ $ ./a.out \"25 1 3; 5 9 2; 1 3 6\"\n25 1 3 5 9 2 1 3 6 \npi@raspberrypi:~ $ ./a.out \"123 a12 13\"\n123 12 13 \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "is_accepted": false, "score": 0, "last_activity_date": 1556145766, "creation_date": 1556145766, "answer_id": 55839525, "question_id": 55838961, "link": "https://stackoverflow.com/questions/55838961/extract-only-integers-from-string/55839525#55839525", "title": "Extract only integers from string", "body": "<p>A one pass solution can scan the string looking for a range starting with the next digit available and stopping where there is a non-digit character. Then create an integer from the characters in the range and continue until the end of the string is reached.</p>\n\n\n\n<pre class=\"lang-c++ prettyprint-override\"><code>vector&lt;int&gt; extract_ints( std::string const&amp; str ) {\n  auto&amp; ctype = std::use_facet&lt;std::ctype&lt;char&gt;&gt;(std::locale{});\n  auto p1 = str.data(), p2 = str.data();\n\n  vector&lt;int&gt; v;\n  for (auto e = &amp;str.back() + 1; p1 &lt; e; p1++) {\n    p1 = ctype.scan_is( ctype.digit, p1, e );\n    p2 = ctype.scan_not( ctype.digit, p1 + 1, e );\n    int x = 0;\n    while (p1 != p2) {\n      x = (x * 10) + (*p1 - '0');\n      p1++;\n    }\n    v.push_back(x);\n  }\n  return v;\n}\n</code></pre>\n\n<p>Example:</p>\n\n<pre class=\"lang-c++ prettyprint-override\"><code>auto v = extract_ints(\"[1,2,3]\");\nfor (int i=0; i&lt;v.size(); i++)\n  cout &lt;&lt; v[i] &lt;&lt; \" \";\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-c++ prettyprint-override\"><code>1 2 3\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1334, "user_id": 969968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5821e6e6e5740184c507fa045e963f0?s=128&d=identicon&r=PG&f=1", "display_name": "DannyK", "link": "https://stackoverflow.com/users/969968/dannyk"}, "is_accepted": false, "score": 2, "last_activity_date": 1556147347, "creation_date": 1556147347, "answer_id": 55839729, "question_id": 55838961, "link": "https://stackoverflow.com/questions/55838961/extract-only-integers-from-string/55839729#55839729", "title": "Extract only integers from string", "body": "<p>I would just use the <a href=\"http://www.partow.net/programming/strtk/\" rel=\"nofollow noreferrer\">String Toolkit</a> to parse the strings using spaces, brackets and semicolon as the delimiters.</p>\n\n<p>I have answered the questions before <a href=\"https://stackoverflow.com/questions/31650083/how-to-extract-data-from-a-line-which-has-fields-separated-by-character-in-c/31656570#31656570\">Extract Data from a line</a></p>\n\n<p>I paraphrased that code below:</p>\n\n<pre><code>#include &lt;strtk.hpp&gt;   // http://www.partow.net/programming/strtk\n\nstd::string src = \"[25 1 3; 5 9 2; 1 3 6]\";\n\nstd::string delims(\" [];\");\n\nstd::vector&lt;int&gt; values;\n\nstrtk::parse(src, delims, values );\n\n// values will contain all the integers in the string.\n// if you want to get floats &amp; integers the vector needs to be float\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11407664"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 1, "answer_count": 4, "score": 1, "last_activity_date": 1556173742, "creation_date": 1556142022, "last_edit_date": 1556173742, "question_id": 55838961, "link": "https://stackoverflow.com/questions/55838961/extract-only-integers-from-string", "title": "Extract only integers from string", "body": "<p>I want to extract integers from a certain string in order to perform mathematical operations on them. </p>\n\n<p>For example for a string </p>\n\n<blockquote>\n  <p>25 1 3; 5 9 2; 1 3 6</p>\n</blockquote>\n\n<p>I only want to extract </p>\n\n<blockquote>\n  <p>25, 1, 3, 5, 9, 2, 1, 3, 6 </p>\n</blockquote>\n\n<p>is there a way I can do that?</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1556142171, "post_id": 55838791, "comment_id": 98341826, "body": "This is a code only answer. You can salvage it by explaining what the asker got wrong and why your solution solves it. Also remember that <code>while(!infile.eof())</code> is <a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\">a subtle-but-nasty bug</a> and should not be reproduced in an answer."}, {"owner": {"reputation": 980, "user_id": 10185183, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oUA_ZF9CW5c/AAAAAAAAAAI/AAAAAAAACX0/TLhc82gWtsI/photo.jpg?sz=128", "display_name": "arsdever", "link": "https://stackoverflow.com/users/10185183/arsdever"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1558610473, "post_id": 55838791, "comment_id": 99162741, "body": "@Michael Torres did my answer solved your problem? If som accept it"}], "tags": [], "owner": {"reputation": 980, "user_id": 10185183, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oUA_ZF9CW5c/AAAAAAAAAAI/AAAAAAAACX0/TLhc82gWtsI/photo.jpg?sz=128", "display_name": "arsdever", "link": "https://stackoverflow.com/users/10185183/arsdever"}, "is_accepted": false, "score": 0, "last_activity_date": 1556141494, "last_edit_date": 1556141494, "creation_date": 1556141154, "answer_id": 55838791, "question_id": 55838557, "link": "https://stackoverflow.com/questions/55838557/problem-with-nested-for-loop-in-jump-game/55838791#55838791", "title": "Problem with Nested for loop in Jump Game", "body": "<p>Try the following:</p>\n\n<pre><code>void readFromFile(int list[], int &amp;size, ifstream&amp; infile)\n{\n    size = 0;\n    if(!infile.is_open())\n        return;\n\n    while(!infile.eof())\n    {\n        infile &gt;&gt; list[size++];\n    }\n    infile.close();\n}\n\nbool isTheLastReachable(int list[], int index, int size)\n{\n    if(index &lt; size)\n    {\n        if(index)\n        {\n            for(int i = 0; i &lt; list[index]; ++i)\n                if(isTheLastReachable(list, index + i, size))\n                    return true;\n\n            return false;\n        }\n        else\n            return false;\n    }\n    return true;\n}\n\n\nbool getToLastIndex(int list[], int size)\n{\n    return isTheLastReachable(list, 0, size);\n}\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 11200216, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-W8qj4UWktDM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re9XPzy2gu4L7NvMDjoIGtPY2K-yw/mo/photo.jpg?sz=128", "display_name": "101001", "link": "https://stackoverflow.com/users/11200216/101001"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556143697, "creation_date": 1556140037, "last_edit_date": 1556143697, "question_id": 55838557, "link": "https://stackoverflow.com/questions/55838557/problem-with-nested-for-loop-in-jump-game", "title": "Problem with Nested for loop in Jump Game", "body": "<p>I need help creating a nested <code>for</code> loop.  This is for \"Jump Game\" and basically there is an array with some numbers in it.  The number at each array[position]\nhas a certain number of times it can jump to reach the end. Ex: <code>[2 3 1 1 4 0]</code> so <code>array[0] = 2</code> and it can jump 2 or 1 places, <code>array[1] = 3</code> and can jump 3,2, or 1 places.  Ex: <code>[3 2 1 0 4 0]</code> so you basically can never reach the position in the array.  </p>\n\n<p>I've been going at it for a while and can't come up with the loop.  The <code>readFromFile</code> just basically creates the array size.  Now that I have the size I need to check each number which I am stuck on.</p>\n\n<pre><code>void readFromFile(int list[], int&amp; size, ifstream&amp; infile)\n{\n    infile &gt;&gt; list[size];\n\n    while (!infile.eof()) // Loops until end of file is reached\n    {\n        size++;\n        infile &gt;&gt; list[size];\n    }\n\n    infile.close();\n    return;\n\n}\n\nbool getToLastIndex(int list[], int size)\n{\n    for(i=0; i&lt; size;i++)\n    {\n        if(list[i] == 0)\n            break;\n        j=i+list[i]; //Resetting it for a new jump or section on array?\n        i=j;\n\n        for(int j=0; j &lt;= list[i]; j++)\n        {\n            list[j] == return true;\n        }\n    }\n}\n</code></pre>\n\n<p>I want to be able to use\n<code>getToLastIndex(list,size);</code></p>\n\n<pre><code>if(getToLastIndex() == true)\n{\n    cout &lt;&lt; \"Mario FTW\" &lt;&lt; endl; // Got to the end\n}\nelse\n    cout &lt;&lt; \"This bridge has the workings of bowser all over it &gt;:( \" &lt;&lt; endl; //Couldnt make it to the end\n</code></pre>\n\n<p>The homework is Mario themed... I didn't choose the outputs</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 3, "creation_date": 1556140195, "post_id": 55838548, "comment_id": 98341167, "body": "<code>pointer = &amp;arr[length];...lookup.push_back(tuple&lt;string, int, vector &lt;Log&gt; *&gt;(ip, 1, pointer));</code> -- You should not store pointers to vector items, as your code is attempting to do.  If the vector is resized, those pointer values can become invalidated."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1556140362, "post_id": 55838548, "comment_id": 98341237, "body": "<a href=\"https://stackoverflow.com/questions/27735754/validity-of-pointers-to-internal-data-structure-when-reallocating-a-stdvector\">Possible duplicate</a>"}, {"owner": {"reputation": 11, "user_id": 11407498, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-RR0Q-_HrG-4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd3MOB2R99HRS72htjqsCITBBPETQ/mo/photo.jpg?sz=128", "display_name": "Aljosa", "link": "https://stackoverflow.com/users/11407498/aljosa"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1556141777, "post_id": 55838548, "comment_id": 98341698, "body": "@PaulMcKenzie thank you for fast answer. But where can I store those information if they shouldn&#39;t be located in vectors?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1556142410, "post_id": 55838548, "comment_id": 98341886, "body": "Store in the <code>vector</code>, but don&#39;t use pointers or be very very careful how you use pointers to it. Helpful reading <a href=\"https://stackoverflow.com/questions/6438086/iterator-invalidation-rules\">Iterator invalidation rules</a>. For a <code>vector</code> pointers and iterators are pretty much the same thing (the same can&#39;t be said for all containers, though)."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1556155797, "post_id": 55838548, "comment_id": 98344513, "body": "@Aljosa -- You could try a <code>std::list</code>, where the pointers are not invalidated if items are added or removed (assuming you&#39;re not removing the current item you&#39;re pointing to)."}], "owner": {"reputation": 11, "user_id": 11407498, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-RR0Q-_HrG-4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd3MOB2R99HRS72htjqsCITBBPETQ/mo/photo.jpg?sz=128", "display_name": "Aljosa", "link": "https://stackoverflow.com/users/11407498/aljosa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 159, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1556140063, "creation_date": 1556140011, "last_edit_date": 1556140063, "question_id": 55838548, "link": "https://stackoverflow.com/questions/55838548/stdlength-error-memory-location-0x00000a31ebff050-with-vectors", "title": "std::length_error memory location 0x00000A31EBFF050 with vectors", "body": "<p>I am creating one application and got stuck with vector \"reallocation\". What I try to do is pass tuple<code>&lt;string, int, vector&lt;Log&gt; *&gt;</code> where 3rd element is pointer pointing on <code>vector&lt;vector&lt;Log&gt;&gt;</code>. Doing that on this way:  <code>Vector &lt;Log&gt; *pointer = &amp;arr[length];</code> . And when I try to print address it works as expected. Problem is happening when I try this : </p>\n\n<p><code>(*get&lt;2&gt;(*it)).resize(++get&lt;1&gt;(*it));</code></p>\n\n<p>Trying to reallocate like <code>(*pointer).resize();</code> Works </p>\n\n<p>What I am trying to make is tuple (something like relational databases) : </p>\n\n<p><code>tuple&lt;string, int, vector &lt;Log&gt; *&gt;</code> is unique id, number of entries for that id, pointer to address of first element of that row</p>\n\n<p>So basically I will have tuple with basic info about unique ids, number of rows for each IP and pointer to that specific row. </p>\n\n<p>First time when IP comes it's added to tuple and it's data stored on first place. Each other same IP will be checked in tuple and when it's found it's data need to be stored in next free space (with resizing by 1). Hope it's not too complicated to understand.</p>\n\n<p>Here is code I am currently using : (note that variable <code>a</code> is type <code>Log</code>)</p>\n\n<pre><code>typedef vector&lt;tuple&lt;string, int, vector &lt;Log&gt;*&gt;&gt; lookup_list;\n\nlookup_list lookup;\nvector&lt;vector&lt;Log&gt;&gt; arr;\nvector &lt;Log&gt; *pointer;\nint length = 0;\nstring ip;\n\nfor (int i = 0; i &lt; arr_size; i++){\n ip = a[i].ip_address;\n\nauto it = find_if(lookup.begin(), lookup.end(), [ip](const tuple&lt;string, int, vector &lt;Log&gt;*&gt;&amp; e){\n     return get&lt;0&gt;(e) == ip;\n});\n\nif (it == lookup.end()){\n   arr.resize(length + 1);\n   arr[length].resize(1);\n   pointer = &amp;arr[length];\n   arr[length][0] = a[i];\n   lookup.push_back(tuple&lt;string, int, vector &lt;Log&gt; *&gt;(ip, 1, pointer));\n   length++;\n}\nelse {\n   get&lt;1&gt;(*it)++;\n   (*get&lt;2&gt;(*it)).resize(get&lt;1&gt;(*it));\n   (*get&lt;2&gt;(*it))[(get&lt;1&gt;(*it))-1] = a[i];\n}\n</code></pre>\n\n<p>Error I am getting is basically either trying to access memory that is out of bounds or _Xlength_error(\"vector too long\");</p>\n\n<p>Should note that this happens on first IP that is same size, so not sure why that error is triggered...</p>\n"}, {"tags": ["c++", "opengl", "cmake"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1556141294, "post_id": 55838412, "comment_id": 98341532, "body": "Why have you are tried approaches for resolve <code>MSB4019</code> error? You have <code>msb4062</code>, so try to resolve it instead. E.g. with that question: <a href=\"https://stackoverflow.com/questions/52569137/error-msb4062-the-setenv-task-could-not-be-loaded-from-the-assembly\" title=\"error msb4062 the setenv task could not be loaded from the assembly\">stackoverflow.com/questions/52569137/&hellip;</a>."}, {"owner": {"reputation": 443, "user_id": 10595346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4860980161b94e063e64c413f2d797e6?s=128&d=identicon&r=PG&f=1", "display_name": "Kan", "link": "https://stackoverflow.com/users/10595346/kan"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1556175343, "post_id": 55838412, "comment_id": 98349344, "body": "I didn&#39;t see it ! Thanks, I will try tonight"}], "owner": {"reputation": 443, "user_id": 10595346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4860980161b94e063e64c413f2d797e6?s=128&d=identicon&r=PG&f=1", "display_name": "Kan", "link": "https://stackoverflow.com/users/10595346/kan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 141, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556140317, "creation_date": 1556139292, "last_edit_date": 1556140317, "question_id": 55838412, "link": "https://stackoverflow.com/questions/55838412/im-getting-trouble-to-compile-the-http-www-opengl-tutorial-org-tutorial", "title": "I&#39;m getting trouble to compile the http://www.opengl-tutorial.org/ tutorial", "body": "<p>I read the tutorial (<a href=\"http://www.opengl-tutorial.org/fr/beginners-tutorials/tutorial-1-opening-a-window/\" rel=\"nofollow noreferrer\">http://www.opengl-tutorial.org/fr/beginners-tutorials/tutorial-1-opening-a-window/</a>) and i'm trying to compile the project with cmake.\nI have the last version of cmake (3.14.3)\nMy drivers are up to date\nI have the visual studio compiler</p>\n\n<p>When i follow the tutorial, i do the same thing but my cmake don't let me compile. I have this following erros when i try to compile the src folder of the tutorial: </p>\n\n<p>Make Error at CMakeLists.txt:3 (project):\n  Failed to run MSBuild command:</p>\n\n<pre><code>C:/Windows/Microsoft.NET/Framework/v4.0.30319/MSBuild.exe\n</code></pre>\n\n<p>to get the value of VCTargetsPath:</p>\n\n<pre><code>Microsoft (R) Build Engine, version 4.7.3190.0\n\n[Microsoft .NET Framework, Version 4.0.30319.42000]\n\nCopyright (C) Microsoft Corporation. Tous droits r\u201aserv\u201as.\n\n\n\nLa g\u201an\u201aration a d\u201amarr\u201a 24/04/2019 22:51:20.\n\nProjet \"C:\\Users\\xxx\\OneDrive\\Bureau\\openglproject\\CMakeFiles\\3.14.3\\VCTargetsPath.vcxproj\" sur le noud 1 (cibles par d\u201afaut).\n\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\BuildTools\\Common7\\IDE\\VC\\VCTargets\\Microsoft.Cpp.DesignTime.targets(491,5): error MSB4062: Impossible de charger la t\u0192che \"SetEnv\" \u2026 partir de l'assembly C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\BuildTools\\Common7\\IDE\\VC\\VCTargets\\Microsoft.Build.CppTasks.Common.dll. Impossible de charger le fichier ou l'assembly 'Microsoft.Build.Utilities.Core, Version=15.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' ou une de ses d\u201apendances. Le fichier sp\u201acifi\u201a est introuvable. Assurez-vous que la d\u201aclaration &lt;UsingTask&gt; est correcte, que l'assembly et toutes ses d\u201apendances sont disponibles et que la t\u0192che contient une classe publique qui impl\u201amente Microsoft.Build.Framework.ITask. [C:\\Users\\xxx\\OneDrive\\Bureau\\openglproject\\CMakeFiles\\3.14.3\\VCTargetsPath.vcxproj]\n\nG\u201an\u201aration du projet \"C:\\Users\\xxxx\\OneDrive\\Bureau\\openglproject\\CMakeFiles\\3.14.3\\VCTargetsPath.vcxproj\" termin\u201ae (cibles par d\u201afaut) -- CHEC.\n\n\n\nCHEC de la build.\n</code></pre>\n\n<p>So i check on google: and i follow this step from <a href=\"https://stackoverflow.com/questions/41695251/c-microsoft-cpp-default-props-was-not-found\">&quot;C:\\Microsoft.Cpp.Default.props&quot; was not found</a>.</p>\n\n<p>1) set ms version to 2017: npm config set msvs_version 2017\nset VCTargetsPath environment variable to C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\BuildTools\\Common7\\IDE\\VC\\VCTargets\nrun command console as system administrator</p>\n\n<p>2) Run npm install --global --production windows-build-tools\nRun npm install --save nan\nSet VCTargetsPath environment variable to C:\\Program Files (x86)\\MSBuild\\Microsoft.Cpp\\v4.0\\V140</p>\n\n<p>3) Run this on an elevated command prompt (admin): npm install --global --production windows-build-tools. If you don't have npm I recommend installing it, otherwise this won't work.\nChange ownership in the install dir (in my case C:\\Program Files (x86)\\MSBuild\\14.0) to your user, instead of admin. (properties>Security>Advanced).</p>\n\n<p>I have try the 3 possibilities but it don't works ....</p>\n\n<p>Can someone help me ?</p>\n"}, {"tags": ["c++", "class", "templates", "header-files", "modularity"], "comments": [{"owner": {"reputation": 1327, "user_id": 2990896, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/hSkaq.jpg?s=128&g=1", "display_name": "cplusplusrat", "link": "https://stackoverflow.com/users/2990896/cplusplusrat"}, "edited": false, "score": 2, "creation_date": 1556139313, "post_id": 55838381, "comment_id": 98340817, "body": "Can&#39;t put template implementation in a cpp file. You should easily find the reason for this in other posts. See <a href=\"https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file\" title=\"why can templates only be implemented in the header file\">stackoverflow.com/questions/495021/&hellip;</a>"}, {"owner": {"reputation": 479, "user_id": 7576339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07e1c1e72ce01b67cd9055df7db5e3d6?s=128&d=identicon&r=PG&f=1", "display_name": "Arctic Pi", "link": "https://stackoverflow.com/users/7576339/arctic-pi"}, "reply_to_user": {"reputation": 1327, "user_id": 2990896, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/hSkaq.jpg?s=128&g=1", "display_name": "cplusplusrat", "link": "https://stackoverflow.com/users/2990896/cplusplusrat"}, "edited": false, "score": 0, "creation_date": 1556142406, "post_id": 55838381, "comment_id": 98341883, "body": "thank you so much!"}], "owner": {"reputation": 479, "user_id": 7576339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07e1c1e72ce01b67cd9055df7db5e3d6?s=128&d=identicon&r=PG&f=1", "display_name": "Arctic Pi", "link": "https://stackoverflow.com/users/7576339/arctic-pi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 12, "favorite_count": 0, "closed_date": 1556139179, "answer_count": 0, "score": 0, "last_activity_date": 1556139122, "creation_date": 1556139122, "question_id": 55838381, "link": "https://stackoverflow.com/questions/55838381/c-modularity-and-templates-link-error", "closed_reason": "Duplicate", "title": "C++ : Modularity and Templates : link error", "body": "<p>I wrote this three simple source files as an example to test class templates with modules.</p>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>#include \"MyTemplateClass.hpp\"\n\nint main()\n{\n    MyTemplateClass&lt;int&gt; obj;\n\n    obj.func();\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>MyTemplateClass.hpp</strong></p>\n\n<pre><code>template &lt;typename T&gt;\nclass MyTemplateClass\n{\n  public:\n    void func();\n};\n</code></pre>\n\n<p><strong>MyTemplateClass.cpp</strong></p>\n\n<pre><code>#include \"MyTemplateClass.hpp\"\n#include &lt;iostream&gt;\n\ntemplate &lt;typename T&gt;\nvoid MyTemplateClass&lt;T&gt;::func()\n{\n    std::cout &lt;&lt; \"MyTemplateClass\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>When I try to compile, I get this error.</p>\n\n<pre><code>&gt; cl main.cpp MyTemplateClass.cpp\n/out:main.exe\nmain.obj\nMyTemplateClass.obj\nmain.obj : error LNK2019: unresolved external symbol \"public: void __thiscall MyTemplateClass&lt;int&gt;::func(void)\" (?func@?$MyTemplateClass@H@@QAEXXZ) referenced in function _main\nmain.exe : fatal error LNK1120: 1 unresolved externals\n</code></pre>\n\n<p>How can I solve the problem? Thanks!</p>\n"}, {"tags": ["c++", "c", "function", "syntax"], "comments": [{"owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "edited": false, "score": 0, "creation_date": 1556138962, "post_id": 55838330, "comment_id": 98340682, "body": "Are you familiar with the concept of pointers to begin with?"}, {"owner": {"reputation": 2019, "user_id": 10035556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86cea073655558939d961937095efc80?s=128&d=identicon&r=PG&f=1", "display_name": "Mayur", "link": "https://stackoverflow.com/users/10035556/mayur"}, "edited": false, "score": 0, "creation_date": 1556139028, "post_id": 55838330, "comment_id": 98340712, "body": "have you used <code>qsort</code> from <code>stdlib.h</code>?"}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 3, "creation_date": 1556139077, "post_id": 55838330, "comment_id": 98340733, "body": "A callback is a programming idiom, and a fairly general pattern for performing custom work within the context of some larger system whose details are typically hidden to you. A function pointer on the other hand is a concrete tool, and merely a way of referring to a function; you can use it for a callback, but you can use it for lots of other things too."}, {"owner": {"reputation": 380, "user_id": 1663215, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/YWa3V.jpg?s=128&g=1", "display_name": "Can Bayar", "link": "https://stackoverflow.com/users/1663215/can-bayar"}, "edited": false, "score": 0, "creation_date": 1556139214, "post_id": 55838330, "comment_id": 98340778, "body": "I am familiar with pointers, just never really needed the function pointers so far. I used sort functions too, I know how to pass a comparison function as a callback."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1556139374, "post_id": 55838330, "comment_id": 98340842, "body": "A function pointer is just a variable that can hold a pointer to an arbitrary function. When you pass a callback to a function like <code>qsort</code>, the parameter variable is a function pointer."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 1, "creation_date": 1556139384, "post_id": 55838330, "comment_id": 98340849, "body": "There is a good discussion here about <i><a href=\"https://stackoverflow.com/questions/840501/how-do-function-pointers-in-c-work\">function pointers</a></i>."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1556140115, "post_id": 55838330, "comment_id": 98341133, "body": "The distinction between function pointers and callbacks is clearer in c++ where callbacks are usually provided as template arguments or encapsulated in <code>std::function</code> objects. In c callbacks are usually function pointers so the distinction may be harder to see."}], "answers": [{"comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 1, "creation_date": 1556139611, "post_id": 55838421, "comment_id": 98340938, "body": "@ryyker It is not.  Converting to/from a <code>void *</code> can be done freely without a cast."}, {"owner": {"reputation": 380, "user_id": 1663215, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/YWa3V.jpg?s=128&g=1", "display_name": "Can Bayar", "link": "https://stackoverflow.com/users/1663215/can-bayar"}, "edited": false, "score": 0, "creation_date": 1556139631, "post_id": 55838421, "comment_id": 98340946, "body": "So I can use a function pointer to pass a callback, but they also have other uses? Is this a correct inference?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1556139837, "post_id": 55838421, "comment_id": 98341031, "body": "@dbush Converting <i>to</i> <code>void*</code> implicitly is allowed. Converting <i>from</i> <code>void*</code> requires a cast. Edit : In c++. I didn&#39;t notice this had both tags."}, {"owner": {"reputation": 380, "user_id": 1663215, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/YWa3V.jpg?s=128&g=1", "display_name": "Can Bayar", "link": "https://stackoverflow.com/users/1663215/can-bayar"}, "edited": false, "score": 0, "creation_date": 1556140231, "post_id": 55838421, "comment_id": 98341182, "body": "Thank you, that clarifies it for me. I will keep the conversation open for a while in order to see if people give more feedbacks. :)"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1556141239, "post_id": 55838421, "comment_id": 98341511, "body": "I would go so far as to say that function pointers have few, if any, legitimate uses cases that cannot reasonably be cast in terms of callbacks.  Callbacks are a design idiom.  Function pointers are the C mechanism for implementing that idiom."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 6, "last_activity_date": 1556139930, "last_edit_date": 1556139930, "creation_date": 1556139357, "answer_id": 55838421, "question_id": 55838330, "link": "https://stackoverflow.com/questions/55838330/what-is-the-relationship-between-callbacks-and-function-pointers/55838421#55838421", "title": "What is the relationship between callbacks and function pointers?", "body": "<p>Function pointers are often used to implement callbacks.  A classic example is the <code>qsort</code> function:</p>\n\n<pre><code>void qsort(void *base, size_t nmemb, size_t size,\n           int (*compar)(const void *, const void *));\n</code></pre>\n\n<p>The 4th argument to this function is a function pointer.  This will typically point to a function you wrote yourself that the <code>qsort</code> function will call.  Here's an example of how it's used:</p>\n\n<pre><code>int cmp(const void *v1, const void *v2)\n{\n    const int *i1 = v1;    // C++ requires cast, C doesn't\n    const int *i2 = v2;    // C++ requires cast, C doesn't\n    if (*i1 &lt; *i2) {\n        return -1;\n    } else if (*i1 &gt; *i2) {\n        return 1;\n    } else {\n        return 0;\n    }\n}\n\nint main()\n{\n    int array[] = { 3, 7, 5, 1, 2, 9, 0, 4 };\n    qsort(array, 8, sizeof(int), cmp);\n}\n</code></pre>\n\n<p>In this example, <code>cmp</code> is used to tell the <code>qsort</code> function how the elements of the list are to be ordered.</p>\n\n<p>Another example of function pointers that is not a callback is if you want to call a particular type of function based on some flag.  For example:</p>\n\n<pre><code>void foo(int case_sensitive)\n{\n    int (*cmpfunc)(const char *, const char *);\n    if (case_sensitive) { \n        cmpfunc = strcmp;\n    } else {\n        cmpfunc = strcasecmp;\n    }\n\n    ...\n    // set strings str1 and str2\n    ...\n    if (cmpfunc(str1, str2) == 0)) {\n        printf(\"strings are equal\\n\");\n    } else {\n        printf(\"strings are not equal\\n\");\n    }\n    ...\n    // set strings str3 and str4\n    ...\n    if (cmpfunc(str3, str4) == 0)) {\n        printf(\"strings are equal\\n\");\n    } else {\n        printf(\"strings are not equal\\n\");\n    }\n    ...\n}\n</code></pre>\n"}], "owner": {"reputation": 380, "user_id": 1663215, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/YWa3V.jpg?s=128&g=1", "display_name": "Can Bayar", "link": "https://stackoverflow.com/users/1663215/can-bayar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 1, "accepted_answer_id": 55838421, "answer_count": 1, "score": 3, "last_activity_date": 1556140536, "creation_date": 1556138869, "last_edit_date": 1556140536, "question_id": 55838330, "link": "https://stackoverflow.com/questions/55838330/what-is-the-relationship-between-callbacks-and-function-pointers", "title": "What is the relationship between callbacks and function pointers?", "body": "<p>I am a little bit confused about this subject. I know what callback is but function pointers are a little bit more confusing to me. Can they mean the same thing (at least in C/C++ context)? Or is one of them including the other, like function pointers can be used as a callback or vice versa.</p>\n\n<p>Is there a relationship between function pointers and callbacks, or are they completely different subjects? </p>\n"}, {"tags": ["c++", "winsock"], "comments": [{"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 5, "creation_date": 1556138896, "post_id": 55838259, "comment_id": 98340652, "body": "What does <code>WSAGetLastError ()</code> return after <code>recv</code> fails?  Error codes should always be checked."}, {"owner": {"reputation": 441, "user_id": 10101256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUiTR.png?s=128&g=1", "display_name": "PStarczewski", "link": "https://stackoverflow.com/users/10101256/pstarczewski"}, "edited": false, "score": 0, "creation_date": 1556139026, "post_id": 55838259, "comment_id": 98340710, "body": "Provide socket_error info, at least number, debug will be much easier with that."}, {"owner": {"reputation": 1, "user_id": 10604881, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-f2Zm3nawyd4/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBS_YtDOHjK2eT-sos4SJ2t6pPMAg/mo/photo.jpg?sz=128", "display_name": "DyeitTye", "link": "https://stackoverflow.com/users/10604881/dyeittye"}, "edited": false, "score": 0, "creation_date": 1556139249, "post_id": 55838259, "comment_id": 98340792, "body": "The system detected an invalid pointer address in attempting to use a pointer argument in a call.  So I assume that is the problem?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1556143816, "post_id": 55838259, "comment_id": 98342299, "body": "The <code>recv()</code> code is not accounting for the possibility of <code>ret</code> being set to 0 on graceful disconnect.  And it is not calling <code>closesocket()</code> before calling <code>WSACleanup()</code>. And what is <code>sizef</code> declared as? The <code>recv()</code> code will not compile unless <code>sizef</code> is an array of pointers. If it is just an array of bytes, you need <code>&amp;sizef[idx]</code> instead, just like <code>&amp;cstr[idx]</code> in the <code>send()</code> code."}, {"owner": {"reputation": 1, "user_id": 10604881, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-f2Zm3nawyd4/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBS_YtDOHjK2eT-sos4SJ2t6pPMAg/mo/photo.jpg?sz=128", "display_name": "DyeitTye", "link": "https://stackoverflow.com/users/10604881/dyeittye"}, "edited": false, "score": 0, "creation_date": 1556154190, "post_id": 55838259, "comment_id": 98344241, "body": "sizef is declared as a <code>char*</code>, or array of pointers,  not the old fashion <code>char</code>, an array as bytes, should I be using <code>char</code> and adding &amp; when calling it in<code>recv()</code>?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1556155650, "post_id": 55838259, "comment_id": 98344484, "body": "@DyeitTye That seems kind of puzzling. If <code>sizef</code> is an array of pointers, then if you receive two bytes at the same time, you write them both to the address pointed to by the first pointer, but if you receive one then the other, you write one to the first pointer and one to the second pointer. That seems kind of puzzling. What does the second pointer point to? Do you have multiple buffers the array holds pointers to or what?"}, {"owner": {"reputation": 1, "user_id": 10604881, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-f2Zm3nawyd4/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBS_YtDOHjK2eT-sos4SJ2t6pPMAg/mo/photo.jpg?sz=128", "display_name": "DyeitTye", "link": "https://stackoverflow.com/users/10604881/dyeittye"}, "edited": false, "score": 0, "creation_date": 1556155951, "post_id": 55838259, "comment_id": 98344544, "body": "The pointer is simply there to receive a string, <code>sizef</code> is there to hold the size of the file I will be receiving momentarially. I am using a different <code>char</code> to hold the file and eventually write it. The second pointer, <code>&amp;cstr</code> I assume you are talking about, just points to a cstr, the size of the file I will be sending."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1556156824, "post_id": 55838259, "comment_id": 98344711, "body": "Weird. You said <code>sizef</code> wqas a <code>char*</code>. Can you show us some more code so we can understand what <code>sizef</code> really is?"}, {"owner": {"reputation": 1, "user_id": 10604881, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-f2Zm3nawyd4/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBS_YtDOHjK2eT-sos4SJ2t6pPMAg/mo/photo.jpg?sz=128", "display_name": "DyeitTye", "link": "https://stackoverflow.com/users/10604881/dyeittye"}, "edited": false, "score": 0, "creation_date": 1556156999, "post_id": 55838259, "comment_id": 98344751, "body": "Sure, here is some more code that might help you, there was just one time I called <code>sizef</code> before recv that I didn&#39;t call(btw I got the relevant part of <code>sizef</code> to work), and that code is.... <code>char sizef[4096];</code> does that help?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1556169724, "post_id": 55838259, "comment_id": 98347299, "body": "@DyeitTye So, <code>sizef</code> is an array of <code>char</code>. So <code>sizef[idx]</code> is a <code>char</code>. So you&#39;re passing a <code>char</code> to <code>recv</code> when you&#39;re supposed to pass it a pointer to where you want the received data stored. That will definitely produce an error because the value a <code>char</code> can hold is way too small to be a valid pointer."}], "owner": {"reputation": 1, "user_id": 10604881, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-f2Zm3nawyd4/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBS_YtDOHjK2eT-sos4SJ2t6pPMAg/mo/photo.jpg?sz=128", "display_name": "DyeitTye", "link": "https://stackoverflow.com/users/10604881/dyeittye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 193, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556138490, "creation_date": 1556138490, "question_id": 55838259, "link": "https://stackoverflow.com/questions/55838259/recv-returning-socket-error", "title": "recv() returning SOCKET_ERROR", "body": "<p>Right now I am currently trying to learn winsock, and to do so I'm trying to just send a file over a socket. I have written all of the code, and I got it to partially work, sending only the top part of an image, but now it has just completely stopped working. I have no idea what is causing send and recv to return SOCKET_ERROR.</p>\n\n<p>To be honest, I have no idea what to do. The socket just closes poops itself and I do not know why. </p>\n\n<p>Here is the code I use for recieving the file size, and also the file itself.</p>\n\n<pre><code>cout &lt;&lt; \"Fetching file from server\" &lt;&lt; endl;\n\n        int nBytes = 4096, nLeft, idx; // I have no idea what this does, ctrl c + ctrl v always works though, maybe this is the problem?\n        nLeft = nBytes;\n        idx = 0;\n\n\n        while (nLeft &gt; 0)\n\n        {\n            ret = recv(listening, sizef[idx], nLeft, 0);\n            if (ret == SOCKET_ERROR)\n            {\n                WSACleanup();\n                return 912;\n            }\n            nLeft -= ret;\n            idx += ret;\n        }\n</code></pre>\n\n<p>Here is the code I use for sending the file size and file.</p>\n\n<pre><code>int nBytes = 4096, nLeft, idx;\n    nLeft = nBytes;\n    idx = 0;\n    while (nLeft &gt; 0)\n    {\n        ret = send(clientSocket, &amp;cstr[idx], nLeft, 0);\n\n        if (ret == SOCKET_ERROR)\n\n        {\n            cerr &lt;&lt; \"Oops, failed to send, the programmer shit his pants, or the client did\";\n            return 912;\n        }\n        nLeft -= ret;\n        idx += ret;\n    }\n</code></pre>\n\n<p>Now, the intended result of this function is to just receive the file, but it always returns SOCKET_ERROR, on every file I try.</p>\n"}, {"tags": ["c++", "char", "concat"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1556138234, "post_id": 55838160, "comment_id": 98340401, "body": "FWIW <code>X xx = {(domain + &quot;x&quot;).c_str()};</code> leaves you with a dangling pointer so it is definitely not what you want (it should also fail to compile because it violates const correctness).   An easy work around is to have <code>X</code> store a reference to the common part and then have a member variable that has the non common part."}, {"owner": {"reputation": 8719, "user_id": 6951428, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/92fd81a6020da8e77fc9125e0c9ec512?s=128&d=identicon&r=PG&f=1", "display_name": "junvar", "link": "https://stackoverflow.com/users/6951428/junvar"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1556138333, "post_id": 55838160, "comment_id": 98340438, "body": "Oh I wasn&#39;t aware about the pointer issue. Regarding the suggestion, the struct X is used by many other places by the larger team. I can&#39;t modify it, nor is it always constructed with &quot;x.com/&quot; when used elsewhere."}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 2, "last_activity_date": 1556139038, "creation_date": 1556139038, "answer_id": 55838360, "question_id": 55838160, "link": "https://stackoverflow.com/questions/55838160/extract-duplicate-sub-char-from-multiple-char/55838360#55838360", "title": "extract duplicate sub-char* from multiple char*", "body": "<p>First off, assigning a string literal to a <code>char*</code> was deprecated in in C++03 and was removed from C++11.  <code>x</code> should be a <code>const char*</code> to be standard complaint.</p>\n\n<p>Since you can't modify <code>X</code> you can use a little trick leverage the fact the string literals that are separated by nothing but white space get merged together during the compilation process.  That means if you have</p>\n\n<pre><code>\"hello \" \"world\"\n</code></pre>\n\n<p>the compiler will merge it into </p>\n\n<pre><code>\"hello world\"\n</code></pre>\n\n<p>Knowing that, you can leverage the preprocessor to define a symbol like</p>\n\n<pre><code>#define DOMAIN \"x.com/\"\n</code></pre>\n\n<p>and then you can use it to initialize your objects like</p>\n\n<pre><code>X xx = {DOMAIN \"x\"};\n\nX xy = {DOMAIN \"y\"};\n\nX xz = {DOMAIN \"z\"};\n</code></pre>\n\n<p>which gets resolved to</p>\n\n<pre><code>X xx = {\"x.com/x\"};\n\nX xy = {\"x.com/y\"};\n\nX xz = {\"x.com/z\"};\n</code></pre>\n\n<p>for you.</p>\n"}], "owner": {"reputation": 8719, "user_id": 6951428, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/92fd81a6020da8e77fc9125e0c9ec512?s=128&d=identicon&r=PG&f=1", "display_name": "junvar", "link": "https://stackoverflow.com/users/6951428/junvar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1556139038, "creation_date": 1556138075, "last_edit_date": 1556138625, "question_id": 55838160, "link": "https://stackoverflow.com/questions/55838160/extract-duplicate-sub-char-from-multiple-char", "title": "extract duplicate sub-char* from multiple char*", "body": "<p>I have a <code>struct</code> whose constructor accepts a <code>char*</code> (as opposed to a <code>std::string</code>). I want to construct multiple instances of this class, with similar parameters:</p>\n\n<pre><code>struct X {\n  char* x;\n};\n\n// usage\n\nX xx = {\"x.com/x\"};\n\nX xy = {\"x.com/y\"};\n\nX xz = {\"x.com/z\"};\n</code></pre>\n\n<p>The parameters are a bit complex and the common sub-\"string\" is longer than just \"x.com/\", so extracting it would help make it more readable, but I'm not sure how:</p>\n\n<pre><code>const static char* domain = \"x.com/\";\n\nX xx = {domain + \"x\"};\n\nX xy = {domain + \"y\"};\n\nX xz = {domain + \"z\"};\n</code></pre>\n\n<p>I've tried declaring <code>domain</code> as <code>std::string</code>, <code>char*</code>, <code>char[]</code>. I've also tried omitting and not omitting the <code>+</code>. I would like to avoid creating local vars or using <code>strcopy</code> as I imagine that would minimize the code readability gains by adding complexity to something that should ideally be ~3 short lines. Also, I got it to work by declaring <code>domain</code> as <code>std::string</code> and invoking <code>.c_str()</code>; e.g. <code>X xx = {(domain + \"x\").c_str()};</code>, but this too is hurting readability imo.</p>\n\n<p>I imagine the likely answer is I have to live with repeating the sub-strings or use something that adds verbosity. But perhaps my C++ ignorance and lack of precise terminology means I missed something obvious when trying to search solutions.</p>\n\n<p>Edit regarding modifying <code>X</code>:</p>\n\n<p>I can't modify my struct <code>X</code> (it's some sort of dependency/utility) used in a lot of places in our codebase, nor is it always constructed with \"x.com/\" when used elsewhere.</p>\n"}, {"tags": ["c++", "c", "arduino"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1556138634, "post_id": 55838136, "comment_id": 98340571, "body": "Sorry, my mistake"}, {"owner": {"reputation": 1084, "user_id": 2186074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7rMRz.png?s=128&g=1", "display_name": "Jona", "link": "https://stackoverflow.com/users/2186074/jona"}, "edited": false, "score": 0, "creation_date": 1556139033, "post_id": 55838136, "comment_id": 98340714, "body": "This might help you : <a href=\"https://github.com/arduino/Arduino/wiki/Build-Process\" rel=\"nofollow noreferrer\">github.com/arduino/Arduino/wiki/Build-Process</a>"}, {"owner": {"reputation": 1428, "user_id": 2819922, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e61964f3e5cdcde3dc90370e0cdfe2d4?s=128&d=identicon&r=PG&f=1", "display_name": "datafiddler", "link": "https://stackoverflow.com/users/2819922/datafiddler"}, "edited": false, "score": 0, "creation_date": 1556139042, "post_id": 55838136, "comment_id": 98340718, "body": "You don&#39;t seem to use the Arduino IDE to compile your project. How do you force <code>SketchWiFi.c</code> to be one of your source files ? Add a <code>SketchWiFi.cpp</code> to your project with that code."}, {"owner": {"reputation": 980, "user_id": 10185183, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oUA_ZF9CW5c/AAAAAAAAAAI/AAAAAAAACX0/TLhc82gWtsI/photo.jpg?sz=128", "display_name": "arsdever", "link": "https://stackoverflow.com/users/10185183/arsdever"}, "edited": false, "score": 0, "creation_date": 1556139358, "post_id": 55838136, "comment_id": 98340837, "body": "are you using Arduino IDE to build?"}, {"owner": {"reputation": 466, "user_id": 3216326, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/c2OLN.png?s=128&g=1", "display_name": "PKonstant", "link": "https://stackoverflow.com/users/3216326/pkonstant"}, "edited": false, "score": 0, "creation_date": 1556139799, "post_id": 55838136, "comment_id": 98341009, "body": "Yes.  I have compiled in both environments, Visual Studio 2017 and Arduino IDE."}, {"owner": {"reputation": 466, "user_id": 3216326, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/c2OLN.png?s=128&g=1", "display_name": "PKonstant", "link": "https://stackoverflow.com/users/3216326/pkonstant"}, "edited": false, "score": 0, "creation_date": 1556140423, "post_id": 55838136, "comment_id": 98341255, "body": "I have updated my original post to include screenshots of my project structure in Visual Studio 2017 and Arduino IDE."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 2629907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9635cf0045ed8b1ee086cd25bba56840?s=128&d=identicon&r=PG", "display_name": "julovi", "link": "https://stackoverflow.com/users/2629907/julovi"}, "edited": false, "score": 0, "creation_date": 1602684805, "post_id": 55839203, "comment_id": 113799018, "body": "could you show how the .h, and .c files were modified?"}], "tags": [], "owner": {"reputation": 466, "user_id": 3216326, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/c2OLN.png?s=128&g=1", "display_name": "PKonstant", "link": "https://stackoverflow.com/users/3216326/pkonstant"}, "is_accepted": false, "score": 2, "last_activity_date": 1556143984, "last_edit_date": 1556143984, "creation_date": 1556143418, "answer_id": 55839203, "question_id": 55838136, "link": "https://stackoverflow.com/questions/55838136/how-to-compile-a-simple-arduino-program/55839203#55839203", "title": "How to compile a simple Arduino program?", "body": "<p>Per a suggestion posted, I read on GitHub the following:</p>\n\n<p><strong>No pre-processing is done to files in a sketch with any extension other than .ino. Additionally, .h files in the sketch are not automatically #included from the main sketch file.</strong> Further, if you want to call functions defined in a .c file from a .cpp file (like one generated from your sketch), you'll need to wrap its declarations in an 'extern \"C\" {}' block that is defined only inside of C++ files.</p>\n\n<p>So that explains my problem.  I enclosed my simple function 'WiFi_Setup()' with in a class and now it compiles successfully.</p>\n\n<pre><code>class WifiNetwork\n{\nprotected:\n\npublic:\n    void WiFi_Setup();\n};\n</code></pre>\n\n<p>It seems Arduino wants everything to live in classes.</p>\n"}], "owner": {"reputation": 466, "user_id": 3216326, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/c2OLN.png?s=128&g=1", "display_name": "PKonstant", "link": "https://stackoverflow.com/users/3216326/pkonstant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1556143984, "creation_date": 1556137978, "last_edit_date": 1556140336, "question_id": 55838136, "link": "https://stackoverflow.com/questions/55838136/how-to-compile-a-simple-arduino-program", "title": "How to compile a simple Arduino program?", "body": "<p>I am starting to learn / program the Arduino and I don't understand why I am getting syntax errors upon compiling my program in Visual Studio 2017 with Visual Micro or with the Arduino IDE.</p>\n\n<h2>Compiling output error from Visual Studio 2017:</h2>\n\n<pre><code>sketch\\SketchIncomeEligible.ino.cpp.o:(.text.setup+0x0): undefined reference to `WiFi_Setup()'\n\nsketch\\SketchIncomeEligible.ino.cpp.o: In function `setup':\n\nC:\\Users\\C113850\\source\\repos\\Income_Eligible_Price_Display\\src\\SketchIncomeEligible\\SketchIncomeEligible/SketchIncomeEligible.ino:6: undefined reference to `WiFi_Setup()'\n\ncollect2.exe: error: ld returned 1 exit status\n\nexit status 1\nError compiling for board Adafruit Feather HUZZAH ESP8266.\n</code></pre>\n\n<h2>Compiling error from Arduino IDE:</h2>\n\n<pre><code>Arduino: 1.8.9 (Windows 10), Board: \"Adafruit Feather HUZZAH ESP8266, 80 MHz, Flash, 4M (1M SPIFFS), v2 Lower Memory, Disabled, None, Only Sketch, 115200\"\n\nsketch\\SketchIncomeEligible.ino.cpp.o:(.text.setup+0x0): undefined reference to `WiFi_Setup()'\n\nsketch\\SketchIncomeEligible.ino.cpp.o: In function `setup':\n\nC:\\Users\\C113850\\source\\repos\\Income_Eligible_Price_Display\\src\\SketchIncomeEligible\\SketchIncomeEligible/SketchIncomeEligible.ino:6: undefined reference to `WiFi_Setup()'\n\ncollect2.exe: error: ld returned 1 exit status\n\nexit status 1\nError compiling for board Adafruit Feather HUZZAH ESP8266.\n\nThis report would have more information with\n\"Show verbose output during compilation\"\noption enabled in File -&gt; Preferences.\n</code></pre>\n\n<p>The following is my code:</p>\n\n<h2>SketchWiFi.h file:</h2>\n\n<pre><code>#ifndef _SKETCHWIFI_h\n#define _SKETCHWIFI_h\n\nint WiFi_Setup();\n\n#endif\n</code></pre>\n\n<h2>SketchWiFi.c file:</h2>\n\n<pre><code>#include \"SketchWiFi.h\"\n\nint WiFi_Setup()\n{\n  // put your setup code here, to run once:\n\n  return 1; // Successful\n}\n</code></pre>\n\n<h2>Sketch.ino file:</h2>\n\n<pre><code>#include \"SketchWiFi.h\"\n\nvoid setup() {\n  Serial.begin(115200);\n  Serial.println(\"Begin setup\");\n\n  WiFi_Setup();\n\n  Serial.println(\"End setup\");\n}\n\nvoid loop() {\n  // put your main code here, to run repeatedly:\n}\n</code></pre>\n\n<p><strong>Directory structure:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/kVrZj.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kVrZj.jpg\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Project Structure in Visual Studio 2017</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/NyIRs.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NyIRs.jpg\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Project structure in Arduino IDE</strong>\n<a href=\"https://i.stack.imgur.com/TTGrJ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TTGrJ.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c#", "c++", "arrays", "dll"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 2, "creation_date": 1556136932, "post_id": 55837875, "comment_id": 98339819, "body": "Where is the <code>new []</code>?"}, {"owner": {"reputation": 70686, "user_id": 11683, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d4d284c3c214d52f004df795aee394e3?s=128&d=identicon&r=PG", "display_name": "GSerg", "link": "https://stackoverflow.com/users/11683/gserg"}, "edited": false, "score": 2, "creation_date": 1556136967, "post_id": 55837875, "comment_id": 98339830, "body": "<a href=\"https://stackoverflow.com/a/6445794/11683\">stackoverflow.com/a/6445794/11683</a>"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 7, "creation_date": 1556136983, "post_id": 55837875, "comment_id": 98339836, "body": "<code>char DAQ_API* Read()</code> -- Undefined behavior since you&#39;re returning a pointer to a local variable.  When <code>Read</code> returns, that local array you declared becomes mush."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1556137297, "post_id": 55837875, "comment_id": 98339963, "body": "<code>if (arrayPtr != nullptr)</code> -- This check is not necessary.  It is perfectly ok to delete a nullptr."}, {"owner": {"reputation": 743, "user_id": 10067555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23629f32bc51e9dff04aec6b8eb51123?s=128&d=identicon&r=PG&f=1", "display_name": "karamazovbros", "link": "https://stackoverflow.com/users/10067555/karamazovbros"}, "edited": false, "score": 0, "creation_date": 1556139640, "post_id": 55837875, "comment_id": 98340951, "body": "Thanks! That was the issue."}], "owner": {"reputation": 743, "user_id": 10067555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23629f32bc51e9dff04aec6b8eb51123?s=128&d=identicon&r=PG&f=1", "display_name": "karamazovbros", "link": "https://stackoverflow.com/users/10067555/karamazovbros"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556136771, "creation_date": 1556136771, "question_id": 55837875, "link": "https://stackoverflow.com/questions/55837875/getting-wrong-byte-values-from-c-to-c", "title": "Getting wrong byte values from C++ to C#", "body": "<p>I'm building a plugin for Unity and looked at this answer for a method for reading byte data from C++ to C#:\n<a href=\"https://stackoverflow.com/questions/43630063/passing-byte-array-from-c-unmanaged-dll-to-c-sharp-unity\">Passing byte array from C++ unmanaged dll to C# unity</a></p>\n\n<p>C++ code:</p>\n\n<pre><code>char DAQ_API* Read()\n    {\n         char Buffer[30];\n         PopulateArray(Buffer);\n         return Buffer;\n    }\nint DAQ_API FreeMemory(char* arrayPtr) \n    {\n        if (arrayPtr != nullptr) {\n            delete[] arrayPtr;\n        }\n        return 0;\n    }\n</code></pre>\n\n<p>C# code:</p>\n\n<pre><code>[DllImport(\"DAQ\")]\nprivate static extern IntPtr Read();\n[DllImport(\"DAQ\")]\npublic static extern int FreeMemory(IntPtr ptr);\n</code></pre>\n\n<p>In the update loop:</p>\n\n<pre><code>IntPtr ptr = Read();\nbyte[] packet = new byte[30];\nMarshal.Copy(ptr, packet, 0, 30);\nFreeMemory(ptr);\n</code></pre>\n\n<p>The size of the byte array is 30, and the <strong>first 8 bytes are correct</strong>, and the rest looks like junk data:</p>\n\n<pre><code>0 240 0 89 86 23 7 9 240 67 189 31 0 0 0 0 96 211 95 0 0 0 0 0 224 210 95 0 0 0 \n</code></pre>\n\n<p>What's happening that's causing the bad data for the rest of the array?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 6, "creation_date": 1556136711, "post_id": 55837839, "comment_id": 98339752, "body": "Voting to close as a typo.  <code>A a = b-&gt;GetA();</code> makes a copy.  You need <code>A&amp; a = b-&gt;GetA();</code> to have a reference."}, {"owner": {"reputation": 18564, "user_id": 360822, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xx2e3.jpg?s=128&g=1", "display_name": "Jimmyt1988", "link": "https://stackoverflow.com/users/360822/jimmyt1988"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1556145249, "post_id": 55837839, "comment_id": 98342658, "body": "@NathanOliver - Thank you so much. I realise my question didn&#39;t quite hit the mark. I&#39;ve modified the text slightly to incorporate the actual issue i have. Thanks"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1556147088, "post_id": 55837839, "comment_id": 98343085, "body": "You&#39;re still making a copy.  <code>refToA</code> is not a reference so it is it&#39;s own object and any changes made to it are isolated to it."}, {"owner": {"reputation": 18564, "user_id": 360822, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xx2e3.jpg?s=128&g=1", "display_name": "Jimmyt1988", "link": "https://stackoverflow.com/users/360822/jimmyt1988"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1556147137, "post_id": 55837839, "comment_id": 98343090, "body": "How do i make a reference though? The syntax of A&amp; refToA doesn&#39;t seem to be correct as it needs initialisation. (I think the question here is in this case, what&#39;s the correct syntax for doing that). Thanks for helping btw."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1556147447, "post_id": 55837839, "comment_id": 98343142, "body": "You have to have <code>getA</code> return a reference and then use something like <code>A&amp; refToA = b-&gt;GetA();</code>.  Alternatively, you can pass a reference to a pointer and make the pointer point to <code>a</code> like <code>void GetA(A*&amp; outA) { outA = &amp;a; } A* ptrToA; b-&gt;GetA(ptrToA);</code>"}, {"owner": {"reputation": 18564, "user_id": 360822, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xx2e3.jpg?s=128&g=1", "display_name": "Jimmyt1988", "link": "https://stackoverflow.com/users/360822/jimmyt1988"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1556147901, "post_id": 55837839, "comment_id": 98343234, "body": "Oh! I did not know that. That&#39;s interesting. And i suppose assigning the value after that is a <code>(*ptrToA).TEST = &quot;123&quot;</code> (If so, what is that called? de-referenced pointer?)"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1556148270, "post_id": 55837839, "comment_id": 98343302, "body": "Correct. It&#39;s called dereferencing the pointer."}], "owner": {"reputation": 18564, "user_id": 360822, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xx2e3.jpg?s=128&g=1", "display_name": "Jimmyt1988", "link": "https://stackoverflow.com/users/360822/jimmyt1988"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556205862, "creation_date": 1556136601, "last_edit_date": 1556145215, "question_id": 55837839, "link": "https://stackoverflow.com/questions/55837839/return-a-reference-of-a-struct-from-a-method", "title": "Return a reference of a struct from a method", "body": "<p>I have a struct <code>A</code>.\nI have a class <code>B</code>.</p>\n\n<p>In my main function, I instantiate <code>B</code> and set the struct's <code>TEST</code> property to <code>\"ABC\"</code>.</p>\n\n<p>I then create a local struct and pass it through as a reference <code>outA</code>.</p>\n\n<p>Then when I try and set <code>TEST</code> property to be <code>\"123\"</code>, I expect that the original instance b's property would also be modified, but somewhere it seems to have made a copy of the struct.</p>\n\n<p>How do i ensure that I am modifying the instance of <code>B</code>'s <code>A</code> struct?</p>\n\n<p><a href=\"https://onlinegdb.com/BJ0V4vR5V\" rel=\"nofollow noreferrer\">https://onlinegdb.com/BJ0V4vR5V</a></p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nstruct A\n{\n    std::string TEST;\n};\n\nclass B\n{\npublic:\n    A a;\n\n    void GetA(A&amp; outA)\n    {\n        outA = a;\n    }\n};\n\nint main()\n{\n    B* b = new B();\n    b-&gt;a.TEST = \"ABC\";\n\n    A refToA;\n    b-&gt;GetA(refToA);\n\n    refToA.TEST = \"123\";\n\n    cout &lt;&lt; b-&gt;a.TEST;\n\n    return 0;\n}\n</code></pre>\n\n<p>The actual context of my problem is more in depth, but i think this is the issue i'm coming up against.</p>\n"}, {"tags": ["c++", "ipc", "shared-memory"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11407282, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EtgXS40VNq8/AAAAAAAAAAI/AAAAAAAAAEY/-IxcQbPiQkI/photo.jpg?sz=128", "display_name": "Siqiu Yao", "link": "https://stackoverflow.com/users/11407282/siqiu-yao"}, "edited": false, "score": 0, "creation_date": 1556137219, "post_id": 55837622, "comment_id": 98339936, "body": "Hi, <code>SHMLBA</code> here is the page size specified in <code>shm.h</code>, <code>shmat</code> requires the address passed in to be page-aligned. So should be fine."}, {"owner": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "reply_to_user": {"reputation": 1, "user_id": 11407282, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EtgXS40VNq8/AAAAAAAAAAI/AAAAAAAAAEY/-IxcQbPiQkI/photo.jpg?sz=128", "display_name": "Siqiu Yao", "link": "https://stackoverflow.com/users/11407282/siqiu-yao"}, "edited": false, "score": 0, "creation_date": 1556140978, "post_id": 55837622, "comment_id": 98341427, "body": "@SiqiuYao Exactly it is not fine since, for example in Mac OSX,  <code>#define SHMLBA      4096</code>.  So, the fact that <code>SHMLBA</code> is defined in <code>shm.h</code> header doesn&#39;t necessarily satisfy the case I&#39;ve already mention. <code>4096 % 10 != 0</code>"}], "tags": [], "owner": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "is_accepted": false, "score": 0, "last_activity_date": 1556135651, "creation_date": 1556135651, "answer_id": 55837622, "question_id": 55837533, "link": "https://stackoverflow.com/questions/55837533/how-to-use-shmat-with-non-null-page-aligned-shmaddr/55837622#55837622", "title": "How to use shmat with non-NULL page-aligned shmaddr?", "body": "<p>C++17 standard says as noted <a href=\"https://en.cppreference.com/w/cpp/memory/c/aligned_alloc\" rel=\"nofollow noreferrer\">here</a>,</p>\n\n<blockquote>\n  <p>Passing a <code>size</code> which is not an integral multiple of alignment or an\n  alignment which is not valid or not supported by the implementation\n  causes the function to fail and return a null pointer (C11, as\n  published, specified undefined behavior in this case, this was\n  corrected by DR 460).</p>\n</blockquote>\n\n<p>So what is <code>SHMLBA</code>? It should be an integral that, as being said, a factor of the alignment.</p>\n"}, {"tags": [], "owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "is_accepted": false, "score": 0, "last_activity_date": 1556136029, "creation_date": 1556136029, "answer_id": 55837714, "question_id": 55837533, "link": "https://stackoverflow.com/questions/55837533/how-to-use-shmat-with-non-null-page-aligned-shmaddr/55837714#55837714", "title": "How to use shmat with non-NULL page-aligned shmaddr?", "body": "<p>It appears that you have to pass <code>SHM_REMAP</code> when calling <code>shmat</code> with a non-NULL argument:</p>\n\n<pre><code>shmat (shmid, testp, SHM_REMAP);\n</code></pre>\n\n<p>It is not immediately obvious why this should be.  According to the <a href=\"https://linux.die.net/man/2/shmat\" rel=\"nofollow noreferrer\">documentation</a>, this flag is Linux-specific.</p>\n\n<p><a href=\"https://wandbox.org/permlink/HY0Wo08yrHBskHSu\" rel=\"nofollow noreferrer\">Live demo</a></p>\n"}], "owner": {"reputation": 1, "user_id": 11407282, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EtgXS40VNq8/AAAAAAAAAAI/AAAAAAAAAEY/-IxcQbPiQkI/photo.jpg?sz=128", "display_name": "Siqiu Yao", "link": "https://stackoverflow.com/users/11407282/siqiu-yao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 281, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1556136029, "creation_date": 1556135278, "question_id": 55837533, "link": "https://stackoverflow.com/questions/55837533/how-to-use-shmat-with-non-null-page-aligned-shmaddr", "title": "How to use shmat with non-NULL page-aligned shmaddr?", "body": "<p>I am trying to create shared memory with the address of heap-created variables, I ensured the address to be page-aligned, but still get the error: \"Invalid argument\". How could I correctly do this?</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/ipc.h&gt;\n#include &lt;sys/shm.h&gt;\n#include &lt;sys/sem.h&gt;\n#include &lt;cstdint&gt;\nconst int PERMISSION = 0666; //-rw-rw-rw-\n\nint main() {\n    int size = 10;\n    void* testp = std::aligned_alloc(SHMLBA, size);\n    int shkey = 314159, shmid;\n    if ((shmid = shmget(shkey, size, IPC_CREAT | PERMISSION)) == -1) {\n        perror(\"shmget: shmget failed\");\n        exit(-1);\n    }\n    void *ret;\n    if ((ret = shmat(shmid, testp, 0)) == (void*)-1) {\n        perror(\"shmat: shmat failed\");\n        exit(-1);\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 47115, "user_id": 235354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/097d761861529df52a6800744f1074d2?s=128&d=identicon&r=PG", "display_name": "jspcal", "link": "https://stackoverflow.com/users/235354/jspcal"}, "edited": false, "score": 0, "creation_date": 1556134868, "post_id": 55837421, "comment_id": 98338953, "body": "Hi, perhaps this is scoping related?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1556135063, "post_id": 55837421, "comment_id": 98339038, "body": "What&#39;s the purpose of <code>List</code>?   Your class hierarchy is very strange, more to the point, it is not necessary to do things this way if implementing a linked list.  You wouldn&#39;t have come across your issue if you coded a linked list in the traditional way (one template class with an internal Node class)."}, {"owner": {"reputation": 134, "user_id": 10231083, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3HHf1QidzHI/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rpZzxShH_WfOqHuNBEoH3r3tWxIw/mo/photo.jpg?sz=128", "display_name": "jkulskis", "link": "https://stackoverflow.com/users/10231083/jkulskis"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1556135431, "post_id": 55837421, "comment_id": 98339195, "body": "Hi, I see now that this is from the class being a template base class, thanks for the response. Also @PaulMcKenzie I know it\u2019s a bit strange, but that\u2019s because it\u2019s for an assignment which does not give any flexibility in choosing the class hierarchy. I think this selection of classes was assigned since we just went over abstract classes, and the assignment is supposed to incorporate abstract classes."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1556135522, "post_id": 55837421, "comment_id": 98339230, "body": "Yes, but why do so many teachers (or institutions) insist on teaching an aspect of C++ in such a roundabout way?  There are plenty of real-world examples where usage of abstract classes makes sense -- this is not one of them."}, {"owner": {"reputation": 134, "user_id": 10231083, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3HHf1QidzHI/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rpZzxShH_WfOqHuNBEoH3r3tWxIw/mo/photo.jpg?sz=128", "display_name": "jkulskis", "link": "https://stackoverflow.com/users/10231083/jkulskis"}, "edited": false, "score": 0, "creation_date": 1556136425, "post_id": 55837421, "comment_id": 98339634, "body": "That is a question for which I have no answer to, but I do agree that it is an annoying part of learning c++ in college"}], "owner": {"reputation": 134, "user_id": 10231083, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3HHf1QidzHI/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rpZzxShH_WfOqHuNBEoH3r3tWxIw/mo/photo.jpg?sz=128", "display_name": "jkulskis", "link": "https://stackoverflow.com/users/10231083/jkulskis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "closed_date": 1556134883, "answer_count": 0, "score": 2, "last_activity_date": 1556134939, "creation_date": 1556134797, "question_id": 55837421, "link": "https://stackoverflow.com/questions/55837421/why-does-my-compiler-make-me-add-the-this-pointer-to-access-parent-variables", "closed_reason": "Duplicate", "title": "Why does my compiler make me add the &quot;this-&gt;&quot; pointer to access parent variables from a child class", "body": "<p>I'm coding a simple LinkedList class that is a child class to an abstract List class. After finishing the List class I started to code the LinkedList class, and I noticed that the compiler would not let me access the protected variables from the members of the List class directly, even though LinkedList is a child class of List. When I do not add the \"this->\" pointer before one of List's variables, I get an error that says the variable is not declared in the scope. I'm sure there is a simple explanation for this, but I can't figure out why the two protected variables in my List class and its members are not accessible from the members of the LinkedList class.</p>\n\n<p>List:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;typename T&gt;\nclass List {\n    protected:\n        unsigned int numElements;\n        Node&lt;T&gt;* head;\n    public:\n        List();\n        ~List();\n        virtual void append(T x) = 0;\n        virtual T remove() = 0;\n        virtual bool isEmpty();\n};\n\ntemplate&lt;typename T&gt;\nList&lt;T&gt;::List() {\n    numElements = 0;\n    head = NULL;\n}\n\ntemplate&lt;typename T&gt;\nList&lt;T&gt;::~List() {\n    while(NULL != head) {\n        Node&lt;T&gt;* newHead = head-&gt;getNext();\n        delete head;\n        head = newHead;\n    }\n}\n\ntemplate&lt;typename T&gt;\nbool List&lt;T&gt;::isEmpty() {\n    if (numElements)\n        return false;\n    return true;\n}\n</code></pre>\n\n<p>LinkedList with one member example:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;typename T&gt;\nclass LinkedList: public List&lt;T&gt; {\n    public:\n        void append(T x);\n        T remove();\n        void append_tail(T x);\n        void insert(T x, int pos);\n        T remove_at(int pos);\n        void print();\n        int getNumElements();\n};\n\ntemplate&lt;typename T&gt;\nvoid LinkedList&lt;T&gt;::append(T x) {\n    // create a new node with its next as the head\n    Node&lt;T&gt;* appendNode = new Node&lt;T&gt;(x, this-&gt;head);\n    // set the head to this new node\n    this-&gt;head = appendNode;\n    this-&gt;numElements++;\n}\n</code></pre>\n\n<p>Node class that is included (not very relevant)</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#ifndef NODE_H\n#define NODE_H\n\ntemplate&lt;typename T&gt;\nclass Node {\n    private:\n        T value;\n        Node * next;\n    public:\n\n        Node(T v, Node * n);\n        T getValue() const;\n        Node * getNext() const;\n        void setNext(Node * p);\n};\n\n\ntemplate&lt;typename T&gt;\nNode&lt;T&gt;::Node(T v, Node * n) {\n    value = v;\n    next = n;\n}\n\n\ntemplate&lt;typename T&gt;\nT Node&lt;T&gt;::getValue() const {\n    return value;\n}\n\n\ntemplate&lt;typename T&gt;\nNode&lt;T&gt;* Node&lt;T&gt;::getNext() const {\n    return next;\n}\n\ntemplate&lt;typename T&gt;\nvoid Node&lt;T&gt;::setNext(Node * n) {\n    this-&gt;next = n;\n}\n\n#endif\n\n</code></pre>\n"}, {"tags": ["python", "c++", "matplotlib", "winapi", "embed"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 1, "creation_date": 1556134832, "post_id": 55837405, "comment_id": 98338946, "body": "What is sure not possible is to use <code>pyplot</code> for that matter. Possibly someone wrote a backend which is suitable for that purpose."}, {"owner": {"reputation": 590, "user_id": 4260902, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/100000665496061/picture?type=large", "display_name": "Michael Choi", "link": "https://stackoverflow.com/users/4260902/michael-choi"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1556135642, "post_id": 55837405, "comment_id": 98339284, "body": "@ImportanceOfBeingErnest I&#39;d prefer if it were possible with just native libraries, but what do you mean that it is not possible with &#39;pyplot&#39;."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 1, "creation_date": 1556135812, "post_id": 55837405, "comment_id": 98339359, "body": "You cannot have your figure managed by pyplot and another application at the same time. See e.g. <a href=\"https://matplotlib.org/gallery/user_interfaces/embedding_in_qt_sgskip.html\" rel=\"nofollow noreferrer\">the example about embedding in pyqt</a>; it does explicitely not use pyplot."}, {"owner": {"reputation": 8787, "user_id": 6601582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0a2f69702729da5aaa628bc58811a7?s=128&d=identicon&r=PG&f=1", "display_name": "Rita Han", "link": "https://stackoverflow.com/users/6601582/rita-han"}, "edited": false, "score": 0, "creation_date": 1556181449, "post_id": 55837405, "comment_id": 98352444, "body": "If you want to change the parent window of matplotlib&#39;s window maybe you can try <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/winuser/nf-winuser-setparent\" rel=\"nofollow noreferrer\">SetParent</a> function."}], "owner": {"reputation": 590, "user_id": 4260902, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/100000665496061/picture?type=large", "display_name": "Michael Choi", "link": "https://stackoverflow.com/users/4260902/michael-choi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1556135350, "creation_date": 1556134716, "last_edit_date": 1556135350, "question_id": 55837405, "link": "https://stackoverflow.com/questions/55837405/embed-matplotlib-into-hwnd", "title": "Embed Matplotlib into HWND", "body": "<p>After scouring the web for a while now, it seems its possible to embed Python into tkinter, qt5, etc. however, I am wondering if it is possible to simply embed it into a Windows application. Similar to how Jupyter embeds with <code>%matplotlib inline</code>, I am wondering if a similar functionality is possible for Window applications.</p>\n\n<pre><code>#include &lt;Windows.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;python.h&gt;\n\nLPARAM CALLBACK WndProc(HWND hwnd, UINT msg, WPARAM wparam, LPARAM lparam) {\n  switch (msg) {\n  default:\n    return DefWindowProc(hwnd, msg, wparam, lparam);\n  }\n}\n\n#pragma comment(linker, \"/SUBSYSTEM:CONSOLE /ENTRY:WinMainCRTStartup\")\n#pragma warning(suppress: 28251) // Inconsistent Annotation Suppression\nint WINAPI WinMain(HINSTANCE hInstance, HINSTANCE, LPSTR lpCmdLine, int nCmdShow)\n{\n  WNDCLASSEX wc = {};\n\n  wc.lpszClassName = \"customWindow\";\n  wc.hInstance = hInstance;\n  wc.lpfnWndProc = WndProc;\n  wc.cbSize = sizeof(WNDCLASSEX);\n  wc.hCursor = LoadCursor(NULL, IDC_ARROW);\n\n  RegisterClassEx(&amp;wc);\n\n  HWND hwnd = CreateWindow(\"customWindow\", \"Testing embedded matplotlib\", WS_OVERLAPPEDWINDOW, 100, 100, 1000, 1000, NULL, NULL, hInstance, NULL);\n  UpdateWindow(hwnd);\n  ShowWindow(hwnd, SW_SHOW);\n\n  Py_Initialize();\n\n  const char* code =\n    R\"(\nimport matplotlib.pyplot as plt\nimport numpy as np\n\nplt.plot(np.sin(np.linspace(0, 100, 1000)))\nplt.show()\n)\";\n\n  PyRun_SimpleString(code);\n\n  Py_Finalize();\n\n  MSG message;\n  while (GetMessage(&amp;message, NULL, 0, 0) &gt; 0)\n  {\n    TranslateMessage(&amp;message);\n    DispatchMessage(&amp;message);\n  }\n\n  return static_cast&lt;int&gt;(message.wParam);\n}\n</code></pre>\n\n<p>In this incomplete example (separate matplotlib window opens separately), I'd like to figure out if its possible to reparent matplotlib's window into the master hwnd. Ideally, I'd like to still have matplotlib's interactivity so trying to do a bitblt from an internal matplotlib buffer is not feasible for me.</p>\n"}, {"tags": ["c++", "templates", "inner-classes"], "comments": [{"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 3, "creation_date": 1556134907, "post_id": 55837316, "comment_id": 98338977, "body": "I bet this whole problem is because of the forgotten <code>const</code> qualifier for your member <code>operator==</code>. <a href=\"https://stackoverflow.com/questions/25245453/what-is-a-nondeduced-context\">Here</a>&#39;s the explanation for your question."}, {"owner": {"reputation": 999, "user_id": 4051748, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3d012d2cf5c02a4b9de7ef6c5fb6f3d8?s=128&d=identicon&r=PG", "display_name": "Mochan", "link": "https://stackoverflow.com/users/4051748/mochan"}, "reply_to_user": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1556135815, "post_id": 55837316, "comment_id": 98339361, "body": "@LogicStuff Where to add <code>const</code>? It says it is a non-member function. I don&#39;t quite follow."}, {"owner": {"reputation": 999, "user_id": 4051748, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3d012d2cf5c02a4b9de7ef6c5fb6f3d8?s=128&d=identicon&r=PG", "display_name": "Mochan", "link": "https://stackoverflow.com/users/4051748/mochan"}, "reply_to_user": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "edited": false, "score": 0, "creation_date": 1556136004, "post_id": 55837316, "comment_id": 98339461, "body": "@JeJo I have to have the friend version. It works in this example but it doesn&#39;t work in my real code-base."}, {"owner": {"reputation": 1699, "user_id": 11255447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8df72cdbb62b1cf94eff00f4ae6c99e3?s=128&d=identicon&r=PG", "display_name": "aparpara", "link": "https://stackoverflow.com/users/11255447/aparpara"}, "edited": false, "score": 1, "creation_date": 1556136032, "post_id": 55837316, "comment_id": 98339473, "body": "@Mochan, you put an assignment (=) instead of equality (==) in <code>bool operator ==</code>"}, {"owner": {"reputation": 999, "user_id": 4051748, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3d012d2cf5c02a4b9de7ef6c5fb6f3d8?s=128&d=identicon&r=PG", "display_name": "Mochan", "link": "https://stackoverflow.com/users/4051748/mochan"}, "reply_to_user": {"reputation": 1699, "user_id": 11255447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8df72cdbb62b1cf94eff00f4ae6c99e3?s=128&d=identicon&r=PG", "display_name": "aparpara", "link": "https://stackoverflow.com/users/11255447/aparpara"}, "edited": false, "score": 0, "creation_date": 1556136148, "post_id": 55837316, "comment_id": 98339523, "body": "@aparpara Sorry typo. I wrote that as a comment. It is not really in the code."}, {"owner": {"reputation": 999, "user_id": 4051748, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3d012d2cf5c02a4b9de7ef6c5fb6f3d8?s=128&d=identicon&r=PG", "display_name": "Mochan", "link": "https://stackoverflow.com/users/4051748/mochan"}, "reply_to_user": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "edited": false, "score": 0, "creation_date": 1556136303, "post_id": 55837316, "comment_id": 98339590, "body": "@JeJo Your answer was the solution."}], "answers": [{"comments": [{"owner": {"reputation": 999, "user_id": 4051748, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3d012d2cf5c02a4b9de7ef6c5fb6f3d8?s=128&d=identicon&r=PG", "display_name": "Mochan", "link": "https://stackoverflow.com/users/4051748/mochan"}, "edited": false, "score": 1, "creation_date": 1556136736, "post_id": 55837748, "comment_id": 98339763, "body": "This is a really nice solution. Works great. I had never heard of non-deduced context. Thank you."}], "tags": [], "owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "is_accepted": true, "score": 3, "last_activity_date": 1556136192, "creation_date": 1556136192, "answer_id": 55837748, "question_id": 55837316, "link": "https://stackoverflow.com/questions/55837316/inner-class-of-a-template-class-friend-function/55837748#55837748", "title": "Inner class of a template class friend function", "body": "<p>It's a <a href=\"https://stackoverflow.com/questions/25245453/what-is-a-nondeduced-context\">non-deduced context</a>.</p>\n\n<p>Ostensibly you could have a definition like</p>\n\n<pre><code>template&lt;typename AB&gt;\nbool operator == (const AB&amp; b1, const AB&amp; b2)\n{\n    return b1.b == b2.b;\n}\n</code></pre>\n\n<p>but it's too broad as it catches <em>all</em> types. Yoiy can restrict it this way</p>\n\n<pre><code>template&lt;typename AB&gt;\nauto operator == (const AB&amp; b1, const AB&amp; b2) -&gt;\n     std::enable_if_t&lt;std::is_same_v&lt;AB, typename A&lt;decltype(b1.b)&gt;::B&gt;, bool&gt;\n{\n    return b1.b == b2.b;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 999, "user_id": 4051748, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3d012d2cf5c02a4b9de7ef6c5fb6f3d8?s=128&d=identicon&r=PG", "display_name": "Mochan", "link": "https://stackoverflow.com/users/4051748/mochan"}, "is_accepted": false, "score": 1, "last_activity_date": 1556136344, "creation_date": 1556136344, "answer_id": 55837785, "question_id": 55837316, "link": "https://stackoverflow.com/questions/55837316/inner-class-of-a-template-class-friend-function/55837785#55837785", "title": "Inner class of a template class friend function", "body": "<p>This worked for me.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate&lt;typename T&gt;\nstruct A\n{\n    struct B\n    {\n        T b;\n    };\n\n    friend bool operator==(const typename A&lt;T&gt;::B &amp;b1, const typename A&lt;T&gt;::B &amp;b2)\n    {\n        return b1.b == b2.b;\n    }\n\n    B b;\n};\n\nint main() {\n    A&lt;int&gt;::B b1, b2;\n    b1.b = 3;\n    b2.b = 2;\n\n    std::cout &lt;&lt; (b1 == b2) &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 999, "user_id": 4051748, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3d012d2cf5c02a4b9de7ef6c5fb6f3d8?s=128&d=identicon&r=PG", "display_name": "Mochan", "link": "https://stackoverflow.com/users/4051748/mochan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 55837748, "answer_count": 2, "score": 3, "last_activity_date": 1556136344, "creation_date": 1556134416, "last_edit_date": 1556136117, "question_id": 55837316, "link": "https://stackoverflow.com/questions/55837316/inner-class-of-a-template-class-friend-function", "title": "Inner class of a template class friend function", "body": "<p>I have a templated class <code>A</code> with an inner class <code>B</code>. I want to have a friend == operator. However, the following code does not compile. It says, <code>couldn't deduce template parameter \u2018T\u2019</code></p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate&lt;typename T&gt;\nstruct A\n{\n    struct B\n    {\n        T b;\n\n        template&lt;typename T2&gt;\n        friend bool operator == (const typename A&lt;T2&gt;::B&amp; b1, const typename A&lt;T2&gt;::B&amp; b2);\n    };\n\n    B b;\n};\n\ntemplate&lt;typename T&gt;\nbool operator == (const typename A&lt;T&gt;::B&amp; b1, const typename A&lt;T&gt;::B&amp; b2)\n{\n    return b1.b == b2.b;\n}\n\nint main() {\n    A&lt;int&gt;::B b1, b2;\n    b1.b = 3;\n    b2.b = 2;\n\n    std::cout &lt;&lt; (b1 == b2) &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>I have to have the friend version because the way one of the STL algorithms calls it results in <code>==</code> not found otherwise even if I have <code>bool operator == (const B&amp; b_) { return b == b_.b; }</code></p>\n\n<p>What is the way to solve this? </p>\n"}, {"tags": ["c++", "xcode", "terminal"], "comments": [{"owner": {"reputation": 1220, "user_id": 796375, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kYKRy.jpg?s=128&g=1", "display_name": "cfillion", "link": "https://stackoverflow.com/users/796375/cfillion"}, "edited": false, "score": 1, "creation_date": 1556134754, "post_id": 55837255, "comment_id": 98338915, "body": "<code>&#47;usr&#47;local&#47;bin</code>, where <code>brew</code> is, is likely is not in the <code>PATH</code> environment variable. Try running it using its absolute path: <code>&#47;usr&#47;local&#47;bin&#47;brew</code>."}, {"owner": {"reputation": 67, "user_id": 5063556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5a2e1fb9ee368d19337a8255c64f481?s=128&d=identicon&r=PG&f=1", "display_name": "evn", "link": "https://stackoverflow.com/users/5063556/evn"}, "reply_to_user": {"reputation": 1220, "user_id": 796375, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kYKRy.jpg?s=128&g=1", "display_name": "cfillion", "link": "https://stackoverflow.com/users/796375/cfillion"}, "edited": false, "score": 0, "creation_date": 1556139005, "post_id": 55837255, "comment_id": 98340705, "body": "@cfillion Thanks this worked! Do you know how to add that to XCode so I don&#39;t need to write the absolute path each time?"}, {"owner": {"reputation": 67, "user_id": 5063556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5a2e1fb9ee368d19337a8255c64f481?s=128&d=identicon&r=PG&f=1", "display_name": "evn", "link": "https://stackoverflow.com/users/5063556/evn"}, "reply_to_user": {"reputation": 1220, "user_id": 796375, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kYKRy.jpg?s=128&g=1", "display_name": "cfillion", "link": "https://stackoverflow.com/users/796375/cfillion"}, "edited": false, "score": 0, "creation_date": 1570737186, "post_id": 55837255, "comment_id": 103018329, "body": "also @cfillion can you add your comment as an answer so I can mark this solved? ty"}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 5063556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5a2e1fb9ee368d19337a8255c64f481?s=128&d=identicon&r=PG&f=1", "display_name": "evn", "link": "https://stackoverflow.com/users/5063556/evn"}, "edited": false, "score": 0, "creation_date": 1556138945, "post_id": 55837709, "comment_id": 98340669, "body": "Great! I tried @cfillion &#39;s absolute path and it worked. Is there a way I can add this to the <code>PATH</code> variable in XCode?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "reply_to_user": {"reputation": 67, "user_id": 5063556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5a2e1fb9ee368d19337a8255c64f481?s=128&d=identicon&r=PG&f=1", "display_name": "evn", "link": "https://stackoverflow.com/users/5063556/evn"}, "edited": false, "score": 0, "creation_date": 1556146080, "post_id": 55837709, "comment_id": 98342857, "body": "That depends on your system version. See <a href=\"https://apple.stackexchange.com/questions/106355/setting-the-system-wide-path-environment-variable-in-mavericks\">here</a> for suggestions. (I don&#39;t know how well the answers work now; I haven&#39;t felt the need to do this for years,)"}], "tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": false, "score": 1, "last_activity_date": 1556136008, "creation_date": 1556136008, "answer_id": 55837709, "question_id": 55837255, "link": "https://stackoverflow.com/questions/55837255/how-to-fix-sh-brew-command-not-found-in-xcode/55837709#55837709", "title": "How to fix &#39;sh: brew: command not found&#39; in Xcode?", "body": "<p><code>system</code> does not load your shell's configuration files, and that's where <code>/usr/local/bin</code> is added to the <code>PATH</code> environment variable.<br>\n(That directory is not included by default on OS X.)</p>\n\n<p>The simplest solutions are probably to either use the full path, or start XCode from the terminal so it inherits your shell's <code>PATH</code>.</p>\n\n<p>(More details about how <code>PATH</code> works, and environment variables in general, can be found in any introduction to Unix-y systems.)</p>\n"}], "owner": {"reputation": 67, "user_id": 5063556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5a2e1fb9ee368d19337a8255c64f481?s=128&d=identicon&r=PG&f=1", "display_name": "evn", "link": "https://stackoverflow.com/users/5063556/evn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7650, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556275968, "creation_date": 1556134212, "last_edit_date": 1556275968, "question_id": 55837255, "link": "https://stackoverflow.com/questions/55837255/how-to-fix-sh-brew-command-not-found-in-xcode", "title": "How to fix &#39;sh: brew: command not found&#39; in Xcode?", "body": "<p>I'm making a command-line tool in Xcode, and want to call terminal commands with my C++ code. </p>\n\n<p>I found the <code>system()</code> function can run terminal commands. And I know that the commands I want work in my Terminal. But these commands are not working the same way when I call them with <code>system()</code> in Xcode.</p>\n\n<p>For example, I tried calling the brew command in Xcode.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>system(\"brew\");\n</code></pre>\n\n<p>I expect the output to be the same as when I type <code>brew</code> into my terminal:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>Example usage:\n  brew search [TEXT|/REGEX/]\n  ...etc\n</code></pre>\n\n<p>but the actual output in Xcode is <code>sh: brew: command not found</code>.</p>\n\n<p><strong>Why is <code>system()</code> acting differently than terminal? Should I be using a different function?</strong></p>\n"}, {"tags": ["c++", "c++11", "lambda", "compiler-errors", "this"], "comments": [{"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 1, "creation_date": 1556134414, "post_id": 55837234, "comment_id": 98338781, "body": "This seem to be a compiler bug. Report it to your implementer."}], "owner": {"reputation": 758, "user_id": 6386977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dbe1206c8461a32bc0b1894dc518f97?s=128&d=identicon&r=PG&f=1", "display_name": "Rabster", "link": "https://stackoverflow.com/users/6386977/rabster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1556134405, "creation_date": 1556134097, "last_edit_date": 1556134405, "question_id": 55837234, "link": "https://stackoverflow.com/questions/55837234/lambdas-is-this-keyword-needed-to-disambiguate-const-non-const-member-functions", "title": "Lambdas, Is this keyword needed to disambiguate const/non-const member functions?", "body": "<p>When I use MSVC to compile this program, I receive the error, </p>\n\n<blockquote>\n  <p>\"Example::bar ambiguous call to overloaded function\"</p>\n</blockquote>\n\n<p>Then, I found that the <code>this</code> keyword was able to resolve the error. Surprised, I used rextester and found that both Clang and GCC were able to compile the program without the <code>this</code> keyword.</p>\n\n<p>Here is the program in question.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass Example {\npublic:\n    Example() {\n        auto lambda = [this]() {\n            //this-&gt;bar&lt;int&gt;(); //  Using this allows the program to compile and run successfully.\n            bar&lt;int&gt;(); //   This doesn't work in MSVC\n        };\n        lambda();\n    }\n\n    template&lt;typename T&gt;\n    void bar() {\n        std::cout &lt;&lt; \"(non-const) bar\\n\";\n    }\n\n    template&lt;typename t&gt;\n    void bar() const {\n        std::cout &lt;&lt; \"(const) bar\\n\";\n    }\n};\n\nint main() {\n    Example example;\n}\n</code></pre>\n\n<p>Ultimately I am asking, is <code>this</code> keyword needed in a lambda to disambiguate between const and non-const member functions and whether MSVC is correct or GCC and Clang are correct.</p>\n\n<p>I am using Visual Studio 2017 and the full version of MSVC is 191627027</p>\n"}, {"tags": ["c++", "data-structures", "treap"], "comments": [{"owner": {"reputation": 680, "user_id": 7298981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/749eb9d0d9168c9f73baa6461aea1fff?s=128&d=identicon&r=PG", "display_name": "Leonid", "link": "https://stackoverflow.com/users/7298981/leonid"}, "edited": false, "score": 0, "creation_date": 1556149747, "post_id": 55837209, "comment_id": 98343543, "body": "just curious; Why are you doing <code>(*node).getRightSon()</code> instead of <code>node-&gt;getRightSon()</code>?"}, {"owner": {"reputation": 363, "user_id": 11249957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6002dbfc2a513f20bbd1191118595a3c?s=128&d=identicon&r=PG&f=1", "display_name": "dodekja", "link": "https://stackoverflow.com/users/11249957/dodekja"}, "reply_to_user": {"reputation": 680, "user_id": 7298981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/749eb9d0d9168c9f73baa6461aea1fff?s=128&d=identicon&r=PG", "display_name": "Leonid", "link": "https://stackoverflow.com/users/7298981/leonid"}, "edited": false, "score": 0, "creation_date": 1556193125, "post_id": 55837209, "comment_id": 98359087, "body": "@Leonid the project is provided by school and Intellisense is not working in it for some reason. It&#39;s easier to type (*node).getRightSon() than node-&gt;getRightSon()"}], "answers": [{"tags": [], "owner": {"reputation": 680, "user_id": 7298981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/749eb9d0d9168c9f73baa6461aea1fff?s=128&d=identicon&r=PG", "display_name": "Leonid", "link": "https://stackoverflow.com/users/7298981/leonid"}, "is_accepted": true, "score": 0, "last_activity_date": 1556204333, "last_edit_date": 1556204333, "creation_date": 1556150220, "answer_id": 55840032, "question_id": 55837209, "link": "https://stackoverflow.com/questions/55837209/can-rotations-in-treap-violate-its-heap-ordering-or-the-binary-search-tree-orde/55840032#55840032", "title": "Can rotations in treap violate it&#39;s heap-ordering or the binary search tree order?", "body": "<p>Heap-ordering will be destroyed by rotation, since given a root node (X0, Y0), which a child (X1, Y1), after the rotation, (X1, Y1) will be root. Since the Y-value of the root has to be greater than that of the child, we know that Y0 > Y1 initially. After the rotation, Y1 being root requires that Y1 > Y0, which is not true.</p>\n\n<p>Binary search tree properties are not destroyed by rotation, though.</p>\n"}], "owner": {"reputation": 363, "user_id": 11249957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6002dbfc2a513f20bbd1191118595a3c?s=128&d=identicon&r=PG&f=1", "display_name": "dodekja", "link": "https://stackoverflow.com/users/11249957/dodekja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 55840032, "answer_count": 1, "score": 0, "last_activity_date": 1556204333, "creation_date": 1556133947, "question_id": 55837209, "link": "https://stackoverflow.com/questions/55837209/can-rotations-in-treap-violate-its-heap-ordering-or-the-binary-search-tree-orde", "title": "Can rotations in treap violate it&#39;s heap-ordering or the binary search tree order?", "body": "<p>I'm not sure if I can violate treap's heap-ordering or it's binary search tree like structure with left and/or right rotation methods.</p>\n\n<p>This is the code for left rotation</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>typename BinarySearchTree&lt;K, T&gt;::BSTTreeNode* rightSon = (*node).getRightSon();\n        if (rightSon != nullptr)\n        {\n            typename BinarySearchTree&lt;K,T&gt;::BSTTreeNode* leftGreatSon = (*rightSon).getLeftSon();\n            (*node).setRightSon(leftGreatSon);\n            (*rightSon).setLeftSon(node);\n        }\n\n</code></pre>\n\n<p>and  right rotation</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>typename BinarySearchTree&lt;K,T&gt;::BSTTreeNode* leftSon = (*node).getleftSon();\n        if (leftSon != nullptr)\n        {\n            typename BinarySearchTree&lt;K,T&gt;::BSTTreeNode* rightGreatSon = (*leftSon).getRightSon();\n            (*leftSon).setRightSon(node);\n            (*node).setLeftSon(parent);\n        }\n</code></pre>\n\n<p>I'd expect these rotations to not violate the heap-ordering and the binary search tree like structure of the treap.</p>\n"}, {"tags": ["c++", "graphics", "3d", "vulkan"], "comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 3, "creation_date": 1556134241, "post_id": 55837181, "comment_id": 98338726, "body": "It&#39;s really unclear as to exactly what you&#39;re trying to do here. You want to &quot;write vertices&quot;, but to <i>what</i>? What do those vertices mean? How will you use them? Where do you want to write them to, and what will you do with them after writing them?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1556134723, "post_id": 55837181, "comment_id": 98338903, "body": "<code>s1v1</code> through <code>s6v4</code> looks a lot like you want a 2D array. Might make what you&#39;re stuck on a little easier."}, {"owner": {"reputation": 13, "user_id": 8903953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/555f0ff40a580bb56c959e1cc9b185a1?s=128&d=identicon&r=PG&f=1", "display_name": "jdp_", "link": "https://stackoverflow.com/users/8903953/jdp"}, "edited": false, "score": 0, "creation_date": 1556141331, "post_id": 55837181, "comment_id": 98341539, "body": "These vertices will be used to draw 6 faces (which in total make a rectangle/square. These vertices will be used in Vulkan."}], "answers": [{"tags": [], "owner": {"reputation": 680, "user_id": 7298981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/749eb9d0d9168c9f73baa6461aea1fff?s=128&d=identicon&r=PG", "display_name": "Leonid", "link": "https://stackoverflow.com/users/7298981/leonid"}, "is_accepted": false, "score": 0, "last_activity_date": 1556151295, "creation_date": 1556151295, "answer_id": 55840144, "question_id": 55837181, "link": "https://stackoverflow.com/questions/55837181/how-do-i-construct-a-matrix-of-vertices-from-2-vectors/55840144#55840144", "title": "How do I construct a matrix of vertices from 2 vectors?", "body": "<p>In any case, the first thing you should do is use an array instead of a ton of fields in order to store vertices.</p>\n\n<p>I assume that by writing the vertices you are writing it between calls to <code>vkMapMemory</code> and <code>vkUnmapMemory</code> (I am not a Vulkan expert lol). In this case, the most efficient way I can think of doing it would be to use an array of floats rather than an array of <code>Vertex3</code>s (otherwise you either have to copy one by one, or you have to find your way through standard layout, alignment requirements, and other stuff that is much more complicated than a simple array of floats), and write it using that. As for editing the float array, that is fairly straightforward. The other virtually equivalent option is a multidimensional array of floats, and in the case that the number of vertices is never going to change (is known at compile time), this also works (in any case, a simple array simply emulates a multidimensional array anyway).</p>\n"}, {"tags": [], "owner": {"reputation": 1072, "user_id": 9147444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/401da44c9202003f9b80bc745c6db1ed?s=128&d=identicon&r=PG", "display_name": "Mauricio Cele Lopez Belon", "link": "https://stackoverflow.com/users/9147444/mauricio-cele-lopez-belon"}, "is_accepted": true, "score": 0, "last_activity_date": 1556283111, "last_edit_date": 1556283111, "creation_date": 1556282708, "answer_id": 55867957, "question_id": 55837181, "link": "https://stackoverflow.com/questions/55837181/how-do-i-construct-a-matrix-of-vertices-from-2-vectors/55867957#55867957", "title": "How do I construct a matrix of vertices from 2 vectors?", "body": "<p>Those two vectors are probably representing an \"Axis Aligned Bounding Box\" (AABB): <a href=\"https://en.m.wikipedia.org/wiki/Bounding_volume\" rel=\"nofollow noreferrer\">https://en.m.wikipedia.org/wiki/Bounding_volume</a></p>\n\n<p>An AABB is a ractangular cuboid (i.e., 3D version of a rectangle) with the particularity that its edges are aligned wiyh the cartesian axis. That means that we can define any AABB using either a center point and the half-extents (size) of the box in the three orthogonal directions or two vertices which correspond to the min and max corners of the box.</p>\n\n<p>So, in code you better define an struct AABB that contains two vertices with names such as minPoint and maxPoint.</p>\n\n<p>Other thing is that you don't need to define 24 vertices. You only need 8 vertices. Then you need to define 6 faces, with each face containing 3 integers for triangles or 4 integers for quads, the integers are the indices of vertices. Vulkan should provide a render function with two parameters: list of vertices (probably an array of floats) and list of faces (probably an array of ints).</p>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 13, "user_id": 8903953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/555f0ff40a580bb56c959e1cc9b185a1?s=128&d=identicon&r=PG&f=1", "display_name": "jdp_", "link": "https://stackoverflow.com/users/8903953/jdp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 55867957, "answer_count": 2, "score": 0, "last_activity_date": 1556283111, "creation_date": 1556133775, "question_id": 55837181, "link": "https://stackoverflow.com/questions/55837181/how-do-i-construct-a-matrix-of-vertices-from-2-vectors", "title": "How do I construct a matrix of vertices from 2 vectors?", "body": "<p>I'm writing a game engine in C++ that interacts with Vulkan. In order for me to be able to draw anything on the screen, I need to write vertices.</p>\n\n<p>The game engine offers a slightly higher level interface to Vulkan, and it needs to be able to construct the vertices from a position Vector3 and a size Vector3.</p>\n\n<p>I'm clueless on how to tackle this problem efficiently, anyone that may point me in the right direction? Thanks!!</p>\n\n<pre><code>class SquareMatrix {\npublic:\n  Vector3 s1v1, s1v2, s1v3, s1v4, // Top\n          s2v1, s2v2, s2v3, s2v4, // Bottom\n          s3v1, s3v2, s3v3, s3v4, // Left\n          s4v1, s4v2, s4v3, s4v4, // Right\n          s5v1, s5v2, s5v3, s5v4, // Front\n          s6v1, s6v2, s6v3, s6v4; // Back\n  SquareMatrix(Vector3&amp; v1, Vector3&amp; v2) {\n    std::array&lt;std::array&lt;Vector3, 4&gt;, 6&gt; Square;\n    for(int a=0; a&lt;=6; a++) {\n      for(int b = 0; b &lt;= 4; b++) {\n        // Stumped!\n      }\n    }\n  }\n};\n</code></pre>\n"}, {"tags": ["c++", "c++11", "uniform-initialization"], "comments": [{"owner": {"reputation": 2019, "user_id": 10035556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86cea073655558939d961937095efc80?s=128&d=identicon&r=PG&f=1", "display_name": "Mayur", "link": "https://stackoverflow.com/users/10035556/mayur"}, "edited": false, "score": 0, "creation_date": 1556133670, "post_id": 55837133, "comment_id": 98338515, "body": "what&#39;s an error?"}, {"owner": {"reputation": 9766, "user_id": 1305891, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/bca679c18291b3c88ee8ffae151d81a1?s=128&d=identicon&r=PG", "display_name": "Rajeshwar", "link": "https://stackoverflow.com/users/1305891/rajeshwar"}, "edited": false, "score": 0, "creation_date": 1556133817, "post_id": 55837133, "comment_id": 98338571, "body": "ok let me update"}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1556133835, "post_id": 55837133, "comment_id": 98338579, "body": "You have more than 1 user-defined conversion happening. Fix it by doing <code>vector&lt;string&gt;{&quot;A,&quot;,&quot;B&quot;,&quot;C&quot;}</code>."}], "answers": [{"comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 9766, "user_id": 1305891, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/bca679c18291b3c88ee8ffae151d81a1?s=128&d=identicon&r=PG", "display_name": "Rajeshwar", "link": "https://stackoverflow.com/users/1305891/rajeshwar"}, "edited": false, "score": 0, "creation_date": 1556134496, "post_id": 55837240, "comment_id": 98338819, "body": "@Rajeshwar, that code looks good to me. It works fine on my computer."}, {"owner": {"reputation": 9766, "user_id": 1305891, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/bca679c18291b3c88ee8ffae151d81a1?s=128&d=identicon&r=PG", "display_name": "Rajeshwar", "link": "https://stackoverflow.com/users/1305891/rajeshwar"}, "edited": false, "score": 0, "creation_date": 1556140671, "post_id": 55837240, "comment_id": 98341319, "body": "This technically causes a crash. I just posted a new question based on this"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 3, "last_activity_date": 1556134599, "last_edit_date": 1556134599, "creation_date": 1556134114, "answer_id": 55837240, "question_id": 55837133, "link": "https://stackoverflow.com/questions/55837133/passing-an-initializer-list-to-a-vector-based-constructor/55837240#55837240", "title": "Passing an initializer list to a vector based constructor", "body": "<p>You need another pair of braces. Use:</p>\n\n<pre><code>0x0f, {{\"A\", \"B\", \"C\", \"D\"}}\n</code></pre>\n\n<p>Without that, the compiler tries to construct a <code>test</code> using the arguments <code>\"A\", \"B\", \"C\", \"D\"</code>, as if <code>test{\"A\", \"B\", \"C\", \"D\"}</code>, which does not work.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 9899401, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Oe-bpb_BpaU/AAAAAAAAAAI/AAAAAAAAADk/YR0wjQWFJZY/photo.jpg?sz=128", "display_name": "cpppwner", "link": "https://stackoverflow.com/users/9899401/cpppwner"}, "is_accepted": false, "score": 0, "last_activity_date": 1556134431, "creation_date": 1556134431, "answer_id": 55837320, "question_id": 55837133, "link": "https://stackoverflow.com/questions/55837133/passing-an-initializer-list-to-a-vector-based-constructor/55837320#55837320", "title": "Passing an initializer list to a vector based constructor", "body": "<p>This will work:</p>\n\n<pre><code>class test\n{\n   public:\n   test(std::vector&lt;std::string&gt; str)\n   {\n   }\n   test()\n   {\n   }\n    const std::multimap&lt;int,  std::multimap&lt;int, test&gt;&gt; _var= {\n                 {0x01,  {\n                            {\n                                0x0f, std::vector&lt;std::string&gt;{\"A\", \"B\", \"C\", \"D\"}\n                            }\n                         }\n                 }\n        };   \n};\n</code></pre>\n\n<p>Nevertheless, you should never pass containers by value.</p>\n\n<p>An alternative approach is to use an std::initializer_list in your ctor, then your code can be written as:</p>\n\n<pre><code>class test\n{\n   public:\n   test(std::initializer_list&lt;std::string&gt; str)\n   {\n   }\n   test()\n   {\n   }\n    const std::multimap&lt;int,  std::multimap&lt;int, test&gt;&gt; _var= {\n                 {0x01,  {\n                            {\n                                0x0f, {\"A\", \"B\", \"C\", \"D\"}\n                            }\n                         }\n                 }\n        };   \n};\n</code></pre>\n"}], "owner": {"reputation": 9766, "user_id": 1305891, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/bca679c18291b3c88ee8ffae151d81a1?s=128&d=identicon&r=PG", "display_name": "Rajeshwar", "link": "https://stackoverflow.com/users/1305891/rajeshwar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 395, "favorite_count": 0, "accepted_answer_id": 55837240, "answer_count": 2, "score": 1, "last_activity_date": 1556134599, "creation_date": 1556133506, "last_edit_date": 1556133892, "question_id": 55837133, "link": "https://stackoverflow.com/questions/55837133/passing-an-initializer-list-to-a-vector-based-constructor", "title": "Passing an initializer list to a vector based constructor", "body": "<p>I currently have the following code</p>\n\n<pre><code>class test\n{\n   public:\n   test(std::vector&lt;std::string&gt; str)\n   {\n   }\n   test()\n   {\n   }\n    const std::multimap&lt;int,  std::multimap&lt;int, test&gt;&gt; _var= {\n                 {0x01,  {\n                            {\n                                0x0f, {\"A\", \"B\", \"C\", \"D\"}\n                            }\n                         }\n                 }\n        };   \n};\n\nint main()\n{  \n  test t;\n}\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>main.cpp:29:9: error: could not convert '{{1, {{15, {\"A\", \"B\", \"C\", \"D\"}}}}}' from '&lt;brace-enclosed initializer list&gt;' to 'const std::multimap&lt;int, std::multimap&lt;int, test&gt; &gt;'\n         };\n         ^\n</code></pre>\n\n<p>I wanted to know why passing {\"A\", \"B\", \"C\", \"D\"} to <code>std::vector&lt;std::string&gt; str)</code> is failing ? Any suggestions on how I can resolve this issue ? </p>\n"}, {"tags": ["c++", "macos", "qt", "dcmtk"], "comments": [{"owner": {"reputation": 31, "user_id": 11407176, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217174059656389/picture?type=large", "display_name": "Melinda Bechini", "link": "https://stackoverflow.com/users/11407176/melinda-bechini"}, "reply_to_user": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1556134487, "post_id": 55837066, "comment_id": 98338811, "body": "Thanks for the reply, i have added my .pro file"}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 11407176, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217174059656389/picture?type=large", "display_name": "Melinda Bechini", "link": "https://stackoverflow.com/users/11407176/melinda-bechini"}, "is_accepted": true, "score": 2, "last_activity_date": 1556268536, "creation_date": 1556268536, "answer_id": 55864003, "question_id": 55837066, "link": "https://stackoverflow.com/questions/55837066/dcmtk-library-with-qt-in-mac/55864003#55864003", "title": "DCMTK library with qt in mac", "body": "<p>Problems solved, i post here the solution because it could be helpful for someone. \nWhen you include the dcmtk you have also to include zlib and libiconv. </p>\n\n<p>INCLUDEPATH += /usr/local/Cellar/dcmtk/3.6.4/include \\\n               /usr/local/opt/zlib/lib/include</p>\n\n<p>LIBS += -L/usr/local/lib \\\n        -L/usr/local/Cellar/opencv/4.1.0_1/lib \\\n        -L/usr/local/Cellar/dcmtk/3.6.4/lib \\\n        -ldcmdata \\\n        -ldcmimgle \\\n        -ldcmjpeg \\\n        -loflog \\\n        -ldcmpstat \\\n        -lofstd \\\n        -liconv \\\n        -lz</p>\n"}], "owner": {"reputation": 31, "user_id": 11407176, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217174059656389/picture?type=large", "display_name": "Melinda Bechini", "link": "https://stackoverflow.com/users/11407176/melinda-bechini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 1, "accepted_answer_id": 55864003, "answer_count": 1, "score": 1, "last_activity_date": 1556268536, "creation_date": 1556133174, "last_edit_date": 1556134426, "question_id": 55837066, "link": "https://stackoverflow.com/questions/55837066/dcmtk-library-with-qt-in-mac", "title": "DCMTK library with qt in mac", "body": "<p>i have installed DCMTK through brew and i have configured it on qt adding the path directed to the library. When i try to open a DICOM image and run the project, i have these 2 errors: <code>\nUndefined symbols for architecture x86_64:\n  \"DicomImage::DicomImage(char const*, unsigned long, unsigned long, unsigned long)\", referenced from:\n      MainWindow::on_pushButton_clicked() in mainwindow.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nmake: *** [testDicom.app/Contents/MacOS/testDicom] Error 1\n21:04:21: The process \"/usr/bin/make\" exited with code 2.\nError while building/deploying project testDicom (kit: Desktop Qt 5.12.1 clang 64bit)\nWhen executing step \"Make\"\n21:04:21: Elapsed time: 00:00.</code>\nHow can i solve it?</p>\n\n<p>UPDATE (this is my file.pro):</p>\n\n<p></p>\n\n<pre><code>#\n# Project created by QtCreator 2019-04-24T20:43:01\n#\n#-------------------------------------------------\n\nQT       += core gui\n\ngreaterThan(QT_MAJOR_VERSION, 4): QT += widgets\n\nTARGET = testDicom\nTEMPLATE = app\n\n# The following define makes your compiler emit warnings if you use\n# any feature of Qt which has been marked as deprecated (the exact warnings\n# depend on your compiler). Please consult the documentation of the\n# deprecated API in order to know how to port your code away from it.\nDEFINES += QT_DEPRECATED_WARNINGS\n\n# You can also make your code fail to compile if you use deprecated APIs.\n# In order to do so, uncomment the following line.\n# You can also select to disable deprecated APIs only up to a certain version of Qt.\n#DEFINES += QT_DISABLE_DEPRECATED_BEFORE=0x060000    # disables all the APIs deprecated before Qt 6.0.0\n\nCONFIG += c++11\n\nSOURCES += \\\n        main.cpp \\\n        mainwindow.cpp\n\nHEADERS += \\\n        mainwindow.h\n\nINCLUDEPATH += /usr/local/Cellar/dcmtk/3.6.4/include \\\n\n\nLIBS += -L/usr/local/lib \\\n        -L/usr/local/Cellar/dcmtk/3.6.4/lib \\\n        -L/usr/local/Cellar/dcmtk/3.6.4/bin\n\n\nFORMS += \\\n        mainwindow.ui\n\n# Default rules for deployment.\nqnx: target.path = /tmp/$${TARGET}/bin\nelse: unix:!android: target.path = /opt/$${TARGET}/bin\n!isEmpty(target.path): INSTALLS += target\n</code></pre>\n"}, {"tags": ["python", "c++", "jupyter-notebook", "cython"], "comments": [{"owner": {"reputation": 3326, "user_id": 1286628, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/3bed893585a9edc032201bed4dbca3a6?s=128&d=identicon&r=PG", "display_name": "wkschwartz", "link": "https://stackoverflow.com/users/1286628/wkschwartz"}, "edited": false, "score": 0, "creation_date": 1560831903, "post_id": 55836761, "comment_id": 99853998, "body": "Running Jupyter and Cython locally, I find that I can force recompilation by deleting Cython&#39;s cache. On macOS, the default location appears to be <code>~&#47;.ipython&#47;cython</code>, so I run <code>rm -rf ~&#47;.ipython&#47;cython</code> every time I change Cython code in my Jupyter notebook. I&#39;m not sure how to extend this solution for your situation, but maybe that&#39;ll get you started."}, {"owner": {"reputation": 685, "user_id": 1841956, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/56e7af2b73d6866cd7b009e731bd1fe6?s=128&d=identicon&r=PG", "display_name": "RestInPeace", "link": "https://stackoverflow.com/users/1841956/restinpeace"}, "reply_to_user": {"reputation": 3326, "user_id": 1286628, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/3bed893585a9edc032201bed4dbca3a6?s=128&d=identicon&r=PG", "display_name": "wkschwartz", "link": "https://stackoverflow.com/users/1286628/wkschwartz"}, "edited": false, "score": 0, "creation_date": 1561609764, "post_id": 55836761, "comment_id": 100122126, "body": "@wkschwartz Any idea where the cython cache is located in linux, specifically Ubuntu?"}, {"owner": {"reputation": 15686, "user_id": 4317058, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/793760f86b5f237ee07803f468ce7110?s=128&d=identicon&r=PG", "display_name": "Sergey Bushmanov", "link": "https://stackoverflow.com/users/4317058/sergey-bushmanov"}, "reply_to_user": {"reputation": 685, "user_id": 1841956, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/56e7af2b73d6866cd7b009e731bd1fe6?s=128&d=identicon&r=PG", "display_name": "RestInPeace", "link": "https://stackoverflow.com/users/1841956/restinpeace"}, "edited": false, "score": 0, "creation_date": 1616160672, "post_id": 55836761, "comment_id": 117922676, "body": "@RestInPeace Try <code>&#47;home&#47;&lt;user_name&gt;&#47;.cache&#47;ipython&#47;cython</code>"}], "owner": {"reputation": 1047, "user_id": 3665213, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/HXdIF.png?s=128&g=1", "display_name": "Jakob", "link": "https://stackoverflow.com/users/3665213/jakob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 528, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1556131884, "creation_date": 1556131884, "question_id": 55836761, "link": "https://stackoverflow.com/questions/55836761/cython-c-cache-how-to-clear", "title": "Cython C++ Cache - How to Clear", "body": "<p>I am running a Jupyter notebook on a remote server. Part of this notebook calls a Cython <code>.pyx</code> file <code>cython_file</code> which contains a c++ function definition called <code>cpp_function</code> and is called from the notebook like this:</p>\n\n<p><code>from clibs.cython_file import cpp_function</code></p>\n\n<p>Inside the <code>.pyx</code> file I am calling a c++ header file <code>cpp_file.h</code> like this:</p>\n\n<p><code>cdef extern from \"/home/user/cpp_file.h\":</code></p>\n\n<p>Inside this header file I have the function as defined in cython which, for argument sake, is just a simple logic function.</p>\n\n<p>My issue is this; sometimes when I change the <code>.h</code> c++ file and restart the notebook kernel and re-run the code, nothing changes. It still uses the old version of the <code>.h</code> file. As if it's being cached somewhere.</p>\n\n<p>I have deleted all <code>.pyxbldc</code> and <code>.pyc</code> files before restarting the kernel to no avail.</p>\n\n<p>My <code>.pyxbld</code> file looks like this:</p>\n\n<pre><code>def make_ext(modname, pyxfilename):\n    from distutils.extension import Extension\n    return Extension(name=modname,\n                     sources=[pyxfilename], extra_compile_args=['-fopenmp', '-w'], extra_link_args=['-fopenmp'], language='c++')\n</code></pre>\n\n<p>Any ideas on how to stop the c++ file from being cached?!</p>\n"}, {"tags": ["c++", "boost", "ode"], "comments": [{"owner": {"reputation": 1246, "user_id": 6556709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6389fba1f75367a547c52d9779902b20?s=128&d=identicon&r=PG&f=1", "display_name": "user6556709", "link": "https://stackoverflow.com/users/6556709/user6556709"}, "edited": false, "score": 1, "creation_date": 1556133926, "post_id": 55836746, "comment_id": 98338613, "body": "I don&#39;t get your problem. It is normal that for numerical integration higher numbers of steps increase the precision of the result until the numerical instability becomes the limiting factor. And 10^-15 is quite close to the expected 0."}, {"owner": {"reputation": 1, "user_id": 7222599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8513fdeb52338c4dab4e98cccf10b920?s=128&d=identicon&r=PG&f=1", "display_name": "Shashank", "link": "https://stackoverflow.com/users/7222599/shashank"}, "reply_to_user": {"reputation": 1246, "user_id": 6556709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6389fba1f75367a547c52d9779902b20?s=128&d=identicon&r=PG&f=1", "display_name": "user6556709", "link": "https://stackoverflow.com/users/6556709/user6556709"}, "edited": false, "score": 0, "creation_date": 1556134264, "post_id": 55836746, "comment_id": 98338734, "body": "I am running the code with an adaptive step size. So the result should be independent of tsteps variable. The solution of the ode is an exponent. So the answer should be exp(-500) = 7.12e-218, which is what I get for tsteps = 1000. The steps variable should not matter at all."}, {"owner": {"reputation": 1246, "user_id": 6556709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6389fba1f75367a547c52d9779902b20?s=128&d=identicon&r=PG&f=1", "display_name": "user6556709", "link": "https://stackoverflow.com/users/6556709/user6556709"}, "edited": false, "score": 0, "creation_date": 1556136543, "post_id": 55836746, "comment_id": 98339682, "body": "Actually the starting size has an impact. You should try to calculate the adapted size by hand. I&#39;m pretty sure your absolute error in combination with the starting step size will yield a different adapted step size for your two variants."}, {"owner": {"reputation": 1, "user_id": 7222599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8513fdeb52338c4dab4e98cccf10b920?s=128&d=identicon&r=PG&f=1", "display_name": "Shashank", "link": "https://stackoverflow.com/users/7222599/shashank"}, "reply_to_user": {"reputation": 1246, "user_id": 6556709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6389fba1f75367a547c52d9779902b20?s=128&d=identicon&r=PG&f=1", "display_name": "user6556709", "link": "https://stackoverflow.com/users/6556709/user6556709"}, "edited": false, "score": 0, "creation_date": 1556137755, "post_id": 55836746, "comment_id": 98340158, "body": "Thanks. I don&#39;t know how I missed it. When I had tsteps = 1000 the inital step size was reset controlling the error. For tsteps = 100 the err_abs was dominating over err_rel, but that was not the case with tsteps = 1000 since the intial step size was reset at regular intervals. If I set err_abs = 0.0 then the result becomes independent of tsteps variable as expected."}], "owner": {"reputation": 1, "user_id": 7222599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8513fdeb52338c4dab4e98cccf10b920?s=128&d=identicon&r=PG&f=1", "display_name": "Shashank", "link": "https://stackoverflow.com/users/7222599/shashank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556131850, "creation_date": 1556131850, "question_id": 55836746, "link": "https://stackoverflow.com/questions/55836746/boost-giving-strange-result-for-ode-integration", "title": "Boost giving strange result for ode integration", "body": "<p>I ran the following code which solves a simple differential equation. The result seems to depend on tsteps. The result I get for tsteps = 100 is 9.688438503116524e-15, but for tsteps = 1000 the answer is 7.124585369895499e-218 much closer to the expected result.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;boost/numeric/odeint.hpp&gt; // odeint function definitions\nusing namespace std;\nusing namespace boost::numeric::odeint;\ntypedef std::vector&lt; double&gt; state_type;\nint tsize = 1;\nvoid my_observer( const state_type &amp;x, const double t );\nvoid initarrays(state_type &amp;x)\n{\n    x[0]=1.0e0;\n}\nvoid my_system( const state_type &amp;x , state_type &amp;dxdt , const double t )\n{\n    dxdt[0]=-x[0];\n}\nvoid my_observer( const state_type &amp;x, const double t )\n{\n    std::cout&lt;&lt;t&lt;&lt;\" \";\n    for(int i=0;i&lt;tsize;i++)\n    {\n    std::cout&lt;&lt;x[i]&lt;&lt;\" \";\n    }\n    std::cout&lt;&lt;std::endl;\n}\nint main()\n{\n    std::cout.setf ( std::ios::scientific, std::ios::floatfield );\n    std::cout.precision(15);\n    int size=tsize;\n    state_type x0(size);\n    double err_abs = 1.0e-12;\n    double err_rel = 1.0e-12;\n    double a_x = 1.0;\n    double a_dxdt = 1.0;\n    initarrays(x0);\n    double t0 = 0.0e0;\n    int tsteps = 1000;\n    double t1 = 500.0e0;\n    double dt = (t1-t0)/((double)tsteps);\n    typedef runge_kutta_fehlberg78&lt; state_type &gt; solver;\n    typedef controlled_runge_kutta&lt; solver &gt; controller;\n    my_observer(x0,t0);\n    for(int ts=0;ts&lt;tsteps;ts++)\n    {\n        integrate_adaptive( make_controlled( err_abs , err_rel , solver() ), my_system, x0 , t0+ts*dt , t0+(1+ts)*dt , dt);\n        my_observer(x0,t0+(1+ts)*dt);\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "c++17"], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 7944918, "user_type": "registered", "profile_image": "https://graph.facebook.com/1001059506697034/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/7944918/alex"}, "edited": false, "score": 0, "creation_date": 1556136110, "post_id": 55836686, "comment_id": 98339504, "body": "So why do we need the template deduction guide ? here: <code>template&lt;class... Ts&gt; struct overloaded : Ts... { using Ts::operator()...; }; template&lt;class... Ts&gt; overloaded(Ts...) -&gt; overloaded&lt;Ts...&gt;;  std::visit(overloaded {             [](auto arg) { std::cout &lt;&lt; arg &lt;&lt; &#39; &#39;; },             [](double arg) { std::cout &lt;&lt; std::fixed &lt;&lt; arg &lt;&lt; &#39; &#39;; },             [](const std::string&amp; arg) { std::cout &lt;&lt; std::quoted(arg) &lt;&lt; &#39; &#39;; },         }, v);</code>  as we don&#39;t call the constructor overloaded(Ts...), it doesn&#39;t supposed to exist :s"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 79, "user_id": 7944918, "user_type": "registered", "profile_image": "https://graph.facebook.com/1001059506697034/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/7944918/alex"}, "edited": false, "score": 0, "creation_date": 1556136516, "post_id": 55836686, "comment_id": 98339668, "body": "@Alex You need a deduction guide because <code>overloaded</code> does&#39;t have a constructor which it can use to deduce the type from.  Since you don&#39;t specify the type in the call to <code>visit</code> the only way to get it is with a deduction guide."}, {"owner": {"reputation": 79, "user_id": 7944918, "user_type": "registered", "profile_image": "https://graph.facebook.com/1001059506697034/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/7944918/alex"}, "edited": false, "score": 0, "creation_date": 1556136757, "post_id": 55836686, "comment_id": 98339772, "body": "So how deduction guide works ? What I understood is that, if you use the constructor that has the same signature as the deduction guide then the compilator use the corresponding type, but here we aren&#39;t using a constructor as we use the brackets style"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 79, "user_id": 7944918, "user_type": "registered", "profile_image": "https://graph.facebook.com/1001059506697034/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/7944918/alex"}, "edited": false, "score": 0, "creation_date": 1556137012, "post_id": 55836686, "comment_id": 98339851, "body": "@Alex Class template argument deduction is a 2 phase process.  First it takes all of the constructors and deduction guides and synthesizes functions out of them.  It then goes through overload resolution to find the best match. If that passes then it uses the types it figures out as the types for the template parameters.  After that it runs through overload resolution and find a constructor that matches the arguments. This means CTAD can use a guide to determine the type, and then use aggregate initialization to actually initialize the object."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 79, "user_id": 7944918, "user_type": "registered", "profile_image": "https://graph.facebook.com/1001059506697034/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/7944918/alex"}, "edited": false, "score": 0, "creation_date": 1556137016, "post_id": 55836686, "comment_id": 98339855, "body": "This is how <code>std::array</code> works since it doesn&#39;t have a constructor."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 79, "user_id": 7944918, "user_type": "registered", "profile_image": "https://graph.facebook.com/1001059506697034/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/7944918/alex"}, "edited": false, "score": 0, "creation_date": 1556137330, "post_id": 55836686, "comment_id": 98339974, "body": "@Alex Here is a really great talk that really helps to understand CTAD: <a href=\"https://www.youtube.com/watch?v=-H-ut6j1BYU&amp;feature=share\" rel=\"nofollow noreferrer\">youtube.com/watch?v=-H-ut6j1BYU&amp;feature=share</a>"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 3, "last_activity_date": 1556131622, "creation_date": 1556131622, "answer_id": 55836686, "question_id": 55836608, "link": "https://stackoverflow.com/questions/55836608/brackets-elements-meaning-after-a-struct-type-aa-b-c/55836686#55836686", "title": "brackets elements meaning after a struct type A{a, b, c}", "body": "<p>Starting in C++17 aggregates can have base classes.  So since <code>Print</code> inherits from <code>Ts..</code> doing</p>\n\n<pre><code>Print&lt;Ts...&gt;{ts...}\n</code></pre>\n\n<p>creates a <code>Print</code> object and initializes all of the base classes with an instance of each base class.  Looking at an expanded simple example your code is basically the same as</p>\n\n<pre><code>struct foo\n{\n    int f;\n};\n\nstruct bar : foo {};\n\nint main()\n{\n    foo f{42};\n    bar b{f};\n}\n</code></pre>\n\n<p>where <code>b</code>'s <code>foo</code> part is initialized by <code>f</code>.</p>\n"}], "owner": {"reputation": 79, "user_id": 7944918, "user_type": "registered", "profile_image": "https://graph.facebook.com/1001059506697034/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/7944918/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 55836686, "answer_count": 1, "score": 2, "last_activity_date": 1556136546, "creation_date": 1556131216, "last_edit_date": 1556136546, "question_id": 55836608, "link": "https://stackoverflow.com/questions/55836608/brackets-elements-meaning-after-a-struct-type-aa-b-c", "title": "brackets elements meaning after a struct type A{a, b, c}", "body": "<p>What does passing objects inside brackets after a struct type means when it doesn't refer to the struct attributes or the arguments of its own constructor.</p>\n\n<pre><code>template &lt;class... Ts&gt; // (1)\nstruct Print : Ts... {\n    using Ts::operator()...;\n};\n\ntemplate &lt;class... Ts&gt; // (1)\nauto MakePrint(Ts... ts) {\n    return Print&lt;Ts...&gt;{ts...};\n}\n</code></pre>\n\n<p>The <code>ts...</code> in the last line, running this code without it produce exactly the same result but I don't understand why it compiles :s</p>\n\n<p>The only two interpretations that I know of the use of brackets, is to set the attributes of a struct or to call the constructor of the struct</p>\n\n<p>But in this case for example with:</p>\n\n<pre><code>auto m = MakePrint ([](int i){ return i + 1;});\n</code></pre>\n\n<p>It is equivalent to:</p>\n\n<pre><code>auto MakePrint (typeof(lambda) lambda) {\n   return Print&lt;typeof(lambda)&gt;{lambda};\n}\n</code></pre>\n\n<p>and Print is defined in the following manner:</p>\n\n<pre><code>struct Print : typeof(lambda) {\n    auto operator() (int i) { return i + 1; }\n}\n</code></pre>\n\n<p>and so where does the object lambda inside the brackets (return <code>Print&lt;typeof(lambda)&gt;{lambda};</code>) go?</p>\n"}, {"tags": ["c++", "windows", "flash", "winapi", "air"], "comments": [{"owner": {"reputation": 82917, "user_id": 3501, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/1fd5f5cc203c393634379a3b3b7e7a87?s=128&d=identicon&r=PG", "display_name": "Anders", "link": "https://stackoverflow.com/users/3501/anders"}, "edited": false, "score": 0, "creation_date": 1556131951, "post_id": 55836546, "comment_id": 98337767, "body": "Maybe Air uses UpdateLayeredWindow? Have you checked if the window has the WS_EX_LAYERED style before you add it?"}, {"owner": {"reputation": 1501, "user_id": 6377136, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/319539c7595c5cf6ef34937544164e0b?s=128&d=identicon&r=PG&f=1", "display_name": "Johannes Stricker", "link": "https://stackoverflow.com/users/6377136/johannes-stricker"}, "reply_to_user": {"reputation": 82917, "user_id": 3501, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/1fd5f5cc203c393634379a3b3b7e7a87?s=128&d=identicon&r=PG", "display_name": "Anders", "link": "https://stackoverflow.com/users/3501/anders"}, "edited": false, "score": 0, "creation_date": 1556132021, "post_id": 55836546, "comment_id": 98337802, "body": "Yes, I&#39;ve checked that of course. It doesn&#39;t have that style."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1556132550, "post_id": 55836546, "comment_id": 98338043, "body": "After you apply the style to do what you need, are you removing the style and refreshing the window?"}, {"owner": {"reputation": 1501, "user_id": 6377136, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/319539c7595c5cf6ef34937544164e0b?s=128&d=identicon&r=PG&f=1", "display_name": "Johannes Stricker", "link": "https://stackoverflow.com/users/6377136/johannes-stricker"}, "edited": false, "score": 0, "creation_date": 1556170586, "post_id": 55836546, "comment_id": 98347546, "body": "No, I want to keep the style on the window. If I remove it the window works fine again, but that&#39;s not an option. I tried updating the window with <code>InvalidateRect()</code> and <code>UpdateWindow()</code> without success. <code>RedrawWindow()</code> doesn&#39;t help either."}], "answers": [{"comments": [{"owner": {"reputation": 1501, "user_id": 6377136, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/319539c7595c5cf6ef34937544164e0b?s=128&d=identicon&r=PG&f=1", "display_name": "Johannes Stricker", "link": "https://stackoverflow.com/users/6377136/johannes-stricker"}, "edited": false, "score": 0, "creation_date": 1556983149, "post_id": 55923896, "comment_id": 98617141, "body": "Thank you for your answer. Unfortunately, changing the <code>renderMode</code> doesn&#39;t make a difference. I also tried to set <code>transparent</code> to true, without success. Maybe this has nothing to do with Adobe AIR because someone mentioned he encountered the same problem here: <a href=\"https://stackoverflow.com/questions/53710135/printwindow-and-bitblt-of-hidden-windows?noredirect=1&amp;lq=1#comment98295654_55759779\" title=\"printwindow and bitblt of hidden windows\">stackoverflow.com/questions/53710135/&hellip;</a>"}, {"owner": {"reputation": 4915, "user_id": 11128312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ufn85.jpg?s=128&g=1", "display_name": "Strive Sun", "link": "https://stackoverflow.com/users/11128312/strive-sun"}, "reply_to_user": {"reputation": 1501, "user_id": 6377136, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/319539c7595c5cf6ef34937544164e0b?s=128&d=identicon&r=PG&f=1", "display_name": "Johannes Stricker", "link": "https://stackoverflow.com/users/6377136/johannes-stricker"}, "edited": false, "score": 0, "creation_date": 1557386985, "post_id": 55923896, "comment_id": 98749285, "body": "@Johannes Stricker   If not for Adobe Air, do you try to capture screenshots of other applications (except notepad) and set WS_EX_LAYERED?"}, {"owner": {"reputation": 1501, "user_id": 6377136, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/319539c7595c5cf6ef34937544164e0b?s=128&d=identicon&r=PG&f=1", "display_name": "Johannes Stricker", "link": "https://stackoverflow.com/users/6377136/johannes-stricker"}, "edited": false, "score": 0, "creation_date": 1557394168, "post_id": 55923896, "comment_id": 98753309, "body": "Yes, I do and that works fine. The Adobe Air application is the only one which didn&#39;t work for me so far."}], "tags": [], "owner": {"reputation": 109, "user_id": 11433244, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ufFJJUaDNsY/AAAAAAAAAAI/AAAAAAAAAAc/dj6YCqP3xaw/photo.jpg?sz=128", "display_name": "Andrew Frost", "link": "https://stackoverflow.com/users/11433244/andrew-frost"}, "is_accepted": false, "score": 1, "last_activity_date": 1556636991, "creation_date": 1556636991, "answer_id": 55923896, "question_id": 55836546, "link": "https://stackoverflow.com/questions/55836546/adobe-air-with-ws-ex-layered-window-style/55923896#55923896", "title": "Adobe Air with WS_EX_LAYERED window style", "body": "<p>What's your render mode set to in the application descriptor file? I would imagine your approach wouldn't work unless you specifically set this to render via the CPU i.e. to make AIR use GDI functions to display the content. I think by default it's likely to be using GPU acceleration so setting the style via SetWindowLong may then interfere with this..</p>\n\n<p>In case you're not sure how to change the render mode:</p>\n\n<ul>\n<li>Find the application's installed folder (under \"Program Files (x86)\")</li>\n<li>Enter the \"META-INF\\AIR\" subfolder</li>\n<li>Edit the \"application.xml\" file</li>\n<li>Look for \"renderMode\" within the \"initialWindow\" section (or if it's not there, add it..) and set this to \"cpu\"</li>\n<li>Save this and then restart the AIR application</li>\n</ul>\n\n<p>See <a href=\"https://help.adobe.com/en_US/air/build/WSfffb011ac560372f2fea1812938a6e463-8000.html#WSfffb011ac560372f2fea1812938a6e463-7fe3\" rel=\"nofollow noreferrer\">AIR Descriptor File</a> information.</p>\n"}], "owner": {"reputation": 1501, "user_id": 6377136, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/319539c7595c5cf6ef34937544164e0b?s=128&d=identicon&r=PG&f=1", "display_name": "Johannes Stricker", "link": "https://stackoverflow.com/users/6377136/johannes-stricker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1556636991, "creation_date": 1556130981, "question_id": 55836546, "link": "https://stackoverflow.com/questions/55836546/adobe-air-with-ws-ex-layered-window-style", "title": "Adobe Air with WS_EX_LAYERED window style", "body": "<p>I am trying to set the WS_EX_LAYERED extended window style on an external Adobe Air application. <a href=\"https://stackoverflow.com/a/55759779/6377136\">See this question</a> if you want to know why.\nThe problem I am facing is that as soon as I set the style, the window stops rendering. Here's the my code:</p>\n\n<pre><code>auto style = GetWindowLong(hwnd, GWL_EXSTYLE);\nSetWindowLong(hwnd, GWL_EXSTYLE, style | WS_EX_LAYERED);\n// If I skip the next line, the window is suddenly white.\n// With the next line, the image in the window freezes.\nSetLayeredWindowAttributes(hwnd, 0, 255, LWA_ALPHA);\n</code></pre>\n\n<p>The window continues to work perfectly fine (clicks etc.), it just doesn't get redrawn anymore (f.e. when resized).\nThe window does <strong>not</strong> have the <code>CS_OWNDC</code> or <code>CS_CLASSDC</code> style.</p>\n\n<p>Can anyone tell me what the reason could be?</p>\n"}, {"tags": ["c++", "mpi"], "comments": [{"owner": {"reputation": 73919, "user_id": 44309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iL4TW.png?s=128&g=1", "display_name": "High Performance Mark", "link": "https://stackoverflow.com/users/44309/high-performance-mark"}, "edited": false, "score": 0, "creation_date": 1556131944, "post_id": 55836502, "comment_id": 98337761, "body": "Shouldn&#39;t that be <code>MPI_Send( &amp;response, ...</code> ?"}, {"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1556150188, "post_id": 55836502, "comment_id": 98343609, "body": "The root cause is very likely in some code that is not shown here. please edit your question with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "owner": {"reputation": 258, "user_id": 7289596, "user_type": "registered", "profile_image": "https://graph.facebook.com/1447905458560826/picture?type=large", "display_name": "Petr Fiedler", "link": "https://stackoverflow.com/users/7289596/petr-fiedler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 300, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556130792, "creation_date": 1556130792, "question_id": 55836502, "link": "https://stackoverflow.com/questions/55836502/how-to-fix-address-not-mapped-in-mpi-send", "title": "How to fix &#39;Address not mapped&#39; in MPI_Send?", "body": "<p>I made a cluster application using MPI. It calculates some problem using master-slave design. Everything works just fine but when the slave process has to send its result back to the master process, it fails right in the MPI_Send with the 'Address not mapped'.</p>\n\n<p>This is the code that handles the communication between the slave and the master.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void main_slave( int width, int height ) {\n    int transferSize = 6 + width * height;\n    int responseSize = 1 + width * height;\n    int* buffer = new int[transferSize];\n    int* response = new int[responseSize];\n    MPI_Status status;\n    while ( true ) {\n        MPI_Recv( buffer, transferSize, MPI_INT, 0, MPI_ANY_TAG, MPI_COMM_WORLD, &amp;status );\n        if ( status.MPI_TAG == TAG_DONE ) break;\n        State state = deserialize_task( width, height, buffer );\n        task_solve( state );\n        response[0] = maximum;\n        serialize_board( best, &amp;response[1] );\n        MPI_Send( response, responseSize, MPI_INT, 0, TAG_DONE, MPI_COMM_WORLD);\n    }\n    delete[] buffer;\n    delete[] response;\n}\n</code></pre>\n\n<p>This is the error output I get when it fails. In there you can see that it fails right in the MPI_Send for some reason.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>[star:27344] *** Process received signal ***\n[star:27344] Signal: Segmentation fault (11)\n[star:27344] Signal code: Address not mapped (1)\n[star:27344] Failing at address: 0x584f4f4fa0\n[star:27344] [ 0] /usr/lib64/libpthread.so.0(+0xf5d0)[0x7f85705155d0]\n[star:27344] [ 1] /usr/lib64/openmpi/mca_pml_ob1.so(mca_pml_ob1_send+0x68)[0x7f8565987d08]\n[star:27344] [ 2] /usr/lib64/libmpi.so.40(PMPI_Send+0xf2)[0x7f85711e0792]\n[star:27344] [ 3] run.exe[0x402977]\n[star:27344] [ 4] run.exe[0x4035f0]\n[star:27344] [ 5] /usr/lib64/libc.so.6(__libc_start_main+0xf5)[0x7f857015b3d5]\n[star:27344] [ 6] run.exe[0x4016c9]\n[star:27344] *** End of error message ***\n</code></pre>\n"}, {"tags": ["c++", "function", "constants"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 6, "creation_date": 1556130611, "post_id": 55836444, "comment_id": 98337175, "body": "That is an extension to the language provided by gcc and doesn&#39;t work in c++ in general. It&#39;s not just MSVC being picky. The usual recommendation here would be to use <code>std::vector&lt;int&gt; Array(Length);</code> instead."}, {"owner": {"reputation": 8084, "user_id": 2896626, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4cd83959d7fe39c658d2e49cfecfe4b6?s=128&d=identicon&r=PG&f=1", "display_name": "Paul92", "link": "https://stackoverflow.com/users/2896626/paul92"}, "edited": false, "score": 0, "creation_date": 1556130673, "post_id": 55836444, "comment_id": 98337206, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/18996258/array-initialization-use-const-variable-in-c\">Array initialization use const variable in C++</a>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 8084, "user_id": 2896626, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4cd83959d7fe39c658d2e49cfecfe4b6?s=128&d=identicon&r=PG&f=1", "display_name": "Paul92", "link": "https://stackoverflow.com/users/2896626/paul92"}, "edited": false, "score": 1, "creation_date": 1556130786, "post_id": 55836444, "comment_id": 98337265, "body": "@Paul92 Not quite. That question is about a <code>const</code> not being treated as a <code>constexpr</code> due to it&#39;s initialization."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1556130935, "post_id": 55836444, "comment_id": 98337355, "body": "Related but not quite duplicate : <a href=\"https://stackoverflow.com/questions/1887097/why-arent-variable-length-arrays-part-of-the-c-standard\">Why aren&#39;t variable-length arrays part of the C++ standard?</a> I&#39;m sure there&#39;s an actual duplicate out there though."}, {"owner": {"reputation": 125, "user_id": 8151433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fHBWD.jpg?s=128&g=1", "display_name": "Hosein Rahnama", "link": "https://stackoverflow.com/users/8151433/hosein-rahnama"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1556131253, "post_id": 55836444, "comment_id": 98337472, "body": "@Fran&#231;oisAndrieux: Can you tell me, why this is not allowed in standard C++?"}, {"owner": {"reputation": 482, "user_id": 6105985, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lEqxGMHWDuM/AAAAAAAAAAI/AAAAAAAAACU/VsqqqzUhbNI/photo.jpg?sz=128", "display_name": "Bruce Shen", "link": "https://stackoverflow.com/users/6105985/bruce-shen"}, "edited": false, "score": 0, "creation_date": 1556131375, "post_id": 55836444, "comment_id": 98337523, "body": "Note that a constant parameter may be passed in with different values. GCC has probably done some static analysis on the source so that the value of Length is known at compile time. MSVC does not analyze the source across function, so MSVC complains."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1556131457, "post_id": 55836444, "comment_id": 98337564, "body": "@H.R. My comment contains a link to that exact question."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1556131475, "post_id": 55836444, "comment_id": 98337566, "body": "<a href=\"https://stackoverflow.com/questions/1847789/segmentation-fault-on-large-array-sizes\">Here is an example of what can go wrong with Variable Length Arrays</a>."}, {"owner": {"reputation": 4438, "user_id": 5427663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f9c9fe9199349793db217d3a9e9596?s=128&d=identicon&r=PG&f=1", "display_name": "TheOperator", "link": "https://stackoverflow.com/users/5427663/theoperator"}, "reply_to_user": {"reputation": 482, "user_id": 6105985, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lEqxGMHWDuM/AAAAAAAAAAI/AAAAAAAAACU/VsqqqzUhbNI/photo.jpg?sz=128", "display_name": "Bruce Shen", "link": "https://stackoverflow.com/users/6105985/bruce-shen"}, "edited": false, "score": 0, "creation_date": 1556131537, "post_id": 55836444, "comment_id": 98337592, "body": "@BruceShen it&#39;s not static analysis, but a gcc extension called <i>variable-length arrays</i> (VLAs). Standard C99 supports them, but C++ doesn&#39;t. An alternative is the (also non-portable) <code>alloca()</code> function for dynamic stack allocation."}, {"owner": {"reputation": 125, "user_id": 8151433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fHBWD.jpg?s=128&g=1", "display_name": "Hosein Rahnama", "link": "https://stackoverflow.com/users/8151433/hosein-rahnama"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1556131643, "post_id": 55836444, "comment_id": 98337635, "body": "@Fran&#231;oisAndrieux: So I don&#39;t understand why this one is a case of array with variable length! I mean the parameter <code>Length</code> is declared <code>const</code>. Can you elaborate on that in an answer please. :)"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1556131741, "post_id": 55836444, "comment_id": 98337675, "body": "@H.R. <code>const</code> is not <code>constexpr</code>. A constant expression means a value known at compile time. You could be providing user input to your function, a <code>const</code> function argument is not necessarily a constant expression."}, {"owner": {"reputation": 4438, "user_id": 5427663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f9c9fe9199349793db217d3a9e9596?s=128&d=identicon&r=PG&f=1", "display_name": "TheOperator", "link": "https://stackoverflow.com/users/5427663/theoperator"}, "edited": false, "score": 1, "creation_date": 1556131771, "post_id": 55836444, "comment_id": 98337689, "body": "@H.R. <code>const</code> and <i>constant expression</i> (<code>constexpr</code>) are two different concepts. The former means that a variable cannot be changed, the latter means that its value is known at compile time."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1556131883, "post_id": 55836444, "comment_id": 98337736, "body": "<code>void Print(const int Length)</code> can be called with any number that can fit in an <code>int</code>. The fact that right now you are calling it only once with constants does not eliminate the possibility that it CAN be called twice, once with 10 and another time with  4,000,000,000. the 10 and the 4,000,000,000 can even be constants, but that doesn&#39;t matter. The fact that <code>Length</code> can be different means it&#39;s not constant enough."}, {"owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "edited": false, "score": 0, "creation_date": 1556132507, "post_id": 55836444, "comment_id": 98338022, "body": "@H.R. I Don&#39;t understand the downvote either. Your question is worded correctly, and that&#39;s definitely not a bad question, if I&#39;ve seen any."}, {"owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "edited": false, "score": 0, "creation_date": 1556135141, "post_id": 55836444, "comment_id": 98339070, "body": "Can the downvoter explain why they think this question&#39;s bad?"}], "answers": [{"comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1556130847, "post_id": 55836496, "comment_id": 98337304, "body": "Questions consisting only of code are considered incomplete. Please explain how your solution fixes the problem."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 4, "creation_date": 1556130858, "post_id": 55836496, "comment_id": 98337312, "body": "Using <code>new</code> for dynamic allocation is no longer recommended. This solution works but it is nowhere near as robust as using a standard container. Edit : There is a bug due to using <code>i &lt;= Length</code> instead of <code>i &lt; Length</code>."}, {"owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1556130990, "post_id": 55836496, "comment_id": 98337375, "body": "Indeed, I didn&#39;t spot the bug, since it was in the OP&#39;s original question.  Edit : <code>i &lt;= Length-1</code>. That works. I wouldn&#39;t have done it this way, but that works."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 4, "creation_date": 1556131246, "post_id": 55836496, "comment_id": 98337467, "body": "No need for <code>if(Array)</code>. <code>new</code> throws an exception on failure."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1556132520, "post_id": 55836496, "comment_id": 98338032, "body": "@MartinV&#233;ronneau Watch out using <code>Length - 1</code>. Size are often unsigned (like containers&#39; <code>.size()</code> members) and applying <code>-1</code> to it when it&#39;s empty will cause it to wrap around the the maximum representable value for that type. It works here, beause <code>Length</code> is <code>signed</code> but it&#39;s a risky habit to adopt."}, {"owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "edited": false, "score": 0, "creation_date": 1556132888, "post_id": 55836496, "comment_id": 98338185, "body": "Indeed you&#39;re right. Like I said earlier, I wouldn&#39;t have done it this way. I edited the code per your suggestion, but I was just trying to stay close to the OP&#39;s code. But that&#39;s definitely a good habit to pick up!"}], "tags": [], "owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "is_accepted": true, "score": 0, "last_activity_date": 1556140022, "last_edit_date": 1556140022, "creation_date": 1556130775, "answer_id": 55836496, "question_id": 55836444, "link": "https://stackoverflow.com/questions/55836444/declaring-an-array-inside-a-function-by-passing-its-length/55836496#55836496", "title": "Declaring an Array Inside a Function by Passing Its Length", "body": "<p>As it was pointed out in the comments, you should definitely use <code>std::vector&lt;int&gt;</code>.</p>\n\n<p>If you want the array to live only inside your function <code>Print</code>, you can declare a dynamic array on the stack using <code>new</code>. Be mindfull of memory usage, though, as <code>Print</code> could be called with a big number, and you would get a stack overflow (again, use vector to avoid that).</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nvoid Print(const int Length)\n{\n    int *Array = new int[Length];\n    for (int i = 0; i &lt; Length; i++)\n    {\n        Array[i] = i;\n        cout &lt;&lt; Array[i];\n    }\n    delete [] Array;\n}\n\nint main()\n{\n    const int L = 5;\n    Print(L);\n    return 0;\n}\n</code></pre>\n\n<p>EDIT : Here's the vector-based correct solution :</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nvoid Print(const int Length)\n{\n    vector&lt;int&gt; Array;\n    Array.resize(Length);\n    for (int i = 0; i &lt; Length; i++)\n    {\n        Array[i] = i;\n        cout &lt;&lt; Array[i];\n    }\n}\n\nint main()\n{\n    const int L = 5;\n    Print(L);\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 668, "user_id": 9386423, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ATJST.png?s=128&g=1", "display_name": "Pierce Griffiths", "link": "https://stackoverflow.com/users/9386423/pierce-griffiths"}, "is_accepted": false, "score": 0, "last_activity_date": 1556228001, "creation_date": 1556228001, "answer_id": 55857932, "question_id": 55836444, "link": "https://stackoverflow.com/questions/55836444/declaring-an-array-inside-a-function-by-passing-its-length/55857932#55857932", "title": "Declaring an Array Inside a Function by Passing Its Length", "body": "<p>If you really want a dynamically allocated, fixed size array, use an std::unique_ptr instead of an std::vector.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n\nvoid Print(const int Length){\n    std::unique_ptr&lt;int[]&gt; Array = std::make_unique&lt;int[]&gt;(Length);\n    for (int i = 0; i &lt; Length; ++i){\n        Array[i] = i;\n        std::cout &lt;&lt; Array[i];\n    }\n    Array.reset();\n}\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 8151433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fHBWD.jpg?s=128&g=1", "display_name": "Hosein Rahnama", "link": "https://stackoverflow.com/users/8151433/hosein-rahnama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 55836496, "answer_count": 2, "score": 0, "last_activity_date": 1556228001, "creation_date": 1556130517, "last_edit_date": 1556131563, "question_id": 55836444, "link": "https://stackoverflow.com/questions/55836444/declaring-an-array-inside-a-function-by-passing-its-length", "title": "Declaring an Array Inside a Function by Passing Its Length", "body": "<p>I want to have a function which takes a positive integer, then declares an array, initializes it and print it. The following code works with a GCC compiler but it does not work with an MSVC compiler. I get the error</p>\n\n<blockquote>\n  <p>Error (active)    E0028   expression must have a constant value. The value of parameter \"Length\" (declared at line 5) cannot be used as a constant</p>\n</blockquote>\n\n<ol>\n<li>What is a nice way to do this with an MSVC compiler? and</li>\n<li>Is there any nice reason for this difference?</li>\n</ol>\n\n<p>My code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nvoid Print(const int Length)\n{\n    int Array[Length];\n    for (int i = 0; i &lt;= Length - 1; i++)\n    {\n        Array[i] = i;\n        cout &lt;&lt; Array[i];\n    }\n}\n\nint main()\n{\n    const int L = 5;\n    Print(L);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "signal-processing", "fft", "complex-numbers", "fftw"], "comments": [{"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1556132362, "post_id": 55836394, "comment_id": 98337958, "body": "Make sure you normalize by the sum of the impulse response you convolve with."}, {"owner": {"reputation": 55, "user_id": 6376662, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PD3lDb-c7vU/AAAAAAAAAAI/AAAAAAAACTs/FQIKcwNwk_M/photo.jpg?sz=128", "display_name": "William Clark", "link": "https://stackoverflow.com/users/6376662/william-clark"}, "reply_to_user": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1556141796, "post_id": 55836394, "comment_id": 98341706, "body": "I just tried this but it didn&#39;t really change the output. Summed the impulse response amplitudes with abs() of each amplitude (also tried abs of sum of amplitudes, + and -). I used this factor, to normalize:  results[newIdx] += totals_arr[i]/(sumIrImpulses); still got the same noise at each tap. I also tried normalizing by the same sum for the values of the input (dry signal) subsections during the building of section_arr: section_arr.push_back(inputWavArr[i]/sumIrImpulses); this still didn&#39;t have an effect. In any of these (4) cases, am I applying the normalization in the correct place?"}], "answers": [{"tags": [], "owner": {"reputation": 55, "user_id": 6376662, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PD3lDb-c7vU/AAAAAAAAAAI/AAAAAAAACTs/FQIKcwNwk_M/photo.jpg?sz=128", "display_name": "William Clark", "link": "https://stackoverflow.com/users/6376662/william-clark"}, "is_accepted": false, "score": 1, "last_activity_date": 1556157334, "creation_date": 1556157334, "answer_id": 55840774, "question_id": 55836394, "link": "https://stackoverflow.com/questions/55836394/im-not-getting-expected-results-from-overlap-add-fft-convolution-using-fftw/55840774#55840774", "title": "I&#39;m not getting expected results from overlap-add FFT convolution using FFTW", "body": "<p>It looks like I've resolved the basic problem. revFFT, the pointer returned from the inverse-fft wrapper function (ifft_from_complex_vector), was not being referenced after being loaded with values. Instead the code was looking for the expected values in outputFFT, which had already been freed via fftw_free.</p>\n\n<p>Another thing that helped clear up the confusion was switching to the FFTW functions fftw_plan_dft_r2c_1d and fftw_plan_dft_c2r_1d, to replace the calls to fftw_plan_dft_1d using the flags FFTW_BACKWARD and FFTW_FORWARD. The types are much more easy to track now, especially for vectors of real numbers that need to work with FFTW.</p>\n\n<p>The convolution reverb is now rendering almost as expected. There are some windows and isolated parts that experience aliasing and distortion. This is likely due to my continuing need for a robust normalization scheme, as suggested by Cris. That's what I'm working on next, but thankfully the basic problem is resolved.</p>\n\n<p>Working code below:</p>\n\n<pre><code>//Give the input and output file names on the command line\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;math.h&gt;\n#include &lt;sndfile.h&gt;\n#include &lt;iostream&gt;\n#include &lt;cstring&gt;\n#include &lt;vector&gt;\n#include &lt;complex.h&gt;\n#include &lt;fftw3.h&gt;\n\nusing namespace std;\n\n#define ARRAY_LEN(x)    ((int) (sizeof (x) / sizeof (x [0])))\n#define MAX(x,y)        ((x) &gt; (y) ? (x) : (y))\n#define MIN(x,y)        ((x) &lt; (y) ? (x) : (y))\n\nfftw_complex* fftw_complex_transform(vector&lt;double &gt;);\n//fftw_complex* ifft_from_complex_vector(vector&lt;vector&lt;double&gt; &gt;);\ndouble* ifft_from_complex_vector(vector&lt;vector&lt;double&gt; &gt;);\nvector&lt;double&gt; convolved_block(vector&lt;double&gt;, vector&lt;complex&lt;double&gt; &gt;, int);\nvector&lt;complex&lt;double&gt; &gt; filter_kernel_cpx_vec(vector&lt;double&gt;);\nvector&lt;double&gt; padded(vector&lt;double&gt;, int);\nvoid testDummyData();\n\nint main (int argc, char ** argv) {\n    SNDFILE *infile, *outfile, *irfile ;\n    SF_INFO sfinfo ;\n    double buffer[1024];\n    sf_count_t count;\n\n    //for fftw3\n    vector&lt;double&gt; inputWavArr;\n    vector&lt;double&gt; irWavArr;\n\n    if (argc != 4) {\n        printf(\"\\nUsage :\\n\\n    &lt;executable name&gt;  &lt;input signal file&gt; &lt;impulse response file&gt; &lt;output file&gt;\\n\") ;\n        exit(0);\n    }\n\n    memset (&amp;sfinfo, 0, sizeof (sfinfo)) ;\n    if ((infile = sf_open (argv [1], SFM_READ, &amp;sfinfo)) == NULL)     {     \n        printf (\"Error : Not able to open input file '%s'\\n\", argv [1]);\n        sf_close (infile);\n        exit (1) ;\n    } \n\n    if ((irfile = sf_open (argv [2], SFM_READ, &amp;sfinfo)) == NULL)     {     \n        printf (\"Error : Not able to open input file '%s'\\n\", argv [2]);\n        sf_close (irfile);\n        exit (1) ;\n    }   \n\n    if ((outfile = sf_open (argv [3], SFM_WRITE, &amp;sfinfo)) == NULL) { \n        printf (\"Error : Not able to open output file '%s'\\n\", argv [3]);\n        sf_close (outfile);\n        exit (1);\n    }\n\n    while ((count = sf_read_double (infile, buffer, ARRAY_LEN (buffer))) &gt; 0) {\n        for (int i = 0; i &lt; 1024; i++)\n            inputWavArr.push_back(buffer[i]);\n    }\n    double sumIrImpulses = 0;\n    while ((count = sf_read_double (irfile, buffer, ARRAY_LEN (buffer))) &gt; 0) {\n        for (int i = 0; i &lt; 1024; i++) {\n            double el = buffer[i];\n            irWavArr.push_back(el); // max value 0.0408325\n            sumIrImpulses += (el);\n        }\n    }\n    sumIrImpulses = abs(sumIrImpulses);\n    //const int irLen = 189440; // filter(ir) block len\n    int irLen = irWavArr.size();\n    //const int windowSize = 72705; // s.t. irLen+windowSize-1 is a pwr of 2\n    int windowSize = 262144 - irLen+1; //  262144 is a pwr of 2\n    const int outputLength = irLen + windowSize - 1;\n\n    sf_close(infile);\n    sf_close(irfile);\n\n    irWavArr = padded(irWavArr, outputLength);\n    int newIrLength = irWavArr.size();\n\n    vector&lt;complex&lt;double&gt; &gt; ir_vec;\n    ir_vec = filter_kernel_cpx_vec(irWavArr);\n\n    int numSections = floor(inputWavArr.size()/windowSize);\n    if (numSections*windowSize != inputWavArr.size()) {\n        inputWavArr = padded(inputWavArr, (numSections+1)*windowSize);\n        numSections++;\n    }\n\n\n\n    // OVERLAP-ADD PROCEDURE\n    vector&lt;vector&lt;double&gt; &gt; totals;\n    cout &lt;&lt; \"numSections is \" &lt;&lt; numSections &lt;&lt; \"\\n\";\n\n    for (int j=0; j&lt;numSections; j++) { // may be OBOB use numSections+1? or pad inputWavArr? \n        vector&lt;double&gt; total;\n        cout &lt;&lt; \"convolving section \" &lt;&lt; j &lt;&lt; \"\\n\";\n        vector&lt;double&gt; section_arr;\n        for (int i=j*windowSize; i&lt;(j*windowSize + windowSize); i++) {\n            section_arr.push_back(inputWavArr[i]/200.21);\n        }\n\n        // hanning window\n        for (int i = 0; i &lt; windowSize; i++) {\n            double multiplier = 0.5 * (1 - cos(2*M_PI*i/(windowSize-1)));\n            section_arr[i] = multiplier * section_arr[i];\n        }\n        int old_section_arr_size = section_arr.size();\n        section_arr = padded(section_arr, outputLength);\n        vector&lt;double&gt; output = convolved_block(section_arr, ir_vec, old_section_arr_size+irLen-1);\n\n        for (int i=0; i&lt;output.size(); i++) {\n            total.push_back(output[i]); // normalize\n        }\n        totals.push_back(total);\n    }\n    vector&lt;double&gt; results(inputWavArr.size()+newIrLength-1, 0);\n\n    for (int j=0; j&lt;numSections; j++) {\n        vector&lt;double&gt; totals_arr = totals[j];\n        cout &lt;&lt; \"overlap summing section \" &lt;&lt; j &lt;&lt; \"\\n\";\n        for (int i=0; i&lt;totals_arr.size(); i++) {\n            int newIdx = j*windowSize+i;\n            results[newIdx] += totals_arr[i]/550;\n        }\n    }\n    double maxVal = 0;\n    for (int i=0; i&lt;results.size(); i++) {\n        if (results[i] &gt; maxVal) {\n            maxVal = results[i];\n        }\n    }\n    cout &lt;&lt; \"maxval\" &lt;&lt; maxVal &lt;&lt; \"\\n\";\n    cout &lt;&lt; \"sumIrImpulses\" &lt;&lt; sumIrImpulses &lt;&lt; \"\\n\";\n    // RESULTS MARK THE END OF OVERLAP-ADD PROCEDURE\n    double* buff3 = (double*)malloc(results.size()*sizeof(double));\n    for (int idx = 0; idx &lt; results.size(); idx++) {\n        buff3[idx] = results[idx]; // NO LONGER normalizing factor for these samples... output without this has amplitude going almost up to 120. input file had max around 0.15. max should be 1 about\n    }\n\n    long writtenFrames = sf_writef_double (outfile, buff3, results.size());\n    sf_close (outfile);\n\n    return 0 ;\n}\n\nfftw_complex* fftw_complex_transform(vector&lt;double&gt; signal_wav) {\n    int N = signal_wav.size();\n    double *in;\n    fftw_complex *out;\n    fftw_plan irPlan;\n    //in = (fftw_complex*) fftw_malloc(sizeof(fftw_complex)*N);\n    in = (double*) malloc(sizeof(double)*N);\n    out = (fftw_complex*) fftw_malloc(sizeof(fftw_complex)*N);\n\n    for (int i = 0; i &lt; signal_wav.size(); i++)\n    {\n        //in[i][0] = signal_wav[i];\n        in[i] = signal_wav[i];\n        //in[i][1] = (float)0; // complex component .. 0 for input of wav file\n    }\n    //irPlan = fftw_plan_dft_1d(N, in, out, FFTW_FORWARD, FFTW_ESTIMATE);\n    irPlan = fftw_plan_dft_r2c_1d(N, in, out, FFTW_ESTIMATE);\n    fftw_execute(irPlan);\n    fftw_destroy_plan(irPlan);\n    fftw_free(in);\n\n    return out;\n}\n\nvector&lt;complex&lt;double&gt; &gt; filter_kernel_cpx_vec(vector&lt;double&gt; input) {\n    fftw_complex* irFFT = fftw_complex_transform(input);\n\n    vector&lt;complex&lt;double&gt; &gt; kernel_vec;\n    for (int i=0; i&lt;input.size(); i++) {\n        complex&lt;double&gt; m1 (irFFT[i][0], irFFT[i][1]);\n        kernel_vec.push_back(m1);\n    }\n\n    fftw_free(irFFT); \n    return kernel_vec;\n}\n\n//fftw_complex* ifft_from_complex_vector(vector&lt;vector&lt;double&gt; &gt; signal_vec) {\ndouble* ifft_from_complex_vector(vector&lt;vector&lt;double&gt; &gt; signal_vec) {\n    int N = signal_vec.size();\n    //fftw_complex *in, *out;\n    fftw_complex *in;\n    double *out;\n    fftw_plan irPlan;\n    in = (fftw_complex*) fftw_malloc(sizeof(fftw_complex)*N);\n    //out = (fftw_complex*) fftw_malloc(sizeof(fftw_complex)*N);\n    out = (double*) malloc(sizeof(double)*N);\n\n    for (int i = 0; i &lt; signal_vec.size(); i++)\n    {\n        in[i][0] = signal_vec[i][0]; // real\n        in[i][1] = signal_vec[i][1]; // imag\n    }\n    //irPlan = fftw_plan_dft_1d(N, in, out, FFTW_BACKWARD, FFTW_ESTIMATE);\n    irPlan = fftw_plan_dft_c2r_1d(N, in, out, FFTW_ESTIMATE);\n    fftw_execute(irPlan);\n    fftw_destroy_plan(irPlan);\n    fftw_free(in);\n\n    return out;\n}\n\nvector&lt;double&gt; convolved_block(vector&lt;double&gt; in_vector, vector&lt;complex&lt;double&gt; &gt; ir_cpx_vector, int size) {\n    fftw_complex* outputFFT = fftw_complex_transform(in_vector);\n\n    vector&lt;vector&lt;double&gt; &gt; products;\n    vector&lt;complex&lt;double&gt; &gt; sig_fft_cpx;\n    for (int i=0; i&lt;size; i++) {\n        complex&lt;double&gt; m1 (outputFFT[i][0], outputFFT[i][1]);\n        sig_fft_cpx.push_back(m1);\n    }        \n    fftw_free(outputFFT);\n    for (int j=0; j&lt;size; j++) {\n        std::complex&lt;double&gt; complexProduct = sig_fft_cpx[j]*ir_cpx_vector[j];\n        double re = real(complexProduct);\n        double im = imag(complexProduct);\n        vector&lt;double&gt; elemVec(2);\n        elemVec[0] = re;\n        elemVec[1] = im;\n\n        products.push_back(elemVec);\n    }\n    //fftw_complex* revFFT = ifft_from_complex_vector(products);\n    double* revFFT = ifft_from_complex_vector(products);\n    vector&lt;double&gt; out_vec_dbl;\n\n    for (int i=0; i&lt;size; i++) {\n        //out_vec_dbl.push_back(outputFFT[i][0]);\n        //out_vec_dbl.push_back(revFFT[i][0]);\n        out_vec_dbl.push_back(revFFT[i]);\n        //out_vec_dbl.push_back(outputFFT[i]);\n    }\n    //fftw_free(revFFT);\n    free(revFFT);\n    return out_vec_dbl;\n}\n\nvector&lt;double&gt; padded(vector&lt;double&gt; input, int total) {\n    vector&lt;double&gt; padded_vec;\n    for (int i = 0; i&lt;input.size(); i++) {\n    padded_vec.push_back(input[i]);\n    }\n    int numZeroes = total - input.size();\n    for (int i = 0; i&lt; numZeroes; i++) {\n    padded_vec.push_back((double)0);\n    }\n    return padded_vec;\n}\n\nvoid testDummyData() {\n    vector&lt;double&gt; dummyFilter;\n    dummyFilter.push_back(1);\n    dummyFilter.push_back(-1);\n    dummyFilter.push_back(1);\n\n    vector&lt;double&gt; dummySignal;\n    dummySignal.push_back(3);\n    dummySignal.push_back(-1);\n    dummySignal.push_back(0);\n    dummySignal.push_back(3);\n    dummySignal.push_back(2);\n    dummySignal.push_back(0);\n    dummySignal.push_back(1);\n    dummySignal.push_back(2);\n    dummySignal.push_back(1);\n\n    const int nearWindowSize=3;\n    const int nearIrLength=3;\n    const int totalLength = 5;\n\n    dummyFilter = padded(dummyFilter, totalLength);\n    vector&lt;complex&lt;double&gt; &gt; dummy_ir_vec = filter_kernel_cpx_vec(dummyFilter);\n\n    int localNumSections = 3;\n    vector&lt;vector&lt;double&gt; &gt; outputs;\n    for (int j=0; j&lt;localNumSections; j++) {\n        vector&lt;double&gt; local_section;\n        for (int i; i&lt;nearWindowSize; i++) {\n            int idx = j*nearWindowSize + i;\n            local_section.push_back(dummySignal[idx]);\n        }\n        local_section = padded(local_section, totalLength);\n        vector&lt;double&gt; local_output = convolved_block(local_section, dummy_ir_vec, totalLength);\n        outputs.push_back(local_output);\n    }\n    vector&lt;double&gt; local_results(11,0); // example has 11 in output\n\n    for (int j=0; j&lt;localNumSections; j++) {\n        vector&lt;double&gt; local_totals_arr = outputs[j];\n        cout &lt;&lt; \"overlap summing section \" &lt;&lt; j &lt;&lt; \"\\n\";\n        for (int i=0; i&lt;local_totals_arr.size(); i++) {\n            int newIdx = j*nearWindowSize+i;\n            local_results[newIdx] += local_totals_arr[i];\n        }\n    }    \n    for (int i=0; i&lt;11; i++) {\n        cout &lt;&lt; \"result \" &lt;&lt; i &lt;&lt; \"\\n\";\n        cout &lt;&lt; local_results[i] &lt;&lt; \"\\n\";\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 6376662, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PD3lDb-c7vU/AAAAAAAAAAI/AAAAAAAACTs/FQIKcwNwk_M/photo.jpg?sz=128", "display_name": "William Clark", "link": "https://stackoverflow.com/users/6376662/william-clark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 480, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1556157334, "creation_date": 1556130294, "last_edit_date": 1556151050, "question_id": 55836394, "link": "https://stackoverflow.com/questions/55836394/im-not-getting-expected-results-from-overlap-add-fft-convolution-using-fftw", "title": "I&#39;m not getting expected results from overlap-add FFT convolution using FFTW", "body": "<p>I am trying to carry out the convolution of two arrays via FFT, using the FFTW library in C++ and implementing the overlap-add algorithm. The vector data specifically consists of doubles loaded from WAV files using sndfile \u2014 one of them is a WAV file for processing, the other is a WAV file of an impuse response (IR), so essentially the goal is Convolution Reverb.</p>\n\n<p>I have previously implemented this successfully with Python, but that involved using FFT convolution via scipy.signal, so I didn\u2019t have to implement overlap-add myself. But from that experience, I can confirm that I am working with an impulse response that should neatly convolve with the input signal via FFT, and yield a recognizable echo effect comparable to the Python output. I can also confirm that the 2 WAV files have matching bitrates (16 bit) and sample rates (44.1 kHz).</p>\n\n<p>A few false starts only yielded flat noise as output, a familiar stumbling block. Now I am yielding a WAV output that almost resembles the changing taps of the impulse response, but with only pulses of noise at each perceived \u201ctap.\u201d</p>\n\n<p>I am following two guides for my implementation of overlap-add;\n<a href=\"https://www.dspguide.com/ch18/1.htm\" rel=\"nofollow noreferrer\">https://www.dspguide.com/ch18/1.htm</a></p>\n\n<p><a href=\"http://blog.robertelder.org/overlap-add-overlap-save/\" rel=\"nofollow noreferrer\">http://blog.robertelder.org/overlap-add-overlap-save/</a></p>\n\n<p>I\u2019m also following some online examples and other StackOverflow threads, and reading the FFTW official docs (<a href=\"http://www.fftw.org/fftw2_doc/fftw_2.html\" rel=\"nofollow noreferrer\">http://www.fftw.org/fftw2_doc/fftw_2.html</a>).</p>\n\n<p>Here is my code, with the process explained below:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;math.h&gt;\n#include &lt;sndfile.h&gt;\n#include &lt;iostream&gt;\n#include &lt;cstring&gt;\n#include &lt;vector&gt;\n#include &lt;complex.h&gt;\n#include &lt;fftw3.h&gt;\n\nusing namespace std;\n\n#define ARRAY_LEN(x)    ((int) (sizeof (x) / sizeof (x [0])))\n#define MAX(x,y)        ((x) &gt; (y) ? (x) : (y))\n#define MIN(x,y)        ((x) &lt; (y) ? (x) : (y))\n\nfftw_complex* fftw_complex_transform(vector&lt;double &gt;);\nfftw_complex* ifft_from_complex_vector(vector&lt;vector&lt;double&gt; &gt;);\nvector&lt;double&gt; convolved_block(vector&lt;double&gt;, vector&lt;complex&lt;double&gt; &gt;, int);\nvector&lt;complex&lt;double&gt; &gt; filter_kernel_cpx_vec(vector&lt;double&gt;);\nvector&lt;double&gt; padded(vector&lt;double&gt;, int);\nvoid testDummyData();\n\nint main (int argc, char ** argv) {\n    SNDFILE *infile, *outfile, *irfile ;\n    SF_INFO sfinfo ;\n    double buffer[1024];\n    sf_count_t count;\n\n    // 1 - import both WAV files \n    vector&lt;double&gt; inputWavArr;\n    vector&lt;double&gt; irWavArr;\n\n    if (argc != 4) {\n        printf(\"\\nUsage :\\n\\n    &lt;executable name&gt;  &lt;input signal file&gt; &lt;impulse response file&gt; &lt;output file&gt;\\n\") ;\n        exit(0);\n    }\n\n    memset (&amp;sfinfo, 0, sizeof (sfinfo)) ;\n    if ((infile = sf_open (argv [1], SFM_READ, &amp;sfinfo)) == NULL)     {     \n        printf (\"Error : Not able to open input file '%s'\\n\", argv [1]);\n        sf_close (infile);\n        exit (1) ;\n    } \n\n    if ((irfile = sf_open (argv [2], SFM_READ, &amp;sfinfo)) == NULL)     {     \n        printf (\"Error : Not able to open input file '%s'\\n\", argv [2]);\n        sf_close (irfile);\n        exit (1) ;\n    }   \n\n    if ((outfile = sf_open (argv [3], SFM_WRITE, &amp;sfinfo)) == NULL) { \n        printf (\"Error : Not able to open output file '%s'\\n\", argv [3]);\n        sf_close (outfile);\n        exit (1);\n    }\n\n    while ((count = sf_read_double (infile, buffer, ARRAY_LEN (buffer))) &gt; 0) {\n        for (int i = 0; i &lt; 1024; i++)\n            inputWavArr.push_back(buffer[i]);\n    }\n    while ((count = sf_read_double (irfile, buffer, ARRAY_LEN (buffer))) &gt; 0) {\n        for (int i = 0; i &lt; 1024; i++)\n            irWavArr.push_back(buffer[i]); // max value 0.0408325\n    }\n    // 2 - Settle on a padding scheme\n    int irLen = irWavArr.size();\n    int windowSize = 262144 - irLen+1; //  262144 is a pwr of 2\n    const int outputLength = irLen + windowSize - 1;\n\n    sf_close(infile);\n    sf_close(irfile);\n\n    irWavArr = padded(irWavArr, outputLength);\n    int newIrLength = irWavArr.size();\n    // 3 and 4 - use FFTW to process IR kernel into vector of complex values\n    vector&lt;complex&lt;double&gt; &gt; ir_vec;\n    ir_vec = filter_kernel_cpx_vec(irWavArr);\n    // 5 - divide dry input signal into sections of length windowSize\n    int numSections = floor(inputWavArr.size()/windowSize);\n\n    // OVERLAP-ADD PROCEDURE\n    vector&lt;vector&lt;double&gt; &gt; totals;\n    cout &lt;&lt; \"numSections is \" &lt;&lt; numSections &lt;&lt; \"\\n\";\n\n    for (int j=0; j&lt;numSections; j++) { // may be OBOB use numSections+1? or pad inputWavArr? \n        vector&lt;double&gt; total;\n        cout &lt;&lt; \"convolving section \" &lt;&lt; j &lt;&lt; \"\\n\";\n        vector&lt;double&gt; section_arr;\n        for (int i=j*windowSize; i&lt;(j*windowSize + windowSize); i++) {\n            section_arr.push_back(inputWavArr[i]);\n        }\n\n        // Hanning window\n        for (int i = 0; i &lt; windowSize; i++) {\n            double multiplier = 0.5 * (1 - cos(2*M_PI*i/(windowSize-1)));\n            section_arr[i] = multiplier * section_arr[i];\n        }\n        int old_section_arr_size = section_arr.size();\n        section_arr = padded(section_arr, outputLength);\n        // 6 - yield convolved block for each section\n        vector&lt;double&gt; output = convolved_block(section_arr, ir_vec, old_section_arr_size+irLen-1);\n\n        for (int i=0; i&lt;output.size(); i++) {\n            total.push_back(output[i]);\n        }\n        // 7 - append convolved block to vector of resultant block vectors\n        totals.push_back(total);\n    }\n    vector&lt;double&gt; results(inputWavArr.size()+newIrLength-1, 0);\n    // 8 - loop though vector of convolved segments, and carry out addition of overlapping sub-segments to yield final \"results\" vector\n    for (int j=0; j&lt;numSections; j++) {\n        vector&lt;double&gt; totals_arr = totals[j];\n        cout &lt;&lt; \"overlap summing section \" &lt;&lt; j &lt;&lt; \"\\n\";\n        for (int i=0; i&lt;totals_arr.size(); i++) {\n            int newIdx = j*windowSize+i;\n            results[newIdx] += totals_arr[i];\n        }\n    }\n    // RESULTS MARK THE END OF OVERLAP-ADD PROCEDURE\n\n    // load result vector into buffer for writing via libsndfile\n    double* buff3 = (double*)malloc(results.size()*sizeof(double));\n    for (int idx = 0; idx &lt; results.size(); idx++) {\n        buff3[idx] = results[idx]/400; // normalizing factor for these samples... output without this has amplitude going almost up to 120. input file had max around 0.15. max should be 1 about\n    }\n\n    long writtenFrames = sf_writef_double (outfile, buff3, results.size());\n    sf_close (outfile);\n\n    return 0 ;\n}\n\nfftw_complex* fftw_complex_transform(vector&lt;double&gt; signal_wav) {\n    int N = signal_wav.size();\n    fftw_complex *in, *out;\n    fftw_plan irPlan;\n    in = (fftw_complex*) fftw_malloc(sizeof(fftw_complex)*N);\n    out = (fftw_complex*) fftw_malloc(sizeof(fftw_complex)*N);\n\n    for (int i = 0; i &lt; signal_wav.size(); i++)\n    {\n        in[i][0] = signal_wav[i];\n        in[i][1] = (float)0; // complex component .. 0 for input of wav file\n    }\n    irPlan = fftw_plan_dft_1d(N, in, out, FFTW_FORWARD, FFTW_ESTIMATE);\n    fftw_execute(irPlan);\n    fftw_destroy_plan(irPlan);\n    fftw_free(in);\n\n    return out;\n}\n\nvector&lt;complex&lt;double&gt; &gt; filter_kernel_cpx_vec(vector&lt;double&gt; input) {\n    fftw_complex* irFFT = fftw_complex_transform(input);\n\n    vector&lt;complex&lt;double&gt; &gt; kernel_vec;\n    for (int i=0; i&lt;input.size(); i++) {\n        complex&lt;double&gt; m1 (irFFT[i][0], irFFT[i][1]);\n        kernel_vec.push_back(m1);\n    }\n\n    fftw_free(irFFT); \n    return kernel_vec;\n}\n\nfftw_complex* ifft_from_complex_vector(vector&lt;vector&lt;double&gt; &gt; signal_vec) {\n    int N = signal_vec.size();\n    fftw_complex *in, *out;\n    fftw_plan irPlan;\n    in = (fftw_complex*) fftw_malloc(sizeof(fftw_complex)*N);\n    out = (fftw_complex*) fftw_malloc(sizeof(fftw_complex)*N);\n\n    for (int i = 0; i &lt; signal_vec.size(); i++)\n    {\n        in[i][0] = signal_vec[i][0]; // real\n        in[i][1] = signal_vec[i][1]; // imag\n    }\n    irPlan = fftw_plan_dft_1d(N, in, out, FFTW_BACKWARD, FFTW_ESTIMATE);\n    fftw_execute(irPlan);\n    fftw_destroy_plan(irPlan);\n    fftw_free(in);\n\n    return out;\n}\n\nvector&lt;double&gt; convolved_block(vector&lt;double&gt; in_vector, vector&lt;complex&lt;double&gt; &gt; ir_cpx_vector, int size) {\n    fftw_complex* outputFFT = fftw_complex_transform(in_vector);\n\n    vector&lt;vector&lt;double&gt; &gt; products;\n    vector&lt;complex&lt;double&gt; &gt; sig_fft_cpx;\n    for (int i=0; i&lt;size; i++) {\n        complex&lt;double&gt; m1 (outputFFT[i][0], outputFFT[i][1]);\n        sig_fft_cpx.push_back(m1);\n    }        \n    fftw_free(outputFFT);\n    for (int j=0; j&lt;size; j++) {\n        std::complex&lt;double&gt; complexProduct = sig_fft_cpx[j]*ir_cpx_vector[j];\n        double re = real(complexProduct);\n        double im = imag(complexProduct);\n        vector&lt;double&gt; elemVec(2);\n        elemVec[0] = re;\n        elemVec[1] = im;\n\n        products.push_back(elemVec);\n    }\n    fftw_complex* revFFT = ifft_from_complex_vector(products);\n    vector&lt;double&gt; out_vec_dbl;\n\n    for (int i=0; i&lt;size; i++) {\n        out_vec_dbl.push_back(outputFFT[i][0]);\n    }\n    fftw_free(revFFT);\n    return out_vec_dbl;\n}\n\nvector&lt;double&gt; padded(vector&lt;double&gt; input, int total) {\n    vector&lt;double&gt; padded_vec;\n    for (int i = 0; i&lt;input.size(); i++) {\n    padded_vec.push_back(input[i]);\n    }\n    int numZeroes = total - input.size();\n    for (int i = 0; i&lt; numZeroes; i++) {\n    padded_vec.push_back((double)0);\n    }\n    return padded_vec;\n}\n\nvoid testDummyData() {\n    vector&lt;double&gt; dummyFilter;\n    dummyFilter.push_back(1);\n    dummyFilter.push_back(-1);\n    dummyFilter.push_back(1);\n\n    vector&lt;double&gt; dummySignal;\n    dummySignal.push_back(3);\n    dummySignal.push_back(-1);\n    dummySignal.push_back(0);\n    dummySignal.push_back(3);\n    dummySignal.push_back(2);\n    dummySignal.push_back(0);\n    dummySignal.push_back(1);\n    dummySignal.push_back(2);\n    dummySignal.push_back(1);\n\n    const int nearWindowSize=3;\n    const int nearIrLength=3;\n    const int totalLength = 5;\n\n    dummyFilter = padded(dummyFilter, totalLength);\n    vector&lt;complex&lt;double&gt; &gt; dummy_ir_vec = filter_kernel_cpx_vec(dummyFilter);\n\n    int localNumSections = 3;\n    vector&lt;vector&lt;double&gt; &gt; outputs;\n    for (int j=0; j&lt;localNumSections; j++) {\n        vector&lt;double&gt; local_section;\n        for (int i; i&lt;nearWindowSize; i++) {\n            int idx = j*nearWindowSize + i;\n            local_section.push_back(dummySignal[idx]);\n        }\n        local_section = padded(local_section, totalLength);\n        vector&lt;double&gt; local_output = convolved_block(local_section, dummy_ir_vec, totalLength);\n        outputs.push_back(local_output);\n    }\n    vector&lt;double&gt; local_results(11,0); // example has 11 in output\n\n    for (int j=0; j&lt;localNumSections; j++) {\n        vector&lt;double&gt; local_totals_arr = outputs[j];\n        cout &lt;&lt; \"overlap summing section \" &lt;&lt; j &lt;&lt; \"\\n\";\n        for (int i=0; i&lt;local_totals_arr.size(); i++) {\n            int newIdx = j*nearWindowSize+i;\n            local_results[newIdx] += local_totals_arr[i];\n        }\n    }    \n    for (int i=0; i&lt;11; i++) {\n        cout &lt;&lt; \"result \" &lt;&lt; i &lt;&lt; \"\\n\";\n        cout &lt;&lt; local_results[i] &lt;&lt; \"\\n\";\n    }\n}\n</code></pre>\n\n<p>My process:</p>\n\n<ol>\n<li>import both WAV files (\u201cdry\u201d input signal, and IR) via libsndfile, yielding vector representations, which are apparently well-decoded by libsndfile from WAV via PCM.</li>\n<li>settle on a padding scheme. I aimed for the IR and the segments of \u201cdry\u201d signal input to each be padded to a total length of 262144 samples, a power of two (2^18) as recommended in various guides. So as I am importing an impulse response with the length of 189440 samples, that would yield a segment-window size of 72705, so that both segment vectors of dry signal and the IR vector can be padded to a total length of 2^18 samples.</li>\n<li>use FFTW (specifically, the function fftw_plan_dft_1d, in mode FFTW_FORWARD) to process the vector with the IR time domain representation of N samples (including padding, so 2^18 samples), with FFTW yielding a pointer to a (presumed) N-length list of complex phasors to describe the frequency domain of the IR.</li>\n<li>process this pointer into a vector list of complex phasor values, to represent the IR filter kernel in the format I\u2019ll need most immediately for processing input signal segments. close the FFTW plan and free the FFTW output pointer once this vector is loaded.</li>\n<li>divide the dry signal wav into segments of 72705 samples, with zero-padding to a total length of 262144 samples for each segment including the overlap region. Use a Hanning window procedure (multiplication by cosine values with period depending on window size) prior to the padding, to eliminate likely aliasing from high-frequency artifacts at the edges of windows.</li>\n<li>for each padded segment of the dry signal, yield a \u201cconvolved block\u201d by calling convolved_block with that segment as well as the IR complex vector as arguments.\n\n<ol>\n<li>\u201cconvolved_block\u201d works as follows \u2014 use FFTW (again, fftw_plan_dft_1d in mode FFTW_FORWARD) to run the FFT on the dry segment vector (\u201cin_vector\u201c) and yield a vector of complex values, and multiply the elements of that complex vector, element-by-element, with those of the complex-vector representation of the IR kernel (ir_cpx_vector). This is complex multiplaction, handled by the std::complex class.</li>\n<li>Run the inverse FFT on the resulting array of complex phasors (again this is fftw_plan_dft_1d, but now in mode FFTW_:BACKWARD).</li>\n<li>Use the real components of the resulting N-length array to yield the N sample-amplitude values for this convolved, overlapping block</li>\n</ol></li>\n<li>Append each resulting \u201cconvolved block\u201d to our vector of convolved, overlapping blocks (vector > totals).</li>\n<li>Loop through this result vector (totals\"), and perform overlap-add to yield a new vector slightly longer than the original dry signal (vector results). Once summed cumulatively, this should represent the convolved signal, which can then be placed in a buffer and exported to WAV via libsndfile.</li>\n</ol>\n\n<p>Since this didn\u2019t yield the expected results, I tried running my same higher-level FFT functions (those encapsulating the FFTW calls) on the demo data from the guide I referenced above (<a href=\"http://blog.robertelder.org/overlap-add-overlap-save/\" rel=\"nofollow noreferrer\">http://blog.robertelder.org/overlap-add-overlap-save/</a>).</p>\n\n<p>This test is implemented with the void function testDummyData().</p>\n\n<p>In this test, the intermediate FFT complex values were not the same as those in the guide, nor were the ultimate results of the \u201cconvolved\u201d vectors (confirmed as correct in the guide via input side algorithm for the small dataset). This kind of leaves me scratching my head, since I have followed the FFTW tutorial (<a href=\"http://www.fftw.org/fftw2_doc/fftw_2.html\" rel=\"nofollow noreferrer\">http://www.fftw.org/fftw2_doc/fftw_2.html</a>) with care in order to yield my FFT results. I\u2019ve double-checked my implementation of overlap-add, and I\u2019ve made sure to avoid common implementation pitfalls such as lack of a Hanning window or improper padding scheme (it <em>seems</em> padding is right at this point\u2026). Clearly there is something I\u2019m missing here.</p>\n\n<p>One note on the output: the \u201cconvolved\u201d output samples come at <em>much</em> higher amplitude than the maximum sample amplitudes for either the dry input signal or the IR signal. I have used division by a factor of 400 to get an approximately normalized volume range, though of course this doesn\u2019t fix the fundamental problem. Still, I hope this unexpected amplitude variance gives some insight to the problem.</p>\n\n<p>Environment details: the C++ script, if saved as convolution.cpp, can be compiled with the following command:  g++ <code>pkg-config --cflags --libs fftw3 sndfile</code> convolution.cpp -o outprog\nOnly the fftw and libsndfile libraries are required to run, and I installed both with homebrew on Mac.\nAnd it can be run the following way, which is how I've loaded the relevant files (same as in the working Python version): ./outprog ../F.wav ../spaceEchoIR.wav wetSignal.wav </p>\n"}, {"tags": ["c++", "qt", "class"], "answers": [{"comments": [{"owner": {"reputation": 163, "user_id": 10077673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35fff83398af8ae0fec59673b135b31d?s=128&d=identicon&r=PG&f=1", "display_name": "froz", "link": "https://stackoverflow.com/users/10077673/froz"}, "edited": false, "score": 1, "creation_date": 1556131186, "post_id": 55836456, "comment_id": 98337442, "body": "Thank you very much, it works. You say my approach is strange so maybe I dont do the things correctly. How do you proceed to control your GUI? You put all your functions in mainwindow.cpp or you control your widgets in other cpp files?"}, {"owner": {"reputation": 42880, "user_id": 982161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/kutcC.png?s=128&g=1", "display_name": "\u03a6Xoc\u0119 \uc6c3 \u041fepe&#250;pa \u30c4", "link": "https://stackoverflow.com/users/982161/%ce%a6xoc%c4%99-%ec%9b%83-%d0%9fepe%c3%bapa-%e3%83%84"}, "reply_to_user": {"reputation": 163, "user_id": 10077673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35fff83398af8ae0fec59673b135b31d?s=128&d=identicon&r=PG&f=1", "display_name": "froz", "link": "https://stackoverflow.com/users/10077673/froz"}, "edited": false, "score": 0, "creation_date": 1556131335, "post_id": 55836456, "comment_id": 98337504, "body": "every widget that belong to mainWindow should be controlled by the main window..."}, {"owner": {"reputation": 42880, "user_id": 982161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/kutcC.png?s=128&g=1", "display_name": "\u03a6Xoc\u0119 \uc6c3 \u041fepe&#250;pa \u30c4", "link": "https://stackoverflow.com/users/982161/%ce%a6xoc%c4%99-%ec%9b%83-%d0%9fepe%c3%bapa-%e3%83%84"}, "reply_to_user": {"reputation": 163, "user_id": 10077673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35fff83398af8ae0fec59673b135b31d?s=128&d=identicon&r=PG&f=1", "display_name": "froz", "link": "https://stackoverflow.com/users/10077673/froz"}, "edited": false, "score": 0, "creation_date": 1556131406, "post_id": 55836456, "comment_id": 98337538, "body": "specially because you give pointers to another classes and you will lose the control over it, you can never known if the init class  delete the ui .... that will cause you several problems later..."}, {"owner": {"reputation": 163, "user_id": 10077673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35fff83398af8ae0fec59673b135b31d?s=128&d=identicon&r=PG&f=1", "display_name": "froz", "link": "https://stackoverflow.com/users/10077673/froz"}, "edited": false, "score": 0, "creation_date": 1556131496, "post_id": 55836456, "comment_id": 98337576, "body": "In this case I will follow your advice and put everything in mainwindow. But the risk is to have a 20 000 lines file which is quite difficult to understand. Thank you for your explanations"}], "tags": [], "owner": {"reputation": 42880, "user_id": 982161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/kutcC.png?s=128&g=1", "display_name": "\u03a6Xoc\u0119 \uc6c3 \u041fepe&#250;pa \u30c4", "link": "https://stackoverflow.com/users/982161/%ce%a6xoc%c4%99-%ec%9b%83-%d0%9fepe%c3%bapa-%e3%83%84"}, "is_accepted": true, "score": 0, "last_activity_date": 1556130562, "creation_date": 1556130562, "answer_id": 55836456, "question_id": 55836313, "link": "https://stackoverflow.com/questions/55836313/trying-to-access-widgets-of-mainwindow-from-another-class/55836456#55836456", "title": "Trying to access widgets of MainWindow from another class", "body": "<p>you are trying to find the widget label using the ui pointer, so it can be found only including the ui_mainwindow in the initializer...</p>\n\n<p>your approach is kind of weird but you can do:</p>\n\n<pre><code>#include &lt;QWidget&gt;\n#include \"ui_mainwindow.h\"\nclass Init\n{\npublic:\n    Init(Ui::MainWindow *ui);\n};\n\n\n#include \"Init.h\"\n\nInit::Init(Ui::MainWindow *ui)\n{\n    ui-&gt;pushButton1s-&gt;setText(\"11111\");\n}\n</code></pre>\n\n<p>and pass the ui in the constructor:</p>\n\n<pre><code>MainWindow::MainWindow(QWidget *parent) : QMainWindow(parent),  ui(new Ui::MainWindow)\n{\n    ui-&gt;setupUi(this);\n    Init a(ui);\n</code></pre>\n"}], "owner": {"reputation": 163, "user_id": 10077673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35fff83398af8ae0fec59673b135b31d?s=128&d=identicon&r=PG&f=1", "display_name": "froz", "link": "https://stackoverflow.com/users/10077673/froz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 0, "accepted_answer_id": 55836456, "answer_count": 1, "score": 1, "last_activity_date": 1556130717, "creation_date": 1556129937, "last_edit_date": 1556130717, "question_id": 55836313, "link": "https://stackoverflow.com/questions/55836313/trying-to-access-widgets-of-mainwindow-from-another-class", "title": "Trying to access widgets of MainWindow from another class", "body": "<p>I am trying to initialize some widgets of my MainWindow by another class Qt/C++.\nHowever, I do not succeed to access the elements of MainWindow from the other class.</p>\n\n<p>I give you a simple example:</p>\n\n<p>In this example, I try to update the text of the label of MainWindow to write \"test\". However, label is not known by initialization.\nAny idea of what I am doing wrong?</p>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>#include \"mainwindow.h\"\n#include &lt;QApplication&gt;\n#include &lt;QStyleFactory&gt;\n\nint main(int argc, char *argv[])\n{\n    QApplication::setStyle(\"Fusion\");\n    QApplication a(argc, argv);\n    a.setStyle(QStyleFactory::create(\"Fusion\"));\n    MainWindow w;\n    w.show();\n\n    return a.exec();\n}\n</code></pre>\n\n<p><strong>mainwindow.cpp</strong></p>\n\n<pre><code>#include \"mainwindow.h\"\n#include \"ui_mainwindow.h\"\n\n#include &lt;string&gt;\nusing namespace std;\n\nMainWindow::MainWindow(QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::MainWindow)\n{\n    ui-&gt;setupUi(this);\n    initialization a(this);\n}\n\nMainWindow::~MainWindow()\n{\n    delete ui;\n}\n</code></pre>\n\n<p><strong>mainwindow.h</strong></p>\n\n<pre><code>#ifndef MAINWINDOW_H\n#define MAINWINDOW_H\n\n#include &lt;QMainWindow&gt;\n\nnamespace Ui {\nclass MainWindow;\n}\n\nclass MainWindow : public QMainWindow\n{\n    Q_OBJECT\n\npublic:\n    explicit MainWindow(QWidget *parent = nullptr);\n    ~MainWindow();\n\nprivate:\n    Ui::MainWindow *ui;\n};\n\n#endif // MAINWINDOW_H\n</code></pre>\n\n<p><strong>initialization.cpp</strong></p>\n\n<pre><code>#include \"initialization.h\"\n\n\ninitialization::initialization(QObject* parent): m_parent(parent)\n{\n    m_parent-&gt;label-&gt;setText(\"Test\");\n}\n</code></pre>\n\n<p><strong>initialization.h</strong></p>\n\n<pre><code>#ifndef INITIALIZATION_H\n#define INITIALIZATION_H\n\n#include \"mainwindow.h\"\n\nclass initialization\n{\npublic:\n    initialization(QObject*);\nprivate:\n    QObject* m_parent;\n};\n\n#endif // INITIALIZATION_H\n</code></pre>\n"}, {"tags": ["c++", "compilation", "linker", "static-variables", "translation-unit"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1556129591, "post_id": 55836047, "comment_id": 98336718, "body": "There are couple of issues at play here -- non-member functions vs member functions and inline functions vs non-inline functions. Please add some demonstrative code to your post to make your questions clearer. At it stands, we can only speculate what your code looks like."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1556129653, "post_id": 55836047, "comment_id": 98336747, "body": "You seem to be missing the key point here - the function is <code>static</code> in the class. Static members of a class are very different from free-standing static functions."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1556132105, "post_id": 55836047, "comment_id": 98337839, "body": "Related: <a href=\"https://stackoverflow.com/questions/29224679/c-static-keyword-vs-c-private-scope\" title=\"c static keyword vs c private scope\">stackoverflow.com/questions/29224679/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 6899569, "user_type": "registered", "profile_image": "https://graph.facebook.com/954323951340089/picture?type=large", "display_name": "shota silagadze", "link": "https://stackoverflow.com/users/6899569/shota-silagadze"}, "edited": false, "score": 0, "creation_date": 1556130327, "post_id": 55836209, "comment_id": 98337056, "body": "the problem is that first (as mentioned wrong) version returns the same instance :) that&#39;s why I&#39;m confused"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1556130743, "post_id": 55836209, "comment_id": 98337241, "body": "<i>@rtpax</i> What you&#39;re telling here is complete nonsense, sorry."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1556131505, "post_id": 55836209, "comment_id": 98337580, "body": "<i>&quot;since each compilation unit has its own getFoo function&quot;</i> That&#39;s not true."}, {"owner": {"reputation": 1487, "user_id": 4954108, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/35e4ac731500b39e1284406a3e90b765?s=128&d=identicon&r=PG&f=1", "display_name": "rtpax", "link": "https://stackoverflow.com/users/4954108/rtpax"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1556132969, "post_id": 55836209, "comment_id": 98338226, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 I gave an example that shows unequivocally that static functions are treated separately in separate compilation units. If they were not, you would get the shown output. What part of this answer is &quot;nonsense&quot;?"}, {"owner": {"reputation": 113, "user_id": 6899569, "user_type": "registered", "profile_image": "https://graph.facebook.com/954323951340089/picture?type=large", "display_name": "shota silagadze", "link": "https://stackoverflow.com/users/6899569/shota-silagadze"}, "edited": false, "score": 0, "creation_date": 1556135159, "post_id": 55836209, "comment_id": 98339079, "body": "try singleton pattern I described above ... in that case local static instance is the same for translation units look at that pattern <a href=\"https://stackoverflow.com/questions/1008019/c-singleton-design-pattern\" title=\"c singleton design pattern\">stackoverflow.com/questions/1008019/c-singleton-design-patte&zwnj;&#8203;rn</a>"}, {"owner": {"reputation": 1487, "user_id": 4954108, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/35e4ac731500b39e1284406a3e90b765?s=128&d=identicon&r=PG&f=1", "display_name": "rtpax", "link": "https://stackoverflow.com/users/4954108/rtpax"}, "edited": false, "score": 0, "creation_date": 1556136240, "post_id": 55836209, "comment_id": 98339562, "body": "Alright, we&#39;re talking about completely different kinds of <code>static</code> then. Static member functions have external linkage. Nothing special about singleton pattern specifically, just a confusing reuse of the <code>static</code> keyword."}], "tags": [], "owner": {"reputation": 1487, "user_id": 4954108, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/35e4ac731500b39e1284406a3e90b765?s=128&d=identicon&r=PG&f=1", "display_name": "rtpax", "link": "https://stackoverflow.com/users/4954108/rtpax"}, "is_accepted": false, "score": -1, "last_activity_date": 1556132819, "last_edit_date": 1556132819, "creation_date": 1556129541, "answer_id": 55836209, "question_id": 55836047, "link": "https://stackoverflow.com/questions/55836047/in-singleton-pattern-what-makes-instance-unique/55836209#55836209", "title": "In singleton pattern what makes instance unique?", "body": "<p>The function that returns the singleton <em>should not</em> be static, only the singleton itself.</p>\n\n<p>This would be incorrect</p>\n\n<pre><code>//header file - bad implementation of singleton pattern\n\nclass foo {/*stuff*/};\n\nstatic foo&amp; getFoo() {\n    static foo myFoo;\n    return myFoo;\n}\n</code></pre>\n\n<p>This implementation would result in a different <code>myFoo</code> being returned in each compilation unit, since each compilation unit has its own <code>getFoo</code> function</p>\n\n<p>What you should do is this:</p>\n\n<pre><code>//header file - good implementation of singleton pattern\n\nclass foo {/*stuff*/};\n\nfoo&amp; getFoo();\n\n//source file - good implementation of singleton pattern\n\nfoo&amp; getFoo() {\n    static foo myFoo;\n    return myFoo;\n}\n</code></pre>\n\n<p>Now each compilation unit will reference the same <code>getFoo</code> function and get the same singleton (since the function is not static)</p>\n\n<hr>\n\n<p>As a testable example to show this.</p>\n\n<pre><code>//foo.h\n#include &lt;iostream&gt;\n\nstatic void print_num_times_called() {\n    static int num_times_called = 0;\n    ++num_times_called;\n    std::cout &lt;&lt; num_times_called &lt;&lt; \"\\n\";\n}\n\nvoid call_print_num_times_called();\n\n//foo.cpp\n#include \"foo.h\"\n\nvoid call_print_num_times_called() {\n    print_num_times_called();\n}\n\n//main.cpp\n#include \"foo.h\"\n\nvoid main() {\n    for (int i = 0; i &lt; 10; ++i) {\n        print_num_times_called();\n    }\n    for (int i = 0; i &lt; 10; ++i) {\n        call_print_num_times_called();\n    }\n}\n\n//output\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 113, "user_id": 6899569, "user_type": "registered", "profile_image": "https://graph.facebook.com/954323951340089/picture?type=large", "display_name": "shota silagadze", "link": "https://stackoverflow.com/users/6899569/shota-silagadze"}, "edited": false, "score": 0, "creation_date": 1556131538, "post_id": 55836304, "comment_id": 98337593, "body": "I believe you didn&#39;t really answer my question. Question is why &#39;static&#39; keyword doesn&#39;t make that function internally linked for each translation unit and, accordingly, create separate local static class variable for each object file ? :)"}, {"owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "reply_to_user": {"reputation": 113, "user_id": 6899569, "user_type": "registered", "profile_image": "https://graph.facebook.com/954323951340089/picture?type=large", "display_name": "shota silagadze", "link": "https://stackoverflow.com/users/6899569/shota-silagadze"}, "edited": false, "score": 0, "creation_date": 1556131654, "post_id": 55836304, "comment_id": 98337640, "body": "@shotasilagadze Based on the information in your question above, I assumed that the function in question must be a member function of the singleton class. Is this not the case?"}, {"owner": {"reputation": 113, "user_id": 6899569, "user_type": "registered", "profile_image": "https://graph.facebook.com/954323951340089/picture?type=large", "display_name": "shota silagadze", "link": "https://stackoverflow.com/users/6899569/shota-silagadze"}, "edited": false, "score": 0, "creation_date": 1556134792, "post_id": 55836304, "comment_id": 98338930, "body": "yes, but why membership makes this function different from ordinary static functions with internal linkage?"}, {"owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "reply_to_user": {"reputation": 113, "user_id": 6899569, "user_type": "registered", "profile_image": "https://graph.facebook.com/954323951340089/picture?type=large", "display_name": "shota silagadze", "link": "https://stackoverflow.com/users/6899569/shota-silagadze"}, "edited": false, "score": 0, "creation_date": 1556136026, "post_id": 55836304, "comment_id": 98339471, "body": "@shotasilagadze because that&#39;s what the <code>static</code> keyword does in C++, as explained in my answer above. To normal namespace-scope functions, it gives internal linkage, because that&#39;s what it does in C, and C++ just kept that for compatibility reasons. Member functions it turns into static member functions without any effect on linkage. I don&#39;t really think there&#39;s anything more that can be said to that, you&#39;ll even find links up there to the paragraphs [dcl.stc]/4 [basic.link]/5 which specify precisely this behavior\u2026"}, {"owner": {"reputation": 113, "user_id": 6899569, "user_type": "registered", "profile_image": "https://graph.facebook.com/954323951340089/picture?type=large", "display_name": "shota silagadze", "link": "https://stackoverflow.com/users/6899569/shota-silagadze"}, "edited": false, "score": 0, "creation_date": 1556137157, "post_id": 55836304, "comment_id": 98339907, "body": "so you are saying that when static function is member of a class it doesn&#39;t become internally linked so translation units &quot;see&quot; the only instance of that function ? and accordingly the only local static variable?"}, {"owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "reply_to_user": {"reputation": 113, "user_id": 6899569, "user_type": "registered", "profile_image": "https://graph.facebook.com/954323951340089/picture?type=large", "display_name": "shota silagadze", "link": "https://stackoverflow.com/users/6899569/shota-silagadze"}, "edited": false, "score": 0, "creation_date": 1556137184, "post_id": 55836304, "comment_id": 98339916, "body": "@shotasilagadze yes, exactly."}], "tags": [], "owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "is_accepted": false, "score": 1, "last_activity_date": 1556136518, "last_edit_date": 1556136518, "creation_date": 1556129887, "answer_id": 55836304, "question_id": 55836047, "link": "https://stackoverflow.com/questions/55836047/in-singleton-pattern-what-makes-instance-unique/55836304#55836304", "title": "In singleton pattern what makes instance unique?", "body": "<p>Because <code>static</code> <a href=\"http://eel.is/c++draft/dcl.stc#4\" rel=\"nofollow noreferrer\">[dcl.stc]/4</a> doesn't always mean internal linkage. When applied to a normal, namespace-scope function such as</p>\n\n<pre><code>static void fun();  // fun has internal linkage\n</code></pre>\n\n<p>the <code>static</code> specifier declares this function to have internal linkage <a href=\"http://eel.is/c++draft/basic.link#5\" rel=\"nofollow noreferrer\">[basic.link]/5</a>. This is mainly there for backwards compatibility with C. In C++ you'd better use an <a href=\"https://en.cppreference.com/w/cpp/language/namespace#Unnamed_namespaces\" rel=\"nofollow noreferrer\">unnamed namespace</a> to declare entities with internal linkage to avoid precisely the kind of confusion that lead to your question:</p>\n\n<pre><code>namespace\n{\n    void fun();  // fun has internal linkage, C++ style\n}\n</code></pre>\n\n<p>When applied to a member function of a class, the <code>static</code> specifier declares the function to be a <a href=\"https://en.cppreference.com/w/cpp/language/static\" rel=\"nofollow noreferrer\"><code>static</code> member function</a> of that class, i.e., a function that does not operate on instances of that class but is just a normal function declared in the scope of that class, for example:</p>\n\n<pre><code>class X\n{\npublic:\n    static void fun();  // fun is a static member function with external linkage\n};\n\nvoid test()\n{\n    X::fun();  // invoke fun\n}\n</code></pre>\n\n<p>Linkage of a non-namespace-scope function such as a static member function is not affected by the keyword <code>static</code>. As a result, the static member function above will have external linkage <a href=\"http://eel.is/c++draft/basic.link#6\" rel=\"nofollow noreferrer\">[basic.link]/6</a>.</p>\n\n<p>Apart from all that: the Singleton pattern is almost certainly not going to be the right choice for what you want to do. <a href=\"https://stackoverflow.com/questions/137975/what-is-so-bad-about-singletons\">Don't do it.</a></p>\n"}], "owner": {"reputation": 113, "user_id": 6899569, "user_type": "registered", "profile_image": "https://graph.facebook.com/954323951340089/picture?type=large", "display_name": "shota silagadze", "link": "https://stackoverflow.com/users/6899569/shota-silagadze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1556136518, "creation_date": 1556128951, "last_edit_date": 1556130202, "question_id": 55836047, "link": "https://stackoverflow.com/questions/55836047/in-singleton-pattern-what-makes-instance-unique", "title": "In singleton pattern what makes instance unique?", "body": "<p>In practices singleton pattern is created with simple static function that returns one local static variable. As long as the instance is static it returns the same variable defined once during first function call. </p>\n\n<p>The confusing part for me is that if I declare normal static function with static local variable in one header file and include that header in two different translation unit when they call that function the function local static variable is constructed twice - each for each translation unit. </p>\n\n<p>The reason is that with static function identifier function linkage is internal so there are two instances of that functions for each translation unit (source file) and thus there are two local instances for that static variable. </p>\n\n<p>My question is why doesn't that same logic apply to singleton pattern? When we declare static function why isn't it internally linked and thus why doesn't it create two instances of local static variable (which by definition is the only singleton instance) ?</p>\n\n<p>singleton main function I'm talking about:</p>\n\n<pre><code>static className&amp; instance() { static className instance; return instance; }\n</code></pre>\n"}, {"tags": ["c++", "lambda", "c++14", "functor", "typetraits"], "comments": [{"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1556129081, "post_id": 55836024, "comment_id": 98336500, "body": "It might be possible to use <a href=\"https://stackoverflow.com/questions/257288/is-it-possible-to-write-a-template-to-check-for-a-functions-existence\">existing ways to check the existence of a member function</a> to detect whether <code>operator()</code> is defined for the given type."}, {"owner": {"reputation": 15724, "user_id": 5754656, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7jfX3.png?s=128&g=1", "display_name": "Artyer", "link": "https://stackoverflow.com/users/5754656/artyer"}, "edited": false, "score": 0, "creation_date": 1556130208, "post_id": 55836024, "comment_id": 98337005, "body": "I&#39;m assuming you don&#39;t have <code>std::invoke</code> as well, and won&#39;t be using pointers to members, so you can have a simple &quot;<code>is_callable</code>&quot; trait <a href=\"https://godbolt.org/z/B2w9i8\" rel=\"nofollow noreferrer\">like this</a> (Shorter than those other answers)"}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 1, "last_activity_date": 1556129330, "creation_date": 1556129330, "answer_id": 55836157, "question_id": 55836024, "link": "https://stackoverflow.com/questions/55836024/how-can-i-tell-if-a-type-is-a-functor/55836157#55836157", "title": "How can I Tell if a Type is a Functor?", "body": "<p>Yes you can, <code>std::is_invocable</code> is a library function which requires no compiler support. You can just rip the implementation from an STL of your choice.</p>\n\n<p>For example, you can find LLVM implementation of <code>__invokable</code> (to which <code>std::is_invocable</code> forwards all the logic in LLVM's STL) here: <a href=\"https://android.googlesource.com/platform/ndk/+/5b3a49bdbd08775d0e6f9727221fe98946f6db44/sources/cxx-stl/llvm-libc++/libcxx/include/type_traits\" rel=\"nofollow noreferrer\">https://android.googlesource.com/platform/ndk/+/5b3a49bdbd08775d0e6f9727221fe98946f6db44/sources/cxx-stl/llvm-libc++/libcxx/include/type_traits</a></p>\n\n<p>(I was thinking of extracting it and posting here, but it seems to be too big for a post. On a lighter note, I find difference in spelling - invocable vs invokable - amusing.)</p>\n"}], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "closed_date": 1556129724, "accepted_answer_id": 55836157, "answer_count": 1, "score": 1, "last_activity_date": 1556129330, "creation_date": 1556128848, "question_id": 55836024, "link": "https://stackoverflow.com/questions/55836024/how-can-i-tell-if-a-type-is-a-functor", "closed_reason": "Duplicate", "title": "How can I Tell if a Type is a Functor?", "body": "<p>In <a href=\"/questions/tagged/c%2b%2b17\" class=\"post-tag\" title=\"show questions tagged &#39;c++17&#39;\" rel=\"tag\">c++17</a> I have <a href=\"https://en.cppreference.com/w/cpp/types/is_invocable\" rel=\"nofollow noreferrer\"><code>is_invocable</code></a> to match function pointers, lambdas, and functors.</p>\n\n<p>But what if I'm trapped on <a href=\"/questions/tagged/c%2b%2b14\" class=\"post-tag\" title=\"show questions tagged &#39;c++14&#39;\" rel=\"tag\">c++14</a>? Do I have a type trait, or can I write one, which will match all of these?</p>\n\n<p>I've tried <a href=\"https://en.cppreference.com/w/cpp/types/is_function\" rel=\"nofollow noreferrer\"><code>is_function</code></a> but that only works on function pointers.</p>\n"}, {"tags": ["c++", "sfml"], "comments": [{"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 1, "creation_date": 1556128877, "post_id": 55835989, "comment_id": 98336409, "body": "Hello, and welcome to StackOverflow! This sounds like a very annoying problem and we would love to help, but this really isn&#39;t enough information to know how to help you. Please create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, including the shortest possible code snippet that demonstrates the error, and details of your build system, IDE, or compiler invocation."}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1556128955, "post_id": 55835989, "comment_id": 98336434, "body": "A shot in the dark: The string you&#39;re passing to <code>sf::Image::loadFromFile</code> is corrupted. Please show how you&#39;re calling this function and what you&#39;re passing"}, {"owner": {"reputation": 1, "user_id": 11406881, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4yyYK9YHA2M/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfuqUjTpRzdpsUB-APqCeDHP7U22g/mo/photo.jpg?sz=128", "display_name": "Ludovic Doutre-Guay", "link": "https://stackoverflow.com/users/11406881/ludovic-doutre-guay"}, "reply_to_user": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1556132806, "post_id": 55835989, "comment_id": 98338153, "body": "Thank you. I found how to fix it. I changed the compiler, because mySQL wasn&#39;t working with the original compiler. But it wasn&#39;t the good one with SFML, so I changed it for another. Thank you."}, {"owner": {"reputation": 874, "user_id": 3352222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m6lYp.jpg?s=128&g=1", "display_name": "ravnsgaard", "link": "https://stackoverflow.com/users/3352222/ravnsgaard"}, "edited": false, "score": 0, "creation_date": 1556133871, "post_id": 55835989, "comment_id": 98338597, "body": "With what compiler did it not work? And which compiler are you using now? It sounds like you may be relying on undefined- or implementation-defined behaviour. SFML should work with most recent compilers, I believe."}], "owner": {"reputation": 1, "user_id": 11406881, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4yyYK9YHA2M/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfuqUjTpRzdpsUB-APqCeDHP7U22g/mo/photo.jpg?sz=128", "display_name": "Ludovic Doutre-Guay", "link": "https://stackoverflow.com/users/11406881/ludovic-doutre-guay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556132905, "creation_date": 1556128699, "last_edit_date": 1556132905, "question_id": 55835989, "link": "https://stackoverflow.com/questions/55835989/how-to-fix-sfml-failed-to-load-image-in-c-junk-characters-resolve", "title": "How to fix SFML &quot;failed to load Image&quot; in c++ ? (junk characters) (Resolve)", "body": "<p>I have a problem with sfml... everything was working fine but now I can't load any image. Whenever I try, I have the error \"Failed to load Image\" with a bunch of junk characters...</p>\n\n<p><a href=\"https://i.stack.imgur.com/DLVee.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DLVee.png\" alt=\"enter image description here\"></a></p>\n\n<p>How can I fix it?</p>\n"}, {"tags": ["c++", "cgal"], "answers": [{"tags": [], "owner": {"reputation": 5172, "user_id": 863521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gGh24.jpg?s=128&g=1", "display_name": "sloriot", "link": "https://stackoverflow.com/users/863521/sloriot"}, "is_accepted": false, "score": 0, "last_activity_date": 1556175986, "creation_date": 1556175986, "answer_id": 55843627, "question_id": 55835605, "link": "https://stackoverflow.com/questions/55835605/how-to-transform-cgal-surface-mesh-vertices/55843627#55843627", "title": "How to transform CGAL surface mesh vertices?", "body": "<p>You can use the function <a href=\"https://doc.cgal.org/latest/Polygon_mesh_processing/group__PkgPolygonMeshProcessingRef.html#ga6a0a99788b1f8014d38fd9ef8fe7d746\" rel=\"nofollow noreferrer\"><code>CGAL::Polygon_mesh_processing::transform()</code></a> which should be doing exactly what you want.</p>\n"}], "owner": {"reputation": 443, "user_id": 9051576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/982508d548e8d994adb5eea5a9908a29?s=128&d=identicon&r=PG&f=1", "display_name": "mato", "link": "https://stackoverflow.com/users/9051576/mato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 180, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556175986, "creation_date": 1556127069, "last_edit_date": 1556127161, "question_id": 55835605, "link": "https://stackoverflow.com/questions/55835605/how-to-transform-cgal-surface-mesh-vertices", "title": "How to transform CGAL surface mesh vertices?", "body": "<p>I have a matrix 4d which combines rotation and translation. I also have cgal's surface mesh. What would be the efficient and clean way to transform the surface mesh vertices using my 4d matrix?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1556126989, "post_id": 55835563, "comment_id": 98335559, "body": "Are you asking if constructors can be defined to have multiple parameters? It seems like that&#39;s what you did in the code you provided."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 5, "creation_date": 1556127039, "post_id": 55835563, "comment_id": 98335581, "body": "<b><i>Can a constructor for a class be built with multiple parameters?</i></b> Yes. Didn&#39;t you already do that?"}, {"owner": {"reputation": 173, "user_id": 10559116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1qjnZ.jpg?s=128&g=1", "display_name": "DJ Spicy Deluxe", "link": "https://stackoverflow.com/users/10559116/dj-spicy-deluxe"}, "edited": false, "score": 0, "creation_date": 1556127043, "post_id": 55835563, "comment_id": 98335585, "body": "I&#39;m not totally sure what you&#39;re asking, but a constructor can have multiple parameters and a class can have multiple constructors. Hope that helps"}, {"owner": {"reputation": 23673, "user_id": 1118321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56b8390b7457739ed8cc7cbd52bf251?s=128&d=identicon&r=PG", "display_name": "user1118321", "link": "https://stackoverflow.com/users/1118321/user1118321"}, "edited": false, "score": 1, "creation_date": 1556127091, "post_id": 55835563, "comment_id": 98335609, "body": "This is a <i>good</i> way to do things! If you don&#39;t set all the values in the class in the constructor then you have a partially-constructed object at the end and bad things can happen like getting member variables that are uninitialized."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1556127204, "post_id": 55835563, "comment_id": 98335679, "body": "Are you having problems doing that?"}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "edited": false, "score": 1, "creation_date": 1556127357, "post_id": 55835563, "comment_id": 98335743, "body": "You might look here <a href=\"https://en.cppreference.com/w/cpp/language/initializer_list\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/initializer_list</a> for the standard way to make constructors. Normally, setter functions are not used but they can be with some care."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1556127708, "post_id": 55835563, "comment_id": 98335903, "body": "Did you try it? Did you encounter any errors? Can you post them if you did?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1556128535, "post_id": 55835563, "comment_id": 98336270, "body": "@Fran&#231;oisAndrieux To be honest, it doesn&#39;t add much to the discussion other than a different way to accomplish the Asker&#39;s goal. if Id been paying attention I wouldn&#39;t even have brought it up. Doug already had a few comments earlier, so I&#39;m removing the comment and upvoting his. As for terminology, like <i>that</i> matters in programming."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1556128624, "post_id": 55835563, "comment_id": 98336307, "body": "@user4581301 It might not matter for programming, but it does for discussing it. And that&#39;s pretty much what this site does. For what it&#39;s worth the standard says <i>&quot;no initialization is performed&quot;</i> in that case, but I can&#39;t find a formal definition for &quot;uninitialized&quot;, though my understanding is that it means that it underwent no initialization."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1556129395, "post_id": 55835563, "comment_id": 98336629, "body": "I should know better than to use sarcasm on the Internet."}], "answers": [{"tags": [], "owner": {"reputation": 1046, "user_id": 10019394, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mPHEq.jpg?s=128&g=1", "display_name": "AdaRaider", "link": "https://stackoverflow.com/users/10019394/adaraider"}, "is_accepted": true, "score": 0, "last_activity_date": 1556128695, "creation_date": 1556128695, "answer_id": 55835986, "question_id": 55835563, "link": "https://stackoverflow.com/questions/55835563/can-a-constructor-for-a-class-be-built-with-multiple-parameters/55835986#55835986", "title": "Can a constructor for a class be built with multiple parameters?", "body": "<p>As suggested in many of the comments, C++ does allow this and you should use a member initializer list. </p>\n\n<pre><code>class Student\n{\n    public:\n\n    Student(int age, std::string const&amp; firstName, std::string const&amp; lastName)\n    : m_age(age)\n    , m_firstName(firstName)\n    , m_lastName(lastName) \n    {\n\n    }\n\n    private:\n\n    int m_age;\n    std::string m_firstName;\n    std::string m_lastName;\n};\n</code></pre>\n\n<p>Then you can construct a student like so:</p>\n\n<pre><code>Student s(21, \"Jane\", \"Doe\");\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11406239"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 55835986, "answer_count": 1, "score": 0, "last_activity_date": 1556128695, "creation_date": 1556126928, "last_edit_date": 1556127371, "question_id": 55835563, "link": "https://stackoverflow.com/questions/55835563/can-a-constructor-for-a-class-be-built-with-multiple-parameters", "title": "Can a constructor for a class be built with multiple parameters?", "body": "<p>I am wanting to have a constructor so that I can build my object as such: <code>Student student(age, first, last, email)</code>, and the object will be be built using my setter functions. This is so that I can have a nice one line that set's all of the variables I need for that object.</p>\n\n<p>Below should make what I am trying to do more clear:</p>\n\n<p>This is what I would envision the constructor to look like so that inside another function I can build an object and have the values already set.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>Student s(age, first, last);\n</code></pre>\n\n<p>--</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>Student::Student(int age, string first, string last) {\n   setAge(age);\n   setFirst(first);\n   setLast(last);\n}\n</code></pre>\n\n<p>I have been away from hard languages like cpp for a long time, so I hope this isn't too rudimentary for you all.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1556127931, "post_id": 55835424, "comment_id": 98335994, "body": "What are you trying to achieve? Your question isn&#39;t very clear"}, {"owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "edited": false, "score": 0, "creation_date": 1556128830, "post_id": 55835424, "comment_id": 98336385, "body": "Whatever it is you&#39;re planning to do with this, there&#39;s almost certainly a better solution to your actual problem\u2026"}], "answers": [{"tags": [], "owner": {"reputation": 680, "user_id": 7298981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/749eb9d0d9168c9f73baa6461aea1fff?s=128&d=identicon&r=PG", "display_name": "Leonid", "link": "https://stackoverflow.com/users/7298981/leonid"}, "is_accepted": false, "score": 0, "last_activity_date": 1556154375, "creation_date": 1556154375, "answer_id": 55840464, "question_id": 55835424, "link": "https://stackoverflow.com/questions/55835424/generate-a-unique-template-instance-for-use-of-template/55840464#55840464", "title": "Generate a unique template instance for use of template", "body": "<p>You could pass an extra template parameter to the <code>make_foo</code> function, and add an extra template parameter to the original <code>foo</code> class (they would be <code>int</code>s), and choose a different value for each time the function is called. If you want it to increment automatically, the best thing I can think of is using <code>__LINE__</code>. Then you can <code>#define MAKE_FOO(targs, val) make_foo&lt;targs, __LINE__&gt;(val)</code>. Add more <code>targs</code> as necessary. Don't forget to wrap <code>foo</code> in an anonymous namespace if you really want each instance to be a separate class (if this is going to be in a header file).</p>\n"}], "owner": {"reputation": 1, "user_id": 11406205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sy9p9.jpg?s=128&g=1", "display_name": "Carlos Bareas", "link": "https://stackoverflow.com/users/11406205/carlos-bareas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1556154375, "creation_date": 1556126351, "question_id": 55835424, "link": "https://stackoverflow.com/questions/55835424/generate-a-unique-template-instance-for-use-of-template", "title": "Generate a unique template instance for use of template", "body": "<p>Does anyone know if it's possible to generate a unique template instance (I think that's the word), for every use, even if the types are matching?</p>\n\n<p>My thought was to use some type of compile time counter? Like</p>\n\n<pre>\n\n    constexpr int next_count() \n    {\n        // what do I do here?\n    }\n\n\n    template \n    struct foo\n    {\n        ...\n    };\n\n    template \n    auto make_foo(T val)\n    {\n        return foo(val);\n    }\n\n</pre>\n\n<p>Any help on this would be appreciated. If it doesn't make sense, that's fine to say as well.</p>\n"}, {"tags": ["c++", "oop", "inheritance", "class-design"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 4, "creation_date": 1556126331, "post_id": 55835395, "comment_id": 98335239, "body": "Use a template maybe?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1556126367, "post_id": 55835395, "comment_id": 98335253, "body": "<code>template + alias == success</code>"}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1556126388, "post_id": 55835395, "comment_id": 98335264, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: hem, I mention that in my post."}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1556126447, "post_id": 55835395, "comment_id": 98335288, "body": "@NathanOliver: can you elaborate ? In my attempts, typedefs over templates do not address the requirement of special cases. The devil is in the details."}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 1, "last_activity_date": 1556127247, "creation_date": 1556127247, "answer_id": 55835643, "question_id": 55835395, "link": "https://stackoverflow.com/questions/55835395/design-of-similar-typed-classes/55835643#55835643", "title": "Design of similar typed classes", "body": "<p>Templates are the right way to handle this.  What you can do is add overloads for the different functions that need to behave differently and use <a href=\"https://en.cppreference.com/w/cpp/language/sfinae\" rel=\"nofollow noreferrer\">SFINAE</a> to constrain them to the types they are needed for.  Using a template we can combine both classes into a generic <code>Vector</code> class and then use a <a href=\"https://en.cppreference.com/w/cpp/language/type_alias\" rel=\"nofollow noreferrer\">type alias</a> to get concrete names for the different types.  That would look like</p>\n\n<pre><code>template&lt;typename T&gt;\nclass Vector\n{\n   T X, Y;\n\n   Vector&amp; operator+=(const Vector&amp; A) { \u2026 }\n   Vector&amp; operator*=(T A) { \u2026 }\n\n   template&lt;typename U = T, std::enable_if_t&lt;std::is_integral_v&lt;U&gt;, bool&gt; = true&gt;\n   correct_size_floating_point_type&lt;U&gt; Norm() { integer code } \n   template&lt;typename U = T, std::enable_if_t&lt;std::is_floating_point_v&lt;U&gt;, bool&gt; = true&gt;\n   U Norm() { floating point code }\n};\n\nusing intVector = Vector&lt;int&gt;;\nusing floatVector = Vector&lt;float&gt;;\n</code></pre>\n\n<p>Where <code>correct_size_floating_point_type</code> is a template type that returns a correctly sized floating point type for the supplied integer type.</p>\n"}], "owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1556130330, "creation_date": 1556126256, "last_edit_date": 1556130330, "question_id": 55835395, "link": "https://stackoverflow.com/questions/55835395/design-of-similar-typed-classes", "title": "Design of similar typed classes", "body": "<p>I am designing classes to represent geometric objects such as vectors. I need to define methods such as addition, scalar multiplication, dot product and others. The vector coordinates can be integers or reals of different sizes, hence the need to replicate the classes corresponding to these different types.</p>\n\n<p>E.g.</p>\n\n<pre><code>class intVector\n{\n   int X, Y;\n\n   intVector&amp; operator+=(const intVector&amp; A) { \u2026 }\n   intVector&amp; operator*=(int A) { \u2026 }\n\n   float Norm(); // Not int\n};\n\nclass floatVector\n{\n   float X, Y;\n\n   floatVector&amp; operator+=(const floatVector&amp; A) { \u2026 }\n   floatVector&amp; operator*=(float A) { \u2026 }\n\n   float Norm(); // Would be double for a doubleVector\n};\n</code></pre>\n\n<p>(I also need binary operators defined as functions rather than methods.)</p>\n\n<p>I want to avoid/minimize code duplication, so using templates seems a natural approach. Anyway, I want my classes to appear as plain classes, not templated ones (one option is to derive from a templated class; another is to typedef class specializations).</p>\n\n<p>In addition, there is a nasty constraint: not all methods make sense for all data types and shouldn't be declared at all in some classes, or there can be special cases with the types of certain arguments.</p>\n\n<p>During my attempts, I faced numerous problems such as the need to add numerous explicit instantiations, difficulty to avoid the members that don't make sense, cast issues between the base/derived classes\u2026 making the whole design painful. all in all, I spend writing more code with templates than without !</p>\n\n<p>Have you experienced similar class designs ? Is there a classical way to solve this ?</p>\n"}, {"tags": ["c++", "c++11", "gcc", "code-coverage", "gcov"], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 10803240, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_am5MGDp8co/AAAAAAAAAAI/AAAAAAAAldw/oOUEX50Hp4Y/photo.jpg?sz=128", "display_name": "Dev Sen", "link": "https://stackoverflow.com/users/10803240/dev-sen"}, "edited": false, "score": 0, "creation_date": 1556211651, "post_id": 55854283, "comment_id": 98370110, "body": "In that case, what would be the way to create the coverage for the implementation as well."}, {"owner": {"reputation": 19, "user_id": 10803240, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_am5MGDp8co/AAAAAAAAAAI/AAAAAAAAldw/oOUEX50Hp4Y/photo.jpg?sz=128", "display_name": "Dev Sen", "link": "https://stackoverflow.com/users/10803240/dev-sen"}, "edited": false, "score": 0, "creation_date": 1556213131, "post_id": 55854283, "comment_id": 98370783, "body": "Would I have to include the .cpp files in the test instead."}, {"owner": {"reputation": 687, "user_id": 2370362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Cb2Y.jpg?s=128&g=1", "display_name": "jhill515", "link": "https://stackoverflow.com/users/2370362/jhill515"}, "reply_to_user": {"reputation": 19, "user_id": 10803240, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_am5MGDp8co/AAAAAAAAAAI/AAAAAAAAldw/oOUEX50Hp4Y/photo.jpg?sz=128", "display_name": "Dev Sen", "link": "https://stackoverflow.com/users/10803240/dev-sen"}, "edited": false, "score": 0, "creation_date": 1556221968, "post_id": 55854283, "comment_id": 98374816, "body": "It&#39;s only going to list based on declarations. Still, it&#39;ll count the branching and line coverage in the *.cpp files. The limitation to locations of declarations is so that there isn&#39;t misinterpretation nor added noise."}], "tags": [], "owner": {"reputation": 687, "user_id": 2370362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Cb2Y.jpg?s=128&g=1", "display_name": "jhill515", "link": "https://stackoverflow.com/users/2370362/jhill515"}, "is_accepted": false, "score": 0, "last_activity_date": 1556211461, "creation_date": 1556211461, "answer_id": 55854283, "question_id": 55835388, "link": "https://stackoverflow.com/questions/55835388/lcov-is-generating-coverage-reports-for-only-header-files/55854283#55854283", "title": "LCOV is generating coverage reports for only header files", "body": "<p>That makes sense because the coverage report will attach results relative to where functions were <em>declared</em>, not where they were <em>implemented</em>.</p>\n"}], "owner": {"reputation": 19, "user_id": 10803240, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_am5MGDp8co/AAAAAAAAAAI/AAAAAAAAldw/oOUEX50Hp4Y/photo.jpg?sz=128", "display_name": "Dev Sen", "link": "https://stackoverflow.com/users/10803240/dev-sen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 439, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1556211461, "creation_date": 1556126232, "last_edit_date": 1556210901, "question_id": 55835388, "link": "https://stackoverflow.com/questions/55835388/lcov-is-generating-coverage-reports-for-only-header-files", "title": "LCOV is generating coverage reports for only header files", "body": "<p>I am using lcov and genhtml to generate code coverage reports. \nMy unit test files only include the .h header files.</p>\n\n<p>client_test.cpp</p>\n\n<pre><code>#include \"gtest/gtest.h\"\n#include \"../client.h\"\n...\n</code></pre>\n\n<pre><code>lcov --capture --no-external --rc lcov_branch_coverage=1 --directory . --output-file unfiltered_coverage.info\n</code></pre>\n\n<p>I have noticed that the coverage report only contains coverage information for the files which were in the include section of my unit tests. Thus, the coverage report only contains the client.h file and not the client.cpp file.</p>\n"}, {"tags": ["c++", "c++11", "c++14"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 3, "creation_date": 1556125489, "post_id": 55835193, "comment_id": 98334901, "body": "<code>sprintf</code> will <i>not</i> send it to the console."}, {"owner": {"reputation": 61, "user_id": 9460057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/678280c635108a644649de786f03c81b?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas123", "link": "https://stackoverflow.com/users/9460057/lucas123"}, "reply_to_user": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1556125625, "post_id": 55835193, "comment_id": 98334952, "body": "Thank you. so can I use it in my example like this: <code>new_word = sprintf(str, &quot;Hello %s&quot;, word);</code> ?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1556125739, "post_id": 55835193, "comment_id": 98334994, "body": "<code>sprintf()</code> returns the number of characters copied into <code>str</code>. You would need <code>new_word = str;</code> after <code>sprintf()</code> exits.  But you really shouldn&#39;t be using <code>sprintf()</code> anyway.  That is the C way of formatting strings. The C++ way is to use <code>std::string::operator+</code> or a <code>std::ostringstream</code> instead"}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 9460057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/678280c635108a644649de786f03c81b?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas123", "link": "https://stackoverflow.com/users/9460057/lucas123"}, "edited": false, "score": 0, "creation_date": 1556126113, "post_id": 55835239, "comment_id": 98335139, "body": "Thank you so much that is really helpful."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1556178600, "post_id": 55835239, "comment_id": 98350986, "body": "Sidenote: There&#39;s no <code>operator+</code> for numerical values (int, unsigned long, float, double, ...), only for character, C-strings and <code>std::string</code>. So if you need the former, you&#39;d be using the <code>std::ostringstream</code> variant..."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 3, "last_activity_date": 1556126225, "last_edit_date": 1556126225, "creation_date": 1556125550, "answer_id": 55835239, "question_id": 55835193, "link": "https://stackoverflow.com/questions/55835193/how-to-add-a-variable-value-inside-a-text-variable-in-c/55835239#55835239", "title": "How to add a variable value inside a text variable in C++", "body": "<p>In C++, you use the <code>+</code> operator to concatenate <code>std::string</code> objects.</p>\n\n<p><code>PyRun_SimpleString()</code> takes a <code>const char*</code> as input.  <code>std::string</code> has a <code>c_str()</code> method for obtaining a <code>const char*</code> for the string.</p>\n\n<p>So, you can do this:</p>\n\n<pre><code>std::string s = \"Hello \" + word;\nPyRun_SimpleString(s.c_str());\n</code></pre>\n\n<p>Or simply this:</p>\n\n<pre><code>PyRun_SimpleString((\"Hello \" + word).c_str());\n</code></pre>\n\n<p>Alternatively, you can use a <code>std::ostringstream</code> instead to build up a formatted string:</p>\n\n<pre><code>std::ostringstream oss;\noss &lt;&lt; \"Hello \" &lt;&lt; word;\nPyRun_SimpleString(oss.str().c_str());\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 9460057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/678280c635108a644649de786f03c81b?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas123", "link": "https://stackoverflow.com/users/9460057/lucas123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 0, "accepted_answer_id": 55835239, "answer_count": 1, "score": 0, "last_activity_date": 1556126225, "creation_date": 1556125341, "last_edit_date": 1556125529, "question_id": 55835193, "link": "https://stackoverflow.com/questions/55835193/how-to-add-a-variable-value-inside-a-text-variable-in-c", "title": "How to add a variable value inside a text variable in C++", "body": "<p>In my C++ code, I am executing some commands using python as follows:</p>\n\n<pre><code>std::string word = \"Something\";\nstd::cout &lt;&lt; word;                         //will execute using C++\nPyRun_SimpleString(\"import sys\");          // will execute using Python\n</code></pre>\n\n<p>The problem is how to pass <code>word</code> to Python ? </p>\n\n<p>I want something like this: <code>PyRun_SimpleString(\"Hello %\" %word);</code></p>\n\n<p>In Python you can do: <code>\"Hello {}\".format(word)</code> and the result <code>\"Hello Something\"</code></p>\n\n<p>I found something like this: <code>sprintf(str, \"hello %s\", word);</code>\nBut the problem is <code>printf</code> or <code>sprintf</code> will send it to console and will not return the value of word. </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 5, "creation_date": 1556125513, "post_id": 55835187, "comment_id": 98334908, "body": "I&#39;d expect compilers to scream living hell. Did you try?"}, {"owner": {"reputation": 902, "user_id": 9172668, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q4sZM.png?s=128&g=1", "display_name": "SASSY_ROG", "link": "https://stackoverflow.com/users/9172668/sassy-rog"}, "edited": false, "score": 0, "creation_date": 1556125562, "post_id": 55835187, "comment_id": 98334921, "body": "No you cant redefine types in C++ but you can set aliases, which is what typedef is used for. Check out <a href=\"https://stackoverflow.com/a/42944203/9172668\">this</a> answer"}, {"owner": {"reputation": 5848, "user_id": 1075282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70efe94a6c2237ec96f429402a03a27d?s=128&d=identicon&r=PG", "display_name": "Renat", "link": "https://stackoverflow.com/users/1075282/renat"}, "edited": false, "score": 0, "creation_date": 1556125586, "post_id": 55835187, "comment_id": 98334934, "body": "<a href=\"https://en.cppreference.com/w/cpp/language/types\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/types</a> short must be at least 16 bit"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 3, "creation_date": 1556125643, "post_id": 55835187, "comment_id": 98334960, "body": "Doing this would result in confusion. Some other poor sod reads your code, sees <code>int</code>, knows <code>int</code> on platform X is 64 bit, and then makes assumptions that are utterly wrong because you&#39;ve aliased <code>int32_t</code>. Bugs will ensue."}, {"owner": {"reputation": 185, "user_id": 10876850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/914298857aabdda24ae5a38b5cf45507?s=128&d=identicon&r=PG&f=1", "display_name": "DumbCode", "link": "https://stackoverflow.com/users/10876850/dumbcode"}, "reply_to_user": {"reputation": 5848, "user_id": 1075282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70efe94a6c2237ec96f429402a03a27d?s=128&d=identicon&r=PG", "display_name": "Renat", "link": "https://stackoverflow.com/users/1075282/renat"}, "edited": false, "score": 0, "creation_date": 1556125674, "post_id": 55835187, "comment_id": 98334969, "body": "@Renat my bad, i meant 16 for short"}, {"owner": {"reputation": 5161, "user_id": 3065406, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a6697e5c2ff5cfdf8f196fe42a309598?s=128&d=identicon&r=PG", "display_name": "deW1", "link": "https://stackoverflow.com/users/3065406/dew1"}, "edited": false, "score": 1, "creation_date": 1556125796, "post_id": 55835187, "comment_id": 98335015, "body": "You could <code>static_assert</code> in your code where you explicitely need a certain size"}, {"owner": {"reputation": 185, "user_id": 10876850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/914298857aabdda24ae5a38b5cf45507?s=128&d=identicon&r=PG&f=1", "display_name": "DumbCode", "link": "https://stackoverflow.com/users/10876850/dumbcode"}, "reply_to_user": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1556125920, "post_id": 55835187, "comment_id": 98335069, "body": "@Yunnosch gcc compiled without any problems"}, {"owner": {"reputation": 7526, "user_id": 4108376, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/163807162a115b27e50f5f5f2b90de26?s=128&d=identicon&r=PG&f=1", "display_name": "tmlen", "link": "https://stackoverflow.com/users/4108376/tmlen"}, "edited": false, "score": 1, "creation_date": 1556126063, "post_id": 55835187, "comment_id": 98335123, "body": "<code>int</code>,<code>short</code> etc. are keywords and cannot be redefined with <code>typedef</code>."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1556126169, "post_id": 55835187, "comment_id": 98335155, "body": "If you want shorter names, why not simply <code>typedef int32_t i32; typedef uint16_t u16;</code>?"}, {"owner": {"reputation": 185, "user_id": 10876850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/914298857aabdda24ae5a38b5cf45507?s=128&d=identicon&r=PG&f=1", "display_name": "DumbCode", "link": "https://stackoverflow.com/users/10876850/dumbcode"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1556126283, "post_id": 55835187, "comment_id": 98335217, "body": "@Aconcagua not just shorter names, but familiar names ;)"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1556126478, "post_id": 55835187, "comment_id": 98335302, "body": "I&#39;ve seen quite a number of systems having int only 16 bit wide. What would you do on these??? Why do you think those (u)int<i>N</i>_t arose?"}], "answers": [{"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": true, "score": 11, "last_activity_date": 1556184163, "last_edit_date": 1556184163, "creation_date": 1556125715, "answer_id": 55835275, "question_id": 55835187, "link": "https://stackoverflow.com/questions/55835187/is-it-a-good-idea-to-typedef-int32-t-as-int/55835275#55835275", "title": "Is it a good idea to typedef int32_t as int?", "body": "<p>It is a bad idea because it violates the <a href=\"https://en.wikipedia.org/wiki/Principle_of_least_astonishment\" rel=\"nofollow noreferrer\">principle of least surprise</a>.</p>\n\n<p>Your application may also be not binary compatible with APIs using built-in <code>int</code> and <code>short</code>.</p>\n\n<p>However, built-in types cannot be redefined and that is a good thing.</p>\n\n<p>You can still come up with shorter type names though:</p>\n\n<pre><code>namespace my_short_types {\n\nusing u16 = uint16_t;\nusing u32 = uint32_t;\n\n} // my_short_types\n\nusing namespace my_short_types;\nusing my_short_types::u32; // When there is ambiguity with BSD types.\n</code></pre>\n"}], "owner": {"reputation": 185, "user_id": 10876850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/914298857aabdda24ae5a38b5cf45507?s=128&d=identicon&r=PG&f=1", "display_name": "DumbCode", "link": "https://stackoverflow.com/users/10876850/dumbcode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 317, "favorite_count": 0, "accepted_answer_id": 55835275, "answer_count": 1, "score": 2, "last_activity_date": 1556184163, "creation_date": 1556125336, "last_edit_date": 1556125685, "question_id": 55835187, "link": "https://stackoverflow.com/questions/55835187/is-it-a-good-idea-to-typedef-int32-t-as-int", "title": "Is it a good idea to typedef int32_t as int?", "body": "<p>Is it a good idea to redefine types like <code>int16_t</code>, <code>int32_t</code> as <code>short</code> and <code>int</code> respectively?</p>\n\n<p>I prefer to work with fixed width integer types but I like the simplicity of <code>short</code>, <code>int</code> etc.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1556126402, "post_id": 55835167, "comment_id": 98335273, "body": "Most character encodings you&#39;ll encounter today store the letters in a contiguous ascending block allowing you to <code>int index = letter - &#39;a&#39;;</code> to get the index of the letter in an array of 26 letters in ascending order. Use the <code>index</code> into an array of 26 letters in descending order and you are pretty much done."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1556126660, "post_id": 55835167, "comment_id": 98335387, "body": "The insane cases with scrambled ordering or non-contiguous storage... that takes a bunch of work that&#39;ll only apply to that one character encoding. In this case make a map of  characters <code>&#39;A&#39;</code>-&gt;<code>&#39;Z&#39;</code>, <code>&#39;B&#39;</code>-&gt;<code>&#39;Y&#39;</code>, etc.... This always works, but but requires you to throw out the code you already have. <code>std::unordered_map</code> is helpful here."}], "answers": [{"tags": [], "owner": {"reputation": 49, "user_id": 7087414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e7c0c59d03be482596e821c66cab87?s=128&d=identicon&r=PG&f=1", "display_name": "h1r0", "link": "https://stackoverflow.com/users/7087414/h1r0"}, "is_accepted": true, "score": 0, "last_activity_date": 1556127049, "creation_date": 1556127049, "answer_id": 55835603, "question_id": 55835167, "link": "https://stackoverflow.com/questions/55835167/atbash-cipher-program-a-z-b-y-c-x/55835603#55835603", "title": "Atbash Cipher Program A = Z, B = Y, C = X", "body": "<p>The lookup array is not needed as you can simply calculate the distance from the end of alphabet and then work off of that.\nSee:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;cctype&gt;\n\nint main()\n{\n  const int letterCount = 'z' - 'a' + 1 ;\n  std::string name = \"Hello world!\";\n  for(auto&amp; letter: name){\n      if(!std::isalpha(letter)) { \n        continue;\n      }\n      const bool isUpper = std::isupper(letter);\n      const char baseOffset = isUpper? 'A': 'a';\n      const auto distanceFromAlphabetStart = letter - baseOffset;\n      letter = (baseOffset + letterCount - 1) - distanceFromAlphabetStart;\n      // substract the initial position from z (either uppercase or lowercase).\n  }\n  std::cout &lt;&lt; name;\n}\n</code></pre>\n\n<p><a href=\"https://repl.it/repls/ThornyPowerfulHexadecimal\" rel=\"nofollow noreferrer\">https://repl.it/repls/ThornyPowerfulHexadecimal</a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11406116"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1020, "favorite_count": 0, "accepted_answer_id": 55835603, "answer_count": 1, "score": -1, "last_activity_date": 1556127049, "creation_date": 1556125290, "question_id": 55835167, "link": "https://stackoverflow.com/questions/55835167/atbash-cipher-program-a-z-b-y-c-x", "title": "Atbash Cipher Program A = Z, B = Y, C = X", "body": "<p>I'm trying to create a program that will generate a Atbash Cipher. Based on this code, how can I reverse each letters? Like A = Z, B = Y, C = X?</p>\n\n<p><pre></p>\n\n<code>#include&lt;iostream&gt;\n#include&lt;stdio.h&gt;\n#include&lt;string&gt;\nusing namespace std;\nstring encrypt(string str);\nint main(){\n    string text = \"\", result = \"\";\n    cout &lt;&lt; \"Enter text to encrypt: \";getline(cin, text);\n    result = encrypt(text);\n    cout &lt;&lt; \"Encrypted text: \" &lt;&lt; result;\n}\nstring encrypt(string str) {\n    string temp = str;\n    string sample;\n    char alphabeta[13] = {'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm'};\n    char alphabetb[13] = {'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z'};\n    char Ualphabeta[13];\n    char Ualphabetb[13];\n    for(int i = 0;i &lt; 13;i++){\n        Ualphabeta[i] = toupper(alphabeta[i]);\n    }\n    for(int i = 0;i &lt; 13;i++){\n        Ualphabetb[i] = toupper(alphabetb[i]);\n    }\n\n    cout &lt;&lt; endl;\n    return temp;\n}\n</code></pre>\n"}, {"tags": ["c++", "opengl", "glsl", "glfw"], "comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 4, "creation_date": 1556125117, "post_id": 55835060, "comment_id": 98334723, "body": "&quot;<i>If sampler3D works, then at least textureSize should not return (0,0,0).</i>&quot; Unless it&#39;s <code>textureSize</code> that&#39;s broken, not the sampler. Why don&#39;t you remove all of the unneeded bits and verify whether or not you can fetch data from the texture?"}, {"owner": {"reputation": 1, "user_id": 11406532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71fbf0004641ddb36414de140829184d?s=128&d=identicon&r=PG&f=1", "display_name": "XY Li", "link": "https://stackoverflow.com/users/11406532/xy-li"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1556155952, "post_id": 55835060, "comment_id": 98344545, "body": "@NicolBolas, I added textureSize because I have tried to just fetch data from the texture using texture3D but it failed. So I combined textureSize and texture3D together to see if it&#39;s because I used wrong UVW coordinates or because sampler3D is wrong."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1556156996, "post_id": 55835060, "comment_id": 98344748, "body": "There&#39;s no right or wrong texture coordinate when the values in your texture are all the same. Also, <code>texture3D</code> is an old function; you&#39;re supposed to just use <code>texture</code>. And what does &quot;it failed&quot; mean? What color did you get?"}, {"owner": {"reputation": 1, "user_id": 11406532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71fbf0004641ddb36414de140829184d?s=128&d=identicon&r=PG&f=1", "display_name": "XY Li", "link": "https://stackoverflow.com/users/11406532/xy-li"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1556159288, "post_id": 55835060, "comment_id": 98345173, "body": "@NicolBolas, &quot;it failed&quot; means texture() or texture3D() only returns (0,0,0,0). Then I used textureSize() and found the size is always (1,1,1). So I think it&#39;s because I cannot bind 3d texture to this uniform sampler3D."}, {"owner": {"reputation": 1, "user_id": 11406532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71fbf0004641ddb36414de140829184d?s=128&d=identicon&r=PG&f=1", "display_name": "XY Li", "link": "https://stackoverflow.com/users/11406532/xy-li"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1556161157, "post_id": 55835060, "comment_id": 98345503, "body": "@NicolBolas, I solved it, I just used GL_TEXTURE_2D to set MIN and MAG filters, which led to mipmap incompleteness. It&#39;s really a stupid typo. Sorry for wasting your time."}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1556166981, "post_id": 55835060, "comment_id": 98346618, "body": "see <a href=\"https://stackoverflow.com/a/55568396/2521214\">GPU ray casting (single pass) with 3d textures in spherical coordinates</a> I used 3D texture in there so just compare for differences ... You can verify the contents and clamping by this <a href=\"https://stackoverflow.com/a/44797902/2521214\">GLSL debug prints</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11406532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71fbf0004641ddb36414de140829184d?s=128&d=identicon&r=PG&f=1", "display_name": "XY Li", "link": "https://stackoverflow.com/users/11406532/xy-li"}, "is_accepted": false, "score": 0, "last_activity_date": 1556175899, "creation_date": 1556175899, "answer_id": 55843603, "question_id": 55835060, "link": "https://stackoverflow.com/questions/55835060/glsl-cannot-get-sampler3d-value/55843603#55843603", "title": "GLSL cannot get sampler3D value", "body": "<p>I solved it.\nIt's a really stupid typo.</p>\n\n<pre><code>glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);\nglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\n</code></pre>\n\n<p>should use GL_TEXTURE_3D instead of GL_TEXTURE_2D.\nAnd since GL_TEXTURE_MIN_FILTER default state is GL_NEAREST_MIPMAP_LINEAR. It leads to mipmap incompleteness.</p>\n"}], "owner": {"reputation": 1, "user_id": 11406532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71fbf0004641ddb36414de140829184d?s=128&d=identicon&r=PG&f=1", "display_name": "XY Li", "link": "https://stackoverflow.com/users/11406532/xy-li"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 341, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1556175899, "creation_date": 1556124843, "last_edit_date": 1556155693, "question_id": 55835060, "link": "https://stackoverflow.com/questions/55835060/glsl-cannot-get-sampler3d-value", "title": "GLSL cannot get sampler3D value", "body": "<p>I cannot get sampler3D value in my GLSL fragment shader.</p>\n\n<p>I am writing a shader in GLSL and want to take sampler3D (3d texture) as volume data and do volume rendering. However, seems I cannot bind 3d texture to my shader's sampler3D. texture3D() always returns (0,0,0,0) on shader side. But on my application side, I can use glGetTexImage to get the data.</p>\n\n<p>Application Side (dS is a Shader class object):</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>dS.use();\ndS.setInt(\"volumeData\", 0);\nuint texture;\nglGenTextures(1, &amp;texture);\nglBindTexture(GL_TEXTURE_3D, texture);\nfloat data[64];\nfor (int i = 0; i &lt; 64; ++i)    data[i] = 1.0f;\nglTexImage3D(GL_TEXTURE_3D, 0, GL_R16F, 4, 4, 4, 0, GL_RED, GL_FLOAT, data);\nglTexParameteri(GL_TEXTURE_3D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);\nglTexParameteri(GL_TEXTURE_3D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);\nglTexParameteri(GL_TEXTURE_3D, GL_TEXTURE_WRAP_R, GL_CLAMP_TO_EDGE);\nglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);\nglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\nglBindTexture(GL_TEXTURE_3D, 0);\nfloat read[64];\nglBindTexture(GL_TEXTURE_3D, texture);\nglGetTexImage(GL_TEXTURE_3D, 0, GL_RED, GL_FLOAT, read);\nstd::cout &lt;&lt; read[0] &lt;&lt; \",\" &lt;&lt; read[63] &lt;&lt; std::endl;   // 1,1\nglBindTexture(GL_TEXTURE_3D, 0);\n\n// When drawing.\n\ndS.use();\ndS.setMat4(\"model\", glm::mat4(1.0f));\ndS.setMat4(\"view\", view);\ndS.setMat4(\"projection\", projection);\nglActiveTexture(GL_TEXTURE0);\nglBindTexture(GL_TEXTURE_3D, texture);\ncube.draw();\n</code></pre>\n\n<p>Vertex Shader</p>\n\n<pre><code>#version 330 core\n// for snow rendering\nlayout (location = 0) in vec3 aPos;\n\nuniform mat4 model;\nuniform mat4 view;\nuniform mat4 projection;\n\nvoid main()\n{\n    gl_Position = projection * view * model * vec4(aPos, 1.0);\n}\n</code></pre>\n\n<p>Fragment Shader</p>\n\n<pre><code>#version 330\nout vec4 FragColor;\n\nuniform sampler3D volumeData;\n\nvoid main()\n{\n    ivec3 size = textureSize(volumeData, 0);\n    float c = texture3D(volumeData, vec3(0)).x;\n    if (size.x == 1)\n        FragColor = vec4(1.0, 0.0, c, 1.0);\n    else if (size.x &gt; 2)\n        FragColor = vec4(0.0, 1.0, 0.0, 1.0);\n    else if (size.x == 0)\n        FragColor = vec4(0.0, 0.0, 1.0, 1.0);\n    else\n        FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n}\n</code></pre>\n\n<p>I only got a red cube, which means size.x == 1 and texture3D returns 0, which is expected to be size.x == 4 and texture3D returns 1.0</p>\n\n<p>I used similar method for 2d texture and it works. So I guess my Shader class is right. And I also tried to add glEnable(GL_TEXTURE_3D) before I did any 3d texture operation.</p>\n\n<p>And I am not sure if this helps: I used glfw-3.2.1 WIN64 and glad.</p>\n"}, {"tags": ["c++", "templates", "value-categories"], "comments": [{"owner": {"reputation": 4406, "user_id": 3741571, "user_type": "registered", "accept_rate": 2, "profile_image": "https://i.stack.imgur.com/0WXuV.jpg?s=128&g=1", "display_name": "chenzhongpu", "link": "https://stackoverflow.com/users/3741571/chenzhongpu"}, "edited": false, "score": 1, "creation_date": 1556179489, "post_id": 55835025, "comment_id": 98351424, "body": "You have to know that template is nothing but to substitute. In the non-type template case (or value template here), the compiler would use some int value (say <code>5</code>) to substitute <code>N</code> and generate a function. Hence, you cannot assign any value to <code>5</code>."}], "answers": [{"tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": false, "score": 2, "last_activity_date": 1556183722, "last_edit_date": 1556183722, "creation_date": 1556183300, "answer_id": 55845644, "question_id": 55835025, "link": "https://stackoverflow.com/questions/55835025/what-kind-of-values-are-template-parameters-what-can-i-not-do-with-them/55845644#55845644", "title": "What kind of values are template parameters? What can I (not) do with them?", "body": "<p>They are approximately equivalent to literals with the given value. In C++20 there is a concept <a href=\"https://en.cppreference.com/w/cpp/named_req/LiteralType\" rel=\"nofollow noreferrer\"><code>LiteralType</code></a>, which is a requirement for being a non-type template parameter.</p>\n\n<p>From <a href=\"https://en.cppreference.com/w/cpp/language/template_parameters\" rel=\"nofollow noreferrer\">cppreference</a></p>\n\n<blockquote>\n  <p>When the name of a non-type template parameter is used in an expression within the body of the class template, it is an unmodifiable prvalue unless its type was an lvalue reference type</p>\n</blockquote>\n\n<p>From <a href=\"https://timsong-cpp.github.io/cppwp/n4659/temp.param#6\" rel=\"nofollow noreferrer\">the standard</a></p>\n\n<blockquote>\n  <p>A non-type non-reference template-parameter is a prvalue. It shall not be assigned to or in any other way have its value changed. A non-type non-reference template-parameter cannot have its address taken. When a non-type non-reference template-parameter is used as an initializer for a reference, a temporary is always used.</p>\n</blockquote>\n"}], "owner": {"reputation": 1480, "user_id": 9502856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d386dd3fdda4721337ad56c73fdd1dd?s=128&d=identicon&r=PG&f=1", "display_name": "Michele Piccolini", "link": "https://stackoverflow.com/users/9502856/michele-piccolini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556183722, "creation_date": 1556124695, "last_edit_date": 1556178113, "question_id": 55835025, "link": "https://stackoverflow.com/questions/55835025/what-kind-of-values-are-template-parameters-what-can-i-not-do-with-them", "title": "What kind of values are template parameters? What can I (not) do with them?", "body": "<p>Can a value be assigned to a template non-type parameter?</p>\n\n<p>For example</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;int N&gt;\nvoid foo(){\n    N = 4;\n}\n</code></pre>\n\n<p>Trying to compile this I get:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>error: lvalue required as left operand of assignment\n     N = 4;\n       ^\n</code></pre>\n\n<p>What kind of values (Value Category) are template parameters, and how much can I \"play with them\" in function bodies? (I.e. reading them, writing to them, forwarding them to other template parameters, printing them, etc).</p>\n\n<p>For example, what is the correct way of creating a function template that \"registers\" a number (passed as template parameter at compilation time) and then prints that number every time it is called (at run time)?</p>\n"}, {"tags": ["c++", "operator-overloading"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1556124352, "post_id": 55834902, "comment_id": 98334338, "body": "Please provide a proper <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1556124410, "post_id": 55834902, "comment_id": 98334365, "body": "Your proposed operator has confusing/surprising semantics. Why does it return a <code>const</code> reference?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11406512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ab8e35b820e8ca95c9a9d3025df736e?s=128&d=identicon&r=PG&f=1", "display_name": "Yaniv", "link": "https://stackoverflow.com/users/11406512/yaniv"}, "edited": false, "score": 0, "creation_date": 1556134553, "post_id": 55837068, "comment_id": 98338843, "body": "Thank you for your thorough explanation!"}, {"owner": {"reputation": 11, "user_id": 11406512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ab8e35b820e8ca95c9a9d3025df736e?s=128&d=identicon&r=PG&f=1", "display_name": "Yaniv", "link": "https://stackoverflow.com/users/11406512/yaniv"}, "edited": false, "score": 0, "creation_date": 1556134900, "post_id": 55837068, "comment_id": 98338974, "body": "I do wonder however what will happen in the following assignment: auto c = -(a + b);? The operator+ returns a const lvalue so that programmers will not be tempted to write something like: (a + b) = &#39;some other vector&#39;. But, since this operator+ returns a const lvalue, will it copy or move when calling the operator- you wrote in your answer?"}, {"owner": {"reputation": 4438, "user_id": 5427663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f9c9fe9199349793db217d3a9e9596?s=128&d=identicon&r=PG&f=1", "display_name": "TheOperator", "link": "https://stackoverflow.com/users/5427663/theoperator"}, "reply_to_user": {"reputation": 11, "user_id": 11406512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ab8e35b820e8ca95c9a9d3025df736e?s=128&d=identicon&r=PG&f=1", "display_name": "Yaniv", "link": "https://stackoverflow.com/users/11406512/yaniv"}, "edited": false, "score": 0, "creation_date": 1556143952, "post_id": 55837068, "comment_id": 98342346, "body": "<code>(a + b) = &#39;some other vector&#39;</code> -- is this <i>really</i> a use case worth protecting for? How often have you seen such code?"}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1556146958, "post_id": 55837068, "comment_id": 98343060, "body": "If you <i>also</i> fix <code>operator+</code> to return by value instead of const lvalue, everything will work -- you can&#39;t assign to an unnamed temp (so <code>(a + b) =</code>.. is disallowed), AND <code>-(a+b)</code> will &quot;just work&quot; without extra copies."}, {"owner": {"reputation": 11, "user_id": 11406512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ab8e35b820e8ca95c9a9d3025df736e?s=128&d=identicon&r=PG&f=1", "display_name": "Yaniv", "link": "https://stackoverflow.com/users/11406512/yaniv"}, "edited": false, "score": 0, "creation_date": 1556204293, "post_id": 55837068, "comment_id": 98366292, "body": "For primitive type (a+b) = &#39;something&#39; issues the compiler error: lvalue required as left operand of assignment. If only there was something similar for general classes with defined overloads of the operator+"}], "tags": [], "owner": {"reputation": 4438, "user_id": 5427663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f9c9fe9199349793db217d3a9e9596?s=128&d=identicon&r=PG&f=1", "display_name": "TheOperator", "link": "https://stackoverflow.com/users/5427663/theoperator"}, "is_accepted": false, "score": 0, "last_activity_date": 1556133178, "creation_date": 1556133178, "answer_id": 55837068, "question_id": 55834902, "link": "https://stackoverflow.com/questions/55834902/how-to-overload-unary-arithmetic-with-move-semantic/55837068#55837068", "title": "How to overload unary arithmetic with move semantic", "body": "<p><strong>Pass and return your vector by value.</strong></p>\n\n<p>What may sound unintuitive, makes sense once you consider these things:</p>\n\n<ol>\n<li><p>A temporary object can be implicitly <em>moved</em> into a value parameter -- no copy occurs. This is as if you would call <code>std::move</code> on a local variable.</p></li>\n<li><p>This object (the parameter) can be modified in-place, since it has no <code>const</code> qualifier.</p></li>\n<li><p>The modified object can be returned, and move semantics are again applied implicitly. You should never return references to local variables -- neither lvalue nor rvalue references.</p></li>\n</ol>\n\n<pre><code>template&lt;class T&gt;\nstd::vector&lt;T&gt; operator-(std::vector&lt;T&gt; v) { // 1.\n    std::for_each( // 2.\n        v.begin(), \n        v.end(), \n        [](T&amp; val) {val = -val;});\n\n    return v; // 3.\n}\n</code></pre>\n\n<p>This operator can be called with both rvalues (move + modify + move) and lvalues (copy + modify + move).</p>\n\n<p>This being said, there <em>are</em> advantages of separate overloads for <code>const Param&amp;</code> and <code>Param&amp;&amp;</code>, the details of which are already explained in separate answers:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/21605579\">How true is &quot;Want Speed? Pass by value&quot;</a></li>\n<li><a href=\"https://stackoverflow.com/questions/26261007\">Why is value taking setter member functions not recommended in Herb Sutter&#39;s CppCon 2014 talk (Back to Basics: Modern C++ Style)?</a></li>\n</ul>\n"}], "owner": {"reputation": 11, "user_id": 11406512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ab8e35b820e8ca95c9a9d3025df736e?s=128&d=identicon&r=PG&f=1", "display_name": "Yaniv", "link": "https://stackoverflow.com/users/11406512/yaniv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1556133178, "creation_date": 1556124159, "question_id": 55834902, "link": "https://stackoverflow.com/questions/55834902/how-to-overload-unary-arithmetic-with-move-semantic", "title": "How to overload unary arithmetic with move semantic", "body": "<p>I would like to implement a unary arithmetic operator with move semantic for std::vector. The purpose is to avoid internal allocation inside the operator if it is applied on an rvalue. </p>\n\n<p>The problem: the following operation does not compile: c = -(a + b) </p>\n\n<p>The reason this does not compile is because the binary arithmetic operator + I implemented for std::vector returns a const lvalue (so that the compiler will complain on (a + b) = c, which doesn't make sense).</p>\n\n<p><strong>The binary + operator</strong></p>\n\n<pre><code>template&lt;class T, class AllocVect1, class AllocVect2&gt;\ninline const std::vector&lt;T&gt; operator+ (\n    const std::vector&lt;T, AllocVect1&gt; &amp;v1,\n    const std::vector&lt;T, AllocVect2&gt; &amp;v2) {\n    std::vector&lt;T&gt; vout;\n\n    *Compute vout = v1 + v2*\n\n    return vout;\n}\n</code></pre>\n\n<p><strong>The unary operator</strong></p>\n\n<pre><code>template&lt;class T, class Alloc&gt;\ninline const std::vector&lt;T&gt;&amp; operator- (std::vector&lt;T, Alloc&gt; &amp;&amp;v) {\n    std::transform (\n        v.begin (), \n        v.end (), \n        v.begin (), \n        [](const auto &amp;val){return -val;});\n    return v;\n}\n</code></pre>\n"}, {"tags": ["c++", "run-length-encoding"], "comments": [{"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 0, "creation_date": 1556122263, "post_id": 55834302, "comment_id": 98333323, "body": "This looks a bit too simplistic: 1) Your encode function emits count as text, then the character. But your comments suggest it should  be character, then count. 2) How would you parse out the count if it&#39;s greater than 9 and if the string contains numeric literals?"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1556122634, "post_id": 55834302, "comment_id": 98333496, "body": "About <a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\">using namespace std</a>..."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1556122643, "post_id": 55834302, "comment_id": 98333504, "body": "&quot;a3b4c1......would be decoded as aaabbbbc&quot; but you do not encode that way..."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1556122814, "post_id": 55834302, "comment_id": 98333589, "body": "It is really bad style to modify the loop variable of a for loop within the loop..."}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1556123053, "post_id": 55834302, "comment_id": 98333718, "body": "It seems like you&#39;ve gotten a bit ahead of yourself. I would suggest you take a break, put your code aside, go for a walk, and turn the problem over in your head. Re-read the problem and solve small cases on paper (<i>without</i> using code!) Once you feel like you understand what your program needs to do, start small, test often, and make sure you understand what your code actually does. See <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to Debug Small Programs</a> by Eric Lippert."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10391250, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Dm5xrKtQIeA/AAAAAAAAAAI/AAAAAAAAAfs/muiUHInTZso/photo.jpg?sz=128", "display_name": "Lizan ", "link": "https://stackoverflow.com/users/10391250/lizan"}, "edited": false, "score": 0, "creation_date": 1556135608, "post_id": 55834566, "comment_id": 98339269, "body": "thank  you and everyone for the feeback. Would you mind clarifying for me what the code &quot;while(is&gt;&gt;n&gt;&gt;c)&quot; means in the decode function"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 1, "user_id": 10391250, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Dm5xrKtQIeA/AAAAAAAAAAI/AAAAAAAAAfs/muiUHInTZso/photo.jpg?sz=128", "display_name": "Lizan ", "link": "https://stackoverflow.com/users/10391250/lizan"}, "edited": false, "score": 0, "creation_date": 1556139649, "post_id": 55834566, "comment_id": 98340953, "body": "@Lizan <i>is</i> is an input stream (as <i>std::cin</i>) initialized with the contents of <i>in</i>, so <code>is&gt;&gt;n</code> extract/read an <i>int</i> and <code>is &gt;&gt; c</code> a <i>char</i> because of the type of the variables, and it is possible to pipe them as <code>is&gt;&gt;n&gt;&gt;c</code> exactly like it is possible to do <code>std::cout &lt;&lt; 123 &lt;&lt; &#39;c&#39;</code> to print. Furthermore if an error occurs while extracting the <i>int</i> or the <i>char</i> the expression values <i>false</i>, so finally <code>while (is &gt;&gt; n &gt;&gt; c)</code> reads an <i>int</i> in <i>n</i> and a <i>char</i> in <i>c</i> until EOF corresponding to the end of the string used to initialize the <i>stringstream</i>."}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 1, "user_id": 10391250, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Dm5xrKtQIeA/AAAAAAAAAAI/AAAAAAAAAfs/muiUHInTZso/photo.jpg?sz=128", "display_name": "Lizan ", "link": "https://stackoverflow.com/users/10391250/lizan"}, "edited": false, "score": 0, "creation_date": 1556139800, "post_id": 55834566, "comment_id": 98341011, "body": "@Lizan Note also the spaces/tab are bypassed on the read, so the space placed between the count and the letter is not get for <i>c</i> but allows to stop to read the <i>int</i> before to read the letter perhaps being a digit"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 1, "user_id": 10391250, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Dm5xrKtQIeA/AAAAAAAAAAI/AAAAAAAAAfs/muiUHInTZso/photo.jpg?sz=128", "display_name": "Lizan ", "link": "https://stackoverflow.com/users/10391250/lizan"}, "edited": false, "score": 0, "creation_date": 1556184361, "post_id": 55834566, "comment_id": 98354077, "body": "@Lizan something still not ok ? you did not accepted my answer (or the other if  you prefer)  to mark your question solved (   <a href=\"https://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a> )"}], "tags": [], "owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "is_accepted": false, "score": 2, "last_activity_date": 1556125019, "last_edit_date": 1556125019, "creation_date": 1556122836, "answer_id": 55834566, "question_id": 55834302, "link": "https://stackoverflow.com/questions/55834302/how-to-set-my-decode-function-to-take-in-the-encoded-string/55834566#55834566", "title": "How to set my decode function to take in the encoded string?", "body": "<p>Your encoding is not valid because the encoding of \"1a\" produces \"111a\" which is also the encoding of 111 consecutive 'a', you need to add a separator between the count and the character</p>\n\n<p>In your decode function you only manage the special case of A and you do not extract the count the encoder put</p>\n\n<p>Note also in</p>\n\n<pre><code>for (int i = 0; i&lt;in; i++)\n{\n    count = 1;\n    if (in[i] == 'A')\n        count++, i++;\n}\n</code></pre>\n\n<p>you always reset <em>count</em> to 1</p>\n\n<p>You need to first extract the count (with the problem I signal at the beginning of my answer) then duplicate the letter 'count' times</p>\n\n<p>It is useless to do <code>string encoding = \"\";</code> because the constructor of <code>std::string</code> make it empty, can be just <code>string encoding;</code></p>\n\n<p>You need to decode an encoded string, this is not what you do in your <em>main</em> where you try to decode the initial string</p>\n\n<hr>\n\n<p>A corrected version can be :</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;string&gt;\n#include &lt;sstream&gt;\n\nusing namespace std;\n\nstring encode(string str)\n{\n\n  stringstream encoding;\n  int count;\n\n  for  (int i = 0; str[i]; i++)\n  {\n    count = 1;\n    while (str[i]==str[i+1])\n    {\n      count++, i++;\n    }\n    encoding &lt;&lt; count &lt;&lt; ' ' &lt;&lt; str[i];\n  }\n  return encoding.str();\n}\n\nstring decode(string in)\n{\n  stringstream is(in);\n  string decoding;\n  int n;\n  char c;\n\n  while (is &gt;&gt; n &gt;&gt; c)\n  {\n    while (n--)\n      decoding += c;\n  }\n\n  return decoding;\n}\n\nint main()\n{\n  cout &lt;&lt; encode(\"ABBCC2a\") &lt;&lt; endl;\n  cout &lt;&lt; decode(encode(\"ABBCC2a\")) &lt;&lt; endl;\n\n  return 0;\n}\n</code></pre>\n\n<p>Compilation and execution :</p>\n\n<pre><code>pi@raspberrypi:/tmp $ g++ -pedantic -Wall -Wextra e.cc\npi@raspberrypi:/tmp $ ./a.out\n1 A2 B2 C1 21 a\nABBCC2a\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": false, "score": 0, "last_activity_date": 1556124819, "last_edit_date": 1556124819, "creation_date": 1556124322, "answer_id": 55834942, "question_id": 55834302, "link": "https://stackoverflow.com/questions/55834302/how-to-set-my-decode-function-to-take-in-the-encoded-string/55834942#55834942", "title": "How to set my decode function to take in the encoded string?", "body": "<p>Run-length-encoding \u2013 but in a very strange way!</p>\n\n<pre><code>encoding += to_string(count) + str[i];\n</code></pre>\n\n<p>Let's encode string <code>\"sssssssssss\"</code>; it will result in a string with array representation of</p>\n\n<pre><code>{ '1', '1', 's', 0 } // string \"11s\"\n</code></pre>\n\n<p>(I chose this representation deliberately, you'll see later...)</p>\n\n<p>The problem is that you wouldn't be able to encode strings containing digits: <code>\"1s\"</code> will result in</p>\n\n<pre><code>{ '1', '1', '1', 's', 0 } // string \"111s\"\n</code></pre>\n\n<p>but how would you want to distinguish if we need to decode back to <code>\"1s\"</code> or into a string solely containing 111 <code>s</code> characters?</p>\n\n<p>Try it differently: A character actually is nothing more than a number as well, e. g. letter <code>s</code> is represented by numerical value 115 (in ASCII and compatible, at least), the digit <code>7</code> (as a character!) by numerical value 55. So you can simply add the value as character:</p>\n\n<pre><code>encoding += static_cast&lt;unsigned char&gt;(count) + str[i];\n</code></pre>\n\n<p>There are some corner cases, unsigned char cannot hold numbers greater than 255, so a string having more subsequent equal characters would have to be encoded e. g. as</p>\n\n<pre><code>{ 255, 's', 7, 's', 0 } // 262 times letter s\n</code></pre>\n\n<p>Note the representation; 255 and 7 aren't even printable characters! Now let's assume we encoded a string with 115 times the letter s:</p>\n\n<pre><code>{ 115, 's', 0 } // guess, as string, this would be \"ss\"...\n</code></pre>\n\n<p>To catch, you would simply check explicitly your counter for reaching maximum value.</p>\n\n<p>Now decoding gets much simpler:</p>\n\n<pre><code>size_t i = 0;\nwhile(i &lt; encoded.size())\n{\n    unsigned char n = encoded[i];\n    ++i;\n    while(n--)\n        decoded += encoded[i];\n    ++i;\n}\n</code></pre>\n\n<p>Totally simple: first byte always as number, second one as character...</p>\n\n<p>If you insist on numbers being encoded as string (and encode only strings not containing digits), you could use a <code>std::istringstream</code>:</p>\n\n<pre><code>std::istringstream s(encoded);\nunsigned int n;\nchar c;\nwhile(s &gt;&gt; n &gt;&gt; c)\n{\n    while(n--)\n        decoded += encoded[i];\n}\n</code></pre>\n\n<p>OK, it is not symmetric to your encoding function. You could adapt the latter to be so, though:</p>\n\n<pre><code>std::ostringstream s;\n\nfor(;;) // ...\n{\n    unsigned int count = 1;\n    // ...\n    s &lt;&lt; count &lt;&lt; str[i];\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10391250, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Dm5xrKtQIeA/AAAAAAAAAAI/AAAAAAAAAfs/muiUHInTZso/photo.jpg?sz=128", "display_name": "Lizan ", "link": "https://stackoverflow.com/users/10391250/lizan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 330, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1556125081, "creation_date": 1556121965, "last_edit_date": 1556125081, "question_id": 55834302, "link": "https://stackoverflow.com/questions/55834302/how-to-set-my-decode-function-to-take-in-the-encoded-string", "title": "How to set my decode function to take in the encoded string?", "body": "<p>I'm working on my decode function and I've hit a wall. I dont know if I should pass in the encode function or create a class. My encode function compresses a string, I need the decode function to take that encoded string and expand it.</p>\n\n<p>I've been told that it was the same as doing the encode function. I'm not sure where to go here.</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;string&gt;\n\nusing namespace std;\n\nstring encode(string str)\n{\n    string encoding = \"\";\n    int count;\n\n    for  (int i = 0; str[i]; i++)\n    {\n        count = 1;\n        while (str[i]==str[i+1])\n        {\n            count++, i++;\n        }\n        encoding += to_string(count) + str[i];\n    }\n    return encoding;\n}\n\n//Im trying to decode the encoded string\n//take in a string and count how many of the same characters there are and print\n//e.g \n// a3b4c1......would be decoded as aaabbbbc\nstring decode(string in)\n{\n    string decoding = \"\";\n    char s;\n    int count;\n    for (int i = 0; i&lt;in; i++)\n    {\n        count = 1;\n        if (in[i] == 'A')\n            count++, i++;\n    }\n\n}\n\nint main()\n{\n    string str = \"ABBCC\";\n    cout &lt;&lt; encode(str);\n    //cout &lt;&lt; decode(str);\n\n}\n\n// My encode functions executes as needed. 1A2B2C\n</code></pre>\n"}, {"tags": ["c++", "linux", "video", "ffmpeg", "video-encoding"], "comments": [{"owner": {"reputation": 1164, "user_id": 8448272, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-afLfUzleOtM/AAAAAAAAAAI/AAAAAAAAAdA/ECGtYMyfPvA/photo.jpg?sz=128", "display_name": "jmkmay", "link": "https://stackoverflow.com/users/8448272/jmkmay"}, "edited": false, "score": 1, "creation_date": 1556122511, "post_id": 55834263, "comment_id": 98333430, "body": "Why are you trying to change coding parameters during an encode? That will result in corrupted media."}, {"owner": {"reputation": 27067, "user_id": 210785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a561cd4d29738e18d9e565a6265d86ac?s=128&d=identicon&r=PG", "display_name": "szatmary", "link": "https://stackoverflow.com/users/210785/szatmary"}, "edited": false, "score": 0, "creation_date": 1556133944, "post_id": 55834263, "comment_id": 98338624, "body": "There are many parameters that can be changed on the fly without corrupting the media."}], "answers": [{"tags": [], "owner": {"reputation": 27067, "user_id": 210785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a561cd4d29738e18d9e565a6265d86ac?s=128&d=identicon&r=PG", "display_name": "szatmary", "link": "https://stackoverflow.com/users/210785/szatmary"}, "is_accepted": false, "score": 0, "last_activity_date": 1556133979, "creation_date": 1556133979, "answer_id": 55837212, "question_id": 55834263, "link": "https://stackoverflow.com/questions/55834263/update-parameters-during-ffmpeg-encoding-process-is-running/55837212#55837212", "title": "Update parameters during ffmpeg encoding process is running", "body": "<p>No, FFmpeg does not have an API for a running process. It is something you would need to develop yourself.</p>\n"}], "owner": {"reputation": 69, "user_id": 10601005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd01b7d350d220ca8ac36463679a6cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Harshil Makwana", "link": "https://stackoverflow.com/users/10601005/harshil-makwana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 183, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556133979, "creation_date": 1556121826, "question_id": 55834263, "link": "https://stackoverflow.com/questions/55834263/update-parameters-during-ffmpeg-encoding-process-is-running", "title": "Update parameters during ffmpeg encoding process is running", "body": "<p>I want to update parameters like fps, bitrate, gop of video encoder which were already passed to AVCodecContext structure previously.I want to get it's reflection at same time whenever I update any parameters.</p>\n\n<p>One thing can be done, is that need to close codec using av codec close and again open it.</p>\n\n<p>But I think that is not good way.</p>\n\n<p>Here is my ffmpeg's source code for video encoding:</p>\n\n<pre><code>        int got_output = 0, ret = 0;\n        //av_init_packet(&amp;pkt);\n        pkt.data = NULL;    // packet data will be allocated by the encoder\n        pkt.size = 0;\n        ret = avcodec_encode_video2(c, &amp;pkt, frame, &amp;got_output);\n        if (ret &lt; 0)\n        {\n                cerr &lt;&lt; \"Error sending a frame for encoding\\n\";\n                exit(1);\n        }\n</code></pre>\n\n<p>Is there any FFMPEG's API that can be used to reload encoding parameters?</p>\n"}, {"tags": ["c++", "class"], "comments": [{"owner": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "edited": false, "score": 4, "creation_date": 1556121561, "post_id": 55834148, "comment_id": 98332906, "body": "please revise your question and clarify your concern."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1556121752, "post_id": 55834148, "comment_id": 98333015, "body": "variable names have zero relevance in a running program. If you want to map names to objects you need to supply that mapping yourself eg with a <code>std::map&lt;std::string, some_type&gt;</code>. You are confusing &quot;class&quot; and &quot;object&quot; in your questions... if you want the user to select a class it will need even more"}, {"owner": {"reputation": 731, "user_id": 8184859, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9G1p6.jpg?s=128&g=1", "display_name": "Mode77", "link": "https://stackoverflow.com/users/8184859/mode77"}, "edited": false, "score": 1, "creation_date": 1556124134, "post_id": 55834148, "comment_id": 98334239, "body": "This will not compile. Please provide a <a href=\"https://stackoverflow.com/help/mcve\">minimal, complete, and verifiable example</a>"}, {"owner": {"reputation": 2131, "user_id": 2343935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/li569.png?s=128&g=1", "display_name": "grooveplex", "link": "https://stackoverflow.com/users/2343935/grooveplex"}, "reply_to_user": {"reputation": 731, "user_id": 8184859, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9G1p6.jpg?s=128&g=1", "display_name": "Mode77", "link": "https://stackoverflow.com/users/8184859/mode77"}, "edited": false, "score": 1, "creation_date": 1556136970, "post_id": 55834148, "comment_id": 98339831, "body": "@delimiter: Pro Tip: you can use <code>[mcve]</code> in a comment. It will expand thusly: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "answers": [{"tags": [], "owner": {"reputation": 362, "user_id": 9739023, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vCrP4.jpg?s=128&g=1", "display_name": "Wollzy", "link": "https://stackoverflow.com/users/9739023/wollzy"}, "is_accepted": false, "score": 0, "last_activity_date": 1568052628, "last_edit_date": 1568052628, "creation_date": 1556121996, "answer_id": 55834316, "question_id": 55834148, "link": "https://stackoverflow.com/questions/55834148/is-there-anyway-to-use-a-user-inputted-class-item-name-to-access-the-data-in-tha/55834316#55834316", "title": "Is there anyway to use a user inputted class Item name to access the data in that item?", "body": "<p>I think you have a fundamental misunderstanding of how objects work.</p>\n\n<p><code>string a = \"\";</code> </p>\n\n<p>is simply a string object that contains no other fields.  The only data it will hold is that data that is read in through the input stream when you do <code>cin &gt;&gt; a;</code>.</p>\n\n<p>Now you could take <code>a</code> and <code>b</code> and assign them to <code>Z.name = a;</code> and <code>Z.itemnum = b;</code> and then do <code>cout &lt;&lt; Z.name;</code> and <code>cout &lt;&lt; Z.itemnum</code></p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 11406347, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--exDGKtBGcQ/AAAAAAAAAAI/AAAAAAAAAME/N04kJBaCBKM/photo.jpg?sz=128", "display_name": "Easton Scowden", "link": "https://stackoverflow.com/users/11406347/easton-scowden"}, "edited": false, "score": 0, "creation_date": 1556719092, "post_id": 55835645, "comment_id": 98527505, "body": "Received and understood."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 1, "last_activity_date": 1556127252, "creation_date": 1556127252, "answer_id": 55835645, "question_id": 55834148, "link": "https://stackoverflow.com/questions/55834148/is-there-anyway-to-use-a-user-inputted-class-item-name-to-access-the-data-in-tha/55835645#55835645", "title": "Is there anyway to use a user inputted class Item name to access the data in that item?", "body": "<p>C++ does not work the way you are thinking.  Variable names are only used in code, they are lost during compiling.  And you certainly cannot treat a string as-is as a variable name.</p>\n\n<p>For what you are attempting, you need to perform the mapping of names to objects yourself.  You can use a <code>std::map</code> for that, eg:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;map&gt;\n\nclass Item\n{\n  std::string name;\n  double price;\n  int itemnum;\n\n  void set(std::string newName, double newPrice, int newItemNum) {\n    name = newName;\n    price = newPrice;\n    itemnum = newItemNum;\n  }\n};\n\nstd::map&lt;std::string, Item&gt; items;\n\nitems[\"Z\"].set(\"Milk\", 2, 26);\n// other items as needed...\n\nstd::string a; \nint b;\n\ndo {\n  std::cout &lt;&lt; \"Enter the item letter: \";\n  std::cin &gt;&gt; a; \n  if (a == \"0\") break;\n  auto iter = items.find(a);\n  if (iter != items.end()) {\n    std::cout &lt;&lt; \"Enter an item quantity: \";\n    std::cin &gt;&gt; b;\n    std::cout &lt;&lt; \"You got \" &lt;&lt; b &lt;&lt; \" things of \" &lt;&lt; iter-&gt;second.name &lt;&lt; std::endl; \n  }\n  else {\n    std::cout &lt;&lt; \"There is no item letter of \" &lt;&lt; a &lt;&lt; \", try again\" &lt;&lt; std::endl; \n  }\n}\nwhile (true);\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11406347, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--exDGKtBGcQ/AAAAAAAAAAI/AAAAAAAAAME/N04kJBaCBKM/photo.jpg?sz=128", "display_name": "Easton Scowden", "link": "https://stackoverflow.com/users/11406347/easton-scowden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 1, "accepted_answer_id": 55835645, "answer_count": 2, "score": 0, "last_activity_date": 1568052628, "creation_date": 1556121402, "last_edit_date": 1556136771, "question_id": 55834148, "link": "https://stackoverflow.com/questions/55834148/is-there-anyway-to-use-a-user-inputted-class-item-name-to-access-the-data-in-tha", "title": "Is there anyway to use a user inputted class Item name to access the data in that item?", "body": "<p>How to access class data from a user inputted class name?</p>\n\n<p>I set a variable <code>string a;</code> and when I try to return something like <code>a.name</code> or <code>a.price</code> it won't print the data. Say in the example below a user inputs <code>Z</code>.</p>\n\n<pre><code>Z.name = \"Milk\" ; \nZ.price = 2 ; \nZ.itemnum = 26 ;\n\nstring a = \"\"; \nint b;\n\nwhile (a != \"0\") {\n  cout &lt;&lt; \"Enter the item letter: \" ; \n  cin &gt;&gt; a ; \n  cout &lt;&lt; \"Enter an item quantity: \";\n  cin &gt;&gt; b;\n  cout &lt;&lt; \"You got \" &lt;&lt; b &lt;&lt; \" things of \" &lt;&lt; a.name &lt;&lt; endl; \n  cout &lt;&lt; a ;\n}\n</code></pre>\n"}, {"tags": ["c++", "boost", "rounding", "quantile", "boost-accumulators"], "owner": {"reputation": 11, "user_id": 4637829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fWrJd.png?s=128&g=1", "display_name": "Fabian Mancilla", "link": "https://stackoverflow.com/users/4637829/fabian-mancilla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1556133168, "creation_date": 1556121195, "last_edit_date": 1556133168, "question_id": 55834090, "link": "https://stackoverflow.com/questions/55834090/how-to-set-rounding-policy-to-an-empirical-distribution-accumulator-in-the-quant", "title": "How to set rounding policy to an empirical distribution accumulator in the quantile function?", "body": "<p>I'm trying to change the default rounding parameter value <code>integer_round_outwards</code> to <code>integer_round_inwards</code> for an accumulator which contains an empirical discrete distribution (<a href=\"https://www.boost.org/doc/libs/1_67_0/libs/math/doc/html/math_toolkit/pol_ref/discrete_quant_ref.html\" rel=\"nofollow noreferrer\">Discrete Quantile Policies</a>).</p>\n\n<p>I've calculated the quantity from an empirical distribution with the default rounding policy:</p>\n\n<pre><code>#include &lt;boost/math/policies/policy.hpp&gt;\n#include &lt;boost/accumulators/accumulators.hpp&gt;\n#include &lt;boost/accumulators/statistics.hpp&gt;\n#include &lt;boost/accumulators/statistics/stats.hpp&gt;\n#include &lt;boost/accumulators/statistics/tail_quantile.hpp&gt;\n\nusing namespace boost::accumulators;\n\ntypedef accumulator_set&lt; double, stats&lt; tag::tail_quantile&lt;right&gt; &gt; &gt; accumulator_t;\n\ndouble myQuantile(double level, std::vector&lt;double&gt;&amp; values){\n\n    accumulator_t acc(boost::accumulators::tag::tail&lt;right&gt;::cache_size = values.size());\n\n    for (const auto&amp; sample : values) // Vector 'values' containing empirical measures\n        acc(sample);                  // My accumulator 'acc' with the empirical discrete distribution\n\n    double myResult = quantile(acc, quantile_probability = level);\n\n    return myResult;                  // This result is under the integer_round_outwards rounding policy\n};\n\n</code></pre>\n\n<p>However, I want to try other types of rounding policies. Boost documentation shows the following example for a Negative Binomial distribution:</p>\n\n<pre><code>#include &lt;boost/math/distributions/negative_binomial.hpp&gt;\n\nusing boost::math::negative_binomial_distribution;\nusing namespace boost::math::policies;\n\ntypedef negative_binomial_distribution&lt; double, policy&lt;discrete_quantile&lt;integer_round_nearest&gt; &gt; &gt; dist_type;\n\n// Lower quantile rounded (down) to nearest:\ndouble x = quantile(dist_type(20, 0.3), 0.05); // 27\n</code></pre>\n\n<p>How can I do this for my custom accumulator which contains the empirical discrete distribution?</p>\n\n<p>I'm using Boost 1.63</p>\n"}, {"tags": ["c++", "operator-overloading", "c++14", "operator-keyword"], "comments": [{"owner": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "edited": false, "score": 0, "creation_date": 1556121424, "post_id": 55834032, "comment_id": 98332834, "body": "make LCM a free function (ie not in Rational class), given that you need it in the friend operator you declared, not in the original class."}, {"owner": {"reputation": 3, "user_id": 10789638, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-y4lFIC1Mp3E/AAAAAAAAAAI/AAAAAAAAAAc/lPc5x6mPXsM/photo.jpg?sz=128", "display_name": "Jubesh Joseph", "link": "https://stackoverflow.com/users/10789638/jubesh-joseph"}, "reply_to_user": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "edited": false, "score": 1, "creation_date": 1556121588, "post_id": 55834032, "comment_id": 98332926, "body": "Thanx dude it worked ! Very very thanks!  :)"}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1556121782, "post_id": 55834032, "comment_id": 98333038, "body": "FYI: since C++17 there is <code>std::lcm</code> and <code>std::gcd</code> and the use proper algorithm not the slowest possible you are using."}, {"owner": {"reputation": 3, "user_id": 10789638, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-y4lFIC1Mp3E/AAAAAAAAAAI/AAAAAAAAAAc/lPc5x6mPXsM/photo.jpg?sz=128", "display_name": "Jubesh Joseph", "link": "https://stackoverflow.com/users/10789638/jubesh-joseph"}, "edited": false, "score": 0, "creation_date": 1556342461, "post_id": 55834032, "comment_id": 98414369, "body": "How can i get access to that algorithm?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10789638, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-y4lFIC1Mp3E/AAAAAAAAAAI/AAAAAAAAAAc/lPc5x6mPXsM/photo.jpg?sz=128", "display_name": "Jubesh Joseph", "link": "https://stackoverflow.com/users/10789638/jubesh-joseph"}, "edited": false, "score": 0, "creation_date": 1556121779, "post_id": 55834186, "comment_id": 98333034, "body": "Yup i got it ! Thanks a lot for helping out ! :)"}], "tags": [], "owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "is_accepted": false, "score": 1, "last_activity_date": 1556121550, "creation_date": 1556121550, "answer_id": 55834186, "question_id": 55834032, "link": "https://stackoverflow.com/questions/55834032/how-to-define-some-function-which-can-be-accessed-from-within-the-scope-of-opera/55834186#55834186", "title": "How to define some function which can be accessed from within the scope of operator overloading for (+) operator?", "body": "<p>I would say that <code>int Rational::LCM(int a,int b)</code> does not really have anything to do with the <code>Rational</code> class and should probably be a utility function (non-member function), then you would be able to use it anywhere</p>\n"}], "owner": {"reputation": 3, "user_id": 10789638, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-y4lFIC1Mp3E/AAAAAAAAAAI/AAAAAAAAAAc/lPc5x6mPXsM/photo.jpg?sz=128", "display_name": "Jubesh Joseph", "link": "https://stackoverflow.com/users/10789638/jubesh-joseph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556127629, "creation_date": 1556120996, "last_edit_date": 1556127629, "question_id": 55834032, "link": "https://stackoverflow.com/questions/55834032/how-to-define-some-function-which-can-be-accessed-from-within-the-scope-of-opera", "title": "How to define some function which can be accessed from within the scope of operator overloading for (+) operator?", "body": "<p>I created a code by using operator overloading concept in c++ for addition of two rational numbers by overloading the +(plus) and the &lt;&lt;(Insertion) operator and I am not able to get a function being accessed from the scope of operator overloading of + operator. How to access the LCM() function from the scope of operator+ overloaded?</p>\n\n<p>I tried using the friend function to access my LCM() function from within the scope of operator+ overloaded function but it didn't work!</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nclass Rational {\n\nprivate:\n    int num, den;\n\npublic:\n    int getnum()\n    {\n        return this-&gt;num;\n    }\n\n    int getden()\n    {\n        return this-&gt;den;\n    }\n\n    Rational(int num = 0, int den = 0)\n    {\n        this-&gt;num = num;\n        this-&gt;den = den;\n    }\n    int LCM(int a, int b);\n    friend ostream&amp; operator&lt;&lt;(ostream&amp; out, Rational&amp; r);\n    friend Rational operator+(Rational x, Rational y);\n};\n\nint Rational::LCM(int a, int b)\n{\n\n    int i = a &gt; b ? a : b;\n    for (i; i &lt;= a * b; i++) {\n        if (i % a == 0 &amp;&amp; i % b == 0) {\n\n            break;\n        }\n    }\n    return i;\n}\n\nostream&amp; operator&lt;&lt;(ostream&amp; out, Rational&amp; r)\n{\n\n    out &lt;&lt; r.getnum() &lt;&lt; \"/\" &lt;&lt; r.getden();\n\n    return out;\n}\n\nRational operator+(Rational x, Rational y)\n{\n\n    Rational temp;\n    int temp1;\n    int div;\n    temp1 = LCM(x.den, y.den);\n\n    temp.num = (int(temp1 / x.den) * x.num) + (int(temp1 / y.den) * y.num);\n    temp.den = temp1;\n\n    return temp;\n}\n\nint main()\n{\n\n    Rational r1(3, 2);\n    Rational r2(9, 4);\n    Rational r3;\n    r3 = r1 + r2;\n    cout &lt;&lt; r3;\n\n    return 0;\n}\n</code></pre>\n\n<p>And I get the error:</p>\n\n<blockquote>\n  <p>error: \u2018LCM\u2019 was not declared in this scope</p>\n</blockquote>\n"}, {"tags": ["c++", "qt", "opengl", "vtk"], "comments": [{"owner": {"reputation": 1605, "user_id": 4179302, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-71QIq2eev8E/AAAAAAAAAAI/AAAAAAAAA0c/KCUZGf1P-7Y/photo.jpg?sz=128", "display_name": "apalomer", "link": "https://stackoverflow.com/users/4179302/apalomer"}, "edited": false, "score": 0, "creation_date": 1556124029, "post_id": 55833867, "comment_id": 98334190, "body": "I&#39;ve tryied the parts of code that you provide in my own project and cannot reproduce your problem, I get the desired behaviour (the cilinder apears when the <code>action_open</code> is triggered). Can you provide a complete example where the error happens so we can reproduce it?"}, {"owner": {"reputation": 71, "user_id": 8246070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecaa4c0d1a6910ed117a709f4e2deff6?s=128&d=identicon&r=PG&f=1", "display_name": "sunjy", "link": "https://stackoverflow.com/users/8246070/sunjy"}, "reply_to_user": {"reputation": 1605, "user_id": 4179302, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-71QIq2eev8E/AAAAAAAAAAI/AAAAAAAAA0c/KCUZGf1P-7Y/photo.jpg?sz=128", "display_name": "apalomer", "link": "https://stackoverflow.com/users/4179302/apalomer"}, "edited": false, "score": 0, "creation_date": 1556168945, "post_id": 55833867, "comment_id": 98347102, "body": "Hi, the project is in: <a href=\"https://github.com/pkusunjy/PPS\" rel=\"nofollow noreferrer\">github.com/pkusunjy/PPS</a>"}, {"owner": {"reputation": 1043, "user_id": 3668507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d75ecbb1ee181e25bb0b4c781fe8680f?s=128&d=identicon&r=PG&f=1", "display_name": "Taron", "link": "https://stackoverflow.com/users/3668507/taron"}, "edited": false, "score": 0, "creation_date": 1557141490, "post_id": 55833867, "comment_id": 98653795, "body": "Do not name the slot paint. You will hide the original paint function of QWidget."}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 8246070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecaa4c0d1a6910ed117a709f4e2deff6?s=128&d=identicon&r=PG&f=1", "display_name": "sunjy", "link": "https://stackoverflow.com/users/8246070/sunjy"}, "edited": false, "score": 0, "creation_date": 1556182819, "post_id": 55843110, "comment_id": 98353189, "body": "Thanks for your kind reply. However I move my mouse, click or wheel, the cylinder doesn&#39;t appear. Even I add the new line in the slot function, it still doesn&#39;t work."}], "tags": [], "owner": {"reputation": 1605, "user_id": 4179302, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-71QIq2eev8E/AAAAAAAAAAI/AAAAAAAAA0c/KCUZGf1P-7Y/photo.jpg?sz=128", "display_name": "apalomer", "link": "https://stackoverflow.com/users/4179302/apalomer"}, "is_accepted": false, "score": 0, "last_activity_date": 1556174224, "last_edit_date": 1556174224, "creation_date": 1556173876, "answer_id": 55843110, "question_id": 55833867, "link": "https://stackoverflow.com/questions/55833867/qvtkopenglwidget-doesnt-respond-to-signal-while-other-widgets-in-the-same-ui/55843110#55843110", "title": "QVTKOpenGLWidget doesn&#39;t respond to signal, while other widgets in the same .ui do respond to it", "body": "<p>I've noticed that your cylinder is drawn when you interact with the <code>QVTKOpenGLWidget</code> (after <code>action_open</code> is triggered, you move the 3D display and the cylinder will appear). This is because the <code>QVTKOpenGLWidget</code> is not updated when you create your renderers, windows and so on. So you need to add <code>ui-&gt;display3d-&gt;update();</code> before exiting <code>void mainui::paint()</code> function to force an update on the <code>display3d</code> widget:</p>\n\n<pre><code>void mainui::paint()\n{\n  ui-&gt;textEdit-&gt;append(\"Nope\");\n\n  auto cylinderSource = vtkSmartPointer&lt;vtkCylinderSource&gt;::New();\n  cylinderSource-&gt;SetCenter(0, 0, 0);\n  cylinderSource-&gt;SetRadius(5.0);\n  cylinderSource-&gt;SetHeight(7.0);\n  cylinderSource-&gt;SetResolution(100);\n\n  auto mapper = vtkSmartPointer&lt;vtkPolyDataMapper&gt;::New();\n  mapper-&gt;SetInputConnection(cylinderSource-&gt;GetOutputPort());\n\n  auto actor = vtkSmartPointer&lt;vtkActor&gt;::New();\n  actor-&gt;SetMapper(mapper);\n\n  auto renderer = vtkSmartPointer&lt;vtkRenderer&gt;::New();\n  renderer-&gt;AddActor(actor);\n\n  auto win = vtkSmartPointer&lt;vtkGenericOpenGLRenderWindow&gt;::New();\n  win-&gt;AddRenderer(renderer);\n\n  ui-&gt;display3d-&gt;SetRenderWindow(win);\n  ui-&gt;display3d-&gt;update();//This is the new line\n}\n</code></pre>\n\n<p>You do not need to manually call <a href=\"https://doc.qt.io/qt-5/qwidget.html#update\" rel=\"nofollow noreferrer\"><code>QWidget::update()</code></a> manully when you create your cylinder in the constructor because the widget is drawn after the constructor.</p>\n\n<p>Here you can see it working:</p>\n\n<p><a href=\"https://i.stack.imgur.com/iDv6m.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iDv6m.gif\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Note</strong>: I learned this in the pcl tutorial: <a href=\"http://pointclouds.org/documentation/tutorials/qt_visualizer.php\" rel=\"nofollow noreferrer\">Create a PCL visualizer in Qt with cmake</a>.</p>\n"}], "owner": {"reputation": 71, "user_id": 8246070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecaa4c0d1a6910ed117a709f4e2deff6?s=128&d=identicon&r=PG&f=1", "display_name": "sunjy", "link": "https://stackoverflow.com/users/8246070/sunjy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 257, "favorite_count": 2, "answer_count": 1, "score": 0, "last_activity_date": 1556174224, "creation_date": 1556120432, "last_edit_date": 1556120922, "question_id": 55833867, "link": "https://stackoverflow.com/questions/55833867/qvtkopenglwidget-doesnt-respond-to-signal-while-other-widgets-in-the-same-ui", "title": "QVTKOpenGLWidget doesn&#39;t respond to signal, while other widgets in the same .ui do respond to it", "body": "<p>I am trying to draw a cylinder in a QVTKOpenGLWidget. I use Qt Creator, with qt version 5.12.0 (msvc2017_64). The QVTKOpenGLWidget is promoted from QWidget, and I use QVTKOpenGLWidget.h in the VTK include folder. </p>\n\n<p>When I create cylinder, renderer, vtkGenericOpenGLRenderWindow etc in constructor like most of examples available, nothing goes wrong, the cylinder is shown in the QVTKOpenGLWidget. The code is like below: </p>\n\n<pre><code>mainui::mainui(QWidget *parent) : QMainWindow(parent), ui(new Ui::mainui)\n{\n    ui-&gt;setupUi(this);\n\n    auto cylinderSource = vtkSmartPointer&lt;vtkCylinderSource&gt;::New();\n    cylinderSource-&gt;SetCenter(0, 0, 0);\n    cylinderSource-&gt;SetRadius(5.0);\n    cylinderSource-&gt;SetHeight(7.0);\n    cylinderSource-&gt;SetResolution(100);\n\n    auto mapper = vtkSmartPointer&lt;vtkPolyDataMapper&gt;::New();\n    mapper-&gt;SetInputConnection(cylinderSource-&gt;GetOutputPort());\n\n    auto actor = vtkSmartPointer&lt;vtkActor&gt;::New();\n    actor-&gt;SetMapper(mapper);\n\n    auto renderer = vtkSmartPointer&lt;vtkRenderer&gt;::New();\n    renderer-&gt;AddActor(actor);\n\n    auto win = vtkSmartPointer&lt;vtkGenericOpenGLRenderWindow&gt;::New();\n    win-&gt;AddRenderer(renderer);\n    ui-&gt;display3d-&gt;SetRenderWindow(win);\n}\n</code></pre>\n\n<p>In this condition, the result is like below: \n<a href=\"https://i.stack.imgur.com/gXtAT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gXtAT.png\" alt=\"enter image description here\"></a></p>\n\n<p>However when I add an action with function \"triggered()\" as a signal, add VTK-related code in a function and add that function as a slot function, and connect them, the QVTKOpenGLWidget seems not working (totally black, no cylinder). But other widgets seems working well. The code is like below: </p>\n\n<pre><code>void mainui::paint() {\n    ui-&gt;textEdit-&gt;append(\"Hello vtk!\");\n\n    auto cylinderSource = vtkSmartPointer&lt;vtkCylinderSource&gt;::New();\n    cylinderSource-&gt;SetCenter(0, 0, 0);\n    cylinderSource-&gt;SetRadius(5.0);\n    cylinderSource-&gt;SetHeight(7.0);\n    cylinderSource-&gt;SetResolution(100);\n\n    auto mapper = vtkSmartPointer&lt;vtkPolyDataMapper&gt;::New();\n    mapper-&gt;SetInputConnection(cylinderSource-&gt;GetOutputPort());\n\n    auto actor = vtkSmartPointer&lt;vtkActor&gt;::New();\n    actor-&gt;SetMapper(mapper);\n\n    auto renderer = vtkSmartPointer&lt;vtkRenderer&gt;::New();\n    renderer-&gt;AddActor(actor);\n\n    auto win = vtkSmartPointer&lt;vtkGenericOpenGLRenderWindow&gt;::New();\n    win-&gt;AddRenderer(renderer);\n    ui-&gt;display3d-&gt;SetRenderWindow(win);\n\n    ui-&gt;textEdit-&gt;append(\"textEdit respond to trigger signal\");\n}\n</code></pre>\n\n<p>The constructor: </p>\n\n<pre><code>mainui::mainui(QWidget *parent) : QMainWindow(parent), ui(new Ui::mainui)\n{\n    ui-&gt;setupUi(this);\n}\n</code></pre>\n\n<p>The connector:\n<a href=\"https://i.stack.imgur.com/5YJg5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5YJg5.png\" alt=\"enter image description here\"></a></p>\n\n<p>And run result:\n<a href=\"https://i.stack.imgur.com/vioXc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vioXc.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["java", "android", "c++", "java-native-interface"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1556120352, "post_id": 55833765, "comment_id": 98332230, "body": "Check that the apk file is really in <code>&#47;system&#47;app&#47;AA&#47;AA.apk</code> and not some other location."}, {"owner": {"reputation": 193, "user_id": 1584247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43e791aab0867e48ffcaf7b6a1e4e6d8?s=128&d=identicon&r=PG", "display_name": "x64", "link": "https://stackoverflow.com/users/1584247/x64"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1556204558, "post_id": 55833765, "comment_id": 98366459, "body": "yes, the apk is there in that location"}], "answers": [{"tags": [], "owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "is_accepted": false, "score": 1, "last_activity_date": 1556130814, "creation_date": 1556130814, "answer_id": 55836509, "question_id": 55833765, "link": "https://stackoverflow.com/questions/55833765/jni-getmethodid-called-with-pending-exception-java-lang-classnotfoundexception/55836509#55836509", "title": "JNI GetMethodID called with pending exception java.lang.ClassNotFoundException", "body": "<p>The system apps must keep their native libraries in /system/lib or /vendor/lib directory. In some cases, the native library may be embedded in the APK file, but then the app manifest must declare  </p>\n\n<pre><code>android:extractNativeLibs=\u201dfalse\u201d \n</code></pre>\n"}], "owner": {"reputation": 193, "user_id": 1584247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43e791aab0867e48ffcaf7b6a1e4e6d8?s=128&d=identicon&r=PG", "display_name": "x64", "link": "https://stackoverflow.com/users/1584247/x64"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 706, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1614847918, "creation_date": 1556120032, "last_edit_date": 1556120541, "question_id": 55833765, "link": "https://stackoverflow.com/questions/55833765/jni-getmethodid-called-with-pending-exception-java-lang-classnotfoundexception", "title": "JNI GetMethodID called with pending exception java.lang.ClassNotFoundException", "body": "<p>I am developing an android library (.aar) which has mainly native code and bit of java code mainly to provide java interface to the application code.</p>\n\n<p>I have a demo app which utilizes the library and everything works fine.</p>\n\n<p>Now I am giving this library someone who is supposed to be an OEM. They are developing a (system) app which utilizes this library. In their case the native library throw exception in the following code.</p>\n\n<pre><code>shapeClass = env-&gt;FindClass(\"xx/yy/zz/Shape\");\naddMethod = env-&gt;GetMethodID(shapeClass, \"addPoint\", \"(FF)V\");\n</code></pre>\n\n<p>This is the error they get</p>\n\n<pre><code>JNI DETECTED ERROR IN APPLICATION: JNI GetMethodID called with pending exception java.lang.ClassNotFoundException: Didn't find class \"xx.yy.zz.Shape\" on path: DexPathList[[zip file \"/system/app/AA/AA.apk\"],nativeLibraryDirectories=[/system/app/AA/lib/arm, /system/app/AA/AA.apk!/lib/armeabi-v7a, /system/lib, /vendor/lib, /system/lib, /vendor/lib]]\n</code></pre>\n\n<p>I googled and did not find much on what differs in the system app. How a system app environment is different than a regular app environment? </p>\n\n<p>Please note that above two lines of the code are called from the java wrapper code through JNI interface. So there is no chance that the (Shape) class is not loaded because Shape class and invoking class are in the same library (same .aar file). </p>\n"}, {"tags": ["c++", "mbed"], "comments": [{"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 2, "creation_date": 1556120457, "post_id": 55833712, "comment_id": 98332290, "body": "My guess (after eye-debugging): When you call <code>Keypad()</code> the 2nd time, this becomes effective immediately: <code>if (Read == -1) { return Num1; }</code>. That should teach you that <b>Global variables are evil.</b> (often). Instead, of <code>while (1) {</code> you could do <code>for (int Read = 0; Read &gt;= 0;) {</code> (i.e. using a local variable) and move the <code>return Num;</code> after the loop. (And, think about what other global variable could be eliminated easily.)"}], "answers": [{"tags": [], "owner": {"reputation": 182, "user_id": 2045380, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHkVI.jpg?s=128&g=1", "display_name": "Bobby Tables", "link": "https://stackoverflow.com/users/2045380/bobby-tables"}, "is_accepted": false, "score": 1, "last_activity_date": 1556120453, "creation_date": 1556120453, "answer_id": 55833875, "question_id": 55833712, "link": "https://stackoverflow.com/questions/55833712/uncontrolled-looping-and-function-skipping-in-c/55833875#55833875", "title": "Uncontrolled looping and function Skipping in C++?", "body": "<p>When <code>Read</code> is set to -1 during the first loop through Keypad(), it's still -1 when you enter <code>Keypad()</code> again, thus returning instantly. </p>\n\n<p>Using some space to echo @Scheff on the importance of scoping variables according to their expected lifetimes and thus minimizing global variables wherever possible. </p>\n"}], "owner": {"reputation": 3, "user_id": 10552428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e4bac285f06ad2f90fa76e9186f93e6?s=128&d=identicon&r=PG&f=1", "display_name": "mac", "link": "https://stackoverflow.com/users/10552428/mac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556211110, "creation_date": 1556119824, "last_edit_date": 1556211110, "question_id": 55833712, "link": "https://stackoverflow.com/questions/55833712/uncontrolled-looping-and-function-skipping-in-c", "title": "Uncontrolled looping and function Skipping in C++?", "body": "<p>I am trying to read two user inputted numbers from a keypad onto a discovery board. I have the code working for reading the first number in but for some reason when it hits the same Keypad(); function for the second time it doesn't appear to be calling the function up to allow an input instead it skips over the scan and prints the lines under it and if you press the button to start over it is random where the program picks up, any ideas what could be causing this. I am compiling on mbeds online Ide. below is the code as well.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n#include \"mbed.h\"\nDigitalIn columns[3] = {PB_6, PB_7, PD_0};  // Columns for digital input\n\nDigitalOut rows[4] = {PA_5, PA_1, PA_2, PA_3};  // rows for digital output\n\nDigitalIn startButton(USER_BUTTON);\n\nDigitalOut led1(LED1);  // reference LED\nint numpad[4][3] = {{1, 2, 3}, {4, 5, 6}, {7, 8, 9}, {-2, 0, -1}};  // keypad\n\nint Total();\nint Keypad();\nint c = 0;\nint Read;\nint Num1 = 0;\nint SelectOp();\nint Oper;\n\nint main() {\n  while (1) {\n    if (startButton == 1) {\n      printf(\"%s\\n\\rInput First Number\\n\\r\");\n      wait(.5);\n      Keypad();\n      int First = Num1;\n      Num1 = 0;\n\n      printf(\"%s\\n\\r Your first number is \");\n      printf(\"%i\", First);\n      printf(\"%s\\n\\r Input your second number\\n\\r\");\n      wait(.5);\n      Keypad();  // this seems to be getting skipped\n      int Second = Num1;\n      Num1 = 0;\n\n      printf(\"%s\\n\\r Your Second number is \");\n      printf(\"%i\", Second);\n\n      printf(\"%s\\n\\rSelect Operator: 1(+), 2(-), 3(*), 4(/)\");\n\n      Keypad();\n\n      Oper = Num1;\n    }\n  }\n}\n\nint Keypad() {\n  columns[0].mode(PullUp);\n  columns[1].mode(PullUp);\n  columns[2].mode(PullUp);\n\n  while (1) {\n    if (Read == -1) {\n      return Num1;\n    }\n\n    for (int i = 0; i &lt; 4; i++) {\n      rows[0] = 1;\n      rows[1] = 1;\n      rows[2] = 1;\n      rows[3] = 1;\n\n      rows[i] = 0;\n      wait(0.01);\n\n      for (int j = 0; j &lt; 3; j++) {\n        if (columns[j] == 0) {\n          Read = numpad[i][j];\n\n          Total();\n\n          c++;\n\n          if (c == 5) {\n            c = 0;\n          }\n\n          wait(0.005);\n          while (columns[j] == 0)\n            ;\n        }\n      }\n    }\n  }\n}\n\nint Total() {\n  if (Read &gt;= 0) {\n    Num1 *= 10;\n    Num1 += Read;\n    printf(\"%i\\n\\r\", Num1);\n\n  } else {\n    return Num1;\n  }\n  return Num1;\n}\n</code></pre>\n"}, {"tags": ["c++", "class", "pointers", "linked-list", "operator-overloading"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1556120021, "post_id": 55833690, "comment_id": 98332026, "body": "Please include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Currently it is not clear what is the problem/ what are you asking"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1556120189, "post_id": 55833690, "comment_id": 98332115, "body": "I can guess what is the problem... <code>warehouse.head</code> is a pointer, but you want to read the object, hence it should be <code>is &gt;&gt; *(warehouse.head)</code>, though I am almost certain that this will be wrong also (for different reasons). You really need to show your code to get some help"}, {"owner": {"reputation": 133, "user_id": 11389008, "user_type": "registered", "profile_image": "https://graph.facebook.com/2412378275448748/picture?type=large", "display_name": "Paul Anthony Morillo", "link": "https://stackoverflow.com/users/11389008/paul-anthony-morillo"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1556122684, "post_id": 55833690, "comment_id": 98333525, "body": "@user463035818 i added my main file as well, Im also recieving an error saying that head is private which it is but im using a friend class which should beable to access it."}, {"owner": {"reputation": 133, "user_id": 11389008, "user_type": "registered", "profile_image": "https://graph.facebook.com/2412378275448748/picture?type=large", "display_name": "Paul Anthony Morillo", "link": "https://stackoverflow.com/users/11389008/paul-anthony-morillo"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1556122853, "post_id": 55833690, "comment_id": 98333613, "body": "@user463035818 i also get an error from my main file saying:                             error: no match for \u2018operator&gt;&gt;\u2019 (operand types are \u2018std::ifstream {aka std::basic_ifstream&lt;char&gt;}\u2019 and \u2018Warehouse\u2019)     is&gt;&gt;warehouse;     ~~^~~~~~~~~~~"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1556127515, "post_id": 55833690, "comment_id": 98335822, "body": "Please read about <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and provide one and please do include the error message in the question. I would have to do lots of guessing work to reproduce the error you report with the code fragments you provide"}, {"owner": {"reputation": 133, "user_id": 11389008, "user_type": "registered", "profile_image": "https://graph.facebook.com/2412378275448748/picture?type=large", "display_name": "Paul Anthony Morillo", "link": "https://stackoverflow.com/users/11389008/paul-anthony-morillo"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1556130188, "post_id": 55833690, "comment_id": 98336995, "body": "@user463035818 i should have posted my warehouse.cpp file, i was looking at it and in my implementation, i wrote friend istream&amp; operator &gt;&gt; (ostream&amp; os, const Warehouse&amp; warehouse);  instead of friend istream&amp; operator &gt;&gt; (istream&amp; os, const Warehouse&amp; warehouse);"}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 1, "last_activity_date": 1556130038, "last_edit_date": 1556130038, "creation_date": 1556129682, "answer_id": 55836245, "question_id": 55833690, "link": "https://stackoverflow.com/questions/55833690/need-to-overload-operator-with-book-head-variable-but-doesnt-work/55836245#55836245", "title": "Need to overload operator with Book* head variable but doesnt work", "body": "<p>The code you have shown is fine.  The code you have not shown is where the problem is.</p>\n\n<p>In a linked list, its nodes need to be allocated dynamically.  I would suggest something like the following for your stream operator implementations:</p>\n\n<p>book.h</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass Book\n{\npublic:\n    // fields as needed ...\n\n    friend std::istream&amp; operator &gt;&gt; (std::istream&amp; is, Book&amp; book);\n    friend std::ostream&amp; operator &lt;&lt; (std::ostream&amp; os, const Book&amp; book);\n};\n</code></pre>\n\n<p>book.cpp</p>\n\n<pre><code>#include \"book.h\"\n\nstd::istream&amp; operator &gt;&gt; (std::istream&amp; is, Book&amp; book)\n{\n    // read book fields as needed...\n    return is;\n}\n\nstd::ostream&amp; operator &lt;&lt; (std::ostream&amp; os, const Book&amp; book)\n{\n    // write book fields as needed...\n    return os;\n}\n</code></pre>\n\n<p>warehouse.h</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"book.h\"\n\nclass Warehouse\n{\nprivate:\n    struct ListItem\n    {\n        ListItem* next = nullptr;\n        Book book;\n\n        ListItem(const Book &amp;b) : book(b) {}\n    };\n\n    ListItem *head = nullptr;\n    int bookCount = 0;\n\npublic:\n    // fields as needed...\n\n    void clear();\n    // other methods as needed...\n\n    friend std::istream&amp; operator &gt;&gt; (std::istream&amp; is, Warehouse&amp; warehouse);\n    friend std::ostream&amp; operator &lt;&lt; (std::ostream&amp; os, const Warehouse&amp; warehouse)\n};\n</code></pre>\n\n<p>warehouse.cpp</p>\n\n<pre><code>#include \"warehouse.h\"\n\nvoid Warehouse::clear()\n{\n    ListItem *item = head;\n    head = nullptr;\n    bookCount = 0;\n\n    while (item)\n    {\n        ListItem *next = item-&gt;next;\n        delete item;\n        item = next;\n    }\n}\n\nstd::istream&amp; operator &gt;&gt; (std::istream&amp; is, Warehouse&amp; warehouse)\n{\n    warehouse.clear();\n\n    int count;\n    if (is &gt;&gt; count)\n    {\n        Warehouse::ListItem **item = &amp;(warehouse.head);\n\n        Book book;\n        for (int i = 0; i &lt; count; ++i)\n        {\n            if (!(is &gt;&gt; book)) return;\n            *item = new Warehouse::ListItem(book);\n            warehouse.bookCount++;\n            item = &amp;(item-&gt;next);\n        }\n    }\n\n    return is;\n}\n\nstd::ostream&amp; operator &lt;&lt; (std::ostream&amp; os, const Warehouse&amp; warehouse)\n{\n    os &lt;&lt; warehouse.bookCount;\n\n    Warehouse::ListItem *item = warehouse.head;\n    for(int i = 0; i &lt; warehouse.bookCount; ++i)\n    {\n        os &lt;&lt; item-&gt;book;\n        item = item-&gt;next;\n    }\n}\n</code></pre>\n\n<p>That being said, <code>Warehouse</code> can be simplified a bit by using <a href=\"https://en.cppreference.com/w/cpp/container/list\" rel=\"nofollow noreferrer\"><code>std::list</code></a> instead of a manual linked-list implementation:</p>\n\n<p>warehouse.h</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;list&gt;\n#include \"book.h\"\n\nclass Warehouse\n{\nprivate:\n    std::list&lt;Book&gt; books;\n\npublic:\n    // fields as needed...\n\n    void clear();\n    // other methods as needed...\n\n    friend std::istream&amp; operator &gt;&gt; (std::istream&amp; is, Warehouse&amp; warehouse);\n    friend std::ostream&amp; operator &lt;&lt; (std::ostream&amp; os, const Warehouse&amp; warehouse)\n};\n</code></pre>\n\n<p>warehouse.cpp</p>\n\n<pre><code>void Warehouse::clear()\n{\n    books.clear();\n}\n\nstd::istream&amp; operator &gt;&gt; (std::istream&amp; is, Warehouse&amp; warehouse)\n{\n    warehouse.clear();\n\n    std::size_t count;\n    if (is &gt;&gt; count)\n    {\n        Book book;\n        for (std::size_t i = 0; i &lt; count; ++i)\n        {\n            if (!(is &gt;&gt; book)) return;\n            warehouse.books.push_back(book);\n        }\n    }\n\n    return is;\n}\n\nstd::ostream&amp; operator &lt;&lt; (std::ostream&amp; os, const Warehouse&amp; warehouse)\n{\n    os &lt;&lt; warehouse.books.size();\n    for(const Book &amp;book : warehouse.books)\n        os &lt;&lt; book;\n}\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 11389008, "user_type": "registered", "profile_image": "https://graph.facebook.com/2412378275448748/picture?type=large", "display_name": "Paul Anthony Morillo", "link": "https://stackoverflow.com/users/11389008/paul-anthony-morillo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 55836245, "answer_count": 1, "score": 0, "last_activity_date": 1556130038, "creation_date": 1556119752, "last_edit_date": 1556127735, "question_id": 55833690, "link": "https://stackoverflow.com/questions/55833690/need-to-overload-operator-with-book-head-variable-but-doesnt-work", "title": "Need to overload operator with Book* head variable but doesnt work", "body": "<p>I'm currently working on a project that has a couple of parts to it. I have <code>book.h</code> and <code>Warehouse.h</code> files. The <code>book</code> stores information about a book while the <code>warehouse</code> holds the books and number of books. I am using a linked list and pointers for this project.</p>\n\n<p>These are my <code>book</code> stream operators:</p>\n\n<pre><code>friend istream&amp; operator &gt;&gt; (istream&amp; is, Book&amp;book);\nfriend ostream&amp; operator &lt;&lt; (ostream&amp; os, const Book&amp;book);\n</code></pre>\n\n<p>These are my <code>warehouse</code> stream operators:</p>\n\n<pre><code>friend istream&amp; operator &gt;&gt; (istream&amp; is, Warehouse&amp; warehouse);\nfriend ostream&amp; operator &lt;&lt; (ostream&amp; os, const Warehouse&amp; warehouse)\n</code></pre>\n\n<p>My <code>warehouse</code> private variables:</p>\n\n<pre><code>private:\n    Book* head;\n    int bookCount;\n</code></pre>\n\n<p>In my previous project, we used arrays and I would just put <code>is &gt;&gt; warehouse.book[numofbooks]</code> for the <code>istream</code> overload in the <code>warehouse.cpp</code>.</p>\n\n<p>For this project, I tried doing <code>is &gt;&gt; warehouse.head</code> but I'm not sure that is correct. </p>\n\n<p>My main file looks like:</p>\n\n<pre><code>#include \"Book.h\"\n#include \"Warehouse.h\"\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\n\nint main(int argc, char* argv[])\n{\n  bool found;\n  Warehouse warehouse;\n  Book book;\n  string filename=argv[1];  //assigns the filename from console to a string\n\n  ifstream is;\n  is.open(filename);\n\n  if(is.fail())       //check if the file was opened\n  {\n    cout&lt;&lt; \"Unable to read file: \" &lt;&lt; filename&lt;&lt; endl;    //if not opened, tell user\n    return -1;\n  }\n\n  is &gt;&gt; warehouse;\n\n  is.close();\n}\n</code></pre>\n"}, {"tags": ["c++", "g++", "c++-concepts", "c++20"], "answers": [{"comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1556120637, "post_id": 55833719, "comment_id": 98332379, "body": "Thank you for your remark about the need for <code>std::forward</code>."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 13, "last_activity_date": 1556128305, "last_edit_date": 1556128305, "creation_date": 1556119855, "answer_id": 55833719, "question_id": 55833660, "link": "https://stackoverflow.com/questions/55833660/is-gcc-wrongly-evaluating-stddeclval-in-this-concept-definition/55833719#55833719", "title": "Is gcc wrongly evaluating std::declval in this concept definition?", "body": "<blockquote>\n  <p>Is it wrong to reject this code? </p>\n</blockquote>\n\n<p>Yes, concepts are never evaluated, as evidenced in the quote you're citing. This is <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=68781\" rel=\"noreferrer\">gcc bug 68781</a> and <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=82171\" rel=\"noreferrer\">gcc bug 82171</a>.</p>\n\n<p>Note that there's no reason to use <code>declval</code> within concepts. This is more straightforward:</p>\n\n<pre><code>template&lt;class Func, class Ret, class... Args&gt;\nconcept InvokableR = requires(Func&amp;&amp; f, Args&amp;&amp;... args) {\n    { f(std::forward&lt;Args&gt;(args)...) } -&gt; Ret;\n};\n</code></pre>\n\n<p><code>declval</code> exists because you need some expression of some type and you can't just write <code>T()</code> because that requires a default constructor. Concepts give you that ability as a first-class language feature. Still need the <code>forward</code> though.</p>\n"}], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "accepted_answer_id": 55833719, "answer_count": 1, "score": 7, "last_activity_date": 1556128305, "creation_date": 1556119648, "last_edit_date": 1592644375, "question_id": 55833660, "link": "https://stackoverflow.com/questions/55833660/is-gcc-wrongly-evaluating-stddeclval-in-this-concept-definition", "title": "Is gcc wrongly evaluating std::declval in this concept definition?", "body": "<p>In this concept definition:</p>\n<pre><code>#include &lt;utility&gt;\n\ntemplate&lt;class Func, class Ret, class... Args&gt;\nconcept Invokable = requires(Func f) {\n    { f(std::declval&lt;Args&gt;()...) } -&gt; Ret;\n};\n</code></pre>\n<p>when instantiated like this:</p>\n<pre><code>static_assert(Invokable&lt;decltype([](int){}), void, int&gt;);\n</code></pre>\n<p>gcc-9.0.1 (trunk) dumps (well, the Standard Library implementation to be precise):</p>\n<blockquote>\n<pre><code>$ g++ -O2 -std=c++2a -fconcepts -Wall -Wextra -Werror -c tu1.cpp\nerror: static assertion failed: declval() must not be used!\n2204 |       static_assert(__declval_protector&lt;_Tp&gt;::__stop,\n     |                                               ^~~~~~\n</code></pre>\n</blockquote>\n<p>demo: <a href=\"https://godbolt.org/z/D0ygU4\" rel=\"noreferrer\">https://godbolt.org/z/D0ygU4</a></p>\n<p><strong>Is it wrong to reject this code?</strong> If not, what did I do wrong? If yes, where should one report this bug?</p>\n<hr />\n<h2>Notes</h2>\n<h3>This is accepted</h3>\n<pre><code>template&lt;auto f, class... Args&gt;\nconstexpr auto size_of_return_type = sizeof(f(std::declval&lt;Args&gt;()...));\n</code></pre>\n<p>when instantiated like so:</p>\n<pre><code>static_assert(sizeof(int) == size_of_return_type&lt;[](int){ return 0; }, int&gt;);\n</code></pre>\n<p>Demo: <a href=\"https://godbolt.org/z/gYGk8U\" rel=\"noreferrer\">https://godbolt.org/z/gYGk8U</a></p>\n<h3>Latest C++2a draft states:</h3>\n<blockquote>\n<p><a href=\"http://eel.is/c++draft/expr.prim.req#2\" rel=\"noreferrer\"><code>[expr.prim.req]/2</code></a>\nA requires-expression is a prvalue of type bool whose value is described below. Expressions appearing within a requirement-body are unevaluated operands.</p>\n</blockquote>\n"}, {"tags": ["c++", "return", "code-cleanup"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 13, "creation_date": 1556119663, "post_id": 55833630, "comment_id": 98331830, "body": "<a href=\"https://en.wikipedia.org/wiki/Resource_acquisition_is_initialization\" rel=\"nofollow noreferrer\">RAII</a>"}, {"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1556119671, "post_id": 55833630, "comment_id": 98331837, "body": "This scenario is one of the main reasons modern exception handling has become popular. Your main choices are gotos, or copy the cleanup code - or RAII, as @Nathan suggests (which is really implicit exception handling)."}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 5, "creation_date": 1556119740, "post_id": 55833630, "comment_id": 98331878, "body": "Use <a href=\"https://en.wikipedia.org/wiki/Resource_acquisition_is_initialization\" rel=\"nofollow noreferrer\">RAII</a>! It&#39;s one of the best things about C++ and you would benefit greatly from it. You can wrap your resources in classes or helpers like <code>unique_ptr</code>s that do the cleanup work automatically and seamlessly. In a sense, you can forget about cleanup entirely using RAII."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 2, "creation_date": 1556119880, "post_id": 55833630, "comment_id": 98331958, "body": "You can use <code>std::unique_ptr</code> with custom deleter"}, {"owner": {"reputation": 1025, "user_id": 3971417, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8de1f3c62ed8673871bcc6b770f5346c?s=128&d=identicon&r=PG&f=1", "display_name": "sergiu reznicencu", "link": "https://stackoverflow.com/users/3971417/sergiu-reznicencu"}, "edited": false, "score": 1, "creation_date": 1556120062, "post_id": 55833630, "comment_id": 98332047, "body": "Nice ideea. What if I &quot;send&quot; all the data to the instance of a class and implement all the cleaning in the destructor(this is almost what unique_ptr does)? A long way...but better than goto. I will also check RAII"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 2, "creation_date": 1556120470, "post_id": 55833630, "comment_id": 98332297, "body": "&quot;I will also check RAII&quot; using <code>std::unique_ptr</code> or custom class is actually RAII, just using <code>std::unique_ptr</code> is simpler and cleaner as it requires less code written and that class disabled possible ways of leaking the resource it manages"}], "owner": {"reputation": 1025, "user_id": 3971417, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8de1f3c62ed8673871bcc6b770f5346c?s=128&d=identicon&r=PG&f=1", "display_name": "sergiu reznicencu", "link": "https://stackoverflow.com/users/3971417/sergiu-reznicencu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 2, "answer_count": 0, "score": 2, "last_activity_date": 1556120541, "creation_date": 1556119555, "last_edit_date": 1556119779, "question_id": 55833630, "link": "https://stackoverflow.com/questions/55833630/clean-memory-on-multiple-returns-function-c", "title": "Clean memory on multiple returns - Function C++", "body": "<p>I am using a function with multiple return paths. But on every one of them I need to clean the memory,release some objects,etc. I have seen on the internet some methods but I don't think they are \"standard\" or even fail-proof (<code>goto</code> statements). I believe this is a common situation and it may prove useful for others with same the same problem.</p>\n\n<p>Here's an example:</p>\n\n<pre><code>//Opening many handles//\n//.....\n\n//The actual code\nvoid *imgBytes;\nbmp = CreateDIBSection(memHDC, &amp;bmpInfo, DIB_RGB_COLORS, &amp;imgBytes, NULL, NULL);\nHGDIOBJ oldSelect = SelectObject(memHDC, bmp);\n\n\nBitBlt(memHDC, 0, 0, screenW, rowHeight, screen, 0, yOffset, SRCCOPY);\nGdiFlush();\n\n//Memory leaks\nif(!condition1) return false;\nif(!condition2) return false;\nif(!condition3) return false;\nif(!condition4) return false;\nif(!condition5) return false;\nif(!condition6) return false;\n\n\n//Code to be executed on every return\nSelectObject(memHDC, oldSelect);\nDeleteDC(memHDC);\nDeleteObject(bmp);\nReleaseDC(NULL, screen);\n</code></pre>\n\n<p>One solution to this problem could be just to insert every <code>if</code> inside another(but I doesn't solve the problem):</p>\n\n<pre><code>if(condition1){\n    if(condition1){\n        if(condition1){\n            if(condition1){\n                //continue execution...\n                return true;\n            }\n        }\n    }\n}\n\n\n//One of the conditions above failed. Clean code\nSelectObject(memHDC, oldSelect);\nDeleteDC(memHDC);\nDeleteObject(bmp);\nReleaseDC(NULL, screen);\n\nreturn false;\n</code></pre>\n\n<p>How can I solve this problem but without <code>goto's</code> .</p>\n"}, {"tags": ["c++", "eclipse", "gtk", "solaris"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1556119022, "post_id": 55833388, "comment_id": 98331425, "body": "The warning seems pretty clear. Upgrade your version of GTK to at least 2.18.0"}, {"owner": {"reputation": 913, "user_id": 360645, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/492a193e46645e1df7a4957bd049b9e4?s=128&d=identicon&r=PG", "display_name": "bsobaid", "link": "https://stackoverflow.com/users/360645/bsobaid"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1556121389, "post_id": 55833388, "comment_id": 98332822, "body": "what a pain. I am not a root. downloaded to my home but the dependencies (glib, atk, pange, cairo) are also old. compiling from non-default path also requires a few changes."}, {"owner": {"reputation": 3921, "user_id": 46220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc77d5a13726cfd5528da0f809153956?s=128&d=identicon&r=PG", "display_name": "alanc", "link": "https://stackoverflow.com/users/46220/alanc"}, "edited": false, "score": 1, "creation_date": 1556142008, "post_id": 55833388, "comment_id": 98341772, "body": "Solaris 10 was released in 2005, and is now in Extended Support, past the end of the primary support life, so all the dependencies are going to be old.   You&#39;ll find life much easier on a Solaris 11 based release."}], "owner": {"reputation": 913, "user_id": 360645, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/492a193e46645e1df7a4957bd049b9e4?s=128&d=identicon&r=PG", "display_name": "bsobaid", "link": "https://stackoverflow.com/users/360645/bsobaid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556118801, "creation_date": 1556118801, "question_id": 55833388, "link": "https://stackoverflow.com/questions/55833388/eclipse-for-c-development-on-sun-solaris-10-getting-gtk-warning", "title": "eclipse for c++ development on sun solaris 10. getting gtk-warning", "body": "<p>I want to do c++ development on sun solaris 10.0 machine. I downloaded eclipse for solaris 10 but when I run it nothing popsup and I get warnings on command line. How do I bring up eclipse IDE? also will I need any plugin in my eclipse.ini to enable c++ development? there are a whole lot of files under the /plugins directory. I am very new to unix and solaris os.</p>\n\n<p><strong>Here is my environment</strong>\ncat /etc/release\n                     Solaris 10 10/09 s10x_u8wos_08a X86\n           Copyright 2009 Sun Microsystems, Inc.  All Rights Reserved.</p>\n\n<p>uname -a\nSunOS 5.10 Generic_147441-25 i86pc i386 i86pc</p>\n\n<p><strong>This is the eclipse I downloaded</strong>\n<a href=\"http://www.eclipse.org/downloads/download.php?file=/eclipse/downloads/drops4/R-4.6-201606061100/eclipse-SDK-4.6-solaris-gtk-x86_64.zip\" rel=\"nofollow noreferrer\">http://www.eclipse.org/downloads/download.php?file=/eclipse/downloads/drops4/R-4.6-201606061100/eclipse-SDK-4.6-solaris-gtk-x86_64.zip</a></p>\n\n<p><strong>This is the java version</strong>\njava version \"1.8.0_191\"\nJava(TM) SE Runtime Environment (build 1.8.0_191-b12)\nJava HotSpot(TM) 64-Bit Server VM (build 25.191-b12, mixed mode)</p>\n\n<p><strong>This is the warning message</strong>\n./eclipse\nEclipse:\nGTK+ Version Check\n***WARNING: Gtk+ version too old (micro mismatch)\n***WARNING: SWT requires GTK 2.18.0\n***WARNING: Detected: 2.4.9</p>\n\n<p>(Eclipse:3218): Gdk-WARNING **: gdkdrawable-x11.c:994 drawable is not a pixmap or window</p>\n\n<p>(Eclipse:3218): Gtk-WARNING **: gtkwidget.c:7030: widget class <code>GtkLabel' has no property named</code>link-color'</p>\n\n<p>I am using cygwin and running xwindows plugin to support popup windows.</p>\n\n<p><strong>heres the downloaded eclipse.in</strong>i. I have not made any changes to it.</p>\n\n<p>vi eclipse.ini</p>\n\n<pre><code>\"eclipse.ini\" 13 lines, 320 characters\n-startup\nplugins/org.eclipse.equinox.launcher_1.3.200.v20160318-1642.jar\n--launcher.library\nplugins/org.eclipse.equinox.launcher.gtk.solaris.x86_64_1.1.300.v20160518-1444\n-showsplash\norg.eclipse.platform\n--launcher.defaultAction\nopenFile\n--launcher.appendVmargs\n-vmargs\n-Dosgi.requiredJavaVersion=1.8\n-Xms256m\n-Xmx1024m\n</code></pre>\n\n<p>thanks</p>\n"}, {"tags": ["c++", "build", "cmake", "cmake-gui"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1556119067, "post_id": 55833338, "comment_id": 98331458, "body": "You create scripts in scripting languages like Python, Perl etc. C++ is not one."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 4, "creation_date": 1556119842, "post_id": 55833338, "comment_id": 98331937, "body": "On Windows consider using the builtin PowerShell scripting ability (or failing that batch files)."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1556121218, "post_id": 55833338, "comment_id": 98332728, "body": "I expect that your problem is you called <code>system()</code> more than 1 time in your <code>c++</code> code or did not escape your strings properly. Although theses are just guesses since you did not provide any code."}, {"owner": {"reputation": 2653, "user_id": 1028434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a340b89a8b4efdb83da69d6cc93caac7?s=128&d=identicon&r=PG", "display_name": "fdk1342", "link": "https://stackoverflow.com/users/1028434/fdk1342"}, "edited": false, "score": 0, "creation_date": 1556125350, "post_id": 55833338, "comment_id": 98334834, "body": "If you are using Git for Windows just use a bash script.  There are much easier ways than using C++."}, {"owner": {"reputation": 21, "user_id": 11405845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afd748e6af17cc705f196eb75833d9b4?s=128&d=identicon&r=PG&f=1", "display_name": "Abdo", "link": "https://stackoverflow.com/users/11405845/abdo"}, "edited": false, "score": 0, "creation_date": 1556139408, "post_id": 55833338, "comment_id": 98340860, "body": "Thanks for those comments. The problem is that I need to do it in C++, since there is some work is already done in C++, the missing part is to automate the CMake build using C++ script."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1556139955, "post_id": 55833338, "comment_id": 98341085, "body": "Then show what you have tried and failed. Remember we generally don&#39;t write code for you at StackOverflow however we will attempt to fix your broken code. Please edit your question and add a minimal example of your attempt: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 21, "user_id": 11405845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afd748e6af17cc705f196eb75833d9b4?s=128&d=identicon&r=PG&f=1", "display_name": "Abdo", "link": "https://stackoverflow.com/users/11405845/abdo"}, "edited": false, "score": 0, "creation_date": 1556207724, "post_id": 55833338, "comment_id": 98368272, "body": "You are right. However, I have no clue, how I can call the CMake from C++ Code to build a CMake project similar to what we are doing using the terminal of Cygwin or CMake Gui. I did an intensive search on the web, but I did not find a hint to do it. You may ask, we I didnot include it to the top CMakelists.txt, please look to the question, I re-edit it."}, {"owner": {"reputation": 2653, "user_id": 1028434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a340b89a8b4efdb83da69d6cc93caac7?s=128&d=identicon&r=PG", "display_name": "fdk1342", "link": "https://stackoverflow.com/users/1028434/fdk1342"}, "edited": false, "score": 0, "creation_date": 1556237607, "post_id": 55833338, "comment_id": 98379351, "body": "There are probably a few ways to run an executable from a C++ program.  Once such method is: <a href=\"https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/system-wsystem?view=vs-2019\" rel=\"nofollow noreferrer\">system()</a>"}, {"owner": {"reputation": 21, "user_id": 11405845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afd748e6af17cc705f196eb75833d9b4?s=128&d=identicon&r=PG&f=1", "display_name": "Abdo", "link": "https://stackoverflow.com/users/11405845/abdo"}, "reply_to_user": {"reputation": 2653, "user_id": 1028434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a340b89a8b4efdb83da69d6cc93caac7?s=128&d=identicon&r=PG", "display_name": "fdk1342", "link": "https://stackoverflow.com/users/1028434/fdk1342"}, "edited": false, "score": 0, "creation_date": 1556286694, "post_id": 55833338, "comment_id": 98398169, "body": "Thanks @Fred for the hint to use <a href=\"https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/system-wsystem?view=vs-2019\" rel=\"nofollow noreferrer\">system</a> . This is what I am looking for.  Drescherjm has already mentioned to it, but I did not get his comment, since I had no information about it."}, {"owner": {"reputation": 2653, "user_id": 1028434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a340b89a8b4efdb83da69d6cc93caac7?s=128&d=identicon&r=PG", "display_name": "fdk1342", "link": "https://stackoverflow.com/users/1028434/fdk1342"}, "edited": false, "score": 0, "creation_date": 1556302347, "post_id": 55833338, "comment_id": 98405798, "body": "Note that newer versions of cmake support <code>cmake -S path_to_src -B path_to_bld</code>."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 11405845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afd748e6af17cc705f196eb75833d9b4?s=128&d=identicon&r=PG&f=1", "display_name": "Abdo", "link": "https://stackoverflow.com/users/11405845/abdo"}, "is_accepted": false, "score": 1, "last_activity_date": 1556519797, "creation_date": 1556519797, "answer_id": 55898126, "question_id": 55833338, "link": "https://stackoverflow.com/questions/55833338/automate-cmake-build-using-c-script/55898126#55898126", "title": "Automate CMake build using C++ script", "body": "<p>Thanks to all of you for the comments. The answer has been given by @Fred. To run cmake from C++ script, simply the system() can be used such as: System(cmake -S path_to_src -B path_to_bld). \nUseful link: <a href=\"https://faq.cprogramming.com/cgi-bin/smartfaq.cgi?id=1043284392&amp;answer=1044654269\" rel=\"nofollow noreferrer\">https://faq.cprogramming.com/cgi-bin/smartfaq.cgi?id=1043284392&amp;answer=1044654269</a></p>\n"}], "owner": {"reputation": 21, "user_id": 11405845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afd748e6af17cc705f196eb75833d9b4?s=128&d=identicon&r=PG&f=1", "display_name": "Abdo", "link": "https://stackoverflow.com/users/11405845/abdo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 700, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556519797, "creation_date": 1556118653, "last_edit_date": 1556207360, "question_id": 55833338, "link": "https://stackoverflow.com/questions/55833338/automate-cmake-build-using-c-script", "title": "Automate CMake build using C++ script", "body": "<p>I would like to automate the build of CMake using an MSVC C++ script instead of using CMake-gui to generate the build or CMake terminal or using the CMake integrated on MSVC 2017 by right click on the CMakeLists.txt to build it manually. Assume we have a project (name it: initialize) that includes the CMakeLists.txt and initialize.cpp, so my question is how I can convert these commands into a C++ code, assume build_initialize.cpp:</p>\n\n<ul>\n<li>mkdir build</li>\n<li>cd build/</li>\n<li>cmake ..</li>\n</ul>\n\n<p>So, the requirement of this tiny C++ code is to </p>\n\n<ul>\n<li>Set the path to this project</li>\n<li>Create build folder</li>\n<li>Run CMake</li>\n</ul>\n\n<p>At the end if I execute build_initialize.exe, the job is just to build the initialize.cpp using CMake. The goal is to test if the build is success or not as a test case within another project that has several test cases.</p>\n\n<p>You may ask, why I didnot include it to the top CMakelists.txt, and then build it from the beginning using CMake. If I am going to do that, I will get an executable file. As a result, by running the ctest of CMake, the initialize.exe will require a pace of hardware. This is not the goal. My goal is just to build it. If I run build_initialize.exe, just repeat the build using CMake without initialize.exe execution.</p>\n\n<p>Sorry, it could be very simple, but I lack the good experience either in C++ or CMake. Two days have been lost without success.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1556118126, "post_id": 55833140, "comment_id": 98330880, "body": "classes aren&#39;t objects.  You don&#39;t pass classes in a list, you pass objects.   Classes are descriptions, objects are the instances of the described thing."}, {"owner": {"reputation": 1228, "user_id": 995959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXPWG.png?s=128&g=1", "display_name": "gibertoni", "link": "https://stackoverflow.com/users/995959/gibertoni"}, "edited": false, "score": 0, "creation_date": 1556121276, "post_id": 55833140, "comment_id": 98332758, "body": "You are constructing Board and using initializer list to initialize members: rows, columns and shipslist and it is probably trying to copy the vector of Ships and its content?. But since Ship is an abstract class it is unable to copy its contents as is. Attempt to rewrite your constructor to simply copy each Ship as pointer/reference."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11394068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/963026301eb5cdaf58713890cbbc4c3c?s=128&d=identicon&r=PG&f=1", "display_name": "user11394068", "link": "https://stackoverflow.com/users/11394068/user11394068"}, "edited": false, "score": 0, "creation_date": 1556119712, "post_id": 55833238, "comment_id": 98331859, "body": "Thanks for the help. I have edited my post with the full code, incase it is then more obvious whats going wrong."}], "tags": [], "owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "is_accepted": false, "score": 1, "last_activity_date": 1556118336, "creation_date": 1556118336, "answer_id": 55833238, "question_id": 55833140, "link": "https://stackoverflow.com/questions/55833140/pass-a-list-of-objects-of-a-class-into-another-class-c/55833238#55833238", "title": "Pass a list of objects of a class into another class c++", "body": "<p>Not sure what your <code>ship.h</code> code is (you need to post everything), but creating some simple versions, it seems to work fine:</p>\n\n<pre><code>#include&lt;string&gt;\n#include&lt;iostream&gt;  // to use input and output streams\n#include&lt;memory&gt; // to use smart pointers\n#include&lt;vector&gt; // to use vectors\n\nstruct Ship{};\nstruct Destroyer : Ship {};\n\nclass Board{\nprivate:\n    std::unique_ptr&lt;char[]&gt; bdata; // to hold the data about the board\n    int rows, columns;\n    std::vector&lt;Ship*&gt; shipslist;\npublic:\n    Board(std::vector&lt;Ship*&gt; &amp;list); // Constructor\n    ~Board() {} // Destructor\n};\n\nBoard::Board(std::vector&lt;Ship*&gt; &amp;list) : rows{ 10 }, columns{ 10 }, shipslist{list}\n{\n    // irrelevant code here\n}\n\nint main()\n{\n    // Make vector of Ships\n    std::vector&lt;Ship*&gt; ships;\n    ships.push_back(new Destroyer()); // simplified constructor call\n    // (Destroyer is a derived class of the abstract base class \"Ship\")\n    Board BoardConfig(ships); // Here is where i want to create a board using a list of ships i have made\nreturn 0;\n}\n</code></pre>\n\n<p>live: <a href=\"https://godbolt.org/z/r0ye_U\" rel=\"nofollow noreferrer\">https://godbolt.org/z/r0ye_U</a></p>\n"}], "owner": {"reputation": 1, "user_id": 11394068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/963026301eb5cdaf58713890cbbc4c3c?s=128&d=identicon&r=PG&f=1", "display_name": "user11394068", "link": "https://stackoverflow.com/users/11394068/user11394068"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1556140932, "creation_date": 1556118067, "last_edit_date": 1556140932, "question_id": 55833140, "link": "https://stackoverflow.com/questions/55833140/pass-a-list-of-objects-of-a-class-into-another-class-c", "title": "Pass a list of objects of a class into another class c++", "body": "<p>Edit: problem fixed and just realised i may not want my full code online as may trigger my unis anti plaigurism even though its my own code... wont let me delete post</p>\n"}, {"tags": ["c++", "stl", "iterator", "decltype", "typename"], "comments": [{"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 4, "creation_date": 1556118070, "post_id": 55833089, "comment_id": 98330859, "body": "What do you want to be able to do with this number? Possibly you want <code>iterator_traits&lt;It&gt;::difference_type</code>? Given an iterator, in general you can&#39;t index into the container itself (it might be a container that doesn&#39;t support that, for example)."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1556118102, "post_id": 55833089, "comment_id": 98330869, "body": "You can get <code>difference_type</code>.  There isn&#39;t a way to get <code>size_type</code> from the container the iterator is from"}, {"owner": {"reputation": 13563, "user_id": 992490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac727873c5724326c84ed245faa9fe6c?s=128&d=identicon&r=PG", "display_name": "Marshall Clow", "link": "https://stackoverflow.com/users/992490/marshall-clow"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1556118173, "post_id": 55833089, "comment_id": 98330908, "body": "@NathanOliver - I think you mean &quot;Iterator&quot;, not &quot;container&quot;"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 13563, "user_id": 992490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac727873c5724326c84ed245faa9fe6c?s=128&d=identicon&r=PG", "display_name": "Marshall Clow", "link": "https://stackoverflow.com/users/992490/marshall-clow"}, "edited": false, "score": 1, "creation_date": 1556118220, "post_id": 55833089, "comment_id": 98330938, "body": "@MarshallClow No, I meant container.  <i>what I would like is something like above, but yielding the     // correct size_type for the container.</i>"}], "answers": [{"comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1556119769, "post_id": 55833225, "comment_id": 98331905, "body": "To be clear: When you say, &quot;an iterator need not have an associated container&quot;, do you mean &quot;...need not have an associated container <i>type</i>&quot; (because that&#39;s what the corresponding <code>size_type</code> is tied to), or a container <i>instance</i>?"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1556123709, "post_id": 55833225, "comment_id": 98334041, "body": "In that case, the reasoning in your last sentence is invalid. Even if the iterator has no associated container <i>instance</i>, it has an associated container <i>type</i>, and that container&#39;s <code>size_type</code> should be obtainable."}, {"owner": {"reputation": 13563, "user_id": 992490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac727873c5724326c84ed245faa9fe6c?s=128&d=identicon&r=PG", "display_name": "Marshall Clow", "link": "https://stackoverflow.com/users/992490/marshall-clow"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 2, "creation_date": 1556123838, "post_id": 55833225, "comment_id": 98334101, "body": "I disagree. <code>char *</code> is an iterator. What&#39;s the container type?  Might be <code>vector&lt;char&gt;</code>, might be <code>string</code>, might be <code>array&lt;char, N&gt;</code>, might be some user-defined container, might be a single <code>char</code>.  No way to tell."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1556125460, "post_id": 55833225, "comment_id": 98334888, "body": "@MaxLanghof -- <code>char ch; char* silly_iterator = &amp;ch;</code>. No container, no <code>size_type</code>. But a valid iterator. A more serious example would be <code>std::istream_iterator&lt;char&gt; iter(std::cin);</code>. Again, no container, no <code>size_type</code>. Containers are the most common way of creating a sequence that can be managed with iterators, but they are not the only way."}], "tags": [], "owner": {"reputation": 13563, "user_id": 992490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac727873c5724326c84ed245faa9fe6c?s=128&d=identicon&r=PG", "display_name": "Marshall Clow", "link": "https://stackoverflow.com/users/992490/marshall-clow"}, "is_accepted": true, "score": 4, "last_activity_date": 1556118292, "creation_date": 1556118292, "answer_id": 55833225, "question_id": 55833089, "link": "https://stackoverflow.com/questions/55833089/given-an-iterator-declare-an-index-with-correct-size-type/55833225#55833225", "title": "given an iterator, declare an index with correct size_type", "body": "<p>Elaborating on what @NathanOliver said:  Iterators don't have <code>size_type</code>s; they have a <code>difference_type</code>, which represents the distance between two iterators. Containers have a <code>size_type</code>.  </p>\n\n<p>An iterator need not have an associated container, so there's no way to get \"the container's <code>size_type</code>\" from just an iterator.</p>\n"}], "owner": {"reputation": 881, "user_id": 4452550, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0cffbe865edc0097799ecb052a1be842?s=128&d=identicon&r=PG&f=1", "display_name": "user52366", "link": "https://stackoverflow.com/users/4452550/user52366"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 55833225, "answer_count": 1, "score": 3, "last_activity_date": 1556118292, "creation_date": 1556117937, "question_id": 55833089, "link": "https://stackoverflow.com/questions/55833089/given-an-iterator-declare-an-index-with-correct-size-type", "title": "given an iterator, declare an index with correct size_type", "body": "<p>In a C++ template, I struggle to define a variable with the correct <code>size_type</code>. Basically, this will be an index type into the container. I know that <code>int</code> works but would like to have it in a clean form.</p>\n\n<pre><code>template&lt;typename ForwardIt&gt; \nvoid test(ForwardIt it) {\n    // this yields the underlying type\n    decltype(typename std::iterator_traits&lt;ForwardIt&gt;::value_type()) T;\n\n    // what I would like is something like above, but yielding the\n    // correct size_type for the container.\n\n    // Something like this but with the type extracted from ForwardIt:\n    std::vector&lt;int&gt;::size_type i; \n\n    ...\n}\n</code></pre>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 11366476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45e94f2fecab5334d03e61fdf98eb196?s=128&d=identicon&r=PG&f=1", "display_name": "randandrambles", "link": "https://stackoverflow.com/users/11366476/randandrambles"}, "edited": false, "score": 0, "creation_date": 1556123623, "post_id": 55834020, "comment_id": 98334002, "body": "The question arrises how to insert it?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 41, "user_id": 11366476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45e94f2fecab5334d03e61fdf98eb196?s=128&d=identicon&r=PG&f=1", "display_name": "randandrambles", "link": "https://stackoverflow.com/users/11366476/randandrambles"}, "edited": false, "score": 2, "creation_date": 1556125034, "post_id": 55834020, "comment_id": 98334682, "body": "@Bilal <code>line1 += line + &#39;\\n&#39;;</code>?"}], "tags": [], "owner": {"reputation": 249, "user_id": 14800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6501a4d97420c943fb7571628c6318cb?s=128&d=identicon&r=PG", "display_name": "xslr", "link": "https://stackoverflow.com/users/14800/xslr"}, "is_accepted": false, "score": 2, "last_activity_date": 1556120939, "creation_date": 1556120939, "answer_id": 55834020, "question_id": 55833037, "link": "https://stackoverflow.com/questions/55833037/how-to-put-the-newline-while-taking-data-from-file/55834020#55834020", "title": "How to put the newline while taking data from file?", "body": "<p>When getline reads a line, it discards the newline character. You will need to reinsert newline characters when appending <code>line</code> to <code>line1</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1556129856, "post_id": 55835315, "comment_id": 98336840, "body": "Why use <code>endl</code>? You don&#39;t need to flush the output on every iteration of the loop."}, {"owner": {"reputation": 866, "user_id": 7607594, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OyzH_J0Nigs/AAAAAAAAAAI/AAAAAAAAAFg/tWm2BVaSBwY/photo.jpg?sz=128", "display_name": "Jorge Omar Medra", "link": "https://stackoverflow.com/users/7607594/jorge-omar-medra"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1556138550, "post_id": 55835315, "comment_id": 98340535, "body": "the function <code>getline</code> is retriving the line without the newline character, that is the issue of this answer. <code>endl</code> inserts a  newline character into the <code>stringstream</code> but, as you said, <code>endl</code> flush the string into the string buffer and make it (program) less efficient than using <code>&#39;\\n&#39;</code>. I will changed my answer. Thanks for the observation."}], "tags": [], "owner": {"reputation": 866, "user_id": 7607594, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OyzH_J0Nigs/AAAAAAAAAAI/AAAAAAAAAFg/tWm2BVaSBwY/photo.jpg?sz=128", "display_name": "Jorge Omar Medra", "link": "https://stackoverflow.com/users/7607594/jorge-omar-medra"}, "is_accepted": true, "score": 2, "last_activity_date": 1556138652, "last_edit_date": 1556138652, "creation_date": 1556125890, "answer_id": 55835315, "question_id": 55833037, "link": "https://stackoverflow.com/questions/55833037/how-to-put-the-newline-while-taking-data-from-file/55835315#55835315", "title": "How to put the newline while taking data from file?", "body": "<p>Bilai.</p>\n\n<p>Try this:</p>\n\n<p>While your program is getting each line write it to the stringstream, using the same loop:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void abc()\n{\n    ifstream fin(\"check.txt\");\n\n    string line;\n    stringstream out;\n    while (fin)\n    {\n        getline(fin, line);\n        out &lt;&lt; line &lt;&lt; '\\n'; //use character '\\n' instead of endl, to avoid flushing the stream every loop.\n    }\n    fin.close();\n\n    ofstream fout;\n    fout.open(\"check.txt\");\n    fout &lt;&lt; out.str();\n    fout.close();\n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 11366476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45e94f2fecab5334d03e61fdf98eb196?s=128&d=identicon&r=PG&f=1", "display_name": "randandrambles", "link": "https://stackoverflow.com/users/11366476/randandrambles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 55835315, "answer_count": 2, "score": 3, "last_activity_date": 1556138652, "creation_date": 1556117774, "question_id": 55833037, "link": "https://stackoverflow.com/questions/55833037/how-to-put-the-newline-while-taking-data-from-file", "title": "How to put the newline while taking data from file?", "body": "<p>I need to take data from file and then want to save it in a string , after saving it in string i wants to put the data in the same file from where i get that data.PROBLEM is while taking data,it is notdetecting my new line .\nLet see the example.</p>\n\n<p>I have a file \"check.txt\" in which the data is like this:\nABC <strong>new line</strong>\nDEF <strong>new line</strong>\nXYZ <strong>new line</strong></p>\n\n<p>Now i wants to send the same data in file again but instead of sending the same data it is sending it like this:\nABC DEF XYZ.</p>\n\n<p>How can i add back in the format number 1? </p>\n\n<p>Here is the code i tried:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;fstream&gt;\nusing namespace std;\n\nvoid abc()\n{\n    ifstream fin(\"check.txt\");\n    string line,line1;\n    while (fin)\n    {\n        getline(fin,line);\n        line1.append(line.begin(),line.end());\n\n}\nfin.close();\n\n    ofstream fout;\n    fout.open(\"check.txt\");\n    while (fout)\n    {\n    {\n\n        fout&lt;&lt;line1&lt;&lt;endl;\n    //  fout&lt;&lt;\"done\"&lt;&lt;endl;\n        cout&lt;&lt;\"done\"&lt;&lt;endl;\n    }\n    break;\n}\nfout.close();\n}\nint main()\n{\n    abc();\n}\n\n</code></pre>\n"}, {"tags": ["c++", "boost", "boost-asio"], "owner": {"reputation": 7675, "user_id": 2923952, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/71908bd318301d831c4b9eb6ca1c13a2?s=128&d=identicon&r=PG&f=1", "display_name": "Siler", "link": "https://stackoverflow.com/users/2923952/siler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1556204154, "creation_date": 1556117099, "last_edit_date": 1556204154, "question_id": 55832840, "link": "https://stackoverflow.com/questions/55832840/to-wait-duration-with-boost-asio", "title": "to_wait_duration with boost asio", "body": "<p>The Boost Asio <code>basic_waitable_timer</code> class (also included in the C++ Networking TS), takes a template parameter <a href=\"https://www.boost.org/doc/libs/1_70_0/doc/html/boost_asio/reference/wait_traits.html\" rel=\"nofollow noreferrer\"><strong><code>WaitTraits</code></strong></a>, which allows for custom behavior in terms of converting <code>duration</code> and <code>time_point</code> values into wait durations.</p>\n\n<p>Specifically, a <code>WaitTraits</code> class is expected to have two overloads of <a href=\"https://www.boost.org/doc/libs/1_70_0/doc/html/boost_asio/reference/wait_traits/to_wait_duration.html\" rel=\"nofollow noreferrer\"><strong><code>to_wait_duration</code></strong></a>.  The overload that takes a <code>time_point</code> is expected to convert it to a <code>duration</code> value that makes sense for a wait duration value that may be passed to an OS wait/sleep function.</p>\n\n<p>The default implementation, <code>wait_traits&lt;Clock&gt;</code>, is implemented here:</p>\n\n<p><a href=\"https://github.com/boostorg/asio/blob/develop/include/boost/asio/wait_traits.hpp\" rel=\"nofollow noreferrer\">https://github.com/boostorg/asio/blob/develop/include/boost/asio/wait_traits.hpp</a></p>\n\n<p>However, looking at the actual source code of the default implementation, I can't make any sense of what <code>to_wait_duration</code> is actually doing.  Here is the code:</p>\n\n<pre><code>  static typename Clock::duration to_wait_duration(\n      const typename Clock::time_point&amp; t)\n  {\n    typename Clock::time_point now = Clock::now();\n    if (now + (Clock::duration::max)() &lt; t)\n      return (Clock::duration::max)();\n    if (now + (Clock::duration::min)() &gt; t)\n      return (Clock::duration::min)();\n    return t - now;\n  }\n</code></pre>\n\n<p>I get that the idea here is to take a <code>time_point</code> and convert it to a <code>duration</code> value that will likely be passed to some OS wait function.  So the obvious way to do that would be to just return <code>t - Clock::now()</code>.  Of course, you may also want to do things like check for overflow.</p>\n\n<p>But what this implementation seems to do makes no sense to me.  Firstly, wouldn't the expression <code>now + Clock::duration::max()</code> <em>always</em> cause a signed integer overflow - thus triggering undefined behavior?? (Assuming that <code>Clock::duration::rep</code> is a signed integral type, which it would be for standard <code>chrono::duration</code> types).  Secondly, I can't tell what this function is trying to achieve.  Why does it ever return <code>Clock::duration::min()</code>, which would usually be a negative value?</p>\n\n<p>I would think that a <code>to_wait_duration</code> function would simply do something like check if <code>t &gt; Clock::now()</code>, and if not, just return <code>Clock::duration::zero()</code> (since a negative wait duration never makes sense).  Basically, something like:</p>\n\n<pre><code>   static typename Clock::duration to_wait_duration(const typename Clock::time_point&amp; t)\n   {\n     const typename Clock::time_point now = Clock::now();\n     return (t &gt; now) ? (t - now) : Clock::duration::zero();\n   }\n</code></pre>\n\n<p>But... what the actual Boost source code is doing is very confusing to me.  What does the Boost implementation of default <code>wait_traits</code> actually do?</p>\n"}, {"tags": ["c++", "qt", "qt-creator", "c++17"], "comments": [{"owner": {"reputation": 1206, "user_id": 5140740, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1Gcmn.jpg?s=128&g=1", "display_name": "V-R", "link": "https://stackoverflow.com/users/5140740/v-r"}, "edited": false, "score": 2, "creation_date": 1556117014, "post_id": 55832764, "comment_id": 98330211, "body": "This looks like just a declaration, which in itself should not lead to the error you mentioned. Please provide a self-contained small example, something that would compile (or produce a compiler error) on <a href=\"http://www.cpp.sh/\" rel=\"nofollow noreferrer\">cpp.sh</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1556117028, "post_id": 55832764, "comment_id": 98330217, "body": "What happens if you use a <code>std::filesystem::path</code> instead?  <code>filesystem</code> is part of C++17 so you don&#39;t need the <code>experimental</code>."}, {"owner": {"reputation": 694, "user_id": 1406186, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/efcdbad6895719edb74597d135ecbb91?s=128&d=identicon&r=PG", "display_name": "user1406186", "link": "https://stackoverflow.com/users/1406186/user1406186"}, "edited": false, "score": 0, "creation_date": 1556117273, "post_id": 55832764, "comment_id": 98330392, "body": "Comes up with a filesystem not found error. I&#39;m assuming MinGW doesnt have proper compat with c++17 filesystem?"}, {"owner": {"reputation": 694, "user_id": 1406186, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/efcdbad6895719edb74597d135ecbb91?s=128&d=identicon&r=PG", "display_name": "user1406186", "link": "https://stackoverflow.com/users/1406186/user1406186"}, "edited": false, "score": 1, "creation_date": 1556117302, "post_id": 55832764, "comment_id": 98330413, "body": "cpp.sh cannot find the header filesystem"}, {"owner": {"reputation": 1206, "user_id": 5140740, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1Gcmn.jpg?s=128&g=1", "display_name": "V-R", "link": "https://stackoverflow.com/users/5140740/v-r"}, "edited": false, "score": 0, "creation_date": 1556117481, "post_id": 55832764, "comment_id": 98330525, "body": "Makes sense, cpp.sh doesn&#39;t support C++17 yet. Perhaps you can do it on <a href=\"https://gcc.godbolt.org/\" rel=\"nofollow noreferrer\">gcc.godbolt.org</a> or <a href=\"https://www.onlinegdb.com/online_c++_compiler\" rel=\"nofollow noreferrer\">onlinegdb.com/online_c++_compiler</a> which seem to support it"}, {"owner": {"reputation": 7130, "user_id": 10239789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YeHJm.png?s=128&g=1", "display_name": "TrebledJ", "link": "https://stackoverflow.com/users/10239789/trebledj"}, "edited": false, "score": 0, "creation_date": 1556117583, "post_id": 55832764, "comment_id": 98330594, "body": "A <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that reproduces the issue (on QtCreator, at least) will help narrow the issue down. (Side Note: Also try <code>CONFIG += c++1z</code> in the .pro file.)"}, {"owner": {"reputation": 694, "user_id": 1406186, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/efcdbad6895719edb74597d135ecbb91?s=128&d=identicon&r=PG", "display_name": "user1406186", "link": "https://stackoverflow.com/users/1406186/user1406186"}, "edited": false, "score": 0, "creation_date": 1556117639, "post_id": 55832764, "comment_id": 98330625, "body": "<a href=\"https://gcc.godbolt.org/z/Lb3MNT\" rel=\"nofollow noreferrer\">gcc.godbolt.org/z/Lb3MNT</a>"}, {"owner": {"reputation": 694, "user_id": 1406186, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/efcdbad6895719edb74597d135ecbb91?s=128&d=identicon&r=PG", "display_name": "user1406186", "link": "https://stackoverflow.com/users/1406186/user1406186"}, "edited": false, "score": 0, "creation_date": 1556117772, "post_id": 55832764, "comment_id": 98330703, "body": "Tried the config += c++1z, no change."}], "answers": [{"comments": [{"owner": {"reputation": 694, "user_id": 1406186, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/efcdbad6895719edb74597d135ecbb91?s=128&d=identicon&r=PG", "display_name": "user1406186", "link": "https://stackoverflow.com/users/1406186/user1406186"}, "edited": false, "score": 0, "creation_date": 1556119607, "post_id": 55833306, "comment_id": 98331792, "body": "Unfortuanley i&#39;m still getting the same error. It must be the compiler?"}, {"owner": {"reputation": 1816, "user_id": 10150736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bed9cdb705538c68aa60a67d628d1cc0?s=128&d=identicon&r=PG&f=1", "display_name": "Emanuele", "link": "https://stackoverflow.com/users/10150736/emanuele"}, "reply_to_user": {"reputation": 694, "user_id": 1406186, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/efcdbad6895719edb74597d135ecbb91?s=128&d=identicon&r=PG", "display_name": "user1406186", "link": "https://stackoverflow.com/users/1406186/user1406186"}, "edited": false, "score": 0, "creation_date": 1556120319, "post_id": 55833306, "comment_id": 98332203, "body": "Which specific compiler are you using? what is the output on your teriminal if you type the following instruction <code>gcc --version</code> ? also try to run this on your terminal and show the output <code>gcc yourprogram.cpp -o yourprogram</code>"}, {"owner": {"reputation": 694, "user_id": 1406186, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/efcdbad6895719edb74597d135ecbb91?s=128&d=identicon&r=PG", "display_name": "user1406186", "link": "https://stackoverflow.com/users/1406186/user1406186"}, "edited": false, "score": 0, "creation_date": 1556120736, "post_id": 55833306, "comment_id": 98332439, "body": "version = gcc (MinGW.org GCC-8.2.0-3) 8.2.0"}, {"owner": {"reputation": 694, "user_id": 1406186, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/efcdbad6895719edb74597d135ecbb91?s=128&d=identicon&r=PG", "display_name": "user1406186", "link": "https://stackoverflow.com/users/1406186/user1406186"}, "edited": false, "score": 0, "creation_date": 1556120754, "post_id": 55833306, "comment_id": 98332449, "body": "compiler output using gcc command  main.cpp: In function &#39;int main()&#39;: main.cpp:5:12: error: &#39;filesystem&#39; in namespace &#39;std&#39; does not name a type  const std::filesystem::path my_path = &quot;C:/&quot;;             ^~~~~~~~~~ main.cpp:6:33: error: &#39;my_path&#39; was not declared in this scope  std::ifstream input_file_stream(my_path);"}, {"owner": {"reputation": 1816, "user_id": 10150736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bed9cdb705538c68aa60a67d628d1cc0?s=128&d=identicon&r=PG&f=1", "display_name": "Emanuele", "link": "https://stackoverflow.com/users/10150736/emanuele"}, "reply_to_user": {"reputation": 694, "user_id": 1406186, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/efcdbad6895719edb74597d135ecbb91?s=128&d=identicon&r=PG", "display_name": "user1406186", "link": "https://stackoverflow.com/users/1406186/user1406186"}, "edited": false, "score": 0, "creation_date": 1556121436, "post_id": 55833306, "comment_id": 98332843, "body": "Have you set the compiler on your <code>Qt</code>? : Tools &gt; Options &gt; C++ , Compilers, Add &gt; MinGW     In name put the compiler version, MinGW (version)     It&#39;s the name that will be shown in Kits     In Compiler path browse for the C++ compiler path, in this case D:\\yourPath\\mingw(your Version)\\bin\\g++.exe"}, {"owner": {"reputation": 694, "user_id": 1406186, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/efcdbad6895719edb74597d135ecbb91?s=128&d=identicon&r=PG", "display_name": "user1406186", "link": "https://stackoverflow.com/users/1406186/user1406186"}, "edited": false, "score": 0, "creation_date": 1556122133, "post_id": 55833306, "comment_id": 98333247, "body": "Yes, i&#39;ve added the compiler and added the kit and set it as default, but still same issue."}, {"owner": {"reputation": 1206, "user_id": 5140740, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1Gcmn.jpg?s=128&g=1", "display_name": "V-R", "link": "https://stackoverflow.com/users/5140740/v-r"}, "edited": false, "score": 0, "creation_date": 1556137216, "post_id": 55833306, "comment_id": 98339933, "body": "I get <code>does not name a type</code> and <code>was not declared in this scope</code> compiler errors with your <a href=\"https://gcc.godbolt.org/z/Lb3MNT\" rel=\"nofollow noreferrer\">MCV on godbolt</a> but only <i>with gcc version 5.5 and lower</i>. With 6.1 and newer, godbolt successfully produces assembler code with no errors. This means the compiler version in your setup is still not correctly set. Try searching and removing any older compilers from your system to be sure."}], "tags": [], "owner": {"reputation": 1816, "user_id": 10150736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bed9cdb705538c68aa60a67d628d1cc0?s=128&d=identicon&r=PG&f=1", "display_name": "Emanuele", "link": "https://stackoverflow.com/users/10150736/emanuele"}, "is_accepted": false, "score": 3, "last_activity_date": 1556118576, "creation_date": 1556118576, "answer_id": 55833306, "question_id": 55832764, "link": "https://stackoverflow.com/questions/55832764/ifstream-no-matching-constructor-for-initialization/55833306#55833306", "title": "ifstream no matching constructor for initialization", "body": "<p>@ user1406186, I replicated your same error, and was able to compile it applying the following changes to the <code>.pro</code> file and had to specify the <code>QMAKE</code> I needed to use:</p>\n\n<pre><code>TEMPLATE = app\nCONFIG += console c++11\n\nQMAKE_CXXFLAGS += -std=gnu++11\nCONFIG -= app_bundle\nCONFIG -= qt\n\nSOURCES += \\\n        main.cpp\n\nHEADERS +=\nLIBS += -lstdc++fs\n</code></pre>\n\n<p>It also compiled with the following C++14/C++11 standards:</p>\n\n<pre><code>TEMPLATE = app\nCONFIG += console c++14\n\nQMAKE_CXXFLAGS += -std=gnu++14\nCONFIG -= app_bundle\nCONFIG -= qt\n\nSOURCES += \\\n        main.cpp\n\nHEADERS +=\nLIBS += -lstdc++fs\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 2427283, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iczSV.jpg?s=128&g=1", "display_name": "Digambar", "link": "https://stackoverflow.com/users/2427283/digambar"}, "edited": false, "score": 0, "creation_date": 1590320576, "post_id": 61981822, "comment_id": 109630786, "body": "above solution tested with Qt creator and its working as expected"}], "tags": [], "owner": {"reputation": 11, "user_id": 2427283, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iczSV.jpg?s=128&g=1", "display_name": "Digambar", "link": "https://stackoverflow.com/users/2427283/digambar"}, "is_accepted": false, "score": 0, "last_activity_date": 1590296259, "creation_date": 1590296259, "answer_id": 61981822, "question_id": 55832764, "link": "https://stackoverflow.com/questions/55832764/ifstream-no-matching-constructor-for-initialization/61981822#61981822", "title": "ifstream no matching constructor for initialization", "body": "<pre><code>#include&lt;string&gt;\n#include&lt;experimental\\filesystem&gt;\nusing namespace std;\nusing namespace experimental::filesystem;\nint main()\n{\n    path soure{current_path()};\n    soure /=\"test.txt\";\n\n    ifstream input{u8path(soure).u8string()};\n    if(!input)\n    {\n        cout&lt;&lt;\"source file not exist\"&lt;&lt;endl;\n    }\n    path dest{current_path()};\n    dest /=\"test-copy.txt\";\n    ofstream output{u8path(dest).u8string()};\n\n    string line;\n    while(!getline(input,line).eof())\n    {\n        output&lt;&lt;line&lt;&lt;endl;\n    }\n    input.close();\n    output.close();\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 694, "user_id": 1406186, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/efcdbad6895719edb74597d135ecbb91?s=128&d=identicon&r=PG", "display_name": "user1406186", "link": "https://stackoverflow.com/users/1406186/user1406186"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 374, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1590296259, "creation_date": 1556116877, "last_edit_date": 1556147333, "question_id": 55832764, "link": "https://stackoverflow.com/questions/55832764/ifstream-no-matching-constructor-for-initialization", "title": "ifstream no matching constructor for initialization", "body": "<p>I'm using QT Creator and MinGW (both latest versions) and am having trouble getting the ifstream to use the path argument constructor added in c++17.</p>\n\n<p>Compiling the below code will fail with:</p>\n\n<pre><code>no matching constructor for initialization of 'std::ifstream' \n</code></pre>\n\n<p>I've got <code>CONFIG += c++17</code> in my QT .pro file and <code>LIBS += -lstdc++fs</code></p>\n\n<p>MCV\n<a href=\"https://gcc.godbolt.org/z/Lb3MNT\" rel=\"nofollow noreferrer\">https://gcc.godbolt.org/z/Lb3MNT</a></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;experimental/filesystem&gt;\n#include &lt;fstream&gt;\n\nint main() {\n    const std::experimental::filesystem::path my_path = \"C:/\";\n    std::ifstream input_file_stream(my_path);\n}\n</code></pre>\n"}, {"tags": ["c++", "logging", "boost", "boost-log"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 3975232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33db370a0cfb6936860c3fba77763dee?s=128&d=identicon&r=PG&f=1", "display_name": "Ramakant", "link": "https://stackoverflow.com/users/3975232/ramakant"}, "edited": false, "score": 0, "creation_date": 1556263055, "post_id": 55853504, "comment_id": 98385501, "body": "Thanks. Is there some example/tutorial you could point me to, where this is done? The boost documentation tends to be quite cryptic at times."}, {"owner": {"reputation": 8115, "user_id": 4636534, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GoTz67GRao8/AAAAAAAAAAI/AAAAAAAAADI/PyDv-i56924/photo.jpg?sz=128", "display_name": "Andrey Semashev", "link": "https://stackoverflow.com/users/4636534/andrey-semashev"}, "reply_to_user": {"reputation": 23, "user_id": 3975232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33db370a0cfb6936860c3fba77763dee?s=128&d=identicon&r=PG&f=1", "display_name": "Ramakant", "link": "https://stackoverflow.com/users/3975232/ramakant"}, "edited": false, "score": 0, "creation_date": 1556357366, "post_id": 55853504, "comment_id": 98417148, "body": "I don&#39;t have an example, but you can look at Boost.Log sources. File collector is implemented here: <a href=\"https://github.com/boostorg/log/blob/2154cafa46675df4e3c986ad5f2c34d1caf2afaa/src/text_file_backend.cpp#L601\" rel=\"nofollow noreferrer\">github.com/boostorg/log/blob/&hellip;</a>"}, {"owner": {"reputation": 23, "user_id": 3975232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33db370a0cfb6936860c3fba77763dee?s=128&d=identicon&r=PG&f=1", "display_name": "Ramakant", "link": "https://stackoverflow.com/users/3975232/ramakant"}, "edited": false, "score": 0, "creation_date": 1556718372, "post_id": 55853504, "comment_id": 98527149, "body": "Yes, that&#39;s the tragedy of this library version. Thanks for your sample though. I&#39;m still browsing through it... trying to figure how to address my issue along the lines. Hope you won&#39;t mind me bugging you with question about it as I go along. :-)"}], "tags": [], "owner": {"reputation": 8115, "user_id": 4636534, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GoTz67GRao8/AAAAAAAAAAI/AAAAAAAAADI/PyDv-i56924/photo.jpg?sz=128", "display_name": "Andrey Semashev", "link": "https://stackoverflow.com/users/4636534/andrey-semashev"}, "is_accepted": true, "score": 1, "last_activity_date": 1556208525, "creation_date": 1556208525, "answer_id": 55853504, "question_id": 55832615, "link": "https://stackoverflow.com/questions/55832615/how-to-keep-the-latest-log-file-name-at-first-index-e-g-logtrail01-txt-with/55853504#55853504", "title": "How to keep the latest log file name at first index (e.g. logtrail01.txt), with Boost V2 1.70 logging library?", "body": "<blockquote>\n  <p>Is there a configuration for file logging backend that can support it?</p>\n</blockquote>\n\n<p>No, Boost.Log does not support this. The primary reason is that keeping the most recent log file have the counter value of 0 requires N file renames on each rotation, where N is the number of previously rotated files. Aside from performance implications, this increases the chance of failure during filesystem operations (e.g. in case if a process opens one of the files during rotation, which will cause a rename error on Windows).</p>\n\n<blockquote>\n  <p>If not, how can I customise the backend for this?</p>\n</blockquote>\n\n<p>You don't need to customize the sink backend, but you will have to write a custom file collector. You have to implement the <a href=\"https://github.com/boostorg/log/blob/2154cafa46675df4e3c986ad5f2c34d1caf2afaa/include/boost/log/sinks/text_file_backend.hpp#L72\" rel=\"nofollow noreferrer\"><code>collector</code></a> interface, most importantly the <code>store_file</code> method, which should perform all filesystem activity, including renaming files and removing old files. This method will be called when the sink backend rotates the log file. You can set your file collector by calling <a href=\"https://github.com/boostorg/log/blob/2154cafa46675df4e3c986ad5f2c34d1caf2afaa/include/boost/log/sinks/text_file_backend.hpp#L457\" rel=\"nofollow noreferrer\"><code>set_file_collector</code></a> on the sink backend.</p>\n"}], "owner": {"reputation": 23, "user_id": 3975232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33db370a0cfb6936860c3fba77763dee?s=128&d=identicon&r=PG&f=1", "display_name": "Ramakant", "link": "https://stackoverflow.com/users/3975232/ramakant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 55853504, "answer_count": 1, "score": 0, "last_activity_date": 1556208525, "creation_date": 1556116472, "last_edit_date": 1556173824, "question_id": 55832615, "link": "https://stackoverflow.com/questions/55832615/how-to-keep-the-latest-log-file-name-at-first-index-e-g-logtrail01-txt-with", "title": "How to keep the latest log file name at first index (e.g. logtrail01.txt), with Boost V2 1.70 logging library?", "body": "<p>I'm introducing a replacement to the natively written logging framework of my application. The existing logging is written in a fashion to generate the files such that the file being currently written to is named <strong><em>\"logs.txt\"</em></strong> and the rolled over files are named as <strong><em>\"Logs.N.txt\"</em></strong>, where <strong><em>\"Logs.1.txt\"</em></strong> is the latest after <strong><em>\"logs.txt\"</em></strong>. How do I achieve the same behaviour through Boost V2 logging?</p>\n\n<p>Trying to use the Boost logging because it provides good support for the multiple sinks, as I now have to target my logs to 3 locations:\n<strong>a)</strong> local log file, \n<strong>b)</strong> stack driver on cloud, and \n<strong>c)</strong> syslog server hosted as a separate container</p>\n\n<p>The reason I want the current file to be <strong><em>\"logs.txt\"</em></strong> is that among other things, it allows one to just <em><code>tail -F logs.txt</code></em> on a running system.</p>\n\n<p>I found a snippet that rotates the logs and maintains the size limitations for both per-file &amp; total-logs. </p>\n\n<pre><code>auto strm = boost::log::add_file_log(\n        boost::log::keywords::file_name = \"Logs.%2N.txt\",\n        boost::log::keywords::open_mode = std::ios_base::app,\n        boost::log::keywords::rotation_size = 5 * 1024, // Max filesize\n        boost::log::keywords::auto_flush = true\n    );\n\nauto bkend = strm-&gt;locked_backend();                                                       \nbkend-&gt;set_file_collector(boost::log::sinks::file::make_collector(                      \n            boost::log::keywords::target = \"./\", // log file destination\n            boost::log::keywords::max_size = 100 * 1024, //Max total size\n            boost::log::keywords::min_free_space = 100000\n            ));\n\nbkend-&gt;scan_for_files(boost::log::sinks::file::scan_method::scan_matching, true);       \n</code></pre>\n\n<h1>Behaviour</h1>\n\n<h2>Current file generation pattern is:</h2>\n\n<pre><code>Logs.01.txt     &lt;--- Oldest file\nLogs.02.txt\n.\n.\n.\nLogs.19.txt\nLogs.20.txt     &lt;--- File being written to\n</code></pre>\n\n<p>which as the logging continues will become </p>\n\n<pre><code>Logs.41.txt     &lt;--- Oldest file\nLogs.42.txt\n.\n.\n.\nLogs.59.txt\nLogs.60.txt     &lt;--- File being written to\n</code></pre>\n\n<p>The index just keeps rolling on (so it's beyond the desired 2 digit index)</p>\n\n<pre><code>Logs.131.txt     &lt;--- Oldest file\nLogs.132.txt\n.\n.\n.\nLogs.149.txt\nLogs.150.txt     &lt;--- File being written to\n</code></pre>\n\n<h2>Required file generation pattern is:</h2>\n\n<pre><code>logs.txt        &lt;--- File being written to\nLogs.01.txt     &lt;--- Latest rolled over file\nLogs.02.txt\n.\n.\n.\nLogs.12.txt\nLogs.13.txt     &lt;--- Oldest file\n</code></pre>\n\n<p>grows to </p>\n\n<pre><code>logs.txt        &lt;--- File being written to\nLogs.01.txt     &lt;--- Latest rolled over file\nLogs.02.txt\n.\n.\n.\nLogs.19.txt\nLogs.20.txt     &lt;--- Oldest file\n</code></pre>\n\n<p>&amp; as <code>Logs.20.txt</code> is at the limit of the total space, it keeps overwriting the <code>Logs.20.txt</code> file with <code>Logs.19.txt</code> and so on for each rollover.</p>\n\n<p>So the oldest file keeps getting renamed to the next index, till it reaches the Max total log space limit and is then just overwritten.</p>\n\n<h2>Questions</h2>\n\n<ol>\n<li>Is there a configuration for file logging backend that can support it?</li>\n<li>If not, how can I customise the backend for this?</li>\n<li>Also, please point me to any documentation/tutorial <em>(other than Boost.Log documentation)</em> to Boost logging that speaks to the library structure and class level interactions, if aware.</li>\n</ol>\n"}, {"tags": ["c#", "c++", "dll", "auto"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 5, "creation_date": 1556116214, "post_id": 55832521, "comment_id": 98329653, "body": "<code>auto CreateVariable(auto value)</code> is not legal C++"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 3, "creation_date": 1556116404, "post_id": 55832521, "comment_id": 98329782, "body": "<code>auto</code> is not some generic type. It gets deduced to some specific type (at compile time). The return type of <code>auto foo() { return 1; }</code> is <code>int</code>, not <code>auto</code>. You are not dealing with template functions though, are you (have to ask since your sample code is clearly paraphrased to the point of not being legal C++)?"}], "answers": [{"tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": true, "score": 2, "last_activity_date": 1556118590, "creation_date": 1556118590, "answer_id": 55833315, "question_id": 55832521, "link": "https://stackoverflow.com/questions/55832521/why-cant-i-use-functions-from-a-dll-that-contain-auto-as-a-parameter-or-return/55833315#55833315", "title": "Why Can&#39;t I Use Functions From a DLL That Contain auto as a Parameter or Return Type?", "body": "<p>First of all, <code>auto</code> is not some dynamic type in C++. The <code>auto</code> keyword is some sort of placeholder for the compiler to deduce:</p>\n\n<pre><code>// int i1 = 0; // same thing in the eyes of the compiler\n   auto i1 = 0;\n</code></pre>\n\n<p>But the compiler only deduce types when it is initialized with a value.</p>\n\n<pre><code>// ???? i2;\n// i2 = 0;\n\n   auto i2; // error! deduce what type?\n   i2 = 0;  // cannot call operator= with unknown type\n</code></pre>\n\n<p>But you can have <code>auto</code> in a lambda type, what is different there?</p>\n\n<pre><code>// type of `lambda` is an unnamed type.\nauto lambda = [](auto var) { std::cout &lt;&lt; var; };\n\nlambda(1);\nlambda(\"string\");\n</code></pre>\n\n<p>Even if that looks dynamic, is it not. The generic lambda is implemented using a template:</p>\n\n<pre><code>//    v----- unnamed\nstruct {\n    template&lt;typename T&gt;\n    auto operator()(auto var) const {\n        std::cout &lt;&lt; var;\n    }\n} lambda{};\n</code></pre>\n\n<p>That means the compiler will <strong>generate new static code on the fly for an <code>auto</code> parameter</strong>. What is means is even if you upgraded to C++20, which allows for:</p>\n\n<pre><code>auto CreateVariable(auto value) {\n    // ...\n}\n</code></pre>\n\n<p>No function would actually exist. It's just a template waiting to be instanciated.</p>\n\n<p>There would be no function to export from your dll, as it would be just some templates.</p>\n\n<p>What you are looking for is something like this:</p>\n\n<pre><code>struct CSharpObject;\n\nauto CreateVariable(CSharpObject* value) -&gt; CSharpObject* {\n    // reflect on value to check the type\n    // construct a new instance of CSharpObject with the\n    // right set of metadata for c# to understand\n}\n</code></pre>\n\n<p>Unfortunately, C++ don't understand the dynamic, reflectable and garbage collected C# object, and C# don't understand the static nature of template and value types of C++.</p>\n\n<p>What you will need is to provide a set of function that operate on a set of known types:</p>\n\n<pre><code>auto CreateVariableInt(int value) -&gt; int* {\n    return new int{value};\n}\n\nauto GetVariableInt(int* address) -&gt; int {\n    return *addr;\n}\n\nauto CreateVariableDouble(double value) -&gt; double* {\n    return new double{value};\n}\n\nauto CreateVariableDouble(double* address) -&gt; double {\n    return *address;\n}\n\n// so on and so forth for every supported types.\n</code></pre>\n\n<p>Then on the C# side, keep metadata on what type is contained, and call the right function.</p>\n"}], "owner": {"reputation": 64, "user_id": 10694184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GzDVW.png?s=128&g=1", "display_name": "Delkarix", "link": "https://stackoverflow.com/users/10694184/delkarix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 55833315, "answer_count": 1, "score": 0, "last_activity_date": 1556118590, "creation_date": 1556116148, "question_id": 55832521, "link": "https://stackoverflow.com/questions/55832521/why-cant-i-use-functions-from-a-dll-that-contain-auto-as-a-parameter-or-return", "title": "Why Can&#39;t I Use Functions From a DLL That Contain auto as a Parameter or Return Type?", "body": "<p>I was experimenting with dynamic memory allocation for the programming language I am creating. My main project is made in C# but I have a C++ DLL containing the methods to create variables. The DLL methods are loaded in with C#'s <code>System.Runtime.InteropServices.DllImport()</code> attribute. I discovered that when building my C++ file into a DLL (using g++ v6.3.0), any functions that returned <code>auto</code> or had <code>auto</code> parameters would not export into the DLL. I checked with <code>dumpbin -exports</code> and found that they were not included. I managed to fix the DLL, but it left me wondering why the <code>auto</code> type would not export.</p>\n\n<p>I know that it is not just a C# issue (I have tested it with other languages such as Python, and this was before I figured out that the problem was a compilation problem), and it is not just a g++ issue because other compilers also fail to export the functions. Oddly enough, no error is thrown anywhere during the process.</p>\n\n<p>Original code:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// Variable Manipulation methods\nextern \"C\" {\n    auto CreateVariable(auto value) {\n        // Create a variable and return its address\n        // Here, C++ deduces that \"value\" is any type and the function creates a new object of that type, pointing to the value\n        return new (typeof(value))(value);\n    }\n\n    auto GetVariable(auto address) {\n        // Return the value of a variable from the specified address\n        // Here, C++ deduces that \"address\" is a pointer of some sort\n        return *addr;\n    }\n\n    void SetVariable(auto address, auto value) {\n        // Set the variable using its specified address\n        // Here, C++ deduces that \"address\" is a pointer and \"value\" is any type\n        *addr = value;\n    }\n\n    void DeleteVariable(auto address) {\n        // Delete the variable.\n        // Here, C++ deduces that \"address\" is a pointer of some sort\n        delete addr;\n    }\n}\n</code></pre>\n\n<p>I expected to be able to use</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>[DllImport(\"dll_path.dll\")]\npublic static extern IntPtr CreateVariable([MarshalAs(UnmanagedType.Any)] object value);\n\n[DllImport(\"dll_path.dll\")]\npublic static extern object GetVariable(IntPtr address);\n\n[DllImport(\"dll_path.dll\")]\npublic static extern void SetVariable(IntPtr address, [MarshalAs(UnmanagedType.Any] object value);\n\n[DllImport(\"dll_path.dll\")]\npublic static extern void DeleteVariable(IntPtr address);\n</code></pre>\n\n<p>in my C# program, but it kept throwing <code>System.EntryPointNotFoundException</code>, saying that the entry point could not be found. Naturally, I suspected that C# was just being picky about DLLs, but I tested with other languages like Python's <code>ctypes</code> module, and it threw the same error. I did figure out the solution: using the windows.h <code>BYTE</code> type (<code>unsigned char</code>).</p>\n\n<p>My question is: why can't I export functions with <code>auto</code> parameters or <code>auto</code> return types?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 3, "creation_date": 1556115952, "post_id": 55832227, "comment_id": 98329457, "body": "You could create a hash function describing the state of the cube and store every new state in a cache/blacklist (like an <code>unordered_set</code> of these hash values). For every move you are about to do, check if it would result in a state you&#39;ve had before, if it would, reject that move and try another one."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1556116329, "post_id": 55832227, "comment_id": 98329734, "body": "@TedLyngmo it does not have to be a hash, actual state can be encoded in pretty short format."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1556117171, "post_id": 55832227, "comment_id": 98330323, "body": "One 66 bit (I guess 128 bits would have to be used) integer is enough to describe all possible 43252003274489856000 states so any function that takes a cube and turns it into a unique number that could be used to get the cube back would work. As long as it&#39;s bijective, it will work, but I suspect that you&#39;d actually want to create a hash function to replace the <code>size_t</code> hashes normally used or otherwise you&#39;d get a hash on your 128 bit number."}, {"owner": {"reputation": 7854, "user_id": 5461205, "user_type": "registered", "profile_image": "https://graph.facebook.com/1112471818782668/picture?type=large", "display_name": "Dirk Reichel", "link": "https://stackoverflow.com/users/5461205/dirk-reichel"}, "edited": false, "score": 0, "creation_date": 1563454145, "post_id": 55832227, "comment_id": 100711060, "body": "You also could go for splitting by axis. Put all U/D/E turns in one array, then L/R/M in a second and F/B/S moves in a third array... If you want to also have shuffles like &quot;U L2 R&#39; U&quot; you need also multi-moves for one axis in the array. Not using slices, you have 3x 6 moves per array in simple and 3x 6+9 four multi. Simplest would be to pick an axis (differs from last axis) then run a chance (like 0.8/0.2) to do one or two moves over that axis (2 moves use opposing sides). have your array like <code>{{R,R2,R&#39;,L,L2,L&#39;},[U...</code> now either run random [1 to 6] or [[1 to 3] AND [4 to 6]]...."}], "answers": [{"tags": [], "owner": {"reputation": 2673, "user_id": 11292489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cucr6.jpg?s=128&g=1", "display_name": "Gilles-Philippe Paill&#233;", "link": "https://stackoverflow.com/users/11292489/gilles-philippe-paill%c3%a9"}, "is_accepted": false, "score": 1, "last_activity_date": 1556119158, "last_edit_date": 1556119158, "creation_date": 1556116993, "answer_id": 55832800, "question_id": 55832227, "link": "https://stackoverflow.com/questions/55832227/rubiks-cube-scramble-generator-algorithm/55832800#55832800", "title": "Rubik&#39;s Cube Scramble Generator algorithm", "body": "<p>You have to look for the last two moves as long as they are commutative. If not, then you only check for the last move. This is simplified by the fact that each pair of columns are commutative:</p>\n\n<pre><code>void initScramble(const int scrambleSize, string notation_group[][6], string scrambled_notation[]) {\n    while (true) {\n        int lastColumn = 7; // Invalid columns\n        int beforeLastColumn = 7;\n\n        cin.get();\n\n        for (int i = 0; i &lt; scrambleSize; i++) {\n            int pickGroup = 0 + rand() % 3;\n            int pickColumn = 0 + rand() % 6;\n            bool isCommutative = (lastColumn / 2) == (beforeLastColumn / 2);\n\n            while (pickColumn == lastColumn || isCommutative &amp;&amp; pickColumn == beforeLastColumn) {\n                pickColumn = 0 + rand() % 6;\n            }\n\n            scrambled_notation[i] = notation_group[pickGroup][pickColumn];\n            beforeLastColumn = lastColumn;\n            lastColumn = pickColumn;\n        }\n\n        for (int i = 0; i &lt; scrambleSize; i++) {\n            cout &lt;&lt; scrambled_notation[i] &lt;&lt; \"  \";\n        }\n        cin.get();\n        system(\"CLS\");\n    }\n}\n</code></pre>\n\n<p>You don't have to look further since you can have only 2 commutative consecutive moves following your rules of scrambling. For example, 'L,R,L' and 'L,R,R' will be discarded, and thus, 3 commutative moves will never be generated.</p>\n"}], "owner": {"reputation": 88, "user_id": 11091078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b5d35a2f795346c5ad2b5eb4fca76b0?s=128&d=identicon&r=PG&f=1", "display_name": "Vahan", "link": "https://stackoverflow.com/users/11091078/vahan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 628, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1556119158, "creation_date": 1556115289, "question_id": 55832227, "link": "https://stackoverflow.com/questions/55832227/rubiks-cube-scramble-generator-algorithm", "title": "Rubik&#39;s Cube Scramble Generator algorithm", "body": "<p>I've been recently working on a project which includes a Rubik's Cube scramble generator. Basically the program should generate and display random cube notations so that the user can follow each move and have a fairly scrambled cube. Notations include \"R\" for turning the right layer , \"L\" for turning the left layer, \"F\" for turning front layer, \"D\" for down, \"U\" for up and \"B\" for back. And so you have a total of 6 sides \"R, L, U, D, F, B\". The appostrophe after any of these notations means moving that layer counter clockwise and \"2\" means moving that layer twice. The problem is you can't have the same notation be repeated next to each other like \"R, R\" as it would be the same as \"R2\", nor you can have \"R, R' \" next to each other as they would cancel each other out. My solution to this was making a 2 dimensional array for storing the 3 groups of notations for every type.</p>\n\n<pre><code>string notation_group[row][column] = { { \"R \", \"L \", \"F \", \"B \", \"U \", \"D \" },\n    {\"R' \", \"L' \", \"F' \", \"B' \", \"U' \", \"D' \"}, { \"R2\", \"L2\", \"F2\", \"B2\", \"U2\", \"D2\"} };\n</code></pre>\n\n<p>This means that whenever the program picks a random column from any of these groups, the program has to prevent the next generated notation from choosing the same column in any other group. So let's say if the program picks the first element of the first group \"R\", then for the next iteration it can choose any notation except \"R\", \"R' \" and \"R2\", all of which belong to the first column of their respective groups. So all the program has to do is not to pick that column during the next iteration.</p>\n\n<p>I used a \"temp\" variable to keep in mind the current randomly generated notation and compare it to the next one, and generating a new one whenever those are equal.</p>\n\n<pre><code>int temp;\n\n            scrambled_notation[i] = notation_group[pickGroup][pickColumn];\n\n            temp = pickColumn;\n\n            pickColumn = 0 + rand() % 6;\n\n            while (temp == pickColumn) {\n                pickColumn = 0 + rand() % 6;\n            }\n</code></pre>\n\n<p>It does work but there is still another problem, whenever you have something like \"R, L\" or \"R, L', R\" be repeated multiple times next to each other they would again cancel each other out leaving no affect on the cube. Is there any idea for how can I prevent two of the opposing sides being repeated next to each other for more than once? I would greatly appreciate the help.  </p>\n\n<pre><code>    void initScramble(const int, string[][6], string[]);\n\nint main() {\n\n    srand(time(0));\n\n    const int row = 3, column = 6;\n    string notation_group[row][column] = { { \"R\", \"L\", \"F\", \"B\", \"U\", \"D\" },\n    {\"R'\", \"L'\", \"F'\", \"B'\", \"U'\", \"D'\"}, { \"R2\", \"L2\", \"F2\", \"B2\", \"U2\", \"D2\"} };\n\n    const int scrambleSize = 22;\n    string scrambled_notation[scrambleSize];\n\n    cout &lt;&lt; \"SCRAMBLE: \" &lt;&lt; endl;\n\n    initScramble(scrambleSize, notation_group, scrambled_notation);\n\n    system(\"pause\");\n    return 0;\n}\n\nvoid initScramble(const int scrambleSize, string notation_group[][6], string scrambled_notation[]) {\n\n    int pickColumn = 0 + rand() % 6;\n\n    while (true) {\n\n        cin.get();\n\n        for (int i = 0; i &lt; scrambleSize; i++) {\n\n            int pickGroup = 0 + rand() % 3;\n\n            int temp;\n\n            scrambled_notation[i] = notation_group[pickGroup][pickColumn];\n\n            temp = pickColumn;\n\n            pickColumn = 0 + rand() % 6;\n\n            while (temp == pickColumn) {\n                pickColumn = 0 + rand() % 6;\n            }\n        }\n\n        for (int i = 0; i &lt; scrambleSize; i++) {\n            cout &lt;&lt; scrambled_notation[i] &lt;&lt; \"  \";\n        }\n        cin.get();\n        system(\"CLS\");\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c++", "class", "object", "static", "initialization"], "comments": [{"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 3, "creation_date": 1556114793, "post_id": 55831996, "comment_id": 98328625, "body": "<a href=\"https://en.cppreference.com/w/cpp/language/static\" rel=\"nofollow noreferrer\">Inside a class definition, the keyword static declares members that are not bound to class instances.</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1556115105, "post_id": 55831996, "comment_id": 98328844, "body": "related/dupe: <a href=\"https://stackoverflow.com/questions/15235526/the-static-keyword-and-its-various-uses-in-c\" title=\"the static keyword and its various uses in c\">stackoverflow.com/questions/15235526/&hellip;</a>"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1556115163, "post_id": 55831996, "comment_id": 98328900, "body": "Any <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list/388282#388282\">good book</a> should explain the difference between a static and a non-static member."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 1, "creation_date": 1556115171, "post_id": 55831996, "comment_id": 98328907, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/15235526/the-static-keyword-and-its-various-uses-in-c\">The static keyword and its various uses in C++</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2427, "user_id": 4983398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbc9ed33d775a17d6965fd2efbfe4b52?s=128&d=identicon&r=PG", "display_name": "Gardener", "link": "https://stackoverflow.com/users/4983398/gardener"}, "is_accepted": false, "score": 0, "last_activity_date": 1556115470, "creation_date": 1556115470, "answer_id": 55832283, "question_id": 55831996, "link": "https://stackoverflow.com/questions/55831996/declaring-a-storage-class-as-a-static-member-in-a-host-class/55832283#55832283", "title": "Declaring a storage class as a static member in a host class", "body": "<p><strong>Class B</strong> declares a static member A of the class B, which means that it is not bound to class instances, but accessible by all instances of the class.  Each instance can update it and the other instances will see the update.</p>\n\n<p><strong>Class C</strong> declares a non-static member A of the class C, which means that it is bound to the instance of the class.  Each instance has its own Class A member.  Modifying one will not affect the others.</p>\n\n<p>As A is public in both Class B and Class C, anyone can access the Class A object according to the rules described.</p>\n\n<p>Incidentally, as foo is declared static, foo is not bound to any instance of Class A.  So, even though C contains a non-static A, foo itself will be static and accessible through any instance of B or C.</p>\n"}], "owner": {"reputation": 1, "user_id": 10842199, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-C4WCut4zgi8/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZDchJcxZ78FKOFmjhkV7qlGWgD-g/mo/photo.jpg?sz=128", "display_name": "athereos", "link": "https://stackoverflow.com/users/10842199/athereos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1556116708, "creation_date": 1556114621, "last_edit_date": 1556116708, "question_id": 55831996, "link": "https://stackoverflow.com/questions/55831996/declaring-a-storage-class-as-a-static-member-in-a-host-class", "title": "Declaring a storage class as a static member in a host class", "body": "<p>I'm writing a utility application in a procedural object-oriented style by building modules as storage classes.</p>\n\n<p>Using the following approach:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class A\n{\n    public:\n       static int foo;\n};\n\nclass B\n{\n    public:\n       static A bar;\n};\n\nclass C\n{\n    public:\n       A bar;\n};\n</code></pre>\n\n<p>What is the difference between the behavior of classes B and C?</p>\n\n<p><strong>Edit:</strong>\nWhat differs in the life-time of storage class A when declared static in class B as to when declared non-static in class C?</p>\n"}, {"tags": ["c++", "casting", "virtual", "shared-ptr"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1556114630, "post_id": 55831782, "comment_id": 98328522, "body": "You can\u2019t hand over ownership of <code>*this</code> to a <code>shared_ptr</code>."}], "answers": [{"comments": [{"owner": {"reputation": 132, "user_id": 6879290, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/2c90be9f7602dbdf9a71c46e30a97156?s=128&d=identicon&r=PG&f=1", "display_name": "TonyRomero", "link": "https://stackoverflow.com/users/6879290/tonyromero"}, "edited": false, "score": 0, "creation_date": 1556120926, "post_id": 55832879, "comment_id": 98332554, "body": "parent and thisDirectory are weak_ptr"}, {"owner": {"reputation": 768, "user_id": 10765031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19818c272f28b0be58edab2373192e34?s=128&d=identicon&r=PG&f=1", "display_name": "fdan", "link": "https://stackoverflow.com/users/10765031/fdan"}, "reply_to_user": {"reputation": 132, "user_id": 6879290, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/2c90be9f7602dbdf9a71c46e30a97156?s=128&d=identicon&r=PG&f=1", "display_name": "TonyRomero", "link": "https://stackoverflow.com/users/6879290/tonyromero"}, "edited": false, "score": 0, "creation_date": 1556179113, "post_id": 55832879, "comment_id": 98351226, "body": "@TonyRomero <code>weak_ptr</code> is contructed from <code>shared_ptr</code>, so this is absolutely fine (this is what you did already)"}], "tags": [], "owner": {"reputation": 768, "user_id": 10765031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19818c272f28b0be58edab2373192e34?s=128&d=identicon&r=PG&f=1", "display_name": "fdan", "link": "https://stackoverflow.com/users/10765031/fdan"}, "is_accepted": false, "score": 0, "last_activity_date": 1556117236, "creation_date": 1556117236, "answer_id": 55832879, "question_id": 55831782, "link": "https://stackoverflow.com/questions/55831782/adding-static-pointer-castderived-to-a-stdlistshared-ptrbase-causes-pure/55832879#55832879", "title": "adding static_pointer_cast&lt;Derived&gt; to a std::list&lt;shared_ptr&lt;Base&gt;&gt; causes pure virtual method called error", "body": "<p>You have to use <a href=\"https://en.cppreference.com/w/cpp/memory/enable_shared_from_this\" rel=\"nofollow noreferrer\">enable_shared_from_this</a> in order to create a <code>shared_ptr</code> from <code>this</code>.</p>\n\n<p>Change your class declaration to ...</p>\n\n<p><code>class Directory : public Base, public std::enable_shared_from_this&lt;Directory&gt;</code></p>\n\n<p>and replace <code>std::shared_ptr&lt;Directory&gt;(this)</code> with <code>shared_from_this()</code>. Also make sure all directories (including the root) are constructed using shared pointers. </p>\n"}], "owner": {"reputation": 132, "user_id": 6879290, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/2c90be9f7602dbdf9a71c46e30a97156?s=128&d=identicon&r=PG&f=1", "display_name": "TonyRomero", "link": "https://stackoverflow.com/users/6879290/tonyromero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556117236, "creation_date": 1556114021, "question_id": 55831782, "link": "https://stackoverflow.com/questions/55831782/adding-static-pointer-castderived-to-a-stdlistshared-ptrbase-causes-pure", "title": "adding static_pointer_cast&lt;Derived&gt; to a std::list&lt;shared_ptr&lt;Base&gt;&gt; causes pure virtual method called error", "body": "<p>I have this Base class</p>\n\n<pre><code>class Base {\n\n    std::string nome;\n\npublic:\n    std::string getName() const;\n    virtual int mType() const = 0;\n    virtual void ls(int indent=0) const = 0;\n};\n</code></pre>\n\n<p>from which I derived this Directory class</p>\n\n<pre><code>class Directory : public Base {\n\nprivate:\n    static std::shared_ptr&lt;Directory&gt; root;\n    std::list&lt;std::shared_ptr&lt;Base&gt;&gt; childs;\n    std::weak_ptr&lt;Directory&gt; parent;\n    std::weak_ptr&lt;Directory&gt; thisDirectory;\n    std::string nome;\n\nprotected:\n    Directory(const std::string n);\n\npublic:\n    static std::shared_ptr&lt;Directory&gt; getRoot();\n    std::shared_ptr&lt;Directory&gt; addDirectory(std::string nome);\n    std::shared_ptr&lt;File&gt; addFile(std::string nome, uintmax_t size);\n    std::shared_ptr&lt;Base&gt; get(std::string name);\n    std::shared_ptr&lt;Directory&gt; getDir(std::string name);\n    std::shared_ptr&lt;File&gt; getFile(std::string name);\n    void remove(std::string nome);\n\n    int mType() const override;\n    void ls(int indent=0) const override;\n};\n</code></pre>\n\n<p>the method addDirectory</p>\n\n<pre><code>std::shared_ptr&lt;Directory&gt; Directory::addDirectory(std::string nome) {\n    auto it = std::find_if(childs.begin(), childs.end(), [nome](std::shared_ptr&lt;Base&gt; p){return (p-&gt;getName()==nome);});\n    if(it == childs.end()){\n        std::cout&lt;&lt;\"creating \"&lt;&lt;nome&lt;&lt;\" directory\"&lt;&lt;std::endl;\n        std::shared_ptr&lt;Directory&gt; p = std::shared_ptr&lt;Directory&gt;(new Directory(nome));\n        childs.push_back(std::static_pointer_cast&lt;Base&gt;(p));\n        p-&gt;parent = std::shared_ptr&lt;Directory&gt;(this);\n        std::cout&lt;&lt;nome&lt;&lt;\" created\"&lt;&lt;std::endl;\n        return p;\n    }\n    else {\n        // todo gestione eccezione\n        std::cout&lt;&lt;nome&lt;&lt;\" already exists\"&lt;&lt;std::endl;\n        throw std::exception();\n    }\n}\n</code></pre>\n\n<p>will print this output</p>\n\n<pre><code>pure virtual method called\ncreating root...\nterminate called recursively\nroot created\ncreating alfa directory\nalfa created\n</code></pre>\n\n<p><code>pure virtual method called</code> is caused by <code>childs.push_back(std::static_pointer_cast&lt;Base&gt;(p));</code> while <code>terminate called recursively</code> is throwed by <code>p-&gt;parent = std::shared_ptr&lt;Directory&gt;(this);</code>.\nUsing <code>childs.push_back(p)</code> works fine, why?\nIs it trying to make an instance of a Base object? Can I manage a list of derived class object by using shared_ptr for the Base class?</p>\n"}, {"tags": ["c++", "visual-studio"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1556113722, "post_id": 55831637, "comment_id": 98327872, "body": "why not simply try to create an instance? If you missed to provide an implementation your compiler will tell you"}, {"owner": {"reputation": 450, "user_id": 10504837, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iQO9B.png?s=128&g=1", "display_name": "jbinvnt", "link": "https://stackoverflow.com/users/10504837/jbinvnt"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1556113839, "post_id": 55831637, "comment_id": 98327946, "body": "Yes, I do get the &quot;cannot instantiate abstract class&quot; error. But my goal is to find out exactly <b>which</b> functions I still need to implement. The compiler fails to provide this information."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1556113912, "post_id": 55831637, "comment_id": 98327998, "body": "what compiler are you using? I would also get nervous if the compiler didnt tell me what method is missing, but I never had this happening"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1556113985, "post_id": 55831637, "comment_id": 98328058, "body": "see eg here with gcc: <a href=\"https://wandbox.org/permlink/YEFTdlBIaDcJ3bp8\" rel=\"nofollow noreferrer\">wandbox.org/permlink/YEFTdlBIaDcJ3bp8</a>. Couldn&#39;t me more clear imho"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 1, "creation_date": 1556114046, "post_id": 55831637, "comment_id": 98328102, "body": "The &quot;cannot instantiate abstract class&quot; error also contains a list of which functions are abstract."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1556114173, "post_id": 55831637, "comment_id": 98328200, "body": "the problem of this question is a false premise that this information would not be available. Maybe it isnt but then you need to tell us what compiler you are using and the fix would be to use a compiler that has some minimum quality standards ;)"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1556114341, "post_id": 55831637, "comment_id": 98328319, "body": "offtopic: if your typical base class has 90 methods that need to be overriden you have more severe problems than finding the missing one in the derived :P"}, {"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1556114533, "post_id": 55831637, "comment_id": 98328458, "body": "Yep, tested to be sure: CL will tell exactly what&#39;s missing: <i>&quot;error C2259: &#39;b&#39;: cannot instantiate abstract class due to following members: &#39;void a::c(void)&#39;: is abstract see declaration of &#39;a::c&#39;&quot;</i> This with version 19.20 and should be the same for older ones too."}, {"owner": {"reputation": 450, "user_id": 10504837, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iQO9B.png?s=128&g=1", "display_name": "jbinvnt", "link": "https://stackoverflow.com/users/10504837/jbinvnt"}, "edited": false, "score": 2, "creation_date": 1556115639, "post_id": 55831637, "comment_id": 98329254, "body": "Just found <a href=\"https://stackoverflow.com/questions/11833905/how-do-you-handle-a-cannot-instantiate-abstract-class-error-in-c\">this question</a> and one of the answers explains that VS hides the second part of the message in the error list. Time to go back to compiling from the command line"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1556116542, "post_id": 55831637, "comment_id": 98329872, "body": "@jbinvnt &quot;<i>VS hides the second part of the message in the error list.</i>&quot; Or use Output window, instead of error list."}], "owner": {"reputation": 450, "user_id": 10504837, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iQO9B.png?s=128&g=1", "display_name": "jbinvnt", "link": "https://stackoverflow.com/users/10504837/jbinvnt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 263, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556113657, "creation_date": 1556113657, "question_id": 55831637, "link": "https://stackoverflow.com/questions/55831637/visual-studio-find-un-overriden-pure-virtual-functions", "title": "Visual Studio find un-overriden pure virtual functions", "body": "<p>I am designing a class which inherits from a few interfaces, each with many pure virtual functions. I want to be able to instantiate my class so I need to override all of the pure virtual functions it inherits. I would appreciate a way to highlight or display the functions I have not yet overridden in my derived class but I have not yet found one.</p>\n\n<p>I've tried generating a class diagram to visually compare the functions in the derived class and the base classes. However, I'd prefer a more direct and elegant solution, especially as the project grows.</p>\n\n<p>Here's a generalized example:</p>\n\n<p>Foo.h</p>\n\n<pre><code>class Foo {\npublic:\n  virtual int foo1() = 0;\n  virtual int foo2() = 0;\n  virtual int foo3() = 0;\n  virtual int foo4() = 0;\n  //...\n  virtual int foo90() = 0;\n};\n</code></pre>\n\n<p>Bar.h</p>\n\n<pre><code>class Bar : public Foo {\npublic:\n  int foo1() override {\n    return 4;\n  }\n  int foo2() override {\n    //do stuff\n  }\n  //darn, I lost track of what I still need to implement!\n};\n</code></pre>\n\n<p>Does Visual Studio have a way to automatically display which functions are still not overridden? Alternatively, if there's a compiler option to display an error/warning for each of the abstract functions that are preventing the instantiation of my class then that would be just as helpful.</p>\n"}, {"tags": ["c++", "c", "esp32"], "comments": [{"owner": {"reputation": 3213, "user_id": 3367446, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f849293d5517d4525ff6f47dc9d0486a?s=128&d=identicon&r=PG&f=1", "display_name": "Croll", "link": "https://stackoverflow.com/users/3367446/croll"}, "edited": false, "score": 0, "creation_date": 1556287738, "post_id": 55831612, "comment_id": 98398800, "body": "Why tagged c++?"}, {"owner": {"reputation": 157, "user_id": 7200139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ab71a47ac7bc3fc13e3943318577e46?s=128&d=identicon&r=PG&f=1", "display_name": "Dimfred", "link": "https://stackoverflow.com/users/7200139/dimfred"}, "reply_to_user": {"reputation": 3213, "user_id": 3367446, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f849293d5517d4525ff6f47dc9d0486a?s=128&d=identicon&r=PG&f=1", "display_name": "Croll", "link": "https://stackoverflow.com/users/3367446/croll"}, "edited": false, "score": 0, "creation_date": 1556299499, "post_id": 55831612, "comment_id": 98404681, "body": "Both languages could answer that question. Also I am programming in C++ so."}], "answers": [{"tags": [], "owner": {"reputation": 157, "user_id": 7200139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ab71a47ac7bc3fc13e3943318577e46?s=128&d=identicon&r=PG&f=1", "display_name": "Dimfred", "link": "https://stackoverflow.com/users/7200139/dimfred"}, "is_accepted": true, "score": 0, "last_activity_date": 1559126036, "last_edit_date": 1559126036, "creation_date": 1556212543, "answer_id": 55854548, "question_id": 55831612, "link": "https://stackoverflow.com/questions/55831612/udp-client-doesnt-broadcast-message-on-esp32/55854548#55854548", "title": "UDP client doesn&#39;t broadcast message on esp32", "body": "<p>So I found the problem. There is in fact no problem with the socket.</p>\n\n<p>I have bluetooth and wifi running at the same time. On esp32 both share one antenna. It seems like the BT gets a higher priority (I am running an a2dp sink). And the wifi module is unable to acquire the antenna. Hence the problem.</p>\n\n<p>The following problem (and maybe a solution), can be found here:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/55865909/acquire-a-semaphore-for-the-esp32-antenna-bluetooth-wifi-dualmode\">acquire a semaphore for the esp32 antenna (bluetooth/wifi dualmode)</a></p>\n"}], "owner": {"reputation": 157, "user_id": 7200139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ab71a47ac7bc3fc13e3943318577e46?s=128&d=identicon&r=PG&f=1", "display_name": "Dimfred", "link": "https://stackoverflow.com/users/7200139/dimfred"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 655, "favorite_count": 0, "accepted_answer_id": 55854548, "answer_count": 1, "score": 0, "last_activity_date": 1559126036, "creation_date": 1556113602, "last_edit_date": 1556287658, "question_id": 55831612, "link": "https://stackoverflow.com/questions/55831612/udp-client-doesnt-broadcast-message-on-esp32", "title": "UDP client doesn&#39;t broadcast message on esp32", "body": "<p>So I am trying to send packets via UDP as a broadcast from one ESP32 to another. The receiver is an access_point and server, the sender is a station and client.</p>\n\n<p>I already read this:\n<a href=\"https://stackoverflow.com/questions/44399443/esp32-udp-broadcaster-receiver-with-native-lwip-library\">ESP32 - UDP broadcaster/ receiver with native LwIP library</a></p>\n\n<p>But it didn't help. I know that my server works because I can send packages via terminal.\nBut for the client it seems that the packages aren't leaving the esp.</p>\n\n<p>My code:</p>\n\n<pre><code>// CLIENT: \n\nsockaddr_in _send_addr;\n_send_addr.sin_family         = AF_INET,\n_send_addr.sin_port           = htons( 5000 );\n// also tried local broadcast 192.168.4.255\n_send_addr.sin_addr.s_addr    = inet_addr( \"255.255.255.255\" ); \n_send_addr.sin_len            = sizeof( _send_addr );\n\n\nint _sock;\n_sock = socket( AF_INET, SOCK_DGRAM, IPPROTO_IP );\n\nint broadcast = 1;\nsetsockopt( _sock, SOL_SOCKET, SO_BROADCAST, &amp;broadcast, sizeof(broadcast) );\n\nvoid* data; // has some length\nsize_t len; // len of data\nsendto( _sock, data, len, 0, (const struct sockaddr*) &amp;_send_addr,\n   sizeof(_send_addr) );\n\n// SERVER:\n// server is bound to same port, and to ip \"0.0.0.0\"\n// like I said normally the server shouldn't be the problem, cause he received already\n</code></pre>\n\n<p>I skipped the checks.</p>\n\n<p>But everything is created successfully, and the sendto returns the correct number of bytes written.</p>\n\n<p>I have really no idea anymore appreciate any help.</p>\n"}, {"tags": ["c++", "c++11", "language-lawyer"], "comments": [{"owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 0, "creation_date": 1556113632, "post_id": 55831521, "comment_id": 98327821, "body": "Related question <a href=\"https://stackoverflow.com/questions/40821950/sfinae-with-stdenable-if-and-stdis-default-constructible-for-incomplete-type\">SFINAE with std::enable_if and std::is_default_constructible for incomplete type in libc++</a>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1556114185, "post_id": 55831521, "comment_id": 98328208, "body": "How would <code>is_constructible</code> determine if <code>A</code> is constructible if <code>A</code> is not a complete type?"}, {"owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1556114358, "post_id": 55831521, "comment_id": 98328333, "body": "@Fran&#231;oisAndrieux: If <code>A</code> isn&#39;t complete, we can&#39;t construct it (<code>A a;</code> on an incomplete class <code>A</code> causes a compiler error) - that&#39;s the way it was working in our code base in the past, but it appears that was just luck of the draw due to undefined behavior."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 3, "creation_date": 1556116402, "post_id": 55831521, "comment_id": 98329781, "body": "Re: &quot;we can&#39;t construct it&quot; -- type traits are about the properties of a type. It would be really disturbing if <code>std::is_constuctible&lt;A&gt;</code> changed its result depending on what headers you included. In one place it&#39;s constructible and in another it isn&#39;t?"}, {"owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1556133046, "post_id": 55831521, "comment_id": 98338258, "body": "@PeteBecker: That&#39;s a fair point that I hadn&#39;t considered - the original use case was a templated <code>class A</code> that only had specific parameters instantiated. We then used SFINAE with <code>std::is_constructible</code> so that only certain types of types were allowed through. This is easily done correctly by explicitly instantiating a default <code>class A</code> where constructors are explicitly deleted (which is what I&#39;ve done), but the thought process was from that angle. Hadn&#39;t considered the (what should have been obvious) &quot;forward-declared-class-that-actually-exists&quot; angle..."}], "answers": [{"tags": [], "owner": {"reputation": 941, "user_id": 1849287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a14e272de9cfe3615952604a7392ebdc?s=128&d=identicon&r=PG", "display_name": "Nellie Danielyan", "link": "https://stackoverflow.com/users/1849287/nellie-danielyan"}, "is_accepted": false, "score": 17, "last_activity_date": 1556113620, "creation_date": 1556113620, "answer_id": 55831621, "question_id": 55831521, "link": "https://stackoverflow.com/questions/55831521/stdis-constructible-on-incomplete-types/55831621#55831621", "title": "std::is_constructible on incomplete types", "body": "<p>Your code causes undefined behavior. </p>\n\n<p><a href=\"https://en.cppreference.com/w/cpp/types/is_constructible\" rel=\"noreferrer\">Cppreference</a> states:</p>\n\n<blockquote>\n  <p><code>template&lt; class T, class... Args &gt;\n  struct is_constructible;</code></p>\n  \n  <p>T and all types in the parameter pack Args shall each be <strong>a complete type</strong>, (possibly cv-qualified) void, or an array of unknown bound. <strong>Otherwise, the behavior is undefined.</strong></p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 25, "last_activity_date": 1556130183, "last_edit_date": 1556130183, "creation_date": 1556113627, "answer_id": 55831627, "question_id": 55831521, "link": "https://stackoverflow.com/questions/55831521/stdis-constructible-on-incomplete-types/55831627#55831627", "title": "std::is_constructible on incomplete types", "body": "<p>The behavior is undefined.</p>\n\n<blockquote>\n  <p><strong>[meta.unary.prop]</strong></p>\n\n<pre><code>template &lt;class T, class... Args&gt; struct is_constructible;\n</code></pre>\n  \n  <p><code>T</code> and all types in the parameter pack <code>Args</code> shall be complete types,\n  (possibly cv-qualified) void, or arrays of unknown bound.</p>\n</blockquote>\n\n<p><a href=\"https://timsong-cpp.github.io/cppwp/n3337/meta.unary.prop\" rel=\"noreferrer\">That's a precondition</a> of the meta-function. A contract that your code violates. libc++ is being generous by notifying you.</p>\n\n<hr>\n\n<p>Mind you, that putting that precondition there and leaving it undefined otherwise is for a reason. A program where two points of instantiation of a template have different meanings is <a href=\"https://stackoverflow.com/q/52264984/817643\">ill-formed NDR</a>. The only sane course of action is demand complete types. And after all, that's when the trait is most useful anyway.</p>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 8, "last_activity_date": 1556113706, "creation_date": 1556113706, "answer_id": 55831661, "question_id": 55831521, "link": "https://stackoverflow.com/questions/55831521/stdis-constructible-on-incomplete-types/55831661#55831661", "title": "std::is_constructible on incomplete types", "body": "<p>Your code has undefined behavior.  Per <a href=\"https://timsong-cpp.github.io/cppwp/meta.unary.prop#tab:type-traits.properties\" rel=\"noreferrer\">[meta.unary.prop] table 47</a> <code>std::is_constructible</code> requires</p>\n\n<blockquote>\n  <p><code>T</code> and all types in the template parameter pack <code>Args</code> shall be <strong>complete types</strong>, <em>cv</em> <code>void</code>, or arrays of unknown bound.</p>\n</blockquote>\n\n<p><sup>emphasis mine</sup></p>\n"}], "owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1344, "favorite_count": 2, "accepted_answer_id": 55831627, "answer_count": 3, "score": 29, "last_activity_date": 1556130183, "creation_date": 1556113361, "last_edit_date": 1556114562, "question_id": 55831521, "link": "https://stackoverflow.com/questions/55831521/stdis-constructible-on-incomplete-types", "title": "std::is_constructible on incomplete types", "body": "<p>I have the following code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass A;\n\nint main()\n{\n    std::cout &lt;&lt; std::is_constructible&lt;A&gt;::value &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>When I use <a href=\"https://godbolt.org/z/81kWbF\" rel=\"noreferrer\">GCC 8.3</a>, this code compiles. However, when I use <a href=\"https://godbolt.org/z/wd5-is\" rel=\"noreferrer\">Clang 8.0</a>, I get a compilation error that incomplete types cannot be used in type traits.</p>\n\n<p>Which one is correct? Am I allowed to use <code>is_constructible</code> on an incomplete type (with an expected value of <code>false</code>), or am I not allowed to?</p>\n"}, {"tags": ["c++", "constructor"], "comments": [{"owner": {"reputation": 5569, "user_id": 201787, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/vgB9F.jpg?s=128&g=1", "display_name": "metal", "link": "https://stackoverflow.com/users/201787/metal"}, "edited": false, "score": 0, "creation_date": 1556112778, "post_id": 55831106, "comment_id": 98327322, "body": "You have just discovered the Most Vexing Parse, which even has <a href=\"https://en.wikipedia.org/wiki/Most_vexing_parse\" rel=\"nofollow noreferrer\">its own Wikipedia entry</a>! In short, if something <i>can be</i> interpreted as a function declaration, as the line declaring <code>b()</code> can, then it is so interpreted. You can use brace initialization or &quot;<a href=\"https://herbsutter.com/2013/08/12/gotw-94-solution-aaa-style-almost-always-auto/\" rel=\"nofollow noreferrer\">almost always auto</a>&quot; style to avoid such things. Fixing your syntax errors, here is <a href=\"http://coliru.stacked-crooked.com/a/ec5dd61756db58a5\" rel=\"nofollow noreferrer\">your code modified</a> to demonstrate these ideas."}, {"owner": {"reputation": 1, "user_id": 11405422, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1JvzY-8m1mk/AAAAAAAAAAI/AAAAAAAAAB8/httEonuYYGg/photo.jpg?sz=128", "display_name": "NJC", "link": "https://stackoverflow.com/users/11405422/njc"}, "reply_to_user": {"reputation": 5569, "user_id": 201787, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/vgB9F.jpg?s=128&g=1", "display_name": "metal", "link": "https://stackoverflow.com/users/201787/metal"}, "edited": false, "score": 0, "creation_date": 1556115373, "post_id": 55831106, "comment_id": 98329059, "body": "Thanks a million! I was 100% sure this question has already been solved but I just couldn&#39;t find it myself. Thanks for your help!"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 5569, "user_id": 201787, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/vgB9F.jpg?s=128&g=1", "display_name": "metal", "link": "https://stackoverflow.com/users/201787/metal"}, "edited": false, "score": 0, "creation_date": 1556116533, "post_id": 55831106, "comment_id": 98329863, "body": "@metal -- this is <b>not</b> the Most Vexing Parse. Take a close look at the Wikipedia page you linked to. <code>A b();</code> is simply a function declaration. The Most Vexing Parse is about things that look like function arguments that being treated as types, which turns a function call into a function declaration."}, {"owner": {"reputation": 5569, "user_id": 201787, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/vgB9F.jpg?s=128&g=1", "display_name": "metal", "link": "https://stackoverflow.com/users/201787/metal"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1556132485, "post_id": 55831106, "comment_id": 98338011, "body": "@PeteBecker: You are right, though the symptoms are the akin. While this is also quite vexing, it is technically not the same as Meyers&#39; Most Vexing parse."}], "owner": {"reputation": 1, "user_id": 11405422, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1JvzY-8m1mk/AAAAAAAAAAI/AAAAAAAAAB8/httEonuYYGg/photo.jpg?sz=128", "display_name": "NJC", "link": "https://stackoverflow.com/users/11405422/njc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "closed_date": 1556112223, "answer_count": 0, "score": 0, "last_activity_date": 1556112125, "creation_date": 1556112125, "question_id": 55831106, "link": "https://stackoverflow.com/questions/55831106/why-does-declaring-a-new-object-as-b-not-work-properly", "closed_reason": "Duplicate", "title": "Why does declaring a new object as b() not work properly?", "body": "<p>I've recently learned about constructors and I have a question.</p>\n\n<pre><code>#include &lt;cstdio&gt;\nusing namespace std;\n\nclass A {\n    public:\n        A(int i=0){ x=i; }\n        void print(){ cout &lt;&lt; x &lt;&lt; endl; }\n    private:\n        int x;\n}\n\nint main() {\n    A a;\n    A b();\n    A c(1);\n    a.print();\n    b.print();\n    c.print();\n}\n</code></pre>\n\n<p>I understand how a.print() prints 0 and c.print() prints 1, but I'm not quite sure why b.print() calls an error. The error says \"expression must have class type\".</p>\n\n<p>When I'm declaring b like that, does it not mean create an object with no argument? Is it because b() is just a default constructor of class A? I actually checked the type of b and it turned out to be A (), not A. What is A () and why does b have a type of A ()?</p>\n\n<p>I want to know what exactly is happening. Can anyone help?</p>\n"}, {"tags": ["c++", "opengl"], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 6138759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33158c4217d86d6d21e4e506903df189?s=128&d=identicon&r=PG&f=1", "display_name": "user6138759", "link": "https://stackoverflow.com/users/6138759/user6138759"}, "edited": false, "score": 0, "creation_date": 1556114759, "post_id": 55831322, "comment_id": 98328606, "body": "I tried that and GL_RGBA32F but I&#39;m still only getting clamped values. Could there be another problem?"}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "reply_to_user": {"reputation": 87, "user_id": 6138759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33158c4217d86d6d21e4e506903df189?s=128&d=identicon&r=PG&f=1", "display_name": "user6138759", "link": "https://stackoverflow.com/users/6138759/user6138759"}, "edited": false, "score": 0, "creation_date": 1556115396, "post_id": 55831322, "comment_id": 98329082, "body": "@user6138759 What do you do in the shader program?"}, {"owner": {"reputation": 87, "user_id": 6138759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33158c4217d86d6d21e4e506903df189?s=128&d=identicon&r=PG&f=1", "display_name": "user6138759", "link": "https://stackoverflow.com/users/6138759/user6138759"}, "edited": false, "score": 0, "creation_date": 1556116376, "post_id": 55831322, "comment_id": 98329759, "body": "For the pos3d texture, once I load the 3D model, I load the 3D coords and my first shader does only  vec4(inPos, 1.0) to turn into RGBA. I use a sampler2D on the pos3d texture in other shaders but I do not modify the content."}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "reply_to_user": {"reputation": 87, "user_id": 6138759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33158c4217d86d6d21e4e506903df189?s=128&d=identicon&r=PG&f=1", "display_name": "user6138759", "link": "https://stackoverflow.com/users/6138759/user6138759"}, "edited": false, "score": 0, "creation_date": 1556119346, "post_id": 55831322, "comment_id": 98331629, "body": "@user6138759 Try <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glClampColor.xhtml\" rel=\"nofollow noreferrer\"><code>glClampColor(GL_CLAMP_READ_COLOR, GL_FALSE)</code></a>"}, {"owner": {"reputation": 87, "user_id": 6138759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33158c4217d86d6d21e4e506903df189?s=128&d=identicon&r=PG&f=1", "display_name": "user6138759", "link": "https://stackoverflow.com/users/6138759/user6138759"}, "edited": false, "score": 0, "creation_date": 1556120228, "post_id": 55831322, "comment_id": 98332143, "body": "It doesn&#39;t change anything. However, when I used <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl2.1/xhtml/glGetTexImage.xml\" rel=\"nofollow noreferrer\">glGetTexImage</a> instead of glReadPixels , the results are not clamped. Do you know why that is?"}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "reply_to_user": {"reputation": 87, "user_id": 6138759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33158c4217d86d6d21e4e506903df189?s=128&d=identicon&r=PG&f=1", "display_name": "user6138759", "link": "https://stackoverflow.com/users/6138759/user6138759"}, "edited": false, "score": 0, "creation_date": 1556121164, "post_id": 55831322, "comment_id": 98332689, "body": "@user6138759 Reading the specification <a href=\"https://www.khronos.org/registry/OpenGL/specs/gl/glspec46.compatibility.pdf\" rel=\"nofollow noreferrer\">18.2.8 Final Conversion</a> (page 643) says <i>&quot;Read color clamping is controlled by calling ClampColor&quot;</i> [...] <i>&quot;For a floating-point RGBA color, if type is FLOAT or HALF_FLOAT, each component is clamped to [0, 1] if read color clamping is enabled&quot;</i>. <code>glGetTexImage</code> doesn&#39;t clamp the color anyway."}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "reply_to_user": {"reputation": 87, "user_id": 6138759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33158c4217d86d6d21e4e506903df189?s=128&d=identicon&r=PG&f=1", "display_name": "user6138759", "link": "https://stackoverflow.com/users/6138759/user6138759"}, "edited": false, "score": 0, "creation_date": 1556122696, "post_id": 55831322, "comment_id": 98333530, "body": "@user6138759 I can&#39;t reproduce the issue. <code>glReadPixels</code> gives me the color in full range. If I turn on color clamp (<code>glClampColor( GL_CLAMP_READ_COLOR, GL_TRUE )</code>), then the range is limited to [0, 1 ] - as expected."}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "reply_to_user": {"reputation": 87, "user_id": 6138759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33158c4217d86d6d21e4e506903df189?s=128&d=identicon&r=PG&f=1", "display_name": "user6138759", "link": "https://stackoverflow.com/users/6138759/user6138759"}, "edited": false, "score": 0, "creation_date": 1556124113, "post_id": 55831322, "comment_id": 98334229, "body": "@user6138759 Your using OpenGL and not OpenGL ES isn&#39;t it? Probably, because <code>glGetTexImage</code> is provided by desktop OpenGL only."}, {"owner": {"reputation": 87, "user_id": 6138759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33158c4217d86d6d21e4e506903df189?s=128&d=identicon&r=PG&f=1", "display_name": "user6138759", "link": "https://stackoverflow.com/users/6138759/user6138759"}, "edited": false, "score": 0, "creation_date": 1556124528, "post_id": 55831322, "comment_id": 98334430, "body": "Yes I&#39;m using OpenGL desktop. I can&#39;t figure out why glClampColor isn&#39;t doing anything for me."}], "tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 3, "last_activity_date": 1556124586, "last_edit_date": 1556124586, "creation_date": 1556112756, "answer_id": 55831322, "question_id": 55831002, "link": "https://stackoverflow.com/questions/55831002/is-it-possible-not-to-clamp-data-when-using-glreadpixels/55831322#55831322", "title": "Is it possible not to clamp data when using glReadPixels?", "body": "<p>The data are clamped, because the internal format of the texture which is attached to the color plane of the framebuffer is <code>GL_RGBA</code> (which is the same as <code>GL_RGBA8</code>). This format is a unsigned normalized fixed-point format and provides 8 bits for each color channel, where 0 represents 0.0 and all 8 bits set (255) represent 1.0.<br>\nThis causes that the representation of the data in the data store of the texture is clamped. <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glReadPixels.xhtml\" rel=\"nofollow noreferrer\"><code>glReadPixels</code></a> reads the data from the data store which is attached to the color plane of the frambuffer.</p>\n\n<p>Change the internal format of the texture to a floating point format (e.g. <code>GL_RGBA16F</code>), when specifying a two-dimensional texture image by <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glTexImage2D.xhtml\" rel=\"nofollow noreferrer\"><code>glTexImage2D</code></a>:</p>\n\n<pre><code>glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA16F, width, height, 0, GL_RGBA, GL_FLOAT, NULL);\n</code></pre>\n\n<hr>\n\n<p>When the pixel are read form the buffer, then they may are clamped to the range [0.0, 1.0].\nThis depends on the setting of <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glClampColor.xhtml\" rel=\"nofollow noreferrer\"><code>glClampColor</code></a>.</p>\n\n<p>See <a href=\"https://www.khronos.org/registry/OpenGL/specs/gl/glspec46.core.pdf\" rel=\"nofollow noreferrer\">OpenGL 4.6 API Core Profile Specification - 18.2.8 Final Conversion</a>, page 535</p>\n\n<blockquote>\n  <p>Read color clamping is controlled by calling</p>\n  \n  <p><code>void ClampColor( enum target, enum clamp )</code></p>\n  \n  <p>with target set to <code>CLAMP_READ_COLOR</code>. If clamp is <code>TRUE</code>, read color clamping is enabled; if clamp is <code>FALSE</code>, read color clamping is disabled. [...]<br>\n  For a floating-point RGBA color, if type is <code>FLOAT</code> or <code>HALF_FLOAT</code>, each component is clamped to [0, 1] if read color clamping is enabled. </p>\n</blockquote>\n\n<p>Note, in OpenGL ES the colors are clamped  in any case. </p>\n\n<hr>\n\n<p><a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glGetTexImage.xhtml\" rel=\"nofollow noreferrer\"><code>glGetTexImage</code></a> is provided in desktop OpenGL only and doesn't clamp the colors. </p>\n"}], "owner": {"reputation": 87, "user_id": 6138759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33158c4217d86d6d21e4e506903df189?s=128&d=identicon&r=PG&f=1", "display_name": "user6138759", "link": "https://stackoverflow.com/users/6138759/user6138759"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 55831322, "answer_count": 1, "score": 3, "last_activity_date": 1556124586, "creation_date": 1556111803, "last_edit_date": 1556112044, "question_id": 55831002, "link": "https://stackoverflow.com/questions/55831002/is-it-possible-not-to-clamp-data-when-using-glreadpixels", "title": "Is it possible not to clamp data when using glReadPixels?", "body": "<p>I'm trying to develop a code where I load a 3d model with assimp, do stuff with the 3d coordinates and normals of verticies and then I want to retrieve my textures to CPU.</p>\n\n<p>I tried using \"glReadPixels\" to retrieve the textures but my data is getting clamped between [0 1] as they describe in <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/es2.0/xhtml/glReadPixels.xml\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>An example of the textures I use : </p>\n\n<pre><code>    glGenTextures(1, &amp;pos3d);\n    glBindTexture(GL_TEXTURE_2D, pos3d);\n    glViewport(0, 0, width, height);\n    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, GL_RGBA, GL_FLOAT, NULL);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAX_LEVEL, 0);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);\n    glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0 + gpos3dLayout, GL_TEXTURE_2D, pos3d, 0);\n    glBindTexture(GL_TEXTURE_2D, 0);\n</code></pre>\n\n<p>And then I retrieve using this:</p>\n\n<pre><code>    glActiveTexture(GL_TEXTURE0);\n    glEnable(GL_TEXTURE_2D);\n    glBindTexture(GL_TEXTURE_2D, pos3d);\n    glReadBuffer(GL_COLOR_ATTACHMENT0);\n    std::vector&lt;GLfloat&gt; positions3d(width * height * 4); // 4 because of RGBA * 1 float\n    glReadPixels(0, 0, width, height, GL_RGBA, GL_FLOAT, &amp;positions3d[0]);\n</code></pre>\n\n<p>As I said, my values seems to be clamped between 0 and 1. So is there a way to disable this clamping?</p>\n"}, {"tags": ["c++", "templates", "inheritance", "casting", "derived-class"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 6, "creation_date": 1556111723, "post_id": 55830885, "comment_id": 98326527, "body": "Generally <code>dynamic_cast</code> is code smell.  Normally what you would do here is make a interface in the base class using virtual functions and then use the virtual dispatch mechanism to handle the call to those virtual functions implemented by the derived class."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1556111735, "post_id": 55830885, "comment_id": 98326540, "body": "dont you know the type? It is <code>ATemplate&lt;int&gt;</code> in your example"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1556111746, "post_id": 55830885, "comment_id": 98326547, "body": "<code>dynamic_cast</code> only works with at least a <code>virtual</code> destrucor function at the base. You might be interested to have a lookk at the <a href=\"https://en.wikipedia.org/wiki/Curiously_recurring_template_pattern\" rel=\"nofollow noreferrer\">CRTP</a>"}, {"owner": {"reputation": 6556, "user_id": 874660, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/45a7738c334183bff552bcf73c4dcd65?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/874660/ben"}, "edited": false, "score": 4, "creation_date": 1556111751, "post_id": 55830885, "comment_id": 98326550, "body": "You don\u2019t have a vector of <code>Derived&lt;int&gt;</code> like you think you do. Your <code>push_back</code> is slicing your object: <a href=\"https://en.wikipedia.org/wiki/Object_slicing\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Object_slicing</a>"}, {"owner": {"reputation": 31, "user_id": 11405305, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-K2BWHiQDvVo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcyyWlLD4Dt3WvkiR-gZOfCzuC69g/mo/photo.jpg?sz=128", "display_name": "stark max", "link": "https://stackoverflow.com/users/11405305/stark-max"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1556111882, "post_id": 55830885, "comment_id": 98326651, "body": "@user463035818, Yes I don&#39;t know the type cause I could have double, int, some enums or more"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1556111925, "post_id": 55830885, "comment_id": 98326678, "body": "Tell me if the dupe is wrong or don&#39;t answer the question."}, {"owner": {"reputation": 31, "user_id": 11405305, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-K2BWHiQDvVo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcyyWlLD4Dt3WvkiR-gZOfCzuC69g/mo/photo.jpg?sz=128", "display_name": "stark max", "link": "https://stackoverflow.com/users/11405305/stark-max"}, "reply_to_user": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1556112127, "post_id": 55830885, "comment_id": 98326836, "body": "@GuillaumeRacicot sorry but your link don&#39;t answer my question"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1556112227, "post_id": 55830885, "comment_id": 98326915, "body": "Your friend is correct that <code>std::variant</code> is most likely the right tool here."}, {"owner": {"reputation": 31, "user_id": 11405305, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-K2BWHiQDvVo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcyyWlLD4Dt3WvkiR-gZOfCzuC69g/mo/photo.jpg?sz=128", "display_name": "stark max", "link": "https://stackoverflow.com/users/11405305/stark-max"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1556112334, "post_id": 55830885, "comment_id": 98327013, "body": "@MaxLanghof, thx for the answer but do you have any example on how I would use std::variant in my case ?"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1556112412, "post_id": 55830885, "comment_id": 98327058, "body": "@starkmax You could start at <a href=\"https://en.cppreference.com/w/cpp/utility/variant/visit\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/utility/variant/visit</a> which has a good example (and may look scary), but there is plenty of material available online to become familiar with <code>std::variant</code> and <code>std::visit</code>. The linked duplicate is also relevant (the visitor section), it just doesn&#39;t use <code>std::variant</code> (but the same concept)."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1556112854, "post_id": 55830885, "comment_id": 98327362, "body": "@starkmax I added a variant example to the other question"}, {"owner": {"reputation": 31, "user_id": 11405305, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-K2BWHiQDvVo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcyyWlLD4Dt3WvkiR-gZOfCzuC69g/mo/photo.jpg?sz=128", "display_name": "stark max", "link": "https://stackoverflow.com/users/11405305/stark-max"}, "reply_to_user": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1556114474, "post_id": 55830885, "comment_id": 98328413, "body": "@GuillaumeRacicot Thx for the help ! I&#39;ll use std::variant"}], "owner": {"reputation": 31, "user_id": 11405305, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-K2BWHiQDvVo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcyyWlLD4Dt3WvkiR-gZOfCzuC69g/mo/photo.jpg?sz=128", "display_name": "stark max", "link": "https://stackoverflow.com/users/11405305/stark-max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "closed_date": 1556111897, "answer_count": 0, "score": 2, "last_activity_date": 1556111991, "creation_date": 1556111474, "last_edit_date": 1556111991, "question_id": 55830885, "link": "https://stackoverflow.com/questions/55830885/problem-trying-to-cast-generically-a-derived-templated-class", "closed_reason": "Duplicate", "title": "Problem trying to cast generically a derived templated class", "body": "<p>I'm trying to cast a template derived class to a parent class without knowing it's type.</p>\n\n<p>This is a simplification of the code I have :</p>\n\n<pre><code>/* Base Class */\nclass Base {};\n\n/* Templated derived Class */\ntemplate&lt;typename T&gt;\nclass ATemplate : public Base {  \n  public:\n    T GetData();\n\n  private:\n    T _data;\n};\n\n/* Derived class */\ntemplate&lt;typename T&gt;\nclass Derived : public ATemplate&lt;T&gt; {\n};\n\nvoid main() {\n    std::vector&lt;Base*&gt; vector;\n    vector.push_back(new Derived&lt;int&gt;());\n\n    for (auto var : vector) {\n        if (dynamic_cast&lt;ATemplate&lt;/* I don't know the type of this class*/&gt;&gt;) {\n           /* Do stuff */\n        }\n    }\n}\n</code></pre>\n\n<p>I have a list of Base and I want to dynamic_cast each class of this list to ATemplate.</p>\n\n<p>I would like not to have one cast for each type I created. A friend (cc killian.G) told me I could maybe use std::variant.\nSomeone know if what I'm asking is possible ?</p>\n"}, {"tags": ["c++", "linux", "ssl", "openssl"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1556151265, "post_id": 55830825, "comment_id": 98343753, "body": "<code>certificate = PEM_read_PUBKEY</code> is incorrect. For the verify part, see <a href=\"https://stackoverflow.com/a/16475549/608639\">How to use X509_verify()</a>."}], "answers": [{"comments": [{"owner": {"reputation": 826, "user_id": 2536614, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/93215d53518aa2c7bb4e76313f60face?s=128&d=identicon&r=PG", "display_name": "Mert Mertce", "link": "https://stackoverflow.com/users/2536614/mert-mertce"}, "edited": false, "score": 0, "creation_date": 1556187605, "post_id": 55836833, "comment_id": 98356041, "body": "However, I am not able to verify the signature. Could you please look to   <a href=\"https://stackoverflow.com/questions/55846989/how-to-verify-private-rsa-signed-signature-with-corresponding-x509-certificate\" title=\"how to verify private rsa signed signature with corresponding x509 certificate\">stackoverflow.com/questions/55846989/&hellip;</a>    maybe?"}], "tags": [], "owner": {"reputation": 12010, "user_id": 23235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6281820b28d03f98e85bb3d901ae3f39?s=128&d=identicon&r=PG", "display_name": "Shane Powell", "link": "https://stackoverflow.com/users/23235/shane-powell"}, "is_accepted": true, "score": 1, "last_activity_date": 1556132185, "creation_date": 1556132185, "answer_id": 55836833, "question_id": 55830825, "link": "https://stackoverflow.com/questions/55830825/how-can-i-read-certificate-to-verify-signature-with-openssl/55836833#55836833", "title": "How can I read certificate to verify signature with openssl?", "body": "<p>You are getting confused between a RSA Public Key and a x509 certificate.  The x509 certificate can contain a RSA Public Key, but the \"public key\" by itself (formatted in PEM format) is what PEM_read_PUBKEY reads in.  You have a x509 certificate so you want to use something like <a href=\"https://www.openssl.org/docs/man1.1.1/man3/PEM_read_X509.html\" rel=\"nofollow noreferrer\">PEM_read_X509</a> to read in the x509 certificate and then use <a href=\"https://www.openssl.org/docs/man1.1.0/man3/X509_get_pubkey.html\" rel=\"nofollow noreferrer\">X509_get_pubkey</a> to extract the public key from the X509 certificate. </p>\n"}], "owner": {"reputation": 826, "user_id": 2536614, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/93215d53518aa2c7bb4e76313f60face?s=128&d=identicon&r=PG", "display_name": "Mert Mertce", "link": "https://stackoverflow.com/users/2536614/mert-mertce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "accepted_answer_id": 55836833, "answer_count": 1, "score": 1, "last_activity_date": 1556132185, "creation_date": 1556111313, "last_edit_date": 1556113074, "question_id": 55830825, "link": "https://stackoverflow.com/questions/55830825/how-can-i-read-certificate-to-verify-signature-with-openssl", "title": "How can I read certificate to verify signature with openssl?", "body": "<p>I have generated a private key and corresponding certificate with <strong>openssl</strong> on linux, with these commands:</p>\n\n<pre><code>openssl req -x509 -newkey rsa:1024 -keyout key.pem -out certificate.pem -days 730 -nodes\n</code></pre>\n\n<p>This has generated to me two files: <strong>key.pem</strong> and <strong>certificate.pem</strong></p>\n\n<p>Using key.pem, with C++ (<strong>PEM_read_PrivateKey</strong>, <strong>RSA_sign</strong>) I have signed some data.</p>\n\n<p>Now using the certificate I want to verify the signature.</p>\n\n<p>However, while reading the certificate, I got an error, ie, the function PEM_read_PUBKEY returns me <strong>NULL</strong>:</p>\n\n<pre><code>FILE * certificate_fd = NULL;\n\nstd::string cert_file = \"certificate.pem\";\ncertificate_fd = fopen(cert_file.toLatin1().data(), \"rt\");\n\nif (NULL == certificate_fd) return;\n\nEVP_PKEY * certificate = NULL;\ncertificate = PEM_read_PUBKEY(certificate_fd, NULL, NULL, NULL);\n</code></pre>\n\n<p>What do I do wrong with <strong>PEM_read_PUBKEY</strong>?</p>\n\n<p>The content of certificate.pem is this:</p>\n\n<pre><code>-----BEGIN CERTIFICATE-----\nMIICSDCCAbmgAwIBAgIJANsiiJZfGhv6MAUGAQAFADBFMQswCQYDVQQGEwJBVTET\nMBEGA1UECAwKU29tZS1TdGF0ZTEhMB8GA1UECgwYSW50ZXJuZXQgV2lkZ2l0cyBQ\ndHkgTHRkMB4XDTE5MDQyMjA4MDYzN1oXDTIxMDQyMTA4MDYzN1owRTELMAkGA1UE\nBhMCQVUxEzARBgNVBAgMClNvbWUtU3RhdGUxITAfBgNVBAoMGEludGVybmV0IFdp\nZGdpdHMgUHR5IEx0ZDCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAyRvzRUsq\n3emLnazT/4ltvq9fA3sIK8hJrQ0Toom1aNNzJEowGwgMdXrooaxwj8Ggx7vaGOiU\naLwsAgaHWSWgu+9hGT14wm1IKxqKuq1fRtEzLnfm6TrQFX2nw5PcNaHd9oLn/Lae\nQClGWqyCPCGT1oqYdLAdNdAZnwfCQ/9Fh+UCAwEAAaNQME4wHQYDVR0OBBYEFCBk\nua4N8cd3ab48CqiHe2dHe4kSMB8GA1UdIwQYMBaAFCBkua4N8cd3ab48CqiHe2dH\ne4kSMAwGA1UdEwQFMAMBAf8wBQYBAAUAA4GBAKX6x75Bqk5oQ5lPRtliyeJIBWJJ\nungemucA6AbfDezvelPLbe712JDWYMULL3Yp6lz4pHEVvmlpHUecc6cM0WZk2gdY\n+dwYtf/DRNNxkjth41CxZMB5zg0+bIFuOrJ8dzWGRIZ1m3zuQG+y5BOm3ktoqnaQ\n2PIvUl4tEUsJaStq\n-----END CERTIFICATE-----\n</code></pre>\n\n<p><strong>Edit:</strong></p>\n\n<p>I have seen that the problem is with <strong>-------BEGIN CERTIFICATE------</strong> / <strong>------END CERTIFICATE---------</strong>.</p>\n\n<p>But it is generated by openssl. So what is wrong?</p>\n"}, {"tags": ["c++", "c++11"], "answers": [{"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1556111301, "post_id": 55830795, "comment_id": 98326219, "body": "How detachment related to standard output of child console process?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1556111388, "post_id": 55830795, "comment_id": 98326285, "body": "@Slava <a href=\"https://en.wikipedia.org/wiki/Daemon_(computing)#Unix-like_systems\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Daemon_(computing)#Unix-like_systems</a>"}, {"owner": {"reputation": 1256, "user_id": 817905, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/pM2Uh.jpg?s=128&g=1", "display_name": "Miguel E", "link": "https://stackoverflow.com/users/817905/miguel-e"}, "edited": false, "score": 0, "creation_date": 1556111527, "post_id": 55830795, "comment_id": 98326369, "body": "@LightnessRacesinOrbit any workaround. I need the output from a console app, that I don&#39;t control, in my daemon. Any pointer in how to achieve that?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1556111529, "post_id": 55830795, "comment_id": 98326370, "body": "And? How is controlling terminal is related to standard output and why existance or non existance of one affects abuility to redirect output of child process? Do you want to say I cannot run a process from crontab and redirect its output to a file?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 1256, "user_id": 817905, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/pM2Uh.jpg?s=128&g=1", "display_name": "Miguel E", "link": "https://stackoverflow.com/users/817905/miguel-e"}, "edited": false, "score": 0, "creation_date": 1556111616, "post_id": 55830795, "comment_id": 98326431, "body": "@MiguelE it depends what that app do and why it does not produce output. I believe this answer is incorrect."}, {"owner": {"reputation": 1256, "user_id": 817905, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/pM2Uh.jpg?s=128&g=1", "display_name": "Miguel E", "link": "https://stackoverflow.com/users/817905/miguel-e"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1556111755, "post_id": 55830795, "comment_id": 98326557, "body": "@Slava is it possible change the popen call to make the app write the output to a file?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 1256, "user_id": 817905, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/pM2Uh.jpg?s=128&g=1", "display_name": "Miguel E", "link": "https://stackoverflow.com/users/817905/miguel-e"}, "edited": false, "score": 0, "creation_date": 1556111927, "post_id": 55830795, "comment_id": 98326679, "body": "@MiguelE it is possible not to use <code>popen()</code> but you need to find out first why there is no output. Run this console app from shell with redirected output. Does it produce  data?"}, {"owner": {"reputation": 1256, "user_id": 817905, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/pM2Uh.jpg?s=128&g=1", "display_name": "Miguel E", "link": "https://stackoverflow.com/users/817905/miguel-e"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1556112049, "post_id": 55830795, "comment_id": 98326761, "body": "@Slava works fine from terminal, or if I use the above procedure from another non-deamon app I compile."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1556112060, "post_id": 55830795, "comment_id": 98326775, "body": "It is funny how rep makes people +1 incorrect answer"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 1256, "user_id": 817905, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/pM2Uh.jpg?s=128&g=1", "display_name": "Miguel E", "link": "https://stackoverflow.com/users/817905/miguel-e"}, "edited": false, "score": 0, "creation_date": 1556112223, "post_id": 55830795, "comment_id": 98326910, "body": "@MiguelE it needs investigation, for example running it with <code>nohup</code>, unfortunately this is not format for SO."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1556112427, "post_id": 55830795, "comment_id": 98327074, "body": "@Slava Feel free to write a competing answer instead of complaining about people voting against you!"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 2, "last_activity_date": 1556111233, "creation_date": 1556111233, "answer_id": 55830795, "question_id": 55830746, "link": "https://stackoverflow.com/questions/55830746/capture-output-from-console-app-started-by-daemon/55830795#55830795", "title": "Capture output from console app started by daemon", "body": "<p>It isn't. A daemon runs detached. That's what makes it a daemon.</p>\n\n<p>Usually a daemon will log somewhere (e.g. via <code>syslog</code> on Linux) and you can observe the log target for information.</p>\n\n<p>Otherwise, don't run it as a daemon.</p>\n"}], "owner": {"reputation": 1256, "user_id": 817905, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/pM2Uh.jpg?s=128&g=1", "display_name": "Miguel E", "link": "https://stackoverflow.com/users/817905/miguel-e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556111233, "creation_date": 1556111078, "question_id": 55830746, "link": "https://stackoverflow.com/questions/55830746/capture-output-from-console-app-started-by-daemon", "title": "Capture output from console app started by daemon", "body": "<p>How is it possible to capture the output from a console app, if it's started by a daemon process in Ubuntu Server 18.04? For a non-daemon process I usually use this:</p>\n\n<pre><code>string myexec(const char* cmd) \n{\n    array&lt;char, 128&gt; buffer;\n    string result = \"\";\n    unique_ptr&lt;FILE, decltype(&amp;pclose)&gt; pipe(popen(cmd, \"r\"), pclose);\n    if (!pipe) \n    {\n        result = \"FAIL\";\n        throw std::runtime_error(\"popen() failed!\");\n    }\n    while (fgets(buffer.data(), buffer.size(), pipe.get()) != nullptr) \n    {\n        result += buffer.data();\n    }\n    return result;\n}\n</code></pre>\n\n<p>Running this, as is, from the daemon doesn't fail, just returns empty.</p>\n"}, {"tags": ["c++", "qt", "widget"], "comments": [{"owner": {"reputation": 55, "user_id": 9009876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c548f6387c2002614a9e2980d953e06?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/9009876/felix"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1556109589, "post_id": 55830173, "comment_id": 98325176, "body": "I edited it, so I basically get nothing in my window. I only get the widget w/o colors that I can move to the side or top of the window."}, {"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 2, "creation_date": 1556109636, "post_id": 55830173, "comment_id": 98325204, "body": "You&#39;re not doing anything with the <code>pic</code> you colored in."}, {"owner": {"reputation": 1605, "user_id": 4179302, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-71QIq2eev8E/AAAAAAAAAAI/AAAAAAAAA0c/KCUZGf1P-7Y/photo.jpg?sz=128", "display_name": "apalomer", "link": "https://stackoverflow.com/users/4179302/apalomer"}, "edited": false, "score": 0, "creation_date": 1556111232, "post_id": 55830173, "comment_id": 98326176, "body": "Use <a href=\"https://doc.qt.io/qt-5/qpainter.html#drawImage\" rel=\"nofollow noreferrer\"><code>QPainter::drawImage</code></a> to paint the image you coloured. <a href=\"https://doc.qt.io/qt-5/qtwidgets-widgets-scribble-example.html\" rel=\"nofollow noreferrer\">Here</a> you have an example of how to use <code>QPainter</code> to draw an image (look into <code>ScribbleArea::paintEvent(QPaintEvent *event)</code> implementation)."}], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 5130169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xVVEf.jpg?s=128&g=1", "display_name": "ravaei", "link": "https://stackoverflow.com/users/5130169/ravaei"}, "is_accepted": false, "score": 0, "last_activity_date": 1556110477, "creation_date": 1556110477, "answer_id": 55830549, "question_id": 55830173, "link": "https://stackoverflow.com/questions/55830173/how-to-make-a-custom-color-picker-in-qt/55830549#55830549", "title": "How to make a custom color picker in Qt?", "body": "<p>This is not what do you exactly want but may show you a good vision for doing that.\nyou can have three  <a href=\"https://doc.qt.io/qt-5/qslider.html\" rel=\"nofollow noreferrer\">QSlider</a> which represent 3 main colors red green and blue the value of sliders should be ranged between 0 to 255 for each of them.</p>\n\n<p>Then create a square Qlabel and paint the backgroundColor of it by css with sliders value something like this :</p>\n\n<pre><code>QLabel* label = new QLabel;\nlabel-&gt;-&gt;setStyleSheet(\"background-color:rgb(slider1-&gt;value();,sliderGreen-&gt;value();,slideBlue-&gt;value(););\");\n</code></pre>\n\n<p>Dude it just a concept of the code and its not really code please reWrite it not paste it thanks :)</p>\n"}, {"tags": [], "owner": {"reputation": 42880, "user_id": 982161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/kutcC.png?s=128&g=1", "display_name": "\u03a6Xoc\u0119 \uc6c3 \u041fepe&#250;pa \u30c4", "link": "https://stackoverflow.com/users/982161/%ce%a6xoc%c4%99-%ec%9b%83-%d0%9fepe%c3%bapa-%e3%83%84"}, "is_accepted": false, "score": 0, "last_activity_date": 1556132561, "creation_date": 1556132561, "answer_id": 55836924, "question_id": 55830173, "link": "https://stackoverflow.com/questions/55830173/how-to-make-a-custom-color-picker-in-qt/55836924#55836924", "title": "How to make a custom color picker in Qt?", "body": "<p>in the color selector you can paint the background of the widget using the r,g,b,a from a Qslider for example</p>\n\n<pre><code>void paintEvent(QPaintEvent* e) {\n    QPainter painter{this};\n    //and now fill the background!\n    painter.setBrush(QColor(r.value(), g.value(), b.value(), a.value()));\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2021, "user_id": 2452869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mpaEJ.jpg?s=128&g=1", "display_name": "Anton Menshov", "link": "https://stackoverflow.com/users/2452869/anton-menshov"}, "edited": false, "score": 0, "creation_date": 1587840921, "post_id": 61425931, "comment_id": 108670122, "body": "Welcome to Stack Overflow! Whilst this may theoretically answer the question, <a href=\"//meta.stackexchange.com/q/8259\">it would be preferable</a> to include the essential parts of the answer here, and provide the link for reference."}], "tags": [], "owner": {"reputation": 21, "user_id": 13405065, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GgQQHo4QHZQ/AAAAAAAAAAI/AAAAAAAAAAA/AAKWJJO_30cz3qDMJ5B0THM5tbWo5te4Sg/photo.jpg?sz=128", "display_name": "Omega Override", "link": "https://stackoverflow.com/users/13405065/omega-override"}, "is_accepted": false, "score": 0, "last_activity_date": 1587819131, "creation_date": 1587819131, "answer_id": 61425931, "question_id": 55830173, "link": "https://stackoverflow.com/questions/55830173/how-to-make-a-custom-color-picker-in-qt/61425931#61425931", "title": "How to make a custom color picker in Qt?", "body": "<p>Have a look at this custom Circular Color Picker for PyQt</p>\n\n<p><a href=\"https://github.com/omega0verride/PyQt-ColorPicker\" rel=\"nofollow noreferrer\">Circular PyQt ColorPicker</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/qYy14.png\" rel=\"nofollow noreferrer\">It looks like this and can easily added as a Widget and modified</a></p>\n"}], "owner": {"reputation": 55, "user_id": 9009876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c548f6387c2002614a9e2980d953e06?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/9009876/felix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1071, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1587819131, "creation_date": 1556109238, "last_edit_date": 1556109516, "question_id": 55830173, "link": "https://stackoverflow.com/questions/55830173/how-to-make-a-custom-color-picker-in-qt", "title": "How to make a custom color picker in Qt?", "body": "<p>I'm trying to make a custom color picker, I should have everything I need to fill in the image with the colors. When I run the program it displays nothing only a the widget w/o colors that I can move to the left or top.</p>\n\n<p>I added the QWidget in the designer tab, promoted it to the new class I made named, \"ColorPicker\". I added a protected function paintEvent in my header file.</p>\n\n<p>My CPP file of ColorPicker:</p>\n\n<pre><code>#include \"colorselector.h\"\n\nColorSelector::ColorSelector(QWidget *parent) : QWidget(parent)\n{\n}\n\nvoid ColorSelector::paintEvent(QPaintEvent *){\n    QColor c;\n    QImage pic(360,20,QImage::Format_RGB32);\n    for(int x=0; x &lt; 360; x++){\n       for(int y=0; y &lt; 20; y++){\n           c.setHsl(x,255,127);\n           pic.setPixel(x,y,c.rgb());\n           }\n     }\n}\n\n</code></pre>\n\n<p>My header file of ColorPicker:</p>\n\n<pre><code>#ifndef COLORSELECTOR_H\n#define COLORSELECTOR_H\n\n#include &lt;QWidget&gt;\n\nclass ColorSelector : public QWidget\n{\n    Q_OBJECT\npublic:\n    explicit ColorSelector(QWidget *parent = nullptr);\nprotected:\n    void paintEvent(QPaintEvent *);\n\nsignals:\n\npublic slots:\n};\n\n#endif // COLORSELECTOR_H\n\n</code></pre>\n\n<p>It should give me a rainbow of colors in a QWidget.</p>\n"}, {"tags": ["c#", "c++", "windows", "multithreading", "unity3d"], "owner": {"reputation": 31, "user_id": 11404356, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-D6F9467FNUQ/AAAAAAAAAAI/AAAAAAAAABE/4ijK1btzpvs/photo.jpg?sz=128", "display_name": "Lin Xuhao", "link": "https://stackoverflow.com/users/11404356/lin-xuhao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 204, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1556203839, "creation_date": 1556108448, "last_edit_date": 1556203839, "question_id": 55829924, "link": "https://stackoverflow.com/questions/55829924/unity-setwindowshook-and-multi-thread-for-frame-independent-input-system-on-win", "title": "Unity, setWindowsHook and multi-thread for frame independent input system on Windows", "body": "<hr>\n\n<p>I want to achieve a frame independent touch input system In Unity to get touches events from Windows directly.</p>\n\n<p><strong><em>What I have done is :</em></strong></p>\n\n<p>=> Write a <strong><em>C++</em></strong> code to set up Windows Hook on Global <a href=\"https://docs.microsoft.com/en-us/windows/desktop/wintouch/wm-touchdown\" rel=\"nofollow noreferrer\" title=\"WM-TouchDoc\">WM-Touch</a> Message. (Using <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/winuser/nf-winuser-setwindowshookexw\" rel=\"nofollow noreferrer\" title=\"SetWindowsHookEx Doc\">SetWindowsHookEx</a>, with thread Id = 0 for global message), compile it into a <strong><em>DLL</em></strong>. </p>\n\n<p><a href=\"https://software.intel.com/en-us/articles/adding-multi-touch-support-to-unity-games-on-microsoft-windows-7-and-windows-8-desktop\" rel=\"nofollow noreferrer\" title=\"The base code\">Code based on this article</a></p>\n\n<pre><code>void DLL_initialize_hook(IntPtr window_handler)\n{\n    // &lt;g_hInst&gt; is the DLL handler\n    // &lt;HookProcPosted&gt; and &lt;HookProcCalled&gt; are the functions\n    // to filter and manage touch messages\n    SetWindowsHookEx(WH_GETMESSAGE, (HOOKPROC)HookProcPosted, g_hInst, 0);\n    SetWindowsHookEx(WH_CALLWNDPROC, (HOOKPROC)HookProcCalled, g_hInst, 0);\n\n    //register touch window to receive touch data as WM-Touch\n    int fine_touch = 1;\n    RegisterTouchWindow(window_handler, fine_touch );\n}\n\n\n</code></pre>\n\n<p>=> Create a <strong><em>DLL_Interface Singleton</em></strong> class using <strong><em>C#</em></strong> to encapsulate functions from the DLL.</p>\n\n<pre><code>void StartHook(IntPtr unity_window_handler )\n{\n  DLL_initialize_hook(unity_window_handler );\n}\n\nTouch[] getAllTouchData()\n{\n    //Actually there are more steps than just calling 2 function\n    //that's why i wraped it\n    TouchData[] data = DLL_getTouchData()\n    return ConvertAllData(data );\n}\n\n</code></pre>\n\n<p>=> Create a <strong><em>new thread</em></strong> (let's name it <strong><em>loop_thread</em></strong>) in <strong><em>Unity</em></strong> using <strong><em>C#</em></strong>, <strong><em>initialize the Hook in loop_thread</em></strong> using functions from the DLL compiled previously (the DLL initialize function requires the Unity window handler to register it as a touch window : <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/winuser/nf-winuser-registertouchwindow\" rel=\"nofollow noreferrer\" title=\"RegisterTouchWindowDoc\">RegisterTouchWindow</a>)</p>\n\n<pre><code>//the function to run in the thread\nvoid Thread_run()\n{\n    Thread_Initialize();\n    Thread_Loop();\n}\n\nvoid Thread_Initialize()\n{\n    DLL_Interface.StarHook(unity_window_handler);\n}\n\n</code></pre>\n\n<p>=> The loop_thread pull the touch event at 250Hz from DLL (The DLL only output new Data)</p>\n\n<pre><code>void Thread_Loop()\n{\n    while(running)\n    {\n        //Get the Touche data using a function from singleton interface\n        List&lt;Touch&gt; touches = DLL_Interface.Instance.getAllTouchData();\n\n        //Conversion and put the data available for Unity in a thread safe way\n        ManageTheTouches(touches);\n\n        //Wait next pull\n        Thread.sleep(sleep_time)\n    }\n}\n</code></pre>\n\n<hr>\n\n<p>What i want is to <strong><em>receive touch input without being limited by the Unity frame update rate</em></strong>.</p>\n\n<p>Even though i <strong><em>initialized a global hook</em></strong> for touch messages on <strong><em>loop_thread</em></strong>, and pull the touch input with 250Hz as frequency, <strong><em>the touch input rate is still limited by Unity frame update rate</em></strong>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/pBhla.png\" rel=\"nofollow noreferrer\">Unity update rate is 30 Hz, touch input also limited at 30 Hz</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/9PxmJ.png\" rel=\"nofollow noreferrer\">Unity update rate is 60 Hz, touch input also limited at 60 Hz</a></p>\n\n<p><strong>Why the Hook initialized on loop_thread is limited by Unity's main thread's frame rate ?</strong></p>\n\n<p>I have several suspects :</p>\n\n<p>=><strong><em>RegisterTouchWindow</em></strong> function is waitting Unity's main thread's response before sending the WM-Touch message, that's why i can't bypass Unity's frame update rate using this function.</p>\n\n<p>=><strong><em>SetWindowHookEx</em></strong> function somehow inject the code to filter messages into Unity's main thread, so it is limited by the Unity's main thread's frame rate.(In <strong><em>documentation</em></strong> it is stated out that : \"the system executes the hook in the hooking app's context; specifically, on the thread that called SetWindowsHookEx\")</p>\n\n<p>=>Calling the hook initialize function from the DLL in loop_thread does not install the hook on the loop_thread, but on the caller's main thread(in this case, the Unity main thread?).</p>\n"}, {"tags": ["c++", "multiple-inheritance", "diamond-problem"], "comments": [{"owner": {"reputation": 127, "user_id": 3267138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2e9412e7df28acafc4cb58d1c41dfc6?s=128&d=identicon&r=PG&f=1", "display_name": "titapo", "link": "https://stackoverflow.com/users/3267138/titapo"}, "edited": false, "score": 17, "creation_date": 1556108620, "post_id": 55829798, "comment_id": 98324587, "body": "Both Flier and Swimmer&#39;s print explicitly calls Creature&#39;s print. If I were you I would make an attempt to solve the problem without this inheritance. &quot;Composition over inheritance.&quot; For example ECS (entity component system) is exactly about to put properties together in a flexible way without the inheritance hell."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1556108652, "post_id": 55829798, "comment_id": 98324609, "body": "add (protected)method to your extra <code>std::cout</code>, so you can choose which version to call exactly."}, {"owner": {"reputation": 5615, "user_id": 1858327, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/i9v0b.jpg?s=128&g=1", "display_name": "Captain Man", "link": "https://stackoverflow.com/users/1858327/captain-man"}, "reply_to_user": {"reputation": 127, "user_id": 3267138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2e9412e7df28acafc4cb58d1c41dfc6?s=128&d=identicon&r=PG&f=1", "display_name": "titapo", "link": "https://stackoverflow.com/users/3267138/titapo"}, "edited": false, "score": 1, "creation_date": 1556133851, "post_id": 55829798, "comment_id": 98338585, "body": "@titapo that is a good suggestion, please post it as an answer instead of a comment."}, {"owner": {"reputation": 49, "user_id": 4543939, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-uC-2bEHfXoU/AAAAAAAAAAI/AAAAAAAAADI/fqmbVuZcQp8/photo.jpg?sz=128", "display_name": "Lukas Plazovnik", "link": "https://stackoverflow.com/users/4543939/lukas-plazovnik"}, "edited": false, "score": 1, "creation_date": 1556137448, "post_id": 55829798, "comment_id": 98347021, "body": "As other people posted solutions already, I&#39;d like to emphasize here, that you do not really want to use multiple inheritance and especially a diamond inheritance at all: <a href=\"https://stackoverflow.com/questions/406081/why-should-i-avoid-multiple-inheritance-in-c\" title=\"why should i avoid multiple inheritance in c\">stackoverflow.com/questions/406081/&hellip;</a>"}, {"owner": {"reputation": 144, "user_id": 3630047, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aSxMB.jpg?s=128&g=1", "display_name": "Wilfred Smith", "link": "https://stackoverflow.com/users/3630047/wilfred-smith"}, "edited": false, "score": 0, "creation_date": 1556190279, "post_id": 55829798, "comment_id": 98357541, "body": "I use multiple inheritances ALL the time professionally. It&#39;s not a bad thing, just that most people don&#39;t understand the repercussions of multiple inheritances and how to avoid digging yourself into a hole. It&#39;s wonderful for MVC and all manner of GUI stuff!"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1556192072, "post_id": 55829798, "comment_id": 98358513, "body": "It&#39;s a bad thing precisely because there are so many repercussions and it is so easy to dig yourself into a hole. Code is cleaner and clearer without it. Profesionally."}], "answers": [{"comments": [{"owner": {"reputation": 25103, "user_id": 1340389, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d0e5b16679b92b24c8262e1e6aa2aa7?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1340389/kevin"}, "edited": false, "score": 1, "creation_date": 1556134516, "post_id": 55830020, "comment_id": 98338830, "body": "That makes every instance allocate an entire <code>std::vector</code>, which is a bit heavy."}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "reply_to_user": {"reputation": 25103, "user_id": 1340389, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d0e5b16679b92b24c8262e1e6aa2aa7?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1340389/kevin"}, "edited": false, "score": 6, "creation_date": 1556146666, "post_id": 55830020, "comment_id": 98342984, "body": "@Kevin I&#39;m guessing you won&#39;t like vtables either. :)"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1556194707, "post_id": 55830020, "comment_id": 98359992, "body": "@wally vtables involve storing a pointer to a bit of read-only memory - can often be done in a single move instruction.  Vectors involve allocating memory from the heap, which is going to involve grabbing and releasing a mutex, with all the memory barrier and cache-flushing that implies."}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 1, "creation_date": 1556198606, "post_id": 55830020, "comment_id": 98362538, "body": "@MartinBonner Other threads wouldn&#39;t have access to the object until after construction. Why would you need to lock a mutex for the vector? And where did you hear that you need a mutex for heap allocation?"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1556199840, "post_id": 55830020, "comment_id": 98363355, "body": "@wally - it&#39;s the heap allocation that needs the mutex.  The heap is a shared data structure in all the implementations I am familiar with, so it needs a mutex.  (You can allocate from a per-thread heap, but you need to support freeing from an arbitrary thread - so you still need a mutex.)"}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 1, "creation_date": 1556202982, "post_id": 55830020, "comment_id": 98365395, "body": "@MartinBonner If you&#39;re referring to the locking that the operating system does then it is unavoidable. I suppose that if you create the vector with the correct size then the extra malloc might be optimized away if you&#39;re creating the entire object on the heap anyway. The contention between threads might also be reduced if the OS decided to use separate arenas for the allocations. The OS might also not be using a mutex. In general, defensively designing around this would be impractical. std::vector is not that bad."}], "tags": [], "owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "is_accepted": false, "score": 23, "last_activity_date": 1556133280, "last_edit_date": 1556133280, "creation_date": 1556108717, "answer_id": 55830020, "question_id": 55829798, "link": "https://stackoverflow.com/questions/55829798/c-diamond-problem-how-to-call-base-method-only-once/55830020#55830020", "title": "C++ diamond problem - How to call base method only once", "body": "<p>We can let the base class keep track of the attributes:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\nusing namespace std::string_literals;\n\nclass Creature\n{\npublic:\n    std::string const attribute{\"I'm a creature\"s};\n    std::vector&lt;std::string&gt; attributes{attribute};\n    virtual void print()\n    {\n        for (auto&amp; i : attributes)\n            std::cout &lt;&lt; i &lt;&lt; std::endl;\n    }\n};\n\nclass Swimmer : public virtual Creature\n{\npublic:\n    Swimmer() { attributes.push_back(attribute); }\n    std::string const attribute{\"I can swim\"s};\n};\n\nclass Flier : public virtual Creature\n{\npublic:\n    Flier() { attributes.push_back(attribute); }\n    std::string const attribute{\"I can fly\"s};\n};\n\nclass Duck : public Flier, public Swimmer\n{\npublic:\n    Duck() { attributes.push_back(attribute); }\n    std::string const attribute{\"I'm a duck\"s};\n};\n\nint main()\n{\n    Duck d;\n    d.print();\n}\n</code></pre>\n\n<hr>\n\n<p>Likewise, if it is not just printing we're after, but rather the function calls, then we could let the base class keep track of the functions:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\n#include &lt;vector&gt;\n\nclass Creature\n{\npublic:\n    std::vector&lt;std::function&lt;void()&gt;&gt; print_functions{[this] {Creature::print_this(); }};\n    virtual void print_this()\n    {\n        std::cout &lt;&lt; \"I'm a creature\" &lt;&lt; std::endl;\n    }\n    void print()\n    {\n        for (auto&amp; f : print_functions)\n            f();\n    }\n};\n\nclass Swimmer : public virtual Creature\n{\npublic:\n    Swimmer() { print_functions.push_back([this] {Swimmer::print_this(); }); }\n    void print_this()\n    {\n        std::cout &lt;&lt; \"I can swim\" &lt;&lt; std::endl;\n    }\n};\n\nclass Flier : public virtual Creature\n{\npublic:\n    Flier() { print_functions.push_back([this] {Flier::print_this(); }); }\n    void print_this()\n    {\n        std::cout &lt;&lt; \"I can fly\" &lt;&lt; std::endl;\n    }\n};\n\nclass Duck : public Flier, public Swimmer\n{\npublic:\n    Duck() { print_functions.push_back([this] {Duck::print_this(); }); }\n    void print_this()\n    {\n        std::cout &lt;&lt; \"I'm a duck\" &lt;&lt; std::endl;\n    }\n};\n\nint main()\n{\n    Duck d;\n    d.print();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 6, "last_activity_date": 1556192053, "last_edit_date": 1556192053, "creation_date": 1556108770, "answer_id": 55830034, "question_id": 55829798, "link": "https://stackoverflow.com/questions/55829798/c-diamond-problem-how-to-call-base-method-only-once/55830034#55830034", "title": "C++ diamond problem - How to call base method only once", "body": "<p>Your explicit calls to the <code>print</code> methods form the crux of the issue.</p>\n\n<p>One way round this would be to drop the <code>print</code> calls, and replace them with say</p>\n\n<pre><code>void queue(std::set&lt;std::string&gt;&amp; data)\n</code></pre>\n\n<p>and you accumulate the print messages into the <code>set</code>. Then it doesn't matter those functions in the hierarchy get called more than once.</p>\n\n<p>You then implement the printing of the set in a single method in <code>Creature</code>.</p>\n\n<p>If you want to preserve the order of printing, then you'd need to replace the <code>set</code> with another container that respects the order of insertion and rejects duplicates.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "is_accepted": false, "score": 50, "last_activity_date": 1556670332, "last_edit_date": 1556670332, "creation_date": 1556108996, "answer_id": 55830098, "question_id": 55829798, "link": "https://stackoverflow.com/questions/55829798/c-diamond-problem-how-to-call-base-method-only-once/55830098#55830098", "title": "C++ diamond problem - How to call base method only once", "body": "<p>Most likely this is a XY problem. But ... just don't call it twice.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass Creature\n{\npublic:\n    virtual void identify()\n    {\n        std::cout &lt;&lt; \"I'm a creature\" &lt;&lt; std::endl;\n    }\n};\n\nclass Swimmer : public virtual Creature\n{\npublic:\n    virtual void identify() override\n    {\n        Creature::identify();\n        tell_ability();\n        std::cout &lt;&lt; \"I'm a swimmer\\n\";\n    }\n\n    virtual void tell_ability()\n    {\n        std::cout &lt;&lt; \"I can swim\\n\";\n    }\n};\n\nclass Flier : public virtual Creature\n{\npublic:\n    virtual void identify() override\n    {\n        Creature::identify();\n        tell_ability();\n        std::cout &lt;&lt; \"I'm a flier\\n\";\n    }\n\n    virtual void tell_ability()\n    {\n        std::cout &lt;&lt; \"I can fly\\n\";\n    }\n};\n\nclass Duck : public Flier, public Swimmer\n{\npublic:\n    virtual void tell_ability() override\n    {\n        Flier::tell_ability();\n        Swimmer::tell_ability();\n    }\n\n    virtual void identify() override\n    {\n        Creature::identify();\n        tell_ability();\n        std::cout &lt;&lt; \"I'm a duck\\n\";\n    }\n};\n\nint main()\n{\n    Creature c;\n    c.identify();\n    std::cout &lt;&lt; \"------------------\\n\";\n\n    Swimmer s;\n    s.identify();\n    std::cout &lt;&lt; \"------------------\\n\";\n\n    Flier f;\n    f.identify();\n    std::cout &lt;&lt; \"------------------\\n\";\n\n    Duck d;\n    d.identify();\n    std::cout &lt;&lt; \"------------------\\n\";\n}\n</code></pre>\n\n<h3>Output:</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>I'm a creature\n------------------\nI'm a creature\nI can swim\nI'm a swimmer\n------------------\nI'm a creature\nI can fly\nI'm a flier\n------------------\nI'm a creature\nI can fly\nI can swim\nI'm a duck\n------------------\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "is_accepted": false, "score": 9, "last_activity_date": 1556115835, "last_edit_date": 1556115835, "creation_date": 1556115487, "answer_id": 55832294, "question_id": 55829798, "link": "https://stackoverflow.com/questions/55829798/c-diamond-problem-how-to-call-base-method-only-once/55832294#55832294", "title": "C++ diamond problem - How to call base method only once", "body": "<p>An easy way is to create a bunch of helper classes that mimick the inheritance structure of your main hierarchy and do all the printing in their constructors.</p>\n\n<pre><code> struct CreaturePrinter {\n    CreaturePrinter() { \n       std::cout &lt;&lt; \"I'm a creature\\n\";\n    }\n };\n\n struct FlierPrinter: virtual CreaturePrinter ... \n struct SwimmerPrinter: virtual CreaturePrinter ...\n struct DuckPrinter: FlierPrinter, SwimmerPrinter ...\n</code></pre>\n\n<p>Then each print method in the main hierarchy just creates the corresponding helper class. No manual chaining.</p>\n\n<p>For maintainability you can make each printer class nested in its corresponding main class.</p>\n\n<p>Naturally in most real world cases you want to pass a reference to the main object as an argument to the constructor of its helper. </p>\n"}, {"tags": [], "owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "is_accepted": false, "score": 6, "last_activity_date": 1556192225, "last_edit_date": 1556192225, "creation_date": 1556116559, "answer_id": 55832652, "question_id": 55829798, "link": "https://stackoverflow.com/questions/55829798/c-diamond-problem-how-to-call-base-method-only-once/55832652#55832652", "title": "C++ diamond problem - How to call base method only once", "body": "<p>If you want that middle class method, do not call the base class method. The easiest and simplest way is to extract extra methods, and then reimplementing <code>Print</code> is easy.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class Creature\n{\n    public:\n        virtual void print()\n        {\n            std::cout &lt;&lt; \"I'm a creature\" &lt;&lt; std::endl;\n        }\n};\n\nclass Swimmer : public virtual Creature\n{\n     public:\n        void print()\n        {\n            Creature::print();\n            detailPrint();\n        }\n\n        void detailPrint()\n        {\n            std::cout &lt;&lt; \"I can swim\" &lt;&lt; std::endl;\n        }\n};\n\nclass Flier : public virtual Creature\n{\n     public:\n        void print()\n        {\n            Creature::print();\n            detailPrint();\n        }\n\n        void detailPrint()\n        {\n            std::cout &lt;&lt; \"I can fly\" &lt;&lt; std::endl;\n        }\n};\n\nclass Duck : public Flier, public Swimmer\n{\n     public:\n        void print()\n        {\n            Creature::Print();\n            Flier::detailPrint();\n            Swimmer::detailPrint();\n            detailPrint();\n        }\n\n        void detailPrint()\n        {\n            std::cout &lt;&lt; \"I'm a duck\" &lt;&lt; std::endl;\n        }\n};\n</code></pre>\n\n<p>Without details what is your actual problem is, it hard to come up with a better solution.</p>\n"}, {"tags": [], "owner": {"reputation": 1409, "user_id": 6385640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-muwyWfIjFd8/AAAAAAAAAAI/AAAAAAAAAG0/nctjQMOQOQY/photo.jpg?sz=128", "display_name": "Red.Wave", "link": "https://stackoverflow.com/users/6385640/red-wave"}, "is_accepted": false, "score": 4, "last_activity_date": 1556192325, "last_edit_date": 1556192325, "creation_date": 1556130418, "answer_id": 55836420, "question_id": 55829798, "link": "https://stackoverflow.com/questions/55829798/c-diamond-problem-how-to-call-base-method-only-once/55836420#55836420", "title": "C++ diamond problem - How to call base method only once", "body": "<p>Use:</p>\n\n<pre><code>template&lt;typename Base, typename Derived&gt;\nbool is_dominant_descendant(Derived * x) {\n    return std::abs(\n        std::distance(\n            static_cast&lt;char*&gt;(static_cast&lt;void*&gt;(x)),\n            static_cast&lt;char*&gt;(static_cast&lt;void*&gt;(dynamic_cast&lt;Base*&gt;(x)))\n        )\n    ) &lt;= sizeof(Derived);\n};\n\nclass Creature\n{\npublic:\n    virtual void print()\n    {\n        std::cout &lt;&lt; \"I'm a creature\" &lt;&lt; std::endl;\n    }\n};\n\nclass Walker : public virtual Creature\n{\npublic:\n    void print()\n    {\n        if (is_dominant_descendant&lt;Creature&gt;(this))\n            Creature::print();\n        std::cout &lt;&lt; \"I can walk\" &lt;&lt; std::endl;\n    }\n};\n\nclass Swimmer : public virtual Creature\n{\npublic:\n    void print()\n    {\n        if (is_dominant_descendant&lt;Creature&gt;(this))\n            Creature::print();\n        std::cout &lt;&lt; \"I can swim\" &lt;&lt; std::endl;\n    }\n};\n\nclass Flier : public virtual Creature\n{\npublic:\n    void print()\n    {\n        if (is_dominant_descendant&lt;Creature&gt;(this))\n            Creature::print();\n        std::cout &lt;&lt; \"I can fly\" &lt;&lt; std::endl;\n    }\n};\n\nclass Duck : public Flier, public Swimmer, public Walker\n{\npublic:\n    void print()\n    {\n        Walker::print();\n        Swimmer::print();\n        Flier::print();\n        std::cout &lt;&lt; \"I'm a duck\" &lt;&lt; std::endl;\n    }\n};\n</code></pre>\n\n<p>And with Visual&nbsp;Studio&nbsp;2015 the output is:</p>\n\n<pre><code>I'm a creature\nI can walk\nI can swim\nI can fly\nI'm a duck\n</code></pre>\n\n<p>But <code>is_dominant_descendant</code> does not have a portable definition. I wish it were a standard concept.</p>\n"}, {"tags": [], "owner": {"reputation": 4966, "user_id": 9883438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e9176c9238126b88b11234a86f45cbe?s=128&d=identicon&r=PG&f=1", "display_name": "sebrockm", "link": "https://stackoverflow.com/users/9883438/sebrockm"}, "is_accepted": true, "score": 3, "last_activity_date": 1556192631, "last_edit_date": 1556192631, "creation_date": 1556191394, "answer_id": 55848125, "question_id": 55829798, "link": "https://stackoverflow.com/questions/55829798/c-diamond-problem-how-to-call-base-method-only-once/55848125#55848125", "title": "C++ diamond problem - How to call base method only once", "body": "<p>You are asking for something like inheritance on a function level that automatically calls the inherited function and just adds more code. Also you want it to be done in a virtual way just like class inheritance. Pseudo syntax:</p>\n\n<pre><code>class Swimmer : public virtual Creature\n{\n     public:\n        // Virtually inherit from Creature::print and extend it by another line of code\n        void print() : virtual Creature::print()\n        {\n            std::cout &lt;&lt; \"I can swim\" &lt;&lt; std::endl;\n        }\n};\n\nclass Flier : public virtual Creature\n{\n     public:\n        // Virtually inherit from Creature::print and extend it by another line of code\n        void print() : virtual Creature::print()\n        {\n            std::cout &lt;&lt; \"I can fly\" &lt;&lt; std::endl;\n        }\n};\n\nclass Duck : public Flier, public Swimmer\n{\n     public:\n        // Inherit from both prints. As they were created using \"virtual function inheritance\",\n        // this will \"mix\" them just like in virtual class inheritance\n        void print() : Flier::print(), Swimmer::print()\n        {\n            std::cout &lt;&lt; \"I'm a duck\" &lt;&lt; std::endl;\n        }\n};\n</code></pre>\n\n<p>So the answer to your question</p>\n\n<blockquote>\n  <p>Is there some built-in way to do this?</p>\n</blockquote>\n\n<p>is <em>no</em>. Something like this does not exist in C++. Also, I'm not aware of any other language that has something like this. But it is an interesting idea...</p>\n"}], "owner": {"reputation": 790, "user_id": 5677209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5fb3ace86d63b6621841a7dce610f0e?s=128&d=identicon&r=PG&f=1", "display_name": "O. Aroesti", "link": "https://stackoverflow.com/users/5677209/o-aroesti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4656, "favorite_count": 8, "accepted_answer_id": 55848125, "answer_count": 7, "score": 38, "last_activity_date": 1556670332, "creation_date": 1556108055, "last_edit_date": 1556191857, "question_id": 55829798, "link": "https://stackoverflow.com/questions/55829798/c-diamond-problem-how-to-call-base-method-only-once", "title": "C++ diamond problem - How to call base method only once", "body": "<p>I'm using multiple inheritance in C++ and extending base methods by calling their base explicitly. Assume the following hierarchy:</p>\n\n<pre><code>     Creature\n    /        \\\n Swimmer    Flier\n    \\        /\n       Duck\n</code></pre>\n\n<p>Which corresponds to</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class Creature\n{\n    public:\n        virtual void print()\n        {\n            std::cout &lt;&lt; \"I'm a creature\" &lt;&lt; std::endl;\n        }\n};\n\nclass Swimmer : public virtual Creature\n{\n     public:\n        void print()\n        {\n            Creature::print();\n            std::cout &lt;&lt; \"I can swim\" &lt;&lt; std::endl;\n        }\n};\n\nclass Flier : public virtual Creature\n{\n     public:\n        void print()\n        {\n            Creature::print();\n            std::cout &lt;&lt; \"I can fly\" &lt;&lt; std::endl;\n        }\n};\n\nclass Duck : public Flier, public Swimmer\n{\n     public:\n        void print()\n        {\n            Flier::print();\n            Swimmer::print();\n            std::cout &lt;&lt; \"I'm a duck\" &lt;&lt; std::endl;\n        }\n};\n</code></pre>\n\n<p>Now this presents a problem - calling the duck's <code>print</code> method calls its respective base methods, all of which in turn call the <code>Creature::print()</code> method, so it ends up being called twice-</p>\n\n<pre><code>I'm a creature\nI can fly\nI'm a creature\nI can swim\nI'm a duck\n</code></pre>\n\n<p>I would like to find a way to make sure the base method is called only once. Something similar to the way virtual inheritance works (calling the base constructor on the first call, then only assigning a pointer to it on successive calls from other derived classes).</p>\n\n<p>Is there some built-in way to do this or do we need to resort to implementing one ourselves?</p>\n\n<p>If so, how would you approach this?</p>\n\n<p>The question isn't specific to printing. I wondered if there's a mechanism for extending base methods and functionality while keeping the call order and avoiding the diamond problem.</p>\n\n<p>I understand now that the most prominent solution would be to add helper methods, but I just wondered if there's a \"cleaner\" way.</p>\n"}, {"tags": ["c++", "ffmpeg", "static-libraries", "static-linking"], "comments": [{"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 0, "creation_date": 1556107851, "post_id": 55829717, "comment_id": 98324121, "body": "Are .a files VS libraries in Windows? Check for .lib files."}, {"owner": {"reputation": 224, "user_id": 4891090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af57976eb746cdbd46bd527358b8a2f3?s=128&d=identicon&r=PG&f=1", "display_name": "iz25", "link": "https://stackoverflow.com/users/4891090/iz25"}, "reply_to_user": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 0, "creation_date": 1556107902, "post_id": 55829717, "comment_id": 98324154, "body": ".lib are generated when ffmpeg is not static build."}, {"owner": {"reputation": 1670, "user_id": 7341904, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w3fly.jpg?s=128&g=1", "display_name": "Santosh Dhanawade", "link": "https://stackoverflow.com/users/7341904/santosh-dhanawade"}, "edited": false, "score": 0, "creation_date": 1556107907, "post_id": 55829717, "comment_id": 98324157, "body": "<a href=\"https://trac.ffmpeg.org/ticket/2049?cversion=2&amp;cnum_hist=5\" rel=\"nofollow noreferrer\">trac.ffmpeg.org/ticket/2049?cversion=2&amp;cnum_hist=5</a>"}, {"owner": {"reputation": 224, "user_id": 4891090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af57976eb746cdbd46bd527358b8a2f3?s=128&d=identicon&r=PG&f=1", "display_name": "iz25", "link": "https://stackoverflow.com/users/4891090/iz25"}, "edited": false, "score": 0, "creation_date": 1556191415, "post_id": 55829717, "comment_id": 98358189, "body": "It is the same with --extra-cflags=&quot;-MD&quot; option.."}], "owner": {"reputation": 224, "user_id": 4891090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af57976eb746cdbd46bd527358b8a2f3?s=128&d=identicon&r=PG&f=1", "display_name": "iz25", "link": "https://stackoverflow.com/users/4891090/iz25"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "closed_date": 1556107864, "answer_count": 0, "score": 0, "last_activity_date": 1556107730, "creation_date": 1556107730, "question_id": 55829717, "link": "https://stackoverflow.com/questions/55829717/ffmpeg-static-link-in-visual-studio", "closed_reason": "Duplicate", "title": "ffmpeg static link in Visual Studio", "body": "<p>I have build ffmpeg static library on Windows. It seems that everything completed with success. The result of build are following files:</p>\n\n<pre><code>libavcodec.a\nlibavdevice.a\nlibavfilter.a\nlibavformat.a\nlibavutil.a\nlibswscale.a\n</code></pre>\n\n<p>I tried to specify above files in Linker->Input in my C++ libray project, but linking fails. Following is build output:</p>\n\n<pre><code>1&gt;libavutil.a(samplefmt.o) : error LNK2001: unresolved external symbol ___stdio_common_vsprintf\n1&gt;libavutil.a(error.o) : error LNK2001: unresolved external symbol ___stdio_common_vsprintf\n1&gt;libavutil.a(log.o) : error LNK2001: unresolved external symbol ___stdio_common_vsprintf\n1&gt;libavutil.a(utils.o) : error LNK2001: unresolved external symbol ___stdio_common_vsprintf\n1&gt;libavutil.a(avstring.o) : error LNK2001: unresolved external symbol ___stdio_common_vsprintf\n1&gt;libavutil.a(bprint.o) : error LNK2001: unresolved external symbol ___stdio_common_vsprintf\n1&gt;libavformat.a(id3v2.o) : error LNK2001: unresolved external symbol ___stdio_common_vsprintf\n1&gt;libavutil.a(opt.o) : error LNK2001: unresolved external symbol ___stdio_common_vsprintf\n1&gt;libavutil.a(dict.o) : error LNK2001: unresolved external symbol ___stdio_common_vsprintf\n1&gt;libavutil.a(pixdesc.o) : error LNK2001: unresolved external symbol ___stdio_common_vsprintf\n1&gt;libavcodec.a(ratecontrol.o) : error LNK2001: unresolved external symbol ___stdio_common_vsprintf\n1&gt;libavcodec.a(qsv.o) : error LNK2001: unresolved external symbol ___stdio_common_vsprintf\n1&gt;libavformat.a(utils.o) : error LNK2001: unresolved external symbol ___stdio_common_vsprintf\n1&gt;libavformat.a(aviobuf.o) : error LNK2001: unresolved external symbol ___stdio_common_vsprintf\n1&gt;libavcodec.a(utils.o) : error LNK2001: unresolved external symbol ___stdio_common_vsprintf\n1&gt;libavcodec.a(ffv1enc.o) : error LNK2001: unresolved external symbol ___stdio_common_vsprintf\n1&gt;libavcodec.a(libvpxenc.o) : error LNK2001: unresolved external symbol ___stdio_common_vsprintf\n1&gt;libavcodec.a(exif.o) : error LNK2001: unresolved external symbol ___stdio_common_vsprintf\n1&gt;libavcodec.a(libvpxenc.o) : error LNK2001: unresolved external symbol _vpx_img_wrap\n1&gt;libavcodec.a(libvpxenc.o) : error LNK2001: unresolved external symbol _vpx_codec_version_str\n1&gt;libavcodec.a(libvpxdec.o) : error LNK2001: unresolved external symbol _vpx_codec_version_str\n1&gt;libavcodec.a(libvpxenc.o) : error LNK2001: unresolved external symbol _vpx_codec_build_config\n1&gt;libavcodec.a(libvpxdec.o) : error LNK2001: unresolved external symbol _vpx_codec_build_config\n1&gt;libavcodec.a(libvpxenc.o) : error LNK2001: unresolved external symbol _vpx_codec_err_to_string\n1&gt;libavcodec.a(libvpxenc.o) : error LNK2001: unresolved external symbol _vpx_codec_error\n1&gt;libavcodec.a(libvpxdec.o) : error LNK2001: unresolved external symbol _vpx_codec_error\n1&gt;libavcodec.a(libvpxenc.o) : error LNK2001: unresolved external symbol _vpx_codec_error_detail\n1&gt;libavcodec.a(libvpxdec.o) : error LNK2001: unresolved external symbol _vpx_codec_error_detail\n1&gt;libavcodec.a(libvpxenc.o) : error LNK2001: unresolved external symbol _vpx_codec_destroy\n1&gt;libavcodec.a(libvpxdec.o) : error LNK2001: unresolved external symbol _vpx_codec_destroy\n1&gt;libavcodec.a(libvpxenc.o) : error LNK2001: unresolved external symbol _vpx_codec_control_\n1&gt;libavcodec.a(libvpxenc.o) : error LNK2001: unresolved external symbol _vpx_codec_enc_init_ver\n1&gt;libavcodec.a(libvpxenc.o) : error LNK2001: unresolved external symbol _vpx_codec_enc_config_default\n1&gt;libavcodec.a(libvpxenc.o) : error LNK2001: unresolved external symbol _vpx_codec_encode\n1&gt;libavcodec.a(libvpxenc.o) : error LNK2001: unresolved external symbol _vpx_codec_get_cx_data\n1&gt;libavcodec.a(libvpxenc.o) : error LNK2001: unresolved external symbol _vpx_codec_vp8_cx\n1&gt;libavcodec.a(libvpxdec.o) : error LNK2001: unresolved external symbol _vpx_codec_dec_init_ver\n1&gt;libavcodec.a(libvpxdec.o) : error LNK2001: unresolved external symbol _vpx_codec_decode\n1&gt;libavcodec.a(libvpxdec.o) : error LNK2001: unresolved external symbol _vpx_codec_get_frame\n1&gt;libavcodec.a(libvpxdec.o) : error LNK2001: unresolved external symbol _vpx_codec_vp8_dx_algo\n1&gt;libavutil.a(opt.o) : error LNK2001: unresolved external symbol ___stdio_common_vsscanf\n1&gt;libavutil.a(parseutils.o) : error LNK2001: unresolved external symbol ___stdio_common_vsscanf\n1&gt;libavcodec.a(h264_sei.o) : error LNK2001: unresolved external symbol ___stdio_common_vsscanf\n1&gt;libavcodec.a(ratecontrol.o) : error LNK2001: unresolved external symbol ___stdio_common_vsscanf\n1&gt;libavcodec.a(qsv.o) : error LNK2001: unresolved external symbol ___stdio_common_vsscanf\n1&gt;libavformat.a(id3v2.o) : error LNK2001: unresolved external symbol ___stdio_common_vsscanf\n1&gt;libavutil.a(log.o) : error LNK2001: unresolved external symbol ___acrt_iob_func\n1&gt;libavutil.a(log.o) : error LNK2001: unresolved external symbol ___stdio_common_vfprintf\n</code></pre>\n\n<p>What could be missing here?</p>\n"}, {"tags": ["c++", "binary", "vtk"], "comments": [{"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 0, "creation_date": 1556107097, "post_id": 55829282, "comment_id": 98323667, "body": "This is something you should probably work out for yourself. Get a simple set of data and a known working binary writer (you even linked one). Output the simple data using your binary writer and also the know good one. Go through the 2 outputs in a binary (hex?) viewer and find out where they diverge. This should be enough information to then fix your problem. If you&#39;ve done that and still dont know then show the difference here as an edit to your question."}], "answers": [{"comments": [{"owner": {"reputation": 154, "user_id": 11954575, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDtTpZUfX4hS0JEjHMrgDtzIzKq0R828bA8Jurv=k-s128", "display_name": "Skiv Hisink", "link": "https://stackoverflow.com/users/11954575/skiv-hisink"}, "edited": false, "score": 0, "creation_date": 1615745943, "post_id": 55846119, "comment_id": 117780887, "body": "It would be better if you posted all the code or a link to the repository."}], "tags": [], "owner": {"reputation": 566, "user_id": 5708002, "user_type": "registered", "profile_image": "https://graph.facebook.com/1060487453972892/picture?type=large", "display_name": "Kafka", "link": "https://stackoverflow.com/users/5708002/kafka"}, "is_accepted": true, "score": 2, "last_activity_date": 1556184881, "creation_date": 1556184881, "answer_id": 55846119, "question_id": 55829282, "link": "https://stackoverflow.com/questions/55829282/write-vtk-file-in-binary-format/55846119#55846119", "title": "Write vtk file in binary format", "body": "<p>ok, the problem was the size of datas when I wrote the binary. This following peace of code works. Hope that can help someone.</p>\n\n<pre><code> std::ofstream file;\n  if(is_binary)\n    file.open(\"test.vtk\", std::ios::out | std::ios::binary);\n  else\n    file.open(\"test.vtk\");\n\n  file &lt;&lt; \"# vtk DataFile Version 2.0\" &lt;&lt; std::endl\n       &lt;&lt; \"Comment if needed\" &lt;&lt; std::endl;\n\n  if(is_binary)\n    file &lt;&lt; \"BINARY\"&lt;&lt; std::endl &lt;&lt; std::endl;\n  else\n    file &lt;&lt; \"ASCII\"&lt;&lt; std::endl &lt;&lt; std::endl;\n\n  file &lt;&lt; \"DATASET POLYDATA\" &lt;&lt; std::endl &lt;&lt; \"POINTS \" &lt;&lt; nb_particles &lt;&lt; \" double\"  &lt;&lt; std::endl;\n  for(size_t cell_i=0;cell_i&lt;n_cells;cell_i++)\n      for(size_t i =0; i&lt;cells[cell_i].size();++i)\n        {\n          if(is_binary)\n            {\n              double rx = cells[cell_i][field::rx][i];\n              double ry = cells[cell_i][field::ry][i];\n              double rz = cells[cell_i][field::rz][i];\n\n              SwapEnd(rx);\n              SwapEnd(ry);\n              SwapEnd(rz);\n\n              file.write(reinterpret_cast&lt;char*&gt;(&amp;rx), sizeof(double));\n              file.write(reinterpret_cast&lt;char*&gt;(&amp;ry), sizeof(double));\n              file.write(reinterpret_cast&lt;char*&gt;(&amp;rz), sizeof(double));\n            }\n          else\n            {\n              Vec3d tmp = grid.particle_position(cell_i,i);\n              file &lt;&lt; tmp.x &lt;&lt; \" \" &lt;&lt; tmp.y &lt;&lt; \" \" &lt;&lt; tmp.z &lt;&lt; std::endl;\n            }\n        }\n  if(is_binary)\n    file &lt;&lt; std::endl;\n\n  file &lt;&lt; \"POINT_DATA \" &lt;&lt; nb_particles &lt;&lt; std::endl;\n\n  if(has_id_field)\n    {\n      file&lt;&lt; \"SCALARS index int 1\" &lt;&lt; std::endl&lt;&lt; \"LOOKUP_TABLE default\" &lt;&lt; std::endl;\n      for(size_t cell_i=0;cell_i&lt;n_cells;cell_i++)\n        for(size_t i =0; i&lt;cells[cell_i].size();++i)\n          {\n            if(is_binary)\n              {\n                uint64_t id = cells[cell_i][field::id][i];\n\n                int id_i = static_cast&lt;int&gt;(id);\n\n                SwapEnd(id_i);\n\n                file.write(reinterpret_cast&lt;char*&gt;(&amp;id_i), sizeof(int));\n              }\n            else\n              file &lt;&lt; cells[cell_i][field::id][i] &lt;&lt; std::endl;\n          }\n      if(is_binary)\n        file &lt;&lt; std::endl;\n    }\n\n  if(has_type_field)\n    {\n      file&lt;&lt; \"SCALARS type int 1\" &lt;&lt; std::endl&lt;&lt; \"LOOKUP_TABLE default\" &lt;&lt; std::endl;\n      for(size_t cell_i=0;cell_i&lt;n_cells;cell_i++)\n        for(size_t i =0; i&lt;cells[cell_i].size();++i)\n          {\n            if(is_binary)\n              {\n                uint8_t type= cells[cell_i][field::type][i];\n\n                int type_i = static_cast&lt;int&gt;(type);\n\n                SwapEnd(type_i);\n\n                file.write(reinterpret_cast&lt;char*&gt;(&amp;type_i), sizeof(int));\n              }\n            else\n              file &lt;&lt; static_cast&lt;int&gt;(cells[cell_i][field::type][i]) &lt;&lt; std::endl;\n          }\n      if(is_binary)\n        file &lt;&lt; std::endl;\n    }\n\n  file.close();\n</code></pre>\n"}], "owner": {"reputation": 566, "user_id": 5708002, "user_type": "registered", "profile_image": "https://graph.facebook.com/1060487453972892/picture?type=large", "display_name": "Kafka", "link": "https://stackoverflow.com/users/5708002/kafka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1304, "favorite_count": 0, "accepted_answer_id": 55846119, "answer_count": 1, "score": 1, "last_activity_date": 1556184881, "creation_date": 1556106163, "question_id": 55829282, "link": "https://stackoverflow.com/questions/55829282/write-vtk-file-in-binary-format", "title": "Write vtk file in binary format", "body": "<p>I am trying to write a vtk file from my C++ code. I have two versions, one ASCII and the other binary. The ASCII version works well.</p>\n\n<p>I want to do something similar to this post : <a href=\"https://stackoverflow.com/questions/10913666/error-writing-binary-vtk-files\">Error writing binary VTK files</a></p>\n\n<p>Here is my code : </p>\n\n<pre><code>std::ofstream file;\n  if(is_binary)\n    file.open(\"test.vtk\", std::ios::out | std::ios::binary);\n  else\n    file.open(\"test.vtk\");\n\n  file &lt;&lt; \"# vtk DataFile Version 2.0\" &lt;&lt; std::endl\n       &lt;&lt; \"Comment if needed\" &lt;&lt; std::endl;\n\n  if(is_binary)\n    file &lt;&lt; \"BINARY\"&lt;&lt; std::endl &lt;&lt; std::endl;\n  else\n    file &lt;&lt; \"ASCII\"&lt;&lt; std::endl &lt;&lt; std::endl;\n\n  file &lt;&lt; \"DATASET POLYDATA\" &lt;&lt; std::endl &lt;&lt; \"POINTS \" &lt;&lt; nb_particles &lt;&lt; \" float\"  &lt;&lt; std::endl;\n  for(size_t cell_i=0;cell_i&lt;n_cells;cell_i++)\n      for(size_t i =0; i&lt;cells[cell_i].size();++i)\n        {\n          if(is_binary)\n            {\n              double rx = cells[cell_i][field::rx][i];\n              double ry = cells[cell_i][field::ry][i];\n              double rz = cells[cell_i][field::rz][i];\n\n              SwapEnd(rx);\n              SwapEnd(ry);\n              SwapEnd(rz);\n\n              file.write(reinterpret_cast&lt;char*&gt;(&amp;rx), sizeof(double));\n              file.write(reinterpret_cast&lt;char*&gt;(&amp;ry), sizeof(double));\n              file.write(reinterpret_cast&lt;char*&gt;(&amp;rz), sizeof(double));\n            }\n          else\n            {\n              Vec3d tmp = grid.particle_position(cell_i,i);\n              file &lt;&lt; tmp.x &lt;&lt; \" \" &lt;&lt; tmp.y &lt;&lt; \" \" &lt;&lt; tmp.z &lt;&lt; std::endl;\n            }\n        }\n  if(is_binary)\n    file &lt;&lt; std::endl;\n\n  file &lt;&lt; \"POINT_DATA \" &lt;&lt; nb_particles &lt;&lt; std::endl;\n\n  if(has_id_field)\n    {\n      file&lt;&lt; \"SCALARS index int 1\" &lt;&lt; std::endl&lt;&lt; \"LOOKUP_TABLE default\" &lt;&lt; std::endl;\n      for(size_t cell_i=0;cell_i&lt;n_cells;cell_i++)\n        for(size_t i =0; i&lt;cells[cell_i].size();++i)\n          {\n            if(is_binary)\n              {\n                uint64_t id = cells[cell_i][field::id][i];\n\n                SwapEnd(id);\n\n                file.write(reinterpret_cast&lt;char*&gt;(&amp;id), sizeof(uint64_t));\n              }\n            else\n              file &lt;&lt; cells[cell_i][field::id][i] &lt;&lt; std::endl;\n          }\n      if(is_binary)\n        file &lt;&lt; std::endl;\n    }\n\n  if(has_type_field)\n    {\n      file&lt;&lt; \"SCALARS type int 1\" &lt;&lt; std::endl&lt;&lt; \"LOOKUP_TABLE default\" &lt;&lt; std::endl;\n      for(size_t cell_i=0;cell_i&lt;n_cells;cell_i++)\n        for(size_t i =0; i&lt;cells[cell_i].size();++i)\n          {\n            if(is_binary)\n              {\n                uint8_t type;\n\n                SwapEnd(type);\n\n                file.write(reinterpret_cast&lt;char*&gt;(&amp;type), sizeof(uint8_t));\n              }\n            else\n              file &lt;&lt; static_cast&lt;int&gt;(cells[cell_i][field::type][i]) &lt;&lt; std::endl;\n          }\n      if(is_binary)\n        file &lt;&lt; std::endl;\n    }\n\n  file.close();\n</code></pre>\n\n<p>with the function : </p>\n\n<pre><code>void SwapEnd(T&amp; var)\n{\n  char* varArray = reinterpret_cast&lt;char*&gt;(&amp;var);\n  for(long i = 0; i &lt; static_cast&lt;long&gt;(sizeof(var)/2); i++)\n    std::swap(varArray[sizeof(var) - 1 - i],varArray[i]);\n}\n</code></pre>\n\n<p>My system is little endian :</p>\n\n<pre><code>lscpu | grep \"Byte Order\"\nByte Order:            Little Endian\n</code></pre>\n\n<p>paraview make an error on the reading the output file :</p>\n\n<pre><code>vtkPolyDataReader (0x3863800): Unrecognized keyword: @aic\ufffd9h\ufffd\ufffd8\n</code></pre>\n\n<p>What am I not doing well ?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1556104535, "post_id": 55828727, "comment_id": 98322131, "body": "while does not stop when the condition is true, it stops when the condition is false, in your case when both are parts are false. Read up on D&#39;morgans law"}, {"owner": {"reputation": 1444, "user_id": 6534880, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6YTr5.jpg?s=128&g=1", "display_name": "Prodigle", "link": "https://stackoverflow.com/users/6534880/prodigle"}, "edited": false, "score": 0, "creation_date": 1556104567, "post_id": 55828727, "comment_id": 98322151, "body": "Or is the wrong option here, you want a while (humancount &gt; 0 &amp;&amp; skeletoncount &gt; 0)"}], "answers": [{"tags": [], "owner": {"reputation": 1790, "user_id": 10263660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d02f3119d15c8c155ff25968fdf5a145?s=128&d=identicon&r=PG&f=1", "display_name": "FalcoGer", "link": "https://stackoverflow.com/users/10263660/falcoger"}, "is_accepted": false, "score": 5, "last_activity_date": 1556105071, "last_edit_date": 1556105071, "creation_date": 1556104653, "answer_id": 55828793, "question_id": 55828727, "link": "https://stackoverflow.com/questions/55828727/c-or-operator-refuses-to-stop-only-when-1st-part-is-true/55828793#55828793", "title": "C++ OR operator refuses to stop only when 1st part is true", "body": "<p>The OR-operator (<code>||</code>) returns true when at least one condition is true. In your case that would mean that both skeletons and humans need to be 0 or less for the loop to stop. Or rather it will continue if at least one of them is > 0.<br>\nYou get the correct behavior when you use AND (<code>&amp;&amp;</code>), which only returns true when all operands are true.</p>\n"}, {"tags": [], "owner": {"reputation": 1444, "user_id": 6534880, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6YTr5.jpg?s=128&g=1", "display_name": "Prodigle", "link": "https://stackoverflow.com/users/6534880/prodigle"}, "is_accepted": false, "score": 5, "last_activity_date": 1556104664, "creation_date": 1556104664, "answer_id": 55828797, "question_id": 55828727, "link": "https://stackoverflow.com/questions/55828727/c-or-operator-refuses-to-stop-only-when-1st-part-is-true/55828797#55828797", "title": "C++ OR operator refuses to stop only when 1st part is true", "body": "<p><code>while (humanCount &gt; 0 || skeletonCount &gt; 0)</code>\nMeans your code will continue to execute if EITHER of the terms is true. If skeletonCount = -4 and humanCount = 2 then one of the terms is still true so your code will continue to run. You want to use an AND <code>&amp;&amp;</code></p>\n"}], "owner": {"reputation": 21, "user_id": 11404862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a75eb2351cef155aaba1e7c79b563e7d?s=128&d=identicon&r=PG&f=1", "display_name": "DeepRocketScience", "link": "https://stackoverflow.com/users/11404862/deeprocketscience"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1556107003, "creation_date": 1556104422, "last_edit_date": 1556107003, "question_id": 55828727, "link": "https://stackoverflow.com/questions/55828727/c-or-operator-refuses-to-stop-only-when-1st-part-is-true", "title": "C++ OR operator refuses to stop only when 1st part is true", "body": "<p>I've been playing with some tutorials and I've reached a part where I use a \"while\", the OR operator stops only when the 1st condition is true and doesn't when the 2nd condition is, even though the 2nd condition has been a true for some loops.</p>\n\n<pre><code>while (humanCount &gt; 0 || skeletonCount &gt; 0)\n{\n    cout &lt;&lt; \"Humans left: \" &lt;&lt; humanCount &lt;&lt; \" | Skeletons left: \" &lt;&lt; skeletonCount &lt;&lt; \"\\n\";\n    if (currentTurn == 0) // Human Attack\n    {\n        if (rollChance(randomNum) &gt;= 0.5f)\n        {\n            skeletonCurrentHealth -= rollDamage(randomNum);\n            if (skeletonCurrentHealth &lt;= 0)\n            {\n                skeletonCount--;\n                skeletonCurrentHealth = skeletonMaxHealth;\n            }\n        }\n        currentTurn = 1;\n    }\n    else // Skeleton Attack\n    {\n        if (rollChance(randomNum) &gt;= 0.7f)\n        {\n            humanCurrentHealth -= rollDamage(randomNum);\n            if (humanCurrentHealth &lt;= 0)\n            {\n                humanCount--;\n                humanCurrentHealth = humanMaxHealth;\n            }\n        }\n        currentTurn = 0;\n    }\n}\n</code></pre>\n\n<p>From the print what I get is something like:</p>\n\n<pre><code>Humans left: 3 | Skeletons left: 5\nHumans left: 3 | Skeletons left: 4\nHumans left: 3 | Skeletons left: 3\nHumans left: 2 | Skeletons left: 3\nHumans left: 2 | Skeletons left: 2\nHumans left: 2 | Skeletons left: 1\nHumans left: 2 | Skeletons left: 0\nHumans left: 2 | Skeletons left: -1\nHumans left: 1 | Skeletons left: -1\nHumans left: 1 | Skeletons left: -2\nHumans left: 1 | Skeletons left: -3\nHumans left: 0 | Skeletons left: -3\nHumans have won!\n</code></pre>\n\n<p>I'm kind of lost here, would love some help what did I do wrong.</p>\n"}, {"tags": ["c++", "visual-c++"], "comments": [{"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1556107264, "post_id": 55828579, "comment_id": 98323773, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6 Thats a poor duplicate. Its just a duplicate of the symptoms of something going wrong, not what actually went wrong. Just my 2c anyway."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 0, "creation_date": 1556107496, "post_id": 55828579, "comment_id": 98323905, "body": "@MikeVine Well, it&#39;s along the old saying: <a href=\"https://en.wiktionary.org/wiki/give_a_man_a_fish_and_you_feed_him_for_a_day;_teach_a_man_to_fish_and_you_feed_him_for_a_lifetime\" rel=\"nofollow noreferrer\"><i>&quot;give a man a fish and you feed him for a day; teach a man to fish and you feed him for a lifetime&quot;</i></a>"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 9551024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da1234d386658f3587cd9d484bbc794a?s=128&d=identicon&r=PG&f=1", "display_name": "Austin K.", "link": "https://stackoverflow.com/users/9551024/austin-k"}, "edited": false, "score": 0, "creation_date": 1556105580, "post_id": 55828636, "comment_id": 98322774, "body": "Thanks man - using std::array seems to have fixed my problem :)"}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 2, "last_activity_date": 1556104061, "creation_date": 1556104061, "answer_id": 55828636, "question_id": 55828579, "link": "https://stackoverflow.com/questions/55828579/trouble-calling-base-constructor-getting-read-access-violation/55828636#55828636", "title": "Trouble calling base constructor - getting read access violation", "body": "<p>With <code>sEndPoints[2] = endPoints[2]</code> you access the <strong><em>third</em></strong> element of the two-element arrays. And you assign only that value.</p>\n\n<p>The C++ solution is to use <a href=\"https://en.cppreference.com/w/cpp/container/array\" rel=\"nofollow noreferrer\"><code>std::array</code></a> instead of \"old\" C-style arrays. Or <a href=\"https://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\"><code>std::vector</code></a>.</p>\n\n<p>And if you don't want to do that then the solution is to use <em>constructor initializer lists</em> where you initialize the member variables instead of assigning to them. For example</p>\n\n<pre><code>Search::Search(unsigned int gridSize, unsigned int startPoint, unsigned int endPoints[2], vector&lt;int&gt; walls)\n    : sGridSize(gridSize), sStartPoint(startPoint), sEndPoints(endPoints), sWalls(walls)\n{\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9551024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da1234d386658f3587cd9d484bbc794a?s=128&d=identicon&r=PG&f=1", "display_name": "Austin K.", "link": "https://stackoverflow.com/users/9551024/austin-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "closed_date": 1556104084, "accepted_answer_id": 55828636, "answer_count": 1, "score": -1, "last_activity_date": 1556104061, "creation_date": 1556103851, "question_id": 55828579, "link": "https://stackoverflow.com/questions/55828579/trouble-calling-base-constructor-getting-read-access-violation", "closed_reason": "Duplicate", "title": "Trouble calling base constructor - getting read access violation", "body": "<p>I'm setting up a program that uses 'DFS' as a child class of 'Search', and calls its base constructor.</p>\n\n<p>The program runs fine, until the breakpoint I placed just after calling the constructor, in which I receive the error: </p>\n\n<p>Exception thrown: read access violation.\n_Pnext was 0xCCCCCCD0.</p>\n\n<p>I've tried to summarise the code to only what is important.</p>\n\n<p>in main.cpp:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>DFS search(gridSize, startPoint, endPoints, walls);\n</code></pre>\n\n<p>in Search.h:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>public:\n    Search(unsigned int gridSize, unsigned int startPoint, unsigned int endPoints[2], vector&lt;int&gt; walls);\n</code></pre>\n\n<p>in Search.cpp:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include \"Search.h\"\n\nSearch::Search(unsigned int gridSize, unsigned int startPoint, unsigned int endPoints[2], vector&lt;int&gt; walls)\n{\n    sGridSize = gridSize;\n    sStartPoint = startPoint;\n    sEndPoints[2] = endPoints[2];\n    sWalls = walls;\n}\n</code></pre>\n\n<p>In DFS.h:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include \"Search.h\"\n\n#include &lt;vector&gt;\n\npublic:\n    DFS(unsigned int gridSize, unsigned int startPoint, unsigned int endPoints[2], vector&lt;int&gt; walls);\n</code></pre>\n\n<p>In DFS.cpp:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include \"DFS.h\"\n\nDFS::DFS(unsigned int gridSize, unsigned int startPoint, unsigned int endPoints[2], vector&lt;int&gt; walls) : Search(gridSize, startPoint, endPoints, walls)\n{\n\n}\n</code></pre>\n\n<p>If any more code is needed to understand this, just ask - I'm worried about pasting in too much.</p>\n\n<p>Any help is greatly appreciated :)</p>\n"}, {"tags": ["c++", "c++11", "gcc", "rvo"], "comments": [{"owner": {"reputation": 8101, "user_id": 7691729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2568514188dfa24ecc3c1884e481834?s=128&d=identicon&r=PG&f=1", "display_name": "Quimby", "link": "https://stackoverflow.com/users/7691729/quimby"}, "edited": false, "score": 2, "creation_date": 1556104366, "post_id": 55828577, "comment_id": 98321993, "body": "But the <code>Vec a;</code> outlives <code>Manager m;</code>."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1556104420, "post_id": 55828577, "comment_id": 98322041, "body": "<code>-fno-elide-constructors</code> precludes return value optimization and makes it use move instead. Why do you use this flag?"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 2, "creation_date": 1556104559, "post_id": 55828577, "comment_id": 98322144, "body": "I don&#39;t really get what your question is? There are other ways in which the auto-generated move constructors change behavior from C++98 to C++11 as far as I know (side effects of constructors and destructors are one of the few cases where optimizations are allowed to change observable behavior), so what is special about combining it with <a href=\"https://stackoverflow.com/questions/52931095/exact-moment-of-return-in-a-c-function#52931217\" title=\"exact moment of return in a c function%2352931217\">stackoverflow.com/questions/52931095/&hellip;</a>?"}, {"owner": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "reply_to_user": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 1, "creation_date": 1556104656, "post_id": 55828577, "comment_id": 98322198, "body": "@MaximEgorushkin with RVO there is no UB, because <code>a</code> is not moved and intact. Whether RVO is performed or not is up to compiler, so it should be ok not to perform RVO (or I could come up with a more complicated function for which compiler doesn&#39;t perform RVO, but I wanted to keep it simple)"}, {"owner": {"reputation": 8101, "user_id": 7691729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2568514188dfa24ecc3c1884e481834?s=128&d=identicon&r=PG&f=1", "display_name": "Quimby", "link": "https://stackoverflow.com/users/7691729/quimby"}, "edited": false, "score": 1, "creation_date": 1556104777, "post_id": 55828577, "comment_id": 98322276, "body": "I would not call this undefined behaviour, more like implementation defined. The <code>a</code> object is still in valid state after being moved from."}, {"owner": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1556104818, "post_id": 55828577, "comment_id": 98322300, "body": "@MaxLanghof The problem is that C++98 code gets broken with C++11. Btw. for example in <a href=\"https://stackoverflow.com/q/52931095/5769463\">stackoverflow.com/q/52931095/5769463</a> the result isn&#39;t moved but copied also in C++11."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 4, "creation_date": 1556104958, "post_id": 55828577, "comment_id": 98322401, "body": "Lots of C++98 code was broken with C++11. See e.g. <a href=\"https://stackoverflow.com/questions/6399615/what-breaking-changes-are-introduced-in-c11\" title=\"what breaking changes are introduced in c11\">stackoverflow.com/questions/6399615/&hellip;</a>. You seem to imply that this particular code should not have broken, can you tell us what makes you think so?"}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1556105174, "post_id": 55828577, "comment_id": 98322522, "body": "it works without <code>-fno-elide-constructors</code> anyway this is clue <a href=\"https://stackoverflow.com/a/27088901/1387438\">stackoverflow.com/a/27088901/1387438</a>"}, {"owner": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1556105203, "post_id": 55828577, "comment_id": 98322542, "body": "@MaxLanghof I could leave with code not compiling. Debugging such a change of behavior is another matter."}, {"owner": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "reply_to_user": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1556105248, "post_id": 55828577, "comment_id": 98322573, "body": "@MarekR used <code>-fno-elide-constructors</code> to keep the example simple, the point is that compiler doesn&#39;t use RVO (which is valid)"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1556105338, "post_id": 55828577, "comment_id": 98322633, "body": "I feel your pain, but I still don&#39;t see what kind of answer you are looking for here. &quot;Yes, it&#39;s valid C++98 code&quot;?"}, {"owner": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1556105537, "post_id": 55828577, "comment_id": 98322752, "body": "@MaxLanghof This is valid C++98 code in my book, but I was sure about many other snippets as well and they weren&#39;t. I just cannot believe valid code gets invalid  and hope somebody shows me what the problem is."}, {"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1556105538, "post_id": 55828577, "comment_id": 98322753, "body": "Is it valid when the copy Ctor doesn&#39;t use const?"}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 1, "creation_date": 1556105905, "post_id": 55828577, "comment_id": 98322977, "body": "<i>I just cannot believe valid code gets invalid...</i> Why not? Consider <code>int decltype = 1;</code>. It&#39;s valid in C++03, but invalid in C++11."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1556105918, "post_id": 55828577, "comment_id": 98322989, "body": "the part of the standard you link as &quot;must be moved&quot; only states that it &quot;might be moved&quot;"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1556105984, "post_id": 55828577, "comment_id": 98323030, "body": "@DanielLangr introducing a syntax error is different from silently introducing ub"}, {"owner": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1556106200, "post_id": 55828577, "comment_id": 98323166, "body": "@user463035818 I understand <code>overload resolution to select the constructor for the copy or the return_&#173;value overload to call is first performed as if the object were designated by an rvalue</code> as it must take the move constructor.  But my starting point was this answer: <a href=\"https://stackoverflow.com/a/17473874/5769463\">stackoverflow.com/a/17473874/5769463</a> which might not be 100% correct."}, {"owner": {"reputation": 1574, "user_id": 239189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mUAlH.png?s=128&g=1", "display_name": "jszpilewski", "link": "https://stackoverflow.com/users/239189/jszpilewski"}, "edited": false, "score": 0, "creation_date": 1556106644, "post_id": 55828577, "comment_id": 98323419, "body": "The catch in this example is in using the target vector object in the main() function as a temporary. It may fool compiler into moving its stuff (data values) away from the vector when it is being both rvod and moved. Use a more straightforward named variable and the problem will disappear."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 1574, "user_id": 239189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mUAlH.png?s=128&g=1", "display_name": "jszpilewski", "link": "https://stackoverflow.com/users/239189/jszpilewski"}, "edited": false, "score": 0, "creation_date": 1556109017, "post_id": 55828577, "comment_id": 98324820, "body": "@jszpilewski Actually, that&#39;s not so, see: <a href=\"http://coliru.stacked-crooked.com/a/7a21982102be542d\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/7a21982102be542d</a>"}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1556109237, "post_id": 55828577, "comment_id": 98324954, "body": "@user463035818 It is. However, the question linked by MaxLanghof shows an example where two different overloads of a function are called in C++03 and C++11. It might be easy to elaborate such a case into UB in C++11 only."}, {"owner": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "reply_to_user": {"reputation": 1574, "user_id": 239189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mUAlH.png?s=128&g=1", "display_name": "jszpilewski", "link": "https://stackoverflow.com/users/239189/jszpilewski"}, "edited": false, "score": 0, "creation_date": 1556109464, "post_id": 55828577, "comment_id": 98325100, "body": "@jszpilewski the problem is the function `create&#180; and it is the same no matter whether the result is temporary or not."}, {"owner": {"reputation": 1574, "user_id": 239189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mUAlH.png?s=128&g=1", "display_name": "jszpilewski", "link": "https://stackoverflow.com/users/239189/jszpilewski"}, "edited": false, "score": 0, "creation_date": 1556112200, "post_id": 55828577, "comment_id": 98326895, "body": "@ead The problem is still related to handling temporaries. Notice that the C++98 version will show different results when compiled with or without <code>-fno-elide-constructors</code>. In the C++11 version the temporary is created with <code>move</code> semantics."}], "answers": [{"comments": [{"owner": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "edited": false, "score": 0, "creation_date": 1556110168, "post_id": 55830283, "comment_id": 98325505, "body": "I don&#39;t really understand your example. My version is with <code>Vec v(1);</code> and there is no problem. I mean, that might be not the best design and begging for problems, but the original code has no UB."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "edited": false, "score": 4, "creation_date": 1556110572, "post_id": 55830283, "comment_id": 98325751, "body": "@ead Yes, the code you wrote had no UB.  The code in my example though does, even in C++98.  I&#39;m pointing out that your destructor is not correct for any version of the language because you make an assumption about your vector that you can&#39;t know is true.  Since you take any vector, that includes empty ones which means your destructor is not correct since it unconditionally access it."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 4, "last_activity_date": 1556109685, "creation_date": 1556109685, "answer_id": 55830283, "question_id": 55828577, "link": "https://stackoverflow.com/questions/55828577/move-constructor-for-returned-objects-breaks-c98-code/55830283#55830283", "title": "Move constructor for returned objects breaks C++98 code?", "body": "<p>This is not a breaking change.  Your code was already doomed in C++98.  Imagine you have instead</p>\n\n<pre><code>int main(){\n    Vec v;\n    Manager m(v);\n}\n</code></pre>\n\n<p>In the above example you access the vector when <code>m</code> is destroyed and since the vector is empty you  throw an exception (have UB if you use <code>[]</code>).  This is essential the same scenario you get into when you return <code>vec</code> from <code>create</code>.  </p>\n\n<p>This means that your destructor should not be making assumptions about the state of its class members since it doesn't know what state they are in.  To make your destructor \"safe\" for any version of C++ you either need to put the call to <code>at</code> in a try-catch block or you need to test the size of the vector to make sure it is equal to or greater than what you expected.</p>\n"}, {"comments": [{"owner": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "edited": false, "score": 0, "creation_date": 1556118386, "post_id": 55831775, "comment_id": 98331036, "body": "Not sure how this answers the question. The whole point of using <code>-fno-elide-constructors</code> to avoid the unspecified behavior you are pointing out (see also <a href=\"https://stackoverflow.com/q/52931095/5769463\">stackoverflow.com/q/52931095/5769463</a>). The problem is that in C++11 it becomes UB, while in C++98 the code might not be beatiful but valid."}, {"owner": {"reputation": 1574, "user_id": 239189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mUAlH.png?s=128&g=1", "display_name": "jszpilewski", "link": "https://stackoverflow.com/users/239189/jszpilewski"}, "reply_to_user": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "edited": false, "score": 0, "creation_date": 1556119351, "post_id": 55831775, "comment_id": 98331633, "body": "@ead C++98 will present different results depending on compiler options and optimization specified by programmer or just picked by compiler. While it is valid C++ it is a real headache from the software engineering point of view. C++11 does not break anything, just reminds you that you should check the size of an array before accessing it. With that in place you will get results like for C++98."}], "tags": [], "owner": {"reputation": 1574, "user_id": 239189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mUAlH.png?s=128&g=1", "display_name": "jszpilewski", "link": "https://stackoverflow.com/users/239189/jszpilewski"}, "is_accepted": false, "score": 1, "last_activity_date": 1556113994, "creation_date": 1556113994, "answer_id": 55831775, "question_id": 55828577, "link": "https://stackoverflow.com/questions/55828577/move-constructor-for-returned-objects-breaks-c98-code/55831775#55831775", "title": "Move constructor for returned objects breaks C++98 code?", "body": "<p>Your code exposes various behavior depending on whether the RVO is applied (compiled without <code>-fno-elide-constructors</code>) or with creating a temporary to return the result (with <code>-fno-elide-constructors</code>).</p>\n\n<p>With RVO the result is the same for C++98 and C++11 and it is 42. But introducing a temporary will hide the final assignment to 42 in C++98 and the function will return the result 21. In the C++11 version the things go even further as the temporary is created with <code>move</code> semantics so the assignment to a moved (so empty) object will result in an exception.</p>\n\n<p>The takeaway lesson is just to avoid putting any code with side effects in destructors and constructors as well for this matter.</p>\n"}, {"comments": [{"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "edited": false, "score": 0, "creation_date": 1556174781, "post_id": 55843160, "comment_id": 98349092, "body": "@ead Sorry, I switched the numbers. Corrected: <a href=\"https://wandbox.org/permlink/EmDGUD8YmqmzND3l\" rel=\"nofollow noreferrer\">wandbox.org/permlink/EmDGUD8YmqmzND3l</a>."}, {"owner": {"reputation": 2275, "user_id": 3742943, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ijesw.jpg?s=128&g=1", "display_name": "LoPiTaL", "link": "https://stackoverflow.com/users/3742943/lopital"}, "edited": false, "score": 0, "creation_date": 1556175487, "post_id": 55843160, "comment_id": 98349411, "body": "@DanielLangr I am sorry, but I cannot understand/see why there is a difference between C++98 and C++11 with this code, despite the live example you added showing the behaviour. Can you explain a bit more what is going on?"}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 2275, "user_id": 3742943, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ijesw.jpg?s=128&g=1", "display_name": "LoPiTaL", "link": "https://stackoverflow.com/users/3742943/lopital"}, "edited": false, "score": 1, "creation_date": 1556175694, "post_id": 55843160, "comment_id": 98349514, "body": "@LoPiTaL The difference is that there is no <code>std::stoi</code> in C++98/03. It was added in C++11. Consequently, in C++11, <code>std::stoi</code> is invoked (better overload candidate), which converts the <code>&quot;-1&quot;</code> string into a number and retunrns -1. In C++03, the only candidate that can be called is our custom <code>stoi</code>, which returns 0. BTW this example also shows why <code>using namespace std;</code> is pure evil ;-)."}, {"owner": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "edited": false, "score": 0, "creation_date": 1556177206, "post_id": 55843160, "comment_id": 98350249, "body": "maybe yoou are right and my expectations are wrong. I&#39;ve always assumed move-sematic was introduced in such a way, that it doesn&#39;t affect the old code."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "edited": false, "score": 0, "creation_date": 1556178591, "post_id": 55843160, "comment_id": 98350982, "body": "@ead It was and it doesn&#39;t. In 99.99 percent of cases of correctly- and well-written code."}], "tags": [], "owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "is_accepted": false, "score": 2, "last_activity_date": 1556174768, "last_edit_date": 1556174768, "creation_date": 1556174078, "answer_id": 55843160, "question_id": 55828577, "link": "https://stackoverflow.com/questions/55828577/move-constructor-for-returned-objects-breaks-c98-code/55843160#55843160", "title": "Move constructor for returned objects breaks C++98 code?", "body": "<p><em>\"I just cannot believe valid code gets invalid...\"</em> Yes, it really may get invalid. Another example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\ntemplate &lt;typename T&gt;\nint stoi(const basic_string&lt;T&gt;&amp; str)\n{ \n  return 0;\n}\n\nint main()\n{\n  std::string s(\"-1\");\n  int i = stoi(s);\n  std::cout &lt;&lt; s[i];\n}\n</code></pre>\n\n<p>The code is valid in C++98/03, but has UB in C++11. </p>\n\n<hr>\n\n<p>The point is that the code like this or yours are extremal cases, which generally does/should not emerge in practice. They (almost) always represent a very bad coding practice. If you follow good coding habits, you likely won't get into any troubles when moving from C++98 to C++11.</p>\n"}], "owner": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 370, "favorite_count": 2, "answer_count": 3, "score": 8, "last_activity_date": 1556174768, "creation_date": 1556103845, "last_edit_date": 1556104078, "question_id": 55828577, "link": "https://stackoverflow.com/questions/55828577/move-constructor-for-returned-objects-breaks-c98-code", "title": "Move constructor for returned objects breaks C++98 code?", "body": "<p>The Standard doesn't not require a compiler to perform return-value-optimization(RVO), but then, since C++11, the result <a href=\"http://eel.is/c++draft/class.copy.elision#3\" rel=\"noreferrer\">must be moved</a>.</p>\n\n<p>It looks as if, this might introduce UB to/break code, which was valid in C++98. </p>\n\n<p>For example:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;iostream&gt;\n\ntypedef std::vector&lt;int&gt; Vec;\nstruct Manager{\n    Vec&amp; vec;\n    Manager(Vec&amp; vec_): vec(vec_){}\n    ~Manager(){\n        //vec[0]=42; for UB\n        vec.at(0)=42;\n    }\n};\n\nVec create(){\n    Vec a(1,21);\n    Manager m(a);\n    return a;\n}\n\nint main(){\n    std::cout&lt;&lt;create().at(0)&lt;&lt;std::endl;\n}\n</code></pre>\n\n<p>When compiled with gcc (or clang for that matter) with <code>-O2 -fno-inline -fno-elide-constructors</code> (I'm using <code>std::vector</code> with these build-option, in order to simplify the example. One could trigger the same behavior without these options with handmade-classes and a more complicated <code>create</code>-function) everything is OK for C++98(<code>-std=c++98</code>):</p>\n\n<ol>\n<li><code>return a;</code> triggers copy-constructor, which leaves <code>a</code> intact.</li>\n<li>Destructor of <code>m</code> is called (must happens before <code>a</code> is destructed, because <code>m</code> is constructed after <code>a</code>). Accessing <code>a</code> in destructor is unproblematic.</li>\n<li>Destructor of <code>a</code> is called.</li>\n</ol>\n\n<p>The result is as expected: <code>21</code> is printed (<a href=\"http://coliru.stacked-crooked.com/a/4721dab05fe9f871\" rel=\"noreferrer\">here live</a>).</p>\n\n<p>The situation is however different when built as C++11(<code>-std=c++11</code>):</p>\n\n<ol>\n<li><code>return a;</code> triggers move-constructor, which \"destroys\" <code>a</code>.</li>\n<li>Destructor of <code>m</code> is called, but now accessing <code>a</code> is problematic, because <code>a</code> was moved and no longer intact.</li>\n<li><code>vec.at(0)</code> throws now.</li>\n</ol>\n\n<p>Here is a <a href=\"http://coliru.stacked-crooked.com/a/c2e403d747caaf93\" rel=\"noreferrer\">live-demonstration</a>.</p>\n\n<p>Am I missing something and the example is problematic in C++98 as well?</p>\n"}, {"tags": ["c++", "language-lawyer", "temporary-objects"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1556103123, "post_id": 55828305, "comment_id": 98321246, "body": "Would be nice to see the implementation of <code>getX</code>."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 6824, "user_id": 3202093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004496564514/picture?type=large", "display_name": "sp2danny", "link": "https://stackoverflow.com/users/3202093/sp2danny"}, "edited": false, "score": 0, "creation_date": 1556103191, "post_id": 55828305, "comment_id": 98321285, "body": "@sp2danny: &quot;Considering you are allowed to bind temporaries to non-const reference&quot; - U wot?"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1556103262, "post_id": 55828305, "comment_id": 98321325, "body": "@Bathsheba Would the implementation matter? NRVO is just an optimization, it shouldn&#39;t affect whether <code>x2</code> is considered a <code>const</code> object or not?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 2, "creation_date": 1556103419, "post_id": 55828305, "comment_id": 98321407, "body": "@Bathsheba There&#39;s definitely no lifetime problem in the example."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1556103812, "post_id": 55828305, "comment_id": 98321637, "body": "@Bathsheba No, the dupe is good (and I myself accepted it as dupe target, hence Community). I just didn&#39;t find it myself."}], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "closed_date": 1556103607, "answer_count": 0, "score": 1, "last_activity_date": 1556103367, "creation_date": 1556102950, "question_id": 55828305, "link": "https://stackoverflow.com/questions/55828305/are-temporaries-bound-to-const-references-considered-const-objects", "closed_reason": "Duplicate", "title": "Are temporaries bound to const references considered const objects?", "body": "<p>Consider this piece of code:</p>\n\n<pre><code>struct X\n{\n    int a;\n};\n\nX getX();\n\nvoid modify(const X&amp; x)\n{\n    const_cast&lt;X&amp;&gt;(x).a++;\n}\n\nint foo()\n{\n    X x0 = getX();\n    const X x1 = getX();\n    const X&amp; x2 = getX();\n\n    // Legal!\n    modify(x0);\n\n    // Illegal!\n    //modify(x1);\n\n    // Legal?\n    modify(x2);\n\n    return x0.a + x1.a + x2.a;\n}\n</code></pre>\n\n<p><a href=\"https://godbolt.org/z/72pLzd\" rel=\"nofollow noreferrer\">https://godbolt.org/z/72pLzd</a></p>\n\n<p><code>modify</code> casts away the constness of its reference argument. This is legal as long as the referenced object is not itself <code>const</code> (which is why the constness of const references rarely confers optimization benefits).</p>\n\n<p>I would like to understand the case of a temporary bound to a const ref. Is such an object always <code>const</code>, always non-<code>const</code>, or does it depend on where the temporary came from/how it was constructed (i.e. would it matter if <code>getX</code> returned a <code>const X</code>)?</p>\n"}, {"tags": ["c++", "embedded", "interrupt", "bare-metal", "isr"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1556102496, "post_id": 55828031, "comment_id": 98320893, "body": "I am afraid comments are your only option so far."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 6, "creation_date": 1556102667, "post_id": 55828031, "comment_id": 98320986, "body": "I doubt it&#39;ll be accepted into the standard as a keyword. Seems too specific a language feature to warrant it. But you could go for a pair of attributes I suppose. Something like <code>[[is_isr]]</code> for the routine and <code>[[isr_safe]]</code> for (member) functions to document it about itself. Then static analysis may proceed."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1556102850, "post_id": 55828031, "comment_id": 98321087, "body": "If it&#39;s all implemented in custom code, <code>assert()</code>s might be an option as well (to determine at least at runtime what shouldn&#39;t be done)."}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 1, "creation_date": 1556102929, "post_id": 55828031, "comment_id": 98321136, "body": "C as well as C++ has no notion of interrupts so this feature can&#39;t really get into C++ standard. You can however create some sort of lint for clang-tidy or the like that would check that inside certain functions only specific list of calls is being made."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1556102996, "post_id": 55828031, "comment_id": 98321175, "body": "@StoryTeller <code>[[isr_safe]]</code> sounds promising."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1556103045, "post_id": 55828031, "comment_id": 98321204, "body": "@DanM. Well, there are things like <i><code>naked</code></i> attributes already."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1556103062, "post_id": 55828031, "comment_id": 98321209, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 - Yeah. And come to think of it, there isn&#39;t really a need for two attributes. Can be treated like const qualifiers on member functions. Can only call other <code>[[isr_safe]]</code> stuff. Might gel well with the standard <code>signal</code> stuff too."}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1556103197, "post_id": 55828031, "comment_id": 98321289, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 those are not part of the standard though."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 2, "creation_date": 1556103302, "post_id": 55828031, "comment_id": 98321342, "body": "@DanM. Well, as StoryTeller already mentioned, I think we discuss beyond standard already, but attributes might be a good solution for the problem. Embedded (bare metal) programming already needs some special stuff beyond the c++ standard."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 1, "creation_date": 1556103354, "post_id": 55828031, "comment_id": 98321374, "body": "For me it seems that the problem is actually an ability to put arbitrary code into interrupt callbacks. How about keeping them in isolation allowing client code to consume a friendly interface?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1556103985, "post_id": 55828031, "comment_id": 98321737, "body": "To answer the question: yes, you can do this by having a C compiler compile the file where the ISR resides. As for future C++ standards, the language has gone complete haywire since C++11. <a href=\"https://embeddedgurus.com/barr-code/2018/02/c-the-immortal-programming-language/\" rel=\"nofollow noreferrer\">C++ is <i>moving away</i> from deterministic embedded systems and hardware-related programming</a>."}, {"owner": {"reputation": 4441, "user_id": 788824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/96f5e5d858f1562ac8075c2664451b3b?s=128&d=identicon&r=PG", "display_name": "vsz", "link": "https://stackoverflow.com/users/788824/vsz"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1556104826, "post_id": 55828031, "comment_id": 98322308, "body": "@Lundin : Mixing two compilers for a single project opens another can of worms, and makes it more difficult to use classes in the ISR. Also, no one is forced to use <b>all</b> new features added since C++11. And the statistics you cited shows a slight increase for the last 3 years, and is around 25% anyway, so it&#39;s in no way dying out. And those statistics fail to consider that many embedded projects are only a few dozens or hundreds of lines long (blinking lights in cheap toys or in Christmas lights) were there is no point in using C++. Maybe in 10000+ line applications C++ is more common?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1556105563, "post_id": 55828031, "comment_id": 98322763, "body": "The main problem with any programming language is this: as soon as you add some sort of feature to the standard, you can be <i>dead certain</i> that someone will use it all over the place, good practice or bad practice. C++ suffers greatly from this, since the language contains such extreme amounts of features that can be potentially misused. For example, a list <i>summarizing</i> all poorly-defined behavior in C++ is enough to fill a thick book. I think it is around 20 pages in C (already a fiasco there) and somewhere around 200 pages in C++."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1556105867, "post_id": 55828031, "comment_id": 98322955, "body": "@vsz I believe the survey was directed to professional embedded devs only, which suits the trend I&#39;m seeing too. Those will all be 10k+ LOC projects. If they would have asked hobbyists too, you&#39;d get entirely different statistics. As you&#39;d then get them Christmas light people, namely the Arduino mob. They are all exclusively using C++ on a completely unsuitable MCU (8 bit AVR), every single one a walking example of C++ use gone terribly wrong."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 1, "creation_date": 1556113107, "post_id": 55828031, "comment_id": 98327498, "body": "wow that is a lot of assumptions.  Not possible for C++ to replace C for certain applications, this being one of them.  There was no reason to try to make such claims to get to your question you could have just asked your question....although it isnt a stackoverflow question it is closer to a programmers.stackexchange question but they may also reject it there.  I would avoid starting with such statements in the future, get to the point."}, {"owner": {"reputation": 4441, "user_id": 788824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/96f5e5d858f1562ac8075c2664451b3b?s=128&d=identicon&r=PG", "display_name": "vsz", "link": "https://stackoverflow.com/users/788824/vsz"}, "reply_to_user": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1556115277, "post_id": 55828031, "comment_id": 98328988, "body": "@old_timer : If I just asked the one-sentence question in the title, I would have gotten lots of comments and answers asking why I need such a thing. If you have a certain sentence in mind the removal of which would improve the question and make it easier to be answered, just point out and I&#39;ll remove it if it&#39;s necessary."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 1, "creation_date": 1556125080, "post_id": 55828031, "comment_id": 98334702, "body": "If you want to change the C++ standard this is very much the wrong place to do it, there are no doubt forums and meetings within that standards body for this discussion.  Definitely not a stackoverflow question in any way.   Now if you were to take a current compiler and the mcu thing is irrelevant to your question anyway, and show I want to have the compiler flag this code in this example, this is what I tried, it failed is there any other way with this compiler and language.  That &quot;might&quot; be a stackoverflow question."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 1, "creation_date": 1556125236, "post_id": 55828031, "comment_id": 98334779, "body": "C barely fits into baremetal programming, have to toss almost all of the C library functions.  C++ is even less of a fit.  They will always be shimmed in with duct tape and bailing wire, those languages do not fit there naturally nor natively nor will they.  If you truly want clean C or C++ on what is traditionally baremetal then run an RTOS instead and call it done."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1556125375, "post_id": 55828031, "comment_id": 98334847, "body": "The primary compilers are open source and a number of vendors customize them for this environment you can simply add this feature and provide that toolchain to the masses.  In your case it is even broader unlike the cpu and mcu vendors adding stuff for their solution yours sounds to be for everyone not just cpus and mcus."}, {"owner": {"reputation": 4441, "user_id": 788824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/96f5e5d858f1562ac8075c2664451b3b?s=128&d=identicon&r=PG", "display_name": "vsz", "link": "https://stackoverflow.com/users/788824/vsz"}, "reply_to_user": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1556128558, "post_id": 55828031, "comment_id": 98336275, "body": "@old_timer : basically my question was about a problem I would like to solve. Just as it says in the title. About the C++ standard, it was meant as a side comment. My main point was this part: <i>&quot;... or does something already exist that provides that functionality?&quot;</i>. I&#39;ll edit it to make the question less focused on it."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1556145033, "post_id": 55828031, "comment_id": 98342596, "body": "Since there is no means for the compiler to know that a function is an interrupt routine, and an interrupt vector can be assigned at runtime, I cannot see how this could work or would solve any issue.  It could also be defeated by callbacks through pointers, and the issue is not specific to C++, it is as likely that some C function is inappropriate or ill-advised in an interrupt.   On the subject of &quot;opinion&quot;, it is certainly an opinion that this is a problem, and you are canvassing opinion on a solution.  My opinion is that the solution lies in good design, design guidelines and code review."}, {"owner": {"reputation": 9936, "user_id": 28574, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c6a66adc402cd387a5875d5a69390a61?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/28574/dan"}, "edited": false, "score": 2, "creation_date": 1556151324, "post_id": 55828031, "comment_id": 98343765, "body": "If it worked at all, this seems like the perfect use-case for a compiler #pragma, since a) it really doesn&#39;t belong in the C++ standard and b) it really will be compiler-specific (even if the end result is almost always the same generated code).  That said, as Clifford pointed out, the concern is that this could provide a false sense of security, because things like function pointers and linker symbols mean that you could probably bypass this protection anyway.  The day something like this is my biggest problem is the day I can retire."}, {"owner": {"reputation": 4441, "user_id": 788824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/96f5e5d858f1562ac8075c2664451b3b?s=128&d=identicon&r=PG", "display_name": "vsz", "link": "https://stackoverflow.com/users/788824/vsz"}, "reply_to_user": {"reputation": 9936, "user_id": 28574, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c6a66adc402cd387a5875d5a69390a61?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/28574/dan"}, "edited": false, "score": 0, "creation_date": 1556166013, "post_id": 55828031, "comment_id": 98346434, "body": "@Dan : <code>const</code> in C also provides a false sense of security, because it can be defeated through pointers. It is still a useful feature. Many safety features can be circumvented, in C and C++ you can shoot yourself in the foot if you really really want to. Many language features are there to help you to prevent accidentally shooting yourself in the foot, and just because they don&#39;t prevent you from <i>deliberately</i> shooting yourself in the foot doesn&#39;t mean they are completely useless."}, {"owner": {"reputation": 9936, "user_id": 28574, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c6a66adc402cd387a5875d5a69390a61?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/28574/dan"}, "edited": false, "score": 0, "creation_date": 1556274571, "post_id": 55828031, "comment_id": 98391390, "body": "@vsz: Wow!  Defensive much?  <i>Of course</i> <code>const</code> can be circumvented by casting it away.  But that&#39;s <b>deliberate</b> (your use case was essentially accidentally/unknowingly calling a dangerous function). Even a simple declaration of a local <code>int a[1000]</code> can cause a crash (MCU, limited RAM for stack).  We could talk all day about ways to shoot yourself in the foot.  Trust me, I know C (and C++) very well.  I think you&#39;re a little too invested in your idea.  And you didn&#39;t address #pragma, which is one of the most common ways compilers tag ISRs.  Peace out."}, {"owner": {"reputation": 4441, "user_id": 788824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/96f5e5d858f1562ac8075c2664451b3b?s=128&d=identicon&r=PG", "display_name": "vsz", "link": "https://stackoverflow.com/users/788824/vsz"}, "reply_to_user": {"reputation": 9936, "user_id": 28574, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c6a66adc402cd387a5875d5a69390a61?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/28574/dan"}, "edited": false, "score": 0, "creation_date": 1556275579, "post_id": 55828031, "comment_id": 98391885, "body": "@Dan : <i>&quot;Of course const can be circumvented by casting it away. But that&#39;s deliberate&quot;</i> - You said that a hypothetical protection from accidentally calling a dangerous function can be bypassed by function pointers and linker symbols. Woulnd&#39;t that sort of bypassing be just as <i>deliberate</i>?"}, {"owner": {"reputation": 9936, "user_id": 28574, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c6a66adc402cd387a5875d5a69390a61?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/28574/dan"}, "edited": false, "score": 0, "creation_date": 1556413641, "post_id": 55828031, "comment_id": 98430197, "body": "@vsz: No.  You can still call a function whose use from interrupt is of unknown suitability.  You could from naivet&#233; or ignorance call a function that you shouldn&#39;t.  However, I have never seen a time when casting away const was a) made sense or b) couldn&#39;t be done another way.  I&#39;ve never seen a &quot;casting away const&quot;  that made sense, but I&#39;m sure we could artificially create such a scenario.  <a href=\"https://www.google.com/search?q=i+don%27t+have+a+dog+in+this+fight&amp;oq=i+don%27t+have+a+dog+in+this+fiht&amp;aqs=chrome..69i57j0l3.4823j1j7&amp;sourceid=chrome&amp;ie=UTF-8\" rel=\"nofollow noreferrer\">I don&#39;t have a dog in this hunt.</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1084, "user_id": 3052687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2bc9457ad57919f5ab4abc0007323f1?s=128&d=identicon&r=PG&f=1", "display_name": "HelpingHand", "link": "https://stackoverflow.com/users/3052687/helpinghand"}, "is_accepted": false, "score": 0, "last_activity_date": 1585519142, "creation_date": 1585519142, "answer_id": 60921260, "question_id": 55828031, "link": "https://stackoverflow.com/questions/55828031/how-to-prevent-a-specific-function-or-method-from-being-called-from-within-an-in/60921260#60921260", "title": "How to prevent a specific function or method from being called from within an interrupt routine?", "body": "<p>Like the main system context (and task functions, if you are using an OS), interrupt service routines are just other contexts. The question <em>which code to run</em> (methods of which subset of classes) is orthogonal to the technique of the (class) libraries itself.</p>\n\n<p>RTOS libraries often impose \"limits\" which APIs may be called in ISRs (or, in ISRs with a given priority) - but these limits are \"only\" required to maintain data consistency, and not for HW technical reasons imposed by the \u00b5C infrastructure.</p>\n\n<p>You want to limit the use of the existing class libraries to certain context(s) because some class implementations consume more resources (time, stack memory space?) than you can afford in ISRs, but this is a matter of your deployment decisions in SW project architecture. </p>\n\n<p>Therefore, the most elegant solution from my point of view would be to go back to SW architecture level, create a neat piece of documentation (maybe a UML deployment diagram may already help you quite a lot), and to specify in which contexts you want which code to be executed. You will probably find that in ISR contexts, only a tiny fraction of your code is to be executed, so it may be feasible to mark the subset of classes (or, subsets of methods of classes) that are supposed to run in ISR contexts from the top-down perspective. You can backup this procedure by starting/finishing every ISR by setting/resetting an ISR-specific flag within a dedicated shared memory area, and to add assert statements to the critical classes/methods that detect if the particular code is run in an unwanted ISR context.</p>\n"}], "owner": {"reputation": 4441, "user_id": 788824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/96f5e5d858f1562ac8075c2664451b3b?s=128&d=identicon&r=PG", "display_name": "vsz", "link": "https://stackoverflow.com/users/788824/vsz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 207, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1586799753, "creation_date": 1556102134, "last_edit_date": 1586799753, "question_id": 55828031, "link": "https://stackoverflow.com/questions/55828031/how-to-prevent-a-specific-function-or-method-from-being-called-from-within-an-in", "title": "How to prevent a specific function or method from being called from within an interrupt routine?", "body": "<p>A hurdle in using C++ (instead of handling C++ as \"C with a few extra features\") in low-level embedded development is caused by interrupts. Often there are cases where time must be measured in individual CPU cycles, and some classes have no business being used there. Implicit conversions, copy constructors and similar things can cause issues when used within interrupts, especially if they happen behind the scenes. On the other hand, some carefully designed classes could be meaningfully used in interrupts.</p>\n\n<p>This raises a question: is there an elegant way to signal the compiler that a specific class, function, or variable (or just code lines) should throw a compile error when used inside an interrupt? (to not have to rely so heavily on comments stating <code>//Never call this from an interrupt!</code>)</p>\n\n<p><sub>\n<em>(If not, would it make sense to try getting something like this into the next C++ standard? I'm thinking of something like how the <code>constexpr</code> specifier informs the compiler what a function or variable can or cannot be used for. Would a <code>nointerrupt</code> specifier make sense, or does something already exist that provides that functionality?)</em></sub></p>\n"}, {"tags": ["c++", "c++11", "templates", "enable-if"], "comments": [{"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 1, "creation_date": 1556100874, "post_id": 55827546, "comment_id": 98319974, "body": "<i>&quot;What happen to the enable_if such we can omit it after that?&quot;</i> - After what? ... Please can you make your question a bit clearer?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1556100915, "post_id": 55827546, "comment_id": 98319987, "body": "it would be good if you included also the original code to make the differences easier accesible"}, {"owner": {"reputation": 964, "user_id": 1983586, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f5ee99caff1333fc6e4a329ba736d13?s=128&d=identicon&r=PG", "display_name": "MOHRE", "link": "https://stackoverflow.com/users/1983586/mohre"}, "edited": false, "score": 0, "creation_date": 1556101189, "post_id": 55827546, "comment_id": 98320140, "body": "I made it clear and added original code"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1556101227, "post_id": 55827546, "comment_id": 98320169, "body": "Who said the original <i>has</i> to work? It&#39;s a mistake made by the author."}, {"owner": {"reputation": 964, "user_id": 1983586, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f5ee99caff1333fc6e4a329ba736d13?s=128&d=identicon&r=PG", "display_name": "MOHRE", "link": "https://stackoverflow.com/users/1983586/mohre"}, "edited": false, "score": 0, "creation_date": 1556101371, "post_id": 55827546, "comment_id": 98320250, "body": "It has the <code>&lt;Policy&gt;</code> first but the author removed it in the new edition. Check edit history and comments."}, {"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 0, "creation_date": 1556101640, "post_id": 55827546, "comment_id": 98320403, "body": "I think the original was simply wrong."}, {"owner": {"reputation": 964, "user_id": 1983586, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f5ee99caff1333fc6e4a329ba736d13?s=128&d=identicon&r=PG", "display_name": "MOHRE", "link": "https://stackoverflow.com/users/1983586/mohre"}, "edited": false, "score": 0, "creation_date": 1556101703, "post_id": 55827546, "comment_id": 98320437, "body": "Can anybody explains why even the edited version works?"}], "answers": [{"comments": [{"owner": {"reputation": 964, "user_id": 1983586, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f5ee99caff1333fc6e4a329ba736d13?s=128&d=identicon&r=PG", "display_name": "MOHRE", "link": "https://stackoverflow.com/users/1983586/mohre"}, "edited": false, "score": 0, "creation_date": 1556101921, "post_id": 55827895, "comment_id": 98320573, "body": "Thank you for your attention. can you explain why correct version works? I mean which feature of C++ make this magic happen?"}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "reply_to_user": {"reputation": 964, "user_id": 1983586, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f5ee99caff1333fc6e4a329ba736d13?s=128&d=identicon&r=PG", "display_name": "MOHRE", "link": "https://stackoverflow.com/users/1983586/mohre"}, "edited": false, "score": 0, "creation_date": 1556102043, "post_id": 55827895, "comment_id": 98320646, "body": "@MOHRE: added an explanation"}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1556102457, "post_id": 55827895, "comment_id": 98320866, "body": "You are a <code>Policy</code>."}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 2, "creation_date": 1556102678, "post_id": 55827895, "comment_id": 98320994, "body": "@SombreroChicken: You are merely a <code>BasePolicy</code>."}], "tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": true, "score": 3, "last_activity_date": 1556101925, "last_edit_date": 1556101925, "creation_date": 1556101720, "answer_id": 55827895, "question_id": 55827546, "link": "https://stackoverflow.com/questions/55827546/enable-if-as-template-parameter/55827895#55827895", "title": "Enable_if as template parameter", "body": "<p>This happened:</p>\n\n<ol>\n<li><p>The author posted working code (<code>&lt;Policy&gt;</code> was present);</p></li>\n<li><p>There was some discussion in the comments that led the author to edit the code, and he made a mistake (<code>&lt;Policy&gt;</code> was removed); </p></li>\n<li><p>I rectified the mistake putting back the missing <code>&lt;Policy&gt;</code>.</p></li>\n</ol>\n\n<hr>\n\n<blockquote>\n  <p>Can anybody explains why even the edited version works?</p>\n</blockquote>\n\n<p>When you attempt to instantiate <code>Foo&lt;T&gt;</code>, the declaration with the default template parameters is taken into account by the compiler. The default parameter is evaluated and if <code>std::is_base_of&lt;BasePolicy, Policy&gt;::value</code> is <code>false</code> then <code>enable_if</code> produces a SFINAE-friendly error. </p>\n\n<p>If <code>std::is_base_of&lt;BasePolicy, Policy&gt;::value</code> is <code>true</code>, the partial specialization is chosen.</p>\n\n<pre><code>template &lt;typename Policy&gt;\nstruct Foo&lt;Policy&gt; {\n    Foo() { } \n};\n\n// is equivalent to\n\ntemplate &lt;typename Policy&gt;\nstruct Foo&lt;Policy, void&gt; {\n    Foo() { } \n};\n</code></pre>\n\n<p>The above specializations are equivalent because <code>typename std::enable_if&lt;true&gt;::type</code> is <code>void</code> by default.</p>\n"}], "owner": {"reputation": 964, "user_id": 1983586, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f5ee99caff1333fc6e4a329ba736d13?s=128&d=identicon&r=PG", "display_name": "MOHRE", "link": "https://stackoverflow.com/users/1983586/mohre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 300, "favorite_count": 0, "accepted_answer_id": 55827895, "answer_count": 1, "score": 2, "last_activity_date": 1556101925, "creation_date": 1556100588, "last_edit_date": 1556101281, "question_id": 55827546, "link": "https://stackoverflow.com/questions/55827546/enable-if-as-template-parameter", "title": "Enable_if as template parameter", "body": "<p>Please tell me why <a href=\"https://stackoverflow.com/questions/9659955/template-class-methods-definition-with-enable-if-as-template-parameter/9660236#9660236\">this answer</a> works.</p>\n\n<ol>\n<li>What happened to the enable_if such we can omit it after that? (further usage of Foo struct doesn't need that enable_if in template parameters)</li>\n<li>Should not that code be something like this:</li>\n</ol>\n\n<p>Origin version:</p>\n\n<pre><code>template &lt;typename Policy,\n          typename = typename std::enable_if&lt;std::is_base_of&lt;BasePolicy, Policy&gt;::value&gt;::type &gt;\nstruct Foo;\n\ntemplate &lt;typename Policy&gt;\nstruct Foo {\n    Foo();\n};\n\ntemplate &lt;typename Policy&gt;\nFoo&lt;Policy&gt;::Foo() {\n}\n</code></pre>\n\n<p>Edited version:</p>\n\n<pre><code>template &lt;typename Policy,\n          typename = typename std::enable_if&lt;std::is_base_of&lt;BasePolicy, Policy&gt;::value&gt;::type &gt;\nstruct Foo;\n\ntemplate &lt;typename Policy&gt;\nstruct Foo&lt;Policy&gt; {  // &lt;Policy&gt; added!\n    Foo();\n};\n\ntemplate &lt;typename Policy&gt;\nFoo&lt;Policy&gt;::Foo() {\n}\n</code></pre>\n"}]